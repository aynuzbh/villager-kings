(window.webpackJsonp = window.webpackJsonp || []).push([[1], {
    0: function (e, n, t) {
        e.exports = t("zUnb")
    },
    crnd: function (e, n) {
        function t(e) {
            return Promise.resolve().then(function () {
                var n = new Error("Cannot find module '" + e + "'");
                throw n.code = "MODULE_NOT_FOUND", n
            })
        }
        t.keys = function () {
            return []
        }, t.resolve = t, e.exports = t, t.id = "crnd"
    },
    zUnb: function (e, n, t) {
        "use strict";
        t.r(n);
        var r = function (e, n) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function (e, n) {
                    e.__proto__ = n
                } || function (e, n) {
                    for (var t in n) n.hasOwnProperty(t) && (e[t] = n[t])
                })(e, n)
        };

        function i(e, n) {
            function t() {
                this.constructor = e
            }
            r(e, n), e.prototype = null === n ? Object.create(n) : (t.prototype = n.prototype, new t)
        }
        var l = function () {
            return (l = Object.assign || function (e) {
                for (var n, t = 1, r = arguments.length; t < r; t++)
                    for (var i in n = arguments[t]) Object.prototype.hasOwnProperty.call(n, i) && (e[i] = n[i]);
                return e
            }).apply(this, arguments)
        };

        function o(e, n, t, r) {
            var i, l = arguments.length,
                o = l < 3 ? n : null === r ? r = Object.getOwnPropertyDescriptor(n, t) : r;
            if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) o = Reflect.decorate(e, n, t, r);
            else
                for (var u = e.length - 1; u >= 0; u--)(i = e[u]) && (o = (l < 3 ? i(o) : l > 3 ? i(n, t, o) : i(n, t)) || o);
            return l > 3 && o && Object.defineProperty(n, t, o), o
        }

        function u(e, n) {
            if ("object" == typeof Reflect && "function" == typeof Reflect.metadata) return Reflect.metadata(e, n)
        }

        function s(e) {
            var n = "function" == typeof Symbol && e[Symbol.iterator],
                t = 0;
            return n ? n.call(e) : {
                next: function () {
                    return e && t >= e.length && (e = void 0), {
                        value: e && e[t++],
                        done: !e
                    }
                }
            }
        }

        function a(e, n) {
            var t = "function" == typeof Symbol && e[Symbol.iterator];
            if (!t) return e;
            var r, i, l = t.call(e),
                o = [];
            try {
                for (;
                    (void 0 === n || n-- > 0) && !(r = l.next()).done;) o.push(r.value)
            } catch (u) {
                i = {
                    error: u
                }
            } finally {
                try {
                    r && !r.done && (t = l.return) && t.call(l)
                } finally {
                    if (i) throw i.error
                }
            }
            return o
        }

        function c() {
            for (var e = [], n = 0; n < arguments.length; n++) e = e.concat(a(arguments[n]));
            return e
        }
        var p = Array.isArray || function (e) {
            return e && "number" == typeof e.length
        };

        function h(e) {
            return null !== e && "object" == typeof e
        }

        function d(e) {
            return "function" == typeof e
        }

        function f(e) {
            return Error.call(this), this.message = e ? e.length + " errors occurred during unsubscription:\n" + e.map(function (e, n) {
                return n + 1 + ") " + e.toString()
            }).join("\n  ") : "", this.name = "UnsubscriptionError", this.errors = e, this
        }
        f.prototype = Object.create(Error.prototype);
        var g = f,
            v = function () {
                function e(e) {
                    this.closed = !1, this._parentOrParents = null, this._subscriptions = null, e && (this._unsubscribe = e)
                }
                var n;
                return e.prototype.unsubscribe = function () {
                    var n;
                    if (!this.closed) {
                        var t = this._parentOrParents,
                            r = this._unsubscribe,
                            i = this._subscriptions;
                        if (this.closed = !0, this._parentOrParents = null, this._subscriptions = null, t instanceof e) t.remove(this);
                        else if (null !== t)
                            for (var l = 0; l < t.length; ++l) t[l].remove(this);
                        if (d(r)) try {
                            r.call(this)
                        } catch (s) {
                            n = s instanceof g ? m(s.errors) : [s]
                        }
                        if (p(i)) {
                            l = -1;
                            for (var o = i.length; ++l < o;) {
                                var u = i[l];
                                if (h(u)) try {
                                    u.unsubscribe()
                                } catch (s) {
                                    n = n || [], s instanceof g ? n = n.concat(m(s.errors)) : n.push(s)
                                }
                            }
                        }
                        if (n) throw new g(n)
                    }
                }, e.prototype.add = function (n) {
                    var t = n;
                    if (!n) return e.EMPTY;
                    switch (typeof n) {
                        case "function":
                            t = new e(n);
                        case "object":
                            if (t === this || t.closed || "function" != typeof t.unsubscribe) return t;
                            if (this.closed) return t.unsubscribe(), t;
                            if (!(t instanceof e)) {
                                var r = t;
                                (t = new e)._subscriptions = [r]
                            }
                            break;
                        default:
                            throw new Error("unrecognized teardown " + n + " added to Subscription.")
                    }
                    var i = t._parentOrParents;
                    if (null === i) t._parentOrParents = this;
                    else if (i instanceof e) {
                        if (i === this) return t;
                        t._parentOrParents = [i, this]
                    } else {
                        if (-1 !== i.indexOf(this)) return t;
                        i.push(this)
                    }
                    var l = this._subscriptions;
                    return null === l ? this._subscriptions = [t] : l.push(t), t
                }, e.prototype.remove = function (e) {
                    var n = this._subscriptions;
                    if (n) {
                        var t = n.indexOf(e); - 1 !== t && n.splice(t, 1)
                    }
                }, e.EMPTY = ((n = new e).closed = !0, n), e
            }();

        function m(e) {
            return e.reduce(function (e, n) {
                return e.concat(n instanceof g ? n.errors : n)
            }, [])
        }
        var y = !1,
            S = {
                Promise: void 0,
                set useDeprecatedSynchronousErrorHandling(e) {
                    y = e
                },
                get useDeprecatedSynchronousErrorHandling() {
                    return y
                }
            };

        function E(e) {
            setTimeout(function () {
                throw e
            }, 0)
        }
        var b = {
                closed: !0,
                next: function (e) {},
                error: function (e) {
                    if (S.useDeprecatedSynchronousErrorHandling) throw e;
                    E(e)
                },
                complete: function () {}
            },
            O = "function" == typeof Symbol ? Symbol("rxSubscriber") : "@@rxSubscriber_" + Math.random(),
            R = function (e) {
                function n(t, r, i) {
                    var l = e.call(this) || this;
                    switch (l.syncErrorValue = null, l.syncErrorThrown = !1, l.syncErrorThrowable = !1, l.isStopped = !1, arguments.length) {
                        case 0:
                            l.destination = b;
                            break;
                        case 1:
                            if (!t) {
                                l.destination = b;
                                break
                            }
                            if ("object" == typeof t) {
                                t instanceof n ? (l.syncErrorThrowable = t.syncErrorThrowable, l.destination = t, t.add(l)) : (l.syncErrorThrowable = !0, l.destination = new T(l, t));
                                break
                            }
                        default:
                            l.syncErrorThrowable = !0, l.destination = new T(l, t, r, i)
                    }
                    return l
                }
                return i(n, e), n.prototype[O] = function () {
                    return this
                }, n.create = function (e, t, r) {
                    var i = new n(e, t, r);
                    return i.syncErrorThrowable = !1, i
                }, n.prototype.next = function (e) {
                    this.isStopped || this._next(e)
                }, n.prototype.error = function (e) {
                    this.isStopped || (this.isStopped = !0, this._error(e))
                }, n.prototype.complete = function () {
                    this.isStopped || (this.isStopped = !0, this._complete())
                }, n.prototype.unsubscribe = function () {
                    this.closed || (this.isStopped = !0, e.prototype.unsubscribe.call(this))
                }, n.prototype._next = function (e) {
                    this.destination.next(e)
                }, n.prototype._error = function (e) {
                    this.destination.error(e), this.unsubscribe()
                }, n.prototype._complete = function () {
                    this.destination.complete(), this.unsubscribe()
                }, n.prototype._unsubscribeAndRecycle = function () {
                    var e = this._parentOrParents;
                    return this._parentOrParents = null, this.unsubscribe(), this.closed = !1, this.isStopped = !1, this._parentOrParents = e, this
                }, n
            }(v),
            T = function (e) {
                function n(n, t, r, i) {
                    var l, o = e.call(this) || this;
                    o._parentSubscriber = n;
                    var u = o;
                    return d(t) ? l = t : t && (l = t.next, r = t.error, i = t.complete, t !== b && (d((u = Object.create(t)).unsubscribe) && o.add(u.unsubscribe.bind(u)), u.unsubscribe = o.unsubscribe.bind(o))), o._context = u, o._next = l, o._error = r, o._complete = i, o
                }
                return i(n, e), n.prototype.next = function (e) {
                    if (!this.isStopped && this._next) {
                        var n = this._parentSubscriber;
                        S.useDeprecatedSynchronousErrorHandling && n.syncErrorThrowable ? this.__tryOrSetError(n, this._next, e) && this.unsubscribe() : this.__tryOrUnsub(this._next, e)
                    }
                }, n.prototype.error = function (e) {
                    if (!this.isStopped) {
                        var n = this._parentSubscriber,
                            t = S.useDeprecatedSynchronousErrorHandling;
                        if (this._error) t && n.syncErrorThrowable ? (this.__tryOrSetError(n, this._error, e), this.unsubscribe()) : (this.__tryOrUnsub(this._error, e), this.unsubscribe());
                        else if (n.syncErrorThrowable) t ? (n.syncErrorValue = e, n.syncErrorThrown = !0) : E(e), this.unsubscribe();
                        else {
                            if (this.unsubscribe(), t) throw e;
                            E(e)
                        }
                    }
                }, n.prototype.complete = function () {
                    var e = this;
                    if (!this.isStopped) {
                        var n = this._parentSubscriber;
                        if (this._complete) {
                            var t = function () {
                                return e._complete.call(e._context)
                            };
                            S.useDeprecatedSynchronousErrorHandling && n.syncErrorThrowable ? (this.__tryOrSetError(n, t), this.unsubscribe()) : (this.__tryOrUnsub(t), this.unsubscribe())
                        } else this.unsubscribe()
                    }
                }, n.prototype.__tryOrUnsub = function (e, n) {
                    try {
                        e.call(this._context, n)
                    } catch (t) {
                        if (this.unsubscribe(), S.useDeprecatedSynchronousErrorHandling) throw t;
                        E(t)
                    }
                }, n.prototype.__tryOrSetError = function (e, n, t) {
                    if (!S.useDeprecatedSynchronousErrorHandling) throw new Error("bad call");
                    try {
                        n.call(this._context, t)
                    } catch (r) {
                        return S.useDeprecatedSynchronousErrorHandling ? (e.syncErrorValue = r, e.syncErrorThrown = !0, !0) : (E(r), !0)
                    }
                    return !1
                }, n.prototype._unsubscribe = function () {
                    var e = this._parentSubscriber;
                    this._context = null, this._parentSubscriber = null, e.unsubscribe()
                }, n
            }(R),
            C = "function" == typeof Symbol && Symbol.observable || "@@observable";

        function _() {}

        function I() {
            for (var e = [], n = 0; n < arguments.length; n++) e[n] = arguments[n];
            return A(e)
        }

        function A(e) {
            return e ? 1 === e.length ? e[0] : function (n) {
                return e.reduce(function (e, n) {
                    return n(e)
                }, n)
            } : _
        }
        var w = function () {
            function e(e) {
                this._isScalar = !1, e && (this._subscribe = e)
            }
            return e.prototype.lift = function (n) {
                var t = new e;
                return t.source = this, t.operator = n, t
            }, e.prototype.subscribe = function (e, n, t) {
                var r = this.operator,
                    i = function (e, n, t) {
                        if (e) {
                            if (e instanceof R) return e;
                            if (e[O]) return e[O]()
                        }
                        return e || n || t ? new R(e, n, t) : new R(b)
                    }(e, n, t);
                if (i.add(r ? r.call(i, this.source) : this.source || S.useDeprecatedSynchronousErrorHandling && !i.syncErrorThrowable ? this._subscribe(i) : this._trySubscribe(i)), S.useDeprecatedSynchronousErrorHandling && i.syncErrorThrowable && (i.syncErrorThrowable = !1, i.syncErrorThrown)) throw i.syncErrorValue;
                return i
            }, e.prototype._trySubscribe = function (e) {
                try {
                    return this._subscribe(e)
                } catch (n) {
                    S.useDeprecatedSynchronousErrorHandling && (e.syncErrorThrown = !0, e.syncErrorValue = n),
                        function (e) {
                            for (; e;) {
                                var n = e.destination;
                                if (e.closed || e.isStopped) return !1;
                                e = n && n instanceof R ? n : null
                            }
                            return !0
                        }(e) ? e.error(n) : console.warn(n)
                }
            }, e.prototype.forEach = function (e, n) {
                var t = this;
                return new(n = N(n))(function (n, r) {
                    var i;
                    i = t.subscribe(function (n) {
                        try {
                            e(n)
                        } catch (t) {
                            r(t), i && i.unsubscribe()
                        }
                    }, r, n)
                })
            }, e.prototype._subscribe = function (e) {
                var n = this.source;
                return n && n.subscribe(e)
            }, e.prototype[C] = function () {
                return this
            }, e.prototype.pipe = function () {
                for (var e = [], n = 0; n < arguments.length; n++) e[n] = arguments[n];
                return 0 === e.length ? this : A(e)(this)
            }, e.prototype.toPromise = function (e) {
                var n = this;
                return new(e = N(e))(function (e, t) {
                    var r;
                    n.subscribe(function (e) {
                        return r = e
                    }, function (e) {
                        return t(e)
                    }, function () {
                        return e(r)
                    })
                })
            }, e.create = function (n) {
                return new e(n)
            }, e
        }();

        function N(e) {
            if (e || (e = S.Promise || Promise), !e) throw new Error("no Promise impl found");
            return e
        }

        function P() {
            return Error.call(this), this.message = "object unsubscribed", this.name = "ObjectUnsubscribedError", this
        }
        P.prototype = Object.create(Error.prototype);
        var D = P,
            k = function (e) {
                function n(n, t) {
                    var r = e.call(this) || this;
                    return r.subject = n, r.subscriber = t, r.closed = !1, r
                }
                return i(n, e), n.prototype.unsubscribe = function () {
                    if (!this.closed) {
                        this.closed = !0;
                        var e = this.subject,
                            n = e.observers;
                        if (this.subject = null, n && 0 !== n.length && !e.isStopped && !e.closed) {
                            var t = n.indexOf(this.subscriber); - 1 !== t && n.splice(t, 1)
                        }
                    }
                }, n
            }(v),
            M = function (e) {
                function n(n) {
                    var t = e.call(this, n) || this;
                    return t.destination = n, t
                }
                return i(n, e), n
            }(R),
            L = function (e) {
                function n() {
                    var n = e.call(this) || this;
                    return n.observers = [], n.closed = !1, n.isStopped = !1, n.hasError = !1, n.thrownError = null, n
                }
                return i(n, e), n.prototype[O] = function () {
                    return new M(this)
                }, n.prototype.lift = function (e) {
                    var n = new x(this, this);
                    return n.operator = e, n
                }, n.prototype.next = function (e) {
                    if (this.closed) throw new D;
                    if (!this.isStopped)
                        for (var n = this.observers, t = n.length, r = n.slice(), i = 0; i < t; i++) r[i].next(e)
                }, n.prototype.error = function (e) {
                    if (this.closed) throw new D;
                    this.hasError = !0, this.thrownError = e, this.isStopped = !0;
                    for (var n = this.observers, t = n.length, r = n.slice(), i = 0; i < t; i++) r[i].error(e);
                    this.observers.length = 0
                }, n.prototype.complete = function () {
                    if (this.closed) throw new D;
                    this.isStopped = !0;
                    for (var e = this.observers, n = e.length, t = e.slice(), r = 0; r < n; r++) t[r].complete();
                    this.observers.length = 0
                }, n.prototype.unsubscribe = function () {
                    this.isStopped = !0, this.closed = !0, this.observers = null
                }, n.prototype._trySubscribe = function (n) {
                    if (this.closed) throw new D;
                    return e.prototype._trySubscribe.call(this, n)
                }, n.prototype._subscribe = function (e) {
                    if (this.closed) throw new D;
                    return this.hasError ? (e.error(this.thrownError), v.EMPTY) : this.isStopped ? (e.complete(), v.EMPTY) : (this.observers.push(e), new k(this, e))
                }, n.prototype.asObservable = function () {
                    var e = new w;
                    return e.source = this, e
                }, n.create = function (e, n) {
                    return new x(e, n)
                }, n
            }(w),
            x = function (e) {
                function n(n, t) {
                    var r = e.call(this) || this;
                    return r.destination = n, r.source = t, r
                }
                return i(n, e), n.prototype.next = function (e) {
                    var n = this.destination;
                    n && n.next && n.next(e)
                }, n.prototype.error = function (e) {
                    var n = this.destination;
                    n && n.error && this.destination.error(e)
                }, n.prototype.complete = function () {
                    var e = this.destination;
                    e && e.complete && this.destination.complete()
                }, n.prototype._subscribe = function (e) {
                    return this.source ? this.source.subscribe(e) : v.EMPTY
                }, n
            }(L);

        function F(e) {
            return e && "function" == typeof e.schedule
        }
        var U = function (e) {
                function n(n, t, r) {
                    var i = e.call(this) || this;
                    return i.parent = n, i.outerValue = t, i.outerIndex = r, i.index = 0, i
                }
                return i(n, e), n.prototype._next = function (e) {
                    this.parent.notifyNext(this.outerValue, e, this.outerIndex, this.index++, this)
                }, n.prototype._error = function (e) {
                    this.parent.notifyError(e, this), this.unsubscribe()
                }, n.prototype._complete = function () {
                    this.parent.notifyComplete(this), this.unsubscribe()
                }, n
            }(R),
            H = function (e) {
                return function (n) {
                    for (var t = 0, r = e.length; t < r && !n.closed; t++) n.next(e[t]);
                    n.complete()
                }
            };

        function G() {
            return "function" == typeof Symbol && Symbol.iterator ? Symbol.iterator : "@@iterator"
        }
        var B = G(),
            V = function (e) {
                return e && "number" == typeof e.length && "function" != typeof e
            };

        function W(e) {
            return !!e && "function" != typeof e.subscribe && "function" == typeof e.then
        }
        var j = function (e) {
            if (e && "function" == typeof e[C]) return r = e,
                function (e) {
                    var n = r[C]();
                    if ("function" != typeof n.subscribe) throw new TypeError("Provided object does not correctly implement Symbol.observable");
                    return n.subscribe(e)
                };
            if (V(e)) return H(e);
            if (W(e)) return t = e,
                function (e) {
                    return t.then(function (n) {
                        e.closed || (e.next(n), e.complete())
                    }, function (n) {
                        return e.error(n)
                    }).then(null, E), e
                };
            if (e && "function" == typeof e[B]) return n = e,
                function (e) {
                    for (var t = n[B]();;) {
                        var r = t.next();
                        if (r.done) {
                            e.complete();
                            break
                        }
                        if (e.next(r.value), e.closed) break
                    }
                    return "function" == typeof t.return && e.add(function () {
                        t.return && t.return()
                    }), e
                };
            var n, t, r, i = h(e) ? "an invalid object" : "'" + e + "'";
            throw new TypeError("You provided " + i + " where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")
        };

        function Y(e, n, t, r, i) {
            if (void 0 === i && (i = new U(e, t, r)), !i.closed) return n instanceof w ? n.subscribe(i) : j(n)(i)
        }
        var z = function (e) {
            function n() {
                return null !== e && e.apply(this, arguments) || this
            }
            return i(n, e), n.prototype.notifyNext = function (e, n, t, r, i) {
                this.destination.next(n)
            }, n.prototype.notifyError = function (e, n) {
                this.destination.error(e)
            }, n.prototype.notifyComplete = function (e) {
                this.destination.complete()
            }, n
        }(R);

        function K(e, n) {
            return function (t) {
                if ("function" != typeof e) throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");
                return t.lift(new q(e, n))
            }
        }
        var q = function () {
                function e(e, n) {
                    this.project = e, this.thisArg = n
                }
                return e.prototype.call = function (e, n) {
                    return n.subscribe(new $(e, this.project, this.thisArg))
                }, e
            }(),
            $ = function (e) {
                function n(n, t, r) {
                    var i = e.call(this, n) || this;
                    return i.project = t, i.count = 0, i.thisArg = r || i, i
                }
                return i(n, e), n.prototype._next = function (e) {
                    var n;
                    try {
                        n = this.project.call(this.thisArg, e, this.count++)
                    } catch (t) {
                        return void this.destination.error(t)
                    }
                    this.destination.next(n)
                }, n
            }(R);

        function Q(e, n) {
            return new w(function (t) {
                var r = new v,
                    i = 0;
                return r.add(n.schedule(function () {
                    i !== e.length ? (t.next(e[i++]), t.closed || r.add(this.schedule())) : t.complete()
                })), r
            })
        }

        function Z(e, n) {
            return n ? function (e, n) {
                if (null != e) {
                    if (function (e) {
                            return e && "function" == typeof e[C]
                        }(e)) return function (e, n) {
                        return new w(function (t) {
                            var r = new v;
                            return r.add(n.schedule(function () {
                                var i = e[C]();
                                r.add(i.subscribe({
                                    next: function (e) {
                                        r.add(n.schedule(function () {
                                            return t.next(e)
                                        }))
                                    },
                                    error: function (e) {
                                        r.add(n.schedule(function () {
                                            return t.error(e)
                                        }))
                                    },
                                    complete: function () {
                                        r.add(n.schedule(function () {
                                            return t.complete()
                                        }))
                                    }
                                }))
                            })), r
                        })
                    }(e, n);
                    if (W(e)) return function (e, n) {
                        return new w(function (t) {
                            var r = new v;
                            return r.add(n.schedule(function () {
                                return e.then(function (e) {
                                    r.add(n.schedule(function () {
                                        t.next(e), r.add(n.schedule(function () {
                                            return t.complete()
                                        }))
                                    }))
                                }, function (e) {
                                    r.add(n.schedule(function () {
                                        return t.error(e)
                                    }))
                                })
                            })), r
                        })
                    }(e, n);
                    if (V(e)) return Q(e, n);
                    if (function (e) {
                            return e && "function" == typeof e[B]
                        }(e) || "string" == typeof e) return function (e, n) {
                        if (!e) throw new Error("Iterable cannot be null");
                        return new w(function (t) {
                            var r, i = new v;
                            return i.add(function () {
                                r && "function" == typeof r.return && r.return()
                            }), i.add(n.schedule(function () {
                                r = e[B](), i.add(n.schedule(function () {
                                    if (!t.closed) {
                                        var e, n;
                                        try {
                                            var i = r.next();
                                            e = i.value, n = i.done
                                        } catch (l) {
                                            return void t.error(l)
                                        }
                                        n ? t.complete() : (t.next(e), this.schedule())
                                    }
                                }))
                            })), i
                        })
                    }(e, n)
                }
                throw new TypeError((null !== e && typeof e || e) + " is not observable")
            }(e, n) : e instanceof w ? e : new w(j(e))
        }

        function X(e, n, t) {
            return void 0 === t && (t = Number.POSITIVE_INFINITY), "function" == typeof n ? function (r) {
                return r.pipe(X(function (t, r) {
                    return Z(e(t, r)).pipe(K(function (e, i) {
                        return n(t, e, r, i)
                    }))
                }, t))
            } : ("number" == typeof n && (t = n), function (n) {
                return n.lift(new J(e, t))
            })
        }
        var J = function () {
                function e(e, n) {
                    void 0 === n && (n = Number.POSITIVE_INFINITY), this.project = e, this.concurrent = n
                }
                return e.prototype.call = function (e, n) {
                    return n.subscribe(new ee(e, this.project, this.concurrent))
                }, e
            }(),
            ee = function (e) {
                function n(n, t, r) {
                    void 0 === r && (r = Number.POSITIVE_INFINITY);
                    var i = e.call(this, n) || this;
                    return i.project = t, i.concurrent = r, i.hasCompleted = !1, i.buffer = [], i.active = 0, i.index = 0, i
                }
                return i(n, e), n.prototype._next = function (e) {
                    this.active < this.concurrent ? this._tryNext(e) : this.buffer.push(e)
                }, n.prototype._tryNext = function (e) {
                    var n, t = this.index++;
                    try {
                        n = this.project(e, t)
                    } catch (r) {
                        return void this.destination.error(r)
                    }
                    this.active++, this._innerSub(n, e, t)
                }, n.prototype._innerSub = function (e, n, t) {
                    var r = new U(this, void 0, void 0);
                    this.destination.add(r), Y(this, e, n, t, r)
                }, n.prototype._complete = function () {
                    this.hasCompleted = !0, 0 === this.active && 0 === this.buffer.length && this.destination.complete(), this.unsubscribe()
                }, n.prototype.notifyNext = function (e, n, t, r, i) {
                    this.destination.next(n)
                }, n.prototype.notifyComplete = function (e) {
                    var n = this.buffer;
                    this.remove(e), this.active--, n.length > 0 ? this._next(n.shift()) : 0 === this.active && this.hasCompleted && this.destination.complete()
                }, n
            }(z);

        function ne(e) {
            return e
        }

        function te(e) {
            return void 0 === e && (e = Number.POSITIVE_INFINITY), X(ne, e)
        }

        function re(e, n) {
            return n ? Q(e, n) : new w(H(e))
        }

        function ie() {
            for (var e = [], n = 0; n < arguments.length; n++) e[n] = arguments[n];
            var t = Number.POSITIVE_INFINITY,
                r = null,
                i = e[e.length - 1];
            return F(i) ? (r = e.pop(), e.length > 1 && "number" == typeof e[e.length - 1] && (t = e.pop())) : "number" == typeof i && (t = e.pop()), null === r && 1 === e.length && e[0] instanceof w ? e[0] : te(t)(re(e, r))
        }

        function le() {
            return function (e) {
                return e.lift(new oe(e))
            }
        }
        var oe = function () {
                function e(e) {
                    this.connectable = e
                }
                return e.prototype.call = function (e, n) {
                    var t = this.connectable;
                    t._refCount++;
                    var r = new ue(e, t),
                        i = n.subscribe(r);
                    return r.closed || (r.connection = t.connect()), i
                }, e
            }(),
            ue = function (e) {
                function n(n, t) {
                    var r = e.call(this, n) || this;
                    return r.connectable = t, r
                }
                return i(n, e), n.prototype._unsubscribe = function () {
                    var e = this.connectable;
                    if (e) {
                        this.connectable = null;
                        var n = e._refCount;
                        if (n <= 0) this.connection = null;
                        else if (e._refCount = n - 1, n > 1) this.connection = null;
                        else {
                            var t = this.connection,
                                r = e._connection;
                            this.connection = null, !r || t && r !== t || r.unsubscribe()
                        }
                    } else this.connection = null
                }, n
            }(R),
            se = function (e) {
                function n(n, t) {
                    var r = e.call(this) || this;
                    return r.source = n, r.subjectFactory = t, r._refCount = 0, r._isComplete = !1, r
                }
                return i(n, e), n.prototype._subscribe = function (e) {
                    return this.getSubject().subscribe(e)
                }, n.prototype.getSubject = function () {
                    var e = this._subject;
                    return e && !e.isStopped || (this._subject = this.subjectFactory()), this._subject
                }, n.prototype.connect = function () {
                    var e = this._connection;
                    return e || (this._isComplete = !1, (e = this._connection = new v).add(this.source.subscribe(new ce(this.getSubject(), this))), e.closed && (this._connection = null, e = v.EMPTY)), e
                }, n.prototype.refCount = function () {
                    return le()(this)
                }, n
            }(w).prototype,
            ae = {
                operator: {
                    value: null
                },
                _refCount: {
                    value: 0,
                    writable: !0
                },
                _subject: {
                    value: null,
                    writable: !0
                },
                _connection: {
                    value: null,
                    writable: !0
                },
                _subscribe: {
                    value: se._subscribe
                },
                _isComplete: {
                    value: se._isComplete,
                    writable: !0
                },
                getSubject: {
                    value: se.getSubject
                },
                connect: {
                    value: se.connect
                },
                refCount: {
                    value: se.refCount
                }
            },
            ce = function (e) {
                function n(n, t) {
                    var r = e.call(this, n) || this;
                    return r.connectable = t, r
                }
                return i(n, e), n.prototype._error = function (n) {
                    this._unsubscribe(), e.prototype._error.call(this, n)
                }, n.prototype._complete = function () {
                    this.connectable._isComplete = !0, this._unsubscribe(), e.prototype._complete.call(this)
                }, n.prototype._unsubscribe = function () {
                    var e = this.connectable;
                    if (e) {
                        this.connectable = null;
                        var n = e._connection;
                        e._refCount = 0, e._subject = null, e._connection = null, n && n.unsubscribe()
                    }
                }, n
            }(M);

        function pe() {
            return new L
        }

        function he(e) {
            for (var n in e)
                if (e[n] === he) return n;
            throw Error("Could not find renamed property on target object.")
        }

        function de(e, n) {
            for (var t in n) n.hasOwnProperty(t) && !e.hasOwnProperty(t) && (e[t] = n[t])
        }
        var fe = he({
                ngInjectableDef: he
            }),
            ge = he({
                ngBaseDef: he
            });

        function ve(e) {
            return {
                providedIn: e.providedIn || null,
                factory: e.factory,
                value: void 0
            }
        }

        function me(e) {
            return e && e.hasOwnProperty(fe) ? e[fe] : null
        }
        var ye = function () {
                function e(e, n) {
                    this._desc = e, this.ngMetadataName = "InjectionToken", this.ngInjectableDef = void 0 !== n ? ve({
                        providedIn: n.providedIn || "root",
                        factory: n.factory
                    }) : void 0
                }
                return e.prototype.toString = function () {
                    return "InjectionToken " + this._desc
                }, e
            }(),
            Se = "__parameters__",
            Ee = "__prop__metadata__";

        function be(e) {
            return function () {
                for (var n = [], t = 0; t < arguments.length; t++) n[t] = arguments[t];
                if (e) {
                    var r = e.apply(void 0, c(n));
                    for (var i in r) this[i] = r[i]
                }
            }
        }

        function Oe(e, n, t) {
            var r = be(n);

            function i() {
                for (var e, n = [], t = 0; t < arguments.length; t++) n[t] = arguments[t];
                if (this instanceof i) return r.apply(this, n), this;
                var l = new((e = i).bind.apply(e, c([void 0], n)));
                return o.annotation = l, o;

                function o(e, n, t) {
                    for (var r = e.hasOwnProperty(Se) ? e[Se] : Object.defineProperty(e, Se, {
                            value: []
                        })[Se]; r.length <= t;) r.push(null);
                    return (r[t] = r[t] || []).push(l), e
                }
            }
            return t && (i.prototype = Object.create(t.prototype)), i.prototype.ngMetadataName = e, i.annotationCls = i, i
        }

        function Re(e, n, t, r) {
            var i = be(n);

            function l() {
                for (var e, n = [], t = 0; t < arguments.length; t++) n[t] = arguments[t];
                if (this instanceof l) return i.apply(this, n), this;
                var o = new((e = l).bind.apply(e, c([void 0], n)));
                return function (e, t) {
                    var i = e.constructor,
                        l = i.hasOwnProperty(Ee) ? i[Ee] : Object.defineProperty(i, Ee, {
                            value: {}
                        })[Ee];
                    l[t] = l.hasOwnProperty(t) && l[t] || [], l[t].unshift(o), r && r.apply(void 0, c([e, t], n))
                }
            }
            return t && (l.prototype = Object.create(t.prototype)), l.prototype.ngMetadataName = e, l.annotationCls = l, l
        }
        var Te = new ye("AnalyzeForEntryComponents"),
            Ce = "undefined" != typeof window && window,
            _e = "undefined" != typeof self && "undefined" != typeof WorkerGlobalScope && self instanceof WorkerGlobalScope && self,
            Ie = "undefined" != typeof global && global || Ce || _e,
            Ae = Promise.resolve(0),
            we = null;

        function Ne() {
            if (!we) {
                var e = Ie.Symbol;
                if (e && e.iterator) we = e.iterator;
                else
                    for (var n = Object.getOwnPropertyNames(Map.prototype), t = 0; t < n.length; ++t) {
                        var r = n[t];
                        "entries" !== r && "size" !== r && Map.prototype[r] === Map.prototype.entries && (we = r)
                    }
            }
            return we
        }

        function Pe(e) {
            "undefined" == typeof Zone ? Ae.then(function () {
                e && e.apply(null, null)
            }) : Zone.current.scheduleMicroTask("scheduleMicrotask", e)
        }

        function De(e, n) {
            return e === n || "number" == typeof e && "number" == typeof n && isNaN(e) && isNaN(n)
        }

        function ke(e) {
            if ("string" == typeof e) return e;
            if (e instanceof Array) return "[" + e.map(ke).join(", ") + "]";
            if (null == e) return "" + e;
            if (e.overriddenName) return "" + e.overriddenName;
            if (e.name) return "" + e.name;
            var n = e.toString();
            if (null == n) return "" + n;
            var t = n.indexOf("\n");
            return -1 === t ? n : n.substring(0, t)
        }
        var Me = he({
            __forward_ref__: he
        });

        function Le(e) {
            return e.__forward_ref__ = Le, e.toString = function () {
                return ke(this())
            }, e
        }

        function xe(e) {
            var n = e;
            return "function" == typeof n && n.hasOwnProperty(Me) && n.__forward_ref__ === Le ? n() : e
        }
        var Fe, Ue = function (e) {
                return e[e.Emulated = 0] = "Emulated", e[e.Native = 1] = "Native", e[e.None = 2] = "None", e[e.ShadowDom = 3] = "ShadowDom", e
            }({}),
            He = Oe("Inject", function (e) {
                return {
                    token: e
                }
            }),
            Ge = Oe("Optional"),
            Be = Oe("Self"),
            Ve = Oe("SkipSelf"),
            We = function (e) {
                return e[e.Default = 0] = "Default", e[e.Host = 1] = "Host", e[e.Self = 2] = "Self", e[e.SkipSelf = 4] = "SkipSelf", e[e.Optional = 8] = "Optional", e
            }({}),
            je = void 0;

        function Ye(e) {
            var n = je;
            return je = e, n
        }

        function ze(e, n) {
            return void 0 === n && (n = We.Default), (Fe || function (e, n) {
                if (void 0 === n && (n = We.Default), void 0 === je) throw new Error("inject() must be called from an injection context");
                return null === je ? function (e, n, t) {
                    var r = me(e);
                    if (r && "root" == r.providedIn) return void 0 === r.value ? r.value = r.factory() : r.value;
                    if (t & We.Optional) return null;
                    throw new Error("Injector: NOT_FOUND [" + ke(e) + "]")
                }(e, 0, n) : je.get(e, n & We.Optional ? null : void 0, n)
            })(e, n)
        }
        var Ke = /([A-Z])/g;

        function qe(e) {
            try {
                return null != e ? e.toString().slice(0, 30) : e
            } catch (n) {
                return "[ERROR] Exception while trying to serialize the value"
            }
        }

        function $e(e, n) {
            var t = Xe(e),
                r = Xe(n);
            return t && r ? function (e, n, t) {
                for (var r = e[Ne()](), i = n[Ne()]();;) {
                    var l = r.next(),
                        o = i.next();
                    if (l.done && o.done) return !0;
                    if (l.done || o.done) return !1;
                    if (!t(l.value, o.value)) return !1
                }
            }(e, n, $e) : !(t || !e || "object" != typeof e && "function" != typeof e || r || !n || "object" != typeof n && "function" != typeof n) || De(e, n)
        }
        var Qe = function () {
                function e(e) {
                    this.wrapped = e
                }
                return e.wrap = function (n) {
                    return new e(n)
                }, e.unwrap = function (n) {
                    return e.isWrapped(n) ? n.wrapped : n
                }, e.isWrapped = function (n) {
                    return n instanceof e
                }, e
            }(),
            Ze = function () {
                function e(e, n, t) {
                    this.previousValue = e, this.currentValue = n, this.firstChange = t
                }
                return e.prototype.isFirstChange = function () {
                    return this.firstChange
                }, e
            }();

        function Xe(e) {
            return !!Je(e) && (Array.isArray(e) || !(e instanceof Map) && Ne() in e)
        }

        function Je(e) {
            return null !== e && ("function" == typeof e || "object" == typeof e)
        }

        function en() {
            for (var e = [], n = 0; n < arguments.length; n++) e[n] = arguments[n]
        }
        var nn = "__source",
            tn = new Object,
            rn = new ye("INJECTOR"),
            ln = function () {
                function e() {}
                return e.prototype.get = function (e, n) {
                    if (void 0 === n && (n = tn), n === tn) throw new Error("NullInjectorError: No provider for " + ke(e) + "!");
                    return n
                }, e
            }(),
            on = function () {
                function e() {}
                return e.create = function (e, n) {
                    return Array.isArray(e) ? new vn(e, n) : new vn(e.providers, e.parent, e.name || null)
                }, e.THROW_IF_NOT_FOUND = tn, e.NULL = new ln, e.ngInjectableDef = ve({
                    providedIn: "any",
                    factory: function () {
                        return ze(rn)
                    }
                }), e.__NG_ELEMENT_ID__ = function () {
                    return un()
                }, e
            }(),
            un = en,
            sn = function (e) {
                return e
            },
            an = [],
            cn = sn,
            pn = function () {
                return Array.prototype.slice.call(arguments)
            },
            hn = he({
                provide: String,
                useValue: he
            }),
            dn = on.NULL,
            fn = /\n/gm,
            gn = "\u0275",
            vn = function () {
                function e(e, n, t) {
                    void 0 === n && (n = dn), void 0 === t && (t = null), this.parent = n, this.source = t;
                    var r = this._records = new Map;
                    r.set(on, {
                            token: on,
                            fn: sn,
                            deps: an,
                            value: this,
                            useNew: !1
                        }), r.set(rn, {
                            token: rn,
                            fn: sn,
                            deps: an,
                            value: this,
                            useNew: !1
                        }),
                        function e(n, t) {
                            if (t)
                                if ((t = xe(t)) instanceof Array)
                                    for (var r = 0; r < t.length; r++) e(n, t[r]);
                                else {
                                    if ("function" == typeof t) throw Sn("Function/Class not supported", t);
                                    if (!t || "object" != typeof t || !t.provide) throw Sn("Unexpected provider", t);
                                    var i = xe(t.provide),
                                        l = function (e) {
                                            var n = function (e) {
                                                    var n = an,
                                                        t = e.deps;
                                                    if (t && t.length) {
                                                        n = [];
                                                        for (var r = 0; r < t.length; r++) {
                                                            var i = 6;
                                                            if ((s = xe(t[r])) instanceof Array)
                                                                for (var l = 0, o = s; l < o.length; l++) {
                                                                    var u = o[l];
                                                                    u instanceof Ge || u == Ge ? i |= 1 : u instanceof Ve || u == Ve ? i &= -3 : u instanceof Be || u == Be ? i &= -5 : s = u instanceof He ? u.token : xe(u)
                                                                }
                                                            n.push({
                                                                token: s,
                                                                options: i
                                                            })
                                                        }
                                                    } else if (e.useExisting) {
                                                        var s;
                                                        n = [{
                                                            token: s = xe(e.useExisting),
                                                            options: 6
                                                        }]
                                                    } else if (!(t || hn in e)) throw Sn("'deps' required", e);
                                                    return n
                                                }(e),
                                                t = sn,
                                                r = an,
                                                i = !1,
                                                l = xe(e.provide);
                                            if (hn in e) r = e.useValue;
                                            else if (e.useFactory) t = e.useFactory;
                                            else if (e.useExisting);
                                            else if (e.useClass) i = !0, t = xe(e.useClass);
                                            else {
                                                if ("function" != typeof l) throw Sn("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable", e);
                                                i = !0, t = l
                                            }
                                            return {
                                                deps: n,
                                                fn: t,
                                                useNew: i,
                                                value: r
                                            }
                                        }(t);
                                    if (!0 === t.multi) {
                                        var o = n.get(i);
                                        if (o) {
                                            if (o.fn !== pn) throw mn(i)
                                        } else n.set(i, o = {
                                            token: t.provide,
                                            deps: [],
                                            useNew: !1,
                                            fn: pn,
                                            value: an
                                        });
                                        o.deps.push({
                                            token: i = t,
                                            options: 6
                                        })
                                    }
                                    var u = n.get(i);
                                    if (u && u.fn == pn) throw mn(i);
                                    n.set(i, l)
                                }
                        }(r, e)
                }
                return e.prototype.get = function (e, n, t) {
                    void 0 === t && (t = We.Default);
                    var r = this._records.get(e);
                    try {
                        return function e(n, t, r, i, l, o) {
                            try {
                                return function (n, t, r, i, l, o) {
                                    var u, s;
                                    if (!t || o & We.SkipSelf) o & We.Self || (s = i.get(n, l, We.Default));
                                    else {
                                        if ((s = t.value) == cn) throw Error(gn + "Circular dependency");
                                        if (s === an) {
                                            t.value = cn;
                                            var a = t.useNew,
                                                p = t.fn,
                                                h = t.deps,
                                                d = an;
                                            if (h.length) {
                                                d = [];
                                                for (var f = 0; f < h.length; f++) {
                                                    var g = h[f],
                                                        v = g.options,
                                                        m = 2 & v ? r.get(g.token) : void 0;
                                                    d.push(e(g.token, m, r, m || 4 & v ? i : dn, 1 & v ? null : on.THROW_IF_NOT_FOUND, We.Default))
                                                }
                                            }
                                            t.value = s = a ? new((u = p).bind.apply(u, c([void 0], d))) : p.apply(void 0, d)
                                        }
                                    }
                                    return s
                                }(n, t, r, i, l, o)
                            } catch (u) {
                                throw u instanceof Error || (u = new Error(u)), (u.ngTempTokenPath = u.ngTempTokenPath || []).unshift(n), t && t.value == cn && (t.value = an), u
                            }
                        }(e, r, this._records, this.parent, n, t)
                    } catch (l) {
                        var i = l.ngTempTokenPath;
                        throw e[nn] && i.unshift(e[nn]), l.message = yn("\n" + l.message, i, this.source), l.ngTokenPath = i, l.ngTempTokenPath = null, l
                    }
                }, e.prototype.toString = function () {
                    var e = [];
                    return this._records.forEach(function (n, t) {
                        return e.push(ke(t))
                    }), "StaticInjector[" + e.join(", ") + "]"
                }, e
            }();

        function mn(e) {
            return Sn("Cannot mix multi providers and regular providers", e)
        }

        function yn(e, n, t) {
            void 0 === t && (t = null), e = e && "\n" === e.charAt(0) && e.charAt(1) == gn ? e.substr(2) : e;
            var r = ke(n);
            if (n instanceof Array) r = n.map(ke).join(" -> ");
            else if ("object" == typeof n) {
                var i = [];
                for (var l in n)
                    if (n.hasOwnProperty(l)) {
                        var o = n[l];
                        i.push(l + ":" + ("string" == typeof o ? JSON.stringify(o) : ke(o)))
                    } r = "{" + i.join(", ") + "}"
            }
            return "StaticInjectorError" + (t ? "(" + t + ")" : "") + "[" + r + "]: " + e.replace(fn, "\n  ")
        }

        function Sn(e, n) {
            return new Error(yn(e, n))
        }
        var En = new ye("The presence of this token marks an injector as being the root injector."),
            bn = function () {
                return function () {}
            }(),
            On = function () {
                return function () {}
            }();

        function Rn(e) {
            var n = Error("No component factory found for " + ke(e) + ". Did you add it to @NgModule.entryComponents?");
            return n[Tn] = e, n
        }
        var Tn = "ngComponent",
            Cn = function () {
                function e() {}
                return e.prototype.resolveComponentFactory = function (e) {
                    throw Rn(e)
                }, e
            }(),
            _n = function () {
                function e() {}
                return e.NULL = new Cn, e
            }(),
            In = function () {
                function e(e, n, t) {
                    this._parent = n, this._ngModule = t, this._factories = new Map;
                    for (var r = 0; r < e.length; r++) {
                        var i = e[r];
                        this._factories.set(i.componentType, i)
                    }
                }
                return e.prototype.resolveComponentFactory = function (e) {
                    var n = this._factories.get(e);
                    if (!n && this._parent && (n = this._parent.resolveComponentFactory(e)), !n) throw Rn(e);
                    return new An(n, this._ngModule)
                }, e
            }(),
            An = function (e) {
                function n(n, t) {
                    var r = e.call(this) || this;
                    return r.factory = n, r.ngModule = t, r.selector = n.selector, r.componentType = n.componentType, r.ngContentSelectors = n.ngContentSelectors, r.inputs = n.inputs, r.outputs = n.outputs, r
                }
                return i(n, e), n.prototype.create = function (e, n, t, r) {
                    return this.factory.create(e, n, t, r || this.ngModule)
                }, n
            }(On),
            wn = function () {
                return function () {}
            }(),
            Nn = function () {
                return function () {}
            }(),
            Pn = function () {
                function e(e) {
                    this.nativeElement = e
                }
                return e.__NG_ELEMENT_ID__ = function () {
                    return Dn(e)
                }, e
            }(),
            Dn = en,
            kn = function () {
                return function () {}
            }(),
            Mn = function () {
                return function () {}
            }(),
            Ln = function (e) {
                return e[e.Important = 1] = "Important", e[e.DashCase = 2] = "DashCase", e
            }({}),
            xn = function () {
                function e() {}
                return e.__NG_ELEMENT_ID__ = function () {
                    return Fn()
                }, e
            }(),
            Fn = en,
            Un = function (e) {
                return e[e.NONE = 0] = "NONE", e[e.HTML = 1] = "HTML", e[e.STYLE = 2] = "STYLE", e[e.SCRIPT = 3] = "SCRIPT", e[e.URL = 4] = "URL", e[e.RESOURCE_URL = 5] = "RESOURCE_URL", e
            }({}),
            Hn = function () {
                return function () {}
            }(),
            Gn = new(function () {
                return function (e) {
                    this.full = e, this.major = e.split(".")[0], this.minor = e.split(".")[1], this.patch = e.split(".").slice(2).join(".")
                }
            }())("7.2.15"),
            Bn = !0,
            Vn = !1;

        function Wn() {
            return Vn = !0, Bn
        }
        var jn = function () {
                function e(e) {
                    if (this.defaultDoc = e, this.inertDocument = this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"), this.inertBodyElement = this.inertDocument.body, null == this.inertBodyElement) {
                        var n = this.inertDocument.createElement("html");
                        this.inertDocument.appendChild(n), this.inertBodyElement = this.inertDocument.createElement("body"), n.appendChild(this.inertBodyElement)
                    }
                    this.inertBodyElement.innerHTML = '<svg><g onload="this.parentNode.remove()"></g></svg>', !this.inertBodyElement.querySelector || this.inertBodyElement.querySelector("svg") ? (this.inertBodyElement.innerHTML = '<svg><p><style><img src="</style><img src=x onerror=alert(1)//">', this.getInertBodyElement = this.inertBodyElement.querySelector && this.inertBodyElement.querySelector("svg img") && function () {
                        try {
                            return !!window.DOMParser
                        } catch (e) {
                            return !1
                        }
                    }() ? this.getInertBodyElement_DOMParser : this.getInertBodyElement_InertDocument) : this.getInertBodyElement = this.getInertBodyElement_XHR
                }
                return e.prototype.getInertBodyElement_XHR = function (e) {
                    e = "<body><remove></remove>" + e + "</body>";
                    try {
                        e = encodeURI(e)
                    } catch (r) {
                        return null
                    }
                    var n = new XMLHttpRequest;
                    n.responseType = "document", n.open("GET", "data:text/html;charset=utf-8," + e, !1), n.send(void 0);
                    var t = n.response.body;
                    return t.removeChild(t.firstChild), t
                }, e.prototype.getInertBodyElement_DOMParser = function (e) {
                    e = "<body><remove></remove>" + e + "</body>";
                    try {
                        var n = (new window.DOMParser).parseFromString(e, "text/html").body;
                        return n.removeChild(n.firstChild), n
                    } catch (t) {
                        return null
                    }
                }, e.prototype.getInertBodyElement_InertDocument = function (e) {
                    var n = this.inertDocument.createElement("template");
                    return "content" in n ? (n.innerHTML = e, n) : (this.inertBodyElement.innerHTML = e, this.defaultDoc.documentMode && this.stripCustomNsAttrs(this.inertBodyElement), this.inertBodyElement)
                }, e.prototype.stripCustomNsAttrs = function (e) {
                    for (var n = e.attributes, t = n.length - 1; 0 < t; t--) {
                        var r = n.item(t).name;
                        "xmlns:ns1" !== r && 0 !== r.indexOf("ns1:") || e.removeAttribute(r)
                    }
                    for (var i = e.firstChild; i;) i.nodeType === Node.ELEMENT_NODE && this.stripCustomNsAttrs(i), i = i.nextSibling
                }, e
            }(),
            Yn = /^(?:(?:https?|mailto|ftp|tel|file):|[^&:\/?#]*(?:[\/?#]|$))/gi,
            zn = /^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;

        function Kn(e) {
            return (e = String(e)).match(Yn) || e.match(zn) ? e : (Wn() && console.warn("WARNING: sanitizing unsafe URL value " + e + " (see http://g.co/ng/security#xss)"), "unsafe:" + e)
        }

        function qn(e) {
            var n, t, r = {};
            try {
                for (var i = s(e.split(",")), l = i.next(); !l.done; l = i.next()) r[l.value] = !0
            } catch (o) {
                n = {
                    error: o
                }
            } finally {
                try {
                    l && !l.done && (t = i.return) && t.call(i)
                } finally {
                    if (n) throw n.error
                }
            }
            return r
        }

        function $n() {
            for (var e, n, t = [], r = 0; r < arguments.length; r++) t[r] = arguments[r];
            var i = {};
            try {
                for (var l = s(t), o = l.next(); !o.done; o = l.next()) {
                    var u = o.value;
                    for (var a in u) u.hasOwnProperty(a) && (i[a] = !0)
                }
            } catch (c) {
                e = {
                    error: c
                }
            } finally {
                try {
                    o && !o.done && (n = l.return) && n.call(l)
                } finally {
                    if (e) throw e.error
                }
            }
            return i
        }
        var Qn, Zn = qn("area,br,col,hr,img,wbr"),
            Xn = qn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),
            Jn = qn("rp,rt"),
            et = $n(Jn, Xn),
            nt = $n(Zn, $n(Xn, qn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")), $n(Jn, qn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")), et),
            tt = qn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),
            rt = qn("srcset"),
            it = $n(tt, rt, qn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width")),
            lt = qn("script,style,template"),
            ot = function () {
                function e() {
                    this.sanitizedSomething = !1, this.buf = []
                }
                return e.prototype.sanitizeChildren = function (e) {
                    for (var n = e.firstChild, t = !0; n;)
                        if (n.nodeType === Node.ELEMENT_NODE ? t = this.startElement(n) : n.nodeType === Node.TEXT_NODE ? this.chars(n.nodeValue) : this.sanitizedSomething = !0, t && n.firstChild) n = n.firstChild;
                        else
                            for (; n;) {
                                n.nodeType === Node.ELEMENT_NODE && this.endElement(n);
                                var r = this.checkClobberedElement(n, n.nextSibling);
                                if (r) {
                                    n = r;
                                    break
                                }
                                n = this.checkClobberedElement(n, n.parentNode)
                            }
                    return this.buf.join("")
                }, e.prototype.startElement = function (e) {
                    var n, t = e.nodeName.toLowerCase();
                    if (!nt.hasOwnProperty(t)) return this.sanitizedSomething = !0, !lt.hasOwnProperty(t);
                    this.buf.push("<"), this.buf.push(t);
                    for (var r = e.attributes, i = 0; i < r.length; i++) {
                        var l = r.item(i),
                            o = l.name,
                            u = o.toLowerCase();
                        if (it.hasOwnProperty(u)) {
                            var s = l.value;
                            tt[u] && (s = Kn(s)), rt[u] && (n = s, s = (n = String(n)).split(",").map(function (e) {
                                return Kn(e.trim())
                            }).join(", ")), this.buf.push(" ", o, '="', at(s), '"')
                        } else this.sanitizedSomething = !0
                    }
                    return this.buf.push(">"), !0
                }, e.prototype.endElement = function (e) {
                    var n = e.nodeName.toLowerCase();
                    nt.hasOwnProperty(n) && !Zn.hasOwnProperty(n) && (this.buf.push("</"), this.buf.push(n), this.buf.push(">"))
                }, e.prototype.chars = function (e) {
                    this.buf.push(at(e))
                }, e.prototype.checkClobberedElement = function (e, n) {
                    if (n && (e.compareDocumentPosition(n) & Node.DOCUMENT_POSITION_CONTAINED_BY) === Node.DOCUMENT_POSITION_CONTAINED_BY) throw new Error("Failed to sanitize html because the element is clobbered: " + e.outerHTML);
                    return n
                }, e
            }(),
            ut = /[\uD800-\uDBFF][\uDC00-\uDFFF]/g,
            st = /([^\#-~ |!])/g;

        function at(e) {
            return e.replace(/&/g, "&amp;").replace(ut, function (e) {
                return "&#" + (1024 * (e.charCodeAt(0) - 55296) + (e.charCodeAt(1) - 56320) + 65536) + ";"
            }).replace(st, function (e) {
                return "&#" + e.charCodeAt(0) + ";"
            }).replace(/</g, "&lt;").replace(/>/g, "&gt;")
        }

        function ct(e) {
            return "content" in e && function (e) {
                return e.nodeType === Node.ELEMENT_NODE && "TEMPLATE" === e.nodeName
            }(e) ? e.content : null
        }
        var pt = function (e) {
                function n(n) {
                    void 0 === n && (n = !1);
                    var t = e.call(this) || this;
                    return t.__isAsync = n, t
                }
                return i(n, e), n.prototype.emit = function (n) {
                    e.prototype.next.call(this, n)
                }, n.prototype.subscribe = function (n, t, r) {
                    var i, l = function (e) {
                            return null
                        },
                        o = function () {
                            return null
                        };
                    n && "object" == typeof n ? (i = this.__isAsync ? function (e) {
                        setTimeout(function () {
                            return n.next(e)
                        })
                    } : function (e) {
                        n.next(e)
                    }, n.error && (l = this.__isAsync ? function (e) {
                        setTimeout(function () {
                            return n.error(e)
                        })
                    } : function (e) {
                        n.error(e)
                    }), n.complete && (o = this.__isAsync ? function () {
                        setTimeout(function () {
                            return n.complete()
                        })
                    } : function () {
                        n.complete()
                    })) : (i = this.__isAsync ? function (e) {
                        setTimeout(function () {
                            return n(e)
                        })
                    } : function (e) {
                        n(e)
                    }, t && (l = this.__isAsync ? function (e) {
                        setTimeout(function () {
                            return t(e)
                        })
                    } : function (e) {
                        t(e)
                    }), r && (o = this.__isAsync ? function () {
                        setTimeout(function () {
                            return r()
                        })
                    } : function () {
                        r()
                    }));
                    var u = e.prototype.subscribe.call(this, i, l, o);
                    return n instanceof v && n.add(u), u
                }, n
            }(L),
            ht = function () {
                function e() {}
                return e.__NG_ELEMENT_ID__ = function () {
                    return dt(e, Pn)
                }, e
            }(),
            dt = en,
            ft = new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$", "g"),
            gt = /^url\(([^)]+)\)$/,
            vt = function () {
                return function () {}
            }(),
            mt = Re("Input", function (e) {
                return {
                    bindingPropertyName: e
                }
            }, void 0, function (e) {
                return function (e, n) {
                    for (var t = [], r = 2; r < arguments.length; r++) t[r - 2] = arguments[r];
                    var i = e.constructor;
                    i.hasOwnProperty(ge) || function (e) {
                        var n = e.constructor,
                            t = n.ngBaseDef,
                            r = n.ngBaseDef = {
                                inputs: {},
                                outputs: {},
                                declaredInputs: {}
                            };
                        t && (de(r.inputs, t.inputs), de(r.outputs, t.outputs), de(r.declaredInputs, t.declaredInputs))
                    }(e), (function (e) {
                        return e.inputs || {}
                    }(i.ngBaseDef))[n] = t[0]
                }
            }()),
            yt = Re("HostBinding", function (e) {
                return {
                    hostPropertyName: e
                }
            }),
            St = "ngDebugContext",
            Et = "ngOriginalError",
            bt = "ngErrorLogger";

        function Ot(e) {
            return e[St]
        }

        function Rt(e) {
            return e[Et]
        }

        function Tt(e) {
            for (var n = [], t = 1; t < arguments.length; t++) n[t - 1] = arguments[t];
            e.error.apply(e, c(n))
        }
        var Ct = function () {
            function e() {
                this._console = console
            }
            return e.prototype.handleError = function (e) {
                var n = this._findOriginalError(e),
                    t = this._findContext(e),
                    r = function (e) {
                        return e[bt] || Tt
                    }(e);
                r(this._console, "ERROR", e), n && r(this._console, "ORIGINAL ERROR", n), t && r(this._console, "ERROR CONTEXT", t)
            }, e.prototype._findContext = function (e) {
                return e ? Ot(e) ? Ot(e) : this._findContext(Rt(e)) : null
            }, e.prototype._findOriginalError = function (e) {
                for (var n = Rt(e); n && Rt(n);) n = Rt(n);
                return n
            }, e
        }();

        function _t(e) {
            return !!e && "function" == typeof e.then
        }

        function It(e) {
            return !!e && "function" == typeof e.subscribe
        }
        var At = new ye("Application Initializer"),
            wt = function () {
                function e(e) {
                    var n = this;
                    this.appInits = e, this.initialized = !1, this.done = !1, this.donePromise = new Promise(function (e, t) {
                        n.resolve = e, n.reject = t
                    })
                }
                return e.prototype.runInitializers = function () {
                    var e = this;
                    if (!this.initialized) {
                        var n = [],
                            t = function () {
                                e.done = !0, e.resolve()
                            };
                        if (this.appInits)
                            for (var r = 0; r < this.appInits.length; r++) {
                                var i = this.appInits[r]();
                                _t(i) && n.push(i)
                            }
                        Promise.all(n).then(function () {
                            t()
                        }).catch(function (n) {
                            e.reject(n)
                        }), 0 === n.length && t(), this.initialized = !0
                    }
                }, e
            }(),
            Nt = new ye("AppId");

        function Pt() {
            return "" + Dt() + Dt() + Dt()
        }

        function Dt() {
            return String.fromCharCode(97 + Math.floor(25 * Math.random()))
        }
        var kt = new ye("Platform Initializer"),
            Mt = new ye("Platform ID"),
            Lt = new ye("appBootstrapListener"),
            xt = function () {
                function e() {}
                return e.prototype.log = function (e) {
                    console.log(e)
                }, e.prototype.warn = function (e) {
                    console.warn(e)
                }, e
            }();

        function Ft() {
            throw new Error("Runtime compiler is not loaded")
        }
        var Ut, Ht, Gt = Ft,
            Bt = Ft,
            Vt = Ft,
            Wt = Ft,
            jt = function () {
                function e() {
                    this.compileModuleSync = Gt, this.compileModuleAsync = Bt, this.compileModuleAndAllComponentsSync = Vt, this.compileModuleAndAllComponentsAsync = Wt
                }
                return e.prototype.clearCache = function () {}, e.prototype.clearCacheFor = function (e) {}, e.prototype.getModuleId = function (e) {}, e
            }(),
            Yt = function () {
                return function () {}
            }();

        function zt() {
            var e = Ie.wtf;
            return !(!e || !(Ut = e.trace) || (Ht = Ut.events, 0))
        }
        var Kt = zt();

        function qt(e, n) {
            return null
        }
        var $t = Kt ? function (e, n) {
                return void 0 === n && (n = null), Ht.createScope(e, n)
            } : function (e, n) {
                return qt
            },
            Qt = Kt ? function (e, n) {
                return Ut.leaveScope(e, n), n
            } : function (e, n) {
                return n
            },
            Zt = function () {
                function e(e) {
                    var n, t = e.enableLongStackTrace,
                        r = void 0 !== t && t;
                    if (this.hasPendingMicrotasks = !1, this.hasPendingMacrotasks = !1, this.isStable = !0, this.onUnstable = new pt(!1), this.onMicrotaskEmpty = new pt(!1), this.onStable = new pt(!1), this.onError = new pt(!1), "undefined" == typeof Zone) throw new Error("In this configuration Angular requires Zone.js");
                    Zone.assertZonePatched(), this._nesting = 0, this._outer = this._inner = Zone.current, Zone.wtfZoneSpec && (this._inner = this._inner.fork(Zone.wtfZoneSpec)), Zone.TaskTrackingZoneSpec && (this._inner = this._inner.fork(new Zone.TaskTrackingZoneSpec)), r && Zone.longStackTraceZoneSpec && (this._inner = this._inner.fork(Zone.longStackTraceZoneSpec)), (n = this)._inner = n._inner.fork({
                        name: "angular",
                        properties: {
                            isAngularZone: !0
                        },
                        onInvokeTask: function (e, t, r, i, l, o) {
                            try {
                                return nr(n), e.invokeTask(r, i, l, o)
                            } finally {
                                tr(n)
                            }
                        },
                        onInvoke: function (e, t, r, i, l, o, u) {
                            try {
                                return nr(n), e.invoke(r, i, l, o, u)
                            } finally {
                                tr(n)
                            }
                        },
                        onHasTask: function (e, t, r, i) {
                            e.hasTask(r, i), t === r && ("microTask" == i.change ? (n.hasPendingMicrotasks = i.microTask, er(n)) : "macroTask" == i.change && (n.hasPendingMacrotasks = i.macroTask))
                        },
                        onHandleError: function (e, t, r, i) {
                            return e.handleError(r, i), n.runOutsideAngular(function () {
                                return n.onError.emit(i)
                            }), !1
                        }
                    })
                }
                return e.isInAngularZone = function () {
                    return !0 === Zone.current.get("isAngularZone")
                }, e.assertInAngularZone = function () {
                    if (!e.isInAngularZone()) throw new Error("Expected to be in Angular Zone, but it is not!")
                }, e.assertNotInAngularZone = function () {
                    if (e.isInAngularZone()) throw new Error("Expected to not be in Angular Zone, but it is!")
                }, e.prototype.run = function (e, n, t) {
                    return this._inner.run(e, n, t)
                }, e.prototype.runTask = function (e, n, t, r) {
                    var i = this._inner,
                        l = i.scheduleEventTask("NgZoneEvent: " + r, e, Jt, Xt, Xt);
                    try {
                        return i.runTask(l, n, t)
                    } finally {
                        i.cancelTask(l)
                    }
                }, e.prototype.runGuarded = function (e, n, t) {
                    return this._inner.runGuarded(e, n, t)
                }, e.prototype.runOutsideAngular = function (e) {
                    return this._outer.run(e)
                }, e
            }();

        function Xt() {}
        var Jt = {};

        function er(e) {
            if (0 == e._nesting && !e.hasPendingMicrotasks && !e.isStable) try {
                e._nesting++, e.onMicrotaskEmpty.emit(null)
            } finally {
                if (e._nesting--, !e.hasPendingMicrotasks) try {
                    e.runOutsideAngular(function () {
                        return e.onStable.emit(null)
                    })
                } finally {
                    e.isStable = !0
                }
            }
        }

        function nr(e) {
            e._nesting++, e.isStable && (e.isStable = !1, e.onUnstable.emit(null))
        }

        function tr(e) {
            e._nesting--, er(e)
        }
        var rr, ir = function () {
                function e() {
                    this.hasPendingMicrotasks = !1, this.hasPendingMacrotasks = !1, this.isStable = !0, this.onUnstable = new pt, this.onMicrotaskEmpty = new pt, this.onStable = new pt, this.onError = new pt
                }
                return e.prototype.run = function (e) {
                    return e()
                }, e.prototype.runGuarded = function (e) {
                    return e()
                }, e.prototype.runOutsideAngular = function (e) {
                    return e()
                }, e.prototype.runTask = function (e) {
                    return e()
                }, e
            }(),
            lr = function () {
                function e(e) {
                    var n = this;
                    this._ngZone = e, this._pendingCount = 0, this._isZoneStable = !0, this._didWork = !1, this._callbacks = [], this.taskTrackingZone = null, this._watchAngularEvents(), e.run(function () {
                        n.taskTrackingZone = "undefined" == typeof Zone ? null : Zone.current.get("TaskTrackingZone")
                    })
                }
                return e.prototype._watchAngularEvents = function () {
                    var e = this;
                    this._ngZone.onUnstable.subscribe({
                        next: function () {
                            e._didWork = !0, e._isZoneStable = !1
                        }
                    }), this._ngZone.runOutsideAngular(function () {
                        e._ngZone.onStable.subscribe({
                            next: function () {
                                Zt.assertNotInAngularZone(), Pe(function () {
                                    e._isZoneStable = !0, e._runCallbacksIfReady()
                                })
                            }
                        })
                    })
                }, e.prototype.increasePendingRequestCount = function () {
                    return this._pendingCount += 1, this._didWork = !0, this._pendingCount
                }, e.prototype.decreasePendingRequestCount = function () {
                    if (this._pendingCount -= 1, this._pendingCount < 0) throw new Error("pending async requests below zero");
                    return this._runCallbacksIfReady(), this._pendingCount
                }, e.prototype.isStable = function () {
                    return this._isZoneStable && 0 === this._pendingCount && !this._ngZone.hasPendingMacrotasks
                }, e.prototype._runCallbacksIfReady = function () {
                    var e = this;
                    if (this.isStable()) Pe(function () {
                        for (; 0 !== e._callbacks.length;) {
                            var n = e._callbacks.pop();
                            clearTimeout(n.timeoutId), n.doneCb(e._didWork)
                        }
                        e._didWork = !1
                    });
                    else {
                        var n = this.getPendingTasks();
                        this._callbacks = this._callbacks.filter(function (e) {
                            return !e.updateCb || !e.updateCb(n) || (clearTimeout(e.timeoutId), !1)
                        }), this._didWork = !0
                    }
                }, e.prototype.getPendingTasks = function () {
                    return this.taskTrackingZone ? this.taskTrackingZone.macroTasks.map(function (e) {
                        return {
                            source: e.source,
                            creationLocation: e.creationLocation,
                            data: e.data
                        }
                    }) : []
                }, e.prototype.addCallback = function (e, n, t) {
                    var r = this,
                        i = -1;
                    n && n > 0 && (i = setTimeout(function () {
                        r._callbacks = r._callbacks.filter(function (e) {
                            return e.timeoutId !== i
                        }), e(r._didWork, r.getPendingTasks())
                    }, n)), this._callbacks.push({
                        doneCb: e,
                        timeoutId: i,
                        updateCb: t
                    })
                }, e.prototype.whenStable = function (e, n, t) {
                    if (t && !this.taskTrackingZone) throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');
                    this.addCallback(e, n, t), this._runCallbacksIfReady()
                }, e.prototype.getPendingRequestCount = function () {
                    return this._pendingCount
                }, e.prototype.findProviders = function (e, n, t) {
                    return []
                }, e
            }(),
            or = function () {
                function e() {
                    this._applications = new Map, ur.addToWindow(this)
                }
                return e.prototype.registerApplication = function (e, n) {
                    this._applications.set(e, n)
                }, e.prototype.unregisterApplication = function (e) {
                    this._applications.delete(e)
                }, e.prototype.unregisterAllApplications = function () {
                    this._applications.clear()
                }, e.prototype.getTestability = function (e) {
                    return this._applications.get(e) || null
                }, e.prototype.getAllTestabilities = function () {
                    return Array.from(this._applications.values())
                }, e.prototype.getAllRootElements = function () {
                    return Array.from(this._applications.keys())
                }, e.prototype.findTestabilityInTree = function (e, n) {
                    return void 0 === n && (n = !0), ur.findTestabilityInTree(this, e, n)
                }, o([u("design:paramtypes", [])], e)
            }(),
            ur = new(function () {
                function e() {}
                return e.prototype.addToWindow = function (e) {}, e.prototype.findTestabilityInTree = function (e, n, t) {
                    return null
                }, e
            }()),
            sr = new ye("AllowMultipleToken"),
            ar = function () {
                return function (e, n) {
                    this.name = e, this.token = n
                }
            }();

        function cr(e, n, t) {
            void 0 === t && (t = []);
            var r = "Platform: " + n,
                i = new ye(r);
            return function (n) {
                void 0 === n && (n = []);
                var l = pr();
                if (!l || l.injector.get(sr, !1))
                    if (e) e(t.concat(n).concat({
                        provide: i,
                        useValue: !0
                    }));
                    else {
                        var o = t.concat(n).concat({
                            provide: i,
                            useValue: !0
                        });
                        ! function (e) {
                            if (rr && !rr.destroyed && !rr.injector.get(sr, !1)) throw new Error("There can be only one platform. Destroy the previous one to create a new one.");
                            rr = e.get(hr);
                            var n = e.get(kt, null);
                            n && n.forEach(function (e) {
                                return e()
                            })
                        }(on.create({
                            providers: o,
                            name: r
                        }))
                    } return function (e) {
                    var n = pr();
                    if (!n) throw new Error("No platform exists!");
                    if (!n.injector.get(e, null)) throw new Error("A platform with a different configuration has been created. Please destroy it first.");
                    return n
                }(i)
            }
        }

        function pr() {
            return rr && !rr.destroyed ? rr : null
        }
        var hr = function () {
            function e(e) {
                this._injector = e, this._modules = [], this._destroyListeners = [], this._destroyed = !1
            }
            return e.prototype.bootstrapModuleFactory = function (e, n) {
                var t, r = this,
                    i = "noop" === (t = n ? n.ngZone : void 0) ? new ir : ("zone.js" === t ? void 0 : t) || new Zt({
                        enableLongStackTrace: Wn()
                    }),
                    l = [{
                        provide: Zt,
                        useValue: i
                    }];
                return i.run(function () {
                    var n = on.create({
                            providers: l,
                            parent: r.injector,
                            name: e.moduleType.name
                        }),
                        t = e.create(n),
                        o = t.injector.get(Ct, null);
                    if (!o) throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");
                    return t.onDestroy(function () {
                            return gr(r._modules, t)
                        }), i.runOutsideAngular(function () {
                            return i.onError.subscribe({
                                next: function (e) {
                                    o.handleError(e)
                                }
                            })
                        }),
                        function (e, n, i) {
                            try {
                                var l = ((o = t.injector.get(wt)).runInitializers(), o.donePromise.then(function () {
                                    return r._moduleDoBootstrap(t), t
                                }));
                                return _t(l) ? l.catch(function (t) {
                                    throw n.runOutsideAngular(function () {
                                        return e.handleError(t)
                                    }), t
                                }) : l
                            } catch (u) {
                                throw n.runOutsideAngular(function () {
                                    return e.handleError(u)
                                }), u
                            }
                            var o
                        }(o, i)
                })
            }, e.prototype.bootstrapModule = function (e, n) {
                var t = this;
                void 0 === n && (n = []);
                var r = dr({}, n);
                return function (e, n, t) {
                    return e.get(Yt).createCompiler([n]).compileModuleAsync(t)
                }(this.injector, r, e).then(function (e) {
                    return t.bootstrapModuleFactory(e, r)
                })
            }, e.prototype._moduleDoBootstrap = function (e) {
                var n = e.injector.get(fr);
                if (e._bootstrapComponents.length > 0) e._bootstrapComponents.forEach(function (e) {
                    return n.bootstrap(e)
                });
                else {
                    if (!e.instance.ngDoBootstrap) throw new Error("The module " + ke(e.instance.constructor) + ' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.');
                    e.instance.ngDoBootstrap(n)
                }
                this._modules.push(e)
            }, e.prototype.onDestroy = function (e) {
                this._destroyListeners.push(e)
            }, Object.defineProperty(e.prototype, "injector", {
                get: function () {
                    return this._injector
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.destroy = function () {
                if (this._destroyed) throw new Error("The platform has already been destroyed!");
                this._modules.slice().forEach(function (e) {
                    return e.destroy()
                }), this._destroyListeners.forEach(function (e) {
                    return e()
                }), this._destroyed = !0
            }, Object.defineProperty(e.prototype, "destroyed", {
                get: function () {
                    return this._destroyed
                },
                enumerable: !0,
                configurable: !0
            }), e
        }();

        function dr(e, n) {
            return Array.isArray(n) ? n.reduce(dr, e) : l({}, e, n)
        }
        var fr = function () {
            function e(e, n, t, r, i, l) {
                var o = this;
                this._zone = e, this._console = n, this._injector = t, this._exceptionHandler = r, this._componentFactoryResolver = i, this._initStatus = l, this._bootstrapListeners = [], this._views = [], this._runningTick = !1, this._enforceNoNewChanges = !1, this._stable = !0, this.componentTypes = [], this.components = [], this._enforceNoNewChanges = Wn(), this._zone.onMicrotaskEmpty.subscribe({
                    next: function () {
                        o._zone.run(function () {
                            o.tick()
                        })
                    }
                });
                var u = new w(function (e) {
                        o._stable = o._zone.isStable && !o._zone.hasPendingMacrotasks && !o._zone.hasPendingMicrotasks, o._zone.runOutsideAngular(function () {
                            e.next(o._stable), e.complete()
                        })
                    }),
                    s = new w(function (e) {
                        var n;
                        o._zone.runOutsideAngular(function () {
                            n = o._zone.onStable.subscribe(function () {
                                Zt.assertNotInAngularZone(), Pe(function () {
                                    o._stable || o._zone.hasPendingMacrotasks || o._zone.hasPendingMicrotasks || (o._stable = !0, e.next(!0))
                                })
                            })
                        });
                        var t = o._zone.onUnstable.subscribe(function () {
                            Zt.assertInAngularZone(), o._stable && (o._stable = !1, o._zone.runOutsideAngular(function () {
                                e.next(!1)
                            }))
                        });
                        return function () {
                            n.unsubscribe(), t.unsubscribe()
                        }
                    });
                this.isStable = ie(u, s.pipe(function (e) {
                    return le()((n = pe, function (e) {
                        var t;
                        t = "function" == typeof n ? n : function () {
                            return n
                        };
                        var r = Object.create(e, ae);
                        return r.source = e, r.subjectFactory = t, r
                    })(e));
                    var n
                }))
            }
            var n;
            return n = e, e.prototype.bootstrap = function (e, n) {
                var t, r = this;
                if (!this._initStatus.done) throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");
                t = e instanceof On ? e : this._componentFactoryResolver.resolveComponentFactory(e), this.componentTypes.push(t.componentType);
                var i = t instanceof An ? null : this._injector.get(wn),
                    l = t.create(on.NULL, [], n || t.selector, i);
                l.onDestroy(function () {
                    r._unloadComponent(l)
                });
                var o = l.injector.get(lr, null);
                return o && l.injector.get(or).registerApplication(l.location.nativeElement, o), this._loadComponent(l), Wn() && this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."), l
            }, e.prototype.tick = function () {
                var e = this;
                if (this._runningTick) throw new Error("ApplicationRef.tick is called recursively");
                var t = n._tickScope();
                try {
                    this._runningTick = !0, this._views.forEach(function (e) {
                        return e.detectChanges()
                    }), this._enforceNoNewChanges && this._views.forEach(function (e) {
                        return e.checkNoChanges()
                    })
                } catch (r) {
                    this._zone.runOutsideAngular(function () {
                        return e._exceptionHandler.handleError(r)
                    })
                } finally {
                    this._runningTick = !1, Qt(t)
                }
            }, e.prototype.attachView = function (e) {
                var n = e;
                this._views.push(n), n.attachToAppRef(this)
            }, e.prototype.detachView = function (e) {
                var n = e;
                gr(this._views, n), n.detachFromAppRef()
            }, e.prototype._loadComponent = function (e) {
                this.attachView(e.hostView), this.tick(), this.components.push(e), this._injector.get(Lt, []).concat(this._bootstrapListeners).forEach(function (n) {
                    return n(e)
                })
            }, e.prototype._unloadComponent = function (e) {
                this.detachView(e.hostView), gr(this.components, e)
            }, e.prototype.ngOnDestroy = function () {
                this._views.slice().forEach(function (e) {
                    return e.destroy()
                })
            }, Object.defineProperty(e.prototype, "viewCount", {
                get: function () {
                    return this._views.length
                },
                enumerable: !0,
                configurable: !0
            }), e._tickScope = $t("ApplicationRef#tick()"), e
        }();

        function gr(e, n) {
            var t = e.indexOf(n);
            t > -1 && e.splice(t, 1)
        }
        var vr = function () {
                function e() {
                    this.dirty = !0, this._results = [], this.changes = new pt, this.length = 0
                }
                return e.prototype.map = function (e) {
                    return this._results.map(e)
                }, e.prototype.filter = function (e) {
                    return this._results.filter(e)
                }, e.prototype.find = function (e) {
                    return this._results.find(e)
                }, e.prototype.reduce = function (e, n) {
                    return this._results.reduce(e, n)
                }, e.prototype.forEach = function (e) {
                    this._results.forEach(e)
                }, e.prototype.some = function (e) {
                    return this._results.some(e)
                }, e.prototype.toArray = function () {
                    return this._results.slice()
                }, e.prototype[Ne()] = function () {
                    return this._results[Ne()]()
                }, e.prototype.toString = function () {
                    return this._results.toString()
                }, e.prototype.reset = function (e) {
                    this._results = function e(n) {
                        return n.reduce(function (n, t) {
                            var r = Array.isArray(t) ? e(t) : t;
                            return n.concat(r)
                        }, [])
                    }(e), this.dirty = !1, this.length = this._results.length, this.last = this._results[this.length - 1], this.first = this._results[0]
                }, e.prototype.notifyOnChanges = function () {
                    this.changes.emit(this)
                }, e.prototype.setDirty = function () {
                    this.dirty = !0
                }, e.prototype.destroy = function () {
                    this.changes.complete(), this.changes.unsubscribe()
                }, e
            }(),
            mr = function () {
                return function () {}
            }(),
            yr = {
                factoryPathPrefix: "",
                factoryPathSuffix: ".ngfactory"
            },
            Sr = function () {
                function e(e, n) {
                    this._compiler = e, this._config = n || yr
                }
                return e.prototype.load = function (e) {
                    return this._compiler instanceof jt ? this.loadFactory(e) : this.loadAndCompile(e)
                }, e.prototype.loadAndCompile = function (e) {
                    var n = this,
                        r = a(e.split("#"), 2),
                        i = r[0],
                        l = r[1];
                    return void 0 === l && (l = "default"), t("crnd")(i).then(function (e) {
                        return e[l]
                    }).then(function (e) {
                        return Er(e, i, l)
                    }).then(function (e) {
                        return n._compiler.compileModuleAsync(e)
                    })
                }, e.prototype.loadFactory = function (e) {
                    var n = a(e.split("#"), 2),
                        r = n[0],
                        i = n[1],
                        l = "NgFactory";
                    return void 0 === i && (i = "default", l = ""), t("crnd")(this._config.factoryPathPrefix + r + this._config.factoryPathSuffix).then(function (e) {
                        return e[i + l]
                    }).then(function (e) {
                        return Er(e, r, i)
                    })
                }, e
            }();

        function Er(e, n, t) {
            if (!e) throw new Error("Cannot find '" + t + "' in '" + n + "'");
            return e
        }
        var br = function () {
                function e() {}
                return e.__NG_ELEMENT_ID__ = function () {
                    return Or(e, Pn)
                }, e
            }(),
            Or = en,
            Rr = function () {
                function e() {}
                return e.__NG_ELEMENT_ID__ = function () {
                    return Tr()
                }, e
            }(),
            Tr = function () {
                for (var e = [], n = 0; n < arguments.length; n++) e[n] = arguments[n]
            },
            Cr = function () {
                return function (e, n) {
                    this.name = e, this.callback = n
                }
            }(),
            _r = function () {
                function e(e, n, t) {
                    this.listeners = [], this.parent = null, this._debugContext = t, this.nativeNode = e, n && n instanceof Ir && n.addChild(this)
                }
                return Object.defineProperty(e.prototype, "injector", {
                    get: function () {
                        return this._debugContext.injector
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "componentInstance", {
                    get: function () {
                        return this._debugContext.component
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "context", {
                    get: function () {
                        return this._debugContext.context
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "references", {
                    get: function () {
                        return this._debugContext.references
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "providerTokens", {
                    get: function () {
                        return this._debugContext.providerTokens
                    },
                    enumerable: !0,
                    configurable: !0
                }), e
            }(),
            Ir = function (e) {
                function n(n, t, r) {
                    var i = e.call(this, n, t, r) || this;
                    return i.properties = {}, i.attributes = {}, i.classes = {}, i.styles = {}, i.childNodes = [], i.nativeElement = n, i
                }
                return i(n, e), n.prototype.addChild = function (e) {
                    e && (this.childNodes.push(e), e.parent = this)
                }, n.prototype.removeChild = function (e) {
                    var n = this.childNodes.indexOf(e); - 1 !== n && (e.parent = null, this.childNodes.splice(n, 1))
                }, n.prototype.insertChildrenAfter = function (e, n) {
                    var t, r = this,
                        i = this.childNodes.indexOf(e); - 1 !== i && ((t = this.childNodes).splice.apply(t, c([i + 1, 0], n)), n.forEach(function (n) {
                        n.parent && n.parent.removeChild(n), e.parent = r
                    }))
                }, n.prototype.insertBefore = function (e, n) {
                    var t = this.childNodes.indexOf(e); - 1 === t ? this.addChild(n) : (n.parent && n.parent.removeChild(n), n.parent = this, this.childNodes.splice(t, 0, n))
                }, n.prototype.query = function (e) {
                    return this.queryAll(e)[0] || null
                }, n.prototype.queryAll = function (e) {
                    var n = [];
                    return function e(n, t, r) {
                        n.childNodes.forEach(function (n) {
                            n instanceof Ir && (t(n) && r.push(n), e(n, t, r))
                        })
                    }(this, e, n), n
                }, n.prototype.queryAllNodes = function (e) {
                    var n = [];
                    return function e(n, t, r) {
                        n instanceof Ir && n.childNodes.forEach(function (n) {
                            t(n) && r.push(n), n instanceof Ir && e(n, t, r)
                        })
                    }(this, e, n), n
                }, Object.defineProperty(n.prototype, "children", {
                    get: function () {
                        return this.childNodes.filter(function (e) {
                            return e instanceof n
                        })
                    },
                    enumerable: !0,
                    configurable: !0
                }), n.prototype.triggerEventHandler = function (e, n) {
                    this.listeners.forEach(function (t) {
                        t.name == e && t.callback(n)
                    })
                }, n
            }(_r),
            Ar = new Map,
            wr = function (e) {
                return Ar.get(e) || null
            };

        function Nr(e) {
            Ar.set(e.nativeNode, e)
        }
        var Pr = function () {
                function e() {}
                return e.prototype.supports = function (e) {
                    return Xe(e)
                }, e.prototype.create = function (e) {
                    return new kr(e)
                }, e
            }(),
            Dr = function (e, n) {
                return n
            },
            kr = function () {
                function e(e) {
                    this.length = 0, this._linkedRecords = null, this._unlinkedRecords = null, this._previousItHead = null, this._itHead = null, this._itTail = null, this._additionsHead = null, this._additionsTail = null, this._movesHead = null, this._movesTail = null, this._removalsHead = null, this._removalsTail = null, this._identityChangesHead = null, this._identityChangesTail = null, this._trackByFn = e || Dr
                }
                return e.prototype.forEachItem = function (e) {
                    var n;
                    for (n = this._itHead; null !== n; n = n._next) e(n)
                }, e.prototype.forEachOperation = function (e) {
                    for (var n = this._itHead, t = this._removalsHead, r = 0, i = null; n || t;) {
                        var l = !t || n && n.currentIndex < Fr(t, r, i) ? n : t,
                            o = Fr(l, r, i),
                            u = l.currentIndex;
                        if (l === t) r--, t = t._nextRemoved;
                        else if (n = n._next, null == l.previousIndex) r++;
                        else {
                            i || (i = []);
                            var s = o - r,
                                a = u - r;
                            if (s != a) {
                                for (var c = 0; c < s; c++) {
                                    var p = c < i.length ? i[c] : i[c] = 0,
                                        h = p + c;
                                    a <= h && h < s && (i[c] = p + 1)
                                }
                                i[l.previousIndex] = a - s
                            }
                        }
                        o !== u && e(l, o, u)
                    }
                }, e.prototype.forEachPreviousItem = function (e) {
                    var n;
                    for (n = this._previousItHead; null !== n; n = n._nextPrevious) e(n)
                }, e.prototype.forEachAddedItem = function (e) {
                    var n;
                    for (n = this._additionsHead; null !== n; n = n._nextAdded) e(n)
                }, e.prototype.forEachMovedItem = function (e) {
                    var n;
                    for (n = this._movesHead; null !== n; n = n._nextMoved) e(n)
                }, e.prototype.forEachRemovedItem = function (e) {
                    var n;
                    for (n = this._removalsHead; null !== n; n = n._nextRemoved) e(n)
                }, e.prototype.forEachIdentityChange = function (e) {
                    var n;
                    for (n = this._identityChangesHead; null !== n; n = n._nextIdentityChange) e(n)
                }, e.prototype.diff = function (e) {
                    if (null == e && (e = []), !Xe(e)) throw new Error("Error trying to diff '" + ke(e) + "'. Only arrays and iterables are allowed");
                    return this.check(e) ? this : null
                }, e.prototype.onDestroy = function () {}, e.prototype.check = function (e) {
                    var n = this;
                    this._reset();
                    var t, r, i, l = this._itHead,
                        o = !1;
                    if (Array.isArray(e)) {
                        this.length = e.length;
                        for (var u = 0; u < this.length; u++) i = this._trackByFn(u, r = e[u]), null !== l && De(l.trackById, i) ? (o && (l = this._verifyReinsertion(l, r, i, u)), De(l.item, r) || this._addIdentityChange(l, r)) : (l = this._mismatch(l, r, i, u), o = !0), l = l._next
                    } else t = 0,
                        function (e, n) {
                            if (Array.isArray(e))
                                for (var t = 0; t < e.length; t++) n(e[t]);
                            else
                                for (var r = e[Ne()](), i = void 0; !(i = r.next()).done;) n(i.value)
                        }(e, function (e) {
                            i = n._trackByFn(t, e), null !== l && De(l.trackById, i) ? (o && (l = n._verifyReinsertion(l, e, i, t)), De(l.item, e) || n._addIdentityChange(l, e)) : (l = n._mismatch(l, e, i, t), o = !0), l = l._next, t++
                        }), this.length = t;
                    return this._truncate(l), this.collection = e, this.isDirty
                }, Object.defineProperty(e.prototype, "isDirty", {
                    get: function () {
                        return null !== this._additionsHead || null !== this._movesHead || null !== this._removalsHead || null !== this._identityChangesHead
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype._reset = function () {
                    if (this.isDirty) {
                        var e = void 0,
                            n = void 0;
                        for (e = this._previousItHead = this._itHead; null !== e; e = e._next) e._nextPrevious = e._next;
                        for (e = this._additionsHead; null !== e; e = e._nextAdded) e.previousIndex = e.currentIndex;
                        for (this._additionsHead = this._additionsTail = null, e = this._movesHead; null !== e; e = n) e.previousIndex = e.currentIndex, n = e._nextMoved;
                        this._movesHead = this._movesTail = null, this._removalsHead = this._removalsTail = null, this._identityChangesHead = this._identityChangesTail = null
                    }
                }, e.prototype._mismatch = function (e, n, t, r) {
                    var i;
                    return null === e ? i = this._itTail : (i = e._prev, this._remove(e)), null !== (e = null === this._linkedRecords ? null : this._linkedRecords.get(t, r)) ? (De(e.item, n) || this._addIdentityChange(e, n), this._moveAfter(e, i, r)) : null !== (e = null === this._unlinkedRecords ? null : this._unlinkedRecords.get(t, null)) ? (De(e.item, n) || this._addIdentityChange(e, n), this._reinsertAfter(e, i, r)) : e = this._addAfter(new Mr(n, t), i, r), e
                }, e.prototype._verifyReinsertion = function (e, n, t, r) {
                    var i = null === this._unlinkedRecords ? null : this._unlinkedRecords.get(t, null);
                    return null !== i ? e = this._reinsertAfter(i, e._prev, r) : e.currentIndex != r && (e.currentIndex = r, this._addToMoves(e, r)), e
                }, e.prototype._truncate = function (e) {
                    for (; null !== e;) {
                        var n = e._next;
                        this._addToRemovals(this._unlink(e)), e = n
                    }
                    null !== this._unlinkedRecords && this._unlinkedRecords.clear(), null !== this._additionsTail && (this._additionsTail._nextAdded = null), null !== this._movesTail && (this._movesTail._nextMoved = null), null !== this._itTail && (this._itTail._next = null), null !== this._removalsTail && (this._removalsTail._nextRemoved = null), null !== this._identityChangesTail && (this._identityChangesTail._nextIdentityChange = null)
                }, e.prototype._reinsertAfter = function (e, n, t) {
                    null !== this._unlinkedRecords && this._unlinkedRecords.remove(e);
                    var r = e._prevRemoved,
                        i = e._nextRemoved;
                    return null === r ? this._removalsHead = i : r._nextRemoved = i, null === i ? this._removalsTail = r : i._prevRemoved = r, this._insertAfter(e, n, t), this._addToMoves(e, t), e
                }, e.prototype._moveAfter = function (e, n, t) {
                    return this._unlink(e), this._insertAfter(e, n, t), this._addToMoves(e, t), e
                }, e.prototype._addAfter = function (e, n, t) {
                    return this._insertAfter(e, n, t), this._additionsTail = null === this._additionsTail ? this._additionsHead = e : this._additionsTail._nextAdded = e, e
                }, e.prototype._insertAfter = function (e, n, t) {
                    var r = null === n ? this._itHead : n._next;
                    return e._next = r, e._prev = n, null === r ? this._itTail = e : r._prev = e, null === n ? this._itHead = e : n._next = e, null === this._linkedRecords && (this._linkedRecords = new xr), this._linkedRecords.put(e), e.currentIndex = t, e
                }, e.prototype._remove = function (e) {
                    return this._addToRemovals(this._unlink(e))
                }, e.prototype._unlink = function (e) {
                    null !== this._linkedRecords && this._linkedRecords.remove(e);
                    var n = e._prev,
                        t = e._next;
                    return null === n ? this._itHead = t : n._next = t, null === t ? this._itTail = n : t._prev = n, e
                }, e.prototype._addToMoves = function (e, n) {
                    return e.previousIndex === n ? e : (this._movesTail = null === this._movesTail ? this._movesHead = e : this._movesTail._nextMoved = e, e)
                }, e.prototype._addToRemovals = function (e) {
                    return null === this._unlinkedRecords && (this._unlinkedRecords = new xr), this._unlinkedRecords.put(e), e.currentIndex = null, e._nextRemoved = null, null === this._removalsTail ? (this._removalsTail = this._removalsHead = e, e._prevRemoved = null) : (e._prevRemoved = this._removalsTail, this._removalsTail = this._removalsTail._nextRemoved = e), e
                }, e.prototype._addIdentityChange = function (e, n) {
                    return e.item = n, this._identityChangesTail = null === this._identityChangesTail ? this._identityChangesHead = e : this._identityChangesTail._nextIdentityChange = e, e
                }, e
            }(),
            Mr = function () {
                return function (e, n) {
                    this.item = e, this.trackById = n, this.currentIndex = null, this.previousIndex = null, this._nextPrevious = null, this._prev = null, this._next = null, this._prevDup = null, this._nextDup = null, this._prevRemoved = null, this._nextRemoved = null, this._nextAdded = null, this._nextMoved = null, this._nextIdentityChange = null
                }
            }(),
            Lr = function () {
                function e() {
                    this._head = null, this._tail = null
                }
                return e.prototype.add = function (e) {
                    null === this._head ? (this._head = this._tail = e, e._nextDup = null, e._prevDup = null) : (this._tail._nextDup = e, e._prevDup = this._tail, e._nextDup = null, this._tail = e)
                }, e.prototype.get = function (e, n) {
                    var t;
                    for (t = this._head; null !== t; t = t._nextDup)
                        if ((null === n || n <= t.currentIndex) && De(t.trackById, e)) return t;
                    return null
                }, e.prototype.remove = function (e) {
                    var n = e._prevDup,
                        t = e._nextDup;
                    return null === n ? this._head = t : n._nextDup = t, null === t ? this._tail = n : t._prevDup = n, null === this._head
                }, e
            }(),
            xr = function () {
                function e() {
                    this.map = new Map
                }
                return e.prototype.put = function (e) {
                    var n = e.trackById,
                        t = this.map.get(n);
                    t || (t = new Lr, this.map.set(n, t)), t.add(e)
                }, e.prototype.get = function (e, n) {
                    var t = this.map.get(e);
                    return t ? t.get(e, n) : null
                }, e.prototype.remove = function (e) {
                    var n = e.trackById;
                    return this.map.get(n).remove(e) && this.map.delete(n), e
                }, Object.defineProperty(e.prototype, "isEmpty", {
                    get: function () {
                        return 0 === this.map.size
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.clear = function () {
                    this.map.clear()
                }, e
            }();

        function Fr(e, n, t) {
            var r = e.previousIndex;
            if (null === r) return r;
            var i = 0;
            return t && r < t.length && (i = t[r]), r + n + i
        }
        var Ur = function () {
                function e() {}
                return e.prototype.supports = function (e) {
                    return e instanceof Map || Je(e)
                }, e.prototype.create = function () {
                    return new Hr
                }, e
            }(),
            Hr = function () {
                function e() {
                    this._records = new Map, this._mapHead = null, this._appendAfter = null, this._previousMapHead = null, this._changesHead = null, this._changesTail = null, this._additionsHead = null, this._additionsTail = null, this._removalsHead = null, this._removalsTail = null
                }
                return Object.defineProperty(e.prototype, "isDirty", {
                    get: function () {
                        return null !== this._additionsHead || null !== this._changesHead || null !== this._removalsHead
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.forEachItem = function (e) {
                    var n;
                    for (n = this._mapHead; null !== n; n = n._next) e(n)
                }, e.prototype.forEachPreviousItem = function (e) {
                    var n;
                    for (n = this._previousMapHead; null !== n; n = n._nextPrevious) e(n)
                }, e.prototype.forEachChangedItem = function (e) {
                    var n;
                    for (n = this._changesHead; null !== n; n = n._nextChanged) e(n)
                }, e.prototype.forEachAddedItem = function (e) {
                    var n;
                    for (n = this._additionsHead; null !== n; n = n._nextAdded) e(n)
                }, e.prototype.forEachRemovedItem = function (e) {
                    var n;
                    for (n = this._removalsHead; null !== n; n = n._nextRemoved) e(n)
                }, e.prototype.diff = function (e) {
                    if (e) {
                        if (!(e instanceof Map || Je(e))) throw new Error("Error trying to diff '" + ke(e) + "'. Only maps and objects are allowed")
                    } else e = new Map;
                    return this.check(e) ? this : null
                }, e.prototype.onDestroy = function () {}, e.prototype.check = function (e) {
                    var n = this;
                    this._reset();
                    var t = this._mapHead;
                    if (this._appendAfter = null, this._forEach(e, function (e, r) {
                            if (t && t.key === r) n._maybeAddToChanges(t, e), n._appendAfter = t, t = t._next;
                            else {
                                var i = n._getOrCreateRecordForKey(r, e);
                                t = n._insertBeforeOrAppend(t, i)
                            }
                        }), t) {
                        t._prev && (t._prev._next = null), this._removalsHead = t;
                        for (var r = t; null !== r; r = r._nextRemoved) r === this._mapHead && (this._mapHead = null), this._records.delete(r.key), r._nextRemoved = r._next, r.previousValue = r.currentValue, r.currentValue = null, r._prev = null, r._next = null
                    }
                    return this._changesTail && (this._changesTail._nextChanged = null), this._additionsTail && (this._additionsTail._nextAdded = null), this.isDirty
                }, e.prototype._insertBeforeOrAppend = function (e, n) {
                    if (e) {
                        var t = e._prev;
                        return n._next = e, n._prev = t, e._prev = n, t && (t._next = n), e === this._mapHead && (this._mapHead = n), this._appendAfter = e, e
                    }
                    return this._appendAfter ? (this._appendAfter._next = n, n._prev = this._appendAfter) : this._mapHead = n, this._appendAfter = n, null
                }, e.prototype._getOrCreateRecordForKey = function (e, n) {
                    if (this._records.has(e)) {
                        var t = this._records.get(e);
                        this._maybeAddToChanges(t, n);
                        var r = t._prev,
                            i = t._next;
                        return r && (r._next = i), i && (i._prev = r), t._next = null, t._prev = null, t
                    }
                    var l = new Gr(e);
                    return this._records.set(e, l), l.currentValue = n, this._addToAdditions(l), l
                }, e.prototype._reset = function () {
                    if (this.isDirty) {
                        var e = void 0;
                        for (this._previousMapHead = this._mapHead, e = this._previousMapHead; null !== e; e = e._next) e._nextPrevious = e._next;
                        for (e = this._changesHead; null !== e; e = e._nextChanged) e.previousValue = e.currentValue;
                        for (e = this._additionsHead; null != e; e = e._nextAdded) e.previousValue = e.currentValue;
                        this._changesHead = this._changesTail = null, this._additionsHead = this._additionsTail = null, this._removalsHead = null
                    }
                }, e.prototype._maybeAddToChanges = function (e, n) {
                    De(n, e.currentValue) || (e.previousValue = e.currentValue, e.currentValue = n, this._addToChanges(e))
                }, e.prototype._addToAdditions = function (e) {
                    null === this._additionsHead ? this._additionsHead = this._additionsTail = e : (this._additionsTail._nextAdded = e, this._additionsTail = e)
                }, e.prototype._addToChanges = function (e) {
                    null === this._changesHead ? this._changesHead = this._changesTail = e : (this._changesTail._nextChanged = e, this._changesTail = e)
                }, e.prototype._forEach = function (e, n) {
                    e instanceof Map ? e.forEach(n) : Object.keys(e).forEach(function (t) {
                        return n(e[t], t)
                    })
                }, e
            }(),
            Gr = function () {
                return function (e) {
                    this.key = e, this.previousValue = null, this.currentValue = null, this._nextPrevious = null, this._next = null, this._prev = null, this._nextAdded = null, this._nextRemoved = null, this._nextChanged = null
                }
            }(),
            Br = function () {
                function e(e) {
                    this.factories = e
                }
                return e.create = function (n, t) {
                    if (null != t) {
                        var r = t.factories.slice();
                        n = n.concat(r)
                    }
                    return new e(n)
                }, e.extend = function (n) {
                    return {
                        provide: e,
                        useFactory: function (t) {
                            if (!t) throw new Error("Cannot extend IterableDiffers without a parent injector");
                            return e.create(n, t)
                        },
                        deps: [[e, new Ve, new Ge]]
                    }
                }, e.prototype.find = function (e) {
                    var n, t = this.factories.find(function (n) {
                        return n.supports(e)
                    });
                    if (null != t) return t;
                    throw new Error("Cannot find a differ supporting object '" + e + "' of type '" + ((n = e).name || typeof n) + "'")
                }, e.ngInjectableDef = ve({
                    providedIn: "root",
                    factory: function () {
                        return new e([new Pr])
                    }
                }), e
            }(),
            Vr = function () {
                function e(e) {
                    this.factories = e
                }
                return e.create = function (n, t) {
                    if (t) {
                        var r = t.factories.slice();
                        n = n.concat(r)
                    }
                    return new e(n)
                }, e.extend = function (n) {
                    return {
                        provide: e,
                        useFactory: function (t) {
                            if (!t) throw new Error("Cannot extend KeyValueDiffers without a parent injector");
                            return e.create(n, t)
                        },
                        deps: [[e, new Ve, new Ge]]
                    }
                }, e.prototype.find = function (e) {
                    var n = this.factories.find(function (n) {
                        return n.supports(e)
                    });
                    if (n) return n;
                    throw new Error("Cannot find a differ supporting object '" + e + "'")
                }, e.ngInjectableDef = ve({
                    providedIn: "root",
                    factory: function () {
                        return new e([new Ur])
                    }
                }), e
            }(),
            Wr = [new Ur],
            jr = new Br([new Pr]),
            Yr = new Vr(Wr),
            zr = cr(null, "core", [{
                provide: Mt,
                useValue: "unknown"
            }, {
                provide: hr,
                deps: [on]
            }, {
                provide: or,
                deps: []
            }, {
                provide: xt,
                deps: []
            }]),
            Kr = new ye("LocaleId");

        function qr() {
            return jr
        }

        function $r() {
            return Yr
        }

        function Qr(e) {
            return e || "en-US"
        }
        var Zr = function () {
            return function (e) {}
        }();

        function Xr(e, n, t) {
            var r = e.state,
                i = 1792 & r;
            return i === n ? (e.state = -1793 & r | t, e.initIndex = -1, !0) : i === t
        }

        function Jr(e, n, t) {
            return (1792 & e.state) === n && e.initIndex <= t && (e.initIndex = t + 1, !0)
        }

        function ei(e, n) {
            return e.nodes[n]
        }

        function ni(e, n) {
            return e.nodes[n]
        }

        function ti(e, n) {
            return e.nodes[n]
        }

        function ri(e, n) {
            return e.nodes[n]
        }

        function ii(e, n) {
            return e.nodes[n]
        }
        var li = {
            setCurrentNode: void 0,
            createRootView: void 0,
            createEmbeddedView: void 0,
            createComponentView: void 0,
            createNgModuleRef: void 0,
            overrideProvider: void 0,
            overrideComponentView: void 0,
            clearOverrides: void 0,
            checkAndUpdateView: void 0,
            checkNoChangesView: void 0,
            destroyView: void 0,
            resolveDep: void 0,
            createDebugContext: void 0,
            handleEvent: void 0,
            updateDirectives: void 0,
            updateRenderer: void 0,
            dirtyParentQueries: void 0
        };

        function oi(e, n, t, r) {
            var i = "ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '" + n + "'. Current value: '" + t + "'.";
            return r && (i += " It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),
                function (e, n) {
                    var t = new Error(e);
                    return ui(t, n), t
                }(i, e)
        }

        function ui(e, n) {
            e[St] = n, e[bt] = n.logError.bind(n)
        }

        function si(e) {
            return new Error("ViewDestroyedError: Attempt to use a destroyed view: " + e)
        }
        var ai = function () {},
            ci = new Map;

        function pi(e) {
            var n = ci.get(e);
            return n || (n = ke(e) + "_" + ci.size, ci.set(e, n)), n
        }

        function hi(e, n, t, r) {
            if (Qe.isWrapped(r)) {
                r = Qe.unwrap(r);
                var i = e.def.nodes[n].bindingIndex + t,
                    l = Qe.unwrap(e.oldValues[i]);
                e.oldValues[i] = new Qe(l)
            }
            return r
        }
        var di = "$$undefined",
            fi = "$$empty";

        function gi(e) {
            return {
                id: di,
                styles: e.styles,
                encapsulation: e.encapsulation,
                data: e.data
            }
        }
        var vi = 0;

        function mi(e, n, t, r) {
            return !(!(2 & e.state) && De(e.oldValues[n.bindingIndex + t], r))
        }

        function yi(e, n, t, r) {
            return !!mi(e, n, t, r) && (e.oldValues[n.bindingIndex + t] = r, !0)
        }

        function Si(e, n, t, r) {
            var i = e.oldValues[n.bindingIndex + t];
            if (1 & e.state || !$e(i, r)) {
                var l = n.bindings[t].name;
                throw oi(li.createDebugContext(e, n.nodeIndex), l + ": " + i, l + ": " + r, 0 != (1 & e.state))
            }
        }

        function Ei(e) {
            for (var n = e; n;) 2 & n.def.flags && (n.state |= 8), n = n.viewContainerParent || n.parent
        }

        function bi(e, n) {
            for (var t = e; t && t !== n;) t.state |= 64, t = t.viewContainerParent || t.parent
        }

        function Oi(e, n, t, r) {
            try {
                return Ei(33554432 & e.def.nodes[n].flags ? ni(e, n).componentView : e), li.handleEvent(e, n, t, r)
            } catch (i) {
                e.root.errorHandler.handleError(i)
            }
        }

        function Ri(e) {
            return e.parent ? ni(e.parent, e.parentNodeDef.nodeIndex) : null
        }

        function Ti(e) {
            return e.parent ? e.parentNodeDef.parent : null
        }

        function Ci(e, n) {
            switch (201347067 & n.flags) {
                case 1:
                    return ni(e, n.nodeIndex).renderElement;
                case 2:
                    return ei(e, n.nodeIndex).renderText
            }
        }

        function _i(e) {
            return !!e.parent && !!(32768 & e.parentNodeDef.flags)
        }

        function Ii(e) {
            return !(!e.parent || 32768 & e.parentNodeDef.flags)
        }

        function Ai(e) {
            return 1 << e % 32
        }

        function wi(e) {
            var n = {},
                t = 0,
                r = {};
            return e && e.forEach(function (e) {
                var i = a(e, 2),
                    l = i[0],
                    o = i[1];
                "number" == typeof l ? (n[l] = o, t |= Ai(l)) : r[l] = o
            }), {
                matchedQueries: n,
                references: r,
                matchedQueryIds: t
            }
        }

        function Ni(e, n) {
            return e.map(function (e) {
                var t, r, i;
                return Array.isArray(e) ? (i = (t = a(e, 2))[0], r = t[1]) : (i = 0, r = e), r && ("function" == typeof r || "object" == typeof r) && n && Object.defineProperty(r, nn, {
                    value: n,
                    configurable: !0
                }), {
                    flags: i,
                    token: r,
                    tokenKey: pi(r)
                }
            })
        }

        function Pi(e, n, t) {
            var r = t.renderParent;
            return r ? 0 == (1 & r.flags) || 0 == (33554432 & r.flags) || r.element.componentRendererType && r.element.componentRendererType.encapsulation === Ue.Native ? ni(e, t.renderParent.nodeIndex).renderElement : void 0 : n
        }
        var Di = new WeakMap;

        function ki(e) {
            var n = Di.get(e);
            return n || ((n = e(function () {
                return ai
            })).factory = e, Di.set(e, n)), n
        }

        function Mi(e, n, t, r, i) {
            3 === n && (t = e.renderer.parentNode(Ci(e, e.def.lastRenderRootNode))), Li(e, n, 0, e.def.nodes.length - 1, t, r, i)
        }

        function Li(e, n, t, r, i, l, o) {
            for (var u = t; u <= r; u++) {
                var s = e.def.nodes[u];
                11 & s.flags && Fi(e, s, n, i, l, o), u += s.childCount
            }
        }

        function xi(e, n, t, r, i, l) {
            for (var o = e; o && !_i(o);) o = o.parent;
            for (var u = o.parent, s = Ti(o), a = s.nodeIndex + s.childCount, c = s.nodeIndex + 1; c <= a; c++) {
                var p = u.def.nodes[c];
                p.ngContentIndex === n && Fi(u, p, t, r, i, l), c += p.childCount
            }
            if (!u.parent) {
                var h = e.root.projectableNodes[n];
                if (h)
                    for (c = 0; c < h.length; c++) Ui(e, h[c], t, r, i, l)
            }
        }

        function Fi(e, n, t, r, i, l) {
            if (8 & n.flags) xi(e, n.ngContent.index, t, r, i, l);
            else {
                var o = Ci(e, n);
                if (3 === t && 33554432 & n.flags && 48 & n.bindingFlags ? (16 & n.bindingFlags && Ui(e, o, t, r, i, l), 32 & n.bindingFlags && Ui(ni(e, n.nodeIndex).componentView, o, t, r, i, l)) : Ui(e, o, t, r, i, l), 16777216 & n.flags)
                    for (var u = ni(e, n.nodeIndex).viewContainer._embeddedViews, s = 0; s < u.length; s++) Mi(u[s], t, r, i, l);
                1 & n.flags && !n.element.name && Li(e, t, n.nodeIndex + 1, n.nodeIndex + n.childCount, r, i, l)
            }
        }

        function Ui(e, n, t, r, i, l) {
            var o = e.renderer;
            switch (t) {
                case 1:
                    o.appendChild(r, n);
                    break;
                case 2:
                    o.insertBefore(r, n, i);
                    break;
                case 3:
                    o.removeChild(r, n);
                    break;
                case 0:
                    l.push(n)
            }
        }
        var Hi = /^:([^:]+):(.+)$/;

        function Gi(e) {
            if (":" === e[0]) {
                var n = e.match(Hi);
                return [n[1], n[2]]
            }
            return ["", e]
        }

        function Bi(e) {
            for (var n = 0, t = 0; t < e.length; t++) n |= e[t].flags;
            return n
        }

        function Vi(e, n, t, r, i, l, o, u, s, a, c, p, h, d, f, g, v, m, y, S) {
            switch (e) {
                case 1:
                    return n + Wi(t) + r;
                case 2:
                    return n + Wi(t) + r + Wi(i) + l;
                case 3:
                    return n + Wi(t) + r + Wi(i) + l + Wi(o) + u;
                case 4:
                    return n + Wi(t) + r + Wi(i) + l + Wi(o) + u + Wi(s) + a;
                case 5:
                    return n + Wi(t) + r + Wi(i) + l + Wi(o) + u + Wi(s) + a + Wi(c) + p;
                case 6:
                    return n + Wi(t) + r + Wi(i) + l + Wi(o) + u + Wi(s) + a + Wi(c) + p + Wi(h) + d;
                case 7:
                    return n + Wi(t) + r + Wi(i) + l + Wi(o) + u + Wi(s) + a + Wi(c) + p + Wi(h) + d + Wi(f) + g;
                case 8:
                    return n + Wi(t) + r + Wi(i) + l + Wi(o) + u + Wi(s) + a + Wi(c) + p + Wi(h) + d + Wi(f) + g + Wi(v) + m;
                case 9:
                    return n + Wi(t) + r + Wi(i) + l + Wi(o) + u + Wi(s) + a + Wi(c) + p + Wi(h) + d + Wi(f) + g + Wi(v) + m + Wi(y) + S;
                default:
                    throw new Error("Does not support more than 9 expressions")
            }
        }

        function Wi(e) {
            return null != e ? e.toString() : ""
        }

        function ji(e, n, t, r, i, l) {
            e |= 1;
            var o = wi(n);
            return {
                nodeIndex: -1,
                parent: null,
                renderParent: null,
                bindingIndex: -1,
                outputIndex: -1,
                flags: e,
                checkIndex: -1,
                childFlags: 0,
                directChildFlags: 0,
                childMatchedQueries: 0,
                matchedQueries: o.matchedQueries,
                matchedQueryIds: o.matchedQueryIds,
                references: o.references,
                ngContentIndex: t,
                childCount: r,
                bindings: [],
                bindingFlags: 0,
                outputs: [],
                element: {
                    ns: null,
                    name: null,
                    attrs: null,
                    template: l ? ki(l) : null,
                    componentProvider: null,
                    componentView: null,
                    componentRendererType: null,
                    publicProviders: null,
                    allProviders: null,
                    handleEvent: i || ai
                },
                provider: null,
                text: null,
                query: null,
                ngContent: null
            }
        }

        function Yi(e, n, t, r, i, l, o, u, s, c, p, h) {
            var d;
            void 0 === o && (o = []), c || (c = ai);
            var f = wi(t),
                g = f.matchedQueries,
                v = f.references,
                m = f.matchedQueryIds,
                y = null,
                S = null;
            l && (y = (d = a(Gi(l), 2))[0], S = d[1]), u = u || [];
            for (var E = new Array(u.length), b = 0; b < u.length; b++) {
                var O = a(u[b], 3),
                    R = O[0],
                    T = O[2],
                    C = a(Gi(O[1]), 2),
                    _ = C[0],
                    I = C[1],
                    A = void 0,
                    w = void 0;
                switch (15 & R) {
                    case 4:
                        w = T;
                        break;
                    case 1:
                    case 8:
                        A = T
                }
                E[b] = {
                    flags: R,
                    ns: _,
                    name: I,
                    nonMinifiedName: I,
                    securityContext: A,
                    suffix: w
                }
            }
            s = s || [];
            var N = new Array(s.length);
            for (b = 0; b < s.length; b++) {
                var P = a(s[b], 2);
                N[b] = {
                    type: 0,
                    target: P[0],
                    eventName: P[1],
                    propName: null
                }
            }
            var D = (o = o || []).map(function (e) {
                var n = a(e, 2),
                    t = n[1],
                    r = a(Gi(n[0]), 2);
                return [r[0], r[1], t]
            });
            return h = function (e) {
                if (e && e.id === di) {
                    var n = null != e.encapsulation && e.encapsulation !== Ue.None || e.styles.length || Object.keys(e.data).length;
                    e.id = n ? "c" + vi++ : fi
                }
                return e && e.id === fi && (e = null), e || null
            }(h), p && (n |= 33554432), {
                nodeIndex: -1,
                parent: null,
                renderParent: null,
                bindingIndex: -1,
                outputIndex: -1,
                checkIndex: e,
                flags: n |= 1,
                childFlags: 0,
                directChildFlags: 0,
                childMatchedQueries: 0,
                matchedQueries: g,
                matchedQueryIds: m,
                references: v,
                ngContentIndex: r,
                childCount: i,
                bindings: E,
                bindingFlags: Bi(E),
                outputs: N,
                element: {
                    ns: y,
                    name: S,
                    attrs: D,
                    template: null,
                    componentProvider: null,
                    componentView: p || null,
                    componentRendererType: h,
                    publicProviders: null,
                    allProviders: null,
                    handleEvent: c || ai
                },
                provider: null,
                text: null,
                query: null,
                ngContent: null
            }
        }

        function zi(e, n, t) {
            var r, i = t.element,
                l = e.root.selectorOrNode,
                o = e.renderer;
            if (e.parent || !l) {
                r = i.name ? o.createElement(i.name, i.ns) : o.createComment("");
                var u = Pi(e, n, t);
                u && o.appendChild(u, r)
            } else r = o.selectRootElement(l, !!i.componentRendererType && i.componentRendererType.encapsulation === Ue.ShadowDom);
            if (i.attrs)
                for (var s = 0; s < i.attrs.length; s++) {
                    var c = a(i.attrs[s], 3);
                    o.setAttribute(r, c[1], c[2], c[0])
                }
            return r
        }

        function Ki(e, n, t, r) {
            for (var i = 0; i < t.outputs.length; i++) {
                var l = t.outputs[i],
                    o = qi(e, t.nodeIndex, (p = l.eventName, (c = l.target) ? c + ":" + p : p)),
                    u = l.target,
                    s = e;
                "component" === l.target && (u = null, s = n);
                var a = s.renderer.listen(u || r, l.eventName, o);
                e.disposables[t.outputIndex + i] = a
            }
            var c, p
        }

        function qi(e, n, t) {
            return function (r) {
                return Oi(e, n, t, r)
            }
        }

        function $i(e, n, t, r) {
            if (!yi(e, n, t, r)) return !1;
            var i = n.bindings[t],
                l = ni(e, n.nodeIndex),
                o = l.renderElement,
                u = i.name;
            switch (15 & i.flags) {
                case 1:
                    ! function (e, n, t, r, i, l) {
                        var o = n.securityContext,
                            u = o ? e.root.sanitizer.sanitize(o, l) : l;
                        u = null != u ? u.toString() : null;
                        var s = e.renderer;
                        null != l ? s.setAttribute(t, i, u, r) : s.removeAttribute(t, i, r)
                    }(e, i, o, i.ns, u, r);
                    break;
                case 2:
                    ! function (e, n, t, r) {
                        var i = e.renderer;
                        r ? i.addClass(n, t) : i.removeClass(n, t)
                    }(e, o, u, r);
                    break;
                case 4:
                    ! function (e, n, t, r, i) {
                        var l = e.root.sanitizer.sanitize(Un.STYLE, i);
                        if (null != l) {
                            l = l.toString();
                            var o = n.suffix;
                            null != o && (l += o)
                        } else l = null;
                        var u = e.renderer;
                        null != l ? u.setStyle(t, r, l) : u.removeStyle(t, r)
                    }(e, i, o, u, r);
                    break;
                case 8:
                    ! function (e, n, t, r, i) {
                        var l = n.securityContext,
                            o = l ? e.root.sanitizer.sanitize(l, i) : i;
                        e.renderer.setProperty(t, r, o)
                    }(33554432 & n.flags && 32 & i.flags ? l.componentView : e, i, o, u, r)
            }
            return !0
        }
        var Qi = new Object,
            Zi = pi(on),
            Xi = pi(rn),
            Ji = pi(wn);

        function el(e, n, t, r) {
            return t = xe(t), {
                index: -1,
                deps: Ni(r, ke(n)),
                flags: e,
                token: n,
                value: t
            }
        }

        function nl(e, n, t) {
            void 0 === t && (t = on.THROW_IF_NOT_FOUND);
            var r, i, l = Ye(e);
            try {
                if (8 & n.flags) return n.token;
                if (2 & n.flags && (t = null), 1 & n.flags) return e._parent.get(n.token, t);
                var o = n.tokenKey;
                switch (o) {
                    case Zi:
                    case Xi:
                    case Ji:
                        return e
                }
                var u, s = e._def.providersByKey[o];
                if (s) {
                    var a = e._providers[s.index];
                    return void 0 === a && (a = e._providers[s.index] = tl(e, s)), a === Qi ? void 0 : a
                }
                if ((u = me(n.token)) && (r = e, null != (i = u).providedIn && (function (e, n) {
                        return e._def.modules.indexOf(i.providedIn) > -1
                    }(r) || "root" === i.providedIn && r._def.isRoot))) {
                    var c = e._providers.length;
                    return e._def.providersByKey[n.tokenKey] = {
                        flags: 5120,
                        value: u.factory,
                        deps: [],
                        index: c,
                        token: n.token
                    }, e._providers[c] = Qi, e._providers[c] = tl(e, e._def.providersByKey[n.tokenKey])
                }
                return 4 & n.flags ? t : e._parent.get(n.token, t)
            } finally {
                Ye(l)
            }
        }

        function tl(e, n) {
            var t;
            switch (201347067 & n.flags) {
                case 512:
                    t = function (e, n, t) {
                        var r = t.length;
                        switch (r) {
                            case 0:
                                return new n;
                            case 1:
                                return new n(nl(e, t[0]));
                            case 2:
                                return new n(nl(e, t[0]), nl(e, t[1]));
                            case 3:
                                return new n(nl(e, t[0]), nl(e, t[1]), nl(e, t[2]));
                            default:
                                for (var i = new Array(r), l = 0; l < r; l++) i[l] = nl(e, t[l]);
                                return new(n.bind.apply(n, c([void 0], i)))
                        }
                    }(e, n.value, n.deps);
                    break;
                case 1024:
                    t = function (e, n, t) {
                        var r = t.length;
                        switch (r) {
                            case 0:
                                return n();
                            case 1:
                                return n(nl(e, t[0]));
                            case 2:
                                return n(nl(e, t[0]), nl(e, t[1]));
                            case 3:
                                return n(nl(e, t[0]), nl(e, t[1]), nl(e, t[2]));
                            default:
                                for (var i = Array(r), l = 0; l < r; l++) i[l] = nl(e, t[l]);
                                return n.apply(void 0, c(i))
                        }
                    }(e, n.value, n.deps);
                    break;
                case 2048:
                    t = nl(e, n.deps[0]);
                    break;
                case 256:
                    t = n.value
            }
            return t === Qi || null == t || "object" != typeof t || 131072 & n.flags || "function" != typeof t.ngOnDestroy || (n.flags |= 131072), void 0 === t ? Qi : t
        }

        function rl(e, n) {
            var t = e.viewContainer._embeddedViews;
            if ((null == n || n >= t.length) && (n = t.length - 1), n < 0) return null;
            var r = t[n];
            return r.viewContainerParent = null, ul(t, n), li.dirtyParentQueries(r), ll(r), r
        }

        function il(e, n, t) {
            var r = n ? Ci(n, n.def.lastRenderRootNode) : e.renderElement,
                i = t.renderer.parentNode(r),
                l = t.renderer.nextSibling(r);
            Mi(t, 2, i, l, void 0)
        }

        function ll(e) {
            Mi(e, 3, null, null, void 0)
        }

        function ol(e, n, t) {
            n >= e.length ? e.push(t) : e.splice(n, 0, t)
        }

        function ul(e, n) {
            n >= e.length - 1 ? e.pop() : e.splice(n, 1)
        }
        var sl = new Object;

        function al(e, n, t, r, i, l) {
            return new cl(e, n, t, r, i, l)
        }
        var cl = function (e) {
                function n(n, t, r, i, l, o) {
                    var u = e.call(this) || this;
                    return u.selector = n, u.componentType = t, u._inputs = i, u._outputs = l, u.ngContentSelectors = o, u.viewDefFactory = r, u
                }
                return i(n, e), Object.defineProperty(n.prototype, "inputs", {
                    get: function () {
                        var e = [],
                            n = this._inputs;
                        for (var t in n) e.push({
                            propName: t,
                            templateName: n[t]
                        });
                        return e
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(n.prototype, "outputs", {
                    get: function () {
                        var e = [];
                        for (var n in this._outputs) e.push({
                            propName: n,
                            templateName: this._outputs[n]
                        });
                        return e
                    },
                    enumerable: !0,
                    configurable: !0
                }), n.prototype.create = function (e, n, t, r) {
                    if (!r) throw new Error("ngModule should be provided");
                    var i = ki(this.viewDefFactory),
                        l = i.nodes[0].element.componentProvider.nodeIndex,
                        o = li.createRootView(e, n || [], t, i, r, sl),
                        u = ti(o, l).instance;
                    return t && o.renderer.setAttribute(ni(o, 0).renderElement, "ng-version", Gn.full), new pl(o, new gl(o), u)
                }, n
            }(On),
            pl = function (e) {
                function n(n, t, r) {
                    var i = e.call(this) || this;
                    return i._view = n, i._viewRef = t, i._component = r, i._elDef = i._view.def.nodes[0], i.hostView = t, i.changeDetectorRef = t, i.instance = r, i
                }
                return i(n, e), Object.defineProperty(n.prototype, "location", {
                    get: function () {
                        return new Pn(ni(this._view, this._elDef.nodeIndex).renderElement)
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(n.prototype, "injector", {
                    get: function () {
                        return new Sl(this._view, this._elDef)
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(n.prototype, "componentType", {
                    get: function () {
                        return this._component.constructor
                    },
                    enumerable: !0,
                    configurable: !0
                }), n.prototype.destroy = function () {
                    this._viewRef.destroy()
                }, n.prototype.onDestroy = function (e) {
                    this._viewRef.onDestroy(e)
                }, n
            }(bn);

        function hl(e, n, t) {
            return new dl(e, n, t)
        }
        var dl = function () {
            function e(e, n, t) {
                this._view = e, this._elDef = n, this._data = t, this._embeddedViews = []
            }
            return Object.defineProperty(e.prototype, "element", {
                get: function () {
                    return new Pn(this._data.renderElement)
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "injector", {
                get: function () {
                    return new Sl(this._view, this._elDef)
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "parentInjector", {
                get: function () {
                    for (var e = this._view, n = this._elDef.parent; !n && e;) n = Ti(e), e = e.parent;
                    return e ? new Sl(e, n) : new Sl(this._view, null)
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.clear = function () {
                for (var e = this._embeddedViews.length - 1; e >= 0; e--) {
                    var n = rl(this._data, e);
                    li.destroyView(n)
                }
            }, e.prototype.get = function (e) {
                var n = this._embeddedViews[e];
                if (n) {
                    var t = new gl(n);
                    return t.attachToViewContainerRef(this), t
                }
                return null
            }, Object.defineProperty(e.prototype, "length", {
                get: function () {
                    return this._embeddedViews.length
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.createEmbeddedView = function (e, n, t) {
                var r = e.createEmbeddedView(n || {});
                return this.insert(r, t), r
            }, e.prototype.createComponent = function (e, n, t, r, i) {
                var l = t || this.parentInjector;
                i || e instanceof An || (i = l.get(wn));
                var o = e.create(l, r, void 0, i);
                return this.insert(o.hostView, n), o
            }, e.prototype.insert = function (e, n) {
                if (e.destroyed) throw new Error("Cannot insert a destroyed View in a ViewContainer!");
                var t, r, i, l, o = e;
                return l = (t = this._data).viewContainer._embeddedViews, null == (r = n) && (r = l.length), (i = o._view).viewContainerParent = this._view, ol(l, r, i),
                    function (e, n) {
                        var t = Ri(n);
                        if (t && t !== e && !(16 & n.state)) {
                            n.state |= 16;
                            var r = t.template._projectedViews;
                            r || (r = t.template._projectedViews = []), r.push(n),
                                function (e, t) {
                                    if (!(4 & t.flags)) {
                                        n.parent.def.nodeFlags |= 4, t.flags |= 4;
                                        for (var r = t.parent; r;) r.childFlags |= 4, r = r.parent
                                    }
                                }(0, n.parentNodeDef)
                        }
                    }(t, i), li.dirtyParentQueries(i), il(t, r > 0 ? l[r - 1] : null, i), o.attachToViewContainerRef(this), e
            }, e.prototype.move = function (e, n) {
                if (e.destroyed) throw new Error("Cannot move a destroyed View in a ViewContainer!");
                var t, r, i, l, o, u = this._embeddedViews.indexOf(e._view);
                return i = n, o = (l = (t = this._data).viewContainer._embeddedViews)[r = u], ul(l, r), null == i && (i = l.length), ol(l, i, o), li.dirtyParentQueries(o), ll(o), il(t, i > 0 ? l[i - 1] : null, o), e
            }, e.prototype.indexOf = function (e) {
                return this._embeddedViews.indexOf(e._view)
            }, e.prototype.remove = function (e) {
                var n = rl(this._data, e);
                n && li.destroyView(n)
            }, e.prototype.detach = function (e) {
                var n = rl(this._data, e);
                return n ? new gl(n) : null
            }, e
        }();

        function fl(e) {
            return new gl(e)
        }
        var gl = function () {
            function e(e) {
                this._view = e, this._viewContainerRef = null, this._appRef = null
            }
            return Object.defineProperty(e.prototype, "rootNodes", {
                get: function () {
                    return Mi(this._view, 0, void 0, void 0, e = []), e;
                    var e
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "context", {
                get: function () {
                    return this._view.context
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "destroyed", {
                get: function () {
                    return 0 != (128 & this._view.state)
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.markForCheck = function () {
                Ei(this._view)
            }, e.prototype.detach = function () {
                this._view.state &= -5
            }, e.prototype.detectChanges = function () {
                var e = this._view.root.rendererFactory;
                e.begin && e.begin();
                try {
                    li.checkAndUpdateView(this._view)
                } finally {
                    e.end && e.end()
                }
            }, e.prototype.checkNoChanges = function () {
                li.checkNoChangesView(this._view)
            }, e.prototype.reattach = function () {
                this._view.state |= 4
            }, e.prototype.onDestroy = function (e) {
                this._view.disposables || (this._view.disposables = []), this._view.disposables.push(e)
            }, e.prototype.destroy = function () {
                this._appRef ? this._appRef.detachView(this) : this._viewContainerRef && this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)), li.destroyView(this._view)
            }, e.prototype.detachFromAppRef = function () {
                this._appRef = null, ll(this._view), li.dirtyParentQueries(this._view)
            }, e.prototype.attachToAppRef = function (e) {
                if (this._viewContainerRef) throw new Error("This view is already attached to a ViewContainer!");
                this._appRef = e
            }, e.prototype.attachToViewContainerRef = function (e) {
                if (this._appRef) throw new Error("This view is already attached directly to the ApplicationRef!");
                this._viewContainerRef = e
            }, e
        }();

        function vl(e, n) {
            return new ml(e, n)
        }
        var ml = function (e) {
            function n(n, t) {
                var r = e.call(this) || this;
                return r._parentView = n, r._def = t, r
            }
            return i(n, e), n.prototype.createEmbeddedView = function (e) {
                return new gl(li.createEmbeddedView(this._parentView, this._def, this._def.element.template, e))
            }, Object.defineProperty(n.prototype, "elementRef", {
                get: function () {
                    return new Pn(ni(this._parentView, this._def.nodeIndex).renderElement)
                },
                enumerable: !0,
                configurable: !0
            }), n
        }(ht);

        function yl(e, n) {
            return new Sl(e, n)
        }
        var Sl = function () {
            function e(e, n) {
                this.view = e, this.elDef = n
            }
            return e.prototype.get = function (e, n) {
                return void 0 === n && (n = on.THROW_IF_NOT_FOUND), li.resolveDep(this.view, this.elDef, !!this.elDef && 0 != (33554432 & this.elDef.flags), {
                    flags: 0,
                    token: e,
                    tokenKey: pi(e)
                }, n)
            }, e
        }();

        function El(e, n) {
            var t = e.def.nodes[n];
            if (1 & t.flags) {
                var r = ni(e, t.nodeIndex);
                return t.element.template ? r.template : r.renderElement
            }
            if (2 & t.flags) return ei(e, t.nodeIndex).renderText;
            if (20240 & t.flags) return ti(e, t.nodeIndex).instance;
            throw new Error("Illegal state: read nodeValue for node index " + n)
        }

        function bl(e) {
            return new Ol(e.renderer)
        }
        var Ol = function () {
            function e(e) {
                this.delegate = e
            }
            return e.prototype.selectRootElement = function (e) {
                return this.delegate.selectRootElement(e)
            }, e.prototype.createElement = function (e, n) {
                var t = a(Gi(n), 2),
                    r = this.delegate.createElement(t[1], t[0]);
                return e && this.delegate.appendChild(e, r), r
            }, e.prototype.createViewRoot = function (e) {
                return e
            }, e.prototype.createTemplateAnchor = function (e) {
                var n = this.delegate.createComment("");
                return e && this.delegate.appendChild(e, n), n
            }, e.prototype.createText = function (e, n) {
                var t = this.delegate.createText(n);
                return e && this.delegate.appendChild(e, t), t
            }, e.prototype.projectNodes = function (e, n) {
                for (var t = 0; t < n.length; t++) this.delegate.appendChild(e, n[t])
            }, e.prototype.attachViewAfter = function (e, n) {
                for (var t = this.delegate.parentNode(e), r = this.delegate.nextSibling(e), i = 0; i < n.length; i++) this.delegate.insertBefore(t, n[i], r)
            }, e.prototype.detachView = function (e) {
                for (var n = 0; n < e.length; n++) {
                    var t = e[n],
                        r = this.delegate.parentNode(t);
                    this.delegate.removeChild(r, t)
                }
            }, e.prototype.destroyView = function (e, n) {
                for (var t = 0; t < n.length; t++) this.delegate.destroyNode(n[t])
            }, e.prototype.listen = function (e, n, t) {
                return this.delegate.listen(e, n, t)
            }, e.prototype.listenGlobal = function (e, n, t) {
                return this.delegate.listen(e, n, t)
            }, e.prototype.setElementProperty = function (e, n, t) {
                this.delegate.setProperty(e, n, t)
            }, e.prototype.setElementAttribute = function (e, n, t) {
                var r = a(Gi(n), 2),
                    i = r[0],
                    l = r[1];
                null != t ? this.delegate.setAttribute(e, l, t, i) : this.delegate.removeAttribute(e, l, i)
            }, e.prototype.setBindingDebugInfo = function (e, n, t) {}, e.prototype.setElementClass = function (e, n, t) {
                t ? this.delegate.addClass(e, n) : this.delegate.removeClass(e, n)
            }, e.prototype.setElementStyle = function (e, n, t) {
                null != t ? this.delegate.setStyle(e, n, t) : this.delegate.removeStyle(e, n)
            }, e.prototype.invokeElementMethod = function (e, n, t) {
                e[n].apply(e, t)
            }, e.prototype.setText = function (e, n) {
                this.delegate.setValue(e, n)
            }, e.prototype.animate = function () {
                throw new Error("Renderer.animate is no longer supported!")
            }, e
        }();

        function Rl(e, n, t, r) {
            return new Tl(e, n, t, r)
        }
        var Tl = function () {
                function e(e, n, t, r) {
                    this._moduleType = e, this._parent = n, this._bootstrapComponents = t, this._def = r, this._destroyListeners = [], this._destroyed = !1, this.injector = this,
                        function (e) {
                            for (var n = e._def, t = e._providers = new Array(n.providers.length), r = 0; r < n.providers.length; r++) {
                                var i = n.providers[r];
                                4096 & i.flags || void 0 === t[r] && (t[r] = tl(e, i))
                            }
                        }(this)
                }
                return e.prototype.get = function (e, n, t) {
                    void 0 === n && (n = on.THROW_IF_NOT_FOUND), void 0 === t && (t = We.Default);
                    var r = 0;
                    return t & We.SkipSelf ? r |= 1 : t & We.Self && (r |= 4), nl(this, {
                        token: e,
                        tokenKey: pi(e),
                        flags: r
                    }, n)
                }, Object.defineProperty(e.prototype, "instance", {
                    get: function () {
                        return this.get(this._moduleType)
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "componentFactoryResolver", {
                    get: function () {
                        return this.get(_n)
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.destroy = function () {
                    if (this._destroyed) throw new Error("The ng module " + ke(this.instance.constructor) + " has already been destroyed.");
                    this._destroyed = !0,
                        function (e, n) {
                            for (var t = e._def, r = new Set, i = 0; i < t.providers.length; i++)
                                if (131072 & t.providers[i].flags) {
                                    var l = e._providers[i];
                                    if (l && l !== Qi) {
                                        var o = l.ngOnDestroy;
                                        "function" != typeof o || r.has(l) || (o.apply(l), r.add(l))
                                    }
                                }
                        }(this), this._destroyListeners.forEach(function (e) {
                            return e()
                        })
                }, e.prototype.onDestroy = function (e) {
                    this._destroyListeners.push(e)
                }, e
            }(),
            Cl = pi(kn),
            _l = pi(xn),
            Il = pi(Pn),
            Al = pi(br),
            wl = pi(ht),
            Nl = pi(Rr),
            Pl = pi(on),
            Dl = pi(rn);

        function kl(e, n, t, r, i, l, o, u) {
            var s = [];
            if (o)
                for (var c in o) {
                    var p = a(o[c], 2);
                    s[p[0]] = {
                        flags: 8,
                        name: c,
                        nonMinifiedName: p[1],
                        ns: null,
                        securityContext: null,
                        suffix: null
                    }
                }
            var h = [];
            if (u)
                for (var d in u) h.push({
                    type: 1,
                    propName: d,
                    target: null,
                    eventName: u[d]
                });
            return xl(e, n |= 16384, t, r, i, i, l, s, h)
        }

        function Ml(e, n, t) {
            return xl(-1, e |= 16, null, 0, n, n, t)
        }

        function Ll(e, n, t, r, i) {
            return xl(-1, e, n, 0, t, r, i)
        }

        function xl(e, n, t, r, i, l, o, u, s) {
            var a = wi(t),
                c = a.matchedQueries,
                p = a.references,
                h = a.matchedQueryIds;
            s || (s = []), u || (u = []), l = xe(l);
            var d = Ni(o, ke(i));
            return {
                nodeIndex: -1,
                parent: null,
                renderParent: null,
                bindingIndex: -1,
                outputIndex: -1,
                checkIndex: e,
                flags: n,
                childFlags: 0,
                directChildFlags: 0,
                childMatchedQueries: 0,
                matchedQueries: c,
                matchedQueryIds: h,
                references: p,
                ngContentIndex: -1,
                childCount: r,
                bindings: u,
                bindingFlags: Bi(u),
                outputs: s,
                element: null,
                provider: {
                    token: i,
                    value: l,
                    deps: d
                },
                text: null,
                query: null,
                ngContent: null
            }
        }

        function Fl(e, n) {
            return Bl(e, n)
        }

        function Ul(e, n) {
            for (var t = e; t.parent && !_i(t);) t = t.parent;
            return Vl(t.parent, Ti(t), !0, n.provider.value, n.provider.deps)
        }

        function Hl(e, n) {
            var t = Vl(e, n.parent, (32768 & n.flags) > 0, n.provider.value, n.provider.deps);
            if (n.outputs.length)
                for (var r = 0; r < n.outputs.length; r++) {
                    var i = n.outputs[r],
                        l = t[i.propName];
                    if (!It(l)) throw new Error("@Output " + i.propName + " not initialized in '" + t.constructor.name + "'.");
                    var o = l.subscribe(Gl(e, n.parent.nodeIndex, i.eventName));
                    e.disposables[n.outputIndex + r] = o.unsubscribe.bind(o)
                }
            return t
        }

        function Gl(e, n, t) {
            return function (r) {
                return Oi(e, n, t, r)
            }
        }

        function Bl(e, n) {
            var t = (8192 & n.flags) > 0,
                r = n.provider;
            switch (201347067 & n.flags) {
                case 512:
                    return Vl(e, n.parent, t, r.value, r.deps);
                case 1024:
                    return function (e, n, t, r, i) {
                        var l = i.length;
                        switch (l) {
                            case 0:
                                return r();
                            case 1:
                                return r(jl(e, n, t, i[0]));
                            case 2:
                                return r(jl(e, n, t, i[0]), jl(e, n, t, i[1]));
                            case 3:
                                return r(jl(e, n, t, i[0]), jl(e, n, t, i[1]), jl(e, n, t, i[2]));
                            default:
                                for (var o = Array(l), u = 0; u < l; u++) o[u] = jl(e, n, t, i[u]);
                                return r.apply(void 0, c(o))
                        }
                    }(e, n.parent, t, r.value, r.deps);
                case 2048:
                    return jl(e, n.parent, t, r.deps[0]);
                case 256:
                    return r.value
            }
        }

        function Vl(e, n, t, r, i) {
            var l = i.length;
            switch (l) {
                case 0:
                    return new r;
                case 1:
                    return new r(jl(e, n, t, i[0]));
                case 2:
                    return new r(jl(e, n, t, i[0]), jl(e, n, t, i[1]));
                case 3:
                    return new r(jl(e, n, t, i[0]), jl(e, n, t, i[1]), jl(e, n, t, i[2]));
                default:
                    for (var o = new Array(l), u = 0; u < l; u++) o[u] = jl(e, n, t, i[u]);
                    return new(r.bind.apply(r, c([void 0], o)))
            }
        }
        var Wl = {};

        function jl(e, n, t, r, i) {
            if (void 0 === i && (i = on.THROW_IF_NOT_FOUND), 8 & r.flags) return r.token;
            var l = e;
            2 & r.flags && (i = null);
            var o = r.tokenKey;
            o === Nl && (t = !(!n || !n.element.componentView)), n && 1 & r.flags && (t = !1, n = n.parent);
            for (var u = e; u;) {
                if (n) switch (o) {
                    case Cl:
                        return bl(Yl(u, n, t));
                    case _l:
                        return Yl(u, n, t).renderer;
                    case Il:
                        return new Pn(ni(u, n.nodeIndex).renderElement);
                    case Al:
                        return ni(u, n.nodeIndex).viewContainer;
                    case wl:
                        if (n.element.template) return ni(u, n.nodeIndex).template;
                        break;
                    case Nl:
                        return fl(Yl(u, n, t));
                    case Pl:
                    case Dl:
                        return yl(u, n);
                    default:
                        var s = (t ? n.element.allProviders : n.element.publicProviders)[o];
                        if (s) {
                            var a = ti(u, s.nodeIndex);
                            return a || (a = {
                                instance: Bl(u, s)
                            }, u.nodes[s.nodeIndex] = a), a.instance
                        }
                }
                t = _i(u), n = Ti(u), u = u.parent, 4 & r.flags && (u = null)
            }
            var c = l.root.injector.get(r.token, Wl);
            return c !== Wl || i === Wl ? c : l.root.ngModule.injector.get(r.token, i)
        }

        function Yl(e, n, t) {
            var r;
            if (t) r = ni(e, n.nodeIndex).componentView;
            else
                for (r = e; r.parent && !_i(r);) r = r.parent;
            return r
        }

        function zl(e, n, t, r, i, l) {
            if (32768 & t.flags) {
                var o = ni(e, t.parent.nodeIndex).componentView;
                2 & o.def.flags && (o.state |= 8)
            }
            if (n.instance[t.bindings[r].name] = i, 524288 & t.flags) {
                l = l || {};
                var u = Qe.unwrap(e.oldValues[t.bindingIndex + r]);
                l[t.bindings[r].nonMinifiedName] = new Ze(u, i, 0 != (2 & e.state))
            }
            return e.oldValues[t.bindingIndex + r] = i, l
        }

        function Kl(e, n) {
            if (e.def.nodeFlags & n)
                for (var t = e.def.nodes, r = 0, i = 0; i < t.length; i++) {
                    var l = t[i],
                        o = l.parent;
                    for (!o && l.flags & n && $l(e, i, l.flags & n, r++), 0 == (l.childFlags & n) && (i += l.childCount); o && 1 & o.flags && i === o.nodeIndex + o.childCount;) o.directChildFlags & n && (r = ql(e, o, n, r)), o = o.parent
                }
        }

        function ql(e, n, t, r) {
            for (var i = n.nodeIndex + 1; i <= n.nodeIndex + n.childCount; i++) {
                var l = e.def.nodes[i];
                l.flags & t && $l(e, i, l.flags & t, r++), i += l.childCount
            }
            return r
        }

        function $l(e, n, t, r) {
            var i = ti(e, n);
            if (i) {
                var l = i.instance;
                l && (li.setCurrentNode(e, n), 1048576 & t && Jr(e, 512, r) && l.ngAfterContentInit(), 2097152 & t && l.ngAfterContentChecked(), 4194304 & t && Jr(e, 768, r) && l.ngAfterViewInit(), 8388608 & t && l.ngAfterViewChecked(), 131072 & t && l.ngOnDestroy())
            }
        }

        function Ql(e, n, t) {
            var r = [];
            for (var i in t) r.push({
                propName: i,
                bindingType: t[i]
            });
            return {
                nodeIndex: -1,
                parent: null,
                renderParent: null,
                bindingIndex: -1,
                outputIndex: -1,
                checkIndex: -1,
                flags: e,
                childFlags: 0,
                directChildFlags: 0,
                childMatchedQueries: 0,
                ngContentIndex: -1,
                matchedQueries: {},
                matchedQueryIds: 0,
                references: {},
                childCount: 0,
                bindings: [],
                bindingFlags: 0,
                outputs: [],
                element: null,
                provider: null,
                text: null,
                query: {
                    id: n,
                    filterId: Ai(n),
                    bindings: r
                },
                ngContent: null
            }
        }

        function Zl(e) {
            for (var n = e.def.nodeMatchedQueries; e.parent && Ii(e);) {
                var t = e.parentNodeDef;
                e = e.parent;
                for (var r = t.nodeIndex + t.childCount, i = 0; i <= r; i++) 67108864 & (l = e.def.nodes[i]).flags && 536870912 & l.flags && (l.query.filterId & n) === l.query.filterId && ii(e, i).setDirty(), !(1 & l.flags && i + l.childCount < t.nodeIndex) && 67108864 & l.childFlags && 536870912 & l.childFlags || (i += l.childCount)
            }
            if (134217728 & e.def.nodeFlags)
                for (i = 0; i < e.def.nodes.length; i++) {
                    var l;
                    134217728 & (l = e.def.nodes[i]).flags && 536870912 & l.flags && ii(e, i).setDirty(), i += l.childCount
                }
        }

        function Xl(e, n) {
            var t = ii(e, n.nodeIndex);
            if (t.dirty) {
                var r, i = void 0;
                if (67108864 & n.flags) {
                    var l = n.parent.parent;
                    i = Jl(e, l.nodeIndex, l.nodeIndex + l.childCount, n.query, []), r = ti(e, n.parent.nodeIndex).instance
                } else 134217728 & n.flags && (i = Jl(e, 0, e.def.nodes.length - 1, n.query, []), r = e.component);
                t.reset(i);
                for (var o = n.query.bindings, u = !1, s = 0; s < o.length; s++) {
                    var a = o[s],
                        c = void 0;
                    switch (a.bindingType) {
                        case 0:
                            c = t.first;
                            break;
                        case 1:
                            c = t, u = !0
                    }
                    r[a.propName] = c
                }
                u && t.notifyOnChanges()
            }
        }

        function Jl(e, n, t, r, i) {
            for (var l = n; l <= t; l++) {
                var o = e.def.nodes[l],
                    u = o.matchedQueries[r.id];
                if (null != u && i.push(eo(e, o, u)), 1 & o.flags && o.element.template && (o.element.template.nodeMatchedQueries & r.filterId) === r.filterId) {
                    var s = ni(e, l);
                    if ((o.childMatchedQueries & r.filterId) === r.filterId && (Jl(e, l + 1, l + o.childCount, r, i), l += o.childCount), 16777216 & o.flags)
                        for (var a = s.viewContainer._embeddedViews, c = 0; c < a.length; c++) {
                            var p = a[c],
                                h = Ri(p);
                            h && h === s && Jl(p, 0, p.def.nodes.length - 1, r, i)
                        }
                    var d = s.template._projectedViews;
                    if (d)
                        for (c = 0; c < d.length; c++) {
                            var f = d[c];
                            Jl(f, 0, f.def.nodes.length - 1, r, i)
                        }
                }(o.childMatchedQueries & r.filterId) !== r.filterId && (l += o.childCount)
            }
            return i
        }

        function eo(e, n, t) {
            if (null != t) switch (t) {
                case 1:
                    return ni(e, n.nodeIndex).renderElement;
                case 0:
                    return new Pn(ni(e, n.nodeIndex).renderElement);
                case 2:
                    return ni(e, n.nodeIndex).template;
                case 3:
                    return ni(e, n.nodeIndex).viewContainer;
                case 4:
                    return ti(e, n.nodeIndex).instance
            }
        }

        function no(e, n, t) {
            var r = Pi(e, n, t);
            r && xi(e, t.ngContent.index, 1, r, null, void 0)
        }

        function to(e, n) {
            return io(128, e, new Array(n + 1))
        }

        function ro(e, n) {
            for (var t = Object.keys(n), r = t.length, i = new Array(r), l = 0; l < r; l++) {
                var o = t[l];
                i[n[o]] = o
            }
            return io(64, e, i)
        }

        function io(e, n, t) {
            for (var r = new Array(t.length), i = 0; i < t.length; i++) {
                var l = t[i];
                r[i] = {
                    flags: 8,
                    name: l,
                    ns: null,
                    nonMinifiedName: l,
                    securityContext: null,
                    suffix: null
                }
            }
            return {
                nodeIndex: -1,
                parent: null,
                renderParent: null,
                bindingIndex: -1,
                outputIndex: -1,
                checkIndex: n,
                flags: e,
                childFlags: 0,
                directChildFlags: 0,
                childMatchedQueries: 0,
                matchedQueries: {},
                matchedQueryIds: 0,
                references: {},
                ngContentIndex: -1,
                childCount: 0,
                bindings: r,
                bindingFlags: Bi(r),
                outputs: [],
                element: null,
                provider: null,
                text: null,
                query: null,
                ngContent: null
            }
        }

        function lo(e, n, t) {
            for (var r = new Array(t.length - 1), i = 1; i < t.length; i++) r[i - 1] = {
                flags: 8,
                name: null,
                ns: null,
                nonMinifiedName: null,
                securityContext: null,
                suffix: t[i]
            };
            return {
                nodeIndex: -1,
                parent: null,
                renderParent: null,
                bindingIndex: -1,
                outputIndex: -1,
                checkIndex: e,
                flags: 2,
                childFlags: 0,
                directChildFlags: 0,
                childMatchedQueries: 0,
                matchedQueries: {},
                matchedQueryIds: 0,
                references: {},
                ngContentIndex: n,
                childCount: 0,
                bindings: r,
                bindingFlags: 8,
                outputs: [],
                element: null,
                provider: null,
                text: {
                    prefix: t[0]
                },
                query: null,
                ngContent: null
            }
        }

        function oo(e, n, t) {
            var r, i = e.renderer;
            r = i.createText(t.text.prefix);
            var l = Pi(e, n, t);
            return l && i.appendChild(l, r), {
                renderText: r
            }
        }

        function uo(e, n) {
            return (null != e ? e.toString() : "") + n.suffix
        }

        function so(e, n, t, r) {
            for (var i = 0, l = 0, o = 0, u = 0, s = 0, a = null, c = null, p = !1, h = !1, d = null, f = 0; f < n.length; f++) {
                var g = n[f];
                if (g.nodeIndex = f, g.parent = a, g.bindingIndex = i, g.outputIndex = l, g.renderParent = c, o |= g.flags, s |= g.matchedQueryIds, g.element) {
                    var v = g.element;
                    v.publicProviders = a ? a.element.publicProviders : Object.create(null), v.allProviders = v.publicProviders, p = !1, h = !1, g.element.template && (s |= g.element.template.nodeMatchedQueries)
                }
                if (co(a, g, n.length), i += g.bindings.length, l += g.outputs.length, !c && 3 & g.flags && (d = g), 20224 & g.flags) {
                    p || (p = !0, a.element.publicProviders = Object.create(a.element.publicProviders), a.element.allProviders = a.element.publicProviders);
                    var m = 0 != (32768 & g.flags);
                    0 == (8192 & g.flags) || m ? a.element.publicProviders[pi(g.provider.token)] = g : (h || (h = !0, a.element.allProviders = Object.create(a.element.publicProviders)), a.element.allProviders[pi(g.provider.token)] = g), m && (a.element.componentProvider = g)
                }
                if (a ? (a.childFlags |= g.flags, a.directChildFlags |= g.flags, a.childMatchedQueries |= g.matchedQueryIds, g.element && g.element.template && (a.childMatchedQueries |= g.element.template.nodeMatchedQueries)) : u |= g.flags, g.childCount > 0) a = g, ao(g) || (c = g);
                else
                    for (; a && f === a.nodeIndex + a.childCount;) {
                        var y = a.parent;
                        y && (y.childFlags |= a.childFlags, y.childMatchedQueries |= a.childMatchedQueries), c = (a = y) && ao(a) ? a.renderParent : a
                    }
            }
            return {
                factory: null,
                nodeFlags: o,
                rootNodeFlags: u,
                nodeMatchedQueries: s,
                flags: e,
                nodes: n,
                updateDirectives: t || ai,
                updateRenderer: r || ai,
                handleEvent: function (e, t, r, i) {
                    return n[t].element.handleEvent(e, r, i)
                },
                bindingCount: i,
                outputCount: l,
                lastRenderRootNode: d
            }
        }

        function ao(e) {
            return 0 != (1 & e.flags) && null === e.element.name
        }

        function co(e, n, t) {
            var r = n.element && n.element.template;
            if (r) {
                if (!r.lastRenderRootNode) throw new Error("Illegal State: Embedded templates without nodes are not allowed!");
                if (r.lastRenderRootNode && 16777216 & r.lastRenderRootNode.flags) throw new Error("Illegal State: Last root node of a template can't have embedded views, at index " + n.nodeIndex + "!")
            }
            if (20224 & n.flags && 0 == (1 & (e ? e.flags : 0))) throw new Error("Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index " + n.nodeIndex + "!");
            if (n.query) {
                if (67108864 & n.flags && (!e || 0 == (16384 & e.flags))) throw new Error("Illegal State: Content Query nodes need to be children of directives, at index " + n.nodeIndex + "!");
                if (134217728 & n.flags && e) throw new Error("Illegal State: View Query nodes have to be top level nodes, at index " + n.nodeIndex + "!")
            }
            if (n.childCount) {
                var i = e ? e.nodeIndex + e.childCount : t - 1;
                if (n.nodeIndex <= i && n.nodeIndex + n.childCount > i) throw new Error("Illegal State: childCount of node leads outside of parent, at index " + n.nodeIndex + "!")
            }
        }

        function po(e, n, t, r) {
            var i = go(e.root, e.renderer, e, n, t);
            return vo(i, e.component, r), mo(i), i
        }

        function ho(e, n, t) {
            var r = go(e, e.renderer, null, null, n);
            return vo(r, t, t), mo(r), r
        }

        function fo(e, n, t, r) {
            var i, l = n.element.componentRendererType;
            return i = l ? e.root.rendererFactory.createRenderer(r, l) : e.root.renderer, go(e.root, i, e, n.element.componentProvider, t)
        }

        function go(e, n, t, r, i) {
            var l = new Array(i.nodes.length),
                o = i.outputCount ? new Array(i.outputCount) : null;
            return {
                def: i,
                parent: t,
                viewContainerParent: null,
                parentNodeDef: r,
                context: null,
                component: null,
                nodes: l,
                state: 13,
                root: e,
                renderer: n,
                oldValues: new Array(i.bindingCount),
                disposables: o,
                initIndex: -1
            }
        }

        function vo(e, n, t) {
            e.component = n, e.context = t
        }

        function mo(e) {
            var n;
            _i(e) && (n = ni(e.parent, e.parentNodeDef.parent.nodeIndex).renderElement);
            for (var t = e.def, r = e.nodes, i = 0; i < t.nodes.length; i++) {
                var l = t.nodes[i];
                li.setCurrentNode(e, i);
                var o = void 0;
                switch (201347067 & l.flags) {
                    case 1:
                        var u = zi(e, n, l),
                            s = void 0;
                        if (33554432 & l.flags) {
                            var a = ki(l.element.componentView);
                            s = li.createComponentView(e, l, a, u)
                        }
                        Ki(e, s, l, u), o = {
                            renderElement: u,
                            componentView: s,
                            viewContainer: null,
                            template: l.element.template ? vl(e, l) : void 0
                        }, 16777216 & l.flags && (o.viewContainer = hl(e, l, o));
                        break;
                    case 2:
                        o = oo(e, n, l);
                        break;
                    case 512:
                    case 1024:
                    case 2048:
                    case 256:
                        (o = r[i]) || 4096 & l.flags || (o = {
                            instance: Fl(e, l)
                        });
                        break;
                    case 16:
                        o = {
                            instance: Ul(e, l)
                        };
                        break;
                    case 16384:
                        (o = r[i]) || (o = {
                            instance: Hl(e, l)
                        }), 32768 & l.flags && vo(ni(e, l.parent.nodeIndex).componentView, o.instance, o.instance);
                        break;
                    case 32:
                    case 64:
                    case 128:
                        o = {
                            value: void 0
                        };
                        break;
                    case 67108864:
                    case 134217728:
                        o = new vr;
                        break;
                    case 8:
                        no(e, n, l), o = void 0
                }
                r[i] = o
            }
            _o(e, Co.CreateViewNodes), No(e, 201326592, 268435456, 0)
        }

        function yo(e) {
            bo(e), li.updateDirectives(e, 1), Io(e, Co.CheckNoChanges), li.updateRenderer(e, 1), _o(e, Co.CheckNoChanges), e.state &= -97
        }

        function So(e) {
            1 & e.state ? (e.state &= -2, e.state |= 2) : e.state &= -3, Xr(e, 0, 256), bo(e), li.updateDirectives(e, 0), Io(e, Co.CheckAndUpdate), No(e, 67108864, 536870912, 0);
            var n = Xr(e, 256, 512);
            Kl(e, 2097152 | (n ? 1048576 : 0)), li.updateRenderer(e, 0), _o(e, Co.CheckAndUpdate), No(e, 134217728, 536870912, 0), Kl(e, 8388608 | ((n = Xr(e, 512, 768)) ? 4194304 : 0)), 2 & e.def.flags && (e.state &= -9), e.state &= -97, Xr(e, 768, 1024)
        }

        function Eo(e, n, t, r, i, l, o, u, s, a, p, h, d) {
            return 0 === t ? function (e, n, t, r, i, l, o, u, s, a, c, p) {
                switch (201347067 & n.flags) {
                    case 1:
                        return function (e, n, t, r, i, l, o, u, s, a, c, p) {
                            var h = n.bindings.length,
                                d = !1;
                            return h > 0 && $i(e, n, 0, t) && (d = !0), h > 1 && $i(e, n, 1, r) && (d = !0), h > 2 && $i(e, n, 2, i) && (d = !0), h > 3 && $i(e, n, 3, l) && (d = !0), h > 4 && $i(e, n, 4, o) && (d = !0), h > 5 && $i(e, n, 5, u) && (d = !0), h > 6 && $i(e, n, 6, s) && (d = !0), h > 7 && $i(e, n, 7, a) && (d = !0), h > 8 && $i(e, n, 8, c) && (d = !0), h > 9 && $i(e, n, 9, p) && (d = !0), d
                        }(e, n, t, r, i, l, o, u, s, a, c, p);
                    case 2:
                        return function (e, n, t, r, i, l, o, u, s, a, c, p) {
                            var h = !1,
                                d = n.bindings,
                                f = d.length;
                            if (f > 0 && yi(e, n, 0, t) && (h = !0), f > 1 && yi(e, n, 1, r) && (h = !0), f > 2 && yi(e, n, 2, i) && (h = !0), f > 3 && yi(e, n, 3, l) && (h = !0), f > 4 && yi(e, n, 4, o) && (h = !0), f > 5 && yi(e, n, 5, u) && (h = !0), f > 6 && yi(e, n, 6, s) && (h = !0), f > 7 && yi(e, n, 7, a) && (h = !0), f > 8 && yi(e, n, 8, c) && (h = !0), f > 9 && yi(e, n, 9, p) && (h = !0), h) {
                                var g = n.text.prefix;
                                f > 0 && (g += uo(t, d[0])), f > 1 && (g += uo(r, d[1])), f > 2 && (g += uo(i, d[2])), f > 3 && (g += uo(l, d[3])), f > 4 && (g += uo(o, d[4])), f > 5 && (g += uo(u, d[5])), f > 6 && (g += uo(s, d[6])), f > 7 && (g += uo(a, d[7])), f > 8 && (g += uo(c, d[8])), f > 9 && (g += uo(p, d[9]));
                                var v = ei(e, n.nodeIndex).renderText;
                                e.renderer.setValue(v, g)
                            }
                            return h
                        }(e, n, t, r, i, l, o, u, s, a, c, p);
                    case 16384:
                        return function (e, n, t, r, i, l, o, u, s, a, c, p) {
                            var h = ti(e, n.nodeIndex),
                                d = h.instance,
                                f = !1,
                                g = void 0,
                                v = n.bindings.length;
                            return v > 0 && mi(e, n, 0, t) && (f = !0, g = zl(e, h, n, 0, t, g)), v > 1 && mi(e, n, 1, r) && (f = !0, g = zl(e, h, n, 1, r, g)), v > 2 && mi(e, n, 2, i) && (f = !0, g = zl(e, h, n, 2, i, g)), v > 3 && mi(e, n, 3, l) && (f = !0, g = zl(e, h, n, 3, l, g)), v > 4 && mi(e, n, 4, o) && (f = !0, g = zl(e, h, n, 4, o, g)), v > 5 && mi(e, n, 5, u) && (f = !0, g = zl(e, h, n, 5, u, g)), v > 6 && mi(e, n, 6, s) && (f = !0, g = zl(e, h, n, 6, s, g)), v > 7 && mi(e, n, 7, a) && (f = !0, g = zl(e, h, n, 7, a, g)), v > 8 && mi(e, n, 8, c) && (f = !0, g = zl(e, h, n, 8, c, g)), v > 9 && mi(e, n, 9, p) && (f = !0, g = zl(e, h, n, 9, p, g)), g && d.ngOnChanges(g), 65536 & n.flags && Jr(e, 256, n.nodeIndex) && d.ngOnInit(), 262144 & n.flags && d.ngDoCheck(), f
                        }(e, n, t, r, i, l, o, u, s, a, c, p);
                    case 32:
                    case 64:
                    case 128:
                        return function (e, n, t, r, i, l, o, u, s, a, c, p) {
                            var h = n.bindings,
                                d = !1,
                                f = h.length;
                            if (f > 0 && yi(e, n, 0, t) && (d = !0), f > 1 && yi(e, n, 1, r) && (d = !0), f > 2 && yi(e, n, 2, i) && (d = !0), f > 3 && yi(e, n, 3, l) && (d = !0), f > 4 && yi(e, n, 4, o) && (d = !0), f > 5 && yi(e, n, 5, u) && (d = !0), f > 6 && yi(e, n, 6, s) && (d = !0), f > 7 && yi(e, n, 7, a) && (d = !0), f > 8 && yi(e, n, 8, c) && (d = !0), f > 9 && yi(e, n, 9, p) && (d = !0), d) {
                                var g = ri(e, n.nodeIndex),
                                    v = void 0;
                                switch (201347067 & n.flags) {
                                    case 32:
                                        v = new Array(h.length), f > 0 && (v[0] = t), f > 1 && (v[1] = r), f > 2 && (v[2] = i), f > 3 && (v[3] = l), f > 4 && (v[4] = o), f > 5 && (v[5] = u), f > 6 && (v[6] = s), f > 7 && (v[7] = a), f > 8 && (v[8] = c), f > 9 && (v[9] = p);
                                        break;
                                    case 64:
                                        v = {}, f > 0 && (v[h[0].name] = t), f > 1 && (v[h[1].name] = r), f > 2 && (v[h[2].name] = i), f > 3 && (v[h[3].name] = l), f > 4 && (v[h[4].name] = o), f > 5 && (v[h[5].name] = u), f > 6 && (v[h[6].name] = s), f > 7 && (v[h[7].name] = a), f > 8 && (v[h[8].name] = c), f > 9 && (v[h[9].name] = p);
                                        break;
                                    case 128:
                                        var m = t;
                                        switch (f) {
                                            case 1:
                                                v = m.transform(t);
                                                break;
                                            case 2:
                                                v = m.transform(r);
                                                break;
                                            case 3:
                                                v = m.transform(r, i);
                                                break;
                                            case 4:
                                                v = m.transform(r, i, l);
                                                break;
                                            case 5:
                                                v = m.transform(r, i, l, o);
                                                break;
                                            case 6:
                                                v = m.transform(r, i, l, o, u);
                                                break;
                                            case 7:
                                                v = m.transform(r, i, l, o, u, s);
                                                break;
                                            case 8:
                                                v = m.transform(r, i, l, o, u, s, a);
                                                break;
                                            case 9:
                                                v = m.transform(r, i, l, o, u, s, a, c);
                                                break;
                                            case 10:
                                                v = m.transform(r, i, l, o, u, s, a, c, p)
                                        }
                                }
                                g.value = v
                            }
                            return d
                        }(e, n, t, r, i, l, o, u, s, a, c, p);
                    default:
                        throw "unreachable"
                }
            }(e, n, r, i, l, o, u, s, a, p, h, d) : function (e, n, t) {
                switch (201347067 & n.flags) {
                    case 1:
                        return function (e, n, t) {
                            for (var r = !1, i = 0; i < t.length; i++) $i(e, n, i, t[i]) && (r = !0);
                            return r
                        }(e, n, t);
                    case 2:
                        return function (e, n, t) {
                            for (var r = n.bindings, i = !1, l = 0; l < t.length; l++) yi(e, n, l, t[l]) && (i = !0);
                            if (i) {
                                var o = "";
                                for (l = 0; l < t.length; l++) o += uo(t[l], r[l]);
                                o = n.text.prefix + o;
                                var u = ei(e, n.nodeIndex).renderText;
                                e.renderer.setValue(u, o)
                            }
                            return i
                        }(e, n, t);
                    case 16384:
                        return function (e, n, t) {
                            for (var r = ti(e, n.nodeIndex), i = r.instance, l = !1, o = void 0, u = 0; u < t.length; u++) mi(e, n, u, t[u]) && (l = !0, o = zl(e, r, n, u, t[u], o));
                            return o && i.ngOnChanges(o), 65536 & n.flags && Jr(e, 256, n.nodeIndex) && i.ngOnInit(), 262144 & n.flags && i.ngDoCheck(), l
                        }(e, n, t);
                    case 32:
                    case 64:
                    case 128:
                        return function (e, n, t) {
                            for (var r = n.bindings, i = !1, l = 0; l < t.length; l++) yi(e, n, l, t[l]) && (i = !0);
                            if (i) {
                                var o = ri(e, n.nodeIndex),
                                    u = void 0;
                                switch (201347067 & n.flags) {
                                    case 32:
                                        u = t;
                                        break;
                                    case 64:
                                        for (u = {}, l = 0; l < t.length; l++) u[r[l].name] = t[l];
                                        break;
                                    case 128:
                                        var s = t[0],
                                            a = t.slice(1);
                                        u = s.transform.apply(s, c(a))
                                }
                                o.value = u
                            }
                            return i
                        }(e, n, t);
                    default:
                        throw "unreachable"
                }
            }(e, n, r)
        }

        function bo(e) {
            var n = e.def;
            if (4 & n.nodeFlags)
                for (var t = 0; t < n.nodes.length; t++) {
                    var r = n.nodes[t];
                    if (4 & r.flags) {
                        var i = ni(e, t).template._projectedViews;
                        if (i)
                            for (var l = 0; l < i.length; l++) {
                                var o = i[l];
                                o.state |= 32, bi(o, e)
                            }
                    } else 0 == (4 & r.childFlags) && (t += r.childCount)
                }
        }

        function Oo(e, n, t, r, i, l, o, u, s, a, c, p, h) {
            return 0 === t ? function (e, n, t, r, i, l, o, u, s, a, c, p) {
                var h = n.bindings.length;
                h > 0 && Si(e, n, 0, t), h > 1 && Si(e, n, 1, r), h > 2 && Si(e, n, 2, i), h > 3 && Si(e, n, 3, l), h > 4 && Si(e, n, 4, o), h > 5 && Si(e, n, 5, u), h > 6 && Si(e, n, 6, s), h > 7 && Si(e, n, 7, a), h > 8 && Si(e, n, 8, c), h > 9 && Si(e, n, 9, p)
            }(e, n, r, i, l, o, u, s, a, c, p, h) : function (e, n, t) {
                for (var r = 0; r < t.length; r++) Si(e, n, r, t[r])
            }(e, n, r), !1
        }

        function Ro(e, n) {
            if (ii(e, n.nodeIndex).dirty) throw oi(li.createDebugContext(e, n.nodeIndex), "Query " + n.query.id + " not dirty", "Query " + n.query.id + " dirty", 0 != (1 & e.state))
        }

        function To(e) {
            if (!(128 & e.state)) {
                if (Io(e, Co.Destroy), _o(e, Co.Destroy), Kl(e, 131072), e.disposables)
                    for (var n = 0; n < e.disposables.length; n++) e.disposables[n]();
                ! function (e) {
                    if (16 & e.state) {
                        var n = Ri(e);
                        if (n) {
                            var t = n.template._projectedViews;
                            t && (ul(t, t.indexOf(e)), li.dirtyParentQueries(e))
                        }
                    }
                }(e), e.renderer.destroyNode && function (e) {
                    for (var n = e.def.nodes.length, t = 0; t < n; t++) {
                        var r = e.def.nodes[t];
                        1 & r.flags ? e.renderer.destroyNode(ni(e, t).renderElement) : 2 & r.flags ? e.renderer.destroyNode(ei(e, t).renderText) : (67108864 & r.flags || 134217728 & r.flags) && ii(e, t).destroy()
                    }
                }(e), _i(e) && e.renderer.destroy(), e.state |= 128
            }
        }
        var Co = function (e) {
            return e[e.CreateViewNodes = 0] = "CreateViewNodes", e[e.CheckNoChanges = 1] = "CheckNoChanges", e[e.CheckNoChangesProjectedViews = 2] = "CheckNoChangesProjectedViews", e[e.CheckAndUpdate = 3] = "CheckAndUpdate", e[e.CheckAndUpdateProjectedViews = 4] = "CheckAndUpdateProjectedViews", e[e.Destroy = 5] = "Destroy", e
        }({});

        function _o(e, n) {
            var t = e.def;
            if (33554432 & t.nodeFlags)
                for (var r = 0; r < t.nodes.length; r++) {
                    var i = t.nodes[r];
                    33554432 & i.flags ? Ao(ni(e, r).componentView, n) : 0 == (33554432 & i.childFlags) && (r += i.childCount)
                }
        }

        function Io(e, n) {
            var t = e.def;
            if (16777216 & t.nodeFlags)
                for (var r = 0; r < t.nodes.length; r++) {
                    var i = t.nodes[r];
                    if (16777216 & i.flags)
                        for (var l = ni(e, r).viewContainer._embeddedViews, o = 0; o < l.length; o++) Ao(l[o], n);
                    else 0 == (16777216 & i.childFlags) && (r += i.childCount)
                }
        }

        function Ao(e, n) {
            var t = e.state;
            switch (n) {
                case Co.CheckNoChanges:
                    0 == (128 & t) && (12 == (12 & t) ? yo(e) : 64 & t && wo(e, Co.CheckNoChangesProjectedViews));
                    break;
                case Co.CheckNoChangesProjectedViews:
                    0 == (128 & t) && (32 & t ? yo(e) : 64 & t && wo(e, n));
                    break;
                case Co.CheckAndUpdate:
                    0 == (128 & t) && (12 == (12 & t) ? So(e) : 64 & t && wo(e, Co.CheckAndUpdateProjectedViews));
                    break;
                case Co.CheckAndUpdateProjectedViews:
                    0 == (128 & t) && (32 & t ? So(e) : 64 & t && wo(e, n));
                    break;
                case Co.Destroy:
                    To(e);
                    break;
                case Co.CreateViewNodes:
                    mo(e)
            }
        }

        function wo(e, n) {
            Io(e, n), _o(e, n)
        }

        function No(e, n, t, r) {
            if (e.def.nodeFlags & n && e.def.nodeFlags & t)
                for (var i = e.def.nodes.length, l = 0; l < i; l++) {
                    var o = e.def.nodes[l];
                    if (o.flags & n && o.flags & t) switch (li.setCurrentNode(e, o.nodeIndex), r) {
                        case 0:
                            Xl(e, o);
                            break;
                        case 1:
                            Ro(e, o)
                    }
                    o.childFlags & n && o.childFlags & t || (l += o.childCount)
                }
        }
        var Po = !1;

        function Do(e, n, t, r, i, l) {
            var o = i.injector.get(Mn);
            return ho(Mo(e, i, o, n, t), r, l)
        }

        function ko(e, n, t, r, i, l) {
            var o = i.injector.get(Mn),
                u = Mo(e, i, new hu(o), n, t),
                s = jo(r);
            return cu(Jo.create, ho, null, [u, s, l])
        }

        function Mo(e, n, t, r, i) {
            var l = n.injector.get(Hn),
                o = n.injector.get(Ct),
                u = t.createRenderer(null, null);
            return {
                ngModule: n,
                injector: e,
                projectableNodes: r,
                selectorOrNode: i,
                sanitizer: l,
                rendererFactory: t,
                renderer: u,
                errorHandler: o
            }
        }

        function Lo(e, n, t, r) {
            var i = jo(t);
            return cu(Jo.create, po, null, [e, n, i, r])
        }

        function xo(e, n, t, r) {
            return t = Go.get(n.element.componentProvider.provider.token) || jo(t), cu(Jo.create, fo, null, [e, n, t, r])
        }

        function Fo(e, n, t, r) {
            return Rl(e, n, t, function (e) {
                var n = function (e) {
                        var n = !1,
                            t = !1;
                        return 0 === Uo.size ? {
                            hasOverrides: n,
                            hasDeprecatedOverrides: t
                        } : (e.providers.forEach(function (e) {
                            var r = Uo.get(e.token);
                            3840 & e.flags && r && (n = !0, t = t || r.deprecatedBehavior)
                        }), e.modules.forEach(function (e) {
                            Ho.forEach(function (r, i) {
                                me(i).providedIn === e && (n = !0, t = t || r.deprecatedBehavior)
                            })
                        }), {
                            hasOverrides: n,
                            hasDeprecatedOverrides: t
                        })
                    }(e),
                    t = n.hasDeprecatedOverrides;
                return n.hasOverrides ? (function (e) {
                    for (var n = 0; n < e.providers.length; n++) {
                        var r = e.providers[n];
                        t && (r.flags |= 4096);
                        var i = Uo.get(r.token);
                        i && (r.flags = -3841 & r.flags | i.flags, r.deps = Ni(i.deps), r.value = i.value)
                    }
                    if (Ho.size > 0) {
                        var l = new Set(e.modules);
                        Ho.forEach(function (n, r) {
                            if (l.has(me(r).providedIn)) {
                                var i = {
                                    token: r,
                                    flags: n.flags | (t ? 4096 : 0),
                                    deps: Ni(n.deps),
                                    value: n.value,
                                    index: e.providers.length
                                };
                                e.providers.push(i), e.providersByKey[pi(r)] = i
                            }
                        })
                    }
                }(e = e.factory(function () {
                    return ai
                })), e) : e
            }(r))
        }
        var Uo = new Map,
            Ho = new Map,
            Go = new Map;

        function Bo(e) {
            var n;
            Uo.set(e.token, e), "function" == typeof e.token && (n = me(e.token)) && "function" == typeof n.providedIn && Ho.set(e.token, e)
        }

        function Vo(e, n) {
            var t = ki(n.viewDefFactory),
                r = ki(t.nodes[0].element.componentView);
            Go.set(e, r)
        }

        function Wo() {
            Uo.clear(), Ho.clear(), Go.clear()
        }

        function jo(e) {
            if (0 === Uo.size) return e;
            var n = function (e) {
                for (var n = [], t = null, r = 0; r < e.nodes.length; r++) {
                    var i = e.nodes[r];
                    1 & i.flags && (t = i), t && 3840 & i.flags && Uo.has(i.provider.token) && (n.push(t.nodeIndex), t = null)
                }
                return n
            }(e);
            if (0 === n.length) return e;
            e = e.factory(function () {
                return ai
            });
            for (var t = 0; t < n.length; t++) r(e, n[t]);
            return e;

            function r(e, n) {
                for (var t = n + 1; t < e.nodes.length; t++) {
                    var r = e.nodes[t];
                    if (1 & r.flags) return;
                    if (3840 & r.flags) {
                        var i = r.provider,
                            l = Uo.get(i.token);
                        l && (r.flags = -3841 & r.flags | l.flags, i.deps = Ni(l.deps), i.value = l.value)
                    }
                }
            }
        }

        function Yo(e, n, t, r, i, l, o, u, s, a, c, p, h) {
            var d = e.def.nodes[n];
            return Eo(e, d, t, r, i, l, o, u, s, a, c, p, h), 224 & d.flags ? ri(e, n).value : void 0
        }

        function zo(e, n, t, r, i, l, o, u, s, a, c, p, h) {
            var d = e.def.nodes[n];
            return Oo(e, d, t, r, i, l, o, u, s, a, c, p, h), 224 & d.flags ? ri(e, n).value : void 0
        }

        function Ko(e) {
            return cu(Jo.detectChanges, So, null, [e])
        }

        function qo(e) {
            return cu(Jo.checkNoChanges, yo, null, [e])
        }

        function $o(e) {
            return cu(Jo.destroy, To, null, [e])
        }
        var Qo, Zo, Xo, Jo = function (e) {
            return e[e.create = 0] = "create", e[e.detectChanges = 1] = "detectChanges", e[e.checkNoChanges = 2] = "checkNoChanges", e[e.destroy = 3] = "destroy", e[e.handleEvent = 4] = "handleEvent", e
        }({});

        function eu(e, n) {
            Zo = e, Xo = n
        }

        function nu(e, n, t, r) {
            return eu(e, n), cu(Jo.handleEvent, e.def.handleEvent, null, [e, n, t, r])
        }

        function tu(e, n) {
            if (128 & e.state) throw si(Jo[Qo]);
            return eu(e, ou(e, 0)), e.def.updateDirectives(function (e, t, r) {
                for (var i = [], l = 3; l < arguments.length; l++) i[l - 3] = arguments[l];
                var o = e.def.nodes[t];
                return 0 === n ? iu(e, o, r, i) : lu(e, o, r, i), 16384 & o.flags && eu(e, ou(e, t)), 224 & o.flags ? ri(e, o.nodeIndex).value : void 0
            }, e)
        }

        function ru(e, n) {
            if (128 & e.state) throw si(Jo[Qo]);
            return eu(e, uu(e, 0)), e.def.updateRenderer(function (e, t, r) {
                for (var i = [], l = 3; l < arguments.length; l++) i[l - 3] = arguments[l];
                var o = e.def.nodes[t];
                return 0 === n ? iu(e, o, r, i) : lu(e, o, r, i), 3 & o.flags && eu(e, uu(e, t)), 224 & o.flags ? ri(e, o.nodeIndex).value : void 0
            }, e)
        }

        function iu(e, n, t, r) {
            if (Eo.apply(void 0, c([e, n, t], r))) {
                var i = 1 === t ? r[0] : r;
                if (16384 & n.flags) {
                    for (var l = {}, o = 0; o < n.bindings.length; o++) {
                        var u = n.bindings[o],
                            s = i[o];
                        8 & u.flags && (l[(d = u.nonMinifiedName, "ng-reflect-" + d.replace(/[$@]/g, "_").replace(Ke, function () {
                            for (var e = [], n = 0; n < arguments.length; n++) e[n] = arguments[n];
                            return "-" + e[1].toLowerCase()
                        }))] = qe(s))
                    }
                    var a = n.parent,
                        p = ni(e, a.nodeIndex).renderElement;
                    if (a.element.name)
                        for (var h in l) null != (s = l[h]) ? e.renderer.setAttribute(p, h, s) : e.renderer.removeAttribute(p, h);
                    else e.renderer.setValue(p, "bindings=" + JSON.stringify(l, null, 2))
                }
            }
            var d
        }

        function lu(e, n, t, r) {
            Oo.apply(void 0, c([e, n, t], r))
        }

        function ou(e, n) {
            for (var t = n; t < e.def.nodes.length; t++) {
                var r = e.def.nodes[t];
                if (16384 & r.flags && r.bindings && r.bindings.length) return t
            }
            return null
        }

        function uu(e, n) {
            for (var t = n; t < e.def.nodes.length; t++) {
                var r = e.def.nodes[t];
                if (3 & r.flags && r.bindings && r.bindings.length) return t
            }
            return null
        }
        var su = function () {
            function e(e, n) {
                this.view = e, this.nodeIndex = n, null == n && (this.nodeIndex = n = 0), this.nodeDef = e.def.nodes[n];
                for (var t = this.nodeDef, r = e; t && 0 == (1 & t.flags);) t = t.parent;
                if (!t)
                    for (; !t && r;) t = Ti(r), r = r.parent;
                this.elDef = t, this.elView = r
            }
            return Object.defineProperty(e.prototype, "elOrCompView", {
                get: function () {
                    return ni(this.elView, this.elDef.nodeIndex).componentView || this.view
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "injector", {
                get: function () {
                    return yl(this.elView, this.elDef)
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "component", {
                get: function () {
                    return this.elOrCompView.component
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "context", {
                get: function () {
                    return this.elOrCompView.context
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "providerTokens", {
                get: function () {
                    var e = [];
                    if (this.elDef)
                        for (var n = this.elDef.nodeIndex + 1; n <= this.elDef.nodeIndex + this.elDef.childCount; n++) {
                            var t = this.elView.def.nodes[n];
                            20224 & t.flags && e.push(t.provider.token), n += t.childCount
                        }
                    return e
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "references", {
                get: function () {
                    var e = {};
                    if (this.elDef) {
                        au(this.elView, this.elDef, e);
                        for (var n = this.elDef.nodeIndex + 1; n <= this.elDef.nodeIndex + this.elDef.childCount; n++) {
                            var t = this.elView.def.nodes[n];
                            20224 & t.flags && au(this.elView, t, e), n += t.childCount
                        }
                    }
                    return e
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "componentRenderElement", {
                get: function () {
                    var e = function (e) {
                        for (; e && !_i(e);) e = e.parent;
                        return e.parent ? ni(e.parent, Ti(e).nodeIndex) : null
                    }(this.elOrCompView);
                    return e ? e.renderElement : void 0
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "renderNode", {
                get: function () {
                    return 2 & this.nodeDef.flags ? Ci(this.view, this.nodeDef) : Ci(this.elView, this.elDef)
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.logError = function (e) {
                for (var n, t, r = [], i = 1; i < arguments.length; i++) r[i - 1] = arguments[i];
                2 & this.nodeDef.flags ? (n = this.view.def, t = this.nodeDef.nodeIndex) : (n = this.elView.def, t = this.elDef.nodeIndex);
                var l = function (e, n) {
                        for (var t = -1, r = 0; r <= n; r++) 3 & e.nodes[r].flags && t++;
                        return t
                    }(n, t),
                    o = -1;
                n.factory(function () {
                    var n;
                    return ++o === l ? (n = e.error).bind.apply(n, c([e], r)) : ai
                }), o < l && (e.error("Illegal state: the ViewDefinitionFactory did not call the logger!"), e.error.apply(e, c(r)))
            }, e
        }();

        function au(e, n, t) {
            for (var r in n.references) t[r] = eo(e, n, n.references[r])
        }

        function cu(e, n, t, r) {
            var i = Qo,
                l = Zo,
                o = Xo;
            try {
                Qo = e;
                var u = n.apply(t, r);
                return Zo = l, Xo = o, Qo = i, u
            } catch (s) {
                if (Ot(s) || !Zo) throw s;
                throw function (e, n) {
                    return e instanceof Error || (e = new Error(e.toString())), ui(e, n), e
                }(s, pu())
            }
        }

        function pu() {
            return Zo ? new su(Zo, Xo) : null
        }
        var hu = function () {
                function e(e) {
                    this.delegate = e
                }
                return e.prototype.createRenderer = function (e, n) {
                    return new du(this.delegate.createRenderer(e, n))
                }, e.prototype.begin = function () {
                    this.delegate.begin && this.delegate.begin()
                }, e.prototype.end = function () {
                    this.delegate.end && this.delegate.end()
                }, e.prototype.whenRenderingDone = function () {
                    return this.delegate.whenRenderingDone ? this.delegate.whenRenderingDone() : Promise.resolve(null)
                }, e
            }(),
            du = function () {
                function e(e) {
                    this.delegate = e, this.debugContextFactory = pu, this.data = this.delegate.data
                }
                return e.prototype.createDebugContext = function (e) {
                    return this.debugContextFactory(e)
                }, e.prototype.destroyNode = function (e) {
                    ! function (e) {
                        Ar.delete(e.nativeNode)
                    }(wr(e)), this.delegate.destroyNode && this.delegate.destroyNode(e)
                }, e.prototype.destroy = function () {
                    this.delegate.destroy()
                }, e.prototype.createElement = function (e, n) {
                    var t = this.delegate.createElement(e, n),
                        r = this.createDebugContext(t);
                    if (r) {
                        var i = new Ir(t, null, r);
                        i.name = e, Nr(i)
                    }
                    return t
                }, e.prototype.createComment = function (e) {
                    var n = this.delegate.createComment(e),
                        t = this.createDebugContext(n);
                    return t && Nr(new _r(n, null, t)), n
                }, e.prototype.createText = function (e) {
                    var n = this.delegate.createText(e),
                        t = this.createDebugContext(n);
                    return t && Nr(new _r(n, null, t)), n
                }, e.prototype.appendChild = function (e, n) {
                    var t = wr(e),
                        r = wr(n);
                    t && r && t instanceof Ir && t.addChild(r), this.delegate.appendChild(e, n)
                }, e.prototype.insertBefore = function (e, n, t) {
                    var r = wr(e),
                        i = wr(n),
                        l = wr(t);
                    r && i && r instanceof Ir && r.insertBefore(l, i), this.delegate.insertBefore(e, n, t)
                }, e.prototype.removeChild = function (e, n) {
                    var t = wr(e),
                        r = wr(n);
                    t && r && t instanceof Ir && t.removeChild(r), this.delegate.removeChild(e, n)
                }, e.prototype.selectRootElement = function (e, n) {
                    var t = this.delegate.selectRootElement(e, n),
                        r = pu();
                    return r && Nr(new Ir(t, null, r)), t
                }, e.prototype.setAttribute = function (e, n, t, r) {
                    var i = wr(e);
                    i && i instanceof Ir && (i.attributes[r ? r + ":" + n : n] = t), this.delegate.setAttribute(e, n, t, r)
                }, e.prototype.removeAttribute = function (e, n, t) {
                    var r = wr(e);
                    r && r instanceof Ir && (r.attributes[t ? t + ":" + n : n] = null), this.delegate.removeAttribute(e, n, t)
                }, e.prototype.addClass = function (e, n) {
                    var t = wr(e);
                    t && t instanceof Ir && (t.classes[n] = !0), this.delegate.addClass(e, n)
                }, e.prototype.removeClass = function (e, n) {
                    var t = wr(e);
                    t && t instanceof Ir && (t.classes[n] = !1), this.delegate.removeClass(e, n)
                }, e.prototype.setStyle = function (e, n, t, r) {
                    var i = wr(e);
                    i && i instanceof Ir && (i.styles[n] = t), this.delegate.setStyle(e, n, t, r)
                }, e.prototype.removeStyle = function (e, n, t) {
                    var r = wr(e);
                    r && r instanceof Ir && (r.styles[n] = null), this.delegate.removeStyle(e, n, t)
                }, e.prototype.setProperty = function (e, n, t) {
                    var r = wr(e);
                    r && r instanceof Ir && (r.properties[n] = t), this.delegate.setProperty(e, n, t)
                }, e.prototype.listen = function (e, n, t) {
                    if ("string" != typeof e) {
                        var r = wr(e);
                        r && r.listeners.push(new Cr(n, t))
                    }
                    return this.delegate.listen(e, n, t)
                }, e.prototype.parentNode = function (e) {
                    return this.delegate.parentNode(e)
                }, e.prototype.nextSibling = function (e) {
                    return this.delegate.nextSibling(e)
                }, e.prototype.setValue = function (e, n) {
                    return this.delegate.setValue(e, n)
                }, e
            }();

        function fu(e, n, t) {
            return new gu(e, n, t)
        }
        var gu = function (e) {
                function n(n, t, r) {
                    var i = e.call(this) || this;
                    return i.moduleType = n, i._bootstrapComponents = t, i._ngModuleDefFactory = r, i
                }
                return i(n, e), n.prototype.create = function (e) {
                    ! function () {
                        if (!Po) {
                            Po = !0;
                            var e = Wn() ? {
                                setCurrentNode: eu,
                                createRootView: ko,
                                createEmbeddedView: Lo,
                                createComponentView: xo,
                                createNgModuleRef: Fo,
                                overrideProvider: Bo,
                                overrideComponentView: Vo,
                                clearOverrides: Wo,
                                checkAndUpdateView: Ko,
                                checkNoChangesView: qo,
                                destroyView: $o,
                                createDebugContext: function (e, n) {
                                    return new su(e, n)
                                },
                                handleEvent: nu,
                                updateDirectives: tu,
                                updateRenderer: ru
                            } : {
                                setCurrentNode: function () {},
                                createRootView: Do,
                                createEmbeddedView: po,
                                createComponentView: fo,
                                createNgModuleRef: Rl,
                                overrideProvider: ai,
                                overrideComponentView: ai,
                                clearOverrides: ai,
                                checkAndUpdateView: So,
                                checkNoChangesView: yo,
                                destroyView: To,
                                createDebugContext: function (e, n) {
                                    return new su(e, n)
                                },
                                handleEvent: function (e, n, t, r) {
                                    return e.def.handleEvent(e, n, t, r)
                                },
                                updateDirectives: function (e, n) {
                                    return e.def.updateDirectives(0 === n ? Yo : zo, e)
                                },
                                updateRenderer: function (e, n) {
                                    return e.def.updateRenderer(0 === n ? Yo : zo, e)
                                }
                            };
                            li.setCurrentNode = e.setCurrentNode, li.createRootView = e.createRootView, li.createEmbeddedView = e.createEmbeddedView, li.createComponentView = e.createComponentView, li.createNgModuleRef = e.createNgModuleRef, li.overrideProvider = e.overrideProvider, li.overrideComponentView = e.overrideComponentView, li.clearOverrides = e.clearOverrides, li.checkAndUpdateView = e.checkAndUpdateView, li.checkNoChangesView = e.checkNoChangesView, li.destroyView = e.destroyView, li.resolveDep = jl, li.createDebugContext = e.createDebugContext, li.handleEvent = e.handleEvent, li.updateDirectives = e.updateDirectives, li.updateRenderer = e.updateRenderer, li.dirtyParentQueries = Zl
                        }
                    }();
                    var n = function (e) {
                        var n = Array.from(e.providers),
                            t = Array.from(e.modules),
                            r = {};
                        for (var i in e.providersByKey) r[i] = e.providersByKey[i];
                        return {
                            factory: e.factory,
                            isRoot: e.isRoot,
                            providers: n,
                            modules: t,
                            providersByKey: r
                        }
                    }(ki(this._ngModuleDefFactory));
                    return li.createNgModuleRef(this.moduleType, e || on.NULL, this._bootstrapComponents, n)
                }, n
            }(Nn),
            vu = function (e) {
                return e[e.NOTHING = 0] = "NOTHING", e[e.FOOD = 1] = "FOOD", e[e.LOG = 2] = "LOG", e[e.BRUSHWOOD = 3] = "BRUSHWOOD", e[e.STONE = 4] = "STONE", e[e.FUR = 5] = "FUR", e[e.WHEAT = 6] = "WHEAT", e[e.BARLEY = 7] = "BARLEY", e[e.HOP = 8] = "HOP", e[e.COTTON = 9] = "COTTON", e[e.HAY = 10] = "HAY", e[e.CHICKEN = 11] = "CHICKEN", e[e.COW = 12] = "COW", e[e.PIG = 13] = "PIG", e[e.HORSE = 14] = "HORSE", e[e.COAL = 15] = "COAL", e[e.GOLD_ORE = 16] = "GOLD_ORE", e[e.SILVER_ORE = 17] = "SILVER_ORE", e[e.COPPER_ORE = 18] = "COPPER_ORE", e[e.TIN_ORE = 19] = "TIN_ORE", e[e.IRON_ORE = 20] = "IRON_ORE", e[e.PLANK = 21] = "PLANK", e[e.CUT_STONE = 22] = "CUT_STONE", e[e.FUEL = 23] = "FUEL", e[e.FLOUR = 24] = "FLOUR", e[e.FABRIC = 25] = "FABRIC", e[e.LEATHER = 26] = "LEATHER", e[e.COINS = 27] = "COINS", e[e.COPPER = 28] = "COPPER", e[e.GOLD = 29] = "GOLD", e[e.SILVER = 30] = "SILVER", e[e.TIN = 31] = "TIN", e[e.BRONZE = 32] = "BRONZE", e[e.IRON = 33] = "IRON", e[e.STEEL = 34] = "STEEL", e[e.BERRY = 35] = "BERRY", e[e.MUSHROOM = 36] = "MUSHROOM", e[e.FISH = 37] = "FISH", e[e.APPLE = 38] = "APPLE", e[e.GRAPE = 39] = "GRAPE", e[e.BREAD = 40] = "BREAD", e[e.MEAT = 41] = "MEAT", e[e.EGG = 42] = "EGG", e[e.MILK = 43] = "MILK", e[e.COOKED_MEAT = 44] = "COOKED_MEAT", e[e.VEGETABLE_SOUP = 45] = "VEGETABLE_SOUP", e[e.MEAT_SOUP = 46] = "MEAT_SOUP", e[e.BEER = 47] = "BEER", e[e.WINE = 48] = "WINE", e[e.CLOTHES = 49] = "CLOTHES", e[e.BOW = 50] = "BOW", e[e.STONE_PICKAXE = 51] = "STONE_PICKAXE", e[e.STONE_SHOVEL = 52] = "STONE_SHOVEL", e[e.STONE_AXE = 53] = "STONE_AXE", e[e.STONE_SPEAR = 54] = "STONE_SPEAR", e[e.STONE_HAMMER = 55] = "STONE_HAMMER", e[e.SWORD = 56] = "SWORD", e[e.WOODEN_SHIELD = 57] = "WOODEN_SHIELD", e[e.LEATHER_ARMOR = 58] = "LEATHER_ARMOR", e[e.LIGHT_ARMOR = 59] = "LIGHT_ARMOR", e[e.HEAVY_ARMOR = 60] = "HEAVY_ARMOR", e[e.FISH_FOOD = 61] = "FISH_FOOD", e
            }({});
        ! function (e) {
            e.values = function () {
                return Object.keys(e).filter(function (e) {
                    return isNaN(e) && "values" !== e
                })
            }
        }(vu || (vu = {}));
        var mu, yu = function (e) {
                return e[e.MOTIVATION_SPEECH = 0] = "MOTIVATION_SPEECH", e[e.ROYAL_PROPHECY = 1] = "ROYAL_PROPHECY", e[e.HERITAGE = 2] = "HERITAGE", e[e.FAMILY_JEWELS = 3] = "FAMILY_JEWELS", e[e.KING_OF_THE_FOREST = 4] = "KING_OF_THE_FOREST", e[e.KING_OF_THE_SEAS = 5] = "KING_OF_THE_SEAS", e[e.KING_OF_THE_PEOPLE = 6] = "KING_OF_THE_PEOPLE", e[e.KING_OF_THE_WAR = 7] = "KING_OF_THE_WAR", e[e.CALL_TO_ARMS = 8] = "CALL_TO_ARMS", e[e.UNITE_WITH_THE_PEOPLE = 9] = "UNITE_WITH_THE_PEOPLE", e
            }({}),
            Su = function (e) {
                return e[e.MANAGEMENT = 0] = "MANAGEMENT", e[e.STONE_AXE = 1] = "STONE_AXE", e[e.STONE_PICKAXE = 2] = "STONE_PICKAXE", e[e.STONE_SHOVEL = 3] = "STONE_SHOVEL", e[e.STONE_HAMMER = 4] = "STONE_HAMMER", e[e.HUNTING = 5] = "HUNTING", e[e.FIRE = 6] = "FIRE", e[e.BIGGER_FIRE = 7] = "BIGGER_FIRE", e[e.COOKING = 8] = "COOKING", e[e.TRADE = 9] = "TRADE", e[e.ALCOHOL = 10] = "ALCOHOL", e[e.WONDER_BUILDINGS = 11] = "WONDER_BUILDINGS", e[e.TRADE_ROUTES = 12] = "TRADE_ROUTES", e[e.BUFF_PRODUCTION = 13] = "BUFF_PRODUCTION", e[e.STONE_SPEAR = 14] = "STONE_SPEAR", e[e.BOW = 15] = "BOW", e[e.BARRACKS = 16] = "BARRACKS", e[e.WOODEN_DEFENCES = 17] = "WOODEN_DEFENCES", e[e.STONE_DEFENCES = 18] = "STONE_DEFENCES", e[e.STASH = 19] = "STASH", e[e.SCIENTIFIC_METHOD = 20] = "SCIENTIFIC_METHOD", e[e.FORESIGHT = 21] = "FORESIGHT", e[e.CALENDAR = 22] = "CALENDAR", e[e.WEATHER = 23] = "WEATHER", e[e.HISTORY = 24] = "HISTORY", e[e.URBAN_PLANNING = 25] = "URBAN_PLANNING", e[e.MATHEMATICS = 26] = "MATHEMATICS", e[e.PROSPECTING_FOR_ORE = 27] = "PROSPECTING_FOR_ORE", e[e.ADVANCED_PROSPECTING = 28] = "ADVANCED_PROSPECTING", e[e.MASTER_PROSPECTING = 29] = "MASTER_PROSPECTING", e[e.SAWMILL = 30] = "SAWMILL", e[e.MINING = 31] = "MINING", e[e.PIT_MINE = 32] = "PIT_MINE", e[e.UNDERGROUND_MINE = 33] = "UNDERGROUND_MINE", e[e.WINDMILL = 34] = "WINDMILL", e[e.MORTAR = 35] = "MORTAR", e[e.HOUSE = 36] = "HOUSE", e[e.LEATHER = 37] = "LEATHER", e[e.FABRIC = 38] = "FABRIC", e[e.TAILORING = 39] = "TAILORING", e[e.ORE_PROCESSING = 40] = "ORE_PROCESSING", e[e.ADVANCED_ORE_PROCESSING = 41] = "ADVANCED_ORE_PROCESSING", e[e.MASTER_ORE_PROCESSING = 42] = "MASTER_ORE_PROCESSING", e[e.COINS_MINTING = 43] = "COINS_MINTING", e[e.METALLURGY = 44] = "METALLURGY", e[e.ADVANCED_METALLURGY = 45] = "ADVANCED_METALLURGY", e[e.PICKAXE_DESIGN = 46] = "PICKAXE_DESIGN", e[e.AGRICULTURE = 47] = "AGRICULTURE", e[e.FORESTRY = 48] = "FORESTRY", e[e.FISHING = 49] = "FISHING", e[e.ANIMALS = 50] = "ANIMALS", e[e.COTTON = 51] = "COTTON", e[e.FERTILIZER = 52] = "FERTILIZER", e[e.HUMAN_RESOURCES = 53] = "HUMAN_RESOURCES", e[e.FISH_FOOD = 54] = "FISH_FOOD", e
            }({}),
            Eu = function (e) {
                return e[e.WEATHER = 0] = "WEATHER", e[e.MARKET = 1] = "MARKET", e[e.MANAGEMENT = 2] = "MANAGEMENT", e[e.CRAFTING = 3] = "CRAFTING", e[e.RESEARCH = 4] = "RESEARCH", e[e.ARMY = 5] = "ARMY", e[e.RELIGION = 6] = "RELIGION", e[e.FORT = 7] = "FORT", e[e.SEA = 8] = "SEA", e[e.FIELD = 9] = "FIELD", e[e.MOUNTAINS = 10] = "MOUNTAINS", e[e.PLATEAU = 11] = "PLATEAU", e[e.HOUSE = 12] = "HOUSE", e[e.SHRINE = 13] = "SHRINE", e[e.CHURCH = 14] = "CHURCH", e[e.TAILOR = 15] = "TAILOR", e[e.TAVERN = 16] = "TAVERN", e[e.BAKERY = 17] = "BAKERY", e[e.MARKETPLACE = 18] = "MARKETPLACE", e[e.BARRACKS = 19] = "BARRACKS", e[e.STOCKADE = 20] = "STOCKADE", e[e.WOODEN_TOWER = 21] = "WOODEN_TOWER", e[e.STONE_TOWER = 22] = "STONE_TOWER", e[e.STASH = 23] = "STASH", e[e.FORESTER = 24] = "FORESTER", e[e.SAWMILL = 25] = "SAWMILL", e[e.HUNTER = 26] = "HUNTER", e[e.TANNERY = 27] = "TANNERY", e[e.WINDMILL = 28] = "WINDMILL", e[e.FARM = 29] = "FARM", e[e.PASTURE = 30] = "PASTURE", e[e.BUTCHER = 31] = "BUTCHER", e[e.BREWERY = 32] = "BREWERY", e[e.WINERY = 33] = "WINERY", e[e.COTTON_MILL = 34] = "COTTON_MILL", e[e.PIT_MINE = 35] = "PIT_MINE", e[e.GEOLOGIST = 36] = "GEOLOGIST", e[e.SMITHY = 37] = "SMITHY", e[e.MINT = 38] = "MINT", e[e.FISHERS_HUT = 39] = "FISHERS_HUT", e[e.CALENDAR = 40] = "CALENDAR", e[e.FIRE = 41] = "FIRE", e[e.URBAN_PLANNING = 42] = "URBAN_PLANNING", e[e.ALCOHOL = 43] = "ALCOHOL", e[e.GOLD = 44] = "GOLD", e[e.SILVER = 45] = "SILVER", e[e.BRONZE = 46] = "BRONZE", e[e.IRON = 47] = "IRON", e[e.STEEL = 48] = "STEEL", e[e.ADVANCED_ORE_PROCESSING = 49] = "ADVANCED_ORE_PROCESSING", e[e.BUFFS = 50] = "BUFFS", e[e.COTTON = 51] = "COTTON", e[e.BARLEY = 52] = "BARLEY", e[e.HOPS = 53] = "HOPS", e[e.R_QUARRY = 54] = "R_QUARRY", e[e.R_SMITHY = 55] = "R_SMITHY", e[e.HUMAN_RESOURCES = 56] = "HUMAN_RESOURCES", e[e.FISH_FOOD = 57] = "FISH_FOOD", e
            }({}),
            bu = function (e) {
                return e[e.ALL = 0] = "ALL", e[e.CONSTRUCTION = 1] = "CONSTRUCTION", e[e.DECONSTRUCTION = 2] = "DECONSTRUCTION", e[e.HUT = 3] = "HUT", e[e.HOUSE = 4] = "HOUSE", e[e.MARKETPLACE = 5] = "MARKETPLACE", e[e.WAREHOUSE = 6] = "WAREHOUSE", e[e.SMITHY = 7] = "SMITHY", e[e.BAKERY = 8] = "BAKERY", e[e.WORKSHOP = 9] = "WORKSHOP", e[e.SHRINE = 10] = "SHRINE", e[e.TAILOR = 11] = "TAILOR", e[e.BREWERY = 12] = "BREWERY", e[e.TAVERN = 13] = "TAVERN", e[e.CHURCH = 14] = "CHURCH", e[e.STOCKADE = 15] = "STOCKADE", e[e.BARRACKS = 16] = "BARRACKS", e[e.TRAINING_SQUARE = 17] = "TRAINING_SQUARE", e[e.WOODEN_TOWER = 18] = "WOODEN_TOWER", e[e.STONE_TOWER = 19] = "STONE_TOWER", e[e.STASH = 20] = "STASH", e[e.LOGGERS_HUT = 21] = "LOGGERS_HUT", e[e.SAWMILL = 22] = "SAWMILL", e[e.FORESTER = 23] = "FORESTER", e[e.HUNTER_LODGE = 24] = "HUNTER_LODGE", e[e.GATHERER = 25] = "GATHERER", e[e.TANNERY = 26] = "TANNERY", e[e.FARM = 27] = "FARM", e[e.FIELD = 28] = "FIELD", e[e.ORCHARD = 29] = "ORCHARD", e[e.PASTURE = 30] = "PASTURE", e[e.WINDMILL = 31] = "WINDMILL", e[e.BUTCHER = 32] = "BUTCHER", e[e.COTTON_MILL = 33] = "COTTON_MILL", e[e.WINERY = 34] = "WINERY", e[e.PIT_MINE = 35] = "PIT_MINE", e[e.QUARRY = 36] = "QUARRY", e[e.GEOLOGIST = 37] = "GEOLOGIST", e[e.STONEMASON = 38] = "STONEMASON", e[e.MINT = 39] = "MINT", e[e.FISHERS_HUT = 40] = "FISHERS_HUT", e[e.SCHOOL_OF_FISH = 41] = "SCHOOL_OF_FISH", e[e.SHARKS = 42] = "SHARKS", e[e.STONEHENGE = 43] = "STONEHENGE", e[e.PYRAMID = 44] = "PYRAMID", e[e.HANGING_GARDEN = 45] = "HANGING_GARDEN", e[e.COLOSSUS = 46] = "COLOSSUS", e[e.UNDERGROUND_CITY = 47] = "UNDERGROUND_CITY", e[e.GREAT_LIGHTHOUSE = 48] = "GREAT_LIGHTHOUSE", e[e.SACRED_GROVE = 49] = "SACRED_GROVE", e[e.ASCENSION_TEMPLE = 50] = "ASCENSION_TEMPLE", e
            }({}),
            Ou = function (e) {
                return e[e.BLESSING = 0] = "BLESSING", e[e.PREACH = 1] = "PREACH", e[e.FAITH_SHIELD = 2] = "FAITH_SHIELD", e[e.SOLDIER_PRAYER = 3] = "SOLDIER_PRAYER", e[e.FAITHFUL_RESEARCH = 4] = "FAITHFUL_RESEARCH", e[e.BABY_BOOM = 5] = "BABY_BOOM", e[e.LIFE_CYCLE = 6] = "LIFE_CYCLE", e[e.HOLY_WAR = 7] = "HOLY_WAR", e
            }({}),
            Ru = function (e) {
                return e[e.TRAIN = 0] = "TRAIN", e[e.DEFEND = 1] = "DEFEND", e[e.SPY = 2] = "SPY", e[e.DIVERSION = 3] = "DIVERSION", e[e.PLUNDER = 4] = "PLUNDER", e[e.EXPEDITION = 5] = "EXPEDITION", e[e.CONQUER = 6] = "CONQUER", e
            }({}),
            Tu = function (e) {
                return e[e.NONE = 0] = "NONE", e[e.WHEAT = 1] = "WHEAT", e[e.BARLEY = 2] = "BARLEY", e[e.HAY = 3] = "HAY", e[e.HOP = 4] = "HOP", e[e.COTTON = 5] = "COTTON", e[e.BERRY = 6] = "BERRY", e[e.GRAPE = 7] = "GRAPE", e[e.APPLE = 8] = "APPLE", e
            }({}),
            Cu = function (e) {
                return e[e.ALL = 0] = "ALL", e[e.NONE = 1] = "NONE", e[e.RAW = 2] = "RAW", e[e.PROCESSED = 3] = "PROCESSED", e[e.FOOD = 4] = "FOOD", e[e.TOOLS = 5] = "TOOLS", e[e.OTHER = 6] = "OTHER", e[e.WOODEN = 7] = "WOODEN", e[e.METAL = 8] = "METAL", e[e.STONE = 9] = "STONE", e[e.ANIMAL = 10] = "ANIMAL", e[e.FUEL = 11] = "FUEL", e[e.CONSUMABLE = 12] = "CONSUMABLE", e
            }({}),
            _u = function (e) {
                return e[e.NONE = 0] = "NONE", e[e.FERTILITY = 1] = "FERTILITY", e[e.NATURE = 2] = "NATURE", e[e.TECHNOLOGY = 3] = "TECHNOLOGY", e[e.WAR = 4] = "WAR", e
            }({}),
            Iu = function (e) {
                return e[e.ALL = 0] = "ALL", e[e.MILITIA = 1] = "MILITIA", e[e.SPEARMAN = 2] = "SPEARMAN", e[e.ARCHER = 3] = "ARCHER", e[e.SWORDSMAN = 4] = "SWORDSMAN", e
            }({}),
            Au = function () {
                function e() {}
                return e.round = function (e, n) {
                    return e.toFixed(n)
                }, e.titleCase = function (e) {
                    return e.charAt(0).toUpperCase() + e.substr(1).toLowerCase()
                }, e.prepareResourceName = function (e) {
                    return this.titleCase(vu[e].replace(/_/g, " "))
                }, e.prepareResourceTypeName = function (e) {
                    return this.titleCase(Cu[e].replace(/_/g, " "))
                }, e.preparePerkName = function (e) {
                    return this.titleCase(yu[e].replace(/_/g, " "))
                }, e.prepareTechName = function (e) {
                    return this.titleCase(Su[e].replace(/_/g, " "))
                }, e.prepareFlagName = function (e) {
                    return this.titleCase(Eu[e].replace(/_/g, " "))
                }, e.prepareBuildingName = function (e) {
                    return this.titleCase(bu[e].replace(/_/g, " "))
                }, e.preparePrayerName = function (e) {
                    return this.titleCase(Ou[e].replace(/_/g, " "))
                }, e.prepareReligionName = function (e) {
                    return this.titleCase(_u[e].replace(/_/g, " "))
                }, e.prepareTroopName = function (e) {
                    return this.titleCase(Iu[e].replace(/_/g, " "))
                }, e.prepareMissionName = function (e) {
                    return this.titleCase(Ru[e].replace(/_/g, " "))
                }, e.prepareCropName = function (e) {
                    return this.titleCase(Tu[e].replace(/_/g, " "))
                }, e.resourcesArraysDiff = function (e, n) {
                    return e.filter(function (e) {
                        return n.findIndex(function (n) {
                            return n.resource === e.resource
                        }) < 0
                    })
                }, e.prepareResourcesNamesList = function (n) {
                    var t = "";
                    return n.forEach(function (n) {
                        return t += e.prepareResourceName(n.resource) + ", "
                    }), (t = t.substr(0, t.length - 2)).toLowerCase()
                }, e.copyResourceArray = function (e) {
                    var n = [];
                    return e.forEach(function (e) {
                        return n.push({
                            resource: e.resource,
                            amount: e.amount
                        })
                    }), n
                }, e
            }(),
            wu = function (e) {
                return e[e.GENERAL = 0] = "GENERAL", e[e.MILITARY = 1] = "MILITARY", e[e.SCIENCE = 2] = "SCIENCE", e[e.TECHNOLOGY = 3] = "TECHNOLOGY", e[e.AGRICULTURE = 4] = "AGRICULTURE", e
            }({}),
            Nu = function (e) {
                return e[e.GAME = 0] = "GAME", e[e.LOG = 1] = "LOG", e[e.MODAL = 2] = "MODAL", e[e.RESOURCES = 3] = "RESOURCES", e[e.LAND = 4] = "LAND", e[e.RESEARCH = 5] = "RESEARCH", e[e.CRAFTING = 6] = "CRAFTING", e[e.RECIPE = 7] = "RECIPE", e[e.RELIGION = 8] = "RELIGION", e[e.WEATHER = 9] = "WEATHER", e[e.CALENDAR = 10] = "CALENDAR", e[e.EFFECTS = 11] = "EFFECTS", e[e.ARMY = 12] = "ARMY", e[e.HAPPINESS = 13] = "HAPPINESS", e[e.MANAGEMENT = 14] = "MANAGEMENT", e[e.ROYAL = 15] = "ROYAL", e[e.MARKET = 16] = "MARKET", e[e.VILLAGE = 17] = "VILLAGE", e[e.FORT = 18] = "FORT", e[e.FOREST = 19] = "FOREST", e[e.FIELD = 20] = "FIELD", e[e.MOUNTAINS = 21] = "MOUNTAINS", e[e.SEA = 22] = "SEA", e[e.PLATEAU = 23] = "PLATEAU", e[e.BUILDING_FACTORY = 24] = "BUILDING_FACTORY", e[e.SERIALIZER = 25] = "SERIALIZER", e[e.KONGREGATE = 26] = "KONGREGATE", e[e.ID = 27] = "ID", e[e.TICKER = 28] = "TICKER", e
            }({}),
            Pu = function (e) {
                return e[e.PLANK = 0] = "PLANK", e[e.CUT_STONE = 1] = "CUT_STONE", e[e.FABRIC = 2] = "FABRIC", e[e.LEATHER = 3] = "LEATHER", e[e.GOLD = 4] = "GOLD", e[e.SILVER = 5] = "SILVER", e[e.COPPER = 6] = "COPPER", e[e.TIN = 7] = "TIN", e[e.BRONZE = 8] = "BRONZE", e[e.IRON = 9] = "IRON", e[e.STEEL = 10] = "STEEL", e[e.FUEL_BRUSHWOOD = 11] = "FUEL_BRUSHWOOD", e[e.FUEL_LOG = 12] = "FUEL_LOG", e[e.FUEL_COAL = 13] = "FUEL_COAL", e[e.STONE_AXE = 14] = "STONE_AXE", e[e.STONE_PICKAXE = 15] = "STONE_PICKAXE", e[e.STONE_SHOVEL = 16] = "STONE_SHOVEL", e[e.STONE_SPEAR = 17] = "STONE_SPEAR", e[e.STONE_HAMMER = 18] = "STONE_HAMMER", e[e.BOW = 19] = "BOW", e[e.CLOTHES_FUR = 20] = "CLOTHES_FUR", e[e.CLOTHES_FABRIC = 21] = "CLOTHES_FABRIC", e[e.SWORD = 22] = "SWORD", e[e.WOODEN_SHIELD = 23] = "WOODEN_SHIELD", e[e.LEATHER_ARMOR = 24] = "LEATHER_ARMOR", e[e.LIGHT_ARMOR = 25] = "LIGHT_ARMOR", e[e.HEAVY_ARMOR = 26] = "HEAVY_ARMOR", e[e.COOKED_MEAT = 27] = "COOKED_MEAT", e[e.FLOUR = 28] = "FLOUR", e[e.BREAD = 29] = "BREAD", e[e.VEGETABLE_SOUP_BERRY = 30] = "VEGETABLE_SOUP_BERRY", e[e.VEGETABLE_SOUP_MUSHROOM = 31] = "VEGETABLE_SOUP_MUSHROOM", e[e.MEAT_SOUP = 32] = "MEAT_SOUP", e
            }({}),
            Du = function () {
                function e(e, n, t, r, i) {
                    void 0 === i && (i = 0), this.name = e, this.building = n, this.effect = t, this.duration = r, this.buff = i
                }
                return e.prototype.isPermanent = function () {
                    return this.duration < 0
                }, e.prototype.isRoyal = function () {
                    return -10 === this.duration
                }, e.prototype.isWonder = function () {
                    return -9 === this.duration
                }, e.prototype.isBuff = function () {
                    return this.buff > 0
                }, e
            }();
        ! function (e) {
            e.BUILD = "build-modal", e.IMPORT = "import-modal", e.EXPORT = "export-modal", e.HARD_RESET = "hard-reset-modal", e.INFO = "info-modal", e.OPTIONS = "options-modal", e.CONFIRM = "confirm-modal", e.INPUT = "input-modal", e.ROYAL = "royal-modal", e.MISSION = "mission-modal", e.MARKET = "market-modal", e.WORK_MANAGEMENT = "work-management-modal", e.TUTORIAL = "tutorial-modal", e.CHANGELOG = "changelog-modal"
        }(mu || (mu = {}));
        var ku = function () {
                function e() {}
                return e.randomElement = function (e, n) {
                    void 0 === n && (n = 10);
                    var t = 0;
                    if (e.forEach(function (e) {
                            return t += e.chance
                        }), t > 100) {
                        console.warn("Random roll for params with sum of chances over 100");
                        var r = 100 / t;
                        e.forEach(function (e) {
                            return e.chance = Math.floor(e.chance * r)
                        })
                    }
                    for (var i = this.randomBetween(1, 100 * n), l = 0, o = 0, u = e; o < u.length; o++) {
                        var s = u[o];
                        if (l + 1 <= i && l + s.chance * n >= i) return s.item;
                        l += s.chance * n
                    }
                    for (; t > 100;)
                        for (var a = 0, c = e; a < c.length; a++) {
                            if (s = c[a], l + 1 <= i && l + s.chance * n >= i) return s.item;
                            l += s.chance * n
                        }
                    return null
                }, e.chance = function (e) {
                    return Math.random() < e
                }, e.randomExcept = function (e, n) {
                    var t = e.filter(function (e) {
                        return n.indexOf(e) < 0
                    });
                    return t[this.randomBetween(0, t.length - 1)]
                }, e.randomBetween = function (e, n) {
                    return Math.floor(Math.random() * (n - e + 1)) + e
                }, e.randomWeightedExcept = function (e, n) {
                    var t = e.filter(function (e) {
                            return n.indexOf(e.item) < 0
                        }),
                        r = 0;
                    t.forEach(function (e) {
                        return r += e.chance
                    });
                    for (var i = this.randomBetween(1, r), l = 0, o = 0; o < t.length; o++) {
                        if (l < i && i <= l + t[o].chance) return t[o].item;
                        l += t[o].chance
                    }
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            Mu = function (e) {
                return e[e.VILLAGE = 0] = "VILLAGE", e[e.FORT = 1] = "FORT", e[e.FOREST = 2] = "FOREST", e[e.FIELD = 3] = "FIELD", e[e.MOUNTAINS = 4] = "MOUNTAINS", e[e.SEA = 5] = "SEA", e[e.PLATEAU = 6] = "PLATEAU", e
            }({}),
            Lu = function () {
                function e(e, n, t, r) {
                    this.name = e, this.troop = n, this.effect = t, this.duration = r
                }
                return e.prototype.isPermanent = function () {
                    return this.duration < 0
                }, e.prototype.isRoyal = function () {
                    return -10 === this.duration
                }, e.prototype.isWonder = function () {
                    return -9 === this.duration
                }, e
            }(),
            xu = function (e) {
                return e[e.SUN = 0] = "SUN", e[e.CLOUDS = 1] = "CLOUDS", e[e.RAIN = 2] = "RAIN", e[e.WIND = 3] = "WIND", e[e.STORM = 4] = "STORM", e[e.SNOW = 5] = "SNOW", e
            }({}),
            Fu = function (e) {
                return e[e.DEV = 0] = "DEV", e[e.V1_0_0 = 1] = "V1_0_0", e
            }({}),
            Uu = function () {
                function e(e, n, t) {
                    this.name = e, this.effect = n, this.duration = t
                }
                return e.prototype.isPermanent = function () {
                    return this.duration < 0
                }, e.prototype.isRoyal = function () {
                    return -10 === this.duration
                }, e.prototype.isWonder = function () {
                    return -9 === this.duration
                }, e
            }(),
            Hu = function () {
                function e() {}
                return e.PERMANENT = -1, e.WONDER = -9, e.ROYAL = -10, e
            }(),
            Gu = {
                production: !0,
                gameName: "Villager Kings",
                saveName: "VillagerKingsSave",
                versionString: "1.0.7",
                saveVersion: Fu.V1_0_0
            },
            Bu = "Welcome to <b>" + Gu.gameName + "</b><br>You start as a leader of a small village.<br>Will you manage to lead your people to greatness? <br>First thing you need to focus on is to make sure that your people will survive winter.<br>You will need to increase food production and have some wood to heat houses.<br>Remember that winter is not the only threat to your people!<br>Good luck!",
            Vu = [{
                VERSION: "v1.0.1",
                MESSAGE: ['<ul><li>Fixed barracks not unlocking after being researched</li><li>Fixed weather research description</li><li>Shrine and Church will be available earlier</li><li>"New year!" message will appear on day 1 and only after researching calendar</li><li>Shrine and Church will now log when they become available</li><li>Fixed wrapper boxes sizes</li><li>Pit mine research description changed</li><li>Reduced building button and dropdown font size to prevent overflow</li><li>Aligned building icon and text</li><li>Reduced amount of fur produced by hunter</li><li>Fixed merchant buying items for 0 coins</li><li>Reduced required research points for forestry</li><li>Last tutorial step no longer has "skip tutorial" button</li><li>Available nutrition metric doesn\'t include reserved food</li><li>Researching animals require hay</li><li>Fixed geologist last find description</li></ul>']
            }, {
                VERSION: "v1.0.2",
                MESSAGE: ["<ul><li>Fixed building line icons alignment</li><li>Refactored dev message window into changelog</li><li>Reduced low happiness severity</li><li>Doubled starting food amount</li><li>Buffed berry and mushroom find chance</li></ul>"]
            }, {
                VERSION: "v1.0.3",
                MESSAGE: ["<ul><li><b>Famine is now satisfied with 50% less food</b></li><li><b>Refactored happiness so that multiple things combined cannot bring it down to 0</b></li><li>It is now possible to pause the game through settings dropdown menu</li><li>The game is now paused during tutorials</li><li>Reduced brushwood cost of stone tools and bow.</li><li>Buildings are now taking action in random order instead of left to right top to bottom</li><li>Tavern decrease happiness over 75% when no alcohol is available</li><li>Changed Tavern building lines to show amount of alcohols</li><li>Added option to produce fish food for fishers</li><li>Added option to boost school of fish with fish food</li><li>Fixed new school of fish not spawning</li><li>Fixed new sharks not spawning</li><li>Added new Research for Fish Food</li><li>Added tutorials for Field, Mountains, Sea and Plateau regions</li><li>Added close button for royal points modal</li><li>Greatly increased animal taming chance <br>(Taming is supposed to be slow, as this only to be used to kick-start pastures. Another method is to buy animals on the market)</li><li>Fixed animal amount calculation errors resulting in negative, doubled<br> or over the limit amount of animals</li><li>Added notification to market tab if there is no marketplace</li><li>Changed marketplace bribe button text</li></ul>"]
            }, {
                VERSION: "v1.0.4",
                MESSAGE: ["<ul><li><b>Fixed demolishing huts and houses</b></li><li>Fixed Crafting tab display for Chrome and Edge</li><li>Increased gatherer chance for finding stone and brushwood</li><li>Added several warning for low forest size</li><li>Increased minimal yearly forest growth</li></ul>"]
            }, {
                VERSION: "v1.0.5",
                MESSAGE: ['<ul><li><b>Fixed wrong army mission being started</b></li><li><b>Fixed Food nutrition value displaying NaN and blocking anything that requires FOOD nutrition as cost</b></li><li>Fixed "Spy" mission not displaying enemy power</li><li>Church will now unlock Religion tab when built</li><li>Urban Planning no longer require house to be researched</li></ul>']
            }, {
                VERSION: "v1.0.6",
                MESSAGE: ["Bug fixes:<ul><li><b>Fixed King of the People royal perk not allowing to build houses</b></li><li><b>Fixed royal perks not processing unlocked research correctly</b></li><li><b>Fixed research permanent effects not to persist through soft reset and abdication</b></li><li><b>Fixed geologist not finding gold, silver and iron</b></li><li><b>Fixed Tavern not appearing after being researched</b></li><li><b>Fixed fields, orchards and pastures splitting value</b></li><li><b>Fixed 'Blessing' prayer and excluded a lot of buildings that would not benefit from it</b></li><li><b>Fixed changing religion to be player action</b></li></ul>Performance:<ul><li>Improved performance for reloading region<br>It will still take regular time on the first visit but after that I got about 3 times better loading time for region with 36 buildings</li></ul>Other:<ul><li>Improved butcher meat transporting. It no longer requires whole warehouse space to be available at once</li><li>Increased geologist deposits find chances</li><li>Renamed 'Entertainment' research to 'Alcohol'</li><li>Housing buildings show when they are using fuel</li><li>Added research tab warning when no workshop is set to research</li><li>Added button to show finished research projects</li><li>Increased average meat production for hunter lodge</li><li>Improved scrolling in modals</li><li>Urban planning research points requirement greatly reduced</li><li>Improved some prayers descriptions</li><li>Nature effects are now logged when added</li><li>Decreased recruitment times for all troops</li><li>Fishers huts will now work during rain (apparently fish can catch even better during rain due to more oxygen in the water)</li></ul>"]
            }, {
                VERSION: "v1.0.7",
                MESSAGE: ["Bug fixes:<ul><li><b>Fixed forecast period saving. It will no longer go back to one day after researching weather and reloading game</b></li><li><b>Fixed pastures filling only one butcher. Pasture will now give animal to butcher with shortest queue</b></li><li><b>Fixed demolishing buildings other than housing buildings</b></li><li><b>Fixed work management output to start with maxed output resources</b></li><li><b>Fixed mission not returning troops</b></li><li><b>Fixed possibility to build next wonder without researching</b></li><li><b>Lost wonder effects will be restored on abdication or soft reset</b></li><li><b>Fixed harvesting from field in summer</b></li><li><b>Fixed buying animal filling entire pasture</b></li><li><b>Fixed animals produce filling warehouse when chores went over 50</b></li></ul>Other:<ul><li><b>Changed expedition to take longer and cost more but give more land and kill less troops</b></li><li><b>Improved building filtering and made it persistent</b></li><li><b>Increased game size by about 25%</b></li><li><b>Arrange doesn't require to be researched anymore</b></li><li><b>New option to change visual progress bars to text progress value</b></li><li>Workshops show what is being researched</li><li>Geologist is no longer limited by mountains size</li><li>Slightly improved Royal perks descriptions</li><li>Added special warning for demolishing housing building when there is no enough free space to move all occupants to</li><li>Increased amount of fuel crafted from coal and heating power of coal</li><li>Pit mine now warn that it requires 20 deposits</li><li>Slightly corrected research display</li><li>Changes for Royal Points granting events</li><li>Disabled Ascension temple until it will be fixed</li></ul>Information:<ul><li>Drag and drop arrange seems to work on some computers and not on others. I have tested on a PC and laptop with the same operating system and browser version and it does work on PC and not on laptop.</li></ul>"]
            }],
            Wu = new Du("New King", bu.ALL, 100, 90),
            ju = 750,
            Yu = 360,
            zu = {
                START_HAPPINESS: 15,
                FOOD_HAPPINESS_FLOOR: 0,
                FOOD_HAPPINESS_LIMIT: 20,
                HEAT_HAPPINESS_FLOOR: 10,
                HEAT_HAPPINESS_LIMIT: 50,
                CLOTHES_HAPPINESS_FLOOR: 35,
                CLOTHES_HAPPINESS_LIMIT: 75,
                ALCOHOL_HAPPINESS_FLOOR: 75,
                ALCOHOL_HAPPINESS_LIMIT: 100
            },
            Ku = [{
                text: "Welcome to this quick tutorial that will guide you through basic controls of Villager Kings",
                position: {
                    width: "250px",
                    top: "180px",
                    left: "275px"
                }
            }, {
                text: "To the left you can see navigation menu that will allow you to browse tabs representing different aspects of your village",
                position: {
                    width: "200px",
                    top: "50px",
                    left: "100px"
                }
            }, {
                text: "Right now we are in the village tab and using top menu you can navigate between village regions",
                position: {
                    width: "200px",
                    top: "65px",
                    left: "130px"
                }
            }, {
                text: "In the middle of the village region you can see your buildings. There are many different types of buildings. <br> Some of them produce items, others consume them to produce more advanced items. <br>Currently in your village there are only Huts which produce workers for your village.<br>Housing buildings cannot be stopped and require constant supply of food, fuel (in winter) and clothes",
                position: {
                    width: "400px",
                    top: "180px",
                    left: "200px"
                }
            }, {
                text: "Above your buildings you can see most important metrics for current region.<br>For village those are:<br>1. Population of your village/max population<br>2. Free workers that can be assigned to work<br>3. Size of your empty land where you can build<br>4. Size of your whole village (all regions)<br>5. Your people happiness, which will influence their productivity<br>",
                position: {
                    width: "400px",
                    top: "115px",
                    left: "100px"
                }
            }, {
                text: "That's all here for now let's move into the Forest region<br> using top menu and continue the tutorial there",
                position: {
                    width: "400px",
                    top: "180px",
                    left: "200px"
                }
            }],
            qu = [{
                text: "In the forest you have two working buildings<br>Logger's hut that cuts forest trees and produces logs<br>and Gatherer that collects various resources when wandering in the forest. Gatherer has two operating modes<br>Worker working here can either focus on looking for food or useful and sometimes rare resources",
                position: {
                    width: "400px",
                    top: "240px",
                    left: "200px"
                }
            }, {
                text: "There are two icons on both sides of building name.<br>To the left there is details icon. If you hover over it, <br>a tooltip with more technical details regarding a building will popup (not active during tutorial),<br>To the right you can see a cog icon which allows you to stop and start production by hiring or firing worker",
                position: {
                    width: "450px",
                    top: "160px",
                    left: "150px"
                }
            }, {
                text: "Above buildings you can see 'Build' and 'Demolish' buttons.<br>First one opens a window with all buildings you can build in this region.<br>In future you will discover many more types of building to build.<br>Second one allows you to set buildings to be demolished by free worker<br>You will receive small portion of resources used to build demolished building",
                position: {
                    width: "450px",
                    top: "100px",
                    left: "50px"
                }
            }, {
                text: "Now let's order your people to build more gatherers and continue to the 'Resources' tab in the left menu",
                position: {
                    width: "250px",
                    top: "180px",
                    left: "275px"
                }
            }],
            $u = [{
                text: "Field region has many buildings with different mechanics than other regions.<br>Field, Orchard and Pasture buildings require Farm with workers <br>who will work on planting, sowing, harvesting and tending to animals.<br><br>Fields yearly cycle starts in spring, after you have selected what type of crops should be planted,<br>your Farm workers will start plowing the land and then sowing selected crop.<br>After sowing is completed your crops will start to grow until Autumn.<br>On autumn all crops will stop growing and will be ready for harvest performed by Farm workers.<br>If there are any crops not harvested by the beginning of winter they will wither and will be lost.<br><br>",
                position: {
                    width: "400px",
                    top: "150px",
                    left: "200px"
                }
            }, {
                text: "Orchards are a bit different. Those also need to be plowed and plants need to be planted,<br>after that they keep growing for several years without any work input.<br>Once they matured they will fruit every year with only harvest work required.<br><br>",
                position: {
                    width: "400px",
                    top: "150px",
                    left: "200px"
                }
            }, {
                text: "Pastures allow animals breeding. They require work input for the whole year (chores)<br>and animals require Hay to eat during winter.<br>If no hay is available animals can starve to death.<br> They eat grass and other natural food during other seasons.<br>Some animals produce animals products like eggs and milk which add to your food supplies.<br>All animals can be butchered for meat when butcher building is built.<br>Once animals are researched Hunters can try to tame animals for which there is empty pasture space.",
                position: {
                    width: "400px",
                    top: "150px",
                    left: "200px"
                }
            }],
            Qu = [{
                text: "Most mountains buildings require mountains space instead of free land.<br>This mountain area is finite and after the building deplete resources it can be demolished to add empty land instead of back to mountains.<br><br>To gain more mountains areas you will need to run expeditions or conquer enemies (Army).<br><br>After geologist is unlocked and built he will start looking for ores deposits which is very slow process.<br>Once 20 deposits of certain resource has been found Pit Mine can be used to mine it.",
                position: {
                    width: "400px",
                    top: "150px",
                    left: "200px"
                }
            }],
            Zu = [{
                text: "In this special area Wonder buildings can be constructed.<br>These require much more resources and much more work to be completed.<br>Each Wonder building adds permanent buff corresponding to it's nature.<br>Wonder building also allows you to abdicate what performs soft reset and additionally award you with Royal Points to spend on Royal perks.<br>Wonder building and it's buff persist through soft resets and abdications.",
                position: {
                    width: "400px",
                    top: "150px",
                    left: "200px"
                }
            }],
            Xu = [{
                text: "By the sea fishers can catch fish from the sea.<br>Each school of fish has certain number of fish that slowly breed.<br>If you catch all fish, new school of fish should appear in some time.<br><br>Fishers can also produce fish food which will boost fish breeding rate.",
                position: {
                    width: "400px",
                    top: "150px",
                    left: "200px"
                }
            }],
            Ju = [{
                text: "In this tab you can browse all of the resources that you have discovered<br>Next to the resource icon there is current amount that you have and storage limit for that resource.<br><br>Storage can be extended by building warehouses in the village",
                position: {
                    width: "400px",
                    top: "150px",
                    left: "200px"
                }
            }, {
                text: "To the right there are two additional icons present for each resource<br>First one allows you to set amount that will be reserved and no automated action can use them<br>Player initiated action can on the other hand use reserved resources<br>(keep in mind that some actions like for example invasion can still reduce resources below reserved amount!)<br><br>Second icon toggles which resources should be highlighted in the game header",
                position: {
                    width: "400px",
                    top: "150px",
                    left: "200px"
                }
            }, {
                text: "In the header you can highlight up to 7 resources to know their amounts in any tab of the game",
                position: {
                    width: "400px",
                    top: "30px",
                    left: "30px"
                }
            }, {
                text: "That's all for the basics.<br>To really start progressing you should work towards building Workshop in the village which will open new opportunities<br>",
                position: {
                    width: "400px",
                    top: "150px",
                    left: "200px"
                }
            }],
            es = {
                ALLOW_FUR_CLOTHES: !0,
                SHOW_FOOD_NUTRITION: !1,
                FOOD_RATIONS: 2,
                CLOTHES_RATIONS: 1,
                ALCOHOL_RATIONS: 1
            },
            ns = {
                START_LAND: 1e3,
                START_FOREST: 1500,
                START_MOUNTAINS: 200,
                START_FOREST_LIMIT: 100,
                FOREST_GROW_PERCENTAGE: .05,
                MINIMAL_FOREST_GROWTH: 100,
                FOREST_GROW_TICKS: 10 * Yu
            },
            ts = {
                getBuilding: function (e) {
                    var n = this.getBuildings().find(function (n) {
                        return n[0] === bu[e]
                    });
                    if (n) return n[1];
                    console.warn("Invalid building: " + Au.prepareBuildingName(e))
                },
                getBuildings: function () {
                    return Object.entries(this.VILLAGE).concat(Object.entries(this.FORT)).concat(Object.entries(this.FOREST)).concat(Object.entries(this.FIELD)).concat(Object.entries(this.MOUNTAINS)).concat(Object.entries(this.PLATEAU)).concat(Object.entries(this.SEA))
                },
                DEMOLITION_RETURN: .3,
                FOREST: {
                    LOGGERS_HUT: {
                        BASE_POWER: 5,
                        SIZE: 2,
                        COMPLEXITY: 5,
                        DESCRIPTION: "Loggers cut trees in the forest",
                        COST: [{
                            resource: vu.LOG,
                            amount: 10
                        }],
                        WEATHER: [{
                            weather: xu.RAIN,
                            effect: -50
                        }, {
                            weather: xu.STORM,
                            effect: -100
                        }],
                        BUFF: {
                            name: "New tools",
                            effect: 5,
                            duration: 360,
                            cost: [{
                                resource: vu.STONE_AXE,
                                amount: 5
                            }]
                        },
                        UPGRADES: [{
                            BASE_POWER: 7.5,
                            COMPLEXITY: 10,
                            PREREQUISITES: [Eu.URBAN_PLANNING],
                            COST: [{
                                resource: vu.PLANK,
                                amount: 10
                            }, {
                                resource: vu.CUT_STONE,
                                amount: 10
                            }, {
                                resource: vu.STONE_HAMMER,
                                amount: 5
                            }, {
                                resource: vu.STONE_AXE,
                                amount: 5
                            }]
                        }, {
                            BASE_POWER: 10,
                            COMPLEXITY: 20,
                            PREREQUISITES: [],
                            COST: [{
                                resource: vu.PLANK,
                                amount: 20
                            }, {
                                resource: vu.CUT_STONE,
                                amount: 20
                            }, {
                                resource: vu.COPPER,
                                amount: 10
                            }, {
                                resource: vu.STONE_AXE,
                                amount: 10
                            }]
                        }]
                    },
                    FORESTER: {
                        BASE_POWER: 10,
                        SIZE: 5,
                        COMPLEXITY: 10,
                        DESCRIPTION: "Forester can plant new trees and control natural growth of the forest",
                        COST: [{
                            resource: vu.LOG,
                            amount: 10
                        }, {
                            resource: vu.STONE_SHOVEL,
                            amount: 2
                        }],
                        WEATHER: [{
                            weather: xu.RAIN,
                            effect: -100
                        }, {
                            weather: xu.STORM,
                            effect: -100
                        }],
                        BUFF: {
                            name: "New tools",
                            effect: 5,
                            duration: 360,
                            cost: [{
                                resource: vu.STONE_SHOVEL,
                                amount: 5
                            }]
                        }
                    },
                    SAWMILL: {
                        BASE_POWER: 3,
                        SIZE: 5,
                        COMPLEXITY: 15,
                        DESCRIPTION: "Sawmill cut logs into planks",
                        COST: [{
                            resource: vu.LOG,
                            amount: 20
                        }, {
                            resource: vu.CUT_STONE,
                            amount: 10
                        }],
                        TEXT: "cutting",
                        INPUT_RESOURCES: [{
                            resource: vu.LOG,
                            amount: 3
                        }],
                        OUTPUT_RESOURCES: [{
                            resource: vu.PLANK,
                            amount: 1
                        }]
                    },
                    GATHERER: {
                        BASE_POWER: 10,
                        SIZE: 5,
                        COMPLEXITY: 3,
                        DESCRIPTION: "Gatherer can find all kinds of useful things in the forest",
                        COST: [{
                            resource: vu.LOG,
                            amount: 10
                        }, {
                            resource: vu.STONE,
                            amount: 5
                        }],
                        WEATHER: [{
                            weather: xu.RAIN,
                            effect: -75
                        }, {
                            weather: xu.STORM,
                            effect: -100
                        }],
                        BERRY_CHANCE: 30,
                        MUSHROOM_CHANCE: 30,
                        WHEAT_CHANCE: 3,
                        BRUSHWOOD_CHANCE: 35,
                        STONE_CHANCE: 15,
                        LOG_CHANCE: 5,
                        COPPER_CHANCE: .5
                    },
                    HUNTER_LODGE: {
                        BASE_POWER: 2,
                        SIZE: 5,
                        COMPLEXITY: 8,
                        DESCRIPTION: "Hunts animals for meat and fur",
                        COST: [{
                            resource: vu.LOG,
                            amount: 15
                        }, {
                            resource: vu.PLANK,
                            amount: 5
                        }, {
                            resource: vu.BOW,
                            amount: 1
                        }],
                        WEATHER: [{
                            weather: xu.RAIN,
                            effect: -100
                        }, {
                            weather: xu.STORM,
                            effect: -100
                        }],
                        BUFF: {
                            name: "New tools",
                            effect: 5,
                            duration: 360,
                            cost: [{
                                resource: vu.BOW,
                                amount: 5
                            }]
                        }
                    },
                    TANNERY: {
                        BASE_POWER: 5,
                        SIZE: 5,
                        COMPLEXITY: 5,
                        DESCRIPTION: "Turns furs into leather",
                        COST: [{
                            resource: vu.LOG,
                            amount: 20
                        }, {
                            resource: vu.PLANK,
                            amount: 10
                        }],
                        TEXT: "tanning",
                        INPUT_RESOURCES: [{
                            resource: vu.FUR,
                            amount: 1
                        }],
                        OUTPUT_RESOURCES: [{
                            resource: vu.LEATHER,
                            amount: 1
                        }]
                    }
                },
                MOUNTAINS: {
                    QUARRY: {
                        BASE_POWER: 5,
                        SIZE: 20,
                        COMPLEXITY: 15,
                        DESCRIPTION: "Cuts stone out of mountains",
                        COST: [{
                            resource: vu.LOG,
                            amount: 40
                        }, {
                            resource: vu.PLANK,
                            amount: 20
                        }],
                        WEATHER: [{
                            weather: xu.RAIN,
                            effect: -100
                        }, {
                            weather: xu.STORM,
                            effect: -100
                        }],
                        BUFF: {
                            name: "New tools",
                            effect: 5,
                            duration: 360,
                            cost: [{
                                resource: vu.STONE_PICKAXE,
                                amount: 5
                            }]
                        }
                    },
                    GEOLOGIST: {
                        BASE_POWER: 1,
                        SIZE: 5,
                        COMPLEXITY: 10,
                        DESCRIPTION: "Looks for useful rocks",
                        COST: [{
                            resource: vu.LOG,
                            amount: 10
                        }, {
                            resource: vu.STONE,
                            amount: 5
                        }],
                        WEATHER: [{
                            weather: xu.RAIN,
                            effect: -100
                        }, {
                            weather: xu.STORM,
                            effect: -100
                        }],
                        COAL_CHANCE: 20,
                        GOLD_CHANCE: 4,
                        SILVER_CHANCE: 8,
                        COPPER_CHANCE: 10,
                        TIN_CHANCE: 6,
                        IRON_CHANCE: 2
                    },
                    PIT_MINE: {
                        BASE_POWER: 10,
                        SIZE: 20,
                        COMPLEXITY: 15,
                        DESCRIPTION: "Allows workers to mine ores",
                        COST: [{
                            resource: vu.LOG,
                            amount: 60
                        }, {
                            resource: vu.STONE_PICKAXE,
                            amount: 5
                        }],
                        WEATHER: [{
                            weather: xu.RAIN,
                            effect: -100
                        }, {
                            weather: xu.STORM,
                            effect: -100
                        }],
                        BUFF: {
                            name: "New tools",
                            effect: 5,
                            duration: 360,
                            cost: [{
                                resource: vu.STONE_PICKAXE,
                                amount: 5
                            }, {
                                resource: vu.STONE_SHOVEL,
                                amount: 5
                            }]
                        }
                    },
                    STONEMASON: {
                        BASE_POWER: 3,
                        SIZE: 5,
                        COMPLEXITY: 10,
                        DESCRIPTION: "Shapes stones for building",
                        COST: [{
                            resource: vu.LOG,
                            amount: 10
                        }, {
                            resource: vu.STONE,
                            amount: 10
                        }],
                        TEXT: "cutting",
                        INPUT_RESOURCES: [{
                            resource: vu.STONE,
                            amount: 3
                        }],
                        OUTPUT_RESOURCES: [{
                            resource: vu.CUT_STONE,
                            amount: 1
                        }]
                    },
                    SMITHY: {
                        BASE_POWER: 5,
                        SIZE: 10,
                        COMPLEXITY: 20,
                        DESCRIPTION: "Provides furnace for smelting ore and metal items",
                        COST: [{
                            resource: vu.LOG,
                            amount: 20
                        }, {
                            resource: vu.PLANK,
                            amount: 10
                        }, {
                            resource: vu.CUT_STONE,
                            amount: 10
                        }, {
                            resource: vu.COPPER,
                            amount: 5
                        }],
                        RECIPES: [{
                            recipe: Pu.COPPER,
                            prerequisite: Eu.SMITHY
                        }, {
                            recipe: Pu.TIN,
                            prerequisite: Eu.SMITHY
                        }, {
                            recipe: Pu.BRONZE,
                            prerequisite: Eu.BRONZE
                        }, {
                            recipe: Pu.GOLD,
                            prerequisite: Eu.ADVANCED_ORE_PROCESSING
                        }, {
                            recipe: Pu.SILVER,
                            prerequisite: Eu.ADVANCED_ORE_PROCESSING
                        }, {
                            recipe: Pu.IRON,
                            prerequisite: Eu.IRON
                        }, {
                            recipe: Pu.STEEL,
                            prerequisite: Eu.STEEL
                        }, {
                            recipe: Pu.SWORD,
                            prerequisite: Eu.SMITHY
                        }, {
                            recipe: Pu.LIGHT_ARMOR,
                            prerequisite: Eu.SMITHY
                        }, {
                            recipe: Pu.HEAVY_ARMOR,
                            prerequisite: Eu.SMITHY
                        }]
                    },
                    MINT: {
                        BASE_POWER: 5,
                        SIZE: 5,
                        COMPLEXITY: 10,
                        DESCRIPTION: "Produces coins from gold",
                        COST: [{
                            resource: vu.LOG,
                            amount: 20
                        }, {
                            resource: vu.PLANK,
                            amount: 10
                        }, {
                            resource: vu.CUT_STONE,
                            amount: 10
                        }, {
                            resource: vu.BRONZE,
                            amount: 10
                        }],
                        TEXT: "minting",
                        INPUT_RESOURCES: [{
                            resource: vu.GOLD,
                            amount: 1
                        }],
                        OUTPUT_RESOURCES: [{
                            resource: vu.COINS,
                            amount: 100
                        }]
                    }
                },
                VILLAGE: {
                    HUT: {
                        BASE_POWER: .5,
                        SIZE: 2,
                        COMPLEXITY: 5,
                        DESCRIPTION: "Very primitive shelter but keeps rain and cold away",
                        COST: [{
                            resource: vu.FOOD,
                            amount: 100
                        }, {
                            resource: vu.LOG,
                            amount: 10
                        }, {
                            resource: vu.BRUSHWOOD,
                            amount: 10
                        }],
                        MAX_OCCUPANTS: 2
                    },
                    HOUSE: {
                        BASE_POWER: .7,
                        SIZE: 2,
                        COMPLEXITY: 15,
                        DESCRIPTION: "Bigger and more durable shelter",
                        COST: [{
                            resource: vu.FOOD,
                            amount: 100
                        }, {
                            resource: vu.LOG,
                            amount: 20
                        }, {
                            resource: vu.PLANK,
                            amount: 20
                        }],
                        MAX_OCCUPANTS: 6
                    },
                    WAREHOUSE: {
                        BASE_POWER: 0,
                        SIZE: 20,
                        COMPLEXITY: 10,
                        DESCRIPTION: "Stores selected type of resources",
                        COST: [{
                            resource: vu.LOG,
                            amount: 20
                        }, {
                            resource: vu.PLANK,
                            amount: 10
                        }, {
                            resource: vu.CUT_STONE,
                            amount: 5
                        }]
                    },
                    WORKSHOP: {
                        BASE_POWER: 5,
                        RESEARCH_POWER: 1,
                        CRAFTING_POWER: 1.5,
                        SIZE: 5,
                        COMPLEXITY: 15,
                        DESCRIPTION: "At the workshop workers can research new things or build complex things",
                        COST: [{
                            resource: vu.LOG,
                            amount: 20
                        }, {
                            resource: vu.BRUSHWOOD,
                            amount: 10
                        }]
                    },
                    MARKETPLACE: {
                        BASE_POWER: 1,
                        SIZE: 20,
                        COMPLEXITY: 5,
                        DESCRIPTION: "Place for trading with other villages",
                        COST: [{
                            resource: vu.LOG,
                            amount: 10
                        }, {
                            resource: vu.PLANK,
                            amount: 10
                        }, {
                            resource: vu.STONE,
                            amount: 20
                        }]
                    },
                    TAVERN: {
                        BASE_POWER: 1,
                        SIZE: 10,
                        COMPLEXITY: 20,
                        DESCRIPTION: "Meeting place",
                        COST: [{
                            resource: vu.LOG,
                            amount: 10
                        }, {
                            resource: vu.PLANK,
                            amount: 20
                        }, {
                            resource: vu.CUT_STONE,
                            amount: 20
                        }, {
                            resource: vu.BRUSHWOOD,
                            amount: 20
                        }],
                        WEATHER: [{
                            weather: xu.RAIN,
                            effect: 25
                        }, {
                            weather: xu.STORM,
                            effect: 25
                        }]
                    },
                    BAKERY: {
                        BASE_POWER: 10,
                        SIZE: 5,
                        COMPLEXITY: 10,
                        DESCRIPTION: "Bakes bread from flour",
                        COST: [{
                            resource: vu.LOG,
                            amount: 10
                        }, {
                            resource: vu.PLANK,
                            amount: 10
                        }, {
                            resource: vu.STONE,
                            amount: 10
                        }, {
                            resource: vu.CUT_STONE,
                            amount: 10
                        }],
                        TEXT: "baking",
                        INPUT_RESOURCES: [{
                            resource: vu.FLOUR,
                            amount: 2
                        }, {
                            resource: vu.FUEL,
                            amount: 1
                        }],
                        OUTPUT_RESOURCES: [{
                            resource: vu.BREAD,
                            amount: 1
                        }],
                        BUFF: {
                            name: "Bread oven",
                            effect: 5,
                            duration: 360,
                            cost: [{
                                resource: vu.CUT_STONE,
                                amount: 20
                            }]
                        }
                    },
                    TAILOR: {
                        BASE_POWER: 5,
                        SIZE: 5,
                        COMPLEXITY: 10,
                        DESCRIPTION: "Produces clothes from fabric",
                        COST: [{
                            resource: vu.LOG,
                            amount: 10
                        }, {
                            resource: vu.PLANK,
                            amount: 10
                        }],
                        TEXT: "sewing",
                        INPUT_RESOURCES: [{
                            resource: vu.FABRIC,
                            amount: 3
                        }],
                        OUTPUT_RESOURCES: [{
                            resource: vu.CLOTHES,
                            amount: 1
                        }]
                    },
                    SHRINE: {
                        BASE_POWER: 1,
                        POPULATION: 8,
                        SIZE: 2,
                        COMPLEXITY: 8,
                        DESCRIPTION: "Place for prayer and offerings",
                        COST: [{
                            resource: vu.LOG,
                            amount: 5
                        }, {
                            resource: vu.CUT_STONE,
                            amount: 5
                        }, {
                            resource: vu.VEGETABLE_SOUP,
                            amount: 5
                        }, {
                            resource: vu.MEAT_SOUP,
                            amount: 5
                        }]
                    },
                    CHURCH: {
                        BASE_POWER: 1,
                        POPULATION: 20,
                        SIZE: 10,
                        COMPLEXITY: 10,
                        DESCRIPTION: "Place of prayer and contemplation",
                        COST: [{
                            resource: vu.LOG,
                            amount: 40
                        }, {
                            resource: vu.CUT_STONE,
                            amount: 30
                        }],
                        BUFF: {
                            name: "Offering",
                            effect: 5,
                            duration: 360,
                            cost: [{
                                resource: vu.COINS,
                                amount: 200
                            }]
                        }
                    }
                },
                FORT: {
                    BARRACKS: {
                        BASE_POWER: 0,
                        SIZE: 10,
                        COMPLEXITY: 10,
                        DESCRIPTION: "Housing for troops",
                        COST: [{
                            resource: vu.LOG,
                            amount: 20
                        }, {
                            resource: vu.CUT_STONE,
                            amount: 10
                        }]
                    },
                    TRAINING_SQUARE: {
                        BASE_POWER: 10,
                        SIZE: 10,
                        COMPLEXITY: 3,
                        DESCRIPTION: "Place for training recruits",
                        COST: [{
                            resource: vu.STONE,
                            amount: 40
                        }],
                        WEATHER: [{
                            weather: xu.RAIN,
                            effect: -50
                        }, {
                            weather: xu.STORM,
                            effect: -100
                        }]
                    },
                    STOCKADE: {
                        BASE_POWER: 10,
                        SIZE: 50,
                        COMPLEXITY: 100,
                        DESCRIPTION: "Protective wall around the village to protect against attackers",
                        COST: [{
                            resource: vu.LOG,
                            amount: 100
                        }, {
                            resource: vu.STONE,
                            amount: 10
                        }],
                        DEFENSE: 50,
                        DURABILITY: 50
                    },
                    WOODEN_TOWER: {
                        BASE_POWER: 10,
                        SIZE: 10,
                        COMPLEXITY: 30,
                        DESCRIPTION: " Provide passive defense power",
                        COST: [{
                            resource: vu.LOG,
                            amount: 40
                        }, {
                            resource: vu.PLANK,
                            amount: 20
                        }],
                        DEFENSE: 10,
                        DURABILITY: 50
                    },
                    STONE_TOWER: {
                        BASE_POWER: 10,
                        SIZE: 10,
                        COMPLEXITY: 30,
                        DESCRIPTION: "Provide passive defense power, more durable than wooden tower",
                        COST: [{
                            resource: vu.CUT_STONE,
                            amount: 40
                        }, {
                            resource: vu.PLANK,
                            amount: 20
                        }],
                        DEFENSE: 20,
                        DURABILITY: 100
                    },
                    STASH: {
                        BASE_POWER: 1,
                        SIZE: 10,
                        COMPLEXITY: 30,
                        DESCRIPTION: "Complex hidden tunnels allow us to hide some resources in case of invasion",
                        COST: [{
                            resource: vu.LOG,
                            amount: 30
                        }, {
                            resource: vu.CUT_STONE,
                            amount: 10
                        }, {
                            resource: vu.PLANK,
                            amount: 10
                        }, {
                            resource: vu.STONE_PICKAXE,
                            amount: 5
                        }]
                    }
                },
                FIELD: {
                    FARM: {
                        BASE_POWER: 20,
                        SIZE: 15,
                        COMPLEXITY: 10,
                        DESCRIPTION: "Farm allows workers to work on fields, orchard and pastures",
                        COST: [{
                            resource: vu.LOG,
                            amount: 40
                        }, {
                            resource: vu.PLANK,
                            amount: 20
                        }, {
                            resource: vu.STONE,
                            amount: 10
                        }],
                        WEATHER: [{
                            weather: xu.RAIN,
                            effect: -50
                        }, {
                            weather: xu.STORM,
                            effect: -100
                        }],
                        BUFF: {
                            name: "New tools",
                            effect: 5,
                            duration: 360,
                            cost: [{
                                resource: vu.STONE_SHOVEL,
                                amount: 5
                            }]
                        }
                    },
                    WINDMILL: {
                        BASE_POWER: 5,
                        SIZE: 10,
                        COMPLEXITY: 15,
                        DESCRIPTION: "Windmill turns wheat into flour",
                        COST: [{
                            resource: vu.LOG,
                            amount: 30
                        }, {
                            resource: vu.PLANK,
                            amount: 10
                        }, {
                            resource: vu.FABRIC,
                            amount: 20
                        }],
                        TEXT: "milling",
                        INPUT_RESOURCES: [{
                            resource: vu.WHEAT,
                            amount: 1
                        }],
                        OUTPUT_RESOURCES: [{
                            resource: vu.FLOUR,
                            amount: 1
                        }],
                        WEATHER: [{
                            weather: xu.WIND,
                            effect: 50
                        }, {
                            weather: xu.STORM,
                            effect: -100
                        }]
                    },
                    COTTON_MILL: {
                        BASE_POWER: 5,
                        SIZE: 5,
                        COMPLEXITY: 10,
                        DESCRIPTION: "Spins cotton into fabric",
                        COST: [{
                            resource: vu.LOG,
                            amount: 10
                        }, {
                            resource: vu.PLANK,
                            amount: 10
                        }],
                        TEXT: "spinning",
                        INPUT_RESOURCES: [{
                            resource: vu.COTTON,
                            amount: 2
                        }],
                        OUTPUT_RESOURCES: [{
                            resource: vu.FABRIC,
                            amount: 1
                        }]
                    },
                    BREWERY: {
                        BASE_POWER: 1,
                        SIZE: 15,
                        COMPLEXITY: 20,
                        DESCRIPTION: "Brews delicious beer",
                        COST: [{
                            resource: vu.LOG,
                            amount: 30
                        }, {
                            resource: vu.PLANK,
                            amount: 30
                        }, {
                            resource: vu.COPPER,
                            amount: 10
                        }],
                        TEXT: "brewing",
                        INPUT_RESOURCES: [{
                            resource: vu.BARLEY,
                            amount: 10
                        }, {
                            resource: vu.HOP,
                            amount: 5
                        }, {
                            resource: vu.FUEL,
                            amount: 3
                        }],
                        OUTPUT_RESOURCES: [{
                            resource: vu.BEER,
                            amount: 10
                        }]
                    },
                    FIELD: {
                        BASE_POWER: 1,
                        SIZE: 50,
                        COMPLEXITY: 1,
                        DESCRIPTION: "Various crops can be grown here",
                        COST: [{
                            resource: vu.STONE,
                            amount: 4
                        }],
                        WEATHER: [{
                            weather: xu.RAIN,
                            effect: 50
                        }, {
                            weather: xu.SUN,
                            effect: 50
                        }, {
                            weather: xu.CLOUDS,
                            effect: -25
                        }]
                    },
                    BUTCHER: {
                        BASE_POWER: 5,
                        SIZE: 15,
                        COMPLEXITY: 10,
                        DESCRIPTION: "Turns animals into meat",
                        COST: [{
                            resource: vu.LOG,
                            amount: 15
                        }, {
                            resource: vu.PLANK,
                            amount: 10
                        }, {
                            resource: vu.CUT_STONE,
                            amount: 5
                        }]
                    },
                    ORCHARD: {
                        BASE_POWER: 1,
                        SIZE: 50,
                        COMPLEXITY: 1,
                        DESCRIPTION: "Various fruit trees and bushes can be grown here",
                        COST: [{
                            resource: vu.LOG,
                            amount: 5
                        }],
                        WEATHER: [{
                            weather: xu.RAIN,
                            effect: 50
                        }, {
                            weather: xu.SUN,
                            effect: 50
                        }, {
                            weather: xu.CLOUDS,
                            effect: -25
                        }]
                    },
                    PASTURE: {
                        BASE_POWER: 1,
                        SIZE: 50,
                        COMPLEXITY: 3,
                        DESCRIPTION: "Many animals can be grown here",
                        COST: [{
                            resource: vu.LOG,
                            amount: 10
                        }, {
                            resource: vu.PLANK,
                            amount: 20
                        }]
                    },
                    WINERY: {
                        BASE_POWER: 1,
                        SIZE: 30,
                        COMPLEXITY: 10,
                        DESCRIPTION: "Extracts and ferments grape juices",
                        COST: [{
                            resource: vu.LOG,
                            amount: 20
                        }, {
                            resource: vu.PLANK,
                            amount: 20
                        }, {
                            resource: vu.COPPER,
                            amount: 10
                        }],
                        TEXT: "fermenting",
                        INPUT_RESOURCES: [{
                            resource: vu.GRAPE,
                            amount: 35
                        }],
                        OUTPUT_RESOURCES: [{
                            resource: vu.WINE,
                            amount: 8
                        }]
                    }
                },
                SEA: {
                    FISHERS_HUT: {
                        BASE_POWER: 5,
                        SIZE: 2,
                        COMPLEXITY: 5,
                        DESCRIPTION: "Fishers catch fish in the sea",
                        COST: [{
                            resource: vu.LOG,
                            amount: 10
                        }, {
                            resource: vu.PLANK,
                            amount: 5
                        }, {
                            resource: vu.COPPER,
                            amount: 1
                        }],
                        WEATHER: [{
                            weather: xu.RAIN,
                            effect: 25
                        }, {
                            weather: xu.STORM,
                            effect: -100
                        }, {
                            weather: xu.WIND,
                            effect: 25
                        }]
                    },
                    SCHOOL_OF_FISH: {
                        FISH_FOOD_DAYS: 60,
                        BREED_CHANCE: 400,
                        BREED_AMOUNT: 10,
                        SPLIT_THRESHOLD: 400,
                        SPLIT_CHANCE: 100,
                        NEW_SCHOOL_CHANCE: 100,
                        NEW_SCHOOL_SIZE: 50
                    },
                    SHARKS: {
                        FEED_CHANCE: 15,
                        FEED_AMOUNT: 1,
                        BREED_THRESHOLD: 500,
                        BREED_CHANCE: 100,
                        DIE_THRESHOLD: 300,
                        DIE_CHANCE: 100
                    }
                },
                PLATEAU: {
                    STONEHENGE: {
                        BASE_POWER: 3,
                        SIZE: 50,
                        COMPLEXITY: 0,
                        DESCRIPTION: "Huge rocks mark place for old rituals and scientific experiments",
                        COST: [],
                        STAGES: [{
                            cost: [{
                                resource: vu.STONE_SHOVEL,
                                amount: 10
                            }, {
                                resource: vu.STONE_PICKAXE,
                                amount: 10
                            }, {
                                resource: vu.STONE_HAMMER,
                                amount: 10
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.LOG,
                                amount: 50
                            }, {
                                resource: vu.PLANK,
                                amount: 50
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.LOG,
                                amount: 50
                            }, {
                                resource: vu.PLANK,
                                amount: 50
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.STONE,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.CUT_STONE,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.STONE,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.CUT_STONE,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.LOG,
                                amount: 50
                            }, {
                                resource: vu.PLANK,
                                amount: 50
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.STONE,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.CUT_STONE,
                                amount: 100
                            }],
                            progress: 10
                        }],
                        BUILDING_EFFECTS: [{
                            building: bu.WORKSHOP,
                            value: 20
                        }],
                        RP: 20
                    },
                    PYRAMID: {
                        BASE_POWER: 3,
                        SIZE: 100,
                        COMPLEXITY: 0,
                        DESCRIPTION: "Although it's just \"putting one rock on the other\", our construction worker's skill will be put to the test with this huge project",
                        COST: [],
                        STAGES: [{
                            cost: [{
                                resource: vu.STONE_SHOVEL,
                                amount: 10
                            }, {
                                resource: vu.STONE_PICKAXE,
                                amount: 10
                            }, {
                                resource: vu.STONE_HAMMER,
                                amount: 10
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.CUT_STONE,
                                amount: 50
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.LOG,
                                amount: 50
                            }, {
                                resource: vu.PLANK,
                                amount: 50
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.CUT_STONE,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.LOG,
                                amount: 50
                            }, {
                                resource: vu.PLANK,
                                amount: 50
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.CUT_STONE,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.LOG,
                                amount: 50
                            }, {
                                resource: vu.PLANK,
                                amount: 50
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.CUT_STONE,
                                amount: 100
                            }],
                            progress: 5
                        }, {
                            cost: [{
                                resource: vu.CUT_STONE,
                                amount: 100
                            }],
                            progress: 5
                        }, {
                            cost: [{
                                resource: vu.LOG,
                                amount: 50
                            }, {
                                resource: vu.PLANK,
                                amount: 50
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.CUT_STONE,
                                amount: 100
                            }],
                            progress: 5
                        }, {
                            cost: [{
                                resource: vu.CUT_STONE,
                                amount: 100
                            }],
                            progress: 5
                        }],
                        BUILDING_EFFECTS: [{
                            building: bu.CONSTRUCTION,
                            value: 10
                        }, {
                            building: bu.DECONSTRUCTION,
                            value: 10
                        }],
                        RP: 20
                    },
                    HANGING_GARDEN: {
                        BASE_POWER: 3,
                        SIZE: 30,
                        COMPLEXITY: 0,
                        DESCRIPTION: "With all those plants that cover entire buildings we truly became masters of flora",
                        COST: [],
                        STAGES: [{
                            cost: [{
                                resource: vu.STONE_SHOVEL,
                                amount: 10
                            }, {
                                resource: vu.STONE_HAMMER,
                                amount: 10
                            }, {
                                resource: vu.STONE_AXE,
                                amount: 10
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.LOG,
                                amount: 100
                            }, {
                                resource: vu.PLANK,
                                amount: 50
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.BERRY,
                                amount: 75
                            }, {
                                resource: vu.MUSHROOM,
                                amount: 75
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.STONE_SHOVEL,
                                amount: 20
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.WHEAT,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.BARLEY,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.APPLE,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.HOP,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.COTTON,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.GRAPE,
                                amount: 100
                            }],
                            progress: 10
                        }],
                        BUILDING_EFFECTS: [{
                            building: bu.FARM,
                            value: 15
                        }],
                        RP: 20
                    },
                    COLOSSUS: {
                        BASE_POWER: 3,
                        SIZE: 50,
                        COMPLEXITY: 0,
                        DESCRIPTION: "This giant statue watches over our troops both during defense and attack",
                        COST: [],
                        STAGES: [{
                            cost: [{
                                resource: vu.STONE_SHOVEL,
                                amount: 10
                            }, {
                                resource: vu.STONE_PICKAXE,
                                amount: 10
                            }, {
                                resource: vu.STONE_HAMMER,
                                amount: 10
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.LOG,
                                amount: 100
                            }, {
                                resource: vu.PLANK,
                                amount: 50
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.STONE,
                                amount: 75
                            }, {
                                resource: vu.CUT_STONE,
                                amount: 75
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.LOG,
                                amount: 100
                            }, {
                                resource: vu.PLANK,
                                amount: 50
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.STONE,
                                amount: 75
                            }, {
                                resource: vu.CUT_STONE,
                                amount: 75
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.LOG,
                                amount: 100
                            }, {
                                resource: vu.PLANK,
                                amount: 50
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.STONE,
                                amount: 75
                            }, {
                                resource: vu.CUT_STONE,
                                amount: 75
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.LOG,
                                amount: 100
                            }, {
                                resource: vu.PLANK,
                                amount: 50
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.STONE,
                                amount: 75
                            }, {
                                resource: vu.CUT_STONE,
                                amount: 75
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.COPPER,
                                amount: 100
                            }, {
                                resource: vu.STONE_HAMMER,
                                amount: 20
                            }],
                            progress: 10
                        }],
                        ARMY_EFFECTS: [{
                            troop: Iu.ALL,
                            value: 15
                        }],
                        RP: 20
                    },
                    UNDERGROUND_CITY: {
                        BASE_POWER: 3,
                        SIZE: 0,
                        COMPLEXITY: 0,
                        DESCRIPTION: "After connecting empty mines tunnels and repurposing them we will create entire underground city",
                        COST: [],
                        STAGES: [{
                            cost: [{
                                resource: vu.STONE_SHOVEL,
                                amount: 10
                            }, {
                                resource: vu.STONE_HAMMER,
                                amount: 10
                            }, {
                                resource: vu.STONE_PICKAXE,
                                amount: 10
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.LOG,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.STONE_SHOVEL,
                                amount: 20
                            }, {
                                resource: vu.STONE_HAMMER,
                                amount: 20
                            }, {
                                resource: vu.STONE_PICKAXE,
                                amount: 20
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.LOG,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.STONE_SHOVEL,
                                amount: 20
                            }, {
                                resource: vu.STONE_HAMMER,
                                amount: 20
                            }, {
                                resource: vu.STONE_PICKAXE,
                                amount: 20
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.LOG,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.STONE_SHOVEL,
                                amount: 20
                            }, {
                                resource: vu.STONE_HAMMER,
                                amount: 20
                            }, {
                                resource: vu.STONE_PICKAXE,
                                amount: 20
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.LOG,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.STONE_SHOVEL,
                                amount: 20
                            }, {
                                resource: vu.STONE_HAMMER,
                                amount: 20
                            }, {
                                resource: vu.STONE_PICKAXE,
                                amount: 20
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.LOG,
                                amount: 50
                            }, {
                                resource: vu.CUT_STONE,
                                amount: 50
                            }],
                            progress: 10
                        }],
                        BUILDING_EFFECTS: [{
                            building: bu.PIT_MINE,
                            value: 15
                        }, {
                            building: bu.QUARRY,
                            value: 15
                        }, {
                            building: bu.GEOLOGIST,
                            value: 15
                        }],
                        RP: 20
                    },
                    GREAT_LIGHTHOUSE: {
                        BASE_POWER: 3,
                        SIZE: 50,
                        COMPLEXITY: 0,
                        DESCRIPTION: "Light from this building can be seen as far as anyone would like to ever travel",
                        COST: [],
                        STAGES: [{
                            cost: [{
                                resource: vu.STONE_SHOVEL,
                                amount: 10
                            }, {
                                resource: vu.STONE_HAMMER,
                                amount: 10
                            }, {
                                resource: vu.STONE_PICKAXE,
                                amount: 10
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.LOG,
                                amount: 100
                            }, {
                                resource: vu.PLANK,
                                amount: 50
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.CUT_STONE,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.LOG,
                                amount: 100
                            }, {
                                resource: vu.PLANK,
                                amount: 50
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.CUT_STONE,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.LOG,
                                amount: 100
                            }, {
                                resource: vu.PLANK,
                                amount: 50
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.CUT_STONE,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.LOG,
                                amount: 100
                            }, {
                                resource: vu.PLANK,
                                amount: 50
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.CUT_STONE,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.PLANK,
                                amount: 100
                            }],
                            progress: 10
                        }],
                        BUILDING_EFFECTS: [],
                        RP: 20
                    },
                    SACRED_GROVE: {
                        BASE_POWER: 3,
                        SIZE: 50,
                        COMPLEXITY: 0,
                        DESCRIPTION: "Collection of the oldest and greatest forest fauna and flora in one place",
                        COST: [],
                        STAGES: [{
                            cost: [{
                                resource: vu.STONE_SHOVEL,
                                amount: 10
                            }, {
                                resource: vu.STONE_HAMMER,
                                amount: 10
                            }, {
                                resource: vu.STONE_PICKAXE,
                                amount: 10
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.BERRY,
                                amount: 100
                            }, {
                                resource: vu.MUSHROOM,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.CHICKEN,
                                amount: 20
                            }, {
                                resource: vu.HORSE,
                                amount: 10
                            }, {
                                resource: vu.PIG,
                                amount: 10
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.BERRY,
                                amount: 200
                            }, {
                                resource: vu.MUSHROOM,
                                amount: 200
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.BERRY,
                                amount: 100
                            }, {
                                resource: vu.MUSHROOM,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.CHICKEN,
                                amount: 20
                            }, {
                                resource: vu.HORSE,
                                amount: 10
                            }, {
                                resource: vu.PIG,
                                amount: 10
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.BERRY,
                                amount: 100
                            }, {
                                resource: vu.MUSHROOM,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.CHICKEN,
                                amount: 20
                            }, {
                                resource: vu.HORSE,
                                amount: 10
                            }, {
                                resource: vu.PIG,
                                amount: 10
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.BERRY,
                                amount: 100
                            }, {
                                resource: vu.MUSHROOM,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.BERRY,
                                amount: 200
                            }, {
                                resource: vu.MUSHROOM,
                                amount: 200
                            }],
                            progress: 10
                        }],
                        BUILDING_EFFECTS: [{
                            building: bu.FORESTER,
                            value: 10
                        }, {
                            building: bu.LOGGERS_HUT,
                            value: 10
                        }, {
                            building: bu.HUNTER_LODGE,
                            value: 10
                        }, {
                            building: bu.GATHERER,
                            value: 10
                        }],
                        RP: 20
                    },
                    ASCENSION_TEMPLE: {
                        BASE_POWER: 1.5,
                        SIZE: 100,
                        COMPLEXITY: 0,
                        DESCRIPTION: "Mystical place where your fate will be determined",
                        COST: [],
                        STAGES: [{
                            cost: [{
                                resource: vu.STONE_SHOVEL,
                                amount: 10
                            }, {
                                resource: vu.STONE_HAMMER,
                                amount: 10
                            }, {
                                resource: vu.STONE_PICKAXE,
                                amount: 10
                            }],
                            progress: 5
                        }, {
                            cost: [{
                                resource: vu.LOG,
                                amount: 100
                            }, {
                                resource: vu.PLANK,
                                amount: 100
                            }],
                            progress: 5
                        }, {
                            cost: [{
                                resource: vu.CUT_STONE,
                                amount: 100
                            }, {
                                resource: vu.PLANK,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.COPPER,
                                amount: 50
                            }, {
                                resource: vu.IRON,
                                amount: 50
                            }, {
                                resource: vu.BRONZE,
                                amount: 50
                            }, {
                                resource: vu.GOLD,
                                amount: 50
                            }, {
                                resource: vu.SILVER,
                                amount: 50
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.CUT_STONE,
                                amount: 100
                            }, {
                                resource: vu.PLANK,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.COPPER,
                                amount: 50
                            }, {
                                resource: vu.IRON,
                                amount: 50
                            }, {
                                resource: vu.BRONZE,
                                amount: 50
                            }, {
                                resource: vu.GOLD,
                                amount: 50
                            }, {
                                resource: vu.SILVER,
                                amount: 50
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.CUT_STONE,
                                amount: 100
                            }, {
                                resource: vu.PLANK,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.COPPER,
                                amount: 50
                            }, {
                                resource: vu.IRON,
                                amount: 50
                            }, {
                                resource: vu.BRONZE,
                                amount: 50
                            }, {
                                resource: vu.GOLD,
                                amount: 50
                            }, {
                                resource: vu.SILVER,
                                amount: 50
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.CUT_STONE,
                                amount: 100
                            }, {
                                resource: vu.PLANK,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.COPPER,
                                amount: 50
                            }, {
                                resource: vu.IRON,
                                amount: 50
                            }, {
                                resource: vu.BRONZE,
                                amount: 50
                            }, {
                                resource: vu.GOLD,
                                amount: 50
                            }, {
                                resource: vu.SILVER,
                                amount: 50
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.GOLD,
                                amount: 100
                            }, {
                                resource: vu.SILVER,
                                amount: 100
                            }],
                            progress: 10
                        }],
                        RP: 50
                    }
                },
                CONSTRUCTION_SITE: {
                    BASE_POWER: 10,
                    SIZE: 0,
                    COMPLEXITY: 0,
                    DESCRIPTION: "",
                    COST: [],
                    WEATHER: [{
                        weather: xu.RAIN,
                        effect: -75
                    }, {
                        weather: xu.STORM,
                        effect: -100
                    }]
                },
                DECONSTRUCTION_SITE: {
                    BASE_POWER: 10,
                    SIZE: 0,
                    COMPLEXITY: 0,
                    DESCRIPTION: "",
                    COST: [],
                    WEATHER: [{
                        weather: xu.RAIN,
                        effect: -75
                    }, {
                        weather: xu.STORM,
                        effect: -100
                    }]
                }
            },
            rs = {
                getResource: function (e) {
                    var n = this.getResources().find(function (n) {
                        return n[0] === vu[e]
                    });
                    if (n) return n[1];
                    console.warn("Invalid resource: " + Au.prepareResourceName(e))
                },
                getResourcesByType: function (e) {
                    var n = this.getResources().filter(function (n) {
                        return n[1].TYPES.includes(e)
                    });
                    if (n) return n;
                    console.warn("Invalid resource type: " + Au.prepareResourceTypeName(e))
                },
                getResources: function () {
                    return Object.entries(this.RAW).concat(Object.entries(this.PROCESSED)).concat(Object.entries(this.FOOD)).concat(Object.entries(this.TOOLS))
                },
                DEFAULT_AMOUNT: 0,
                DEFAULT_LIMIT: 50,
                DEFAULT_VISIBLE: !1,
                DEFAULT_HIGHLIGHTED: !1,
                RAW: {
                    LOG: {
                        TYPES: [Cu.RAW, Cu.FUEL],
                        TRADE_VALUE: 2,
                        AMOUNT: 20,
                        LIMIT: 100,
                        VISIBLE: !0,
                        HIGHLIGHTED: !0,
                        FUEL_PRIORITY: 3,
                        POWER: 10
                    },
                    BRUSHWOOD: {
                        TYPES: [Cu.RAW, Cu.FUEL],
                        TRADE_VALUE: 1,
                        AMOUNT: 20,
                        LIMIT: 100,
                        VISIBLE: !0,
                        HIGHLIGHTED: !0,
                        FUEL_PRIORITY: 4,
                        POWER: 5
                    },
                    STONE: {
                        TYPES: [Cu.RAW],
                        TRADE_VALUE: 2,
                        AMOUNT: 20,
                        LIMIT: 100,
                        VISIBLE: !0
                    },
                    FUR: {
                        TYPES: [Cu.RAW],
                        TRADE_VALUE: 3
                    },
                    WHEAT: {
                        TYPES: [Cu.RAW],
                        TRADE_VALUE: 2
                    },
                    BARLEY: {
                        TYPES: [Cu.RAW],
                        TRADE_VALUE: 3
                    },
                    HOP: {
                        TYPES: [Cu.RAW],
                        TRADE_VALUE: 3
                    },
                    COTTON: {
                        TYPES: [Cu.RAW],
                        TRADE_VALUE: 3
                    },
                    HAY: {
                        TYPES: [Cu.RAW],
                        TRADE_VALUE: 2
                    },
                    CHICKEN: {
                        TYPES: [Cu.RAW, Cu.ANIMAL],
                        LIMIT: 0,
                        SIZE: 2,
                        MEAT: 4,
                        REPRODUCTION_SPEED: 10,
                        BUTCHERING_DIFFICULTY: 1,
                        TRADE_VALUE: 20
                    },
                    COW: {
                        TYPES: [Cu.RAW, Cu.ANIMAL],
                        LIMIT: 0,
                        SIZE: 5,
                        MEAT: 30,
                        REPRODUCTION_SPEED: 1,
                        BUTCHERING_DIFFICULTY: 5,
                        TRADE_VALUE: 40
                    },
                    PIG: {
                        TYPES: [Cu.RAW, Cu.ANIMAL],
                        LIMIT: 0,
                        SIZE: 3,
                        MEAT: 15,
                        REPRODUCTION_SPEED: 5,
                        BUTCHERING_DIFFICULTY: 3,
                        TRADE_VALUE: 30
                    },
                    HORSE: {
                        TYPES: [Cu.RAW, Cu.ANIMAL],
                        LIMIT: 0,
                        SIZE: 5,
                        MEAT: 10,
                        REPRODUCTION_SPEED: 1,
                        BUTCHERING_DIFFICULTY: 5,
                        TRADE_VALUE: 50
                    },
                    COAL: {
                        TYPES: [Cu.RAW, Cu.FUEL],
                        TRADE_VALUE: 8,
                        FUEL_PRIORITY: 2,
                        POWER: 50
                    },
                    GOLD_ORE: {
                        TYPES: [Cu.RAW],
                        TRADE_VALUE: 40
                    },
                    SILVER_ORE: {
                        TYPES: [Cu.RAW],
                        TRADE_VALUE: 20
                    },
                    COPPER_ORE: {
                        TYPES: [Cu.RAW],
                        TRADE_VALUE: 13
                    },
                    TIN_ORE: {
                        TYPES: [Cu.RAW],
                        TRADE_VALUE: 20
                    },
                    IRON_ORE: {
                        TYPES: [Cu.RAW],
                        TRADE_VALUE: 40
                    }
                },
                PROCESSED: {
                    PLANK: {
                        TYPES: [Cu.PROCESSED, Cu.FUEL],
                        TRADE_VALUE: 3,
                        VISIBLE: !0,
                        FUEL_PRIORITY: 5,
                        POWER: 20
                    },
                    CUT_STONE: {
                        TYPES: [Cu.PROCESSED],
                        TRADE_VALUE: 3
                    },
                    FUEL: {
                        TYPES: [Cu.PROCESSED, Cu.FUEL],
                        TRADE_VALUE: 3,
                        FUEL_PRIORITY: 1,
                        POWER: 12.5
                    },
                    FLOUR: {
                        TYPES: [Cu.PROCESSED],
                        TRADE_VALUE: 3
                    },
                    FABRIC: {
                        TYPES: [Cu.PROCESSED],
                        TRADE_VALUE: 7
                    },
                    LEATHER: {
                        TYPES: [Cu.PROCESSED],
                        TRADE_VALUE: 4
                    },
                    COINS: {
                        TYPES: [Cu.PROCESSED],
                        TRADE_VALUE: 1,
                        LIMIT: Number.MAX_SAFE_INTEGER
                    },
                    COPPER: {
                        TYPES: [Cu.PROCESSED],
                        TRADE_VALUE: 32
                    },
                    GOLD: {
                        TYPES: [Cu.PROCESSED],
                        TRADE_VALUE: 90
                    },
                    SILVER: {
                        TYPES: [Cu.PROCESSED],
                        TRADE_VALUE: 45
                    },
                    TIN: {
                        TYPES: [Cu.PROCESSED],
                        TRADE_VALUE: 45
                    },
                    BRONZE: {
                        TYPES: [Cu.PROCESSED],
                        TRADE_VALUE: 50
                    },
                    IRON: {
                        TYPES: [Cu.PROCESSED],
                        TRADE_VALUE: 135
                    },
                    STEEL: {
                        TYPES: [Cu.PROCESSED],
                        TRADE_VALUE: 190
                    },
                    FISH_FOOD: {
                        TYPES: [Cu.PROCESSED],
                        TRADE_VALUE: 5
                    }
                },
                FOOD: {
                    BERRY: {
                        TYPES: [Cu.FOOD, Cu.CONSUMABLE],
                        TRADE_VALUE: 2,
                        AMOUNT: 50,
                        LIMIT: 100,
                        VISIBLE: !0,
                        HIGHLIGHTED: !0,
                        POWER: 50
                    },
                    MUSHROOM: {
                        TYPES: [Cu.FOOD, Cu.CONSUMABLE],
                        TRADE_VALUE: 2,
                        AMOUNT: 50,
                        LIMIT: 100,
                        VISIBLE: !0,
                        HIGHLIGHTED: !0,
                        POWER: 50
                    },
                    FISH: {
                        TYPES: [Cu.FOOD, Cu.CONSUMABLE],
                        TRADE_VALUE: 3,
                        POWER: 75
                    },
                    APPLE: {
                        TYPES: [Cu.FOOD, Cu.CONSUMABLE],
                        TRADE_VALUE: 1,
                        POWER: 20
                    },
                    GRAPE: {
                        TYPES: [Cu.FOOD, Cu.CONSUMABLE],
                        TRADE_VALUE: 1,
                        POWER: 20
                    },
                    BREAD: {
                        TYPES: [Cu.FOOD, Cu.CONSUMABLE],
                        TRADE_VALUE: 10,
                        POWER: 300
                    },
                    MEAT: {
                        TYPES: [Cu.FOOD, Cu.CONSUMABLE],
                        TRADE_VALUE: 3,
                        POWER: 75
                    },
                    EGG: {
                        TYPES: [Cu.FOOD, Cu.CONSUMABLE],
                        TRADE_VALUE: 1,
                        POWER: 25
                    },
                    MILK: {
                        TYPES: [Cu.FOOD, Cu.CONSUMABLE],
                        TRADE_VALUE: 1,
                        POWER: 25
                    },
                    COOKED_MEAT: {
                        TYPES: [Cu.FOOD, Cu.CONSUMABLE],
                        TRADE_VALUE: 7,
                        POWER: 175
                    },
                    VEGETABLE_SOUP: {
                        TYPES: [Cu.FOOD, Cu.CONSUMABLE],
                        TRADE_VALUE: 8,
                        POWER: 225
                    },
                    MEAT_SOUP: {
                        TYPES: [Cu.FOOD, Cu.CONSUMABLE],
                        TRADE_VALUE: 8,
                        POWER: 225
                    },
                    BEER: {
                        TYPES: [Cu.FOOD],
                        TRADE_VALUE: 5
                    },
                    WINE: {
                        TYPES: [Cu.FOOD],
                        TRADE_VALUE: 5
                    }
                },
                TOOLS: {
                    CLOTHES: {
                        TYPES: [Cu.TOOLS],
                        VISIBLE: !0,
                        AMOUNT: 10,
                        TRADE_VALUE: 25
                    },
                    BOW: {
                        TYPES: [Cu.TOOLS],
                        TRADE_VALUE: 35
                    },
                    STONE_PICKAXE: {
                        TYPES: [Cu.TOOLS],
                        TRADE_VALUE: 35
                    },
                    STONE_SHOVEL: {
                        TYPES: [Cu.TOOLS],
                        TRADE_VALUE: 35
                    },
                    STONE_AXE: {
                        TYPES: [Cu.TOOLS],
                        TRADE_VALUE: 35
                    },
                    STONE_SPEAR: {
                        TYPES: [Cu.TOOLS],
                        TRADE_VALUE: 35
                    },
                    STONE_HAMMER: {
                        TYPES: [Cu.TOOLS],
                        TRADE_VALUE: 35
                    },
                    SWORD: {
                        TYPES: [Cu.TOOLS],
                        TRADE_VALUE: 190
                    },
                    WOODEN_SHIELD: {
                        TYPES: [Cu.TOOLS],
                        TRADE_VALUE: 30
                    },
                    LEATHER_ARMOR: {
                        TYPES: [Cu.TOOLS],
                        TRADE_VALUE: 50
                    },
                    LIGHT_ARMOR: {
                        TYPES: [Cu.TOOLS],
                        TRADE_VALUE: 400
                    },
                    HEAVY_ARMOR: {
                        TYPES: [Cu.TOOLS],
                        TRADE_VALUE: 550
                    }
                }
            },
            is = {
                getTroop: function (e) {
                    var n = Object.entries(this.TROOPS).find(function (n) {
                        return n[0] === Iu[e]
                    });
                    if (n) return n[1];
                    console.warn("Invalid troop: " + Au.prepareTroopName(e))
                },
                TROOPS: {
                    MILITIA: {
                        RECRUIT_TIME: 15,
                        STRENGTH: 1,
                        DEFENSE: 2,
                        COST: [{
                            resource: vu.FUR,
                            amount: 5
                        }]
                    },
                    SPEARMAN: {
                        RECRUIT_TIME: 25,
                        STRENGTH: 5,
                        DEFENSE: 2,
                        COST: [{
                            resource: vu.STONE_SPEAR,
                            amount: 1
                        }, {
                            resource: vu.LEATHER_ARMOR,
                            amount: 1
                        }]
                    },
                    ARCHER: {
                        RECRUIT_TIME: 25,
                        STRENGTH: 3,
                        DEFENSE: 4,
                        COST: [{
                            resource: vu.BOW,
                            amount: 1
                        }, {
                            resource: vu.LEATHER_ARMOR,
                            amount: 1
                        }]
                    },
                    SWORDSMAN: {
                        RECRUIT_TIME: 35,
                        STRENGTH: 10,
                        DEFENSE: 4,
                        COST: [{
                            resource: vu.SWORD,
                            amount: 1
                        }, {
                            resource: vu.WOODEN_SHIELD,
                            amount: 1
                        }, {
                            resource: vu.LEATHER_ARMOR,
                            amount: 1
                        }]
                    }
                },
                MISSIONS: {
                    TRAIN: {
                        TIME: 10,
                        DESCRIPTION: "Train your troops",
                        REQUIRED_STRENGTH: 0,
                        REQUIRED_DEFENSE: 0,
                        COST: [{
                            resource: vu.FOOD,
                            amount: 100
                        }],
                        FINISH: function (e, n, t) {
                            n.troops.forEach(function (n) {
                                e.getService(Nu.EFFECTS).addArmyEffect(new Lu("Training", n[0].troop, 5, 10 * n[1]), !0)
                            })
                        }
                    },
                    DEFEND: {
                        TIME: 20,
                        DESCRIPTION: "Protect your land and reduce chance for being invaded",
                        REQUIRED_STRENGTH: 0,
                        REQUIRED_DEFENSE: 20,
                        COST: [{
                            resource: vu.FOOD,
                            amount: 100
                        }, {
                            resource: vu.LOG,
                            amount: 10
                        }],
                        FINISH: function (e, n, t) {
                            e.getService(Nu.ARMY).decreaseInvasionThreat(n.squadDefense)
                        }
                    },
                    SPY: {
                        TIME: 20,
                        DESCRIPTION: "Try to find out military strength of the enemy",
                        REQUIRED_STRENGTH: 20,
                        REQUIRED_DEFENSE: 0,
                        COST: [{
                            resource: vu.FOOD,
                            amount: 100
                        }, {
                            resource: vu.CLOTHES,
                            amount: 1
                        }],
                        FINISH: function (e, n, t) {
                            for (var r = e.getService(Nu.ARMY).generateArmyOfPower(t / 10), i = function () {
                                    var t = e.getService(Nu.ARMY).getRandomTroop(r),
                                        i = e.getService(Nu.ARMY).getRandomTroop(n.troops),
                                        l = i.strength * e.getService(Nu.ARMY).getTroopEffectsMultiplier(i.troop) - t.defense,
                                        o = 50;
                                    l > 0 ? (o += 2 * l) > 90 && (o = 90) : (o -= 2 * l) < 10 && (o = 10), ku.chance(o / 100) ? (r.find(function (e) {
                                        return e[0].troop === t.troop
                                    })[1] -= 1, r = r.filter(function (e) {
                                        return e[1] > 0
                                    })) : n.troops.find(function (e) {
                                        return e[0].troop === i.troop
                                    })[1] -= 1
                                }; r.length > 0 && e.getService(Nu.ARMY).hasTroops(n.troops);) i();
                            r.length > 0 ? e.getService(Nu.LOG).log("Our spies have been discovered and killed") : e.getService(Nu.LOG).log("Our spies discovered that enemy power is: " + Math.floor(e.getService(Nu.ARMY).getEnemyPower()))
                        }
                    },
                    DIVERSION: {
                        TIME: 30,
                        DESCRIPTION: "We need to bring enemy power down",
                        REQUIRED_STRENGTH: 40,
                        REQUIRED_DEFENSE: 20,
                        COST: [{
                            resource: vu.FOOD,
                            amount: 100
                        }, {
                            resource: vu.CLOTHES,
                            amount: 1
                        }, {
                            resource: vu.FUEL,
                            amount: 2
                        }],
                        FINISH: function (e, n, t) {
                            for (var r = e.getService(Nu.ARMY).generateArmyOfPower(t / 5), i = function () {
                                    var t = e.getService(Nu.ARMY).getRandomTroop(r),
                                        i = e.getService(Nu.ARMY).getRandomTroop(n.troops),
                                        l = i.strength * e.getService(Nu.ARMY).getTroopEffectsMultiplier(i.troop) - t.defense,
                                        o = 50;
                                    l > 0 ? (o += 2 * l) > 90 && (o = 90) : (o -= 2 * l) < 10 && (o = 10), ku.chance(o / 100) ? (r.find(function (e) {
                                        return e[0].troop === t.troop
                                    })[1] -= 1, r = r.filter(function (e) {
                                        return e[1] > 0
                                    })) : n.troops.find(function (e) {
                                        return e[0].troop === i.troop
                                    })[1] -= 1
                                }; r.length > 0 && e.getService(Nu.ARMY).hasTroops(n.troops);) i();
                            r.length > 0 ? e.getService(Nu.LOG).log("Our diversion party has been discovered and killed") : (e.getService(Nu.LOG).log("Our diversion worked"), e.getService(Nu.ARMY).reduceEnemyPower(t / 10))
                        }
                    },
                    PLUNDER: {
                        TIME: 30,
                        DESCRIPTION: "Plunder your enemies",
                        REQUIRED_STRENGTH: 50,
                        REQUIRED_DEFENSE: 0,
                        COST: [{
                            resource: vu.FOOD,
                            amount: 100
                        }],
                        FINISH: function (e, n, t) {
                            for (var r = e.getService(Nu.ARMY).generateArmyOfPower(t / 2), i = function () {
                                    var t = e.getService(Nu.ARMY).getRandomTroop(r),
                                        i = e.getService(Nu.ARMY).getRandomTroop(n.troops),
                                        l = i.strength * e.getService(Nu.ARMY).getTroopEffectsMultiplier(i.troop) - t.defense,
                                        o = 50;
                                    l > 0 ? (o += 2 * l) > 90 && (o = 90) : (o -= 2 * l) < 10 && (o = 10), ku.chance(o / 100) ? (r.find(function (e) {
                                        return e[0].troop === t.troop
                                    })[1] -= 1, r = r.filter(function (e) {
                                        return e[1] > 0
                                    })) : n.troops.find(function (e) {
                                        return e[0].troop === i.troop
                                    })[1] -= 1
                                }; r.length > 0 && e.getService(Nu.ARMY).hasTroops(n.troops);) i();
                            if (r.length > 0) e.getService(Nu.LOG).log("Our plunder party has been defeated");
                            else {
                                n.squadStrength = 0, n.squadDefense = 0, n.troops.forEach(function (t) {
                                    n.squadStrength += t[0].strength * t[1] * e.getService(Nu.ARMY).getTroopEffectsMultiplier(t[0].troop), n.squadDefense += t[0].defense * t[1] * e.getService(Nu.ARMY).getTroopEffectsMultiplier(t[0].troop)
                                });
                                for (var l = e.getService(Nu.RESOURCES), o = 20 * n.squadStrength, u = new Map, s = "Loot:<br>", a = Array.from(l.getResources().values()).filter(function (e) {
                                        return e.isVisible()
                                    }).map(function (e) {
                                        return {
                                            item: e.resource,
                                            chance: e.prioritise ? 10 : 1
                                        }
                                    }); o > 0;) {
                                    var c, p = ku.randomWeightedExcept(a, []),
                                        h = rs.getResource(p);
                                    c = ku.randomBetween(1, h.TRADE_VALUE < 10 ? 20 : h.TRADE_VALUE < 50 ? 10 : h.TRADE_VALUE < 300 ? 5 : 2), u.has(p) ? u.set(p, u.get(p) + c) : u.set(p, c), s += "&emsp;" + c + " " + Au.prepareResourceName(p) + "<br>", o -= c * h.TRADE_VALUE
                                }
                                e.getService(Nu.LOG).log(s), l.increaseResources(u, !0), e.getService(Nu.ARMY).reduceEnemyPower(n.squadStrength / 4)
                            }
                        }
                    },
                    EXPEDITION: {
                        TIME: 180,
                        DESCRIPTION: "Look for new land, other villages and treasures",
                        REQUIRED_STRENGTH: 25,
                        REQUIRED_DEFENSE: 25,
                        COST: [{
                            resource: vu.FOOD,
                            amount: 400
                        }],
                        FINISH: function (e, n, t) {
                            for (var r = 3 * (n.squadStrength + n.squadDefense), i = 0, l = 0, o = 0; r > 0;) {
                                var u = ku.randomBetween(1, 3);
                                1 === u ? i += 1 : 2 === u ? l += 1 : 3 === u && (o += 1), r -= 1
                            }
                            var s = "Discovered:<br>";
                            i > 0 && (e.getService(Nu.LAND).increaseLand(i, !0), s += "&emsp;" + i + " empty land<br>"), l > 0 && (e.getService(Nu.LAND).increaseForest(l, !1), s += "&emsp;" + l + " forest<br>"), o > 0 && (e.getService(Nu.LAND).increaseMountains(o), s += "&emsp;" + o + " mountains<br>"), e.getService(Nu.LOG).success(s), n.troops.forEach(function (e) {
                                return e[1] = Math.floor(.9 * e[1])
                            })
                        }
                    },
                    CONQUER: {
                        TIME: 100,
                        DESCRIPTION: "Conquer your enemies and claim their land",
                        REQUIRED_STRENGTH: 200,
                        REQUIRED_DEFENSE: 100,
                        COST: [{
                            resource: vu.FOOD,
                            amount: 200
                        }],
                        FINISH: function (e, n, t) {
                            for (var r = e.getService(Nu.ARMY).generateArmyOfPower(t), i = function () {
                                    var t = e.getService(Nu.ARMY).getRandomTroop(r),
                                        i = e.getService(Nu.ARMY).getRandomTroop(n.troops),
                                        l = i.strength * e.getService(Nu.ARMY).getTroopEffectsMultiplier(i.troop) - t.defense,
                                        o = 50;
                                    l > 0 ? (o += 2 * l) > 90 && (o = 90) : (o -= 2 * l) < 10 && (o = 10), ku.chance(o / 100) ? (r.find(function (e) {
                                        return e[0].troop === t.troop
                                    })[1] -= 1, r = r.filter(function (e) {
                                        return e[1] > 0
                                    })) : n.troops.find(function (e) {
                                        return e[0].troop === i.troop
                                    })[1] -= 1
                                }; r.length > 0 && e.getService(Nu.ARMY).hasTroops(n.troops);) i();
                            if (r.length > 0) e.getService(Nu.LOG).log("Our plunder party has been defeated");
                            else {
                                n.squadStrength = 0, n.squadDefense = 0, n.troops.forEach(function (t) {
                                    n.squadStrength += t[0].strength * t[1] * e.getService(Nu.ARMY).getTroopEffectsMultiplier(t[0].troop), n.squadDefense += t[0].defense * t[1] * e.getService(Nu.ARMY).getTroopEffectsMultiplier(t[0].troop)
                                });
                                for (var l = n.squadStrength, o = 0, u = 0, s = 0; l > 0;) {
                                    var a = ku.randomBetween(1, 3);
                                    1 === a ? o += 1 : 2 === a ? u += 1 : 3 === a && (s += 1), l -= 1
                                }
                                var c = "Conquered:<br>";
                                o > 0 && (e.getService(Nu.LAND).increaseLand(o, !0), c += "&emsp;" + o + " empty land"), u > 0 && (e.getService(Nu.LAND).increaseForest(u, !1), c += "&emsp;" + u + " forest"), s > 0 && (e.getService(Nu.LAND).increaseMountains(s), c += "&emsp;" + s + " mountains"), e.getService(Nu.LOG).log(c), e.getService(Nu.ARMY).reduceEnemyPower(n.squadStrength)
                            }
                        }
                    }
                }
            },
            ls = {
                getCrop: function (e) {
                    var n = this.getCrops().find(function (n) {
                        return n[0] === Tu[e]
                    });
                    if (n) return n[1];
                    console.warn("Invalid crop: " + Au.prepareCropName(e))
                },
                getCrops: function () {
                    return Object.entries(this.FIELD).concat(Object.entries(this.ORCHARD))
                },
                FIELD: {
                    WHEAT: {
                        CROP: Tu.WHEAT,
                        GROWTH: 20,
                        YIELD_MULTIPLIER: 2
                    },
                    BARLEY: {
                        CROP: Tu.BARLEY,
                        GROWTH: 20,
                        YIELD_MULTIPLIER: 2,
                        PREREQUISITE: Eu.BARLEY
                    },
                    HAY: {
                        CROP: Tu.HAY,
                        GROWTH: 10,
                        YIELD_MULTIPLIER: 2
                    },
                    HOP: {
                        CROP: Tu.HOP,
                        GROWTH: 20,
                        YIELD_MULTIPLIER: 2,
                        PREREQUISITE: Eu.HOPS
                    },
                    COTTON: {
                        CROP: Tu.COTTON,
                        GROWTH: 20,
                        YIELD_MULTIPLIER: 2,
                        PREREQUISITE: Eu.COTTON
                    }
                },
                ORCHARD: {
                    BERRY: {
                        CROP: Tu.BERRY,
                        GROWTH: 25,
                        FRUITING: 50,
                        YIELD_MULTIPLIER: 1
                    },
                    GRAPE: {
                        CROP: Tu.GRAPE,
                        GROWTH: 50,
                        FRUITING: 50,
                        YIELD_MULTIPLIER: 1
                    },
                    APPLE: {
                        CROP: Tu.APPLE,
                        GROWTH: 100,
                        FRUITING: 100,
                        YIELD_MULTIPLIER: 1
                    }
                }
            },
            os = {
                SCIENTIFIC_METHOD: {
                    CATEGORY: wu.SCIENCE,
                    COST: [],
                    RESEARCH_POINT: 5,
                    DESCRIPTION: "Maybe there is something we don't know about yet?",
                    PREREQUISITES: [],
                    FINISH: function (e) {
                        e.getService(Nu.LOG).log("New research projects unlocked")
                    }
                },
                FORESIGHT: {
                    CATEGORY: wu.SCIENCE,
                    COST: [],
                    RESEARCH_POINT: 20,
                    DESCRIPTION: "If only we knew what we don't know",
                    PREREQUISITES: [Su.SCIENTIFIC_METHOD],
                    FINISH: function (e) {
                        e.getService(Nu.RESEARCH).increaseForesight(1), e.getService(Nu.LOG).log("Foresight level increased")
                    }
                },
                MANAGEMENT: {
                    CATEGORY: wu.GENERAL,
                    COST: [],
                    RESEARCH_POINT: 30,
                    DESCRIPTION: "Maybe we could make some hard decisions which could help us survive?",
                    PREREQUISITES: [Su.FORESIGHT],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.MANAGEMENT), e.getService(Nu.LOG).log("Management tab unlocked")
                    }
                },
                FISHING: {
                    CATEGORY: wu.AGRICULTURE,
                    COST: [{
                        resource: vu.BERRY,
                        amount: 20
                    }],
                    RESEARCH_POINT: 30,
                    DESCRIPTION: "Could there be something edible in the water?",
                    PREREQUISITES: [Su.SCIENTIFIC_METHOD],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.SEA), e.getService(Nu.LOG).log("Sea unlocked"), e.getService(Nu.GAME).enable(Eu.FISHERS_HUT), e.getService(Nu.LOG).log("Fisher's hut invented")
                    }
                },
                FISH_FOOD: {
                    CATEGORY: wu.AGRICULTURE,
                    COST: [{
                        resource: vu.WHEAT,
                        amount: 20
                    }],
                    RESEARCH_POINT: 30,
                    DESCRIPTION: "Is it possible to lure more fish?",
                    PREREQUISITES: [Su.FISHING],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.FISH_FOOD), e.getService(Nu.RESOURCES).increaseResource(vu.FISH_FOOD, 2, !0)
                    }
                },
                ANIMALS: {
                    CATEGORY: wu.AGRICULTURE,
                    COST: [{
                        resource: vu.HAY,
                        amount: 20
                    }],
                    RESEARCH_POINT: 70,
                    DESCRIPTION: "Is it possible to breed animals near farms?",
                    PREREQUISITES: [Su.AGRICULTURE, Su.HUNTING],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.PASTURE), e.getService(Nu.LOG).log("Pastures invented"), e.getService(Nu.GAME).enable(Eu.BUTCHER), e.getService(Nu.LOG).log("Butcher invented")
                    }
                },
                TRADE: {
                    CATEGORY: wu.GENERAL,
                    COST: [],
                    RESEARCH_POINT: 50,
                    DESCRIPTION: "If others have resources we need maybe we could trade with them?",
                    PREREQUISITES: [Su.MANAGEMENT],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.MARKETPLACE), e.getService(Nu.LOG).log("Marketplace invented"), e.getService(Nu.RESOURCES).makeVisible(vu.COINS)
                    }
                },
                LEATHER: {
                    CATEGORY: wu.TECHNOLOGY,
                    COST: [{
                        resource: vu.FUR,
                        amount: 20
                    }],
                    RESEARCH_POINT: 50,
                    DESCRIPTION: "Could we use dead animals fur in our advantage?",
                    PREREQUISITES: [Su.HUNTING],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.TANNERY), e.getService(Nu.LOG).log("Tannery invented"), e.getService(Nu.RECIPE).enable(Pu.LEATHER)
                    }
                },
                COTTON: {
                    CATEGORY: wu.AGRICULTURE,
                    COST: [],
                    RESEARCH_POINT: 50,
                    DESCRIPTION: "Maybe we can plant cotton?",
                    PREREQUISITES: [Su.AGRICULTURE],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.COTTON), e.getService(Nu.LOG).log("Cotton planting unlocked"), e.getService(Nu.RESOURCES).makeVisible(vu.COTTON)
                    }
                },
                FABRIC: {
                    CATEGORY: wu.TECHNOLOGY,
                    COST: [{
                        resource: vu.COTTON,
                        amount: 20
                    }],
                    RESEARCH_POINT: 50,
                    DESCRIPTION: "Could we make fabric using cotton?",
                    PREREQUISITES: [Su.COTTON],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.COTTON_MILL), e.getService(Nu.LOG).log("Cotton mill invented"), e.getService(Nu.RECIPE).enable(Pu.FABRIC)
                    }
                },
                TAILORING: {
                    CATEGORY: wu.TECHNOLOGY,
                    COST: [{
                        resource: vu.FABRIC,
                        amount: 5
                    }, {
                        resource: vu.FUR,
                        amount: 10
                    }],
                    RESEARCH_POINT: 100,
                    DESCRIPTION: "How can me make new clothes?",
                    PREREQUISITES: [Su.FABRIC, Su.LEATHER],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.TAILOR), e.getService(Nu.LOG).log("Tailor invented"), e.getService(Nu.RECIPE).enable(Pu.CLOTHES_FABRIC), e.getService(Nu.RECIPE).enable(Pu.CLOTHES_FUR)
                    }
                },
                ALCOHOL: {
                    CATEGORY: wu.GENERAL,
                    COST: [],
                    RESEARCH_POINT: 100,
                    DESCRIPTION: "Would it boost our moods if we took some time to have fun??",
                    PREREQUISITES: [Su.SCIENTIFIC_METHOD, Su.COOKING],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.ALCOHOL), e.getService(Nu.GAME).enable(Eu.TAVERN), e.getService(Nu.LOG).log("Tavern invented"), e.getService(Nu.GAME).enable(Eu.BREWERY), e.getService(Nu.LOG).log("Brewery invented"), e.getService(Nu.GAME).enable(Eu.WINERY), e.getService(Nu.LOG).log("Winery invented"), e.getService(Nu.GAME).enable(Eu.BARLEY), e.getService(Nu.LOG).log("Barley planting unlocked"), e.getService(Nu.GAME).enable(Eu.HOPS), e.getService(Nu.LOG).log("Hops planting unlocked")
                    }
                },
                CALENDAR: {
                    CATEGORY: wu.SCIENCE,
                    COST: [{
                        resource: vu.LOG,
                        amount: 10
                    }],
                    RESEARCH_POINT: 30,
                    DESCRIPTION: "Is there some pattern to seasons?",
                    PREREQUISITES: [Su.SCIENTIFIC_METHOD],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.CALENDAR), e.getService(Nu.LOG).log("We are now able to track years and seasons")
                    }
                },
                WEATHER: {
                    CATEGORY: wu.SCIENCE,
                    COST: [{
                        resource: vu.LOG,
                        amount: 10
                    }, {
                        resource: vu.STONE,
                        amount: 10
                    }, {
                        resource: vu.PLANK,
                        amount: 10
                    }],
                    RESEARCH_POINT: 50,
                    DESCRIPTION: "Would it be good to know the weather in advance?",
                    PREREQUISITES: [Su.FORESIGHT],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.WEATHER), e.getService(Nu.LOG).log("We now can predict weather"), e.getService(Nu.WEATHER).increaseForecastPeriod(4)
                    }
                },
                AGRICULTURE: {
                    CATEGORY: wu.AGRICULTURE,
                    COST: [{
                        resource: vu.LOG,
                        amount: 10
                    }, {
                        resource: vu.BERRY,
                        amount: 20
                    }, {
                        resource: vu.WHEAT,
                        amount: 20
                    }, {
                        resource: vu.STONE_SHOVEL,
                        amount: 5
                    }],
                    RESEARCH_POINT: 100,
                    DESCRIPTION: "Why should we risk looking for food in the forest if we can grow it it the open?",
                    PREREQUISITES: [Su.WEATHER, Su.CALENDAR, Su.STONE_SHOVEL],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.FIELD), e.getService(Nu.LOG).log("Field unlocked"), e.getService(Nu.GAME).enable(Eu.FARM), e.getService(Nu.LOG).log("Farm invented"), e.getService(Nu.RESOURCES).makeVisible(vu.WHEAT), e.getService(Nu.RESOURCES).makeVisible(vu.BARLEY), e.getService(Nu.RESOURCES).makeVisible(vu.HAY)
                    }
                },
                BOW: {
                    CATEGORY: wu.GENERAL,
                    COST: [{
                        resource: vu.LOG,
                        amount: 20
                    }, {
                        resource: vu.BRUSHWOOD,
                        amount: 20
                    }],
                    RESEARCH_POINT: 25,
                    DESCRIPTION: "Could we kill without coming closer?",
                    PREREQUISITES: [Su.SCIENTIFIC_METHOD],
                    FINISH: function (e) {
                        e.getService(Nu.RECIPE).enable(Pu.BOW)
                    }
                },
                HUNTING: {
                    CATEGORY: wu.GENERAL,
                    COST: [{
                        resource: vu.LOG,
                        amount: 5
                    }, {
                        resource: vu.BRUSHWOOD,
                        amount: 5
                    }, {
                        resource: vu.STONE,
                        amount: 5
                    }, {
                        resource: vu.BOW,
                        amount: 2
                    }],
                    RESEARCH_POINT: 50,
                    DESCRIPTION: "What if hunted became the hunter?",
                    PREREQUISITES: [Su.BOW],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.HUNTER), e.getService(Nu.LOG).log("Hunter invented")
                    }
                },
                FIRE: {
                    CATEGORY: wu.TECHNOLOGY,
                    COST: [{
                        resource: vu.BRUSHWOOD,
                        amount: 20
                    }, {
                        resource: vu.STONE,
                        amount: 2
                    }],
                    RESEARCH_POINT: 30,
                    DESCRIPTION: "Would it be useful if we could start fire on demand?",
                    PREREQUISITES: [Su.SCIENTIFIC_METHOD],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.FIRE), e.getService(Nu.RECIPE).enable(Pu.FUEL_BRUSHWOOD)
                    }
                },
                BIGGER_FIRE: {
                    CATEGORY: wu.TECHNOLOGY,
                    COST: [{
                        resource: vu.LOG,
                        amount: 10
                    }, {
                        resource: vu.STONE,
                        amount: 2
                    }],
                    RESEARCH_POINT: 50,
                    DESCRIPTION: "Could we make our fire bigger and last for longer?",
                    PREREQUISITES: [Su.SCIENTIFIC_METHOD, Su.FIRE],
                    FINISH: function (e) {
                        e.getService(Nu.RECIPE).enable(Pu.FUEL_LOG)
                    }
                },
                COOKING: {
                    CATEGORY: wu.GENERAL,
                    COST: [{
                        resource: vu.FUEL,
                        amount: 20
                    }, {
                        resource: vu.BERRY,
                        amount: 20
                    }, {
                        resource: vu.MUSHROOM,
                        amount: 20
                    }],
                    RESEARCH_POINT: 30,
                    DESCRIPTION: "What would happen if we heat up raw food?",
                    PREREQUISITES: [Su.FIRE],
                    FINISH: function (e) {
                        e.getService(Nu.RECIPE).enable(Pu.COOKED_MEAT), e.getService(Nu.RECIPE).enable(Pu.BREAD), e.getService(Nu.GAME).enable(Eu.BAKERY), e.getService(Nu.LOG).log("Bakery invented"), e.getService(Nu.RECIPE).enable(Pu.VEGETABLE_SOUP_BERRY), e.getService(Nu.RECIPE).enable(Pu.VEGETABLE_SOUP_MUSHROOM), e.getService(Nu.RECIPE).enable(Pu.MEAT_SOUP)
                    }
                },
                MORTAR: {
                    CATEGORY: wu.TECHNOLOGY,
                    COST: [{
                        resource: vu.STONE,
                        amount: 20
                    }],
                    RESEARCH_POINT: 20,
                    DESCRIPTION: "Would it be useful to ground things up?",
                    PREREQUISITES: [Su.SCIENTIFIC_METHOD],
                    FINISH: function (e) {
                        e.getService(Nu.RECIPE).enable(Pu.FLOUR)
                    }
                },
                STONE_SPEAR: {
                    CATEGORY: wu.MILITARY,
                    COST: [{
                        resource: vu.STONE,
                        amount: 10
                    }, {
                        resource: vu.LOG,
                        amount: 5
                    }],
                    RESEARCH_POINT: 25,
                    DESCRIPTION: "We would have better chance of survival if we keep enemy at distance?",
                    PREREQUISITES: [Su.SCIENTIFIC_METHOD],
                    FINISH: function (e) {
                        e.getService(Nu.RECIPE).enable(Pu.STONE_SPEAR)
                    }
                },
                STONE_AXE: {
                    CATEGORY: wu.GENERAL,
                    COST: [{
                        resource: vu.STONE,
                        amount: 10
                    }, {
                        resource: vu.LOG,
                        amount: 5
                    }],
                    RESEARCH_POINT: 25,
                    DESCRIPTION: "It's probably more effective to hit trees with sharp stone?",
                    PREREQUISITES: [Su.SCIENTIFIC_METHOD],
                    FINISH: function (e) {
                        e.getService(Nu.RECIPE).enable(Pu.STONE_AXE)
                    }
                },
                STONE_PICKAXE: {
                    CATEGORY: wu.GENERAL,
                    COST: [{
                        resource: vu.STONE,
                        amount: 10
                    }, {
                        resource: vu.LOG,
                        amount: 5
                    }],
                    RESEARCH_POINT: 25,
                    DESCRIPTION: "Would stone win against stone?",
                    PREREQUISITES: [Su.SCIENTIFIC_METHOD],
                    FINISH: function (e) {
                        e.getService(Nu.RECIPE).enable(Pu.STONE_PICKAXE)
                    }
                },
                STONE_HAMMER: {
                    CATEGORY: wu.GENERAL,
                    COST: [{
                        resource: vu.STONE,
                        amount: 10
                    }, {
                        resource: vu.LOG,
                        amount: 5
                    }],
                    RESEARCH_POINT: 25,
                    DESCRIPTION: "Can hitting with stone be easier?",
                    PREREQUISITES: [Su.SCIENTIFIC_METHOD],
                    FINISH: function (e) {
                        e.getService(Nu.RECIPE).enable(Pu.STONE_HAMMER)
                    }
                },
                STONE_SHOVEL: {
                    CATEGORY: wu.GENERAL,
                    COST: [{
                        resource: vu.STONE,
                        amount: 10
                    }, {
                        resource: vu.LOG,
                        amount: 5
                    }],
                    RESEARCH_POINT: 25,
                    DESCRIPTION: "It should be better to get your stone dirty and not your hands?",
                    PREREQUISITES: [Su.SCIENTIFIC_METHOD],
                    FINISH: function (e) {
                        e.getService(Nu.RECIPE).enable(Pu.STONE_SHOVEL)
                    }
                },
                MINING: {
                    CATEGORY: wu.TECHNOLOGY,
                    COST: [{
                        resource: vu.LOG,
                        amount: 10
                    }, {
                        resource: vu.STONE,
                        amount: 5
                    }, {
                        resource: vu.STONE_PICKAXE,
                        amount: 1
                    }],
                    RESEARCH_POINT: 50,
                    DESCRIPTION: "If we dig deep enough maybe there is something nice?",
                    PREREQUISITES: [Su.SCIENTIFIC_METHOD, Su.STONE_PICKAXE],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.MOUNTAINS), e.getService(Nu.LOG).log("Mountains unlocked")
                    }
                },
                PROSPECTING_FOR_ORE: {
                    CATEGORY: wu.TECHNOLOGY,
                    COST: [{
                        resource: vu.STONE_PICKAXE,
                        amount: 10
                    }],
                    RESEARCH_POINT: 50,
                    DESCRIPTION: "There must be something useful under all this dirt",
                    PREREQUISITES: [Su.MINING],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.GEOLOGIST), e.getService(Nu.LOG).log("Geologist invented")
                    }
                },
                ADVANCED_PROSPECTING: {
                    CATEGORY: wu.TECHNOLOGY,
                    COST: [{
                        resource: vu.STONE_PICKAXE,
                        amount: 20
                    }],
                    RESEARCH_POINT: 75,
                    DESCRIPTION: "There must be something even more valuable under the ground?",
                    PREREQUISITES: [Su.PROSPECTING_FOR_ORE],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.GOLD), e.getService(Nu.GAME).enable(Eu.SILVER)
                    }
                },
                MASTER_PROSPECTING: {
                    CATEGORY: wu.TECHNOLOGY,
                    COST: [{
                        resource: vu.STONE_PICKAXE,
                        amount: 40
                    }],
                    RESEARCH_POINT: 100,
                    DESCRIPTION: "Is there anything else to find?",
                    PREREQUISITES: [Su.ADVANCED_PROSPECTING],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.IRON)
                    }
                },
                PIT_MINE: {
                    CATEGORY: wu.TECHNOLOGY,
                    COST: [{
                        resource: vu.STONE,
                        amount: 20
                    }, {
                        resource: vu.LOG,
                        amount: 20
                    }, {
                        resource: vu.STONE_PICKAXE,
                        amount: 10
                    }],
                    RESEARCH_POINT: 100,
                    DESCRIPTION: "Could we get precious resources from under the ground?",
                    PREREQUISITES: [Su.PROSPECTING_FOR_ORE],
                    FLAG_PREREQUISITES: [Eu.R_QUARRY],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.PIT_MINE), e.getService(Nu.LOG).log("Pit mine invented"), e.getService(Nu.RECIPE).enable(Pu.FUEL_COAL)
                    }
                },
                ORE_PROCESSING: {
                    CATEGORY: wu.TECHNOLOGY,
                    COST: [{
                        resource: vu.CUT_STONE,
                        amount: 40
                    }, {
                        resource: vu.STONE,
                        amount: 20
                    }, {
                        resource: vu.STONE_HAMMER,
                        amount: 10
                    }, {
                        resource: vu.COPPER_ORE,
                        amount: 20
                    }],
                    RESEARCH_POINT: 100,
                    DESCRIPTION: "What happens if we heat ore in fire?",
                    PREREQUISITES: [Su.PROSPECTING_FOR_ORE],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.SMITHY), e.getService(Nu.LOG).log("Smithy invented")
                    }
                },
                ADVANCED_ORE_PROCESSING: {
                    CATEGORY: wu.TECHNOLOGY,
                    COST: [{
                        resource: vu.CUT_STONE,
                        amount: 40
                    }, {
                        resource: vu.STONE,
                        amount: 20
                    }, {
                        resource: vu.STONE_HAMMER,
                        amount: 5
                    }, {
                        resource: vu.GOLD_ORE,
                        amount: 5
                    }, {
                        resource: vu.SILVER_ORE,
                        amount: 5
                    }],
                    RESEARCH_POINT: 150,
                    DESCRIPTION: "What about heating other ores?",
                    PREREQUISITES: [Su.ADVANCED_PROSPECTING, Su.ORE_PROCESSING],
                    FLAG_PREREQUISITES: [Eu.R_SMITHY],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.ADVANCED_ORE_PROCESSING)
                    }
                },
                MASTER_ORE_PROCESSING: {
                    CATEGORY: wu.TECHNOLOGY,
                    COST: [{
                        resource: vu.CUT_STONE,
                        amount: 40
                    }, {
                        resource: vu.STONE,
                        amount: 20
                    }, {
                        resource: vu.STONE_HAMMER,
                        amount: 5
                    }, {
                        resource: vu.IRON_ORE,
                        amount: 10
                    }],
                    RESEARCH_POINT: 200,
                    DESCRIPTION: "Can we smelt any ore we want?",
                    PREREQUISITES: [Su.MASTER_PROSPECTING, Su.ADVANCED_ORE_PROCESSING],
                    FLAG_PREREQUISITES: [Eu.R_SMITHY],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.IRON)
                    }
                },
                METALLURGY: {
                    CATEGORY: wu.TECHNOLOGY,
                    COST: [{
                        resource: vu.COPPER,
                        amount: 10
                    }, {
                        resource: vu.TIN,
                        amount: 10
                    }],
                    RESEARCH_POINT: 100,
                    DESCRIPTION: "What would happen if we mix two metals?",
                    PREREQUISITES: [Su.ORE_PROCESSING],
                    FLAG_PREREQUISITES: [Eu.R_SMITHY],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.BRONZE)
                    }
                },
                ADVANCED_METALLURGY: {
                    CATEGORY: wu.TECHNOLOGY,
                    COST: [{
                        resource: vu.IRON,
                        amount: 10
                    }, {
                        resource: vu.COAL,
                        amount: 50
                    }],
                    RESEARCH_POINT: 200,
                    DESCRIPTION: "Could we mix iron with coal to make it stronger?",
                    PREREQUISITES: [Su.MASTER_ORE_PROCESSING],
                    FLAG_PREREQUISITES: [Eu.R_SMITHY],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.STEEL)
                    }
                },
                COINS_MINTING: {
                    CATEGORY: wu.TECHNOLOGY,
                    COST: [{
                        resource: vu.GOLD,
                        amount: 10
                    }, {
                        resource: vu.SILVER,
                        amount: 20
                    }],
                    RESEARCH_POINT: 100,
                    DESCRIPTION: "Maybe we can make our own coins?",
                    PREREQUISITES: [Su.ADVANCED_ORE_PROCESSING],
                    FLAG_PREREQUISITES: [Eu.R_SMITHY],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.MINT), e.getService(Nu.LOG).log("Mint invented")
                    }
                },
                HOUSE: {
                    CATEGORY: wu.TECHNOLOGY,
                    COST: [{
                        resource: vu.LOG,
                        amount: 50
                    }, {
                        resource: vu.PLANK,
                        amount: 50
                    }],
                    RESEARCH_POINT: 100,
                    DESCRIPTION: "What if huts were bigger?",
                    PREREQUISITES: [Su.SCIENTIFIC_METHOD, Su.STONE_HAMMER, Su.STONE_SHOVEL],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.HOUSE), e.getService(Nu.LOG).log("House invented")
                    }
                },
                URBAN_PLANNING: {
                    CATEGORY: wu.SCIENCE,
                    COST: [],
                    RESEARCH_POINT: 50,
                    DESCRIPTION: "Maybe we could rearrange buildings?",
                    PREREQUISITES: [Su.MANAGEMENT, Su.MATHEMATICS],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.URBAN_PLANNING)
                    }
                },
                WONDER_BUILDINGS: {
                    CATEGORY: wu.GENERAL,
                    COST: [],
                    RESEARCH_POINT: 300,
                    DESCRIPTION: "What if we built something remarkable?",
                    PREREQUISITES: [Su.HOUSE, Su.URBAN_PLANNING, Su.MATHEMATICS],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.PLATEAU), e.getService(Nu.LOG).log("Plateau unlocked")
                    }
                },
                SAWMILL: {
                    CATEGORY: wu.TECHNOLOGY,
                    COST: [{
                        resource: vu.LOG,
                        amount: 50
                    }, {
                        resource: vu.PLANK,
                        amount: 10
                    }, {
                        resource: vu.COPPER,
                        amount: 5
                    }],
                    RESEARCH_POINT: 100,
                    DESCRIPTION: "Is it possible to produce planks even faster?",
                    PREREQUISITES: [Su.SCIENTIFIC_METHOD, Su.STONE_HAMMER, Su.STONE_AXE],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.SAWMILL), e.getService(Nu.LOG).log("Sawmill invented")
                    }
                },
                WINDMILL: {
                    CATEGORY: wu.TECHNOLOGY,
                    COST: [{
                        resource: vu.LOG,
                        amount: 50
                    }, {
                        resource: vu.PLANK,
                        amount: 10
                    }, {
                        resource: vu.COPPER,
                        amount: 5
                    }],
                    RESEARCH_POINT: 100,
                    DESCRIPTION: "Could we use wind to do hard work for us?",
                    PREREQUISITES: [Su.AGRICULTURE, Su.MORTAR, Su.MATHEMATICS],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.WINDMILL), e.getService(Nu.LOG).log("Windmill invented")
                    }
                },
                FORESTRY: {
                    CATEGORY: wu.AGRICULTURE,
                    COST: [{
                        resource: vu.LOG,
                        amount: 20
                    }, {
                        resource: vu.BRUSHWOOD,
                        amount: 20
                    }, {
                        resource: vu.STONE_SHOVEL,
                        amount: 2
                    }],
                    RESEARCH_POINT: 50,
                    DESCRIPTION: "Is there any reason why trees grow out of dirt?",
                    PREREQUISITES: [Su.SCIENTIFIC_METHOD, Su.STONE_SHOVEL],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.FORESTER), e.getService(Nu.LOG).log("Forester invented")
                    }
                },
                BARRACKS: {
                    CATEGORY: wu.MILITARY,
                    COST: [{
                        resource: vu.LOG,
                        amount: 20
                    }, {
                        resource: vu.PLANK,
                        amount: 20
                    }, {
                        resource: vu.STONE_SPEAR,
                        amount: 5
                    }],
                    RESEARCH_POINT: 100,
                    DESCRIPTION: "How can we make those of us more aggressive less of a threat to others?",
                    PREREQUISITES: [Su.SCIENTIFIC_METHOD, Su.CALENDAR, Su.STONE_SPEAR],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).isEnabled(Eu.FORT) || (e.getService(Nu.GAME).enable(Eu.FORT), e.getService(Nu.LOG).log("Fort unlocked")), e.getService(Nu.RECIPE).enable(Pu.WOODEN_SHIELD), e.getService(Nu.RECIPE).enable(Pu.LEATHER_ARMOR), e.getService(Nu.GAME).enable(Eu.BARRACKS), e.getService(Nu.LOG).log("Barracks invented")
                    }
                },
                STASH: {
                    CATEGORY: wu.MILITARY,
                    COST: [{
                        resource: vu.LOG,
                        amount: 20
                    }, {
                        resource: vu.PLANK,
                        amount: 10
                    }],
                    RESEARCH_POINT: 30,
                    DESCRIPTION: "Can we hide our goods somewhere?",
                    PREREQUISITES: [Su.FORESIGHT],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).isEnabled(Eu.FORT) || (e.getService(Nu.GAME).enable(Eu.FORT), e.getService(Nu.LOG).log("Fort unlocked")), e.getService(Nu.GAME).enable(Eu.STASH)
                    }
                },
                WOODEN_DEFENCES: {
                    CATEGORY: wu.MILITARY,
                    COST: [{
                        resource: vu.LOG,
                        amount: 50
                    }],
                    RESEARCH_POINT: 100,
                    DESCRIPTION: "Maybe we could use logs to defend ourselves?",
                    PREREQUISITES: [Su.BARRACKS],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.STOCKADE), e.getService(Nu.LOG).log("Stockade invented"), e.getService(Nu.GAME).enable(Eu.WOODEN_TOWER), e.getService(Nu.LOG).log("Wooden tower invented")
                    }
                },
                STONE_DEFENCES: {
                    CATEGORY: wu.MILITARY,
                    COST: [{
                        resource: vu.STONE,
                        amount: 50
                    }, {
                        resource: vu.CUT_STONE,
                        amount: 50
                    }],
                    RESEARCH_POINT: 200,
                    DESCRIPTION: "Maybe we could use stone to defend ourselves?",
                    PREREQUISITES: [Su.WOODEN_DEFENCES],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.STONE_TOWER), e.getService(Nu.LOG).log("Stone tower invented")
                    }
                },
                MATHEMATICS: {
                    CATEGORY: wu.SCIENCE,
                    COST: [{
                        resource: vu.FOOD,
                        amount: 1e3
                    }],
                    RESEARCH_POINT: 50,
                    DESCRIPTION: "What if we calculate things first?",
                    PREREQUISITES: [Su.FORESIGHT],
                    FINISH: function (e) {
                        e.getService(Nu.EFFECTS).addBuildingEffect(new Du("Mathematics", bu.CONSTRUCTION, 10, Hu.PERMANENT))
                    }
                },
                FERTILIZER: {
                    CATEGORY: wu.AGRICULTURE,
                    COST: [{
                        resource: vu.FOOD,
                        amount: 3e3
                    }],
                    RESEARCH_POINT: 100,
                    DESCRIPTION: "Could we reuse what animals produce?",
                    PREREQUISITES: [Su.ANIMALS],
                    FINISH: function (e) {
                        e.getService(Nu.EFFECTS).addBuildingEffect(new Du("Fertilizer", bu.FIELD, 10, Hu.PERMANENT)), e.getService(Nu.EFFECTS).addBuildingEffect(new Du("Fertilizer", bu.ORCHARD, 10, Hu.PERMANENT))
                    }
                },
                PICKAXE_DESIGN: {
                    CATEGORY: wu.TECHNOLOGY,
                    COST: [{
                        resource: vu.LOG,
                        amount: 10
                    }, {
                        resource: vu.CUT_STONE,
                        amount: 10
                    }, {
                        resource: vu.STONE_PICKAXE,
                        amount: 5
                    }],
                    RESEARCH_POINT: 100,
                    DESCRIPTION: "Maybe we could redesign our pickaxes?",
                    PREREQUISITES: [Su.MINING],
                    FINISH: function (e) {
                        e.getService(Nu.EFFECTS).addBuildingEffect(new Du("Pickaxe Design", bu.QUARRY, 10, Hu.PERMANENT)), e.getService(Nu.EFFECTS).addBuildingEffect(new Du("Pickaxe Design", bu.PIT_MINE, 10, Hu.PERMANENT)), e.getService(Nu.EFFECTS).addBuildingEffect(new Du("Pickaxe Design", bu.GEOLOGIST, 10, Hu.PERMANENT))
                    }
                },
                TRADE_ROUTES: {
                    CATEGORY: wu.GENERAL,
                    COST: [{
                        resource: vu.COINS,
                        amount: 400
                    }],
                    RESEARCH_POINT: 50,
                    DESCRIPTION: "Is it possible to attract more merchants?",
                    PREREQUISITES: [Su.TRADE, Su.MATHEMATICS],
                    FINISH: function (e) {
                        e.getService(Nu.EFFECTS).addBuildingEffect(new Du("Trade Routes", bu.MARKETPLACE, 15, Hu.PERMANENT))
                    }
                },
                BUFF_PRODUCTION: {
                    CATEGORY: wu.GENERAL,
                    COST: [{
                        resource: vu.STONE_AXE,
                        amount: 2
                    }, {
                        resource: vu.STONE_SHOVEL,
                        amount: 2
                    }, {
                        resource: vu.STONE_PICKAXE,
                        amount: 2
                    }, {
                        resource: vu.STONE_HAMMER,
                        amount: 2
                    }],
                    RESEARCH_POINT: 50,
                    DESCRIPTION: "Would people work better if we give them better tools?",
                    PREREQUISITES: [Su.MANAGEMENT],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.BUFFS), e.getService(Nu.LOG).log("Production buffs invented")
                    }
                },
                HUMAN_RESOURCES: {
                    CATEGORY: wu.GENERAL,
                    COST: [{
                        resource: vu.FOOD,
                        amount: 5e3
                    }],
                    RESEARCH_POINT: 50,
                    DESCRIPTION: "Maybe we can optimize work?",
                    PREREQUISITES: [Su.MANAGEMENT],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.HUMAN_RESOURCES), e.getService(Nu.LOG).log("Human resources invented")
                    }
                }
            },
            us = {
                START_QUEUE_SIZE: 2,
                RECIPES: {
                    PLANK: {
                        RESOURCE: vu.PLANK,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.LOG,
                            amount: 5
                        }],
                        CRAFTING: 5
                    },
                    CUT_STONE: {
                        RESOURCE: vu.CUT_STONE,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.STONE,
                            amount: 5
                        }],
                        CRAFTING: 10
                    },
                    LEATHER: {
                        RESOURCE: vu.LEATHER,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.FUR,
                            amount: 2
                        }],
                        CRAFTING: 10
                    },
                    STONE_AXE: {
                        RESOURCE: vu.STONE_AXE,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.BRUSHWOOD,
                            amount: 1
                        }, {
                            resource: vu.LOG,
                            amount: 2
                        }, {
                            resource: vu.STONE,
                            amount: 5
                        }],
                        CRAFTING: 15
                    },
                    STONE_PICKAXE: {
                        RESOURCE: vu.STONE_PICKAXE,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.BRUSHWOOD,
                            amount: 1
                        }, {
                            resource: vu.LOG,
                            amount: 2
                        }, {
                            resource: vu.STONE,
                            amount: 5
                        }],
                        CRAFTING: 15
                    },
                    STONE_SHOVEL: {
                        RESOURCE: vu.STONE_SHOVEL,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.BRUSHWOOD,
                            amount: 1
                        }, {
                            resource: vu.LOG,
                            amount: 2
                        }, {
                            resource: vu.STONE,
                            amount: 5
                        }],
                        CRAFTING: 15
                    },
                    STONE_SPEAR: {
                        RESOURCE: vu.STONE_SPEAR,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.BRUSHWOOD,
                            amount: 1
                        }, {
                            resource: vu.LOG,
                            amount: 2
                        }, {
                            resource: vu.STONE,
                            amount: 5
                        }],
                        CRAFTING: 15
                    },
                    STONE_HAMMER: {
                        RESOURCE: vu.STONE_HAMMER,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.BRUSHWOOD,
                            amount: 1
                        }, {
                            resource: vu.LOG,
                            amount: 2
                        }, {
                            resource: vu.STONE,
                            amount: 5
                        }],
                        CRAFTING: 15
                    },
                    BOW: {
                        RESOURCE: vu.BOW,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.BRUSHWOOD,
                            amount: 5
                        }, {
                            resource: vu.LOG,
                            amount: 10
                        }],
                        CRAFTING: 15
                    },
                    SWORD: {
                        RESOURCE: vu.SWORD,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.COPPER,
                            amount: 5
                        }, {
                            resource: vu.LOG,
                            amount: 1
                        }, {
                            resource: vu.FUEL,
                            amount: 5
                        }],
                        CRAFTING: 20
                    },
                    WOODEN_SHIELD: {
                        RESOURCE: vu.WOODEN_SHIELD,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.PLANK,
                            amount: 5
                        }, {
                            resource: vu.LOG,
                            amount: 2
                        }, {
                            resource: vu.LEATHER,
                            amount: 1
                        }],
                        CRAFTING: 20
                    },
                    LEATHER_ARMOR: {
                        RESOURCE: vu.LEATHER_ARMOR,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.LEATHER,
                            amount: 10
                        }],
                        CRAFTING: 20
                    },
                    LIGHT_ARMOR: {
                        RESOURCE: vu.LIGHT_ARMOR,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.COPPER,
                            amount: 10
                        }, {
                            resource: vu.LEATHER,
                            amount: 5
                        }, {
                            resource: vu.FUEL,
                            amount: 10
                        }],
                        CRAFTING: 25
                    },
                    HEAVY_ARMOR: {
                        RESOURCE: vu.HEAVY_ARMOR,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.COPPER,
                            amount: 15
                        }, {
                            resource: vu.LEATHER,
                            amount: 5
                        }, {
                            resource: vu.FUEL,
                            amount: 10
                        }],
                        CRAFTING: 30
                    },
                    FUEL_BRUSHWOOD: {
                        RESOURCE: vu.FUEL,
                        AMOUNT: 2,
                        COST: [{
                            resource: vu.BRUSHWOOD,
                            amount: 5
                        }],
                        CRAFTING: 3
                    },
                    FUEL_LOG: {
                        RESOURCE: vu.FUEL,
                        AMOUNT: 4,
                        COST: [{
                            resource: vu.LOG,
                            amount: 4
                        }],
                        CRAFTING: 5
                    },
                    FUEL_COAL: {
                        RESOURCE: vu.FUEL,
                        AMOUNT: 12,
                        COST: [{
                            resource: vu.COAL,
                            amount: 2
                        }],
                        CRAFTING: 5
                    },
                    COOKED_MEAT: {
                        RESOURCE: vu.COOKED_MEAT,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.MEAT,
                            amount: 1
                        }, {
                            resource: vu.FUEL,
                            amount: 1
                        }],
                        CRAFTING: 5
                    },
                    FLOUR: {
                        RESOURCE: vu.FLOUR,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.WHEAT,
                            amount: 3
                        }],
                        CRAFTING: 3
                    },
                    BREAD: {
                        RESOURCE: vu.BREAD,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.FLOUR,
                            amount: 1
                        }, {
                            resource: vu.FUEL,
                            amount: 1
                        }],
                        CRAFTING: 5
                    },
                    VEGETABLE_SOUP_BERRY: {
                        RESOURCE: vu.VEGETABLE_SOUP,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.BERRY,
                            amount: 2
                        }, {
                            resource: vu.FUEL,
                            amount: 1
                        }],
                        CRAFTING: 5
                    },
                    VEGETABLE_SOUP_MUSHROOM: {
                        RESOURCE: vu.VEGETABLE_SOUP,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.MUSHROOM,
                            amount: 2
                        }, {
                            resource: vu.FUEL,
                            amount: 1
                        }],
                        CRAFTING: 5
                    },
                    MEAT_SOUP: {
                        RESOURCE: vu.MEAT_SOUP,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.MEAT,
                            amount: 1
                        }, {
                            resource: vu.FUEL,
                            amount: 1
                        }],
                        CRAFTING: 5
                    },
                    FABRIC: {
                        RESOURCE: vu.FABRIC,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.COTTON,
                            amount: 2
                        }],
                        CRAFTING: 5
                    },
                    CLOTHES_FABRIC: {
                        RESOURCE: vu.CLOTHES,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.FABRIC,
                            amount: 10
                        }],
                        CRAFTING: 20
                    },
                    CLOTHES_FUR: {
                        RESOURCE: vu.CLOTHES,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.FUR,
                            amount: 15
                        }],
                        CRAFTING: 20
                    },
                    GOLD: {
                        RESOURCE: vu.GOLD,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.GOLD_ORE,
                            amount: 2
                        }, {
                            resource: vu.FUEL,
                            amount: 1
                        }],
                        CRAFTING: 10
                    },
                    SILVER: {
                        RESOURCE: vu.SILVER,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.SILVER_ORE,
                            amount: 2
                        }, {
                            resource: vu.FUEL,
                            amount: 1
                        }],
                        CRAFTING: 10
                    },
                    COPPER: {
                        RESOURCE: vu.COPPER,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.COPPER_ORE,
                            amount: 2
                        }, {
                            resource: vu.FUEL,
                            amount: 1
                        }],
                        CRAFTING: 20
                    },
                    TIN: {
                        RESOURCE: vu.TIN,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.TIN_ORE,
                            amount: 2
                        }, {
                            resource: vu.FUEL,
                            amount: 1
                        }],
                        CRAFTING: 20
                    },
                    BRONZE: {
                        RESOURCE: vu.BRONZE,
                        AMOUNT: 2,
                        COST: [{
                            resource: vu.COPPER,
                            amount: 1
                        }, {
                            resource: vu.TIN,
                            amount: 1
                        }, {
                            resource: vu.FUEL,
                            amount: 1
                        }],
                        CRAFTING: 30
                    },
                    IRON: {
                        RESOURCE: vu.IRON,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.IRON_ORE,
                            amount: 3
                        }, {
                            resource: vu.FUEL,
                            amount: 3
                        }],
                        CRAFTING: 30
                    },
                    STEEL: {
                        RESOURCE: vu.STEEL,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.IRON,
                            amount: 1
                        }, {
                            resource: vu.COAL,
                            amount: 5
                        }, {
                            resource: vu.FUEL,
                            amount: 1
                        }],
                        CRAFTING: 40
                    }
                }
            },
            ss = {
                getReligion: function (e) {
                    var n = Object.entries(this.RELIGIONS).find(function (n) {
                        return n[0] === _u[e]
                    });
                    if (n) return n[1];
                    console.warn("Invalid religion: " + Au.prepareReligionName(e))
                },
                RELIGIONS: {
                    NONE: {
                        FAITH_LEVEL: 0,
                        FAITH: 0,
                        TIME: 0,
                        OFFERING: []
                    },
                    NATURE: {
                        FAITH_LEVEL: 1,
                        FAITH: 20,
                        TIME: 10,
                        OFFERING: [{
                            resource: vu.LOG,
                            amount: 40
                        }, {
                            resource: vu.BERRY,
                            amount: 20
                        }, {
                            resource: vu.MUSHROOM,
                            amount: 20
                        }]
                    },
                    FERTILITY: {
                        FAITH_LEVEL: 1,
                        FAITH: 30,
                        TIME: 10,
                        OFFERING: [{
                            resource: vu.WHEAT,
                            amount: 40
                        }, {
                            resource: vu.BERRY,
                            amount: 40
                        }, {
                            resource: vu.APPLE,
                            amount: 40
                        }]
                    },
                    TECHNOLOGY: {
                        FAITH_LEVEL: 1,
                        FAITH: 40,
                        TIME: 10,
                        OFFERING: [{
                            resource: vu.PLANK,
                            amount: 20
                        }, {
                            resource: vu.CUT_STONE,
                            amount: 20
                        }, {
                            resource: vu.STONE_HAMMER,
                            amount: 5
                        }, {
                            resource: vu.STONE_PICKAXE,
                            amount: 5
                        }]
                    },
                    WAR: {
                        FAITH_LEVEL: 1,
                        FAITH: 50,
                        TIME: 10,
                        OFFERING: [{
                            resource: vu.STONE_SPEAR,
                            amount: 5
                        }, {
                            resource: vu.LEATHER_ARMOR,
                            amount: 5
                        }, {
                            resource: vu.FUR,
                            amount: 10
                        }, {
                            resource: vu.LEATHER,
                            amount: 10
                        }, {
                            resource: vu.FOOD,
                            amount: 1e3
                        }]
                    }
                },
                PRAYERS: {
                    BLESSING: {
                        FAITH: 50,
                        FAITH_LEVEL: 2,
                        RELIGION: _u.NONE,
                        DESCRIPTION: "May everything go according to our plans",
                        FINISH: function (e) {
                            var n = [];
                            Object.values(Mu).filter(function (e) {
                                return !isNaN(e)
                            }).forEach(function (t) {
                                e.getServiceByRegion(t).getBuildings().forEach(function (e) {
                                    n.includes(e.getBuildingType()) || n.push(e.getBuildingType())
                                })
                            });
                            var t = ku.randomExcept(n, [bu.ALL, bu.CONSTRUCTION, bu.DECONSTRUCTION, bu.FIELD, bu.ORCHARD, bu.PASTURE, bu.WAREHOUSE, bu.ASCENSION_TEMPLE, bu.COLOSSUS, bu.GREAT_LIGHTHOUSE, bu.HANGING_GARDEN, bu.PYRAMID, bu.SACRED_GROVE, bu.STONEHENGE, bu.UNDERGROUND_CITY, bu.STASH, bu.WOODEN_TOWER, bu.BARRACKS, bu.STONE_TOWER, bu.STOCKADE]);
                            e.getService(Nu.LOG).log(Au.prepareBuildingName(t) + " blessed"), e.getService(Nu.EFFECTS).addBuildingEffect(new Du("Blessing", t, 25, Yu / 2))
                        }
                    },
                    PREACH: {
                        FAITH: 20,
                        FAITH_LEVEL: 1,
                        RELIGION: _u.NONE,
                        DESCRIPTION: "We shall spread our beliefs to others",
                        FINISH: function (e) {
                            e.getService(Nu.RELIGION).increaseFaithLevel(1)
                        }
                    },
                    FAITH_SHIELD: {
                        FAITH: 50,
                        FAITH_LEVEL: 3,
                        RELIGION: _u.NONE,
                        DESCRIPTION: "Our faith will protect us from harm",
                        FINISH: function (e) {
                            var n = 25;
                            n += e.getService(Nu.RELIGION).getFaithLevel(), e.getService(Nu.RELIGION).increaseFaithShield(n)
                        }
                    },
                    SOLDIER_PRAYER: {
                        FAITH: 50,
                        FAITH_LEVEL: 5,
                        RELIGION: _u.NONE,
                        DESCRIPTION: "We shall win any enemy with our faith. All troops buffed 20% for one year",
                        FINISH: function (e) {
                            e.getService(Nu.EFFECTS).addArmyEffect(new Lu("Soldier prayer", Iu.ALL, 20, Yu))
                        }
                    },
                    FAITHFUL_RESEARCH: {
                        FAITH: 100,
                        FAITH_LEVEL: 5,
                        RELIGION: _u.TECHNOLOGY,
                        DESCRIPTION: "We live to improve our knowledge. Gain 100 research points spent only on current research",
                        FINISH: function (e) {
                            e.getService(Nu.RESEARCH).progressTech(100)
                        }
                    },
                    BABY_BOOM: {
                        FAITH: 100,
                        FAITH_LEVEL: 5,
                        RELIGION: _u.FERTILITY,
                        DESCRIPTION: "May we have a lot of children",
                        FINISH: function (e) {
                            e.getService(Nu.EFFECTS).addBuildingEffect(new Du("Baby boom", bu.HUT, 100, Yu / 2)), e.getService(Nu.EFFECTS).addBuildingEffect(new Du("Baby boom", bu.HOUSE, 100, Yu / 2))
                        }
                    },
                    LIFE_CYCLE: {
                        FAITH: 100,
                        FAITH_LEVEL: 5,
                        RELIGION: _u.NATURE,
                        DESCRIPTION: "We pray for all live to thrive. 10% buff to natural sources for 5 years",
                        FINISH: function (e) {
                            e.getService(Nu.EFFECTS).addNatureEffect(new Uu("Life cycle", 10, 5 * Yu))
                        }
                    },
                    HOLY_WAR: {
                        FAITH: 100,
                        FAITH_LEVEL: 5,
                        RELIGION: _u.WAR,
                        DESCRIPTION: "The only true faith must be spread at all cost. All troops buffed 10% for 5 years",
                        FINISH: function (e) {
                            e.getService(Nu.EFFECTS).addArmyEffect(new Lu("Holy War", Iu.ALL, 10, 5 * Yu))
                        }
                    }
                }
            },
            as = {
                GOLDEN_ITEMS: {
                    GOLDEN_FISH_CHANCE: 5e-4,
                    GOLDEN_EGG_CHANCE: 5e-4
                },
                PERKS: {
                    MOTIVATION_SPEECH: {
                        DESCRIPTION: "Use your royal position to motivate people to harder work. 25% production upgrade for all buildings for 1 year (single use)",
                        USAGES: 0,
                        MAX_USAGES: 0,
                        COST: 20,
                        RESET: function (e, n) {},
                        EFFECT: function (e, n) {
                            e.getService(Nu.EFFECTS).addBuildingEffect(new Du("Motivation speech", bu.ALL, 25, Yu)), e.getService(Nu.ROYAL).unlockCallback(n)
                        }
                    },
                    ROYAL_PROPHECY: {
                        DESCRIPTION: "Your royal blood allows prophets to look into the future. Unlocks certain research for each perk level (awarded immediately and after any soft reset or abdication)",
                        USAGES: 0,
                        MAX_USAGES: 3,
                        COST: 50,
                        RESET: function (e, n) {
                            n.usages >= 1 && e.getService(Nu.RESEARCH).finishTech(Su.FIRE), n.usages >= 2 && e.getService(Nu.RESEARCH).finishTech(Su.COOKING), 3 === n.usages && e.getService(Nu.RESEARCH).finishTech(Su.MORTAR)
                        },
                        EFFECT: function (e, n) {
                            switch (n.usages) {
                                case 0:
                                    e.getService(Nu.RESEARCH).finishTech(Su.FIRE);
                                    break;
                                case 1:
                                    e.getService(Nu.RESEARCH).finishTech(Su.COOKING);
                                    break;
                                case 2:
                                    e.getService(Nu.RESEARCH).finishTech(Su.MORTAR)
                            }
                            e.getService(Nu.ROYAL).unlockCallback(n)
                        }
                    },
                    HERITAGE: {
                        DESCRIPTION: "Your predecessors ruled better. You start with extra building (awarded after any soft reset or abdication)",
                        USAGES: 0,
                        MAX_USAGES: 2,
                        COST: 20,
                        RESET: function (e, n) {
                            n.usages >= 1 && e.getService(Nu.FOREST).addBuilding(bu.GATHERER), 2 === n.usages && e.getService(Nu.VILLAGE).addBuilding(bu.WORKSHOP)
                        },
                        EFFECT: function (e, n) {
                            e.getService(Nu.ROYAL).unlockCallback(n)
                        }
                    },
                    FAMILY_JEWELS: {
                        DESCRIPTION: "Your predecessors left you with more riches. You start with extra resources (awarded after any soft reset or abdication)",
                        USAGES: 0,
                        MAX_USAGES: 2,
                        COST: 20,
                        RESET: function (e, n) {
                            n.usages >= 1 && (e.getService(Nu.RESOURCES).increaseResource(vu.LOG, 20, !0), e.getService(Nu.RESOURCES).increaseResource(vu.BRUSHWOOD, 10, !0), e.getService(Nu.RESOURCES).increaseResource(vu.BERRY, 20, !0), e.getService(Nu.RESOURCES).increaseResource(vu.MUSHROOM, 20, !0)), 2 === n.usages && (e.getService(Nu.RESOURCES).increaseResource(vu.STONE, 30, !0), e.getService(Nu.RESOURCES).increaseResource(vu.PLANK, 20, !0), e.getService(Nu.RESOURCES).increaseResource(vu.FUEL, 5, !0), e.getService(Nu.RESOURCES).increaseResource(vu.LEATHER, 5, !0))
                        },
                        EFFECT: function (e, n) {
                            e.getService(Nu.ROYAL).unlockCallback(n)
                        }
                    },
                    KING_OF_THE_FOREST: {
                        DESCRIPTION: "You rule everything in the forests. You start with a few forest buildings unlocked (awarded after any soft reset or abdication)",
                        USAGES: 0,
                        MAX_USAGES: 1,
                        COST: 50,
                        RESET: function (e, n) {
                            1 === n.usages && (e.getService(Nu.FOREST).addBuilding(bu.GATHERER), e.getService(Nu.FOREST).addBuilding(bu.FORESTER), e.getService(Nu.FOREST).addBuilding(bu.HUNTER_LODGE), e.getService(Nu.LAND).takeLand(2 * ts.FOREST.GATHERER.SIZE + ts.FOREST.HUNTER_LODGE.SIZE))
                        },
                        EFFECT: function (e, n) {
                            e.getService(Nu.ROYAL).unlockCallback(n)
                        }
                    },
                    KING_OF_THE_PEOPLE: {
                        DESCRIPTION: "People love you unconditionally. You start with House unlocked and built instead of huts (awarded after any soft reset or abdication)",
                        USAGES: 0,
                        MAX_USAGES: 1,
                        COST: 50,
                        RESET: function (e, n) {
                            1 === n.usages && (e.getService(Nu.RESEARCH).finishTech(Su.HOUSE), e.getService(Nu.VILLAGE).replaceWithHouses())
                        },
                        EFFECT: function (e, n) {
                            e.getService(Nu.ROYAL).unlockCallback(n)
                        }
                    },
                    KING_OF_THE_WAR: {
                        DESCRIPTION: "War is your game. You start with military unlocked and small army (awarded after any soft reset or abdication)",
                        USAGES: 0,
                        MAX_USAGES: 1,
                        COST: 50,
                        RESET: function (e, n) {
                            e.getService(Nu.GAME).enable(Eu.ARMY), e.getService(Nu.GAME).enable(Eu.FORT);
                            var t = e.getService(Nu.ARMY);
                            e.getService(Nu.FORT).addBuilding(bu.BARRACKS), e.getService(Nu.FORT).addBuilding(bu.BARRACKS), e.getService(Nu.LAND).takeLand(2 * ts.FORT.BARRACKS.SIZE), t.addMilitia(20)
                        },
                        EFFECT: function (e, n) {
                            e.getService(Nu.ROYAL).unlockCallback(n)
                        }
                    },
                    CALL_TO_ARMS: {
                        DESCRIPTION: "We will fight till the last of us drops dead. You can convert up to 10 villagers to militia (single use)",
                        USAGES: 0,
                        MAX_USAGES: 0,
                        COST: 10,
                        RESET: function (e, n) {},
                        EFFECT: function (e, n) {
                            var t = e.getService(Nu.RESOURCES),
                                r = e.getService(Nu.MODAL),
                                i = e.getService(Nu.ARMY),
                                l = e.getService(Nu.ROYAL);
                            r.open(mu.INPUT), r.setModalText("How many villagers would you like to convert to militia?<br>" + t.getPeople() + " recruits available");
                            var o = r.registerForValueResponse().subscribe(function (e) {
                                if (o.unsubscribe(), null !== e && !isNaN(e)) {
                                    var u = t.getPeople();
                                    if (u > 10) return void r.info("You can only convert up to 10 villagers");
                                    if (i.getFreeBarracks() < e) return void r.info("Not enough barracks space for so many militia");
                                    if (e > u) return void r.info("Not enough recruits");
                                    if (e <= 0) return void r.info("Invalid amount of recruits");
                                    if (l.getRoyalPoints() < n.cost) return void r.info("Not enough royal points");
                                    t.removeRecruit(Number(e)), i.addMilitia(Number(e)), l.unlockCallback(n)
                                }
                            })
                        }
                    },
                    UNITE_WITH_THE_PEOPLE: {
                        DESCRIPTION: "You step down from your throne and live with others. Permanent 20% upgrade to all buildings (persists through soft resets and abdications)",
                        USAGES: 0,
                        MAX_USAGES: 0,
                        COST: 100,
                        RESET: function (e, n) {},
                        EFFECT: function (e, n) {
                            e.getService(Nu.EFFECTS).addBuildingEffect(new Du("Unite with the people", bu.ALL, 20, Hu.ROYAL)), e.getService(Nu.ROYAL).unlockCallback(n)
                        }
                    }
                }
            },
            cs = function () {
                return function () {}
            }(),
            ps = function () {
                function e() {
                    this.title = "app"
                }
                return e.prototype.isIE = function () {
                    return -1 !== navigator.userAgent.indexOf("MSIE") || 1 == !!document.documentMode
                }, e.prototype.catchContextMenu = function (e) {
                    return !1
                }, e
            }(),
            hs = function () {
                return function () {}
            }(),
            ds = new ye("Location Initialized"),
            fs = function () {
                return function () {}
            }(),
            gs = new ye("appBaseHref"),
            vs = function () {
                function e(e) {
                    var t = this;
                    this._subject = new pt, this._platformStrategy = e;
                    var r = this._platformStrategy.getBaseHref();
                    this._baseHref = n.stripTrailingSlash(ms(r)), this._platformStrategy.onPopState(function (e) {
                        t._subject.emit({
                            url: t.path(!0),
                            pop: !0,
                            state: e.state,
                            type: e.type
                        })
                    })
                }
                var n;
                return n = e, e.prototype.path = function (e) {
                    return void 0 === e && (e = !1), this.normalize(this._platformStrategy.path(e))
                }, e.prototype.isCurrentPathEqualTo = function (e, t) {
                    return void 0 === t && (t = ""), this.path() == this.normalize(e + n.normalizeQueryParams(t))
                }, e.prototype.normalize = function (e) {
                    return n.stripTrailingSlash(function (e, n) {
                        return e && n.startsWith(e) ? n.substring(e.length) : n
                    }(this._baseHref, ms(e)))
                }, e.prototype.prepareExternalUrl = function (e) {
                    return e && "/" !== e[0] && (e = "/" + e), this._platformStrategy.prepareExternalUrl(e)
                }, e.prototype.go = function (e, n, t) {
                    void 0 === n && (n = ""), void 0 === t && (t = null), this._platformStrategy.pushState(t, "", e, n)
                }, e.prototype.replaceState = function (e, n, t) {
                    void 0 === n && (n = ""), void 0 === t && (t = null), this._platformStrategy.replaceState(t, "", e, n)
                }, e.prototype.forward = function () {
                    this._platformStrategy.forward()
                }, e.prototype.back = function () {
                    this._platformStrategy.back()
                }, e.prototype.subscribe = function (e, n, t) {
                    return this._subject.subscribe({
                        next: e,
                        error: n,
                        complete: t
                    })
                }, e.normalizeQueryParams = function (e) {
                    return e && "?" !== e[0] ? "?" + e : e
                }, e.joinWithSlash = function (e, n) {
                    if (0 == e.length) return n;
                    if (0 == n.length) return e;
                    var t = 0;
                    return e.endsWith("/") && t++, n.startsWith("/") && t++, 2 == t ? e + n.substring(1) : 1 == t ? e + n : e + "/" + n
                }, e.stripTrailingSlash = function (e) {
                    var n = e.match(/#|\?|$/),
                        t = n && n.index || e.length;
                    return e.slice(0, t - ("/" === e[t - 1] ? 1 : 0)) + e.slice(t)
                }, e
            }();

        function ms(e) {
            return e.replace(/\/index.html$/, "")
        }
        var ys = function (e) {
                function n(n, t) {
                    var r = e.call(this) || this;
                    return r._platformLocation = n, r._baseHref = "", null != t && (r._baseHref = t), r
                }
                return i(n, e), n.prototype.onPopState = function (e) {
                    this._platformLocation.onPopState(e), this._platformLocation.onHashChange(e)
                }, n.prototype.getBaseHref = function () {
                    return this._baseHref
                }, n.prototype.path = function (e) {
                    void 0 === e && (e = !1);
                    var n = this._platformLocation.hash;
                    return null == n && (n = "#"), n.length > 0 ? n.substring(1) : n
                }, n.prototype.prepareExternalUrl = function (e) {
                    var n = vs.joinWithSlash(this._baseHref, e);
                    return n.length > 0 ? "#" + n : n
                }, n.prototype.pushState = function (e, n, t, r) {
                    var i = this.prepareExternalUrl(t + vs.normalizeQueryParams(r));
                    0 == i.length && (i = this._platformLocation.pathname), this._platformLocation.pushState(e, n, i)
                }, n.prototype.replaceState = function (e, n, t, r) {
                    var i = this.prepareExternalUrl(t + vs.normalizeQueryParams(r));
                    0 == i.length && (i = this._platformLocation.pathname), this._platformLocation.replaceState(e, n, i)
                }, n.prototype.forward = function () {
                    this._platformLocation.forward()
                }, n.prototype.back = function () {
                    this._platformLocation.back()
                }, n
            }(fs),
            Ss = function (e) {
                function n(n, t) {
                    var r = e.call(this) || this;
                    if (r._platformLocation = n, null == t && (t = r._platformLocation.getBaseHrefFromDOM()), null == t) throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");
                    return r._baseHref = t, r
                }
                return i(n, e), n.prototype.onPopState = function (e) {
                    this._platformLocation.onPopState(e), this._platformLocation.onHashChange(e)
                }, n.prototype.getBaseHref = function () {
                    return this._baseHref
                }, n.prototype.prepareExternalUrl = function (e) {
                    return vs.joinWithSlash(this._baseHref, e)
                }, n.prototype.path = function (e) {
                    void 0 === e && (e = !1);
                    var n = this._platformLocation.pathname + vs.normalizeQueryParams(this._platformLocation.search),
                        t = this._platformLocation.hash;
                    return t && e ? "" + n + t : n
                }, n.prototype.pushState = function (e, n, t, r) {
                    var i = this.prepareExternalUrl(t + vs.normalizeQueryParams(r));
                    this._platformLocation.pushState(e, n, i)
                }, n.prototype.replaceState = function (e, n, t, r) {
                    var i = this.prepareExternalUrl(t + vs.normalizeQueryParams(r));
                    this._platformLocation.replaceState(e, n, i)
                }, n.prototype.forward = function () {
                    this._platformLocation.forward()
                }, n.prototype.back = function () {
                    this._platformLocation.back()
                }, n
            }(fs),
            Es = void 0,
            bs = ["en", [["a", "p"], ["AM", "PM"], Es], [["AM", "PM"], Es, Es], [["S", "M", "T", "W", "T", "F", "S"], ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"], ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"]], Es, [["J", "F", "M", "A", "M", "J", "J", "A", "S", "O", "N", "D"], ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"], ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"]], Es, [["B", "A"], ["BC", "AD"], ["Before Christ", "Anno Domini"]], 0, [6, 0], ["M/d/yy", "MMM d, y", "MMMM d, y", "EEEE, MMMM d, y"], ["h:mm a", "h:mm:ss a", "h:mm:ss a z", "h:mm:ss a zzzz"], ["{1}, {0}", Es, "{1} 'at' {0}", Es], [".", ",", ";", "%", "+", "-", "E", "\xd7", "\u2030", "\u221e", "NaN", ":"], ["#,##0.###", "#,##0%", "\xa4#,##0.00", "#E0"], "$", "US Dollar", {}, function (e) {
                var n = Math.floor(Math.abs(e)),
                    t = e.toString().replace(/^[^.]*\.?/, "").length;
                return 1 === n && 0 === t ? 1 : 5
            }],
            Os = {},
            Rs = function (e) {
                return e[e.Decimal = 0] = "Decimal", e[e.Percent = 1] = "Percent", e[e.Currency = 2] = "Currency", e[e.Scientific = 3] = "Scientific", e
            }({}),
            Ts = function (e) {
                return e[e.Zero = 0] = "Zero", e[e.One = 1] = "One", e[e.Two = 2] = "Two", e[e.Few = 3] = "Few", e[e.Many = 4] = "Many", e[e.Other = 5] = "Other", e
            }({}),
            Cs = function (e) {
                return e[e.Decimal = 0] = "Decimal", e[e.Group = 1] = "Group", e[e.List = 2] = "List", e[e.PercentSign = 3] = "PercentSign", e[e.PlusSign = 4] = "PlusSign", e[e.MinusSign = 5] = "MinusSign", e[e.Exponential = 6] = "Exponential", e[e.SuperscriptingExponent = 7] = "SuperscriptingExponent", e[e.PerMille = 8] = "PerMille", e[e[1 / 0] = 9] = "Infinity", e[e.NaN = 10] = "NaN", e[e.TimeSeparator = 11] = "TimeSeparator", e[e.CurrencyDecimal = 12] = "CurrencyDecimal", e[e.CurrencyGroup = 13] = "CurrencyGroup", e
            }({});

        function _s(e, n) {
            var t = Is(e),
                r = t[13][n];
            if (void 0 === r) {
                if (n === Cs.CurrencyDecimal) return t[13][Cs.Decimal];
                if (n === Cs.CurrencyGroup) return t[13][Cs.Group]
            }
            return r
        }

        function Is(e) {
            var n = e.toLowerCase().replace(/_/g, "-"),
                t = Os[n];
            if (t) return t;
            var r = n.split("-")[0];
            if (t = Os[r]) return t;
            if ("en" === r) return bs;
            throw new Error('Missing locale data for the locale "' + e + '".')
        }
        var As = /^(\d+)?\.((\d+)(-(\d+))?)?$/;

        function ws(e) {
            var n = parseInt(e);
            if (isNaN(n)) throw new Error("Invalid integer literal when parsing " + e);
            return n
        }
        var Ns = new ye("UseV4Plurals"),
            Ps = function () {
                return function () {}
            }(),
            Ds = function (e) {
                function n(n, t) {
                    var r = e.call(this) || this;
                    return r.locale = n, r.deprecatedPluralFn = t, r
                }
                return i(n, e), n.prototype.getPluralCategory = function (e, n) {
                    switch (this.deprecatedPluralFn ? this.deprecatedPluralFn(n || this.locale, e) : function (e) {
                        return Is(e)[18]
                    }(n || this.locale)(e)) {
                        case Ts.Zero:
                            return "zero";
                        case Ts.One:
                            return "one";
                        case Ts.Two:
                            return "two";
                        case Ts.Few:
                            return "few";
                        case Ts.Many:
                            return "many";
                        default:
                            return "other"
                    }
                }, n
            }(Ps),
            ks = function () {
                function e(e, n, t, r) {
                    this._iterableDiffers = e, this._keyValueDiffers = n, this._ngEl = t, this._renderer = r, this._initialClasses = []
                }
                return Object.defineProperty(e.prototype, "klass", {
                    set: function (e) {
                        this._removeClasses(this._initialClasses), this._initialClasses = "string" == typeof e ? e.split(/\s+/) : [], this._applyClasses(this._initialClasses), this._applyClasses(this._rawClass)
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "ngClass", {
                    set: function (e) {
                        this._removeClasses(this._rawClass), this._applyClasses(this._initialClasses), this._iterableDiffer = null, this._keyValueDiffer = null, this._rawClass = "string" == typeof e ? e.split(/\s+/) : e, this._rawClass && (Xe(this._rawClass) ? this._iterableDiffer = this._iterableDiffers.find(this._rawClass).create() : this._keyValueDiffer = this._keyValueDiffers.find(this._rawClass).create())
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.ngDoCheck = function () {
                    if (this._iterableDiffer) {
                        var e = this._iterableDiffer.diff(this._rawClass);
                        e && this._applyIterableChanges(e)
                    } else if (this._keyValueDiffer) {
                        var n = this._keyValueDiffer.diff(this._rawClass);
                        n && this._applyKeyValueChanges(n)
                    }
                }, e.prototype._applyKeyValueChanges = function (e) {
                    var n = this;
                    e.forEachAddedItem(function (e) {
                        return n._toggleClass(e.key, e.currentValue)
                    }), e.forEachChangedItem(function (e) {
                        return n._toggleClass(e.key, e.currentValue)
                    }), e.forEachRemovedItem(function (e) {
                        e.previousValue && n._toggleClass(e.key, !1)
                    })
                }, e.prototype._applyIterableChanges = function (e) {
                    var n = this;
                    e.forEachAddedItem(function (e) {
                        if ("string" != typeof e.item) throw new Error("NgClass can only toggle CSS classes expressed as strings, got " + ke(e.item));
                        n._toggleClass(e.item, !0)
                    }), e.forEachRemovedItem(function (e) {
                        return n._toggleClass(e.item, !1)
                    })
                }, e.prototype._applyClasses = function (e) {
                    var n = this;
                    e && (Array.isArray(e) || e instanceof Set ? e.forEach(function (e) {
                        return n._toggleClass(e, !0)
                    }) : Object.keys(e).forEach(function (t) {
                        return n._toggleClass(t, !!e[t])
                    }))
                }, e.prototype._removeClasses = function (e) {
                    var n = this;
                    e && (Array.isArray(e) || e instanceof Set ? e.forEach(function (e) {
                        return n._toggleClass(e, !1)
                    }) : Object.keys(e).forEach(function (e) {
                        return n._toggleClass(e, !1)
                    }))
                }, e.prototype._toggleClass = function (e, n) {
                    var t = this;
                    (e = e.trim()) && e.split(/\s+/g).forEach(function (e) {
                        n ? t._renderer.addClass(t._ngEl.nativeElement, e) : t._renderer.removeClass(t._ngEl.nativeElement, e)
                    })
                }, e
            }(),
            Ms = function () {
                function e(e, n, t, r) {
                    this.$implicit = e, this.ngForOf = n, this.index = t, this.count = r
                }
                return Object.defineProperty(e.prototype, "first", {
                    get: function () {
                        return 0 === this.index
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "last", {
                    get: function () {
                        return this.index === this.count - 1
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "even", {
                    get: function () {
                        return this.index % 2 == 0
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "odd", {
                    get: function () {
                        return !this.even
                    },
                    enumerable: !0,
                    configurable: !0
                }), e
            }(),
            Ls = function () {
                function e(e, n, t) {
                    this._viewContainer = e, this._template = n, this._differs = t, this._ngForOfDirty = !0, this._differ = null
                }
                return Object.defineProperty(e.prototype, "ngForOf", {
                    set: function (e) {
                        this._ngForOf = e, this._ngForOfDirty = !0
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "ngForTrackBy", {
                    get: function () {
                        return this._trackByFn
                    },
                    set: function (e) {
                        Wn() && null != e && "function" != typeof e && console && console.warn && console.warn("trackBy must be a function, but received " + JSON.stringify(e) + ". See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."), this._trackByFn = e
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "ngForTemplate", {
                    set: function (e) {
                        e && (this._template = e)
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.ngDoCheck = function () {
                    if (this._ngForOfDirty) {
                        this._ngForOfDirty = !1;
                        var e = this._ngForOf;
                        if (!this._differ && e) try {
                            this._differ = this._differs.find(e).create(this.ngForTrackBy)
                        } catch (r) {
                            throw new Error("Cannot find a differ supporting object '" + e + "' of type '" + ((n = e).name || typeof n) + "'. NgFor only supports binding to Iterables such as Arrays.")
                        }
                    }
                    var n;
                    if (this._differ) {
                        var t = this._differ.diff(this._ngForOf);
                        t && this._applyChanges(t)
                    }
                }, e.prototype._applyChanges = function (e) {
                    var n = this,
                        t = [];
                    e.forEachOperation(function (e, r, i) {
                        if (null == e.previousIndex) {
                            var l = n._viewContainer.createEmbeddedView(n._template, new Ms(null, n._ngForOf, -1, -1), i),
                                o = new xs(e, l);
                            t.push(o)
                        } else null == i ? n._viewContainer.remove(r) : (l = n._viewContainer.get(r), n._viewContainer.move(l, i), o = new xs(e, l), t.push(o))
                    });
                    for (var r = 0; r < t.length; r++) this._perViewChange(t[r].view, t[r].record);
                    r = 0;
                    for (var i = this._viewContainer.length; r < i; r++) {
                        var l = this._viewContainer.get(r);
                        l.context.index = r, l.context.count = i, l.context.ngForOf = this._ngForOf
                    }
                    e.forEachIdentityChange(function (e) {
                        n._viewContainer.get(e.currentIndex).context.$implicit = e.item
                    })
                }, e.prototype._perViewChange = function (e, n) {
                    e.context.$implicit = n.item
                }, e.ngTemplateContextGuard = function (e, n) {
                    return !0
                }, e
            }(),
            xs = function () {
                return function (e, n) {
                    this.record = e, this.view = n
                }
            }(),
            Fs = function () {
                function e(e, n) {
                    this._viewContainer = e, this._context = new Us, this._thenTemplateRef = null, this._elseTemplateRef = null, this._thenViewRef = null, this._elseViewRef = null, this._thenTemplateRef = n
                }
                return Object.defineProperty(e.prototype, "ngIf", {
                    set: function (e) {
                        this._context.$implicit = this._context.ngIf = e, this._updateView()
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "ngIfThen", {
                    set: function (e) {
                        Hs("ngIfThen", e), this._thenTemplateRef = e, this._thenViewRef = null, this._updateView()
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "ngIfElse", {
                    set: function (e) {
                        Hs("ngIfElse", e), this._elseTemplateRef = e, this._elseViewRef = null, this._updateView()
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype._updateView = function () {
                    this._context.$implicit ? this._thenViewRef || (this._viewContainer.clear(), this._elseViewRef = null, this._thenTemplateRef && (this._thenViewRef = this._viewContainer.createEmbeddedView(this._thenTemplateRef, this._context))) : this._elseViewRef || (this._viewContainer.clear(), this._thenViewRef = null, this._elseTemplateRef && (this._elseViewRef = this._viewContainer.createEmbeddedView(this._elseTemplateRef, this._context)))
                }, e.ngTemplateGuard_ngIf = function (e, n) {
                    return !0
                }, e
            }(),
            Us = function () {
                return function () {
                    this.$implicit = null, this.ngIf = null
                }
            }();

        function Hs(e, n) {
            if (n && !n.createEmbeddedView) throw new Error(e + " must be a TemplateRef, but received '" + ke(n) + "'.")
        }
        var Gs = function () {
                function e(e, n) {
                    this._viewContainerRef = e, this._templateRef = n, this._created = !1
                }
                return e.prototype.create = function () {
                    this._created = !0, this._viewContainerRef.createEmbeddedView(this._templateRef)
                }, e.prototype.destroy = function () {
                    this._created = !1, this._viewContainerRef.clear()
                }, e.prototype.enforceState = function (e) {
                    e && !this._created ? this.create() : !e && this._created && this.destroy()
                }, e
            }(),
            Bs = function () {
                function e() {
                    this._defaultUsed = !1, this._caseCount = 0, this._lastCaseCheckIndex = 0, this._lastCasesMatched = !1
                }
                return Object.defineProperty(e.prototype, "ngSwitch", {
                    set: function (e) {
                        this._ngSwitch = e, 0 === this._caseCount && this._updateDefaultCases(!0)
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype._addCase = function () {
                    return this._caseCount++
                }, e.prototype._addDefault = function (e) {
                    this._defaultViews || (this._defaultViews = []), this._defaultViews.push(e)
                }, e.prototype._matchCase = function (e) {
                    var n = e == this._ngSwitch;
                    return this._lastCasesMatched = this._lastCasesMatched || n, this._lastCaseCheckIndex++, this._lastCaseCheckIndex === this._caseCount && (this._updateDefaultCases(!this._lastCasesMatched), this._lastCaseCheckIndex = 0, this._lastCasesMatched = !1), n
                }, e.prototype._updateDefaultCases = function (e) {
                    if (this._defaultViews && e !== this._defaultUsed) {
                        this._defaultUsed = e;
                        for (var n = 0; n < this._defaultViews.length; n++) this._defaultViews[n].enforceState(e)
                    }
                }, e
            }(),
            Vs = function () {
                function e(e, n, t) {
                    this.ngSwitch = t, t._addCase(), this._view = new Gs(e, n)
                }
                return e.prototype.ngDoCheck = function () {
                    this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))
                }, e
            }(),
            Ws = function () {
                function e(e, n, t) {
                    this._differs = e, this._ngEl = n, this._renderer = t
                }
                return Object.defineProperty(e.prototype, "ngStyle", {
                    set: function (e) {
                        this._ngStyle = e, !this._differ && e && (this._differ = this._differs.find(e).create())
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.ngDoCheck = function () {
                    if (this._differ) {
                        var e = this._differ.diff(this._ngStyle);
                        e && this._applyChanges(e)
                    }
                }, e.prototype._applyChanges = function (e) {
                    var n = this;
                    e.forEachRemovedItem(function (e) {
                        return n._setStyle(e.key, null)
                    }), e.forEachAddedItem(function (e) {
                        return n._setStyle(e.key, e.currentValue)
                    }), e.forEachChangedItem(function (e) {
                        return n._setStyle(e.key, e.currentValue)
                    })
                }, e.prototype._setStyle = function (e, n) {
                    var t = a(e.split("."), 2),
                        r = t[0],
                        i = t[1];
                    null != (n = null != n && i ? "" + n + i : n) ? this._renderer.setStyle(this._ngEl.nativeElement, r, n) : this._renderer.removeStyle(this._ngEl.nativeElement, r)
                }, e
            }();

        function js(e, n) {
            return Error("InvalidPipeArgument: '" + n + "' for pipe '" + ke(e) + "'")
        }
        var Ys = /(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D])\S*/g,
            zs = function () {
                function e() {}
                var n;
                return n = e, e.prototype.transform = function (e) {
                    if (!e) return e;
                    if ("string" != typeof e) throw js(n, e);
                    return e.replace(Ys, function (e) {
                        return e[0].toUpperCase() + e.substr(1).toLowerCase()
                    })
                }, e
            }(),
            Ks = function () {
                function e(e) {
                    this.differs = e, this.keyValues = []
                }
                return e.prototype.transform = function (e, n) {
                    var t = this;
                    if (void 0 === n && (n = qs), !e || !(e instanceof Map) && "object" != typeof e) return null;
                    this.differ || (this.differ = this.differs.find(e).create());
                    var r = this.differ.diff(e);
                    return r && (this.keyValues = [], r.forEachItem(function (e) {
                        t.keyValues.push({
                            key: e.key,
                            value: e.currentValue
                        })
                    }), this.keyValues.sort(n)), this.keyValues
                }, e
            }();

        function qs(e, n) {
            var t = e.key,
                r = n.key;
            if (t === r) return 0;
            if (void 0 === t) return 1;
            if (void 0 === r) return -1;
            if (null === t) return 1;
            if (null === r) return -1;
            if ("string" == typeof t && "string" == typeof r) return t < r ? -1 : 1;
            if ("number" == typeof t && "number" == typeof r) return t - r;
            if ("boolean" == typeof t && "boolean" == typeof r) return t < r ? -1 : 1;
            var i = String(t),
                l = String(r);
            return i == l ? 0 : i < l ? -1 : 1
        }
        var $s = function () {
                function e(e) {
                    this._locale = e
                }
                var n;
                return n = e, e.prototype.transform = function (e, t, r) {
                    if (function (e) {
                            return null == e || "" === e || e != e
                        }(e)) return null;
                    r = r || this._locale;
                    try {
                        return function (e, n, t) {
                            return function (e, n, t, r, i, l, o) {
                                void 0 === o && (o = !1);
                                var u = "",
                                    s = !1;
                                if (isFinite(e)) {
                                    var a = function (n) {
                                        var t, r, i, l, o, u = Math.abs(e) + "",
                                            s = 0;
                                        for ((r = u.indexOf(".")) > -1 && (u = u.replace(".", "")), (i = u.search(/e/i)) > 0 ? (r < 0 && (r = i), r += +u.slice(i + 1), u = u.substring(0, i)) : r < 0 && (r = u.length), i = 0;
                                            "0" === u.charAt(i); i++);
                                        if (i === (o = u.length)) t = [0], r = 1;
                                        else {
                                            for (o--;
                                                "0" === u.charAt(o);) o--;
                                            for (r -= i, t = [], l = 0; i <= o; i++, l++) t[l] = Number(u.charAt(i))
                                        }
                                        return r > 22 && (t = t.splice(0, 21), s = r - 1, r = 1), {
                                            digits: t,
                                            exponent: s,
                                            integerLen: r
                                        }
                                    }();
                                    o && (a = function (e) {
                                        if (0 === e.digits[0]) return e;
                                        var n = e.digits.length - e.integerLen;
                                        return e.exponent ? e.exponent += 2 : (0 === n ? e.digits.push(0, 0) : 1 === n && e.digits.push(0), e.integerLen += 2), e
                                    }(a));
                                    var c = n.minInt,
                                        p = n.minFrac,
                                        h = n.maxFrac;
                                    if (l) {
                                        var d = l.match(As);
                                        if (null === d) throw new Error(l + " is not a valid digit info");
                                        var f = d[1],
                                            g = d[3],
                                            v = d[5];
                                        null != f && (c = ws(f)), null != g && (p = ws(g)), null != v ? h = ws(v) : null != g && p > h && (h = p)
                                    }! function (e, n, t) {
                                        if (n > t) throw new Error("The minimum number of digits after fraction (" + n + ") is higher than the maximum (" + t + ").");
                                        var r = e.digits,
                                            i = r.length - e.integerLen,
                                            l = Math.min(Math.max(n, i), t),
                                            o = l + e.integerLen,
                                            u = r[o];
                                        if (o > 0) {
                                            r.splice(Math.max(e.integerLen, o));
                                            for (var s = o; s < r.length; s++) r[s] = 0
                                        } else {
                                            i = Math.max(0, i), e.integerLen = 1, r.length = Math.max(1, o = l + 1), r[0] = 0;
                                            for (var a = 1; a < o; a++) r[a] = 0
                                        }
                                        if (u >= 5)
                                            if (o - 1 < 0) {
                                                for (var c = 0; c > o; c--) r.unshift(0), e.integerLen++;
                                                r.unshift(1), e.integerLen++
                                            } else r[o - 1]++;
                                        for (; i < Math.max(0, l); i++) r.push(0);
                                        var p = 0 !== l,
                                            h = n + e.integerLen,
                                            d = r.reduceRight(function (e, n, t, r) {
                                                return r[t] = (n += e) < 10 ? n : n - 10, p && (0 === r[t] && t >= h ? r.pop() : p = !1), n >= 10 ? 1 : 0
                                            }, 0);
                                        d && (r.unshift(d), e.integerLen++)
                                    }(a, p, h);
                                    var m = a.digits,
                                        y = a.integerLen,
                                        S = a.exponent,
                                        E = [];
                                    for (s = m.every(function (e) {
                                            return !e
                                        }); y < c; y++) m.unshift(0);
                                    for (; y < 0; y++) m.unshift(0);
                                    y > 0 ? E = m.splice(y, m.length) : (E = m, m = [0]);
                                    var b = [];
                                    for (m.length >= n.lgSize && b.unshift(m.splice(-n.lgSize, m.length).join("")); m.length > n.gSize;) b.unshift(m.splice(-n.gSize, m.length).join(""));
                                    m.length && b.unshift(m.join("")), u = b.join(_s(t, r)), E.length && (u += _s(t, i) + E.join("")), S && (u += _s(t, Cs.Exponential) + "+" + S)
                                } else u = _s(t, Cs.Infinity);
                                return e < 0 && !s ? n.negPre + u + n.negSuf : n.posPre + u + n.posSuf
                            }(e, function (e, n) {
                                void 0 === n && (n = "-");
                                var t = {
                                        minInt: 1,
                                        minFrac: 0,
                                        maxFrac: 0,
                                        posPre: "",
                                        posSuf: "",
                                        negPre: "",
                                        negSuf: "",
                                        gSize: 0,
                                        lgSize: 0
                                    },
                                    r = e.split(";"),
                                    i = r[0],
                                    l = r[1],
                                    o = -1 !== i.indexOf(".") ? i.split(".") : [i.substring(0, i.lastIndexOf("0") + 1), i.substring(i.lastIndexOf("0") + 1)],
                                    u = o[0],
                                    s = o[1] || "";
                                t.posPre = u.substr(0, u.indexOf("#"));
                                for (var a = 0; a < s.length; a++) {
                                    var c = s.charAt(a);
                                    "0" === c ? t.minFrac = t.maxFrac = a + 1 : "#" === c ? t.maxFrac = a + 1 : t.posSuf += c
                                }
                                var p = u.split(",");
                                if (t.gSize = p[1] ? p[1].length : 0, t.lgSize = p[2] || p[1] ? (p[2] || p[1]).length : 0, l) {
                                    var h = i.length - t.posPre.length - t.posSuf.length,
                                        d = l.indexOf("#");
                                    t.negPre = l.substr(0, d).replace(/'/g, ""), t.negSuf = l.substr(d + h).replace(/'/g, "")
                                } else t.negPre = n + t.posPre, t.negSuf = t.posSuf;
                                return t
                            }(function (e, n) {
                                return Is(e)[14][n]
                            }(n, Rs.Decimal), _s(n, Cs.MinusSign)), n, Cs.Group, Cs.Decimal, t)
                        }(function (e) {
                            if ("string" == typeof e && !isNaN(Number(e) - parseFloat(e))) return Number(e);
                            if ("number" != typeof e) throw new Error(e + " is not a number");
                            return e
                        }(e), r, t)
                    } catch (i) {
                        throw js(n, i.message)
                    }
                }, e
            }(),
            Qs = function () {
                return function () {}
            }(),
            Zs = new ye("DocumentToken"),
            Xs = "browser",
            Js = "server",
            ea = function () {
                function e() {}
                return e.ngInjectableDef = ve({
                    providedIn: "root",
                    factory: function () {
                        return new na(ze(Zs), window, ze(Ct))
                    }
                }), e
            }(),
            na = function () {
                function e(e, n, t) {
                    this.document = e, this.window = n, this.errorHandler = t, this.offset = function () {
                        return [0, 0]
                    }
                }
                return e.prototype.setOffset = function (e) {
                    this.offset = Array.isArray(e) ? function () {
                        return e
                    } : e
                }, e.prototype.getScrollPosition = function () {
                    return this.supportScrollRestoration() ? [this.window.scrollX, this.window.scrollY] : [0, 0]
                }, e.prototype.scrollToPosition = function (e) {
                    this.supportScrollRestoration() && this.window.scrollTo(e[0], e[1])
                }, e.prototype.scrollToAnchor = function (e) {
                    if (this.supportScrollRestoration()) {
                        e = this.window.CSS && this.window.CSS.escape ? this.window.CSS.escape(e) : e.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g, "\\$1");
                        try {
                            var n = this.document.querySelector("#" + e);
                            if (n) return void this.scrollToElement(n);
                            var t = this.document.querySelector("[name='" + e + "']");
                            if (t) return void this.scrollToElement(t)
                        } catch (r) {
                            this.errorHandler.handleError(r)
                        }
                    }
                }, e.prototype.setHistoryScrollRestoration = function (e) {
                    if (this.supportScrollRestoration()) {
                        var n = this.window.history;
                        n && n.scrollRestoration && (n.scrollRestoration = e)
                    }
                }, e.prototype.scrollToElement = function (e) {
                    var n = e.getBoundingClientRect(),
                        t = n.left + this.window.pageXOffset,
                        r = n.top + this.window.pageYOffset,
                        i = this.offset();
                    this.window.scrollTo(t - i[0], r - i[1])
                }, e.prototype.supportScrollRestoration = function () {
                    try {
                        return !!this.window && !!this.window.scrollTo
                    } catch (e) {
                        return !1
                    }
                }, e
            }();

        function ta() {
            for (var e = [], n = 0; n < arguments.length; n++) e[n] = arguments[n];
            var t = e[e.length - 1];
            return F(t) ? (e.pop(), Q(e, t)) : re(e)
        }
        var ra = function (e) {
            function n(n) {
                var t = e.call(this) || this;
                return t._value = n, t
            }
            return i(n, e), Object.defineProperty(n.prototype, "value", {
                get: function () {
                    return this.getValue()
                },
                enumerable: !0,
                configurable: !0
            }), n.prototype._subscribe = function (n) {
                var t = e.prototype._subscribe.call(this, n);
                return t && !t.closed && n.next(this._value), t
            }, n.prototype.getValue = function () {
                if (this.hasError) throw this.thrownError;
                if (this.closed) throw new D;
                return this._value
            }, n.prototype.next = function (n) {
                e.prototype.next.call(this, this._value = n)
            }, n
        }(L);

        function ia() {
            return Error.call(this), this.message = "no elements in sequence", this.name = "EmptyError", this
        }
        ia.prototype = Object.create(Error.prototype);
        var la = ia,
            oa = {},
            ua = function () {
                function e(e) {
                    this.resultSelector = e
                }
                return e.prototype.call = function (e, n) {
                    return n.subscribe(new sa(e, this.resultSelector))
                }, e
            }(),
            sa = function (e) {
                function n(n, t) {
                    var r = e.call(this, n) || this;
                    return r.resultSelector = t, r.active = 0, r.values = [], r.observables = [], r
                }
                return i(n, e), n.prototype._next = function (e) {
                    this.values.push(oa), this.observables.push(e)
                }, n.prototype._complete = function () {
                    var e = this.observables,
                        n = e.length;
                    if (0 === n) this.destination.complete();
                    else {
                        this.active = n, this.toRespond = n;
                        for (var t = 0; t < n; t++) {
                            var r = e[t];
                            this.add(Y(this, r, r, t))
                        }
                    }
                }, n.prototype.notifyComplete = function (e) {
                    0 == (this.active -= 1) && this.destination.complete()
                }, n.prototype.notifyNext = function (e, n, t, r, i) {
                    var l = this.values,
                        o = this.toRespond ? l[t] === oa ? --this.toRespond : this.toRespond : 0;
                    l[t] = n, 0 === o && (this.resultSelector ? this._tryResultSelector(l) : this.destination.next(l.slice()))
                }, n.prototype._tryResultSelector = function (e) {
                    var n;
                    try {
                        n = this.resultSelector.apply(this, e)
                    } catch (t) {
                        return void this.destination.error(t)
                    }
                    this.destination.next(n)
                }, n
            }(z),
            aa = new w(function (e) {
                return e.complete()
            });

        function ca(e) {
            return e ? function (e) {
                return new w(function (n) {
                    return e.schedule(function () {
                        return n.complete()
                    })
                })
            }(e) : aa
        }

        function pa(e) {
            return new w(function (n) {
                var t;
                try {
                    t = e()
                } catch (r) {
                    return void n.error(r)
                }
                return (t ? Z(t) : ca()).subscribe(n)
            })
        }

        function ha() {
            return te(1)
        }

        function da(e, n) {
            return function (t) {
                return t.lift(new fa(e, n))
            }
        }
        var fa = function () {
                function e(e, n) {
                    this.predicate = e, this.thisArg = n
                }
                return e.prototype.call = function (e, n) {
                    return n.subscribe(new ga(e, this.predicate, this.thisArg))
                }, e
            }(),
            ga = function (e) {
                function n(n, t, r) {
                    var i = e.call(this, n) || this;
                    return i.predicate = t, i.thisArg = r, i.count = 0, i
                }
                return i(n, e), n.prototype._next = function (e) {
                    var n;
                    try {
                        n = this.predicate.call(this.thisArg, e, this.count++)
                    } catch (t) {
                        return void this.destination.error(t)
                    }
                    n && this.destination.next(e)
                }, n
            }(R);

        function va() {
            return Error.call(this), this.message = "argument out of range", this.name = "ArgumentOutOfRangeError", this
        }
        va.prototype = Object.create(Error.prototype);
        var ma = va;

        function ya(e) {
            return function (n) {
                return 0 === e ? ca() : n.lift(new Sa(e))
            }
        }
        var Sa = function () {
                function e(e) {
                    if (this.total = e, this.total < 0) throw new ma
                }
                return e.prototype.call = function (e, n) {
                    return n.subscribe(new Ea(e, this.total))
                }, e
            }(),
            Ea = function (e) {
                function n(n, t) {
                    var r = e.call(this, n) || this;
                    return r.total = t, r.ring = new Array, r.count = 0, r
                }
                return i(n, e), n.prototype._next = function (e) {
                    var n = this.ring,
                        t = this.total,
                        r = this.count++;
                    n.length < t ? n.push(e) : n[r % t] = e
                }, n.prototype._complete = function () {
                    var e = this.destination,
                        n = this.count;
                    if (n > 0)
                        for (var t = this.count >= this.total ? this.total : this.count, r = this.ring, i = 0; i < t; i++) {
                            var l = n++ % t;
                            e.next(r[l])
                        }
                    e.complete()
                }, n
            }(R);

        function ba(e) {
            return void 0 === e && (e = Ta),
                function (n) {
                    return n.lift(new Oa(e))
                }
        }
        var Oa = function () {
                function e(e) {
                    this.errorFactory = e
                }
                return e.prototype.call = function (e, n) {
                    return n.subscribe(new Ra(e, this.errorFactory))
                }, e
            }(),
            Ra = function (e) {
                function n(n, t) {
                    var r = e.call(this, n) || this;
                    return r.errorFactory = t, r.hasValue = !1, r
                }
                return i(n, e), n.prototype._next = function (e) {
                    this.hasValue = !0, this.destination.next(e)
                }, n.prototype._complete = function () {
                    if (this.hasValue) return this.destination.complete();
                    var e = void 0;
                    try {
                        e = this.errorFactory()
                    } catch (n) {
                        e = n
                    }
                    this.destination.error(e)
                }, n
            }(R);

        function Ta() {
            return new la
        }

        function Ca(e) {
            return void 0 === e && (e = null),
                function (n) {
                    return n.lift(new _a(e))
                }
        }
        var _a = function () {
                function e(e) {
                    this.defaultValue = e
                }
                return e.prototype.call = function (e, n) {
                    return n.subscribe(new Ia(e, this.defaultValue))
                }, e
            }(),
            Ia = function (e) {
                function n(n, t) {
                    var r = e.call(this, n) || this;
                    return r.defaultValue = t, r.isEmpty = !0, r
                }
                return i(n, e), n.prototype._next = function (e) {
                    this.isEmpty = !1, this.destination.next(e)
                }, n.prototype._complete = function () {
                    this.isEmpty && this.destination.next(this.defaultValue), this.destination.complete()
                }, n
            }(R);

        function Aa(e, n) {
            var t = arguments.length >= 2;
            return function (r) {
                return r.pipe(e ? da(function (n, t) {
                    return e(n, t, r)
                }) : ne, ya(1), t ? Ca(n) : ba(function () {
                    return new la
                }))
            }
        }

        function wa(e) {
            return function (n) {
                var t = new Na(e),
                    r = n.lift(t);
                return t.caught = r
            }
        }
        var Na = function () {
                function e(e) {
                    this.selector = e
                }
                return e.prototype.call = function (e, n) {
                    return n.subscribe(new Pa(e, this.selector, this.caught))
                }, e
            }(),
            Pa = function (e) {
                function n(n, t, r) {
                    var i = e.call(this, n) || this;
                    return i.selector = t, i.caught = r, i
                }
                return i(n, e), n.prototype.error = function (n) {
                    if (!this.isStopped) {
                        var t = void 0;
                        try {
                            t = this.selector(n, this.caught)
                        } catch (i) {
                            return void e.prototype.error.call(this, i)
                        }
                        this._unsubscribeAndRecycle();
                        var r = new U(this, void 0, void 0);
                        this.add(r), Y(this, t, void 0, void 0, r)
                    }
                }, n
            }(z);

        function Da(e) {
            return function (n) {
                return 0 === e ? ca() : n.lift(new ka(e))
            }
        }
        var ka = function () {
                function e(e) {
                    if (this.total = e, this.total < 0) throw new ma
                }
                return e.prototype.call = function (e, n) {
                    return n.subscribe(new Ma(e, this.total))
                }, e
            }(),
            Ma = function (e) {
                function n(n, t) {
                    var r = e.call(this, n) || this;
                    return r.total = t, r.count = 0, r
                }
                return i(n, e), n.prototype._next = function (e) {
                    var n = this.total,
                        t = ++this.count;
                    t <= n && (this.destination.next(e), t === n && (this.destination.complete(), this.unsubscribe()))
                }, n
            }(R);

        function La(e, n) {
            var t = arguments.length >= 2;
            return function (r) {
                return r.pipe(e ? da(function (n, t) {
                    return e(n, t, r)
                }) : ne, Da(1), t ? Ca(n) : ba(function () {
                    return new la
                }))
            }
        }
        var xa = function () {
                function e(e, n, t) {
                    this.predicate = e, this.thisArg = n, this.source = t
                }
                return e.prototype.call = function (e, n) {
                    return n.subscribe(new Fa(e, this.predicate, this.thisArg, this.source))
                }, e
            }(),
            Fa = function (e) {
                function n(n, t, r, i) {
                    var l = e.call(this, n) || this;
                    return l.predicate = t, l.thisArg = r, l.source = i, l.index = 0, l.thisArg = r || l, l
                }
                return i(n, e), n.prototype.notifyComplete = function (e) {
                    this.destination.next(e), this.destination.complete()
                }, n.prototype._next = function (e) {
                    var n = !1;
                    try {
                        n = this.predicate.call(this.thisArg, e, this.index++, this.source)
                    } catch (t) {
                        return void this.destination.error(t)
                    }
                    n || this.notifyComplete(!1)
                }, n.prototype._complete = function () {
                    this.notifyComplete(!0)
                }, n
            }(R);

        function Ua(e, n) {
            return "function" == typeof n ? function (t) {
                return t.pipe(Ua(function (t, r) {
                    return Z(e(t, r)).pipe(K(function (e, i) {
                        return n(t, e, r, i)
                    }))
                }))
            } : function (n) {
                return n.lift(new Ha(e))
            }
        }
        var Ha = function () {
                function e(e) {
                    this.project = e
                }
                return e.prototype.call = function (e, n) {
                    return n.subscribe(new Ga(e, this.project))
                }, e
            }(),
            Ga = function (e) {
                function n(n, t) {
                    var r = e.call(this, n) || this;
                    return r.project = t, r.index = 0, r
                }
                return i(n, e), n.prototype._next = function (e) {
                    var n, t = this.index++;
                    try {
                        n = this.project(e, t)
                    } catch (r) {
                        return void this.destination.error(r)
                    }
                    this._innerSub(n, e, t)
                }, n.prototype._innerSub = function (e, n, t) {
                    var r = this.innerSubscription;
                    r && r.unsubscribe();
                    var i = new U(this, void 0, void 0);
                    this.destination.add(i), this.innerSubscription = Y(this, e, n, t, i)
                }, n.prototype._complete = function () {
                    var n = this.innerSubscription;
                    n && !n.closed || e.prototype._complete.call(this), this.unsubscribe()
                }, n.prototype._unsubscribe = function () {
                    this.innerSubscription = null
                }, n.prototype.notifyComplete = function (n) {
                    this.destination.remove(n), this.innerSubscription = null, this.isStopped && e.prototype._complete.call(this)
                }, n.prototype.notifyNext = function (e, n, t, r, i) {
                    this.destination.next(n)
                }, n
            }(z);

        function Ba() {
            for (var e = [], n = 0; n < arguments.length; n++) e[n] = arguments[n];
            return ha()(ta.apply(void 0, e))
        }

        function Va() {
            for (var e = [], n = 0; n < arguments.length; n++) e[n] = arguments[n];
            var t = e[e.length - 1];
            return F(t) ? (e.pop(), function (n) {
                return Ba(e, n, t)
            }) : function (n) {
                return Ba(e, n)
            }
        }

        function Wa(e, n) {
            var t = !1;
            return arguments.length >= 2 && (t = !0),
                function (r) {
                    return r.lift(new ja(e, n, t))
                }
        }
        var ja = function () {
                function e(e, n, t) {
                    void 0 === t && (t = !1), this.accumulator = e, this.seed = n, this.hasSeed = t
                }
                return e.prototype.call = function (e, n) {
                    return n.subscribe(new Ya(e, this.accumulator, this.seed, this.hasSeed))
                }, e
            }(),
            Ya = function (e) {
                function n(n, t, r, i) {
                    var l = e.call(this, n) || this;
                    return l.accumulator = t, l._seed = r, l.hasSeed = i, l.index = 0, l
                }
                return i(n, e), Object.defineProperty(n.prototype, "seed", {
                    get: function () {
                        return this._seed
                    },
                    set: function (e) {
                        this.hasSeed = !0, this._seed = e
                    },
                    enumerable: !0,
                    configurable: !0
                }), n.prototype._next = function (e) {
                    if (this.hasSeed) return this._tryNext(e);
                    this.seed = e, this.destination.next(e)
                }, n.prototype._tryNext = function (e) {
                    var n, t = this.index++;
                    try {
                        n = this.accumulator(this.seed, e, t)
                    } catch (r) {
                        this.destination.error(r)
                    }
                    this.seed = n, this.destination.next(n)
                }, n
            }(R);

        function za(e, n) {
            return X(e, n, 1)
        }

        function Ka(e, n, t) {
            return function (r) {
                return r.lift(new qa(e, n, t))
            }
        }
        var qa = function () {
                function e(e, n, t) {
                    this.nextOrObserver = e, this.error = n, this.complete = t
                }
                return e.prototype.call = function (e, n) {
                    return n.subscribe(new $a(e, this.nextOrObserver, this.error, this.complete))
                }, e
            }(),
            $a = function (e) {
                function n(n, t, r, i) {
                    var l = e.call(this, n) || this;
                    return l._tapNext = _, l._tapError = _, l._tapComplete = _, l._tapError = r || _, l._tapComplete = i || _, d(t) ? (l._context = l, l._tapNext = t) : t && (l._context = t, l._tapNext = t.next || _, l._tapError = t.error || _, l._tapComplete = t.complete || _), l
                }
                return i(n, e), n.prototype._next = function (e) {
                    try {
                        this._tapNext.call(this._context, e)
                    } catch (n) {
                        return void this.destination.error(n)
                    }
                    this.destination.next(e)
                }, n.prototype._error = function (e) {
                    try {
                        this._tapError.call(this._context, e)
                    } catch (e) {
                        return void this.destination.error(e)
                    }
                    this.destination.error(e)
                }, n.prototype._complete = function () {
                    try {
                        this._tapComplete.call(this._context)
                    } catch (e) {
                        return void this.destination.error(e)
                    }
                    return this.destination.complete()
                }, n
            }(R),
            Qa = function () {
                function e(e) {
                    this.callback = e
                }
                return e.prototype.call = function (e, n) {
                    return n.subscribe(new Za(e, this.callback))
                }, e
            }(),
            Za = function (e) {
                function n(n, t) {
                    var r = e.call(this, n) || this;
                    return r.add(new v(t)), r
                }
                return i(n, e), n
            }(R),
            Xa = null;

        function Ja() {
            return Xa
        }
        var ec, nc = {
                class: "className",
                innerHtml: "innerHTML",
                readonly: "readOnly",
                tabindex: "tabIndex"
            },
            tc = {
                "\b": "Backspace",
                "\t": "Tab",
                "\x7f": "Delete",
                "\x1b": "Escape",
                Del: "Delete",
                Esc: "Escape",
                Left: "ArrowLeft",
                Right: "ArrowRight",
                Up: "ArrowUp",
                Down: "ArrowDown",
                Menu: "ContextMenu",
                Scroll: "ScrollLock",
                Win: "OS"
            },
            rc = {
                A: "1",
                B: "2",
                C: "3",
                D: "4",
                E: "5",
                F: "6",
                G: "7",
                H: "8",
                I: "9",
                J: "*",
                K: "+",
                M: "-",
                N: ".",
                O: "/",
                "`": "0",
                "\x90": "NumLock"
            };
        Ie.Node && (ec = Ie.Node.prototype.contains || function (e) {
            return !!(16 & this.compareDocumentPosition(e))
        });
        var ic, lc = function (e) {
                function n() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return i(n, e), n.prototype.parse = function (e) {
                    throw new Error("parse not implemented")
                }, n.makeCurrent = function () {
                    var e;
                    e = new n, Xa || (Xa = e)
                }, n.prototype.hasProperty = function (e, n) {
                    return n in e
                }, n.prototype.setProperty = function (e, n, t) {
                    e[n] = t
                }, n.prototype.getProperty = function (e, n) {
                    return e[n]
                }, n.prototype.invoke = function (e, n, t) {
                    var r;
                    (r = e)[n].apply(r, c(t))
                }, n.prototype.logError = function (e) {
                    window.console && (console.error ? console.error(e) : console.log(e))
                }, n.prototype.log = function (e) {
                    window.console && window.console.log && window.console.log(e)
                }, n.prototype.logGroup = function (e) {
                    window.console && window.console.group && window.console.group(e)
                }, n.prototype.logGroupEnd = function () {
                    window.console && window.console.groupEnd && window.console.groupEnd()
                }, Object.defineProperty(n.prototype, "attrToPropMap", {
                    get: function () {
                        return nc
                    },
                    enumerable: !0,
                    configurable: !0
                }), n.prototype.contains = function (e, n) {
                    return ec.call(e, n)
                }, n.prototype.querySelector = function (e, n) {
                    return e.querySelector(n)
                }, n.prototype.querySelectorAll = function (e, n) {
                    return e.querySelectorAll(n)
                }, n.prototype.on = function (e, n, t) {
                    e.addEventListener(n, t, !1)
                }, n.prototype.onAndCancel = function (e, n, t) {
                    return e.addEventListener(n, t, !1),
                        function () {
                            e.removeEventListener(n, t, !1)
                        }
                }, n.prototype.dispatchEvent = function (e, n) {
                    e.dispatchEvent(n)
                }, n.prototype.createMouseEvent = function (e) {
                    var n = this.getDefaultDocument().createEvent("MouseEvent");
                    return n.initEvent(e, !0, !0), n
                }, n.prototype.createEvent = function (e) {
                    var n = this.getDefaultDocument().createEvent("Event");
                    return n.initEvent(e, !0, !0), n
                }, n.prototype.preventDefault = function (e) {
                    e.preventDefault(), e.returnValue = !1
                }, n.prototype.isPrevented = function (e) {
                    return e.defaultPrevented || null != e.returnValue && !e.returnValue
                }, n.prototype.getInnerHTML = function (e) {
                    return e.innerHTML
                }, n.prototype.getTemplateContent = function (e) {
                    return "content" in e && this.isTemplateElement(e) ? e.content : null
                }, n.prototype.getOuterHTML = function (e) {
                    return e.outerHTML
                }, n.prototype.nodeName = function (e) {
                    return e.nodeName
                }, n.prototype.nodeValue = function (e) {
                    return e.nodeValue
                }, n.prototype.type = function (e) {
                    return e.type
                }, n.prototype.content = function (e) {
                    return this.hasProperty(e, "content") ? e.content : e
                }, n.prototype.firstChild = function (e) {
                    return e.firstChild
                }, n.prototype.nextSibling = function (e) {
                    return e.nextSibling
                }, n.prototype.parentElement = function (e) {
                    return e.parentNode
                }, n.prototype.childNodes = function (e) {
                    return e.childNodes
                }, n.prototype.childNodesAsList = function (e) {
                    for (var n = e.childNodes, t = new Array(n.length), r = 0; r < n.length; r++) t[r] = n[r];
                    return t
                }, n.prototype.clearNodes = function (e) {
                    for (; e.firstChild;) e.removeChild(e.firstChild)
                }, n.prototype.appendChild = function (e, n) {
                    e.appendChild(n)
                }, n.prototype.removeChild = function (e, n) {
                    e.removeChild(n)
                }, n.prototype.replaceChild = function (e, n, t) {
                    e.replaceChild(n, t)
                }, n.prototype.remove = function (e) {
                    return e.parentNode && e.parentNode.removeChild(e), e
                }, n.prototype.insertBefore = function (e, n, t) {
                    e.insertBefore(t, n)
                }, n.prototype.insertAllBefore = function (e, n, t) {
                    t.forEach(function (t) {
                        return e.insertBefore(t, n)
                    })
                }, n.prototype.insertAfter = function (e, n, t) {
                    e.insertBefore(t, n.nextSibling)
                }, n.prototype.setInnerHTML = function (e, n) {
                    e.innerHTML = n
                }, n.prototype.getText = function (e) {
                    return e.textContent
                }, n.prototype.setText = function (e, n) {
                    e.textContent = n
                }, n.prototype.getValue = function (e) {
                    return e.value
                }, n.prototype.setValue = function (e, n) {
                    e.value = n
                }, n.prototype.getChecked = function (e) {
                    return e.checked
                }, n.prototype.setChecked = function (e, n) {
                    e.checked = n
                }, n.prototype.createComment = function (e) {
                    return this.getDefaultDocument().createComment(e)
                }, n.prototype.createTemplate = function (e) {
                    var n = this.getDefaultDocument().createElement("template");
                    return n.innerHTML = e, n
                }, n.prototype.createElement = function (e, n) {
                    return (n = n || this.getDefaultDocument()).createElement(e)
                }, n.prototype.createElementNS = function (e, n, t) {
                    return (t = t || this.getDefaultDocument()).createElementNS(e, n)
                }, n.prototype.createTextNode = function (e, n) {
                    return (n = n || this.getDefaultDocument()).createTextNode(e)
                }, n.prototype.createScriptTag = function (e, n, t) {
                    var r = (t = t || this.getDefaultDocument()).createElement("SCRIPT");
                    return r.setAttribute(e, n), r
                }, n.prototype.createStyleElement = function (e, n) {
                    var t = (n = n || this.getDefaultDocument()).createElement("style");
                    return this.appendChild(t, this.createTextNode(e, n)), t
                }, n.prototype.createShadowRoot = function (e) {
                    return e.createShadowRoot()
                }, n.prototype.getShadowRoot = function (e) {
                    return e.shadowRoot
                }, n.prototype.getHost = function (e) {
                    return e.host
                }, n.prototype.clone = function (e) {
                    return e.cloneNode(!0)
                }, n.prototype.getElementsByClassName = function (e, n) {
                    return e.getElementsByClassName(n)
                }, n.prototype.getElementsByTagName = function (e, n) {
                    return e.getElementsByTagName(n)
                }, n.prototype.classList = function (e) {
                    return Array.prototype.slice.call(e.classList, 0)
                }, n.prototype.addClass = function (e, n) {
                    e.classList.add(n)
                }, n.prototype.removeClass = function (e, n) {
                    e.classList.remove(n)
                }, n.prototype.hasClass = function (e, n) {
                    return e.classList.contains(n)
                }, n.prototype.setStyle = function (e, n, t) {
                    e.style[n] = t
                }, n.prototype.removeStyle = function (e, n) {
                    e.style[n] = ""
                }, n.prototype.getStyle = function (e, n) {
                    return e.style[n]
                }, n.prototype.hasStyle = function (e, n, t) {
                    var r = this.getStyle(e, n) || "";
                    return t ? r == t : r.length > 0
                }, n.prototype.tagName = function (e) {
                    return e.tagName
                }, n.prototype.attributeMap = function (e) {
                    for (var n = new Map, t = e.attributes, r = 0; r < t.length; r++) {
                        var i = t.item(r);
                        n.set(i.name, i.value)
                    }
                    return n
                }, n.prototype.hasAttribute = function (e, n) {
                    return e.hasAttribute(n)
                }, n.prototype.hasAttributeNS = function (e, n, t) {
                    return e.hasAttributeNS(n, t)
                }, n.prototype.getAttribute = function (e, n) {
                    return e.getAttribute(n)
                }, n.prototype.getAttributeNS = function (e, n, t) {
                    return e.getAttributeNS(n, t)
                }, n.prototype.setAttribute = function (e, n, t) {
                    e.setAttribute(n, t)
                }, n.prototype.setAttributeNS = function (e, n, t, r) {
                    e.setAttributeNS(n, t, r)
                }, n.prototype.removeAttribute = function (e, n) {
                    e.removeAttribute(n)
                }, n.prototype.removeAttributeNS = function (e, n, t) {
                    e.removeAttributeNS(n, t)
                }, n.prototype.templateAwareRoot = function (e) {
                    return this.isTemplateElement(e) ? this.content(e) : e
                }, n.prototype.createHtmlDocument = function () {
                    return document.implementation.createHTMLDocument("fakeTitle")
                }, n.prototype.getDefaultDocument = function () {
                    return document
                }, n.prototype.getBoundingClientRect = function (e) {
                    try {
                        return e.getBoundingClientRect()
                    } catch (n) {
                        return {
                            top: 0,
                            bottom: 0,
                            left: 0,
                            right: 0,
                            width: 0,
                            height: 0
                        }
                    }
                }, n.prototype.getTitle = function (e) {
                    return e.title
                }, n.prototype.setTitle = function (e, n) {
                    e.title = n || ""
                }, n.prototype.elementMatches = function (e, n) {
                    return !!this.isElementNode(e) && (e.matches && e.matches(n) || e.msMatchesSelector && e.msMatchesSelector(n) || e.webkitMatchesSelector && e.webkitMatchesSelector(n))
                }, n.prototype.isTemplateElement = function (e) {
                    return this.isElementNode(e) && "TEMPLATE" === e.nodeName
                }, n.prototype.isTextNode = function (e) {
                    return e.nodeType === Node.TEXT_NODE
                }, n.prototype.isCommentNode = function (e) {
                    return e.nodeType === Node.COMMENT_NODE
                }, n.prototype.isElementNode = function (e) {
                    return e.nodeType === Node.ELEMENT_NODE
                }, n.prototype.hasShadowRoot = function (e) {
                    return null != e.shadowRoot && e instanceof HTMLElement
                }, n.prototype.isShadowRoot = function (e) {
                    return e instanceof DocumentFragment
                }, n.prototype.importIntoDoc = function (e) {
                    return document.importNode(this.templateAwareRoot(e), !0)
                }, n.prototype.adoptNode = function (e) {
                    return document.adoptNode(e)
                }, n.prototype.getHref = function (e) {
                    return e.getAttribute("href")
                }, n.prototype.getEventKey = function (e) {
                    var n = e.key;
                    if (null == n) {
                        if (null == (n = e.keyIdentifier)) return "Unidentified";
                        n.startsWith("U+") && (n = String.fromCharCode(parseInt(n.substring(2), 16)), 3 === e.location && rc.hasOwnProperty(n) && (n = rc[n]))
                    }
                    return tc[n] || n
                }, n.prototype.getGlobalEventTarget = function (e, n) {
                    return "window" === n ? window : "document" === n ? e : "body" === n ? e.body : null
                }, n.prototype.getHistory = function () {
                    return window.history
                }, n.prototype.getLocation = function () {
                    return window.location
                }, n.prototype.getBaseHref = function (e) {
                    var n, t = oc || (oc = document.querySelector("base")) ? oc.getAttribute("href") : null;
                    return null == t ? null : (n = t, ic || (ic = document.createElement("a")), ic.setAttribute("href", n), "/" === ic.pathname.charAt(0) ? ic.pathname : "/" + ic.pathname)
                }, n.prototype.resetBaseElement = function () {
                    oc = null
                }, n.prototype.getUserAgent = function () {
                    return window.navigator.userAgent
                }, n.prototype.setData = function (e, n, t) {
                    this.setAttribute(e, "data-" + n, t)
                }, n.prototype.getData = function (e, n) {
                    return this.getAttribute(e, "data-" + n)
                }, n.prototype.getComputedStyle = function (e) {
                    return getComputedStyle(e)
                }, n.prototype.supportsWebAnimation = function () {
                    return "function" == typeof Element.prototype.animate
                }, n.prototype.performanceNow = function () {
                    return window.performance && window.performance.now ? window.performance.now() : (new Date).getTime()
                }, n.prototype.supportsCookies = function () {
                    return !0
                }, n.prototype.getCookie = function (e) {
                    return function (e, n) {
                        var t, r;
                        n = encodeURIComponent(n);
                        try {
                            for (var i = s(e.split(";")), l = i.next(); !l.done; l = i.next()) {
                                var o = l.value,
                                    u = o.indexOf("="),
                                    c = a(-1 == u ? [o, ""] : [o.slice(0, u), o.slice(u + 1)], 2),
                                    p = c[1];
                                if (c[0].trim() === n) return decodeURIComponent(p)
                            }
                        } catch (h) {
                            t = {
                                error: h
                            }
                        } finally {
                            try {
                                l && !l.done && (r = i.return) && r.call(i)
                            } finally {
                                if (t) throw t.error
                            }
                        }
                        return null
                    }(document.cookie, e)
                }, n.prototype.setCookie = function (e, n) {
                    document.cookie = encodeURIComponent(e) + "=" + encodeURIComponent(n)
                }, n
            }(function (e) {
                function n() {
                    var n = e.call(this) || this;
                    n._animationPrefix = null, n._transitionEnd = null;
                    try {
                        var t = n.createElement("div", document);
                        if (null != n.getStyle(t, "animationName")) n._animationPrefix = "";
                        else
                            for (var r = ["Webkit", "Moz", "O", "ms"], i = 0; i < r.length; i++)
                                if (null != n.getStyle(t, r[i] + "AnimationName")) {
                                    n._animationPrefix = "-" + r[i].toLowerCase() + "-";
                                    break
                                } var l = {
                            WebkitTransition: "webkitTransitionEnd",
                            MozTransition: "transitionend",
                            OTransition: "oTransitionEnd otransitionend",
                            transition: "transitionend"
                        };
                        Object.keys(l).forEach(function (e) {
                            null != n.getStyle(t, e) && (n._transitionEnd = l[e])
                        })
                    } catch (o) {
                        n._animationPrefix = null, n._transitionEnd = null
                    }
                    return n
                }
                return i(n, e), n.prototype.getDistributedNodes = function (e) {
                    return e.getDistributedNodes()
                }, n.prototype.resolveAndSetHref = function (e, n, t) {
                    e.href = null == t ? n : n + "/../" + t
                }, n.prototype.supportsDOMEvents = function () {
                    return !0
                }, n.prototype.supportsNativeShadowDOM = function () {
                    return "function" == typeof document.body.createShadowRoot
                }, n.prototype.getAnimationPrefix = function () {
                    return this._animationPrefix ? this._animationPrefix : ""
                }, n.prototype.getTransitionEnd = function () {
                    return this._transitionEnd ? this._transitionEnd : ""
                }, n.prototype.supportsAnimation = function () {
                    return null != this._animationPrefix && null != this._transitionEnd
                }, n
            }(function () {
                function e() {
                    this.resourceLoaderType = null
                }
                return Object.defineProperty(e.prototype, "attrToPropMap", {
                    get: function () {
                        return this._attrToPropMap
                    },
                    set: function (e) {
                        this._attrToPropMap = e
                    },
                    enumerable: !0,
                    configurable: !0
                }), e
            }())),
            oc = null,
            uc = Zs;

        function sc() {
            return !!window.history.pushState
        }
        var ac = function (e) {
                function n(n) {
                    var t = e.call(this) || this;
                    return t._doc = n, t._init(), t
                }
                var t;
                return i(n, e), n.prototype._init = function () {
                    this.location = Ja().getLocation(), this._history = Ja().getHistory()
                }, n.prototype.getBaseHrefFromDOM = function () {
                    return Ja().getBaseHref(this._doc)
                }, n.prototype.onPopState = function (e) {
                    Ja().getGlobalEventTarget(this._doc, "window").addEventListener("popstate", e, !1)
                }, n.prototype.onHashChange = function (e) {
                    Ja().getGlobalEventTarget(this._doc, "window").addEventListener("hashchange", e, !1)
                }, Object.defineProperty(n.prototype, "pathname", {
                    get: function () {
                        return this.location.pathname
                    },
                    set: function (e) {
                        this.location.pathname = e
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(n.prototype, "search", {
                    get: function () {
                        return this.location.search
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(n.prototype, "hash", {
                    get: function () {
                        return this.location.hash
                    },
                    enumerable: !0,
                    configurable: !0
                }), n.prototype.pushState = function (e, n, t) {
                    sc() ? this._history.pushState(e, n, t) : this.location.hash = t
                }, n.prototype.replaceState = function (e, n, t) {
                    sc() ? this._history.replaceState(e, n, t) : this.location.hash = t
                }, n.prototype.forward = function () {
                    this._history.forward()
                }, n.prototype.back = function () {
                    this._history.back()
                }, o([(t = He(uc), function (e, n) {
                    t(e, n, 0)
                }), u("design:paramtypes", [Object])], n)
            }(hs),
            cc = new ye("TRANSITION_ID"),
            pc = [{
                provide: At,
                useFactory: function (e, n, t) {
                    return function () {
                        t.get(wt).donePromise.then(function () {
                            var t = Ja();
                            Array.prototype.slice.apply(t.querySelectorAll(n, "style[ng-transition]")).filter(function (n) {
                                return t.getAttribute(n, "ng-transition") === e
                            }).forEach(function (e) {
                                return t.remove(e)
                            })
                        })
                    }
                },
                deps: [cc, uc, on],
                multi: !0
            }],
            hc = function () {
                function e() {}
                return e.init = function () {
                    var n;
                    n = new e, ur = n
                }, e.prototype.addToWindow = function (e) {
                    Ie.getAngularTestability = function (n, t) {
                        void 0 === t && (t = !0);
                        var r = e.findTestabilityInTree(n, t);
                        if (null == r) throw new Error("Could not find testability for element.");
                        return r
                    }, Ie.getAllAngularTestabilities = function () {
                        return e.getAllTestabilities()
                    }, Ie.getAllAngularRootElements = function () {
                        return e.getAllRootElements()
                    }, Ie.frameworkStabilizers || (Ie.frameworkStabilizers = []), Ie.frameworkStabilizers.push(function (e) {
                        var n = Ie.getAllAngularTestabilities(),
                            t = n.length,
                            r = !1,
                            i = function (n) {
                                r = r || n, 0 == --t && e(r)
                            };
                        n.forEach(function (e) {
                            e.whenStable(i)
                        })
                    })
                }, e.prototype.findTestabilityInTree = function (e, n, t) {
                    if (null == n) return null;
                    var r = e.getTestability(n);
                    return null != r ? r : t ? Ja().isShadowRoot(n) ? this.findTestabilityInTree(e, Ja().getHost(n), !0) : this.findTestabilityInTree(e, Ja().parentElement(n), !0) : null
                }, e
            }();

        function dc(e, n) {
            "undefined" != typeof COMPILED && COMPILED || ((Ie.ng = Ie.ng || {})[e] = n)
        }
        var fc = {
            ApplicationRef: fr,
            NgZone: Zt
        };

        function gc(e) {
            return wr(e)
        }
        var vc = new ye("EventManagerPlugins"),
            mc = function () {
                function e(e, n) {
                    var t = this;
                    this._zone = n, this._eventNameToPlugin = new Map, e.forEach(function (e) {
                        return e.manager = t
                    }), this._plugins = e.slice().reverse()
                }
                return e.prototype.addEventListener = function (e, n, t) {
                    return this._findPluginFor(n).addEventListener(e, n, t)
                }, e.prototype.addGlobalEventListener = function (e, n, t) {
                    return this._findPluginFor(n).addGlobalEventListener(e, n, t)
                }, e.prototype.getZone = function () {
                    return this._zone
                }, e.prototype._findPluginFor = function (e) {
                    var n = this._eventNameToPlugin.get(e);
                    if (n) return n;
                    for (var t = this._plugins, r = 0; r < t.length; r++) {
                        var i = t[r];
                        if (i.supports(e)) return this._eventNameToPlugin.set(e, i), i
                    }
                    throw new Error("No event manager plugin found for event " + e)
                }, e
            }(),
            yc = function () {
                function e(e) {
                    this._doc = e
                }
                return e.prototype.addGlobalEventListener = function (e, n, t) {
                    var r = Ja().getGlobalEventTarget(this._doc, e);
                    if (!r) throw new Error("Unsupported event target " + r + " for event " + n);
                    return this.addEventListener(r, n, t)
                }, e
            }(),
            Sc = function () {
                function e() {
                    this._stylesSet = new Set
                }
                return e.prototype.addStyles = function (e) {
                    var n = this,
                        t = new Set;
                    e.forEach(function (e) {
                        n._stylesSet.has(e) || (n._stylesSet.add(e), t.add(e))
                    }), this.onStylesAdded(t)
                }, e.prototype.onStylesAdded = function (e) {}, e.prototype.getAllStyles = function () {
                    return Array.from(this._stylesSet)
                }, e
            }(),
            Ec = function (e) {
                function n(n) {
                    var t = e.call(this) || this;
                    return t._doc = n, t._hostNodes = new Set, t._styleNodes = new Set, t._hostNodes.add(n.head), t
                }
                return i(n, e), n.prototype._addStylesToHost = function (e, n) {
                    var t = this;
                    e.forEach(function (e) {
                        var r = t._doc.createElement("style");
                        r.textContent = e, t._styleNodes.add(n.appendChild(r))
                    })
                }, n.prototype.addHost = function (e) {
                    this._addStylesToHost(this._stylesSet, e), this._hostNodes.add(e)
                }, n.prototype.removeHost = function (e) {
                    this._hostNodes.delete(e)
                }, n.prototype.onStylesAdded = function (e) {
                    var n = this;
                    this._hostNodes.forEach(function (t) {
                        return n._addStylesToHost(e, t)
                    })
                }, n.prototype.ngOnDestroy = function () {
                    this._styleNodes.forEach(function (e) {
                        return Ja().remove(e)
                    })
                }, n
            }(Sc),
            bc = {
                svg: "http://www.w3.org/2000/svg",
                xhtml: "http://www.w3.org/1999/xhtml",
                xlink: "http://www.w3.org/1999/xlink",
                xml: "http://www.w3.org/XML/1998/namespace",
                xmlns: "http://www.w3.org/2000/xmlns/"
            },
            Oc = /%COMP%/g,
            Rc = "_nghost-%COMP%",
            Tc = "_ngcontent-%COMP%";

        function Cc(e, n, t) {
            for (var r = 0; r < n.length; r++) {
                var i = n[r];
                Array.isArray(i) ? Cc(e, i, t) : (i = i.replace(Oc, e), t.push(i))
            }
            return t
        }

        function _c(e) {
            return function (n) {
                !1 === e(n) && (n.preventDefault(), n.returnValue = !1)
            }
        }
        var Ic = function () {
                function e(e, n, t) {
                    this.eventManager = e, this.sharedStylesHost = n, this.appId = t, this.rendererByCompId = new Map, this.defaultRenderer = new Ac(e)
                }
                return e.prototype.createRenderer = function (e, n) {
                    if (!e || !n) return this.defaultRenderer;
                    switch (n.encapsulation) {
                        case Ue.Emulated:
                            var t = this.rendererByCompId.get(n.id);
                            return t || (t = new Dc(this.eventManager, this.sharedStylesHost, n, this.appId), this.rendererByCompId.set(n.id, t)), t.applyToHost(e), t;
                        case Ue.Native:
                        case Ue.ShadowDom:
                            return new kc(this.eventManager, this.sharedStylesHost, e, n);
                        default:
                            if (!this.rendererByCompId.has(n.id)) {
                                var r = Cc(n.id, n.styles, []);
                                this.sharedStylesHost.addStyles(r), this.rendererByCompId.set(n.id, this.defaultRenderer)
                            }
                            return this.defaultRenderer
                    }
                }, e.prototype.begin = function () {}, e.prototype.end = function () {}, e
            }(),
            Ac = function () {
                function e(e) {
                    this.eventManager = e, this.data = Object.create(null)
                }
                return e.prototype.destroy = function () {}, e.prototype.createElement = function (e, n) {
                    return n ? document.createElementNS(bc[n], e) : document.createElement(e)
                }, e.prototype.createComment = function (e) {
                    return document.createComment(e)
                }, e.prototype.createText = function (e) {
                    return document.createTextNode(e)
                }, e.prototype.appendChild = function (e, n) {
                    e.appendChild(n)
                }, e.prototype.insertBefore = function (e, n, t) {
                    e && e.insertBefore(n, t)
                }, e.prototype.removeChild = function (e, n) {
                    e && e.removeChild(n)
                }, e.prototype.selectRootElement = function (e, n) {
                    var t = "string" == typeof e ? document.querySelector(e) : e;
                    if (!t) throw new Error('The selector "' + e + '" did not match any elements');
                    return n || (t.textContent = ""), t
                }, e.prototype.parentNode = function (e) {
                    return e.parentNode
                }, e.prototype.nextSibling = function (e) {
                    return e.nextSibling
                }, e.prototype.setAttribute = function (e, n, t, r) {
                    if (r) {
                        n = r + ":" + n;
                        var i = bc[r];
                        i ? e.setAttributeNS(i, n, t) : e.setAttribute(n, t)
                    } else e.setAttribute(n, t)
                }, e.prototype.removeAttribute = function (e, n, t) {
                    if (t) {
                        var r = bc[t];
                        r ? e.removeAttributeNS(r, n) : e.removeAttribute(t + ":" + n)
                    } else e.removeAttribute(n)
                }, e.prototype.addClass = function (e, n) {
                    e.classList.add(n)
                }, e.prototype.removeClass = function (e, n) {
                    e.classList.remove(n)
                }, e.prototype.setStyle = function (e, n, t, r) {
                    r & Ln.DashCase ? e.style.setProperty(n, t, r & Ln.Important ? "important" : "") : e.style[n] = t
                }, e.prototype.removeStyle = function (e, n, t) {
                    t & Ln.DashCase ? e.style.removeProperty(n) : e.style[n] = ""
                }, e.prototype.setProperty = function (e, n, t) {
                    Nc(n, "property"), e[n] = t
                }, e.prototype.setValue = function (e, n) {
                    e.nodeValue = n
                }, e.prototype.listen = function (e, n, t) {
                    return Nc(n, "listener"), "string" == typeof e ? this.eventManager.addGlobalEventListener(e, n, _c(t)) : this.eventManager.addEventListener(e, n, _c(t))
                }, e
            }(),
            wc = "@".charCodeAt(0);

        function Nc(e, n) {
            if (e.charCodeAt(0) === wc) throw new Error("Found the synthetic " + n + " " + e + '. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.')
        }
        var Pc, Dc = function (e) {
                function n(n, t, r, i) {
                    var l = e.call(this, n) || this;
                    l.component = r;
                    var o = Cc(i + "-" + r.id, r.styles, []);
                    return t.addStyles(o), l.contentAttr = Tc.replace(Oc, i + "-" + r.id), l.hostAttr = Rc.replace(Oc, i + "-" + r.id), l
                }
                return i(n, e), n.prototype.applyToHost = function (n) {
                    e.prototype.setAttribute.call(this, n, this.hostAttr, "")
                }, n.prototype.createElement = function (n, t) {
                    var r = e.prototype.createElement.call(this, n, t);
                    return e.prototype.setAttribute.call(this, r, this.contentAttr, ""), r
                }, n
            }(Ac),
            kc = function (e) {
                function n(n, t, r, i) {
                    var l = e.call(this, n) || this;
                    l.sharedStylesHost = t, l.hostEl = r, l.component = i, l.shadowRoot = i.encapsulation === Ue.ShadowDom ? r.attachShadow({
                        mode: "open"
                    }) : r.createShadowRoot(), l.sharedStylesHost.addHost(l.shadowRoot);
                    for (var o = Cc(i.id, i.styles, []), u = 0; u < o.length; u++) {
                        var s = document.createElement("style");
                        s.textContent = o[u], l.shadowRoot.appendChild(s)
                    }
                    return l
                }
                return i(n, e), n.prototype.nodeOrShadowRoot = function (e) {
                    return e === this.hostEl ? this.shadowRoot : e
                }, n.prototype.destroy = function () {
                    this.sharedStylesHost.removeHost(this.shadowRoot)
                }, n.prototype.appendChild = function (n, t) {
                    return e.prototype.appendChild.call(this, this.nodeOrShadowRoot(n), t)
                }, n.prototype.insertBefore = function (n, t, r) {
                    return e.prototype.insertBefore.call(this, this.nodeOrShadowRoot(n), t, r)
                }, n.prototype.removeChild = function (n, t) {
                    return e.prototype.removeChild.call(this, this.nodeOrShadowRoot(n), t)
                }, n.prototype.parentNode = function (n) {
                    return this.nodeOrShadowRoot(e.prototype.parentNode.call(this, this.nodeOrShadowRoot(n)))
                }, n
            }(Ac),
            Mc = "undefined" != typeof Zone && Zone.__symbol__ || function (e) {
                return "__zone_symbol__" + e
            },
            Lc = Mc("addEventListener"),
            xc = Mc("removeEventListener"),
            Fc = {},
            Uc = "__zone_symbol__propagationStopped";
        "undefined" != typeof Zone && Zone[Mc("BLACK_LISTED_EVENTS")] && (Pc = {});
        var Hc = function (e) {
                return !!Pc && Pc.hasOwnProperty(e)
            },
            Gc = function (e) {
                var n = Fc[e.type];
                if (n) {
                    var t = this[n];
                    if (t) {
                        var r = [e];
                        if (1 === t.length) return (o = t[0]).zone !== Zone.current ? o.zone.run(o.handler, this, r) : o.handler.apply(this, r);
                        for (var i = t.slice(), l = 0; l < i.length && !0 !== e[Uc]; l++) {
                            var o;
                            (o = i[l]).zone !== Zone.current ? o.zone.run(o.handler, this, r) : o.handler.apply(this, r)
                        }
                    }
                }
            },
            Bc = function (e) {
                function n(n, t, r) {
                    var i = e.call(this, n) || this;
                    return i.ngZone = t, r && function (e) {
                        return e === Js
                    }(r) || i.patchEvent(), i
                }
                return i(n, e), n.prototype.patchEvent = function () {
                    if ("undefined" != typeof Event && Event && Event.prototype && !Event.prototype.__zone_symbol__stopImmediatePropagation) {
                        var e = Event.prototype.__zone_symbol__stopImmediatePropagation = Event.prototype.stopImmediatePropagation;
                        Event.prototype.stopImmediatePropagation = function () {
                            this && (this[Uc] = !0), e && e.apply(this, arguments)
                        }
                    }
                }, n.prototype.supports = function (e) {
                    return !0
                }, n.prototype.addEventListener = function (e, n, t) {
                    var r = this,
                        i = t;
                    if (!e[Lc] || Zt.isInAngularZone() && !Hc(n)) e.addEventListener(n, i, !1);
                    else {
                        var l = Fc[n];
                        l || (l = Fc[n] = Mc("ANGULAR" + n + "FALSE"));
                        var o = e[l],
                            u = o && o.length > 0;
                        o || (o = e[l] = []);
                        var s = Hc(n) ? Zone.root : Zone.current;
                        if (0 === o.length) o.push({
                            zone: s,
                            handler: i
                        });
                        else {
                            for (var a = !1, c = 0; c < o.length; c++)
                                if (o[c].handler === i) {
                                    a = !0;
                                    break
                                } a || o.push({
                                zone: s,
                                handler: i
                            })
                        }
                        u || e[Lc](n, Gc, !1)
                    }
                    return function () {
                        return r.removeEventListener(e, n, i)
                    }
                }, n.prototype.removeEventListener = function (e, n, t) {
                    var r = e[xc];
                    if (!r) return e.removeEventListener.apply(e, [n, t, !1]);
                    var i = Fc[n],
                        l = i && e[i];
                    if (!l) return e.removeEventListener.apply(e, [n, t, !1]);
                    for (var o = !1, u = 0; u < l.length; u++)
                        if (l[u].handler === t) {
                            o = !0, l.splice(u, 1);
                            break
                        } o ? 0 === l.length && r.apply(e, [n, Gc, !1]) : e.removeEventListener.apply(e, [n, t, !1])
                }, n
            }(yc),
            Vc = {
                pan: !0,
                panstart: !0,
                panmove: !0,
                panend: !0,
                pancancel: !0,
                panleft: !0,
                panright: !0,
                panup: !0,
                pandown: !0,
                pinch: !0,
                pinchstart: !0,
                pinchmove: !0,
                pinchend: !0,
                pinchcancel: !0,
                pinchin: !0,
                pinchout: !0,
                press: !0,
                pressup: !0,
                rotate: !0,
                rotatestart: !0,
                rotatemove: !0,
                rotateend: !0,
                rotatecancel: !0,
                swipe: !0,
                swipeleft: !0,
                swiperight: !0,
                swipeup: !0,
                swipedown: !0,
                tap: !0
            },
            Wc = new ye("HammerGestureConfig"),
            jc = new ye("HammerLoader"),
            Yc = function () {
                function e() {
                    this.events = [], this.overrides = {}
                }
                return e.prototype.buildHammer = function (e) {
                    var n = new Hammer(e, this.options);
                    for (var t in n.get("pinch").set({
                            enable: !0
                        }), n.get("rotate").set({
                            enable: !0
                        }), this.overrides) n.get(t).set(this.overrides[t]);
                    return n
                }, e
            }(),
            zc = function (e) {
                function n(n, t, r, i) {
                    var l = e.call(this, n) || this;
                    return l._config = t, l.console = r, l.loader = i, l
                }
                return i(n, e), n.prototype.supports = function (e) {
                    return !(!Vc.hasOwnProperty(e.toLowerCase()) && !this.isCustomEvent(e) || !window.Hammer && !this.loader && (this.console.warn('The "' + e + '" event cannot be bound because Hammer.JS is not loaded and no custom loader has been specified.'), 1))
                }, n.prototype.addEventListener = function (e, n, t) {
                    var r = this,
                        i = this.manager.getZone();
                    if (n = n.toLowerCase(), !window.Hammer && this.loader) {
                        var l = !1,
                            o = function () {
                                l = !0
                            };
                        return this.loader().then(function () {
                                if (!window.Hammer) return r.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."), void(o = function () {});
                                l || (o = r.addEventListener(e, n, t))
                            }).catch(function () {
                                r.console.warn('The "' + n + '" event cannot be bound because the custom Hammer.JS loader failed.'), o = function () {}
                            }),
                            function () {
                                o()
                            }
                    }
                    return i.runOutsideAngular(function () {
                        var l = r._config.buildHammer(e),
                            o = function (e) {
                                i.runGuarded(function () {
                                    t(e)
                                })
                            };
                        return l.on(n, o),
                            function () {
                                l.off(n, o), "function" == typeof l.destroy && l.destroy()
                            }
                    })
                }, n.prototype.isCustomEvent = function (e) {
                    return this._config.events.indexOf(e) > -1
                }, n
            }(yc),
            Kc = ["alt", "control", "meta", "shift"],
            qc = {
                alt: function (e) {
                    return e.altKey
                },
                control: function (e) {
                    return e.ctrlKey
                },
                meta: function (e) {
                    return e.metaKey
                },
                shift: function (e) {
                    return e.shiftKey
                }
            },
            $c = function (e) {
                function n(n) {
                    return e.call(this, n) || this
                }
                var t;
                return i(n, e), t = n, n.prototype.supports = function (e) {
                    return null != t.parseEventName(e)
                }, n.prototype.addEventListener = function (e, n, r) {
                    var i = t.parseEventName(n),
                        l = t.eventCallback(i.fullKey, r, this.manager.getZone());
                    return this.manager.getZone().runOutsideAngular(function () {
                        return Ja().onAndCancel(e, i.domEventName, l)
                    })
                }, n.parseEventName = function (e) {
                    var n = e.toLowerCase().split("."),
                        r = n.shift();
                    if (0 === n.length || "keydown" !== r && "keyup" !== r) return null;
                    var i = t._normalizeKey(n.pop()),
                        l = "";
                    if (Kc.forEach(function (e) {
                            var t = n.indexOf(e);
                            t > -1 && (n.splice(t, 1), l += e + ".")
                        }), l += i, 0 != n.length || 0 === i.length) return null;
                    var o = {};
                    return o.domEventName = r, o.fullKey = l, o
                }, n.getEventFullKey = function (e) {
                    var n = "",
                        t = Ja().getEventKey(e);
                    return " " === (t = t.toLowerCase()) ? t = "space" : "." === t && (t = "dot"), Kc.forEach(function (r) {
                        r != t && (0, qc[r])(e) && (n += r + ".")
                    }), n += t
                }, n.eventCallback = function (e, n, r) {
                    return function (i) {
                        t.getEventFullKey(i) === e && r.runGuarded(function () {
                            return n(i)
                        })
                    }
                }, n._normalizeKey = function (e) {
                    switch (e) {
                        case "esc":
                            return "escape";
                        default:
                            return e
                    }
                }, n
            }(yc),
            Qc = function () {
                return function () {}
            }(),
            Zc = function (e) {
                function n(n) {
                    var t = e.call(this) || this;
                    return t._doc = n, t
                }
                return i(n, e), n.prototype.sanitize = function (e, n) {
                    if (null == n) return null;
                    switch (e) {
                        case Un.NONE:
                            return n;
                        case Un.HTML:
                            return n instanceof Jc ? n.changingThisBreaksApplicationSecurity : (this.checkNotSafeValue(n, "HTML"), function (e, n) {
                                var t = null;
                                try {
                                    Qn = Qn || new jn(e);
                                    var r = n ? String(n) : "";
                                    t = Qn.getInertBodyElement(r);
                                    var i = 5,
                                        l = r;
                                    do {
                                        if (0 === i) throw new Error("Failed to sanitize html because the input is unstable");
                                        i--, r = l, l = t.innerHTML, t = Qn.getInertBodyElement(r)
                                    } while (r !== l);
                                    var o = new ot,
                                        u = o.sanitizeChildren(ct(t) || t);
                                    return Wn() && o.sanitizedSomething && console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"), u
                                } finally {
                                    if (t)
                                        for (var s = ct(t) || t; s.firstChild;) s.removeChild(s.firstChild)
                                }
                            }(this._doc, String(n)));
                        case Un.STYLE:
                            return n instanceof ep ? n.changingThisBreaksApplicationSecurity : (this.checkNotSafeValue(n, "Style"), function (e) {
                                if (!(e = String(e).trim())) return "";
                                var n = e.match(gt);
                                return n && Kn(n[1]) === n[1] || e.match(ft) && function (e) {
                                    for (var n = !0, t = !0, r = 0; r < e.length; r++) {
                                        var i = e.charAt(r);
                                        "'" === i && t ? n = !n : '"' === i && n && (t = !t)
                                    }
                                    return n && t
                                }(e) ? e : (Wn() && console.warn("WARNING: sanitizing unsafe style value " + e + " (see http://g.co/ng/security#xss)."), "unsafe")
                            }(n));
                        case Un.SCRIPT:
                            if (n instanceof np) return n.changingThisBreaksApplicationSecurity;
                            throw this.checkNotSafeValue(n, "Script"), new Error("unsafe value used in a script context");
                        case Un.URL:
                            return n instanceof rp || n instanceof tp ? n.changingThisBreaksApplicationSecurity : (this.checkNotSafeValue(n, "URL"), Kn(String(n)));
                        case Un.RESOURCE_URL:
                            if (n instanceof rp) return n.changingThisBreaksApplicationSecurity;
                            throw this.checkNotSafeValue(n, "ResourceURL"), new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");
                        default:
                            throw new Error("Unexpected SecurityContext " + e + " (see http://g.co/ng/security#xss)")
                    }
                }, n.prototype.checkNotSafeValue = function (e, n) {
                    if (e instanceof Xc) throw new Error("Required a safe " + n + ", got a " + e.getTypeName() + " (see http://g.co/ng/security#xss)")
                }, n.prototype.bypassSecurityTrustHtml = function (e) {
                    return new Jc(e)
                }, n.prototype.bypassSecurityTrustStyle = function (e) {
                    return new ep(e)
                }, n.prototype.bypassSecurityTrustScript = function (e) {
                    return new np(e)
                }, n.prototype.bypassSecurityTrustUrl = function (e) {
                    return new tp(e)
                }, n.prototype.bypassSecurityTrustResourceUrl = function (e) {
                    return new rp(e)
                }, n
            }(Qc),
            Xc = function () {
                function e(e) {
                    this.changingThisBreaksApplicationSecurity = e
                }
                return e.prototype.toString = function () {
                    return "SafeValue must use [property]=binding: " + this.changingThisBreaksApplicationSecurity + " (see http://g.co/ng/security#xss)"
                }, e
            }(),
            Jc = function (e) {
                function n() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return i(n, e), n.prototype.getTypeName = function () {
                    return "HTML"
                }, n
            }(Xc),
            ep = function (e) {
                function n() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return i(n, e), n.prototype.getTypeName = function () {
                    return "Style"
                }, n
            }(Xc),
            np = function (e) {
                function n() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return i(n, e), n.prototype.getTypeName = function () {
                    return "Script"
                }, n
            }(Xc),
            tp = function (e) {
                function n() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return i(n, e), n.prototype.getTypeName = function () {
                    return "URL"
                }, n
            }(Xc),
            rp = function (e) {
                function n() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return i(n, e), n.prototype.getTypeName = function () {
                    return "ResourceURL"
                }, n
            }(Xc),
            ip = cr(zr, "browser", [{
                provide: Mt,
                useValue: Xs
            }, {
                provide: kt,
                useValue: function () {
                    lc.makeCurrent(), hc.init()
                },
                multi: !0
            }, {
                provide: hs,
                useClass: ac,
                deps: [uc]
            }, {
                provide: uc,
                useFactory: function () {
                    return document
                },
                deps: []
            }]);

        function lp() {
            return new Ct
        }
        var op = function () {
            function e(e) {
                if (e) throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")
            }
            var n;
            return n = e, e.withServerTransition = function (e) {
                return {
                    ngModule: n,
                    providers: [{
                        provide: Nt,
                        useValue: e.appId
                    }, {
                        provide: cc,
                        useExisting: Nt
                    }, pc]
                }
            }, e
        }();
        "undefined" != typeof window && window;
        var up = function () {
                return function (e, n) {
                    this.id = e, this.url = n
                }
            }(),
            sp = function (e) {
                function n(n, t, r, i) {
                    void 0 === r && (r = "imperative"), void 0 === i && (i = null);
                    var l = e.call(this, n, t) || this;
                    return l.navigationTrigger = r, l.restoredState = i, l
                }
                return i(n, e), n.prototype.toString = function () {
                    return "NavigationStart(id: " + this.id + ", url: '" + this.url + "')"
                }, n
            }(up),
            ap = function (e) {
                function n(n, t, r) {
                    var i = e.call(this, n, t) || this;
                    return i.urlAfterRedirects = r, i
                }
                return i(n, e), n.prototype.toString = function () {
                    return "NavigationEnd(id: " + this.id + ", url: '" + this.url + "', urlAfterRedirects: '" + this.urlAfterRedirects + "')"
                }, n
            }(up),
            cp = function (e) {
                function n(n, t, r) {
                    var i = e.call(this, n, t) || this;
                    return i.reason = r, i
                }
                return i(n, e), n.prototype.toString = function () {
                    return "NavigationCancel(id: " + this.id + ", url: '" + this.url + "')"
                }, n
            }(up),
            pp = function (e) {
                function n(n, t, r) {
                    var i = e.call(this, n, t) || this;
                    return i.error = r, i
                }
                return i(n, e), n.prototype.toString = function () {
                    return "NavigationError(id: " + this.id + ", url: '" + this.url + "', error: " + this.error + ")"
                }, n
            }(up),
            hp = function (e) {
                function n(n, t, r, i) {
                    var l = e.call(this, n, t) || this;
                    return l.urlAfterRedirects = r, l.state = i, l
                }
                return i(n, e), n.prototype.toString = function () {
                    return "RoutesRecognized(id: " + this.id + ", url: '" + this.url + "', urlAfterRedirects: '" + this.urlAfterRedirects + "', state: " + this.state + ")"
                }, n
            }(up),
            dp = function (e) {
                function n(n, t, r, i) {
                    var l = e.call(this, n, t) || this;
                    return l.urlAfterRedirects = r, l.state = i, l
                }
                return i(n, e), n.prototype.toString = function () {
                    return "GuardsCheckStart(id: " + this.id + ", url: '" + this.url + "', urlAfterRedirects: '" + this.urlAfterRedirects + "', state: " + this.state + ")"
                }, n
            }(up),
            fp = function (e) {
                function n(n, t, r, i, l) {
                    var o = e.call(this, n, t) || this;
                    return o.urlAfterRedirects = r, o.state = i, o.shouldActivate = l, o
                }
                return i(n, e), n.prototype.toString = function () {
                    return "GuardsCheckEnd(id: " + this.id + ", url: '" + this.url + "', urlAfterRedirects: '" + this.urlAfterRedirects + "', state: " + this.state + ", shouldActivate: " + this.shouldActivate + ")"
                }, n
            }(up),
            gp = function (e) {
                function n(n, t, r, i) {
                    var l = e.call(this, n, t) || this;
                    return l.urlAfterRedirects = r, l.state = i, l
                }
                return i(n, e), n.prototype.toString = function () {
                    return "ResolveStart(id: " + this.id + ", url: '" + this.url + "', urlAfterRedirects: '" + this.urlAfterRedirects + "', state: " + this.state + ")"
                }, n
            }(up),
            vp = function (e) {
                function n(n, t, r, i) {
                    var l = e.call(this, n, t) || this;
                    return l.urlAfterRedirects = r, l.state = i, l
                }
                return i(n, e), n.prototype.toString = function () {
                    return "ResolveEnd(id: " + this.id + ", url: '" + this.url + "', urlAfterRedirects: '" + this.urlAfterRedirects + "', state: " + this.state + ")"
                }, n
            }(up),
            mp = function () {
                function e(e) {
                    this.route = e
                }
                return e.prototype.toString = function () {
                    return "RouteConfigLoadStart(path: " + this.route.path + ")"
                }, e
            }(),
            yp = function () {
                function e(e) {
                    this.route = e
                }
                return e.prototype.toString = function () {
                    return "RouteConfigLoadEnd(path: " + this.route.path + ")"
                }, e
            }(),
            Sp = function () {
                function e(e) {
                    this.snapshot = e
                }
                return e.prototype.toString = function () {
                    return "ChildActivationStart(path: '" + (this.snapshot.routeConfig && this.snapshot.routeConfig.path || "") + "')"
                }, e
            }(),
            Ep = function () {
                function e(e) {
                    this.snapshot = e
                }
                return e.prototype.toString = function () {
                    return "ChildActivationEnd(path: '" + (this.snapshot.routeConfig && this.snapshot.routeConfig.path || "") + "')"
                }, e
            }(),
            bp = function () {
                function e(e) {
                    this.snapshot = e
                }
                return e.prototype.toString = function () {
                    return "ActivationStart(path: '" + (this.snapshot.routeConfig && this.snapshot.routeConfig.path || "") + "')"
                }, e
            }(),
            Op = function () {
                function e(e) {
                    this.snapshot = e
                }
                return e.prototype.toString = function () {
                    return "ActivationEnd(path: '" + (this.snapshot.routeConfig && this.snapshot.routeConfig.path || "") + "')"
                }, e
            }(),
            Rp = function () {
                function e(e, n, t) {
                    this.routerEvent = e, this.position = n, this.anchor = t
                }
                return e.prototype.toString = function () {
                    return "Scroll(anchor: '" + this.anchor + "', position: '" + (this.position ? this.position[0] + ", " + this.position[1] : null) + "')"
                }, e
            }(),
            Tp = function () {
                return function () {}
            }(),
            Cp = "primary",
            _p = function () {
                function e(e) {
                    this.params = e || {}
                }
                return e.prototype.has = function (e) {
                    return this.params.hasOwnProperty(e)
                }, e.prototype.get = function (e) {
                    if (this.has(e)) {
                        var n = this.params[e];
                        return Array.isArray(n) ? n[0] : n
                    }
                    return null
                }, e.prototype.getAll = function (e) {
                    if (this.has(e)) {
                        var n = this.params[e];
                        return Array.isArray(n) ? n : [n]
                    }
                    return []
                }, Object.defineProperty(e.prototype, "keys", {
                    get: function () {
                        return Object.keys(this.params)
                    },
                    enumerable: !0,
                    configurable: !0
                }), e
            }();

        function Ip(e) {
            return new _p(e)
        }
        var Ap = "ngNavigationCancelingError";

        function wp(e) {
            var n = Error("NavigationCancelingError: " + e);
            return n[Ap] = !0, n
        }

        function Np(e, n, t) {
            var r = t.path.split("/");
            if (r.length > e.length) return null;
            if ("full" === t.pathMatch && (n.hasChildren() || r.length < e.length)) return null;
            for (var i = {}, l = 0; l < r.length; l++) {
                var o = r[l],
                    u = e[l];
                if (o.startsWith(":")) i[o.substring(1)] = u;
                else if (o !== u.path) return null
            }
            return {
                consumed: e.slice(0, r.length),
                posParams: i
            }
        }
        var Pp = function () {
            return function (e, n) {
                this.routes = e, this.module = n
            }
        }();

        function Dp(e, n) {
            void 0 === n && (n = "");
            for (var t = 0; t < e.length; t++) {
                var r = e[t];
                kp(r, Mp(n, r))
            }
        }

        function kp(e, n) {
            if (!e) throw new Error("\n      Invalid configuration of route '" + n + "': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    ");
            if (Array.isArray(e)) throw new Error("Invalid configuration of route '" + n + "': Array cannot be specified");
            if (!e.component && !e.children && !e.loadChildren && e.outlet && e.outlet !== Cp) throw new Error("Invalid configuration of route '" + n + "': a componentless route without children or loadChildren cannot have a named outlet set");
            if (e.redirectTo && e.children) throw new Error("Invalid configuration of route '" + n + "': redirectTo and children cannot be used together");
            if (e.redirectTo && e.loadChildren) throw new Error("Invalid configuration of route '" + n + "': redirectTo and loadChildren cannot be used together");
            if (e.children && e.loadChildren) throw new Error("Invalid configuration of route '" + n + "': children and loadChildren cannot be used together");
            if (e.redirectTo && e.component) throw new Error("Invalid configuration of route '" + n + "': redirectTo and component cannot be used together");
            if (e.path && e.matcher) throw new Error("Invalid configuration of route '" + n + "': path and matcher cannot be used together");
            if (void 0 === e.redirectTo && !e.component && !e.children && !e.loadChildren) throw new Error("Invalid configuration of route '" + n + "'. One of the following must be provided: component, redirectTo, children or loadChildren");
            if (void 0 === e.path && void 0 === e.matcher) throw new Error("Invalid configuration of route '" + n + "': routes must have either a path or a matcher specified");
            if ("string" == typeof e.path && "/" === e.path.charAt(0)) throw new Error("Invalid configuration of route '" + n + "': path cannot start with a slash");
            if ("" === e.path && void 0 !== e.redirectTo && void 0 === e.pathMatch) throw new Error("Invalid configuration of route '{path: \"" + n + '", redirectTo: "' + e.redirectTo + "\"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.");
            if (void 0 !== e.pathMatch && "full" !== e.pathMatch && "prefix" !== e.pathMatch) throw new Error("Invalid configuration of route '" + n + "': pathMatch can only be set to 'prefix' or 'full'");
            e.children && Dp(e.children, n)
        }

        function Mp(e, n) {
            return n ? e || n.path ? e && !n.path ? e + "/" : !e && n.path ? n.path : e + "/" + n.path : "" : e
        }

        function Lp(e) {
            var n = e.children && e.children.map(Lp),
                t = n ? l({}, e, {
                    children: n
                }) : l({}, e);
            return !t.component && (n || t.loadChildren) && t.outlet && t.outlet !== Cp && (t.component = Tp), t
        }

        function xp(e, n) {
            var t, r = Object.keys(e),
                i = Object.keys(n);
            if (r.length != i.length) return !1;
            for (var l = 0; l < r.length; l++)
                if (e[t = r[l]] !== n[t]) return !1;
            return !0
        }

        function Fp(e) {
            return Array.prototype.concat.apply([], e)
        }

        function Up(e) {
            return e.length > 0 ? e[e.length - 1] : null
        }

        function Hp(e, n) {
            for (var t in e) e.hasOwnProperty(t) && n(e[t], t)
        }

        function Gp(e) {
            return It(e) ? e : _t(e) ? Z(Promise.resolve(e)) : ta(e)
        }

        function Bp(e, n, t) {
            return t ? function (e, n) {
                return xp(e, n)
            }(e.queryParams, n.queryParams) && function e(n, t) {
                if (!Yp(n.segments, t.segments)) return !1;
                if (n.numberOfChildren !== t.numberOfChildren) return !1;
                for (var r in t.children) {
                    if (!n.children[r]) return !1;
                    if (!e(n.children[r], t.children[r])) return !1
                }
                return !0
            }(e.root, n.root) : function (e, n) {
                return Object.keys(n).length <= Object.keys(e).length && Object.keys(n).every(function (t) {
                    return n[t] === e[t]
                })
            }(e.queryParams, n.queryParams) && function e(n, t) {
                return function n(t, r, i) {
                    if (t.segments.length > i.length) return !!Yp(o = t.segments.slice(0, i.length), i) && !r.hasChildren();
                    if (t.segments.length === i.length) {
                        if (!Yp(t.segments, i)) return !1;
                        for (var l in r.children) {
                            if (!t.children[l]) return !1;
                            if (!e(t.children[l], r.children[l])) return !1
                        }
                        return !0
                    }
                    var o = i.slice(0, t.segments.length),
                        u = i.slice(t.segments.length);
                    return !!Yp(t.segments, o) && !!t.children[Cp] && n(t.children[Cp], r, u)
                }(n, t, t.segments)
            }(e.root, n.root)
        }
        var Vp = function () {
                function e(e, n, t) {
                    this.root = e, this.queryParams = n, this.fragment = t
                }
                return Object.defineProperty(e.prototype, "queryParamMap", {
                    get: function () {
                        return this._queryParamMap || (this._queryParamMap = Ip(this.queryParams)), this._queryParamMap
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.toString = function () {
                    return $p.serialize(this)
                }, e
            }(),
            Wp = function () {
                function e(e, n) {
                    var t = this;
                    this.segments = e, this.children = n, this.parent = null, Hp(n, function (e, n) {
                        return e.parent = t
                    })
                }
                return e.prototype.hasChildren = function () {
                    return this.numberOfChildren > 0
                }, Object.defineProperty(e.prototype, "numberOfChildren", {
                    get: function () {
                        return Object.keys(this.children).length
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.toString = function () {
                    return Qp(this)
                }, e
            }(),
            jp = function () {
                function e(e, n) {
                    this.path = e, this.parameters = n
                }
                return Object.defineProperty(e.prototype, "parameterMap", {
                    get: function () {
                        return this._parameterMap || (this._parameterMap = Ip(this.parameters)), this._parameterMap
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.toString = function () {
                    return th(this)
                }, e
            }();

        function Yp(e, n) {
            return e.length === n.length && e.every(function (e, t) {
                return e.path === n[t].path
            })
        }

        function zp(e, n) {
            var t = [];
            return Hp(e.children, function (e, r) {
                r === Cp && (t = t.concat(n(e, r)))
            }), Hp(e.children, function (e, r) {
                r !== Cp && (t = t.concat(n(e, r)))
            }), t
        }
        var Kp = function () {
                return function () {}
            }(),
            qp = function () {
                function e() {}
                return e.prototype.parse = function (e) {
                    var n = new uh(e);
                    return new Vp(n.parseRootSegment(), n.parseQueryParams(), n.parseFragment())
                }, e.prototype.serialize = function (e) {
                    var n, t;
                    return "/" + function e(n, t) {
                        if (!n.hasChildren()) return Qp(n);
                        if (t) {
                            var r = n.children[Cp] ? e(n.children[Cp], !1) : "",
                                i = [];
                            return Hp(n.children, function (n, t) {
                                t !== Cp && i.push(t + ":" + e(n, !1))
                            }), i.length > 0 ? r + "(" + i.join("//") + ")" : r
                        }
                        var l = zp(n, function (t, r) {
                            return r === Cp ? [e(n.children[Cp], !1)] : [r + ":" + e(t, !1)]
                        });
                        return Qp(n) + "/(" + l.join("//") + ")"
                    }(e.root, !0) + (n = e.queryParams, (t = Object.keys(n).map(function (e) {
                        var t = n[e];
                        return Array.isArray(t) ? t.map(function (n) {
                            return Xp(e) + "=" + Xp(n)
                        }).join("&") : Xp(e) + "=" + Xp(t)
                    })).length ? "?" + t.join("&") : "") + ("string" == typeof e.fragment ? "#" + encodeURI(e.fragment) : "")
                }, e
            }(),
            $p = new qp;

        function Qp(e) {
            return e.segments.map(function (e) {
                return th(e)
            }).join("/")
        }

        function Zp(e) {
            return encodeURIComponent(e).replace(/%40/g, "@").replace(/%3A/gi, ":").replace(/%24/g, "$").replace(/%2C/gi, ",")
        }

        function Xp(e) {
            return Zp(e).replace(/%3B/gi, ";")
        }

        function Jp(e) {
            return Zp(e).replace(/\(/g, "%28").replace(/\)/g, "%29").replace(/%26/gi, "&")
        }

        function eh(e) {
            return decodeURIComponent(e)
        }

        function nh(e) {
            return eh(e.replace(/\+/g, "%20"))
        }

        function th(e) {
            return "" + Jp(e.path) + (n = e.parameters, Object.keys(n).map(function (e) {
                return ";" + Jp(e) + "=" + Jp(n[e])
            }).join(""));
            var n
        }
        var rh = /^[^\/()?;=#]+/;

        function ih(e) {
            var n = e.match(rh);
            return n ? n[0] : ""
        }
        var lh = /^[^=?&#]+/,
            oh = /^[^?&#]+/,
            uh = function () {
                function e(e) {
                    this.url = e, this.remaining = e
                }
                return e.prototype.parseRootSegment = function () {
                    return this.consumeOptional("/"), "" === this.remaining || this.peekStartsWith("?") || this.peekStartsWith("#") ? new Wp([], {}) : new Wp([], this.parseChildren())
                }, e.prototype.parseQueryParams = function () {
                    var e = {};
                    if (this.consumeOptional("?"))
                        do {
                            this.parseQueryParam(e)
                        } while (this.consumeOptional("&"));
                    return e
                }, e.prototype.parseFragment = function () {
                    return this.consumeOptional("#") ? decodeURIComponent(this.remaining) : null
                }, e.prototype.parseChildren = function () {
                    if ("" === this.remaining) return {};
                    this.consumeOptional("/");
                    var e = [];
                    for (this.peekStartsWith("(") || e.push(this.parseSegment()); this.peekStartsWith("/") && !this.peekStartsWith("//") && !this.peekStartsWith("/(");) this.capture("/"), e.push(this.parseSegment());
                    var n = {};
                    this.peekStartsWith("/(") && (this.capture("/"), n = this.parseParens(!0));
                    var t = {};
                    return this.peekStartsWith("(") && (t = this.parseParens(!1)), (e.length > 0 || Object.keys(n).length > 0) && (t[Cp] = new Wp(e, n)), t
                }, e.prototype.parseSegment = function () {
                    var e = ih(this.remaining);
                    if ("" === e && this.peekStartsWith(";")) throw new Error("Empty path url segment cannot have parameters: '" + this.remaining + "'.");
                    return this.capture(e), new jp(eh(e), this.parseMatrixParams())
                }, e.prototype.parseMatrixParams = function () {
                    for (var e = {}; this.consumeOptional(";");) this.parseParam(e);
                    return e
                }, e.prototype.parseParam = function (e) {
                    var n = ih(this.remaining);
                    if (n) {
                        this.capture(n);
                        var t = "";
                        if (this.consumeOptional("=")) {
                            var r = ih(this.remaining);
                            r && this.capture(t = r)
                        }
                        e[eh(n)] = eh(t)
                    }
                }, e.prototype.parseQueryParam = function (e) {
                    var n, t = (n = this.remaining.match(lh)) ? n[0] : "";
                    if (t) {
                        this.capture(t);
                        var r = "";
                        if (this.consumeOptional("=")) {
                            var i = function (e) {
                                var n = e.match(oh);
                                return n ? n[0] : ""
                            }(this.remaining);
                            i && this.capture(r = i)
                        }
                        var l = nh(t),
                            o = nh(r);
                        if (e.hasOwnProperty(l)) {
                            var u = e[l];
                            Array.isArray(u) || (e[l] = u = [u]), u.push(o)
                        } else e[l] = o
                    }
                }, e.prototype.parseParens = function (e) {
                    var n = {};
                    for (this.capture("("); !this.consumeOptional(")") && this.remaining.length > 0;) {
                        var t = ih(this.remaining),
                            r = this.remaining[t.length];
                        if ("/" !== r && ")" !== r && ";" !== r) throw new Error("Cannot parse url '" + this.url + "'");
                        var i = void 0;
                        t.indexOf(":") > -1 ? (i = t.substr(0, t.indexOf(":")), this.capture(i), this.capture(":")) : e && (i = Cp);
                        var l = this.parseChildren();
                        n[i] = 1 === Object.keys(l).length ? l[Cp] : new Wp([], l), this.consumeOptional("//")
                    }
                    return n
                }, e.prototype.peekStartsWith = function (e) {
                    return this.remaining.startsWith(e)
                }, e.prototype.consumeOptional = function (e) {
                    return !!this.peekStartsWith(e) && (this.remaining = this.remaining.substring(e.length), !0)
                }, e.prototype.capture = function (e) {
                    if (!this.consumeOptional(e)) throw new Error('Expected "' + e + '".')
                }, e
            }(),
            sh = function () {
                function e(e) {
                    this._root = e
                }
                return Object.defineProperty(e.prototype, "root", {
                    get: function () {
                        return this._root.value
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.parent = function (e) {
                    var n = this.pathFromRoot(e);
                    return n.length > 1 ? n[n.length - 2] : null
                }, e.prototype.children = function (e) {
                    var n = ah(e, this._root);
                    return n ? n.children.map(function (e) {
                        return e.value
                    }) : []
                }, e.prototype.firstChild = function (e) {
                    var n = ah(e, this._root);
                    return n && n.children.length > 0 ? n.children[0].value : null
                }, e.prototype.siblings = function (e) {
                    var n = ch(e, this._root);
                    return n.length < 2 ? [] : n[n.length - 2].children.map(function (e) {
                        return e.value
                    }).filter(function (n) {
                        return n !== e
                    })
                }, e.prototype.pathFromRoot = function (e) {
                    return ch(e, this._root).map(function (e) {
                        return e.value
                    })
                }, e
            }();

        function ah(e, n) {
            var t, r;
            if (e === n.value) return n;
            try {
                for (var i = s(n.children), l = i.next(); !l.done; l = i.next()) {
                    var o = ah(e, l.value);
                    if (o) return o
                }
            } catch (u) {
                t = {
                    error: u
                }
            } finally {
                try {
                    l && !l.done && (r = i.return) && r.call(i)
                } finally {
                    if (t) throw t.error
                }
            }
            return null
        }

        function ch(e, n) {
            var t, r;
            if (e === n.value) return [n];
            try {
                for (var i = s(n.children), l = i.next(); !l.done; l = i.next()) {
                    var o = ch(e, l.value);
                    if (o.length) return o.unshift(n), o
                }
            } catch (u) {
                t = {
                    error: u
                }
            } finally {
                try {
                    l && !l.done && (r = i.return) && r.call(i)
                } finally {
                    if (t) throw t.error
                }
            }
            return []
        }
        var ph = function () {
            function e(e, n) {
                this.value = e, this.children = n
            }
            return e.prototype.toString = function () {
                return "TreeNode(" + this.value + ")"
            }, e
        }();

        function hh(e) {
            var n = {};
            return e && e.children.forEach(function (e) {
                return n[e.value.outlet] = e
            }), n
        }
        var dh = function (e) {
            function n(n, t) {
                var r = e.call(this, n) || this;
                return r.snapshot = t, Sh(r, n), r
            }
            return i(n, e), n.prototype.toString = function () {
                return this.snapshot.toString()
            }, n
        }(sh);

        function fh(e, n) {
            var t = function (e, n) {
                    var t = new mh([], {}, {}, "", {}, Cp, n, null, e.root, -1, {});
                    return new yh("", new ph(t, []))
                }(e, n),
                r = new ra([new jp("", {})]),
                i = new ra({}),
                l = new ra({}),
                o = new ra({}),
                u = new ra(""),
                s = new gh(r, i, o, u, l, Cp, n, t.root);
            return s.snapshot = t.root, new dh(new ph(s, []), t)
        }
        var gh = function () {
            function e(e, n, t, r, i, l, o, u) {
                this.url = e, this.params = n, this.queryParams = t, this.fragment = r, this.data = i, this.outlet = l, this.component = o, this._futureSnapshot = u
            }
            return Object.defineProperty(e.prototype, "routeConfig", {
                get: function () {
                    return this._futureSnapshot.routeConfig
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "root", {
                get: function () {
                    return this._routerState.root
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "parent", {
                get: function () {
                    return this._routerState.parent(this)
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "firstChild", {
                get: function () {
                    return this._routerState.firstChild(this)
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "children", {
                get: function () {
                    return this._routerState.children(this)
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "pathFromRoot", {
                get: function () {
                    return this._routerState.pathFromRoot(this)
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "paramMap", {
                get: function () {
                    return this._paramMap || (this._paramMap = this.params.pipe(K(function (e) {
                        return Ip(e)
                    }))), this._paramMap
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "queryParamMap", {
                get: function () {
                    return this._queryParamMap || (this._queryParamMap = this.queryParams.pipe(K(function (e) {
                        return Ip(e)
                    }))), this._queryParamMap
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.toString = function () {
                return this.snapshot ? this.snapshot.toString() : "Future(" + this._futureSnapshot + ")"
            }, e
        }();

        function vh(e, n) {
            void 0 === n && (n = "emptyOnly");
            var t = e.pathFromRoot,
                r = 0;
            if ("always" !== n)
                for (r = t.length - 1; r >= 1;) {
                    var i = t[r],
                        o = t[r - 1];
                    if (i.routeConfig && "" === i.routeConfig.path) r--;
                    else {
                        if (o.component) break;
                        r--
                    }
                }
            return function (e) {
                return e.reduce(function (e, n) {
                    return {
                        params: l({}, e.params, n.params),
                        data: l({}, e.data, n.data),
                        resolve: l({}, e.resolve, n._resolvedData)
                    }
                }, {
                    params: {},
                    data: {},
                    resolve: {}
                })
            }(t.slice(r))
        }
        var mh = function () {
                function e(e, n, t, r, i, l, o, u, s, a, c) {
                    this.url = e, this.params = n, this.queryParams = t, this.fragment = r, this.data = i, this.outlet = l, this.component = o, this.routeConfig = u, this._urlSegment = s, this._lastPathIndex = a, this._resolve = c
                }
                return Object.defineProperty(e.prototype, "root", {
                    get: function () {
                        return this._routerState.root
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "parent", {
                    get: function () {
                        return this._routerState.parent(this)
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "firstChild", {
                    get: function () {
                        return this._routerState.firstChild(this)
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "children", {
                    get: function () {
                        return this._routerState.children(this)
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "pathFromRoot", {
                    get: function () {
                        return this._routerState.pathFromRoot(this)
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "paramMap", {
                    get: function () {
                        return this._paramMap || (this._paramMap = Ip(this.params)), this._paramMap
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "queryParamMap", {
                    get: function () {
                        return this._queryParamMap || (this._queryParamMap = Ip(this.queryParams)), this._queryParamMap
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.toString = function () {
                    return "Route(url:'" + this.url.map(function (e) {
                        return e.toString()
                    }).join("/") + "', path:'" + (this.routeConfig ? this.routeConfig.path : "") + "')"
                }, e
            }(),
            yh = function (e) {
                function n(n, t) {
                    var r = e.call(this, t) || this;
                    return r.url = n, Sh(r, t), r
                }
                return i(n, e), n.prototype.toString = function () {
                    return Eh(this._root)
                }, n
            }(sh);

        function Sh(e, n) {
            n.value._routerState = e, n.children.forEach(function (n) {
                return Sh(e, n)
            })
        }

        function Eh(e) {
            var n = e.children.length > 0 ? " { " + e.children.map(Eh).join(", ") + " } " : "";
            return "" + e.value + n
        }

        function bh(e) {
            if (e.snapshot) {
                var n = e.snapshot,
                    t = e._futureSnapshot;
                e.snapshot = t, xp(n.queryParams, t.queryParams) || e.queryParams.next(t.queryParams), n.fragment !== t.fragment && e.fragment.next(t.fragment), xp(n.params, t.params) || e.params.next(t.params),
                    function (e, n) {
                        if (e.length !== n.length) return !1;
                        for (var t = 0; t < e.length; ++t)
                            if (!xp(e[t], n[t])) return !1;
                        return !0
                    }(n.url, t.url) || e.url.next(t.url), xp(n.data, t.data) || e.data.next(t.data)
            } else e.snapshot = e._futureSnapshot, e.data.next(e._futureSnapshot.data)
        }

        function Oh(e, n) {
            var t, r;
            return xp(e.params, n.params) && Yp(t = e.url, r = n.url) && t.every(function (e, n) {
                return xp(e.parameters, r[n].parameters)
            }) && !(!e.parent != !n.parent) && (!e.parent || Oh(e.parent, n.parent))
        }

        function Rh(e) {
            return "object" == typeof e && null != e && !e.outlets && !e.segmentPath
        }

        function Th(e, n, t, r, i) {
            var l = {};
            return r && Hp(r, function (e, n) {
                l[n] = Array.isArray(e) ? e.map(function (e) {
                    return "" + e
                }) : "" + e
            }), new Vp(t.root === e ? n : function e(n, t, r) {
                var i = {};
                return Hp(n.children, function (n, l) {
                    i[l] = n === t ? r : e(n, t, r)
                }), new Wp(n.segments, i)
            }(t.root, e, n), l, i)
        }
        var Ch = function () {
                function e(e, n, t) {
                    if (this.isAbsolute = e, this.numberOfDoubleDots = n, this.commands = t, e && t.length > 0 && Rh(t[0])) throw new Error("Root segment cannot have matrix parameters");
                    var r = t.find(function (e) {
                        return "object" == typeof e && null != e && e.outlets
                    });
                    if (r && r !== Up(t)) throw new Error("{outlets:{}} has to be the last command")
                }
                return e.prototype.toRoot = function () {
                    return this.isAbsolute && 1 === this.commands.length && "/" == this.commands[0]
                }, e
            }(),
            _h = function () {
                return function (e, n, t) {
                    this.segmentGroup = e, this.processChildren = n, this.index = t
                }
            }();

        function Ih(e) {
            return "object" == typeof e && null != e && e.outlets ? e.outlets[Cp] : "" + e
        }

        function Ah(e, n, t) {
            if (e || (e = new Wp([], {})), 0 === e.segments.length && e.hasChildren()) return wh(e, n, t);
            var r = function (e, n, t) {
                    for (var r = 0, i = n, l = {
                            match: !1,
                            pathIndex: 0,
                            commandIndex: 0
                        }; i < e.segments.length;) {
                        if (r >= t.length) return l;
                        var o = e.segments[i],
                            u = Ih(t[r]),
                            s = r < t.length - 1 ? t[r + 1] : null;
                        if (i > 0 && void 0 === u) break;
                        if (u && s && "object" == typeof s && void 0 === s.outlets) {
                            if (!kh(u, s, o)) return l;
                            r += 2
                        } else {
                            if (!kh(u, {}, o)) return l;
                            r++
                        }
                        i++
                    }
                    return {
                        match: !0,
                        pathIndex: i,
                        commandIndex: r
                    }
                }(e, n, t),
                i = t.slice(r.commandIndex);
            if (r.match && r.pathIndex < e.segments.length) {
                var l = new Wp(e.segments.slice(0, r.pathIndex), {});
                return l.children[Cp] = new Wp(e.segments.slice(r.pathIndex), e.children), wh(l, 0, i)
            }
            return r.match && 0 === i.length ? new Wp(e.segments, {}) : r.match && !e.hasChildren() ? Nh(e, n, t) : r.match ? wh(e, 0, i) : Nh(e, n, t)
        }

        function wh(e, n, t) {
            if (0 === t.length) return new Wp(e.segments, {});
            var r = function (e) {
                    var n, t;
                    return "object" != typeof e[0] ? ((n = {})[Cp] = e, n) : void 0 === e[0].outlets ? ((t = {})[Cp] = e, t) : e[0].outlets
                }(t),
                i = {};
            return Hp(r, function (t, r) {
                null !== t && (i[r] = Ah(e.children[r], n, t))
            }), Hp(e.children, function (e, n) {
                void 0 === r[n] && (i[n] = e)
            }), new Wp(e.segments, i)
        }

        function Nh(e, n, t) {
            for (var r = e.segments.slice(0, n), i = 0; i < t.length;) {
                if ("object" == typeof t[i] && void 0 !== t[i].outlets) {
                    var l = Ph(t[i].outlets);
                    return new Wp(r, l)
                }
                if (0 === i && Rh(t[0])) r.push(new jp(e.segments[n].path, t[0])), i++;
                else {
                    var o = Ih(t[i]),
                        u = i < t.length - 1 ? t[i + 1] : null;
                    o && u && Rh(u) ? (r.push(new jp(o, Dh(u))), i += 2) : (r.push(new jp(o, {})), i++)
                }
            }
            return new Wp(r, {})
        }

        function Ph(e) {
            var n = {};
            return Hp(e, function (e, t) {
                null !== e && (n[t] = Nh(new Wp([], {}), 0, e))
            }), n
        }

        function Dh(e) {
            var n = {};
            return Hp(e, function (e, t) {
                return n[t] = "" + e
            }), n
        }

        function kh(e, n, t) {
            return e == t.path && xp(n, t.parameters)
        }
        var Mh = function () {
            function e(e, n, t, r) {
                this.routeReuseStrategy = e, this.futureState = n, this.currState = t, this.forwardEvent = r
            }
            return e.prototype.activate = function (e) {
                var n = this.futureState._root,
                    t = this.currState ? this.currState._root : null;
                this.deactivateChildRoutes(n, t, e), bh(this.futureState.root), this.activateChildRoutes(n, t, e)
            }, e.prototype.deactivateChildRoutes = function (e, n, t) {
                var r = this,
                    i = hh(n);
                e.children.forEach(function (e) {
                    var n = e.value.outlet;
                    r.deactivateRoutes(e, i[n], t), delete i[n]
                }), Hp(i, function (e, n) {
                    r.deactivateRouteAndItsChildren(e, t)
                })
            }, e.prototype.deactivateRoutes = function (e, n, t) {
                var r = e.value,
                    i = n ? n.value : null;
                if (r === i)
                    if (r.component) {
                        var l = t.getContext(r.outlet);
                        l && this.deactivateChildRoutes(e, n, l.children)
                    } else this.deactivateChildRoutes(e, n, t);
                else i && this.deactivateRouteAndItsChildren(n, t)
            }, e.prototype.deactivateRouteAndItsChildren = function (e, n) {
                this.routeReuseStrategy.shouldDetach(e.value.snapshot) ? this.detachAndStoreRouteSubtree(e, n) : this.deactivateRouteAndOutlet(e, n)
            }, e.prototype.detachAndStoreRouteSubtree = function (e, n) {
                var t = n.getContext(e.value.outlet);
                if (t && t.outlet) {
                    var r = t.outlet.detach(),
                        i = t.children.onOutletDeactivated();
                    this.routeReuseStrategy.store(e.value.snapshot, {
                        componentRef: r,
                        route: e,
                        contexts: i
                    })
                }
            }, e.prototype.deactivateRouteAndOutlet = function (e, n) {
                var t = this,
                    r = n.getContext(e.value.outlet);
                if (r) {
                    var i = hh(e),
                        l = e.value.component ? r.children : n;
                    Hp(i, function (e, n) {
                        return t.deactivateRouteAndItsChildren(e, l)
                    }), r.outlet && (r.outlet.deactivate(), r.children.onOutletDeactivated())
                }
            }, e.prototype.activateChildRoutes = function (e, n, t) {
                var r = this,
                    i = hh(n);
                e.children.forEach(function (e) {
                    r.activateRoutes(e, i[e.value.outlet], t), r.forwardEvent(new Op(e.value.snapshot))
                }), e.children.length && this.forwardEvent(new Ep(e.value.snapshot))
            }, e.prototype.activateRoutes = function (e, n, t) {
                var r = e.value,
                    i = n ? n.value : null;
                if (bh(r), r === i)
                    if (r.component) {
                        var l = t.getOrCreateContext(r.outlet);
                        this.activateChildRoutes(e, n, l.children)
                    } else this.activateChildRoutes(e, n, t);
                else if (r.component)
                    if (l = t.getOrCreateContext(r.outlet), this.routeReuseStrategy.shouldAttach(r.snapshot)) {
                        var o = this.routeReuseStrategy.retrieve(r.snapshot);
                        this.routeReuseStrategy.store(r.snapshot, null), l.children.onOutletReAttached(o.contexts), l.attachRef = o.componentRef, l.route = o.route.value, l.outlet && l.outlet.attach(o.componentRef, o.route.value), Lh(o.route)
                    } else {
                        var u = function (e) {
                                for (var n = r.snapshot.parent; n; n = n.parent) {
                                    var t = n.routeConfig;
                                    if (t && t._loadedConfig) return t._loadedConfig;
                                    if (t && t.component) return null
                                }
                                return null
                            }(),
                            s = u ? u.module.componentFactoryResolver : null;
                        l.attachRef = null, l.route = r, l.resolver = s, l.outlet && l.outlet.activateWith(r, s), this.activateChildRoutes(e, null, l.children)
                    }
                else this.activateChildRoutes(e, null, t)
            }, e
        }();

        function Lh(e) {
            bh(e.value), e.children.forEach(Lh)
        }

        function xh(e) {
            return "function" == typeof e
        }

        function Fh(e) {
            return e instanceof Vp
        }
        var Uh = function () {
                return function (e) {
                    this.segmentGroup = e || null
                }
            }(),
            Hh = function () {
                return function (e) {
                    this.urlTree = e
                }
            }();

        function Gh(e) {
            return new w(function (n) {
                return n.error(new Uh(e))
            })
        }

        function Bh(e) {
            return new w(function (n) {
                return n.error(new Hh(e))
            })
        }

        function Vh(e) {
            return new w(function (n) {
                return n.error(new Error("Only absolute redirects can have named outlets. redirectTo: '" + e + "'"))
            })
        }
        var Wh = function () {
            function e(e, n, t, r, i) {
                this.configLoader = n, this.urlSerializer = t, this.urlTree = r, this.config = i, this.allowRedirects = !0, this.ngModule = e.get(wn)
            }
            return e.prototype.apply = function () {
                var e = this;
                return this.expandSegmentGroup(this.ngModule, this.config, this.urlTree.root, Cp).pipe(K(function (n) {
                    return e.createUrlTree(n, e.urlTree.queryParams, e.urlTree.fragment)
                })).pipe(wa(function (n) {
                    if (n instanceof Hh) return e.allowRedirects = !1, e.match(n.urlTree);
                    if (n instanceof Uh) throw e.noMatchError(n);
                    throw n
                }))
            }, e.prototype.match = function (e) {
                var n = this;
                return this.expandSegmentGroup(this.ngModule, this.config, e.root, Cp).pipe(K(function (t) {
                    return n.createUrlTree(t, e.queryParams, e.fragment)
                })).pipe(wa(function (e) {
                    if (e instanceof Uh) throw n.noMatchError(e);
                    throw e
                }))
            }, e.prototype.noMatchError = function (e) {
                return new Error("Cannot match any routes. URL Segment: '" + e.segmentGroup + "'")
            }, e.prototype.createUrlTree = function (e, n, t) {
                var r, i = e.segments.length > 0 ? new Wp([], ((r = {})[Cp] = e, r)) : e;
                return new Vp(i, n, t)
            }, e.prototype.expandSegmentGroup = function (e, n, t, r) {
                return 0 === t.segments.length && t.hasChildren() ? this.expandChildren(e, n, t).pipe(K(function (e) {
                    return new Wp([], e)
                })) : this.expandSegment(e, t, n, t.segments, r, !0)
            }, e.prototype.expandChildren = function (e, n, t) {
                var r = this;
                return function (t, i) {
                    if (0 === Object.keys(t).length) return ta({});
                    var l = [],
                        o = [],
                        u = {};
                    return Hp(t, function (t, i) {
                        var s, a, c = (s = i, a = t, r.expandSegmentGroup(e, n, a, s)).pipe(K(function (e) {
                            return u[i] = e
                        }));
                        i === Cp ? l.push(c) : o.push(c)
                    }), ta.apply(null, l.concat(o)).pipe(ha(), Aa(), K(function () {
                        return u
                    }))
                }(t.children)
            }, e.prototype.expandSegment = function (e, n, t, r, i, l) {
                var o = this;
                return ta.apply(void 0, c(t)).pipe(K(function (u) {
                    return o.expandSegmentAgainstRoute(e, n, t, u, r, i, l).pipe(wa(function (e) {
                        if (e instanceof Uh) return ta(null);
                        throw e
                    }))
                }), ha(), La(function (e) {
                    return !!e
                }), wa(function (e, t) {
                    if (e instanceof la || "EmptyError" === e.name) {
                        if (o.noLeftoversInUrl(n, r, i)) return ta(new Wp([], {}));
                        throw new Uh(n)
                    }
                    throw e
                }))
            }, e.prototype.noLeftoversInUrl = function (e, n, t) {
                return 0 === n.length && !e.children[t]
            }, e.prototype.expandSegmentAgainstRoute = function (e, n, t, r, i, l, o) {
                return Kh(r) !== l ? Gh(n) : void 0 === r.redirectTo ? this.matchSegmentAgainstRoute(e, n, r, i) : o && this.allowRedirects ? this.expandSegmentAgainstRouteUsingRedirect(e, n, t, r, i, l) : Gh(n)
            }, e.prototype.expandSegmentAgainstRouteUsingRedirect = function (e, n, t, r, i, l) {
                return "**" === r.path ? this.expandWildCardWithParamsAgainstRouteUsingRedirect(e, t, r, l) : this.expandRegularSegmentAgainstRouteUsingRedirect(e, n, t, r, i, l)
            }, e.prototype.expandWildCardWithParamsAgainstRouteUsingRedirect = function (e, n, t, r) {
                var i = this,
                    l = this.applyRedirectCommands([], t.redirectTo, {});
                return t.redirectTo.startsWith("/") ? Bh(l) : this.lineralizeSegments(t, l).pipe(X(function (t) {
                    var l = new Wp(t, {});
                    return i.expandSegment(e, l, n, t, r, !1)
                }))
            }, e.prototype.expandRegularSegmentAgainstRouteUsingRedirect = function (e, n, t, r, i, l) {
                var o = this,
                    u = jh(n, r, i),
                    s = u.consumedSegments,
                    a = u.lastChild,
                    c = u.positionalParamSegments;
                if (!u.matched) return Gh(n);
                var p = this.applyRedirectCommands(s, r.redirectTo, c);
                return r.redirectTo.startsWith("/") ? Bh(p) : this.lineralizeSegments(r, p).pipe(X(function (r) {
                    return o.expandSegment(e, n, t, r.concat(i.slice(a)), l, !1)
                }))
            }, e.prototype.matchSegmentAgainstRoute = function (e, n, t, r) {
                var i = this;
                if ("**" === t.path) return t.loadChildren ? this.configLoader.load(e.injector, t).pipe(K(function (e) {
                    return t._loadedConfig = e, new Wp(r, {})
                })) : ta(new Wp(r, {}));
                var o = jh(n, t, r),
                    u = o.consumedSegments,
                    a = o.lastChild;
                if (!o.matched) return Gh(n);
                var c = r.slice(a);
                return this.getChildConfig(e, t, r).pipe(X(function (e) {
                    var t = e.module,
                        r = e.routes,
                        o = function (e, n, t, r) {
                            return t.length > 0 && function (e, n, t) {
                                return r.some(function (t) {
                                    return zh(e, n, t) && Kh(t) !== Cp
                                })
                            }(e, t) ? {
                                segmentGroup: Yh(new Wp(n, function (e, n) {
                                    var t, r, i = {};
                                    i[Cp] = n;
                                    try {
                                        for (var l = s(e), o = l.next(); !o.done; o = l.next()) {
                                            var u = o.value;
                                            "" === u.path && Kh(u) !== Cp && (i[Kh(u)] = new Wp([], {}))
                                        }
                                    } catch (a) {
                                        t = {
                                            error: a
                                        }
                                    } finally {
                                        try {
                                            o && !o.done && (r = l.return) && r.call(l)
                                        } finally {
                                            if (t) throw t.error
                                        }
                                    }
                                    return i
                                }(r, new Wp(t, e.children)))),
                                slicedSegments: []
                            } : 0 === t.length && function (e, n, t) {
                                return r.some(function (t) {
                                    return zh(e, n, t)
                                })
                            }(e, t) ? {
                                segmentGroup: Yh(new Wp(e.segments, function (e, n, t, r) {
                                    var i, o, u = {};
                                    try {
                                        for (var a = s(t), c = a.next(); !c.done; c = a.next()) {
                                            var p = c.value;
                                            zh(e, n, p) && !r[Kh(p)] && (u[Kh(p)] = new Wp([], {}))
                                        }
                                    } catch (h) {
                                        i = {
                                            error: h
                                        }
                                    } finally {
                                        try {
                                            c && !c.done && (o = a.return) && o.call(a)
                                        } finally {
                                            if (i) throw i.error
                                        }
                                    }
                                    return l({}, r, u)
                                }(e, t, r, e.children))),
                                slicedSegments: t
                            } : {
                                segmentGroup: e,
                                slicedSegments: t
                            }
                        }(n, u, c, r),
                        a = o.segmentGroup,
                        p = o.slicedSegments;
                    return 0 === p.length && a.hasChildren() ? i.expandChildren(t, r, a).pipe(K(function (e) {
                        return new Wp(u, e)
                    })) : 0 === r.length && 0 === p.length ? ta(new Wp(u, {})) : i.expandSegment(t, a, r, p, Cp, !0).pipe(K(function (e) {
                        return new Wp(u.concat(e.segments), e.children)
                    }))
                }))
            }, e.prototype.getChildConfig = function (e, n, t) {
                var r = this;
                return n.children ? ta(new Pp(n.children, e)) : n.loadChildren ? void 0 !== n._loadedConfig ? ta(n._loadedConfig) : function (e, n, t) {
                    var r, i = n.canLoad;
                    return i && 0 !== i.length ? Z(i).pipe(K(function (r) {
                        var i, l = e.get(r);
                        if (function (e) {
                                return e && xh(e.canLoad)
                            }(l)) i = l.canLoad(n, t);
                        else {
                            if (!xh(l)) throw new Error("Invalid CanLoad guard");
                            i = l(n, t)
                        }
                        return Gp(i)
                    })).pipe(ha(), (r = function (e) {
                        return !0 === e
                    }, function (e) {
                        return e.lift(new xa(r, void 0, e))
                    })) : ta(!0)
                }(e.injector, n, t).pipe(X(function (t) {
                    return t ? r.configLoader.load(e.injector, n).pipe(K(function (e) {
                        return n._loadedConfig = e, e
                    })) : function (e) {
                        return new w(function (n) {
                            return n.error(wp("Cannot load children because the guard of the route \"path: '" + e.path + "'\" returned false"))
                        })
                    }(n)
                })) : ta(new Pp([], e))
            }, e.prototype.lineralizeSegments = function (e, n) {
                for (var t = [], r = n.root;;) {
                    if (t = t.concat(r.segments), 0 === r.numberOfChildren) return ta(t);
                    if (r.numberOfChildren > 1 || !r.children[Cp]) return Vh(e.redirectTo);
                    r = r.children[Cp]
                }
            }, e.prototype.applyRedirectCommands = function (e, n, t) {
                return this.applyRedirectCreatreUrlTree(n, this.urlSerializer.parse(n), e, t)
            }, e.prototype.applyRedirectCreatreUrlTree = function (e, n, t, r) {
                var i = this.createSegmentGroup(e, n.root, t, r);
                return new Vp(i, this.createQueryParams(n.queryParams, this.urlTree.queryParams), n.fragment)
            }, e.prototype.createQueryParams = function (e, n) {
                var t = {};
                return Hp(e, function (e, r) {
                    if ("string" == typeof e && e.startsWith(":")) {
                        var i = e.substring(1);
                        t[r] = n[i]
                    } else t[r] = e
                }), t
            }, e.prototype.createSegmentGroup = function (e, n, t, r) {
                var i = this,
                    l = this.createSegments(e, n.segments, t, r),
                    o = {};
                return Hp(n.children, function (n, l) {
                    o[l] = i.createSegmentGroup(e, n, t, r)
                }), new Wp(l, o)
            }, e.prototype.createSegments = function (e, n, t, r) {
                var i = this;
                return n.map(function (n) {
                    return n.path.startsWith(":") ? i.findPosParam(e, n, r) : i.findOrReturn(n, t)
                })
            }, e.prototype.findPosParam = function (e, n, t) {
                var r = t[n.path.substring(1)];
                if (!r) throw new Error("Cannot redirect to '" + e + "'. Cannot find '" + n.path + "'.");
                return r
            }, e.prototype.findOrReturn = function (e, n) {
                var t, r, i = 0;
                try {
                    for (var l = s(n), o = l.next(); !o.done; o = l.next()) {
                        var u = o.value;
                        if (u.path === e.path) return n.splice(i), u;
                        i++
                    }
                } catch (a) {
                    t = {
                        error: a
                    }
                } finally {
                    try {
                        o && !o.done && (r = l.return) && r.call(l)
                    } finally {
                        if (t) throw t.error
                    }
                }
                return e
            }, e
        }();

        function jh(e, n, t) {
            if ("" === n.path) return "full" === n.pathMatch && (e.hasChildren() || t.length > 0) ? {
                matched: !1,
                consumedSegments: [],
                lastChild: 0,
                positionalParamSegments: {}
            } : {
                matched: !0,
                consumedSegments: [],
                lastChild: 0,
                positionalParamSegments: {}
            };
            var r = (n.matcher || Np)(t, e, n);
            return r ? {
                matched: !0,
                consumedSegments: r.consumed,
                lastChild: r.consumed.length,
                positionalParamSegments: r.posParams
            } : {
                matched: !1,
                consumedSegments: [],
                lastChild: 0,
                positionalParamSegments: {}
            }
        }

        function Yh(e) {
            if (1 === e.numberOfChildren && e.children[Cp]) {
                var n = e.children[Cp];
                return new Wp(e.segments.concat(n.segments), n.children)
            }
            return e
        }

        function zh(e, n, t) {
            return (!(e.hasChildren() || n.length > 0) || "full" !== t.pathMatch) && "" === t.path && void 0 !== t.redirectTo
        }

        function Kh(e) {
            return e.outlet || Cp
        }
        var qh = function () {
                return function (e) {
                    this.path = e, this.route = this.path[this.path.length - 1]
                }
            }(),
            $h = function () {
                return function (e, n) {
                    this.component = e, this.route = n
                }
            }();

        function Qh(e, n, t) {
            var r = function (e) {
                if (!e) return null;
                for (var n = e.parent; n; n = n.parent) {
                    var t = n.routeConfig;
                    if (t && t._loadedConfig) return t._loadedConfig
                }
                return null
            }(n);
            return (r ? r.module.injector : t).get(e)
        }

        function Zh(e, n, t, r, i) {
            void 0 === i && (i = {
                canDeactivateChecks: [],
                canActivateChecks: []
            });
            var l = hh(n);
            return e.children.forEach(function (e) {
                ! function (e, n, t, r, i) {
                    void 0 === i && (i = {
                        canDeactivateChecks: [],
                        canActivateChecks: []
                    });
                    var l = e.value,
                        o = n ? n.value : null,
                        u = t ? t.getContext(e.value.outlet) : null;
                    if (o && l.routeConfig === o.routeConfig) {
                        var s = function (e, n, t) {
                            if ("function" == typeof t) return t(e, n);
                            switch (t) {
                                case "pathParamsChange":
                                    return !Yp(e.url, n.url);
                                case "pathParamsOrQueryParamsChange":
                                    return !Yp(e.url, n.url) || !xp(e.queryParams, n.queryParams);
                                case "always":
                                    return !0;
                                case "paramsOrQueryParamsChange":
                                    return !Oh(e, n) || !xp(e.queryParams, n.queryParams);
                                case "paramsChange":
                                default:
                                    return !Oh(e, n)
                            }
                        }(o, l, l.routeConfig.runGuardsAndResolvers);
                        s ? i.canActivateChecks.push(new qh(r)) : (l.data = o.data, l._resolvedData = o._resolvedData), Zh(e, n, l.component ? u ? u.children : null : t, r, i), s && i.canDeactivateChecks.push(new $h(u && u.outlet && u.outlet.component || null, o))
                    } else o && Xh(n, u, i), i.canActivateChecks.push(new qh(r)), Zh(e, null, l.component ? u ? u.children : null : t, r, i)
                }(e, l[e.value.outlet], t, r.concat([e.value]), i), delete l[e.value.outlet]
            }), Hp(l, function (e, n) {
                return Xh(e, t.getContext(n), i)
            }), i
        }

        function Xh(e, n, t) {
            var r = hh(e),
                i = e.value;
            Hp(r, function (e, r) {
                Xh(e, i.component ? n ? n.children.getContext(r) : null : n, t)
            }), t.canDeactivateChecks.push(new $h(i.component && n && n.outlet && n.outlet.isActivated ? n.outlet.component : null, i))
        }
        var Jh = Symbol("INITIAL_VALUE");

        function ed() {
            return Ua(function (e) {
                return (function () {
                    for (var e = [], n = 0; n < arguments.length; n++) e[n] = arguments[n];
                    var t = null,
                        r = null;
                    return F(e[e.length - 1]) && (r = e.pop()), "function" == typeof e[e.length - 1] && (t = e.pop()), 1 === e.length && p(e[0]) && (e = e[0]), re(e, r).lift(new ua(t))
                }).apply(void 0, c(e.map(function (e) {
                    return e.pipe(Da(1), Va(Jh))
                }))).pipe(Wa(function (e, n) {
                    var t = !1;
                    return n.reduce(function (e, r, i) {
                        if (e !== Jh) return e;
                        if (r === Jh && (t = !0), !t) {
                            if (!1 === r) return r;
                            if (i === n.length - 1 || Fh(r)) return r
                        }
                        return e
                    }, e)
                }, Jh), da(function (e) {
                    return e !== Jh
                }), K(function (e) {
                    return Fh(e) ? e : !0 === e
                }), Da(1))
            })
        }

        function nd(e, n) {
            return null !== e && n && n(new bp(e)), ta(!0)
        }

        function td(e, n) {
            return null !== e && n && n(new Sp(e)), ta(!0)
        }

        function rd(e, n, t) {
            var r = n.routeConfig ? n.routeConfig.canActivate : null;
            return r && 0 !== r.length ? ta(r.map(function (r) {
                return pa(function () {
                    var i, l = Qh(r, n, t);
                    if (function (e) {
                            return e && xh(e.canActivate)
                        }(l)) i = Gp(l.canActivate(n, e));
                    else {
                        if (!xh(l)) throw new Error("Invalid CanActivate guard");
                        i = Gp(l(n, e))
                    }
                    return i.pipe(La())
                })
            })).pipe(ed()) : ta(!0)
        }

        function id(e, n, t) {
            var r = n[n.length - 1],
                i = n.slice(0, n.length - 1).reverse().map(function (e) {
                    return function (e) {
                        var n = e.routeConfig ? e.routeConfig.canActivateChild : null;
                        return n && 0 !== n.length ? {
                            node: e,
                            guards: n
                        } : null
                    }(e)
                }).filter(function (e) {
                    return null !== e
                }).map(function (n) {
                    return pa(function () {
                        return ta(n.guards.map(function (i) {
                            var l, o = Qh(i, n.node, t);
                            if (function (e) {
                                    return e && xh(e.canActivateChild)
                                }(o)) l = Gp(o.canActivateChild(r, e));
                            else {
                                if (!xh(o)) throw new Error("Invalid CanActivateChild guard");
                                l = Gp(o(r, e))
                            }
                            return l.pipe(La())
                        })).pipe(ed())
                    })
                });
            return ta(i).pipe(ed())
        }
        var ld = function () {
                return function () {}
            }(),
            od = function () {
                function e(e, n, t, r, i, l) {
                    this.rootComponentType = e, this.config = n, this.urlTree = t, this.url = r, this.paramsInheritanceStrategy = i, this.relativeLinkResolution = l
                }
                return e.prototype.recognize = function () {
                    try {
                        var e = ad(this.urlTree.root, [], [], this.config, this.relativeLinkResolution).segmentGroup,
                            n = this.processSegmentGroup(this.config, e, Cp),
                            t = new mh([], Object.freeze({}), Object.freeze(l({}, this.urlTree.queryParams)), this.urlTree.fragment, {}, Cp, this.rootComponentType, null, this.urlTree.root, -1, {}),
                            r = new ph(t, n),
                            i = new yh(this.url, r);
                        return this.inheritParamsAndData(i._root), ta(i)
                    } catch (o) {
                        return new w(function (e) {
                            return e.error(o)
                        })
                    }
                }, e.prototype.inheritParamsAndData = function (e) {
                    var n = this,
                        t = e.value,
                        r = vh(t, this.paramsInheritanceStrategy);
                    t.params = Object.freeze(r.params), t.data = Object.freeze(r.data), e.children.forEach(function (e) {
                        return n.inheritParamsAndData(e)
                    })
                }, e.prototype.processSegmentGroup = function (e, n, t) {
                    return 0 === n.segments.length && n.hasChildren() ? this.processChildren(e, n) : this.processSegment(e, n, n.segments, t)
                }, e.prototype.processChildren = function (e, n) {
                    var t, r = this,
                        i = zp(n, function (n, t) {
                            return r.processSegmentGroup(e, n, t)
                        });
                    return t = {}, i.forEach(function (e) {
                        var n = t[e.value.outlet];
                        if (n) {
                            var r = n.url.map(function (e) {
                                    return e.toString()
                                }).join("/"),
                                i = e.value.url.map(function (e) {
                                    return e.toString()
                                }).join("/");
                            throw new Error("Two segments cannot have the same outlet name: '" + r + "' and '" + i + "'.")
                        }
                        t[e.value.outlet] = e.value
                    }), i.sort(function (e, n) {
                        return e.value.outlet === Cp ? -1 : n.value.outlet === Cp ? 1 : e.value.outlet.localeCompare(n.value.outlet)
                    }), i
                }, e.prototype.processSegment = function (e, n, t, r) {
                    var i, l;
                    try {
                        for (var o = s(e), u = o.next(); !u.done; u = o.next()) {
                            var a = u.value;
                            try {
                                return this.processSegmentAgainstRoute(a, n, t, r)
                            } catch (c) {
                                if (!(c instanceof ld)) throw c
                            }
                        }
                    } catch (p) {
                        i = {
                            error: p
                        }
                    } finally {
                        try {
                            u && !u.done && (l = o.return) && l.call(o)
                        } finally {
                            if (i) throw i.error
                        }
                    }
                    if (this.noLeftoversInUrl(n, t, r)) return [];
                    throw new ld
                }, e.prototype.noLeftoversInUrl = function (e, n, t) {
                    return 0 === n.length && !e.children[t]
                }, e.prototype.processSegmentAgainstRoute = function (e, n, t, r) {
                    if (e.redirectTo) throw new ld;
                    if ((e.outlet || Cp) !== r) throw new ld;
                    var i, o = [],
                        u = [];
                    if ("**" === e.path) {
                        var s = t.length > 0 ? Up(t).parameters : {};
                        i = new mh(t, s, Object.freeze(l({}, this.urlTree.queryParams)), this.urlTree.fragment, hd(e), r, e.component, e, ud(n), sd(n) + t.length, dd(e))
                    } else {
                        var a = function (e, n, t) {
                            if ("" === n.path) {
                                if ("full" === n.pathMatch && (e.hasChildren() || t.length > 0)) throw new ld;
                                return {
                                    consumedSegments: [],
                                    lastChild: 0,
                                    parameters: {}
                                }
                            }
                            var r = (n.matcher || Np)(t, e, n);
                            if (!r) throw new ld;
                            var i = {};
                            Hp(r.posParams, function (e, n) {
                                i[n] = e.path
                            });
                            var o = r.consumed.length > 0 ? l({}, i, r.consumed[r.consumed.length - 1].parameters) : i;
                            return {
                                consumedSegments: r.consumed,
                                lastChild: r.consumed.length,
                                parameters: o
                            }
                        }(n, e, t);
                        o = a.consumedSegments, u = t.slice(a.lastChild), i = new mh(o, a.parameters, Object.freeze(l({}, this.urlTree.queryParams)), this.urlTree.fragment, hd(e), r, e.component, e, ud(n), sd(n) + o.length, dd(e))
                    }
                    var c = function (e) {
                            return e.children ? e.children : e.loadChildren ? e._loadedConfig.routes : []
                        }(e),
                        p = ad(n, o, u, c, this.relativeLinkResolution),
                        h = p.segmentGroup,
                        d = p.slicedSegments;
                    if (0 === d.length && h.hasChildren()) {
                        var f = this.processChildren(c, h);
                        return [new ph(i, f)]
                    }
                    if (0 === c.length && 0 === d.length) return [new ph(i, [])];
                    var g = this.processSegment(c, h, d, Cp);
                    return [new ph(i, g)]
                }, e
            }();

        function ud(e) {
            for (var n = e; n._sourceSegment;) n = n._sourceSegment;
            return n
        }

        function sd(e) {
            for (var n = e, t = n._segmentIndexShift ? n._segmentIndexShift : 0; n._sourceSegment;) t += (n = n._sourceSegment)._segmentIndexShift ? n._segmentIndexShift : 0;
            return t - 1
        }

        function ad(e, n, t, r, i) {
            if (t.length > 0 && function (e, n, t) {
                    return r.some(function (t) {
                        return cd(e, n, t) && pd(t) !== Cp
                    })
                }(e, t)) {
                var o = new Wp(n, function (e, n, t, r) {
                    var i, l, o = {};
                    o[Cp] = r, r._sourceSegment = e, r._segmentIndexShift = n.length;
                    try {
                        for (var u = s(t), a = u.next(); !a.done; a = u.next()) {
                            var c = a.value;
                            if ("" === c.path && pd(c) !== Cp) {
                                var p = new Wp([], {});
                                p._sourceSegment = e, p._segmentIndexShift = n.length, o[pd(c)] = p
                            }
                        }
                    } catch (h) {
                        i = {
                            error: h
                        }
                    } finally {
                        try {
                            a && !a.done && (l = u.return) && l.call(u)
                        } finally {
                            if (i) throw i.error
                        }
                    }
                    return o
                }(e, n, r, new Wp(t, e.children)));
                return o._sourceSegment = e, o._segmentIndexShift = n.length, {
                    segmentGroup: o,
                    slicedSegments: []
                }
            }
            if (0 === t.length && function (e, n, t) {
                    return r.some(function (t) {
                        return cd(e, n, t)
                    })
                }(e, t)) {
                var u = new Wp(e.segments, function (e, n, t, r, i, o) {
                    var u, a, c = {};
                    try {
                        for (var p = s(r), h = p.next(); !h.done; h = p.next()) {
                            var d = h.value;
                            if (cd(e, t, d) && !i[pd(d)]) {
                                var f = new Wp([], {});
                                f._sourceSegment = e, f._segmentIndexShift = "legacy" === o ? e.segments.length : n.length, c[pd(d)] = f
                            }
                        }
                    } catch (g) {
                        u = {
                            error: g
                        }
                    } finally {
                        try {
                            h && !h.done && (a = p.return) && a.call(p)
                        } finally {
                            if (u) throw u.error
                        }
                    }
                    return l({}, i, c)
                }(e, n, t, r, e.children, i));
                return u._sourceSegment = e, u._segmentIndexShift = n.length, {
                    segmentGroup: u,
                    slicedSegments: t
                }
            }
            var a = new Wp(e.segments, e.children);
            return a._sourceSegment = e, a._segmentIndexShift = n.length, {
                segmentGroup: a,
                slicedSegments: t
            }
        }

        function cd(e, n, t) {
            return (!(e.hasChildren() || n.length > 0) || "full" !== t.pathMatch) && "" === t.path && void 0 === t.redirectTo
        }

        function pd(e) {
            return e.outlet || Cp
        }

        function hd(e) {
            return e.data || {}
        }

        function dd(e) {
            return e.resolve || {}
        }

        function fd(e, n, t, r) {
            var i = Qh(e, n, r);
            return Gp(i.resolve ? i.resolve(n, t) : i(n, t))
        }

        function gd(e) {
            return function (n) {
                return n.pipe(Ua(function (n) {
                    var t = e(n);
                    return t ? Z(t).pipe(K(function () {
                        return n
                    })) : Z([n])
                }))
            }
        }
        var vd = function () {
                return function () {}
            }(),
            md = function () {
                function e() {}
                return e.prototype.shouldDetach = function (e) {
                    return !1
                }, e.prototype.store = function (e, n) {}, e.prototype.shouldAttach = function (e) {
                    return !1
                }, e.prototype.retrieve = function (e) {
                    return null
                }, e.prototype.shouldReuseRoute = function (e, n) {
                    return e.routeConfig === n.routeConfig
                }, e
            }(),
            yd = new ye("ROUTES"),
            Sd = function () {
                function e(e, n, t, r) {
                    this.loader = e, this.compiler = n, this.onLoadStartListener = t, this.onLoadEndListener = r
                }
                return e.prototype.load = function (e, n) {
                    var t = this;
                    return this.onLoadStartListener && this.onLoadStartListener(n), this.loadModuleFactory(n.loadChildren).pipe(K(function (r) {
                        t.onLoadEndListener && t.onLoadEndListener(n);
                        var i = r.create(e);
                        return new Pp(Fp(i.injector.get(yd)).map(Lp), i)
                    }))
                }, e.prototype.loadModuleFactory = function (e) {
                    var n = this;
                    return "string" == typeof e ? Z(this.loader.load(e)) : Gp(e()).pipe(X(function (e) {
                        return e instanceof Nn ? ta(e) : Z(n.compiler.compileModuleAsync(e))
                    }))
                }, e
            }(),
            Ed = function () {
                return function () {}
            }(),
            bd = function () {
                function e() {}
                return e.prototype.shouldProcessUrl = function (e) {
                    return !0
                }, e.prototype.extract = function (e) {
                    return e
                }, e.prototype.merge = function (e, n) {
                    return e
                }, e
            }();

        function Od(e) {
            throw e
        }

        function Rd(e, n, t) {
            return n.parse("/")
        }

        function Td(e, n) {
            return ta(null)
        }
        var Cd = function () {
                function e(e, n, t, r, i, l, o, u) {
                    var s = this;
                    this.rootComponentType = e, this.urlSerializer = n, this.rootContexts = t, this.location = r, this.config = u, this.lastSuccessfulNavigation = null, this.currentNavigation = null, this.navigationId = 0, this.isNgZoneEnabled = !1, this.events = new L, this.errorHandler = Od, this.malformedUriErrorHandler = Rd, this.navigated = !1, this.lastSuccessfulId = -1, this.hooks = {
                        beforePreactivation: Td,
                        afterPreactivation: Td
                    }, this.urlHandlingStrategy = new bd, this.routeReuseStrategy = new md, this.onSameUrlNavigation = "ignore", this.paramsInheritanceStrategy = "emptyOnly", this.urlUpdateStrategy = "deferred", this.relativeLinkResolution = "legacy", this.ngModule = i.get(wn), this.console = i.get(xt);
                    var a = i.get(Zt);
                    this.isNgZoneEnabled = a instanceof Zt, this.resetConfig(u), this.currentUrlTree = new Vp(new Wp([], {}), {}, null), this.rawUrlTree = this.currentUrlTree, this.browserUrlTree = this.currentUrlTree, this.configLoader = new Sd(l, o, function (e) {
                        return s.triggerEvent(new mp(e))
                    }, function (e) {
                        return s.triggerEvent(new yp(e))
                    }), this.routerState = fh(this.currentUrlTree, this.rootComponentType), this.transitions = new ra({
                        id: 0,
                        currentUrlTree: this.currentUrlTree,
                        currentRawUrl: this.currentUrlTree,
                        extractedUrl: this.urlHandlingStrategy.extract(this.currentUrlTree),
                        urlAfterRedirects: this.urlHandlingStrategy.extract(this.currentUrlTree),
                        rawUrl: this.currentUrlTree,
                        extras: {},
                        resolve: null,
                        reject: null,
                        promise: Promise.resolve(!0),
                        source: "imperative",
                        restoredState: null,
                        currentSnapshot: this.routerState.snapshot,
                        targetSnapshot: null,
                        currentRouterState: this.routerState,
                        targetRouterState: null,
                        guards: {
                            canActivateChecks: [],
                            canDeactivateChecks: []
                        },
                        guardsResult: null
                    }), this.navigations = this.setupNavigations(this.transitions), this.processNavigations()
                }
                return e.prototype.setupNavigations = function (e) {
                    var n = this,
                        t = this.events;
                    return e.pipe(da(function (e) {
                        return 0 !== e.id
                    }), K(function (e) {
                        return l({}, e, {
                            extractedUrl: n.urlHandlingStrategy.extract(e.rawUrl)
                        })
                    }), Ua(function (e) {
                        var r, i, o, u, a = !1,
                            c = !1;
                        return ta(e).pipe(Ka(function (e) {
                            n.currentNavigation = {
                                id: e.id,
                                initialUrl: e.currentRawUrl,
                                extractedUrl: e.extractedUrl,
                                trigger: e.source,
                                extras: e.extras,
                                previousNavigation: n.lastSuccessfulNavigation ? l({}, n.lastSuccessfulNavigation, {
                                    previousNavigation: null
                                }) : null
                            }
                        }), Ua(function (e) {
                            var r, i, o, u, s = !n.navigated || e.extractedUrl.toString() !== n.browserUrlTree.toString();
                            if (("reload" === n.onSameUrlNavigation || s) && n.urlHandlingStrategy.shouldProcessUrl(e.rawUrl)) return ta(e).pipe(Ua(function (e) {
                                var r = n.transitions.getValue();
                                return t.next(new sp(e.id, n.serializeUrl(e.extractedUrl), e.source, e.restoredState)), r !== n.transitions.getValue() ? aa : [e]
                            }), Ua(function (e) {
                                return Promise.resolve(e)
                            }), (r = n.ngModule.injector, i = n.configLoader, o = n.urlSerializer, u = n.config, function (e) {
                                return e.pipe(Ua(function (e) {
                                    return function (n, t, r, i, l) {
                                        return new Wh(n, t, r, e.extractedUrl, l).apply()
                                    }(r, i, o, 0, u).pipe(K(function (n) {
                                        return l({}, e, {
                                            urlAfterRedirects: n
                                        })
                                    }))
                                }))
                            }), Ka(function (e) {
                                n.currentNavigation = l({}, n.currentNavigation, {
                                    finalUrl: e.urlAfterRedirects
                                })
                            }), function (e, t, r, i, o) {
                                return function (r) {
                                    return r.pipe(X(function (r) {
                                        return function (e, n, t, r, i, l) {
                                            return void 0 === i && (i = "emptyOnly"), void 0 === l && (l = "legacy"), new od(e, n, t, r, i, l).recognize()
                                        }(e, t, r.urlAfterRedirects, (u = r.urlAfterRedirects, n.serializeUrl(u)), i, o).pipe(K(function (e) {
                                            return l({}, r, {
                                                targetSnapshot: e
                                            })
                                        }));
                                        var u
                                    }))
                                }
                            }(n.rootComponentType, n.config, 0, n.paramsInheritanceStrategy, n.relativeLinkResolution), Ka(function (e) {
                                "eager" === n.urlUpdateStrategy && (e.extras.skipLocationChange || n.setBrowserUrl(e.urlAfterRedirects, !!e.extras.replaceUrl, e.id), n.browserUrlTree = e.urlAfterRedirects)
                            }), Ka(function (e) {
                                var r = new hp(e.id, n.serializeUrl(e.extractedUrl), n.serializeUrl(e.urlAfterRedirects), e.targetSnapshot);
                                t.next(r)
                            }));
                            if (s && n.rawUrlTree && n.urlHandlingStrategy.shouldProcessUrl(n.rawUrlTree)) {
                                var a = e.extractedUrl,
                                    c = e.source,
                                    p = e.restoredState,
                                    h = e.extras,
                                    d = new sp(e.id, n.serializeUrl(a), c, p);
                                t.next(d);
                                var f = fh(a, n.rootComponentType).snapshot;
                                return ta(l({}, e, {
                                    targetSnapshot: f,
                                    urlAfterRedirects: a,
                                    extras: l({}, h, {
                                        skipLocationChange: !1,
                                        replaceUrl: !1
                                    })
                                }))
                            }
                            return n.rawUrlTree = e.rawUrl, e.resolve(null), aa
                        }), gd(function (e) {
                            var t = e.extras;
                            return n.hooks.beforePreactivation(e.targetSnapshot, {
                                navigationId: e.id,
                                appliedUrlTree: e.extractedUrl,
                                rawUrlTree: e.rawUrl,
                                skipLocationChange: !!t.skipLocationChange,
                                replaceUrl: !!t.replaceUrl
                            })
                        }), Ka(function (e) {
                            var t = new dp(e.id, n.serializeUrl(e.extractedUrl), n.serializeUrl(e.urlAfterRedirects), e.targetSnapshot);
                            n.triggerEvent(t)
                        }), K(function (e) {
                            return l({}, e, {
                                guards: (t = e.targetSnapshot, r = e.currentSnapshot, i = n.rootContexts, o = t._root, Zh(o, r ? r._root : null, i, [o.value]))
                            });
                            var t, r, i, o
                        }), function (e, n) {
                            return function (t) {
                                return t.pipe(X(function (t) {
                                    var r = t.targetSnapshot,
                                        i = t.currentSnapshot,
                                        o = t.guards,
                                        u = o.canActivateChecks,
                                        s = o.canDeactivateChecks;
                                    return 0 === s.length && 0 === u.length ? ta(l({}, t, {
                                        guardsResult: !0
                                    })) : function (e, n, t, r) {
                                        return Z(s).pipe(X(function (e) {
                                            return function (e, n, t, r, i) {
                                                var l = n && n.routeConfig ? n.routeConfig.canDeactivate : null;
                                                return l && 0 !== l.length ? ta(l.map(function (l) {
                                                    var o, u = Qh(l, n, i);
                                                    if (function (e) {
                                                            return e && xh(e.canDeactivate)
                                                        }(u)) o = Gp(u.canDeactivate(e, n, t, r));
                                                    else {
                                                        if (!xh(u)) throw new Error("Invalid CanDeactivate guard");
                                                        o = Gp(u(e, n, t, r))
                                                    }
                                                    return o.pipe(La())
                                                })).pipe(ed()) : ta(!0)
                                            }(e.component, e.route, t, n, r)
                                        }), La(function (e) {
                                            return !0 !== e
                                        }, !0))
                                    }(0, r, i, e).pipe(X(function (t) {
                                        return t && "boolean" == typeof t ? function (e, n, t, r) {
                                            return Z(u).pipe(za(function (n) {
                                                return Z([td(n.route.parent, r), nd(n.route, r), id(e, n.path, t), rd(e, n.route, t)]).pipe(ha(), La(function (e) {
                                                    return !0 !== e
                                                }, !0))
                                            }), La(function (e) {
                                                return !0 !== e
                                            }, !0))
                                        }(r, 0, e, n) : ta(t)
                                    }), K(function (e) {
                                        return l({}, t, {
                                            guardsResult: e
                                        })
                                    }))
                                }))
                            }
                        }(n.ngModule.injector, function (e) {
                            return n.triggerEvent(e)
                        }), Ka(function (e) {
                            if (Fh(e.guardsResult)) {
                                var t = wp('Redirecting to "' + n.serializeUrl(e.guardsResult) + '"');
                                throw t.url = e.guardsResult, t
                            }
                        }), Ka(function (e) {
                            var t = new fp(e.id, n.serializeUrl(e.extractedUrl), n.serializeUrl(e.urlAfterRedirects), e.targetSnapshot, !!e.guardsResult);
                            n.triggerEvent(t)
                        }), da(function (e) {
                            if (!e.guardsResult) {
                                n.resetUrlToCurrentUrlTree();
                                var r = new cp(e.id, n.serializeUrl(e.extractedUrl), "");
                                return t.next(r), e.resolve(!1), !1
                            }
                            return !0
                        }), gd(function (e) {
                            if (e.guards.canActivateChecks.length) return ta(e).pipe(Ka(function (e) {
                                var t = new gp(e.id, n.serializeUrl(e.extractedUrl), n.serializeUrl(e.urlAfterRedirects), e.targetSnapshot);
                                n.triggerEvent(t)
                            }), (t = n.paramsInheritanceStrategy, r = n.ngModule.injector, function (e) {
                                return e.pipe(X(function (e) {
                                    var n = e.targetSnapshot,
                                        i = e.guards.canActivateChecks;
                                    return i.length ? Z(i).pipe(za(function (e) {
                                        return function (e, t, r, i) {
                                            return function (e, n, t, r) {
                                                var i = Object.keys(e);
                                                if (0 === i.length) return ta({});
                                                if (1 === i.length) {
                                                    var l = i[0];
                                                    return fd(e[l], n, t, r).pipe(K(function (e) {
                                                        var n;
                                                        return (n = {})[l] = e, n
                                                    }))
                                                }
                                                var o = {};
                                                return Z(i).pipe(X(function (i) {
                                                    return fd(e[i], n, t, r).pipe(K(function (e) {
                                                        return o[i] = e, e
                                                    }))
                                                })).pipe(Aa(), K(function () {
                                                    return o
                                                }))
                                            }(e._resolve, e, n, i).pipe(K(function (n) {
                                                return e._resolvedData = n, e.data = l({}, e.data, vh(e, r).resolve), null
                                            }))
                                        }(e.route, 0, t, r)
                                    }), function (e, n) {
                                        return arguments.length >= 2 ? function (n) {
                                            return I(Wa(e, void 0), ya(1), Ca(void 0))(n)
                                        } : function (n) {
                                            return I(Wa(function (n, t, r) {
                                                return e(n)
                                            }), ya(1))(n)
                                        }
                                    }(function (e, n) {
                                        return e
                                    }), K(function (n) {
                                        return e
                                    })) : ta(e)
                                }))
                            }), Ka(function (e) {
                                var t = new vp(e.id, n.serializeUrl(e.extractedUrl), n.serializeUrl(e.urlAfterRedirects), e.targetSnapshot);
                                n.triggerEvent(t)
                            }));
                            var t, r
                        }), gd(function (e) {
                            var t = e.extras;
                            return n.hooks.afterPreactivation(e.targetSnapshot, {
                                navigationId: e.id,
                                appliedUrlTree: e.extractedUrl,
                                rawUrlTree: e.rawUrl,
                                skipLocationChange: !!t.skipLocationChange,
                                replaceUrl: !!t.replaceUrl
                            })
                        }), K(function (e) {
                            var t, r, i, o = (i = function e(n, t, r) {
                                if (r && n.shouldReuseRoute(t.value, r.value.snapshot)) {
                                    (a = r.value)._futureSnapshot = t.value;
                                    var i = function (n, t, r) {
                                        return t.children.map(function (t) {
                                            var i, l;
                                            try {
                                                for (var o = s(r.children), u = o.next(); !u.done; u = o.next()) {
                                                    var a = u.value;
                                                    if (n.shouldReuseRoute(a.value.snapshot, t.value)) return e(n, t, a)
                                                }
                                            } catch (c) {
                                                i = {
                                                    error: c
                                                }
                                            } finally {
                                                try {
                                                    u && !u.done && (l = o.return) && l.call(o)
                                                } finally {
                                                    if (i) throw i.error
                                                }
                                            }
                                            return e(n, t)
                                        })
                                    }(n, t, r);
                                    return new ph(a, i)
                                }
                                var l = n.retrieve(t.value);
                                if (l) {
                                    var o = l.route;
                                    return function e(n, t) {
                                        if (n.value.routeConfig !== t.value.routeConfig) throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");
                                        if (n.children.length !== t.children.length) throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");
                                        t.value._futureSnapshot = n.value;
                                        for (var r = 0; r < n.children.length; ++r) e(n.children[r], t.children[r])
                                    }(t, o), o
                                }
                                var u, a = new gh(new ra((u = t.value).url), new ra(u.params), new ra(u.queryParams), new ra(u.fragment), new ra(u.data), u.outlet, u.component, u);
                                return i = t.children.map(function (t) {
                                    return e(n, t)
                                }), new ph(a, i)
                            }(n.routeReuseStrategy, (t = e.targetSnapshot)._root, (r = e.currentRouterState) ? r._root : void 0), new dh(i, t));
                            return l({}, e, {
                                targetRouterState: o
                            })
                        }), Ka(function (e) {
                            n.currentUrlTree = e.urlAfterRedirects, n.rawUrlTree = n.urlHandlingStrategy.merge(n.currentUrlTree, e.rawUrl), n.routerState = e.targetRouterState, "deferred" === n.urlUpdateStrategy && (e.extras.skipLocationChange || n.setBrowserUrl(n.rawUrlTree, !!e.extras.replaceUrl, e.id, e.extras.state), n.browserUrlTree = e.urlAfterRedirects)
                        }), (i = n.rootContexts, o = n.routeReuseStrategy, u = function (e) {
                            return n.triggerEvent(e)
                        }, K(function (e) {
                            return new Mh(o, e.targetRouterState, e.currentRouterState, u).activate(i), e
                        })), Ka({
                            next: function () {
                                a = !0
                            },
                            complete: function () {
                                a = !0
                            }
                        }), (r = function () {
                            if (!a && !c) {
                                n.resetUrlToCurrentUrlTree();
                                var r = new cp(e.id, n.serializeUrl(e.extractedUrl), "Navigation ID " + e.id + " is not equal to the current navigation id " + n.navigationId);
                                t.next(r), e.resolve(!1)
                            }
                            n.currentNavigation = null
                        }, function (e) {
                            return e.lift(new Qa(r))
                        }), wa(function (r) {
                            if (c = !0, (u = r) && u[Ap]) {
                                var i = Fh(r.url);
                                i || (n.navigated = !0, n.resetStateAndUrl(e.currentRouterState, e.currentUrlTree, e.rawUrl));
                                var l = new cp(e.id, n.serializeUrl(e.extractedUrl), r.message);
                                t.next(l), e.resolve(!1), i && n.navigateByUrl(r.url)
                            } else {
                                n.resetStateAndUrl(e.currentRouterState, e.currentUrlTree, e.rawUrl);
                                var o = new pp(e.id, n.serializeUrl(e.extractedUrl), r);
                                t.next(o);
                                try {
                                    e.resolve(n.errorHandler(r))
                                } catch (s) {
                                    e.reject(s)
                                }
                            }
                            var u;
                            return aa
                        }))
                    }))
                }, e.prototype.resetRootComponentType = function (e) {
                    this.rootComponentType = e, this.routerState.root.component = this.rootComponentType
                }, e.prototype.getTransition = function () {
                    return this.transitions.value
                }, e.prototype.setTransition = function (e) {
                    this.transitions.next(l({}, this.getTransition(), e))
                }, e.prototype.initialNavigation = function () {
                    this.setUpLocationChangeListener(), 0 === this.navigationId && this.navigateByUrl(this.location.path(!0), {
                        replaceUrl: !0
                    })
                }, e.prototype.setUpLocationChangeListener = function () {
                    var e = this;
                    this.locationSubscription || (this.locationSubscription = this.location.subscribe(function (n) {
                        var t = e.parseUrl(n.url),
                            r = "popstate" === n.type ? "popstate" : "hashchange",
                            i = n.state && n.state.navigationId ? n.state : null;
                        setTimeout(function () {
                            e.scheduleNavigation(t, r, i, {
                                replaceUrl: !0
                            })
                        }, 0)
                    }))
                }, Object.defineProperty(e.prototype, "url", {
                    get: function () {
                        return this.serializeUrl(this.currentUrlTree)
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.getCurrentNavigation = function () {
                    return this.currentNavigation
                }, e.prototype.triggerEvent = function (e) {
                    this.events.next(e)
                }, e.prototype.resetConfig = function (e) {
                    Dp(e), this.config = e.map(Lp), this.navigated = !1, this.lastSuccessfulId = -1
                }, e.prototype.ngOnDestroy = function () {
                    this.dispose()
                }, e.prototype.dispose = function () {
                    this.locationSubscription && (this.locationSubscription.unsubscribe(), this.locationSubscription = null)
                }, e.prototype.createUrlTree = function (e, n) {
                    void 0 === n && (n = {});
                    var t = n.relativeTo,
                        r = n.queryParams,
                        i = n.fragment,
                        o = n.preserveQueryParams,
                        u = n.queryParamsHandling,
                        s = n.preserveFragment;
                    Wn() && o && console && console.warn && console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");
                    var a = t || this.routerState.root,
                        p = s ? this.currentUrlTree.fragment : i,
                        h = null;
                    if (u) switch (u) {
                        case "merge":
                            h = l({}, this.currentUrlTree.queryParams, r);
                            break;
                        case "preserve":
                            h = this.currentUrlTree.queryParams;
                            break;
                        default:
                            h = r || null
                    } else h = o ? this.currentUrlTree.queryParams : r || null;
                    return null !== h && (h = this.removeEmptyProps(h)),
                        function (e, n, t, r, i) {
                            if (0 === t.length) return Th(n.root, n.root, n, r, i);
                            var l = function (e) {
                                if ("string" == typeof e[0] && 1 === e.length && "/" === e[0]) return new Ch(!0, 0, e);
                                var n = 0,
                                    t = !1,
                                    r = e.reduce(function (e, r, i) {
                                        if ("object" == typeof r && null != r) {
                                            if (r.outlets) {
                                                var l = {};
                                                return Hp(r.outlets, function (e, n) {
                                                    l[n] = "string" == typeof e ? e.split("/") : e
                                                }), c(e, [{
                                                    outlets: l
                                                }])
                                            }
                                            if (r.segmentPath) return c(e, [r.segmentPath])
                                        }
                                        return "string" != typeof r ? c(e, [r]) : 0 === i ? (r.split("/").forEach(function (r, i) {
                                            0 == i && "." === r || (0 == i && "" === r ? t = !0 : ".." === r ? n++ : "" != r && e.push(r))
                                        }), e) : c(e, [r])
                                    }, []);
                                return new Ch(t, n, r)
                            }(t);
                            if (l.toRoot()) return Th(n.root, new Wp([], {}), n, r, i);
                            var o = function (e, t, r) {
                                    if (e.isAbsolute) return new _h(n.root, !0, 0);
                                    if (-1 === r.snapshot._lastPathIndex) return new _h(r.snapshot._urlSegment, !0, 0);
                                    var i = Rh(e.commands[0]) ? 0 : 1;
                                    return function (n, t, l) {
                                        for (var o = r.snapshot._urlSegment, u = r.snapshot._lastPathIndex + i, s = e.numberOfDoubleDots; s > u;) {
                                            if (s -= u, !(o = o.parent)) throw new Error("Invalid number of '../'");
                                            u = o.segments.length
                                        }
                                        return new _h(o, !1, u - s)
                                    }()
                                }(l, 0, e),
                                u = o.processChildren ? wh(o.segmentGroup, o.index, l.commands) : Ah(o.segmentGroup, o.index, l.commands);
                            return Th(o.segmentGroup, u, n, r, i)
                        }(a, this.currentUrlTree, e, h, p)
                }, e.prototype.navigateByUrl = function (e, n) {
                    void 0 === n && (n = {
                        skipLocationChange: !1
                    }), Wn() && this.isNgZoneEnabled && !Zt.isInAngularZone() && this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");
                    var t = Fh(e) ? e : this.parseUrl(e),
                        r = this.urlHandlingStrategy.merge(t, this.rawUrlTree);
                    return this.scheduleNavigation(r, "imperative", null, n)
                }, e.prototype.navigate = function (e, n) {
                    return void 0 === n && (n = {
                            skipLocationChange: !1
                        }),
                        function (e) {
                            for (var n = 0; n < e.length; n++) {
                                var t = e[n];
                                if (null == t) throw new Error("The requested path contains " + t + " segment at index " + n)
                            }
                        }(e), this.navigateByUrl(this.createUrlTree(e, n), n)
                }, e.prototype.serializeUrl = function (e) {
                    return this.urlSerializer.serialize(e)
                }, e.prototype.parseUrl = function (e) {
                    var n;
                    try {
                        n = this.urlSerializer.parse(e)
                    } catch (t) {
                        n = this.malformedUriErrorHandler(t, this.urlSerializer, e)
                    }
                    return n
                }, e.prototype.isActive = function (e, n) {
                    if (Fh(e)) return Bp(this.currentUrlTree, e, n);
                    var t = this.parseUrl(e);
                    return Bp(this.currentUrlTree, t, n)
                }, e.prototype.removeEmptyProps = function (e) {
                    return Object.keys(e).reduce(function (n, t) {
                        var r = e[t];
                        return null != r && (n[t] = r), n
                    }, {})
                }, e.prototype.processNavigations = function () {
                    var e = this;
                    this.navigations.subscribe(function (n) {
                        e.navigated = !0, e.lastSuccessfulId = n.id, e.events.next(new ap(n.id, e.serializeUrl(n.extractedUrl), e.serializeUrl(e.currentUrlTree))), e.lastSuccessfulNavigation = e.currentNavigation, e.currentNavigation = null, n.resolve(!0)
                    }, function (n) {
                        e.console.warn("Unhandled Navigation Error: ")
                    })
                }, e.prototype.scheduleNavigation = function (e, n, t, r) {
                    var i = this.getTransition();
                    if (i && "imperative" !== n && "imperative" === i.source && i.rawUrl.toString() === e.toString()) return Promise.resolve(!0);
                    if (i && "hashchange" == n && "popstate" === i.source && i.rawUrl.toString() === e.toString()) return Promise.resolve(!0);
                    if (i && "popstate" == n && "hashchange" === i.source && i.rawUrl.toString() === e.toString()) return Promise.resolve(!0);
                    var l = null,
                        o = null,
                        u = new Promise(function (e, n) {
                            l = e, o = n
                        }),
                        s = ++this.navigationId;
                    return this.setTransition({
                        id: s,
                        source: n,
                        restoredState: t,
                        currentUrlTree: this.currentUrlTree,
                        currentRawUrl: this.rawUrlTree,
                        rawUrl: e,
                        extras: r,
                        resolve: l,
                        reject: o,
                        promise: u,
                        currentSnapshot: this.routerState.snapshot,
                        currentRouterState: this.routerState
                    }), u.catch(function (e) {
                        return Promise.reject(e)
                    })
                }, e.prototype.setBrowserUrl = function (e, n, t, r) {
                    var i = this.urlSerializer.serialize(e);
                    r = r || {}, this.location.isCurrentPathEqualTo(i) || n ? this.location.replaceState(i, "", l({}, r, {
                        navigationId: t
                    })) : this.location.go(i, "", l({}, r, {
                        navigationId: t
                    }))
                }, e.prototype.resetStateAndUrl = function (e, n, t) {
                    this.routerState = e, this.currentUrlTree = n, this.rawUrlTree = this.urlHandlingStrategy.merge(this.currentUrlTree, t), this.resetUrlToCurrentUrlTree()
                }, e.prototype.resetUrlToCurrentUrlTree = function () {
                    this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree), "", {
                        navigationId: this.lastSuccessfulId
                    })
                }, e
            }(),
            _d = function () {
                function e(e, n, t) {
                    var r = this;
                    this.router = e, this.route = n, this.locationStrategy = t, this.commands = [], this.subscription = e.events.subscribe(function (e) {
                        e instanceof ap && r.updateTargetUrlAndHref()
                    })
                }
                return Object.defineProperty(e.prototype, "routerLink", {
                    set: function (e) {
                        this.commands = null != e ? Array.isArray(e) ? e : [e] : []
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "preserveQueryParams", {
                    set: function (e) {
                        Wn() && console && console.warn && console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."), this.preserve = e
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.ngOnChanges = function (e) {
                    this.updateTargetUrlAndHref()
                }, e.prototype.ngOnDestroy = function () {
                    this.subscription.unsubscribe()
                }, e.prototype.onClick = function (e, n, t, r) {
                    if (0 !== e || n || t || r) return !0;
                    if ("string" == typeof this.target && "_self" != this.target) return !0;
                    var i = {
                        skipLocationChange: Id(this.skipLocationChange),
                        replaceUrl: Id(this.replaceUrl),
                        state: this.state
                    };
                    return this.router.navigateByUrl(this.urlTree, i), !1
                }, e.prototype.updateTargetUrlAndHref = function () {
                    this.href = this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))
                }, Object.defineProperty(e.prototype, "urlTree", {
                    get: function () {
                        return this.router.createUrlTree(this.commands, {
                            relativeTo: this.route,
                            queryParams: this.queryParams,
                            fragment: this.fragment,
                            preserveQueryParams: Id(this.preserve),
                            queryParamsHandling: this.queryParamsHandling,
                            preserveFragment: Id(this.preserveFragment)
                        })
                    },
                    enumerable: !0,
                    configurable: !0
                }), o([yt("attr.target"), mt(), u("design:type", String)], e.prototype, "target", void 0), e
            }();

        function Id(e) {
            return "" === e || !!e
        }
        var Ad = function () {
                function e(e, n, t, r) {
                    var i = this;
                    this.router = e, this.element = n, this.renderer = t, this.cdr = r, this.classes = [], this.isActive = !1, this.routerLinkActiveOptions = {
                        exact: !1
                    }, this.subscription = e.events.subscribe(function (e) {
                        e instanceof ap && i.update()
                    })
                }
                return e.prototype.ngAfterContentInit = function () {
                    var e = this;
                    this.links.changes.subscribe(function (n) {
                        return e.update()
                    }), this.linksWithHrefs.changes.subscribe(function (n) {
                        return e.update()
                    }), this.update()
                }, Object.defineProperty(e.prototype, "routerLinkActive", {
                    set: function (e) {
                        var n = Array.isArray(e) ? e : e.split(" ");
                        this.classes = n.filter(function (e) {
                            return !!e
                        })
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.ngOnChanges = function (e) {
                    this.update()
                }, e.prototype.ngOnDestroy = function () {
                    this.subscription.unsubscribe()
                }, e.prototype.update = function () {
                    var e = this;
                    this.links && this.linksWithHrefs && this.router.navigated && Promise.resolve().then(function () {
                        var n = e.hasActiveLinks();
                        e.isActive !== n && (e.isActive = n, e.classes.forEach(function (t) {
                            n ? e.renderer.addClass(e.element.nativeElement, t) : e.renderer.removeClass(e.element.nativeElement, t)
                        }))
                    })
                }, e.prototype.isLinkActive = function (e) {
                    var n = this;
                    return function (t) {
                        return e.isActive(t.urlTree, n.routerLinkActiveOptions.exact)
                    }
                }, e.prototype.hasActiveLinks = function () {
                    return this.links.some(this.isLinkActive(this.router)) || this.linksWithHrefs.some(this.isLinkActive(this.router))
                }, e
            }(),
            wd = function () {
                return function () {
                    this.outlet = null, this.route = null, this.resolver = null, this.children = new Nd, this.attachRef = null
                }
            }(),
            Nd = function () {
                function e() {
                    this.contexts = new Map
                }
                return e.prototype.onChildOutletCreated = function (e, n) {
                    var t = this.getOrCreateContext(e);
                    t.outlet = n, this.contexts.set(e, t)
                }, e.prototype.onChildOutletDestroyed = function (e) {
                    var n = this.getContext(e);
                    n && (n.outlet = null)
                }, e.prototype.onOutletDeactivated = function () {
                    var e = this.contexts;
                    return this.contexts = new Map, e
                }, e.prototype.onOutletReAttached = function (e) {
                    this.contexts = e
                }, e.prototype.getOrCreateContext = function (e) {
                    var n = this.getContext(e);
                    return n || (n = new wd, this.contexts.set(e, n)), n
                }, e.prototype.getContext = function (e) {
                    return this.contexts.get(e) || null
                }, e
            }(),
            Pd = function () {
                function e(e, n, t, r, i) {
                    this.parentContexts = e, this.location = n, this.resolver = t, this.changeDetector = i, this.activated = null, this._activatedRoute = null, this.activateEvents = new pt, this.deactivateEvents = new pt, this.name = r || Cp, e.onChildOutletCreated(this.name, this)
                }
                return e.prototype.ngOnDestroy = function () {
                    this.parentContexts.onChildOutletDestroyed(this.name)
                }, e.prototype.ngOnInit = function () {
                    if (!this.activated) {
                        var e = this.parentContexts.getContext(this.name);
                        e && e.route && (e.attachRef ? this.attach(e.attachRef, e.route) : this.activateWith(e.route, e.resolver || null))
                    }
                }, Object.defineProperty(e.prototype, "isActivated", {
                    get: function () {
                        return !!this.activated
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "component", {
                    get: function () {
                        if (!this.activated) throw new Error("Outlet is not activated");
                        return this.activated.instance
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "activatedRoute", {
                    get: function () {
                        if (!this.activated) throw new Error("Outlet is not activated");
                        return this._activatedRoute
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "activatedRouteData", {
                    get: function () {
                        return this._activatedRoute ? this._activatedRoute.snapshot.data : {}
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.detach = function () {
                    if (!this.activated) throw new Error("Outlet is not activated");
                    this.location.detach();
                    var e = this.activated;
                    return this.activated = null, this._activatedRoute = null, e
                }, e.prototype.attach = function (e, n) {
                    this.activated = e, this._activatedRoute = n, this.location.insert(e.hostView)
                }, e.prototype.deactivate = function () {
                    if (this.activated) {
                        var e = this.component;
                        this.activated.destroy(), this.activated = null, this._activatedRoute = null, this.deactivateEvents.emit(e)
                    }
                }, e.prototype.activateWith = function (e, n) {
                    if (this.isActivated) throw new Error("Cannot activate an already activated outlet");
                    this._activatedRoute = e;
                    var t = (n = n || this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),
                        r = this.parentContexts.getOrCreateContext(this.name).children,
                        i = new Dd(e, r, this.location.injector);
                    this.activated = this.location.createComponent(t, this.location.length, i), this.changeDetector.markForCheck(), this.activateEvents.emit(this.activated.instance)
                }, e
            }(),
            Dd = function () {
                function e(e, n, t) {
                    this.route = e, this.childContexts = n, this.parent = t
                }
                return e.prototype.get = function (e, n) {
                    return e === gh ? this.route : e === Nd ? this.childContexts : this.parent.get(e, n)
                }, e
            }(),
            kd = function () {
                return function () {}
            }(),
            Md = function () {
                function e() {}
                return e.prototype.preload = function (e, n) {
                    return n().pipe(wa(function () {
                        return ta(null)
                    }))
                }, e
            }(),
            Ld = function () {
                function e() {}
                return e.prototype.preload = function (e, n) {
                    return ta(null)
                }, e
            }(),
            xd = function () {
                function e(e, n, t, r, i) {
                    this.router = e, this.injector = r, this.preloadingStrategy = i, this.loader = new Sd(n, t, function (n) {
                        return e.triggerEvent(new mp(n))
                    }, function (n) {
                        return e.triggerEvent(new yp(n))
                    })
                }
                return e.prototype.setUpPreloading = function () {
                    var e = this;
                    this.subscription = this.router.events.pipe(da(function (e) {
                        return e instanceof ap
                    }), za(function () {
                        return e.preload()
                    })).subscribe(function () {})
                }, e.prototype.preload = function () {
                    var e = this.injector.get(wn);
                    return this.processRoutes(e, this.router.config)
                }, e.prototype.ngOnDestroy = function () {
                    this.subscription.unsubscribe()
                }, e.prototype.processRoutes = function (e, n) {
                    var t, r, i = [];
                    try {
                        for (var l = s(n), o = l.next(); !o.done; o = l.next()) {
                            var u = o.value;
                            if (u.loadChildren && !u.canLoad && u._loadedConfig) {
                                var a = u._loadedConfig;
                                i.push(this.processRoutes(a.module, a.routes))
                            } else u.loadChildren && !u.canLoad ? i.push(this.preloadConfig(e, u)) : u.children && i.push(this.processRoutes(e, u.children))
                        }
                    } catch (c) {
                        t = {
                            error: c
                        }
                    } finally {
                        try {
                            o && !o.done && (r = l.return) && r.call(l)
                        } finally {
                            if (t) throw t.error
                        }
                    }
                    return Z(i).pipe(te(), K(function (e) {}))
                }, e.prototype.preloadConfig = function (e, n) {
                    var t = this;
                    return this.preloadingStrategy.preload(n, function () {
                        return t.loader.load(e.injector, n).pipe(X(function (e) {
                            return n._loadedConfig = e, t.processRoutes(e.module, e.routes)
                        }))
                    })
                }, e
            }(),
            Fd = function () {
                function e(e, n, t) {
                    void 0 === t && (t = {}), this.router = e, this.viewportScroller = n, this.options = t, this.lastId = 0, this.lastSource = "imperative", this.restoredId = 0, this.store = {}, t.scrollPositionRestoration = t.scrollPositionRestoration || "disabled", t.anchorScrolling = t.anchorScrolling || "disabled"
                }
                return e.prototype.init = function () {
                    "disabled" !== this.options.scrollPositionRestoration && this.viewportScroller.setHistoryScrollRestoration("manual"), this.routerEventsSubscription = this.createScrollEvents(), this.scrollEventsSubscription = this.consumeScrollEvents()
                }, e.prototype.createScrollEvents = function () {
                    var e = this;
                    return this.router.events.subscribe(function (n) {
                        n instanceof sp ? (e.store[e.lastId] = e.viewportScroller.getScrollPosition(), e.lastSource = n.navigationTrigger, e.restoredId = n.restoredState ? n.restoredState.navigationId : 0) : n instanceof ap && (e.lastId = n.id, e.scheduleScrollEvent(n, e.router.parseUrl(n.urlAfterRedirects).fragment))
                    })
                }, e.prototype.consumeScrollEvents = function () {
                    var e = this;
                    return this.router.events.subscribe(function (n) {
                        n instanceof Rp && (n.position ? "top" === e.options.scrollPositionRestoration ? e.viewportScroller.scrollToPosition([0, 0]) : "enabled" === e.options.scrollPositionRestoration && e.viewportScroller.scrollToPosition(n.position) : n.anchor && "enabled" === e.options.anchorScrolling ? e.viewportScroller.scrollToAnchor(n.anchor) : "disabled" !== e.options.scrollPositionRestoration && e.viewportScroller.scrollToPosition([0, 0]))
                    })
                }, e.prototype.scheduleScrollEvent = function (e, n) {
                    this.router.triggerEvent(new Rp(e, "popstate" === this.lastSource ? this.store[this.restoredId] : null, n))
                }, e.prototype.ngOnDestroy = function () {
                    this.routerEventsSubscription && this.routerEventsSubscription.unsubscribe(), this.scrollEventsSubscription && this.scrollEventsSubscription.unsubscribe()
                }, e
            }(),
            Ud = new ye("ROUTER_CONFIGURATION"),
            Hd = new ye("ROUTER_FORROOT_GUARD"),
            Gd = [vs, {
                provide: Kp,
                useClass: qp
            }, {
                provide: Cd,
                useFactory: Kd,
                deps: [fr, Kp, Nd, vs, on, vt, jt, yd, Ud, [Ed, new Ge], [vd, new Ge]]
            }, Nd, {
                provide: gh,
                useFactory: qd,
                deps: [Cd]
            }, {
                provide: vt,
                useClass: Sr
            }, xd, Ld, Md, {
                provide: Ud,
                useValue: {
                    enableTracing: !1
                }
            }];

        function Bd() {
            return new ar("Router", Cd)
        }
        var Vd = function () {
            function e(e, n) {}
            var n;
            return n = e, e.forRoot = function (e, t) {
                return {
                    ngModule: n,
                    providers: [Gd, zd(e), {
                        provide: Hd,
                        useFactory: Yd,
                        deps: [[Cd, new Ge, new Ve]]
                    }, {
                        provide: Ud,
                        useValue: t || {}
                    }, {
                        provide: fs,
                        useFactory: jd,
                        deps: [hs, [new He(gs), new Ge], Ud]
                    }, {
                        provide: Fd,
                        useFactory: Wd,
                        deps: [Cd, ea, Ud]
                    }, {
                        provide: kd,
                        useExisting: t && t.preloadingStrategy ? t.preloadingStrategy : Ld
                    }, {
                        provide: ar,
                        multi: !0,
                        useFactory: Bd
                    }, [$d, {
                        provide: At,
                        multi: !0,
                        useFactory: Qd,
                        deps: [$d]
                    }, {
                        provide: Xd,
                        useFactory: Zd,
                        deps: [$d]
                    }, {
                        provide: Lt,
                        multi: !0,
                        useExisting: Xd
                    }]]
                }
            }, e.forChild = function (e) {
                return {
                    ngModule: n,
                    providers: [zd(e)]
                }
            }, e
        }();

        function Wd(e, n, t) {
            return t.scrollOffset && n.setOffset(t.scrollOffset), new Fd(e, n, t)
        }

        function jd(e, n, t) {
            return void 0 === t && (t = {}), t.useHash ? new ys(e, n) : new Ss(e, n)
        }

        function Yd(e) {
            if (e) throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");
            return "guarded"
        }

        function zd(e) {
            return [{
                provide: Te,
                multi: !0,
                useValue: e
            }, {
                provide: yd,
                multi: !0,
                useValue: e
            }]
        }

        function Kd(e, n, t, r, i, l, o, u, s, a, c) {
            void 0 === s && (s = {});
            var p = new Cd(null, n, t, r, i, l, o, Fp(u));
            if (a && (p.urlHandlingStrategy = a), c && (p.routeReuseStrategy = c), s.errorHandler && (p.errorHandler = s.errorHandler), s.malformedUriErrorHandler && (p.malformedUriErrorHandler = s.malformedUriErrorHandler), s.enableTracing) {
                var h = Ja();
                p.events.subscribe(function (e) {
                    h.logGroup("Router Event: " + e.constructor.name), h.log(e.toString()), h.log(e), h.logGroupEnd()
                })
            }
            return s.onSameUrlNavigation && (p.onSameUrlNavigation = s.onSameUrlNavigation), s.paramsInheritanceStrategy && (p.paramsInheritanceStrategy = s.paramsInheritanceStrategy), s.urlUpdateStrategy && (p.urlUpdateStrategy = s.urlUpdateStrategy), s.relativeLinkResolution && (p.relativeLinkResolution = s.relativeLinkResolution), p
        }

        function qd(e) {
            return e.routerState.root
        }
        var $d = function () {
            function e(e) {
                this.injector = e, this.initNavigation = !1, this.resultOfPreactivationDone = new L
            }
            return e.prototype.appInitializer = function () {
                var e = this;
                return this.injector.get(ds, Promise.resolve(null)).then(function () {
                    var n = null,
                        t = new Promise(function (e) {
                            return n = e
                        }),
                        r = e.injector.get(Cd),
                        i = e.injector.get(Ud);
                    if (e.isLegacyDisabled(i) || e.isLegacyEnabled(i)) n(!0);
                    else if ("disabled" === i.initialNavigation) r.setUpLocationChangeListener(), n(!0);
                    else {
                        if ("enabled" !== i.initialNavigation) throw new Error("Invalid initialNavigation options: '" + i.initialNavigation + "'");
                        r.hooks.afterPreactivation = function () {
                            return e.initNavigation ? ta(null) : (e.initNavigation = !0, n(!0), e.resultOfPreactivationDone)
                        }, r.initialNavigation()
                    }
                    return t
                })
            }, e.prototype.bootstrapListener = function (e) {
                var n = this.injector.get(Ud),
                    t = this.injector.get(xd),
                    r = this.injector.get(Fd),
                    i = this.injector.get(Cd),
                    l = this.injector.get(fr);
                e === l.components[0] && (this.isLegacyEnabled(n) ? i.initialNavigation() : this.isLegacyDisabled(n) && i.setUpLocationChangeListener(), t.setUpPreloading(), r.init(), i.resetRootComponentType(l.componentTypes[0]), this.resultOfPreactivationDone.next(null), this.resultOfPreactivationDone.complete())
            }, e.prototype.isLegacyEnabled = function (e) {
                return "legacy_enabled" === e.initialNavigation || !0 === e.initialNavigation || void 0 === e.initialNavigation
            }, e.prototype.isLegacyDisabled = function (e) {
                return "legacy_disabled" === e.initialNavigation || !1 === e.initialNavigation
            }, e
        }();

        function Qd(e) {
            return e.appInitializer.bind(e)
        }

        function Zd(e) {
            return e.bootstrapListener.bind(e)
        }
        var Xd = new ye("Router Initializer"),
            Jd = gi({
                encapsulation: 2,
                styles: [],
                data: {}
            });

        function ef(e) {
            return so(0, [(e()(), Yi(0, 16777216, null, null, 1, "router-outlet", [], null, null, null, null, null)), kl(1, 212992, null, 0, Pd, [Nd, br, _n, [8, null], Rr], null, null)], function (e, n) {
                e(n, 1, 0)
            }, null)
        }

        function nf(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "ng-component", [], null, null, null, ef, Jd)), kl(1, 49152, null, 0, Tp, [], null, null)], null, null)
        }
        var tf = al("ng-component", Tp, nf, {}, {}, []),
            rf = function () {
                function e(e) {
                    this.router = e
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.goToVillage = function () {
                    this.router.navigate(["/village"])
                }, e
            }(),
            lf = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{margin:10px;font-size:4vw;text-align:center}button[_ngcontent-%COMP%]{font-size:1.5vw}"]],
                data: {}
            });

        function of (e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 4, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), lo(-1, null, [" Page not found "])), (e()(), Yi(2, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.goToVillage() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Village"]))], null, null)
        }

        function uf(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-not-found", [], null, null, null, of , lf)), kl(1, 114688, null, 0, rf, [Cd], null, null)], function (e, n) {
                e(n, 1, 0)
            }, null)
        }
        var sf = al("app-not-found", rf, uf, {}, {}, []),
            af = function () {
                function e() {
                    this.margin = "0"
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.getTitle = function () {
                    return this.title ? this.title : "Food" === this.name ? "Food nutrition" : Au.titleCase(this.name).replace("_", " ")
                }, e.prototype.getPath = function () {
                    var e = "assets/";
                    return this.path && (e += this.path + "/"), e
                }, e
            }(),
            cf = gi({
                encapsulation: 0,
                styles: [["[_nghost-%COMP%]{display:inline-block;vertical-align:middle;height:24px}#wrapper[_ngcontent-%COMP%]{display:inline-block;height:24px;margin:0;padding:0}img[_ngcontent-%COMP%]{display:inline-block;margin:0;padding:0;height:24px;width:24px}"]],
                data: {}
            });

        function pf(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 3, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 2, "img", [["class", "resourceIcon"], ["draggable", "false"], ["onerror", "if (this.src !== 'assets/question_mark.svg') this.src = 'assets/question_mark.svg';"]], [[8, "src", 4], [8, "title", 0], [8, "alt", 0]], null, null, null, null)), kl(2, 278528, null, 0, Ws, [Vr, Pn, xn], {
                ngStyle: [0, "ngStyle"]
            }, null), ro(3, {
                margin: 0
            })], function (e, n) {
                var t = e(n, 3, 0, n.component.margin);
                e(n, 2, 0, t)
            }, function (e, n) {
                var t = n.component;
                e(n, 1, 0, Vi(1, "", t.getPath() + t.name.replace(" ", "_").toLowerCase(), ".svg"), Vi(1, "", t.getTitle(), ""), Vi(1, "", t.name, ""))
            })
        }

        function hf(e, n) {
            return new w(function (t) {
                var r = e.length;
                if (0 !== r)
                    for (var i = new Array(r), l = 0, o = 0, u = function (u) {
                            var s = Z(e[u]),
                                a = !1;
                            t.add(s.subscribe({
                                next: function (e) {
                                    a || (a = !0, o++), i[u] = e
                                },
                                error: function (e) {
                                    return t.error(e)
                                },
                                complete: function () {
                                    ++l !== r && a || (o === r && t.next(n ? n.reduce(function (e, n, t) {
                                        return e[n] = i[t], e
                                    }, {}) : i), t.complete())
                                }
                            }))
                        }, s = 0; s < r; s++) u(s);
                else t.complete()
            })
        }
        var df = function () {
                function e() {}
                return Object.defineProperty(e.prototype, "value", {
                    get: function () {
                        return this.control ? this.control.value : null
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "valid", {
                    get: function () {
                        return this.control ? this.control.valid : null
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "invalid", {
                    get: function () {
                        return this.control ? this.control.invalid : null
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "pending", {
                    get: function () {
                        return this.control ? this.control.pending : null
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "disabled", {
                    get: function () {
                        return this.control ? this.control.disabled : null
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "enabled", {
                    get: function () {
                        return this.control ? this.control.enabled : null
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "errors", {
                    get: function () {
                        return this.control ? this.control.errors : null
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "pristine", {
                    get: function () {
                        return this.control ? this.control.pristine : null
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "dirty", {
                    get: function () {
                        return this.control ? this.control.dirty : null
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "touched", {
                    get: function () {
                        return this.control ? this.control.touched : null
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "status", {
                    get: function () {
                        return this.control ? this.control.status : null
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "untouched", {
                    get: function () {
                        return this.control ? this.control.untouched : null
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "statusChanges", {
                    get: function () {
                        return this.control ? this.control.statusChanges : null
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "valueChanges", {
                    get: function () {
                        return this.control ? this.control.valueChanges : null
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "path", {
                    get: function () {
                        return null
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.reset = function (e) {
                    void 0 === e && (e = void 0), this.control && this.control.reset(e)
                }, e.prototype.hasError = function (e, n) {
                    return !!this.control && this.control.hasError(e, n)
                }, e.prototype.getError = function (e, n) {
                    return this.control ? this.control.getError(e, n) : null
                }, e
            }(),
            ff = function (e) {
                function n() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return i(n, e), Object.defineProperty(n.prototype, "formDirective", {
                    get: function () {
                        return null
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(n.prototype, "path", {
                    get: function () {
                        return null
                    },
                    enumerable: !0,
                    configurable: !0
                }), n
            }(df);

        function gf(e) {
            return null == e || 0 === e.length
        }
        var vf = /^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,
            mf = function () {
                function e() {}
                return e.min = function (e) {
                    return function (n) {
                        if (gf(n.value) || gf(e)) return null;
                        var t = parseFloat(n.value);
                        return !isNaN(t) && t < e ? {
                            min: {
                                min: e,
                                actual: n.value
                            }
                        } : null
                    }
                }, e.max = function (e) {
                    return function (n) {
                        if (gf(n.value) || gf(e)) return null;
                        var t = parseFloat(n.value);
                        return !isNaN(t) && t > e ? {
                            max: {
                                max: e,
                                actual: n.value
                            }
                        } : null
                    }
                }, e.required = function (e) {
                    return gf(e.value) ? {
                        required: !0
                    } : null
                }, e.requiredTrue = function (e) {
                    return !0 === e.value ? null : {
                        required: !0
                    }
                }, e.email = function (e) {
                    return gf(e.value) ? null : vf.test(e.value) ? null : {
                        email: !0
                    }
                }, e.minLength = function (e) {
                    return function (n) {
                        if (gf(n.value)) return null;
                        var t = n.value ? n.value.length : 0;
                        return t < e ? {
                            minlength: {
                                requiredLength: e,
                                actualLength: t
                            }
                        } : null
                    }
                }, e.maxLength = function (e) {
                    return function (n) {
                        var t = n.value ? n.value.length : 0;
                        return t > e ? {
                            maxlength: {
                                requiredLength: e,
                                actualLength: t
                            }
                        } : null
                    }
                }, e.pattern = function (n) {
                    return n ? ("string" == typeof n ? (r = "", "^" !== n.charAt(0) && (r += "^"), r += n, "$" !== n.charAt(n.length - 1) && (r += "$"), t = new RegExp(r)) : (r = n.toString(), t = n), function (e) {
                        if (gf(e.value)) return null;
                        var n = e.value;
                        return t.test(n) ? null : {
                            pattern: {
                                requiredPattern: r,
                                actualValue: n
                            }
                        }
                    }) : e.nullValidator;
                    var t, r
                }, e.nullValidator = function (e) {
                    return null
                }, e.compose = function (e) {
                    if (!e) return null;
                    var n = e.filter(yf);
                    return 0 == n.length ? null : function (e) {
                        return Ef(function (e, t) {
                            return n.map(function (n) {
                                return n(e)
                            })
                        }(e))
                    }
                }, e.composeAsync = function (e) {
                    if (!e) return null;
                    var n = e.filter(yf);
                    return 0 == n.length ? null : function (e) {
                        return function () {
                            for (var e = [], n = 0; n < arguments.length; n++) e[n] = arguments[n];
                            if (1 === e.length) {
                                var t = e[0];
                                if (p(t)) return hf(t, null);
                                if (h(t) && Object.getPrototypeOf(t) === Object.prototype) {
                                    var r = Object.keys(t);
                                    return hf(r.map(function (e) {
                                        return t[e]
                                    }), r)
                                }
                            }
                            if ("function" == typeof e[e.length - 1]) {
                                var i = e.pop();
                                return hf(e = 1 === e.length && p(e[0]) ? e[0] : e, null).pipe(K(function (e) {
                                    return i.apply(void 0, e)
                                }))
                            }
                            return hf(e, null)
                        }(function (e, t) {
                            return n.map(function (n) {
                                return n(e)
                            })
                        }(e).map(Sf)).pipe(K(Ef))
                    }
                }, e
            }();

        function yf(e) {
            return null != e
        }

        function Sf(e) {
            var n = _t(e) ? Z(e) : e;
            if (!It(n)) throw new Error("Expected validator to return Promise or Observable.");
            return n
        }

        function Ef(e) {
            var n = e.reduce(function (e, n) {
                return null != n ? l({}, e, n) : e
            }, {});
            return 0 === Object.keys(n).length ? null : n
        }
        var bf = new ye("NgValueAccessor"),
            Of = function () {
                function e(e, n) {
                    this._renderer = e, this._elementRef = n, this.onChange = function (e) {}, this.onTouched = function () {}
                }
                return e.prototype.writeValue = function (e) {
                    this._renderer.setProperty(this._elementRef.nativeElement, "checked", e)
                }, e.prototype.registerOnChange = function (e) {
                    this.onChange = e
                }, e.prototype.registerOnTouched = function (e) {
                    this.onTouched = e
                }, e.prototype.setDisabledState = function (e) {
                    this._renderer.setProperty(this._elementRef.nativeElement, "disabled", e)
                }, e
            }(),
            Rf = new ye("CompositionEventMode"),
            Tf = function () {
                function e(e, n, t) {
                    var r;
                    this._renderer = e, this._elementRef = n, this._compositionMode = t, this.onChange = function (e) {}, this.onTouched = function () {}, this._composing = !1, null == this._compositionMode && (this._compositionMode = (r = Ja() ? Ja().getUserAgent() : "", !/android (\d+)/.test(r.toLowerCase())))
                }
                return e.prototype.writeValue = function (e) {
                    this._renderer.setProperty(this._elementRef.nativeElement, "value", null == e ? "" : e)
                }, e.prototype.registerOnChange = function (e) {
                    this.onChange = e
                }, e.prototype.registerOnTouched = function (e) {
                    this.onTouched = e
                }, e.prototype.setDisabledState = function (e) {
                    this._renderer.setProperty(this._elementRef.nativeElement, "disabled", e)
                }, e.prototype._handleInput = function (e) {
                    (!this._compositionMode || this._compositionMode && !this._composing) && this.onChange(e)
                }, e.prototype._compositionStart = function () {
                    this._composing = !0
                }, e.prototype._compositionEnd = function (e) {
                    this._composing = !1, this._compositionMode && this.onChange(e)
                }, e
            }();

        function Cf(e) {
            return e.validate ? function (n) {
                return e.validate(n)
            } : e
        }

        function _f(e) {
            return e.validate ? function (n) {
                return e.validate(n)
            } : e
        }
        var If = function () {
            function e(e, n) {
                this._renderer = e, this._elementRef = n, this.onChange = function (e) {}, this.onTouched = function () {}
            }
            return e.prototype.writeValue = function (e) {
                this._renderer.setProperty(this._elementRef.nativeElement, "value", null == e ? "" : e)
            }, e.prototype.registerOnChange = function (e) {
                this.onChange = function (n) {
                    e("" == n ? null : parseFloat(n))
                }
            }, e.prototype.registerOnTouched = function (e) {
                this.onTouched = e
            }, e.prototype.setDisabledState = function (e) {
                this._renderer.setProperty(this._elementRef.nativeElement, "disabled", e)
            }, e
        }();

        function Af() {
            throw new Error("unimplemented")
        }
        var wf = function (e) {
                function n() {
                    var n = null !== e && e.apply(this, arguments) || this;
                    return n._parent = null, n.name = null, n.valueAccessor = null, n._rawValidators = [], n._rawAsyncValidators = [], n
                }
                return i(n, e), Object.defineProperty(n.prototype, "validator", {
                    get: function () {
                        return Af()
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(n.prototype, "asyncValidator", {
                    get: function () {
                        return Af()
                    },
                    enumerable: !0,
                    configurable: !0
                }), n
            }(df),
            Nf = function () {
                function e() {
                    this._accessors = []
                }
                return e.prototype.add = function (e, n) {
                    this._accessors.push([e, n])
                }, e.prototype.remove = function (e) {
                    for (var n = this._accessors.length - 1; n >= 0; --n)
                        if (this._accessors[n][1] === e) return void this._accessors.splice(n, 1)
                }, e.prototype.select = function (e) {
                    var n = this;
                    this._accessors.forEach(function (t) {
                        n._isSameGroup(t, e) && t[1] !== e && t[1].fireUncheck(e.value)
                    })
                }, e.prototype._isSameGroup = function (e, n) {
                    return !!e[0].control && e[0]._parent === n._control._parent && e[1].name === n.name
                }, e
            }(),
            Pf = function () {
                function e(e, n, t, r) {
                    this._renderer = e, this._elementRef = n, this._registry = t, this._injector = r, this.onChange = function () {}, this.onTouched = function () {}
                }
                return e.prototype.ngOnInit = function () {
                    this._control = this._injector.get(wf), this._checkName(), this._registry.add(this._control, this)
                }, e.prototype.ngOnDestroy = function () {
                    this._registry.remove(this)
                }, e.prototype.writeValue = function (e) {
                    this._state = e === this.value, this._renderer.setProperty(this._elementRef.nativeElement, "checked", this._state)
                }, e.prototype.registerOnChange = function (e) {
                    var n = this;
                    this._fn = e, this.onChange = function () {
                        e(n.value), n._registry.select(n)
                    }
                }, e.prototype.fireUncheck = function (e) {
                    this.writeValue(e)
                }, e.prototype.registerOnTouched = function (e) {
                    this.onTouched = e
                }, e.prototype.setDisabledState = function (e) {
                    this._renderer.setProperty(this._elementRef.nativeElement, "disabled", e)
                }, e.prototype._checkName = function () {
                    this.name && this.formControlName && this.name !== this.formControlName && this._throwNameError(), !this.name && this.formControlName && (this.name = this.formControlName)
                }, e.prototype._throwNameError = function () {
                    throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')
                }, e
            }(),
            Df = function () {
                function e(e, n) {
                    this._renderer = e, this._elementRef = n, this.onChange = function (e) {}, this.onTouched = function () {}
                }
                return e.prototype.writeValue = function (e) {
                    this._renderer.setProperty(this._elementRef.nativeElement, "value", parseFloat(e))
                }, e.prototype.registerOnChange = function (e) {
                    this.onChange = function (n) {
                        e("" == n ? null : parseFloat(n))
                    }
                }, e.prototype.registerOnTouched = function (e) {
                    this.onTouched = e
                }, e.prototype.setDisabledState = function (e) {
                    this._renderer.setProperty(this._elementRef.nativeElement, "disabled", e)
                }, e
            }(),
            kf = '\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',
            Mf = '\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>';

        function Lf(e, n) {
            return null == e ? "" + n : (n && "object" == typeof n && (n = "Object"), (e + ": " + n).slice(0, 50))
        }
        var xf = function () {
                function e(e, n) {
                    this._renderer = e, this._elementRef = n, this._optionMap = new Map, this._idCounter = 0, this.onChange = function (e) {}, this.onTouched = function () {}, this._compareWith = De
                }
                return Object.defineProperty(e.prototype, "compareWith", {
                    set: function (e) {
                        if ("function" != typeof e) throw new Error("compareWith must be a function, but received " + JSON.stringify(e));
                        this._compareWith = e
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.writeValue = function (e) {
                    this.value = e;
                    var n = this._getOptionId(e);
                    null == n && this._renderer.setProperty(this._elementRef.nativeElement, "selectedIndex", -1);
                    var t = Lf(n, e);
                    this._renderer.setProperty(this._elementRef.nativeElement, "value", t)
                }, e.prototype.registerOnChange = function (e) {
                    var n = this;
                    this.onChange = function (t) {
                        n.value = n._getOptionValue(t), e(n.value)
                    }
                }, e.prototype.registerOnTouched = function (e) {
                    this.onTouched = e
                }, e.prototype.setDisabledState = function (e) {
                    this._renderer.setProperty(this._elementRef.nativeElement, "disabled", e)
                }, e.prototype._registerOption = function () {
                    return (this._idCounter++).toString()
                }, e.prototype._getOptionId = function (e) {
                    var n, t;
                    try {
                        for (var r = s(Array.from(this._optionMap.keys())), i = r.next(); !i.done; i = r.next()) {
                            var l = i.value;
                            if (this._compareWith(this._optionMap.get(l), e)) return l
                        }
                    } catch (o) {
                        n = {
                            error: o
                        }
                    } finally {
                        try {
                            i && !i.done && (t = r.return) && t.call(r)
                        } finally {
                            if (n) throw n.error
                        }
                    }
                    return null
                }, e.prototype._getOptionValue = function (e) {
                    var n = function (e) {
                        return e.split(":")[0]
                    }(e);
                    return this._optionMap.has(n) ? this._optionMap.get(n) : e
                }, e
            }(),
            Ff = function () {
                function e(e, n, t) {
                    this._element = e, this._renderer = n, this._select = t, this._select && (this.id = this._select._registerOption())
                }
                return Object.defineProperty(e.prototype, "ngValue", {
                    set: function (e) {
                        null != this._select && (this._select._optionMap.set(this.id, e), this._setElementValue(Lf(this.id, e)), this._select.writeValue(this._select.value))
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "value", {
                    set: function (e) {
                        this._setElementValue(e), this._select && this._select.writeValue(this._select.value)
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype._setElementValue = function (e) {
                    this._renderer.setProperty(this._element.nativeElement, "value", e)
                }, e.prototype.ngOnDestroy = function () {
                    this._select && (this._select._optionMap.delete(this.id), this._select.writeValue(this._select.value))
                }, e
            }();

        function Uf(e, n) {
            return null == e ? "" + n : ("string" == typeof n && (n = "'" + n + "'"), n && "object" == typeof n && (n = "Object"), (e + ": " + n).slice(0, 50))
        }
        var Hf = function () {
                function e(e, n) {
                    this._renderer = e, this._elementRef = n, this._optionMap = new Map, this._idCounter = 0, this.onChange = function (e) {}, this.onTouched = function () {}, this._compareWith = De
                }
                return Object.defineProperty(e.prototype, "compareWith", {
                    set: function (e) {
                        if ("function" != typeof e) throw new Error("compareWith must be a function, but received " + JSON.stringify(e));
                        this._compareWith = e
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.writeValue = function (e) {
                    var n, t = this;
                    if (this.value = e, Array.isArray(e)) {
                        var r = e.map(function (e) {
                            return t._getOptionId(e)
                        });
                        n = function (e, n) {
                            e._setSelected(r.indexOf(n.toString()) > -1)
                        }
                    } else n = function (e, n) {
                        e._setSelected(!1)
                    };
                    this._optionMap.forEach(n)
                }, e.prototype.registerOnChange = function (e) {
                    var n = this;
                    this.onChange = function (t) {
                        var r = [];
                        if (t.hasOwnProperty("selectedOptions"))
                            for (var i = t.selectedOptions, l = 0; l < i.length; l++) {
                                var o = i.item(l),
                                    u = n._getOptionValue(o.value);
                                r.push(u)
                            } else
                                for (i = t.options, l = 0; l < i.length; l++)(o = i.item(l)).selected && (u = n._getOptionValue(o.value), r.push(u));
                        n.value = r, e(r)
                    }
                }, e.prototype.registerOnTouched = function (e) {
                    this.onTouched = e
                }, e.prototype.setDisabledState = function (e) {
                    this._renderer.setProperty(this._elementRef.nativeElement, "disabled", e)
                }, e.prototype._registerOption = function (e) {
                    var n = (this._idCounter++).toString();
                    return this._optionMap.set(n, e), n
                }, e.prototype._getOptionId = function (e) {
                    var n, t;
                    try {
                        for (var r = s(Array.from(this._optionMap.keys())), i = r.next(); !i.done; i = r.next()) {
                            var l = i.value;
                            if (this._compareWith(this._optionMap.get(l)._value, e)) return l
                        }
                    } catch (o) {
                        n = {
                            error: o
                        }
                    } finally {
                        try {
                            i && !i.done && (t = r.return) && t.call(r)
                        } finally {
                            if (n) throw n.error
                        }
                    }
                    return null
                }, e.prototype._getOptionValue = function (e) {
                    var n = function (e) {
                        return e.split(":")[0]
                    }(e);
                    return this._optionMap.has(n) ? this._optionMap.get(n)._value : e
                }, e
            }(),
            Gf = function () {
                function e(e, n, t) {
                    this._element = e, this._renderer = n, this._select = t, this._select && (this.id = this._select._registerOption(this))
                }
                return Object.defineProperty(e.prototype, "ngValue", {
                    set: function (e) {
                        null != this._select && (this._value = e, this._setElementValue(Uf(this.id, e)), this._select.writeValue(this._select.value))
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "value", {
                    set: function (e) {
                        this._select ? (this._value = e, this._setElementValue(Uf(this.id, e)), this._select.writeValue(this._select.value)) : this._setElementValue(e)
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype._setElementValue = function (e) {
                    this._renderer.setProperty(this._element.nativeElement, "value", e)
                }, e.prototype._setSelected = function (e) {
                    this._renderer.setProperty(this._element.nativeElement, "selected", e)
                }, e.prototype.ngOnDestroy = function () {
                    this._select && (this._select._optionMap.delete(this.id), this._select.writeValue(this._select.value))
                }, e
            }();

        function Bf(e, n) {
            return c(n.path, [e])
        }

        function Vf(e, n) {
            e || jf(n, "Cannot find control with"), n.valueAccessor || jf(n, "No value accessor for form control with"), e.validator = mf.compose([e.validator, n.validator]), e.asyncValidator = mf.composeAsync([e.asyncValidator, n.asyncValidator]), n.valueAccessor.writeValue(e.value),
                function (e, n) {
                    n.valueAccessor.registerOnChange(function (t) {
                        e._pendingValue = t, e._pendingChange = !0, e._pendingDirty = !0, "change" === e.updateOn && Wf(e, n)
                    })
                }(e, n),
                function (e, n) {
                    e.registerOnChange(function (e, t) {
                        n.valueAccessor.writeValue(e), t && n.viewToModelUpdate(e)
                    })
                }(e, n),
                function (e, n) {
                    n.valueAccessor.registerOnTouched(function () {
                        e._pendingTouched = !0, "blur" === e.updateOn && e._pendingChange && Wf(e, n), "submit" !== e.updateOn && e.markAsTouched()
                    })
                }(e, n), n.valueAccessor.setDisabledState && e.registerOnDisabledChange(function (e) {
                    n.valueAccessor.setDisabledState(e)
                }), n._rawValidators.forEach(function (n) {
                    n.registerOnValidatorChange && n.registerOnValidatorChange(function () {
                        return e.updateValueAndValidity()
                    })
                }), n._rawAsyncValidators.forEach(function (n) {
                    n.registerOnValidatorChange && n.registerOnValidatorChange(function () {
                        return e.updateValueAndValidity()
                    })
                })
        }

        function Wf(e, n) {
            e._pendingDirty && e.markAsDirty(), e.setValue(e._pendingValue, {
                emitModelToViewChange: !1
            }), n.viewToModelUpdate(e._pendingValue), e._pendingChange = !1
        }

        function jf(e, n) {
            var t;
            throw t = e.path.length > 1 ? "path: '" + e.path.join(" -> ") + "'" : e.path[0] ? "name: '" + e.path + "'" : "unspecified name attribute", new Error(n + " " + t)
        }

        function Yf(e) {
            return null != e ? mf.compose(e.map(Cf)) : null
        }

        function zf(e) {
            return null != e ? mf.composeAsync(e.map(_f)) : null
        }
        var Kf = [Of, Df, If, xf, Hf, Pf],
            qf = function (e) {
                function n() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return i(n, e), n.prototype.ngOnInit = function () {
                    this._checkParentType(), this.formDirective.addFormGroup(this)
                }, n.prototype.ngOnDestroy = function () {
                    this.formDirective && this.formDirective.removeFormGroup(this)
                }, Object.defineProperty(n.prototype, "control", {
                    get: function () {
                        return this.formDirective.getFormGroup(this)
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(n.prototype, "path", {
                    get: function () {
                        return Bf(this.name, this._parent)
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(n.prototype, "formDirective", {
                    get: function () {
                        return this._parent ? this._parent.formDirective : null
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(n.prototype, "validator", {
                    get: function () {
                        return Yf(this._validators)
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(n.prototype, "asyncValidator", {
                    get: function () {
                        return zf(this._asyncValidators)
                    },
                    enumerable: !0,
                    configurable: !0
                }), n.prototype._checkParentType = function () {}, n
            }(ff),
            $f = function (e) {
                function n(n) {
                    return e.call(this, n) || this
                }
                return i(n, e), n
            }(function () {
                function e(e) {
                    this._cd = e
                }
                return Object.defineProperty(e.prototype, "ngClassUntouched", {
                    get: function () {
                        return !!this._cd.control && this._cd.control.untouched
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "ngClassTouched", {
                    get: function () {
                        return !!this._cd.control && this._cd.control.touched
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "ngClassPristine", {
                    get: function () {
                        return !!this._cd.control && this._cd.control.pristine
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "ngClassDirty", {
                    get: function () {
                        return !!this._cd.control && this._cd.control.dirty
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "ngClassValid", {
                    get: function () {
                        return !!this._cd.control && this._cd.control.valid
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "ngClassInvalid", {
                    get: function () {
                        return !!this._cd.control && this._cd.control.invalid
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "ngClassPending", {
                    get: function () {
                        return !!this._cd.control && this._cd.control.pending
                    },
                    enumerable: !0,
                    configurable: !0
                }), e
            }());

        function Qf(e) {
            var n = Xf(e) ? e.validators : e;
            return Array.isArray(n) ? Yf(n) : n || null
        }

        function Zf(e, n) {
            var t = Xf(n) ? n.asyncValidators : e;
            return Array.isArray(t) ? zf(t) : t || null
        }

        function Xf(e) {
            return null != e && !Array.isArray(e) && "object" == typeof e
        }
        var Jf, eg = function () {
                function e(e, n) {
                    this.validator = e, this.asyncValidator = n, this._onCollectionChange = function () {}, this.pristine = !0, this.touched = !1, this._onDisabledChange = []
                }
                return Object.defineProperty(e.prototype, "parent", {
                    get: function () {
                        return this._parent
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "valid", {
                    get: function () {
                        return "VALID" === this.status
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "invalid", {
                    get: function () {
                        return "INVALID" === this.status
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "pending", {
                    get: function () {
                        return "PENDING" == this.status
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "disabled", {
                    get: function () {
                        return "DISABLED" === this.status
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "enabled", {
                    get: function () {
                        return "DISABLED" !== this.status
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "dirty", {
                    get: function () {
                        return !this.pristine
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "untouched", {
                    get: function () {
                        return !this.touched
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "updateOn", {
                    get: function () {
                        return this._updateOn ? this._updateOn : this.parent ? this.parent.updateOn : "change"
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.setValidators = function (e) {
                    this.validator = Qf(e)
                }, e.prototype.setAsyncValidators = function (e) {
                    this.asyncValidator = Zf(e)
                }, e.prototype.clearValidators = function () {
                    this.validator = null
                }, e.prototype.clearAsyncValidators = function () {
                    this.asyncValidator = null
                }, e.prototype.markAsTouched = function (e) {
                    void 0 === e && (e = {}), this.touched = !0, this._parent && !e.onlySelf && this._parent.markAsTouched(e)
                }, e.prototype.markAsUntouched = function (e) {
                    void 0 === e && (e = {}), this.touched = !1, this._pendingTouched = !1, this._forEachChild(function (e) {
                        e.markAsUntouched({
                            onlySelf: !0
                        })
                    }), this._parent && !e.onlySelf && this._parent._updateTouched(e)
                }, e.prototype.markAsDirty = function (e) {
                    void 0 === e && (e = {}), this.pristine = !1, this._parent && !e.onlySelf && this._parent.markAsDirty(e)
                }, e.prototype.markAsPristine = function (e) {
                    void 0 === e && (e = {}), this.pristine = !0, this._pendingDirty = !1, this._forEachChild(function (e) {
                        e.markAsPristine({
                            onlySelf: !0
                        })
                    }), this._parent && !e.onlySelf && this._parent._updatePristine(e)
                }, e.prototype.markAsPending = function (e) {
                    void 0 === e && (e = {}), this.status = "PENDING", !1 !== e.emitEvent && this.statusChanges.emit(this.status), this._parent && !e.onlySelf && this._parent.markAsPending(e)
                }, e.prototype.disable = function (e) {
                    void 0 === e && (e = {}), this.status = "DISABLED", this.errors = null, this._forEachChild(function (n) {
                        n.disable(l({}, e, {
                            onlySelf: !0
                        }))
                    }), this._updateValue(), !1 !== e.emitEvent && (this.valueChanges.emit(this.value), this.statusChanges.emit(this.status)), this._updateAncestors(e), this._onDisabledChange.forEach(function (e) {
                        return e(!0)
                    })
                }, e.prototype.enable = function (e) {
                    void 0 === e && (e = {}), this.status = "VALID", this._forEachChild(function (n) {
                        n.enable(l({}, e, {
                            onlySelf: !0
                        }))
                    }), this.updateValueAndValidity({
                        onlySelf: !0,
                        emitEvent: e.emitEvent
                    }), this._updateAncestors(e), this._onDisabledChange.forEach(function (e) {
                        return e(!1)
                    })
                }, e.prototype._updateAncestors = function (e) {
                    this._parent && !e.onlySelf && (this._parent.updateValueAndValidity(e), this._parent._updatePristine(), this._parent._updateTouched())
                }, e.prototype.setParent = function (e) {
                    this._parent = e
                }, e.prototype.updateValueAndValidity = function (e) {
                    void 0 === e && (e = {}), this._setInitialStatus(), this._updateValue(), this.enabled && (this._cancelExistingSubscription(), this.errors = this._runValidator(), this.status = this._calculateStatus(), "VALID" !== this.status && "PENDING" !== this.status || this._runAsyncValidator(e.emitEvent)), !1 !== e.emitEvent && (this.valueChanges.emit(this.value), this.statusChanges.emit(this.status)), this._parent && !e.onlySelf && this._parent.updateValueAndValidity(e)
                }, e.prototype._updateTreeValidity = function (e) {
                    void 0 === e && (e = {
                        emitEvent: !0
                    }), this._forEachChild(function (n) {
                        return n._updateTreeValidity(e)
                    }), this.updateValueAndValidity({
                        onlySelf: !0,
                        emitEvent: e.emitEvent
                    })
                }, e.prototype._setInitialStatus = function () {
                    this.status = this._allControlsDisabled() ? "DISABLED" : "VALID"
                }, e.prototype._runValidator = function () {
                    return this.validator ? this.validator(this) : null
                }, e.prototype._runAsyncValidator = function (e) {
                    var n = this;
                    if (this.asyncValidator) {
                        this.status = "PENDING";
                        var t = Sf(this.asyncValidator(this));
                        this._asyncValidationSubscription = t.subscribe(function (t) {
                            return n.setErrors(t, {
                                emitEvent: e
                            })
                        })
                    }
                }, e.prototype._cancelExistingSubscription = function () {
                    this._asyncValidationSubscription && this._asyncValidationSubscription.unsubscribe()
                }, e.prototype.setErrors = function (e, n) {
                    void 0 === n && (n = {}), this.errors = e, this._updateControlsErrors(!1 !== n.emitEvent)
                }, e.prototype.get = function (e) {
                    return function (e, n, t) {
                        return null == n ? null : (n instanceof Array || (n = n.split(".")), n instanceof Array && 0 === n.length ? null : n.reduce(function (e, n) {
                            return e instanceof tg ? e.controls.hasOwnProperty(n) ? e.controls[n] : null : e instanceof rg && e.at(n) || null
                        }, e))
                    }(this, e)
                }, e.prototype.getError = function (e, n) {
                    var t = n ? this.get(n) : this;
                    return t && t.errors ? t.errors[e] : null
                }, e.prototype.hasError = function (e, n) {
                    return !!this.getError(e, n)
                }, Object.defineProperty(e.prototype, "root", {
                    get: function () {
                        for (var e = this; e._parent;) e = e._parent;
                        return e
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype._updateControlsErrors = function (e) {
                    this.status = this._calculateStatus(), e && this.statusChanges.emit(this.status), this._parent && this._parent._updateControlsErrors(e)
                }, e.prototype._initObservables = function () {
                    this.valueChanges = new pt, this.statusChanges = new pt
                }, e.prototype._calculateStatus = function () {
                    return this._allControlsDisabled() ? "DISABLED" : this.errors ? "INVALID" : this._anyControlsHaveStatus("PENDING") ? "PENDING" : this._anyControlsHaveStatus("INVALID") ? "INVALID" : "VALID"
                }, e.prototype._anyControlsHaveStatus = function (e) {
                    return this._anyControls(function (n) {
                        return n.status === e
                    })
                }, e.prototype._anyControlsDirty = function () {
                    return this._anyControls(function (e) {
                        return e.dirty
                    })
                }, e.prototype._anyControlsTouched = function () {
                    return this._anyControls(function (e) {
                        return e.touched
                    })
                }, e.prototype._updatePristine = function (e) {
                    void 0 === e && (e = {}), this.pristine = !this._anyControlsDirty(), this._parent && !e.onlySelf && this._parent._updatePristine(e)
                }, e.prototype._updateTouched = function (e) {
                    void 0 === e && (e = {}), this.touched = this._anyControlsTouched(), this._parent && !e.onlySelf && this._parent._updateTouched(e)
                }, e.prototype._isBoxedValue = function (e) {
                    return "object" == typeof e && null !== e && 2 === Object.keys(e).length && "value" in e && "disabled" in e
                }, e.prototype._registerOnCollectionChange = function (e) {
                    this._onCollectionChange = e
                }, e.prototype._setUpdateStrategy = function (e) {
                    Xf(e) && null != e.updateOn && (this._updateOn = e.updateOn)
                }, e
            }(),
            ng = function (e) {
                function n(n, t, r) {
                    void 0 === n && (n = null);
                    var i = e.call(this, Qf(t), Zf(r, t)) || this;
                    return i._onChange = [], i._applyFormState(n), i._setUpdateStrategy(t), i.updateValueAndValidity({
                        onlySelf: !0,
                        emitEvent: !1
                    }), i._initObservables(), i
                }
                return i(n, e), n.prototype.setValue = function (e, n) {
                    var t = this;
                    void 0 === n && (n = {}), this.value = this._pendingValue = e, this._onChange.length && !1 !== n.emitModelToViewChange && this._onChange.forEach(function (e) {
                        return e(t.value, !1 !== n.emitViewToModelChange)
                    }), this.updateValueAndValidity(n)
                }, n.prototype.patchValue = function (e, n) {
                    void 0 === n && (n = {}), this.setValue(e, n)
                }, n.prototype.reset = function (e, n) {
                    void 0 === e && (e = null), void 0 === n && (n = {}), this._applyFormState(e), this.markAsPristine(n), this.markAsUntouched(n), this.setValue(this.value, n), this._pendingChange = !1
                }, n.prototype._updateValue = function () {}, n.prototype._anyControls = function (e) {
                    return !1
                }, n.prototype._allControlsDisabled = function () {
                    return this.disabled
                }, n.prototype.registerOnChange = function (e) {
                    this._onChange.push(e)
                }, n.prototype._clearChangeFns = function () {
                    this._onChange = [], this._onDisabledChange = [], this._onCollectionChange = function () {}
                }, n.prototype.registerOnDisabledChange = function (e) {
                    this._onDisabledChange.push(e)
                }, n.prototype._forEachChild = function (e) {}, n.prototype._syncPendingControls = function () {
                    return !("submit" !== this.updateOn || (this._pendingDirty && this.markAsDirty(), this._pendingTouched && this.markAsTouched(), !this._pendingChange) || (this.setValue(this._pendingValue, {
                        onlySelf: !0,
                        emitModelToViewChange: !1
                    }), 0))
                }, n.prototype._applyFormState = function (e) {
                    this._isBoxedValue(e) ? (this.value = this._pendingValue = e.value, e.disabled ? this.disable({
                        onlySelf: !0,
                        emitEvent: !1
                    }) : this.enable({
                        onlySelf: !0,
                        emitEvent: !1
                    })) : this.value = this._pendingValue = e
                }, n
            }(eg),
            tg = function (e) {
                function n(n, t, r) {
                    var i = e.call(this, Qf(t), Zf(r, t)) || this;
                    return i.controls = n, i._initObservables(), i._setUpdateStrategy(t), i._setUpControls(), i.updateValueAndValidity({
                        onlySelf: !0,
                        emitEvent: !1
                    }), i
                }
                return i(n, e), n.prototype.registerControl = function (e, n) {
                    return this.controls[e] ? this.controls[e] : (this.controls[e] = n, n.setParent(this), n._registerOnCollectionChange(this._onCollectionChange), n)
                }, n.prototype.addControl = function (e, n) {
                    this.registerControl(e, n), this.updateValueAndValidity(), this._onCollectionChange()
                }, n.prototype.removeControl = function (e) {
                    this.controls[e] && this.controls[e]._registerOnCollectionChange(function () {}), delete this.controls[e], this.updateValueAndValidity(), this._onCollectionChange()
                }, n.prototype.setControl = function (e, n) {
                    this.controls[e] && this.controls[e]._registerOnCollectionChange(function () {}), delete this.controls[e], n && this.registerControl(e, n), this.updateValueAndValidity(), this._onCollectionChange()
                }, n.prototype.contains = function (e) {
                    return this.controls.hasOwnProperty(e) && this.controls[e].enabled
                }, n.prototype.setValue = function (e, n) {
                    var t = this;
                    void 0 === n && (n = {}), this._checkAllValuesPresent(e), Object.keys(e).forEach(function (r) {
                        t._throwIfControlMissing(r), t.controls[r].setValue(e[r], {
                            onlySelf: !0,
                            emitEvent: n.emitEvent
                        })
                    }), this.updateValueAndValidity(n)
                }, n.prototype.patchValue = function (e, n) {
                    var t = this;
                    void 0 === n && (n = {}), Object.keys(e).forEach(function (r) {
                        t.controls[r] && t.controls[r].patchValue(e[r], {
                            onlySelf: !0,
                            emitEvent: n.emitEvent
                        })
                    }), this.updateValueAndValidity(n)
                }, n.prototype.reset = function (e, n) {
                    void 0 === e && (e = {}), void 0 === n && (n = {}), this._forEachChild(function (t, r) {
                        t.reset(e[r], {
                            onlySelf: !0,
                            emitEvent: n.emitEvent
                        })
                    }), this.updateValueAndValidity(n), this._updatePristine(n), this._updateTouched(n)
                }, n.prototype.getRawValue = function () {
                    return this._reduceChildren({}, function (e, n, t) {
                        return e[t] = n instanceof ng ? n.value : n.getRawValue(), e
                    })
                }, n.prototype._syncPendingControls = function () {
                    var e = this._reduceChildren(!1, function (e, n) {
                        return !!n._syncPendingControls() || e
                    });
                    return e && this.updateValueAndValidity({
                        onlySelf: !0
                    }), e
                }, n.prototype._throwIfControlMissing = function (e) {
                    if (!Object.keys(this.controls).length) throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");
                    if (!this.controls[e]) throw new Error("Cannot find form control with name: " + e + ".")
                }, n.prototype._forEachChild = function (e) {
                    var n = this;
                    Object.keys(this.controls).forEach(function (t) {
                        return e(n.controls[t], t)
                    })
                }, n.prototype._setUpControls = function () {
                    var e = this;
                    this._forEachChild(function (n) {
                        n.setParent(e), n._registerOnCollectionChange(e._onCollectionChange)
                    })
                }, n.prototype._updateValue = function () {
                    this.value = this._reduceValue()
                }, n.prototype._anyControls = function (e) {
                    var n = this,
                        t = !1;
                    return this._forEachChild(function (r, i) {
                        t = t || n.contains(i) && e(r)
                    }), t
                }, n.prototype._reduceValue = function () {
                    var e = this;
                    return this._reduceChildren({}, function (n, t, r) {
                        return (t.enabled || e.disabled) && (n[r] = t.value), n
                    })
                }, n.prototype._reduceChildren = function (e, n) {
                    var t = e;
                    return this._forEachChild(function (e, r) {
                        t = n(t, e, r)
                    }), t
                }, n.prototype._allControlsDisabled = function () {
                    var e, n;
                    try {
                        for (var t = s(Object.keys(this.controls)), r = t.next(); !r.done; r = t.next())
                            if (this.controls[r.value].enabled) return !1
                    } catch (i) {
                        e = {
                            error: i
                        }
                    } finally {
                        try {
                            r && !r.done && (n = t.return) && n.call(t)
                        } finally {
                            if (e) throw e.error
                        }
                    }
                    return Object.keys(this.controls).length > 0 || this.disabled
                }, n.prototype._checkAllValuesPresent = function (e) {
                    this._forEachChild(function (n, t) {
                        if (void 0 === e[t]) throw new Error("Must supply a value for form control with name: '" + t + "'.")
                    })
                }, n
            }(eg),
            rg = function (e) {
                function n(n, t, r) {
                    var i = e.call(this, Qf(t), Zf(r, t)) || this;
                    return i.controls = n, i._initObservables(), i._setUpdateStrategy(t), i._setUpControls(), i.updateValueAndValidity({
                        onlySelf: !0,
                        emitEvent: !1
                    }), i
                }
                return i(n, e), n.prototype.at = function (e) {
                    return this.controls[e]
                }, n.prototype.push = function (e) {
                    this.controls.push(e), this._registerControl(e), this.updateValueAndValidity(), this._onCollectionChange()
                }, n.prototype.insert = function (e, n) {
                    this.controls.splice(e, 0, n), this._registerControl(n), this.updateValueAndValidity()
                }, n.prototype.removeAt = function (e) {
                    this.controls[e] && this.controls[e]._registerOnCollectionChange(function () {}), this.controls.splice(e, 1), this.updateValueAndValidity()
                }, n.prototype.setControl = function (e, n) {
                    this.controls[e] && this.controls[e]._registerOnCollectionChange(function () {}), this.controls.splice(e, 1), n && (this.controls.splice(e, 0, n), this._registerControl(n)), this.updateValueAndValidity(), this._onCollectionChange()
                }, Object.defineProperty(n.prototype, "length", {
                    get: function () {
                        return this.controls.length
                    },
                    enumerable: !0,
                    configurable: !0
                }), n.prototype.setValue = function (e, n) {
                    var t = this;
                    void 0 === n && (n = {}), this._checkAllValuesPresent(e), e.forEach(function (e, r) {
                        t._throwIfControlMissing(r), t.at(r).setValue(e, {
                            onlySelf: !0,
                            emitEvent: n.emitEvent
                        })
                    }), this.updateValueAndValidity(n)
                }, n.prototype.patchValue = function (e, n) {
                    var t = this;
                    void 0 === n && (n = {}), e.forEach(function (e, r) {
                        t.at(r) && t.at(r).patchValue(e, {
                            onlySelf: !0,
                            emitEvent: n.emitEvent
                        })
                    }), this.updateValueAndValidity(n)
                }, n.prototype.reset = function (e, n) {
                    void 0 === e && (e = []), void 0 === n && (n = {}), this._forEachChild(function (t, r) {
                        t.reset(e[r], {
                            onlySelf: !0,
                            emitEvent: n.emitEvent
                        })
                    }), this.updateValueAndValidity(n), this._updatePristine(n), this._updateTouched(n)
                }, n.prototype.getRawValue = function () {
                    return this.controls.map(function (e) {
                        return e instanceof ng ? e.value : e.getRawValue()
                    })
                }, n.prototype._syncPendingControls = function () {
                    var e = this.controls.reduce(function (e, n) {
                        return !!n._syncPendingControls() || e
                    }, !1);
                    return e && this.updateValueAndValidity({
                        onlySelf: !0
                    }), e
                }, n.prototype._throwIfControlMissing = function (e) {
                    if (!this.controls.length) throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");
                    if (!this.at(e)) throw new Error("Cannot find form control at index " + e)
                }, n.prototype._forEachChild = function (e) {
                    this.controls.forEach(function (n, t) {
                        e(n, t)
                    })
                }, n.prototype._updateValue = function () {
                    var e = this;
                    this.value = this.controls.filter(function (n) {
                        return n.enabled || e.disabled
                    }).map(function (e) {
                        return e.value
                    })
                }, n.prototype._anyControls = function (e) {
                    return this.controls.some(function (n) {
                        return n.enabled && e(n)
                    })
                }, n.prototype._setUpControls = function () {
                    var e = this;
                    this._forEachChild(function (n) {
                        return e._registerControl(n)
                    })
                }, n.prototype._checkAllValuesPresent = function (e) {
                    this._forEachChild(function (n, t) {
                        if (void 0 === e[t]) throw new Error("Must supply a value for form control at index: " + t + ".")
                    })
                }, n.prototype._allControlsDisabled = function () {
                    var e, n;
                    try {
                        for (var t = s(this.controls), r = t.next(); !r.done; r = t.next())
                            if (r.value.enabled) return !1
                    } catch (i) {
                        e = {
                            error: i
                        }
                    } finally {
                        try {
                            r && !r.done && (n = t.return) && n.call(t)
                        } finally {
                            if (e) throw e.error
                        }
                    }
                    return this.controls.length > 0 || this.disabled
                }, n.prototype._registerControl = function (e) {
                    e.setParent(this), e._registerOnCollectionChange(this._onCollectionChange)
                }, n
            }(eg),
            ig = Promise.resolve(null),
            lg = function (e) {
                function n(n, t) {
                    var r = e.call(this) || this;
                    return r.submitted = !1, r._directives = [], r.ngSubmit = new pt, r.form = new tg({}, Yf(n), zf(t)), r
                }
                return i(n, e), n.prototype.ngAfterViewInit = function () {
                    this._setUpdateStrategy()
                }, Object.defineProperty(n.prototype, "formDirective", {
                    get: function () {
                        return this
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(n.prototype, "control", {
                    get: function () {
                        return this.form
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(n.prototype, "path", {
                    get: function () {
                        return []
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(n.prototype, "controls", {
                    get: function () {
                        return this.form.controls
                    },
                    enumerable: !0,
                    configurable: !0
                }), n.prototype.addControl = function (e) {
                    var n = this;
                    ig.then(function () {
                        var t = n._findContainer(e.path);
                        e.control = t.registerControl(e.name, e.control), Vf(e.control, e), e.control.updateValueAndValidity({
                            emitEvent: !1
                        }), n._directives.push(e)
                    })
                }, n.prototype.getControl = function (e) {
                    return this.form.get(e.path)
                }, n.prototype.removeControl = function (e) {
                    var n = this;
                    ig.then(function () {
                        var t, r, i = n._findContainer(e.path);
                        i && i.removeControl(e.name), (r = (t = n._directives).indexOf(e)) > -1 && t.splice(r, 1)
                    })
                }, n.prototype.addFormGroup = function (e) {
                    var n = this;
                    ig.then(function () {
                        var t = n._findContainer(e.path),
                            r = new tg({});
                        (function (e, n) {
                            null == e && jf(n, "Cannot find control with"), e.validator = mf.compose([e.validator, n.validator]), e.asyncValidator = mf.composeAsync([e.asyncValidator, n.asyncValidator])
                        })(r, e), t.registerControl(e.name, r), r.updateValueAndValidity({
                            emitEvent: !1
                        })
                    })
                }, n.prototype.removeFormGroup = function (e) {
                    var n = this;
                    ig.then(function () {
                        var t = n._findContainer(e.path);
                        t && t.removeControl(e.name)
                    })
                }, n.prototype.getFormGroup = function (e) {
                    return this.form.get(e.path)
                }, n.prototype.updateModel = function (e, n) {
                    var t = this;
                    ig.then(function () {
                        t.form.get(e.path).setValue(n)
                    })
                }, n.prototype.setValue = function (e) {
                    this.control.setValue(e)
                }, n.prototype.onSubmit = function (e) {
                    return this.submitted = !0, n = this._directives, this.form._syncPendingControls(), n.forEach(function (e) {
                        var n = e.control;
                        "submit" === n.updateOn && n._pendingChange && (e.viewToModelUpdate(n._pendingValue), n._pendingChange = !1)
                    }), this.ngSubmit.emit(e), !1;
                    var n
                }, n.prototype.onReset = function () {
                    this.resetForm()
                }, n.prototype.resetForm = function (e) {
                    void 0 === e && (e = void 0), this.form.reset(e), this.submitted = !1
                }, n.prototype._setUpdateStrategy = function () {
                    this.options && null != this.options.updateOn && (this.form._updateOn = this.options.updateOn)
                }, n.prototype._findContainer = function (e) {
                    return e.pop(), e.length ? this.form.get(e) : this.form
                }, n
            }(ff),
            og = function () {
                function e() {}
                return e.modelParentException = function () {
                    throw new Error('\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup\'s partner directive "formControlName" instead.  Example:\n\n      \n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });\n\n      Or, if you\'d like to avoid registering this form control, indicate that it\'s standalone in ngModelOptions:\n\n      Example:\n\n      \n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  ')
                }, e.formGroupNameException = function () {
                    throw new Error("\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      " + kf + "\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      " + Mf)
                }, e.missingNameException = function () {
                    throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')
                }, e.modelGroupParentException = function () {
                    throw new Error("\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      " + kf + "\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      " + Mf)
                }, e.ngFormWarning = function () {
                    console.warn("\n    It looks like you're using 'ngForm'.\n\n    Support for using the 'ngForm' element selector has been deprecated in Angular v6 and will be removed\n    in Angular v9.\n\n    Use 'ng-form' instead.\n\n    Before:\n    <ngForm #myForm=\"ngForm\">\n\n    After:\n    <ng-form #myForm=\"ngForm\">\n    ")
                }, e
            }(),
            ug = new ye("NgFormSelectorWarning"),
            sg = function (e) {
                function n(n, t, r) {
                    var i = e.call(this) || this;
                    return i._parent = n, i._validators = t, i._asyncValidators = r, i
                }
                var t;
                return i(n, e), t = n, n.prototype._checkParentType = function () {
                    this._parent instanceof t || this._parent instanceof lg || og.modelGroupParentException()
                }, n
            }(qf),
            ag = Promise.resolve(null),
            cg = function (e) {
                function n(n, t, r, i) {
                    var l = e.call(this) || this;
                    return l.control = new ng, l._registered = !1, l.update = new pt, l._parent = n, l._rawValidators = t || [], l._rawAsyncValidators = r || [], l.valueAccessor = function (e, n) {
                        if (!n) return null;
                        Array.isArray(n) || jf(e, "Value accessor was not provided as an array for form control with");
                        var t = void 0,
                            r = void 0,
                            i = void 0;
                        return n.forEach(function (n) {
                            var l;
                            n.constructor === Tf ? t = n : (l = n, Kf.some(function (e) {
                                return l.constructor === e
                            }) ? (r && jf(e, "More than one built-in value accessor matches form control with"), r = n) : (i && jf(e, "More than one custom value accessor matches form control with"), i = n))
                        }), i || r || t || (jf(e, "No valid value accessor for form control with"), null)
                    }(l, i), l
                }
                return i(n, e), n.prototype.ngOnChanges = function (e) {
                    this._checkForErrors(), this._registered || this._setUpControl(), "isDisabled" in e && this._updateDisabled(e),
                        function (e, n) {
                            if (!e.hasOwnProperty("model")) return !1;
                            var t = e.model;
                            return !!t.isFirstChange() || !De(n, t.currentValue)
                        }(e, this.viewModel) && (this._updateValue(this.model), this.viewModel = this.model)
                }, n.prototype.ngOnDestroy = function () {
                    this.formDirective && this.formDirective.removeControl(this)
                }, Object.defineProperty(n.prototype, "path", {
                    get: function () {
                        return this._parent ? Bf(this.name, this._parent) : [this.name]
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(n.prototype, "formDirective", {
                    get: function () {
                        return this._parent ? this._parent.formDirective : null
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(n.prototype, "validator", {
                    get: function () {
                        return Yf(this._rawValidators)
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(n.prototype, "asyncValidator", {
                    get: function () {
                        return zf(this._rawAsyncValidators)
                    },
                    enumerable: !0,
                    configurable: !0
                }), n.prototype.viewToModelUpdate = function (e) {
                    this.viewModel = e, this.update.emit(e)
                }, n.prototype._setUpControl = function () {
                    this._setUpdateStrategy(), this._isStandalone() ? this._setUpStandalone() : this.formDirective.addControl(this), this._registered = !0
                }, n.prototype._setUpdateStrategy = function () {
                    this.options && null != this.options.updateOn && (this.control._updateOn = this.options.updateOn)
                }, n.prototype._isStandalone = function () {
                    return !this._parent || !(!this.options || !this.options.standalone)
                }, n.prototype._setUpStandalone = function () {
                    Vf(this.control, this), this.control.updateValueAndValidity({
                        emitEvent: !1
                    })
                }, n.prototype._checkForErrors = function () {
                    this._isStandalone() || this._checkParentType(), this._checkName()
                }, n.prototype._checkParentType = function () {
                    !(this._parent instanceof sg) && this._parent instanceof qf ? og.formGroupNameException() : this._parent instanceof sg || this._parent instanceof lg || og.modelParentException()
                }, n.prototype._checkName = function () {
                    this.options && this.options.name && (this.name = this.options.name), this._isStandalone() || this.name || og.missingNameException()
                }, n.prototype._updateValue = function (e) {
                    var n = this;
                    ag.then(function () {
                        n.control.setValue(e, {
                            emitViewToModelChange: !1
                        })
                    })
                }, n.prototype._updateDisabled = function (e) {
                    var n = this,
                        t = e.isDisabled.currentValue,
                        r = "" === t || t && "false" !== t;
                    ag.then(function () {
                        r && !n.control.disabled ? n.control.disable() : !r && n.control.disabled && n.control.enable()
                    })
                }, n
            }(wf),
            pg = function () {
                return function () {}
            }(),
            hg = function () {
                function e() {}
                var n;
                return n = e, e.withConfig = function (e) {
                    return {
                        ngModule: n,
                        providers: [{
                            provide: ug,
                            useValue: e.warnOnDeprecatedNgFormSelector
                        }]
                    }
                }, e
            }(),
            dg = function () {
                function e(e, n, t, r, i, l, o, u, s) {
                    this.resource = e, this.name = n, this.amount = t, this.limit = r, this.reserved = i, this.resourceTypes = l, this.visible = o, this.highlighted = u, this.prioritise = s
                }
                return e.prototype.toJSON = function () {
                    return {
                        amount: this.amount,
                        limit: this.limit,
                        visible: this.visible,
                        highlighted: this.highlighted,
                        reserved: this.reserved,
                        prioritise: this.prioritise
                    }
                }, e.prototype.addResource = function (e) {
                    return this.amount + e > this.limit ? (this.amount = this.limit, this.amount) : (this.amount += e, this.amount)
                }, e.prototype.removeResource = function (e) {
                    return this.amount - e > 0 && (this.amount -= e, !0)
                }, e.prototype.getResource = function () {
                    return this.resource
                }, e.prototype.getName = function () {
                    return this.name
                }, e.prototype.getAmount = function () {
                    return this.amount
                }, e.prototype.getLimit = function () {
                    return this.limit
                }, e.prototype.getResourceTypes = function () {
                    return this.resourceTypes
                }, e.prototype.hasResourceType = function (e) {
                    return this.resourceTypes.indexOf(e) > -1
                }, e.prototype.isVisible = function () {
                    return this.visible
                }, e.prototype.toggleVisible = function () {
                    return this.visible = !this.visible, this.visible
                }, e.prototype.isHighlighted = function () {
                    return this.highlighted
                }, e.prototype.toggleHighlighted = function () {
                    return this.highlighted = !this.highlighted, this.highlighted
                }, e.prototype.getFreeSpace = function () {
                    return this.limit - this.amount
                }, e
            }(),
            fg = function () {
                function e() {
                    this.amount = 0, this.limit = 0, this.reserved = 0, this.resourceTypes = [], this.visible = !1, this.highlighted = !1, this.prioritise = !1
                }
                return e.prototype.forResource = function (e) {
                    return this.resource = e, this
                }, e.prototype.withName = function (e) {
                    return this.name = e, this
                }, e.prototype.withAmount = function (e) {
                    return this.amount = e, this
                }, e.prototype.withLimit = function (e) {
                    return this.limit = e, this
                }, e.prototype.withReserved = function (e) {
                    return this.reserved = e, this
                }, e.prototype.withResourceTypes = function (e) {
                    var n = this;
                    return e.forEach(function (e) {
                        return n.resourceTypes.push(e)
                    }), this
                }, e.prototype.withResourceType = function (e) {
                    return this.resourceTypes.push(e), this
                }, e.prototype.withVisible = function (e) {
                    return this.visible = e, this
                }, e.prototype.withHighlighted = function (e) {
                    return this.highlighted = e, this
                }, e.prototype.withPrioritise = function (e) {
                    return this.prioritise = e, this
                }, e.prototype.build = function () {
                    var e = new dg(this.resource, this.name, this.amount, this.limit, this.reserved, this.resourceTypes, this.visible, this.highlighted, this.prioritise);
                    return this.resource = void 0, this.name = void 0, this.amount = 0, this.limit = 0, this.reserved = 0, this.resourceTypes = [], this.visible = !1, this.highlighted = !1, this.prioritise = !1, e
                }, e
            }(),
            gg = function () {
                return function (e, n, t) {
                    this.message = e, this.day = t, this.type = n
                }
            }(),
            vg = function () {
                function e() {
                    this.services = new Map
                }
                return e.prototype.addService = function (e, n) {
                    this.services.set(e, n)
                }, e.prototype.getService = function (e) {
                    return this.services.get(e)
                }, e.prototype.getServiceByRegion = function (e) {
                    switch (e) {
                        case Mu.VILLAGE:
                            return this.services.get(Nu.VILLAGE);
                        case Mu.FORT:
                            return this.services.get(Nu.FORT);
                        case Mu.FIELD:
                            return this.services.get(Nu.FIELD);
                        case Mu.FOREST:
                            return this.services.get(Nu.FOREST);
                        case Mu.MOUNTAINS:
                            return this.services.get(Nu.MOUNTAINS);
                        case Mu.SEA:
                            return this.services.get(Nu.SEA);
                        case Mu.PLATEAU:
                            return this.services.get(Nu.PLATEAU);
                        default:
                            console.error("Region service not found for [" + Mu[e] + "]")
                    }
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            mg = function (e) {
                return e[e.AUTO_SAVE_STATUS = 0] = "AUTO_SAVE_STATUS", e[e.AUTO_SAVE_PERIOD = 1] = "AUTO_SAVE_PERIOD", e[e.METRIC = 2] = "METRIC", e[e.SAVE_LOGS = 3] = "SAVE_LOGS", e[e.SOUND = 4] = "SOUND", e[e.SOUND_VOLUME = 5] = "SOUND_VOLUME", e[e.VISUAL_PROGRESS_BARS = 6] = "VISUAL_PROGRESS_BARS", e
            }({}),
            yg = function () {
                function e() {
                    this.optionsSubject = new L, this.options = new Map
                }
                return e.prototype.init = function () {
                    this.options.set(mg.AUTO_SAVE_STATUS, !0), this.options.set(mg.AUTO_SAVE_PERIOD, 5), this.options.set(mg.METRIC, !0), this.options.set(mg.SAVE_LOGS, !1), this.options.set(mg.SOUND, !0), this.options.set(mg.SOUND_VOLUME, 100), this.options.set(mg.VISUAL_PROGRESS_BARS, !0), this.optionsSubject.next()
                }, e.prototype.load = function (e) {
                    this.options = new Map(JSON.parse(e.options)), this.options.has(mg.VISUAL_PROGRESS_BARS) || this.options.set(mg.VISUAL_PROGRESS_BARS, !0), this.optionsSubject.next()
                }, e.prototype.save = function () {
                    return {
                        options: JSON.stringify(Array.from(this.options.entries()))
                    }
                }, e.prototype.reset = function (e, n) {
                    e && this.init()
                }, e.prototype.registerForOptionsChange = function () {
                    return this.optionsSubject.asObservable()
                }, e.prototype.setOption = function (e, n) {
                    this.options.set(e, n), this.optionsSubject.next()
                }, e.prototype.setOptions = function (e) {
                    for (var n = 0, t = e; n < t.length; n++) {
                        var r = t[n];
                        this.options.set(r.option, r.value)
                    }
                    this.optionsSubject.next()
                }, e.prototype.getOption = function (e) {
                    return this.options.get(e)
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            Sg = function (e) {
                return e[e.LOG = 0] = "LOG", e[e.WARNING = 1] = "WARNING", e[e.SUCCESS = 2] = "SUCCESS", e
            }({}),
            Eg = function (e) {
                return e[e.SPRING = 0] = "SPRING", e[e.SUMMER = 1] = "SUMMER", e[e.AUTUMN = 2] = "AUTUMN", e[e.WINTER = 3] = "WINTER", e
            }({}),
            bg = function () {
                function e(e) {
                    this.servicesService = e, this.daySubject = new L, this.year = 1, this.day = 1, this.tickInDay = 0, this.season = Eg.SPRING, e.addService(Nu.CALENDAR, this)
                }
                return e.prototype.load = function (e) {
                    this.day = e.day, this.year = e.year, this.season = e.season, this.tickInDay = e.tickInDay
                }, e.prototype.save = function () {
                    return {
                        day: this.day,
                        year: this.year,
                        season: this.season,
                        tickInDay: this.tickInDay
                    }
                }, e.prototype.reset = function (e, n) {
                    this.day = 1, this.tickInDay = 0, this.season = Eg.SPRING, e ? this.year = 1 : this.year += 1
                }, e.prototype.tick = function (e) {
                    this.tickInDay += 1, 11 === this.tickInDay && (this.tickInDay = 0, this.day += 1, this.day === Yu + 1 && (this.day = 1, this.year += 1, this.servicesService.getService(Nu.GAME).isEnabled(Eu.CALENDAR) && this.servicesService.getService(Nu.LOG).success("New Year!")), this.daySubject.next(this.day)), this.day >= 1 && this.day <= Yu / 4 ? this.season = Eg.SPRING : this.day > Yu / 4 && this.day <= Yu / 2 ? this.season = Eg.SUMMER : this.day > Yu / 2 && this.day <= Yu / 4 * 3 ? this.season = Eg.AUTUMN : this.day > Yu / 4 * 3 && this.day <= Yu && (this.season = Eg.WINTER)
                }, e.prototype.getDay = function () {
                    return this.day
                }, e.prototype.getYear = function () {
                    return this.year
                }, e.prototype.getSeason = function () {
                    return this.season
                }, e.prototype.getAbsoluteDay = function () {
                    return (this.year - 1) * Yu + this.day
                }, e.prototype.getSeasonForAbsoluteDay = function (e) {
                    var n = (e - 1) % Yu + 1;
                    return n >= 1 && n <= Yu / 4 ? Eg.SPRING : n > Yu / 4 && n <= Yu / 2 ? Eg.SUMMER : n > Yu / 2 && n <= Yu / 4 * 3 ? Eg.AUTUMN : n > Yu / 4 * 3 && n <= Yu ? Eg.WINTER : void 0
                }, e.prototype.registerForDayChange = function () {
                    return this.daySubject.asObservable()
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(vg))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            Og = function () {
                function e(e, n, t) {
                    this.servicesService = e, this.calendarService = n, this.optionsService = t, this.entries = [], this.servicesService.addService(Nu.LOG, this), this.logSubject = new L
                }
                return e.prototype.log = function (e) {
                    this.entries.push(new gg(e, Sg.LOG, this.calendarService.getDay())), this.logSubject.next()
                }, e.prototype.warning = function (e) {
                    this.entries.push(new gg(e, Sg.WARNING, this.calendarService.getDay())), this.logSubject.next()
                }, e.prototype.success = function (e) {
                    this.entries.push(new gg(e, Sg.SUCCESS, this.calendarService.getDay())), this.logSubject.next()
                }, e.prototype.registerForLogs = function () {
                    return this.logSubject.asObservable()
                }, e.prototype.getEntries = function () {
                    return this.entries
                }, e.prototype.clearEntries = function () {
                    this.entries = [], this.logSubject.next()
                }, e.prototype.load = function (e) {
                    this.entries = e.logs
                }, e.prototype.reset = function (e, n) {
                    this.entries = []
                }, e.prototype.save = function () {
                    return this.optionsService.getOption(mg.SAVE_LOGS) ? {
                        logs: this.entries
                    } : {
                        logs: []
                    }
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(vg), ze(bg), ze(yg))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }();
        ! function (e) {
            e.ERROR_1 = "ERROR_1: Copying failed", e.ERROR_2 = "ERROR_2: Resource limit below 0", e.ERROR_3 = "ERROR_3: Workers below 0", e.ERROR_4 = "ERROR_4: Population Cap below 0", e.ERROR_5 = "ERROR_5: ", e.ERROR_6 = "ERROR_6: ", e.ERROR_7 = "ERROR_7: ", e.ERROR_8 = "ERROR_8: "
        }(Jf || (Jf = {}));
        var Rg = function () {
                function e(e) {
                    this.servicesService = e, this.textSubject = new L, this.missionSubject = new L, this.missionResponseSubject = new L, this.buildingSubject = new L, this.tutorialSubject = new L, this.tutorialResponseSubject = new L, this.valueSubject = new L, this.onOpenSubject = new L, this.confirmationSubject = new L, this.closeSubject = new L, this.valueResponseSubject = new L, this.regionSubject = new L, this.modals = [], this.servicesService.addService(Nu.MODAL, this)
                }
                return e.prototype.add = function (e) {
                    this.modals.push(e)
                }, e.prototype.remove = function (e) {
                    this.modals = this.modals.filter(function (n) {
                        return n.id !== e
                    })
                }, e.prototype.open = function (e) {
                    this.modals.find(function (n) {
                        return n.id === e
                    }).open(), this.onOpenSubject.next(e)
                }, e.prototype.close = function (e) {
                    this.modals.find(function (n) {
                        return n.id === e
                    }).close(), this.closeSubject.next()
                }, e.prototype.registerForText = function () {
                    return this.textSubject.asObservable()
                }, e.prototype.registerForOnOpen = function () {
                    return this.onOpenSubject.asObservable()
                }, e.prototype.registerForConfirmation = function () {
                    return this.confirmationSubject.asObservable()
                }, e.prototype.sendConfirmationResult = function (e) {
                    this.confirmationSubject.next(e)
                }, e.prototype.setModalText = function (e) {
                    this.textSubject.next(e)
                }, e.prototype.registerForRegion = function () {
                    return this.regionSubject.asObservable()
                }, e.prototype.setRegion = function (e) {
                    this.regionSubject.next(e)
                }, e.prototype.registerForCloseModal = function () {
                    return this.closeSubject.asObservable()
                }, e.prototype.sendCloseSignal = function () {
                    this.closeSubject.next()
                }, e.prototype.registerForValue = function () {
                    return this.valueSubject.asObservable()
                }, e.prototype.setModalValue = function (e) {
                    this.valueSubject.next(e)
                }, e.prototype.sendValueInput = function (e) {
                    this.valueResponseSubject.next(e)
                }, e.prototype.registerForValueResponse = function () {
                    return this.valueResponseSubject.asObservable()
                }, e.prototype.registerForMission = function () {
                    return this.missionSubject.asObservable()
                }, e.prototype.registerForMissionResponse = function () {
                    return this.missionResponseSubject.asObservable()
                }, e.prototype.registerForBuilding = function () {
                    return this.buildingSubject.asObservable()
                }, e.prototype.setMission = function (e) {
                    this.missionSubject.next(e)
                }, e.prototype.sendMissionResponse = function (e) {
                    this.missionResponseSubject.next(e)
                }, e.prototype.setBuilding = function (e) {
                    this.buildingSubject.next(e)
                }, e.prototype.info = function (e) {
                    this.open(mu.INFO), this.setModalText(e)
                }, e.prototype.openTutorialModal = function (e) {
                    var n = this.modals.find(function (e) {
                        return e.id === mu.TUTORIAL
                    });
                    n.close(), n.openTutorialWindow(e)
                }, e.prototype.registerForTutorial = function () {
                    return this.tutorialSubject.asObservable()
                }, e.prototype.setTutorial = function (e) {
                    this.tutorialSubject.next(e)
                }, e.prototype.registerForTutorialResponse = function () {
                    return this.tutorialResponseSubject.asObservable()
                }, e.prototype.sendTutorialResponse = function (e) {
                    this.tutorialResponseSubject.next(e)
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(vg))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            Tg = function () {
                function e(e, n, t) {
                    this.modalService = e, this.servicesService = n, this.router = t, this.tutorialsEnabled = !1, this.villageTutorialState = 0, this.forestTutorialState = 0, this.fieldTutorialState = 0, this.mountainsTutorialState = 0, this.plateauTutorialState = 0, this.seaTutorialState = 0, this.resourcesTutorialState = 0
                }
                return e.prototype.load = function (e) {
                    this.villageTutorialState = void 0 !== e.villageTutorialState ? e.villageTutorialState : 0, this.forestTutorialState = void 0 !== e.forestTutorialState ? e.forestTutorialState : 0, this.resourcesTutorialState = void 0 !== e.resourcesTutorialState ? e.resourcesTutorialState : 0, this.fieldTutorialState = void 0 !== e.fieldTutorialState ? e.fieldTutorialState : 0, this.mountainsTutorialState = void 0 !== e.mountainsTutorialState ? e.mountainsTutorialState : 0, this.plateauTutorialState = void 0 !== e.plateauTutorialState ? e.plateauTutorialState : 0, this.seaTutorialState = void 0 !== e.seaTutorialState ? e.seaTutorialState : 0
                }, e.prototype.save = function () {
                    return {
                        villageTutorialState: this.villageTutorialState,
                        forestTutorialState: this.forestTutorialState,
                        resourcesTutorialState: this.resourcesTutorialState,
                        fieldTutorialState: this.fieldTutorialState,
                        mountainsTutorialState: this.mountainsTutorialState,
                        plateauTutorialState: this.plateauTutorialState,
                        seaTutorialState: this.seaTutorialState
                    }
                }, e.prototype.reset = function (e, n) {}, e.prototype.checkRegionTutorial = function (e) {
                    var n = this;
                    if (this.tutorialsEnabled) switch (e) {
                        case Mu.VILLAGE:
                            if (0 === this.villageTutorialState) {
                                this.startTutorial(Ku);
                                var t = this.modalService.registerForTutorialResponse().subscribe(function (e) {
                                    t.unsubscribe(), n.villageTutorialState = e
                                })
                            }
                            break;
                        case Mu.FOREST:
                            if (0 === this.forestTutorialState) {
                                this.startTutorial(qu);
                                var r = this.modalService.registerForTutorialResponse().subscribe(function (e) {
                                    r.unsubscribe(), n.forestTutorialState = e
                                })
                            }
                            break;
                        case Mu.FIELD:
                            if (0 === this.fieldTutorialState) {
                                this.startTutorial($u);
                                var i = this.modalService.registerForTutorialResponse().subscribe(function (e) {
                                    i.unsubscribe(), n.fieldTutorialState = e
                                })
                            }
                            break;
                        case Mu.MOUNTAINS:
                            if (0 === this.mountainsTutorialState) {
                                this.startTutorial(Qu);
                                var l = this.modalService.registerForTutorialResponse().subscribe(function (e) {
                                    l.unsubscribe(), n.mountainsTutorialState = e
                                })
                            }
                            break;
                        case Mu.PLATEAU:
                            if (0 === this.plateauTutorialState) {
                                this.startTutorial(Zu);
                                var o = this.modalService.registerForTutorialResponse().subscribe(function (e) {
                                    o.unsubscribe(), n.plateauTutorialState = e
                                })
                            }
                            break;
                        case Mu.SEA:
                            if (0 === this.seaTutorialState) {
                                this.startTutorial(Xu);
                                var u = this.modalService.registerForTutorialResponse().subscribe(function (e) {
                                    u.unsubscribe(), n.seaTutorialState = e
                                })
                            }
                    }
                }, e.prototype.checkResourcesTutorial = function () {
                    var e = this;
                    if (0 === this.resourcesTutorialState) {
                        this.startTutorial(Ju);
                        var n = this.modalService.registerForTutorialResponse().subscribe(function (t) {
                            n.unsubscribe(), e.resourcesTutorialState = t
                        })
                    }
                }, e.prototype.enableTutorials = function () {
                    this.tutorialsEnabled = !0
                }, e.prototype.resetTutorials = function () {
                    this.villageTutorialState = 0, this.forestTutorialState = 0, this.fieldTutorialState = 0, this.mountainsTutorialState = 0, this.plateauTutorialState = 0, this.seaTutorialState = 0, this.resourcesTutorialState = 0, this.router.url.endsWith("village") ? this.checkRegionTutorial(Mu.VILLAGE) : this.router.url.endsWith("forest") ? this.checkRegionTutorial(Mu.FOREST) : this.router.url.endsWith("field") ? this.checkRegionTutorial(Mu.FIELD) : this.router.url.endsWith("mountains") ? this.checkRegionTutorial(Mu.MOUNTAINS) : this.router.url.endsWith("plateau") ? this.checkRegionTutorial(Mu.PLATEAU) : this.router.url.endsWith("sea") ? this.checkRegionTutorial(Mu.SEA) : this.router.url.endsWith("resources") ? this.checkResourcesTutorial() : this.modalService.info("Tutorials have been enabled")
                }, e.prototype.startTutorial = function (e) {
                    this.modalService.setTutorial(e), this.servicesService.getService(Nu.TICKER).stop(), this.modalService.openTutorialModal(e[0].position)
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(Rg), ze(vg), ze(Cd))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            Cg = function () {
                function e(e, n, t) {
                    this.servicesService = e, this.modalService = n, this.tutorialsService = t, this.flags = [], this.gameState = 0, this.abdicationLevel = 0, this.devMessage = Number.MAX_SAFE_INTEGER, this.demolishReturn = ts.DEMOLITION_RETURN, this.servicesService.addService(Nu.GAME, this)
                }
                return e.prototype.init = function () {
                    var e = this;
                    Gu.production ? this.flags = [] : (this.flags = [], Object.values(Eu).filter(function (e) {
                        return !isNaN(e)
                    }).forEach(function (n) {
                        return e.flags.push(n)
                    }))
                }, e.prototype.load = function (e) {
                    this.flags = e.flags, this.gameState = e.gameState, this.demolishReturn = e.demolishReturn, this.devMessage = e.devMessage, this.abdicationLevel = e.abdicationLevel
                }, e.prototype.save = function () {
                    return {
                        flags: this.flags,
                        gameState: this.gameState,
                        demolishReturn: this.demolishReturn,
                        devMessage: this.devMessage,
                        abdicationLevel: this.abdicationLevel
                    }
                }, e.prototype.reset = function (e, n) {
                    this.flags = [], this.gameState = 0, this.demolishReturn = ts.DEMOLITION_RETURN, this.init(), e && (this.devMessage = Number.MAX_SAFE_INTEGER, this.abdicationLevel = 0), n && (this.abdicationLevel = 0)
                }, e.prototype.isEnabled = function (e) {
                    return this.flags.includes(e)
                }, e.prototype.enable = function (e) {
                    this.flags.includes(e) || this.flags.push(e)
                }, e.prototype.disable = function (e) {
                    this.flags.includes(e) && this.flags.splice(this.flags.indexOf(e), 1)
                }, e.prototype.setGameState = function (e) {
                    this.gameState = e
                }, e.prototype.getGameState = function () {
                    return this.gameState
                }, e.prototype.tick = function (e) {
                    0 === this.getGameState() && (this.displayWelcomeModal(), this.addStartBoost(), this.tutorialsService.checkRegionTutorial(Mu.VILLAGE), this.setGameState(1)), this.displayDevMessage()
                }, e.prototype.displayWelcomeModal = function () {
                    var e = this;
                    this.modalService.info(Bu);
                    var n = this.modalService.registerForCloseModal().subscribe(function () {
                        e.devMessage === Number.MAX_SAFE_INTEGER && (e.devMessage = 0), n.unsubscribe()
                    })
                }, e.prototype.displayDevMessage = function () {
                    var e = Vu.length;
                    this.devMessage < e && (this.showDevNotes(), this.devMessage = e)
                }, e.prototype.showDevNotes = function () {
                    this.modalService.open(mu.CHANGELOG)
                }, e.prototype.addStartBoost = function () {
                    Wu && this.servicesService.getService(Nu.EFFECTS).addBuildingEffect(Wu)
                }, e.prototype.getAbdicationLevel = function () {
                    return this.abdicationLevel
                }, e.prototype.incrementAbdicationLevel = function () {
                    this.abdicationLevel += 1
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(vg), ze(Rg), ze(Tg))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            _g = function () {
                return function (e, n, t, r, i, l, o) {
                    this.perk = e, this.usages = n, this.maxUsages = t, this.description = r, this.cost = i, this.reset = l, this.effect = o
                }
            }(),
            Ig = function () {
                function e(e, n, t) {
                    this.modalService = e, this.logService = n, this.servicesService = t, this.royalPoints = 0, this.perks = [], this.goldenFish = !1, this.goldenEgg = !1, this.servicesService.addService(Nu.ROYAL, this), this.initPerks()
                }
                return e.prototype.initPerks = function () {
                    var e = this;
                    this.perks = [], Object.entries(as.PERKS).forEach(function (n) {
                        e.perks.push(new _g(yu[n[0]], n[1].USAGES, n[1].MAX_USAGES, n[1].DESCRIPTION, n[1].COST, n[1].RESET, n[1].EFFECT))
                    })
                }, e.prototype.load = function (e) {
                    var n = this;
                    this.royalPoints = e.royalPoints, this.goldenFish = void 0 !== e.goldenFish && e.goldenFish, this.goldenEgg = void 0 !== e.goldenEgg && e.goldenEgg, e.progress.forEach(function (e) {
                        var t = n.perks.find(function (n) {
                            return n.perk === e[0]
                        });
                        t && (t.usages = e[1])
                    })
                }, e.prototype.save = function () {
                    var e = [];
                    return this.perks.forEach(function (n) {
                        return e.push([n.perk, n.usages])
                    }), {
                        royalPoints: this.royalPoints,
                        progress: e,
                        goldenFish: this.goldenFish,
                        goldenEgg: this.goldenEgg
                    }
                }, e.prototype.reset = function (e, n) {
                    var t = this;
                    e ? (this.royalPoints = 0, this.goldenFish = !1, this.goldenEgg = !1, this.initPerks()) : this.perks.forEach(function (e) {
                        e.reset && e.usages > 0 && e.reset(t.servicesService, e)
                    })
                }, e.prototype.getRoyalPoints = function () {
                    return this.royalPoints
                }, e.prototype.buyRoyalPoints = function () {
                    this.modalService.open(mu.ROYAL)
                }, e.prototype.increaseRoyalPoints = function (e) {
                    this.royalPoints += e
                }, e.prototype.getRoyalPerks = function () {
                    return this.perks
                }, e.prototype.unlock = function (e) {
                    (0 === e.maxUsages || e.usages < e.maxUsages) && (this.royalPoints >= e.cost ? this.perks.find(function (n) {
                        return e === n
                    }).effect(this.servicesService, e) : this.modalService.info("Not enough Royal Points!<br>" + e.cost + " RP required but only " + this.royalPoints + " available"))
                }, e.prototype.unlockCallback = function (e) {
                    this.royalPoints -= Number(e.cost), e.usages += 1
                }, e.prototype.isGoldenFishCaught = function () {
                    return this.goldenFish
                }, e.prototype.catchGoldenFish = function () {
                    return !(this.goldenFish || !ku.chance(as.GOLDEN_ITEMS.GOLDEN_FISH_CHANCE) || (this.increaseRoyalPoints(5), this.logService.success("You have caught a golden fish. You let it go and it granted you 5 Royal Points"), this.goldenFish = !0, 0))
                }, e.prototype.layGoldenEgg = function () {
                    return !(this.goldenEgg || !ku.chance(as.GOLDEN_ITEMS.GOLDEN_EGG_CHANCE) || (this.increaseRoyalPoints(5), this.logService.success("Your chicken laid golden egg. You decided to keep it and was granted 5 Royal Points"), this.goldenEgg = !0, 0))
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(Rg), ze(Og), ze(vg))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            Ag = function () {
                function e(e, n, t, r) {
                    this.servicesService = e, this.modalService = n, this.royalService = t, this.logService = r, e.addService(Nu.KONGREGATE, this);
                    try {
                        kongregateAPI.loadAPI(function () {
                            window.kongregate = kongregateAPI.getAPI();
                            var e = [],
                                n = function (n) {
                                    if (n.success) {
                                        var r = e.find(function (e) {
                                            return e[0] === n.id
                                        });
                                        r && t.increaseRoyalPoints(r[1])
                                    }
                                };
                            window.kongregate.mtx.requestUserItemList(null, function (t) {
                                if (t.success)
                                    for (var r = 0; r < t.data.length; r++) {
                                        var i = t.data[r];
                                        e.push([i.id, Number(i.identifier.replace("rp_pack", ""))]), window.kongregate.mtx.useItemInstance(i.id, n)
                                    }
                            })
                        })
                    } catch (i) {
                        console.error(i)
                    }
                }
                return e.prototype.isSet = function () {
                    return !!window.kongregate
                }, e.prototype.isAvailable = function () {
                    return window.kongregate && 0 !== this.getUserId()
                }, e.prototype.submitStat = function (e, n) {
                    window.kongregate.stats.submit(e, n)
                }, e.prototype.getUsername = function () {
                    if (this.isSet()) return window.kongregate.services.getUsername()
                }, e.prototype.getUserId = function () {
                    if (this.isSet()) return window.kongregate.services.getUserId()
                }, e.prototype.buyItem = function (e) {
                    var n = this.modalService,
                        t = this.royalService,
                        r = this.logService,
                        i = [],
                        l = function (e) {
                            if (e.success) {
                                var n = i.find(function (n) {
                                    return n[0] === e.id
                                });
                                n && (t.increaseRoyalPoints(n[1]), r.log("Added " + n[1] + " Royal Points"))
                            }
                        },
                        o = function (e) {
                            if (e.success)
                                for (var n = 0; n < e.data.length; n++) {
                                    var t = e.data[n];
                                    i.push([t.id, Number(t.identifier.replace("rp_pack", ""))]), window.kongregate.mtx.useItemInstance(t.id, l)
                                }
                        };
                    window.kongregate.mtx.purchaseItems([e], function (e) {
                        e.success && (n.close(mu.ROYAL), window.kongregate.mtx.requestUserItemList(null, o))
                    })
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(vg), ze(Rg), ze(Ig), ze(Og))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            wg = function () {
                function e(e) {
                    this.happiness = zu.START_HAPPINESS, e.addService(Nu.HAPPINESS, this)
                }
                return e.prototype.load = function (e) {
                    this.happiness = e.happiness
                }, e.prototype.save = function () {
                    return {
                        happiness: this.happiness
                    }
                }, e.prototype.reset = function (e, n) {
                    this.happiness = zu.START_HAPPINESS
                }, e.prototype.tick = function (e) {}, e.prototype.getHappiness = function () {
                    return this.happiness
                }, e.prototype.getHappinessEffect = function () {
                    return this.happiness >= 0 && this.happiness <= 10 ? -10 : this.happiness > 10 && this.happiness <= 40 ? 5 : this.happiness > 40 && this.happiness <= 60 ? 10 : this.happiness > 60 && this.happiness <= 90 ? 20 : this.happiness > 90 && this.happiness <= 100 ? 35 : void 0
                }, e.prototype.increaseHappiness = function (e, n) {
                    void 0 === n && (n = 100), this.happiness < n && (this.happiness += e, this.happiness > 100 && (this.happiness = 100))
                }, e.prototype.decreaseHappiness = function (e, n) {
                    void 0 === n && (n = 0), this.happiness > n && (this.happiness -= e, this.happiness < 0 && (this.happiness = 0))
                }, e.prototype.resetHappiness = function () {
                    this.happiness = zu.START_HAPPINESS
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(vg))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            Ng = function () {
                function e(e, n, t, r, i, l) {
                    this.logService = e, this.servicesService = n, this.gameService = t, this.modalService = r, this.happinessService = i, this.kongregateService = l, this.resources = new Map, this.populationScore = 0, this.resourcesSubject = new L, this.callbacks = new Map, this.servicesService.addService(Nu.RESOURCES, this), this.init()
                }
                return e.prototype.init = function () {
                    var e = this,
                        n = new fg;
                    rs.getResources().forEach(function (t) {
                        e.resources.set(vu[t[0]], n.forResource(vu[t[0]]).withName(Au.prepareResourceName(vu[t[0]])).withAmount(void 0 !== t[1].AMOUNT ? t[1].AMOUNT : rs.DEFAULT_AMOUNT).withLimit(void 0 !== t[1].LIMIT ? t[1].LIMIT : rs.DEFAULT_LIMIT).withResourceTypes(t[1].TYPES).withResourceType(Cu.ALL).withVisible(void 0 !== t[1].VISIBLE ? t[1].VISIBLE : rs.DEFAULT_VISIBLE).withHighlighted(void 0 !== t[1].HIGHLIGHTED ? t[1].HIGHLIGHTED : rs.DEFAULT_HIGHLIGHTED).build())
                    }), this.people = 1, this.workers = 0, this.populationCap = 1, Gu.production || this.resources.forEach(function (e) {
                        return e.visible = !0
                    })
                }, e.prototype.getResource = function (e) {
                    return this.resources.get(e)
                }, e.prototype.makeVisible = function (e) {
                    this.resources.get(e).visible = !0
                }, e.prototype.increaseResource = function (e, n, t) {
                    if (void 0 === t && (t = !1), e === vu.FOOD || e === vu.NOTHING) return !0;
                    var r = this.resources.get(e);
                    if (r.getResourceTypes().includes(Cu.ANIMAL)) {
                        var i = this.servicesService.getServiceByRegion(Mu.FIELD).getBuildings().filter(function (e) {
                                return e.getBuildingType() === bu.PASTURE
                            }).map(function (e) {
                                return e
                            }).filter(function (n) {
                                return n.getResourceType() === e
                            }),
                            l = 0;
                        if (i.forEach(function (e) {
                                return l += e.getMaxAnimals() - e.getAnimals()
                            }), n > l && !t) return !1;
                        for (t && n > l && (n = l); n > 0 && l > 0;)
                            for (var o = 0, u = i; o < u.length; o++) {
                                for (var s = u[o]; s.getAnimals() < s.getMaxAnimals() && n > 0;) s.increaseAnimal(1), n -= 1, l -= 1;
                                if (0 === n) return !0
                            }
                        return !0
                    }
                    return !(!t && r.amount + n > r.limit || (r.amount += n, r.amount > r.limit && (r.amount = r.limit), this.resourcesSubject.next(this.resources), r.isVisible() || (r.toggleVisible(), this.logService.log("New resource discovered: " + Au.prepareResourceName(e))), 0))
                }, e.prototype.decreaseResource = function (e, n, t) {
                    if (void 0 === t && (t = !1), e === vu.FOOD) return this.getFoodValue(t) >= n && (this.getFood(n, t), !0);
                    var r = this.resources.get(e);
                    if (r.getResourceTypes().includes(Cu.ANIMAL)) {
                        var i = this.servicesService.getServiceByRegion(Mu.FIELD).getBuildings().filter(function (e) {
                                return e.getBuildingType() === bu.PASTURE
                            }).map(function (e) {
                                return e
                            }).filter(function (n) {
                                return n.getResourceType() === e && n.getAnimals() > 0
                            }),
                            l = 0;
                        if (i.forEach(function (e) {
                                return l += e.getAnimals()
                            }), l >= n) {
                            for (var o = 0, u = i; o < u.length; o++) {
                                for (var s = u[o]; n > 0 && s.getAnimals() > 0;) s.decreaseAnimal(1), r.amount -= 1, n -= 1;
                                if (0 === n) return !0
                            }
                            return !0
                        }
                        return !1
                    }
                    return 0 !== this.hasResource(e, n, t) ? (this.resourcesSubject.next(this.resources), !1) : (r.amount -= n, this.resourcesSubject.next(this.resources), !0)
                }, e.prototype.hasResource = function (e, n, t) {
                    if (void 0 === t && (t = !1), e === vu.FOOD) return this.getFoodValue(t) >= n ? 0 : n - this.getFoodValue(t);
                    var r = this.resources.get(e);
                    return t ? r.amount >= n ? 0 : n - this.resources.get(e).amount : r.amount - r.reserved >= n ? 0 : n - (r.amount - r.reserved)
                }, e.prototype.hasLimit = function (e) {
                    return this.resources.get(e).amount < this.resources.get(e).limit
                }, e.prototype.decreaseResources = function (e, n, t) {
                    void 0 === n && (n = !1), void 0 === t && (t = 1);
                    for (var r = "", i = !0, l = 0, o = Array.from(e); l < o.length; l++) {
                        var u = o[l],
                            s = this.hasResource(p = u[0], u[1] * t, n);
                        0 !== s && (r += "Missing " + s + " " + Au.prepareResourceName(p) + "<br>", i = !1)
                    }
                    if (!i) return this.modalService.info(r), !1;
                    for (var a = 0, c = Array.from(e); a < c.length; a++) {
                        var p, h = c[a];
                        this.decreaseResource(p = h[0], h[1] * t, n)
                    }
                    return !0
                }, e.prototype.hasResources = function (e, n) {
                    void 0 === n && (n = !1);
                    for (var t = !0, r = 0, i = Array.from(e); r < i.length; r++) {
                        var l = i[r];
                        0 !== this.hasResource(l[0], l[1], n) && (t = !1)
                    }
                    return t
                }, e.prototype.increaseLimit = function (e, n) {
                    this.resources.forEach(function (t) {
                        t.getResourceTypes().includes(e) && !t.getResourceTypes().includes(Cu.ANIMAL) && (t.limit += n)
                    })
                }, e.prototype.increaseResourceLimit = function (e, n) {
                    this.resources.get(e).limit += n
                }, e.prototype.decreaseLimit = function (e, n) {
                    this.resources.forEach(function (t) {
                        t.getResourceTypes().includes(e) && !t.getResourceTypes().includes(Cu.ANIMAL) && (t.limit -= n, t.limit < 0 && (t.limit = 0, console.error(Jf.ERROR_2, t.getResource(), t.limit)), t.amount > t.limit && (t.amount = t.limit))
                    })
                }, e.prototype.decreaseResourceLimit = function (e, n) {
                    var t = this.resources.get(e);
                    t.limit -= n, t.limit < 0 && (t.limit = 0, console.error(Jf.ERROR_2, t.getResource(), t.limit)), t.amount > t.limit && (t.amount = t.limit)
                }, e.prototype.getResources = function () {
                    return this.resources
                }, e.prototype.save = function () {
                    var e = "[";
                    return this.resources.forEach(function (n) {
                        e += "[" + n.resource + "," + JSON.stringify(n) + "],"
                    }), {
                        resources: e = e.slice(0, -1) + "]",
                        people: this.people,
                        workers: this.workers,
                        populationCap: this.populationCap
                    }
                }, e.prototype.load = function (e) {
                    var n = this;
                    JSON.parse(e.resources).forEach(function (e) {
                        n.resources.get(e[0]).amount = e[1].amount, n.resources.get(e[0]).limit = e[1].limit, n.resources.get(e[0]).reserved = e[1].reserved, n.resources.get(e[0]).visible = e[1].visible, n.resources.get(e[0]).highlighted = e[1].highlighted, n.resources.get(e[0]).prioritise = e[1].prioritise
                    }), this.people = e.people, this.workers = e.workers, this.populationCap = e.populationCap, this.resourcesSubject.next(this.resources)
                }, e.prototype.reset = function (e, n) {
                    this.resources = new Map, this.people = 1, this.workers = 0, this.populationCap = 1, this.populationScore = 0, this.init(), this.resourcesSubject.next(this.resources)
                }, e.prototype.registerForResourcesChange = function () {
                    return this.resourcesSubject.asObservable()
                }, e.prototype.createPeople = function (e) {
                    this.people += e
                }, e.prototype.removePeople = function (e) {
                    if (this.people -= e, this.people - e < 0)
                        for (; this.people < 0;) {
                            var n = Math.floor(Math.random() * this.callbacks.size);
                            Array.from(this.callbacks.values())[n].fireRandomWorker()
                        }
                }, e.prototype.hireWorker = function () {
                    return this.people > 0 && (this.people -= 1, this.workers += 1, !0)
                }, e.prototype.fireWorker = function (e) {
                    void 0 === e && (e = 1), 0 === this.workers && console.error(Jf.ERROR_3), this.workers -= e, this.people += e
                }, e.prototype.getPeople = function () {
                    return this.people
                }, e.prototype.getWorkers = function () {
                    return this.workers
                }, e.prototype.getPopulationCap = function () {
                    return this.populationCap
                }, e.prototype.increasePopulationCap = function (e) {
                    return this.populationCap += e
                }, e.prototype.decreasePopulationCap = function (e) {
                    return this.populationCap - e < 0 && console.error(Jf.ERROR_4), this.populationCap -= e
                }, e.prototype.addCallback = function (e, n) {
                    this.callbacks.set(n, e)
                }, e.prototype.tick = function (e) {
                    this.kongregateService.isAvailable() && this.getTotalPeople() > this.populationScore && (this.populationScore = this.getTotalPeople(), this.kongregateService.submitStat("Population", this.populationScore)), 1 === this.getTotalPeople() && this.happinessService.resetHappiness(), this.people + this.workers >= ts.VILLAGE.SHRINE.POPULATION && (this.gameService.isEnabled(Eu.SHRINE) || (this.gameService.enable(Eu.SHRINE), this.logService.log("Shrine unlocked"))), this.people + this.workers >= ts.VILLAGE.CHURCH.POPULATION && (this.gameService.isEnabled(Eu.CHURCH) || (this.gameService.enable(Eu.CHURCH), this.logService.log("Church unlocked")))
                }, e.prototype.getRandomFood = function (e) {
                    var n;
                    if (void 0 === e && (e = !1), (n = e ? Array.from(this.resources.entries()).filter(function (e) {
                            return e[1].resourceTypes.includes(Cu.CONSUMABLE) && e[1].amount > 0
                        }) : Array.from(this.resources.entries()).filter(function (e) {
                            return e[1].resourceTypes.includes(Cu.CONSUMABLE) && e[1].amount - e[1].reserved > 0
                        })).length > 0) {
                        var t = n[Math.floor(Math.random() * n.length)];
                        return this.decreaseResource(t[0], 1), rs.getResource(t[0]).POWER
                    }
                    return 0
                }, e.prototype.getFood = function (e, n) {
                    for (void 0 === n && (n = !1); e > 0;) e -= this.getRandomFood(n)
                }, e.prototype.getFoodValue = function (e) {
                    void 0 === e && (e = !1);
                    var n = 0;
                    return e ? Array.from(this.resources.entries()).filter(function (e) {
                        return e[1].resourceTypes.includes(Cu.CONSUMABLE) && e[1].amount > 0
                    }).forEach(function (e) {
                        return n += rs.getResource(e[0]).POWER * e[1].amount
                    }) : Array.from(this.resources.entries()).filter(function (e) {
                        return e[1].resourceTypes.includes(Cu.CONSUMABLE) && e[1].amount - e[1].reserved > 0
                    }).forEach(function (e) {
                        return n += rs.getResource(e[0]).POWER * (e[1].amount - e[1].reserved)
                    }), n
                }, e.prototype.getResourceTypes = function (e) {
                    return this.resources.get(e).getResourceTypes()
                }, e.prototype.increaseResources = function (e, n) {
                    void 0 === n && (n = !1);
                    for (var t = 0, r = Array.from(e); t < r.length; t++) {
                        var i = r[t];
                        this.increaseResource(i[0], i[1], n)
                    }
                }, e.prototype.removeRecruit = function (e) {
                    return this.people >= e && this.callbacks.get(Mu.VILLAGE).removeRecruit(e)
                }, e.prototype.getFuel = function () {
                    for (var e = 0, n = rs.getResourcesByType(Cu.FUEL).sort(function (e, n) {
                            return e[1].FUEL_PRIORITY - n[1].FUEL_PRIORITY
                        }); e < n.length; e++) {
                        var t = n[e];
                        if (this.decreaseResource(vu[String(t[0])], 1)) return t[1].POWER
                    }
                    return 0
                }, e.prototype.getTotalPeople = function () {
                    return this.people + this.workers
                }, e.prototype.getResourcesValue = function () {
                    var e = 0;
                    return this.resources.forEach(function (n) {
                        n.amount > 0 && (e += rs.getResource(n.resource).TRADE_VALUE * n.getAmount())
                    }), e
                }, e.prototype.updateAnimals = function () {
                    var e = Array.from(this.getResources().values()).filter(function (e) {
                            return e.getResourceTypes().includes(Cu.ANIMAL)
                        }),
                        n = this.servicesService.getServiceByRegion(Mu.FIELD).getBuildings().filter(function (e) {
                            return e.getBuildingType() === bu.PASTURE
                        }).map(function (e) {
                            return e
                        });
                    e.forEach(function (e) {
                        var t = 0;
                        n.filter(function (n) {
                            return n.getResourceType() === e.resource && n.getAnimals() > 0
                        }).forEach(function (e) {
                            return t += e.getAnimals()
                        }), e.amount = t
                    })
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(Og), ze(vg), ze(Cg), ze(Rg), ze(wg), ze(Ag))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            Pg = function () {
                function e(e, n, t, r) {
                    this.resourcesService = e, this.modalService = n, this.tutorialService = t, this.gameService = r, this.filterText = ""
                }
                return e.prototype.ngOnInit = function () {
                    var e = this;
                    this.categories = Object.keys(Cu), this.categories = [Cu[Cu.RAW], Cu[Cu.PROCESSED], Cu[Cu.FOOD], Cu[Cu.TOOLS]], this.resources = this.resourcesService.getResources(), this.resourcesService.registerForResourcesChange().subscribe(function (n) {
                        e.resources = n
                    }), this.tutorialService.checkResourcesTutorial()
                }, e.prototype.getResourcesList = function (e) {
                    var n = this;
                    return Array.from(this.resourcesService.getResources().entries()).filter(function (t) {
                        return t[1].getResourceTypes().includes(Cu[e]) && Au.prepareResourceName(t[1].getResource()).toLowerCase().includes(n.filterText)
                    }).map(function (e) {
                        return e[1]
                    })
                }, e.prototype.openManageModal = function (e) {
                    this.modalService.open(mu.INPUT), this.modalService.setModalText("Set amount of restricted resources that can be used only by your direct action and not by automatic building action"), this.modalService.setModalValue(e.reserved);
                    var n = this.modalService.registerForValueResponse().subscribe(function (t) {
                        null === t || isNaN(t) || (e.reserved = Number(t)), n.unsubscribe()
                    })
                }, e.prototype.isMarketEnabled = function () {
                    return this.gameService.isEnabled(Eu.MARKET)
                }, e.prototype.highlightResource = function (e) {
                    e.highlighted ? e.highlighted = !1 : Array.from(this.resourcesService.getResources().values()).filter(function (e) {
                        return e.highlighted
                    }).length < 7 ? e.highlighted = !0 : this.modalService.info("Too many highlighted resources")
                }, e.prototype.isNotCoins = function (e) {
                    return e.resource !== vu.COINS
                }, e.prototype.isDev = function () {
                    return !Gu.production
                }, e.prototype.addDevRes = function (e) {
                    this.resourcesService.increaseResource(e, 5, !0)
                }, e
            }(),
            Dg = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{height:100%;max-height:100%;font-size:1em;margin:.7%;text-align:center}#resourcesTitle[_ngcontent-%COMP%]{display:flex;flex-direction:row;font-size:1.3em;font-weight:bolder;vertical-align:middle}#center[_ngcontent-%COMP%]{flex:10 0 auto}.side[_ngcontent-%COMP%]{flex:0 0 25%;font-size:.6em;width:15%;margin:3px;display:inline-block}#categories[_ngcontent-%COMP%]{display:flex;flex-direction:row;border:1px solid #000;height:94%;text-align:center}.category[_ngcontent-%COMP%]{text-align:left;flex:1 0 0;display:flex;flex-direction:column;border:1px solid #000}.resource[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-left:3px;width:100%;vertical-align:middle}.title[_ngcontent-%COMP%]{text-align:center;padding:2px 0;width:100%;font-weight:bolder;font-size:1em;margin-bottom:5px;display:block;border-bottom:1px solid #000}.highlight[_ngcontent-%COMP%]{flex:1 0 auto;text-align:right;margin-right:3px}.highlight[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}app-icon[_ngcontent-%COMP%]{flex:0 0 auto;margin-right:3px}.manage[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:22px;width:22px}.greyout[_ngcontent-%COMP%]{opacity:.3}.prioritise[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:22px;width:22px}.full[_ngcontent-%COMP%]{font-weight:600}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]],
                data: {}
            });

        function kg(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.addDevRes(e.parent.parent.context.$implicit.resource) && r), r
            }, null, null)), (e()(), lo(-1, null, ["+"]))], null, null)
        }

        function Mg(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, null, null, null, null, null, null, null)), (e()(), lo(1, null, ["", "/", ""]))], null, function (e, n) {
                var t = n.parent.parent.context.$implicit.getAmount(),
                    r = n.parent.parent.context.$implicit.getLimit();
                e(n, 1, 0, t, r)
            })
        }

        function Lg(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, null, null, null, null, null, null, null)), (e()(), lo(1, null, ["", "/", ""]))], null, function (e, n) {
                var t = n.parent.parent.context.$implicit.getAmount(),
                    r = n.parent.parent.context.$implicit.getLimit();
                e(n, 1, 0, t, r)
            })
        }

        function xg(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, null, null, null, null, null, null, null)), (e()(), lo(1, null, ["", ""]))], null, function (e, n) {
                var t = n.parent.parent.context.$implicit.getAmount();
                e(n, 1, 0, t)
            })
        }

        function Fg(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 4, "span", [], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 3, "span", [["class", "prioritise"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = 0 != (e.parent.parent.context.$implicit.prioritise = !e.parent.parent.context.$implicit.prioritise) && r), r
            }, null, null)), kl(2, 278528, null, 0, ks, [Br, Vr, Pn, xn], {
                klass: [0, "klass"],
                ngClass: [1, "ngClass"]
            }, null), ro(3, {
                greyout: 0
            }), (e()(), Yi(4, 0, null, null, 0, "img", [["draggable", "false"], ["src", "assets/trade.svg"], ["title", "prioritise on market"]], null, null, null, null, null))], function (e, n) {
                var t = e(n, 3, 0, !n.parent.parent.context.$implicit.prioritise);
                e(n, 2, 0, "prioritise", t)
            }, null)
        }

        function Ug(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 22, "div", [["class", "resource"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 10, "span", [["class", "icon"]], null, null, null, null, null)), (e()(), Yi(2, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(3, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null), (e()(), ji(16777216, null, null, 1, null, kg)), kl(5, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Mg)), kl(7, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Lg)), kl(9, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, xg)), kl(11, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(12, 0, null, null, 10, "span", [["class", "highlight"]], null, null, null, null, null)), (e()(), Yi(13, 0, null, null, 3, "span", [["class", "manage"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.openManageModal(e.parent.context.$implicit) && r), r
            }, null, null)), kl(14, 278528, null, 0, ks, [Br, Vr, Pn, xn], {
                klass: [0, "klass"],
                ngClass: [1, "ngClass"]
            }, null), ro(15, {
                greyout: 0
            }), (e()(), Yi(16, 0, null, null, 0, "img", [["draggable", "false"], ["src", "assets/manage.svg"]], [[8, "title", 0]], null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, Fg)), kl(18, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(19, 0, null, null, 3, "span", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.highlightResource(e.parent.context.$implicit) && r), r
            }, null, null)), kl(20, 278528, null, 0, ks, [Br, Vr, Pn, xn], {
                ngClass: [0, "ngClass"]
            }, null), ro(21, {
                greyout: 0
            }), (e()(), Yi(22, 0, null, null, 0, "img", [["draggable", "false"], ["src", "assets/eye.svg"], ["title", "add to header"]], null, null, null, null, null))], function (e, n) {
                var t = n.component,
                    r = n.parent.context.$implicit.getName();
                e(n, 3, 0, r, "resources"), e(n, 5, 0, t.isDev());
                var i = n.parent.context.$implicit.getAmount() === n.parent.context.$implicit.getLimit();
                e(n, 7, 0, i);
                var l = t.isNotCoins(n.parent.context.$implicit) && n.parent.context.$implicit.getAmount() !== n.parent.context.$implicit.getLimit();
                e(n, 9, 0, l), e(n, 11, 0, !t.isNotCoins(n.parent.context.$implicit));
                var o = e(n, 15, 0, 0 === n.parent.context.$implicit.reserved);
                e(n, 14, 0, "manage", o), e(n, 18, 0, t.isMarketEnabled());
                var u = e(n, 21, 0, !n.parent.context.$implicit.highlighted);
                e(n, 20, 0, u)
            }, function (e, n) {
                e(n, 16, 0, Vi(1, "reserved: ", n.parent.context.$implicit.reserved, ""))
            })
        }

        function Hg(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "div", [], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, Ug)), kl(2, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, n) {
                e(n, 2, 0, n.context.$implicit.visible)
            }, null)
        }

        function Gg(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 4, "div", [["class", "category"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "span", [["class", "title"]], null, null, null, null, null)), (e()(), lo(2, null, ["", ""])), (e()(), ji(16777216, null, null, 1, null, Hg)), kl(4, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, n) {
                e(n, 4, 0, n.component.getResourcesList(n.context.$implicit))
            }, function (e, n) {
                e(n, 2, 0, n.context.$implicit)
            })
        }

        function Bg(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 13, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 9, "span", [["id", "resourcesTitle"]], null, null, null, null, null)), (e()(), Yi(2, 0, null, null, 0, "span", [["class", "side"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 1, "span", [["id", "center"]], null, null, null, null, null)), (e()(), lo(-1, null, ["Resources"])), (e()(), Yi(5, 0, null, null, 5, "input", [["class", "side"], ["placeholder", "filter"], ["type", "text"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"]], function (e, n, t) {
                var r = !0,
                    i = e.component;
                return "input" === n && (r = !1 !== El(e, 6)._handleInput(t.target.value) && r), "blur" === n && (r = !1 !== El(e, 6).onTouched() && r), "compositionstart" === n && (r = !1 !== El(e, 6)._compositionStart() && r), "compositionend" === n && (r = !1 !== El(e, 6)._compositionEnd(t.target.value) && r), "ngModelChange" === n && (r = !1 !== (i.filterText = t) && r), r
            }, null, null)), kl(6, 16384, null, 0, Tf, [xn, Pn, [2, Rf]], null, null), Ll(1024, null, bf, function (e) {
                return [e]
            }, [Tf]), kl(8, 671744, null, 0, cg, [[8, null], [8, null], [8, null], [6, bf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, wf, null, [cg]), kl(10, 16384, null, 0, $f, [[4, wf]], null, null), (e()(), Yi(11, 0, null, null, 2, "div", [["id", "categories"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, Gg)), kl(13, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 8, 0, t.filterText), e(n, 13, 0, t.categories)
            }, function (e, n) {
                e(n, 5, 0, El(n, 10).ngClassUntouched, El(n, 10).ngClassTouched, El(n, 10).ngClassPristine, El(n, 10).ngClassDirty, El(n, 10).ngClassValid, El(n, 10).ngClassInvalid, El(n, 10).ngClassPending)
            })
        }

        function Vg(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-resources", [], null, null, null, Bg, Dg)), kl(1, 114688, null, 0, Pg, [Ng, Rg, Tg, Cg], null, null)], function (e, n) {
                e(n, 1, 0)
            }, null)
        }
        var Wg = al("app-resources", Pg, Vg, {}, {}, []),
            jg = function () {
                function e(e) {
                    this.servicesService = e, this.rations = es.FOOD_RATIONS, this.clothes = es.CLOTHES_RATIONS, this.alcohol = es.ALCOHOL_RATIONS, this.furClothes = es.ALLOW_FUR_CLOTHES, this.foodNutrition = es.SHOW_FOOD_NUTRITION, this.complexWorkers = !1, e.addService(Nu.MANAGEMENT, this)
                }
                return e.prototype.load = function (e) {
                    this.rations = e.rations, this.clothes = e.clothes, this.alcohol = e.alcohol, this.furClothes = e.furClothes, this.foodNutrition = e.foodNutrition, this.complexWorkers = e.complexWorkers
                }, e.prototype.save = function () {
                    return {
                        rations: this.rations,
                        clothes: this.clothes,
                        alcohol: this.alcohol,
                        furClothes: this.furClothes,
                        foodNutrition: this.foodNutrition,
                        complexWorkers: this.complexWorkers
                    }
                }, e.prototype.reset = function (e, n) {
                    this.rations = es.FOOD_RATIONS, this.clothes = es.CLOTHES_RATIONS, this.alcohol = es.ALCOHOL_RATIONS, this.furClothes = es.ALLOW_FUR_CLOTHES, this.foodNutrition = es.SHOW_FOOD_NUTRITION, this.complexWorkers = !1
                }, e.prototype.getRations = function () {
                    return this.rations
                }, e.prototype.getClothesRations = function () {
                    return this.clothes
                }, e.prototype.getAlcoholRations = function () {
                    return this.alcohol
                }, e.prototype.setRations = function (e) {
                    this.rations = e
                }, e.prototype.setClothesRations = function (e) {
                    this.clothes = e
                }, e.prototype.setAlcoholRations = function (e) {
                    this.alcohol = e
                }, e.prototype.toggleFurClothes = function () {
                    this.furClothes = !this.furClothes
                }, e.prototype.getFurClothes = function () {
                    return this.furClothes
                }, e.prototype.toggleFoodNutrition = function () {
                    this.foodNutrition = !this.foodNutrition
                }, e.prototype.getFoodNutrition = function () {
                    return this.foodNutrition
                }, e.prototype.toggleComplexWorkers = function () {
                    this.complexWorkers = !this.complexWorkers
                }, e.prototype.getComplexWorkers = function () {
                    return this.complexWorkers
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(vg))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            Yg = function () {
                function e(e, n, t) {
                    var r = this;
                    this.servicesService = e, this.calendarService = n, this.logService = t, this.buildingEffects = [], this.natureEffects = [], this.armyEffects = [], e.addService(Nu.EFFECTS, this), this.daySubscription = n.registerForDayChange().subscribe(function (e) {
                        r.buildingEffects.forEach(function (e) {
                            e.duration > 0 && (e.duration -= 1)
                        }), r.armyEffects.forEach(function (e) {
                            e.duration > 0 && (e.duration -= 1)
                        }), r.natureEffects.forEach(function (e) {
                            e.duration > 0 && (e.duration -= 1)
                        })
                    })
                }
                return e.prototype.load = function (e) {
                    var n = this;
                    this.buildingEffects = [], e.buildingEffects.forEach(function (e) {
                        n.buildingEffects.push(new Du(e.name, e.building, e.effect, e.duration))
                    }), this.armyEffects = [], e.armyEffects.forEach(function (e) {
                        n.armyEffects.push(new Lu(e.name, e.troop, e.effect, e.duration))
                    }), this.natureEffects = [], e.natureEffects.forEach(function (e) {
                        n.natureEffects.push(new Uu(e.name, e.effect, e.duration))
                    })
                }, e.prototype.save = function () {
                    return {
                        buildingEffects: this.buildingEffects,
                        armyEffects: this.armyEffects,
                        natureEffects: this.natureEffects
                    }
                }, e.prototype.reset = function (e, n) {
                    e ? (this.buildingEffects = [], this.armyEffects = [], this.natureEffects = []) : n ? (this.buildingEffects = this.buildingEffects.filter(function (e) {
                        return e.isRoyal()
                    }), this.armyEffects = this.armyEffects.filter(function (e) {
                        return e.isRoyal()
                    }), this.natureEffects = this.natureEffects.filter(function (e) {
                        return e.isRoyal()
                    })) : (this.buildingEffects = this.buildingEffects.filter(function (e) {
                        return e.isRoyal() || e.isWonder()
                    }), this.armyEffects = this.armyEffects.filter(function (e) {
                        return e.isRoyal() || e.isWonder()
                    }), this.natureEffects = this.natureEffects.filter(function (e) {
                        return e.isRoyal() || e.isWonder()
                    }))
                }, e.prototype.tick = function (e) {
                    this.buildingEffects = this.buildingEffects.filter(function (e) {
                        return 0 !== e.duration
                    }), this.armyEffects = this.armyEffects.filter(function (e) {
                        return 0 !== e.duration
                    }), this.natureEffects = this.natureEffects.filter(function (e) {
                        return 0 !== e.duration
                    })
                }, e.prototype.getBuildingEffectsValue = function (e, n, t) {
                    void 0 === n && (n = !1), void 0 === t && (t = -1);
                    var r = 0;
                    return t > 0 ? this.buildingEffects.filter(function (n) {
                        return n.building === e || n.building === bu.ALL
                    }).filter(function (e) {
                        return e.isPermanent() === n
                    }).filter(function (e) {
                        return !e.isBuff() || e.isBuff() && e.buff === t
                    }).forEach(function (e) {
                        return r += e.effect
                    }) : this.buildingEffects.filter(function (n) {
                        return n.building === e || n.building === bu.ALL
                    }).filter(function (e) {
                        return e.isPermanent() === n
                    }).forEach(function (e) {
                        return r += e.effect
                    }), r
                }, e.prototype.getBuildingEffects = function (e, n) {
                    return void 0 === n && (n = -1), e ? n > 0 ? this.buildingEffects.filter(function (n) {
                        return n.building === e || n.building === bu.ALL
                    }).filter(function (e) {
                        return e.buff === n
                    }) : this.buildingEffects.filter(function (n) {
                        return n.building === e || n.building === bu.ALL
                    }) : this.buildingEffects
                }, e.prototype.hasWonderEffects = function (e) {
                    return this.buildingEffects.filter(function (n) {
                        return n.name === e
                    }).length > 0
                }, e.prototype.getNatureEffectsValue = function () {
                    var e = 0;
                    return this.natureEffects.forEach(function (n) {
                        return e += n.effect
                    }), e
                }, e.prototype.getNatureEffects = function () {
                    return this.natureEffects
                }, e.prototype.addNatureEffect = function (e, n) {
                    if (void 0 === n && (n = !0), this.natureEffects.push(e), n) {
                        var t = e.name;
                        e.isPermanent() ? t += " will permanently affect " : t += " will affect ", t += "most natural sources with ", t += e.effect > 0 ? "+" + e.effect + "%" : e.effect + "%", t += " of their base power", e.isPermanent() || (t += " for " + e.duration + " days"), this.logService.log(t)
                    }
                }, e.prototype.addBuildingEffect = function (e, n) {
                    if (void 0 === n && (n = !0), this.buildingEffects.push(e), n) {
                        var t = e.name;
                        e.isPermanent() ? t += " will permanently affect " : t += " will affect ", t += e.building === bu.ALL ? "all buildings with " : Au.prepareBuildingName(e.building) + " with ", t += e.effect > 0 ? "+" + e.effect + "%" : e.effect + "%", t += e.building === bu.ALL ? " of their base power" : " of its base power", e.isPermanent() || (t += " for " + e.duration + " days"), this.logService.log(t)
                    }
                }, e.prototype.addArmyEffect = function (e, n) {
                    if (void 0 === n && (n = !0), this.armyEffects.push(e), n) {
                        var t = e.name;
                        e.isPermanent() ? t += " will permanently affect " : t += " will affect ", t += e.troop === Iu.ALL ? "all troops with " : Au.prepareTroopName(e.troop) + " with ", t += e.effect > 0 ? "+" + e.effect + "%" : e.effect + "%", t += " of their base strength and defense", e.isPermanent() || (t += " for " + e.duration + " days"), this.logService.log(t)
                    }
                }, e.prototype.getArmyEffects = function () {
                    return this.armyEffects
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(vg), ze(bg), ze(Og))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            zg = function () {
                function e(e, n, t) {
                    this.managementService = e, this.effectsService = n, this.gameService = t
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.getRations = function () {
                    return this.managementService.getRations()
                }, e.prototype.changeFoodValue = function (e) {
                    this.managementService.setRations(e.target.value)
                }, e.prototype.changeClothesValue = function (e) {
                    this.managementService.setClothesRations(e.target.value)
                }, e.prototype.changeAlcoholValue = function (e) {
                    this.managementService.setAlcoholRations(e.target.value)
                }, e.prototype.getClothesRations = function () {
                    return this.managementService.getClothesRations()
                }, e.prototype.getAlcoholRations = function () {
                    return this.managementService.getAlcoholRations()
                }, e.prototype.getBuildingsEffects = function () {
                    return this.effectsService.getBuildingEffects().filter(function (e) {
                        return !e.isBuff()
                    }).sort(function (e, n) {
                        return e.isPermanent() && !n.isPermanent() ? -1 : e.isPermanent() && n.isPermanent() ? 0 : !e.isPermanent() && n.isPermanent() ? 1 : void 0
                    })
                }, e.prototype.getArmyEffects = function () {
                    return this.effectsService.getArmyEffects()
                }, e.prototype.getBuildingName = function (e) {
                    return Au.prepareBuildingName(e)
                }, e.prototype.getTroopName = function (e) {
                    return Au.prepareTroopName(e)
                }, e.prototype.updateFurClothes = function () {
                    this.managementService.toggleFurClothes()
                }, e.prototype.getFurClothes = function () {
                    return this.managementService.getFurClothes()
                }, e.prototype.updateFoodNutrition = function () {
                    this.managementService.toggleFoodNutrition()
                }, e.prototype.getFoodNutrition = function () {
                    return this.managementService.getFoodNutrition()
                }, e.prototype.updateComplexWorkers = function () {
                    this.managementService.toggleComplexWorkers()
                }, e.prototype.getComplexWorkers = function () {
                    return this.managementService.getComplexWorkers()
                }, e.prototype.isHREnabled = function () {
                    return this.gameService.isEnabled(Eu.HUMAN_RESOURCES)
                }, e
            }(),
            Kg = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{margin:.5%;height:99%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}.label[_ngcontent-%COMP%]{display:inline-block;width:80px}.slidecontainer[_ngcontent-%COMP%]{display:inline-block;width:150px}.slider[_ngcontent-%COMP%]{-webkit-appearance:none;width:100%;height:10px;border-radius:5px;background:var(--passive-colour);outline:0;opacity:.7;transition:opacity .2s}.slider[_ngcontent-%COMP%]:hover{opacity:1}.slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:15px;height:15px;border-radius:50%;background:var(--active-colour);cursor:pointer}.slider[_ngcontent-%COMP%]::-moz-range-thumb{width:15px;height:15px;border-radius:50%;background:var(--active-colour);cursor:pointer}#buildingEffects[_ngcontent-%COMP%]{height:45%;border:1px solid #000}#armyEffects[_ngcontent-%COMP%]{height:29%;border:1px solid #000}.rows[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:center;height:90.5%;overflow-y:auto}.row[_ngcontent-%COMP%]{display:flex;border:1px solid #000;margin:3px}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{border-right:none}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){flex:0 0 7%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){flex:0 0 35%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){flex:0 0 30%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(4){flex:0 0 13%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(5){flex:0 0 15%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:auto;border-right:1px solid #000}.headers[_ngcontent-%COMP%]{margin:3px 3px 0;display:flex;width:98.3%;flex-direction:row;text-align:center;font-size:.9em}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border:1px solid #000;border-left:none}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-of-type{border-left:1px solid #000}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){flex:0 0 7%}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){flex:0 0 35%}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){flex:0 0 30%}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(4){flex:0 0 13%}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(5){flex:0 0 15%}.positive[_ngcontent-%COMP%]{color:#006400}.negative[_ngcontent-%COMP%]{color:#8b0000}"]],
                data: {}
            });

        function qg(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, null, null, null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 0, "input", [["type", "checkbox"]], [[8, "checked", 0]], [[null, "change"]], function (e, n, t) {
                var r = !0;
                return "change" === n && (r = !1 !== e.component.updateComplexWorkers() && r), r
            }, null, null)), (e()(), lo(-1, null, [" change simple building worker hiring of some buildings to rule based settings "]))], null, function (e, n) {
                e(n, 1, 0, n.component.getComplexWorkers())
            })
        }

        function $g(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [["class", "positive"]], null, null, null, null, null)), (e()(), lo(1, null, ["+", "% "]))], null, function (e, n) {
                e(n, 1, 0, n.parent.context.$implicit.effect)
            })
        }

        function Qg(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [["class", "negative"]], null, null, null, null, null)), (e()(), lo(1, null, ["", "% "]))], null, function (e, n) {
                e(n, 1, 0, n.parent.context.$implicit.effect)
            })
        }

        function Zg(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(1, null, ["", " "]))], null, function (e, n) {
                e(n, 1, 0, n.parent.context.$implicit.duration)
            })
        }

        function Xg(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["permanent"]))], null, null)
        }

        function Jg(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 14, "div", [["class", "row"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(2, null, ["", "."])), (e()(), Yi(3, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(4, null, ["", ""])), (e()(), Yi(5, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(6, null, ["", ""])), (e()(), ji(16777216, null, null, 1, null, $g)), kl(8, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Qg)), kl(10, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Zg)), kl(12, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Xg)), kl(14, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, n) {
                e(n, 8, 0, n.context.$implicit.effect >= 0), e(n, 10, 0, n.context.$implicit.effect < 0), e(n, 12, 0, n.context.$implicit.duration > 0), e(n, 14, 0, n.context.$implicit.duration < 0)
            }, function (e, n) {
                var t = n.component;
                e(n, 2, 0, n.context.index + 1), e(n, 4, 0, n.context.$implicit.name), e(n, 6, 0, t.getBuildingName(n.context.$implicit.building))
            })
        }

        function ev(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [["class", "positive"]], null, null, null, null, null)), (e()(), lo(1, null, ["+", "% "]))], null, function (e, n) {
                e(n, 1, 0, n.parent.context.$implicit.effect)
            })
        }

        function nv(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [["class", "negative"]], null, null, null, null, null)), (e()(), lo(1, null, ["", "% "]))], null, function (e, n) {
                e(n, 1, 0, n.parent.context.$implicit.effect)
            })
        }

        function tv(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(1, null, ["", " "]))], null, function (e, n) {
                e(n, 1, 0, n.parent.context.$implicit.duration)
            })
        }

        function rv(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["permanent"]))], null, null)
        }

        function iv(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 14, "div", [["class", "row"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(2, null, ["", "."])), (e()(), Yi(3, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(4, null, ["", ""])), (e()(), Yi(5, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(6, null, ["", ""])), (e()(), ji(16777216, null, null, 1, null, ev)), kl(8, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, nv)), kl(10, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, tv)), kl(12, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, rv)), kl(14, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, n) {
                e(n, 8, 0, n.context.$implicit.effect >= 0), e(n, 10, 0, n.context.$implicit.effect < 0), e(n, 12, 0, n.context.$implicit.duration > 0), e(n, 14, 0, n.context.$implicit.duration < 0)
            }, function (e, n) {
                var t = n.component;
                e(n, 2, 0, n.context.index + 1), e(n, 4, 0, n.context.$implicit.name), e(n, 6, 0, t.getTroopName(n.context.$implicit.troop))
            })
        }

        function lv(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 62, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 2, "div", [["id", "title"]], null, null, null, null, null)), (e()(), Yi(2, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["Management"])), (e()(), Yi(4, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["Rations"])), (e()(), Yi(6, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(7, 0, null, null, 6, "div", [], null, null, null, null, null)), (e()(), Yi(8, 0, null, null, 1, "span", [["class", "label"]], null, null, null, null, null)), (e()(), lo(9, null, ["food: ", ""])), (e()(), Yi(10, 0, null, null, 1, "div", [["class", "slidecontainer"]], null, null, null, null, null)), (e()(), Yi(11, 0, null, null, 0, "input", [["class", "slider"], ["max", "4"], ["min", "1"], ["type", "range"], ["value", "2"]], [[8, "value", 0]], [[null, "change"]], function (e, n, t) {
                var r = !0;
                return "change" === n && (r = !1 !== e.component.changeFoodValue(t) && r), r
            }, null, null)), (e()(), Yi(12, 0, null, null, 0, "input", [["type", "checkbox"]], [[8, "checked", 0]], [[null, "change"]], function (e, n, t) {
                var r = !0;
                return "change" === n && (r = !1 !== e.component.updateFoodNutrition() && r), r
            }, null, null)), (e()(), lo(-1, null, [" show total food nutrition in village tab "])), (e()(), Yi(14, 0, null, null, 6, "div", [], null, null, null, null, null)), (e()(), Yi(15, 0, null, null, 1, "span", [["class", "label"]], null, null, null, null, null)), (e()(), lo(16, null, ["clothes: ", ""])), (e()(), Yi(17, 0, null, null, 1, "div", [["class", "slidecontainer"]], null, null, null, null, null)), (e()(), Yi(18, 0, null, null, 0, "input", [["class", "slider"], ["max", "4"], ["min", "1"], ["type", "range"], ["value", "2"]], [[8, "value", 0]], [[null, "change"]], function (e, n, t) {
                var r = !0;
                return "change" === n && (r = !1 !== e.component.changeClothesValue(t) && r), r
            }, null, null)), (e()(), Yi(19, 0, null, null, 0, "input", [["type", "checkbox"]], [[8, "checked", 0]], [[null, "change"]], function (e, n, t) {
                var r = !0;
                return "change" === n && (r = !1 !== e.component.updateFurClothes() && r), r
            }, null, null)), (e()(), lo(-1, null, [" allow fur when no clothes available "])), (e()(), Yi(21, 0, null, null, 1, "span", [["class", "label"]], null, null, null, null, null)), (e()(), lo(22, null, ["alcohol: ", ""])), (e()(), Yi(23, 0, null, null, 1, "div", [["class", "slidecontainer"]], null, null, null, null, null)), (e()(), Yi(24, 0, null, null, 0, "input", [["class", "slider"], ["max", "4"], ["min", "1"], ["type", "range"], ["value", "1"]], [[8, "value", 0]], [[null, "change"]], function (e, n, t) {
                var r = !0;
                return "change" === n && (r = !1 !== e.component.changeAlcoholValue(t) && r), r
            }, null, null)), (e()(), Yi(25, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, qg)), kl(27, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(28, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(29, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["Buildings effects"])), (e()(), Yi(31, 0, null, null, 14, "div", [["id", "buildingEffects"]], null, null, null, null, null)), (e()(), Yi(32, 0, null, null, 10, "div", [["class", "headers"]], null, null, null, null, null)), (e()(), Yi(33, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["#"])), (e()(), Yi(35, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["name"])), (e()(), Yi(37, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["building"])), (e()(), Yi(39, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["effect"])), (e()(), Yi(41, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["duration"])), (e()(), Yi(43, 0, null, null, 2, "div", [["class", "rows"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, Jg)), kl(45, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), (e()(), Yi(46, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["Army effects"])), (e()(), Yi(48, 0, null, null, 14, "div", [["id", "armyEffects"]], null, null, null, null, null)), (e()(), Yi(49, 0, null, null, 10, "div", [["class", "headers"]], null, null, null, null, null)), (e()(), Yi(50, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["#"])), (e()(), Yi(52, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["name"])), (e()(), Yi(54, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["building"])), (e()(), Yi(56, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["effect"])), (e()(), Yi(58, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["duration"])), (e()(), Yi(60, 0, null, null, 2, "div", [["class", "rows"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, iv)), kl(62, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 27, 0, t.isHREnabled()), e(n, 45, 0, t.getBuildingsEffects()), e(n, 62, 0, t.getArmyEffects())
            }, function (e, n) {
                var t = n.component;
                e(n, 9, 0, .5 * t.getRations()), e(n, 11, 0, t.getRations()), e(n, 12, 0, t.getFoodNutrition()), e(n, 16, 0, t.getClothesRations()), e(n, 18, 0, t.getClothesRations()), e(n, 19, 0, t.getFurClothes()), e(n, 22, 0, t.getAlcoholRations()), e(n, 24, 0, t.getAlcoholRations())
            })
        }

        function ov(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-management", [], null, null, null, lv, Kg)), kl(1, 114688, null, 0, zg, [jg, Yg, Cg], null, null)], function (e, n) {
                e(n, 1, 0)
            }, null)
        }
        var uv, sv = al("app-management", zg, ov, {}, {}, []),
            av = function () {
                function e() {}
                return e.prototype.onmousemove = function (e) {
                    var n = document.getElementById(this.elementId);
                    if (n) {
                        var t = e.clientX;
                        n.style.top = e.clientY + 20 + "px", n.style.left = t + 20 + "px"
                    }
                }, e
            }(),
            cv = function () {
                function e(e, n, t, r, i, l) {
                    void 0 === l && (l = !1), this.canceled = !1, this.id = e, this.resource = n, this.amount = t, this.cost = r, this.craftingDifficulty = i, this.available = l
                }
                return e.prototype.getResource = function () {
                    return this.resource
                }, e
            }(),
            pv = function () {
                function e(e, n) {
                    this.servicesService = e, this.resourcesService = n, this.recipes = [], e.addService(Nu.RECIPE, this), this.initRecipes()
                }
                return e.prototype.initRecipes = function () {
                    var e = this;
                    this.recipes = [], Object.entries(us.RECIPES).forEach(function (n) {
                        var t = new Map;
                        n[1].COST.forEach(function (e) {
                            return t.set(e.resource, e.amount)
                        }), e.recipes.push(new cv(Pu[n[0]], n[1].RESOURCE, n[1].AMOUNT ? n[1].AMOUNT : 1, t, n[1].CRAFTING, !1))
                    }), this.recipes.find(function (e) {
                        return e.id === Pu.PLANK
                    }).available = !0, this.recipes.find(function (e) {
                        return e.id === Pu.CUT_STONE
                    }).available = !0, this.recipes.find(function (e) {
                        return e.id === Pu.LEATHER
                    }).available = !0, Gu.production || Object.values(Pu).filter(function (e) {
                        return !isNaN(e)
                    }).forEach(function (n) {
                        return e.enable(n)
                    })
                }, e.prototype.getRecipes = function () {
                    return this.recipes.filter(function (e) {
                        return e.available
                    })
                }, e.prototype.getRecipeById = function (e) {
                    return this.recipes.find(function (n) {
                        return n.id === e
                    })
                }, e.prototype.enable = function (e) {
                    var n = this,
                        t = this.recipes.find(function (n) {
                            return n.id === e
                        });
                    this.resourcesService.makeVisible(t.getResource()), Array.from(t.cost.keys()).forEach(function (e) {
                        return n.resourcesService.makeVisible(e)
                    }), t.available = !0
                }, e.prototype.disable = function (e) {
                    var n = this.recipes.find(function (n) {
                        return n.id === e
                    });
                    this.resourcesService.makeVisible(n.getResource()), n.available = !1
                }, e.prototype.load = function (e) {
                    var n = this;
                    this.initRecipes(), e.recipes.forEach(function (e) {
                        var t = n.recipes.find(function (n) {
                            return n.id === e
                        });
                        t && (t.available = !0)
                    })
                }, e.prototype.save = function () {
                    return {
                        recipes: this.recipes.filter(function (e) {
                            return e.available
                        }).map(function (e) {
                            return e.id
                        })
                    }
                }, e.prototype.reset = function (e, n) {
                    this.initRecipes()
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(vg), ze(Ng))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            hv = "undefined" != typeof Intl && Intl.v8BreakIterator,
            dv = function () {
                function e(e) {
                    this._platformId = e, this.isBrowser = this._platformId ? this._platformId === Xs : "object" == typeof document && !!document, this.EDGE = this.isBrowser && /(edge)/i.test(navigator.userAgent), this.TRIDENT = this.isBrowser && /(msie|trident)/i.test(navigator.userAgent), this.BLINK = this.isBrowser && !(!window.chrome && !hv) && "undefined" != typeof CSS && !this.EDGE && !this.TRIDENT, this.WEBKIT = this.isBrowser && /AppleWebKit/i.test(navigator.userAgent) && !this.BLINK && !this.EDGE && !this.TRIDENT, this.IOS = this.isBrowser && /iPad|iPhone|iPod/.test(navigator.userAgent) && !("MSStream" in window), this.FIREFOX = this.isBrowser && /(firefox|minefield)/i.test(navigator.userAgent), this.ANDROID = this.isBrowser && /android/i.test(navigator.userAgent) && !this.TRIDENT, this.SAFARI = this.isBrowser && /safari/i.test(navigator.userAgent) && this.WEBKIT
                }
                return e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(Mt, 8))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }();

        function fv(e) {
            return function () {
                if (null == uv && "undefined" != typeof window) try {
                    window.addEventListener("test", null, Object.defineProperty({}, "passive", {
                        get: function () {
                            return uv = !0
                        }
                    }))
                } finally {
                    uv = uv || !1
                }
                return uv
            }() ? e : !!e.capture
        }

        function gv(e) {
            return null != e && "" + e != "false"
        }
        var vv = fv({
                passive: !1,
                capture: !0
            }),
            mv = function () {
                function e(e, n) {
                    var t = this;
                    this._ngZone = e, this._dropInstances = new Set, this._dragInstances = new Set, this._activeDragInstances = new Set, this._globalListeners = new Map, this.pointerMove = new L, this.pointerUp = new L, this._preventScrollListener = function (e) {
                        t._activeDragInstances.size && e.preventDefault()
                    }, this._document = n
                }
                return e.prototype.registerDropContainer = function (e) {
                    if (!this._dropInstances.has(e)) {
                        if (this.getDropContainer(e.id)) throw Error('Drop instance with id "' + e.id + '" has already been registered.');
                        this._dropInstances.add(e)
                    }
                }, e.prototype.registerDragItem = function (e) {
                    var n = this;
                    this._dragInstances.add(e), 1 === this._dragInstances.size && this._ngZone.runOutsideAngular(function () {
                        n._document.addEventListener("touchmove", n._preventScrollListener, vv)
                    })
                }, e.prototype.removeDropContainer = function (e) {
                    this._dropInstances.delete(e)
                }, e.prototype.removeDragItem = function (e) {
                    this._dragInstances.delete(e), this.stopDragging(e), 0 === this._dragInstances.size && this._document.removeEventListener("touchmove", this._preventScrollListener, vv)
                }, e.prototype.startDragging = function (e, n) {
                    var t = this;
                    if (this._activeDragInstances.add(e), 1 === this._activeDragInstances.size) {
                        var r = n.type.startsWith("touch"),
                            i = r ? "touchend" : "mouseup";
                        this._globalListeners.set(r ? "touchmove" : "mousemove", {
                            handler: function (e) {
                                return t.pointerMove.next(e)
                            },
                            options: vv
                        }).set(i, {
                            handler: function (e) {
                                return t.pointerUp.next(e)
                            },
                            options: !0
                        }), r || this._globalListeners.set("wheel", {
                            handler: this._preventScrollListener,
                            options: vv
                        }), this._ngZone.runOutsideAngular(function () {
                            t._globalListeners.forEach(function (e, n) {
                                t._document.addEventListener(n, e.handler, e.options)
                            })
                        })
                    }
                }, e.prototype.stopDragging = function (e) {
                    this._activeDragInstances.delete(e), 0 === this._activeDragInstances.size && this._clearGlobalListeners()
                }, e.prototype.isDragging = function (e) {
                    return this._activeDragInstances.has(e)
                }, e.prototype.getDropContainer = function (e) {
                    return Array.from(this._dropInstances).find(function (n) {
                        return n.id === e
                    })
                }, e.prototype.ngOnDestroy = function () {
                    var e = this;
                    this._dragInstances.forEach(function (n) {
                        return e.removeDragItem(n)
                    }), this._dropInstances.forEach(function (n) {
                        return e.removeDropContainer(n)
                    }), this._clearGlobalListeners(), this.pointerMove.complete(), this.pointerUp.complete()
                }, e.prototype._clearGlobalListeners = function () {
                    var e = this;
                    this._globalListeners.forEach(function (n, t) {
                        e._document.removeEventListener(t, n.handler, n.options)
                    }), this._globalListeners.clear()
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(Zt), ze(Zs))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            yv = new ye("CDK_DRAG_PARENT");

        function Sv(e, n) {
            for (var t in n) n.hasOwnProperty(t) && (e[t] = n[t]);
            return e
        }
        var Ev = new ye("CDK_DROP_LIST_CONTAINER");

        function bv(e) {
            var n = e.toLowerCase().indexOf("ms") > -1 ? 1 : 1e3;
            return parseFloat(e) * n
        }

        function Ov(e, n) {
            return e.getPropertyValue(n).split(",").map(function (e) {
                return e.trim()
            })
        }
        var Rv = new ye("CDK_DRAG_CONFIG", {
                providedIn: "root",
                factory: function () {
                    return {
                        dragStartThreshold: 5,
                        pointerDirectionChangeThreshold: 5
                    }
                }
            }),
            Tv = fv({
                passive: !0
            }),
            Cv = fv({
                passive: !1
            }),
            _v = function () {
                function e(e, n, t, r, i, l, o, u, s) {
                    var a = this;
                    this.element = e, this.dropContainer = n, this._ngZone = r, this._viewContainerRef = i, this._viewportRuler = l, this._dragDropRegistry = o, this._config = u, this._dir = s, this._passiveTransform = {
                        x: 0,
                        y: 0
                    }, this._activeTransform = {
                        x: 0,
                        y: 0
                    }, this._moveEvents = new L, this._moveEventSubscriptions = 0, this._pointerMoveSubscription = v.EMPTY, this._pointerUpSubscription = v.EMPTY, this._rootElementInitSubscription = v.EMPTY, this._disabled = !1, this.started = new pt, this.ended = new pt, this.entered = new pt, this.exited = new pt, this.dropped = new pt, this.moved = w.create(function (e) {
                        var n = a._moveEvents.subscribe(e);
                        return a._moveEventSubscriptions++,
                            function () {
                                n.unsubscribe(), a._moveEventSubscriptions--
                            }
                    }), this._pointerDown = function (e) {
                        var n = a.getChildHandles();
                        if (n.length) {
                            var t = n.find(function (n) {
                                var t = n.element.nativeElement,
                                    r = e.target;
                                return !!r && (r === t || t.contains(r))
                            });
                            !t || t.disabled || a.disabled || a._initializeDragSequence(t.element.nativeElement, e)
                        } else a.disabled || a._initializeDragSequence(a._rootElement, e)
                    }, this._pointerMove = function (e) {
                        var n = a._getConstrainedPointerPosition(e);
                        if (a._hasStartedDragging) {
                            if (a._hasMoved = !0, e.preventDefault(), a._updatePointerDirectionDelta(n), a.dropContainer) a._updateActiveDropContainer(n);
                            else {
                                var t = a._activeTransform;
                                t.x = n.x - a._pickupPositionOnPage.x + a._passiveTransform.x, t.y = n.y - a._pickupPositionOnPage.y + a._passiveTransform.y;
                                var r = Iv(t.x, t.y);
                                a._rootElement.style.transform = a._initialTransform ? a._initialTransform + " " + r : r, "undefined" != typeof SVGElement && a._rootElement instanceof SVGElement && a._rootElement.setAttribute("transform", "translate(" + t.x + " " + t.y + ")")
                            }
                            a._moveEventSubscriptions > 0 && a._ngZone.run(function () {
                                a._moveEvents.next({
                                    source: a,
                                    pointerPosition: n,
                                    event: e,
                                    delta: a._pointerDirectionDelta
                                })
                            })
                        } else Math.abs(n.x - a._pickupPositionOnPage.x) + Math.abs(n.y - a._pickupPositionOnPage.y) >= a._config.dragStartThreshold && (a._hasStartedDragging = !0, a._ngZone.run(function () {
                            return a._startDragSequence(e)
                        }))
                    }, this._pointerUp = function () {
                        if (a._isDragging() && (a._removeSubscriptions(), a._dragDropRegistry.stopDragging(a), a._hasStartedDragging)) return a.dropContainer ? void a._animatePreviewToPlaceholder().then(function () {
                            a._cleanupDragArtifacts(), a._dragDropRegistry.stopDragging(a)
                        }) : (a._passiveTransform.x = a._activeTransform.x, a._passiveTransform.y = a._activeTransform.y, a._ngZone.run(function () {
                            return a.ended.emit({
                                source: a
                            })
                        }), void a._dragDropRegistry.stopDragging(a))
                    }, this._document = t, o.registerDragItem(this)
                }
                return Object.defineProperty(e.prototype, "disabled", {
                    get: function () {
                        return this._disabled || this.dropContainer && this.dropContainer.disabled
                    },
                    set: function (e) {
                        this._disabled = gv(e)
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.getPlaceholderElement = function () {
                    return this._placeholder
                }, e.prototype.getRootElement = function () {
                    return this._rootElement
                }, e.prototype.reset = function () {
                    this._rootElement.style.transform = "", this._activeTransform = {
                        x: 0,
                        y: 0
                    }, this._passiveTransform = {
                        x: 0,
                        y: 0
                    }
                }, e.prototype.ngAfterViewInit = function () {
                    var e = this;
                    this._rootElementInitSubscription = this._ngZone.onStable.asObservable().pipe(Da(1)).subscribe(function () {
                        var n = e._rootElement = e._getRootElement();
                        n.addEventListener("mousedown", e._pointerDown, Cv), n.addEventListener("touchstart", e._pointerDown, Tv), e._handles.changes.pipe(Va(null)).subscribe(function () {
                            return t = n, r = e.getChildHandles().length > 0, void Sv(t.style, {
                                touchAction: r ? "" : "none",
                                webkitUserDrag: r ? "" : "none",
                                webkitTapHighlightColor: r ? "" : "transparent",
                                userSelect: i = r ? "" : "none",
                                msUserSelect: i,
                                webkitUserSelect: i,
                                MozUserSelect: i
                            });
                            var t, r, i
                        })
                    })
                }, e.prototype.ngOnDestroy = function () {
                    this._rootElement && (this._rootElement.removeEventListener("mousedown", this._pointerDown, Cv), this._rootElement.removeEventListener("touchstart", this._pointerDown, Tv), this._isDragging() && this._removeElement(this._rootElement)), this._rootElementInitSubscription.unsubscribe(), this._destroyPreview(), this._destroyPlaceholder(), this._nextSibling = null, this._dragDropRegistry.removeDragItem(this), this._removeSubscriptions(), this._moveEvents.complete()
                }, e.prototype._isDragging = function () {
                    return this._dragDropRegistry.isDragging(this)
                }, e.prototype.getChildHandles = function () {
                    var e = this;
                    return this._handles.filter(function (n) {
                        return n._parentDrag === e
                    })
                }, e.prototype._initializeDragSequence = function (e, n) {
                    n.stopPropagation();
                    var t = this._isDragging(),
                        r = this._isTouchEvent(n),
                        i = !r && 0 !== n.button,
                        l = !r && this._lastTouchEventTime && this._lastTouchEventTime + 800 > Date.now();
                    if (n.target && n.target.draggable && "mousedown" === n.type && n.preventDefault(), !(t || i || l)) {
                        null == this._initialTransform && (this._initialTransform = this._rootElement.style.transform || ""), this._hasStartedDragging = this._hasMoved = !1, this._initialContainer = this.dropContainer, this._pointerMoveSubscription = this._dragDropRegistry.pointerMove.subscribe(this._pointerMove), this._pointerUpSubscription = this._dragDropRegistry.pointerUp.subscribe(this._pointerUp), this._scrollPosition = this._viewportRuler.getViewportScrollPosition(), this._pickupPositionInElement = this._previewTemplate ? {
                            x: 0,
                            y: 0
                        } : this._getPointerPositionInElement(e, n);
                        var o = this._pickupPositionOnPage = this._getPointerPositionOnPage(n);
                        this._pointerDirectionDelta = {
                            x: 0,
                            y: 0
                        }, this._pointerPositionAtLastDirectionChange = {
                            x: o.x,
                            y: o.y
                        }, this._dragDropRegistry.startDragging(this, n)
                    }
                }, e.prototype._startDragSequence = function (e) {
                    if (this.started.emit({
                            source: this
                        }), this._isTouchEvent(e) && (this._lastTouchEventTime = Date.now()), this.dropContainer) {
                        var n = this._rootElement;
                        this._nextSibling = n.nextSibling;
                        var t = this._preview = this._createPreviewElement(),
                            r = this._placeholder = this._createPlaceholderElement();
                        n.style.display = "none", this._document.body.appendChild(n.parentNode.replaceChild(r, n)), this._document.body.appendChild(t), this.dropContainer.start()
                    }
                }, e.prototype._cleanupDragArtifacts = function () {
                    var e = this;
                    this._rootElement.style.display = "", this._nextSibling ? this._nextSibling.parentNode.insertBefore(this._rootElement, this._nextSibling) : this._initialContainer.element.nativeElement.appendChild(this._rootElement), this._destroyPreview(), this._destroyPlaceholder(), this._ngZone.run(function () {
                        var n = e.dropContainer.getItemIndex(e);
                        e.ended.emit({
                            source: e
                        }), e.dropped.emit({
                            item: e,
                            currentIndex: n,
                            previousIndex: e._initialContainer.getItemIndex(e),
                            container: e.dropContainer,
                            previousContainer: e._initialContainer
                        }), e.dropContainer.drop(e, n, e._initialContainer), e.dropContainer = e._initialContainer
                    })
                }, e.prototype._updateActiveDropContainer = function (e) {
                    var n = this,
                        t = e.x,
                        r = e.y,
                        i = this.dropContainer._getSiblingContainerFromPosition(this, t, r);
                    !i && this.dropContainer !== this._initialContainer && this._initialContainer._canReturnItem(t, r) && (i = this._initialContainer), i && this._ngZone.run(function () {
                        n.exited.emit({
                            item: n,
                            container: n.dropContainer
                        }), n.dropContainer.exit(n), n.entered.emit({
                            item: n,
                            container: i
                        }), n.dropContainer = i, n.dropContainer.enter(n, t, r)
                    }), this.dropContainer._sortItem(this, t, r, this._pointerDirectionDelta), this._preview.style.transform = Iv(t - this._pickupPositionInElement.x, r - this._pickupPositionInElement.y)
                }, e.prototype._createPreviewElement = function () {
                    var e;
                    if (this._previewTemplate) {
                        var n = this._viewContainerRef.createEmbeddedView(this._previewTemplate.templateRef, this._previewTemplate.data);
                        e = n.rootNodes[0], this._previewRef = n, e.style.transform = Iv(this._pickupPositionOnPage.x, this._pickupPositionOnPage.y)
                    } else {
                        var t = this._rootElement,
                            r = t.getBoundingClientRect();
                        (e = Av(t)).style.width = r.width + "px", e.style.height = r.height + "px", e.style.transform = Iv(r.left, r.top)
                    }
                    return Sv(e.style, {
                        position: "fixed",
                        top: "0",
                        left: "0",
                        zIndex: "1000"
                    }), e.classList.add("cdk-drag-preview"), e.setAttribute("dir", this._dir ? this._dir.value : "ltr"), e
                }, e.prototype._createPlaceholderElement = function () {
                    var e;
                    return this._placeholderTemplate ? (this._placeholderRef = this._viewContainerRef.createEmbeddedView(this._placeholderTemplate.templateRef, this._placeholderTemplate.data), e = this._placeholderRef.rootNodes[0]) : e = Av(this._rootElement), e.classList.add("cdk-drag-placeholder"), e
                }, e.prototype._getPointerPositionInElement = function (e, n) {
                    var t = this._rootElement.getBoundingClientRect(),
                        r = e === this._rootElement ? null : e,
                        i = r ? r.getBoundingClientRect() : t,
                        l = this._isTouchEvent(n) ? n.targetTouches[0] : n;
                    return {
                        x: i.left - t.left + (l.pageX - i.left - this._scrollPosition.left),
                        y: i.top - t.top + (l.pageY - i.top - this._scrollPosition.top)
                    }
                }, e.prototype._animatePreviewToPlaceholder = function () {
                    var e = this;
                    if (!this._hasMoved) return Promise.resolve();
                    var n = this._placeholder.getBoundingClientRect();
                    this._preview.classList.add("cdk-drag-animating"), this._preview.style.transform = Iv(n.left, n.top);
                    var t = function (e) {
                        var n = getComputedStyle(e),
                            t = Ov(n, "transition-property"),
                            r = t.find(function (e) {
                                return "transform" === e || "all" === e
                            });
                        if (!r) return 0;
                        var i = t.indexOf(r),
                            l = Ov(n, "transition-duration"),
                            o = Ov(n, "transition-delay");
                        return bv(l[i]) + bv(o[i])
                    }(this._preview);
                    return 0 === t ? Promise.resolve() : this._ngZone.runOutsideAngular(function () {
                        return new Promise(function (n) {
                            var r = function (t) {
                                    (!t || t.target === e._preview && "transform" === t.propertyName) && (e._preview.removeEventListener("transitionend", r), n(), clearTimeout(i))
                                },
                                i = setTimeout(r, 1.5 * t);
                            e._preview.addEventListener("transitionend", r)
                        })
                    })
                }, e.prototype._removeElement = function (e) {
                    e && e.parentNode && e.parentNode.removeChild(e)
                }, e.prototype._getPointerPositionOnPage = function (e) {
                    var n = this._isTouchEvent(e) ? e.touches[0] : e;
                    return {
                        x: n.pageX - this._scrollPosition.left,
                        y: n.pageY - this._scrollPosition.top
                    }
                }, e.prototype._getConstrainedPointerPosition = function (e) {
                    var n = this._getPointerPositionOnPage(e),
                        t = this.dropContainer ? this.dropContainer.lockAxis : null;
                    return "x" === this.lockAxis || "x" === t ? n.y = this._pickupPositionOnPage.y : "y" !== this.lockAxis && "y" !== t || (n.x = this._pickupPositionOnPage.x), n
                }, e.prototype._isTouchEvent = function (e) {
                    return e.type.startsWith("touch")
                }, e.prototype._destroyPreview = function () {
                    this._preview && this._removeElement(this._preview), this._previewRef && this._previewRef.destroy(), this._preview = this._previewRef = null
                }, e.prototype._destroyPlaceholder = function () {
                    this._placeholder && this._removeElement(this._placeholder), this._placeholderRef && this._placeholderRef.destroy(), this._placeholder = this._placeholderRef = null
                }, e.prototype._updatePointerDirectionDelta = function (e) {
                    var n = e.x,
                        t = e.y,
                        r = this._pointerDirectionDelta,
                        i = this._pointerPositionAtLastDirectionChange,
                        l = Math.abs(n - i.x),
                        o = Math.abs(t - i.y);
                    return l > this._config.pointerDirectionChangeThreshold && (r.x = n > i.x ? 1 : -1, i.x = n), o > this._config.pointerDirectionChangeThreshold && (r.y = t > i.y ? 1 : -1, i.y = t), r
                }, e.prototype._getRootElement = function () {
                    if (this.rootElementSelector)
                        for (var e = this.rootElementSelector, n = this.element.nativeElement.parentElement; n;) {
                            if (n.matches ? n.matches(e) : n.msMatchesSelector(e)) return n;
                            n = n.parentElement
                        }
                    return this.element.nativeElement
                }, e.prototype._removeSubscriptions = function () {
                    this._pointerMoveSubscription.unsubscribe(), this._pointerUpSubscription.unsubscribe()
                }, e
            }();

        function Iv(e, n) {
            return "translate3d(" + Math.round(e) + "px, " + Math.round(n) + "px, 0)"
        }

        function Av(e) {
            var n = e.cloneNode(!0);
            return n.removeAttribute("id"), n
        }

        function wv(e, n, t) {
            var r = Nv(n, e.length - 1),
                i = Nv(t, e.length - 1);
            if (r !== i) {
                for (var l = e[r], o = i < r ? -1 : 1, u = r; u !== i; u += o) e[u] = e[u + o];
                e[i] = l
            }
        }

        function Nv(e, n) {
            return Math.max(0, Math.min(n, e))
        }
        var Pv = function () {
                function e() {
                    this._items = new Set
                }
                return e.prototype.ngOnDestroy = function () {
                    this._items.clear()
                }, e
            }(),
            Dv = 0,
            kv = function () {
                function e(e, n, t, r, i) {
                    this.element = e, this._dragDropRegistry = n, this._changeDetectorRef = t, this._dir = r, this._group = i, this.connectedTo = [], this.orientation = "vertical", this.id = "cdk-drop-list-" + Dv++, this._disabled = !1, this.enterPredicate = function () {
                        return !0
                    }, this.dropped = new pt, this.entered = new pt, this.exited = new pt, this.sorted = new pt, this._dragging = !1, this._positionCache = {
                        items: [],
                        siblings: [],
                        self: {}
                    }, this._previousSwap = {
                        drag: null,
                        delta: 0
                    }
                }
                return Object.defineProperty(e.prototype, "disabled", {
                    get: function () {
                        return this._disabled
                    },
                    set: function (e) {
                        this._disabled = gv(e)
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.ngOnInit = function () {
                    this._dragDropRegistry.registerDropContainer(this), this._group && this._group._items.add(this)
                }, e.prototype.ngOnDestroy = function () {
                    this._dragDropRegistry.removeDropContainer(this), this._group && this._group._items.delete(this)
                }, e.prototype.start = function () {
                    this._dragging = !0, this._activeDraggables = this._draggables.toArray(), this._cachePositions(), this._changeDetectorRef.markForCheck()
                }, e.prototype.drop = function (e, n, t) {
                    this._reset(), this.dropped.emit({
                        item: e,
                        currentIndex: n,
                        previousIndex: t.getItemIndex(e),
                        container: this,
                        previousContainer: t
                    })
                }, e.prototype.enter = function (e, n, t) {
                    this.entered.emit({
                        item: e,
                        container: this
                    }), this.start();
                    var r = this._getItemIndexFromPointerPosition(e, n, t),
                        i = this._activeDraggables.indexOf(e),
                        l = this._activeDraggables[r],
                        o = e.getPlaceholderElement();
                    if (i > -1 && this._activeDraggables.splice(i, 1), l && !this._dragDropRegistry.isDragging(l)) {
                        var u = l.getRootElement();
                        u.parentElement.insertBefore(o, u), this._activeDraggables.splice(r, 0, e)
                    } else this.element.nativeElement.appendChild(o), this._activeDraggables.push(e);
                    o.style.transform = "", this._cachePositions()
                }, e.prototype.exit = function (e) {
                    this._reset(), this.exited.emit({
                        item: e,
                        container: this
                    })
                }, e.prototype.getItemIndex = function (e) {
                    return this._dragging ? Mv("horizontal" === this.orientation && this._dir && "rtl" === this._dir.value ? this._positionCache.items.slice().reverse() : this._positionCache.items, function (n) {
                        return n.drag === e
                    }) : this._draggables.toArray().indexOf(e)
                }, e.prototype._sortItem = function (e, n, t, r) {
                    var i = this;
                    if (this._isPointerNearDropContainer(n, t)) {
                        var l = this._positionCache.items,
                            o = this._getItemIndexFromPointerPosition(e, n, t, r);
                        if (!(-1 === o && l.length > 0)) {
                            var u = "horizontal" === this.orientation,
                                s = Mv(l, function (n) {
                                    return n.drag === e
                                }),
                                a = l[o],
                                c = l[s].clientRect,
                                p = a.clientRect,
                                h = s > o ? 1 : -1;
                            this._previousSwap.drag = a.drag, this._previousSwap.delta = u ? r.x : r.y;
                            var d = this._getItemOffsetPx(c, p, h),
                                f = this._getSiblingOffsetPx(s, l, h),
                                g = l.slice();
                            wv(l, s, o), this.sorted.emit({
                                previousIndex: s,
                                currentIndex: o,
                                container: this,
                                item: e
                            }), l.forEach(function (n, t) {
                                if (g[t] !== n) {
                                    var r = n.drag === e,
                                        l = r ? d : f,
                                        o = r ? e.getPlaceholderElement() : n.drag.getRootElement();
                                    n.offset += l, u ? (o.style.transform = "translate3d(" + Math.round(n.offset) + "px, 0, 0)", i._adjustClientRect(n.clientRect, 0, l)) : (o.style.transform = "translate3d(0, " + Math.round(n.offset) + "px, 0)", i._adjustClientRect(n.clientRect, l, 0))
                                }
                            })
                        }
                    }
                }, e.prototype._getSiblingContainerFromPosition = function (e, n, t) {
                    var r = this._positionCache.siblings.find(function (e) {
                        return Lv(e.clientRect, n, t)
                    });
                    return r && r.drop.enterPredicate(e, r.drop) ? r.drop : null
                }, e.prototype._canReturnItem = function (e, n) {
                    return Lv(this._positionCache.self, e, n)
                }, e.prototype._cachePositions = function () {
                    var e = this,
                        n = "horizontal" === this.orientation;
                    this._positionCache.self = this.element.nativeElement.getBoundingClientRect(), this._positionCache.items = this._activeDraggables.map(function (n) {
                        var t = (e._dragDropRegistry.isDragging(n) ? n.getPlaceholderElement() : n.getRootElement()).getBoundingClientRect();
                        return {
                            drag: n,
                            offset: 0,
                            clientRect: {
                                top: t.top,
                                right: t.right,
                                bottom: t.bottom,
                                left: t.left,
                                width: t.width,
                                height: t.height
                            }
                        }
                    }).sort(function (e, t) {
                        return n ? e.clientRect.left - t.clientRect.left : e.clientRect.top - t.clientRect.top
                    }), this._positionCache.siblings = this._getConnectedLists().map(function (e) {
                        return {
                            drop: e,
                            clientRect: e.element.nativeElement.getBoundingClientRect()
                        }
                    })
                }, e.prototype._reset = function () {
                    this._dragging = !1, this._activeDraggables.forEach(function (e) {
                        return e.getRootElement().style.transform = ""
                    }), this._activeDraggables = [], this._positionCache.items = [], this._positionCache.siblings = [], this._previousSwap.drag = null, this._previousSwap.delta = 0
                }, e.prototype._adjustClientRect = function (e, n, t) {
                    e.top += n, e.bottom = e.top + e.height, e.left += t, e.right = e.left + e.width
                }, e.prototype._getItemIndexFromPointerPosition = function (e, n, t, r) {
                    var i = this,
                        l = "horizontal" === this.orientation;
                    return Mv(this._positionCache.items, function (o, u, s) {
                        var a = o.drag,
                            c = o.clientRect;
                        return a === e ? s.length < 2 : (!r || a !== i._previousSwap.drag || (l ? r.x : r.y) !== i._previousSwap.delta) && (l ? n >= Math.floor(c.left) && n <= Math.floor(c.right) : t >= Math.floor(c.top) && t <= Math.floor(c.bottom))
                    })
                }, e.prototype._isPointerNearDropContainer = function (e, n) {
                    var t = this._positionCache.self,
                        r = .05 * t.width,
                        i = .05 * t.height;
                    return n > t.top - i && n < t.bottom + i && e > t.left - r && e < t.right + r
                }, e.prototype._getItemOffsetPx = function (e, n, t) {
                    var r = "horizontal" === this.orientation,
                        i = r ? n.left - e.left : n.top - e.top;
                    return -1 === t && (i += r ? n.width - e.width : n.height - e.height), i
                }, e.prototype._getSiblingOffsetPx = function (e, n, t) {
                    var r = "horizontal" === this.orientation,
                        i = n[e].clientRect,
                        l = n[e + -1 * t],
                        o = i[r ? "width" : "height"] * t;
                    if (l) {
                        var u = r ? "left" : "top",
                            s = r ? "right" : "bottom"; - 1 === t ? o -= l.clientRect[u] - i[s] : o += i[u] - l.clientRect[s]
                    }
                    return o
                }, e.prototype._getConnectedLists = function () {
                    var e, n = this,
                        t = (e = this.connectedTo, Array.isArray(e) ? e : [e]).map(function (e) {
                            return "string" == typeof e ? n._dragDropRegistry.getDropContainer(e) : e
                        });
                    return this._group && this._group._items.forEach(function (e) {
                        -1 === t.indexOf(e) && t.push(e)
                    }), t.filter(function (e) {
                        return e && e !== n
                    })
                }, e
            }();

        function Mv(e, n) {
            for (var t = 0; t < e.length; t++)
                if (n(e[t], t, e)) return t;
            return -1
        }

        function Lv(e, n, t) {
            return t >= e.top && t <= e.bottom && n >= e.left && n <= e.right
        }
        var xv = function () {
                return function () {}
            }(),
            Fv = function (e) {
                return e[e.NONE = 0] = "NONE", e[e.SELECTED = 1] = "SELECTED", e[e.UNTIL_X = 2] = "UNTIL_X", e[e.CONTINUOUS = 3] = "CONTINUOUS", e
            }({}),
            Uv = function () {
                function e(e, n, t, r) {
                    this.resourcesService = e, this.servicesService = n, this.recipeService = t, this.modalService = r, this.recipeUpdate = new L, this.queue = [], this.id = 1, this.queueSize = us.START_QUEUE_SIZE, n.addService(Nu.CRAFTING, this)
                }
                return e.prototype.craft = function (e, n, t) {
                    this.queue.length >= this.queueSize ? this.modalService.info("Order queue is full") : this.queue.push({
                        id: this.nextId(),
                        recipe: e,
                        amount: n,
                        type: t
                    })
                }, e.prototype.getQueue = function () {
                    return this.queue
                }, e.prototype.getOrder = function () {
                    var e = this,
                        n = this.queue.find(function (n) {
                            if (n.type === Fv.SELECTED && n.amount > 0 && e.resourcesService.hasResources(n.recipe.cost)) return !0;
                            if (n.type === Fv.UNTIL_X && e.resourcesService.hasResources(n.recipe.cost)) {
                                var t = 0;
                                return e.servicesService.getService(Nu.VILLAGE).buildings.filter(function (e) {
                                    return e.getBuildingType() === bu.WORKSHOP
                                }).forEach(function (e) {
                                    e.getRecipe() && e.getRecipe().id === n.recipe.id && (t += n.recipe.amount)
                                }), e.resourcesService.getResource(n.recipe.resource).amount + t < n.amount
                            }
                            if (n.type === Fv.CONTINUOUS && e.resourcesService.hasResources(n.recipe.cost)) {
                                var r = 0;
                                e.servicesService.getService(Nu.VILLAGE).buildings.filter(function (e) {
                                    return e.getBuildingType() === bu.WORKSHOP
                                }).forEach(function (e) {
                                    e.getRecipe() && e.getRecipe().id === n.recipe.id && (r += n.recipe.amount)
                                });
                                var i = e.resourcesService.getResource(n.recipe.resource);
                                return i.amount + r < i.limit
                            }
                        });
                    return n ? (this.resourcesService.decreaseResources(n.recipe.cost), n.type === Fv.SELECTED && (n.amount -= 1), this.queue = this.queue.filter(function (e) {
                        return e.type !== Fv.SELECTED || e.amount > 0
                    }), n.recipe) : null
                }, e.prototype.load = function (e) {
                    var n = this;
                    this.queue = [], Array.from(e.queue).forEach(function (e) {
                        n.queue.push({
                            id: n.nextId(),
                            recipe: n.recipeService.getRecipeById(e.recipeId),
                            amount: e.amount,
                            type: e.type
                        })
                    }), this.queueSize = e.queueSize
                }, e.prototype.save = function () {
                    return {
                        queue: this.queue.map(function (e) {
                            return {
                                recipeId: e.recipe.id,
                                amount: e.amount,
                                type: e.type
                            }
                        }),
                        queueSize: this.queueSize
                    }
                }, e.prototype.reset = function (e, n) {
                    this.queue = [], this.id = 1, this.queueSize = us.START_QUEUE_SIZE
                }, e.prototype.registerForUpdate = function () {
                    return this.recipeUpdate.asObservable()
                }, e.prototype.cancel = function (e, n) {
                    var t = this;
                    void 0 === n && (n = !1);
                    var r = this.queue.find(function (n) {
                        return n.id === e
                    });
                    if (r && !n) {
                        this.modalService.open(mu.CONFIRM), this.modalService.setModalText("Are you sure you want to cancel crafting " + Au.prepareResourceName(r.recipe.resource) + "?");
                        var i = this.modalService.registerForConfirmation().subscribe(function (n) {
                            n && (t.queue = t.queue.filter(function (n) {
                                return n.id !== e
                            }), t.recipeUpdate.next()), i.unsubscribe()
                        })
                    } else r && n && (this.queue = this.queue.filter(function (n) {
                        return n.id !== e
                    }), this.recipeUpdate.next())
                }, e.prototype.nextId = function () {
                    var e = this.id;
                    return this.id++, e
                }, e.prototype.moveRecipeInQueue = function (e) {
                    wv(this.queue, e.previousIndex, e.currentIndex)
                }, e.prototype.getQueueMaxSize = function () {
                    return this.queueSize
                }, e.prototype.increaseQueueSize = function (e) {
                    this.queueSize += e
                }, e.prototype.filterQueue = function (e) {
                    var n = this;
                    this.queue.forEach(function (t) {
                        e.includes(t.recipe.id) && n.cancel(t.id, !0)
                    })
                }, e.prototype.decreaseQueueSize = function (e) {
                    this.queueSize -= e
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(Ng), ze(vg), ze(pv), ze(Rg))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            Hv = function () {
                function e(e, n) {
                    this.craftingService = e, this.resourcesService = n, this.id = Math.random(), this.progress = 0, this.amount = 1, this.type = Fv.NONE, this.paid = !1, this.craftingTypes = Fv
                }
                return e.prototype.ngOnInit = function () {
                    var e = this;
                    this.updateSubscription = this.craftingService.registerForUpdate().subscribe(function () {
                        e.progressRef && (e.progressRef.nativeElement.style.width = e.progress / e.recipe.craftingDifficulty * 100 + "%")
                    })
                }, e.prototype.getResourceName = function (e) {
                    return Au.prepareResourceName(e)
                }, e.prototype.ngAfterViewInit = function () {
                    this.progressRef && (this.progressRef.nativeElement.style.width = this.progress / this.recipe.craftingDifficulty * 100 + "%")
                }, e.prototype.cancel = function () {
                    null !== this.id && this.craftingService.cancel(this.id)
                }, e.prototype.getCost = function () {
                    return this.recipe.cost
                }, e.prototype.isAvailable = function () {
                    for (var e = 0, n = Array.from(this.recipe.cost); e < n.length; e++) {
                        var t = n[e];
                        if (0 !== this.resourcesService.hasResource(t[0], t[1], !0)) return !1
                    }
                    return !0
                }, e.prototype.checkResource = function (e) {
                    return 0 === this.resourcesService.hasResource(e.key, e.value, !0)
                }, e.prototype.getResourceAmount = function () {
                    return this.resourcesService.getResource(this.recipe.resource).amount
                }, e
            }(),
            Gv = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{position:relative;display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #000;font-size:1.1em}#wrapperNotAvailable[_ngcontent-%COMP%]{display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #57575a}#titleGrey[_ngcontent-%COMP%]{display:inline-block;color:#57575a}.notMet[_ngcontent-%COMP%]{color:#8b0000}.title[_ngcontent-%COMP%]{text-align:left}hr[_ngcontent-%COMP%]{border-color:#000}#progressId[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background-color:var(--active-colour);z-index:1}#text[_ngcontent-%COMP%]{position:relative;z-index:2}.costTitle[_ngcontent-%COMP%]{text-align:left}.missing[_ngcontent-%COMP%]{color:#8b0000}.tooltip[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{min-width:200px}.craftingTitle[_ngcontent-%COMP%]{text-align:left}.type[_ngcontent-%COMP%]{display:inline-block}app-icon[_ngcontent-%COMP%]{flex:0 0 auto;margin-left:3px}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center}"]],
                data: {}
            });

        function Bv(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [["class", "type"]], null, null, null, null, null)), (e()(), lo(1, null, ["", ""]))], null, function (e, n) {
                e(n, 1, 0, n.component.amount)
            })
        }

        function Vv(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [["class", "type"]], null, null, null, null, null)), (e()(), lo(1, null, ["", "/", ""]))], null, function (e, n) {
                var t = n.component;
                e(n, 1, 0, t.getResourceAmount(), t.amount)
            })
        }

        function Wv(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [["class", "type"]], null, null, null, null, null)), (e()(), lo(-1, null, ["\u221e"]))], null, null)
        }

        function jv(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [["class", "craftingTitle"]], null, null, null, null, null)), (e()(), lo(1, null, ["Crafted: ", ""]))], null, function (e, n) {
                e(n, 1, 0, n.component.recipe.amount)
            })
        }

        function Yv(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, null, null, null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "div", [], null, null, null, null, null)), (e()(), lo(2, null, ["", ""]))], null, function (e, n) {
                e(n, 2, 0, n.parent.context.$implicit.value)
            })
        }

        function zv(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, null, null, null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "div", [["class", "missing"]], null, null, null, null, null)), (e()(), lo(2, null, ["", ""]))], null, function (e, n) {
                e(n, 2, 0, n.parent.context.$implicit.value)
            })
        }

        function Kv(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 6, "div", [["class", "icon"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, Yv)), kl(2, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, zv)), kl(4, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(5, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(6, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 2, 0, t.checkResource(n.context.$implicit)), e(n, 4, 0, !t.checkResource(n.context.$implicit)), e(n, 6, 0, t.getResourceName(n.context.$implicit.key), "resources")
            }, null)
        }

        function qv(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 24, "div", [["appTooltip", ""], ["class", "tooltip"], ["id", "wrapper"]], null, [[null, "click"], [null, "mousemove"]], function (e, n, t) {
                var r = !0,
                    i = e.component;
                return "mousemove" === n && (r = !1 !== El(e, 1).onmousemove(t) && r), "click" === n && (r = !1 !== i.cancel() && r), r
            }, null, null)), kl(1, 16384, null, 0, av, [], {
                elementId: [0, "elementId"]
            }, null), (e()(), Yi(2, 0, [[1, 0], ["progressId", 1]], null, 0, "div", [["id", "progressId"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 8, "div", [["id", "text"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, Bv)), kl(5, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Vv)), kl(7, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Wv)), kl(9, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), lo(10, null, [" ", " "])), to(11, 1), (e()(), Yi(12, 0, null, null, 12, "span", [], [[8, "id", 0]], null, null, null, null)), (e()(), lo(13, null, [" ", " "])), to(14, 1), (e()(), Yi(15, 0, null, null, 0, "hr", [], null, null, null, null, null)), (e()(), Yi(16, 0, null, null, 1, "div", [["class", "craftingTitle"]], null, null, null, null, null)), (e()(), lo(17, null, ["Difficulty: ", ""])), (e()(), ji(16777216, null, null, 1, null, jv)), kl(19, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(20, 0, null, null, 1, "div", [["class", "costTitle"]], null, null, null, null, null)), (e()(), lo(-1, null, ["Cost:"])), (e()(), ji(16777216, null, null, 2, null, Kv)), kl(23, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), Ml(0, Ks, [Vr])], function (e, n) {
                var t = n.component;
                e(n, 1, 0, t.id), e(n, 5, 0, t.type === t.craftingTypes.SELECTED), e(n, 7, 0, t.type === t.craftingTypes.UNTIL_X), e(n, 9, 0, t.type === t.craftingTypes.CONTINUOUS), e(n, 19, 0, t.recipe.amount > 1), e(n, 23, 0, hi(n, 23, 0, El(n, 24).transform(t.getCost())))
            }, function (e, n) {
                var t = n.component,
                    r = hi(n, 10, 0, e(n, 11, 0, El(n.parent, 0), t.getResourceName(t.recipe.getResource())));
                e(n, 10, 0, r), e(n, 12, 0, Vi(1, "", t.id, ""));
                var i = hi(n, 13, 0, e(n, 14, 0, El(n.parent, 0), t.getResourceName(t.recipe.resource)));
                e(n, 13, 0, i), e(n, 17, 0, t.recipe.craftingDifficulty)
            })
        }

        function $v(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [["class", "type"]], null, null, null, null, null)), (e()(), lo(1, null, ["", ""]))], null, function (e, n) {
                e(n, 1, 0, n.component.amount)
            })
        }

        function Qv(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [["class", "type"]], null, null, null, null, null)), (e()(), lo(1, null, ["", "/", ""]))], null, function (e, n) {
                var t = n.component;
                e(n, 1, 0, t.getResourceAmount(), t.amount)
            })
        }

        function Zv(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [["class", "type"]], null, null, null, null, null)), (e()(), lo(-1, null, ["\u221e"]))], null, null)
        }

        function Xv(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [["class", "craftingTitle"]], null, null, null, null, null)), (e()(), lo(1, null, ["Crafted: ", ""]))], null, function (e, n) {
                e(n, 1, 0, n.component.recipe.amount)
            })
        }

        function Jv(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, null, null, null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "div", [], null, null, null, null, null)), (e()(), lo(2, null, ["", ""]))], null, function (e, n) {
                e(n, 2, 0, n.parent.context.$implicit.value)
            })
        }

        function em(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, null, null, null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "div", [["class", "missing"]], null, null, null, null, null)), (e()(), lo(2, null, ["", ""]))], null, function (e, n) {
                e(n, 2, 0, n.parent.context.$implicit.value)
            })
        }

        function nm(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 6, "div", [["class", "icon"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, Jv)), kl(2, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, em)), kl(4, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(5, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(6, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 2, 0, t.checkResource(n.context.$implicit)), e(n, 4, 0, !t.checkResource(n.context.$implicit)), e(n, 6, 0, t.getResourceName(n.context.$implicit.key), "resources")
            }, null)
        }

        function tm(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 23, "div", [["appTooltip", ""], ["class", "tooltip"], ["id", "wrapperNotAvailable"]], null, [[null, "click"], [null, "mousemove"]], function (e, n, t) {
                var r = !0,
                    i = e.component;
                return "mousemove" === n && (r = !1 !== El(e, 1).onmousemove(t) && r), "click" === n && (r = !1 !== i.cancel() && r), r
            }, null, null)), kl(1, 16384, null, 0, av, [], {
                elementId: [0, "elementId"]
            }, null), (e()(), Yi(2, 0, null, null, 8, "div", [["id", "titleGrey"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, $v)), kl(4, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Qv)), kl(6, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Zv)), kl(8, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), lo(9, null, [" ", " "])), to(10, 1), (e()(), Yi(11, 0, null, null, 12, "span", [], [[8, "id", 0]], null, null, null, null)), (e()(), lo(12, null, [" ", " "])), to(13, 1), (e()(), Yi(14, 0, null, null, 0, "hr", [], null, null, null, null, null)), (e()(), Yi(15, 0, null, null, 1, "div", [["class", "craftingTitle"]], null, null, null, null, null)), (e()(), lo(16, null, ["Difficulty: ", ""])), (e()(), ji(16777216, null, null, 1, null, Xv)), kl(18, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(19, 0, null, null, 1, "div", [["class", "costTitle"]], null, null, null, null, null)), (e()(), lo(-1, null, ["Cost:"])), (e()(), ji(16777216, null, null, 2, null, nm)), kl(22, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), Ml(0, Ks, [Vr])], function (e, n) {
                var t = n.component;
                e(n, 1, 0, t.id), e(n, 4, 0, t.type === t.craftingTypes.SELECTED), e(n, 6, 0, t.type === t.craftingTypes.UNTIL_X), e(n, 8, 0, t.type === t.craftingTypes.CONTINUOUS), e(n, 18, 0, t.recipe.amount > 1), e(n, 22, 0, hi(n, 22, 0, El(n, 23).transform(t.getCost())))
            }, function (e, n) {
                var t = n.component,
                    r = hi(n, 9, 0, e(n, 10, 0, El(n.parent, 0), t.getResourceName(t.recipe.getResource())));
                e(n, 9, 0, r), e(n, 11, 0, Vi(1, "", t.id, ""));
                var i = hi(n, 12, 0, e(n, 13, 0, El(n.parent, 0), t.getResourceName(t.recipe.resource)));
                e(n, 12, 0, i), e(n, 16, 0, t.recipe.craftingDifficulty)
            })
        }

        function rm(e) {
            return so(0, [Ml(0, zs, []), Ql(671088640, 1, {
                progressRef: 0
            }), (e()(), ji(16777216, null, null, 1, null, qv)), kl(3, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, tm)), kl(5, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 3, 0, t.isAvailable()), e(n, 5, 0, !t.isAvailable())
            }, null)
        }

        function im(e, n, t, r) {
            return d(t) && (r = t, t = void 0), r ? im(e, n, t).pipe(K(function (e) {
                return p(e) ? r.apply(void 0, e) : r(e)
            })) : new w(function (r) {
                ! function e(n, t, r, i, l) {
                    var o;
                    if (function (e) {
                            return e && "function" == typeof e.addEventListener && "function" == typeof e.removeEventListener
                        }(n)) {
                        var u = n;
                        n.addEventListener(t, r, l), o = function () {
                            return u.removeEventListener(t, r, l)
                        }
                    } else if (function (e) {
                            return e && "function" == typeof e.on && "function" == typeof e.off
                        }(n)) {
                        var s = n;
                        n.on(t, r), o = function () {
                            return s.off(t, r)
                        }
                    } else if (function (e) {
                            return e && "function" == typeof e.addListener && "function" == typeof e.removeListener
                        }(n)) {
                        var a = n;
                        n.addListener(t, r), o = function () {
                            return a.removeListener(t, r)
                        }
                    } else {
                        if (!n || !n.length) throw new TypeError("Invalid event target");
                        for (var c = 0, p = n.length; c < p; c++) e(n[c], t, r, i, l)
                    }
                    i.add(o)
                }(e, n, function (e) {
                    r.next(arguments.length > 1 ? Array.prototype.slice.call(arguments) : e)
                }, r, t)
            })
        }
        var lm, om = function (e) {
                function n(n, t) {
                    var r = e.call(this, n, t) || this;
                    return r.scheduler = n, r.work = t, r.pending = !1, r
                }
                return i(n, e), n.prototype.schedule = function (e, n) {
                    if (void 0 === n && (n = 0), this.closed) return this;
                    this.state = e;
                    var t = this.id,
                        r = this.scheduler;
                    return null != t && (this.id = this.recycleAsyncId(r, t, n)), this.pending = !0, this.delay = n, this.id = this.id || this.requestAsyncId(r, this.id, n), this
                }, n.prototype.requestAsyncId = function (e, n, t) {
                    return void 0 === t && (t = 0), setInterval(e.flush.bind(e, this), t)
                }, n.prototype.recycleAsyncId = function (e, n, t) {
                    if (void 0 === t && (t = 0), null !== t && this.delay === t && !1 === this.pending) return n;
                    clearInterval(n)
                }, n.prototype.execute = function (e, n) {
                    if (this.closed) return new Error("executing a cancelled action");
                    this.pending = !1;
                    var t = this._execute(e, n);
                    if (t) return t;
                    !1 === this.pending && null != this.id && (this.id = this.recycleAsyncId(this.scheduler, this.id, null))
                }, n.prototype._execute = function (e, n) {
                    var t = !1,
                        r = void 0;
                    try {
                        this.work(e)
                    } catch (i) {
                        t = !0, r = !!i && i || new Error(i)
                    }
                    if (t) return this.unsubscribe(), r
                }, n.prototype._unsubscribe = function () {
                    var e = this.id,
                        n = this.scheduler,
                        t = n.actions,
                        r = t.indexOf(this);
                    this.work = null, this.state = null, this.pending = !1, this.scheduler = null, -1 !== r && t.splice(r, 1), null != e && (this.id = this.recycleAsyncId(n, e, null)), this.delay = null
                }, n
            }(function (e) {
                function n(n, t) {
                    return e.call(this) || this
                }
                return i(n, e), n.prototype.schedule = function (e, n) {
                    return void 0 === n && (n = 0), this
                }, n
            }(v)),
            um = function () {
                function e(n, t) {
                    void 0 === t && (t = e.now), this.SchedulerAction = n, this.now = t
                }
                return e.prototype.schedule = function (e, n, t) {
                    return void 0 === n && (n = 0), new this.SchedulerAction(this, e).schedule(t, n)
                }, e.now = function () {
                    return Date.now()
                }, e
            }(),
            sm = new(function (e) {
                function n(t, r) {
                    void 0 === r && (r = um.now);
                    var i = e.call(this, t, function () {
                        return n.delegate && n.delegate !== i ? n.delegate.now() : r()
                    }) || this;
                    return i.actions = [], i.active = !1, i.scheduled = void 0, i
                }
                return i(n, e), n.prototype.schedule = function (t, r, i) {
                    return void 0 === r && (r = 0), n.delegate && n.delegate !== this ? n.delegate.schedule(t, r, i) : e.prototype.schedule.call(this, t, r, i)
                }, n.prototype.flush = function (e) {
                    var n = this.actions;
                    if (this.active) n.push(e);
                    else {
                        var t;
                        this.active = !0;
                        do {
                            if (t = e.execute(e.state, e.delay)) break
                        } while (e = n.shift());
                        if (this.active = !1, t) {
                            for (; e = n.shift();) e.unsubscribe();
                            throw t
                        }
                    }
                }, n
            }(um))(om),
            am = function () {
                function e(e) {
                    this.durationSelector = e
                }
                return e.prototype.call = function (e, n) {
                    return n.subscribe(new cm(e, this.durationSelector))
                }, e
            }(),
            cm = function (e) {
                function n(n, t) {
                    var r = e.call(this, n) || this;
                    return r.durationSelector = t, r.hasValue = !1, r
                }
                return i(n, e), n.prototype._next = function (e) {
                    if (this.value = e, this.hasValue = !0, !this.throttled) {
                        var n = void 0;
                        try {
                            n = (0, this.durationSelector)(e)
                        } catch (r) {
                            return this.destination.error(r)
                        }
                        var t = Y(this, n);
                        !t || t.closed ? this.clearThrottle() : this.add(this.throttled = t)
                    }
                }, n.prototype.clearThrottle = function () {
                    var e = this.value,
                        n = this.hasValue,
                        t = this.throttled;
                    t && (this.remove(t), this.throttled = null, t.unsubscribe()), n && (this.value = null, this.hasValue = !1, this.destination.next(e))
                }, n.prototype.notifyNext = function (e, n, t, r) {
                    this.clearThrottle()
                }, n.prototype.notifyComplete = function () {
                    this.clearThrottle()
                }, n
            }(z);

        function pm(e) {
            return !p(e) && e - parseFloat(e) + 1 >= 0
        }

        function hm(e) {
            var n = e.index,
                t = e.period,
                r = e.subscriber;
            if (r.next(n), !r.closed) {
                if (-1 === t) return r.complete();
                e.index = n + 1, this.schedule(e, t)
            }
        }
        lm || (lm = {});
        var dm = function () {
                function e(e, n) {
                    var t = this;
                    this._platform = e, n.runOutsideAngular(function () {
                        t._change = e.isBrowser ? ie(im(window, "resize"), im(window, "orientationchange")) : ta(), t._invalidateCache = t.change().subscribe(function () {
                            return t._updateViewportSize()
                        })
                    })
                }
                return e.prototype.ngOnDestroy = function () {
                    this._invalidateCache.unsubscribe()
                }, e.prototype.getViewportSize = function () {
                    this._viewportSize || this._updateViewportSize();
                    var e = {
                        width: this._viewportSize.width,
                        height: this._viewportSize.height
                    };
                    return this._platform.isBrowser || (this._viewportSize = null), e
                }, e.prototype.getViewportRect = function () {
                    var e = this.getViewportScrollPosition(),
                        n = this.getViewportSize(),
                        t = n.width,
                        r = n.height;
                    return {
                        top: e.top,
                        left: e.left,
                        bottom: e.top + r,
                        right: e.left + t,
                        height: r,
                        width: t
                    }
                }, e.prototype.getViewportScrollPosition = function () {
                    if (!this._platform.isBrowser) return {
                        top: 0,
                        left: 0
                    };
                    var e = document.documentElement,
                        n = e.getBoundingClientRect();
                    return {
                        top: -n.top || document.body.scrollTop || window.scrollY || e.scrollTop || 0,
                        left: -n.left || document.body.scrollLeft || window.scrollX || e.scrollLeft || 0
                    }
                }, e.prototype.change = function (e) {
                    return void 0 === e && (e = 20), e > 0 ? this._change.pipe((n = e, void 0 === t && (t = sm), r = function () {
                        return function (e, n, t) {
                            void 0 === e && (e = 0);
                            var r = -1;
                            return pm(n) ? r = Number(n) < 1 ? 1 : Number(n) : F(n) && (t = n), F(t) || (t = sm), new w(function (n) {
                                var i = pm(e) ? e : +e - t.now();
                                return t.schedule(hm, i, {
                                    index: 0,
                                    period: r,
                                    subscriber: n
                                })
                            })
                        }(n, t)
                    }, function (e) {
                        return e.lift(new am(r))
                    })) : this._change;
                    var n, t, r
                }, e.prototype._updateViewportSize = function () {
                    this._viewportSize = this._platform.isBrowser ? {
                        width: window.innerWidth,
                        height: window.innerHeight
                    } : {
                        width: 0,
                        height: 0
                    }
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(dv), ze(Zt))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            fm = new ye("cdk-dir-doc", {
                providedIn: "root",
                factory: function () {
                    return ze(Zs)
                }
            }),
            gm = function () {
                function e(e) {
                    if (this.value = "ltr", this.change = new pt, e) {
                        var n = (e.body ? e.body.dir : null) || (e.documentElement ? e.documentElement.dir : null);
                        this.value = "ltr" === n || "rtl" === n ? n : "ltr"
                    }
                }
                return e.prototype.ngOnDestroy = function () {
                    this.change.complete()
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(fm, 8))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            vm = function () {
                function e(e, n, t, r) {
                    this.recipeService = e, this.resourcesService = n, this.craftingService = t, this.changeDetectorRef = r, this.craftingTypes = Fv, this.filterText = "", this.amount = 1, this.craftingType = this.craftingTypes.SELECTED, this.bookPage = Cu[Cu.ALL]
                }
                return e.prototype.ngOnInit = function () {
                    var e = this;
                    this.craftingService.registerForUpdate().subscribe(function () {
                        e.changeDetectorRef.destroyed || e.changeDetectorRef.detectChanges()
                    })
                }, e.prototype.getRecipes = function () {
                    var e = this;
                    return this.filterText && this.filterText.length > 0 ? this.recipeService.getRecipes().filter(function (n) {
                        return n.available && e.resourcesService.getResourceTypes(n.getResource()).includes(Cu[e.bookPage]) && Au.prepareResourceName(n.getResource()).toLowerCase().includes(e.filterText.toLowerCase())
                    }) : this.recipeService.getRecipes().filter(function (n) {
                        return n.available && e.resourcesService.getResourceTypes(n.getResource()).includes(Cu[e.bookPage])
                    })
                }, e.prototype.getEntries = function () {
                    var e = [];
                    return e.push(Cu[Cu.ALL]), e.push(Cu[Cu.PROCESSED]), e.push(Cu[Cu.TOOLS]), e.push(Cu[Cu.FOOD]), e.push(Cu[Cu.OTHER]), e
                }, e.prototype.select = function (e) {
                    this.bookPage = e
                }, e.prototype.craft = function (e) {
                    this.craftingService.craft(e, this.amount, this.craftingType)
                }, e.prototype.getQueue = function () {
                    return this.craftingService.getQueue()
                }, e.prototype.drop = function (e) {
                    this.craftingService.moveRecipeInQueue(e)
                }, e.prototype.getQueueMaxSize = function () {
                    return this.craftingService.getQueueMaxSize()
                }, e.prototype.validateAmountInput = function () {
                    var e = Number(String(this.amount).replace(/[^0-9]/g, ""));
                    e < 1 && (e = 1), this.amount = e
                }, e
            }(),
            mm = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{margin:.7%;height:100%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#boxes[_ngcontent-%COMP%]{display:flex;flex-direction:row;border:1px solid #000;height:94.5%;text-align:center}#recipes[_ngcontent-%COMP%]{text-align:center;flex:0 0 74.3%;display:flex;flex-direction:column;border:1px solid #000;align-items:center}.queue[_ngcontent-%COMP%]{text-align:center;flex:0 0 25%;display:flex;flex-direction:column;border:1px solid #000;align-items:center}#queueRecipes[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}.title[_ngcontent-%COMP%]{width:100.5%;font-weight:bolder;font-size:1.1em;display:inline-block;border-bottom:1px solid #000}#modes[_ngcontent-%COMP%]{margin-top:-1px;padding:0;margin-bottom:5px}#recipesBook[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:100%;width:100%}#menu[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-right:1px solid #000;flex:0 0 10%}.entry[_ngcontent-%COMP%]{display:flex;border-bottom:1px solid #000;flex:1 0 0;height:100%;width:100%;margin-right:-30px;font-size:.8em;font-weight:600;cursor:pointer}.entry[_ngcontent-%COMP%]:last-of-type{border-bottom:none}.entryText[_ngcontent-%COMP%]{-webkit-transform:rotate(-90deg);-moz-transform:rotate(-90deg);-ms-transform:rotate(-90deg);-o-transform:rotate(-90deg)}.inactiveEntry[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;justify-content:center;align-items:center}.activeEntry[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;justify-content:center;align-items:center;background-color:var(--active-colour)}#book[_ngcontent-%COMP%]{flex:0 0 90%;width:100%}#bookRecipes[_ngcontent-%COMP%]{overflow-y:auto;border-top:1px solid #000}app-recipe[_ngcontent-%COMP%]{font-size:.8em;display:inline-block;width:100px;margin:4px 8px;cursor:pointer}#side[_ngcontent-%COMP%]{display:flex;flex-direction:row;font-size:.8em;margin:1%;vertical-align:bottom}#amount[_ngcontent-%COMP%], #filter[_ngcontent-%COMP%]{font-size:1em;width:20%;margin:1%;display:block;vertical-align:bottom}#filter[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:1.05em;margin-left:0;padding:0;border:none;outline:0}#amount[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:65%;font-size:1.15em;margin-left:0;padding:0;border:none;outline:0}#radios[_ngcontent-%COMP%]{text-align:left;font-size:.9em}#progressButton[_ngcontent-%COMP%]{font-size:.6em}"]],
                data: {}
            });

        function ym(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "div", [["class", "activeEntry"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "div", [["class", "entryText"]], null, null, null, null, null)), (e()(), lo(2, null, ["", ""]))], null, function (e, n) {
                e(n, 2, 0, n.parent.context.$implicit)
            })
        }

        function Sm(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "div", [["class", "inactiveEntry"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "div", [["class", "entryText"]], null, null, null, null, null)), (e()(), lo(2, null, ["", ""]))], null, function (e, n) {
                e(n, 2, 0, n.parent.context.$implicit)
            })
        }

        function Em(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 4, "div", [["class", "entry"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.select(e.context.$implicit) && r), r
            }, null, null)), (e()(), ji(16777216, null, null, 1, null, ym)), kl(2, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Sm)), kl(4, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 2, 0, t.bookPage === n.context.$implicit), e(n, 4, 0, t.bookPage !== n.context.$implicit)
            }, null)
        }

        function bm(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-recipe", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.craft(e.context.$implicit) && r), r
            }, rm, Gv)), kl(1, 4308992, null, 0, Hv, [Uv, Ng], {
                recipe: [0, "recipe"]
            }, null)], function (e, n) {
                e(n, 1, 0, n.context.$implicit)
            }, null)
        }

        function Om(e) {
            return so(0, [(e()(), Yi(0, 16777216, null, null, 6, "app-recipe", [["cdkDrag", ""], ["class", "cdk-drag"]], [[2, "cdk-drag-dragging", null]], null, null, rm, Gv)), Ll(6144, null, yv, null, [_v]), kl(2, 4341760, [[1, 4]], 3, _v, [Pn, [3, Ev], Zs, Zt, br, dm, mv, Rv, [2, gm]], null, null), Ql(603979776, 2, {
                _handles: 1
            }), Ql(335544320, 3, {
                _previewTemplate: 0
            }), Ql(335544320, 4, {
                _placeholderTemplate: 0
            }), kl(6, 4308992, null, 0, Hv, [Uv, Ng], {
                id: [0, "id"],
                recipe: [1, "recipe"],
                amount: [2, "amount"],
                type: [3, "type"]
            }, null), (e()(), ji(0, null, null, 0))], function (e, n) {
                e(n, 6, 0, n.context.$implicit.id, n.context.$implicit.recipe, n.context.$implicit.amount, n.context.$implicit.type)
            }, function (e, n) {
                e(n, 0, 0, El(n, 2)._hasStartedDragging && El(n, 2)._isDragging())
            })
        }

        function Rm(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 76, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 2, "div", [["id", "title"]], null, null, null, null, null)), (e()(), Yi(2, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["Crafting"])), (e()(), Yi(4, 0, null, null, 72, "div", [["id", "boxes"]], null, null, null, null, null)), (e()(), Yi(5, 0, null, null, 60, "div", [["id", "recipes"]], null, null, null, null, null)), (e()(), Yi(6, 0, null, null, 1, "span", [["class", "title"]], null, null, null, null, null)), (e()(), lo(-1, null, [" Recipes "])), (e()(), Yi(8, 0, null, null, 57, "div", [["id", "recipesBook"]], null, null, null, null, null)), (e()(), Yi(9, 0, null, null, 2, "div", [["id", "menu"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, Em)), kl(11, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), (e()(), Yi(12, 0, null, null, 53, "div", [["id", "book"]], null, null, null, null, null)), (e()(), Yi(13, 0, null, null, 49, "div", [["id", "side"]], null, null, null, null, null)), (e()(), Yi(14, 0, null, null, 8, "div", [["id", "filter"]], null, null, null, null, null)), (e()(), lo(-1, null, [" Filter:"])), (e()(), Yi(16, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(17, 0, null, null, 5, "input", [["type", "text"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"]], function (e, n, t) {
                var r = !0,
                    i = e.component;
                return "input" === n && (r = !1 !== El(e, 18)._handleInput(t.target.value) && r), "blur" === n && (r = !1 !== El(e, 18).onTouched() && r), "compositionstart" === n && (r = !1 !== El(e, 18)._compositionStart() && r), "compositionend" === n && (r = !1 !== El(e, 18)._compositionEnd(t.target.value) && r), "ngModelChange" === n && (r = !1 !== (i.filterText = t) && r), r
            }, null, null)), kl(18, 16384, null, 0, Tf, [xn, Pn, [2, Rf]], null, null), Ll(1024, null, bf, function (e) {
                return [e]
            }, [Tf]), kl(20, 671744, null, 0, cg, [[8, null], [8, null], [8, null], [6, bf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, wf, null, [cg]), kl(22, 16384, null, 0, $f, [[4, wf]], null, null), (e()(), Yi(23, 0, null, null, 9, "div", [["id", "amount"]], null, null, null, null, null)), (e()(), lo(-1, null, [" amount:"])), (e()(), Yi(25, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(26, 0, null, null, 6, "input", [["type", "number"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "change"], [null, "keyup"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"]], function (e, n, t) {
                var r = !0,
                    i = e.component;
                return "input" === n && (r = !1 !== El(e, 27)._handleInput(t.target.value) && r), "blur" === n && (r = !1 !== El(e, 27).onTouched() && r), "compositionstart" === n && (r = !1 !== El(e, 27)._compositionStart() && r), "compositionend" === n && (r = !1 !== El(e, 27)._compositionEnd(t.target.value) && r), "change" === n && (r = !1 !== El(e, 28).onChange(t.target.value) && r), "input" === n && (r = !1 !== El(e, 28).onChange(t.target.value) && r), "blur" === n && (r = !1 !== El(e, 28).onTouched() && r), "ngModelChange" === n && (r = !1 !== (i.amount = t) && r), "change" === n && (r = !1 !== i.validateAmountInput() && r), "keyup" === n && (r = !1 !== i.validateAmountInput() && r), r
            }, null, null)), kl(27, 16384, null, 0, Tf, [xn, Pn, [2, Rf]], null, null), kl(28, 16384, null, 0, If, [xn, Pn], null, null), Ll(1024, null, bf, function (e, n) {
                return [e, n]
            }, [Tf, If]), kl(30, 671744, null, 0, cg, [[8, null], [8, null], [8, null], [6, bf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, wf, null, [cg]), kl(32, 16384, null, 0, $f, [[4, wf]], null, null), (e()(), Yi(33, 0, null, null, 29, "div", [["id", "radios"]], null, null, null, null, null)), (e()(), Yi(34, 0, null, null, 8, "label", [], null, null, null, null, null)), (e()(), Yi(35, 0, null, null, 6, "input", [["name", "type"], ["type", "radio"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"], [null, "change"]], function (e, n, t) {
                var r = !0,
                    i = e.component;
                return "input" === n && (r = !1 !== El(e, 36)._handleInput(t.target.value) && r), "blur" === n && (r = !1 !== El(e, 36).onTouched() && r), "compositionstart" === n && (r = !1 !== El(e, 36)._compositionStart() && r), "compositionend" === n && (r = !1 !== El(e, 36)._compositionEnd(t.target.value) && r), "change" === n && (r = !1 !== El(e, 37).onChange() && r), "blur" === n && (r = !1 !== El(e, 37).onTouched() && r), "ngModelChange" === n && (r = !1 !== (i.craftingType = t) && r), r
            }, null, null)), kl(36, 16384, null, 0, Tf, [xn, Pn, [2, Rf]], null, null), kl(37, 212992, null, 0, Pf, [xn, Pn, Nf, on], {
                name: [0, "name"],
                value: [1, "value"]
            }, null), Ll(1024, null, bf, function (e, n) {
                return [e, n]
            }, [Tf, Pf]), kl(39, 671744, null, 0, cg, [[8, null], [8, null], [8, null], [6, bf]], {
                name: [0, "name"],
                model: [1, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, wf, null, [cg]), kl(41, 16384, null, 0, $f, [[4, wf]], null, null), (e()(), lo(-1, null, [" selected amount "])), (e()(), Yi(43, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(44, 0, null, null, 8, "label", [], null, null, null, null, null)), (e()(), Yi(45, 0, null, null, 6, "input", [["name", "type"], ["type", "radio"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"], [null, "change"]], function (e, n, t) {
                var r = !0,
                    i = e.component;
                return "input" === n && (r = !1 !== El(e, 46)._handleInput(t.target.value) && r), "blur" === n && (r = !1 !== El(e, 46).onTouched() && r), "compositionstart" === n && (r = !1 !== El(e, 46)._compositionStart() && r), "compositionend" === n && (r = !1 !== El(e, 46)._compositionEnd(t.target.value) && r), "change" === n && (r = !1 !== El(e, 47).onChange() && r), "blur" === n && (r = !1 !== El(e, 47).onTouched() && r), "ngModelChange" === n && (r = !1 !== (i.craftingType = t) && r), r
            }, null, null)), kl(46, 16384, null, 0, Tf, [xn, Pn, [2, Rf]], null, null), kl(47, 212992, null, 0, Pf, [xn, Pn, Nf, on], {
                name: [0, "name"],
                value: [1, "value"]
            }, null), Ll(1024, null, bf, function (e, n) {
                return [e, n]
            }, [Tf, Pf]), kl(49, 671744, null, 0, cg, [[8, null], [8, null], [8, null], [6, bf]], {
                name: [0, "name"],
                model: [1, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, wf, null, [cg]), kl(51, 16384, null, 0, $f, [[4, wf]], null, null), (e()(), lo(-1, null, [" until X available "])), (e()(), Yi(53, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(54, 0, null, null, 8, "label", [], null, null, null, null, null)), (e()(), Yi(55, 0, null, null, 6, "input", [["name", "type"], ["type", "radio"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"], [null, "change"]], function (e, n, t) {
                var r = !0,
                    i = e.component;
                return "input" === n && (r = !1 !== El(e, 56)._handleInput(t.target.value) && r), "blur" === n && (r = !1 !== El(e, 56).onTouched() && r), "compositionstart" === n && (r = !1 !== El(e, 56)._compositionStart() && r), "compositionend" === n && (r = !1 !== El(e, 56)._compositionEnd(t.target.value) && r), "change" === n && (r = !1 !== El(e, 57).onChange() && r), "blur" === n && (r = !1 !== El(e, 57).onTouched() && r), "ngModelChange" === n && (r = !1 !== (i.craftingType = t) && r), r
            }, null, null)), kl(56, 16384, null, 0, Tf, [xn, Pn, [2, Rf]], null, null), kl(57, 212992, null, 0, Pf, [xn, Pn, Nf, on], {
                name: [0, "name"],
                value: [1, "value"]
            }, null), Ll(1024, null, bf, function (e, n) {
                return [e, n]
            }, [Tf, Pf]), kl(59, 671744, null, 0, cg, [[8, null], [8, null], [8, null], [6, bf]], {
                name: [0, "name"],
                model: [1, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, wf, null, [cg]), kl(61, 16384, null, 0, $f, [[4, wf]], null, null), (e()(), lo(-1, null, [" continuous "])), (e()(), Yi(63, 0, null, null, 2, "div", [["id", "bookRecipes"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, bm)), kl(65, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), (e()(), Yi(66, 0, null, null, 10, "div", [["class", "queue"]], null, null, null, null, null)), (e()(), Yi(67, 0, null, null, 1, "span", [["class", "title"]], null, null, null, null, null)), (e()(), lo(-1, null, ["Orders"])), (e()(), lo(69, null, [" ", "/", " "])), (e()(), Yi(70, 0, null, null, 6, "div", [["cdkDropList", ""], ["class", "cdk-drop-list"], ["id", "queueRecipes"]], [[8, "id", 0], [2, "cdk-drop-list-dragging", null]], [[null, "cdkDropListDropped"]], function (e, n, t) {
                var r = !0;
                return "cdkDropListDropped" === n && (r = !1 !== e.component.drop(t) && r), r
            }, null, null)), Ll(6144, null, Ev, null, [kv]), kl(72, 212992, null, 1, kv, [Pn, mv, Rr, [2, gm], [3, Pv]], {
                id: [0, "id"]
            }, {
                dropped: "cdkDropListDropped"
            }), Ql(603979776, 1, {
                _draggables: 1
            }), Ll(256, null, Pv, void 0, []), (e()(), ji(16777216, null, null, 1, null, Om)), kl(76, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 11, 0, t.getEntries()), e(n, 20, 0, t.filterText), e(n, 30, 0, t.amount), e(n, 37, 0, "type", t.craftingTypes.SELECTED), e(n, 39, 0, "type", t.craftingType), e(n, 47, 0, "type", t.craftingTypes.UNTIL_X), e(n, 49, 0, "type", t.craftingType), e(n, 57, 0, "type", t.craftingTypes.CONTINUOUS), e(n, 59, 0, "type", t.craftingType), e(n, 65, 0, t.getRecipes()), e(n, 72, 0, "queueRecipes"), e(n, 76, 0, t.getQueue())
            }, function (e, n) {
                var t = n.component;
                e(n, 17, 0, El(n, 22).ngClassUntouched, El(n, 22).ngClassTouched, El(n, 22).ngClassPristine, El(n, 22).ngClassDirty, El(n, 22).ngClassValid, El(n, 22).ngClassInvalid, El(n, 22).ngClassPending), e(n, 26, 0, El(n, 32).ngClassUntouched, El(n, 32).ngClassTouched, El(n, 32).ngClassPristine, El(n, 32).ngClassDirty, El(n, 32).ngClassValid, El(n, 32).ngClassInvalid, El(n, 32).ngClassPending), e(n, 35, 0, El(n, 41).ngClassUntouched, El(n, 41).ngClassTouched, El(n, 41).ngClassPristine, El(n, 41).ngClassDirty, El(n, 41).ngClassValid, El(n, 41).ngClassInvalid, El(n, 41).ngClassPending), e(n, 45, 0, El(n, 51).ngClassUntouched, El(n, 51).ngClassTouched, El(n, 51).ngClassPristine, El(n, 51).ngClassDirty, El(n, 51).ngClassValid, El(n, 51).ngClassInvalid, El(n, 51).ngClassPending), e(n, 55, 0, El(n, 61).ngClassUntouched, El(n, 61).ngClassTouched, El(n, 61).ngClassPristine, El(n, 61).ngClassDirty, El(n, 61).ngClassValid, El(n, 61).ngClassInvalid, El(n, 61).ngClassPending), e(n, 69, 0, t.getQueue().length, t.getQueueMaxSize()), e(n, 70, 0, El(n, 72).id, El(n, 72)._dragging)
            })
        }

        function Tm(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-crafting", [], null, null, null, Rm, mm)), kl(1, 114688, null, 0, vm, [pv, Ng, Uv, Rr], null, null)], function (e, n) {
                e(n, 1, 0)
            }, null)
        }
        var Cm, _m = al("app-crafting", vm, Tm, {}, {}, []),
            Im = function () {
                return function (e, n, t, r, i, l) {
                    this.id = e, this.resource = n, this.amount = t, this.buy = r, this.price = i, this.duration = l
                }
            }(),
            Am = function () {
                function e(e) {
                    var n = this;
                    this.optionsService = e, this.audios = [], this.optionsService.registerForOptionsChange().subscribe(function () {
                        n.optionsService.getOption(mg.SOUND) ? n.audios.forEach(function (e) {
                            return e.volume = n.optionsService.getOption(mg.SOUND_VOLUME) / 100
                        }) : n.audios.forEach(function (e) {
                            return e.volume = 0
                        })
                    })
                }
                return e.prototype.playAudio = function (e) {
                    this.audios = this.audios.filter(function (e) {
                        return !e.ended
                    }), e.load(), e.volume = this.optionsService.getOption(mg.SOUND) ? this.optionsService.getOption(mg.SOUND_VOLUME) / 100 : 0, e.play(), this.audios.push(e)
                }, e.prototype.playTownBells = function () {
                    this.playAudio(new Audio("assets/sounds/village_bells.wav"))
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(yg))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            wm = function () {
                function e(e, n, t, r, i, l) {
                    var o = this;
                    this.servicesService = e, this.calendarService = n, this.resourcesService = t, this.logService = r, this.soundService = i, this.modalService = l, this.offers = [], this.id = 10, this.servicesService.addService(Nu.MARKET, this), this.calendarService.registerForDayChange().subscribe(function (e) {
                        o.offers.forEach(function (e) {
                            return e.duration -= 1
                        }), o.offers = o.offers.filter(function (e) {
                            return e.duration > 0
                        })
                    })
                }
                return e.prototype.nextId = function () {
                    return this.id += 1, this.id - 1
                }, e.prototype.load = function (e) {
                    this.offers = e.offers, this.id = e.id
                }, e.prototype.save = function () {
                    return {
                        offers: this.offers,
                        id: this.id
                    }
                }, e.prototype.reset = function (e, n) {
                    this.offers = [], this.id = 10
                }, e.prototype.getOffers = function () {
                    return this.offers
                }, e.prototype.accept = function (e) {
                    var n = this,
                        t = this.offers.find(function (n) {
                            return n.id === e
                        });
                    if (t) {
                        this.modalService.open(mu.MARKET), this.modalService.setModalValue(t);
                        var r = this.modalService.registerForValueResponse().subscribe(function (e) {
                            if (r.unsubscribe(), null !== e && !isNaN(e)) {
                                if (e > t.amount && (e = t.amount), t.buy) {
                                    if (!n.resourcesService.decreaseResource(vu.COINS, n.calculatePrice(t, e), !0)) return void n.modalService.info("Not enough coins to buy " + e + " " + Au.prepareResourceName(t.resource));
                                    n.resourcesService.increaseResource(t.resource, e, !0)
                                } else {
                                    if (!n.resourcesService.decreaseResource(t.resource, e, !0)) return void n.modalService.info("Not enough resources to sell");
                                    n.resourcesService.increaseResource(vu.COINS, n.calculatePrice(t, e), !0)
                                }
                                t.amount === Number(e) ? n.offers.splice(n.offers.indexOf(t), 1) : (t.price = n.calculatePrice(t, t.amount - e), t.amount -= e)
                            }
                        })
                    } else this.modalService.info("Market offer not found")
                }, e.prototype.callMerchant = function () {
                    for (var e = Array.from(this.resourcesService.getResources().values()).filter(function (e) {
                            return e.isVisible()
                        }).map(function (e) {
                            return {
                                item: e.resource,
                                chance: e.prioritise ? 10 : 1
                            }
                        }), n = ku.randomBetween(3, 8), t = ku.randomBetween(50, 180), r = 0; r < n; r++) {
                        var i = ku.randomWeightedExcept(e, [vu.COINS]),
                            l = ku.randomBetween(5, 20),
                            o = ku.randomBetween(0, 1),
                            u = ku.randomBetween(-5, 25),
                            s = rs.getResource(i).TRADE_VALUE * l;
                        0 === (s = o ? Math.floor(s * (1 + u / 100)) : Math.floor(s * (1 - u / 100))) ? r-- : this.offers.push(new Im(this.nextId(), i, l, !!o, s, t))
                    }
                    this.logService.log("Merchant arrived"), this.soundService.playTownBells()
                }, e.prototype.calculatePrice = function (e, n) {
                    return e.buy ? Math.ceil(n / e.amount * e.price) : Math.floor(n / e.amount * e.price)
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(vg), ze(bg), ze(Ng), ze(Og), ze(Am), ze(Rg))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            Nm = function (e) {
                return e[e.FIRST = 0] = "FIRST", e[e.SECOND = 1] = "SECOND", e[e.THIRD = 2] = "THIRD", e[e.FOURTH = 3] = "FOURTH", e
            }({}),
            Pm = function (e) {
                return e[e.TEXT = 0] = "TEXT", e[e.PROGRESS_BAR = 1] = "PROGRESS_BAR", e[e.BUTTON = 2] = "BUTTON", e[e.BUTTON_CHECKBOX = 3] = "BUTTON_CHECKBOX", e[e.TWO_BUTTON = 4] = "TWO_BUTTON", e[e.DROPDOWN = 5] = "DROPDOWN", e[e.ICON = 6] = "ICON", e
            }({}),
            Dm = function () {
                function e(e, n) {
                    this.valueType = e, this.value = n
                }
                return e.emptyValue = function () {
                    return new e(Pm.TEXT, "")
                }, e.textValue = function (n) {
                    return new e(Pm.TEXT, n)
                }, e.progressValue = function (n, t) {
                    return void 0 === t && (t = ""), new e(Pm.PROGRESS_BAR, {
                        value: n,
                        label: t
                    })
                }, e.buttonValue = function (n, t) {
                    return new e(Pm.BUTTON, {
                        buttonText: n,
                        callbackValue: t
                    })
                }, e.buttonCheckboxValue = function (n, t, r, i, l) {
                    return new e(Pm.BUTTON_CHECKBOX, {
                        buttonText: n,
                        callbackValue: t,
                        checkboxState: i,
                        checkboxLabel: r,
                        checkboxCallbackValue: l
                    })
                }, e.twoButtonValue = function (n, t, r, i, l) {
                    return new e(Pm.TWO_BUTTON, {
                        button1Text: n,
                        callback1Value: t,
                        textBetween: r,
                        button2Text: i,
                        callback2Value: l
                    })
                }, e.dropdownValue = function (n, t) {
                    return new e(Pm.DROPDOWN, {
                        values: n,
                        selected: t
                    })
                }, e.iconValue = function (n) {
                    return new e(Pm.ICON, n)
                }, e.prototype.getValueType = function () {
                    return this.valueType
                }, e.prototype.getValue = function () {
                    return this.value
                }, e
            }(),
            km = function () {
                return function (e, n, t, r) {
                    this.name = e, this.effect = n, this.duration = t, this.cost = r
                }
            }(),
            Mm = function () {
                function e(e, n, t, r, i, l, o, u) {
                    this.servicesService = t, this.id = e, this.buildingType = n, this.demolishable = l, this.settings = r, this.stoppable = o, this.working = i, this.level = u, this.size = r.SIZE, this.complexity = r.COMPLEXITY, t && (this.resourcesService = t.getService(Nu.RESOURCES), this.effectsService = t.getService(Nu.EFFECTS), this.happinessService = t.getService(Nu.HAPPINESS), this.gameService = t.getService(Nu.GAME), this.logService = t.getService(Nu.LOG), this.modalService = t.getService(Nu.MODAL), this.weatherService = t.getService(Nu.WEATHER))
                }
                return e.prototype.build = function () {
                    return this.startProduction(), this
                }, e.prototype.getBuildingId = function () {
                    return this.id
                }, e.prototype.callback = function (e) {}, e.prototype.finishDemolish = function () {
                    var e = this;
                    Array.from(this.getCost().entries()).forEach(function (n) {
                        return e.resourcesService.increaseResource(n[0], Math.floor(.3 * n[1]))
                    })
                }, e.prototype.fireWorker = function () {
                    return !!this.working && (this.resourcesService.fireWorker(), this.working = !1, !0)
                }, e.prototype.getBuildingType = function () {
                    return this.buildingType
                }, e.prototype.getComplexity = function () {
                    return this.complexity
                }, e.prototype.getCost = function () {
                    var e = new Map;
                    return this.settings.COST.forEach(function (n) {
                        return e.set(n.resource, n.amount)
                    }), e
                }, e.prototype.getDescription = function () {
                    return this.settings.DESCRIPTION
                }, e.prototype.hasDetails = function () {
                    return !0
                }, e.prototype.getDetails = function () {
                    var e = "";
                    return (this.getBuildingLevel() > 1 || this.hasUpgrade()) && (e += "building level: " + this.level + "<br>"), this.getPower() % 1 == 0 ? e += "building power: " + this.getPower() + "<br>" : e += "building power: " + Au.round(this.getPower(), 2) + "<br>", 0 !== this.getPermanentEffects() && (e += "permanent effects: " + this.getPermanentEffects() + "%<br>"), 0 !== this.getEffects() && (e += "temporary effects: " + this.getEffects() + "%<br>"), 0 !== this.getHappinessEffect() && (e += "happiness effects: " + this.getHappinessEffect() + "%<br>"), 0 !== this.getWeatherMultiplier() && (e += "weather multiplier: " + this.getWeatherMultiplier() + "%<br>"), e
                }, e.prototype.getEffects = function () {
                    return this.effectsService.getBuildingEffectsValue(this.buildingType, !1, this.id)
                }, e.prototype.getPermanentEffects = function () {
                    return this.effectsService.getBuildingEffectsValue(this.buildingType, !0)
                }, e.prototype.getHappinessEffect = function () {
                    return this.happinessService.getHappinessEffect()
                }, e.prototype.getWeatherMultiplier = function () {
                    var e = this,
                        n = (this.settings.WEATHER ? this.settings.WEATHER : []).find(function (n) {
                            return e.weatherService.isWeather(n.weather)
                        });
                    return n ? n.effect : 0
                }, e.prototype.getDisplayableEffectsValue = function () {
                    var e = this.getWeatherMultiplier();
                    if (e <= -100) return -100;
                    var n = (this.getHappinessEffect() + this.getEffects()) * (1 + e / 100);
                    return n <= -100 ? -100 : n
                }, e.prototype.getPower = function () {
                    var e = 0;
                    return 1 === this.level || this.buildingType === bu.CONSTRUCTION ? e = this.settings.BASE_POWER : this.settings.UPGRADES && (e = this.settings.UPGRADES[this.level - 2].BASE_POWER), e * (1 + (this.getPermanentEffects() + this.getEffects() + this.getHappinessEffect()) / 100) * (1 + this.getWeatherMultiplier() / 100)
                }, e.prototype.getLine = function (e) {
                    switch (e) {
                        case Nm.FIRST:
                        case Nm.SECOND:
                        case Nm.THIRD:
                        case Nm.FOURTH:
                            return Dm.emptyValue()
                    }
                }, e.prototype.getName = function () {
                    return Au.titleCase(Au.prepareBuildingName(this.buildingType))
                }, e.prototype.getSize = function () {
                    return this.size
                }, e.prototype.buildOnMountain = function () {
                    return !1
                }, e.prototype.getWorkers = function () {
                    return this.working ? 1 : 0
                }, e.prototype.hireWorker = function () {
                    return !(this.working || !this.resourcesService.hireWorker() || (this.working = !0, 0))
                }, e.prototype.isDemolishable = function () {
                    return this.demolishable
                }, e.prototype.isStoppable = function () {
                    return this.stoppable
                }, e.prototype.isComplexManagement = function () {
                    return !1
                }, e.prototype.getWorkSettings = function () {
                    return null
                }, e.prototype.isWorking = function () {
                    return this.working
                }, e.prototype.prepareDemolish = function () {
                    return this.stopProduction(), !0
                }, e.prototype.startProduction = function () {
                    return !(this.working || !this.resourcesService.hireWorker() || (this.working = !0, 0))
                }, e.prototype.stopProduction = function () {
                    this.working && (this.resourcesService.fireWorker(), this.working = !1)
                }, e.prototype.tick = function (e) {}, e.prototype.isCombinable = function () {
                    return !1
                }, e.prototype.isSplittable = function () {
                    return !1
                }, e.prototype.hasBuff = function () {
                    return this.settings.BUFF
                }, e.prototype.isBuffed = function () {
                    var e = this;
                    return !!this.hasBuff() && this.effectsService.getBuildingEffects(this.buildingType).filter(function (n) {
                        return n.buff === e.id
                    }).length > 0
                }, e.prototype.getBuff = function () {
                    if (this.settings.BUFF) {
                        var e = new Map;
                        return this.settings.BUFF.cost.forEach(function (n) {
                            return e.set(n.resource, n.amount)
                        }), new km(this.settings.BUFF.name, this.settings.BUFF.effect, this.settings.BUFF.duration, e)
                    }
                    return null
                }, e.prototype.hasUpgrade = function () {
                    var e = this;
                    if (this.settings.UPGRADES && this.settings.UPGRADES.length >= this.getBuildingLevel()) {
                        if (this.settings.UPGRADES[this.getBuildingLevel() - 1].PREREQUISITES) {
                            var n = !0;
                            return this.settings.UPGRADES[this.getBuildingLevel() - 1].PREREQUISITES.forEach(function (t) {
                                e.gameService.isEnabled(t) || (n = !1)
                            }), n
                        }
                        return !0
                    }
                    return !1
                }, e.prototype.getUpgradeCost = function () {
                    var e = new Map;
                    return this.hasUpgrade() && this.settings.UPGRADES[this.level - 1].COST.forEach(function (n) {
                        return e.set(n.resource, n.amount)
                    }), e
                }, e.prototype.setBuildingLevel = function (e) {
                    this.level = e
                }, e.prototype.getBuildingLevel = function () {
                    return this.level
                }, e
            }(),
            Lm = function (e) {
                function n(n, t, r, i, l, o, u, s, a, c) {
                    void 0 === n && (n = null);
                    var p = e.call(this, t, r, n, i, !1, !0, !1, c) || this;
                    return p.occupants = l, p.progress = o, p.food = u, p.fuel = s, p.clothes = a, p.maxSize = i.MAX_OCCUPANTS, p.servicesService && (p.villageService = n.getService(Nu.VILLAGE), p.weatherService = n.getService(Nu.WEATHER), p.religionService = n.getService(Nu.RELIGION), p.managementService = n.getService(Nu.MANAGEMENT)), p
                }
                return i(n, e), n.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        buildingType: this.buildingType,
                        occupants: this.occupants,
                        maxSize: this.maxSize,
                        progress: this.progress,
                        food: this.food,
                        fuel: this.fuel,
                        clothes: this.clothes
                    }
                }, n.prototype.getLine = function (e) {
                    switch (e) {
                        case Nm.FIRST:
                            return Dm.textValue("occupants: " + this.occupants + "/" + this.maxSize);
                        case Nm.SECOND:
                            return Dm.progressValue(this.occupants < this.maxSize ? this.progress : -1);
                        case Nm.THIRD:
                            return this.food > 0 ? Dm.emptyValue() : Dm.progressValue(Math.abs(this.food), "famine");
                        case Nm.FOURTH:
                            return this.fuel >= 0 ? this.weatherService.getCurrentTemperature() < 10 && this.occupants > 0 ? Dm.textValue("heating required") : Dm.emptyValue() : Dm.progressValue(Math.abs(this.fuel), "freezing")
                    }
                }, n.prototype.tick = function () {
                    if (this.clothes < 50 && (this.resourcesService.decreaseResource(vu.CLOTHES, 1) ? this.clothes += 50 : this.managementService.getFurClothes() && this.resourcesService.decreaseResource(vu.FUR, 1) && (this.clothes += 2)), this.food <= 50) {
                        var e = this.resourcesService.getRandomFood();
                        if (this.food < 0) {
                            var n = Math.abs(this.food) / 2;
                            e >= n ? (e -= n, this.food = 0) : (this.food -= 2 * e, e = 0)
                        }
                        this.food += e
                    }
                    for (var t = Number(this.managementService.getRations()), r = 0; r < this.occupants; r++) this.food > 0 ? (this.food -= .5 * t, 1 === t ? this.happinessService.decreaseHappiness(.0025, zu.FOOD_HAPPINESS_FLOOR) : this.happinessService.getHappiness() < 75 && (2 === t ? this.happinessService.increaseHappiness(.001, zu.FOOD_HAPPINESS_LIMIT) : 3 === t ? this.happinessService.increaseHappiness(.0025, zu.FOOD_HAPPINESS_LIMIT) : 4 === t && this.happinessService.increaseHappiness(.005, zu.FOOD_HAPPINESS_LIMIT))) : (this.food -= .5, this.happinessService.decreaseHappiness(.005, zu.FOOD_HAPPINESS_FLOOR));
                    this.food < 0 && 0 === this.occupants && (this.food = 0), this.food < -100 && this.occupants > 0 && (this.occupants -= 1, this.food = -1, this.resourcesService.removePeople(1)), this.food < 0 && this.occupants > 0 && this.religionService.getFaithShield() > 0 && (this.food = 100 * this.religionService.decreaseFaithShield(Math.abs(this.food) / 100)), this.fuel <= 50 && (this.fuel += this.resourcesService.getFuel());
                    var i = this.weatherService.getCurrentTemperature(),
                        l = this.managementService.getClothesRations();
                    if (i < 10 && this.occupants > 0) {
                        var o = .2 * (10 - i) / 10;
                        if (this.clothes > 0 && (this.clothes -= .01 * this.occupants * l, o /= l + 1, this.clothes < 0 && (this.clothes = 0)), this.fuel - o < -100 ? this.fuel = -100 : this.fuel -= o, this.fuel < 0 && this.occupants > 0 && this.religionService.getFaithShield() > 0) return void(this.fuel = 200 * this.religionService.decreaseFaithShield(Math.abs(this.food) / 200));
                        this.fuel < 0 ? this.happinessService.decreaseHappiness(.01, zu.HEAT_HAPPINESS_FLOOR) : this.happinessService.increaseHappiness(.005, zu.HEAT_HAPPINESS_LIMIT)
                    } else this.fuel < 0 && (this.fuel = 0), i > 10 && (this.clothes > 0 ? (this.clothes -= .005 * this.occupants, this.clothes < 0 && (this.clothes = 0), this.happinessService.increaseHappiness(.01 * this.occupants, zu.CLOTHES_HAPPINESS_LIMIT)) : this.happinessService.decreaseHappiness(.01 * this.occupants, zu.CLOTHES_HAPPINESS_FLOOR));
                    this.progress < 100 && this.occupants < this.maxSize && this.food > 0 ? (this.progress += this.getPower(), this.progress > 100 && (this.progress = 100)) : this.occupants < this.maxSize && 100 === this.progress ? (this.occupants += 1, this.resourcesService.createPeople(1), this.progress = 0) : this.progress > 0 && this.food <= 0 && (this.progress -= this.getPower())
                }, n.prototype.build = function () {
                    return this.resourcesService.increasePopulationCap(this.maxSize), this
                }, n.prototype.prepareDemolish = function () {
                    if (this.occupants > 0) {
                        var e = this.villageService.moveOccupants(this, this.occupants);
                        this.resourcesService.removePeople(e)
                    }
                    return this.resourcesService.decreasePopulationCap(this.maxSize), !0
                }, n.prototype.getDetails = function () {
                    return "occupants: " + this.occupants + "/" + this.maxSize + "<br>food nutrition: " + Au.round(this.food, 2) + "<br>heating fuel: " + Au.round(this.fuel, 2) + "<br>clothes: " + Au.round(this.clothes, 2) + "<br>" + e.prototype.getDetails.call(this)
                }, n.prototype.hasDetails = function () {
                    return !0
                }, n.prototype.stopProduction = function () {}, n.prototype.startProduction = function () {
                    return !0
                }, n.prototype.getMaxSize = function () {
                    return this.maxSize
                }, n.prototype.getOccupants = function () {
                    return this.occupants
                }, n.prototype.addOccupant = function () {
                    return this.occupants < this.maxSize && (this.occupants += 1, this.occupants === this.maxSize && (this.progress = 0), !0)
                }, n.prototype.removeOccupant = function () {
                    return this.occupants > 0 && (this.occupants -= 1, !0)
                }, n.prototype.fireWorker = function () {
                    return !1
                }, n.prototype.hireWorker = function () {
                    return !1
                }, n.prototype.getWorkers = function () {
                    return 0
                }, n
            }(Mm),
            xm = function (e) {
                function n(n, t, r, i, l, o, u, s) {
                    return void 0 === n && (n = null), void 0 === t && (t = -1), void 0 === r && (r = 0), void 0 === i && (i = 0), void 0 === l && (l = 100), void 0 === o && (o = 100), void 0 === u && (u = 0), void 0 === s && (s = 1), e.call(this, n, t, bu.HUT, ts.VILLAGE.HUT, r, i, l, o, u, s) || this
                }
                return i(n, e), n
            }(Lm),
            Fm = function (e) {
                function n(n, t, r, i, l, o, u, s) {
                    return void 0 === n && (n = null), void 0 === t && (t = -1), void 0 === r && (r = 0), void 0 === i && (i = 0), void 0 === l && (l = 100), void 0 === o && (o = 100), void 0 === u && (u = 0), void 0 === s && (s = 1), e.call(this, n, t, bu.HOUSE, ts.VILLAGE.HOUSE, r, i, l, o, u, s) || this
                }
                return i(n, e), n
            }(Lm);
        ! function (e) {
            e.CHOPPING_TREES = "chopping trees", e.WAITING_FOR_TREES = "waiting for trees", e.WAITING_FOR_WAREHOUSE_SPACE = "waiting for warehouse space", e.TRANSPORTING_LOG = "transporting log"
        }(Cm || (Cm = {}));
        var Um, Hm = function (e) {
                function n(n, t, r, i, l, o, u) {
                    void 0 === n && (n = null), void 0 === t && (t = -1), void 0 === r && (r = 0), void 0 === i && (i = 0), void 0 === l && (l = Cm.WAITING_FOR_TREES), void 0 === o && (o = !1), void 0 === u && (u = 1);
                    var s = e.call(this, t, bu.LOGGERS_HUT, n, ts.FOREST.LOGGERS_HUT, o, !0, !0, u) || this;
                    return s.progress = r, s.localStorage = i, s.status = l, s.servicesService && (s.landService = n.getService(Nu.LAND)), s
                }
                return i(n, e), n.prototype.getLine = function (e) {
                    switch (e) {
                        case Nm.FIRST:
                            return Dm.emptyValue();
                        case Nm.SECOND:
                            return Dm.textValue(this.status);
                        case Nm.THIRD:
                            return Dm.progressValue(this.progress);
                        case Nm.FOURTH:
                            return Dm.emptyValue()
                    }
                }, n.prototype.tick = function () {
                    if (this.working)
                        if (this.status === Cm.WAITING_FOR_TREES) this.landService.reduceForest(1) && (this.status = Cm.CHOPPING_TREES);
                        else if (this.status === Cm.CHOPPING_TREES) this.progress < 100 && (this.progress += this.getPower(), this.progress >= 100 && (this.progress = 0, this.status = Cm.TRANSPORTING_LOG));
                    else if (this.status === Cm.TRANSPORTING_LOG || this.status === Cm.WAITING_FOR_WAREHOUSE_SPACE) {
                        var e = this.resourcesService.increaseResource(vu.LOG, 1);
                        this.status = e ? Cm.WAITING_FOR_TREES : Cm.WAITING_FOR_WAREHOUSE_SPACE
                    }
                }, n.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        buildingType: this.buildingType,
                        progress: this.progress,
                        localStorage: this.localStorage,
                        status: this.status,
                        working: this.working
                    }
                }, n
            }(Mm),
            Gm = function (e) {
                function n(n, t, r, i, l, o, u, s, a) {
                    void 0 === n && (n = null), void 0 === l && (l = 1), void 0 === o && (o = 1), void 0 === u && (u = 1), void 0 === s && (s = 0), void 0 === a && (a = !1);
                    var c = e.call(this, t, bu.CONSTRUCTION, n, ts.CONSTRUCTION_SITE, a, 1 === u, !0, u) || this;
                    return c.region = r, c.constructing = i, c.buildingComplexity = l, c.buildingSize = o, c.upgradeLevel = u, c.progress = s, c.servicesService && (c.resourcesService = c.servicesService.getService(Nu.RESOURCES), c.buildingFactoryService = c.servicesService.getService(Nu.BUILDING_FACTORY), c.regionService = c.servicesService.getServiceByRegion(r)), c
                }
                return i(n, e), n.prototype.isUpgrade = function () {
                    return 1 !== this.upgradeLevel
                }, n.prototype.getLine = function (e) {
                    switch (e) {
                        case Nm.FIRST:
                            return Dm.emptyValue();
                        case Nm.SECOND:
                            return this.isUpgrade() ? Dm.textValue("upgrading " + Au.prepareBuildingName(this.constructing)) : Dm.textValue("constructing " + Au.prepareBuildingName(this.constructing));
                        case Nm.THIRD:
                            return Dm.progressValue(this.progress);
                        case Nm.FOURTH:
                            return Dm.emptyValue()
                    }
                }, n.prototype.tick = function () {
                    0 === this.buildingComplexity && (this.isUpgrade ? this.regionService.finishUpgrade(this, this.constructing) : this.regionService.finishConstruction(this, this.constructing)), this.working && (this.progress < 100 ? (this.progress += this.getPower() / this.buildingComplexity, this.progress > 100 && (this.progress = 100)) : this.isUpgrade ? this.regionService.finishUpgrade(this, this.constructing) : this.regionService.finishConstruction(this, this.constructing))
                }, n.prototype.build = function () {
                    return this.startProduction() || 0 === this.buildingComplexity || this.servicesService.getService(Nu.MODAL).info("Couldn't unlock construction. Not enough free workers."), this
                }, n.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        upgradeLevel: this.upgradeLevel,
                        buildingType: this.buildingType,
                        region: this.region,
                        constructing: this.constructing,
                        buildingComplexity: this.buildingComplexity,
                        progress: this.progress,
                        working: this.working,
                        buildingSize: this.buildingSize
                    }
                }, n.prototype.getComplexity = function () {
                    return 0
                }, n.prototype.getSize = function () {
                    return this.buildingSize
                }, n.prototype.finishDemolish = function () {
                    var e = this;
                    Array.from(this.buildingFactoryService.createBuildingShell(this.constructing).getCost().entries()).forEach(function (n) {
                        return e.resourcesService.increaseResource(n[0], Math.floor(n[1] * (1 - e.progress / 100) + n[1] * (e.progress / 100 * .3)))
                    })
                }, n.prototype.getConstructing = function () {
                    return this.constructing
                }, n
            }(Mm);
        ! function (e) {
            e.PLANTING_TREES = "planting trees", e.WAITING_FOR_LAND = "waiting for land"
        }(Um || (Um = {}));
        var Bm, Vm = function (e) {
                function n(n, t, r, i, l, o, u, s) {
                    void 0 === n && (n = null), void 0 === t && (t = -1), void 0 === r && (r = 0), void 0 === i && (i = 0), void 0 === l && (l = Um.WAITING_FOR_LAND), void 0 === o && (o = 1), void 0 === u && (u = !1), void 0 === s && (s = 1);
                    var a = e.call(this, t, bu.FORESTER, n, ts.FOREST.FORESTER, u, !0, !0, s) || this;
                    return a.progress = r, a.localStorage = i, a.status = l, a.effectiveness = o, a.servicesService && (a.landService = n.getService(Nu.LAND), a.modalService = n.getService(Nu.MODAL)), a
                }
                return i(n, e), n.prototype.callback = function (e) {
                    var n = this;
                    this.modalService.open(mu.INPUT), this.modalService.setModalText("Set reserved land size (Foresters will prevent forest from growing on that land)<br>Value 0 removes forester protection and only initial 100 land will be protected."), this.modalService.setModalValue(this.landService.getForestLandLimit());
                    var t = this.modalService.registerForValueResponse().subscribe(function (e) {
                        null === e || isNaN(e) || n.landService.setForestLandLimit(e), t.unsubscribe()
                    })
                }, n.prototype.getLine = function (e) {
                    switch (e) {
                        case Nm.FIRST:
                            return Dm.emptyValue();
                        case Nm.SECOND:
                            return Dm.textValue(this.status);
                        case Nm.THIRD:
                            return Dm.progressValue(this.progress);
                        case Nm.FOURTH:
                            return Dm.buttonValue("manage", this.callback)
                    }
                }, n.prototype.tick = function () {
                    this.working && (0 === this.localStorage && (this.landService.reduceLand(this.effectiveness) ? (this.localStorage = this.effectiveness, this.status = Um.PLANTING_TREES) : this.status = Um.WAITING_FOR_LAND), this.localStorage > 0 && (this.progress < 100 ? (this.progress += this.getPower(), this.progress > 100 && (this.progress = 100)) : (this.landService.increaseForest(this.localStorage, !1), this.progress = 0, this.localStorage = 0)))
                }, n.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        buildingType: this.buildingType,
                        progress: this.progress,
                        localStorage: this.localStorage,
                        status: this.status,
                        effectiveness: this.effectiveness,
                        working: this.working
                    }
                }, n
            }(Mm),
            Wm = function () {
                return function (e, n, t, r) {
                    this.enabled = e, this.buildingType = n, this.inputSettings = t, this.outputSettings = r
                }
            }();
        ! function (e) {
            e.FETCHING_INPUT = "fetching {in}", e.WAITING_FOR_INPUT = "waiting for {wait}", e.WAITING_FOR_WAREHOUSE_SPACE = "waiting for warehouse space", e.PREPARING = "preparing {out}", e.PRODUCING_OUTPUT = "{prod} {out}", e.TRANSPORTING_OUTPUT = "transporting {out}"
        }(Bm || (Bm = {}));
        var jm, Ym = function (e) {
                function n(n, t, r, i, l, o, u, s, a, c, p) {
                    void 0 === n && (n = null), void 0 === o && (o = 0), void 0 === u && (u = []), void 0 === s && (s = []), void 0 === a && (a = !1), void 0 === c && (c = null);
                    var h = e.call(this, t, r, n, i, a, !0, !0, p) || this;
                    if (h.status = l, h.progress = o, h.inputStorage = u, h.outputStorage = s, h.workSettings = c, h.productionText = i.TEXT, n && (h.managementService = n.getService(Nu.MANAGEMENT), null === h.workSettings)) {
                        var d = i.INPUT_RESOURCES.map(function (e) {
                                return [e.resource, 0]
                            }),
                            f = i.OUTPUT_RESOURCES.map(function (e) {
                                return [e.resource, n.getService(Nu.RESOURCES).getResource(e.resource).getLimit()]
                            });
                        h.workSettings = new Wm(!0, r, d, f)
                    }
                    return h
                }
                return i(n, e), n.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        workSettings: this.workSettings,
                        buildingType: this.buildingType,
                        progress: this.progress,
                        status: this.status,
                        inputStorage: this.inputStorage,
                        outputStorage: this.outputStorage,
                        working: this.working
                    }
                }, n.prototype.getLine = function (e) {
                    switch (e) {
                        case Nm.FIRST:
                            return Dm.emptyValue();
                        case Nm.SECOND:
                            var n = Au.resourcesArraysDiff(this.settings.INPUT_RESOURCES, this.inputStorage),
                                t = String(this.status);
                            return n.length > 0 && (t = t.replace("{wait}", Au.prepareResourcesNamesList(n))), t = (t = (t = t.replace("{in}", Au.prepareResourcesNamesList(this.settings.INPUT_RESOURCES))).replace("{out}", Au.prepareResourcesNamesList(this.settings.OUTPUT_RESOURCES))).replace("{prod}", this.productionText + " "), Dm.textValue(t);
                        case Nm.THIRD:
                            return Dm.progressValue(this.progress);
                        case Nm.FOURTH:
                            return Dm.emptyValue()
                    }
                }, n.prototype.isMet = function () {
                    var e = this,
                        n = !0;
                    return this.workSettings.inputSettings.forEach(function (t) {
                        n && (n = e.resourcesService.getResource(t[0]).amount > t[1])
                    }), this.workSettings.outputSettings.forEach(function (t) {
                        n && (n = e.resourcesService.getResource(t[0]).amount < t[1])
                    }), n
                }, n.prototype.tick = function () {
                    this.managementService.getComplexWorkers() && this.workSettings && this.workSettings.enabled && (this.isMet() ? this.isWorking() || this.hireWorker() : this.isWorking() && this.fireWorker()), this.isWorking() && (this.outputStorage.length > 0 ? this.collectOutputResources() : this.inputStorage.length < this.settings.INPUT_RESOURCES.length && 0 === this.outputStorage.length ? this.collectInputResources() : this.progress < 100 ? (this.status = Bm.PRODUCING_OUTPUT, this.progress += this.getPower(), this.progress > 100 && (this.progress = 100)) : 100 === this.progress && (this.progress = 0, this.inputStorage = [], this.outputStorage = Au.copyResourceArray(this.settings.OUTPUT_RESOURCES), this.status = Bm.TRANSPORTING_OUTPUT))
                }, n.prototype.collectInputResources = function () {
                    var e = this,
                        n = !0;
                    return this.settings.INPUT_RESOURCES.forEach(function (t) {
                        e.inputStorage.find(function (e) {
                            return e.resource === t.resource
                        }) || (e.resourcesService.decreaseResource(t.resource, t.amount) ? e.inputStorage.push({
                            resource: t.resource,
                            amount: t.amount
                        }) : n = !1)
                    }), n ? (this.status = Bm.FETCHING_INPUT, !0) : (this.status = Bm.WAITING_FOR_INPUT, !1)
                }, n.prototype.collectOutputResources = function () {
                    var e = this,
                        n = !0;
                    return this.outputStorage.forEach(function (t) {
                        e.resourcesService.increaseResource(t.resource, t.amount) ? t.amount = 0 : n = !1
                    }), this.outputStorage = this.outputStorage.filter(function (e) {
                        return e.amount > 0
                    }), n ? 0 === this.outputStorage.length ? (this.status = Bm.FETCHING_INPUT, !0) : void 0 : (this.status = Bm.WAITING_FOR_WAREHOUSE_SPACE, !1)
                }, n.prototype.isComplexManagement = function () {
                    return !0
                }, n.prototype.getWorkSettings = function () {
                    return this.workSettings
                }, n
            }(Mm),
            zm = function (e) {
                function n(n, t, r, i, l, o, u, s, a) {
                    return void 0 === n && (n = null), void 0 === t && (t = -1), void 0 === r && (r = 0), void 0 === i && (i = Bm.FETCHING_INPUT), void 0 === l && (l = []), void 0 === o && (o = []), void 0 === u && (u = !1), void 0 === s && (s = null), void 0 === a && (a = 1), e.call(this, n, t, bu.SAWMILL, ts.FOREST.SAWMILL, i, r, l, o, u, s, a) || this
                }
                return i(n, e), n
            }(Ym),
            Km = function (e) {
                function n(n, t, r, i, l, o, u, s) {
                    void 0 === n && (n = null), void 0 === l && (l = 1), void 0 === o && (o = 1), void 0 === u && (u = 0), void 0 === s && (s = !1);
                    var a = e.call(this, t, bu.DECONSTRUCTION, n, ts.DECONSTRUCTION_SITE, s, !1, !0, 1) || this;
                    return a.region = r, a.deconstructing = i, a.buildingComplexity = l, a.buildingSize = o, a.progress = u, a.servicesService && (a.regionService = n.getServiceByRegion(r)), a
                }
                return i(n, e), n.prototype.getLine = function (e) {
                    switch (e) {
                        case Nm.FIRST:
                            return Dm.emptyValue();
                        case Nm.SECOND:
                            return Dm.textValue("deconstructing " + Au.prepareBuildingName(this.deconstructing));
                        case Nm.THIRD:
                            return Dm.progressValue(this.progress);
                        case Nm.FOURTH:
                            return Dm.emptyValue()
                    }
                }, n.prototype.tick = function () {
                    this.working && (this.progress < 100 ? (this.progress += this.getPower() / this.buildingComplexity, this.progress > 100 && (this.progress = 100)) : this.regionService.finishDeconstruction(this))
                }, n.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        buildingType: this.buildingType,
                        region: this.region,
                        deconstructing: this.deconstructing,
                        buildingComplexity: this.buildingComplexity,
                        progress: this.progress,
                        working: this.working,
                        buildingSize: this.buildingSize
                    }
                }, n.prototype.getComplexity = function () {
                    return 0
                }, n.prototype.getSize = function () {
                    return this.buildingSize
                }, n.prototype.prepareDemolish = function () {
                    return !1
                }, n.prototype.finishDemolish = function () {}, n.prototype.getBuildingBeingDemolished = function () {
                    return this.deconstructing
                }, n.prototype.getDecontructing = function () {
                    return this.deconstructing
                }, n
            }(Mm);
        ! function (e) {
            e.GATHERING_FOOD = "gathering food", e.GATHERING_RESOURCES = "gathering resources", e.WAITING_FOR_WAREHOUSE_SPACE = "waiting for warehouse space", e.TRANSPORTING = "transporting"
        }(jm || (jm = {}));
        var qm, $m = function (e) {
                return e[e.FOOD = 0] = "FOOD", e[e.RESOURCES = 1] = "RESOURCES", e
            }({}),
            Qm = function (e) {
                function n(n, t, r, i, l, o, u, s) {
                    void 0 === n && (n = null), void 0 === t && (t = -1), void 0 === r && (r = 0), void 0 === i && (i = jm.GATHERING_FOOD), void 0 === l && (l = !1), void 0 === o && (o = $m.FOOD), void 0 === u && (u = [null, 0]), void 0 === s && (s = 1);
                    var a = e.call(this, t, bu.GATHERER, n, ts.FOREST.GATHERER, l, !0, !0, s) || this;
                    return a.progress = r, a.status = i, a.mode = o, a.storage = u, a.lastFind = null, a.servicesService && (a.weatherService = n.getService(Nu.WEATHER)), a
                }
                return i(n, e), n.prototype.rollForFind = function () {
                    var e = null;
                    return this.mode === $m.FOOD ? e = ku.randomElement([{
                        item: vu.BERRY,
                        chance: this.settings.BERRY_CHANCE
                    }, {
                        item: vu.MUSHROOM,
                        chance: this.settings.MUSHROOM_CHANCE
                    }, {
                        item: vu.WHEAT,
                        chance: this.settings.WHEAT_CHANCE
                    }]) : this.mode === $m.RESOURCES && (e = ku.randomElement([{
                        item: vu.BRUSHWOOD,
                        chance: this.settings.BRUSHWOOD_CHANCE
                    }, {
                        item: vu.STONE,
                        chance: this.settings.STONE_CHANCE
                    }, {
                        item: vu.LOG,
                        chance: this.settings.LOG_CHANCE
                    }, {
                        item: vu.COPPER,
                        chance: this.settings.COPPER_CHANCE
                    }])), e
                }, n.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        buildingType: this.buildingType,
                        progress: this.progress,
                        status: this.status,
                        working: this.working,
                        storage: this.storage,
                        mode: this.mode
                    }
                }, n.prototype.callback = function (e) {
                    e === $m.FOOD ? (this.mode = $m.FOOD, this.progress = 0, this.status = jm.GATHERING_FOOD) : e === $m.RESOURCES && (this.mode = $m.RESOURCES, this.progress = 0, this.status = jm.GATHERING_RESOURCES)
                }, n.prototype.getLine = function (e) {
                    switch (e) {
                        case Nm.FIRST:
                            return this.mode === $m.FOOD ? Dm.buttonValue("gather resources", $m.RESOURCES) : Dm.buttonValue("gather food", $m.FOOD);
                        case Nm.SECOND:
                            return Dm.textValue(this.status);
                        case Nm.THIRD:
                            return Dm.progressValue(this.progress);
                        case Nm.FOURTH:
                            return null != this.lastFind ? Dm.textValue("last find: " + Au.prepareResourceName(this.lastFind)) : Dm.emptyValue()
                    }
                }, n.prototype.tick = function (e) {
                    if (this.working)
                        if (this.storage[1] > 0) this.resourcesService.increaseResource(this.storage[0], this.storage[1]) ? (this.storage = [null, 0], this.setStatus()) : this.status = jm.WAITING_FOR_WAREHOUSE_SPACE;
                        else if (this.progress < 100) this.setStatus(), this.progress += this.getPower(), this.progress > 100 && (this.progress = 100);
                    else if (100 === this.progress) {
                        this.progress = 0;
                        var n = this.rollForFind();
                        if (null !== n && !this.resourcesService.hasLimit(n)) return n = null, void(this.progress = 50);
                        n ? (this.lastFind = n, this.storage = [n, 1], this.status = jm.TRANSPORTING) : (this.lastFind = vu.NOTHING, this.progress = 0)
                    }
                }, n.prototype.setStatus = function () {
                    this.status = this.mode === $m.FOOD ? jm.GATHERING_FOOD : jm.GATHERING_RESOURCES
                }, n
            }(Mm);
        ! function (e) {
            e.MINING_STONE = "mining stone", e.WAITING_FOR_WAREHOUSE_SPACE = "waiting for warehouse space", e.NO_MORE_RESOURCES = "no more resources", e.TRANSPORTING = "transporting"
        }(qm || (qm = {}));
        var Zm, Xm = function (e) {
            function n(n, t, r, i, l, o, u, s) {
                void 0 === n && (n = null), void 0 === t && (t = -1), void 0 === r && (r = 0), void 0 === i && (i = qm.MINING_STONE), void 0 === l && (l = !1), void 0 === o && (o = 0), void 0 === u && (u = 200), void 0 === s && (s = 1);
                var a = e.call(this, t, bu.QUARRY, n, ts.MOUNTAINS.QUARRY, l, !0, !0, s) || this;
                return a.progress = r, a.status = i, a.storage = o, a.resources = u, a.servicesService && (a.gameService = n.getService(Nu.GAME)), a
            }
            return i(n, e), n.prototype.toJSON = function () {
                return {
                    id: this.id,
                    level: this.level,
                    buildingType: this.buildingType,
                    progress: this.progress,
                    status: this.status,
                    working: this.working,
                    storage: this.storage,
                    resources: this.resources
                }
            }, n.prototype.build = function () {
                return this.startProduction(), this.gameService.enable(Eu.R_QUARRY), this
            }, n.prototype.buildOnMountain = function () {
                return !0
            }, n.prototype.getLine = function (e) {
                switch (e) {
                    case Nm.FIRST:
                        return Dm.textValue("stone: " + this.resources);
                    case Nm.SECOND:
                        return Dm.textValue(this.status);
                    case Nm.THIRD:
                        return Dm.progressValue(this.progress);
                    case Nm.FOURTH:
                        return Dm.emptyValue()
                }
            }, n.prototype.isStoppable = function () {
                return this.resources > 0
            }, n.prototype.tick = function (e) {
                this.resources <= 0 && (this.status = qm.NO_MORE_RESOURCES, this.stopProduction()), this.working && (this.storage > 0 ? this.resourcesService.increaseResource(vu.STONE, this.storage) ? (this.storage = 0, this.status = qm.MINING_STONE) : this.status = qm.WAITING_FOR_WAREHOUSE_SPACE : this.progress < 100 ? (this.status = qm.MINING_STONE, this.progress += this.getPower(), this.progress > 100 && (this.progress = 100)) : 100 === this.progress && (this.progress = 0, this.resources -= 1, this.storage = 1, this.status = qm.TRANSPORTING))
            }, n
        }(Mm);
        ! function (e) {
            e.RESEARCHING = "researching {research}", e.CRAFTING = "crafting {craft}", e.WAITING_FOR_WAREHOUSE = "waiting for warehouse space", e.NO_RESEARCH = "nothing to research", e.NO_CRAFTING = "nothing to craft"
        }(Zm || (Zm = {}));
        var Jm, ey = function (e) {
                return e[e.RESEARCH = 0] = "RESEARCH", e[e.CRAFT = 1] = "CRAFT", e[e.SWITCH_TO_RESEARCH = 2] = "SWITCH_TO_RESEARCH", e
            }({}),
            ny = function (e) {
                function n(n, t, r, i, l, o, u, s) {
                    void 0 === n && (n = null), void 0 === t && (t = -1), void 0 === r && (r = 0), void 0 === i && (i = Zm.NO_RESEARCH), void 0 === l && (l = ey.RESEARCH), void 0 === o && (o = !1), void 0 === u && (u = null), void 0 === s && (s = 1);
                    var a = e.call(this, t, bu.WORKSHOP, n, ts.VILLAGE.WORKSHOP, o, !0, !0, s) || this;
                    return a.progress = r, a.status = i, a.mode = l, a.recipe = u, a.servicesService && (a.craftingService = n.getService(Nu.CRAFTING), a.techService = n.getService(Nu.RESEARCH), a.gameService = n.getService(Nu.GAME)), a
                }
                return i(n, e), n.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        buildingType: this.buildingType,
                        progress: this.progress,
                        status: this.status,
                        mode: this.mode,
                        working: this.working,
                        recipe: this.recipe
                    }
                }, n.prototype.build = function () {
                    this.startProduction();
                    var e = this.servicesService.getService(Nu.LOG);
                    return this.gameService.isEnabled(Eu.RESEARCH) || (this.gameService.enable(Eu.RESEARCH), e.log("Researching unlocked")), this.gameService.isEnabled(Eu.CRAFTING) || (this.gameService.enable(Eu.CRAFTING), e.log("Crafting unlocked")), this.craftingService.increaseQueueSize(1), this
                }, n.prototype.prepareDemolish = function () {
                    return this.craftingService.decreaseQueueSize(1), e.prototype.prepareDemolish.call(this)
                }, n.prototype.callback = function (e) {
                    var n = this;
                    if ("switch" === e) {
                        if (this.mode === ey.RESEARCH) this.progress = 0, this.mode = ey.CRAFT, this.recipe = this.craftingService.getOrder(), this.status = null !== this.recipe ? Zm.CRAFTING : Zm.NO_CRAFTING;
                        else if (this.mode === ey.SWITCH_TO_RESEARCH) this.mode = ey.CRAFT, this.status = null !== this.recipe ? Zm.CRAFTING : Zm.NO_CRAFTING;
                        else if (this.mode === ey.CRAFT)
                            if (this.recipe) {
                                this.modalService.open(mu.CONFIRM), this.modalService.setModalText("Workshop will switch to research after finishing current craft.");
                                var t = this.modalService.registerForConfirmation().subscribe(function (e) {
                                    t.unsubscribe(), e && (n.mode = ey.SWITCH_TO_RESEARCH)
                                })
                            } else this.progress = 0, this.mode = ey.RESEARCH, this.status = this.techService.isResearchStarted() ? Zm.RESEARCHING : Zm.NO_RESEARCH
                    } else "cancel" === e && (this.recipe = null, this.progress = 0, this.mode === ey.SWITCH_TO_RESEARCH && (this.mode = ey.RESEARCH, this.status = this.techService.isResearchStarted() ? Zm.RESEARCHING : Zm.NO_RESEARCH))
                }, n.prototype.getLine = function (e) {
                    switch (e) {
                        case Nm.FIRST:
                            return this.firstLine();
                        case Nm.SECOND:
                            if (this.recipe) return Dm.textValue(this.status.replace("{craft}", Au.prepareResourceName(this.recipe.resource)));
                            var n = "";
                            return this.techService.getCurrentResearch() && (n = Au.prepareTechName(this.techService.getCurrentResearch().getTech())), Dm.textValue(this.status.replace("{research}", n));
                        case Nm.THIRD:
                            return Dm.progressValue(this.progress);
                        case Nm.FOURTH:
                            return this.recipe ? Dm.buttonValue("cancel crafting", "cancel") : Dm.emptyValue()
                    }
                }, n.prototype.firstLine = function () {
                    return Dm.buttonValue(this.mode === ey.RESEARCH || this.mode === ey.SWITCH_TO_RESEARCH ? "craft" : "research", "switch")
                }, n.prototype.tick = function (e) {
                    this.working && (this.mode === ey.RESEARCH ? this.techService.isResearchStarted() ? (this.status !== Zm.RESEARCHING && (this.progress = 0), this.status = Zm.RESEARCHING, this.progress += this.getPower(), this.progress >= 100 && (this.progress = 0, this.techService.progressTech(ts.VILLAGE.WORKSHOP.RESEARCH_POWER))) : (this.status = Zm.NO_RESEARCH, this.progress = 0) : this.mode !== ey.CRAFT && this.mode !== ey.SWITCH_TO_RESEARCH || (null === this.recipe && (this.recipe = this.craftingService.getOrder(), this.progress = 0), null === this.recipe ? this.status = Zm.NO_CRAFTING : (this.status = Zm.CRAFTING, this.progress < 100 && (this.progress += this.getPower() / this.recipe.craftingDifficulty * ts.VILLAGE.WORKSHOP.CRAFTING_POWER), this.progress >= 100 && (this.resourcesService.hasLimit(this.recipe.resource) ? (this.progress = 0, this.resourcesService.increaseResource(this.recipe.resource, this.recipe.amount), this.recipe = null, this.mode === ey.SWITCH_TO_RESEARCH && (this.mode = ey.RESEARCH, this.status = this.techService.isResearchStarted() ? Zm.RESEARCHING : Zm.NO_RESEARCH)) : this.status = Zm.WAITING_FOR_WAREHOUSE))))
                }, n.prototype.getRecipe = function () {
                    return this.recipe
                }, n.prototype.cancelCrafting = function () {
                    this.recipe = null
                }, n.prototype.willResearch = function () {
                    return this.mode === ey.RESEARCH || this.mode === ey.SWITCH_TO_RESEARCH
                }, n
            }(Mm),
            ty = function (e) {
                function n(n, t, r, i) {
                    void 0 === n && (n = null), void 0 === t && (t = -1), void 0 === r && (r = Cu.NONE), void 0 === i && (i = 1);
                    var l = e.call(this, t, bu.WAREHOUSE, n, ts.VILLAGE.WAREHOUSE, !1, !0, !1, i) || this;
                    return l.resource = r, l.storage = 50, l.servicesService && (l.modalService = n.getService(Nu.MODAL)), l
                }
                return i(n, e), n.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        buildingType: this.buildingType,
                        resource: this.resource
                    }
                }, n.prototype.callback = function (e) {
                    var n = this;
                    if (this.resource === Cu.NONE) this.resource = Cu[String(e.target.value)], this.resourcesService.increaseLimit(this.resource, this.storage);
                    else {
                        this.modalService.open(mu.CONFIRM), this.modalService.setModalText("Are you sure you want to switch warehouse storage type?<br>All excess resources will be lost");
                        var t = this.modalService.registerForConfirmation().subscribe(function (r) {
                            r ? (n.resourcesService.decreaseLimit(n.resource, n.storage), n.resource = Cu[String(e.target.value)], n.resourcesService.increaseLimit(n.resource, n.storage)) : e.target.selectedIndex = n.resource - 1, t.unsubscribe()
                        })
                    }
                }, n.prototype.getLine = function (e) {
                    switch (e) {
                        case Nm.FIRST:
                            return this.firstLine();
                        case Nm.SECOND:
                            return Dm.textValue("storage: " + this.storage);
                        case Nm.THIRD:
                        case Nm.FOURTH:
                            return Dm.emptyValue()
                    }
                }, n.prototype.firstLine = function () {
                    var e = [];
                    return e.push(Cu[Cu.NONE]), e.push(Cu[Cu.RAW]), e.push(Cu[Cu.PROCESSED]), e.push(Cu[Cu.FOOD]), e.push(Cu[Cu.TOOLS]), Dm.dropdownValue(e, Cu[this.resource])
                }, n.prototype.prepareDemolish = function () {
                    return this.resourcesService.decreaseLimit(this.resource, this.storage), !0
                }, n.prototype.startProduction = function () {
                    return !1
                }, n.prototype.stopProduction = function () {}, n.prototype.fireWorker = function () {
                    return !1
                }, n.prototype.hireWorker = function () {
                    return !1
                }, n.prototype.getWorkers = function () {
                    return 0
                }, n.prototype.getHappinessEffect = function () {
                    return 0
                }, n
            }(Mm);
        ! function (e) {
            e.HUNTING = "hunting", e.TAME = "taming animals", e.WAITING_FOR_PASTURE_SPACE = "waiting for warehouse space", e.WAITING_FOR_WAREHOUSE_SPACE = "waiting for warehouse space", e.TRANSPORTING = "transporting"
        }(Jm || (Jm = {}));
        var ry, iy = function (e) {
                return e[e.HUNTING = 0] = "HUNTING", e[e.TAMING = 1] = "TAMING", e
            }({}),
            ly = function (e) {
                function n(n, t, r, i, l, o, u, s, a, c) {
                    void 0 === n && (n = null), void 0 === t && (t = -1), void 0 === r && (r = 0), void 0 === i && (i = Jm.HUNTING), void 0 === l && (l = iy.HUNTING), void 0 === o && (o = !1), void 0 === u && (u = 0), void 0 === s && (s = 0), void 0 === a && (a = null), void 0 === c && (c = 1);
                    var p = e.call(this, t, bu.HUNTER_LODGE, n, ts.FOREST.HUNTER_LODGE, o, !0, !0, c) || this;
                    return p.progress = r, p.status = i, p.mode = l, p.storage = u, p.storage2 = s, p.animal = a, p.lastFind = null, p.servicesService && (p.weatherService = n.getService(Nu.WEATHER), p.gameService = n.getService(Nu.GAME)), p
                }
                return i(n, e), n.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        buildingType: this.buildingType,
                        progress: this.progress,
                        status: this.status,
                        mode: this.mode,
                        working: this.working,
                        storage: this.storage,
                        storage2: this.storage2,
                        animal: this.animal
                    }
                }, n.prototype.callback = function (e) {
                    "tame" === e ? (this.mode = iy.TAMING, this.progress = 0, this.storage = 0, this.storage2 = 0, this.status = Jm.TAME) : (this.mode = iy.HUNTING, this.progress = 0, this.storage = 0, this.storage2 = 0, this.lastFind = null, this.status = Jm.HUNTING)
                }, n.prototype.getLine = function (e) {
                    switch (e) {
                        case Nm.FIRST:
                            return this.gameService.isEnabled(Eu.PASTURE) ? this.mode === iy.HUNTING ? Dm.buttonValue("tame animals", "tame") : Dm.buttonValue("hunt", "hunt") : Dm.emptyValue();
                        case Nm.SECOND:
                            return Dm.textValue(this.status);
                        case Nm.THIRD:
                            return Dm.progressValue(this.progress);
                        case Nm.FOURTH:
                            return null !== this.lastFind ? Dm.textValue("last tamed: " + Au.prepareResourceName(this.lastFind)) : Dm.emptyValue()
                    }
                }, n.prototype.tick = function (e) {
                    if (this.working)
                        if (this.mode === iy.HUNTING) this.status = 0 !== this.storage && 0 !== this.storage2 ? Jm.TRANSPORTING : Jm.HUNTING, this.status === Jm.HUNTING ? this.progress < 100 && (this.progress += this.getPower(), this.progress >= 100 && (this.progress = 0, this.storage < 5 && (this.storage += ku.randomBetween(1, 3), this.storage > 5 && (this.storage = 5)), this.storage2 < 5 && (this.storage2 += ku.randomBetween(0, 1), this.storage2 > 5 && (this.storage2 = 5)), this.status = Jm.TRANSPORTING)) : this.status !== Jm.TRANSPORTING && this.status !== Jm.WAITING_FOR_WAREHOUSE_SPACE || (0 !== this.storage && this.resourcesService.increaseResource(vu.MEAT, this.storage) && (this.storage = 0), 0 !== this.storage2 && this.resourcesService.increaseResource(vu.FUR, this.storage2) && (this.storage2 = 0), 0 !== this.storage && 0 !== this.storage2 && (this.status = Jm.WAITING_FOR_WAREHOUSE_SPACE));
                        else if (this.mode === iy.TAMING)
                        if (this.status === Jm.TAME) {
                            if (this.progress < 100 && (this.progress += this.getPower(), this.progress >= 100)) {
                                this.progress = 0;
                                var n = [];
                                this.resourcesService.hasLimit(vu.CHICKEN) && n.push({
                                    item: vu.CHICKEN,
                                    chance: 6
                                }), this.resourcesService.hasLimit(vu.PIG) && n.push({
                                    item: vu.PIG,
                                    chance: 5
                                }), this.resourcesService.hasLimit(vu.COW) && n.push({
                                    item: vu.COW,
                                    chance: 4
                                }), this.resourcesService.hasLimit(vu.HORSE) && n.push({
                                    item: vu.HORSE,
                                    chance: 3
                                }), 0 === n.length && (this.logService.log("No more space for animals. Hunter switched to hunting"), this.callback("hunt"));
                                var t = ku.randomElement(n);
                                null != t ? (this.lastFind = t, this.animal = t, this.status = Jm.TRANSPORTING) : (this.lastFind = vu.NOTHING, this.animal = null)
                            }
                        } else this.status !== Jm.TRANSPORTING && this.status !== Jm.WAITING_FOR_PASTURE_SPACE || this.animal && (this.resourcesService.increaseResource(this.animal, 1) ? (this.animal = null, this.status = Jm.TAME) : this.status = Jm.WAITING_FOR_PASTURE_SPACE)
                }, n
            }(Mm),
            oy = function (e) {
                function n(n, t, r, i) {
                    void 0 === n && (n = null), void 0 === t && (t = -1), void 0 === r && (r = 0), void 0 === i && (i = 1);
                    var l = e.call(this, t, bu.SHRINE, n, ts.VILLAGE.SHRINE, !0, !0, !1, i) || this;
                    return l.progress = r, l.servicesService && (l.religionService = n.getService(Nu.RELIGION)), l
                }
                return i(n, e), n.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        buildingType: this.buildingType,
                        progress: this.progress
                    }
                }, n.prototype.build = function () {
                    return this.religionService.increaseFaithCap(10), this.servicesService.getService(Nu.GAME).enable(Eu.RELIGION), this
                }, n.prototype.getLine = function (e) {
                    switch (e) {
                        case Nm.FIRST:
                        case Nm.SECOND:
                            return Dm.emptyValue();
                        case Nm.THIRD:
                            return Dm.progressValue(this.progress, "prayers");
                        case Nm.FOURTH:
                            return Dm.emptyValue()
                    }
                }, n.prototype.prepareDemolish = function () {
                    return this.religionService.decreaseFaithCap(10), !0
                }, n.prototype.startProduction = function () {
                    return !0
                }, n.prototype.stopProduction = function () {}, n.prototype.tick = function (e) {
                    var n = this.servicesService.getService(Nu.VILLAGE).getPopulation();
                    this.progress += .01 * n * this.getPower(), this.progress > 100 && (this.progress = 0, this.religionService.increaseFaith(1))
                }, n.prototype.fireWorker = function () {
                    return !1
                }, n.prototype.hireWorker = function () {
                    return !1
                }, n.prototype.getWorkers = function () {
                    return 0
                }, n
            }(Mm),
            uy = function () {
                function e(e, n, t, r) {
                    void 0 === e && (e = null), void 0 === n && (n = -1), void 0 === t && (t = 0), void 0 === r && (r = 0), this.servicesService = e, this.fish = t, this.food = r, this.buildingType = bu.SCHOOL_OF_FISH, this.icons = [{
                        name: "fish_food",
                        path: "resources",
                        prefix: "",
                        suffix: "1"
                    }], this.id = n, this.servicesService && (this.resourcesService = e.getService(Nu.RESOURCES), this.effectsService = e.getService(Nu.EFFECTS), this.gameService = e.getService(Nu.GAME))
                }
                return e.prototype.callback = function (e) {
                    "food" === e && this.resourcesService.decreaseResource(vu.FISH_FOOD, 1, !0) ? this.food += 10 * ts.SEA.SCHOOL_OF_FISH.FISH_FOOD_DAYS : this.servicesService.getService(Nu.MODAL).info("No fish food available")
                }, e.prototype.getBuildingType = function () {
                    return this.buildingType
                }, e.prototype.getComplexity = function () {
                    return 0
                }, e.prototype.getCost = function () {
                    return new Map
                }, e.prototype.getName = function () {
                    return "School of fish"
                }, e.prototype.getLine = function (e) {
                    switch (e) {
                        case Nm.FIRST:
                            return Dm.textValue("fish: " + this.fish);
                        case Nm.SECOND:
                            return this.gameService.isEnabled(Eu.FISH_FOOD) ? Dm.textValue("fish food: " + Math.floor(this.food / 10)) : Dm.emptyValue();
                        case Nm.THIRD:
                            return this.gameService.isEnabled(Eu.FISH_FOOD) ? Dm.iconValue(this.icons) : Dm.emptyValue();
                        case Nm.FOURTH:
                            return this.gameService.isEnabled(Eu.FISH_FOOD) ? Dm.buttonValue("add fish food", "food") : Dm.emptyValue()
                    }
                }, e.prototype.getSize = function () {
                    return 0
                }, e.prototype.buildOnMountain = function () {
                    return !1
                }, e.prototype.tick = function () {
                    this.food > 0 ? (this.food -= 1, 1 === ku.randomBetween(1, ts.SEA.SCHOOL_OF_FISH.BREED_CHANCE / 2) && (this.fish += Math.floor(ts.SEA.SCHOOL_OF_FISH.BREED_AMOUNT * this.getPower()))) : 1 === ku.randomBetween(1, ts.SEA.SCHOOL_OF_FISH.BREED_CHANCE) && (this.fish += Math.floor(ts.SEA.SCHOOL_OF_FISH.BREED_AMOUNT * this.getPower()))
                }, e.prototype.build = function () {
                    return this
                }, e.prototype.getBuildingId = function () {
                    return this.id
                }, e.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        buildingType: this.buildingType,
                        fish: this.fish,
                        food: this.food
                    }
                }, e.prototype.prepareDemolish = function () {
                    return this.stopProduction(), !1
                }, e.prototype.finishDemolish = function () {}, e.prototype.startProduction = function () {
                    return !1
                }, e.prototype.stopProduction = function () {}, e.prototype.isStoppable = function () {
                    return !1
                }, e.prototype.isWorking = function () {
                    return !0
                }, e.prototype.isDemolishable = function () {
                    return !1
                }, e.prototype.getDescription = function () {
                    return "School of fish"
                }, e.prototype.fireWorker = function () {
                    return !1
                }, e.prototype.hireWorker = function () {
                    return !1
                }, e.prototype.getWorkers = function () {
                    return 0
                }, e.prototype.getFish = function () {
                    return this.fish
                }, e.prototype.reduceFish = function (e) {
                    return this.fish >= e && (this.fish -= e, !0)
                }, e.prototype.getEffects = function () {
                    return 0
                }, e.prototype.getPermanentEffects = function () {
                    return 0
                }, e.prototype.getDetails = function () {
                    return ""
                }, e.prototype.hasDetails = function () {
                    return !1
                }, e.prototype.getPower = function () {
                    return 1 + this.effectsService.getNatureEffectsValue() / 100
                }, e.prototype.isCombinable = function () {
                    return !1
                }, e.prototype.isSplittable = function () {
                    return !1
                }, e.prototype.getHappinessEffect = function () {
                    return 0
                }, e.prototype.getWeatherMultiplier = function () {
                    return 0
                }, e.prototype.getDisplayableEffectsValue = function () {
                    return 0
                }, e.prototype.hasBuff = function () {
                    return !1
                }, e.prototype.isBuffed = function () {
                    return !1
                }, e.prototype.getBuff = function () {
                    return null
                }, e.prototype.isComplexManagement = function () {
                    return !1
                }, e.prototype.getWorkSettings = function () {
                    return null
                }, e.prototype.hasUpgrade = function () {
                    return !1
                }, e.prototype.getUpgradeCost = function () {
                    return new Map
                }, e.prototype.setBuildingLevel = function (e) {}, e.prototype.getBuildingLevel = function () {
                    return 0
                }, e
            }();
        ! function (e) {
            e.WORKING = "working", e.BAD_WEATHER = "bad weather", e.STOPPED = "stopped"
        }(ry || (ry = {}));
        var sy, ay = function (e) {
            function n(n, t, r, i, l, o) {
                void 0 === n && (n = null), void 0 === t && (t = -1), void 0 === r && (r = 0), void 0 === i && (i = 4), void 0 === l && (l = ry.WORKING), void 0 === o && (o = 1);
                var u = e.call(this, t, bu.FARM, n, ts.FIELD.FARM, r > 0, !0, !0, o) || this;
                return u.workers = r, u.maxWorkers = i, u.status = l, u.servicesService && (u.weatherService = n.getService(Nu.WEATHER), u.calendarService = n.getService(Nu.CALENDAR), u.fieldService = n.getServiceByRegion(Mu.FIELD)), u
            }
            return i(n, e), n.prototype.toJSON = function () {
                return {
                    id: this.id,
                    level: this.level,
                    buildingType: this.buildingType,
                    workers: this.workers,
                    maxWorkers: this.maxWorkers
                }
            }, n.prototype.callback = function (e) {
                "hire" === e && this.workers < this.maxWorkers && this.resourcesService.hireWorker() ? this.workers += 1 : "fire" === e && this.workers > 0 && (this.resourcesService.fireWorker(), this.workers -= 1)
            }, n.prototype.getLine = function (e) {
                switch (e) {
                    case Nm.FIRST:
                        return Dm.textValue("workers: " + this.workers + "/" + this.maxWorkers);
                    case Nm.SECOND:
                        return Dm.textValue(this.status);
                    case Nm.THIRD:
                        return Dm.twoButtonValue("hire worker", "hire", "", "fire worker", "fire");
                    case Nm.FOURTH:
                        return Dm.emptyValue()
                }
            }, n.prototype.isWorking = function () {
                return this.workers > 0
            }, n.prototype.startProduction = function () {
                if (0 === this.workers) {
                    for (; this.workers < this.maxWorkers && this.resourcesService.hireWorker();) this.workers += 1;
                    if (this.workers > 0) return !0
                }
                return !1
            }, n.prototype.stopProduction = function () {
                this.workers > 0 && (this.resourcesService.fireWorker(this.workers), this.workers = 0)
            }, n.prototype.tick = function (e) {
                var n = this;
                if (this.workers > 0)
                    if (this.weatherService.isWeather(xu.RAIN, xu.STORM)) this.status = ry.BAD_WEATHER;
                    else {
                        this.status = ry.WORKING;
                        for (var t = this.workers; t > 0;) {
                            var r = this.fieldService.getBuildings().filter(function (e) {
                                return (e.getBuildingType() === bu.FIELD || e.getBuildingType() === bu.ORCHARD || e.getBuildingType() === bu.PASTURE) && e.hasWork()
                            });
                            if (0 === r.length) break;
                            r.forEach(function (e) {
                                t > 0 && e.work(n.getPower()) && (t -= 1)
                            })
                        }
                    }
                else this.status = ry.STOPPED
            }, n.prototype.fireWorker = function () {
                return this.workers > 0 && (this.resourcesService.fireWorker(1), this.workers -= 1, !0)
            }, n.prototype.hireWorker = function () {
                return !!(this.workers < this.maxWorkers && this.resourcesService.hireWorker()) && (this.workers += 1, !0)
            }, n.prototype.getWorkers = function () {
                return this.workers
            }, n
        }(Mm);
        ! function (e) {
            e.PLOW_FIELD = "plowing {crop} field", e.SOWING = "sowing {crop}", e.GROWING = "{crop} growing", e.HARVEST = "harvesting {crop}", e.FALLOW = "fallow"
        }(sy || (sy = {}));
        var cy, py = function (e) {
            function n(n, t, r, i, l, o, u, s, a) {
                void 0 === n && (n = null), void 0 === t && (t = -1), void 0 === r && (r = ts.FIELD.FIELD.SIZE), void 0 === i && (i = Tu.NONE), void 0 === l && (l = sy.FALLOW), void 0 === o && (o = 0), void 0 === u && (u = !0), void 0 === s && (s = 0), void 0 === a && (a = 1);
                var c = e.call(this, t, bu.FIELD, n, ts.FIELD.FIELD, u, !0, !0, a) || this;
                return c.currentSize = r, c.crop = i, c.status = l, c.progress = o, c.growth = s, c.servicesService && (c.gameService = n.getService(Nu.GAME), c.modalService = n.getService(Nu.MODAL), c.weatherService = n.getService(Nu.WEATHER), c.calendarService = n.getService(Nu.CALENDAR)), c
            }
            return i(n, e), n.prototype.toJSON = function () {
                return {
                    id: this.id,
                    level: this.level,
                    buildingType: this.buildingType,
                    size: this.currentSize,
                    crop: this.crop,
                    status: this.status,
                    progress: this.progress,
                    working: this.working,
                    growth: this.growth
                }
            }, n.prototype.getSize = function () {
                return this.currentSize
            }, n.prototype.getComplexity = function () {
                return e.prototype.getComplexity.call(this) * (this.getSize() / this.settings.SIZE)
            }, n.prototype.callback = function (e) {
                var n = this;
                if (this.crop === Tu.NONE || this.status === sy.FALLOW) this.crop = Tu[String(e.target.value)], this.status = sy.FALLOW, this.progress = 0;
                else {
                    this.modalService.open(mu.CONFIRM), this.modalService.setModalText("Are you sure you want to switch field crop type?<br>All field progress will be lost");
                    var t = this.modalService.registerForConfirmation().subscribe(function (r) {
                        r ? (n.crop = Tu[String(e.target.value)], n.status = sy.FALLOW, n.progress = 0) : e.target.selectedIndex = n.crop, t.unsubscribe()
                    })
                }
            }, n.prototype.finishDemolish = function () {}, n.prototype.getLine = function (e) {
                var n = this;
                switch (e) {
                    case Nm.FIRST:
                        return Dm.textValue("size: " + this.getSize());
                    case Nm.SECOND:
                        var t = [];
                        return t.push(Tu[Tu.NONE]), Object.entries(Object(ls.FIELD)).forEach(function (e) {
                            ls.getCrop(Tu[e[0]]).PREREQUISITE ? n.gameService.isEnabled(ls.getCrop(Tu[e[0]]).PREREQUISITE) && t.push(e[0]) : t.push(e[0])
                        }), Dm.dropdownValue(t, Tu[this.crop]);
                    case Nm.THIRD:
                        return Dm.textValue(this.status.replace("{crop}", Tu[this.crop].toLowerCase()));
                    case Nm.FOURTH:
                        return this.status === sy.HARVEST ? Dm.progressValue(this.growth, "harvest: " + this.growth) : Dm.progressValue(this.progress)
                }
            }, n.prototype.getName = function () {
                return this.crop === Tu.NONE ? "Field" : Tu[this.crop].charAt(0).toUpperCase() + Tu[this.crop].slice(1).toLowerCase() + " field"
            }, n.prototype.startProduction = function () {
                return this.working = !0, !0
            }, n.prototype.stopProduction = function () {
                this.working = !1
            }, n.prototype.tick = function (e) {
                if (this.calendarService.getSeason() === Eg.WINTER && (this.status = sy.FALLOW, this.growth = 0, this.progress = 0), this.status === sy.GROWING)
                    if (this.calendarService.getSeason() === Eg.AUTUMN) this.status = sy.HARVEST, this.growth = Math.floor(2 * this.progress * this.getSize() / 100), this.progress = 0;
                    else if (this.progress < 100) {
                    var n = this.getPower() * (1 + this.effectsService.getNatureEffectsValue() / 100) / ls.getCrop(this.crop).GROWTH;
                    this.weatherService.getCurrentTemperature() <= 5 ? n *= 0 : this.weatherService.getCurrentTemperature() <= 10 ? n *= .2 : this.weatherService.getCurrentTemperature() <= 15 ? n *= .5 : this.weatherService.getCurrentTemperature() <= 20 ? n *= .8 : this.weatherService.getCurrentTemperature() <= 25 ? n *= 1 : this.weatherService.getCurrentTemperature() <= 27 ? n *= .8 : this.weatherService.getCurrentTemperature() <= 29 ? n *= .6 : this.weatherService.getCurrentTemperature() <= 31 ? n *= .4 : this.weatherService.getCurrentTemperature() <= 33 ? n *= .2 : this.weatherService.getCurrentTemperature() <= 35 && (n *= 0), this.progress += n, this.progress > 100 && (this.progress = 100)
                } else 100 === this.progress && (this.growth = this.getSize() * ls.getCrop(this.crop).YIELD_MULTIPLIER, this.progress = 0, this.status = sy.HARVEST)
            }, n.prototype.work = function (e) {
                if (this.isWorking() && this.status !== sy.GROWING && this.crop !== Tu.NONE) {
                    if (this.status === sy.FALLOW && this.calendarService.getSeason() === Eg.SPRING) return this.status = sy.PLOW_FIELD, !0;
                    if (this.status === sy.PLOW_FIELD && this.calendarService.getSeason() === Eg.SPRING) return this.progress < 100 && (this.progress += e / this.getSize(), this.progress >= 100 && (this.progress = 0, this.status = sy.SOWING)), !0;
                    if (this.status === sy.SOWING && (this.calendarService.getSeason() === Eg.SPRING || this.calendarService.getSeason() === Eg.SUMMER)) return this.progress += e / this.getSize(), this.progress >= 100 && (this.progress = 0, this.status = sy.GROWING), !0;
                    if (this.status === sy.HARVEST) {
                        var n = vu[Tu[this.crop]];
                        if (this.resourcesService.hasLimit(n)) return this.resourcesService.increaseResource(n, 1), this.growth -= 1, this.growth <= 0 && (this.status = sy.FALLOW), !0
                    }
                }
                return !1
            }, n.prototype.fireWorker = function () {
                return !1
            }, n.prototype.hireWorker = function () {
                return !1
            }, n.prototype.getWorkers = function () {
                return 0
            }, n.prototype.hasWork = function () {
                return this.isWorking() && this.status !== sy.GROWING && this.crop !== Tu.NONE && (this.status === sy.FALLOW && this.calendarService.getSeason() === Eg.SPRING || this.status === sy.PLOW_FIELD && this.calendarService.getSeason() === Eg.SPRING || this.status === sy.SOWING && (this.calendarService.getSeason() === Eg.SPRING || this.calendarService.getSeason() === Eg.SUMMER) || this.status === sy.HARVEST && this.resourcesService.hasLimit(vu[Tu[this.crop]]))
            }, n.prototype.getDetails = function () {
                return this.crop !== Tu.NONE ? "growing difficulty: " + ls.getCrop(this.crop).GROWTH + "<br>yield multiplier: " + ls.getCrop(this.crop).YIELD_MULTIPLIER + "<br>" + e.prototype.getDetails.call(this) : e.prototype.getDetails.call(this)
            }, n.prototype.getHappinessEffect = function () {
                return 0
            }, n.prototype.isCombinable = function () {
                return !0
            }, n.prototype.isSplittable = function () {
                return !0
            }, n.prototype.combine = function (e, n) {
                var t = this;
                if (this.getBuildingType() === e.getBuildingType()) {
                    this.modalService.open(mu.CONFIRM), this.modalService.setModalText(" Are you sure you want to combine " + this.getName() + " of size " + this.getSize() + " with " + e.getName() + " of size " + e.getSize() + "?<br>Resulting " + this.getName() + " of size " + (this.getSize() + e.getSize()) + " will be changed to fallow");
                    var r = this.modalService.registerForConfirmation().subscribe(function (i) {
                        r.unsubscribe(), i ? (t.currentSize += e.getSize(), t.status = sy.FALLOW, t.progress = 0, t.growth = 0, n.finaliseCombine(!0)) : n.finaliseCombine(!1)
                    })
                }
            }, n.prototype.split = function (e) {
                var t = this;
                this.modalService.open(mu.INPUT), this.modalService.setModalText("Set split size (1-" + (this.getSize() - 1) + ")");
                var r = this.modalService.registerForValueResponse().subscribe(function (i) {
                    r.unsubscribe(), isNaN(i) || 0 === i || (i >= 1 && i < t.getSize() ? (t.currentSize -= Number(i), e.finaliseSplit(new n(t.servicesService, t.servicesService.getService(Nu.ID).getNextId(), Number(i)).build())) : t.modalService.info("Invalid size value!"))
                })
            }, n
        }(Mm);
        ! function (e) {
            e.FALLOW = "fallow", e.PLANTING = "planting {crop}", e.GROWING = "{crop} growing", e.FRUITING = "{crop} fruits growing", e.HARVEST = "picking {crop}", e.NO_FRUITS = "no fruits", e.CLEAR = "clear old plants"
        }(cy || (cy = {}));
        var hy, dy = function (e) {
                function n(n, t, r, i, l, o, u, s, a) {
                    void 0 === n && (n = null), void 0 === t && (t = -1), void 0 === r && (r = ts.FIELD.ORCHARD.SIZE), void 0 === i && (i = Tu.NONE), void 0 === l && (l = cy.FALLOW), void 0 === o && (o = 0), void 0 === u && (u = !0), void 0 === s && (s = 0), void 0 === a && (a = 1);
                    var c = e.call(this, t, bu.ORCHARD, n, ts.FIELD.ORCHARD, u, !0, !0, a) || this;
                    return c.currentSize = r, c.crop = i, c.status = l, c.progress = o, c.growth = s, c.servicesService && (c.modalService = n.getService(Nu.MODAL), c.weatherService = n.getService(Nu.WEATHER), c.calendarService = n.getService(Nu.CALENDAR)), c
                }
                return i(n, e), n.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        buildingType: this.buildingType,
                        size: this.currentSize,
                        crop: this.crop,
                        status: this.status,
                        progress: this.progress,
                        working: this.working,
                        growth: this.growth
                    }
                }, n.prototype.getSize = function () {
                    return this.currentSize
                }, n.prototype.getComplexity = function () {
                    return e.prototype.getComplexity.call(this) * (this.getSize() / this.settings.SIZE)
                }, n.prototype.callback = function (e) {
                    var n = this;
                    if (this.crop === Tu.NONE || this.status === cy.FALLOW) this.crop = Tu[String(e.target.value)], this.status = cy.FALLOW, this.progress = 0;
                    else {
                        this.modalService.open(mu.CONFIRM), this.modalService.setModalText("Are you sure you want to switch orchard plant type?<br>All orchard progress will be lost");
                        var t = this.modalService.registerForConfirmation().subscribe(function (r) {
                            r ? (n.crop = Tu[String(e.target.value)], n.status = n.status === cy.FALLOW || n.status === cy.PLANTING ? cy.FALLOW : cy.CLEAR, n.progress = 0) : e.target.selectedIndex = n.crop - Object.entries(ls.FIELD).length, t.unsubscribe()
                        })
                    }
                }, n.prototype.finishDemolish = function () {}, n.prototype.getLine = function (e) {
                    var n = this;
                    switch (e) {
                        case Nm.FIRST:
                            return Dm.textValue("size: " + this.getSize());
                        case Nm.SECOND:
                            var t = [];
                            return t.push(Tu[Tu.NONE]), Object.entries(Object(ls.ORCHARD)).forEach(function (e) {
                                ls.getCrop(Tu[e[0]]).PREREQUISITE ? n.gameService.isEnabled(ls.getCrop(Tu[e[0]]).PREREQUISITE) && t.push(e[0]) : t.push(e[0])
                            }), Dm.dropdownValue(t, Tu[this.crop]);
                        case Nm.THIRD:
                            return Dm.textValue(this.status.replace("{crop}", Tu[this.crop].toLowerCase()));
                        case Nm.FOURTH:
                            return this.status === cy.HARVEST ? Dm.progressValue(this.growth, "harvest: " + this.growth) : this.status === cy.NO_FRUITS ? Dm.emptyValue() : Dm.progressValue(this.progress)
                    }
                }, n.prototype.getName = function () {
                    return this.crop === Tu.NONE ? "Orchard" : Tu[this.crop].charAt(0).toUpperCase() + Tu[this.crop].slice(1).toLowerCase() + " orchard"
                }, n.prototype.startProduction = function () {
                    return this.working = !0, !0
                }, n.prototype.stopProduction = function () {
                    this.working = !1
                }, n.prototype.tick = function (e) {
                    if (this.crop !== Tu.NONE) {
                        if (this.status !== cy.FALLOW && this.calendarService.getSeason() === Eg.WINTER) {
                            if (this.status === cy.GROWING) return;
                            this.status = cy.NO_FRUITS, this.growth = 0, this.progress = 0
                        } else this.status === cy.NO_FRUITS && this.calendarService.getSeason() === Eg.SPRING && (this.status = cy.FRUITING);
                        if (this.status === cy.GROWING || this.status === cy.FRUITING)
                            if (this.calendarService.getSeason() === Eg.AUTUMN && this.status === cy.FRUITING) this.status = cy.HARVEST, this.growth = Math.floor(2 * this.progress * this.getSize() / 100), this.progress = 0;
                            else if (this.progress < 100) {
                            var n = this.getPower() * (1 + this.effectsService.getNatureEffectsValue() / 100);
                            this.status === cy.GROWING ? n /= ls.getCrop(this.crop).GROWTH : this.status === cy.FRUITING && (n /= ls.getCrop(this.crop).FRUITING), this.weatherService.getCurrentTemperature() <= 5 ? n *= 0 : this.weatherService.getCurrentTemperature() <= 10 ? n *= .2 : this.weatherService.getCurrentTemperature() <= 15 ? n *= .5 : this.weatherService.getCurrentTemperature() <= 20 ? n *= .8 : this.weatherService.getCurrentTemperature() <= 25 ? n *= 1 : this.weatherService.getCurrentTemperature() <= 27 ? n *= .8 : this.weatherService.getCurrentTemperature() <= 29 ? n *= .6 : this.weatherService.getCurrentTemperature() <= 31 ? n *= .4 : this.weatherService.getCurrentTemperature() <= 33 ? n *= .2 : this.weatherService.getCurrentTemperature() <= 35 && (n *= 0), this.progress += n, this.progress > 100 && (this.progress = 100)
                        } else 100 === this.progress && (this.status === cy.GROWING ? this.status = cy.FRUITING : this.status === cy.FRUITING && (this.growth = 2 * this.getSize(), this.status = cy.HARVEST), this.progress = 0)
                    }
                }, n.prototype.work = function (e) {
                    if (this.isWorking() && this.status !== cy.GROWING && this.crop !== Tu.NONE)
                        if (this.status === cy.FALLOW) {
                            if (this.calendarService.getSeason() === Eg.SPRING) return this.status = cy.PLANTING, !0
                        } else {
                            if (this.status === cy.PLANTING) return this.progress < 100 && (this.progress += e / this.getSize(), this.progress >= 100 && (this.progress = 0, this.status = cy.GROWING)), !0;
                            if (this.status === cy.HARVEST) {
                                var n = vu[Tu[this.crop]];
                                if (this.resourcesService.hasLimit(n)) return this.resourcesService.increaseResource(n, 1), this.growth -= 1, this.growth <= 0 && (this.status = cy.NO_FRUITS), !0
                            } else if (this.status === cy.CLEAR) return this.progress < 100 && (this.progress += e / this.getSize(), this.progress >= 100 && (this.progress = 0, this.status = cy.FALLOW)), !0
                        } return !1
                }, n.prototype.fireWorker = function () {
                    return !1
                }, n.prototype.hireWorker = function () {
                    return !1
                }, n.prototype.getWorkers = function () {
                    return 0
                }, n.prototype.hasWork = function () {
                    return this.isWorking() && this.status !== cy.GROWING && this.crop !== Tu.NONE && (this.status === cy.FALLOW && this.calendarService.getSeason() === Eg.SPRING || this.status === cy.PLANTING || this.status === cy.CLEAR || this.status === cy.HARVEST && this.resourcesService.hasLimit(vu[Tu[this.crop]]))
                }, n.prototype.getDetails = function () {
                    return this.crop !== Tu.NONE ? "growing difficulty: " + ls.getCrop(this.crop).GROWTH + "<br>fruiting difficulty: " + ls.getCrop(this.crop).FRUITING + "<br>yield multiplier: " + ls.getCrop(this.crop).YIELD_MULTIPLIER + "<br>" + e.prototype.getDetails.call(this) : e.prototype.getDetails.call(this)
                }, n.prototype.getHappinessEffect = function () {
                    return 0
                }, n.prototype.isCombinable = function () {
                    return !0
                }, n.prototype.isSplittable = function () {
                    return !0
                }, n.prototype.combine = function (e, n) {
                    var t = this;
                    if (this.getBuildingType() === e.getBuildingType()) {
                        this.modalService.open(mu.CONFIRM), this.modalService.setModalText(" Are you sure you want to combine " + this.getName() + " of size " + this.getSize() + " with " + e.getName() + " of size " + e.getSize() + "?<br>Resulting " + this.getName() + " of size " + (this.getSize() + e.getSize()) + " will be changed to fallow");
                        var r = this.modalService.registerForConfirmation().subscribe(function (i) {
                            r.unsubscribe(), i ? (t.currentSize += e.getSize(), t.status = cy.FALLOW, t.progress = 0, t.growth = 0, n.finaliseCombine(!0)) : n.finaliseCombine(!1)
                        })
                    }
                }, n.prototype.split = function (e) {
                    var t = this;
                    this.modalService.open(mu.INPUT), this.modalService.setModalText("Set split size (1-" + (this.getSize() - 1) + ")");
                    var r = this.modalService.registerForValueResponse().subscribe(function (i) {
                        r.unsubscribe(), isNaN(i) || 0 === i || (i >= 1 && i < t.getSize() ? (t.currentSize -= Number(i), e.finaliseSplit(new n(t.servicesService, t.servicesService.getService(Nu.ID).getNextId(), Number(i)).build())) : t.modalService.info("Invalid size value!"))
                    })
                }, n
            }(Mm),
            fy = function (e) {
                function n(n, t, r, i, l, o, u, s, a) {
                    return void 0 === n && (n = null), void 0 === t && (t = -1), void 0 === r && (r = 0), void 0 === i && (i = Bm.FETCHING_INPUT), void 0 === l && (l = []), void 0 === o && (o = []), void 0 === u && (u = !1), void 0 === s && (s = null), void 0 === a && (a = 1), e.call(this, n, t, bu.WINDMILL, ts.FIELD.WINDMILL, i, r, l, o, u, s, a) || this
                }
                return i(n, e), n
            }(Ym),
            gy = function (e) {
                function n(n, t, r, i, l, o, u, s, a) {
                    return void 0 === n && (n = null), void 0 === t && (t = -1), void 0 === r && (r = 0), void 0 === i && (i = Bm.FETCHING_INPUT), void 0 === l && (l = []), void 0 === o && (o = []), void 0 === u && (u = !1), void 0 === s && (s = null), void 0 === a && (a = 1), e.call(this, n, t, bu.BAKERY, ts.VILLAGE.BAKERY, i, r, l, o, u, s, a) || this
                }
                return i(n, e), n
            }(Ym);
        ! function (e) {
            e.FISHING = "fishing", e.WAITING_FOR_FISH = "waiting for fish", e.FETCHING_WHEAT = "fetching wheat", e.PRODUCING_BAIT = "producing fish food", e.WAITING_FOR_WAREHOUSE_SPACE = "waiting for warehouse space", e.WAITING_FOR_WAREHOUSE_SPACE_FISH_FOOD = "waiting for warehouse space", e.TRANSPORTING_FISH = "transporting fish", e.TRANSPORTING_BAIT = "transporting fish food"
        }(hy || (hy = {}));
        var vy, my = function (e) {
                function n(n, t, r, i, l, o) {
                    void 0 === n && (n = null), void 0 === t && (t = -1), void 0 === r && (r = 0), void 0 === i && (i = hy.WAITING_FOR_FISH), void 0 === l && (l = !1), void 0 === o && (o = 1);
                    var u = e.call(this, t, bu.FISHERS_HUT, n, ts.SEA.FISHERS_HUT, l, !0, !0, o) || this;
                    return u.progress = r, u.status = i, u.servicesService && (u.seaService = n.getServiceByRegion(Mu.SEA)), u
                }
                return i(n, e), n.prototype.callback = function (e) {
                    "bait" === e ? (this.status = hy.FETCHING_WHEAT, this.progress = 0) : "fishing" === e && (this.status = hy.WAITING_FOR_FISH, this.progress = 0)
                }, n.prototype.getLine = function (e) {
                    switch (e) {
                        case Nm.FIRST:
                            return !this.gameService.isEnabled(Eu.FISH_FOOD) || this.status !== hy.FISHING && this.status !== hy.WAITING_FOR_FISH && this.status !== hy.TRANSPORTING_FISH && this.status !== hy.WAITING_FOR_WAREHOUSE_SPACE ? Dm.buttonValue("fishing", "fishing") : Dm.buttonValue("produce fish food", "bait");
                        case Nm.SECOND:
                            return Dm.textValue(this.status);
                        case Nm.THIRD:
                            return Dm.progressValue(this.progress);
                        case Nm.FOURTH:
                            return Dm.emptyValue()
                    }
                }, n.prototype.tick = function () {
                    if (this.working)
                        if (this.status === hy.WAITING_FOR_FISH) this.seaService.reduceFish(1) && (this.status = hy.FISHING);
                        else if (this.status === hy.FISHING) {
                        if (this.progress < 100 && (this.progress += this.getPower(), this.progress >= 100)) {
                            if (this.progress = 0, this.servicesService.getService(Nu.ROYAL).catchGoldenFish()) return;
                            this.status = hy.TRANSPORTING_FISH
                        }
                    } else if (this.status === hy.TRANSPORTING_FISH || this.status === hy.WAITING_FOR_WAREHOUSE_SPACE) {
                        var e = this.resourcesService.increaseResource(vu.FISH, 1);
                        this.status = e ? hy.WAITING_FOR_FISH : hy.WAITING_FOR_WAREHOUSE_SPACE
                    } else this.status === hy.FETCHING_WHEAT ? this.resourcesService.decreaseResource(vu.WHEAT, 2) && (this.status = hy.PRODUCING_BAIT) : this.status === hy.PRODUCING_BAIT ? this.progress < 100 && (this.progress += this.getPower(), this.progress >= 100 && (this.progress = 0, this.status = hy.TRANSPORTING_BAIT)) : this.status !== hy.TRANSPORTING_BAIT && this.status !== hy.WAITING_FOR_WAREHOUSE_SPACE_FISH_FOOD || (e = this.resourcesService.increaseResource(vu.FISH_FOOD, 1), this.status = e ? hy.FETCHING_WHEAT : hy.WAITING_FOR_WAREHOUSE_SPACE_FISH_FOOD)
                }, n.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        buildingType: this.buildingType,
                        progress: this.progress,
                        status: this.status,
                        working: this.working
                    }
                }, n.prototype.getDescription = function () {
                    return "Fishers catch fish in the sea"
                }, n
            }(Mm),
            yy = function (e) {
                function n(n, t, r, i) {
                    void 0 === n && (n = null), void 0 === t && (t = -1), void 0 === r && (r = ts.FORT.BARRACKS.SIZE), void 0 === i && (i = 1);
                    var l = e.call(this, t, bu.BARRACKS, n, ts.FORT.BARRACKS, !1, !0, !1, i) || this;
                    return l.barracksSize = r, l.servicesService && (l.armyService = n.getService(Nu.ARMY), l.modalService = n.getService(Nu.MODAL)), l
                }
                return i(n, e), n.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        buildingType: this.buildingType,
                        barracksSize: this.barracksSize
                    }
                }, n.prototype.build = function () {
                    return this.servicesService.getService(Nu.GAME).isEnabled(Eu.ARMY) || this.servicesService.getService(Nu.GAME).enable(Eu.ARMY), this.armyService.increaseBarracks(this.barracksSize), this
                }, n.prototype.prepareDemolish = function () {
                    return this.armyService.getFreeBarracks() >= this.barracksSize ? (this.armyService.decreaseBarracks(this.barracksSize), !0) : (this.modalService.info("Your troops would have nowhere to sleep!<br>You cannot demolish barracks right now!"), !1)
                }, n.prototype.getLine = function (e) {
                    switch (e) {
                        case Nm.FIRST:
                            return Dm.textValue("capacity: " + this.barracksSize);
                        case Nm.SECOND:
                        case Nm.THIRD:
                        case Nm.FOURTH:
                            return Dm.emptyValue()
                    }
                }, n.prototype.getHappinessEffect = function () {
                    return 0
                }, n.prototype.getEffects = function () {
                    return 0
                }, n.prototype.getPermanentEffects = function () {
                    return 0
                }, n
            }(Mm);
        ! function (e) {
            e.TRAINING = "training", e.NO_RECRUITS = "no recruits"
        }(vy || (vy = {}));
        var Sy, Ey = function (e) {
                function n(n, t, r, i, l, o) {
                    void 0 === n && (n = null), void 0 === t && (t = -1), void 0 === r && (r = 0), void 0 === i && (i = !1), void 0 === l && (l = vy.NO_RECRUITS), void 0 === o && (o = 1);
                    var u = e.call(this, t, bu.TRAINING_SQUARE, n, ts.FORT.TRAINING_SQUARE, i, !0, !0, o) || this;
                    return u.progress = r, u.status = l, u.servicesService && (u.armyService = n.getService(Nu.ARMY)), u
                }
                return i(n, e), n.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        buildingType: this.buildingType,
                        progress: this.progress,
                        working: this.working
                    }
                }, n.prototype.getLine = function (e) {
                    switch (e) {
                        case Nm.FIRST:
                            return Dm.emptyValue();
                        case Nm.SECOND:
                            return Dm.textValue(this.status);
                        case Nm.THIRD:
                            return this.status === vy.TRAINING ? Dm.progressValue(this.progress) : Dm.emptyValue();
                        case Nm.FOURTH:
                            return Dm.emptyValue()
                    }
                }, n.prototype.tick = function (e) {
                    this.working && (this.armyService.hasRecruits() ? (this.status = vy.TRAINING, this.progress < 100 && (this.progress += this.getPower()), this.progress >= 100 && (this.progress = 0, this.armyService.progressRecruitment(1))) : (this.status = vy.NO_RECRUITS, this.progress = 0))
                }, n
            }(Mm),
            by = function (e) {
                function n(n, t, r, i, l, o, u, s, a) {
                    return void 0 === n && (n = null), void 0 === t && (t = -1), void 0 === r && (r = 0), void 0 === i && (i = Bm.FETCHING_INPUT), void 0 === l && (l = []), void 0 === o && (o = []), void 0 === u && (u = !1), void 0 === s && (s = null), void 0 === a && (a = 1), e.call(this, n, t, bu.TANNERY, ts.FOREST.TANNERY, i, r, l, o, u, s, a) || this
                }
                return i(n, e), n
            }(Ym),
            Oy = function (e) {
                function n(n, t, r, i, l, o, u) {
                    void 0 === n && (n = null), void 0 === t && (t = -1), void 0 === r && (r = ts.FORT.STOCKADE.DURABILITY), void 0 === i && (i = ts.FORT.STOCKADE.DURABILITY), void 0 === l && (l = 0), void 0 === o && (o = !1), void 0 === u && (u = 1);
                    var s = e.call(this, t, bu.STOCKADE, n, ts.FORT.STOCKADE, o, !0, !1, u) || this;
                    return s.health = r, s.durability = i, s.progress = l, s.servicesService && (s.armyService = n.getService(Nu.ARMY), s.modalService = n.getService(Nu.MODAL)), s
                }
                return i(n, e), n.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        buildingType: this.buildingType,
                        health: this.health,
                        durability: this.durability,
                        progress: this.progress,
                        working: this.working
                    }
                }, n.prototype.build = function () {
                    return this.armyService.increaseDefense(ts.FORT.STOCKADE.DEFENSE), this
                }, n.prototype.prepareDemolish = function () {
                    return this.armyService.decreaseDefense(ts.FORT.STOCKADE.DEFENSE), !0
                }, n.prototype.callback = function (e) {
                    var n = this;
                    if ("repair" === e) {
                        this.modalService.open(mu.CONFIRM), this.modalService.setModalText("Are you sure you want to repair " + this.getName() + " for 1 log for each durability point missing?");
                        var t = this.modalService.registerForConfirmation().subscribe(function (e) {
                            e && (n.startProduction() || n.modalService.info("No free worker to repair stockade!")), t.unsubscribe()
                        })
                    } else "stop" === e && this.fireWorker()
                }, n.prototype.getLine = function (e) {
                    switch (e) {
                        case Nm.FIRST:
                            return Dm.textValue("durability: " + this.health + "/" + this.durability);
                        case Nm.SECOND:
                            return Dm.textValue("defense: " + ts.FORT.STOCKADE.DEFENSE);
                        case Nm.THIRD:
                            return this.health < this.durability && !this.working ? Dm.buttonValue("repair", "repair") : this.health < this.durability && this.working ? Dm.buttonValue("stop repair", "stop") : Dm.emptyValue();
                        case Nm.FOURTH:
                            return this.working ? Dm.progressValue(this.progress) : Dm.emptyValue()
                    }
                }, n.prototype.tick = function (e) {
                    this.working && (this.progress < 100 && (0 === this.progress && this.resourcesService.decreaseResource(vu.LOG, 1) ? this.progress += this.getPower() : this.progress > 0 && (this.progress += this.getPower())), this.progress >= 100 && (this.progress = 0, this.health += 1), this.health === this.durability && this.fireWorker())
                }, n.prototype.getHappinessEffect = function () {
                    return 0
                }, n
            }(Mm),
            Ry = function (e) {
                function n(n, t, r, i, l, o, u, s, a) {
                    return void 0 === n && (n = null), void 0 === t && (t = -1), void 0 === r && (r = 0), void 0 === i && (i = Bm.FETCHING_INPUT), void 0 === l && (l = []), void 0 === o && (o = []), void 0 === u && (u = !1), void 0 === s && (s = null), void 0 === a && (a = 1), e.call(this, n, t, bu.COTTON_MILL, ts.FIELD.COTTON_MILL, i, r, l, o, u, s, a) || this
                }
                return i(n, e), n
            }(Ym),
            Ty = function (e) {
                function n(n, t, r, i, l, o, u, s, a) {
                    return void 0 === n && (n = null), void 0 === t && (t = -1), void 0 === r && (r = 0), void 0 === i && (i = Bm.FETCHING_INPUT), void 0 === l && (l = []), void 0 === o && (o = []), void 0 === u && (u = !1), void 0 === s && (s = null), void 0 === a && (a = 1), e.call(this, n, t, bu.TAILOR, ts.VILLAGE.TAILOR, i, r, l, o, u, s, a) || this
                }
                return i(n, e), n
            }(Ym),
            Cy = function (e) {
                function n(n, t, r, i, l, o, u, s, a) {
                    return void 0 === n && (n = null), void 0 === t && (t = -1), void 0 === r && (r = 0), void 0 === i && (i = Bm.FETCHING_INPUT), void 0 === l && (l = []), void 0 === o && (o = []), void 0 === u && (u = !1), void 0 === s && (s = null), void 0 === a && (a = 1), e.call(this, n, t, bu.BREWERY, ts.FIELD.BREWERY, i, r, l, o, u, s, a) || this
                }
                return i(n, e), n
            }(Ym),
            _y = function (e) {
                function n(n, t, r, i, l, o, u) {
                    void 0 === n && (n = null), void 0 === t && (t = -1), void 0 === r && (r = ts.FORT.WOODEN_TOWER.DURABILITY - 30), void 0 === i && (i = ts.FORT.WOODEN_TOWER.DURABILITY), void 0 === l && (l = 0), void 0 === o && (o = !1), void 0 === u && (u = 1);
                    var s = e.call(this, t, bu.WOODEN_TOWER, n, ts.FORT.WOODEN_TOWER, o, !0, !1, u) || this;
                    return s.health = r, s.durability = i, s.progress = l, s.servicesService && (s.armyService = n.getService(Nu.ARMY), s.modalService = n.getService(Nu.MODAL)), s
                }
                return i(n, e), n.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        buildingType: this.buildingType,
                        health: this.health,
                        durability: this.durability,
                        progress: this.progress,
                        working: this.working
                    }
                }, n.prototype.build = function () {
                    return this.armyService.increaseDefense(ts.FORT.WOODEN_TOWER.DEFENSE), this
                }, n.prototype.prepareDemolish = function () {
                    return this.armyService.decreaseDefense(ts.FORT.WOODEN_TOWER.DEFENSE), !0
                }, n.prototype.callback = function (e) {
                    var n = this;
                    if ("repair" === e) {
                        this.modalService.open(mu.CONFIRM), this.modalService.setModalText("Are you sure you want to repair " + this.getName() + " for 1 log for each durability point missing?");
                        var t = this.modalService.registerForConfirmation().subscribe(function (e) {
                            e && (n.startProduction() || n.modalService.info("No free worker to repair wooden tower!")), t.unsubscribe()
                        })
                    } else "stop" === e && this.fireWorker()
                }, n.prototype.getLine = function (e) {
                    switch (e) {
                        case Nm.FIRST:
                            return Dm.textValue("durability: " + this.health + "/" + this.durability);
                        case Nm.SECOND:
                            return Dm.textValue("defense: " + ts.FORT.WOODEN_TOWER.DEFENSE);
                        case Nm.THIRD:
                            return this.health < this.durability && !this.working ? Dm.buttonValue("repair", "repair") : this.health < this.durability && this.working ? Dm.buttonValue("stop repair", "stop") : Dm.emptyValue();
                        case Nm.FOURTH:
                            return this.working ? Dm.progressValue(this.progress) : Dm.emptyValue()
                    }
                }, n.prototype.tick = function (e) {
                    this.working && (this.progress < 100 && (0 === this.progress && this.resourcesService.decreaseResource(vu.LOG, 1) ? this.progress += this.getPower() : this.progress > 0 && (this.progress += this.getPower())), this.progress >= 100 && (this.progress = 0, this.health += 1), this.health === this.durability && this.fireWorker())
                }, n.prototype.getHappinessEffect = function () {
                    return 0
                }, n
            }(Mm),
            Iy = function (e) {
                function n(n, t, r, i, l, o, u) {
                    void 0 === n && (n = null), void 0 === t && (t = -1), void 0 === r && (r = ts.FORT.STONE_TOWER.DURABILITY), void 0 === i && (i = ts.FORT.STONE_TOWER.DURABILITY), void 0 === l && (l = 0), void 0 === o && (o = !1), void 0 === u && (u = 1);
                    var s = e.call(this, t, bu.STONE_TOWER, n, ts.FORT.STONE_TOWER, o, !0, !1, u) || this;
                    return s.health = r, s.durability = i, s.progress = l, s.servicesService && (s.armyService = n.getService(Nu.ARMY), s.modalService = n.getService(Nu.MODAL)), s
                }
                return i(n, e), n.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        buildingType: this.buildingType,
                        health: this.health,
                        durability: this.durability,
                        progress: this.progress,
                        working: this.working
                    }
                }, n.prototype.build = function () {
                    return this.armyService.increaseDefense(ts.FORT.STONE_TOWER.DEFENSE), this
                }, n.prototype.prepareDemolish = function () {
                    return this.armyService.decreaseDefense(ts.FORT.STONE_TOWER.DEFENSE), !0
                }, n.prototype.callback = function (e) {
                    var n = this;
                    if ("repair" === e) {
                        this.modalService.open(mu.CONFIRM), this.modalService.setModalText("Are you sure you want to repair " + this.getName() + " for 1 stone for each durability point missing?");
                        var t = this.modalService.registerForConfirmation().subscribe(function (e) {
                            e && (n.startProduction() || n.modalService.info("No free worker to repair stone tower!")), t.unsubscribe()
                        })
                    } else "stop" === e && this.fireWorker()
                }, n.prototype.getLine = function (e) {
                    switch (e) {
                        case Nm.FIRST:
                            return Dm.textValue("durability: " + this.health + "/" + this.durability);
                        case Nm.SECOND:
                            return Dm.textValue("defense: " + ts.FORT.STONE_TOWER.DEFENSE);
                        case Nm.THIRD:
                            return this.health < this.durability && !this.working ? Dm.buttonValue("repair", "repair") : this.health < this.durability && this.working ? Dm.buttonValue("stop repair", "stop") : Dm.emptyValue();
                        case Nm.FOURTH:
                            return this.working ? Dm.progressValue(this.progress) : Dm.emptyValue()
                    }
                }, n.prototype.tick = function (e) {
                    this.working && (this.progress < 100 && (0 === this.progress && this.resourcesService.decreaseResource(vu.STONE, 1) ? this.progress += this.getPower() : this.progress > 0 && (this.progress += this.getPower())), this.progress >= 100 && (this.progress = 0, this.health += 1), this.health === this.durability && this.fireWorker())
                }, n.prototype.getHappinessEffect = function () {
                    return 0
                }, n
            }(Mm),
            Ay = function (e) {
                function n(n, t, r, i, l, o, u, s, a) {
                    void 0 === n && (n = null), void 0 === t && (t = -1), void 0 === r && (r = 0), void 0 === i && (i = Bm.FETCHING_INPUT), void 0 === l && (l = []), void 0 === o && (o = []), void 0 === u && (u = !1), void 0 === s && (s = null), void 0 === a && (a = 1);
                    var c = e.call(this, n, t, bu.WINERY, ts.FIELD.WINERY, i, r, l, o, u, s, a) || this;
                    return n && (c.managementService = n.getService(Nu.MANAGEMENT)), c
                }
                return i(n, e), n.prototype.tick = function () {
                    this.managementService.getComplexWorkers() && this.workSettings && this.workSettings.enabled && (this.isMet() ? this.isWorking() || this.hireWorker() : this.isWorking() && this.fireWorker()), this.working && (this.outputStorage.length > 0 ? this.collectOutputResources() : this.inputStorage.length < this.settings.INPUT_RESOURCES.length && 0 === this.outputStorage.length ? this.collectInputResources() && (this.status = Bm.PREPARING) : this.progress < 100 && this.status === Bm.PREPARING ? (this.progress += this.getPower(), this.progress > 100 && (this.progress = 100)) : 100 === this.progress && this.status === Bm.PREPARING ? (this.progress = 0, this.status = Bm.PRODUCING_OUTPUT) : this.progress < 100 && this.status === Bm.PRODUCING_OUTPUT ? (this.progress += 100 / (10 * Yu), this.progress >= 100 && (this.progress = 100)) : 100 === this.progress && this.status === Bm.PRODUCING_OUTPUT && (this.progress = 0, this.inputStorage = [], this.outputStorage = Au.copyResourceArray(this.settings.OUTPUT_RESOURCES), this.status = Bm.TRANSPORTING_OUTPUT))
                }, n
            }(Ym),
            wy = function (e) {
                function n(n, t, r, i, l, o, u) {
                    void 0 === n && (n = null), void 0 === t && (t = -1), void 0 === r && (r = 0), void 0 === i && (i = 0), void 0 === l && (l = 0), void 0 === o && (o = !1), void 0 === u && (u = 1);
                    var s = e.call(this, t, bu.TAVERN, n, ts.VILLAGE.TAVERN, o, !0, !0, u) || this;
                    return s.progress = r, s.beer = i, s.wine = l, s.servicesService && (s.resourcesService = n.getService(Nu.RESOURCES), s.happinessService = n.getService(Nu.HAPPINESS), s.managementService = n.getService(Nu.MANAGEMENT)), s
                }
                return i(n, e), n.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        buildingType: this.buildingType,
                        progress: this.progress,
                        beer: this.beer,
                        wine: this.wine,
                        working: this.working
                    }
                }, n.prototype.getLine = function (e) {
                    switch (e) {
                        case Nm.FIRST:
                            return Dm.textValue(this.beer < .001 && this.wine < .001 ? "waiting for alcohol" : this.working ? "open" : "closed");
                        case Nm.SECOND:
                            return Dm.emptyValue();
                        case Nm.THIRD:
                            return Dm.textValue("beer: " + Au.round(this.beer, 2));
                        case Nm.FOURTH:
                            return Dm.textValue("wine: " + Au.round(this.wine, 2))
                    }
                }, n.prototype.tick = function (e) {
                    if (this.working) {
                        this.beer < 10 && this.resourcesService.decreaseResource(vu.BEER, 1) && (this.beer += 1, this.beer > 10 && (this.beer = 10)), this.wine < 10 && this.resourcesService.decreaseResource(vu.WINE, 1) && (this.wine += 1, this.wine > 10 && (this.wine = 10));
                        var n = this.managementService.getAlcoholRations(),
                            t = this.resourcesService.getTotalPeople();
                        if (this.happinessService.getHappiness() <= 100 && t > 1 && (this.beer > 0 || this.wine > 0))
                            for (var r = t; r > 0; r--) {
                                var i = ku.randomBetween(0, 1);
                                0 === i && this.beer >= .01 * n ? (this.beer -= .01 * n, this.happinessService.increaseHappiness(.01 * n / t * this.getPower(), zu.ALCOHOL_HAPPINESS_LIMIT)) : 1 === i && this.wine >= .01 * n && (this.wine -= .01 * n, this.happinessService.increaseHappiness(.01 * n / t * this.getPower(), zu.ALCOHOL_HAPPINESS_LIMIT))
                            } else this.happinessService.getHappiness() > 75 && t > 1 && this.happinessService.decreaseHappiness(.02, zu.ALCOHOL_HAPPINESS_FLOOR)
                    }
                }, n
            }(Mm),
            Ny = function (e) {
                function n(n, t, r, i, l) {
                    void 0 === n && (n = null), void 0 === t && (t = -1), void 0 === r && (r = 0), void 0 === i && (i = !1), void 0 === l && (l = 1);
                    var o = e.call(this, t, bu.GEOLOGIST, n, ts.MOUNTAINS.GEOLOGIST, i, !0, !0, l) || this;
                    return o.progress = r, o.servicesService && (o.gameService = n.getService(Nu.GAME), o.resourcesService = n.getService(Nu.RESOURCES), o.landService = n.getService(Nu.LAND)), o
                }
                return i(n, e), n.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        buildingType: this.buildingType,
                        progress: this.progress,
                        working: this.working
                    }
                }, n.prototype.getLine = function (e) {
                    switch (e) {
                        case Nm.FIRST:
                            return Dm.textValue("looking for ores");
                        case Nm.SECOND:
                            return Dm.progressValue(this.progress);
                        case Nm.THIRD:
                            return Dm.textValue(this.lastFind ? "last find: " + Au.prepareResourceName(this.lastFind) + " deposit" : "last find: nothing");
                        case Nm.FOURTH:
                            return Dm.emptyValue()
                    }
                }, n.prototype.tick = function (e) {
                    if (this.working)
                        if (this.progress < 100) this.progress += this.getPower();
                        else {
                            this.progress = 0;
                            var n = [];
                            n.push({
                                item: vu.COAL,
                                chance: this.settings.COAL_CHANCE
                            }), n.push({
                                item: vu.COPPER_ORE,
                                chance: this.settings.COPPER_CHANCE
                            }), n.push({
                                item: vu.TIN_ORE,
                                chance: this.settings.TIN_CHANCE
                            }), this.gameService.isEnabled(Eu.GOLD) && n.push({
                                item: vu.GOLD_ORE,
                                chance: this.settings.GOLD_CHANCE
                            }), this.gameService.isEnabled(Eu.SILVER) && n.push({
                                item: vu.SILVER_ORE,
                                chance: this.settings.SILVER_CHANCE
                            }), this.gameService.isEnabled(Eu.IRON) && n.push({
                                item: vu.IRON_ORE,
                                chance: this.settings.IRON_CHANCE
                            });
                            var t = ku.randomElement(n, 10);
                            t ? (this.landService.increaseOre(t, 1), this.lastFind = t) : this.lastFind = null
                        }
                }, n
            }(Mm),
            Py = function (e) {
                function n(n, t, r, i, l, o, u, s, a) {
                    return void 0 === n && (n = null), void 0 === t && (t = -1), void 0 === r && (r = 0), void 0 === i && (i = Bm.FETCHING_INPUT), void 0 === l && (l = []), void 0 === o && (o = []), void 0 === u && (u = !1), void 0 === s && (s = null), void 0 === a && (a = 1), e.call(this, n, t, bu.STONEMASON, ts.MOUNTAINS.STONEMASON, i, r, l, o, u, s, a) || this
                }
                return i(n, e), n
            }(Ym),
            Dy = function () {
                function e(e, n, t) {
                    void 0 === e && (e = null), void 0 === n && (n = -1), void 0 === t && (t = 0), this.servicesService = e, this.sharks = t, this.buildingType = bu.SHARKS, this.id = n, this.servicesService && (this.resourcesService = e.getService(Nu.RESOURCES), this.seaService = e.getService(Nu.SEA), this.effectsService = e.getService(Nu.EFFECTS))
                }
                return e.prototype.callback = function (e) {}, e.prototype.getBuildingType = function () {
                    return this.buildingType
                }, e.prototype.getComplexity = function () {
                    return 0
                }, e.prototype.getCost = function () {
                    return new Map
                }, e.prototype.getName = function () {
                    return 1 === this.sharks ? "Shark" : "Sharks"
                }, e.prototype.getLine = function (e) {
                    switch (e) {
                        case Nm.FIRST:
                            return Dm.textValue("sharks: " + this.sharks);
                        case Nm.SECOND:
                        case Nm.THIRD:
                        case Nm.FOURTH:
                            return Dm.emptyValue()
                    }
                }, e.prototype.getSize = function () {
                    return 0
                }, e.prototype.buildOnMountain = function () {
                    return !1
                }, e.prototype.tick = function () {
                    1 === ku.randomBetween(1, ts.SEA.SHARKS.FEED_CHANCE) && (this.seaService.reduceFish(this.sharks) || (this.sharks -= ts.SEA.SHARKS.FEED_AMOUNT)), this.seaService.getFishAmount() > this.sharks * ts.SEA.SHARKS.BREED_THRESHOLD && 1 === ku.randomBetween(1, ts.SEA.SHARKS.BREED_CHANCE) && (this.sharks += Math.floor(this.getPower())), this.seaService.getFishAmount() < this.sharks * ts.SEA.SHARKS.DIE_THRESHOLD && 1 === ku.randomBetween(1, ts.SEA.SHARKS.DIE_CHANCE) && (this.sharks -= 1)
                }, e.prototype.build = function () {
                    return this
                }, e.prototype.getBuildingId = function () {
                    return this.id
                }, e.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        buildingType: this.buildingType,
                        sharks: this.sharks
                    }
                }, e.prototype.prepareDemolish = function () {
                    return this.stopProduction(), !1
                }, e.prototype.finishDemolish = function () {}, e.prototype.startProduction = function () {
                    return !1
                }, e.prototype.stopProduction = function () {}, e.prototype.isStoppable = function () {
                    return !1
                }, e.prototype.isWorking = function () {
                    return !0
                }, e.prototype.isDemolishable = function () {
                    return !1
                }, e.prototype.getDescription = function () {
                    return "Sea predators"
                }, e.prototype.fireWorker = function () {
                    return !1
                }, e.prototype.hireWorker = function () {
                    return !1
                }, e.prototype.getWorkers = function () {
                    return 0
                }, e.prototype.getSharks = function () {
                    return this.sharks
                }, e.prototype.reduceSharks = function (e) {
                    return this.sharks >= e && (this.sharks -= e, !0)
                }, e.prototype.getEffects = function () {
                    return 0
                }, e.prototype.getPermanentEffects = function () {
                    return 0
                }, e.prototype.getDetails = function () {
                    return ""
                }, e.prototype.hasDetails = function () {
                    return !1
                }, e.prototype.getPower = function () {
                    return 1 + this.effectsService.getNatureEffectsValue() / 100
                }, e.prototype.isCombinable = function () {
                    return !1
                }, e.prototype.isSplittable = function () {
                    return !1
                }, e.prototype.getHappinessEffect = function () {
                    return 0
                }, e.prototype.getWeatherMultiplier = function () {
                    return 0
                }, e.prototype.getDisplayableEffectsValue = function () {
                    return 0
                }, e.prototype.hasBuff = function () {
                    return !1
                }, e.prototype.isBuffed = function () {
                    return !1
                }, e.prototype.getBuff = function () {
                    return null
                }, e.prototype.isComplexManagement = function () {
                    return !1
                }, e.prototype.getWorkSettings = function () {
                    return null
                }, e.prototype.hasUpgrade = function () {
                    return !1
                }, e.prototype.getUpgradeCost = function () {
                    return new Map
                }, e.prototype.setBuildingLevel = function (e) {}, e.prototype.getBuildingLevel = function () {
                    return 0
                }, e
            }();
        ! function (e) {
            e.MINING = "mining {res}", e.WAITING_FOR_SELECTION = "waiting for ore selection", e.WAITING_FOR_WAREHOUSE_SPACE = "waiting for warehouse space", e.NO_MORE_RESOURCES = "no more {res}", e.TRANSPORTING = "transporting {res}"
        }(Sy || (Sy = {}));
        var ky, My = function (e) {
                function n(n, t, r, i, l, o, u, s, a) {
                    void 0 === n && (n = null), void 0 === t && (t = -1), void 0 === r && (r = 0), void 0 === i && (i = Sy.WAITING_FOR_SELECTION), void 0 === l && (l = !1), void 0 === o && (o = 0), void 0 === u && (u = 200), void 0 === s && (s = vu.NOTHING), void 0 === a && (a = 1);
                    var c = e.call(this, t, bu.PIT_MINE, n, ts.MOUNTAINS.PIT_MINE, l, !0, !0, a) || this;
                    return c.progress = r, c.status = i, c.storage = o, c.resources = u, c.ore = s, c.servicesService && (c.modalService = n.getService(Nu.MODAL), c.landService = n.getService(Nu.LAND)), c
                }
                return i(n, e), n.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        buildingType: this.buildingType,
                        progress: this.progress,
                        status: this.status,
                        working: this.working,
                        storage: this.storage,
                        resources: this.resources,
                        ore: this.ore
                    }
                }, n.prototype.callback = function (e) {
                    var n = this;
                    if (this.ore === vu.NOTHING)
                        if (this.landService.hasOre(vu[String(e.target.value).replace(" ", "_")], 20)) {
                            this.modalService.open(mu.CONFIRM), this.modalService.setModalText("Are you sure you want to mine " + Au.prepareResourceName(vu[String(e.target.value).replace(" ", "_")]) + " in this mine?");
                            var t = this.modalService.registerForConfirmation().subscribe(function (r) {
                                r ? (n.landService.decreaseOre(vu[String(e.target.value).replace(" ", "_")], 20), n.ore = vu[String(e.target.value).replace(" ", "_")], n.status = Sy.MINING, n.progress = 0) : e.target.selectedIndex = n.ore, t.unsubscribe()
                            })
                        } else this.modalService.info("Not enough " + Au.prepareResourceName(vu[String(e.target.value).replace(" ", "_")]) + " deposits available<br>20 " + Au.prepareResourceName(vu[String(e.target.value).replace(" ", "_")]) + " deposits required to start mining."), e.target.selectedIndex = this.ore
                }, n.prototype.build = function () {
                    return this.startProduction(), this
                }, n.prototype.buildOnMountain = function () {
                    return !0
                }, n.prototype.getLine = function (e) {
                    switch (e) {
                        case Nm.FIRST:
                            return this.ore !== vu.NOTHING ? Dm.textValue(Au.prepareResourceName(this.ore).toLowerCase() + ": " + this.resources) : Dm.emptyValue();
                        case Nm.SECOND:
                            return Dm.textValue(this.status.replace("{res}", Au.prepareResourceName(this.ore).toLowerCase()));
                        case Nm.THIRD:
                            return Dm.progressValue(this.progress);
                        case Nm.FOURTH:
                            if (this.ore === vu.NOTHING) {
                                var n = [];
                                return n.push(vu[vu.NOTHING].replace("_", " ")), n.push(vu[vu.COAL].replace("_", " ")), n.push(vu[vu.GOLD_ORE].replace("_", " ")), n.push(vu[vu.SILVER_ORE].replace("_", " ")), n.push(vu[vu.COPPER_ORE].replace("_", " ")), n.push(vu[vu.TIN_ORE].replace("_", " ")), n.push(vu[vu.IRON_ORE].replace("_", " ")), Dm.dropdownValue(n, vu[this.ore])
                            }
                            return Dm.emptyValue()
                    }
                }, n.prototype.isStoppable = function () {
                    return this.resources > 0
                }, n.prototype.tick = function (e) {
                    if (this.ore !== vu.NOTHING) {
                        if (this.resources <= 0 && (this.status = Sy.NO_MORE_RESOURCES, this.stopProduction()), !this.working) return;
                        this.storage > 0 ? this.resourcesService.increaseResource(this.ore, this.storage) ? (this.storage = 0, this.status = Sy.MINING) : this.status = Sy.WAITING_FOR_WAREHOUSE_SPACE : this.progress < 100 ? (this.status = Sy.MINING, this.progress += this.getPower(), this.progress > 100 && (this.progress = 100)) : 100 === this.progress && (this.progress = 0, this.resources -= 1, this.storage = 1, this.status = Sy.TRANSPORTING)
                    }
                }, n
            }(Mm),
            Ly = function (e) {
                return e[e.NONE = 0] = "NONE", e[e.COW = 1] = "COW", e[e.CHICKEN = 2] = "CHICKEN", e[e.PIG = 3] = "PIG", e[e.HORSE = 4] = "HORSE", e
            }({}),
            xy = function (e) {
                function n(n, t, r, i, l, o, u, s, a, c, p, h) {
                    void 0 === n && (n = null), void 0 === t && (t = -1), void 0 === r && (r = ts.FIELD.PASTURE.SIZE), void 0 === i && (i = Ly.NONE), void 0 === l && (l = 0), void 0 === o && (o = 0), void 0 === u && (u = !0), void 0 === s && (s = 0), void 0 === a && (a = 0), void 0 === c && (c = 0), void 0 === p && (p = !1), void 0 === h && (h = 1);
                    var d = e.call(this, t, bu.PASTURE, n, ts.FIELD.PASTURE, u, !0, !0, h) || this;
                    return d.currentSize = r, d.animal = i, d.progress = l, d.produceProgress = o, d.animals = s, d.food = a, d.chores = c, d.autoButcher = p, d.servicesService && (d.modalService = n.getService(Nu.MODAL), d.weatherService = n.getService(Nu.WEATHER), d.calendarService = n.getService(Nu.CALENDAR), d.fieldService = n.getService(Nu.FIELD)), d
                }
                return i(n, e), n.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        buildingType: this.buildingType,
                        size: this.currentSize,
                        animal: this.animal,
                        progress: this.progress,
                        produceProgress: this.produceProgress,
                        working: this.working,
                        animals: this.animals,
                        food: this.food,
                        chores: this.chores,
                        autoButcher: this.autoButcher
                    }
                }, n.prototype.build = function () {
                    return this.resourcesService.getResource(vu.CHICKEN).isVisible() || (this.resourcesService.makeVisible(vu.CHICKEN), this.logService.log("New resource discovered: " + Au.prepareResourceName(vu.CHICKEN)), this.resourcesService.makeVisible(vu.COW), this.logService.log("New resource discovered: " + Au.prepareResourceName(vu.COW)), this.resourcesService.makeVisible(vu.PIG), this.logService.log("New resource discovered: " + Au.prepareResourceName(vu.PIG)), this.resourcesService.makeVisible(vu.HORSE), this.logService.log("New resource discovered: " + Au.prepareResourceName(vu.HORSE))), this.resourcesService.updateAnimals(), e.prototype.build.call(this)
                }, n.prototype.getSize = function () {
                    return this.currentSize
                }, n.prototype.getComplexity = function () {
                    return e.prototype.getComplexity.call(this) * (this.getSize() / this.settings.SIZE)
                }, n.prototype.findButcher = function () {
                    return this.fieldService.getBuildings().filter(function (e) {
                        return e.getBuildingType() === bu.BUTCHER
                    }).map(function (e) {
                        return e
                    }).sort(function (e, n) {
                        return e.getAnimalsNumber() - n.getAnimalsNumber()
                    })[0]
                }, n.prototype.butcher = function (e) {
                    void 0 === e && (e = !0);
                    var n = this.findButcher();
                    n ? n.addAnimalToButcher(this.getResourceType()) && this.decreaseAnimal(1) : e || this.modalService.info("No butcher available or their work queue is full")
                }, n.prototype.callback = function (e) {
                    var n = this;
                    if ("butcher" === e && this.animals > 0) this.butcher(!1);
                    else if ("x" === e) this.autoButcher = !this.autoButcher;
                    else if (this.animal === Ly.NONE || 0 === this.animals) this.animal = Ly[String(e.target.value)], this.progress = 0, this.resourcesService.increaseResourceLimit(this.getResourceType(), this.getMaxAnimals());
                    else {
                        this.modalService.open(mu.CONFIRM), this.modalService.setModalText("Are you sure you want to change animals?<br>All current animals will be moved to other pastures and if there is no enough space they will be lost");
                        var t = this.modalService.registerForConfirmation().subscribe(function (r) {
                            r ? (n.resourcesService.decreaseResourceLimit(n.getResourceType(), n.getMaxAnimals()), n.animal = Ly[String(e.target.value)], n.progress = 0, n.moveAnimals(n.animals), n.animals = 0, n.animal !== Ly.NONE && n.resourcesService.increaseResourceLimit(n.getResourceType(), n.getMaxAnimals())) : e.target.selectedIndex = n.animal - 1, t.unsubscribe()
                        })
                    }
                }, n.prototype.finishDemolish = function () {}, n.prototype.prepareDemolish = function () {
                    return this.stopProduction(), this.animal !== Ly.NONE && (this.moveAnimals(this.animals), this.resourcesService.decreaseResourceLimit(this.getResourceType(), this.getMaxAnimals())), !0
                }, n.prototype.getLine = function (e) {
                    switch (e) {
                        case Nm.FIRST:
                            return this.animal !== Ly.NONE ? Dm.textValue(Ly[this.animal].toLowerCase() + ": " + this.animals + "/" + this.getMaxAnimals()) : Dm.emptyValue();
                        case Nm.SECOND:
                            if (this.animals > 0 && this.food < 0) return Dm.progressValue(Math.abs(this.food), "famine");
                            var n = [];
                            return n.push(Ly[Ly.NONE]), n.push(Ly[Ly.CHICKEN]), n.push(Ly[Ly.COW]), n.push(Ly[Ly.PIG]), n.push(Ly[Ly.HORSE]), Dm.dropdownValue(n, Ly[this.animal]);
                        case Nm.THIRD:
                            return this.animals > 0 && this.findButcher() ? Dm.buttonCheckboxValue("butcher", "butcher", "auto butcher", this.autoButcher, "x") : Dm.emptyValue();
                        case Nm.FOURTH:
                            return Dm.emptyValue()
                    }
                }, n.prototype.getName = function () {
                    return this.animal === Ly.NONE ? "Pasture" : Ly[this.animal].charAt(0).toUpperCase() + Ly[this.animal].slice(1).toLowerCase() + " pasture"
                }, n.prototype.startProduction = function () {
                    return this.working = !0, !0
                }, n.prototype.stopProduction = function () {
                    this.working = !1
                }, n.prototype.tick = function (e) {
                    if (this.food < 0 && this.calendarService.getSeason() !== Eg.WINTER && (this.food = 0), this.autoButcher && this.animals > 0 && this.animals === this.getMaxAnimals() && this.butcher(), this.chores += .05 * this.animals, this.chores > 100 && (this.chores = 100), this.animals > 0 && this.calendarService.getSeason() === Eg.WINTER ? (this.food -= 5e-4 * this.getAnimalSettings().SIZE * this.animals, this.food <= -100 && (this.food = 0, this.decreaseAnimal(1))) : this.food < 0 && (this.food = 0), this.food >= 0 && this.animals > 1 && this.chores < 50 && this.animals < this.getMaxAnimals() && (this.progress < 100 ? this.progress += .1 / (10 / this.getAnimalSettings().REPRODUCTION_SPEED) * this.animals * (1 + this.effectsService.getNatureEffectsValue() / 100) : (this.progress = 0, this.increaseAnimal(1))), (this.animal === Ly.CHICKEN || this.animal === Ly.COW) && (0 === this.animals && (this.produceProgress = 0), this.produceProgress < 100 && this.chores < 50 && (this.produceProgress += .1 * this.animals * (1 + this.effectsService.getNatureEffectsValue() / 100), this.produceProgress >= 100)))
                        if (this.produceProgress = 0, this.animal === Ly.CHICKEN) {
                            if (this.servicesService.getService(Nu.ROYAL).layGoldenEgg()) return;
                            this.resourcesService.increaseResource(vu.EGG, 1)
                        } else this.animal === Ly.COW && this.resourcesService.increaseResource(vu.MILK, 1)
                }, n.prototype.work = function (e) {
                    return this.food < 100 && 0 === this.resourcesService.hasResource(vu.HAY, 1) ? (this.resourcesService.decreaseResource(vu.HAY, 1) && (this.food += 25), !0) : this.chores >= 1 && (this.chores -= 1, !0)
                }, n.prototype.fireWorker = function () {
                    return !1
                }, n.prototype.hireWorker = function () {
                    return !1
                }, n.prototype.getWorkers = function () {
                    return 0
                }, n.prototype.hasWork = function () {
                    return !!this.isWorking() && (this.food < 50 && 0 === this.resourcesService.hasResource(vu.HAY, 1) || this.chores >= 1)
                }, n.prototype.getDetails = function () {
                    return this.animal !== Ly.NONE ? "size: " + Au.round(this.getSize(), 0) + "<br>progress: " + Au.round(this.progress, 2) + "%<br>produce progress: " + Au.round(this.produceProgress, 2) + "%<br>food: " + Au.round(this.food, 2) + "<br>chores: " + Au.round(this.chores, 2) + "<br>" + e.prototype.getDetails.call(this) : e.prototype.getDetails.call(this)
                }, n.prototype.getHappinessEffect = function () {
                    return 0
                }, n.prototype.isCombinable = function () {
                    return !0
                }, n.prototype.isSplittable = function () {
                    return !0
                }, n.prototype.moveAnimals = function (e) {
                    for (var n = this, t = 0, r = this.fieldService.getBuildings().filter(function (e) {
                            return e.getBuildingType() === bu.PASTURE && e !== n && e.getAnimals() < e.getMaxAnimals()
                        }).map(function (e) {
                            return e
                        }); t < r.length; t++) {
                        for (var i = r[t]; e > 0 && i.getAnimals() < i.getMaxAnimals();) i.increaseAnimal(1), e -= 1, this.decreaseAnimal(1);
                        if (0 === e) return
                    }
                }, n.prototype.getResourceType = function () {
                    return this.animal !== Ly.NONE ? vu[Ly[this.animal]] : vu.NOTHING
                }, n.prototype.getAnimals = function () {
                    return this.animals
                }, n.prototype.getAnimalSettings = function () {
                    return rs.getResource(this.getResourceType())
                }, n.prototype.getMaxAnimals = function () {
                    return this.getResourceType() !== vu.NOTHING ? Math.floor(this.currentSize / this.getAnimalSettings().SIZE) : 0
                }, n.prototype.increaseAnimal = function (e) {
                    this.animals += e, this.resourcesService.updateAnimals()
                }, n.prototype.decreaseAnimal = function (e) {
                    this.animals -= e, this.resourcesService.updateAnimals()
                }, n.prototype.combine = function (e, n) {
                    var t = this;
                    if (this.getBuildingType() === e.getBuildingType()) {
                        this.modalService.open(mu.CONFIRM), this.modalService.setModalText(" Are you sure you want to combine " + this.getName() + " of size " + this.getSize() + " with " + e.getName() + " of size " + e.getSize() + "?<br>Resulting " + this.getName() + " of size " + (this.getSize() + e.getSize()) + " will keep animals");
                        var r = this.modalService.registerForConfirmation().subscribe(function (i) {
                            r.unsubscribe(), i ? (t.currentSize += e.getSize(), e.animal === t.animal ? t.increaseAnimal(e.getAnimals()) : e.moveAnimals(e.getAnimals()), e.animals = 0, n.finaliseCombine(!0)) : n.finaliseCombine(!1)
                        })
                    }
                }, n.prototype.split = function (e) {
                    var t = this;
                    this.modalService.open(mu.INPUT), this.modalService.setModalText("Set new pasture size (1-" + (this.getSize() - 1) + ")");
                    var r = this.modalService.registerForValueResponse().subscribe(function (i) {
                        if (r.unsubscribe(), !isNaN(i) && 0 !== i)
                            if (i >= 1 && i < t.getSize()) {
                                t.currentSize -= Number(i);
                                var l = new n(t.servicesService, t.servicesService.getService(Nu.ID).getNextId(), Number(i)).build();
                                e.finaliseSplit(l), l.animal = t.animal, t.animals > t.getMaxAnimals() && t.moveAnimals(t.animals - t.getMaxAnimals())
                            } else t.modalService.info("Invalid size value!")
                    })
                }, n
            }(Mm);
        ! function (e) {
            e.BUTCHERING = "butchering {animal}", e.WAITING_FOR_ANIMALS = "waiting for animals", e.WAITING_FOR_WAREHOUSE_SPACE = "waiting for warehouse space", e.TRANSPORTING = "transporting meat"
        }(ky || (ky = {}));
        var Fy = function (e) {
                function n(n, t, r, i, l, o, u, s) {
                    void 0 === n && (n = null), void 0 === t && (t = -1), void 0 === r && (r = ky.WAITING_FOR_ANIMALS), void 0 === i && (i = 0), void 0 === l && (l = !0), void 0 === o && (o = 0), void 0 === u && (u = []), void 0 === s && (s = 1);
                    var a = e.call(this, t, bu.BUTCHER, n, ts.FIELD.BUTCHER, l, !0, !0, s) || this;
                    return a.status = r, a.progress = i, a.outputStorage = o, a.animals = u, a
                }
                return i(n, e), n.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        buildingType: this.buildingType,
                        status: this.status,
                        progress: this.progress,
                        working: this.working,
                        outputStorage: this.outputStorage,
                        animals: this.animals
                    }
                }, n.prototype.getLine = function (e) {
                    switch (e) {
                        case Nm.FIRST:
                            return Dm.textValue(this.animals.length > 0 ? this.status.replace("{animal}", Au.prepareResourceName(this.animals[0])) : this.status);
                        case Nm.SECOND:
                            return Dm.progressValue(this.progress);
                        case Nm.THIRD:
                            return Dm.textValue("queue: " + this.animals.length + "/10");
                        case Nm.FOURTH:
                            return Dm.emptyValue()
                    }
                }, n.prototype.getAnimalsNumber = function () {
                    return this.animals.length
                }, n.prototype.addAnimalToButcher = function (e) {
                    return this.animals.length < 10 && (this.animals.push(e), !0)
                }, n.prototype.tick = function (e) {
                    if (this.working)
                        if (this.animals.length > 0 && 0 === this.outputStorage) this.status = ky.BUTCHERING, this.progress < 100 ? (this.progress += this.getPower() / rs.getResource(this.animals[0]).BUTCHERING_DIFFICULTY, this.progress > 100 && (this.progress = 100)) : (this.status = ky.TRANSPORTING, this.progress = 0, this.outputStorage = rs.getResource(this.animals.shift()).MEAT, this.resourcesService.increaseResource(vu.MEAT, this.outputStorage) || (this.status = ky.WAITING_FOR_WAREHOUSE_SPACE));
                        else if (0 !== this.outputStorage) {
                        var n = this.resourcesService.getResource(vu.MEAT).getFreeSpace();
                        n >= this.outputStorage ? this.resourcesService.increaseResource(vu.MEAT, this.outputStorage) && (this.outputStorage = 0, this.status = ky.WAITING_FOR_ANIMALS) : this.resourcesService.increaseResource(vu.MEAT, n) && (this.outputStorage -= n)
                    } else 0 === this.animals.length && (this.status = ky.WAITING_FOR_ANIMALS)
                }, n
            }(Mm),
            Uy = function (e) {
                function n(n, t, r, i, l, o, u, s, a) {
                    return void 0 === n && (n = null), void 0 === t && (t = -1), void 0 === r && (r = 0), void 0 === i && (i = Bm.FETCHING_INPUT), void 0 === l && (l = []), void 0 === o && (o = []), void 0 === u && (u = !1), void 0 === s && (s = null), void 0 === a && (a = 1), e.call(this, n, t, bu.MINT, ts.MOUNTAINS.MINT, i, r, l, o, u, s, a) || this
                }
                return i(n, e), n
            }(Ym),
            Hy = function (e) {
                return e[e.CONSTRUCTION = 0] = "CONSTRUCTION", e[e.BUILT = 1] = "BUILT", e[e.ABDICATED = 2] = "ABDICATED", e[e.USED = 3] = "USED", e
            }({}),
            Gy = function (e) {
                function n(n, t, r, i, l, o, u, s, a, c) {
                    var p = e.call(this, n, t, r, i, c > 0, !1, !0, 1) || this;
                    return p.progress = l, p.maxProgress = o, p.stage = u, p.state = s, p.year = a, p.workers = c, p.maxWorkers = 5, p.prepareIcons(), p
                }
                return i(n, e), n.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        buildingType: this.buildingType,
                        progress: this.progress,
                        maxProgress: this.maxProgress,
                        stage: this.stage,
                        state: this.state,
                        year: this.year,
                        workers: this.workers
                    }
                }, n.prototype.prepareIcons = function () {
                    var e = this;
                    this.iconsValue = [], this.settings.STAGES[this.stage] && this.settings.STAGES[this.stage].cost.forEach(function (n) {
                        return e.iconsValue.push({
                            name: vu[n.resource],
                            path: "resources",
                            prefix: n.amount,
                            suffix: ""
                        })
                    })
                }, n.prototype.callback = function (e) {
                    var n = this;
                    if ("add" === e) {
                        var t = this.settings.STAGES[this.stage],
                            r = new Map;
                        t.cost.forEach(function (e) {
                            return r.set(e.resource, e.amount)
                        }), this.resourcesService.decreaseResources(r, !0) && (this.stage += 1, this.maxProgress += t.progress, this.prepareIcons())
                    } else if ("abdicate" === e) {
                        this.modalService.open(mu.CONFIRM), this.modalService.setModalText("Are you sure you want to soft reset your progress? <br>You will start from the beginning and all progress except for</br>royal points, permanent royal upgrades and Wonders will be deleted.");
                        var i = this.modalService.registerForConfirmation().subscribe(function (e) {
                            i.unsubscribe(), e && (n.state = Hy.ABDICATED, n.servicesService.getService(Nu.GAME).incrementAbdicationLevel(), n.servicesService.getService(Nu.SERIALIZER).softReset())
                        })
                    } else "hire" === e ? this.hireWorker() : "fire" === e && this.fireWorker()
                }, n.prototype.getName = function () {
                    return this.progress >= 100 ? e.prototype.getName.call(this) : e.prototype.getName.call(this) + " construction"
                }, n.prototype.getLine = function (e) {
                    switch (e) {
                        case Nm.FIRST:
                            return this.state === Hy.CONSTRUCTION ? Dm.progressValue(this.progress, Au.round(this.progress, 2) + "% / " + this.maxProgress + "%") : Dm.textValue("built in year " + this.year);
                        case Nm.SECOND:
                            return this.state === Hy.CONSTRUCTION ? Dm.iconValue(this.iconsValue) : this.state === Hy.BUILT ? Dm.buttonValue(this.getAbdicationText(), "abdicate") : Dm.emptyValue();
                        case Nm.THIRD:
                            return this.maxProgress < 100 ? Dm.buttonValue("add materials", "add") : Dm.emptyValue();
                        case Nm.FOURTH:
                            return this.state === Hy.CONSTRUCTION ? Dm.twoButtonValue("hire worker", "hire", this.workers + "/" + this.maxWorkers, "fire worker", "fire") : Dm.emptyValue()
                    }
                }, n.prototype.getAbdicationText = function () {
                    return "abdicate"
                }, n.prototype.tick = function (e) {
                    this.isWorking() && (this.progress >= 100 && (this.stopProduction(), this.addPermanentEffect(), this.progress = 100, this.state = Hy.BUILT, this.year = this.servicesService.getService(Nu.CALENDAR).getYear()), this.progress < this.maxProgress && (this.progress += .001 * this.getPower() * this.workers))
                }, n.prototype.getEffects = function () {
                    return this.state !== Hy.CONSTRUCTION ? this.effectsService.getBuildingEffectsValue(bu.CONSTRUCTION, !1) : e.prototype.getEffects.call(this)
                }, n.prototype.getPermanentEffects = function () {
                    return this.state !== Hy.CONSTRUCTION ? this.effectsService.getBuildingEffectsValue(bu.CONSTRUCTION, !0) : e.prototype.getPermanentEffects.call(this)
                }, n.prototype.getHappinessEffect = function () {
                    return this.state !== Hy.CONSTRUCTION ? 0 : e.prototype.getHappinessEffect.call(this)
                }, n.prototype.isStoppable = function () {
                    return this.state === Hy.CONSTRUCTION
                }, n.prototype.isFinished = function () {
                    return this.state !== Hy.CONSTRUCTION
                }, n.prototype.fireWorker = function () {
                    return this.workers > 0 && (this.resourcesService.fireWorker(1), this.workers -= 1, !0)
                }, n.prototype.hireWorker = function () {
                    return !!(this.workers < this.maxWorkers && this.resourcesService.hireWorker()) && (this.workers += 1, !0)
                }, n.prototype.getWorkers = function () {
                    return this.workers
                }, n.prototype.isWorking = function () {
                    return this.workers > 0
                }, n.prototype.startProduction = function () {
                    if (0 === this.workers) {
                        for (; this.workers < this.maxWorkers && this.resourcesService.hireWorker();) this.workers += 1;
                        if (this.workers > 0) return !0
                    }
                    return !1
                }, n.prototype.stopProduction = function () {
                    this.workers > 0 && (this.resourcesService.fireWorker(this.workers), this.workers = 0)
                }, n.prototype.addPermanentEffect = function () {
                    this.addBuildingEffects(), this.addArmyEffects()
                }, n.prototype.addBuildingEffects = function () {
                    var e = this;
                    if (this.settings.BUILDING_EFFECTS && this.settings.BUILDING_EFFECTS.length > 0) {
                        var n = this.servicesService.getService(Nu.EFFECTS);
                        this.settings.BUILDING_EFFECTS.forEach(function (t) {
                            n.addBuildingEffect(new Du(e.getName(), t.building, Number(t.value), Hu.WONDER))
                        })
                    }
                }, n.prototype.addArmyEffects = function () {
                    var e = this;
                    if (this.settings.ARMY_EFFECTS && this.settings.ARMY_EFFECTS.length > 0) {
                        var n = this.servicesService.getService(Nu.EFFECTS);
                        this.settings.ARMY_EFFECTS.forEach(function (t) {
                            n.addArmyEffect(new Lu(e.getName(), t.troop, Number(t.value), Hu.WONDER))
                        })
                    }
                }, n.prototype.verifyWonderEffects = function () {
                    this.isFinished() && (this.settings.BUILDING_EFFECTS && this.settings.BUILDING_EFFECTS.length > 0 && (this.servicesService.getService(Nu.EFFECTS).hasWonderEffects(this.getName()) || this.addBuildingEffects()), this.settings.ARMY_EFFECTS && this.settings.ARMY_EFFECTS.length > 0 && (this.servicesService.getService(Nu.EFFECTS).hasWonderEffects(this.getName()) || this.addArmyEffects()))
                }, n
            }(Mm),
            By = function (e) {
                function n(n, t, r, i, l, o, u, s) {
                    return void 0 === n && (n = null), void 0 === t && (t = -1), void 0 === r && (r = 0), void 0 === i && (i = 0), void 0 === l && (l = 0), void 0 === o && (o = Hy.CONSTRUCTION), void 0 === u && (u = -1), void 0 === s && (s = 0), e.call(this, t, bu.STONEHENGE, n, ts.PLATEAU.STONEHENGE, r, i, l, o, u, s) || this
                }
                return i(n, e), n.prototype.tick = function (n) {
                    if (e.prototype.tick.call(this, n), this.state === Hy.ABDICATED) {
                        this.state = Hy.USED, this.servicesService.getService(Nu.GAME).enable(Eu.PLATEAU), this.servicesService.getService(Nu.ROYAL).increaseRoyalPoints(this.settings.RP), this.logService.log("Your abdication granted you " + this.settings.RP + " royal points");
                        var t = this.servicesService.getService(Nu.KONGREGATE);
                        t.isAvailable() && t.submitStat("Stonehenge", !0)
                    }
                }, n
            }(Gy),
            Vy = function (e) {
                function n(n, t, r, i) {
                    void 0 === n && (n = null), void 0 === t && (t = -1), void 0 === r && (r = 0), void 0 === i && (i = 1);
                    var l = e.call(this, t, bu.MARKETPLACE, n, ts.VILLAGE.MARKETPLACE, !0, !0, !1, i) || this;
                    return l.progress = r, l.callMerchantPrice = [{
                        name: "coins",
                        path: "resources",
                        prefix: "",
                        suffix: "25"
                    }], l
                }
                return i(n, e), n.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        buildingType: this.buildingType,
                        progress: this.progress
                    }
                }, n.prototype.build = function () {
                    return this.servicesService.getService(Nu.GAME).enable(Eu.MARKET), e.prototype.build.call(this)
                }, n.prototype.callback = function (e) {
                    "bribe" === e && (this.resourcesService.decreaseResource(vu.COINS, 25, !0) ? 1 === ku.randomBetween(1, 2) && (this.progress += 50, this.progress >= 100 && (this.progress = 0, this.servicesService.getService(Nu.MARKET).callMerchant())) : this.modalService.info("Not enough coins for a bribe"))
                }, n.prototype.getLine = function (e) {
                    switch (e) {
                        case Nm.FIRST:
                            return Dm.progressValue(this.progress, "merchant arrival");
                        case Nm.SECOND:
                            return Dm.emptyValue();
                        case Nm.THIRD:
                            return Dm.iconValue(this.callMerchantPrice);
                        case Nm.FOURTH:
                            return Dm.buttonValue("bribe merchant (50% chance)", "bribe")
                    }
                }, n.prototype.tick = function (e) {
                    1 === ku.randomBetween(1, 10) && (this.progress += this.getPower()), this.progress >= 100 && (this.servicesService.getService(Nu.MARKET).callMerchant(), this.progress = 0)
                }, n
            }(Mm),
            Wy = function (e) {
                function n(n, t, r) {
                    void 0 === n && (n = null), void 0 === t && (t = -1), void 0 === r && (r = 1);
                    var i = e.call(this, t, bu.SMITHY, n, ts.MOUNTAINS.SMITHY, !1, !0, !1, r) || this;
                    return n && (i.gameService = n.getService(Nu.GAME)), i
                }
                return i(n, e), n.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        buildingType: this.buildingType
                    }
                }, n.prototype.build = function () {
                    var e = this;
                    return this.settings.RECIPES.forEach(function (n) {
                        e.gameService.isEnabled(n.prerequisite) && e.servicesService.getService(Nu.RECIPE).enable(n.recipe)
                    }), this.gameService.enable(Eu.R_SMITHY), this
                }, n.prototype.prepareDemolish = function () {
                    var e = this;
                    return this.settings.RECIPES.forEach(function (n) {
                        return e.servicesService.getService(Nu.RECIPE).disable(n.recipe)
                    }), this.gameService.disable(Eu.R_SMITHY), this.servicesService.getService(Nu.CRAFTING).filterQueue(this.settings.RECIPES), this.servicesService.getService(Nu.VILLAGE).buildings.filter(function (e) {
                        return e.getBuildingType() === bu.WORKSHOP
                    }).map(function (e) {
                        return e
                    }).forEach(function (n) {
                        e.settings.RECIPES.includes(n.getRecipe().id) && n.cancelCrafting()
                    }), !0
                }, n
            }(Mm),
            jy = function (e) {
                function n(n, t, r, i, l) {
                    void 0 === n && (n = null), void 0 === t && (t = -1), void 0 === r && (r = !1), void 0 === i && (i = 0), void 0 === l && (l = 1);
                    var o = e.call(this, t, bu.CHURCH, n, ts.VILLAGE.CHURCH, r, !0, !0, l) || this;
                    return o.progress = i, o.servicesService && (o.religionService = n.getService(Nu.RELIGION)), o
                }
                return i(n, e), n.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        buildingType: this.buildingType,
                        working: this.working,
                        progress: this.progress
                    }
                }, n.prototype.build = function () {
                    return this.religionService.increaseFaithCap(50), this.servicesService.getService(Nu.GAME).enable(Eu.RELIGION), this
                }, n.prototype.getLine = function (e) {
                    switch (e) {
                        case Nm.FIRST:
                        case Nm.SECOND:
                            return Dm.emptyValue();
                        case Nm.THIRD:
                            return Dm.progressValue(this.progress, "prayers");
                        case Nm.FOURTH:
                            return Dm.emptyValue()
                    }
                }, n.prototype.prepareDemolish = function () {
                    return this.religionService.decreaseFaithCap(50), !0
                }, n.prototype.tick = function (e) {
                    if (this.working) {
                        var n = this.servicesService.getService(Nu.VILLAGE).getPopulation();
                        this.progress += .1 * n * this.getPower(), this.progress > 100 && (this.progress = 0, this.religionService.increaseFaith(1))
                    }
                }, n
            }(Mm),
            Yy = function (e) {
                function n(n, t, r, i, l, o, u, s) {
                    return void 0 === n && (n = null), void 0 === t && (t = -1), void 0 === r && (r = 0), void 0 === i && (i = 0), void 0 === l && (l = 0), void 0 === o && (o = Hy.CONSTRUCTION), void 0 === u && (u = -1), void 0 === s && (s = 0), e.call(this, t, bu.PYRAMID, n, ts.PLATEAU.PYRAMID, r, i, l, o, u, s) || this
                }
                return i(n, e), n.prototype.tick = function (n) {
                    if (e.prototype.tick.call(this, n), this.state === Hy.ABDICATED) {
                        this.state = Hy.USED, this.servicesService.getService(Nu.GAME).enable(Eu.PLATEAU), this.servicesService.getService(Nu.ROYAL).increaseRoyalPoints(this.settings.RP), this.logService.log("Your abdication granted you " + this.settings.RP + " royal points");
                        var t = this.servicesService.getService(Nu.KONGREGATE);
                        t.isAvailable() && t.submitStat("Pyramid", !0)
                    }
                }, n
            }(Gy),
            zy = function (e) {
                function n(n, t, r, i, l, o, u, s) {
                    return void 0 === n && (n = null), void 0 === t && (t = -1), void 0 === r && (r = 0), void 0 === i && (i = 0), void 0 === l && (l = 0), void 0 === o && (o = Hy.CONSTRUCTION), void 0 === u && (u = -1), void 0 === s && (s = 0), e.call(this, t, bu.HANGING_GARDEN, n, ts.PLATEAU.HANGING_GARDEN, r, i, l, o, u, s) || this
                }
                return i(n, e), n.prototype.tick = function (n) {
                    if (e.prototype.tick.call(this, n), this.state === Hy.ABDICATED) {
                        this.state = Hy.USED, this.servicesService.getService(Nu.GAME).enable(Eu.PLATEAU), this.servicesService.getService(Nu.ROYAL).increaseRoyalPoints(this.settings.RP), this.logService.log("Your abdication granted you " + this.settings.RP + " royal points");
                        var t = this.servicesService.getService(Nu.KONGREGATE);
                        t.isAvailable() && t.submitStat("Hanging Garden", !0)
                    }
                }, n
            }(Gy),
            Ky = function (e) {
                function n(n, t, r, i, l, o, u, s) {
                    return void 0 === n && (n = null), void 0 === t && (t = -1), void 0 === r && (r = 0), void 0 === i && (i = 0), void 0 === l && (l = 0), void 0 === o && (o = Hy.CONSTRUCTION), void 0 === u && (u = -1), void 0 === s && (s = 0), e.call(this, t, bu.COLOSSUS, n, ts.PLATEAU.COLOSSUS, r, i, l, o, u, s) || this
                }
                return i(n, e), n.prototype.tick = function (n) {
                    if (e.prototype.tick.call(this, n), this.state === Hy.ABDICATED) {
                        this.state = Hy.USED, this.servicesService.getService(Nu.GAME).enable(Eu.PLATEAU), this.servicesService.getService(Nu.ROYAL).increaseRoyalPoints(this.settings.RP), this.logService.log("Your abdication granted you " + this.settings.RP + " royal points");
                        var t = this.servicesService.getService(Nu.KONGREGATE);
                        t.isAvailable() && t.submitStat("Colossus", !0)
                    }
                }, n
            }(Gy),
            qy = function (e) {
                function n(n, t, r, i, l, o, u, s) {
                    return void 0 === n && (n = null), void 0 === t && (t = -1), void 0 === r && (r = 0), void 0 === i && (i = 0), void 0 === l && (l = 0), void 0 === o && (o = Hy.CONSTRUCTION), void 0 === u && (u = -1), void 0 === s && (s = 0), e.call(this, t, bu.ASCENSION_TEMPLE, n, ts.PLATEAU.ASCENSION_TEMPLE, r, i, l, o, u, s) || this
                }
                return i(n, e), n.prototype.callback = function (n) {
                    var t = this;
                    if ("abdicate" === n) {
                        this.modalService.open(mu.CONFIRM), this.modalService.setModalText("Are you sure you want to ascend? <br>You will start from the beginning and all progress except for</br>royal points and permanent royal upgrades will be deleted.");
                        var r = this.modalService.registerForConfirmation().subscribe(function (e) {
                            if (r.unsubscribe(), e) {
                                t.state = Hy.ABDICATED, t.servicesService.getService(Nu.ROYAL).increaseRoyalPoints(t.settings.RP), t.logService.log("Your ascension granted you " + t.settings.RP + " royal points");
                                var n = t.servicesService.getService(Nu.KONGREGATE);
                                n.isAvailable() && n.submitStat("Ascension Temple", !0), t.servicesService.getService(Nu.SERIALIZER).ascensionReset()
                            }
                        })
                    } else e.prototype.callback.call(this, n)
                }, n.prototype.getAbdicationText = function () {
                    return "ascend"
                }, n
            }(Gy),
            $y = function (e) {
                function n(n, t, r, i, l, o, u, s) {
                    return void 0 === n && (n = null), void 0 === t && (t = -1), void 0 === r && (r = 0), void 0 === i && (i = 0), void 0 === l && (l = 0), void 0 === o && (o = Hy.CONSTRUCTION), void 0 === u && (u = -1), void 0 === s && (s = 0), e.call(this, t, bu.UNDERGROUND_CITY, n, ts.PLATEAU.UNDERGROUND_CITY, r, i, l, o, u, s) || this
                }
                return i(n, e), n.prototype.tick = function (n) {
                    if (e.prototype.tick.call(this, n), this.state === Hy.ABDICATED) {
                        this.state = Hy.USED, this.servicesService.getService(Nu.GAME).enable(Eu.PLATEAU), this.servicesService.getService(Nu.ROYAL).increaseRoyalPoints(this.settings.RP), this.logService.log("Your abdication granted you " + this.settings.RP + " royal points");
                        var t = this.servicesService.getService(Nu.KONGREGATE);
                        t.isAvailable() && t.submitStat("Underground City", !0)
                    }
                }, n
            }(Gy),
            Qy = function (e) {
                function n(n, t, r, i, l, o, u, s) {
                    return void 0 === n && (n = null), void 0 === t && (t = -1), void 0 === r && (r = 0), void 0 === i && (i = 0), void 0 === l && (l = 0), void 0 === o && (o = Hy.CONSTRUCTION), void 0 === u && (u = -1), void 0 === s && (s = 0), e.call(this, t, bu.GREAT_LIGHTHOUSE, n, ts.PLATEAU.GREAT_LIGHTHOUSE, r, i, l, o, u, s) || this
                }
                return i(n, e), n.prototype.tick = function (n) {
                    if (e.prototype.tick.call(this, n), this.state === Hy.ABDICATED) {
                        this.state = Hy.USED, this.servicesService.getService(Nu.GAME).enable(Eu.PLATEAU), this.servicesService.getService(Nu.ROYAL).increaseRoyalPoints(this.settings.RP), this.logService.log("Your abdication granted you " + this.settings.RP + " royal points");
                        var t = this.servicesService.getService(Nu.KONGREGATE);
                        t.isAvailable() && t.submitStat("Great Lighthouse", !0)
                    }
                }, n
            }(Gy),
            Zy = function (e) {
                function n(n, t, r, i, l, o, u, s) {
                    return void 0 === n && (n = null), void 0 === t && (t = -1), void 0 === r && (r = 0), void 0 === i && (i = 0), void 0 === l && (l = 0), void 0 === o && (o = Hy.CONSTRUCTION), void 0 === u && (u = -1), void 0 === s && (s = 0), e.call(this, t, bu.SACRED_GROVE, n, ts.PLATEAU.SACRED_GROVE, r, i, l, o, u, s) || this
                }
                return i(n, e), n.prototype.tick = function (n) {
                    if (e.prototype.tick.call(this, n), this.state === Hy.ABDICATED) {
                        this.state = Hy.USED, this.servicesService.getService(Nu.GAME).enable(Eu.PLATEAU), this.servicesService.getService(Nu.ROYAL).increaseRoyalPoints(this.settings.RP), this.logService.log("Your abdication granted you " + this.settings.RP + " royal points");
                        var t = this.servicesService.getService(Nu.KONGREGATE);
                        t.isAvailable() && t.submitStat("Sacred Grove", !0)
                    }
                }, n
            }(Gy),
            Xy = function (e) {
                function n(n, t, r) {
                    void 0 === n && (n = null), void 0 === t && (t = -1), void 0 === r && (r = 1);
                    var i = e.call(this, t, bu.STASH, n, ts.FORT.STASH, !1, !0, !1, r) || this;
                    return i.servicesService && (i.armyService = n.getService(Nu.ARMY)), i
                }
                return i(n, e), n.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        buildingType: this.buildingType
                    }
                }, n.prototype.build = function () {
                    return this.armyService.increaseStash(ts.FORT.STASH.SIZE), this
                }, n.prototype.prepareDemolish = function () {
                    return this.armyService.decreaseStash(ts.FORT.STASH.SIZE), !0
                }, n.prototype.getLine = function (e) {
                    switch (e) {
                        case Nm.FIRST:
                            return Dm.textValue("stash size: " + ts.FORT.STASH.SIZE);
                        case Nm.SECOND:
                        case Nm.THIRD:
                        case Nm.FOURTH:
                            return Dm.emptyValue()
                    }
                }, n
            }(Mm),
            Jy = function () {
                function e(e) {
                    this.servicesService = e, this.nextId = 1, e.addService(Nu.ID, this)
                }
                return e.prototype.getNextId = function () {
                    var e = this.nextId;
                    return this.nextId += 1, e
                }, e.prototype.load = function (e) {
                    this.nextId = e.nextId
                }, e.prototype.reset = function (e, n) {
                    e && (this.nextId = 1)
                }, e.prototype.save = function () {
                    return {
                        nextId: this.nextId
                    }
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(vg))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            eS = function () {
                function e(e, n) {
                    this.servicesService = e, this.idService = n, e.addService(Nu.BUILDING_FACTORY, this)
                }
                return e.prototype.loadBuilding = function (e) {
                    return e.buildingType === bu.HUT ? new xm(this.servicesService, e.id, e.occupants, e.progress, e.food, e.fuel, e.clothes, e.level) : e.buildingType === bu.HOUSE ? new Fm(this.servicesService, e.id, e.occupants, e.progress, e.food, e.fuel, e.clothes, e.level) : e.buildingType === bu.BAKERY ? new gy(this.servicesService, e.id, e.progress, e.status, e.inputStorage, e.outputStorage, e.working, e.workSettings, e.level) : e.buildingType === bu.TAILOR ? new Ty(this.servicesService, e.id, e.progress, e.status, e.inputStorage, e.outputStorage, e.working, e.workSettings, e.level) : e.buildingType === bu.WORKSHOP ? new ny(this.servicesService, e.id, e.progress, e.status, e.mode, e.working, e.recipe, e.level) : e.buildingType === bu.WAREHOUSE ? new ty(this.servicesService, e.id, e.resource, e.level) : e.buildingType === bu.MARKETPLACE ? new Vy(this.servicesService, e.id, e.progress, e.level) : e.buildingType === bu.TAVERN ? new wy(this.servicesService, e.id, e.progress, e.beer, e.wine, e.working, e.level) : e.buildingType === bu.SHRINE ? new oy(this.servicesService, e.id, e.progress, e.level) : e.buildingType === bu.CHURCH ? new jy(this.servicesService, e.id, e.working, e.progress, e.level) : e.buildingType === bu.BARRACKS ? new yy(this.servicesService, e.id, e.barracksSize, e.level) : e.buildingType === bu.TRAINING_SQUARE ? new Ey(this.servicesService, e.id, e.progress, e.working, e.status, e.level) : e.buildingType === bu.STOCKADE ? new Oy(this.servicesService, e.id, e.health, e.durability, e.progress, e.working, e.level) : e.buildingType === bu.WOODEN_TOWER ? new _y(this.servicesService, e.id, e.health, e.durability, e.progress, e.working, e.level) : e.buildingType === bu.STONE_TOWER ? new Iy(this.servicesService, e.id, e.health, e.durability, e.progress, e.working, e.level) : e.buildingType === bu.STASH ? new Xy(this.servicesService, e.id, e.level) : e.buildingType === bu.LOGGERS_HUT ? new Hm(this.servicesService, e.id, e.progress, e.localStorage, e.status, e.working, e.level) : e.buildingType === bu.GATHERER ? new Qm(this.servicesService, e.id, e.progress, e.status, e.working, e.mode, e.storage, e.level) : e.buildingType === bu.HUNTER_LODGE ? new ly(this.servicesService, e.id, e.progress, e.status, e.mode, e.working, e.storage, e.storage2, e.animal, e.level) : e.buildingType === bu.TANNERY ? new by(this.servicesService, e.id, e.progress, e.status, e.inputStorage, e.outputStorage, e.working, e.workSettings, e.level) : e.buildingType === bu.FORESTER ? new Vm(this.servicesService, e.id, e.progress, e.localStorage, e.status, e.effectiveness, e.working, e.level) : e.buildingType === bu.SAWMILL ? new zm(this.servicesService, e.id, e.progress, e.status, e.inputStorage, e.outputStorage, e.working, e.workSettings, e.level) : e.buildingType === bu.FARM ? new ay(this.servicesService, e.id, e.workers, e.maxWorkers, e.level) : e.buildingType === bu.WINDMILL ? new fy(this.servicesService, e.id, e.progress, e.status, e.inputStorage, e.outputStorage, e.working, e.workSettings, e.level) : e.buildingType === bu.BUTCHER ? new Fy(this.servicesService, e.id, e.status, e.progress, e.working, e.outputStorage, e.animals, e.level) : e.buildingType === bu.COTTON_MILL ? new Ry(this.servicesService, e.id, e.progress, e.status, e.inputStorage, e.outputStorage, e.working, e.workSettings, e.level) : e.buildingType === bu.BREWERY ? new Cy(this.servicesService, e.id, e.progress, e.status, e.inputStorage, e.outputStorage, e.working, e.workSettings, e.level) : e.buildingType === bu.WINERY ? new Ay(this.servicesService, e.id, e.progress, e.status, e.inputStorage, e.outputStorage, e.working, e.workSettings, e.level) : e.buildingType === bu.FIELD ? new py(this.servicesService, e.id, e.size, e.crop, e.status, e.progress, e.working, e.growth, e.level) : e.buildingType === bu.ORCHARD ? new dy(this.servicesService, e.id, e.size, e.crop, e.status, e.progress, e.working, e.growth, e.level) : e.buildingType === bu.PASTURE ? new xy(this.servicesService, e.id, e.size, e.animal, e.progress, e.produceProgress, e.working, e.animals, e.food, e.chores, e.autoButcher, e.level) : e.buildingType === bu.QUARRY ? new Xm(this.servicesService, e.id, e.progress, e.status, e.working, e.storage, e.resources, e.level) : e.buildingType === bu.GEOLOGIST ? new Ny(this.servicesService, e.id, e.progress, e.working, e.level) : e.buildingType === bu.STONEMASON ? new Py(this.servicesService, e.id, e.progress, e.status, e.inputStorage, e.outputStorage, e.working, e.workSettings, e.level) : e.buildingType === bu.MINT ? new Uy(this.servicesService, e.id, e.progress, e.status, e.inputStorage, e.outputStorage, e.working, e.workSettings, e.level) : e.buildingType === bu.SMITHY ? new Wy(this.servicesService, e.id, e.level) : e.buildingType === bu.PIT_MINE ? new My(this.servicesService, e.id, e.progress, e.status, e.working, e.storage, e.resources, e.ore, e.level) : e.buildingType === bu.STONEHENGE ? new By(this.servicesService, e.id, e.progress, e.maxProgress, e.stage, e.state, e.year, e.workers) : e.buildingType === bu.PYRAMID ? new Yy(this.servicesService, e.id, e.progress, e.maxProgress, e.stage, e.state, e.year, e.workers) : e.buildingType === bu.HANGING_GARDEN ? new zy(this.servicesService, e.id, e.progress, e.maxProgress, e.stage, e.state, e.year, e.workers) : e.buildingType === bu.COLOSSUS ? new Ky(this.servicesService, e.id, e.progress, e.maxProgress, e.stage, e.state, e.year, e.workers) : e.buildingType === bu.UNDERGROUND_CITY ? new $y(this.servicesService, e.id, e.progress, e.maxProgress, e.stage, e.state, e.year, e.workers) : e.buildingType === bu.GREAT_LIGHTHOUSE ? new Qy(this.servicesService, e.id, e.progress, e.maxProgress, e.stage, e.state, e.year, e.workers) : e.buildingType === bu.SACRED_GROVE ? new Zy(this.servicesService, e.id, e.progress, e.maxProgress, e.stage, e.state, e.year, e.workers) : e.buildingType === bu.ASCENSION_TEMPLE ? new qy(this.servicesService, e.id, e.progress, e.maxProgress, e.stage, e.state, e.year, e.workers) : e.buildingType === bu.FISHERS_HUT ? new my(this.servicesService, e.id, e.progress, e.status, e.working, e.level) : e.buildingType === bu.SCHOOL_OF_FISH ? new uy(this.servicesService, e.id, e.fish, void 0 !== e.food ? e.food : 0) : e.buildingType === bu.SHARKS ? new Dy(this.servicesService, e.id, e.sharks) : e.buildingType === bu.CONSTRUCTION ? new Gm(this.servicesService, e.id, e.region, e.constructing, e.buildingComplexity, e.buildingSize, e.upgradeLevel, e.progress, e.working) : e.buildingType === bu.DECONSTRUCTION ? new Km(this.servicesService, e.id, e.region, e.deconstructing, e.buildingComplexity, e.buildingSize, e.progress, e.working) : void console.error("Couldn't load building of type [" + e.buildingType + "]")
                }, e.prototype.createBuilding = function (e, n) {
                    return void 0 === n && (n = this.idService.getNextId()), this.createBuildingShell(e, n).build()
                }, e.prototype.createBuildingShell = function (e, n) {
                    switch (void 0 === n && (n = this.idService.getNextId()), e) {
                        case bu.HUT:
                            return new xm(this.servicesService);
                        case bu.HOUSE:
                            return new Fm(this.servicesService, n);
                        case bu.BAKERY:
                            return new gy(this.servicesService, n);
                        case bu.TAILOR:
                            return new Ty(this.servicesService, n);
                        case bu.WORKSHOP:
                            return new ny(this.servicesService, n);
                        case bu.WAREHOUSE:
                            return new ty(this.servicesService, n);
                        case bu.MARKETPLACE:
                            return new Vy(this.servicesService, n);
                        case bu.TAVERN:
                            return new wy(this.servicesService, n);
                        case bu.SHRINE:
                            return new oy(this.servicesService, n);
                        case bu.CHURCH:
                            return new jy(this.servicesService, n);
                        case bu.BARRACKS:
                            return new yy(this.servicesService, n);
                        case bu.TRAINING_SQUARE:
                            return new Ey(this.servicesService, n);
                        case bu.STOCKADE:
                            return new Oy(this.servicesService, n);
                        case bu.WOODEN_TOWER:
                            return new _y(this.servicesService, n);
                        case bu.STONE_TOWER:
                            return new Iy(this.servicesService, n);
                        case bu.STASH:
                            return new Xy(this.servicesService, n);
                        case bu.LOGGERS_HUT:
                            return new Hm(this.servicesService, n);
                        case bu.GATHERER:
                            return new Qm(this.servicesService, n);
                        case bu.HUNTER_LODGE:
                            return new ly(this.servicesService, n);
                        case bu.TANNERY:
                            return new by(this.servicesService, n);
                        case bu.FORESTER:
                            return new Vm(this.servicesService, n);
                        case bu.SAWMILL:
                            return new zm(this.servicesService, n);
                        case bu.FARM:
                            return new ay(this.servicesService, n);
                        case bu.WINDMILL:
                            return new fy(this.servicesService, n);
                        case bu.BUTCHER:
                            return new Fy(this.servicesService, n);
                        case bu.COTTON_MILL:
                            return new Ry(this.servicesService, n);
                        case bu.BREWERY:
                            return new Cy(this.servicesService, n);
                        case bu.WINERY:
                            return new Ay(this.servicesService, n);
                        case bu.FIELD:
                            return new py(this.servicesService, n);
                        case bu.ORCHARD:
                            return new dy(this.servicesService, n);
                        case bu.PASTURE:
                            return new xy(this.servicesService, n);
                        case bu.QUARRY:
                            return new Xm(this.servicesService, n);
                        case bu.GEOLOGIST:
                            return new Ny(this.servicesService, n);
                        case bu.STONEMASON:
                            return new Py(this.servicesService, n);
                        case bu.MINT:
                            return new Uy(this.servicesService, n);
                        case bu.SMITHY:
                            return new Wy(this.servicesService, n);
                        case bu.PIT_MINE:
                            return new My(this.servicesService, n);
                        case bu.STONEHENGE:
                            return new By(this.servicesService, n);
                        case bu.PYRAMID:
                            return new Yy(this.servicesService, n);
                        case bu.HANGING_GARDEN:
                            return new zy(this.servicesService, n);
                        case bu.COLOSSUS:
                            return new Ky(this.servicesService, n);
                        case bu.UNDERGROUND_CITY:
                            return new $y(this.servicesService, n);
                        case bu.GREAT_LIGHTHOUSE:
                            return new Qy(this.servicesService, n);
                        case bu.SACRED_GROVE:
                            return new Zy(this.servicesService, n);
                        case bu.ASCENSION_TEMPLE:
                            return new qy(this.servicesService, n);
                        case bu.FISHERS_HUT:
                            return new my(this.servicesService, n);
                        case bu.SCHOOL_OF_FISH:
                            return new uy(this.servicesService, n);
                        case bu.SHARKS:
                            return new Dy(this.servicesService, n);
                        case bu.CONSTRUCTION:
                            console.error("Building factory cannot create construction sites!");
                            break;
                        case bu.DECONSTRUCTION:
                            console.error("Building factory cannot create deconstruction sites!");
                            break;
                        default:
                            console.error("Couldn't construct building of type [" + bu[e] + "]!")
                    }
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(vg), ze(Jy))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            nS = function () {
                function e(e, n, t) {
                    this.servicesService = e, this.effectsService = n, this.logService = t, this.land = ns.START_LAND, this.forest = ns.START_FOREST, this.mountains = ns.START_MOUNTAINS, this.takenLand = 0, this.ores = [[vu.COAL, 0], [vu.GOLD_ORE, 0], [vu.SILVER_ORE, 0], [vu.COPPER_ORE, 0], [vu.TIN_ORE, 0], [vu.IRON_ORE, 0]], this.forestGrowTick = 0, this.forestGrowTicks = ns.FOREST_GROW_TICKS, this.forestGrowPercentage = ns.FOREST_GROW_PERCENTAGE, this.forestLandLimit = 0, this.servicesService.addService(Nu.LAND, this)
                }
                return e.prototype.load = function (e) {
                    this.land = e.land, this.forest = e.forest, this.mountains = e.mountains, this.forestGrowTick = e.forestGrowTick, this.takenLand = e.takenLand, this.forestLandLimit = e.forestLandLimit, this.ores = e.ores
                }, e.prototype.save = function () {
                    return {
                        land: this.land,
                        forest: this.forest,
                        mountains: this.mountains,
                        forestGrowTick: this.forestGrowTick,
                        takenLand: this.takenLand,
                        forestLandLimit: this.forestLandLimit,
                        ores: this.ores
                    }
                }, e.prototype.reset = function (e, n) {
                    this.land = ns.START_LAND, this.forest = ns.START_FOREST, this.mountains = ns.START_MOUNTAINS, this.takenLand = 0, this.ores = [[vu.COAL, 0], [vu.GOLD_ORE, 0], [vu.SILVER_ORE, 0], [vu.COPPER_ORE, 0], [vu.TIN_ORE, 0], [vu.IRON_ORE, 0]]
                }, e.prototype.tick = function (e) {
                    this.growForest()
                }, e.prototype.growForest = function () {
                    if (this.forestGrowTick < this.forestGrowTicks && (this.forestGrowTick += 1), this.forestGrowTick === this.forestGrowTicks) {
                        var e = Math.floor(this.forestGrowPercentage * this.forest * (1 + this.effectsService.getNatureEffectsValue() / 100));
                        e < ns.MINIMAL_FOREST_GROWTH && (e = ns.MINIMAL_FOREST_GROWTH), this.increaseForest(e), this.forestGrowTick = 0
                    }
                }, e.prototype.reduceForest = function (e) {
                    var n = this.forest;
                    return this.forest - e >= 0 && (this.forest -= e, this.land += e, n >= 500 && this.forest < 500 && this.logService.warning("There are less than 500 trees in the forest!"), n >= 300 && this.forest < 300 && this.logService.warning("There are less than 300 trees in the forest!"), n >= 100 && this.forest < 100 && (this.logService.warning("Critical forest size!"), this.logService.warning("There are less than 100 trees in the forest!")), !0)
                }, e.prototype.increaseForest = function (e, n) {
                    if (void 0 === n && (n = !0), n) {
                        var t = ns.START_FOREST_LIMIT - this.takenLand;
                        this.forestLandLimit > 0 && (t = this.forestLandLimit), t < 0 && (t = 0);
                        var r = this.land - t;
                        return r < 0 && (r = 0), r - e >= 0 ? (this.forest += e, this.land -= e, 0) : (this.forest += r, this.land -= r, e - r)
                    }
                    return this.forest += e, 0
                }, e.prototype.reduceLand = function (e) {
                    var n = ns.START_FOREST_LIMIT - this.takenLand;
                    return this.forestLandLimit > 0 && (n = this.forestLandLimit), n < 0 && (n = 0), this.land - n - e >= 0 && (this.land -= e, this.checkLandTriggers(), !0)
                }, e.prototype.increaseLand = function (e, n) {
                    return void 0 === n && (n = !1), this.land += e, n || (this.takenLand -= e), !0
                }, e.prototype.increaseMountains = function (e) {
                    return this.mountains += e, !0
                }, e.prototype.getForest = function () {
                    return this.forest
                }, e.prototype.decreaseLand = function (e) {
                    if (!(this.land - e >= 0)) return e - this.land;
                    this.takenLand += e, this.land -= e
                }, e.prototype.hasLand = function (e) {
                    return this.land - e >= 0
                }, e.prototype.getLand = function () {
                    return this.land
                }, e.prototype.getMountains = function () {
                    return this.mountains
                }, e.prototype.hasMountains = function (e) {
                    return this.mountains - e >= 0
                }, e.prototype.decreaseMountains = function (e) {
                    if (!(this.mountains - e >= 0)) return e - this.mountains;
                    this.mountains -= e, this.takenLand += e
                }, e.prototype.checkLandTriggers = function () {}, e.prototype.getForestLandLimit = function () {
                    return this.forestLandLimit
                }, e.prototype.setForestLandLimit = function (e) {
                    this.forestLandLimit = e
                }, e.prototype.getOre = function (e) {
                    return this.ores.find(function (n) {
                        return n[0] === e
                    })[1]
                }, e.prototype.hasOre = function (e, n) {
                    return this.ores.find(function (n) {
                        return n[0] === e
                    })[1] >= n
                }, e.prototype.increaseOre = function (e, n) {
                    this.ores.find(function (n) {
                        return n[0] === e
                    })[1] += n
                }, e.prototype.decreaseOre = function (e, n) {
                    var t = this.ores.find(function (n) {
                        return n[0] === e
                    });
                    if (t[1] >= n) return t[1] -= n, 0;
                    var r = n - t[1];
                    return t[1] = 0, r
                }, e.prototype.getTakenLand = function () {
                    return this.takenLand
                }, e.prototype.takeLand = function (e) {
                    this.land -= e, this.takenLand += e
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(vg), ze(Yg), ze(Og))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            tS = function () {
                function e(e, n, t, r, i, l) {
                    this.buildings = [], this.filterBuilding = bu.ALL, this.thisRegion = i, this.buildingFactoryService = e, this.resourcesService = n, this.servicesService = t, this.landService = r, n.addCallback(this, i), t.addService(l, this)
                }
                return e.prototype.init = function () {}, e.prototype.getBuildings = function () {
                    return this.buildings
                }, e.prototype.tick = function (e) {
                    this.shuffleArray(this.buildings).forEach(function (n) {
                        return n.tick(e)
                    })
                }, e.prototype.shuffleArray = function (e) {
                    for (var n, t = e.slice(), r = t.length - 1; r > 0; r--) {
                        var i = Math.floor(Math.random() * (r + 1));
                        t[r] = (n = [t[i], t[r]])[0], t[i] = n[1]
                    }
                    return t
                }, e.prototype.save = function () {
                    return {
                        buildings: this.buildings,
                        filterBuilding: this.filterBuilding
                    }
                }, e.prototype.reset = function (e, n) {
                    this.buildings = [], this.filterBuilding = bu.ALL, this.init()
                }, e.prototype.load = function (e) {
                    this.buildings = [], this.filterBuilding = void 0 !== e.filterBuilding ? e.filterBuilding : bu.ALL;
                    for (var n = 0, t = e.buildings; n < t.length; n++) this.buildings.push(this.buildingFactoryService.loadBuilding(t[n]))
                }, e.prototype.getFilterBuilding = function () {
                    return this.filterBuilding
                }, e.prototype.setFilterBuildings = function (e) {
                    this.filterBuilding = e
                }, e.prototype.getUnemployed = function () {
                    return this.resourcesService.getPeople()
                }, e.prototype.finishConstruction = function (e, n) {
                    var t = this.buildings.indexOf(e); - 1 !== t && (this.buildings[t].stopProduction(), this.buildings[t] = this.buildingFactoryService.createBuilding(n, this.buildings[t].getBuildingId()))
                }, e.prototype.createConstruction = function (e) {
                    this.buildings.push(e)
                }, e.prototype.demolish = function (e) {
                    var n = this.buildings.indexOf(e); - 1 !== n && (this.buildings[n].getBuildingType() === bu.CONSTRUCTION ? (this.buildings[n].stopProduction(), this.buildings[n].finishDemolish(), this.landService.increaseLand(this.buildings[n].getSize()), this.buildings.splice(n, 1)) : this.buildings[n] = new Km(this.servicesService, this.buildings[n].getBuildingId(), this.thisRegion, this.buildings[n].getBuildingType(), this.buildings[n].getComplexity(), this.buildings[n].getSize()).build())
                }, e.prototype.finishDeconstruction = function (e) {
                    var n = this.buildings.indexOf(e); - 1 !== n && (this.buildings[n].stopProduction(), this.buildingFactoryService.createBuildingShell(this.buildings[n].getBuildingBeingDemolished()).finishDemolish(), this.landService.increaseLand(this.buildings[n].getSize()), this.buildings.splice(n, 1))
                }, e.prototype.finishUpgrade = function (e, n) {
                    var t = this.buildings.indexOf(e);
                    if (-1 !== t) {
                        this.buildings[t].stopProduction();
                        var r = this.buildingFactoryService.createBuildingShell(n, this.buildings[t].getBuildingId());
                        r.setBuildingLevel(this.buildings[t].getBuildingLevel()), r.build(), this.buildings[t] = r
                    }
                }, e.prototype.fireRandomWorker = function () {
                    var e = this.buildings.filter(function (e) {
                        return void 0 === e.getOccupants && e.isWorking()
                    });
                    return e.length > 0 && (e[Math.floor(Math.random() * e.length)].fireWorker(), !0)
                }, e.prototype.moveBuildingInList = function (e, n) {
                    wv(this.buildings, e, n)
                }, e.prototype.moveBuildingInListByBuildingId = function (e, n) {
                    var t = this.buildings.findIndex(function (n) {
                            return e === n.getBuildingId()
                        }),
                        r = this.buildings.findIndex(function (e) {
                            return n === e.getBuildingId()
                        });
                    wv(this.buildings, t, r)
                }, e.prototype.canCombine = function (e) {
                    if (this.buildings.filter(function (e) {
                            return e.isCombinable()
                        }).length > 1) return this.toCombine ? this.toCombine !== e && this.toCombine.getBuildingType() === e.getBuildingType() : !!this.buildings.find(function (n) {
                        return n !== e && n.getBuildingType() === e.getBuildingType()
                    })
                }, e.prototype.combine = function (e) {
                    if (!this.toCombine) return this.toCombine = e, !1;
                    e.combine(this.toCombine, this)
                }, e.prototype.finaliseCombine = function (e) {
                    if (e) {
                        var n = this.buildings.indexOf(this.toCombine);
                        if (n >= 0) return this.buildings[n].prepareDemolish() ? (this.toCombine = null, this.buildings.splice(n, 1), !0) : (this.toCombine = null, !1)
                    } else this.toCombine = null
                }, e.prototype.clearCombineMode = function () {
                    this.toCombine = null
                }, e.prototype.split = function (e) {
                    e.isSplittable() && e.split(this)
                }, e.prototype.finaliseSplit = function (e) {
                    this.buildings.push(e)
                }, e.prototype.addBuilding = function (e) {
                    this.buildings.push(this.buildingFactoryService.createBuilding(e))
                }, e.prototype.upgradeBuilding = function (e) {
                    var n = this.buildings.find(function (n) {
                            return n.getBuildingId() === e
                        }),
                        t = this.servicesService.getService(Nu.MODAL);
                    if (n)
                        if (n.hasUpgrade()) {
                            if (this.resourcesService.decreaseResources(n.getUpgradeCost(), !0)) {
                                n.stopProduction();
                                var r = this.buildings.indexOf(n),
                                    i = ts.getBuilding(n.getBuildingType());
                                this.buildings[r] = new Gm(this.servicesService, n.getBuildingId(), this.thisRegion, n.getBuildingType(), i.UPGRADES[n.getBuildingLevel() - 1].COMPLEXITY, n.getSize(), n.getBuildingLevel() + 1).build()
                            }
                        } else t.info("This building cannot be upgraded");
                    else t.info("Error! Building not found")
                }, e
            }(),
            rS = function (e) {
                function n(n, t, r, i, l) {
                    var o = e.call(this, t, n, r, l, Mu.VILLAGE, Nu.VILLAGE) || this;
                    return o.idService = i, o
                }
                return i(n, e), n.prototype.init = function () {
                    var e = this;
                    this.buildings.push(new xm(this.servicesService, this.idService.getNextId(), 2).build()), this.buildings.push(new xm(this.servicesService, this.idService.getNextId(), 1).build()), this.resourcesService.createPeople(3), this.buildings.forEach(function (n) {
                        return e.landService.takeLand(n.getSize())
                    })
                }, n.prototype.getPopulation = function () {
                    return this.resourcesService.getPeople() + this.resourcesService.getWorkers()
                }, n.prototype.getPopulationCap = function () {
                    return this.resourcesService.getPopulationCap()
                }, n.prototype.moveOccupants = function (e, n) {
                    for (var t = 0; n > 0 && t < this.buildings.length;) {
                        var r = this.buildings[t];
                        if (this.buildings[t] !== e && void 0 !== r.getOccupants)
                            for (; r.getOccupants() < r.getMaxSize() && n > 0;) r.addOccupant() && (n -= 1);
                        t += 1
                    }
                    return n
                }, n.prototype.removeRecruit = function (e) {
                    var n = this.buildings.filter(function (e) {
                            return void 0 !== e.getOccupants
                        }).map(function (e) {
                            return e
                        }).sort(function (e, n) {
                            return e.getOccupants() === e.getMaxSize() && n.getOccupants() === n.getMaxSize() ? e.getMaxSize() > n.getMaxSize() ? -1 : 1 : e.getOccupants() === e.getMaxSize() && n.getOccupants() < n.getMaxSize() ? -1 : e.getOccupants() < e.getMaxSize() && n.getOccupants() === n.getMaxSize() ? 1 : void 0
                        }),
                        t = 0;
                    if (n.forEach(function (e) {
                            return t += e.getOccupants()
                        }), t >= e)
                        for (; e > 0;)
                            for (var r = 0, i = n; r < i.length; r++) {
                                if (!(e > 0)) return !0;
                                i[r].removeOccupant() && (this.resourcesService.removePeople(1), e -= 1)
                            }
                    return !1
                }, n.prototype.replaceWithHouses = function () {
                    var e = this;
                    this.buildings.push(new Fm(this.servicesService, 2).build()), this.buildings.filter(function (e) {
                        return e.getBuildingType() === bu.HUT
                    }).forEach(function (n) {
                        n.prepareDemolish(), e.demolish(n)
                    }), this.buildings.filter(function (e) {
                        return e.getBuildingType() === bu.DECONSTRUCTION
                    }).forEach(function (n) {
                        return e.finishDeconstruction(n)
                    })
                }, n.ngInjectableDef = ve({
                    factory: function () {
                        return new n(ze(Ng), ze(eS), ze(vg), ze(Jy), ze(nS))
                    },
                    token: n,
                    providedIn: "root"
                }), n
            }(tS),
            iS = function () {
                function e(e, n, t) {
                    this.marketService = e, this.villageService = n, this.resourcesService = t, this.filterText = "", this.typeRadio = "all"
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.getOffers = function () {
                    var e, n = this;
                    return e = null !== this.filterText && this.filterText.length > 0 ? this.marketService.getOffers().filter(function (e) {
                        return Au.prepareResourceName(e.resource).toLowerCase().includes(n.filterText)
                    }) : this.marketService.getOffers(), "buy" === this.typeRadio ? e = e.filter(function (e) {
                        return e.buy
                    }) : "sell" === this.typeRadio && (e = e.filter(function (e) {
                        return !e.buy
                    })), e
                }, e.prototype.getCoins = function () {
                    return this.resourcesService.getResource(vu.COINS).amount
                }, e.prototype.accept = function (e) {
                    this.marketService.accept(e)
                }, e.prototype.isMarketBuilt = function () {
                    return void 0 !== this.villageService.getBuildings().find(function (e) {
                        return e.getBuildingType() === bu.MARKETPLACE
                    })
                }, e.prototype.getResourceName = function (e) {
                    return vu[e]
                }, e
            }(),
            lS = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{margin:.5%;height:100%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}.boxTitle[_ngcontent-%COMP%]{text-align:center;border-bottom:2px solid #000}#side[_ngcontent-%COMP%]{float:right;font-size:1em;width:25%;margin:.5%;display:inline-block;vertical-align:bottom}#side[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:.8em;margin:0;padding:0;border:none;outline:0}#headers[_ngcontent-%COMP%]{margin:3px 3px 0;display:flex;flex-direction:row;width:97%;text-align:center;font-size:.9em}#headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:0 0 24%;padding:2px;border:1px solid #000;border-left:none}#headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-of-type{border-left:1px solid #000}#market[_ngcontent-%COMP%]{display:flex;flex-direction:row;border:2px solid #000;height:91.5%}#offersBox[_ngcontent-%COMP%]{display:flex;flex:0 0 70%;flex-direction:column;border-right:2px solid #000;height:100%;font-size:1.2em}#filterBox[_ngcontent-%COMP%]{display:flex;flex:0 0 30%;flex-direction:column;height:100%}#offers[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:center;height:100%;overflow-y:auto}.offer[_ngcontent-%COMP%]{flex:0 0 auto;display:flex;flex-direction:row;border:1px solid #000;margin:3px}.offer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:0 0 24%;padding:2px}.offer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:.8em}#filters[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}#filter[_ngcontent-%COMP%]{width:90%}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.icon2[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center}#noMarket[_ngcontent-%COMP%]{margin-left:112px;color:#8b0000}"]],
                data: {}
            });

        function oS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [["id", "noMarket"]], null, null, null, null, null)), (e()(), lo(-1, null, ["No Marketplace available. No merchant will visit."]))], null, null)
        }

        function uS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.accept(e.parent.context.$implicit.id) && r), r
            }, null, null)), (e()(), lo(-1, null, ["Buy"]))], null, null)
        }

        function sS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.accept(e.parent.context.$implicit.id) && r), r
            }, null, null)), (e()(), lo(-1, null, ["Sell"]))], null, null)
        }

        function aS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 15, "div", [["class", "offer"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 3, "span", [["class", "icon2"]], null, null, null, null, null)), (e()(), lo(2, null, [" ", " "])), (e()(), Yi(3, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(4, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null), (e()(), Yi(5, 0, null, null, 3, "span", [["class", "icon2"]], null, null, null, null, null)), (e()(), lo(6, null, [" ", " "])), (e()(), Yi(7, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(8, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null), (e()(), Yi(9, 0, null, null, 1, "span", [["class", "icon2"]], null, null, null, null, null)), (e()(), lo(10, null, [" ", " days "])), (e()(), Yi(11, 0, null, null, 4, "span", [], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, uS)), kl(13, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, sS)), kl(15, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, n) {
                e(n, 4, 0, n.component.getResourceName(n.context.$implicit.resource), "resources"), e(n, 8, 0, "coins", "resources"), e(n, 13, 0, n.context.$implicit.buy), e(n, 15, 0, !n.context.$implicit.buy)
            }, function (e, n) {
                e(n, 2, 0, n.context.$implicit.amount), e(n, 6, 0, n.context.$implicit.price), e(n, 10, 0, n.context.$implicit.duration)
            })
        }

        function cS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 65, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 2, "div", [["id", "title"]], null, null, null, null, null)), (e()(), Yi(2, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["Market"])), (e()(), Yi(4, 0, null, null, 5, "div", [["class", "icon"]], null, null, null, null, null)), (e()(), Yi(5, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(6, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null), (e()(), lo(7, null, [" ", " "])), (e()(), ji(16777216, null, null, 1, null, oS)), kl(9, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(10, 0, null, null, 55, "div", [["id", "market"]], null, null, null, null, null)), (e()(), Yi(11, 0, null, null, 15, "div", [["id", "offersBox"]], null, null, null, null, null)), (e()(), Yi(12, 0, null, null, 2, "div", [["class", "boxTitle"]], null, null, null, null, null)), (e()(), Yi(13, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["Offers"])), (e()(), Yi(15, 0, null, null, 8, "div", [["id", "headers"]], null, null, null, null, null)), (e()(), Yi(16, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["offer"])), (e()(), Yi(18, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["price"])), (e()(), Yi(20, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["duration"])), (e()(), Yi(22, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["buy/sell"])), (e()(), Yi(24, 0, null, null, 2, "div", [["id", "offers"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, aS)), kl(26, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), (e()(), Yi(27, 0, null, null, 38, "div", [["id", "filterBox"]], null, null, null, null, null)), (e()(), Yi(28, 0, null, null, 2, "div", [["class", "boxTitle"]], null, null, null, null, null)), (e()(), Yi(29, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["Filters"])), (e()(), Yi(31, 0, null, null, 34, "div", [["id", "filters"]], null, null, null, null, null)), (e()(), Yi(32, 0, null, null, 5, "input", [["id", "filter"], ["placeholder", "search"], ["type", "text"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"]], function (e, n, t) {
                var r = !0,
                    i = e.component;
                return "input" === n && (r = !1 !== El(e, 33)._handleInput(t.target.value) && r), "blur" === n && (r = !1 !== El(e, 33).onTouched() && r), "compositionstart" === n && (r = !1 !== El(e, 33)._compositionStart() && r), "compositionend" === n && (r = !1 !== El(e, 33)._compositionEnd(t.target.value) && r), "ngModelChange" === n && (r = !1 !== (i.filterText = t) && r), r
            }, null, null)), kl(33, 16384, null, 0, Tf, [xn, Pn, [2, Rf]], null, null), Ll(1024, null, bf, function (e) {
                return [e]
            }, [Tf]), kl(35, 671744, null, 0, cg, [[8, null], [8, null], [8, null], [6, bf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, wf, null, [cg]), kl(37, 16384, null, 0, $f, [[4, wf]], null, null), (e()(), Yi(38, 0, null, null, 27, "div", [], null, null, null, null, null)), (e()(), Yi(39, 0, null, null, 8, "label", [], null, null, null, null, null)), (e()(), Yi(40, 0, null, null, 6, "input", [["name", "type"], ["type", "radio"], ["value", "all"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"], [null, "change"]], function (e, n, t) {
                var r = !0,
                    i = e.component;
                return "input" === n && (r = !1 !== El(e, 41)._handleInput(t.target.value) && r), "blur" === n && (r = !1 !== El(e, 41).onTouched() && r), "compositionstart" === n && (r = !1 !== El(e, 41)._compositionStart() && r), "compositionend" === n && (r = !1 !== El(e, 41)._compositionEnd(t.target.value) && r), "change" === n && (r = !1 !== El(e, 42).onChange() && r), "blur" === n && (r = !1 !== El(e, 42).onTouched() && r), "ngModelChange" === n && (r = !1 !== (i.typeRadio = t) && r), r
            }, null, null)), kl(41, 16384, null, 0, Tf, [xn, Pn, [2, Rf]], null, null), kl(42, 212992, null, 0, Pf, [xn, Pn, Nf, on], {
                name: [0, "name"],
                value: [1, "value"]
            }, null), Ll(1024, null, bf, function (e, n) {
                return [e, n]
            }, [Tf, Pf]), kl(44, 671744, null, 0, cg, [[8, null], [8, null], [8, null], [6, bf]], {
                name: [0, "name"],
                model: [1, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, wf, null, [cg]), kl(46, 16384, null, 0, $f, [[4, wf]], null, null), (e()(), lo(-1, null, [" All "])), (e()(), Yi(48, 0, null, null, 8, "label", [], null, null, null, null, null)), (e()(), Yi(49, 0, null, null, 6, "input", [["name", "type"], ["type", "radio"], ["value", "buy"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"], [null, "change"]], function (e, n, t) {
                var r = !0,
                    i = e.component;
                return "input" === n && (r = !1 !== El(e, 50)._handleInput(t.target.value) && r), "blur" === n && (r = !1 !== El(e, 50).onTouched() && r), "compositionstart" === n && (r = !1 !== El(e, 50)._compositionStart() && r), "compositionend" === n && (r = !1 !== El(e, 50)._compositionEnd(t.target.value) && r), "change" === n && (r = !1 !== El(e, 51).onChange() && r), "blur" === n && (r = !1 !== El(e, 51).onTouched() && r), "ngModelChange" === n && (r = !1 !== (i.typeRadio = t) && r), r
            }, null, null)), kl(50, 16384, null, 0, Tf, [xn, Pn, [2, Rf]], null, null), kl(51, 212992, null, 0, Pf, [xn, Pn, Nf, on], {
                name: [0, "name"],
                value: [1, "value"]
            }, null), Ll(1024, null, bf, function (e, n) {
                return [e, n]
            }, [Tf, Pf]), kl(53, 671744, null, 0, cg, [[8, null], [8, null], [8, null], [6, bf]], {
                name: [0, "name"],
                model: [1, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, wf, null, [cg]), kl(55, 16384, null, 0, $f, [[4, wf]], null, null), (e()(), lo(-1, null, [" Buy "])), (e()(), Yi(57, 0, null, null, 8, "label", [], null, null, null, null, null)), (e()(), Yi(58, 0, null, null, 6, "input", [["name", "type"], ["type", "radio"], ["value", "sell"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"], [null, "change"]], function (e, n, t) {
                var r = !0,
                    i = e.component;
                return "input" === n && (r = !1 !== El(e, 59)._handleInput(t.target.value) && r), "blur" === n && (r = !1 !== El(e, 59).onTouched() && r), "compositionstart" === n && (r = !1 !== El(e, 59)._compositionStart() && r), "compositionend" === n && (r = !1 !== El(e, 59)._compositionEnd(t.target.value) && r), "change" === n && (r = !1 !== El(e, 60).onChange() && r), "blur" === n && (r = !1 !== El(e, 60).onTouched() && r), "ngModelChange" === n && (r = !1 !== (i.typeRadio = t) && r), r
            }, null, null)), kl(59, 16384, null, 0, Tf, [xn, Pn, [2, Rf]], null, null), kl(60, 212992, null, 0, Pf, [xn, Pn, Nf, on], {
                name: [0, "name"],
                value: [1, "value"]
            }, null), Ll(1024, null, bf, function (e, n) {
                return [e, n]
            }, [Tf, Pf]), kl(62, 671744, null, 0, cg, [[8, null], [8, null], [8, null], [6, bf]], {
                name: [0, "name"],
                model: [1, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, wf, null, [cg]), kl(64, 16384, null, 0, $f, [[4, wf]], null, null), (e()(), lo(-1, null, [" Sell "]))], function (e, n) {
                var t = n.component;
                e(n, 6, 0, "coins", "resources"), e(n, 9, 0, !t.isMarketBuilt()), e(n, 26, 0, t.getOffers()), e(n, 35, 0, t.filterText), e(n, 42, 0, "type", "all"), e(n, 44, 0, "type", t.typeRadio), e(n, 51, 0, "type", "buy"), e(n, 53, 0, "type", t.typeRadio), e(n, 60, 0, "type", "sell"), e(n, 62, 0, "type", t.typeRadio)
            }, function (e, n) {
                e(n, 7, 0, n.component.getCoins()), e(n, 32, 0, El(n, 37).ngClassUntouched, El(n, 37).ngClassTouched, El(n, 37).ngClassPristine, El(n, 37).ngClassDirty, El(n, 37).ngClassValid, El(n, 37).ngClassInvalid, El(n, 37).ngClassPending), e(n, 40, 0, El(n, 46).ngClassUntouched, El(n, 46).ngClassTouched, El(n, 46).ngClassPristine, El(n, 46).ngClassDirty, El(n, 46).ngClassValid, El(n, 46).ngClassInvalid, El(n, 46).ngClassPending), e(n, 49, 0, El(n, 55).ngClassUntouched, El(n, 55).ngClassTouched, El(n, 55).ngClassPristine, El(n, 55).ngClassDirty, El(n, 55).ngClassValid, El(n, 55).ngClassInvalid, El(n, 55).ngClassPending), e(n, 58, 0, El(n, 64).ngClassUntouched, El(n, 64).ngClassTouched, El(n, 64).ngClassPristine, El(n, 64).ngClassDirty, El(n, 64).ngClassValid, El(n, 64).ngClassInvalid, El(n, 64).ngClassPending)
            })
        }

        function pS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-market", [], null, null, null, cS, lS)), kl(1, 114688, null, 0, iS, [wm, rS, Ng], null, null)], function (e, n) {
                e(n, 1, 0)
            }, null)
        }
        var hS = al("app-market", iS, pS, {}, {}, []),
            dS = function () {
                function e(e, n, t, r, i, l, o, u, s) {
                    void 0 === u && (u = function () {}), void 0 === s && (s = 0), this.tech = e, this.category = n, this.prerequisites = t, this.flagPrerequisites = r, this.cost = i, this.requiredResearchPoints = l, this.description = o, this.researchPoints = s, this.finishFunction = u
                }
                return e.prototype.getTech = function () {
                    return this.tech
                }, e.prototype.getTechName = function () {
                    return Au.prepareTechName(this.tech)
                }, e.prototype.isResearched = function () {
                    return this.researchPoints > this.requiredResearchPoints && (this.researchPoints = this.requiredResearchPoints), this.researchPoints === this.requiredResearchPoints
                }, e.prototype.getCategory = function () {
                    return this.category
                }, e.prototype.getDescription = function () {
                    return this.description
                }, e.prototype.getResearchPointsDue = function () {
                    return this.requiredResearchPoints - this.researchPoints
                }, e.prototype.addResearchPoints = function (e) {
                    this.researchPoints += e, this.researchPoints > this.requiredResearchPoints && (this.researchPoints = this.requiredResearchPoints)
                }, e.prototype.getResearchPoints = function () {
                    return this.researchPoints
                }, e.prototype.setResearchPoints = function (e) {
                    this.researchPoints = e
                }, e.prototype.setResearched = function () {
                    this.researchPoints = this.requiredResearchPoints
                }, e.prototype.getCost = function () {
                    return this.cost
                }, e.prototype.clearCost = function () {
                    this.cost = new Map
                }, e.prototype.getPrerequisites = function () {
                    return this.prerequisites
                }, e.prototype.getFlagPrerequisites = function () {
                    return this.flagPrerequisites
                }, e.prototype.getFinishFunction = function () {
                    return this.finishFunction
                }, e.prototype.getRequiredResearchPoints = function () {
                    return this.requiredResearchPoints
                }, e
            }(),
            fS = function () {
                function e() {
                    this.prerequisites = [], this.flagPrerequisites = [], this.cost = new Map, this.researchPoints = 0, this.finishFunction = function () {}
                }
                return e.prototype.forTech = function (e) {
                    return this.tech = e, this
                }, e.prototype.withCategory = function (e) {
                    return this.category = e, this
                }, e.prototype.withPrerequisite = function (e) {
                    return this.prerequisites.push(e), this
                }, e.prototype.withPrerequisites = function (e) {
                    var n = this;
                    return e.forEach(function (e) {
                        return n.prerequisites.push(e)
                    }), this
                }, e.prototype.withFlagPrerequisite = function (e) {
                    return this.flagPrerequisites.push(e), this
                }, e.prototype.withFlagPrerequisites = function (e) {
                    var n = this;
                    return e.forEach(function (e) {
                        return n.flagPrerequisites.push(e)
                    }), this
                }, e.prototype.withCost = function (e, n) {
                    return this.cost.set(e, n), this
                }, e.prototype.withCosts = function (e) {
                    var n = this;
                    return e.forEach(function (e, t) {
                        return n.cost.set(t, e)
                    }), this
                }, e.prototype.withResearchPoints = function (e) {
                    return this.researchPoints = e, this
                }, e.prototype.withDescription = function (e) {
                    return this.description = e, this
                }, e.prototype.withFinishFunction = function (e) {
                    return this.finishFunction = e, this
                }, e.prototype.build = function () {
                    var e = new dS(this.tech, this.category, this.prerequisites, this.flagPrerequisites, this.cost, this.researchPoints, this.description, this.finishFunction);
                    return this.tech = void 0, this.category = void 0, this.prerequisites = [], this.flagPrerequisites = [], this.cost = new Map, this.researchPoints = 0, this.description = void 0, this.finishFunction = function () {}, e
                }, e
            }(),
            gS = function () {
                function e(e, n, t, r, i, l) {
                    this.servicesService = e, this.modalService = n, this.resourcesService = t, this.logService = r, this.soundService = i, this.gameService = l, this.techUpdate = new L, this.techList = [], this.techDone = [], this.techStarted = [], this.currentResearch = null, this.foresight = 0, this.showDone = !1, this.servicesService.addService(Nu.RESEARCH, this), this.init()
                }
                return e.prototype.init = function () {
                    var e = this;
                    this.techList = [];
                    var n = new fS;
                    Object.entries(os).forEach(function (t) {
                        n.forTech(Su[t[0]]).withCategory(t[1].CATEGORY).withFinishFunction(t[1].FINISH).withResearchPoints(t[1].RESEARCH_POINT).withPrerequisites(t[1].PREREQUISITES).withFlagPrerequisites(t[1].FLAG_PREREQUISITES ? t[1].FLAG_PREREQUISITES : []).withDescription(t[1].DESCRIPTION), t[1].COST.forEach(function (e) {
                            return n.withCost(e.resource, e.amount)
                        }), e.techList.push(n.build())
                    })
                }, e.prototype.isResearched = function (e) {
                    return null != this.techDone.find(function (n) {
                        return n === e
                    })
                }, e.prototype.startResearch = function (e) {
                    var n = this;
                    if (!this.currentResearch || this.currentResearch.getTech() !== e) {
                        var t = this.techList.find(function (n) {
                                return n.getTech() === e
                            }),
                            r = !0,
                            i = "";
                        if (t.getPrerequisites().forEach(function (e) {
                                n.techDone.includes(e) || (r = !1, i += Au.prepareTechName(e) + " not researched!<br>")
                            }), t.getFlagPrerequisites().forEach(function (e) {
                                n.gameService.isEnabled(e) || (r = !1, i += Au.prepareFlagName(e) + " not unlocked!<br>")
                            }), r) {
                            if (!this.techStarted.find(function (n) {
                                    return n[0] === e
                                })) {
                                var l = this.techList.find(function (n) {
                                        return n.getTech() === e
                                    }),
                                    o = !0,
                                    u = "";
                                if (Array.from(l.getCost().entries()).forEach(function (e) {
                                        var t = n.resourcesService.hasResource(e[0], e[1], !0);
                                        0 !== t && (u += "Missing " + t + " " + Au.prepareResourceName(e[0]) + "!<br>", o = !1)
                                    }), !o) return void this.modalService.info(u)
                            }
                            this.modalService.setModalText("Are you sure you want to unlock researching " + Au.prepareTechName(e) + "?"), this.modalService.open(mu.CONFIRM);
                            var s = this.modalService.registerForConfirmation().subscribe(function (t) {
                                if (s.unsubscribe(), t) {
                                    var r = n.techList.find(function (n) {
                                            return n.getTech() === e
                                        }),
                                        i = !0,
                                        l = "";
                                    if (Array.from(r.getCost().entries()).forEach(function (e) {
                                            var t = n.resourcesService.hasResource(e[0], e[1], !0);
                                            0 !== t && (l += "Missing " + t + " " + Au.prepareResourceName(e[0]) + "!<br>", i = !1)
                                        }), !i) return void n.modalService.info(l);
                                    if (n.resourcesService.decreaseResources(r.getCost(), !0), n.currentResearch) {
                                        var o = n.techStarted.find(function (n) {
                                            return n[0] === e
                                        });
                                        o ? o[1] = n.currentResearch.getResearchPoints() : n.techStarted.push([n.currentResearch.getTech(), n.currentResearch.getResearchPoints()])
                                    }
                                    n.currentResearch = n.techList.find(function (n) {
                                        return n.getTech() === e
                                    }), n.currentResearch.clearCost();
                                    var u = n.techStarted.find(function (n) {
                                        return n[0] === e
                                    });
                                    u ? u[1] = n.currentResearch.getResearchPoints() : n.techStarted.push([n.currentResearch.getTech(), n.currentResearch.getResearchPoints()])
                                }
                            })
                        } else this.modalService.info(i)
                    }
                }, e.prototype.progressTech = function (e) {
                    var n = this;
                    this.currentResearch && (this.currentResearch.addResearchPoints(e), this.currentResearch.isResearched() && (this.logService.log(this.currentResearch.getTechName() + " researched"), this.soundService.playTownBells(), this.currentResearch.getFinishFunction()(this.servicesService), this.techDone.push(this.currentResearch.getTech()), this.techStarted = this.techStarted.filter(function (e) {
                        return e[0] !== n.currentResearch.getTech()
                    }), this.currentResearch = null), this.techUpdate.next())
                }, e.prototype.save = function () {
                    var e = this;
                    if (this.currentResearch) {
                        var n = this.techStarted.find(function (n) {
                            return n[0] === e.currentResearch.getTech()
                        });
                        n && (n[1] = this.currentResearch.getResearchPoints())
                    }
                    return {
                        foresight: this.foresight,
                        showDone: this.showDone,
                        techDone: this.techDone,
                        techStarted: this.techStarted,
                        currentResearchTech: this.currentResearch ? this.currentResearch.getTech() : null
                    }
                }, e.prototype.load = function (e) {
                    var n = this;
                    this.foresight = e.foresight, this.showDone = void 0 !== e.showDone && e.showDone, this.techDone = e.techDone, this.techStarted = e.techStarted, this.techDone.forEach(function (e) {
                        return n.techList.find(function (n) {
                            return n.getTech() === e
                        }).setResearched()
                    }), this.techStarted.forEach(function (e) {
                        var t = n.techList.find(function (n) {
                            return n.getTech() === e[0]
                        });
                        t && (t.clearCost(), t.setResearchPoints(e[1]))
                    }), this.currentResearch = this.techList.find(function (n) {
                        return n.getTech() === e.currentResearchTech
                    }), this.techDone.includes(Su.BARRACKS) && !this.gameService.isEnabled(Eu.BARRACKS) && (this.gameService.enable(Eu.BARRACKS), this.logService.log("Barracks invented"))
                }, e.prototype.reset = function (e, n) {
                    this.techList = [], this.techDone = [], this.techStarted = [], this.currentResearch = null, this.foresight = 0, this.showDone = !1, this.init()
                }, e.prototype.getTech = function () {
                    var e = this;
                    return this.techList.filter(function (n) {
                        if (e.techDone.includes(n.getTech())) return e.showDone;
                        var t = !0;
                        return n.getPrerequisites().forEach(function (n) {
                            e.checkPrerequisite(n, e.foresight) || (t = !1)
                        }), t
                    })
                }, e.prototype.checkPrerequisite = function (e, n) {
                    var t = this;
                    if (this.techDone.includes(e)) return !0;
                    if (n > 0) {
                        var r = !0;
                        return this.techList.find(function (n) {
                            return n.getTech() === e
                        }).getPrerequisites().forEach(function (e) {
                            t.checkPrerequisite(e, n - 1) || (r = !1)
                        }), r
                    }
                    return !1
                }, e.prototype.getCurrentResearch = function () {
                    return this.currentResearch
                }, e.prototype.increaseForesight = function (e) {
                    this.foresight += 1
                }, e.prototype.isResearchStarted = function () {
                    return !!this.currentResearch
                }, e.prototype.getTechPrerequisites = function (e) {
                    var n = this,
                        t = [];
                    return e.getPrerequisites().forEach(function (e) {
                        n.techDone.includes(e) || t.push(e)
                    }), t
                }, e.prototype.registerForUpdate = function () {
                    return this.techUpdate.asObservable()
                }, e.prototype.getForesight = function () {
                    return this.foresight
                }, e.prototype.getTechFlagPrerequisites = function (e) {
                    var n = this,
                        t = [];
                    return e.getFlagPrerequisites().forEach(function (e) {
                        n.gameService.isEnabled(e) || t.push(e)
                    }), t
                }, e.prototype.finishTech = function (e) {
                    this.techDone.push(e);
                    var n = this.techList.find(function (n) {
                        return n.getTech() === e
                    });
                    n && (this.logService.log(n.getTechName() + " researched"), n.getFinishFunction()(this.servicesService)), this.currentResearch && this.currentResearch.getTech() === e && (this.currentResearch = null), this.techUpdate.next()
                }, e.prototype.toggleShowDone = function () {
                    this.showDone = !this.showDone
                }, e.prototype.shouldShowDone = function () {
                    return this.showDone
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(vg), ze(Rg), ze(Ng), ze(Og), ze(Am), ze(Cg))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            vS = function () {
                function e(n, t) {
                    this.techService = n, this.resourcesService = t, this.id = e.randomId()
                }
                return e.randomId = function () {
                    return Math.random()
                }, e.prototype.ngOnInit = function () {
                    var e = this;
                    this.updateSubscription = this.techService.registerForUpdate().subscribe(function () {
                        e.progressRef && (e.progressRef.nativeElement.style.width = e.tech.getResearchPoints() / e.tech.getRequiredResearchPoints() * 100 + "%")
                    })
                }, e.prototype.ngAfterViewInit = function () {
                    this.progressRef && (this.progressRef.nativeElement.style.width = this.tech.getResearchPoints() / this.tech.getRequiredResearchPoints() * 100 + "%")
                }, e.prototype.ngOnChanges = function () {
                    this.progressRef && (this.progressRef.nativeElement.style.width = this.tech.getResearchPoints() / this.tech.getRequiredResearchPoints() * 100 + "%")
                }, e.prototype.getResourceName = function (e) {
                    return Au.prepareResourceName(e)
                }, e.prototype.start = function () {
                    this.techService.startResearch(this.tech.getTech())
                }, e.prototype.getPrerequisiteName = function (e) {
                    return Au.prepareTechName(e)
                }, e.prototype.getMissingPrerequisites = function () {
                    return this.techService.getTechPrerequisites(this.tech)
                }, e.prototype.hasResource = function (e) {
                    return 0 === this.resourcesService.hasResource(e.key, e.value, !0)
                }, e.prototype.getMissingFlagPrerequisites = function () {
                    return this.techService.getTechFlagPrerequisites(this.tech)
                }, e.prototype.getFlagPrerequisiteName = function (e) {
                    return Au.prepareFlagName(e)
                }, e
            }(),
            mS = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #000}#researched[_ngcontent-%COMP%]{display:inline-block;width:100%;padding:3px;text-align:center;cursor:initial;border:1px solid #000}#wrapperNotAvailable[_ngcontent-%COMP%]{display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #57575a}#titleGrey[_ngcontent-%COMP%]{display:inline-block;color:#57575a}.notMet[_ngcontent-%COMP%]{color:#8b0000}.title[_ngcontent-%COMP%]{text-align:left}hr[_ngcontent-%COMP%]{border-color:#000}#progress[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background-color:var(--active-colour);z-index:1}#text[_ngcontent-%COMP%]{position:relative;z-index:2}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center}"]],
                data: {}
            });

        function yS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 7, "div", [["appTooltip", ""], ["class", "tooltip"], ["id", "researched"]], null, [[null, "mousemove"]], function (e, n, t) {
                var r = !0;
                return "mousemove" === n && (r = !1 !== El(e, 1).onmousemove(t) && r), r
            }, null, null)), kl(1, 16384, null, 0, av, [], {
                elementId: [0, "elementId"]
            }, null), (e()(), Yi(2, 0, [[1, 0], ["progress", 1]], null, 0, "div", [["id", "progress"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 1, "div", [["id", "text"]], null, null, null, null, null)), (e()(), lo(4, null, ["", ""])), (e()(), Yi(5, 0, null, null, 2, "span", [], [[8, "id", 0]], null, null, null, null)), (e()(), lo(6, null, [" ", ""])), (e()(), Yi(7, 0, null, null, 0, "br", [], null, null, null, null, null))], function (e, n) {
                e(n, 1, 0, n.component.id)
            }, function (e, n) {
                var t = n.component;
                e(n, 4, 0, t.tech.getTechName()), e(n, 5, 0, Vi(1, "", t.id, "")), e(n, 6, 0, t.tech.getDescription())
            })
        }

        function SS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "div", [["class", "title"]], null, null, null, null, null)), (e()(), lo(-1, null, ["Cost:"])), (e()(), Yi(2, 0, null, null, 0, "br", [], null, null, null, null, null))], null, null)
        }

        function ES(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, null, null, null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "div", [], null, null, null, null, null)), (e()(), lo(2, null, ["", ""]))], null, function (e, n) {
                e(n, 2, 0, n.parent.context.$implicit.value)
            })
        }

        function bS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, null, null, null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "div", [["class", "notMet"]], null, null, null, null, null)), (e()(), lo(2, null, ["", ""]))], null, function (e, n) {
                e(n, 2, 0, n.parent.context.$implicit.value)
            })
        }

        function OS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 6, "div", [["class", "icon"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, ES)), kl(2, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, bS)), kl(4, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(5, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(6, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 2, 0, t.hasResource(n.context.$implicit)), e(n, 4, 0, !t.hasResource(n.context.$implicit)), e(n, 6, 0, t.getResourceName(n.context.$implicit.key), "resources")
            }, null)
        }

        function RS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [], null, null, null, null, null)), (e()(), lo(1, null, [" ", " "]))], null, function (e, n) {
                e(n, 1, 0, n.component.getPrerequisiteName(n.context.$implicit))
            })
        }

        function TS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [], null, null, null, null, null)), (e()(), lo(1, null, [" ", " "]))], null, function (e, n) {
                e(n, 1, 0, n.component.getFlagPrerequisiteName(n.context.$implicit))
            })
        }

        function CS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 7, "div", [["class", "prerequisites"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 2, "div", [["class", "title"]], null, null, null, null, null)), (e()(), lo(-1, null, ["Prerequisites:"])), (e()(), Yi(3, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, RS)), kl(5, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, TS)), kl(7, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 5, 0, t.getMissingPrerequisites()), e(n, 7, 0, t.getMissingFlagPrerequisites())
            }, null)
        }

        function _S(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 17, "div", [["appTooltip", ""], ["class", "tooltip"], ["id", "wrapper"]], null, [[null, "click"], [null, "mousemove"]], function (e, n, t) {
                var r = !0,
                    i = e.component;
                return "mousemove" === n && (r = !1 !== El(e, 1).onmousemove(t) && r), "click" === n && (r = !1 !== i.start() && r), r
            }, null, null)), kl(1, 16384, null, 0, av, [], {
                elementId: [0, "elementId"]
            }, null), (e()(), Yi(2, 0, [[1, 0], ["progress", 1]], null, 0, "div", [["id", "progress"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 1, "div", [["id", "text"]], null, null, null, null, null)), (e()(), lo(4, null, ["", ""])), (e()(), Yi(5, 0, null, null, 12, "span", [], [[8, "id", 0]], null, null, null, null)), (e()(), lo(6, null, [" ", ""])), (e()(), Yi(7, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(8, 0, null, null, 0, "hr", [], null, null, null, null, null)), (e()(), Yi(9, 0, null, null, 1, "div", [["class", "title"]], null, null, null, null, null)), (e()(), lo(10, null, ["Research points: ", "/", ""])), (e()(), ji(16777216, null, null, 1, null, SS)), kl(12, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 2, null, OS)), kl(14, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), Ml(0, Ks, [Vr]), (e()(), ji(16777216, null, null, 1, null, CS)), kl(17, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 1, 0, t.id), e(n, 12, 0, t.tech.getCost().size > 0), e(n, 14, 0, hi(n, 14, 0, El(n, 15).transform(t.tech.getCost()))), e(n, 17, 0, t.getMissingPrerequisites().length > 0 || t.getMissingFlagPrerequisites().length > 0)
            }, function (e, n) {
                var t = n.component;
                e(n, 4, 0, t.tech.getTechName()), e(n, 5, 0, Vi(1, "", t.id, "")), e(n, 6, 0, t.tech.getDescription()), e(n, 10, 0, t.tech.getResearchPoints(), t.tech.getRequiredResearchPoints())
            })
        }

        function IS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "div", [["class", "title"]], null, null, null, null, null)), (e()(), lo(-1, null, ["Cost:"])), (e()(), Yi(2, 0, null, null, 0, "br", [], null, null, null, null, null))], null, null)
        }

        function AS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, null, null, null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "div", [], null, null, null, null, null)), (e()(), lo(2, null, ["", ""]))], null, function (e, n) {
                e(n, 2, 0, n.parent.context.$implicit.value)
            })
        }

        function wS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, null, null, null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "div", [["class", "notMet"]], null, null, null, null, null)), (e()(), lo(2, null, ["", ""]))], null, function (e, n) {
                e(n, 2, 0, n.parent.context.$implicit.value)
            })
        }

        function NS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 6, "div", [["class", "icon"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, AS)), kl(2, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, wS)), kl(4, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(5, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(6, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 2, 0, t.hasResource(n.context.$implicit)), e(n, 4, 0, !t.hasResource(n.context.$implicit)), e(n, 6, 0, t.getResourceName(n.context.$implicit.key), "resources")
            }, null)
        }

        function PS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [], null, null, null, null, null)), (e()(), lo(1, null, [" ", " "]))], null, function (e, n) {
                e(n, 1, 0, n.component.getPrerequisiteName(n.context.$implicit))
            })
        }

        function DS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [], null, null, null, null, null)), (e()(), lo(1, null, [" ", " "]))], null, function (e, n) {
                e(n, 1, 0, n.component.getFlagPrerequisiteName(n.context.$implicit))
            })
        }

        function kS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 7, "div", [["class", "prerequisites"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 2, "div", [["class", "title"]], null, null, null, null, null)), (e()(), lo(-1, null, ["Prerequisites:"])), (e()(), Yi(3, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, PS)), kl(5, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, DS)), kl(7, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 5, 0, t.getMissingPrerequisites()), e(n, 7, 0, t.getMissingFlagPrerequisites())
            }, null)
        }

        function MS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 16, "div", [["appTooltip", ""], ["class", "tooltip"], ["id", "wrapperNotAvailable"]], null, [[null, "click"], [null, "mousemove"]], function (e, n, t) {
                var r = !0,
                    i = e.component;
                return "mousemove" === n && (r = !1 !== El(e, 1).onmousemove(t) && r), "click" === n && (r = !1 !== i.start() && r), r
            }, null, null)), kl(1, 16384, null, 0, av, [], {
                elementId: [0, "elementId"]
            }, null), (e()(), Yi(2, 0, null, null, 1, "div", [["id", "titleGrey"]], null, null, null, null, null)), (e()(), lo(3, null, ["", ""])), (e()(), Yi(4, 0, null, null, 12, "span", [], [[8, "id", 0]], null, null, null, null)), (e()(), lo(5, null, [" ", ""])), (e()(), Yi(6, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(7, 0, null, null, 0, "hr", [], null, null, null, null, null)), (e()(), Yi(8, 0, null, null, 1, "div", [["class", "title"]], null, null, null, null, null)), (e()(), lo(9, null, ["Research points: ", "/", ""])), (e()(), ji(16777216, null, null, 1, null, IS)), kl(11, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 2, null, NS)), kl(13, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), Ml(0, Ks, [Vr]), (e()(), ji(16777216, null, null, 1, null, kS)), kl(16, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 1, 0, t.id), e(n, 11, 0, t.tech.getCost().size > 0), e(n, 13, 0, hi(n, 13, 0, El(n, 14).transform(t.tech.getCost()))), e(n, 16, 0, t.getMissingPrerequisites().length > 0 || t.getMissingFlagPrerequisites().length > 0)
            }, function (e, n) {
                var t = n.component;
                e(n, 3, 0, t.tech.getTechName()), e(n, 4, 0, Vi(1, "", t.id, "")), e(n, 5, 0, t.tech.getDescription()), e(n, 9, 0, t.tech.getResearchPoints(), t.tech.getRequiredResearchPoints())
            })
        }

        function LS(e) {
            return so(0, [Ql(671088640, 1, {
                progressRef: 0
            }), (e()(), ji(16777216, null, null, 1, null, yS)), kl(2, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, _S)), kl(4, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, MS)), kl(6, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 2, 0, t.tech.isResearched()), e(n, 4, 0, 0 === t.getMissingPrerequisites().length && !t.tech.isResearched()), e(n, 6, 0, t.getMissingPrerequisites().length > 0 && !t.tech.isResearched())
            }, null)
        }
        var xS = function () {
                function e(e, n, t) {
                    this.techService = e, this.villageService = n, this.gameService = t
                }
                return e.prototype.ngOnInit = function () {
                    this.categories = Object.keys(wu), this.categories = this.categories.slice(this.categories.length / 2)
                }, e.prototype.getTechList = function (e) {
                    return this.techService.getTech().filter(function (n) {
                        return n.getCategory() === wu[e]
                    })
                }, e.prototype.getCurrentResearch = function () {
                    return this.techService.getCurrentResearch()
                }, e.prototype.research = function (e) {
                    this.techService.progressTech(e)
                }, e.prototype.isDev = function () {
                    return !Gu.production
                }, e.prototype.getForesight = function () {
                    return this.techService.getForesight()
                }, e.prototype.isResearcher = function () {
                    return this.villageService.getBuildings().filter(function (e) {
                        return e.getBuildingType() === bu.WORKSHOP
                    }).map(function (e) {
                        return e
                    }).filter(function (e) {
                        return e.willResearch()
                    }).length > 0
                }, e.prototype.shouldShowDone = function () {
                    return this.techService.shouldShowDone()
                }, e.prototype.showDone = function () {
                    this.techService.toggleShowDone()
                }, e
            }(),
            FS = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{margin:.7%;height:100%}#categories[_ngcontent-%COMP%]{display:inline-flex;flex-direction:row;border:1px solid #000;height:86%;width:100%;text-align:center}.category[_ngcontent-%COMP%]{text-align:center;flex:0 0 19.75%;display:flex;flex-direction:column;border:1px solid #000;align-items:center}#categoryBody[_ngcontent-%COMP%]{height:100%;width:100%;overflow-y:auto;overflow-x:hidden}.title[_ngcontent-%COMP%]{padding:2px;width:100%;font-weight:bolder;font-size:1em;margin-bottom:5px;display:block;border-bottom:1px solid #000}app-tech[_ngcontent-%COMP%]{display:inline-block;margin-bottom:4px;margin-top:4px;margin-left:-4px;width:75%;font-size:.7em}#researching[_ngcontent-%COMP%]{margin-bottom:8px}#currentTech[_ngcontent-%COMP%]{display:inline-block;width:auto;margin-right:10px}.tech[_ngcontent-%COMP%]{cursor:pointer}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}#noResearchers[_ngcontent-%COMP%]{margin-left:175px;color:#8b0000}.showHiddenButton[_ngcontent-%COMP%]{font-size:.8em;padding:4px;margin-left:auto}"]],
                data: {}
            });

        function US(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 3, "span", [], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "app-tech", [["id", "currentTech"]], null, null, null, LS, mS)), kl(2, 4833280, null, 0, vS, [gS, Ng], {
                tech: [0, "tech"]
            }, null), (e()(), lo(3, null, [" requires ", " more research points "]))], function (e, n) {
                e(n, 2, 0, n.component.getCurrentResearch())
            }, function (e, n) {
                e(n, 3, 0, n.component.getCurrentResearch().getResearchPointsDue())
            })
        }

        function HS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["nothing"]))], null, null)
        }

        function GS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.research(10) && r), r
            }, null, null)), (e()(), lo(-1, null, ["Research"]))], null, null)
        }

        function BS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [["id", "noResearchers"]], null, null, null, null, null)), (e()(), lo(-1, null, ["No workshop set to research."]))], null, null)
        }

        function VS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "showHiddenButton"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.showDone() && r), r
            }, null, null)), (e()(), lo(-1, null, ["show finished"]))], null, null)
        }

        function WS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "showHiddenButton"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.showDone() && r), r
            }, null, null)), (e()(), lo(-1, null, ["hide finished"]))], null, null)
        }

        function jS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-tech", [["class", "tech"]], null, null, null, LS, mS)), kl(1, 4833280, null, 0, vS, [gS, Ng], {
                tech: [0, "tech"]
            }, null)], function (e, n) {
                e(n, 1, 0, n.context.$implicit)
            }, null)
        }

        function YS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 5, "div", [["class", "category"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "span", [["class", "title"]], null, null, null, null, null)), (e()(), lo(2, null, ["", ""])), (e()(), Yi(3, 0, null, null, 2, "span", [["id", "categoryBody"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, jS)), kl(5, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, n) {
                e(n, 5, 0, n.component.getTechList(n.context.$implicit))
            }, function (e, n) {
                e(n, 2, 0, n.context.$implicit)
            })
        }

        function zS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 21, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 7, "div", [["id", "researching"]], null, null, null, null, null)), (e()(), lo(-1, null, [" Researching: "])), (e()(), ji(16777216, null, null, 1, null, US)), kl(4, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, HS)), kl(6, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, GS)), kl(8, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(9, 0, null, null, 9, "div", [["class", "icon"]], null, null, null, null, null)), (e()(), Yi(10, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(11, 114688, null, 0, af, [], {
                name: [0, "name"]
            }, null), (e()(), lo(12, null, ["\xa0", " "])), (e()(), ji(16777216, null, null, 1, null, BS)), kl(14, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, VS)), kl(16, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, WS)), kl(18, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(19, 0, null, null, 2, "div", [["id", "categories"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, YS)), kl(21, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 4, 0, t.getCurrentResearch()), e(n, 6, 0, !t.getCurrentResearch()), e(n, 8, 0, t.isDev()), e(n, 11, 0, "foresight"), e(n, 14, 0, !t.isResearcher()), e(n, 16, 0, !t.shouldShowDone()), e(n, 18, 0, t.shouldShowDone()), e(n, 21, 0, t.categories)
            }, function (e, n) {
                e(n, 12, 0, n.component.getForesight())
            })
        }

        function KS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-research", [], null, null, null, zS, FS)), kl(1, 114688, null, 0, xS, [gS, rS, Cg], null, null)], function (e, n) {
                e(n, 1, 0)
            }, null)
        }
        var qS = al("app-research", xS, KS, {}, {}, []),
            $S = function () {
                return function (e, n, t, r, i, l) {
                    void 0 === i && (i = null), void 0 === l && (l = 1), this.troop = e, this.recruitTime = n, this.strength = t, this.defense = r, this.cost = i, this.level = l
                }
            }(),
            QS = function () {
                function e(e, n, t, r, i, l, o, u) {
                    void 0 === l && (l = new Map), void 0 === o && (o = function (e, n, t) {}), void 0 === u && (u = []), this.squadStrength = 0, this.squadDefense = 0, this.mission = e, this.time = n, this.description = t, this.requiredStrength = r, this.requiredDefense = i, this.cost = l, this.troops = u, this.finish = o
                }
                return e.prototype.clone = function () {
                    return new e(this.mission, this.time, this.description, this.requiredStrength, this.requiredDefense, this.cost, this.finish, this.troops)
                }, e
            }(),
            ZS = function () {
                function e(e, n, t, r, i, l, o) {
                    var u = this;
                    this.resourcesService = e, this.modalService = n, this.logService = t, this.soundService = r, this.calendarService = i, this.effectsService = l, this.servicesService = o, this.missions = [], this.troops = [], this.missionsInProgress = [], this.recruits = [], this.barracksSize = 0, this.invasionThreat = 0, this.defense = 0, this.enemyPower = 0, this.incomingAttack = 0, this.invasionEvaluation = 10, this.stashSize = 0, this.recruitsUpdate = new L, this.missionsUpdate = new L, o.addService(Nu.ARMY, this), this.init(), this.calendarService.registerForDayChange().subscribe(function (e) {
                        u.getEnemyInvasionPower() > u.getDefenseStrength() + u.defense + u.resourcesService.getTotalPeople() / 2 && (u.invasionThreat += u.resourcesService.getResourcesValue() / (100 * Yu)), u.invasionEvaluation -= 1, u.invasionEvaluation <= 0 && 0 === u.incomingAttack && (u.invasionEvaluation = 10, ku.chance((u.invasionThreat - u.defense) / 100) && (u.incomingAttack = ku.randomBetween(20, 50), u.invasionThreat = 0, u.logService.warning("Incoming attack in " + u.incomingAttack + " days!"), u.soundService.playTownBells())), u.incomingAttack > 0 && (u.incomingAttack -= 1, 0 === u.incomingAttack && u.calculateInvasion()), u.enemyPower += 10 / Yu
                    })
                }
                return e.prototype.init = function () {
                    var e = this;
                    this.missions = [], this.missionsInProgress = [], this.troops = [], Array.from(Object.entries(is.MISSIONS)).forEach(function (n) {
                        var t = new Map;
                        n[1].COST.forEach(function (e) {
                            return t.set(e.resource, e.amount)
                        }), e.missions.push(new QS(Ru[n[0]], n[1].TIME, n[1].DESCRIPTION, n[1].REQUIRED_STRENGTH, n[1].REQUIRED_DEFENSE, t, n[1].FINISH))
                    }), Array.from(Object.entries(is.TROOPS)).forEach(function (n) {
                        var t = new Map;
                        n[1].COST.forEach(function (e) {
                            return t.set(e.resource, e.amount)
                        }), e.troops.push([new $S(Iu[n[0]], n[1].RECRUIT_TIME, n[1].STRENGTH, n[1].DEFENSE, t), 0])
                    })
                }, e.prototype.tick = function (e) {
                    var n = this;
                    this.missionsInProgress.forEach(function (e) {
                        e[1] += .1, e[1] >= e[0].time && (e[0].finish(n.servicesService, e[0], n.enemyPower), e[0].troops.forEach(function (e) {
                            n.troops.find(function (n) {
                                return n[0].troop === e[0].troop
                            })[1] += e[1]
                        }), n.logService.log(Au.prepareMissionName(e[0].mission) + " finished"))
                    }), this.missionsInProgress = this.missionsInProgress.filter(function (e) {
                        return e[1] < e[0].time
                    }), this.missionsUpdate.next()
                }, e.prototype.getEnemyInvasionPower = function () {
                    return Math.floor(this.enemyPower / 10)
                }, e.prototype.calculateInvasion = function () {
                    var e = this;
                    this.logService.warning("INVASION");
                    for (var n = this.getEnemyInvasionPower(), t = this.generateArmyOfPower(n), r = function () {
                            var e = i.getRandomTroop(i.troops),
                                n = i.getRandomTroop(t),
                                r = n.strength - e.defense * i.getTroopEffectsMultiplier(e.troop),
                                l = 50;
                            r > 0 ? (l += 2 * r) > 90 && (l = 90) : (l -= 2 * r) < 10 && (l = 10), ku.chance(l / 100) ? i.troops.find(function (n) {
                                return n[0].troop === e.troop
                            })[1] -= 1 : (t.find(function (e) {
                                return e[0].troop === n.troop
                            })[1] -= 1, t = t.filter(function (e) {
                                return e[1] > 0
                            }))
                        }, i = this; t.length > 0 && this.hasTroops(this.troops);) r();
                    if (t.length > 0) {
                        var l = 0;
                        t.forEach(function (e) {
                            return l += e[0].strength * e[1] * 20
                        });
                        for (var o = "<br>", u = [], s = function () {
                                var n = Array.from(a.resourcesService.getResources().values()).filter(function (n) {
                                        return n.amount > e.stashSize
                                    }),
                                    t = ku.randomExcept(n, []);
                                if (void 0 === t) return l = 0, "break";
                                var r = rs.getResource(t.resource),
                                    i = 0;
                                i = ku.randomBetween(1, r.TRADE_VALUE < 10 ? 20 : r.TRADE_VALUE < 50 ? 10 : r.TRADE_VALUE < 300 ? 5 : 2), t.amount - a.stashSize < i && (i = t.amount - a.stashSize), l -= r.TRADE_VALUE * i;
                                var o = u.find(function (e) {
                                    return e.resource === t.resource
                                });
                                o ? o.amount += i : u.push({
                                    resource: t.resource,
                                    amount: i
                                }), a.resourcesService.decreaseResource(t.resource, i, !0)
                            }, a = this; l > 0 && "break" !== s(););
                        u.forEach(function (e) {
                            o += "&emsp;" + e.amount + " " + Au.prepareResourceName(e.resource) + "<br>"
                        }), this.logService.log(u.length > 0 ? "We have been plundered: " + o : "We have been invaded but nothing has been stolen")
                    } else this.logService.log("Invading forces have been defeated"), this.reduceEnemyPower(n)
                }, e.prototype.reduceEnemyPower = function (e) {
                    this.enemyPower -= e, this.enemyPower < 10 && (this.enemyPower = 10)
                }, e.prototype.getTroopEffectsValue = function (e) {
                    var n = 0;
                    return this.effectsService.getArmyEffects().filter(function (n) {
                        return null === n.troop || n.troop === e
                    }).forEach(function (e) {
                        return n += e.effect
                    }), n
                }, e.prototype.getTroopEffectsMultiplier = function (e) {
                    return 1 + this.getTroopEffectsValue(e) / 100
                }, e.prototype.getRandomTroop = function (e) {
                    var n = e.filter(function (e) {
                        return e[1] > 0
                    });
                    return n[ku.randomBetween(0, n.length - 1)][0]
                }, e.prototype.hasTroops = function (e) {
                    var n = !1;
                    return e.forEach(function (e) {
                        e[1] > 0 && (n = !0)
                    }), n
                }, e.prototype.generateArmyOfPower = function (e) {
                    for (var n = [], t = function () {
                            var t = ku.randomElement([{
                                    item: Iu.MILITIA,
                                    chance: 40
                                }, {
                                    item: Iu.SPEARMAN,
                                    chance: 30
                                }, {
                                    item: Iu.ARCHER,
                                    chance: 20
                                }, {
                                    item: Iu.SWORDSMAN,
                                    chance: 10
                                }]),
                                r = is.getTroop(t),
                                i = r.DEFENSE + r.STRENGTH,
                                l = n.find(function (e) {
                                    return e[0].troop === t
                                });
                            l ? l[1] += 1 : n.push([new $S(t, 0, r.STRENGTH, r.DEFENSE, null, 1), 1]), e -= i
                        }; e > 0;) t();
                    return n
                }, e.prototype.load = function (e) {
                    var n = this;
                    this.barracksSize = e.barracksSize, this.invasionThreat = e.invasionThreat, this.defense = e.defense, this.enemyPower = e.enemyPower, this.invasionEvaluation = e.invasionEvaluation, this.incomingAttack = e.incomingAttack, this.stashSize = e.stashSize, e.troops.forEach(function (e) {
                        var t = n.troops.find(function (n) {
                            return n[0].troop === e[0]
                        });
                        t && (t[1] = e[1])
                    }), this.recruits = [], e.recruits.forEach(function (e) {
                        var t = n.troops.find(function (n) {
                            return n[0].troop === e[0]
                        });
                        t && n.recruits.push([t[0], e[1], e[2]])
                    }), this.missionsInProgress = [], e.missionsInProgress.forEach(function (e) {
                        var t = n.missions.find(function (n) {
                            return n.mission === e[0]
                        });
                        t && (e.length < 5 && (e.push(0), e.push(0), e.push([])), t.squadDefense = e[2], t.squadStrength = e[3], t.troops = [], e[4].forEach(function (e) {
                            var r = n.troops.find(function (n) {
                                return n[0].troop === e[0]
                            });
                            r && t.troops.push([new $S(r[0].troop, 0, r[0].strength, r[0].defense), e[1]])
                        }), n.missionsInProgress.push([t, e[1]]))
                    })
                }, e.prototype.save = function () {
                    var e = [];
                    this.troops.forEach(function (n) {
                        return e.push([n[0].troop, n[1]])
                    });
                    var n = [];
                    this.recruits.forEach(function (e) {
                        return n.push([e[0].troop, e[1], e[2]])
                    });
                    var t = [];
                    return this.missionsInProgress.forEach(function (e) {
                        var n = [];
                        e[0].troops.forEach(function (e) {
                            return n.push([e[0].troop, e[1]])
                        }), t.push([e[0].mission, e[1], e[0].squadDefense, e[0].squadStrength, n])
                    }), {
                        barracksSize: this.barracksSize,
                        troops: e,
                        missionsInProgress: t,
                        recruits: n,
                        invasionThreat: this.invasionThreat,
                        defense: this.defense,
                        enemyPower: this.enemyPower,
                        invasionEvaluation: this.invasionEvaluation,
                        incomingAttack: this.incomingAttack,
                        stashSize: this.stashSize
                    }
                }, e.prototype.reset = function (e, n) {
                    this.missions = [], this.troops = [], this.missionsInProgress = [], this.recruits = [], this.barracksSize = 0, this.invasionThreat = 0, this.defense = 0, this.enemyPower = 0, this.incomingAttack = 0, this.invasionEvaluation = 10, this.stashSize = 0, this.init()
                }, e.prototype.progressRecruitment = function (e) {
                    var n = this;
                    this.recruits.length > 0 && (this.recruits[0][2] += e, this.recruits[0][2] >= this.recruits[0][0].recruitTime && (this.troops.find(function (e) {
                        return e[0].troop === n.recruits[0][0].troop
                    })[1] += 1, this.recruits[0][1] -= 1, this.recruits[0][2] = 0, 0 === this.recruits[0][1] && this.recruits.shift()), this.recruitsUpdate.next())
                }, e.prototype.recruit = function (e, n) {
                    this.getFreeBarracks() >= n ? this.resourcesService.getPeople() >= n ? this.resourcesService.decreaseResources(e.cost, !0, n) && (this.resourcesService.removeRecruit(n), this.recruits.push([e, n, 0])) : this.modalService.info("Not enough unemployed people to recruit!") : this.modalService.info("Not enough space in barracks for so many recruits")
                }, e.prototype.getRecruits = function () {
                    return this.recruits
                }, e.prototype.getMissions = function () {
                    return this.missions
                }, e.prototype.getCurrentMissions = function () {
                    return this.missionsInProgress
                }, e.prototype.getTroops = function () {
                    return this.troops
                }, e.prototype.getArmySize = function () {
                    var e = 0;
                    return this.troops.forEach(function (n) {
                        return e += n[1]
                    }), this.recruits.forEach(function (n) {
                        return e += n[1]
                    }), this.missionsInProgress.forEach(function (n) {
                        n[0].troops.forEach(function (n) {
                            return e += n[1]
                        })
                    }), e
                }, e.prototype.getFreeBarracks = function () {
                    return this.barracksSize - this.getArmySize()
                }, e.prototype.increaseBarracks = function (e) {
                    this.barracksSize += e
                }, e.prototype.decreaseBarracks = function (e) {
                    this.barracksSize -= e
                }, e.prototype.getBarracksSize = function () {
                    return this.barracksSize
                }, e.prototype.getDefenseStrength = function () {
                    var e = this.defense;
                    return this.troops.forEach(function (n) {
                        return e += n[0].defense * n[1]
                    }), e
                }, e.prototype.getInvasionThreat = function () {
                    return Math.floor(this.invasionThreat)
                }, e.prototype.increaseDefense = function (e) {
                    this.defense += e
                }, e.prototype.decreaseDefense = function (e) {
                    this.defense -= e
                }, e.prototype.hasRecruits = function () {
                    return this.recruits.length > 0
                }, e.prototype.registerForRecruitsUpdate = function () {
                    return this.recruitsUpdate.asObservable()
                }, e.prototype.registerForMissionsUpdate = function () {
                    return this.missionsUpdate.asObservable()
                }, e.prototype.getAttackStrength = function () {
                    var e = 0;
                    return this.troops.forEach(function (n) {
                        return e += n[0].strength * n[1]
                    }), e
                }, e.prototype.startMission = function (e) {
                    var n = this;
                    this.modalService.open(mu.MISSION), this.modalService.setMission(e);
                    var t = this.modalService.registerForMissionResponse().subscribe(function (r) {
                        if (t.unsubscribe(), null != r) {
                            var i = !0,
                                l = 0,
                                o = 0,
                                u = 0;
                            if (r.troops.forEach(function (e) {
                                    if (l += e[1], o += e[1] * e[0].strength * n.getTroopEffectsMultiplier(e[0].troop), u += e[1] * e[0].defense * n.getTroopEffectsMultiplier(e[0].troop), i) {
                                        var t = n.troops.find(function (n) {
                                            return n[0].troop === e[0].troop
                                        });
                                        e[1] > t[1] && (i = !1, n.modalService.info("You don't have so many " + Au.prepareTroopName(t[0].troop)))
                                    }
                                }), 0 === l ? (n.modalService.info("You cannot start mission without any troops"), i = !1) : o < r.requiredStrength ? (n.modalService.info("Selected troops don't meet strength requirement"), i = !1) : u < r.requiredDefense && (n.modalService.info("Selected troops don't meet defense requirement"), i = !1), !i) return;
                            if (!n.resourcesService.decreaseResources(r.cost, !0, l)) return void n.modalService.info("You don't have enough resources to start this mission");
                            r.troops.forEach(function (e) {
                                n.troops.find(function (n) {
                                    return n[0].troop === e[0].troop
                                })[1] -= e[1]
                            }), n.missionsInProgress.push([e, 0])
                        }
                    })
                }, e.prototype.addMilitia = function (e) {
                    this.troops.find(function (e) {
                        return e[0].troop === Iu.MILITIA
                    })[1] += e
                }, e.prototype.decreaseInvasionThreat = function (e) {
                    this.invasionThreat -= e
                }, e.prototype.increaseStash = function (e) {
                    this.stashSize += e
                }, e.prototype.decreaseStash = function (e) {
                    this.stashSize -= e
                }, e.prototype.getEnemyPower = function () {
                    return this.enemyPower
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(Ng), ze(Rg), ze(Og), ze(Am), ze(bg), ze(Yg), ze(vg))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            XS = function () {
                function e(e, n) {
                    this.armyService = e, this.resourcesService = n, this.id = Math.random(), this.progress = 0
                }
                return e.prototype.ngOnInit = function () {
                    var e = this;
                    this.updateSubscription = this.armyService.registerForRecruitsUpdate().subscribe(function () {
                        e.progressRef && (e.progressRef.nativeElement.style.width = e.progress / e.troop.recruitTime * 100 + "%")
                    })
                }, e.prototype.ngAfterViewInit = function () {
                    this.progressRef && (this.progressRef.nativeElement.style.width = this.progress / this.troop.recruitTime * 100 + "%")
                }, e.prototype.getTroopName = function () {
                    return Iu[this.troop.troop]
                }, e.prototype.getResourceName = function (e) {
                    return Au.prepareResourceName(e)
                }, e.prototype.getCost = function () {
                    return this.troop.cost
                }, e.prototype.checkResource = function (e) {
                    return 0 === this.resourcesService.hasResource(e.key, e.value, !0)
                }, e
            }(),
            JS = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{position:relative;display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #000;font-size:1.2em}#text[_ngcontent-%COMP%]{position:relative;z-index:2}#progressId[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background-color:var(--active-colour);z-index:1}hr[_ngcontent-%COMP%]{border-color:#000}.costTitle[_ngcontent-%COMP%], .statsTitle[_ngcontent-%COMP%]{text-align:left}.tooltipSpan[_ngcontent-%COMP%]{min-width:125px}.missing[_ngcontent-%COMP%]{color:#8b0000}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center}"]],
                data: {}
            });

        function eE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, null, null, null, null, null, null, null)), (e()(), lo(1, null, ["", ""]))], null, function (e, n) {
                e(n, 1, 0, n.parent.context.$implicit.value)
            })
        }

        function nE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, null, null, null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "div", [["class", "missing"]], null, null, null, null, null)), (e()(), lo(2, null, ["", ""]))], null, function (e, n) {
                e(n, 2, 0, n.parent.context.$implicit.value)
            })
        }

        function tE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 7, "div", [], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 6, "div", [["class", "icon"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, eE)), kl(3, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, nE)), kl(5, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(6, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(7, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 3, 0, t.checkResource(n.context.$implicit)), e(n, 5, 0, !t.checkResource(n.context.$implicit)), e(n, 7, 0, t.getResourceName(n.context.$implicit.key), "resources")
            }, null)
        }

        function rE(e) {
            return so(0, [Ml(0, zs, []), Ql(402653184, 1, {
                progressRef: 0
            }), (e()(), Yi(2, 0, null, null, 23, "div", [["appTooltip", ""], ["class", "tooltip"], ["id", "wrapper"]], null, [[null, "mousemove"]], function (e, n, t) {
                var r = !0;
                return "mousemove" === n && (r = !1 !== El(e, 3).onmousemove(t) && r), r
            }, null, null)), kl(3, 16384, null, 0, av, [], {
                elementId: [0, "elementId"]
            }, null), (e()(), Yi(4, 0, [[1, 0], ["progressId", 1]], null, 0, "div", [["id", "progressId"]], null, null, null, null, null)), (e()(), Yi(5, 0, null, null, 18, "span", [["class", "tooltipSpan"]], [[8, "id", 0]], null, null, null, null)), (e()(), lo(6, null, [" ", " "])), to(7, 1), (e()(), Yi(8, 0, null, null, 0, "hr", [], null, null, null, null, null)), (e()(), Yi(9, 0, null, null, 1, "div", [["class", "statsTitle"]], null, null, null, null, null)), (e()(), lo(-1, null, ["Stats:"])), (e()(), Yi(11, 0, null, null, 3, "div", [["class", "icon"]], null, null, null, null, null)), (e()(), Yi(12, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(13, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null), (e()(), lo(14, null, [": ", ""])), (e()(), Yi(15, 0, null, null, 3, "div", [["class", "icon"]], null, null, null, null, null)), (e()(), Yi(16, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(17, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null), (e()(), lo(18, null, [": ", ""])), (e()(), Yi(19, 0, null, null, 1, "div", [["class", "costTitle"]], null, null, null, null, null)), (e()(), lo(-1, null, ["Cost:"])), (e()(), ji(16777216, null, null, 2, null, tE)), kl(22, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), Ml(0, Ks, [Vr]), (e()(), Yi(24, 0, null, null, 1, "div", [["id", "text"]], null, null, null, null, null)), (e()(), lo(25, null, ["", " - ", ""]))], function (e, n) {
                var t = n.component;
                e(n, 3, 0, t.id), e(n, 13, 0, "attack", "army"), e(n, 17, 0, "defense", "army"), e(n, 22, 0, hi(n, 22, 0, El(n, 23).transform(t.getCost())))
            }, function (e, n) {
                var t = n.component;
                e(n, 5, 0, Vi(1, "", t.id, ""));
                var r = hi(n, 6, 0, e(n, 7, 0, El(n, 0), t.getTroopName()));
                e(n, 6, 0, r), e(n, 14, 0, t.troop.strength), e(n, 18, 0, t.troop.defense), e(n, 25, 0, t.getTroopName(), t.count)
            })
        }
        var iE = function () {
                function e(e) {
                    this.armyService = e, this.progress = 0, this.id = Math.random()
                }
                return e.prototype.ngOnInit = function () {
                    var e = this;
                    this.updateSubscription = this.armyService.registerForMissionsUpdate().subscribe(function () {
                        e.progressRef && (e.progressRef.nativeElement.style.width = e.progress / e.mission.time * 100 + "%")
                    })
                }, e.prototype.ngAfterViewInit = function () {
                    this.progressRef && (this.progressRef.nativeElement.style.width = this.progress / this.mission.time * 100 + "%")
                }, e.prototype.getMissionName = function (e) {
                    return Ru[e]
                }, e
            }(),
            lE = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #000;font-size:1.2em}#text[_ngcontent-%COMP%]{position:relative;z-index:2}#progressId[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background-color:var(--active-colour);z-index:1}"]],
                data: {}
            });

        function oE(e) {
            return so(0, [Ql(402653184, 1, {
                progressRef: 0
            }), (e()(), Yi(1, 0, null, null, 6, "div", [["appTooltip", ""], ["class", "tooltip"], ["id", "wrapper"]], null, [[null, "mousemove"]], function (e, n, t) {
                var r = !0;
                return "mousemove" === n && (r = !1 !== El(e, 2).onmousemove(t) && r), r
            }, null, null)), kl(2, 16384, null, 0, av, [], {
                elementId: [0, "elementId"]
            }, null), (e()(), Yi(3, 0, [[1, 0], ["progressId", 1]], null, 0, "div", [["id", "progressId"]], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 1, "div", [["id", "text"]], null, null, null, null, null)), (e()(), lo(5, null, ["", ""])), (e()(), Yi(6, 0, null, null, 1, "span", [], [[8, "id", 0]], null, null, null, null)), (e()(), lo(7, null, [" ", " "]))], function (e, n) {
                e(n, 2, 0, n.component.id)
            }, function (e, n) {
                var t = n.component;
                e(n, 5, 0, t.getMissionName(t.mission.mission)), e(n, 6, 0, Vi(1, "", t.id, "")), e(n, 7, 0, t.mission.description)
            })
        }
        var uE = function () {
                function e(e, n, t) {
                    this.armyService = e, this.resourcesService = n, this.changeDetectorRef = t, this.selection = 1
                }
                return e.prototype.ngOnInit = function () {
                    var e = this;
                    this.armyService.registerForRecruitsUpdate().subscribe(function () {
                        e.changeDetectorRef.destroyed || e.changeDetectorRef.detectChanges()
                    })
                }, e.prototype.changeSelection = function (e) {
                    this.selection = e
                }, e.prototype.getMissions = function () {
                    return this.armyService.getMissions()
                }, e.prototype.getCurrentMissions = function () {
                    return this.armyService.getCurrentMissions()
                }, e.prototype.getTroops = function () {
                    return this.armyService.getTroops()
                }, e.prototype.getRecruits = function () {
                    return this.armyService.getRecruits()
                }, e.prototype.recruit = function (e) {
                    this.armyService.recruit(e, this.selection)
                }, e.prototype.isDev = function () {
                    return !Gu.production
                }, e.prototype.progress = function () {
                    this.armyService.progressRecruitment(10)
                }, e.prototype.getBarracksSize = function () {
                    return this.armyService.getBarracksSize()
                }, e.prototype.getTroopsSize = function () {
                    return this.armyService.getArmySize()
                }, e.prototype.getUnemployed = function () {
                    return this.resourcesService.getPeople()
                }, e.prototype.getDefenseStrength = function () {
                    return this.armyService.getDefenseStrength()
                }, e.prototype.getInvasionThreat = function () {
                    return this.armyService.getInvasionThreat()
                }, e.prototype.getAttackStrength = function () {
                    return this.armyService.getAttackStrength()
                }, e.prototype.startMission = function (e) {
                    this.armyService.startMission(e)
                }, e
            }(),
            sE = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{margin:.7%;height:100%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#categories[_ngcontent-%COMP%]{display:flex;flex-direction:row;border:1px solid #000;height:91.5%;text-align:center}.category[_ngcontent-%COMP%]{text-align:center;flex:0 0 33%;display:flex;flex-direction:column;border:1px solid #000;align-items:center}.category2[_ngcontent-%COMP%]{flex:auto;display:flex;flex-direction:column;border:1px solid #000}.recruits[_ngcontent-%COMP%]{text-align:center;flex:0 0 50%;display:flex;flex-direction:column;align-items:center;overflow-y:auto;overflow-x:hidden;border-bottom:1px solid #000}.missionsInProgress[_ngcontent-%COMP%]{text-align:center;flex:0 0 50%;display:flex;flex-direction:column;align-items:center;overflow-y:auto;overflow-x:hidden}.category3[_ngcontent-%COMP%]:last-of-type{border-top:1px solid #000}.title[_ngcontent-%COMP%]{padding:2px;width:100%;font-weight:bolder;font-size:.9em;margin-bottom:5px;display:block;border-bottom:1px solid #000}#numbers[_ngcontent-%COMP%]{margin-top:-6px;padding:0;margin-bottom:5px}.number[_ngcontent-%COMP%]{border:1px solid #000;padding:2px 4px;background-color:var(--passive-colour);font-size:.75em;cursor:pointer}.active[_ngcontent-%COMP%], .number[_ngcontent-%COMP%]:hover{background-color:var(--active-colour)}app-mission[_ngcontent-%COMP%]{display:inline-block;margin:4px;width:75%;font-size:.7em}app-troop[_ngcontent-%COMP%]{display:inline-block;margin:4px;width:75%;font-size:.7em;cursor:pointer}.mission[_ngcontent-%COMP%]{cursor:pointer}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]],
                data: {}
            });

        function aE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [["class", "number"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.changeSelection(1) && r), r
            }, null, null)), (e()(), lo(-1, null, ["1x"]))], null, null)
        }

        function cE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [["class", "number active"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.changeSelection(1) && r), r
            }, null, null)), (e()(), lo(-1, null, ["1x"]))], null, null)
        }

        function pE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [["class", "number"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.changeSelection(10) && r), r
            }, null, null)), (e()(), lo(-1, null, ["10x"]))], null, null)
        }

        function hE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [["class", "number active"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.changeSelection(10) && r), r
            }, null, null)), (e()(), lo(-1, null, ["10x"]))], null, null)
        }

        function dE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [["class", "number"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.changeSelection(100) && r), r
            }, null, null)), (e()(), lo(-1, null, ["100x"]))], null, null)
        }

        function fE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [["class", "number active"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.changeSelection(100) && r), r
            }, null, null)), (e()(), lo(-1, null, ["100x"]))], null, null)
        }

        function gE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-troop", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.recruit(e.context.$implicit[0]) && r), r
            }, rE, JS)), kl(1, 4308992, null, 0, XS, [ZS, Ng], {
                troop: [0, "troop"],
                count: [1, "count"]
            }, null)], function (e, n) {
                e(n, 1, 0, n.context.$implicit[0], n.context.$implicit[1])
            }, null)
        }

        function vE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-mission", [["class", "mission"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.startMission(e.context.$implicit) && r), r
            }, oE, lE)), kl(1, 4308992, null, 0, iE, [ZS], {
                mission: [0, "mission"]
            }, null)], function (e, n) {
                e(n, 1, 0, n.context.$implicit)
            }, null)
        }

        function mE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.progress() && r), r
            }, null, null)), (e()(), lo(-1, null, ["recruit"]))], null, null)
        }

        function yE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-troop", [], null, null, null, rE, JS)), kl(1, 4308992, null, 0, XS, [ZS, Ng], {
                troop: [0, "troop"],
                count: [1, "count"],
                progress: [2, "progress"]
            }, null)], function (e, n) {
                e(n, 1, 0, n.context.$implicit[0], n.context.$implicit[1], n.context.$implicit[2])
            }, null)
        }

        function SE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-mission", [], null, null, null, oE, lE)), kl(1, 4308992, null, 0, iE, [ZS], {
                mission: [0, "mission"],
                progress: [1, "progress"],
                id: [2, "id"]
            }, null)], function (e, n) {
                e(n, 1, 0, n.context.$implicit[0], n.context.$implicit[1], n.context.index)
            }, null)
        }

        function EE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 55, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "div", [["id", "title"]], null, null, null, null, null)), (e()(), lo(-1, null, ["Army"])), (e()(), Yi(3, 0, null, null, 15, "div", [["class", "icon"]], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(5, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"],
                title: [2, "title"]
            }, null), (e()(), lo(6, null, ["\xa0", "/", " \xa0\xa0 "])), (e()(), Yi(7, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(8, 114688, null, 0, af, [], {
                name: [0, "name"],
                title: [1, "title"],
                margin: [2, "margin"]
            }, null), (e()(), lo(9, null, ["\xa0", " \xa0\xa0\xa0 "])), (e()(), Yi(10, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(11, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"],
                title: [2, "title"]
            }, null), (e()(), lo(12, null, ["\xa0", " \xa0\xa0\xa0 "])), (e()(), Yi(13, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(14, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"],
                title: [2, "title"]
            }, null), (e()(), lo(15, null, ["\xa0", " \xa0\xa0\xa0 "])), (e()(), Yi(16, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(17, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"],
                title: [2, "title"]
            }, null), (e()(), lo(18, null, ["\xa0", " "])), (e()(), Yi(19, 0, null, null, 36, "div", [["id", "categories"]], null, null, null, null, null)), (e()(), Yi(20, 0, null, null, 17, "div", [["class", "category"]], null, null, null, null, null)), (e()(), Yi(21, 0, null, null, 1, "span", [["class", "title"]], null, null, null, null, null)), (e()(), lo(-1, null, ["GARRISON"])), (e()(), Yi(23, 0, null, null, 12, "div", [["id", "numbers"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, aE)), kl(25, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, cE)), kl(27, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, pE)), kl(29, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, hE)), kl(31, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, dE)), kl(33, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, fE)), kl(35, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, gE)), kl(37, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), (e()(), Yi(38, 0, null, null, 4, "div", [["class", "category"]], null, null, null, null, null)), (e()(), Yi(39, 0, null, null, 1, "span", [["class", "title"]], null, null, null, null, null)), (e()(), lo(-1, null, ["MISSIONS"])), (e()(), ji(16777216, null, null, 1, null, vE)), kl(42, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), (e()(), Yi(43, 0, null, null, 12, "div", [["class", "category2"]], null, null, null, null, null)), (e()(), Yi(44, 0, null, null, 6, "div", [["class", "recruits"]], null, null, null, null, null)), (e()(), Yi(45, 0, null, null, 1, "span", [["class", "title"]], null, null, null, null, null)), (e()(), lo(-1, null, ["RECRUITS"])), (e()(), ji(16777216, null, null, 1, null, mE)), kl(48, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, yE)), kl(50, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), (e()(), Yi(51, 0, null, null, 4, "div", [["class", "missionsInProgress"]], null, null, null, null, null)), (e()(), Yi(52, 0, null, null, 1, "span", [["class", "title"]], null, null, null, null, null)), (e()(), lo(-1, null, ["MISSIONS IN PROGRESS"])), (e()(), ji(16777216, null, null, 1, null, SE)), kl(55, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 5, 0, "barracks", "army", "Barracks"), e(n, 8, 0, "hammer", "Workers", "0 0 0 2px"), e(n, 11, 0, "invasion", "army", "Invasion threat"), e(n, 14, 0, "attack", "army", "Attack strength"), e(n, 17, 0, "defense", "army", "Defense strength"), e(n, 25, 0, 1 !== t.selection), e(n, 27, 0, 1 === t.selection), e(n, 29, 0, 10 !== t.selection), e(n, 31, 0, 10 === t.selection), e(n, 33, 0, 100 !== t.selection), e(n, 35, 0, 100 === t.selection), e(n, 37, 0, t.getTroops()), e(n, 42, 0, t.getMissions()), e(n, 48, 0, t.isDev()), e(n, 50, 0, t.getRecruits()), e(n, 55, 0, t.getCurrentMissions())
            }, function (e, n) {
                var t = n.component;
                e(n, 6, 0, t.getTroopsSize(), t.getBarracksSize()), e(n, 9, 0, t.getUnemployed()), e(n, 12, 0, t.getInvasionThreat()), e(n, 15, 0, t.getAttackStrength()), e(n, 18, 0, t.getDefenseStrength())
            })
        }

        function bE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-army", [], null, null, null, EE, sE)), kl(1, 114688, null, 0, uE, [ZS, Ng, Rr], null, null)], function (e, n) {
                e(n, 1, 0)
            }, null)
        }
        var OE = al("app-army", uE, bE, {}, {}, []),
            RE = function () {
                return function (e, n, t, r, i, l) {
                    this.prayer = e, this.cost = n, this.requiredFaithLevel = t, this.religion = r, this.description = i, this.effect = l
                }
            }(),
            TE = function () {
                function e(e, n, t) {
                    this.servicesService = e, this.modalService = n, this.resourcesService = t, this.faith = 0, this.faithCap = 40, this.faithLevel = 1, this.faithShield = 0, this.religion = _u.NONE, this.prayers = [], e.addService(Nu.RELIGION, this), this.initPrayers()
                }
                return e.prototype.initPrayers = function () {
                    var e = this;
                    this.prayers = [], Object.entries(ss.PRAYERS).forEach(function (n) {
                        e.prayers.push(new RE(Ou[n[0]], n[1].FAITH, n[1].FAITH_LEVEL, n[1].RELIGION, n[1].DESCRIPTION, n[1].FINISH))
                    })
                }, e.prototype.load = function (e) {
                    this.faith = e.faith, this.faithCap = e.faithCap, this.faithLevel = e.faithLevel, this.religion = e.religion, this.faithShield = e.faithShield, this.prayers.find(function (e) {
                        return e.prayer === Ou.PREACH
                    }).cost = e.preachCost
                }, e.prototype.save = function () {
                    return {
                        faith: this.faith,
                        faithCap: this.faithCap,
                        faithLevel: this.faithLevel,
                        religion: this.religion,
                        faithShield: this.faithShield,
                        preachCost: this.prayers.find(function (e) {
                            return e.prayer === Ou.PREACH
                        }).cost
                    }
                }, e.prototype.reset = function (e, n) {
                    this.faith = 0, this.faithCap = 40, this.faithLevel = 1, this.faithShield = 0, this.religion = _u.NONE, this.prayers = [], this.initPrayers()
                }, e.prototype.getFaith = function () {
                    return this.faith
                }, e.prototype.increaseFaith = function (e) {
                    this.faith += e, this.faith > this.faithCap && (this.faith = this.faithCap)
                }, e.prototype.increaseFaithCap = function (e) {
                    this.faithCap += e
                }, e.prototype.decreaseFaithCap = function (e) {
                    this.faithCap -= e, this.faith > this.faithCap && (this.faith = this.faithCap)
                }, e.prototype.decreaseFaith = function (e) {
                    return this.faith - e >= 0 ? (this.faith -= e, 0) : e - this.faith
                }, e.prototype.getFaithCap = function () {
                    return this.faithCap
                }, e.prototype.getPrayers = function () {
                    var e = this;
                    return this.prayers.filter(function (n) {
                        return (n.religion === _u.NONE || n.religion === e.religion) && n.requiredFaithLevel <= e.faithLevel
                    })
                }, e.prototype.pray = function (e) {
                    e.cost <= this.faith ? (this.faith -= e.cost, e.effect(this.servicesService), e.prayer === Ou.PREACH && (this.prayers.find(function (e) {
                        return e.prayer === Ou.PREACH
                    }).cost += 10)) : this.modalService.info("Not enough faith for this prayer!")
                }, e.prototype.increaseFaithLevel = function (e) {
                    this.faithLevel += e
                }, e.prototype.increaseFaithShield = function (e) {
                    this.faithShield += e
                }, e.prototype.decreaseFaithShield = function (e) {
                    if (this.faithShield >= e) return this.faithShield -= e, 0;
                    var n = e - this.faithShield;
                    return this.faithShield = 0, n
                }, e.prototype.getFaithLevel = function () {
                    return this.faithLevel
                }, e.prototype.getFaithShield = function () {
                    return this.faithShield
                }, e.prototype.getCurrentReligion = function () {
                    return this.religion
                }, e.prototype.getReligionSettings = function (e) {
                    return ss.getReligion(e)
                }, e.prototype.changeReligion = function (e) {
                    var n = this;
                    this.modalService.open(mu.CONFIRM), this.modalService.setModalText("Are you sure you want to change religion?");
                    var t = this.modalService.registerForConfirmation().subscribe(function (r) {
                        if (t.unsubscribe(), r) {
                            var i = n.getReligionSettings(e);
                            if (n.faith < i.FAITH) return void n.modalService.info("Not enough faith");
                            var l = new Map;
                            if (i.OFFERING.forEach(function (e) {
                                    return l.set(e.resource, e.amount)
                                }), !n.resourcesService.hasResources(l, !0)) return void n.modalService.info("Not enough offering resources");
                            n.faith -= i.FAITH, n.resourcesService.decreaseResources(l, !0), n.religion = e
                        }
                    })
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(vg), ze(Rg), ze(Ng))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            CE = function () {
                function e(e) {
                    this.religionService = e
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.getPrayerName = function () {
                    return Au.preparePrayerName(this.prayer.prayer)
                }, e.prototype.isAvailable = function () {
                    return this.religionService.getFaith() >= this.prayer.cost
                }, e
            }(),
            _E = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{display:inline-block;width:47%;padding:3px;margin:3px;text-align:center;border:1px solid #000}#wrapperNotAvailable[_ngcontent-%COMP%]{display:inline-block;width:47%;padding:3px;margin:3px;text-align:center;border:1px solid #646464}#titleGrey[_ngcontent-%COMP%]{display:inline-block;color:#646464}.notMet[_ngcontent-%COMP%]{color:#8b0000}.title[_ngcontent-%COMP%]{text-align:left}hr[_ngcontent-%COMP%]{border-color:#000}#progress[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background-color:var(--active-colour);z-index:1}#text[_ngcontent-%COMP%]{position:relative;z-index:2}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center}"]],
                data: {}
            });

        function IE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 9, "div", [["appTooltip", ""], ["class", "tooltip"], ["id", "wrapper"]], null, [[null, "mousemove"]], function (e, n, t) {
                var r = !0;
                return "mousemove" === n && (r = !1 !== El(e, 1).onmousemove(t) && r), r
            }, null, null)), kl(1, 16384, null, 0, av, [], {
                elementId: [0, "elementId"]
            }, null), (e()(), Yi(2, 0, null, null, 1, "div", [["id", "title"]], null, null, null, null, null)), (e()(), lo(3, null, ["", ""])), (e()(), Yi(4, 0, null, null, 5, "span", [], [[8, "id", 0]], null, null, null, null)), (e()(), lo(5, null, [" ", " "])), (e()(), Yi(6, 0, null, null, 0, "hr", [], null, null, null, null, null)), (e()(), lo(7, null, [" ", " "])), (e()(), Yi(8, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(9, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null)], function (e, n) {
                e(n, 1, 0, n.component.id), e(n, 9, 0, "faith", "religion")
            }, function (e, n) {
                var t = n.component;
                e(n, 3, 0, t.getPrayerName()), e(n, 4, 0, Vi(1, "", t.id, "")), e(n, 5, 0, t.prayer.description), e(n, 7, 0, t.prayer.cost)
            })
        }

        function AE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 10, "div", [["appTooltip", ""], ["class", "tooltip"], ["id", "wrapperNotAvailable"]], null, [[null, "mousemove"]], function (e, n, t) {
                var r = !0;
                return "mousemove" === n && (r = !1 !== El(e, 1).onmousemove(t) && r), r
            }, null, null)), kl(1, 16384, null, 0, av, [], {
                elementId: [0, "elementId"]
            }, null), (e()(), Yi(2, 0, null, null, 1, "div", [["id", "titleGrey"]], null, null, null, null, null)), (e()(), lo(3, null, ["", ""])), (e()(), Yi(4, 0, null, null, 6, "span", [], [[8, "id", 0]], null, null, null, null)), (e()(), lo(5, null, [" ", " "])), (e()(), Yi(6, 0, null, null, 0, "hr", [], null, null, null, null, null)), (e()(), Yi(7, 0, null, null, 3, "div", [["class", "icon"]], null, null, null, null, null)), (e()(), lo(8, null, [" ", " "])), (e()(), Yi(9, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(10, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null)], function (e, n) {
                e(n, 1, 0, n.component.id), e(n, 10, 0, "faith", "religion")
            }, function (e, n) {
                var t = n.component;
                e(n, 3, 0, t.getPrayerName()), e(n, 4, 0, Vi(1, "", t.id, "")), e(n, 5, 0, t.prayer.description), e(n, 8, 0, t.prayer.cost)
            })
        }

        function wE(e) {
            return so(0, [(e()(), ji(16777216, null, null, 1, null, IE)), kl(1, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, AE)), kl(3, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 1, 0, t.isAvailable()), e(n, 3, 0, !t.isAvailable())
            }, null)
        }
        var NE = function () {
                function e(e, n) {
                    this.religionService = e, this.resourcesService = n
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.getFaith = function () {
                    return this.religionService.getFaith()
                }, e.prototype.getFaithCap = function () {
                    return this.religionService.getFaithCap()
                }, e.prototype.increaseFaith = function (e) {
                    this.religionService.increaseFaith(e)
                }, e.prototype.isDev = function () {
                    return !Gu.production
                }, e.prototype.getPrayers = function () {
                    return this.religionService.getPrayers()
                }, e.prototype.pray = function (e) {
                    this.religionService.pray(e)
                }, e.prototype.getFaithShield = function () {
                    return Au.round(this.religionService.getFaithShield(), 2)
                }, e.prototype.getReligions = function () {
                    return [_u.NONE, _u.FERTILITY, _u.NATURE, _u.TECHNOLOGY, _u.WAR]
                }, e.prototype.getReligionName = function (e) {
                    return Au.prepareReligionName(e)
                }, e.prototype.getCurrentReligion = function () {
                    return this.religionService.getCurrentReligion()
                }, e.prototype.getCurrentReligionName = function () {
                    return _u[this.getCurrentReligion()]
                }, e.prototype.getCurrentReligionDisplayName = function () {
                    return Au.prepareReligionName(this.getCurrentReligion())
                }, e.prototype.changeReligion = function (e) {
                    this.religionService.changeReligion(e)
                }, e.prototype.getReligionSettings = function (e) {
                    return ss.getReligion(e)
                }, e.prototype.getResourceString = function (e) {
                    return vu[e]
                }, e.prototype.hasResource = function (e) {
                    return 0 === this.resourcesService.hasResource(e.resource, e.amount, !0)
                }, e
            }(),
            PE = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{height:100%;margin:.5%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#table[_ngcontent-%COMP%]{display:flex;flex-direction:row;border:1px solid #000;height:85%}.column[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:auto;border:1px solid #000}#prayers[_ngcontent-%COMP%]{flex:0 0 70%;overflow-y:auto}#religions[_ngcontent-%COMP%]{flex:1 0 auto;overflow-y:auto}.prayer[_ngcontent-%COMP%]{display:inline}.tableTitle[_ngcontent-%COMP%]{border-bottom:1px solid #000;text-align:center}app-prayer[_ngcontent-%COMP%]{cursor:pointer}.faith[_ngcontent-%COMP%]{margin-right:-2px}.religion[_ngcontent-%COMP%]{border:1px solid #000;text-align:center;margin:3px;cursor:pointer}.active[_ngcontent-%COMP%]{background-color:var(--active-colour);cursor:auto}.tooltip[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:100px}.notMet[_ngcontent-%COMP%]{color:#8b0000}.inline[_ngcontent-%COMP%]{display:inline}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.icon2[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center}"]],
                data: {}
            });

        function DE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.increaseFaith(10) && r), r
            }, null, null)), (e()(), lo(-1, null, ["Increase faith"]))], null, null)
        }

        function kE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "div", [["class", "prayer"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "app-prayer", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.pray(e.context.$implicit) && r), r
            }, wE, _E)), kl(2, 114688, null, 0, CE, [TE], {
                prayer: [0, "prayer"],
                id: [1, "id"]
            }, null)], function (e, n) {
                e(n, 2, 0, n.context.$implicit, n.context.index)
            }, null)
        }

        function ME(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [["class", "religion active"]], null, null, null, null, null)), (e()(), lo(1, null, [" ", " "]))], null, function (e, n) {
                e(n, 1, 0, n.component.getReligionName(n.parent.context.$implicit))
            })
        }

        function LE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [["class", "inline"]], null, null, null, null, null)), (e()(), lo(1, null, ["", ""]))], null, function (e, n) {
                e(n, 1, 0, n.component.getReligionSettings(n.parent.parent.context.$implicit).FAITH)
            })
        }

        function xE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [["class", "inline notMet"]], null, null, null, null, null)), (e()(), lo(1, null, ["", ""]))], null, function (e, n) {
                e(n, 1, 0, n.component.getReligionSettings(n.parent.parent.context.$implicit).FAITH)
            })
        }

        function FE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [], null, null, null, null, null)), (e()(), lo(-1, null, ["offering:"]))], null, null)
        }

        function UE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [["class", "inline"]], null, null, null, null, null)), (e()(), lo(1, null, ["", " "]))], null, function (e, n) {
                e(n, 1, 0, n.parent.context.$implicit.amount)
            })
        }

        function HE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [["class", "inline notMet"]], null, null, null, null, null)), (e()(), lo(1, null, ["", " "]))], null, function (e, n) {
                e(n, 1, 0, n.parent.context.$implicit.amount)
            })
        }

        function GE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 7, "div", [], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 6, "div", [["class", "icon2"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, UE)), kl(3, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, HE)), kl(5, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(6, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(7, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 3, 0, t.hasResource(n.context.$implicit)), e(n, 5, 0, !t.hasResource(n.context.$implicit)), e(n, 7, 0, t.getResourceString(n.context.$implicit.resource), "resources")
            }, null)
        }

        function BE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 16, "div", [["appTooltip", ""], ["class", "religion tooltip"]], null, [[null, "click"], [null, "mousemove"]], function (e, n, t) {
                var r = !0,
                    i = e.component;
                return "mousemove" === n && (r = !1 !== El(e, 1).onmousemove(t) && r), "click" === n && (r = !1 !== i.changeReligion(e.parent.context.$implicit) && r), r
            }, null, null)), kl(1, 16384, null, 0, av, [], {
                elementId: [0, "elementId"]
            }, null), (e()(), lo(2, null, [" ", " "])), (e()(), Yi(3, 0, null, null, 13, "span", [], [[8, "id", 0]], null, null, null, null)), (e()(), lo(4, null, [" ", " "])), (e()(), Yi(5, 0, null, null, 0, "hr", [], null, null, null, null, null)), (e()(), Yi(6, 0, null, null, 6, "div", [["class", "icon2"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, LE)), kl(8, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, xE)), kl(10, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(11, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(12, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null), (e()(), ji(16777216, null, null, 1, null, FE)), kl(14, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, GE)), kl(16, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 1, 0, 0 - n.parent.context.$implicit), e(n, 8, 0, t.getFaith() >= t.getReligionSettings(n.parent.context.$implicit).FAITH), e(n, 10, 0, t.getFaith() < t.getReligionSettings(n.parent.context.$implicit).FAITH), e(n, 12, 0, "faith", "religion"), e(n, 14, 0, t.getReligionSettings(n.parent.context.$implicit).OFFERING.length > 0), e(n, 16, 0, t.getReligionSettings(n.parent.context.$implicit).OFFERING)
            }, function (e, n) {
                var t = n.component;
                e(n, 2, 0, t.getReligionName(n.parent.context.$implicit)), e(n, 3, 0, Vi(1, "", 0 - n.parent.context.$implicit, "")), e(n, 4, 0, t.getReligionName(n.parent.context.$implicit))
            })
        }

        function VE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 4, "div", [], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, ME)), kl(2, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, BE)), kl(4, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 2, 0, n.context.$implicit === t.getCurrentReligion()), e(n, 4, 0, n.context.$implicit !== t.getCurrentReligion())
            }, null)
        }

        function WE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 32, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 2, "div", [["id", "title"]], null, null, null, null, null)), (e()(), Yi(2, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["Religion"])), (e()(), Yi(4, 0, null, null, 9, "div", [], null, null, null, null, null)), (e()(), Yi(5, 0, null, null, 1, null, null, null, null, null, null, null)), (e()(), lo(-1, null, ["Faith"])), (e()(), Yi(7, 0, null, null, 1, "app-icon", [["class", "faith"]], null, null, null, pf, cf)), kl(8, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null), (e()(), Yi(9, 0, null, null, 1, null, null, null, null, null, null, null)), (e()(), lo(-1, null, [":"])), (e()(), lo(11, null, [" ", "/", " "])), (e()(), ji(16777216, null, null, 1, null, DE)), kl(13, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(14, 0, null, null, 4, "div", [], null, null, null, null, null)), (e()(), lo(-1, null, [" Faith shield "])), (e()(), Yi(16, 0, null, null, 1, "app-icon", [["class", "prayer"]], null, null, null, pf, cf)), kl(17, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"],
                title: [2, "title"]
            }, null), (e()(), lo(18, null, [" : ", " "])), (e()(), Yi(19, 0, null, null, 13, "div", [["id", "table"]], null, null, null, null, null)), (e()(), Yi(20, 0, null, null, 7, "div", [["class", "column"], ["id", "prayers"]], null, null, null, null, null)), (e()(), Yi(21, 0, null, null, 3, "span", [["class", "tableTitle"]], null, null, null, null, null)), (e()(), lo(-1, null, [" Prayers "])), (e()(), Yi(23, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(24, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"],
                title: [2, "title"]
            }, null), (e()(), Yi(25, 0, null, null, 2, "div", [], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, kE)), kl(27, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), (e()(), Yi(28, 0, null, null, 4, "div", [["class", "column"], ["id", "religions"]], null, null, null, null, null)), (e()(), Yi(29, 0, null, null, 1, "span", [["class", "tableTitle"]], null, null, null, null, null)), (e()(), lo(-1, null, ["Religions"])), (e()(), ji(16777216, null, null, 1, null, VE)), kl(32, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 8, 0, "faith", "religion"), e(n, 13, 0, t.isDev()), e(n, 17, 0, "faith_shield", "religion", "Faith shield"), e(n, 24, 0, t.getCurrentReligionName(), "religion", t.getCurrentReligionDisplayName()), e(n, 27, 0, t.getPrayers()), e(n, 32, 0, t.getReligions())
            }, function (e, n) {
                var t = n.component;
                e(n, 11, 0, t.getFaith(), t.getFaithCap()), e(n, 18, 0, t.getFaithShield())
            })
        }

        function jE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-religion", [], null, null, null, WE, PE)), kl(1, 114688, null, 0, NE, [TE, Ng], null, null)], function (e, n) {
                e(n, 1, 0)
            }, null)
        }
        var YE = al("app-religion", NE, jE, {}, {}, []),
            zE = function () {
                function e(e, n, t) {
                    this.servicesService = e, this.calendarService = n, this.optionsService = t, this.forecastPeriod = 1, this.forecast = [], e.addService(Nu.WEATHER, this), this.tick(0)
                }
                return e.prototype.load = function (e) {
                    this.forecastPeriod = void 0 !== e.forecastPeriod ? e.forecastPeriod : 1, this.forecast = e.forecast
                }, e.prototype.save = function () {
                    return {
                        forecastPeriod: this.forecastPeriod,
                        forecast: this.forecast
                    }
                }, e.prototype.reset = function (e, n) {
                    this.forecastPeriod = 1, this.forecast = [], this.today = null, this.tick(0)
                }, e.prototype.tick = function (e) {
                    for (var n = this.calendarService.getAbsoluteDay(); this.forecast.length > 0 && this.forecast[0][0] < n;) this.forecast.shift();
                    for (; this.forecast.length < this.forecastPeriod;) {
                        var t = n;
                        0 !== this.forecast.length && (t = this.forecast[this.forecast.length - 1][0] + 1), this.forecast.push(this.predictDay(t))
                    }
                    this.today = this.forecast[0]
                }, e.prototype.predictDay = function (e) {
                    var n, t;
                    switch (this.calendarService.getSeasonForAbsoluteDay(e)) {
                        case Eg.SPRING:
                            n = ku.randomBetween(10, 25), t = ku.randomElement([{
                                item: xu.SUN,
                                chance: 40
                            }, {
                                item: xu.CLOUDS,
                                chance: 25
                            }, {
                                item: xu.WIND,
                                chance: 14
                            }, {
                                item: xu.RAIN,
                                chance: 20
                            }, {
                                item: xu.STORM,
                                chance: 1
                            }]);
                            break;
                        case Eg.SUMMER:
                            n = ku.randomBetween(15, 35), t = ku.randomElement([{
                                item: xu.SUN,
                                chance: 50
                            }, {
                                item: xu.CLOUDS,
                                chance: 10
                            }, {
                                item: xu.WIND,
                                chance: 10
                            }, {
                                item: xu.RAIN,
                                chance: 20
                            }, {
                                item: xu.STORM,
                                chance: 10
                            }]);
                            break;
                        case Eg.AUTUMN:
                            n = ku.randomBetween(10, 25), t = ku.randomElement([{
                                item: xu.SUN,
                                chance: 20
                            }, {
                                item: xu.CLOUDS,
                                chance: 40
                            }, {
                                item: xu.WIND,
                                chance: 10
                            }, {
                                item: xu.RAIN,
                                chance: 25
                            }, {
                                item: xu.STORM,
                                chance: 5
                            }]);
                            break;
                        case Eg.WINTER:
                            n = ku.randomBetween(-20, 5), t = ku.randomElement([{
                                item: xu.SUN,
                                chance: 30
                            }, {
                                item: xu.CLOUDS,
                                chance: 20
                            }, {
                                item: xu.WIND,
                                chance: 15
                            }, {
                                item: xu.SNOW,
                                chance: 25
                            }, {
                                item: xu.STORM,
                                chance: 10
                            }])
                    }
                    return [e, t, n]
                }, e.prototype.getCurrentWeather = function () {
                    return this.today[1]
                }, e.prototype.getCurrentTemperature = function () {
                    return this.optionsService.getOption(mg.METRIC) ? this.today[2] : 1.8 * this.today[2] + 32
                }, e.prototype.increaseForecastPeriod = function (e) {
                    this.forecastPeriod += e
                }, e.prototype.isWeather = function () {
                    for (var e = [], n = 0; n < arguments.length; n++) e[n] = arguments[n];
                    return e.includes(this.getCurrentWeather())
                }, e.prototype.getForecast = function () {
                    return this.forecast
                }, e.prototype.getForecastPeriod = function () {
                    return this.forecastPeriod
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(vg), ze(bg), ze(yg))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            KE = function () {
                function e(e, n) {
                    var t = this;
                    this.weatherService = e, this.optionsService = n, this.metric = this.optionsService.getOption(mg.METRIC), this.optionsSubscription || (this.optionsSubscription = this.optionsService.registerForOptionsChange().subscribe(function () {
                        return t.metric = t.optionsService.getOption(mg.METRIC)
                    }))
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.getTodayWeather = function () {
                    return this.weatherService.getCurrentWeather()
                }, e.prototype.getTodayTemperature = function () {
                    return this.weatherService.getCurrentTemperature()
                }, e.prototype.getWeatherName = function (e) {
                    return xu[e].toLowerCase()
                }, e.prototype.getForecast = function () {
                    return this.weatherService.getForecast()
                }, e.prototype.getForecastPeriod = function () {
                    return this.weatherService.getForecastPeriod()
                }, e
            }(),
            qE = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{margin:.5%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#forecast[_ngcontent-%COMP%]{display:flex;flex-direction:row;border:1px solid #000;text-align:center;overflow-x:auto}.weather[_ngcontent-%COMP%]{display:flex;flex:0 0 40px;flex-direction:column;border-right:1px solid #000}.day[_ngcontent-%COMP%]{border-bottom:1px solid #000}"]],
                data: {}
            });

        function $E(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["\xb0C"]))], null, null)
        }

        function QE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["\xb0F"]))], null, null)
        }

        function ZE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [["class", "day"]], null, null, null, null, null)), (e()(), lo(-1, null, ["today"]))], null, null)
        }

        function XE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [["class", "day"]], null, null, null, null, null)), (e()(), lo(1, null, ["+", ""]))], null, function (e, n) {
                e(n, 1, 0, n.parent.context.index)
            })
        }

        function JE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["\xb0C"]))], null, null)
        }

        function eb(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["\xb0F"]))], null, null)
        }

        function nb(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 13, "div", [["class", "weather"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, ZE)), kl(2, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, XE)), kl(4, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(5, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(6, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null), (e()(), Yi(7, 0, null, null, 6, "span", [["id", "temp"]], null, null, null, null, null)), (e()(), lo(8, null, ["", ""])), to(9, 2), (e()(), ji(16777216, null, null, 1, null, JE)), kl(11, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, eb)), kl(13, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 2, 0, 0 === n.context.index), e(n, 4, 0, 0 !== n.context.index), e(n, 6, 0, t.getWeatherName(n.context.$implicit[1]), "weather"), e(n, 11, 0, t.metric), e(n, 13, 0, !t.metric)
            }, function (e, n) {
                var t = hi(n, 8, 0, e(n, 9, 0, El(n.parent.parent, 0), n.context.$implicit[2], "0.0-1"));
                e(n, 8, 0, t)
            })
        }

        function tb(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 4, "div", [], null, null, null, null, null)), (e()(), lo(-1, null, ["Weather forecast: "])), (e()(), Yi(2, 0, null, null, 2, "div", [["id", "forecast"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, nb)), kl(4, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, n) {
                e(n, 4, 0, n.component.getForecast())
            }, null)
        }

        function rb(e) {
            return so(0, [Ml(0, $s, [Kr]), (e()(), Yi(1, 0, null, null, 15, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), Yi(2, 0, null, null, 2, "div", [["id", "title"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["Weather"])), (e()(), lo(5, null, [" Weather: ", " "])), (e()(), Yi(6, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(7, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null), (e()(), Yi(8, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), lo(9, null, [" Temperature: ", ""])), to(10, 2), (e()(), ji(16777216, null, null, 1, null, $E)), kl(12, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, QE)), kl(14, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, tb)), kl(16, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 7, 0, t.getWeatherName(t.getTodayWeather()), "weather"), e(n, 12, 0, t.metric), e(n, 14, 0, !t.metric), e(n, 16, 0, t.getForecastPeriod() > 1)
            }, function (e, n) {
                var t = n.component;
                e(n, 5, 0, t.getWeatherName(t.getTodayWeather()));
                var r = hi(n, 9, 0, e(n, 10, 0, El(n, 0), t.getTodayTemperature(), "0.0-1"));
                e(n, 9, 0, r)
            })
        }

        function ib(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-weather", [], null, null, null, rb, qE)), kl(1, 114688, null, 0, KE, [zE, yg], null, null)], function (e, n) {
                e(n, 1, 0)
            }, null)
        }
        var lb = al("app-weather", KE, ib, {}, {}, []),
            ob = function () {
                function e(e) {
                    this.royalService = e, this.id = Math.random()
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.getPerkName = function () {
                    return Au.preparePerkName(this.perk.perk)
                }, e.prototype.unlock = function () {
                    this.royalService.unlock(this.perk)
                }, e.prototype.isAvailable = function () {
                    return this.royalService.getRoyalPoints() >= this.perk.cost && (0 === this.perk.maxUsages || this.perk.usages < this.perk.maxUsages)
                }, e
            }(),
            ub = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #000}#wrapperNotAvailable[_ngcontent-%COMP%]{display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #57575a}#titleGrey[_ngcontent-%COMP%]{display:inline-block;color:#57575a}.notMet[_ngcontent-%COMP%]{color:#8b0000}.title[_ngcontent-%COMP%]{text-align:left}hr[_ngcontent-%COMP%]{border-color:#000}#progress[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background-color:var(--active-colour);z-index:1}#text[_ngcontent-%COMP%]{position:relative;z-index:2}app-icon[_ngcontent-%COMP%]{margin-top:-3px;height:17px}"]],
                data: {}
            });

        function sb(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [], null, null, null, null, null)), (e()(), lo(1, null, [" Usages: ", "/", " "]))], null, function (e, n) {
                var t = n.component;
                e(n, 1, 0, t.perk.usages, t.perk.maxUsages)
            })
        }

        function ab(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [], null, null, null, null, null)), (e()(), lo(-1, null, [" Usages: unlimited "]))], null, null)
        }

        function cb(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 13, "div", [["appTooltip", ""], ["class", "tooltip"], ["id", "wrapper"]], null, [[null, "click"], [null, "mousemove"]], function (e, n, t) {
                var r = !0,
                    i = e.component;
                return "mousemove" === n && (r = !1 !== El(e, 1).onmousemove(t) && r), "click" === n && (r = !1 !== i.unlock() && r), r
            }, null, null)), kl(1, 16384, null, 0, av, [], {
                elementId: [0, "elementId"]
            }, null), (e()(), Yi(2, 0, null, null, 1, "div", [["id", "text"]], null, null, null, null, null)), (e()(), lo(3, null, ["", ""])), (e()(), Yi(4, 0, null, null, 9, "span", [], [[8, "id", 0]], null, null, null, null)), (e()(), lo(5, null, [" ", ""])), (e()(), Yi(6, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(7, 0, null, null, 0, "hr", [], null, null, null, null, null)), (e()(), lo(8, null, [" Cost: ", " RP "])), (e()(), Yi(9, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, sb)), kl(11, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, ab)), kl(13, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 1, 0, t.id), e(n, 11, 0, t.perk.maxUsages > 0), e(n, 13, 0, 0 === t.perk.maxUsages)
            }, function (e, n) {
                var t = n.component;
                e(n, 3, 0, t.getPerkName()), e(n, 4, 0, Vi(1, "", t.id, "")), e(n, 5, 0, t.perk.description), e(n, 8, 0, t.perk.cost)
            })
        }

        function pb(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(1, 114688, null, 0, af, [], {
                name: [0, "name"]
            }, null)], function (e, n) {
                e(n, 1, 0, "tick")
            }, null)
        }

        function hb(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [], null, null, null, null, null)), (e()(), lo(1, null, [" Usages: ", "/", " "]))], null, function (e, n) {
                var t = n.component;
                e(n, 1, 0, t.perk.usages, t.perk.maxUsages)
            })
        }

        function db(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [], null, null, null, null, null)), (e()(), lo(-1, null, [" Usages: unlimited "]))], null, null)
        }

        function fb(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 15, "div", [["appTooltip", ""], ["class", "tooltip"], ["id", "wrapperNotAvailable"]], null, [[null, "click"], [null, "mousemove"]], function (e, n, t) {
                var r = !0,
                    i = e.component;
                return "mousemove" === n && (r = !1 !== El(e, 1).onmousemove(t) && r), "click" === n && (r = !1 !== i.unlock() && r), r
            }, null, null)), kl(1, 16384, null, 0, av, [], {
                elementId: [0, "elementId"]
            }, null), (e()(), Yi(2, 0, null, null, 3, "div", [["id", "titleGrey"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, pb)), kl(4, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), lo(5, null, ["", ""])), (e()(), Yi(6, 0, null, null, 9, "span", [], [[8, "id", 0]], null, null, null, null)), (e()(), lo(7, null, [" ", ""])), (e()(), Yi(8, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(9, 0, null, null, 0, "hr", [], null, null, null, null, null)), (e()(), lo(10, null, [" Cost: ", " RP "])), (e()(), Yi(11, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, hb)), kl(13, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, db)), kl(15, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 1, 0, t.id), e(n, 4, 0, t.perk.usages === t.perk.maxUsages && t.perk.maxUsages > 0), e(n, 13, 0, t.perk.maxUsages > 0), e(n, 15, 0, 0 === t.perk.maxUsages)
            }, function (e, n) {
                var t = n.component;
                e(n, 5, 0, t.getPerkName()), e(n, 6, 0, Vi(1, "", t.id, "")), e(n, 7, 0, t.perk.description), e(n, 10, 0, t.perk.cost)
            })
        }

        function gb(e) {
            return so(0, [(e()(), ji(16777216, null, null, 1, null, cb)), kl(1, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, fb)), kl(3, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 1, 0, t.isAvailable()), e(n, 3, 0, !t.isAvailable())
            }, null)
        }
        var vb = function () {
                function e(e, n, t) {
                    this.logService = e, this.royalService = n, this.kongregateService = t
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.buyRoyalPoints = function () {
                    this.royalService.buyRoyalPoints()
                }, e.prototype.getRoyalPoints = function () {
                    return this.royalService.getRoyalPoints()
                }, e.prototype.getRoyalPerks = function () {
                    return this.royalService.getRoyalPerks()
                }, e
            }(),
            mb = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{margin:5px;display:flex;flex-direction:column}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}.bold[_ngcontent-%COMP%]{font-weight:600}app-royal-perk[_ngcontent-%COMP%]{font-size:1em;display:inline-block;width:30%;margin:4px 8px;cursor:pointer}"]],
                data: {}
            });

        function yb(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-royal-perk", [], null, null, null, gb, ub)), kl(1, 114688, null, 0, ob, [Ig], {
                perk: [0, "perk"]
            }, null)], function (e, n) {
                e(n, 1, 0, n.context.$implicit)
            }, null)
        }

        function Sb(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 16, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "span", [["id", "title"]], null, null, null, null, null)), (e()(), lo(-1, null, ["Royal perks"])), (e()(), Yi(3, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 6, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["You have "])), (e()(), Yi(6, 0, null, null, 1, "span", [["class", "bold"]], null, null, null, null, null)), (e()(), lo(7, null, ["", ""])), (e()(), lo(-1, null, [" royal points."])), (e()(), Yi(9, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), lo(-1, null, [" You can use them to acquire special upgrades."])), (e()(), Yi(11, 0, null, null, 2, "div", [], null, null, null, null, null)), (e()(), Yi(12, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.buyRoyalPoints() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Buy Royal points"])), (e()(), Yi(14, 0, null, null, 2, "div", [], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, yb)), kl(16, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, n) {
                e(n, 16, 0, n.component.getRoyalPerks())
            }, function (e, n) {
                e(n, 7, 0, n.component.getRoyalPoints())
            })
        }

        function Eb(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-royal", [], null, null, null, Sb, mb)), kl(1, 114688, null, 0, vb, [Og, Ig, Ag], null, null)], function (e, n) {
                e(n, 1, 0)
            }, null)
        }
        var bb = al("app-royal", vb, Eb, {}, {}, []),
            Ob = function () {
                function e(e, n, t, r) {
                    this.servicesService = e, this.resourcesService = n, this.effectsService = t, this.gameService = r, this.id = Math.random()
                }
                return e.prototype.ngOnInit = function () {
                    this.building.hasBuff() && (this.buildingBuff = this.building.getBuff())
                }, e.prototype.hasResource = function (e) {
                    return 0 === this.resourcesService.hasResource(e.key, e.value, !0)
                }, e.prototype.getResourceName = function (e) {
                    return Au.prepareResourceName(e)
                }, e.prototype.buff = function () {
                    var e = this.servicesService.getService(Nu.MODAL);
                    if (this.building.hasBuff() && this.buffsEnabled())
                        if (this.building.isBuffed()) e.info("This building is already buffed");
                        else {
                            var n = this.building.getBuff();
                            this.resourcesService.decreaseResources(n.cost, !0) && this.effectsService.addBuildingEffect(new Du(n.name, this.building.getBuildingType(), n.effect, n.duration, this.building.id))
                        }
                    else e.info("This building cannot be buffed")
                }, e.prototype.buffsEnabled = function () {
                    return this.gameService.isEnabled(Eu.BUFFS)
                }, e
            }(),
            Rb = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{cursor:pointer}img[_ngcontent-%COMP%]{height:24px;width:24px}hr[_ngcontent-%COMP%]{border-color:#000}.notMet[_ngcontent-%COMP%]{color:#8b0000}"]],
                data: {}
            });

        function Tb(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 3, "div", [], null, null, null, null, null)), (e()(), lo(1, null, ["", " "])), (e()(), Yi(2, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(3, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null)], function (e, n) {
                e(n, 3, 0, n.component.getResourceName(n.parent.context.$implicit.key), "resources")
            }, function (e, n) {
                e(n, 1, 0, n.parent.context.$implicit.value)
            })
        }

        function Cb(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 3, "div", [["class", "notMet"]], null, null, null, null, null)), (e()(), lo(1, null, ["", " "])), (e()(), Yi(2, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(3, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null)], function (e, n) {
                e(n, 3, 0, n.component.getResourceName(n.parent.context.$implicit.key), "resources")
            }, function (e, n) {
                e(n, 1, 0, n.parent.context.$implicit.value)
            })
        }

        function _b(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 4, "div", [], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, Tb)), kl(2, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Cb)), kl(4, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 2, 0, t.hasResource(n.context.$implicit)), e(n, 4, 0, !t.hasResource(n.context.$implicit))
            }, null)
        }

        function Ib(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 8, "div", [["appTooltip", ""], ["class", "tooltip"], ["id", "buff"]], null, [[null, "click"], [null, "mousemove"]], function (e, n, t) {
                var r = !0,
                    i = e.component;
                return "mousemove" === n && (r = !1 !== El(e, 1).onmousemove(t) && r), "click" === n && (r = !1 !== i.buff() && r), r
            }, null, null)), kl(1, 16384, null, 0, av, [], {
                elementId: [0, "elementId"]
            }, null), (e()(), Yi(2, 0, null, null, 0, "img", [["src", "assets/buff.svg"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 5, "span", [], [[8, "id", 0]], null, null, null, null)), (e()(), lo(4, null, [" ", " "])), (e()(), Yi(5, 0, null, null, 0, "hr", [], null, null, null, null, null)), (e()(), ji(16777216, null, null, 2, null, _b)), kl(7, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), Ml(0, Ks, [Vr])], function (e, n) {
                var t = n.component;
                e(n, 1, 0, 0 - t.id), e(n, 7, 0, hi(n, 7, 0, El(n, 8).transform(t.buildingBuff.cost)))
            }, function (e, n) {
                var t = n.component;
                e(n, 3, 0, Vi(1, "", 0 - t.id, "")), e(n, 4, 0, t.buildingBuff.name)
            })
        }

        function Ab(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, Ib)), kl(2, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 2, 0, t.buffsEnabled() && t.building.hasBuff() && !t.building.isBuffed())
            }, null)
        }
        var wb = function () {
                function e(e, n) {
                    this.resourcesService = e, this.servicesService = n, this.id = Math.random()
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.hasResource = function (e) {
                    return 0 === this.resourcesService.hasResource(e.key, e.value, !0)
                }, e.prototype.getResourceName = function (e) {
                    return Au.prepareResourceName(e)
                }, e.prototype.upgrade = function () {
                    this.parentRegion.upgradeBuilding(this.building.getBuildingId())
                }, e
            }(),
            Nb = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{cursor:pointer}img[_ngcontent-%COMP%]{height:24px;width:24px}hr[_ngcontent-%COMP%]{border-color:#000}.notMet[_ngcontent-%COMP%]{color:#8b0000}"]],
                data: {}
            });

        function Pb(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 3, "div", [], null, null, null, null, null)), (e()(), lo(1, null, ["", " "])), (e()(), Yi(2, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(3, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null)], function (e, n) {
                e(n, 3, 0, n.component.getResourceName(n.parent.context.$implicit.key), "resources")
            }, function (e, n) {
                e(n, 1, 0, n.parent.context.$implicit.value)
            })
        }

        function Db(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 3, "div", [["class", "notMet"]], null, null, null, null, null)), (e()(), lo(1, null, ["", " "])), (e()(), Yi(2, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(3, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null)], function (e, n) {
                e(n, 3, 0, n.component.getResourceName(n.parent.context.$implicit.key), "resources")
            }, function (e, n) {
                e(n, 1, 0, n.parent.context.$implicit.value)
            })
        }

        function kb(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 4, "div", [], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, Pb)), kl(2, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Db)), kl(4, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 2, 0, t.hasResource(n.context.$implicit)), e(n, 4, 0, !t.hasResource(n.context.$implicit))
            }, null)
        }

        function Mb(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 8, "div", [["appTooltip", ""], ["class", "tooltip"], ["id", "upgrade"]], null, [[null, "click"], [null, "mousemove"]], function (e, n, t) {
                var r = !0,
                    i = e.component;
                return "mousemove" === n && (r = !1 !== El(e, 1).onmousemove(t) && r), "click" === n && (r = !1 !== i.upgrade() && r), r
            }, null, null)), kl(1, 16384, null, 0, av, [], {
                elementId: [0, "elementId"]
            }, null), (e()(), Yi(2, 0, null, null, 0, "img", [["src", "assets/upgrade.svg"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 5, "span", [], [[8, "id", 0]], null, null, null, null)), (e()(), lo(4, null, [" Upgrade to level ", " "])), (e()(), Yi(5, 0, null, null, 0, "hr", [], null, null, null, null, null)), (e()(), ji(16777216, null, null, 2, null, kb)), kl(7, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), Ml(0, Ks, [Vr])], function (e, n) {
                var t = n.component;
                e(n, 1, 0, 0 - t.id), e(n, 7, 0, hi(n, 7, 0, El(n, 8).transform(t.building.getUpgradeCost())))
            }, function (e, n) {
                var t = n.component;
                e(n, 3, 0, Vi(1, "", 0 - t.id, "")), e(n, 4, 0, t.building.getBuildingLevel() + 1)
            })
        }

        function Lb(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, Mb)), kl(2, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, n) {
                e(n, 2, 0, n.component.building.hasUpgrade())
            }, null)
        }
        var xb = function () {
                function e(e) {
                    this.optionsService = e, this.progress = 0, this.text = ""
                }
                return Object.defineProperty(e.prototype, "progressReInput", {
                    set: function (e) {
                        this.progressRef = e, this.ngOnChanges()
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "labelRefInput", {
                    set: function (e) {
                        this.labelRef = e, this.ngOnChanges()
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "label2RefInput", {
                    set: function (e) {
                        this.label2Ref = e, this.ngOnChanges()
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.ngOnInit = function () {}, e.prototype.ngOnChanges = function () {
                    this.progressBarsEnabled() ? (this.progressRef && (this.progressRef.nativeElement.style.width = this.progress + "%"), this.labelRef && (this.labelRef.nativeElement.innerHTML = this.text && "" !== this.text ? this.text : this.progress.toFixed(2) + "%")) : this.label2Ref && (this.label2Ref.nativeElement.innerHTML = this.text, this.label2Ref.nativeElement.innerHTML = this.progress.toFixed(2) + "%")
                }, e.prototype.progressBarsEnabled = function () {
                    return this.optionsService.getOption(mg.VISUAL_PROGRESS_BARS)
                }, e
            }(),
            Fb = gi({
                encapsulation: 0,
                styles: [["#progressBar[_ngcontent-%COMP%]{position:relative;width:95%;height:100%;display:inline-block;text-align:center;background-color:#ddd;border:1px solid #000;margin-top:-1px}#progressBar2[_ngcontent-%COMP%]{position:relative;width:95%;height:100%;display:inline-block;text-align:center;margin-top:-1px}#progress[_ngcontent-%COMP%]{height:100%;background-color:var(--active-colour);text-align:center;color:#fff}#label[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;width:100%;font-size:1.2em;text-align:center}#label2[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;width:100%;font-size:1.2em;text-align:center;font-weight:700}"]],
                data: {}
            });

        function Ub(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "div", [["id", "progressBar"]], null, null, null, null, null)), (e()(), Yi(1, 0, [[1, 0], ["progress", 1]], null, 0, "div", [["id", "progress"]], null, null, null, null, null)), (e()(), Yi(2, 0, [[2, 0], ["label", 1]], null, 0, "div", [["id", "label"]], null, null, null, null, null))], null, null)
        }

        function Hb(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [["id", "progressBar2"]], null, null, null, null, null)), (e()(), Yi(1, 0, [[3, 0], ["label2", 1]], null, 0, "div", [["id", "label2"]], null, null, null, null, null))], null, null)
        }

        function Gb(e) {
            return so(0, [Ql(671088640, 1, {
                progressReInput: 0
            }), Ql(671088640, 2, {
                labelRefInput: 0
            }), Ql(671088640, 3, {
                label2RefInput: 0
            }), (e()(), ji(16777216, null, null, 1, null, Ub)), kl(4, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Hb)), kl(6, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 4, 0, t.progressBarsEnabled()), e(n, 6, 0, !t.progressBarsEnabled())
            }, null)
        }
        var Bb = function () {
                function e() {}
                return e.prototype.ngOnInit = function () {}, e.prototype.isTextValue = function (e) {
                    return e === Pm.TEXT
                }, e.prototype.isButtonValue = function (e) {
                    return e === Pm.BUTTON
                }, e.prototype.isTwoButtonValue = function (e) {
                    return e === Pm.TWO_BUTTON
                }, e.prototype.isProgressValue = function (e) {
                    return e === Pm.PROGRESS_BAR
                }, e.prototype.isDropdownValue = function (e) {
                    return e === Pm.DROPDOWN
                }, e.prototype.isIconValue = function (e) {
                    return e === Pm.ICON
                }, e.prototype.isButtonCheckboxValue = function (e) {
                    return e === Pm.BUTTON_CHECKBOX
                }, e.prototype.buildingCallback = function (e) {
                    this.building.callback(e)
                }, e
            }(),
            Vb = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{font-size:1.3em}.iconsLine[_ngcontent-%COMP%]{display:flex;flex-direction:row}.iconsLine[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:auto}.line[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:3px 4px}button[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{font-size:.9em}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center}.icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:2px;flex:0 0 auto}"]],
                data: {}
            });

        function Wb(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 5, "span", [], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 4, "span", [["class", "icon"]], null, null, null, null, null)), (e()(), Yi(2, 0, null, null, 0, "span", [], [[8, "innerHTML", 1]], null, null, null, null)), (e()(), Yi(3, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(4, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null), (e()(), Yi(5, 0, null, null, 0, "span", [], [[8, "innerHTML", 1]], null, null, null, null))], function (e, n) {
                e(n, 4, 0, n.context.$implicit.name, n.context.$implicit.path)
            }, function (e, n) {
                e(n, 2, 0, n.context.$implicit.prefix), e(n, 5, 0, n.context.$implicit.suffix)
            })
        }

        function jb(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "span", [["class", "line iconsLine"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, Wb)), kl(2, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 2, 0, t.building.getLine(t.line).getValue())
            }, null)
        }

        function Yb(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 0, "span", [["class", "line"]], [[8, "innerHTML", 1]], null, null, null, null))], null, function (e, n) {
                var t = n.component;
                e(n, 0, 0, t.building.getLine(t.line).getValue())
            })
        }

        function zb(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "span", [["class", "line"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0,
                    i = e.component;
                return "click" === n && (r = !1 !== i.buildingCallback(i.building.getLine(i.line).getValue().callbackValue) && r), r
            }, null, null)), (e()(), lo(2, null, ["", " "]))], null, function (e, n) {
                var t = n.component;
                e(n, 2, 0, t.building.getLine(t.line).getValue().buttonText)
            })
        }

        function Kb(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 10, "span", [["class", "line"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0,
                    i = e.component;
                return "click" === n && (r = !1 !== i.buildingCallback(i.building.getLine(i.line).getValue().callbackValue) && r), r
            }, null, null)), (e()(), lo(2, null, ["", " "])), (e()(), Yi(3, 0, null, null, 7, "label", [], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 5, "input", [["type", "checkbox"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "click"], [null, "change"], [null, "blur"]], function (e, n, t) {
                var r = !0,
                    i = e.component;
                return "change" === n && (r = !1 !== El(e, 5).onChange(t.target.checked) && r), "blur" === n && (r = !1 !== El(e, 5).onTouched() && r), "ngModelChange" === n && (r = !1 !== (i.building.getLine(i.line).getValue().checkboxState = t) && r), "click" === n && (r = !1 !== i.buildingCallback(i.building.getLine(i.line).getValue().checkboxCallbackValue) && r), r
            }, null, null)), kl(5, 16384, null, 0, Of, [xn, Pn], null, null), Ll(1024, null, bf, function (e) {
                return [e]
            }, [Of]), kl(7, 671744, null, 0, cg, [[8, null], [8, null], [8, null], [6, bf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, wf, null, [cg]), kl(9, 16384, null, 0, $f, [[4, wf]], null, null), (e()(), lo(10, null, ["", " "]))], function (e, n) {
                var t = n.component;
                e(n, 7, 0, t.building.getLine(t.line).getValue().checkboxState)
            }, function (e, n) {
                var t = n.component;
                e(n, 2, 0, t.building.getLine(t.line).getValue().buttonText), e(n, 4, 0, El(n, 9).ngClassUntouched, El(n, 9).ngClassTouched, El(n, 9).ngClassPristine, El(n, 9).ngClassDirty, El(n, 9).ngClassValid, El(n, 9).ngClassInvalid, El(n, 9).ngClassPending), e(n, 10, 0, t.building.getLine(t.line).getValue().checkboxLabel)
            })
        }

        function qb(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 5, "span", [["class", "line"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0,
                    i = e.component;
                return "click" === n && (r = !1 !== i.buildingCallback(i.building.getLine(i.line).getValue().callback1Value) && r), r
            }, null, null)), (e()(), lo(2, null, ["", ""])), (e()(), Yi(3, 0, null, null, 0, "span", [], [[8, "innerHTML", 1]], null, null, null, null)), (e()(), Yi(4, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0,
                    i = e.component;
                return "click" === n && (r = !1 !== i.buildingCallback(i.building.getLine(i.line).getValue().callback2Value) && r), r
            }, null, null)), (e()(), lo(5, null, ["", ""]))], null, function (e, n) {
                var t = n.component;
                e(n, 2, 0, t.building.getLine(t.line).getValue().button1Text), e(n, 3, 0, t.building.getLine(t.line).getValue().textBetween), e(n, 5, 0, t.building.getLine(t.line).getValue().button2Text)
            })
        }

        function $b(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 3, "option", [], null, null, null, null, null)), kl(1, 147456, null, 0, Ff, [Pn, xn, [2, xf]], {
                value: [0, "value"]
            }, null), kl(2, 147456, null, 0, Gf, [Pn, xn, [8, null]], {
                value: [0, "value"]
            }, null), (e()(), lo(3, null, ["", ""]))], function (e, n) {
                e(n, 1, 0, n.context.$implicit), e(n, 2, 0, n.context.$implicit)
            }, function (e, n) {
                e(n, 3, 0, n.context.$implicit)
            })
        }

        function Qb(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 8, "span", [["class", "line"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 7, "select", [], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "change"], [null, "ngModelChange"], [null, "blur"]], function (e, n, t) {
                var r = !0,
                    i = e.component;
                return "change" === n && (r = !1 !== El(e, 2).onChange(t.target.value) && r), "blur" === n && (r = !1 !== El(e, 2).onTouched() && r), "change" === n && (r = !1 !== i.buildingCallback(t) && r), "ngModelChange" === n && (r = !1 !== (i.building.getLine(i.line).getValue().selected = t) && r), r
            }, null, null)), kl(2, 16384, null, 0, xf, [xn, Pn], null, null), Ll(1024, null, bf, function (e) {
                return [e]
            }, [xf]), kl(4, 671744, null, 0, cg, [[8, null], [8, null], [8, null], [6, bf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, wf, null, [cg]), kl(6, 16384, null, 0, $f, [[4, wf]], null, null), (e()(), ji(16777216, null, null, 1, null, $b)), kl(8, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 4, 0, t.building.getLine(t.line).getValue().selected), e(n, 8, 0, t.building.getLine(t.line).getValue().values)
            }, function (e, n) {
                e(n, 1, 0, El(n, 6).ngClassUntouched, El(n, 6).ngClassTouched, El(n, 6).ngClassPristine, El(n, 6).ngClassDirty, El(n, 6).ngClassValid, El(n, 6).ngClassInvalid, El(n, 6).ngClassPending)
            })
        }

        function Zb(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-progress-bar", [], null, null, null, Gb, Fb)), kl(1, 638976, null, 0, xb, [yg], {
                progress: [0, "progress"],
                text: [1, "text"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 1, 0, t.building.getLine(t.line).getValue().value, t.building.getLine(t.line).getValue().label)
            }, null)
        }

        function Xb(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "span", [["class", "line"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, Zb)), kl(2, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 2, 0, t.building.getLine(t.line).getValue().value >= 0)
            }, null)
        }

        function Jb(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 14, "span", [["id", "wrapper"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, jb)), kl(2, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Yb)), kl(4, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, zb)), kl(6, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Kb)), kl(8, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, qb)), kl(10, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Qb)), kl(12, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Xb)), kl(14, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 2, 0, t.isIconValue(t.building.getLine(t.line).getValueType())), e(n, 4, 0, t.isTextValue(t.building.getLine(t.line).getValueType())), e(n, 6, 0, t.isButtonValue(t.building.getLine(t.line).getValueType())), e(n, 8, 0, t.isButtonCheckboxValue(t.building.getLine(t.line).getValueType())), e(n, 10, 0, t.isTwoButtonValue(t.building.getLine(t.line).getValueType())), e(n, 12, 0, t.isDropdownValue(t.building.getLine(t.line).getValueType())), e(n, 14, 0, t.isProgressValue(t.building.getLine(t.line).getValueType()))
            }, null)
        }

        function eO(e) {
            return so(0, [(e()(), ji(16777216, null, null, 1, null, Jb)), kl(1, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 1, 0, null != t.line && t.building)
            }, null)
        }
        var nO = function () {
                function e(e, n, t, r, i, l) {
                    this.modalService = e, this.servicesService = n, this.resourcesService = t, this.managementService = r, this.villageService = i, this.logService = l, this.demolishMode = !1, this.combineMode = !1, this.splitMode = !1, this.lines = Nm, this.id = Math.random()
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.fitText = function () {
                    if (this.centerRef) {
                        var e = this.centerRef.nativeElement,
                            n = e.clientWidth,
                            t = e.scrollWidth,
                            r = parseInt(window.getComputedStyle(e, null).getPropertyValue("font-size"), 10);
                        if (t > n) r = (r = Math.ceil(r * n / t)) > 15 ? r = 15 : r - 1, e.style.fontSize = r + "px";
                        else
                            for (; t === n && r < 15;) r = (r = Math.ceil(r) + 1) > 15 ? r = 15 : r, e.style.fontSize = r + "px", (t = e.scrollWidth) > (n = e.clientWidth) && (e.style.fontSize = r - 1 + "px")
                    }
                }, e.prototype.stop = function () {
                    this.building.isWorking() ? this.building.stopProduction() : this.building.startProduction() || this.modalService.info("Cannot unlock production of " + this.building.getName() + ". Number of free workers: " + this.resourcesService.getPeople())
                }, e.prototype.isStoppable = function () {
                    return this.building.isStoppable()
                }, e.prototype.isWorking = function () {
                    return this.building.isWorking()
                }, e.prototype.demolish = function () {
                    var e = this;
                    if (void 0 !== this.building.getMaxSize && this.villageService.getPopulation() > this.villageService.getPopulationCap() - this.building.getMaxSize()) {
                        this.modalService.open(mu.CONFIRM), this.modalService.setModalText("You don't have enough housing space to move this building occupants.<br> People that won't find new home will leave the village<br>Do you still want to demolish this building?");
                        var n = this.modalService.registerForConfirmation().subscribe(function (t) {
                            n.unsubscribe(), t && e.building.prepareDemolish() && e.parentRegion.demolish(e.building)
                        })
                    } else {
                        this.modalService.setModalText("Are you sure you want to demolish " + this.building.getName() + "?"), this.modalService.open(mu.CONFIRM);
                        var t = this.modalService.registerForConfirmation().subscribe(function (n) {
                            t.unsubscribe(), n && e.building.prepareDemolish() && e.parentRegion.demolish(e.building)
                        })
                    }
                }, e.prototype.canCombine = function () {
                    return this.parentRegion.canCombine(this.building)
                }, e.prototype.combine = function () {
                    this.parentRegion.combine(this.building)
                }, e.prototype.split = function () {
                    this.parentRegion.split(this.building)
                }, e.prototype.areComplexWorkersEnabled = function () {
                    return this.managementService.getComplexWorkers()
                }, e.prototype.openWorkersManagement = function (e) {
                    e.ctrlKey ? this.building.getWorkSettings().enabled ? (this.building.getWorkSettings().enabled = !1, this.stop()) : this.stop() : e.shiftKey ? this.building.getWorkSettings().enabled = !this.building.getWorkSettings().enabled : (this.modalService.open(mu.WORK_MANAGEMENT), this.modalService.setBuilding(this.building))
                }, e
            }(),
            tO = gi({
                encapsulation: 0,
                styles: [["[_nghost-%COMP%]{height:15%;min-height:125px;width:10%;min-width:206px;border:1px solid #000;overflow:hidden}#wrapper[_ngcontent-%COMP%]{position:relative;height:100%;text-align:center;font-size:.7em}#combine[_ngcontent-%COMP%], #demolish[_ngcontent-%COMP%], #split[_ngcontent-%COMP%]{position:absolute;font-weight:600;font-size:2em;top:0;left:0;width:100%;height:100%;background-color:rgba(126,122,121,.7);justify-content:center;align-items:center;display:flex;cursor:pointer}#demolishText[_ngcontent-%COMP%], .combineText[_ngcontent-%COMP%]{display:block}#nameBar[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;height:24px;font-size:1.4em;font-weight:700;border-bottom:1px solid #000;white-space:nowrap}#left[_ngcontent-%COMP%], #right[_ngcontent-%COMP%]{flex:1 0 24px}#center[_ngcontent-%COMP%]{flex:1 0 152px;font-size:.8em;overflow:hidden;line-height:24px}.control[_ngcontent-%COMP%]{float:right;font-size:.6em;margin-right:2px;cursor:pointer}.control[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px;height:24px}#lines[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column}app-progress-bar[_ngcontent-%COMP%]{display:block;height:18px}app-building-line[_ngcontent-%COMP%]{height:20px;display:block;margin-top:3px;flex:1 0 auto}img[_ngcontent-%COMP%]{height:24px}.details[_ngcontent-%COMP%]{float:left;font-size:.75em;margin-right:2px}.positiveEffects[_ngcontent-%COMP%]{font-size:.7em;color:#006400}.negativeEffects[_ngcontent-%COMP%]{font-size:.7em;color:#8b0000}.tooltipSpan[_ngcontent-%COMP%]{font-size:1.5em;font-weight:100;text-align:left}.tooltipSpan[_ngcontent-%COMP%]   #title[_ngcontent-%COMP%]{text-align:center}.tooltipSpan[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border-color:#000}app-building-buff[_ngcontent-%COMP%]{position:absolute;right:0;top:0}app-building-upgrade[_ngcontent-%COMP%]{position:absolute;left:-2px;top:0}"]],
                data: {}
            });

        function rO(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 7, "span", [["appTooltip", ""], ["class", "details tooltip"]], null, [[null, "mousemove"]], function (e, n, t) {
                var r = !0;
                return "mousemove" === n && (r = !1 !== El(e, 1).onmousemove(t) && r), r
            }, null, null)), kl(1, 16384, null, 0, av, [], {
                elementId: [0, "elementId"]
            }, null), (e()(), Yi(2, 0, null, null, 0, "img", [["alt", "details"], ["draggable", "false"], ["src", "assets/details.svg"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 4, "span", [["class", "tooltipSpan"]], [[8, "id", 0]], null, null, null, null)), (e()(), Yi(4, 0, null, null, 1, "div", [["id", "title"]], null, null, null, null, null)), (e()(), lo(5, null, ["", ""])), (e()(), Yi(6, 0, null, null, 0, "hr", [], null, null, null, null, null)), (e()(), Yi(7, 0, null, null, 0, "div", [], [[8, "innerHTML", 1]], null, null, null, null))], function (e, n) {
                e(n, 1, 0, n.component.id)
            }, function (e, n) {
                var t = n.component;
                e(n, 3, 0, Vi(1, "", t.id, "")), e(n, 5, 0, t.building.getName()), e(n, 7, 0, t.building.getDetails())
            })
        }

        function iO(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [["class", "positiveEffects"]], null, null, null, null, null)), (e()(), lo(1, null, ["(+", "%)"]))], null, function (e, n) {
                e(n, 1, 0, n.component.building.getDisplayableEffectsValue())
            })
        }

        function lO(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [["class", "negativeEffects"]], null, null, null, null, null)), (e()(), lo(1, null, ["(", "%)"]))], null, function (e, n) {
                e(n, 1, 0, n.component.building.getDisplayableEffectsValue())
            })
        }

        function oO(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [["class", "control"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.stop() && r), r
            }, null, null)), (e()(), Yi(1, 0, null, null, 0, "img", [["alt", "on"], ["draggable", "false"], ["src", "assets/gear.svg"], ["title", "disable"]], null, null, null, null, null))], null, null)
        }

        function uO(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [["class", "control"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.stop() && r), r
            }, null, null)), (e()(), Yi(1, 0, null, null, 0, "img", [["alt", "off"], ["draggable", "false"], ["src", "assets/gear_off.svg"], ["title", "enable"]], null, null, null, null, null))], null, null)
        }

        function sO(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 4, null, null, null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, oO)), kl(2, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, uO)), kl(4, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(0, null, null, 0))], function (e, n) {
                var t = n.component;
                e(n, 2, 0, t.isStoppable() && t.isWorking()), e(n, 4, 0, t.isStoppable() && !t.isWorking())
            }, null)
        }

        function aO(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 0, "img", [["draggable", "false"], ["src", "assets/complex_management_on_on.svg"], ["title", "work settings"]], null, null, null, null, null))], null, null)
        }

        function cO(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 0, "img", [["draggable", "false"], ["src", "assets/complex_management_on_off.svg"], ["title", "work settings"]], null, null, null, null, null))], null, null)
        }

        function pO(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 0, "img", [["draggable", "false"], ["src", "assets/complex_management_off_on.svg"], ["title", "work settings"]], null, null, null, null, null))], null, null)
        }

        function hO(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 0, "img", [["draggable", "false"], ["src", "assets/complex_management_off_off.svg"], ["title", "work settings"]], null, null, null, null, null))], null, null)
        }

        function dO(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 8, "span", [["class", "control"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.openWorkersManagement(t) && r), r
            }, null, null)), (e()(), ji(16777216, null, null, 1, null, aO)), kl(2, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, cO)), kl(4, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, pO)), kl(6, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, hO)), kl(8, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 2, 0, t.building.getWorkSettings().enabled && t.building.isWorking()), e(n, 4, 0, t.building.getWorkSettings().enabled && !t.building.isWorking()), e(n, 6, 0, !t.building.getWorkSettings().enabled && t.building.isWorking()), e(n, 8, 0, !t.building.getWorkSettings().enabled && !t.building.isWorking())
            }, null)
        }

        function fO(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, null, null, null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, dO)), kl(2, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(0, null, null, 0))], function (e, n) {
                e(n, 2, 0, n.component.isStoppable())
            }, null)
        }

        function gO(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "div", [["id", "demolish"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.demolish() && r), r
            }, null, null)), (e()(), Yi(1, 0, null, null, 1, "span", [["id", "demolishText"]], null, null, null, null, null)), (e()(), lo(-1, null, ["Demolish"]))], null, null)
        }

        function vO(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "div", [["id", "combine"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.combine() && r), r
            }, null, null)), (e()(), Yi(1, 0, null, null, 1, "span", [["class", "combineText"]], null, null, null, null, null)), (e()(), lo(-1, null, ["Combine"]))], null, null)
        }

        function mO(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "div", [["id", "split"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.split() && r), r
            }, null, null)), (e()(), Yi(1, 0, null, null, 1, "span", [["class", "combineText"]], null, null, null, null, null)), (e()(), lo(-1, null, ["Split"]))], null, null)
        }

        function yO(e) {
            return so(0, [Ql(402653184, 1, {
                centerRef: 0
            }), (e()(), Yi(1, 0, null, null, 35, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), Yi(2, 0, null, null, 15, "div", [["id", "nameBar"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 2, "div", [["id", "left"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, rO)), kl(5, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(6, 0, [[1, 0], ["center", 1]], null, 6, "div", [["id", "center"]], null, null, null, null, null)), (e()(), lo(7, null, ["", " "])), (e()(), ji(16777216, null, null, 1, null, iO)), kl(9, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, lO)), kl(11, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), lo(12, null, [" ", " "])), (e()(), Yi(13, 0, null, null, 4, "div", [["id", "right"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, sO)), kl(15, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, fO)), kl(17, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(18, 0, null, null, 12, "div", [["id", "lines"]], null, null, null, null, null)), (e()(), Yi(19, 0, null, null, 1, "app-building-buff", [], null, null, null, Ab, Rb)), kl(20, 114688, null, 0, Ob, [vg, Ng, Yg, Cg], {
                building: [0, "building"]
            }, null), (e()(), Yi(21, 0, null, null, 1, "app-building-upgrade", [], null, null, null, Lb, Nb)), kl(22, 114688, null, 0, wb, [Ng, vg], {
                building: [0, "building"],
                parentRegion: [1, "parentRegion"]
            }, null), (e()(), Yi(23, 0, null, null, 1, "app-building-line", [], null, null, null, eO, Vb)), kl(24, 114688, null, 0, Bb, [], {
                line: [0, "line"],
                building: [1, "building"]
            }, null), (e()(), Yi(25, 0, null, null, 1, "app-building-line", [], null, null, null, eO, Vb)), kl(26, 114688, null, 0, Bb, [], {
                line: [0, "line"],
                building: [1, "building"]
            }, null), (e()(), Yi(27, 0, null, null, 1, "app-building-line", [], null, null, null, eO, Vb)), kl(28, 114688, null, 0, Bb, [], {
                line: [0, "line"],
                building: [1, "building"]
            }, null), (e()(), Yi(29, 0, null, null, 1, "app-building-line", [], null, null, null, eO, Vb)), kl(30, 114688, null, 0, Bb, [], {
                line: [0, "line"],
                building: [1, "building"]
            }, null), (e()(), ji(16777216, null, null, 1, null, gO)), kl(32, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, vO)), kl(34, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, mO)), kl(36, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 5, 0, t.building.hasDetails()), e(n, 9, 0, t.building.getDisplayableEffectsValue() > 0), e(n, 11, 0, t.building.getDisplayableEffectsValue() < 0), e(n, 15, 0, !t.building.isComplexManagement() || t.building.isComplexManagement() && !t.areComplexWorkersEnabled()), e(n, 17, 0, t.building.isComplexManagement() && t.areComplexWorkersEnabled()), e(n, 20, 0, t.building), e(n, 22, 0, t.building, t.parentRegion), e(n, 24, 0, t.lines.FIRST, t.building), e(n, 26, 0, t.lines.SECOND, t.building), e(n, 28, 0, t.lines.THIRD, t.building), e(n, 30, 0, t.lines.FOURTH, t.building), e(n, 32, 0, t.demolishMode && t.building.isDemolishable()), e(n, 34, 0, t.combineMode && t.building.isCombinable() && t.canCombine()), e(n, 36, 0, t.splitMode && t.building.isSplittable())
            }, function (e, n) {
                var t = n.component;
                e(n, 7, 0, t.building.getName()), e(n, 12, 0, t.fitText())
            })
        }
        var SO = function () {
                function e(e) {
                    this.gameService = e
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.isFortEnabled = function () {
                    return this.gameService.isEnabled(Eu.FORT)
                }, e.prototype.isFieldEnabled = function () {
                    return this.gameService.isEnabled(Eu.FIELD)
                }, e.prototype.isSeaEnabled = function () {
                    return this.gameService.isEnabled(Eu.SEA)
                }, e.prototype.isMountainsEnabled = function () {
                    return this.gameService.isEnabled(Eu.MOUNTAINS)
                }, e.prototype.isPlateauEnabled = function () {
                    return this.gameService.isEnabled(Eu.PLATEAU)
                }, e
            }(),
            EO = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{display:flex;height:100%;flex-direction:row}.entry[_ngcontent-%COMP%]{flex:auto;display:flex;justify-content:center;flex-direction:column;height:100%;text-align:center;border-right:2px solid #000;cursor:pointer;text-decoration:none;color:#000;font-size:1em}.entry[_ngcontent-%COMP%]:last-of-type{border:none}.entry.active[_ngcontent-%COMP%]{background:var(--active-colour)}"]],
                data: {}
            });

        function bO(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 5, "a", [["class", "entry"], ["draggable", "false"], ["routerLink", "/regions/fort"], ["routerLinkActive", "active"]], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== El(e, 1).onClick(t.button, t.ctrlKey, t.metaKey, t.shiftKey) && r), r
            }, null, null)), kl(1, 671744, [[4, 4]], 0, _d, [Cd, gh, fs], {
                routerLink: [0, "routerLink"]
            }, null), kl(2, 1720320, null, 2, Ad, [Cd, Pn, xn, Rr], {
                routerLinkActive: [0, "routerLinkActive"]
            }, null), Ql(603979776, 3, {
                links: 1
            }), Ql(603979776, 4, {
                linksWithHrefs: 1
            }), (e()(), lo(-1, null, ["Fort"]))], function (e, n) {
                e(n, 1, 0, "/regions/fort"), e(n, 2, 0, "active")
            }, function (e, n) {
                e(n, 0, 0, El(n, 1).target, El(n, 1).href)
            })
        }

        function OO(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 5, "a", [["class", "entry"], ["draggable", "false"], ["routerLink", "/regions/field"], ["routerLinkActive", "active"]], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== El(e, 1).onClick(t.button, t.ctrlKey, t.metaKey, t.shiftKey) && r), r
            }, null, null)), kl(1, 671744, [[8, 4]], 0, _d, [Cd, gh, fs], {
                routerLink: [0, "routerLink"]
            }, null), kl(2, 1720320, null, 2, Ad, [Cd, Pn, xn, Rr], {
                routerLinkActive: [0, "routerLinkActive"]
            }, null), Ql(603979776, 7, {
                links: 1
            }), Ql(603979776, 8, {
                linksWithHrefs: 1
            }), (e()(), lo(-1, null, ["Field"]))], function (e, n) {
                e(n, 1, 0, "/regions/field"), e(n, 2, 0, "active")
            }, function (e, n) {
                e(n, 0, 0, El(n, 1).target, El(n, 1).href)
            })
        }

        function RO(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 5, "a", [["class", "entry"], ["draggable", "false"], ["routerLink", "/regions/mountains"], ["routerLinkActive", "active"]], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== El(e, 1).onClick(t.button, t.ctrlKey, t.metaKey, t.shiftKey) && r), r
            }, null, null)), kl(1, 671744, [[10, 4]], 0, _d, [Cd, gh, fs], {
                routerLink: [0, "routerLink"]
            }, null), kl(2, 1720320, null, 2, Ad, [Cd, Pn, xn, Rr], {
                routerLinkActive: [0, "routerLinkActive"]
            }, null), Ql(603979776, 9, {
                links: 1
            }), Ql(603979776, 10, {
                linksWithHrefs: 1
            }), (e()(), lo(-1, null, ["Mountains"]))], function (e, n) {
                e(n, 1, 0, "/regions/mountains"), e(n, 2, 0, "active")
            }, function (e, n) {
                e(n, 0, 0, El(n, 1).target, El(n, 1).href)
            })
        }

        function TO(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 5, "a", [["class", "entry"], ["draggable", "false"], ["routerLink", "/regions/plateau"], ["routerLinkActive", "active"]], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== El(e, 1).onClick(t.button, t.ctrlKey, t.metaKey, t.shiftKey) && r), r
            }, null, null)), kl(1, 671744, [[12, 4]], 0, _d, [Cd, gh, fs], {
                routerLink: [0, "routerLink"]
            }, null), kl(2, 1720320, null, 2, Ad, [Cd, Pn, xn, Rr], {
                routerLinkActive: [0, "routerLinkActive"]
            }, null), Ql(603979776, 11, {
                links: 1
            }), Ql(603979776, 12, {
                linksWithHrefs: 1
            }), (e()(), lo(-1, null, ["Plateau"]))], function (e, n) {
                e(n, 1, 0, "/regions/plateau"), e(n, 2, 0, "active")
            }, function (e, n) {
                e(n, 0, 0, El(n, 1).target, El(n, 1).href)
            })
        }

        function CO(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 5, "a", [["class", "entry"], ["draggable", "false"], ["routerLink", "/regions/sea"], ["routerLinkActive", "active"]], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== El(e, 1).onClick(t.button, t.ctrlKey, t.metaKey, t.shiftKey) && r), r
            }, null, null)), kl(1, 671744, [[14, 4]], 0, _d, [Cd, gh, fs], {
                routerLink: [0, "routerLink"]
            }, null), kl(2, 1720320, null, 2, Ad, [Cd, Pn, xn, Rr], {
                routerLinkActive: [0, "routerLinkActive"]
            }, null), Ql(603979776, 13, {
                links: 1
            }), Ql(603979776, 14, {
                linksWithHrefs: 1
            }), (e()(), lo(-1, null, ["Sea"]))], function (e, n) {
                e(n, 1, 0, "/regions/sea"), e(n, 2, 0, "active")
            }, function (e, n) {
                e(n, 0, 0, El(n, 1).target, El(n, 1).href)
            })
        }

        function _O(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 22, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 5, "a", [["class", "entry"], ["draggable", "false"], ["routerLink", "/regions/village"], ["routerLinkActive", "active"]], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== El(e, 2).onClick(t.button, t.ctrlKey, t.metaKey, t.shiftKey) && r), r
            }, null, null)), kl(2, 671744, [[2, 4]], 0, _d, [Cd, gh, fs], {
                routerLink: [0, "routerLink"]
            }, null), kl(3, 1720320, null, 2, Ad, [Cd, Pn, xn, Rr], {
                routerLinkActive: [0, "routerLinkActive"]
            }, null), Ql(603979776, 1, {
                links: 1
            }), Ql(603979776, 2, {
                linksWithHrefs: 1
            }), (e()(), lo(-1, null, ["Village"])), (e()(), ji(16777216, null, null, 1, null, bO)), kl(8, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(9, 0, null, null, 5, "a", [["class", "entry"], ["draggable", "false"], ["routerLink", "/regions/forest"], ["routerLinkActive", "active"]], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== El(e, 10).onClick(t.button, t.ctrlKey, t.metaKey, t.shiftKey) && r), r
            }, null, null)), kl(10, 671744, [[6, 4]], 0, _d, [Cd, gh, fs], {
                routerLink: [0, "routerLink"]
            }, null), kl(11, 1720320, null, 2, Ad, [Cd, Pn, xn, Rr], {
                routerLinkActive: [0, "routerLinkActive"]
            }, null), Ql(603979776, 5, {
                links: 1
            }), Ql(603979776, 6, {
                linksWithHrefs: 1
            }), (e()(), lo(-1, null, ["Forest"])), (e()(), ji(16777216, null, null, 1, null, OO)), kl(16, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, RO)), kl(18, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, TO)), kl(20, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, CO)), kl(22, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 2, 0, "/regions/village"), e(n, 3, 0, "active"), e(n, 8, 0, t.isFortEnabled()), e(n, 10, 0, "/regions/forest"), e(n, 11, 0, "active"), e(n, 16, 0, t.isFieldEnabled()), e(n, 18, 0, t.isMountainsEnabled()), e(n, 20, 0, t.isPlateauEnabled()), e(n, 22, 0, t.isSeaEnabled())
            }, function (e, n) {
                e(n, 1, 0, El(n, 2).target, El(n, 2).href), e(n, 9, 0, El(n, 10).target, El(n, 10).href)
            })
        }
        var IO = function () {
                function e(e) {
                    this.happinessService = e
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.getHappiness = function () {
                    return Au.round(this.happinessService.getHappiness(), 2)
                }, e.prototype.getHappinessValue = function () {
                    return this.happinessService.getHappiness()
                }, e
            }(),
            AO = gi({
                encapsulation: 0,
                styles: [["[_nghost-%COMP%]{display:inline-block}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]],
                data: {}
            });

        function wO(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(1, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"],
                margin: [2, "margin"]
            }, null)], function (e, n) {
                e(n, 1, 0, "angry", "happiness", "0 0 0 4px")
            }, null)
        }

        function NO(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(1, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"],
                margin: [2, "margin"]
            }, null)], function (e, n) {
                e(n, 1, 0, "sad", "happiness", "0 0 0 4px")
            }, null)
        }

        function PO(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(1, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"],
                margin: [2, "margin"]
            }, null)], function (e, n) {
                e(n, 1, 0, "neutral", "happiness", "0 0 0 4px")
            }, null)
        }

        function DO(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(1, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"],
                margin: [2, "margin"]
            }, null)], function (e, n) {
                e(n, 1, 0, "happy", "happiness", "0 0 0 4px")
            }, null)
        }

        function kO(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(1, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"],
                margin: [2, "margin"]
            }, null)], function (e, n) {
                e(n, 1, 0, "overjoyed", "happiness", "0 0 0 4px")
            }, null)
        }

        function MO(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 11, "div", [["class", "icon"], ["id", "wrapper"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, wO)), kl(2, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, NO)), kl(4, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, PO)), kl(6, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, DO)), kl(8, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, kO)), kl(10, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), lo(11, null, [" ", "%\n"]))], function (e, n) {
                var t = n.component;
                e(n, 2, 0, t.getHappinessValue() >= 0 && t.getHappinessValue() <= 10), e(n, 4, 0, t.getHappinessValue() > 10 && t.getHappinessValue() <= 40), e(n, 6, 0, t.getHappinessValue() > 40 && t.getHappinessValue() <= 60), e(n, 8, 0, t.getHappinessValue() > 60 && t.getHappinessValue() <= 90), e(n, 10, 0, t.getHappinessValue() > 90 && t.getHappinessValue() <= 100)
            }, function (e, n) {
                e(n, 11, 0, n.component.getHappiness())
            })
        }
        var LO = function () {
                function e(e, n, t, r, i, l, o) {
                    var u = this;
                    this.modalService = e, this.landService = n, this.gameService = t, this.regionService = r, this.tutorialService = i, this.changeDetectorRef = l, this.thisRegion = o, this.demolishMode = !1, this.arrangeMode = !1, this.combineMode = !1, this.splitMode = !1, this.filterBuilding = this.regionService.getFilterBuilding(), this.allBuildings = bu.ALL, this.target = null, this.source = null, this.enter = function (e, n) {
                        if (n === u.placeholder) return !0;
                        var t = u.placeholder.element.nativeElement,
                            r = n.element.nativeElement,
                            i = u.__indexOf(r.parentNode.children, e.dropContainer.element.nativeElement),
                            l = u.__indexOf(r.parentNode.children, r);
                        if (!u.source) {
                            u.sourceIndex = i, u.source = e.dropContainer;
                            var o = u.source.element.nativeElement;
                            t.style.width = o.clientWidth + "px", t.style.height = o.clientHeight + "px", o.parentNode.removeChild(o)
                        }
                        return u.targetIndex = l, u.target = n, t.style.display = "", r.parentNode.insertBefore(t, i < l ? r.nextSibling : r), u.source.start(), u.placeholder.enter(e, e.element.nativeElement.offsetLeft, e.element.nativeElement.offsetTop), !1
                    }
                }
                return e.prototype.ngOnInit = function () {
                    this.tutorialService.checkRegionTutorial(this.thisRegion)
                }, e.prototype.getUniqueBuildingsFromCurrentView = function () {
                    var e = [];
                    return this.regionService.buildings.forEach(function (n) {
                        e.includes(n.getBuildingType()) || e.push(n.getBuildingType()), n.getBuildingType() !== bu.CONSTRUCTION || e.includes(n.getConstructing()) ? n.getBuildingType() !== bu.DECONSTRUCTION || e.includes(n.getDecontructing()) || e.push(n.getDecontructing()) : e.push(n.getConstructing())
                    }), e
                }, e.prototype.getBuildings = function () {
                    var e = this,
                        n = this.regionService.getBuildings().filter(function (n) {
                            return e.filterBuilding === bu.ALL || n.getBuildingType() === bu.CONSTRUCTION && n.getConstructing() === e.filterBuilding || n.getBuildingType() === bu.DECONSTRUCTION && n.getDecontructing() === e.filterBuilding || n.getBuildingType() === e.filterBuilding
                        });
                    return 0 === n.length && this.filterBuilding !== bu.ALL && (this.filterBuilding = bu.ALL, this.regionService.setFilterBuildings(bu.ALL)), n
                }, e.prototype.getBuildingName = function (e) {
                    return Au.prepareBuildingName(e)
                }, e.prototype.updateFilter = function (e) {
                    this.filterBuilding = bu[bu[e.target.value]], this.regionService.setFilterBuildings(this.filterBuilding)
                }, e.prototype.openBuildModal = function () {
                    this.demolishMode = !1, this.arrangeMode = !1, this.modalService.setRegion(this.thisRegion), this.modalService.open(mu.BUILD)
                }, e.prototype.getUnemployed = function () {
                    return this.regionService.getUnemployed()
                }, e.prototype.getFreeLand = function () {
                    return this.landService.getLand()
                }, e.prototype.toggleDemolishMode = function () {
                    this.demolishMode = !this.demolishMode, this.arrangeMode = !1, this.splitMode = !1, this.clearCombineMode()
                }, e.prototype.toggleArrangeMode = function () {
                    if (this.arrangeMode = !this.arrangeMode, this.demolishMode = !1, this.splitMode = !1, this.clearCombineMode(), this.changeDetectorRef.destroyed || this.changeDetectorRef.detectChanges(), this.placeholder) {
                        var e = this.placeholder.element.nativeElement;
                        e.style.display = "none", e.parentNode.removeChild(e), e.parentNode.removeChild(e)
                    }
                }, e.prototype.toggleCombineMode = function () {
                    this.combineMode = !this.combineMode, this.splitMode = !1, this.demolishMode = !1, this.arrangeMode = !1
                }, e.prototype.toggleSplitMode = function () {
                    this.splitMode = !this.splitMode, this.combineMode = !1, this.demolishMode = !1, this.arrangeMode = !1
                }, e.prototype.clearCombineMode = function () {
                    this.combineMode = !1, this.regionService.clearCombineMode()
                }, e.prototype.drop = function () {
                    if (this.target) {
                        var e = this.placeholder.element.nativeElement,
                            n = e.parentNode;
                        if (e.style.display = "none", n.removeChild(e), n.appendChild(e), n.insertBefore(this.source.element.nativeElement, n.children[this.sourceIndex]), this.target = null, this.source = null, this.sourceIndex !== this.targetIndex)
                            if (this.filterBuilding === bu.ALL) this.regionService.moveBuildingInList(this.sourceIndex, this.targetIndex);
                            else {
                                var t = this.getBuildings();
                                this.regionService.moveBuildingInListByBuildingId(t[this.sourceIndex].getBuildingId(), t[this.targetIndex].getBuildingId())
                            }
                    }
                }, e.prototype.__indexOf = function (e, n) {
                    return Array.prototype.indexOf.call(e, n)
                }, e.prototype.isUrbanPlanningEnabled = function () {
                    return this.gameService.isEnabled(Eu.URBAN_PLANNING)
                }, e.prototype.hasCombinableBuildings = function () {
                    return this.getBuildings().filter(function (e) {
                        return e.isCombinable()
                    }).length > 1
                }, e.prototype.hasSplittableBuildings = function () {
                    return this.getBuildings().filter(function (e) {
                        return e.isSplittable()
                    }).length >= 1
                }, e.prototype.onKeydownHandler = function (e) {
                    this.demolishMode = !1, this.arrangeMode = !1, this.clearCombineMode()
                }, e
            }(),
            xO = function (e) {
                function n(n, t, r, i, l, o, u, s) {
                    var a = e.call(this, n, t, r, i, u, s, Mu.VILLAGE) || this;
                    return a.villageService = i, a.resourcesService = l, a.managementService = o, a
                }
                return i(n, e), n.prototype.getPopulation = function () {
                    return this.villageService.getPopulation()
                }, n.prototype.getPopulationCap = function () {
                    return this.villageService.getPopulationCap()
                }, n.prototype.getFoodValue = function () {
                    return this.resourcesService.getFoodValue()
                }, n.prototype.isFoodNutritionEnabled = function () {
                    return this.managementService.getFoodNutrition()
                }, n.prototype.getTakenLand = function () {
                    return this.landService.getTakenLand()
                }, n
            }(LO),
            FO = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{height:100%;max-height:100%;font-size:1em}#content[_ngcontent-%COMP%]{margin:.5%;display:flex;flex-direction:column;height:94%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#side[_ngcontent-%COMP%]{float:right;font-size:.9em;width:25%;margin:.5%;display:inline-block;vertical-align:bottom}#side[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:.8em;margin:0;padding:0;border:none;outline:0}#buildingsWrapper[_ngcontent-%COMP%]{height:85.5%}.buildings[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;height:100%;border:2px solid #000;overflow-y:auto;align-content:flex-start}.buildings[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}#title[_ngcontent-%COMP%]{text-align:center;border:2px solid #000;border-bottom:none}.off[_ngcontent-%COMP%]{background-color:#555}.buildingRegularWrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:.6%}.buildingDropWrapper[_ngcontent-%COMP%]{display:flex;margin:.6%;cursor:move}.buildingDropWrapper[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]],
                data: {}
            });

        function UO(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleDemolishMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Demolish"]))], null, null)
        }

        function HO(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleDemolishMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Stop"]))], null, null)
        }

        function GO(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleArrangeMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Arrange"]))], null, null)
        }

        function BO(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleArrangeMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Stop"]))], null, null)
        }

        function VO(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleCombineMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Combine"]))], null, null)
        }

        function WO(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleCombineMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Stop"]))], null, null)
        }

        function jO(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleSplitMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Split"]))], null, null)
        }

        function YO(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleSplitMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Stop"]))], null, null)
        }

        function zO(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 3, "option", [], null, null, null, null, null)), kl(1, 147456, null, 0, Ff, [Pn, xn, [2, xf]], {
                value: [0, "value"]
            }, null), kl(2, 147456, null, 0, Gf, [Pn, xn, [8, null]], {
                value: [0, "value"]
            }, null), (e()(), lo(3, null, ["", ""]))], function (e, n) {
                e(n, 1, 0, n.context.$implicit), e(n, 2, 0, n.context.$implicit)
            }, function (e, n) {
                e(n, 3, 0, n.component.getBuildingName(n.context.$implicit))
            })
        }

        function KO(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 3, null, null, null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(2, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"],
                title: [2, "title"]
            }, null), (e()(), lo(3, null, ["\xa0", " \xa0\xa0\xa0 "]))], function (e, n) {
                e(n, 2, 0, "food", "resources", "available food nutrition (excluding reserved food)")
            }, function (e, n) {
                e(n, 3, 0, n.component.getFoodValue())
            })
        }

        function qO(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "span", [["class", "buildingRegularWrapper"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "app-building", [], null, null, null, yO, tO)), kl(2, 114688, null, 0, nO, [Rg, vg, Ng, jg, rS, Og], {
                demolishMode: [0, "demolishMode"],
                combineMode: [1, "combineMode"],
                splitMode: [2, "splitMode"],
                building: [3, "building"],
                parentRegion: [4, "parentRegion"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 2, 0, t.demolishMode, t.combineMode, t.splitMode, n.context.$implicit, t.villageService)
            }, null)
        }

        function $O(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "div", [["class", "buildings"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, qO)), kl(2, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, n) {
                e(n, 2, 0, n.component.getBuildings())
            }, null)
        }

        function QO(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 11, "div", [["cdkDropList", ""], ["class", "buildingDropWrapper cdk-drop-list"]], [[8, "id", 0], [2, "cdk-drop-list-dragging", null]], [[null, "cdkDropListDropped"]], function (e, n, t) {
                var r = !0;
                return "cdkDropListDropped" === n && (r = !1 !== e.component.drop() && r), r
            }, null, null)), kl(1, 212992, [[2, 4]], 1, kv, [Pn, mv, Rr, [2, gm], [3, Pv]], {
                enterPredicate: [0, "enterPredicate"]
            }, {
                dropped: "cdkDropListDropped"
            }), Ql(603979776, 4, {
                _draggables: 1
            }), Ll(256, [[1, 4]], Pv, void 0, []), Ll(2048, null, Ev, null, [kv]), (e()(), Yi(5, 16777216, null, null, 6, "app-building", [["cdkDrag", ""], ["class", "cdk-drag"]], [[2, "cdk-drag-dragging", null]], null, null, yO, tO)), Ll(6144, null, yv, null, [_v]), kl(7, 4341760, [[4, 4]], 3, _v, [Pn, [3, Ev], Zs, Zt, br, dm, mv, Rv, [2, gm]], null, null), Ql(603979776, 5, {
                _handles: 1
            }), Ql(335544320, 6, {
                _previewTemplate: 0
            }), Ql(335544320, 7, {
                _placeholderTemplate: 0
            }), kl(11, 114688, null, 0, nO, [Rg, vg, Ng, jg, rS, Og], {
                demolishMode: [0, "demolishMode"],
                building: [1, "building"],
                parentRegion: [2, "parentRegion"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 1, 0, t.enter), e(n, 11, 0, t.demolishMode, n.context.$implicit, t.villageService)
            }, function (e, n) {
                e(n, 0, 0, El(n, 1).id, El(n, 1)._dragging), e(n, 5, 0, El(n, 7)._hasStartedDragging && El(n, 7)._isDragging())
            })
        }

        function ZO(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 8, "div", [["cdkDropListGroup", ""], ["class", "buildings"]], null, null, null, null, null)), kl(1, 147456, [[1, 4]], 0, Pv, [], null, null), (e()(), Yi(2, 0, [["placeholder", 1]], null, 4, "div", [["cdkDropList", ""], ["class", "cdk-drop-list"], ["id", "placeholder"]], [[8, "id", 0], [2, "cdk-drop-list-dragging", null]], [[null, "cdkDropListDropped"]], function (e, n, t) {
                var r = !0;
                return "cdkDropListDropped" === n && (r = !1 !== e.component.drop() && r), r
            }, null, null)), Ll(6144, null, Ev, null, [kv]), kl(4, 212992, [[2, 4]], 1, kv, [Pn, mv, Rr, [2, gm], [3, Pv]], {
                id: [0, "id"],
                enterPredicate: [1, "enterPredicate"]
            }, {
                dropped: "cdkDropListDropped"
            }), Ql(603979776, 3, {
                _draggables: 1
            }), Ll(256, [[1, 4]], Pv, void 0, []), (e()(), ji(16777216, null, null, 1, null, QO)), kl(8, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 4, 0, "placeholder", t.enter), e(n, 8, 0, t.getBuildings())
            }, function (e, n) {
                e(n, 2, 0, El(n, 4).id, El(n, 4)._dragging)
            })
        }

        function XO(e) {
            return so(0, [Ql(671088640, 1, {
                listGroup: 0
            }), Ql(671088640, 2, {
                placeholder: 0
            }), (e()(), Yi(2, 0, null, null, 63, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 2, "div", [["id", "top-menu"]], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 1, "app-top-menu", [], null, null, null, _O, EO)), kl(5, 114688, null, 0, SO, [Cg], null, null), (e()(), Yi(6, 0, null, null, 59, "div", [["id", "content"]], null, null, null, null, null)), (e()(), Yi(7, 0, null, null, 33, "div", [["id", "buttons"]], null, null, null, null, null)), (e()(), Yi(8, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.openBuildModal() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Build"])), (e()(), ji(16777216, null, null, 1, null, UO)), kl(11, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, HO)), kl(13, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, GO)), kl(15, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, BO)), kl(17, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, VO)), kl(19, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, WO)), kl(21, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, jO)), kl(23, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, YO)), kl(25, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(26, 0, null, null, 14, "div", [["id", "side"]], null, null, null, null, null)), (e()(), lo(-1, null, [" Filter:"])), (e()(), Yi(28, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(29, 0, null, null, 11, "select", [], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "change"], [null, "ngModelChange"], [null, "blur"]], function (e, n, t) {
                var r = !0,
                    i = e.component;
                return "change" === n && (r = !1 !== El(e, 30).onChange(t.target.value) && r), "blur" === n && (r = !1 !== El(e, 30).onTouched() && r), "change" === n && (r = !1 !== i.updateFilter(t) && r), "ngModelChange" === n && (r = !1 !== (i.filterBuilding = t) && r), r
            }, null, null)), kl(30, 16384, null, 0, xf, [xn, Pn], null, null), Ll(1024, null, bf, function (e) {
                return [e]
            }, [xf]), kl(32, 671744, null, 0, cg, [[8, null], [8, null], [8, null], [6, bf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, wf, null, [cg]), kl(34, 16384, null, 0, $f, [[4, wf]], null, null), (e()(), Yi(35, 0, null, null, 3, "option", [], null, null, null, null, null)), kl(36, 147456, null, 0, Ff, [Pn, xn, [2, xf]], {
                value: [0, "value"]
            }, null), kl(37, 147456, null, 0, Gf, [Pn, xn, [8, null]], {
                value: [0, "value"]
            }, null), (e()(), lo(38, null, ["", ""])), (e()(), ji(16777216, null, null, 1, null, zO)), kl(40, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), (e()(), Yi(41, 0, null, null, 16, "div", [["class", "icon"]], null, null, null, null, null)), (e()(), Yi(42, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(43, 114688, null, 0, af, [], {
                name: [0, "name"]
            }, null), (e()(), lo(44, null, [" ", "/", " \xa0\xa0 "])), (e()(), Yi(45, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(46, 114688, null, 0, af, [], {
                name: [0, "name"],
                title: [1, "title"],
                margin: [2, "margin"]
            }, null), (e()(), lo(47, null, [" ", " \xa0\xa0\xa0 "])), (e()(), Yi(48, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(49, 114688, null, 0, af, [], {
                name: [0, "name"]
            }, null), (e()(), lo(50, null, [" ", " \xa0\xa0\xa0 "])), (e()(), Yi(51, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(52, 114688, null, 0, af, [], {
                name: [0, "name"],
                title: [1, "title"]
            }, null), (e()(), lo(53, null, ["\xa0", " \xa0\xa0\xa0 "])), (e()(), ji(16777216, null, null, 1, null, KO)), kl(55, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(56, 0, null, null, 1, "app-happiness", [], null, null, null, MO, AO)), kl(57, 114688, null, 0, IO, [wg], null, null), (e()(), Yi(58, 0, null, null, 7, "div", [["id", "buildingsWrapper"]], null, null, null, null, null)), (e()(), Yi(59, 0, null, null, 2, "div", [["id", "title"]], null, null, null, null, null)), (e()(), Yi(60, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["Buildings"])), (e()(), ji(16777216, null, null, 1, null, $O)), kl(63, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, ZO)), kl(65, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 5, 0), e(n, 11, 0, !t.demolishMode), e(n, 13, 0, t.demolishMode), e(n, 15, 0, !t.arrangeMode && t.getBuildings().length > 1), e(n, 17, 0, t.arrangeMode), e(n, 19, 0, !t.combineMode && t.isUrbanPlanningEnabled() && t.hasCombinableBuildings()), e(n, 21, 0, t.combineMode), e(n, 23, 0, !t.splitMode && t.isUrbanPlanningEnabled() && t.hasSplittableBuildings()), e(n, 25, 0, t.splitMode), e(n, 32, 0, t.filterBuilding), e(n, 36, 0, t.allBuildings), e(n, 37, 0, t.allBuildings), e(n, 40, 0, t.getUniqueBuildingsFromCurrentView()), e(n, 43, 0, "population"), e(n, 46, 0, "hammer", "Workers", "0 0 0 2px"), e(n, 49, 0, "land"), e(n, 52, 0, "village", "Village size"), e(n, 55, 0, t.isFoodNutritionEnabled()), e(n, 57, 0), e(n, 63, 0, !t.arrangeMode), e(n, 65, 0, t.arrangeMode)
            }, function (e, n) {
                var t = n.component;
                e(n, 29, 0, El(n, 34).ngClassUntouched, El(n, 34).ngClassTouched, El(n, 34).ngClassPristine, El(n, 34).ngClassDirty, El(n, 34).ngClassValid, El(n, 34).ngClassInvalid, El(n, 34).ngClassPending), e(n, 38, 0, t.getBuildingName(t.allBuildings)), e(n, 44, 0, t.getPopulation(), t.getPopulationCap()), e(n, 47, 0, t.getUnemployed()), e(n, 50, 0, t.getFreeLand()), e(n, 53, 0, t.getTakenLand())
            })
        }

        function JO(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-village", [], null, [["document", "keydown.escape"]], function (e, n, t) {
                var r = !0;
                return "document:keydown.escape" === n && (r = !1 !== El(e, 1).onKeydownHandler(t) && r), r
            }, XO, FO)), kl(1, 114688, null, 0, xO, [Rg, nS, Cg, rS, Ng, jg, Tg, Rr], null, null)], function (e, n) {
                e(n, 1, 0)
            }, null)
        }
        var eR = al("app-village", xO, JO, {}, {}, []),
            nR = function (e) {
                function n(n, t, r, i) {
                    return e.call(this, t, n, r, i, Mu.FORT, Nu.FORT) || this
                }
                return i(n, e), n.ngInjectableDef = ve({
                    factory: function () {
                        return new n(ze(Ng), ze(eS), ze(vg), ze(nS))
                    },
                    token: n,
                    providedIn: "root"
                }), n
            }(tS),
            tR = function (e) {
                function n(n, t, r, i, l, o) {
                    var u = e.call(this, n, t, r, l, i, o, Mu.FORT) || this;
                    return u.fortService = l, u
                }
                return i(n, e), n
            }(LO),
            rR = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{height:100%;max-height:100%;font-size:1em}#content[_ngcontent-%COMP%]{margin:.5%;display:flex;flex-direction:column;height:94%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#side[_ngcontent-%COMP%]{float:right;font-size:.9em;width:25%;margin:.5%;display:inline-block;vertical-align:bottom}#side[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:.8em;margin:0;padding:0;border:none;outline:0}#buildingsWrapper[_ngcontent-%COMP%]{height:85.5%}.buildings[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;height:100%;border:2px solid #000;overflow-y:auto;align-content:flex-start}.buildings[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}#title[_ngcontent-%COMP%]{text-align:center;border:2px solid #000;border-bottom:none}.off[_ngcontent-%COMP%]{background-color:#555}.buildingRegularWrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:.6%}.buildingDropWrapper[_ngcontent-%COMP%]{display:flex;margin:.6%;cursor:move}.buildingDropWrapper[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]],
                data: {}
            });

        function iR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleDemolishMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Demolish"]))], null, null)
        }

        function lR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleDemolishMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Stop"]))], null, null)
        }

        function oR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleArrangeMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Arrange"]))], null, null)
        }

        function uR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleArrangeMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Stop"]))], null, null)
        }

        function sR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleCombineMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Combine"]))], null, null)
        }

        function aR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleCombineMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Stop"]))], null, null)
        }

        function cR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleSplitMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Split"]))], null, null)
        }

        function pR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleSplitMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Stop"]))], null, null)
        }

        function hR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 3, "option", [], null, null, null, null, null)), kl(1, 147456, null, 0, Ff, [Pn, xn, [2, xf]], {
                value: [0, "value"]
            }, null), kl(2, 147456, null, 0, Gf, [Pn, xn, [8, null]], {
                value: [0, "value"]
            }, null), (e()(), lo(3, null, ["", ""]))], function (e, n) {
                e(n, 1, 0, n.context.$implicit), e(n, 2, 0, n.context.$implicit)
            }, function (e, n) {
                e(n, 3, 0, n.component.getBuildingName(n.context.$implicit))
            })
        }

        function dR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "span", [["class", "buildingRegularWrapper"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "app-building", [], null, null, null, yO, tO)), kl(2, 114688, null, 0, nO, [Rg, vg, Ng, jg, rS, Og], {
                demolishMode: [0, "demolishMode"],
                combineMode: [1, "combineMode"],
                splitMode: [2, "splitMode"],
                building: [3, "building"],
                parentRegion: [4, "parentRegion"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 2, 0, t.demolishMode, t.combineMode, t.splitMode, n.context.$implicit, t.fortService)
            }, null)
        }

        function fR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "div", [["class", "buildings"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, dR)), kl(2, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, n) {
                e(n, 2, 0, n.component.getBuildings())
            }, null)
        }

        function gR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 11, "div", [["cdkDropList", ""], ["class", "buildingDropWrapper cdk-drop-list"]], [[8, "id", 0], [2, "cdk-drop-list-dragging", null]], [[null, "cdkDropListDropped"]], function (e, n, t) {
                var r = !0;
                return "cdkDropListDropped" === n && (r = !1 !== e.component.drop() && r), r
            }, null, null)), kl(1, 212992, [[2, 4]], 1, kv, [Pn, mv, Rr, [2, gm], [3, Pv]], {
                enterPredicate: [0, "enterPredicate"]
            }, {
                dropped: "cdkDropListDropped"
            }), Ql(603979776, 4, {
                _draggables: 1
            }), Ll(256, [[1, 4]], Pv, void 0, []), Ll(2048, null, Ev, null, [kv]), (e()(), Yi(5, 16777216, null, null, 6, "app-building", [["cdkDrag", ""], ["class", "cdk-drag"]], [[2, "cdk-drag-dragging", null]], null, null, yO, tO)), Ll(6144, null, yv, null, [_v]), kl(7, 4341760, [[4, 4]], 3, _v, [Pn, [3, Ev], Zs, Zt, br, dm, mv, Rv, [2, gm]], null, null), Ql(603979776, 5, {
                _handles: 1
            }), Ql(335544320, 6, {
                _previewTemplate: 0
            }), Ql(335544320, 7, {
                _placeholderTemplate: 0
            }), kl(11, 114688, null, 0, nO, [Rg, vg, Ng, jg, rS, Og], {
                demolishMode: [0, "demolishMode"],
                building: [1, "building"],
                parentRegion: [2, "parentRegion"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 1, 0, t.enter), e(n, 11, 0, t.demolishMode, n.context.$implicit, t.fortService)
            }, function (e, n) {
                e(n, 0, 0, El(n, 1).id, El(n, 1)._dragging), e(n, 5, 0, El(n, 7)._hasStartedDragging && El(n, 7)._isDragging())
            })
        }

        function vR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 8, "div", [["cdkDropListGroup", ""], ["class", "buildings"]], null, null, null, null, null)), kl(1, 147456, [[1, 4]], 0, Pv, [], null, null), (e()(), Yi(2, 0, [["placeholder", 1]], null, 4, "div", [["cdkDropList", ""], ["class", "cdk-drop-list"], ["id", "placeholder"]], [[8, "id", 0], [2, "cdk-drop-list-dragging", null]], [[null, "cdkDropListDropped"]], function (e, n, t) {
                var r = !0;
                return "cdkDropListDropped" === n && (r = !1 !== e.component.drop() && r), r
            }, null, null)), Ll(6144, null, Ev, null, [kv]), kl(4, 212992, [[2, 4]], 1, kv, [Pn, mv, Rr, [2, gm], [3, Pv]], {
                id: [0, "id"],
                enterPredicate: [1, "enterPredicate"]
            }, {
                dropped: "cdkDropListDropped"
            }), Ql(603979776, 3, {
                _draggables: 1
            }), Ll(256, [[1, 4]], Pv, void 0, []), (e()(), ji(16777216, null, null, 1, null, gR)), kl(8, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 4, 0, "placeholder", t.enter), e(n, 8, 0, t.getBuildings())
            }, function (e, n) {
                e(n, 2, 0, El(n, 4).id, El(n, 4)._dragging)
            })
        }

        function mR(e) {
            return so(0, [Ql(671088640, 1, {
                listGroup: 0
            }), Ql(671088640, 2, {
                placeholder: 0
            }), (e()(), Yi(2, 0, null, null, 53, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 2, "div", [["id", "top-menu"]], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 1, "app-top-menu", [], null, null, null, _O, EO)), kl(5, 114688, null, 0, SO, [Cg], null, null), (e()(), Yi(6, 0, null, null, 49, "div", [["id", "content"]], null, null, null, null, null)), (e()(), Yi(7, 0, null, null, 33, "div", [["id", "buttons"]], null, null, null, null, null)), (e()(), Yi(8, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.openBuildModal() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Build"])), (e()(), ji(16777216, null, null, 1, null, iR)), kl(11, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, lR)), kl(13, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, oR)), kl(15, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, uR)), kl(17, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, sR)), kl(19, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, aR)), kl(21, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, cR)), kl(23, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, pR)), kl(25, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(26, 0, null, null, 14, "div", [["id", "side"]], null, null, null, null, null)), (e()(), lo(-1, null, [" Filter:"])), (e()(), Yi(28, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(29, 0, null, null, 11, "select", [], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "change"], [null, "ngModelChange"], [null, "blur"]], function (e, n, t) {
                var r = !0,
                    i = e.component;
                return "change" === n && (r = !1 !== El(e, 30).onChange(t.target.value) && r), "blur" === n && (r = !1 !== El(e, 30).onTouched() && r), "change" === n && (r = !1 !== i.updateFilter(t) && r), "ngModelChange" === n && (r = !1 !== (i.filterBuilding = t) && r), r
            }, null, null)), kl(30, 16384, null, 0, xf, [xn, Pn], null, null), Ll(1024, null, bf, function (e) {
                return [e]
            }, [xf]), kl(32, 671744, null, 0, cg, [[8, null], [8, null], [8, null], [6, bf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, wf, null, [cg]), kl(34, 16384, null, 0, $f, [[4, wf]], null, null), (e()(), Yi(35, 0, null, null, 3, "option", [], null, null, null, null, null)), kl(36, 147456, null, 0, Ff, [Pn, xn, [2, xf]], {
                value: [0, "value"]
            }, null), kl(37, 147456, null, 0, Gf, [Pn, xn, [8, null]], {
                value: [0, "value"]
            }, null), (e()(), lo(38, null, ["", ""])), (e()(), ji(16777216, null, null, 1, null, hR)), kl(40, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), (e()(), Yi(41, 0, null, null, 6, "div", [["class", "icon"]], null, null, null, null, null)), (e()(), Yi(42, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(43, 114688, null, 0, af, [], {
                name: [0, "name"],
                title: [1, "title"],
                margin: [2, "margin"]
            }, null), (e()(), lo(44, null, [" ", " \xa0\xa0\xa0 "])), (e()(), Yi(45, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(46, 114688, null, 0, af, [], {
                name: [0, "name"]
            }, null), (e()(), lo(47, null, [" ", " "])), (e()(), Yi(48, 0, null, null, 7, "div", [["id", "buildingsWrapper"]], null, null, null, null, null)), (e()(), Yi(49, 0, null, null, 2, "div", [["id", "title"]], null, null, null, null, null)), (e()(), Yi(50, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["Buildings"])), (e()(), ji(16777216, null, null, 1, null, fR)), kl(53, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, vR)), kl(55, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 5, 0), e(n, 11, 0, !t.demolishMode), e(n, 13, 0, t.demolishMode), e(n, 15, 0, !t.arrangeMode && t.getBuildings().length > 1), e(n, 17, 0, t.arrangeMode), e(n, 19, 0, !t.combineMode && t.isUrbanPlanningEnabled() && t.hasCombinableBuildings()), e(n, 21, 0, t.combineMode), e(n, 23, 0, !t.splitMode && t.isUrbanPlanningEnabled() && t.hasSplittableBuildings()), e(n, 25, 0, t.splitMode), e(n, 32, 0, t.filterBuilding), e(n, 36, 0, t.allBuildings), e(n, 37, 0, t.allBuildings), e(n, 40, 0, t.getUniqueBuildingsFromCurrentView()), e(n, 43, 0, "hammer", "Workers", "0 0 0 2px"), e(n, 46, 0, "land"), e(n, 53, 0, !t.arrangeMode), e(n, 55, 0, t.arrangeMode)
            }, function (e, n) {
                var t = n.component;
                e(n, 29, 0, El(n, 34).ngClassUntouched, El(n, 34).ngClassTouched, El(n, 34).ngClassPristine, El(n, 34).ngClassDirty, El(n, 34).ngClassValid, El(n, 34).ngClassInvalid, El(n, 34).ngClassPending), e(n, 38, 0, t.getBuildingName(t.allBuildings)), e(n, 44, 0, t.getUnemployed()), e(n, 47, 0, t.getFreeLand())
            })
        }

        function yR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-fort", [], null, [["document", "keydown.escape"]], function (e, n, t) {
                var r = !0;
                return "document:keydown.escape" === n && (r = !1 !== El(e, 1).onKeydownHandler(t) && r), r
            }, mR, rR)), kl(1, 114688, null, 0, tR, [Rg, nS, Cg, Tg, nR, Rr], null, null)], function (e, n) {
                e(n, 1, 0)
            }, null)
        }
        var SR = al("app-fort", tR, yR, {}, {}, []),
            ER = function (e) {
                function n(n, t, r, i, l) {
                    var o = e.call(this, t, n, r, l, Mu.FOREST, Nu.FOREST) || this;
                    return o.idService = i, o
                }
                return i(n, e), n.prototype.init = function () {
                    var e = this;
                    this.buildings.push(new Hm(this.servicesService, this.idService.getNextId()).build()), this.buildings.push(new Qm(this.servicesService, this.idService.getNextId()).build()), this.buildings.forEach(function (n) {
                        return e.landService.takeLand(n.getSize())
                    })
                }, n.ngInjectableDef = ve({
                    factory: function () {
                        return new n(ze(Ng), ze(eS), ze(vg), ze(Jy), ze(nS))
                    },
                    token: n,
                    providedIn: "root"
                }), n
            }(tS),
            bR = function (e) {
                function n(n, t, r, i, l, o) {
                    var u = e.call(this, n, t, r, l, i, o, Mu.FOREST) || this;
                    return u.forestService = l, u
                }
                return i(n, e), n.prototype.getForestSize = function () {
                    return this.landService.getForest()
                }, n
            }(LO),
            OR = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{height:100%;max-height:100%;font-size:1em}#content[_ngcontent-%COMP%]{margin:.5%;display:flex;flex-direction:column;height:94%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#side[_ngcontent-%COMP%]{float:right;font-size:.9em;width:25%;margin:.5%;display:inline-block;vertical-align:bottom}#side[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:.8em;margin:0;padding:0;border:none;outline:0}#buildingsWrapper[_ngcontent-%COMP%]{height:85.5%}.buildings[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;height:100%;border:2px solid #000;overflow-y:auto;align-content:flex-start}.buildings[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}#title[_ngcontent-%COMP%]{text-align:center;border:2px solid #000;border-bottom:none}.off[_ngcontent-%COMP%]{background-color:#555}.buildingRegularWrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:.6%}.buildingDropWrapper[_ngcontent-%COMP%]{display:flex;margin:.6%;cursor:move}.buildingDropWrapper[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}.critical[_ngcontent-%COMP%]{color:#8b0000}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]],
                data: {}
            });

        function RR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleDemolishMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Demolish"]))], null, null)
        }

        function TR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleDemolishMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Stop"]))], null, null)
        }

        function CR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleArrangeMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Arrange"]))], null, null)
        }

        function _R(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleArrangeMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Stop"]))], null, null)
        }

        function IR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleCombineMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Combine"]))], null, null)
        }

        function AR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleCombineMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Stop"]))], null, null)
        }

        function wR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleSplitMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Split"]))], null, null)
        }

        function NR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleSplitMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Stop"]))], null, null)
        }

        function PR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 3, "option", [], null, null, null, null, null)), kl(1, 147456, null, 0, Ff, [Pn, xn, [2, xf]], {
                value: [0, "value"]
            }, null), kl(2, 147456, null, 0, Gf, [Pn, xn, [8, null]], {
                value: [0, "value"]
            }, null), (e()(), lo(3, null, ["", ""]))], function (e, n) {
                e(n, 1, 0, n.context.$implicit), e(n, 2, 0, n.context.$implicit)
            }, function (e, n) {
                e(n, 3, 0, n.component.getBuildingName(n.context.$implicit))
            })
        }

        function DR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(1, null, ["", ""]))], null, function (e, n) {
                e(n, 1, 0, n.component.getForestSize())
            })
        }

        function kR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [["class", "critical"]], null, null, null, null, null)), (e()(), lo(1, null, ["", ""]))], null, function (e, n) {
                e(n, 1, 0, n.component.getForestSize())
            })
        }

        function MR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "span", [["class", "buildingRegularWrapper"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "app-building", [], null, null, null, yO, tO)), kl(2, 114688, null, 0, nO, [Rg, vg, Ng, jg, rS, Og], {
                demolishMode: [0, "demolishMode"],
                combineMode: [1, "combineMode"],
                splitMode: [2, "splitMode"],
                building: [3, "building"],
                parentRegion: [4, "parentRegion"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 2, 0, t.demolishMode, t.combineMode, t.splitMode, n.context.$implicit, t.forestService)
            }, null)
        }

        function LR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "div", [["class", "buildings"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, MR)), kl(2, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, n) {
                e(n, 2, 0, n.component.getBuildings())
            }, null)
        }

        function xR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 11, "div", [["cdkDropList", ""], ["class", "buildingDropWrapper cdk-drop-list"]], [[8, "id", 0], [2, "cdk-drop-list-dragging", null]], [[null, "cdkDropListDropped"]], function (e, n, t) {
                var r = !0;
                return "cdkDropListDropped" === n && (r = !1 !== e.component.drop() && r), r
            }, null, null)), kl(1, 212992, [[2, 4]], 1, kv, [Pn, mv, Rr, [2, gm], [3, Pv]], {
                enterPredicate: [0, "enterPredicate"]
            }, {
                dropped: "cdkDropListDropped"
            }), Ql(603979776, 4, {
                _draggables: 1
            }), Ll(256, [[1, 4]], Pv, void 0, []), Ll(2048, null, Ev, null, [kv]), (e()(), Yi(5, 16777216, null, null, 6, "app-building", [["cdkDrag", ""], ["class", "cdk-drag"]], [[2, "cdk-drag-dragging", null]], null, null, yO, tO)), Ll(6144, null, yv, null, [_v]), kl(7, 4341760, [[4, 4]], 3, _v, [Pn, [3, Ev], Zs, Zt, br, dm, mv, Rv, [2, gm]], null, null), Ql(603979776, 5, {
                _handles: 1
            }), Ql(335544320, 6, {
                _previewTemplate: 0
            }), Ql(335544320, 7, {
                _placeholderTemplate: 0
            }), kl(11, 114688, null, 0, nO, [Rg, vg, Ng, jg, rS, Og], {
                demolishMode: [0, "demolishMode"],
                building: [1, "building"],
                parentRegion: [2, "parentRegion"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 1, 0, t.enter), e(n, 11, 0, t.demolishMode, n.context.$implicit, t.forestService)
            }, function (e, n) {
                e(n, 0, 0, El(n, 1).id, El(n, 1)._dragging), e(n, 5, 0, El(n, 7)._hasStartedDragging && El(n, 7)._isDragging())
            })
        }

        function FR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 8, "div", [["cdkDropListGroup", ""], ["class", "buildings"]], null, null, null, null, null)), kl(1, 147456, [[1, 4]], 0, Pv, [], null, null), (e()(), Yi(2, 0, [["placeholder", 1]], null, 4, "div", [["cdkDropList", ""], ["class", "cdk-drop-list"], ["id", "placeholder"]], [[8, "id", 0], [2, "cdk-drop-list-dragging", null]], [[null, "cdkDropListDropped"]], function (e, n, t) {
                var r = !0;
                return "cdkDropListDropped" === n && (r = !1 !== e.component.drop() && r), r
            }, null, null)), Ll(6144, null, Ev, null, [kv]), kl(4, 212992, [[2, 4]], 1, kv, [Pn, mv, Rr, [2, gm], [3, Pv]], {
                id: [0, "id"],
                enterPredicate: [1, "enterPredicate"]
            }, {
                dropped: "cdkDropListDropped"
            }), Ql(603979776, 3, {
                _draggables: 1
            }), Ll(256, [[1, 4]], Pv, void 0, []), (e()(), ji(16777216, null, null, 1, null, xR)), kl(8, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 4, 0, "placeholder", t.enter), e(n, 8, 0, t.getBuildings())
            }, function (e, n) {
                e(n, 2, 0, El(n, 4).id, El(n, 4)._dragging)
            })
        }

        function UR(e) {
            return so(0, [Ql(671088640, 1, {
                listGroup: 0
            }), Ql(671088640, 2, {
                placeholder: 0
            }), (e()(), Yi(2, 0, null, null, 60, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 2, "div", [["id", "top-menu"]], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 1, "app-top-menu", [], null, null, null, _O, EO)), kl(5, 114688, null, 0, SO, [Cg], null, null), (e()(), Yi(6, 0, null, null, 56, "div", [["id", "content"]], null, null, null, null, null)), (e()(), Yi(7, 0, null, null, 33, "div", [["id", "buttons"]], null, null, null, null, null)), (e()(), Yi(8, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.openBuildModal() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Build"])), (e()(), ji(16777216, null, null, 1, null, RR)), kl(11, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, TR)), kl(13, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, CR)), kl(15, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, _R)), kl(17, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, IR)), kl(19, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, AR)), kl(21, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, wR)), kl(23, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, NR)), kl(25, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(26, 0, null, null, 14, "div", [["id", "side"]], null, null, null, null, null)), (e()(), lo(-1, null, [" Filter:"])), (e()(), Yi(28, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(29, 0, null, null, 11, "select", [], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "change"], [null, "ngModelChange"], [null, "blur"]], function (e, n, t) {
                var r = !0,
                    i = e.component;
                return "change" === n && (r = !1 !== El(e, 30).onChange(t.target.value) && r), "blur" === n && (r = !1 !== El(e, 30).onTouched() && r), "change" === n && (r = !1 !== i.updateFilter(t) && r), "ngModelChange" === n && (r = !1 !== (i.filterBuilding = t) && r), r
            }, null, null)), kl(30, 16384, null, 0, xf, [xn, Pn], null, null), Ll(1024, null, bf, function (e) {
                return [e]
            }, [xf]), kl(32, 671744, null, 0, cg, [[8, null], [8, null], [8, null], [6, bf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, wf, null, [cg]), kl(34, 16384, null, 0, $f, [[4, wf]], null, null), (e()(), Yi(35, 0, null, null, 3, "option", [], null, null, null, null, null)), kl(36, 147456, null, 0, Ff, [Pn, xn, [2, xf]], {
                value: [0, "value"]
            }, null), kl(37, 147456, null, 0, Gf, [Pn, xn, [8, null]], {
                value: [0, "value"]
            }, null), (e()(), lo(38, null, ["", ""])), (e()(), ji(16777216, null, null, 1, null, PR)), kl(40, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), (e()(), Yi(41, 0, null, null, 13, "div", [["class", "icon"]], null, null, null, null, null)), (e()(), Yi(42, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(43, 114688, null, 0, af, [], {
                name: [0, "name"]
            }, null), (e()(), ji(16777216, null, null, 1, null, DR)), kl(45, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, kR)), kl(47, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), lo(-1, null, [" \xa0\xa0 "])), (e()(), Yi(49, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(50, 114688, null, 0, af, [], {
                name: [0, "name"],
                title: [1, "title"],
                margin: [2, "margin"]
            }, null), (e()(), lo(51, null, [" ", " \xa0\xa0\xa0 "])), (e()(), Yi(52, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(53, 114688, null, 0, af, [], {
                name: [0, "name"]
            }, null), (e()(), lo(54, null, [" ", " "])), (e()(), Yi(55, 0, null, null, 7, "div", [["id", "buildingsWrapper"]], null, null, null, null, null)), (e()(), Yi(56, 0, null, null, 2, "div", [["id", "title"]], null, null, null, null, null)), (e()(), Yi(57, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["Buildings"])), (e()(), ji(16777216, null, null, 1, null, LR)), kl(60, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, FR)), kl(62, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 5, 0), e(n, 11, 0, !t.demolishMode), e(n, 13, 0, t.demolishMode), e(n, 15, 0, !t.arrangeMode && t.getBuildings().length > 1), e(n, 17, 0, t.arrangeMode), e(n, 19, 0, !t.combineMode && t.isUrbanPlanningEnabled() && t.hasCombinableBuildings()), e(n, 21, 0, t.combineMode), e(n, 23, 0, !t.splitMode && t.isUrbanPlanningEnabled() && t.hasSplittableBuildings()), e(n, 25, 0, t.splitMode), e(n, 32, 0, t.filterBuilding), e(n, 36, 0, t.allBuildings), e(n, 37, 0, t.allBuildings), e(n, 40, 0, t.getUniqueBuildingsFromCurrentView()), e(n, 43, 0, "forest"), e(n, 45, 0, t.getForestSize() >= 500), e(n, 47, 0, t.getForestSize() < 500), e(n, 50, 0, "hammer", "Workers", "0 0 0 2px"), e(n, 53, 0, "land"), e(n, 60, 0, !t.arrangeMode), e(n, 62, 0, t.arrangeMode)
            }, function (e, n) {
                var t = n.component;
                e(n, 29, 0, El(n, 34).ngClassUntouched, El(n, 34).ngClassTouched, El(n, 34).ngClassPristine, El(n, 34).ngClassDirty, El(n, 34).ngClassValid, El(n, 34).ngClassInvalid, El(n, 34).ngClassPending), e(n, 38, 0, t.getBuildingName(t.allBuildings)), e(n, 51, 0, t.getUnemployed()), e(n, 54, 0, t.getFreeLand())
            })
        }

        function HR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-forest", [], null, [["document", "keydown.escape"]], function (e, n, t) {
                var r = !0;
                return "document:keydown.escape" === n && (r = !1 !== El(e, 1).onKeydownHandler(t) && r), r
            }, UR, OR)), kl(1, 114688, null, 0, bR, [Rg, nS, Cg, Tg, ER, Rr], null, null)], function (e, n) {
                e(n, 1, 0)
            }, null)
        }
        var GR = al("app-forest", bR, HR, {}, {}, []),
            BR = function (e) {
                function n(n, t, r, i) {
                    return e.call(this, t, n, r, i, Mu.FIELD, Nu.FIELD) || this
                }
                return i(n, e), n.ngInjectableDef = ve({
                    factory: function () {
                        return new n(ze(Ng), ze(eS), ze(vg), ze(nS))
                    },
                    token: n,
                    providedIn: "root"
                }), n
            }(tS),
            VR = function (e) {
                function n(n, t, r, i, l, o) {
                    var u = e.call(this, n, t, r, l, i, o, Mu.FIELD) || this;
                    return u.fieldService = l, u
                }
                return i(n, e), n
            }(LO),
            WR = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{height:100%;max-height:100%;font-size:1em}#content[_ngcontent-%COMP%]{margin:.5%;display:flex;flex-direction:column;height:94%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#side[_ngcontent-%COMP%]{float:right;font-size:.9em;width:25%;margin:.5%;display:inline-block;vertical-align:bottom}#side[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:.8em;margin:0;padding:0;border:none;outline:0}#buildingsWrapper[_ngcontent-%COMP%]{height:85.5%}.buildings[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;height:100%;border:2px solid #000;overflow-y:auto;align-content:flex-start}.buildings[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}#title[_ngcontent-%COMP%]{text-align:center;border:2px solid #000;border-bottom:none}.off[_ngcontent-%COMP%]{background-color:#555}.buildingRegularWrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:.6%}.buildingDropWrapper[_ngcontent-%COMP%]{display:flex;margin:.6%;cursor:move}.buildingDropWrapper[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]],
                data: {}
            });

        function jR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleDemolishMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Demolish"]))], null, null)
        }

        function YR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleDemolishMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Stop"]))], null, null)
        }

        function zR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleArrangeMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Arrange"]))], null, null)
        }

        function KR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleArrangeMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Stop"]))], null, null)
        }

        function qR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleCombineMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Combine"]))], null, null)
        }

        function $R(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleCombineMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Stop"]))], null, null)
        }

        function QR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleSplitMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Split"]))], null, null)
        }

        function ZR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleSplitMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Stop"]))], null, null)
        }

        function XR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 3, "option", [], null, null, null, null, null)), kl(1, 147456, null, 0, Ff, [Pn, xn, [2, xf]], {
                value: [0, "value"]
            }, null), kl(2, 147456, null, 0, Gf, [Pn, xn, [8, null]], {
                value: [0, "value"]
            }, null), (e()(), lo(3, null, ["", ""]))], function (e, n) {
                e(n, 1, 0, n.context.$implicit), e(n, 2, 0, n.context.$implicit)
            }, function (e, n) {
                e(n, 3, 0, n.component.getBuildingName(n.context.$implicit))
            })
        }

        function JR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "span", [["class", "buildingRegularWrapper"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "app-building", [], null, null, null, yO, tO)), kl(2, 114688, null, 0, nO, [Rg, vg, Ng, jg, rS, Og], {
                demolishMode: [0, "demolishMode"],
                combineMode: [1, "combineMode"],
                splitMode: [2, "splitMode"],
                building: [3, "building"],
                parentRegion: [4, "parentRegion"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 2, 0, t.demolishMode, t.combineMode, t.splitMode, n.context.$implicit, t.fieldService)
            }, null)
        }

        function eT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "div", [["class", "buildings"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, JR)), kl(2, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, n) {
                e(n, 2, 0, n.component.getBuildings())
            }, null)
        }

        function nT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 11, "div", [["cdkDropList", ""], ["class", "buildingDropWrapper cdk-drop-list"]], [[8, "id", 0], [2, "cdk-drop-list-dragging", null]], [[null, "cdkDropListDropped"]], function (e, n, t) {
                var r = !0;
                return "cdkDropListDropped" === n && (r = !1 !== e.component.drop() && r), r
            }, null, null)), kl(1, 212992, [[2, 4]], 1, kv, [Pn, mv, Rr, [2, gm], [3, Pv]], {
                enterPredicate: [0, "enterPredicate"]
            }, {
                dropped: "cdkDropListDropped"
            }), Ql(603979776, 4, {
                _draggables: 1
            }), Ll(256, [[1, 4]], Pv, void 0, []), Ll(2048, null, Ev, null, [kv]), (e()(), Yi(5, 16777216, null, null, 6, "app-building", [["cdkDrag", ""], ["class", "cdk-drag"]], [[2, "cdk-drag-dragging", null]], null, null, yO, tO)), Ll(6144, null, yv, null, [_v]), kl(7, 4341760, [[4, 4]], 3, _v, [Pn, [3, Ev], Zs, Zt, br, dm, mv, Rv, [2, gm]], null, null), Ql(603979776, 5, {
                _handles: 1
            }), Ql(335544320, 6, {
                _previewTemplate: 0
            }), Ql(335544320, 7, {
                _placeholderTemplate: 0
            }), kl(11, 114688, null, 0, nO, [Rg, vg, Ng, jg, rS, Og], {
                demolishMode: [0, "demolishMode"],
                building: [1, "building"],
                parentRegion: [2, "parentRegion"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 1, 0, t.enter), e(n, 11, 0, t.demolishMode, n.context.$implicit, t.fieldService)
            }, function (e, n) {
                e(n, 0, 0, El(n, 1).id, El(n, 1)._dragging), e(n, 5, 0, El(n, 7)._hasStartedDragging && El(n, 7)._isDragging())
            })
        }

        function tT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 8, "div", [["cdkDropListGroup", ""], ["class", "buildings"]], null, null, null, null, null)), kl(1, 147456, [[1, 4]], 0, Pv, [], null, null), (e()(), Yi(2, 0, [["placeholder", 1]], null, 4, "div", [["cdkDropList", ""], ["class", "cdk-drop-list"], ["id", "placeholder"]], [[8, "id", 0], [2, "cdk-drop-list-dragging", null]], [[null, "cdkDropListDropped"]], function (e, n, t) {
                var r = !0;
                return "cdkDropListDropped" === n && (r = !1 !== e.component.drop() && r), r
            }, null, null)), Ll(6144, null, Ev, null, [kv]), kl(4, 212992, [[2, 4]], 1, kv, [Pn, mv, Rr, [2, gm], [3, Pv]], {
                id: [0, "id"],
                enterPredicate: [1, "enterPredicate"]
            }, {
                dropped: "cdkDropListDropped"
            }), Ql(603979776, 3, {
                _draggables: 1
            }), Ll(256, [[1, 4]], Pv, void 0, []), (e()(), ji(16777216, null, null, 1, null, nT)), kl(8, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 4, 0, "placeholder", t.enter), e(n, 8, 0, t.getBuildings())
            }, function (e, n) {
                e(n, 2, 0, El(n, 4).id, El(n, 4)._dragging)
            })
        }

        function rT(e) {
            return so(0, [Ql(671088640, 1, {
                listGroup: 0
            }), Ql(671088640, 2, {
                placeholder: 0
            }), (e()(), Yi(2, 0, null, null, 53, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 2, "div", [["id", "top-menu"]], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 1, "app-top-menu", [], null, null, null, _O, EO)), kl(5, 114688, null, 0, SO, [Cg], null, null), (e()(), Yi(6, 0, null, null, 49, "div", [["id", "content"]], null, null, null, null, null)), (e()(), Yi(7, 0, null, null, 33, "div", [["id", "buttons"]], null, null, null, null, null)), (e()(), Yi(8, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.openBuildModal() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Build"])), (e()(), ji(16777216, null, null, 1, null, jR)), kl(11, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, YR)), kl(13, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, zR)), kl(15, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, KR)), kl(17, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, qR)), kl(19, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, $R)), kl(21, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, QR)), kl(23, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, ZR)), kl(25, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(26, 0, null, null, 14, "div", [["id", "side"]], null, null, null, null, null)), (e()(), lo(-1, null, [" Filter:"])), (e()(), Yi(28, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(29, 0, null, null, 11, "select", [], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "change"], [null, "ngModelChange"], [null, "blur"]], function (e, n, t) {
                var r = !0,
                    i = e.component;
                return "change" === n && (r = !1 !== El(e, 30).onChange(t.target.value) && r), "blur" === n && (r = !1 !== El(e, 30).onTouched() && r), "change" === n && (r = !1 !== i.updateFilter(t) && r), "ngModelChange" === n && (r = !1 !== (i.filterBuilding = t) && r), r
            }, null, null)), kl(30, 16384, null, 0, xf, [xn, Pn], null, null), Ll(1024, null, bf, function (e) {
                return [e]
            }, [xf]), kl(32, 671744, null, 0, cg, [[8, null], [8, null], [8, null], [6, bf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, wf, null, [cg]), kl(34, 16384, null, 0, $f, [[4, wf]], null, null), (e()(), Yi(35, 0, null, null, 3, "option", [], null, null, null, null, null)), kl(36, 147456, null, 0, Ff, [Pn, xn, [2, xf]], {
                value: [0, "value"]
            }, null), kl(37, 147456, null, 0, Gf, [Pn, xn, [8, null]], {
                value: [0, "value"]
            }, null), (e()(), lo(38, null, ["", ""])), (e()(), ji(16777216, null, null, 1, null, XR)), kl(40, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), (e()(), Yi(41, 0, null, null, 6, "div", [["class", "icon"]], null, null, null, null, null)), (e()(), Yi(42, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(43, 114688, null, 0, af, [], {
                name: [0, "name"],
                title: [1, "title"],
                margin: [2, "margin"]
            }, null), (e()(), lo(44, null, [" ", " \xa0\xa0\xa0 "])), (e()(), Yi(45, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(46, 114688, null, 0, af, [], {
                name: [0, "name"]
            }, null), (e()(), lo(47, null, [" ", " "])), (e()(), Yi(48, 0, null, null, 7, "div", [["id", "buildingsWrapper"]], null, null, null, null, null)), (e()(), Yi(49, 0, null, null, 2, "div", [["id", "title"]], null, null, null, null, null)), (e()(), Yi(50, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["Buildings"])), (e()(), ji(16777216, null, null, 1, null, eT)), kl(53, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, tT)), kl(55, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 5, 0), e(n, 11, 0, !t.demolishMode), e(n, 13, 0, t.demolishMode), e(n, 15, 0, !t.arrangeMode && t.getBuildings().length > 1), e(n, 17, 0, t.arrangeMode), e(n, 19, 0, !t.combineMode && t.isUrbanPlanningEnabled() && t.hasCombinableBuildings()), e(n, 21, 0, t.combineMode), e(n, 23, 0, !t.splitMode && t.isUrbanPlanningEnabled() && t.hasSplittableBuildings()), e(n, 25, 0, t.splitMode), e(n, 32, 0, t.filterBuilding), e(n, 36, 0, t.allBuildings), e(n, 37, 0, t.allBuildings), e(n, 40, 0, t.getUniqueBuildingsFromCurrentView()), e(n, 43, 0, "hammer", "Workers", "0 0 0 2px"), e(n, 46, 0, "land"), e(n, 53, 0, !t.arrangeMode), e(n, 55, 0, t.arrangeMode)
            }, function (e, n) {
                var t = n.component;
                e(n, 29, 0, El(n, 34).ngClassUntouched, El(n, 34).ngClassTouched, El(n, 34).ngClassPristine, El(n, 34).ngClassDirty, El(n, 34).ngClassValid, El(n, 34).ngClassInvalid, El(n, 34).ngClassPending), e(n, 38, 0, t.getBuildingName(t.allBuildings)), e(n, 44, 0, t.getUnemployed()), e(n, 47, 0, t.getFreeLand())
            })
        }

        function iT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-field", [], null, [["document", "keydown.escape"]], function (e, n, t) {
                var r = !0;
                return "document:keydown.escape" === n && (r = !1 !== El(e, 1).onKeydownHandler(t) && r), r
            }, rT, WR)), kl(1, 114688, null, 0, VR, [Rg, nS, Cg, Tg, BR, Rr], null, null)], function (e, n) {
                e(n, 1, 0)
            }, null)
        }
        var lT = al("app-field", VR, iT, {}, {}, []),
            oT = function (e) {
                function n(n, t, r, i) {
                    return e.call(this, t, n, r, i, Mu.MOUNTAINS, Nu.MOUNTAINS) || this
                }
                return i(n, e), n.ngInjectableDef = ve({
                    factory: function () {
                        return new n(ze(Ng), ze(eS), ze(vg), ze(nS))
                    },
                    token: n,
                    providedIn: "root"
                }), n
            }(tS),
            uT = function (e) {
                function n(n, t, r, i, l, o) {
                    var u = e.call(this, n, t, r, l, i, o, Mu.MOUNTAINS) || this;
                    return u.mountainsService = l, u
                }
                return i(n, e), n.prototype.getMountains = function () {
                    return this.landService.getMountains()
                }, n.prototype.getCoal = function () {
                    return this.landService.getOre(vu.COAL)
                }, n.prototype.getGoldOre = function () {
                    return this.landService.getOre(vu.GOLD_ORE)
                }, n.prototype.getSilverOre = function () {
                    return this.landService.getOre(vu.SILVER_ORE)
                }, n.prototype.getCopperOre = function () {
                    return this.landService.getOre(vu.COPPER_ORE)
                }, n.prototype.getTinOre = function () {
                    return this.landService.getOre(vu.TIN_ORE)
                }, n.prototype.getIronOre = function () {
                    return this.landService.getOre(vu.IRON_ORE)
                }, n
            }(LO),
            sT = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{height:100%;max-height:100%;font-size:1em}#content[_ngcontent-%COMP%]{margin:.5%;display:flex;flex-direction:column;height:94%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#side[_ngcontent-%COMP%]{float:right;font-size:.9em;width:25%;margin:.5%;display:inline-block;vertical-align:bottom}#side[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:.8em;margin:0;padding:0;border:none;outline:0}#buildingsWrapper[_ngcontent-%COMP%]{height:85.5%}.buildings[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;height:100%;border:2px solid #000;overflow-y:auto;align-content:flex-start}.buildings[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}#title[_ngcontent-%COMP%]{text-align:center;border:2px solid #000;border-bottom:none}.off[_ngcontent-%COMP%]{background-color:#555}.buildingRegularWrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:.6%}.buildingDropWrapper[_ngcontent-%COMP%]{display:flex;margin:.6%;cursor:move}.buildingDropWrapper[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]],
                data: {}
            });

        function aT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleDemolishMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Demolish"]))], null, null)
        }

        function cT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleDemolishMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Stop"]))], null, null)
        }

        function pT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleArrangeMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Arrange"]))], null, null)
        }

        function hT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleArrangeMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Stop"]))], null, null)
        }

        function dT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleCombineMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Combine"]))], null, null)
        }

        function fT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleCombineMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Stop"]))], null, null)
        }

        function gT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleSplitMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Split"]))], null, null)
        }

        function vT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleSplitMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Stop"]))], null, null)
        }

        function mT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 3, "option", [], null, null, null, null, null)), kl(1, 147456, null, 0, Ff, [Pn, xn, [2, xf]], {
                value: [0, "value"]
            }, null), kl(2, 147456, null, 0, Gf, [Pn, xn, [8, null]], {
                value: [0, "value"]
            }, null), (e()(), lo(3, null, ["", ""]))], function (e, n) {
                e(n, 1, 0, n.context.$implicit), e(n, 2, 0, n.context.$implicit)
            }, function (e, n) {
                e(n, 3, 0, n.component.getBuildingName(n.context.$implicit))
            })
        }

        function yT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 4, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, [" \xa0\xa0\xa0 "])), (e()(), Yi(2, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(3, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"],
                title: [2, "title"]
            }, null), (e()(), lo(4, null, [": ", " "]))], function (e, n) {
                e(n, 3, 0, "coal", "resources", "coal deposit")
            }, function (e, n) {
                e(n, 4, 0, n.component.getCoal())
            })
        }

        function ST(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 4, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, [" \xa0\xa0\xa0 "])), (e()(), Yi(2, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(3, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"],
                title: [2, "title"]
            }, null), (e()(), lo(4, null, [": ", " "]))], function (e, n) {
                e(n, 3, 0, "gold_ore", "resources", "gold deposit")
            }, function (e, n) {
                e(n, 4, 0, n.component.getGoldOre())
            })
        }

        function ET(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 4, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, [" \xa0\xa0\xa0 "])), (e()(), Yi(2, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(3, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"],
                title: [2, "title"]
            }, null), (e()(), lo(4, null, [": ", " "]))], function (e, n) {
                e(n, 3, 0, "silver_ore", "resources", "silver deposit")
            }, function (e, n) {
                e(n, 4, 0, n.component.getSilverOre())
            })
        }

        function bT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 4, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, [" \xa0\xa0\xa0 "])), (e()(), Yi(2, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(3, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"],
                title: [2, "title"]
            }, null), (e()(), lo(4, null, [": ", " "]))], function (e, n) {
                e(n, 3, 0, "copper_ore", "resources", "copper deposit")
            }, function (e, n) {
                e(n, 4, 0, n.component.getCopperOre())
            })
        }

        function OT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 4, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, [" \xa0\xa0\xa0 "])), (e()(), Yi(2, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(3, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"],
                title: [2, "title"]
            }, null), (e()(), lo(4, null, [": ", " "]))], function (e, n) {
                e(n, 3, 0, "tin_ore", "resources", "tin deposit")
            }, function (e, n) {
                e(n, 4, 0, n.component.getTinOre())
            })
        }

        function RT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 4, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, [" \xa0\xa0\xa0 "])), (e()(), Yi(2, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(3, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"],
                title: [2, "title"]
            }, null), (e()(), lo(4, null, [": ", " "]))], function (e, n) {
                e(n, 3, 0, "iron_ore", "resources", "iron deposit")
            }, function (e, n) {
                e(n, 4, 0, n.component.getIronOre())
            })
        }

        function TT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "span", [["class", "buildingRegularWrapper"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "app-building", [], null, null, null, yO, tO)), kl(2, 114688, null, 0, nO, [Rg, vg, Ng, jg, rS, Og], {
                demolishMode: [0, "demolishMode"],
                combineMode: [1, "combineMode"],
                splitMode: [2, "splitMode"],
                building: [3, "building"],
                parentRegion: [4, "parentRegion"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 2, 0, t.demolishMode, t.combineMode, t.splitMode, n.context.$implicit, t.mountainsService)
            }, null)
        }

        function CT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "div", [["class", "buildings"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, TT)), kl(2, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, n) {
                e(n, 2, 0, n.component.getBuildings())
            }, null)
        }

        function _T(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 11, "div", [["cdkDropList", ""], ["class", "buildingDropWrapper cdk-drop-list"]], [[8, "id", 0], [2, "cdk-drop-list-dragging", null]], [[null, "cdkDropListDropped"]], function (e, n, t) {
                var r = !0;
                return "cdkDropListDropped" === n && (r = !1 !== e.component.drop() && r), r
            }, null, null)), kl(1, 212992, [[2, 4]], 1, kv, [Pn, mv, Rr, [2, gm], [3, Pv]], {
                enterPredicate: [0, "enterPredicate"]
            }, {
                dropped: "cdkDropListDropped"
            }), Ql(603979776, 4, {
                _draggables: 1
            }), Ll(256, [[1, 4]], Pv, void 0, []), Ll(2048, null, Ev, null, [kv]), (e()(), Yi(5, 16777216, null, null, 6, "app-building", [["cdkDrag", ""], ["class", "cdk-drag"]], [[2, "cdk-drag-dragging", null]], null, null, yO, tO)), Ll(6144, null, yv, null, [_v]), kl(7, 4341760, [[4, 4]], 3, _v, [Pn, [3, Ev], Zs, Zt, br, dm, mv, Rv, [2, gm]], null, null), Ql(603979776, 5, {
                _handles: 1
            }), Ql(335544320, 6, {
                _previewTemplate: 0
            }), Ql(335544320, 7, {
                _placeholderTemplate: 0
            }), kl(11, 114688, null, 0, nO, [Rg, vg, Ng, jg, rS, Og], {
                demolishMode: [0, "demolishMode"],
                building: [1, "building"],
                parentRegion: [2, "parentRegion"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 1, 0, t.enter), e(n, 11, 0, t.demolishMode, n.context.$implicit, t.mountainsService)
            }, function (e, n) {
                e(n, 0, 0, El(n, 1).id, El(n, 1)._dragging), e(n, 5, 0, El(n, 7)._hasStartedDragging && El(n, 7)._isDragging())
            })
        }

        function IT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 8, "div", [["cdkDropListGroup", ""], ["class", "buildings"]], null, null, null, null, null)), kl(1, 147456, [[1, 4]], 0, Pv, [], null, null), (e()(), Yi(2, 0, [["placeholder", 1]], null, 4, "div", [["cdkDropList", ""], ["class", "cdk-drop-list"], ["id", "placeholder"]], [[8, "id", 0], [2, "cdk-drop-list-dragging", null]], [[null, "cdkDropListDropped"]], function (e, n, t) {
                var r = !0;
                return "cdkDropListDropped" === n && (r = !1 !== e.component.drop() && r), r
            }, null, null)), Ll(6144, null, Ev, null, [kv]), kl(4, 212992, [[2, 4]], 1, kv, [Pn, mv, Rr, [2, gm], [3, Pv]], {
                id: [0, "id"],
                enterPredicate: [1, "enterPredicate"]
            }, {
                dropped: "cdkDropListDropped"
            }), Ql(603979776, 3, {
                _draggables: 1
            }), Ll(256, [[1, 4]], Pv, void 0, []), (e()(), ji(16777216, null, null, 1, null, _T)), kl(8, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 4, 0, "placeholder", t.enter), e(n, 8, 0, t.getBuildings())
            }, function (e, n) {
                e(n, 2, 0, El(n, 4).id, El(n, 4)._dragging)
            })
        }

        function AT(e) {
            return so(0, [Ql(671088640, 1, {
                listGroup: 0
            }), Ql(671088640, 2, {
                placeholder: 0
            }), (e()(), Yi(2, 0, null, null, 68, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 2, "div", [["id", "top-menu"]], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 1, "app-top-menu", [], null, null, null, _O, EO)), kl(5, 114688, null, 0, SO, [Cg], null, null), (e()(), Yi(6, 0, null, null, 64, "div", [["id", "content"]], null, null, null, null, null)), (e()(), Yi(7, 0, null, null, 33, "div", [["id", "buttons"]], null, null, null, null, null)), (e()(), Yi(8, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.openBuildModal() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Build"])), (e()(), ji(16777216, null, null, 1, null, aT)), kl(11, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, cT)), kl(13, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, pT)), kl(15, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, hT)), kl(17, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, dT)), kl(19, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, fT)), kl(21, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, gT)), kl(23, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, vT)), kl(25, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(26, 0, null, null, 14, "div", [["id", "side"]], null, null, null, null, null)), (e()(), lo(-1, null, [" Filter:"])), (e()(), Yi(28, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(29, 0, null, null, 11, "select", [], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "change"], [null, "ngModelChange"], [null, "blur"]], function (e, n, t) {
                var r = !0,
                    i = e.component;
                return "change" === n && (r = !1 !== El(e, 30).onChange(t.target.value) && r), "blur" === n && (r = !1 !== El(e, 30).onTouched() && r), "change" === n && (r = !1 !== i.updateFilter(t) && r), "ngModelChange" === n && (r = !1 !== (i.filterBuilding = t) && r), r
            }, null, null)), kl(30, 16384, null, 0, xf, [xn, Pn], null, null), Ll(1024, null, bf, function (e) {
                return [e]
            }, [xf]), kl(32, 671744, null, 0, cg, [[8, null], [8, null], [8, null], [6, bf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, wf, null, [cg]), kl(34, 16384, null, 0, $f, [[4, wf]], null, null), (e()(), Yi(35, 0, null, null, 3, "option", [], null, null, null, null, null)), kl(36, 147456, null, 0, Ff, [Pn, xn, [2, xf]], {
                value: [0, "value"]
            }, null), kl(37, 147456, null, 0, Gf, [Pn, xn, [8, null]], {
                value: [0, "value"]
            }, null), (e()(), lo(38, null, ["", ""])), (e()(), ji(16777216, null, null, 1, null, mT)), kl(40, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), (e()(), Yi(41, 0, null, null, 21, "div", [["class", "icon"]], null, null, null, null, null)), (e()(), Yi(42, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(43, 114688, null, 0, af, [], {
                name: [0, "name"]
            }, null), (e()(), lo(44, null, [" ", " \xa0\xa0 "])), (e()(), Yi(45, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(46, 114688, null, 0, af, [], {
                name: [0, "name"],
                title: [1, "title"],
                margin: [2, "margin"]
            }, null), (e()(), lo(47, null, [" ", " \xa0\xa0\xa0 "])), (e()(), Yi(48, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(49, 114688, null, 0, af, [], {
                name: [0, "name"]
            }, null), (e()(), lo(50, null, [" ", " "])), (e()(), ji(16777216, null, null, 1, null, yT)), kl(52, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, ST)), kl(54, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, ET)), kl(56, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, bT)), kl(58, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, OT)), kl(60, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, RT)), kl(62, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(63, 0, null, null, 7, "div", [["id", "buildingsWrapper"]], null, null, null, null, null)), (e()(), Yi(64, 0, null, null, 2, "div", [["id", "title"]], null, null, null, null, null)), (e()(), Yi(65, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["Buildings"])), (e()(), ji(16777216, null, null, 1, null, CT)), kl(68, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, IT)), kl(70, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 5, 0), e(n, 11, 0, !t.demolishMode), e(n, 13, 0, t.demolishMode), e(n, 15, 0, !t.arrangeMode && t.getBuildings().length > 1), e(n, 17, 0, t.arrangeMode), e(n, 19, 0, !t.combineMode && t.isUrbanPlanningEnabled() && t.hasCombinableBuildings()), e(n, 21, 0, t.combineMode), e(n, 23, 0, !t.splitMode && t.isUrbanPlanningEnabled() && t.hasSplittableBuildings()), e(n, 25, 0, t.splitMode), e(n, 32, 0, t.filterBuilding), e(n, 36, 0, t.allBuildings), e(n, 37, 0, t.allBuildings), e(n, 40, 0, t.getUniqueBuildingsFromCurrentView()), e(n, 43, 0, "mountains"), e(n, 46, 0, "hammer", "Workers", "0 0 0 2px"), e(n, 49, 0, "land"), e(n, 52, 0, t.getCoal() > 0), e(n, 54, 0, t.getGoldOre() > 0), e(n, 56, 0, t.getSilverOre() > 0), e(n, 58, 0, t.getCopperOre() > 0), e(n, 60, 0, t.getTinOre() > 0), e(n, 62, 0, t.getIronOre() > 0), e(n, 68, 0, !t.arrangeMode), e(n, 70, 0, t.arrangeMode)
            }, function (e, n) {
                var t = n.component;
                e(n, 29, 0, El(n, 34).ngClassUntouched, El(n, 34).ngClassTouched, El(n, 34).ngClassPristine, El(n, 34).ngClassDirty, El(n, 34).ngClassValid, El(n, 34).ngClassInvalid, El(n, 34).ngClassPending), e(n, 38, 0, t.getBuildingName(t.allBuildings)), e(n, 44, 0, t.getMountains()), e(n, 47, 0, t.getUnemployed()), e(n, 50, 0, t.getFreeLand())
            })
        }

        function wT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-mountains", [], null, [["document", "keydown.escape"]], function (e, n, t) {
                var r = !0;
                return "document:keydown.escape" === n && (r = !1 !== El(e, 1).onKeydownHandler(t) && r), r
            }, AT, sT)), kl(1, 114688, null, 0, uT, [Rg, nS, Cg, Tg, oT, Rr], null, null)], function (e, n) {
                e(n, 1, 0)
            }, null)
        }
        var NT = al("app-mountains", uT, wT, {}, {}, []),
            PT = function (e) {
                function n(n, t, r, i, l) {
                    var o = e.call(this, t, n, r, i, Mu.PLATEAU, Nu.PLATEAU) || this;
                    return o.gameService = l, o
                }
                return i(n, e), n.prototype.reset = function (n, t) {
                    n ? e.prototype.reset.call(this, n, t) : t ? this.buildings = [] : (this.buildings = this.buildings.filter(function (e) {
                        return e.isFinished()
                    }), this.buildings.length > 0 && this.gameService.enable(Eu.PLATEAU), this.getBuildings().forEach(function (e) {
                        return e.verifyWonderEffects()
                    }))
                }, n.ngInjectableDef = ve({
                    factory: function () {
                        return new n(ze(Ng), ze(eS), ze(vg), ze(nS), ze(Cg))
                    },
                    token: n,
                    providedIn: "root"
                }), n
            }(tS),
            DT = function (e) {
                function n(n, t, r, i, l, o, u) {
                    var s = e.call(this, n, t, r, o, i, u, Mu.PLATEAU) || this;
                    return s.techService = l, s.plateauService = o, s
                }
                return i(n, e), n.prototype.areWonderBuildingsResearched = function () {
                    return !Gu.production || this.techService.isResearched(Su.WONDER_BUILDINGS)
                }, n
            }(LO),
            kT = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{height:100%;max-height:100%;font-size:1em}#content[_ngcontent-%COMP%]{margin:.5%;display:flex;flex-direction:column;height:94%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#side[_ngcontent-%COMP%]{float:right;font-size:.9em;width:25%;margin:.5%;display:inline-block;vertical-align:bottom}#side[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:.8em;margin:0;padding:0;border:none;outline:0}#buildingsWrapper[_ngcontent-%COMP%]{height:85.5%}.buildings[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;height:100%;border:2px solid #000;overflow-y:auto;align-content:flex-start}.buildings[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}#title[_ngcontent-%COMP%]{text-align:center;border:2px solid #000;border-bottom:none}.off[_ngcontent-%COMP%]{background-color:#555}.buildingRegularWrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:.6%}.buildingDropWrapper[_ngcontent-%COMP%]{display:flex;margin:.6%;cursor:move}.buildingDropWrapper[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]],
                data: {}
            });

        function MT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.openBuildModal() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Build"]))], null, null)
        }

        function LT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleArrangeMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Arrange"]))], null, null)
        }

        function xT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleArrangeMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Stop"]))], null, null)
        }

        function FT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 3, "option", [], null, null, null, null, null)), kl(1, 147456, null, 0, Ff, [Pn, xn, [2, xf]], {
                value: [0, "value"]
            }, null), kl(2, 147456, null, 0, Gf, [Pn, xn, [8, null]], {
                value: [0, "value"]
            }, null), (e()(), lo(3, null, ["", ""]))], function (e, n) {
                e(n, 1, 0, n.context.$implicit), e(n, 2, 0, n.context.$implicit)
            }, function (e, n) {
                e(n, 3, 0, n.component.getBuildingName(n.context.$implicit))
            })
        }

        function UT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "span", [["class", "buildingRegularWrapper"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "app-building", [], null, null, null, yO, tO)), kl(2, 114688, null, 0, nO, [Rg, vg, Ng, jg, rS, Og], {
                demolishMode: [0, "demolishMode"],
                combineMode: [1, "combineMode"],
                splitMode: [2, "splitMode"],
                building: [3, "building"],
                parentRegion: [4, "parentRegion"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 2, 0, t.demolishMode, t.combineMode, t.splitMode, n.context.$implicit, t.plateauService)
            }, null)
        }

        function HT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "div", [["class", "buildings"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, UT)), kl(2, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, n) {
                e(n, 2, 0, n.component.getBuildings())
            }, null)
        }

        function GT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 11, "div", [["cdkDropList", ""], ["class", "buildingDropWrapper cdk-drop-list"]], [[8, "id", 0], [2, "cdk-drop-list-dragging", null]], [[null, "cdkDropListDropped"]], function (e, n, t) {
                var r = !0;
                return "cdkDropListDropped" === n && (r = !1 !== e.component.drop() && r), r
            }, null, null)), kl(1, 212992, [[2, 4]], 1, kv, [Pn, mv, Rr, [2, gm], [3, Pv]], {
                enterPredicate: [0, "enterPredicate"]
            }, {
                dropped: "cdkDropListDropped"
            }), Ql(603979776, 4, {
                _draggables: 1
            }), Ll(256, [[1, 4]], Pv, void 0, []), Ll(2048, null, Ev, null, [kv]), (e()(), Yi(5, 16777216, null, null, 6, "app-building", [["cdkDrag", ""], ["class", "cdk-drag"]], [[2, "cdk-drag-dragging", null]], null, null, yO, tO)), Ll(6144, null, yv, null, [_v]), kl(7, 4341760, [[4, 4]], 3, _v, [Pn, [3, Ev], Zs, Zt, br, dm, mv, Rv, [2, gm]], null, null), Ql(603979776, 5, {
                _handles: 1
            }), Ql(335544320, 6, {
                _previewTemplate: 0
            }), Ql(335544320, 7, {
                _placeholderTemplate: 0
            }), kl(11, 114688, null, 0, nO, [Rg, vg, Ng, jg, rS, Og], {
                demolishMode: [0, "demolishMode"],
                building: [1, "building"],
                parentRegion: [2, "parentRegion"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 1, 0, t.enter), e(n, 11, 0, t.demolishMode, n.context.$implicit, t.plateauService)
            }, function (e, n) {
                e(n, 0, 0, El(n, 1).id, El(n, 1)._dragging), e(n, 5, 0, El(n, 7)._hasStartedDragging && El(n, 7)._isDragging())
            })
        }

        function BT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 8, "div", [["cdkDropListGroup", ""], ["class", "buildings"]], null, null, null, null, null)), kl(1, 147456, [[1, 4]], 0, Pv, [], null, null), (e()(), Yi(2, 0, [["placeholder", 1]], null, 4, "div", [["cdkDropList", ""], ["class", "cdk-drop-list"], ["id", "placeholder"]], [[8, "id", 0], [2, "cdk-drop-list-dragging", null]], [[null, "cdkDropListDropped"]], function (e, n, t) {
                var r = !0;
                return "cdkDropListDropped" === n && (r = !1 !== e.component.drop() && r), r
            }, null, null)), Ll(6144, null, Ev, null, [kv]), kl(4, 212992, [[2, 4]], 1, kv, [Pn, mv, Rr, [2, gm], [3, Pv]], {
                id: [0, "id"],
                enterPredicate: [1, "enterPredicate"]
            }, {
                dropped: "cdkDropListDropped"
            }), Ql(603979776, 3, {
                _draggables: 1
            }), Ll(256, [[1, 4]], Pv, void 0, []), (e()(), ji(16777216, null, null, 1, null, GT)), kl(8, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 4, 0, "placeholder", t.enter), e(n, 8, 0, t.getBuildings())
            }, function (e, n) {
                e(n, 2, 0, El(n, 4).id, El(n, 4)._dragging)
            })
        }

        function VT(e) {
            return so(0, [Ql(671088640, 1, {
                listGroup: 0
            }), Ql(671088640, 2, {
                placeholder: 0
            }), (e()(), Yi(2, 0, null, null, 41, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 2, "div", [["id", "top-menu"]], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 1, "app-top-menu", [], null, null, null, _O, EO)), kl(5, 114688, null, 0, SO, [Cg], null, null), (e()(), Yi(6, 0, null, null, 37, "div", [["id", "content"]], null, null, null, null, null)), (e()(), Yi(7, 0, null, null, 21, "div", [["id", "buttons"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, MT)), kl(9, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, LT)), kl(11, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, xT)), kl(13, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(14, 0, null, null, 14, "div", [["id", "side"]], null, null, null, null, null)), (e()(), lo(-1, null, [" Filter:"])), (e()(), Yi(16, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(17, 0, null, null, 11, "select", [], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "change"], [null, "ngModelChange"], [null, "blur"]], function (e, n, t) {
                var r = !0,
                    i = e.component;
                return "change" === n && (r = !1 !== El(e, 18).onChange(t.target.value) && r), "blur" === n && (r = !1 !== El(e, 18).onTouched() && r), "change" === n && (r = !1 !== i.updateFilter(t) && r), "ngModelChange" === n && (r = !1 !== (i.filterBuilding = t) && r), r
            }, null, null)), kl(18, 16384, null, 0, xf, [xn, Pn], null, null), Ll(1024, null, bf, function (e) {
                return [e]
            }, [xf]), kl(20, 671744, null, 0, cg, [[8, null], [8, null], [8, null], [6, bf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, wf, null, [cg]), kl(22, 16384, null, 0, $f, [[4, wf]], null, null), (e()(), Yi(23, 0, null, null, 3, "option", [], null, null, null, null, null)), kl(24, 147456, null, 0, Ff, [Pn, xn, [2, xf]], {
                value: [0, "value"]
            }, null), kl(25, 147456, null, 0, Gf, [Pn, xn, [8, null]], {
                value: [0, "value"]
            }, null), (e()(), lo(26, null, ["", ""])), (e()(), ji(16777216, null, null, 1, null, FT)), kl(28, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), (e()(), Yi(29, 0, null, null, 6, "div", [["class", "icon"]], null, null, null, null, null)), (e()(), Yi(30, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(31, 114688, null, 0, af, [], {
                name: [0, "name"],
                title: [1, "title"],
                margin: [2, "margin"]
            }, null), (e()(), lo(32, null, [" ", " \xa0\xa0\xa0 "])), (e()(), Yi(33, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(34, 114688, null, 0, af, [], {
                name: [0, "name"]
            }, null), (e()(), lo(35, null, [" ", " "])), (e()(), Yi(36, 0, null, null, 7, "div", [["id", "buildingsWrapper"]], null, null, null, null, null)), (e()(), Yi(37, 0, null, null, 2, "div", [["id", "title"]], null, null, null, null, null)), (e()(), Yi(38, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["Buildings"])), (e()(), ji(16777216, null, null, 1, null, HT)), kl(41, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, BT)), kl(43, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 5, 0), e(n, 9, 0, t.areWonderBuildingsResearched()), e(n, 11, 0, !t.arrangeMode && t.getBuildings().length > 1), e(n, 13, 0, t.arrangeMode), e(n, 20, 0, t.filterBuilding), e(n, 24, 0, t.allBuildings), e(n, 25, 0, t.allBuildings), e(n, 28, 0, t.getUniqueBuildingsFromCurrentView()), e(n, 31, 0, "hammer", "Workers", "0 0 0 2px"), e(n, 34, 0, "land"), e(n, 41, 0, !t.arrangeMode), e(n, 43, 0, t.arrangeMode)
            }, function (e, n) {
                var t = n.component;
                e(n, 17, 0, El(n, 22).ngClassUntouched, El(n, 22).ngClassTouched, El(n, 22).ngClassPristine, El(n, 22).ngClassDirty, El(n, 22).ngClassValid, El(n, 22).ngClassInvalid, El(n, 22).ngClassPending), e(n, 26, 0, t.getBuildingName(t.allBuildings)), e(n, 32, 0, t.getUnemployed()), e(n, 35, 0, t.getFreeLand())
            })
        }

        function WT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-field", [], null, [["document", "keydown.escape"]], function (e, n, t) {
                var r = !0;
                return "document:keydown.escape" === n && (r = !1 !== El(e, 1).onKeydownHandler(t) && r), r
            }, VT, kT)), kl(1, 114688, null, 0, DT, [Rg, nS, Cg, Tg, gS, PT, Rr], null, null)], function (e, n) {
                e(n, 1, 0)
            }, null)
        }
        var jT = al("app-field", DT, WT, {}, {}, []),
            YT = function (e) {
                function n(n, t, r, i, l) {
                    var o = e.call(this, t, n, r, l, Mu.SEA, Nu.SEA) || this;
                    return o.idService = i, o.seaBuildings = [], o
                }
                return i(n, e), n.prototype.init = function () {
                    this.seaBuildings.push(new uy(this.servicesService, this.idService.getNextId(), 200))
                }, n.prototype.reset = function (n, t) {
                    this.seaBuildings = [], e.prototype.reset.call(this, n, t)
                }, n.prototype.tick = function (e) {
                    var n = this;
                    this.seaBuildings.filter(function (e) {
                        return e.getBuildingType() === bu.SCHOOL_OF_FISH
                    }).map(function (e) {
                        return e
                    }).filter(function (e) {
                        return e.getFish() > ts.SEA.SCHOOL_OF_FISH.SPLIT_THRESHOLD
                    }).forEach(function (e) {
                        if (1 === ku.randomBetween(1, ts.SEA.SCHOOL_OF_FISH.SPLIT_CHANCE)) {
                            var t = Math.floor(e.getFish() / 2);
                            e.reduceFish(t), n.seaBuildings.push(new uy(n.servicesService, n.idService.getNextId(), t))
                        }
                    }), 0 === this.seaBuildings.filter(function (e) {
                        return e.getBuildingType() === bu.SCHOOL_OF_FISH
                    }).length && 1 === ku.randomBetween(1, ts.SEA.SCHOOL_OF_FISH.NEW_SCHOOL_CHANCE) && this.seaBuildings.push(new uy(this.servicesService, this.idService.getNextId(), ts.SEA.SCHOOL_OF_FISH.NEW_SCHOOL_SIZE)), 0 === this.getSharksAmount() && this.getFishAmount() > ts.SEA.SHARKS.BREED_THRESHOLD && this.seaBuildings.push(new Dy(this.servicesService, this.idService.getNextId(), 1)), this.seaBuildings = this.seaBuildings.filter(function (e) {
                        return e.getBuildingType() !== bu.SHARKS || 0 !== e.getSharks()
                    }), this.buildings.forEach(function (n) {
                        return n.tick(e)
                    }), this.seaBuildings.forEach(function (n) {
                        return n.tick(e)
                    })
                }, n.prototype.save = function () {
                    return {
                        buildings: this.buildings,
                        seaBuildings: this.seaBuildings
                    }
                }, n.prototype.load = function (e) {
                    this.buildings = [], this.seaBuildings = [];
                    for (var n = 0, t = e.buildings; n < t.length; n++) this.buildings.push(this.buildingFactoryService.loadBuilding(t[n]));
                    for (var r = 0, i = e.seaBuildings; r < i.length; r++) this.seaBuildings.push(this.buildingFactoryService.loadBuilding(i[r]))
                }, n.prototype.addSeaBuilding = function (e) {
                    this.seaBuildings.push(e)
                }, n.prototype.getSeaBuildings = function () {
                    return this.seaBuildings
                }, n.prototype.reduceFish = function (e) {
                    var n = this.seaBuildings.filter(function (e) {
                        return e.getBuildingType() === bu.SCHOOL_OF_FISH
                    });
                    return n.length > 0 && !!n[0].reduceFish(e) && (0 === n[0].getFish() && this.seaBuildings.shift(), !0)
                }, n.prototype.getFishAmount = function () {
                    var e = 0;
                    return this.seaBuildings.filter(function (e) {
                        return e.getBuildingType() === bu.SCHOOL_OF_FISH
                    }).map(function (e) {
                        return e
                    }).forEach(function (n) {
                        return e += n.getFish()
                    }), e
                }, n.prototype.getSharksAmount = function () {
                    var e = 0;
                    return this.seaBuildings.filter(function (e) {
                        return e.getBuildingType() === bu.SHARKS
                    }).map(function (e) {
                        return e
                    }).forEach(function (n) {
                        return e += n.getSharks()
                    }), e
                }, n.ngInjectableDef = ve({
                    factory: function () {
                        return new n(ze(Ng), ze(eS), ze(vg), ze(Jy), ze(nS))
                    },
                    token: n,
                    providedIn: "root"
                }), n
            }(tS),
            zT = function (e) {
                function n(n, t, r, i, l, o) {
                    var u = e.call(this, n, t, r, l, i, o, Mu.SEA) || this;
                    return u.seaService = l, u
                }
                return i(n, e), n.prototype.getSeaBuildings = function () {
                    return this.seaService.getSeaBuildings()
                }, n
            }(LO),
            KT = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{height:100%;max-height:100%;font-size:1em}#content[_ngcontent-%COMP%]{margin:.5%;display:flex;flex-direction:column;height:94%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#side[_ngcontent-%COMP%]{float:right;font-size:.9em;width:25%;margin:.5%;display:inline-block;vertical-align:bottom}#side[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:.8em;margin:0;padding:0;border:none;outline:0}#buildingsWrapper[_ngcontent-%COMP%]{height:21.5%;margin-bottom:30px}#seaWrapper[_ngcontent-%COMP%]{height:59%}.buildings[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;height:100%;border:2px solid #000;overflow-y:auto;align-content:flex-start}.buildings[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}.title[_ngcontent-%COMP%]{text-align:center;border:2px solid #000;border-bottom:none}.off[_ngcontent-%COMP%]{background-color:#555}.buildingRegularWrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:.6%}.buildingDropWrapper[_ngcontent-%COMP%]{display:flex;margin:.6%;cursor:move}.buildingDropWrapper[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]],
                data: {}
            });

        function qT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleDemolishMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Demolish"]))], null, null)
        }

        function $T(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleDemolishMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Stop"]))], null, null)
        }

        function QT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleArrangeMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Arrange"]))], null, null)
        }

        function ZT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleArrangeMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Stop"]))], null, null)
        }

        function XT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleCombineMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Combine"]))], null, null)
        }

        function JT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleCombineMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Stop"]))], null, null)
        }

        function eC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleSplitMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Split"]))], null, null)
        }

        function nC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleSplitMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Stop"]))], null, null)
        }

        function tC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 3, "option", [], null, null, null, null, null)), kl(1, 147456, null, 0, Ff, [Pn, xn, [2, xf]], {
                value: [0, "value"]
            }, null), kl(2, 147456, null, 0, Gf, [Pn, xn, [8, null]], {
                value: [0, "value"]
            }, null), (e()(), lo(3, null, ["", ""]))], function (e, n) {
                e(n, 1, 0, n.context.$implicit), e(n, 2, 0, n.context.$implicit)
            }, function (e, n) {
                e(n, 3, 0, n.component.getBuildingName(n.context.$implicit))
            })
        }

        function rC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "span", [["class", "buildingRegularWrapper"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "app-building", [], null, null, null, yO, tO)), kl(2, 114688, null, 0, nO, [Rg, vg, Ng, jg, rS, Og], {
                demolishMode: [0, "demolishMode"],
                combineMode: [1, "combineMode"],
                splitMode: [2, "splitMode"],
                building: [3, "building"],
                parentRegion: [4, "parentRegion"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 2, 0, t.demolishMode, t.combineMode, t.splitMode, n.context.$implicit, t.seaService)
            }, null)
        }

        function iC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "div", [["class", "buildings"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, rC)), kl(2, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, n) {
                e(n, 2, 0, n.component.getBuildings())
            }, null)
        }

        function lC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 11, "div", [["cdkDropList", ""], ["class", "buildingDropWrapper cdk-drop-list"]], [[8, "id", 0], [2, "cdk-drop-list-dragging", null]], [[null, "cdkDropListDropped"]], function (e, n, t) {
                var r = !0;
                return "cdkDropListDropped" === n && (r = !1 !== e.component.drop() && r), r
            }, null, null)), kl(1, 212992, [[2, 4]], 1, kv, [Pn, mv, Rr, [2, gm], [3, Pv]], {
                enterPredicate: [0, "enterPredicate"]
            }, {
                dropped: "cdkDropListDropped"
            }), Ql(603979776, 4, {
                _draggables: 1
            }), Ll(256, [[1, 4]], Pv, void 0, []), Ll(2048, null, Ev, null, [kv]), (e()(), Yi(5, 16777216, null, null, 6, "app-building", [["cdkDrag", ""], ["class", "cdk-drag"]], [[2, "cdk-drag-dragging", null]], null, null, yO, tO)), Ll(6144, null, yv, null, [_v]), kl(7, 4341760, [[4, 4]], 3, _v, [Pn, [3, Ev], Zs, Zt, br, dm, mv, Rv, [2, gm]], null, null), Ql(603979776, 5, {
                _handles: 1
            }), Ql(335544320, 6, {
                _previewTemplate: 0
            }), Ql(335544320, 7, {
                _placeholderTemplate: 0
            }), kl(11, 114688, null, 0, nO, [Rg, vg, Ng, jg, rS, Og], {
                demolishMode: [0, "demolishMode"],
                building: [1, "building"],
                parentRegion: [2, "parentRegion"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 1, 0, t.enter), e(n, 11, 0, t.demolishMode, n.context.$implicit, t.seaService)
            }, function (e, n) {
                e(n, 0, 0, El(n, 1).id, El(n, 1)._dragging), e(n, 5, 0, El(n, 7)._hasStartedDragging && El(n, 7)._isDragging())
            })
        }

        function oC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 8, "div", [["cdkDropListGroup", ""], ["class", "buildings"]], null, null, null, null, null)), kl(1, 147456, [[1, 4]], 0, Pv, [], null, null), (e()(), Yi(2, 0, [["placeholder", 1]], null, 4, "div", [["cdkDropList", ""], ["class", "cdk-drop-list"], ["id", "placeholder"]], [[8, "id", 0], [2, "cdk-drop-list-dragging", null]], [[null, "cdkDropListDropped"]], function (e, n, t) {
                var r = !0;
                return "cdkDropListDropped" === n && (r = !1 !== e.component.drop() && r), r
            }, null, null)), Ll(6144, null, Ev, null, [kv]), kl(4, 212992, [[2, 4]], 1, kv, [Pn, mv, Rr, [2, gm], [3, Pv]], {
                id: [0, "id"],
                enterPredicate: [1, "enterPredicate"]
            }, {
                dropped: "cdkDropListDropped"
            }), Ql(603979776, 3, {
                _draggables: 1
            }), Ll(256, [[1, 4]], Pv, void 0, []), (e()(), ji(16777216, null, null, 1, null, lC)), kl(8, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 4, 0, "placeholder", t.enter), e(n, 8, 0, t.getBuildings())
            }, function (e, n) {
                e(n, 2, 0, El(n, 4).id, El(n, 4)._dragging)
            })
        }

        function uC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "span", [["class", "buildingRegularWrapper"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "app-building", [], null, null, null, yO, tO)), kl(2, 114688, null, 0, nO, [Rg, vg, Ng, jg, rS, Og], {
                building: [0, "building"],
                parentRegion: [1, "parentRegion"]
            }, null)], function (e, n) {
                e(n, 2, 0, n.context.$implicit, n.component.seaService)
            }, null)
        }

        function sC(e) {
            return so(0, [Ql(671088640, 1, {
                listGroup: 0
            }), Ql(671088640, 2, {
                placeholder: 0
            }), (e()(), Yi(2, 0, null, null, 62, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 2, "div", [["id", "top-menu"]], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 1, "app-top-menu", [], null, null, null, _O, EO)), kl(5, 114688, null, 0, SO, [Cg], null, null), (e()(), Yi(6, 0, null, null, 58, "div", [["id", "content"]], null, null, null, null, null)), (e()(), Yi(7, 0, null, null, 33, "div", [["id", "buttons"]], null, null, null, null, null)), (e()(), Yi(8, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.openBuildModal() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Build"])), (e()(), ji(16777216, null, null, 1, null, qT)), kl(11, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, $T)), kl(13, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, QT)), kl(15, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, ZT)), kl(17, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, XT)), kl(19, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, JT)), kl(21, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, eC)), kl(23, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, nC)), kl(25, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(26, 0, null, null, 14, "div", [["id", "side"]], null, null, null, null, null)), (e()(), lo(-1, null, [" Filter:"])), (e()(), Yi(28, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(29, 0, null, null, 11, "select", [], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "change"], [null, "ngModelChange"], [null, "blur"]], function (e, n, t) {
                var r = !0,
                    i = e.component;
                return "change" === n && (r = !1 !== El(e, 30).onChange(t.target.value) && r), "blur" === n && (r = !1 !== El(e, 30).onTouched() && r), "change" === n && (r = !1 !== i.updateFilter(t) && r), "ngModelChange" === n && (r = !1 !== (i.filterBuilding = t) && r), r
            }, null, null)), kl(30, 16384, null, 0, xf, [xn, Pn], null, null), Ll(1024, null, bf, function (e) {
                return [e]
            }, [xf]), kl(32, 671744, null, 0, cg, [[8, null], [8, null], [8, null], [6, bf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, wf, null, [cg]), kl(34, 16384, null, 0, $f, [[4, wf]], null, null), (e()(), Yi(35, 0, null, null, 3, "option", [], null, null, null, null, null)), kl(36, 147456, null, 0, Ff, [Pn, xn, [2, xf]], {
                value: [0, "value"]
            }, null), kl(37, 147456, null, 0, Gf, [Pn, xn, [8, null]], {
                value: [0, "value"]
            }, null), (e()(), lo(38, null, ["", ""])), (e()(), ji(16777216, null, null, 1, null, tC)), kl(40, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), (e()(), Yi(41, 0, null, null, 6, "div", [["class", "icon"]], null, null, null, null, null)), (e()(), Yi(42, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(43, 114688, null, 0, af, [], {
                name: [0, "name"],
                title: [1, "title"],
                margin: [2, "margin"]
            }, null), (e()(), lo(44, null, [" ", " \xa0\xa0\xa0 "])), (e()(), Yi(45, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(46, 114688, null, 0, af, [], {
                name: [0, "name"]
            }, null), (e()(), lo(47, null, [" ", " "])), (e()(), Yi(48, 0, null, null, 7, "div", [["id", "buildingsWrapper"]], null, null, null, null, null)), (e()(), Yi(49, 0, null, null, 2, "div", [["class", "title"]], null, null, null, null, null)), (e()(), Yi(50, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["Buildings"])), (e()(), ji(16777216, null, null, 1, null, iC)), kl(53, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, oC)), kl(55, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(56, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(57, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(58, 0, null, null, 6, "div", [["id", "seaWrapper"]], null, null, null, null, null)), (e()(), Yi(59, 0, null, null, 2, "div", [["class", "title"]], null, null, null, null, null)), (e()(), Yi(60, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["Sea"])), (e()(), Yi(62, 0, null, null, 2, "div", [["class", "buildings"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, uC)), kl(64, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 5, 0), e(n, 11, 0, !t.demolishMode), e(n, 13, 0, t.demolishMode), e(n, 15, 0, !t.arrangeMode && t.getBuildings().length > 1), e(n, 17, 0, t.arrangeMode), e(n, 19, 0, !t.combineMode && t.isUrbanPlanningEnabled() && t.hasCombinableBuildings()), e(n, 21, 0, t.combineMode), e(n, 23, 0, !t.splitMode && t.isUrbanPlanningEnabled() && t.hasSplittableBuildings()), e(n, 25, 0, t.splitMode), e(n, 32, 0, t.filterBuilding), e(n, 36, 0, t.allBuildings), e(n, 37, 0, t.allBuildings), e(n, 40, 0, t.getUniqueBuildingsFromCurrentView()), e(n, 43, 0, "hammer", "Workers", "0 0 0 2px"), e(n, 46, 0, "land"), e(n, 53, 0, !t.arrangeMode), e(n, 55, 0, t.arrangeMode), e(n, 64, 0, t.getSeaBuildings())
            }, function (e, n) {
                var t = n.component;
                e(n, 29, 0, El(n, 34).ngClassUntouched, El(n, 34).ngClassTouched, El(n, 34).ngClassPristine, El(n, 34).ngClassDirty, El(n, 34).ngClassValid, El(n, 34).ngClassInvalid, El(n, 34).ngClassPending), e(n, 38, 0, t.getBuildingName(t.allBuildings)), e(n, 44, 0, t.getUnemployed()), e(n, 47, 0, t.getFreeLand())
            })
        }

        function aC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-sea", [], null, [["document", "keydown.escape"]], function (e, n, t) {
                var r = !0;
                return "document:keydown.escape" === n && (r = !1 !== El(e, 1).onKeydownHandler(t) && r), r
            }, sC, KT)), kl(1, 114688, null, 0, zT, [Rg, nS, Cg, Tg, YT, Rr], null, null)], function (e, n) {
                e(n, 1, 0)
            }, null)
        }
        var cC = al("app-sea", zT, aC, {}, {}, []),
            pC = function () {
                function e(e, n, t) {
                    this.rd = e, this.el = n, this.modalService = t, this.param = "", this.element = n.nativeElement
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.ngAfterViewInit = function () {
                    var e = this,
                        n = this;
                    this.id && (document.body.appendChild(this.element), this.rd.listen(this.element, "click", function (t) {
                        var r = t.target;
                        null === r.closest(".modal-body") && "BUTTON" !== r.tagName && "tutorial-modal" !== n.id && (e.modalService.sendConfirmationResult(!1), e.modalService.sendCloseSignal(), n.close())
                    }), this.modalService.add(this))
                }, e.prototype.ngOnDestroy = function () {
                    this.modalService.remove(this.id), this.element.remove()
                }, e.prototype.open = function () {
                    this.element.style.display = "block", document.body.classList.add("modal-open")
                }, e.prototype.openTutorialWindow = function (e) {
                    var n = this.element.querySelector(".modal-body");
                    n.style.position = "absolute", n.style.margin = "0", n.style.width = e.width, n.style.top = e.top, n.style.left = e.left, this.element.style.display = "block", document.body.classList.add("modal-open")
                }, e.prototype.close = function () {
                    this.element.style.display = "none", document.body.classList.remove("modal-open")
                }, e.prototype.onKeydownHandler = function (e) {
                    "tutorial-modal" !== this.id && (this.modalService.sendConfirmationResult(!1), this.modalService.sendCloseSignal(), this.close())
                }, e
            }(),
            hC = gi({
                encapsulation: 2,
                styles: [],
                data: {}
            });

        function dC(e) {
            return so(0, [Ql(671088640, 1, {
                body: 1
            }), {
                nodeIndex: -1,
                parent: null,
                renderParent: null,
                bindingIndex: -1,
                outputIndex: -1,
                checkIndex: -1,
                flags: 8,
                childFlags: 0,
                directChildFlags: 0,
                childMatchedQueries: 0,
                matchedQueries: {},
                matchedQueryIds: 0,
                references: {},
                ngContentIndex: null,
                childCount: 0,
                bindings: [],
                bindingFlags: 0,
                outputs: [],
                element: null,
                provider: null,
                text: null,
                query: null,
                ngContent: {
                    index: 0
                }
            }], null, null)
        }
        var fC = function () {
                function e(e, n, t, r, i, l, o, u, s, a, c, p, h, d) {
                    this.buildingFactoryService = e, this.servicesService = n, this.modalService = t, this.logService = r, this.resourcesService = i, this.landService = l, this.villageService = o, this.fortService = u, this.fieldService = s, this.forestService = a, this.mountainsService = c, this.seaService = p, this.plateauService = h, this.gameService = d, this.filterText = "", this.buildings = new Map, this.buildings.set(Mu.VILLAGE, [[new xm, [], 0], [new Fm, [Eu.HOUSE], 0], [new gy, [Eu.BAKERY], 0], [new Ty, [Eu.TAILOR], 0], [new ny, [], 0], [new ty, [], 0], [new Vy, [Eu.MARKETPLACE], 0], [new wy, [Eu.TAVERN], 0], [new oy, [Eu.SHRINE], 1], [new jy, [Eu.CHURCH], 1]]), this.buildings.set(Mu.FOREST, [[new Hm, [], 0], [new Qm, [], 0], [new ly, [Eu.HUNTER], 0], [new by, [Eu.TANNERY], 0], [new Vm, [Eu.FORESTER], 0], [new zm, [Eu.SAWMILL], 0]]), this.buildings.set(Mu.FORT, [[new yy, [Eu.BARRACKS], 0], [new Ey, [Eu.BARRACKS], 0], [new Oy, [Eu.STOCKADE], 1], [new _y, [Eu.WOODEN_TOWER], 0], [new Iy, [Eu.STONE_TOWER], 0], [new Xy, [Eu.STASH], 3]]), this.buildings.set(Mu.FIELD, [[new ay, [Eu.FARM], 0], [new fy, [Eu.WINDMILL], 0], [new py, [], 0], [new dy, [], 0], [new xy, [Eu.PASTURE], 0], [new Fy, [Eu.BUTCHER], 0], [new Ry, [Eu.COTTON_MILL], 0], [new Cy, [Eu.BREWERY], 0], [new Ay, [Eu.WINERY], 0]]), this.buildings.set(Mu.MOUNTAINS, [[new Xm, [], 0], [new Ny, [Eu.GEOLOGIST], 0], [new Py, [], 0], [new My, [Eu.PIT_MINE], 0], [new Wy, [Eu.SMITHY], 1], [new Uy, [Eu.MINT], 0]]), this.buildings.set(Mu.PLATEAU, [[new By, [], 1], [new Yy, [], 1], [new zy, [], 1], [new Ky, [], 1], [new $y, [], 1], [new Qy, [], 1], [new Zy, [], 1]]), this.buildings.set(Mu.SEA, [[new my, [Eu.FISHERS_HUT], 0]])
                }
                return e.prototype.ngOnInit = function () {
                    var e = this;
                    this.clearFilterObservable.subscribe(function (n) {
                        return e.filterText = ""
                    })
                }, e.prototype.build = function (e) {
                    if (e.buildOnMountain()) {
                        if (!this.landService.hasMountains(e.getSize())) return this.modalService.info("Not enough mountains to build " + e.getName() + "!<br>" + e.getSize() + " mountains required but " + this.landService.getMountains() + " available"), void this.modalService.close(mu.BUILD)
                    } else if (!this.landService.hasLand(e.getSize())) return this.modalService.info("Not enough empty land to build " + e.getName() + "!<br>" + e.getSize() + " empty land required but " + this.landService.getLand() + " available"), void this.modalService.close(mu.BUILD);
                    if (this.resourcesService.decreaseResources(e.getCost(), !0)) {
                        switch (e.buildOnMountain() ? this.landService.decreaseMountains(e.getSize()) : this.landService.decreaseLand(e.getSize()), this.region) {
                            case Mu.VILLAGE:
                                this.villageService.createConstruction(new Gm(this.servicesService, this.servicesService.getService(Nu.ID).getNextId(), Mu.VILLAGE, e.getBuildingType(), e.getComplexity(), e.getSize()).build());
                                break;
                            case Mu.FORT:
                                this.fortService.createConstruction(new Gm(this.servicesService, this.servicesService.getService(Nu.ID).getNextId(), Mu.FORT, e.getBuildingType(), e.getComplexity(), e.getSize()).build());
                                break;
                            case Mu.FOREST:
                                this.forestService.createConstruction(new Gm(this.servicesService, this.servicesService.getService(Nu.ID).getNextId(), Mu.FOREST, e.getBuildingType(), e.getComplexity(), e.getSize()).build());
                                break;
                            case Mu.FIELD:
                                this.fieldService.createConstruction(new Gm(this.servicesService, this.servicesService.getService(Nu.ID).getNextId(), Mu.FIELD, e.getBuildingType(), e.getComplexity(), e.getSize()).build());
                                break;
                            case Mu.MOUNTAINS:
                                this.mountainsService.createConstruction(new Gm(this.servicesService, this.servicesService.getService(Nu.ID).getNextId(), Mu.MOUNTAINS, e.getBuildingType(), e.getComplexity(), e.getSize()).build());
                                break;
                            case Mu.SEA:
                                this.seaService.createConstruction(new Gm(this.servicesService, this.servicesService.getService(Nu.ID).getNextId(), Mu.SEA, e.getBuildingType(), e.getComplexity(), e.getSize()).build());
                                break;
                            case Mu.PLATEAU:
                                this.plateauService.createConstruction(new Gm(this.servicesService, this.servicesService.getService(Nu.ID).getNextId(), Mu.PLATEAU, e.getBuildingType(), e.getComplexity(), e.getSize()).build())
                        }
                        this.modalService.close(mu.BUILD)
                    } else this.modalService.close(mu.BUILD)
                }, e.prototype.ngOnChanges = function (e) {
                    this.regionString = Mu[this.region]
                }, e.prototype.checkBuilding = function (e, n) {
                    var t = this,
                        r = !0;
                    return e[1].forEach(function (e) {
                        t.gameService.isEnabled(e) || (r = !1)
                    }), e[2] > 0 && e[2] <= this.servicesService.getServiceByRegion(n).getBuildings().filter(function (n) {
                        return n.getBuildingType() === e[0].getBuildingType()
                    }).length && (r = !1), r
                }, e.prototype.hasResource = function (e) {
                    return 0 === this.resourcesService.hasResource(e.key, e.value, !0)
                }, e.prototype.getResourceName = function (e) {
                    return Au.prepareResourceName(e)
                }, e.prototype.getBuildingCostEntries = function (e) {
                    return e.getCost()
                }, e.prototype.getBuildingForRegion = function (e) {
                    var n = this;
                    if (this.buildings && this.buildings.get(e)) {
                        var t = this.buildings.get(e).filter(function (t) {
                            return n.checkBuilding(t, e)
                        }).map(function (e) {
                            return e[0]
                        });
                        return e === Mu.PLATEAU && this.gameService.getAbdicationLevel() < this.servicesService.getServiceByRegion(e).getBuildings().length ? [] : null !== this.filterText && this.filterText.length > 0 ? t.filter(function (e) {
                            return e.getName().toLowerCase().includes(n.filterText.toLowerCase())
                        }) : t
                    }
                }, e.prototype.isCostMet = function (e) {
                    var n = this,
                        t = !0;
                    return Array.from(e.getCost().entries()).forEach(function (e) {
                        0 !== n.resourcesService.hasResource(e[0], e[1], !0) && (t = !1)
                    }), t
                }, e.prototype.hasLand = function (e) {
                    return this.landService.hasLand(e)
                }, e.prototype.hasMountains = function (e) {
                    return this.landService.getMountains() >= e
                }, e
            }(),
            gC = gi({
                encapsulation: 0,
                styles: [[".notMet[_ngcontent-%COMP%]{color:#8b0000}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.5em;margin-bottom:10px}#buildings[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch}.building[_ngcontent-%COMP%]{display:flex;flex-direction:row;text-align:center;border:1px solid #000;margin-bottom:10px}.buildingTitle[_ngcontent-%COMP%]{font-weight:600;background-color:var(--active-colour);border-bottom:1px solid #000}.buildingSecondRow[_ngcontent-%COMP%]{display:flex;width:100%;border-right:1px solid #000;flex-direction:column}.buildButton[_ngcontent-%COMP%]{width:30%}.buildButtonNotAvailable[_ngcontent-%COMP%]{width:30%;cursor:not-allowed}.details[_ngcontent-%COMP%]{width:100%;text-align:center}.resourceIcon[_ngcontent-%COMP%]{height:20px;width:20px;vertical-align:middle}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center}"]],
                data: {}
            });

        function vC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(1, null, [" ", " "]))], null, function (e, n) {
                var t = n.parent.parent.context.$implicit.getSize();
                e(n, 1, 0, t)
            })
        }

        function mC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [["class", "notMet"]], null, null, null, null, null)), (e()(), lo(1, null, [" ", " "]))], null, function (e, n) {
                var t = n.parent.parent.context.$implicit.getSize();
                e(n, 1, 0, t)
            })
        }

        function yC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 7, "span", [], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 6, "div", [["class", "icon"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, vC)), kl(3, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, mC)), kl(5, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(6, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(7, 114688, null, 0, af, [], {
                name: [0, "name"]
            }, null)], function (e, n) {
                var t = n.component,
                    r = t.hasLand(n.parent.context.$implicit.getSize());
                e(n, 3, 0, r);
                var i = !t.hasLand(n.parent.context.$implicit.getSize());
                e(n, 5, 0, i), e(n, 7, 0, "land")
            }, null)
        }

        function SC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(1, null, [" ", " "]))], null, function (e, n) {
                var t = n.parent.parent.context.$implicit.getSize();
                e(n, 1, 0, t)
            })
        }

        function EC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [["class", "notMet"]], null, null, null, null, null)), (e()(), lo(1, null, [" ", " "]))], null, function (e, n) {
                var t = n.parent.parent.context.$implicit.getSize();
                e(n, 1, 0, t)
            })
        }

        function bC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 7, "span", [["class", "icon"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 6, "div", [["class", "icon"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, SC)), kl(3, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, EC)), kl(5, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(6, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(7, 114688, null, 0, af, [], {
                name: [0, "name"]
            }, null)], function (e, n) {
                var t = n.component,
                    r = t.hasMountains(n.parent.context.$implicit.getSize());
                e(n, 3, 0, r);
                var i = !t.hasMountains(n.parent.context.$implicit.getSize());
                e(n, 5, 0, i), e(n, 7, 0, "mountains")
            }, null)
        }

        function OC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(1, null, [" ", " "]))], null, function (e, n) {
                e(n, 1, 0, n.parent.context.$implicit.value)
            })
        }

        function RC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [["class", "notMet"]], null, null, null, null, null)), (e()(), lo(1, null, [" ", " "]))], null, function (e, n) {
                e(n, 1, 0, n.parent.context.$implicit.value)
            })
        }

        function TC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 7, "div", [], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 6, "div", [["class", "icon"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, OC)), kl(3, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, RC)), kl(5, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(6, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(7, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 3, 0, t.hasResource(n.context.$implicit)), e(n, 5, 0, !t.hasResource(n.context.$implicit)), e(n, 7, 0, t.getResourceName(n.context.$implicit.key), "resources")
            }, null)
        }

        function CC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "buildButton"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.build(e.parent.context.$implicit) && r), r
            }, null, null)), (e()(), lo(-1, null, ["Build"]))], null, null)
        }

        function _C(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "buildButtonNotAvailable"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.build(e.parent.context.$implicit) && r), r
            }, null, null)), (e()(), lo(-1, null, ["Build"]))], null, null)
        }

        function IC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 18, "div", [["class", "building"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 13, "div", [["class", "buildingSecondRow"]], null, null, null, null, null)), (e()(), Yi(2, 0, null, null, 1, "span", [["class", "buildingTitle"]], null, null, null, null, null)), (e()(), lo(3, null, ["", ""])), (e()(), Yi(4, 0, null, null, 10, "div", [["class", "details"]], null, null, null, null, null)), (e()(), Yi(5, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(6, null, ["", ""])), (e()(), Yi(7, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, yC)), kl(9, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, bC)), kl(11, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 2, null, TC)), kl(13, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), Ml(0, Ks, [Vr]), (e()(), ji(16777216, null, null, 1, null, CC)), kl(16, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, _C)), kl(18, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, n) {
                var t = n.component,
                    r = !n.context.$implicit.buildOnMountain();
                e(n, 9, 0, r);
                var i = n.context.$implicit.buildOnMountain();
                e(n, 11, 0, i), e(n, 13, 0, hi(n, 13, 0, El(n, 14).transform(t.getBuildingCostEntries(n.context.$implicit)))), e(n, 16, 0, t.isCostMet(n.context.$implicit)), e(n, 18, 0, !t.isCostMet(n.context.$implicit))
            }, function (e, n) {
                var t = n.context.$implicit.getName();
                e(n, 3, 0, t);
                var r = n.context.$implicit.getDescription();
                e(n, 6, 0, r)
            })
        }

        function AC(e) {
            return so(0, [Ml(0, zs, []), (e()(), Yi(1, 0, null, null, 13, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), Yi(2, 0, null, null, 2, "div", [["id", "title"]], null, null, null, null, null)), (e()(), lo(3, null, [" ", " buildings "])), to(4, 1), (e()(), lo(-1, null, [" Search: "])), (e()(), Yi(6, 0, null, null, 5, "input", [["type", "text"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"]], function (e, n, t) {
                var r = !0,
                    i = e.component;
                return "input" === n && (r = !1 !== El(e, 7)._handleInput(t.target.value) && r), "blur" === n && (r = !1 !== El(e, 7).onTouched() && r), "compositionstart" === n && (r = !1 !== El(e, 7)._compositionStart() && r), "compositionend" === n && (r = !1 !== El(e, 7)._compositionEnd(t.target.value) && r), "ngModelChange" === n && (r = !1 !== (i.filterText = t) && r), r
            }, null, null)), kl(7, 16384, null, 0, Tf, [xn, Pn, [2, Rf]], null, null), Ll(1024, null, bf, function (e) {
                return [e]
            }, [Tf]), kl(9, 671744, null, 0, cg, [[8, null], [8, null], [8, null], [6, bf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, wf, null, [cg]), kl(11, 16384, null, 0, $f, [[4, wf]], null, null), (e()(), Yi(12, 0, null, null, 2, "div", [["id", "buildings"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, IC)), kl(14, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 9, 0, t.filterText), e(n, 14, 0, t.getBuildingForRegion(t.region))
            }, function (e, n) {
                var t = n.component,
                    r = hi(n, 3, 0, e(n, 4, 0, El(n, 0), t.regionString));
                e(n, 3, 0, r), e(n, 6, 0, El(n, 11).ngClassUntouched, El(n, 11).ngClassTouched, El(n, 11).ngClassPristine, El(n, 11).ngClassDirty, El(n, 11).ngClassValid, El(n, 11).ngClassInvalid, El(n, 11).ngClassPending)
            })
        }
        var wC = function () {
                function e(e) {
                    var n = this;
                    this.modalService = e, this.clearFilterSubject = new L, this.modalService.registerForRegion().subscribe(function (e) {
                        n.region = e, n.clearFilterSubject.next()
                    }), this.modalService.registerForOnOpen().subscribe(function (e) {
                        e === mu.BUILD && (n.bodyRef.nativeElement.scrollTop = 0)
                    })
                }
                return e.prototype.ngOnInit = function () {}, e
            }(),
            NC = gi({
                encapsulation: 0,
                styles: [[""]],
                data: {}
            });

        function PC(e) {
            return so(0, [Ql(402653184, 1, {
                bodyRef: 0
            }), (e()(), Yi(1, 0, null, null, 6, "app-modal", [["id", "build-modal"]], null, [["document", "keydown.escape"]], function (e, n, t) {
                var r = !0;
                return "document:keydown.escape" === n && (r = !1 !== El(e, 2).onKeydownHandler(t) && r), r
            }, dC, hC)), kl(2, 4440064, null, 0, pC, [xn, Pn, Rg], {
                id: [0, "id"]
            }, null), (e()(), Yi(3, 0, null, 0, 3, "div", [["class", "modal"]], null, null, null, null, null)), (e()(), Yi(4, 0, [[1, 0], ["body", 1]], null, 2, "div", [["class", "modal-body"]], null, null, null, null, null)), (e()(), Yi(5, 0, null, null, 1, "app-construction", [], null, null, null, AC, gC)), kl(6, 638976, null, 0, fC, [eS, vg, Rg, Og, Ng, nS, rS, nR, BR, ER, oT, YT, PT, Cg], {
                region: [0, "region"],
                clearFilterObservable: [1, "clearFilterObservable"]
            }, null), (e()(), Yi(7, 0, null, 0, 0, "div", [["class", "modal-background"]], null, null, null, null, null))], function (e, n) {
                var t = n.component;
                e(n, 2, 0, "build-modal"), e(n, 6, 0, t.region, t.clearFilterSubject.asObservable())
            }, null)
        }
        var DC = function () {
                function e(e, n, t, r, i, l, o, u, s, a, c, p, h, d, f, g, v, m) {
                    var y = this;
                    this.logService = e, this.villageService = n, this.fortService = t, this.fieldService = r, this.mountainsService = i, this.plateauService = l, this.seaService = o, this.forestService = u, this.calendarService = s, this.landService = a, this.techService = c, this.weatherService = p, this.resourcesService = h, this.gameService = d, this.effectsService = f, this.armyService = g, this.happinessService = v, this.servicesService = m, this.tickerState = 0, this.lastTick = 0, this.ticking = !1, this.resolution = ju, m.addService(Nu.TICKER, this), this.tickSubject = new L, this.interval = setInterval(function () {
                        return y.tick()
                    }, this.resolution)
                }
                return e.prototype.tick = function () {
                    if (!this.ticking) {
                        this.ticking = !0;
                        var e = Math.floor(Date.now() / this.resolution);
                        this.tickerState >= 0 && (this.lastTick = e, this.calendarService.tick(e), this.effectsService.tick(e), this.weatherService.tick(e), this.happinessService.tick(e), this.landService.tick(e), this.resourcesService.tick(e), this.gameService.tick(e), this.villageService.tick(e), this.fortService.tick(e), this.fieldService.tick(e), this.mountainsService.tick(e), this.plateauService.tick(e), this.seaService.tick(e), this.forestService.tick(e), this.armyService.tick(e)), this.ticking = !1
                    }
                }, e.prototype.stop = function () {
                    return this.tickerState -= 1, this.lastTick
                }, e.prototype.start = function () {
                    this.tickerState += 1, this.tickerState > 0 && (this.tickerState = 0)
                }, e.prototype.forceStart = function () {
                    this.tickerState = 0
                }, e.prototype.clearTicker = function () {
                    clearInterval(this.interval)
                }, e.prototype.initTicker = function () {
                    var e = this;
                    this.interval = setInterval(function () {
                        return e.tick()
                    }, this.resolution)
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(Og), ze(rS), ze(nR), ze(BR), ze(oT), ze(PT), ze(YT), ze(ER), ze(bg), ze(nS), ze(gS), ze(zE), ze(Ng), ze(Cg), ze(Yg), ze(ZS), ze(wg), ze(vg))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            kC = function () {
                function e(e, n, t, r, i, l, o, u, s, a, c, p, h, d, f, g, v, m, y, S, E, b, O, R, T, C, _, I, A, w) {
                    var N = this;
                    this.router = e, this.tickerService = n, this.gameService = t, this.modalService = r, this.optionsService = i, this.logService = l, this.villageService = o, this.forestService = u, this.resourcesService = s, this.landService = a, this.mountainsService = c, this.calendarService = p, this.royalService = h, this.techService = d, this.religionService = f, this.craftingService = g, this.recipeService = v, this.fieldService = m, this.plateauService = y, this.seaService = S, this.fortService = E, this.effectsService = b, this.armyService = O, this.happinessService = R, this.managementService = T, this.marketService = C, this.weatherService = _, this.idService = I, this.tutorialService = A, this.saveName = Gu.saveName, this.saveVersion = Gu.saveVersion, w.addService(Nu.SERIALIZER, this), this.autoSaveStatus = this.optionsService.getOption(mg.AUTO_SAVE_STATUS), this.autoSavePeriod = this.optionsService.getOption(mg.AUTO_SAVE_PERIOD), this.optionsSubscription || (this.optionsSubscription = this.optionsService.registerForOptionsChange().subscribe(function () {
                        return N.changeOptions()
                    })), this.saveInterval = setInterval(function () {
                        N.initSave(), N.logService.log("Auto saved")
                    }, this.autoSavePeriod)
                }
                return e.prototype.changeOptions = function () {
                    var e = this,
                        n = this.optionsService.getOption(mg.AUTO_SAVE_STATUS),
                        t = this.optionsService.getOption(mg.AUTO_SAVE_PERIOD);
                    this.autoSaveStatus === n && this.autoSavePeriod === t || (this.autoSaveStatus = n, this.autoSavePeriod = t, clearInterval(this.saveInterval), this.autoSaveStatus && (this.saveInterval = setInterval(function () {
                        e.initSave(), e.logService.log("Auto saved")
                    }, 1e3 * this.autoSavePeriod * 60)))
                }, e.prototype.initSave = function () {
                    this.tickerService.stop(), localStorage.setItem(this.saveName, this.prepareBase64()), this.tickerService.start()
                }, e.prototype.prepareBase64 = function () {
                    this.tickerService.stop();
                    var e = btoa(JSON.stringify({
                        saveVersion: this.saveVersion,
                        id: this.idService,
                        tutorial: this.tutorialService.save(),
                        resources: this.resourcesService.save(),
                        village: this.villageService.save(),
                        fort: this.fortService.save(),
                        forest: this.forestService.save(),
                        field: this.fieldService.save(),
                        mountains: this.mountainsService.save(),
                        plateau: this.plateauService.save(),
                        sea: this.seaService.save(),
                        land: this.landService.save(),
                        calendar: this.calendarService.save(),
                        game: this.gameService.save(),
                        options: this.optionsService.save(),
                        royal: this.royalService.save(),
                        tech: this.techService.save(),
                        religion: this.religionService.save(),
                        crafting: this.craftingService.save(),
                        recipe: this.recipeService.save(),
                        effects: this.effectsService.save(),
                        army: this.armyService.save(),
                        happiness: this.happinessService.save(),
                        management: this.managementService.save(),
                        market: this.marketService.save(),
                        weather: this.weatherService.save(),
                        logs: this.logService.save()
                    }));
                    return this.tickerService.start(), e
                }, e.prototype.initLoad = function () {
                    if (this.tickerService.stop(), null === localStorage.getItem(this.saveName)) return this.modalService.info("There is no any save file to load."), void this.tickerService.start();
                    var e;
                    try {
                        e = JSON.parse(atob(localStorage.getItem(this.saveName)))
                    } catch (n) {
                        return this.modalService.info("Save data is corrupted! Loading failed."), void this.tickerService.start()
                    }
                    this.loadSave(e), this.tickerService.start(), this.logService.log("loaded")
                }, e.prototype.hasSave = function () {
                    return null != localStorage.getItem(this.saveName)
                }, e.prototype.import = function (e) {
                    var n;
                    this.tickerService.stop();
                    try {
                        n = JSON.parse(atob(e))
                    } catch (t) {
                        return this.modalService.info("Import file is not valid or corrupted! Import failed."), void this.tickerService.start()
                    }
                    this.loadSave(n), localStorage.setItem(this.saveName, e), this.tickerService.start(), this.logService.log("save imported")
                }, e.prototype.hardReset = function () {
                    this.reset(!0), localStorage.removeItem(this.saveName)
                }, e.prototype.softReset = function () {
                    this.reset(!1)
                }, e.prototype.ascensionReset = function () {
                    this.reset(!1, !0)
                }, e.prototype.reset = function (e, n) {
                    void 0 === n && (n = !1), this.tickerService.stop(), this.tickerService.clearTicker(), localStorage.removeItem(this.saveName), this.tutorialService.reset(e, n), this.gameService.reset(e, n), this.idService.reset(e, n), this.calendarService.reset(e, n), this.weatherService.reset(e, n), this.effectsService.reset(e, n), this.resourcesService.reset(e, n), this.landService.reset(e, n), this.villageService.reset(e, n), this.fortService.reset(e, n), this.forestService.reset(e, n), this.fieldService.reset(e, n), this.mountainsService.reset(e, n), this.plateauService.reset(e, n), this.seaService.reset(e, n), this.optionsService.reset(e, n), this.techService.reset(e, n), this.religionService.reset(e, n), this.craftingService.reset(e, n), this.recipeService.reset(e, n), this.armyService.reset(e, n), this.happinessService.reset(e, n), this.managementService.reset(e, n), this.marketService.reset(e, n), this.logService.reset(e, n), this.royalService.reset(e, n), this.initSave(), this.tickerService.initTicker(), this.tickerService.start(), this.router.navigate(["/village"])
                }, e.prototype.loadSave = function (e) {
                    switch (e.saveVersion) {
                        case Fu.DEV:
                        case Fu.V1_0_0:
                            this.loadDevVersion(e);
                            break;
                        default:
                            var n = "Corrupted save file (unknown save version). Loading is not possible";
                            return this.logService.log(n), void console.error(n)
                    }
                }, e.prototype.loadDevVersion = function (e) {
                    this.saveVersion = e.saveVersion, this.idService.load(e.id), this.effectsService.load(e.effects), this.resourcesService.load(e.resources), this.villageService.load(e.village), this.fortService.load(e.fort), this.forestService.load(e.forest), this.fieldService.load(e.field), this.mountainsService.load(e.mountains), this.plateauService.load(e.plateau), this.seaService.load(e.sea), this.landService.load(e.land), this.calendarService.load(e.calendar), this.optionsService.load(e.options), this.gameService.load(e.game), this.royalService.load(e.royal), this.techService.load(e.tech), this.religionService.load(e.religion), this.craftingService.load(e.crafting), this.recipeService.load(e.recipe), this.armyService.load(e.army), this.happinessService.load(e.happiness), this.managementService.load(e.management), this.marketService.load(e.market), this.weatherService.load(e.weather), this.logService.load(e.logs), this.tutorialService.load(void 0 !== e.tutorial ? e.tutorial : {})
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(Cd), ze(DC), ze(Cg), ze(Rg), ze(yg), ze(Og), ze(rS), ze(ER), ze(Ng), ze(nS), ze(oT), ze(bg), ze(Ig), ze(gS), ze(TE), ze(Uv), ze(pv), ze(BR), ze(PT), ze(YT), ze(nR), ze(Yg), ze(ZS), ze(wg), ze(jg), ze(wm), ze(zE), ze(Jy), ze(Tg), ze(vg))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            MC = function () {
                function e(e, n) {
                    var t = this;
                    this.serializerService = e, this.modalService = n, this.exportTextArea = null, this.showMessage = !1, this.modalService.registerForOnOpen().subscribe(function (e) {
                        e === mu.EXPORT && t.export()
                    })
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.export = function () {
                    this.exportTextArea = this.serializerService.prepareBase64()
                }, e.prototype.copy = function () {
                    var e = this,
                        n = this.exportTextArea,
                        t = document.createElement("textarea");
                    t.id = "txt", t.style.position = "fixed", t.style.top = "0", t.style.left = "0", t.style.opacity = "0", t.value = n, document.body.appendChild(t), t.select();
                    try {
                        if (document.execCommand("copy")) return this.showMessage = !0, setTimeout(function () {
                            return e.showMessage = !1
                        }, 1500), !0
                    } catch (r) {
                        console.error(Jf.ERROR_1)
                    } finally {
                        document.body.removeChild(t)
                    }
                    return !1
                }, e
            }(),
            LC = gi({
                encapsulation: 0,
                styles: [["#export-area[_ngcontent-%COMP%]{width:100%;resize:none}.modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}#buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;width:100%}#title[_ngcontent-%COMP%]{font-weight:800;margin-bottom:10px}"]],
                data: {}
            });

        function xC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [], null, null, null, null, null)), (e()(), lo(-1, null, ["copied..."]))], null, null)
        }

        function FC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 0, "br", [], null, null, null, null, null))], null, null)
        }

        function UC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 17, "app-modal", [["id", "export-modal"]], null, [["document", "keydown.escape"]], function (e, n, t) {
                var r = !0;
                return "document:keydown.escape" === n && (r = !1 !== El(e, 1).onKeydownHandler(t) && r), r
            }, dC, hC)), kl(1, 4440064, null, 0, pC, [xn, Pn, Rg], {
                id: [0, "id"]
            }, null), (e()(), Yi(2, 0, null, 0, 14, "div", [["class", "modal"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 13, "div", [["class", "modal-body"]], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 1, "span", [["id", "title"]], null, null, null, null, null)), (e()(), lo(-1, null, ["Export save"])), (e()(), Yi(6, 0, null, null, 1, "textarea", [["id", "export-area"], ["placeholder", "Your save will be generated here..."], ["readonly", ""], ["rows", "20"]], null, null, null, null, null)), (e()(), lo(7, null, ["", ""])), (e()(), Yi(8, 0, null, null, 4, "div", [["id", "buttons"]], null, null, null, null, null)), (e()(), Yi(9, 0, null, null, 1, "button", [["id", "import-button"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.export() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Update"])), (e()(), Yi(11, 0, null, null, 1, "button", [["id", "copy-button"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.copy() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Copy to clipboard"])), (e()(), ji(16777216, null, null, 1, null, xC)), kl(14, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, FC)), kl(16, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(17, 0, null, 0, 0, "div", [["class", "modal-background"]], null, null, null, null, null))], function (e, n) {
                var t = n.component;
                e(n, 1, 0, "export-modal"), e(n, 14, 0, t.showMessage), e(n, 16, 0, !t.showMessage)
            }, function (e, n) {
                e(n, 7, 0, n.component.exportTextArea)
            })
        }
        var HC = function () {
                function e(e, n) {
                    this.serializerService = e, this.modalService = n
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.import = function () {
                    this.serializerService.import(this.importTextArea), this.importTextArea = "", this.modalService.close(mu.IMPORT)
                }, e
            }(),
            GC = gi({
                encapsulation: 0,
                styles: [["#import-area[_ngcontent-%COMP%]{width:100%;resize:none}.modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}#title[_ngcontent-%COMP%]{font-weight:800;margin-bottom:10px}"]],
                data: {}
            });

        function BC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 14, "app-modal", [["id", "import-modal"]], null, [["document", "keydown.escape"]], function (e, n, t) {
                var r = !0;
                return "document:keydown.escape" === n && (r = !1 !== El(e, 1).onKeydownHandler(t) && r), r
            }, dC, hC)), kl(1, 4440064, null, 0, pC, [xn, Pn, Rg], {
                id: [0, "id"]
            }, null), (e()(), Yi(2, 0, null, 0, 11, "div", [["class", "modal"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 10, "div", [["class", "modal-body"]], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 1, "span", [["id", "title"]], null, null, null, null, null)), (e()(), lo(-1, null, ["Import save"])), (e()(), Yi(6, 0, null, null, 5, "textarea", [["id", "import-area"], ["placeholder", "Paste your save here..."], ["rows", "20"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"]], function (e, n, t) {
                var r = !0,
                    i = e.component;
                return "input" === n && (r = !1 !== El(e, 7)._handleInput(t.target.value) && r), "blur" === n && (r = !1 !== El(e, 7).onTouched() && r), "compositionstart" === n && (r = !1 !== El(e, 7)._compositionStart() && r), "compositionend" === n && (r = !1 !== El(e, 7)._compositionEnd(t.target.value) && r), "ngModelChange" === n && (r = !1 !== (i.importTextArea = t) && r), r
            }, null, null)), kl(7, 16384, null, 0, Tf, [xn, Pn, [2, Rf]], null, null), Ll(1024, null, bf, function (e) {
                return [e]
            }, [Tf]), kl(9, 671744, null, 0, cg, [[8, null], [8, null], [8, null], [6, bf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, wf, null, [cg]), kl(11, 16384, null, 0, $f, [[4, wf]], null, null), (e()(), Yi(12, 0, null, null, 1, "button", [["id", "import-button"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.import() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Import"])), (e()(), Yi(14, 0, null, 0, 0, "div", [["class", "modal-background"]], null, null, null, null, null))], function (e, n) {
                var t = n.component;
                e(n, 1, 0, "import-modal"), e(n, 9, 0, t.importTextArea)
            }, function (e, n) {
                e(n, 6, 0, El(n, 11).ngClassUntouched, El(n, 11).ngClassTouched, El(n, 11).ngClassPristine, El(n, 11).ngClassDirty, El(n, 11).ngClassValid, El(n, 11).ngClassInvalid, El(n, 11).ngClassPending)
            })
        }
        var VC = function () {
                function e(e, n) {
                    this.modalService = e, this.serializerService = n
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.hardReset = function () {
                    this.serializerService.hardReset(), this.modalService.close(mu.HARD_RESET)
                }, e.prototype.cancel = function () {
                    this.modalService.close(mu.HARD_RESET)
                }, e
            }(),
            WC = gi({
                encapsulation: 0,
                styles: [[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:1.2em}#buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;width:100%}button[_ngcontent-%COMP%]{border:2px solid #000;color:#000;padding:1% 2%;text-align:center;text-decoration:none;display:inline-block;font-size:1em;margin:.5%}#hardReset[_ngcontent-%COMP%]{background-color:#5f0000;color:#fff}"]],
                data: {}
            });

        function jC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 19, "app-modal", [["id", "hard-reset-modal"]], null, [["document", "keydown.escape"]], function (e, n, t) {
                var r = !0;
                return "document:keydown.escape" === n && (r = !1 !== El(e, 1).onKeydownHandler(t) && r), r
            }, dC, hC)), kl(1, 4440064, null, 0, pC, [xn, Pn, Rg], {
                id: [0, "id"]
            }, null), (e()(), Yi(2, 0, null, 0, 16, "div", [["class", "modal"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 15, "div", [["class", "modal-body"]], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 1, "h2", [], null, null, null, null, null)), (e()(), lo(-1, null, ["Hard Reset"])), (e()(), Yi(6, 0, null, null, 7, "div", [], null, null, null, null, null)), (e()(), lo(-1, null, [" Are you sure you want to hard reset your progress? "])), (e()(), Yi(8, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), lo(-1, null, [" This will remove ALL progress and saved game (except settings and tutorial state). "])), (e()(), Yi(10, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), lo(-1, null, [" You will still be able to load game from exported save. "])), (e()(), Yi(12, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), lo(-1, null, [" This should only be done if you have backup save or want to start from the beginning. "])), (e()(), Yi(14, 0, null, null, 4, "div", [["id", "buttons"]], null, null, null, null, null)), (e()(), Yi(15, 0, null, null, 1, "button", [["id", "hardReset"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.hardReset() && r), r
            }, null, null)), (e()(), lo(-1, null, ["HARD RESET"])), (e()(), Yi(17, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.cancel() && r), r
            }, null, null)), (e()(), lo(-1, null, ["CANCEL"])), (e()(), Yi(19, 0, null, 0, 0, "div", [["class", "modal-background"]], null, null, null, null, null))], function (e, n) {
                e(n, 1, 0, "hard-reset-modal")
            }, null)
        }
        var YC = function () {
                function e(e, n) {
                    this.optionsService = e, this.modalService = n
                }
                return e.prototype.ngOnInit = function () {
                    var e = this;
                    this.optionsSubscription || (this.optionsSubscription = this.optionsService.registerForOptionsChange().subscribe(function () {
                        return e.initOptions()
                    })), this.initOptions()
                }, e.prototype.initOptions = function () {
                    this.autoSaveStatus = this.optionsService.getOption(mg.AUTO_SAVE_STATUS), this.autoSavePeriod = this.optionsService.getOption(mg.AUTO_SAVE_PERIOD), this.metricStatus = this.optionsService.getOption(mg.METRIC), this.saveLogs = this.optionsService.getOption(mg.SAVE_LOGS), this.sound = this.optionsService.getOption(mg.SOUND), this.soundVolume = this.optionsService.getOption(mg.SOUND_VOLUME), this.visualProgressBars = this.optionsService.getOption(mg.VISUAL_PROGRESS_BARS)
                }, e.prototype.close = function () {
                    this.modalService.close(mu.OPTIONS)
                }, e.prototype.updateOptions = function () {
                    this.optionsService.setOptions([{
                        option: mg.AUTO_SAVE_STATUS,
                        value: this.autoSaveStatus
                    }, {
                        option: mg.AUTO_SAVE_PERIOD,
                        value: this.autoSavePeriod
                    }, {
                        option: mg.METRIC,
                        value: this.metricStatus
                    }, {
                        option: mg.SAVE_LOGS,
                        value: this.saveLogs
                    }, {
                        option: mg.SOUND,
                        value: this.sound
                    }, {
                        option: mg.SOUND_VOLUME,
                        value: this.soundVolume
                    }, {
                        option: mg.VISUAL_PROGRESS_BARS,
                        value: this.visualProgressBars
                    }])
                }, e.prototype.updateSaveOption = function () {
                    this.autoSavePeriod = Number(this.autoSavePeriod), this.autoSavePeriod % 1 != 0 && (this.autoSavePeriod = Math.floor(this.autoSavePeriod)), this.autoSavePeriod <= 0 && (this.autoSaveStatus = !1, this.autoSavePeriod = 1), this.updateOptions()
                }, e.prototype.getSoundVolume = function () {
                    return this.optionsService.getOption(mg.SOUND_VOLUME)
                }, e.prototype.changeSoundVolume = function (e) {
                    this.soundVolume = e.target.value, this.updateOptions()
                }, e
            }(),
            zC = gi({
                encapsulation: 0,
                styles: [[".modal-body[_ngcontent-%COMP%]{text-align:center;font-size:1.2em}#title[_ngcontent-%COMP%]{text-align:center;font-weight:800;display:inline-block}.options[_ngcontent-%COMP%]{text-align:left}#autoSavePeriod[_ngcontent-%COMP%]{width:4ch;text-align:right}.slidecontainer[_ngcontent-%COMP%]{display:inline-block;width:150px}.slider[_ngcontent-%COMP%]{-webkit-appearance:none;width:100%;height:10px;border-radius:5px;background:var(--passive-colour);outline:0;opacity:.7;transition:opacity .2s}.slider[_ngcontent-%COMP%]:hover{opacity:1}.slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:15px;height:15px;border-radius:50%;background:var(--active-colour);cursor:pointer}.slider[_ngcontent-%COMP%]::-moz-range-thumb{width:15px;height:15px;border-radius:50%;background:var(--active-colour);cursor:pointer}#soundVolumeLabel[_ngcontent-%COMP%]{display:inline-block;width:180px}"]],
                data: {}
            });

        function KC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 72, "app-modal", [["id", "options-modal"]], null, [["document", "keydown.escape"]], function (e, n, t) {
                var r = !0;
                return "document:keydown.escape" === n && (r = !1 !== El(e, 1).onKeydownHandler(t) && r), r
            }, dC, hC)), kl(1, 4440064, null, 0, pC, [xn, Pn, Rg], {
                id: [0, "id"]
            }, null), (e()(), Yi(2, 0, null, 0, 69, "div", [["class", "modal"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 68, "div", [["class", "modal-body"]], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 1, "span", [["id", "title"]], null, null, null, null, null)), (e()(), lo(-1, null, ["Options"])), (e()(), Yi(6, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(7, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(8, 0, null, null, 59, "div", [["class", "options"]], null, null, null, null, null)), (e()(), Yi(9, 0, null, null, 1, "label", [["for", "autoSaveStatus"]], null, null, null, null, null)), (e()(), lo(-1, null, ["auto save on/off "])), (e()(), Yi(11, 0, null, null, 5, "input", [["id", "autoSaveStatus"], ["type", "checkbox"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "change"], [null, "ngModelChange"], [null, "blur"]], function (e, n, t) {
                var r = !0,
                    i = e.component;
                return "change" === n && (r = !1 !== El(e, 12).onChange(t.target.checked) && r), "blur" === n && (r = !1 !== El(e, 12).onTouched() && r), "change" === n && (r = !1 !== i.updateOptions() && r), "ngModelChange" === n && (r = !1 !== (i.autoSaveStatus = t) && r), r
            }, null, null)), kl(12, 16384, null, 0, Of, [xn, Pn], null, null), Ll(1024, null, bf, function (e) {
                return [e]
            }, [Of]), kl(14, 671744, null, 0, cg, [[8, null], [8, null], [8, null], [6, bf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, wf, null, [cg]), kl(16, 16384, null, 0, $f, [[4, wf]], null, null), (e()(), Yi(17, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(18, 0, null, null, 1, "label", [["for", "autoSavePeriod"]], null, null, null, null, null)), (e()(), lo(-1, null, ["auto save period "])), (e()(), Yi(20, 0, null, null, 5, "input", [["id", "autoSavePeriod"], ["type", "text"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "change"], [null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"]], function (e, n, t) {
                var r = !0,
                    i = e.component;
                return "input" === n && (r = !1 !== El(e, 21)._handleInput(t.target.value) && r), "blur" === n && (r = !1 !== El(e, 21).onTouched() && r), "compositionstart" === n && (r = !1 !== El(e, 21)._compositionStart() && r), "compositionend" === n && (r = !1 !== El(e, 21)._compositionEnd(t.target.value) && r), "change" === n && (r = !1 !== i.updateSaveOption() && r), "ngModelChange" === n && (r = !1 !== (i.autoSavePeriod = t) && r), r
            }, null, null)), kl(21, 16384, null, 0, Tf, [xn, Pn, [2, Rf]], null, null), Ll(1024, null, bf, function (e) {
                return [e]
            }, [Tf]), kl(23, 671744, null, 0, cg, [[8, null], [8, null], [8, null], [6, bf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, wf, null, [cg]), kl(25, 16384, null, 0, $f, [[4, wf]], null, null), (e()(), lo(-1, null, [" minutes "])), (e()(), Yi(27, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(28, 0, null, null, 1, "label", [["for", "metricStatus"]], null, null, null, null, null)), (e()(), lo(-1, null, ["use metric units"])), (e()(), Yi(30, 0, null, null, 5, "input", [["id", "metricStatus"], ["type", "checkbox"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "change"], [null, "ngModelChange"], [null, "blur"]], function (e, n, t) {
                var r = !0,
                    i = e.component;
                return "change" === n && (r = !1 !== El(e, 31).onChange(t.target.checked) && r), "blur" === n && (r = !1 !== El(e, 31).onTouched() && r), "change" === n && (r = !1 !== i.updateOptions() && r), "ngModelChange" === n && (r = !1 !== (i.metricStatus = t) && r), r
            }, null, null)), kl(31, 16384, null, 0, Of, [xn, Pn], null, null), Ll(1024, null, bf, function (e) {
                return [e]
            }, [Of]), kl(33, 671744, null, 0, cg, [[8, null], [8, null], [8, null], [6, bf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, wf, null, [cg]), kl(35, 16384, null, 0, $f, [[4, wf]], null, null), (e()(), Yi(36, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(37, 0, null, null, 1, "label", [["for", "visualProgressBars"]], null, null, null, null, null)), (e()(), lo(-1, null, ["Display moving progress bars (on) or just text (off)"])), (e()(), Yi(39, 0, null, null, 5, "input", [["id", "visualProgressBars"], ["type", "checkbox"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "change"], [null, "ngModelChange"], [null, "blur"]], function (e, n, t) {
                var r = !0,
                    i = e.component;
                return "change" === n && (r = !1 !== El(e, 40).onChange(t.target.checked) && r), "blur" === n && (r = !1 !== El(e, 40).onTouched() && r), "change" === n && (r = !1 !== i.updateOptions() && r), "ngModelChange" === n && (r = !1 !== (i.visualProgressBars = t) && r), r
            }, null, null)), kl(40, 16384, null, 0, Of, [xn, Pn], null, null), Ll(1024, null, bf, function (e) {
                return [e]
            }, [Of]), kl(42, 671744, null, 0, cg, [[8, null], [8, null], [8, null], [6, bf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, wf, null, [cg]), kl(44, 16384, null, 0, $f, [[4, wf]], null, null), (e()(), Yi(45, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(46, 0, null, null, 1, "label", [["for", "saveLogsStatus"]], null, null, null, null, null)), (e()(), lo(-1, null, ["save logs"])), (e()(), Yi(48, 0, null, null, 5, "input", [["id", "saveLogsStatus"], ["type", "checkbox"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "change"], [null, "ngModelChange"], [null, "blur"]], function (e, n, t) {
                var r = !0,
                    i = e.component;
                return "change" === n && (r = !1 !== El(e, 49).onChange(t.target.checked) && r), "blur" === n && (r = !1 !== El(e, 49).onTouched() && r), "change" === n && (r = !1 !== i.updateOptions() && r), "ngModelChange" === n && (r = !1 !== (i.saveLogs = t) && r), r
            }, null, null)), kl(49, 16384, null, 0, Of, [xn, Pn], null, null), Ll(1024, null, bf, function (e) {
                return [e]
            }, [Of]), kl(51, 671744, null, 0, cg, [[8, null], [8, null], [8, null], [6, bf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, wf, null, [cg]), kl(53, 16384, null, 0, $f, [[4, wf]], null, null), (e()(), Yi(54, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(55, 0, null, null, 1, "label", [["for", "sound"]], null, null, null, null, null)), (e()(), lo(-1, null, ["sound on/off"])), (e()(), Yi(57, 0, null, null, 5, "input", [["id", "sound"], ["type", "checkbox"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "change"], [null, "ngModelChange"], [null, "blur"]], function (e, n, t) {
                var r = !0,
                    i = e.component;
                return "change" === n && (r = !1 !== El(e, 58).onChange(t.target.checked) && r), "blur" === n && (r = !1 !== El(e, 58).onTouched() && r), "change" === n && (r = !1 !== i.updateOptions() && r), "ngModelChange" === n && (r = !1 !== (i.sound = t) && r), r
            }, null, null)), kl(58, 16384, null, 0, Of, [xn, Pn], null, null), Ll(1024, null, bf, function (e) {
                return [e]
            }, [Of]), kl(60, 671744, null, 0, cg, [[8, null], [8, null], [8, null], [6, bf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, wf, null, [cg]), kl(62, 16384, null, 0, $f, [[4, wf]], null, null), (e()(), Yi(63, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(64, 0, null, null, 1, "label", [["for", "soundVolume"], ["id", "soundVolumeLabel"]], null, null, null, null, null)), (e()(), lo(65, null, ["sound volume ", "% "])), (e()(), Yi(66, 0, null, null, 1, "div", [["class", "slidecontainer"]], null, null, null, null, null)), (e()(), Yi(67, 0, null, null, 0, "input", [["class", "slider"], ["id", "soundVolume"], ["max", "100"], ["min", "0"], ["type", "range"], ["value", "100"]], [[8, "value", 0]], [[null, "change"]], function (e, n, t) {
                var r = !0;
                return "change" === n && (r = !1 !== e.component.changeSoundVolume(t) && r), r
            }, null, null)), (e()(), Yi(68, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(69, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(70, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.close() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Close"])), (e()(), Yi(72, 0, null, 0, 0, "div", [["class", "modal-background"]], null, null, null, null, null))], function (e, n) {
                var t = n.component;
                e(n, 1, 0, "options-modal"), e(n, 14, 0, t.autoSaveStatus), e(n, 23, 0, t.autoSavePeriod), e(n, 33, 0, t.metricStatus), e(n, 42, 0, t.visualProgressBars), e(n, 51, 0, t.saveLogs), e(n, 60, 0, t.sound)
            }, function (e, n) {
                var t = n.component;
                e(n, 11, 0, El(n, 16).ngClassUntouched, El(n, 16).ngClassTouched, El(n, 16).ngClassPristine, El(n, 16).ngClassDirty, El(n, 16).ngClassValid, El(n, 16).ngClassInvalid, El(n, 16).ngClassPending), e(n, 20, 0, El(n, 25).ngClassUntouched, El(n, 25).ngClassTouched, El(n, 25).ngClassPristine, El(n, 25).ngClassDirty, El(n, 25).ngClassValid, El(n, 25).ngClassInvalid, El(n, 25).ngClassPending), e(n, 30, 0, El(n, 35).ngClassUntouched, El(n, 35).ngClassTouched, El(n, 35).ngClassPristine, El(n, 35).ngClassDirty, El(n, 35).ngClassValid, El(n, 35).ngClassInvalid, El(n, 35).ngClassPending), e(n, 39, 0, El(n, 44).ngClassUntouched, El(n, 44).ngClassTouched, El(n, 44).ngClassPristine, El(n, 44).ngClassDirty, El(n, 44).ngClassValid, El(n, 44).ngClassInvalid, El(n, 44).ngClassPending), e(n, 48, 0, El(n, 53).ngClassUntouched, El(n, 53).ngClassTouched, El(n, 53).ngClassPristine, El(n, 53).ngClassDirty, El(n, 53).ngClassValid, El(n, 53).ngClassInvalid, El(n, 53).ngClassPending), e(n, 57, 0, El(n, 62).ngClassUntouched, El(n, 62).ngClassTouched, El(n, 62).ngClassPristine, El(n, 62).ngClassDirty, El(n, 62).ngClassValid, El(n, 62).ngClassInvalid, El(n, 62).ngClassPending), e(n, 65, 0, t.getSoundVolume()), e(n, 67, 0, t.getSoundVolume())
            })
        }
        var qC = function () {
                function e(e) {
                    this.modalService = e, this.text = "", this.value = ""
                }
                return e.prototype.ngOnInit = function () {
                    var e = this;
                    this.modalService.registerForText().subscribe(function (n) {
                        return e.text = n
                    }), this.modalService.registerForValue().subscribe(function (n) {
                        return e.value = n
                    })
                }, e.prototype.ok = function () {
                    this.modalService.sendValueInput(this.value), this.modalService.close(mu.INPUT)
                }, e.prototype.cancel = function () {
                    this.modalService.sendValueInput(null), this.modalService.close(mu.INPUT)
                }, e.prototype.onKeydownHandler = function (e) {
                    this.ok()
                }, e
            }(),
            $C = gi({
                encapsulation: 0,
                styles: [[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}#buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px;padding:5px}"]],
                data: {}
            });

        function QC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 18, "app-modal", [["id", "input-modal"]], null, [["document", "keydown.escape"]], function (e, n, t) {
                var r = !0;
                return "document:keydown.escape" === n && (r = !1 !== El(e, 1).onKeydownHandler(t) && r), r
            }, dC, hC)), kl(1, 4440064, null, 0, pC, [xn, Pn, Rg], {
                id: [0, "id"]
            }, null), (e()(), Yi(2, 0, null, 0, 15, "div", [["class", "modal"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 14, "div", [["class", "modal-body"]], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 0, "span", [["id", "text"]], [[8, "innerHTML", 1]], null, null, null, null)), (e()(), Yi(5, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(6, 0, null, null, 5, "input", [["id", "input"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"]], function (e, n, t) {
                var r = !0,
                    i = e.component;
                return "input" === n && (r = !1 !== El(e, 7)._handleInput(t.target.value) && r), "blur" === n && (r = !1 !== El(e, 7).onTouched() && r), "compositionstart" === n && (r = !1 !== El(e, 7)._compositionStart() && r), "compositionend" === n && (r = !1 !== El(e, 7)._compositionEnd(t.target.value) && r), "ngModelChange" === n && (r = !1 !== (i.value = t) && r), r
            }, null, null)), kl(7, 16384, null, 0, Tf, [xn, Pn, [2, Rf]], null, null), Ll(1024, null, bf, function (e) {
                return [e]
            }, [Tf]), kl(9, 671744, null, 0, cg, [[8, null], [8, null], [8, null], [6, bf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, wf, null, [cg]), kl(11, 16384, null, 0, $f, [[4, wf]], null, null), (e()(), Yi(12, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(13, 0, null, null, 4, "div", [["id", "buttons"]], null, null, null, null, null)), (e()(), Yi(14, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.ok() && r), r
            }, null, null)), (e()(), lo(-1, null, ["CONFIRM"])), (e()(), Yi(16, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.cancel() && r), r
            }, null, null)), (e()(), lo(-1, null, ["CANCEL"])), (e()(), Yi(18, 0, null, 0, 0, "div", [["class", "modal-background"]], null, null, null, null, null))], function (e, n) {
                var t = n.component;
                e(n, 1, 0, "input-modal"), e(n, 9, 0, t.value)
            }, function (e, n) {
                e(n, 4, 0, n.component.text), e(n, 6, 0, El(n, 11).ngClassUntouched, El(n, 11).ngClassTouched, El(n, 11).ngClassPristine, El(n, 11).ngClassDirty, El(n, 11).ngClassValid, El(n, 11).ngClassInvalid, El(n, 11).ngClassPending)
            })
        }
        var ZC = function () {
                function e(e, n, t) {
                    this.kongregateService = e, this.royalService = n, this.modalService = t
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.ok = function () {
                    this.modalService.close(mu.ROYAL)
                }, e.prototype.buy = function (e) {
                    Gu.production ? this.kongregateService.buyItem(e) : (this.royalService.increaseRoyalPoints(Number(e.replace("rp_pack", ""))), this.modalService.close(mu.ROYAL))
                }, e
            }(),
            XC = gi({
                encapsulation: 0,
                styles: [[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.kred[_ngcontent-%COMP%]{width:30px;height:30px;vertical-align:middle}.value[_ngcontent-%COMP%]{margin-top:5px}.entry[_ngcontent-%COMP%]{width:50%;text-align:center}#close[_ngcontent-%COMP%]{margin-top:15px}"]],
                data: {}
            });

        function JC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 33, "app-modal", [["id", "royal-modal"]], null, [["document", "keydown.escape"]], function (e, n, t) {
                var r = !0;
                return "document:keydown.escape" === n && (r = !1 !== El(e, 1).onKeydownHandler(t) && r), r
            }, dC, hC)), kl(1, 4440064, null, 0, pC, [xn, Pn, Rg], {
                id: [0, "id"]
            }, null), (e()(), Yi(2, 0, null, 0, 30, "div", [["class", "modal"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 29, "div", [["class", "modal-body"]], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["Choose how many Royal Points you would like to buy:"])), (e()(), Yi(6, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(7, 0, null, null, 5, "div", [["class", "entry"]], null, null, null, null, null)), (e()(), Yi(8, 0, null, null, 2, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.buy("rp_pack10") && r), r
            }, null, null)), (e()(), lo(-1, null, ["10 "])), (e()(), Yi(10, 0, null, null, 0, "img", [["alt", "Kreds"], ["class", "kred"], ["src", "assets/kred.png"]], null, null, null, null, null)), (e()(), Yi(11, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, [" 10 Royal points"])), (e()(), Yi(13, 0, null, null, 5, "div", [["class", "entry"]], null, null, null, null, null)), (e()(), Yi(14, 0, null, null, 2, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.buy("rp_pack20") && r), r
            }, null, null)), (e()(), lo(-1, null, ["20 "])), (e()(), Yi(16, 0, null, null, 0, "img", [["alt", "Kreds"], ["class", "kred"], ["src", "assets/kred.png"]], null, null, null, null, null)), (e()(), Yi(17, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, [" 20 Royal points"])), (e()(), Yi(19, 0, null, null, 5, "div", [["class", "entry"]], null, null, null, null, null)), (e()(), Yi(20, 0, null, null, 2, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.buy("rp_pack55") && r), r
            }, null, null)), (e()(), lo(-1, null, ["50 "])), (e()(), Yi(22, 0, null, null, 0, "img", [["alt", "Kreds"], ["class", "kred"], ["src", "assets/kred.png"]], null, null, null, null, null)), (e()(), Yi(23, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, [" 55 Royal points"])), (e()(), Yi(25, 0, null, null, 5, "div", [["class", "entry"]], null, null, null, null, null)), (e()(), Yi(26, 0, null, null, 2, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.buy("rp_pack125") && r), r
            }, null, null)), (e()(), lo(-1, null, ["100 "])), (e()(), Yi(28, 0, null, null, 0, "img", [["alt", "Kreds"], ["class", "kred"], ["src", "assets/kred.png"]], null, null, null, null, null)), (e()(), Yi(29, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, [" 125 Royal points"])), (e()(), Yi(31, 0, null, null, 1, "button", [["id", "close"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.ok() && r), r
            }, null, null)), (e()(), lo(-1, null, ["CLOSE"])), (e()(), Yi(33, 0, null, 0, 0, "div", [["class", "modal-background"]], null, null, null, null, null))], function (e, n) {
                e(n, 1, 0, "royal-modal")
            }, null)
        }
        var e_ = function () {
                function e(e, n, t) {
                    var r = this;
                    this.modalService = e, this.resourcesService = n, this.armyService = t, this.troops = [], this.modalService.registerForMission().subscribe(function (e) {
                        r.mission = e, r.troops = r.getTroops()
                    })
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.ok = function () {
                    this.modalService.close(mu.MISSION), this.modalService.sendMissionResponse(this.mission), this.mission = new QS(this.mission.mission, this.mission.time, this.mission.description, this.mission.requiredStrength, this.mission.requiredStrength, this.mission.cost, this.mission.finish, []), this.mission = null, this.troops = []
                }, e.prototype.cancel = function () {
                    this.modalService.sendMissionResponse(null), this.mission = null, this.troops = [], this.modalService.close(mu.MISSION)
                }, e.prototype.getMissionName = function () {
                    return Au.prepareMissionName(this.mission.mission)
                }, e.prototype.getCost = function () {
                    return this.mission.cost
                }, e.prototype.getResourceName = function (e) {
                    return Au.prepareResourceName(e)
                }, e.prototype.hasResource = function (e, n) {
                    return void 0 === n && (n = 1), 0 === this.resourcesService.hasResource(e.key, e.value * n, !0)
                }, e.prototype.getTroops = function () {
                    return this.armyService.getTroops().filter(function (e) {
                        return e[1] > 0
                    }).map(function (e) {
                        return [e[0], e[1]]
                    })
                }, e.prototype.getTroopName = function (e) {
                    return Au.prepareTroopName(e)
                }, e.prototype.evaluateValue = function (e, n) {
                    e.target.style.width = e.target.value.toString().length + 1 + "ch";
                    var t = this.mission.troops.find(function (e) {
                        return e[0].troop === n[0].troop
                    });
                    t && !isNaN(e.target.value) ? t[1] = Number(e.target.value) : this.mission.troops.push([n[0], Number(e.target.value)]), this.calculateMission()
                }, e.prototype.getTotalTroops = function () {
                    var e = 0;
                    return this.mission.troops.forEach(function (n) {
                        return e += n[1]
                    }), e
                }, e.prototype.calculateMission = function () {
                    var e = this;
                    this.mission.squadStrength = 0, this.mission.squadDefense = 0, this.mission.troops.forEach(function (n) {
                        e.mission.squadStrength += n[0].strength * n[1], e.mission.squadDefense += n[0].defense * n[1]
                    })
                }, e.prototype.onKeydownHandler = function (e) {
                    this.ok()
                }, e
            }(),
            n_ = gi({
                encapsulation: 0,
                styles: [[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:1.2em}#buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px;padding:5px}hr[_ngcontent-%COMP%]{border-color:#000;width:90%}.modal[_ngcontent-%COMP%]{width:700px}.missing[_ngcontent-%COMP%]{color:#8b0000}#troops[_ngcontent-%COMP%]{display:flex;flex-direction:row;text-align:center}.troop[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:4px}.troop[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:2ch}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]],
                data: {}
            });

        function t_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 4, "span", [], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 3, "div", [["class", "icon"]], null, null, null, null, null)), (e()(), Yi(2, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(3, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null), (e()(), lo(4, null, [": ", " / soldier "]))], function (e, n) {
                e(n, 3, 0, n.component.getResourceName(n.context.$implicit.key), "resources")
            }, function (e, n) {
                e(n, 4, 0, n.context.$implicit.value)
            })
        }

        function r_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 5, "div", [["class", "troop"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(2, null, ["", ""])), (e()(), Yi(3, 0, null, null, 2, "span", [], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 0, "input", [["type", "text"], ["value", "0"]], null, [[null, "keyup"]], function (e, n, t) {
                var r = !0;
                return "keyup" === n && (r = !1 !== e.component.evaluateValue(t, e.context.$implicit) && r), r
            }, null, null)), (e()(), lo(5, null, ["/", ""]))], null, function (e, n) {
                e(n, 2, 0, n.component.getTroopName(n.context.$implicit[0].troop)), e(n, 5, 0, n.context.$implicit[1])
            })
        }

        function i_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(1, null, ["", ""]))], null, function (e, n) {
                e(n, 1, 0, n.parent.context.$implicit.value * n.component.getTotalTroops())
            })
        }

        function l_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [["class", "missing"]], null, null, null, null, null)), (e()(), lo(1, null, ["", ""]))], null, function (e, n) {
                e(n, 1, 0, n.parent.context.$implicit.value * n.component.getTotalTroops())
            })
        }

        function o_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 8, "span", [], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 7, "div", [["class", "icon"]], null, null, null, null, null)), (e()(), Yi(2, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(3, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null), (e()(), lo(-1, null, [": "])), (e()(), ji(16777216, null, null, 1, null, i_)), kl(6, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, l_)), kl(8, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 3, 0, t.getResourceName(n.context.$implicit.key), "resources"), e(n, 6, 0, t.hasResource(n.context.$implicit, t.getTotalTroops())), e(n, 8, 0, !t.hasResource(n.context.$implicit, t.getTotalTroops()))
            }, null)
        }

        function u_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 29, "div", [["class", "modal-body"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "span", [["id", "title"]], null, null, null, null, null)), (e()(), lo(2, null, ["", ""])), (e()(), Yi(3, 0, null, null, 0, "hr", [], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 1, "span", [["id", "description"]], null, null, null, null, null)), (e()(), lo(5, null, ["", ""])), (e()(), Yi(6, 0, null, null, 0, "hr", [], null, null, null, null, null)), (e()(), Yi(7, 0, null, null, 1, "span", [["id", "time"]], null, null, null, null, null)), (e()(), lo(8, null, ["duration: ", " days"])), (e()(), Yi(9, 0, null, null, 3, "div", [["id", "cost"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 2, null, t_)), kl(11, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), Ml(0, Ks, [Vr]), (e()(), Yi(13, 0, null, null, 1, "span", [["id", "requiredStrength"]], null, null, null, null, null)), (e()(), lo(14, null, ["squad strength: ", ""])), (e()(), Yi(15, 0, null, null, 1, "span", [["id", "requiredDefense"]], null, null, null, null, null)), (e()(), lo(16, null, ["squad defense: ", ""])), (e()(), Yi(17, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(18, 0, null, null, 2, "div", [["id", "troops"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, r_)), kl(20, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), (e()(), Yi(21, 0, null, null, 3, "div", [["id", "totalCost"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 2, null, o_)), kl(23, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), Ml(0, Ks, [Vr]), (e()(), Yi(25, 0, null, null, 4, "div", [["id", "buttons"]], null, null, null, null, null)), (e()(), Yi(26, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.ok() && r), r
            }, null, null)), (e()(), lo(-1, null, ["START"])), (e()(), Yi(28, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.cancel() && r), r
            }, null, null)), (e()(), lo(-1, null, ["CANCEL"]))], function (e, n) {
                var t = n.component;
                e(n, 11, 0, hi(n, 11, 0, El(n, 12).transform(t.getCost()))), e(n, 20, 0, t.troops), e(n, 23, 0, hi(n, 23, 0, El(n, 24).transform(t.getCost())))
            }, function (e, n) {
                var t = n.component;
                e(n, 2, 0, t.getMissionName()), e(n, 5, 0, t.mission.description), e(n, 8, 0, t.mission.time), e(n, 14, 0, t.mission.squadStrength + " / " + t.mission.requiredStrength), e(n, 16, 0, t.mission.squadDefense + " / " + t.mission.requiredDefense)
            })
        }

        function s_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 5, "app-modal", [["id", "mission-modal"]], null, [["document", "keydown.escape"]], function (e, n, t) {
                var r = !0;
                return "document:keydown.escape" === n && (r = !1 !== El(e, 1).onKeydownHandler(t) && r), r
            }, dC, hC)), kl(1, 4440064, null, 0, pC, [xn, Pn, Rg], {
                id: [0, "id"]
            }, null), (e()(), Yi(2, 0, null, 0, 2, "div", [["class", "modal"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, u_)), kl(4, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(5, 0, null, 0, 0, "div", [["class", "modal-background"]], null, null, null, null, null))], function (e, n) {
                var t = n.component;
                e(n, 1, 0, "mission-modal"), e(n, 4, 0, t.mission)
            }, null)
        }
        var a_ = function () {
                function e(e, n) {
                    this.modalService = e, this.resourcesService = n
                }
                return e.prototype.ngOnInit = function () {
                    var e = this;
                    this.modalService.registerForValue().subscribe(function (n) {
                        n && void 0 !== n.id && (e.offer = n, e.value = e.offer.amount, e.inputRef && (e.inputRef.nativeElement.style.width = e.value.toString().length + 1 + "ch"))
                    })
                }, e.prototype.ok = function () {
                    this.checkValue(this.value), this.modalService.sendValueInput(Number(this.value)), this.modalService.close(mu.MARKET), this.offer = null
                }, e.prototype.cancel = function () {
                    this.modalService.sendValueInput(null), this.offer = null, this.modalService.close(mu.MARKET)
                }, e.prototype.onKeydownHandler = function (e) {
                    this.ok()
                }, e.prototype.getResourceName = function (e) {
                    return vu[e]
                }, e.prototype.calculatePrice = function () {
                    var e = this.value;
                    return this.offer.amount < e && (e = this.offer.amount), this.offer.buy ? Math.ceil(e / this.offer.amount * this.offer.price) : Math.floor(e / this.offer.amount * this.offer.price)
                }, e.prototype.checkValue = function (e) {
                    if (e && !isNaN(e)) {
                        if (this.offer.amount >= e) return !0;
                        this.inputRef.nativeElement.value = this.offer.amount, this.value = this.offer.amount
                    }
                    return !1
                }, e.prototype.getResourceAmount = function () {
                    return this.resourcesService.getResource(this.offer.resource).amount
                }, e.prototype.getResourceLimit = function () {
                    return this.resourcesService.getResource(this.offer.resource).limit
                }, e
            }(),
            c_ = gi({
                encapsulation: 0,
                styles: [[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:1.2em}#title[_ngcontent-%COMP%]{font-size:1.5em;margin-bottom:5px}#buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px;padding:5px}#input[_ngcontent-%COMP%]{display:inline-block;width:3ch;font-size:1em}app-icon[_ngcontent-%COMP%]{display:inline-block;margin:0 3px}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]],
                data: {}
            });

        function p_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["buy"]))], null, null)
        }

        function h_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["sell"]))], null, null)
        }

        function d_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["BUY"]))], null, null)
        }

        function f_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["SELL"]))], null, null)
        }

        function g_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 35, "div", [["class", "modal-body"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "span", [["id", "title"]], null, null, null, null, null)), (e()(), lo(-1, null, ["Market offer"])), (e()(), Yi(3, 0, null, null, 9, "span", [["class", "icon"], ["id", "text"]], null, null, null, null, null)), (e()(), lo(-1, null, ["How many "])), (e()(), Yi(5, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(6, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null), (e()(), lo(7, null, ["(", "/", ") would you like to "])), (e()(), ji(16777216, null, null, 1, null, p_)), kl(9, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, h_)), kl(11, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), lo(-1, null, ["?"])), (e()(), Yi(13, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(14, 0, null, null, 12, "span", [["class", "icon"]], null, null, null, null, null)), (e()(), Yi(15, 0, [[1, 0], ["input", 1]], null, 5, "input", [["id", "input"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"]], function (e, n, t) {
                var r = !0,
                    i = e.component;
                return "input" === n && (r = !1 !== El(e, 16)._handleInput(t.target.value) && r), "blur" === n && (r = !1 !== El(e, 16).onTouched() && r), "compositionstart" === n && (r = !1 !== El(e, 16)._compositionStart() && r), "compositionend" === n && (r = !1 !== El(e, 16)._compositionEnd(t.target.value) && r), "ngModelChange" === n && (r = !1 !== i.checkValue(t) && r), "ngModelChange" === n && (r = !1 !== (i.value = t) && r), r
            }, null, null)), kl(16, 16384, null, 0, Tf, [xn, Pn, [2, Rf]], null, null), Ll(1024, null, bf, function (e) {
                return [e]
            }, [Tf]), kl(18, 671744, null, 0, cg, [[8, null], [8, null], [8, null], [6, bf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, wf, null, [cg]), kl(20, 16384, null, 0, $f, [[4, wf]], null, null), (e()(), lo(21, null, ["/", " "])), (e()(), Yi(22, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(23, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null), (e()(), lo(24, null, [" for ", " "])), (e()(), Yi(25, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(26, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null), (e()(), Yi(27, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(28, 0, null, null, 7, "div", [["id", "buttons"]], null, null, null, null, null)), (e()(), Yi(29, 0, null, null, 4, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.ok() && r), r
            }, null, null)), (e()(), ji(16777216, null, null, 1, null, d_)), kl(31, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, f_)), kl(33, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(34, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.cancel() && r), r
            }, null, null)), (e()(), lo(-1, null, ["CANCEL"]))], function (e, n) {
                var t = n.component;
                e(n, 6, 0, t.getResourceName(t.offer.resource), "resources"), e(n, 9, 0, t.offer.buy), e(n, 11, 0, !t.offer.buy), e(n, 18, 0, t.value), e(n, 23, 0, t.getResourceName(t.offer.resource), "resources"), e(n, 26, 0, "coins", "resources"), e(n, 31, 0, t.offer.buy), e(n, 33, 0, !t.offer.buy)
            }, function (e, n) {
                var t = n.component;
                e(n, 7, 0, t.getResourceAmount(), t.getResourceLimit()), e(n, 15, 0, El(n, 20).ngClassUntouched, El(n, 20).ngClassTouched, El(n, 20).ngClassPristine, El(n, 20).ngClassDirty, El(n, 20).ngClassValid, El(n, 20).ngClassInvalid, El(n, 20).ngClassPending), e(n, 21, 0, t.offer.amount), e(n, 24, 0, t.calculatePrice())
            })
        }

        function v_(e) {
            return so(0, [Ql(671088640, 1, {
                inputRef: 0
            }), (e()(), Yi(1, 0, null, null, 5, "app-modal", [["id", "market-modal"]], null, [["document", "keydown.escape"]], function (e, n, t) {
                var r = !0;
                return "document:keydown.escape" === n && (r = !1 !== El(e, 2).onKeydownHandler(t) && r), r
            }, dC, hC)), kl(2, 4440064, null, 0, pC, [xn, Pn, Rg], {
                id: [0, "id"]
            }, null), (e()(), Yi(3, 0, null, 0, 2, "div", [["class", "modal"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, g_)), kl(5, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(6, 0, null, 0, 0, "div", [["class", "modal-background"]], null, null, null, null, null))], function (e, n) {
                var t = n.component;
                e(n, 2, 0, "market-modal"), e(n, 5, 0, t.offer)
            }, null)
        }
        var m_ = function () {
                function e(e, n) {
                    var t = this;
                    this.modalService = e, this.resourcesService = n, this.modalService.registerForBuilding().subscribe(function (e) {
                        t.building = e
                    })
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.ok = function () {
                    this.modalService.close(mu.WORK_MANAGEMENT)
                }, e.prototype.cancel = function () {
                    this.modalService.close(mu.WORK_MANAGEMENT)
                }, e.prototype.stop = function () {
                    this.building.isWorking() ? this.building.stopProduction() : this.building.startProduction() || this.modalService.info("Cannot unlock production of " + this.building.getName() + ". Number of free workers: " + this.resourcesService.getPeople())
                }, e.prototype.getBuildingName = function () {
                    return Au.prepareBuildingName(this.building.getBuildingType())
                }, e.prototype.getResourceName = function (e) {
                    return Au.prepareResourceName(e)
                }, e.prototype.getResource = function (e) {
                    return this.resourcesService.getResource(e)
                }, e.prototype.onKeydownHandler = function () {
                    this.ok()
                }, e
            }(),
            y_ = gi({
                encapsulation: 0,
                styles: [[".modal-body[_ngcontent-%COMP%]{text-align:center;font-size:1.2em}input[_ngcontent-%COMP%]:not([type]), input[type=text][_ngcontent-%COMP%]{width:5ch}#rules[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}#input[_ngcontent-%COMP%]{flex:0 0 50%;border-right:1px solid #000}#output[_ngcontent-%COMP%]{flex:0 0 50%}"]],
                data: {}
            });

        function S_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, null, null, null, null, null, null, null)), (e()(), lo(-1, null, [" working"]))], null, null)
        }

        function E_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, null, null, null, null, null, null, null)), (e()(), lo(-1, null, [" not working"]))], null, null)
        }

        function b_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, null, null, null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.stop() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Hire worker"]))], null, null)
        }

        function O_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, null, null, null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.stop() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Fire worker"]))], null, null)
        }

        function R_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 10, "div", [], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(2, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null), (e()(), lo(-1, null, [" > "])), (e()(), Yi(4, 0, null, null, 5, "input", [], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"]], function (e, n, t) {
                var r = !0;
                return "input" === n && (r = !1 !== El(e, 5)._handleInput(t.target.value) && r), "blur" === n && (r = !1 !== El(e, 5).onTouched() && r), "compositionstart" === n && (r = !1 !== El(e, 5)._compositionStart() && r), "compositionend" === n && (r = !1 !== El(e, 5)._compositionEnd(t.target.value) && r), "ngModelChange" === n && (r = !1 !== (e.context.$implicit[1] = t) && r), r
            }, null, null)), kl(5, 16384, null, 0, Tf, [xn, Pn, [2, Rf]], null, null), Ll(1024, null, bf, function (e) {
                return [e]
            }, [Tf]), kl(7, 671744, null, 0, cg, [[8, null], [8, null], [8, null], [6, bf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, wf, null, [cg]), kl(9, 16384, null, 0, $f, [[4, wf]], null, null), (e()(), lo(10, null, [" ( ", "/", " ) "]))], function (e, n) {
                e(n, 2, 0, n.component.getResourceName(n.context.$implicit[0]), "resources"), e(n, 7, 0, n.context.$implicit[1])
            }, function (e, n) {
                var t = n.component;
                e(n, 4, 0, El(n, 9).ngClassUntouched, El(n, 9).ngClassTouched, El(n, 9).ngClassPristine, El(n, 9).ngClassDirty, El(n, 9).ngClassValid, El(n, 9).ngClassInvalid, El(n, 9).ngClassPending), e(n, 10, 0, t.getResource(n.context.$implicit[0]).amount, t.getResource(n.context.$implicit[0]).limit)
            })
        }

        function T_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 10, "div", [], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(2, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null), (e()(), lo(-1, null, [" < "])), (e()(), Yi(4, 0, null, null, 5, "input", [], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"]], function (e, n, t) {
                var r = !0;
                return "input" === n && (r = !1 !== El(e, 5)._handleInput(t.target.value) && r), "blur" === n && (r = !1 !== El(e, 5).onTouched() && r), "compositionstart" === n && (r = !1 !== El(e, 5)._compositionStart() && r), "compositionend" === n && (r = !1 !== El(e, 5)._compositionEnd(t.target.value) && r), "ngModelChange" === n && (r = !1 !== (e.context.$implicit[1] = t) && r), r
            }, null, null)), kl(5, 16384, null, 0, Tf, [xn, Pn, [2, Rf]], null, null), Ll(1024, null, bf, function (e) {
                return [e]
            }, [Tf]), kl(7, 671744, null, 0, cg, [[8, null], [8, null], [8, null], [6, bf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, wf, null, [cg]), kl(9, 16384, null, 0, $f, [[4, wf]], null, null), (e()(), lo(10, null, [" ( ", "/", " ) "]))], function (e, n) {
                e(n, 2, 0, n.component.getResourceName(n.context.$implicit[0]), "resources"), e(n, 7, 0, n.context.$implicit[1])
            }, function (e, n) {
                var t = n.component;
                e(n, 4, 0, El(n, 9).ngClassUntouched, El(n, 9).ngClassTouched, El(n, 9).ngClassPristine, El(n, 9).ngClassDirty, El(n, 9).ngClassValid, El(n, 9).ngClassInvalid, El(n, 9).ngClassPending), e(n, 10, 0, t.getResource(n.context.$implicit[0]).amount, t.getResource(n.context.$implicit[0]).limit)
            })
        }

        function C_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 37, "div", [["class", "modal-body"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "span", [["id", "title"]], null, null, null, null, null)), (e()(), lo(2, null, ["", " work management"])), (e()(), Yi(3, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), lo(-1, null, [" status: "])), (e()(), ji(16777216, null, null, 1, null, S_)), kl(7, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, E_)), kl(9, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, b_)), kl(11, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, O_)), kl(13, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(14, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), lo(-1, null, [" work management on/off "])), (e()(), Yi(16, 0, null, null, 5, "input", [["type", "checkbox"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "change"], [null, "blur"]], function (e, n, t) {
                var r = !0,
                    i = e.component;
                return "change" === n && (r = !1 !== El(e, 17).onChange(t.target.checked) && r), "blur" === n && (r = !1 !== El(e, 17).onTouched() && r), "ngModelChange" === n && (r = !1 !== (i.building.getWorkSettings().enabled = t) && r), r
            }, null, null)), kl(17, 16384, null, 0, Of, [xn, Pn], null, null), Ll(1024, null, bf, function (e) {
                return [e]
            }, [Of]), kl(19, 671744, null, 0, cg, [[8, null], [8, null], [8, null], [6, bf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, wf, null, [cg]), kl(21, 16384, null, 0, $f, [[4, wf]], null, null), (e()(), Yi(22, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(23, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(24, 0, null, null, 9, "div", [["id", "rules"]], null, null, null, null, null)), (e()(), Yi(25, 0, null, null, 3, "div", [["id", "input"]], null, null, null, null, null)), (e()(), lo(-1, null, [" Input resources: "])), (e()(), ji(16777216, null, null, 1, null, R_)), kl(28, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), (e()(), Yi(29, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(30, 0, null, null, 3, "div", [["id", "output"]], null, null, null, null, null)), (e()(), lo(-1, null, [" Output resources: "])), (e()(), ji(16777216, null, null, 1, null, T_)), kl(33, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), (e()(), Yi(34, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(35, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(36, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.ok() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Close"]))], function (e, n) {
                var t = n.component;
                e(n, 7, 0, t.building.isWorking()), e(n, 9, 0, !t.building.isWorking()), e(n, 11, 0, !t.building.getWorkSettings().enabled && !t.building.isWorking()), e(n, 13, 0, !t.building.getWorkSettings().enabled && t.building.isWorking()), e(n, 19, 0, t.building.getWorkSettings().enabled), e(n, 28, 0, t.building.getWorkSettings().inputSettings), e(n, 33, 0, t.building.getWorkSettings().outputSettings)
            }, function (e, n) {
                e(n, 2, 0, n.component.getBuildingName()), e(n, 16, 0, El(n, 21).ngClassUntouched, El(n, 21).ngClassTouched, El(n, 21).ngClassPristine, El(n, 21).ngClassDirty, El(n, 21).ngClassValid, El(n, 21).ngClassInvalid, El(n, 21).ngClassPending)
            })
        }

        function __(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 5, "app-modal", [["id", "work-management-modal"]], null, [["document", "keydown.escape"]], function (e, n, t) {
                var r = !0;
                return "document:keydown.escape" === n && (r = !1 !== El(e, 1).onKeydownHandler(t) && r), r
            }, dC, hC)), kl(1, 4440064, null, 0, pC, [xn, Pn, Rg], {
                id: [0, "id"]
            }, null), (e()(), Yi(2, 0, null, 0, 2, "div", [["class", "modal"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, C_)), kl(4, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(5, 0, null, 0, 0, "div", [["class", "modal-background"]], null, null, null, null, null))], function (e, n) {
                var t = n.component;
                e(n, 1, 0, "work-management-modal"), e(n, 4, 0, t.building)
            }, null)
        }
        var I_ = function () {
                function e(e, n, t, r) {
                    var i = this;
                    this.modalService = e, this.tutorialService = n, this.tickerService = t, this.text = "", this.tutorialStages = [], this.currentStep = 1, this.modalService.registerForTutorial().subscribe(function (e) {
                        i.tutorialStages = e, i.currentStep = 1, r.destroyed || r.detectChanges()
                    })
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.ngAfterViewInit = function () {
                    this.tutorialService.enableTutorials()
                }, e.prototype.ok = function () {
                    this.currentStep += 1, this.modalService.openTutorialModal(this.tutorialStages[this.currentStep - 1].position)
                }, e.prototype.skip = function () {
                    var e = this;
                    this.modalService.open(mu.CONFIRM), this.modalService.setModalText("Are you sure you want to skip tutorial?<br>You can always start it again from the top right settings menu");
                    var n = this.modalService.registerForConfirmation().subscribe(function (t) {
                        n.unsubscribe(), t && (e.modalService.sendTutorialResponse(-1), e.tickerService.start(), e.modalService.close(mu.TUTORIAL))
                    })
                }, e.prototype.finish = function () {
                    this.modalService.sendTutorialResponse(1), this.tickerService.start(), this.modalService.close(mu.TUTORIAL)
                }, e
            }(),
            A_ = gi({
                encapsulation: 0,
                styles: [[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}"]],
                data: {}
            });

        function w_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.ok() && r), r
            }, null, null)), (e()(), lo(-1, null, ["NEXT"]))], null, null)
        }

        function N_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.finish() && r), r
            }, null, null)), (e()(), lo(-1, null, ["FINISH"]))], null, null)
        }

        function P_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.skip() && r), r
            }, null, null)), (e()(), lo(-1, null, ["SKIP TUTORIAL"]))], null, null)
        }

        function D_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 10, null, null, null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "span", [["id", "title"]], null, null, null, null, null)), (e()(), lo(2, null, ["Tutorial ", ""])), (e()(), Yi(3, 0, null, null, 0, "span", [["id", "text"]], [[8, "innerHTML", 1]], null, null, null, null)), (e()(), Yi(4, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, w_)), kl(6, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, N_)), kl(8, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, P_)), kl(10, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(0, null, null, 0))], function (e, n) {
                var t = n.component;
                e(n, 6, 0, t.currentStep < t.tutorialStages.length), e(n, 8, 0, t.currentStep === t.tutorialStages.length), e(n, 10, 0, t.currentStep !== t.tutorialStages.length)
            }, function (e, n) {
                var t = n.component;
                e(n, 2, 0, t.currentStep + "/" + t.tutorialStages.length), e(n, 3, 0, t.tutorialStages[t.currentStep - 1].text)
            })
        }

        function k_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 6, "app-modal", [["id", "tutorial-modal"]], null, [["document", "keydown.escape"]], function (e, n, t) {
                var r = !0;
                return "document:keydown.escape" === n && (r = !1 !== El(e, 1).onKeydownHandler(t) && r), r
            }, dC, hC)), kl(1, 4440064, null, 0, pC, [xn, Pn, Rg], {
                id: [0, "id"]
            }, null), (e()(), Yi(2, 0, null, 0, 3, "div", [["class", "modal"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 2, "div", [["class", "modal-body"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, D_)), kl(5, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(6, 0, null, 0, 0, "div", [["class", "modal-background"]], null, null, null, null, null))], function (e, n) {
                var t = n.component;
                e(n, 1, 0, "tutorial-modal"), e(n, 5, 0, t.tutorialStages.length > 0)
            }, null)
        }
        var M_ = function () {
                function e(e) {
                    var n = this;
                    this.modalService = e, this.messageNumber = Vu.length, this.modalService.registerForCloseModal().subscribe(function (e) {
                        return n.messageNumber = Vu.length
                    }), this.modalService.registerForOnOpen().subscribe(function (e) {
                        e === mu.CHANGELOG && (n.textRef.nativeElement.scrollTop = 0)
                    })
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.ok = function () {
                    this.modalService.close(mu.CHANGELOG)
                }, e.prototype.hasPrevious = function () {
                    return this.messageNumber > 1
                }, e.prototype.previous = function () {
                    this.messageNumber > 1 && (this.messageNumber -= 1)
                }, e.prototype.hasNext = function () {
                    return this.messageNumber < Vu.length
                }, e.prototype.next = function () {
                    this.messageNumber < Vu.length && (this.messageNumber += 1)
                }, e.prototype.onKeydownHandler = function (e) {
                    this.ok()
                }, e.prototype.getChange = function () {
                    return Vu[this.messageNumber - 1]
                }, e
            }(),
            L_ = gi({
                encapsulation: 0,
                styles: [[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}#buttons[_ngcontent-%COMP%]{width:50%;display:flex;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:0 0 33%}#header[_ngcontent-%COMP%]{font-size:1.5em;font-weight:700;margin-bottom:10px}#text[_ngcontent-%COMP%]{font-size:1.2em;overflow-y:auto}#text[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:0}button[disabled][_ngcontent-%COMP%]{color:#5a5a5a}button[disabled][_ngcontent-%COMP%]:active{background-color:var(--passive-colour);cursor:default}button[disabled][_ngcontent-%COMP%]:hover{cursor:default}"]],
                data: {}
            });

        function x_(e) {
            return so(0, [Ql(402653184, 1, {
                textRef: 0
            }), (e()(), Yi(1, 0, null, null, 14, "app-modal", [["id", "changelog-modal"]], null, [["document", "keydown.escape"]], function (e, n, t) {
                var r = !0;
                return "document:keydown.escape" === n && (r = !1 !== El(e, 2).onKeydownHandler(t) && r), r
            }, dC, hC)), kl(2, 4440064, null, 0, pC, [xn, Pn, Rg], {
                id: [0, "id"]
            }, null), (e()(), Yi(3, 0, null, 0, 11, "div", [["class", "modal"]], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 10, "div", [["class", "modal-body"]], null, null, null, null, null)), (e()(), Yi(5, 0, null, null, 0, "span", [["id", "header"]], [[8, "innerHTML", 1]], null, null, null, null)), (e()(), Yi(6, 0, [[1, 0], ["text", 1]], null, 0, "div", [["id", "text"]], [[8, "innerHTML", 1]], null, null, null, null)), (e()(), Yi(7, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(8, 0, null, null, 6, "div", [["id", "buttons"]], null, null, null, null, null)), (e()(), Yi(9, 0, null, null, 1, "button", [], [[8, "disabled", 0]], [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.previous() && r), r
            }, null, null)), (e()(), lo(-1, null, ["PREVIOUS"])), (e()(), Yi(11, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.ok() && r), r
            }, null, null)), (e()(), lo(-1, null, ["CLOSE"])), (e()(), Yi(13, 0, null, null, 1, "button", [], [[8, "disabled", 0]], [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.next() && r), r
            }, null, null)), (e()(), lo(-1, null, ["NEXT"])), (e()(), Yi(15, 0, null, 0, 0, "div", [["class", "modal-background"]], null, null, null, null, null))], function (e, n) {
                e(n, 2, 0, "changelog-modal")
            }, function (e, n) {
                var t = n.component;
                e(n, 5, 0, t.getChange().VERSION), e(n, 6, 0, t.getChange().MESSAGE), e(n, 9, 0, !t.hasPrevious()), e(n, 13, 0, !t.hasNext())
            })
        }
        var F_ = function () {
                function e(e) {
                    var n = this;
                    this.modalService = e, this.modalService.registerForText().subscribe(function (e) {
                        return n.text = e
                    })
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.ok = function () {
                    this.modalService.sendConfirmationResult(!0), this.modalService.close(mu.CONFIRM)
                }, e.prototype.cancel = function () {
                    this.modalService.sendConfirmationResult(!1), this.modalService.close(mu.CONFIRM)
                }, e.prototype.onKeydownHandler = function (e) {
                    this.ok()
                }, e
            }(),
            U_ = gi({
                encapsulation: 0,
                styles: [[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}#buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px;padding:5px}"]],
                data: {}
            });

        function H_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 11, "app-modal", [["id", "confirm-modal"]], null, [["document", "keydown.escape"]], function (e, n, t) {
                var r = !0;
                return "document:keydown.escape" === n && (r = !1 !== El(e, 1).onKeydownHandler(t) && r), r
            }, dC, hC)), kl(1, 4440064, null, 0, pC, [xn, Pn, Rg], {
                id: [0, "id"]
            }, null), (e()(), Yi(2, 0, null, 0, 8, "div", [["class", "modal"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 7, "div", [["class", "modal-body"]], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 0, "span", [["id", "text"]], [[8, "innerHTML", 1]], null, null, null, null)), (e()(), Yi(5, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(6, 0, null, null, 4, "div", [["id", "buttons"]], null, null, null, null, null)), (e()(), Yi(7, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.ok() && r), r
            }, null, null)), (e()(), lo(-1, null, ["YES"])), (e()(), Yi(9, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.cancel() && r), r
            }, null, null)), (e()(), lo(-1, null, ["NO"])), (e()(), Yi(11, 0, null, 0, 0, "div", [["class", "modal-background"]], null, null, null, null, null))], function (e, n) {
                e(n, 1, 0, "confirm-modal")
            }, function (e, n) {
                e(n, 4, 0, n.component.text)
            })
        }
        var G_ = function () {
                function e(e) {
                    var n = this;
                    this.modalService = e, this.text = "", this.modalService.registerForText().subscribe(function (e) {
                        return n.text = e
                    })
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.ok = function () {
                    this.modalService.close(mu.INFO)
                }, e.prototype.onKeydownHandler = function (e) {
                    this.ok()
                }, e
            }(),
            B_ = gi({
                encapsulation: 0,
                styles: [[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:1.2em}"]],
                data: {}
            });

        function V_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 8, "app-modal", [["id", "info-modal"]], null, [["document", "keydown.escape"]], function (e, n, t) {
                var r = !0;
                return "document:keydown.escape" === n && (r = !1 !== El(e, 1).onKeydownHandler(t) && r), r
            }, dC, hC)), kl(1, 4440064, null, 0, pC, [xn, Pn, Rg], {
                id: [0, "id"]
            }, null), (e()(), Yi(2, 0, null, 0, 5, "div", [["class", "modal"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 4, "div", [["class", "modal-body"]], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 0, "span", [["id", "text"]], [[8, "innerHTML", 1]], null, null, null, null)), (e()(), Yi(5, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(6, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.ok() && r), r
            }, null, null)), (e()(), lo(-1, null, ["OK"])), (e()(), Yi(8, 0, null, 0, 0, "div", [["class", "modal-background"]], null, null, null, null, null))], function (e, n) {
                e(n, 1, 0, "info-modal")
            }, function (e, n) {
                e(n, 4, 0, n.component.text)
            })
        }
        var W_ = function () {
                function e() {}
                return e.prototype.ngOnInit = function () {}, e
            }(),
            j_ = gi({
                encapsulation: 0,
                styles: [[""]],
                data: {}
            });

        function Y_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-build-modal", [], null, null, null, PC, NC)), kl(1, 114688, null, 0, wC, [Rg], null, null), (e()(), Yi(2, 0, null, null, 1, "app-export-modal", [], null, null, null, UC, LC)), kl(3, 114688, null, 0, MC, [kC, Rg], null, null), (e()(), Yi(4, 0, null, null, 1, "app-import-modal", [], null, null, null, BC, GC)), kl(5, 114688, null, 0, HC, [kC, Rg], null, null), (e()(), Yi(6, 0, null, null, 1, "app-hard-reset-modal", [], null, null, null, jC, WC)), kl(7, 114688, null, 0, VC, [Rg, kC], null, null), (e()(), Yi(8, 0, null, null, 1, "app-options-modal", [], null, null, null, KC, zC)), kl(9, 114688, null, 0, YC, [yg, Rg], null, null), (e()(), Yi(10, 0, null, null, 1, "app-input-modal", [], null, [["document", "keydown.enter"]], function (e, n, t) {
                var r = !0;
                return "document:keydown.enter" === n && (r = !1 !== El(e, 11).onKeydownHandler(t) && r), r
            }, QC, $C)), kl(11, 114688, null, 0, qC, [Rg], null, null), (e()(), Yi(12, 0, null, null, 1, "app-royal-modal", [], null, null, null, JC, XC)), kl(13, 114688, null, 0, ZC, [Ag, Ig, Rg], null, null), (e()(), Yi(14, 0, null, null, 1, "app-mission-modal", [], null, [["document", "keydown.enter"]], function (e, n, t) {
                var r = !0;
                return "document:keydown.enter" === n && (r = !1 !== El(e, 15).onKeydownHandler(t) && r), r
            }, s_, n_)), kl(15, 114688, null, 0, e_, [Rg, Ng, ZS], null, null), (e()(), Yi(16, 0, null, null, 1, "app-market-modal", [], null, [["document", "keydown.enter"]], function (e, n, t) {
                var r = !0;
                return "document:keydown.enter" === n && (r = !1 !== El(e, 17).onKeydownHandler(t) && r), r
            }, v_, c_)), kl(17, 114688, null, 0, a_, [Rg, Ng], null, null), (e()(), Yi(18, 0, null, null, 1, "app-work-management-modal", [], null, [["document", "keydown.enter"]], function (e, n, t) {
                var r = !0;
                return "document:keydown.enter" === n && (r = !1 !== El(e, 19).onKeydownHandler(t) && r), r
            }, __, y_)), kl(19, 114688, null, 0, m_, [Rg, Ng], null, null), (e()(), Yi(20, 0, null, null, 1, "app-tutorial-modal", [], null, null, null, k_, A_)), kl(21, 4308992, null, 0, I_, [Rg, Tg, DC, Rr], null, null), (e()(), Yi(22, 0, null, null, 1, "app-changelog-modal", [], null, [["document", "keydown.enter"]], function (e, n, t) {
                var r = !0;
                return "document:keydown.enter" === n && (r = !1 !== El(e, 23).onKeydownHandler(t) && r), r
            }, x_, L_)), kl(23, 114688, null, 0, M_, [Rg], null, null), (e()(), Yi(24, 0, null, null, 1, "app-confirm-modal", [], null, [["document", "keydown.enter"]], function (e, n, t) {
                var r = !0;
                return "document:keydown.enter" === n && (r = !1 !== El(e, 25).onKeydownHandler(t) && r), r
            }, H_, U_)), kl(25, 114688, null, 0, F_, [Rg], null, null), (e()(), Yi(26, 0, null, null, 1, "app-info-modal", [], null, [["document", "keydown.enter"]], function (e, n, t) {
                var r = !0;
                return "document:keydown.enter" === n && (r = !1 !== El(e, 27).onKeydownHandler(t) && r), r
            }, V_, B_)), kl(27, 114688, null, 0, G_, [Rg], null, null)], function (e, n) {
                e(n, 1, 0), e(n, 3, 0), e(n, 5, 0), e(n, 7, 0), e(n, 9, 0), e(n, 11, 0), e(n, 13, 0), e(n, 15, 0), e(n, 17, 0), e(n, 19, 0), e(n, 21, 0), e(n, 23, 0), e(n, 25, 0), e(n, 27, 0)
            }, null)
        }
        var z_ = function () {
                function e(e) {
                    this.calendarService = e
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.getDay = function () {
                    return this.calendarService.getDay()
                }, e.prototype.getYear = function () {
                    return this.calendarService.getYear()
                }, e.prototype.getSeason = function () {
                    return Eg[this.calendarService.getSeason()].toLowerCase()
                }, e
            }(),
            K_ = gi({
                encapsulation: 0,
                styles: [[""]],
                data: {}
            });

        function q_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), lo(1, null, [" day: ", " year: ", " ", "\n"]))], null, function (e, n) {
                var t = n.component;
                e(n, 1, 0, t.getDay(), t.getYear(), t.getSeason())
            })
        }
        var $_ = function () {
                function e(e, n, t, r, i, l, o, u, s) {
                    var a = this;
                    this.serializerService = e, this.logService = n, this.modalService = t, this.resourcesService = r, this.weatherService = i, this.optionsService = l, this.gameService = o, this.tickerService = u, this.tutorialService = s, this.paused = !1, this.metric = this.optionsService.getOption(mg.METRIC), this.optionsSubscription || (this.optionsSubscription = this.optionsService.registerForOptionsChange().subscribe(function () {
                        return a.metric = a.optionsService.getOption(mg.METRIC)
                    }))
                }
                return e.prototype.ngOnInit = function () {
                    var e = this;
                    this.resources = this.resourcesService.getResources(), this.resourcesService.registerForResourcesChange().subscribe(function (n) {
                        e.resources = n
                    })
                }, e.prototype.getResourcesValues = function () {
                    return Array.from(this.resources.values())
                }, e.prototype.save = function () {
                    this.serializerService.initSave(), this.logService.log("saved")
                }, e.prototype.load = function () {
                    this.serializerService.initLoad()
                }, e.prototype.import = function () {
                    this.modalService.open(mu.IMPORT)
                }, e.prototype.export = function () {
                    this.modalService.open(mu.EXPORT)
                }, e.prototype.hardReset = function () {
                    this.modalService.open(mu.HARD_RESET)
                }, e.prototype.options = function () {
                    this.modalService.open(mu.OPTIONS)
                }, e.prototype.getTemperature = function () {
                    return this.weatherService.getCurrentTemperature()
                }, e.prototype.getWeather = function () {
                    return this.weatherService.getCurrentWeather()
                }, e.prototype.getWeatherName = function () {
                    return xu[this.getWeather()].toLowerCase()
                }, e.prototype.calendarEnabled = function () {
                    return this.gameService.isEnabled(Eu.CALENDAR)
                }, e.prototype.softReset = function () {
                    var e = this;
                    this.modalService.open(mu.CONFIRM), this.modalService.setModalText("Are you sure you want to soft reset your progress? <br>You will start from the beginning and all progress except for</br>royal points,<br>permanent royal upgrades<br>and Wonders and their effects will be deleted.");
                    var n = this.modalService.registerForConfirmation().subscribe(function (t) {
                        t && e.serializerService.softReset(), n.unsubscribe()
                    })
                }, e.prototype.isNotCoins = function (e) {
                    return e.resource !== vu.COINS
                }, e.prototype.resetTutorials = function () {
                    this.tutorialService.resetTutorials()
                }, e.prototype.pause = function () {
                    this.tickerService.stop(), this.paused = !0
                }, e.prototype.resume = function () {
                    this.tickerService.forceStart(), this.paused = !1
                }, e
            }(),
            Q_ = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{font-size:1em;display:flex;height:100%;align-items:center}button[_ngcontent-%COMP%]{width:100%;margin:0;padding:0}#highlighted[_ngcontent-%COMP%], app-calendar[_ngcontent-%COMP%]{display:inline-block}#cog[_ngcontent-%COMP%]{float:right;margin-top:-2px;height:30px;width:30px}#cog[_ngcontent-%COMP%]:hover{cursor:pointer}.dropdown[_ngcontent-%COMP%]{position:absolute;right:4px;display:inline-block}.dropdown-content[_ngcontent-%COMP%]{cursor:pointer;display:none;position:absolute;list-style:none;background-color:#f9f9f9;min-width:150px;right:0;font-size:1.2em;margin-top:25px;padding:0;border:1px solid #000}.dropdown-content[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:pointer}.dropdown[_ngcontent-%COMP%]:hover   .dropdown-content[_ngcontent-%COMP%]{display:block}.dropdown-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background-color:var(--passive-colour);border:1px solid #000;padding:3px}.dropdown-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:var(--active-colour)}#temp[_ngcontent-%COMP%]{padding-top:2px;padding-left:5px}.full[_ngcontent-%COMP%]{font-weight:600}app-calendar[_ngcontent-%COMP%]{display:inline-block;font-size:1.1em}#right[_ngcontent-%COMP%]{position:absolute;display:flex;flex-direction:row;right:40px}app-icon[_ngcontent-%COMP%]{flex:0 0 auto;margin-right:3px}#weather[_ngcontent-%COMP%]{flex:0 0 auto}.icon[_ngcontent-%COMP%]{font-size:1.1em;display:flex;flex-direction:row;align-items:center}"]],
                data: {}
            });

        function Z_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, null, null, null, null, null, null, null)), (e()(), lo(1, null, ["", "/", ""]))], null, function (e, n) {
                var t = n.parent.parent.context.$implicit.getAmount(),
                    r = n.parent.parent.context.$implicit.getLimit();
                e(n, 1, 0, t, r)
            })
        }

        function X_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, null, null, null, null, null, null, null)), (e()(), lo(1, null, ["", "/", ""]))], null, function (e, n) {
                var t = n.parent.parent.context.$implicit.getAmount(),
                    r = n.parent.parent.context.$implicit.getLimit();
                e(n, 1, 0, t, r)
            })
        }

        function J_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, null, null, null, null, null, null, null)), (e()(), lo(1, null, ["", ""]))], null, function (e, n) {
                var t = n.parent.parent.context.$implicit.getAmount();
                e(n, 1, 0, t)
            })
        }

        function eI(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 9, "span", [["class", "icon"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(2, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Z_)), kl(4, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, X_)), kl(6, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, J_)), kl(8, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), lo(-1, null, [" \xa0 "]))], function (e, n) {
                var t = n.component,
                    r = n.parent.context.$implicit.getName();
                e(n, 2, 0, r, "resources");
                var i = n.parent.context.$implicit.getAmount() === n.parent.context.$implicit.getLimit();
                e(n, 4, 0, i);
                var l = t.isNotCoins(n.parent.context.$implicit) && n.parent.context.$implicit.getAmount() !== n.parent.context.$implicit.getLimit();
                e(n, 6, 0, l), e(n, 8, 0, !t.isNotCoins(n.parent.context.$implicit))
            }, null)
        }

        function nI(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "div", [["id", "highlighted"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, eI)), kl(2, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, n) {
                e(n, 2, 0, n.context.$implicit.visible && n.context.$implicit.highlighted)
            }, null)
        }

        function tI(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-calendar", [], null, null, null, q_, K_)), kl(1, 114688, null, 0, z_, [bg], null, null)], function (e, n) {
                e(n, 1, 0)
            }, null)
        }

        function rI(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, null, null, null, null, null, null, null)), (e()(), lo(-1, null, ["\xb0C"]))], null, null)
        }

        function iI(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, null, null, null, null, null, null, null)), (e()(), lo(-1, null, ["\xb0F"]))], null, null)
        }

        function lI(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 0, "img", [["alt", "settings"], ["draggable", "false"], ["id", "cog"], ["src", "assets/settings.svg"]], null, null, null, null, null))], null, null)
        }

        function oI(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 0, "img", [["alt", "settings"], ["draggable", "false"], ["id", "cog"], ["src", "assets/pause.svg"]], null, null, null, null, null))], null, null)
        }

        function uI(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "li", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.pause() && r), r
            }, null, null)), (e()(), lo(-1, null, ["pause game"]))], null, null)
        }

        function sI(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "li", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.resume() && r), r
            }, null, null)), (e()(), lo(-1, null, ["resume game"]))], null, null)
        }

        function aI(e) {
            return so(0, [Ml(0, $s, [Kr]), (e()(), Yi(1, 0, null, null, 43, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, nI)), kl(3, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), (e()(), lo(-1, null, [" \xa0 "])), (e()(), Yi(5, 0, null, null, 13, "div", [["id", "right"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, tI)), kl(7, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(8, 0, null, null, 10, "span", [["class", "icon"], ["id", "weather"]], null, null, null, null, null)), (e()(), lo(-1, null, [" \xa0 "])), (e()(), Yi(10, 0, null, null, 1, "app-icon", [], null, null, null, pf, cf)), kl(11, 114688, null, 0, af, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null), (e()(), Yi(12, 0, null, null, 6, null, null, null, null, null, null, null)), (e()(), lo(13, null, ["", " "])), to(14, 2), (e()(), ji(16777216, null, null, 1, null, rI)), kl(16, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, iI)), kl(18, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(19, 0, null, null, 25, "div", [["class", "dropdown"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, lI)), kl(21, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, oI)), kl(23, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(24, 0, null, null, 20, "ul", [["class", "dropdown-content"]], null, null, null, null, null)), (e()(), Yi(25, 0, null, null, 1, "li", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.options() && r), r
            }, null, null)), (e()(), lo(-1, null, ["options"])), (e()(), Yi(27, 0, null, null, 1, "li", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.save() && r), r
            }, null, null)), (e()(), lo(-1, null, ["save"])), (e()(), Yi(29, 0, null, null, 1, "li", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.load() && r), r
            }, null, null)), (e()(), lo(-1, null, ["load"])), (e()(), Yi(31, 0, null, null, 1, "li", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.import() && r), r
            }, null, null)), (e()(), lo(-1, null, ["import"])), (e()(), Yi(33, 0, null, null, 1, "li", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.export() && r), r
            }, null, null)), (e()(), lo(-1, null, ["export"])), (e()(), ji(16777216, null, null, 1, null, uI)), kl(36, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, sI)), kl(38, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(39, 0, null, null, 1, "li", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.resetTutorials() && r), r
            }, null, null)), (e()(), lo(-1, null, ["reset tutorials"])), (e()(), Yi(41, 0, null, null, 1, "li", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.softReset() && r), r
            }, null, null)), (e()(), lo(-1, null, ["soft reset"])), (e()(), Yi(43, 0, null, null, 1, "li", [], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.hardReset() && r), r
            }, null, null)), (e()(), lo(-1, null, ["hard reset"]))], function (e, n) {
                var t = n.component;
                e(n, 3, 0, t.getResourcesValues()), e(n, 7, 0, t.calendarEnabled()), e(n, 11, 0, t.getWeatherName(), "weather"), e(n, 16, 0, t.metric), e(n, 18, 0, !t.metric), e(n, 21, 0, !t.paused), e(n, 23, 0, t.paused), e(n, 36, 0, !t.paused), e(n, 38, 0, t.paused)
            }, function (e, n) {
                var t = n.component,
                    r = hi(n, 13, 0, e(n, 14, 0, El(n, 0), t.getTemperature(), "0.0-1"));
                e(n, 13, 0, r)
            })
        }
        var cI = function () {
                function e(e) {
                    this.gameService = e
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.isWeatherEnabled = function () {
                    return this.gameService.isEnabled(Eu.WEATHER)
                }, e.prototype.isMarketEnabled = function () {
                    return this.gameService.isEnabled(Eu.MARKET)
                }, e.prototype.isManagementEnabled = function () {
                    return this.gameService.isEnabled(Eu.MANAGEMENT)
                }, e.prototype.isResearchEnabled = function () {
                    return this.gameService.isEnabled(Eu.RESEARCH)
                }, e.prototype.isArmyEnabled = function () {
                    return this.gameService.isEnabled(Eu.ARMY)
                }, e.prototype.isReligionEnabled = function () {
                    return this.gameService.isEnabled(Eu.RELIGION)
                }, e.prototype.isCraftingEnabled = function () {
                    return this.gameService.isEnabled(Eu.CRAFTING)
                }, e
            }(),
            pI = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{display:flex;height:100%;flex-direction:column}.entry[_ngcontent-%COMP%]{padding:0;margin:0;display:flex;justify-content:center;flex-direction:column;height:5%;text-align:center;border-bottom:2px solid #000;cursor:pointer;text-decoration:none;color:#000;font-size:1em}.entry[_ngcontent-%COMP%]:first-of-type{cursor:default}.entry.active[_ngcontent-%COMP%]{background:var(--active-colour);text-decoration:none}.end[_ngcontent-%COMP%]{margin-top:auto;border-top:2px solid #000;border-bottom:none}"]],
                data: {}
            });

        function hI(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 5, "a", [["class", "entry"], ["draggable", "false"], ["routerLink", "/management"], ["routerLinkActive", "active"]], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== El(e, 1).onClick(t.button, t.ctrlKey, t.metaKey, t.shiftKey) && r), r
            }, null, null)), kl(1, 671744, [[6, 4]], 0, _d, [Cd, gh, fs], {
                routerLink: [0, "routerLink"]
            }, null), kl(2, 1720320, null, 2, Ad, [Cd, Pn, xn, Rr], {
                routerLinkActive: [0, "routerLinkActive"]
            }, null), Ql(603979776, 5, {
                links: 1
            }), Ql(603979776, 6, {
                linksWithHrefs: 1
            }), (e()(), lo(-1, null, ["Management"]))], function (e, n) {
                e(n, 1, 0, "/management"), e(n, 2, 0, "active")
            }, function (e, n) {
                e(n, 0, 0, El(n, 1).target, El(n, 1).href)
            })
        }

        function dI(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 5, "a", [["class", "entry"], ["draggable", "false"], ["routerLink", "/crafting"], ["routerLinkActive", "active"]], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== El(e, 1).onClick(t.button, t.ctrlKey, t.metaKey, t.shiftKey) && r), r
            }, null, null)), kl(1, 671744, [[8, 4]], 0, _d, [Cd, gh, fs], {
                routerLink: [0, "routerLink"]
            }, null), kl(2, 1720320, null, 2, Ad, [Cd, Pn, xn, Rr], {
                routerLinkActive: [0, "routerLinkActive"]
            }, null), Ql(603979776, 7, {
                links: 1
            }), Ql(603979776, 8, {
                linksWithHrefs: 1
            }), (e()(), lo(-1, null, ["Crafting"]))], function (e, n) {
                e(n, 1, 0, "/crafting"), e(n, 2, 0, "active")
            }, function (e, n) {
                e(n, 0, 0, El(n, 1).target, El(n, 1).href)
            })
        }

        function fI(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 5, "a", [["class", "entry"], ["draggable", "false"], ["routerLink", "/research"], ["routerLinkActive", "active"]], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== El(e, 1).onClick(t.button, t.ctrlKey, t.metaKey, t.shiftKey) && r), r
            }, null, null)), kl(1, 671744, [[10, 4]], 0, _d, [Cd, gh, fs], {
                routerLink: [0, "routerLink"]
            }, null), kl(2, 1720320, null, 2, Ad, [Cd, Pn, xn, Rr], {
                routerLinkActive: [0, "routerLinkActive"]
            }, null), Ql(603979776, 9, {
                links: 1
            }), Ql(603979776, 10, {
                linksWithHrefs: 1
            }), (e()(), lo(-1, null, ["Research"]))], function (e, n) {
                e(n, 1, 0, "/research"), e(n, 2, 0, "active")
            }, function (e, n) {
                e(n, 0, 0, El(n, 1).target, El(n, 1).href)
            })
        }

        function gI(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 5, "a", [["class", "entry"], ["draggable", "false"], ["routerLink", "/market"], ["routerLinkActive", "active"]], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== El(e, 1).onClick(t.button, t.ctrlKey, t.metaKey, t.shiftKey) && r), r
            }, null, null)), kl(1, 671744, [[12, 4]], 0, _d, [Cd, gh, fs], {
                routerLink: [0, "routerLink"]
            }, null), kl(2, 1720320, null, 2, Ad, [Cd, Pn, xn, Rr], {
                routerLinkActive: [0, "routerLinkActive"]
            }, null), Ql(603979776, 11, {
                links: 1
            }), Ql(603979776, 12, {
                linksWithHrefs: 1
            }), (e()(), lo(-1, null, ["Market"]))], function (e, n) {
                e(n, 1, 0, "/market"), e(n, 2, 0, "active")
            }, function (e, n) {
                e(n, 0, 0, El(n, 1).target, El(n, 1).href)
            })
        }

        function vI(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 5, "a", [["class", "entry"], ["draggable", "false"], ["routerLink", "/army"], ["routerLinkActive", "active"]], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== El(e, 1).onClick(t.button, t.ctrlKey, t.metaKey, t.shiftKey) && r), r
            }, null, null)), kl(1, 671744, [[14, 4]], 0, _d, [Cd, gh, fs], {
                routerLink: [0, "routerLink"]
            }, null), kl(2, 1720320, null, 2, Ad, [Cd, Pn, xn, Rr], {
                routerLinkActive: [0, "routerLinkActive"]
            }, null), Ql(603979776, 13, {
                links: 1
            }), Ql(603979776, 14, {
                linksWithHrefs: 1
            }), (e()(), lo(-1, null, ["Army"]))], function (e, n) {
                e(n, 1, 0, "/army"), e(n, 2, 0, "active")
            }, function (e, n) {
                e(n, 0, 0, El(n, 1).target, El(n, 1).href)
            })
        }

        function mI(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 5, "a", [["class", "entry"], ["draggable", "false"], ["routerLink", "/religion"], ["routerLinkActive", "active"]], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== El(e, 1).onClick(t.button, t.ctrlKey, t.metaKey, t.shiftKey) && r), r
            }, null, null)), kl(1, 671744, [[16, 4]], 0, _d, [Cd, gh, fs], {
                routerLink: [0, "routerLink"]
            }, null), kl(2, 1720320, null, 2, Ad, [Cd, Pn, xn, Rr], {
                routerLinkActive: [0, "routerLinkActive"]
            }, null), Ql(603979776, 15, {
                links: 1
            }), Ql(603979776, 16, {
                linksWithHrefs: 1
            }), (e()(), lo(-1, null, ["Religion"]))], function (e, n) {
                e(n, 1, 0, "/religion"), e(n, 2, 0, "active")
            }, function (e, n) {
                e(n, 0, 0, El(n, 1).target, El(n, 1).href)
            })
        }

        function yI(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 5, "a", [["class", "entry"], ["draggable", "false"], ["routerLink", "/weather"], ["routerLinkActive", "active"]], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== El(e, 1).onClick(t.button, t.ctrlKey, t.metaKey, t.shiftKey) && r), r
            }, null, null)), kl(1, 671744, [[18, 4]], 0, _d, [Cd, gh, fs], {
                routerLink: [0, "routerLink"]
            }, null), kl(2, 1720320, null, 2, Ad, [Cd, Pn, xn, Rr], {
                routerLinkActive: [0, "routerLinkActive"]
            }, null), Ql(603979776, 17, {
                links: 1
            }), Ql(603979776, 18, {
                linksWithHrefs: 1
            }), (e()(), lo(-1, null, ["Weather"]))], function (e, n) {
                e(n, 1, 0, "/weather"), e(n, 2, 0, "active")
            }, function (e, n) {
                e(n, 0, 0, El(n, 1).target, El(n, 1).href)
            })
        }

        function SI(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 33, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 0, "a", [["class", "entry"]], null, null, null, null, null)), (e()(), Yi(2, 0, null, null, 5, "a", [["class", "entry"], ["draggable", "false"], ["routerLink", "/regions"], ["routerLinkActive", "active"]], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== El(e, 3).onClick(t.button, t.ctrlKey, t.metaKey, t.shiftKey) && r), r
            }, null, null)), kl(3, 671744, [[2, 4]], 0, _d, [Cd, gh, fs], {
                routerLink: [0, "routerLink"]
            }, null), kl(4, 1720320, null, 2, Ad, [Cd, Pn, xn, Rr], {
                routerLinkActive: [0, "routerLinkActive"]
            }, null), Ql(603979776, 1, {
                links: 1
            }), Ql(603979776, 2, {
                linksWithHrefs: 1
            }), (e()(), lo(-1, null, ["Village"])), (e()(), Yi(8, 0, null, null, 5, "a", [["class", "entry"], ["draggable", "false"], ["routerLink", "/resources"], ["routerLinkActive", "active"]], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== El(e, 9).onClick(t.button, t.ctrlKey, t.metaKey, t.shiftKey) && r), r
            }, null, null)), kl(9, 671744, [[4, 4]], 0, _d, [Cd, gh, fs], {
                routerLink: [0, "routerLink"]
            }, null), kl(10, 1720320, null, 2, Ad, [Cd, Pn, xn, Rr], {
                routerLinkActive: [0, "routerLinkActive"]
            }, null), Ql(603979776, 3, {
                links: 1
            }), Ql(603979776, 4, {
                linksWithHrefs: 1
            }), (e()(), lo(-1, null, ["Resources"])), (e()(), ji(16777216, null, null, 1, null, hI)), kl(15, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, dI)), kl(17, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, fI)), kl(19, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, gI)), kl(21, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, vI)), kl(23, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, mI)), kl(25, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, yI)), kl(27, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(28, 0, null, null, 5, "a", [["class", "entry end"], ["draggable", "false"], ["routerLink", "/royal"], ["routerLinkActive", "active"]], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== El(e, 29).onClick(t.button, t.ctrlKey, t.metaKey, t.shiftKey) && r), r
            }, null, null)), kl(29, 671744, [[20, 4]], 0, _d, [Cd, gh, fs], {
                routerLink: [0, "routerLink"]
            }, null), kl(30, 1720320, null, 2, Ad, [Cd, Pn, xn, Rr], {
                routerLinkActive: [0, "routerLinkActive"]
            }, null), Ql(603979776, 19, {
                links: 1
            }), Ql(603979776, 20, {
                linksWithHrefs: 1
            }), (e()(), lo(-1, null, ["Royal perks"]))], function (e, n) {
                var t = n.component;
                e(n, 3, 0, "/regions"), e(n, 4, 0, "active"), e(n, 9, 0, "/resources"), e(n, 10, 0, "active"), e(n, 15, 0, t.isManagementEnabled()), e(n, 17, 0, t.isCraftingEnabled()), e(n, 19, 0, t.isResearchEnabled()), e(n, 21, 0, t.isMarketEnabled()), e(n, 23, 0, t.isArmyEnabled()), e(n, 25, 0, t.isReligionEnabled()), e(n, 27, 0, t.isWeatherEnabled()), e(n, 29, 0, "/royal"), e(n, 30, 0, "active")
            }, function (e, n) {
                e(n, 2, 0, El(n, 3).target, El(n, 3).href), e(n, 8, 0, El(n, 9).target, El(n, 9).href), e(n, 28, 0, El(n, 29).target, El(n, 29).href)
            })
        }
        var EI = function () {
                function e(e, n) {
                    this.logService = e, this.changeDetectorRef = n, this.entries = [], this.logEntryTypes = Sg
                }
                return e.prototype.ngOnInit = function () {
                    var e = this;
                    this.logService.registerForLogs().subscribe(function () {
                        e.entries = e.logService.getEntries(), e.scrollToBottom()
                    }), this.entries = this.logService.getEntries(), this.scrollToBottom()
                }, e.prototype.clearLogs = function () {
                    this.logService.clearEntries()
                }, e.prototype.scrollToBottom = function () {
                    var e = this.scrollRef.nativeElement,
                        n = e.scrollHeight - e.clientHeight <= e.scrollTop + 25;
                    this.changeDetectorRef.destroyed || this.changeDetectorRef.detectChanges(), n && (e.scrollTop = e.scrollHeight)
                }, e
            }(),
            bI = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;max-height:100%}#clear-button[_ngcontent-%COMP%]{float:right}#log[_ngcontent-%COMP%]{height:100%;overflow-y:scroll;font-size:.8em}.title[_ngcontent-%COMP%]{border-bottom:1px solid #000;text-align:center;font-weight:700;font-size:1.1em}#title-text[_ngcontent-%COMP%]{display:inline-block;margin-left:20px;margin-top:3px}ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}li[_ngcontent-%COMP%]{padding-left:.5%;padding-bottom:.4%}.date[_ngcontent-%COMP%]{font-weight:bolder}.warning[_ngcontent-%COMP%]{color:#8b0000}.success[_ngcontent-%COMP%]{color:#006400}"]],
                data: {}
            });

        function OI(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 3, "span", [], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "span", [["class", "date"]], null, null, null, null, null)), (e()(), lo(2, null, ["day ", ":"])), (e()(), Yi(3, 0, null, null, 0, "span", [], [[8, "innerHTML", 1]], null, null, null, null))], null, function (e, n) {
                e(n, 2, 0, n.parent.context.$implicit.day), e(n, 3, 0, " " + n.parent.context.$implicit.message)
            })
        }

        function RI(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 3, "span", [["class", "success"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "span", [["class", "date"]], null, null, null, null, null)), (e()(), lo(2, null, ["day ", ":"])), (e()(), Yi(3, 0, null, null, 0, "span", [], [[8, "innerHTML", 1]], null, null, null, null))], null, function (e, n) {
                e(n, 2, 0, n.parent.context.$implicit.day), e(n, 3, 0, " " + n.parent.context.$implicit.message)
            })
        }

        function TI(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 3, "span", [["class", "warning"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "span", [["class", "date"]], null, null, null, null, null)), (e()(), lo(2, null, ["day ", ":"])), (e()(), Yi(3, 0, null, null, 0, "span", [], [[8, "innerHTML", 1]], null, null, null, null))], null, function (e, n) {
                e(n, 2, 0, n.parent.context.$implicit.day), e(n, 3, 0, " " + n.parent.context.$implicit.message)
            })
        }

        function CI(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 8, "li", [], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 7, "div", [], null, null, null, null, null)), kl(2, 16384, null, 0, Bs, [], {
                ngSwitch: [0, "ngSwitch"]
            }, null), (e()(), ji(16777216, null, null, 1, null, OI)), kl(4, 278528, null, 0, Vs, [br, ht, Bs], {
                ngSwitchCase: [0, "ngSwitchCase"]
            }, null), (e()(), ji(16777216, null, null, 1, null, RI)), kl(6, 278528, null, 0, Vs, [br, ht, Bs], {
                ngSwitchCase: [0, "ngSwitchCase"]
            }, null), (e()(), ji(16777216, null, null, 1, null, TI)), kl(8, 278528, null, 0, Vs, [br, ht, Bs], {
                ngSwitchCase: [0, "ngSwitchCase"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 2, 0, n.context.$implicit.type), e(n, 4, 0, t.logEntryTypes.LOG), e(n, 6, 0, t.logEntryTypes.SUCCESS), e(n, 8, 0, t.logEntryTypes.WARNING)
            }, null)
        }

        function _I(e) {
            return so(0, [Ql(402653184, 1, {
                scrollRef: 0
            }), (e()(), Yi(1, 0, null, null, 9, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), Yi(2, 0, null, null, 4, "div", [["class", "title"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 1, "span", [["id", "title-text"]], null, null, null, null, null)), (e()(), lo(-1, null, ["Log"])), (e()(), Yi(5, 0, null, null, 1, "button", [["id", "clear-button"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.clearLogs() && r), r
            }, null, null)), (e()(), lo(-1, null, ["clear"])), (e()(), Yi(7, 0, [[1, 0], ["scroll", 1]], null, 3, "div", [["id", "log"]], null, null, null, null, null)), (e()(), Yi(8, 0, null, null, 2, "ul", [], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, CI)), kl(10, 278528, null, 0, Ls, [br, ht, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, n) {
                e(n, 10, 0, n.component.entries)
            }, null)
        }
        var II = function () {
                function e(e, n) {
                    this.gameService = e, this.optionsService = n, this.gameName = Gu.gameName, this.version = Gu.versionString
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.showDevNotes = function () {
                    this.gameService.showDevNotes()
                }, e.prototype.getSound = function () {
                    return this.optionsService.getOption(mg.SOUND)
                }, e.prototype.toggleSound = function () {
                    this.optionsService.setOption(mg.SOUND, !this.optionsService.getOption(mg.SOUND))
                }, e
            }(),
            AI = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:row;font-size:1.2em}.first[_ngcontent-%COMP%]{flex:0 0 3%;height:30px;cursor:pointer}#center[_ngcontent-%COMP%]{flex:0 0 94%;display:flex;justify-content:center;align-items:center}#dev[_ngcontent-%COMP%]{flex:0 0 3%;height:30px;cursor:pointer}img[_ngcontent-%COMP%]{width:30px}"]],
                data: {}
            });

        function wI(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, null, null, null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 0, "img", [["src", "assets/sound_on.svg"], ["title", "turn off"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleSound() && r), r
            }, null, null))], null, null)
        }

        function NI(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, null, null, null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 0, "img", [["src", "assets/sound_off.svg"], ["title", "turn on"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.toggleSound() && r), r
            }, null, null))], null, null)
        }

        function PI(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 8, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, wI)), kl(2, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, NI)), kl(4, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(5, 0, null, null, 2, "div", [["id", "center"]], null, null, null, null, null)), (e()(), Yi(6, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(7, null, ["", " v", ""])), (e()(), Yi(8, 0, null, null, 0, "img", [["id", "dev"], ["src", "assets/dev.svg"], ["title", "dev notes"]], null, [[null, "click"]], function (e, n, t) {
                var r = !0;
                return "click" === n && (r = !1 !== e.component.showDevNotes() && r), r
            }, null, null))], function (e, n) {
                var t = n.component;
                e(n, 2, 0, t.getSound()), e(n, 4, 0, !t.getSound())
            }, function (e, n) {
                var t = n.component;
                e(n, 7, 0, t.gameName, t.version)
            })
        }
        var DI = function () {
                function e(e, n, t, r, i, l, o, u, s, a, c, p, h, d) {
                    this.gameService = e, this.randomService = n, this.optionsService = t, this.tickerService = r, this.serializerService = i, this.resourceService = l, this.techService = o, this.logService = u, this.seaService = s, this.mountainsService = a, this.fortService = c, this.forestService = p, this.fieldService = h, this.villageService = d
                }
                return e.prototype.ngOnInit = function () {
                    this.serializerService.hasSave() ? this.serializerService.initLoad() : this.initGame(), this.tickerService.start()
                }, e.prototype.initGame = function () {
                    this.gameService.init(), this.optionsService.init(), this.resourceService.init(), this.villageService.init(), this.fortService.init(), this.forestService.init(), this.fieldService.init(), this.mountainsService.init(), this.seaService.init()
                }, e.prototype.exitSave = function (e) {
                    this.serializerService.initSave()
                }, e
            }(),
            kI = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{position:relative;display:grid;height:100%;max-height:100%;grid-template-columns:11% auto 20%;grid-template-rows:5% auto 4%;border:1px solid #000;background:var(--background-clour);background-image:url(old_parchment.e3e77af15bdb5cd39bab.jpg);background-size:100% 100%}#footer[_ngcontent-%COMP%], #header[_ngcontent-%COMP%]{grid-column-start:1;grid-column-end:4;border:1px solid #000;overflow:hidden}#left-menu[_ngcontent-%COMP%]{grid-column-start:1;grid-column-end:2;border:1px solid #000;overflow:hidden}#center[_ngcontent-%COMP%]{grid-column-start:2;grid-column-end:3;border:1px solid #000;overflow:hidden}#screen[_ngcontent-%COMP%]{height:100%}#right-menu[_ngcontent-%COMP%]{grid-column-start:3;grid-column-end:4;border:1px solid #000;overflow:hidden}.asset[_ngcontent-%COMP%]{display:none}"]],
                data: {}
            });

        function MI(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 119, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/buff.svg"]], null, null, null, null, null)), (e()(), Yi(2, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/complex_management_off_off.svg"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/complex_management_off_on.svg"]], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/complex_management_on_off.svg"]], null, null, null, null, null)), (e()(), Yi(5, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/complex_management_on_on.svg"]], null, null, null, null, null)), (e()(), Yi(6, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/details.svg"]], null, null, null, null, null)), (e()(), Yi(7, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/dev.svg"]], null, null, null, null, null)), (e()(), Yi(8, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/eye.svg"]], null, null, null, null, null)), (e()(), Yi(9, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/foresight.svg"]], null, null, null, null, null)), (e()(), Yi(10, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/forest.svg"]], null, null, null, null, null)), (e()(), Yi(11, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/gear.svg"]], null, null, null, null, null)), (e()(), Yi(12, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/gear_off.svg"]], null, null, null, null, null)), (e()(), Yi(13, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/hammer.svg"]], null, null, null, null, null)), (e()(), Yi(14, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/kred.png"]], null, null, null, null, null)), (e()(), Yi(15, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/land.svg"]], null, null, null, null, null)), (e()(), Yi(16, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/manage.svg"]], null, null, null, null, null)), (e()(), Yi(17, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/mountains.svg"]], null, null, null, null, null)), (e()(), Yi(18, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/population.svg"]], null, null, null, null, null)), (e()(), Yi(19, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/question_mark.svg"]], null, null, null, null, null)), (e()(), Yi(20, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/settings.svg"]], null, null, null, null, null)), (e()(), Yi(21, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/tick.svg"]], null, null, null, null, null)), (e()(), Yi(22, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/time.svg"]], null, null, null, null, null)), (e()(), Yi(23, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/trade.svg"]], null, null, null, null, null)), (e()(), Yi(24, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/upgrade.svg"]], null, null, null, null, null)), (e()(), Yi(25, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/village.svg"]], null, null, null, null, null)), (e()(), Yi(26, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/religion/faith.svg"]], null, null, null, null, null)), (e()(), Yi(27, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/religion/faith_shield.svg"]], null, null, null, null, null)), (e()(), Yi(28, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/weather/clouds.svg"]], null, null, null, null, null)), (e()(), Yi(29, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/weather/rain.svg"]], null, null, null, null, null)), (e()(), Yi(30, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/weather/snow.svg"]], null, null, null, null, null)), (e()(), Yi(31, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/weather/storm.svg"]], null, null, null, null, null)), (e()(), Yi(32, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/weather/sun.svg"]], null, null, null, null, null)), (e()(), Yi(33, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/weather/wind.svg"]], null, null, null, null, null)), (e()(), Yi(34, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/army/attack.svg"]], null, null, null, null, null)), (e()(), Yi(35, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/army/barracks.svg"]], null, null, null, null, null)), (e()(), Yi(36, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/army/defense.svg"]], null, null, null, null, null)), (e()(), Yi(37, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/army/invasion.svg"]], null, null, null, null, null)), (e()(), Yi(38, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/army/recruit.svg"]], null, null, null, null, null)), (e()(), Yi(39, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/happiness/angry.svg"]], null, null, null, null, null)), (e()(), Yi(40, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/happiness/happy.svg"]], null, null, null, null, null)), (e()(), Yi(41, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/happiness/neutral.svg"]], null, null, null, null, null)), (e()(), Yi(42, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/happiness/overjoyed.svg"]], null, null, null, null, null)), (e()(), Yi(43, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/happiness/sad.svg"]], null, null, null, null, null)), (e()(), Yi(44, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/apple.svg"]], null, null, null, null, null)), (e()(), Yi(45, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/barley.svg"]], null, null, null, null, null)), (e()(), Yi(46, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/beer.svg"]], null, null, null, null, null)), (e()(), Yi(47, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/berry.svg"]], null, null, null, null, null)), (e()(), Yi(48, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/bow.svg"]], null, null, null, null, null)), (e()(), Yi(49, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/bread.svg"]], null, null, null, null, null)), (e()(), Yi(50, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/bronze.svg"]], null, null, null, null, null)), (e()(), Yi(51, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/brushwood.svg"]], null, null, null, null, null)), (e()(), Yi(52, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/chicken.svg"]], null, null, null, null, null)), (e()(), Yi(53, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/clothes.svg"]], null, null, null, null, null)), (e()(), Yi(54, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/coal.svg"]], null, null, null, null, null)), (e()(), Yi(55, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/coins.svg"]], null, null, null, null, null)), (e()(), Yi(56, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/cooked_meat.svg"]], null, null, null, null, null)), (e()(), Yi(57, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/copper.svg"]], null, null, null, null, null)), (e()(), Yi(58, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/copper_ore.svg"]], null, null, null, null, null)), (e()(), Yi(59, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/cotton.svg"]], null, null, null, null, null)), (e()(), Yi(60, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/cow.svg"]], null, null, null, null, null)), (e()(), Yi(61, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/cut_stone.svg"]], null, null, null, null, null)), (e()(), Yi(62, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/egg.svg"]], null, null, null, null, null)), (e()(), Yi(63, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/fabric.svg"]], null, null, null, null, null)), (e()(), Yi(64, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/fish.svg"]], null, null, null, null, null)), (e()(), Yi(65, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/flour.svg"]], null, null, null, null, null)), (e()(), Yi(66, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/food.svg"]], null, null, null, null, null)), (e()(), Yi(67, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/fuel.svg"]], null, null, null, null, null)), (e()(), Yi(68, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/fur.svg"]], null, null, null, null, null)), (e()(), Yi(69, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/gold.svg"]], null, null, null, null, null)), (e()(), Yi(70, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/gold_ore.svg"]], null, null, null, null, null)), (e()(), Yi(71, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/grape.svg"]], null, null, null, null, null)), (e()(), Yi(72, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/hay.svg"]], null, null, null, null, null)), (e()(), Yi(73, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/hop.svg"]], null, null, null, null, null)), (e()(), Yi(74, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/horse.svg"]], null, null, null, null, null)), (e()(), Yi(75, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/iron.svg"]], null, null, null, null, null)), (e()(), Yi(76, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/iron_ore.svg"]], null, null, null, null, null)), (e()(), Yi(77, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/leather.svg"]], null, null, null, null, null)), (e()(), Yi(78, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/leather_armor.svg"]], null, null, null, null, null)), (e()(), Yi(79, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/light_armor.svg"]], null, null, null, null, null)), (e()(), Yi(80, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/heavy_armor.svg"]], null, null, null, null, null)), (e()(), Yi(81, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/log.svg"]], null, null, null, null, null)), (e()(), Yi(82, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/meat.svg"]], null, null, null, null, null)), (e()(), Yi(83, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/meat_soup.svg"]], null, null, null, null, null)), (e()(), Yi(84, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/milk.svg"]], null, null, null, null, null)), (e()(), Yi(85, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/mushroom.svg"]], null, null, null, null, null)), (e()(), Yi(86, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/pig.svg"]], null, null, null, null, null)), (e()(), Yi(87, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/plank.svg"]], null, null, null, null, null)), (e()(), Yi(88, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/silver.svg"]], null, null, null, null, null)), (e()(), Yi(89, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/silver_ore.svg"]], null, null, null, null, null)), (e()(), Yi(90, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/steel.svg"]], null, null, null, null, null)), (e()(), Yi(91, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/stone.svg"]], null, null, null, null, null)), (e()(), Yi(92, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/stone_axe.svg"]], null, null, null, null, null)), (e()(), Yi(93, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/stone_hammer.svg"]], null, null, null, null, null)), (e()(), Yi(94, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/stone_pickaxe.svg"]], null, null, null, null, null)), (e()(), Yi(95, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/stone_shovel.svg"]], null, null, null, null, null)), (e()(), Yi(96, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/stone_spear.svg"]], null, null, null, null, null)), (e()(), Yi(97, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/sword.svg"]], null, null, null, null, null)), (e()(), Yi(98, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/tin.svg"]], null, null, null, null, null)), (e()(), Yi(99, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/tin_ore.svg"]], null, null, null, null, null)), (e()(), Yi(100, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/vegetable_soup.svg"]], null, null, null, null, null)), (e()(), Yi(101, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/wheat.svg"]], null, null, null, null, null)), (e()(), Yi(102, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/wine.svg"]], null, null, null, null, null)), (e()(), Yi(103, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/wooden_shield.svg"]], null, null, null, null, null)), (e()(), Yi(104, 0, null, null, 2, "div", [["id", "header"]], null, null, null, null, null)), (e()(), Yi(105, 0, null, null, 1, "app-header", [], null, null, null, aI, Q_)), kl(106, 114688, null, 0, $_, [kC, Og, Rg, Ng, zE, yg, Cg, DC, Tg], null, null), (e()(), Yi(107, 0, null, null, 2, "div", [["id", "left-menu"]], null, null, null, null, null)), (e()(), Yi(108, 0, null, null, 1, "app-left-menu", [], null, null, null, SI, pI)), kl(109, 114688, null, 0, cI, [Cg], null, null), (e()(), Yi(110, 0, null, null, 3, "div", [["id", "center"]], null, null, null, null, null)), (e()(), Yi(111, 0, null, null, 2, "div", [["id", "screen"]], null, null, null, null, null)), (e()(), Yi(112, 16777216, null, null, 1, "router-outlet", [], null, null, null, null, null)), kl(113, 212992, null, 0, Pd, [Nd, br, _n, [8, null], Rr], null, null), (e()(), Yi(114, 0, null, null, 2, "div", [["id", "right-menu"]], null, null, null, null, null)), (e()(), Yi(115, 0, null, null, 1, "app-log", [], null, null, null, _I, bI)), kl(116, 114688, null, 0, EI, [Og, Rr], null, null), (e()(), Yi(117, 0, null, null, 2, "div", [["id", "footer"]], null, null, null, null, null)), (e()(), Yi(118, 0, null, null, 1, "app-footer", [], null, null, null, PI, AI)), kl(119, 114688, null, 0, II, [Cg, yg], null, null)], function (e, n) {
                e(n, 106, 0), e(n, 109, 0), e(n, 113, 0), e(n, 116, 0), e(n, 119, 0)
            }, null)
        }
        var LI = gi({
            encapsulation: 0,
            styles: [["#IEwrapper[_ngcontent-%COMP%]{border:1px solid #000;background:#919191;font-size:3em;height:100%;max-height:100%;display:flex;justify-content:center;align-items:center}#IEwrapper[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center}"]],
            data: {}
        });

        function xI(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 4, null, null, null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "app-modals", [], null, null, null, Y_, j_)), kl(2, 114688, null, 0, W_, [], null, null), (e()(), Yi(3, 0, null, null, 1, "app-game", [], null, [["window", "beforeunload"]], function (e, n, t) {
                var r = !0;
                return "window:beforeunload" === n && (r = !1 !== El(e, 4).exitSave(t) && r), r
            }, MI, kI)), kl(4, 114688, null, 0, DI, [Cg, ku, yg, DC, kC, Ng, gS, Og, YT, oT, nR, ER, BR, rS], null, null)], function (e, n) {
                e(n, 2, 0), e(n, 4, 0)
            }, null)
        }

        function FI(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 7, null, null, null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 6, "div", [["id", "IEwrapper"]], null, null, null, null, null)), (e()(), Yi(2, 0, null, null, 5, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["Internet Explorer is not supported."])), (e()(), Yi(4, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), lo(-1, null, ["Please use Firefox, Chrome, Safari"])), (e()(), Yi(6, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), lo(-1, null, ["or Edge."]))], null, null)
        }

        function UI(e) {
            return so(0, [(e()(), ji(16777216, null, null, 1, null, xI)), kl(1, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, FI)), kl(3, 16384, null, 0, Fs, [br, ht], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, n) {
                var t = n.component;
                e(n, 1, 0, !t.isIE()), e(n, 3, 0, t.isIE())
            }, null)
        }

        function HI(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-root", [], null, [["document", "contextmenu"]], function (e, n, t) {
                var r = !0;
                return "document:contextmenu" === n && (r = !1 !== El(e, 1).catchContextMenu(t) && r), r
            }, UI, LI)), kl(1, 49152, null, 0, ps, [], null, null)], null, null)
        }
        var GI = al("app-root", ps, HI, {}, {}, []),
            BI = function () {
                return function () {}
            }(),
            VI = function () {
                return function () {}
            }(),
            WI = "*";

        function jI(e, n) {
            return void 0 === n && (n = null), {
                type: 2,
                steps: e,
                options: n
            }
        }

        function YI(e) {
            return {
                type: 6,
                styles: e,
                offset: null
            }
        }

        function zI(e) {
            Promise.resolve(null).then(e)
        }
        var KI = function () {
                function e(e, n) {
                    void 0 === e && (e = 0), void 0 === n && (n = 0), this._onDoneFns = [], this._onStartFns = [], this._onDestroyFns = [], this._started = !1, this._destroyed = !1, this._finished = !1, this.parentPlayer = null, this.totalTime = e + n
                }
                return e.prototype._onFinish = function () {
                    this._finished || (this._finished = !0, this._onDoneFns.forEach(function (e) {
                        return e()
                    }), this._onDoneFns = [])
                }, e.prototype.onStart = function (e) {
                    this._onStartFns.push(e)
                }, e.prototype.onDone = function (e) {
                    this._onDoneFns.push(e)
                }, e.prototype.onDestroy = function (e) {
                    this._onDestroyFns.push(e)
                }, e.prototype.hasStarted = function () {
                    return this._started
                }, e.prototype.init = function () {}, e.prototype.play = function () {
                    this.hasStarted() || (this._onStart(), this.triggerMicrotask()), this._started = !0
                }, e.prototype.triggerMicrotask = function () {
                    var e = this;
                    zI(function () {
                        return e._onFinish()
                    })
                }, e.prototype._onStart = function () {
                    this._onStartFns.forEach(function (e) {
                        return e()
                    }), this._onStartFns = []
                }, e.prototype.pause = function () {}, e.prototype.restart = function () {}, e.prototype.finish = function () {
                    this._onFinish()
                }, e.prototype.destroy = function () {
                    this._destroyed || (this._destroyed = !0, this.hasStarted() || this._onStart(), this.finish(), this._onDestroyFns.forEach(function (e) {
                        return e()
                    }), this._onDestroyFns = [])
                }, e.prototype.reset = function () {}, e.prototype.setPosition = function (e) {}, e.prototype.getPosition = function () {
                    return 0
                }, e.prototype.triggerCallback = function (e) {
                    var n = "start" == e ? this._onStartFns : this._onDoneFns;
                    n.forEach(function (e) {
                        return e()
                    }), n.length = 0
                }, e
            }(),
            qI = function () {
                function e(e) {
                    var n = this;
                    this._onDoneFns = [], this._onStartFns = [], this._finished = !1, this._started = !1, this._destroyed = !1, this._onDestroyFns = [], this.parentPlayer = null, this.totalTime = 0, this.players = e;
                    var t = 0,
                        r = 0,
                        i = 0,
                        l = this.players.length;
                    0 == l ? zI(function () {
                        return n._onFinish()
                    }) : this.players.forEach(function (e) {
                        e.onDone(function () {
                            ++t == l && n._onFinish()
                        }), e.onDestroy(function () {
                            ++r == l && n._onDestroy()
                        }), e.onStart(function () {
                            ++i == l && n._onStart()
                        })
                    }), this.totalTime = this.players.reduce(function (e, n) {
                        return Math.max(e, n.totalTime)
                    }, 0)
                }
                return e.prototype._onFinish = function () {
                    this._finished || (this._finished = !0, this._onDoneFns.forEach(function (e) {
                        return e()
                    }), this._onDoneFns = [])
                }, e.prototype.init = function () {
                    this.players.forEach(function (e) {
                        return e.init()
                    })
                }, e.prototype.onStart = function (e) {
                    this._onStartFns.push(e)
                }, e.prototype._onStart = function () {
                    this.hasStarted() || (this._started = !0, this._onStartFns.forEach(function (e) {
                        return e()
                    }), this._onStartFns = [])
                }, e.prototype.onDone = function (e) {
                    this._onDoneFns.push(e)
                }, e.prototype.onDestroy = function (e) {
                    this._onDestroyFns.push(e)
                }, e.prototype.hasStarted = function () {
                    return this._started
                }, e.prototype.play = function () {
                    this.parentPlayer || this.init(), this._onStart(), this.players.forEach(function (e) {
                        return e.play()
                    })
                }, e.prototype.pause = function () {
                    this.players.forEach(function (e) {
                        return e.pause()
                    })
                }, e.prototype.restart = function () {
                    this.players.forEach(function (e) {
                        return e.restart()
                    })
                }, e.prototype.finish = function () {
                    this._onFinish(), this.players.forEach(function (e) {
                        return e.finish()
                    })
                }, e.prototype.destroy = function () {
                    this._onDestroy()
                }, e.prototype._onDestroy = function () {
                    this._destroyed || (this._destroyed = !0, this._onFinish(), this.players.forEach(function (e) {
                        return e.destroy()
                    }), this._onDestroyFns.forEach(function (e) {
                        return e()
                    }), this._onDestroyFns = [])
                }, e.prototype.reset = function () {
                    this.players.forEach(function (e) {
                        return e.reset()
                    }), this._destroyed = !1, this._finished = !1, this._started = !1
                }, e.prototype.setPosition = function (e) {
                    var n = e * this.totalTime;
                    this.players.forEach(function (e) {
                        var t = e.totalTime ? Math.min(1, n / e.totalTime) : 1;
                        e.setPosition(t)
                    })
                }, e.prototype.getPosition = function () {
                    var e = 0;
                    return this.players.forEach(function (n) {
                        var t = n.getPosition();
                        e = Math.min(t, e)
                    }), e
                }, e.prototype.beforeDestroy = function () {
                    this.players.forEach(function (e) {
                        e.beforeDestroy && e.beforeDestroy()
                    })
                }, e.prototype.triggerCallback = function (e) {
                    var n = "start" == e ? this._onStartFns : this._onDoneFns;
                    n.forEach(function (e) {
                        return e()
                    }), n.length = 0
                }, e
            }(),
            $I = "!";

        function QI() {
            return "undefined" != typeof process
        }

        function ZI(e) {
            switch (e.length) {
                case 0:
                    return new KI;
                case 1:
                    return e[0];
                default:
                    return new qI(e)
            }
        }

        function XI(e, n, t, r, i, l) {
            void 0 === i && (i = {}), void 0 === l && (l = {});
            var o = [],
                u = [],
                s = -1,
                a = null;
            if (r.forEach(function (e) {
                    var t = e.offset,
                        r = t == s,
                        c = r && a || {};
                    Object.keys(e).forEach(function (t) {
                        var r = t,
                            u = e[t];
                        if ("offset" !== t) switch (r = n.normalizePropertyName(r, o), u) {
                            case $I:
                                u = i[t];
                                break;
                            case WI:
                                u = l[t];
                                break;
                            default:
                                u = n.normalizeStyleValue(t, r, u, o)
                        }
                        c[r] = u
                    }), r || u.push(c), a = c, s = t
                }), o.length) throw new Error("Unable to animate due to the following errors:\n - " + o.join("\n - "));
            return u
        }

        function JI(e, n, t, r) {
            switch (n) {
                case "start":
                    e.onStart(function () {
                        return r(t && eA(t, "start", e))
                    });
                    break;
                case "done":
                    e.onDone(function () {
                        return r(t && eA(t, "done", e))
                    });
                    break;
                case "destroy":
                    e.onDestroy(function () {
                        return r(t && eA(t, "destroy", e))
                    })
            }
        }

        function eA(e, n, t) {
            var r = t.totalTime,
                i = nA(e.element, e.triggerName, e.fromState, e.toState, n || e.phaseName, null == r ? e.totalTime : r, !!t.disabled),
                l = e._data;
            return null != l && (i._data = l), i
        }

        function nA(e, n, t, r, i, l, o) {
            return void 0 === i && (i = ""), void 0 === l && (l = 0), {
                element: e,
                triggerName: n,
                fromState: t,
                toState: r,
                phaseName: i,
                totalTime: l,
                disabled: !!o
            }
        }

        function tA(e, n, t) {
            var r;
            return e instanceof Map ? (r = e.get(n)) || e.set(n, r = t) : (r = e[n]) || (r = e[n] = t), r
        }

        function rA(e) {
            var n = e.indexOf(":");
            return [e.substring(1, n), e.substr(n + 1)]
        }
        var iA = function (e, n) {
                return !1
            },
            lA = function (e, n) {
                return !1
            },
            oA = function (e, n, t) {
                return []
            },
            uA = QI();
        if (uA || "undefined" != typeof Element) {
            if (iA = function (e, n) {
                    return e.contains(n)
                }, uA || Element.prototype.matches) lA = function (e, n) {
                return e.matches(n)
            };
            else {
                var sA = Element.prototype,
                    aA = sA.matchesSelector || sA.mozMatchesSelector || sA.msMatchesSelector || sA.oMatchesSelector || sA.webkitMatchesSelector;
                aA && (lA = function (e, n) {
                    return aA.apply(e, [n])
                })
            }
            oA = function (e, n, t) {
                var r = [];
                if (t) r.push.apply(r, c(e.querySelectorAll(n)));
                else {
                    var i = e.querySelector(n);
                    i && r.push(i)
                }
                return r
            }
        }
        var cA = null,
            pA = !1,
            hA = lA,
            dA = iA,
            fA = oA,
            gA = function () {
                function e() {}
                return e.prototype.validateStyleProperty = function (e) {
                    return function (e) {
                        cA || (cA = ("undefined" != typeof document ? document.body : null) || {}, pA = !!cA.style && "WebkitAppearance" in cA.style);
                        var n = !0;
                        return cA.style && ! function (e) {
                            return "ebkit" == e.substring(1, 6)
                        }(e) && !(n = e in cA.style) && pA && (n = "Webkit" + e.charAt(0).toUpperCase() + e.substr(1) in cA.style), n
                    }(e)
                }, e.prototype.matchesElement = function (e, n) {
                    return hA(e, n)
                }, e.prototype.containsElement = function (e, n) {
                    return dA(e, n)
                }, e.prototype.query = function (e, n, t) {
                    return fA(e, n, t)
                }, e.prototype.computeStyle = function (e, n, t) {
                    return t || ""
                }, e.prototype.animate = function (e, n, t, r, i, l, o) {
                    return void 0 === l && (l = []), new KI(t, r)
                }, e
            }(),
            vA = function () {
                function e() {}
                return e.NOOP = new gA, e
            }(),
            mA = 1e3;

        function yA(e) {
            if ("number" == typeof e) return e;
            var n = e.match(/^(-?[\.\d]+)(m?s)/);
            return !n || n.length < 2 ? 0 : SA(parseFloat(n[1]), n[2])
        }

        function SA(e, n) {
            switch (n) {
                case "s":
                    return e * mA;
                default:
                    return e
            }
        }

        function EA(e, n, t) {
            return e.hasOwnProperty("duration") ? e : function (e, n, t) {
                var r, i = 0,
                    l = "";
                if ("string" == typeof e) {
                    var o = e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);
                    if (null === o) return n.push('The provided timing value "' + e + '" is invalid.'), {
                        duration: 0,
                        delay: 0,
                        easing: ""
                    };
                    r = SA(parseFloat(o[1]), o[2]);
                    var u = o[3];
                    null != u && (i = SA(parseFloat(u), o[4]));
                    var s = o[5];
                    s && (l = s)
                } else r = e;
                if (!t) {
                    var a = !1,
                        c = n.length;
                    r < 0 && (n.push("Duration values below 0 are not allowed for this animation step."), a = !0), i < 0 && (n.push("Delay values below 0 are not allowed for this animation step."), a = !0), a && n.splice(c, 0, 'The provided timing value "' + e + '" is invalid.')
                }
                return {
                    duration: r,
                    delay: i,
                    easing: l
                }
            }(e, n, t)
        }

        function bA(e, n) {
            return void 0 === n && (n = {}), Object.keys(e).forEach(function (t) {
                n[t] = e[t]
            }), n
        }

        function OA(e, n, t) {
            if (void 0 === t && (t = {}), n)
                for (var r in e) t[r] = e[r];
            else bA(e, t);
            return t
        }

        function RA(e, n, t) {
            return t ? n + ":" + t + ";" : ""
        }

        function TA(e) {
            for (var n = "", t = 0; t < e.style.length; t++) n += RA(0, r = e.style.item(t), e.style.getPropertyValue(r));
            for (var r in e.style) e.style.hasOwnProperty(r) && !r.startsWith("_") && (n += RA(0, r.replace(/([a-z])([A-Z])/g, "$1-$2").toLowerCase(), e.style[r]));
            e.setAttribute("style", n)
        }

        function CA(e, n, t) {
            e.style && (Object.keys(n).forEach(function (r) {
                var i = kA(r);
                t && !t.hasOwnProperty(r) && (t[r] = e.style[i]), e.style[i] = n[r]
            }), QI() && TA(e))
        }

        function _A(e, n) {
            e.style && (Object.keys(n).forEach(function (n) {
                var t = kA(n);
                e.style[t] = ""
            }), QI() && TA(e))
        }

        function IA(e) {
            return Array.isArray(e) ? 1 == e.length ? e[0] : jI(e) : e
        }
        var AA = new RegExp("{{\\s*(.+?)\\s*}}", "g");

        function wA(e) {
            var n = [];
            if ("string" == typeof e) {
                for (var t = e.toString(), r = void 0; r = AA.exec(t);) n.push(r[1]);
                AA.lastIndex = 0
            }
            return n
        }

        function NA(e, n, t) {
            var r = e.toString(),
                i = r.replace(AA, function (e, r) {
                    var i = n[r];
                    return n.hasOwnProperty(r) || (t.push("Please provide a value for the animation param " + r), i = ""), i.toString()
                });
            return i == r ? e : i
        }

        function PA(e) {
            for (var n = [], t = e.next(); !t.done;) n.push(t.value), t = e.next();
            return n
        }
        var DA = /-+([a-z0-9])/g;

        function kA(e) {
            return e.replace(DA, function () {
                for (var e = [], n = 0; n < arguments.length; n++) e[n] = arguments[n];
                return e[1].toUpperCase()
            })
        }

        function MA(e, n, t) {
            switch (n.type) {
                case 7:
                    return e.visitTrigger(n, t);
                case 0:
                    return e.visitState(n, t);
                case 1:
                    return e.visitTransition(n, t);
                case 2:
                    return e.visitSequence(n, t);
                case 3:
                    return e.visitGroup(n, t);
                case 4:
                    return e.visitAnimate(n, t);
                case 5:
                    return e.visitKeyframes(n, t);
                case 6:
                    return e.visitStyle(n, t);
                case 8:
                    return e.visitReference(n, t);
                case 9:
                    return e.visitAnimateChild(n, t);
                case 10:
                    return e.visitAnimateRef(n, t);
                case 11:
                    return e.visitQuery(n, t);
                case 12:
                    return e.visitStagger(n, t);
                default:
                    throw new Error("Unable to resolve animation metadata node #" + n.type)
            }
        }
        var LA = "*",
            xA = new Set(["true", "1"]),
            FA = new Set(["false", "0"]);

        function UA(e, n) {
            var t = xA.has(e) || FA.has(e),
                r = xA.has(n) || FA.has(n);
            return function (i, l) {
                var o = e == LA || e == i,
                    u = n == LA || n == l;
                return !o && t && "boolean" == typeof i && (o = i ? xA.has(e) : FA.has(e)), !u && r && "boolean" == typeof l && (u = l ? xA.has(n) : FA.has(n)), o && u
            }
        }
        var HA = new RegExp("s*:selfs*,?", "g");

        function GA(e, n, t) {
            return new BA(e).build(n, t)
        }
        var BA = function () {
                function e(e) {
                    this._driver = e
                }
                return e.prototype.build = function (e, n) {
                    var t = new VA(n);
                    return this._resetContextStyleTimingState(t), MA(this, IA(e), t)
                }, e.prototype._resetContextStyleTimingState = function (e) {
                    e.currentQuerySelector = "", e.collectedStyles = {}, e.collectedStyles[""] = {}, e.currentTime = 0
                }, e.prototype.visitTrigger = function (e, n) {
                    var t = this,
                        r = n.queryCount = 0,
                        i = n.depCount = 0,
                        l = [],
                        o = [];
                    return "@" == e.name.charAt(0) && n.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"), e.definitions.forEach(function (e) {
                        if (t._resetContextStyleTimingState(n), 0 == e.type) {
                            var u = e,
                                s = u.name;
                            s.toString().split(/\s*,\s*/).forEach(function (e) {
                                u.name = e, l.push(t.visitState(u, n))
                            }), u.name = s
                        } else if (1 == e.type) {
                            var a = t.visitTransition(e, n);
                            r += a.queryCount, i += a.depCount, o.push(a)
                        } else n.errors.push("only state() and transition() definitions can sit inside of a trigger()")
                    }), {
                        type: 7,
                        name: e.name,
                        states: l,
                        transitions: o,
                        queryCount: r,
                        depCount: i,
                        options: null
                    }
                }, e.prototype.visitState = function (e, n) {
                    var t = this.visitStyle(e.styles, n),
                        r = e.options && e.options.params || null;
                    if (t.containsDynamicStyles) {
                        var i = new Set,
                            l = r || {};
                        if (t.styles.forEach(function (e) {
                                if (WA(e)) {
                                    var n = e;
                                    Object.keys(n).forEach(function (e) {
                                        wA(n[e]).forEach(function (e) {
                                            l.hasOwnProperty(e) || i.add(e)
                                        })
                                    })
                                }
                            }), i.size) {
                            var o = PA(i.values());
                            n.errors.push('state("' + e.name + '", ...) must define default values for all the following style substitutions: ' + o.join(", "))
                        }
                    }
                    return {
                        type: 0,
                        name: e.name,
                        style: t,
                        options: r ? {
                            params: r
                        } : null
                    }
                }, e.prototype.visitTransition = function (e, n) {
                    n.queryCount = 0, n.depCount = 0;
                    var t, r, i, l = MA(this, IA(e.animation), n);
                    return {
                        type: 1,
                        matchers: (t = e.expr, r = n.errors, i = [], "string" == typeof t ? t.split(/\s*,\s*/).forEach(function (e) {
                            return function (e, n, t) {
                                if (":" == e[0]) {
                                    var r = function (e, n) {
                                        switch (e) {
                                            case ":enter":
                                                return "void => *";
                                            case ":leave":
                                                return "* => void";
                                            case ":increment":
                                                return function (e, n) {
                                                    return parseFloat(n) > parseFloat(e)
                                                };
                                            case ":decrement":
                                                return function (e, n) {
                                                    return parseFloat(n) < parseFloat(e)
                                                };
                                            default:
                                                return n.push('The transition alias value "' + e + '" is not supported'), "* => *"
                                        }
                                    }(e, t);
                                    if ("function" == typeof r) return void n.push(r);
                                    e = r
                                }
                                var i = e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);
                                if (null == i || i.length < 4) return t.push('The provided transition expression "' + e + '" is not supported'), n;
                                var l = i[1],
                                    o = i[2],
                                    u = i[3];
                                n.push(UA(l, u)), "<" != o[0] || l == LA && u == LA || n.push(UA(u, l))
                            }(e, i, r)
                        }) : i.push(t), i),
                        animation: l,
                        queryCount: n.queryCount,
                        depCount: n.depCount,
                        options: jA(e.options)
                    }
                }, e.prototype.visitSequence = function (e, n) {
                    var t = this;
                    return {
                        type: 2,
                        steps: e.steps.map(function (e) {
                            return MA(t, e, n)
                        }),
                        options: jA(e.options)
                    }
                }, e.prototype.visitGroup = function (e, n) {
                    var t = this,
                        r = n.currentTime,
                        i = 0,
                        l = e.steps.map(function (e) {
                            n.currentTime = r;
                            var l = MA(t, e, n);
                            return i = Math.max(i, n.currentTime), l
                        });
                    return n.currentTime = i, {
                        type: 3,
                        steps: l,
                        options: jA(e.options)
                    }
                }, e.prototype.visitAnimate = function (e, n) {
                    var t, r = function (e, n) {
                        var t = null;
                        if (e.hasOwnProperty("duration")) t = e;
                        else if ("number" == typeof e) return YA(EA(e, n).duration, 0, "");
                        var r = e;
                        if (r.split(/\s+/).some(function (e) {
                                return "{" == e.charAt(0) && "{" == e.charAt(1)
                            })) {
                            var i = YA(0, 0, "");
                            return i.dynamic = !0, i.strValue = r, i
                        }
                        return YA((t = t || EA(r, n)).duration, t.delay, t.easing)
                    }(e.timings, n.errors);
                    n.currentAnimateTimings = r;
                    var i = e.styles ? e.styles : YI({});
                    if (5 == i.type) t = this.visitKeyframes(i, n);
                    else {
                        var l = e.styles,
                            o = !1;
                        if (!l) {
                            o = !0;
                            var u = {};
                            r.easing && (u.easing = r.easing), l = YI(u)
                        }
                        n.currentTime += r.duration + r.delay;
                        var s = this.visitStyle(l, n);
                        s.isEmptyStep = o, t = s
                    }
                    return n.currentAnimateTimings = null, {
                        type: 4,
                        timings: r,
                        style: t,
                        options: null
                    }
                }, e.prototype.visitStyle = function (e, n) {
                    var t = this._makeStyleAst(e, n);
                    return this._validateStyleAst(t, n), t
                }, e.prototype._makeStyleAst = function (e, n) {
                    var t = [];
                    Array.isArray(e.styles) ? e.styles.forEach(function (e) {
                        "string" == typeof e ? e == WI ? t.push(e) : n.errors.push("The provided style string value " + e + " is not allowed.") : t.push(e)
                    }) : t.push(e.styles);
                    var r = !1,
                        i = null;
                    return t.forEach(function (e) {
                        if (WA(e)) {
                            var n = e,
                                t = n.easing;
                            if (t && (i = t, delete n.easing), !r)
                                for (var l in n)
                                    if (n[l].toString().indexOf("{{") >= 0) {
                                        r = !0;
                                        break
                                    }
                        }
                    }), {
                        type: 6,
                        styles: t,
                        easing: i,
                        offset: e.offset,
                        containsDynamicStyles: r,
                        options: null
                    }
                }, e.prototype._validateStyleAst = function (e, n) {
                    var t = this,
                        r = n.currentAnimateTimings,
                        i = n.currentTime,
                        l = n.currentTime;
                    r && l > 0 && (l -= r.duration + r.delay), e.styles.forEach(function (e) {
                        "string" != typeof e && Object.keys(e).forEach(function (r) {
                            if (t._driver.validateStyleProperty(r)) {
                                var o, u, s, a = n.collectedStyles[n.currentQuerySelector],
                                    c = a[r],
                                    p = !0;
                                c && (l != i && l >= c.startTime && i <= c.endTime && (n.errors.push('The CSS property "' + r + '" that exists between the times of "' + c.startTime + 'ms" and "' + c.endTime + 'ms" is also being animated in a parallel animation between the times of "' + l + 'ms" and "' + i + 'ms"'), p = !1), l = c.startTime), p && (a[r] = {
                                    startTime: l,
                                    endTime: i
                                }), n.options && (o = n.errors, u = n.options.params || {}, (s = wA(e[r])).length && s.forEach(function (e) {
                                    u.hasOwnProperty(e) || o.push("Unable to resolve the local animation param " + e + " in the given list of values")
                                }))
                            } else n.errors.push('The provided animation property "' + r + '" is not a supported CSS property for animations')
                        })
                    })
                }, e.prototype.visitKeyframes = function (e, n) {
                    var t = this,
                        r = {
                            type: 5,
                            styles: [],
                            options: null
                        };
                    if (!n.currentAnimateTimings) return n.errors.push("keyframes() must be placed inside of a call to animate()"), r;
                    var i = 0,
                        l = [],
                        o = !1,
                        u = !1,
                        s = 0,
                        a = e.steps.map(function (e) {
                            var r = t._makeStyleAst(e, n),
                                a = null != r.offset ? r.offset : function (e) {
                                    if ("string" == typeof e) return null;
                                    var n = null;
                                    if (Array.isArray(e)) e.forEach(function (e) {
                                        if (WA(e) && e.hasOwnProperty("offset")) {
                                            var t = e;
                                            n = parseFloat(t.offset), delete t.offset
                                        }
                                    });
                                    else if (WA(e) && e.hasOwnProperty("offset")) {
                                        var t = e;
                                        n = parseFloat(t.offset), delete t.offset
                                    }
                                    return n
                                }(r.styles),
                                c = 0;
                            return null != a && (i++, c = r.offset = a), u = u || c < 0 || c > 1, o = o || c < s, s = c, l.push(c), r
                        });
                    u && n.errors.push("Please ensure that all keyframe offsets are between 0 and 1"), o && n.errors.push("Please ensure that all keyframe offsets are in order");
                    var c = e.steps.length,
                        p = 0;
                    i > 0 && i < c ? n.errors.push("Not all style() steps within the declared keyframes() contain offsets") : 0 == i && (p = 1 / (c - 1));
                    var h = c - 1,
                        d = n.currentTime,
                        f = n.currentAnimateTimings,
                        g = f.duration;
                    return a.forEach(function (e, i) {
                        var o = p > 0 ? i == h ? 1 : p * i : l[i],
                            u = o * g;
                        n.currentTime = d + f.delay + u, f.duration = u, t._validateStyleAst(e, n), e.offset = o, r.styles.push(e)
                    }), r
                }, e.prototype.visitReference = function (e, n) {
                    return {
                        type: 8,
                        animation: MA(this, IA(e.animation), n),
                        options: jA(e.options)
                    }
                }, e.prototype.visitAnimateChild = function (e, n) {
                    return n.depCount++, {
                        type: 9,
                        options: jA(e.options)
                    }
                }, e.prototype.visitAnimateRef = function (e, n) {
                    return {
                        type: 10,
                        animation: this.visitReference(e.animation, n),
                        options: jA(e.options)
                    }
                }, e.prototype.visitQuery = function (e, n) {
                    var t = n.currentQuerySelector,
                        r = e.options || {};
                    n.queryCount++, n.currentQuery = e;
                    var i = a(function (e) {
                            var n = !!e.split(/\s*,\s*/).find(function (e) {
                                return ":self" == e
                            });
                            return n && (e = e.replace(HA, "")), [e = e.replace(/@\*/g, ".ng-trigger").replace(/@\w+/g, function (e) {
                                return ".ng-trigger-" + e.substr(1)
                            }).replace(/:animating/g, ".ng-animating"), n]
                        }(e.selector), 2),
                        l = i[0],
                        o = i[1];
                    n.currentQuerySelector = t.length ? t + " " + l : l, tA(n.collectedStyles, n.currentQuerySelector, {});
                    var u = MA(this, IA(e.animation), n);
                    return n.currentQuery = null, n.currentQuerySelector = t, {
                        type: 11,
                        selector: l,
                        limit: r.limit || 0,
                        optional: !!r.optional,
                        includeSelf: o,
                        animation: u,
                        originalSelector: e.selector,
                        options: jA(e.options)
                    }
                }, e.prototype.visitStagger = function (e, n) {
                    n.currentQuery || n.errors.push("stagger() can only be used inside of query()");
                    var t = "full" === e.timings ? {
                        duration: 0,
                        delay: 0,
                        easing: "full"
                    } : EA(e.timings, n.errors, !0);
                    return {
                        type: 12,
                        animation: MA(this, IA(e.animation), n),
                        timings: t,
                        options: null
                    }
                }, e
            }(),
            VA = function () {
                return function (e) {
                    this.errors = e, this.queryCount = 0, this.depCount = 0, this.currentTransition = null, this.currentQuery = null, this.currentQuerySelector = null, this.currentAnimateTimings = null, this.currentTime = 0, this.collectedStyles = {}, this.options = null
                }
            }();

        function WA(e) {
            return !Array.isArray(e) && "object" == typeof e
        }

        function jA(e) {
            var n;
            return e ? (e = bA(e)).params && (e.params = (n = e.params) ? bA(n) : null) : e = {}, e
        }

        function YA(e, n, t) {
            return {
                duration: e,
                delay: n,
                easing: t
            }
        }

        function zA(e, n, t, r, i, l, o, u) {
            return void 0 === o && (o = null), void 0 === u && (u = !1), {
                type: 1,
                element: e,
                keyframes: n,
                preStyleProps: t,
                postStyleProps: r,
                duration: i,
                delay: l,
                totalTime: i + l,
                easing: o,
                subTimeline: u
            }
        }
        var KA = function () {
                function e() {
                    this._map = new Map
                }
                return e.prototype.consume = function (e) {
                    var n = this._map.get(e);
                    return n ? this._map.delete(e) : n = [], n
                }, e.prototype.append = function (e, n) {
                    var t = this._map.get(e);
                    t || this._map.set(e, t = []), t.push.apply(t, c(n))
                }, e.prototype.has = function (e) {
                    return this._map.has(e)
                }, e.prototype.clear = function () {
                    this._map.clear()
                }, e
            }(),
            qA = new RegExp(":enter", "g"),
            $A = new RegExp(":leave", "g");

        function QA(e, n, t, r, i, l, o, u, s, a) {
            return void 0 === l && (l = {}), void 0 === o && (o = {}), void 0 === a && (a = []), (new ZA).buildKeyframes(e, n, t, r, i, l, o, u, s, a)
        }
        var ZA = function () {
                function e() {}
                return e.prototype.buildKeyframes = function (e, n, t, r, i, l, o, u, s, a) {
                    void 0 === a && (a = []), s = s || new KA;
                    var c = new JA(e, n, s, r, i, a, []);
                    c.options = u, c.currentTimeline.setStyles([l], null, c.errors, u), MA(this, t, c);
                    var p = c.timelines.filter(function (e) {
                        return e.containsAnimation()
                    });
                    if (p.length && Object.keys(o).length) {
                        var h = p[p.length - 1];
                        h.allowOnlyTimelineStyles() || h.setStyles([o], null, c.errors, u)
                    }
                    return p.length ? p.map(function (e) {
                        return e.buildKeyframes()
                    }) : [zA(n, [], [], [], 0, 0, "", !1)]
                }, e.prototype.visitTrigger = function (e, n) {}, e.prototype.visitState = function (e, n) {}, e.prototype.visitTransition = function (e, n) {}, e.prototype.visitAnimateChild = function (e, n) {
                    var t = n.subInstructions.consume(n.element);
                    if (t) {
                        var r = n.createSubContext(e.options),
                            i = n.currentTimeline.currentTime,
                            l = this._visitSubInstructions(t, r, r.options);
                        i != l && n.transformIntoNewTimeline(l)
                    }
                    n.previousNode = e
                }, e.prototype.visitAnimateRef = function (e, n) {
                    var t = n.createSubContext(e.options);
                    t.transformIntoNewTimeline(), this.visitReference(e.animation, t), n.transformIntoNewTimeline(t.currentTimeline.currentTime), n.previousNode = e
                }, e.prototype._visitSubInstructions = function (e, n, t) {
                    var r = n.currentTimeline.currentTime,
                        i = null != t.duration ? yA(t.duration) : null,
                        l = null != t.delay ? yA(t.delay) : null;
                    return 0 !== i && e.forEach(function (e) {
                        var t = n.appendInstructionToTimeline(e, i, l);
                        r = Math.max(r, t.duration + t.delay)
                    }), r
                }, e.prototype.visitReference = function (e, n) {
                    n.updateOptions(e.options, !0), MA(this, e.animation, n), n.previousNode = e
                }, e.prototype.visitSequence = function (e, n) {
                    var t = this,
                        r = n.subContextCount,
                        i = n,
                        l = e.options;
                    if (l && (l.params || l.delay) && ((i = n.createSubContext(l)).transformIntoNewTimeline(), null != l.delay)) {
                        6 == i.previousNode.type && (i.currentTimeline.snapshotCurrentStyles(), i.previousNode = XA);
                        var o = yA(l.delay);
                        i.delayNextStep(o)
                    }
                    e.steps.length && (e.steps.forEach(function (e) {
                        return MA(t, e, i)
                    }), i.currentTimeline.applyStylesToKeyframe(), i.subContextCount > r && i.transformIntoNewTimeline()), n.previousNode = e
                }, e.prototype.visitGroup = function (e, n) {
                    var t = this,
                        r = [],
                        i = n.currentTimeline.currentTime,
                        l = e.options && e.options.delay ? yA(e.options.delay) : 0;
                    e.steps.forEach(function (o) {
                        var u = n.createSubContext(e.options);
                        l && u.delayNextStep(l), MA(t, o, u), i = Math.max(i, u.currentTimeline.currentTime), r.push(u.currentTimeline)
                    }), r.forEach(function (e) {
                        return n.currentTimeline.mergeTimelineCollectedStyles(e)
                    }), n.transformIntoNewTimeline(i), n.previousNode = e
                }, e.prototype._visitTiming = function (e, n) {
                    if (e.dynamic) {
                        var t = e.strValue;
                        return EA(n.params ? NA(t, n.params, n.errors) : t, n.errors)
                    }
                    return {
                        duration: e.duration,
                        delay: e.delay,
                        easing: e.easing
                    }
                }, e.prototype.visitAnimate = function (e, n) {
                    var t = n.currentAnimateTimings = this._visitTiming(e.timings, n),
                        r = n.currentTimeline;
                    t.delay && (n.incrementTime(t.delay), r.snapshotCurrentStyles());
                    var i = e.style;
                    5 == i.type ? this.visitKeyframes(i, n) : (n.incrementTime(t.duration), this.visitStyle(i, n), r.applyStylesToKeyframe()), n.currentAnimateTimings = null, n.previousNode = e
                }, e.prototype.visitStyle = function (e, n) {
                    var t = n.currentTimeline,
                        r = n.currentAnimateTimings;
                    !r && t.getCurrentStyleProperties().length && t.forwardFrame();
                    var i = r && r.easing || e.easing;
                    e.isEmptyStep ? t.applyEmptyStep(i) : t.setStyles(e.styles, i, n.errors, n.options), n.previousNode = e
                }, e.prototype.visitKeyframes = function (e, n) {
                    var t = n.currentAnimateTimings,
                        r = n.currentTimeline.duration,
                        i = t.duration,
                        l = n.createSubContext().currentTimeline;
                    l.easing = t.easing, e.styles.forEach(function (e) {
                        l.forwardTime((e.offset || 0) * i), l.setStyles(e.styles, e.easing, n.errors, n.options), l.applyStylesToKeyframe()
                    }), n.currentTimeline.mergeTimelineCollectedStyles(l), n.transformIntoNewTimeline(r + i), n.previousNode = e
                }, e.prototype.visitQuery = function (e, n) {
                    var t = this,
                        r = n.currentTimeline.currentTime,
                        i = e.options || {},
                        l = i.delay ? yA(i.delay) : 0;
                    l && (6 === n.previousNode.type || 0 == r && n.currentTimeline.getCurrentStyleProperties().length) && (n.currentTimeline.snapshotCurrentStyles(), n.previousNode = XA);
                    var o = r,
                        u = n.invokeQuery(e.selector, e.originalSelector, e.limit, e.includeSelf, !!i.optional, n.errors);
                    n.currentQueryTotal = u.length;
                    var s = null;
                    u.forEach(function (r, i) {
                        n.currentQueryIndex = i;
                        var u = n.createSubContext(e.options, r);
                        l && u.delayNextStep(l), r === n.element && (s = u.currentTimeline), MA(t, e.animation, u), u.currentTimeline.applyStylesToKeyframe(), o = Math.max(o, u.currentTimeline.currentTime)
                    }), n.currentQueryIndex = 0, n.currentQueryTotal = 0, n.transformIntoNewTimeline(o), s && (n.currentTimeline.mergeTimelineCollectedStyles(s), n.currentTimeline.snapshotCurrentStyles()), n.previousNode = e
                }, e.prototype.visitStagger = function (e, n) {
                    var t = n.parentContext,
                        r = n.currentTimeline,
                        i = e.timings,
                        l = Math.abs(i.duration),
                        o = l * (n.currentQueryTotal - 1),
                        u = l * n.currentQueryIndex;
                    switch (i.duration < 0 ? "reverse" : i.easing) {
                        case "reverse":
                            u = o - u;
                            break;
                        case "full":
                            u = t.currentStaggerTime
                    }
                    var s = n.currentTimeline;
                    u && s.delayNextStep(u);
                    var a = s.currentTime;
                    MA(this, e.animation, n), n.previousNode = e, t.currentStaggerTime = r.currentTime - a + (r.startTime - t.currentTimeline.startTime)
                }, e
            }(),
            XA = {},
            JA = function () {
                function e(e, n, t, r, i, l, o, u) {
                    this._driver = e, this.element = n, this.subInstructions = t, this._enterClassName = r, this._leaveClassName = i, this.errors = l, this.timelines = o, this.parentContext = null, this.currentAnimateTimings = null, this.previousNode = XA, this.subContextCount = 0, this.options = {}, this.currentQueryIndex = 0, this.currentQueryTotal = 0, this.currentStaggerTime = 0, this.currentTimeline = u || new ew(this._driver, n, 0), o.push(this.currentTimeline)
                }
                return Object.defineProperty(e.prototype, "params", {
                    get: function () {
                        return this.options.params
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.updateOptions = function (e, n) {
                    var t = this;
                    if (e) {
                        var r = e,
                            i = this.options;
                        null != r.duration && (i.duration = yA(r.duration)), null != r.delay && (i.delay = yA(r.delay));
                        var l = r.params;
                        if (l) {
                            var o = i.params;
                            o || (o = this.options.params = {}), Object.keys(l).forEach(function (e) {
                                n && o.hasOwnProperty(e) || (o[e] = NA(l[e], o, t.errors))
                            })
                        }
                    }
                }, e.prototype._copyOptions = function () {
                    var e = {};
                    if (this.options) {
                        var n = this.options.params;
                        if (n) {
                            var t = e.params = {};
                            Object.keys(n).forEach(function (e) {
                                t[e] = n[e]
                            })
                        }
                    }
                    return e
                }, e.prototype.createSubContext = function (n, t, r) {
                    void 0 === n && (n = null);
                    var i = t || this.element,
                        l = new e(this._driver, i, this.subInstructions, this._enterClassName, this._leaveClassName, this.errors, this.timelines, this.currentTimeline.fork(i, r || 0));
                    return l.previousNode = this.previousNode, l.currentAnimateTimings = this.currentAnimateTimings, l.options = this._copyOptions(), l.updateOptions(n), l.currentQueryIndex = this.currentQueryIndex, l.currentQueryTotal = this.currentQueryTotal, l.parentContext = this, this.subContextCount++, l
                }, e.prototype.transformIntoNewTimeline = function (e) {
                    return this.previousNode = XA, this.currentTimeline = this.currentTimeline.fork(this.element, e), this.timelines.push(this.currentTimeline), this.currentTimeline
                }, e.prototype.appendInstructionToTimeline = function (e, n, t) {
                    var r = {
                            duration: null != n ? n : e.duration,
                            delay: this.currentTimeline.currentTime + (null != t ? t : 0) + e.delay,
                            easing: ""
                        },
                        i = new nw(this._driver, e.element, e.keyframes, e.preStyleProps, e.postStyleProps, r, e.stretchStartingKeyframe);
                    return this.timelines.push(i), r
                }, e.prototype.incrementTime = function (e) {
                    this.currentTimeline.forwardTime(this.currentTimeline.duration + e)
                }, e.prototype.delayNextStep = function (e) {
                    e > 0 && this.currentTimeline.delayNextStep(e)
                }, e.prototype.invokeQuery = function (e, n, t, r, i, l) {
                    var o = [];
                    if (r && o.push(this.element), e.length > 0) {
                        e = (e = e.replace(qA, "." + this._enterClassName)).replace($A, "." + this._leaveClassName);
                        var u = this._driver.query(this.element, e, 1 != t);
                        0 !== t && (u = t < 0 ? u.slice(u.length + t, u.length) : u.slice(0, t)), o.push.apply(o, c(u))
                    }
                    return i || 0 != o.length || l.push('`query("' + n + '")` returned zero elements. (Use `query("' + n + '", { optional: true })` if you wish to allow this.)'), o
                }, e
            }(),
            ew = function () {
                function e(e, n, t, r) {
                    this._driver = e, this.element = n, this.startTime = t, this._elementTimelineStylesLookup = r, this.duration = 0, this._previousKeyframe = {}, this._currentKeyframe = {}, this._keyframes = new Map, this._styleSummary = {}, this._pendingStyles = {}, this._backFill = {}, this._currentEmptyStepKeyframe = null, this._elementTimelineStylesLookup || (this._elementTimelineStylesLookup = new Map), this._localTimelineStyles = Object.create(this._backFill, {}), this._globalTimelineStyles = this._elementTimelineStylesLookup.get(n), this._globalTimelineStyles || (this._globalTimelineStyles = this._localTimelineStyles, this._elementTimelineStylesLookup.set(n, this._localTimelineStyles)), this._loadKeyframe()
                }
                return e.prototype.containsAnimation = function () {
                    switch (this._keyframes.size) {
                        case 0:
                            return !1;
                        case 1:
                            return this.getCurrentStyleProperties().length > 0;
                        default:
                            return !0
                    }
                }, e.prototype.getCurrentStyleProperties = function () {
                    return Object.keys(this._currentKeyframe)
                }, Object.defineProperty(e.prototype, "currentTime", {
                    get: function () {
                        return this.startTime + this.duration
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.delayNextStep = function (e) {
                    var n = 1 == this._keyframes.size && Object.keys(this._pendingStyles).length;
                    this.duration || n ? (this.forwardTime(this.currentTime + e), n && this.snapshotCurrentStyles()) : this.startTime += e
                }, e.prototype.fork = function (n, t) {
                    return this.applyStylesToKeyframe(), new e(this._driver, n, t || this.currentTime, this._elementTimelineStylesLookup)
                }, e.prototype._loadKeyframe = function () {
                    this._currentKeyframe && (this._previousKeyframe = this._currentKeyframe), this._currentKeyframe = this._keyframes.get(this.duration), this._currentKeyframe || (this._currentKeyframe = Object.create(this._backFill, {}), this._keyframes.set(this.duration, this._currentKeyframe))
                }, e.prototype.forwardFrame = function () {
                    this.duration += 1, this._loadKeyframe()
                }, e.prototype.forwardTime = function (e) {
                    this.applyStylesToKeyframe(), this.duration = e, this._loadKeyframe()
                }, e.prototype._updateStyle = function (e, n) {
                    this._localTimelineStyles[e] = n, this._globalTimelineStyles[e] = n, this._styleSummary[e] = {
                        time: this.currentTime,
                        value: n
                    }
                }, e.prototype.allowOnlyTimelineStyles = function () {
                    return this._currentEmptyStepKeyframe !== this._currentKeyframe
                }, e.prototype.applyEmptyStep = function (e) {
                    var n = this;
                    e && (this._previousKeyframe.easing = e), Object.keys(this._globalTimelineStyles).forEach(function (e) {
                        n._backFill[e] = n._globalTimelineStyles[e] || WI, n._currentKeyframe[e] = WI
                    }), this._currentEmptyStepKeyframe = this._currentKeyframe
                }, e.prototype.setStyles = function (e, n, t, r) {
                    var i = this;
                    n && (this._previousKeyframe.easing = n);
                    var l = r && r.params || {},
                        o = function (e, n) {
                            var t, r = {};
                            return e.forEach(function (e) {
                                "*" === e ? (t = t || Object.keys(n)).forEach(function (e) {
                                    r[e] = WI
                                }) : OA(e, !1, r)
                            }), r
                        }(e, this._globalTimelineStyles);
                    Object.keys(o).forEach(function (e) {
                        var n = NA(o[e], l, t);
                        i._pendingStyles[e] = n, i._localTimelineStyles.hasOwnProperty(e) || (i._backFill[e] = i._globalTimelineStyles.hasOwnProperty(e) ? i._globalTimelineStyles[e] : WI), i._updateStyle(e, n)
                    })
                }, e.prototype.applyStylesToKeyframe = function () {
                    var e = this,
                        n = this._pendingStyles,
                        t = Object.keys(n);
                    0 != t.length && (this._pendingStyles = {}, t.forEach(function (t) {
                        e._currentKeyframe[t] = n[t]
                    }), Object.keys(this._localTimelineStyles).forEach(function (n) {
                        e._currentKeyframe.hasOwnProperty(n) || (e._currentKeyframe[n] = e._localTimelineStyles[n])
                    }))
                }, e.prototype.snapshotCurrentStyles = function () {
                    var e = this;
                    Object.keys(this._localTimelineStyles).forEach(function (n) {
                        var t = e._localTimelineStyles[n];
                        e._pendingStyles[n] = t, e._updateStyle(n, t)
                    })
                }, e.prototype.getFinalKeyframe = function () {
                    return this._keyframes.get(this.duration)
                }, Object.defineProperty(e.prototype, "properties", {
                    get: function () {
                        var e = [];
                        for (var n in this._currentKeyframe) e.push(n);
                        return e
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.mergeTimelineCollectedStyles = function (e) {
                    var n = this;
                    Object.keys(e._styleSummary).forEach(function (t) {
                        var r = n._styleSummary[t],
                            i = e._styleSummary[t];
                        (!r || i.time > r.time) && n._updateStyle(t, i.value)
                    })
                }, e.prototype.buildKeyframes = function () {
                    var e = this;
                    this.applyStylesToKeyframe();
                    var n = new Set,
                        t = new Set,
                        r = 1 === this._keyframes.size && 0 === this.duration,
                        i = [];
                    this._keyframes.forEach(function (l, o) {
                        var u = OA(l, !0);
                        Object.keys(u).forEach(function (e) {
                            var r = u[e];
                            r == $I ? n.add(e) : r == WI && t.add(e)
                        }), r || (u.offset = o / e.duration), i.push(u)
                    });
                    var l = n.size ? PA(n.values()) : [],
                        o = t.size ? PA(t.values()) : [];
                    if (r) {
                        var u = i[0],
                            s = bA(u);
                        u.offset = 0, s.offset = 1, i = [u, s]
                    }
                    return zA(this.element, i, l, o, this.duration, this.startTime, this.easing, !1)
                }, e
            }(),
            nw = function (e) {
                function n(n, t, r, i, l, o, u) {
                    void 0 === u && (u = !1);
                    var s = e.call(this, n, t, o.delay) || this;
                    return s.element = t, s.keyframes = r, s.preStyleProps = i, s.postStyleProps = l, s._stretchStartingKeyframe = u, s.timings = {
                        duration: o.duration,
                        delay: o.delay,
                        easing: o.easing
                    }, s
                }
                return i(n, e), n.prototype.containsAnimation = function () {
                    return this.keyframes.length > 1
                }, n.prototype.buildKeyframes = function () {
                    var e = this.keyframes,
                        n = this.timings,
                        t = n.delay,
                        r = n.duration,
                        i = n.easing;
                    if (this._stretchStartingKeyframe && t) {
                        var l = [],
                            o = r + t,
                            u = t / o,
                            s = OA(e[0], !1);
                        s.offset = 0, l.push(s);
                        var a = OA(e[0], !1);
                        a.offset = tw(u), l.push(a);
                        for (var c = e.length - 1, p = 1; p <= c; p++) {
                            var h = OA(e[p], !1);
                            h.offset = tw((t + h.offset * r) / o), l.push(h)
                        }
                        r = o, t = 0, i = "", e = l
                    }
                    return zA(this.element, e, this.preStyleProps, this.postStyleProps, r, t, i, !0)
                }, n
            }(ew);

        function tw(e, n) {
            void 0 === n && (n = 3);
            var t = Math.pow(10, n - 1);
            return Math.round(e * t) / t
        }
        var rw = function () {
                return function () {}
            }(),
            iw = function (e) {
                function n() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return i(n, e), n.prototype.normalizePropertyName = function (e, n) {
                    return kA(e)
                }, n.prototype.normalizeStyleValue = function (e, n, t, r) {
                    var i = "",
                        l = t.toString().trim();
                    if (lw[n] && 0 !== t && "0" !== t)
                        if ("number" == typeof t) i = "px";
                        else {
                            var o = t.match(/^[+-]?[\d\.]+([a-z]*)$/);
                            o && 0 == o[1].length && r.push("Please provide a CSS unit value for " + e + ":" + t)
                        } return l + i
                }, n
            }(rw),
            lw = ow("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(","));

        function ow(e) {
            var n = {};
            return e.forEach(function (e) {
                return n[e] = !0
            }), n
        }

        function uw(e, n, t, r, i, l, o, u, s, a, c, p, h) {
            return {
                type: 0,
                element: e,
                triggerName: n,
                isRemovalTransition: i,
                fromState: t,
                fromStyles: l,
                toState: r,
                toStyles: o,
                timelines: u,
                queriedElements: s,
                preStyleProps: a,
                postStyleProps: c,
                totalTime: p,
                errors: h
            }
        }
        var sw = {},
            aw = function () {
                function e(e, n, t) {
                    this._triggerName = e, this.ast = n, this._stateStyles = t
                }
                return e.prototype.match = function (e, n, t, r) {
                    return function (e, n, t, r, i) {
                        return e.some(function (e) {
                            return e(n, t, r, i)
                        })
                    }(this.ast.matchers, e, n, t, r)
                }, e.prototype.buildStyles = function (e, n, t) {
                    var r = this._stateStyles["*"],
                        i = this._stateStyles[e],
                        l = r ? r.buildStyles(n, t) : {};
                    return i ? i.buildStyles(n, t) : l
                }, e.prototype.build = function (e, n, t, r, i, o, u, s, a, c) {
                    var p = [],
                        h = this.ast.options && this.ast.options.params || sw,
                        d = this.buildStyles(t, u && u.params || sw, p),
                        f = s && s.params || sw,
                        g = this.buildStyles(r, f, p),
                        v = new Set,
                        m = new Map,
                        y = new Map,
                        S = "void" === r,
                        E = {
                            params: l({}, h, f)
                        },
                        b = c ? [] : QA(e, n, this.ast.animation, i, o, d, g, E, a, p),
                        O = 0;
                    if (b.forEach(function (e) {
                            O = Math.max(e.duration + e.delay, O)
                        }), p.length) return uw(n, this._triggerName, t, r, S, d, g, [], [], m, y, O, p);
                    b.forEach(function (e) {
                        var t = e.element,
                            r = tA(m, t, {});
                        e.preStyleProps.forEach(function (e) {
                            return r[e] = !0
                        });
                        var i = tA(y, t, {});
                        e.postStyleProps.forEach(function (e) {
                            return i[e] = !0
                        }), t !== n && v.add(t)
                    });
                    var R = PA(v.values());
                    return uw(n, this._triggerName, t, r, S, d, g, b, R, m, y, O)
                }, e
            }(),
            cw = function () {
                function e(e, n) {
                    this.styles = e, this.defaultParams = n
                }
                return e.prototype.buildStyles = function (e, n) {
                    var t = {},
                        r = bA(this.defaultParams);
                    return Object.keys(e).forEach(function (n) {
                        var t = e[n];
                        null != t && (r[n] = t)
                    }), this.styles.styles.forEach(function (e) {
                        if ("string" != typeof e) {
                            var i = e;
                            Object.keys(i).forEach(function (e) {
                                var l = i[e];
                                l.length > 1 && (l = NA(l, r, n)), t[e] = l
                            })
                        }
                    }), t
                }, e
            }(),
            pw = function () {
                function e(e, n) {
                    var t = this;
                    this.name = e, this.ast = n, this.transitionFactories = [], this.states = {}, n.states.forEach(function (e) {
                        t.states[e.name] = new cw(e.style, e.options && e.options.params || {})
                    }), hw(this.states, "true", "1"), hw(this.states, "false", "0"), n.transitions.forEach(function (n) {
                        t.transitionFactories.push(new aw(e, n, t.states))
                    }), this.fallbackTransition = new aw(e, {
                        type: 1,
                        animation: {
                            type: 2,
                            steps: [],
                            options: null
                        },
                        matchers: [function (e, n) {
                            return !0
                        }],
                        options: null,
                        queryCount: 0,
                        depCount: 0
                    }, this.states)
                }
                return Object.defineProperty(e.prototype, "containsQueries", {
                    get: function () {
                        return this.ast.queryCount > 0
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.matchTransition = function (e, n, t, r) {
                    return this.transitionFactories.find(function (i) {
                        return i.match(e, n, t, r)
                    }) || null
                }, e.prototype.matchStyles = function (e, n, t) {
                    return this.fallbackTransition.buildStyles(e, n, t)
                }, e
            }();

        function hw(e, n, t) {
            e.hasOwnProperty(n) ? e.hasOwnProperty(t) || (e[t] = e[n]) : e.hasOwnProperty(t) && (e[n] = e[t])
        }
        var dw = new KA,
            fw = function () {
                function e(e, n, t) {
                    this.bodyNode = e, this._driver = n, this._normalizer = t, this._animations = {}, this._playersById = {}, this.players = []
                }
                return e.prototype.register = function (e, n) {
                    var t = [],
                        r = GA(this._driver, n, t);
                    if (t.length) throw new Error("Unable to build the animation due to the following errors: " + t.join("\n"));
                    this._animations[e] = r
                }, e.prototype._buildPlayer = function (e, n, t) {
                    var r = e.element,
                        i = XI(0, this._normalizer, 0, e.keyframes, n, t);
                    return this._driver.animate(r, i, e.duration, e.delay, e.easing, [], !0)
                }, e.prototype.create = function (e, n, t) {
                    var r = this;
                    void 0 === t && (t = {});
                    var i, l = [],
                        o = this._animations[e],
                        u = new Map;
                    if (o ? (i = QA(this._driver, n, o, "ng-enter", "ng-leave", {}, {}, t, dw, l)).forEach(function (e) {
                            var n = tA(u, e.element, {});
                            e.postStyleProps.forEach(function (e) {
                                return n[e] = null
                            })
                        }) : (l.push("The requested animation doesn't exist or has already been destroyed"), i = []), l.length) throw new Error("Unable to create the animation due to the following errors: " + l.join("\n"));
                    u.forEach(function (e, n) {
                        Object.keys(e).forEach(function (t) {
                            e[t] = r._driver.computeStyle(n, t, WI)
                        })
                    });
                    var s = ZI(i.map(function (e) {
                        var n = u.get(e.element);
                        return r._buildPlayer(e, {}, n)
                    }));
                    return this._playersById[e] = s, s.onDestroy(function () {
                        return r.destroy(e)
                    }), this.players.push(s), s
                }, e.prototype.destroy = function (e) {
                    var n = this._getPlayer(e);
                    n.destroy(), delete this._playersById[e];
                    var t = this.players.indexOf(n);
                    t >= 0 && this.players.splice(t, 1)
                }, e.prototype._getPlayer = function (e) {
                    var n = this._playersById[e];
                    if (!n) throw new Error("Unable to find the timeline player referenced by " + e);
                    return n
                }, e.prototype.listen = function (e, n, t, r) {
                    var i = nA(n, "", "", "");
                    return JI(this._getPlayer(e), t, i, r),
                        function () {}
                }, e.prototype.command = function (e, n, t, r) {
                    if ("register" != t)
                        if ("create" != t) {
                            var i = this._getPlayer(e);
                            switch (t) {
                                case "play":
                                    i.play();
                                    break;
                                case "pause":
                                    i.pause();
                                    break;
                                case "reset":
                                    i.reset();
                                    break;
                                case "restart":
                                    i.restart();
                                    break;
                                case "finish":
                                    i.finish();
                                    break;
                                case "init":
                                    i.init();
                                    break;
                                case "setPosition":
                                    i.setPosition(parseFloat(r[0]));
                                    break;
                                case "destroy":
                                    this.destroy(e)
                            }
                        } else this.create(e, n, r[0] || {});
                    else this.register(e, r[0])
                }, e
            }(),
            gw = [],
            vw = {
                namespaceId: "",
                setForRemoval: !1,
                setForMove: !1,
                hasAnimation: !1,
                removedBeforeQueried: !1
            },
            mw = {
                namespaceId: "",
                setForMove: !1,
                setForRemoval: !1,
                hasAnimation: !1,
                removedBeforeQueried: !0
            },
            yw = "__ng_removed",
            Sw = function () {
                function e(e, n) {
                    void 0 === n && (n = ""), this.namespaceId = n;
                    var t = e && e.hasOwnProperty("value");
                    if (this.value = function (e) {
                            return null != e ? e : null
                        }(t ? e.value : e), t) {
                        var r = bA(e);
                        delete r.value, this.options = r
                    } else this.options = {};
                    this.options.params || (this.options.params = {})
                }
                return Object.defineProperty(e.prototype, "params", {
                    get: function () {
                        return this.options.params
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.absorbOptions = function (e) {
                    var n = e.params;
                    if (n) {
                        var t = this.options.params;
                        Object.keys(n).forEach(function (e) {
                            null == t[e] && (t[e] = n[e])
                        })
                    }
                }, e
            }(),
            Ew = new Sw("void"),
            bw = function () {
                function e(e, n, t) {
                    this.id = e, this.hostElement = n, this._engine = t, this.players = [], this._triggers = {}, this._queue = [], this._elementListeners = new Map, this._hostClassName = "ng-tns-" + e, ww(n, this._hostClassName)
                }
                return e.prototype.listen = function (e, n, t, r) {
                    var i, l = this;
                    if (!this._triggers.hasOwnProperty(n)) throw new Error('Unable to listen on the animation trigger event "' + t + '" because the animation trigger "' + n + "\" doesn't exist!");
                    if (null == t || 0 == t.length) throw new Error('Unable to listen on the animation trigger "' + n + '" because the provided event is undefined!');
                    if ("start" != (i = t) && "done" != i) throw new Error('The provided animation trigger event "' + t + '" for the animation trigger "' + n + '" is not supported!');
                    var o = tA(this._elementListeners, e, []),
                        u = {
                            name: n,
                            phase: t,
                            callback: r
                        };
                    o.push(u);
                    var s = tA(this._engine.statesByElement, e, {});
                    return s.hasOwnProperty(n) || (ww(e, "ng-trigger"), ww(e, "ng-trigger-" + n), s[n] = Ew),
                        function () {
                            l._engine.afterFlush(function () {
                                var e = o.indexOf(u);
                                e >= 0 && o.splice(e, 1), l._triggers[n] || delete s[n]
                            })
                        }
                }, e.prototype.register = function (e, n) {
                    return !this._triggers[e] && (this._triggers[e] = n, !0)
                }, e.prototype._getTrigger = function (e) {
                    var n = this._triggers[e];
                    if (!n) throw new Error('The provided animation trigger "' + e + '" has not been registered!');
                    return n
                }, e.prototype.trigger = function (e, n, t, r) {
                    var i = this;
                    void 0 === r && (r = !0);
                    var l = this._getTrigger(n),
                        o = new Rw(this.id, n, e),
                        u = this._engine.statesByElement.get(e);
                    u || (ww(e, "ng-trigger"), ww(e, "ng-trigger-" + n), this._engine.statesByElement.set(e, u = {}));
                    var s = u[n],
                        a = new Sw(t, this.id);
                    if (!(t && t.hasOwnProperty("value")) && s && a.absorbOptions(s.options), u[n] = a, s || (s = Ew), "void" === a.value || s.value !== a.value) {
                        var c = tA(this._engine.playersByElement, e, []);
                        c.forEach(function (e) {
                            e.namespaceId == i.id && e.triggerName == n && e.queued && e.destroy()
                        });
                        var p = l.matchTransition(s.value, a.value, e, a.params),
                            h = !1;
                        if (!p) {
                            if (!r) return;
                            p = l.fallbackTransition, h = !0
                        }
                        return this._engine.totalQueuedPlayers++, this._queue.push({
                            element: e,
                            triggerName: n,
                            transition: p,
                            fromState: s,
                            toState: a,
                            player: o,
                            isFallbackTransition: h
                        }), h || (ww(e, "ng-animate-queued"), o.onStart(function () {
                            Nw(e, "ng-animate-queued")
                        })), o.onDone(function () {
                            var n = i.players.indexOf(o);
                            n >= 0 && i.players.splice(n, 1);
                            var t = i._engine.playersByElement.get(e);
                            if (t) {
                                var r = t.indexOf(o);
                                r >= 0 && t.splice(r, 1)
                            }
                        }), this.players.push(o), c.push(o), o
                    }
                    if (! function (e, n) {
                            var t = Object.keys(e),
                                r = Object.keys(n);
                            if (t.length != r.length) return !1;
                            for (var i = 0; i < t.length; i++) {
                                var l = t[i];
                                if (!n.hasOwnProperty(l) || e[l] !== n[l]) return !1
                            }
                            return !0
                        }(s.params, a.params)) {
                        var d = [],
                            f = l.matchStyles(s.value, s.params, d),
                            g = l.matchStyles(a.value, a.params, d);
                        d.length ? this._engine.reportError(d) : this._engine.afterFlush(function () {
                            _A(e, f), CA(e, g)
                        })
                    }
                }, e.prototype.deregister = function (e) {
                    var n = this;
                    delete this._triggers[e], this._engine.statesByElement.forEach(function (n, t) {
                        delete n[e]
                    }), this._elementListeners.forEach(function (t, r) {
                        n._elementListeners.set(r, t.filter(function (n) {
                            return n.name != e
                        }))
                    })
                }, e.prototype.clearElementCache = function (e) {
                    this._engine.statesByElement.delete(e), this._elementListeners.delete(e);
                    var n = this._engine.playersByElement.get(e);
                    n && (n.forEach(function (e) {
                        return e.destroy()
                    }), this._engine.playersByElement.delete(e))
                }, e.prototype._signalRemovalForInnerTriggers = function (e, n, t) {
                    var r = this;
                    void 0 === t && (t = !1), this._engine.driver.query(e, ".ng-trigger", !0).forEach(function (e) {
                        if (!e[yw]) {
                            var t = r._engine.fetchNamespacesByElement(e);
                            t.size ? t.forEach(function (t) {
                                return t.triggerLeaveAnimation(e, n, !1, !0)
                            }) : r.clearElementCache(e)
                        }
                    })
                }, e.prototype.triggerLeaveAnimation = function (e, n, t, r) {
                    var i = this,
                        l = this._engine.statesByElement.get(e);
                    if (l) {
                        var o = [];
                        if (Object.keys(l).forEach(function (n) {
                                if (i._triggers[n]) {
                                    var t = i.trigger(e, n, "void", r);
                                    t && o.push(t)
                                }
                            }), o.length) return this._engine.markElementAsRemoved(this.id, e, !0, n), t && ZI(o).onDone(function () {
                            return i._engine.processLeaveNode(e)
                        }), !0
                    }
                    return !1
                }, e.prototype.prepareLeaveAnimationListeners = function (e) {
                    var n = this,
                        t = this._elementListeners.get(e);
                    if (t) {
                        var r = new Set;
                        t.forEach(function (t) {
                            var i = t.name;
                            if (!r.has(i)) {
                                r.add(i);
                                var l = n._triggers[i].fallbackTransition,
                                    o = n._engine.statesByElement.get(e)[i] || Ew,
                                    u = new Sw("void"),
                                    s = new Rw(n.id, i, e);
                                n._engine.totalQueuedPlayers++, n._queue.push({
                                    element: e,
                                    triggerName: i,
                                    transition: l,
                                    fromState: o,
                                    toState: u,
                                    player: s,
                                    isFallbackTransition: !0
                                })
                            }
                        })
                    }
                }, e.prototype.removeNode = function (e, n) {
                    var t = this,
                        r = this._engine;
                    if (e.childElementCount && this._signalRemovalForInnerTriggers(e, n, !0), !this.triggerLeaveAnimation(e, n, !0)) {
                        var i = !1;
                        if (r.totalAnimations) {
                            var l = r.players.length ? r.playersByQueriedElement.get(e) : [];
                            if (l && l.length) i = !0;
                            else
                                for (var o = e; o = o.parentNode;)
                                    if (r.statesByElement.get(o)) {
                                        i = !0;
                                        break
                                    }
                        }
                        this.prepareLeaveAnimationListeners(e), i ? r.markElementAsRemoved(this.id, e, !1, n) : (r.afterFlush(function () {
                            return t.clearElementCache(e)
                        }), r.destroyInnerAnimations(e), r._onRemovalComplete(e, n))
                    }
                }, e.prototype.insertNode = function (e, n) {
                    ww(e, this._hostClassName)
                }, e.prototype.drainQueuedTransitions = function (e) {
                    var n = this,
                        t = [];
                    return this._queue.forEach(function (r) {
                        var i = r.player;
                        if (!i.destroyed) {
                            var l = r.element,
                                o = n._elementListeners.get(l);
                            o && o.forEach(function (n) {
                                if (n.name == r.triggerName) {
                                    var t = nA(l, r.triggerName, r.fromState.value, r.toState.value);
                                    t._data = e, JI(r.player, n.phase, t, n.callback)
                                }
                            }), i.markedForDestroy ? n._engine.afterFlush(function () {
                                i.destroy()
                            }) : t.push(r)
                        }
                    }), this._queue = [], t.sort(function (e, t) {
                        var r = e.transition.ast.depCount,
                            i = t.transition.ast.depCount;
                        return 0 == r || 0 == i ? r - i : n._engine.driver.containsElement(e.element, t.element) ? 1 : -1
                    })
                }, e.prototype.destroy = function (e) {
                    this.players.forEach(function (e) {
                        return e.destroy()
                    }), this._signalRemovalForInnerTriggers(this.hostElement, e)
                }, e.prototype.elementContainsData = function (e) {
                    var n = !1;
                    return this._elementListeners.has(e) && (n = !0), !!this._queue.find(function (n) {
                        return n.element === e
                    }) || n
                }, e
            }(),
            Ow = function () {
                function e(e, n, t) {
                    this.bodyNode = e, this.driver = n, this._normalizer = t, this.players = [], this.newHostElements = new Map, this.playersByElement = new Map, this.playersByQueriedElement = new Map, this.statesByElement = new Map, this.disabledNodes = new Set, this.totalAnimations = 0, this.totalQueuedPlayers = 0, this._namespaceLookup = {}, this._namespaceList = [], this._flushFns = [], this._whenQuietFns = [], this.namespacesByHostElement = new Map, this.collectedEnterElements = [], this.collectedLeaveElements = [], this.onRemovalComplete = function (e, n) {}
                }
                return e.prototype._onRemovalComplete = function (e, n) {
                    this.onRemovalComplete(e, n)
                }, Object.defineProperty(e.prototype, "queuedPlayers", {
                    get: function () {
                        var e = [];
                        return this._namespaceList.forEach(function (n) {
                            n.players.forEach(function (n) {
                                n.queued && e.push(n)
                            })
                        }), e
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.createNamespace = function (e, n) {
                    var t = new bw(e, n, this);
                    return n.parentNode ? this._balanceNamespaceList(t, n) : (this.newHostElements.set(n, t), this.collectEnterElement(n)), this._namespaceLookup[e] = t
                }, e.prototype._balanceNamespaceList = function (e, n) {
                    var t = this._namespaceList.length - 1;
                    if (t >= 0) {
                        for (var r = !1, i = t; i >= 0; i--)
                            if (this.driver.containsElement(this._namespaceList[i].hostElement, n)) {
                                this._namespaceList.splice(i + 1, 0, e), r = !0;
                                break
                            } r || this._namespaceList.splice(0, 0, e)
                    } else this._namespaceList.push(e);
                    return this.namespacesByHostElement.set(n, e), e
                }, e.prototype.register = function (e, n) {
                    var t = this._namespaceLookup[e];
                    return t || (t = this.createNamespace(e, n)), t
                }, e.prototype.registerTrigger = function (e, n, t) {
                    var r = this._namespaceLookup[e];
                    r && r.register(n, t) && this.totalAnimations++
                }, e.prototype.destroy = function (e, n) {
                    var t = this;
                    if (e) {
                        var r = this._fetchNamespace(e);
                        this.afterFlush(function () {
                            t.namespacesByHostElement.delete(r.hostElement), delete t._namespaceLookup[e];
                            var n = t._namespaceList.indexOf(r);
                            n >= 0 && t._namespaceList.splice(n, 1)
                        }), this.afterFlushAnimationsDone(function () {
                            return r.destroy(n)
                        })
                    }
                }, e.prototype._fetchNamespace = function (e) {
                    return this._namespaceLookup[e]
                }, e.prototype.fetchNamespacesByElement = function (e) {
                    var n = new Set,
                        t = this.statesByElement.get(e);
                    if (t)
                        for (var r = Object.keys(t), i = 0; i < r.length; i++) {
                            var l = t[r[i]].namespaceId;
                            if (l) {
                                var o = this._fetchNamespace(l);
                                o && n.add(o)
                            }
                        }
                    return n
                }, e.prototype.trigger = function (e, n, t, r) {
                    if (Tw(n)) {
                        var i = this._fetchNamespace(e);
                        if (i) return i.trigger(n, t, r), !0
                    }
                    return !1
                }, e.prototype.insertNode = function (e, n, t, r) {
                    if (Tw(n)) {
                        var i = n[yw];
                        if (i && i.setForRemoval) {
                            i.setForRemoval = !1, i.setForMove = !0;
                            var l = this.collectedLeaveElements.indexOf(n);
                            l >= 0 && this.collectedLeaveElements.splice(l, 1)
                        }
                        if (e) {
                            var o = this._fetchNamespace(e);
                            o && o.insertNode(n, t)
                        }
                        r && this.collectEnterElement(n)
                    }
                }, e.prototype.collectEnterElement = function (e) {
                    this.collectedEnterElements.push(e)
                }, e.prototype.markElementAsDisabled = function (e, n) {
                    n ? this.disabledNodes.has(e) || (this.disabledNodes.add(e), ww(e, "ng-animate-disabled")) : this.disabledNodes.has(e) && (this.disabledNodes.delete(e), Nw(e, "ng-animate-disabled"))
                }, e.prototype.removeNode = function (e, n, t) {
                    if (Tw(n)) {
                        var r = e ? this._fetchNamespace(e) : null;
                        r ? r.removeNode(n, t) : this.markElementAsRemoved(e, n, !1, t)
                    } else this._onRemovalComplete(n, t)
                }, e.prototype.markElementAsRemoved = function (e, n, t, r) {
                    this.collectedLeaveElements.push(n), n[yw] = {
                        namespaceId: e,
                        setForRemoval: r,
                        hasAnimation: t,
                        removedBeforeQueried: !1
                    }
                }, e.prototype.listen = function (e, n, t, r, i) {
                    return Tw(n) ? this._fetchNamespace(e).listen(n, t, r, i) : function () {}
                }, e.prototype._buildInstruction = function (e, n, t, r, i) {
                    return e.transition.build(this.driver, e.element, e.fromState.value, e.toState.value, t, r, e.fromState.options, e.toState.options, n, i)
                }, e.prototype.destroyInnerAnimations = function (e) {
                    var n = this,
                        t = this.driver.query(e, ".ng-trigger", !0);
                    t.forEach(function (e) {
                        return n.destroyActiveAnimationsForElement(e)
                    }), 0 != this.playersByQueriedElement.size && (t = this.driver.query(e, ".ng-animating", !0)).forEach(function (e) {
                        return n.finishActiveQueriedAnimationOnElement(e)
                    })
                }, e.prototype.destroyActiveAnimationsForElement = function (e) {
                    var n = this.playersByElement.get(e);
                    n && n.forEach(function (e) {
                        e.queued ? e.markedForDestroy = !0 : e.destroy()
                    })
                }, e.prototype.finishActiveQueriedAnimationOnElement = function (e) {
                    var n = this.playersByQueriedElement.get(e);
                    n && n.forEach(function (e) {
                        return e.finish()
                    })
                }, e.prototype.whenRenderingDone = function () {
                    var e = this;
                    return new Promise(function (n) {
                        if (e.players.length) return ZI(e.players).onDone(function () {
                            return n()
                        });
                        n()
                    })
                }, e.prototype.processLeaveNode = function (e) {
                    var n = this,
                        t = e[yw];
                    if (t && t.setForRemoval) {
                        if (e[yw] = vw, t.namespaceId) {
                            this.destroyInnerAnimations(e);
                            var r = this._fetchNamespace(t.namespaceId);
                            r && r.clearElementCache(e)
                        }
                        this._onRemovalComplete(e, t.setForRemoval)
                    }
                    this.driver.matchesElement(e, ".ng-animate-disabled") && this.markElementAsDisabled(e, !1), this.driver.query(e, ".ng-animate-disabled", !0).forEach(function (e) {
                        n.markElementAsDisabled(e, !1)
                    })
                }, e.prototype.flush = function (e) {
                    var n = this;
                    void 0 === e && (e = -1);
                    var t = [];
                    if (this.newHostElements.size && (this.newHostElements.forEach(function (e, t) {
                            return n._balanceNamespaceList(e, t)
                        }), this.newHostElements.clear()), this.totalAnimations && this.collectedEnterElements.length)
                        for (var r = 0; r < this.collectedEnterElements.length; r++) ww(this.collectedEnterElements[r], "ng-star-inserted");
                    if (this._namespaceList.length && (this.totalQueuedPlayers || this.collectedLeaveElements.length)) {
                        var i = [];
                        try {
                            t = this._flushAnimations(i, e)
                        } finally {
                            for (r = 0; r < i.length; r++) i[r]()
                        }
                    } else
                        for (r = 0; r < this.collectedLeaveElements.length; r++) this.processLeaveNode(this.collectedLeaveElements[r]);
                    if (this.totalQueuedPlayers = 0, this.collectedEnterElements.length = 0, this.collectedLeaveElements.length = 0, this._flushFns.forEach(function (e) {
                            return e()
                        }), this._flushFns = [], this._whenQuietFns.length) {
                        var l = this._whenQuietFns;
                        this._whenQuietFns = [], t.length ? ZI(t).onDone(function () {
                            l.forEach(function (e) {
                                return e()
                            })
                        }) : l.forEach(function (e) {
                            return e()
                        })
                    }
                }, e.prototype.reportError = function (e) {
                    throw new Error("Unable to process animations due to the following failed trigger transitions\n " + e.join("\n"))
                }, e.prototype._flushAnimations = function (e, n) {
                    var t = this,
                        r = new KA,
                        i = [],
                        o = new Map,
                        u = [],
                        s = new Map,
                        a = new Map,
                        p = new Map,
                        h = new Set;
                    this.disabledNodes.forEach(function (e) {
                        h.add(e);
                        for (var n = t.driver.query(e, ".ng-animate-queued", !0), r = 0; r < n.length; r++) h.add(n[r])
                    });
                    var d = this.bodyNode,
                        f = Array.from(this.statesByElement.keys()),
                        g = Iw(f, this.collectedEnterElements),
                        v = new Map,
                        m = 0;
                    g.forEach(function (e, n) {
                        var t = "ng-enter" + m++;
                        v.set(n, t), e.forEach(function (e) {
                            return ww(e, t)
                        })
                    });
                    for (var y = [], S = new Set, E = new Set, b = 0; b < this.collectedLeaveElements.length; b++)(U = (F = this.collectedLeaveElements[b])[yw]) && U.setForRemoval && (y.push(F), S.add(F), U.hasAnimation ? this.driver.query(F, ".ng-star-inserted", !0).forEach(function (e) {
                        return S.add(e)
                    }) : E.add(F));
                    var O = new Map,
                        R = Iw(f, Array.from(S));
                    R.forEach(function (e, n) {
                        var t = "ng-leave" + m++;
                        O.set(n, t), e.forEach(function (e) {
                            return ww(e, t)
                        })
                    }), e.push(function () {
                        g.forEach(function (e, n) {
                            var t = v.get(n);
                            e.forEach(function (e) {
                                return Nw(e, t)
                            })
                        }), R.forEach(function (e, n) {
                            var t = O.get(n);
                            e.forEach(function (e) {
                                return Nw(e, t)
                            })
                        }), y.forEach(function (e) {
                            t.processLeaveNode(e)
                        })
                    });
                    for (var T = [], C = [], _ = this._namespaceList.length - 1; _ >= 0; _--) this._namespaceList[_].drainQueuedTransitions(n).forEach(function (e) {
                        var n = e.player,
                            l = e.element;
                        if (T.push(n), t.collectedEnterElements.length) {
                            var o = l[yw];
                            if (o && o.setForMove) return void n.destroy()
                        }
                        var c = !d || !t.driver.containsElement(d, l),
                            h = O.get(l),
                            f = v.get(l),
                            g = t._buildInstruction(e, r, f, h, c);
                        if (g.errors && g.errors.length) C.push(g);
                        else {
                            if (c) return n.onStart(function () {
                                return _A(l, g.fromStyles)
                            }), n.onDestroy(function () {
                                return CA(l, g.toStyles)
                            }), void i.push(n);
                            if (e.isFallbackTransition) return n.onStart(function () {
                                return _A(l, g.fromStyles)
                            }), n.onDestroy(function () {
                                return CA(l, g.toStyles)
                            }), void i.push(n);
                            g.timelines.forEach(function (e) {
                                return e.stretchStartingKeyframe = !0
                            }), r.append(l, g.timelines), u.push({
                                instruction: g,
                                player: n,
                                element: l
                            }), g.queriedElements.forEach(function (e) {
                                return tA(s, e, []).push(n)
                            }), g.preStyleProps.forEach(function (e, n) {
                                var t = Object.keys(e);
                                if (t.length) {
                                    var r = a.get(n);
                                    r || a.set(n, r = new Set), t.forEach(function (e) {
                                        return r.add(e)
                                    })
                                }
                            }), g.postStyleProps.forEach(function (e, n) {
                                var t = Object.keys(e),
                                    r = p.get(n);
                                r || p.set(n, r = new Set), t.forEach(function (e) {
                                    return r.add(e)
                                })
                            })
                        }
                    });
                    if (C.length) {
                        var I = [];
                        C.forEach(function (e) {
                            I.push("@" + e.triggerName + " has failed due to:\n"), e.errors.forEach(function (e) {
                                return I.push("- " + e + "\n")
                            })
                        }), T.forEach(function (e) {
                            return e.destroy()
                        }), this.reportError(I)
                    }
                    var A = new Map,
                        w = new Map;
                    u.forEach(function (e) {
                        var n = e.element;
                        r.has(n) && (w.set(n, n), t._beforeAnimationBuild(e.player.namespaceId, e.instruction, A))
                    }), i.forEach(function (e) {
                        var n = e.element;
                        t._getPreviousPlayers(n, !1, e.namespaceId, e.triggerName, null).forEach(function (e) {
                            tA(A, n, []).push(e), e.destroy()
                        })
                    });
                    var N = y.filter(function (e) {
                            return Dw(e, a, p)
                        }),
                        P = new Map;
                    _w(P, this.driver, E, p, WI).forEach(function (e) {
                        Dw(e, a, p) && N.push(e)
                    });
                    var D = new Map;
                    g.forEach(function (e, n) {
                        _w(D, t.driver, new Set(e), a, $I)
                    }), N.forEach(function (e) {
                        var n = P.get(e),
                            t = D.get(e);
                        P.set(e, l({}, n, t))
                    });
                    var k = [],
                        M = [],
                        L = {};
                    u.forEach(function (e) {
                        var n = e.element,
                            l = e.player,
                            u = e.instruction;
                        if (r.has(n)) {
                            if (h.has(n)) return l.onDestroy(function () {
                                return CA(n, u.toStyles)
                            }), l.disabled = !0, l.overrideTotalTime(u.totalTime), void i.push(l);
                            var s = L;
                            if (w.size > 1) {
                                for (var a = n, c = []; a = a.parentNode;) {
                                    var p = w.get(a);
                                    if (p) {
                                        s = p;
                                        break
                                    }
                                    c.push(a)
                                }
                                c.forEach(function (e) {
                                    return w.set(e, s)
                                })
                            }
                            var d = t._buildAnimation(l.namespaceId, u, A, o, D, P);
                            if (l.setRealPlayer(d), s === L) k.push(l);
                            else {
                                var f = t.playersByElement.get(s);
                                f && f.length && (l.parentPlayer = ZI(f)), i.push(l)
                            }
                        } else _A(n, u.fromStyles), l.onDestroy(function () {
                            return CA(n, u.toStyles)
                        }), M.push(l), h.has(n) && i.push(l)
                    }), M.forEach(function (e) {
                        var n = o.get(e.element);
                        if (n && n.length) {
                            var t = ZI(n);
                            e.setRealPlayer(t)
                        }
                    }), i.forEach(function (e) {
                        e.parentPlayer ? e.syncPlayerEvents(e.parentPlayer) : e.destroy()
                    });
                    for (var x = 0; x < y.length; x++) {
                        var F, U = (F = y[x])[yw];
                        if (Nw(F, "ng-leave"), !U || !U.hasAnimation) {
                            var H = [];
                            if (s.size) {
                                var G = s.get(F);
                                G && G.length && H.push.apply(H, c(G));
                                for (var B = this.driver.query(F, ".ng-animating", !0), V = 0; V < B.length; V++) {
                                    var W = s.get(B[V]);
                                    W && W.length && H.push.apply(H, c(W))
                                }
                            }
                            var j = H.filter(function (e) {
                                return !e.destroyed
                            });
                            j.length ? Pw(this, F, j) : this.processLeaveNode(F)
                        }
                    }
                    return y.length = 0, k.forEach(function (e) {
                        t.players.push(e), e.onDone(function () {
                            e.destroy();
                            var n = t.players.indexOf(e);
                            t.players.splice(n, 1)
                        }), e.play()
                    }), k
                }, e.prototype.elementContainsData = function (e, n) {
                    var t = !1,
                        r = n[yw];
                    return r && r.setForRemoval && (t = !0), this.playersByElement.has(n) && (t = !0), this.playersByQueriedElement.has(n) && (t = !0), this.statesByElement.has(n) && (t = !0), this._fetchNamespace(e).elementContainsData(n) || t
                }, e.prototype.afterFlush = function (e) {
                    this._flushFns.push(e)
                }, e.prototype.afterFlushAnimationsDone = function (e) {
                    this._whenQuietFns.push(e)
                }, e.prototype._getPreviousPlayers = function (e, n, t, r, i) {
                    var l = [];
                    if (n) {
                        var o = this.playersByQueriedElement.get(e);
                        o && (l = o)
                    } else {
                        var u = this.playersByElement.get(e);
                        if (u) {
                            var s = !i || "void" == i;
                            u.forEach(function (e) {
                                e.queued || (s || e.triggerName == r) && l.push(e)
                            })
                        }
                    }
                    return (t || r) && (l = l.filter(function (e) {
                        return !(t && t != e.namespaceId || r && r != e.triggerName)
                    })), l
                }, e.prototype._beforeAnimationBuild = function (e, n, t) {
                    var r, i, l = n.element,
                        o = n.isRemovalTransition ? void 0 : e,
                        u = n.isRemovalTransition ? void 0 : n.triggerName,
                        a = function (e) {
                            var r = e.element,
                                i = r !== l,
                                s = tA(t, r, []);
                            c._getPreviousPlayers(r, i, o, u, n.toState).forEach(function (e) {
                                var n = e.getRealPlayer();
                                n.beforeDestroy && n.beforeDestroy(), e.destroy(), s.push(e)
                            })
                        },
                        c = this;
                    try {
                        for (var p = s(n.timelines), h = p.next(); !h.done; h = p.next()) a(h.value)
                    } catch (d) {
                        r = {
                            error: d
                        }
                    } finally {
                        try {
                            h && !h.done && (i = p.return) && i.call(p)
                        } finally {
                            if (r) throw r.error
                        }
                    }
                    _A(l, n.fromStyles)
                }, e.prototype._buildAnimation = function (e, n, t, r, i, l) {
                    var o = this,
                        u = n.triggerName,
                        s = n.element,
                        a = [],
                        c = new Set,
                        p = new Set,
                        h = n.timelines.map(function (n) {
                            var h = n.element;
                            c.add(h);
                            var d = h[yw];
                            if (d && d.removedBeforeQueried) return new KI(n.duration, n.delay);
                            var f, g, v = h !== s,
                                m = (f = (t.get(h) || gw).map(function (e) {
                                    return e.getRealPlayer()
                                }), g = [], function e(n, t) {
                                    for (var r = 0; r < n.length; r++) {
                                        var i = n[r];
                                        i instanceof qI ? e(i.players, t) : t.push(i)
                                    }
                                }(f, g), g).filter(function (e) {
                                    return !!e.element && e.element === h
                                }),
                                y = i.get(h),
                                S = l.get(h),
                                E = XI(0, o._normalizer, 0, n.keyframes, y, S),
                                b = o._buildPlayer(n, E, m);
                            if (n.subTimeline && r && p.add(h), v) {
                                var O = new Rw(e, u, h);
                                O.setRealPlayer(b), a.push(O)
                            }
                            return b
                        });
                    a.forEach(function (e) {
                        tA(o.playersByQueriedElement, e.element, []).push(e), e.onDone(function () {
                            return function (e, n, t) {
                                var r;
                                if (e instanceof Map) {
                                    if (r = e.get(n)) {
                                        if (r.length) {
                                            var i = r.indexOf(t);
                                            r.splice(i, 1)
                                        }
                                        0 == r.length && e.delete(n)
                                    }
                                } else(r = e[n]) && (r.length && (i = r.indexOf(t), r.splice(i, 1)), 0 == r.length && delete e[n]);
                                return r
                            }(o.playersByQueriedElement, e.element, e)
                        })
                    }), c.forEach(function (e) {
                        return ww(e, "ng-animating")
                    });
                    var d = ZI(h);
                    return d.onDestroy(function () {
                        c.forEach(function (e) {
                            return Nw(e, "ng-animating")
                        }), CA(s, n.toStyles)
                    }), p.forEach(function (e) {
                        tA(r, e, []).push(d)
                    }), d
                }, e.prototype._buildPlayer = function (e, n, t) {
                    return n.length > 0 ? this.driver.animate(e.element, n, e.duration, e.delay, e.easing, t) : new KI(e.duration, e.delay)
                }, e
            }(),
            Rw = function () {
                function e(e, n, t) {
                    this.namespaceId = e, this.triggerName = n, this.element = t, this._player = new KI, this._containsRealPlayer = !1, this._queuedCallbacks = {}, this.destroyed = !1, this.markedForDestroy = !1, this.disabled = !1, this.queued = !0, this.totalTime = 0
                }
                return e.prototype.setRealPlayer = function (e) {
                    var n = this;
                    this._containsRealPlayer || (this._player = e, Object.keys(this._queuedCallbacks).forEach(function (t) {
                        n._queuedCallbacks[t].forEach(function (n) {
                            return JI(e, t, void 0, n)
                        })
                    }), this._queuedCallbacks = {}, this._containsRealPlayer = !0, this.overrideTotalTime(e.totalTime), this.queued = !1)
                }, e.prototype.getRealPlayer = function () {
                    return this._player
                }, e.prototype.overrideTotalTime = function (e) {
                    this.totalTime = e
                }, e.prototype.syncPlayerEvents = function (e) {
                    var n = this,
                        t = this._player;
                    t.triggerCallback && e.onStart(function () {
                        return t.triggerCallback("start")
                    }), e.onDone(function () {
                        return n.finish()
                    }), e.onDestroy(function () {
                        return n.destroy()
                    })
                }, e.prototype._queueEvent = function (e, n) {
                    tA(this._queuedCallbacks, e, []).push(n)
                }, e.prototype.onDone = function (e) {
                    this.queued && this._queueEvent("done", e), this._player.onDone(e)
                }, e.prototype.onStart = function (e) {
                    this.queued && this._queueEvent("start", e), this._player.onStart(e)
                }, e.prototype.onDestroy = function (e) {
                    this.queued && this._queueEvent("destroy", e), this._player.onDestroy(e)
                }, e.prototype.init = function () {
                    this._player.init()
                }, e.prototype.hasStarted = function () {
                    return !this.queued && this._player.hasStarted()
                }, e.prototype.play = function () {
                    !this.queued && this._player.play()
                }, e.prototype.pause = function () {
                    !this.queued && this._player.pause()
                }, e.prototype.restart = function () {
                    !this.queued && this._player.restart()
                }, e.prototype.finish = function () {
                    this._player.finish()
                }, e.prototype.destroy = function () {
                    this.destroyed = !0, this._player.destroy()
                }, e.prototype.reset = function () {
                    !this.queued && this._player.reset()
                }, e.prototype.setPosition = function (e) {
                    this.queued || this._player.setPosition(e)
                }, e.prototype.getPosition = function () {
                    return this.queued ? 0 : this._player.getPosition()
                }, e.prototype.triggerCallback = function (e) {
                    var n = this._player;
                    n.triggerCallback && n.triggerCallback(e)
                }, e
            }();

        function Tw(e) {
            return e && 1 === e.nodeType
        }

        function Cw(e, n) {
            var t = e.style.display;
            return e.style.display = null != n ? n : "none", t
        }

        function _w(e, n, t, r, i) {
            var l = [];
            t.forEach(function (e) {
                return l.push(Cw(e))
            });
            var o = [];
            r.forEach(function (t, r) {
                var l = {};
                t.forEach(function (e) {
                    var t = l[e] = n.computeStyle(r, e, i);
                    t && 0 != t.length || (r[yw] = mw, o.push(r))
                }), e.set(r, l)
            });
            var u = 0;
            return t.forEach(function (e) {
                return Cw(e, l[u++])
            }), o
        }

        function Iw(e, n) {
            var t = new Map;
            if (e.forEach(function (e) {
                    return t.set(e, [])
                }), 0 == n.length) return t;
            var r = new Set(n),
                i = new Map;
            return n.forEach(function (e) {
                var n = function e(n) {
                    if (!n) return 1;
                    var l = i.get(n);
                    if (l) return l;
                    var o = n.parentNode;
                    return l = t.has(o) ? o : r.has(o) ? 1 : e(o), i.set(n, l), l
                }(e);
                1 !== n && t.get(n).push(e)
            }), t
        }
        var Aw = "$$classes";

        function ww(e, n) {
            if (e.classList) e.classList.add(n);
            else {
                var t = e[Aw];
                t || (t = e[Aw] = {}), t[n] = !0
            }
        }

        function Nw(e, n) {
            if (e.classList) e.classList.remove(n);
            else {
                var t = e[Aw];
                t && delete t[n]
            }
        }

        function Pw(e, n, t) {
            ZI(t).onDone(function () {
                return e.processLeaveNode(n)
            })
        }

        function Dw(e, n, t) {
            var r = t.get(e);
            if (!r) return !1;
            var i = n.get(e);
            return i ? r.forEach(function (e) {
                return i.add(e)
            }) : n.set(e, r), t.delete(e), !0
        }
        var kw = function () {
                function e(e, n, t) {
                    var r = this;
                    this.bodyNode = e, this._driver = n, this._triggerCache = {}, this.onRemovalComplete = function (e, n) {}, this._transitionEngine = new Ow(e, n, t), this._timelineEngine = new fw(e, n, t), this._transitionEngine.onRemovalComplete = function (e, n) {
                        return r.onRemovalComplete(e, n)
                    }
                }
                return e.prototype.registerTrigger = function (e, n, t, r, i) {
                    var l = e + "-" + r,
                        o = this._triggerCache[l];
                    if (!o) {
                        var u = [],
                            s = GA(this._driver, i, u);
                        if (u.length) throw new Error('The animation trigger "' + r + '" has failed to build due to the following errors:\n - ' + u.join("\n - "));
                        o = function (e, n) {
                            return new pw(e, n)
                        }(r, s), this._triggerCache[l] = o
                    }
                    this._transitionEngine.registerTrigger(n, r, o)
                }, e.prototype.register = function (e, n) {
                    this._transitionEngine.register(e, n)
                }, e.prototype.destroy = function (e, n) {
                    this._transitionEngine.destroy(e, n)
                }, e.prototype.onInsert = function (e, n, t, r) {
                    this._transitionEngine.insertNode(e, n, t, r)
                }, e.prototype.onRemove = function (e, n, t) {
                    this._transitionEngine.removeNode(e, n, t)
                }, e.prototype.disableAnimations = function (e, n) {
                    this._transitionEngine.markElementAsDisabled(e, n)
                }, e.prototype.process = function (e, n, t, r) {
                    if ("@" == t.charAt(0)) {
                        var i = a(rA(t), 2);
                        this._timelineEngine.command(i[0], n, i[1], r)
                    } else this._transitionEngine.trigger(e, n, t, r)
                }, e.prototype.listen = function (e, n, t, r, i) {
                    if ("@" == t.charAt(0)) {
                        var l = a(rA(t), 2);
                        return this._timelineEngine.listen(l[0], n, l[1], i)
                    }
                    return this._transitionEngine.listen(e, n, t, r, i)
                }, e.prototype.flush = function (e) {
                    void 0 === e && (e = -1), this._transitionEngine.flush(e)
                }, Object.defineProperty(e.prototype, "players", {
                    get: function () {
                        return this._transitionEngine.players.concat(this._timelineEngine.players)
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.whenRenderingDone = function () {
                    return this._transitionEngine.whenRenderingDone()
                }, e
            }(),
            Mw = function (e) {
                function n(n, t) {
                    var r = e.call(this) || this;
                    return r._nextAnimationId = 0, r._renderer = n.createRenderer(t.body, {
                        id: "0",
                        encapsulation: Ue.None,
                        styles: [],
                        data: {
                            animation: []
                        }
                    }), r
                }
                return i(n, e), n.prototype.build = function (e) {
                    var n = this._nextAnimationId.toString();
                    this._nextAnimationId++;
                    var t = Array.isArray(e) ? jI(e) : e;
                    return Fw(this._renderer, null, n, "register", [t]), new Lw(n, this._renderer)
                }, n
            }(BI),
            Lw = function (e) {
                function n(n, t) {
                    var r = e.call(this) || this;
                    return r._id = n, r._renderer = t, r
                }
                return i(n, e), n.prototype.create = function (e, n) {
                    return new xw(this._id, e, n || {}, this._renderer)
                }, n
            }(VI),
            xw = function () {
                function e(e, n, t, r) {
                    this.id = e, this.element = n, this._renderer = r, this.parentPlayer = null, this._started = !1, this.totalTime = 0, this._command("create", t)
                }
                return e.prototype._listen = function (e, n) {
                    return this._renderer.listen(this.element, "@@" + this.id + ":" + e, n)
                }, e.prototype._command = function (e) {
                    for (var n = [], t = 1; t < arguments.length; t++) n[t - 1] = arguments[t];
                    return Fw(this._renderer, this.element, this.id, e, n)
                }, e.prototype.onDone = function (e) {
                    this._listen("done", e)
                }, e.prototype.onStart = function (e) {
                    this._listen("start", e)
                }, e.prototype.onDestroy = function (e) {
                    this._listen("destroy", e)
                }, e.prototype.init = function () {
                    this._command("init")
                }, e.prototype.hasStarted = function () {
                    return this._started
                }, e.prototype.play = function () {
                    this._command("play"), this._started = !0
                }, e.prototype.pause = function () {
                    this._command("pause")
                }, e.prototype.restart = function () {
                    this._command("restart")
                }, e.prototype.finish = function () {
                    this._command("finish")
                }, e.prototype.destroy = function () {
                    this._command("destroy")
                }, e.prototype.reset = function () {
                    this._command("reset")
                }, e.prototype.setPosition = function (e) {
                    this._command("setPosition", e)
                }, e.prototype.getPosition = function () {
                    return 0
                }, e
            }();

        function Fw(e, n, t, r, i) {
            return e.setProperty(n, "@@" + t + ":" + r, i)
        }
        var Uw = function () {
                function e(e, n, t) {
                    this.delegate = e, this.engine = n, this._zone = t, this._currentId = 0, this._microtaskId = 1, this._animationCallbacksBuffer = [], this._rendererCache = new Map, this._cdRecurDepth = 0, this.promise = Promise.resolve(0), n.onRemovalComplete = function (e, n) {
                        n && n.parentNode(e) && n.removeChild(e.parentNode, e)
                    }
                }
                return e.prototype.createRenderer = function (e, n) {
                    var t = this,
                        r = this.delegate.createRenderer(e, n);
                    if (!(e && n && n.data && n.data.animation)) {
                        var i = this._rendererCache.get(r);
                        return i || (i = new Hw("", r, this.engine), this._rendererCache.set(r, i)), i
                    }
                    var l = n.id,
                        o = n.id + "-" + this._currentId;
                    return this._currentId++, this.engine.register(o, e), n.data.animation.forEach(function (n) {
                        return t.engine.registerTrigger(l, o, e, n.name, n)
                    }), new Gw(this, o, r, this.engine)
                }, e.prototype.begin = function () {
                    this._cdRecurDepth++, this.delegate.begin && this.delegate.begin()
                }, e.prototype._scheduleCountTask = function () {
                    var e = this;
                    this.promise.then(function () {
                        e._microtaskId++
                    })
                }, e.prototype.scheduleListenerCallback = function (e, n, t) {
                    var r = this;
                    e >= 0 && e < this._microtaskId ? this._zone.run(function () {
                        return n(t)
                    }) : (0 == this._animationCallbacksBuffer.length && Promise.resolve(null).then(function () {
                        r._zone.run(function () {
                            r._animationCallbacksBuffer.forEach(function (e) {
                                var n = a(e, 2);
                                (0, n[0])(n[1])
                            }), r._animationCallbacksBuffer = []
                        })
                    }), this._animationCallbacksBuffer.push([n, t]))
                }, e.prototype.end = function () {
                    var e = this;
                    this._cdRecurDepth--, 0 == this._cdRecurDepth && this._zone.runOutsideAngular(function () {
                        e._scheduleCountTask(), e.engine.flush(e._microtaskId)
                    }), this.delegate.end && this.delegate.end()
                }, e.prototype.whenRenderingDone = function () {
                    return this.engine.whenRenderingDone()
                }, e
            }(),
            Hw = function () {
                function e(e, n, t) {
                    this.namespaceId = e, this.delegate = n, this.engine = t, this.destroyNode = this.delegate.destroyNode ? function (e) {
                        return n.destroyNode(e)
                    } : null
                }
                return Object.defineProperty(e.prototype, "data", {
                    get: function () {
                        return this.delegate.data
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.destroy = function () {
                    this.engine.destroy(this.namespaceId, this.delegate), this.delegate.destroy()
                }, e.prototype.createElement = function (e, n) {
                    return this.delegate.createElement(e, n)
                }, e.prototype.createComment = function (e) {
                    return this.delegate.createComment(e)
                }, e.prototype.createText = function (e) {
                    return this.delegate.createText(e)
                }, e.prototype.appendChild = function (e, n) {
                    this.delegate.appendChild(e, n), this.engine.onInsert(this.namespaceId, n, e, !1)
                }, e.prototype.insertBefore = function (e, n, t) {
                    this.delegate.insertBefore(e, n, t), this.engine.onInsert(this.namespaceId, n, e, !0)
                }, e.prototype.removeChild = function (e, n) {
                    this.engine.onRemove(this.namespaceId, n, this.delegate)
                }, e.prototype.selectRootElement = function (e, n) {
                    return this.delegate.selectRootElement(e, n)
                }, e.prototype.parentNode = function (e) {
                    return this.delegate.parentNode(e)
                }, e.prototype.nextSibling = function (e) {
                    return this.delegate.nextSibling(e)
                }, e.prototype.setAttribute = function (e, n, t, r) {
                    this.delegate.setAttribute(e, n, t, r)
                }, e.prototype.removeAttribute = function (e, n, t) {
                    this.delegate.removeAttribute(e, n, t)
                }, e.prototype.addClass = function (e, n) {
                    this.delegate.addClass(e, n)
                }, e.prototype.removeClass = function (e, n) {
                    this.delegate.removeClass(e, n)
                }, e.prototype.setStyle = function (e, n, t, r) {
                    this.delegate.setStyle(e, n, t, r)
                }, e.prototype.removeStyle = function (e, n, t) {
                    this.delegate.removeStyle(e, n, t)
                }, e.prototype.setProperty = function (e, n, t) {
                    "@" == n.charAt(0) && "@.disabled" == n ? this.disableAnimations(e, !!t) : this.delegate.setProperty(e, n, t)
                }, e.prototype.setValue = function (e, n) {
                    this.delegate.setValue(e, n)
                }, e.prototype.listen = function (e, n, t) {
                    return this.delegate.listen(e, n, t)
                }, e.prototype.disableAnimations = function (e, n) {
                    this.engine.disableAnimations(e, n)
                }, e
            }(),
            Gw = function (e) {
                function n(n, t, r, i) {
                    var l = e.call(this, t, r, i) || this;
                    return l.factory = n, l.namespaceId = t, l
                }
                return i(n, e), n.prototype.setProperty = function (e, n, t) {
                    "@" == n.charAt(0) ? "." == n.charAt(1) && "@.disabled" == n ? this.disableAnimations(e, t = void 0 === t || !!t) : this.engine.process(this.namespaceId, e, n.substr(1), t) : this.delegate.setProperty(e, n, t)
                }, n.prototype.listen = function (e, n, t) {
                    var r, i, l, o = this;
                    if ("@" == n.charAt(0)) {
                        var u = function (e) {
                                switch (e) {
                                    case "body":
                                        return document.body;
                                    case "document":
                                        return document;
                                    case "window":
                                        return window;
                                    default:
                                        return e
                                }
                            }(e),
                            s = n.substr(1),
                            c = "";
                        return "@" != s.charAt(0) && (s = (r = a((i = s, l = i.indexOf("."), [i.substring(0, l), i.substr(l + 1)]), 2))[0], c = r[1]), this.engine.listen(this.namespaceId, u, s, c, function (e) {
                            o.factory.scheduleListenerCallback(e._data || -1, t, e)
                        })
                    }
                    return this.delegate.listen(e, n, t)
                }, n
            }(Hw),
            Bw = function (e) {
                function n(n, t, r) {
                    return e.call(this, n.body, t, r) || this
                }
                return i(n, e), n
            }(kw);

        function Vw() {
            return new iw
        }

        function Ww(e, n, t) {
            return new Uw(e, n, t)
        }
        var jw = new ye("AnimationModuleType"),
            Yw = function () {
                return function () {}
            }(),
            zw = function () {
                function e(e, n) {
                    this.gameService = e, this.router = n
                }
                return e.prototype.canActivate = function (e, n) {
                    switch (e.routeConfig.path) {
                        case "crafting":
                            return !!this.gameService.isEnabled(Eu.CRAFTING) || (this.goToError(), !1);
                        case "market":
                            return !!this.gameService.isEnabled(Eu.MARKET) || (this.goToError(), !1);
                        case "research":
                            return !!this.gameService.isEnabled(Eu.RESEARCH) || (this.goToError(), !1);
                        case "army":
                            return !!this.gameService.isEnabled(Eu.ARMY) || (this.goToError(), !1);
                        case "religion":
                            return !!this.gameService.isEnabled(Eu.RELIGION) || (this.goToError(), !1);
                        case "weather":
                            return !!this.gameService.isEnabled(Eu.WEATHER) || (this.goToError(), !1);
                        case "mountains":
                            return !!this.gameService.isEnabled(Eu.MOUNTAINS) || (this.goToError(), !1);
                        case "fort":
                            return !!this.gameService.isEnabled(Eu.FORT) || (this.goToError(), !1);
                        case "sea":
                            return !!this.gameService.isEnabled(Eu.SEA) || (this.goToError(), !1);
                        case "field":
                            return !!this.gameService.isEnabled(Eu.FIELD) || (this.goToError(), !1);
                        case "plateau":
                            return !!this.gameService.isEnabled(Eu.PLATEAU) || (this.goToError(), !1);
                        default:
                            return !1
                    }
                }, e.prototype.goToError = function () {
                    this.router.navigate(["/404"], {
                        skipLocationChange: !0
                    })
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(Cg), ze(Cd))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            Kw = function () {
                function e() {
                    this.handlers = {}
                }
                return e.prototype.shouldDetach = function (e) {
                    return e.routeConfig && ("village" === e.routeConfig.path || "fort" === e.routeConfig.path || "forest" === e.routeConfig.path || "field" === e.routeConfig.path || "mountains" === e.routeConfig.path || "plateau" === e.routeConfig.path || "sea" === e.routeConfig.path)
                }, e.prototype.store = function (e, n) {
                    this.handlers[e.routeConfig.path] = n
                }, e.prototype.shouldAttach = function (e) {
                    return !!e.routeConfig && !!this.handlers[e.routeConfig.path]
                }, e.prototype.retrieve = function (e) {
                    return e.routeConfig ? this.handlers[e.routeConfig.path] : null
                }, e.prototype.shouldReuseRoute = function (e, n) {
                    return !1
                }, e
            }(),
            qw = function () {
                return function () {}
            }(),
            $w = fu(cs, [ps], function (e) {
                return function (e) {
                    for (var n = {}, t = [], r = !1, i = 0; i < e.length; i++) {
                        var l = e[i];
                        l.token === En && !0 === l.value && (r = !0), 1073741824 & l.flags && t.push(l.token), l.index = i, n[pi(l.token)] = l
                    }
                    return {
                        factory: null,
                        providersByKey: n,
                        providers: e,
                        modules: t,
                        isRoot: r
                    }
                }([el(512, _n, In, [[8, [tf, sf, Wg, sv, _m, hS, qS, OE, YE, lb, bb, eR, SR, GR, lT, NT, jT, cC, GI]], [3, _n], wn]), el(4608, Nf, Nf, []), el(5120, Kr, Qr, [[3, Kr]]), el(4608, Ps, Ds, [Kr, [2, Ns]]), el(5120, Nt, Pt, []), el(5120, Br, qr, []), el(5120, Vr, $r, []), el(4608, Qc, Zc, [Zs]), el(6144, Hn, null, [Qc]), el(4608, Wc, Yc, []), el(5120, vc, function (e, n, t, r, i, l, o, u) {
                    return [new Bc(e, n, t), new $c(r), new zc(i, l, o, u)]
                }, [Zs, Zt, Mt, Zs, Zs, Wc, xt, [2, jc]]), el(4608, mc, mc, [vc, Zt]), el(135680, Ec, Ec, [Zs]), el(4608, Ic, Ic, [mc, Ec, Nt]), el(4608, vA, gA, []), el(5120, rw, Vw, []), el(4608, kw, Bw, [Zs, vA, rw]), el(5120, Mn, Ww, [Ic, kw, Zt]), el(6144, Sc, null, [Ec]), el(4608, lr, lr, [Zt]), el(5120, gh, qd, [Cd]), el(4608, Ld, Ld, []), el(6144, kd, null, [Ld]), el(135680, xd, xd, [Cd, vt, jt, on, kd]), el(4608, Md, Md, []), el(5120, Fd, Wd, [Cd, ea, Ud]), el(5120, Xd, Zd, [$d]), el(5120, Lt, function (e) {
                    return [e]
                }, [Xd]), el(4608, BI, Mw, [Mn, uc]), el(4608, Ng, Ng, [Og, vg, Cg, Rg, wg, Ag]), el(1073742336, pg, pg, []), el(1073742336, hg, hg, []), el(1073742336, Qs, Qs, []), el(1024, Ct, lp, []), el(1024, ar, function () {
                    return [Bd()]
                }, []), el(512, $d, $d, [on]), el(1024, At, function (e, n) {
                    return [(t = e, dc("probe", gc), dc("coreTokens", l({}, fc, (t || []).reduce(function (e, n) {
                        return e[n.name] = n.token, e
                    }, {}))), function () {
                        return gc
                    }), Qd(n)];
                    var t
                }, [[2, ar], $d]), el(512, wt, wt, [[2, At]]), el(131584, fr, fr, [Zt, xt, on, Ct, _n, wt]), el(1073742336, Zr, Zr, [fr]), el(1073742336, op, op, [[3, op]]), el(1024, Hd, Yd, [[3, Cd]]), el(512, Kp, qp, []), el(512, Nd, Nd, []), el(256, Ud, {}, []), el(1024, fs, jd, [hs, [2, gs], Ud]), el(512, vs, vs, [fs]), el(512, jt, jt, []), el(512, vt, Sr, [jt, [2, mr]]), el(1024, yd, function () {
                    return [[{
                        path: "",
                        redirectTo: "regions/village",
                        pathMatch: "full"
                    }, {
                        path: "404",
                        component: rf,
                        pathMatch: "full"
                    }, {
                        path: "resources",
                        component: Pg
                    }, {
                        path: "management",
                        component: zg
                    }, {
                        path: "crafting",
                        component: vm,
                        canActivate: [zw]
                    }, {
                        path: "market",
                        component: iS,
                        canActivate: [zw]
                    }, {
                        path: "research",
                        component: xS,
                        canActivate: [zw]
                    }, {
                        path: "army",
                        component: uE,
                        canActivate: [zw]
                    }, {
                        path: "religion",
                        component: NE,
                        canActivate: [zw]
                    }, {
                        path: "weather",
                        component: KE,
                        canActivate: [zw]
                    }, {
                        path: "royal",
                        component: vb
                    }, {
                        path: "regions",
                        children: [{
                            path: "",
                            redirectTo: "village",
                            pathMatch: "full"
                        }, {
                            path: "village",
                            component: xO
                        }, {
                            path: "fort",
                            component: tR,
                            canActivate: [zw]
                        }, {
                            path: "forest",
                            component: bR
                        }, {
                            path: "field",
                            component: VR,
                            canActivate: [zw]
                        }, {
                            path: "mountains",
                            component: uT,
                            canActivate: [zw]
                        }, {
                            path: "plateau",
                            component: DT,
                            canActivate: [zw]
                        }, {
                            path: "sea",
                            component: zT,
                            canActivate: [zw]
                        }]
                    }, {
                        path: "**",
                        redirectTo: "regions/village",
                        pathMatch: "full"
                    }]]
                }, []), el(512, vd, Kw, []), el(1024, Cd, Kd, [fr, Kp, Nd, vs, on, vt, jt, yd, Ud, [2, Ed], [2, vd]]), el(1073742336, Vd, Vd, [[2, Hd], [2, Cd]]), el(1073742336, qw, qw, []), el(1073742336, Yw, Yw, []), el(1073742336, xv, xv, []), el(1073742336, cs, cs, []), el(256, En, !0, []), el(256, jw, "NoopAnimations", [])])
            });
        Gu.production && function () {
            if (Vn) throw new Error("Cannot enable prod mode after platform setup.");
            Bn = !1
        }(), ip().bootstrapModuleFactory($w).catch(function (e) {
            return console.log(e)
        })
    }
}, [[0, 0]]]);

(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,n,l){e.exports=l("zUnb")},crnd:function(e,n){function l(e){return Promise.resolve().then((function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}))}l.keys=function(){return[]},l.resolve=l,e.exports=l,l.id="crnd"},zUnb:function(e,n,l){"use strict";function t(e){return"function"==typeof e}l.r(n);let i=!1;const s={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=e},get useDeprecatedSynchronousErrorHandling(){return i}};function r(e){setTimeout(()=>{throw e},0)}const u={closed:!0,next(e){},error(e){if(s.useDeprecatedSynchronousErrorHandling)throw e;r(e)},complete(){}},o=(()=>Array.isArray||(e=>e&&"number"==typeof e.length))();function a(e){return null!==e&&"object"==typeof e}const c=(()=>{function e(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((e,n)=>`${n+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e})();let h=(()=>{class e{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let n;if(this.closed)return;let{_parentOrParents:l,_ctorUnsubscribe:i,_unsubscribe:s,_subscriptions:r}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,l instanceof e)l.remove(this);else if(null!==l)for(let e=0;e<l.length;++e)l[e].remove(this);if(t(s)){i&&(this._unsubscribe=void 0);try{s.call(this)}catch(u){n=u instanceof c?d(u.errors):[u]}}if(o(r)){let e=-1,l=r.length;for(;++e<l;){const l=r[e];if(a(l))try{l.unsubscribe()}catch(u){n=n||[],u instanceof c?n=n.concat(d(u.errors)):n.push(u)}}}if(n)throw new c(n)}add(n){let l=n;if(!n)return e.EMPTY;switch(typeof n){case"function":l=new e(n);case"object":if(l===this||l.closed||"function"!=typeof l.unsubscribe)return l;if(this.closed)return l.unsubscribe(),l;if(!(l instanceof e)){const n=l;l=new e,l._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+n+" added to Subscription.")}let{_parentOrParents:t}=l;if(null===t)l._parentOrParents=this;else if(t instanceof e){if(t===this)return l;l._parentOrParents=[t,this]}else{if(-1!==t.indexOf(this))return l;t.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[l]:i.push(l),l}remove(e){const n=this._subscriptions;if(n){const l=n.indexOf(e);-1!==l&&n.splice(l,1)}}}return e.EMPTY=function(e){return e.closed=!0,e}(new e),e})();function d(e){return e.reduce((e,n)=>e.concat(n instanceof c?n.errors:n),[])}const g=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class p extends h{constructor(e,n,l){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=u;break;case 1:if(!e){this.destination=u;break}if("object"==typeof e){e instanceof p?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new m(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new m(this,e,n,l)}}[g](){return this}static create(e,n,l){const t=new p(e,n,l);return t.syncErrorThrowable=!1,t}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class m extends p{constructor(e,n,l,i){let s;super(),this._parentSubscriber=e;let r=this;t(n)?s=n:n&&(s=n.next,l=n.error,i=n.complete,n!==u&&(r=Object.create(n),t(r.unsubscribe)&&this.add(r.unsubscribe.bind(r)),r.unsubscribe=this.unsubscribe.bind(this))),this._context=r,this._next=s,this._error=l,this._complete=i}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:n}=this;s.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?this.__tryOrSetError(n,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:n}=this,{useDeprecatedSynchronousErrorHandling:l}=s;if(this._error)l&&n.syncErrorThrowable?(this.__tryOrSetError(n,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(n.syncErrorThrowable)l?(n.syncErrorValue=e,n.syncErrorThrown=!0):r(e),this.unsubscribe();else{if(this.unsubscribe(),l)throw e;r(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const n=()=>this._complete.call(this._context);s.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,n){try{e.call(this._context,n)}catch(l){if(this.unsubscribe(),s.useDeprecatedSynchronousErrorHandling)throw l;r(l)}}__tryOrSetError(e,n,l){if(!s.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,l)}catch(t){return s.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(r(t),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const f=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function S(e){return e}let E=(()=>{class e{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(n){const l=new e;return l.source=this,l.operator=n,l}subscribe(e,n,l){const{operator:t}=this,i=function(e,n,l){if(e){if(e instanceof p)return e;if(e[g])return e[g]()}return e||n||l?new p(e,n,l):new p(u)}(e,n,l);if(i.add(t?t.call(i,this.source):this.source||s.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),s.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}_trySubscribe(e){try{return this._subscribe(e)}catch(n){s.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=n),function(e){for(;e;){const{closed:n,destination:l,isStopped:t}=e;if(n||t)return!1;e=l&&l instanceof p?l:null}return!0}(e)?e.error(n):console.warn(n)}}forEach(e,n){return new(n=v(n))((n,l)=>{let t;t=this.subscribe(n=>{try{e(n)}catch(i){l(i),t&&t.unsubscribe()}},l,n)})}_subscribe(e){const{source:n}=this;return n&&n.subscribe(e)}[f](){return this}pipe(...e){return 0===e.length?this:(0===(n=e).length?S:1===n.length?n[0]:function(e){return n.reduce((e,n)=>n(e),e)})(this);var n}toPromise(e){return new(e=v(e))((e,n)=>{let l;this.subscribe(e=>l=e,e=>n(e),()=>e(l))})}}return e.create=n=>new e(n),e})();function v(e){if(e||(e=s.Promise||Promise),!e)throw new Error("no Promise impl found");return e}const R=(()=>{function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e})();class O extends h{constructor(e,n){super(),this.subject=e,this.subscriber=n,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,n=e.observers;if(this.subject=null,!n||0===n.length||e.isStopped||e.closed)return;const l=n.indexOf(this.subscriber);-1!==l&&n.splice(l,1)}}class T extends p{constructor(e){super(e),this.destination=e}}let C=(()=>{class e extends E{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[g](){return new T(this)}lift(e){const n=new I(this,this);return n.operator=e,n}next(e){if(this.closed)throw new R;if(!this.isStopped){const{observers:n}=this,l=n.length,t=n.slice();for(let i=0;i<l;i++)t[i].next(e)}}error(e){if(this.closed)throw new R;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:n}=this,l=n.length,t=n.slice();for(let i=0;i<l;i++)t[i].error(e);this.observers.length=0}complete(){if(this.closed)throw new R;this.isStopped=!0;const{observers:e}=this,n=e.length,l=e.slice();for(let t=0;t<n;t++)l[t].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new R;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new R;return this.hasError?(e.error(this.thrownError),h.EMPTY):this.isStopped?(e.complete(),h.EMPTY):(this.observers.push(e),new O(this,e))}asObservable(){const e=new E;return e.source=this,e}}return e.create=(e,n)=>new I(e,n),e})();class I extends C{constructor(e,n){super(),this.destination=e,this.source=n}next(e){const{destination:n}=this;n&&n.next&&n.next(e)}error(e){const{destination:n}=this;n&&n.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:n}=this;return n?this.source.subscribe(e):h.EMPTY}}function b(e){return e&&"function"==typeof e.schedule}function y(e,n){return function(l){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return l.lift(new A(e,n))}}class A{constructor(e,n){this.project=e,this.thisArg=n}call(e,n){return n.subscribe(new N(e,this.project,this.thisArg))}}class N extends p{constructor(e,n,l){super(e),this.project=n,this.count=0,this.thisArg=l||this}_next(e){let n;try{n=this.project.call(this.thisArg,e,this.count++)}catch(l){return void this.destination.error(l)}this.destination.next(n)}}const _=e=>n=>{for(let l=0,t=e.length;l<t&&!n.closed;l++)n.next(e[l]);n.complete()};function w(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const P=w(),M=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function D(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}const L=e=>{if(e&&"function"==typeof e[f])return t=e,e=>{const n=t[f]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)};if(M(e))return _(e);if(D(e))return l=e,e=>(l.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,r),e);if(e&&"function"==typeof e[P])return n=e,e=>{const l=n[P]();for(;;){let n;try{n=l.next()}catch(t){return e.error(t),e}if(n.done){e.complete();break}if(e.next(n.value),e.closed)break}return"function"==typeof l.return&&e.add(()=>{l.return&&l.return()}),e};{const n=a(e)?"an invalid object":`'${e}'`;throw new TypeError(`You provided ${n} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var n,l,t};function x(e,n){return new E(l=>{const t=new h;let i=0;return t.add(n.schedule((function(){i!==e.length?(l.next(e[i++]),l.closed||t.add(this.schedule())):l.complete()}))),t})}function k(e,n){return n?function(e,n){if(null!=e){if(function(e){return e&&"function"==typeof e[f]}(e))return function(e,n){return new E(l=>{const t=new h;return t.add(n.schedule(()=>{const i=e[f]();t.add(i.subscribe({next(e){t.add(n.schedule(()=>l.next(e)))},error(e){t.add(n.schedule(()=>l.error(e)))},complete(){t.add(n.schedule(()=>l.complete()))}}))})),t})}(e,n);if(D(e))return function(e,n){return new E(l=>{const t=new h;return t.add(n.schedule(()=>e.then(e=>{t.add(n.schedule(()=>{l.next(e),t.add(n.schedule(()=>l.complete()))}))},e=>{t.add(n.schedule(()=>l.error(e)))}))),t})}(e,n);if(M(e))return x(e,n);if(function(e){return e&&"function"==typeof e[P]}(e)||"string"==typeof e)return function(e,n){if(!e)throw new Error("Iterable cannot be null");return new E(l=>{const t=new h;let i;return t.add(()=>{i&&"function"==typeof i.return&&i.return()}),t.add(n.schedule(()=>{i=e[P](),t.add(n.schedule((function(){if(l.closed)return;let e,n;try{const l=i.next();e=l.value,n=l.done}catch(t){return void l.error(t)}n?l.complete():(l.next(e),this.schedule())})))})),t})}(e,n)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,n):e instanceof E?e:new E(L(e))}class F extends p{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class U extends p{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function H(e,n){if(!n.closed)return e instanceof E?e.subscribe(n):L(e)(n)}function G(e,n,l=Number.POSITIVE_INFINITY){return"function"==typeof n?t=>t.pipe(G((l,t)=>k(e(l,t)).pipe(y((e,i)=>n(l,e,t,i))),l)):("number"==typeof n&&(l=n),n=>n.lift(new B(e,l)))}class B{constructor(e,n=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=n}call(e,n){return n.subscribe(new V(e,this.project,this.concurrent))}}class V extends U{constructor(e,n,l=Number.POSITIVE_INFINITY){super(e),this.project=n,this.concurrent=l,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let n;const l=this.index++;try{n=this.project(e,l)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(n)}_innerSub(e){const n=new F(this),l=this.destination;l.add(n);const t=H(e,n);t!==n&&l.add(t)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function W(e=Number.POSITIVE_INFINITY){return G(S,e)}function Y(e,n){return n?x(e,n):new E(_(e))}function z(...e){let n=Number.POSITIVE_INFINITY,l=null,t=e[e.length-1];return b(t)?(l=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(n=e.pop())):"number"==typeof t&&(n=e.pop()),null===l&&1===e.length&&e[0]instanceof E?e[0]:W(n)(Y(e,l))}function $(){return function(e){return e.lift(new K(e))}}class K{constructor(e){this.connectable=e}call(e,n){const{connectable:l}=this;l._refCount++;const t=new j(e,l),i=n.subscribe(t);return t.closed||(t.connection=l.connect()),i}}class j extends p{constructor(e,n){super(e),this.connectable=n}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const n=e._refCount;if(n<=0)return void(this.connection=null);if(e._refCount=n-1,n>1)return void(this.connection=null);const{connection:l}=this,t=e._connection;this.connection=null,!t||l&&t!==l||t.unsubscribe()}}class Q extends E{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new h,e.add(this.source.subscribe(new X(this.getSubject(),this))),e.closed&&(this._connection=null,e=h.EMPTY)),e}refCount(){return $()(this)}}const q=(()=>{const e=Q.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}})();class X extends T{constructor(e,n){super(e),this.connectable=n}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const n=e._connection;e._refCount=0,e._subject=null,e._connection=null,n&&n.unsubscribe()}}}function Z(){return new C}function J(e,n,l){return(()=>{const t=function(e){return function(...n){if(e){const l=e(...n);for(const e in l)this[e]=l[e]}}}(n);function i(...e){if(this instanceof i)return t.apply(this,e),this;const n=new i(...e);return l.annotation=n,l;function l(e,l,t){const i=e.hasOwnProperty("__parameters__")?e.__parameters__:Object.defineProperty(e,"__parameters__",{value:[]}).__parameters__;for(;i.length<=t;)i.push(null);return(i[t]=i[t]||[]).push(n),e}}return l&&(i.prototype=Object.create(l.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})()}const ee=J("Inject",e=>({token:e})),ne=J("Optional"),le=J("Self"),te=J("SkipSelf");var ie=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({});function se(e){for(let n in e)if(e[n]===se)return n;throw Error("Could not find renamed property on target object.")}function re(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function ue(e){return oe(e,e[ae])||oe(e,e[ce])}function oe(e,n){return n&&n.token===e?n:null}const ae=se({\u0275prov:se}),ce=se({ngInjectableDef:se});function he(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(he).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return""+e.overriddenName;if(e.name)return""+e.name;const n=e.toString();if(null==n)return""+n;const l=n.indexOf("\n");return-1===l?n:n.substring(0,l)}const de=se({__forward_ref__:se});function ge(e){return e.__forward_ref__=ge,e.toString=function(){return he(this())},e}function pe(e){return"function"==typeof(n=e)&&n.hasOwnProperty(de)&&n.__forward_ref__===ge?e():e;var n}const me="undefined"!=typeof globalThis&&globalThis,fe="undefined"!=typeof window&&window,Se="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ee="undefined"!=typeof global&&global,ve=me||Ee||fe||Se;class Re{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=re({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}toString(){return"InjectionToken "+this._desc}}const Oe=new Re("INJECTOR",-1),Te={},Ce=/\n/gm,Ie=se({provide:String,useValue:se});let be=void 0;function ye(e){const n=be;return be=e,n}function Ae(e,n=ie.Default){return function(e,n=ie.Default){if(void 0===be)throw new Error("inject() must be called from an injection context");return null===be?function(e,n,l){const t=ue(e);if(t&&"root"==t.providedIn)return void 0===t.value?t.value=t.factory():t.value;if(l&ie.Optional)return null;throw new Error(`Injector: NOT_FOUND [${he(e)}]`)}(e,0,n):be.get(e,n&ie.Optional?null:void 0,n)}(pe(e),n)}const Ne=Ae;class _e{get(e,n=Te){if(n===Te){const n=new Error(`NullInjectorError: No provider for ${he(e)}!`);throw n.name="NullInjectorError",n}return n}}function we(e,n,l,t=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let i=he(n);if(Array.isArray(n))i=n.map(he).join(" -> ");else if("object"==typeof n){let e=[];for(let l in n)if(n.hasOwnProperty(l)){let t=n[l];e.push(l+":"+("string"==typeof t?JSON.stringify(t):he(t)))}i=`{${e.join(", ")}}`}return`${l}${t?"("+t+")":""}[${i}]: ${e.replace(Ce,"\n  ")}`}class Pe{}class Me{}function De(e,n,l){n>=e.length?e.push(l):e.splice(n,0,l)}function Le(e,n){return n>=e.length-1?e.pop():e.splice(n,1)[0]}function xe(e,n){const l=[];for(let t=0;t<e;t++)l.push(n);return l}var ke=function(e){return e[e.Emulated=0]="Emulated",e[e.Native=1]="Native",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}({});class Fe{constructor(e,n,l){this.previousValue=e,this.currentValue=n,this.firstChange=l}isFirstChange(){return this.firstChange}}let Ue=void 0;const He=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(ve))();function Ge(e){return e.ngDebugContext}function Be(e){return e.ngOriginalError}function Ve(e,...n){e.error(...n)}class We{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e),l=this._findContext(e),t=function(e){return e.ngErrorLogger||Ve}(e);t(this._console,"ERROR",e),n&&t(this._console,"ORIGINAL ERROR",n),l&&t(this._console,"ERROR CONTEXT",l)}_findContext(e){return e?Ge(e)?Ge(e):this._findContext(Be(e)):null}_findOriginalError(e){let n=Be(e);for(;n&&Be(n);)n=Be(n);return n}}class Ye{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"}}class ze extends Ye{getTypeName(){return"HTML"}}class $e extends Ye{getTypeName(){return"Style"}}class Ke extends Ye{getTypeName(){return"Script"}}class je extends Ye{getTypeName(){return"URL"}}class Qe extends Ye{getTypeName(){return"ResourceURL"}}function qe(e){return e instanceof Ye?e.changingThisBreaksApplicationSecurity:e}function Xe(e,n){const l=Ze(e);if(null!=l&&l!==n){if("ResourceURL"===l&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${l} (see http://g.co/ng/security#xss)`)}return l===n}function Ze(e){return e instanceof Ye&&e.getTypeName()||null}let Je=!0,en=!1;function nn(){return en=!0,Je}class ln{getInertBodyElement(e){e="<body><remove></remove>"+e+"</body>";try{const n=(new window.DOMParser).parseFromString(e,"text/html").body;return n.removeChild(n.firstChild),n}catch(n){return null}}}class tn{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const n=this.inertDocument.createElement("body");e.appendChild(n)}}getInertBodyElement(e){const n=this.inertDocument.createElement("template");if("content"in n)return n.innerHTML=e,n;const l=this.inertDocument.createElement("body");return l.innerHTML=e,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(l),l}stripCustomNsAttrs(e){const n=e.attributes;for(let t=n.length-1;0<t;t--){const l=n.item(t).name;"xmlns:ns1"!==l&&0!==l.indexOf("ns1:")||e.removeAttribute(l)}let l=e.firstChild;for(;l;)l.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(l),l=l.nextSibling}}const sn=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,rn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function un(e){return(e=String(e)).match(sn)||e.match(rn)?e:(nn()&&console.warn(`WARNING: sanitizing unsafe URL value ${e} (see http://g.co/ng/security#xss)`),"unsafe:"+e)}function on(e){const n={};for(const l of e.split(","))n[l]=!0;return n}function an(...e){const n={};for(const l of e)for(const e in l)l.hasOwnProperty(e)&&(n[e]=!0);return n}const cn=on("area,br,col,hr,img,wbr"),hn=on("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),dn=on("rp,rt"),gn=an(dn,hn),pn=an(cn,an(hn,on("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),an(dn,on("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),gn),mn=on("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),fn=on("srcset"),Sn=an(mn,fn,on("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),on("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),En=on("script,style,template");class vn{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let n=e.firstChild,l=!0;for(;n;)if(n.nodeType===Node.ELEMENT_NODE?l=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,l&&n.firstChild)n=n.firstChild;else for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let e=this.checkClobberedElement(n,n.nextSibling);if(e){n=e;break}n=this.checkClobberedElement(n,n.parentNode)}return this.buf.join("")}startElement(e){const n=e.nodeName.toLowerCase();if(!pn.hasOwnProperty(n))return this.sanitizedSomething=!0,!En.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);const l=e.attributes;for(let i=0;i<l.length;i++){const e=l.item(i),n=e.name,s=n.toLowerCase();if(!Sn.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let r=e.value;mn[s]&&(r=un(r)),fn[s]&&(t=r,r=(t=String(t)).split(",").map(e=>un(e.trim())).join(", ")),this.buf.push(" ",n,'="',Tn(r),'"')}var t;return this.buf.push(">"),!0}endElement(e){const n=e.nodeName.toLowerCase();pn.hasOwnProperty(n)&&!cn.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(Tn(e))}checkClobberedElement(e,n){if(n&&(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+e.outerHTML);return n}}const Rn=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,On=/([^\#-~ |!])/g;function Tn(e){return e.replace(/&/g,"&amp;").replace(Rn,(function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"})).replace(On,(function(e){return"&#"+e.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Cn;function In(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var bn=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}({});const yn=/([A-Z])/g;function An(e){try{return null!=e?e.toString().slice(0,30):e}catch(n){return"[ERROR] Exception while trying to serialize the value"}}let Nn=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>_n(),e})();const _n=(...e)=>{},wn=new Re("Set Injector scope."),Pn=function(e,n,l){return new Fn(e,n,l)};let Mn=(()=>{class e{static create(e,n){return Array.isArray(e)?Pn(e,n,""):Pn(e.providers,e.parent,e.name||"")}}return e.THROW_IF_NOT_FOUND=Te,e.NULL=new _e,e.\u0275prov=re({token:e,providedIn:"any",factory:()=>Ae(Oe)}),e.__NG_ELEMENT_ID__=-1,e})();const Dn=function(e){return e},Ln=[],xn=Dn,kn=function(){return Array.prototype.slice.call(arguments)};class Fn{constructor(e,n=Mn.NULL,l=null){this.parent=n,this.source=l;const t=this._records=new Map;t.set(Mn,{token:Mn,fn:Dn,deps:Ln,value:this,useNew:!1}),t.set(Oe,{token:Oe,fn:Dn,deps:Ln,value:this,useNew:!1}),this.scope=function e(n,l){let t=null;if(l)if(l=pe(l),Array.isArray(l))for(let i=0;i<l.length;i++)t=e(n,l[i])||t;else{if("function"==typeof l)throw Gn("Function/Class not supported",l);if(!l||"object"!=typeof l||!l.provide)throw Gn("Unexpected provider",l);{let e=pe(l.provide);const i=Un(l);if(!0===l.multi){let t=n.get(e);if(t){if(t.fn!==kn)throw Hn(e)}else n.set(e,t={token:l.provide,deps:[],useNew:!1,fn:kn,value:Ln});e=l,t.deps.push({token:e,options:6})}const s=n.get(e);if(s&&s.fn==kn)throw Hn(e);e===wn&&(t=i.value),n.set(e,i)}}return t}(t,e)}get(e,n,l=ie.Default){const t=this._records;let i=t.get(e);if(void 0===i){const n=ue(e);if(n){const l=n&&n.providedIn;("any"===l||null!=l&&l===this.scope)&&t.set(e,i=Un({provide:e,useFactory:n.factory,deps:Ln}))}void 0===i&&t.set(e,null)}let s=ye(this);try{return function e(n,l,t,i,s,r){try{return function(n,l,t,i,s,r){let u;if(!l||r&ie.SkipSelf)u=r&ie.Self?Mn.NULL.get(n,r&ie.Optional?void 0!==s?s:null:s):i.get(n,s,ie.Default);else{if(u=l.value,u==xn)throw Error("\u0275Circular dependency");if(u===Ln){l.value=xn;let n=void 0,s=l.useNew,r=l.fn,o=l.deps,a=Ln;if(o.length){a=[];for(let n=0;n<o.length;n++){const l=o[n],s=l.options,r=2&s?t.get(l.token):void 0;a.push(e(l.token,r,t,r||4&s?i:Mn.NULL,1&s?null:Mn.THROW_IF_NOT_FOUND,ie.Default))}}l.value=u=s?new r(...a):r.apply(n,a)}}return u}(n,l,t,i,s,r)}catch(u){throw u instanceof Error||(u=new Error(u)),(u.ngTempTokenPath=u.ngTempTokenPath||[]).unshift(n),l&&l.value==xn&&(l.value=Ln),u}}(e,i,t,this.parent,n,l)}catch(r){return function(e,n,l,t){const i=e.ngTempTokenPath;throw n.__source&&i.unshift(n.__source),e.message=we("\n"+e.message,i,"StaticInjectorError",t),e.ngTokenPath=i,e.ngTempTokenPath=null,e}(r,e,0,this.source)}finally{ye(s)}}toString(){const e=[];return this._records.forEach((n,l)=>e.push(he(l))),`StaticInjector[${e.join(", ")}]`}}function Un(e){const n=function(e){let n=Ln;const l=e.deps;if(l&&l.length){n=[];for(let e=0;e<l.length;e++){let t=6,i=pe(l[e]);if(Array.isArray(i))for(let e=0,n=i;e<n.length;e++){const l=n[e];l instanceof ne||l==ne?t|=1:l instanceof te||l==te?t&=-3:l instanceof le||l==le?t&=-5:i=l instanceof ee?l.token:pe(l)}n.push({token:i,options:t})}}else if(e.useExisting)n=[{token:pe(e.useExisting),options:6}];else if(!l&&!(Ie in e))throw Gn("'deps' required",e);return n}(e);let l=Dn,t=Ln,i=!1,s=pe(e.provide);if(Ie in e)t=e.useValue;else if(e.useFactory)l=e.useFactory;else if(e.useExisting);else if(e.useClass)i=!0,l=pe(e.useClass);else{if("function"!=typeof s)throw Gn("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",e);i=!0,l=s}return{deps:n,fn:l,useNew:i,value:t}}function Hn(e){return Gn("Cannot mix multi providers and regular providers",e)}function Gn(e,n){return new Error(we(e,n,"StaticInjectorError"))}const Bn=new Re("AnalyzeForEntryComponents");let Vn=null;function Wn(){if(!Vn){const e=ve.Symbol;if(e&&e.iterator)Vn=e.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<e.length;++n){const l=e[n];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Vn=l)}}}return Vn}function Yn(e,n){const l=$n(e),t=$n(n);if(l&&t)return function(e,n,l){const t=e[Wn()](),i=n[Wn()]();for(;;){const e=t.next(),n=i.next();if(e.done&&n.done)return!0;if(e.done||n.done)return!1;if(!l(e.value,n.value))return!1}}(e,n,Yn);{const i=e&&("object"==typeof e||"function"==typeof e),s=n&&("object"==typeof n||"function"==typeof n);return!(l||!i||t||!s)||Object.is(e,n)}}class zn{constructor(e){this.wrapped=e}static wrap(e){return new zn(e)}static unwrap(e){return zn.isWrapped(e)?e.wrapped:e}static isWrapped(e){return e instanceof zn}}function $n(e){return!!Kn(e)&&(Array.isArray(e)||!(e instanceof Map)&&Wn()in e)}function Kn(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function jn(e){return!!e&&"function"==typeof e.then}function Qn(e){return!!e&&"function"==typeof e.subscribe}class qn{}function Xn(e){const n=Error(`No component factory found for ${he(e)}. Did you add it to @NgModule.entryComponents?`);return n[Zn]=e,n}const Zn="ngComponent";class Jn{resolveComponentFactory(e){throw Xn(e)}}let el=(()=>{class e{}return e.NULL=new Jn,e})();class nl{constructor(e,n,l){this._parent=n,this._ngModule=l,this._factories=new Map;for(let t=0;t<e.length;t++){const n=e[t];this._factories.set(n.componentType,n)}}resolveComponentFactory(e){let n=this._factories.get(e);if(!n&&this._parent&&(n=this._parent.resolveComponentFactory(e)),!n)throw Xn(e);return new ll(n,this._ngModule)}}class ll extends qn{constructor(e,n){super(),this.factory=e,this.ngModule=n,this.selector=e.selector,this.componentType=e.componentType,this.ngContentSelectors=e.ngContentSelectors,this.inputs=e.inputs,this.outputs=e.outputs}create(e,n,l,t){return this.factory.create(e,n,l,t||this.ngModule)}}function tl(...e){}let il=(()=>{class e{constructor(e){this.nativeElement=e}}return e.__NG_ELEMENT_ID__=()=>sl(e),e})();const sl=tl;class rl{}var ul=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}({});let ol=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>al(),e})();const al=tl;let cl=(()=>{class e{}return e.\u0275prov=re({token:e,providedIn:"root",factory:()=>null}),e})();class hl{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const dl=new hl("10.0.9");class gl{constructor(){}supports(e){return $n(e)}create(e){return new ml(e)}}const pl=(e,n)=>n;class ml{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||pl}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,l=this._removalsHead,t=0,i=null;for(;n||l;){const s=!l||n&&n.currentIndex<vl(l,t,i)?n:l,r=vl(s,t,i),u=s.currentIndex;if(s===l)t--,l=l._nextRemoved;else if(n=n._next,null==s.previousIndex)t++;else{i||(i=[]);const e=r-t,n=u-t;if(e!=n){for(let l=0;l<e;l++){const t=l<i.length?i[l]:i[l]=0,s=t+l;n<=s&&s<e&&(i[l]=t+1)}i[s.previousIndex]=n-e}}r!==u&&e(s,r,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!$n(e))throw new Error(`Error trying to diff '${he(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n,l,t,i=this._itHead,s=!1;if(Array.isArray(e)){this.length=e.length;for(let n=0;n<this.length;n++)l=e[n],t=this._trackByFn(n,l),null!==i&&Object.is(i.trackById,t)?(s&&(i=this._verifyReinsertion(i,l,t,n)),Object.is(i.item,l)||this._addIdentityChange(i,l)):(i=this._mismatch(i,l,t,n),s=!0),i=i._next}else n=0,function(e,n){if(Array.isArray(e))for(let l=0;l<e.length;l++)n(e[l]);else{const l=e[Wn()]();let t;for(;!(t=l.next()).done;)n(t.value)}}(e,e=>{t=this._trackByFn(n,e),null!==i&&Object.is(i.trackById,t)?(s&&(i=this._verifyReinsertion(i,e,t,n)),Object.is(i.item,e)||this._addIdentityChange(i,e)):(i=this._mismatch(i,e,t,n),s=!0),i=i._next,n++}),this.length=n;return this._truncate(i),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e,n;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=n)e.previousIndex=e.currentIndex,n=e._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,l,t){let i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(l,t))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,i,t)):null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,i,t)):e=this._addAfter(new fl(n,l),i,t),e}_verifyReinsertion(e,n,l,t){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==i?e=this._reinsertAfter(i,e._prev,t):e.currentIndex!=t&&(e.currentIndex=t,this._addToMoves(e,t)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const t=e._prevRemoved,i=e._nextRemoved;return null===t?this._removalsHead=i:t._nextRemoved=i,null===i?this._removalsTail=t:i._prevRemoved=t,this._insertAfter(e,n,l),this._addToMoves(e,l),e}_moveAfter(e,n,l){return this._unlink(e),this._insertAfter(e,n,l),this._addToMoves(e,l),e}_addAfter(e,n,l){return this._insertAfter(e,n,l),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,l){const t=null===n?this._itHead:n._next;return e._next=t,e._prev=n,null===t?this._itTail=e:t._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new El),this._linkedRecords.put(e),e.currentIndex=l,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,l=e._next;return null===n?this._itHead=l:n._next=l,null===l?this._itTail=n:l._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new El),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class fl{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Sl{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===n||n<=l.currentIndex)&&Object.is(l.trackById,e))return l;return null}remove(e){const n=e._prevDup,l=e._nextDup;return null===n?this._head=l:n._nextDup=l,null===l?this._tail=n:l._prevDup=n,null===this._head}}class El{constructor(){this.map=new Map}put(e){const n=e.trackById;let l=this.map.get(n);l||(l=new Sl,this.map.set(n,l)),l.add(e)}get(e,n){const l=this.map.get(e);return l?l.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function vl(e,n,l){const t=e.previousIndex;if(null===t)return t;let i=0;return l&&t<l.length&&(i=l[t]),t+n+i}class Rl{constructor(){}supports(e){return e instanceof Map||Kn(e)}create(){return new Ol}}class Ol{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let n;for(n=this._mapHead;null!==n;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}diff(e){if(e){if(!(e instanceof Map||Kn(e)))throw new Error(`Error trying to diff '${he(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(e,l)=>{if(n&&n.key===l)this._maybeAddToChanges(n,e),this._appendAfter=n,n=n._next;else{const t=this._getOrCreateRecordForKey(l,e);n=this._insertBeforeOrAppend(n,t)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let e=n;null!==e;e=e._nextRemoved)e===this._mapHead&&(this._mapHead=null),this._records.delete(e.key),e._nextRemoved=e._next,e.previousValue=e.currentValue,e.currentValue=null,e._prev=null,e._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){const l=e._prev;return n._next=e,n._prev=l,e._prev=n,l&&(l._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){const l=this._records.get(e);this._maybeAddToChanges(l,n);const t=l._prev,i=l._next;return t&&(t._next=i),i&&(i._prev=t),l._next=null,l._prev=null,l}const l=new Tl(e);return this._records.set(e,l),l.currentValue=n,this._addToAdditions(l),l}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(l=>n(e[l],l))}}class Tl{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let Cl=(()=>{class e{constructor(e){this.factories=e}static create(n,l){if(null!=l){const e=l.factories.slice();n=n.concat(e)}return new e(n)}static extend(n){return{provide:e,useFactory:l=>{if(!l)throw new Error("Cannot extend IterableDiffers without a parent injector");return e.create(n,l)},deps:[[e,new te,new ne]]}}find(e){const n=this.factories.find(n=>n.supports(e));if(null!=n)return n;throw new Error(`Cannot find a differ supporting object '${e}' of type '${l=e,l.name||typeof l}'`);var l}}return e.\u0275prov=re({token:e,providedIn:"root",factory:()=>new e([new gl])}),e})(),Il=(()=>{class e{constructor(e){this.factories=e}static create(n,l){if(l){const e=l.factories.slice();n=n.concat(e)}return new e(n)}static extend(n){return{provide:e,useFactory:l=>{if(!l)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return e.create(n,l)},deps:[[e,new te,new ne]]}}find(e){const n=this.factories.find(n=>n.supports(e));if(n)return n;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return e.\u0275prov=re({token:e,providedIn:"root",factory:()=>new e([new Rl])}),e})();const bl=[new Rl],yl=new Cl([new gl]),Al=new Il(bl);let Nl=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>_l(e,il),e})();const _l=tl;let wl=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>Pl(e,il),e})();const Pl=tl;function Ml(e,n,l,t){let i=`ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '${n}'. Current value: '${l}'.`;return t&&(i+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(e,n){const l=new Error(e);return Dl(l,n),l}(i,e)}function Dl(e,n){e.ngDebugContext=n,e.ngErrorLogger=n.logError.bind(n)}function Ll(e){return new Error("ViewDestroyedError: Attempt to use a destroyed view: "+e)}function xl(e,n,l){const t=e.state,i=1792&t;return i===n?(e.state=-1793&t|l,e.initIndex=-1,!0):i===l}function kl(e,n,l){return(1792&e.state)===n&&e.initIndex<=l&&(e.initIndex=l+1,!0)}function Fl(e,n){return e.nodes[n]}function Ul(e,n){return e.nodes[n]}function Hl(e,n){return e.nodes[n]}function Gl(e,n){return e.nodes[n]}function Bl(e,n){return e.nodes[n]}const Vl={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0},Wl=()=>{},Yl=new Map;function zl(e){let n=Yl.get(e);return n||(n=he(e)+"_"+Yl.size,Yl.set(e,n)),n}function $l(e,n,l,t){if(zn.isWrapped(t)){t=zn.unwrap(t);const i=e.def.nodes[n].bindingIndex+l,s=zn.unwrap(e.oldValues[i]);e.oldValues[i]=new zn(s)}return t}function Kl(e){return{id:"$$undefined",styles:e.styles,encapsulation:e.encapsulation,data:e.data}}let jl=0;function Ql(e,n,l,t){return!(!(2&e.state)&&Object.is(e.oldValues[n.bindingIndex+l],t))}function ql(e,n,l,t){return!!Ql(e,n,l,t)&&(e.oldValues[n.bindingIndex+l]=t,!0)}function Xl(e,n,l,t){const i=e.oldValues[n.bindingIndex+l];if(1&e.state||!Yn(i,t)){const s=n.bindings[l].name;throw Ml(Vl.createDebugContext(e,n.nodeIndex),`${s}: ${i}`,`${s}: ${t}`,0!=(1&e.state))}}function Zl(e){let n=e;for(;n;)2&n.def.flags&&(n.state|=8),n=n.viewContainerParent||n.parent}function Jl(e,n){let l=e;for(;l&&l!==n;)l.state|=64,l=l.viewContainerParent||l.parent}function et(e,n,l,t){try{return Zl(33554432&e.def.nodes[n].flags?Ul(e,n).componentView:e),Vl.handleEvent(e,n,l,t)}catch(i){e.root.errorHandler.handleError(i)}}function nt(e){return e.parent?Ul(e.parent,e.parentNodeDef.nodeIndex):null}function lt(e){return e.parent?e.parentNodeDef.parent:null}function tt(e,n){switch(201347067&n.flags){case 1:return Ul(e,n.nodeIndex).renderElement;case 2:return Fl(e,n.nodeIndex).renderText}}function it(e){return!!e.parent&&!!(32768&e.parentNodeDef.flags)}function st(e){return!(!e.parent||32768&e.parentNodeDef.flags)}function rt(e){return 1<<e%32}function ut(e){const n={};let l=0;const t={};return e&&e.forEach(([e,i])=>{"number"==typeof e?(n[e]=i,l|=rt(e)):t[e]=i}),{matchedQueries:n,references:t,matchedQueryIds:l}}function ot(e,n){return e.map(e=>{let l,t;return Array.isArray(e)?[t,l]=e:(t=0,l=e),l&&("function"==typeof l||"object"==typeof l)&&n&&Object.defineProperty(l,"__source",{value:n,configurable:!0}),{flags:t,token:l,tokenKey:zl(l)}})}function at(e,n,l){let t=l.renderParent;return t?0==(1&t.flags)||0==(33554432&t.flags)||t.element.componentRendererType&&t.element.componentRendererType.encapsulation===ke.Native?Ul(e,l.renderParent.nodeIndex).renderElement:void 0:n}const ct=new WeakMap;function ht(e){let n=ct.get(e);return n||(n=e(()=>Wl),n.factory=e,ct.set(e,n)),n}function dt(e,n,l,t,i){3===n&&(l=e.renderer.parentNode(tt(e,e.def.lastRenderRootNode))),gt(e,n,0,e.def.nodes.length-1,l,t,i)}function gt(e,n,l,t,i,s,r){for(let u=l;u<=t;u++){const l=e.def.nodes[u];11&l.flags&&mt(e,l,n,i,s,r),u+=l.childCount}}function pt(e,n,l,t,i,s){let r=e;for(;r&&!it(r);)r=r.parent;const u=r.parent,o=lt(r),a=o.nodeIndex+o.childCount;for(let c=o.nodeIndex+1;c<=a;c++){const e=u.def.nodes[c];e.ngContentIndex===n&&mt(u,e,l,t,i,s),c+=e.childCount}if(!u.parent){const r=e.root.projectableNodes[n];if(r)for(let n=0;n<r.length;n++)ft(e,r[n],l,t,i,s)}}function mt(e,n,l,t,i,s){if(8&n.flags)pt(e,n.ngContent.index,l,t,i,s);else{const r=tt(e,n);if(3===l&&33554432&n.flags&&48&n.bindingFlags?(16&n.bindingFlags&&ft(e,r,l,t,i,s),32&n.bindingFlags&&ft(Ul(e,n.nodeIndex).componentView,r,l,t,i,s)):ft(e,r,l,t,i,s),16777216&n.flags){const r=Ul(e,n.nodeIndex).viewContainer._embeddedViews;for(let e=0;e<r.length;e++)dt(r[e],l,t,i,s)}1&n.flags&&!n.element.name&&gt(e,l,n.nodeIndex+1,n.nodeIndex+n.childCount,t,i,s)}}function ft(e,n,l,t,i,s){const r=e.renderer;switch(l){case 1:r.appendChild(t,n);break;case 2:r.insertBefore(t,n,i);break;case 3:r.removeChild(t,n);break;case 0:s.push(n)}}const St=/^:([^:]+):(.+)$/;function Et(e){if(":"===e[0]){const n=e.match(St);return[n[1],n[2]]}return["",e]}function vt(e){let n=0;for(let l=0;l<e.length;l++)n|=e[l].flags;return n}function Rt(e,n,l,t,i,s,r,u,o,a,c,h,d,g,p,m,f,S,E,v){switch(e){case 1:return n+Ot(l)+t;case 2:return n+Ot(l)+t+Ot(i)+s;case 3:return n+Ot(l)+t+Ot(i)+s+Ot(r)+u;case 4:return n+Ot(l)+t+Ot(i)+s+Ot(r)+u+Ot(o)+a;case 5:return n+Ot(l)+t+Ot(i)+s+Ot(r)+u+Ot(o)+a+Ot(c)+h;case 6:return n+Ot(l)+t+Ot(i)+s+Ot(r)+u+Ot(o)+a+Ot(c)+h+Ot(d)+g;case 7:return n+Ot(l)+t+Ot(i)+s+Ot(r)+u+Ot(o)+a+Ot(c)+h+Ot(d)+g+Ot(p)+m;case 8:return n+Ot(l)+t+Ot(i)+s+Ot(r)+u+Ot(o)+a+Ot(c)+h+Ot(d)+g+Ot(p)+m+Ot(f)+S;case 9:return n+Ot(l)+t+Ot(i)+s+Ot(r)+u+Ot(o)+a+Ot(c)+h+Ot(d)+g+Ot(p)+m+Ot(f)+S+Ot(E)+v;default:throw new Error("Does not support more than 9 expressions")}}function Ot(e){return null!=e?e.toString():""}const Tt={},Ct=zl(Mn),It=zl(Oe),bt=zl(Pe);function yt(e,n,l,t){return l=pe(l),{index:-1,deps:ot(t,he(n)),flags:e,token:n,value:l}}function At(e,n,l=Mn.THROW_IF_NOT_FOUND){const t=ye(e);try{if(8&n.flags)return n.token;if(2&n.flags&&(l=null),1&n.flags)return e._parent.get(n.token,l);const i=n.tokenKey;switch(i){case Ct:case It:case bt:return e}const s=e._def.providersByKey[i];let r;if(s){let n=e._providers[s.index];return void 0===n&&(n=e._providers[s.index]=Nt(e,s)),n===Tt?void 0:n}if((r=ue(n.token))&&function(e,n){const l=n.providedIn;return null!=l&&("any"===l||l===e._def.scope||function(e,n){return e._def.modules.indexOf(n)>-1}(e,l))}(e,r)){const l=e._providers.length;return e._def.providers[l]=e._def.providersByKey[n.tokenKey]={flags:5120,value:r.factory,deps:[],index:l,token:n.token},e._providers[l]=Tt,e._providers[l]=Nt(e,e._def.providersByKey[n.tokenKey])}return 4&n.flags?l:e._parent.get(n.token,l)}finally{ye(t)}}function Nt(e,n){let l;switch(201347067&n.flags){case 512:l=function(e,n,l){const t=l.length;switch(t){case 0:return new n;case 1:return new n(At(e,l[0]));case 2:return new n(At(e,l[0]),At(e,l[1]));case 3:return new n(At(e,l[0]),At(e,l[1]),At(e,l[2]));default:const i=[];for(let n=0;n<t;n++)i[n]=At(e,l[n]);return new n(...i)}}(e,n.value,n.deps);break;case 1024:l=function(e,n,l){const t=l.length;switch(t){case 0:return n();case 1:return n(At(e,l[0]));case 2:return n(At(e,l[0]),At(e,l[1]));case 3:return n(At(e,l[0]),At(e,l[1]),At(e,l[2]));default:const i=[];for(let n=0;n<t;n++)i[n]=At(e,l[n]);return n(...i)}}(e,n.value,n.deps);break;case 2048:l=At(e,n.deps[0]);break;case 256:l=n.value}return l===Tt||null===l||"object"!=typeof l||131072&n.flags||"function"!=typeof l.ngOnDestroy||(n.flags|=131072),void 0===l?Tt:l}function _t(e,n){const l=e.viewContainer._embeddedViews;if((null==n||n>=l.length)&&(n=l.length-1),n<0)return null;const t=l[n];return t.viewContainerParent=null,Le(l,n),Vl.dirtyParentQueries(t),Pt(t),t}function wt(e,n,l){const t=n?tt(n,n.def.lastRenderRootNode):e.renderElement,i=l.renderer.parentNode(t),s=l.renderer.nextSibling(t);dt(l,2,i,s,void 0)}function Pt(e){dt(e,3,null,null,void 0)}const Mt={};function Dt(e,n,l,t,i,s){return new Lt(e,n,l,t,i,s)}class Lt extends qn{constructor(e,n,l,t,i,s){super(),this.selector=e,this.componentType=n,this._inputs=t,this._outputs=i,this.ngContentSelectors=s,this.viewDefFactory=l}get inputs(){const e=[],n=this._inputs;for(let l in n)e.push({propName:l,templateName:n[l]});return e}get outputs(){const e=[];for(let n in this._outputs)e.push({propName:n,templateName:this._outputs[n]});return e}create(e,n,l,t){if(!t)throw new Error("ngModule should be provided");const i=ht(this.viewDefFactory),s=i.nodes[0].element.componentProvider.nodeIndex,r=Vl.createRootView(e,n||[],l,i,t,Mt),u=Hl(r,s).instance;return l&&r.renderer.setAttribute(Ul(r,0).renderElement,"ng-version",dl.full),new xt(r,new Ht(r),u)}}class xt extends class{}{constructor(e,n,l){super(),this._view=e,this._viewRef=n,this._component=l,this._elDef=this._view.def.nodes[0],this.hostView=n,this.changeDetectorRef=n,this.instance=l}get location(){return new il(Ul(this._view,this._elDef.nodeIndex).renderElement)}get injector(){return new Wt(this._view,this._elDef)}get componentType(){return this._component.constructor}destroy(){this._viewRef.destroy()}onDestroy(e){this._viewRef.onDestroy(e)}}function kt(e,n,l){return new Ft(e,n,l)}class Ft{constructor(e,n,l){this._view=e,this._elDef=n,this._data=l,this._embeddedViews=[]}get element(){return new il(this._data.renderElement)}get injector(){return new Wt(this._view,this._elDef)}get parentInjector(){let e=this._view,n=this._elDef.parent;for(;!n&&e;)n=lt(e),e=e.parent;return e?new Wt(e,n):new Wt(this._view,null)}clear(){for(let e=this._embeddedViews.length-1;e>=0;e--){const n=_t(this._data,e);Vl.destroyView(n)}}get(e){const n=this._embeddedViews[e];if(n){const e=new Ht(n);return e.attachToViewContainerRef(this),e}return null}get length(){return this._embeddedViews.length}createEmbeddedView(e,n,l){const t=e.createEmbeddedView(n||{});return this.insert(t,l),t}createComponent(e,n,l,t,i){const s=l||this.parentInjector;i||e instanceof ll||(i=s.get(Pe));const r=e.create(s,t,void 0,i);return this.insert(r.hostView,n),r}insert(e,n){if(e.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");const l=e;return function(e,n,l,t){let i=n.viewContainer._embeddedViews;null==l&&(l=i.length),t.viewContainerParent=e,De(i,l,t),function(e,n){const l=nt(n);if(!l||l===e||16&n.state)return;n.state|=16;let t=l.template._projectedViews;t||(t=l.template._projectedViews=[]),t.push(n),function(e,n){if(4&n.flags)return;e.nodeFlags|=4,n.flags|=4;let l=n.parent;for(;l;)l.childFlags|=4,l=l.parent}(n.parent.def,n.parentNodeDef)}(n,t),Vl.dirtyParentQueries(t),wt(n,l>0?i[l-1]:null,t)}(this._view,this._data,n,l._view),l.attachToViewContainerRef(this),e}move(e,n){if(e.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");const l=this._embeddedViews.indexOf(e._view);return function(e,n,l){const t=e.viewContainer._embeddedViews,i=t[n];Le(t,n),null==l&&(l=t.length),De(t,l,i),Vl.dirtyParentQueries(i),Pt(i),wt(e,l>0?t[l-1]:null,i)}(this._data,l,n),e}indexOf(e){return this._embeddedViews.indexOf(e._view)}remove(e){const n=_t(this._data,e);n&&Vl.destroyView(n)}detach(e){const n=_t(this._data,e);return n?new Ht(n):null}}function Ut(e){return new Ht(e)}class Ht{constructor(e){this._view=e,this._viewContainerRef=null,this._appRef=null}get rootNodes(){return function(e){const n=[];return dt(e,0,void 0,void 0,n),n}(this._view)}get context(){return this._view.context}get destroyed(){return 0!=(128&this._view.state)}markForCheck(){Zl(this._view)}detach(){this._view.state&=-5}detectChanges(){const e=this._view.root.rendererFactory;e.begin&&e.begin();try{Vl.checkAndUpdateView(this._view)}finally{e.end&&e.end()}}checkNoChanges(){Vl.checkNoChangesView(this._view)}reattach(){this._view.state|=4}onDestroy(e){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(e)}destroy(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),Vl.destroyView(this._view)}detachFromAppRef(){this._appRef=null,Pt(this._view),Vl.dirtyParentQueries(this._view)}attachToAppRef(e){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}attachToViewContainerRef(e){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=e}}function Gt(e,n){return new Bt(e,n)}class Bt extends Nl{constructor(e,n){super(),this._parentView=e,this._def=n}createEmbeddedView(e){return new Ht(Vl.createEmbeddedView(this._parentView,this._def,this._def.element.template,e))}get elementRef(){return new il(Ul(this._parentView,this._def.nodeIndex).renderElement)}}function Vt(e,n){return new Wt(e,n)}class Wt{constructor(e,n){this.view=e,this.elDef=n}get(e,n=Mn.THROW_IF_NOT_FOUND){return Vl.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:e,tokenKey:zl(e)},n)}}function Yt(e,n){const l=e.def.nodes[n];if(1&l.flags){const n=Ul(e,l.nodeIndex);return l.element.template?n.template:n.renderElement}if(2&l.flags)return Fl(e,l.nodeIndex).renderText;if(20240&l.flags)return Hl(e,l.nodeIndex).instance;throw new Error("Illegal state: read nodeValue for node index "+n)}function zt(e,n,l,t){return new $t(e,n,l,t)}class $t{constructor(e,n,l,t){this._moduleType=e,this._parent=n,this._bootstrapComponents=l,this._def=t,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(e){const n=e._def,l=e._providers=xe(n.providers.length);for(let t=0;t<n.providers.length;t++){const i=n.providers[t];4096&i.flags||void 0===l[t]&&(l[t]=Nt(e,i))}}(this)}get(e,n=Mn.THROW_IF_NOT_FOUND,l=ie.Default){let t=0;return l&ie.SkipSelf?t|=1:l&ie.Self&&(t|=4),At(this,{token:e,tokenKey:zl(e),flags:t},n)}get instance(){return this.get(this._moduleType)}get componentFactoryResolver(){return this.get(el)}destroy(){if(this._destroyed)throw new Error(`The ng module ${he(this.instance.constructor)} has already been destroyed.`);this._destroyed=!0,function(e,n){const l=e._def,t=new Set;for(let i=0;i<l.providers.length;i++)if(131072&l.providers[i].flags){const n=e._providers[i];if(n&&n!==Tt){const e=n.ngOnDestroy;"function"!=typeof e||t.has(n)||(e.apply(n),t.add(n))}}}(this),this._destroyListeners.forEach(e=>e())}onDestroy(e){this._destroyListeners.push(e)}}const Kt=zl(ol),jt=zl(il),Qt=zl(wl),qt=zl(Nl),Xt=zl(Nn),Zt=zl(Mn),Jt=zl(Oe);function ei(e,n,l,t,i,s,r,u){const o=[];if(r)for(let c in r){const[e,n]=r[c];o[e]={flags:8,name:c,nonMinifiedName:n,ns:null,securityContext:null,suffix:null}}const a=[];if(u)for(let c in u)a.push({type:1,propName:c,target:null,eventName:u[c]});return ti(e,n|=16384,l,t,i,i,s,o,a)}function ni(e,n,l){return ti(-1,e|=16,null,0,n,n,l)}function li(e,n,l,t,i){return ti(-1,e,n,0,l,t,i)}function ti(e,n,l,t,i,s,r,u,o){const{matchedQueries:a,references:c,matchedQueryIds:h}=ut(l);o||(o=[]),u||(u=[]),s=pe(s);const d=ot(r,he(i));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:n,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:a,matchedQueryIds:h,references:c,ngContentIndex:-1,childCount:t,bindings:u,bindingFlags:vt(u),outputs:o,element:null,provider:{token:i,value:s,deps:d},text:null,query:null,ngContent:null}}function ii(e,n){return oi(e,n)}function si(e,n){let l=e;for(;l.parent&&!it(l);)l=l.parent;return ai(l.parent,lt(l),!0,n.provider.value,n.provider.deps)}function ri(e,n){const l=ai(e,n.parent,(32768&n.flags)>0,n.provider.value,n.provider.deps);if(n.outputs.length)for(let t=0;t<n.outputs.length;t++){const i=n.outputs[t],s=l[i.propName];if(!Qn(s))throw new Error(`@Output ${i.propName} not initialized in '${l.constructor.name}'.`);{const l=s.subscribe(ui(e,n.parent.nodeIndex,i.eventName));e.disposables[n.outputIndex+t]=l.unsubscribe.bind(l)}}return l}function ui(e,n,l){return t=>et(e,n,l,t)}function oi(e,n){const l=(8192&n.flags)>0,t=n.provider;switch(201347067&n.flags){case 512:return ai(e,n.parent,l,t.value,t.deps);case 1024:return function(e,n,l,t,i){const s=i.length;switch(s){case 0:return t();case 1:return t(hi(e,n,l,i[0]));case 2:return t(hi(e,n,l,i[0]),hi(e,n,l,i[1]));case 3:return t(hi(e,n,l,i[0]),hi(e,n,l,i[1]),hi(e,n,l,i[2]));default:const r=[];for(let t=0;t<s;t++)r.push(hi(e,n,l,i[t]));return t(...r)}}(e,n.parent,l,t.value,t.deps);case 2048:return hi(e,n.parent,l,t.deps[0]);case 256:return t.value}}function ai(e,n,l,t,i){const s=i.length;switch(s){case 0:return new t;case 1:return new t(hi(e,n,l,i[0]));case 2:return new t(hi(e,n,l,i[0]),hi(e,n,l,i[1]));case 3:return new t(hi(e,n,l,i[0]),hi(e,n,l,i[1]),hi(e,n,l,i[2]));default:const r=[];for(let t=0;t<s;t++)r.push(hi(e,n,l,i[t]));return new t(...r)}}const ci={};function hi(e,n,l,t,i=Mn.THROW_IF_NOT_FOUND){if(8&t.flags)return t.token;const s=e;2&t.flags&&(i=null);const r=t.tokenKey;r===Xt&&(l=!(!n||!n.element.componentView)),n&&1&t.flags&&(l=!1,n=n.parent);let u=e;for(;u;){if(n)switch(r){case Kt:return di(u,n,l).renderer;case jt:return new il(Ul(u,n.nodeIndex).renderElement);case Qt:return Ul(u,n.nodeIndex).viewContainer;case qt:if(n.element.template)return Ul(u,n.nodeIndex).template;break;case Xt:return Ut(di(u,n,l));case Zt:case Jt:return Vt(u,n);default:const e=(l?n.element.allProviders:n.element.publicProviders)[r];if(e){let n=Hl(u,e.nodeIndex);return n||(n={instance:oi(u,e)},u.nodes[e.nodeIndex]=n),n.instance}}l=it(u),n=lt(u),u=u.parent,4&t.flags&&(u=null)}const o=s.root.injector.get(t.token,ci);return o!==ci||i===ci?o:s.root.ngModule.injector.get(t.token,i)}function di(e,n,l){let t;if(l)t=Ul(e,n.nodeIndex).componentView;else for(t=e;t.parent&&!it(t);)t=t.parent;return t}function gi(e,n,l,t,i,s){if(32768&l.flags){const n=Ul(e,l.parent.nodeIndex).componentView;2&n.def.flags&&(n.state|=8)}if(n.instance[l.bindings[t].name]=i,524288&l.flags){s=s||{};const n=zn.unwrap(e.oldValues[l.bindingIndex+t]);s[l.bindings[t].nonMinifiedName]=new Fe(n,i,0!=(2&e.state))}return e.oldValues[l.bindingIndex+t]=i,s}function pi(e,n){if(!(e.def.nodeFlags&n))return;const l=e.def.nodes;let t=0;for(let i=0;i<l.length;i++){const s=l[i];let r=s.parent;for(!r&&s.flags&n&&fi(e,i,s.flags&n,t++),0==(s.childFlags&n)&&(i+=s.childCount);r&&1&r.flags&&i===r.nodeIndex+r.childCount;)r.directChildFlags&n&&(t=mi(e,r,n,t)),r=r.parent}}function mi(e,n,l,t){for(let i=n.nodeIndex+1;i<=n.nodeIndex+n.childCount;i++){const n=e.def.nodes[i];n.flags&l&&fi(e,i,n.flags&l,t++),i+=n.childCount}return t}function fi(e,n,l,t){const i=Hl(e,n);if(!i)return;const s=i.instance;s&&(Vl.setCurrentNode(e,n),1048576&l&&kl(e,512,t)&&s.ngAfterContentInit(),2097152&l&&s.ngAfterContentChecked(),4194304&l&&kl(e,768,t)&&s.ngAfterViewInit(),8388608&l&&s.ngAfterViewChecked(),131072&l&&s.ngOnDestroy())}const Si=new Re("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>He}),Ei=void 0;var vi=["en",[["a","p"],["AM","PM"],Ei],[["AM","PM"],Ei,Ei],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ei,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ei,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ei,"{1} 'at' {0}",Ei],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){let n=Math.floor(Math.abs(e)),l=e.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===l?1:5}];let Ri={};function Oi(e){const n=function(e){return e.toLowerCase().replace(/_/g,"-")}(e);let l=Ti(n);if(l)return l;const t=n.split("-")[0];if(l=Ti(t),l)return l;if("en"===t)return vi;throw new Error(`Missing locale data for the locale "${e}".`)}function Ti(e){return e in Ri||(Ri[e]=ve.ng&&ve.ng.common&&ve.ng.common.locales&&ve.ng.common.locales[e]),Ri[e]}var Ci=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}({});const Ii=class extends C{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,l){let t,i=e=>null,s=()=>null;e&&"object"==typeof e?(t=this.__isAsync?n=>{setTimeout(()=>e.next(n))}:n=>{e.next(n)},e.error&&(i=this.__isAsync?n=>{setTimeout(()=>e.error(n))}:n=>{e.error(n)}),e.complete&&(s=this.__isAsync?()=>{setTimeout(()=>e.complete())}:()=>{e.complete()})):(t=this.__isAsync?n=>{setTimeout(()=>e(n))}:n=>{e(n)},n&&(i=this.__isAsync?e=>{setTimeout(()=>n(e))}:e=>{n(e)}),l&&(s=this.__isAsync?()=>{setTimeout(()=>l())}:()=>{l()}));const r=super.subscribe(t,i,s);return e instanceof h&&e.add(r),r}};function bi(){return this._results[Wn()]()}class yi{constructor(){this.dirty=!0,this._results=[],this.changes=new Ii,this.length=0;const e=Wn(),n=yi.prototype;n[e]||(n[e]=bi)}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e){this._results=function e(n,l){void 0===l&&(l=n);for(let t=0;t<n.length;t++){let i=n[t];Array.isArray(i)?(l===n&&(l=n.slice(0,t)),e(i,l)):l!==n&&l.push(i)}return l}(e),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}const Ai=new Re("Application Initializer");class Ni{constructor(e){this.appInits=e,this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}runInitializers(){if(this.initialized)return;const e=[],n=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const n=this.appInits[l]();jn(n)&&e.push(n)}Promise.all(e).then(()=>{n()}).catch(e=>{this.reject(e)}),0===e.length&&n(),this.initialized=!0}}const _i=new Re("AppId");function wi(){return`${Pi()}${Pi()}${Pi()}`}function Pi(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Mi=new Re("Platform Initializer"),Di=new Re("Platform ID"),Li=new Re("appBootstrapListener");class xi{log(e){console.log(e)}warn(e){console.warn(e)}}const ki=new Re("LocaleId"),Fi=new Re("DefaultCurrencyCode");function Ui(){throw new Error("Runtime compiler is not loaded")}const Hi=Ui,Gi=Ui,Bi=Ui,Vi=Ui;class Wi{constructor(){this.compileModuleSync=Hi,this.compileModuleAsync=Gi,this.compileModuleAndAllComponentsSync=Bi,this.compileModuleAndAllComponentsAsync=Vi}clearCache(){}clearCacheFor(e){}getModuleId(e){}}class Yi{}const zi=(()=>Promise.resolve(0))();function $i(e){"undefined"==typeof Zone?zi.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class Ki{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ii(!1),this.onMicrotaskEmpty=new Ii(!1),this.onStable=new Ii(!1),this.onError=new Ii(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=n,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){let e=ve.requestAnimationFrame,n=ve.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&n){const l=e[Zone.__symbol__("OriginalDelegate")];l&&(e=l);const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function(e){const n=!!e.shouldCoalesceEventChangeDetection&&e.nativeRequestAnimationFrame&&(()=>{!function(e){-1===e.lastRequestAnimationFrameId&&(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(ve,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Xi(e),qi(e)},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Xi(e))}(e)});e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:n},onInvokeTask:(l,t,i,s,r,u)=>{try{return Zi(e),l.invokeTask(i,s,r,u)}finally{n&&"eventTask"===s.type&&n(),Ji(e)}},onInvoke:(n,l,t,i,s,r,u)=>{try{return Zi(e),n.invoke(t,i,s,r,u)}finally{Ji(e)}},onHasTask:(n,l,t,i)=>{n.hasTask(t,i),l===t&&("microTask"==i.change?(e._hasPendingMicrotasks=i.microTask,Xi(e),qi(e)):"macroTask"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:(n,l,t,i)=>(n.handleError(t,i),e.runOutsideAngular(()=>e.onError.emit(i)),!1)})}(this)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ki.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ki.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,n,l){return this._inner.run(e,n,l)}runTask(e,n,l,t){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+t,e,Qi,ji,ji);try{return i.runTask(s,n,l)}finally{i.cancelTask(s)}}runGuarded(e,n,l){return this._inner.runGuarded(e,n,l)}runOutsideAngular(e){return this._outer.run(e)}}function ji(){}const Qi={};function qi(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Xi(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||e.shouldCoalesceEventChangeDetection&&-1!==e.lastRequestAnimationFrameId)}function Zi(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Ji(e){e._nesting--,qi(e)}class es{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ii,this.onMicrotaskEmpty=new Ii,this.onStable=new Ii,this.onError=new Ii}run(e,n,l){return e.apply(n,l)}runGuarded(e,n,l){return e.apply(n,l)}runOutsideAngular(e){return e()}runTask(e,n,l,t){return e.apply(n,l)}}class ns{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ki.assertNotInAngularZone(),$i(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())$i(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(n=>!n.updateCb||!n.updateCb(e)||(clearTimeout(n.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,n,l){let t=-1;n&&n>0&&(t=setTimeout(()=>{this._callbacks=this._callbacks.filter(e=>e.timeoutId!==t),e(this._didWork,this.getPendingTasks())},n)),this._callbacks.push({doneCb:e,timeoutId:t,updateCb:l})}whenStable(e,n,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(e,n,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,n,l){return[]}}class ls{constructor(){this._applications=new Map,ss.addToWindow(this)}registerApplication(e,n){this._applications.set(e,n)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,n=!0){return ss.findTestabilityInTree(this,e,n)}}class ts{addToWindow(e){}findTestabilityInTree(e,n,l){return null}}let is,ss=new ts;const rs=new Re("AllowMultipleToken");class us{constructor(e,n){this.name=e,this.token=n}}function os(e,n,l=[]){const t="Platform: "+n,i=new Re(t);return(n=[])=>{let s=as();if(!s||s.injector.get(rs,!1))if(e)e(l.concat(n).concat({provide:i,useValue:!0}));else{const e=l.concat(n).concat({provide:i,useValue:!0},{provide:wn,useValue:"platform"});!function(e){if(is&&!is.destroyed&&!is.injector.get(rs,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");is=e.get(cs);const n=e.get(Mi,null);n&&n.forEach(e=>e())}(Mn.create({providers:e,name:t}))}return function(e){const n=as();if(!n)throw new Error("No platform exists!");if(!n.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return n}(i)}}function as(){return is&&!is.destroyed?is:null}class cs{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,n){const l=function(e,n){let l;return l="noop"===e?new es:("zone.js"===e?void 0:e)||new Ki({enableLongStackTrace:nn(),shouldCoalesceEventChangeDetection:n}),l}(n?n.ngZone:void 0,n&&n.ngZoneEventCoalescing||!1),t=[{provide:Ki,useValue:l}];return l.run(()=>{const n=Mn.create({providers:t,parent:this.injector,name:e.moduleType.name}),i=e.create(n),s=i.injector.get(We,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return i.onDestroy(()=>gs(this._modules,i)),l.runOutsideAngular(()=>l.onError.subscribe({next:e=>{s.handleError(e)}})),function(e,n,l){try{const t=l();return jn(t)?t.catch(l=>{throw n.runOutsideAngular(()=>e.handleError(l)),l}):t}catch(t){throw n.runOutsideAngular(()=>e.handleError(t)),t}}(s,l,()=>{const e=i.injector.get(Ni);return e.runInitializers(),e.donePromise.then(()=>(this._moduleDoBootstrap(i),i))})})}bootstrapModule(e,n=[]){const l=hs({},n);return function(e,n,l){return e.get(Yi).createCompiler([n]).compileModuleAsync(l)}(this.injector,l,e).then(e=>this.bootstrapModuleFactory(e,l))}_moduleDoBootstrap(e){const n=e.injector.get(ds);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(e=>n.bootstrap(e));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${he(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);e.instance.ngDoBootstrap(n)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}function hs(e,n){return Array.isArray(n)?n.reduce(hs,e):Object.assign(Object.assign({},e),n)}class ds{constructor(e,n,l,t,i,s){this._zone=e,this._console=n,this._injector=l,this._exceptionHandler=t,this._componentFactoryResolver=i,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=nn(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const r=new E(e=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{e.next(this._stable),e.complete()})}),u=new E(e=>{let n;this._zone.runOutsideAngular(()=>{n=this._zone.onStable.subscribe(()=>{Ki.assertNotInAngularZone(),$i(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,e.next(!0))})})});const l=this._zone.onUnstable.subscribe(()=>{Ki.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{e.next(!1)}))});return()=>{n.unsubscribe(),l.unsubscribe()}});this.isStable=z(r,u.pipe(e=>{return $()((n=Z,function(e){let l;l="function"==typeof n?n:function(){return n};const t=Object.create(e,q);return t.source=e,t.subjectFactory=l,t})(e));var n}))}bootstrap(e,n){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let l;l=e instanceof qn?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(l.componentType);const t=l instanceof ll?void 0:this._injector.get(Pe),i=l.create(Mn.NULL,[],n||l.selector,t);i.onDestroy(()=>{this._unloadComponent(i)});const s=i.injector.get(ns,null);return s&&i.injector.get(ls).registerApplication(i.location.nativeElement,s),this._loadComponent(i),nn()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let e of this._views)e.detectChanges();if(this._enforceNoNewChanges)for(let e of this._views)e.checkNoChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const n=e;this._views.push(n),n.attachToAppRef(this)}detachView(e){const n=e;gs(this._views,n),n.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(Li,[]).concat(this._bootstrapListeners).forEach(n=>n(e))}_unloadComponent(e){this.detachView(e.hostView),gs(this.components,e)}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy())}get viewCount(){return this._views.length}}function gs(e,n){const l=e.indexOf(n);l>-1&&e.splice(l,1)}class ps{}class ms{}const fs={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};class Ss{constructor(e,n){this._compiler=e,this._config=n||fs}load(e){return this._compiler instanceof Wi?this.loadFactory(e):this.loadAndCompile(e)}loadAndCompile(e){let[n,t]=e.split("#");return void 0===t&&(t="default"),l("crnd")(n).then(e=>e[t]).then(e=>Es(e,n,t)).then(e=>this._compiler.compileModuleAsync(e))}loadFactory(e){let[n,t]=e.split("#"),i="NgFactory";return void 0===t&&(t="default",i=""),l("crnd")(this._config.factoryPathPrefix+n+this._config.factoryPathSuffix).then(e=>e[t+i]).then(e=>Es(e,n,t))}}function Es(e,n,l){if(!e)throw new Error(`Cannot find '${l}' in '${n}'`);return e}class vs{constructor(e,n){this.name=e,this.callback=n}}class Rs{constructor(e,n,l){this.listeners=[],this.parent=null,this._debugContext=l,this.nativeNode=e,n&&n instanceof Os&&n.addChild(this)}get injector(){return this._debugContext.injector}get componentInstance(){return this._debugContext.component}get context(){return this._debugContext.context}get references(){return this._debugContext.references}get providerTokens(){return this._debugContext.providerTokens}}class Os extends Rs{constructor(e,n,l){super(e,n,l),this.properties={},this.attributes={},this.classes={},this.styles={},this.childNodes=[],this.nativeElement=e}addChild(e){e&&(this.childNodes.push(e),e.parent=this)}removeChild(e){const n=this.childNodes.indexOf(e);-1!==n&&(e.parent=null,this.childNodes.splice(n,1))}insertChildrenAfter(e,n){const l=this.childNodes.indexOf(e);-1!==l&&(this.childNodes.splice(l+1,0,...n),n.forEach(n=>{n.parent&&n.parent.removeChild(n),e.parent=this}))}insertBefore(e,n){const l=this.childNodes.indexOf(e);-1===l?this.addChild(n):(n.parent&&n.parent.removeChild(n),n.parent=this,this.childNodes.splice(l,0,n))}query(e){return this.queryAll(e)[0]||null}queryAll(e){const n=[];return function e(n,l,t){n.childNodes.forEach(n=>{n instanceof Os&&(l(n)&&t.push(n),e(n,l,t))})}(this,e,n),n}queryAllNodes(e){const n=[];return function e(n,l,t){n instanceof Os&&n.childNodes.forEach(n=>{l(n)&&t.push(n),n instanceof Os&&e(n,l,t)})}(this,e,n),n}get children(){return this.childNodes.filter(e=>e instanceof Os)}triggerEventHandler(e,n){this.listeners.forEach(l=>{l.name==e&&l.callback(n)})}}const Ts=new Map;function Cs(e){return Ts.get(e)||null}const Is=Cs;function bs(e){Ts.set(e.nativeNode,e)}const ys=os(null,"core",[{provide:Di,useValue:"unknown"},{provide:cs,deps:[Mn]},{provide:ls,deps:[]},{provide:xi,deps:[]}]);function As(){return yl}function Ns(){return Al}function _s(e){return e||"en-US"}function ws(e){let n=[];return e.onStable.subscribe(()=>{for(;n.length;)n.pop()()}),function(e){n.push(e)}}class Ps{constructor(e){}}function Ms(e,n,l,t,i,s){e|=1;const{matchedQueries:r,references:u,matchedQueryIds:o}=ut(n);return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:e,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:r,matchedQueryIds:o,references:u,ngContentIndex:l,childCount:t,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:s?ht(s):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:i||Wl},provider:null,text:null,query:null,ngContent:null}}function Ds(e,n,l,t,i,s,r=[],u,o,a,c,h){a||(a=Wl);const{matchedQueries:d,references:g,matchedQueryIds:p}=ut(l);let m=null,f=null;s&&([m,f]=Et(s)),u=u||[];const S=[];for(let R=0;R<u.length;R++){const[e,n,l]=u[R],[t,i]=Et(n);let s=void 0,r=void 0;switch(15&e){case 4:r=l;break;case 1:case 8:s=l}S[R]={flags:e,ns:t,name:i,nonMinifiedName:i,securityContext:s,suffix:r}}o=o||[];const E=[];for(let R=0;R<o.length;R++){const[e,n]=o[R];E[R]={type:0,target:e,eventName:n,propName:null}}const v=(r=r||[]).map(([e,n])=>{const[l,t]=Et(e);return[l,t,n]});return h=function(e){if(e&&"$$undefined"===e.id){const n=null!=e.encapsulation&&e.encapsulation!==ke.None||e.styles.length||Object.keys(e.data).length;e.id=n?"c"+jl++:"$$empty"}return e&&"$$empty"===e.id&&(e=null),e||null}(h),c&&(n|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:n|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:d,matchedQueryIds:p,references:g,ngContentIndex:t,childCount:i,bindings:S,bindingFlags:vt(S),outputs:E,element:{ns:m,name:f,attrs:v,template:null,componentProvider:null,componentView:c||null,componentRendererType:h,publicProviders:null,allProviders:null,handleEvent:a||Wl},provider:null,text:null,query:null,ngContent:null}}function Ls(e,n,l){const t=l.element,i=e.root.selectorOrNode,s=e.renderer;let r;if(e.parent||!i){r=t.name?s.createElement(t.name,t.ns):s.createComment("");const i=at(e,n,l);i&&s.appendChild(i,r)}else r=s.selectRootElement(i,!!t.componentRendererType&&t.componentRendererType.encapsulation===ke.ShadowDom);if(t.attrs)for(let u=0;u<t.attrs.length;u++){const[e,n,l]=t.attrs[u];s.setAttribute(r,n,l,e)}return r}function xs(e,n,l,t){for(let r=0;r<l.outputs.length;r++){const u=l.outputs[r],o=ks(e,l.nodeIndex,(s=u.eventName,(i=u.target)?`${i}:${s}`:s));let a=u.target,c=e;"component"===u.target&&(a=null,c=n);const h=c.renderer.listen(a||t,u.eventName,o);e.disposables[l.outputIndex+r]=h}var i,s}function ks(e,n,l){return t=>et(e,n,l,t)}function Fs(e,n,l,t){if(!ql(e,n,l,t))return!1;const i=n.bindings[l],s=Ul(e,n.nodeIndex),r=s.renderElement,u=i.name;switch(15&i.flags){case 1:!function(e,n,l,t,i,s){const r=n.securityContext;let u=r?e.root.sanitizer.sanitize(r,s):s;u=null!=u?u.toString():null;const o=e.renderer;null!=s?o.setAttribute(l,i,u,t):o.removeAttribute(l,i,t)}(e,i,r,i.ns,u,t);break;case 2:!function(e,n,l,t){const i=e.renderer;t?i.addClass(n,l):i.removeClass(n,l)}(e,r,u,t);break;case 4:!function(e,n,l,t,i){let s=e.root.sanitizer.sanitize(bn.STYLE,i);if(null!=s){s=s.toString();const e=n.suffix;null!=e&&(s+=e)}else s=null;const r=e.renderer;null!=s?r.setStyle(l,t,s):r.removeStyle(l,t)}(e,i,r,u,t);break;case 8:!function(e,n,l,t,i){const s=n.securityContext;let r=s?e.root.sanitizer.sanitize(s,i):i;e.renderer.setProperty(l,t,r)}(33554432&n.flags&&32&i.flags?s.componentView:e,i,r,u,t)}return!0}function Us(e,n,l){let t=[];for(let i in l)t.push({propName:i,bindingType:l[i]});return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,ngContentIndex:-1,matchedQueries:{},matchedQueryIds:0,references:{},childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:{id:n,filterId:rt(n),bindings:t},ngContent:null}}function Hs(e){const n=e.def.nodeMatchedQueries;for(;e.parent&&st(e);){let l=e.parentNodeDef;e=e.parent;const t=l.nodeIndex+l.childCount;for(let i=0;i<=t;i++){const t=e.def.nodes[i];67108864&t.flags&&536870912&t.flags&&(t.query.filterId&n)===t.query.filterId&&Bl(e,i).setDirty(),!(1&t.flags&&i+t.childCount<l.nodeIndex)&&67108864&t.childFlags&&536870912&t.childFlags||(i+=t.childCount)}}if(134217728&e.def.nodeFlags)for(let l=0;l<e.def.nodes.length;l++){const n=e.def.nodes[l];134217728&n.flags&&536870912&n.flags&&Bl(e,l).setDirty(),l+=n.childCount}}function Gs(e,n){const l=Bl(e,n.nodeIndex);if(!l.dirty)return;let t,i=void 0;if(67108864&n.flags){const l=n.parent.parent;i=Bs(e,l.nodeIndex,l.nodeIndex+l.childCount,n.query,[]),t=Hl(e,n.parent.nodeIndex).instance}else 134217728&n.flags&&(i=Bs(e,0,e.def.nodes.length-1,n.query,[]),t=e.component);l.reset(i);const s=n.query.bindings;let r=!1;for(let u=0;u<s.length;u++){const e=s[u];let n;switch(e.bindingType){case 0:n=l.first;break;case 1:n=l,r=!0}t[e.propName]=n}r&&l.notifyOnChanges()}function Bs(e,n,l,t,i){for(let s=n;s<=l;s++){const n=e.def.nodes[s],l=n.matchedQueries[t.id];if(null!=l&&i.push(Vs(e,n,l)),1&n.flags&&n.element.template&&(n.element.template.nodeMatchedQueries&t.filterId)===t.filterId){const l=Ul(e,s);if((n.childMatchedQueries&t.filterId)===t.filterId&&(Bs(e,s+1,s+n.childCount,t,i),s+=n.childCount),16777216&n.flags){const e=l.viewContainer._embeddedViews;for(let n=0;n<e.length;n++){const s=e[n],r=nt(s);r&&r===l&&Bs(s,0,s.def.nodes.length-1,t,i)}}const r=l.template._projectedViews;if(r)for(let e=0;e<r.length;e++){const n=r[e];Bs(n,0,n.def.nodes.length-1,t,i)}}(n.childMatchedQueries&t.filterId)!==t.filterId&&(s+=n.childCount)}return i}function Vs(e,n,l){if(null!=l)switch(l){case 1:return Ul(e,n.nodeIndex).renderElement;case 0:return new il(Ul(e,n.nodeIndex).renderElement);case 2:return Ul(e,n.nodeIndex).template;case 3:return Ul(e,n.nodeIndex).viewContainer;case 4:return Hl(e,n.nodeIndex).instance}}function Ws(e,n,l){const t=at(e,n,l);t&&pt(e,l.ngContent.index,1,t,null,void 0)}function Ys(e,n){return $s(128,e,xe(n+1))}function zs(e,n){const l=Object.keys(n),t=l.length,i=[];for(let s=0;s<t;s++)i.push(l[s]);return $s(64,e,i)}function $s(e,n,l){const t=[];for(let i=0;i<l.length;i++){const e=l[i];t.push({flags:8,name:e,ns:null,nonMinifiedName:e,securityContext:null,suffix:null})}return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:n,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:-1,childCount:0,bindings:t,bindingFlags:vt(t),outputs:[],element:null,provider:null,text:null,query:null,ngContent:null}}function Ks(e,n,l){const t=[];for(let i=1;i<l.length;i++)t[i-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:l[i]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:n,childCount:0,bindings:t,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:l[0]},query:null,ngContent:null}}function js(e,n,l){let t;const i=e.renderer;t=i.createText(l.text.prefix);const s=at(e,n,l);return s&&i.appendChild(s,t),{renderText:t}}function Qs(e,n){return(null!=e?e.toString():"")+n.suffix}function qs(e,n,l,t){let i=0,s=0,r=0,u=0,o=0,a=null,c=null,h=!1,d=!1,g=null;for(let p=0;p<n.length;p++){const e=n[p];if(e.nodeIndex=p,e.parent=a,e.bindingIndex=i,e.outputIndex=s,e.renderParent=c,r|=e.flags,o|=e.matchedQueryIds,e.element){const n=e.element;n.publicProviders=a?a.element.publicProviders:Object.create(null),n.allProviders=n.publicProviders,h=!1,d=!1,e.element.template&&(o|=e.element.template.nodeMatchedQueries)}if(Zs(a,e,n.length),i+=e.bindings.length,s+=e.outputs.length,!c&&3&e.flags&&(g=e),20224&e.flags){h||(h=!0,a.element.publicProviders=Object.create(a.element.publicProviders),a.element.allProviders=a.element.publicProviders);const n=0!=(32768&e.flags);0==(8192&e.flags)||n?a.element.publicProviders[zl(e.provider.token)]=e:(d||(d=!0,a.element.allProviders=Object.create(a.element.publicProviders)),a.element.allProviders[zl(e.provider.token)]=e),n&&(a.element.componentProvider=e)}if(a?(a.childFlags|=e.flags,a.directChildFlags|=e.flags,a.childMatchedQueries|=e.matchedQueryIds,e.element&&e.element.template&&(a.childMatchedQueries|=e.element.template.nodeMatchedQueries)):u|=e.flags,e.childCount>0)a=e,Xs(e)||(c=e);else for(;a&&p===a.nodeIndex+a.childCount;){const e=a.parent;e&&(e.childFlags|=a.childFlags,e.childMatchedQueries|=a.childMatchedQueries),a=e,c=a&&Xs(a)?a.renderParent:a}}return{factory:null,nodeFlags:r,rootNodeFlags:u,nodeMatchedQueries:o,flags:e,nodes:n,updateDirectives:l||Wl,updateRenderer:t||Wl,handleEvent:(e,l,t,i)=>n[l].element.handleEvent(e,t,i),bindingCount:i,outputCount:s,lastRenderRootNode:g}}function Xs(e){return 0!=(1&e.flags)&&null===e.element.name}function Zs(e,n,l){const t=n.element&&n.element.template;if(t){if(!t.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(t.lastRenderRootNode&&16777216&t.lastRenderRootNode.flags)throw new Error(`Illegal State: Last root node of a template can't have embedded views, at index ${n.nodeIndex}!`)}if(20224&n.flags&&0==(1&(e?e.flags:0)))throw new Error(`Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index ${n.nodeIndex}!`);if(n.query){if(67108864&n.flags&&(!e||0==(16384&e.flags)))throw new Error(`Illegal State: Content Query nodes need to be children of directives, at index ${n.nodeIndex}!`);if(134217728&n.flags&&e)throw new Error(`Illegal State: View Query nodes have to be top level nodes, at index ${n.nodeIndex}!`)}if(n.childCount){const t=e?e.nodeIndex+e.childCount:l-1;if(n.nodeIndex<=t&&n.nodeIndex+n.childCount>t)throw new Error(`Illegal State: childCount of node leads outside of parent, at index ${n.nodeIndex}!`)}}function Js(e,n,l,t){const i=lr(e.root,e.renderer,e,n,l);return tr(i,e.component,t),ir(i),i}function er(e,n,l){const t=lr(e,e.renderer,null,null,n);return tr(t,l,l),ir(t),t}function nr(e,n,l,t){const i=n.element.componentRendererType;let s;return s=i?e.root.rendererFactory.createRenderer(t,i):e.root.renderer,lr(e.root,s,e,n.element.componentProvider,l)}function lr(e,n,l,t,i){const s=new Array(i.nodes.length),r=i.outputCount?new Array(i.outputCount):null;return{def:i,parent:l,viewContainerParent:null,parentNodeDef:t,context:null,component:null,nodes:s,state:13,root:e,renderer:n,oldValues:new Array(i.bindingCount),disposables:r,initIndex:-1}}function tr(e,n,l){e.component=n,e.context=l}function ir(e){let n;it(e)&&(n=Ul(e.parent,e.parentNodeDef.parent.nodeIndex).renderElement);const l=e.def,t=e.nodes;for(let i=0;i<l.nodes.length;i++){const s=l.nodes[i];let r;switch(Vl.setCurrentNode(e,i),201347067&s.flags){case 1:const l=Ls(e,n,s);let u=void 0;if(33554432&s.flags){const n=ht(s.element.componentView);u=Vl.createComponentView(e,s,n,l)}xs(e,u,s,l),r={renderElement:l,componentView:u,viewContainer:null,template:s.element.template?Gt(e,s):void 0},16777216&s.flags&&(r.viewContainer=kt(e,s,r));break;case 2:r=js(e,n,s);break;case 512:case 1024:case 2048:case 256:r=t[i],r||4096&s.flags||(r={instance:ii(e,s)});break;case 16:r={instance:si(e,s)};break;case 16384:r=t[i],r||(r={instance:ri(e,s)}),32768&s.flags&&tr(Ul(e,s.parent.nodeIndex).componentView,r.instance,r.instance);break;case 32:case 64:case 128:r={value:void 0};break;case 67108864:case 134217728:r=new yi;break;case 8:Ws(e,n,s),r=void 0}t[i]=r}gr(e,dr.CreateViewNodes),Sr(e,201326592,268435456,0)}function sr(e){or(e),Vl.updateDirectives(e,1),pr(e,dr.CheckNoChanges),Vl.updateRenderer(e,1),gr(e,dr.CheckNoChanges),e.state&=-97}function rr(e){1&e.state?(e.state&=-2,e.state|=2):e.state&=-3,xl(e,0,256),or(e),Vl.updateDirectives(e,0),pr(e,dr.CheckAndUpdate),Sr(e,67108864,536870912,0);let n=xl(e,256,512);pi(e,2097152|(n?1048576:0)),Vl.updateRenderer(e,0),gr(e,dr.CheckAndUpdate),Sr(e,134217728,536870912,0),n=xl(e,512,768),pi(e,8388608|(n?4194304:0)),2&e.def.flags&&(e.state&=-9),e.state&=-97,xl(e,768,1024)}function ur(e,n,l,t,i,s,r,u,o,a,c,h,d){return 0===l?function(e,n,l,t,i,s,r,u,o,a,c,h){switch(201347067&n.flags){case 1:return function(e,n,l,t,i,s,r,u,o,a,c,h){const d=n.bindings.length;let g=!1;return d>0&&Fs(e,n,0,l)&&(g=!0),d>1&&Fs(e,n,1,t)&&(g=!0),d>2&&Fs(e,n,2,i)&&(g=!0),d>3&&Fs(e,n,3,s)&&(g=!0),d>4&&Fs(e,n,4,r)&&(g=!0),d>5&&Fs(e,n,5,u)&&(g=!0),d>6&&Fs(e,n,6,o)&&(g=!0),d>7&&Fs(e,n,7,a)&&(g=!0),d>8&&Fs(e,n,8,c)&&(g=!0),d>9&&Fs(e,n,9,h)&&(g=!0),g}(e,n,l,t,i,s,r,u,o,a,c,h);case 2:return function(e,n,l,t,i,s,r,u,o,a,c,h){let d=!1;const g=n.bindings,p=g.length;if(p>0&&ql(e,n,0,l)&&(d=!0),p>1&&ql(e,n,1,t)&&(d=!0),p>2&&ql(e,n,2,i)&&(d=!0),p>3&&ql(e,n,3,s)&&(d=!0),p>4&&ql(e,n,4,r)&&(d=!0),p>5&&ql(e,n,5,u)&&(d=!0),p>6&&ql(e,n,6,o)&&(d=!0),p>7&&ql(e,n,7,a)&&(d=!0),p>8&&ql(e,n,8,c)&&(d=!0),p>9&&ql(e,n,9,h)&&(d=!0),d){let d=n.text.prefix;p>0&&(d+=Qs(l,g[0])),p>1&&(d+=Qs(t,g[1])),p>2&&(d+=Qs(i,g[2])),p>3&&(d+=Qs(s,g[3])),p>4&&(d+=Qs(r,g[4])),p>5&&(d+=Qs(u,g[5])),p>6&&(d+=Qs(o,g[6])),p>7&&(d+=Qs(a,g[7])),p>8&&(d+=Qs(c,g[8])),p>9&&(d+=Qs(h,g[9]));const m=Fl(e,n.nodeIndex).renderText;e.renderer.setValue(m,d)}return d}(e,n,l,t,i,s,r,u,o,a,c,h);case 16384:return function(e,n,l,t,i,s,r,u,o,a,c,h){const d=Hl(e,n.nodeIndex),g=d.instance;let p=!1,m=void 0;const f=n.bindings.length;return f>0&&Ql(e,n,0,l)&&(p=!0,m=gi(e,d,n,0,l,m)),f>1&&Ql(e,n,1,t)&&(p=!0,m=gi(e,d,n,1,t,m)),f>2&&Ql(e,n,2,i)&&(p=!0,m=gi(e,d,n,2,i,m)),f>3&&Ql(e,n,3,s)&&(p=!0,m=gi(e,d,n,3,s,m)),f>4&&Ql(e,n,4,r)&&(p=!0,m=gi(e,d,n,4,r,m)),f>5&&Ql(e,n,5,u)&&(p=!0,m=gi(e,d,n,5,u,m)),f>6&&Ql(e,n,6,o)&&(p=!0,m=gi(e,d,n,6,o,m)),f>7&&Ql(e,n,7,a)&&(p=!0,m=gi(e,d,n,7,a,m)),f>8&&Ql(e,n,8,c)&&(p=!0,m=gi(e,d,n,8,c,m)),f>9&&Ql(e,n,9,h)&&(p=!0,m=gi(e,d,n,9,h,m)),m&&g.ngOnChanges(m),65536&n.flags&&kl(e,256,n.nodeIndex)&&g.ngOnInit(),262144&n.flags&&g.ngDoCheck(),p}(e,n,l,t,i,s,r,u,o,a,c,h);case 32:case 64:case 128:return function(e,n,l,t,i,s,r,u,o,a,c,h){const d=n.bindings;let g=!1;const p=d.length;if(p>0&&ql(e,n,0,l)&&(g=!0),p>1&&ql(e,n,1,t)&&(g=!0),p>2&&ql(e,n,2,i)&&(g=!0),p>3&&ql(e,n,3,s)&&(g=!0),p>4&&ql(e,n,4,r)&&(g=!0),p>5&&ql(e,n,5,u)&&(g=!0),p>6&&ql(e,n,6,o)&&(g=!0),p>7&&ql(e,n,7,a)&&(g=!0),p>8&&ql(e,n,8,c)&&(g=!0),p>9&&ql(e,n,9,h)&&(g=!0),g){const g=Gl(e,n.nodeIndex);let m;switch(201347067&n.flags){case 32:m=[],p>0&&m.push(l),p>1&&m.push(t),p>2&&m.push(i),p>3&&m.push(s),p>4&&m.push(r),p>5&&m.push(u),p>6&&m.push(o),p>7&&m.push(a),p>8&&m.push(c),p>9&&m.push(h);break;case 64:m={},p>0&&(m[d[0].name]=l),p>1&&(m[d[1].name]=t),p>2&&(m[d[2].name]=i),p>3&&(m[d[3].name]=s),p>4&&(m[d[4].name]=r),p>5&&(m[d[5].name]=u),p>6&&(m[d[6].name]=o),p>7&&(m[d[7].name]=a),p>8&&(m[d[8].name]=c),p>9&&(m[d[9].name]=h);break;case 128:const e=l;switch(p){case 1:m=e.transform(l);break;case 2:m=e.transform(t);break;case 3:m=e.transform(t,i);break;case 4:m=e.transform(t,i,s);break;case 5:m=e.transform(t,i,s,r);break;case 6:m=e.transform(t,i,s,r,u);break;case 7:m=e.transform(t,i,s,r,u,o);break;case 8:m=e.transform(t,i,s,r,u,o,a);break;case 9:m=e.transform(t,i,s,r,u,o,a,c);break;case 10:m=e.transform(t,i,s,r,u,o,a,c,h)}}g.value=m}return g}(e,n,l,t,i,s,r,u,o,a,c,h);default:throw"unreachable"}}(e,n,t,i,s,r,u,o,a,c,h,d):function(e,n,l){switch(201347067&n.flags){case 1:return function(e,n,l){let t=!1;for(let i=0;i<l.length;i++)Fs(e,n,i,l[i])&&(t=!0);return t}(e,n,l);case 2:return function(e,n,l){const t=n.bindings;let i=!1;for(let s=0;s<l.length;s++)ql(e,n,s,l[s])&&(i=!0);if(i){let i="";for(let e=0;e<l.length;e++)i+=Qs(l[e],t[e]);i=n.text.prefix+i;const s=Fl(e,n.nodeIndex).renderText;e.renderer.setValue(s,i)}return i}(e,n,l);case 16384:return function(e,n,l){const t=Hl(e,n.nodeIndex),i=t.instance;let s=!1,r=void 0;for(let u=0;u<l.length;u++)Ql(e,n,u,l[u])&&(s=!0,r=gi(e,t,n,u,l[u],r));return r&&i.ngOnChanges(r),65536&n.flags&&kl(e,256,n.nodeIndex)&&i.ngOnInit(),262144&n.flags&&i.ngDoCheck(),s}(e,n,l);case 32:case 64:case 128:return function(e,n,l){const t=n.bindings;let i=!1;for(let s=0;s<l.length;s++)ql(e,n,s,l[s])&&(i=!0);if(i){const i=Gl(e,n.nodeIndex);let s;switch(201347067&n.flags){case 32:s=l;break;case 64:s={};for(let i=0;i<l.length;i++)s[t[i].name]=l[i];break;case 128:const e=l[0],n=l.slice(1);s=e.transform(...n)}i.value=s}return i}(e,n,l);default:throw"unreachable"}}(e,n,t)}function or(e){const n=e.def;if(4&n.nodeFlags)for(let l=0;l<n.nodes.length;l++){const t=n.nodes[l];if(4&t.flags){const n=Ul(e,l).template._projectedViews;if(n)for(let l=0;l<n.length;l++){const t=n[l];t.state|=32,Jl(t,e)}}else 0==(4&t.childFlags)&&(l+=t.childCount)}}function ar(e,n,l,t,i,s,r,u,o,a,c,h,d){return 0===l?function(e,n,l,t,i,s,r,u,o,a,c,h){const d=n.bindings.length;d>0&&Xl(e,n,0,l),d>1&&Xl(e,n,1,t),d>2&&Xl(e,n,2,i),d>3&&Xl(e,n,3,s),d>4&&Xl(e,n,4,r),d>5&&Xl(e,n,5,u),d>6&&Xl(e,n,6,o),d>7&&Xl(e,n,7,a),d>8&&Xl(e,n,8,c),d>9&&Xl(e,n,9,h)}(e,n,t,i,s,r,u,o,a,c,h,d):function(e,n,l){for(let t=0;t<l.length;t++)Xl(e,n,t,l[t])}(e,n,t),!1}function cr(e,n){if(Bl(e,n.nodeIndex).dirty)throw Ml(Vl.createDebugContext(e,n.nodeIndex),`Query ${n.query.id} not dirty`,`Query ${n.query.id} dirty`,0!=(1&e.state))}function hr(e){if(!(128&e.state)){if(pr(e,dr.Destroy),gr(e,dr.Destroy),pi(e,131072),e.disposables)for(let n=0;n<e.disposables.length;n++)e.disposables[n]();!function(e){if(!(16&e.state))return;const n=nt(e);if(n){const l=n.template._projectedViews;l&&(Le(l,l.indexOf(e)),Vl.dirtyParentQueries(e))}}(e),e.renderer.destroyNode&&function(e){const n=e.def.nodes.length;for(let l=0;l<n;l++){const n=e.def.nodes[l];1&n.flags?e.renderer.destroyNode(Ul(e,l).renderElement):2&n.flags?e.renderer.destroyNode(Fl(e,l).renderText):(67108864&n.flags||134217728&n.flags)&&Bl(e,l).destroy()}}(e),it(e)&&e.renderer.destroy(),e.state|=128}}var dr=function(e){return e[e.CreateViewNodes=0]="CreateViewNodes",e[e.CheckNoChanges=1]="CheckNoChanges",e[e.CheckNoChangesProjectedViews=2]="CheckNoChangesProjectedViews",e[e.CheckAndUpdate=3]="CheckAndUpdate",e[e.CheckAndUpdateProjectedViews=4]="CheckAndUpdateProjectedViews",e[e.Destroy=5]="Destroy",e}({});function gr(e,n){const l=e.def;if(33554432&l.nodeFlags)for(let t=0;t<l.nodes.length;t++){const i=l.nodes[t];33554432&i.flags?mr(Ul(e,t).componentView,n):0==(33554432&i.childFlags)&&(t+=i.childCount)}}function pr(e,n){const l=e.def;if(16777216&l.nodeFlags)for(let t=0;t<l.nodes.length;t++){const i=l.nodes[t];if(16777216&i.flags){const l=Ul(e,t).viewContainer._embeddedViews;for(let e=0;e<l.length;e++)mr(l[e],n)}else 0==(16777216&i.childFlags)&&(t+=i.childCount)}}function mr(e,n){const l=e.state;switch(n){case dr.CheckNoChanges:0==(128&l)&&(12==(12&l)?sr(e):64&l&&fr(e,dr.CheckNoChangesProjectedViews));break;case dr.CheckNoChangesProjectedViews:0==(128&l)&&(32&l?sr(e):64&l&&fr(e,n));break;case dr.CheckAndUpdate:0==(128&l)&&(12==(12&l)?rr(e):64&l&&fr(e,dr.CheckAndUpdateProjectedViews));break;case dr.CheckAndUpdateProjectedViews:0==(128&l)&&(32&l?rr(e):64&l&&fr(e,n));break;case dr.Destroy:hr(e);break;case dr.CreateViewNodes:ir(e)}}function fr(e,n){pr(e,n),gr(e,n)}function Sr(e,n,l,t){if(!(e.def.nodeFlags&n&&e.def.nodeFlags&l))return;const i=e.def.nodes.length;for(let s=0;s<i;s++){const i=e.def.nodes[s];if(i.flags&n&&i.flags&l)switch(Vl.setCurrentNode(e,i.nodeIndex),t){case 0:Gs(e,i);break;case 1:cr(e,i)}i.childFlags&n&&i.childFlags&l||(s+=i.childCount)}}let Er=!1;function vr(e,n,l,t,i,s){const r=i.injector.get(rl);return er(Or(e,i,r,n,l),t,s)}function Rr(e,n,l,t,i,s){const r=i.injector.get(rl),u=Or(e,i,new Jr(r),n,l),o=Pr(t);return Xr(Fr.create,er,null,[u,o,s])}function Or(e,n,l,t,i){const s=n.injector.get(cl),r=n.injector.get(We),u=l.createRenderer(null,null);return{ngModule:n,injector:e,projectableNodes:t,selectorOrNode:i,sanitizer:s,rendererFactory:l,renderer:u,errorHandler:r}}function Tr(e,n,l,t){const i=Pr(l);return Xr(Fr.create,Js,null,[e,n,i,t])}function Cr(e,n,l,t){return l=Ar.get(n.element.componentProvider.provider.token)||Pr(l),Xr(Fr.create,nr,null,[e,n,l,t])}function Ir(e,n,l,t){return zt(e,n,l,function(e){const{hasOverrides:n,hasDeprecatedOverrides:l}=function(e){let n=!1,l=!1;return 0===br.size||(e.providers.forEach(e=>{const t=br.get(e.token);3840&e.flags&&t&&(n=!0,l=l||t.deprecatedBehavior)}),e.modules.forEach(e=>{yr.forEach((t,i)=>{ue(i).providedIn===e&&(n=!0,l=l||t.deprecatedBehavior)})})),{hasOverrides:n,hasDeprecatedOverrides:l}}(e);return n?(function(e){for(let n=0;n<e.providers.length;n++){const t=e.providers[n];l&&(t.flags|=4096);const i=br.get(t.token);i&&(t.flags=-3841&t.flags|i.flags,t.deps=ot(i.deps),t.value=i.value)}if(yr.size>0){let n=new Set(e.modules);yr.forEach((t,i)=>{if(n.has(ue(i).providedIn)){let n={token:i,flags:t.flags|(l?4096:0),deps:ot(t.deps),value:t.value,index:e.providers.length};e.providers.push(n),e.providersByKey[zl(i)]=n}})}}(e=e.factory(()=>Wl)),e):e}(t))}const br=new Map,yr=new Map,Ar=new Map;function Nr(e){let n;br.set(e.token,e),"function"==typeof e.token&&(n=ue(e.token))&&"function"==typeof n.providedIn&&yr.set(e.token,e)}function _r(e,n){const l=ht(n.viewDefFactory),t=ht(l.nodes[0].element.componentView);Ar.set(e,t)}function wr(){br.clear(),yr.clear(),Ar.clear()}function Pr(e){if(0===br.size)return e;const n=function(e){const n=[];let l=null;for(let t=0;t<e.nodes.length;t++){const i=e.nodes[t];1&i.flags&&(l=i),l&&3840&i.flags&&br.has(i.provider.token)&&(n.push(l.nodeIndex),l=null)}return n}(e);if(0===n.length)return e;e=e.factory(()=>Wl);for(let t=0;t<n.length;t++)l(e,n[t]);return e;function l(e,n){for(let l=n+1;l<e.nodes.length;l++){const n=e.nodes[l];if(1&n.flags)return;if(3840&n.flags){const e=n.provider,l=br.get(e.token);l&&(n.flags=-3841&n.flags|l.flags,e.deps=ot(l.deps),e.value=l.value)}}}}function Mr(e,n,l,t,i,s,r,u,o,a,c,h,d){const g=e.def.nodes[n];return ur(e,g,l,t,i,s,r,u,o,a,c,h,d),224&g.flags?Gl(e,n).value:void 0}function Dr(e,n,l,t,i,s,r,u,o,a,c,h,d){const g=e.def.nodes[n];return ar(e,g,l,t,i,s,r,u,o,a,c,h,d),224&g.flags?Gl(e,n).value:void 0}function Lr(e){return Xr(Fr.detectChanges,rr,null,[e])}function xr(e){return Xr(Fr.checkNoChanges,sr,null,[e])}function kr(e){return Xr(Fr.destroy,hr,null,[e])}var Fr=function(e){return e[e.create=0]="create",e[e.detectChanges=1]="detectChanges",e[e.checkNoChanges=2]="checkNoChanges",e[e.destroy=3]="destroy",e[e.handleEvent=4]="handleEvent",e}({});let Ur,Hr,Gr;function Br(e,n){Hr=e,Gr=n}function Vr(e,n,l,t){return Br(e,n),Xr(Fr.handleEvent,e.def.handleEvent,null,[e,n,l,t])}function Wr(e,n){if(128&e.state)throw Ll(Fr[Ur]);return Br(e,Kr(e,0)),e.def.updateDirectives((function(e,l,t,...i){const s=e.def.nodes[l];return 0===n?zr(e,s,t,i):$r(e,s,t,i),16384&s.flags&&Br(e,Kr(e,l)),224&s.flags?Gl(e,s.nodeIndex).value:void 0}),e)}function Yr(e,n){if(128&e.state)throw Ll(Fr[Ur]);return Br(e,jr(e,0)),e.def.updateRenderer((function(e,l,t,...i){const s=e.def.nodes[l];return 0===n?zr(e,s,t,i):$r(e,s,t,i),3&s.flags&&Br(e,jr(e,l)),224&s.flags?Gl(e,s.nodeIndex).value:void 0}),e)}function zr(e,n,l,t){if(ur(e,n,l,...t)){const s=1===l?t[0]:t;if(16384&n.flags){const l={};for(let e=0;e<n.bindings.length;e++){const t=n.bindings[e],r=s[e];8&t.flags&&(l[(i=t.nonMinifiedName,"ng-reflect-"+i.replace(/[$@]/g,"_").replace(yn,(...e)=>"-"+e[1].toLowerCase()))]=An(r))}const t=n.parent,r=Ul(e,t.nodeIndex).renderElement;if(t.element.name)for(let n in l){const t=l[n];null!=t?e.renderer.setAttribute(r,n,t):e.renderer.removeAttribute(r,n)}else e.renderer.setValue(r,"bindings="+JSON.stringify(l,null,2))}}var i}function $r(e,n,l,t){ar(e,n,l,...t)}function Kr(e,n){for(let l=n;l<e.def.nodes.length;l++){const n=e.def.nodes[l];if(16384&n.flags&&n.bindings&&n.bindings.length)return l}return null}function jr(e,n){for(let l=n;l<e.def.nodes.length;l++){const n=e.def.nodes[l];if(3&n.flags&&n.bindings&&n.bindings.length)return l}return null}class Qr{constructor(e,n){this.view=e,this.nodeIndex=n,null==n&&(this.nodeIndex=n=0),this.nodeDef=e.def.nodes[n];let l=this.nodeDef,t=e;for(;l&&0==(1&l.flags);)l=l.parent;if(!l)for(;!l&&t;)l=lt(t),t=t.parent;this.elDef=l,this.elView=t}get elOrCompView(){return Ul(this.elView,this.elDef.nodeIndex).componentView||this.view}get injector(){return Vt(this.elView,this.elDef)}get component(){return this.elOrCompView.component}get context(){return this.elOrCompView.context}get providerTokens(){const e=[];if(this.elDef)for(let n=this.elDef.nodeIndex+1;n<=this.elDef.nodeIndex+this.elDef.childCount;n++){const l=this.elView.def.nodes[n];20224&l.flags&&e.push(l.provider.token),n+=l.childCount}return e}get references(){const e={};if(this.elDef){qr(this.elView,this.elDef,e);for(let n=this.elDef.nodeIndex+1;n<=this.elDef.nodeIndex+this.elDef.childCount;n++){const l=this.elView.def.nodes[n];20224&l.flags&&qr(this.elView,l,e),n+=l.childCount}}return e}get componentRenderElement(){const e=function(e){for(;e&&!it(e);)e=e.parent;return e.parent?Ul(e.parent,lt(e).nodeIndex):null}(this.elOrCompView);return e?e.renderElement:void 0}get renderNode(){return 2&this.nodeDef.flags?tt(this.view,this.nodeDef):tt(this.elView,this.elDef)}logError(e,...n){let l,t;2&this.nodeDef.flags?(l=this.view.def,t=this.nodeDef.nodeIndex):(l=this.elView.def,t=this.elDef.nodeIndex);const i=function(e,n){let l=-1;for(let t=0;t<=n;t++)3&e.nodes[t].flags&&l++;return l}(l,t);let s=-1;l.factory(()=>(s++,s===i?e.error.bind(e,...n):Wl)),s<i&&(e.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),e.error(...n))}}function qr(e,n,l){for(let t in n.references)l[t]=Vs(e,n,n.references[t])}function Xr(e,n,l,t){const i=Ur,s=Hr,r=Gr;try{Ur=e;const u=n.apply(l,t);return Hr=s,Gr=r,Ur=i,u}catch(u){if(Ge(u)||!Hr)throw u;throw function(e,n){return e instanceof Error||(e=new Error(e.toString())),Dl(e,n),e}(u,Zr())}}function Zr(){return Hr?new Qr(Hr,Gr):null}class Jr{constructor(e){this.delegate=e}createRenderer(e,n){return new eu(this.delegate.createRenderer(e,n))}begin(){this.delegate.begin&&this.delegate.begin()}end(){this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)}}class eu{constructor(e){this.delegate=e,this.debugContextFactory=Zr,this.data=this.delegate.data}createDebugContext(e){return this.debugContextFactory(e)}destroyNode(e){const n=Is(e);!function(e){Ts.delete(e.nativeNode)}(n),n instanceof Rs&&(n.listeners.length=0),this.delegate.destroyNode&&this.delegate.destroyNode(e)}destroy(){this.delegate.destroy()}createElement(e,n){const l=this.delegate.createElement(e,n),t=this.createDebugContext(l);if(t){const n=new Os(l,null,t);n.name=e,bs(n)}return l}createComment(e){const n=this.delegate.createComment(e),l=this.createDebugContext(n);return l&&bs(new Rs(n,null,l)),n}createText(e){const n=this.delegate.createText(e),l=this.createDebugContext(n);return l&&bs(new Rs(n,null,l)),n}appendChild(e,n){const l=Is(e),t=Is(n);l&&t&&l instanceof Os&&l.addChild(t),this.delegate.appendChild(e,n)}insertBefore(e,n,l){const t=Is(e),i=Is(n),s=Is(l);t&&i&&t instanceof Os&&t.insertBefore(s,i),this.delegate.insertBefore(e,n,l)}removeChild(e,n){const l=Is(e),t=Is(n);l&&t&&l instanceof Os&&l.removeChild(t),this.delegate.removeChild(e,n)}selectRootElement(e,n){const l=this.delegate.selectRootElement(e,n),t=Zr();return t&&bs(new Os(l,null,t)),l}setAttribute(e,n,l,t){const i=Is(e);i&&i instanceof Os&&(i.attributes[t?t+":"+n:n]=l),this.delegate.setAttribute(e,n,l,t)}removeAttribute(e,n,l){const t=Is(e);t&&t instanceof Os&&(t.attributes[l?l+":"+n:n]=null),this.delegate.removeAttribute(e,n,l)}addClass(e,n){const l=Is(e);l&&l instanceof Os&&(l.classes[n]=!0),this.delegate.addClass(e,n)}removeClass(e,n){const l=Is(e);l&&l instanceof Os&&(l.classes[n]=!1),this.delegate.removeClass(e,n)}setStyle(e,n,l,t){const i=Is(e);i&&i instanceof Os&&(i.styles[n]=l),this.delegate.setStyle(e,n,l,t)}removeStyle(e,n,l){const t=Is(e);t&&t instanceof Os&&(t.styles[n]=null),this.delegate.removeStyle(e,n,l)}setProperty(e,n,l){const t=Is(e);t&&t instanceof Os&&(t.properties[n]=l),this.delegate.setProperty(e,n,l)}listen(e,n,l){if("string"!=typeof e){const t=Is(e);t&&t.listeners.push(new vs(n,l))}return this.delegate.listen(e,n,l)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setValue(e,n){return this.delegate.setValue(e,n)}}function nu(e,n,l){return new lu(e,n,l)}class lu extends Me{constructor(e,n,l){super(),this.moduleType=e,this._bootstrapComponents=n,this._ngModuleDefFactory=l}create(e){!function(){if(Er)return;Er=!0;const e=nn()?{setCurrentNode:Br,createRootView:Rr,createEmbeddedView:Tr,createComponentView:Cr,createNgModuleRef:Ir,overrideProvider:Nr,overrideComponentView:_r,clearOverrides:wr,checkAndUpdateView:Lr,checkNoChangesView:xr,destroyView:kr,createDebugContext:(e,n)=>new Qr(e,n),handleEvent:Vr,updateDirectives:Wr,updateRenderer:Yr}:{setCurrentNode:()=>{},createRootView:vr,createEmbeddedView:Js,createComponentView:nr,createNgModuleRef:zt,overrideProvider:Wl,overrideComponentView:Wl,clearOverrides:Wl,checkAndUpdateView:rr,checkNoChangesView:sr,destroyView:hr,createDebugContext:(e,n)=>new Qr(e,n),handleEvent:(e,n,l,t)=>e.def.handleEvent(e,n,l,t),updateDirectives:(e,n)=>e.def.updateDirectives(0===n?Mr:Dr,e),updateRenderer:(e,n)=>e.def.updateRenderer(0===n?Mr:Dr,e)};Vl.setCurrentNode=e.setCurrentNode,Vl.createRootView=e.createRootView,Vl.createEmbeddedView=e.createEmbeddedView,Vl.createComponentView=e.createComponentView,Vl.createNgModuleRef=e.createNgModuleRef,Vl.overrideProvider=e.overrideProvider,Vl.overrideComponentView=e.overrideComponentView,Vl.clearOverrides=e.clearOverrides,Vl.checkAndUpdateView=e.checkAndUpdateView,Vl.checkNoChangesView=e.checkNoChangesView,Vl.destroyView=e.destroyView,Vl.resolveDep=hi,Vl.createDebugContext=e.createDebugContext,Vl.handleEvent=e.handleEvent,Vl.updateDirectives=e.updateDirectives,Vl.updateRenderer=e.updateRenderer,Vl.dirtyParentQueries=Hs}();const n=function(e){const n=Array.from(e.providers),l=Array.from(e.modules),t={};for(const i in e.providersByKey)t[i]=e.providersByKey[i];return{factory:e.factory,scope:e.scope,providers:n,modules:l,providersByKey:t}}(ht(this._ngModuleDefFactory));return Vl.createNgModuleRef(this.moduleType,e||Mn.NULL,this._bootstrapComponents,n)}}var tu=function(e){return e[e.ALL=0]="ALL",e[e.CONSTRUCTION=1]="CONSTRUCTION",e[e.DECONSTRUCTION=2]="DECONSTRUCTION",e[e.HUT=3]="HUT",e[e.HOUSE=4]="HOUSE",e[e.MARKETPLACE=5]="MARKETPLACE",e[e.WAREHOUSE=6]="WAREHOUSE",e[e.SMITHY=7]="SMITHY",e[e.BAKERY=8]="BAKERY",e[e.WORKSHOP=9]="WORKSHOP",e[e.SHRINE=10]="SHRINE",e[e.TAILOR=11]="TAILOR",e[e.BREWERY=12]="BREWERY",e[e.TAVERN=13]="TAVERN",e[e.CHURCH=14]="CHURCH",e[e.STOCKADE=15]="STOCKADE",e[e.BARRACKS=16]="BARRACKS",e[e.TRAINING_SQUARE=17]="TRAINING_SQUARE",e[e.WOODEN_TOWER=18]="WOODEN_TOWER",e[e.STONE_TOWER=19]="STONE_TOWER",e[e.STASH=20]="STASH",e[e.LOGGERS_HUT=21]="LOGGERS_HUT",e[e.SAWMILL=22]="SAWMILL",e[e.FORESTER=23]="FORESTER",e[e.HUNTER_LODGE=24]="HUNTER_LODGE",e[e.GATHERER=25]="GATHERER",e[e.TANNERY=26]="TANNERY",e[e.FARM=27]="FARM",e[e.FIELD=28]="FIELD",e[e.ORCHARD=29]="ORCHARD",e[e.PASTURE=30]="PASTURE",e[e.WINDMILL=31]="WINDMILL",e[e.BUTCHER=32]="BUTCHER",e[e.COTTON_MILL=33]="COTTON_MILL",e[e.WINERY=34]="WINERY",e[e.PIT_MINE=35]="PIT_MINE",e[e.QUARRY=36]="QUARRY",e[e.GEOLOGIST=37]="GEOLOGIST",e[e.STONEMASON=38]="STONEMASON",e[e.MINT=39]="MINT",e[e.FISHERS_HUT=40]="FISHERS_HUT",e[e.SCHOOL_OF_FISH=41]="SCHOOL_OF_FISH",e[e.SHARKS=42]="SHARKS",e[e.STONEHENGE=43]="STONEHENGE",e[e.PYRAMID=44]="PYRAMID",e[e.HANGING_GARDEN=45]="HANGING_GARDEN",e[e.COLOSSUS=46]="COLOSSUS",e[e.UNDERGROUND_CITY=47]="UNDERGROUND_CITY",e[e.GREAT_LIGHTHOUSE=48]="GREAT_LIGHTHOUSE",e[e.SACRED_GROVE=49]="SACRED_GROVE",e[e.ASCENSION_TEMPLE=50]="ASCENSION_TEMPLE",e[e.MANUFACTURE=51]="MANUFACTURE",e[e.LONGHOUSE=52]="LONGHOUSE",e[e.EMBASSY=53]="EMBASSY",e[e.PAPER_MILL=54]="PAPER_MILL",e[e.DEEP_MINE=55]="DEEP_MINE",e[e.GATHERERS_CAMP=56]="GATHERERS_CAMP",e[e.BARN=57]="BARN",e[e.KITCHEN=58]="KITCHEN",e[e.CLAY_PIT=59]="CLAY_PIT",e[e.TUDOR_HOUSE=60]="TUDOR_HOUSE",e[e.LOGGERS_CAMP=61]="LOGGERS_CAMP",e[e.METEORITE=62]="METEORITE",e[e.BOAT_BUILDER=63]="BOAT_BUILDER",e[e.SHIPYARD=64]="SHIPYARD",e[e.PIER=65]="PIER",e[e.HARBOUR=66]="HARBOUR",e[e.LIGHTHOUSE=67]="LIGHTHOUSE",e[e.CARTOGRAPHER=68]="CARTOGRAPHER",e[e.SETTLEMENT=69]="SETTLEMENT",e[e.SCHOLARS_LAB=70]="SCHOLARS_LAB",e[e.TAX_COLLECTOR=71]="TAX_COLLECTOR",e[e.BUILDERS_GUILD=72]="BUILDERS_GUILD",e}({}),iu=function(e){return e[e.DEV=0]="DEV",e[e.V1_0_0=1]="V1_0_0",e}({}),su=function(e){return e[e.NOTHING=0]="NOTHING",e[e.FOOD=1]="FOOD",e[e.LOG=2]="LOG",e[e.BRUSHWOOD=3]="BRUSHWOOD",e[e.STONE=4]="STONE",e[e.FUR=5]="FUR",e[e.WHEAT=6]="WHEAT",e[e.BARLEY=7]="BARLEY",e[e.HOP=8]="HOP",e[e.COTTON=9]="COTTON",e[e.HAY=10]="HAY",e[e.CHICKEN=11]="CHICKEN",e[e.COW=12]="COW",e[e.PIG=13]="PIG",e[e.HORSE=14]="HORSE",e[e.COAL=15]="COAL",e[e.GOLD_ORE=16]="GOLD_ORE",e[e.SILVER_ORE=17]="SILVER_ORE",e[e.COPPER_ORE=18]="COPPER_ORE",e[e.TIN_ORE=19]="TIN_ORE",e[e.IRON_ORE=20]="IRON_ORE",e[e.PLANK=21]="PLANK",e[e.CUT_STONE=22]="CUT_STONE",e[e.FUEL=23]="FUEL",e[e.FLOUR=24]="FLOUR",e[e.FABRIC=25]="FABRIC",e[e.LEATHER=26]="LEATHER",e[e.COINS=27]="COINS",e[e.COPPER=28]="COPPER",e[e.GOLD=29]="GOLD",e[e.SILVER=30]="SILVER",e[e.TIN=31]="TIN",e[e.BRONZE=32]="BRONZE",e[e.IRON=33]="IRON",e[e.STEEL=34]="STEEL",e[e.BERRY=35]="BERRY",e[e.MUSHROOM=36]="MUSHROOM",e[e.FISH=37]="FISH",e[e.APPLE=38]="APPLE",e[e.GRAPE=39]="GRAPE",e[e.BREAD=40]="BREAD",e[e.MEAT=41]="MEAT",e[e.EGG=42]="EGG",e[e.MILK=43]="MILK",e[e.COOKED_MEAT=44]="COOKED_MEAT",e[e.VEGETABLE_SOUP=45]="VEGETABLE_SOUP",e[e.MEAT_SOUP=46]="MEAT_SOUP",e[e.BEER=47]="BEER",e[e.WINE=48]="WINE",e[e.CLOTHES=49]="CLOTHES",e[e.BOW=50]="BOW",e[e.PICKAXE=51]="PICKAXE",e[e.SHOVEL=52]="SHOVEL",e[e.AXE=53]="AXE",e[e.SPEAR=54]="SPEAR",e[e.HAMMER=55]="HAMMER",e[e.SWORD=56]="SWORD",e[e.SHIELD=57]="SHIELD",e[e.LEATHER_ARMOR=58]="LEATHER_ARMOR",e[e.LIGHT_ARMOR=59]="LIGHT_ARMOR",e[e.HEAVY_ARMOR=60]="HEAVY_ARMOR",e[e.FISH_FOOD=61]="FISH_FOOD",e[e.CHEESE=62]="CHEESE",e[e.HERBS=63]="HERBS",e[e.HERBAL_MEDICINE=64]="HERBAL_MEDICINE",e[e.COOKED_FISH=65]="COOKED_FISH",e[e.SHEEP=66]="SHEEP",e[e.WOOL=67]="WOOL",e[e.PAPER=68]="PAPER",e[e.GLASS=69]="GLASS",e[e.CLAY=70]="CLAY",e[e.POTTERY=71]="POTTERY",e[e.BRICKS=72]="BRICKS",e[e.OMELETTE=73]="OMELETTE",e[e.PIE=74]="PIE",e[e.NAILS=75]="NAILS",e[e.MAP=76]="MAP",e[e.CANNON=77]="CANNON",e[e.BOUILLABAISSE=78]="BOUILLABAISSE",e[e.GEMS=79]="GEMS",e[e.JEWELRY=80]="JEWELRY",e}({});!function(e){e.values=function(){return Object.keys(e).filter(e=>isNaN(e)&&"values"!==e)}}(su||(su={}));var ru=function(e){return e[e.MOTIVATION_SPEECH=0]="MOTIVATION_SPEECH",e[e.ROYAL_PROPHECY=1]="ROYAL_PROPHECY",e[e.HERITAGE=2]="HERITAGE",e[e.FAMILY_JEWELS=3]="FAMILY_JEWELS",e[e.KING_OF_THE_FOREST=4]="KING_OF_THE_FOREST",e[e.KING_OF_THE_SEAS=5]="KING_OF_THE_SEAS",e[e.KING_OF_THE_PEOPLE=6]="KING_OF_THE_PEOPLE",e[e.KING_OF_THE_WAR=7]="KING_OF_THE_WAR",e[e.CALL_TO_ARMS=8]="CALL_TO_ARMS",e[e.UNITE_WITH_THE_PEOPLE=9]="UNITE_WITH_THE_PEOPLE",e[e.JESTER=10]="JESTER",e[e.ROYAL_ORDERS=11]="ROYAL_ORDERS",e[e.ROYAL_ARCHIVES=12]="ROYAL_ARCHIVES",e[e.ASTROLOGICAL_NOTE=13]="ASTROLOGICAL_NOTE",e[e.ROYAL_FESTIVAL=14]="ROYAL_FESTIVAL",e[e.ROYAL_RESERVE=15]="ROYAL_RESERVE",e[e.ANCIENT_SEA_MAPS=16]="ANCIENT_SEA_MAPS",e[e.ROYAL_GARDENS=17]="ROYAL_GARDENS",e[e.HIRE_MERCENARIES=18]="HIRE_MERCENARIES",e[e.HIRE_PIRATES=19]="HIRE_PIRATES",e[e.ANCIENT_PROTECTION=20]="ANCIENT_PROTECTION",e[e.ROYAL_TRADITIONS=21]="ROYAL_TRADITIONS",e}({}),uu=function(e){return e[e.MANAGEMENT=0]="MANAGEMENT",e[e.STONE_AXE=1]="STONE_AXE",e[e.STONE_PICKAXE=2]="STONE_PICKAXE",e[e.STONE_SHOVEL=3]="STONE_SHOVEL",e[e.STONE_HAMMER=4]="STONE_HAMMER",e[e.HUNTING=5]="HUNTING",e[e.FIRE=6]="FIRE",e[e.BIGGER_FIRE=7]="BIGGER_FIRE",e[e.COOKING=8]="COOKING",e[e.TRADE=9]="TRADE",e[e.ALCOHOL=10]="ALCOHOL",e[e.WONDER_BUILDINGS=11]="WONDER_BUILDINGS",e[e.TRADE_ROUTES=12]="TRADE_ROUTES",e[e.BUFF_PRODUCTION=13]="BUFF_PRODUCTION",e[e.STONE_SPEAR=14]="STONE_SPEAR",e[e.BOW=15]="BOW",e[e.BARRACKS=16]="BARRACKS",e[e.WOODEN_DEFENCES=17]="WOODEN_DEFENCES",e[e.STONE_DEFENCES=18]="STONE_DEFENCES",e[e.STASH=19]="STASH",e[e.SCIENTIFIC_METHOD=20]="SCIENTIFIC_METHOD",e[e.FORESIGHT=21]="FORESIGHT",e[e.CALENDAR=22]="CALENDAR",e[e.WEATHER=23]="WEATHER",e[e.HISTORY=24]="HISTORY",e[e.URBAN_PLANNING=25]="URBAN_PLANNING",e[e.MATHEMATICS=26]="MATHEMATICS",e[e.PROSPECTING_FOR_ORE=27]="PROSPECTING_FOR_ORE",e[e.ADVANCED_PROSPECTING=28]="ADVANCED_PROSPECTING",e[e.MASTER_PROSPECTING=29]="MASTER_PROSPECTING",e[e.SAWMILL=30]="SAWMILL",e[e.MINING=31]="MINING",e[e.PIT_MINE=32]="PIT_MINE",e[e.UNDERGROUND_MINE=33]="UNDERGROUND_MINE",e[e.WINDMILL=34]="WINDMILL",e[e.MORTAR=35]="MORTAR",e[e.HOUSE=36]="HOUSE",e[e.TANNERY=37]="TANNERY",e[e.FABRIC=38]="FABRIC",e[e.TAILORING=39]="TAILORING",e[e.ORE_PROCESSING=40]="ORE_PROCESSING",e[e.ADVANCED_ORE_PROCESSING=41]="ADVANCED_ORE_PROCESSING",e[e.MASTER_ORE_PROCESSING=42]="MASTER_ORE_PROCESSING",e[e.COINS_MINTING=43]="COINS_MINTING",e[e.METALLURGY=44]="METALLURGY",e[e.ADVANCED_METALLURGY=45]="ADVANCED_METALLURGY",e[e.PICKAXE_DESIGN=46]="PICKAXE_DESIGN",e[e.AGRICULTURE=47]="AGRICULTURE",e[e.FORESTRY=48]="FORESTRY",e[e.FISHING=49]="FISHING",e[e.ANIMALS=50]="ANIMALS",e[e.COTTON=51]="COTTON",e[e.FERTILIZER=52]="FERTILIZER",e[e.HUMAN_RESOURCES=53]="HUMAN_RESOURCES",e[e.FISH_FOOD=54]="FISH_FOOD",e[e.SPECIALISED_PRODUCTION=55]="SPECIALISED_PRODUCTION",e[e.LONGHOUSE=56]="LONGHOUSE",e[e.HERBAL_MEDICINE=57]="HERBAL_MEDICINE",e[e.HERBALISM=58]="HERBALISM",e[e.CARTOGRAPHY=59]="CARTOGRAPHY",e[e.PARCHMENT=60]="PARCHMENT",e[e.PAPER_MILL=61]="PAPER_MILL",e[e.DEEP_MINE=62]="DEEP_MINE",e[e.ADVANCED_MATHEMATICS=63]="ADVANCED_MATHEMATICS",e[e.IMPROVED_FORESIGHT=64]="IMPROVED_FORESIGHT",e[e.LOGISTICS=65]="LOGISTICS",e[e.PRODUCTION_ZONES=66]="PRODUCTION_ZONES",e[e.CROPS_STORAGE=67]="CROPS_STORAGE",e[e.COPPER_TOOLS=68]="COPPER_TOOLS",e[e.BRONZE_TOOLS=69]="BRONZE_TOOLS",e[e.IRON_TOOLS=70]="IRON_TOOLS",e[e.BAKERY=71]="BAKERY",e[e.KITCHEN=72]="KITCHEN",e[e.DIGGING=73]="DIGGING",e[e.POTTERY=74]="POTTERY",e[e.BRICKS=75]="BRICKS",e[e.TUDOR_HOUSE=76]="TUDOR_HOUSE",e[e.IMPROVED_COOKING=77]="IMPROVED_COOKING",e[e.BOAT_BUILDING=78]="BOAT_BUILDING",e[e.CANNON=79]="CANNON",e[e.GALLEON=80]="GALLEON",e[e.BIGGER_SHIPS=81]="BIGGER_SHIPS",e[e.SEA_NAVIGATION=82]="SEA_NAVIGATION",e[e.SEA_CARTOGRAPHY=83]="SEA_CARTOGRAPHY",e[e.SEA_CUISINE=84]="SEA_CUISINE",e[e.SETTLEMENT=85]="SETTLEMENT",e[e.SCHOLAR=86]="SCHOLAR",e[e.TAX=87]="TAX",e[e.JEWELRY=88]="JEWELRY",e[e.BUILDERS_GUILD=89]="BUILDERS_GUILD",e}({}),ou=function(e){return e[e.WEATHER=0]="WEATHER",e[e.MARKET=1]="MARKET",e[e.MANAGEMENT=2]="MANAGEMENT",e[e.CRAFTING=3]="CRAFTING",e[e.RESEARCH=4]="RESEARCH",e[e.ARMY=5]="ARMY",e[e.RELIGION=6]="RELIGION",e[e.FORT=7]="FORT",e[e.SEA=8]="SEA",e[e.FIELD=9]="FIELD",e[e.MOUNTAINS=10]="MOUNTAINS",e[e.PLATEAU=11]="PLATEAU",e[e.HOUSE=12]="HOUSE",e[e.SHRINE=13]="SHRINE",e[e.CHURCH=14]="CHURCH",e[e.TAILOR=15]="TAILOR",e[e.TAVERN=16]="TAVERN",e[e.BAKERY=17]="BAKERY",e[e.MARKETPLACE=18]="MARKETPLACE",e[e.BARRACKS=19]="BARRACKS",e[e.STOCKADE=20]="STOCKADE",e[e.WOODEN_TOWER=21]="WOODEN_TOWER",e[e.STONE_TOWER=22]="STONE_TOWER",e[e.STASH=23]="STASH",e[e.FORESTER=24]="FORESTER",e[e.SAWMILL=25]="SAWMILL",e[e.HUNTER=26]="HUNTER",e[e.TANNERY=27]="TANNERY",e[e.WINDMILL=28]="WINDMILL",e[e.FARM=29]="FARM",e[e.PASTURE=30]="PASTURE",e[e.BUTCHER=31]="BUTCHER",e[e.BREWERY=32]="BREWERY",e[e.WINERY=33]="WINERY",e[e.COTTON_MILL=34]="COTTON_MILL",e[e.PIT_MINE=35]="PIT_MINE",e[e.GEOLOGIST=36]="GEOLOGIST",e[e.SMITHY=37]="SMITHY",e[e.MINT=38]="MINT",e[e.FISHERS_HUT=39]="FISHERS_HUT",e[e.CALENDAR=40]="CALENDAR",e[e.FIRE=41]="FIRE",e[e.URBAN_PLANNING=42]="URBAN_PLANNING",e[e.ALCOHOL=43]="ALCOHOL",e[e.GOLD=44]="GOLD",e[e.SILVER=45]="SILVER",e[e.BRONZE=46]="BRONZE",e[e.IRON=47]="IRON",e[e.STEEL=48]="STEEL",e[e.ADVANCED_ORE_PROCESSING=49]="ADVANCED_ORE_PROCESSING",e[e.BUFFS=50]="BUFFS",e[e.COTTON=51]="COTTON",e[e.BARLEY=52]="BARLEY",e[e.HOPS=53]="HOPS",e[e.BUILT_QUARRY=54]="BUILT_QUARRY",e[e.BUILT_SMITHY=55]="BUILT_SMITHY",e[e.HUMAN_RESOURCES=56]="HUMAN_RESOURCES",e[e.FISH_FOOD=57]="FISH_FOOD",e[e.SPECIALISED_PRODUCTION=58]="SPECIALISED_PRODUCTION",e[e.MANUFACTURE=59]="MANUFACTURE",e[e.STONEMASON=60]="STONEMASON",e[e.LONGHOUSE=61]="LONGHOUSE",e[e.HERITAGE=62]="HERITAGE",e[e.HERBALISM=63]="HERBALISM",e[e.EMBASSY=64]="EMBASSY",e[e.CARTOGRAPHY=65]="CARTOGRAPHY",e[e.PAPER_MILL=66]="PAPER_MILL",e[e.DEEP_MINE=67]="DEEP_MINE",e[e.LOGISTICS=68]="LOGISTICS",e[e.PRODUCTION_ZONES=69]="PRODUCTION_ZONES",e[e.BARN=70]="BARN",e[e.KITCHEN=71]="KITCHEN",e[e.CLAY_PIT=72]="CLAY_PIT",e[e.TUDOR_HOUSE=73]="TUDOR_HOUSE",e[e.NAVY=74]="NAVY",e[e.PIER=75]="PIER",e[e.BOAT_BUILDER=76]="BOAT_BUILDER",e[e.HARBOUR=77]="HARBOUR",e[e.SHIPYARD=78]="SHIPYARD",e[e.BRIGANTINE=79]="BRIGANTINE",e[e.GALLEON=80]="GALLEON",e[e.LIGHTHOUSE=81]="LIGHTHOUSE",e[e.CARTOGRAPHER=82]="CARTOGRAPHER",e[e.SETTLEMENT=83]="SETTLEMENT",e[e.SCHOLARS_LAB=84]="SCHOLARS_LAB",e[e.TAX_COLLECTOR=85]="TAX_COLLECTOR",e[e.JEWELRY=86]="JEWELRY",e[e.BUILDERS_GUILD=87]="BUILDERS_GUILD",e}({}),au=function(e){return e[e.BLESSING=0]="BLESSING",e[e.PREACH=1]="PREACH",e[e.FAITH_SHIELD=2]="FAITH_SHIELD",e[e.SOLDIER_PRAYER=3]="SOLDIER_PRAYER",e[e.FAITHFUL_RESEARCH=4]="FAITHFUL_RESEARCH",e[e.BABY_BOOM=5]="BABY_BOOM",e[e.LIFE_CYCLE=6]="LIFE_CYCLE",e[e.HOLY_WAR=7]="HOLY_WAR",e[e.PRAY=8]="PRAY",e}({}),cu=function(e){return e[e.SPY=0]="SPY",e[e.DIVERSION=1]="DIVERSION",e[e.PLUNDER=2]="PLUNDER",e[e.EXPEDITION=3]="EXPEDITION",e[e.CONQUER=4]="CONQUER",e[e.COLONIZE=5]="COLONIZE",e[e.MOVE=6]="MOVE",e[e.BUILD=7]="BUILD",e[e.FISHING=8]="FISHING",e[e.HUNTING=9]="HUNTING",e[e.TREASURE=10]="TREASURE",e[e.CARTOGRAPHY=11]="CARTOGRAPHY",e[e.SEA_BATTLE=12]="SEA_BATTLE",e[e.SEA_PLUNDER=13]="SEA_PLUNDER",e[e.SEA_CONQUER=14]="SEA_CONQUER",e[e.SEA_MOVE=15]="SEA_MOVE",e}({}),hu=function(e){return e[e.NONE=0]="NONE",e[e.WHEAT=1]="WHEAT",e[e.BARLEY=2]="BARLEY",e[e.HAY=3]="HAY",e[e.HOP=4]="HOP",e[e.COTTON=5]="COTTON",e[e.BERRY=6]="BERRY",e[e.GRAPE=7]="GRAPE",e[e.APPLE=8]="APPLE",e[e.HERBS=9]="HERBS",e[e.MUSHROOM=10]="MUSHROOM",e}({}),du=function(e){return e[e.ALL=0]="ALL",e[e.NONE=1]="NONE",e[e.RAW=2]="RAW",e[e.PROCESSED=3]="PROCESSED",e[e.FOOD=4]="FOOD",e[e.TOOLS=5]="TOOLS",e[e.OTHER=6]="OTHER",e[e.WOODEN=7]="WOODEN",e[e.METAL=8]="METAL",e[e.STONE=9]="STONE",e[e.ANIMAL=10]="ANIMAL",e[e.FUEL=11]="FUEL",e[e.CONSUMABLE=12]="CONSUMABLE",e}({}),gu=function(e){return e[e.NONE=0]="NONE",e[e.FERTILITY=1]="FERTILITY",e[e.NATURE=2]="NATURE",e[e.TECHNOLOGY=3]="TECHNOLOGY",e[e.WAR=4]="WAR",e}({}),pu=function(e){return e[e.ALL=0]="ALL",e[e.MILITIA=1]="MILITIA",e[e.SPEARMAN=2]="SPEARMAN",e[e.ARCHER=3]="ARCHER",e[e.SWORDSMAN=4]="SWORDSMAN",e[e.LIGHT_CAVALRY=5]="LIGHT_CAVALRY",e[e.SPY=6]="SPY",e[e.COLONIST=7]="COLONIST",e[e.HORSE_ARCHER=8]="HORSE_ARCHER",e[e.BOAT=9]="BOAT",e[e.BRIGANTINE=10]="BRIGANTINE",e[e.GALLEON=11]="GALLEON",e[e.GUARD_TOWER=12]="GUARD_TOWER",e}({}),mu=function(e){return e[e.NONE=0]="NONE",e[e.OFFENSE=1]="OFFENSE",e[e.DEFENSE=2]="DEFENSE",e[e.ECONOMY=3]="ECONOMY",e[e.PEACE=4]="PEACE",e}({}),fu=function(e){return e[e.SPECIAL=0]="SPECIAL",e[e.PLAYER=1]="PLAYER",e[e.NEUTRAL=2]="NEUTRAL",e[e.EXPEDITION=3]="EXPEDITION",e[e.CLEADAL=4]="CLEADAL",e[e.GRIERIA=5]="GRIERIA",e[e.BOTHIL=6]="BOTHIL",e[e.DOSHOR=7]="DOSHOR",e[e.CREURUS=8]="CREURUS",e[e.ESTRAILA=9]="ESTRAILA",e[e.NONE=10]="NONE",e[e.PIRATES=11]="PIRATES",e}({}),Su=function(e){return e[e.FLU=0]="FLU",e[e.COLD=1]="COLD",e[e.PNEUMONIA=2]="PNEUMONIA",e}({}),Eu=function(e){return e[e.VILLAGE=0]="VILLAGE",e[e.FORT=1]="FORT",e[e.FOREST=2]="FOREST",e[e.FIELD=3]="FIELD",e[e.MOUNTAINS=4]="MOUNTAINS",e[e.SEA=5]="SEA",e[e.PLATEAU=6]="PLATEAU",e}({}),vu=function(e){return e[e.FISH=0]="FISH",e[e.SHARK=1]="SHARK",e[e.TREASURE=2]="TREASURE",e[e.PIRATES=3]="PIRATES",e[e.PIRATES_BASE=4]="PIRATES_BASE",e[e.WHIRLPOOL=5]="WHIRLPOOL",e[e.CARTOGRAPHY=6]="CARTOGRAPHY",e}({}),Ru=function(e){return e[e.FOOD=0]="FOOD",e[e.VARIOUS_FOOD=1]="VARIOUS_FOOD",e[e.MONOTONOUS_FOOD=2]="MONOTONOUS_FOOD",e[e.RAW_FOOD=3]="RAW_FOOD",e[e.CLOTHES=4]="CLOTHES",e[e.FUR_CLOTHES=5]="FUR_CLOTHES",e[e.ALCOHOL=6]="ALCOHOL",e[e.TAX=7]="TAX",e[e.DONATION=8]="DONATION",e[e.FREEZING=9]="FREEZING",e[e.SICKNESS_DEATH=10]="SICKNESS_DEATH",e[e.FESTIVAL=11]="FESTIVAL",e[e.ROYAL_FESTIVAL=12]="ROYAL_FESTIVAL",e[e.RELIGION=13]="RELIGION",e[e.PRAYER=14]="PRAYER",e[e.POPULATION_SIZE=15]="POPULATION_SIZE",e[e.LOW_QUALITY_HOUSING=16]="LOW_QUALITY_HOUSING",e[e.SUCCESSFUL_CONQUER=17]="SUCCESSFUL_CONQUER",e[e.RECENTLY_INVADED=18]="RECENTLY_INVADED",e[e.RECENTLY_CONQUERED=19]="RECENTLY_CONQUERED",e[e.PIRATES_DEFEATED=20]="PIRATES_DEFEATED",e[e.PIRATES_BASE_PRESENT=21]="PIRATES_BASE_PRESENT",e[e.ROYAL_GARDENS=22]="ROYAL_GARDENS",e}({});class Ou{static round(e,n){return e.toFixed(n)}static titleCase(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}static prepareResourceName(e){const n=su[e];return n?this.titleCase(n.replace(/_/g," ")):"(error: r"+e+")"}static prepareRegionName(e){const n=Eu[e];return n?this.titleCase(n.replace(/_/g," ")):"(error: reg"+e+")"}static prepareResourceTypeName(e){const n=du[e];return n?this.titleCase(n.replace(/_/g," ")):"(error: rt"+e+")"}static preparePerkName(e){const n=ru[e];return n?this.titleCase(n.replace(/_/g," ")):"(error: rp"+e+")"}static prepareTechName(e){const n=uu[e];return n?this.titleCase(n.replace(/_/g," ")):"(error: r"+e+")"}static prepareFlagName(e){const n=ou[e];return n?this.titleCase(n.replace(/_/g," ")):"(error: f"+e+")"}static prepareBuildingName(e){const n=tu[e];return n?this.titleCase(n.replace(/_/g," ")):"(error: b"+e+")"}static prepareSeaEventName(e){const n=vu[e];return n?this.titleCase(n.replace(/_/g," ")):"(error: se"+e+")"}static preparePrayerName(e){const n=au[e];return n?this.titleCase(n.replace(/_/g," ")):"(error: p"+e+")"}static prepareReligionName(e){const n=gu[e];return n?this.titleCase(n.replace(/_/g," ")):"(error: rel"+e+")"}static prepareTroopName(e){const n=pu[e];return n?this.titleCase(n.replace(/_/g," ")):"(error: t"+e+")"}static prepareMissionName(e){const n=cu[e];return n?this.titleCase(n.replace(/_/g," ")):"(error: m"+e+")"}static prepareCropName(e){const n=hu[e];return n?this.titleCase(n.replace(/_/g," ")):"(error: c"+e+")"}static prepareFocusName(e){const n=mu[e];return n?this.titleCase(n.replace(/_/g," ")):"(error: foc"+e+")"}static prepareCountryName(e){const n=fu[e];return n?this.titleCase(n.replace(/_/g," ")):"(error: co"+e+")"}static prepareSicknessName(e){const n=Su[e];return n?this.titleCase(n.replace(/_/g," ")):"(error: si"+e+")"}static prepareHappinessEffectName(e){const n=Ru[e];return n?this.titleCase(n.replace(/_/g," ")):"(error: he"+e+")"}static resourcesArraysDiff(e,n){return e.filter(e=>n.findIndex(n=>n.resource===e.resource)<0)}static prepareResourcesNamesList(e){let n="";return e.forEach(e=>n+=Ou.prepareResourceName(e.resource)+", "),n=n.substr(0,n.length-2),n.toLowerCase()}static copyResourceArray(e){const n=[];return e.forEach(e=>n.push({resource:e.resource,amount:e.amount})),n}}var Tu=function(e){return e[e.SUN=0]="SUN",e[e.CLOUDS=1]="CLOUDS",e[e.RAIN=2]="RAIN",e[e.WIND=3]="WIND",e[e.STORM=4]="STORM",e[e.SNOW=5]="SNOW",e}({}),Cu=function(e){return e[e.PLANK=0]="PLANK",e[e.CUT_STONE=1]="CUT_STONE",e[e.FABRIC=2]="FABRIC",e[e.LEATHER=3]="LEATHER",e[e.GOLD=4]="GOLD",e[e.SILVER=5]="SILVER",e[e.COPPER=6]="COPPER",e[e.TIN=7]="TIN",e[e.BRONZE=8]="BRONZE",e[e.IRON=9]="IRON",e[e.STEEL=10]="STEEL",e[e.FUEL_BRUSHWOOD=11]="FUEL_BRUSHWOOD",e[e.FUEL_LOG=12]="FUEL_LOG",e[e.FUEL_COAL=13]="FUEL_COAL",e[e.STONE_AXE=14]="STONE_AXE",e[e.STONE_PICKAXE=15]="STONE_PICKAXE",e[e.STONE_SHOVEL=16]="STONE_SHOVEL",e[e.STONE_SPEAR=17]="STONE_SPEAR",e[e.STONE_HAMMER=18]="STONE_HAMMER",e[e.BOW=19]="BOW",e[e.CLOTHES_FUR=20]="CLOTHES_FUR",e[e.CLOTHES_FABRIC=21]="CLOTHES_FABRIC",e[e.SWORD=22]="SWORD",e[e.WOODEN_SHIELD=23]="WOODEN_SHIELD",e[e.LEATHER_ARMOR=24]="LEATHER_ARMOR",e[e.LIGHT_ARMOR=25]="LIGHT_ARMOR",e[e.HEAVY_ARMOR=26]="HEAVY_ARMOR",e[e.COOKED_MEAT=27]="COOKED_MEAT",e[e.FLOUR=28]="FLOUR",e[e.BREAD=29]="BREAD",e[e.VEGETABLE_SOUP_BERRY=30]="VEGETABLE_SOUP_BERRY",e[e.VEGETABLE_SOUP_MUSHROOM=31]="VEGETABLE_SOUP_MUSHROOM",e[e.MEAT_SOUP=32]="MEAT_SOUP",e[e.CHEESE=33]="CHEESE",e[e.HERBAL_MEDICINE=34]="HERBAL_MEDICINE",e[e.COOKED_FISH=35]="COOKED_FISH",e[e.FABRIC_WOOL=36]="FABRIC_WOOL",e[e.PARCHMENT=37]="PARCHMENT",e[e.VEGETABLE_SOUP_BERRY_MUSHROOM=38]="VEGETABLE_SOUP_BERRY_MUSHROOM",e[e.COPPER_AXE=39]="COPPER_AXE",e[e.COPPER_PICKAXE=40]="COPPER_PICKAXE",e[e.COPPER_SHOVEL=41]="COPPER_SHOVEL",e[e.COPPER_SPEAR=42]="COPPER_SPEAR",e[e.COPPER_HAMMER=43]="COPPER_HAMMER",e[e.BRONZE_AXE=44]="BRONZE_AXE",e[e.BRONZE_PICKAXE=45]="BRONZE_PICKAXE",e[e.BRONZE_SHOVEL=46]="BRONZE_SHOVEL",e[e.BRONZE_SPEAR=47]="BRONZE_SPEAR",e[e.BRONZE_HAMMER=48]="BRONZE_HAMMER",e[e.IRON_AXE=49]="IRON_AXE",e[e.IRON_PICKAXE=50]="IRON_PICKAXE",e[e.IRON_SHOVEL=51]="IRON_SHOVEL",e[e.IRON_SPEAR=52]="IRON_SPEAR",e[e.IRON_HAMMER=53]="IRON_HAMMER",e[e.POTTERY=54]="POTTERY",e[e.BRICKS=55]="BRICKS",e[e.OMELETTE=56]="OMELETTE",e[e.PIE=57]="PIE",e[e.COPPER_NAILS=58]="COPPER_NAILS",e[e.BRONZE_NAILS=59]="BRONZE_NAILS",e[e.IRON_NAILS=60]="IRON_NAILS",e[e.CANNON=61]="CANNON",e[e.BOUILLABAISSE=62]="BOUILLABAISSE",e[e.JEWELRY=63]="JEWELRY",e[e.BRONZE_SWORD=64]="BRONZE_SWORD",e[e.IRON_SWORD=65]="IRON_SWORD",e[e.BRONZE_SHIELD=66]="BRONZE_SHIELD",e[e.IRON_SHIELD=67]="IRON_SHIELD",e}({}),Iu=function(e){return e[e.GENERAL=0]="GENERAL",e[e.MILITARY=1]="MILITARY",e[e.SCIENCE=2]="SCIENCE",e[e.TECHNOLOGY=3]="TECHNOLOGY",e[e.AGRICULTURE=4]="AGRICULTURE",e}({}),bu=function(e){return e[e.GAME=0]="GAME",e[e.LOG=1]="LOG",e[e.MODAL=2]="MODAL",e[e.RESOURCES=3]="RESOURCES",e[e.LAND=4]="LAND",e[e.RESEARCH=5]="RESEARCH",e[e.CRAFTING=6]="CRAFTING",e[e.RECIPE=7]="RECIPE",e[e.RELIGION=8]="RELIGION",e[e.WEATHER=9]="WEATHER",e[e.CALENDAR=10]="CALENDAR",e[e.EFFECTS=11]="EFFECTS",e[e.ARMY=12]="ARMY",e[e.HAPPINESS=13]="HAPPINESS",e[e.MANAGEMENT=14]="MANAGEMENT",e[e.ROYAL=15]="ROYAL",e[e.MARKET=16]="MARKET",e[e.VILLAGE=17]="VILLAGE",e[e.FORT=18]="FORT",e[e.FOREST=19]="FOREST",e[e.FIELD=20]="FIELD",e[e.MOUNTAINS=21]="MOUNTAINS",e[e.SEA=22]="SEA",e[e.PLATEAU=23]="PLATEAU",e[e.BUILDING_FACTORY=24]="BUILDING_FACTORY",e[e.SERIALIZER=25]="SERIALIZER",e[e.KONGREGATE=26]="KONGREGATE",e[e.ID=27]="ID",e[e.TICKER=28]="TICKER",e[e.HERITAGE=29]="HERITAGE",e[e.WORLD=30]="WORLD",e[e.MISSION_FACTORY=31]="MISSION_FACTORY",e[e.SOUND=32]="SOUND",e[e.TUTORIAL=33]="TUTORIAL",e[e.NAVY=34]="NAVY",e[e.REGIONS=35]="REGIONS",e}({});class yu{constructor(e,n,l,t,i=0){this.name=e,this.building=n,this.effect=l,this.duration=t,this.buff=i}isPermanent(){return this.duration<0}isRoyal(){return-10===this.duration}isWonder(){return-9===this.duration}isBuff(){return this.buff>0}}let Au=(()=>{class e{}return e.PERMANENT=-1,e.WONDER=-9,e.ROYAL=-10,e})(),Nu=(()=>{class e{static randomElement(e,n=!1,l=10){let t=0;if(e.forEach(e=>t+=e.chance),t>100||t<100&&n){const n=100/t;e.forEach(e=>e.chance=Math.floor(e.chance*n))}const i=this.randomBetween(1,100*l);let s=0;for(const r of e){if(s+1<=i&&s+r.chance*l>=i)return r.item;s+=r.chance*l}for(;t>100;)for(const n of e){if(s+1<=i&&s+n.chance*l>=i)return n.item;s+=n.chance*l}return null}static chance(e){return Math.random()<e}static randomExcept(e,n){const l=e.filter((function(e){return n.indexOf(e)<0}));return l[this.randomBetween(0,l.length-1)]}static randomArrayElement(e){return e[this.randomBetween(0,e.length-1)]}static randomBetween(e,n){return Math.floor(Math.random()*(n-e+1))+e}static randomBetweenFloat(e,n){return Math.random()*(n-e+1)+e}static randomWeightedExcept(e,n){const l=e.filter((function(e){return n.indexOf(e.item)<0}));let t=0;l.forEach(e=>t+=e.chance);const i=this.randomBetween(1,t);let s=0;for(let r=0;r<l.length;r++){if(s<i&&i<=s+l[r].chance)return l[r].item;s+=l[r].chance}}}return e.\u0275prov=re({factory:function(){return new e},token:e,providedIn:"root"}),e})();class _u{constructor(e,n,l,t){this.name=e,this.troop=n,this.effect=l,this.duration=t}isPermanent(){return this.duration<0}isRoyal(){return-10===this.duration}isWonder(){return-9===this.duration}}class wu{constructor(e,n,l){this.name=e,this.effect=n,this.duration=l}isPermanent(){return this.duration<0}isRoyal(){return-10===this.duration}isWonder(){return-9===this.duration}}var Pu=function(e){return e.ALL="all",e.BUILD="build-modal",e.IMPORT="import-modal",e.EXPORT="export-modal",e.HARD_RESET="hard-reset-modal",e.INFO="info-modal",e.OPTIONS="options-modal",e.CONFIRM="confirm-modal",e.INPUT="input-modal",e.ROYAL="royal-modal",e.MISSION="mission-modal",e.MARKET="market-modal",e.WORK_MANAGEMENT="work-management-modal",e.TUTORIAL="tutorial-modal",e.CHANGELOG="changelog-modal",e.RESOURCE_MANAGEMENT="resource-management-modal",e.RECIPE="recipe-modal",e.WORLD="world-modal",e.WORLD_BUILD="world-build-modal",e.FIGHT_REPORT="fight-report-modal",e.ABDICATION="abdication-modal",e.ASCENSION="ascension-modal",e.RESEARCH_UNLOCK="research-unlock-modal",e.SHIPYARD="shipyard-modal",e.FESTIVAL="festival-modal",e.ERROR="error-modal",e}({}),Mu=function(e){return e[e.METEORITE=0]="METEORITE",e[e.SMALL_REFUGEE=1]="SMALL_REFUGEE",e[e.MEDIUM_REFUGEE=2]="MEDIUM_REFUGEE",e}({}),Du=function(e){return e[e.LOG=0]="LOG",e[e.WARNING=1]="WARNING",e[e.SUCCESS=2]="SUCCESS",e[e.MYSTICAL=3]="MYSTICAL",e[e.FIGHT_REPORT=4]="FIGHT_REPORT",e[e.ERROR=5]="ERROR",e}({}),Lu=function(e){return e[e.DISABLED=0]="DISABLED",e[e.EASY=1]="EASY",e[e.MEDIUM=2]="MEDIUM",e[e.HARD=3]="HARD",e}({}),xu=function(e){return e[e.DEFENSES=0]="DEFENSES",e[e.ROADS=1]="ROADS",e[e.WATCHTOWER=2]="WATCHTOWER",e[e.GUARD_TOWER=3]="GUARD_TOWER",e[e.HARBOUR=4]="HARBOUR",e}({});const ku={AUTO_SAVE_STATUS:!0,AUTO_SAVE_PERIOD:5,METRIC:!0,SAVE_LOGS:!1,PAUSE_ON_INIT:!1,KEEP_RESERVATION_SETTINGS_ON_RESET:!1,KEEP_MANAGEMENT_SETTINGS_ON_RESET:!1,KEEP_AUTO_TRADE_ON_RESET:!1,SOUND_MASTER:!0,SOUND_MASTER_VOLUME:50,SOUND_MUSIC:!0,SOUND_MUSIC_VOLUME:50,SOUND_EFFECTS:!0,SOUND_EFFECTS_VOLUME:50,SOUND_EFFECT_MARKET:!0,SOUND_EFFECT_RESEARCH:!0,SOUND_EFFECT_INVASION:!0,SOUND_EFFECT_SEASON:!0,VISUAL_PROGRESS_BARS:!0,AUTO_TEXT_FITTING:!0,PAGED_VIEW:!1,BUILDINGS_PER_PAGE:12,POSITIVE_COLOUR:"#006400",NEGATIVE_COLOUR:"#8B0000",PLAYER_COLOUR:"#006400",AI_DIFFICULTY:Lu.MEDIUM},Fu={getBuilding(e){const n=this.getBuildings().find(n=>n[0]===tu[e]);if(n)return n[1];console.warn("Invalid building: "+Ou.prepareBuildingName(e))},getBuildings(){return Object.entries(this.VILLAGE).concat(Object.entries(this.FORT)).concat(Object.entries(this.FOREST)).concat(Object.entries(this.FIELD)).concat(Object.entries(this.MOUNTAINS)).concat(Object.entries(this.PLATEAU)).concat(Object.entries(this.SEA))},getBuildingRegion(e){return Object.keys(this.FOREST).includes(tu[e])?Eu.FOREST:Object.keys(this.VILLAGE).includes(tu[e])?Eu.VILLAGE:Object.keys(this.MOUNTAINS).includes(tu[e])?Eu.MOUNTAINS:Object.keys(this.FIELD).includes(tu[e])?Eu.FIELD:Object.keys(this.FORT).includes(tu[e])?Eu.FORT:Object.keys(this.SEA).includes(tu[e])?Eu.SEA:Object.keys(this.PLATEAU).includes(tu[e])?Eu.PLATEAU:void 0},DEMOLITION_RETURN:.3,FOREST:{LOGGERS_HUT:{BASE_POWER:5,SIZE:5,COMPLEXITY:5,DESCRIPTION:"Loggers cut trees in the forest",COST:[{resource:su.LOG,amount:10}],WEATHER:[{weather:Tu.RAIN,effect:-50},{weather:Tu.STORM,effect:-100}],BUFF:{name:"New tools",effect:10,duration:360,cost:[{resource:su.AXE,amount:5}]},UPGRADES:[{BASE_POWER:7.5,COMPLEXITY:10,PREREQUISITES:[ou.URBAN_PLANNING],COST:[{resource:su.PLANK,amount:10},{resource:su.CUT_STONE,amount:10},{resource:su.HAMMER,amount:5},{resource:su.AXE,amount:5}]},{BASE_POWER:10,COMPLEXITY:20,PREREQUISITES:[],COST:[{resource:su.PLANK,amount:20},{resource:su.CUT_STONE,amount:20},{resource:su.COPPER,amount:10},{resource:su.AXE,amount:10}]}]},LOGGERS_CAMP:{BASE_POWER:5,SIZE:20,COMPLEXITY:5,DESCRIPTION:"Loggers cut trees in the forest",COST:[{resource:su.LOG,amount:30},{resource:su.PLANK,amount:10},{resource:su.CUT_STONE,amount:10}],WEATHER:[{weather:Tu.RAIN,effect:-50},{weather:Tu.STORM,effect:-100}],BUFF:{name:"New tools",effect:10,duration:360,cost:[{resource:su.AXE,amount:20}]},UPGRADES:[{BASE_POWER:7.5,COMPLEXITY:10,PREREQUISITES:[ou.URBAN_PLANNING],COST:[{resource:su.PLANK,amount:40},{resource:su.CUT_STONE,amount:40},{resource:su.HAMMER,amount:20},{resource:su.AXE,amount:20}]},{BASE_POWER:10,COMPLEXITY:20,PREREQUISITES:[],COST:[{resource:su.PLANK,amount:80},{resource:su.BRICKS,amount:40},{resource:su.BRONZE,amount:20},{resource:su.AXE,amount:40}]}]},FORESTER:{BASE_POWER:10,SIZE:10,COMPLEXITY:10,DESCRIPTION:"Forester can plant new trees and control natural growth of the forest",COST:[{resource:su.LOG,amount:10},{resource:su.SHOVEL,amount:2}],WEATHER:[{weather:Tu.RAIN,effect:-100},{weather:Tu.STORM,effect:-100}],BUFF:{name:"New tools",effect:10,duration:360,cost:[{resource:su.SHOVEL,amount:5}]}},SAWMILL:{BASE_POWER:3,SIZE:20,COMPLEXITY:15,DESCRIPTION:"Sawmill cut logs into planks",COST:[{resource:su.LOG,amount:20},{resource:su.CUT_STONE,amount:10}],TEXT:"cutting",INPUT_RESOURCES:[{resource:su.LOG,amount:3}],OUTPUT_RESOURCES:[{resource:su.PLANK,amount:1}]},GATHERER:{BASE_POWER:10,SIZE:5,COMPLEXITY:3,DESCRIPTION:"Gatherer can find all kinds of useful things in the forest.<br>They can look for either food or resources",COST:[{resource:su.LOG,amount:10},{resource:su.STONE,amount:5}],WEATHER:[{weather:Tu.RAIN,effect:-75},{weather:Tu.STORM,effect:-100}],CAN_PRODUCE:[su.BERRY,su.MUSHROOM,su.WHEAT,su.HERBS,su.BRUSHWOOD,su.STONE,su.LOG,su.COPPER],BERRY_CHANCE:30,MUSHROOM_CHANCE:30,WHEAT_CHANCE:3,BRUSHWOOD_CHANCE:35,STONE_CHANCE:15,LOG_CHANCE:5,COPPER_CHANCE:.5,HERBS_CHANCE:2},GATHERERS_CAMP:{BASE_POWER:10,SIZE:20,COMPLEXITY:15,DESCRIPTION:"It is more efficient to group gatherers together in one place",COST:[{resource:su.LOG,amount:30},{resource:su.PLANK,amount:10},{resource:su.CUT_STONE,amount:10}],WEATHER:[{weather:Tu.RAIN,effect:-75},{weather:Tu.STORM,effect:-100}],CAN_PRODUCE:[su.BERRY,su.MUSHROOM,su.WHEAT,su.HERBS,su.BRUSHWOOD,su.STONE,su.LOG,su.COPPER],BERRY_CHANCE:30,MUSHROOM_CHANCE:30,WHEAT_CHANCE:3,BRUSHWOOD_CHANCE:35,STONE_CHANCE:15,LOG_CHANCE:5,COPPER_CHANCE:.5,HERBS_CHANCE:2},HUNTER_LODGE:{BASE_POWER:2,SIZE:5,COMPLEXITY:8,DESCRIPTION:"Hunts animals for meat and fur",COST:[{resource:su.LOG,amount:15},{resource:su.PLANK,amount:5},{resource:su.BOW,amount:1}],WEATHER:[{weather:Tu.RAIN,effect:-100},{weather:Tu.STORM,effect:-100}],CAN_PRODUCE:[su.MEAT,su.FUR],BUFF:{name:"New tools",effect:10,duration:360,cost:[{resource:su.BOW,amount:5}]}},TANNERY:{BASE_POWER:5,SIZE:5,COMPLEXITY:5,DESCRIPTION:"Turns furs into leather",COST:[{resource:su.LOG,amount:20},{resource:su.PLANK,amount:10}],TEXT:"tanning",INPUT_RESOURCES:[{resource:su.FUR,amount:1}],OUTPUT_RESOURCES:[{resource:su.LEATHER,amount:1}]},PAPER_MILL:{BASE_POWER:2,SIZE:20,COMPLEXITY:20,DESCRIPTION:"Produces paper from logs",COST:[{resource:su.LOG,amount:20},{resource:su.CUT_STONE,amount:10},{resource:su.PLANK,amount:10}],TEXT:"producing",INPUT_RESOURCES:[{resource:su.LOG,amount:3}],OUTPUT_RESOURCES:[{resource:su.PAPER,amount:1}]}},MOUNTAINS:{QUARRY:{BASE_POWER:5,SIZE:20,COMPLEXITY:15,DESCRIPTION:"Cuts stone out of mountains",COST:[{resource:su.LOG,amount:40},{resource:su.PLANK,amount:20}],WEATHER:[{weather:Tu.RAIN,effect:-100},{weather:Tu.STORM,effect:-100}],CAN_PRODUCE:[su.STONE],BUFF:{name:"New tools",effect:10,duration:360,cost:[{resource:su.PICKAXE,amount:5}]}},GEOLOGIST:{BASE_POWER:1,SIZE:5,COMPLEXITY:10,DESCRIPTION:"Looks for useful rocks",COST:[{resource:su.LOG,amount:10},{resource:su.STONE,amount:5}],WEATHER:[{weather:Tu.RAIN,effect:-100},{weather:Tu.STORM,effect:-100}],COAL_CHANCE:20,GOLD_CHANCE:4,SILVER_CHANCE:8,COPPER_CHANCE:10,TIN_CHANCE:6,IRON_CHANCE:4},PIT_MINE:{BASE_POWER:2,SIZE:20,COMPLEXITY:15,DESCRIPTION:"Allows workers to mine ores",COST:[{resource:su.LOG,amount:60},{resource:su.PICKAXE,amount:5}],WEATHER:[{weather:Tu.RAIN,effect:-100},{weather:Tu.STORM,effect:-100}],GEM_CHANCE:.001,BUFF:{name:"New tools",effect:10,duration:360,cost:[{resource:su.PICKAXE,amount:5},{resource:su.SHOVEL,amount:5}]}},METEORITE:{BASE_POWER:3,SIZE:0,COMPLEXITY:0,DESCRIPTION:"Pieces of metal that fell from the sky",COST:[],WEATHER:[{weather:Tu.RAIN,effect:-100},{weather:Tu.STORM,effect:-100}]},DEEP_MINE:{BASE_POWER:1,SIZE:20,COMPLEXITY:30,DESCRIPTION:"Allows workers to mine ores from under the ground",COST:[{resource:su.LOG,amount:100},{resource:su.PLANK,amount:50},{resource:su.CUT_STONE,amount:50},{resource:su.PICKAXE,amount:20},{resource:su.SHOVEL,amount:20},{resource:su.HAMMER,amount:10}],WEATHER:[],GEM_CHANCE:.002,BUFF:{name:"New tools",effect:10,duration:360,cost:[{resource:su.PICKAXE,amount:10},{resource:su.SHOVEL,amount:10}]},UPGRADES:[{BASE_POWER:1,COMPLEXITY:40,PREREQUISITES:[],COST:[{resource:su.LOG,amount:20},{resource:su.PLANK,amount:20},{resource:su.CUT_STONE,amount:10},{resource:su.PICKAXE,amount:5},{resource:su.HAMMER,amount:5},{resource:su.SHOVEL,amount:5}]},{BASE_POWER:1,COMPLEXITY:50,PREREQUISITES:[],COST:[{resource:su.LOG,amount:20},{resource:su.PLANK,amount:20},{resource:su.CUT_STONE,amount:10},{resource:su.PICKAXE,amount:5},{resource:su.HAMMER,amount:5},{resource:su.SHOVEL,amount:5}]},{BASE_POWER:1,COMPLEXITY:60,PREREQUISITES:[],COST:[{resource:su.LOG,amount:20},{resource:su.PLANK,amount:20},{resource:su.CUT_STONE,amount:10},{resource:su.PICKAXE,amount:5},{resource:su.HAMMER,amount:5},{resource:su.SHOVEL,amount:5}]},{BASE_POWER:1,COMPLEXITY:70,PREREQUISITES:[],COST:[{resource:su.LOG,amount:20},{resource:su.PLANK,amount:20},{resource:su.CUT_STONE,amount:10},{resource:su.PICKAXE,amount:5},{resource:su.HAMMER,amount:5},{resource:su.SHOVEL,amount:5}]}]},STONEMASON:{BASE_POWER:3,SIZE:5,COMPLEXITY:10,DESCRIPTION:"Shapes stones for building",COST:[{resource:su.LOG,amount:10},{resource:su.STONE,amount:10}],TEXT:"cutting",INPUT_RESOURCES:[{resource:su.STONE,amount:3}],OUTPUT_RESOURCES:[{resource:su.CUT_STONE,amount:1}]},SMITHY:{BASE_POWER:5,SIZE:10,COMPLEXITY:20,DESCRIPTION:"Provides furnace for smelting ore and metal items",COST:[{resource:su.LOG,amount:20},{resource:su.PLANK,amount:10},{resource:su.CUT_STONE,amount:10},{resource:su.COPPER,amount:5}],RECIPES:[{recipe:Cu.COPPER,prerequisite:ou.SMITHY},{recipe:Cu.TIN,prerequisite:ou.SMITHY},{recipe:Cu.BRONZE,prerequisite:ou.BRONZE},{recipe:Cu.GOLD,prerequisite:ou.ADVANCED_ORE_PROCESSING},{recipe:Cu.SILVER,prerequisite:ou.ADVANCED_ORE_PROCESSING},{recipe:Cu.IRON,prerequisite:ou.IRON},{recipe:Cu.STEEL,prerequisite:ou.STEEL},{recipe:Cu.SWORD,prerequisite:ou.SMITHY},{recipe:Cu.BRONZE_SWORD,prerequisite:ou.BRONZE},{recipe:Cu.IRON_SWORD,prerequisite:ou.IRON},{recipe:Cu.BRONZE_SHIELD,prerequisite:ou.BRONZE},{recipe:Cu.IRON_SHIELD,prerequisite:ou.IRON},{recipe:Cu.LIGHT_ARMOR,prerequisite:ou.SMITHY},{recipe:Cu.HEAVY_ARMOR,prerequisite:ou.BRONZE}]},MINT:{BASE_POWER:3,SIZE:40,COMPLEXITY:20,DESCRIPTION:"Produces coins from gold",COST:[{resource:su.LOG,amount:20},{resource:su.PLANK,amount:10},{resource:su.CUT_STONE,amount:10},{resource:su.BRONZE,amount:10}],TEXT:"minting",INPUT_RESOURCES:[{resource:su.GOLD,amount:1},{resource:su.SILVER,amount:1}],OUTPUT_RESOURCES:[{resource:su.COINS,amount:150}]}},VILLAGE:{HUT:{BASE_POWER:.5,FUEL_EFFICIENCY:0,SIZE:10,COMPLEXITY:5,STORAGE:100,TAX:1,DESCRIPTION:"Very primitive shelter but keeps rain and cold away. Houses 2 villagers",COST:[{resource:su.FOOD,amount:100},{resource:su.LOG,amount:10},{resource:su.BRUSHWOOD,amount:10}],MAX_OCCUPANTS:2,UPGRADES:[{BASE_POWER:0,SIZE:15,COMPLEXITY:15,NEW_BUILDING:tu.HOUSE,PREREQUISITES:[ou.HOUSE],COST:[{resource:su.FOOD,amount:100},{resource:su.LOG,amount:15},{resource:su.BRUSHWOOD,amount:5},{resource:su.PLANK,amount:20}]}]},HOUSE:{BASE_POWER:.7,FUEL_EFFICIENCY:.2,SIZE:25,COMPLEXITY:15,STORAGE:200,TAX:1,DESCRIPTION:"Bigger and more durable shelter. Houses 6 villagers.<br>It's more efficient to heat than multiple huts",COST:[{resource:su.FOOD,amount:200},{resource:su.LOG,amount:20},{resource:su.PLANK,amount:20},{resource:su.BRUSHWOOD,amount:10}],MAX_OCCUPANTS:6,UPGRADES:[{BASE_POWER:0,SIZE:20,COMPLEXITY:20,NEW_BUILDING:tu.LONGHOUSE,PREREQUISITES:[ou.LONGHOUSE],COST:[{resource:su.FOOD,amount:100},{resource:su.LOG,amount:30},{resource:su.PLANK,amount:30},{resource:su.CUT_STONE,amount:20},{resource:su.HAY,amount:10}]}]},LONGHOUSE:{BASE_POWER:.9,FUEL_EFFICIENCY:.3,SIZE:45,COMPLEXITY:20,STORAGE:300,TAX:2,DESCRIPTION:"Long building for multiple families. Houses 15 villagers",COST:[{resource:su.FOOD,amount:300},{resource:su.LOG,amount:40},{resource:su.PLANK,amount:40},{resource:su.CUT_STONE,amount:20},{resource:su.HAY,amount:10}],MAX_OCCUPANTS:15,UPGRADES:[{BASE_POWER:0,SIZE:55,COMPLEXITY:30,NEW_BUILDING:tu.TUDOR_HOUSE,PREREQUISITES:[ou.TUDOR_HOUSE],COST:[{resource:su.FOOD,amount:500},{resource:su.LOG,amount:80},{resource:su.PLANK,amount:60},{resource:su.CUT_STONE,amount:10},{resource:su.BRICKS,amount:50}]}]},TUDOR_HOUSE:{BASE_POWER:1.1,FUEL_EFFICIENCY:.35,SIZE:100,COMPLEXITY:30,STORAGE:800,TAX:2,DESCRIPTION:"Very big and durable house. Houses 40 villagers",COST:[{resource:su.FOOD,amount:800},{resource:su.LOG,amount:100},{resource:su.PLANK,amount:80},{resource:su.CUT_STONE,amount:20},{resource:su.BRICKS,amount:50}],MAX_OCCUPANTS:40,UPGRADES:[{BASE_POWER:0,SIZE:100,COMPLEXITY:60,NEW_BUILDING:tu.SETTLEMENT,PREREQUISITES:[ou.SETTLEMENT],COST:[{resource:su.FOOD,amount:800},{resource:su.LOG,amount:150},{resource:su.PLANK,amount:110},{resource:su.CUT_STONE,amount:40},{resource:su.BRICKS,amount:25},{resource:su.NAILS,amount:100},{resource:su.HAMMER,amount:20},{resource:su.SHOVEL,amount:20}]}]},SETTLEMENT:{BASE_POWER:1.3,FUEL_EFFICIENCY:.38,SIZE:200,COMPLEXITY:60,STORAGE:1600,TAX:3,DESCRIPTION:"A group of small buildings that can house up to 90 villagers",COST:[{resource:su.FOOD,amount:1600},{resource:su.LOG,amount:200},{resource:su.PLANK,amount:150},{resource:su.CUT_STONE,amount:50},{resource:su.BRICKS,amount:50},{resource:su.NAILS,amount:100},{resource:su.HAMMER,amount:20},{resource:su.SHOVEL,amount:20}],MAX_OCCUPANTS:90},WAREHOUSE:{BASE_POWER:0,SIZE:50,COMPLEXITY:10,DESCRIPTION:"Stores selected type of resources",COST:[{resource:su.LOG,amount:20},{resource:su.PLANK,amount:10},{resource:su.CUT_STONE,amount:5}]},WORKSHOP:{BASE_POWER:5,RESEARCH_POWER:1,CRAFTING_POWER:1.5,SIZE:15,COMPLEXITY:15,DESCRIPTION:"At the workshop workers can do research projects or build complex things",COST:[{resource:su.LOG,amount:20},{resource:su.BRUSHWOOD,amount:10}]},TAX_COLLECTOR:{BASE_POWER:0,SIZE:20,COMPLEXITY:15,DESCRIPTION:"Tax collector gathers taxes from villagers or give donations",COST:[{resource:su.LOG,amount:10},{resource:su.PLANK,amount:20},{resource:su.BRICKS,amount:20},{resource:su.PAPER,amount:30}]},BUILDERS_GUILD:{BASE_POWER:.5,SIZE:20,COMPLEXITY:10,DESCRIPTION:"Builders guild allow unemployed villagers to automatically work at construction sites. They are not as proficient at this as regular builders and cannot work at wonder buildings construction sites",COST:[{resource:su.LOG,amount:10},{resource:su.PLANK,amount:40},{resource:su.HAMMER,amount:5},{resource:su.SHOVEL,amount:5},{resource:su.AXE,amount:5},{resource:su.PICKAXE,amount:5}],WEATHER:[{weather:Tu.RAIN,effect:-75},{weather:Tu.STORM,effect:-100}]},SCHOLARS_LAB:{BASE_POWER:2.5,RESEARCH_POWER:4,SIZE:15,COMPLEXITY:25,DESCRIPTION:"Scholars cannot craft items but they are more efficient at research (each cycle generates 4 research points)",COST:[{resource:su.LOG,amount:10},{resource:su.PLANK,amount:20},{resource:su.HAY,amount:20},{resource:su.PAPER,amount:20}]},KITCHEN:{BASE_POWER:12.5,CRAFTING_POWER:1.5,SIZE:5,COMPLEXITY:10,DESCRIPTION:"Kitchen focuses on processing raw food",COST:[{resource:su.LOG,amount:10},{resource:su.PLANK,amount:5},{resource:su.CUT_STONE,amount:5},{resource:su.POTTERY,amount:5}]},MANUFACTURE:{BASE_POWER:7,CRAFTING_POWER:1.5,SIZE:5,COMPLEXITY:20,DESCRIPTION:"Manufacture specialises in crafting one recipe and it takes time to change production but it produces slightly faster than workshop",COST:[{resource:su.LOG,amount:20},{resource:su.PLANK,amount:10},{resource:su.CUT_STONE,amount:10},{resource:su.HAMMER,amount:5}]},MARKETPLACE:{BASE_POWER:1,SIZE:20,COMPLEXITY:5,DESCRIPTION:"Place for trading with other villages",COST:[{resource:su.LOG,amount:10},{resource:su.PLANK,amount:10},{resource:su.STONE,amount:20}]},TAVERN:{BASE_POWER:1,SIZE:10,COMPLEXITY:20,DESCRIPTION:"Meeting place where villagers can relax and cheer up<br>Consume wine and beer but increase happiness",COST:[{resource:su.LOG,amount:10},{resource:su.PLANK,amount:20},{resource:su.CUT_STONE,amount:20},{resource:su.BRUSHWOOD,amount:20}],WEATHER:[{weather:Tu.RAIN,effect:25},{weather:Tu.STORM,effect:25}]},BAKERY:{BASE_POWER:10,SIZE:5,COMPLEXITY:10,DESCRIPTION:"Bakes bread from flour",COST:[{resource:su.LOG,amount:10},{resource:su.PLANK,amount:10},{resource:su.STONE,amount:10},{resource:su.CUT_STONE,amount:10}],TEXT:"baking",INPUT_RESOURCES:[{resource:su.FLOUR,amount:2},{resource:su.FUEL,amount:1}],OUTPUT_RESOURCES:[{resource:su.BREAD,amount:1}],BUFF:{name:"Bread oven",effect:10,duration:360,cost:[{resource:su.CUT_STONE,amount:20}]}},TAILOR:{BASE_POWER:5,SIZE:5,COMPLEXITY:10,DESCRIPTION:"Produces clothes from fabric",COST:[{resource:su.LOG,amount:10},{resource:su.PLANK,amount:10}],TEXT:"sewing",INPUT_RESOURCES:[{resource:su.FABRIC,amount:3}],OUTPUT_RESOURCES:[{resource:su.CLOTHES,amount:1}]},SHRINE:{BASE_POWER:2,POPULATION:8,SIZE:2,COMPLEXITY:8,DESCRIPTION:"Place for prayer and offerings",COST:[{resource:su.LOG,amount:5},{resource:su.CUT_STONE,amount:5},{resource:su.BERRY,amount:10},{resource:su.MUSHROOM,amount:10},{resource:su.MEAT,amount:10}]},CHURCH:{BASE_POWER:1,POPULATION:20,SIZE:10,COMPLEXITY:10,DESCRIPTION:"Place of prayer and contemplation",COST:[{resource:su.LOG,amount:40},{resource:su.CUT_STONE,amount:30}],BUFF:{name:"Offering",effect:10,duration:360,cost:[{resource:su.COINS,amount:200}]}}},FORT:{BARRACKS:{BASE_POWER:0,SIZE:10,COMPLEXITY:10,DESCRIPTION:"Housing for troops",COST:[{resource:su.LOG,amount:20},{resource:su.CUT_STONE,amount:10}]},TRAINING_SQUARE:{BASE_POWER:10,SIZE:10,COMPLEXITY:3,DESCRIPTION:"Place for training recruits",COST:[{resource:su.STONE,amount:40}],WEATHER:[{weather:Tu.RAIN,effect:-50},{weather:Tu.STORM,effect:-100}]},EMBASSY:{BASE_POWER:1,SIZE:20,COMPLEXITY:10,DESCRIPTION:"Ambassadors work here to improve relations with other kingdoms",COST:[{resource:su.PLANK,amount:30},{resource:su.CUT_STONE,amount:30}]},STOCKADE:{BASE_POWER:10,SIZE:50,COMPLEXITY:100,DESCRIPTION:"Protective wall around the village to protect against attackers",COST:[{resource:su.LOG,amount:100},{resource:su.STONE,amount:10}],DEFENSE:2,DURABILITY:50},WOODEN_TOWER:{BASE_POWER:10,SIZE:10,COMPLEXITY:30,DESCRIPTION:" Provide passive defense power",COST:[{resource:su.LOG,amount:40},{resource:su.PLANK,amount:20}],DEFENSE:3,DURABILITY:50},STONE_TOWER:{BASE_POWER:10,SIZE:10,COMPLEXITY:30,DESCRIPTION:"Provide passive defense power, more durable than wooden tower",COST:[{resource:su.CUT_STONE,amount:40},{resource:su.PLANK,amount:20}],DEFENSE:3,DURABILITY:100},STASH:{BASE_POWER:1,SIZE:10,COMPLEXITY:30,DESCRIPTION:"Complex hidden tunnels allow us to hide some resources in case of invasion",COST:[{resource:su.LOG,amount:30},{resource:su.CUT_STONE,amount:10},{resource:su.PLANK,amount:10},{resource:su.PICKAXE,amount:5}]}},FIELD:{FARM:{BASE_POWER:20,SIZE:15,COMPLEXITY:10,DESCRIPTION:"Farm allows workers to work on fields, orchard and pastures",COST:[{resource:su.LOG,amount:40},{resource:su.PLANK,amount:20},{resource:su.STONE,amount:10}],WEATHER:[{weather:Tu.RAIN,effect:-50},{weather:Tu.STORM,effect:-100}],BUFF:{name:"New tools",effect:10,duration:360,cost:[{resource:su.SHOVEL,amount:5}]},UPGRADES:[{BASE_POWER:22,COMPLEXITY:10,PREREQUISITES:[ou.URBAN_PLANNING],COST:[{resource:su.LOG,amount:20},{resource:su.PLANK,amount:20},{resource:su.CUT_STONE,amount:10},{resource:su.HAMMER,amount:5},{resource:su.SHOVEL,amount:5}]}]},BARN:{BASE_POWER:0,SIZE:50,COMPLEXITY:10,DESCRIPTION:"Stores selected type of crops",COST:[{resource:su.LOG,amount:40},{resource:su.PLANK,amount:20},{resource:su.HAY,amount:20},{resource:su.CUT_STONE,amount:10}]},WINDMILL:{BASE_POWER:10,SIZE:20,COMPLEXITY:15,DESCRIPTION:"Windmill turns wheat into flour",COST:[{resource:su.LOG,amount:30},{resource:su.PLANK,amount:10},{resource:su.FABRIC,amount:20}],TEXT:"milling",INPUT_RESOURCES:[{resource:su.WHEAT,amount:1}],OUTPUT_RESOURCES:[{resource:su.FLOUR,amount:2}],WEATHER:[{weather:Tu.WIND,effect:50},{weather:Tu.STORM,effect:-100}]},COTTON_MILL:{BASE_POWER:5,SIZE:10,COMPLEXITY:10,DESCRIPTION:"Spins cotton into fabric",COST:[{resource:su.LOG,amount:10},{resource:su.PLANK,amount:10}],TEXT:"spinning",INPUT_RESOURCES:[{resource:su.COTTON,amount:2}],OUTPUT_RESOURCES:[{resource:su.FABRIC,amount:1}]},BREWERY:{BASE_POWER:1,SIZE:25,COMPLEXITY:20,DESCRIPTION:"Brews delicious beer",COST:[{resource:su.LOG,amount:30},{resource:su.PLANK,amount:30},{resource:su.COPPER,amount:5},{resource:su.POTTERY,amount:10}],TEXT:"brewing",INPUT_RESOURCES:[{resource:su.BARLEY,amount:10},{resource:su.HOP,amount:5},{resource:su.FUEL,amount:3}],OUTPUT_RESOURCES:[{resource:su.BEER,amount:20}]},FIELD:{BASE_POWER:1,SIZE:50,COMPLEXITY:1,DESCRIPTION:"Various crops can be grown here (Farm required to work on fields)",COST:[{resource:su.STONE,amount:4}],WEATHER:[{weather:Tu.RAIN,effect:50},{weather:Tu.SUN,effect:50},{weather:Tu.CLOUDS,effect:-25}]},BUTCHER:{BASE_POWER:5,SIZE:15,COMPLEXITY:10,DESCRIPTION:"Turns animals from pastures into meat",COST:[{resource:su.LOG,amount:15},{resource:su.PLANK,amount:10},{resource:su.CUT_STONE,amount:5}]},ORCHARD:{BASE_POWER:1,SIZE:50,COMPLEXITY:1,DESCRIPTION:"Various fruit trees and bushes can be grown here (Farm required to work on orchards)",COST:[{resource:su.LOG,amount:5}],WEATHER:[{weather:Tu.RAIN,effect:50},{weather:Tu.SUN,effect:50},{weather:Tu.CLOUDS,effect:-25}]},PASTURE:{BASE_POWER:1,SIZE:50,COMPLEXITY:3,DESCRIPTION:"Many animals can be grown here (Farm required to work on pastures). <br>After building pasture and selecting animal type it is possible to use hunter lodges to tame animals or buy them from market.<br>Animals start to breed if there are at least two of them in a pasture.",COST:[{resource:su.LOG,amount:10},{resource:su.PLANK,amount:20}]},CLAY_PIT:{BASE_POWER:5,SIZE:15,COMPLEXITY:15,DESCRIPTION:"We can extract clay here",COST:[{resource:su.LOG,amount:15},{resource:su.PLANK,amount:5}],WEATHER:[{weather:Tu.RAIN,effect:-100},{weather:Tu.STORM,effect:-100}],CAN_PRODUCE:[su.CLAY]},WINERY:{BASE_POWER:1,SIZE:25,COMPLEXITY:10,DESCRIPTION:"Extracts and ferments grape juices",COST:[{resource:su.LOG,amount:20},{resource:su.PLANK,amount:20},{resource:su.COPPER,amount:5},{resource:su.POTTERY,amount:10}],TEXT:"fermenting",INPUT_RESOURCES:[{resource:su.GRAPE,amount:35}],OUTPUT_RESOURCES:[{resource:su.WINE,amount:16}]}},SEA:{FISHERS_HUT:{BASE_POWER:5,SIZE:5,COMPLEXITY:5,DESCRIPTION:"Fishers catch fish in the sea",COST:[{resource:su.LOG,amount:10},{resource:su.PLANK,amount:5},{resource:su.COPPER,amount:1}],WEATHER:[{weather:Tu.RAIN,effect:25},{weather:Tu.STORM,effect:-100},{weather:Tu.WIND,effect:25}]},PIER:{BASE_POWER:0,SIZE:25,HARBOUR_SIZE:80,COMPLEXITY:40,DESCRIPTION:"Pier is where your boats can dock",COST:[{resource:su.LOG,amount:30},{resource:su.PLANK,amount:20},{resource:su.COPPER,amount:10}]},HARBOUR:{BASE_POWER:0,SIZE:200,HARBOUR_SIZE:800,COMPLEXITY:60,DESCRIPTION:"Harbour can dock many more boats and ships than pier",COST:[{resource:su.CUT_STONE,amount:50},{resource:su.LOG,amount:30},{resource:su.PLANK,amount:20},{resource:su.BRONZE,amount:20},{resource:su.IRON,amount:20}]},LIGHTHOUSE:{BASE_POWER:0,SIZE:20,COMPLEXITY:20,DESCRIPTION:"Sailors can better navigate at sea when lighthouse light guide them",COST:[{resource:su.CUT_STONE,amount:20},{resource:su.LOG,amount:10},{resource:su.BRONZE,amount:5},{resource:su.FUEL,amount:5}]},BOAT_BUILDER:{BASE_POWER:1,SIZE:20,COMPLEXITY:30,DESCRIPTION:"Boat builder can craft small boats",COST:[{resource:su.LOG,amount:30},{resource:su.PLANK,amount:20},{resource:su.CUT_STONE,amount:20},{resource:su.HAMMER,amount:10}]},SHIPYARD:{BASE_POWER:2,SIZE:50,COMPLEXITY:50,DESCRIPTION:"Shipyards excel in building even the biggest ships",COST:[{resource:su.LOG,amount:100},{resource:su.PLANK,amount:50},{resource:su.BRICKS,amount:50},{resource:su.HAMMER,amount:20}]},CARTOGRAPHER:{BASE_POWER:2,SIZE:10,COMPLEXITY:10,DESCRIPTION:"Gathers information produced by sea missions and by creating star maps to help navigating to distant lands",COST:[{resource:su.LOG,amount:20},{resource:su.PLANK,amount:10},{resource:su.PAPER,amount:50}]}},PLATEAU:{STONEHENGE:{BASE_POWER:3,SIZE:50,COMPLEXITY:0,DESCRIPTION:"Huge rocks mark place for old rituals and scientific experiments",COST:[],STAGES:[{cost:[{resource:su.SHOVEL,amount:10},{resource:su.PICKAXE,amount:10},{resource:su.HAMMER,amount:10}],progress:10},{cost:[{resource:su.LOG,amount:50},{resource:su.PLANK,amount:50}],progress:10},{cost:[{resource:su.LOG,amount:50},{resource:su.PLANK,amount:50}],progress:10},{cost:[{resource:su.STONE,amount:100}],progress:10},{cost:[{resource:su.CUT_STONE,amount:100}],progress:10},{cost:[{resource:su.STONE,amount:100}],progress:10},{cost:[{resource:su.CUT_STONE,amount:100}],progress:10},{cost:[{resource:su.LOG,amount:50},{resource:su.PLANK,amount:50}],progress:10},{cost:[{resource:su.STONE,amount:100}],progress:10},{cost:[{resource:su.CUT_STONE,amount:100}],progress:10}],BUILDING_EFFECTS:[{building:tu.WORKSHOP,value:20},{building:tu.KITCHEN,value:10},{building:tu.MANUFACTURE,value:10}],RP:20},PYRAMID:{BASE_POWER:3,SIZE:100,COMPLEXITY:0,DESCRIPTION:"Although it's just \"putting one rock on the other\", our construction worker's skill will be put to the test with this huge project",COST:[],STAGES:[{cost:[{resource:su.SHOVEL,amount:10},{resource:su.PICKAXE,amount:10},{resource:su.HAMMER,amount:10}],progress:10},{cost:[{resource:su.CUT_STONE,amount:50}],progress:10},{cost:[{resource:su.LOG,amount:50},{resource:su.PLANK,amount:50}],progress:10},{cost:[{resource:su.CUT_STONE,amount:100}],progress:10},{cost:[{resource:su.LOG,amount:50},{resource:su.PLANK,amount:50}],progress:10},{cost:[{resource:su.CUT_STONE,amount:100}],progress:10},{cost:[{resource:su.LOG,amount:50},{resource:su.PLANK,amount:50}],progress:10},{cost:[{resource:su.CUT_STONE,amount:100}],progress:5},{cost:[{resource:su.CUT_STONE,amount:100}],progress:5},{cost:[{resource:su.LOG,amount:50},{resource:su.PLANK,amount:50}],progress:10},{cost:[{resource:su.CUT_STONE,amount:100}],progress:5},{cost:[{resource:su.CUT_STONE,amount:100}],progress:5}],BUILDING_EFFECTS:[{building:tu.CONSTRUCTION,value:10},{building:tu.DECONSTRUCTION,value:10},{building:tu.BUILDERS_GUILD,value:10}],RP:20},HANGING_GARDEN:{BASE_POWER:3,SIZE:30,COMPLEXITY:0,DESCRIPTION:"With all those plants that cover entire buildings we truly became masters of flora",COST:[],STAGES:[{cost:[{resource:su.SHOVEL,amount:10},{resource:su.HAMMER,amount:10},{resource:su.AXE,amount:10}],progress:10},{cost:[{resource:su.LOG,amount:100},{resource:su.PLANK,amount:50}],progress:10},{cost:[{resource:su.BERRY,amount:75},{resource:su.MUSHROOM,amount:75}],progress:10},{cost:[{resource:su.SHOVEL,amount:20}],progress:10},{cost:[{resource:su.WHEAT,amount:100}],progress:10},{cost:[{resource:su.BARLEY,amount:100}],progress:10},{cost:[{resource:su.APPLE,amount:100}],progress:10},{cost:[{resource:su.HOP,amount:100}],progress:10},{cost:[{resource:su.COTTON,amount:100}],progress:10},{cost:[{resource:su.GRAPE,amount:100}],progress:10}],BUILDING_EFFECTS:[{building:tu.FARM,value:15}],RP:20},COLOSSUS:{BASE_POWER:3,SIZE:50,COMPLEXITY:0,DESCRIPTION:"This giant statue watches over our troops both during defense and attack",COST:[],STAGES:[{cost:[{resource:su.SHOVEL,amount:10},{resource:su.PICKAXE,amount:10},{resource:su.HAMMER,amount:10}],progress:10},{cost:[{resource:su.LOG,amount:100},{resource:su.PLANK,amount:50}],progress:10},{cost:[{resource:su.STONE,amount:75},{resource:su.CUT_STONE,amount:75}],progress:10},{cost:[{resource:su.LOG,amount:100},{resource:su.PLANK,amount:50}],progress:10},{cost:[{resource:su.STONE,amount:75},{resource:su.CUT_STONE,amount:75}],progress:10},{cost:[{resource:su.LOG,amount:100},{resource:su.PLANK,amount:50}],progress:10},{cost:[{resource:su.STONE,amount:75},{resource:su.CUT_STONE,amount:75}],progress:10},{cost:[{resource:su.LOG,amount:100},{resource:su.PLANK,amount:50}],progress:10},{cost:[{resource:su.STONE,amount:75},{resource:su.CUT_STONE,amount:75}],progress:10},{cost:[{resource:su.COPPER,amount:100},{resource:su.HAMMER,amount:20}],progress:10}],ARMY_EFFECTS:[{troop:pu.ALL,value:15}],RP:20},UNDERGROUND_CITY:{BASE_POWER:3,SIZE:0,COMPLEXITY:0,DESCRIPTION:"After connecting empty mines tunnels and repurposing them we will create entire underground city",COST:[],STAGES:[{cost:[{resource:su.SHOVEL,amount:10},{resource:su.HAMMER,amount:10},{resource:su.PICKAXE,amount:10}],progress:10},{cost:[{resource:su.LOG,amount:100}],progress:10},{cost:[{resource:su.SHOVEL,amount:20},{resource:su.HAMMER,amount:20},{resource:su.PICKAXE,amount:20}],progress:10},{cost:[{resource:su.LOG,amount:100}],progress:10},{cost:[{resource:su.SHOVEL,amount:20},{resource:su.HAMMER,amount:20},{resource:su.PICKAXE,amount:20}],progress:10},{cost:[{resource:su.LOG,amount:100}],progress:10},{cost:[{resource:su.SHOVEL,amount:20},{resource:su.HAMMER,amount:20},{resource:su.PICKAXE,amount:20}],progress:10},{cost:[{resource:su.LOG,amount:100}],progress:10},{cost:[{resource:su.SHOVEL,amount:20},{resource:su.HAMMER,amount:20},{resource:su.PICKAXE,amount:20}],progress:10},{cost:[{resource:su.LOG,amount:50},{resource:su.CUT_STONE,amount:50}],progress:10}],BUILDING_EFFECTS:[{building:tu.DEEP_MINE,value:15},{building:tu.PIT_MINE,value:15},{building:tu.QUARRY,value:15},{building:tu.GEOLOGIST,value:15}],RP:20},GREAT_LIGHTHOUSE:{BASE_POWER:3,SIZE:50,COMPLEXITY:0,DESCRIPTION:"Light from this building can be seen as far as anyone would like to ever travel",COST:[],STAGES:[{cost:[{resource:su.SHOVEL,amount:10},{resource:su.HAMMER,amount:10},{resource:su.PICKAXE,amount:10}],progress:10},{cost:[{resource:su.LOG,amount:100},{resource:su.PLANK,amount:50}],progress:10},{cost:[{resource:su.CUT_STONE,amount:100}],progress:10},{cost:[{resource:su.LOG,amount:100},{resource:su.PLANK,amount:50}],progress:10},{cost:[{resource:su.CUT_STONE,amount:100}],progress:10},{cost:[{resource:su.LOG,amount:100},{resource:su.PLANK,amount:50}],progress:10},{cost:[{resource:su.CUT_STONE,amount:100}],progress:10},{cost:[{resource:su.LOG,amount:100},{resource:su.PLANK,amount:50}],progress:10},{cost:[{resource:su.CUT_STONE,amount:100}],progress:10},{cost:[{resource:su.PLANK,amount:100}],progress:10}],BUILDING_EFFECTS:[{building:tu.BOAT_BUILDER,value:20},{building:tu.SHIPYARD,value:10}],ARMY_EFFECTS:[{troop:pu.BOAT,value:10},{troop:pu.BRIGANTINE,value:10},{troop:pu.GALLEON,value:10}],RP:20},SACRED_GROVE:{BASE_POWER:3,SIZE:50,COMPLEXITY:0,DESCRIPTION:"Collection of the oldest and greatest forest fauna and flora in one place",COST:[],STAGES:[{cost:[{resource:su.SHOVEL,amount:10},{resource:su.HAMMER,amount:10},{resource:su.PICKAXE,amount:10}],progress:10},{cost:[{resource:su.BERRY,amount:100},{resource:su.MUSHROOM,amount:100}],progress:10},{cost:[{resource:su.CHICKEN,amount:20},{resource:su.HORSE,amount:10},{resource:su.PIG,amount:10}],progress:10},{cost:[{resource:su.BERRY,amount:200},{resource:su.MUSHROOM,amount:200}],progress:10},{cost:[{resource:su.BERRY,amount:100},{resource:su.MUSHROOM,amount:100}],progress:10},{cost:[{resource:su.CHICKEN,amount:20},{resource:su.HORSE,amount:10},{resource:su.PIG,amount:10}],progress:10},{cost:[{resource:su.BERRY,amount:100},{resource:su.MUSHROOM,amount:100}],progress:10},{cost:[{resource:su.CHICKEN,amount:20},{resource:su.HORSE,amount:10},{resource:su.PIG,amount:10}],progress:10},{cost:[{resource:su.BERRY,amount:100},{resource:su.MUSHROOM,amount:100}],progress:10},{cost:[{resource:su.BERRY,amount:200},{resource:su.MUSHROOM,amount:200}],progress:10}],BUILDING_EFFECTS:[{building:tu.FORESTER,value:10},{building:tu.LOGGERS_HUT,value:10},{building:tu.LOGGERS_CAMP,value:10},{building:tu.HUNTER_LODGE,value:10},{building:tu.GATHERER,value:10},{building:tu.GATHERERS_CAMP,value:10}],RP:20},ASCENSION_TEMPLE:{BASE_POWER:1.5,SIZE:100,COMPLEXITY:0,DESCRIPTION:"Mystical place where your fate will be determined",COST:[],STAGES:[{cost:[{resource:su.SHOVEL,amount:10},{resource:su.HAMMER,amount:10},{resource:su.PICKAXE,amount:10}],progress:5},{cost:[{resource:su.LOG,amount:100},{resource:su.PLANK,amount:100}],progress:5},{cost:[{resource:su.CUT_STONE,amount:100},{resource:su.PLANK,amount:100}],progress:10},{cost:[{resource:su.COPPER,amount:50},{resource:su.IRON,amount:50},{resource:su.STEEL,amount:50}],progress:5},{cost:[{resource:su.GOLD,amount:50},{resource:su.SILVER,amount:50}],progress:5},{cost:[{resource:su.CUT_STONE,amount:100},{resource:su.PLANK,amount:100}],progress:10},{cost:[{resource:su.COPPER,amount:50},{resource:su.IRON,amount:50},{resource:su.STEEL,amount:50}],progress:5},{cost:[{resource:su.GOLD,amount:50},{resource:su.SILVER,amount:50}],progress:5},{cost:[{resource:su.CUT_STONE,amount:100},{resource:su.PLANK,amount:100}],progress:10},{cost:[{resource:su.COPPER,amount:50},{resource:su.IRON,amount:50},{resource:su.STEEL,amount:50}],progress:5},{cost:[{resource:su.GOLD,amount:50},{resource:su.SILVER,amount:50}],progress:5},{cost:[{resource:su.CUT_STONE,amount:100},{resource:su.PLANK,amount:100}],progress:10},{cost:[{resource:su.COPPER,amount:50},{resource:su.IRON,amount:50},{resource:su.STEEL,amount:50}],progress:5},{cost:[{resource:su.GOLD,amount:50},{resource:su.SILVER,amount:50}],progress:5},{cost:[{resource:su.GOLD,amount:100},{resource:su.SILVER,amount:100}],progress:10}],RP:50}},CONSTRUCTION_SITE:{BASE_POWER:10,SIZE:0,COMPLEXITY:0,DESCRIPTION:"",COST:[],WEATHER:[{weather:Tu.RAIN,effect:-75},{weather:Tu.STORM,effect:-100}]},DECONSTRUCTION_SITE:{BASE_POWER:10,SIZE:0,COMPLEXITY:0,DESCRIPTION:"",COST:[],WEATHER:[{weather:Tu.RAIN,effect:-75},{weather:Tu.STORM,effect:-100}]}},Uu={getResource(e){const n=this.getResources().find(n=>n[0]===su[e]);if(n)return n[1];console.warn("Invalid resource: "+Ou.prepareResourceName(e))},getResourcesByType(e){const n=this.getResources().filter(n=>n[1].TYPES.includes(e));if(n)return n;console.warn("Invalid resource type: "+Ou.prepareResourceTypeName(e))},getResources(){return Object.entries(this.RAW).concat(Object.entries(this.PROCESSED)).concat(Object.entries(this.FOOD)).concat(Object.entries(this.TOOLS))},DEFAULT_AMOUNT:0,DEFAULT_LIMIT:50,DEFAULT_VISIBLE:!1,DEFAULT_HIGHLIGHTED:!1,RAW:{LOG:{TYPES:[du.RAW,du.FUEL],TRADE_VALUE:2,AMOUNT:20,LIMIT:100,VISIBLE:!0,HIGHLIGHTED:!0,FUEL_PRIORITY:3,POWER:10},BRUSHWOOD:{TYPES:[du.RAW,du.FUEL],TRADE_VALUE:1,AMOUNT:20,LIMIT:100,VISIBLE:!0,HIGHLIGHTED:!0,FUEL_PRIORITY:4,POWER:5.5},STONE:{TYPES:[du.RAW],TRADE_VALUE:3,AMOUNT:20,LIMIT:100,VISIBLE:!0},FUR:{TYPES:[du.RAW],TRADE_VALUE:3},WHEAT:{TYPES:[du.RAW],TRADE_VALUE:2},BARLEY:{TYPES:[du.RAW],TRADE_VALUE:3},HOP:{TYPES:[du.RAW],TRADE_VALUE:3},COTTON:{TYPES:[du.RAW],TRADE_VALUE:3},WOOL:{TYPES:[du.RAW],TRADE_VALUE:3},HERBS:{TYPES:[du.RAW],TRADE_VALUE:2},HAY:{TYPES:[du.RAW],TRADE_VALUE:2},CLAY:{TYPES:[du.RAW],TRADE_VALUE:2},CHICKEN:{TYPES:[du.RAW,du.ANIMAL],LIMIT:0,SIZE:2,MEAT:8,FUR:0,REPRODUCTION_SPEED:6,BUTCHERING_DIFFICULTY:1,TRADE_VALUE:20},SHEEP:{TYPES:[du.RAW,du.ANIMAL],LIMIT:0,SIZE:3,MEAT:16,FUR:1,REPRODUCTION_SPEED:4,BUTCHERING_DIFFICULTY:1,TRADE_VALUE:25},COW:{TYPES:[du.RAW,du.ANIMAL],LIMIT:0,SIZE:5,MEAT:60,FUR:3,REPRODUCTION_SPEED:1,BUTCHERING_DIFFICULTY:3,TRADE_VALUE:40},PIG:{TYPES:[du.RAW,du.ANIMAL],LIMIT:0,SIZE:3,MEAT:30,FUR:2,REPRODUCTION_SPEED:5,BUTCHERING_DIFFICULTY:3,TRADE_VALUE:30},HORSE:{TYPES:[du.RAW,du.ANIMAL],LIMIT:0,SIZE:5,MEAT:20,FUR:1,REPRODUCTION_SPEED:1,BUTCHERING_DIFFICULTY:5,TRADE_VALUE:50},COAL:{TYPES:[du.RAW,du.FUEL],TRADE_VALUE:8,FUEL_PRIORITY:2,POWER:50},GOLD_ORE:{TYPES:[du.RAW],TRADE_VALUE:40},SILVER_ORE:{TYPES:[du.RAW],TRADE_VALUE:20},COPPER_ORE:{TYPES:[du.RAW],TRADE_VALUE:13},TIN_ORE:{TYPES:[du.RAW],TRADE_VALUE:20},IRON_ORE:{TYPES:[du.RAW],TRADE_VALUE:40},GEMS:{TYPES:[du.RAW],TRADE_VALUE:100}},PROCESSED:{PLANK:{TYPES:[du.PROCESSED],TRADE_VALUE:3,VISIBLE:!0},CUT_STONE:{TYPES:[du.PROCESSED],TRADE_VALUE:5},FUEL:{TYPES:[du.PROCESSED,du.FUEL],TRADE_VALUE:3,FUEL_PRIORITY:1,POWER:12.5},FLOUR:{TYPES:[du.PROCESSED],TRADE_VALUE:3},FABRIC:{TYPES:[du.PROCESSED],TRADE_VALUE:7},LEATHER:{TYPES:[du.PROCESSED],TRADE_VALUE:4},PAPER:{TYPES:[du.PROCESSED],TRADE_VALUE:8},POTTERY:{TYPES:[du.PROCESSED],TRADE_VALUE:10},BRICKS:{TYPES:[du.PROCESSED],TRADE_VALUE:17},COINS:{TYPES:[du.PROCESSED],TRADE_VALUE:1,LIMIT:Number.MAX_SAFE_INTEGER},COPPER:{TYPES:[du.PROCESSED],TRADE_VALUE:32},GOLD:{TYPES:[du.PROCESSED],TRADE_VALUE:90},SILVER:{TYPES:[du.PROCESSED],TRADE_VALUE:45},TIN:{TYPES:[du.PROCESSED],TRADE_VALUE:45},BRONZE:{TYPES:[du.PROCESSED],TRADE_VALUE:50},IRON:{TYPES:[du.PROCESSED],TRADE_VALUE:135},STEEL:{TYPES:[du.PROCESSED],TRADE_VALUE:190},FISH_FOOD:{TYPES:[du.PROCESSED],TRADE_VALUE:5}},FOOD:{BERRY:{TYPES:[du.FOOD,du.CONSUMABLE],TRADE_VALUE:2,AMOUNT:50,LIMIT:100,VISIBLE:!0,HIGHLIGHTED:!0,POWER:50},MUSHROOM:{TYPES:[du.FOOD,du.CONSUMABLE],TRADE_VALUE:2,AMOUNT:50,LIMIT:100,VISIBLE:!0,HIGHLIGHTED:!0,POWER:50},FISH:{TYPES:[du.FOOD,du.CONSUMABLE],TRADE_VALUE:3,POWER:75},APPLE:{TYPES:[du.FOOD,du.CONSUMABLE],TRADE_VALUE:1,POWER:25},GRAPE:{TYPES:[du.FOOD,du.CONSUMABLE],TRADE_VALUE:1,POWER:20},BREAD:{TYPES:[du.FOOD,du.CONSUMABLE],TRADE_VALUE:10,POWER:300},MEAT:{TYPES:[du.FOOD,du.CONSUMABLE],TRADE_VALUE:3,POWER:75},EGG:{TYPES:[du.FOOD,du.CONSUMABLE],TRADE_VALUE:1,POWER:25},MILK:{TYPES:[du.FOOD,du.CONSUMABLE],TRADE_VALUE:1,POWER:25},CHEESE:{TYPES:[du.FOOD,du.CONSUMABLE],TRADE_VALUE:9,POWER:200},COOKED_FISH:{TYPES:[du.FOOD,du.CONSUMABLE],TRADE_VALUE:8,POWER:175},COOKED_MEAT:{TYPES:[du.FOOD,du.CONSUMABLE],TRADE_VALUE:8,POWER:175},VEGETABLE_SOUP:{TYPES:[du.FOOD,du.CONSUMABLE],TRADE_VALUE:10,POWER:225},MEAT_SOUP:{TYPES:[du.FOOD,du.CONSUMABLE],TRADE_VALUE:10,POWER:225},OMELETTE:{TYPES:[du.FOOD,du.CONSUMABLE],TRADE_VALUE:10,POWER:225},PIE:{TYPES:[du.FOOD,du.CONSUMABLE],TRADE_VALUE:12,POWER:250},BOUILLABAISSE:{TYPES:[du.FOOD,du.CONSUMABLE],TRADE_VALUE:32,POWER:900},BEER:{TYPES:[du.FOOD],TRADE_VALUE:3},WINE:{TYPES:[du.FOOD],TRADE_VALUE:5},HERBAL_MEDICINE:{TYPES:[du.FOOD],TRADE_VALUE:15}},TOOLS:{CLOTHES:{TYPES:[du.TOOLS],VISIBLE:!0,AMOUNT:10,TRADE_VALUE:25},PICKAXE:{TYPES:[du.TOOLS],TRADE_VALUE:35},SHOVEL:{TYPES:[du.TOOLS],TRADE_VALUE:35},AXE:{TYPES:[du.TOOLS],TRADE_VALUE:35},HAMMER:{TYPES:[du.TOOLS],TRADE_VALUE:35},BOW:{TYPES:[du.TOOLS],TRADE_VALUE:35},SPEAR:{TYPES:[du.TOOLS],TRADE_VALUE:35},NAILS:{TYPES:[du.TOOLS],TRADE_VALUE:12},MAP:{TYPES:[du.TOOLS],TRADE_VALUE:1e3},SWORD:{TYPES:[du.TOOLS],TRADE_VALUE:190},SHIELD:{TYPES:[du.TOOLS],TRADE_VALUE:30},LEATHER_ARMOR:{TYPES:[du.TOOLS],TRADE_VALUE:50},LIGHT_ARMOR:{TYPES:[du.TOOLS],TRADE_VALUE:400},HEAVY_ARMOR:{TYPES:[du.TOOLS],TRADE_VALUE:550},CANNON:{TYPES:[du.TOOLS],TRADE_VALUE:2e3},JEWELRY:{TYPES:[du.TOOLS],TRADE_VALUE:300}}},Hu={getTroop(e){const n=Object.entries(this.TROOPS).find(n=>n[0]===pu[e]);if(n)return n[1];console.warn("Invalid troop: "+Ou.prepareTroopName(e))},getMission(e){const n=Object.entries(this.MISSIONS).find(n=>n[0]===cu[e]);if(n)return n[1];console.warn("Invalid mission: "+Ou.prepareMissionName(e))},TROOPS:{COLONIST:{SIZE:1,CARGO:0,SPEED:3},SPY:{SIZE:1,CARGO:0,RECRUIT_TIME:10,STRENGTH:0,DEFENSE:1,PAY:5,SPEED:10,COST:[{resource:su.CLOTHES,amount:1},{resource:su.COINS,amount:20}]},MILITIA:{SIZE:1,CARGO:0,RECRUIT_TIME:3,STRENGTH:0,DEFENSE:2,PAY:0,SPEED:3,COST:[{resource:su.FUR,amount:5}],AI_COST:3},SPEARMAN:{SIZE:1,CARGO:0,RECRUIT_TIME:12,STRENGTH:5,DEFENSE:2,PAY:2,SPEED:6,COST:[{resource:su.SPEAR,amount:1},{resource:su.LEATHER_ARMOR,amount:1}],AI_COST:6},ARCHER:{SIZE:1,CARGO:0,RECRUIT_TIME:12,STRENGTH:2,DEFENSE:5,PAY:2,SPEED:6,COST:[{resource:su.BOW,amount:1},{resource:su.LEATHER_ARMOR,amount:1}],AI_COST:6},SWORDSMAN:{SIZE:2,CARGO:0,RECRUIT_TIME:22,STRENGTH:9,DEFENSE:4,PAY:5,SPEED:5,COST:[{resource:su.SWORD,amount:1},{resource:su.SHIELD,amount:1},{resource:su.LEATHER_ARMOR,amount:1}],AI_COST:10},LIGHT_CAVALRY:{SIZE:3,CARGO:0,RECRUIT_TIME:30,STRENGTH:15,DEFENSE:6,PAY:10,SPEED:10,COST:[{resource:su.HORSE,amount:1},{resource:su.SWORD,amount:1},{resource:su.LIGHT_ARMOR,amount:1}],AI_COST:15},HORSE_ARCHER:{SIZE:3,CARGO:0,RECRUIT_TIME:30,STRENGTH:6,DEFENSE:15,PAY:10,SPEED:10,COST:[{resource:su.HORSE,amount:1},{resource:su.BOW,amount:1},{resource:su.LIGHT_ARMOR,amount:1}],AI_COST:15},BOAT:{SIZE:5,CARGO:5,COMPLEXITY:5,SPEED:5,STRENGTH:0,DEFENSE:0,COST:[{resource:su.PLANK,amount:10},{resource:su.LOG,amount:5},{resource:su.FABRIC,amount:10},{resource:su.HAMMER,amount:5},{resource:su.NAILS,amount:10}],PAY:10,CREW:1,AI_COST:0},BRIGANTINE:{SIZE:40,CARGO:40,COMPLEXITY:20,SPEED:15,STRENGTH:6,DEFENSE:6,COST:[{resource:su.PLANK,amount:100},{resource:su.LOG,amount:50},{resource:su.FABRIC,amount:40},{resource:su.IRON,amount:20},{resource:su.HAMMER,amount:20},{resource:su.NAILS,amount:40},{resource:su.CANNON,amount:6}],PAY:80,CREW:10,AI_COST:0},GALLEON:{SIZE:150,CARGO:300,COMPLEXITY:50,SPEED:10,STRENGTH:30,DEFENSE:30,COST:[{resource:su.PLANK,amount:350},{resource:su.LOG,amount:200},{resource:su.FABRIC,amount:200},{resource:su.IRON,amount:80},{resource:su.HAMMER,amount:50},{resource:su.NAILS,amount:200},{resource:su.CANNON,amount:20}],PAY:300,CREW:25,AI_COST:0},GUARD_TOWER:{SIZE:0,CARGO:0,COMPLEXITY:0,SPEED:0,STRENGTH:0,DEFENSE:10,COST:[],PAY:0,CREW:0,AI_COST:10}},MISSIONS:{MOVE:{TIME:3,ICON:"move",DESCRIPTION:"Move your troops to another region",COST:[{resource:su.FOOD,amount:20}]},BUILD:{TIME:10,ICON:"build",DESCRIPTION:"Improve region defenses",COST:[{resource:su.LOG,amount:20},{resource:su.CUT_STONE,amount:20}]},COLONIZE:{TIME:3,ICON:"colonize",DESCRIPTION:"Connect this unowned land to your kingdom",COST:[{resource:su.FOOD,amount:200},{resource:su.LOG,amount:3},{resource:su.BRUSHWOOD,amount:2},{resource:su.FUEL,amount:1}]},SPY:{TIME:7,ICON:"spy",DESCRIPTION:"Try to find out military strength of the enemy and region wealth",COST:[{resource:su.FOOD,amount:100}]},PLUNDER:{TIME:2,ICON:"plunder",DESCRIPTION:"Plunder your enemies",COST:[{resource:su.FOOD,amount:100}]},CONQUER:{TIME:3,ICON:"conquer",DESCRIPTION:"Conquer your enemies and claim their land",COST:[{resource:su.FOOD,amount:200}]},FISHING:{TIME:3,ICON:"fish",DESCRIPTION:"Catch fish from the sea",COST:[{resource:su.FOOD,amount:200}]},HUNTING:{TIME:3,ICON:"hunting",DESCRIPTION:"Hunt the bigger fish",COST:[{resource:su.FOOD,amount:200}]},TREASURE:{TIME:2,ICON:"treasure",DESCRIPTION:"Collect treasure",COST:[{resource:su.FOOD,amount:200}]},CARTOGRAPHY:{TIME:3,ICON:"cartography",DESCRIPTION:"Gather information about all islands and stars during night",COST:[{resource:su.FOOD,amount:200}]},EXPEDITION:{TIME:12,ICON:"expedition",DESCRIPTION:"Discover distant lands",COST:[{resource:su.FOOD,amount:20}]},SEA_BATTLE:{TIME:2,ICON:"battle",DESCRIPTION:"Sea battle with other ships",COST:[{resource:su.FOOD,amount:200}]},SEA_PLUNDER:{TIME:2,ICON:"plunder",DESCRIPTION:"Plunder your enemies",COST:[{resource:su.FOOD,amount:100}]},SEA_CONQUER:{TIME:3,ICON:"conquer",DESCRIPTION:"Conquer your enemies and claim their land",COST:[{resource:su.FOOD,amount:200}]},SEA_MOVE:{TIME:3,ICON:"move",DESCRIPTION:"Move your troops to another region",COST:[{resource:su.FOOD,amount:20}]}}},Gu={getCrop(e){const n=this.getCrops().find(n=>n[0]===hu[e]);if(n)return n[1];console.warn("Invalid crop: "+Ou.prepareCropName(e))},getCrops(){return Object.entries(this.FIELD).concat(Object.entries(this.ORCHARD))},FIELD:{WHEAT:{CROP:hu.WHEAT,GROWTH:20,YIELD_MULTIPLIER:2},BARLEY:{CROP:hu.BARLEY,GROWTH:20,YIELD_MULTIPLIER:2,PREREQUISITE:ou.BARLEY},HAY:{CROP:hu.HAY,GROWTH:10,YIELD_MULTIPLIER:1.5},HOP:{CROP:hu.HOP,GROWTH:20,YIELD_MULTIPLIER:2,PREREQUISITE:ou.HOPS},HERBS:{CROP:hu.HERBS,GROWTH:20,YIELD_MULTIPLIER:4,PREREQUISITE:ou.HERBALISM},MUSHROOM:{CROP:hu.MUSHROOM,GROWTH:10,YIELD_MULTIPLIER:1},COTTON:{CROP:hu.COTTON,GROWTH:20,YIELD_MULTIPLIER:2,PREREQUISITE:ou.COTTON}},ORCHARD:{BERRY:{CROP:hu.BERRY,GROWTH:25,FRUITING:15,YIELD_MULTIPLIER:1},GRAPE:{CROP:hu.GRAPE,GROWTH:50,FRUITING:15,YIELD_MULTIPLIER:1},APPLE:{CROP:hu.APPLE,GROWTH:75,FRUITING:25,YIELD_MULTIPLIER:2}}},Bu={SCIENTIFIC_METHOD:{CATEGORY:Iu.SCIENCE,COST:[],RESEARCH_POINT:5,DESCRIPTION:"Maybe there is something we don't know about yet?",FINISH_DESCRIPTION:"We learned how to research things",PREREQUISITES:[],FINISH:function(e){e.getLogService().log("New research projects unlocked")}},FORESIGHT:{CATEGORY:Iu.SCIENCE,COST:[],RESEARCH_POINT:20,DESCRIPTION:"If only we knew what we don't know",FINISH_DESCRIPTION:"We gained insight into what can be researched in close future",PREREQUISITES:[uu.SCIENTIFIC_METHOD],FINISH:function(e){e.getTechService().increaseForesight(1),e.getLogService().log("Foresight level increased")}},CARTOGRAPHY:{CATEGORY:Iu.SCIENCE,COST:[],RESEARCH_POINT:50,DESCRIPTION:"What if we combine all the information we get from visitors and scouts?",FINISH_DESCRIPTION:"We unlocked world map and gained insight into what happens in the world",PREREQUISITES:[uu.FORESIGHT],FINISH:function(e){e.getGameService().enable(ou.CARTOGRAPHY),e.getLogService().log("World map unlocked")}},MANAGEMENT:{CATEGORY:Iu.GENERAL,COST:[],RESEARCH_POINT:30,DESCRIPTION:"Maybe we could make some hard decisions which could help us survive?",FINISH_DESCRIPTION:"Now we have access to many management options",PREREQUISITES:[uu.FORESIGHT],FINISH:function(e){e.getGameService().enable(ou.MANAGEMENT),e.getLogService().log("Management tab unlocked")}},TAX:{CATEGORY:Iu.GENERAL,COST:[],RESEARCH_POINT:100,DESCRIPTION:"Could we gather money from citizens?",FINISH_DESCRIPTION:"We invented tax and donations",PREREQUISITES:[uu.MANAGEMENT,uu.LONGHOUSE],FINISH:function(e){e.getGameService().enable(ou.TAX_COLLECTOR),e.getLogService().log("Tax collector unlocked")}},FISHING:{CATEGORY:Iu.AGRICULTURE,COST:[{resource:su.BERRY,amount:20}],RESEARCH_POINT:30,DESCRIPTION:"Could there be something edible in the water?",FINISH_DESCRIPTION:"We learned how to get fish out of the sea",PREREQUISITES:[uu.SCIENTIFIC_METHOD],FINISH:function(e){e.getGameService().enable(ou.SEA),e.getLogService().log("Sea unlocked"),e.getGameService().enable(ou.FISHERS_HUT),e.getLogService().log("Fisher's hut invented")}},ANIMALS:{CATEGORY:Iu.AGRICULTURE,COST:[{resource:su.HAY,amount:20}],RESEARCH_POINT:70,DESCRIPTION:"Is it possible to breed animals near farms?",FINISH_DESCRIPTION:"Now we know how to breed animals on pastures",PREREQUISITES:[uu.AGRICULTURE,uu.HUNTING],FINISH:function(e){e.getGameService().enable(ou.PASTURE),e.getLogService().log("Pastures invented"),e.getGameService().enable(ou.BUTCHER),e.getLogService().log("Butcher invented")}},TRADE:{CATEGORY:Iu.GENERAL,COST:[],RESEARCH_POINT:50,DESCRIPTION:"If others have resources we need maybe we could trade with them?",FINISH_DESCRIPTION:"We learned how to trade on marketplace",PREREQUISITES:[uu.MANAGEMENT,uu.CARTOGRAPHY],FINISH:function(e){e.getGameService().enable(ou.MARKETPLACE),e.getLogService().log("Marketplace invented"),e.getResourcesService().makeVisible(su.COINS)}},TANNERY:{CATEGORY:Iu.TECHNOLOGY,COST:[{resource:su.FUR,amount:20}],RESEARCH_POINT:50,DESCRIPTION:"Could we use dead animals fur in our advantage?",FINISH_DESCRIPTION:"Tanned fur is much better for armour",PREREQUISITES:[uu.SCIENTIFIC_METHOD,uu.HUNTING],FINISH:function(e){e.getGameService().enable(ou.TANNERY),e.getLogService().log("Tannery invented"),e.getRecipeService().enable(Cu.LEATHER)}},COTTON:{CATEGORY:Iu.AGRICULTURE,COST:[],RESEARCH_POINT:50,DESCRIPTION:"Maybe we can plant cotton?",FINISH_DESCRIPTION:"Now we can plant cotton on fields",PREREQUISITES:[uu.AGRICULTURE],FINISH:function(e){e.getGameService().enable(ou.COTTON),e.getLogService().log("Cotton planting unlocked"),e.getResourcesService().makeVisible(su.COTTON)}},PARCHMENT:{CATEGORY:Iu.TECHNOLOGY,COST:[{resource:su.FUR,amount:10}],RESEARCH_POINT:50,DESCRIPTION:"What if we make leather even thinner?",FINISH_DESCRIPTION:"We learned how to make parchment (paper) out of fur",PREREQUISITES:[uu.TANNERY],FINISH:function(e){e.getLogService().log("Parchment recipe unlocked"),e.getResourcesService().makeVisible(su.PAPER),e.getRecipeService().enable(Cu.PARCHMENT)}},PAPER_MILL:{CATEGORY:Iu.TECHNOLOGY,COST:[{resource:su.PAPER,amount:5}],RESEARCH_POINT:50,DESCRIPTION:"Maybe we could use trees to make paper?",FINISH_DESCRIPTION:"We invented paper mill where we can produce paper from logs",PREREQUISITES:[uu.PARCHMENT,uu.SAWMILL],FINISH:function(e){e.getLogService().log("Paper mill invented"),e.getGameService().enable(ou.PAPER_MILL)}},HERBALISM:{CATEGORY:Iu.AGRICULTURE,COST:[{resource:su.HERBS,amount:10}],RESEARCH_POINT:100,DESCRIPTION:"Is it possible to effectively plant herbs?",FINISH_DESCRIPTION:"We learned to how to plant herbs on fields",PREREQUISITES:[uu.AGRICULTURE],FINISH:function(e){e.getGameService().enable(ou.HERBALISM),e.getLogService().log("Herbs planting unlocked"),e.getResourcesService().makeVisible(su.HERBS)}},FABRIC:{CATEGORY:Iu.TECHNOLOGY,COST:[{resource:su.COTTON,amount:20}],RESEARCH_POINT:50,DESCRIPTION:"Could we make fabric using cotton?",FINISH_DESCRIPTION:"We invented cotton mill and ways to spint cotton into fabric",PREREQUISITES:[uu.COTTON],FINISH:function(e){e.getGameService().enable(ou.COTTON_MILL),e.getLogService().log("Cotton mill invented"),e.getRecipeService().enable(Cu.FABRIC),e.getRecipeService().enable(Cu.FABRIC_WOOL)}},TAILORING:{CATEGORY:Iu.TECHNOLOGY,COST:[{resource:su.FABRIC,amount:5},{resource:su.FUR,amount:10}],RESEARCH_POINT:100,DESCRIPTION:"How can me make new clothes?",FINISH_DESCRIPTION:"We can now make clothes out of fabric and fur",PREREQUISITES:[uu.FABRIC],FINISH:function(e){e.getGameService().enable(ou.TAILOR),e.getLogService().log("Tailor invented"),e.getRecipeService().enable(Cu.CLOTHES_FABRIC),e.getRecipeService().enable(Cu.CLOTHES_FUR)}},SCHOLAR:{CATEGORY:Iu.TECHNOLOGY,COST:[{resource:su.FOOD,amount:1e4},{resource:su.PAPER,amount:30}],RESEARCH_POINT:200,DESCRIPTION:"Can we focus on science?",FINISH_DESCRIPTION:"We learned how to research new technologies more efficiently",PREREQUISITES:[uu.PAPER_MILL,uu.IMPROVED_FORESIGHT],FINISH:function(e){e.getGameService().enable(ou.SCHOLARS_LAB),e.getLogService().log("Scholar labs invented")}},ALCOHOL:{CATEGORY:Iu.GENERAL,COST:[],RESEARCH_POINT:100,DESCRIPTION:"Would it boost our moods if we took some time to have fun??",FINISH_DESCRIPTION:"We learned how to plants hops and barley, how to build buildings that will make alcohol and tavern where we can drink it",PREREQUISITES:[uu.SCIENTIFIC_METHOD,uu.COOKING,uu.AGRICULTURE],FINISH:function(e){e.getGameService().enable(ou.ALCOHOL),e.getGameService().enable(ou.TAVERN),e.getLogService().log("Tavern invented"),e.getGameService().enable(ou.BREWERY),e.getLogService().log("Brewery invented"),e.getGameService().enable(ou.WINERY),e.getLogService().log("Winery invented"),e.getGameService().enable(ou.BARLEY),e.getLogService().log("Barley planting unlocked"),e.getResourcesService().makeVisible(su.BARLEY),e.getGameService().enable(ou.HOPS),e.getLogService().log("Hops planting unlocked"),e.getResourcesService().makeVisible(su.HOP),e.getResourcesService().makeVisible(su.BEER),e.getResourcesService().makeVisible(su.WINE)}},CALENDAR:{CATEGORY:Iu.SCIENCE,COST:[{resource:su.LOG,amount:10}],RESEARCH_POINT:30,DESCRIPTION:"Is there some pattern to seasons?",FINISH_DESCRIPTION:"Now we know what day it is today",PREREQUISITES:[uu.SCIENTIFIC_METHOD],FINISH:function(e){e.getGameService().enable(ou.CALENDAR),e.getLogService().log("We are now able to track years and seasons")}},WEATHER:{CATEGORY:Iu.SCIENCE,COST:[{resource:su.LOG,amount:10},{resource:su.STONE,amount:10},{resource:su.PLANK,amount:10}],RESEARCH_POINT:50,DESCRIPTION:"Would it be good to know the weather in advance?",FINISH_DESCRIPTION:"We can now predict weather for a few days ahead",PREREQUISITES:[uu.FORESIGHT],FINISH:function(e){e.getGameService().enable(ou.WEATHER),e.getLogService().log("We now can predict weather"),e.getWeatherService().increaseForecastPeriod(4)}},AGRICULTURE:{CATEGORY:Iu.AGRICULTURE,COST:[{resource:su.LOG,amount:10},{resource:su.BERRY,amount:20},{resource:su.WHEAT,amount:20},{resource:su.SHOVEL,amount:5}],RESEARCH_POINT:100,DESCRIPTION:"Why should we risk looking for food in the forest if we can grow it it the open?",FINISH_DESCRIPTION:"We discovered how to build farms and cultivate crops on fields and orchards",PREREQUISITES:[uu.WEATHER,uu.CALENDAR,uu.STONE_SHOVEL],FINISH:function(e){e.getGameService().isEnabled(ou.FIELD)||(e.getGameService().enable(ou.FIELD),e.getLogService().log("Field unlocked")),e.getGameService().enable(ou.FARM),e.getLogService().log("Farm invented"),e.getResourcesService().makeVisible(su.WHEAT),e.getResourcesService().makeVisible(su.BARLEY),e.getResourcesService().makeVisible(su.HAY),e.getResourcesService().makeVisible(su.APPLE),e.getResourcesService().makeVisible(su.GRAPE)}},CROPS_STORAGE:{CATEGORY:Iu.AGRICULTURE,COST:[{resource:su.FOOD,amount:5e3}],RESEARCH_POINT:50,DESCRIPTION:"Would it be more efficient if we had a storage building for crops closer to the fields?",FINISH_DESCRIPTION:"We found out that it is better to have a special building for storing crops",PREREQUISITES:[uu.AGRICULTURE],FINISH:function(e){e.getGameService().enable(ou.BARN),e.getLogService().log("Barn invented")}},BOW:{CATEGORY:Iu.GENERAL,COST:[{resource:su.LOG,amount:20},{resource:su.BRUSHWOOD,amount:20}],RESEARCH_POINT:25,DESCRIPTION:"Could we kill without coming closer?",FINISH_DESCRIPTION:"We learned how to craft bows",PREREQUISITES:[uu.SCIENTIFIC_METHOD],FINISH:function(e){e.getRecipeService().enable(Cu.BOW)}},HUNTING:{CATEGORY:Iu.GENERAL,COST:[{resource:su.LOG,amount:5},{resource:su.BRUSHWOOD,amount:5},{resource:su.STONE,amount:5},{resource:su.BOW,amount:2}],RESEARCH_POINT:50,DESCRIPTION:"What if hunted became the hunter?",FINISH_DESCRIPTION:"We learned how to hunt animals in the forest",PREREQUISITES:[uu.BOW],FINISH:function(e){e.getGameService().enable(ou.HUNTER),e.getLogService().log("Hunter invented")}},FIRE:{CATEGORY:Iu.TECHNOLOGY,COST:[{resource:su.BRUSHWOOD,amount:20},{resource:su.STONE,amount:2}],RESEARCH_POINT:30,DESCRIPTION:"Would it be useful if we could start fire on demand?",FINISH_DESCRIPTION:"We discovered ways to process brushwood into more efficient fuel",PREREQUISITES:[uu.SCIENTIFIC_METHOD],FINISH:function(e){e.getGameService().enable(ou.FIRE),e.getRecipeService().enable(Cu.FUEL_BRUSHWOOD)}},BIGGER_FIRE:{CATEGORY:Iu.TECHNOLOGY,COST:[{resource:su.LOG,amount:10},{resource:su.STONE,amount:2}],RESEARCH_POINT:50,DESCRIPTION:"Could we make our fire bigger and last for longer?",FINISH_DESCRIPTION:"We learned how to turn logs into fuel",PREREQUISITES:[uu.SCIENTIFIC_METHOD,uu.FIRE],FINISH:function(e){e.getRecipeService().enable(Cu.FUEL_LOG)}},COOKING:{CATEGORY:Iu.GENERAL,COST:[{resource:su.FUEL,amount:20},{resource:su.BERRY,amount:20},{resource:su.MUSHROOM,amount:20}],RESEARCH_POINT:30,DESCRIPTION:"What would happen if we heat up raw food?",FINISH_DESCRIPTION:"We discovered the art of cooking. We can prepare things with more nutrition value",PREREQUISITES:[uu.SCIENTIFIC_METHOD,uu.FIRE],FINISH:function(e){e.getRecipeService().enable(Cu.COOKED_MEAT),e.getRecipeService().enable(Cu.COOKED_FISH),e.getRecipeService().enable(Cu.BREAD),e.getRecipeService().enable(Cu.VEGETABLE_SOUP_BERRY),e.getRecipeService().enable(Cu.VEGETABLE_SOUP_MUSHROOM),e.getRecipeService().enable(Cu.VEGETABLE_SOUP_BERRY_MUSHROOM),e.getRecipeService().enable(Cu.MEAT_SOUP),e.getRecipeService().enable(Cu.CHEESE)}},IMPROVED_COOKING:{CATEGORY:Iu.GENERAL,COST:[{resource:su.FUEL,amount:30},{resource:su.EGG,amount:20},{resource:su.FLOUR,amount:20}],RESEARCH_POINT:70,DESCRIPTION:"Are there any better things to cook?",FINISH_DESCRIPTION:"We invented new cooking recipes",PREREQUISITES:[uu.COOKING,uu.BIGGER_FIRE],FINISH:function(e){e.getRecipeService().enable(Cu.OMELETTE),e.getRecipeService().enable(Cu.PIE)}},KITCHEN:{CATEGORY:Iu.GENERAL,COST:[{resource:su.FUEL,amount:20},{resource:su.CUT_STONE,amount:5},{resource:su.COPPER,amount:2},{resource:su.POTTERY,amount:5}],RESEARCH_POINT:70,DESCRIPTION:"Can we improve food production rate?",FINISH_DESCRIPTION:"We realised that specialised building for food making can improve cooking speed",PREREQUISITES:[uu.COOKING,uu.POTTERY],FINISH:function(e){e.getGameService().enable(ou.KITCHEN),e.getLogService().log("Kitchen invented"),e.getLogService().log("Kitchen orders can be now placed in it's own submenu of crafting menu")}},BAKERY:{CATEGORY:Iu.GENERAL,COST:[{resource:su.FUEL,amount:20},{resource:su.FLOUR,amount:20},{resource:su.CUT_STONE,amount:10}],RESEARCH_POINT:70,DESCRIPTION:"Could we improve bread making?",FINISH_DESCRIPTION:"We found out that by using special bread ovens we can greatly increase bread production",PREREQUISITES:[uu.SCIENTIFIC_METHOD,uu.COOKING],FINISH:function(e){e.getGameService().enable(ou.BAKERY),e.getLogService().log("Bakery invented")}},MORTAR:{CATEGORY:Iu.TECHNOLOGY,COST:[{resource:su.STONE,amount:20}],RESEARCH_POINT:20,DESCRIPTION:"Would it be useful to grind things up?",FINISH_DESCRIPTION:"Now we can grind things up",PREREQUISITES:[uu.SCIENTIFIC_METHOD],FINISH:function(e){e.getRecipeService().enable(Cu.FLOUR)}},STONE_SPEAR:{CATEGORY:Iu.MILITARY,COST:[{resource:su.STONE,amount:10},{resource:su.LOG,amount:5}],RESEARCH_POINT:25,DESCRIPTION:"Would we have better chance of survival if we keep enemy at distance?",FINISH_DESCRIPTION:"We learned how to craft stone spear",PREREQUISITES:[uu.SCIENTIFIC_METHOD],FINISH:function(e){e.getRecipeService().enable(Cu.STONE_SPEAR)}},STONE_AXE:{CATEGORY:Iu.GENERAL,COST:[{resource:su.STONE,amount:10},{resource:su.LOG,amount:5}],RESEARCH_POINT:25,DESCRIPTION:"It's probably more effective to hit trees with sharp stone?",FINISH_DESCRIPTION:"We learned how to craft stone axe",PREREQUISITES:[uu.SCIENTIFIC_METHOD],FINISH:function(e){e.getRecipeService().enable(Cu.STONE_AXE)}},STONE_PICKAXE:{CATEGORY:Iu.GENERAL,COST:[{resource:su.STONE,amount:10},{resource:su.LOG,amount:5}],RESEARCH_POINT:25,DESCRIPTION:"Would stone win against stone?",FINISH_DESCRIPTION:"We learned how to craft stone pickaxe",PREREQUISITES:[uu.SCIENTIFIC_METHOD],FINISH:function(e){e.getRecipeService().enable(Cu.STONE_PICKAXE)}},STONE_HAMMER:{CATEGORY:Iu.GENERAL,COST:[{resource:su.STONE,amount:10},{resource:su.LOG,amount:5}],RESEARCH_POINT:25,DESCRIPTION:"Can hitting with stone be easier?",FINISH_DESCRIPTION:"We learned how to craft stone hammer",PREREQUISITES:[uu.SCIENTIFIC_METHOD],FINISH:function(e){e.getRecipeService().enable(Cu.STONE_HAMMER)}},STONE_SHOVEL:{CATEGORY:Iu.GENERAL,COST:[{resource:su.STONE,amount:10},{resource:su.LOG,amount:5}],RESEARCH_POINT:25,DESCRIPTION:"It should be better to get your stone dirty and not your hands?",FINISH_DESCRIPTION:"We learned how to craft stone shovel",PREREQUISITES:[uu.SCIENTIFIC_METHOD],FINISH:function(e){e.getRecipeService().enable(Cu.STONE_SHOVEL)}},COPPER_TOOLS:{CATEGORY:Iu.GENERAL,COST:[{resource:su.LOG,amount:20},{resource:su.COPPER,amount:20},{resource:su.HAMMER,amount:2}],RESEARCH_POINT:50,DESCRIPTION:"Could we make better tools with metal instead of stone? ",FINISH_DESCRIPTION:"We learned how to craft copper tools",PREREQUISITES:[uu.ORE_PROCESSING,uu.STONE_SHOVEL,uu.STONE_PICKAXE,uu.STONE_AXE,uu.STONE_HAMMER,uu.STONE_SPEAR],FINISH:function(e){e.getRecipeService().enable(Cu.COPPER_AXE),e.getRecipeService().enable(Cu.COPPER_PICKAXE),e.getRecipeService().enable(Cu.COPPER_SHOVEL),e.getRecipeService().enable(Cu.COPPER_SPEAR),e.getRecipeService().enable(Cu.COPPER_HAMMER),e.getRecipeService().enable(Cu.COPPER_NAILS)}},BRONZE_TOOLS:{CATEGORY:Iu.GENERAL,COST:[{resource:su.LOG,amount:20},{resource:su.BRONZE,amount:20},{resource:su.HAMMER,amount:2}],RESEARCH_POINT:100,DESCRIPTION:"Would bronze tools be even better than copper ones?",FINISH_DESCRIPTION:"We learned how to craft bronze tools",PREREQUISITES:[uu.COPPER_TOOLS,uu.METALLURGY],FINISH:function(e){e.getRecipeService().enable(Cu.BRONZE_AXE),e.getRecipeService().enable(Cu.BRONZE_PICKAXE),e.getRecipeService().enable(Cu.BRONZE_SHOVEL),e.getRecipeService().enable(Cu.BRONZE_SPEAR),e.getRecipeService().enable(Cu.BRONZE_HAMMER),e.getRecipeService().enable(Cu.BRONZE_NAILS),e.getRecipeService().enable(Cu.BRONZE_SWORD),e.getRecipeService().enable(Cu.BRONZE_SHIELD)}},IRON_TOOLS:{CATEGORY:Iu.GENERAL,COST:[{resource:su.LOG,amount:20},{resource:su.IRON,amount:20},{resource:su.HAMMER,amount:2}],RESEARCH_POINT:200,DESCRIPTION:"Can we craft tools from iron?",FINISH_DESCRIPTION:"We learned how to craft iron tools",PREREQUISITES:[uu.BRONZE_TOOLS,uu.MASTER_ORE_PROCESSING],FINISH:function(e){e.getRecipeService().enable(Cu.IRON_AXE),e.getRecipeService().enable(Cu.IRON_PICKAXE),e.getRecipeService().enable(Cu.IRON_SHOVEL),e.getRecipeService().enable(Cu.IRON_SPEAR),e.getRecipeService().enable(Cu.IRON_HAMMER),e.getRecipeService().enable(Cu.IRON_NAILS),e.getRecipeService().enable(Cu.IRON_SWORD),e.getRecipeService().enable(Cu.IRON_SHIELD)}},MINING:{CATEGORY:Iu.TECHNOLOGY,COST:[{resource:su.LOG,amount:10},{resource:su.STONE,amount:5},{resource:su.PICKAXE,amount:1}],RESEARCH_POINT:50,DESCRIPTION:"If we dig deep enough maybe there is something nice?",FINISH_DESCRIPTION:"We discovered that stone can be harvested in the mountains",PREREQUISITES:[uu.SCIENTIFIC_METHOD,uu.STONE_PICKAXE],FINISH:function(e){e.getGameService().isEnabled(ou.MOUNTAINS)||(e.getGameService().enable(ou.MOUNTAINS),e.getLogService().log("Mountains unlocked"))}},DIGGING:{CATEGORY:Iu.TECHNOLOGY,COST:[{resource:su.LOG,amount:10},{resource:su.SHOVEL,amount:1}],RESEARCH_POINT:30,DESCRIPTION:"How can we move soil away efficiently?",FINISH_DESCRIPTION:"We discovered good ways of digging",PREREQUISITES:[uu.SCIENTIFIC_METHOD,uu.STONE_SHOVEL],FINISH:function(e){e.getGameService().isEnabled(ou.FIELD)||(e.getGameService().enable(ou.FIELD),e.getLogService().log("Field unlocked")),e.getGameService().enable(ou.CLAY_PIT),e.getLogService().log("Clay pit unlocked"),e.getResourcesService().makeVisible(su.CLAY)}},POTTERY:{CATEGORY:Iu.TECHNOLOGY,COST:[{resource:su.LOG,amount:10},{resource:su.FUEL,amount:5},{resource:su.CLAY,amount:10}],RESEARCH_POINT:50,DESCRIPTION:"Can we do something useful with all that clay?",FINISH_DESCRIPTION:"We invented how to make pottery from clay",PREREQUISITES:[uu.DIGGING,uu.FIRE],FINISH:function(e){e.getRecipeService().enable(Cu.POTTERY),e.getResourcesService().makeVisible(su.POTTERY)}},BRICKS:{CATEGORY:Iu.TECHNOLOGY,COST:[{resource:su.LOG,amount:10},{resource:su.FUEL,amount:5},{resource:su.CLAY,amount:10}],RESEARCH_POINT:100,DESCRIPTION:"Maybe we can use clay for building?",FINISH_DESCRIPTION:"We discovered how to make bricks from clay and hay",PREREQUISITES:[uu.POTTERY,uu.BIGGER_FIRE,uu.LONGHOUSE],FINISH:function(e){e.getRecipeService().enable(Cu.BRICKS),e.getResourcesService().makeVisible(su.BRICKS)}},PROSPECTING_FOR_ORE:{CATEGORY:Iu.TECHNOLOGY,COST:[{resource:su.PICKAXE,amount:10}],RESEARCH_POINT:50,DESCRIPTION:"There must be something useful under all this dirt",FINISH_DESCRIPTION:"We discovered that trained geologist can find ores deposits in the mountains",PREREQUISITES:[uu.MINING],FINISH:function(e){e.getGameService().enable(ou.GEOLOGIST),e.getLogService().log("Geologist invented")}},ADVANCED_PROSPECTING:{CATEGORY:Iu.TECHNOLOGY,COST:[{resource:su.PICKAXE,amount:20}],RESEARCH_POINT:75,DESCRIPTION:"There must be something even more valuable under the ground?",FINISH_DESCRIPTION:"We learned about more resources that mountains have to offer",PREREQUISITES:[uu.PROSPECTING_FOR_ORE],FINISH:function(e){e.getGameService().enable(ou.GOLD),e.getGameService().enable(ou.SILVER)}},MASTER_PROSPECTING:{CATEGORY:Iu.TECHNOLOGY,COST:[{resource:su.PICKAXE,amount:40}],RESEARCH_POINT:100,DESCRIPTION:"Is there anything else to find?",FINISH_DESCRIPTION:"We discovered iron",PREREQUISITES:[uu.ADVANCED_PROSPECTING,uu.IMPROVED_FORESIGHT],FINISH:function(e){e.getGameService().enable(ou.IRON)}},PIT_MINE:{CATEGORY:Iu.TECHNOLOGY,COST:[{resource:su.STONE,amount:20},{resource:su.LOG,amount:20},{resource:su.PICKAXE,amount:10}],RESEARCH_POINT:100,DESCRIPTION:"Could we get precious resources from under the ground?",FINISH_DESCRIPTION:"We invented a way to mine ore deposits from the ground",PREREQUISITES:[uu.PROSPECTING_FOR_ORE],FLAG_PREREQUISITES:[ou.BUILT_QUARRY],FINISH:function(e){e.getGameService().enable(ou.PIT_MINE),e.getLogService().log("Pit mine invented"),e.getRecipeService().enable(Cu.FUEL_COAL)}},DEEP_MINE:{CATEGORY:Iu.TECHNOLOGY,COST:[{resource:su.LOG,amount:40},{resource:su.PLANK,amount:40},{resource:su.CUT_STONE,amount:20},{resource:su.PICKAXE,amount:10}],RESEARCH_POINT:100,DESCRIPTION:"Do we have to move all the dirt or could we just dig tunnels?",FINISH_DESCRIPTION:"It's now possible to build deep mines to mine ore",PREREQUISITES:[uu.PIT_MINE,uu.ADVANCED_MATHEMATICS],FLAG_PREREQUISITES:[],FINISH:function(e){e.getGameService().enable(ou.DEEP_MINE),e.getLogService().log("Deep mine invented")}},ORE_PROCESSING:{CATEGORY:Iu.TECHNOLOGY,COST:[{resource:su.CUT_STONE,amount:40},{resource:su.STONE,amount:20},{resource:su.HAMMER,amount:10},{resource:su.COPPER_ORE,amount:20}],RESEARCH_POINT:100,DESCRIPTION:"What happens if we heat ore in fire?",FINISH_DESCRIPTION:"We discovered how to process ore into metal",PREREQUISITES:[uu.PROSPECTING_FOR_ORE],FINISH:function(e){e.getGameService().enable(ou.SMITHY),e.getLogService().log("Smithy invented")}},ADVANCED_ORE_PROCESSING:{CATEGORY:Iu.TECHNOLOGY,COST:[{resource:su.CUT_STONE,amount:40},{resource:su.STONE,amount:20},{resource:su.HAMMER,amount:5},{resource:su.GOLD_ORE,amount:5},{resource:su.SILVER_ORE,amount:5}],RESEARCH_POINT:150,DESCRIPTION:"What about heating other ores?",FINISH_DESCRIPTION:"We discovered how to process gold and silver ore",PREREQUISITES:[uu.ADVANCED_PROSPECTING,uu.ORE_PROCESSING],FLAG_PREREQUISITES:[ou.BUILT_SMITHY],FINISH:function(e){e.getGameService().enable(ou.ADVANCED_ORE_PROCESSING),e.getGameService().isEnabled(ou.BUILT_SMITHY)&&(e.getRecipeService().enable(Cu.GOLD),e.getRecipeService().enable(Cu.SILVER))}},MASTER_ORE_PROCESSING:{CATEGORY:Iu.TECHNOLOGY,COST:[{resource:su.CUT_STONE,amount:40},{resource:su.STONE,amount:20},{resource:su.HAMMER,amount:5},{resource:su.IRON_ORE,amount:10}],RESEARCH_POINT:200,DESCRIPTION:"Can we smelt any ore we want?",FINISH_DESCRIPTION:"We learned to process iron ore",PREREQUISITES:[uu.MASTER_PROSPECTING,uu.ADVANCED_ORE_PROCESSING],FLAG_PREREQUISITES:[ou.BUILT_SMITHY],FINISH:function(e){e.getGameService().enable(ou.IRON),e.getGameService().isEnabled(ou.BUILT_SMITHY)&&e.getRecipeService().enable(Cu.IRON)}},METALLURGY:{CATEGORY:Iu.TECHNOLOGY,COST:[{resource:su.COPPER,amount:10},{resource:su.TIN,amount:10}],RESEARCH_POINT:100,DESCRIPTION:"What would happen if we mix two metals?",FINISH_DESCRIPTION:"We discovered that mixing multiple metals can give better results",PREREQUISITES:[uu.ORE_PROCESSING],FLAG_PREREQUISITES:[ou.BUILT_SMITHY],FINISH:function(e){e.getGameService().enable(ou.BRONZE),e.getGameService().isEnabled(ou.BUILT_SMITHY)&&e.getRecipeService().enable(Cu.BRONZE)}},ADVANCED_METALLURGY:{CATEGORY:Iu.TECHNOLOGY,COST:[{resource:su.IRON,amount:10},{resource:su.COAL,amount:50}],RESEARCH_POINT:200,DESCRIPTION:"Could we mix iron with coal to make it stronger?",FINISH_DESCRIPTION:"We invented steel",PREREQUISITES:[uu.MASTER_ORE_PROCESSING],FLAG_PREREQUISITES:[ou.BUILT_SMITHY,ou.IRON],FINISH:function(e){e.getGameService().enable(ou.STEEL),e.getGameService().isEnabled(ou.BUILT_SMITHY)&&e.getRecipeService().enable(Cu.STEEL)}},COINS_MINTING:{CATEGORY:Iu.TECHNOLOGY,COST:[{resource:su.GOLD,amount:10},{resource:su.SILVER,amount:20}],RESEARCH_POINT:100,DESCRIPTION:"Maybe we can make our own coins?",FINISH_DESCRIPTION:"We learned how to mint our own coins",PREREQUISITES:[uu.ADVANCED_ORE_PROCESSING],FLAG_PREREQUISITES:[ou.BUILT_SMITHY],FINISH:function(e){e.getGameService().enable(ou.MINT),e.getLogService().log("Mint invented")}},JEWELRY:{CATEGORY:Iu.TECHNOLOGY,COST:[{resource:su.GOLD,amount:10},{resource:su.SILVER,amount:20},{resource:su.GEMS,amount:5}],RESEARCH_POINT:200,DESCRIPTION:"Could we show our status by wearing expensive and beautiful things?",FINISH_DESCRIPTION:"We learned how to make jewelry",PREREQUISITES:[uu.COINS_MINTING],FINISH:function(e){e.getGameService().enable(ou.JEWELRY),e.getRecipeService().enable(Cu.JEWELRY),e.getLogService().log("Jewelry invented")}},HOUSE:{CATEGORY:Iu.TECHNOLOGY,COST:[{resource:su.LOG,amount:50},{resource:su.PLANK,amount:50}],RESEARCH_POINT:100,DESCRIPTION:"What if huts were bigger?",FINISH_DESCRIPTION:"We learned how to build bigger and more efficient buildings for living",PREREQUISITES:[uu.SCIENTIFIC_METHOD,uu.STONE_HAMMER,uu.STONE_SHOVEL],FINISH:function(e){e.getGameService().enable(ou.HOUSE),e.getLogService().log("House invented")}},LONGHOUSE:{CATEGORY:Iu.TECHNOLOGY,COST:[{resource:su.LOG,amount:50},{resource:su.PLANK,amount:50},{resource:su.CUT_STONE,amount:20},{resource:su.HAY,amount:20},{resource:su.HAMMER,amount:5}],RESEARCH_POINT:200,DESCRIPTION:"Could we house multiple families in one building?",FINISH_DESCRIPTION:"Now we can build longhouses that can house multiple families",PREREQUISITES:[uu.HOUSE,uu.AGRICULTURE],FINISH:function(e){e.getGameService().enable(ou.LONGHOUSE),e.getLogService().log("Longhouse invented")}},TUDOR_HOUSE:{CATEGORY:Iu.TECHNOLOGY,COST:[{resource:su.LOG,amount:70},{resource:su.PLANK,amount:50},{resource:su.BRICKS,amount:40},{resource:su.HAMMER,amount:10}],RESEARCH_POINT:400,DESCRIPTION:"Can we use better building materials to build bigger houses?",FINISH_DESCRIPTION:"We worked out how to build tudor houses",PREREQUISITES:[uu.LONGHOUSE,uu.BRICKS],FINISH:function(e){e.getGameService().enable(ou.TUDOR_HOUSE),e.getLogService().log("Tudor House invented")}},SETTLEMENT:{CATEGORY:Iu.TECHNOLOGY,COST:[{resource:su.LOG,amount:70},{resource:su.PLANK,amount:50},{resource:su.BRICKS,amount:40},{resource:su.NAILS,amount:50},{resource:su.HAMMER,amount:10}],RESEARCH_POINT:800,DESCRIPTION:"Could we build a new settlement to house more people?",FINISH_DESCRIPTION:"We can now construct whole settlements",PREREQUISITES:[uu.TUDOR_HOUSE,uu.BRICKS,uu.TAILORING,uu.COPPER_TOOLS],FINISH:function(e){e.getGameService().enable(ou.SETTLEMENT),e.getLogService().log("Settlements invented")}},URBAN_PLANNING:{CATEGORY:Iu.SCIENCE,COST:[],RESEARCH_POINT:50,DESCRIPTION:"Maybe we could rearrange buildings?",FINISH_DESCRIPTION:"Now we can combine and split some buildings like fields, orchards, pastures and warehouses",PREREQUISITES:[uu.MANAGEMENT,uu.MATHEMATICS],FINISH:function(e){e.getGameService().enable(ou.URBAN_PLANNING)}},WONDER_BUILDINGS:{CATEGORY:Iu.GENERAL,COST:[],RESEARCH_POINT:500,DESCRIPTION:"What if we built something remarkable?",FINISH_DESCRIPTION:"We learned that by building wonders we can boost future generations progress",PREREQUISITES:[uu.HOUSE,uu.URBAN_PLANNING,uu.ADVANCED_MATHEMATICS],FINISH:function(e){e.getGameService().enable(ou.PLATEAU),e.getLogService().log("Plateau unlocked")}},SAWMILL:{CATEGORY:Iu.TECHNOLOGY,COST:[{resource:su.LOG,amount:50},{resource:su.PLANK,amount:10},{resource:su.COPPER,amount:5}],RESEARCH_POINT:100,DESCRIPTION:"Is it possible to produce planks even faster?",FINISH_DESCRIPTION:"We discovered sawmill that efficiently turns logs into planks",PREREQUISITES:[uu.SCIENTIFIC_METHOD,uu.STONE_HAMMER,uu.STONE_AXE],FINISH:function(e){e.getGameService().enable(ou.SAWMILL),e.getLogService().log("Sawmill invented")}},WINDMILL:{CATEGORY:Iu.TECHNOLOGY,COST:[{resource:su.LOG,amount:50},{resource:su.PLANK,amount:10},{resource:su.COPPER,amount:5}],RESEARCH_POINT:100,DESCRIPTION:"Could we use wind to do hard work for us?",FINISH_DESCRIPTION:"We invented windmill that can effortlessly turn wheat into flour",PREREQUISITES:[uu.AGRICULTURE,uu.MORTAR,uu.MATHEMATICS],FINISH:function(e){e.getGameService().enable(ou.WINDMILL),e.getLogService().log("Windmill invented"),e.getResourcesService().makeVisible(su.FABRIC)}},FORESTRY:{CATEGORY:Iu.AGRICULTURE,COST:[{resource:su.LOG,amount:20},{resource:su.BRUSHWOOD,amount:20},{resource:su.SHOVEL,amount:2}],RESEARCH_POINT:50,DESCRIPTION:"Is there any reason why trees grow out of dirt?",FINISH_DESCRIPTION:"We now can hire foresters to plant new trees and manage forest better",PREREQUISITES:[uu.SCIENTIFIC_METHOD,uu.MANAGEMENT,uu.STONE_SHOVEL],FINISH:function(e){e.getGameService().enable(ou.FORESTER),e.getLogService().log("Forester invented"),e.getLogService().log("Forest management unlocked")}},BARRACKS:{CATEGORY:Iu.MILITARY,COST:[{resource:su.LOG,amount:20},{resource:su.PLANK,amount:20},{resource:su.SPEAR,amount:5}],RESEARCH_POINT:100,DESCRIPTION:"How can we make those of us more aggressive less of a threat to others?",FINISH_DESCRIPTION:"We found out that we can form army and use it to our advantage",PREREQUISITES:[uu.SCIENTIFIC_METHOD,uu.CALENDAR,uu.STONE_SPEAR],FINISH:function(e){e.getGameService().isEnabled(ou.FORT)||(e.getGameService().enable(ou.FORT),e.getLogService().log("Fort unlocked")),e.getRecipeService().enable(Cu.WOODEN_SHIELD),e.getRecipeService().enable(Cu.LEATHER_ARMOR),e.getGameService().enable(ou.BARRACKS),e.getLogService().log("Barracks invented")}},STASH:{CATEGORY:Iu.MILITARY,COST:[{resource:su.LOG,amount:20},{resource:su.PLANK,amount:10}],RESEARCH_POINT:30,DESCRIPTION:"Can we hide our goods somewhere?",FINISH_DESCRIPTION:"We learned how to hide goods from invaders",PREREQUISITES:[uu.FORESIGHT],FINISH:function(e){e.getGameService().isEnabled(ou.FORT)||(e.getGameService().enable(ou.FORT),e.getLogService().log("Fort unlocked")),e.getGameService().enable(ou.STASH)}},WOODEN_DEFENCES:{CATEGORY:Iu.MILITARY,COST:[{resource:su.LOG,amount:50}],RESEARCH_POINT:100,DESCRIPTION:"Maybe we could use logs to defend ourselves?",FINISH_DESCRIPTION:"Now we can build simple wooden defences that will delay invasions",PREREQUISITES:[uu.BARRACKS],FINISH:function(e){e.getGameService().enable(ou.STOCKADE),e.getLogService().log("Stockade invented"),e.getGameService().enable(ou.WOODEN_TOWER),e.getLogService().log("Wooden tower invented")}},STONE_DEFENCES:{CATEGORY:Iu.MILITARY,COST:[{resource:su.STONE,amount:50},{resource:su.CUT_STONE,amount:50}],RESEARCH_POINT:200,DESCRIPTION:"Maybe we could use stone to defend ourselves?",FINISH_DESCRIPTION:"We learned how to build more durable defences",PREREQUISITES:[uu.WOODEN_DEFENCES],FINISH:function(e){e.getGameService().enable(ou.STONE_TOWER),e.getLogService().log("Stone tower invented")}},MATHEMATICS:{CATEGORY:Iu.SCIENCE,COST:[{resource:su.FOOD,amount:1e3}],RESEARCH_POINT:50,DESCRIPTION:"What if we calculate things first?",FINISH_DESCRIPTION:"By calculating things we are better at constructing and deconstructing buildings",PREREQUISITES:[uu.FORESIGHT],FINISH:function(e){e.getEffectsService().addBuildingEffect(new yu("Mathematics",tu.CONSTRUCTION,10,Au.PERMANENT)),e.getEffectsService().addBuildingEffect(new yu("Mathematics",tu.DECONSTRUCTION,10,Au.PERMANENT))}},ADVANCED_MATHEMATICS:{CATEGORY:Iu.SCIENCE,COST:[{resource:su.FOOD,amount:4e3},{resource:su.PAPER,amount:20}],RESEARCH_POINT:200,DESCRIPTION:"Are there any better ways of calculations?",FINISH_DESCRIPTION:"Our calculations methods improved and we are now able to research more advanced things",PREREQUISITES:[uu.MATHEMATICS,uu.PARCHMENT],FINISH:function(e){}},IMPROVED_FORESIGHT:{CATEGORY:Iu.SCIENCE,COST:[{resource:su.FOOD,amount:5e3},{resource:su.PAPER,amount:50}],RESEARCH_POINT:300,DESCRIPTION:"Can we use our knowledge to foresight what we could learn?",FINISH_DESCRIPTION:"With our knowledge we can look further into the unknown and foresight future researches",PREREQUISITES:[uu.ADVANCED_MATHEMATICS,uu.PARCHMENT],FINISH:function(e){e.getTechService().increaseForesight(1),e.getLogService().log("Foresight level increased")}},LOGISTICS:{CATEGORY:Iu.MILITARY,COST:[{resource:su.STONE,amount:100},{resource:su.CLOTHES,amount:25}],RESEARCH_POINT:200,DESCRIPTION:"Can we improve travel speed between world regions?",FINISH_DESCRIPTION:"With improved military clothing and roads we can move faster between world regions",PREREQUISITES:[uu.ADVANCED_MATHEMATICS],FINISH:function(e){e.getGameService().enable(ou.LOGISTICS),e.getLogService().log("Logistics invented")}},FERTILIZER:{CATEGORY:Iu.AGRICULTURE,COST:[{resource:su.FOOD,amount:3e3}],RESEARCH_POINT:100,DESCRIPTION:"Could we reuse what animals produce?",FINISH_DESCRIPTION:"By using animals manure we boost growth on fields and orchards",PREREQUISITES:[uu.ANIMALS],FINISH:function(e){e.getEffectsService().addBuildingEffect(new yu("Fertilizer",tu.FIELD,10,Au.PERMANENT)),e.getEffectsService().addBuildingEffect(new yu("Fertilizer",tu.ORCHARD,10,Au.PERMANENT))}},PICKAXE_DESIGN:{CATEGORY:Iu.TECHNOLOGY,COST:[{resource:su.LOG,amount:10},{resource:su.CUT_STONE,amount:10},{resource:su.PICKAXE,amount:5}],RESEARCH_POINT:100,DESCRIPTION:"Maybe we could redesign our pickaxes?",FINISH_DESCRIPTION:"We discovered different pickaxe design that improved mining speed",PREREQUISITES:[uu.MINING],FINISH:function(e){e.getEffectsService().addBuildingEffect(new yu("Pickaxe Design",tu.QUARRY,10,Au.PERMANENT)),e.getEffectsService().addBuildingEffect(new yu("Pickaxe Design",tu.PIT_MINE,10,Au.PERMANENT)),e.getEffectsService().addBuildingEffect(new yu("Pickaxe Design",tu.GEOLOGIST,10,Au.PERMANENT)),e.getEffectsService().addBuildingEffect(new yu("Pickaxe Design",tu.DEEP_MINE,10,Au.PERMANENT))}},TRADE_ROUTES:{CATEGORY:Iu.GENERAL,COST:[{resource:su.COINS,amount:400}],RESEARCH_POINT:50,DESCRIPTION:"Is it possible to attract more merchants?",FINISH_DESCRIPTION:"By optimizing roads system we will have more visiting merchants",PREREQUISITES:[uu.TRADE,uu.MATHEMATICS],FINISH:function(e){e.getEffectsService().addBuildingEffect(new yu("Trade Routes",tu.MARKETPLACE,15,Au.PERMANENT))}},BUFF_PRODUCTION:{CATEGORY:Iu.GENERAL,COST:[{resource:su.AXE,amount:2},{resource:su.SHOVEL,amount:2},{resource:su.PICKAXE,amount:2},{resource:su.HAMMER,amount:2}],RESEARCH_POINT:50,DESCRIPTION:"Would people work better if we give them better tools?",FINISH_DESCRIPTION:"Now we can replace used tools to boost some buildings production",PREREQUISITES:[uu.MANAGEMENT],FINISH:function(e){e.getGameService().enable(ou.BUFFS),e.getLogService().log("Production buffs invented")}},HUMAN_RESOURCES:{CATEGORY:Iu.GENERAL,COST:[{resource:su.FOOD,amount:5e3}],RESEARCH_POINT:50,DESCRIPTION:"Maybe we can optimize work?",FINISH_DESCRIPTION:"We discovered automated work management for some buildings",PREREQUISITES:[uu.MANAGEMENT],FINISH:function(e){e.getGameService().enable(ou.HUMAN_RESOURCES),e.getLogService().log("Automated work management available in management tab")}},BUILDERS_GUILD:{CATEGORY:Iu.GENERAL,COST:[{resource:su.FOOD,amount:5e3},{resource:su.HAMMER,amount:5}],RESEARCH_POINT:100,DESCRIPTION:"Can we send unemployed to work?",FINISH_DESCRIPTION:"We learned that by creating builders guild we can send unemployed villagers to work",PREREQUISITES:[uu.HUMAN_RESOURCES,uu.SAWMILL],FINISH:function(e){e.getGameService().enable(ou.BUILDERS_GUILD),e.getLogService().log("Builders guild unlocked")}},SPECIALISED_PRODUCTION:{CATEGORY:Iu.TECHNOLOGY,COST:[{resource:su.FOOD,amount:3e3},{resource:su.HAMMER,amount:5},{resource:su.AXE,amount:5},{resource:su.PICKAXE,amount:5},{resource:su.SHOVEL,amount:5}],RESEARCH_POINT:50,DESCRIPTION:"Can we specialise in crafting one thing to do it better and faster?",FINISH_DESCRIPTION:"We realized that if we focus on crafting only one thing we can do it more efficiently",PREREQUISITES:[uu.MATHEMATICS,uu.STONE_HAMMER,uu.STONE_AXE,uu.STONE_PICKAXE,uu.STONE_SHOVEL],FINISH:function(e){e.getGameService().enable(ou.SPECIALISED_PRODUCTION),e.getLogService().log("Manufacture invented")}},HERBAL_MEDICINE:{CATEGORY:Iu.SCIENCE,COST:[{resource:su.HERBS,amount:20}],RESEARCH_POINT:25,DESCRIPTION:"Would we heal faster if we used herbs?",FINISH_DESCRIPTION:"We learned how to craft medicine from herbs",PREREQUISITES:[uu.MORTAR],FINISH:function(e){e.getRecipeService().enable(Cu.HERBAL_MEDICINE)}},PRODUCTION_ZONES:{CATEGORY:Iu.GENERAL,COST:[{resource:su.FOOD,amount:5e3}],RESEARCH_POINT:50,DESCRIPTION:"Would creating production camps help with productivity?",FINISH_DESCRIPTION:"We discovered that groups of production buildings can increase production",PREREQUISITES:[uu.HUMAN_RESOURCES],FINISH:function(e){e.getGameService().enable(ou.PRODUCTION_ZONES),e.getLogService().log("Unlocked buildings camps")}},BOAT_BUILDING:{CATEGORY:Iu.TECHNOLOGY,COST:[{resource:su.LOG,amount:50},{resource:su.PLANK,amount:100},{resource:su.NAILS,amount:50},{resource:su.FABRIC,amount:20}],RESEARCH_POINT:200,DESCRIPTION:"Could we utilize floating things to find better fishing spots or get from one place to another?",FINISH_DESCRIPTION:"We invented boats and boats builders",PREREQUISITES:[uu.FISHING,uu.COPPER_TOOLS],FINISH:function(e){e.getGameService().enable(ou.PIER),e.getGameService().enable(ou.BOAT_BUILDER),e.getLogService().log("Invented boat builder and pier")}},CANNON:{CATEGORY:Iu.MILITARY,COST:[{resource:su.IRON,amount:50},{resource:su.LOG,amount:50}],RESEARCH_POINT:200,DESCRIPTION:"How can we make our ships perform better in fights?",FINISH_DESCRIPTION:"We invented cannons that we can put on our ships",PREREQUISITES:[uu.MASTER_ORE_PROCESSING,uu.BOAT_BUILDING],FINISH:function(e){e.getRecipeService().enable(Cu.CANNON),e.getLogService().log("Invented cannons crafting")}},BIGGER_SHIPS:{CATEGORY:Iu.TECHNOLOGY,COST:[{resource:su.LOG,amount:100},{resource:su.PLANK,amount:200},{resource:su.NAILS,amount:200},{resource:su.HAMMER,amount:40},{resource:su.FABRIC,amount:50}],RESEARCH_POINT:400,DESCRIPTION:"Could our ships get bigger?",FINISH_DESCRIPTION:"We invented new ship design and construction methods",PREREQUISITES:[uu.BOAT_BUILDING,uu.CANNON],FINISH:function(e){e.getGameService().enable(ou.HARBOUR),e.getGameService().enable(ou.SHIPYARD),e.getGameService().enable(ou.BRIGANTINE),e.getLogService().log("Invented Harbour, Shipyard and Brigantine")}},GALLEON:{CATEGORY:Iu.TECHNOLOGY,COST:[{resource:su.LOG,amount:100},{resource:su.PLANK,amount:200},{resource:su.NAILS,amount:200},{resource:su.HAMMER,amount:40},{resource:su.FABRIC,amount:60}],RESEARCH_POINT:700,DESCRIPTION:"How can we build even bigger ships?",FINISH_DESCRIPTION:"We learned how to build huge ships",PREREQUISITES:[uu.BIGGER_SHIPS],FINISH:function(e){e.getGameService().enable(ou.GALLEON),e.getLogService().log("Invented Galleons")}},SEA_NAVIGATION:{CATEGORY:Iu.TECHNOLOGY,COST:[{resource:su.CUT_STONE,amount:50},{resource:su.BRICKS,amount:50},{resource:su.LOG,amount:50},{resource:su.PLANK,amount:50}],RESEARCH_POINT:300,DESCRIPTION:"Can we improve sea navigation?",FINISH_DESCRIPTION:"We invented lighthouse to guide our ships at the sea",PREREQUISITES:[uu.BIGGER_SHIPS],FINISH:function(e){e.getGameService().enable(ou.LIGHTHOUSE),e.getLogService().log("Invented Lighthouse")}},SEA_CARTOGRAPHY:{CATEGORY:Iu.TECHNOLOGY,COST:[{resource:su.FOOD,amount:5e3}],RESEARCH_POINT:300,DESCRIPTION:"Can we discover new lands across the sea?",FINISH_DESCRIPTION:"We discovered what data to gather from the sea to help create maps to distant lands",PREREQUISITES:[uu.SEA_NAVIGATION],FINISH:function(e){e.getGameService().enable(ou.CARTOGRAPHER),e.getResourcesService().makeVisible(su.MAP),e.getLogService().log("Invented sea cartographer")}},SEA_CUISINE:{CATEGORY:Iu.GENERAL,COST:[{resource:su.FISH,amount:30},{resource:su.HERBS,amount:20},{resource:su.BREAD,amount:10}],RESEARCH_POINT:200,DESCRIPTION:"Can we make better dishes from what sea offers?",FINISH_DESCRIPTION:"We invented how to craft Bouillabaisse",PREREQUISITES:[uu.KITCHEN,uu.FISHING,uu.BAKERY],FINISH:function(e){e.getRecipeService().enable(Cu.BOUILLABAISSE),e.getLogService().log("Invented Bouillabaisse")}}},Vu={START_CRAFTING_QUEUE_SIZE:2,START_COOKING_QUEUE_SIZE:2,RECIPES:{PLANK:{RESOURCE:su.PLANK,AMOUNT:1,COST:[{resource:su.LOG,amount:5}],CRAFTING:5},CUT_STONE:{RESOURCE:su.CUT_STONE,AMOUNT:1,COST:[{resource:su.STONE,amount:5}],CRAFTING:10},LEATHER:{RESOURCE:su.LEATHER,AMOUNT:1,COST:[{resource:su.FUR,amount:2}],CRAFTING:10},POTTERY:{RESOURCE:su.POTTERY,AMOUNT:1,COST:[{resource:su.FUEL,amount:1},{resource:su.CLAY,amount:4}],CRAFTING:13},BRICKS:{RESOURCE:su.BRICKS,AMOUNT:1,COST:[{resource:su.FUEL,amount:1},{resource:su.CLAY,amount:5},{resource:su.HAY,amount:1}],CRAFTING:15},STONE_AXE:{NAME:"STONE AXE",RESOURCE:su.AXE,AMOUNT:1,COST:[{resource:su.BRUSHWOOD,amount:1},{resource:su.LOG,amount:2},{resource:su.STONE,amount:5}],CRAFTING:15},STONE_PICKAXE:{NAME:"STONE PICKAXE",RESOURCE:su.PICKAXE,AMOUNT:1,COST:[{resource:su.BRUSHWOOD,amount:1},{resource:su.LOG,amount:2},{resource:su.STONE,amount:5}],CRAFTING:15},STONE_SHOVEL:{NAME:"STONE SHOVEL",RESOURCE:su.SHOVEL,AMOUNT:1,COST:[{resource:su.BRUSHWOOD,amount:1},{resource:su.LOG,amount:2},{resource:su.STONE,amount:5}],CRAFTING:15},STONE_SPEAR:{NAME:"STONE SPEAR",RESOURCE:su.SPEAR,AMOUNT:1,COST:[{resource:su.BRUSHWOOD,amount:1},{resource:su.LOG,amount:2},{resource:su.STONE,amount:5}],CRAFTING:15},STONE_HAMMER:{NAME:"STONE HAMMER",RESOURCE:su.HAMMER,AMOUNT:1,COST:[{resource:su.BRUSHWOOD,amount:1},{resource:su.LOG,amount:2},{resource:su.STONE,amount:5}],CRAFTING:15},COPPER_AXE:{NAME:"COPPER AXE",RESOURCE:su.AXE,AMOUNT:2,COST:[{resource:su.LOG,amount:2},{resource:su.COPPER,amount:1}],CRAFTING:12},COPPER_PICKAXE:{NAME:"COPPER PICKAXE",RESOURCE:su.PICKAXE,AMOUNT:2,COST:[{resource:su.LOG,amount:2},{resource:su.COPPER,amount:1}],CRAFTING:12},COPPER_SHOVEL:{NAME:"COPPER SHOVEL",RESOURCE:su.SHOVEL,AMOUNT:2,COST:[{resource:su.LOG,amount:2},{resource:su.COPPER,amount:1}],CRAFTING:12},COPPER_SPEAR:{NAME:"COPPER SPEAR",RESOURCE:su.SPEAR,AMOUNT:2,COST:[{resource:su.LOG,amount:2},{resource:su.COPPER,amount:1}],CRAFTING:12},COPPER_HAMMER:{NAME:"COPPER HAMMER",RESOURCE:su.HAMMER,AMOUNT:2,COST:[{resource:su.LOG,amount:2},{resource:su.COPPER,amount:1}],CRAFTING:12},COPPER_NAILS:{NAME:"COPPER NAILS",RESOURCE:su.NAILS,AMOUNT:4,COST:[{resource:su.COPPER,amount:2}],CRAFTING:6},BRONZE_AXE:{NAME:"BRONZE AXE",RESOURCE:su.AXE,AMOUNT:4,COST:[{resource:su.LOG,amount:2},{resource:su.BRONZE,amount:1}],CRAFTING:15},BRONZE_PICKAXE:{NAME:"BRONZE PICKAXE",RESOURCE:su.PICKAXE,AMOUNT:4,COST:[{resource:su.LOG,amount:2},{resource:su.BRONZE,amount:1}],CRAFTING:15},BRONZE_SHOVEL:{NAME:"BRONZE SHOVEL",RESOURCE:su.SHOVEL,AMOUNT:4,COST:[{resource:su.LOG,amount:2},{resource:su.BRONZE,amount:1}],CRAFTING:15},BRONZE_SPEAR:{NAME:"BRONZE SPEAR",RESOURCE:su.SPEAR,AMOUNT:4,COST:[{resource:su.LOG,amount:2},{resource:su.BRONZE,amount:1}],CRAFTING:15},BRONZE_HAMMER:{NAME:"BRONZE HAMMER",RESOURCE:su.HAMMER,AMOUNT:4,COST:[{resource:su.LOG,amount:2},{resource:su.BRONZE,amount:1}],CRAFTING:15},BRONZE_NAILS:{NAME:"BRONZE NAILS",RESOURCE:su.NAILS,AMOUNT:5,COST:[{resource:su.BRONZE,amount:1}],CRAFTING:8},IRON_AXE:{NAME:"IRON AXE",RESOURCE:su.AXE,AMOUNT:8,COST:[{resource:su.LOG,amount:2},{resource:su.IRON,amount:1}],CRAFTING:12},IRON_PICKAXE:{NAME:"IRON PICKAXE",RESOURCE:su.PICKAXE,AMOUNT:8,COST:[{resource:su.LOG,amount:2},{resource:su.IRON,amount:1}],CRAFTING:12},IRON_SHOVEL:{NAME:"IRON SHOVEL",RESOURCE:su.SHOVEL,AMOUNT:8,COST:[{resource:su.LOG,amount:2},{resource:su.IRON,amount:1}],CRAFTING:12},IRON_SPEAR:{NAME:"IRON SPEAR",RESOURCE:su.SPEAR,AMOUNT:8,COST:[{resource:su.LOG,amount:2},{resource:su.IRON,amount:1}],CRAFTING:12},IRON_HAMMER:{NAME:"IRON HAMMER",RESOURCE:su.HAMMER,AMOUNT:8,COST:[{resource:su.LOG,amount:2},{resource:su.IRON,amount:1}],CRAFTING:12},IRON_NAILS:{NAME:"IRON NAILS",RESOURCE:su.NAILS,AMOUNT:15,COST:[{resource:su.IRON,amount:1}],CRAFTING:6},BOW:{RESOURCE:su.BOW,AMOUNT:1,COST:[{resource:su.BRUSHWOOD,amount:5},{resource:su.LOG,amount:10}],CRAFTING:15},PARCHMENT:{RESOURCE:su.PAPER,AMOUNT:1,COST:[{resource:su.FUR,amount:2}],CRAFTING:15},SWORD:{RESOURCE:su.SWORD,AMOUNT:1,COST:[{resource:su.COPPER,amount:5},{resource:su.LOG,amount:1},{resource:su.FUEL,amount:5}],CRAFTING:20},BRONZE_SWORD:{NAME:"BRONZE SWORD",RESOURCE:su.SWORD,AMOUNT:2,COST:[{resource:su.BRONZE,amount:4},{resource:su.LOG,amount:1},{resource:su.FUEL,amount:7}],CRAFTING:25},IRON_SWORD:{NAME:"IRON SWORD",RESOURCE:su.SWORD,AMOUNT:3,COST:[{resource:su.IRON,amount:3},{resource:su.LOG,amount:1},{resource:su.FUEL,amount:10}],CRAFTING:30},WOODEN_SHIELD:{NAME:"WOODEN SHIELD",RESOURCE:su.SHIELD,AMOUNT:1,COST:[{resource:su.PLANK,amount:5},{resource:su.LOG,amount:2},{resource:su.LEATHER,amount:1}],CRAFTING:20},BRONZE_SHIELD:{NAME:"BRONZE SHIELD",RESOURCE:su.SHIELD,AMOUNT:2,COST:[{resource:su.BRONZE,amount:1},{resource:su.LEATHER,amount:1}],CRAFTING:25},IRON_SHIELD:{NAME:"IRON SHIELD",RESOURCE:su.SHIELD,AMOUNT:4,COST:[{resource:su.IRON,amount:1},{resource:su.LEATHER,amount:1}],CRAFTING:30},LEATHER_ARMOR:{RESOURCE:su.LEATHER_ARMOR,AMOUNT:1,COST:[{resource:su.LEATHER,amount:10}],CRAFTING:20},LIGHT_ARMOR:{RESOURCE:su.LIGHT_ARMOR,AMOUNT:1,COST:[{resource:su.COPPER,amount:10},{resource:su.LEATHER,amount:5},{resource:su.FUEL,amount:10}],CRAFTING:25},HEAVY_ARMOR:{RESOURCE:su.HEAVY_ARMOR,AMOUNT:1,COST:[{resource:su.BRONZE,amount:8},{resource:su.LEATHER,amount:5},{resource:su.FUEL,amount:10}],CRAFTING:30},CANNON:{RESOURCE:su.CANNON,AMOUNT:1,COST:[{resource:su.IRON,amount:10},{resource:su.PLANK,amount:10},{resource:su.FUEL,amount:5}],CRAFTING:30},FUEL_BRUSHWOOD:{NAME:"BRUSHWOOD FUEL",RESOURCE:su.FUEL,AMOUNT:2,COST:[{resource:su.BRUSHWOOD,amount:4}],CRAFTING:2},FUEL_LOG:{NAME:"LOG FUEL",RESOURCE:su.FUEL,AMOUNT:4,COST:[{resource:su.LOG,amount:4}],CRAFTING:5},FUEL_COAL:{NAME:"COAL FUEL",RESOURCE:su.FUEL,AMOUNT:12,COST:[{resource:su.COAL,amount:2}],CRAFTING:5},COOKED_FISH:{RESOURCE:su.COOKED_FISH,AMOUNT:1,COST:[{resource:su.FISH,amount:1},{resource:su.FUEL,amount:1}],CRAFTING:5},COOKED_MEAT:{RESOURCE:su.COOKED_MEAT,AMOUNT:1,COST:[{resource:su.MEAT,amount:1},{resource:su.FUEL,amount:1}],CRAFTING:5},CHEESE:{RESOURCE:su.CHEESE,AMOUNT:1,COST:[{resource:su.MILK,amount:3}],CRAFTING:7},OMELETTE:{RESOURCE:su.OMELETTE,AMOUNT:1,COST:[{resource:su.EGG,amount:5},{resource:su.FUEL,amount:1}],CRAFTING:3},PIE:{RESOURCE:su.PIE,AMOUNT:1,COST:[{resource:su.APPLE,amount:3},{resource:su.FLOUR,amount:1},{resource:su.EGG,amount:1},{resource:su.FUEL,amount:1}],CRAFTING:5},FLOUR:{RESOURCE:su.FLOUR,AMOUNT:1,COST:[{resource:su.WHEAT,amount:2}],CRAFTING:3},BREAD:{RESOURCE:su.BREAD,AMOUNT:1,COST:[{resource:su.FLOUR,amount:2},{resource:su.FUEL,amount:1}],CRAFTING:5},BOUILLABAISSE:{RESOURCE:su.BOUILLABAISSE,AMOUNT:1,COST:[{resource:su.FISH,amount:3},{resource:su.BREAD,amount:1},{resource:su.HERBS,amount:2},{resource:su.FUEL,amount:1}],CRAFTING:5},VEGETABLE_SOUP_BERRY:{RESOURCE:su.VEGETABLE_SOUP,AMOUNT:1,COST:[{resource:su.BERRY,amount:2},{resource:su.HERBS,amount:1},{resource:su.FUEL,amount:1}],CRAFTING:5},VEGETABLE_SOUP_MUSHROOM:{RESOURCE:su.VEGETABLE_SOUP,AMOUNT:1,COST:[{resource:su.MUSHROOM,amount:2},{resource:su.HERBS,amount:1},{resource:su.FUEL,amount:1}],CRAFTING:5},VEGETABLE_SOUP_BERRY_MUSHROOM:{RESOURCE:su.VEGETABLE_SOUP,AMOUNT:1,COST:[{resource:su.BERRY,amount:1},{resource:su.MUSHROOM,amount:1},{resource:su.HERBS,amount:1},{resource:su.FUEL,amount:1}],CRAFTING:5},MEAT_SOUP:{RESOURCE:su.MEAT_SOUP,AMOUNT:1,COST:[{resource:su.MEAT,amount:1},{resource:su.HERBS,amount:1},{resource:su.FUEL,amount:1}],CRAFTING:5},FABRIC:{NAME:"COTTON FABRIC",RESOURCE:su.FABRIC,AMOUNT:1,COST:[{resource:su.COTTON,amount:2}],CRAFTING:5},FABRIC_WOOL:{NAME:"WOOL FABRIC",RESOURCE:su.FABRIC,AMOUNT:1,COST:[{resource:su.WOOL,amount:3}],CRAFTING:5},CLOTHES_FABRIC:{NAME:"FABRIC CLOTHES",RESOURCE:su.CLOTHES,AMOUNT:1,COST:[{resource:su.FABRIC,amount:10}],CRAFTING:20},CLOTHES_FUR:{NAME:"FUR CLOTHES",RESOURCE:su.CLOTHES,AMOUNT:1,COST:[{resource:su.FUR,amount:15}],CRAFTING:20},GOLD:{RESOURCE:su.GOLD,AMOUNT:1,COST:[{resource:su.GOLD_ORE,amount:2},{resource:su.FUEL,amount:1}],CRAFTING:10},SILVER:{RESOURCE:su.SILVER,AMOUNT:1,COST:[{resource:su.SILVER_ORE,amount:2},{resource:su.FUEL,amount:1}],CRAFTING:10},COPPER:{RESOURCE:su.COPPER,AMOUNT:1,COST:[{resource:su.COPPER_ORE,amount:2},{resource:su.FUEL,amount:1}],CRAFTING:20},TIN:{RESOURCE:su.TIN,AMOUNT:1,COST:[{resource:su.TIN_ORE,amount:2},{resource:su.FUEL,amount:1}],CRAFTING:20},BRONZE:{RESOURCE:su.BRONZE,AMOUNT:2,COST:[{resource:su.COPPER,amount:1},{resource:su.TIN,amount:1},{resource:su.FUEL,amount:1}],CRAFTING:30},IRON:{RESOURCE:su.IRON,AMOUNT:1,COST:[{resource:su.IRON_ORE,amount:3},{resource:su.FUEL,amount:3}],CRAFTING:30},STEEL:{RESOURCE:su.STEEL,AMOUNT:1,COST:[{resource:su.IRON,amount:1},{resource:su.COAL,amount:5},{resource:su.FUEL,amount:1}],CRAFTING:40},HERBAL_MEDICINE:{RESOURCE:su.HERBAL_MEDICINE,AMOUNT:1,COST:[{resource:su.HERBS,amount:5}],CRAFTING:15},JEWELRY:{RESOURCE:su.JEWELRY,AMOUNT:1,COST:[{resource:su.GOLD,amount:1},{resource:su.SILVER,amount:1},{resource:su.GEMS,amount:1}],CRAFTING:20}}},Wu={getReligion(e){const n=Object.entries(this.RELIGIONS).find(n=>n[0]===gu[e]);if(n)return n[1];console.warn("Invalid religion: "+Ou.prepareReligionName(e))},RELIGIONS:{NONE:{FAITH_LEVEL:0,FAITH:0,TIME:0,OFFERING:[]},NATURE:{FAITH_LEVEL:1,FAITH:20,TIME:10,OFFERING:[{resource:su.LOG,amount:40},{resource:su.BERRY,amount:20},{resource:su.MUSHROOM,amount:20}]},FERTILITY:{FAITH_LEVEL:1,FAITH:30,TIME:10,OFFERING:[{resource:su.WHEAT,amount:40},{resource:su.BERRY,amount:40},{resource:su.APPLE,amount:40}]},TECHNOLOGY:{FAITH_LEVEL:1,FAITH:40,TIME:10,OFFERING:[{resource:su.PLANK,amount:20},{resource:su.CUT_STONE,amount:20},{resource:su.HAMMER,amount:5},{resource:su.PICKAXE,amount:5}]},WAR:{FAITH_LEVEL:1,FAITH:50,TIME:10,OFFERING:[{resource:su.SPEAR,amount:5},{resource:su.LEATHER_ARMOR,amount:5},{resource:su.FUR,amount:10},{resource:su.LEATHER,amount:10},{resource:su.FOOD,amount:1e3}]}},PRAYERS:{PRAY:{FAITH:20,FAITH_LEVEL:1,RELIGION:gu.NONE,DESCRIPTION:"We feel better after prayer",FINISH:function(e){e.getHappinessService().addHappinessEffect(0,Ru.PRAYER,2,180)}},BLESSING:{FAITH:50,FAITH_LEVEL:2,RELIGION:gu.NONE,DESCRIPTION:"May everything go according to our plans",FINISH:function(e){const n=[];Object.values(Eu).filter(e=>!isNaN(e)).forEach(l=>{e.getServiceByRegion(l).getBuildings().forEach(e=>{n.includes(e.getBuildingType())||n.push(e.getBuildingType())})});const l=Nu.randomExcept(n,[tu.ALL,tu.CONSTRUCTION,tu.DECONSTRUCTION,tu.BARN,tu.FIELD,tu.ORCHARD,tu.PASTURE,tu.WAREHOUSE,tu.SMITHY,tu.ASCENSION_TEMPLE,tu.COLOSSUS,tu.GREAT_LIGHTHOUSE,tu.HANGING_GARDEN,tu.PYRAMID,tu.SACRED_GROVE,tu.STONEHENGE,tu.UNDERGROUND_CITY,tu.PIER,tu.HARBOUR,tu.LIGHTHOUSE,tu.TAX_COLLECTOR,tu.BUILDERS_GUILD,tu.STASH,tu.WOODEN_TOWER,tu.BARRACKS,tu.STONE_TOWER,tu.STOCKADE]);e.getLogService().log(Ou.prepareBuildingName(l)+" blessed"),e.getEffectsService().addBuildingEffect(new yu("Blessing",l,25,180))}},PREACH:{FAITH:20,FAITH_LEVEL:1,RELIGION:gu.NONE,DESCRIPTION:"We shall spread our beliefs to others",FINISH:function(e){e.getService(bu.RELIGION).increaseFaithLevel(1)}},FAITH_SHIELD:{FAITH:50,FAITH_LEVEL:3,RELIGION:gu.NONE,DESCRIPTION:"Our faith will protect us from harm",FINISH:function(e){let n=25;n+=e.getService(bu.RELIGION).getFaithLevel(),e.getService(bu.RELIGION).increaseFaithShield(n)}},SOLDIER_PRAYER:{FAITH:50,FAITH_LEVEL:5,RELIGION:gu.NONE,DESCRIPTION:"We shall win any enemy with our faith. All troops buffed 20% for one year",FINISH:function(e){e.getEffectsService().addArmyEffect(new _u("Soldier prayer",pu.ALL,20,360))}},FAITHFUL_RESEARCH:{FAITH:100,FAITH_LEVEL:5,RELIGION:gu.TECHNOLOGY,DESCRIPTION:"We live to improve our knowledge. Gain 100 research points spent only on current research",FINISH:function(e){e.getTechService().progressTech(100)}},BABY_BOOM:{FAITH:100,FAITH_LEVEL:5,RELIGION:gu.FERTILITY,DESCRIPTION:"May we have a lot of children",FINISH:function(e){e.getEffectsService().addBuildingEffect(new yu("Baby boom",tu.HUT,100,180)),e.getEffectsService().addBuildingEffect(new yu("Baby boom",tu.HOUSE,100,180)),e.getEffectsService().addBuildingEffect(new yu("Baby boom",tu.LONGHOUSE,100,180)),e.getEffectsService().addBuildingEffect(new yu("Baby boom",tu.TUDOR_HOUSE,100,180)),e.getEffectsService().addBuildingEffect(new yu("Baby boom",tu.SETTLEMENT,100,180))}},LIFE_CYCLE:{FAITH:100,FAITH_LEVEL:5,RELIGION:gu.NATURE,DESCRIPTION:"We pray for all live to thrive. 10% buff to natural sources for 5 years",FINISH:function(e){e.getEffectsService().addNatureEffect(new wu("Life cycle",10,1800))}},HOLY_WAR:{FAITH:100,FAITH_LEVEL:5,RELIGION:gu.WAR,DESCRIPTION:"The only true faith must be spread at all cost. All troops buffed 10% for 5 years",FINISH:function(e){e.getEffectsService().addArmyEffect(new _u("Holy War",pu.ALL,10,1800))}}}},Yu={GOLDEN_ITEMS:{GOLDEN_FISH_CHANCE:3e-4,GOLDEN_EGG_CHANCE:3e-4,GOLDEN_APPLE_CHANCE:3e-4,GOLDEN_FLEECE_CHANCE:3e-4},PERKS:{MOTIVATION_SPEECH:{DESCRIPTION:"Use your royal position to motivate people to harder work.<br>25% production upgrade for all buildings for 100 years or until reset (single use)",USAGES:0,MAX_USAGES:0,COST:20,RESET:function(e,n){},EFFECT:function(e,n){e.getEffectsService().addBuildingEffect(new yu("Motivation speech",tu.ALL,25,36e3)),e.getRoyalService().unlockCallback(n)}},ROYAL_PROPHECY:{DESCRIPTION:"Your royal blood allows prophets to look into the future.<br>Unlocks certain research for each perk level (awarded immediately and after any soft reset or abdication)",USAGES:0,MAX_USAGES:3,COST:50,RESET:function(e,n){n.usages>=1&&e.getTechService().finishTech(uu.FIRE),n.usages>=2&&e.getTechService().finishTech(uu.COOKING),3===n.usages&&(e.getTechService().finishTech(uu.BOW),e.getTechService().finishTech(uu.HUNTING))},EFFECT:function(e,n){switch(n.usages){case 0:e.getTechService().finishTech(uu.FIRE);break;case 1:e.getTechService().finishTech(uu.COOKING);break;case 2:e.getTechService().finishTech(uu.BOW),e.getTechService().finishTech(uu.HUNTING)}e.getRoyalService().unlockCallback(n)}},HERITAGE:{DESCRIPTION:"Your predecessors ruled better.<br>You start with extra building (awarded after any soft reset or abdication)",USAGES:0,MAX_USAGES:2,COST:20,RESET:function(e,n){n.usages>=1&&(e.getService(bu.FOREST).addBuilding(tu.GATHERER),e.getLandService().takeLand(Fu.FOREST.GATHERER.SIZE)),2===n.usages&&(e.getVillageService().addBuilding(tu.WORKSHOP),e.getLandService().takeLand(Fu.VILLAGE.WORKSHOP.SIZE))},EFFECT:function(e,n){e.getRoyalService().unlockCallback(n)}},ROYAL_ARCHIVES:{DESCRIPTION:"With archives unlocked we can schedule one more research to be worked on.",USAGES:0,MAX_USAGES:1,COST:50,RESET:function(e,n){e.getTechService().increaseTechQueueSize()},EFFECT:function(e,n){e.getTechService().increaseTechQueueSize(),e.getRoyalService().unlockCallback(n)}},FAMILY_JEWELS:{DESCRIPTION:"Your predecessors left you with more riches.<br>You start with extra resources (awarded after any soft reset or abdication)",USAGES:0,MAX_USAGES:3,COST:20,RESET:function(e,n){n.usages>=1&&(e.getResourcesService().increaseResource(su.LOG,20,"Royal",!0),e.getResourcesService().increaseResource(su.BRUSHWOOD,10,"Royal",!0),e.getResourcesService().increaseResource(su.BERRY,20,"Royal",!0),e.getResourcesService().increaseResource(su.MUSHROOM,20,"Royal",!0)),n.usages>=2&&(e.getResourcesService().increaseResource(su.STONE,30,"Royal",!0),e.getResourcesService().increaseResource(su.PLANK,20,"Royal",!0),e.getResourcesService().increaseResource(su.FUEL,5,"Royal",!0),e.getResourcesService().increaseResource(su.LEATHER,5,"Royal",!0)),3===n.usages&&e.getResourcesService().increaseResource(su.COINS,300,"Royal",!0)},EFFECT:function(e,n){e.getRoyalService().unlockCallback(n)}},KING_OF_THE_FOREST:{DESCRIPTION:"You rule everything in the forests.<br>You start with a few forest buildings unlocked (awarded after any soft reset or abdication)",USAGES:0,MAX_USAGES:1,COST:50,RESET:function(e,n){1===n.usages&&(e.getService(bu.FOREST).addBuilding(tu.GATHERER),e.getService(bu.FOREST).addBuilding(tu.FORESTER),e.getService(bu.FOREST).addBuilding(tu.HUNTER_LODGE),e.getLandService().takeLand(Fu.FOREST.GATHERER.SIZE+Fu.FOREST.FORESTER.SIZE+Fu.FOREST.HUNTER_LODGE.SIZE))},EFFECT:function(e,n){e.getRoyalService().unlockCallback(n)}},KING_OF_THE_PEOPLE:{DESCRIPTION:"People love you unconditionally.<br>You start with House unlocked and built instead of huts (awarded after any soft reset or abdication)",USAGES:0,MAX_USAGES:1,COST:50,RESET:function(e,n){1===n.usages&&(e.getTechService().finishTech(uu.HOUSE),e.getVillageService().replaceWithHouses())},EFFECT:function(e,n){e.getRoyalService().unlockCallback(n)}},KING_OF_THE_SEAS:{DESCRIPTION:"Seas obey your will.<br>You start with sea unlocked, pier building built, one boat and 120 coins",USAGES:0,MAX_USAGES:1,COST:100,RESET:function(e,n){e.getGameService().enable(ou.SEA),e.getGameService().enable(ou.NAVY),e.getService(bu.SEA).addBuilding(tu.PIER),e.getNavyService().addShip(pu.BOAT),e.getLandService().takeLand(Fu.SEA.PIER.SIZE),e.getResourcesService().increaseResource(su.COINS,120,"Royal",!0)},EFFECT:function(e,n){e.getRoyalService().unlockCallback(n)}},KING_OF_THE_WAR:{DESCRIPTION:"War is your game.<br>You start with military unlocked and small army (awarded after any soft reset or abdication)",USAGES:0,MAX_USAGES:1,COST:50,RESET:function(e,n){e.getGameService().enable(ou.ARMY),e.getGameService().enable(ou.FORT);const l=e.getArmyService();e.getService(bu.FORT).addBuilding(tu.BARRACKS),e.getService(bu.FORT).addBuilding(tu.BARRACKS),e.getLandService().takeLand(2*Fu.FORT.BARRACKS.SIZE),l.addMilitia(20)},EFFECT:function(e,n){e.getRoyalService().unlockCallback(n)}},CALL_TO_ARMS:{DESCRIPTION:"We will fight till the last of us drops dead.<br>You can convert up to 10 villagers to militia (single use)",USAGES:0,MAX_USAGES:0,COST:10,RESET:function(e,n){},EFFECT:function(e,n){const l=e.getResourcesService(),t=e.getModalService(),i=e.getArmyService(),s=e.getRoyalService();t.open(Pu.INPUT),t.setModalText("How many villagers would you like to convert to militia?<br>"+l.getPeople()+" recruits available");const r=t.registerForValueResponse().subscribe(e=>{if(r.unsubscribe(),null!==e&&!isNaN(e)){const r=l.getPeople();if(r>10)return void t.info("You can only convert up to 10 villagers");if(i.getFreeBarracks()<e)return void t.info("Not enough barracks space for so many militia");if(e>r)return void t.info("Not enough recruits");if(e<=0)return void t.info("Invalid amount of recruits");if(s.getRoyalPoints()<n.cost)return void t.info("Not enough royal points");l.removeRecruit(Number(e)),i.addMilitia(Number(e)),s.unlockCallback(n)}})}},UNITE_WITH_THE_PEOPLE:{DESCRIPTION:"You step down from your throne and live with others.<br>Permanent 20% upgrade to all buildings (persists through soft resets and abdications)",USAGES:0,MAX_USAGES:0,COST:100,RESET:function(e,n){},EFFECT:function(e,n){e.getEffectsService().addBuildingEffect(new yu("Unite with the people",tu.ALL,20,Au.ROYAL)),e.getRoyalService().unlockCallback(n)}},JESTER:{DESCRIPTION:"You hired jester to entertain you but who knows what can you expect from him?<br>Jester will pick random unlocked resource (except coins) and fill it to max storage.<br>Each time he fills resource or picks already full resource he has 50% chance to pick another one (single use)",USAGES:0,MAX_USAGES:0,COST:25,RESET:function(e,n){},EFFECT:function(e,n){const l=Array.from(e.getResourcesService().getResources().values()).filter(e=>e.isVisible()&&e.resource!==su.COINS);for(;;){const n=l[Nu.randomBetween(0,l.length-1)];if(n.amount<n.limit?(n.amount=n.limit,e.getLogService().success("Jester filled "+Ou.prepareResourceName(n.resource)+" storage!")):e.getLogService().warning("Jester couldn't fill "+Ou.prepareResourceName(n.resource)+" storage!"),Nu.chance(.5))break}e.getRoyalService().unlockCallback(n)}},ASTROLOGICAL_NOTE:{DESCRIPTION:"Royal archives contain notes about old astrological events.<br>You unlock one meteorite in the mountains",USAGES:0,MAX_USAGES:0,COST:10,RESET:function(e,n){},EFFECT:function(e,n){e.getGameService().isEnabled(ou.MOUNTAINS)||(e.getGameService().enable(ou.MOUNTAINS),e.getLogService().log("Mountains unlocked")),e.getService(bu.MOUNTAINS).addMeteorite(),e.getRoyalService().unlockCallback(n)}},ROYAL_FESTIVAL:{DESCRIPTION:"You organize a royal festival for your people.<br>You gain positive happiness boost for 6 months",USAGES:0,MAX_USAGES:0,COST:10,RESET:function(e,n){},EFFECT:function(e,n){e.getHappinessService().addHappinessEffect(0,Ru.ROYAL_FESTIVAL,10,180),e.getLogService().success("Royal festival has started!"),e.getRoyalService().unlockCallback(n)}},ROYAL_RESERVE:{DESCRIPTION:"You use gold from royal treasury that was reserved for a hard times.<br>You gain 2000 coins",USAGES:0,MAX_USAGES:0,COST:10,RESET:function(e,n){},EFFECT:function(e,n){e.getResourcesService().increaseResource(su.COINS,2e3,"Royal reserve",!0),e.getLogService().success("You gained 2000 coins"),e.getRoyalService().unlockCallback(n)}},ANCIENT_SEA_MAPS:{DESCRIPTION:"You found sea maps that show you places on the sea with something interesting.<br>You unlock up to 5 positive sea events",USAGES:0,MAX_USAGES:0,COST:20,RESET:function(e,n){},EFFECT:function(e,n){e.getWorldService().ROYAL_spawnPositiveSeaEvents(),e.getRoyalService().unlockCallback(n)}},ROYAL_ORDERS:{DESCRIPTION:"Your people work harder when you give them orders.<br>Your initial crafting queue is increased by 1 for each perk level",USAGES:0,MAX_USAGES:5,COST:10,RESET:function(e,n){n.usages>0&&e.getService(bu.CRAFTING).increaseCraftingQueueSize(n.usages)},EFFECT:function(e,n){e.getService(bu.CRAFTING).increaseCraftingQueueSize(1),e.getRoyalService().unlockCallback(n)}},ROYAL_TRADITIONS:{DESCRIPTION:"You show royal traditions to the people.You gain 10 Heritage Points",USAGES:0,MAX_USAGES:0,COST:50,RESET:function(e,n){},EFFECT:function(e,n){e.getService(bu.HERITAGE).increaseHeritagePoints(10),e.getRoyalService().unlockCallback(n)}},ROYAL_GARDENS:{DESCRIPTION:"You open royal gardens for public use.<br>Permanent 1 point happiness effect per perk level",USAGES:0,MAX_USAGES:3,COST:25,RESET:function(e,n){1===n.usages?e.getHappinessService().addHappinessEffect(0,Ru.ROYAL_GARDENS,1,-1):2===n.usages?e.getHappinessService().addHappinessEffect(0,Ru.ROYAL_GARDENS,2,-1):3===n.usages&&e.getHappinessService().addHappinessEffect(0,Ru.ROYAL_GARDENS,3,-1)},EFFECT:function(e,n){e.getHappinessService().updateHappiness(Ru.ROYAL_GARDENS,n.usages+1,-1),e.getLogService().success("Royal gardens unlocked!"),e.getRoyalService().unlockCallback(n)}},HIRE_MERCENARIES:{DESCRIPTION:"Using your royal position you managed to convince mercenaries to fight for you.You gain 10 light cavalry units and 200 coins",USAGES:0,MAX_USAGES:0,COST:30,RESET:function(e,n){},EFFECT:function(e,n){const l=e.getModalService(),t=e.getArmyService(),i=e.getRoyalService();t.getFreeBarracks()<10?l.info("Not enough barracks space for 10 light cavalry units"):i.getRoyalPoints()<n.cost?l.info("Not enough royal points"):(t.addLightCavalry(10),e.getLogService().success("Mercenaries hired!"),e.getResourcesService().increaseResource(su.COINS,200,"Royal",!0),i.unlockCallback(n))}},HIRE_PIRATES:{DESCRIPTION:"Using your royal position you managed to convince pirates to fight for you.You gain 2 brigantines and 320 coins",USAGES:0,MAX_USAGES:0,COST:30,RESET:function(e,n){},EFFECT:function(e,n){const l=e.getModalService(),t=e.getNavyService(),i=e.getRoyalService();t.getFreeHarbourSpace()<80?l.info("Not enough harbour space for 2 brigantines"):i.getRoyalPoints()<n.cost?l.info("Not enough royal points"):(t.addBrigantines(2),e.getLogService().success("Pirates hired!"),e.getResourcesService().increaseResource(su.COINS,320,"Royal",!0),i.unlockCallback(n))}},ANCIENT_PROTECTION:{DESCRIPTION:"Using this ancient artifact will prevent any attacks.<br>Enemies won't be able to plunder or conquer your regions for a year.",USAGES:0,MAX_USAGES:0,COST:30,RESET:function(e,n){},EFFECT:function(e,n){const l=e.getLogService(),t=e.getWorldService(),i=e.getRoyalService();t.addProtection(360),l.success("Ancient protection enabled!"),i.unlockCallback(n)}}}},zu={getSeaEvent(e){const n=Object.entries(this.SEA_EVENTS).find(n=>n[0]===vu[e]);if(n)return n[1];console.warn("Invalid sea event: "+e)},KING_DEATH_CHANCE:.02,ROADS_DISTANCE_MODIFIER:.8,REGIONS:[{ID:0,PATH:"m 126.49907,133.07398 7.34991,7.88445 11.67185,8.93323 4.23333,15.875 11.37709,2.64584 7.14375,8.46666 0.26458,8.59896 13.89063,3.96875 15.08125,-9.525 -1.19063,-16.40417 9.78958,-4.36562 11.2448,5.68854 11.77395,-5.42396 17.33021,3.83646 3.57188,-11.50937 -7.80521,-10.58334 0.66146,-10.45104 7.40833,-7.14375 0.79375,-5.15937 -6.48229,-1.32292 -2.24896,-7.40833 -10.05417,-5.29167 -9.12812,3.96875 -1.71979,-6.21771 1.45521,-8.069789 0.66145,-5.89643 -6.04761,-5.858629 -11.90625,-0.944941 -15.11905,5.669645 -13.08608,0.871196 -12.96258,5.345393 -10.28987,7.617185 -5.07812,-7.750818 -10.55715,5.211754 -6.5481,6.681744 8.68626,10.15624 -7.75082,0.53454 z",LAND:500,FOREST:500,MOUNTAINS:100,CENTER:{x:187,y:127},NEIGHBOURS:[-1,1,2,13],WEALTH:0,HARBOUR:!0,TROOPS:[]},{ID:1,PATH:"m 126.49907,133.07398 -24.13484,-2.04836 -6.013569,-14.96709 -11.49259,-7.61718 4.677217,-1.33635 5.479026,-16.971615 -3.608139,-3.073598 3.741775,-19.510677 -2.405428,-3.340867 13.497118,-6.414468 11.22531,10.15624 11.09169,-3.073598 5.21176,5.211754 10.55714,-4.409945 2.53906,1.336347 4.00905,5.211754 -7.61719,5.479026 21.19488,15.545464 -10.28987,7.617183 -5.07812,-7.750816 -10.55715,5.211754 -6.5481,6.681742 8.68626,10.15624 -7.75082,0.53454 -6.41447,17.37252",LAND:80,FOREST:100,MOUNTAINS:0,CENTER:{x:116,y:97},NEIGHBOURS:[0,2,3,4,7,13,15],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:2,PATH:"m 126.49907,133.07398 -24.13484,-2.04836 0.4009,8.01809 -21.782464,-3.60814 -12.828937,12.96257 v 8.95353 l -11.893494,18.04069 -0.80181,16.83798 19.510677,-3.20723 14.03165,-4.67722 2.138156,-10.28988 9.488072,2.40543 6.949,-8.15172 5.61266,-0.80181 1.46999,12.82894 0.13363,11.49259 3.87541,0.53454 3.87541,-3.34087 3.20723,-9.75534 -0.53454,-8.81989 9.62171,2.13815 -6.28084,-10.28987 6.5481,-11.75986 -1.25576,-9.57787 z",LAND:80,FOREST:100,MOUNTAINS:0,CENTER:{x:100,y:155},NEIGHBOURS:[-1,0,1,3,5],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:3,PATH:"m 56.260235,175.39236 -5.233451,-16.73165 -9.827379,-12.28422 11.433778,-11.43378 1.039435,-11.2448 4.346725,-8.59895 0.566965,-9.92188 6.803573,-0.56696 V 92.703868 l 15.119045,1.700893 10.897249,-7.344976 3.608138,3.073598 -5.479026,16.971617 -4.677217,1.33635 11.49259,7.61718 6.01357,14.96709 0.4009,8.01809 -21.782464,-3.60814 -12.828937,12.96257 v 8.95353 z",LAND:20,FOREST:60,MOUNTAINS:0,CENTER:{x:71,y:125},NEIGHBOURS:[1,2,4,5],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:4,PATH:"m 41.199405,146.37649 -10.997948,-3.99191 -13.363477,-1.33635 4.577637,-11.0537 -3.508559,-16.87597 10.429075,-11.27348 6.676174,-23.33792 1.469982,-7.483546 14.83346,3.741772 2.405425,-8.285356 -1.202711,-5.879928 12.160763,-1.603618 7.617179,8.151722 8.953529,6.548102 13.898015,-6.1472 -3.741774,19.510677 -10.897251,7.344976 -15.119043,-1.700895 v 11.906254 l -6.803573,0.56696 -0.566965,9.92188 -4.346725,8.59895 -1.039435,11.2448 z",LAND:30,FOREST:60,MOUNTAINS:0,CENTER:{x:48,y:98},NEIGHBOURS:[1,3,5,6,7],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:5,PATH:"m 6.2808339,146.92816 -14.9670935,3.74177 6.2808339,12.02713 2.00452142,12.6953 -10.82441572,8.28536 0.534539,6.68174 8.9535291,6.949 12.1607629,0.66818 5.479026,8.01808 7.082642,5.07812 h 7.082642 l 0.400905,-10.0226 10.958049,-1.87089 6.013566,3.47451 7.082642,-2.93997 0.935442,-7.48355 0.80181,-16.83798 -5.233451,-16.73165 -9.827379,-12.28422 -10.997948,-3.99191 -13.363477,-1.33635 z",LAND:40,FOREST:70,MOUNTAINS:0,CENTER:{x:25,y:175},NEIGHBOURS:[-1,2,3,4,6,25],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:6,PATH:"M 16.83798,141.04823 6.2808339,146.92816 -0.13363471,129.0211 -12.828937,117.39488 l 4.0090427,-7.88446 -9.3544327,-9.48806 9.0871631,-4.810855 -4.2763121,-4.276313 0.133635,-15.234361 10.2898762,-5.746295 10.9580504,-0.935445 1.0690783,-7.349911 3.7417731,-6.414468 8.819894,3.207234 2.939965,4.009044 1.603617,-2.939966 7.483547,-1.603618 2.806329,13.096208 -1.469982,7.483544 -6.676174,23.337922 -10.429075,11.27348 3.508559,16.87597 z",LAND:30,FOREST:60,MOUNTAINS:0,CENTER:{x:10,y:92},NEIGHBOURS:[4,5,7,25,106],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:7,PATH:"M 36.482289,71.023614 33.67596,57.927406 26.192413,59.531024 24.588796,62.47099 21.648831,58.461946 12.828937,55.254712 10.824416,52.314747 7.4835466,48.706608 6.8153729,34.674958 19.91158,32.002264 l 9.888972,1.603616 4.81085,-10.289877 4.409948,3.474504 5.746295,1.469982 14.03165,-4.543581 10.423512,5.879928 16.169806,0.133636 4.276313,9.220798 7.082641,-2.405425 3.474503,2.80633 1.20271,6.815372 -7.349906,5.746295 -1.336353,12.294399 2.405428,3.340867 -13.898017,6.1472 -8.953527,-6.548102 -7.617179,-8.151722 -12.160763,1.603618 1.202711,5.879928 -2.405425,8.285356 z",LAND:30,FOREST:60,MOUNTAINS:0,CENTER:{x:56,y:44},NEIGHBOURS:[1,4,6,15,18,106],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:8,PATH:"m 130.40178,245.02827 -7.37053,9.26042 -11.33929,2.07887 -2.26785,7.18154 1.32291,11.15031 6.61459,6.42559 -3.96875,9.82737 -6.23661,1.13395 0.94494,2.64583 3.59077,1.70087 6.61459,-2.64583 1.13392,-3.77976 6.23661,-1.7009 7.55953,-0.94493 3.59077,-5.48066 1.88988,-1.13392 6.61458,1.13392 10.01637,-4.72469 6.99256,6.99257 5.85863,-8.12649 -5.10268,-6.04764 v -10.01636 l 2.26786,-7.9375 -7.37053,-6.23661 -11.1503,-1.88988 -5.29167,6.23661 -2.83482,-5.85863 -6.61458,-6.04762 z",LAND:40,FOREST:50,MOUNTAINS:0,CENTER:{x:138,y:265},NEIGHBOURS:[-1,9,10,11],WEALTH:0,HARBOUR:!0,TROOPS:[]},{ID:9,PATH:"m 165.36458,252.02083 6.22245,-3.26298 4.94449,-4.94449 8.41899,0.66817 5.61266,-5.21175 1.46998,-3.87541 1.73726,0.80181 -0.13364,2.80633 2.27179,4.27631 4.54358,0.66817 2.13816,4.54359 4.54358,0.4009 2.13816,4.94449 1.33635,7.61718 -0.66818,6.1472 -3.87541,4.67722 2.40543,0.93544 2.67269,-0.93544 2.6727,1.33633 -0.13364,2.80633 -4.94448,1.20272 -4.54358,-1.33633 -3.34087,-3.60815 -3.0736,-1.20272 -3.60814,2.53908 -0.53454,5.07812 3.20723,3.74176 3.87541,0.93544 -0.13363,3.8754 -4.14268,1.0691 -6.94901,1.46997 -7.21627,-1.73725 -5.47903,-3.8754 -5.61266,0.66817 -8.84536,-1.09132 5.85863,-8.12649 -5.10268,-6.04764 v -10.01636 z",LAND:40,FOREST:40,MOUNTAINS:10,CENTER:{x:186,y:263},NEIGHBOURS:[-1,8,11],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:10,PATH:"m 111.69196,296.43302 -4.51688,2.97241 -4.94449,1.60362 -1.87088,4.40994 v 6.68173 l 3.4745,-1.06907 -0.26727,4.81084 1.06908,4.9445 5.47902,2.93995 -0.8018,5.07812 5.34539,-1.46997 -1.06908,9.75534 -5.07812,4.6772 0.4009,3.47451 3.34087,0.13364 1.46998,-2.93997 5.87993,-1.20272 2.93997,4.40995 5.61266,2.00453 0.66817,5.21177 6.5481,2.53904 2.40543,-2.67269 5.87993,-2.00453 -0.40091,-4.40994 6.54811,-1.60362 -2.00452,-4.40994 1.87088,-3.34087 4.14268,-4.67722 2.13816,-5.87992 -8.01809,-3.47451 -1.73725,-6.28083 1.87089,-7.88445 -0.26727,-5.47902 0.4009,-6.94902 5.07812,-3.60815 -1.33635,-6.01355 -6.61088,-4.82918 -6.61458,-1.13392 -1.88988,1.13392 -3.59077,5.48066 -7.55953,0.94493 -6.23661,1.7009 -1.13392,3.77976 z",LAND:20,FOREST:50,MOUNTAINS:20,CENTER:{x:130,y:316},NEIGHBOURS:[-1,8,11],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:11,PATH:"m 200.58578,287.64555 3.20723,4.67723 6.41447,5.47901 0.13363,5.47905 4.54359,1.06907 1.06908,7.88445 3.60814,8.95353 -3.60814,5.61266 -4.40995,-1.60361 -4.00904,-0.53454 -0.80181,4.00905 -3.47451,4.14266 -11.89349,-0.4009 -0.13363,-4.54358 2.80633,-1.73726 v -4.00904 l -5.7463,-0.4009 -1.60362,3.60815 -2.53906,4.94448 -6.01356,2.4054 -4.14268,-5.34537 1.73725,-5.21176 5.47903,-5.74631 0.13363,-5.34537 -4.54358,-3.74177 -5.47903,4.94448 -0.53453,7.34992 -2.13816,7.88445 -6.94901,-2.80633 -5.74629,1.73725 -8.01809,-3.47451 -1.73725,-6.28083 1.87089,-7.88445 -0.26727,-5.47902 0.4009,-6.94902 5.07812,-3.60815 -1.33635,-6.01355 -6.61088,-4.82918 10.01637,-4.72469 6.99256,6.99257 8.84536,1.09132 5.61266,-0.66817 5.47903,3.8754 7.21627,1.73725 z",LAND:70,FOREST:20,MOUNTAINS:0,CENTER:{x:188,y:303},NEIGHBOURS:[-1,8,9,10],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:12,PATH:"m 263.52775,322.65786 0.26727,9.62171 -7.48355,5.3454 -1.06907,5.87992 3.74177,4.27632 h 7.7508 l 8.0181,6.94899 1.33635,6.68174 8.81989,2.40543 4.27633,-1.60361 10.4235,1.60361 1.33635,-4.2763 -6.94901,-5.87994 -0.53454,-5.87992 4.81084,2.40541 6.94901,0.53454 3.74177,-5.87992 -4.00902,-5.87994 -6.68176,-2.67269 4.54358,-5.07812 -1.87087,-7.75081 -9.08716,-2.67269 -5.07813,3.20723 -6.41447,-6.1472 -8.0181,0.8018 z",LAND:30,FOREST:60,MOUNTAINS:0,CENTER:{x:282,y:340},NEIGHBOURS:[-1],WEALTH:0,HARBOUR:!0,TROOPS:[]},{ID:13,PATH:"M 177.41392,87.905422 190.5,87.034226 l 15.11905,-5.669645 11.90625,0.944941 6.04761,5.858631 c -1.13392,0.377976 4.15774,-1.511905 4.15774,-1.511905 v -3.401785 l -6.99256,-7.9375 2.64583,-9.449403 h 6.04763 l -1.32292,-6.425597 -15.11905,-2.456844 -12.09524,-6.614583 -13.79613,3.023809 -7.18155,-8.882441 -9.82738,-4.157739 0.37798,-10.016368 -3.59077,-8.126488 -15.49703,-3.590774 -17.76488,13.040178 -0.37797,14.363097 1.32291,13.229166 9.76602,6.42525 2.53906,1.336347 4.00905,5.211752 -7.61719,5.479026 21.19488,15.545464 z",LAND:80,FOREST:40,MOUNTAINS:50,CENTER:{x:169,y:61},NEIGHBOURS:[-1,0,1,15,14],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:14,PATH:"m 228.10863,59.441963 7.18154,-1.700892 5.10268,2.834822 6.4256,-2.456847 -5.10268,-6.236607 -6.99256,-4.535712 10.20536,-1.133931 7.55952,3.590775 2.07887,-6.047619 5.10268,-6.236607 -0.18899,-7.559524 -8.12649,-8.126488 -12.28422,-2.834821 0.56696,-7.181548 -16.06399,1.322917 -26.45833,-2.456846 -6.42559,-5.6696423 -15.875,3.2127975 -7.9375,13.9851188 3.59077,8.126488 -0.37798,10.016368 9.82738,4.157739 7.18155,8.882441 13.79613,-3.023809 12.09524,6.614583 z",LAND:50,FOREST:80,MOUNTAINS:0,CENTER:{x:210,y:32},NEIGHBOURS:[-1,13,15,16],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:15,PATH:"m 85.392611,29.730472 -0.536956,-8.275115 13.985118,-2.267858 9.449407,-5.291666 4.91369,-7.7485118 12.47321,0.9449405 V -4.0580357 l 12.6622,-2.0788691 12.85119,4.7247023 -0.94494,5.6696428 3.96875,2.8348214 6.80358,-3.779762 8.12648,2.2678572 5.66965,2.6458333 -7.9375,13.9851188 -15.49703,-3.590774 -17.76488,13.040178 -0.37797,14.363097 1.32291,13.229166 9.76602,6.42525 -10.55714,4.409943 -5.21176,-5.211752 -11.09169,3.073596 -11.22531,-10.156237 -13.497121,6.414465 1.336355,-12.294399 7.349906,-5.746295 -1.20271,-6.815372 -3.474505,-2.80633 -7.082639,2.405425 z",LAND:50,FOREST:60,MOUNTAINS:50,CENTER:{x:119,y:32},NEIGHBOURS:[1,7,13,14,16,17,18],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:16,PATH:"m 138.33928,-6.1369048 -1.13392,-15.6860122 14.93005,-5.102678 3.2128,5.291667 15.30804,-5.858632 5.29166,-7.9375 12.09524,5.10268 15.30804,-12.662204 13.79613,0.566965 5.10268,10.772322 4.34672,-0.377975 4.34673,-5.291667 4.7247,3.023809 -2.07887,8.315475 1.88988,10.583334 7.9375,12.0952374 -12.47321,9.4494048 -7.37054,6.9925598 -26.45833,-2.456846 -6.42559,-5.6696423 -15.875,3.2127975 -5.66965,-2.6458333 -8.12648,-2.2678572 -6.80358,3.779762 -3.96875,-2.8348214 0.94494,-5.6696428 z",LAND:30,FOREST:30,MOUNTAINS:10,CENTER:{x:194,y:-12},NEIGHBOURS:[-1,14,15,17,108],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:17,PATH:"m 121.38705,-45.729911 -13.47485,-20.883184 -10.016368,9.827382 -14.174107,2.078868 0.755951,8.882441 6.803573,3.96875 3.96875,11.339285 -5.669643,6.047619 0.755952,9.449405 6.614581,7.9374999 0.188989,8.8824402 6.236612,3.0238094 6.04762,-2.6458332 3.77976,3.9687499 12.47321,0.9449405 V -4.0580357 l 12.6622,-2.0788691 -1.13392,-15.6860122 1.96547,-11.320386 z",LAND:20,FOREST:60,MOUNTAINS:50,CENTER:{x:114,y:-21},NEIGHBOURS:[15,16,18,19,20,108],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:18,PATH:"M 0.75595238,29.581845 -3.7797618,20.888392 -13.418155,15.029762 -9.8273808,6.5252975 0.56696427,3.8794642 6.8035714,8.9821426 5.6696427,-1.6011906 l 5.6696433,-2.6458333 4.157738,3.40178565 11.339285,-7.55952375 4.157739,-7.181547 13.229166,-1.133929 7.181546,9.8273808 5.858632,-4.9136908 -2.456844,-5.291666 10.583333,2.267857 5.102677,6.9925592 6.614584,-10.3943452 13.229166,3.212798 6.614583,7.9374997 0.188989,8.8824404 6.23661,3.0238094 6.04762,-2.6458332 3.77976,3.9687499 -4.91369,7.7485118 -9.449407,5.291666 -13.985118,2.267858 0.536956,8.275115 L 69.222807,29.596836 58.799295,23.716908 44.767645,28.260489 39.02135,26.790507 34.611402,23.316003 29.800552,33.60588 19.91158,32.002264 6.8153729,34.674958 Z",LAND:20,FOREST:80,MOUNTAINS:30,CENTER:{x:48,y:7},NEIGHBOURS:[7,15,17,19,22,106],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:19,PATH:"m 30.994048,-15.586309 -9.638393,-5.858632 -3.02381,-8.598956 -5.386161,-0.472472 2.173363,-3.590774 4.724703,-1.228421 0.377976,-6.331103 4.252232,-7.559522 5.669642,1.41741 7.087055,-1.795388 7.654018,-4.346726 4.630208,3.779763 7.559524,-1.417412 4.157737,-3.779761 3.685267,3.496281 1.228424,5.38616 3.401784,-0.850448 3.02381,-5.008184 4.535715,-2.267857 6.614583,-0.09449 0.755949,8.882441 6.803575,3.96875 3.96875,11.339285 -5.669645,6.047619 0.755954,9.449405 -13.229166,-3.212798 -6.614584,10.3943452 -5.102677,-6.9925592 -10.583333,-2.267857 2.456844,5.291666 -5.858632,4.9136908 -7.181546,-9.8273808 z",LAND:20,FOREST:60,MOUNTAINS:40,CENTER:{x:54,y:-32},NEIGHBOURS:[17,18,20,21,22],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:20,PATH:"m 109.80208,-78.519342 -8.23966,-5.473369 -4.543584,-9.354434 -10.557144,-1.469982 -10.557148,5.078121 -3.340867,6.68174 -11.49259,-0.668176 -4.276312,-7.082642 -13.096208,-0.400904 -7.082642,7.349913 -3.608139,6.681737 -13.363476,-5.078122 -8.018086,8.819896 -2.5390601,9.755339 -10.02260723,6.280832 3.47450383,7.082642 8.8198945,3.207234 8.862771,5.44285 4.252232,-7.559522 5.669642,1.41741 7.087055,-1.795388 7.654018,-4.346726 4.630208,3.779763 7.559524,-1.417412 4.157737,-3.779761 3.685267,3.496281 1.228424,5.38616 3.401784,-0.850448 3.02381,-5.008184 4.535715,-2.267857 6.614583,-0.09449 14.174104,-2.078874 10.016371,-9.827382 z",LAND:20,FOREST:40,MOUNTAINS:20,CENTER:{x:53,y:-68},NEIGHBOURS:[-1,17,19,21,33,108],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:21,PATH:"m -12.428033,-35.483294 -4.944486,-3.340867 -7.216277,0.400904 -4.409947,-4.142676 -1.603618,-7.082645 3.207234,-4.81085 7.884452,-2.672696 8.953529,3.608139 3.8754078,-4.81085 5.74629489,0.935442 3.47450381,7.082642 8.8198945,3.207234 8.862771,5.44285 -0.377976,6.331103 -4.724703,1.228421 -2.173363,3.590774 -8.1348325,-0.02244 -7.884451,5.61266 -4.8108512,-3.60814 0.5345388,-5.211754 z",LAND:10,FOREST:10,MOUNTAINS:20,CENTER:{x:-4,y:-42},NEIGHBOURS:[19,20,22,31,32,33],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:22,PATH:"m 12.945684,-30.516369 -8.1348325,-0.02244 -7.884451,5.61266 -4.8108514,-3.60814 0.534539,-5.211754 -5.0781211,-1.737252 -3.340869,5.61266 0.400904,6.280834 -13.22984,0.133635 -5.345391,5.34539 -9.621702,0.400904 -12.160766,5.345391 -3.741772,6.5481032 0.668174,7.7508163 -4.009044,5.2117558 -7.082641,2.0045214 3.608138,2.9399643 11.091685,6.548104 3.608139,9.888971 8.285356,-0.534537 6.414468,3.608138 6.815373,-0.53454 -0.400905,8.285356 9.354434,3.207234 3.727387,7.811127 6.425596,-6.236608 6.8035709,-3.212798 -0.7559524,-7.9375 5.66964288,-3.401785 -4.53571418,-8.693453 -9.6383932,-5.85863 3.5907742,-8.5044645 10.39434507,-2.6458333 6.23660713,5.1026782 -1.1339287,-10.583333 5.6696433,-2.6458333 4.157738,3.40178565 11.339285,-7.55952375 4.157739,-7.181547 -9.638393,-5.858632 -3.02381,-8.598956 z",LAND:30,FOREST:50,MOUNTAINS:20,CENTER:{x:-25,y:2},NEIGHBOURS:[18,19,21,23,30,31,106],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:23,PATH:"m -17.386905,50.370536 -3.727387,-7.811127 -9.354434,-3.207234 0.400905,-8.285356 -6.815373,0.53454 -6.414468,-3.608138 -8.285356,0.534537 -3.608139,-9.888971 -11.091685,-6.548104 -12.828936,3.34087 -8.151723,7.617181 -0.801806,10.690781 -8.285356,2.405425 1.069078,6.013564 -11.893495,6.414468 2.27179,2.672697 6.414471,-0.801809 -2.672701,8.953529 -5.21175,6.548104 8.819893,9.087164 3.059332,6.331924 6.614581,-0.755954 5.858634,-10.961307 3.779758,-11.150298 10.016371,2.645833 14.174108,-0.566962 8.504462,8.126487 14.363096,-1.700893 13.418154,-7.181548 z",LAND:30,FOREST:80,MOUNTAINS:0,CENTER:{x:-62,y:44},NEIGHBOURS:[22,24,28,29,30,106],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:24,PATH:"m -91.848214,135.22619 -10.016366,-6.80357 -2.26786,-8.50447 -10.58333,-7.9375 6.2366,-7.9375 12.851195,2.64584 8.504465,-10.583337 -6.992561,-7.74851 -0.377976,-6.992562 6.614583,-0.755952 5.858632,-10.961309 3.77976,-11.150298 10.016371,2.645833 14.174108,-0.566962 8.504462,8.126487 14.363096,-1.700893 -7.181548,7.748511 -2.267857,12.662204 1.889881,10.77232 -9.449405,5.858628 -4.157737,8.50447 5.669642,7.37053 -7.937499,7.18155 -3.212799,6.23661 -4.724701,3.40178 -13.607143,-3.59077 -9.07143,3.59077 z",LAND:40,FOREST:90,MOUNTAINS:40,CENTER:{x:-68,y:97},NEIGHBOURS:[23,25,26,28,106,109],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:25,PATH:"m -11.22532,183.67772 -14.855037,-2.33844 -17.197917,2.26786 -3.023809,-6.04762 5.669643,-3.96875 -7.370535,-6.61458 -12.851191,-1.51191 -1.889882,-10.39434 5.858632,-4.34673 4.157739,-11.52827 -5.10268,-5.85863 3.212799,-6.23661 7.937499,-7.18155 9.827382,-1.70089 0.755952,-7.37053 10.016368,-1.7009 7.90603,-9.12347 9.3544327,9.48806 -4.0090427,7.88446 12.69530229,11.62622 6.41446861,17.90706 -14.9670935,3.74177 6.2808339,12.02713 2.00452142,12.6953 z",LAND:30,FOREST:80,MOUNTAINS:20,CENTER:{x:-29,y:146},NEIGHBOURS:[-1,5,6,24,26,106],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:26,PATH:"m -60.854166,165.46428 -11.528274,8.31548 -4.913691,12.47321 -4.724701,13.04018 -16.063989,0.75595 -14.174109,4.72471 -9.63839,-5.85863 -2.83482,-9.6384 -8.50447,-11.52827 1.32292,-5.85863 0.56697,-10.96131 10.01636,-8.12649 16.63096,-3.40178 -1.13393,-8.12649 4.34672,1.13393 2.834826,4.53571 3.96875,2.83482 3.590774,-6.61458 -0.755954,-7.9375 6.614583,1.5119 9.07143,-3.59077 13.607143,3.59077 4.724701,-3.40178 5.10268,5.85863 -4.157739,11.52827 -5.858632,4.34673 z",LAND:30,FOREST:60,MOUNTAINS:30,CENTER:{x:-96,y:170},NEIGHBOURS:[-1,24,25,27,109],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:27,PATH:"m -133.23661,177.74851 -6.14445,7.53282 0.93545,7.75082 1.87088,10.15624 -4.54358,9.75534 -8.95353,-3.60814 0.26727,-6.1472 -3.87541,-5.74629 2.13816,-5.61266 -5.34539,0.4009 -5.07812,6.41447 -0.13364,6.54811 -8.68626,-2.53906 -8.01808,1.60361 -4.14268,-6.28083 2.6727,-5.61266 -6.28084,-0.93545 -3.87541,-7.88445 6.1472,-4.27631 4.00905,-9.2208 h 7.08264 l 2.40542,-7.61718 -1.73725,-4.27631 7.48355,-0.80181 3.60814,4.40995 1.73725,5.34539 6.41447,-8.95353 11.22532,-0.53454 2.93996,5.21176 7.76707,-1.90213 -0.56697,10.96131 z",LAND:20,FOREST:60,MOUNTAINS:0,CENTER:{x:-158,y:180},NEIGHBOURS:[-1,26,39,40,109],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:28,PATH:"m -180.86161,118.40625 0.75596,-10.20536 10.20535,-6.99256 -4.53571,-5.480652 10.96131,1.511903 5.48065,-0.944938 3.59078,-11.150299 16.81994,2.456844 5.29167,-8.693451 -3.96875,-3.96875 1.5119,-3.401785 8.12649,3.401785 6.42559,-1.700893 -0.18899,-8.88244 5.29167,4.157739 8.72048,-2.5679 8.819893,9.087162 3.059332,6.331926 0.377976,6.992562 6.992559,7.748508 -8.504465,10.583339 -12.851195,-2.64584 -6.2366,7.9375 10.58333,7.9375 -9.54722,7.96695 -7.27652,2.27925 -4.4037,-4.96972 -0.28353,-14.18749 -10.61059,6.01356 -1.6838,7.64391 -6.21548,5.63935 -11.19493,3.03235 -8.12649,-7.74851 -11.33929,4.15773 z",LAND:10,FOREST:60,MOUNTAINS:50,CENTER:{x:-130,y:100},NEIGHBOURS:[23,24,29,38,39,109],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:29,PATH:"m -154.40327,85.144342 -7.18155,-7.748511 2.26786,-8.315476 -10.96131,-9.449403 -1.88988,-13.04018 3.77976,-9.071427 6.61458,-8.693452 -2.07887,-9.071429 11.33929,6.236607 11.71726,0.377976 6.99256,-7.9375 -2.64583,-7.370536 10.58333,3.212798 6.23661,11.90625 10.77232,3.401786 10.205356,-5.669643 11.388283,-0.863468 -0.801804,10.690781 -8.285358,2.405425 1.069078,6.013564 -11.893495,6.414468 2.27179,2.672697 6.414471,-0.801809 -2.672701,8.953529 -5.21175,6.548104 -8.72048,2.5679 -5.29167,-4.157739 0.18899,8.882438 -6.42559,1.700895 -8.12649,-3.401785 -1.5119,3.401785 3.96875,3.96875 -5.29167,8.693449 z",LAND:30,FOREST:80,MOUNTAINS:20,CENTER:{x:-140,y:51},NEIGHBOURS:[23,28,30,37,38,107],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:30,PATH:"m -59.467469,-5.8163777 -9.220798,-5.8799263 -12.294399,1.603617 -1.603618,-9.087164 4.009043,-4.009043 -6.147199,-2.939964 -7.750815,7.216276 -12.027135,-3.474503 -3.20723,-8.285357 -13.63075,7.483548 -3.20723,8.552625 -15.7689,4.8108514 1.60362,11.7598591 6.94901,4.0090428 -4.68553,5.1175267 10.58333,3.212798 6.23661,11.90625 10.77232,3.401786 10.205356,-5.669643 11.388283,-0.863468 8.151723,-7.617181 12.828936,-3.34087 -3.608138,-2.9399675 7.082641,-2.0045214 4.009044,-5.2117556 z",LAND:30,FOREST:50,MOUNTAINS:0,CENTER:{x:-104,y:-2},NEIGHBOURS:[22,23,29,31,32,36,37],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:31,PATH:"m -84.72444,-26.128858 13.630746,-4.276312 4.276312,-8.285356 -1.603616,-4.810852 5.34539,-1.870887 0.80181,8.018086 4.543581,0.267269 4.810852,-9.354434 22.317004,-3.207234 1.603618,7.082645 4.409947,4.142676 7.216277,-0.400904 4.944486,3.340867 -3.340869,5.612659 0.400904,6.280834 -13.22984,0.133635 -5.345391,5.34539 -9.621702,0.400904 -12.160766,5.345391 -3.741772,6.5481033 -9.220798,-5.8799263 -12.294399,1.603617 -1.603618,-9.087164 4.009043,-4.009043 z",LAND:20,FOREST:60,MOUNTAINS:50,CENTER:{x:-50,y:-28},NEIGHBOURS:[21,22,30,32],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:32,PATH:"m -64.946495,-102.83521 -1.069078,10.42351 -9.888971,5.879928 -5.34539,11.49259 -9.621705,1.336347 -2.138157,8.552627 6.414471,-0.801809 5.879928,3.474503 -2.939965,8.285355 -2.939963,12.561668 -10.156242,-1.870887 -3.207235,8.552624 -7.750818,4.276312 3.20723,8.285357 12.027137,3.474503 7.750813,-7.216276 13.630746,-4.276312 4.276312,-8.285356 -1.603616,-4.810852 5.34539,-1.870887 0.80181,8.018086 4.543581,0.267269 4.810852,-9.354434 22.317004,-3.207234 3.207234,-4.81085 7.884452,-2.672696 8.953529,3.608139 -3.427973,-6.663516 4.1577382,-10.583333 4.5357142,-7.559521 -6.9925594,-6.614581 -5.102679,-1.322919 -9.072777,-2.402073 -15.234365,0.267269 -12.561667,-1.603616 z",LAND:20,FOREST:40,MOUNTAINS:90,CENTER:{x:-57,y:-64},NEIGHBOURS:[21,30,31,33,34,35,36,52],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:33,PATH:"m 56.794775,-90.808084 0.846593,-10.200846 11.339287,-10.01637 -9.092728,-8.51199 -10.075318,-5.00147 -5.635252,-10.79329 -7.313215,1.72579 -1.716291,5.14658 -4.468898,3.86557 -14.384054,0.56892 -4.199661,-7.69708 -6.5002804,4.10109 -3.9743132,9.24176 -7.6666341,4.15346 0.6681736,7.75293 -7.1898919,3.9522 -4.819197,16.252975 5.102679,1.322917 6.9925594,6.614583 -4.5357142,7.559521 -4.1577382,10.583333 3.427973,6.663516 3.8754078,-4.81085 5.74629489,0.935442 10.02260701,-6.280832 2.5390603,-9.755339 8.018086,-8.819896 13.363476,5.078122 3.608139,-6.681737 7.082642,-7.349911 z",LAND:30,FOREST:50,MOUNTAINS:70,CENTER:{x:20,y:-101},NEIGHBOURS:[-1,20,21,32,34],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:34,PATH:"m 5.5949574,-127.62118 -12.8112346,-9.42453 -4.8108518,-9.6217 -10.95805,-2.6727 -5.879928,-10.42351 -9.354434,5.34539 -9.087165,9.88897 -16.83798,-4.00904 -5.612659,7.75082 9.888972,14.43255 2.672696,14.96709 -7.750818,8.55263 10.690781,12.828935 12.561667,1.603616 15.234365,-0.267269 9.072777,2.402073 4.819197,-16.252975 7.189892,-3.9522 -0.6681737,-7.75293 7.6666341,-4.15346 z",LAND:30,FOREST:60,MOUNTAINS:50,CENTER:{x:-34,y:-117},NEIGHBOURS:[-1,32,33,35],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:35,PATH:"m -69.757345,-140.78748 -4.276315,-2.53906 -8.819893,1.46998 -4.142676,8.68626 -7.216278,0.53454 -2.004523,4.94448 -9.88897,1.87089 1.06908,6.28083 7.349908,7.34992 -1.870885,8.81989 7.349911,6.280834 3.741774,8.552624 6.414468,3.207234 0.801812,10.289876 5.345388,-11.49259 9.888971,-5.879928 1.069078,-10.42351 7.750818,-8.55263 -2.672696,-14.96709 z",LAND:20,FOREST:10,MOUNTAINS:20,CENTER:{x:-81,y:-112},NEIGHBOURS:[-1,32,34,52,53],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:36,PATH:"m -121.34037,-23.188894 -6.949,-5.879929 -1.06908,-12.561668 -8.28535,-0.267269 -4.54359,5.34539 -5.61266,-10.423511 5.34539,-10.156243 12.2944,-4.81085 -4.27631,-8.285355 0.53454,-16.570712 4.27631,4.009044 1.87089,5.879928 6.68174,5.078121 9.35443,-4.81085 6.94901,4.009041 3.20723,-7.483546 10.690783,6.414468 -2.138159,8.552627 6.414471,-0.801809 5.879928,3.474503 -2.939965,8.285355 -2.939963,12.561668 -10.15624,-1.870887 -3.207237,8.552624 -7.750818,4.276312 z",LAND:20,FOREST:60,MOUNTAINS:10,CENTER:{x:-114,y:-52},NEIGHBOURS:[30,32,37,50,51,52],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:37,PATH:"m -192.57887,9.1711303 7.37054,2e-7 4.53571,-4.9136905 7.9375,2.8348215 5.29167,3.5907735 5.85863,-3.4017854 5.48066,0.9449403 3.96875,-7.37053545 -6.23661,-5.66964285 -2.07887,-5.2916666 6.42559,0.3779764 4.91369,-3.7797624 -0.18898,-6.236607 h 7.55952 l 6.23661,-3.212797 1.70089,-5.480656 5.5142,-0.631322 6.949,5.879929 -3.20723,8.552625 -15.7689,4.8108514 1.60362,11.7598591 6.94901,4.0090428 -4.68553,5.1175267 2.64583,7.370536 -6.99256,7.9375 -11.71726,-0.377976 -11.33929,-6.236607 -16.28698,1.423383 -20.31248,-8.552624 7.30631,-0.241295 z",LAND:10,FOREST:30,MOUNTAINS:10,CENTER:{x:-146,y:10},NEIGHBOURS:[29,30,36,48,49,50,107],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:38,PATH:"m -210.91071,87.979162 -16.80293,-8.536559 5.3454,-13.898015 17.35916,-9.795427 17.53764,3.566014 15.30329,-12.724403 1.88988,13.04018 10.96131,9.449403 -2.26786,8.315476 7.18155,7.748511 -3.59078,11.150301 -5.48065,0.944938 -10.96131,-1.511903 4.53571,5.480652 -10.20535,6.99256 -12.66221,-5.85863 -3.0238,-12.095238 -10.20536,-10.961309 z",LAND:30,FOREST:60,MOUNTAINS:0,CENTER:{x:-183,y:80},NEIGHBOURS:[-2,28,29,47,107],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:39,PATH:"m -249.46428,177.74851 0.75595,-13.41816 16.06399,-11.33928 -5.10268,-10.01637 -5.85863,-12.09524 17.19791,-4.53571 2.64584,-7.74851 -6.4256,-8.12649 6.23661,-2.26786 6.99256,7.9375 -1.51191,12.47321 13.41816,-6.42559 7.55952,-10.58333 16.63095,6.80357 6.04762,11.33928 11.33929,-4.15773 8.12649,7.74851 -3.02381,14.74107 5.09295,10.0761 -6.41447,8.95353 -1.73725,-5.34539 -3.60814,-4.40995 -7.48355,0.80181 1.73725,4.27631 -2.40542,7.61718 h -7.08264 l -4.00905,9.2208 -6.1472,4.27631 -13.29962,-11.84314 -0.18899,8.50441 -14.74107,1.32297 -12.66221,-7.18155 0.56697,9.82733 -13.60714,7.9375 z",LAND:20,FOREST:100,MOUNTAINS:50,CENTER:{x:-202,y:151},NEIGHBOURS:[-2,27,28,40,41,109],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:40,PATH:"m -182.94599,197.97664 -6.23109,10.57693 5.85863,10.20536 -14.93006,0.18898 -2.91317,-7.67206 -6.15826,-0.0764 -4.7247,6.4256 5.48065,10.20535 -3.21279,10.39435 -8.88244,6.99256 -5.66965,2.45684 -4.34672,-3.59077 -9.82738,-4.53571 1.13392,-13.60715 6.61459,-9.26041 -0.94494,-6.61459 -6.12787,-0.5266 -9.93612,6.76321 -4.15774,10.96131 -7.35164,10.34705 -1.33945,-7.70599 0.5646,-10.76755 -2.06955,-10.52743 6.53439,-10.09117 11.22118,-6.4067 13.60714,-7.9375 -0.56697,-9.82738 12.66221,7.18155 14.74107,-1.32292 0.18899,-8.50446 13.29962,11.84314 3.87541,7.8845 6.28084,0.93545 z",LAND:30,FOREST:60,MOUNTAINS:0,CENTER:{x:-220,y:202},NEIGHBOURS:[-1,27,39,41],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:41,PATH:"m -260.61222,229.9045 -16.25534,-4.53099 0.56697,9.63839 -25.13541,3.40179 -11.71726,-3.02381 -4.72472,-13.98512 4.91371,-13.79613 -8.31548,-13.98512 6.61458,-10.39435 14.1741,4.91369 7.9375,-11.33928 12.28423,-7.55953 2.07886,-11.33928 13.60715,5.10268 0.18899,11.1503 14.93006,3.59077 5.10268,14.36309 -11.22118,6.40675 -6.53439,10.09117 2.06955,10.52738 z",LAND:20,FOREST:60,MOUNTAINS:10,CENTER:{x:-283,y:201},NEIGHBOURS:[-1,-2,39,40,42,43],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:42,PATH:"m -317.87798,221.40476 -5.25087,-3.51654 -10.15624,5.07812 1.60361,10.15624 -5.3454,5.61266 -12.56165,3.74177 -10.42352,-6.949 2.67268,-9.88898 -8.28534,-6.41447 1.33635,-8.28535 7.48356,-9.6217 -3.47451,-8.01809 11.75986,-2.93996 10.15624,-2.13816 6.41445,-8.01809 5.3454,4.00905 11.93819,-0.9831 -6.61458,10.39435 8.31548,13.98512 z",LAND:10,FOREST:60,MOUNTAINS:20,CENTER:{x:-340,y:210},NEIGHBOURS:[-1,41,43,44,65],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:43,PATH:"m -314.66517,183.22916 -11.93819,0.9831 -5.3454,-4.00905 -8.5526,-0.8018 1.60361,-12.02713 -4.27633,-10.15625 7.48356,0.26728 8.28534,8.81989 -1.33633,-10.15624 -7.48355,-9.35444 5.61266,-6.68173 5.87994,1.33634 -4.54358,-11.75986 14.79986,-0.88868 4.15774,12.47322 19.65476,3.77976 12.4732,12.85119 -2.07886,11.33928 -12.28423,7.55953 -7.9375,11.33928 z",LAND:20,FOREST:60,MOUNTAINS:0,CENTER:{x:-308,y:163},NEIGHBOURS:[-2,41,42,44,45],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:44,PATH:"m -339.69957,130.22381 -10.4235,1.60362 -3.74179,7.75082 -8.01806,5.07812 -5.87994,15.50163 8.28534,7.75082 -4.54358,12.56166 -11.49257,7.75082 2.4054,12.2944 8.81991,10.42351 7.48356,-9.6217 -3.47451,-8.01809 21.9161,-5.07812 6.41445,-8.01809 -8.5526,-0.8018 1.60361,-12.02713 -4.27633,-10.15625 7.48356,0.26728 8.28534,8.81989 -1.33633,-10.15624 -7.48355,-9.35444 5.61266,-6.68173 5.87994,1.33634 -4.54358,-11.75986 -4.27633,4.00905 z",LAND:20,FOREST:40,MOUNTAINS:10,CENTER:{x:-351,y:162},NEIGHBOURS:[42,43,45,63,64,65],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:45,PATH:"m -320.45616,56.190154 -13.89801,2.405425 -12.82895,-2.672693 -0.53454,10.958049 -10.4235,12.561668 11.75986,3.207234 -2.40544,13.630746 8.0181,15.768897 8.55263,1.87089 -7.48356,16.30344 6.1472,3.47451 4.27633,-4.00905 14.79986,-0.88868 8.31546,-15.11904 -14.36309,-25.324407 12.85121,-1.13393 -14.11992,-9.116957 -4.00904,-12.561668 z",LAND:20,FOREST:50,MOUNTAINS:0,CENTER:{x:-330,y:97},NEIGHBOURS:[-2,43,44,46,62,63],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:46,PATH:"m -307.6726,87.223213 -14.11992,-9.116957 -4.00904,-12.561668 5.3454,-9.354434 -1.33636,-14.699823 -10.69078,-1.336347 -2.67269,-8.552625 6.41448,-2.138156 19.24341,-3.207235 8.81989,4.810851 13.63075,-10.69078 17.37251,-4.810852 14.16529,4.009043 9.35443,-0.534539 11.75986,-5.61266 10.95805,7.750816 -8.55263,15.501634 -7.21627,-1.870888 -8.8199,-6.147199 -6.41447,9.087165 1.60362,9.888971 -12.56167,0.267269 -10.95804,-4.009043 -8.01809,2.405427 1.60361,11.225318 7.75081,13.898018 -17.90705,7.483546 0.75181,9.827051 z",LAND:30,FOREST:60,MOUNTAINS:80,CENTER:{x:-286,y:38},NEIGHBOURS:[-2,45,47,48,60,61,62],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:47,PATH:"m -292.17559,88.735116 -0.75181,-9.827051 17.90705,-7.483546 -7.75081,-13.898018 -1.60361,-11.225318 8.01809,-2.405427 10.95804,4.009043 12.56167,-0.267269 -1.60362,-9.888971 6.41447,-9.087165 8.8199,6.147199 7.21627,1.870888 8.55263,9.621702 1.06908,19.243405 -5.3454,13.898015 16.80293,8.536559 -21.92262,5.291669 h -15.875 l -9.07143,17.008929 -19.65475,-1.88988 -10.96132,-9.071428 z",LAND:10,FOREST:60,MOUNTAINS:50,CENTER:{x:-254,y:73},NEIGHBOURS:[-2,38,46,107],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:48,PATH:"m -234.39537,13.427031 1.18406,-11.2484599 -5.66964,-8.5044643 3.77976,-9.4494048 4.15774,2.834822 3.2128,-7.9375 -6.23661,-6.99256 2.83482,-9.071427 13.41816,-4.535715 11.52827,7.9375 2.07887,12.473214 8.50446,0.755952 3.02381,6.992559 -0.37797,12.47321459 -5.48066,2.45684521 5.85863,7.5595237 -0.56696,3.2127975 -7.30631,0.241295 -22.98518,8.552624 z",LAND:20,FOREST:60,MOUNTAINS:0,CENTER:{x:-216,y:-3},NEIGHBOURS:[-3,37,46,49,60,107],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:49,PATH:"m -149.11161,-13.507441 -8.69345,-3.96875 1.32292,-8.504464 -9.07143,-3.968749 -7.37054,4.157737 -2.64583,-5.85863 -7.18155,-5.669642 -7.74851,0.377976 -5.66964,-6.425597 -7.37054,3.023809 -2.64583,6.803573 2.07887,12.473214 8.50446,0.755952 3.02381,6.992559 -0.37797,12.47321459 -5.48066,2.45684521 5.85863,7.5595235 h 7.37054 l 4.53571,-4.9136903 7.9375,2.8348215 5.29167,3.5907735 5.85863,-3.4017854 5.48066,0.9449401 3.96875,-7.37053525 -6.23661,-5.66964285 -2.07887,-5.2916666 6.42559,0.3779766 z",LAND:20,FOREST:40,MOUNTAINS:0,CENTER:{x:-177,y:-11},NEIGHBOURS:[-3,37,48,50],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:50,PATH:"m -178.02678,-53.572917 8.12648,-2.078869 3.2128,-7.181548 -5.10268,-9.260416 6.99256,0.94494 4.34673,3.590775 3.40178,-5.858632 -3.77976,-4.724702 7.9375,-2.078868 9.6384,0.944941 1.70089,7.370535 7.11551,1.676434 4.27631,8.285353 -12.2944,4.81085 -5.34539,10.156243 5.61266,10.423511 4.54359,-5.34539 8.28535,0.267269 1.06908,12.561668 -5.5142,0.631322 -1.70089,5.480656 -6.23661,3.212797 h -7.55952 l 0.18898,6.236607 -8.69345,-3.96875 1.32292,-8.504464 -9.07143,-3.968749 -0.56696,-6.425597 -10.39435,-1.322917 1.32292,-7.370534 z",LAND:30,FOREST:60,MOUNTAINS:0,CENTER:{x:-159,y:-47},NEIGHBOURS:[-3,36,37,49,51],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:51,PATH:"m -188.23214,-70.581845 4.61798,-8.199109 7.75081,-0.801809 -3.4745,-8.018087 9.88897,-3.474503 -7.21627,-6.147199 3.20723,-2.405425 2.67269,2.405425 5.87993,-1.069078 -0.53454,-6.1472 5.87993,-1.33635 3.47451,-3.74177 8.81989,1.46998 6.28084,4.54359 -3.74178,2.67269 4.54358,5.07812 8.8199,-2.806326 6.81537,1.336346 1.60362,4.27631 4.00904,-1.603616 5.07812,4.409948 -3.34087,3.073601 5.7463,5.612659 -0.26727,4.81085 -9.35443,4.81085 -6.68174,-5.078121 -1.87089,-5.879928 -4.27631,-4.009044 -0.53454,16.570714 -7.11551,-1.676434 -1.70089,-7.370535 -9.6384,-0.944941 -7.9375,2.078868 3.77976,4.724702 -3.40178,5.858632 -4.34673,-3.590775 -6.99256,-0.944938 5.10268,9.260414 -3.2128,7.181548 -8.12648,2.078869 -8.12649,-9.638393 z",LAND:10,FOREST:30,MOUNTAINS:50,CENTER:{x:-153,y:-90},NEIGHBOURS:[-3,36,50,52,55,56],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:52,PATH:"m -111.71866,-76.642798 0.26727,-4.810852 -5.7463,-5.612659 3.34087,-3.073601 -5.07812,-4.409946 -4.00904,1.603616 -1.60362,-4.276312 2.93997,-5.879928 -2.53906,-4.40995 4.67721,-2.13815 1.60362,-5.21176 4.40995,-4.81085 8.41899,0.13363 7.34991,7.34992 -1.870887,8.81989 7.349913,6.280836 3.741772,8.552622 6.414468,3.207234 0.801812,10.289876 -9.621705,1.336347 -10.690783,-6.414466 -3.20723,7.483544 z",LAND:10,FOREST:20,MOUNTAINS:10,CENTER:{x:-107,y:-93},NEIGHBOURS:[35,36,51,53,55],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:53,PATH:"m -82.853553,-141.85656 -4.810852,-2.27179 -0.400902,-7.48355 -4.409948,-3.20723 -10.824415,-0.13364 -4.00904,4.94449 -6.01357,-1.20271 0.53454,-7.88446 -4.94449,0.40091 -9.88897,2.27179 -0.4009,7.21628 -4.67722,5.74629 3.60814,5.34539 7.34991,3.20723 -0.26727,7.88446 2.00452,6.28083 -2.00452,5.7463 4.14268,0.13363 4.40995,-4.81085 8.41899,0.13363 -1.06908,-6.28083 9.88897,-1.87089 2.004523,-4.94448 7.216278,-0.53454 z",LAND:10,FOREST:10,MOUNTAINS:10,CENTER:{x:-111,y:-137},NEIGHBOURS:[-1,35,52,54,55],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:54,PATH:"m -158.08992,-140.25295 -6.94901,-1.60361 -3.20724,-3.34087 -6.68173,-1.06908 -2.00453,-3.87541 -0.26727,-2.27179 2.53907,-5.74629 11.35895,-3.20724 6.5481,4.67722 7.34992,-3.74178 5.34539,3.07361 2.53906,3.74177 6.5481,-4.27631 7.34991,1.46998 -0.4009,7.21628 -4.67722,5.74629 -0.80181,4.81085 -4.14267,0.93545 -7.61719,-0.80181 -4.54358,-4.67722 z",LAND:10,FOREST:10,MOUNTAINS:0,CENTER:{x:-153,y:-150},NEIGHBOURS:[-1,53,55,56],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:55,PATH:"m -124.5476,-97.22255 -6.81537,-1.336349 -8.8199,2.806329 -4.54358,-5.07812 3.74178,-2.67269 -6.28084,-4.54359 -0.53454,-6.949 -8.28535,-2.13816 -4.00904,-5.47903 3.8754,-5.21175 -4.40994,-5.21176 2.53906,-7.21628 8.28535,-2.93996 4.54358,4.67722 7.61719,0.80181 4.14267,-0.93545 0.80181,-4.81085 3.60814,5.34539 7.34991,3.20723 -0.26727,7.88446 2.00452,6.28083 -2.00452,5.7463 4.14268,0.13363 -1.60362,5.21176 -4.67721,2.13815 2.53906,4.40995 z",LAND:10,FOREST:20,MOUNTAINS:0,CENTER:{x:-136,y:-119},NEIGHBOURS:[51,52,53,54,56],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:56,PATH:"m -174.9279,-146.26651 -8.57954,-0.28855 -7.37053,-6.80357 2.64583,-6.04762 -12.47321,0.37798 -7.37054,8.69345 -9.44941,3.40179 -8.12648,7.37053 6.2366,8.12649 8.12649,1.32292 -2.45684,6.61458 -11.52828,2.64583 1.13393,7.37054 -1.88988,10.96131 2.64583,10.016367 4.91369,1.511904 1.88989,10.205357 6.99255,1.511906 -2.07886,3.212798 6.42559,5.669643 17.00893,-0.18899 4.61798,-8.199109 7.75081,-0.801809 -3.4745,-8.018087 9.88897,-3.474503 -7.21627,-6.147197 3.20723,-2.405424 2.67269,2.405424 5.87993,-1.069078 -0.53454,-6.147202 5.87993,-1.33635 3.47451,-3.74177 8.81989,1.46998 -0.53454,-6.949 -8.28535,-2.13816 -4.00904,-5.47903 3.8754,-5.21175 -4.40994,-5.21176 2.53906,-7.21628 -6.94901,-1.60361 -3.20724,-3.34087 z",LAND:10,FOREST:80,MOUNTAINS:40,CENTER:{x:-192,y:-118},NEIGHBOURS:[-1,-3,51,54,55,57,58],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:57,PATH:"m -225.65178,-139.5625 -6.99256,0.94494 -4.15774,-5.29167 1.13393,-5.10267 -4.34673,-7.9375 -8.50446,-0.75596 -10.96131,3.96875 -6.80358,6.04762 3.40179,13.04018 -5.66964,4.7247 -4.53573,10.01637 7.55955,9.6384 9.26041,-1.32292 4.53571,8.69345 7.74851,4.15774 7.74851,-1.32292 5.10268,6.236611 3.2128,3.779761 4.53571,-2.456845 -2.64583,-10.016367 1.88988,-10.96131 -1.13393,-7.37054 11.52828,-2.64583 2.45684,-6.61458 -8.12649,-1.32292 z",LAND:30,FOREST:60,MOUNTAINS:50,CENTER:{x:-248,y:-125},NEIGHBOURS:[-1,56,58,75,76],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:58,PATH:"m -251.73214,-102.89881 -4.15774,4.535716 2.45685,4.913691 -2.26786,7.74851 -4.7247,4.724702 2.26785,6.614583 -4.34672,5.480656 -4.7247,0.755952 0.56697,3.212798 3.21279,2.456847 4.91369,0.566962 -1.32292,4.913691 6.23661,5.480656 6.42559,-4.724705 -4.7247,-7.74851 7.74851,-6.992559 17.76488,0.94494 14.74108,-6.047618 2.07886,-3.212798 -6.99255,-1.511906 -1.88989,-10.205355 -4.91369,-1.511906 -4.53571,2.456847 -8.31548,-10.016374 -7.74851,1.32292 z",LAND:30,FOREST:60,MOUNTAINS:20,CENTER:{x:-241,y:-84},NEIGHBOURS:[-3,56,57,59,75],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:59,PATH:"m -295.86737,-44.035916 0.66797,-5.568251 4.72471,-5.102678 0.37796,-7.181548 7.37055,0.377976 4.5357,-5.858629 0.94496,-6.425597 5.85861,-1.322917 5.66966,-4.346725 7.55951,5.102677 -4.34672,5.480656 -4.7247,0.755954 0.56697,3.212796 3.21279,2.456847 4.91369,0.566962 -1.32292,4.913691 6.23661,5.480656 6.42559,-4.724705 8.31548,1.511906 1.70089,3.96875 -11.15029,3.212799 -4.53572,7.74851 1.51191,7.559524 -7.9375,1.133928 -7.55952,5.291667 -13.98513,-1.322917 -0.86577,-5.963283 9.08716,2.405425 2.40544,-9.087162 -8.55263,-7.216277 -6.68174,-4.276312 z",LAND:10,FOREST:60,MOUNTAINS:0,CENTER:{x:-267,y:-50},NEIGHBOURS:[-3,58,60,61,74,75],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:60,PATH:"m -287.04746,20.376039 -7.77396,-7.614135 3.02382,-10.5833329 -6.23663,-1.1339286 -2.07886,-4.5357142 4.5357,-3.0238094 h 6.42562 l 6.2366,1.3229166 3.49628,-3.9687502 -7.27604,-6.6145833 -1.7009,-6.614583 7.55952,-4.724703 13.98513,1.322917 7.55952,-5.291667 7.9375,-1.133928 3.96875,2.456844 8.31547,-3.77976 h 2.83482 l 2.26786,5.669642 6.23661,6.99256 -3.2128,7.9375 -4.15774,-2.834822 -3.77976,9.4494048 5.66964,8.5044643 -1.18406,11.2484599 -11.75986,5.61266 -9.35443,0.534539 -14.16529,-4.009043 z",LAND:20,FOREST:60,MOUNTAINS:0,CENTER:{x:-262,y:-5},NEIGHBOURS:[-3,46,48,59,61],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:61,PATH:"m -336.22506,9.9525269 1.87089,-6.4144683 -6.14719,-7.216277 2.93994,-9.3544336 6.41448,-6.681738 -5.61266,-9.621702 2.40543,-10.156243 10.15625,-5.078121 10.69078,5.34539 7.21627,-9.087162 10.4235,4.276312 10.42352,-7.216277 6.68174,4.276312 8.55263,7.216277 -2.40544,9.087162 -9.08716,-2.405425 0.86577,5.963283 -7.55952,4.724703 1.7009,6.614583 7.27604,6.6145833 -3.49628,3.9687502 -6.2366,-1.3229166 h -6.42562 l -4.5357,3.0238094 2.07886,4.5357142 6.23663,1.1339286 -3.02382,10.5833329 7.77396,7.614135 -13.63075,10.69078 -8.81989,-4.810851 -6.41448,-9.354433 -12.56167,0.801808 z",LAND:30,FOREST:60,MOUNTAINS:0,CENTER:{x:-313,y:-14},NEIGHBOURS:[46,59,60,62,72,73,74],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:62,PATH:"m -395.36309,71.726189 -0.46307,-6.716139 9.08717,-6.949008 -2.13818,-9.087165 -9.35442,-8.285356 7.48355,-4.00904 8.01809,2.405425 8.28535,-0.534541 2.40543,-6.147196 5.34538,-8.819896 7.48355,-5.61266 7.75081,3.741773 4.27631,-4.276312 2.67271,-9.621703 8.28535,2.1381561 7.75081,7.7508159 12.56167,-0.801808 6.41448,9.354433 -19.24341,3.207235 -6.41448,2.138156 2.67269,8.552625 10.69078,1.336347 1.33636,14.699823 -13.89801,2.405425 -12.82895,-2.672693 -0.53454,10.958049 -15.51744,4.467278 -8.69347,5.291664 z",LAND:40,FOREST:50,MOUNTAINS:50,CENTER:{x:-355,y:44},NEIGHBOURS:[45,46,61,63,70,71,72],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:63,PATH:"m -361.88292,144.65637 -14.95933,1.53113 -10.20535,-6.80357 -6.80358,-11.33929 -19.65476,5.29167 -3.4018,-19.65476 9.44941,-6.4256 4.53573,4.91369 13.60712,-3.02381 2.26788,-10.205354 -9.44941,-15.119048 -11.3393,-4.535715 12.47322,-7.559524 23.43452,4.91369 8.69347,-5.291666 15.51744,-4.467278 -10.4235,12.561668 11.75986,3.207234 -2.40544,13.630746 8.0181,15.768897 8.55263,1.87089 -7.48356,16.30344 -10.4235,1.60362 -3.74179,7.75082 z",LAND:30,FOREST:100,MOUNTAINS:10,CENTER:{x:-370,y:112},NEIGHBOURS:[44,45,62,64,68,69],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:64,PATH:"m -408.65509,185.5486 -2.40543,-5.07812 7.48355,-5.34539 -2.67272,-6.68174 8.81992,-1.06907 3.20722,4.81085 5.34538,-2.6727 -3.20723,-6.41447 -5.07812,-2.13815 0.53454,-6.41447 5.61266,-2.6727 2.67271,-6.68173 1.29501,-5.80698 10.20535,6.80357 14.95933,-1.53113 -5.87994,15.50163 8.28534,7.75082 -4.54358,12.56166 -11.49257,7.75082 2.4054,12.2944 -15.7689,3.74177 -8.5526,-5.61266 -1.33636,-12.02713 z",LAND:10,FOREST:10,MOUNTAINS:40,CENTER:{x:-380,y:174},NEIGHBOURS:[44,63,65,67,68],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:65,PATH:"m -373.10827,200.5157 -15.7689,3.74177 -8.5526,-5.61266 -6.41448,-8.28535 -8.81989,12.56166 -9.6217,6.68174 -0.80182,13.63075 6.68173,10.95805 7.75084,4.54358 1.87087,-6.41447 -4.2763,-4.81085 9.35442,-0.80181 8.01809,4.81085 5.87994,-3.74177 3.74177,9.35443 6.14719,-5.34539 8.01809,-1.06908 12.56165,-5.07812 -8.28534,-6.41447 1.33635,-8.28535 z",LAND:10,FOREST:70,MOUNTAINS:0,CENTER:{x:-392,y:217},NEIGHBOURS:[-1,42,44,64,66,67],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:66,PATH:"m -408.65509,238.73524 -11.75988,4.81085 -2.40541,9.6217 -9.35445,9.35444 2.40543,11.22531 -4.81084,6.68174 -6.68176,2.40543 -11.22532,1.33636 -6.41445,-2.93997 1.33633,-4.54359 7.48356,-0.80182 6.94901,-2.67268 1.06908,-6.1472 -1.8709,-7.48355 -13.09621,1.06908 -6.94899,-4.27631 -5.87994,-14.16529 4.54358,-9.08716 5.07812,-8.55262 7.48356,4.81085 11.75985,0.80181 7.21628,-4.00905 10.69078,-2.93996 6.68173,10.95805 z",LAND:10,FOREST:50,MOUNTAINS:20,CENTER:{x:-444,y:246},NEIGHBOURS:[-1,65,67,90],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:67,PATH:"m -476.80882,228.31173 4.2763,-8.28536 -2.93997,-9.35443 9.35445,-4.00904 v -5.61266 l 4.54358,-8.55263 3.47449,2.6727 -2.13816,6.68174 1.60362,4.00904 9.08717,-4.81085 0.53453,-8.28536 8.81991,-6.949 10.69079,0.8018 6.68173,5.07812 6.41445,-5.61266 7.75084,-0.53454 9.88896,1.06908 1.33636,12.02713 -6.41448,-8.28535 -8.81989,12.56166 -9.6217,6.68174 -0.80182,13.63075 -10.69078,2.93996 -7.21628,4.00905 -11.75985,-0.80181 -7.48356,-4.81085 -5.07812,8.55262 z",LAND:20,FOREST:60,MOUNTAINS:20,CENTER:{x:-443,y:211},NEIGHBOURS:[64,65,66,68,89,90,91],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:68,PATH:"m -449.01281,192.76488 -4.36962,-7.07887 5.48066,-5.48066 -11.52829,-7.55952 -3.77976,-10.39434 16.06399,-4.15774 8.12649,-6.99256 3.40178,-8.88244 -2.45684,-6.99256 6.2366,-6.99256 8.50447,0.37797 -0.18899,-9.07142 -4.72469,-4.91369 5.29167,-1.13393 6.0476,0.18899 3.4018,19.65476 19.65476,-5.29167 6.80358,11.33929 -1.29501,5.80698 -2.67271,6.68173 -5.61266,2.6727 -0.53454,6.41447 5.07812,2.13815 3.20723,6.41447 -5.34538,2.6727 -3.20722,-4.81085 -8.81992,1.06907 2.67272,6.68174 -7.48355,5.34539 2.40543,5.07812 -7.75084,0.53454 -6.41445,5.61266 -6.68173,-5.07812 -10.69079,-0.8018 z",LAND:30,FOREST:50,MOUNTAINS:30,CENTER:{x:-423,y:160},NEIGHBOURS:[63,64,67,69,87,88,89],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:69,PATH:"m -430.78607,119.90506 -6.73414,-7.05377 2.13815,-8.55262 6.41448,-6.949009 -11.22532,-2.672694 -10.15624,5.345393 -1.60364,-7.750818 6.41448,-4.810853 -6.41448,-5.612659 7.2163,-7.483549 10.69078,-2.405425 -4.27633,-4.276312 5.07812,-9.621702 14.16529,4.009043 4.81087,10.423512 6.43144,6.792116 11.3393,4.535715 9.44941,15.119048 -2.26788,10.205354 -13.60712,3.02381 -4.53573,-4.91369 -9.44941,6.4256 -6.0476,-0.18899 -5.29167,1.13393 z",LAND:30,FOREST:50,MOUNTAINS:0,CENTER:{x:-420,y:91},NEIGHBOURS:[63,68,70,87,88],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:70,PATH:"m -407.83631,79.285713 -6.43144,-6.792116 -4.81087,-10.423512 -14.16529,-4.009043 -11.22531,3.474503 -0.53454,-13.096206 8.55263,-7.750818 0.26725,-8.285352 5.34541,-8.285357 -4.54359,-4.810852 15.76891,-0.534539 9.08716,8.819895 10.69078,-5.345391 10.95804,2.405426 6.14722,14.432555 -8.01809,-2.405425 -7.48355,4.00904 9.35442,8.285356 2.13818,9.087165 -9.08717,6.949008 0.46307,6.716139 z",LAND:20,FOREST:60,MOUNTAINS:50,CENTER:{x:-417,y:47},NEIGHBOURS:[62,63,69,71,85,87],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:71,PATH:"m -366.69379,23.583273 -3.72287,-9.876428 -9.82739,-5.1026787 -7.74851,-0.3779764 -1.13393,-6.2366069 0.37799,-6.047619 -6.99257,-0.1889881 -3.40177,4.34672617 -7.74851,-1.88988097 -6.23663,-6.8035713 -4.15774,3.5907736 -5.48063,5.85863105 -10.20538,-4.72470225 -3.21278,-6.4255952 -5.85864,2.6458331 0.37798,6.0476191 6.2366,4.1577381 0.94493,7.3705356 -5.29166,5.1026781 -0.37796,5.858631 -2.45684,6.614585 6.42622,4.900192 5.34541,-8.285357 -4.54359,-4.810852 15.76891,-0.534539 9.08716,8.819895 10.69078,-5.345391 10.95804,2.405426 6.14722,14.432555 8.28535,-0.534541 2.40543,-6.147196 z",LAND:10,FOREST:40,MOUNTAINS:20,CENTER:{x:-405,y:10},NEIGHBOURS:[62,70,72,84,85],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:72,PATH:"m -395.74107,-4.2470241 -2.45684,-6.8035709 4.34673,-4.724703 -3.21281,-6.425595 -7.37052,-2.456845 5.29167,-4.157739 -0.189,-4.157736 4.15775,-2.834823 0.75594,-6.80357 -5.85862,-3.401787 3.77976,-1.511903 3.02379,1.889879 5.48066,-1.133928 2.64583,-4.346726 11.15031,9.638393 6.2366,-1.322917 -1.13393,6.992559 -6.80357,0.755952 -1.32292,3.779763 11.15031,1.511903 3.40178,5.10268 -1.13393,5.858631 7.37053,5.291666 9.07145,-3.023809 9.79868,3.498598 -2.93994,9.3544336 6.14719,7.216277 -1.87089,6.4144683 -8.28535,-2.1381559 -2.67271,9.621703 -4.27631,4.276312 -7.75081,-3.741773 -7.48355,5.61266 -3.72287,-9.876428 -9.82739,-5.1026787 -7.74851,-0.3779766 -1.13393,-6.2366067 0.37799,-6.047619 z",LAND:20,FOREST:60,MOUNTAINS:0,CENTER:{x:-373,y:-5},NEIGHBOURS:[61,62,71,73,83,84],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:73,PATH:"m -337.56142,-13.032652 -9.79868,-3.498598 -9.07145,3.023809 -7.37053,-5.291666 1.13393,-5.858631 -3.40178,-5.10268 -11.15031,-1.511903 1.32292,-3.779763 6.80357,-0.755952 1.13393,-6.992559 -6.42559,-4.346726 7.37052,-7.748513 3.96875,5.669645 9.26042,-1.13393 1.7009,-5.858632 8.88243,-6.992559 7.9375,3.212799 11.3393,-1.889882 6.42559,7.559524 4.72469,6.992559 6.48444,-0.975918 -7.21627,9.087162 -10.69078,-5.34539 -10.15625,5.078121 -2.40543,10.156243 5.61266,9.621702 z",LAND:10,FOREST:60,MOUNTAINS:0,CENTER:{x:-348,y:-39},NEIGHBOURS:[61,72,74,82,83],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:74,PATH:"m -343.20239,-63.21131 -2.10984,-6.883386 3.87541,-3.608139 8.95352,-2.00452 -3.34086,-5.345391 3.8754,-2.138156 5.07812,0.400905 5.21176,-3.34087 2.53908,-4.944486 5.87991,-1.469982 5.47902,-4.944486 3.11206,-1.251249 3.4018,10.583333 -11.3393,5.10268 1.51191,9.449403 9.82739,8.882441 8.50445,-2.267857 2.64583,5.102677 -0.37796,7.181548 -4.72471,5.102678 -0.66797,5.568251 -10.4235,-4.276312 -6.48444,0.975918 -4.72469,-6.992559 -6.42559,-7.559524 -11.3393,1.889882 z",LAND:10,FOREST:60,MOUNTAINS:50,CENTER:{x:-319,y:-67},NEIGHBOURS:[59,61,73,75,77,82],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:75,PATH:"m -273.08781,-119.90774 h -6.99254 l -13.04017,4.15774 -4.53573,-6.04762 -10.01635,3.59078 -2.07889,4.7247 -1.51191,6.80357 5.85865,-2.26786 3.96875,4.15774 -3.21281,6.04762 3.4018,10.583333 -11.3393,5.102678 1.51191,9.449405 9.82739,8.882441 8.50445,-2.267857 2.64583,5.102677 7.37055,0.377976 4.5357,-5.858629 0.94496,-6.425597 5.85861,-1.322917 5.66966,-4.346725 7.55951,5.102677 -2.26785,-6.614583 4.7247,-4.724702 2.26786,-7.748508 -2.45685,-4.913691 4.15774,-4.535718 -4.53571,-8.69345 -9.26041,1.32292 z",LAND:30,FOREST:60,MOUNTAINS:50,CENTER:{x:-282,y:-93},NEIGHBOURS:[57,58,59,74,76,77],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:76,PATH:"m -336.96576,-143.15327 -3.21281,-2.83482 7.37055,-3.40179 v -6.04762 l 4.72469,-5.48065 -3.96875,-6.61459 -7.74851,2.45685 -3.21281,-4.53572 0.56698,-5.85863 3.02382,-6.04762 16.44195,0.37798 9.26041,8.12649 7.37055,-3.59078 7.18154,3.40179 6.80357,9.4494 9.26042,-6.2366 5.29166,4.15774 8.50448,-2.83483 6.23659,-5.48065 6.4256,7.74851 -2.64583,8.31548 -0.18899,4.34672 -6.80358,6.04762 3.40179,13.04018 -5.66964,4.7247 -4.53573,10.01637 h -6.99254 l -13.04017,4.15774 1.88987,-6.80357 -0.56695,-7.9375 -2.26788,-7.9375 -7.37052,3.2128 -9.07143,-1.32292 -7.74851,-5.66964 -6.61458,3.02381 -3.02382,-3.59078 z",LAND:30,FOREST:60,MOUNTAINS:0,CENTER:{x:-300,y:-150},NEIGHBOURS:[-1,57,75,77,78],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:77,PATH:"m -335.82416,-81.052746 -7.18924,-0.301421 -11.33927,0.755954 -5.29167,-6.803572 3.77976,-9.260417 -6.42559,-6.047618 -9.44941,-1.51191 5.85864,-8.69345 12.09522,-2.26785 1.32292,-8.88245 13.22916,-8.31547 2.26788,-10.77232 9.07142,0.37797 3.02382,3.59078 6.61458,-3.02381 7.74851,5.66964 9.07143,1.32292 7.37052,-3.2128 2.26788,7.9375 0.56695,7.9375 -1.88987,6.80357 -4.53573,-6.04762 -10.01635,3.59078 -2.07889,4.7247 -1.51191,6.80357 5.85865,-2.26786 3.96875,4.15774 -3.21281,6.04762 -3.11206,1.251249 -5.47902,4.944488 -5.87991,1.46998 -2.53908,4.944486 -5.21176,3.34087 -5.07812,-0.400905 z",LAND:30,FOREST:60,MOUNTAINS:50,CENTER:{x:-334,y:-112},NEIGHBOURS:[74,75,76,78,81,82],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:78,PATH:"m -343.0134,-169.61161 -4.72469,3.59078 -8.31548,-5.48066 -2.83483,-5.10268 -7.37052,-2.07886 -6.42559,5.29166 -3.77976,-5.48065 -6.23663,8.50446 3.96875,9.63839 6.99257,1.7009 2.83483,6.99256 -4.91369,4.34672 -3.4018,10.01637 -7.18153,3.40179 2.64583,3.96875 6.2366,6.04762 7.9375,-5.85863 5.66965,2.07886 6.80355,-0.56696 2.64584,4.53571 13.22916,-8.31547 2.26788,-10.77232 -3.21281,-2.83482 7.37055,-3.40179 v -6.04762 l 4.72469,-5.48065 -3.96875,-6.61459 -7.74851,2.45685 z",LAND:30,FOREST:60,MOUNTAINS:50,CENTER:{x:-357,y:-147},NEIGHBOURS:[-1,76,77,79,81],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:79,PATH:"m -395.17409,-137.48363 -8.50448,-4.34673 -3.40177,-6.04762 2.83482,-8.88244 -6.42562,-4.7247 0.18899,-9.63839 5.29167,-5.48066 -3.77976,-6.04761 7.18156,-2.64584 5.48066,2.45685 7.37052,-2.64584 6.04761,6.23661 4.72472,-6.04762 7.9375,-3.2128 7.18153,4.34673 4.15774,7.55952 -7.37052,-2.07886 -6.42559,5.29166 -3.77976,-5.48065 -6.23663,8.50446 3.96875,9.63839 6.99257,1.7009 2.83483,6.99256 -4.91369,4.34672 -3.4018,10.01637 -5.29166,-2.83482 -6.04761,-1.32292 z",LAND:20,FOREST:60,MOUNTAINS:0,CENTER:{x:-394,y:-160},NEIGHBOURS:[-1,78,80,81],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:80,PATH:"m -408.97024,-182.65178 -6.42559,-3.77976 0.18899,-4.9137 -3.59076,-7.37053 -10.20538,2.45684 -2.45684,6.04762 -0.75594,9.07143 -9.44941,2.83482 -6.2366,7.18155 -1.7009,6.04762 3.96875,4.91369 -2.64583,8.31547 10.39434,2.26786 -2.64583,5.48066 7.37052,2.07887 5.48066,4.53571 6.99257,-0.18899 4.15774,5.85863 8.69344,-2.26785 8.12649,1.88988 4.53573,-5.29167 -8.50448,-4.34673 -3.40177,-6.04762 2.83482,-8.88244 -6.42562,-4.7247 0.18899,-9.63839 5.29167,-5.48066 z",LAND:30,FOREST:60,MOUNTAINS:0,CENTER:{x:-427,y:-161},NEIGHBOURS:[-1,79,81,105],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:81,PATH:"m -393.66219,-108.00149 -7.18155,-0.37797 -3.21281,-3.59078 -9.26042,-4.53571 0.94496,-5.66964 -1.88989,-4.72471 6.42559,-7.18154 8.12649,1.88988 4.53573,-5.29167 6.61458,-4.34673 6.04761,1.32292 5.29166,2.83482 -7.18153,3.40179 2.64583,3.96875 6.2366,6.04762 7.9375,-5.85863 5.66965,2.07886 6.80355,-0.56696 2.64584,4.53571 -1.32292,8.88245 -12.09522,2.26785 -9.26041,-4.34672 -3.02382,4.91369 -6.04763,3.96875 z",LAND:10,FOREST:60,MOUNTAINS:40,CENTER:{x:-395,y:-121},NEIGHBOURS:[77,78,79,80,82,105],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:82,PATH:"m -405.37947,-74.550592 -3.02379,-2.338731 5.33359,-4.84282 -1.64554,-6.324385 -5.19996,-0.290198 3.314,-5.734492 6.70236,-0.880091 1.7009,-6.803571 4.53572,-6.23661 9.44939,-0.37797 6.04763,-3.96875 3.02382,-4.91369 9.26041,4.34672 -5.85864,8.69345 9.44941,1.51191 6.42559,6.047618 -3.77976,9.260417 5.29167,6.803572 11.33927,-0.755954 7.18924,0.301421 3.34086,5.345393 -8.95352,2.004518 -3.87541,3.608139 2.10984,6.883386 -8.88243,6.992559 -1.7009,5.858632 -9.26042,1.13393 1.32292,-7.9375 -6.99254,-6.236607 -2.64583,-7.748514 -3.96875,-5.102677 -6.4256,4.535712 -8.69346,-4.346723 -8.29649,2.953056 z",LAND:30,FOREST:60,MOUNTAINS:50,CENTER:{x:-378,y:-89},NEIGHBOURS:[74,77,81,83,103,105],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:83,PATH:"m -393.47322,-45.635417 0.18899,-4.913689 -9.63837,-1.322916 -8.50448,-5.291667 0.37799,-6.803572 5.66962,-10.583333 6.63358,1.441152 8.29649,-2.953058 8.69346,4.346725 6.4256,-4.535712 3.96875,5.102677 2.64583,7.748514 6.99254,6.236607 -1.32292,7.9375 -3.96875,-5.669645 -7.37052,7.748513 6.42559,4.346726 -6.2366,1.322917 -11.15031,-9.638393 -2.64583,4.346726 z",LAND:10,FOREST:60,MOUNTAINS:0,CENTER:{x:-388,y:-61},NEIGHBOURS:[72,73,82,84,103],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:84,PATH:"m -411.42708,-57.163689 -4.91368,5.480653 1.32292,4.913691 -4.72472,6.425594 -8.50445,2.078871 -4.72472,6.614583 h -7.9375 l -8.12649,3.779761 -0.37796,-6.047618 -4.34673,-2.267858 -6.2366,10.205357 -0.75597,6.614583 3.4018,6.52009 7.74851,-2.078869 5.00819,-5.197173 7.55952,2.834821 8.59896,-1.984375 3.59076,5.953125 7.55952,8.3154764 4.15774,-3.5907736 6.23663,6.8035713 7.74851,1.88988097 3.40177,-4.34672617 -2.45684,-6.8035709 4.34673,-4.724703 -3.21281,-6.425595 -7.37052,-2.456845 5.29167,-4.157739 -0.189,-4.157736 4.15775,-2.834823 0.75594,-6.80357 -5.85862,-3.401787 3.77976,-1.511903 3.02379,1.889879 0.18899,-4.913689 -9.63837,-1.322916 z",LAND:20,FOREST:40,MOUNTAINS:0,CENTER:{x:-418,y:-28},NEIGHBOURS:[71,72,83,85,102,103],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:85,PATH:"m -480.40774,26.180059 -5.85861,-0.377977 -0.18899,-7.559523 5.57514,-3.212798 1.51191,-7.0870533 3.21278,-6.1421129 9.54392,0.188988 -1.51191,-7.9374999 6.04761,-1.8898809 4.72471,-5.008184 7.74851,-2.078869 5.00819,-5.197173 7.55952,2.834821 8.59896,-1.984375 3.59076,5.953125 7.55952,8.3154764 -5.48063,5.85863105 -10.20538,-4.72470225 -3.21278,-6.4255952 -5.85864,2.6458331 0.37798,6.0476191 6.2366,4.1577381 0.94493,7.3705354 -5.29166,5.1026783 -0.37796,5.858631 -2.45684,6.614585 6.42622,4.900192 -0.26725,8.285352 -5.97001,-5.815009 -7.55951,-2.078869 -9.26042,-2.834822 -8.69344,-0.755952 -9.07143,2.456844 z",LAND:30,FOREST:60,MOUNTAINS:0,CENTER:{x:-457,y:11},NEIGHBOURS:[70,71,84,87,98,99,102],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:86,PATH:"",LAND:0,FOREST:0,MOUNTAINS:0,CENTER:{x:0,y:0},NEIGHBOURS:[],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:87,PATH:"m -450.34914,100.02236 -1.60364,-7.750818 6.41448,-4.810855 -6.41448,-5.612657 7.2163,-7.483549 10.69078,-2.405425 -4.27633,-4.276312 5.07812,-9.621702 -11.22531,3.474503 -0.53454,-13.096206 8.55263,-7.750818 -5.97001,-5.815009 -7.55951,-2.078869 -1.32292,5.102678 1.7009,4.724701 -5.85864,5.480656 -7.9375,-7.9375 -7.37053,2.078869 -3.2128,4.157739 2.64583,4.346725 9.44941,4.157737 0.94493,8.315478 -6.42559,4.535713 -0.18899,5.669642 -1.90236,2.808288 -4.27633,1.870887 -1.46997,3.34087 -3.47451,2.138156 1.33636,8.018084 -3.87543,0.400902 0.13364,6.280838 7.48356,2.138154 3.34086,6.68174 -3.74176,1.87089 -1.47,2.93996 7.08266,-0.13363 2.80633,3.74177 5.74627,-0.93544 5.3454,-0.13364 -2.53907,2.93996 1.47,3.60814 6.94902,-3.60814 6.68173,-0.13363 4.40994,-4.40995 2.13815,-8.55262 6.41448,-6.949009 -11.22532,-2.672694 z",LAND:30,FOREST:50,MOUNTAINS:0,CENTER:{x:-459,y:82},NEIGHBOURS:[69,70,85,88,95,98],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:88,PATH:"m -437.52021,112.85129 -4.40994,4.40995 -6.68173,0.13363 -6.94902,3.60814 -1.47,-3.60814 2.53907,-2.93996 -5.3454,0.13364 -2.80633,3.74177 -7.34991,3.0736 2.13818,3.0736 -7.34992,4.00904 -7.08265,-3.34087 -2.40541,5.34539 -1.47,8.68626 2.40543,4.14268 2.80633,2.13816 -1.46997,7.75081 6.68173,-7.21627 6.68174,0.53453 5.34538,-9.35443 6.94901,1.87089 9.08717,-0.26727 12.05889,3.44231 -2.45684,-6.99256 6.2366,-6.99256 8.50447,0.37797 -0.18899,-9.07142 -4.72469,-4.91369 -2.53905,5.27857 z",LAND:30,FOREST:30,MOUNTAINS:0,CENTER:{x:-456,y:130},NEIGHBOURS:[68,69,87,89,95],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:89,PATH:"m -466.11804,206.6629 -12.02714,-5.61266 2.40543,-5.87993 -9.6217,-5.34539 -1.8709,-13.89802 3.20723,-9.6217 -7.75081,-6.41447 1.8709,-8.01809 7.48355,1.33635 6.68173,-7.21627 6.68174,0.53453 5.34538,-9.35443 6.94901,1.87089 9.08717,-0.26727 12.05889,3.44231 -3.40178,8.88244 -8.12649,6.99256 -16.06399,4.15774 3.77976,10.39434 11.52829,7.55952 -5.48066,5.48066 4.36962,7.07887 -0.53453,8.28536 -9.08717,4.81085 -1.60362,-4.00904 2.13816,-6.68174 -3.47449,-2.6727 -4.54358,8.55263 z",LAND:10,FOREST:30,MOUNTAINS:40,CENTER:{x:-474,y:170},NEIGHBOURS:[67,68,91,94,95],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:90,PATH:"m -463.97989,256.37503 -7.75081,4.81085 -12.64187,1.22944 -1.7907,-9.24753 -2.6326,-1.87088 -4.75739,0.66817 -3.47451,2.28516 -1.80407,4.07586 -5.5993,4.34313 -10.98477,-4.58367 -0.14701,-8.65954 -3.47448,-9.08716 3.74176,-8.8199 9.35442,-8.01808 9.08717,-3.20724 10.69078,8.01809 h 9.35445 l 11.49257,4.81085 -4.54358,9.08716 z",LAND:20,FOREST:60,MOUNTAINS:20,CENTER:{x:-493,y:237},NEIGHBOURS:[-1,66,67,91],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:91,PATH:"m -519.0374,240.33886 -8.80634,4.50042 -11.71726,-0.18899 -2.07889,-15.30803 2.45687,-8.88244 7.9375,-3.96875 7.9375,-0.94494 5.48063,-6.61459 5.10271,-4.53571 8.69344,0.75595 10.01635,2.83482 9.6384,-2.83482 1.32292,-4.34672 7.31382,-5.63475 -2.40543,5.87993 12.02714,5.61266 -9.35445,4.00904 2.93997,9.35443 -4.2763,8.28536 h -9.35445 l -10.69078,-8.01809 -9.08717,3.20724 -9.35442,8.01808 z",LAND:10,FOREST:50,MOUNTAINS:10,CENTER:{x:-509,y:216},NEIGHBOURS:[-1,67,89,90,92,94],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:92,PATH:"m -539.18302,220.45982 1.43674,-6.84792 -1.06907,-8.28535 -6.68174,1.33635 -10.42352,0.53454 -7.21627,-6.94901 -1.33636,-8.01809 9.6217,-4.27631 8.28535,-7.48355 9.35445,3.20724 8.81989,-5.07812 5.87994,-9.88898 7.75081,3.47451 5.34537,9.6217 2.67272,10.15624 6.41445,7.48355 6.31367,8.53998 -10.01635,-2.83482 -8.69344,-0.75595 -5.10271,4.53571 -5.48063,6.61459 -7.9375,0.94494 z",LAND:20,FOREST:60,MOUNTAINS:0,CENTER:{x:-529,y:196},NEIGHBOURS:[-1,91,93,94],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:93,PATH:"m -517.96833,134.23285 -3.20725,-6.949 -12.02711,-4.00904 -7.75084,3.74177 -3.74176,-7.48355 -8.81989,-2.13816 -5.61266,11.49259 8.01809,8.28536 -0.80182,8.28536 -7.21627,-4.00905 -5.07812,-6.68173 -8.81991,-2.40543 -2.93995,3.74177 2.40541,9.88898 -4.2763,13.0962 5.34538,8.28536 -5.07813,11.49259 -10.15621,3.74177 4.2763,5.34539 6.1472,9.88897 6.68173,-4.27631 7.48356,6.68174 -1.33636,-8.01809 9.6217,-4.27631 8.28535,-7.48355 9.35445,3.20724 8.81989,-5.07812 5.87994,-9.88898 -0.80182,-7.75081 -4.2763,-8.01809 6.14719,-6.949 z",LAND:20,FOREST:60,MOUNTAINS:20,CENTER:{x:-550,y:161},NEIGHBOURS:[-1,92,94,95,96],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:94,PATH:"m -522.51191,168.71062 -0.80182,-7.75081 -4.2763,-8.01809 6.14719,-6.949 3.47451,-11.75987 7.75081,-1.33634 2.13815,8.55262 6.41448,5.07812 1.60361,10.15625 10.15625,-4.81086 -1.8709,8.01809 7.75081,6.41447 -3.20723,9.6217 1.8709,13.89802 9.6217,5.34539 -7.31382,5.63475 -1.32292,4.34672 -9.6384,2.83482 -6.31367,-8.53998 -6.41445,-7.48355 -2.67272,-10.15624 -5.34537,-9.6217 z",LAND:10,FOREST:20,MOUNTAINS:40,CENTER:{x:-504,y:168},NEIGHBOURS:[89,91,92,93,95],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:95,PATH:"m -521.17558,127.28385 3.34819,-4.90885 10.20538,-0.56697 2.83483,-7.9375 -1.70091,-6.2366 6.4256,0.37797 0.56697,2.83483 6.2366,-2.64584 1.32292,-5.85863 8.31548,0.37798 1.88987,7.18154 7.72816,-0.92589 -1.47,2.93996 7.08266,-0.13363 2.80633,3.74177 5.74627,-0.93544 -2.80633,3.74177 -7.34991,3.0736 2.13818,3.0736 -7.34992,4.00904 -7.08265,-3.34087 -2.40541,5.34539 -1.47,8.68626 2.40543,4.14268 2.80633,2.13816 -1.46997,7.75081 -7.48355,-1.33635 -10.15625,4.81086 -1.60361,-10.15625 -6.41448,-5.07812 -2.13815,-8.55262 -7.75081,1.33634 z",LAND:30,FOREST:40,MOUNTAINS:0,CENTER:{x:-495,y:127},NEIGHBOURS:[87,88,89,93,94,96,98],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:96,PATH:"m -544.69529,119.53303 3.43339,-6.04047 -5.29167,-6.61458 -2.07886,-9.638399 -6.61458,-3.779761 3.59077,-3.401785 4.15774,2.645833 7.55951,-1.322916 h 8.31549 l 6.2366,-4.535715 7.9375,5.291666 3.59076,-3.590774 1.7009,-3.96875 6.99257,3.023809 8.12649,-0.566962 -0.75596,7.181546 5.10267,2.834822 0.75597,5.291666 -1.32292,5.85863 -6.2366,2.64584 -0.56697,-2.83483 -6.4256,-0.37797 1.70091,6.2366 -2.83483,7.9375 -10.20538,0.56697 -3.34819,4.90885 -12.02711,-4.00904 -7.75084,3.74177 z",LAND:20,FOREST:30,MOUNTAINS:10,CENTER:{x:-523,y:107},NEIGHBOURS:[-1,93,95,97,98],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:97,PATH:"m -539.93899,91.380952 -2.26784,-5.669643 -4.26125,-5.654448 1.71228,-5.871928 -2.26978,-6.225209 -0.18896,-10.919524 8.65927,-2.642033 5.31982,5.061077 3.69081,-2.096149 0.93544,-3.320824 -0.36278,-5.33464 4.5566,-4.339129 7.15497,5.813044 0.37798,8.504465 8.69344,2.83482 7.18156,10.583331 -8.12649,5.480658 -3.02382,6.992557 -1.7009,3.96875 -3.59076,3.590774 -7.9375,-5.291664 -6.2366,4.535715 z",LAND:20,FOREST:20,MOUNTAINS:20,CENTER:{x:-523,y:74},NEIGHBOURS:[-1,96,98],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:98,PATH:"m -512.15774,84.577377 3.02382,-6.992557 8.12649,-5.480656 -7.18156,-10.583333 -8.69344,-2.83482 -0.37798,-8.504465 7.18156,-9.827381 -0.94496,-8.126487 10.39434,-2.078868 12.09524,5.102677 8.12649,-9.071428 3.4018,5.480654 9.07143,-2.456844 8.69344,0.755952 9.26042,2.834822 -1.32292,5.102678 1.7009,4.724701 -5.85864,5.480656 -7.9375,-7.9375 -7.37053,2.078869 -3.2128,4.157739 2.64583,4.346725 9.44941,4.157737 0.94493,8.315478 -6.42559,4.535713 -0.18899,5.669642 -1.90236,2.808288 -4.27633,1.870887 -1.46997,3.34087 -3.47451,2.138156 1.33636,8.018084 -3.87543,0.400902 0.13364,6.280838 7.48356,2.138154 3.34086,6.68174 -3.74176,1.87089 -7.72816,0.92589 -1.88987,-7.18154 -8.31548,-0.37798 -0.75597,-5.291668 -5.10267,-2.83482 0.75596,-7.181546 -8.12649,0.56696 z",LAND:30,FOREST:60,MOUNTAINS:30,CENTER:{x:-488,y:62},NEIGHBOURS:[-1,85,87,95,96,97,99],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:99,PATH:"m -500.62947,30.14881 -3.02379,-4.724703 -9.07142,0.377976 -10.01639,-1.700893 -5.48066,-5.480655 -0.18899,-8.315476 3.59079,-5.6696427 -7.18156,-2.6458333 -6.80357,1.7008928 -0.94493,-6.0476189 7.37052,-4.7247022 3.21281,-8.3154767 7.9375,3.401786 7.37052,-3.023809 12.47323,0.94494 3.40177,6.4255951 13.79615,-4.9136901 3.59076,7.3705355 4.44122,6.9925593 -3.21278,6.1421129 -1.51191,7.0870533 -5.57514,3.212798 0.18899,7.559523 5.85861,0.377977 -8.12649,9.071428 z",LAND:30,FOREST:50,MOUNTAINS:0,CENTER:{x:-507,y:8},NEIGHBOURS:[-1,85,98,100,102],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:100,PATH:"m -497.03868,-59.431546 -8.31548,0.944941 -6.04761,4.724701 -5.1027,-4.157739 -0.94493,-4.913691 -7.37053,1.13393 -7.55954,5.102678 -5.48063,-3.96875 -4.91371,1.700892 v 3.779763 l 4.34673,2.456845 2.26785,5.858631 4.15774,3.401785 5.66966,-0.377976 3.40177,2.645834 -0.18899,2.078868 -3.40178,0.188989 -6.42559,-0.944941 -7.55951,2.456847 -8.1265,-0.377979 -3.77975,6.047621 3.40177,4.535713 5.48066,2.267858 4.5357,1.889881 -0.18897,6.992559 3.96875,3.96875 6.04761,-3.401786 7.9375,3.401786 7.37052,-3.023809 12.47323,0.94494 3.77976,-3.023809 -6.04761,-6.425596 -1.32292,-8.504462 6.04761,-4.346729 1.13393,-7.9375 -2.26785,-6.047618 z",LAND:20,FOREST:50,MOUNTAINS:0,CENTER:{x:-517,y:-32},NEIGHBOURS:[-1,99,101,102],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:101,PATH:"m -478.13989,-71.526785 -4.91368,-2.078869 -2.26785,-4.157739 -5.48066,-3.401785 -8.50447,1.700893 -3.96875,-5.480656 -6.04761,1.700895 -5.66965,-1.700895 -1.88987,-5.102677 -5.10267,-1.511906 -12.09524,3.590774 0.37795,4.535715 5.10271,2.456844 1.70087,5.858631 -3.40177,3.212799 2.45684,4.913691 3.02381,5.291666 7.37053,-1.13393 0.94493,4.913691 5.1027,4.157739 6.04761,-4.724701 8.31548,-0.944941 5.85862,-5.858632 7.37055,-1.133927 z",LAND:20,FOREST:20,MOUNTAINS:0,CENTER:{x:-509,y:-69},NEIGHBOURS:[-1,100,102,104],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:102,PATH:"m -457.35118,-12.845982 -3.4018,-6.52009 0.75597,-6.614583 6.2366,-10.205357 -1.51191,-6.614583 4.91368,-3.212798 0.189,-7.559524 -3.40178,-4.157737 -2.26785,-8.504465 6.2366,-4.157736 -0.18899,-3.968753 -6.04761,0.188989 -5.48066,3.212799 -5.66965,1.133927 -3.40177,-5.669642 -6.23663,0.377975 -1.51191,3.590775 -5.66962,5.10268 -7.37055,1.133927 -5.85862,5.858632 -3.02381,9.071427 2.26785,6.047618 -1.13393,7.9375 -6.04761,4.346729 1.32292,8.504462 6.04761,6.425596 -3.77976,3.023809 3.40177,6.4255951 13.79615,-4.9136901 3.59076,7.3705355 4.44122,6.9925593 9.54392,0.188988 -1.51191,-7.9374999 6.04761,-1.8898809 z",LAND:50,FOREST:60,MOUNTAINS:0,CENTER:{x:-480,y:-37},NEIGHBOURS:[84,85,99,100,101,103,104],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:103,PATH:"m -409.91517,-88.346726 -6.04763,-1.700892 -5.29167,4.346725 -1.32292,5.480656 -5.66962,2.078868 -6.80358,3.401785 -0.56697,5.669645 -3.96875,8.126487 -6.61458,1.322916 -3.21279,-4.157736 -6.42559,-2.456847 2.26785,8.504465 3.40178,4.157737 -0.189,7.559524 -4.91368,3.212798 1.51191,6.614583 4.34673,2.267858 0.37796,6.047618 8.12649,-3.779761 h 7.9375 l 4.72472,-6.614583 8.50445,-2.078871 4.72472,-6.425594 -1.32292,-4.913691 4.91368,-5.480653 0.37799,-6.803572 5.66962,-10.583331 -3.02379,-2.338731 5.3336,-4.84282 -1.64555,-6.324383 z",LAND:10,FOREST:30,MOUNTAINS:0,CENTER:{x:-429,y:-54},NEIGHBOURS:[82,83,84,102,104,105],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:104,PATH:"m -485.32142,-77.763393 2.07886,-5.480653 6.04763,-1.889882 6.42559,-3.023809 2.07886,-3.779763 4.91371,-4.157737 5.85862,-0.188989 5.66965,-0.755952 6.61458,4.157737 5.29167,3.590774 5.48066,-3.401785 7.18153,1.700893 -0.75594,-5.102678 -2.64584,-3.023809 3.96875,-0.944944 4.5357,2.645837 0.56698,3.77976 6.99257,-0.377975 -0.94496,3.968752 -5.29167,4.346723 -1.32292,5.480656 -5.66962,2.078868 -6.80358,3.401785 -0.56697,5.669645 -3.96875,8.126487 -6.61458,1.322916 -3.21279,-4.157736 -6.42559,-2.456847 6.2366,-4.157736 -0.18899,-3.968753 -6.04761,0.188989 -5.48066,3.212799 -5.66965,1.133927 -3.40177,-5.669642 -6.23663,0.377975 -1.51191,3.590775 -4.91368,-2.078869 z",LAND:20,FOREST:30,MOUNTAINS:30,CENTER:{x:-449,y:-82},NEIGHBOURS:[-1,101,102,103,105],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:105,PATH:"m -452.2485,-97.040178 2.26785,-6.236602 -2.64584,-6.04762 6.04764,-4.34673 0.37796,-4.7247 -4.91369,-7.55953 3.21281,-6.04762 -2.45687,-5.29166 0.94496,-6.23661 8.88244,-0.56696 7.37052,2.07887 5.48066,4.53571 6.99257,-0.18899 4.15774,5.85863 8.69344,-2.26785 -6.42559,7.18154 1.88989,4.72471 -0.94496,5.66964 9.26042,4.53571 3.21281,3.59078 7.18155,0.37797 -4.53572,6.23661 -1.7009,6.803573 -6.70235,0.880089 -3.31401,5.734492 -6.04763,-1.70089 0.94496,-3.96875 -6.99257,0.377973 -0.56698,-3.779758 -4.5357,-2.645839 -3.96875,0.944944 2.64584,3.023809 0.75594,5.10268 -7.18153,-1.700895 -5.48066,3.401785 z",LAND:30,FOREST:60,MOUNTAINS:0,CENTER:{x:-429,y:-115},NEIGHBOURS:[-1,80,81,82,103,104],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:106,PATH:"m -46.680059,119.91815 -5.669642,-7.37053 4.157737,-8.50447 9.449405,-5.858628 -1.889881,-10.77232 2.267857,-12.662204 7.181548,-7.748511 13.418154,-7.181548 0.377976,-9.449403 6.425596,-6.236608 6.8035709,-3.212798 -0.7559524,-7.9375 5.66964288,-3.401785 6.05942052,5.093113 0.6681737,14.03165 3.3408694,3.608139 2.004521,2.939965 -3.7417733,6.414468 -1.0690783,7.349911 -10.9580502,0.935445 -10.2898762,5.746295 -0.133635,15.234359 4.2763123,4.276315 -9.0871633,4.810855 -7.90603,9.12347 -10.016368,1.7009 -0.755952,7.37053 z",LAND:20,FOREST:60,MOUNTAINS:0,CENTER:{x:-20,y:75},NEIGHBOURS:[6,7,18,22,23,24,25],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:107,PATH:"m -231.98995,36.679481 8.55263,9.621702 1.06908,19.243405 17.35916,-9.795428 17.53764,3.566015 15.30329,-12.724403 3.77976,-9.071427 6.61458,-8.693452 -2.07887,-9.071429 -16.28698,1.423383 -20.31248,-8.552624 -22.98518,8.552624 z",LAND:20,FOREST:50,MOUNTAINS:0,CENTER:{x:-200,y:36},NEIGHBOURS:[29,37,38,46,47,48],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:108,PATH:"m 175.94791,-35.43006 4.49792,-4.781399 9.12813,-5.423958 -3.3073,-6.746875 -6.35,-0.132292 -6.61458,-3.307292 -1.45521,-5.688541 5.95313,-5.291667 -0.66146,-4.630208 -5.15938,-6.35 -1.5875,4.7625 0.66146,3.96875 -3.57187,4.233333 -6.21771,-0.132292 -9.12813,-3.968749 0.66146,-7.672917 -4.63021,-5.688542 -11.64166,-4.365625 -4.49792,2.778125 -10.31875,3.836459 -5.29166,-1.719792 -6.61459,3.2317 -1.88988,11.906247 13.47485,20.883184 17.78378,12.586608 -1.96547,11.320386 14.93005,-5.102678 3.2128,5.291667 15.30804,-5.858632 z",LAND:20,FOREST:60,MOUNTAINS:0,CENTER:{x:150,y:-48},NEIGHBOURS:[-1,16,17,20],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:109,PATH:"m -155.34821,133.33631 -3.02381,14.74107 5.09295,10.0761 11.22532,-0.53454 2.93996,5.21176 7.76707,-1.90213 10.01636,-8.12649 16.63096,-3.40178 -1.13393,-8.12649 4.34672,1.13393 2.834826,4.53571 3.96875,2.83482 3.590774,-6.61458 -0.755954,-7.9375 -10.016366,-6.80357 -2.26786,-8.50447 -9.54722,7.96695 -7.27652,2.27925 -4.4037,-4.96972 -0.28353,-14.18749 -10.61059,6.01356 -1.6838,7.64391 -6.21548,5.63935 z",LAND:20,FOREST:30,MOUNTAINS:0,CENTER:{x:-129,y:140},NEIGHBOURS:[24,26,27,28,39],WEALTH:0,HARBOUR:!1,TROOPS:[]}],COUNTRIES:[{COUNTRY:fu.PLAYER,NAME:"Player nation",DIPLOMACY:0,POTENTIAL:0,COLOUR:"darkgreen",FOCUS:mu.NONE,REGIONS:[0],CAPITAL:0},{COUNTRY:fu.NEUTRAL,NAME:"none",DIPLOMACY:0,COLOUR:"gray",FOCUS:mu.NONE,REGIONS:[1,2,3,4,5,7,13,14,15,16,17,18,22,27,30,31,37,38,39,40,41,42,43,44,45,47,48,49,50,51,53,54,55,56,58,59,63,64,69,73,74,82,83,87,88,93,95,96,97,98,99,100,101,102,103,104,107,108],CAPITAL:-1},{COUNTRY:fu.CLEADAL,NAME:"Cleadal",DIPLOMACY:0,COLOUR:"darkred",FOCUS:mu.ECONOMY,REGIONS:[6,23,24,25,26,28,29,106,109],CAPITAL:24},{COUNTRY:fu.GRIERIA,NAME:"Grieria",DIPLOMACY:0,COLOUR:"#bcaa4f",FOCUS:mu.PEACE,REGIONS:[8,9,10,11,12],CAPITAL:10},{COUNTRY:fu.BOTHIL,NAME:"Bothil",DIPLOMACY:0,COLOUR:"#286fbc",FOCUS:mu.DEFENSE,REGIONS:[19,20,21,32,33,34,35,36,52],CAPITAL:34},{COUNTRY:fu.DOSHOR,NAME:"Doshor",DIPLOMACY:0,COLOUR:"#a163bc",FOCUS:mu.OFFENSE,REGIONS:[57,75,76,77,78,79,80,81,105],CAPITAL:80},{COUNTRY:fu.CREURUS,NAME:"Creurus",DIPLOMACY:0,COLOUR:"#bc6935",FOCUS:mu.OFFENSE,REGIONS:[65,66,67,68,89,90,91,92,94],CAPITAL:90},{COUNTRY:fu.ESTRAILA,NAME:"Estraila",DIPLOMACY:0,COLOUR:"#49a37e",FOCUS:mu.ECONOMY,REGIONS:[46,60,61,62,70,71,72,84,85],CAPITAL:71}],SEA_AREAS:[{ID:-1,CENTER:{x:226,y:203},R:15,NEIGHBOURS:[-2,-46,-55,0,9]},{ID:-2,CENTER:{x:273,y:172},R:15,NEIGHBOURS:[-1,-3,-55,-57,-58]},{ID:-3,CENTER:{x:275,y:110},R:15,NEIGHBOURS:[-2,-4,-58,13]},{ID:-4,CENTER:{x:286,y:66},R:15,NEIGHBOURS:[-3,-5,-58,-59,14,13]},{ID:-5,CENTER:{x:280,y:9},R:15,NEIGHBOURS:[-4,-6,-59,14]},{ID:-6,CENTER:{x:256,y:-49},R:15,NEIGHBOURS:[-5,-7,-59,-60,16]},{ID:-7,CENTER:{x:210,y:-89},R:15,NEIGHBOURS:[-6,-8,-60,16]},{ID:-8,CENTER:{x:149,y:-118},R:15,NEIGHBOURS:[-7,-9,-60,-61,20,108]},{ID:-9,CENTER:{x:94,y:-137},R:15,NEIGHBOURS:[-8,-10,-61,20]},{ID:-10,CENTER:{x:33,y:-161},R:15,NEIGHBOURS:[-9,-11,-61,-62,33]},{ID:-11,CENTER:{x:-17,y:-182},R:15,NEIGHBOURS:[-10,-12,-62,35,34]},{ID:-12,CENTER:{x:-76,y:-176},R:15,NEIGHBOURS:[-11,-13,-62,-63,54,53,35,34]},{ID:-13,CENTER:{x:-131,y:-187},R:15,NEIGHBOURS:[-12,-14,-63,56,54]},{ID:-14,CENTER:{x:-185,y:-189},R:15,NEIGHBOURS:[-13,-15,-63,56,54]},{ID:-15,CENTER:{x:-224,y:-170},R:15,NEIGHBOURS:[-14,-16,57,56,54]},{ID:-16,CENTER:{x:-262,y:-190},R:15,NEIGHBOURS:[-15,-17,-64,76]},{ID:-17,CENTER:{x:-318,y:-196},R:15,NEIGHBOURS:[-16,-18,-64,78,76]},{ID:-18,CENTER:{x:-367,y:-209},R:15,NEIGHBOURS:[-17,-19,-64,79,78]},{ID:-19,CENTER:{x:-417,y:-214},R:15,NEIGHBOURS:[-18,-20,-65,80,79]},{ID:-20,CENTER:{x:-460,y:-202},R:15,NEIGHBOURS:[-19,-21,-65,-66,80]},{ID:-21,CENTER:{x:-469,y:-161},R:15,NEIGHBOURS:[-20,-22,-66,80]},{ID:-22,CENTER:{x:-471,y:-121},R:15,NEIGHBOURS:[-21,-23,104,105,80]},{ID:-23,CENTER:{x:-507,y:-105},R:15,NEIGHBOURS:[-22,-24,-66,104]},{ID:-24,CENTER:{x:-544,y:-102},R:15,NEIGHBOURS:[-23,-25,-66,-67]},{ID:-25,CENTER:{x:-563,y:-63},R:15,NEIGHBOURS:[-24,-26,-67,101]},{ID:-26,CENTER:{x:-570,y:-15},R:15,NEIGHBOURS:[-25,-27,-67,100]},{ID:-27,CENTER:{x:-553,y:20},R:15,NEIGHBOURS:[-26,-28,97,98,99]},{ID:-28,CENTER:{x:-563,y:60},R:15,NEIGHBOURS:[-27,-29,-68,97,98]},{ID:-29,CENTER:{x:-582,y:105},R:15,NEIGHBOURS:[-28,-30,-68,96]},{ID:-30,CENTER:{x:-597,y:154},R:15,NEIGHBOURS:[-29,-31,-69,93,96]},{ID:-31,CENTER:{x:-599,y:204},R:15,NEIGHBOURS:[-30,-32,-69,91]},{ID:-32,CENTER:{x:-570,y:242},R:15,NEIGHBOURS:[-31,-33,-70,91,92]},{ID:-33,CENTER:{x:-527,y:280},R:15,NEIGHBOURS:[-32,-34,-70,66,90,91]},{ID:-34,CENTER:{x:-476,y:294},R:15,NEIGHBOURS:[-33,-35,-71,66,90]},{ID:-35,CENTER:{x:-424,y:296},R:15,NEIGHBOURS:[-34,-36,-71,-72]},{ID:-36,CENTER:{x:-395,y:259},R:15,NEIGHBOURS:[-35,-37,42,65]},{ID:-37,CENTER:{x:-338,y:259},R:15,NEIGHBOURS:[-36,-38,-72,41,42]},{ID:-38,CENTER:{x:-279,y:261},R:15,NEIGHBOURS:[-37,-39,-72,40,41]},{ID:-39,CENTER:{x:-234,y:265},R:15,NEIGHBOURS:[-38,-40,-73]},{ID:-40,CENTER:{x:-174,y:250},R:15,NEIGHBOURS:[-39,-41,-73,27]},{ID:-41,CENTER:{x:-126,y:232},R:15,NEIGHBOURS:[-40,-42,26]},{ID:-42,CENTER:{x:-67,y:224},R:15,NEIGHBOURS:[-41,-43,-74,25,26]},{ID:-43,CENTER:{x:-10,y:223},R:15,NEIGHBOURS:[-42,-44,-74]},{ID:-44,CENTER:{x:48,y:233},R:15,NEIGHBOURS:[-43,-45,-47,2,5]},{ID:-45,CENTER:{x:103,y:229},R:15,NEIGHBOURS:[-44,-46,-47,2,5]},{ID:-46,CENTER:{x:167,y:215},R:15,NEIGHBOURS:[-45,-1]},{ID:-47,CENTER:{x:75,y:280},R:15,NEIGHBOURS:[-44,-45,-48,-74,8]},{ID:-48,CENTER:{x:76,y:338},R:15,NEIGHBOURS:[-47,-49,-74,-75]},{ID:-49,CENTER:{x:124,y:381},R:15,NEIGHBOURS:[-48,-50,-75,10]},{ID:-50,CENTER:{x:192,y:367},R:15,NEIGHBOURS:[-49,-51,-56,-76,11]},{ID:-51,CENTER:{x:250,y:381},R:15,NEIGHBOURS:[-50,-52,-56,-76]},{ID:-52,CENTER:{x:316,y:384},R:15,NEIGHBOURS:[-51,-53,-77]},{ID:-53,CENTER:{x:330,y:331},R:15,NEIGHBOURS:[-52,-54,-78]},{ID:-54,CENTER:{x:287,y:293},R:15,NEIGHBOURS:[-53,-55,-56,-57,12]},{ID:-55,CENTER:{x:243,y:253},R:15,NEIGHBOURS:[-54,-1,-2,-56,-57,9]},{ID:-56,CENTER:{x:237,y:334},R:15,NEIGHBOURS:[-50,-54,-55,-51,11]},{ID:-57,CENTER:{x:350,y:229},R:58,NEIGHBOURS:[-78,-58,-79,-54,-55,-2]},{ID:-58,CENTER:{x:366,y:97},R:58,NEIGHBOURS:[-57,-58,-59,-79,-80,-2,-3,-4]},{ID:-59,CENTER:{x:361,y:-30},R:58,NEIGHBOURS:[-58,-60,-80,-4,-5,-6]},{ID:-60,CENTER:{x:271,y:-144},R:58,NEIGHBOURS:[-59,-61,-81,-6,-7,-8]},{ID:-61,CENTER:{x:147,y:-212},R:58,NEIGHBOURS:[-60,-62,-81,-82,-8,-9,-10]},{ID:-62,CENTER:{x:4,y:-256},R:58,NEIGHBOURS:[-61,-63,-82,-83,-10,-11,-12]},{ID:-63,CENTER:{x:-146,y:-265},R:58,NEIGHBOURS:[-62,-64,-83,-12,-13,-14]},{ID:-64,CENTER:{x:-289,y:-271},R:58,NEIGHBOURS:[-63,-65,-83,-84,-16,-17,-18]},{ID:-65,CENTER:{x:-433,y:-291},R:58,NEIGHBOURS:[-64,-66,-84,-85,-19,-20]},{ID:-66,CENTER:{x:-556,y:-189},R:58,NEIGHBOURS:[-65,-67,-85,-86,-20,-21,-23,-24]},{ID:-67,CENTER:{x:-648,y:-80},R:58,NEIGHBOURS:[-66,-68,-86,-87,-24,-25,-26]},{ID:-68,CENTER:{x:-663,y:58},R:58,NEIGHBOURS:[-67,-69,-87,-28,-29]},{ID:-69,CENTER:{x:-688,y:195},R:58,NEIGHBOURS:[-68,-70,-87,-88,-30,-31]},{ID:-70,CENTER:{x:-609,y:320},R:58,NEIGHBOURS:[-69,-71,-88,-89,-32,-33]},{ID:-71,CENTER:{x:-476,y:370},R:58,NEIGHBOURS:[-70,-72,-89,-90,-35,-34]},{ID:-72,CENTER:{x:-336,y:341},R:58,NEIGHBOURS:[-71,-73,-90,-91,-35,-37,-38]},{ID:-73,CENTER:{x:-185,y:332},R:58,NEIGHBOURS:[-72,-74,-90,-91,-39,-40]},{ID:-74,CENTER:{x:-37,y:307},R:58,NEIGHBOURS:[-73,-75,-91,-42,-43,-47,-48]},{ID:-75,CENTER:{x:52,y:423},R:58,NEIGHBOURS:[-74,-76,-91,-92,-48,-49]},{ID:-76,CENTER:{x:202,y:456},R:58,NEIGHBOURS:[-75,-77,-92,-50,-51]},{ID:-77,CENTER:{x:348,y:455},R:58,NEIGHBOURS:[-76,-78,-92,-93,-94,-52]},{ID:-78,CENTER:{x:421,y:339},R:58,NEIGHBOURS:[-77,-79,-94,-53,-57]},{ID:-79,CENTER:{x:575,y:187},R:120,NEIGHBOURS:[-80,-94,-57,-58,-78,-9999]},{ID:-80,CENTER:{x:552,y:-76},R:120,NEIGHBOURS:[-79,-81,-58,-59]},{ID:-81,CENTER:{x:401,y:-296},R:120,NEIGHBOURS:[-80,-82,-60,-61]},{ID:-82,CENTER:{x:165,y:-412},R:120,NEIGHBOURS:[-81,-83,-61,-62]},{ID:-83,CENTER:{x:-97,y:-460},R:120,NEIGHBOURS:[-82,-84,-62,-63,-64]},{ID:-84,CENTER:{x:-358,y:-479},R:120,NEIGHBOURS:[-83,-85,-64,-65]},{ID:-85,CENTER:{x:-614,y:-397},R:120,NEIGHBOURS:[-84,-86,-65,-66]},{ID:-86,CENTER:{x:-809,y:-216},R:120,NEIGHBOURS:[-85,-87,-66,-67]},{ID:-87,CENTER:{x:-873,y:47},R:120,NEIGHBOURS:[-86,-88,-67,-68,-69]},{ID:-88,CENTER:{x:-863,y:312},R:120,NEIGHBOURS:[-87,-89,-69,-70]},{ID:-89,CENTER:{x:-654,y:515},R:120,NEIGHBOURS:[-88,-90,-70,-71]},{ID:-90,CENTER:{x:-379,y:552},R:120,NEIGHBOURS:[-89,-91,-71,-72,-73]},{ID:-91,CENTER:{x:-111,y:534},R:120,NEIGHBOURS:[-90,-92,-72,-73,-74,-75]},{ID:-92,CENTER:{x:150,y:643},R:120,NEIGHBOURS:[-91,-93,-75,-76,-77]},{ID:-93,CENTER:{x:420,y:654},R:120,NEIGHBOURS:[-92,-94,-77]},{ID:-94,CENTER:{x:598,y:456},R:120,NEIGHBOURS:[-93,-79,-77,-78]},{ID:0,CENTER:{x:203,y:161},R:0,NEIGHBOURS:[-1]},{ID:2,CENTER:{x:112,y:169},R:0,NEIGHBOURS:[-45,-44]},{ID:5,CENTER:{x:31,y:202},R:0,NEIGHBOURS:[-44,-45]},{ID:25,CENTER:{x:-48,y:168},R:0,NEIGHBOURS:[-42]},{ID:26,CENTER:{x:-98,y:201},R:0,NEIGHBOURS:[-41,-42]},{ID:27,CENTER:{x:-156,y:193},R:0,NEIGHBOURS:[-40]},{ID:40,CENTER:{x:-233,y:211},R:0,NEIGHBOURS:[-38]},{ID:41,CENTER:{x:-305,y:238},R:0,NEIGHBOURS:[-38,-37]},{ID:42,CENTER:{x:-350,y:243},R:0,NEIGHBOURS:[-37,-36]},{ID:65,CENTER:{x:-388,y:229},R:0,NEIGHBOURS:[-36]},{ID:66,CENTER:{x:-445,y:260},R:0,NEIGHBOURS:[-34,-33]},{ID:90,CENTER:{x:-489,y:252},R:0,NEIGHBOURS:[-34,-33]},{ID:91,CENTER:{x:-540,y:245},R:0,NEIGHBOURS:[-33,-32,-31]},{ID:92,CENTER:{x:-539,y:206},R:0,NEIGHBOURS:[-32]},{ID:93,CENTER:{x:-574,y:167},R:0,NEIGHBOURS:[-30]},{ID:96,CENTER:{x:-549,y:98},R:0,NEIGHBOURS:[-29,-30]},{ID:97,CENTER:{x:-530,y:48},R:0,NEIGHBOURS:[-28,-27]},{ID:98,CENTER:{x:-511,y:36},R:0,NEIGHBOURS:[-28,-27]},{ID:99,CENTER:{x:-526,y:5},R:0,NEIGHBOURS:[-27]},{ID:100,CENTER:{x:-540,y:-22},R:0,NEIGHBOURS:[-26]},{ID:101,CENTER:{x:-528,y:-76},R:0,NEIGHBOURS:[-25]},{ID:104,CENTER:{x:-472,y:-89},R:0,NEIGHBOURS:[-23,-22]},{ID:105,CENTER:{x:-447,y:-115},R:0,NEIGHBOURS:[-22]},{ID:80,CENTER:{x:-449,y:-171},R:0,NEIGHBOURS:[-21,-20,-19,-22]},{ID:79,CENTER:{x:-396,y:-184},R:0,NEIGHBOURS:[-19,-18]},{ID:78,CENTER:{x:-355,y:-172},R:0,NEIGHBOURS:[-17,-18]},{ID:76,CENTER:{x:-270,y:-169},R:0,NEIGHBOURS:[-16,-17]},{ID:57,CENTER:{x:-232,y:-140},R:0,NEIGHBOURS:[-15]},{ID:56,CENTER:{x:-195,y:-160},R:0,NEIGHBOURS:[-15,-14,-13]},{ID:54,CENTER:{x:-149,y:-161},R:0,NEIGHBOURS:[-15,-14,-13,-12]},{ID:53,CENTER:{x:-112,y:-152},R:0,NEIGHBOURS:[-12]},{ID:35,CENTER:{x:-80,y:-143},R:0,NEIGHBOURS:[-12,-11]},{ID:34,CENTER:{x:-48,y:-146},R:0,NEIGHBOURS:[-12,-11]},{ID:33,CENTER:{x:17,y:-125},R:0,NEIGHBOURS:[-10]},{ID:20,CENTER:{x:86,y:-96},R:0,NEIGHBOURS:[-9,-8]},{ID:108,CENTER:{x:167,y:-66},R:0,NEIGHBOURS:[-8]},{ID:16,CENTER:{x:221,y:-35},R:0,NEIGHBOURS:[-7,-6]},{ID:14,CENTER:{x:256,y:44},R:0,NEIGHBOURS:[-5,-4]},{ID:13,CENTER:{x:222,y:75},R:0,NEIGHBOURS:[-4,-3]},{ID:8,CENTER:{x:115,y:281},R:0,NEIGHBOURS:[-47]},{ID:9,CENTER:{x:203,y:247},R:0,NEIGHBOURS:[-1,-55]},{ID:10,CENTER:{x:128,y:348},R:0,NEIGHBOURS:[-49]},{ID:11,CENTER:{x:209,y:326},R:0,NEIGHBOURS:[-50,-56]},{ID:12,CENTER:{x:287,y:323},R:0,NEIGHBOURS:[-54]},{ID:-9999,CENTER:{x:1204,y:149},R:0,NEIGHBOURS:[-79]}],SEA_EVENTS:{FISH:{FOR_RADIUS:0,NUMBER_INIT:5,SPAWN_CHANCE:.01,SPAWN_DECREASE:5e-4,NUMBER_MIN:1,NUMBER_MAX:15,POWER_MIN:500,POWER_MAX:1e3,TIME_MIN:10,TIME_MAX:0},SHARK:{FOR_RADIUS:0,NUMBER_INIT:4,SPAWN_CHANCE:.005,SPAWN_DECREASE:4e-4,NUMBER_MIN:0,NUMBER_MAX:10,POWER_MIN:250,POWER_MAX:750,TIME_MIN:0,TIME_MAX:0},TREASURE:{FOR_RADIUS:0,NUMBER_INIT:2,SPAWN_CHANCE:.001,SPAWN_DECREASE:3e-4,NUMBER_MIN:1,NUMBER_MAX:3,POWER_MIN:500,POWER_MAX:2e3,TIME_MIN:0,TIME_MAX:0},PIRATES:{FOR_RADIUS:0,NUMBER_INIT:3,SPAWN_CHANCE:.002,SPAWN_DECREASE:2e-4,NUMBER_MIN:1,NUMBER_MAX:7,POWER_MIN:100,POWER_MAX:1e3,TIME_MIN:0,TIME_MAX:0},PIRATES_BASE:{FOR_RADIUS:100,NUMBER_INIT:0,SPAWN_CHANCE:5e-4,SPAWN_DECREASE:4e-4,NUMBER_MIN:0,NUMBER_MAX:1,POWER_MIN:2e3,POWER_MAX:3e3,TIME_MIN:100,TIME_MAX:300},WHIRLPOOL:{FOR_RADIUS:0,NUMBER_INIT:2,SPAWN_CHANCE:.012,SPAWN_DECREASE:.002,NUMBER_MIN:0,NUMBER_MAX:5,POWER_MIN:1,POWER_MAX:1,TIME_MIN:100,TIME_MAX:360},CARTOGRAPHY:{FOR_RADIUS:20,NUMBER_INIT:1,SPAWN_CHANCE:.1,SPAWN_DECREASE:.03,NUMBER_MIN:1,NUMBER_MAX:3,POWER_MIN:50,POWER_MAX:300,TIME_MIN:0,TIME_MAX:0}},REGION_BUILDINGS:{DEFENSES:{REGION_BUILDING:xu.DEFENSES,NAME:"Defenses",DESCRIPTION:"Each defense level decreases attacking unit strength by 1 but only up to half of that unit total strength",COST:[]},ROADS:{REGION_BUILDING:xu.ROADS,NAME:"Roads",DESCRIPTION:"Roads allow troops to travel faster through the region",COST:[{resource:su.LOG,amount:20},{resource:su.PLANK,amount:10},{resource:su.STONE,amount:100},{resource:su.CUT_STONE,amount:50}]},WATCHTOWER:{REGION_BUILDING:xu.WATCHTOWER,NAME:"Watchtower",DESCRIPTION:"Watchtower allows to gain insight into enemy neighbour regions troops information",COST:[{resource:su.LOG,amount:50},{resource:su.PLANK,amount:80},{resource:su.BRICKS,amount:20}]},GUARD_TOWER:{REGION_BUILDING:xu.GUARD_TOWER,NAME:"Guard tower",DESCRIPTION:"Guard tower adds passive defenses forces that cannot move to another region",COST:[{resource:su.LOG,amount:50},{resource:su.PLANK,amount:50},{resource:su.BOW,amount:5}]},HARBOUR:{REGION_BUILDING:xu.HARBOUR,NAME:"Harbour",DESCRIPTION:"Harbour allow your ships to station in this region",COST:[{resource:su.LOG,amount:50},{resource:su.PLANK,amount:50},{resource:su.COPPER,amount:20}]}}},$u={getSickness(e){const n=Object.entries(this.SICKNESS).find(n=>n[0]===Su[e]);if(n)return n[1];console.warn("Invalid sickness: "+Ou.prepareSicknessName(e))},SICKNESS:{COLD:{CHANCE:20,DURATION:20,LETHALITY:20},FLU:{CHANCE:10,DURATION:30,LETHALITY:40},PNEUMONIA:{CHANCE:5,DURATION:60,LETHALITY:70}}},Ku={SMALL_REFUGEE:{EVENT:Mu.SMALL_REFUGEE,CHANCE:.0023,MIN_POWER:3,MAX_POWER:7,PREREQUISITES:[],LOG:{MESSAGE:"Small group of refugees came to your village",LOG_TYPE:Du.LOG}},MEDIUM_REFUGEE:{EVENT:Mu.MEDIUM_REFUGEE,CHANCE:33e-5,MIN_POWER:10,MAX_POWER:20,PREREQUISITES:[ou.LONGHOUSE],LOG:{MESSAGE:"Medium group of refugees came to your village",LOG_TYPE:Du.LOG}},METEORITE:{EVENT:Mu.METEORITE,CHANCE:18e-5,MIN_POWER:100,MAX_POWER:200,PREREQUISITES:[ou.MOUNTAINS],LOG:{MESSAGE:"A meteoroid has fallen somewhere in the mountains",LOG_TYPE:Du.SUCCESS}}};var ju=function(e){return e[e.DEV=0]="DEV",e[e.KONGREGATE=1]="KONGREGATE",e[e.VK=2]="VK",e[e.ITCH=3]="ITCH",e}({});const Qu={production:!0,target:ju.KONGREGATE,gameName:"Villager Kings",saveName:"VillagerKingsSave",versionString:"1.3.9",saveVersion:iu.V1_0_0},qu={name:"New King",building:tu.ALL,effect:100,duration:90},Xu=ku,Zu=[{text:"Welcome to this quick tutorial that will guide you through basic controls of Villager Kings",position:{width:"250px",top:"180px",left:"275px"}},{text:'To the left you can see navigation menu that will allow you to browse tabs representing different aspects of your village<br><div class="tutorialCenter"><img src="assets/pictures/tutorials/village2.png"></div>',position:{width:"400px",top:"50px",left:"110px"}},{text:"Right now we are in the village tab and using top menu you can navigate between village regions",position:{width:"200px",top:"65px",left:"130px"}},{text:'In the middle of the village region you can see your buildings.<div class="tutorialCenter"><img src="assets/pictures/tutorials/village3.png"></div>There are many different types of buildings in this game. <br> Some of them produce items, others consume them to produce more advanced items. <br>Currently in your village there are only Huts which produce workers for your village.<br>Housing buildings cannot be stopped and require constant supply of food, fuel (in winter) and clothes',position:{width:"600px",top:"220px",left:"200px"}},{text:'Above your buildings you can see most important metrics for current region.<div class="tutorialCenter"><img src="assets/pictures/tutorials/village4.png"></div>For village those are:<br>1. Population of your village/max population<br>2. Free workers that can be assigned to work<br>3. Size of your empty land where you can build<br>4. Size of your whole village (all regions)<br>5. Your people happiness, which will influence their productivity<br>',position:{width:"400px",top:"130px",left:"110px"}},{text:"That's all here for now let's move into the Forest region using top menu and continue the tutorial there<br><img src=\"assets/pictures/tutorials/village1.png\">",position:{width:"400px",top:"180px",left:"200px"}}],Ju=[{text:"In the forest you have two working buildings<br>Logger's hut that cuts forest trees and produces logs<br>and Gatherer that collects various resources when wandering in the forest.<br><br>Gatherer has two operating modes<br>Worker working here can either focus on looking for food or useful and sometimes rare resources",position:{width:"400px",top:"240px",left:"200px"}},{text:'There are two icons on both sides of building name.<br>To the left there is details icon. If you hover over it, <br>a tooltip with more technical details regarding a building will popup (not active during tutorial).<div class="tutorialCenter"><img src="assets/pictures/tutorials/forest1.png"></div><br>To the right you can see a cog icon which allows you to stop and start production by hiring or firing worker<div class="tutorialCenter"><img src="assets/pictures/tutorials/forest2.png"></div>',position:{width:"450px",top:"200px",left:"150px"}},{text:"Above buildings you can see 'Build' and 'Demolish' buttons.<br>First one opens a window with all buildings you can build in this region.<br>In future you will discover many more types of building to build.<br>Second one allows you to set buildings to be demolished by free worker<br>You will receive small portion of resources used to build demolished building",position:{width:"450px",top:"100px",left:"50px"}},{text:"Now let's order your people to build more gatherers and continue to the 'Resources' tab in the left menu",position:{width:"250px",top:"180px",left:"275px"}}],eo=[{text:"Field region has many buildings with different mechanics than other regions.<br>Field, Orchard and Pasture buildings require Farm with workers <br>who will work on planting, sowing, harvesting and tending to animals.<br><br>Fields yearly cycle starts in spring, after you have selected what type of crops should be planted,<br>your Farm workers will start plowing the land and then sowing selected crop.<br>After sowing is completed your crops will start to grow until Autumn.<br>On autumn all crops will stop growing and will be ready for harvest performed by Farm workers.<br>If there are any crops not harvested by the beginning of winter they will wither and will be lost.<br><br>",position:{width:"400px",top:"150px",left:"200px"}},{text:"Orchards are a bit different. Those also need to be plowed and plants need to be planted,<br>after that they keep growing for several years without any work input.<br>Once they matured they will fruit every year with only harvest work required.<br><br>",position:{width:"400px",top:"150px",left:"200px"}},{text:"Pastures allow animals breeding. They require work input for the whole year (chores)<br>and animals require Hay to eat during winter.<br>If no hay is available animals can starve to death.<br> They eat grass and other natural food during other seasons.<br>Some animals produce animals products like eggs and milk which add to your food supplies.<br>All animals can be butchered for meat when butcher building is built.<br>Once animals are researched Hunters can try to tame animals for which there is empty pasture space.",position:{width:"400px",top:"150px",left:"200px"}}],no=[{text:"Most mountains buildings require mountains space instead of free land.<br>This mountain area is finite and after the building deplete resources it can be demolished to add empty land instead of back to mountains.<br><br>To gain more mountains areas you will need to run expeditions or conquer enemies (Army).<br><br>After geologist is unlocked and built he will start looking for ores deposits which is very slow process.<br>Once 20 deposits of certain resource has been found Pit Mine can be used to mine it.",position:{width:"400px",top:"150px",left:"200px"}}],lo=[{text:"In this special area Wonder buildings can be constructed.<br>These require much more resources and much more work to be completed.<br>Each Wonder building adds permanent buff corresponding to it's nature.<br>Wonder building also allows you to abdicate what performs soft reset and additionally award you with Royal Points to spend on Royal perks.<br>Wonder building and it's buff persist through soft resets and abdications.",position:{width:"400px",top:"150px",left:"200px"}}],to=[{text:"By the sea fishers can catch fish from the sea.<br>",position:{width:"400px",top:"150px",left:"200px"}}],io=[{text:"In this tab you can browse all of the resources that you have discovered<br>Next to the resource icon there is current amount that you have and storage limit for that resource.<br><br>Storage can be extended by building warehouses in the village",position:{width:"400px",top:"150px",left:"200px"}},{text:"To the right there are two additional icons present for each resource<br>First one allows you to set amount that will be reserved and no automated action can use them<br>Player initiated action can on the other hand use reserved resources<br>(keep in mind that some actions like for example invasion can still reduce resources below reserved amount!)<br><br>Second icon toggles which resources should be highlighted in the game header",position:{width:"400px",top:"150px",left:"200px"}},{text:"In the header you can highlight resources to know their amounts in any tab of the game",position:{width:"400px",top:"30px",left:"30px"}},{text:"That's all for the basics.<br>To really start progressing you should work towards building Workshop in the village which will open new opportunities<br>",position:{width:"400px",top:"150px",left:"200px"}}],so=[{text:"<br>Winter is coming!<br>",position:{width:"400px",top:"150px",left:"200px"}},{text:"During winter things get much harder.<br><br>Your people will need to start heating their houses or they will freeze, get sick and die.<br><br> To stop freezing your people will need a good supply of things to burn.<br>To heat houses villagers can use Fuel, coal, logs or brushwood",position:{width:"400px",top:"150px",left:"200px"}},{text:"It may be a good idea to reserve or entirely block your people from burning some important resources that you need for building or cooking food.",position:{width:"400px",top:"30px",left:"30px"}},{text:"If your people get sick you will need medicine to increase their chance for getting better.<br><br>Pasture animals may also die during winter when you do not have enough hay to feed them.",position:{width:"400px",top:"150px",left:"200px"}}],ro=500,uo=500,oo=100,ao=.05,co=100,ho=3600,go=[{population:0,name:"Village"},{population:2e3,name:"Town"}],po=Fu,mo=Uu,fo=Hu,So=Gu,Eo=Bu,vo=Vu,Ro=Wu,Oo=Yu,To=zu,Co=$u,Io=Ku;class bo{}class yo{constructor(){this.title="app"}isIE(){return-1!==navigator.userAgent.indexOf("MSIE")||1==!!document.documentMode}catchContextMenu(e){return!1}}let Ao=null;function No(){return Ao}const _o=new Re("DocumentToken");let wo=(()=>{class e{}return e.\u0275prov=re({factory:Po,token:e,providedIn:"platform"}),e})();function Po(){return Ae(Do)}const Mo=new Re("Location Initialized");let Do=(()=>{class e extends wo{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=No().getLocation(),this._history=No().getHistory()}getBaseHrefFromDOM(){return No().getBaseHref(this._doc)}onPopState(e){No().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)}onHashChange(e){No().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,n,l){Lo()?this._history.pushState(e,n,l):this.location.hash=l}replaceState(e,n,l){Lo()?this._history.replaceState(e,n,l):this.location.hash=l}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return e.\u0275prov=re({factory:xo,token:e,providedIn:"platform"}),e})();function Lo(){return!!window.history.pushState}function xo(){return new Do(Ae(_o))}function ko(e,n){if(0==e.length)return n;if(0==n.length)return e;let l=0;return e.endsWith("/")&&l++,n.startsWith("/")&&l++,2==l?e+n.substring(1):1==l?e+n:e+"/"+n}function Fo(e){const n=e.match(/#|\?|$/),l=n&&n.index||e.length;return e.slice(0,l-("/"===e[l-1]?1:0))+e.slice(l)}function Uo(e){return e&&"?"!==e[0]?"?"+e:e}let Ho=(()=>{class e{}return e.\u0275prov=re({factory:Go,token:e,providedIn:"root"}),e})();function Go(e){const n=Ae(_o).location;return new Vo(Ae(wo),n&&n.origin||"")}const Bo=new Re("appBaseHref");class Vo extends Ho{constructor(e,n){if(super(),this._platformLocation=e,null==n&&(n=this._platformLocation.getBaseHrefFromDOM()),null==n)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=n}onPopState(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return ko(this._baseHref,e)}path(e=!1){const n=this._platformLocation.pathname+Uo(this._platformLocation.search),l=this._platformLocation.hash;return l&&e?`${n}${l}`:n}pushState(e,n,l,t){const i=this.prepareExternalUrl(l+Uo(t));this._platformLocation.pushState(e,n,i)}replaceState(e,n,l,t){const i=this.prepareExternalUrl(l+Uo(t));this._platformLocation.replaceState(e,n,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}class Wo extends Ho{constructor(e,n){super(),this._platformLocation=e,this._baseHref="",null!=n&&(this._baseHref=n)}onPopState(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}getBaseHref(){return this._baseHref}path(e=!1){let n=this._platformLocation.hash;return null==n&&(n="#"),n.length>0?n.substring(1):n}prepareExternalUrl(e){const n=ko(this._baseHref,e);return n.length>0?"#"+n:n}pushState(e,n,l,t){let i=this.prepareExternalUrl(l+Uo(t));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(e,n,i)}replaceState(e,n,l,t){let i=this.prepareExternalUrl(l+Uo(t));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(e,n,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}let Yo=(()=>{class e{constructor(e,n){this._subject=new Ii,this._urlChangeListeners=[],this._platformStrategy=e;const l=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=Fo($o(l)),this._platformStrategy.onPopState(e=>{this._subject.emit({url:this.path(!0),pop:!0,state:e.state,type:e.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,n=""){return this.path()==this.normalize(e+Uo(n))}normalize(n){return e.stripTrailingSlash(function(e,n){return e&&n.startsWith(e)?n.substring(e.length):n}(this._baseHref,$o(n)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,n="",l=null){this._platformStrategy.pushState(l,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Uo(n)),l)}replaceState(e,n="",l=null){this._platformStrategy.replaceState(l,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Uo(n)),l)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(e=>{this._notifyUrlChangeListeners(e.url,e.state)}))}_notifyUrlChangeListeners(e="",n){this._urlChangeListeners.forEach(l=>l(e,n))}subscribe(e,n,l){return this._subject.subscribe({next:e,error:n,complete:l})}}return e.normalizeQueryParams=Uo,e.joinWithSlash=ko,e.stripTrailingSlash=Fo,e.\u0275prov=re({factory:zo,token:e,providedIn:"root"}),e})();function zo(){return new Yo(Ae(Ho),Ae(wo))}function $o(e){return e.replace(/\/index.html$/,"")}var Ko=function(e){return e[e.Decimal=0]="Decimal",e[e.Percent=1]="Percent",e[e.Currency=2]="Currency",e[e.Scientific=3]="Scientific",e}({}),jo=function(e){return e[e.Zero=0]="Zero",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Few=3]="Few",e[e.Many=4]="Many",e[e.Other=5]="Other",e}({}),Qo=function(e){return e[e.Decimal=0]="Decimal",e[e.Group=1]="Group",e[e.List=2]="List",e[e.PercentSign=3]="PercentSign",e[e.PlusSign=4]="PlusSign",e[e.MinusSign=5]="MinusSign",e[e.Exponential=6]="Exponential",e[e.SuperscriptingExponent=7]="SuperscriptingExponent",e[e.PerMille=8]="PerMille",e[e[1/0]=9]="Infinity",e[e.NaN=10]="NaN",e[e.TimeSeparator=11]="TimeSeparator",e[e.CurrencyDecimal=12]="CurrencyDecimal",e[e.CurrencyGroup=13]="CurrencyGroup",e}({});function qo(e,n){const l=Oi(e),t=l[Ci.NumberSymbols][n];if(void 0===t){if(n===Qo.CurrencyDecimal)return l[Ci.NumberSymbols][Qo.Decimal];if(n===Qo.CurrencyGroup)return l[Ci.NumberSymbols][Qo.Group]}return t}const Xo=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function Zo(e){const n=parseInt(e);if(isNaN(n))throw new Error("Invalid integer literal when parsing "+e);return n}class Jo{}class ea extends Jo{constructor(e){super(),this.locale=e}getPluralCategory(e,n){switch(function(e){return Oi(e)[Ci.PluralCase]}(n||this.locale)(e)){case jo.Zero:return"zero";case jo.One:return"one";case jo.Two:return"two";case jo.Few:return"few";case jo.Many:return"many";default:return"other"}}}function na(e,n){n=encodeURIComponent(n);for(const l of e.split(";")){const e=l.indexOf("="),[t,i]=-1==e?[l,""]:[l.slice(0,e),l.slice(e+1)];if(t.trim()===n)return decodeURIComponent(i)}return null}class la{constructor(e,n,l,t){this._iterableDiffers=e,this._keyValueDiffers=n,this._ngEl=l,this._renderer=t,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&($n(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachChangedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachRemovedItem(e=>{e.previousValue&&this._toggleClass(e.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(e=>{if("string"!=typeof e.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got "+he(e.item));this._toggleClass(e.item,!0)}),e.forEachRemovedItem(e=>this._toggleClass(e.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!0)):Object.keys(e).forEach(n=>this._toggleClass(n,!!e[n])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!1)):Object.keys(e).forEach(e=>this._toggleClass(e,!1)))}_toggleClass(e,n){(e=e.trim())&&e.split(/\s+/g).forEach(e=>{n?this._renderer.addClass(this._ngEl.nativeElement,e):this._renderer.removeClass(this._ngEl.nativeElement,e)})}}class ta{constructor(e,n,l,t){this.$implicit=e,this.ngForOf=n,this.index=l,this.count=t}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}class ia{constructor(e,n,l){this._viewContainer=e,this._template=n,this._differs=l,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){nn()&&null!=e&&"function"!=typeof e&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(e)}. See https://angular.io/api/common/NgForOf#change-propagation for more information.`),this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const l=this._ngForOf;if(!this._differ&&l)try{this._differ=this._differs.find(l).create(this.ngForTrackBy)}catch(n){throw new Error(`Cannot find a differ supporting object '${l}' of type '${e=l,e.name||typeof e}'. NgFor only supports binding to Iterables such as Arrays.`)}}var e;if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const n=[];e.forEachOperation((e,l,t)=>{if(null==e.previousIndex){const l=this._viewContainer.createEmbeddedView(this._template,new ta(null,this._ngForOf,-1,-1),null===t?void 0:t),i=new sa(e,l);n.push(i)}else if(null==t)this._viewContainer.remove(null===l?void 0:l);else if(null!==l){const i=this._viewContainer.get(l);this._viewContainer.move(i,t);const s=new sa(e,i);n.push(s)}});for(let l=0;l<n.length;l++)this._perViewChange(n[l].view,n[l].record);for(let l=0,t=this._viewContainer.length;l<t;l++){const e=this._viewContainer.get(l);e.context.index=l,e.context.count=t,e.context.ngForOf=this._ngForOf}e.forEachIdentityChange(e=>{this._viewContainer.get(e.currentIndex).context.$implicit=e.item})}_perViewChange(e,n){e.context.$implicit=n.item}static ngTemplateContextGuard(e,n){return!0}}class sa{constructor(e,n){this.record=e,this.view=n}}class ra{constructor(e,n){this._viewContainer=e,this._context=new ua,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){oa("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){oa("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,n){return!0}}class ua{constructor(){this.$implicit=null,this.ngIf=null}}function oa(e,n){if(n&&!n.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${he(n)}'.`)}class aa{constructor(e,n){this._viewContainerRef=e,this._templateRef=n,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}class ca{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const n=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||n,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),n}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let n=0;n<this._defaultViews.length;n++)this._defaultViews[n].enforceState(e)}}}class ha{constructor(e,n,l){this.ngSwitch=l,l._addCase(),this._view=new aa(e,n)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}class da{constructor(e,n,l){this._ngEl=e,this._differs=n,this._renderer=l,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,n){const[l,t]=e.split(".");null!=(n=null!=n&&t?`${n}${t}`:n)?this._renderer.setStyle(this._ngEl.nativeElement,l,n):this._renderer.removeStyle(this._ngEl.nativeElement,l)}_applyChanges(e){e.forEachRemovedItem(e=>this._setStyle(e.key,null)),e.forEachAddedItem(e=>this._setStyle(e.key,e.currentValue)),e.forEachChangedItem(e=>this._setStyle(e.key,e.currentValue))}}function ga(e,n){return Error(`InvalidPipeArgument: '${n}' for pipe '${he(e)}'`)}const pa=/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D])\S*/g;class ma{transform(e){if(!e)return e;if("string"!=typeof e)throw ga(ma,e);return e.replace(pa,e=>e[0].toUpperCase()+e.substr(1).toLowerCase())}}class fa{constructor(e){this.differs=e,this.keyValues=[]}transform(e,n=Sa){if(!e||!(e instanceof Map)&&"object"!=typeof e)return null;this.differ||(this.differ=this.differs.find(e).create());const l=this.differ.diff(e);return l&&(this.keyValues=[],l.forEachItem(e=>{this.keyValues.push({key:e.key,value:e.currentValue})}),this.keyValues.sort(n)),this.keyValues}}function Sa(e,n){const l=e.key,t=n.key;if(l===t)return 0;if(void 0===l)return 1;if(void 0===t)return-1;if(null===l)return 1;if(null===t)return-1;if("string"==typeof l&&"string"==typeof t)return l<t?-1:1;if("number"==typeof l&&"number"==typeof t)return l-t;if("boolean"==typeof l&&"boolean"==typeof t)return l<t?-1:1;const i=String(l),s=String(t);return i==s?0:i<s?-1:1}class Ea{constructor(e){this._locale=e}transform(e,n,l){if(function(e){return null==e||""===e||e!=e}(e))return null;l=l||this._locale;try{return function(e,n,l){return function(e,n,l,t,i,s,r=!1){let u="",o=!1;if(isFinite(e)){let a=function(e){let n,l,t,i,s,r=Math.abs(e)+"",u=0;for((l=r.indexOf("."))>-1&&(r=r.replace(".","")),(t=r.search(/e/i))>0?(l<0&&(l=t),l+=+r.slice(t+1),r=r.substring(0,t)):l<0&&(l=r.length),t=0;"0"===r.charAt(t);t++);if(t===(s=r.length))n=[0],l=1;else{for(s--;"0"===r.charAt(s);)s--;for(l-=t,n=[],i=0;t<=s;t++,i++)n[i]=Number(r.charAt(t))}return l>22&&(n=n.splice(0,21),u=l-1,l=1),{digits:n,exponent:u,integerLen:l}}(e);r&&(a=function(e){if(0===e.digits[0])return e;const n=e.digits.length-e.integerLen;return e.exponent?e.exponent+=2:(0===n?e.digits.push(0,0):1===n&&e.digits.push(0),e.integerLen+=2),e}(a));let c=n.minInt,h=n.minFrac,d=n.maxFrac;if(s){const e=s.match(Xo);if(null===e)throw new Error(s+" is not a valid digit info");const n=e[1],l=e[3],t=e[5];null!=n&&(c=Zo(n)),null!=l&&(h=Zo(l)),null!=t?d=Zo(t):null!=l&&h>d&&(d=h)}!function(e,n,l){if(n>l)throw new Error(`The minimum number of digits after fraction (${n}) is higher than the maximum (${l}).`);let t=e.digits,i=t.length-e.integerLen;const s=Math.min(Math.max(n,i),l);let r=s+e.integerLen,u=t[r];if(r>0){t.splice(Math.max(e.integerLen,r));for(let e=r;e<t.length;e++)t[e]=0}else{i=Math.max(0,i),e.integerLen=1,t.length=Math.max(1,r=s+1),t[0]=0;for(let e=1;e<r;e++)t[e]=0}if(u>=5)if(r-1<0){for(let n=0;n>r;n--)t.unshift(0),e.integerLen++;t.unshift(1),e.integerLen++}else t[r-1]++;for(;i<Math.max(0,s);i++)t.push(0);let o=0!==s;const a=n+e.integerLen,c=t.reduceRight((function(e,n,l,t){return t[l]=(n+=e)<10?n:n-10,o&&(0===t[l]&&l>=a?t.pop():o=!1),n>=10?1:0}),0);c&&(t.unshift(c),e.integerLen++)}(a,h,d);let g=a.digits,p=a.integerLen;const m=a.exponent;let f=[];for(o=g.every(e=>!e);p<c;p++)g.unshift(0);for(;p<0;p++)g.unshift(0);p>0?f=g.splice(p,g.length):(f=g,g=[0]);const S=[];for(g.length>=n.lgSize&&S.unshift(g.splice(-n.lgSize,g.length).join(""));g.length>n.gSize;)S.unshift(g.splice(-n.gSize,g.length).join(""));g.length&&S.unshift(g.join("")),u=S.join(qo(l,t)),f.length&&(u+=qo(l,i)+f.join("")),m&&(u+=qo(l,Qo.Exponential)+"+"+m)}else u=qo(l,Qo.Infinity);return u=e<0&&!o?n.negPre+u+n.negSuf:n.posPre+u+n.posSuf,u}(e,function(e,n="-"){const l={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},t=e.split(";"),i=t[0],s=t[1],r=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],u=r[0],o=r[1]||"";l.posPre=u.substr(0,u.indexOf("#"));for(let c=0;c<o.length;c++){const e=o.charAt(c);"0"===e?l.minFrac=l.maxFrac=c+1:"#"===e?l.maxFrac=c+1:l.posSuf+=e}const a=u.split(",");if(l.gSize=a[1]?a[1].length:0,l.lgSize=a[2]||a[1]?(a[2]||a[1]).length:0,s){const e=i.length-l.posPre.length-l.posSuf.length,n=s.indexOf("#");l.negPre=s.substr(0,n).replace(/'/g,""),l.negSuf=s.substr(n+e).replace(/'/g,"")}else l.negPre=n+l.posPre,l.negSuf=l.posSuf;return l}(function(e,n){return Oi(e)[Ci.NumberFormats][n]}(n,Ko.Decimal),qo(n,Qo.MinusSign)),n,Qo.Group,Qo.Decimal,l)}(function(e){if("string"==typeof e&&!isNaN(Number(e)-parseFloat(e)))return Number(e);if("number"!=typeof e)throw new Error(e+" is not a number");return e}(e),l,n)}catch(t){throw ga(Ea,t.message)}}}class va{}let Ra=(()=>{class e{}return e.\u0275prov=re({token:e,providedIn:"root",factory:()=>new Oa(Ae(_o),window,Ae(We))}),e})();class Oa{constructor(e,n,l){this.document=e,this.window=n,this.errorHandler=l,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(e){this.supportScrollRestoration()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(this.supportScrollRestoration()){const n=this.document.getElementById(e)||this.document.getElementsByName(e)[0];n&&this.scrollToElement(n)}}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=e)}}scrollToElement(e){const n=e.getBoundingClientRect(),l=n.left+this.window.pageXOffset,t=n.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(l-i[0],t-i[1])}supportScrollRestoration(){try{if(!this.window||!this.window.scrollTo)return!1;const e=Ta(this.window.history)||Ta(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}}function Ta(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}function Ca(...e){let n=e[e.length-1];return b(n)?(e.pop(),x(e,n)):Y(e)}class Ia extends C{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return n&&!n.closed&&e.next(this._value),n}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new R;return this._value}next(e){super.next(this._value=e)}}const ba=(()=>{function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e})();class ya extends p{notifyNext(e,n,l,t,i){this.destination.next(n)}notifyError(e,n){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class Aa extends p{constructor(e,n,l){super(),this.parent=e,this.outerValue=n,this.outerIndex=l,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function Na(e,n,l,t,i=new Aa(e,l,t)){if(!i.closed)return n instanceof E?n.subscribe(i):L(n)(i)}const _a={};class wa{constructor(e){this.resultSelector=e}call(e,n){return n.subscribe(new Pa(e,this.resultSelector))}}class Pa extends ya{constructor(e,n){super(e),this.resultSelector=n,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(_a),this.observables.push(e)}_complete(){const e=this.observables,n=e.length;if(0===n)this.destination.complete();else{this.active=n,this.toRespond=n;for(let l=0;l<n;l++)this.add(Na(this,e[l],void 0,l))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,n,l){const t=this.values,i=this.toRespond?t[l]===_a?--this.toRespond:this.toRespond:0;t[l]=n,0===i&&(this.resultSelector?this._tryResultSelector(t):this.destination.next(t.slice()))}_tryResultSelector(e){let n;try{n=this.resultSelector.apply(this,e)}catch(l){return void this.destination.error(l)}this.destination.next(n)}}const Ma=new E(e=>e.complete());function Da(e){return e?function(e){return new E(n=>e.schedule(()=>n.complete()))}(e):Ma}function La(e){return new E(n=>{let l;try{l=e()}catch(t){return void n.error(t)}return(l?k(l):Da()).subscribe(n)})}function xa(){return W(1)}function ka(e,n){return function(l){return l.lift(new Fa(e,n))}}class Fa{constructor(e,n){this.predicate=e,this.thisArg=n}call(e,n){return n.subscribe(new Ua(e,this.predicate,this.thisArg))}}class Ua extends p{constructor(e,n,l){super(e),this.predicate=n,this.thisArg=l,this.count=0}_next(e){let n;try{n=this.predicate.call(this.thisArg,e,this.count++)}catch(l){return void this.destination.error(l)}n&&this.destination.next(e)}}const Ha=(()=>{function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e})();function Ga(e){return function(n){return 0===e?Da():n.lift(new Ba(e))}}class Ba{constructor(e){if(this.total=e,this.total<0)throw new Ha}call(e,n){return n.subscribe(new Va(e,this.total))}}class Va extends p{constructor(e,n){super(e),this.total=n,this.ring=new Array,this.count=0}_next(e){const n=this.ring,l=this.total,t=this.count++;n.length<l?n.push(e):n[t%l]=e}_complete(){const e=this.destination;let n=this.count;if(n>0){const l=this.count>=this.total?this.total:this.count,t=this.ring;for(let i=0;i<l;i++){const i=n++%l;e.next(t[i])}}e.complete()}}function Wa(e=$a){return n=>n.lift(new Ya(e))}class Ya{constructor(e){this.errorFactory=e}call(e,n){return n.subscribe(new za(e,this.errorFactory))}}class za extends p{constructor(e,n){super(e),this.errorFactory=n,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let n;try{n=this.errorFactory()}catch(e){n=e}this.destination.error(n)}}}function $a(){return new ba}function Ka(e=null){return n=>n.lift(new ja(e))}class ja{constructor(e){this.defaultValue=e}call(e,n){return n.subscribe(new Qa(e,this.defaultValue))}}class Qa extends p{constructor(e,n){super(e),this.defaultValue=n,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function qa(e){return function(n){const l=new Xa(e),t=n.lift(l);return l.caught=t}}class Xa{constructor(e){this.selector=e}call(e,n){return n.subscribe(new Za(e,this.selector,this.caught))}}class Za extends U{constructor(e,n,l){super(e),this.selector=n,this.caught=l}error(e){if(!this.isStopped){let l;try{l=this.selector(e,this.caught)}catch(n){return void super.error(n)}this._unsubscribeAndRecycle();const t=new F(this);this.add(t);const i=H(l,t);i!==t&&this.add(i)}}}function Ja(e){return n=>0===e?Da():n.lift(new ec(e))}class ec{constructor(e){if(this.total=e,this.total<0)throw new Ha}call(e,n){return n.subscribe(new nc(e,this.total))}}class nc extends p{constructor(e,n){super(e),this.total=n,this.count=0}_next(e){const n=this.total,l=++this.count;l<=n&&(this.destination.next(e),l===n&&(this.destination.complete(),this.unsubscribe()))}}function lc(e,n){const l=arguments.length>=2;return t=>t.pipe(e?ka((n,l)=>e(n,l,t)):S,Ja(1),l?Ka(n):Wa(()=>new ba))}function tc(){}function ic(e,n,l){return function(t){return t.lift(new sc(e,n,l))}}class sc{constructor(e,n,l){this.nextOrObserver=e,this.error=n,this.complete=l}call(e,n){return n.subscribe(new rc(e,this.nextOrObserver,this.error,this.complete))}}class rc extends p{constructor(e,n,l,i){super(e),this._tapNext=tc,this._tapError=tc,this._tapComplete=tc,this._tapError=l||tc,this._tapComplete=i||tc,t(n)?(this._context=this,this._tapNext=n):n&&(this._context=n,this._tapNext=n.next||tc,this._tapError=n.error||tc,this._tapComplete=n.complete||tc)}_next(e){try{this._tapNext.call(this._context,e)}catch(n){return void this.destination.error(n)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}class uc{constructor(e,n,l){this.predicate=e,this.thisArg=n,this.source=l}call(e,n){return n.subscribe(new oc(e,this.predicate,this.thisArg,this.source))}}class oc extends p{constructor(e,n,l,t){super(e),this.predicate=n,this.thisArg=l,this.source=t,this.index=0,this.thisArg=l||this}notifyComplete(e){this.destination.next(e),this.destination.complete()}_next(e){let n=!1;try{n=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(l){return void this.destination.error(l)}n||this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}function ac(e,n){return"function"==typeof n?l=>l.pipe(ac((l,t)=>k(e(l,t)).pipe(y((e,i)=>n(l,e,t,i))))):n=>n.lift(new cc(e))}class cc{constructor(e){this.project=e}call(e,n){return n.subscribe(new hc(e,this.project))}}class hc extends U{constructor(e,n){super(e),this.project=n,this.index=0}_next(e){let n;const l=this.index++;try{n=this.project(e,l)}catch(t){return void this.destination.error(t)}this._innerSub(n)}_innerSub(e){const n=this.innerSubscription;n&&n.unsubscribe();const l=new F(this),t=this.destination;t.add(l),this.innerSubscription=H(e,l),this.innerSubscription!==l&&t.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;e&&!e.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}function dc(...e){return xa()(Ca(...e))}function gc(...e){const n=e[e.length-1];return b(n)?(e.pop(),l=>dc(e,l,n)):n=>dc(e,n)}class pc{constructor(e,n,l=!1){this.accumulator=e,this.seed=n,this.hasSeed=l}call(e,n){return n.subscribe(new mc(e,this.accumulator,this.seed,this.hasSeed))}}class mc extends p{constructor(e,n,l,t){super(e),this.accumulator=n,this._seed=l,this.hasSeed=t,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const n=this.index++;let l;try{l=this.accumulator(this.seed,e,n)}catch(t){this.destination.error(t)}this.seed=l,this.destination.next(l)}}function fc(e,n){return G(e,n,1)}class Sc{constructor(e){this.callback=e}call(e,n){return n.subscribe(new Ec(e,this.callback))}}class Ec extends p{constructor(e,n){super(e),this.add(new h(n))}}class vc{constructor(e,n){this.id=e,this.url=n}}class Rc extends vc{constructor(e,n,l="imperative",t=null){super(e,n),this.navigationTrigger=l,this.restoredState=t}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Oc extends vc{constructor(e,n,l){super(e,n),this.urlAfterRedirects=l}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Tc extends vc{constructor(e,n,l){super(e,n),this.reason=l}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Cc extends vc{constructor(e,n,l){super(e,n),this.error=l}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ic extends vc{constructor(e,n,l,t){super(e,n),this.urlAfterRedirects=l,this.state=t}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bc extends vc{constructor(e,n,l,t){super(e,n),this.urlAfterRedirects=l,this.state=t}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yc extends vc{constructor(e,n,l,t,i){super(e,n),this.urlAfterRedirects=l,this.state=t,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ac extends vc{constructor(e,n,l,t){super(e,n),this.urlAfterRedirects=l,this.state=t}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Nc extends vc{constructor(e,n,l,t){super(e,n),this.urlAfterRedirects=l,this.state=t}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _c{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class wc{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Pc{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mc{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Dc{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Lc{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xc{constructor(e,n,l){this.routerEvent=e,this.position=n,this.anchor=l}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class kc{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function Fc(e){return new kc(e)}function Uc(e){const n=Error("NavigationCancelingError: "+e);return n.ngNavigationCancelingError=!0,n}function Hc(e,n,l){const t=l.path.split("/");if(t.length>e.length)return null;if("full"===l.pathMatch&&(n.hasChildren()||t.length<e.length))return null;const i={};for(let s=0;s<t.length;s++){const n=t[s],l=e[s];if(n.startsWith(":"))i[n.substring(1)]=l;else if(n!==l.path)return null}return{consumed:e.slice(0,t.length),posParams:i}}function Gc(e,n){const l=Object.keys(e),t=Object.keys(n);if(!l||!t||l.length!=t.length)return!1;let i;for(let s=0;s<l.length;s++)if(i=l[s],!Bc(e[i],n[i]))return!1;return!0}function Bc(e,n){return Array.isArray(e)&&Array.isArray(n)?e.length==n.length&&e.every(e=>n.indexOf(e)>-1):e===n}function Vc(e){return Array.prototype.concat.apply([],e)}function Wc(e){return e.length>0?e[e.length-1]:null}function Yc(e,n){for(const l in e)e.hasOwnProperty(l)&&n(e[l],l)}function zc(e){return Qn(e)?e:jn(e)?k(Promise.resolve(e)):Ca(e)}function $c(e,n,l){return l?function(e,n){return Gc(e,n)}(e.queryParams,n.queryParams)&&function e(n,l){if(!qc(n.segments,l.segments))return!1;if(n.numberOfChildren!==l.numberOfChildren)return!1;for(const t in l.children){if(!n.children[t])return!1;if(!e(n.children[t],l.children[t]))return!1}return!0}(e.root,n.root):function(e,n){return Object.keys(n).length<=Object.keys(e).length&&Object.keys(n).every(l=>Bc(e[l],n[l]))}(e.queryParams,n.queryParams)&&function e(n,l){return function n(l,t,i){if(l.segments.length>i.length)return!!qc(l.segments.slice(0,i.length),i)&&!t.hasChildren();if(l.segments.length===i.length){if(!qc(l.segments,i))return!1;for(const n in t.children){if(!l.children[n])return!1;if(!e(l.children[n],t.children[n]))return!1}return!0}{const e=i.slice(0,l.segments.length),s=i.slice(l.segments.length);return!!qc(l.segments,e)&&!!l.children.primary&&n(l.children.primary,t,s)}}(n,l,l.segments)}(e.root,n.root)}class Kc{constructor(e,n,l){this.root=e,this.queryParams=n,this.fragment=l}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Fc(this.queryParams)),this._queryParamMap}toString(){return eh.serialize(this)}}class jc{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Yc(n,(e,n)=>e.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return nh(this)}}class Qc{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=Fc(this.parameters)),this._parameterMap}toString(){return uh(this)}}function qc(e,n){return e.length===n.length&&e.every((e,l)=>e.path===n[l].path)}function Xc(e,n){let l=[];return Yc(e.children,(e,t)=>{"primary"===t&&(l=l.concat(n(e,t)))}),Yc(e.children,(e,t)=>{"primary"!==t&&(l=l.concat(n(e,t)))}),l}class Zc{}class Jc{parse(e){const n=new dh(e);return new Kc(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){return`${"/"+function e(n,l){if(!n.hasChildren())return nh(n);if(l){const l=n.children.primary?e(n.children.primary,!1):"",t=[];return Yc(n.children,(n,l)=>{"primary"!==l&&t.push(`${l}:${e(n,!1)}`)}),t.length>0?`${l}(${t.join("//")})`:l}{const l=Xc(n,(l,t)=>"primary"===t?[e(n.children.primary,!1)]:[`${t}:${e(l,!1)}`]);return`${nh(n)}/(${l.join("//")})`}}(e.root,!0)}${function(e){const n=Object.keys(e).map(n=>{const l=e[n];return Array.isArray(l)?l.map(e=>`${th(n)}=${th(e)}`).join("&"):`${th(n)}=${th(l)}`});return n.length?"?"+n.join("&"):""}(e.queryParams)}${"string"==typeof e.fragment?"#"+encodeURI(e.fragment):""}`}}const eh=new Jc;function nh(e){return e.segments.map(e=>uh(e)).join("/")}function lh(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function th(e){return lh(e).replace(/%3B/gi,";")}function ih(e){return lh(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function sh(e){return decodeURIComponent(e)}function rh(e){return sh(e.replace(/\+/g,"%20"))}function uh(e){return`${ih(e.path)}${n=e.parameters,Object.keys(n).map(e=>`;${ih(e)}=${ih(n[e])}`).join("")}`;var n}const oh=/^[^\/()?;=#]+/;function ah(e){const n=e.match(oh);return n?n[0]:""}const ch=/^[^=?&#]+/,hh=/^[^?&#]+/;class dh{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new jc([],{}):new jc([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let l={};return this.peekStartsWith("(")&&(l=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(l.primary=new jc(e,n)),l}parseSegment(){const e=ah(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Qc(sh(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=ah(this.remaining);if(!n)return;this.capture(n);let l="";if(this.consumeOptional("=")){const e=ah(this.remaining);e&&(l=e,this.capture(l))}e[sh(n)]=sh(l)}parseQueryParam(e){const n=function(e){const n=e.match(ch);return n?n[0]:""}(this.remaining);if(!n)return;this.capture(n);let l="";if(this.consumeOptional("=")){const e=function(e){const n=e.match(hh);return n?n[0]:""}(this.remaining);e&&(l=e,this.capture(l))}const t=rh(n),i=rh(l);if(e.hasOwnProperty(t)){let n=e[t];Array.isArray(n)||(n=[n],e[t]=n),n.push(i)}else e[t]=i}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const l=ah(this.remaining),t=this.remaining[l.length];if("/"!==t&&")"!==t&&";"!==t)throw new Error(`Cannot parse url '${this.url}'`);let i=void 0;l.indexOf(":")>-1?(i=l.substr(0,l.indexOf(":")),this.capture(i),this.capture(":")):e&&(i="primary");const s=this.parseChildren();n[i]=1===Object.keys(s).length?s.primary:new jc([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class gh{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=ph(e,this._root);return n?n.children.map(e=>e.value):[]}firstChild(e){const n=ph(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=mh(e,this._root);return n.length<2?[]:n[n.length-2].children.map(e=>e.value).filter(n=>n!==e)}pathFromRoot(e){return mh(e,this._root).map(e=>e.value)}}function ph(e,n){if(e===n.value)return n;for(const l of n.children){const n=ph(e,l);if(n)return n}return null}function mh(e,n){if(e===n.value)return[n];for(const l of n.children){const t=mh(e,l);if(t.length)return t.unshift(n),t}return[]}class fh{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function Sh(e){const n={};return e&&e.children.forEach(e=>n[e.value.outlet]=e),n}class Eh extends gh{constructor(e,n){super(e),this.snapshot=n,Ih(this,e)}toString(){return this.snapshot.toString()}}function vh(e,n){const l=function(e,n){const l=new Th([],{},{},"",{},"primary",n,null,e.root,-1,{});return new Ch("",new fh(l,[]))}(e,n),t=new Ia([new Qc("",{})]),i=new Ia({}),s=new Ia({}),r=new Ia({}),u=new Ia(""),o=new Rh(t,i,r,u,s,"primary",n,l.root);return o.snapshot=l.root,new Eh(new fh(o,[]),l)}class Rh{constructor(e,n,l,t,i,s,r,u){this.url=e,this.params=n,this.queryParams=l,this.fragment=t,this.data=i,this.outlet=s,this.component=r,this._futureSnapshot=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(y(e=>Fc(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(y(e=>Fc(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Oh(e,n="emptyOnly"){const l=e.pathFromRoot;let t=0;if("always"!==n)for(t=l.length-1;t>=1;){const e=l[t],n=l[t-1];if(e.routeConfig&&""===e.routeConfig.path)t--;else{if(n.component)break;t--}}return function(e){return e.reduce((e,n)=>({params:Object.assign(Object.assign({},e.params),n.params),data:Object.assign(Object.assign({},e.data),n.data),resolve:Object.assign(Object.assign({},e.resolve),n._resolvedData)}),{params:{},data:{},resolve:{}})}(l.slice(t))}class Th{constructor(e,n,l,t,i,s,r,u,o,a,c){this.url=e,this.params=n,this.queryParams=l,this.fragment=t,this.data=i,this.outlet=s,this.component=r,this.routeConfig=u,this._urlSegment=o,this._lastPathIndex=a,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Fc(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Fc(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(e=>e.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ch extends gh{constructor(e,n){super(n),this.url=e,Ih(this,n)}toString(){return bh(this._root)}}function Ih(e,n){n.value._routerState=e,n.children.forEach(n=>Ih(e,n))}function bh(e){const n=e.children.length>0?` { ${e.children.map(bh).join(", ")} } `:"";return`${e.value}${n}`}function yh(e){if(e.snapshot){const n=e.snapshot,l=e._futureSnapshot;e.snapshot=l,Gc(n.queryParams,l.queryParams)||e.queryParams.next(l.queryParams),n.fragment!==l.fragment&&e.fragment.next(l.fragment),Gc(n.params,l.params)||e.params.next(l.params),function(e,n){if(e.length!==n.length)return!1;for(let l=0;l<e.length;++l)if(!Gc(e[l],n[l]))return!1;return!0}(n.url,l.url)||e.url.next(l.url),Gc(n.data,l.data)||e.data.next(l.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function Ah(e,n){var l,t;return Gc(e.params,n.params)&&qc(l=e.url,t=n.url)&&l.every((e,n)=>Gc(e.parameters,t[n].parameters))&&!(!e.parent!=!n.parent)&&(!e.parent||Ah(e.parent,n.parent))}function Nh(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function _h(e,n,l,t,i){let s={};return t&&Yc(t,(e,n)=>{s[n]=Array.isArray(e)?e.map(e=>""+e):""+e}),new Kc(l.root===e?n:function e(n,l,t){const i={};return Yc(n.children,(n,s)=>{i[s]=n===l?t:e(n,l,t)}),new jc(n.segments,i)}(l.root,e,n),s,i)}class wh{constructor(e,n,l){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=l,e&&l.length>0&&Nh(l[0]))throw new Error("Root segment cannot have matrix parameters");const t=l.find(e=>"object"==typeof e&&null!=e&&e.outlets);if(t&&t!==Wc(l))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ph{constructor(e,n,l){this.segmentGroup=e,this.processChildren=n,this.index=l}}function Mh(e){return"object"==typeof e&&null!=e&&e.outlets?e.outlets.primary:""+e}function Dh(e,n,l){if(e||(e=new jc([],{})),0===e.segments.length&&e.hasChildren())return Lh(e,n,l);const t=function(e,n,l){let t=0,i=n;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(t>=l.length)return s;const n=e.segments[i],r=Mh(l[t]),u=t<l.length-1?l[t+1]:null;if(i>0&&void 0===r)break;if(r&&u&&"object"==typeof u&&void 0===u.outlets){if(!Uh(r,u,n))return s;t+=2}else{if(!Uh(r,{},n))return s;t++}i++}return{match:!0,pathIndex:i,commandIndex:t}}(e,n,l),i=l.slice(t.commandIndex);if(t.match&&t.pathIndex<e.segments.length){const n=new jc(e.segments.slice(0,t.pathIndex),{});return n.children.primary=new jc(e.segments.slice(t.pathIndex),e.children),Lh(n,0,i)}return t.match&&0===i.length?new jc(e.segments,{}):t.match&&!e.hasChildren()?xh(e,n,l):t.match?Lh(e,0,i):xh(e,n,l)}function Lh(e,n,l){if(0===l.length)return new jc(e.segments,{});{const t=function(e){return"object"==typeof e[0]&&null!==e[0]&&e[0].outlets?e[0].outlets:{primary:e}}(l),i={};return Yc(t,(l,t)=>{null!==l&&(i[t]=Dh(e.children[t],n,l))}),Yc(e.children,(e,n)=>{void 0===t[n]&&(i[n]=e)}),new jc(e.segments,i)}}function xh(e,n,l){const t=e.segments.slice(0,n);let i=0;for(;i<l.length;){if("object"==typeof l[i]&&null!==l[i]&&void 0!==l[i].outlets){const e=kh(l[i].outlets);return new jc(t,e)}if(0===i&&Nh(l[0])){t.push(new Qc(e.segments[n].path,l[0])),i++;continue}const s=Mh(l[i]),r=i<l.length-1?l[i+1]:null;s&&r&&Nh(r)?(t.push(new Qc(s,Fh(r))),i+=2):(t.push(new Qc(s,{})),i++)}return new jc(t,{})}function kh(e){const n={};return Yc(e,(e,l)=>{null!==e&&(n[l]=xh(new jc([],{}),0,e))}),n}function Fh(e){const n={};return Yc(e,(e,l)=>n[l]=""+e),n}function Uh(e,n,l){return e==l.path&&Gc(n,l.parameters)}class Hh{constructor(e,n,l,t){this.routeReuseStrategy=e,this.futureState=n,this.currState=l,this.forwardEvent=t}activate(e){const n=this.futureState._root,l=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,l,e),yh(this.futureState.root),this.activateChildRoutes(n,l,e)}deactivateChildRoutes(e,n,l){const t=Sh(n);e.children.forEach(e=>{const n=e.value.outlet;this.deactivateRoutes(e,t[n],l),delete t[n]}),Yc(t,(e,n)=>{this.deactivateRouteAndItsChildren(e,l)})}deactivateRoutes(e,n,l){const t=e.value,i=n?n.value:null;if(t===i)if(t.component){const i=l.getContext(t.outlet);i&&this.deactivateChildRoutes(e,n,i.children)}else this.deactivateChildRoutes(e,n,l);else i&&this.deactivateRouteAndItsChildren(n,l)}deactivateRouteAndItsChildren(e,n){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const l=n.getContext(e.value.outlet);if(l&&l.outlet){const n=l.outlet.detach(),t=l.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:n,route:e,contexts:t})}}deactivateRouteAndOutlet(e,n){const l=n.getContext(e.value.outlet);if(l){const t=Sh(e),i=e.value.component?l.children:n;Yc(t,(e,n)=>this.deactivateRouteAndItsChildren(e,i)),l.outlet&&(l.outlet.deactivate(),l.children.onOutletDeactivated())}}activateChildRoutes(e,n,l){const t=Sh(n);e.children.forEach(e=>{this.activateRoutes(e,t[e.value.outlet],l),this.forwardEvent(new Lc(e.value.snapshot))}),e.children.length&&this.forwardEvent(new Mc(e.value.snapshot))}activateRoutes(e,n,l){const t=e.value,i=n?n.value:null;if(yh(t),t===i)if(t.component){const i=l.getOrCreateContext(t.outlet);this.activateChildRoutes(e,n,i.children)}else this.activateChildRoutes(e,n,l);else if(t.component){const n=l.getOrCreateContext(t.outlet);if(this.routeReuseStrategy.shouldAttach(t.snapshot)){const e=this.routeReuseStrategy.retrieve(t.snapshot);this.routeReuseStrategy.store(t.snapshot,null),n.children.onOutletReAttached(e.contexts),n.attachRef=e.componentRef,n.route=e.route.value,n.outlet&&n.outlet.attach(e.componentRef,e.route.value),Gh(e.route)}else{const l=function(e){for(let n=e.parent;n;n=n.parent){const e=n.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(t.snapshot),i=l?l.module.componentFactoryResolver:null;n.attachRef=null,n.route=t,n.resolver=i,n.outlet&&n.outlet.activateWith(t,i),this.activateChildRoutes(e,null,n.children)}}else this.activateChildRoutes(e,null,l)}}function Gh(e){yh(e.value),e.children.forEach(Gh)}class Bh{constructor(e,n){this.routes=e,this.module=n}}function Vh(e){return"function"==typeof e}function Wh(e){return e instanceof Kc}class Yh{constructor(e){this.segmentGroup=e||null}}class zh{constructor(e){this.urlTree=e}}function $h(e){return new E(n=>n.error(new Yh(e)))}function Kh(e){return new E(n=>n.error(new zh(e)))}function jh(e){return new E(n=>n.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e}'`)))}class Qh{constructor(e,n,l,t,i){this.configLoader=n,this.urlSerializer=l,this.urlTree=t,this.config=i,this.allowRedirects=!0,this.ngModule=e.get(Pe)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,"primary").pipe(y(e=>this.createUrlTree(e,this.urlTree.queryParams,this.urlTree.fragment))).pipe(qa(e=>{if(e instanceof zh)return this.allowRedirects=!1,this.match(e.urlTree);if(e instanceof Yh)throw this.noMatchError(e);throw e}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,"primary").pipe(y(n=>this.createUrlTree(n,e.queryParams,e.fragment))).pipe(qa(e=>{if(e instanceof Yh)throw this.noMatchError(e);throw e}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,n,l){const t=e.segments.length>0?new jc([],{primary:e}):e;return new Kc(t,n,l)}expandSegmentGroup(e,n,l,t){return 0===l.segments.length&&l.hasChildren()?this.expandChildren(e,n,l).pipe(y(e=>new jc([],e))):this.expandSegment(e,l,n,l.segments,t,!0)}expandChildren(e,n,l){return function(e,n){if(0===Object.keys(e).length)return Ca({});const l=[],t=[],i={};return Yc(e,(e,s)=>{const r=n(s,e).pipe(y(e=>i[s]=e));"primary"===s?l.push(r):t.push(r)}),Ca.apply(null,l.concat(t)).pipe(xa(),function(e,n){const l=arguments.length>=2;return t=>t.pipe(e?ka((n,l)=>e(n,l,t)):S,Ga(1),l?Ka(n):Wa(()=>new ba))}(),y(()=>i))}(l.children,(l,t)=>this.expandSegmentGroup(e,n,t,l))}expandSegment(e,n,l,t,i,s){return Ca(...l).pipe(y(r=>this.expandSegmentAgainstRoute(e,n,l,r,t,i,s).pipe(qa(e=>{if(e instanceof Yh)return Ca(null);throw e}))),xa(),lc(e=>!!e),qa((e,l)=>{if(e instanceof ba||"EmptyError"===e.name){if(this.noLeftoversInUrl(n,t,i))return Ca(new jc([],{}));throw new Yh(n)}throw e}))}noLeftoversInUrl(e,n,l){return 0===n.length&&!e.children[l]}expandSegmentAgainstRoute(e,n,l,t,i,s,r){return Jh(t)!==s?$h(n):void 0===t.redirectTo?this.matchSegmentAgainstRoute(e,n,t,i):r&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,n,l,t,i,s):$h(n)}expandSegmentAgainstRouteUsingRedirect(e,n,l,t,i,s){return"**"===t.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,l,t,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,l,t,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,l,t){const i=this.applyRedirectCommands([],l.redirectTo,{});return l.redirectTo.startsWith("/")?Kh(i):this.lineralizeSegments(l,i).pipe(G(l=>{const i=new jc(l,{});return this.expandSegment(e,i,n,l,t,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,l,t,i,s){const{matched:r,consumedSegments:u,lastChild:o,positionalParamSegments:a}=qh(n,t,i);if(!r)return $h(n);const c=this.applyRedirectCommands(u,t.redirectTo,a);return t.redirectTo.startsWith("/")?Kh(c):this.lineralizeSegments(t,c).pipe(G(t=>this.expandSegment(e,n,l,t.concat(i.slice(o)),s,!1)))}matchSegmentAgainstRoute(e,n,l,t){if("**"===l.path)return l.loadChildren?this.configLoader.load(e.injector,l).pipe(y(e=>(l._loadedConfig=e,new jc(t,{})))):Ca(new jc(t,{}));const{matched:i,consumedSegments:s,lastChild:r}=qh(n,l,t);if(!i)return $h(n);const u=t.slice(r);return this.getChildConfig(e,l,t).pipe(G(e=>{const l=e.module,t=e.routes,{segmentGroup:i,slicedSegments:r}=function(e,n,l,t){return l.length>0&&function(e,n,l){return l.some(l=>Zh(e,n,l)&&"primary"!==Jh(l))}(e,l,t)?{segmentGroup:Xh(new jc(n,function(e,n){const l={};l.primary=n;for(const t of e)""===t.path&&"primary"!==Jh(t)&&(l[Jh(t)]=new jc([],{}));return l}(t,new jc(l,e.children)))),slicedSegments:[]}:0===l.length&&function(e,n,l){return l.some(l=>Zh(e,n,l))}(e,l,t)?{segmentGroup:Xh(new jc(e.segments,function(e,n,l,t){const i={};for(const s of l)Zh(e,n,s)&&!t[Jh(s)]&&(i[Jh(s)]=new jc([],{}));return Object.assign(Object.assign({},t),i)}(e,l,t,e.children))),slicedSegments:l}:{segmentGroup:e,slicedSegments:l}}(n,s,u,t);return 0===r.length&&i.hasChildren()?this.expandChildren(l,t,i).pipe(y(e=>new jc(s,e))):0===t.length&&0===r.length?Ca(new jc(s,{})):this.expandSegment(l,i,t,r,"primary",!0).pipe(y(e=>new jc(s.concat(e.segments),e.children)))}))}getChildConfig(e,n,l){return n.children?Ca(new Bh(n.children,e)):n.loadChildren?void 0!==n._loadedConfig?Ca(n._loadedConfig):this.runCanLoadGuards(e.injector,n,l).pipe(G(l=>l?this.configLoader.load(e.injector,n).pipe(y(e=>(n._loadedConfig=e,e))):function(e){return new E(n=>n.error(Uc(`Cannot load children because the guard of the route "path: '${e.path}'" returned false`)))}(n))):Ca(new Bh([],e))}runCanLoadGuards(e,n,l){const t=n.canLoad;return t&&0!==t.length?k(t).pipe(y(t=>{const i=e.get(t);let s;if(function(e){return e&&Vh(e.canLoad)}(i))s=i.canLoad(n,l);else{if(!Vh(i))throw new Error("Invalid CanLoad guard");s=i(n,l)}return zc(s)})).pipe(xa(),ic(e=>{if(!Wh(e))return;const n=Uc(`Redirecting to "${this.urlSerializer.serialize(e)}"`);throw n.url=e,n}),(i=e=>!0===e,e=>e.lift(new uc(i,void 0,e)))):Ca(!0);var i}lineralizeSegments(e,n){let l=[],t=n.root;for(;;){if(l=l.concat(t.segments),0===t.numberOfChildren)return Ca(l);if(t.numberOfChildren>1||!t.children.primary)return jh(e.redirectTo);t=t.children.primary}}applyRedirectCommands(e,n,l){return this.applyRedirectCreatreUrlTree(n,this.urlSerializer.parse(n),e,l)}applyRedirectCreatreUrlTree(e,n,l,t){const i=this.createSegmentGroup(e,n.root,l,t);return new Kc(i,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const l={};return Yc(e,(e,t)=>{if("string"==typeof e&&e.startsWith(":")){const i=e.substring(1);l[t]=n[i]}else l[t]=e}),l}createSegmentGroup(e,n,l,t){const i=this.createSegments(e,n.segments,l,t);let s={};return Yc(n.children,(n,i)=>{s[i]=this.createSegmentGroup(e,n,l,t)}),new jc(i,s)}createSegments(e,n,l,t){return n.map(n=>n.path.startsWith(":")?this.findPosParam(e,n,t):this.findOrReturn(n,l))}findPosParam(e,n,l){const t=l[n.path.substring(1)];if(!t)throw new Error(`Cannot redirect to '${e}'. Cannot find '${n.path}'.`);return t}findOrReturn(e,n){let l=0;for(const t of n){if(t.path===e.path)return n.splice(l),t;l++}return e}}function qh(e,n,l){if(""===n.path)return"full"===n.pathMatch&&(e.hasChildren()||l.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const t=(n.matcher||Hc)(l,e,n);return t?{matched:!0,consumedSegments:t.consumed,lastChild:t.consumed.length,positionalParamSegments:t.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function Xh(e){if(1===e.numberOfChildren&&e.children.primary){const n=e.children.primary;return new jc(e.segments.concat(n.segments),n.children)}return e}function Zh(e,n,l){return(!(e.hasChildren()||n.length>0)||"full"!==l.pathMatch)&&""===l.path&&void 0!==l.redirectTo}function Jh(e){return e.outlet||"primary"}class ed{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class nd{constructor(e,n){this.component=e,this.route=n}}function ld(e,n,l){const t=e._root;return function e(n,l,t,i,s={canDeactivateChecks:[],canActivateChecks:[]}){const r=Sh(l);return n.children.forEach(n=>{!function(n,l,t,i,s={canDeactivateChecks:[],canActivateChecks:[]}){const r=n.value,u=l?l.value:null,o=t?t.getContext(n.value.outlet):null;if(u&&r.routeConfig===u.routeConfig){const a=function(e,n,l){if("function"==typeof l)return l(e,n);switch(l){case"pathParamsChange":return!qc(e.url,n.url);case"pathParamsOrQueryParamsChange":return!qc(e.url,n.url)||!Gc(e.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ah(e,n)||!Gc(e.queryParams,n.queryParams);case"paramsChange":default:return!Ah(e,n)}}(u,r,r.routeConfig.runGuardsAndResolvers);a?s.canActivateChecks.push(new ed(i)):(r.data=u.data,r._resolvedData=u._resolvedData),e(n,l,r.component?o?o.children:null:t,i,s),a&&s.canDeactivateChecks.push(new nd(o&&o.outlet&&o.outlet.component||null,u))}else u&&id(l,o,s),s.canActivateChecks.push(new ed(i)),e(n,null,r.component?o?o.children:null:t,i,s)}(n,r[n.value.outlet],t,i.concat([n.value]),s),delete r[n.value.outlet]}),Yc(r,(e,n)=>id(e,t.getContext(n),s)),s}(t,n?n._root:null,l,[t.value])}function td(e,n,l){const t=function(e){if(!e)return null;for(let n=e.parent;n;n=n.parent){const e=n.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(n);return(t?t.module.injector:l).get(e)}function id(e,n,l){const t=Sh(e),i=e.value;Yc(t,(e,t)=>{id(e,i.component?n?n.children.getContext(t):null:n,l)}),l.canDeactivateChecks.push(new nd(i.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,i))}const sd=Symbol("INITIAL_VALUE");function rd(){return ac(e=>function(...e){let n=void 0,l=void 0;return b(e[e.length-1])&&(l=e.pop()),"function"==typeof e[e.length-1]&&(n=e.pop()),1===e.length&&o(e[0])&&(e=e[0]),Y(e,l).lift(new wa(n))}(...e.map(e=>e.pipe(Ja(1),gc(sd)))).pipe(function(e,n){let l=!1;return arguments.length>=2&&(l=!0),function(t){return t.lift(new pc(e,n,l))}}((e,n)=>{let l=!1;return n.reduce((e,t,i)=>{if(e!==sd)return e;if(t===sd&&(l=!0),!l){if(!1===t)return t;if(i===n.length-1||Wh(t))return t}return e},e)},sd),ka(e=>e!==sd),y(e=>Wh(e)?e:!0===e),Ja(1)))}function ud(e,n){return null!==e&&n&&n(new Dc(e)),Ca(!0)}function od(e,n){return null!==e&&n&&n(new Pc(e)),Ca(!0)}function ad(e,n,l){const t=n.routeConfig?n.routeConfig.canActivate:null;return t&&0!==t.length?Ca(t.map(t=>La(()=>{const i=td(t,n,l);let s;if(function(e){return e&&Vh(e.canActivate)}(i))s=zc(i.canActivate(n,e));else{if(!Vh(i))throw new Error("Invalid CanActivate guard");s=zc(i(n,e))}return s.pipe(lc())}))).pipe(rd()):Ca(!0)}function cd(e,n,l){const t=n[n.length-1],i=n.slice(0,n.length-1).reverse().map(e=>function(e){const n=e.routeConfig?e.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:e,guards:n}:null}(e)).filter(e=>null!==e).map(n=>La(()=>Ca(n.guards.map(i=>{const s=td(i,n.node,l);let r;if(function(e){return e&&Vh(e.canActivateChild)}(s))r=zc(s.canActivateChild(t,e));else{if(!Vh(s))throw new Error("Invalid CanActivateChild guard");r=zc(s(t,e))}return r.pipe(lc())})).pipe(rd())));return Ca(i).pipe(rd())}class hd{}class dd{constructor(e,n,l,t,i,s){this.rootComponentType=e,this.config=n,this.urlTree=l,this.url=t,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=s}recognize(){try{const e=md(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,n=this.processSegmentGroup(this.config,e,"primary"),l=new Th([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),t=new fh(l,n),i=new Ch(this.url,t);return this.inheritParamsAndData(i._root),Ca(i)}catch(e){return new E(n=>n.error(e))}}inheritParamsAndData(e){const n=e.value,l=Oh(n,this.paramsInheritanceStrategy);n.params=Object.freeze(l.params),n.data=Object.freeze(l.data),e.children.forEach(e=>this.inheritParamsAndData(e))}processSegmentGroup(e,n,l){return 0===n.segments.length&&n.hasChildren()?this.processChildren(e,n):this.processSegment(e,n,n.segments,l)}processChildren(e,n){const l=Xc(n,(n,l)=>this.processSegmentGroup(e,n,l));return function(e){const n={};e.forEach(e=>{const l=n[e.value.outlet];if(l){const n=l.url.map(e=>e.toString()).join("/"),t=e.value.url.map(e=>e.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${n}' and '${t}'.`)}n[e.value.outlet]=e.value})}(l),l.sort((e,n)=>"primary"===e.value.outlet?-1:"primary"===n.value.outlet?1:e.value.outlet.localeCompare(n.value.outlet)),l}processSegment(e,n,l,t){for(const s of e)try{return this.processSegmentAgainstRoute(s,n,l,t)}catch(i){if(!(i instanceof hd))throw i}if(this.noLeftoversInUrl(n,l,t))return[];throw new hd}noLeftoversInUrl(e,n,l){return 0===n.length&&!e.children[l]}processSegmentAgainstRoute(e,n,l,t){if(e.redirectTo)throw new hd;if((e.outlet||"primary")!==t)throw new hd;let i,s=[],r=[];if("**"===e.path){const s=l.length>0?Wc(l).parameters:{};i=new Th(l,s,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ed(e),t,e.component,e,gd(n),pd(n)+l.length,vd(e))}else{const u=function(e,n,l){if(""===n.path){if("full"===n.pathMatch&&(e.hasChildren()||l.length>0))throw new hd;return{consumedSegments:[],lastChild:0,parameters:{}}}const t=(n.matcher||Hc)(l,e,n);if(!t)throw new hd;const i={};Yc(t.posParams,(e,n)=>{i[n]=e.path});const s=t.consumed.length>0?Object.assign(Object.assign({},i),t.consumed[t.consumed.length-1].parameters):i;return{consumedSegments:t.consumed,lastChild:t.consumed.length,parameters:s}}(n,e,l);s=u.consumedSegments,r=l.slice(u.lastChild),i=new Th(s,u.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ed(e),t,e.component,e,gd(n),pd(n)+s.length,vd(e))}const u=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),{segmentGroup:o,slicedSegments:a}=md(n,s,r,u,this.relativeLinkResolution);if(0===a.length&&o.hasChildren()){const e=this.processChildren(u,o);return[new fh(i,e)]}if(0===u.length&&0===a.length)return[new fh(i,[])];const c=this.processSegment(u,o,a,"primary");return[new fh(i,c)]}}function gd(e){let n=e;for(;n._sourceSegment;)n=n._sourceSegment;return n}function pd(e){let n=e,l=n._segmentIndexShift?n._segmentIndexShift:0;for(;n._sourceSegment;)n=n._sourceSegment,l+=n._segmentIndexShift?n._segmentIndexShift:0;return l-1}function md(e,n,l,t,i){if(l.length>0&&function(e,n,l){return l.some(l=>fd(e,n,l)&&"primary"!==Sd(l))}(e,l,t)){const i=new jc(n,function(e,n,l,t){const i={};i.primary=t,t._sourceSegment=e,t._segmentIndexShift=n.length;for(const s of l)if(""===s.path&&"primary"!==Sd(s)){const l=new jc([],{});l._sourceSegment=e,l._segmentIndexShift=n.length,i[Sd(s)]=l}return i}(e,n,t,new jc(l,e.children)));return i._sourceSegment=e,i._segmentIndexShift=n.length,{segmentGroup:i,slicedSegments:[]}}if(0===l.length&&function(e,n,l){return l.some(l=>fd(e,n,l))}(e,l,t)){const s=new jc(e.segments,function(e,n,l,t,i,s){const r={};for(const u of t)if(fd(e,l,u)&&!i[Sd(u)]){const l=new jc([],{});l._sourceSegment=e,l._segmentIndexShift="legacy"===s?e.segments.length:n.length,r[Sd(u)]=l}return Object.assign(Object.assign({},i),r)}(e,n,l,t,e.children,i));return s._sourceSegment=e,s._segmentIndexShift=n.length,{segmentGroup:s,slicedSegments:l}}const s=new jc(e.segments,e.children);return s._sourceSegment=e,s._segmentIndexShift=n.length,{segmentGroup:s,slicedSegments:l}}function fd(e,n,l){return(!(e.hasChildren()||n.length>0)||"full"!==l.pathMatch)&&""===l.path&&void 0===l.redirectTo}function Sd(e){return e.outlet||"primary"}function Ed(e){return e.data||{}}function vd(e){return e.resolve||{}}function Rd(e){return function(n){return n.pipe(ac(n=>{const l=e(n);return l?k(l).pipe(y(()=>n)):k([n])}))}}class Od{}class Td{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}class Cd{}function Id(e,n=""){for(let l=0;l<e.length;l++){const t=e[l];bd(t,yd(n,t))}}function bd(e,n){if(!e)throw new Error(`\n      Invalid configuration of route '${n}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(e))throw new Error(`Invalid configuration of route '${n}': Array cannot be specified`);if(!e.component&&!e.children&&!e.loadChildren&&e.outlet&&"primary"!==e.outlet)throw new Error(`Invalid configuration of route '${n}': a componentless route without children or loadChildren cannot have a named outlet set`);if(e.redirectTo&&e.children)throw new Error(`Invalid configuration of route '${n}': redirectTo and children cannot be used together`);if(e.redirectTo&&e.loadChildren)throw new Error(`Invalid configuration of route '${n}': redirectTo and loadChildren cannot be used together`);if(e.children&&e.loadChildren)throw new Error(`Invalid configuration of route '${n}': children and loadChildren cannot be used together`);if(e.redirectTo&&e.component)throw new Error(`Invalid configuration of route '${n}': redirectTo and component cannot be used together`);if(e.path&&e.matcher)throw new Error(`Invalid configuration of route '${n}': path and matcher cannot be used together`);if(void 0===e.redirectTo&&!e.component&&!e.children&&!e.loadChildren)throw new Error(`Invalid configuration of route '${n}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===e.path&&void 0===e.matcher)throw new Error(`Invalid configuration of route '${n}': routes must have either a path or a matcher specified`);if("string"==typeof e.path&&"/"===e.path.charAt(0))throw new Error(`Invalid configuration of route '${n}': path cannot start with a slash`);if(""===e.path&&void 0!==e.redirectTo&&void 0===e.pathMatch)throw new Error(`Invalid configuration of route '{path: "${n}", redirectTo: "${e.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==e.pathMatch&&"full"!==e.pathMatch&&"prefix"!==e.pathMatch)throw new Error(`Invalid configuration of route '${n}': pathMatch can only be set to 'prefix' or 'full'`);e.children&&Id(e.children,n)}function yd(e,n){return n?e||n.path?e&&!n.path?e+"/":!e&&n.path?n.path:`${e}/${n.path}`:"":e}function Ad(e){const n=e.children&&e.children.map(Ad),l=n?Object.assign(Object.assign({},e),{children:n}):Object.assign({},e);return!l.component&&(n||l.loadChildren)&&l.outlet&&"primary"!==l.outlet&&(l.component=Cd),l}const Nd=new Re("ROUTES");class _d{constructor(e,n,l,t){this.loader=e,this.compiler=n,this.onLoadStartListener=l,this.onLoadEndListener=t}load(e,n){return this.onLoadStartListener&&this.onLoadStartListener(n),this.loadModuleFactory(n.loadChildren).pipe(y(l=>{this.onLoadEndListener&&this.onLoadEndListener(n);const t=l.create(e);return new Bh(Vc(t.injector.get(Nd)).map(Ad),t)}))}loadModuleFactory(e){return"string"==typeof e?k(this.loader.load(e)):zc(e()).pipe(G(e=>e instanceof Me?Ca(e):k(this.compiler.compileModuleAsync(e))))}}class wd{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Pd,this.attachRef=null}}class Pd{constructor(){this.contexts=new Map}onChildOutletCreated(e,n){const l=this.getOrCreateContext(e);l.outlet=n,this.contexts.set(e,l)}onChildOutletDestroyed(e){const n=this.getContext(e);n&&(n.outlet=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let n=this.getContext(e);return n||(n=new wd,this.contexts.set(e,n)),n}getContext(e){return this.contexts.get(e)||null}}class Md{}class Dd{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,n){return e}}function Ld(e){throw e}function xd(e,n,l){return n.parse("/")}function kd(e,n){return Ca(null)}class Fd{constructor(e,n,l,t,i,s,r,u){this.rootComponentType=e,this.urlSerializer=n,this.rootContexts=l,this.location=t,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new C,this.errorHandler=Ld,this.malformedUriErrorHandler=xd,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:kd,afterPreactivation:kd},this.urlHandlingStrategy=new Dd,this.routeReuseStrategy=new Td,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=i.get(Pe),this.console=i.get(xi);const o=i.get(Ki);this.isNgZoneEnabled=o instanceof Ki,this.resetConfig(u),this.currentUrlTree=new Kc(new jc([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new _d(s,r,e=>this.triggerEvent(new _c(e)),e=>this.triggerEvent(new wc(e))),this.routerState=vh(this.currentUrlTree,this.rootComponentType),this.transitions=new Ia({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(e){const n=this.events;return e.pipe(ka(e=>0!==e.id),y(e=>Object.assign(Object.assign({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl)})),ac(e=>{let l=!1,t=!1;return Ca(e).pipe(ic(e=>{this.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),ac(e=>{const l=!this.navigated||e.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||l)&&this.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return Ca(e).pipe(ac(e=>{const l=this.transitions.getValue();return n.next(new Rc(e.id,this.serializeUrl(e.extractedUrl),e.source,e.restoredState)),l!==this.transitions.getValue()?Ma:[e]}),ac(e=>Promise.resolve(e)),(t=this.ngModule.injector,i=this.configLoader,s=this.urlSerializer,r=this.config,function(e){return e.pipe(ac(e=>function(e,n,l,t,i){return new Qh(e,n,l,t,i).apply()}(t,i,s,e.extractedUrl,r).pipe(y(n=>Object.assign(Object.assign({},e),{urlAfterRedirects:n})))))}),ic(e=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:e.urlAfterRedirects})}),function(e,n,l,t,i){return function(s){return s.pipe(G(s=>function(e,n,l,t,i="emptyOnly",s="legacy"){return new dd(e,n,l,t,i,s).recognize()}(e,n,s.urlAfterRedirects,l(s.urlAfterRedirects),t,i).pipe(y(e=>Object.assign(Object.assign({},s),{targetSnapshot:e})))))}}(this.rootComponentType,this.config,e=>this.serializeUrl(e),this.paramsInheritanceStrategy,this.relativeLinkResolution),ic(e=>{"eager"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(e.urlAfterRedirects,!!e.extras.replaceUrl,e.id,e.extras.state),this.browserUrlTree=e.urlAfterRedirects)}),ic(e=>{const l=new Ic(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);n.next(l)}));var t,i,s,r;if(l&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:l,extractedUrl:t,source:i,restoredState:s,extras:r}=e,u=new Rc(l,this.serializeUrl(t),i,s);n.next(u);const o=vh(t,this.rootComponentType).snapshot;return Ca(Object.assign(Object.assign({},e),{targetSnapshot:o,urlAfterRedirects:t,extras:Object.assign(Object.assign({},r),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=e.rawUrl,this.browserUrlTree=e.urlAfterRedirects,e.resolve(null),Ma}),Rd(e=>{const{targetSnapshot:n,id:l,extractedUrl:t,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:r}}=e;return this.hooks.beforePreactivation(n,{navigationId:l,appliedUrlTree:t,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!r})}),ic(e=>{const n=new bc(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(n)}),y(e=>Object.assign(Object.assign({},e),{guards:ld(e.targetSnapshot,e.currentSnapshot,this.rootContexts)})),function(e,n){return function(l){return l.pipe(G(l=>{const{targetSnapshot:t,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:r}}=l;return 0===r.length&&0===s.length?Ca(Object.assign(Object.assign({},l),{guardsResult:!0})):function(e,n,l,t){return k(e).pipe(G(e=>function(e,n,l,t,i){const s=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return s&&0!==s.length?Ca(s.map(s=>{const r=td(s,n,i);let u;if(function(e){return e&&Vh(e.canDeactivate)}(r))u=zc(r.canDeactivate(e,n,l,t));else{if(!Vh(r))throw new Error("Invalid CanDeactivate guard");u=zc(r(e,n,l,t))}return u.pipe(lc())})).pipe(rd()):Ca(!0)}(e.component,e.route,l,n,t)),lc(e=>!0!==e,!0))}(r,t,i,e).pipe(G(l=>l&&"boolean"==typeof l?function(e,n,l,t){return k(n).pipe(fc(n=>k([od(n.route.parent,t),ud(n.route,t),cd(e,n.path,l),ad(e,n.route,l)]).pipe(xa(),lc(e=>!0!==e,!0))),lc(e=>!0!==e,!0))}(t,s,e,n):Ca(l)),y(e=>Object.assign(Object.assign({},l),{guardsResult:e})))}))}}(this.ngModule.injector,e=>this.triggerEvent(e)),ic(e=>{if(Wh(e.guardsResult)){const n=Uc(`Redirecting to "${this.serializeUrl(e.guardsResult)}"`);throw n.url=e.guardsResult,n}}),ic(e=>{const n=new yc(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);this.triggerEvent(n)}),ka(e=>{if(!e.guardsResult){this.resetUrlToCurrentUrlTree();const l=new Tc(e.id,this.serializeUrl(e.extractedUrl),"");return n.next(l),e.resolve(!1),!1}return!0}),Rd(e=>{if(e.guards.canActivateChecks.length)return Ca(e).pipe(ic(e=>{const n=new Ac(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(n)}),ac(e=>{let l=!1;return Ca(e).pipe((t=this.paramsInheritanceStrategy,i=this.ngModule.injector,function(e){return e.pipe(G(e=>{const{targetSnapshot:n,guards:{canActivateChecks:l}}=e;if(!l.length)return Ca(e);let s=0;return k(l).pipe(fc(e=>function(e,n,l,t){return function(e,n,l,t){const i=Object.keys(e);if(0===i.length)return Ca({});const s={};return k(i).pipe(G(i=>function(e,n,l,t){const i=td(e,n,t);return zc(i.resolve?i.resolve(n,l):i(n,l))}(e[i],n,l,t).pipe(ic(e=>{s[i]=e}))),Ga(1),G(()=>Object.keys(s).length===i.length?Ca(s):Ma))}(e._resolve,e,n,t).pipe(y(n=>(e._resolvedData=n,e.data=Object.assign(Object.assign({},e.data),Oh(e,l).resolve),null)))}(e.route,n,t,i)),ic(()=>s++),Ga(1),G(n=>s===l.length?Ca(e):Ma))}))}),ic({next:()=>l=!0,complete:()=>{if(!l){const l=new Tc(e.id,this.serializeUrl(e.extractedUrl),"At least one route resolver didn't emit any value.");n.next(l),e.resolve(!1)}}}));var t,i}),ic(e=>{const n=new Nc(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(n)}))}),Rd(e=>{const{targetSnapshot:n,id:l,extractedUrl:t,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:r}}=e;return this.hooks.afterPreactivation(n,{navigationId:l,appliedUrlTree:t,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!r})}),y(e=>{const n=function(e,n,l){const t=function e(n,l,t){if(t&&n.shouldReuseRoute(l.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=l.value;const s=function(n,l,t){return l.children.map(l=>{for(const i of t.children)if(n.shouldReuseRoute(i.value.snapshot,l.value))return e(n,l,i);return e(n,l)})}(n,l,t);return new fh(i,s)}{const t=n.retrieve(l.value);if(t){const e=t.route;return function e(n,l){if(n.value.routeConfig!==l.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==l.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");l.value._futureSnapshot=n.value;for(let t=0;t<n.children.length;++t)e(n.children[t],l.children[t])}(l,e),e}{const t=new Rh(new Ia((i=l.value).url),new Ia(i.params),new Ia(i.queryParams),new Ia(i.fragment),new Ia(i.data),i.outlet,i.component,i),s=l.children.map(l=>e(n,l));return new fh(t,s)}}var i}(e,n._root,l?l._root:void 0);return new Eh(t,n)}(this.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign(Object.assign({},e),{targetRouterState:n})}),ic(e=>{this.currentUrlTree=e.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl),this.routerState=e.targetRouterState,"deferred"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!e.extras.replaceUrl,e.id,e.extras.state),this.browserUrlTree=e.urlAfterRedirects)}),(s=this.rootContexts,r=this.routeReuseStrategy,u=e=>this.triggerEvent(e),y(e=>(new Hh(r,e.targetRouterState,e.currentRouterState,u).activate(s),e))),ic({next(){l=!0},complete(){l=!0}}),(i=()=>{if(!l&&!t){this.resetUrlToCurrentUrlTree();const l=new Tc(e.id,this.serializeUrl(e.extractedUrl),`Navigation ID ${e.id} is not equal to the current navigation id ${this.navigationId}`);n.next(l),e.resolve(!1)}this.currentNavigation=null},e=>e.lift(new Sc(i))),qa(l=>{if(t=!0,(i=l)&&i.ngNavigationCancelingError){const t=Wh(l.url);t||(this.navigated=!0,this.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl));const i=new Tc(e.id,this.serializeUrl(e.extractedUrl),l.message);n.next(i),t?setTimeout(()=>{const n=this.urlHandlingStrategy.merge(l.url,this.rawUrlTree);return this.scheduleNavigation(n,"imperative",null,{skipLocationChange:e.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:e.resolve,reject:e.reject,promise:e.promise})},0):e.resolve(!1)}else{this.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl);const t=new Cc(e.id,this.serializeUrl(e.extractedUrl),l);n.next(t);try{e.resolve(this.errorHandler(l))}catch(s){e.reject(s)}}var i;return Ma}));var i,s,r,u}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{let n=this.parseUrl(e.url);const l="popstate"===e.type?"popstate":"hashchange",t=e.state&&e.state.navigationId?e.state:null;setTimeout(()=>{this.scheduleNavigation(n,l,t,{replaceUrl:!0})},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){Id(e),this.config=e.map(Ad),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}createUrlTree(e,n={}){const{relativeTo:l,queryParams:t,fragment:i,preserveQueryParams:s,queryParamsHandling:r,preserveFragment:u}=n;nn()&&s&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const o=l||this.routerState.root,a=u?this.currentUrlTree.fragment:i;let c=null;if(r)switch(r){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),t);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=t||null}else c=s?this.currentUrlTree.queryParams:t||null;return null!==c&&(c=this.removeEmptyProps(c)),function(e,n,l,t,i){if(0===l.length)return _h(n.root,n.root,n,t,i);const s=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new wh(!0,0,e);let n=0,l=!1;const t=e.reduce((e,t,i)=>{if("object"==typeof t&&null!=t){if(t.outlets){const n={};return Yc(t.outlets,(e,l)=>{n[l]="string"==typeof e?e.split("/"):e}),[...e,{outlets:n}]}if(t.segmentPath)return[...e,t.segmentPath]}return"string"!=typeof t?[...e,t]:0===i?(t.split("/").forEach((t,i)=>{0==i&&"."===t||(0==i&&""===t?l=!0:".."===t?n++:""!=t&&e.push(t))}),e):[...e,t]},[]);return new wh(l,n,t)}(l);if(s.toRoot())return _h(n.root,new jc([],{}),n,t,i);const r=function(e,n,l){if(e.isAbsolute)return new Ph(n.root,!0,0);if(-1===l.snapshot._lastPathIndex){const e=l.snapshot._urlSegment;return new Ph(e,e===n.root,0)}const t=Nh(e.commands[0])?0:1;return function(e,n,l){let t=e,i=n,s=l;for(;s>i;){if(s-=i,t=t.parent,!t)throw new Error("Invalid number of '../'");i=t.segments.length}return new Ph(t,!1,i-s)}(l.snapshot._urlSegment,l.snapshot._lastPathIndex+t,e.numberOfDoubleDots)}(s,n,e),u=r.processChildren?Lh(r.segmentGroup,r.index,s.commands):Dh(r.segmentGroup,r.index,s.commands);return _h(r.segmentGroup,u,n,t,i)}(o,this.currentUrlTree,e,c,a)}navigateByUrl(e,n={skipLocationChange:!1}){nn()&&this.isNgZoneEnabled&&!Ki.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const l=Wh(e)?e:this.parseUrl(e),t=this.urlHandlingStrategy.merge(l,this.rawUrlTree);return this.scheduleNavigation(t,"imperative",null,n)}navigate(e,n={skipLocationChange:!1}){return function(e){for(let n=0;n<e.length;n++){const l=e[n];if(null==l)throw new Error(`The requested path contains ${l} segment at index ${n}`)}}(e),this.navigateByUrl(this.createUrlTree(e,n),n)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let n;try{n=this.urlSerializer.parse(e)}catch(l){n=this.malformedUriErrorHandler(l,this.urlSerializer,e)}return n}isActive(e,n){if(Wh(e))return $c(this.currentUrlTree,e,n);const l=this.parseUrl(e);return $c(this.currentUrlTree,l,n)}removeEmptyProps(e){return Object.keys(e).reduce((n,l)=>{const t=e[l];return null!=t&&(n[l]=t),n},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.events.next(new Oc(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,e.resolve(!0)},e=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(e,n,l,t,i){const s=this.getTransition();if(s&&"imperative"!==n&&"imperative"===s.source&&s.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(s&&"hashchange"==n&&"popstate"===s.source&&s.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(s&&"popstate"==n&&"hashchange"===s.source&&s.rawUrl.toString()===e.toString())return Promise.resolve(!0);let r,u,o;i?(r=i.resolve,u=i.reject,o=i.promise):o=new Promise((e,n)=>{r=e,u=n});const a=++this.navigationId;return this.setTransition({id:a,source:n,restoredState:l,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:t,resolve:r,reject:u,promise:o,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),o.catch(e=>Promise.reject(e))}setBrowserUrl(e,n,l,t){const i=this.urlSerializer.serialize(e);t=t||{},this.location.isCurrentPathEqualTo(i)||n?this.location.replaceState(i,"",Object.assign(Object.assign({},t),{navigationId:l})):this.location.go(i,"",Object.assign(Object.assign({},t),{navigationId:l}))}resetStateAndUrl(e,n,l){this.routerState=e,this.currentUrlTree=n,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,l),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}class Ud{constructor(e,n,l,t,i){this.router=e,this.route=n,this.commands=[],null==l&&t.setAttribute(i.nativeElement,"tabindex","0")}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}set preserveQueryParams(e){nn()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated!, use queryParamsHandling instead."),this.preserve=e}onClick(){const e={skipLocationChange:Gd(this.skipLocationChange),replaceUrl:Gd(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:Gd(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:Gd(this.preserveFragment)})}}class Hd{constructor(e,n,l){this.router=e,this.route=n,this.locationStrategy=l,this.commands=[],this.subscription=e.events.subscribe(e=>{e instanceof Oc&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}set preserveQueryParams(e){nn()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=e}ngOnChanges(e){this.updateTargetUrlAndHref()}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,n,l,t){if(0!==e||n||l||t)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const i={skipLocationChange:Gd(this.skipLocationChange),replaceUrl:Gd(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,i),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:Gd(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:Gd(this.preserveFragment)})}}function Gd(e){return""===e||!!e}class Bd{constructor(e,n,l,t,i,s){this.router=e,this.element=n,this.renderer=l,this.cdr=t,this.link=i,this.linkWithHref=s,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.subscription=e.events.subscribe(e=>{e instanceof Oc&&this.update()})}ngAfterContentInit(){this.links.changes.subscribe(e=>this.update()),this.linksWithHrefs.changes.subscribe(e=>this.update()),this.update()}set routerLinkActive(e){const n=Array.isArray(e)?e:e.split(" ");this.classes=n.filter(e=>!!e)}ngOnChanges(e){this.update()}ngOnDestroy(){this.subscription.unsubscribe()}update(){this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(()=>{const e=this.hasActiveLinks();this.isActive!==e&&(this.isActive=e,this.cdr.markForCheck(),this.classes.forEach(n=>{e?this.renderer.addClass(this.element.nativeElement,n):this.renderer.removeClass(this.element.nativeElement,n)}))})}isLinkActive(e){return n=>e.isActive(n.urlTree,this.routerLinkActiveOptions.exact)}hasActiveLinks(){const e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.linkWithHref&&e(this.linkWithHref)||this.links.some(e)||this.linksWithHrefs.some(e)}}class Vd{constructor(e,n,l,t,i){this.parentContexts=e,this.location=n,this.resolver=l,this.changeDetector=i,this.activated=null,this._activatedRoute=null,this.activateEvents=new Ii,this.deactivateEvents=new Ii,this.name=t||"primary",e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,n){this.activated=e,this._activatedRoute=n,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,n){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const l=(n=n||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),t=this.parentContexts.getOrCreateContext(this.name).children,i=new Wd(e,t,this.location.injector);this.activated=this.location.createComponent(l,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}class Wd{constructor(e,n,l){this.route=e,this.childContexts=n,this.parent=l}get(e,n){return e===Rh?this.route:e===Pd?this.childContexts:this.parent.get(e,n)}}class Yd{}class zd{preload(e,n){return n().pipe(qa(()=>Ca(null)))}}class $d{preload(e,n){return Ca(null)}}class Kd{constructor(e,n,l,t,i){this.router=e,this.injector=t,this.preloadingStrategy=i,this.loader=new _d(n,l,n=>e.triggerEvent(new _c(n)),n=>e.triggerEvent(new wc(n)))}setUpPreloading(){this.subscription=this.router.events.pipe(ka(e=>e instanceof Oc),fc(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(Pe);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,n){const l=[];for(const t of n)if(t.loadChildren&&!t.canLoad&&t._loadedConfig){const e=t._loadedConfig;l.push(this.processRoutes(e.module,e.routes))}else t.loadChildren&&!t.canLoad?l.push(this.preloadConfig(e,t)):t.children&&l.push(this.processRoutes(e,t.children));return k(l).pipe(W(),y(e=>{}))}preloadConfig(e,n){return this.preloadingStrategy.preload(n,()=>this.loader.load(e.injector,n).pipe(G(e=>(n._loadedConfig=e,this.processRoutes(e.module,e.routes)))))}}class jd{constructor(e,n,l={}){this.router=e,this.viewportScroller=n,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Rc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Oc&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof xc&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,n){this.router.triggerEvent(new xc(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,n))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}const Qd=new Re("ROUTER_CONFIGURATION"),qd=new Re("ROUTER_FORROOT_GUARD"),Xd=[Yo,{provide:Zc,useClass:Jc},{provide:Fd,useFactory:ig,deps:[Zc,Pd,Yo,Mn,ps,Wi,Nd,Qd,[Md,new ne],[Od,new ne]]},Pd,{provide:Rh,useFactory:sg,deps:[Fd]},{provide:ps,useClass:Ss},Kd,$d,zd,{provide:Qd,useValue:{enableTracing:!1}}];function Zd(){return new us("Router",Fd)}class Jd{constructor(e,n){}static forRoot(e,n){return{ngModule:Jd,providers:[Xd,tg(e),{provide:qd,useFactory:lg,deps:[[Fd,new ne,new te]]},{provide:Qd,useValue:n||{}},{provide:Ho,useFactory:ng,deps:[wo,[new ee(Bo),new ne],Qd]},{provide:jd,useFactory:eg,deps:[Fd,Ra,Qd]},{provide:Yd,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:$d},{provide:us,multi:!0,useFactory:Zd},[rg,{provide:Ai,multi:!0,useFactory:ug,deps:[rg]},{provide:ag,useFactory:og,deps:[rg]},{provide:Li,multi:!0,useExisting:ag}]]}}static forChild(e){return{ngModule:Jd,providers:[tg(e)]}}}function eg(e,n,l){return l.scrollOffset&&n.setOffset(l.scrollOffset),new jd(e,n,l)}function ng(e,n,l={}){return l.useHash?new Wo(e,n):new Vo(e,n)}function lg(e){if(e)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function tg(e){return[{provide:Bn,multi:!0,useValue:e},{provide:Nd,multi:!0,useValue:e}]}function ig(e,n,l,t,i,s,r,u={},o,a){const c=new Fd(null,e,n,l,t,i,s,Vc(r));if(o&&(c.urlHandlingStrategy=o),a&&(c.routeReuseStrategy=a),u.errorHandler&&(c.errorHandler=u.errorHandler),u.malformedUriErrorHandler&&(c.malformedUriErrorHandler=u.malformedUriErrorHandler),u.enableTracing){const e=No();c.events.subscribe(n=>{e.logGroup("Router Event: "+n.constructor.name),e.log(n.toString()),e.log(n),e.logGroupEnd()})}return u.onSameUrlNavigation&&(c.onSameUrlNavigation=u.onSameUrlNavigation),u.paramsInheritanceStrategy&&(c.paramsInheritanceStrategy=u.paramsInheritanceStrategy),u.urlUpdateStrategy&&(c.urlUpdateStrategy=u.urlUpdateStrategy),u.relativeLinkResolution&&(c.relativeLinkResolution=u.relativeLinkResolution),c}function sg(e){return e.routerState.root}class rg{constructor(e){this.injector=e,this.initNavigation=!1,this.resultOfPreactivationDone=new C}appInitializer(){return this.injector.get(Mo,Promise.resolve(null)).then(()=>{let e=null;const n=new Promise(n=>e=n),l=this.injector.get(Fd),t=this.injector.get(Qd);if(this.isLegacyDisabled(t)||this.isLegacyEnabled(t))e(!0);else if("disabled"===t.initialNavigation)l.setUpLocationChangeListener(),e(!0);else{if("enabled"!==t.initialNavigation)throw new Error(`Invalid initialNavigation options: '${t.initialNavigation}'`);l.hooks.afterPreactivation=()=>this.initNavigation?Ca(null):(this.initNavigation=!0,e(!0),this.resultOfPreactivationDone),l.initialNavigation()}return n})}bootstrapListener(e){const n=this.injector.get(Qd),l=this.injector.get(Kd),t=this.injector.get(jd),i=this.injector.get(Fd),s=this.injector.get(ds);e===s.components[0]&&(this.isLegacyEnabled(n)?i.initialNavigation():this.isLegacyDisabled(n)&&i.setUpLocationChangeListener(),l.setUpPreloading(),t.init(),i.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(e){return"legacy_enabled"===e.initialNavigation||!0===e.initialNavigation||void 0===e.initialNavigation}isLegacyDisabled(e){return"legacy_disabled"===e.initialNavigation||!1===e.initialNavigation}}function ug(e){return e.appInitializer.bind(e)}function og(e){return e.bootstrapListener.bind(e)}const ag=new Re("Router Initializer");var cg=Kl({encapsulation:2,styles:[],data:{}});function hg(e){return qs(0,[(e()(),Ds(0,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),ei(1,212992,null,0,Vd,[Pd,wl,el,[8,null],Nn],null,null)],(function(e,n){e(n,1,0)}),null)}function dg(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"ng-component",[],null,null,null,hg,cg)),ei(1,49152,null,0,Cd,[],null,null)],null,null)}var gg=Dt("ng-component",Cd,dg,{},{},[]);class pg{constructor(e){this.router=e}ngOnInit(){}goToVillage(){this.router.navigate(["/village"])}}var mg=Kl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{margin:10px;font-size:4vw;text-align:center}button[_ngcontent-%COMP%]{font-size:1.5vw}"]],data:{}});function fg(e){return qs(0,[(e()(),Ds(0,0,null,null,4,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Ks(-1,null,[" Page not found "])),(e()(),Ds(2,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(3,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.goToVillage()&&t),t}),null,null)),(e()(),Ks(-1,null,["Village"]))],null,null)}function Sg(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"app-not-found",[],null,null,null,fg,mg)),ei(1,114688,null,0,pg,[Fd],null,null)],(function(e,n){e(n,1,0)}),null)}var Eg=Dt("app-not-found",pg,Sg,{},{},[]);class vg{constructor(){this.xMargin=20,this.yMargin=20}onmousemove(e){const n=document.getElementById(this.elementId);if(n){const l=e.clientX+this.xMargin;let t=e.clientY+this.yMargin;t+n.offsetHeight>740&&(t-=n.offsetHeight+2*this.yMargin),n.style.top=t+"px",n.style.left=l+"px"}}}class Rg{constructor(){this.margin="0"}ngOnInit(){}getTitle(){return""===this.title?"":this.title?this.title:"Food"===this.name?"Food nutrition":Ou.titleCase(this.name).replace("_"," ")}getPath(){let e="assets/";return this.path&&(e+=this.path+"/"),e}}var Og=Kl({encapsulation:0,styles:[["[_nghost-%COMP%]{display:inline-block;vertical-align:middle;height:24px}#wrapper[_ngcontent-%COMP%], img[_ngcontent-%COMP%]{display:inline-block;height:24px;margin:0;padding:0}img[_ngcontent-%COMP%]{width:24px}"]],data:{}});function Tg(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,2,"img",[["class","resourceIcon"],["draggable","false"],["ondragstart","return false;"],["onerror","if (this.src !== 'assets/question_mark.svg') this.src = 'assets/question_mark.svg';"]],[[8,"src",4],[8,"title",0],[8,"alt",0]],null,null,null,null)),ei(2,278528,null,0,da,[il,Il,ol],{ngStyle:[0,"ngStyle"]},null),zs(3,{margin:0})],(function(e,n){var l=e(n,3,0,n.component.margin);e(n,2,0,l)}),(function(e,n){var l=n.component;e(n,1,0,Rt(1,"",l.getPath()+l.name.replace(" ","_").toLowerCase(),".svg"),Rt(1,"",l.getTitle(),""),Rt(1,"",l.name,""))}))}function Cg(e,n){return new E(l=>{const t=e.length;if(0===t)return void l.complete();const i=new Array(t);let s=0,r=0;for(let u=0;u<t;u++){const o=k(e[u]);let a=!1;l.add(o.subscribe({next:e=>{a||(a=!0,r++),i[u]=e},error:e=>l.error(e),complete:()=>{s++,s!==t&&a||(r===t&&l.next(n?n.reduce((e,n,l)=>(e[n]=i[l],e),{}):i),l.complete())}}))}})}const Ig=new Re("NgValueAccessor");class bg{constructor(e,n){this._renderer=e,this._elementRef=n,this.onChange=e=>{},this.onTouched=()=>{}}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}const yg=new Re("CompositionEventMode");class Ag{constructor(e,n,l){this._renderer=e,this._elementRef=n,this._compositionMode=l,this.onChange=e=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const e=No()?No().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}class Ng{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}reset(e){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class _g extends Ng{get formDirective(){return null}get path(){return null}}function wg(){throw new Error("unimplemented")}class Pg extends Ng{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}get validator(){return wg()}get asyncValidator(){return wg()}}class Mg extends class{constructor(e){this._cd=e}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}{constructor(e){super(e)}}function Dg(e){return null==e||0===e.length}function Lg(e){return null!=e&&"number"==typeof e.length}const xg=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class kg{static min(e){return n=>{if(Dg(n.value)||Dg(e))return null;const l=parseFloat(n.value);return!isNaN(l)&&l<e?{min:{min:e,actual:n.value}}:null}}static max(e){return n=>{if(Dg(n.value)||Dg(e))return null;const l=parseFloat(n.value);return!isNaN(l)&&l>e?{max:{max:e,actual:n.value}}:null}}static required(e){return Dg(e.value)?{required:!0}:null}static requiredTrue(e){return!0===e.value?null:{required:!0}}static email(e){return Dg(e.value)||xg.test(e.value)?null:{email:!0}}static minLength(e){return n=>Dg(n.value)||!Lg(n.value)?null:n.value.length<e?{minlength:{requiredLength:e,actualLength:n.value.length}}:null}static maxLength(e){return n=>Lg(n.value)&&n.value.length>e?{maxlength:{requiredLength:e,actualLength:n.value.length}}:null}static pattern(e){if(!e)return kg.nullValidator;let n,l;return"string"==typeof e?(l="","^"!==e.charAt(0)&&(l+="^"),l+=e,"$"!==e.charAt(e.length-1)&&(l+="$"),n=new RegExp(l)):(l=e.toString(),n=e),e=>{if(Dg(e.value))return null;const t=e.value;return n.test(t)?null:{pattern:{requiredPattern:l,actualValue:t}}}}static nullValidator(e){return null}static compose(e){if(!e)return null;const n=e.filter(Fg);return 0==n.length?null:function(e){return Hg(Gg(e,n))}}static composeAsync(e){if(!e)return null;const n=e.filter(Fg);return 0==n.length?null:function(e){return function(...e){if(1===e.length){const n=e[0];if(o(n))return Cg(n,null);if(a(n)&&Object.getPrototypeOf(n)===Object.prototype){const e=Object.keys(n);return Cg(e.map(e=>n[e]),e)}}if("function"==typeof e[e.length-1]){const n=e.pop();return Cg(e=1===e.length&&o(e[0])?e[0]:e,null).pipe(y(e=>n(...e)))}return Cg(e,null)}(Gg(e,n).map(Ug)).pipe(y(Hg))}}}function Fg(e){return null!=e}function Ug(e){const n=jn(e)?k(e):e;if(!Qn(n))throw new Error("Expected validator to return Promise or Observable.");return n}function Hg(e){let n={};return e.forEach(e=>{n=null!=e?Object.assign(Object.assign({},n),e):n}),0===Object.keys(n).length?null:n}function Gg(e,n){return n.map(n=>n(e))}function Bg(e){return e.map(e=>function(e){return!e.validate}(e)?e:n=>e.validate(n))}class Vg{constructor(e,n){this._renderer=e,this._elementRef=n,this.onChange=e=>{},this.onTouched=()=>{}}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}registerOnChange(e){this.onChange=n=>{e(""==n?null:parseFloat(n))}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}class Wg{constructor(){this._accessors=[]}add(e,n){this._accessors.push([e,n])}remove(e){for(let n=this._accessors.length-1;n>=0;--n)if(this._accessors[n][1]===e)return void this._accessors.splice(n,1)}select(e){this._accessors.forEach(n=>{this._isSameGroup(n,e)&&n[1]!==e&&n[1].fireUncheck(e.value)})}_isSameGroup(e,n){return!!e[0].control&&e[0]._parent===n._control._parent&&e[1].name===n.name}}class Yg{constructor(e,n,l,t){this._renderer=e,this._elementRef=n,this._registry=l,this._injector=t,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(Pg),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(e){this._state=e===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(e){this._fn=e,this.onChange=()=>{e(this.value),this._registry.select(this)}}fireUncheck(e){this.writeValue(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}_throwNameError(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}class zg{constructor(e,n){this._renderer=e,this._elementRef=n,this.onChange=e=>{},this.onTouched=()=>{}}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(e))}registerOnChange(e){this.onChange=n=>{e(""==n?null:parseFloat(n))}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}const $g='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',Kg='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>';function jg(e,n){return null==e?""+n:(n&&"object"==typeof n&&(n="Object"),`${e}: ${n}`.slice(0,50))}class Qg{constructor(e,n){this._renderer=e,this._elementRef=n,this._optionMap=new Map,this._idCounter=0,this.onChange=e=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e}writeValue(e){this.value=e;const n=this._getOptionId(e);null==n&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const l=jg(n,e);this._renderer.setProperty(this._elementRef.nativeElement,"value",l)}registerOnChange(e){this.onChange=n=>{this.value=this._getOptionValue(n),e(this.value)}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const n of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(n),e))return n;return null}_getOptionValue(e){const n=function(e){return e.split(":")[0]}(e);return this._optionMap.has(n)?this._optionMap.get(n):e}}class qg{constructor(e,n,l){this._element=e,this._renderer=n,this._select=l,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(jg(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}function Xg(e,n){return null==e?""+n:("string"==typeof n&&(n=`'${n}'`),n&&"object"==typeof n&&(n="Object"),`${e}: ${n}`.slice(0,50))}class Zg{constructor(e,n,l){this._element=e,this._renderer=n,this._select=l,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(Xg(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(Xg(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}function Jg(e,n){return[...n.path,e]}function ep(e,n){e||lp(n,"Cannot find control with"),n.valueAccessor||lp(n,"No value accessor for form control with"),e.validator=kg.compose([e.validator,n.validator]),e.asyncValidator=kg.composeAsync([e.asyncValidator,n.asyncValidator]),n.valueAccessor.writeValue(e.value),function(e,n){n.valueAccessor.registerOnChange(l=>{e._pendingValue=l,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&np(e,n)})}(e,n),function(e,n){e.registerOnChange((e,l)=>{n.valueAccessor.writeValue(e),l&&n.viewToModelUpdate(e)})}(e,n),function(e,n){n.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&np(e,n),"submit"!==e.updateOn&&e.markAsTouched()})}(e,n),n.valueAccessor.setDisabledState&&e.registerOnDisabledChange(e=>{n.valueAccessor.setDisabledState(e)}),n._rawValidators.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(()=>e.updateValueAndValidity())}),n._rawAsyncValidators.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(()=>e.updateValueAndValidity())})}function np(e,n){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function lp(e,n){let l;throw l=e.path.length>1?`path: '${e.path.join(" -> ")}'`:e.path[0]?`name: '${e.path}'`:"unspecified name attribute",new Error(`${n} ${l}`)}function tp(e){return null!=e?kg.compose(Bg(e)):null}function ip(e){return null!=e?kg.composeAsync(Bg(e)):null}const sp=[bg,zg,Vg,Qg,class{constructor(e,n){this._renderer=e,this._elementRef=n,this._optionMap=new Map,this._idCounter=0,this.onChange=e=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e}writeValue(e){let n;if(this.value=e,Array.isArray(e)){const l=e.map(e=>this._getOptionId(e));n=(e,n)=>{e._setSelected(l.indexOf(n.toString())>-1)}}else n=(e,n)=>{e._setSelected(!1)};this._optionMap.forEach(n)}registerOnChange(e){this.onChange=n=>{const l=[];if(void 0!==n.selectedOptions){const e=n.selectedOptions;for(let n=0;n<e.length;n++){const t=e.item(n),i=this._getOptionValue(t.value);l.push(i)}}else{const e=n.options;for(let n=0;n<e.length;n++){const t=e.item(n);if(t.selected){const e=this._getOptionValue(t.value);l.push(e)}}}this.value=l,e(l)}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_registerOption(e){const n=(this._idCounter++).toString();return this._optionMap.set(n,e),n}_getOptionId(e){for(const n of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(n)._value,e))return n;return null}_getOptionValue(e){const n=function(e){return e.split(":")[0]}(e);return this._optionMap.has(n)?this._optionMap.get(n)._value:e}},Yg];function rp(e){const n=op(e)?e.validators:e;return Array.isArray(n)?tp(n):n||null}function up(e,n){const l=op(n)?n.asyncValidators:e;return Array.isArray(l)?ip(l):l||null}function op(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class ap{constructor(e,n){this.validator=e,this.asyncValidator=n,this._onCollectionChange=()=>{},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}get parent(){return this._parent}get valid(){return"VALID"===this.status}get invalid(){return"INVALID"===this.status}get pending(){return"PENDING"==this.status}get disabled(){return"DISABLED"===this.status}get enabled(){return"DISABLED"!==this.status}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this.validator=rp(e)}setAsyncValidators(e){this.asyncValidator=up(e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status="PENDING",!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild(n=>{n.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(e=>e(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status="VALID",this._forEachChild(n=>{n.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(e=>e(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status="PENDING";const n=Ug(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(n=>this.setErrors(n,{emitEvent:e}))}}_cancelExistingSubscription(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)}get(e){return function(e,n,l){if(null==n)return null;if(Array.isArray(n)||(n=n.split(".")),Array.isArray(n)&&0===n.length)return null;let t=e;return n.forEach(e=>{t=t instanceof hp?t.controls.hasOwnProperty(e)?t.controls[e]:null:t instanceof dp&&t.at(e)||null}),t}(this,e)}getError(e,n){const l=n?this.get(n):this;return l&&l.errors?l.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Ii,this.statusChanges=new Ii}_calculateStatus(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){op(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}class cp extends ap{constructor(e=null,n,l){super(rp(n),up(l,n)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(n),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(e=>e(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=null,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=()=>{}}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class hp extends ap{constructor(e,n,l){super(rp(n),up(l,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n){this.registerControl(e,n),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()}setControl(e,n){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity(),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(l=>{this._throwIfControlMissing(l),this.controls[l].setValue(e[l],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){Object.keys(e).forEach(l=>{this.controls[l]&&this.controls[l].patchValue(e[l],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}reset(e={},n={}){this._forEachChild((l,t)=>{l.reset(e[t],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,l)=>(e[l]=n instanceof cp?n.value:n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(e,n)=>!!n._syncPendingControls()||e);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(n=>e(this.controls[n],n))}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const n of Object.keys(this.controls)){const l=this.controls[n];if(this.contains(n)&&e(l))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,n,l)=>((n.enabled||this.disabled)&&(e[l]=n.value),e))}_reduceChildren(e,n){let l=e;return this._forEachChild((e,t)=>{l=n(l,e,t)}),l}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((n,l)=>{if(void 0===e[l])throw new Error(`Must supply a value for form control with name: '${l}'.`)})}}class dp extends ap{constructor(e,n,l){super(rp(n),up(l,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(e){return this.controls[e]}push(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()}insert(e,n){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity()}removeAt(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity()}setControl(e,n){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),n&&(this.controls.splice(e,0,n),this._registerControl(n)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){this._checkAllValuesPresent(e),e.forEach((e,l)=>{this._throwIfControlMissing(l),this.at(l).setValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e.forEach((e,l)=>{this.at(l)&&this.at(l).patchValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}reset(e=[],n={}){this._forEachChild((l,t)=>{l.reset(e[t],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e instanceof cp?e.value:e.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let e=this.controls.reduce((e,n)=>!!n._syncPendingControls()||e,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error("Cannot find form control at index "+e)}_forEachChild(e){this.controls.forEach((n,l)=>{e(n,l)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((n,l)=>{if(void 0===e[l])throw new Error(`Must supply a value for form control at index: ${l}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const gp=(()=>Promise.resolve(null))();class pp extends _g{constructor(e,n){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new Ii,this.form=new hp({},tp(e),ip(n))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){gp.then(()=>{const n=this._findContainer(e.path);e.control=n.registerControl(e.name,e.control),ep(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){gp.then(()=>{const n=this._findContainer(e.path);n&&n.removeControl(e.name),function(e,n){const l=e.indexOf(n);l>-1&&e.splice(l,1)}(this._directives,e)})}addFormGroup(e){gp.then(()=>{const n=this._findContainer(e.path),l=new hp({});(function(e,n){null==e&&lp(n,"Cannot find control with"),e.validator=kg.compose([e.validator,n.validator]),e.asyncValidator=kg.composeAsync([e.asyncValidator,n.asyncValidator])})(l,e),n.registerControl(e.name,l),l.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){gp.then(()=>{const n=this._findContainer(e.path);n&&n.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,n){gp.then(()=>{this.form.get(e.path).setValue(n)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,n=this._directives,this.form._syncPendingControls(),n.forEach(e=>{const n=e.control;"submit"===n.updateOn&&n._pendingChange&&(e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)}),this.ngSubmit.emit(e),!1;var n}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}class mp extends _g{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return Jg(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return tp(this._validators)}get asyncValidator(){return ip(this._asyncValidators)}_checkParentType(){}}class fp{static modelParentException(){throw new Error('\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup\'s partner directive "formControlName" instead.  Example:\n\n      \n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });\n\n      Or, if you\'d like to avoid registering this form control, indicate that it\'s standalone in ngModelOptions:\n\n      Example:\n\n      \n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  ')}static formGroupNameException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      ${$g}\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      ${Kg}`)}static missingNameException(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')}static modelGroupParentException(){throw new Error(`\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      ${$g}\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      ${Kg}`)}}class Sp extends mp{constructor(e,n,l){super(),this._parent=e,this._validators=n,this._asyncValidators=l}_checkParentType(){this._parent instanceof Sp||this._parent instanceof pp||fp.modelGroupParentException()}}const Ep=(()=>Promise.resolve(null))();class vp extends Pg{constructor(e,n,l,t){super(),this.control=new cp,this._registered=!1,this.update=new Ii,this._parent=e,this._rawValidators=n||[],this._rawAsyncValidators=l||[],this.valueAccessor=function(e,n){if(!n)return null;Array.isArray(n)||lp(e,"Value accessor was not provided as an array for form control with");let l=void 0,t=void 0,i=void 0;return n.forEach(n=>{var s;n.constructor===Ag?l=n:(s=n,sp.some(e=>s.constructor===e)?(t&&lp(e,"More than one built-in value accessor matches form control with"),t=n):(i&&lp(e,"More than one custom value accessor matches form control with"),i=n))}),i||t||l||(lp(e,"No valid value accessor for form control with"),null)}(this,t)}ngOnChanges(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),function(e,n){if(!e.hasOwnProperty("model"))return!1;const l=e.model;return!!l.isFirstChange()||!Object.is(n,l.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?Jg(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return tp(this._rawValidators)}get asyncValidator(){return ip(this._rawAsyncValidators)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ep(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){!(this._parent instanceof Sp)&&this._parent instanceof mp?fp.formGroupNameException():this._parent instanceof Sp||this._parent instanceof pp||fp.modelParentException()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||fp.missingNameException()}_updateValue(e){Ep.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1})})}_updateDisabled(e){const n=e.isDisabled.currentValue,l=""===n||n&&"false"!==n;Ep.then(()=>{l&&!this.control.disabled?this.control.disable():!l&&this.control.disabled&&this.control.enable()})}}class Rp{}class Op{}class Tp{constructor(e,n=!1,l=0,t=!1){this.name=e,this.enabled=n,this.reserved=l,this.reservedPercent=t}}class Cp{constructor(e=!1,n=0,l=!1,t=0,i=!1,s=0,r=!1,u=0){this.autoSellEnabled=e,this.autoSellAmount=n,this.autoSellPercentage=l,this.autoSellOrder=t,this.autoBuyEnabled=i,this.autoBuyAmount=s,this.autoBuyPercentage=r,this.autoBuyOrder=u}static clone(e){return new Cp(e.autoSellEnabled,e.autoSellAmount,e.autoSellPercentage,e.autoSellOrder,e.autoBuyEnabled,e.autoBuyAmount,e.autoBuyPercentage,e.autoBuyOrder)}}class Ip{constructor(e,n=0,l=[new Tp("Crafting"),new Tp("Kitchen"),new Tp("Manufacture"),new Tp("Hut"),new Tp("House"),new Tp("Longhouse"),new Tp("Tudor house"),new Tp("Settlement"),new Tp("Bakery"),new Tp("Tailor"),new Tp("Tavern"),new Tp("Tannery"),new Tp("Sawmill"),new Tp("Windmill"),new Tp("Cotton mill"),new Tp("Brewery"),new Tp("Winery"),new Tp("Stonemason"),new Tp("Mint"),new Tp("Fishers hut"),new Tp("Paper mill")].sort((e,n)=>e.name.localeCompare(n.name)),t=!1,i=null){this.resource=e,this.reserve=n,this.reservePercent=t,this.consumers=l,this.autoTrade=null===i?new Cp:i}static clone(e){const n=[];return e.consumers.forEach(e=>n.push(new Tp(e.name,e.enabled,e.reserved,e.reservedPercent))),new Ip(e.resource,e.reserve,n,e.reservePercent,Cp.clone(e.autoTrade))}getReservedAmountBySource(e,n,l){let t=0,i=!1;return l?0:(t=this.reserve,i=this.reservePercent,this.consumers.forEach(n=>{n.enabled&&n.name===e&&(t=n.reserved,i=n.reservedPercent)}),i?Math.floor(t/100*n.getLimit()):t)}isUsed(){let e=!1;return 0!==this.reserve||(this.consumers.forEach(n=>{n.enabled&&(e=!0)}),(this.autoTrade.autoSellEnabled||this.autoTrade.autoBuyEnabled)&&(e=!0),e)}}class bp{constructor(e,n,l,t,i,s,r,u){this.resource=e,this.name=n,this.amount=l,this.limit=t,this.resourceTypes=i,this.visible=s,this.highlighted=r,this.prioritise=u,this.options=new Ip(e)}toJSON(){return{amount:this.amount,limit:this.limit,visible:this.visible,highlighted:this.highlighted,prioritise:this.prioritise,options:this.options}}addResource(e){return this.amount+e>this.limit?(this.amount=this.limit,this.amount):(this.amount+=e,this.amount)}removeResource(e){return this.amount-e>0&&(this.amount-=e,!0)}getResource(){return this.resource}getName(){return this.name}getAmount(){return this.amount}getLimit(){return this.limit}getResourceTypes(){return this.resourceTypes}hasResourceType(e){return this.resourceTypes.indexOf(e)>-1}isVisible(){return this.visible}toggleVisible(){return this.visible=!this.visible,this.visible}isHighlighted(){return this.highlighted}toggleHighlighted(){return this.highlighted=!this.highlighted,this.highlighted}getFreeSpace(){return this.limit-this.amount}}class yp{constructor(){this.amount=0,this.limit=0,this.resourceTypes=[],this.visible=!1,this.highlighted=!1,this.prioritise=!1}forResource(e){return this.resource=e,this}withName(e){return this.name=e,this}withAmount(e){return this.amount=e,this}withLimit(e){return this.limit=e,this}withResourceTypes(e){return e.forEach(e=>this.resourceTypes.push(e)),this}withResourceType(e){return this.resourceTypes.push(e),this}withVisible(e){return this.visible=e,this}withHighlighted(e){return this.highlighted=e,this}withPrioritise(e){return this.prioritise=e,this}build(){const e=new bp(this.resource,this.name,this.amount,this.limit,this.resourceTypes,this.visible,this.highlighted,this.prioritise);return this.resource=void 0,this.name=void 0,this.amount=0,this.limit=0,this.resourceTypes=[],this.visible=!1,this.highlighted=!1,this.prioritise=!1,e}}class Ap{constructor(e,n,l,t=null){this.type=n,this.day=l,this.message=e,this.data=t}}let Np=(()=>{class e{constructor(){this.services=new Map}addService(e,n){this.services.set(e,n)}getService(e){return this.services.get(e)}getIdService(){return this.services.get(bu.ID)}getKongregateService(){return this.services.get(bu.KONGREGATE)}getWeatherService(){return this.services.get(bu.WEATHER)}getManagementService(){return this.services.get(bu.MANAGEMENT)}getTechService(){return this.services.get(bu.RESEARCH)}getHappinessService(){return this.services.get(bu.HAPPINESS)}getEffectsService(){return this.services.get(bu.EFFECTS)}getRecipeService(){return this.services.get(bu.RECIPE)}getLandService(){return this.services.get(bu.LAND)}getResourcesService(){return this.services.get(bu.RESOURCES)}getRegionsService(){return this.services.get(bu.REGIONS)}getVillageService(){return this.services.get(bu.VILLAGE)}getFortService(){return this.services.get(bu.FORT)}getForestService(){return this.services.get(bu.FOREST)}getFieldService(){return this.services.get(bu.FIELD)}getMountainsService(){return this.services.get(bu.MOUNTAINS)}getSeaService(){return this.services.get(bu.SEA)}getCalendarService(){return this.services.get(bu.CALENDAR)}getRoyalService(){return this.services.get(bu.ROYAL)}getWorldService(){return this.services.get(bu.WORLD)}getModalService(){return this.services.get(bu.MODAL)}getArmyService(){return this.services.get(bu.ARMY)}getNavyService(){return this.services.get(bu.NAVY)}getLogService(){return this.services.get(bu.LOG)}getGameService(){return this.services.get(bu.GAME)}getServiceByRegion(e){switch(e){case Eu.VILLAGE:return this.services.get(bu.VILLAGE);case Eu.FORT:return this.services.get(bu.FORT);case Eu.FIELD:return this.services.get(bu.FIELD);case Eu.FOREST:return this.services.get(bu.FOREST);case Eu.MOUNTAINS:return this.services.get(bu.MOUNTAINS);case Eu.SEA:return this.services.get(bu.SEA);case Eu.PLATEAU:return this.services.get(bu.PLATEAU);default:console.error("Region service not found for ["+Eu[e]+"]")}}}return e.\u0275prov=re({factory:function(){return new e},token:e,providedIn:"root"}),e})();var _p=function(e){return e[e.AUTO_SAVE_STATUS=0]="AUTO_SAVE_STATUS",e[e.AUTO_SAVE_PERIOD=1]="AUTO_SAVE_PERIOD",e[e.METRIC=2]="METRIC",e[e.SAVE_LOGS=3]="SAVE_LOGS",e[e.SOUND_MASTER=4]="SOUND_MASTER",e[e.SOUND_MASTER_VOLUME=5]="SOUND_MASTER_VOLUME",e[e.VISUAL_PROGRESS_BARS=6]="VISUAL_PROGRESS_BARS",e[e.AUTO_TEXT_FITTING=7]="AUTO_TEXT_FITTING",e[e.POSITIVE_COLOUR=8]="POSITIVE_COLOUR",e[e.NEGATIVE_COLOUR=9]="NEGATIVE_COLOUR",e[e.PAGED_VIEW=10]="PAGED_VIEW",e[e.BUILDINGS_PER_PAGE=11]="BUILDINGS_PER_PAGE",e[e.KEEP_RESERVATION_SETTINGS_ON_RESET=12]="KEEP_RESERVATION_SETTINGS_ON_RESET",e[e.KEEP_MANAGEMENT_SETTINGS_ON_RESET=13]="KEEP_MANAGEMENT_SETTINGS_ON_RESET",e[e.PAUSE_ON_INIT=14]="PAUSE_ON_INIT",e[e.KEEP_AUTO_TRADE_ON_RESET=15]="KEEP_AUTO_TRADE_ON_RESET",e[e.AI_DIFFICULTY=16]="AI_DIFFICULTY",e[e.SOUND_MUSIC=17]="SOUND_MUSIC",e[e.SOUND_MUSIC_VOLUME=18]="SOUND_MUSIC_VOLUME",e[e.SOUND_EFFECTS=19]="SOUND_EFFECTS",e[e.SOUND_EFFECTS_VOLUME=20]="SOUND_EFFECTS_VOLUME",e[e.SOUND_EFFECT_MARKET=21]="SOUND_EFFECT_MARKET",e[e.SOUND_EFFECT_RESEARCH=22]="SOUND_EFFECT_RESEARCH",e[e.SOUND_EFFECT_INVASION=23]="SOUND_EFFECT_INVASION",e[e.SOUND_EFFECT_SEASON=24]="SOUND_EFFECT_SEASON",e[e.PLAYER_COLOUR=25]="PLAYER_COLOUR",e}({});let wp=(()=>{class e{constructor(e){this.servicesService=e,this.optionsSubject=new C,this.options=new Map}init(){this.options.set(_p.AUTO_SAVE_STATUS,Xu.AUTO_SAVE_STATUS),this.options.set(_p.AUTO_SAVE_PERIOD,Xu.AUTO_SAVE_PERIOD),this.options.set(_p.METRIC,Xu.METRIC),this.options.set(_p.SAVE_LOGS,Xu.SAVE_LOGS),this.options.set(_p.PAUSE_ON_INIT,Xu.PAUSE_ON_INIT),this.options.set(_p.KEEP_RESERVATION_SETTINGS_ON_RESET,Xu.KEEP_RESERVATION_SETTINGS_ON_RESET),this.options.set(_p.KEEP_MANAGEMENT_SETTINGS_ON_RESET,Xu.KEEP_MANAGEMENT_SETTINGS_ON_RESET),this.options.set(_p.KEEP_AUTO_TRADE_ON_RESET,Xu.KEEP_AUTO_TRADE_ON_RESET),this.options.set(_p.SOUND_MASTER,Xu.SOUND_MASTER),this.options.set(_p.SOUND_MASTER_VOLUME,Xu.SOUND_MASTER_VOLUME),this.options.set(_p.SOUND_MUSIC,Xu.SOUND_MUSIC),this.options.set(_p.SOUND_MUSIC_VOLUME,Xu.SOUND_MUSIC_VOLUME),this.options.set(_p.SOUND_EFFECTS,Xu.SOUND_EFFECTS),this.options.set(_p.SOUND_EFFECTS_VOLUME,Xu.SOUND_EFFECTS_VOLUME),this.options.set(_p.SOUND_EFFECT_MARKET,Xu.SOUND_EFFECT_MARKET),this.options.set(_p.SOUND_EFFECT_RESEARCH,Xu.SOUND_EFFECT_RESEARCH),this.options.set(_p.SOUND_EFFECT_INVASION,Xu.SOUND_EFFECT_INVASION),this.options.set(_p.SOUND_EFFECT_SEASON,Xu.SOUND_EFFECT_SEASON),this.options.set(_p.VISUAL_PROGRESS_BARS,Xu.VISUAL_PROGRESS_BARS),this.options.set(_p.AUTO_TEXT_FITTING,Xu.AUTO_TEXT_FITTING),this.options.set(_p.PAGED_VIEW,Xu.PAGED_VIEW),this.options.set(_p.BUILDINGS_PER_PAGE,Xu.BUILDINGS_PER_PAGE),this.options.set(_p.POSITIVE_COLOUR,Xu.POSITIVE_COLOUR),this.options.set(_p.NEGATIVE_COLOUR,Xu.NEGATIVE_COLOUR),this.options.set(_p.PLAYER_COLOUR,Xu.PLAYER_COLOUR),this.options.set(_p.AI_DIFFICULTY,Xu.AI_DIFFICULTY),this.changePositiveColour(),this.changeNegativeColour(),this.optionsSubject.next()}getName(){return"OptionsService"}load(e){this.options=new Map(JSON.parse(e.options)),this.options.has(_p.KEEP_RESERVATION_SETTINGS_ON_RESET)||this.options.set(_p.KEEP_RESERVATION_SETTINGS_ON_RESET,Xu.KEEP_RESERVATION_SETTINGS_ON_RESET),this.options.has(_p.KEEP_MANAGEMENT_SETTINGS_ON_RESET)||this.options.set(_p.KEEP_MANAGEMENT_SETTINGS_ON_RESET,Xu.KEEP_MANAGEMENT_SETTINGS_ON_RESET),this.options.has(_p.KEEP_AUTO_TRADE_ON_RESET)||this.options.set(_p.KEEP_AUTO_TRADE_ON_RESET,Xu.KEEP_AUTO_TRADE_ON_RESET),this.options.has(_p.VISUAL_PROGRESS_BARS)||this.options.set(_p.VISUAL_PROGRESS_BARS,Xu.VISUAL_PROGRESS_BARS),this.options.has(_p.SOUND_MASTER)||this.options.set(_p.SOUND_MASTER,Xu.SOUND_MASTER),this.options.has(_p.SOUND_MASTER_VOLUME)||this.options.set(_p.SOUND_MASTER_VOLUME,Xu.SOUND_MASTER_VOLUME),this.options.has(_p.SOUND_MUSIC)||this.options.set(_p.SOUND_MUSIC,Xu.SOUND_MUSIC),this.options.has(_p.SOUND_MUSIC_VOLUME)||this.options.set(_p.SOUND_MUSIC_VOLUME,Xu.SOUND_MUSIC_VOLUME),this.options.has(_p.SOUND_EFFECTS)||this.options.set(_p.SOUND_EFFECTS,Xu.SOUND_EFFECTS),this.options.has(_p.SOUND_EFFECTS_VOLUME)||this.options.set(_p.SOUND_EFFECTS_VOLUME,Xu.SOUND_EFFECTS_VOLUME),this.options.has(_p.SOUND_EFFECT_MARKET)||this.options.set(_p.SOUND_EFFECT_MARKET,Xu.SOUND_EFFECT_MARKET),this.options.has(_p.SOUND_EFFECT_RESEARCH)||this.options.set(_p.SOUND_EFFECT_RESEARCH,Xu.SOUND_EFFECT_RESEARCH),this.options.has(_p.SOUND_EFFECT_INVASION)||this.options.set(_p.SOUND_EFFECT_INVASION,Xu.SOUND_EFFECT_INVASION),this.options.has(_p.SOUND_EFFECT_SEASON)||this.options.set(_p.SOUND_EFFECT_SEASON,Xu.SOUND_EFFECT_SEASON),this.options.has(_p.AUTO_TEXT_FITTING)||this.options.set(_p.AUTO_TEXT_FITTING,Xu.AUTO_TEXT_FITTING),this.options.has(_p.PAGED_VIEW)||this.options.set(_p.PAGED_VIEW,Xu.PAGED_VIEW),this.options.has(_p.BUILDINGS_PER_PAGE)||this.options.set(_p.BUILDINGS_PER_PAGE,Xu.BUILDINGS_PER_PAGE),this.options.has(_p.POSITIVE_COLOUR)||this.options.set(_p.POSITIVE_COLOUR,Xu.POSITIVE_COLOUR),this.options.has(_p.NEGATIVE_COLOUR)||this.options.set(_p.NEGATIVE_COLOUR,Xu.NEGATIVE_COLOUR),this.options.has(_p.PLAYER_COLOUR)||this.options.set(_p.PLAYER_COLOUR,Xu.PLAYER_COLOUR),this.options.has(_p.PAUSE_ON_INIT)||this.options.set(_p.PAUSE_ON_INIT,Xu.PAUSE_ON_INIT),this.options.has(_p.AI_DIFFICULTY)||this.options.set(_p.AI_DIFFICULTY,Xu.AI_DIFFICULTY),this.changePositiveColour(),this.changeNegativeColour(),this.changePlayerColour(),this.optionsSubject.next()}save(){return{options:JSON.stringify(Array.from(this.options.entries()))}}reset(e,n){}registerForOptionsChange(){return this.optionsSubject.asObservable()}setOption(e,n){this.options.set(e,n),this.optionsSubject.next()}setOptions(e){for(const n of e)this.options.set(n.option,n.value);this.optionsSubject.next()}getOption(e){return this.options.get(e)}setPositiveColour(e){this.options.set(_p.POSITIVE_COLOUR,e),this.changePositiveColour()}setNegativeColour(e){this.options.set(_p.NEGATIVE_COLOUR,e),this.changeNegativeColour()}setPlayerColour(e){this.options.set(_p.PLAYER_COLOUR,e),this.changePlayerColour()}changePositiveColour(){document.getElementById("VillagerKings").style.setProperty("--positive-colour",this.options.get(_p.POSITIVE_COLOUR))}changeNegativeColour(){document.getElementById("VillagerKings").style.setProperty("--negative-colour",this.options.get(_p.NEGATIVE_COLOUR))}changePlayerColour(){this.servicesService.getService(bu.WORLD).setPlayerColour(this.options.get(_p.PLAYER_COLOUR))}}return e.\u0275prov=re({factory:function(){return new e(Ae(Np))},token:e,providedIn:"root"}),e})();var Pp=function(e){return e[e.SPRING=0]="SPRING",e[e.SUMMER=1]="SUMMER",e[e.AUTUMN=2]="AUTUMN",e[e.WINTER=3]="WINTER",e}({});class Mp{constructor(e,n){this.day=e,this.year=n}}let Dp=(()=>{class e{constructor(e,n){this.servicesService=e,this.optionsService=n,this.audios=[],this.musicFiles=["assets/sounds/medieval_life.mp3","assets/sounds/medieval_village.mp3"],e.addService(bu.SOUND,this),this.optionsService.registerForOptionsChange().subscribe(()=>{const e=this.optionsService.getOption(_p.SOUND_MASTER)&&this.optionsService.getOption(_p.SOUND_MUSIC),n=this.optionsService.getOption(_p.SOUND_MASTER)&&this.optionsService.getOption(_p.SOUND_EFFECTS);this.audios.forEach(l=>{l.audio.volume=l.effect?n?this.optionsService.getOption(_p.SOUND_MASTER_VOLUME)/100*(this.optionsService.getOption(_p.SOUND_EFFECTS_VOLUME)/100):0:e?this.optionsService.getOption(_p.SOUND_MASTER_VOLUME)/100*(this.optionsService.getOption(_p.SOUND_MUSIC_VOLUME)/100):0})})}playAudio(e,n=!0){this.audios=this.audios.filter(e=>!e.audio.ended),e.load();const l=this.optionsService.getOption(_p.SOUND_MASTER)&&this.optionsService.getOption(_p.SOUND_MUSIC),t=this.optionsService.getOption(_p.SOUND_MASTER)&&this.optionsService.getOption(_p.SOUND_EFFECTS);return e.volume=n?t?this.optionsService.getOption(_p.SOUND_MASTER_VOLUME)/100*(this.optionsService.getOption(_p.SOUND_EFFECTS_VOLUME)/100):0:l?this.optionsService.getOption(_p.SOUND_MASTER_VOLUME)/100*(this.optionsService.getOption(_p.SOUND_MUSIC_VOLUME)/100):0,e.play(),this.audios.push({audio:e,effect:n}),e}playMarket(){this.optionsService.getOption(_p.SOUND_EFFECT_MARKET)&&this.playAudio(new Audio("assets/sounds/village_bells.mp3"))}playResearch(){this.optionsService.getOption(_p.SOUND_EFFECT_RESEARCH)&&this.playAudio(new Audio("assets/sounds/village_bells.mp3"))}playBattle(){this.optionsService.getOption(_p.SOUND_EFFECT_INVASION)&&this.playAudio(new Audio("assets/sounds/battle.mp3"))}playSeason(e){if(this.optionsService.getOption(_p.SOUND_EFFECT_SEASON))switch(e){case Pp.SPRING:this.playAudio(new Audio("assets/sounds/spring.mp3"));break;case Pp.SUMMER:this.playAudio(new Audio("assets/sounds/summer.mp3"));break;case Pp.AUTUMN:this.playAudio(new Audio("assets/sounds/autumn.mp3"));break;case Pp.WINTER:this.playAudio(new Audio("assets/sounds/winter.mp3"))}}playMusic(){const e=this.servicesService;this.playAudio(new Audio(Nu.randomArrayElement(this.musicFiles)),!1).addEventListener("ended",(function(){e.getService(bu.SOUND).checkForMusic()}))}checkForMusic(){this.audios=this.audios.filter(e=>!e.audio.ended),this.audios.find(e=>!e.effect)||this.playMusic()}}return e.\u0275prov=re({factory:function(){return new e(Ae(Np),Ae(wp))},token:e,providedIn:"root"}),e})(),Lp=(()=>{class e{constructor(e,n){this.servicesService=e,this.soundService=n,this.daySubject=new C,this.monthSubject=new C,this.yearSubject=new C,this.year=1,this.day=1,this.tickInDay=1,this.season=Pp.SPRING,e.addService(bu.CALENDAR,this)}getName(){return"CalendarService"}load(e){this.day=e.day,this.year=e.year,this.season=e.season,this.tickInDay=e.tickInDay}save(){return{day:this.day,year:this.year,season:this.season,tickInDay:this.tickInDay}}reset(e,n){this.day=1,this.tickInDay=1,this.season=Pp.SPRING,e?this.year=1:this.year+=1}tick(e){this.tickInDay+=1,11===this.tickInDay&&(this.tickInDay=1,this.day+=1,361===this.day&&(this.day=1,this.year+=1,this.servicesService.getGameService().isEnabled(ou.CALENDAR)&&(this.servicesService.getLogService().success("New Year!"),this.monthSubject.next(Math.floor(this.day/30+1))),this.yearSubject.next(this.year)),this.daySubject.next(this.day),this.day%30==1&&0!==Math.floor(this.day/30)&&this.monthSubject.next(Math.floor(this.day/30+1)));const n=this.season;this.day>=1&&this.day<=90?this.season=Pp.SPRING:this.day>90&&this.day<=180?this.season=Pp.SUMMER:this.day>180&&this.day<=270?(this.season!==Pp.AUTUMN&&(this.servicesService.getResourcesService().checkResourcesBeforeWinter(),this.servicesService.getService(bu.TUTORIAL).checkWinterTutorial()),this.season=Pp.AUTUMN):this.day>270&&this.day<=360&&(this.season=Pp.WINTER),n!==this.season&&this.soundService.playSeason(this.season)}getDay(){return this.day}getYear(){return this.year}getSeason(){return this.season}getAbsoluteDay(){return 360*(this.year-1)+this.day}getSeasonForAbsoluteDay(e){const n=(e-1)%360+1;return n>=1&&n<=90?Pp.SPRING:n>90&&n<=180?Pp.SUMMER:n>180&&n<=270?Pp.AUTUMN:n>270&&n<=360?Pp.WINTER:void 0}registerForDayChange(){return this.daySubject.asObservable()}registerForMonthChange(){return this.monthSubject.asObservable()}registerForYearChange(){return this.yearSubject.asObservable()}getDate(){return new Mp(this.day,this.year)}progressDays(e){this.day+=10}getTickInDay(){return this.tickInDay}}return e.\u0275prov=re({factory:function(){return new e(Ae(Np),Ae(Dp))},token:e,providedIn:"root"}),e})(),xp=(()=>{class e{constructor(e,n,l){this.servicesService=e,this.calendarService=n,this.optionsService=l,this.entries=[],this.servicesService.addService(bu.LOG,this),this.logSubject=new C}customLog(e,n){this.entries.push(new Ap(e,n,this.calendarService.getDay())),this.logSubject.next()}log(e){this.entries.push(new Ap(e,Du.LOG,this.calendarService.getDay())),this.logSubject.next()}warning(e){this.entries.push(new Ap(e,Du.WARNING,this.calendarService.getDay())),this.logSubject.next()}success(e){this.entries.push(new Ap(e,Du.SUCCESS,this.calendarService.getDay())),this.logSubject.next()}mystical(e){this.entries.push(new Ap(e,Du.MYSTICAL,this.calendarService.getDay())),this.logSubject.next()}fightReport(e){this.entries.push(new Ap(e.message,Du.FIGHT_REPORT,this.calendarService.getDay(),e)),this.logSubject.next()}errorReport(e){this.entries.push(new Ap(e.message,Du.ERROR,this.calendarService.getDay(),e)),this.logSubject.next()}autoSave(){if(this.entries.length>0){const e=this.entries[this.entries.length-1];if(e.message&&e.message.includes("Auto saved")){let n=2;const l=e.message.replace("Auto saved","").replace(" ","");l.length>0&&(n=Number(l)+1),e.message="Auto saved "+n,this.logSubject.next()}else this.log("Auto saved")}else this.log("Auto saved")}registerForLogs(){return this.logSubject.asObservable()}getEntries(){return this.entries}clearEntries(){this.entries=[],this.logSubject.next()}getName(){return"LogService"}load(e){this.entries=e.logs}reset(e,n){this.entries=e?[]:this.entries.slice(-5).filter(e=>e.type===Du.MYSTICAL)}save(){return this.optionsService.getOption(_p.SAVE_LOGS)?{logs:this.entries.slice(Math.max(0,this.entries.length-100),this.entries.length)}:{logs:[]}}}return e.\u0275prov=re({factory:function(){return new e(Ae(Np),Ae(Lp),Ae(wp))},token:e,providedIn:"root"}),e})();var kp=function(e){return e.ERROR_1="ERROR_1: Copying failed",e.ERROR_2="ERROR_2: Resource limit below 0",e.ERROR_3="ERROR_3: Workers below 0",e.ERROR_4="ERROR_4: Population Cap below 0",e.ERROR_5="ERROR_5: ",e.ERROR_6="ERROR_6: ",e.ERROR_7="ERROR_7: ",e.ERROR_8="ERROR_8: ",e}({});let Fp=(()=>{class e{constructor(e){this.servicesService=e,this.textSubject=new C,this.errorSubject=new C,this.missionDataSubject=new C,this.returnRegionSubject=new C,this.regionSelectionSubject=new C,this.shipyardLimitBoat=new C,this.buildingSubject=new C,this.tutorialSubject=new C,this.tutorialResponseSubject=new C,this.valueSubject=new C,this.onOpenSubject=new C,this.confirmationSubject=new C,this.abdicationSubject=new C,this.closeSubject=new C,this.valueResponseSubject=new C,this.regionSubject=new C,this.worldRegionSubject=new C,this.fightReportSubject=new C,this.techSubject=new C,this.resourceOptionsSubject=new C,this.resourceOptionsResponseSubject=new C,this.modals=[],this.servicesService.addService(bu.MODAL,this)}add(e){this.modals.push(e)}remove(e){this.modals=this.modals.filter(n=>n.id!==e)}open(e){this.modals.find(n=>n.id===e).open(),this.onOpenSubject.next(e)}close(e){this.modals.find(n=>n.id===e).close(),this.closeSubject.next(e)}registerForText(){return this.textSubject.asObservable()}registerForErrorReport(){return this.errorSubject.asObservable()}registerForOnOpen(){return this.onOpenSubject.asObservable()}registerForConfirmation(){return this.confirmationSubject.asObservable()}sendConfirmationResult(e){this.confirmationSubject.next(e)}registerForAbdication(){return this.abdicationSubject.asObservable()}sendAbdicationResult(e){this.abdicationSubject.next(e)}setModalText(e){this.textSubject.next(e)}setModalErrorReport(e){this.errorSubject.next(e)}registerForRegion(){return this.regionSubject.asObservable()}setRegion(e){this.regionSubject.next(e)}registerForCloseModal(){return this.closeSubject.asObservable()}sendCloseSignal(e){this.closeSubject.next(e)}registerForValue(){return this.valueSubject.asObservable()}setModalValue(e){this.valueSubject.next(e)}sendValueInput(e){this.valueResponseSubject.next(e)}registerForValueResponse(){return this.valueResponseSubject.asObservable()}registerForMissionData(){return this.missionDataSubject.asObservable()}registerForBuilding(){return this.buildingSubject.asObservable()}setMissionData(e){this.missionDataSubject.next(e)}setBuilding(e){this.buildingSubject.next(e)}info(e){this.open(Pu.INFO),this.setModalText(e)}openTutorialModal(e){const n=this.modals.find(e=>e.id===Pu.TUTORIAL);n.close(),n.openTutorialWindow(e)}registerForTutorial(){return this.tutorialSubject.asObservable()}setTutorial(e){this.tutorialSubject.next(e)}registerForTutorialResponse(){return this.tutorialResponseSubject.asObservable()}sendTutorialResponse(e){this.tutorialResponseSubject.next(e)}registerForResourceOptions(){return this.resourceOptionsSubject.asObservable()}setResourceOptions(e){this.resourceOptionsSubject.next(e)}registerForResourceOptionsResponse(){return this.resourceOptionsResponseSubject.asObservable()}sendResourceOptionsResponse(e){return this.resourceOptionsResponseSubject.next(e)}registerForReturnRegion(){return this.returnRegionSubject.asObservable()}setReturnRegion(e){this.returnRegionSubject.next(e)}registerForRegionSelectionOrder(){return this.regionSelectionSubject.asObservable()}setRegionSelection(e){this.regionSelectionSubject.next(e)}registerForShipyardLimitBoat(){return this.shipyardLimitBoat.asObservable()}setShipyardLimitBoat(e){this.shipyardLimitBoat.next(e)}registerForWorldRegion(){return this.worldRegionSubject.asObservable()}setWorldRegion(e){this.worldRegionSubject.next(e)}registerForFightReport(){return this.fightReportSubject.asObservable()}setFightReport(e){this.fightReportSubject.next(e)}registerForTech(){return this.techSubject.asObservable()}setTech(e){this.techSubject.next(e)}}return e.\u0275prov=re({factory:function(){return new e(Ae(Np))},token:e,providedIn:"root"}),e})(),Up=(()=>{class e{constructor(e,n,l){this.modalService=e,this.servicesService=n,this.router=l,this.tutorialsEnabled=!1,this.villageTutorialState=0,this.forestTutorialState=0,this.fieldTutorialState=0,this.mountainsTutorialState=0,this.plateauTutorialState=0,this.seaTutorialState=0,this.resourcesTutorialState=0,this.winterTutorialState=0,n.addService(bu.TUTORIAL,this)}getName(){return"TutorialService"}load(e){this.villageTutorialState=void 0!==e.villageTutorialState?e.villageTutorialState:0,this.forestTutorialState=void 0!==e.forestTutorialState?e.forestTutorialState:0,this.resourcesTutorialState=void 0!==e.resourcesTutorialState?e.resourcesTutorialState:0,this.fieldTutorialState=void 0!==e.fieldTutorialState?e.fieldTutorialState:0,this.mountainsTutorialState=void 0!==e.mountainsTutorialState?e.mountainsTutorialState:0,this.plateauTutorialState=void 0!==e.plateauTutorialState?e.plateauTutorialState:0,this.seaTutorialState=void 0!==e.seaTutorialState?e.seaTutorialState:0,this.winterTutorialState=void 0!==e.winterTutorialState?e.winterTutorialState:0}save(){return{villageTutorialState:this.villageTutorialState,forestTutorialState:this.forestTutorialState,resourcesTutorialState:this.resourcesTutorialState,fieldTutorialState:this.fieldTutorialState,mountainsTutorialState:this.mountainsTutorialState,plateauTutorialState:this.plateauTutorialState,seaTutorialState:this.seaTutorialState,winterTutorialState:this.winterTutorialState}}reset(e,n){}checkRegionTutorial(e){if(this.tutorialsEnabled)switch(e){case Eu.VILLAGE:if(0===this.villageTutorialState){this.startTutorial(Zu);const e=this.modalService.registerForTutorialResponse().subscribe(n=>{e.unsubscribe(),this.villageTutorialState=n})}break;case Eu.FOREST:if(0===this.forestTutorialState){this.startTutorial(Ju);const e=this.modalService.registerForTutorialResponse().subscribe(n=>{e.unsubscribe(),this.forestTutorialState=n})}break;case Eu.FIELD:if(0===this.fieldTutorialState){this.startTutorial(eo);const e=this.modalService.registerForTutorialResponse().subscribe(n=>{e.unsubscribe(),this.fieldTutorialState=n})}break;case Eu.MOUNTAINS:if(0===this.mountainsTutorialState){this.startTutorial(no);const e=this.modalService.registerForTutorialResponse().subscribe(n=>{e.unsubscribe(),this.mountainsTutorialState=n})}break;case Eu.PLATEAU:if(0===this.plateauTutorialState){this.startTutorial(lo);const e=this.modalService.registerForTutorialResponse().subscribe(n=>{e.unsubscribe(),this.plateauTutorialState=n})}break;case Eu.SEA:if(0===this.seaTutorialState){this.startTutorial(to);const e=this.modalService.registerForTutorialResponse().subscribe(n=>{e.unsubscribe(),this.seaTutorialState=n})}}}checkResourcesTutorial(){if(0===this.resourcesTutorialState){this.startTutorial(io);const e=this.modalService.registerForTutorialResponse().subscribe(n=>{e.unsubscribe(),this.resourcesTutorialState=n})}}enableTutorials(){this.tutorialsEnabled=!0}resetTutorials(){this.villageTutorialState=0,this.forestTutorialState=0,this.fieldTutorialState=0,this.mountainsTutorialState=0,this.plateauTutorialState=0,this.seaTutorialState=0,this.resourcesTutorialState=0,this.winterTutorialState=0,this.router.url.endsWith("village")?this.checkRegionTutorial(Eu.VILLAGE):this.router.url.endsWith("forest")?this.checkRegionTutorial(Eu.FOREST):this.router.url.endsWith("field")?this.checkRegionTutorial(Eu.FIELD):this.router.url.endsWith("mountains")?this.checkRegionTutorial(Eu.MOUNTAINS):this.router.url.endsWith("plateau")?this.checkRegionTutorial(Eu.PLATEAU):this.router.url.endsWith("sea")?this.checkRegionTutorial(Eu.SEA):this.router.url.endsWith("resources")?this.checkResourcesTutorial():this.modalService.info("Tutorials have been enabled")}startTutorial(e){this.modalService.setTutorial(e),this.servicesService.getService(bu.TICKER).stop(),this.modalService.openTutorialModal(e[0].position)}showCurrentViewTutorial(){this.router.url.endsWith("village")?this.startTutorial(Zu):this.router.url.endsWith("forest")?this.startTutorial(Ju):this.router.url.endsWith("field")?this.startTutorial(eo):this.router.url.endsWith("mountains")?this.startTutorial(no):this.router.url.endsWith("plateau")?this.startTutorial(lo):this.router.url.endsWith("sea")?this.startTutorial(to):this.router.url.endsWith("resources")?this.startTutorial(io):this.modalService.info("There is no tutorial for this tab")}checkWinterTutorial(){if(0===this.winterTutorialState){this.startTutorial(so);const e=this.modalService.registerForTutorialResponse().subscribe(n=>{e.unsubscribe(),this.winterTutorialState=n})}}}return e.\u0275prov=re({factory:function(){return new e(Ae(Fp),Ae(Np),Ae(Fd))},token:e,providedIn:"root"}),e})();const Hp=[{VERSION:"v1.0.1",MESSAGE:['<ul><li>Fixed barracks not unlocking after being researched</li><li>Fixed weather research description</li><li>Shrine and Church will be available earlier</li><li>"New year!" message will appear on day 1 and only after researching calendar</li><li>Shrine and Church will now log when they become available</li><li>Fixed wrapper boxes sizes</li><li>Pit mine research description changed</li><li>Reduced building button and dropdown font size to prevent overflow</li><li>Aligned building icon and text</li><li>Reduced amount of fur produced by hunter</li><li>Fixed merchant buying items for 0 coins</li><li>Reduced required research points for forestry</li><li>Last tutorial step no longer has "skip tutorial" button</li><li>Available nutrition metric doesn\'t include reserved food</li><li>Researching animals require hay</li><li>Fixed geologist last find description</li></ul>']},{VERSION:"v1.0.2",MESSAGE:["<ul><li>Fixed building line icons alignment</li><li>Refactored dev message window into changelog</li><li>Reduced low happiness severity</li><li>Doubled starting food amount</li><li>Buffed berry and mushroom find chance</li></ul>"]},{VERSION:"v1.0.3",MESSAGE:["<ul><li><b>Famine is now satisfied with 50% less food</b></li><li><b>Refactored happiness so that multiple things combined cannot bring it down to 0</b></li><li>It is now possible to pause the game through settings dropdown menu</li><li>The game is now paused during tutorials</li><li>Reduced brushwood cost of stone tools and bow.</li><li>Buildings are now taking action in random order instead of left to right top to bottom</li><li>Tavern decrease happiness over 75% when no alcohol is available</li><li>Changed Tavern building lines to show amount of alcohols</li><li>Added option to produce fish food for fishers</li><li>Added option to boost school of fish with fish food</li><li>Fixed new school of fish not spawning</li><li>Fixed new sharks not spawning</li><li>Added new Research for Fish Food</li><li>Added tutorials for Field, Mountains, Sea and Plateau regions</li><li>Added close button for royal points modal</li><li>Greatly increased animal taming chance <br>(Taming is supposed to be slow, as this only to be used to kick-start pastures. Another method is to buy animals on the market)</li><li>Fixed animal amount calculation errors resulting in negative, doubled<br> or over the limit amount of animals</li><li>Added notification to market tab if there is no marketplace</li><li>Changed marketplace bribe button text</li></ul>"]},{VERSION:"v1.0.4",MESSAGE:["<ul><li><b>Fixed demolishing huts and houses</b></li><li>Fixed Crafting tab display for Chrome and Edge</li><li>Increased gatherer chance for finding stone and brushwood</li><li>Added several warning for low forest size</li><li>Increased minimal yearly forest growth</li></ul>"]},{VERSION:"v1.0.5",MESSAGE:['<ul><li><b>Fixed wrong army mission being started</b></li><li><b>Fixed Food nutrition value displaying NaN and blocking anything that requires FOOD nutrition as cost</b></li><li>Fixed "Spy" mission not displaying enemy power</li><li>Church will now unlock Religion tab when built</li><li>Urban Planning no longer require house to be researched</li></ul>']},{VERSION:"v1.0.6",MESSAGE:["Bug fixes:<ul><li><b>Fixed King of the People royal perk not allowing to build houses</b></li><li><b>Fixed royal perks not processing unlocked research correctly</b></li><li><b>Fixed research permanent effects not to persist through soft reset and abdication</b></li><li><b>Fixed geologist not finding gold, silver and iron</b></li><li><b>Fixed Tavern not appearing after being researched</b></li><li><b>Fixed fields, orchards and pastures splitting value</b></li><li><b>Fixed 'Blessing' prayer and excluded a lot of buildings that would not benefit from it</b></li><li><b>Fixed changing religion to be player action</b></li></ul>Performance:<ul><li>Improved performance for reloading region<br>It will still take regular time on the first visit but after that I got about 3 times better loading time for region with 36 buildings</li></ul>Other:<ul><li>Improved butcher meat transporting. It no longer requires whole warehouse space to be available at once</li><li>Increased geologist deposits find chances</li><li>Renamed 'Entertainment' research to 'Alcohol'</li><li>Housing buildings show when they are using fuel</li><li>Added research tab warning when no workshop is set to research</li><li>Added button to show finished research projects</li><li>Increased average meat production for hunter lodge</li><li>Improved scrolling in modals</li><li>Urban planning research points requirement greatly reduced</li><li>Improved some prayers descriptions</li><li>Nature effects are now logged when added</li><li>Decreased recruitment times for all troops</li><li>Fishers huts will now work during rain (apparently fish can catch even better during rain due to more oxygen in the water)</li></ul>"]},{VERSION:"v1.0.7",MESSAGE:["Bug fixes:<ul><li><b>Fixed forecast period saving. It will no longer go back to one day after researching weather and reloading game</b></li><li><b>Fixed pastures filling only one butcher. Pasture will now give animal to butcher with shortest queue</b></li><li><b>Fixed demolishing buildings other than housing buildings</b></li><li><b>Fixed work management output to start with maxed output resources</b></li><li><b>Fixed mission not returning troops</b></li><li><b>Fixed possibility to build next wonder without researching</b></li><li><b>Lost wonder effects will be restored on abdication or soft reset</b></li><li><b>Fixed harvesting from field in summer</b></li><li><b>Fixed buying animal filling entire pasture</b></li><li><b>Fixed animals produce filling warehouse when chores went over 50</b></li></ul>Other:<ul><li><b>Changed expedition to take longer and cost more but give more land and kill less troops</b></li><li><b>Improved building filtering and made it persistent</b></li><li><b>Increased game size by about 25%</b></li><li><b>Arrange doesn't require to be researched anymore</b></li><li><b>New option to change visual progress bars to text progress value</b></li><li>Workshops show what is being researched</li><li>Geologist is no longer limited by mountains size</li><li>Slightly improved Royal perks descriptions</li><li>Added special warning for demolishing housing building when there is no enough free space to move all occupants to</li><li>Increased amount of fuel crafted from coal and heating power of coal</li><li>Pit mine now warn that it requires 20 deposits</li><li>Slightly corrected research display</li><li>Changes for Royal Points granting events</li><li>Disabled Ascension temple until it will be fixed</li></ul>Information:<ul><li>Drag and drop arrange seems to work on some computers and not on others. I have tested on a PC and laptop with the same operating system and browser version and it does work on PC and not on laptop.</li></ul>"]},{VERSION:"v1.0.8",MESSAGE:['Bug fixes:<ul><li><b>Fixed workshop display that caused buildings to display in two columns</b></li><li><b>Changes regarding workshop logic that might fix locking issue</b></li><li><b>Fixed "R Quarry" and "R Smithy" prerequisites display</b></li><li><b>Fixed incorrect animals moving when splitting or demolishing pasture</b></li><li><b>Gatherers won\'t lock on warehouse. Locking resource will be removed</b></li><li><b>Fixed field and orchard harvest scale display</b></li><li><b>Fixed bread recipe wheat cost to 2 instead of 1</b></li><li><b>Work management will fire worker after finishing work cycle if rules are not satisfied</b></li><li><b>Fixed and enabled Ascension Temple (requires conditions to be met to become available)</b></li><li><b>Fixed Missions again</b></li><li><b>Fixed some metals recipes not adding after research and smithy built</b></li><li><b>Fixed smithy demolishing</b></li></ul>Other:<ul><li><b>Added tooltips to resources in resource tab.<br>Consumable resources display nutrition<br>Fuel resources display heating power</b></li><li><b>Resources tooltip will now show what building/action used each resource in previous 30 days.</b></li><li>Increased hay consumption of animals by 30%</li><li>Increased apples nutrition value</li><li>Increased apples harvest multiplier</li><li>Increased great lighthouse royal points temporary (to make up for no effects)</li></ul>']},{VERSION:"v1.0.9",MESSAGE:["New features<ul><li><b>Implemented new extended reserver that can define different limit for most of the consumers</b></li></ul>Bug fixes:<ul><li><b>Fixed building Smithy required to research tech allowing to build it</b></li><li><b>Fixed limited buildings allowed to build over the limit</b></li><li><b>Fixed missions finishing without calculating outcome</b></li><li><b>Most probably fixed overscrolling from game to kongregate window</b></li></ul>Other:<ul><li>Doubled iron deposit find chance</li><li>Ore deposits found limited at 50 each</li><li>Troops multiplier now shows multiplied required resources in tooltip. If you cannot afford - troop turns grey</li><li>Slightly increased happiness reduction from half food rations</li><li>Buildings number limit is now added to build window</li><li>Decreased brushwood fuel cost and increased brushwood energy</li></ul>"]},{VERSION:"v1.0.10",MESSAGE:["New features<ul><li><b>Added more production details to buildings in build window</b></li><li><b>Added Manufacture building for specialised crafting</b></li><li><b>Added Specialised production research to unlock manufacture</b></li></ul>Bug fixes:<ul><li><b>Fixed and improved building power modifier display to include permanent effects and correctly use weather multiplier</b></li><li><b>Fixed pastures limits updating to resources tab</b></li><li><b>Fixed wooden tower starting with decreased health</b></li><li><b>Fixed metallurgy to add bronze recipe</b></li><li><b>Fixed orchard harvest calculation when in autumn</b></li><li><b>Fixed bug with New King buff lasting 0 days after reset or abdication</b></li></ul>Other:<ul><li>Changed work management option description (management tab) and added description message after researching Human Resources</li><li>Extended some buildings descriptions</li><li>Increased fur production from hunters</li></ul>"]},{VERSION:"v1.0.11",MESSAGE:["New features<ul><li><b>Forest management improved and moved into management tab</b></li></ul>Bug fixes:<ul><li><b>Fixed some wonders add effects after each reset</b></li><li><b>Fixed Forester not returning land when demolished</b></li></ul>Other:<ul><li>Added option to show only current view tutorial</li><li>Added buttons to hire/fire workers in all currently viewed buildings</li><li>Removed autofill '1' for crafting amount input</li><li>Increased expeditions cost</li><li>Decreased chicken and pigs breeding speed </li><li>Forestry research now requires management to be researched</li><li>Added Stonehenge effect for manufacture</li><li>Changed wonders to reapply missing effects on soft reset or abdication</li><li>Changed some missions times</li><li>Added troops list to mission in progress</li></ul>"]},{VERSION:"v1.0.12",MESSAGE:["New features<ul><li><b>Added new housing building</b></li><li><b>Added crafting cheese from milk (might require new run)</b></li><li><b>Added new army troop</b></li></ul>Bug fixes:<ul><li><b>Fixed huts and houses ignoring fuel items reserved amounts</b></li><li><b>Smithy can no longer be blessed</b></li><li><b>Fixed manufacture producing even when there are no required resources</b></li><li><b>Fixed pastures not producing when there is more than 1000 animals</b></li><li><b>Fixed some imperfections on the background image</b></li><li><b>Fixed orchard resources not available in resources and market before discovered via harvest</b></li></ul>Other:<ul><li><b>Warehouses can be combined and split</b></li><li>Warehouse building size increased (resource storage stays the same)</li><li>Nutrition display has been moved to header (might cause highlighted items to overflow)</li><li>Increased hay required by animals during winter</li><li>Animals now require food for the whole year ( less food required during spring, summer and autumn than in winter )</li><li>Added tooltip to market offers to show more information regarding the offer</li><li>Removed horse cost from expeditions</li><li>Manufacture moved closer in the research tree and has cost decreased</li><li>Mint now requires gold and silver to make coins</li><li>Added nutrition usage to header nutrition tooltip</li><li>Forest low size warnings will now display only when forestry is not researched</li><li>Crafting tab orders will now display how many workshops are crafting particular item</li></ul>"]},{VERSION:"v1.0.13",MESSAGE:["New features<ul><li><b>Added new health resources (no use yet)</b></li><li><b>It's now possible to switch reserved value to be interpreted as reserve % of total limit</b></li><li><b>Added possibility to add second row to header through management menu</b></li><li><b>Added Heritage system that awards points based on population size on reset</b></li></ul>Performance<ul><li><b>Big performance improvement</b></li><li><b>New performance option in settings (give current default performance a try before changing options)</b></li></ul>Bug fixes:<ul><li><b>Fixed wonder construction not benefiting from construction effects</b></li><li><b>Church will employ worker when finished building</b></li></ul>Other:<ul><li><b>Changed arrange drag and drop to click and click</b></li><li>Researching windmill will now make fabric visible and tradeable</li><li>Upgrade arrow will now have green outline</li><li>Farm can now be upgraded to level 2</li><li>Shrine and Church now have diminishing return from population size</li><li>Apples growth time reduced by 25%</li><li>Greatly reduced alcohol consumption rate</li><li>Invasions will now only happen when village reach certain size</li><li>Invasions will now have a recharge period when invasion threat will not grow</li><li>Workers and population can now be added to header</li><li>Nutrition value will show in the header from the start</li></ul>"]},{VERSION:"v1.0.14",MESSAGE:["New features<ul><li><b>Army troops will now require soldiers pay every 30 days.<br>If there is no enough coins to pay soldier has 25% chance to desert</b></li><li><b>Added new buildings filter for all/working/idle buildings</b></li></ul>Bug fixes:<ul><li><b>Fixed iron recipe not added after researching</b></li></ul>Other:<ul><li>Renamed 'Leather' research to 'Tannery' and removed it from tailor prerequisites</li><li>Added warning about low heating resources on start of autumn</li><li>Added herbs to gatherer building description</li><li>Vegetable and meat soups now require herbs</li><li>Increased high (90-100) happiness effect from 35% to 50%</li><li>Prioritized resources have higher chance to appear on market</li><li>Added new royal perk</li><li>Added a window for nature effects in effects management</li><li>Increased workshops building size</li><li>Decreased animals reproduction rate</li><li>Farm upgrade increases farm power</li></ul>"]},{VERSION:"v1.0.15",MESSAGE:["New features<ul><li><b>Added 'Herbalism' research that allows to plant herbs at fields</b></li></ul>Bug fixes:<ul><li><b>Fixed field harvest display and yield calculation</b></li><li><b>Fixed House building awarded with King of the People perk. It now starts with 3 occupants</b></li><li><b>Fixed game freeze when coins were reserved</b></li></ul>Other:<ul><li>Manufacture no longer stops production during storm</li><li>Mint building size increased, power decreased, output coins increased to be worth more than input resources</li><li>Initial housing buildings start equipped with clothes</li><li>Mathematics research will now also buff deconstructions</li><li>Added pause/resume button in the footer</li><li>Added options to change positive and negative colours to user defined</li></ul>"]},{VERSION:"v1.0.16",MESSAGE:["New features<ul><li><b>Added food priority to management</b></li></ul>Performance<ul><li><b>Added settings option that allows to paginate buildings in regions.<br>Number of buildings per page can be also defined in settings</b></li></ul>Bug fixes:<ul><li><b>Fixed king of the people House building having too much population from start (6 instead of 3)</b></li><li><b>Fixed selling animals removing more than it should</b></li><li><b>Fixed pit mine mining only 199 resources</b></li></ul>Other:<ul><li>Pit mine base power reduced</li><li>Workshops now show what resource they are waiting to deposit</li><li>Workshops won't start crafting if there is no space in warehouse or if warehouse will be filled to full by other workshops</li></ul>"]},{VERSION:"v1.0.17",MESSAGE:["New features<ul><li><b>Resources tooltips will now show who produced that item in the last 30 days</b></li></ul>Bug fixes:<ul><li><b>Fixed mountains tab deposits causing scroll bar to go below the screen</b></li><li><b>Tooltips should no longer go under the screen</b></li><li><b>Probably fixed tavern bug</b></li><li><b>Fixed army payday countdown stuck and invasions being tied to this countdown</b></li><li><b>Fixed day being 11 ticks instead of 10</b></li><li><b>Fixed golden items not resetting correctly</b></li></ul>Other:<ul><li>Changed 'Royal prophecy' 3rd perk to grant 'Bow' and 'Hunting' research instead of 'Mortar'</li><li>Added display of what golden items have been found during current run</li><li>Farms will now work on pastures during rain</li><li>Pastures details now show how much meat current animals will yield</li><li>Alcohol unlocks beer and wine resources</li><li>Windmill power and flour amount doubled, flour recipe cost reduced</li><li>Longhouse require hay instead of fabric (for roof), House require brushwood (also for roof)</li><li>Limited tavern to 1 (having more might be bad if they lack alcohol as negative/positive effects would be applied multiple times)</li></ul>"]},{VERSION:"v1.0.18",MESSAGE:["Bug fixes:<ul><li><b>Fixed huts not arranging correctly</b></li><li><b>Fixed importing showing researches blocked and as done</b></li><li><b>Fixed temperature in weather tab not showing in fahrenheit</b></li><li><b>Fixed workshop waiting for warehouse text breaking buildings order</b></li></ul>Other:<ul><li>Added description to finished research projects describing what has been learned</li></ul>"]},{VERSION:"v1.0.19",MESSAGE:["New features<ul><li><b>Added cooked fish. Researching 'cooking' required to get recipe</b></li><li><b>Added sheep and wool. Wool can be used to craft fabric</b></li></ul>Bug fixes:<ul></ul>Other:<ul><li><b>Reservation settings carry over soft resets/abdications but are deactivated. Added settings option to carry over activated reservations.</b></li><li><b>Management menu options carry over soft resets/abdications if settings option is enabled. Some options require research to become available so until they are researched default values will be used.</b></li><li>Mushrooms can now be planted on farms</li><li>Increased shrine building power</li><li>Increased single buildings buffs power from 5% to 10%. Added more buff information to buff tooltip</li><li>Added agriculture as prerequisite for alcohol</li><li>Unlocking shrine or church will log in green</li><li>Leather recipe no longer available from start</li><li>Removed 'waiting for trees' from loggers hut if forest is available</li><li>Added management option to display research progress in the header</li><li>Quarry and pit mine will log when resources finished</li><li>Increased bigger housing buildings food and fuel storage. Changed their cost to that value.</li></ul>"]},{VERSION:"v1.0.20",MESSAGE:["Bug fixes:<ul><li><b>Produced/used by data will no longer persist through resets</b></li></ul>Other:<ul><li>Added pasture description to hint where to find first animals</li><li>Added management option to display faith in the header</li><li>Added new royal perk to increase initial crafting queue size</li><li>Increased 'Motivation Speech' perk to last 5 years instead of just 1 year</li><li>Soft reset and abdication now shows how many people are needed for the next heritage point</li><li>Chores cap now scale with pasture size</li><li>Hay nutrition for animals reduced from 25 to 10</li><li>'Auto save' messages will now combine into one with number of total saves</li><li>Added log message when worker is removed from the building. This can be disabled in management</li><li>Used up building (quarry, pit mine) will now have greyed out background</li><li>Greatly increased fruiting rate for all orchard crops. Orchards can now fruit also in summer</li></ul>"]},{VERSION:"v1.1.0",MESSAGE:["New Features:<ul><li><b>Introduced world map tab with new mechanics and reworked army missions</b></li><li><b>New buildings: Embassy, Paper mill, Deep mine</b></li><li><b>A few new researches</b></li><li><b>Added average daily nutrition production display to nutrition tooltip</b></li></ul>Bug fixes:<ul><li>Lack of alcohol now reduces happiness again down to 75%</li><li>Added better verification to auto save period input</li><li>Fixed stuck payday counter when no pay is due</li></ul>Other:<ul><li><b>New level of 'Family jewels' that add coins to starting resources</b></li><li>'Motivation speech' duration increased to 100 years</li><li>Reduced alcohol consumption and happiness increase/decrease</li><li>Used up buildings (quarry, pit mine) will not require demolish confirmation anymore</li><li>Wiki link added to footer</li><li>Pit mine base power decreased</li></ul>"]},{VERSION:"v1.1.1",MESSAGE:["Bug fixes:<ul><li><b>Fixed deep mine not working after upgrade</b></li><li><b>Underground City will now also buff deep mine</b></li><li><b>Player plunder and conquer no longer will fight player region when conquered</b></li><li><b>Fixed issue with region selection moving map instead</b></li></ul>Other:<ul><li><b>Increased cost for AI colonization (so that it happens less frequently)</b></li><li><b>Increased cost for AI troops</b></li><li>Deep mine will take longer to find new ores and longer to upgrade</li><li>Royal perks split into permanent and one time use groups</li><li>When demolishing housing buildings villagers will take their share of food, fuel and clothes to the new building</li><li>There are reports about golden apples in the orchards!</li><li>Removed stone from colonization cost</li></ul>"]},{VERSION:"v1.1.2",MESSAGE:["New Features:<ul><li><b>Auto trade options in resource settings window</b></li></ul>Bug fixes:<ul><li><b>Fixed pasture chores to use farm power bonus</b></li><li><b>Fixed player regions being attacked even with friendly standing</b></li></ul>Other:<ul><li>Reduced troops training time</li><li>Reduced AI attacks chance</li><li>Removed fabric from paper mill cost</li><li>Pit mine require only 20 mountains again</li><li>Added confirm window when trying to buy resource over the limit</li></ul>"]},{VERSION:"v1.1.3",MESSAGE:["New Features:<ul><li><b>Work management has now a season rule</b></li><li><b>Work management can be set to craft always to max</b></li><li><b>Work management for training square added</b></li><li><b>Work management can be set to all buildings of the same type</b></li><li><b>Work management for farm added</b></li></ul>Bug fixes:<ul><li><b>Added Paper mill to resource settings</b></li><li><b>Fixed spy mission</b></li><li><b>'Move' mission troops will return if target region has been conquered</b></li></ul>Other:<ul><li><b>Reduced AI income</b></li><li>Reduced number of AI starting regions</li><li>Changed shrine cost to raw resources</li><li>Deep mine ore finding rate per ore increase with each building level</li><li>Added logs when player region is conquered</li></ul>"]},{VERSION:"v1.1.4",MESSAGE:["New Features:<ul><li><b>Added fight reports</b></li></ul>Other:<ul><li>Diplomacy will be decreased much more after hostile actions towards friendly kingdoms</li><li>AI regions will start with 2 archers to slow down early rush</li><li>Added settings option that will pause the game on page open/refresh</li></ul>"]},{VERSION:"v1.1.5",MESSAGE:["Bug fixes:<ul><li><b>Added missing fight reports on won defense</b></li><li><b>Fixed missing path connection from one of the regions</b></li><li><b>Fixed farm work management not saving</b></li><li><b>Added scroll bar to general management tab to prevent food priority hiding</b></li><li><b>Fixed player kingdom name changing</b></li><li><b>Loot message will combine the same resources</b></li><li><b>'Pickaxe design' will now add bonus to deep mine</b></li></ul>Other:<ul><li>Max colonists set to 20 (as there is no point in sending more)</li><li>Reduced hay yield multiplier from 2 to 1.5</li><li>Reduced the cost of 'specialised production' research</li><li>Increased pit mine base power</li><li>Reduced wine fermenting time from 1 year to 30 days</li><li>Recruits can be 'drag and drop' arranged</li><li>Soft reset/abdication message will now say on what year current run has started</li></ul>"]},{VERSION:"v1.1.6",MESSAGE:["New Features:<ul><li><b>Added research crafting queue</b></li><li><b>Added Buildings auto-sort.<br>Order of buildings will be the same as the order of appearance.</b></li></ul>Bug fixes:<ul><li><b>Chrome map bugs should be fixed now</b></li><li><b>Fixed building confirmation (triggered by button) to work incorrectly when confirmed with enter</b></li></ul>Other:<ul><li>Village region will be now remembered and redirected on reentry</li><li>Added management switch to change default workshop mode</li><li>Added management switch to prevent hunters stop taming</li></ul>"]},{VERSION:"v1.1.7",MESSAGE:["New Features:<ul><li><b>Added percentage auto trade</b></li></ul>Bug fixes:<ul><li><b>Fixed research progress resetting on load. Might not work for research already in the queue (finish or cancel and add again)</b></li></ul>Other:<ul><li>Added queue size display to research tab</li><li>Added pause 'p' and world map 'm' hotkeys</li><li>Improved pasture, field and orchard splitting and combining</li><li>Added management option to allow summer plowing</li><li>Added focus on input to some popup windows</li><li>Added settings option to keep auto trade on after reset</li><li>Added management option to disable auto trade logs</li><li>Changed skirmish win chance calculation</li><li>Added army bonus to each skirmish if army is at least twice the size of the enemy army</li><li>Reduce attack/defense of troop that won skirmish by 1 (tiredness)</li></ul>"]},{VERSION:"v1.1.8",MESSAGE:["Bug fixes:<ul><li><b>Fixed winter happiness from clothes not being applied</b></li></ul>Other:<ul><li>Soft reset renamed to abdication</li><li>World map regions ownership won't reset on abdications unless ordered to</li><li>Added map switch to show capitals, armies and spies</li></ul>"]},{VERSION:"v1.1.9",MESSAGE:["New Features:<ul><li><b>Added Gatherers camp (upgrades will come in future patches)</b></li><li><b>Added sickness mechanic. Freezing villagers will get sick.<br>Each sickness has a chance that sick villager will die.<br>Sick villagers cannot work<br>Herbal medicine reduces sickness time (and indirectly lethality)</b></li><li><b>Added research unlocking with Heritage Points</b></li></ul>Bug fixes:<ul><li><b>Fixed research queue entry canceling when selecting 'no' in confirmation window</b></li><li><b>Fixed header size when importing save with 2-line header on 1-line header state</b></li><li><b>Added Gatherers camp (upgrades will come in future patches)</b></li></ul>Other:<ul><li>Added heating efficiency descriptions to house building</li><li>Auto sort should now also consider manufacture recipe while sorting</li><li>Added log message when faith is full</li><li>Added header entries that list all resources of each category</li><li>Slightly changed buildings sizes</li></ul>"]},{VERSION:"v1.1.10",MESSAGE:["Bug fixes:<ul><li><b>Added Gatherers camp effect from sacred grove</b></li><li><b>Removed 'reset heritage' from abdication</b></li><li><b>Fixed auto sort buildings disappearing when sorting with manufacture without recipe</b></li><li><b>Gatherers camp local storage cleared when mode is changed</b></li><li><b>Fixed colonizing player owned regions would gain extra land</b></li><li><b>Fixed tavern not applying negative alcohol happiness when disabled</b></li><li><b>Fixed research unlocking blocked by buildings prerequisites even if those are fulfilled</b></li></ul>Other:<ul><li>Moved food priority section of management tab higher</li><li>Doubled amount of alcohol added to tavern (1 beer adds 2 beer in tavern, same for wine)</li><li>Increased amount of hay consumed by animals during winter by 50%</li></ul>"]},{VERSION:"v1.1.11",MESSAGE:["New Features:<ul><li><b>Added cloud(server) saving to settings window. Can only be triggered manually during testing period</b></li></ul>Bug fixes:<ul><li><b>QUICKFIX: fixed critical population related bug that could cause game being stuck in infinite loop</b></li><li><b>Fixed research spending HPs when prerequisites are not met</b></li><li><b>More fixes to auto sort function (for manufactures)</b></li></ul>Other:<ul><li>Loot will be sorted alphabetically</li></ul>"]},{VERSION:"v1.1.12",MESSAGE:["New Features:<ul><li><b>Added AI difficulty settings to options menu</b></li></ul>Bug fixes:<ul><li><b>QUICKFIX: Fixed report of defeated units showing for enemy colonisation</b></li><li><b>Fixed AI bug that caused AI daily code to be executed multiple times a day after abdication</b></li><li><b>Fixed server related popups</b></li><li><b>Fixed move army mission not to return from neutral regions</b></li><li><b>Fixed land, forest and mountains not being reset correctly on abdication</b></li><li><b>Fixed gatherers camps, their local storage can now store 1 of each item they can find in current mode.<br>Workers assigned here will work until local storage has all of the resources they can find</b></li></ul>Other:<ul><li>Slightly changed Troops stats</li><li>Militia can no longer be used to attack enemy</li><li>Reduced Spy troop gold cost</li><li>Work management buildings will start with output resources 'full' enabled</li><li>Reduced troops training time</li><li>Removed 50% progress start from gatherer when no resource is found</li></ul>"]},{VERSION:"v1.1.13",MESSAGE:["New Features:<ul><li><b>Added option to build multiple buildings at once</b></li></ul>Bug fixes:<ul><li><b>King of kingdom that has been conquered will no longer die</b></li><li><b>Fixed army effects not applying correctly to troops</b></li><li><b>Pasture will now add 'produced by' and 'used by' data to resources</b></li><li><b>Fixed some of the world map army sending bugs</b></li></ul>Other:<ul><li>World map display option will now be saved</li><li>Changed troops skirmish win calculation to linear function to benefit from army effects</li><li>Changed pig icon to one that looks more like a pig</li><li>Added new vegetable soup recipe that takes 1 berry and 1 mushroom (abdication required to enable)</li><li>Deep mine can now also mine stone</li></ul>"]},{VERSION:"v1.1.14",MESSAGE:["New Features:<ul><li><b>Added 'Royal Archives' royal perk</b></li><li><b>Added 'Barn' building for specialised storage of some crops<br>and a research project to unlock it</b></li><li><b>Added 'Golden fleece'</b></li><li><b>Tools can now be crafted also from copper, bronze and iron</b></li></ul>Other:<ul><li>'Stone' removed from tools names</li><li>Improved crafting recipe naming for some recipes</li></ul>"]},{VERSION:"v1.1.15",MESSAGE:["New Features:<ul><li><b>Added background music and new settings to control sound volume</b></li><li><b>Added different sound effect for invasion</b></li></ul>Bug fixes:<ul><li><b>Fixed one of the regions not being connected to the other one (Creurus land)</b></li></ul>Other:<ul><li>Each sound effect can be enabled/disabled in settings</li></ul>"]},{VERSION:"v1.1.16",MESSAGE:["New Features:<ul><li><b>Added Kitchen building and separate cooking order list in Crafting menu</b></li><li><b>Added Clay pit building</b></li><li><b>Added Tudor House building</b></li><li><b>Added clay, pottery and bricks resources</b></li></ul>Bug fixes:<ul><li><b>Research projects unlocked by royal perks will now correctly show as finished</b></li><li><b>Fixed adding research to queue over queue size</b></li></ul>Other:<ul><li>Reduced brushwood fuel crafting difficulty</li><li>Added Herbs and Berries to Barn storage options</li><li>Increased amount of alcohol added to tavern by 25%</li><li>Winery and Brewery now require pottery to build</li><li>Heating fuel used by housing building will now be affected by building size and heating efficiency</li><li>Bakery now needs to be researched separately after researching cooking</li><li>Increased food rations can now increase happiness more than regular rations <br>(1.5 rations up to 30 happiness and double rations up to 40 happiness)</li></ul>"]},{VERSION:"v1.1.17",MESSAGE:["Bug fixes:<ul><li><b>Digging will now unlock field region</b></li></ul>Other:<ul><li>Changed heritage points calculation to make it harder to acquire the more HPs player has</li><li>Abdicating through top right menu will now add RPs for wonder buildings</li><li>Pasture can breed animals into another pasture of the same type with free space for animals</li><li>Iron prospecting and processing technologies have been moved higher in the tech tree</li><li>Butchers will now acquire fur from animals</li><li>Planks can no longer be burned to heat houses</li><li>Added first winter tutorial</li><li>Improved village and forest tutorials</li></ul>"]},{VERSION:"v1.1.18",MESSAGE:["New Features:<ul><li><b>Added new food recipes: omelette and pie</b></li><li><b>Added new research for cooking recipes</b></li><li><b>Housing buildings can be disabled when there is no occupants inside</b></li></ul>Bug fixes:<ul><li><b>Fixed animals transforming to another animals when switching pasture type</b></li></ul>Other:<ul><li>Changed heritage points algorithm to allows for partial progress carry over</li><li>Decreased heritage points acquiring difficulty</li><li>Decreased land amount from heritage</li><li>Deep mine require ore deposits to recharge</li><li>Kitchen is now faster</li><li>Added resources list filter for empty and non active resources</li></ul>"]},{VERSION:"v1.1.19",MESSAGE:["New Features:<ul><li><b>Added troops speed stat that influence travel speed</b></li><li><b>It's now possible to cancel move, plunder and conquer missions before they reach their target</b></li><li><b>New troop: Horse archer</b></li></ul>Bug fixes:<ul><li><b>Ascension is no longer possible through abdication menu</b></li><li><b>Fixed heritage points xp calculation</b></li></ul>Other:<ul><li>Unite with the people now shows how much times it has been acquired</li><li>Added 'clear all' and 'select all' buttons to troops selection in mission window</li><li>AI will not attack player troops in neutral regions if diplomacy standing allows to</li><li>AI won't send militia to attack</li><li>AI returning army will try to conquer it's origin region if it has been conquered while army was on mission</li><li>AI capitals will keep being displayed after conquered <br>(this can prevent capitals from displaying at all before reset/abdication)</li><li>AI will try to reclaim their capital with high priority</li><li>AI and player missions can now evaluate paths to find shorter path during mission</li><li>AI and player missions will need to fight enemy if passing through enemy region</li></ul>"]},{VERSION:"v1.1.20",MESSAGE:["New Features:<ul><li><b>Housing buildings can be upgraded to the next tier building once it is unlocked</b></li></ul>Bug fixes:<ul><li><b>Added missing resource reservation entry for 'Tudor house' and moved kitchen reservation <br>to separate entry instead of included in crafting</b></li><li><b>Fixed headers entry text in effects management</b></li><li><b>Fixed strength calculation not including defender \"defense\" stat for first attacker troop</b></li><li><b>Fixed defense building mission from freezing the game</b></li></ul>Other:<ul><li>Doubled production output of brewery and winery</li><li>Reduced coins value of beer and wine</li></ul>"]},{VERSION:"v1.1.21",MESSAGE:["New Features:<ul><li><b>Added loggers camps building</b></li><li><b>Added simple summary page for buildings (management menu)</b></li><li><b>Added events engine with a few initial events (more to come in the future)</b></li></ul>Bug fixes:<ul><li><b>Fixed gatherer camps not to get stuck on resources</b></li><li><b>Fixed and improved win chance calculation</b></li></ul>Other:<ul><li>Gatherer camps will get small bonus chance to find resources that are not in the local storage already</li><li>Added log message after researching kitchen that says where to place orders</li><li>Improved butcher resources transport logic and  status reporting</li></ul>"]},{VERSION:"v1.1.22",MESSAGE:['New Features:<ul><li><b>Crafting to % percent of total storage</b></li></ul>Bug fixes:<ul><li><b>Added missing buff for loggers camp from Sacred grove</b></li><li><b>Fixed meteorite not to allow mining below 0</b></li><li><b>Fixed Unite with the people perk not displaying usages when RPs 100 or more</b></li></ul>Other:<ul><li>Added management option to disable "merchant arrived" logging</li></ul>']},{VERSION:"v1.1.23",MESSAGE:["Bug fixes:<ul><li><b>Blessing won't target Barn building anymore</b></li><li><b>'all on' button will now fill up partially staffed multi workers buildings</b></li></ul>Other:<ul><li>Changed basic tools icons (hammer, pickaxe, axe and shovel)</li><li>Bakery research now requires Scientific Method to be researched</li><li>Technical changes regarding buildings with multiple workers</li><li>Added 'reset' button to resource management window</li><li>Changed heritage menu display</li></ul>"]},{VERSION:"v1.1.24",MESSAGE:["New Features:<ul><li><b>It's now possible to dismiss army and recruits</b></li></ul>Bug fixes:<ul><li><b>Fixed Cooking % crafting order showing warnings for missing resources</b></li><li><b>Fixed gatherer camps not being able to collect more than 1 of each resource in each cycle</b></li><li><b>Changed ascension temple stages cost (and number of stages) to avoid icons overflow building box.<br>Total cost remains unchanged</b></li></ul>Other:<ul><li>Added management option to switch default gatherers mode</li><li>Changed Orchard status text to avoid confusion</li><li>Improved Butcher status reporting and added local storage to details list</li><li>Doubled pasture animals produce progress each tick</li><li>Nation name in world map will include Kongregate username by default</li></ul>"]},{VERSION:"v1.1.25",MESSAGE:["Bug fixes:<ul><li><b>Baby boom prayer will now also affect Tudor house</b></li></ul>Other:<ul><li>It's now possible to add crafting and cooking orders to the top of the list by shift clicking on the recipe</li><li>Added help tooltips to crafting and cooking tabs</li><li>Fixed text align to icons for food priority</li><li>Added upgrades to loggers camp</li><li>Added local storage display to loggers camp details</li><li>In build window header with filters and number of buildings will follow when buildings are scrolled</li></ul>"]},{VERSION:"v1.2.0",MESSAGE:["<b>The Sea Update!</b><br><br>New Features:<ul><li><b>Reworked sea region with many new buildings</b></li><li><b>New sea based events and missions</b></li><li><b>New tools resources</b></li><li><b>New Royal perk to unlock</b></li></ul>Bug fixes:<ul><li><b>Fixed deep mine mining below 0 resources</b></li><li><b>Changed recipes filters to also match recipe name</b></li></ul>Other:<ul><li>Changed missions to follow shortest path in terms of real distance and not number of regions 'hops'</li><li>Great Lighthouse RP bonus reduced but bonus effects added that affect some sea buildings and ships</li></ul>"]},{VERSION:"v1.2.1",MESSAGE:["Bug fixes:<ul><li><b>Fixed navy related data being \"NaN\"</b></li><li><b>Fixed doubled report for sea conquer mission</b></li><li><b>Fixed sea missions travel speed being influenced by land troops</b></li><li><b>Fixed 'sea move' mission button not visible when no land troops are present</b></li><li><b>Fixed fight reports breaking after page reload</b></li><li><b>QUICKFIX: Fixed pre 1.2.0 save files loading</b></li></ul>Other:<ul><li>Added 'cancel mission' to all sea missions</li><li>Added tooltip to ships in navy tab and shipyard window</li><li>It's now possible to decommission navy units</li><li>Added total cargo display to the sea mission description</li></ul>"]},{VERSION:"v1.2.2",MESSAGE:["Bug fixes:<ul><li><b>Fixed pirates sea event freezing the game</b></li><li><b>Fixed sea cartography research freezing the game</b></li></ul>"]},{VERSION:"v1.2.3",MESSAGE:["Bug fixes:<ul><li><b>Fixed boat builder and shipyard invalid values freezing game</b></li><li><b>Fixed fisher huts being stuck on waiting for fish after update</b></li><li><b>Added logic to clear corrupted save of pirates and pirates base events</b></li><li><b>Fixed expedition not consuming correct amount of resources</b></li><li><b>Probably fixed negative amount of mountains from expeditions</b></li><li><b>Fixed shipyard turning off on load and destroying employed people</b></li><li><b>Fixed ascension temple being available too soon</b></li></ul>Other:<ul><li>Improved game error handling to reduce chance for game freezing (game will now pause due to internal errors)</li><li>Land discovered on expeditions will be preserved through abdication</li><li>Expedition mission cargo is also restricted by the amount of food required for the mission</li><li>Ships no longer cost food on missions</li><li>Reduced small components wraps in resources, crafting and cooking tabs</li><li>Improved mission progress display to be calculated based on total distance to travel and not 20% per region</li></ul>"]},{VERSION:"v1.2.4",MESSAGE:["Bug fixes:<ul><li><b>Fixed some buildings showing error message on upgrade</b></li><li><b>Fixed butcher being stuck on waiting for fur warehouse space</b></li><li><b>Fixed mission movement attack friendly region when passing by sometimes</b></li><li><b>Fixed port size calculation when selecting ship to build</b></li><li><b>Fixed loggers camp consuming land on upgrade</b></li><li><b>Buildings from royal perks will now take correct amount of land</b></li><li><b>QUICKFIX: Additional fix for buildings upgrading issues</b></li></ul>Other:<ul><li>'Village' text changes depending on population cap</li><li>Build window will now focus text filter input by default</li><li>Added effective speed display to mission description</li></ul>"]},{VERSION:"v1.2.5",MESSAGE:["New Features:<ul><li><b>Added new housing building</b></li><li><b>Added new research building</b></li></ul>Bug fixes:<ul><li><b>Fixed forest and mountains from expedition not being saved</b></li><li><b>Fixed food cargo space being required for sea missions other than expeditions</b></li><li><b>Fixed sea plunder and sea conquer icons not displayed in world map buttons</b></li><li><b>Fixed NaN cargo value for some sea missions</b></li><li><b>Fixed cooking menu not showing number of items being crafted</b></li></ul>Other:<ul><li>Added circle ticker for next day</li><li>It's now possible to dismiss market offers</li><li>Added sounds for season changes</li><li>Crafting type selection won't change when switching tabs</li><li>Market filter selection won't change when switching tabs</li><li>When a spy is killed it will generate a fight report so that players can remember the last known army size</li><li>Added display option to change player regions colour</li></ul>"]},{VERSION:"v1.2.6",MESSAGE:["Bug fixes:<ul><li><b>Added missing settlement resource reservation</b></li><li><b>Fixed forest found on expeditions reducing land</b></li></ul></ul>"]},{VERSION:"v1.3.0",MESSAGE:["<b>The Happiness Update!</b><br><br>New Features:<ul><li><b>Reworked happiness system</b></li><li><b>Added new prayer</b></li><li><b>Added tax collector building and tax settings to management</b></li><li><b>Added new resources</b></li><li><b>New Royal perks</b></li></ul>Bug fixes:<ul><li><b>Fixed orchard grown crops switching</b></li><li><b>Added additional value checks for boat builder and shipyard</b></li><li><b>Fixed world map issue that reset world map progress</b></li></ul></ul>"]},{VERSION:"v1.3.1",MESSAGE:["Bug fixes:<ul><li><b>Fixed happiness effects calculation causing NaN happiness value</b></li><li><b>Added additional check for invalid value in building progress data</b></li></ul></ul>"]},{VERSION:"v1.3.2",MESSAGE:["Bug fixes:<ul><li><b>Fixed fired worker log message reporting wrong building</b></li><li><b>Fixed deep mine not starting after upgrade is finished</b></li><li><b>Fixed tavern happiness effect causing NaN and not clearing after tavern is disabled</b></li><li><b>Fixed fur clothes happiness effect getting stuck</b></li></ul>Other:<ul><li>Happiness management show duration setting will now save it's state</li><li>Surplus animals added to storage will be sent to butchers</li><li>Reduced refugees events chance</li><li>Combinable buildings that are compatible will no longer require confirmation</li><li>Added auto merge option that combines all compatible buildings in the region</li><li>Limited number of log entries being saved to 100</li><li>Added error reports that show more error information for better reporting<br>(this will be extended with option to send error reports to the server)</li></ul>"]},{VERSION:"v1.3.3",MESSAGE:["Bug fixes:<ul><li><b>Fixed festivals being blocked after abdication due to locked resources</b></li><li><b>Fixed sea missions calculating failing when previous mission removed the event</b></li><li><b>Fixed pirates base negative happiness effect not removed after defeating pirates base</b></li></ul>Other:<ul><li>Reduced gem chance for deep mine</li></ul>"]},{VERSION:"v1.3.4",MESSAGE:["New Features:<ul><li><b>Added new options to world map region build mission (roads, watchtower, guard towers and harbour)</b></li></ul>Bug fixes:<ul><li><b>Fixed settlement buildings consuming food faster than restocking causing famine while there was food available</b></li></ul>Other:<ul><li>Added action buttons to switch all workshops to crafting or researching</li><li>Added new recipes to craft swords, shields from bronze and iron</li><li>Changed heavy armor cost from copper to bronze</li></ul>"]},{VERSION:"v1.3.5",MESSAGE:["Bug fixes:<ul><li><b>Fixed sea missions causing type error while calculating distance</b></li></ul>"]},{VERSION:"v1.3.6",MESSAGE:["Bug fixes:<ul><li><b>Fixed stuck AI missions</b></li></ul>Other:<ul><li>Added text reason for why mission cannot be started to most reasons</li></ul>"]},{VERSION:"v1.3.7",MESSAGE:["Bug fixes:<ul><li><b>Fixed building buffing affecting every building of that type after reloading</b></li><li><b>Fixed disabled housing building accepting occupants but not resuming resources consumption</b></li><li><b>Probably fixed unexpected negative fur clothes issue (could not reproduce the issue)</b></li></ul>Other:<ul><li>AI can no longer build new guard towers</li><li>Changed watchtowers cost from nails to bricks</li></ul>"]},{VERSION:"v1.3.8",MESSAGE:['New Features:<ul><li><b>Added builders guild building</b></li></ul>Bug fixes:<ul><li><b>Fixed tax collector demolishing decreasing faith cap</b></li><li><b>Fixed corrupted missions data loading and freezing game</b></li><li><b>Fixed error in builders guild research</b></li><li><b>Fixed "Arrange" not working</b></li></ul>Other:<ul><li>Upgraded Angular version 8->10</li></ul>']},{VERSION:"v1.3.9",MESSAGE:["Bug fixes:<ul><li><b>Fixed a bug allowing to build fraction of buildings</b></li><li><b>Fixed two regions border connection working only in one direction</b></li><li><b>Marketplace should no longer report removed workers</b></li><li><b>Fixed some log typos</b></li><li><b>Fixed stuck Fur clothes negative happiness effect</b></li><li><b>Fixed world map build missions disappearing after loading game save</b></li></ul>"]}];let Gp=(()=>{class e{constructor(e,n,l,t,i){this.servicesService=e,this.modalService=n,this.logService=l,this.calendarService=t,this.tutorialsService=i,this.flags=[],this.gameState=0,this.abdicationLevel=0,this.gameStartedYear=1,this.devMessage=Number.MAX_SAFE_INTEGER,this.headerRowsSubject=new C,this.demolishReturn=po.DEMOLITION_RETURN,this.servicesService.addService(bu.GAME,this)}init(){Qu.production?this.flags=[]:(this.flags=[],Object.keys(ou).filter(e=>!isNaN(e)).map(e=>Number(e)).forEach(e=>{this.flags.push(e)}))}getName(){return"GameService"}load(e){this.flags=e.flags,this.gameState=e.gameState,this.demolishReturn=e.demolishReturn,this.devMessage=e.devMessage,this.abdicationLevel=e.abdicationLevel,this.gameStartedYear=void 0!==e.gameStartedYear?e.gameStartedYear:1}save(){return{flags:this.flags,gameState:this.gameState,demolishReturn:this.demolishReturn,devMessage:this.devMessage,abdicationLevel:this.abdicationLevel,gameStartedYear:this.gameStartedYear}}reset(e,n){this.flags=[],this.gameState=0,this.gameStartedYear=this.calendarService.getYear(),this.demolishReturn=po.DEMOLITION_RETURN,this.init(),e&&(this.devMessage=Number.MAX_SAFE_INTEGER,this.abdicationLevel=0,this.gameStartedYear=1),n&&(this.abdicationLevel=0)}isEnabled(e){return this.flags.includes(e)}enable(e){this.flags.includes(e)||this.flags.push(e)}disable(e){this.flags.includes(e)&&this.flags.splice(this.flags.indexOf(e),1)}setGameState(e){this.gameState=e}getGameState(){return this.gameState}tick(e){0===this.getGameState()&&(this.displayWelcomeModal(),this.addStartBoost(),this.tutorialsService.checkRegionTutorial(Eu.VILLAGE),this.setGameState(1)),this.displayDevMessage()}displayWelcomeModal(){this.modalService.info("Welcome to <b>Villager Kings</b><br>You start as a leader of a small village.<br>Will you manage to lead your people to greatness? <br>First thing you need to focus on is to make sure that your people will survive winter.<br>You will need to increase food production and have some wood to heat houses.<br>Remember that winter is not the only threat to your people!<br>Good luck!");const e=this.modalService.registerForCloseModal().subscribe(()=>{this.devMessage===Number.MAX_SAFE_INTEGER&&(this.devMessage=0),e.unsubscribe()})}displayDevMessage(){const e=Hp.length;this.devMessage<e&&(this.showDevNotes(),this.devMessage=e)}showDevNotes(){this.modalService.open(Pu.CHANGELOG)}addStartBoost(){qu&&this.servicesService.getEffectsService().addBuildingEffect(new yu(qu.name,qu.building,qu.effect,qu.duration))}getAbdicationLevel(){return this.abdicationLevel}incrementAbdicationLevel(){this.abdicationLevel+=1,this.abdicationLevel>=7&&this.logService.mystical("As you finish last wonder building strange thoughts of ancient structures appear in your head. Who knows what purpose this building serve")}updateHeader(e){this.headerRowsSubject.next(e)}registerForHeaderRowsChange(){return this.headerRowsSubject.asObservable()}getGameStartedYear(){return this.gameStartedYear}}return e.\u0275prov=re({factory:function(){return new e(Ae(Np),Ae(Fp),Ae(xp),Ae(Lp),Ae(Up))},token:e,providedIn:"root"}),e})();class Bp{constructor(e,n,l,t,i,s,r){this.perk=e,this.usages=n,this.maxUsages=l,this.description=t,this.cost=i,this.reset=s,this.effect=r}}let Vp=(()=>{class e{constructor(e,n,l){this.modalService=e,this.logService=n,this.servicesService=l,this.royalPoints=0,this.perks=[],this.goldenFish=!1,this.goldenEgg=!1,this.goldenApple=!1,this.goldenFleece=!1,this.servicesService.addService(bu.ROYAL,this),this.initPerks()}initPerks(){this.perks=[],Object.entries(Oo.PERKS).forEach(e=>{this.perks.push(new Bp(ru[e[0]],e[1].USAGES,e[1].MAX_USAGES,e[1].DESCRIPTION,e[1].COST,e[1].RESET,e[1].EFFECT))})}getName(){return"RoyalService"}load(e){this.royalPoints=e.royalPoints,this.goldenFish=void 0!==e.goldenFish&&e.goldenFish,this.goldenEgg=void 0!==e.goldenEgg&&e.goldenEgg,this.goldenApple=void 0!==e.goldenApple&&e.goldenApple,this.goldenFleece=void 0!==e.goldenFleece&&e.goldenFleece,e.progress.forEach(e=>{const n=this.perks.find(n=>n.perk===e[0]);n&&(n.usages=e[1])})}save(){const e=[];return this.perks.forEach(n=>e.push([n.perk,n.usages])),{royalPoints:this.royalPoints,progress:e,goldenFish:this.goldenFish,goldenEgg:this.goldenEgg,goldenApple:this.goldenApple,goldenFleece:this.goldenFleece}}reset(e,n){e?(this.royalPoints=0,this.initPerks()):this.perks.forEach(e=>{e.reset&&e.usages>0&&e.reset(this.servicesService,e)}),this.goldenFish=!1,this.goldenEgg=!1,this.goldenApple=!1,this.goldenFleece=!1}getRoyalPoints(){return this.royalPoints}buyRoyalPoints(){this.modalService.open(Pu.ROYAL)}increaseRoyalPoints(e){this.royalPoints+=e}getRoyalPerks(){return this.perks}unlock(e){(0===e.maxUsages||e.usages<e.maxUsages)&&(this.royalPoints>=e.cost?this.perks.find(n=>e===n).effect(this.servicesService,e):this.modalService.info("Not enough Royal Points!<br>"+e.cost+" RP required but only "+this.royalPoints+" available"))}unlockCallback(e){this.royalPoints-=Number(e.cost),e.usages+=1}isGoldenFishCaught(){return this.goldenFish}isGoldenEggLaid(){return this.goldenEgg}isGoldenApplePicked(){return this.goldenApple}isGoldenFleeceFound(){return this.goldenFleece}catchGoldenFish(){return!(this.goldenFish||!Nu.chance(Oo.GOLDEN_ITEMS.GOLDEN_FISH_CHANCE)||(this.increaseRoyalPoints(5),this.logService.mystical("You have caught a golden fish. You let it go and it granted you 5 Royal Points"),this.goldenFish=!0,0))}layGoldenEgg(){return!(this.goldenEgg||!Nu.chance(Oo.GOLDEN_ITEMS.GOLDEN_EGG_CHANCE)||(this.increaseRoyalPoints(5),this.logService.mystical("Your chicken laid golden egg. You decided to keep it and was granted 5 Royal Points"),this.goldenEgg=!0,0))}pickGoldenApple(){return!(this.goldenApple||!Nu.chance(Oo.GOLDEN_ITEMS.GOLDEN_APPLE_CHANCE)||(this.increaseRoyalPoints(5),this.logService.mystical("You picked golden apple in the orchard. You decided to keep it and was granted 5 Royal Points"),this.goldenApple=!0,0))}getGoldenFleece(){return!(this.goldenFleece||!Nu.chance(Oo.GOLDEN_ITEMS.GOLDEN_FLEECE_CHANCE)||(this.increaseRoyalPoints(5),this.logService.mystical("You got a golden fleece from one of your sheep. You decided to keep it and was granted 5 Royal Points"),this.goldenFleece=!0,0))}}return e.\u0275prov=re({factory:function(){return new e(Ae(Fp),Ae(xp),Ae(Np))},token:e,providedIn:"root"}),e})(),Wp=(()=>{class e{constructor(e,n,l,t){this.servicesService=e,this.modalService=n,this.royalService=l,this.logService=t,e.addService(bu.KONGREGATE,this);try{kongregateAPI.loadAPI((function(){window.kongregate=kongregateAPI.getAPI();const e=[],n=function(n){if(n.success){const t=e.find(e=>e[0]===n.id);t&&l.increaseRoyalPoints(t[1])}};window.kongregate.mtx.requestUserItemList(null,(function(l){if(l.success)for(let t=0;t<l.data.length;t++){const i=l.data[t];e.push([i.id,Number(i.identifier.replace("rp_pack",""))]),window.kongregate.mtx.useItemInstance(i.id,n)}}))}))}catch(i){console.error(i)}}isSet(){return!!window.kongregate}isAvailable(){return window.kongregate&&0!==this.getUserId()}submitStat(e,n){window.kongregate.stats.submit(e,n)}getUsername(){if(this.isSet())return window.kongregate.services.getUsername()}isGuest(){return!this.isSet()||window.kongregate.services.isGuest()}getUserId(){if(this.isSet())return window.kongregate.services.getUserId()}getGameAuthToken(){if(this.isSet())return window.kongregate.services.getGameAuthToken()}buyItem(e){const n=this.modalService,l=this.royalService,t=this.logService,i=[],s=function(e){if(e.success){const n=i.find(n=>n[0]===e.id);n&&(l.increaseRoyalPoints(n[1]),t.log("Added "+n[1]+" Royal Points"))}},r=function(e){if(e.success)for(let n=0;n<e.data.length;n++){const l=e.data[n];i.push([l.id,Number(l.identifier.replace("rp_pack",""))]),window.kongregate.mtx.useItemInstance(l.id,s)}};window.kongregate.mtx.purchaseItems([e],(function(e){e.success&&(n.close(Pu.ROYAL),window.kongregate.mtx.requestUserItemList(null,r))}))}}return e.\u0275prov=re({factory:function(){return new e(Ae(Np),Ae(Fp),Ae(Vp),Ae(xp))},token:e,providedIn:"root"}),e})();class Yp{constructor(e,n,l,t){this.id=e,this.effect=n,this.value=l,this.duration=t}}let zp=(()=>{class e{constructor(e,n){this.servicesService=e,this.calendarService=n,this.happiness=15,this.happinessEffects=[],this.foodHappiness={value:0,weight:0},this.clothesHappiness={value:0,weight:0},this.freezingHappiness={value:0,weight:0},this.housingQuality={value:0,weight:0},this.furClothes=[],this.showDuration=!1,e.addService(bu.HAPPINESS,this),n.registerForDayChange().subscribe(e=>{this.servicesService.getGameService().isEnabled(ou.GALLEON)&&this.servicesService.getWorldService().hasPiratesBase()?this.updateHappiness(Ru.PIRATES_BASE_PRESENT,-3,-1):this.updateHappiness(Ru.PIRATES_BASE_PRESENT,0,-1),this.happinessEffects.filter(e=>e.duration>0).forEach(e=>e.duration-=1),this.happinessEffects=this.happinessEffects.filter(e=>0!==e.duration)})}getName(){return"HappinessService"}load(e){const n=this.servicesService.getVillageService();this.happiness=null==e.happiness||isNaN(e.happiness)?15:e.happiness,this.happinessEffects=void 0!==e.effects?e.effects:[],this.furClothes=void 0!==e.furClothes?e.furClothes.filter(e=>n.hasBuilding(e.id)):[],this.foodHappiness=void 0!==e.foodHappiness?e.foodHappiness:{value:0,weight:0},this.clothesHappiness=void 0!==e.clothesHappiness?e.clothesHappiness:{value:0,weight:0},this.freezingHappiness=void 0!==e.freezingHappiness?e.freezingHappiness:{value:0,weight:0},this.housingQuality=void 0!==e.housingQuality?e.housingQuality:{value:0,weight:0},this.showDuration=void 0!==e.showDuration&&e.showDuration}save(){return{happiness:this.happiness,effects:this.happinessEffects,foodHappiness:this.foodHappiness,clothesHappiness:this.clothesHappiness,freezingHappiness:this.freezingHappiness,housingQuality:this.housingQuality,furClothes:this.furClothes,showDuration:this.showDuration}}reset(e,n){this.happiness=15,this.happinessEffects=[],this.furClothes=[],this.foodHappiness={value:0,weight:0},this.clothesHappiness={value:0,weight:0},this.freezingHappiness={value:0,weight:0}}processSpecialHappiness(e,n){const l=Math.floor(e.value/(0!==e.weight?e.weight:1)),t=this.getHappinessEffectByEffect(n);0!==l?t?t.value=l:this.addHappinessEffect(0,n,l,-1):this.happinessEffects=this.happinessEffects.filter(e=>e.effect!==n),e.value=0,e.weight=0}tick(e){if(this.processSpecialHappiness(this.foodHappiness,Ru.FOOD),this.processSpecialHappiness(this.clothesHappiness,Ru.CLOTHES),this.processSpecialHappiness(this.freezingHappiness,Ru.FREEZING),this.processSpecialHappiness(this.housingQuality,Ru.LOW_QUALITY_HOUSING),this.furClothes=this.furClothes.filter(e=>this.servicesService.getVillageService().hasBuilding(e.id)&&void 0!==this.servicesService.getVillageService().getBuildings().find(n=>n.getBuildingId()===e.id).getOccupants&&this.servicesService.getVillageService().getBuildings().find(n=>n.getBuildingId()===e.id).isWorking()),this.furClothes.length>0){let e=0;if(this.furClothes.forEach(n=>{n.fur&&(e-=1)}),0!==e){const n=this.furClothes.length+e;e=Math.floor(e/(0!==n?n:-e)),this.updateHappiness(Ru.FUR_CLOTHES,e,-1)}else this.updateHappiness(Ru.FUR_CLOTHES,0,-1)}else this.updateHappiness(Ru.FUR_CLOTHES,0,-1);this.happiness+=this.calculateDailyChange()/10,this.happiness<0?this.happiness=0:this.happiness>100&&(this.happiness=100)}updateHappiness(e,n,l){const t=this.getHappinessEffectByEffect(e);t?(t.value=n,t.duration=l):this.addHappinessEffect(0,e,n,l)}getHappiness(){return this.happiness}updateFurClothes(e,n){const l=this.furClothes.find(n=>n.id===e);l?l.fur=n:this.furClothes.push({id:e,fur:n})}clearFurClothes(e){this.furClothes=this.furClothes.filter(n=>n.id!==e)}getHappinessEffect(){return this.happiness>=0&&this.happiness<=10?-10:this.happiness>10&&this.happiness<=40?0:this.happiness>40&&this.happiness<=60?10:this.happiness>60&&this.happiness<=90?20:this.happiness>90&&this.happiness<=100?50:void 0}registerFoodHappiness(e){this.foodHappiness.value+=e,this.foodHappiness.weight+=1}registerClothesHappiness(e,n){this.clothesHappiness.value+=e,this.clothesHappiness.weight+=n}registerFreezingHappiness(e,n){this.freezingHappiness.value+=e,this.freezingHappiness.weight+=n}registerHouseQualityHappiness(e,n){this.housingQuality.value+=e,this.housingQuality.weight+=n}resetHappiness(){this.happiness<15&&(this.happiness=15),this.clear()}addHappinessEffect(e,n,l,t){this.happinessEffects.push(new Yp(e,n,l,t))}getHappinessEffectById(e){return this.happinessEffects.filter(n=>n.id===e)}getHappinessEffects(){return this.happinessEffects.filter(e=>0!==e.value)}getHappinessEffectByEffect(e){return this.happinessEffects.find(n=>n.effect===e)}calculateDailyChange(){let e=0;return this.happinessEffects.forEach(n=>e+=n.value),e/300}clear(){this.happinessEffects=[]}toggleShowDuration(){this.showDuration=!this.showDuration}getShowDuration(){return this.showDuration}}return e.\u0275prov=re({factory:function(){return new e(Ae(Np),Ae(Lp))},token:e,providedIn:"root"}),e})();class $p{constructor(e,n,l=0){this.userName=e,this.value=n,this.daysAgo=l}incrementDaysAgo(){this.daysAgo+=1}}class Kp{constructor(e,n,l=0){this.producerName=e,this.value=n,this.daysAgo=l}incrementDaysAgo(){this.daysAgo+=1}}class jp{constructor(e,n=0,l=0){this.sickness=e,this.progress=n,this.medicine=l}}let Qp=(()=>{class e{constructor(e,n,l,t,i,s,r,u){this.logService=e,this.servicesService=n,this.gameService=l,this.modalService=t,this.optionsService=i,this.happinessService=s,this.calendarService=r,this.kongregateService=u,this.resources=new Map,this.resourcesUse=new Map,this.resourcesProduction=new Map,this.sick=[],this.populationScore=0,this.resourcesSubject=new C,this.callbacks=new Map,this.hideEmpty=!1,n.addService(bu.RESOURCES,this),this.init(),r.registerForDayChange().subscribe(()=>{Array.from(this.resourcesUse.keys()).forEach(e=>{this.resourcesUse.set(e,this.resourcesUse.get(e).filter(e=>e.daysAgo<30)),this.resourcesUse.get(e).forEach(e=>e.incrementDaysAgo()),0===this.resourcesUse.get(e).length&&this.resourcesUse.delete(e)}),Array.from(this.resourcesProduction.keys()).forEach(e=>{this.resourcesProduction.set(e,this.resourcesProduction.get(e).filter(e=>e.daysAgo<30)),this.resourcesProduction.get(e).forEach(e=>e.incrementDaysAgo()),0===this.resourcesProduction.get(e).length&&this.resourcesProduction.delete(e)})})}init(){const e=new yp;mo.getResources().forEach(n=>{this.resources.set(su[n[0]],e.forResource(su[n[0]]).withName(Ou.prepareResourceName(su[n[0]])).withAmount(void 0!==n[1].AMOUNT?n[1].AMOUNT:mo.DEFAULT_AMOUNT).withLimit(void 0!==n[1].LIMIT?n[1].LIMIT:mo.DEFAULT_LIMIT).withResourceTypes(n[1].TYPES).withResourceType(du.ALL).withVisible(void 0!==n[1].VISIBLE?n[1].VISIBLE:mo.DEFAULT_VISIBLE).withHighlighted(void 0!==n[1].HIGHLIGHTED?n[1].HIGHLIGHTED:mo.DEFAULT_HIGHLIGHTED).build())}),this.people=1,this.workers=0,this.populationCap=1,Qu.production||this.resources.forEach(e=>e.visible=!0)}getResource(e){return this.resources.get(e)}makeVisible(e){this.resources.get(e).visible=!0}increaseResource(e,n,l,t=!1){if(e===su.FOOD||e===su.NOTHING)return!0;const i=this.resources.get(e);if(i.getResourceTypes().includes(du.ANIMAL)){const i=this.servicesService.getServiceByRegion(Eu.FIELD),s=i.getBuildings().filter(e=>e.getBuildingType()===tu.PASTURE).map(e=>e).filter(n=>n.getResourceType()===e);let r=0;if(s.forEach(e=>r+=e.getMaxAnimals()-e.getAnimals()),n>r&&!t)return!1;if(t&&n>r){let l=n-r;n=r;let t=i.getBuildings().filter(e=>e.getBuildingType()===tu.BUTCHER).map(e=>e).filter(e=>e.getFreeSpace()>0);for(;t.length>0&&l>0;)t[0].addAnimalToButcher(e),l-=1,t=t.filter(e=>e.getFreeSpace()>0)}for(;n>0&&r>0;)for(const t of s){for(;t.getAnimals()<t.getMaxAnimals()&&n>0;)t.increaseAnimal(1),n-=1,this.addResourceProduction(e,l,1),r-=1;if(0===n)return!0}return!0}return!(!t&&i.amount+n>i.limit||(i.amount+=n,this.addResourceProduction(e,l,n),i.amount>i.limit&&(i.amount=i.limit),this.resourcesSubject.next(this.resources),i.isVisible()||(i.toggleVisible(),this.logService.log("New resource discovered: "+Ou.prepareResourceName(e))),0))}decreaseResource(e,n,l,t=!1){if(e===su.FOOD)return this.getFoodValue(l,t)>=n&&(this.getFood(n,l,t),!0);const i=this.resources.get(e);if(i.getResourceTypes().includes(du.ANIMAL)){const t=this.servicesService.getServiceByRegion(Eu.FIELD).getBuildings().filter(e=>e.getBuildingType()===tu.PASTURE).map(e=>e).filter(n=>n.getResourceType()===e&&n.getAnimals()>0);let i=0;if(t.forEach(e=>i+=e.getAnimals()),i>=n){for(const i of t){for(;n>0&&i.getAnimals()>0;)i.decreaseAnimal(1),this.addResourceUse(e,l,1),n-=1;if(0===n)return!0}return!0}return!1}return 0!==this.hasResource(e,n,l,t)?(this.resourcesSubject.next(this.resources),!1):(i.amount-=n,this.addResourceUse(e,l,n),this.resourcesSubject.next(this.resources),!0)}hasResource(e,n,l,t=!1){if(e===su.FOOD)return this.getFoodValue(l,t)>=n?0:n-this.getFoodValue(l,t);const i=this.resources.get(e);return t?i.amount>=n?0:n-this.resources.get(e).amount:i.amount-i.options.getReservedAmountBySource(l,i,t)>=n?0:n-(i.amount-i.options.getReservedAmountBySource(l,i,t))}hasLimit(e){return this.resources.get(e).amount<this.resources.get(e).limit}decreaseResources(e,n,l=!1,t=1,i=!1){let s="",r=!0;for(const[u,o]of Array.from(e)){const e=this.hasResource(u,o*t,n,l);0!==e&&(s+="Missing "+e+" "+Ou.prepareResourceName(u)+"<br>",r=!1)}if(!r)return i||this.modalService.info(s),!1;for(const[u,o]of Array.from(e))this.decreaseResource(u,o*t,n,l);return!0}hasResources(e,n,l=1,t=!1){let i=!0;for(const[s,r]of Array.from(e))0!==this.hasResource(s,r*l,n,t)&&(i=!1);return i}increaseLimit(e,n){this.resources.forEach(l=>{l.getResourceTypes().includes(e)&&!l.getResourceTypes().includes(du.ANIMAL)&&(l.limit+=n)})}increaseResourceLimit(e,n){this.resources.get(e).limit+=n}decreaseLimit(e,n){this.resources.forEach(l=>{l.getResourceTypes().includes(e)&&!l.getResourceTypes().includes(du.ANIMAL)&&(l.limit-=n,l.limit<0&&(l.limit=0,console.error(kp.ERROR_2,l.getResource(),l.limit)),l.amount>l.limit&&(l.amount=l.limit))})}decreaseResourceLimit(e,n){const l=this.resources.get(e);l.limit-=n,l.limit<0&&(l.limit=0,console.error(kp.ERROR_2,l.getResource(),l.limit)),l.amount>l.limit&&(l.amount=l.limit)}getResources(){return this.resources}save(){let e="[";return this.resources.forEach(n=>{e+="["+n.resource+","+JSON.stringify(n)+"],"}),e=e.slice(0,-1)+"]",{resources:e,people:this.people,workers:this.workers,sick:this.sick,populationCap:this.populationCap}}getName(){return"ResourcesService"}load(e){JSON.parse(e.resources).forEach(e=>{if(this.resources.get(e[0]).amount=e[1].amount,this.resources.get(e[0]).limit=e[1].limit,this.resources.get(e[0]).visible=e[1].visible,this.resources.get(e[0]).highlighted=e[1].highlighted,this.resources.get(e[0]).prioritise=e[1].prioritise,e[1].reserved)this.resources.get(e[0]).options=new Ip(this.resources.get(e[0]).resource,e[1].reserved);else if(e[1].options){let n=[];const l=new Cp;e[1].options.consumers.forEach(e=>{n.push(new Tp(e.name,e.enabled,e.reserved,void 0!==e.reservedPercent&&e.reservedPercent))}),n.find(e=>"Paper mill"===e.name)||n.push(new Tp("Paper mill")),n.find(e=>"Tudor house"===e.name)||n.push(new Tp("Tudor house")),n.find(e=>"Settlement"===e.name)||n.push(new Tp("Settlement")),n.find(e=>"Kitchen"===e.name)||n.push(new Tp("Kitchen")),e[1].options.autoTrade&&(l.autoSellEnabled=e[1].options.autoTrade.autoSellEnabled,l.autoSellAmount=e[1].options.autoTrade.autoSellAmount,l.autoSellOrder=e[1].options.autoTrade.autoSellOrder,l.autoBuyEnabled=e[1].options.autoTrade.autoBuyEnabled,l.autoBuyAmount=e[1].options.autoTrade.autoBuyAmount,l.autoBuyOrder=e[1].options.autoTrade.autoBuyOrder,void 0!==e[1].options.autoTrade.autoSellPercentage?(l.autoSellPercentage=e[1].options.autoTrade.autoSellPercentage,l.autoBuyPercentage=e[1].options.autoTrade.autoBuyPercentage):(l.autoSellPercentage=!1,l.autoBuyPercentage=!1)),n=n.sort((e,n)=>e.name.localeCompare(n.name)),this.resources.get(e[0]).options=new Ip(e[1].options.resource,e[1].options.reserve,n,void 0!==e[1].options.reservePercent&&e[1].options.reservePercent,l)}else this.resources.get(e[0]).options=new Ip(this.resources.get(e[0]).resource)}),this.sick=void 0!==e.sick?e.sick:[],this.people=e.people,this.workers=e.workers,this.populationCap=e.populationCap,this.resourcesSubject.next(this.resources)}reset(e,n){if(!e){const e=this.servicesService.getService(bu.HERITAGE).calculateHeritagePoints(!0);e.hp>0&&this.servicesService.getService(bu.HERITAGE).increaseHeritagePoints(e.hp),e.xp>0&&this.servicesService.getService(bu.HERITAGE).increaseXP(e.xp)}const l=this.resources;this.resources=new Map,this.people=1,this.workers=0,this.populationCap=1,this.sick=[],this.populationScore=0,this.resourcesUse=new Map,this.resourcesProduction=new Map,this.init(),e||Array.from(this.resources.values()).forEach(e=>{this.optionsService.getOption(_p.KEEP_RESERVATION_SETTINGS_ON_RESET)?e.options=l.get(e.resource).options:(e.options=l.get(e.resource).options,e.options.reservePercent=!1,e.options.reserve=0,e.options.consumers.forEach(e=>e.enabled=!1)),this.optionsService.getOption(_p.KEEP_AUTO_TRADE_ON_RESET)||(e.options.autoTrade.autoSellEnabled=!1,e.options.autoTrade.autoBuyEnabled=!1)}),this.resourcesSubject.next(this.resources)}registerForResourcesChange(){return this.resourcesSubject.asObservable()}createPeople(e){this.people+=e}removePeople(e){if(this.people-=e,this.people-e<0)for(;this.people<0;)if(this.sick.length>0)this.sick.shift(),this.people+=1;else{const e=Math.floor(Math.random()*this.callbacks.size);Array.from(this.callbacks.values())[e].fireRandomWorker()}}hireWorker(){return this.people>0&&(this.people-=1,this.workers+=1,!0)}fireWorker(e=1){0===this.workers&&console.error(kp.ERROR_3),this.workers-=e,this.people+=e}getPeople(){return this.people}getWorkers(){return this.workers}getPopulationCap(){return this.populationCap}increasePopulationCap(e){return this.populationCap+=e}decreasePopulationCap(e){return this.populationCap-e<0&&console.error(kp.ERROR_4),this.populationCap-=e}addCallback(e,n){this.callbacks.set(n,e)}tick(e){this.kongregateService.isAvailable()&&this.getTotalPeople()>this.populationScore&&(this.populationScore=this.getTotalPeople(),this.kongregateService.submitStat("Population",this.populationScore)),1===this.getTotalPeople()&&this.happinessService.resetHappiness(),this.people+this.workers>=po.VILLAGE.SHRINE.POPULATION&&(this.gameService.isEnabled(ou.SHRINE)||(this.gameService.enable(ou.SHRINE),this.logService.success("Shrine unlocked"))),this.people+this.workers>=po.VILLAGE.CHURCH.POPULATION&&(this.gameService.isEnabled(ou.CHURCH)||(this.gameService.enable(ou.CHURCH),this.logService.success("Church unlocked"))),this.getTotalPeople()>1500?this.happinessService.updateHappiness(Ru.POPULATION_SIZE,-3,-1):this.getTotalPeople()>500?this.happinessService.updateHappiness(Ru.POPULATION_SIZE,-2,-1):this.getTotalPeople()>100&&this.happinessService.updateHappiness(Ru.POPULATION_SIZE,-1,-1),this.sick=this.sick.filter(e=>!Nu.chance(Co.getSickness(e.sickness).LETHALITY/100/(10*Co.getSickness(e.sickness).DURATION))||(this.callbacks.get(Eu.VILLAGE).removeRecruit(1,!1),this.servicesService.getManagementService().getLogSickness()&&(this.logService.warning("Villager died from "+Ou.prepareSicknessName(e.sickness)),this.happinessService.addHappinessEffect(0,Ru.SICKNESS_DEATH,-2,Nu.randomBetween(20,40))),!1)),this.sick.forEach(e=>{0===e.medicine&&this.decreaseResource(su.HERBAL_MEDICINE,1,"Sickness")&&(e.medicine=1),e.progress+=e.medicine>0?100/(10*Co.getSickness(e.sickness).DURATION)*2:100/(10*Co.getSickness(e.sickness).DURATION)}),this.sick.forEach(e=>{e.progress>=100&&(this.people+=1)}),this.sick=this.sick.filter(e=>e.progress<100)}getPriorityFood(e,n=!1){const l=this.servicesService.getManagementService().getFoodPriority();for(const t in l){const i=l[t].filter(l=>this.getAvailableAmount(l,e,n)>0);if(i.length>0&&i.length>0){const l=i[Math.floor(Math.random()*i.length)];return this.decreaseResource(l,1,e,n),mo.getResource(l).POWER}}return 0}getFood(e,n,l=!1){for(;e>0;)e-=this.getPriorityFood(n,l)}getFoodValue(e,n=!1){let l,t=0;return n?(l=Array.from(this.resources.entries()).filter(e=>e[1].resourceTypes.includes(du.CONSUMABLE)&&e[1].amount>0),l.forEach(e=>t+=mo.getResource(e[0]).POWER*e[1].amount)):(l=Array.from(this.resources.entries()).filter(l=>l[1].resourceTypes.includes(du.CONSUMABLE)&&l[1].amount-l[1].options.getReservedAmountBySource(e,l[1],n)>0),l.forEach(e=>t+=mo.getResource(e[0]).POWER*(e[1].amount-e[1].options.reserve))),t}getResourceTypes(e){return this.resources.get(e).getResourceTypes()}increaseResources(e,n,l=!1){for(const[t,i]of Array.from(e))this.increaseResource(t,i,n,l)}removeRecruit(e){return this.people>=e&&this.callbacks.get(Eu.VILLAGE).removeRecruit(e)}getFuel(e){const n=mo.getResourcesByType(du.FUEL).sort((e,n)=>e[1].FUEL_PRIORITY-n[1].FUEL_PRIORITY);for(const l of n)if(this.decreaseResource(su[String(l[0])],1,e))return l[1].POWER;return 0}getTotalPeople(){return this.people+this.workers+this.sick.length}getResourcesValue(){let e=0;return this.resources.forEach(n=>{n.amount>0&&(e+=mo.getResource(n.resource).TRADE_VALUE*n.getAmount())}),e}getAvailableAmount(e,n,l=!1){const t=this.resources.get(e);let i=t.amount-t.options.getReservedAmountBySource(n,t,l);return i<0&&(i=0),i}updateAnimals(){const e=Array.from(this.getResources().values()).filter(e=>e.getResourceTypes().includes(du.ANIMAL)),n=this.servicesService.getServiceByRegion(Eu.FIELD).getBuildings().filter(e=>e.getBuildingType()===tu.PASTURE).map(e=>e);e.forEach(e=>{let l=0,t=0;n.filter(n=>n.getResourceType()===e.resource).forEach(e=>{l+=e.getAnimals(),t+=e.getMaxAnimals()}),e.amount=l,e.limit=t})}getLimit(e){const n=this.resources.get(e);return n.limit-n.amount}addResourceUse(e,n,l){this.resourcesUse.has(e)?this.resourcesUse.get(e).push(new $p(n,l)):this.resourcesUse.set(e,[new $p(n,l)])}addResourceProduction(e,n,l){this.resourcesProduction.has(e)?this.resourcesProduction.get(e).push(new Kp(n,l)):this.resourcesProduction.set(e,[new Kp(n,l)])}getResourceUses(e){return this.resourcesUse.get(e)}getResourceProductions(e){return this.resourcesProduction.get(e)}getResourcesByType(e){return Array.from(this.resources.values()).filter(n=>n.getResourceTypes().includes(e))}getFuelValue(){let e=0;return Array.from(this.resources.values()).filter(e=>e.getResourceTypes().includes(du.FUEL)).forEach(n=>e+=n.amount*mo.getResource(n.resource).POWER),e}checkResourcesBeforeWinter(){160*this.servicesService.getVillageService().getHousingBuildings().length>this.getFuelValue()&&this.logService.warning("We might not have enough available resources to heat our homes during winter!")}getAverageNutritionProduction(){let e=0,n=1;return this.getResourcesByType(du.CONSUMABLE).forEach(l=>{const t=this.getResourceProductions(l.resource);t&&t.forEach(t=>{t.daysAgo>n&&(n=t.daysAgo),e+=t.value*mo.getResource(l.resource).POWER})}),e/n}addSick(e){if(this.people-=1,this.sick.push(new jp(e)),this.people-1<0)for(;this.people<0;){const e=Math.floor(Math.random()*this.callbacks.size);Array.from(this.callbacks.values())[e].fireRandomWorker()}}getSick(){return this.sick}addAnimalProducedData(e,n,l){this.addResourceProduction(e,n,l)}addAnimalUsedData(e,n,l){this.addResourceUse(e,n,l)}getHideEmpty(){return this.hideEmpty}toggleHideEmpty(){this.hideEmpty=!this.hideEmpty}}return e.\u0275prov=re({factory:function(){return new e(Ae(xp),Ae(Np),Ae(Gp),Ae(Fp),Ae(wp),Ae(zp),Ae(Lp),Ae(Wp))},token:e,providedIn:"root"}),e})();class qp{constructor(e,n,l,t){this.resourcesService=e,this.modalService=n,this.tutorialService=l,this.gameService=t,this.filterText=""}ngOnInit(){this.categories=Object.keys(du),this.categories=[du[du.RAW],du[du.PROCESSED],du[du.FOOD],du[du.TOOLS]],this.resources=this.resourcesService.getResources(),this.resourcesService.registerForResourcesChange().subscribe(e=>{this.resources=e}),this.tutorialService.checkResourcesTutorial()}getResourcesList(e){return Array.from(this.resourcesService.getResources().entries()).filter(n=>n[1].getResourceTypes().includes(du[e])&&Ou.prepareResourceName(n[1].getResource()).toLowerCase().includes(this.filterText)).filter(e=>!this.resourcesService.getHideEmpty()||0!==e[1].amount||!!this.resourcesService.getResourceProductions(e[0])&&!!this.resourcesService.getResourceUses(e[0])).map(e=>e[1])}openManageModal(e){this.modalService.open(Pu.RESOURCE_MANAGEMENT),this.modalService.setResourceOptions(e.options);const n=this.modalService.registerForResourceOptionsResponse().subscribe(l=>{n.unsubscribe(),l&&(e.options=l)})}isMarketEnabled(){return this.gameService.isEnabled(ou.MARKET)}highlightResource(e){e.highlighted?e.highlighted=!1:(Array.from(this.resourcesService.getResources().values()).filter(e=>e.highlighted),e.highlighted=!0)}isNotCoins(e){return e.resource!==su.COINS}isDev(){return!Qu.production}addDevRes(e,n){this.resourcesService.increaseResource(e,e===su.COINS?1e3:n.shiftKey?200:5,"Dev",!0)}getResourceDescription(e){let n="";return e.hasResourceType(du.CONSUMABLE)&&(n+="nutrition: "+mo.getResource(e.resource).POWER),e.hasResourceType(du.FUEL)&&(n+="heating energy: "+mo.getResource(e.resource).POWER),""!==n?"<hr>"+n:n}getResourceConsumers(e){let n="",l="<b>used by:</b><br>";const t=this.resourcesService.getResourceUses(e.resource),i=[];t&&(t.slice().forEach(e=>{const n=i.find(n=>n[0]===e.userName);n?n[1]+=e.value:i.push([e.userName,e.value])}),i.sort((e,n)=>e[0].localeCompare(n[0])).forEach(e=>{l+=e[0]+": "+e[1]+"<br>"})),"<b>used by:</b><br>"!==l&&(n+="<hr>"+l),l="<b>produced by:</b><br>";const s=this.resourcesService.getResourceProductions(e.resource),r=[];return s&&(s.slice().forEach(e=>{const n=r.find(n=>n[0]===e.producerName);n?n[1]+=e.value:r.push([e.producerName,e.value])}),r.sort((e,n)=>e[0].localeCompare(n[0])).forEach(e=>{l+=e[0]+": "+e[1]+"<br>"})),"<b>produced by:</b><br>"!==l&&(n+="<hr>"+l),n}}var Xp=Kl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:100%;max-height:100%;font-size:1em;margin:.7%;text-align:center}#resourcesTitle[_ngcontent-%COMP%]{display:flex;flex-direction:row;font-size:1.3em;font-weight:bolder;vertical-align:middle}#center[_ngcontent-%COMP%]{flex:10 0 auto}.side[_ngcontent-%COMP%]{flex:0 0 38%;flex-direction:row;font-size:.6em;width:15%;margin:3px;display:inline-block}#categories[_ngcontent-%COMP%]{flex-direction:row;height:94.8%;text-align:center}#categories[_ngcontent-%COMP%], .category[_ngcontent-%COMP%]{display:flex;border:1px solid #000}.category[_ngcontent-%COMP%]{text-align:left;flex:1 0 0;flex-direction:column}.resource[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-left:3px;width:100%;vertical-align:middle;margin-top:-1px}.title[_ngcontent-%COMP%]{text-align:center;padding:2px 0;width:100%;font-weight:bolder;font-size:1em;margin-bottom:5px;display:block;border-bottom:1px solid #000}.highlight[_ngcontent-%COMP%]{flex:1 0 auto;text-align:right;margin-right:3px}.highlight[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}app-icon[_ngcontent-%COMP%]{flex:0 0 auto;margin-right:3px}.manage[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:22px;width:22px}.greyout[_ngcontent-%COMP%]{opacity:.3}.prioritise[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:22px;width:22px}.full[_ngcontent-%COMP%]{font-weight:600}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}hr[_ngcontent-%COMP%]{border-color:#000}.center[_ngcontent-%COMP%]{text-align:center}"]],data:{}});function Zp(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.addDevRes(e.parent.parent.context.$implicit.resource,l)&&t),t}),null,null)),(e()(),Ks(-1,null,["+"]))],null,null)}function Jp(e){return qs(0,[(e()(),Ds(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),Ks(1,null,["","/",""]))],null,(function(e,n){var l=n.parent.parent.context.$implicit.getAmount(),t=n.parent.parent.context.$implicit.getLimit();e(n,1,0,l,t)}))}function em(e){return qs(0,[(e()(),Ds(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),Ks(1,null,["","/",""]))],null,(function(e,n){var l=n.parent.parent.context.$implicit.getAmount(),t=n.parent.parent.context.$implicit.getLimit();e(n,1,0,l,t)}))}function nm(e){return qs(0,[(e()(),Ds(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),Ks(1,null,["",""]))],null,(function(e,n){var l=n.parent.parent.context.$implicit.getAmount();e(n,1,0,l)}))}function lm(e){return qs(0,[(e()(),Ds(0,0,null,null,4,"span",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,3,"span",[["class","prioritise"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=0!=(e.parent.parent.context.$implicit.prioritise=!e.parent.parent.context.$implicit.prioritise)&&t),t}),null,null)),ei(2,278528,null,0,la,[Cl,Il,il,ol],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),zs(3,{greyout:0}),(e()(),Ds(4,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/trade.svg"],["title","prioritise on market"]],null,null,null,null,null))],(function(e,n){var l=e(n,3,0,!n.parent.parent.context.$implicit.prioritise);e(n,2,0,"prioritise",l)}),null)}function tm(e){return qs(0,[(e()(),Ds(0,0,null,null,29,"div",[["class","resource"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,17,"span",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,8,"span",[["appTooltip",""],["class","tooltip"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==Yt(e,3).onmousemove(l)&&t),t}),null,null)),ei(3,16384,null,0,vg,[],{elementId:[0,"elementId"]},null),(e()(),Ds(4,0,null,null,4,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),Ds(5,0,null,null,1,"div",[["class","center"]],null,null,null,null,null)),(e()(),Ks(6,null,["",""])),(e()(),Ds(7,0,null,null,0,"div",[["class","center"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Ds(8,0,null,null,0,"div",[["class","center"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Ds(9,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(10,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),Ms(16777216,null,null,1,null,Zp)),ei(12,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,Jp)),ei(14,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,em)),ei(16,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,nm)),ei(18,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(19,0,null,null,10,"span",[["class","highlight"]],null,null,null,null,null)),(e()(),Ds(20,0,null,null,3,"span",[["class","manage"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.openManageModal(e.parent.context.$implicit)&&t),t}),null,null)),ei(21,278528,null,0,la,[Cl,Il,il,ol],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),zs(22,{greyout:0}),(e()(),Ds(23,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/manage.svg"],["title","management"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,lm)),ei(25,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(26,0,null,null,3,"span",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.highlightResource(e.parent.context.$implicit)&&t),t}),null,null)),ei(27,278528,null,0,la,[Cl,Il,il,ol],{ngClass:[0,"ngClass"]},null),zs(28,{greyout:0}),(e()(),Ds(29,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/eye.svg"],["title","add to header"]],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,3,0,n.parent.context.$implicit.resource);var t=n.parent.context.$implicit.getName();e(n,10,0,t,"resources",""),e(n,12,0,l.isDev());var i=n.parent.context.$implicit.getAmount()===n.parent.context.$implicit.getLimit();e(n,14,0,i);var s=l.isNotCoins(n.parent.context.$implicit)&&n.parent.context.$implicit.getAmount()!==n.parent.context.$implicit.getLimit();e(n,16,0,s),e(n,18,0,!l.isNotCoins(n.parent.context.$implicit));var r=e(n,22,0,!n.parent.context.$implicit.options.isUsed());e(n,21,0,"manage",r),e(n,25,0,l.isMarketEnabled());var u=e(n,28,0,!n.parent.context.$implicit.highlighted);e(n,27,0,u)}),(function(e,n){var l=n.component;e(n,4,0,Rt(1,"",n.parent.context.$implicit.resource,"")),e(n,6,0,n.parent.context.$implicit.name),e(n,7,0,l.getResourceDescription(n.parent.context.$implicit)),e(n,8,0,l.getResourceConsumers(n.parent.context.$implicit))}))}function im(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,tm)),ei(2,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){e(n,2,0,n.context.$implicit.visible)}),null)}function sm(e){return qs(0,[(e()(),Ds(0,0,null,null,4,"div",[["class","category"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),Ks(2,null,["",""])),(e()(),Ms(16777216,null,null,1,null,im)),ei(4,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,4,0,n.component.getResourcesList(n.context.$implicit))}),(function(e,n){e(n,2,0,n.context.$implicit)}))}function rm(e){return qs(0,[(e()(),Ds(0,0,null,null,19,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,15,"span",[["id","resourcesTitle"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,0,"span",[["class","side"]],null,null,null,null,null)),(e()(),Ds(3,0,null,null,1,"span",[["id","center"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Resources"])),(e()(),Ds(5,0,null,null,11,"span",[["class","side"]],null,null,null,null,null)),(e()(),Ds(6,0,null,null,3,"span",[["class","inline"]],null,null,null,null,null)),(e()(),Ds(7,0,null,null,1,"label",[["for","hideEmpty"]],null,null,null,null,null)),(e()(),Ks(-1,null,["hide empty"])),(e()(),Ds(9,0,null,null,0,"input",[["id","hideEmpty"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==e.component.resourcesService.toggleHideEmpty()&&t),t}),null,null)),(e()(),Ds(10,0,null,null,6,"span",[["class","inline"]],null,null,null,null,null)),(e()(),Ds(11,0,null,null,5,"input",[["placeholder","filter"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,12)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,12).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,12)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,12)._compositionEnd(l.target.value)&&t),"ngModelChange"===n&&(t=!1!==(i.filterText=l)&&t),t}),null,null)),ei(12,16384,null,0,Ag,[ol,il,[2,yg]],null,null),li(1024,null,Ig,(function(e){return[e]}),[Ag]),ei(14,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(16,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(17,0,null,null,2,"div",[["id","categories"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,sm)),ei(19,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,14,0,l.filterText),e(n,19,0,l.categories)}),(function(e,n){e(n,9,0,n.component.resourcesService.getHideEmpty()),e(n,11,0,Yt(n,16).ngClassUntouched,Yt(n,16).ngClassTouched,Yt(n,16).ngClassPristine,Yt(n,16).ngClassDirty,Yt(n,16).ngClassValid,Yt(n,16).ngClassInvalid,Yt(n,16).ngClassPending)}))}function um(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"app-resources",[],null,null,null,rm,Xp)),ei(1,114688,null,0,qp,[Qp,Fp,Up,Gp],null,null)],(function(e,n){e(n,1,0)}),null)}var om=Dt("app-resources",qp,um,{},{},[]);class am{constructor(e,n,l,t,i,s,r=!1){this.canceled=!1,this.id=e,this.title=n,this.resource=l,this.amount=t,this.cost=i,this.craftingDifficulty=s,this.available=r}getResource(){return this.resource}}let cm=(()=>{class e{constructor(e,n){this.servicesService=e,this.resourcesService=n,this.recipes=[],e.addService(bu.RECIPE,this),this.initRecipes()}initRecipes(){this.recipes=[],Object.entries(vo.RECIPES).forEach(e=>{const n=new Map;e[1].COST.forEach(e=>n.set(e.resource,e.amount)),this.recipes.push(new am(Cu[e[0]],void 0!==e[1].NAME?e[1].NAME:Ou.prepareResourceName(e[1].RESOURCE),e[1].RESOURCE,e[1].AMOUNT?e[1].AMOUNT:1,n,e[1].CRAFTING,!1))}),this.recipes.find(e=>e.id===Cu.PLANK).available=!0,this.recipes.find(e=>e.id===Cu.CUT_STONE).available=!0,Qu.production||Object.values(Cu).filter(e=>!isNaN(e)).forEach(e=>this.enable(e))}getRecipes(){return this.recipes.filter(e=>e.available)}getCookingRecipes(){return this.recipes.filter(e=>e.available&&this.resourcesService.getResource(e.resource).getResourceTypes().includes(du.CONSUMABLE))}getRecipeById(e){return this.recipes.find(n=>n.id===e)}enable(e){const n=this.recipes.find(n=>n.id===e);this.resourcesService.makeVisible(n.getResource()),Array.from(n.cost.keys()).forEach(e=>this.resourcesService.makeVisible(e)),n.available=!0}disable(e){const n=this.recipes.find(n=>n.id===e);this.resourcesService.makeVisible(n.getResource()),n.available=!1}getName(){return"RecipeService"}load(e){this.initRecipes(),e.recipes.forEach(e=>{const n=this.recipes.find(n=>n.id===e);n&&(n.available=!0)})}save(){return{recipes:this.recipes.filter(e=>e.available).map(e=>e.id)}}reset(e,n){this.initRecipes()}}return e.\u0275prov=re({factory:function(){return new e(Ae(Np),Ae(Qp))},token:e,providedIn:"root"}),e})();function hm(e){return null!=e&&""+e!="false"}function dm(e){return e instanceof il?e.nativeElement:e}class gm extends h{constructor(e,n){super()}schedule(e,n=0){return this}}class pm extends gm{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){if(this.closed)return this;this.state=e;const l=this.id,t=this.scheduler;return null!=l&&(this.id=this.recycleAsyncId(t,l,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(t,this.id,n),this}requestAsyncId(e,n,l=0){return setInterval(e.flush.bind(e,this),l)}recycleAsyncId(e,n,l=0){if(null!==l&&this.delay===l&&!1===this.pending)return n;clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const l=this._execute(e,n);if(l)return l;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let l=!1,t=void 0;try{this.work(e)}catch(i){l=!0,t=!!i&&i||new Error(i)}if(l)return this.unsubscribe(),t}_unsubscribe(){const e=this.id,n=this.scheduler,l=n.actions,t=l.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==t&&l.splice(t,1),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null}}class mm extends pm{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}requestAsyncId(e,n,l=0){return null!==l&&l>0?super.requestAsyncId(e,n,l):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(()=>e.flush(null))))}recycleAsyncId(e,n,l=0){if(null!==l&&l>0||null===l&&this.delay>0)return super.recycleAsyncId(e,n,l);0===e.actions.length&&(cancelAnimationFrame(n),e.scheduled=void 0)}}let fm=(()=>{class e{constructor(n,l=e.now){this.SchedulerAction=n,this.now=l}schedule(e,n=0,l){return new this.SchedulerAction(this,e).schedule(l,n)}}return e.now=()=>Date.now(),e})();class Sm extends fm{constructor(e,n=fm.now){super(e,()=>Sm.delegate&&Sm.delegate!==this?Sm.delegate.now():n()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,n=0,l){return Sm.delegate&&Sm.delegate!==this?Sm.delegate.schedule(e,n,l):super.schedule(e,n,l)}flush(e){const{actions:n}=this;if(this.active)return void n.push(e);let l;this.active=!0;do{if(l=e.execute(e.state,e.delay))break}while(e=n.shift());if(this.active=!1,l){for(;e=n.shift();)e.unsubscribe();throw l}}}class Em extends Sm{flush(e){this.active=!0,this.scheduled=void 0;const{actions:n}=this;let l,t=-1,i=n.length;e=e||n.shift();do{if(l=e.execute(e.state,e.delay))break}while(++t<i&&(e=n.shift()));if(this.active=!1,l){for(;++t<i&&(e=n.shift());)e.unsubscribe();throw l}}}const vm=new Em(mm),Rm=new Sm(pm);class Om{constructor(e){this.durationSelector=e}call(e,n){return n.subscribe(new Tm(e,this.durationSelector))}}class Tm extends U{constructor(e,n){super(e),this.durationSelector=n,this.hasValue=!1}_next(e){if(this.value=e,this.hasValue=!0,!this.throttled){let l;try{const{durationSelector:n}=this;l=n(e)}catch(n){return this.destination.error(n)}const t=H(l,new F(this));!t||t.closed?this.clearThrottle():this.add(this.throttled=t)}}clearThrottle(){const{value:e,hasValue:n,throttled:l}=this;l&&(this.remove(l),this.throttled=void 0,l.unsubscribe()),n&&(this.value=void 0,this.hasValue=!1,this.destination.next(e))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function Cm(e){return!o(e)&&e-parseFloat(e)+1>=0}function Im(e){const{index:n,period:l,subscriber:t}=e;if(t.next(n),!t.closed){if(-1===l)return t.complete();e.index=n+1,this.schedule(e,l)}}function bm(e,n=Rm){return l=()=>function(e=0,n,l){let t=-1;return Cm(n)?t=Number(n)<1?1:Number(n):b(n)&&(l=n),b(l)||(l=Rm),new E(n=>{const i=Cm(e)?e:+e-l.now();return l.schedule(Im,i,{index:0,period:t,subscriber:n})})}(e,n),function(e){return e.lift(new Om(l))};var l}function ym(e){return n=>n.lift(new Am(e))}class Am{constructor(e){this.notifier=e}call(e,n){const l=new Nm(e),t=H(this.notifier,new F(l));return t&&!l.seenValue?(l.add(t),n.subscribe(l)):l}}class Nm extends U{constructor(e){super(e),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}function _m(e,n){return new E(n?l=>n.schedule(wm,0,{error:e,subscriber:l}):n=>n.error(e))}function wm({error:e,subscriber:n}){n.error(e)}let Pm;try{Pm="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(WH){Pm=!1}let Mm,Dm,Lm=(()=>{class e{constructor(e){this._platformId=e,this.isBrowser=this._platformId?"browser"===this._platformId:"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Pm)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return e.\u0275prov=re({factory:function(){return new e(Ae(Di))},token:e,providedIn:"root"}),e})();function xm(e){return function(){if(null==Mm&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Mm=!0}))}finally{Mm=Mm||!1}return Mm}()?e:!!e.capture}let km=(()=>{class e{constructor(e,n,l){this._ngZone=e,this._platform=n,this._scrolled=new C,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=l}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const n=this.scrollContainers.get(e);n&&(n.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new E(n=>{this._globalSubscription||this._addGlobalListener();const l=e>0?this._scrolled.pipe(bm(e)).subscribe(n):this._scrolled.subscribe(n);return this._scrolledCount++,()=>{l.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Ca()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,n)=>this.deregister(n)),this._scrolled.complete()}ancestorScrolled(e,n){const l=this.getAncestorScrollContainers(e);return this.scrolled(n).pipe(ka(e=>!e||l.indexOf(e)>-1))}getAncestorScrollContainers(e){const n=[];return this.scrollContainers.forEach((l,t)=>{this._scrollableContainsElement(t,e)&&n.push(t)}),n}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_scrollableContainsElement(e,n){let l=n.nativeElement,t=e.getElementRef().nativeElement;do{if(l==t)return!0}while(l=l.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>function e(n,l,i,s){return t(i)&&(s=i,i=void 0),s?e(n,l,i).pipe(y(e=>o(e)?s(...e):s(e))):new E(e=>{!function e(n,l,t,i,s){let r;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(n)){const e=n;n.addEventListener(l,t,s),r=()=>e.removeEventListener(l,t,s)}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(n)){const e=n;n.on(l,t),r=()=>e.off(l,t)}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(n)){const e=n;n.addListener(l,t),r=()=>e.removeListener(l,t)}else{if(!n||!n.length)throw new TypeError("Invalid event target");for(let r=0,u=n.length;r<u;r++)e(n[r],l,t,i,s)}i.add(r)}(n,l,(function(n){e.next(arguments.length>1?Array.prototype.slice.call(arguments):n)}),e,i)})}(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return e.\u0275prov=re({factory:function(){return new e(Ae(Ki),Ae(Lm),Ae(_o,8))},token:e,providedIn:"root"}),e})(),Fm=(()=>{class e{constructor(e,n,l){this._platform=e,this._change=new C,this._changeListener=e=>{this._change.next(e)},this._document=l,n.runOutsideAngular(()=>{if(e.isBrowser){const e=this._getWindow();e.addEventListener("resize",this._changeListener),e.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._updateViewportSize())})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:n,height:l}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+l,right:e.left+n,height:l,width:n}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._getDocument(),n=this._getWindow(),l=e.documentElement,t=l.getBoundingClientRect();return{top:-t.top||e.body.scrollTop||n.scrollY||l.scrollTop||0,left:-t.left||e.body.scrollLeft||n.scrollX||l.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(bm(e)):this._change}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return e.\u0275prov=re({factory:function(){return new e(Ae(Lm),Ae(Ki),Ae(_o,8))},token:e,providedIn:"root"}),e})();class Um{}function Hm(e){const{subscriber:n,counter:l,period:t}=e;n.next(l),this.schedule({subscriber:n,counter:l+1,period:t},t)}function Gm(e,n){for(let l in n)n.hasOwnProperty(l)&&(e[l]=n[l]);return e}function Bm(e,n){const l=n?"":"none";Gm(e.style,{touchAction:n?"":"none",webkitUserDrag:n?"":"none",webkitTapHighlightColor:n?"":"transparent",userSelect:l,msUserSelect:l,webkitUserSelect:l,MozUserSelect:l})}function Vm(e){const n=e.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(e)*n}function Wm(e,n){return e.getPropertyValue(n).split(",").map(e=>e.trim())}function Ym(e){const n=e.getBoundingClientRect();return{top:n.top,right:n.right,bottom:n.bottom,left:n.left,width:n.width,height:n.height}}function zm(e,n,l){const{top:t,bottom:i,left:s,right:r}=e;return l>=t&&l<=i&&n>=s&&n<=r}function $m(e,n,l){e.top+=n,e.bottom=e.top+e.height,e.left+=l,e.right=e.left+e.width}function Km(e,n,l,t){const{top:i,right:s,bottom:r,left:u,width:o,height:a}=e,c=o*n,h=a*n;return t>i-h&&t<r+h&&l>u-c&&l<s+c}class jm{constructor(e,n){this._document=e,this._viewportRuler=n,this.positions=new Map}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this._viewportRuler.getViewportScrollPosition()}),e.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:Ym(e)})})}handleScroll(e){const n=e.target,l=this.positions.get(n);if(!l)return null;const t=n===this._document?n.documentElement:n,i=l.scrollPosition;let s,r;if(n===this._document){const e=this._viewportRuler.getViewportScrollPosition();s=e.top,r=e.left}else s=n.scrollTop,r=n.scrollLeft;const u=i.top-s,o=i.left-r;return this.positions.forEach((e,l)=>{e.clientRect&&n!==l&&t.contains(l)&&$m(e.clientRect,u,o)}),i.top=s,i.left=r,{top:u,left:o}}}function Qm(e){const n=e.cloneNode(!0),l=n.querySelectorAll("[id]"),t=e.nodeName.toLowerCase();n.removeAttribute("id");for(let i=0;i<l.length;i++)l[i].removeAttribute("id");return"canvas"===t?Zm(e,n):"input"!==t&&"select"!==t&&"textarea"!==t||Xm(e,n),qm("canvas",e,n,Zm),qm("input, textarea, select",e,n,Xm),n}function qm(e,n,l,t){const i=n.querySelectorAll(e);if(i.length){const n=l.querySelectorAll(e);for(let e=0;e<i.length;e++)t(i[e],n[e])}}function Xm(e,n){n.value=e.value}function Zm(e,n){const l=n.getContext("2d");if(l)try{l.drawImage(e,0,0)}catch(WH){}}const Jm=xm({passive:!0}),ef=xm({passive:!1});class nf{constructor(e,n,l,t,i,s){this._config=n,this._document=l,this._ngZone=t,this._viewportRuler=i,this._dragDropRegistry=s,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._moveEvents=new C,this._pointerMoveSubscription=h.EMPTY,this._pointerUpSubscription=h.EMPTY,this._scrollSubscription=h.EMPTY,this._resizeSubscription=h.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new C,this.started=new C,this.released=new C,this.ended=new C,this.entered=new C,this.exited=new C,this.dropped=new C,this.moved=this._moveEvents.asObservable(),this._pointerDown=e=>{if(this.beforeStarted.next(),this._handles.length){const n=this._handles.find(n=>{const l=e.target;return!!l&&(l===n||n.contains(l))});!n||this._disabledHandles.has(n)||this.disabled||this._initializeDragSequence(n,e)}else this.disabled||this._initializeDragSequence(this._rootElement,e)},this._pointerMove=e=>{e.preventDefault();const n=this._getPointerPositionOnPage(e);if(!this._hasStartedDragging){if(Math.abs(n.x-this._pickupPositionOnPage.x)+Math.abs(n.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){if(!(Date.now()>=this._dragStartTime+this._getDragStartDelay(e)))return void this._endDragSequence(e);this._dropContainer&&this._dropContainer.isDragging()||(this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(e)))}return}this._boundaryElement&&(this._previewRect&&(this._previewRect.width||this._previewRect.height)||(this._previewRect=(this._preview||this._rootElement).getBoundingClientRect()));const l=this._getConstrainedPointerPosition(n);if(this._hasMoved=!0,this._lastKnownPointerPosition=n,this._updatePointerDirectionDelta(l),this._dropContainer)this._updateActiveDropContainer(l,n);else{const e=this._activeTransform;e.x=l.x-this._pickupPositionOnPage.x+this._passiveTransform.x,e.y=l.y-this._pickupPositionOnPage.y+this._passiveTransform.y,this._applyRootElementTransform(e.x,e.y),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&this._rootElement.setAttribute("transform",`translate(${e.x} ${e.y})`)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:l,event:e,distance:this._getDragDistance(l),delta:this._pointerDirectionDelta})})},this._pointerUp=e=>{this._endDragSequence(e)},this.withRootElement(e),this._parentPositions=new jm(l,i),s.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(e){const n=hm(e);n!==this._disabled&&(this._disabled=n,this._toggleNativeDragInteractions())}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){return this._handles=e.map(e=>dm(e)),this._handles.forEach(e=>Bm(e,!1)),this._toggleNativeDragInteractions(),this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){const n=dm(e);return n!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{n.addEventListener("mousedown",this._pointerDown,ef),n.addEventListener("touchstart",this._pointerDown,Jm)}),this._initialTransform=void 0,this._rootElement=n),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?dm(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&sf(this._rootElement),sf(this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(e){this._handles.indexOf(e)>-1&&this._disabledHandles.add(e)}enableHandle(e){this._disabledHandles.delete(e)}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){const e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}_sortFromLastPointerPosition(){const e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview&&sf(this._preview),this._previewRef&&this._previewRef.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder&&sf(this._placeholder),this._placeholderRef&&this._placeholderRef.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(e){this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging&&(this.released.next({source:this}),this._dropContainer?(this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)})):(this._passiveTransform.x=this._activeTransform.x,this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(this._getPointerPositionOnPage(e))})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this))))}_startDragSequence(e){rf(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const n=this._dropContainer;if(n){const e=this._rootElement,t=e.parentNode,i=this._preview=this._createPreviewElement(),s=this._placeholder=this._createPlaceholderElement(),r=this._anchor=this._anchor||this._document.createComment("");t.insertBefore(r,e),e.style.display="none",this._document.body.appendChild(t.replaceChild(s,e)),(l=this._document,l.fullscreenElement||l.webkitFullscreenElement||l.mozFullScreenElement||l.msFullscreenElement||l.body).appendChild(i),this.started.next({source:this}),n.start(),this._initialContainer=n,this._initialIndex=n.getItemIndex(this)}else this.started.next({source:this}),this._initialContainer=this._initialIndex=void 0;var l;this._parentPositions.cache(n?n.getScrollableParents():[])}_initializeDragSequence(e,n){n.stopPropagation();const l=this.isDragging(),t=rf(n),i=!t&&0!==n.button,s=this._rootElement,r=!t&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now();if(n.target&&n.target.draggable&&"mousedown"===n.type&&n.preventDefault(),l||i||r)return;this._handles.length&&(this._rootElementTapHighlight=s.style.webkitTapHighlightColor||"",s.style.webkitTapHighlightColor="transparent"),this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scroll.subscribe(e=>{this._updateOnScroll(e)}),this._boundaryElement&&(this._boundaryRect=Ym(this._boundaryElement));const u=this._previewTemplate;this._pickupPositionInElement=u&&u.template&&!u.matchSize?{x:0,y:0}:this._getPointerPositionInElement(e,n);const o=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(n);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:o.x,y:o.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,n)}_cleanupDragArtifacts(e){this._rootElement.style.display="",this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=void 0,this._ngZone.run(()=>{const n=this._dropContainer,l=n.getItemIndex(this),t=this._getPointerPositionOnPage(e),i=this._getDragDistance(this._getPointerPositionOnPage(e)),s=n._isOverContainer(t.x,t.y);this.ended.next({source:this,distance:i}),this.dropped.next({item:this,currentIndex:l,previousIndex:this._initialIndex,container:n,previousContainer:this._initialContainer,isPointerOverContainer:s,distance:i}),n.drop(this,l,this._initialContainer,s,i,this._initialIndex),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:n},{x:l,y:t}){let i=this._initialContainer._getSiblingContainerFromPosition(this,e,n);!i&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,n)&&(i=this._initialContainer),i&&i!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=i,this._dropContainer.enter(this,e,n,i===this._initialContainer&&i.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:i,currentIndex:i.getItemIndex(this)})}),this._dropContainer._startScrollingIfNecessary(l,t),this._dropContainer._sortItem(this,e,n,this._pointerDirectionDelta),this._preview.style.transform=lf(e-this._pickupPositionInElement.x,n-this._pickupPositionInElement.y)}_createPreviewElement(){const e=this._previewTemplate,n=this.previewClass,l=e?e.template:null;let t;if(l&&e){const n=e.matchSize?this._rootElement.getBoundingClientRect():null,i=e.viewContainer.createEmbeddedView(l,e.context);i.detectChanges(),t=uf(i,this._document),this._previewRef=i,e.matchSize?of(t,n):t.style.transform=lf(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{const e=this._rootElement;t=Qm(e),of(t,e.getBoundingClientRect())}return Gm(t.style,{pointerEvents:"none",margin:"0",position:"fixed",top:"0",left:"0",zIndex:""+(this._config.zIndex||1e3)}),Bm(t,!1),t.classList.add("cdk-drag-preview"),t.setAttribute("dir",this._direction),n&&(Array.isArray(n)?n.forEach(e=>t.classList.add(e)):t.classList.add(n)),t}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const e=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._preview.style.transform=lf(e.left,e.top);const n=function(e){const n=getComputedStyle(e),l=Wm(n,"transition-property"),t=l.find(e=>"transform"===e||"all"===e);if(!t)return 0;const i=l.indexOf(t),s=Wm(n,"transition-duration"),r=Wm(n,"transition-delay");return Vm(s[i])+Vm(r[i])}(this._preview);return 0===n?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(e=>{const l=n=>{(!n||n.target===this._preview&&"transform"===n.propertyName)&&(this._preview.removeEventListener("transitionend",l),e(),clearTimeout(t))},t=setTimeout(l,1.5*n);this._preview.addEventListener("transitionend",l)}))}_createPlaceholderElement(){const e=this._placeholderTemplate,n=e?e.template:null;let l;return n?(this._placeholderRef=e.viewContainer.createEmbeddedView(n,e.context),this._placeholderRef.detectChanges(),l=uf(this._placeholderRef,this._document)):l=Qm(this._rootElement),l.classList.add("cdk-drag-placeholder"),l}_getPointerPositionInElement(e,n){const l=this._rootElement.getBoundingClientRect(),t=e===this._rootElement?null:e,i=t?t.getBoundingClientRect():l,s=rf(n)?n.targetTouches[0]:n,r=this._getViewportScrollPosition();return{x:i.left-l.left+(s.pageX-i.left-r.left),y:i.top-l.top+(s.pageY-i.top-r.top)}}_getPointerPositionOnPage(e){const n=this._getViewportScrollPosition(),l=rf(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,t=l.pageX-n.left,i=l.pageY-n.top;if(this._ownerSVGElement){const e=this._ownerSVGElement.getScreenCTM();if(e){const n=this._ownerSVGElement.createSVGPoint();return n.x=t,n.y=i,n.matrixTransform(e.inverse())}}return{x:t,y:i}}_getConstrainedPointerPosition(e){const n=this._dropContainer?this._dropContainer.lockAxis:null;let{x:l,y:t}=this.constrainPosition?this.constrainPosition(e,this):e;if("x"===this.lockAxis||"x"===n?t=this._pickupPositionOnPage.y:"y"!==this.lockAxis&&"y"!==n||(l=this._pickupPositionOnPage.x),this._boundaryRect){const{x:e,y:n}=this._pickupPositionInElement,i=this._boundaryRect,s=this._previewRect,r=i.top+n,u=i.bottom-(s.height-n);l=tf(l,i.left+e,i.right-(s.width-e)),t=tf(t,r,u)}return{x:l,y:t}}_updatePointerDirectionDelta(e){const{x:n,y:l}=e,t=this._pointerDirectionDelta,i=this._pointerPositionAtLastDirectionChange,s=Math.abs(n-i.x),r=Math.abs(l-i.y);return s>this._config.pointerDirectionChangeThreshold&&(t.x=n>i.x?1:-1,i.x=n),r>this._config.pointerDirectionChangeThreshold&&(t.y=l>i.y?1:-1,i.y=l),t}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,Bm(this._rootElement,e))}_removeRootElementListeners(e){e.removeEventListener("mousedown",this._pointerDown,ef),e.removeEventListener("touchstart",this._pointerDown,Jm)}_applyRootElementTransform(e,n){const l=lf(e,n);null==this._initialTransform&&(this._initialTransform=this._rootElement.style.transform||""),this._rootElement.style.transform=this._initialTransform?l+" "+this._initialTransform:l}_getDragDistance(e){const n=this._pickupPositionOnPage;return n?{x:e.x-n.x,y:e.y-n.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:n}=this._passiveTransform;if(0===e&&0===n||this.isDragging()||!this._boundaryElement)return;const l=this._boundaryElement.getBoundingClientRect(),t=this._rootElement.getBoundingClientRect();if(0===l.width&&0===l.height||0===t.width&&0===t.height)return;const i=l.left-t.left,s=t.right-l.right,r=l.top-t.top,u=t.bottom-l.bottom;l.width>t.width?(i>0&&(e+=i),s>0&&(e-=s)):e=0,l.height>t.height?(r>0&&(n+=r),u>0&&(n-=u)):n=0,e===this._passiveTransform.x&&n===this._passiveTransform.y||this.setFreeDragPosition({y:n,x:e})}_getDragStartDelay(e){const n=this.dragStartDelay;return"number"==typeof n?n:rf(e)?n.touch:n?n.mouse:0}_updateOnScroll(e){const n=this._parentPositions.handleScroll(e);if(n){const l=e.target;this._boundaryRect&&(l===this._document||l!==this._boundaryElement&&l.contains(this._boundaryElement))&&$m(this._boundaryRect,n.top,n.left),this._pickupPositionOnPage.x+=n.left,this._pickupPositionOnPage.y+=n.top,this._dropContainer||(this._activeTransform.x-=n.left,this._activeTransform.y-=n.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){const e=this._parentPositions.positions.get(this._document);return e?e.scrollPosition:this._viewportRuler.getViewportScrollPosition()}}function lf(e,n){return`translate3d(${Math.round(e)}px, ${Math.round(n)}px, 0)`}function tf(e,n,l){return Math.max(n,Math.min(l,e))}function sf(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function rf(e){return"t"===e.type[0]}function uf(e,n){const l=e.rootNodes;if(1===l.length&&l[0].nodeType===n.ELEMENT_NODE)return l[0];const t=n.createElement("div");return l.forEach(e=>t.appendChild(e)),t}function of(e,n){e.style.width=n.width+"px",e.style.height=n.height+"px",e.style.transform=lf(n.left,n.top)}function af(e,n,l){const t=cf(n,e.length-1),i=cf(l,e.length-1);if(t===i)return;const s=e[t],r=i<t?-1:1;for(let u=t;u!==i;u+=r)e[u]=e[u+r];e[i]=s}function cf(e,n){return Math.max(0,Math.min(n,e))}class hf{constructor(e,n,l,t,i){this._dragDropRegistry=n,this._ngZone=t,this._viewportRuler=i,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.enterPredicate=()=>!0,this.beforeStarted=new C,this.entered=new C,this.exited=new C,this.dropped=new C,this.sorted=new C,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0,overlaps:!1},this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=h.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new C,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function(e=0,n=Rm){return(!Cm(e)||e<0)&&(e=0),n&&"function"==typeof n.schedule||(n=Rm),new E(l=>(l.add(n.schedule(Hm,e,{subscriber:l,counter:0,period:e})),l))}(0,vm).pipe(ym(this._stopScrollTimers)).subscribe(()=>{const e=this._scrollNode;1===this._verticalScrollDirection?gf(e,-2):2===this._verticalScrollDirection&&gf(e,2),1===this._horizontalScrollDirection?pf(e,-2):2===this._horizontalScrollDirection&&pf(e,2)})},this.element=dm(e),this._document=l,this.withScrollableParents([this.element]),n.registerDropContainer(this),this._parentPositions=new jm(l,i)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){const e=dm(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._cacheItems(),this._siblings.forEach(e=>e._startReceiving(this)),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}enter(e,n,l,t){let i;this.start(),null==t?(i=this.sortingDisabled?this._draggables.indexOf(e):-1,-1===i&&(i=this._getItemIndexFromPointerPosition(e,n,l))):i=t;const s=this._activeDraggables,r=s.indexOf(e),u=e.getPlaceholderElement();let o=s[i];if(o===e&&(o=s[i+1]),r>-1&&s.splice(r,1),o&&!this._dragDropRegistry.isDragging(o)){const n=o.getRootElement();n.parentElement.insertBefore(u,n),s.splice(i,0,e)}else if(this._shouldEnterAsFirstChild(n,l)){const n=s[0].getRootElement();n.parentNode.insertBefore(u,n),s.unshift(e)}else dm(this.element).appendChild(u),s.push(e);u.style.transform="",this._cacheItemPositions(),this._cacheParentPositions(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,n,l,t,i,s){this._reset(),null==s&&(s=l.getItemIndex(e)),this.dropped.next({item:e,currentIndex:n,previousIndex:s,container:this,previousContainer:l,isPointerOverContainer:t,distance:i})}withItems(e){const n=this._draggables;return this._draggables=e,e.forEach(e=>e._withDropContainer(this)),this.isDragging()&&(n.filter(e=>e.isDragging()).every(n=>-1===e.indexOf(n))?this._reset():this._cacheItems()),this}withDirection(e){return this._direction=e,this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){return this._orientation=e,this}withScrollableParents(e){const n=dm(this.element);return this._scrollableElements=-1===e.indexOf(n)?[n,...e]:e.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?df("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions,n=>n.drag===e):this._draggables.indexOf(e)}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,n,l,t){if(this.sortingDisabled||!Km(this._clientRect,.05,n,l))return;const i=this._itemPositions,s=this._getItemIndexFromPointerPosition(e,n,l,t);if(-1===s&&i.length>0)return;const r="horizontal"===this._orientation,u=df(i,n=>n.drag===e),o=i[s],a=o.clientRect,c=u>s?1:-1,h=this._getItemOffsetPx(i[u].clientRect,a,c),d=this._getSiblingOffsetPx(u,i,c),g=i.slice();af(i,u,s),this.sorted.next({previousIndex:u,currentIndex:s,container:this,item:e}),i.forEach((n,l)=>{if(g[l]===n)return;const t=n.drag===e,i=t?h:d,s=t?e.getPlaceholderElement():n.drag.getRootElement();n.offset+=i,r?(s.style.transform=`translate3d(${Math.round(n.offset)}px, 0, 0)`,$m(n.clientRect,0,i)):(s.style.transform=`translate3d(0, ${Math.round(n.offset)}px, 0)`,$m(n.clientRect,i,0))}),this._previousSwap.overlaps=zm(a,n,l),this._previousSwap.drag=o.drag,this._previousSwap.delta=r?t.x:t.y}_startScrollingIfNecessary(e,n){if(this.autoScrollDisabled)return;let l,t=0,i=0;if(this._parentPositions.positions.forEach((s,r)=>{r!==this._document&&s.clientRect&&!l&&Km(s.clientRect,.05,e,n)&&([t,i]=function(e,n,l,t){const i=mf(n,t),s=ff(n,l);let r=0,u=0;if(i){const n=e.scrollTop;1===i?n>0&&(r=1):e.scrollHeight-n>e.clientHeight&&(r=2)}if(s){const n=e.scrollLeft;1===s?n>0&&(u=1):e.scrollWidth-n>e.clientWidth&&(u=2)}return[r,u]}(r,s.clientRect,e,n),(t||i)&&(l=r))}),!t&&!i){const{width:s,height:r}=this._viewportRuler.getViewportSize(),u={width:s,height:r,top:0,right:s,bottom:r,left:0};t=mf(u,n),i=ff(u,e),l=window}!l||t===this._verticalScrollDirection&&i===this._horizontalScrollDirection&&l===this._scrollNode||(this._verticalScrollDirection=t,this._horizontalScrollDirection=i,this._scrollNode=l,(t||i)&&l?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_cacheParentPositions(){const e=dm(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(e).clientRect}_cacheItemPositions(){const e="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(e=>{const n=e.getVisibleElement();return{drag:e,offset:0,clientRect:Ym(n)}}).sort((n,l)=>e?n.clientRect.left-l.clientRect.left:n.clientRect.top-l.clientRect.top)}_reset(){this._isDragging=!1;const e=dm(this.element).style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach(e=>{const n=e.getRootElement();n&&(n.style.transform="")}),this._siblings.forEach(e=>e._stopReceiving(this)),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_getSiblingOffsetPx(e,n,l){const t="horizontal"===this._orientation,i=n[e].clientRect,s=n[e+-1*l];let r=i[t?"width":"height"]*l;if(s){const e=t?"left":"top",n=t?"right":"bottom";-1===l?r-=s.clientRect[e]-i[n]:r+=i[e]-s.clientRect[n]}return r}_getItemOffsetPx(e,n,l){const t="horizontal"===this._orientation;let i=t?n.left-e.left:n.top-e.top;return-1===l&&(i+=t?n.width-e.width:n.height-e.height),i}_shouldEnterAsFirstChild(e,n){if(!this._activeDraggables.length)return!1;const l=this._itemPositions,t="horizontal"===this._orientation;if(l[0].drag!==this._activeDraggables[0]){const i=l[l.length-1].clientRect;return t?e>=i.right:n>=i.bottom}{const i=l[0].clientRect;return t?e<=i.left:n<=i.top}}_getItemIndexFromPointerPosition(e,n,l,t){const i="horizontal"===this._orientation;return df(this._itemPositions,({drag:s,clientRect:r},u,o)=>{if(s===e)return o.length<2;if(t){const e=i?t.x:t.y;if(s===this._previousSwap.drag&&this._previousSwap.overlaps&&e===this._previousSwap.delta)return!1}return i?n>=Math.floor(r.left)&&n<Math.floor(r.right):l>=Math.floor(r.top)&&l<Math.floor(r.bottom)})}_cacheItems(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}_isOverContainer(e,n){return zm(this._clientRect,e,n)}_getSiblingContainerFromPosition(e,n,l){return this._siblings.find(t=>t._canReceive(e,n,l))}_canReceive(e,n,l){if(!zm(this._clientRect,n,l)||!this.enterPredicate(e,this))return!1;const t=this._getShadowRoot().elementFromPoint(n,l);if(!t)return!1;const i=dm(this.element);return t===i||i.contains(t)}_startReceiving(e){const n=this._activeSiblings;n.has(e)||(n.add(e),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scroll.subscribe(e=>{if(this.isDragging()){const n=this._parentPositions.handleScroll(e);n&&(this._itemPositions.forEach(({clientRect:e})=>{$m(e,n.top,n.left)}),this._itemPositions.forEach(({drag:e})=>{this._dragDropRegistry.isDragging(e)&&e._sortFromLastPointerPosition()}))}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const e=function(e){if(function(){if(null==Dm){const e="undefined"!=typeof document?document.head:null;Dm=!(!e||!e.createShadowRoot&&!e.attachShadow)}return Dm}()){const n=e.getRootNode?e.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&n instanceof ShadowRoot)return n}return null}(dm(this.element));this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}}function df(e,n){for(let l=0;l<e.length;l++)if(n(e[l],l,e))return l;return-1}function gf(e,n){e===window?e.scrollBy(0,n):e.scrollTop+=n}function pf(e,n){e===window?e.scrollBy(n,0):e.scrollLeft+=n}function mf(e,n){const{top:l,bottom:t,height:i}=e,s=.05*i;return n>=l-s&&n<=l+s?1:n>=t-s&&n<=t+s?2:0}function ff(e,n){const{left:l,right:t,width:i}=e,s=.05*i;return n>=l-s&&n<=l+s?1:n>=t-s&&n<=t+s?2:0}const Sf=xm({passive:!1,capture:!0});let Ef=(()=>{class e{constructor(e,n){this._ngZone=e,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=new Set,this._globalListeners=new Map,this.pointerMove=new C,this.pointerUp=new C,this.scroll=new C,this._preventDefaultWhileDragging=e=>{this._activeDragInstances.size&&e.preventDefault()},this._document=n}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._preventDefaultWhileDragging,Sf)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._preventDefaultWhileDragging,Sf)}startDragging(e,n){if(!this._activeDragInstances.has(e)&&(this._activeDragInstances.add(e),1===this._activeDragInstances.size)){const e=n.type.startsWith("touch"),l=e?"touchend":"mouseup";this._globalListeners.set(e?"touchmove":"mousemove",{handler:e=>this.pointerMove.next(e),options:Sf}).set(l,{handler:e=>this.pointerUp.next(e),options:!0}).set("scroll",{handler:e=>this.scroll.next(e),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:Sf}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((e,n)=>{this._document.addEventListener(n,e.handler,e.options)})})}}stopDragging(e){this._activeDragInstances.delete(e),0===this._activeDragInstances.size&&this._clearGlobalListeners()}isDragging(e){return this._activeDragInstances.has(e)}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((e,n)=>{this._document.removeEventListener(n,e.handler,e.options)}),this._globalListeners.clear()}}return e.\u0275prov=re({factory:function(){return new e(Ae(Ki),Ae(_o))},token:e,providedIn:"root"}),e})();const vf={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let Rf=(()=>{class e{constructor(e,n,l,t){this._document=e,this._ngZone=n,this._viewportRuler=l,this._dragDropRegistry=t}createDrag(e,n=vf){return new nf(e,n,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(e){return new hf(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return e.\u0275prov=re({factory:function(){return new e(Ae(_o),Ae(Ki),Ae(Fm),Ae(Ef))},token:e,providedIn:"root"}),e})();const Of=new Re("CdkDropListGroup"),Tf=new Re("CDK_DRAG_CONFIG");let Cf=0;const If=new Re("CdkDropList");let bf=(()=>{class e{constructor(n,l,t,i,s,r,u){this.element=n,this._changeDetectorRef=t,this._dir=i,this._group=s,this._scrollDispatcher=r,this._destroyed=new C,this.connectedTo=[],this.id="cdk-drop-list-"+Cf++,this.enterPredicate=()=>!0,this.dropped=new Ii,this.entered=new Ii,this.exited=new Ii,this.sorted=new Ii,this._unsortedItems=new Set,this._dropListRef=l.createDropList(n),this._dropListRef.data=this,u&&this._assignDefaults(u),this._dropListRef.enterPredicate=(e,n)=>this.enterPredicate(e.data,n.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),e._dropLists.push(this),s&&s._items.add(this)}get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(e){this._dropListRef.disabled=this._disabled=hm(e)}addItem(e){this._unsortedItems.add(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(e){this._unsortedItems.delete(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((e,n)=>e._dragRef.getVisibleElement().compareDocumentPosition(n._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const n=e._dropLists.indexOf(this);n>-1&&e._dropLists.splice(n,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(n){this._dir&&this._dir.change.pipe(gc(this._dir.value),ym(this._destroyed)).subscribe(e=>n.withDirection(e)),n.beforeStarted.subscribe(()=>{const l=(t=this.connectedTo,Array.isArray(t)?t:[t]).map(n=>{if("string"==typeof n){const l=e._dropLists.find(e=>e.id===n);return!l&&nn()&&console.warn(`CdkDropList could not find connected drop list with id "${n}"`),l}return n});var t;if(this._group&&this._group._items.forEach(e=>{-1===l.indexOf(e)&&l.push(e)}),!this._scrollableParentsResolved&&this._scrollDispatcher){const e=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(e=>e.getElementRef().nativeElement);this._dropListRef.withScrollableParents(e),this._scrollableParentsResolved=!0}n.disabled=this.disabled,n.lockAxis=this.lockAxis,n.sortingDisabled=hm(this.sortingDisabled),n.autoScrollDisabled=hm(this.autoScrollDisabled),n.connectedTo(l.filter(e=>e&&e!==this).map(e=>e._dropListRef)).withOrientation(this.orientation)})}_handleEvents(e){e.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(e=>{this.entered.emit({container:this,item:e.item.data,currentIndex:e.currentIndex})}),e.exited.subscribe(e=>{this.exited.emit({container:this,item:e.item.data}),this._changeDetectorRef.markForCheck()}),e.sorted.subscribe(e=>{this.sorted.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,container:this,item:e.item.data})}),e.dropped.subscribe(e=>{this.dropped.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,previousContainer:e.previousContainer.data,container:e.container.data,item:e.item.data,isPointerOverContainer:e.isPointerOverContainer,distance:e.distance}),this._changeDetectorRef.markForCheck()})}_assignDefaults(e){const{lockAxis:n,draggingDisabled:l,sortingDisabled:t,listAutoScrollDisabled:i,listOrientation:s}=e;this.disabled=null!=l&&l,this.sortingDisabled=null!=t&&t,this.autoScrollDisabled=null!=i&&i,this.orientation=s||"vertical",n&&(this.lockAxis=n)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(e=>e._dragRef))}}return e._dropLists=[],e})();const yf=new Re("CDK_DRAG_PARENT");class Af{constructor(e,n,l,t,i,s,r,u,o,a){this.element=e,this.dropContainer=n,this._document=l,this._ngZone=t,this._viewContainerRef=i,this._dir=r,this._changeDetectorRef=o,this._selfHandle=a,this._destroyed=new C,this.started=new Ii,this.released=new Ii,this.ended=new Ii,this.entered=new Ii,this.exited=new Ii,this.dropped=new Ii,this.moved=new E(e=>{const n=this._dragRef.moved.pipe(y(e=>({source:this,pointerPosition:e.pointerPosition,event:e.event,delta:e.delta,distance:e.distance}))).subscribe(e);return()=>{n.unsubscribe()}}),this._dragRef=u.createDrag(e,{dragStartThreshold:s&&null!=s.dragStartThreshold?s.dragStartThreshold:5,pointerDirectionChangeThreshold:s&&null!=s.pointerDirectionChangeThreshold?s.pointerDirectionChangeThreshold:5,zIndex:null==s?void 0:s.zIndex}),this._dragRef.data=this,s&&this._assignDefaults(s),n&&(this._dragRef._withDropContainer(n._dropListRef),n.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(e){this._disabled=hm(e),this._dragRef.disabled=this._disabled}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}ngAfterViewInit(){this._ngZone.onStable.asObservable().pipe(Ja(1),ym(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._handles.changes.pipe(gc(this._handles),ic(e=>{const n=e.filter(e=>e._parentDrag===this).map(e=>e.element);this._selfHandle&&this.rootElementSelector&&n.push(this.element),this._dragRef.withHandles(n)}),ac(e=>z(...e.map(e=>e._stateChanges.pipe(gc(e))))),ym(this._destroyed)).subscribe(e=>{const n=this._dragRef,l=e.element.nativeElement;e.disabled?n.disableHandle(l):n.enableHandle(l)}),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})}ngOnChanges(e){const n=e.rootElementSelector,l=e.freeDragPosition;n&&!n.firstChange&&this._updateRootElement(),l&&!l.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()}_updateRootElement(){const e=this.element.nativeElement,n=this.rootElementSelector?Nf(e,this.rootElementSelector):e;if(n&&n.nodeType!==this._document.ELEMENT_NODE)throw Error(`cdkDrag must be attached to an element node. Currently attached to "${n.nodeName}".`);this._dragRef.withRootElement(n||e)}_getBoundaryElement(){const e=this.boundaryElement;if(!e)return null;if("string"==typeof e)return Nf(this.element.nativeElement,e);const n=dm(e);if(nn()&&!n.contains(this.element.nativeElement))throw Error("Draggable element is not inside of the node passed into cdkDragBoundary.");return n}_syncInputs(e){e.beforeStarted.subscribe(()=>{if(!e.isDragging()){const n=this._dir,l=this.dragStartDelay,t=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,i=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.dragStartDelay="object"==typeof l&&l?l:function(e,n=0){return function(e){return!isNaN(parseFloat(e))&&!isNaN(Number(e))}(e)?Number(e):n}(l),e.constrainPosition=this.constrainPosition,e.previewClass=this.previewClass,e.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(t).withPreviewTemplate(i),n&&e.withDirection(n.value)}})}_handleEvents(e){e.started.subscribe(()=>{this.started.emit({source:this}),this._changeDetectorRef.markForCheck()}),e.released.subscribe(()=>{this.released.emit({source:this})}),e.ended.subscribe(e=>{this.ended.emit({source:this,distance:e.distance}),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(e=>{this.entered.emit({container:e.container.data,item:this,currentIndex:e.currentIndex})}),e.exited.subscribe(e=>{this.exited.emit({container:e.container.data,item:this})}),e.dropped.subscribe(e=>{this.dropped.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,previousContainer:e.previousContainer.data,container:e.container.data,isPointerOverContainer:e.isPointerOverContainer,item:this,distance:e.distance})})}_assignDefaults(e){const{lockAxis:n,dragStartDelay:l,constrainPosition:t,previewClass:i,boundaryElement:s,draggingDisabled:r,rootElementSelector:u}=e;this.disabled=null!=r&&r,this.dragStartDelay=l||0,n&&(this.lockAxis=n),t&&(this.constrainPosition=t),i&&(this.previewClass=i),s&&(this.boundaryElement=s),u&&(this.rootElementSelector=u)}}function Nf(e,n){let l=e.parentElement;for(;l;){if(l.matches?l.matches(n):l.msMatchesSelector(n))return l;l=l.parentElement}return null}class _f{}var wf=function(e){return e[e.NONE=0]="NONE",e[e.SELECTED=1]="SELECTED",e[e.UNTIL_X=2]="UNTIL_X",e[e.CONTINUOUS=3]="CONTINUOUS",e[e.UNTIL_PERCENT=4]="UNTIL_PERCENT",e}({});let Pf=(()=>{class e{constructor(e,n,l,t){this.resourcesService=e,this.servicesService=n,this.recipeService=l,this.modalService=t,this.recipeUpdate=new C,this.craftingQueue=[],this.cookingQueue=[],this.id=1,this.craftingQueueSize=vo.START_CRAFTING_QUEUE_SIZE,this.cookingQueueSize=vo.START_COOKING_QUEUE_SIZE,this.craftingType=wf.SELECTED,this.cookingType=wf.SELECTED,n.addService(bu.CRAFTING,this)}craft(e,n,l,t){this.craftingQueue.length>=this.craftingQueueSize?this.modalService.info("Crafting order queue is full"):e.shiftKey?this.craftingQueue.unshift({id:this.nextId(),recipe:n,amount:l,type:t}):this.craftingQueue.push({id:this.nextId(),recipe:n,amount:l,type:t})}cook(e,n,l,t){this.cookingQueue.length>=this.cookingQueueSize?this.modalService.info("Cooking order queue is full"):e.shiftKey?this.cookingQueue.unshift({id:this.nextId(),recipe:n,amount:l,type:t}):this.cookingQueue.push({id:this.nextId(),recipe:n,amount:l,type:t})}getCraftingQueue(){return this.craftingQueue}getCookingQueue(){return this.cookingQueue}getCraftingOrder(){const e=this.craftingQueue.find(e=>{if(e.type===wf.SELECTED&&e.amount>0&&this.resourcesService.hasResources(e.recipe.cost,"Crafting")){let n=0;this.servicesService.getVillageService().buildings.filter(e=>e.getBuildingType()===tu.WORKSHOP).forEach(l=>{l.getRecipe()&&l.getRecipe().id===e.recipe.id&&(n+=e.recipe.amount)});const l=this.resourcesService.getResource(e.recipe.resource);return l.amount+n<l.limit}if(e.type===wf.UNTIL_X&&this.resourcesService.hasResources(e.recipe.cost,"Crafting")){let n=0;this.servicesService.getVillageService().buildings.filter(e=>e.getBuildingType()===tu.WORKSHOP).forEach(l=>{l.getRecipe()&&l.getRecipe().id===e.recipe.id&&(n+=e.recipe.amount)});const l=this.resourcesService.getResource(e.recipe.resource);return l.limit<e.amount?l.amount+n<l.limit:l.amount+n<e.amount}if(e.type===wf.UNTIL_PERCENT&&this.resourcesService.hasResources(e.recipe.cost,"Crafting")){let n=0;this.servicesService.getVillageService().buildings.filter(e=>e.getBuildingType()===tu.WORKSHOP).forEach(l=>{l.getRecipe()&&l.getRecipe().id===e.recipe.id&&(n+=e.recipe.amount)});const l=this.resourcesService.getResource(e.recipe.resource);return l.limit<Math.ceil(e.amount/100*l.limit)?l.amount+n<l.limit:l.amount+n<Math.ceil(e.amount/100*l.limit)}if(e.type===wf.CONTINUOUS&&this.resourcesService.hasResources(e.recipe.cost,"Crafting")){let n=0;this.servicesService.getVillageService().buildings.filter(e=>e.getBuildingType()===tu.WORKSHOP).forEach(l=>{l.getRecipe()&&l.getRecipe().id===e.recipe.id&&(n+=e.recipe.amount)});const l=this.resourcesService.getResource(e.recipe.resource);return l.amount+n<l.limit}});return e?(this.resourcesService.decreaseResources(e.recipe.cost,"Crafting"),e.type===wf.SELECTED&&(e.amount-=1),this.craftingQueue=this.craftingQueue.filter(e=>e.type!==wf.SELECTED||e.amount>0),e.recipe):null}getCookingOrder(){const e=this.cookingQueue.find(e=>{if(e.type===wf.SELECTED&&e.amount>0&&this.resourcesService.hasResources(e.recipe.cost,"Kitchen")){let n=0;this.servicesService.getVillageService().buildings.filter(e=>e.getBuildingType()===tu.KITCHEN).forEach(l=>{l.getRecipe()&&l.getRecipe().id===e.recipe.id&&(n+=e.recipe.amount)});const l=this.resourcesService.getResource(e.recipe.resource);return l.amount+n<l.limit}if(e.type===wf.UNTIL_X&&this.resourcesService.hasResources(e.recipe.cost,"Kitchen")){let n=0;this.servicesService.getVillageService().buildings.filter(e=>e.getBuildingType()===tu.KITCHEN).forEach(l=>{l.getRecipe()&&l.getRecipe().id===e.recipe.id&&(n+=e.recipe.amount)});const l=this.resourcesService.getResource(e.recipe.resource);return l.limit<e.amount?l.amount+n<l.limit:l.amount+n<e.amount}if(e.type===wf.UNTIL_PERCENT&&this.resourcesService.hasResources(e.recipe.cost,"Kitchen")){let n=0;this.servicesService.getVillageService().buildings.filter(e=>e.getBuildingType()===tu.KITCHEN).forEach(l=>{l.getRecipe()&&l.getRecipe().id===e.recipe.id&&(n+=e.recipe.amount)});const l=this.resourcesService.getResource(e.recipe.resource);return l.limit<Math.ceil(e.amount/100*l.limit)?l.amount+n<l.limit:l.amount+n<Math.ceil(e.amount/100*l.limit)}if(e.type===wf.CONTINUOUS&&this.resourcesService.hasResources(e.recipe.cost,"Kitchen")){let n=0;this.servicesService.getVillageService().buildings.filter(e=>e.getBuildingType()===tu.KITCHEN).forEach(l=>{l.getRecipe()&&l.getRecipe().id===e.recipe.id&&(n+=e.recipe.amount)});const l=this.resourcesService.getResource(e.recipe.resource);return l.amount+n<l.limit}});return e?(this.resourcesService.decreaseResources(e.recipe.cost,"Kitchen"),e.type===wf.SELECTED&&(e.amount-=1),this.cookingQueue=this.cookingQueue.filter(e=>e.type!==wf.SELECTED||e.amount>0),e.recipe):null}getName(){return"CraftingService"}load(e){this.craftingQueue=[],this.cookingQueue=[],Array.from(e.queue).forEach(e=>{this.craftingQueue.push({id:this.nextId(),recipe:this.recipeService.getRecipeById(e.recipeId),amount:e.amount,type:e.type})}),void 0!==e.cookingQueue&&Array.from(e.cookingQueue).forEach(e=>{this.cookingQueue.push({id:this.nextId(),recipe:this.recipeService.getRecipeById(e.recipeId),amount:e.amount,type:e.type})}),this.craftingQueueSize=e.queueSize,this.cookingQueueSize=void 0!==e.cookingQueueSize?e.cookingQueueSize:vo.START_COOKING_QUEUE_SIZE}save(){return{queue:this.craftingQueue.map(e=>({recipeId:e.recipe.id,amount:e.amount,type:e.type})),cookingQueue:this.cookingQueue.map(e=>({recipeId:e.recipe.id,amount:e.amount,type:e.type})),queueSize:this.craftingQueueSize,cookingQueueSize:this.cookingQueueSize}}reset(e,n){this.craftingQueue=[],this.cookingQueue=[],this.id=1,this.craftingQueueSize=vo.START_CRAFTING_QUEUE_SIZE,this.cookingQueueSize=vo.START_COOKING_QUEUE_SIZE}registerForUpdate(){return this.recipeUpdate.asObservable()}cancel(e,n=!1){let l=this.craftingQueue.find(n=>n.id===e);if(l)if(n)this.craftingQueue=this.craftingQueue.filter(n=>n.id!==e),this.recipeUpdate.next();else{this.modalService.open(Pu.CONFIRM),this.modalService.setModalText("Are you sure you want to cancel crafting "+Ou.prepareResourceName(l.recipe.resource)+"?");const n=this.modalService.registerForConfirmation().subscribe(l=>{l&&(this.craftingQueue=this.craftingQueue.filter(n=>n.id!==e),this.recipeUpdate.next()),n.unsubscribe()})}else if(l=this.cookingQueue.find(n=>n.id===e),l)if(n)this.cookingQueue=this.cookingQueue.filter(n=>n.id!==e),this.recipeUpdate.next();else{this.modalService.open(Pu.CONFIRM),this.modalService.setModalText("Are you sure you want to cancel cooking "+Ou.prepareResourceName(l.recipe.resource)+"?");const n=this.modalService.registerForConfirmation().subscribe(l=>{l&&(this.cookingQueue=this.cookingQueue.filter(n=>n.id!==e),this.recipeUpdate.next()),n.unsubscribe()})}}nextId(){const e=this.id;return this.id++,e}moveRecipeInCraftingQueue(e){af(this.craftingQueue,e.previousIndex,e.currentIndex)}moveRecipeInCookingQueue(e){af(this.cookingQueue,e.previousIndex,e.currentIndex)}getCraftingQueueMaxSize(){return this.craftingQueueSize}getCookingQueueMaxSize(){return this.cookingQueueSize}increaseCraftingQueueSize(e){this.craftingQueueSize+=e}decreaseCraftingQueueSize(e){this.craftingQueueSize-=e}increaseCookingQueueSize(e){this.cookingQueueSize+=e}decreaseCookingQueueSize(e){this.cookingQueueSize-=e}filterCraftingQueue(e){this.craftingQueue.forEach(n=>{e.includes(n.recipe.id)&&this.cancel(n.id,!0)})}setCraftingType(e){this.craftingType=e}setCookingType(e){this.cookingType=e}getCookingType(){return this.cookingType}getCraftingType(){return this.craftingType}}return e.\u0275prov=re({factory:function(){return new e(Ae(Qp),Ae(Np),Ae(cm),Ae(Fp))},token:e,providedIn:"root"}),e})();var Mf=function(e){return e[e.FIRST=0]="FIRST",e[e.SECOND=1]="SECOND",e[e.THIRD=2]="THIRD",e[e.FOURTH=3]="FOURTH",e}({}),Df=function(e){return e[e.TEXT=0]="TEXT",e[e.PROGRESS_BAR=1]="PROGRESS_BAR",e[e.BUTTON=2]="BUTTON",e[e.CHECKBOX=3]="CHECKBOX",e[e.BUTTON_CHECKBOX=4]="BUTTON_CHECKBOX",e[e.TWO_BUTTON=5]="TWO_BUTTON",e[e.DROPDOWN=6]="DROPDOWN",e[e.ICON=7]="ICON",e}({});class Lf{constructor(e,n){this.valueType=e,this.value=n}static emptyValue(){return new Lf(Df.TEXT,"")}static textValue(e){return new Lf(Df.TEXT,e)}static progressValue(e,n=""){return new Lf(Df.PROGRESS_BAR,{value:e,label:n})}static buttonValue(e,n){return new Lf(Df.BUTTON,{buttonText:e,callbackValue:n})}static buttonCheckboxValue(e,n,l,t,i){return new Lf(Df.BUTTON_CHECKBOX,{buttonText:e,callbackValue:n,checkboxState:t,checkboxLabel:l,checkboxCallbackValue:i})}static checkboxValue(e,n,l){return new Lf(Df.CHECKBOX,{checkboxState:n,checkboxLabel:e,checkboxCallbackValue:l})}static twoButtonValue(e,n,l,t,i){return new Lf(Df.TWO_BUTTON,{button1Text:e,callback1Value:n,textBetween:l,button2Text:t,callback2Value:i})}static dropdownValue(e,n){return new Lf(Df.DROPDOWN,{values:e,selected:n})}static iconValue(e){return new Lf(Df.ICON,e)}getValueType(){return this.valueType}getValue(){return this.value}}class xf{constructor(e,n,l,t){this.name=e,this.effect=n,this.duration=l,this.cost=t}}class kf{constructor(e,n,l,t,i,s,r,u){this.servicesService=l,this.id=e,this.buildingType=n,this.demolishable=s,this.settings=t,this.stoppable=r,this.working=i,this.level=u,this.size=t.SIZE,this.complexity=t.COMPLEXITY,l&&(this.resourcesService=l.getResourcesService(),this.effectsService=l.getEffectsService(),this.happinessService=l.getHappinessService(),this.gameService=l.getGameService(),this.logService=l.getLogService(),this.modalService=l.getModalService(),this.weatherService=l.getWeatherService())}build(){return this.startProduction(),this}getBuildingId(){return this.id}callback(e){}finishDemolish(){Array.from(this.getCost().entries()).forEach(e=>this.resourcesService.increaseResource(e[0],Math.floor(.3*e[1]),"Demolition"))}fireWorker(){return!!this.working&&(this.resourcesService.fireWorker(),this.working=!1,!0)}getBuildingType(){return this.buildingType}getComplexity(){return this.complexity}getCost(){const e=new Map;return this.settings.COST.forEach(n=>e.set(n.resource,n.amount)),e}getDescription(){return this.settings.DESCRIPTION}hasDetails(){return!0}getDetails(){let e="";(this.getBuildingLevel()>1||this.hasUpgrade())&&(e+="building level: "+this.level+"<br>");let n=0;return 1===this.level||this.buildingType===tu.CONSTRUCTION?n=this.settings.BASE_POWER:this.settings.UPGRADES&&(n=this.settings.UPGRADES[this.level-2].BASE_POWER),e+="building base power: "+n+"<br>",this.getPower()%1==0?e+="building power: "+this.getPower()+"<br>":e+="building power: "+Ou.round(this.getPower(),2)+"<br>",0!==this.getPermanentEffects()&&(e+="permanent effects: "+this.getPermanentEffects()+"%<br>"),0!==this.getEffects()&&(e+="temporary effects: "+this.getEffects()+"%<br>"),0!==this.getHappinessEffect()&&(e+="happiness effects: "+this.getHappinessEffect()+"%<br>"),0!==this.getWeatherMultiplier()&&(e+="weather multiplier: "+this.getWeatherMultiplier()+"%<br>"),e}getEffects(){return this.effectsService.getBuildingEffectsValue(this.buildingType,!1,this.id)}getPermanentEffects(){return this.effectsService.getBuildingEffectsValue(this.buildingType,!0)}getHappinessEffect(){return this.happinessService.getHappinessEffect()}getWeatherMultiplier(){const e=(this.settings.WEATHER?this.settings.WEATHER:[]).find(e=>this.weatherService.isWeather(e.weather));return e?e.effect:0}getDisplayableEffectsValue(){let e=0;return 1===this.level||this.buildingType===tu.CONSTRUCTION?e=this.settings.BASE_POWER:this.settings.UPGRADES&&(e=this.settings.UPGRADES[this.level-2].BASE_POWER),Number(Ou.round(100*(this.getPower()/e-1),2))}getPower(){let e=0;return 1===this.level||this.buildingType===tu.CONSTRUCTION?e=this.settings.BASE_POWER:this.settings.UPGRADES&&(e=this.settings.UPGRADES[this.level-2].BASE_POWER),e*(1+(this.getPermanentEffects()+this.getEffects()+this.getHappinessEffect())/100)*(1+this.getWeatherMultiplier()/100)}isUsedUp(){return!1}getLine(e){switch(e){case Mf.FIRST:case Mf.SECOND:case Mf.THIRD:case Mf.FOURTH:return Lf.emptyValue()}}getName(){return Ou.titleCase(Ou.prepareBuildingName(this.buildingType))}getSize(){return this.size}buildOnMountain(){return!1}getWorkers(){return this.working?1:0}hireWorker(){return!(this.working||!this.resourcesService.hireWorker()||(this.working=!0,0))}isDemolishable(){return this.demolishable}isStoppable(){return this.stoppable}isComplexManagement(){return!1}getWorkSettings(){return null}setWorkSettings(e){}isWorking(){return this.working}prepareDemolish(){return this.stopProduction(),!0}startProduction(){return!(this.working||!this.resourcesService.hireWorker()||(this.working=!0,0))}stopProduction(){this.working&&(this.resourcesService.fireWorker(),this.working=!1)}tick(e){}isCombinable(){return!1}isSplittable(){return!1}hasBuff(){return this.settings.BUFF}isBuffed(){return!!this.hasBuff()&&this.effectsService.getBuildingEffects(this.buildingType).filter(e=>e.buff===this.id).length>0}getBuff(){if(this.settings.BUFF){const e=new Map;return this.settings.BUFF.cost.forEach(n=>e.set(n.resource,n.amount)),new xf(this.settings.BUFF.name,this.settings.BUFF.effect,this.settings.BUFF.duration,e)}return null}hasUpgrade(){if(this.settings.UPGRADES&&this.settings.UPGRADES.length>=this.getBuildingLevel()){if(this.settings.UPGRADES[this.getBuildingLevel()-1].PREREQUISITES){let e=!0;return this.settings.UPGRADES[this.getBuildingLevel()-1].PREREQUISITES.forEach(n=>{this.gameService.isEnabled(n)||(e=!1)}),e}return!0}return!1}getUpgradeSettings(){return this.settings.UPGRADES&&this.settings.UPGRADES.length>=this.getBuildingLevel()?this.settings.UPGRADES[this.getBuildingLevel()-1]:null}getUpgradeCost(){const e=new Map;return this.hasUpgrade()&&this.settings.UPGRADES[this.level-1].COST.forEach(n=>e.set(n.resource,n.amount)),e}setBuildingLevel(e){this.level=e}getBuildingLevel(){return this.level}getBuildingData(){return null}setBuildingData(e){}}class Ff extends kf{constructor(e=null,n,l,t,i,s,r,u,o,a,c){super(n,l,e,t,!1,!0,!1,a),this.occupants=i,this.progress=s,this.food=r,this.fuel=u,this.clothes=o,this.enabled=c,this.maxSize=t.MAX_OCCUPANTS,this.servicesService&&(this.villageService=e.getVillageService(),this.weatherService=e.getWeatherService(),this.religionService=e.getService(bu.RELIGION),this.managementService=e.getManagementService())}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,occupants:this.occupants,maxSize:this.maxSize,progress:this.progress,food:this.food,fuel:this.fuel,clothes:this.clothes,enabled:this.enabled}}getLine(e){switch(e){case Mf.FIRST:return Lf.textValue("occupants: "+this.occupants+"/"+this.maxSize);case Mf.SECOND:return Lf.progressValue(this.occupants<this.maxSize?this.progress:-1);case Mf.THIRD:return this.food>0||0===this.occupants?Lf.emptyValue():Lf.progressValue(Math.abs(this.food),"famine");case Mf.FOURTH:return this.fuel>=0?this.weatherService.getCurrentTemperature()<10&&this.occupants>0?Lf.textValue("heating"):Lf.emptyValue():Lf.progressValue(Math.abs(this.fuel),"freezing")}}tick(){if(!this.enabled)return;if(this.occupants>0){const e=this.getHousingQuality(this.getBuildingType()),n=this.getBestHousingQualityPossible();e<n&&this.happinessService.registerHouseQualityHappiness((e-n)*this.occupants,this.occupants)}this.clothes<50&&(this.resourcesService.decreaseResource(su.CLOTHES,1,this.getName()+" clothing")?(this.clothes+=50,this.happinessService.updateFurClothes(this.getBuildingId(),!1)):this.managementService.getFurClothes()&&this.resourcesService.decreaseResource(su.FUR,1,this.getName()+" clothing")?(this.clothes+=2,this.happinessService.updateFurClothes(this.getBuildingId(),!0)):0===this.clothes&&this.happinessService.clearFurClothes(this.getBuildingId()));let e=!0;for(;this.food<=this.settings.STORAGE-50&&e;){let n=this.resourcesService.getPriorityFood(this.getName());if(0===n&&(e=!1),this.food<0){const e=Math.abs(this.food)/2;n>=e?(n-=e,this.food=0):(this.food-=2*n,n=0)}this.food+=n}const n=Number(this.managementService.getRations());for(let i=0;i<this.occupants;i++)this.food>0?(this.food-=.5*n,1===n?this.happinessService.registerFoodHappiness(-1):this.happinessService.getHappiness()<75&&(2===n||(3===n?this.happinessService.registerFoodHappiness(2):4===n&&this.happinessService.registerFoodHappiness(3)))):(this.food-=.5,this.happinessService.registerFoodHappiness(-3));this.food<0&&0===this.occupants&&(this.food=0),this.food<-100&&this.occupants>0&&(this.occupants-=1,this.food=-1,this.resourcesService.removePeople(1)),this.food<0&&this.occupants>0&&this.religionService.getFaithShield()>0&&(this.food=100*this.religionService.decreaseFaithShield(Math.abs(this.food)/100)),this.fuel<=this.settings.STORAGE-50&&(this.fuel+=this.resourcesService.getFuel(this.getName()));const l=this.weatherService.getCurrentTemperature(),t=this.managementService.getClothesRations();if(l<10&&this.occupants>0){let e=.2*(10-l)/10*(this.settings.SIZE/10*(1-this.settings.FUEL_EFFICIENCY));if(this.clothes>0?(this.clothes-=.01*this.occupants*t,e/=t+1,this.clothes<0&&(this.clothes=0),this.happinessService.registerClothesHappiness(t*this.occupants,this.occupants)):this.happinessService.registerClothesHappiness(-3*this.occupants,this.occupants),this.fuel-e<-100&&this.resourcesService.getPeople()+this.resourcesService.getWorkers()>0){const e=[{item:Su.COLD,chance:Co.getSickness(Su.COLD).CHANCE},{item:Su.FLU,chance:Co.getSickness(Su.FLU).CHANCE},{item:Su.PNEUMONIA,chance:Co.getSickness(Su.PNEUMONIA).CHANCE}],n=Nu.randomElement(e,!0);null!=n&&(this.managementService.getLogSickness()&&this.logService.warning(n===Su.PNEUMONIA?"Villager developed "+Ou.prepareSicknessName(n):"Villager caught a "+Ou.prepareSicknessName(n)),this.resourcesService.addSick(n)),this.fuel=0}else this.fuel-=e;if(this.fuel<0&&this.occupants>0&&this.religionService.getFaithShield()>0)return void(this.fuel=200*this.religionService.decreaseFaithShield(Math.abs(this.food)/200));this.fuel<0&&this.happinessService.registerFreezingHappiness(-1*this.occupants,this.occupants)}else this.fuel<0&&(this.fuel=0),l>10&&(this.clothes>0?(this.clothes-=.005*this.occupants*t,this.clothes<0&&(this.clothes=0),this.happinessService.registerClothesHappiness(t*this.occupants,this.occupants)):this.happinessService.registerClothesHappiness(-3*this.occupants,this.occupants));this.progress<100&&this.occupants<this.maxSize&&this.food>0?(this.progress+=this.getPower(),this.progress>100&&(this.progress=100)):this.occupants<this.maxSize&&100===this.progress?(this.occupants+=1,this.resourcesService.createPeople(1),this.progress=0):this.progress>0&&this.food<=0&&(this.progress-=this.getPower())}build(){return this.resourcesService.increasePopulationCap(this.maxSize),this}prepareDemolish(){if(this.occupants>0){const e=this.villageService.moveOccupants(this,this.occupants,this.food,this.fuel,this.clothes);this.resourcesService.removePeople(e)}return this.resourcesService.decreasePopulationCap(this.maxSize),!0}getDetails(){return"occupants: "+this.occupants+"/"+this.maxSize+"<br>food nutrition: "+Ou.round(this.food,2)+"<br>heating fuel: "+Ou.round(this.fuel,2)+"<br>clothes: "+Ou.round(this.clothes,2)+"<br>"+super.getDetails()}hasDetails(){return!0}stopProduction(){this.enabled=!1}startProduction(){return this.enabled=!0,!0}isStoppable(){return 0===this.occupants||!this.enabled}isWorking(){return this.enabled}getMaxSize(){return this.maxSize}getOccupants(){return this.occupants}addOccupant(){return this.occupants<this.maxSize&&(this.occupants+=1,this.occupants===this.maxSize&&(this.progress=0),!0)}removeOccupant(){return this.occupants>0&&(this.occupants-=1,!0)}addFood(e){this.food+=e}addFuel(e){this.fuel+=e}addClothes(e){this.clothes+=e}fireWorker(){return!1}hireWorker(){return!1}getWorkers(){return 0}setBuildingLevel(e){}getBuildingData(){return{food:this.food,fuel:this.fuel,clothes:this.clothes,enabled:this.enabled}}setBuildingData(e){this.food=e.food,this.fuel=e.fuel,this.clothes=e.clothes,this.enabled=e.enabled}getHousingQuality(e){switch(e){case tu.HUT:return 1;case tu.HOUSE:return 2;case tu.LONGHOUSE:return 3;case tu.TUDOR_HOUSE:return 4;case tu.SETTLEMENT:return 5;default:return 0}}getBestHousingQualityPossible(){return this.gameService.isEnabled(ou.SETTLEMENT)?this.getHousingQuality(tu.SETTLEMENT):this.gameService.isEnabled(ou.TUDOR_HOUSE)?this.getHousingQuality(tu.TUDOR_HOUSE):this.gameService.isEnabled(ou.LONGHOUSE)?this.getHousingQuality(tu.LONGHOUSE):this.gameService.isEnabled(ou.HOUSE)?this.getHousingQuality(tu.HOUSE):this.getHousingQuality(tu.HUT)}}class Uf extends Ff{constructor(e=null,n=-1,l=0,t=0,i=100,s=100,r=0,u=1,o=!0){super(e,n,tu.HUT,po.VILLAGE.HUT,l,t,i,s,r,u,o)}}class Hf extends Ff{constructor(e=null,n=-1,l=0,t=0,i=100,s=100,r=0,u=1,o=!0){super(e,n,tu.HOUSE,po.VILLAGE.HOUSE,l,t,i,s,r,u,o)}}var Gf=function(e){return e.CHOPPING_TREES="chopping trees",e.WAITING_FOR_TREES="waiting for trees",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.TRANSPORTING_LOG="transporting log",e}({});class Bf extends kf{constructor(e=null,n=-1,l=0,t=0,i=Gf.WAITING_FOR_TREES,s=!1,r=1){super(n,tu.LOGGERS_HUT,e,po.FOREST.LOGGERS_HUT,s,!0,!0,r),this.progress=l,this.reservedTrees=t,this.status=i,this.servicesService&&(this.landService=e.getLandService())}getLine(e){switch(e){case Mf.FIRST:return Lf.emptyValue();case Mf.SECOND:return Lf.textValue(this.status);case Mf.THIRD:return Lf.progressValue(this.progress);case Mf.FOURTH:return Lf.emptyValue()}}tick(){this.working&&(this.status===Gf.WAITING_FOR_TREES?this.landService.reduceForest(1)&&(this.status=Gf.CHOPPING_TREES):this.status===Gf.CHOPPING_TREES?this.progress<100&&(this.progress+=this.getPower(),this.progress>=100&&(this.progress=0,this.status=Gf.TRANSPORTING_LOG)):this.status!==Gf.TRANSPORTING_LOG&&this.status!==Gf.WAITING_FOR_WAREHOUSE_SPACE||(this.resourcesService.increaseResource(su.LOG,1,this.getName())?(this.landService.increaseLand(1,!0),this.status=this.landService.reduceForest(1)?Gf.CHOPPING_TREES:Gf.WAITING_FOR_TREES):this.status=Gf.WAITING_FOR_WAREHOUSE_SPACE))}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,working:this.working,reservedTrees:this.reservedTrees}}}class Vf extends kf{constructor(e,n,l=null,t,i,s,r,u,o,a,c){super(e,n,l,t,i,s,r,u),this.progress=o,this.buildingComplexity=a,this.workingAt=c}getProgress(){return this.progress}increaseProgress(e){this.progress+=e/this.buildingComplexity,this.progress>100&&(this.progress=100)}getWorkingAt(){return this.workingAt}getComplexity(){return 0}}class Wf extends Vf{constructor(e=null,n,l,t,i=1,s=1,r=1,u=0,o=!1,a=null){super(n,tu.CONSTRUCTION,e,po.CONSTRUCTION_SITE,o,1===r,!0,r,u,i,t),this.region=l,this.buildingSize=s,this.upgradeLevel=r,this.data=a,this.servicesService&&(this.resourcesService=this.servicesService.getResourcesService(),this.buildingFactoryService=this.servicesService.getService(bu.BUILDING_FACTORY),this.regionService=this.servicesService.getServiceByRegion(l))}isUpgrade(){return 1!==this.upgradeLevel}getLine(e){switch(e){case Mf.FIRST:return Lf.emptyValue();case Mf.SECOND:return this.isUpgrade()?Lf.textValue("upgrading "+Ou.prepareBuildingName(this.workingAt)):Lf.textValue("constructing "+Ou.prepareBuildingName(this.workingAt));case Mf.THIRD:return Lf.progressValue(this.progress);case Mf.FOURTH:return Lf.emptyValue()}}tick(){0===this.buildingComplexity&&(this.isUpgrade()?this.regionService.finishUpgrade(this,this.workingAt):this.regionService.finishConstruction(this,this.workingAt)),this.progress>=100&&(this.isUpgrade()?this.regionService.finishUpgrade(this,this.workingAt):this.regionService.finishConstruction(this,this.workingAt)),this.working&&(this.progress<100?(this.progress+=this.getPower()/this.buildingComplexity,this.progress>100&&(this.progress=100)):this.isUpgrade()?this.regionService.finishUpgrade(this,this.workingAt):this.regionService.finishConstruction(this,this.workingAt))}build(){return this.startProduction()||0===this.buildingComplexity||this.servicesService.getModalService().info("Couldn't unlock construction. Not enough free workers."),this}toJSON(){return{id:this.id,upgradeLevel:this.upgradeLevel,buildingType:this.buildingType,region:this.region,constructing:this.workingAt,buildingComplexity:this.buildingComplexity,progress:this.progress,working:this.working,buildingSize:this.buildingSize,data:this.data}}getSize(){return this.buildingSize}finishDemolish(){Array.from(this.buildingFactoryService.createBuildingShell(this.workingAt).getCost().entries()).forEach(e=>this.resourcesService.increaseResource(e[0],Math.floor(e[1]*(1-this.progress/100)+e[1]*(this.progress/100*.3)),"Cancel construction"))}getBuildingData(){return this.data}}var Yf=function(e){return e.PLANTING_TREES="planting trees",e.WAITING_FOR_LAND="waiting for land",e.NO_ENOUGH_LAND="no enough free land",e.FOREST_TOO_BIG="forest too big",e}({});class zf extends kf{constructor(e=null,n=-1,l=0,t=0,i=Yf.WAITING_FOR_LAND,s=1,r=!1,u=1){super(n,tu.FORESTER,e,po.FOREST.FORESTER,r,!0,!0,u),this.progress=l,this.localStorage=t,this.status=i,this.effectiveness=s,this.servicesService&&(this.landService=e.getLandService(),this.modalService=e.getModalService())}getLine(e){switch(e){case Mf.FIRST:return Lf.emptyValue();case Mf.SECOND:return Lf.textValue(this.status);case Mf.THIRD:return Lf.progressValue(this.progress);case Mf.FOURTH:return Lf.emptyValue()}}tick(){if(this.working){if(0===this.localStorage){const e=this.landService.getForestOptions();if(e.forestSizeRuleEnabled&&this.landService.getForest()>=e.forestSizeRule)return void(this.status=Yf.FOREST_TOO_BIG);if(e.landSizeRuleEnabled&&this.landService.getLand()<=e.landSizeRule)return void(this.status=Yf.NO_ENOUGH_LAND);this.landService.reduceLand(this.effectiveness)?(this.localStorage=this.effectiveness,this.status=Yf.PLANTING_TREES):this.status=Yf.WAITING_FOR_LAND}this.localStorage>0&&(this.progress<100?(this.progress+=this.getPower(),this.progress>100&&(this.progress=100)):(this.landService.increaseForest(this.localStorage,!1),this.progress=0,this.localStorage=0))}}prepareDemolish(){return this.localStorage>0&&this.landService.increaseLand(this.localStorage,!0),super.prepareDemolish()}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,localStorage:this.localStorage,status:this.status,effectiveness:this.effectiveness,working:this.working}}}class $f{constructor(e,n,l,t,i,s=!1,r=!1,u=""){this.enabled=e,this.buildingType=n,this.seasons=l,this.inputSettings=t,this.outputSettings=i,this.customRuleEnabled=r,this.hasCustomRule=s,this.customRuleText=u}static clone(e){let n=null,l=null;return e.inputSettings&&(n=[],e.inputSettings.forEach(e=>{n.push([e[0],e[1]])})),e.outputSettings&&(l=[],e.outputSettings.forEach(e=>{l.push([e[0],e[1],e[2]])})),new $f(e.enabled,e.buildingType,[e.seasons[0],e.seasons[1],e.seasons[2],e.seasons[3]],n,l,e.hasCustomRule,e.customRuleEnabled,e.customRuleText)}}var Kf=function(e){return e.FETCHING_INPUT="fetching {in}",e.WAITING_FOR_INPUT="waiting for {wait}",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.PREPARING="preparing {out}",e.PRODUCING_OUTPUT="{prod} {out}",e.TRANSPORTING_OUTPUT="transporting {out}",e}({});class jf extends kf{constructor(e=null,n,l,t,i,s=0,r=[],u=[],o=!1,a=null,c){if(super(n,l,e,t,o,!0,!0,c),this.status=i,this.progress=s,this.inputStorage=r,this.outputStorage=u,this.workSettings=a,this.productionText=t.TEXT,e)if(this.managementService=e.getManagementService(),this.calendarService=e.getCalendarService(),null===this.workSettings){const e=t.INPUT_RESOURCES.map(e=>[e.resource,0]),n=t.OUTPUT_RESOURCES.map(e=>e.resource===su.COINS?[e.resource,0,!0]:[e.resource,this.resourcesService.getResource(e.resource).getLimit(),!0]);this.workSettings=new $f(!0,l,[!0,!0,!0,!0],e,n)}else if(!this.workSettings.seasons){const e=[!0,!0,!0,!0],n=[];a.outputSettings.forEach(e=>n.push([e[0],e[1],void 0===e[2]||e[2]])),this.workSettings=new $f(!0,l,e,a.inputSettings,n)}}toJSON(){return{id:this.id,level:this.level,workSettings:this.workSettings,buildingType:this.buildingType,progress:this.progress,status:this.status,inputStorage:this.inputStorage,outputStorage:this.outputStorage,working:this.working}}getLine(e){switch(e){case Mf.FIRST:return Lf.emptyValue();case Mf.SECOND:const e=Ou.resourcesArraysDiff(this.settings.INPUT_RESOURCES,this.inputStorage);let n=String(this.status);return e.length>0&&(n=n.replace("{wait}",Ou.prepareResourcesNamesList(e))),n=n.replace("{in}",Ou.prepareResourcesNamesList(this.settings.INPUT_RESOURCES)),n=n.replace("{out}",Ou.prepareResourcesNamesList(this.settings.OUTPUT_RESOURCES)),n=n.replace("{prod}",this.productionText+" "),Lf.textValue(n);case Mf.THIRD:return Lf.progressValue(this.progress);case Mf.FOURTH:return Lf.emptyValue()}}isMet(){let e=!0;return this.workSettings.seasons[this.calendarService.getSeason()]||e&&(e=!1),this.workSettings.inputSettings.forEach(n=>{e&&(e=this.resourcesService.getResource(n[0]).amount>n[1])}),this.workSettings.outputSettings.forEach(n=>{e&&(e=n[2]?this.resourcesService.getResource(n[0]).amount<this.resourcesService.getResource(n[0]).limit:this.resourcesService.getResource(n[0]).amount<n[1])}),e}tick(){this.managementService.getComplexWorkers()&&this.workSettings&&this.workSettings.enabled&&(this.isMet()?this.isWorking()||this.hireWorker():this.isWorking()&&this.status!==Kf.PRODUCING_OUTPUT&&this.status!==Kf.TRANSPORTING_OUTPUT&&this.fireWorker()),this.isWorking()&&(this.outputStorage.length>0?this.collectOutputResources():this.inputStorage.length<this.settings.INPUT_RESOURCES.length&&0===this.outputStorage.length?this.collectInputResources():this.progress<100?(this.status=Kf.PRODUCING_OUTPUT,this.progress+=this.getPower(),this.progress>100&&(this.progress=100)):100===this.progress&&(this.progress=0,this.inputStorage=[],this.outputStorage=Ou.copyResourceArray(this.settings.OUTPUT_RESOURCES),this.status=Kf.TRANSPORTING_OUTPUT))}collectInputResources(){let e=!0;return this.settings.INPUT_RESOURCES.forEach(n=>{this.inputStorage.find(e=>e.resource===n.resource)||(this.resourcesService.decreaseResource(n.resource,n.amount,this.getName())?this.inputStorage.push({resource:n.resource,amount:n.amount}):e=!1)}),e?(this.status=Kf.FETCHING_INPUT,!0):(this.status=Kf.WAITING_FOR_INPUT,!1)}collectOutputResources(){let e=!0;return this.outputStorage.forEach(n=>{this.resourcesService.increaseResource(n.resource,n.amount,this.getName())?n.amount=0:e=!1}),this.outputStorage=this.outputStorage.filter(e=>e.amount>0),e?0===this.outputStorage.length?(this.status=Kf.FETCHING_INPUT,!0):void 0:(this.status=Kf.WAITING_FOR_WAREHOUSE_SPACE,!1)}isComplexManagement(){return!0}getWorkSettings(){return this.workSettings}setWorkSettings(e){this.workSettings=e}}class Qf extends jf{constructor(e=null,n=-1,l=0,t=Kf.FETCHING_INPUT,i=[],s=[],r=!1,u=null,o=1){super(e,n,tu.SAWMILL,po.FOREST.SAWMILL,t,l,i,s,r,u,o)}}class qf extends Vf{constructor(e=null,n,l,t,i=1,s=1,r=0,u=!1){super(n,tu.DECONSTRUCTION,e,po.DECONSTRUCTION_SITE,u,!1,!0,1,r,i,t),this.region=l,this.buildingSize=s,this.servicesService&&(this.regionService=e.getServiceByRegion(l))}getLine(e){switch(e){case Mf.FIRST:return Lf.emptyValue();case Mf.SECOND:return Lf.textValue("deconstructing "+Ou.prepareBuildingName(this.workingAt));case Mf.THIRD:return Lf.progressValue(this.progress);case Mf.FOURTH:return Lf.emptyValue()}}tick(){this.progress>=100&&this.regionService.finishDeconstruction(this),this.working&&(this.progress<100?(this.progress+=this.getPower()/this.buildingComplexity,this.progress>100&&(this.progress=100)):this.regionService.finishDeconstruction(this))}toJSON(){return{id:this.id,buildingType:this.buildingType,region:this.region,deconstructing:this.workingAt,buildingComplexity:this.buildingComplexity,progress:this.progress,working:this.working,buildingSize:this.buildingSize}}getSize(){return this.buildingSize}prepareDemolish(){return!1}finishDemolish(){}getBuildingBeingDemolished(){return this.workingAt}}var Xf=function(e){return e.GATHERING_FOOD="gathering food",e.GATHERING_RESOURCES="gathering resources",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.TRANSPORTING="transporting",e}({}),Zf=function(e){return e[e.FOOD=0]="FOOD",e[e.RESOURCES=1]="RESOURCES",e}({});class Jf extends kf{constructor(e=null,n=-1,l=0,t=Xf.GATHERING_FOOD,i=!1,s=Zf.FOOD,r=[null,0],u=1){super(n,tu.GATHERER,e,po.FOREST.GATHERER,i,!0,!0,u),this.progress=l,this.status=t,this.mode=s,this.storage=r,this.lastFind=null,this.servicesService&&(this.weatherService=e.getWeatherService())}rollForFind(){let e=null;return this.mode===Zf.FOOD?e=Nu.randomElement([{item:su.BERRY,chance:this.settings.BERRY_CHANCE},{item:su.MUSHROOM,chance:this.settings.MUSHROOM_CHANCE},{item:su.WHEAT,chance:this.settings.WHEAT_CHANCE},{item:su.HERBS,chance:this.settings.HERBS_CHANCE}]):this.mode===Zf.RESOURCES&&(e=Nu.randomElement([{item:su.BRUSHWOOD,chance:this.settings.BRUSHWOOD_CHANCE},{item:su.STONE,chance:this.settings.STONE_CHANCE},{item:su.LOG,chance:this.settings.LOG_CHANCE},{item:su.COPPER,chance:this.settings.COPPER_CHANCE},{item:su.HERBS,chance:this.settings.HERBS_CHANCE}])),e}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,working:this.working,storage:this.storage,mode:this.mode}}build(){return this.servicesService.getManagementService().getDefaultGathererFood()||(this.mode=Zf.RESOURCES,this.status=Xf.GATHERING_RESOURCES),super.build()}callback(e){e===Zf.FOOD?(this.mode=Zf.FOOD,this.progress=0,this.status=Xf.GATHERING_FOOD):e===Zf.RESOURCES&&(this.mode=Zf.RESOURCES,this.progress=0,this.status=Xf.GATHERING_RESOURCES)}getLine(e){switch(e){case Mf.FIRST:return this.mode===Zf.FOOD?Lf.buttonValue("gather resources",Zf.RESOURCES):Lf.buttonValue("gather food",Zf.FOOD);case Mf.SECOND:return Lf.textValue(this.status);case Mf.THIRD:return Lf.progressValue(this.progress);case Mf.FOURTH:return null!=this.lastFind?Lf.textValue("last find: "+Ou.prepareResourceName(this.lastFind)):Lf.emptyValue()}}tick(e){if(this.working)if(this.storage[1]>0)this.resourcesService.increaseResource(this.storage[0],this.storage[1],this.getName()),this.storage=[null,0],this.setStatus();else if(this.progress<100)this.progress+=this.getPower(),this.progress>100&&(this.progress=100);else if(100===this.progress){this.progress=0;let e=this.rollForFind();if(null!==e&&!this.resourcesService.hasLimit(e))return void(e=null);e?(this.lastFind=e,this.storage=[e,1],this.status=Xf.TRANSPORTING):(this.lastFind=su.NOTHING,this.progress=0)}}setStatus(){this.status=this.mode===Zf.FOOD?Xf.GATHERING_FOOD:Xf.GATHERING_RESOURCES}}var eS=function(e){return e.MINING_STONE="mining stone",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.NO_MORE_RESOURCES="no more resources",e.TRANSPORTING="transporting",e}({});class nS extends kf{constructor(e=null,n=-1,l=0,t=eS.MINING_STONE,i=!1,s=0,r=200,u=1){super(n,tu.QUARRY,e,po.MOUNTAINS.QUARRY,i,!0,!0,u),this.progress=l,this.status=t,this.storage=s,this.resources=r,this.servicesService&&(this.gameService=e.getGameService())}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,working:this.working,storage:this.storage,resources:this.resources}}build(){return this.startProduction(),this.gameService.enable(ou.BUILT_QUARRY),this}buildOnMountain(){return!0}getLine(e){switch(e){case Mf.FIRST:return Lf.textValue("stone: "+this.resources);case Mf.SECOND:return Lf.textValue(this.status);case Mf.THIRD:return Lf.progressValue(this.progress);case Mf.FOURTH:return Lf.emptyValue()}}isStoppable(){return this.resources>0}isUsedUp(){return this.status===eS.NO_MORE_RESOURCES}hasBuff(){return!this.isUsedUp()&&super.hasBuff()}tick(e){this.resources<=0&&(this.status!==eS.NO_MORE_RESOURCES&&this.servicesService.getLogService().warning("Quarry mined all stone"),this.status=eS.NO_MORE_RESOURCES,this.stopProduction()),this.working&&(this.storage>0?this.resourcesService.increaseResource(su.STONE,this.storage,this.getName())?(this.storage=0,this.status=eS.MINING_STONE):this.status=eS.WAITING_FOR_WAREHOUSE_SPACE:this.progress<100?(this.status=eS.MINING_STONE,this.progress+=this.getPower(),this.progress>100&&(this.progress=100)):100===this.progress&&(this.progress=0,this.resources-=1,this.storage=1,this.status=eS.TRANSPORTING))}}var lS=function(e){return e.RESEARCHING="researching",e.CRAFTING="crafting {craft}",e.WAITING_FOR_WAREHOUSE="waiting for {craft} space",e.NO_RESEARCH="nothing to research",e.NO_CRAFTING="nothing to craft",e}({}),tS=function(e){return e[e.RESEARCH=0]="RESEARCH",e[e.CRAFT=1]="CRAFT",e[e.SWITCH_TO_RESEARCH=2]="SWITCH_TO_RESEARCH",e}({});class iS extends kf{constructor(e=null,n=-1,l=0,t=lS.NO_RESEARCH,i=tS.RESEARCH,s=!1,r=-1,u=null,o=1,a=0){super(n,tu.WORKSHOP,e,po.VILLAGE.WORKSHOP,s,!0,!0,o),this.progress=l,this.status=t,this.mode=i,this.storage=a,this.recipe=null,this.icon=null,this.servicesService&&(u?this.recipe=u:r>=0&&(this.recipe=this.servicesService.getRecipeService().getRecipeById(r)),this.craftingService=e.getService(bu.CRAFTING),this.techService=e.getTechService(),this.gameService=e.getGameService())}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,mode:this.mode,working:this.working,recipeId:null!==this.recipe?this.recipe.id:-1,storage:this.storage}}build(){this.servicesService.getManagementService().getDefaultWorkshopResearch()||(this.mode=tS.CRAFT),this.startProduction();const e=this.servicesService.getLogService();return this.gameService.isEnabled(ou.RESEARCH)||(this.gameService.enable(ou.RESEARCH),e.log("Researching unlocked")),this.gameService.isEnabled(ou.CRAFTING)||(this.gameService.enable(ou.CRAFTING),e.log("Crafting unlocked")),this.craftingService.increaseCraftingQueueSize(1),this}prepareDemolish(){return this.craftingService.decreaseCraftingQueueSize(1),super.prepareDemolish()}callback(e){if("switch"===e){if(this.mode===tS.RESEARCH)this.progress=0,this.mode=tS.CRAFT,this.recipe=this.craftingService.getCraftingOrder(),this.icon=null,this.status=null!==this.recipe?lS.CRAFTING:lS.NO_CRAFTING;else if(this.mode===tS.SWITCH_TO_RESEARCH)this.mode=tS.CRAFT,this.status=null!==this.recipe?lS.CRAFTING:lS.NO_CRAFTING;else if(this.mode===tS.CRAFT)if(this.recipe){this.modalService.open(Pu.CONFIRM),this.modalService.setModalText("Workshop will switch to research after finishing current craft.");const e=this.modalService.registerForConfirmation().subscribe(n=>{e.unsubscribe(),n&&(this.mode=tS.SWITCH_TO_RESEARCH)})}else this.progress=0,this.mode=tS.RESEARCH,this.status=this.techService.isResearchStarted()?lS.RESEARCHING:lS.NO_RESEARCH}else"cancel"===e&&(this.recipe=null,this.progress=0,this.mode===tS.SWITCH_TO_RESEARCH?(this.mode=tS.RESEARCH,this.status=this.techService.isResearchStarted()?lS.RESEARCHING:lS.NO_RESEARCH):this.status=lS.NO_CRAFTING)}switchToResearch(){this.mode===tS.CRAFT&&(this.recipe?this.mode=tS.SWITCH_TO_RESEARCH:(this.progress=0,this.mode=tS.RESEARCH,this.status=this.techService.isResearchStarted()?lS.RESEARCHING:lS.NO_RESEARCH))}switchToCrafting(){this.mode===tS.RESEARCH?(this.progress=0,this.mode=tS.CRAFT,this.recipe=this.craftingService.getCraftingOrder(),this.icon=null,this.status=null!==this.recipe?lS.CRAFTING:lS.NO_CRAFTING):this.mode===tS.SWITCH_TO_RESEARCH&&(this.mode=tS.CRAFT,this.status=null!==this.recipe?lS.CRAFTING:lS.NO_CRAFTING)}getLine(e){switch(e){case Mf.FIRST:return this.firstLine();case Mf.SECOND:return this.recipe?(this.icon||(this.prepareIcon(),this.status===lS.CRAFTING?this.icon[0].prefix="crafting ":this.status===lS.WAITING_FOR_WAREHOUSE&&(this.icon[0].prefix="waiting for ",this.icon[0].suffix=" space")),Lf.iconValue(this.icon)):Lf.textValue(this.status.replace("{craft}","warehouse"));case Mf.THIRD:if(this.recipe)return Lf.buttonValue("cancel crafting","cancel");{let e="";return this.techService.getCurrentResearch()&&(e=Ou.prepareTechName(this.techService.getCurrentResearch().getTech())),Lf.textValue(e)}case Mf.FOURTH:return Lf.progressValue(this.progress)}}firstLine(){return Lf.buttonValue(this.mode===tS.RESEARCH||this.mode===tS.SWITCH_TO_RESEARCH?"craft":"research","switch")}tick(e){if(this.working)if(this.mode===tS.RESEARCH)this.techService.isResearchStarted()?(this.status!==lS.RESEARCHING&&(this.progress=0),this.status=lS.RESEARCHING,this.progress+=this.getPower(),this.progress>=100&&(this.progress=0,this.techService.progressTech(po.VILLAGE.WORKSHOP.RESEARCH_POWER))):(this.status=lS.NO_RESEARCH,this.progress=0);else if(this.mode===tS.CRAFT||this.mode===tS.SWITCH_TO_RESEARCH)if(null===this.recipe&&(this.recipe=this.craftingService.getCraftingOrder(),this.icon=null,this.progress=0),null===this.recipe)this.status=lS.NO_CRAFTING;else if(this.status===lS.WAITING_FOR_WAREHOUSE){const e=this.resourcesService.getLimit(this.recipe.resource);this.storage>e?(this.storage-=e,this.resourcesService.increaseResource(this.recipe.resource,e,this.getName())):(this.resourcesService.increaseResource(this.recipe.resource,this.storage,this.getName()),this.status=lS.CRAFTING,this.progress=0,this.recipe=null)}else if(this.status=lS.CRAFTING,this.progress<100&&(this.progress+=this.getPower()/this.recipe.craftingDifficulty*po.VILLAGE.WORKSHOP.CRAFTING_POWER),this.progress>=100){this.progress=100,this.storage=this.recipe.amount;const e=this.resourcesService.getLimit(this.recipe.resource);this.storage>e?(this.storage-=e,this.resourcesService.increaseResource(this.recipe.resource,e,this.getName()),this.status=lS.WAITING_FOR_WAREHOUSE,this.icon=null):this.resourcesService.increaseResource(this.recipe.resource,this.storage,this.getName())?(this.progress=0,this.storage=0,this.recipe=null,this.mode===tS.SWITCH_TO_RESEARCH&&(this.mode=tS.RESEARCH,this.status=this.techService.isResearchStarted()?lS.RESEARCHING:lS.NO_RESEARCH)):(this.status=lS.WAITING_FOR_WAREHOUSE,this.icon=null)}}getRecipe(){return this.recipe}cancelCrafting(){this.recipe=null}willResearch(){return this.mode===tS.RESEARCH||this.mode===tS.SWITCH_TO_RESEARCH}prepareIcon(){this.recipe&&(this.icon=[{name:Ou.prepareResourceName(this.recipe.resource),path:"resources",prefix:"",suffix:""}])}}class sS extends kf{constructor(e=null,n=-1,l=du.NONE,t=50,i=1){super(n,tu.WAREHOUSE,e,po.VILLAGE.WAREHOUSE,!1,!0,!1,i),this.resource=l,this.storage=t,this.servicesService&&(this.modalService=e.getModalService())}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,resource:this.resource,storage:this.storage}}callback(e){if(this.resource===du.NONE)this.resource=du[String(e.target.value)],this.resourcesService.increaseLimit(this.resource,this.storage);else{this.modalService.open(Pu.CONFIRM),this.modalService.setModalText("Are you sure you want to switch warehouse storage type?<br>All excess resources will be lost");const n=this.modalService.registerForConfirmation().subscribe(l=>{l?(this.resourcesService.decreaseLimit(this.resource,this.storage),this.resource=du[String(e.target.value)],this.resourcesService.increaseLimit(this.resource,this.storage)):e.target.selectedIndex=this.resource-1,n.unsubscribe()})}}getComplexity(){return super.getComplexity()*(this.storage/this.settings.SIZE)}getSize(){return this.storage}getLine(e){switch(e){case Mf.FIRST:return this.firstLine();case Mf.SECOND:return Lf.textValue("storage: "+this.storage);case Mf.THIRD:case Mf.FOURTH:return Lf.emptyValue()}}firstLine(){const e=[];return e.push(du[du.NONE]),e.push(du[du.RAW]),e.push(du[du.PROCESSED]),e.push(du[du.FOOD]),e.push(du[du.TOOLS]),Lf.dropdownValue(e,du[this.resource])}prepareDemolish(){return this.resourcesService.decreaseLimit(this.resource,this.storage),!0}startProduction(){return!1}stopProduction(){}fireWorker(){return!1}hireWorker(){return!1}getWorkers(){return 0}getHappinessEffect(){return 0}isCombinable(){return!0}isSplittable(){return!0}combine(e,n){if(this.getBuildingType()===e.getBuildingType())if(this.isCompatible(e))this.doCombine(e,n);else{this.modalService.open(Pu.CONFIRM),this.modalService.setModalText(" Are you sure you want to combine "+this.getName()+" of size "+this.getSize()+" with "+e.getName()+" of size "+e.getSize()+"?<br>Resulting "+this.getName()+" of size "+(this.getSize()+e.getSize())+" will store <b>"+Ou.prepareResourceTypeName(this.resource)+" resources</b><br>All resources exceeding decreased limit of <b>"+Ou.prepareResourceTypeName(e.resource)+"</b> will be lost");const l=this.modalService.registerForConfirmation().subscribe(t=>{l.unsubscribe(),t?this.doCombine(e,n):n.finaliseCombine(!1)})}}doCombine(e,n){this.storage+=e.getSize(),this.resource!==du.NONE&&this.resourcesService.increaseLimit(this.resource,e.getSize()),n.finaliseCombine(!0)}split(e){this.modalService.open(Pu.INPUT),this.modalService.setModalText("Set split size (1-"+(this.getSize()-1)+")"),this.modalService.setModalValue("");const n=this.modalService.registerForValueResponse().subscribe(l=>{n.unsubscribe(),null!==l&&(isNaN(l)||0===l||(l>=1&&l<this.getSize()?(this.storage-=Number(l),e.finaliseSplit(new sS(this.servicesService,this.servicesService.getIdService().getNextId(),this.resource,Number(l)).build())):this.modalService.info("Invalid size value!")))})}isCompatible(e){return this.resource===e.resource}}var rS=function(e){return e.HUNTING="hunting",e.TAME="taming animals",e.WAITING_FOR_PASTURE_SPACE="waiting for pasture space",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.TRANSPORTING="transporting",e}({}),uS=function(e){return e[e.HUNTING=0]="HUNTING",e[e.TAMING=1]="TAMING",e}({});class oS extends kf{constructor(e=null,n=-1,l=0,t=rS.HUNTING,i=uS.HUNTING,s=!1,r=0,u=0,o=null,a=1){super(n,tu.HUNTER_LODGE,e,po.FOREST.HUNTER_LODGE,s,!0,!0,a),this.progress=l,this.status=t,this.mode=i,this.storage=r,this.storage2=u,this.animal=o,this.lastFind=null,this.servicesService&&(this.weatherService=e.getWeatherService(),this.gameService=e.getGameService())}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,mode:this.mode,working:this.working,storage:this.storage,storage2:this.storage2,animal:this.animal}}callback(e){"tame"===e?(this.mode=uS.TAMING,this.progress=0,this.storage=0,this.storage2=0,this.status=rS.TAME):(this.mode=uS.HUNTING,this.progress=0,this.storage=0,this.storage2=0,this.lastFind=null,this.status=rS.HUNTING)}getLine(e){switch(e){case Mf.FIRST:return this.gameService.isEnabled(ou.PASTURE)?this.mode===uS.HUNTING?Lf.buttonValue("tame animals","tame"):Lf.buttonValue("hunt","hunt"):Lf.emptyValue();case Mf.SECOND:return Lf.textValue(this.status);case Mf.THIRD:return Lf.progressValue(this.progress);case Mf.FOURTH:return null!==this.lastFind?Lf.textValue("last tamed: "+Ou.prepareResourceName(this.lastFind)):Lf.emptyValue()}}tick(e){if(this.working)if(this.mode===uS.HUNTING)this.status=0!==this.storage&&0!==this.storage2?rS.TRANSPORTING:rS.HUNTING,this.status===rS.HUNTING?this.progress<100&&(this.progress+=this.getPower(),this.progress>=100&&(this.progress=0,this.storage<5&&(this.storage+=Nu.randomBetween(1,3),this.storage>5&&(this.storage=5)),this.storage2<5&&(this.storage2+=Nu.randomBetween(0,2),this.storage2>5&&(this.storage2=5)),this.status=rS.TRANSPORTING)):this.status!==rS.TRANSPORTING&&this.status!==rS.WAITING_FOR_WAREHOUSE_SPACE||(0!==this.storage&&this.resourcesService.increaseResource(su.MEAT,this.storage,this.getName())&&(this.storage=0),0!==this.storage2&&this.resourcesService.increaseResource(su.FUR,this.storage2,this.getName())&&(this.storage2=0),0!==this.storage&&0!==this.storage2&&(this.status=rS.WAITING_FOR_WAREHOUSE_SPACE));else if(this.mode===uS.TAMING)if(this.status===rS.TAME){if(this.progress<100&&(this.progress+=this.getPower(),this.progress>=100)){this.progress=0;const e=[];this.resourcesService.hasLimit(su.CHICKEN)&&e.push({item:su.CHICKEN,chance:6}),this.resourcesService.hasLimit(su.SHEEP)&&e.push({item:su.SHEEP,chance:5}),this.resourcesService.hasLimit(su.PIG)&&e.push({item:su.PIG,chance:5}),this.resourcesService.hasLimit(su.COW)&&e.push({item:su.COW,chance:4}),this.resourcesService.hasLimit(su.HORSE)&&e.push({item:su.HORSE,chance:3}),0!==e.length||this.servicesService.getManagementService().getSwitchHunterFromTaming()||(this.logService.log("No more space for animals. Hunter switched to hunting"),this.callback("hunt"));const n=Nu.randomElement(e);null!=n?(this.lastFind=n,this.animal=n,this.status=rS.TRANSPORTING):(this.lastFind=su.NOTHING,this.animal=null)}}else this.status!==rS.TRANSPORTING&&this.status!==rS.WAITING_FOR_PASTURE_SPACE||this.animal&&(this.resourcesService.increaseResource(this.animal,1,this.getName())?(this.animal=null,this.status=rS.TAME):this.status=rS.WAITING_FOR_PASTURE_SPACE)}}class aS extends kf{constructor(e=null,n=-1,l=0,t=1){super(n,tu.SHRINE,e,po.VILLAGE.SHRINE,!1,!0,!1,t),this.progress=l,this.servicesService&&(this.religionService=e.getService(bu.RELIGION))}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress}}build(){return this.religionService.increaseFaithCap(10),this.servicesService.getGameService().enable(ou.RELIGION),this}getLine(e){switch(e){case Mf.FIRST:case Mf.SECOND:return Lf.emptyValue();case Mf.THIRD:return Lf.progressValue(this.progress,"prayers");case Mf.FOURTH:return Lf.emptyValue()}}prepareDemolish(){return this.religionService.decreaseFaithCap(10),!0}startProduction(){return!0}stopProduction(){}tick(e){const n=this.servicesService.getVillageService().getPopulation();this.progress+=.01*(Math.pow(Math.log(n),2)+1)*this.getPower(),this.progress>100&&(this.progress=0,this.religionService.increaseFaith(1))}fireWorker(){return!1}hireWorker(){return!1}getWorkers(){return 0}}var cS=function(e){return e.WORKING="working",e.BAD_WEATHER="bad weather",e.STOPPED="stopped",e}({});class hS extends kf{constructor(e=null,n=-1,l=0,t=4,i=1,s=cS.WORKING,r=null){super(n,tu.FARM,e,po.FIELD.FARM,l>0,!0,!0,i),this.workers=l,this.maxWorkers=t,this.status=s,this.workSettings=r,this.servicesService&&(this.weatherService=e.getWeatherService(),this.calendarService=e.getCalendarService(),this.managementService=e.getManagementService(),this.fieldService=e.getServiceByRegion(Eu.FIELD),null===r&&(this.workSettings=new $f(!0,this.getBuildingType(),[!0,!0,!0,!0],null,null)))}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,workers:this.workers,maxWorkers:this.maxWorkers,workSettings:this.workSettings}}callback(e){"hire"===e&&this.workers<this.maxWorkers&&this.resourcesService.hireWorker()?this.workers+=1:"fire"===e&&this.workers>0&&(this.resourcesService.fireWorker(),this.workers-=1)}getLine(e){switch(e){case Mf.FIRST:return Lf.textValue("workers: "+this.workers+"/"+this.maxWorkers);case Mf.SECOND:return Lf.textValue(this.status);case Mf.THIRD:return Lf.twoButtonValue("hire worker","hire","","fire worker","fire");case Mf.FOURTH:return Lf.emptyValue()}}isWorking(){return this.workers>0}startProduction(){if(0===this.workers){for(;this.workers<this.maxWorkers&&this.resourcesService.hireWorker();)this.workers+=1;if(this.workers>0)return!0}return!1}stopProduction(){this.workers>0&&(this.resourcesService.fireWorker(this.workers),this.workers=0)}isMet(){let e=!0;return this.workSettings.seasons[this.calendarService.getSeason()]||e&&(e=!1),e}tick(e){if(this.managementService.getComplexWorkers()&&this.workSettings&&this.workSettings.enabled&&(this.isMet()?this.workers<this.maxWorkers&&this.hireWorker():this.isWorking()&&this.stopProduction()),this.workers>0)if(this.weatherService.isWeather(Tu.RAIN,Tu.STORM))if(this.weatherService.isWeather(Tu.STORM))this.status=cS.BAD_WEATHER;else{this.status=cS.WORKING;let e=this.workers;for(;e>0;){const n=this.fieldService.getBuildings().filter(e=>e.getBuildingType()===tu.PASTURE&&e.hasWork());if(0===n.length){this.status=cS.BAD_WEATHER;break}n.forEach(n=>{e>0&&n.work(this.getPower())&&(e-=1)})}}else{this.status=cS.WORKING;let e=this.workers;for(;e>0;){const n=this.fieldService.getBuildings().filter(e=>(e.getBuildingType()===tu.FIELD||e.getBuildingType()===tu.ORCHARD||e.getBuildingType()===tu.PASTURE)&&e.hasWork());if(0===n.length)break;n.forEach(n=>{e>0&&n.work(this.getPower())&&(e-=1)})}}else this.status=cS.STOPPED}fireWorker(){return this.workers>0&&(this.resourcesService.fireWorker(1),this.workers-=1,!0)}hireWorker(){return!!(this.workers<this.maxWorkers&&this.resourcesService.hireWorker())&&(this.workers+=1,!0)}getWorkers(){return this.workers}setBuildingLevel(e){super.setBuildingLevel(e),this.maxWorkers=2+2*e}isComplexManagement(){return!0}getWorkSettings(){return this.workSettings}setWorkSettings(e){this.workSettings=e}}var dS=function(e){return e.PLOW_FIELD="plowing {crop} field",e.SOWING="sowing {crop}",e.GROWING="{crop} growing",e.HARVEST="harvesting {crop}",e.FALLOW="fallow",e}({});class gS extends kf{constructor(e=null,n=-1,l=po.FIELD.FIELD.SIZE,t=hu.NONE,i=dS.FALLOW,s=0,r=!0,u=0,o=1){super(n,tu.FIELD,e,po.FIELD.FIELD,r,!0,!0,o),this.currentSize=l,this.crop=t,this.status=i,this.progress=s,this.growth=u,this.servicesService&&(this.gameService=e.getGameService(),this.modalService=e.getModalService(),this.weatherService=e.getWeatherService(),this.calendarService=e.getCalendarService())}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,size:this.currentSize,crop:this.crop,status:this.status,progress:this.progress,working:this.working,growth:this.growth}}getSize(){return this.currentSize}getComplexity(){return super.getComplexity()*(this.getSize()/this.settings.SIZE)}callback(e){if(this.crop===hu.NONE||this.status===dS.FALLOW)this.crop=hu[String(e.target.value)],this.status=dS.FALLOW,this.progress=0;else{this.modalService.open(Pu.CONFIRM),this.modalService.setModalText("Are you sure you want to switch field crop type?<br>All field progress will be lost");const n=this.modalService.registerForConfirmation().subscribe(l=>{l?(this.crop=hu[String(e.target.value)],this.status=dS.FALLOW,this.progress=0):e.target.selectedIndex=this.crop,n.unsubscribe()})}}finishDemolish(){}getLine(e){switch(e){case Mf.FIRST:return Lf.textValue("size: "+this.getSize());case Mf.SECOND:const e=[];return e.push(hu[hu.NONE]),Object.entries(Object(So.FIELD)).forEach(n=>{So.getCrop(hu[n[0]]).PREREQUISITE?this.gameService.isEnabled(So.getCrop(hu[n[0]]).PREREQUISITE)&&e.push(n[0]):e.push(n[0])}),Lf.dropdownValue(e,hu[this.crop]);case Mf.THIRD:return Lf.textValue(this.status.replace("{crop}",hu[this.crop].toLowerCase()));case Mf.FOURTH:return this.status===dS.HARVEST?Lf.progressValue(Math.floor(this.growth/(So.getCrop(this.crop).YIELD_MULTIPLIER*this.getSize())*100),"harvest: "+this.growth):Lf.progressValue(this.progress)}}getName(){return this.crop===hu.NONE?"Field":hu[this.crop].charAt(0).toUpperCase()+hu[this.crop].slice(1).toLowerCase()+" field"}startProduction(){return this.working=!0,!0}stopProduction(){this.working=!1}tick(e){if(this.calendarService.getSeason()===Pp.WINTER&&(this.status=dS.FALLOW,this.growth=0,this.progress=0),this.status===dS.GROWING)if(this.calendarService.getSeason()===Pp.AUTUMN)this.status=dS.HARVEST,this.growth=Math.floor(this.progress*So.getCrop(this.crop).YIELD_MULTIPLIER*this.getSize()/100),this.progress=0;else if(this.progress<100){let e=this.getPower()*(1+this.effectsService.getNatureEffectsValue()/100)/So.getCrop(this.crop).GROWTH;this.weatherService.getCurrentTemperature()<=5?e*=0:this.weatherService.getCurrentTemperature()<=10?e*=.2:this.weatherService.getCurrentTemperature()<=15?e*=.5:this.weatherService.getCurrentTemperature()<=20?e*=.8:this.weatherService.getCurrentTemperature()<=25?e*=1:this.weatherService.getCurrentTemperature()<=27?e*=.8:this.weatherService.getCurrentTemperature()<=29?e*=.6:this.weatherService.getCurrentTemperature()<=31?e*=.4:this.weatherService.getCurrentTemperature()<=33?e*=.2:this.weatherService.getCurrentTemperature()<=35&&(e*=0),this.progress+=e,this.progress>100&&(this.progress=100)}else 100===this.progress&&(this.growth=this.getSize()*So.getCrop(this.crop).YIELD_MULTIPLIER,this.progress=0,this.status=dS.HARVEST)}work(e){if(this.isWorking()&&this.status!==dS.GROWING&&this.crop!==hu.NONE){if(this.status===dS.FALLOW&&this.calendarService.getSeason()===Pp.SPRING)return this.status=dS.PLOW_FIELD,!0;if(this.status===dS.PLOW_FIELD&&(this.calendarService.getSeason()===Pp.SPRING||this.calendarService.getSeason()===Pp.SUMMER&&this.servicesService.getManagementService().getPlowInSummer()))return this.progress<100&&(this.progress+=e/this.getSize(),this.progress>=100&&(this.progress=0,this.status=dS.SOWING)),!0;if(this.status===dS.SOWING&&(this.calendarService.getSeason()===Pp.SPRING||this.calendarService.getSeason()===Pp.SUMMER))return this.progress+=e/this.getSize(),this.progress>=100&&(this.progress=0,this.status=dS.GROWING),!0;if(this.status===dS.HARVEST){const e=su[hu[this.crop]];if(this.resourcesService.hasLimit(e))return this.resourcesService.increaseResource(e,1,this.getName()),this.growth-=1,this.growth<=0&&(this.status=dS.FALLOW),!0}}return!1}fireWorker(){return!1}hireWorker(){return!1}getWorkers(){return 0}hasWork(){return this.isWorking()&&this.status!==dS.GROWING&&this.crop!==hu.NONE&&(this.status===dS.FALLOW&&this.calendarService.getSeason()===Pp.SPRING||this.status===dS.PLOW_FIELD&&(this.calendarService.getSeason()===Pp.SPRING||this.calendarService.getSeason()===Pp.SUMMER&&this.servicesService.getManagementService().getPlowInSummer())||this.status===dS.SOWING&&(this.calendarService.getSeason()===Pp.SPRING||this.calendarService.getSeason()===Pp.SUMMER)||this.status===dS.HARVEST&&this.resourcesService.hasLimit(su[hu[this.crop]]))}getDetails(){return this.crop!==hu.NONE?"growing difficulty: "+So.getCrop(this.crop).GROWTH+"<br>yield multiplier: "+So.getCrop(this.crop).YIELD_MULTIPLIER+"<br>"+super.getDetails():super.getDetails()}getHappinessEffect(){return 0}isCombinable(){return!0}isSplittable(){return!0}combine(e,n){if(this.getBuildingType()===e.getBuildingType())if(this.isCompatible(e))this.doCombine(e,n);else{let l;if(this.modalService.open(Pu.CONFIRM),this.crop===e.crop?(this.modalService.setModalText(" Are you sure you want to combine "+this.getName()+" of size "+this.getSize()+" with "+e.getName()+" of size "+e.getSize()+"?<br>Resulting "+this.getName()+" of size "+(this.getSize()+e.getSize())+" will be changed to fallow if both are in different stages"),l=!0):(this.modalService.setModalText(" Are you sure you want to combine "+this.getName()+" of size "+this.getSize()+" with "+e.getName()+" of size "+e.getSize()+"?<br>Resulting "+this.getName()+" of size "+(this.getSize()+e.getSize())+" will be changed to fallow"),l=!0),l){const l=this.modalService.registerForConfirmation().subscribe(t=>{l.unsubscribe(),t?this.doCombine(e,n):n.finaliseCombine(!1)})}}}doCombine(e,n){if(this.crop===e.crop)if(this.status===e.status)if(this.status===dS.HARVEST)this.growth+=e.growth;else{let n=this.progress*this.getSize();n+=e.progress*e.getSize(),this.progress=n/(this.getSize()+e.getSize())}else this.status=dS.FALLOW,this.progress=0,this.growth=0;else this.status=dS.FALLOW,this.progress=0,this.growth=0;this.currentSize+=e.getSize(),n.finaliseCombine(!0)}split(e){this.modalService.open(Pu.INPUT),this.modalService.setModalText("Set split size (1-"+(this.getSize()-1)+")"),this.modalService.setModalValue("");const n=this.modalService.registerForValueResponse().subscribe(l=>{if(n.unsubscribe(),null!==l&&!isNaN(l)&&0!==l)if(l>=1&&l<this.getSize()){const n=Math.floor(this.growth*l/this.currentSize);this.growth-=n,this.currentSize-=Number(l),e.finaliseSplit(new gS(this.servicesService,this.servicesService.getIdService().getNextId(),Number(l),this.crop,this.status,this.progress,!0,n,this.level).build())}else this.modalService.info("Invalid size value!")})}isCompatible(e){return this.crop===e.crop&&this.status===e.status}}var pS=function(e){return e.FALLOW="fallow",e.PLANTING="planting {crop}",e.GROWING="{crop} growing",e.FRUITING="{crop} fruiting",e.HARVEST="picking {crop}",e.NO_FRUITS="no fruits",e.CLEAR="clear old plants",e}({});class mS extends kf{constructor(e=null,n=-1,l=po.FIELD.ORCHARD.SIZE,t=hu.NONE,i=pS.FALLOW,s=0,r=!0,u=0,o=1){super(n,tu.ORCHARD,e,po.FIELD.ORCHARD,r,!0,!0,o),this.currentSize=l,this.crop=t,this.status=i,this.progress=s,this.growth=u,this.servicesService&&(this.modalService=e.getModalService(),this.weatherService=e.getWeatherService(),this.calendarService=e.getCalendarService(),this.royalService=e.getRoyalService())}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,size:this.currentSize,crop:this.crop,status:this.status,progress:this.progress,working:this.working,growth:this.growth}}getSize(){return this.currentSize}getComplexity(){return super.getComplexity()*(this.getSize()/this.settings.SIZE)}callback(e){if(this.crop===hu.NONE||this.status===pS.FALLOW)this.crop=hu[String(e.target.value)],this.status=pS.FALLOW,this.progress=0;else{this.modalService.open(Pu.CONFIRM),this.modalService.setModalText("Are you sure you want to switch orchard plant type?<br>All orchard progress will be lost");const n=this.modalService.registerForConfirmation().subscribe(l=>{n.unsubscribe(),l?(this.crop=hu[String(e.target.value)],this.status=this.status===pS.FALLOW||this.status===pS.PLANTING?pS.FALLOW:pS.CLEAR,this.progress=0):e.target.selectedIndex=this.prepareParams().indexOf(hu[this.crop])})}}prepareParams(){const e=[];return e.push(hu[hu.NONE]),Object.entries(Object(So.ORCHARD)).forEach(n=>{So.getCrop(hu[n[0]]).PREREQUISITE?this.gameService.isEnabled(So.getCrop(hu[n[0]]).PREREQUISITE)&&e.push(n[0]):e.push(n[0])}),e}finishDemolish(){}getLine(e){switch(e){case Mf.FIRST:return Lf.textValue("size: "+this.getSize());case Mf.SECOND:return Lf.dropdownValue(this.prepareParams(),hu[this.crop]);case Mf.THIRD:return Lf.textValue(this.status.replace("{crop}",hu[this.crop].toLowerCase()));case Mf.FOURTH:return this.status===pS.HARVEST?Lf.progressValue(Math.floor(this.growth/(So.getCrop(this.crop).YIELD_MULTIPLIER*this.getSize())*100),"harvest: "+this.growth):this.status===pS.NO_FRUITS?Lf.emptyValue():Lf.progressValue(this.progress)}}getName(){return this.crop===hu.NONE?"Orchard":hu[this.crop].charAt(0).toUpperCase()+hu[this.crop].slice(1).toLowerCase()+" orchard"}startProduction(){return this.working=!0,!0}stopProduction(){this.working=!1}tick(e){if(this.crop!==hu.NONE){if(this.status!==pS.FALLOW&&this.status!==pS.CLEAR&&this.calendarService.getSeason()===Pp.WINTER){if(this.status===pS.GROWING)return;this.status=pS.NO_FRUITS,this.growth=0,this.progress=0}else this.status!==pS.NO_FRUITS||this.calendarService.getSeason()!==Pp.SPRING&&this.calendarService.getSeason()!==Pp.SUMMER||(this.status=pS.FRUITING);if(this.status===pS.GROWING||this.status===pS.FRUITING)if(this.calendarService.getSeason()===Pp.AUTUMN&&this.status===pS.FRUITING)this.status=pS.HARVEST,this.growth=Math.floor(this.progress*So.getCrop(this.crop).YIELD_MULTIPLIER*this.getSize()/100),this.progress=0;else if(this.progress<100){let e=this.getPower()*(1+this.effectsService.getNatureEffectsValue()/100);this.status===pS.GROWING?e/=So.getCrop(this.crop).GROWTH:this.status===pS.FRUITING&&(e/=So.getCrop(this.crop).FRUITING),this.weatherService.getCurrentTemperature()<=5?e*=0:this.weatherService.getCurrentTemperature()<=10?e*=.2:this.weatherService.getCurrentTemperature()<=15?e*=.5:this.weatherService.getCurrentTemperature()<=20?e*=.8:this.weatherService.getCurrentTemperature()<=25?e*=1:this.weatherService.getCurrentTemperature()<=27?e*=.8:this.weatherService.getCurrentTemperature()<=29?e*=.6:this.weatherService.getCurrentTemperature()<=31?e*=.4:this.weatherService.getCurrentTemperature()<=33?e*=.2:this.weatherService.getCurrentTemperature()<=35&&(e*=0),this.progress+=e,this.progress>100&&(this.progress=100)}else 100===this.progress&&(this.status===pS.GROWING?this.status=pS.FRUITING:this.status===pS.FRUITING&&(this.growth=So.getCrop(this.crop).YIELD_MULTIPLIER*this.getSize(),this.status=pS.HARVEST),this.progress=0)}}work(e){if(this.isWorking()&&this.status!==pS.GROWING&&this.crop!==hu.NONE)if(this.status===pS.FALLOW){if(this.calendarService.getSeason()===Pp.SPRING)return this.status=pS.PLANTING,!0}else{if(this.status===pS.PLANTING)return this.progress<100&&(this.progress+=e/this.getSize(),this.progress>=100&&(this.progress=0,this.status=pS.GROWING)),!0;if(this.status===pS.HARVEST){const e=su[hu[this.crop]];if(this.resourcesService.hasLimit(e))return e===su.APPLE&&this.royalService.pickGoldenApple()||(this.resourcesService.increaseResource(e,1,this.getName()),this.growth-=1,this.growth<=0&&(this.status=pS.NO_FRUITS)),!0}else if(this.status===pS.CLEAR)return this.progress<100&&(this.progress+=e/this.getSize(),this.progress>=100&&(this.progress=0,this.status=pS.FALLOW)),!0}return!1}fireWorker(){return!1}hireWorker(){return!1}getWorkers(){return 0}hasWork(){return this.isWorking()&&this.status!==pS.GROWING&&this.crop!==hu.NONE&&(this.status===pS.FALLOW&&this.calendarService.getSeason()===Pp.SPRING||this.status===pS.PLANTING||this.status===pS.CLEAR||this.status===pS.HARVEST&&this.resourcesService.hasLimit(su[hu[this.crop]]))}getDetails(){return this.crop!==hu.NONE?"growing difficulty: "+So.getCrop(this.crop).GROWTH+"<br>fruiting difficulty: "+So.getCrop(this.crop).FRUITING+"<br>yield multiplier: "+So.getCrop(this.crop).YIELD_MULTIPLIER+"<br>"+super.getDetails():super.getDetails()}getHappinessEffect(){return 0}isCombinable(){return!0}isSplittable(){return!0}combine(e,n){if(this.getBuildingType()===e.getBuildingType())if(this.isCompatible(e))this.doCombine(e,n);else{let l;if(this.modalService.open(Pu.CONFIRM),this.crop===e.crop?(this.modalService.setModalText(" Are you sure you want to combine "+this.getName()+" of size "+this.getSize()+" with "+e.getName()+" of size "+e.getSize()+"?<br>Resulting "+this.getName()+" of size "+(this.getSize()+e.getSize())+" will be changed to fallow if both are in different stages"),l=!0):(this.modalService.setModalText(" Are you sure you want to combine "+this.getName()+" of size "+this.getSize()+" with "+e.getName()+" of size "+e.getSize()+"?<br>Resulting "+this.getName()+" of size "+(this.getSize()+e.getSize())+" will be changed to fallow"),l=!0),l){const l=this.modalService.registerForConfirmation().subscribe(t=>{l.unsubscribe(),t?this.doCombine(e,n):n.finaliseCombine(!1)})}}}doCombine(e,n){if(this.crop===e.crop)if(this.status===e.status)if(this.status===pS.HARVEST)this.growth+=e.growth;else{let n=this.progress*this.getSize();n+=e.progress*e.getSize(),this.progress=n/(this.getSize()+e.getSize())}else this.status=pS.FALLOW,this.progress=0,this.growth=0;else this.status=pS.FALLOW,this.progress=0,this.growth=0;this.currentSize+=e.getSize(),n.finaliseCombine(!0)}split(e){this.modalService.open(Pu.INPUT),this.modalService.setModalText("Set split size (1-"+(this.getSize()-1)+")"),this.modalService.setModalValue("");const n=this.modalService.registerForValueResponse().subscribe(l=>{if(n.unsubscribe(),null!==l&&!isNaN(l)&&0!==l)if(l>=1&&l<this.getSize()){const n=Math.floor(this.growth*l/this.currentSize);this.growth-=n,this.currentSize-=Number(l),e.finaliseSplit(new mS(this.servicesService,this.servicesService.getIdService().getNextId(),Number(l),this.crop,this.status,this.progress,!0,n,this.level).build())}else this.modalService.info("Invalid size value!")})}isCompatible(e){return this.crop===e.crop&&this.status===e.status}}class fS extends jf{constructor(e=null,n=-1,l=0,t=Kf.FETCHING_INPUT,i=[],s=[],r=!1,u=null,o=1){super(e,n,tu.WINDMILL,po.FIELD.WINDMILL,t,l,i,s,r,u,o)}}class SS extends jf{constructor(e=null,n=-1,l=0,t=Kf.FETCHING_INPUT,i=[],s=[],r=!1,u=null,o=1){super(e,n,tu.BAKERY,po.VILLAGE.BAKERY,t,l,i,s,r,u,o)}}var ES=function(e){return e.FISHING="fishing",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.TRANSPORTING_FISH="transporting fish",e}({});class vS extends kf{constructor(e=null,n=-1,l=0,t=ES.FISHING,i=!1,s=1){super(n,tu.FISHERS_HUT,e,po.SEA.FISHERS_HUT,i,!0,!0,s),this.progress=l,this.status=t,this.status!==ES.FISHING&&this.status!==ES.WAITING_FOR_WAREHOUSE_SPACE&&this.status!==ES.TRANSPORTING_FISH&&(this.status=ES.FISHING)}getLine(e){switch(e){case Mf.FIRST:return Lf.textValue(this.status);case Mf.SECOND:return Lf.progressValue(this.progress);case Mf.THIRD:case Mf.FOURTH:return Lf.emptyValue()}}tick(){if(this.working)if(this.status===ES.FISHING){if(this.progress<100&&(this.progress+=this.getPower(),this.progress>=100)){if(this.progress=0,this.servicesService.getRoyalService().catchGoldenFish())return;this.status=ES.TRANSPORTING_FISH}}else if(this.status===ES.TRANSPORTING_FISH||this.status===ES.WAITING_FOR_WAREHOUSE_SPACE){const e=this.resourcesService.increaseResource(su.FISH,1,this.getName());this.status=e?ES.FISHING:ES.WAITING_FOR_WAREHOUSE_SPACE}}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,working:this.working}}}class RS extends kf{constructor(e=null,n=-1,l=po.FORT.BARRACKS.SIZE,t=1){super(n,tu.BARRACKS,e,po.FORT.BARRACKS,!1,!0,!1,t),this.barracksSize=l,this.servicesService&&(this.armyService=e.getArmyService(),this.modalService=e.getModalService())}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,barracksSize:this.barracksSize}}build(){return this.servicesService.getGameService().isEnabled(ou.ARMY)||this.servicesService.getGameService().enable(ou.ARMY),this.armyService.increaseBarracks(this.barracksSize),this}prepareDemolish(){return this.armyService.getFreeBarracks()>=this.barracksSize?(this.armyService.decreaseBarracks(this.barracksSize),!0):(this.modalService.info("Your troops would have nowhere to sleep!<br>You cannot demolish barracks right now!"),!1)}getLine(e){switch(e){case Mf.FIRST:return Lf.textValue("capacity: "+this.barracksSize);case Mf.SECOND:case Mf.THIRD:case Mf.FOURTH:return Lf.emptyValue()}}getHappinessEffect(){return 0}getEffects(){return 0}getPermanentEffects(){return 0}}var OS=function(e){return e.TRAINING="training",e.NO_RECRUITS="no recruits",e}({});class TS extends kf{constructor(e=null,n=-1,l=0,t=!1,i=OS.NO_RECRUITS,s=1,r=null){super(n,tu.TRAINING_SQUARE,e,po.FORT.TRAINING_SQUARE,t,!0,!0,s),this.progress=l,this.status=i,this.workSettings=r,this.servicesService&&(this.armyService=e.getArmyService(),this.managementService=e.getManagementService(),this.calendarService=e.getCalendarService(),null===this.workSettings)&&(this.workSettings=new $f(!0,this.buildingType,[!0,!0,!0,!0],null,null,!0,!0,"work when there are troops to train"))}customWorkRule(){return this.armyService.hasRecruits()}getWorkSettings(){return this.workSettings}setWorkSettings(e){this.workSettings=e}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,working:this.working,workSettings:this.workSettings}}getLine(e){switch(e){case Mf.FIRST:return Lf.emptyValue();case Mf.SECOND:return Lf.textValue(this.status);case Mf.THIRD:return this.status===OS.TRAINING?Lf.progressValue(this.progress):Lf.emptyValue();case Mf.FOURTH:return Lf.emptyValue()}}tick(e){this.managementService.getComplexWorkers()&&this.workSettings&&this.workSettings.enabled&&(this.isMet()?this.isWorking()||this.hireWorker():!this.isWorking()||this.status===OS.TRAINING&&0!==this.progress||this.fireWorker()),this.working&&(this.armyService.hasRecruits()?(this.status=OS.TRAINING,this.progress<100&&(this.progress+=this.getPower()),this.progress>=100&&(this.progress=0,this.armyService.progressRecruitment(1))):(this.status=OS.NO_RECRUITS,this.progress=0))}isMet(){let e=!0;return this.workSettings.seasons[this.calendarService.getSeason()]||e&&(e=!1),this.workSettings.customRuleEnabled&&e&&(e=this.customWorkRule()),e}isComplexManagement(){return!0}}class CS extends jf{constructor(e=null,n=-1,l=0,t=Kf.FETCHING_INPUT,i=[],s=[],r=!1,u=null,o=1){super(e,n,tu.TANNERY,po.FOREST.TANNERY,t,l,i,s,r,u,o)}}class IS extends kf{constructor(e=null,n=-1,l=po.FORT.STOCKADE.DURABILITY,t=po.FORT.STOCKADE.DURABILITY,i=0,s=!1,r=1){super(n,tu.STOCKADE,e,po.FORT.STOCKADE,s,!0,!1,r),this.health=l,this.durability=t,this.progress=i,this.servicesService&&(this.armyService=e.getArmyService(),this.modalService=e.getModalService(),this.worldService=e.getWorldService())}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,health:this.health,durability:this.durability,progress:this.progress,working:this.working}}build(){return this.worldService.getRegion(0).defense+=po.FORT.STOCKADE.DEFENSE,this}prepareDemolish(){return this.worldService.getRegion(0).defense-=po.FORT.STOCKADE.DEFENSE,!0}callback(e){if("repair"===e){this.modalService.open(Pu.CONFIRM),this.modalService.setModalText("Are you sure you want to repair "+this.getName()+" for 1 log for each durability point missing?");const e=this.modalService.registerForConfirmation().subscribe(n=>{n&&(this.startProduction()||this.modalService.info("No free worker to repair stockade!")),e.unsubscribe()})}else"stop"===e&&this.fireWorker()}getLine(e){switch(e){case Mf.FIRST:return Lf.textValue("durability: "+this.health+"/"+this.durability);case Mf.SECOND:return Lf.textValue("defense: "+po.FORT.STOCKADE.DEFENSE);case Mf.THIRD:return this.health<this.durability&&!this.working?Lf.buttonValue("repair","repair"):this.health<this.durability&&this.working?Lf.buttonValue("stop repair","stop"):Lf.emptyValue();case Mf.FOURTH:return this.working?Lf.progressValue(this.progress):Lf.emptyValue()}}tick(e){this.working&&(this.progress<100&&(0===this.progress&&this.resourcesService.decreaseResource(su.LOG,1,this.getName())||this.progress>0)&&(this.progress+=this.getPower()),this.progress>=100&&(this.progress=0,this.health+=1),this.health===this.durability&&this.fireWorker())}getHappinessEffect(){return 0}}class bS extends jf{constructor(e=null,n=-1,l=0,t=Kf.FETCHING_INPUT,i=[],s=[],r=!1,u=null,o=1){super(e,n,tu.COTTON_MILL,po.FIELD.COTTON_MILL,t,l,i,s,r,u,o)}}class yS extends jf{constructor(e=null,n=-1,l=0,t=Kf.FETCHING_INPUT,i=[],s=[],r=!1,u=null,o=1){super(e,n,tu.TAILOR,po.VILLAGE.TAILOR,t,l,i,s,r,u,o)}}class AS extends jf{constructor(e=null,n=-1,l=0,t=Kf.FETCHING_INPUT,i=[],s=[],r=!1,u=null,o=1){super(e,n,tu.BREWERY,po.FIELD.BREWERY,t,l,i,s,r,u,o)}}class NS extends kf{constructor(e=null,n=-1,l=po.FORT.WOODEN_TOWER.DURABILITY,t=po.FORT.WOODEN_TOWER.DURABILITY,i=0,s=!1,r=1){super(n,tu.WOODEN_TOWER,e,po.FORT.WOODEN_TOWER,s,!0,!1,r),this.health=l,this.durability=t,this.progress=i,this.servicesService&&(this.armyService=e.getArmyService(),this.modalService=e.getModalService(),this.worldService=e.getWorldService())}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,health:this.health,durability:this.durability,progress:this.progress,working:this.working}}build(){return this.worldService.getRegion(0).defense+=po.FORT.STOCKADE.DEFENSE,this}prepareDemolish(){return this.worldService.getRegion(0).defense-=po.FORT.STOCKADE.DEFENSE,!0}callback(e){if("repair"===e){this.modalService.open(Pu.CONFIRM),this.modalService.setModalText("Are you sure you want to repair "+this.getName()+" for 1 log for each durability point missing?");const e=this.modalService.registerForConfirmation().subscribe(n=>{n&&(this.startProduction()||this.modalService.info("No free worker to repair wooden tower!")),e.unsubscribe()})}else"stop"===e&&this.fireWorker()}getLine(e){switch(e){case Mf.FIRST:return Lf.textValue("durability: "+this.health+"/"+this.durability);case Mf.SECOND:return Lf.textValue("defense: "+po.FORT.WOODEN_TOWER.DEFENSE);case Mf.THIRD:return this.health<this.durability&&!this.working?Lf.buttonValue("repair","repair"):this.health<this.durability&&this.working?Lf.buttonValue("stop repair","stop"):Lf.emptyValue();case Mf.FOURTH:return this.working?Lf.progressValue(this.progress):Lf.emptyValue()}}tick(e){this.working&&(this.progress<100&&(0===this.progress&&this.resourcesService.decreaseResource(su.LOG,1,this.getName())||this.progress>0)&&(this.progress+=this.getPower()),this.progress>=100&&(this.progress=0,this.health+=1),this.health===this.durability&&this.fireWorker())}getHappinessEffect(){return 0}}class _S extends kf{constructor(e=null,n=-1,l=po.FORT.STONE_TOWER.DURABILITY,t=po.FORT.STONE_TOWER.DURABILITY,i=0,s=!1,r=1){super(n,tu.STONE_TOWER,e,po.FORT.STONE_TOWER,s,!0,!1,r),this.health=l,this.durability=t,this.progress=i,this.servicesService&&(this.armyService=e.getArmyService(),this.modalService=e.getModalService(),this.worldService=e.getWorldService())}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,health:this.health,durability:this.durability,progress:this.progress,working:this.working}}build(){return this.worldService.getRegion(0).defense+=po.FORT.STOCKADE.DEFENSE,this}prepareDemolish(){return this.worldService.getRegion(0).defense-=po.FORT.STOCKADE.DEFENSE,!0}callback(e){if("repair"===e){this.modalService.open(Pu.CONFIRM),this.modalService.setModalText("Are you sure you want to repair "+this.getName()+" for 1 stone for each durability point missing?");const e=this.modalService.registerForConfirmation().subscribe(n=>{n&&(this.startProduction()||this.modalService.info("No free worker to repair stone tower!")),e.unsubscribe()})}else"stop"===e&&this.fireWorker()}getLine(e){switch(e){case Mf.FIRST:return Lf.textValue("durability: "+this.health+"/"+this.durability);case Mf.SECOND:return Lf.textValue("defense: "+po.FORT.STONE_TOWER.DEFENSE);case Mf.THIRD:return this.health<this.durability&&!this.working?Lf.buttonValue("repair","repair"):this.health<this.durability&&this.working?Lf.buttonValue("stop repair","stop"):Lf.emptyValue();case Mf.FOURTH:return this.working?Lf.progressValue(this.progress):Lf.emptyValue()}}tick(e){this.working&&(this.progress<100&&(0===this.progress&&this.resourcesService.decreaseResource(su.STONE,1,this.getName())||this.progress>0)&&(this.progress+=this.getPower()),this.progress>=100&&(this.progress=0,this.health+=1),this.health===this.durability&&this.fireWorker())}getHappinessEffect(){return 0}}class wS extends jf{constructor(e=null,n=-1,l=0,t=Kf.FETCHING_INPUT,i=[],s=[],r=!1,u=null,o=1){super(e,n,tu.WINERY,po.FIELD.WINERY,t,l,i,s,r,u,o),e&&(this.managementService=e.getManagementService())}tick(){this.managementService.getComplexWorkers()&&this.workSettings&&this.workSettings.enabled&&(this.isMet()?this.isWorking()||this.hireWorker():this.isWorking()&&this.fireWorker()),this.working&&(this.outputStorage.length>0?this.collectOutputResources():this.inputStorage.length<this.settings.INPUT_RESOURCES.length&&0===this.outputStorage.length?this.collectInputResources()&&(this.status=Kf.PREPARING):this.progress<100&&this.status===Kf.PREPARING?(this.progress+=this.getPower(),this.progress>100&&(this.progress=100)):100===this.progress&&this.status===Kf.PREPARING?(this.progress=0,this.status=Kf.PRODUCING_OUTPUT):this.progress<100&&this.status===Kf.PRODUCING_OUTPUT?(this.progress+=100/300,this.progress>=100&&(this.progress=100)):100===this.progress&&this.status===Kf.PRODUCING_OUTPUT&&(this.progress=0,this.inputStorage=[],this.outputStorage=Ou.copyResourceArray(this.settings.OUTPUT_RESOURCES),this.status=Kf.TRANSPORTING_OUTPUT))}}class PS extends kf{constructor(e=null,n=-1,l=0,t=0,i=0,s=!1,r=1){super(n,tu.TAVERN,e,po.VILLAGE.TAVERN,s,!0,!0,r),this.progress=l,this.beer=t,this.wine=i,this.servicesService&&(this.resourcesService=e.getResourcesService(),this.happinessService=e.getHappinessService(),this.managementService=e.getManagementService())}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,beer:this.beer,wine:this.wine,working:this.working}}getLine(e){switch(e){case Mf.FIRST:return Lf.textValue(this.beer<.001&&this.wine<.001?"waiting for alcohol":this.working?"open":"closed");case Mf.SECOND:return Lf.emptyValue();case Mf.THIRD:return Lf.textValue("beer: "+Ou.round(this.beer,2));case Mf.FOURTH:return Lf.textValue("wine: "+Ou.round(this.wine,2))}}tick(e){const n=this.resourcesService.getTotalPeople(),l=this.managementService.getAlcoholRations();if(this.working&&this.happinessService.getHappiness()<=100&&n>1&&(this.beer>.002||this.wine>.002)){for(let e=n;e>0;e--){const e=Nu.randomBetween(0,1);(0===e||this.wine<.002)&&this.beer>=.002*l?(this.beer-=.005*l,this.happinessService.updateHappiness(Ru.ALCOHOL,Number(l),-1)):(1===e||this.beer<.002)&&this.wine>=.002*l&&(this.wine-=.005*l,this.happinessService.updateHappiness(Ru.ALCOHOL,Number(l),-1))}this.beer<0&&(this.beer=0),this.wine<0&&(this.wine=0)}else this.happinessService.getHappiness()>75&&n>1&&this.happinessService.updateHappiness(Ru.ALCOHOL,0,-1);if(this.working){for(;this.beer<10*Math.ceil(n/100)&&this.resourcesService.decreaseResource(su.BEER,1,this.getName());)this.beer+=2.5;for(;this.wine<10*Math.ceil(n/100)&&this.resourcesService.decreaseResource(su.WINE,1,this.getName());)this.wine+=2.5}else this.happinessService.updateHappiness(Ru.ALCOHOL,0,-1)}}class MS extends kf{constructor(e=null,n=-1,l=0,t=!1,i=1){super(n,tu.GEOLOGIST,e,po.MOUNTAINS.GEOLOGIST,t,!0,!0,i),this.progress=l,this.servicesService&&(this.gameService=e.getGameService(),this.resourcesService=e.getResourcesService(),this.landService=e.getLandService())}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,working:this.working}}getLine(e){switch(e){case Mf.FIRST:return Lf.textValue("looking for ores");case Mf.SECOND:return Lf.progressValue(this.progress);case Mf.THIRD:return Lf.textValue(this.lastFind?"last find: "+Ou.prepareResourceName(this.lastFind)+" deposit":"last find: nothing");case Mf.FOURTH:return Lf.emptyValue()}}tick(e){if(this.working)if(this.progress<100)this.progress+=this.getPower(),this.progress>100&&(this.progress=100);else{const e=[];if(this.landService.getOre(su.COAL)<50&&e.push({item:su.COAL,chance:this.settings.COAL_CHANCE}),this.landService.getOre(su.COPPER_ORE)<50&&e.push({item:su.COPPER_ORE,chance:this.settings.COPPER_CHANCE}),this.landService.getOre(su.TIN_ORE)<50&&e.push({item:su.TIN_ORE,chance:this.settings.TIN_CHANCE}),this.gameService.isEnabled(ou.GOLD)&&this.landService.getOre(su.GOLD_ORE)<50&&e.push({item:su.GOLD_ORE,chance:this.settings.GOLD_CHANCE}),this.gameService.isEnabled(ou.SILVER)&&this.landService.getOre(su.SILVER_ORE)<50&&e.push({item:su.SILVER_ORE,chance:this.settings.SILVER_CHANCE}),this.gameService.isEnabled(ou.IRON)&&this.landService.getOre(su.IRON_ORE)<50&&e.push({item:su.IRON_ORE,chance:this.settings.IRON_CHANCE}),e.length>0){this.progress=0;const n=Nu.randomElement(e);n?(this.landService.increaseOre(n,1),this.lastFind=n):this.lastFind=null}}}}class DS extends jf{constructor(e=null,n=-1,l=0,t=Kf.FETCHING_INPUT,i=[],s=[],r=!1,u=null,o=1){super(e,n,tu.STONEMASON,po.MOUNTAINS.STONEMASON,t,l,i,s,r,u,o)}}var LS=function(e){return e.MINING="mining {res}",e.WAITING_FOR_SELECTION="waiting for ore selection",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.NO_MORE_RESOURCES="no more {res}",e.TRANSPORTING="transporting {res}",e}({});class xS extends kf{constructor(e=null,n=-1,l=0,t=LS.WAITING_FOR_SELECTION,i=!1,s=0,r=200,u=su.NOTHING,o=1){super(n,tu.PIT_MINE,e,po.MOUNTAINS.PIT_MINE,i,!0,!0,o),this.progress=l,this.status=t,this.storage=s,this.resources=r,this.ore=u,this.servicesService&&(this.modalService=e.getModalService(),this.landService=e.getLandService())}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,working:this.working,storage:this.storage,resources:this.resources,ore:this.ore}}callback(e){if(this.ore===su.NOTHING)if(this.landService.hasOre(su[String(e.target.value).replace(" ","_")],20)){this.modalService.open(Pu.CONFIRM),this.modalService.setModalText("Are you sure you want to mine "+Ou.prepareResourceName(su[String(e.target.value).replace(" ","_")])+" in this mine?");const n=this.modalService.registerForConfirmation().subscribe(l=>{l?(this.landService.decreaseOre(su[String(e.target.value).replace(" ","_")],20),this.ore=su[String(e.target.value).replace(" ","_")],this.status=LS.MINING,this.progress=0):e.target.selectedIndex=this.ore,n.unsubscribe()})}else this.modalService.info("Not enough "+Ou.prepareResourceName(su[String(e.target.value).replace(" ","_")])+" deposits available<br>20 "+Ou.prepareResourceName(su[String(e.target.value).replace(" ","_")])+" deposits required to start mining."),e.target.selectedIndex=this.ore}buildOnMountain(){return!0}isUsedUp(){return this.status===LS.NO_MORE_RESOURCES}hasBuff(){return!this.isUsedUp()&&super.hasBuff()}getLine(e){switch(e){case Mf.FIRST:return this.ore!==su.NOTHING?Lf.textValue(Ou.prepareResourceName(this.ore).toLowerCase()+": "+this.resources):Lf.emptyValue();case Mf.SECOND:return Lf.textValue(this.status.replace("{res}",Ou.prepareResourceName(this.ore).toLowerCase()));case Mf.THIRD:return Lf.progressValue(this.progress);case Mf.FOURTH:if(this.ore===su.NOTHING){const e=[];return e.push(su[su.NOTHING].replace("_"," ")),e.push(su[su.COAL].replace("_"," ")),e.push(su[su.GOLD_ORE].replace("_"," ")),e.push(su[su.SILVER_ORE].replace("_"," ")),e.push(su[su.COPPER_ORE].replace("_"," ")),e.push(su[su.TIN_ORE].replace("_"," ")),e.push(su[su.IRON_ORE].replace("_"," ")),Lf.dropdownValue(e,su[this.ore])}return Lf.emptyValue()}}isStoppable(){return this.resources>0}tick(e){if(this.ore!==su.NOTHING){if(this.resources<=0&&0===this.storage&&(this.status!==LS.NO_MORE_RESOURCES&&this.servicesService.getLogService().warning("Pit mine mined all "+Ou.prepareResourceName(this.ore)),this.status=LS.NO_MORE_RESOURCES,this.stopProduction()),!this.working)return;this.storage>0?this.resourcesService.increaseResource(this.ore,this.storage,this.getName())?(this.storage=0,Nu.chance(this.settings.GEM_CHANCE)&&this.resourcesService.increaseResource(su.GEMS,1,this.getName()),this.status=LS.MINING):this.status=LS.WAITING_FOR_WAREHOUSE_SPACE:this.progress<100?(this.status=LS.MINING,this.progress+=this.getPower(),this.progress>100&&(this.progress=100)):100===this.progress&&(this.progress=0,this.resources-=1,this.storage=1,this.status=LS.TRANSPORTING)}}}var kS=function(e){return e[e.NONE=0]="NONE",e[e.COW=1]="COW",e[e.CHICKEN=2]="CHICKEN",e[e.PIG=3]="PIG",e[e.HORSE=4]="HORSE",e[e.SHEEP=5]="SHEEP",e}({});class FS extends kf{constructor(e=null,n=-1,l=po.FIELD.PASTURE.SIZE,t=kS.NONE,i=0,s=0,r=!0,u=0,o=0,a=0,c=!1,h=1){super(n,tu.PASTURE,e,po.FIELD.PASTURE,r,!0,!0,h),this.currentSize=l,this.animal=t,this.progress=i,this.produceProgress=s,this.animals=u,this.food=o,this.chores=a,this.autoButcher=c,this.servicesService&&(this.modalService=e.getModalService(),this.weatherService=e.getWeatherService(),this.calendarService=e.getCalendarService(),this.fieldService=e.getService(bu.FIELD))}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,size:this.currentSize,animal:this.animal,progress:this.progress,produceProgress:this.produceProgress,working:this.working,animals:this.animals,food:this.food,chores:this.chores,autoButcher:this.autoButcher}}build(){return this.resourcesService.getResource(su.CHICKEN).isVisible()||(this.resourcesService.makeVisible(su.CHICKEN),this.logService.log("New resource discovered: "+Ou.prepareResourceName(su.CHICKEN)),this.resourcesService.makeVisible(su.SHEEP),this.logService.log("New resource discovered: "+Ou.prepareResourceName(su.SHEEP)),this.resourcesService.makeVisible(su.COW),this.logService.log("New resource discovered: "+Ou.prepareResourceName(su.COW)),this.resourcesService.makeVisible(su.PIG),this.logService.log("New resource discovered: "+Ou.prepareResourceName(su.PIG)),this.resourcesService.makeVisible(su.HORSE),this.logService.log("New resource discovered: "+Ou.prepareResourceName(su.HORSE))),this.resourcesService.updateAnimals(),super.build()}getSize(){return this.currentSize}getComplexity(){return super.getComplexity()*(this.getSize()/this.settings.SIZE)}findButcher(){return this.fieldService.getBuildings().filter(e=>e.getBuildingType()===tu.BUTCHER).map(e=>e).sort((e,n)=>e.getAnimalsNumber()-n.getAnimalsNumber())[0]}butcher(e=!0){const n=this.findButcher();n?n.addAnimalToButcher(this.getResourceType())&&(this.resourcesService.addAnimalUsedData(this.getResourceType(),"Butcher",1),this.decreaseAnimal(1)):e||this.modalService.info("No butcher available or their work queue is full")}callback(e){if("butcher"===e&&this.animals>0)this.butcher(!1);else if("x"===e)this.autoButcher=!this.autoButcher;else if(this.animal===kS.NONE||0===this.animals)this.animal!==kS.NONE&&this.resourcesService.decreaseResourceLimit(this.getResourceType(),this.getMaxAnimals()),this.animal=kS[String(e.target.value)],this.progress=0,this.animal!==kS.NONE&&this.resourcesService.increaseResourceLimit(this.getResourceType(),this.getMaxAnimals()),this.resourcesService.updateAnimals();else{this.modalService.open(Pu.CONFIRM),this.modalService.setModalText("Are you sure you want to change animals?<br>All current animals will be moved to other pastures and if there is no enough space they will be lost");const n=this.modalService.registerForConfirmation().subscribe(l=>{l?(this.resourcesService.decreaseResourceLimit(this.getResourceType(),this.getMaxAnimals()),this.moveAnimals(this.animals),this.animal=kS[String(e.target.value)],this.progress=0,this.animals=0,this.animal!==kS.NONE&&this.resourcesService.increaseResourceLimit(this.getResourceType(),this.getMaxAnimals()),this.resourcesService.updateAnimals()):e.target.selectedIndex=this.animal-1,n.unsubscribe()})}}finishDemolish(){}prepareDemolish(){return this.stopProduction(),this.animal!==kS.NONE&&(this.moveAnimals(this.animals),this.resourcesService.decreaseResourceLimit(this.getResourceType(),this.getMaxAnimals())),!0}getLine(e){switch(e){case Mf.FIRST:return this.animal!==kS.NONE?Lf.textValue(kS[this.animal].toLowerCase()+": "+this.animals+"/"+this.getMaxAnimals()):Lf.emptyValue();case Mf.SECOND:if(this.animals>0&&this.food<0)return Lf.progressValue(Math.abs(this.food),"famine");{const e=[];return e.push(kS[kS.NONE]),e.push(kS[kS.CHICKEN]),e.push(kS[kS.SHEEP]),e.push(kS[kS.COW]),e.push(kS[kS.PIG]),e.push(kS[kS.HORSE]),Lf.dropdownValue(e,kS[this.animal])}case Mf.THIRD:return this.animals>0&&this.findButcher()?Lf.buttonCheckboxValue("butcher","butcher","auto butcher",this.autoButcher,"x"):Lf.emptyValue();case Mf.FOURTH:return Lf.emptyValue()}}getName(){return this.animal===kS.NONE?"Pasture":kS[this.animal].charAt(0).toUpperCase()+kS[this.animal].slice(1).toLowerCase()+" pasture"}startProduction(){return this.working=!0,!0}stopProduction(){this.working=!1}tick(e){if(this.food<0&&this.calendarService.getSeason()!==Pp.WINTER&&(this.food=0),this.autoButcher&&this.animals>0&&this.animals===this.getMaxAnimals()&&this.butcher(),this.animals>0?this.calendarService.getSeason()===Pp.WINTER?(this.food-=.0015*this.getAnimalSettings().SIZE*this.animals,this.food<=-100&&(this.food=0,this.decreaseAnimal(1))):(this.food-=2e-4*this.getAnimalSettings().SIZE*this.animals,this.food<=-100&&(this.food=0,this.decreaseAnimal(1))):this.food<0&&(this.food=0),this.food>=0&&this.animals>1&&this.chores<this.getSize()&&(this.animals<this.getMaxAnimals()||this.resourcesService.hasLimit(this.getResourceType()))&&this.progress<100&&(this.progress+=.05/(10/this.getAnimalSettings().REPRODUCTION_SPEED)*this.animals*(1+this.effectsService.getNatureEffectsValue()/100),this.progress>=100&&(this.animals<this.getMaxAnimals()||this.resourcesService.hasLimit(this.getResourceType()))&&(this.progress=0,this.animals<this.getMaxAnimals()?(this.resourcesService.addAnimalProducedData(this.getResourceType(),"Pasture",1),this.increaseAnimal(1)):this.resourcesService.hasLimit(this.getResourceType())&&this.resourcesService.increaseResource(this.getResourceType(),1,"Pasture",!0))),(this.animal===kS.CHICKEN||this.animal===kS.COW||this.animal===kS.SHEEP)&&(0===this.animals&&(this.produceProgress=0),this.produceProgress<100&&this.chores<this.getSize()&&(this.produceProgress+=.2*this.animals*(1+this.effectsService.getNatureEffectsValue()/100),this.produceProgress>=100)))if(this.produceProgress=0,this.animal===kS.CHICKEN){if(this.servicesService.getRoyalService().layGoldenEgg())return;this.resourcesService.increaseResource(su.EGG,1,this.getName())}else if(this.animal===kS.COW)this.resourcesService.increaseResource(su.MILK,1,this.getName());else if(this.animal===kS.SHEEP){if(this.servicesService.getRoyalService().getGoldenFleece())return;this.resourcesService.increaseResource(su.WOOL,1,this.getName())}this.chores+=.05*this.animals,this.chores>2*this.getSize()&&(this.chores=2*this.getSize())}work(e){return this.food<100&&0===this.resourcesService.hasResource(su.HAY,1,this.getName())?(this.resourcesService.decreaseResource(su.HAY,1,this.getName())&&(this.food+=10),!0):this.chores>=1&&(this.chores-=e/po.FIELD.FARM.BASE_POWER,this.chores<0&&(this.chores=0),!0)}fireWorker(){return!1}hireWorker(){return!1}getWorkers(){return 0}hasWork(){return!!this.isWorking()&&(this.food<50&&0===this.resourcesService.hasResource(su.HAY,1,this.getName())||this.chores>=1)}getDetails(){return this.animal!==kS.NONE?"pasture size: "+Ou.round(this.getSize(),0)+"<br>progress: "+Ou.round(this.progress,2)+"%<br>produce progress: "+Ou.round(this.produceProgress,2)+"%<br>food: "+Ou.round(this.food,2)+"<br>chores: "+Ou.round(this.chores,2)+"<br>"+Ou.prepareResourceName(this.getResourceType())+" meat: "+this.getAnimalSettings().MEAT+"<br>"+Ou.prepareResourceName(this.getResourceType())+" fur: "+this.getAnimalSettings().FUR+"<br>"+Ou.prepareResourceName(this.getResourceType()).toLowerCase()+" size: "+this.getAnimalSettings().SIZE+"<br>"+super.getDetails():super.getDetails()}getHappinessEffect(){return 0}isCombinable(){return!0}isSplittable(){return!0}moveAnimals(e){const n=this.fieldService.getBuildings().filter(e=>e.getBuildingType()===tu.PASTURE&&e!==this&&e.getAnimals()<e.getMaxAnimals()).map(e=>e).filter(e=>e.getResourceType()===this.getResourceType());for(const l of n){for(;e>0&&l.getAnimals()<l.getMaxAnimals();)l.increaseAnimal(1),e-=1,this.decreaseAnimal(1);if(0===e)return}}getResourceType(){return this.animal!==kS.NONE?su[kS[this.animal]]:su.NOTHING}getAnimals(){return this.animals}getAnimalSettings(){return mo.getResource(this.getResourceType())}getMaxAnimals(){return this.getResourceType()!==su.NOTHING?Math.floor(this.currentSize/this.getAnimalSettings().SIZE):0}increaseAnimal(e){this.animals+=e,this.resourcesService.updateAnimals()}decreaseAnimal(e){this.animals-=e,this.resourcesService.updateAnimals()}combine(e,n){if(this.getBuildingType()===e.getBuildingType())if(this.isCompatible(e))this.doCombine(e,n);else{this.modalService.open(Pu.CONFIRM),this.modalService.setModalText(" Are you sure you want to combine "+this.getName()+" of size "+this.getSize()+" with "+e.getName()+" of size "+e.getSize()+"?<br>Resulting "+this.getName()+" of size "+(this.getSize()+e.getSize())+" will keep animals");const l=this.modalService.registerForConfirmation().subscribe(t=>{l.unsubscribe(),t?this.doCombine(e,n):n.finaliseCombine(!1),this.resourcesService.updateAnimals()})}}doCombine(e,n){this.currentSize+=e.getSize(),e.animal===this.animal?this.increaseAnimal(e.getAnimals()):this.animal===kS.NONE&&e.animal!==kS.NONE?(this.animal=e.animal,this.increaseAnimal(e.getAnimals())):e.moveAnimals(e.getAnimals()),e.animals=0,n.finaliseCombine(!0)}split(e){this.modalService.open(Pu.INPUT),this.modalService.setModalText("Set new pasture size (1-"+(this.getSize()-1)+")"),this.modalService.setModalValue("");const n=this.modalService.registerForValueResponse().subscribe(l=>{if(n.unsubscribe(),null!==l){if(!isNaN(l)&&0!==l)if(l>=1&&l<this.getSize()){this.currentSize-=Number(l);const n=new FS(this.servicesService,this.servicesService.getIdService().getNextId(),Number(l)).build();e.finaliseSplit(n),n.animal=this.animal,this.animals>this.getMaxAnimals()&&(this.moveAnimals(this.animals-this.getMaxAnimals()),this.animals>this.getMaxAnimals()&&this.decreaseAnimal(this.animals-this.getMaxAnimals()))}else this.modalService.info("Invalid size value!");this.resourcesService.updateAnimals()}})}isCompatible(e){return this.animal===e.animal}}var US=function(e){return e.BUTCHERING="butchering {animal}",e.WAITING_FOR_ANIMALS="waiting for animals",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.TRANSPORTING="transporting goods",e}({});class HS extends kf{constructor(e=null,n=-1,l=US.WAITING_FOR_ANIMALS,t=0,i=!0,s=0,r=0,u=[],o=!0,a=1){super(n,tu.BUTCHER,e,po.FIELD.BUTCHER,i,!0,!0,a),this.status=l,this.progress=t,this.outputStorage=s,this.outputFurStorage=r,this.animals=u,this.discardExcessFur=o}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,status:this.status,progress:this.progress,working:this.working,outputStorage:this.outputStorage,animals:this.animals,discardExcessFur:this.discardExcessFur,outputFurStorage:this.outputFurStorage}}callback(e){"toggleDiscard"===e&&(this.discardExcessFur=!this.discardExcessFur)}getLine(e){switch(e){case Mf.FIRST:return Lf.textValue(this.animals.length>0?this.status.replace("{animal}",Ou.prepareResourceName(this.animals[0])):this.status);case Mf.SECOND:return Lf.progressValue(this.progress);case Mf.THIRD:return Lf.textValue("queue: "+this.animals.length+"/10");case Mf.FOURTH:return Lf.checkboxValue("discard excess fur",this.discardExcessFur,"toggleDiscard")}}getAnimalsNumber(){return this.animals.length}getFreeSpace(){return 10-this.getAnimalsNumber()}addAnimalToButcher(e){return this.animals.length<10&&(this.animals.push(e),!0)}tick(e){if(this.working)if(this.animals.length>0&&0===this.outputStorage&&0===this.outputFurStorage)if(this.status=US.BUTCHERING,this.progress<100)this.progress+=this.getPower()/mo.getResource(this.animals[0]).BUTCHERING_DIFFICULTY,this.progress>100&&(this.progress=100);else{this.status=US.TRANSPORTING,this.progress=0;const e=this.animals.shift();this.outputStorage=mo.getResource(e).MEAT,this.resourcesService.increaseResource(su.MEAT,this.outputStorage,this.getName())?this.outputStorage=0:this.status=US.WAITING_FOR_WAREHOUSE_SPACE,this.outputFurStorage=mo.getResource(e).FUR,this.resourcesService.increaseResource(su.FUR,this.outputFurStorage,this.getName())||this.discardExcessFur?this.outputFurStorage=0:this.status=US.WAITING_FOR_WAREHOUSE_SPACE}else{if(0!==this.outputStorage){const e=this.resourcesService.getResource(su.MEAT).getFreeSpace(),n=Math.max(Math.min(e,this.outputStorage),0);this.resourcesService.increaseResource(su.MEAT,n,this.getName())&&(this.outputStorage-=n,0===this.outputFurStorage&&0===this.outputStorage&&(this.status=US.WAITING_FOR_ANIMALS))}if(0!==this.outputFurStorage){const e=this.resourcesService.getResource(su.FUR).getFreeSpace(),n=Math.max(Math.min(e,this.outputFurStorage),0);this.resourcesService.increaseResource(su.FUR,n,this.getName())&&(this.outputFurStorage-=n,0===this.outputFurStorage&&0===this.outputStorage&&(this.status=US.WAITING_FOR_ANIMALS)),this.discardExcessFur&&(this.outputFurStorage=0,this.status=US.WAITING_FOR_ANIMALS)}0===this.outputStorage&&0===this.outputFurStorage&&(this.status=US.WAITING_FOR_ANIMALS)}}getDetails(){return super.getDetails()+"local storage:<br>&nbsp;&nbsp;meat: "+this.outputStorage+"<br>&nbsp;&nbsp;fur: "+this.outputFurStorage}}class GS extends jf{constructor(e=null,n=-1,l=0,t=Kf.FETCHING_INPUT,i=[],s=[],r=!1,u=null,o=1){super(e,n,tu.MINT,po.MOUNTAINS.MINT,t,l,i,s,r,u,o)}}class BS extends kf{constructor(e,n,l,t,i,s,r,u,o){super(e,n,l,t,i>0,r,u,o),this.servicesService=l,this.workers=i,this.maxWorkers=s}fireWorker(){return this.workers>0&&(this.resourcesService.fireWorker(1),this.workers-=1,!0)}hireWorker(){return!!(this.workers<this.maxWorkers&&this.resourcesService.hireWorker())&&(this.workers+=1,!0)}getWorkers(){return this.workers}isWorking(){return this.workers>0}startProduction(){if(0===this.workers){for(;this.workers<this.maxWorkers&&this.resourcesService.hireWorker();)this.workers+=1;if(this.workers>0)return!0}return!1}stopProduction(){this.workers>0&&(this.resourcesService.fireWorker(this.workers),this.workers=0)}}var VS=function(e){return e[e.CONSTRUCTION=0]="CONSTRUCTION",e[e.BUILT=1]="BUILT",e[e.ABDICATED=2]="ABDICATED",e[e.USED=3]="USED",e}({});let WS=(()=>{class e extends BS{constructor(n,l,t,i,s,r,u,o,a,c){super(n,l,t,i,c,e.maxWorkers,!1,!0,1),this.progress=s,this.maxProgress=r,this.stage=u,this.state=o,this.year=a,this.prepareIcons()}toJSON(){return{id:this.id,buildingType:this.buildingType,progress:this.progress,maxProgress:this.maxProgress,stage:this.stage,state:this.state,year:this.year,workers:this.workers}}prepareIcons(){this.iconsValue=[],this.settings.STAGES[this.stage]&&this.settings.STAGES[this.stage].cost.forEach(e=>this.iconsValue.push({name:su[e.resource],path:"resources",prefix:e.amount,suffix:""}))}callback(e){if("add"===e){const e=this.settings.STAGES[this.stage];if(void 0===this.settings.STAGES[this.stage]&&this.maxProgress<100)return void(this.maxProgress=100);const n=new Map;e.cost.forEach(e=>n.set(e.resource,e.amount)),this.resourcesService.decreaseResources(n,this.getName(),!0)&&(this.stage+=1,this.maxProgress+=e.progress,this.maxProgress>100&&(this.maxProgress=100),this.prepareIcons())}else if("abdicate"===e){this.modalService.open(Pu.ABDICATION);const e=this.modalService.registerForAbdication().subscribe(n=>{e.unsubscribe(),n&&(this.state=VS.ABDICATED,this.servicesService.getGameService().incrementAbdicationLevel())})}else"hire"===e?this.hireWorker():"fire"===e&&this.fireWorker()}forceAbdicate(){this.state===VS.BUILT&&(this.state=VS.ABDICATED,this.servicesService.getGameService().incrementAbdicationLevel())}getName(){return this.progress>=100?super.getName():super.getName()+" construction"}getLine(e){switch(e){case Mf.FIRST:return this.state===VS.CONSTRUCTION?Lf.progressValue(this.progress,Ou.round(this.progress,2)+"% / "+this.maxProgress+"%"):Lf.textValue("built in year "+this.year);case Mf.SECOND:return this.state===VS.CONSTRUCTION?Lf.iconValue(this.iconsValue):this.state===VS.BUILT?Lf.buttonValue(this.getAbdicationText(),"abdicate"):Lf.emptyValue();case Mf.THIRD:return this.maxProgress<100?Lf.buttonValue("add materials","add"):Lf.emptyValue();case Mf.FOURTH:return this.state===VS.CONSTRUCTION?Lf.twoButtonValue("hire worker","hire",this.workers+"/"+this.maxWorkers,"fire worker","fire"):Lf.emptyValue()}}getAbdicationText(){return"abdicate"}tick(e){this.isWorking()&&(this.progress>=100&&(this.stopProduction(),this.addPermanentEffect(),this.progress=100,this.state=VS.BUILT,this.year=this.servicesService.getCalendarService().getYear(),this.getBuildingType()===tu.ASCENSION_TEMPLE&&this.servicesService.getLogService().mystical("As you enter the temple you have strange feeling of many eyes watching you, <br>however there is nobody there. At the end of a big hall you find a golden altar.<br>This is it, your whole life lead you here. You feel safe.")),this.progress<this.maxProgress&&(this.progress+=.001*this.getPower()*this.workers))}getEffects(){return this.state===VS.CONSTRUCTION?this.effectsService.getBuildingEffectsValue(tu.CONSTRUCTION,!1):super.getEffects()}getPermanentEffects(){return this.state===VS.CONSTRUCTION?this.effectsService.getBuildingEffectsValue(tu.CONSTRUCTION,!0):super.getPermanentEffects()}getHappinessEffect(){return this.state===VS.CONSTRUCTION?super.getHappinessEffect():0}isStoppable(){return this.state===VS.CONSTRUCTION}isFinished(){return this.state!==VS.CONSTRUCTION}addPermanentEffect(){this.addBuildingEffects(),this.addArmyEffects()}addBuildingEffects(){if(this.settings.BUILDING_EFFECTS&&this.settings.BUILDING_EFFECTS.length>0){const e=this.servicesService.getEffectsService();this.settings.BUILDING_EFFECTS.forEach(n=>{e.addBuildingEffect(new yu(this.getName(),n.building,Number(n.value),Au.WONDER))})}}addArmyEffects(){if(this.settings.ARMY_EFFECTS&&this.settings.ARMY_EFFECTS.length>0){const e=this.servicesService.getEffectsService();this.settings.ARMY_EFFECTS.forEach(n=>{e.addArmyEffect(new _u(this.getName(),n.troop,Number(n.value),Au.WONDER))})}}verifyWonderEffects(){if(this.isFinished()){if(this.settings.BUILDING_EFFECTS){const e=this.servicesService.getEffectsService();this.settings.BUILDING_EFFECTS.forEach(n=>{this.effectsService.hasBuildingEffect(this.getName(),n.building)||e.addBuildingEffect(new yu(this.getName(),n.building,Number(n.value),Au.WONDER))})}if(this.settings.ARMY_EFFECTS){const e=this.servicesService.getEffectsService();this.settings.ARMY_EFFECTS.forEach(n=>{this.effectsService.hasArmyEffect(this.getName(),n.troop)||e.addArmyEffect(new _u(this.getName(),n.troop,Number(n.value),Au.WONDER))})}}}}return e.maxWorkers=5,e})();class YS extends WS{constructor(e=null,n=-1,l=0,t=0,i=0,s=VS.CONSTRUCTION,r=-1,u=0){super(n,tu.STONEHENGE,e,po.PLATEAU.STONEHENGE,l,t,i,s,r,u)}tick(e){if(super.tick(e),this.state===VS.ABDICATED){this.state=VS.USED,this.servicesService.getGameService().enable(ou.PLATEAU),this.servicesService.getRoyalService().increaseRoyalPoints(this.settings.RP),this.logService.log("Your abdication granted you "+this.settings.RP+" royal points");const e=this.servicesService.getKongregateService();e.isAvailable()&&e.submitStat("Stonehenge",!0)}}}class zS extends kf{constructor(e=null,n=-1,l=0,t=1){super(n,tu.MARKETPLACE,e,po.VILLAGE.MARKETPLACE,!0,!0,!1,t),this.progress=l,this.callMerchantPrice=[{name:"coins",path:"resources",prefix:"",suffix:"25"}]}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress}}build(){return this.servicesService.getGameService().enable(ou.MARKET),super.build()}callback(e){"bribe"===e&&(this.resourcesService.decreaseResource(su.COINS,25,this.getName(),!0)?1===Nu.randomBetween(1,2)&&(this.progress+=50,this.progress>=100&&(this.progress=0,this.servicesService.getService(bu.MARKET).callMerchant())):this.modalService.info("Not enough coins for a bribe"))}getLine(e){switch(e){case Mf.FIRST:return Lf.progressValue(this.progress,"merchant arrival");case Mf.SECOND:return Lf.emptyValue();case Mf.THIRD:return Lf.iconValue(this.callMerchantPrice);case Mf.FOURTH:return Lf.buttonValue("bribe merchant (50% chance)","bribe")}}tick(e){1===Nu.randomBetween(1,10)&&(this.progress+=this.getPower()),this.progress>=100&&(this.servicesService.getService(bu.MARKET).callMerchant(),this.progress=0)}getWorkers(){return 0}}class $S extends kf{constructor(e=null,n=-1,l=1){super(n,tu.SMITHY,e,po.MOUNTAINS.SMITHY,!1,!0,!1,l),e&&(this.gameService=e.getGameService())}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType}}build(){return this.settings.RECIPES.forEach(e=>{this.gameService.isEnabled(e.prerequisite)&&this.servicesService.getRecipeService().enable(e.recipe)}),this.gameService.enable(ou.BUILT_SMITHY),this}prepareDemolish(){return this.settings.RECIPES.forEach(e=>this.servicesService.getRecipeService().disable(e.recipe)),this.gameService.disable(ou.BUILT_SMITHY),this.servicesService.getService(bu.CRAFTING).filterCraftingQueue(this.settings.RECIPES),this.servicesService.getVillageService().buildings.filter(e=>e.getBuildingType()===tu.WORKSHOP).map(e=>e).forEach(e=>{e.getRecipe()&&this.settings.RECIPES.includes(e.getRecipe().id)&&e.cancelCrafting()}),this.servicesService.getVillageService().buildings.filter(e=>e.getBuildingType()===tu.MANUFACTURE).map(e=>e).forEach(e=>{e.getRecipe()&&this.settings.RECIPES.includes(e.getRecipe().id)&&e.cancelCrafting()}),!0}getLine(e){switch(e){case Mf.FIRST:return Lf.textValue("Allows workshops");case Mf.SECOND:return Lf.textValue("to smelt ore");case Mf.THIRD:case Mf.FOURTH:return Lf.emptyValue()}}getEffects(){return 0}getHappinessEffect(){return 0}getPermanentEffects(){return 0}}class KS extends kf{constructor(e=null,n=-1,l=!1,t=0,i=1){super(n,tu.CHURCH,e,po.VILLAGE.CHURCH,l,!0,!0,i),this.progress=t,this.servicesService&&(this.religionService=e.getService(bu.RELIGION))}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,working:this.working,progress:this.progress}}build(){return this.religionService.increaseFaithCap(50),this.servicesService.getGameService().enable(ou.RELIGION),this.startProduction(),this}getLine(e){switch(e){case Mf.FIRST:case Mf.SECOND:return Lf.emptyValue();case Mf.THIRD:return Lf.progressValue(this.progress,"prayers");case Mf.FOURTH:return Lf.emptyValue()}}prepareDemolish(){return this.religionService.decreaseFaithCap(50),!0}tick(e){if(!this.working)return;const n=this.servicesService.getVillageService().getPopulation();this.progress+=.1*(Math.pow(Math.log(n),2)+1)*this.getPower(),this.progress>100&&(this.progress=0,this.religionService.increaseFaith(1))}}class jS extends WS{constructor(e=null,n=-1,l=0,t=0,i=0,s=VS.CONSTRUCTION,r=-1,u=0){super(n,tu.PYRAMID,e,po.PLATEAU.PYRAMID,l,t,i,s,r,u)}tick(e){if(super.tick(e),this.state===VS.ABDICATED){this.state=VS.USED,this.servicesService.getGameService().enable(ou.PLATEAU),this.servicesService.getRoyalService().increaseRoyalPoints(this.settings.RP),this.logService.log("Your abdication granted you "+this.settings.RP+" royal points");const e=this.servicesService.getKongregateService();e.isAvailable()&&e.submitStat("Pyramid",!0)}}}class QS extends WS{constructor(e=null,n=-1,l=0,t=0,i=0,s=VS.CONSTRUCTION,r=-1,u=0){super(n,tu.HANGING_GARDEN,e,po.PLATEAU.HANGING_GARDEN,l,t,i,s,r,u)}tick(e){if(super.tick(e),this.state===VS.ABDICATED){this.state=VS.USED,this.servicesService.getGameService().enable(ou.PLATEAU),this.servicesService.getRoyalService().increaseRoyalPoints(this.settings.RP),this.logService.log("Your abdication granted you "+this.settings.RP+" royal points");const e=this.servicesService.getKongregateService();e.isAvailable()&&e.submitStat("Hanging Garden",!0)}}}class qS extends WS{constructor(e=null,n=-1,l=0,t=0,i=0,s=VS.CONSTRUCTION,r=-1,u=0){super(n,tu.COLOSSUS,e,po.PLATEAU.COLOSSUS,l,t,i,s,r,u)}tick(e){if(super.tick(e),this.state===VS.ABDICATED){this.state=VS.USED,this.servicesService.getGameService().enable(ou.PLATEAU),this.servicesService.getRoyalService().increaseRoyalPoints(this.settings.RP),this.logService.log("Your abdication granted you "+this.settings.RP+" royal points");const e=this.servicesService.getKongregateService();e.isAvailable()&&e.submitStat("Colossus",!0)}}}class XS extends WS{constructor(e=null,n=-1,l=0,t=0,i=0,s=VS.CONSTRUCTION,r=-1,u=0){super(n,tu.ASCENSION_TEMPLE,e,po.PLATEAU.ASCENSION_TEMPLE,l,t,i,s,r,u)}callback(e){if("abdicate"===e){this.modalService.open(Pu.CONFIRM),this.modalService.setModalText("Are you sure you want to ascend?<br><br>You will start from the beginning and all progress except for</br>royal points, heritage points and permanent royal upgrades will be deleted.");const e=this.modalService.registerForConfirmation().subscribe(n=>{if(e.unsubscribe(),n){this.state=VS.ABDICATED,this.servicesService.getRoyalService().increaseRoyalPoints(this.settings.RP),this.logService.mystical("Your ascension granted you "+this.settings.RP+" royal points");const e=this.servicesService.getKongregateService();e.isAvailable()&&e.submitStat("Ascension Temple",!0),this.servicesService.getService(bu.SERIALIZER).ascensionReset()}})}else super.callback(e)}getAbdicationText(){return"ascend"}forceAbdicate(){}}class ZS extends WS{constructor(e=null,n=-1,l=0,t=0,i=0,s=VS.CONSTRUCTION,r=-1,u=0){super(n,tu.UNDERGROUND_CITY,e,po.PLATEAU.UNDERGROUND_CITY,l,t,i,s,r,u)}tick(e){if(super.tick(e),this.state===VS.ABDICATED){this.state=VS.USED,this.servicesService.getGameService().enable(ou.PLATEAU),this.servicesService.getRoyalService().increaseRoyalPoints(this.settings.RP),this.logService.log("Your abdication granted you "+this.settings.RP+" royal points");const e=this.servicesService.getKongregateService();e.isAvailable()&&e.submitStat("Underground City",!0)}}}class JS extends WS{constructor(e=null,n=-1,l=0,t=0,i=0,s=VS.CONSTRUCTION,r=-1,u=0){super(n,tu.GREAT_LIGHTHOUSE,e,po.PLATEAU.GREAT_LIGHTHOUSE,l,t,i,s,r,u)}tick(e){if(super.tick(e),this.state===VS.ABDICATED){this.state=VS.USED,this.servicesService.getGameService().enable(ou.PLATEAU),this.servicesService.getRoyalService().increaseRoyalPoints(this.settings.RP),this.logService.log("Your abdication granted you "+this.settings.RP+" royal points");const e=this.servicesService.getKongregateService();e.isAvailable()&&e.submitStat("Great Lighthouse",!0)}}}class eE extends WS{constructor(e=null,n=-1,l=0,t=0,i=0,s=VS.CONSTRUCTION,r=-1,u=0){super(n,tu.SACRED_GROVE,e,po.PLATEAU.SACRED_GROVE,l,t,i,s,r,u)}tick(e){if(super.tick(e),this.state===VS.ABDICATED){this.state=VS.USED,this.servicesService.getGameService().enable(ou.PLATEAU),this.servicesService.getRoyalService().increaseRoyalPoints(this.settings.RP),this.logService.log("Your abdication granted you "+this.settings.RP+" royal points");const e=this.servicesService.getKongregateService();e.isAvailable()&&e.submitStat("Sacred Grove",!0)}}}class nE extends kf{constructor(e=null,n=-1,l=1){super(n,tu.STASH,e,po.FORT.STASH,!1,!0,!1,l),this.servicesService&&(this.armyService=e.getArmyService())}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType}}build(){return this.armyService.increaseStash(po.FORT.STASH.SIZE),this}prepareDemolish(){return this.armyService.decreaseStash(po.FORT.STASH.SIZE),!0}getLine(e){switch(e){case Mf.FIRST:return Lf.textValue("stash size: "+po.FORT.STASH.SIZE);case Mf.SECOND:case Mf.THIRD:case Mf.FOURTH:return Lf.emptyValue()}}}let lE=(()=>{class e{constructor(e){this.servicesService=e,this.nextId=1,e.addService(bu.ID,this)}getNextId(){const e=this.nextId;return this.nextId+=1,e}getName(){return"IdService"}load(e){this.nextId=void 0===e.nextId||isNaN(e.nextId)?1:e.nextId}reset(e,n){e&&(this.nextId=1)}save(){return{nextId:this.nextId}}}return e.\u0275prov=re({factory:function(){return new e(Ae(Np))},token:e,providedIn:"root"}),e})();var tE=function(e){return e.CRAFTING="crafting {craft}",e.WAITING_FOR_RESOURCES="waiting for resources",e.WAITING_FOR_WAREHOUSE="waiting for warehouse space",e.NO_CRAFTING="no crafting recipe",e.PRODUCTION_SETUP="production setup",e.FETCHING_MATERIALS="fetching materials",e.TRANSPORTING="transporting goods",e}({});class iE extends kf{constructor(e=null,n=-1,l=0,t=tE.NO_CRAFTING,i=!1,s=-1,r=1,u=0){super(n,tu.MANUFACTURE,e,po.VILLAGE.MANUFACTURE,i,!0,!0,r),this.progress=l,this.status=t,this.storage=u,this.recipe=null,this.iconsValue=[],e&&(this.resourcesService=e.getResourcesService(),this.modalService=e.getModalService(),this.recipeService=e.getRecipeService(),s>=0&&(this.recipe=this.recipeService.getRecipeById(s),this.prepareIcons()))}prepareIcons(){this.iconsValue=[],this.recipe&&Array.from(this.recipe.cost.entries()).forEach(e=>{this.iconsValue.push({name:su[e[0]],path:"resources",prefix:e[1],suffix:""})})}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,working:this.working,recipe:null!==this.recipe?this.recipe.id:-1,storage:this.storage}}build(){return this.startProduction(),this}prepareDemolish(){return super.prepareDemolish()}callback(e){if("select"===e){this.modalService.open(Pu.RECIPE);const e=this.modalService.registerForValueResponse().subscribe(n=>{e.unsubscribe(),null!==n&&(this.recipe=this.recipeService.getRecipeById(n),this.prepareIcons(),this.status=tE.PRODUCTION_SETUP)})}else if("change"===e){this.modalService.open(Pu.CONFIRM),this.modalService.setModalText("Are you sure you want to change production recipe?");const e=this.modalService.registerForConfirmation().subscribe(n=>{if(e.unsubscribe(),n){this.modalService.open(Pu.RECIPE),this.modalService.setModalValue(this.recipe.id);const e=this.modalService.registerForValueResponse().subscribe(n=>{e.unsubscribe(),null!==n&&(this.progress=0,this.recipe=this.recipeService.getRecipeById(n),this.prepareIcons(),this.status=tE.PRODUCTION_SETUP)})}})}}getLine(e){switch(e){case Mf.FIRST:return Lf.textValue(this.recipe?this.status.replace("{craft}",Ou.prepareResourceName(this.recipe.resource)):this.status);case Mf.SECOND:return Lf.progressValue(this.progress);case Mf.THIRD:return this.recipe?Lf.iconValue(this.iconsValue):Lf.emptyValue();case Mf.FOURTH:return null===this.recipe?Lf.buttonValue("select recipe","select"):Lf.buttonValue(Ou.prepareResourceName(this.recipe.resource),"change")}}tick(e){if(this.working)if(this.status===tE.PRODUCTION_SETUP)this.progress<100?(this.progress+=.5*this.getPower()/this.recipe.craftingDifficulty,this.progress>100&&(this.progress=100)):(this.progress=0,this.status=tE.FETCHING_MATERIALS);else if(this.status===tE.CRAFTING)this.progress<100?(this.progress+=this.getPower()/this.recipe.craftingDifficulty*po.VILLAGE.MANUFACTURE.CRAFTING_POWER,this.progress>100&&(this.progress=100)):(this.progress=0,this.storage=this.recipe.amount,this.status=tE.TRANSPORTING);else if(this.status===tE.FETCHING_MATERIALS||this.status===tE.WAITING_FOR_RESOURCES)this.status=this.resourcesService.decreaseResources(this.recipe.cost,this.getName(),!1,1,!0)?tE.CRAFTING:tE.WAITING_FOR_RESOURCES;else if(this.status===tE.TRANSPORTING||this.status===tE.WAITING_FOR_WAREHOUSE){const e=this.resourcesService.getLimit(this.recipe.resource);this.storage>e?(this.storage-=e,this.resourcesService.increaseResource(this.recipe.resource,e,this.getName()),this.status=tE.WAITING_FOR_WAREHOUSE):this.resourcesService.increaseResource(this.recipe.resource,this.storage,this.getName())&&(this.status=tE.FETCHING_MATERIALS)}}getRecipe(){return this.recipe}cancelCrafting(){this.recipe=null,this.progress=0,this.status=tE.NO_CRAFTING}}class sE extends Ff{constructor(e=null,n=-1,l=0,t=0,i=100,s=100,r=0,u=1,o=!0){super(e,n,tu.LONGHOUSE,po.VILLAGE.LONGHOUSE,l,t,i,s,r,u,o)}}class rE extends kf{constructor(e=null,n=-1,l=0,t=!1,i=fu.NONE,s=0,r=1){super(n,tu.EMBASSY,e,po.FORT.EMBASSY,t,!0,!0,r),this.progress=l,this.country=i,this.paper=s,this.servicesService&&(this.worldService=e.getWorldService())}toJSON(){return{id:this.id,level:this.level,working:this.working,progress:this.progress,country:this.country,paper:this.paper,buildingType:this.buildingType}}callback(e){this.country=fu[String(e.target.value)],this.progress=0}getLine(e){switch(e){case Mf.FIRST:const e=this.worldService.getCountriesList();return e.includes(fu[this.country])||(this.country=fu.NONE),Lf.dropdownValue(e,fu[this.country]);case Mf.SECOND:return this.country===fu.NONE?Lf.emptyValue():Lf.textValue("current standing: "+this.worldService.getCountry(this.country).diplomacy);case Mf.THIRD:return this.country===fu.NONE?Lf.emptyValue():Lf.progressValue(this.progress);case Mf.FOURTH:return this.paper<.5?Lf.textValue("No enough paper"):Lf.emptyValue()}}tick(e){this.working&&(this.paper<5&&this.resourcesService.decreaseResource(su.PAPER,1,this.getName())&&(this.paper+=1),this.country!==fu.NONE&&this.paper>=1&&this.worldService.getCountry(this.country).diplomacy<100&&(this.progress<100?(this.progress+=this.getPower(),this.progress>100&&(this.progress=100)):(this.progress=0,this.paper-=.5,this.worldService.getCountry(this.country).increaseDiplomacy(1))))}getDetails(){return super.getDetails()+"paper: "+this.paper}}class uE extends jf{constructor(e=null,n=-1,l=0,t=Kf.FETCHING_INPUT,i=[],s=[],r=!1,u=null,o=1){super(e,n,tu.PAPER_MILL,po.FOREST.PAPER_MILL,t,l,i,s,r,u,o)}}var oE=function(e){return e.MINING="mining {res}",e.WAITING_FOR_SELECTION="waiting for ore selection",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.LOOKING_FOR_NEW_ORE_VEIN="looking for new ore vein",e.WAITING_FOR_ORE_DEPOSIT="waiting for ore deposit",e.TRANSPORTING="transporting {res}",e}({});let aE=(()=>{class e extends BS{constructor(n=null,l=-1,t=0,i=oE.WAITING_FOR_SELECTION,s=0,r=0,u=20,o=0,a=su.NOTHING,c=1){super(l,tu.DEEP_MINE,n,po.MOUNTAINS.DEEP_MINE,r,e.maxWorkers,!0,!0,c),this.progress=t,this.status=i,this.storage=s,this.resources=u,this.oreToFind=o,this.ore=a,this.maxResources=20*c,this.servicesService&&(this.modalService=n.getModalService(),this.landService=n.getLandService())}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,storage:this.storage,workers:this.workers,resources:this.resources,oreToFind:this.oreToFind,ore:this.ore}}callback(e){if(this.ore===su.NOTHING)if(su[String(e.target.value).replace(" ","_")]===su.STONE){this.modalService.open(Pu.CONFIRM),this.modalService.setModalText("Are you sure you want to mine "+Ou.prepareResourceName(su[String(e.target.value).replace(" ","_")])+" in this mine?");const n=this.modalService.registerForConfirmation().subscribe(l=>{l?(this.ore=su[String(e.target.value).replace(" ","_")],this.status=oE.MINING,this.progress=0):e.target.selectedIndex=this.ore,n.unsubscribe()})}else if(this.landService.hasOre(su[String(e.target.value).replace(" ","_")],20)){this.modalService.open(Pu.CONFIRM),this.modalService.setModalText("Are you sure you want to mine "+Ou.prepareResourceName(su[String(e.target.value).replace(" ","_")])+" in this mine?");const n=this.modalService.registerForConfirmation().subscribe(l=>{l?(this.landService.decreaseOre(su[String(e.target.value).replace(" ","_")],20),this.ore=su[String(e.target.value).replace(" ","_")],this.status=oE.MINING,this.progress=0,this.startProduction()):e.target.selectedIndex=this.ore,n.unsubscribe()})}else this.modalService.info("Not enough "+Ou.prepareResourceName(su[String(e.target.value).replace(" ","_")])+" deposits available<br>20 "+Ou.prepareResourceName(su[String(e.target.value).replace(" ","_")])+" deposits required to start mining."),e.target.selectedIndex=this.ore;else"hire"===e?this.hireWorker():"fire"===e&&this.fireWorker()}hasBuff(){return!this.isUsedUp()&&super.hasBuff()}getLine(e){switch(e){case Mf.FIRST:if(this.ore!==su.NOTHING)return Lf.textValue(Ou.prepareResourceName(this.ore).toLowerCase()+": "+this.resources+"/"+this.maxResources);{const e=[];return e.push(su[su.NOTHING].replace("_"," ")),e.push(su[su.STONE].replace("_"," ")),e.push(su[su.COAL].replace("_"," ")),e.push(su[su.GOLD_ORE].replace("_"," ")),e.push(su[su.SILVER_ORE].replace("_"," ")),e.push(su[su.COPPER_ORE].replace("_"," ")),e.push(su[su.TIN_ORE].replace("_"," ")),e.push(su[su.IRON_ORE].replace("_"," ")),Lf.dropdownValue(e,su[this.ore])}case Mf.SECOND:return Lf.textValue(this.status.replace("{res}",Ou.prepareResourceName(this.ore).toLowerCase()));case Mf.THIRD:return this.ore!==su.NOTHING?Lf.progressValue(this.progress):Lf.emptyValue();case Mf.FOURTH:return this.ore!==su.NOTHING?Lf.twoButtonValue("hire worker","hire",this.workers+"/"+this.maxWorkers,"fire worker","fire"):Lf.emptyValue()}}tick(e){if(this.ore!==su.NOTHING){if(!this.isWorking())return;if(this.status===oE.LOOKING_FOR_NEW_ORE_VEIN||this.status===oE.WAITING_FOR_ORE_DEPOSIT){if(0===this.oreToFind)if(this.ore===su.STONE)this.oreToFind=this.maxResources;else{const e=this.landService.getOre(this.ore);if(!(e>0))return void(this.status=oE.WAITING_FOR_ORE_DEPOSIT);10*e>this.maxResources?(this.landService.decreaseOre(this.ore,this.maxResources/10),this.oreToFind=this.maxResources):(this.landService.decreaseOre(this.ore,e),this.oreToFind=10*e)}this.progress<100?(this.progress+=this.getPower()*this.workers/(this.oreToFind/this.getBuildingLevel()),this.progress>100&&(this.progress=100)):100===this.progress&&(this.progress=0,this.resources=this.oreToFind,this.oreToFind=0,this.status=oE.MINING)}else this.storage>0?this.resourcesService.increaseResource(this.ore,this.storage,this.getName())?(this.storage=0,Nu.chance(this.settings.GEM_CHANCE)&&this.resourcesService.increaseResource(su.GEMS,1,this.getName()),this.status=this.resources<=0?oE.LOOKING_FOR_NEW_ORE_VEIN:oE.MINING):this.status=oE.WAITING_FOR_WAREHOUSE_SPACE:this.progress<100?(this.status=oE.MINING,this.progress+=this.getPower()*this.workers,this.progress>100&&(this.progress=100)):100===this.progress&&(this.progress=0,this.resources-=1,this.storage=1,this.status=oE.TRANSPORTING)}}build(){return this.startProduction(),this}isStoppable(){return this.status!==oE.WAITING_FOR_SELECTION}setBuildingLevel(e){super.setBuildingLevel(e),this.maxResources=20*this.getBuildingLevel()}getBuildingData(){return[this.ore,this.resources,this.status]}setBuildingData(e){this.ore=e[0],this.resources=e[1],this.status=e[2],this.resources>0&&(this.status=oE.MINING)}}return e.maxWorkers=4,e})();var cE=function(e){return e.GATHERING_FOOD="gathering food",e.GATHERING_RESOURCES="gathering resources",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.TRANSPORTING="transporting",e}({}),hE=function(e){return e[e.FOOD=0]="FOOD",e[e.RESOURCES=1]="RESOURCES",e}({});let dE=(()=>{class e extends BS{constructor(n=null,l=-1,t=0,i=cE.GATHERING_FOOD,s=0,r=hE.FOOD,u=[],o=1){super(l,tu.GATHERERS_CAMP,n,po.FOREST.GATHERERS_CAMP,s,e.maxWorkers,!0,!0,o),this.progress=t,this.status=i,this.mode=r,this.storage=u,this.lastFind=[],this.servicesService&&(this.weatherService=n.getWeatherService())}rollForFind(){const e=[],n=1+this.storage.length/20;return this.mode===hE.FOOD?(this.storage.find(e=>e[0]===su.BERRY)||e.push({item:su.BERRY,chance:this.settings.BERRY_CHANCE*n}),this.storage.find(e=>e[0]===su.MUSHROOM)||e.push({item:su.MUSHROOM,chance:this.settings.MUSHROOM_CHANCE*n}),this.storage.find(e=>e[0]===su.WHEAT)||e.push({item:su.WHEAT,chance:this.settings.WHEAT_CHANCE*n}),this.storage.find(e=>e[0]===su.HERBS)||e.push({item:su.HERBS,chance:this.settings.HERBS_CHANCE*n})):this.mode===hE.RESOURCES&&(this.storage.find(e=>e[0]===su.BRUSHWOOD)||e.push({item:su.BRUSHWOOD,chance:this.settings.BRUSHWOOD_CHANCE*n}),this.storage.find(e=>e[0]===su.STONE)||e.push({item:su.STONE,chance:this.settings.STONE_CHANCE*n}),this.storage.find(e=>e[0]===su.LOG)||e.push({item:su.LOG,chance:this.settings.LOG_CHANCE*n}),this.storage.find(e=>e[0]===su.COPPER)||e.push({item:su.COPPER,chance:this.settings.COPPER_CHANCE*n}),this.storage.find(e=>e[0]===su.HERBS)||e.push({item:su.HERBS,chance:this.settings.HERBS_CHANCE*n})),Nu.randomElement(e)}build(){return this.servicesService.getManagementService().getDefaultGathererFood()||(this.mode=hE.RESOURCES,this.status=cE.GATHERING_RESOURCES),super.build()}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,workers:this.workers,storage:this.storage,mode:this.mode}}callback(e){e===hE.FOOD?(this.mode=hE.FOOD,this.progress=0,this.storage=[],this.lastFind=[],this.status=cE.GATHERING_FOOD):e===hE.RESOURCES?(this.mode=hE.RESOURCES,this.progress=0,this.storage=[],this.lastFind=[],this.status=cE.GATHERING_RESOURCES):"hire"===e?this.hireWorker():"fire"===e&&this.fireWorker()}getLine(e){switch(e){case Mf.FIRST:return this.mode===hE.FOOD?Lf.buttonValue("gather resources",hE.RESOURCES):Lf.buttonValue("gather food",hE.FOOD);case Mf.SECOND:return Lf.textValue(this.status);case Mf.THIRD:return Lf.progressValue(this.progress);case Mf.FOURTH:return Lf.twoButtonValue("hire worker","hire",this.workers+"/"+this.maxWorkers,"fire worker","fire")}}tick(e){if(this.isWorking())if(this.status===cE.TRANSPORTING||this.status===cE.WAITING_FOR_WAREHOUSE_SPACE)this.storage.forEach(e=>{this.resourcesService.increaseResource(e[0],1,this.getName())&&(e[1]-=1)}),this.storage=this.storage.filter(e=>e[1]>0),this.storage.length>=this.canFindN()?this.status=cE.WAITING_FOR_WAREHOUSE_SPACE:this.setStatus();else if(this.storage.length<this.canFindN()){if(this.progress<100)this.setStatus(),this.progress+=this.getPower(),this.progress>100&&(this.progress=100);else if(100===this.progress){this.progress=0,this.lastFind=[];for(let e=0;e<this.workers;e++){let e=this.rollForFind();null!==e&&this.resourcesService.increaseResource(e,1,this.getName())?this.lastFind.push(e):null===e||this.storage.find(n=>n[0]===e)?e=null:(this.storage.push([e,1]),this.status=cE.TRANSPORTING),this.storage.length>0&&(this.status=cE.TRANSPORTING),this.progress=0}}}else this.progress=0,this.status=cE.WAITING_FOR_WAREHOUSE_SPACE}canFindN(){return this.mode===hE.FOOD?4:5}getDetails(){let e="last find:<br>";this.lastFind&&this.lastFind.length>0?this.lastFind.forEach(n=>{e+=Ou.prepareResourceName(n)+"<br>"}):e+="nothing<br>";let n="";return e.length>"last find:<br>".length&&(n=e),n+="local storage:<br>",this.storage.forEach(e=>{n+=Ou.prepareResourceName(e[0])+": "+e[1]+"<br>"}),super.getDetails()+n}setStatus(){this.status=this.mode===hE.FOOD?cE.GATHERING_FOOD:cE.GATHERING_RESOURCES}}return e.maxWorkers=5,e})();class gE extends kf{constructor(e=null,n=-1,l=hu.NONE,t=50,i=1){super(n,tu.BARN,e,po.FIELD.BARN,!1,!0,!1,i),this.crop=l,this.storage=t,this.servicesService&&(this.modalService=e.getModalService())}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,crop:this.crop,storage:this.storage}}callback(e){if(this.crop===hu.NONE)this.crop=hu[String(e.target.value)],this.resourcesService.increaseResourceLimit(su[hu[this.crop]],6*this.storage);else{this.modalService.open(Pu.CONFIRM),this.modalService.setModalText("Are you sure you want to switch barn storage type?<br>All excess resources will be lost");const n=this.modalService.registerForConfirmation().subscribe(l=>{l?(this.resourcesService.decreaseResourceLimit(su[hu[this.crop]],6*this.storage),this.crop=hu[String(e.target.value)],this.resourcesService.increaseResourceLimit(su[hu[this.crop]],6*this.storage)):e.target.selectedIndex=this.crop-1,n.unsubscribe()})}}getComplexity(){return super.getComplexity()*(this.storage/this.settings.SIZE)}getSize(){return this.storage}getLine(e){switch(e){case Mf.FIRST:return this.firstLine();case Mf.SECOND:return Lf.textValue("storage: "+6*this.storage);case Mf.THIRD:case Mf.FOURTH:return Lf.emptyValue()}}firstLine(){const e=[];return e.push(hu[hu.NONE]),e.push(hu[hu.WHEAT]),e.push(hu[hu.HAY]),e.push(hu[hu.BERRY]),e.push(hu[hu.MUSHROOM]),this.resourcesService.getResource(su.BARLEY).isVisible()&&e.push(hu[hu.BARLEY]),this.resourcesService.getResource(su.HOP).isVisible()&&e.push(hu[hu.HOP]),this.resourcesService.getResource(su.COTTON).isVisible()&&e.push(hu[hu.COTTON]),this.resourcesService.getResource(su.HERBS).isVisible()&&e.push(hu[hu.HERBS]),Lf.dropdownValue(e,hu[this.crop])}prepareDemolish(){return this.crop!==hu.NONE&&this.resourcesService.decreaseResourceLimit(su[hu[this.crop]],6*this.storage),!0}startProduction(){return!1}stopProduction(){}fireWorker(){return!1}hireWorker(){return!1}getWorkers(){return 0}getHappinessEffect(){return 0}isCombinable(){return!0}isSplittable(){return!0}combine(e,n){if(this.getBuildingType()===e.getBuildingType()){this.modalService.open(Pu.CONFIRM),this.modalService.setModalText(" Are you sure you want to combine "+this.getName()+" of size "+this.getSize()+" with "+e.getName()+" of size "+e.getSize()+"?<br>Resulting "+this.getName()+" of size "+(this.getSize()+e.getSize())+" will store <b>"+Ou.prepareCropName(this.crop)+"</b><br>All resources exceeding decreased limit of <b>"+Ou.prepareCropName(e.crop)+"</b> will be lost");const l=this.modalService.registerForConfirmation().subscribe(t=>{l.unsubscribe(),t?(this.storage+=e.getSize(),this.crop!==hu.NONE&&this.resourcesService.increaseResourceLimit(su[hu[this.crop]],6*e.getSize()),n.finaliseCombine(!0)):n.finaliseCombine(!1)})}}split(e){this.modalService.open(Pu.INPUT),this.modalService.setModalText("Set split size (1-"+(this.getSize()-1)+")"),this.modalService.setModalValue("");const n=this.modalService.registerForValueResponse().subscribe(l=>{n.unsubscribe(),null!==l&&(isNaN(l)||0===l||(l>=1&&l<this.getSize()?(this.storage-=Number(l),e.finaliseSplit(new gE(this.servicesService,this.servicesService.getIdService().getNextId(),this.crop,Number(l)).build())):this.modalService.info("Invalid size value!")))})}}var pE=function(e){return e.COOKING="cooking {craft}",e.WAITING_FOR_WAREHOUSE="waiting for {craft} space",e.NO_COOKING="nothing to cook",e}({});class mE extends kf{constructor(e=null,n=-1,l=0,t=pE.NO_COOKING,i=!1,s=-1,r=null,u=1,o=0){super(n,tu.KITCHEN,e,po.VILLAGE.KITCHEN,i,!0,!0,u),this.progress=l,this.status=t,this.storage=o,this.recipe=null,this.icon=null,this.servicesService&&(r?this.recipe=r:s>=0&&(this.recipe=this.servicesService.getRecipeService().getRecipeById(s)),this.craftingService=e.getService(bu.CRAFTING),this.gameService=e.getGameService())}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,working:this.working,recipeId:null!==this.recipe?this.recipe.id:-1,storage:this.storage}}build(){return this.startProduction(),this.craftingService.increaseCookingQueueSize(1),this}prepareDemolish(){return this.craftingService.decreaseCookingQueueSize(1),super.prepareDemolish()}callback(e){"cancel"===e&&(this.recipe=null,this.progress=0,this.status=pE.NO_COOKING)}getLine(e){switch(e){case Mf.FIRST:return Lf.emptyValue();case Mf.SECOND:return this.recipe?(this.icon||(this.prepareIcon(),this.status===pE.COOKING?this.icon[0].prefix="cooking ":this.status===pE.WAITING_FOR_WAREHOUSE&&(this.icon[0].prefix="waiting for ",this.icon[0].suffix=" space")),Lf.iconValue(this.icon)):Lf.textValue(this.status.replace("{craft}","warehouse"));case Mf.THIRD:return this.recipe?Lf.buttonValue("cancel cooking","cancel"):Lf.emptyValue();case Mf.FOURTH:return Lf.progressValue(this.progress)}}tick(e){if(this.working)if(null===this.recipe&&(this.recipe=this.craftingService.getCookingOrder(),this.icon=null,this.progress=0),null===this.recipe)this.status=pE.NO_COOKING;else if(this.status===pE.WAITING_FOR_WAREHOUSE){const e=this.resourcesService.getLimit(this.recipe.resource);this.storage>e?(this.storage-=e,this.resourcesService.increaseResource(this.recipe.resource,e,this.getName())):(this.resourcesService.increaseResource(this.recipe.resource,this.storage,this.getName()),this.status=pE.COOKING,this.progress=0,this.recipe=null)}else if(this.status=pE.COOKING,this.progress<100&&(this.progress+=this.getPower()/this.recipe.craftingDifficulty*po.VILLAGE.KITCHEN.CRAFTING_POWER),this.progress>=100){this.progress=100,this.storage=this.recipe.amount;const e=this.resourcesService.getLimit(this.recipe.resource);this.storage>e?(this.storage-=e,this.resourcesService.increaseResource(this.recipe.resource,e,this.getName()),this.status=pE.WAITING_FOR_WAREHOUSE,this.icon=null):this.resourcesService.increaseResource(this.recipe.resource,this.storage,this.getName())?(this.progress=0,this.storage=0,this.recipe=null):(this.status=pE.WAITING_FOR_WAREHOUSE,this.icon=null)}}getRecipe(){return this.recipe}cancelCooking(){this.recipe=null}prepareIcon(){this.recipe&&(this.icon=[{name:Ou.prepareResourceName(this.recipe.resource),path:"resources",prefix:"",suffix:""}])}}var fE=function(e){return e.DIGGING_CLAY="digging clay",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.NO_MORE_RESOURCES="no more resources",e.TRANSPORTING="transporting",e}({});class SE extends kf{constructor(e=null,n=-1,l=0,t=fE.DIGGING_CLAY,i=!1,s=0,r=400,u=1){super(n,tu.CLAY_PIT,e,po.FIELD.CLAY_PIT,i,!0,!0,u),this.progress=l,this.status=t,this.storage=s,this.resources=r}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,working:this.working,storage:this.storage,resources:this.resources}}getLine(e){switch(e){case Mf.FIRST:return Lf.textValue("clay: "+this.resources);case Mf.SECOND:return Lf.textValue(this.status);case Mf.THIRD:return Lf.progressValue(this.progress);case Mf.FOURTH:return Lf.emptyValue()}}isStoppable(){return this.resources>0}isUsedUp(){return this.status===fE.NO_MORE_RESOURCES}hasBuff(){return!this.isUsedUp()&&super.hasBuff()}tick(e){this.resources<=0&&(this.status!==fE.NO_MORE_RESOURCES&&this.servicesService.getLogService().warning("Clay pit has no more clay"),this.status=fE.NO_MORE_RESOURCES,this.stopProduction()),this.working&&(this.storage>0?this.resourcesService.increaseResource(su.CLAY,this.storage,this.getName())?(this.storage=0,this.status=fE.DIGGING_CLAY):this.status=fE.WAITING_FOR_WAREHOUSE_SPACE:this.progress<100?(this.status=fE.DIGGING_CLAY,this.progress+=this.getPower(),this.progress>100&&(this.progress=100)):100===this.progress&&(this.progress=0,this.resources-=1,this.storage=1,this.status=fE.TRANSPORTING))}}class EE extends Ff{constructor(e=null,n=-1,l=0,t=0,i=100,s=100,r=0,u=1,o=!0){super(e,n,tu.TUDOR_HOUSE,po.VILLAGE.TUDOR_HOUSE,l,t,i,s,r,u,o)}}var vE=function(e){return e.CHOPPING_TREES="chopping {amount} tree{plural}",e.WAITING_FOR_TREES="waiting for trees",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.TRANSPORTING_LOG="transporting log",e}({});let RE=(()=>{class e extends BS{constructor(n=null,l=-1,t=0,i=0,s=vE.WAITING_FOR_TREES,r=0,u=1){super(l,tu.LOGGERS_CAMP,n,po.FOREST.LOGGERS_CAMP,r,e.maxWorkers,!0,!0,u),this.progress=t,this.reservedTrees=i,this.status=s,this.servicesService&&(this.landService=n.getLandService())}getLine(e){switch(e){case Mf.FIRST:return Lf.emptyValue();case Mf.SECOND:let e=this.status.replace("{amount}",""+this.reservedTrees);return e=e.replace("{plural}",1===this.reservedTrees?"":"s"),Lf.textValue(e);case Mf.THIRD:return Lf.progressValue(this.progress);case Mf.FOURTH:return Lf.twoButtonValue("hire worker","hire",this.workers+"/"+this.maxWorkers,"fire worker","fire")}}callback(e){"hire"===e?this.hireWorker():"fire"===e&&this.fireWorker()}tick(){if(this.isWorking())if(this.status===vE.WAITING_FOR_TREES){const e=Math.min(this.workers,this.landService.getForest(),this.landService.getForest());this.landService.reduceForest(e)&&(this.reservedTrees=e,this.status=vE.CHOPPING_TREES)}else if(this.status===vE.CHOPPING_TREES)this.progress<100?(this.progress+=this.getPower()*(this.getWorkers()/this.reservedTrees),this.progress>=100&&(this.progress=100)):(this.progress=0,this.status=vE.TRANSPORTING_LOG);else if(this.status===vE.TRANSPORTING_LOG||this.status===vE.WAITING_FOR_WAREHOUSE_SPACE)if(this.resourcesService.increaseResource(su.LOG,this.reservedTrees,this.getName())){this.landService.increaseLand(this.reservedTrees,!0);const e=Math.min(this.workers,this.landService.getForest(),this.landService.getForest());this.landService.reduceForest(e)?(this.reservedTrees=e,this.status=vE.CHOPPING_TREES):this.status=vE.WAITING_FOR_TREES}else{const e=this.resourcesService.getLimit(su.LOG),n=Math.min(e,this.reservedTrees);this.reservedTrees-=n,this.landService.increaseLand(n,!0),this.resourcesService.increaseResource(su.LOG,n,this.getName()),this.status=vE.WAITING_FOR_WAREHOUSE_SPACE}}prepareDemolish(){return this.landService.increaseForest(this.reservedTrees,!1),this.stopProduction(),!0}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,workers:this.workers,reservedTrees:this.reservedTrees}}getDetails(){return this.status===vE.WAITING_FOR_WAREHOUSE_SPACE?super.getDetails()+"local storage:<br>&nbsp;&nbsp;logs: "+this.reservedTrees:super.getDetails()}}return e.maxWorkers=5,e})();var OE=function(e){return e.MINING="mining {res}",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.NO_MORE_RESOURCES="no more {res}",e.TRANSPORTING="transporting {res}",e}({});let TE=(()=>{class e extends BS{constructor(n=null,l=-1,t=20,i=su.NOTHING,s=0,r=OE.MINING,u=0,o=0,a=1){super(l,tu.METEORITE,n,po.MOUNTAINS.METEORITE,o,e.maxWorkers,!0,!0,a),this.resources=t,this.ore=i,this.progress=s,this.status=r,this.storage=u}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,storage:this.storage,workers:this.workers,resources:this.resources,ore:this.ore}}isUsedUp(){return this.status===OE.NO_MORE_RESOURCES}callback(e){"hire"===e?this.hireWorker():"fire"===e&&this.fireWorker()}getLine(e){switch(e){case Mf.FIRST:return Lf.textValue(Ou.prepareResourceName(this.ore).toLowerCase()+": "+this.resources);case Mf.SECOND:return Lf.textValue(this.status.replace("{res}",Ou.prepareResourceName(this.ore).toLowerCase()));case Mf.THIRD:return this.resources>0?Lf.progressValue(this.progress):Lf.emptyValue();case Mf.FOURTH:return this.resources>0?Lf.twoButtonValue("hire worker","hire",this.workers+"/"+this.maxWorkers,"fire worker","fire"):Lf.emptyValue()}}tick(e){this.resources<=0&&0===this.storage&&(this.status!==OE.NO_MORE_RESOURCES&&this.servicesService.getLogService().warning("Meteorite fully mined "+Ou.prepareResourceName(this.ore)),this.status=OE.NO_MORE_RESOURCES,this.stopProduction()),this.isWorking()&&(this.storage>0?this.resourcesService.increaseResource(this.ore,this.storage,this.getName())?(this.storage=0,this.status=OE.MINING):this.status=OE.WAITING_FOR_WAREHOUSE_SPACE:this.resources>0&&this.progress<100?(this.status=OE.MINING,this.progress+=this.getPower()*this.workers,this.progress>100&&(this.progress=100)):100===this.progress&&(this.progress=0,this.resources-=1,this.storage=1,this.status=OE.TRANSPORTING))}build(){return this}isStoppable(){return this.resources>0}}return e.maxWorkers=4,e})();class CE extends kf{constructor(e=null,n=-1,l=1){super(n,tu.PIER,e,po.SEA.PIER,!1,!0,!1,l)}getLine(e){switch(e){case Mf.FIRST:return Lf.textValue("size: "+this.getSize());case Mf.SECOND:return Lf.textValue("space for ships: "+this.settings.HARBOUR_SIZE);case Mf.THIRD:case Mf.FOURTH:return Lf.emptyValue()}}toJSON(){return{buildingType:this.buildingType,id:this.id,level:this.level}}build(){return this.servicesService.getNavyService().increaseHarbourSize(this.settings.HARBOUR_SIZE),this}prepareDemolish(){return this.servicesService.getNavyService().decreaseHarbourSize(this.settings.HARBOUR_SIZE),super.prepareDemolish()}}class IE extends kf{constructor(e=null,n=-1,l=1){super(n,tu.HARBOUR,e,po.SEA.HARBOUR,!1,!0,!1,l)}getLine(e){switch(e){case Mf.FIRST:return Lf.textValue("size: "+this.getSize());case Mf.SECOND:return Lf.textValue("space for ships: "+this.settings.HARBOUR_SIZE);case Mf.THIRD:case Mf.FOURTH:return Lf.emptyValue()}}toJSON(){return{buildingType:this.buildingType,id:this.id,level:this.level}}build(){return this.servicesService.getNavyService().increaseHarbourSize(this.settings.HARBOUR_SIZE),this}prepareDemolish(){return this.servicesService.getNavyService().decreaseHarbourSize(this.settings.HARBOUR_SIZE),super.prepareDemolish()}}var bE=function(e){return e.LIGHT_BURNING="light burning",e.WAITING_FOR_FUEL="waiting for fuel",e}({});class yE extends kf{constructor(e=null,n=-1,l=bE.LIGHT_BURNING,t=0,i=!1,s=1){super(n,tu.LIGHTHOUSE,e,po.SEA.LIGHTHOUSE,i,!0,!0,s),this.status=l,this.fuel=t,e&&(this.worldService=e.getWorldService())}getLine(e){switch(e){case Mf.FIRST:return Lf.textValue("size: "+this.getSize());case Mf.SECOND:return Lf.textValue(this.status);case Mf.THIRD:return Lf.textValue("fuel: "+Ou.round(this.fuel,2));case Mf.FOURTH:return Lf.emptyValue()}}tick(e){this.working&&(this.fuel<5?this.resourcesService.decreaseResource(su.FUEL,1,this.getName())&&(this.fuel+=1):this.fuel<=0&&(this.status=bE.WAITING_FOR_FUEL),this.worldService.getPlayerSeaMissions().length>0&&this.fuel>=.005&&(this.fuel-=.005))}isBurning(){return this.status===bE.LIGHT_BURNING&&this.isWorking()}toJSON(){return{buildingType:this.buildingType,id:this.id,status:this.status,working:this.working,fuel:this.fuel,level:this.level}}}var AE=function(e){return e.BUILDING_SHIP="building {ship}",e.WAITING_FOR_ORDER="waiting for order",e}({});class NE extends kf{constructor(e=null,n=-1,l=0,t=AE.WAITING_FOR_ORDER,i=!1,s=null,r=1){super(n,tu.BOAT_BUILDER,e,po.SEA.BOAT_BUILDER,i,!0,!0,r),this.progress=l,this.status=t,this.ship=s,e&&(this.resourcesService=e.getResourcesService(),this.modalService=e.getModalService(),this.navyService=e.getNavyService())}toJSON(){return{buildingType:this.buildingType,id:this.id,progress:this.progress,status:this.status,working:this.working,ship:this.ship,level:this.level}}build(){return this.startProduction(),this.gameService.isEnabled(ou.NAVY)||(this.gameService.enable(ou.NAVY),this.logService.log("Navy tab unlocked")),this}callback(e){if("select"===e){this.modalService.open(Pu.SHIPYARD),this.modalService.setShipyardLimitBoat(!0);const e=this.modalService.registerForValueResponse().subscribe(n=>{e.unsubscribe(),null!==n&&(this.ship=n,this.status=AE.BUILDING_SHIP)})}else if("cancel"===e){this.modalService.open(Pu.CONFIRM),this.modalService.setModalText("Are you sure you want to cancel building "+Ou.prepareTroopName(this.ship)+"?");const e=this.modalService.registerForConfirmation().subscribe(n=>{e.unsubscribe(),n&&(this.ship=null,this.progress=0,this.status=AE.WAITING_FOR_ORDER)})}}getLine(e){switch(e){case Mf.FIRST:return Lf.textValue(this.ship?this.status.replace("{ship}",Ou.prepareTroopName(this.ship)):this.status);case Mf.SECOND:return this.ship?Lf.progressValue(this.progress):Lf.emptyValue();case Mf.THIRD:return null===this.ship?Lf.buttonValue("select ship","select"):Lf.buttonValue("cancel "+Ou.prepareTroopName(this.ship),"cancel");case Mf.FOURTH:return Lf.emptyValue()}}tick(e){null!=this.ship&&this.ship===pu.BOAT||(this.ship=null,this.status=AE.WAITING_FOR_ORDER),this.working&&this.status===AE.BUILDING_SHIP&&(this.progress<100?(this.progress+=this.getPower()/fo.getTroop(this.ship).SIZE,this.progress>100&&(this.progress=100)):(this.progress=0,this.navyService.addShip(this.ship),this.ship=null,this.status=AE.WAITING_FOR_ORDER))}getShipSize(){return(null==this.ship||this.ship!==pu.BOAT&&this.ship!==pu.BRIGANTINE&&this.ship!==pu.GALLEON)&&(this.ship=null,this.status=AE.WAITING_FOR_ORDER),this.ship?fo.getTroop(this.ship).SIZE:0}}var _E=function(e){return e.BUILDING_SHIP="building {ship}",e.WAITING_FOR_ORDER="waiting for order",e}({});let wE=(()=>{class e extends BS{constructor(n=null,l=-1,t=0,i=_E.WAITING_FOR_ORDER,s=0,r=null,u=1){super(l,tu.SHIPYARD,n,po.SEA.SHIPYARD,s,e.maxWorkers,!0,!0,u),this.progress=t,this.status=i,this.ship=r,n&&(this.resourcesService=n.getResourcesService(),this.modalService=n.getModalService(),this.navyService=n.getNavyService())}toJSON(){return{buildingType:this.buildingType,id:this.id,progress:this.progress,status:this.status,workers:this.workers,ship:this.ship,level:this.level}}build(){return this.startProduction(),this.gameService.isEnabled(ou.NAVY)||(this.gameService.enable(ou.NAVY),this.logService.log("Navy tab unlocked")),this}callback(e){if("select"===e){this.modalService.open(Pu.SHIPYARD),this.modalService.setShipyardLimitBoat(!1);const e=this.modalService.registerForValueResponse().subscribe(n=>{e.unsubscribe(),null!==n&&(this.ship=n,this.status=_E.BUILDING_SHIP)})}else if("cancel"===e){this.modalService.open(Pu.CONFIRM),this.modalService.setModalText("Are you sure you want to cancel building "+Ou.prepareTroopName(this.ship)+"?");const e=this.modalService.registerForConfirmation().subscribe(n=>{e.unsubscribe(),n&&(this.ship=null,this.progress=0,this.status=_E.WAITING_FOR_ORDER)})}else"hire"===e?this.hireWorker():"fire"===e&&this.fireWorker()}getLine(e){switch(e){case Mf.FIRST:return Lf.textValue(this.ship?this.status.replace("{ship}",Ou.prepareTroopName(this.ship)):this.status);case Mf.SECOND:return this.ship?Lf.progressValue(this.progress):Lf.emptyValue();case Mf.THIRD:return null===this.ship?Lf.buttonValue("select ship","select"):Lf.buttonValue("cancel "+Ou.prepareTroopName(this.ship),"cancel");case Mf.FOURTH:return Lf.twoButtonValue("hire worker","hire",this.workers+"/"+this.maxWorkers,"fire worker","fire")}}tick(e){(null==this.ship||this.ship!==pu.BOAT&&this.ship!==pu.BRIGANTINE&&this.ship!==pu.GALLEON)&&(this.ship=null,this.status=_E.WAITING_FOR_ORDER),this.isWorking()&&this.status===_E.BUILDING_SHIP&&(this.progress<100?(this.progress+=this.getPower()/fo.getTroop(this.ship).SIZE*this.workers,this.progress>100&&(this.progress=100)):(this.progress=0,this.navyService.addShip(this.ship),this.ship=null,this.status=_E.WAITING_FOR_ORDER))}getShipSize(){return(null==this.ship||this.ship!==pu.BOAT&&this.ship!==pu.BRIGANTINE&&this.ship!==pu.GALLEON)&&(this.ship=null,this.status=_E.WAITING_FOR_ORDER),this.ship?fo.getTroop(this.ship).SIZE:0}}return e.maxWorkers=10,e})();var PE=function(e){return e.DRAWING_MAP="drawing map",e.WAITING_FOR_CARTOGRAPHY_DATA="waiting for cartography data",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e}({});class ME extends kf{constructor(e=null,n=-1,l=0,t=PE.WAITING_FOR_CARTOGRAPHY_DATA,i=!1,s=1){super(n,tu.CARTOGRAPHER,e,po.SEA.CARTOGRAPHER,i,!0,!0,s),this.progress=l,this.status=t,this.servicesService&&(this.resourcesService=e.getResourcesService(),this.navyService=e.getNavyService())}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,working:this.working,status:this.status}}build(){return this.servicesService.getResourcesService().makeVisible(su.MAP),super.build()}getLine(e){switch(e){case Mf.FIRST:return Lf.textValue(this.status);case Mf.SECOND:return Lf.progressValue(this.progress);case Mf.THIRD:return Lf.progressValue(this.navyService.getMapProgress(),"map progress");case Mf.FOURTH:return Lf.emptyValue()}}tick(e){this.working&&(this.status===PE.WAITING_FOR_CARTOGRAPHY_DATA?this.navyService.decreaseCartographyData(1)&&(this.status=PE.DRAWING_MAP):this.status===PE.DRAWING_MAP?this.progress<100?(this.progress+=this.getPower(),this.progress>100&&(this.progress=100)):this.navyService.getMapProgress()<100?(this.navyService.addMapProgress(),this.progress=0,this.status=PE.WAITING_FOR_CARTOGRAPHY_DATA):this.status=PE.WAITING_FOR_WAREHOUSE_SPACE:this.status===PE.WAITING_FOR_WAREHOUSE_SPACE&&(this.navyService.getMapProgress()>=100?this.navyService.createMap()&&(this.status=PE.WAITING_FOR_CARTOGRAPHY_DATA):this.status=PE.WAITING_FOR_CARTOGRAPHY_DATA))}}class DE extends Ff{constructor(e=null,n=-1,l=0,t=0,i=100,s=100,r=0,u=1,o=!0){super(e,n,tu.SETTLEMENT,po.VILLAGE.SETTLEMENT,l,t,i,s,r,u,o)}}var LE=function(e){return e.RESEARCHING="researching",e.NO_RESEARCH="nothing to research",e}({});class xE extends kf{constructor(e=null,n=-1,l=0,t=LE.NO_RESEARCH,i=!1,s=1){super(n,tu.SCHOLARS_LAB,e,po.VILLAGE.SCHOLARS_LAB,i,!0,!0,s),this.progress=l,this.status=t,this.servicesService&&(this.techService=e.getTechService(),this.gameService=e.getGameService())}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,working:this.working}}build(){return this.startProduction(),this}getLine(e){switch(e){case Mf.FIRST:let e="";return this.techService.getCurrentResearch()&&(e=Ou.prepareTechName(this.techService.getCurrentResearch().getTech())),Lf.textValue(e);case Mf.SECOND:return Lf.progressValue(this.progress);case Mf.THIRD:case Mf.FOURTH:return Lf.emptyValue()}}tick(e){this.working&&(this.techService.isResearchStarted()?(this.status!==LE.RESEARCHING&&(this.progress=0),this.status=LE.RESEARCHING,this.progress+=this.getPower(),this.progress>=100&&(this.progress=0,this.techService.progressTech(po.VILLAGE.SCHOLARS_LAB.RESEARCH_POWER))):(this.status=LE.NO_RESEARCH,this.progress=0))}}var kE=function(e){return e.COLLECTING_TAX="collecting tax",e.GIVING_DONATIONS="giving donations",e.WAITING_FOR_COINS="waiting for coins",e}({});class FE extends kf{constructor(e=null,n=-1,l=!1,t=kE.COLLECTING_TAX,i=0,s=1){super(n,tu.TAX_COLLECTOR,e,po.VILLAGE.TAX_COLLECTOR,l,!0,!0,s),this.status=t,this.progress=i,this.servicesService&&(this.happinessService=e.getHappinessService())}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,status:this.status,working:this.working,progress:this.progress}}callback(e){"tax"===e?(this.progress=0,this.status=kE.COLLECTING_TAX):"donate"===e&&(this.progress=0,this.status=kE.GIVING_DONATIONS)}getLine(e){switch(e){case Mf.FIRST:return this.status===kE.COLLECTING_TAX?Lf.buttonValue("give donations","donate"):Lf.buttonValue("collect tax","tax");case Mf.SECOND:return 0===Number(this.servicesService.getManagementService().getTaxRate())?Lf.textValue("0% tax/donation"):Lf.textValue(this.status);case Mf.THIRD:return Lf.progressValue(this.progress);case Mf.FOURTH:return Lf.emptyValue()}}tick(e){if(!this.working)return;const n=this.servicesService.getManagementService();if(0!==Number(n.getTaxRate()))if(this.status===kE.WAITING_FOR_COINS&&this.resourcesService.decreaseResource(su.COINS,this.calculateTax(),this.getName())&&(this.status=kE.GIVING_DONATIONS),this.progress<100)this.progress+=100/300,this.progress>100&&(this.progress=100);else{this.progress=0;const e=this.calculateTax(),n=Number(this.servicesService.getManagementService().getTaxRate());e>0&&(this.status===kE.COLLECTING_TAX?(this.resourcesService.increaseResource(su.COINS,e,this.getName()),this.updateHappinessEffect(-2*n,Ru.TAX)):(this.updateHappinessEffect(n,Ru.DONATION),this.resourcesService.decreaseResource(su.COINS,e,this.getName()),this.resourcesService.decreaseResource(su.COINS,e,this.getName())||(this.status=kE.WAITING_FOR_COINS)))}else this.progress=0}calculateTax(){let e=0;this.servicesService.getVillageService().getHousingBuildings().map(e=>e).forEach(n=>e+=po.getBuilding(n.getBuildingType()).TAX*n.getOccupants());const n=Number(this.servicesService.getManagementService().getTaxRate());return e*=n,e}updateHappinessEffect(e,n){const l=this.servicesService.getHappinessService(),t=l.getHappinessEffectByEffect(n);t?t.value=e:l.addHappinessEffect(0,n,e,29)}getHappinessEffect(){return 0}getEffects(){return 0}getPermanentEffects(){return 0}}var UE=function(e){return e.WORKING_AT_CONSTRUCTION="working at {}",e.WAITING_FOR_BUILDINGS="waiting for building sites",e.NO_SUPERVISOR="no supervisor",e}({});class HE extends kf{constructor(e=null,n=-1,l=!0,t=UE.WAITING_FOR_BUILDINGS,i=1){super(n,tu.BUILDERS_GUILD,e,po.VILLAGE.BUILDERS_GUILD,!0,!0,!0,i),this.status=t,this.currentWorkplaceName="",this.servicesService&&(this.happinessService=e.getHappinessService(),this.regionsService=e.getRegionsService())}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,status:this.status,working:this.working}}getLine(e){switch(e){case Mf.FIRST:return this.working?Lf.textValue("available workers: "+this.resourcesService.getPeople()):Lf.emptyValue();case Mf.SECOND:return Lf.textValue(this.status.replace("{}",this.currentWorkplaceName));case Mf.THIRD:case Mf.FOURTH:return Lf.emptyValue()}}tick(e){if(!this.working)return;const n=this.resourcesService.getPeople();if(n>0){let e=this.regionsService.getAllBuildingSites();if(e=e.sort((e,n)=>e.isWorking()&&n.isWorking()?e.getProgress()-n.getProgress():e.isWorking()&&!n.isWorking()?1:-1),0===e.length)this.status=UE.WAITING_FOR_BUILDINGS;else{this.status=UE.WORKING_AT_CONSTRUCTION;const l=e[0];this.currentWorkplaceName=Ou.prepareBuildingName(l.getWorkingAt()),l.increaseProgress(n*this.getPower())}}}stopProduction(){this.status=UE.NO_SUPERVISOR,super.stopProduction()}}let GE=(()=>{class e{constructor(e,n){this.servicesService=e,this.idService=n,e.addService(bu.BUILDING_FACTORY,this)}loadBuilding(e){return null==e.id&&(e.id=this.idService.getNextId()),void 0!==e.progress&&null===e.progress&&(e.progress=0),e.buildingType===tu.HUT?new Uf(this.servicesService,e.id,e.occupants,e.progress,e.food,e.fuel,e.clothes,e.level,void 0===e.enabled||e.enabled):e.buildingType===tu.HOUSE?new Hf(this.servicesService,e.id,e.occupants,e.progress,e.food,e.fuel,e.clothes,e.level,void 0===e.enabled||e.enabled):e.buildingType===tu.LONGHOUSE?new sE(this.servicesService,e.id,e.occupants,e.progress,e.food,e.fuel,e.clothes,e.level,void 0===e.enabled||e.enabled):e.buildingType===tu.TUDOR_HOUSE?new EE(this.servicesService,e.id,e.occupants,e.progress,e.food,e.fuel,e.clothes,e.level,void 0===e.enabled||e.enabled):e.buildingType===tu.SETTLEMENT?new DE(this.servicesService,e.id,e.occupants,e.progress,e.food,e.fuel,e.clothes,e.level,void 0===e.enabled||e.enabled):e.buildingType===tu.BAKERY?new SS(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===tu.TAILOR?new yS(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===tu.WORKSHOP?new iS(this.servicesService,e.id,e.progress,e.status,e.mode,e.working,void 0!==e.recipeId?e.recipeId:-1,e.recipe,e.level,void 0!==e.storage?e.storage:0):e.buildingType===tu.SCHOLARS_LAB?new xE(this.servicesService,e.id,e.progress,e.status,e.working,e.level):e.buildingType===tu.KITCHEN?new mE(this.servicesService,e.id,e.progress,e.status,e.working,e.recipeId,e.recipe,e.level,e.storage):e.buildingType===tu.MANUFACTURE?new iE(this.servicesService,e.id,e.progress,e.status,e.working,e.recipe,e.level,e.storage):e.buildingType===tu.WAREHOUSE?new sS(this.servicesService,e.id,e.resource,void 0!==e.storage?e.storage:50,e.level):e.buildingType===tu.MARKETPLACE?new zS(this.servicesService,e.id,e.progress,e.level):e.buildingType===tu.TAX_COLLECTOR?new FE(this.servicesService,e.id,e.working,e.status,e.progress,e.level):e.buildingType===tu.BUILDERS_GUILD?new HE(this.servicesService,e.id,e.working,e.status,e.level):e.buildingType===tu.TAVERN?new PS(this.servicesService,e.id,e.progress,e.beer,e.wine,e.working,e.level):e.buildingType===tu.SHRINE?new aS(this.servicesService,e.id,e.progress,e.level):e.buildingType===tu.CHURCH?new KS(this.servicesService,e.id,e.working,e.progress,e.level):e.buildingType===tu.BARRACKS?new RS(this.servicesService,e.id,e.barracksSize,e.level):e.buildingType===tu.EMBASSY?new rE(this.servicesService,e.id,e.progress,e.working,e.country,e.paper,e.level):e.buildingType===tu.TRAINING_SQUARE?new TS(this.servicesService,e.id,e.progress,e.working,e.status,e.level,void 0!==e.workSettings?e.workSettings:null):e.buildingType===tu.STOCKADE?new IS(this.servicesService,e.id,e.health,e.durability,e.progress,e.working,e.level):e.buildingType===tu.WOODEN_TOWER?new NS(this.servicesService,e.id,e.health,e.durability,e.progress,e.working,e.level):e.buildingType===tu.STONE_TOWER?new _S(this.servicesService,e.id,e.health,e.durability,e.progress,e.working,e.level):e.buildingType===tu.STASH?new nE(this.servicesService,e.id,e.level):e.buildingType===tu.LOGGERS_HUT?new Bf(this.servicesService,e.id,e.progress,void 0!==e.reservedTrees?e.reservedTrees:0,e.status,e.working,e.level):e.buildingType===tu.LOGGERS_CAMP?new RE(this.servicesService,e.id,e.progress,e.reservedTrees,e.status,e.workers,e.level):e.buildingType===tu.GATHERER?new Jf(this.servicesService,e.id,e.progress,e.status,e.working,e.mode,e.storage,e.level):e.buildingType===tu.GATHERERS_CAMP?new dE(this.servicesService,e.id,e.progress,e.status,e.workers,e.mode,e.storage,e.level):e.buildingType===tu.HUNTER_LODGE?new oS(this.servicesService,e.id,e.progress,e.status,e.mode,e.working,e.storage,e.storage2,e.animal,e.level):e.buildingType===tu.TANNERY?new CS(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===tu.PAPER_MILL?new uE(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===tu.FORESTER?new zf(this.servicesService,e.id,e.progress,e.localStorage,e.status,e.effectiveness,e.working,e.level):e.buildingType===tu.SAWMILL?new Qf(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===tu.FARM?new hS(this.servicesService,e.id,e.workers,e.maxWorkers,e.level,e.status,void 0!==e.workSettings?e.workSettings:null):e.buildingType===tu.WINDMILL?new fS(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===tu.BUTCHER?new HS(this.servicesService,e.id,e.status,e.progress,e.working,e.outputStorage,null!==e.outputFurStorage?e.outputFurStorage:0,e.animals,void 0===e.discardExcessFur||e.discardExcessFur,e.level):e.buildingType===tu.COTTON_MILL?new bS(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===tu.BREWERY?new AS(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===tu.CLAY_PIT?new SE(this.servicesService,e.id,e.progress,e.status,e.working,e.storage,e.resources,e.level):e.buildingType===tu.WINERY?new wS(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===tu.BARN?new gE(this.servicesService,e.id,e.crop,e.storage,e.level):e.buildingType===tu.FIELD?new gS(this.servicesService,e.id,e.size,e.crop,e.status,e.progress,e.working,e.growth,e.level):e.buildingType===tu.ORCHARD?new mS(this.servicesService,e.id,e.size,e.crop,e.status,e.progress,e.working,e.growth,e.level):e.buildingType===tu.PASTURE?new FS(this.servicesService,e.id,e.size,e.animal,e.progress,e.produceProgress,e.working,e.animals,e.food,e.chores,e.autoButcher,e.level):e.buildingType===tu.QUARRY?new nS(this.servicesService,e.id,e.progress,e.status,e.working,e.storage,e.resources,e.level):e.buildingType===tu.GEOLOGIST?new MS(this.servicesService,e.id,e.progress,e.working,e.level):e.buildingType===tu.STONEMASON?new DS(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===tu.MINT?new GS(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===tu.SMITHY?new $S(this.servicesService,e.id,e.level):e.buildingType===tu.PIT_MINE?new xS(this.servicesService,e.id,e.progress,e.status,e.working,e.storage,e.resources,e.ore,e.level):e.buildingType===tu.METEORITE?new TE(this.servicesService,e.id,e.resources,e.ore,e.progress,e.status,e.storage,e.workers,e.level):e.buildingType===tu.DEEP_MINE?new aE(this.servicesService,e.id,e.progress,e.status,e.storage,e.workers,e.resources,void 0!==e.oreToFind?e.oreToFind:0,e.ore,e.level):e.buildingType===tu.STONEHENGE?new YS(this.servicesService,e.id,e.progress,e.maxProgress,e.stage,e.state,e.year,e.workers):e.buildingType===tu.PYRAMID?new jS(this.servicesService,e.id,e.progress,e.maxProgress,e.stage,e.state,e.year,e.workers):e.buildingType===tu.HANGING_GARDEN?new QS(this.servicesService,e.id,e.progress,e.maxProgress,e.stage,e.state,e.year,e.workers):e.buildingType===tu.COLOSSUS?new qS(this.servicesService,e.id,e.progress,e.maxProgress,e.stage,e.state,e.year,e.workers):e.buildingType===tu.UNDERGROUND_CITY?new ZS(this.servicesService,e.id,e.progress,e.maxProgress,e.stage,e.state,e.year,e.workers):e.buildingType===tu.GREAT_LIGHTHOUSE?new JS(this.servicesService,e.id,e.progress,e.maxProgress,e.stage,e.state,e.year,e.workers):e.buildingType===tu.BOAT_BUILDER?new NE(this.servicesService,e.id,e.progress,e.status,e.working,e.ship,e.level):e.buildingType===tu.SHIPYARD?new wE(this.servicesService,e.id,e.progress,e.status,e.workers,e.ship,e.level):e.buildingType===tu.CARTOGRAPHER?new ME(this.servicesService,e.id,e.progress,e.status,e.working,e.level):e.buildingType===tu.SACRED_GROVE?new eE(this.servicesService,e.id,e.progress,e.maxProgress,e.stage,e.state,e.year,e.workers):e.buildingType===tu.ASCENSION_TEMPLE?new XS(this.servicesService,e.id,e.progress,e.maxProgress,e.stage,e.state,e.year,e.workers):e.buildingType===tu.FISHERS_HUT?new vS(this.servicesService,e.id,e.progress,e.status,e.working,e.level):e.buildingType===tu.PIER?new CE(this.servicesService,e.id,e.level):e.buildingType===tu.HARBOUR?new IE(this.servicesService,e.id,e.level):e.buildingType===tu.LIGHTHOUSE?new yE(this.servicesService,e.id,e.status,e.fuel,e.working,e.level):e.buildingType===tu.CONSTRUCTION?new Wf(this.servicesService,e.id,e.region,e.constructing,e.buildingComplexity,e.buildingSize,e.upgradeLevel,e.progress,e.working,void 0!==e.data?e.data:null):e.buildingType===tu.DECONSTRUCTION?new qf(this.servicesService,e.id,e.region,e.deconstructing,e.buildingComplexity,e.buildingSize,e.progress,e.working):void console.error("Couldn't load building of type ["+e.buildingType+"]")}createBuilding(e,n=this.idService.getNextId()){return this.createBuildingShell(e,n).build()}createBuildingShell(e,n=this.idService.getNextId()){switch(e){case tu.HUT:return new Uf(this.servicesService,n);case tu.HOUSE:return new Hf(this.servicesService,n);case tu.LONGHOUSE:return new sE(this.servicesService,n);case tu.TUDOR_HOUSE:return new EE(this.servicesService,n);case tu.SETTLEMENT:return new DE(this.servicesService,n);case tu.BAKERY:return new SS(this.servicesService,n);case tu.TAILOR:return new yS(this.servicesService,n);case tu.WORKSHOP:return new iS(this.servicesService,n);case tu.SCHOLARS_LAB:return new xE(this.servicesService,n);case tu.KITCHEN:return new mE(this.servicesService,n);case tu.MANUFACTURE:return new iE(this.servicesService,n);case tu.WAREHOUSE:return new sS(this.servicesService,n);case tu.MARKETPLACE:return new zS(this.servicesService,n);case tu.TAX_COLLECTOR:return new FE(this.servicesService,n);case tu.BUILDERS_GUILD:return new HE(this.servicesService,n);case tu.TAVERN:return new PS(this.servicesService,n);case tu.SHRINE:return new aS(this.servicesService,n);case tu.CHURCH:return new KS(this.servicesService,n);case tu.BARRACKS:return new RS(this.servicesService,n);case tu.EMBASSY:return new rE(this.servicesService,n);case tu.TRAINING_SQUARE:return new TS(this.servicesService,n);case tu.STOCKADE:return new IS(this.servicesService,n);case tu.WOODEN_TOWER:return new NS(this.servicesService,n);case tu.STONE_TOWER:return new _S(this.servicesService,n);case tu.STASH:return new nE(this.servicesService,n);case tu.LOGGERS_HUT:return new Bf(this.servicesService,n);case tu.LOGGERS_CAMP:return new RE(this.servicesService,n);case tu.GATHERER:return new Jf(this.servicesService,n);case tu.GATHERERS_CAMP:return new dE(this.servicesService,n);case tu.HUNTER_LODGE:return new oS(this.servicesService,n);case tu.TANNERY:return new CS(this.servicesService,n);case tu.PAPER_MILL:return new uE(this.servicesService,n);case tu.FORESTER:return new zf(this.servicesService,n);case tu.SAWMILL:return new Qf(this.servicesService,n);case tu.FARM:return new hS(this.servicesService,n);case tu.WINDMILL:return new fS(this.servicesService,n);case tu.BUTCHER:return new HS(this.servicesService,n);case tu.COTTON_MILL:return new bS(this.servicesService,n);case tu.BREWERY:return new AS(this.servicesService,n);case tu.WINERY:return new wS(this.servicesService,n);case tu.CLAY_PIT:return new SE(this.servicesService,n);case tu.BARN:return new gE(this.servicesService,n);case tu.FIELD:return new gS(this.servicesService,n);case tu.ORCHARD:return new mS(this.servicesService,n);case tu.PASTURE:return new FS(this.servicesService,n);case tu.QUARRY:return new nS(this.servicesService,n);case tu.GEOLOGIST:return new MS(this.servicesService,n);case tu.STONEMASON:return new DS(this.servicesService,n);case tu.MINT:return new GS(this.servicesService,n);case tu.SMITHY:return new $S(this.servicesService,n);case tu.PIT_MINE:return new xS(this.servicesService,n);case tu.METEORITE:return new TE(this.servicesService,n);case tu.DEEP_MINE:return new aE(this.servicesService,n);case tu.STONEHENGE:return new YS(this.servicesService,n);case tu.PYRAMID:return new jS(this.servicesService,n);case tu.HANGING_GARDEN:return new QS(this.servicesService,n);case tu.COLOSSUS:return new qS(this.servicesService,n);case tu.UNDERGROUND_CITY:return new ZS(this.servicesService,n);case tu.GREAT_LIGHTHOUSE:return new JS(this.servicesService,n);case tu.SACRED_GROVE:return new eE(this.servicesService,n);case tu.ASCENSION_TEMPLE:return new XS(this.servicesService,n);case tu.FISHERS_HUT:return new vS(this.servicesService,n);case tu.PIER:return new CE(this.servicesService,n);case tu.HARBOUR:return new IE(this.servicesService,n);case tu.LIGHTHOUSE:return new yE(this.servicesService,n);case tu.BOAT_BUILDER:return new NE(this.servicesService,n);case tu.SHIPYARD:return new wE(this.servicesService,n);case tu.CARTOGRAPHER:return new ME(this.servicesService,n);case tu.CONSTRUCTION:console.error("Building factory cannot create construction sites!");break;case tu.DECONSTRUCTION:console.error("Building factory cannot create deconstruction sites!");break;default:console.error("Couldn't construct building of type ["+tu[e]+"]!")}}}return e.\u0275prov=re({factory:function(){return new e(Ae(Np),Ae(lE))},token:e,providedIn:"root"}),e})(),BE=(()=>{class e{constructor(e,n,l){this.servicesService=e,this.calendarService=n,this.logService=l,this.buildingEffects=[],this.natureEffects=[],this.armyEffects=[],e.addService(bu.EFFECTS,this),this.daySubscription=n.registerForDayChange().subscribe(e=>{this.buildingEffects.forEach(e=>{e.duration>0&&(e.duration-=1)}),this.armyEffects.forEach(e=>{e.duration>0&&(e.duration-=1)}),this.natureEffects.forEach(e=>{e.duration>0&&(e.duration-=1)})})}getName(){return"EffectsService"}load(e){this.buildingEffects=[],e.buildingEffects.forEach(e=>{this.buildingEffects.push(new yu(e.name,e.building,e.effect,e.duration,e.buff))}),this.armyEffects=[],e.armyEffects.forEach(e=>{this.armyEffects.push(new _u(e.name,e.troop,e.effect,e.duration))}),this.natureEffects=[],e.natureEffects.forEach(e=>{this.natureEffects.push(new wu(e.name,e.effect,e.duration))})}save(){return{buildingEffects:this.buildingEffects,armyEffects:this.armyEffects,natureEffects:this.natureEffects}}reset(e,n){e?(this.buildingEffects=[],this.armyEffects=[],this.natureEffects=[]):n?(this.buildingEffects=this.buildingEffects.filter(e=>e.isRoyal()),this.armyEffects=this.armyEffects.filter(e=>e.isRoyal()),this.natureEffects=this.natureEffects.filter(e=>e.isRoyal())):(this.buildingEffects=this.buildingEffects.filter(e=>e.isRoyal()||e.isWonder()),this.armyEffects=this.armyEffects.filter(e=>e.isRoyal()||e.isWonder()),this.natureEffects=this.natureEffects.filter(e=>e.isRoyal()||e.isWonder()))}tick(e){this.buildingEffects=this.buildingEffects.filter(e=>0!==e.duration),this.armyEffects=this.armyEffects.filter(e=>0!==e.duration),this.natureEffects=this.natureEffects.filter(e=>0!==e.duration)}getBuildingEffectsValue(e,n=!1,l=-1){let t=0;return l>0?this.buildingEffects.filter(n=>n.building===e||n.building===tu.ALL).filter(e=>e.isPermanent()===n).filter(e=>!e.isBuff()||e.isBuff()&&e.buff===l).forEach(e=>t+=e.effect):this.buildingEffects.filter(n=>n.building===e||n.building===tu.ALL).filter(e=>e.isPermanent()===n).forEach(e=>t+=e.effect),t}getBuildingEffects(e,n=-1){return e?n>0?this.buildingEffects.filter(n=>n.building===e||n.building===tu.ALL).filter(e=>e.buff===n):this.buildingEffects.filter(n=>n.building===e||n.building===tu.ALL):this.buildingEffects}hasWonderEffects(e){return this.buildingEffects.filter(n=>n.name===e).length>0||this.armyEffects.filter(n=>n.name===e).length>0||this.natureEffects.filter(n=>n.name===e).length>0}getNatureEffectsValue(){let e=0;return this.natureEffects.forEach(n=>e+=n.effect),e}getNatureEffects(){return this.natureEffects}addNatureEffect(e,n=!0){if(this.natureEffects.push(e),n){let n=e.name;e.isPermanent()?n+=" will permanently affect ":n+=" will affect ",n+="most natural sources with ",n+=e.effect>0?"+"+e.effect+"%":e.effect+"%",n+=" of their base power",e.isPermanent()||(n+=" for "+e.duration+" days"),this.logService.log(n)}}addBuildingEffect(e,n=!0){if(this.buildingEffects.push(e),n){let n=e.name;e.isPermanent()?n+=" will permanently affect ":n+=" will affect ",n+=e.building===tu.ALL?"all buildings with ":Ou.prepareBuildingName(e.building)+" with ",n+=e.effect>0?"+"+e.effect+"%":e.effect+"%",n+=e.building===tu.ALL?" of their base power":" of its base power",e.isPermanent()||(n+=e.duration%360==0?360===e.duration?" for "+e.duration/360+" year":" for "+e.duration/360+" years":" for "+e.duration+" days"),this.logService.log(n)}}addArmyEffect(e,n=!0){if(this.armyEffects.push(e),n){let n=e.name;e.isPermanent()?n+=" will permanently affect ":n+=" will affect ",n+=e.troop===pu.ALL?"all troops with ":Ou.prepareTroopName(e.troop)+" with ",n+=e.effect>0?"+"+e.effect+"%":e.effect+"%",n+=" of their base strength and defense",e.isPermanent()||(n+=" for "+e.duration+" days"),this.logService.log(n)}}getArmyEffects(){return this.armyEffects}hasBuildingEffect(e,n){return void 0!==this.buildingEffects.find(l=>l.name===e&&l.building===n)}hasArmyEffect(e,n){return void 0!==this.armyEffects.find(l=>l.name===e&&l.troop===n)}}return e.\u0275prov=re({factory:function(){return new e(Ae(Np),Ae(Lp),Ae(xp))},token:e,providedIn:"root"}),e})();class VE{constructor(e,n,l,t,i){this.forestSizeRule=e,this.forestSizeRuleEnabled=n,this.landSizeRule=l,this.landSizeRuleEnabled=t,this.forestSizeReserved=i}}let WE=(()=>{class e{constructor(e,n,l,t,i){this.servicesService=e,this.effectsService=n,this.gameService=l,this.optionsService=t,this.logService=i,this.land=ro,this.forest=uo,this.mountains=oo,this.takenLand=0,this.ores=[[su.COAL,0],[su.GOLD_ORE,0],[su.SILVER_ORE,0],[su.COPPER_ORE,0],[su.TIN_ORE,0],[su.IRON_ORE,0]],this.forestGrowTick=0,this.forestGrowTicks=ho,this.forestGrowPercentage=ao,this.defaultForestOptions=new VE(0,!1,25,!0,0),this.forestOptions=new VE(0,!1,25,!0,0),this.servicesService.addService(bu.LAND,this)}getName(){return"LandService"}load(e){this.land=e.land,this.forest=e.forest,this.mountains=e.mountains,this.forestGrowTick=e.forestGrowTick,this.takenLand=e.takenLand,e.forestLandLimit&&(this.forestOptions=new VE(0,!1,e.forestLandLimit,!0,0)),e.forestOptions&&(this.forestOptions=e.forestOptions),this.ores=e.ores}save(){return{land:this.land,forest:this.forest,mountains:this.mountains,forestGrowTick:this.forestGrowTick,takenLand:this.takenLand,forestOptions:this.forestOptions,ores:this.ores}}reset(e,n){if(this.land=ro,this.forest=uo,this.mountains=oo,this.takenLand=0,this.optionsService.getOption(_p.KEEP_MANAGEMENT_SETTINGS_ON_RESET)&&!e||(this.forestOptions=new VE(0,!1,25,!0,0)),!e&&!n){const e=this.servicesService.getWorldService();this.increaseLand(e.getDiscoveredLand(),!0),this.increaseForest(e.getDiscoveredForest(),!1),this.increaseMountains(e.getDiscoveredMountains())}this.ores=[[su.COAL,0],[su.GOLD_ORE,0],[su.SILVER_ORE,0],[su.COPPER_ORE,0],[su.TIN_ORE,0],[su.IRON_ORE,0]]}tick(e){this.growForest()}growForest(){if(this.forestGrowTick<this.forestGrowTicks&&(this.forestGrowTick+=1),this.forestGrowTick===this.forestGrowTicks){let e=Math.floor(this.forestGrowPercentage*this.forest*(1+this.effectsService.getNatureEffectsValue()/100));e<co&&(e=co),this.increaseForest(e),this.forestGrowTick=0}}removeForest(e){this.forest>=e&&(this.forest-=e)}reduceForest(e){const n=this.forest;return this.forest-e>=this.forestOptions.forestSizeReserved&&(this.forest-=e,this.gameService.isEnabled(ou.FORESTER)||(n>=400&&this.forest<400&&this.logService.warning("There are less than 400 trees in the forest!"),n>=250&&this.forest<250&&this.logService.warning("There are less than 250 trees in the forest!"),n>=100&&this.forest<100&&(this.logService.warning("Critical forest size!"),this.logService.warning("There are less than 100 trees in the forest!"))),!0)}increaseForest(e,n=!0){if(n){let n=0;this.forestOptions.landSizeRuleEnabled&&(n=this.forestOptions.landSizeRule),n<0&&(n=0);let l=this.land-n;return l<0&&(l=0),l-e>=0?(this.forest+=e,this.land-=e,0):(this.forest+=l,this.land-=l,e-l)}return this.forest+=e,0}removeLand(e){this.land>=e&&(this.land-=e)}reduceLand(e){let n=0;return this.forestOptions.landSizeRuleEnabled&&(n=this.forestOptions.landSizeRule),n<0&&(n=0),this.land-n-e>=0&&(this.land-=e,!0)}increaseLand(e,n=!1){return this.land+=e,n||(this.takenLand-=e),!0}increaseMountains(e){return this.mountains+=e,!0}getForest(){return this.forest}decreaseLand(e){if(!(this.land-e>=0))return e-this.land;this.takenLand+=e,this.land-=e}hasLand(e){return this.land-e>=0}getLand(){return this.land}getMountains(){return this.mountains}hasMountains(e){return this.mountains-e>=0}removeMountains(e){this.mountains>=e&&(this.mountains-=e)}decreaseMountains(e){if(!(this.mountains-e>=0))return e-this.mountains;this.mountains-=e,this.takenLand+=e}getOre(e){return this.ores.find(n=>n[0]===e)[1]}hasOre(e,n){return this.ores.find(n=>n[0]===e)[1]>=n}increaseOre(e,n){this.ores.find(n=>n[0]===e)[1]+=n}decreaseOre(e,n){const l=this.ores.find(n=>n[0]===e);if(l[1]>=n)return l[1]-=n,0;{const e=n-l[1];return l[1]=0,e}}getTakenLand(){return this.takenLand}takeLand(e){this.land-=e,this.takenLand+=e}getForestOptions(){return this.gameService.isEnabled(ou.FORESTER)?this.forestOptions:this.defaultForestOptions}}return e.\u0275prov=re({factory:function(){return new e(Ae(Np),Ae(BE),Ae(Gp),Ae(wp),Ae(xp))},token:e,providedIn:"root"}),e})();var YE=function(e){return e[e.ALL=0]="ALL",e[e.WORKING=1]="WORKING",e[e.IDLE=2]="IDLE",e[e.PASSIVE=3]="PASSIVE",e}({});class zE{constructor(e,n,l,t,i,s,r){this.buildings=[],this.filterBuilding=tu.ALL,this.filterWorking=YE.ALL,this.thisRegion=s,this.buildingFactoryService=e,this.resourcesService=n,this.servicesService=l,this.landService=t,this.idService=i,n.addCallback(this,s),l.addService(r,this)}init(){}getBuildings(){return this.buildings}tick(e){this.shuffleArray(this.buildings).forEach(n=>n.tick(e))}shuffleArray(e){const n=e.slice();for(let l=n.length-1;l>0;l--){const e=Math.floor(Math.random()*(l+1));[n[l],n[e]]=[n[e],n[l]]}return n}getName(){return"AbstractRegionService"}save(){return{buildings:this.buildings,filterBuilding:this.filterBuilding,filterWorking:this.filterWorking}}reset(e,n){this.buildings=[],this.filterBuilding=tu.ALL,this.filterWorking=YE.ALL,this.init()}load(e){this.buildings=[],this.filterBuilding=void 0!==e.filterBuilding?e.filterBuilding:tu.ALL,this.filterWorking=void 0!==e.filterWorking?e.filterWorking:YE.ALL;for(const n of e.buildings)-1===n.id&&(n.id=this.idService.getNextId()),this.buildings.push(this.buildingFactoryService.loadBuilding(n))}getFilterBuilding(){return this.filterBuilding}setFilterBuildings(e){this.filterBuilding=e}setFilterWorking(e){this.filterWorking=e}getFilterWorking(){return this.filterWorking}getUnemployed(){return this.resourcesService.getPeople()}finishConstruction(e,n){const l=this.buildings.indexOf(e);-1!==l&&(this.buildings[l].stopProduction(),this.buildings[l]=this.buildingFactoryService.createBuilding(n,this.buildings[l].getBuildingId()))}createConstruction(e){this.buildings.push(e)}demolish(e){const n=this.buildings.indexOf(e);-1!==n&&(this.buildings[n].getBuildingType()===tu.CONSTRUCTION?(this.buildings[n].stopProduction(),this.buildings[n].finishDemolish(),this.landService.increaseLand(this.buildings[n].getSize()),this.buildings.splice(n,1)):this.buildings[n]=new qf(this.servicesService,this.buildings[n].getBuildingId(),this.thisRegion,this.buildings[n].getBuildingType(),this.buildings[n].getComplexity(),this.buildings[n].getSize()).build())}finishDeconstruction(e){const n=this.buildings.indexOf(e);-1!==n&&(this.buildings[n].stopProduction(),this.buildingFactoryService.createBuildingShell(this.buildings[n].getBuildingBeingDemolished()).finishDemolish(),this.landService.increaseLand(this.buildings[n].getSize()),this.buildings.splice(n,1))}finishUpgrade(e,n){const l=this.buildings.indexOf(e);if(-1!==l){this.buildings[l].stopProduction();let e=this.buildingFactoryService.createBuildingShell(n,this.buildings[l].getBuildingId());e.getUpgradeSettings().NEW_BUILDING&&(e=this.buildingFactoryService.createBuildingShell(e.getUpgradeSettings().NEW_BUILDING,this.buildings[l].getBuildingId())),e.setBuildingData(this.buildings[l].getBuildingData()),e.setBuildingLevel(this.buildings[l].getBuildingLevel()),e.build(),this.buildings[l]=e}}fireRandomWorker(){const e=this.buildings.filter(e=>void 0===e.getOccupants&&e.isWorking()&&e.getWorkers()>0);if(e.length>0){const n=Math.floor(Math.random()*e.length);return e[n].fireWorker(),this.servicesService.getManagementService().getLogFiredWorkers()&&this.servicesService.getLogService().warning("Worker removed from "+e[n].getName()),!0}return!1}moveBuildingInList(e,n){af(this.buildings,e,n)}moveBuildingInListByBuildingId(e,n){const l=this.buildings.findIndex(n=>e===n.getBuildingId()),t=this.buildings.findIndex(e=>n===e.getBuildingId());af(this.buildings,l,t)}canCombine(e){if(this.buildings.filter(e=>e.isCombinable()).length>1)return this.toCombine?this.toCombine!==e&&this.toCombine.getBuildingType()===e.getBuildingType():!!this.buildings.find(n=>n!==e&&n.getBuildingType()===e.getBuildingType())}combine(e){if(!this.toCombine)return this.toCombine=e,!1;e.combine(this.toCombine,this)}finaliseCombine(e){if(e){const e=this.buildings.indexOf(this.toCombine);if(e>=0)return this.buildings[e].prepareDemolish()?(this.toCombine=null,this.buildings.splice(e,1),!0):(this.toCombine=null,!1)}else this.toCombine=null}clearCombineMode(){this.toCombine=null}split(e){e.isSplittable()&&e.split(this)}finaliseSplit(e){this.buildings.push(e)}addBuilding(e){this.buildings.push(this.buildingFactoryService.createBuilding(e))}upgradeBuilding(e){const n=this.buildings.find(n=>n.getBuildingId()===e),l=this.servicesService.getModalService(),t=this.servicesService.getVillageService();if(n)if(n.hasUpgrade())if(n.getOccupants)if(void 0!==n.getMaxSize&&t.getPopulation()>t.getPopulationCap()-n.getMaxSize()){l.open(Pu.CONFIRM),l.setModalText("You don't have enough housing space to move this building occupants.<br> People that won't find new home will leave the village<br>Do you still want to upgrade this building?");const e=l.registerForConfirmation().subscribe(t=>{e.unsubscribe(),t&&this.upgrade(n,l)})}else this.upgrade(n,l);else this.upgrade(n,l);else l.info("This building cannot be upgraded");else l.info("Error! Building not found")}upgrade(e,n){if(e.getUpgradeSettings().SIZE&&!this.landService.hasLand(e.getUpgradeSettings().SIZE))return void n.info("Not enough empty land to upgrade!");if(!this.resourcesService.hasResources(e.getUpgradeCost(),"Upgrade",1,!0))return void n.info("Not enough resources to upgrade!");this.landService.decreaseLand(e.getUpgradeSettings().SIZE),this.resourcesService.decreaseResources(e.getUpgradeCost(),"Upgrade",!0);const l=this.buildings.indexOf(e),t=po.getBuilding(e.getBuildingType());e.stopProduction();const i=new Wf(this.servicesService,e.getBuildingId(),this.thisRegion,e.getBuildingType(),t.UPGRADES[e.getBuildingLevel()-1].COMPLEXITY,e.getSize(),e.getBuildingLevel()+1,0,!1,e.getBuildingData()).build();e.prepareDemolish(),this.buildings[l]=i}move(e){if(!this.toArrange)return this.toArrange=e,!1;this.moveBuildingInListByBuildingId(this.toArrange.getBuildingId(),e.getBuildingId()),this.toArrange=null}canMove(e){return!(this.toArrange&&e.getBuildingId()===this.toArrange.getBuildingId())}autoSort(){let e=[];const n=this.buildings;for(;this.buildings.length>0;){const n=this.buildings[0].getBuildingType();if(n===tu.MANUFACTURE){let l=this.buildings.filter(e=>e.getBuildingType()===n||e.getBuildingType()===tu.CONSTRUCTION&&e.getWorkingAt()===n).map(e=>e);for(this.buildings=this.buildings.filter(e=>!(e.getBuildingType()===n||e.getBuildingType()===tu.CONSTRUCTION&&e.getWorkingAt()===n));l.length>0;){const n=l[0].getRecipe&&null!==l[0].getRecipe()?l[0].getRecipe().id:null;e=e.concat(l.filter(e=>e.getBuildingType()===tu.CONSTRUCTION||null===e.getRecipe()?null===n:e.getRecipe().id===n)),l=l.filter(e=>e.getBuildingType()===tu.CONSTRUCTION||null===e.getRecipe()?!(null===n):!(e.getRecipe().id===n))}}else e=e.concat(this.buildings.filter(e=>e.getBuildingType()===n||e.getBuildingType()===tu.CONSTRUCTION&&e.getWorkingAt()===n)),this.buildings=this.buildings.filter(e=>!(e.getBuildingType()===n||e.getBuildingType()===tu.CONSTRUCTION&&e.getWorkingAt()===n))}this.buildings=n.length===e.length?e:n}hasBuilding(e){return void 0!==this.buildings.find(n=>n.getBuildingId()===e)}autoMerge(){let e=!1;const n=this.buildings.filter(e=>e.isCombinable());if(n.length>1){const l=new Map;n.forEach(e=>{l.has(e.getBuildingType())?l.get(e.getBuildingType()).push(e):l.set(e.getBuildingType(),[e])}),l.forEach(n=>{for(;n.length>1;){const l=n.shift(),t=[];for(let e=0;e<n.length;e++)n[e].isCompatible(l)&&t.push(n[e]);t.forEach(n=>{e=!0,this.clearCombineMode(),this.combine(n),this.combine(l)}),n=n.filter(e=>this.hasBuilding(e.getBuildingId()))}})}e||this.servicesService.getModalService().info("No buildings to combine")}}let $E=(()=>{class e extends zE{constructor(e,n,l,t,i){super(n,e,l,i,t,Eu.VILLAGE,bu.VILLAGE)}init(){this.buildings.push(new Uf(this.servicesService,this.idService.getNextId(),2,0,100,100,100).build()),this.buildings.push(new Uf(this.servicesService,this.idService.getNextId(),1,0,100,100,100).build()),this.resourcesService.createPeople(3),this.buildings.forEach(e=>this.landService.takeLand(e.getSize()))}getPopulation(){return this.resourcesService.getTotalPeople()}getPopulationCap(){return this.resourcesService.getPopulationCap()}moveOccupants(e,n,l,t,i){const s=n;let r=0;const u=this.buildings.filter(n=>n!==e&&void 0!==n.getOccupants&&n.getOccupants()<n.getMaxSize()).sort((e,n)=>e.isWorking()&&!n.isWorking()?-1:n.isWorking()&&!e.isWorking()?1:n.getMaxSize()!==e.getMaxSize()?n.getMaxSize()-e.getMaxSize():0);for(;n>0&&r<u.length;){const e=u[r];for(;e.getOccupants()<e.getMaxSize()&&n>0;)e.addOccupant()&&(e.isWorking()||e.startProduction(),e.addFood(l/s),e.addFuel(t/s),e.addClothes(i/s),n-=1);r+=1}return n}removeRecruit(e,n=!0){const l=this.buildings.filter(e=>void 0!==e.getOccupants).map(e=>e).sort((e,n)=>e.getOccupants()===e.getMaxSize()&&n.getOccupants()===n.getMaxSize()?e.getMaxSize()>n.getMaxSize()?-1:1:e.getOccupants()===e.getMaxSize()&&n.getOccupants()<n.getMaxSize()?-1:e.getOccupants()<e.getMaxSize()&&n.getOccupants()===n.getMaxSize()?1:void 0);let t=0;if(l.forEach(e=>t+=e.getOccupants()),t>=e){for(;e>0;)for(const t of l){if(!(e>0))return!0;t.removeOccupant()&&(n&&this.resourcesService.removePeople(1),e-=1)}if(0===e)return!0}return!1}replaceWithHouses(){this.buildings.push(new Hf(this.servicesService,this.idService.getNextId(),0,0,100,100,200).build()),this.landService.takeLand(po.VILLAGE.HOUSE.SIZE),this.buildings.filter(e=>e.getBuildingType()===tu.HUT).forEach(e=>{e.prepareDemolish(),this.demolish(e)}),this.buildings.filter(e=>e.getBuildingType()===tu.DECONSTRUCTION).forEach(e=>this.finishDeconstruction(e))}getHousingBuildings(){return this.buildings.filter(e=>e.getBuildingType()===tu.HUT||e.getBuildingType()===tu.HOUSE||e.getBuildingType()===tu.LONGHOUSE||e.getBuildingType()===tu.TUDOR_HOUSE||e.getBuildingType()===tu.SETTLEMENT)}addVillagers(e){let n=this.getHousingBuildings().map(e=>e).filter(e=>e.getOccupants()<e.getMaxSize()),l=e;for(;l>0&&n.length>0;)n.forEach(e=>{e.addOccupant()&&(this.resourcesService.createPeople(1),l-=1)}),n=n.filter(e=>e.getOccupants()<e.getMaxSize())}}return e.\u0275prov=re({factory:function(){return new e(Ae(Qp),Ae(GE),Ae(Np),Ae(lE),Ae(WE))},token:e,providedIn:"root"}),e})();class KE{constructor(e,n,l){this.craftingService=e,this.resourcesService=n,this.villageService=l,this.id=Math.random(),this.amount=1,this.type=wf.NONE,this.craftingTypes=wf}getResourceName(e){return Ou.prepareResourceName(e)}ngOnInit(){}cancel(){null!==this.id&&this.craftingService.cancel(this.id)}getCost(){return this.recipe.cost}isAvailable(){for(const[e,n]of Array.from(this.recipe.cost))if(0!==this.resourcesService.hasResource(e,n,"Crafting"))return!1;return!0}checkResource(e){return 0===this.resourcesService.hasResource(e.key,e.value,"Crafting")}getResourceAmount(){return this.resourcesService.getResource(this.recipe.resource).amount}getCurrentlyCrafted(){return this.villageService.getBuildings().filter(e=>e.getBuildingType()===tu.WORKSHOP&&e.isWorking()).map(e=>e).filter(e=>e.getRecipe()&&e.getRecipe().id===this.recipe.id).length+this.villageService.getBuildings().filter(e=>e.getBuildingType()===tu.KITCHEN&&e.isWorking()).map(e=>e).filter(e=>e.getRecipe()&&e.getRecipe().id===this.recipe.id).length}isStarted(){return this.id>=1&&this.getCurrentlyCrafted()>0}getResourceAmountPercentage(){const e=this.resourcesService.getResource(this.recipe.resource);return Math.floor(e.amount/e.limit*100)}}var jE=Kl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{width:100%;display:inline-block}#available[_ngcontent-%COMP%]{position:relative;font-weight:100;border:1px solid #000}#available[_ngcontent-%COMP%], #notAvailable[_ngcontent-%COMP%]{padding:3px;text-align:center;font-size:1.1em}#notAvailable[_ngcontent-%COMP%]{border:1px solid #57575a}#titleGrey[_ngcontent-%COMP%]{display:inline-block;color:#57575a}.notMet[_ngcontent-%COMP%]{color:var(--negative-colour)}.title[_ngcontent-%COMP%]{text-align:left}hr[_ngcontent-%COMP%]{border-color:#000}#progressId[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background-color:var(--active-colour);z-index:1}#text[_ngcontent-%COMP%]{position:relative;z-index:2}.costTitle[_ngcontent-%COMP%]{text-align:left}.missing[_ngcontent-%COMP%]{color:var(--negative-colour)}.tooltip[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{min-width:200px}.craftingTitle[_ngcontent-%COMP%]{text-align:left}.type[_ngcontent-%COMP%]{display:inline-block}app-icon[_ngcontent-%COMP%]{flex:0 0 auto;margin-left:3px}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center}"]],data:{}});function QE(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[["class","type"]],null,null,null,null,null)),(e()(),Ks(1,null,["",""]))],null,(function(e,n){e(n,1,0,n.component.amount)}))}function qE(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[["class","type"]],null,null,null,null,null)),(e()(),Ks(1,null,["","/",""]))],null,(function(e,n){var l=n.component;e(n,1,0,l.getResourceAmount(),l.amount)}))}function XE(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[["class","type"]],null,null,null,null,null)),(e()(),Ks(1,null,["","%/","%"]))],null,(function(e,n){var l=n.component;e(n,1,0,l.getResourceAmountPercentage(),l.amount)}))}function ZE(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[["class","type"]],null,null,null,null,null)),(e()(),Ks(-1,null,["\u221e"]))],null,null)}function JE(e){return qs(0,[(e()(),Ds(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),Ks(1,null,[" (",") "]))],null,(function(e,n){e(n,1,0,n.component.getCurrentlyCrafted())}))}function ev(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[["class","craftingTitle"]],null,null,null,null,null)),(e()(),Ks(1,null,["Crafted: ",""]))],null,(function(e,n){e(n,1,0,n.component.recipe.amount)}))}function nv(e){return qs(0,[(e()(),Ds(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ks(2,null,["",""]))],null,(function(e,n){e(n,2,0,n.parent.context.$implicit.value)}))}function lv(e){return qs(0,[(e()(),Ds(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"div",[["class","missing"]],null,null,null,null,null)),(e()(),Ks(2,null,["",""]))],null,(function(e,n){e(n,2,0,n.parent.context.$implicit.value)}))}function tv(e){return qs(0,[(e()(),Ds(0,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,nv)),ei(2,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,lv)),ei(4,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(5,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(6,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.checkResource(n.context.$implicit)),e(n,4,0,!l.checkResource(n.context.$implicit)),e(n,6,0,l.getResourceName(n.context.$implicit.key),"resources")}),null)}function iv(e){return qs(0,[(e()(),Ds(0,0,null,null,27,"div",[["appTooltip",""],["class","tooltip"],["id","available"]],null,[[null,"click"],[null,"mousemove"]],(function(e,n,l){var t=!0,i=e.component;return"mousemove"===n&&(t=!1!==Yt(e,1).onmousemove(l)&&t),"click"===n&&(t=!1!==i.cancel()&&t),t}),null,null)),ei(1,16384,null,0,vg,[],{elementId:[0,"elementId"]},null),(e()(),Ds(2,0,null,null,12,"div",[["id","text"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,QE)),ei(4,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,qE)),ei(6,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,XE)),ei(8,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,ZE)),ei(10,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ks(11,null,[" "," "])),Ys(12,1),(e()(),Ms(16777216,null,null,1,null,JE)),ei(14,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(15,0,null,null,12,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),Ks(16,null,[" "," "])),Ys(17,1),(e()(),Ds(18,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Ds(19,0,null,null,1,"div",[["class","craftingTitle"]],null,null,null,null,null)),(e()(),Ks(20,null,["Difficulty: ",""])),(e()(),Ms(16777216,null,null,1,null,ev)),ei(22,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(23,0,null,null,1,"div",[["class","costTitle"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Cost:"])),(e()(),Ms(16777216,null,null,2,null,tv)),ei(26,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),ni(0,fa,[Il])],(function(e,n){var l=n.component;e(n,1,0,l.id),e(n,4,0,l.type===l.craftingTypes.SELECTED),e(n,6,0,l.type===l.craftingTypes.UNTIL_X),e(n,8,0,l.type===l.craftingTypes.UNTIL_PERCENT),e(n,10,0,l.type===l.craftingTypes.CONTINUOUS),e(n,14,0,l.isStarted()),e(n,22,0,l.recipe.amount>1),e(n,26,0,$l(n,26,0,Yt(n,27).transform(l.getCost())))}),(function(e,n){var l=n.component,t=$l(n,11,0,e(n,12,0,Yt(n.parent,0),l.recipe.title));e(n,11,0,t),e(n,15,0,Rt(1,"",l.id,""));var i=$l(n,16,0,e(n,17,0,Yt(n.parent,0),l.getResourceName(l.recipe.resource)));e(n,16,0,i),e(n,20,0,l.recipe.craftingDifficulty)}))}function sv(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[["class","type"]],null,null,null,null,null)),(e()(),Ks(1,null,["",""]))],null,(function(e,n){e(n,1,0,n.component.amount)}))}function rv(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[["class","type"]],null,null,null,null,null)),(e()(),Ks(1,null,["","/",""]))],null,(function(e,n){var l=n.component;e(n,1,0,l.getResourceAmount(),l.amount)}))}function uv(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[["class","type"]],null,null,null,null,null)),(e()(),Ks(1,null,["","%/","%"]))],null,(function(e,n){var l=n.component;e(n,1,0,l.getResourceAmountPercentage(),l.amount)}))}function ov(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[["class","type"]],null,null,null,null,null)),(e()(),Ks(-1,null,["\u221e"]))],null,null)}function av(e){return qs(0,[(e()(),Ds(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),Ks(1,null,[" (",") "]))],null,(function(e,n){e(n,1,0,n.component.getCurrentlyCrafted())}))}function cv(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[["class","craftingTitle"]],null,null,null,null,null)),(e()(),Ks(1,null,["Crafted: ",""]))],null,(function(e,n){e(n,1,0,n.component.recipe.amount)}))}function hv(e){return qs(0,[(e()(),Ds(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ks(2,null,["",""]))],null,(function(e,n){e(n,2,0,n.parent.context.$implicit.value)}))}function dv(e){return qs(0,[(e()(),Ds(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"div",[["class","missing"]],null,null,null,null,null)),(e()(),Ks(2,null,["",""]))],null,(function(e,n){e(n,2,0,n.parent.context.$implicit.value)}))}function gv(e){return qs(0,[(e()(),Ds(0,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,hv)),ei(2,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,dv)),ei(4,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(5,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(6,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.checkResource(n.context.$implicit)),e(n,4,0,!l.checkResource(n.context.$implicit)),e(n,6,0,l.getResourceName(n.context.$implicit.key),"resources")}),null)}function pv(e){return qs(0,[(e()(),Ds(0,0,null,null,27,"div",[["appTooltip",""],["class","tooltip"],["id","notAvailable"]],null,[[null,"click"],[null,"mousemove"]],(function(e,n,l){var t=!0,i=e.component;return"mousemove"===n&&(t=!1!==Yt(e,1).onmousemove(l)&&t),"click"===n&&(t=!1!==i.cancel()&&t),t}),null,null)),ei(1,16384,null,0,vg,[],{elementId:[0,"elementId"]},null),(e()(),Ds(2,0,null,null,12,"div",[["id","titleGrey"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,sv)),ei(4,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,rv)),ei(6,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,uv)),ei(8,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,ov)),ei(10,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ks(11,null,[" "," "])),Ys(12,1),(e()(),Ms(16777216,null,null,1,null,av)),ei(14,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(15,0,null,null,12,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),Ks(16,null,[" "," "])),Ys(17,1),(e()(),Ds(18,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Ds(19,0,null,null,1,"div",[["class","craftingTitle"]],null,null,null,null,null)),(e()(),Ks(20,null,["Difficulty: ",""])),(e()(),Ms(16777216,null,null,1,null,cv)),ei(22,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(23,0,null,null,1,"div",[["class","costTitle"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Cost:"])),(e()(),Ms(16777216,null,null,2,null,gv)),ei(26,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),ni(0,fa,[Il])],(function(e,n){var l=n.component;e(n,1,0,l.id),e(n,4,0,l.type===l.craftingTypes.SELECTED),e(n,6,0,l.type===l.craftingTypes.UNTIL_X),e(n,8,0,l.type===l.craftingTypes.UNTIL_PERCENT),e(n,10,0,l.type===l.craftingTypes.CONTINUOUS),e(n,14,0,l.isStarted()),e(n,22,0,l.recipe.amount>1),e(n,26,0,$l(n,26,0,Yt(n,27).transform(l.getCost())))}),(function(e,n){var l=n.component,t=$l(n,11,0,e(n,12,0,Yt(n.parent,0),l.recipe.title));e(n,11,0,t),e(n,15,0,Rt(1,"",l.id,""));var i=$l(n,16,0,e(n,17,0,Yt(n.parent,0),l.getResourceName(l.recipe.resource)));e(n,16,0,i),e(n,20,0,l.recipe.craftingDifficulty)}))}function mv(e){return qs(0,[ni(0,ma,[]),(e()(),Ds(1,0,null,null,4,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,iv)),ei(3,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,pv)),ei(5,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,3,0,l.isAvailable()),e(n,5,0,!l.isAvailable())}),null)}const fv=new Re("cdk-dir-doc",{providedIn:"root",factory:function(){return Ne(_o)}});let Sv=(()=>{class e{constructor(e){if(this.value="ltr",this.change=new Ii,e){const n=e.documentElement?e.documentElement.dir:null,l=(e.body?e.body.dir:null)||n;this.value="ltr"===l||"rtl"===l?l:"ltr"}}ngOnDestroy(){this.change.complete()}}return e.\u0275prov=re({factory:function(){return new e(Ae(fv,8))},token:e,providedIn:"root"}),e})();class Ev{constructor(e){this.gameService=e}ngOnInit(){}isCookingEnabled(){return this.gameService.isEnabled(ou.KITCHEN)}}var vv=Kl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{flex-direction:row}#wrapper[_ngcontent-%COMP%], .entry[_ngcontent-%COMP%]{display:flex;height:100%}.entry[_ngcontent-%COMP%]{flex:auto;justify-content:center;flex-direction:column;text-align:center;border-right:2px solid #000;border-bottom:1px solid #000;cursor:pointer;text-decoration:none;color:#000;font-size:1em}.entry[_ngcontent-%COMP%]:last-of-type{border:none;border-bottom:1px solid #000}.entry.active[_ngcontent-%COMP%]{background:var(--active-colour)}"]],data:{}});function Rv(e){return qs(0,[(e()(),Ds(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/crafting/cooking"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==Yt(e,1).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ei(1,671744,[[4,4]],0,Hd,[Fd,Rh,Ho],{routerLink:[0,"routerLink"]},null),ei(2,1720320,null,2,Bd,[Fd,il,ol,Nn,[2,Ud],[2,Hd]],{routerLinkActive:[0,"routerLinkActive"]},null),Us(603979776,3,{links:1}),Us(603979776,4,{linksWithHrefs:1}),(e()(),Ks(-1,null,["Cooking"]))],(function(e,n){e(n,1,0,"/crafting/cooking"),e(n,2,0,"active")}),(function(e,n){e(n,0,0,Yt(n,1).target,Yt(n,1).href)}))}function Ov(e){return qs(0,[(e()(),Ds(0,0,null,null,8,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/crafting/crafting"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==Yt(e,2).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ei(2,671744,[[2,4]],0,Hd,[Fd,Rh,Ho],{routerLink:[0,"routerLink"]},null),ei(3,1720320,null,2,Bd,[Fd,il,ol,Nn,[2,Ud],[2,Hd]],{routerLinkActive:[0,"routerLinkActive"]},null),Us(603979776,1,{links:1}),Us(603979776,2,{linksWithHrefs:1}),(e()(),Ks(-1,null,["Crafting"])),(e()(),Ms(16777216,null,null,1,null,Rv)),ei(8,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,2,0,"/crafting/crafting"),e(n,3,0,"active"),e(n,8,0,l.isCookingEnabled())}),(function(e,n){e(n,1,0,Yt(n,2).target,Yt(n,2).href)}))}class Tv{constructor(e,n,l,t,i){this.recipeService=e,this.resourcesService=n,this.craftingService=l,this.modalService=t,this.changeDetectorRef=i,this.craftingTypes=wf,this.filterText="",this.amount=1,this.craftingType=this.craftingTypes.SELECTED,this.bookPage=du[du.ALL]}ngOnInit(){this.craftingService.registerForUpdate().subscribe(()=>{this.changeDetectorRef.destroyed||this.changeDetectorRef.detectChanges()}),this.craftingType=this.craftingService.getCraftingType()}getRecipes(){return this.filterText&&this.filterText.length>0?this.recipeService.getRecipes().filter(e=>e.available&&(this.resourcesService.getResourceTypes(e.getResource()).includes(du[this.bookPage])&&e.title.toLowerCase().includes(this.filterText.toLowerCase())||this.resourcesService.getResourceTypes(e.getResource()).includes(du[this.bookPage])&&Ou.prepareResourceName(e.getResource()).toLowerCase().includes(this.filterText.toLowerCase()))):this.recipeService.getRecipes().filter(e=>e.available&&this.resourcesService.getResourceTypes(e.getResource()).includes(du[this.bookPage]))}getEntries(){const e=[];return e.push(du[du.ALL]),e.push(du[du.PROCESSED]),e.push(du[du.TOOLS]),e.push(du[du.FOOD]),e.push(du[du.OTHER]),e}select(e){this.bookPage=e}craft(e,n){this.validateAmountInput()&&this.craftingService.craft(e,n,this.amount,this.craftingType)}getQueue(){return this.craftingService.getCraftingQueue()}drop(e){this.craftingService.moveRecipeInCraftingQueue(e)}getQueueMaxSize(){return this.craftingService.getCraftingQueueMaxSize()}validateAmountInput(){return!(isNaN(this.amount)||Number(this.amount)<1)||(this.modalService.info("Invalid craft amount"),this.amount=1,!1)}updateCraftingType(){this.craftingService.setCraftingType(this.craftingType)}}var Cv=Kl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:100%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#boxes[_ngcontent-%COMP%]{flex-direction:row;height:95%;margin:.5%}#boxes[_ngcontent-%COMP%], #recipes[_ngcontent-%COMP%]{display:flex;border:1px solid #000;text-align:center}#recipes[_ngcontent-%COMP%]{flex:0 0 74.3%;flex-direction:column}#recipes[_ngcontent-%COMP%], .queue[_ngcontent-%COMP%]{align-items:center}.queue[_ngcontent-%COMP%]{text-align:center;flex:0 0 25%;display:flex;flex-direction:column;border:1px solid #000}#queueRecipes[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}.title[_ngcontent-%COMP%]{width:100.5%;font-weight:bolder;font-size:1.1em;display:inline-block;border-bottom:1px solid #000}#modes[_ngcontent-%COMP%]{margin-top:-1px;padding:0;margin-bottom:5px}#recipesBook[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:100%;width:100%}#menu[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-right:1px solid #000;flex:0 0 10%}.entry[_ngcontent-%COMP%]{display:flex;border-bottom:1px solid #000;flex:1 0 0;height:100%;width:100%;margin-right:-30px;font-size:.8em;font-weight:600;cursor:pointer}.entry[_ngcontent-%COMP%]:last-of-type{border-bottom:none}.entryText[_ngcontent-%COMP%]{-webkit-transform:rotate(-90deg);-moz-transform:rotate(-90deg);-ms-transform:rotate(-90deg);-o-transform:rotate(-90deg)}.activeEntry[_ngcontent-%COMP%], .inactiveEntry[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;justify-content:center;align-items:center}.activeEntry[_ngcontent-%COMP%]{background-color:var(--active-colour)}#book[_ngcontent-%COMP%]{flex:0 0 90%;width:100%}#bookRecipes[_ngcontent-%COMP%]{overflow-y:auto;border-top:1px solid #000;height:84.5%}app-recipe[_ngcontent-%COMP%]{font-size:.8em;display:inline-block;width:130px;margin:4px 6px;cursor:pointer}#side[_ngcontent-%COMP%]{display:flex;flex-direction:row;font-size:.8em}#filter[_ngcontent-%COMP%], #side[_ngcontent-%COMP%]{margin:1%;vertical-align:bottom}#filter[_ngcontent-%COMP%]{font-size:1em;width:20%;display:block}#filter[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:1.05em;margin-left:0;padding:0;border:none;outline:0}#amount[_ngcontent-%COMP%]{font-size:1em;width:20%;margin:1%;display:block;vertical-align:bottom}#amount[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:65%;font-size:1.15em;margin-left:0;padding:0;border:none;outline:0}.radios[_ngcontent-%COMP%]{text-align:left;font-size:.9em}#progressButton[_ngcontent-%COMP%]{font-size:.6em}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;width:85px;margin:auto}#help1[_ngcontent-%COMP%]{font-size:.7em;font-weight:400;text-align:left}"]],data:{}});function Iv(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"div",[["class","activeEntry"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"div",[["class","entryText"]],null,null,null,null,null)),(e()(),Ks(2,null,["",""]))],null,(function(e,n){e(n,2,0,n.parent.context.$implicit)}))}function bv(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"div",[["class","inactiveEntry"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"div",[["class","entryText"]],null,null,null,null,null)),(e()(),Ks(2,null,["",""]))],null,(function(e,n){e(n,2,0,n.parent.context.$implicit)}))}function yv(e){return qs(0,[(e()(),Ds(0,0,null,null,4,"div",[["class","entry"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.select(e.context.$implicit)&&t),t}),null,null)),(e()(),Ms(16777216,null,null,1,null,Iv)),ei(2,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,bv)),ei(4,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.bookPage===n.context.$implicit),e(n,4,0,l.bookPage!==n.context.$implicit)}),null)}function Av(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"app-recipe",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.craft(l,e.context.$implicit)&&t),t}),mv,jE)),ei(1,114688,null,0,KE,[Pf,Qp,$E],{recipe:[0,"recipe"]},null)],(function(e,n){e(n,1,0,n.context.$implicit)}),null)}function Nv(e){return qs(0,[(e()(),Ds(0,16777216,null,null,6,"app-recipe",[["cdkDrag",""],["class","cdk-drag"]],[[2,"cdk-drag-disabled",null],[2,"cdk-drag-dragging",null]],null,null,mv,jE)),li(6144,null,yf,null,[Af]),ei(2,4866048,null,3,Af,[il,[3,If],_o,Ki,wl,[2,Tf],[2,Sv],Rf,Nn,[8,null]],null,null),Us(603979776,1,{_handles:1}),Us(603979776,2,{_previewTemplate:0}),Us(603979776,3,{_placeholderTemplate:0}),ei(6,114688,null,0,KE,[Pf,Qp,$E],{id:[0,"id"],recipe:[1,"recipe"],amount:[2,"amount"],type:[3,"type"]},null),(e()(),Ms(0,null,null,0))],(function(e,n){e(n,6,0,n.context.$implicit.id,n.context.$implicit.recipe,n.context.$implicit.amount,n.context.$implicit.type)}),(function(e,n){e(n,0,0,Yt(n,2).disabled,Yt(n,2)._dragRef.isDragging())}))}function _v(e){return qs(0,[(e()(),Ds(0,0,null,null,101,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,1,"app-crafting-top-menu",[],null,null,null,Ov,vv)),ei(3,114688,null,0,Ev,[Gp],null,null),(e()(),Ds(4,0,null,null,97,"div",[["id","boxes"]],null,null,null,null,null)),(e()(),Ds(5,0,null,null,86,"div",[["id","recipes"]],null,null,null,null,null)),(e()(),Ds(6,0,null,null,17,"span",[["class","title"]],null,null,null,null,null)),(e()(),Ds(7,0,null,null,16,"span",[["class","icon"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Recipes "])),(e()(),Ds(9,0,null,null,14,"div",[["appTooltip",""],["class","tooltip"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==Yt(e,10).onmousemove(l)&&t),t}),null,null)),ei(10,16384,null,0,vg,[],{elementId:[0,"elementId"]},null),(e()(),Ds(11,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(12,114688,null,0,Rg,[],{name:[0,"name"],title:[1,"title"]},null),(e()(),Ds(13,0,null,null,10,"span",[["id","help1"]],null,null,null,null,null)),(e()(),Ks(-1,null,[" In this menu you can define orders for your workshops."])),(e()(),Ds(15,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(16,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ks(-1,null,[" Each workshop will try to take order from the orders lists starting from top."])),(e()(),Ds(18,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(19,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ks(-1,null,[" Only orders that meet requirements will be taken by workshops."])),(e()(),Ds(21,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(22,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ks(-1,null,[" You can add order to the top of the list by holding shift while clicking on a recipe. "])),(e()(),Ds(24,0,null,null,67,"div",[["id","recipesBook"]],null,null,null,null,null)),(e()(),Ds(25,0,null,null,2,"div",[["id","menu"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,yv)),ei(27,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ds(28,0,null,null,63,"div",[["id","book"]],null,null,null,null,null)),(e()(),Ds(29,0,null,null,59,"div",[["id","side"]],null,null,null,null,null)),(e()(),Ds(30,0,null,null,8,"div",[["id","filter"]],null,null,null,null,null)),(e()(),Ks(-1,null,[" Filter:"])),(e()(),Ds(32,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(33,0,null,null,5,"input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,34)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,34).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,34)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,34)._compositionEnd(l.target.value)&&t),"ngModelChange"===n&&(t=!1!==(i.filterText=l)&&t),t}),null,null)),ei(34,16384,null,0,Ag,[ol,il,[2,yg]],null,null),li(1024,null,Ig,(function(e){return[e]}),[Ag]),ei(36,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(38,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(39,0,null,null,9,"div",[["id","amount"]],null,null,null,null,null)),(e()(),Ks(-1,null,[" amount:"])),(e()(),Ds(41,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(42,0,null,null,6,"input",[["min","1"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,43)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,43).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,43)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,43)._compositionEnd(l.target.value)&&t),"input"===n&&(t=!1!==Yt(e,44).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,44).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.amount=l)&&t),t}),null,null)),ei(43,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(44,16384,null,0,Vg,[ol,il],null,null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,Vg]),ei(46,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(48,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(49,0,null,null,29,"div",[["class","radios"]],null,null,null,null,null)),(e()(),Ds(50,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),Ds(51,0,null,null,6,"input",[["name","type"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,52)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,52).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,52)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,52)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==Yt(e,53).onChange()&&t),"blur"===n&&(t=!1!==Yt(e,53).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.craftingType=l)&&t),"change"===n&&(t=!1!==i.updateCraftingType()&&t),t}),null,null)),ei(52,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(53,212992,null,0,Yg,[ol,il,Wg,Mn],{name:[0,"name"],value:[1,"value"]},null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,Yg]),ei(55,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(57,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ks(-1,null,[" selected amount "])),(e()(),Ds(59,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(60,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),Ds(61,0,null,null,6,"input",[["name","type"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,62)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,62).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,62)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,62)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==Yt(e,63).onChange()&&t),"blur"===n&&(t=!1!==Yt(e,63).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.craftingType=l)&&t),"change"===n&&(t=!1!==i.updateCraftingType()&&t),t}),null,null)),ei(62,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(63,212992,null,0,Yg,[ol,il,Wg,Mn],{name:[0,"name"],value:[1,"value"]},null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,Yg]),ei(65,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(67,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ks(-1,null,[" until X available "])),(e()(),Ds(69,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(70,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),Ds(71,0,null,null,6,"input",[["name","type"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,72)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,72).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,72)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,72)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==Yt(e,73).onChange()&&t),"blur"===n&&(t=!1!==Yt(e,73).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.craftingType=l)&&t),"change"===n&&(t=!1!==i.updateCraftingType()&&t),t}),null,null)),ei(72,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(73,212992,null,0,Yg,[ol,il,Wg,Mn],{name:[0,"name"],value:[1,"value"]},null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,Yg]),ei(75,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(77,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ks(-1,null,[" until % available "])),(e()(),Ds(79,0,null,null,9,"div",[["class","radios"]],null,null,null,null,null)),(e()(),Ds(80,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),Ds(81,0,null,null,6,"input",[["name","type"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,82)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,82).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,82)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,82)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==Yt(e,83).onChange()&&t),"blur"===n&&(t=!1!==Yt(e,83).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.craftingType=l)&&t),"change"===n&&(t=!1!==i.updateCraftingType()&&t),t}),null,null)),ei(82,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(83,212992,null,0,Yg,[ol,il,Wg,Mn],{name:[0,"name"],value:[1,"value"]},null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,Yg]),ei(85,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(87,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ks(-1,null,[" continuous "])),(e()(),Ds(89,0,null,null,2,"div",[["id","bookRecipes"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,Av)),ei(91,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ds(92,0,null,null,9,"div",[["class","queue"]],null,null,null,null,null)),(e()(),Ds(93,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Orders"])),(e()(),Ks(95,null,[" ","/"," "])),(e()(),Ds(96,0,null,null,5,"div",[["cdkDropList",""],["class","cdk-drop-list"],["id","queueRecipes"]],[[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],[[null,"cdkDropListDropped"]],(function(e,n,l){var t=!0;return"cdkDropListDropped"===n&&(t=!1!==e.component.drop(l)&&t),t}),null,null)),li(6144,null,If,null,[bf]),ei(98,147456,null,0,bf,[il,Rf,Nn,[2,Sv],[3,Of],km,[2,Tf]],{id:[0,"id"]},{dropped:"cdkDropListDropped"}),li(256,null,Of,void 0,[]),(e()(),Ms(16777216,null,null,1,null,Nv)),ei(101,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,3,0),e(n,10,0,"help1"),e(n,12,0,"question",""),e(n,27,0,l.getEntries()),e(n,36,0,l.filterText),e(n,46,0,l.amount),e(n,53,0,"type",l.craftingTypes.SELECTED),e(n,55,0,"type",l.craftingType),e(n,63,0,"type",l.craftingTypes.UNTIL_X),e(n,65,0,"type",l.craftingType),e(n,73,0,"type",l.craftingTypes.UNTIL_PERCENT),e(n,75,0,"type",l.craftingType),e(n,83,0,"type",l.craftingTypes.CONTINUOUS),e(n,85,0,"type",l.craftingType),e(n,91,0,l.getRecipes()),e(n,98,0,"queueRecipes"),e(n,101,0,l.getQueue())}),(function(e,n){var l=n.component;e(n,33,0,Yt(n,38).ngClassUntouched,Yt(n,38).ngClassTouched,Yt(n,38).ngClassPristine,Yt(n,38).ngClassDirty,Yt(n,38).ngClassValid,Yt(n,38).ngClassInvalid,Yt(n,38).ngClassPending),e(n,42,0,Yt(n,48).ngClassUntouched,Yt(n,48).ngClassTouched,Yt(n,48).ngClassPristine,Yt(n,48).ngClassDirty,Yt(n,48).ngClassValid,Yt(n,48).ngClassInvalid,Yt(n,48).ngClassPending),e(n,51,0,Yt(n,57).ngClassUntouched,Yt(n,57).ngClassTouched,Yt(n,57).ngClassPristine,Yt(n,57).ngClassDirty,Yt(n,57).ngClassValid,Yt(n,57).ngClassInvalid,Yt(n,57).ngClassPending),e(n,61,0,Yt(n,67).ngClassUntouched,Yt(n,67).ngClassTouched,Yt(n,67).ngClassPristine,Yt(n,67).ngClassDirty,Yt(n,67).ngClassValid,Yt(n,67).ngClassInvalid,Yt(n,67).ngClassPending),e(n,71,0,Yt(n,77).ngClassUntouched,Yt(n,77).ngClassTouched,Yt(n,77).ngClassPristine,Yt(n,77).ngClassDirty,Yt(n,77).ngClassValid,Yt(n,77).ngClassInvalid,Yt(n,77).ngClassPending),e(n,81,0,Yt(n,87).ngClassUntouched,Yt(n,87).ngClassTouched,Yt(n,87).ngClassPristine,Yt(n,87).ngClassDirty,Yt(n,87).ngClassValid,Yt(n,87).ngClassInvalid,Yt(n,87).ngClassPending),e(n,95,0,l.getQueue().length,l.getQueueMaxSize()),e(n,96,0,Yt(n,98).id,Yt(n,98).disabled,Yt(n,98)._dropListRef.isDragging(),Yt(n,98)._dropListRef.isReceiving())}))}function wv(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"app-crafting",[],null,null,null,_v,Cv)),ei(1,114688,null,0,Tv,[cm,Qp,Pf,Fp,Nn],null,null)],(function(e,n){e(n,1,0)}),null)}var Pv=Dt("app-crafting",Tv,wv,{},{},[]);class Mv{constructor(e,n,l,t,i){this.recipeService=e,this.resourcesService=n,this.craftingService=l,this.modalService=t,this.changeDetectorRef=i,this.craftingTypes=wf,this.filterText="",this.amount=1,this.craftingType=this.craftingTypes.SELECTED,this.bookPage=du[du.ALL]}ngOnInit(){this.craftingService.registerForUpdate().subscribe(()=>{this.changeDetectorRef.destroyed||this.changeDetectorRef.detectChanges()}),this.craftingType=this.craftingService.getCookingType()}getRecipes(){return this.filterText&&this.filterText.length>0?this.recipeService.getCookingRecipes().filter(e=>e.available&&(this.resourcesService.getResourceTypes(e.getResource()).includes(du[this.bookPage])&&e.title.toLowerCase().includes(this.filterText.toLowerCase())||this.resourcesService.getResourceTypes(e.getResource()).includes(du[this.bookPage])&&Ou.prepareResourceName(e.getResource()).toLowerCase().includes(this.filterText.toLowerCase()))):this.recipeService.getCookingRecipes().filter(e=>e.available&&this.resourcesService.getResourceTypes(e.getResource()).includes(du[this.bookPage]))}getEntries(){const e=[];return e.push(du[du.FOOD]),e}select(e){this.bookPage=e}craft(e,n){this.validateAmountInput()&&this.craftingService.cook(e,n,this.amount,this.craftingType)}getQueue(){return this.craftingService.getCookingQueue()}drop(e){this.craftingService.moveRecipeInCookingQueue(e)}getQueueMaxSize(){return this.craftingService.getCookingQueueMaxSize()}validateAmountInput(){return!(isNaN(this.amount)||Number(this.amount)<1)||(this.modalService.info("Invalid cook amount"),this.amount=1,!1)}updateCraftingType(){this.craftingService.setCookingType(this.craftingType)}}var Dv=Kl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:100%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#boxes[_ngcontent-%COMP%]{flex-direction:row;height:95%;margin:.5%}#boxes[_ngcontent-%COMP%], #recipes[_ngcontent-%COMP%]{display:flex;border:1px solid #000;text-align:center}#recipes[_ngcontent-%COMP%]{flex:0 0 74.3%;flex-direction:column}#recipes[_ngcontent-%COMP%], .queue[_ngcontent-%COMP%]{align-items:center}.queue[_ngcontent-%COMP%]{text-align:center;flex:0 0 25%;display:flex;flex-direction:column;border:1px solid #000}#queueRecipes[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}.title[_ngcontent-%COMP%]{width:100.5%;font-weight:bolder;font-size:1.1em;display:inline-block;border-bottom:1px solid #000}#modes[_ngcontent-%COMP%]{margin-top:-1px;padding:0;margin-bottom:5px}#recipesBook[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:100%;width:100%}#menu[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-right:1px solid #000;flex:0 0 10%}.entry[_ngcontent-%COMP%]{display:flex;border-bottom:1px solid #000;flex:1 0 0;height:100%;width:100%;margin-right:-30px;font-size:.8em;font-weight:600;cursor:pointer}.entry[_ngcontent-%COMP%]:last-of-type{border-bottom:none}.entryText[_ngcontent-%COMP%]{-webkit-transform:rotate(-90deg);-moz-transform:rotate(-90deg);-ms-transform:rotate(-90deg);-o-transform:rotate(-90deg)}.activeEntry[_ngcontent-%COMP%], .inactiveEntry[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;justify-content:center;align-items:center}.activeEntry[_ngcontent-%COMP%]{background-color:var(--active-colour)}#book[_ngcontent-%COMP%]{flex:0 0 90%;width:100%}#bookRecipes[_ngcontent-%COMP%]{overflow-y:auto;border-top:1px solid #000}app-recipe[_ngcontent-%COMP%]{font-size:.8em;display:inline-block;width:130px;margin:4px 6px;cursor:pointer}#side[_ngcontent-%COMP%]{display:flex;flex-direction:row;font-size:.8em}#filter[_ngcontent-%COMP%], #side[_ngcontent-%COMP%]{margin:1%;vertical-align:bottom}#filter[_ngcontent-%COMP%]{font-size:1em;width:20%;display:block}#filter[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:1.05em;margin-left:0;padding:0;border:none;outline:0}#amount[_ngcontent-%COMP%]{font-size:1em;width:20%;margin:1%;display:block;vertical-align:bottom}#amount[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:65%;font-size:1.15em;margin-left:0;padding:0;border:none;outline:0}.radios[_ngcontent-%COMP%]{text-align:left;font-size:.9em}#progressButton[_ngcontent-%COMP%]{font-size:.6em}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;width:85px;margin:auto}#help1[_ngcontent-%COMP%]{font-size:.7em;font-weight:400;text-align:left}"]],data:{}});function Lv(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"div",[["class","activeEntry"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"div",[["class","entryText"]],null,null,null,null,null)),(e()(),Ks(2,null,["",""]))],null,(function(e,n){e(n,2,0,n.parent.context.$implicit)}))}function xv(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"div",[["class","inactiveEntry"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"div",[["class","entryText"]],null,null,null,null,null)),(e()(),Ks(2,null,["",""]))],null,(function(e,n){e(n,2,0,n.parent.context.$implicit)}))}function kv(e){return qs(0,[(e()(),Ds(0,0,null,null,4,"div",[["class","entry"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.select(e.context.$implicit)&&t),t}),null,null)),(e()(),Ms(16777216,null,null,1,null,Lv)),ei(2,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,xv)),ei(4,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.bookPage===n.context.$implicit),e(n,4,0,l.bookPage!==n.context.$implicit)}),null)}function Fv(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"app-recipe",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.craft(l,e.context.$implicit)&&t),t}),mv,jE)),ei(1,114688,null,0,KE,[Pf,Qp,$E],{recipe:[0,"recipe"]},null)],(function(e,n){e(n,1,0,n.context.$implicit)}),null)}function Uv(e){return qs(0,[(e()(),Ds(0,16777216,null,null,6,"app-recipe",[["cdkDrag",""],["class","cdk-drag"]],[[2,"cdk-drag-disabled",null],[2,"cdk-drag-dragging",null]],null,null,mv,jE)),li(6144,null,yf,null,[Af]),ei(2,4866048,null,3,Af,[il,[3,If],_o,Ki,wl,[2,Tf],[2,Sv],Rf,Nn,[8,null]],null,null),Us(603979776,1,{_handles:1}),Us(603979776,2,{_previewTemplate:0}),Us(603979776,3,{_placeholderTemplate:0}),ei(6,114688,null,0,KE,[Pf,Qp,$E],{id:[0,"id"],recipe:[1,"recipe"],amount:[2,"amount"],type:[3,"type"]},null),(e()(),Ms(0,null,null,0))],(function(e,n){e(n,6,0,n.context.$implicit.id,n.context.$implicit.recipe,n.context.$implicit.amount,n.context.$implicit.type)}),(function(e,n){e(n,0,0,Yt(n,2).disabled,Yt(n,2)._dragRef.isDragging())}))}function Hv(e){return qs(0,[(e()(),Ds(0,0,null,null,101,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,1,"app-crafting-top-menu",[],null,null,null,Ov,vv)),ei(3,114688,null,0,Ev,[Gp],null,null),(e()(),Ds(4,0,null,null,97,"div",[["id","boxes"]],null,null,null,null,null)),(e()(),Ds(5,0,null,null,86,"div",[["id","recipes"]],null,null,null,null,null)),(e()(),Ds(6,0,null,null,17,"span",[["class","title"]],null,null,null,null,null)),(e()(),Ds(7,0,null,null,16,"span",[["class","icon"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Recipes "])),(e()(),Ds(9,0,null,null,14,"div",[["appTooltip",""],["class","tooltip"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==Yt(e,10).onmousemove(l)&&t),t}),null,null)),ei(10,16384,null,0,vg,[],{elementId:[0,"elementId"]},null),(e()(),Ds(11,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(12,114688,null,0,Rg,[],{name:[0,"name"],title:[1,"title"]},null),(e()(),Ds(13,0,null,null,10,"span",[["id","help1"]],null,null,null,null,null)),(e()(),Ks(-1,null,[" In this menu you can define orders for your kitchens."])),(e()(),Ds(15,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(16,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ks(-1,null,[" Each kitchen will try to take order from the orders lists starting from top."])),(e()(),Ds(18,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(19,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ks(-1,null,[" Only orders that meet requirements will be taken by kitchen."])),(e()(),Ds(21,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(22,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ks(-1,null,[" You can add order to the top of the list by holding shift while clicking on a recipe. "])),(e()(),Ds(24,0,null,null,67,"div",[["id","recipesBook"]],null,null,null,null,null)),(e()(),Ds(25,0,null,null,2,"div",[["id","menu"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,kv)),ei(27,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ds(28,0,null,null,63,"div",[["id","book"]],null,null,null,null,null)),(e()(),Ds(29,0,null,null,59,"div",[["id","side"]],null,null,null,null,null)),(e()(),Ds(30,0,null,null,8,"div",[["id","filter"]],null,null,null,null,null)),(e()(),Ks(-1,null,[" Filter:"])),(e()(),Ds(32,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(33,0,null,null,5,"input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,34)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,34).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,34)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,34)._compositionEnd(l.target.value)&&t),"ngModelChange"===n&&(t=!1!==(i.filterText=l)&&t),t}),null,null)),ei(34,16384,null,0,Ag,[ol,il,[2,yg]],null,null),li(1024,null,Ig,(function(e){return[e]}),[Ag]),ei(36,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(38,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(39,0,null,null,9,"div",[["id","amount"]],null,null,null,null,null)),(e()(),Ks(-1,null,[" amount:"])),(e()(),Ds(41,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(42,0,null,null,6,"input",[["min","1"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,43)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,43).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,43)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,43)._compositionEnd(l.target.value)&&t),"input"===n&&(t=!1!==Yt(e,44).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,44).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.amount=l)&&t),t}),null,null)),ei(43,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(44,16384,null,0,Vg,[ol,il],null,null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,Vg]),ei(46,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(48,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(49,0,null,null,29,"div",[["class","radios"]],null,null,null,null,null)),(e()(),Ds(50,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),Ds(51,0,null,null,6,"input",[["name","type"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,52)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,52).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,52)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,52)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==Yt(e,53).onChange()&&t),"blur"===n&&(t=!1!==Yt(e,53).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.craftingType=l)&&t),"change"===n&&(t=!1!==i.updateCraftingType()&&t),t}),null,null)),ei(52,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(53,212992,null,0,Yg,[ol,il,Wg,Mn],{name:[0,"name"],value:[1,"value"]},null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,Yg]),ei(55,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(57,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ks(-1,null,[" selected amount "])),(e()(),Ds(59,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(60,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),Ds(61,0,null,null,6,"input",[["name","type"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,62)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,62).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,62)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,62)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==Yt(e,63).onChange()&&t),"blur"===n&&(t=!1!==Yt(e,63).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.craftingType=l)&&t),"change"===n&&(t=!1!==i.updateCraftingType()&&t),t}),null,null)),ei(62,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(63,212992,null,0,Yg,[ol,il,Wg,Mn],{name:[0,"name"],value:[1,"value"]},null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,Yg]),ei(65,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(67,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ks(-1,null,[" until X available "])),(e()(),Ds(69,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(70,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),Ds(71,0,null,null,6,"input",[["name","type"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,72)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,72).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,72)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,72)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==Yt(e,73).onChange()&&t),"blur"===n&&(t=!1!==Yt(e,73).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.craftingType=l)&&t),"change"===n&&(t=!1!==i.updateCraftingType()&&t),t}),null,null)),ei(72,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(73,212992,null,0,Yg,[ol,il,Wg,Mn],{name:[0,"name"],value:[1,"value"]},null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,Yg]),ei(75,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(77,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ks(-1,null,[" until % available "])),(e()(),Ds(79,0,null,null,9,"div",[["class","radios"]],null,null,null,null,null)),(e()(),Ds(80,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),Ds(81,0,null,null,6,"input",[["name","type"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,82)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,82).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,82)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,82)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==Yt(e,83).onChange()&&t),"blur"===n&&(t=!1!==Yt(e,83).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.craftingType=l)&&t),"change"===n&&(t=!1!==i.updateCraftingType()&&t),t}),null,null)),ei(82,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(83,212992,null,0,Yg,[ol,il,Wg,Mn],{name:[0,"name"],value:[1,"value"]},null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,Yg]),ei(85,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(87,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ks(-1,null,[" continuous "])),(e()(),Ds(89,0,null,null,2,"div",[["id","bookRecipes"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,Fv)),ei(91,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ds(92,0,null,null,9,"div",[["class","queue"]],null,null,null,null,null)),(e()(),Ds(93,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Orders"])),(e()(),Ks(95,null,[" ","/"," "])),(e()(),Ds(96,0,null,null,5,"div",[["cdkDropList",""],["class","cdk-drop-list"],["id","queueRecipes"]],[[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],[[null,"cdkDropListDropped"]],(function(e,n,l){var t=!0;return"cdkDropListDropped"===n&&(t=!1!==e.component.drop(l)&&t),t}),null,null)),li(6144,null,If,null,[bf]),ei(98,147456,null,0,bf,[il,Rf,Nn,[2,Sv],[3,Of],km,[2,Tf]],{id:[0,"id"]},{dropped:"cdkDropListDropped"}),li(256,null,Of,void 0,[]),(e()(),Ms(16777216,null,null,1,null,Uv)),ei(101,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,3,0),e(n,10,0,"help1"),e(n,12,0,"question",""),e(n,27,0,l.getEntries()),e(n,36,0,l.filterText),e(n,46,0,l.amount),e(n,53,0,"type",l.craftingTypes.SELECTED),e(n,55,0,"type",l.craftingType),e(n,63,0,"type",l.craftingTypes.UNTIL_X),e(n,65,0,"type",l.craftingType),e(n,73,0,"type",l.craftingTypes.UNTIL_PERCENT),e(n,75,0,"type",l.craftingType),e(n,83,0,"type",l.craftingTypes.CONTINUOUS),e(n,85,0,"type",l.craftingType),e(n,91,0,l.getRecipes()),e(n,98,0,"queueRecipes"),e(n,101,0,l.getQueue())}),(function(e,n){var l=n.component;e(n,33,0,Yt(n,38).ngClassUntouched,Yt(n,38).ngClassTouched,Yt(n,38).ngClassPristine,Yt(n,38).ngClassDirty,Yt(n,38).ngClassValid,Yt(n,38).ngClassInvalid,Yt(n,38).ngClassPending),e(n,42,0,Yt(n,48).ngClassUntouched,Yt(n,48).ngClassTouched,Yt(n,48).ngClassPristine,Yt(n,48).ngClassDirty,Yt(n,48).ngClassValid,Yt(n,48).ngClassInvalid,Yt(n,48).ngClassPending),e(n,51,0,Yt(n,57).ngClassUntouched,Yt(n,57).ngClassTouched,Yt(n,57).ngClassPristine,Yt(n,57).ngClassDirty,Yt(n,57).ngClassValid,Yt(n,57).ngClassInvalid,Yt(n,57).ngClassPending),e(n,61,0,Yt(n,67).ngClassUntouched,Yt(n,67).ngClassTouched,Yt(n,67).ngClassPristine,Yt(n,67).ngClassDirty,Yt(n,67).ngClassValid,Yt(n,67).ngClassInvalid,Yt(n,67).ngClassPending),e(n,71,0,Yt(n,77).ngClassUntouched,Yt(n,77).ngClassTouched,Yt(n,77).ngClassPristine,Yt(n,77).ngClassDirty,Yt(n,77).ngClassValid,Yt(n,77).ngClassInvalid,Yt(n,77).ngClassPending),e(n,81,0,Yt(n,87).ngClassUntouched,Yt(n,87).ngClassTouched,Yt(n,87).ngClassPristine,Yt(n,87).ngClassDirty,Yt(n,87).ngClassValid,Yt(n,87).ngClassInvalid,Yt(n,87).ngClassPending),e(n,95,0,l.getQueue().length,l.getQueueMaxSize()),e(n,96,0,Yt(n,98).id,Yt(n,98).disabled,Yt(n,98)._dropListRef.isDragging(),Yt(n,98)._dropListRef.isReceiving())}))}function Gv(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"app-cooking",[],null,null,null,Hv,Dv)),ei(1,114688,null,0,Mv,[cm,Qp,Pf,Fp,Nn],null,null)],(function(e,n){e(n,1,0)}),null)}var Bv=Dt("app-cooking",Mv,Gv,{},{},[]);class Vv{constructor(e,n,l,t,i,s){this.id=e,this.resource=n,this.amount=l,this.buy=t,this.price=i,this.duration=s}}let Wv=(()=>{class e{constructor(e,n,l){this.servicesService=e,this.optionsService=n,this.gameService=l,this.rations=2,this.clothes=1,this.alcohol=1,this.tax=0,this.logFiredWorkers=!0,this.logAutoTrade=!0,this.logSickness=!0,this.logMerchant=!0,this.furClothes=!0,this.foodNutrition=!0,this.complexWorkers=!1,this.secondHeaderRow=!1,this.showFreeWorkers=!1,this.showPopulation=!1,this.showResearchProgress=!1,this.showHappiness=!1,this.showFaith=!1,this.showRaw=!1,this.showProcessed=!1,this.showFood=!1,this.showTools=!1,this.defaultWorkshopResearch=!0,this.defaultGathererFood=!0,this.switchHunterFromTaming=!0,this.plowInSummer=!1,e.addService(bu.MANAGEMENT,this),this.initFoodPriority()}initFoodPriority(){return this.foodPriority=[[]],this.servicesService.getResourcesService().getResourcesByType(du.CONSUMABLE).forEach(e=>this.foodPriority[0].push(e.resource)),this.foodPriority}getName(){return"ManagementService"}load(e){this.rations=e.rations,this.clothes=e.clothes,this.alcohol=e.alcohol,this.tax=void 0!==e.tax?e.tax:0,this.furClothes=e.furClothes,this.foodNutrition=e.foodNutrition,this.showRaw=void 0!==e.showRaw&&e.showRaw,this.showProcessed=void 0!==e.showProcessed&&e.showProcessed,this.showFood=void 0!==e.showFood&&e.showFood,this.showTools=void 0!==e.showTools&&e.showTools,this.complexWorkers=e.complexWorkers,this.logFiredWorkers=void 0===e.logFiredWorkers||e.logFiredWorkers,this.logAutoTrade=void 0===e.logAutoTrade||e.logAutoTrade,this.logSickness=void 0===e.logSickness||e.logSickness,this.logMerchant=void 0===e.logMerchant||e.logMerchant,this.secondHeaderRow=void 0!==e.secondHeaderRow&&e.secondHeaderRow,this.showFreeWorkers=void 0!==e.showFreeWorkers&&e.showFreeWorkers,this.showPopulation=void 0!==e.showPopulation&&e.showPopulation,this.foodPriority=void 0!==e.foodPriority?e.foodPriority:this.initFoodPriority(),this.showResearchProgress=void 0!==e.showResearchProgress&&e.showResearchProgress,this.showFaith=void 0!==e.showFaith&&e.showFaith,this.showHappiness=void 0!==e.showHappiness&&e.showHappiness,this.defaultWorkshopResearch=void 0===e.defaultWorkshopResearch||e.defaultWorkshopResearch,this.defaultGathererFood=void 0===e.defaultGathererFood||e.defaultGathererFood,this.switchHunterFromTaming=void 0===e.switchHunterFromTaming||e.switchHunterFromTaming,this.plowInSummer=void 0!==e.plowInSummer&&e.plowInSummer,this.validateFoodPriority(),this.gameService.updateHeader(this.secondHeaderRow)}save(){return{rations:this.rations,clothes:this.clothes,alcohol:this.alcohol,tax:this.tax,furClothes:this.furClothes,foodNutrition:this.foodNutrition,showRaw:this.showRaw,showProcessed:this.showProcessed,showFood:this.showFood,showTools:this.showTools,complexWorkers:this.complexWorkers,logFiredWorkers:this.logFiredWorkers,logAutoTrade:this.logAutoTrade,logSickness:this.logSickness,logMerchant:this.logMerchant,secondHeaderRow:this.secondHeaderRow,showFreeWorkers:this.showFreeWorkers,showPopulation:this.showPopulation,foodPriority:this.foodPriority,showResearchProgress:this.showResearchProgress,showFaith:this.showFaith,showHappiness:this.showHappiness,defaultWorkshopResearch:this.defaultWorkshopResearch,defaultGathererFood:this.defaultGathererFood,switchHunterFromTaming:this.switchHunterFromTaming,plowInSummer:this.plowInSummer}}reset(e,n){!this.optionsService.getOption(_p.KEEP_MANAGEMENT_SETTINGS_ON_RESET)||e?(this.rations=2,this.clothes=1,this.alcohol=1,this.tax=0,this.furClothes=!0,this.foodNutrition=!0,this.showRaw=!1,this.showProcessed=!1,this.showFood=!1,this.showTools=!1,this.complexWorkers=!1,this.logFiredWorkers=!0,this.logAutoTrade=!0,this.logSickness=!0,this.secondHeaderRow=!1,this.showFreeWorkers=!1,this.showPopulation=!1,this.showResearchProgress=!1,this.showFaith=!1,this.showHappiness=!1,this.defaultWorkshopResearch=!0,this.defaultGathererFood=!0,this.switchHunterFromTaming=!0,this.plowInSummer=!1,this.initFoodPriority()):(this.complexWorkers=!1,this.validateFoodPriority()),e&&(this.complexWorkers=!1,this.initFoodPriority()),this.gameService.updateHeader(this.secondHeaderRow)}getRations(){return this.rations}getClothesRations(){return this.clothes}getAlcoholRations(){return this.alcohol}setRations(e){this.rations=e}setClothesRations(e){this.clothes=e}setAlcoholRations(e){this.alcohol=e}getTaxRate(){return this.tax}setTaxRate(e){this.tax=e}toggleFurClothes(){this.furClothes=!this.furClothes}getFurClothes(){return this.furClothes}toggleFoodNutrition(){this.foodNutrition=!this.foodNutrition}getFoodNutrition(){return this.foodNutrition}toggleComplexWorkers(){this.complexWorkers=!this.complexWorkers}getComplexWorkers(){return this.complexWorkers}getSecondHeaderRow(){return this.secondHeaderRow}toggleSecondHeaderRow(){this.secondHeaderRow=!this.secondHeaderRow,this.gameService.updateHeader(this.secondHeaderRow)}getShowFreeWorkers(){return this.showFreeWorkers}toggleShowFreeWorkers(){this.showFreeWorkers=!this.showFreeWorkers}getShowPopulation(){return this.showPopulation}toggleShowPopulation(){this.showPopulation=!this.showPopulation}getShowResearchProgress(){return this.showResearchProgress}toggleShowResearchProgress(){this.showResearchProgress=!this.showResearchProgress}getFoodPriority(){if(this.gameService.isEnabled(ou.MANAGEMENT))return this.foodPriority;{const e=[[]];return this.servicesService.getResourcesService().getResourcesByType(du.CONSUMABLE).forEach(n=>e[0].push(n.resource)),e}}up(e,n){const l=this.foodPriority[n].findIndex(n=>n===e);n>0?(l>=0&&(this.foodPriority[n-1].push(this.foodPriority[n][l]),this.foodPriority[n].splice(l,1)),this.clearList(this.foodPriority)):(this.foodPriority.unshift([]),this.foodPriority[0].push(this.foodPriority[1][l]),this.foodPriority[1].splice(l,1))}down(e,n){const l=this.foodPriority[n].findIndex(n=>n===e);l>=0&&n+1<9&&(this.foodPriority.length<n+2&&this.foodPriority.push([]),this.foodPriority[n+1].push(this.foodPriority[n][l]),this.foodPriority[n].splice(l,1)),this.clearList(this.foodPriority)}clearList(e){for(;e.length>0&&0===e[e.length-1].length;)e.splice(e.length-1,1);for(;e.length>0&&0===e[0].length;)e.splice(0,1)}validateFoodPriority(){const e=[];this.foodPriority.forEach(n=>n.forEach(n=>e.push(n))),mo.getResourcesByType(du.CONSUMABLE).forEach(n=>{e.find(e=>e===su[n[0]])||this.foodPriority[0].push(su[n[0]])})}getShowFaith(){return this.showFaith}toggleShowFaith(){this.showFaith=!this.showFaith}getShowHappiness(){return this.showHappiness}toggleShowHappiness(){this.showHappiness=!this.showHappiness}getLogFiredWorkers(){return this.logFiredWorkers}toggleLogFiredWorkers(){this.logFiredWorkers=!this.logFiredWorkers}getDefaultWorkshopResearch(){return this.defaultWorkshopResearch}toggleDefaultWorkshopResearch(){this.defaultWorkshopResearch=!this.defaultWorkshopResearch}getDefaultGathererFood(){return this.defaultGathererFood}toggleDefaultGathererFood(){this.defaultGathererFood=!this.defaultGathererFood}getSwitchHunterFromTaming(){return this.switchHunterFromTaming}toggleSwitchHunterFromTaming(){this.switchHunterFromTaming=!this.switchHunterFromTaming}getPlowInSummer(){return this.plowInSummer}togglePlowInSummer(){this.plowInSummer=!this.plowInSummer}getLogAutoTrade(){return this.logAutoTrade}toggleLogAutoTrade(){this.logAutoTrade=!this.logAutoTrade}getShowRaw(){return this.showRaw}toggleShowRaw(){this.showRaw=!this.showRaw}getShowProcessed(){return this.showProcessed}toggleShowProcessed(){this.showProcessed=!this.showProcessed}getShowFood(){return this.showFood}toggleShowFood(){this.showFood=!this.showFood}getShowTools(){return this.showTools}toggleShowTools(){this.showTools=!this.showTools}getLogSickness(){return this.logSickness}toggleLogSickness(){this.logSickness=!this.logSickness}getLogMerchant(){return this.logMerchant}toggleLogMerchant(){this.logMerchant=!this.logMerchant}}return e.\u0275prov=re({factory:function(){return new e(Ae(Np),Ae(wp),Ae(Gp))},token:e,providedIn:"root"}),e})(),Yv=(()=>{class e{constructor(e,n,l,t,i,s,r){this.servicesService=e,this.calendarService=n,this.managementService=l,this.resourcesService=t,this.logService=i,this.soundService=s,this.modalService=r,this.offers=[],this.id=10,this.typeRadio="all",this.servicesService.addService(bu.MARKET,this),this.calendarService.registerForDayChange().subscribe(e=>{this.offers.forEach(e=>{e.duration-=1,0===e.duration&&this.autoBuy([e])}),this.offers=this.offers.filter(e=>e.duration>0)})}autoBuy(e){e.forEach(e=>{let n=e.amount;const l=this.resourcesService.getResource(e.resource);if(e.buy&&l.options.autoTrade.autoBuyEnabled){let t=l.options.autoTrade.autoBuyAmount;l.options.autoTrade.autoBuyPercentage&&(t=Math.floor(l.limit*l.options.autoTrade.autoBuyAmount/100));let i=l.options.autoTrade.autoBuyOrder;l.amount+i<t&&t-l.amount>i&&(i=t-l.amount),n>i&&(n=i);const s=this.resourcesService.getLimit(e.resource);n>s&&(n=s),n>0&&this.resourcesService.decreaseResource(su.COINS,this.calculatePrice(e,n),"Auto trade",!0)&&(this.resourcesService.increaseResource(e.resource,n,"Auto trade",!0),l.options.autoTrade.autoBuyOrder>0&&(l.options.autoTrade.autoBuyOrder-=n,l.options.autoTrade.autoBuyOrder<0&&(l.options.autoTrade.autoBuyOrder=0)),this.managementService.getLogAutoTrade()&&this.logService.log("auto bought "+n+" "+Ou.prepareResourceName(e.resource))),e.amount===Number(n)?this.offers.splice(this.offers.indexOf(e),1):(e.price=this.calculatePrice(e,e.amount-n),e.amount-=n)}else if(!e.buy&&l.options.autoTrade.autoSellEnabled){let t=l.options.autoTrade.autoSellAmount;l.options.autoTrade.autoSellPercentage&&(t=Math.floor(l.limit*l.options.autoTrade.autoSellAmount/100));let i=l.options.autoTrade.autoSellOrder;t<l.amount-i&&(i=l.amount-t),n>i&&(n=i),n>0&&this.resourcesService.decreaseResource(e.resource,n,"Auto trade",!0)&&(this.resourcesService.increaseResource(su.COINS,this.calculatePrice(e,n),"Auto trade",!0),l.options.autoTrade.autoSellOrder>0&&(l.options.autoTrade.autoSellOrder-=n,l.options.autoTrade.autoSellOrder<0&&(l.options.autoTrade.autoSellOrder=0)),this.managementService.getLogAutoTrade()&&this.logService.log("auto sold "+n+" "+Ou.prepareResourceName(e.resource))),e.amount===Number(n)?this.offers.splice(this.offers.indexOf(e),1):(e.price=this.calculatePrice(e,e.amount-n),e.amount-=n)}})}nextId(){return this.id+=1,this.id-1}getName(){return"MarketService"}load(e){this.offers=e.offers,this.id=e.id}save(){return{offers:this.offers,id:this.id}}reset(e,n){this.offers=[],this.id=10}getOffers(){return this.offers}accept(e){const n=this.offers.find(n=>n.id===e);let l=!1;if(n){this.modalService.open(Pu.MARKET),this.modalService.setModalValue(n);const e=this.modalService.registerForValueResponse().subscribe(t=>{if(e.unsubscribe(),null!==t&&!isNaN(t)){if(t>n.amount&&(t=n.amount),n.buy)if(t>this.resourcesService.getLimit(n.resource)){this.modalService.open(Pu.CONFIRM),this.modalService.setModalText("Selected amount exceeds available warehouse space.<br>Would you like to buy anyway?");const e=this.modalService.registerForConfirmation().subscribe(l=>{if(e.unsubscribe(),l){if(!this.resourcesService.decreaseResource(su.COINS,this.calculatePrice(n,t),"Market",!0))return void this.modalService.info("Not enough coins to buy "+t+" "+Ou.prepareResourceName(n.resource));this.resourcesService.increaseResource(n.resource,t,"Market",!0),n.amount===Number(t)?this.offers.splice(this.offers.indexOf(n),1):(n.price=this.calculatePrice(n,n.amount-t),n.amount-=t)}})}else{if(!this.resourcesService.decreaseResource(su.COINS,this.calculatePrice(n,t),"Market",!0))return void this.modalService.info("Not enough coins to buy "+t+" "+Ou.prepareResourceName(n.resource));this.resourcesService.increaseResource(n.resource,t,"Market",!0),l=!0}else{if(!this.resourcesService.decreaseResource(n.resource,t,"Market",!0))return void this.modalService.info("Not enough resources to sell");this.resourcesService.increaseResource(su.COINS,this.calculatePrice(n,t),"Market",!0),l=!0}l&&(n.amount===Number(t)?this.offers.splice(this.offers.indexOf(n),1):(n.price=this.calculatePrice(n,n.amount-t),n.amount-=t))}})}else this.modalService.info("Market offer not found")}callMerchant(){const e=Array.from(this.resourcesService.getResources().values()).filter(e=>e.isVisible()).map(e=>({item:e.resource,chance:e.prioritise?15:1})),n=Nu.randomBetween(3,8),l=Nu.randomBetween(50,180);for(let t=0;t<n;t++){const n=Nu.randomWeightedExcept(e,[su.COINS]),i=Nu.randomBetween(5,20),s=Nu.randomBetween(0,1),r=Nu.randomBetween(-5,25);let u=mo.getResource(n).TRADE_VALUE*i;u=s?Math.floor(u*(1+r/100)):Math.floor(u*(1-r/100)),0===u?t--:this.offers.push(new Vv(this.nextId(),n,i,!!s,u,l))}this.managementService.getLogMerchant()&&this.logService.log("Merchant arrived"),this.soundService.playMarket(),this.autoBuy(this.offers)}calculatePrice(e,n){return e.buy?Math.ceil(n/e.amount*e.price):Math.floor(n/e.amount*e.price)}dismiss(e){this.offers=this.offers.filter(n=>n.id!==e)}getTypeRadio(){return this.typeRadio}setTypeRadio(e){this.typeRadio=e}}return e.\u0275prov=re({factory:function(){return new e(Ae(Np),Ae(Lp),Ae(Wv),Ae(Qp),Ae(xp),Ae(Dp),Ae(Fp))},token:e,providedIn:"root"}),e})();class zv{constructor(e,n,l){this.marketService=e,this.villageService=n,this.resourcesService=l,this.filterText="",this.typeRadio="all",this.dismissMode=!1}ngOnInit(){this.typeRadio=this.marketService.getTypeRadio()}getOffers(){let e;return e=null!==this.filterText&&this.filterText.length>0?this.marketService.getOffers().filter(e=>Ou.prepareResourceName(e.resource).toLowerCase().includes(this.filterText)):this.marketService.getOffers(),"buy"===this.typeRadio?e=e.filter(e=>e.buy):"sell"===this.typeRadio&&(e=e.filter(e=>!e.buy)),e}getCoins(){return this.resourcesService.getResource(su.COINS).amount}accept(e){this.marketService.accept(e)}isMarketBuilt(){return void 0!==this.villageService.getBuildings().find(e=>e.getBuildingType()===tu.MARKETPLACE)}getResourceName(e){return Ou.prepareResourceName(e)}calculatePiecePrice(e){return this.marketService.calculatePrice(e,1)}getResourceAmount(e){return this.resourcesService.getResource(e.resource).amount}getResourceLimit(e){return this.resourcesService.getResource(e.resource).limit}dismiss(e){this.marketService.dismiss(e)}updateTypeRadio(){this.marketService.setTypeRadio(this.typeRadio)}}var $v=Kl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{margin:.5%;height:100%}#title[_ngcontent-%COMP%]{font-size:1.3em;font-weight:800}#title[_ngcontent-%COMP%], .boxTitle[_ngcontent-%COMP%]{text-align:center}.boxTitle[_ngcontent-%COMP%]{border-bottom:2px solid #000}#side[_ngcontent-%COMP%]{float:right;font-size:1em;width:25%;margin:.5%;display:inline-block;vertical-align:bottom}#side[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:.8em;margin:0;padding:0;border:none;outline:0}#headers[_ngcontent-%COMP%]{margin:3px 3px 0;display:flex;flex-direction:row;width:96.5%;text-align:center;font-size:1em;font-weight:700}#headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:0 0 24%;padding:2px;border:1px solid #000;border-left:none}#headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-of-type{border-left:1px solid #000}#market[_ngcontent-%COMP%]{display:flex;flex-direction:row;border:2px solid #000;height:91.5%}#offersBox[_ngcontent-%COMP%]{flex:0 0 85%;flex-direction:column;border-right:2px solid #000}#filterBox[_ngcontent-%COMP%], #offersBox[_ngcontent-%COMP%]{display:flex;height:100%;font-size:1.2em}#filterBox[_ngcontent-%COMP%]{flex:0 0 15%;flex-direction:column}#offers[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:center;height:100%;overflow-y:auto}.offer[_ngcontent-%COMP%]{flex:0 0 auto;width:98%;display:flex;flex-direction:row;border:1px solid #000;margin:3px}.offer[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex:0 0 24%;padding:2px}.offer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:.8em}#filters[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}#filter[_ngcontent-%COMP%]{width:90%}.icon[_ngcontent-%COMP%], .icon2[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.icon2[_ngcontent-%COMP%]{justify-content:center}#noMarket[_ngcontent-%COMP%]{margin-left:112px;color:var(--negative-colour)}"]],data:{}});function Kv(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[["id","noMarket"]],null,null,null,null,null)),(e()(),Ks(-1,null,["No Marketplace available. No merchant will visit."]))],null,null)}function jv(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ks(1,null,[""," buy offer"]))],null,(function(e,n){e(n,1,0,n.component.getResourceName(n.parent.context.$implicit.resource))}))}function Qv(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ks(1,null,[""," sell offer"]))],null,(function(e,n){e(n,1,0,n.component.getResourceName(n.parent.context.$implicit.resource))}))}function qv(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.accept(e.parent.context.$implicit.id)&&t),t}),null,null)),(e()(),Ks(-1,null,["Buy"]))],null,null)}function Xv(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.accept(e.parent.context.$implicit.id)&&t),t}),null,null)),(e()(),Ks(-1,null,["Sell"]))],null,null)}function Zv(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.dismiss(e.parent.context.$implicit.id)&&t),t}),null,null)),(e()(),Ks(-1,null,["Dismiss"]))],null,null)}function Jv(e){return qs(0,[(e()(),Ds(0,0,null,null,30,"div",[["appTooltip",""],["class","offer tooltip"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==Yt(e,1).onmousemove(l)&&t),t}),null,null)),ei(1,16384,null,0,vg,[],{elementId:[0,"elementId"]},null),(e()(),Ds(2,0,null,null,11,"span",[["class","tooltipOffer"]],[[8,"id",0]],null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,jv)),ei(4,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,Qv)),ei(6,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(7,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Ks(8,null,[" total price: ",""])),(e()(),Ds(9,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ks(10,null,[" piece price: ",""])),(e()(),Ds(11,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(12,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ks(13,null,[" storage: ","/"," "])),(e()(),Ds(14,0,null,null,3,"div",[["class","icon2 "]],null,null,null,null,null)),(e()(),Ks(15,null,[" "," "])),(e()(),Ds(16,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(17,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ds(18,0,null,null,3,"div",[["class","icon2"]],null,null,null,null,null)),(e()(),Ks(19,null,[" "," "])),(e()(),Ds(20,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(21,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ds(22,0,null,null,1,"div",[["class","icon2"]],null,null,null,null,null)),(e()(),Ks(23,null,[" "," days "])),(e()(),Ds(24,0,null,null,6,"div",[],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,qv)),ei(26,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,Xv)),ei(28,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,Zv)),ei(30,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,1,0,n.context.$implicit.id),e(n,4,0,n.context.$implicit.buy),e(n,6,0,!n.context.$implicit.buy),e(n,17,0,l.getResourceName(n.context.$implicit.resource),"resources"),e(n,21,0,"coins","resources"),e(n,26,0,n.context.$implicit.buy),e(n,28,0,!n.context.$implicit.buy),e(n,30,0,l.dismissMode)}),(function(e,n){var l=n.component;e(n,2,0,Rt(1,"",n.context.$implicit.id,"")),e(n,8,0,n.context.$implicit.price),e(n,10,0,l.calculatePiecePrice(n.context.$implicit)),e(n,13,0,l.getResourceAmount(n.context.$implicit),l.getResourceLimit(n.context.$implicit)),e(n,15,0,n.context.$implicit.amount),e(n,19,0,n.context.$implicit.price),e(n,23,0,n.context.$implicit.duration)}))}function eR(e){return qs(0,[(e()(),Ds(0,0,null,null,77,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Market"])),(e()(),Ds(4,0,null,null,5,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(5,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(6,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(7,null,[" "," "])),(e()(),Ms(16777216,null,null,1,null,Kv)),ei(9,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(10,0,null,null,67,"div",[["id","market"]],null,null,null,null,null)),(e()(),Ds(11,0,null,null,15,"div",[["id","offersBox"]],null,null,null,null,null)),(e()(),Ds(12,0,null,null,2,"div",[["class","boxTitle"]],null,null,null,null,null)),(e()(),Ds(13,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Offers"])),(e()(),Ds(15,0,null,null,8,"div",[["id","headers"]],null,null,null,null,null)),(e()(),Ds(16,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["offer"])),(e()(),Ds(18,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["price"])),(e()(),Ds(20,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["duration"])),(e()(),Ds(22,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["action"])),(e()(),Ds(24,0,null,null,2,"div",[["id","offers"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,Jv)),ei(26,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ds(27,0,null,null,50,"div",[["id","filterBox"]],null,null,null,null,null)),(e()(),Ds(28,0,null,null,2,"div",[["class","boxTitle"]],null,null,null,null,null)),(e()(),Ds(29,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Filters"])),(e()(),Ds(31,0,null,null,46,"div",[["id","filters"]],null,null,null,null,null)),(e()(),Ds(32,0,null,null,5,"input",[["id","filter"],["placeholder","search"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,33)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,33).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,33)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,33)._compositionEnd(l.target.value)&&t),"ngModelChange"===n&&(t=!1!==(i.filterText=l)&&t),t}),null,null)),ei(33,16384,null,0,Ag,[ol,il,[2,yg]],null,null),li(1024,null,Ig,(function(e){return[e]}),[Ag]),ei(35,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(37,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(38,0,null,null,39,"div",[],null,null,null,null,null)),(e()(),Ds(39,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),Ds(40,0,null,null,6,"input",[["name","type"],["type","radio"],["value","all"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,41)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,41).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,41)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,41)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==Yt(e,42).onChange()&&t),"blur"===n&&(t=!1!==Yt(e,42).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.typeRadio=l)&&t),"change"===n&&(t=!1!==i.updateTypeRadio()&&t),t}),null,null)),ei(41,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(42,212992,null,0,Yg,[ol,il,Wg,Mn],{name:[0,"name"],value:[1,"value"]},null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,Yg]),ei(44,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(46,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ks(-1,null,[" All "])),(e()(),Ds(48,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(49,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),Ds(50,0,null,null,6,"input",[["name","type"],["type","radio"],["value","buy"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,51)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,51).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,51)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,51)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==Yt(e,52).onChange()&&t),"blur"===n&&(t=!1!==Yt(e,52).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.typeRadio=l)&&t),"change"===n&&(t=!1!==i.updateTypeRadio()&&t),t}),null,null)),ei(51,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(52,212992,null,0,Yg,[ol,il,Wg,Mn],{name:[0,"name"],value:[1,"value"]},null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,Yg]),ei(54,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(56,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ks(-1,null,[" Buy "])),(e()(),Ds(58,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(59,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),Ds(60,0,null,null,6,"input",[["name","type"],["type","radio"],["value","sell"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,61)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,61).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,61)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,61)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==Yt(e,62).onChange()&&t),"blur"===n&&(t=!1!==Yt(e,62).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.typeRadio=l)&&t),"change"===n&&(t=!1!==i.updateTypeRadio()&&t),t}),null,null)),ei(61,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(62,212992,null,0,Yg,[ol,il,Wg,Mn],{name:[0,"name"],value:[1,"value"]},null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,Yg]),ei(64,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(66,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ks(-1,null,[" Sell "])),(e()(),Ds(68,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(69,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(70,0,null,null,7,"label",[],null,null,null,null,null)),(e()(),Ds(71,0,null,null,5,"input",[["name","type"],["type","checkbox"],["value","dismiss"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,72).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==Yt(e,72).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.dismissMode=l)&&t),t}),null,null)),ei(72,16384,null,0,bg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[bg]),ei(74,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(76,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ks(-1,null,[" Dismiss "]))],(function(e,n){var l=n.component;e(n,6,0,"coins","resources"),e(n,9,0,!l.isMarketBuilt()),e(n,26,0,l.getOffers()),e(n,35,0,l.filterText),e(n,42,0,"type","all"),e(n,44,0,"type",l.typeRadio),e(n,52,0,"type","buy"),e(n,54,0,"type",l.typeRadio),e(n,62,0,"type","sell"),e(n,64,0,"type",l.typeRadio),e(n,74,0,"type",l.dismissMode)}),(function(e,n){e(n,7,0,n.component.getCoins()),e(n,32,0,Yt(n,37).ngClassUntouched,Yt(n,37).ngClassTouched,Yt(n,37).ngClassPristine,Yt(n,37).ngClassDirty,Yt(n,37).ngClassValid,Yt(n,37).ngClassInvalid,Yt(n,37).ngClassPending),e(n,40,0,Yt(n,46).ngClassUntouched,Yt(n,46).ngClassTouched,Yt(n,46).ngClassPristine,Yt(n,46).ngClassDirty,Yt(n,46).ngClassValid,Yt(n,46).ngClassInvalid,Yt(n,46).ngClassPending),e(n,50,0,Yt(n,56).ngClassUntouched,Yt(n,56).ngClassTouched,Yt(n,56).ngClassPristine,Yt(n,56).ngClassDirty,Yt(n,56).ngClassValid,Yt(n,56).ngClassInvalid,Yt(n,56).ngClassPending),e(n,60,0,Yt(n,66).ngClassUntouched,Yt(n,66).ngClassTouched,Yt(n,66).ngClassPristine,Yt(n,66).ngClassDirty,Yt(n,66).ngClassValid,Yt(n,66).ngClassInvalid,Yt(n,66).ngClassPending),e(n,71,0,Yt(n,76).ngClassUntouched,Yt(n,76).ngClassTouched,Yt(n,76).ngClassPristine,Yt(n,76).ngClassDirty,Yt(n,76).ngClassValid,Yt(n,76).ngClassInvalid,Yt(n,76).ngClassPending)}))}function nR(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"app-market",[],null,null,null,eR,$v)),ei(1,114688,null,0,zv,[Yv,$E,Qp],null,null)],(function(e,n){e(n,1,0)}),null)}var lR=Dt("app-market",zv,nR,{},{},[]);class tR{constructor(e,n,l,t,i,s,r,u,o=function(){},a=0){this.tech=e,this.category=n,this.prerequisites=l,this.flagPrerequisites=t,this.cost=i,this.requiredResearchPoints=s,this.description=r,this.finishDescription=u,this.researchPoints=a,this.finishFunction=o}getTech(){return this.tech}getTechName(){return Ou.prepareTechName(this.tech)}isResearched(){return this.researchPoints>=this.requiredResearchPoints&&(this.researchPoints=this.requiredResearchPoints),this.researchPoints===this.requiredResearchPoints}getCategory(){return this.category}getDescription(){return this.description}getResearchPointsDue(){return this.requiredResearchPoints-this.researchPoints}addResearchPoints(e){this.researchPoints+=e,this.researchPoints>this.requiredResearchPoints&&(this.researchPoints=this.requiredResearchPoints)}getResearchPoints(){return this.researchPoints}setResearchPoints(e){this.researchPoints=e}setResearched(){this.researchPoints=this.requiredResearchPoints}getCost(){return this.cost}clearCost(){this.cost=new Map}getPrerequisites(){return this.prerequisites}getFlagPrerequisites(){return this.flagPrerequisites}getFinishFunction(){return this.finishFunction}getRequiredResearchPoints(){return this.requiredResearchPoints}getFinishDescription(){return this.finishDescription}}class iR{constructor(){this.prerequisites=[],this.flagPrerequisites=[],this.cost=new Map,this.researchPoints=0,this.finishFunction=function(){}}forTech(e){return this.tech=e,this}withCategory(e){return this.category=e,this}withPrerequisite(e){return this.prerequisites.push(e),this}withPrerequisites(e){return e.forEach(e=>this.prerequisites.push(e)),this}withFlagPrerequisite(e){return this.flagPrerequisites.push(e),this}withFlagPrerequisites(e){return e.forEach(e=>this.flagPrerequisites.push(e)),this}withCost(e,n){return this.cost.set(e,n),this}withCosts(e){return e.forEach((e,n)=>this.cost.set(n,e)),this}withResearchPoints(e){return this.researchPoints=e,this}withDescription(e){return this.description=e,this}withFinishDescription(e){return this.finishDescription=e,this}withFinishFunction(e){return this.finishFunction=e,this}build(){const e=new tR(this.tech,this.category,this.prerequisites,this.flagPrerequisites,this.cost,this.researchPoints,this.description,this.finishDescription,this.finishFunction);return this.tech=void 0,this.category=void 0,this.prerequisites=[],this.flagPrerequisites=[],this.cost=new Map,this.researchPoints=0,this.description=void 0,this.finishDescription=void 0,this.finishFunction=function(){},e}}let sR=(()=>{class e{constructor(e,n,l,t,i,s){this.servicesService=e,this.modalService=n,this.resourcesService=l,this.logService=t,this.soundService=i,this.gameService=s,this.techUpdate=new C,this.techList=[],this.techDone=[],this.techQueue=[],this.techStarted=[],this.techQueueSize=1,this.foresight=0,this.showDone=!1,this.servicesService.addService(bu.RESEARCH,this),this.init()}init(){this.techList=[];const e=new iR;Object.entries(Eo).forEach(n=>{e.forTech(uu[n[0]]).withCategory(n[1].CATEGORY).withFinishFunction(n[1].FINISH).withResearchPoints(n[1].RESEARCH_POINT).withPrerequisites(n[1].PREREQUISITES).withFlagPrerequisites(n[1].FLAG_PREREQUISITES?n[1].FLAG_PREREQUISITES:[]).withDescription(n[1].DESCRIPTION).withFinishDescription(n[1].FINISH_DESCRIPTION),n[1].COST.forEach(n=>e.withCost(n.resource,n.amount)),this.techList.push(e.build())})}isResearched(e){return null!=this.techDone.find(n=>n===e)}startResearch(e){if(this.techQueue.find(n=>n.getTech()===e))return;const n=this.techList.find(n=>n.getTech()===e);let l=!0,t="";if(n.getPrerequisites().forEach(e=>{this.techDone.includes(e)||this.techQueue.find(n=>n.getTech()===e)||(l=!1,t+=Ou.prepareTechName(e)+" not researched!<br>")}),n.getFlagPrerequisites().forEach(e=>{this.gameService.isEnabled(e)||(l=!1,t+=Ou.prepareFlagName(e)+" not unlocked!<br>")}),!l)return void this.modalService.info(t);this.modalService.open(Pu.RESEARCH_UNLOCK),this.modalService.setTech(this.techList.find(n=>n.getTech()===e));const i=this.modalService.registerForConfirmation().subscribe(n=>{if(i.unsubscribe(),n){const n=this.techList.find(n=>n.getTech()===e);if(!this.techStarted.find(n=>n[0]===e)){let e=!0,l="";if(Array.from(n.getCost().entries()).forEach(n=>{const t=this.resourcesService.hasResource(n[0],n[1],"Research",!0);0!==t&&(l+="Missing "+t+" "+Ou.prepareResourceName(n[0])+"!<br>",e=!1)}),!e)return void this.modalService.info(l)}let l=!0,t="";if(Array.from(n.getCost().entries()).forEach(e=>{const n=this.resourcesService.hasResource(e[0],e[1],"Research",!0);0!==n&&(t+="Missing "+n+" "+Ou.prepareResourceName(e[0])+"!<br>",l=!1)}),!l)return void this.modalService.info(t);this.resourcesService.decreaseResources(n.getCost(),"Research",!0);const i=this.techList.find(n=>n.getTech()===e);i.clearCost(),this.techStarted.find(e=>e[0]===i.getTech())||this.techStarted.push([i.getTech(),i.getResearchPoints()]),this.techQueue.push(i)}})}progressTech(e){this.techQueue.length>0&&(this.techQueue[0].addResearchPoints(e),this.techQueue[0].isResearched()&&(this.logService.log(this.techQueue[0].getTechName()+" researched"),this.soundService.playResearch(),this.techQueue[0].getFinishFunction()(this.servicesService),this.techDone.push(this.techQueue[0].getTech()),this.techStarted=this.techStarted.filter(e=>e[0]!==this.techQueue[0].getTech()),this.techQueue.shift()),this.techUpdate.next())}save(){const e=[];return this.techQueue.forEach(n=>{e.push(n.getTech());const l=this.techStarted.find(e=>e[0]===n.getTech());l&&(l[1]=n.getResearchPoints())}),{foresight:this.foresight,showDone:this.showDone,techDone:this.techDone,techStarted:this.techStarted,techQueue:e,techQueueSize:this.techQueueSize}}getName(){return"TechService"}load(e){this.init(),this.foresight=e.foresight,this.showDone=void 0!==e.showDone&&e.showDone,this.techDone=e.techDone,this.techStarted=e.techStarted,this.techQueueSize=void 0!==e.techQueueSize?e.techQueueSize:1,this.techDone.forEach(e=>{const n=this.techList.find(n=>n.getTech()===e);n&&n.setResearched()}),this.techStarted.forEach(e=>{const n=this.techList.find(n=>n.getTech()===e[0]);n&&(n.clearCost(),n.setResearchPoints(e[1]))}),this.techQueue=[],e.techQueue?e.techQueue.forEach(e=>{this.techQueue.push(this.techList.find(n=>n.getTech()===e))}):e.currentResearchTech&&this.techQueue.push(this.techList.find(n=>n.getTech()===e.currentResearchTech)),this.techDone.includes(uu.BARRACKS)&&!this.gameService.isEnabled(ou.BARRACKS)&&(this.gameService.enable(ou.BARRACKS),this.logService.log("Barracks invented")),this.techDone.includes(uu.COPPER_TOOLS)&&this.servicesService.getRecipeService().enable(Cu.COPPER_NAILS),this.techDone.includes(uu.BRONZE_TOOLS)&&this.servicesService.getRecipeService().enable(Cu.BRONZE_NAILS),this.techDone.includes(uu.IRON_TOOLS)&&this.servicesService.getRecipeService().enable(Cu.IRON_NAILS)}reset(e,n){this.techList=[],this.techDone=[],this.techStarted=[],this.techQueue=[],this.techQueueSize=1,this.foresight=0,this.showDone=!1,this.init()}getTech(){return this.techList.filter(e=>{if(this.techDone.includes(e.getTech()))return this.showDone;let n=!0;return e.getPrerequisites().forEach(e=>{this.checkPrerequisite(e,this.foresight)||(n=!1)}),n})}checkPrerequisite(e,n){if(this.techDone.includes(e))return!0;if(n>0){let l=!0;return this.techList.find(n=>n.getTech()===e).getPrerequisites().forEach(e=>{this.checkPrerequisite(e,n-1)||(l=!1)}),l}return!1}getCurrentResearch(){return this.techQueue.length>0?this.techQueue[0]:null}increaseForesight(e){this.foresight+=e}isResearchStarted(){return this.techQueue.length>0}getTechPrerequisites(e){const n=[];return e.getPrerequisites().forEach(e=>{this.techDone.includes(e)||n.push(e)}),n}registerForUpdate(){return this.techUpdate.asObservable()}getForesight(){return this.foresight}getTechFlagPrerequisites(e){const n=[];return e.getFlagPrerequisites().forEach(e=>{this.gameService.isEnabled(e)||n.push(e)}),n}finishTech(e){this.techDone.push(e);const n=this.techList.find(n=>n.getTech()===e);n&&(this.logService.log(n.getTechName()+" researched"),n.setResearchPoints(n.getRequiredResearchPoints()),n.getFinishFunction()(this.servicesService)),this.techQueue=this.techQueue.filter(n=>n.getTech()!==e),this.techUpdate.next()}toggleShowDone(){this.showDone=!this.showDone}shouldShowDone(){return this.showDone}getTechQueue(){return this.techQueue}removeFromQueue(e){this.modalService.open(Pu.CONFIRM),this.modalService.setModalText("Remove research from the queue?");const n=this.modalService.registerForConfirmation().subscribe(l=>{if(n.unsubscribe(),l){const n=this.techStarted.find(n=>n[0]===e.getTech());n?n[1]=e.getResearchPoints():this.techStarted.push([e.getTech(),e.getResearchPoints()]),this.techQueue.splice(this.techQueue.indexOf(e),1);let l=null;do{l&&(this.techQueue.splice(this.techQueue.indexOf(l),1),l=null),this.techQueue.forEach(e=>{if(null===l){const n=this.techList.find(n=>n.getTech()===e.getTech());let t=!0;n.getPrerequisites().forEach(e=>{this.techDone.includes(e)||this.techQueue.find(n=>n.getTech()===e)||(t=!1)}),n.getFlagPrerequisites().forEach(e=>{this.gameService.isEnabled(e)||(t=!1)}),t||(l=e)}})}while(null!==l)}})}increaseTechQueueSize(){this.techQueueSize+=1}getTechQueueSize(){return this.techQueueSize}hasQueueSpace(){return this.getTechQueue().length<this.techQueueSize+this.foresight}getTechDone(){return this.techDone}}return e.\u0275prov=re({factory:function(){return new e(Ae(Np),Ae(Fp),Ae(Qp),Ae(xp),Ae(Dp),Ae(Gp))},token:e,providedIn:"root"}),e})();class rR{constructor(e,n){this.techService=e,this.resourcesService=n,this.id=rR.randomId()}static randomId(){return Math.random()}ngOnDestroy(){this.updateSubscription&&this.updateSubscription.unsubscribe()}ngOnInit(){this.updateSubscription=this.techService.registerForUpdate().subscribe(()=>{this.progressRef&&(this.progressRef.nativeElement.style.width=this.tech.getResearchPoints()/this.tech.getRequiredResearchPoints()*100+"%")})}ngAfterViewInit(){this.progressRef&&(this.progressRef.nativeElement.style.width=this.tech.getResearchPoints()/this.tech.getRequiredResearchPoints()*100+"%")}ngOnChanges(){this.progressRef&&(this.progressRef.nativeElement.style.width=this.tech.getResearchPoints()/this.tech.getRequiredResearchPoints()*100+"%")}getResourceName(e){return Ou.prepareResourceName(e)}start(){this.techService.startResearch(this.tech.getTech())}getPrerequisiteName(e){return Ou.prepareTechName(e)}getMissingPrerequisites(){return this.techService.getTechPrerequisites(this.tech)}hasResource(e){return 0===this.resourcesService.hasResource(e.key,e.value,"Research",!0)}getMissingFlagPrerequisites(){return this.techService.getTechFlagPrerequisites(this.tech)}getFlagPrerequisiteName(e){return Ou.prepareFlagName(e)}}var uR=Kl({encapsulation:0,styles:[["#researched[_ngcontent-%COMP%], #wrapper[_ngcontent-%COMP%]{display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #000}#researched[_ngcontent-%COMP%]{cursor:auto}#wrapperNotAvailable[_ngcontent-%COMP%]{display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #57575a}#titleGrey[_ngcontent-%COMP%]{display:inline-block;color:#57575a}.notMet[_ngcontent-%COMP%]{color:var(--negative-colour)}.title[_ngcontent-%COMP%]{text-align:left}hr[_ngcontent-%COMP%]{border-color:#000}#finished[_ngcontent-%COMP%], #progress[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background-color:var(--active-colour);z-index:1}#finished[_ngcontent-%COMP%]{width:100%}#text[_ngcontent-%COMP%]{position:relative;z-index:2}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center}"]],data:{}});function oR(e){return qs(0,[(e()(),Ds(0,0,null,null,7,"div",[["appTooltip",""],["class","tooltip"],["id","researched"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==Yt(e,1).onmousemove(l)&&t),t}),null,null)),ei(1,16384,null,0,vg,[],{elementId:[0,"elementId"]},null),(e()(),Ds(2,0,[[1,0],["progress",1]],null,0,"div",[["id","finished"]],null,null,null,null,null)),(e()(),Ds(3,0,null,null,1,"div",[["id","text"]],null,null,null,null,null)),(e()(),Ks(4,null,["",""])),(e()(),Ds(5,0,null,null,2,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),Ks(6,null,[" ",""])),(e()(),Ds(7,0,null,null,0,"br",[],null,null,null,null,null))],(function(e,n){e(n,1,0,n.component.id)}),(function(e,n){var l=n.component;e(n,4,0,l.tech.getTechName()),e(n,5,0,Rt(1,"",l.id,"")),e(n,6,0,l.tech.getFinishDescription())}))}function aR(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Cost:"])),(e()(),Ds(2,0,null,null,0,"br",[],null,null,null,null,null))],null,null)}function cR(e){return qs(0,[(e()(),Ds(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ks(2,null,["",""]))],null,(function(e,n){e(n,2,0,n.parent.context.$implicit.value)}))}function hR(e){return qs(0,[(e()(),Ds(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"div",[["class","notMet"]],null,null,null,null,null)),(e()(),Ks(2,null,["",""]))],null,(function(e,n){e(n,2,0,n.parent.context.$implicit.value)}))}function dR(e){return qs(0,[(e()(),Ds(0,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,cR)),ei(2,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,hR)),ei(4,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(5,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(6,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.hasResource(n.context.$implicit)),e(n,4,0,!l.hasResource(n.context.$implicit)),e(n,6,0,l.getResourceName(n.context.$implicit.key),"resources")}),null)}function gR(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ks(1,null,[" "," "]))],null,(function(e,n){e(n,1,0,n.component.getPrerequisiteName(n.context.$implicit))}))}function pR(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ks(1,null,[" "," "]))],null,(function(e,n){e(n,1,0,n.component.getFlagPrerequisiteName(n.context.$implicit))}))}function mR(e){return qs(0,[(e()(),Ds(0,0,null,null,7,"div",[["class","prerequisites"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Prerequisites:"])),(e()(),Ds(3,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,gR)),ei(5,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ms(16777216,null,null,1,null,pR)),ei(7,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,5,0,l.getMissingPrerequisites()),e(n,7,0,l.getMissingFlagPrerequisites())}),null)}function fR(e){return qs(0,[(e()(),Ds(0,0,null,null,17,"div",[["appTooltip",""],["class","tooltip"],["id","wrapper"]],null,[[null,"click"],[null,"mousemove"]],(function(e,n,l){var t=!0,i=e.component;return"mousemove"===n&&(t=!1!==Yt(e,1).onmousemove(l)&&t),"click"===n&&(t=!1!==i.start()&&t),t}),null,null)),ei(1,16384,null,0,vg,[],{elementId:[0,"elementId"]},null),(e()(),Ds(2,0,[[1,0],["progress",1]],null,0,"div",[["id","progress"]],null,null,null,null,null)),(e()(),Ds(3,0,null,null,1,"div",[["id","text"]],null,null,null,null,null)),(e()(),Ks(4,null,["",""])),(e()(),Ds(5,0,null,null,12,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),Ks(6,null,[" ",""])),(e()(),Ds(7,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(8,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Ds(9,0,null,null,1,"div",[["class","title"]],null,null,null,null,null)),(e()(),Ks(10,null,["Research points: ","/",""])),(e()(),Ms(16777216,null,null,1,null,aR)),ei(12,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,2,null,dR)),ei(14,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),ni(0,fa,[Il]),(e()(),Ms(16777216,null,null,1,null,mR)),ei(17,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,1,0,l.id),e(n,12,0,l.tech.getCost().size>0),e(n,14,0,$l(n,14,0,Yt(n,15).transform(l.tech.getCost()))),e(n,17,0,l.getMissingPrerequisites().length>0||l.getMissingFlagPrerequisites().length>0)}),(function(e,n){var l=n.component;e(n,4,0,l.tech.getTechName()),e(n,5,0,Rt(1,"",l.id,"")),e(n,6,0,l.tech.getDescription()),e(n,10,0,l.tech.getResearchPoints(),l.tech.getRequiredResearchPoints())}))}function SR(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Cost:"])),(e()(),Ds(2,0,null,null,0,"br",[],null,null,null,null,null))],null,null)}function ER(e){return qs(0,[(e()(),Ds(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ks(2,null,["",""]))],null,(function(e,n){e(n,2,0,n.parent.context.$implicit.value)}))}function vR(e){return qs(0,[(e()(),Ds(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"div",[["class","notMet"]],null,null,null,null,null)),(e()(),Ks(2,null,["",""]))],null,(function(e,n){e(n,2,0,n.parent.context.$implicit.value)}))}function RR(e){return qs(0,[(e()(),Ds(0,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,ER)),ei(2,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,vR)),ei(4,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(5,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(6,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.hasResource(n.context.$implicit)),e(n,4,0,!l.hasResource(n.context.$implicit)),e(n,6,0,l.getResourceName(n.context.$implicit.key),"resources")}),null)}function OR(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ks(1,null,[" "," "]))],null,(function(e,n){e(n,1,0,n.component.getPrerequisiteName(n.context.$implicit))}))}function TR(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ks(1,null,[" "," "]))],null,(function(e,n){e(n,1,0,n.component.getFlagPrerequisiteName(n.context.$implicit))}))}function CR(e){return qs(0,[(e()(),Ds(0,0,null,null,7,"div",[["class","prerequisites"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Prerequisites:"])),(e()(),Ds(3,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,OR)),ei(5,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ms(16777216,null,null,1,null,TR)),ei(7,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,5,0,l.getMissingPrerequisites()),e(n,7,0,l.getMissingFlagPrerequisites())}),null)}function IR(e){return qs(0,[(e()(),Ds(0,0,null,null,16,"div",[["appTooltip",""],["class","tooltip"],["id","wrapperNotAvailable"]],null,[[null,"click"],[null,"mousemove"]],(function(e,n,l){var t=!0,i=e.component;return"mousemove"===n&&(t=!1!==Yt(e,1).onmousemove(l)&&t),"click"===n&&(t=!1!==i.start()&&t),t}),null,null)),ei(1,16384,null,0,vg,[],{elementId:[0,"elementId"]},null),(e()(),Ds(2,0,null,null,1,"div",[["id","titleGrey"]],null,null,null,null,null)),(e()(),Ks(3,null,["",""])),(e()(),Ds(4,0,null,null,12,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),Ks(5,null,[" ",""])),(e()(),Ds(6,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(7,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Ds(8,0,null,null,1,"div",[["class","title"]],null,null,null,null,null)),(e()(),Ks(9,null,["Research points: ","/",""])),(e()(),Ms(16777216,null,null,1,null,SR)),ei(11,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,2,null,RR)),ei(13,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),ni(0,fa,[Il]),(e()(),Ms(16777216,null,null,1,null,CR)),ei(16,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,1,0,l.id),e(n,11,0,l.tech.getCost().size>0),e(n,13,0,$l(n,13,0,Yt(n,14).transform(l.tech.getCost()))),e(n,16,0,l.getMissingPrerequisites().length>0||l.getMissingFlagPrerequisites().length>0)}),(function(e,n){var l=n.component;e(n,3,0,l.tech.getTechName()),e(n,4,0,Rt(1,"",l.id,"")),e(n,5,0,l.tech.getDescription()),e(n,9,0,l.tech.getResearchPoints(),l.tech.getRequiredResearchPoints())}))}function bR(e){return qs(0,[Us(671088640,1,{progressRef:0}),(e()(),Ms(16777216,null,null,1,null,oR)),ei(2,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,fR)),ei(4,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,IR)),ei(6,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.tech.isResearched()),e(n,4,0,0===l.getMissingPrerequisites().length&&!l.tech.isResearched()),e(n,6,0,l.getMissingPrerequisites().length>0&&!l.tech.isResearched())}),null)}class yR{constructor(e,n){this.techService=e,this.villageService=n}ngOnInit(){this.categories=Object.keys(Iu),this.categories=this.categories.slice(this.categories.length/2)}getTechList(e){return this.techService.getTech().filter(n=>n.getCategory()===Iu[e])}getCurrentResearch(){return this.techService.getCurrentResearch()}research(e){this.techService.progressTech(e)}isDev(){return!Qu.production}getForesight(){return this.techService.getForesight()}isResearcher(){return this.villageService.getBuildings().filter(e=>e.getBuildingType()===tu.WORKSHOP).map(e=>e).filter(e=>e.willResearch()).length>0}shouldShowDone(){return this.techService.shouldShowDone()}showDone(){this.techService.toggleShowDone()}getTechQueue(){return this.techService.getTechQueue()}removeFromQueue(e){this.techService.removeFromQueue(e)}getTechQueueSize(){return this.techService.getTechQueueSize()}}var AR=Kl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{margin:.7%;height:100%}#categories[_ngcontent-%COMP%]{display:inline-flex;flex-direction:row;height:86%;width:100%}#categories[_ngcontent-%COMP%], .category[_ngcontent-%COMP%]{border:1px solid #000;text-align:center}.category[_ngcontent-%COMP%]{flex:0 0 19.75%;display:flex;flex-direction:column;align-items:center}#categoryBody[_ngcontent-%COMP%]{height:100%;width:100%;overflow-y:auto;overflow-x:hidden}.title[_ngcontent-%COMP%]{padding:2px;width:100%;font-weight:bolder;font-size:1em;margin-bottom:5px;display:block;border-bottom:1px solid #000}app-tech[_ngcontent-%COMP%]{display:inline-block;margin-bottom:4px;margin-top:4px;margin-left:-4px;width:75%;font-size:.7em}#researching[_ngcontent-%COMP%]{margin-bottom:8px}#currentTech[_ngcontent-%COMP%]{display:inline-block;width:auto;margin-right:10px}.tech[_ngcontent-%COMP%]{cursor:pointer}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}#noResearchers[_ngcontent-%COMP%]{margin-left:175px;color:var(--negative-colour)}.showHiddenButton[_ngcontent-%COMP%]{font-size:.8em;padding:4px;margin-left:auto}#techQueue[_ngcontent-%COMP%]{display:inline-flex;flex-direction:row}.techQueueEntry[_ngcontent-%COMP%]{width:110px;margin-right:20px;cursor:pointer}"]],data:{}});function NR(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"app-tech",[["class","techQueueEntry"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.removeFromQueue(e.context.$implicit)&&t),t}),bR,uR)),ei(1,4964352,null,0,rR,[sR,Qp],{tech:[0,"tech"]},null)],(function(e,n){e(n,1,0,n.context.$implicit)}),null)}function _R(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"span",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,2,"div",[["id","techQueue"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,NR)),ei(3,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,3,0,n.component.getTechQueue())}),null)}function wR(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["nothing"]))],null,null)}function PR(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.research(10)&&t),t}),null,null)),(e()(),Ks(-1,null,["Research"]))],null,null)}function MR(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[["id","noResearchers"]],null,null,null,null,null)),(e()(),Ks(-1,null,["No workshop set to research."]))],null,null)}function DR(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[["class","showHiddenButton"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.showDone()&&t),t}),null,null)),(e()(),Ks(-1,null,["show finished"]))],null,null)}function LR(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[["class","showHiddenButton"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.showDone()&&t),t}),null,null)),(e()(),Ks(-1,null,["hide finished"]))],null,null)}function xR(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"app-tech",[["class","tech"]],null,null,null,bR,uR)),ei(1,4964352,null,0,rR,[sR,Qp],{tech:[0,"tech"]},null)],(function(e,n){e(n,1,0,n.context.$implicit)}),null)}function kR(e){return qs(0,[(e()(),Ds(0,0,null,null,5,"div",[["class","category"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),Ks(2,null,["",""])),(e()(),Ds(3,0,null,null,2,"span",[["id","categoryBody"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,xR)),ei(5,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,5,0,n.component.getTechList(n.context.$implicit))}),(function(e,n){e(n,2,0,n.context.$implicit)}))}function FR(e){return qs(0,[(e()(),Ds(0,0,null,null,21,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,7,"div",[["id","researching"]],null,null,null,null,null)),(e()(),Ks(2,null,[" Research queue (","/","): \xa0 "])),(e()(),Ms(16777216,null,null,1,null,_R)),ei(4,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,wR)),ei(6,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,PR)),ei(8,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(9,0,null,null,9,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(10,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(11,114688,null,0,Rg,[],{name:[0,"name"]},null),(e()(),Ks(12,null,["\xa0"," "])),(e()(),Ms(16777216,null,null,1,null,MR)),ei(14,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,DR)),ei(16,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,LR)),ei(18,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(19,0,null,null,2,"div",[["id","categories"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,kR)),ei(21,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,4,0,l.getCurrentResearch()),e(n,6,0,!l.getCurrentResearch()),e(n,8,0,l.isDev()),e(n,11,0,"foresight"),e(n,14,0,!l.isResearcher()),e(n,16,0,!l.shouldShowDone()),e(n,18,0,l.shouldShowDone()),e(n,21,0,l.categories)}),(function(e,n){var l=n.component;e(n,2,0,l.getTechQueue().length,l.getTechQueueSize()+l.getForesight()),e(n,12,0,l.getForesight())}))}function UR(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"app-research",[],null,null,null,FR,AR)),ei(1,114688,null,0,yR,[sR,$E],null,null)],(function(e,n){e(n,1,0)}),null)}var HR=Dt("app-research",yR,UR,{},{},[]);class GR{constructor(e,n){this.troop=e,this.size=n}getTroopStrength(){return fo.getTroop(this.troop).STRENGTH}getTroopDefense(){return fo.getTroop(this.troop).DEFENSE}getTroopSpeed(){return fo.getTroop(this.troop).SPEED}getTroopPay(){return fo.getTroop(this.troop).PAY}getRecruitTime(){return fo.getTroop(this.troop).RECRUIT_TIME}getTroopSize(){return fo.getTroop(this.troop).SIZE}getTroopCargo(){return fo.getTroop(this.troop).CARGO}isNavy(){return this.troop===pu.BOAT||this.troop===pu.BRIGANTINE||this.troop===pu.GALLEON}}class BR{constructor(e){this.units=e}static clone(e){const n=new BR([]);return e.units.forEach(e=>n.addTroop(e.troop,e.size)),n}toJSON(){this.removeEmptyUnits();const e=[];return this.units.forEach(n=>{e.push({troop:n.troop,size:n.size})}),{units:e}}getLandUnits(e){const n=new BR([]);return this.units.forEach(l=>{l.isNavy()||(n.addTroop(l.troop,l.size),e&&(l.size=0))}),this.removeEmptyUnits(),n}getNavy(e){const n=new BR([]);return this.units.forEach(l=>{l.isNavy()&&(n.addTroop(l.troop,l.size),e&&(l.size=0))}),n}getRandomUnit(){return Nu.randomArrayElement(this.units.filter(e=>e.size>=0))}getUnit(e){return this.units.find(n=>n.troop===e)}removeEmptyUnits(){this.units=this.units.filter(e=>e.size>0)}hasAny(){return this.removeEmptyUnits(),!(0===this.units.length||1===this.units.length&&this.units[0].troop===pu.GUARD_TOWER)}addTroop(e,n){const l=this.units.find(n=>n.troop===e);l?l.size+=n:this.units.push(new GR(e,n))}getArmySize(){let e=0;return this.removeEmptyUnits(),this.units.filter(e=>e.troop!==pu.COLONIST).forEach(n=>e+=n.size),e}getArmyPower(e){let n=0;return this.units.forEach(l=>{n+=e?l.size*l.getTroopStrength():l.size*l.getTroopDefense()}),n}removeTroop(e,n){const l=this.units.find(n=>n.troop===e);l&&(l.size-=n),this.removeEmptyUnits()}addArmy(e){e.units.forEach(e=>this.addTroop(e.troop,e.size))}getArmyPay(){let e=0;return this.units.filter(e=>e.troop!==pu.COLONIST).forEach(n=>e+=n.getTroopPay()*n.size),e}clearArmy(){this.units=[]}getArmySpeed(){this.removeEmptyUnits();let e=0;return this.units.forEach(n=>{0===e&&(e=n.getTroopSpeed()),n.getTroopSpeed()<e&&(e=n.getTroopSpeed())}),e}getArmyCargo(){let e=0;return this.units.forEach(n=>e+=n.getTroopCargo()*n.size),e}hasTroop(e){return this.removeEmptyUnits(),void 0!==this.units.find(n=>n.troop===e)}}class VR{constructor(){this.skirmish=[]}}class WR{constructor(e,n,l,t,i){this.attackerTroop=e,this.defenderTroop=n,this.attack=l,this.defense=t,this.result=i}}let YR=(()=>{class e{constructor(e,n,l,t,i,s,r,u){this.resourcesService=e,this.modalService=n,this.logService=l,this.landService=t,this.soundService=i,this.calendarService=s,this.effectsService=r,this.servicesService=u,this.barracksSize=0,this.defense=0,this.stashSize=0,this.paydayCounter=30,this.army=new BR([]),this.recruits=[],this.recruitsUpdate=new C,u.addService(bu.ARMY,this),this.calendarService.registerForDayChange().subscribe(e=>{this.calculatePayday()})}tick(e){}getName(){return"ArmyService"}load(e){this.barracksSize=e.barracksSize,this.defense=e.defense,this.paydayCounter=void 0!==e.paydayCounter?e.paydayCounter:30,this.stashSize=e.stashSize,this.army.units=[],void 0!==e.troops?e.troops.forEach(e=>{this.army.addTroop(e[0],e[1])}):void 0!==e.army&&e.army.forEach(e=>{this.army.addTroop(e[0],e[1])}),this.recruits=[],e.recruits.forEach(e=>{this.recruits.push([new GR(e[0],e[1]),e[2]])}),void 0!==e.missionsInProgress&&e.missionsInProgress.forEach(e=>{e[4].forEach(e=>{this.army.addTroop(e[0],e[1])})})}save(){const e=[];this.army.units.forEach(n=>e.push([n.troop,n.size]));const n=[];return this.recruits.forEach(e=>n.push([e[0].troop,e[0].size,e[1]])),{barracksSize:this.barracksSize,army:e,recruits:n,defense:this.defense,stashSize:this.stashSize,paydayCounter:this.paydayCounter}}reset(e,n){this.recruits=[],this.barracksSize=0,this.defense=0,this.stashSize=0,this.paydayCounter=30,this.army.units=[]}progressRecruitment(e){this.recruits.length>0&&(this.recruits[0][1]+=e,this.recruits[0][1]>=this.recruits[0][0].getRecruitTime()&&(this.army.addTroop(this.recruits[0][0].troop,1),this.recruits[0][0].size-=1,this.recruits[0][1]=0,this.recruits[0][0].size<=0&&this.recruits.shift()),this.recruitsUpdate.next())}recruit(e,n){if(this.getFreeBarracks()>=n)if(this.resourcesService.getPeople()>=n){const l=new Map;fo.getTroop(e).COST.forEach(e=>l.set(e.resource,e.amount)),this.resourcesService.decreaseResources(l,"Army",!0,n)&&(this.resourcesService.removeRecruit(n),this.recruits.push([new GR(e,n),0]))}else this.modalService.info("Not enough unemployed people to recruit!");else this.modalService.info("Not enough space in barracks for so many recruits")}dismiss(e,n){const l=this.resourcesService.getPopulationCap()-this.resourcesService.getTotalPeople(),t=void 0!==this.army.getUnit(e)?this.army.getUnit(e).size:0;0!==t?n>t?this.modalService.info("There are not enough troops to dismiss"):l>=n?(this.army.removeTroop(e,n),this.servicesService.getVillageService().addVillagers(n)):this.modalService.info("There are not enough housing space for dismissed troops!"):this.modalService.info("No troops to dismiss")}dismissRecruit(e,n){const l=this.resourcesService.getPopulationCap()-this.resourcesService.getTotalPeople();n>this.recruits[e][0].size?this.modalService.info("There are not enough recruits to dismiss"):l>=n?(this.recruits[e][0].size-=n,this.recruits[e][0].size<=0&&this.recruits.splice(e,1),this.servicesService.getVillageService().addVillagers(n)):this.modalService.info("There are not enough housing space for dismissed troops!")}getRecruits(){return this.recruits}getUnits(){return this.army.units}getWorldService(){return this.servicesService.getWorldService()}getArmySize(){let e=this.army.getArmySize();return this.recruits.forEach(n=>e+=n[0].size),this.getWorldService().getPlayerLandMissions().forEach(n=>{e+=n.army.getArmySize()}),this.getWorldService().getPlayerSeaMissions().forEach(n=>{e+=n.army.getLandUnits(!1).getArmySize()}),this.getWorldService().getStationedArmies().forEach(n=>{e+=n.getArmySize()}),e}getFreeBarracks(){return this.barracksSize-this.getArmySize()}increaseBarracks(e){this.barracksSize+=e}decreaseBarracks(e){this.barracksSize-=e}getBarracksSize(){return this.barracksSize}getDefenseStrength(){let e=this.defense;return this.army.units.forEach(n=>e+=n.getTroopDefense()*n.size),e}increaseDefense(e){this.defense+=e}decreaseDefense(e){this.defense-=e}hasRecruits(){return this.recruits.length>0}registerForRecruitsUpdate(){return this.recruitsUpdate.asObservable()}getAttackStrength(){let e=0;return this.army.units.forEach(n=>e+=n.getTroopStrength()*n.size),e}increaseStash(e){this.stashSize+=e}decreaseStash(e){this.stashSize-=e}calculateSoldiersPay(){let e=0;return e+=this.army.getArmyPay(),this.getWorldService().getPlayerLandMissions().forEach(n=>{e+=n.army.getArmyPay()}),this.getWorldService().getPlayerSeaMissions().forEach(n=>{e+=n.army.getLandUnits(!1).getArmyPay()}),this.getWorldService().getStationedArmies().forEach(n=>{e+=n.getArmyPay()}),e}getPaydayCounter(){return this.paydayCounter}calculatePayday(){if(this.paydayCounter<=0){const e=this.calculateSoldiersPay();if(e>0){let n=this.resourcesService.hasResource(su.COINS,e,"Army");if(n>e&&(n=e),n>0){this.resourcesService.decreaseResource(su.COINS,e-n,"Army");const l=[];for(;n>0&&(this.army.units.forEach(e=>{if(n>0&&e.getTroopPay()>0&&e.size>0&&(n-=e.getTroopPay(),Nu.chance(.25))){e.size-=1;const n=l.find(n=>n[0]===e.troop);n?n[1]+=1:l.push([e.troop,1])}}),!(n<=0));){const e=[];this.getWorldService().getPlayerLandMissions().forEach(n=>{n.army.getArmySize()>0&&e.push(n.army)}),this.getWorldService().getPlayerSeaMissions().forEach(n=>{n.army.getLandUnits(!1).getArmySize()>0&&e.push(n.army.getLandUnits(!1))}),this.getWorldService().getStationedArmies().forEach(n=>{n.getArmySize()>0&&e.push(n)}),e.forEach(e=>{n>0&&e.units.forEach(e=>{if(n>0&&e.getTroopPay()>0&&e.size>0&&(n-=e.getTroopPay(),Nu.chance(.25))){e.size-=1;const n=l.find(n=>n[0]===e.troop);n?n[1]+=1:l.push([e.troop,1])}})})}if(l.length>0){let e="Deserters:<br>";l.forEach(n=>e+="&emsp;"+n[1]+" "+Ou.prepareTroopName(n[0])+"<br>"),this.logService.warning(e)}}else this.resourcesService.decreaseResource(su.COINS,e,"Army")}this.paydayCounter=30}else this.paydayCounter-=1}getTroopEffectsMultiplier(e){return 1+this.getTroopEffectsValue(e)/100}getTroopEffectsValue(e){let n=0;return this.effectsService.getArmyEffects().filter(n=>n.troop===pu.ALL||n.troop===e).forEach(e=>n+=e.effect),n}addMilitia(e){this.army.addTroop(pu.MILITIA,e)}addLightCavalry(e){this.army.addTroop(pu.LIGHT_CAVALRY,e)}calculateAttack(e,n,l,t,i){const s=new VR;s.attackerArmy=BR.clone(e),s.defenderArmy=BR.clone(n),s.defense=l;let r=0,u=0,o=0;if(e.getArmySize()>n.getArmySize()?(u=Math.floor(e.getArmySize()/n.getArmySize())-1,u>3&&(u=3)):n.getArmySize()>e.getArmySize()&&(o=Math.floor(n.getArmySize()/e.getArmySize())-1,o>3&&(o=3)),s.attackerArmySizeBonus=u,s.defenderArmySizeBonus=o,e.units.length>0&&n.units.length>0){let a=n.getRandomUnit(),c=a.getTroopDefense(),h=e.getRandomUnit(),d=h.getTroopStrength();const g=Math.floor(d/2);for(d-=g<l?g:l;e.units.length>0&&n.units.length>0;){if(r+=1,null===h){h=e.getRandomUnit(),d=h.getTroopStrength();const n=Math.floor(d/2);d-=n<l?n:l}null===a&&(a=n.getRandomUnit(),c=a.getTroopDefense());let g=0,p=0,m=0;if(t)g=d*this.getTroopEffectsMultiplier(h.troop)+u,p=g,m=c+o,g-=c+o;else if(i){const e=c*this.getTroopEffectsMultiplier(a.troop)+o;m=e,p=d+u,g=-e+d+u}else g=d+u,p=g,m=c+o,g-=c+o;const f=this.calculateWinChance(g);Nu.chance(f/100)?(s.skirmish.push(new WR(h.troop,a.troop,p,m,!0)),a.size-=1,n.removeEmptyUnits(),a=null,d-=1):(s.skirmish.push(new WR(h.troop,a.troop,p,m,!1)),h.size-=1,e.removeEmptyUnits(),h=null,c-=1)}}return e.units.length>0?(s.result=!0,s.armyAfterFight=BR.clone(e)):(s.result=!1,s.armyAfterFight=BR.clone(n)),s}calculateWinChance(e){let n=50;if(e>0){let l=e;e>1&&(l=1),e-=l,n+=10*l}return Math.min(95,Math.max(5,5*e+n))}getArmy(){return this.army}loot(e){const n=new Map;let l="Loot:<br>";const t=Array.from(this.resourcesService.getResources().values()).filter(e=>e.isVisible()).map(e=>({item:e.resource,chance:e.prioritise?10:1}));for(;e>5;){const l=Nu.randomWeightedExcept(t,[]),i=mo.getResource(l);let s=0;for(s=Nu.randomBetween(1,i.TRADE_VALUE<10?20:i.TRADE_VALUE<50?10:i.TRADE_VALUE<300?5:2);i.TRADE_VALUE*s>e;)s-=1;s>0&&(n.has(l)?n.set(l,n.get(l)+s):n.set(l,s),e-=s*i.TRADE_VALUE)}Array.from(n.keys()).sort((e,n)=>{const l=this.resourcesService.getResource(e).name.toLowerCase(),t=this.resourcesService.getResource(n).name.toLowerCase();return l<t?-1:l>t?1:0}).forEach(e=>{l+="&emsp;"+n.get(e)+" "+Ou.prepareResourceName(e)+"<br>"}),this.logService.success(l),this.resourcesService.increaseResources(n,"Plunder",!0)}lootPlayer(e){let n="<br>";const l=[];for(;e>0;){const n=Array.from(this.resourcesService.getResources().values()).filter(e=>e.amount>this.stashSize),t=Nu.randomExcept(n,[]);if(void 0===t){e=0;break}const i=mo.getResource(t.resource);let s=0;s=Nu.randomBetween(1,i.TRADE_VALUE<10?20:i.TRADE_VALUE<50?10:i.TRADE_VALUE<300?5:2),t.amount-this.stashSize<s&&(s=t.amount-this.stashSize),e-=i.TRADE_VALUE*s;const r=l.find(e=>e.resource===t.resource);r?r.amount+=s:l.push({resource:t.resource,amount:s}),this.resourcesService.decreaseResource(t.resource,s,"Invasion",!0)}let t=0;return l.sort((e,n)=>{const l=this.resourcesService.getResource(e.resource).name.toLowerCase(),t=this.resourcesService.getResource(n.resource).name.toLowerCase();return l<t?-1:l>t?1:0}).forEach(e=>{n+="&emsp;"+e.amount+" "+Ou.prepareResourceName(e.resource)+"<br>",t+=e.amount*mo.getResource(e.resource).TRADE_VALUE}),this.logService.warning(l.length>0?"Plundered: "+n:"Nothing has been stolen"),Math.floor(t/100)}moveRecipeInQueue(e){af(this.recruits,e.previousIndex,e.currentIndex)}}return e.\u0275prov=re({factory:function(){return new e(Ae(Qp),Ae(Fp),Ae(xp),Ae(WE),Ae(Dp),Ae(Lp),Ae(BE),Ae(Np))},token:e,providedIn:"root"}),e})();class zR{constructor(e,n){this.armyService=e,this.resourcesService=n,this.id=Math.random(),this.recruit=!1,this.progress=0,this.multiplier=0,this.recruitIndex=-1,this.dismiss=!1}ngOnInit(){this.updateSubscription=this.armyService.registerForRecruitsUpdate().subscribe(()=>{this.progressRef&&(this.progressRef.nativeElement.style.width=this.progress/this.getRecruitTime()*100+"%")})}ngAfterViewInit(){this.progressRef&&(this.progressRef.nativeElement.style.width=this.progress/this.getRecruitTime()*100+"%")}getTroopName(){return Ou.prepareTroopName(this.troop)}getResourceName(e){return Ou.prepareResourceName(e)}checkResource(e){return 0===this.resourcesService.hasResource(e.resource,e.amount*this.multiplier,"Army",!0)}isAvailable(){if(this.dismiss&&this.count>this.multiplier)return!0;if(this.recruit)return!0;const e=new Map;return this.getRecruitCost().forEach(n=>e.set(n.resource,n.amount)),this.resourcesService.hasResources(e,"Army",this.multiplier,!0)}getRecruitTime(){return fo.getTroop(this.troop).RECRUIT_TIME}getRecruitCost(){return fo.getTroop(this.troop).COST}getTroopStrength(){return fo.getTroop(this.troop).STRENGTH}getTroopDefense(){return fo.getTroop(this.troop).DEFENSE}getTroopPay(){return fo.getTroop(this.troop).PAY}getTroopSpeed(){return fo.getTroop(this.troop).SPEED}dismissRecruit(){this.recruit&&this.dismiss&&this.armyService.dismissRecruit(this.recruitIndex,this.multiplier)}}var $R=Kl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{border:1px solid #000}#wrapper[_ngcontent-%COMP%], #wrapperNotAvailable[_ngcontent-%COMP%]{position:relative;display:inline-block;width:100%;padding:3px;text-align:center;font-size:1.2em}#wrapperNotAvailable[_ngcontent-%COMP%]{border:1px solid #57575a}.dismiss[_ngcontent-%COMP%]{border:1px solid var(--negative-colour)!important}#text[_ngcontent-%COMP%], #textNotAvailable[_ngcontent-%COMP%]{position:relative;z-index:2}#textNotAvailable[_ngcontent-%COMP%]{color:#57575a}#progressId[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background-color:var(--active-colour);z-index:1}hr[_ngcontent-%COMP%]{border-color:#000}.costTitle[_ngcontent-%COMP%], .statsTitle[_ngcontent-%COMP%]{text-align:left}.tooltipSpan[_ngcontent-%COMP%]{min-width:125px}.missing[_ngcontent-%COMP%]{color:var(--negative-colour)}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center}.inline[_ngcontent-%COMP%]{display:inline-block}"]],data:{}});function KR(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[["class","inline"]],null,null,null,null,null)),(e()(),Ks(-1,null,["dismiss "]))],null,null)}function jR(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[["class","inline"]],null,null,null,null,null)),(e()(),Ks(-1,null,["recruit "]))],null,null)}function QR(e){return qs(0,[(e()(),Ds(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),Ks(1,null,["",""]))],null,(function(e,n){e(n,1,0,n.parent.context.$implicit.amount*n.component.multiplier)}))}function qR(e){return qs(0,[(e()(),Ds(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"div",[["class","missing"]],null,null,null,null,null)),(e()(),Ks(2,null,["",""]))],null,(function(e,n){e(n,2,0,n.parent.context.$implicit.amount*n.component.multiplier)}))}function XR(e){return qs(0,[(e()(),Ds(0,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,QR)),ei(3,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,qR)),ei(5,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(6,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(7,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null)],(function(e,n){var l=n.component;e(n,3,0,l.checkResource(n.context.$implicit)),e(n,5,0,!l.checkResource(n.context.$implicit)),e(n,7,0,l.getResourceName(n.context.$implicit.resource),"resources")}),null)}function ZR(e){return qs(0,[(e()(),Ds(0,0,null,null,36,"div",[["appTooltip",""],["class","tooltip"],["id","wrapper"]],null,[[null,"click"],[null,"mousemove"]],(function(e,n,l){var t=!0,i=e.component;return"mousemove"===n&&(t=!1!==Yt(e,3).onmousemove(l)&&t),"click"===n&&(t=!1!==i.dismissRecruit()&&t),t}),null,null)),ei(1,278528,null,0,la,[Cl,Il,il,ol],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),zs(2,{dismiss:0}),ei(3,16384,null,0,vg,[],{elementId:[0,"elementId"]},null),(e()(),Ds(4,0,[[1,0],["progressId",1]],null,0,"div",[["id","progressId"]],null,null,null,null,null)),(e()(),Ds(5,0,null,null,29,"span",[["class","tooltipSpan"]],[[8,"id",0]],null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,KR)),ei(7,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,jR)),ei(9,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ks(10,null,[" "," x "," "])),Ys(11,1),(e()(),Ds(12,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Ds(13,0,null,null,1,"div",[["class","statsTitle"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Stats (per soldier):"])),(e()(),Ds(15,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(16,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(17,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(18,null,[": ",""])),(e()(),Ds(19,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(20,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(21,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(22,null,[": ",""])),(e()(),Ds(23,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(24,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(25,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(26,null,[": ",""])),(e()(),Ds(27,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(28,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(29,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(30,null,[": ",""])),(e()(),Ds(31,0,null,null,1,"div",[["class","costTitle"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Cost:"])),(e()(),Ms(16777216,null,null,1,null,XR)),ei(34,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ds(35,0,null,null,1,"div",[["id","text"]],null,null,null,null,null)),(e()(),Ks(36,null,[""," - ",""]))],(function(e,n){var l=n.component,t=e(n,2,0,l.dismiss&&l.count>0);e(n,1,0,"tooltip",t),e(n,3,0,l.id),e(n,7,0,l.dismiss),e(n,9,0,!l.dismiss&&!l.recruit),e(n,17,0,"attack","army"),e(n,21,0,"defense","army"),e(n,25,0,"speed","army"),e(n,29,0,"coins","resources"),e(n,34,0,l.getRecruitCost())}),(function(e,n){var l=n.component;e(n,5,0,Rt(1,"",l.id,""));var t=l.multiplier,i=$l(n,10,1,e(n,11,0,Yt(n.parent,0),l.getTroopName()));e(n,10,0,t,i),e(n,18,0,l.getTroopStrength()),e(n,22,0,l.getTroopDefense()),e(n,26,0,l.getTroopSpeed()),e(n,30,0,l.getTroopPay()),e(n,36,0,l.getTroopName(),l.count)}))}function JR(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[["class","inline"]],null,null,null,null,null)),(e()(),Ks(-1,null,["dismiss "]))],null,null)}function eO(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[["class","inline"]],null,null,null,null,null)),(e()(),Ks(-1,null,["recruit "]))],null,null)}function nO(e){return qs(0,[(e()(),Ds(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),Ks(1,null,["",""]))],null,(function(e,n){e(n,1,0,n.parent.context.$implicit.amount*n.component.multiplier)}))}function lO(e){return qs(0,[(e()(),Ds(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"div",[["class","missing"]],null,null,null,null,null)),(e()(),Ks(2,null,["",""]))],null,(function(e,n){e(n,2,0,n.parent.context.$implicit.amount*n.component.multiplier)}))}function tO(e){return qs(0,[(e()(),Ds(0,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,nO)),ei(3,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,lO)),ei(5,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(6,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(7,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null)],(function(e,n){var l=n.component;e(n,3,0,l.checkResource(n.context.$implicit)),e(n,5,0,!l.checkResource(n.context.$implicit)),e(n,7,0,l.getResourceName(n.context.$implicit.resource),"resources")}),null)}function iO(e){return qs(0,[(e()(),Ds(0,0,null,null,36,"div",[["appTooltip",""],["class","tooltip"],["id","wrapperNotAvailable"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==Yt(e,3).onmousemove(l)&&t),t}),null,null)),ei(1,278528,null,0,la,[Cl,Il,il,ol],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),zs(2,{dismiss:0}),ei(3,16384,null,0,vg,[],{elementId:[0,"elementId"]},null),(e()(),Ds(4,0,[[1,0],["progressId",1]],null,0,"div",[["id","progressId"]],null,null,null,null,null)),(e()(),Ds(5,0,null,null,29,"span",[["class","tooltipSpan"]],[[8,"id",0]],null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,JR)),ei(7,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,eO)),ei(9,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ks(10,null,[" "," x "," "])),Ys(11,1),(e()(),Ds(12,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Ds(13,0,null,null,1,"div",[["class","statsTitle"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Stats (per soldier):"])),(e()(),Ds(15,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(16,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(17,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(18,null,[": ",""])),(e()(),Ds(19,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(20,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(21,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(22,null,[": ",""])),(e()(),Ds(23,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(24,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(25,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(26,null,[": ",""])),(e()(),Ds(27,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(28,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(29,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(30,null,[": ",""])),(e()(),Ds(31,0,null,null,1,"div",[["class","costTitle"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Cost:"])),(e()(),Ms(16777216,null,null,1,null,tO)),ei(34,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ds(35,0,null,null,1,"div",[["id","textNotAvailable"]],null,null,null,null,null)),(e()(),Ks(36,null,[""," - ",""]))],(function(e,n){var l=n.component,t=e(n,2,0,l.dismiss&&l.count>0);e(n,1,0,"tooltip",t),e(n,3,0,l.id),e(n,7,0,l.dismiss),e(n,9,0,!l.dismiss&&!l.recruit),e(n,17,0,"attack","army"),e(n,21,0,"defense","army"),e(n,25,0,"speed","army"),e(n,29,0,"coins","resources"),e(n,34,0,l.getRecruitCost())}),(function(e,n){var l=n.component;e(n,5,0,Rt(1,"",l.id,""));var t=l.multiplier,i=$l(n,10,1,e(n,11,0,Yt(n.parent,0),l.getTroopName()));e(n,10,0,t,i),e(n,18,0,l.getTroopStrength()),e(n,22,0,l.getTroopDefense()),e(n,26,0,l.getTroopSpeed()),e(n,30,0,l.getTroopPay()),e(n,36,0,l.getTroopName(),l.count)}))}function sO(e){return qs(0,[ni(0,ma,[]),Us(671088640,1,{progressRef:0}),(e()(),Ms(16777216,null,null,1,null,ZR)),ei(3,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,iO)),ei(5,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,3,0,l.isAvailable()),e(n,5,0,!l.isAvailable())}),null)}let rO=(()=>{class e extends zE{constructor(e,n,l,t,i){super(n,e,l,i,t,Eu.FORT,bu.FORT)}}return e.\u0275prov=re({factory:function(){return new e(Ae(Qp),Ae(GE),Ae(Np),Ae(lE),Ae(WE))},token:e,providedIn:"root"}),e})();class uO{constructor(e,n,l,t,i,s){this.servicesService=e,this.armyService=n,this.resourcesService=l,this.fortService=t,this.router=i,this.changeDetectorRef=s,this.selection=1,this.dismiss=!1,this.troops=[pu.MILITIA,pu.SPY,pu.SPEARMAN,pu.ARCHER,pu.SWORDSMAN,pu.LIGHT_CAVALRY,pu.HORSE_ARCHER]}ngOnInit(){this.armyService.registerForRecruitsUpdate().subscribe(()=>{this.changeDetectorRef.destroyed||this.changeDetectorRef.detectChanges()})}changeSelection(e){this.selection=e}changeDismiss(e){this.dismiss=e}getTroops(){return this.armyService.getUnits()}getRecruits(){return this.armyService.getRecruits()}recruit(e){this.dismiss?this.armyService.dismiss(e,this.selection):this.armyService.recruit(e,this.selection)}isDev(){return!Qu.production}progress(){this.armyService.progressRecruitment(10)}getBarracksSize(){return this.armyService.getBarracksSize()}getTroopsSize(){return this.armyService.getArmySize()}getUnemployed(){return this.resourcesService.getPeople()}getDefenseStrength(){return this.armyService.getDefenseStrength()}getAttackStrength(){return this.armyService.getAttackStrength()}checkForTrainingSquare(){return void 0!==this.fortService.getBuildings().find(e=>e.getBuildingType()===tu.TRAINING_SQUARE)}getSoldiersPay(){return this.armyService.calculateSoldiersPay()}getPaydayCounter(){return this.armyService.getPaydayCounter()}getMissions(){return this.servicesService.getWorldService().getPlayerLandMissions().concat(this.servicesService.getWorldService().getPlayerSeaMissions().filter(e=>e.army&&e.army.getLandUnits(!1).getArmySize()>0))}selectMission(e){this.servicesService.getWorldService().setSelectedMission(e),this.router.navigate(["/world"])}getTroopSize(e){const n=this.armyService.getArmy().getUnit(e);return n?n.size:0}getTroopName(e){return Ou.prepareTroopName(e)}drop(e){this.armyService.moveRecipeInQueue(e)}getProtection(){return this.servicesService.getWorldService().getProtection()}}var oO=Kl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{margin:.7%;height:100%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#categories[_ngcontent-%COMP%]{flex-direction:row;height:91.5%}#categories[_ngcontent-%COMP%], .category[_ngcontent-%COMP%]{display:flex;border:1px solid #000;text-align:center}.category[_ngcontent-%COMP%]{flex:0 0 33%;flex-direction:column;align-items:center}.recruits[_ngcontent-%COMP%]{text-align:center;flex:0 0 50%;display:flex;flex-direction:column;align-items:center;overflow-y:auto;overflow-x:hidden}.recruits[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]{border-bottom:1px solid #000}.title[_ngcontent-%COMP%]{padding:2px;width:100%;font-weight:bolder;font-size:.9em;display:block}#numbers[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]{margin-bottom:5px}#numbers[_ngcontent-%COMP%]{margin-top:-6px;padding:0}.number[_ngcontent-%COMP%]{border:1px solid #000;padding:2px 4px;background-color:var(--passive-colour);font-size:.75em;cursor:pointer}.active[_ngcontent-%COMP%], .number[_ngcontent-%COMP%]:hover{background-color:var(--active-colour)}app-troop[_ngcontent-%COMP%]{display:inline-block;margin:4px;width:75%;font-size:.7em;cursor:pointer}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}#noTrainingSquare[_ngcontent-%COMP%]{margin-left:4px;color:var(--negative-colour)}#missionsScroll[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;overflow-y:auto;align-items:center}.mission[_ngcontent-%COMP%]{padding:4px;border:1px solid #000;width:80%;cursor:pointer;margin:3px}#recruitsList[_ngcontent-%COMP%]{height:100%;width:100%}"]],data:{}});function aO(e){return qs(0,[(e()(),Ds(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),Ks(-1,null,[" \xa0\xa0 "])),(e()(),Ds(2,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(3,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),Ks(4,null,["\xa0"," "]))],(function(e,n){e(n,3,0,"protection","army","regions protection")}),(function(e,n){e(n,4,0,n.component.getProtection())}))}function cO(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[["id","noTrainingSquare"]],null,null,null,null,null)),(e()(),Ks(-1,null,["No Training square available"]))],null,null)}function hO(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[["class","number"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.changeSelection(1)&&t),t}),null,null)),(e()(),Ks(-1,null,["1x"]))],null,null)}function dO(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[["class","number active"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.changeSelection(1)&&t),t}),null,null)),(e()(),Ks(-1,null,["1x"]))],null,null)}function gO(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[["class","number"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.changeSelection(5)&&t),t}),null,null)),(e()(),Ks(-1,null,["5x"]))],null,null)}function pO(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[["class","number active"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.changeSelection(5)&&t),t}),null,null)),(e()(),Ks(-1,null,["5x"]))],null,null)}function mO(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[["class","number"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.changeSelection(10)&&t),t}),null,null)),(e()(),Ks(-1,null,["10x"]))],null,null)}function fO(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[["class","number active"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.changeSelection(10)&&t),t}),null,null)),(e()(),Ks(-1,null,["10x"]))],null,null)}function SO(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[["class","number"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.changeDismiss(!0)&&t),t}),null,null)),(e()(),Ks(-1,null,["dismiss"]))],null,null)}function EO(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[["class","number active"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.changeDismiss(!1)&&t),t}),null,null)),(e()(),Ks(-1,null,["dismiss"]))],null,null)}function vO(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"app-troop",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.recruit(e.context.$implicit)&&t),t}),sO,$R)),ei(1,4308992,null,0,zR,[YR,Qp],{troop:[0,"troop"],count:[1,"count"],multiplier:[2,"multiplier"],dismiss:[3,"dismiss"]},null)],(function(e,n){var l=n.component;e(n,1,0,n.context.$implicit,l.getTroopSize(n.context.$implicit),l.selection,l.dismiss)}),null)}function RO(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.progress()&&t),t}),null,null)),(e()(),Ks(-1,null,["recruit"]))],null,null)}function OO(e){return qs(0,[(e()(),Ds(0,16777216,null,null,6,"app-troop",[["cdkDrag",""],["class","cdk-drag"]],[[2,"cdk-drag-disabled",null],[2,"cdk-drag-dragging",null]],null,null,sO,$R)),li(6144,null,yf,null,[Af]),ei(2,4866048,null,3,Af,[il,[3,If],_o,Ki,wl,[2,Tf],[2,Sv],Rf,Nn,[8,null]],null,null),Us(603979776,1,{_handles:1}),Us(603979776,2,{_previewTemplate:0}),Us(603979776,3,{_placeholderTemplate:0}),ei(6,4308992,null,0,zR,[YR,Qp],{troop:[0,"troop"],count:[1,"count"],recruit:[2,"recruit"],progress:[3,"progress"],multiplier:[4,"multiplier"],recruitIndex:[5,"recruitIndex"],dismiss:[6,"dismiss"]},null),(e()(),Ms(0,null,null,0))],(function(e,n){var l=n.component;e(n,6,0,n.context.$implicit[0].troop,n.context.$implicit[0].size,!0,n.context.$implicit[1],l.selection,n.context.index,l.dismiss)}),(function(e,n){e(n,0,0,Yt(n,2).disabled,Yt(n,2)._dragRef.isDragging())}))}function TO(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ks(1,null,[" ",": "," "]))],null,(function(e,n){e(n,1,0,n.component.getTroopName(n.context.$implicit.troop),n.context.$implicit.size)}))}function CO(e){return qs(0,[(e()(),Ds(0,0,null,null,9,"div",[["appTooltip",""],["class","mission tooltip"]],null,[[null,"click"],[null,"mousemove"]],(function(e,n,l){var t=!0,i=e.component;return"mousemove"===n&&(t=!1!==Yt(e,1).onmousemove(l)&&t),"click"===n&&(t=!1!==i.selectMission(e.context.$implicit)&&t),t}),null,null)),ei(1,16384,null,0,vg,[],{elementId:[0,"elementId"]},null),(e()(),Ks(2,null,[" "," "])),(e()(),Ds(3,0,null,null,6,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),Ks(4,null,[" "," "])),(e()(),Ds(5,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Ks(6,null,[" "," : ","% "])),Ys(7,2),(e()(),Ms(16777216,null,null,1,null,TO)),ei(9,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,1,0,"mission-"+n.context.$implicit.id),e(n,9,0,n.context.$implicit.army.units)}),(function(e,n){var l=n.context.$implicit.getMissionName();e(n,2,0,l),e(n,3,0,Rt(1,"mission-",n.context.$implicit.id,""));var t=n.context.$implicit.getMissionName();e(n,4,0,t);var i=n.context.$implicit.getStatus(),s=$l(n,6,1,e(n,7,0,Yt(n.parent,0),n.context.$implicit.getDisplayProgress(),"0.0-0"));e(n,6,0,i,s)}))}function IO(e){return qs(0,[ni(0,Ea,[ki]),(e()(),Ds(1,0,null,null,62,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,1,"div",[["id","title"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Army"])),(e()(),Ds(4,0,null,null,19,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(5,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(6,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),Ks(7,null,["\xa0"," /"," \xa0\xa0 "])),(e()(),Ds(8,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(9,114688,null,0,Rg,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),Ks(10,null,["\xa0"," \xa0\xa0 "])),(e()(),Ds(11,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(12,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),Ks(13,null,["\xa0"," \xa0\xa0 "])),(e()(),Ds(14,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(15,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),Ks(16,null,["\xa0"," \xa0\xa0 "])),(e()(),Ds(17,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(18,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),Ks(19,null,["\xa0"," in "," days "])),(e()(),Ms(16777216,null,null,1,null,aO)),ei(21,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,cO)),ei(23,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(24,0,null,null,39,"div",[["id","categories"]],null,null,null,null,null)),(e()(),Ds(25,0,null,null,21,"div",[["class","category"]],null,null,null,null,null)),(e()(),Ds(26,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),Ks(-1,null,["GARRISON"])),(e()(),Ds(28,0,null,null,16,"div",[["id","numbers"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,hO)),ei(30,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,dO)),ei(32,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,gO)),ei(34,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,pO)),ei(36,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,mO)),ei(38,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,fO)),ei(40,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,SO)),ei(42,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,EO)),ei(44,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,vO)),ei(46,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ds(47,0,null,null,10,"div",[["class","category"]],null,null,null,null,null)),(e()(),Ds(48,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),Ks(-1,null,["RECRUITS"])),(e()(),Ms(16777216,null,null,1,null,RO)),ei(51,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(52,0,null,null,5,"div",[["cdkDropList",""],["class","cdk-drop-list"],["id","recruitsList"]],[[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],[[null,"cdkDropListDropped"]],(function(e,n,l){var t=!0;return"cdkDropListDropped"===n&&(t=!1!==e.component.drop(l)&&t),t}),null,null)),li(6144,null,If,null,[bf]),ei(54,147456,null,0,bf,[il,Rf,Nn,[2,Sv],[3,Of],km,[2,Tf]],{id:[0,"id"]},{dropped:"cdkDropListDropped"}),li(256,null,Of,void 0,[]),(e()(),Ms(16777216,null,null,1,null,OO)),ei(57,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ds(58,0,null,null,5,"div",[["class","category"]],null,null,null,null,null)),(e()(),Ds(59,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),Ks(-1,null,["MISSIONS IN PROGRESS"])),(e()(),Ds(61,0,null,null,2,"div",[["id","missionsScroll"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,CO)),ei(63,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,6,0,"barracks","army","Barracks"),e(n,9,0,"hammer","Workers","0 0 0 2px"),e(n,12,0,"attack","army","Attack strength"),e(n,15,0,"defense","army","Defense strength"),e(n,18,0,"coins","resources","Soldiers pay (collected every 30 days)"),e(n,21,0,l.getProtection()>0),e(n,23,0,!l.checkForTrainingSquare()),e(n,30,0,1!==l.selection),e(n,32,0,1===l.selection),e(n,34,0,5!==l.selection),e(n,36,0,5===l.selection),e(n,38,0,10!==l.selection),e(n,40,0,10===l.selection),e(n,42,0,!l.dismiss),e(n,44,0,l.dismiss),e(n,46,0,l.troops),e(n,51,0,l.isDev()),e(n,54,0,"recruitsList"),e(n,57,0,l.getRecruits()),e(n,63,0,l.getMissions())}),(function(e,n){var l=n.component;e(n,7,0,l.getTroopsSize(),l.getBarracksSize()),e(n,10,0,l.getUnemployed()),e(n,13,0,l.getAttackStrength()),e(n,16,0,l.getDefenseStrength()),e(n,19,0,l.getSoldiersPay(),l.getPaydayCounter()+1),e(n,52,0,Yt(n,54).id,Yt(n,54).disabled,Yt(n,54)._dropListRef.isDragging(),Yt(n,54)._dropListRef.isReceiving())}))}function bO(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"app-army",[],null,null,null,IO,oO)),ei(1,114688,null,0,uO,[Np,YR,Qp,rO,Fd,Nn],null,null)],(function(e,n){e(n,1,0)}),null)}var yO=Dt("app-army",uO,bO,{},{},[]);class AO{constructor(e,n,l,t,i,s){this.prayer=e,this.cost=n,this.requiredFaithLevel=l,this.religion=t,this.description=i,this.effect=s}}let NO=(()=>{class e{constructor(e,n,l,t){this.servicesService=e,this.modalService=n,this.logService=l,this.resourcesService=t,this.faith=0,this.faithCap=40,this.faithLevel=1,this.faithShield=0,this.religion=gu.NONE,this.prayers=[],e.addService(bu.RELIGION,this),this.initPrayers()}initPrayers(){this.prayers=[],Object.entries(Ro.PRAYERS).forEach(e=>{this.prayers.push(new AO(au[e[0]],e[1].FAITH,e[1].FAITH_LEVEL,e[1].RELIGION,e[1].DESCRIPTION,e[1].FINISH))})}getName(){return"ReligionService"}load(e){this.faith=e.faith,this.faithCap=e.faithCap,this.faithLevel=e.faithLevel,this.religion=e.religion,this.faithShield=e.faithShield,this.prayers.find(e=>e.prayer===au.PREACH).cost=e.preachCost}save(){return{faith:this.faith,faithCap:this.faithCap,faithLevel:this.faithLevel,religion:this.religion,faithShield:this.faithShield,preachCost:this.prayers.find(e=>e.prayer===au.PREACH).cost}}reset(e,n){this.faith=0,this.faithCap=40,this.faithLevel=1,this.faithShield=0,this.religion=gu.NONE,this.prayers=[],this.initPrayers()}getFaith(){return this.faith}increaseFaith(e){this.faith<this.faithCap&&(this.faith+=e,this.faith===this.faithCap&&this.logService.success("Full faith"),this.faith>this.faithCap&&(this.faith=this.faithCap))}increaseFaithCap(e){this.faithCap+=e}decreaseFaithCap(e){this.faithCap-=e,this.faith>this.faithCap&&(this.faith=this.faithCap)}decreaseFaith(e){return this.faith-e>=0?(this.faith-=e,0):e-this.faith}getFaithCap(){return this.faithCap}getPrayers(){return this.prayers.filter(e=>(e.religion===gu.NONE||e.religion===this.religion)&&e.requiredFaithLevel<=this.faithLevel)}pray(e){e.cost<=this.faith?(this.faith-=e.cost,e.effect(this.servicesService),e.prayer===au.PREACH&&(this.prayers.find(e=>e.prayer===au.PREACH).cost+=10)):this.modalService.info("Not enough faith for this prayer!")}increaseFaithLevel(e){this.faithLevel+=e}increaseFaithShield(e){this.faithShield+=e}decreaseFaithShield(e){if(this.faithShield>=e)return this.faithShield-=e,0;{const n=e-this.faithShield;return this.faithShield=0,n}}getFaithLevel(){return this.faithLevel}getFaithShield(){return this.faithShield}getCurrentReligion(){return this.religion}getReligionSettings(e){return Ro.getReligion(e)}changeReligion(e){this.modalService.open(Pu.CONFIRM),this.modalService.setModalText("Are you sure you want to change religion?");const n=this.modalService.registerForConfirmation().subscribe(l=>{if(n.unsubscribe(),l){const n=this.getReligionSettings(e);if(this.faith<n.FAITH)return void this.modalService.info("Not enough faith");const l=new Map;if(n.OFFERING.forEach(e=>l.set(e.resource,e.amount)),!this.resourcesService.hasResources(l,"Religion",1,!0))return void this.modalService.info("Not enough offering resources");this.faith-=n.FAITH,this.resourcesService.decreaseResources(l,"Religion",!0),this.religion=e}})}}return e.\u0275prov=re({factory:function(){return new e(Ae(Np),Ae(Fp),Ae(xp),Ae(Qp))},token:e,providedIn:"root"}),e})();class _O{constructor(e){this.religionService=e}ngOnInit(){}getPrayerName(){return Ou.preparePrayerName(this.prayer.prayer)}isAvailable(){return this.religionService.getFaith()>=this.prayer.cost}}var wO=Kl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{border:1px solid #000}#wrapper[_ngcontent-%COMP%], #wrapperNotAvailable[_ngcontent-%COMP%]{display:inline-block;width:47%;padding:3px;margin:3px;text-align:center}#wrapperNotAvailable[_ngcontent-%COMP%]{border:1px solid #646464}#titleGrey[_ngcontent-%COMP%]{display:inline-block;color:#646464}.notMet[_ngcontent-%COMP%]{color:var(--negative-colour)}.title[_ngcontent-%COMP%]{text-align:left}hr[_ngcontent-%COMP%]{border-color:#000}#progress[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background-color:var(--active-colour);z-index:1}#text[_ngcontent-%COMP%]{position:relative;z-index:2}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center}"]],data:{}});function PO(e){return qs(0,[(e()(),Ds(0,0,null,null,9,"div",[["appTooltip",""],["class","tooltip"],["id","wrapper"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==Yt(e,1).onmousemove(l)&&t),t}),null,null)),ei(1,16384,null,0,vg,[],{elementId:[0,"elementId"]},null),(e()(),Ds(2,0,null,null,1,"div",[["id","title"]],null,null,null,null,null)),(e()(),Ks(3,null,["",""])),(e()(),Ds(4,0,null,null,5,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),Ks(5,null,[" "," "])),(e()(),Ds(6,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Ks(7,null,[" "," "])),(e()(),Ds(8,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(9,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null)],(function(e,n){e(n,1,0,n.component.id),e(n,9,0,"faith","religion")}),(function(e,n){var l=n.component;e(n,3,0,l.getPrayerName()),e(n,4,0,Rt(1,"",l.id,"")),e(n,5,0,l.prayer.description),e(n,7,0,l.prayer.cost)}))}function MO(e){return qs(0,[(e()(),Ds(0,0,null,null,10,"div",[["appTooltip",""],["class","tooltip"],["id","wrapperNotAvailable"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==Yt(e,1).onmousemove(l)&&t),t}),null,null)),ei(1,16384,null,0,vg,[],{elementId:[0,"elementId"]},null),(e()(),Ds(2,0,null,null,1,"div",[["id","titleGrey"]],null,null,null,null,null)),(e()(),Ks(3,null,["",""])),(e()(),Ds(4,0,null,null,6,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),Ks(5,null,[" "," "])),(e()(),Ds(6,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Ds(7,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ks(8,null,[" "," "])),(e()(),Ds(9,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(10,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null)],(function(e,n){e(n,1,0,n.component.id),e(n,10,0,"faith","religion")}),(function(e,n){var l=n.component;e(n,3,0,l.getPrayerName()),e(n,4,0,Rt(1,"",l.id,"")),e(n,5,0,l.prayer.description),e(n,8,0,l.prayer.cost)}))}function DO(e){return qs(0,[(e()(),Ms(16777216,null,null,1,null,PO)),ei(1,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,MO)),ei(3,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,1,0,l.isAvailable()),e(n,3,0,!l.isAvailable())}),null)}class LO{constructor(e,n){this.religionService=e,this.resourcesService=n}ngOnInit(){}getFaith(){return this.religionService.getFaith()}getFaithCap(){return this.religionService.getFaithCap()}increaseFaith(e){this.religionService.increaseFaith(e)}isDev(){return!Qu.production}getPrayers(){return this.religionService.getPrayers()}pray(e){this.religionService.pray(e)}getFaithShield(){return Ou.round(this.religionService.getFaithShield(),2)}getReligions(){return[gu.NONE,gu.FERTILITY,gu.NATURE,gu.TECHNOLOGY,gu.WAR]}getReligionName(e){return Ou.prepareReligionName(e)}getCurrentReligion(){return this.religionService.getCurrentReligion()}getCurrentReligionName(){return gu[this.getCurrentReligion()]}getCurrentReligionDisplayName(){return Ou.prepareReligionName(this.getCurrentReligion())}changeReligion(e){this.religionService.changeReligion(e)}getReligionSettings(e){return Ro.getReligion(e)}getResourceString(e){return su[e]}hasResource(e){return 0===this.resourcesService.hasResource(e.resource,e.amount,"Religion",!0)}}var xO=Kl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:100%;margin:.5%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#table[_ngcontent-%COMP%]{flex-direction:row;height:85%}#table[_ngcontent-%COMP%], .column[_ngcontent-%COMP%]{display:flex;border:1px solid #000}.column[_ngcontent-%COMP%]{flex-direction:column;flex:auto}#prayers[_ngcontent-%COMP%]{flex:0 0 70%;overflow-y:auto}#religions[_ngcontent-%COMP%]{flex:1 0 auto;overflow-y:auto}.prayer[_ngcontent-%COMP%]{display:inline}.tableTitle[_ngcontent-%COMP%]{border-bottom:1px solid #000;text-align:center}app-prayer[_ngcontent-%COMP%]{cursor:pointer}.faith[_ngcontent-%COMP%]{margin-right:-2px}.religion[_ngcontent-%COMP%]{border:1px solid #000;text-align:center;margin:3px;cursor:pointer}.active[_ngcontent-%COMP%]{background-color:var(--active-colour);cursor:auto}.tooltip[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:100px}.notMet[_ngcontent-%COMP%]{color:var(--negative-colour)}.inline[_ngcontent-%COMP%]{display:inline}.icon[_ngcontent-%COMP%], .icon2[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.icon2[_ngcontent-%COMP%]{justify-content:center}"]],data:{}});function kO(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.increaseFaith(10)&&t),t}),null,null)),(e()(),Ks(-1,null,["Increase faith"]))],null,null)}function FO(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"div",[["class","prayer"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-prayer",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.pray(e.context.$implicit)&&t),t}),DO,wO)),ei(2,114688,null,0,_O,[NO],{prayer:[0,"prayer"],id:[1,"id"]},null)],(function(e,n){e(n,2,0,n.context.$implicit,n.context.index)}),null)}function UO(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[["class","religion active"]],null,null,null,null,null)),(e()(),Ks(1,null,[" "," "]))],null,(function(e,n){e(n,1,0,n.component.getReligionName(n.parent.context.$implicit))}))}function HO(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[["class","inline"]],null,null,null,null,null)),(e()(),Ks(1,null,["",""]))],null,(function(e,n){e(n,1,0,n.component.getReligionSettings(n.parent.parent.context.$implicit).FAITH)}))}function GO(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[["class","inline notMet"]],null,null,null,null,null)),(e()(),Ks(1,null,["",""]))],null,(function(e,n){e(n,1,0,n.component.getReligionSettings(n.parent.parent.context.$implicit).FAITH)}))}function BO(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ks(-1,null,["offering:"]))],null,null)}function VO(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[["class","inline"]],null,null,null,null,null)),(e()(),Ks(1,null,[""," "]))],null,(function(e,n){e(n,1,0,n.parent.context.$implicit.amount)}))}function WO(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[["class","inline notMet"]],null,null,null,null,null)),(e()(),Ks(1,null,[""," "]))],null,(function(e,n){e(n,1,0,n.parent.context.$implicit.amount)}))}function YO(e){return qs(0,[(e()(),Ds(0,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,6,"div",[["class","icon2"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,VO)),ei(3,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,WO)),ei(5,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(6,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(7,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null)],(function(e,n){var l=n.component;e(n,3,0,l.hasResource(n.context.$implicit)),e(n,5,0,!l.hasResource(n.context.$implicit)),e(n,7,0,l.getResourceString(n.context.$implicit.resource),"resources")}),null)}function zO(e){return qs(0,[(e()(),Ds(0,0,null,null,16,"div",[["appTooltip",""],["class","religion tooltip"]],null,[[null,"click"],[null,"mousemove"]],(function(e,n,l){var t=!0,i=e.component;return"mousemove"===n&&(t=!1!==Yt(e,1).onmousemove(l)&&t),"click"===n&&(t=!1!==i.changeReligion(e.parent.context.$implicit)&&t),t}),null,null)),ei(1,16384,null,0,vg,[],{elementId:[0,"elementId"]},null),(e()(),Ks(2,null,[" "," "])),(e()(),Ds(3,0,null,null,13,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),Ks(4,null,[" "," "])),(e()(),Ds(5,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Ds(6,0,null,null,6,"div",[["class","icon2"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,HO)),ei(8,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,GO)),ei(10,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(11,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(12,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ms(16777216,null,null,1,null,BO)),ei(14,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,YO)),ei(16,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,1,0,0-n.parent.context.$implicit),e(n,8,0,l.getFaith()>=l.getReligionSettings(n.parent.context.$implicit).FAITH),e(n,10,0,l.getFaith()<l.getReligionSettings(n.parent.context.$implicit).FAITH),e(n,12,0,"faith","religion"),e(n,14,0,l.getReligionSettings(n.parent.context.$implicit).OFFERING.length>0),e(n,16,0,l.getReligionSettings(n.parent.context.$implicit).OFFERING)}),(function(e,n){var l=n.component;e(n,2,0,l.getReligionName(n.parent.context.$implicit)),e(n,3,0,Rt(1,"",0-n.parent.context.$implicit,"")),e(n,4,0,l.getReligionName(n.parent.context.$implicit))}))}function $O(e){return qs(0,[(e()(),Ds(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,UO)),ei(2,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,zO)),ei(4,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,2,0,n.context.$implicit===l.getCurrentReligion()),e(n,4,0,n.context.$implicit!==l.getCurrentReligion())}),null)}function KO(e){return qs(0,[(e()(),Ds(0,0,null,null,32,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Religion"])),(e()(),Ds(4,0,null,null,9,"div",[],null,null,null,null,null)),(e()(),Ds(5,0,null,null,1,null,null,null,null,null,null,null)),(e()(),Ks(-1,null,["Faith"])),(e()(),Ds(7,0,null,null,1,"app-icon",[["class","faith"]],null,null,null,Tg,Og)),ei(8,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ds(9,0,null,null,1,null,null,null,null,null,null,null)),(e()(),Ks(-1,null,[":"])),(e()(),Ks(11,null,[" ","/"," "])),(e()(),Ms(16777216,null,null,1,null,kO)),ei(13,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(14,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),Ks(-1,null,[" Faith shield "])),(e()(),Ds(16,0,null,null,1,"app-icon",[["class","prayer"]],null,null,null,Tg,Og)),ei(17,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),Ks(18,null,[" : "," "])),(e()(),Ds(19,0,null,null,13,"div",[["id","table"]],null,null,null,null,null)),(e()(),Ds(20,0,null,null,7,"div",[["class","column"],["id","prayers"]],null,null,null,null,null)),(e()(),Ds(21,0,null,null,3,"span",[["class","tableTitle"]],null,null,null,null,null)),(e()(),Ks(-1,null,[" Prayers "])),(e()(),Ds(23,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(24,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),Ds(25,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,FO)),ei(27,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ds(28,0,null,null,4,"div",[["class","column"],["id","religions"]],null,null,null,null,null)),(e()(),Ds(29,0,null,null,1,"span",[["class","tableTitle"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Religions"])),(e()(),Ms(16777216,null,null,1,null,$O)),ei(32,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,8,0,"faith","religion"),e(n,13,0,l.isDev()),e(n,17,0,"faith_shield","religion","Faith shield"),e(n,24,0,l.getCurrentReligionName(),"religion",l.getCurrentReligionDisplayName()),e(n,27,0,l.getPrayers()),e(n,32,0,l.getReligions())}),(function(e,n){var l=n.component;e(n,11,0,l.getFaith(),l.getFaithCap()),e(n,18,0,l.getFaithShield())}))}function jO(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"app-religion",[],null,null,null,KO,xO)),ei(1,114688,null,0,LO,[NO,Qp],null,null)],(function(e,n){e(n,1,0)}),null)}var QO=Dt("app-religion",LO,jO,{},{},[]);let qO=(()=>{class e{constructor(e,n,l){this.servicesService=e,this.calendarService=n,this.optionsService=l,this.forecastPeriod=1,this.forecast=[],e.addService(bu.WEATHER,this),this.tick(0)}getName(){return"WeatherService"}load(e){this.forecastPeriod=void 0!==e.forecastPeriod?e.forecastPeriod:1,this.forecast=e.forecast}save(){return{forecastPeriod:this.forecastPeriod,forecast:this.forecast}}reset(e,n){this.forecastPeriod=1,this.forecast=[],this.today=null,this.tick(0)}tick(e){const n=this.calendarService.getAbsoluteDay();for(;this.forecast.length>0&&this.forecast[0][0]<n;)this.forecast.shift();for(;this.forecast.length<this.forecastPeriod;){let e=n;0!==this.forecast.length&&(e=this.forecast[this.forecast.length-1][0]+1),this.forecast.push(this.predictDay(e))}this.today=this.forecast[0]}predictDay(e){let n,l;switch(this.calendarService.getSeasonForAbsoluteDay(e)){case Pp.SPRING:n=Nu.randomBetween(10,25),l=Nu.randomElement([{item:Tu.SUN,chance:40},{item:Tu.CLOUDS,chance:25},{item:Tu.WIND,chance:14},{item:Tu.RAIN,chance:20},{item:Tu.STORM,chance:1}]);break;case Pp.SUMMER:n=Nu.randomBetween(15,35),l=Nu.randomElement([{item:Tu.SUN,chance:50},{item:Tu.CLOUDS,chance:10},{item:Tu.WIND,chance:10},{item:Tu.RAIN,chance:20},{item:Tu.STORM,chance:10}]);break;case Pp.AUTUMN:n=Nu.randomBetween(10,25),l=Nu.randomElement([{item:Tu.SUN,chance:20},{item:Tu.CLOUDS,chance:40},{item:Tu.WIND,chance:10},{item:Tu.RAIN,chance:25},{item:Tu.STORM,chance:5}]);break;case Pp.WINTER:n=Nu.randomBetween(-20,5),l=Nu.randomElement([{item:Tu.SUN,chance:30},{item:Tu.CLOUDS,chance:20},{item:Tu.WIND,chance:15},{item:Tu.SNOW,chance:25},{item:Tu.STORM,chance:10}])}return[e,l,n]}getCurrentWeather(){return this.today[1]}getCurrentTemperature(){return this.optionsService.getOption(_p.METRIC)?this.today[2]:1.8*this.today[2]+32}increaseForecastPeriod(e){this.forecastPeriod+=e}isWeather(...e){return e.includes(this.getCurrentWeather())}getForecast(){return this.forecast}getForecastPeriod(){return this.forecastPeriod}}return e.\u0275prov=re({factory:function(){return new e(Ae(Np),Ae(Lp),Ae(wp))},token:e,providedIn:"root"}),e})();class XO{constructor(e,n,l){this.weatherService=e,this.calendarService=n,this.optionsService=l,this.metric=this.optionsService.getOption(_p.METRIC),this.optionsSubscription||(this.optionsSubscription=this.optionsService.registerForOptionsChange().subscribe(()=>this.metric=this.optionsService.getOption(_p.METRIC)))}ngOnInit(){}getTodayWeather(){return this.weatherService.getCurrentWeather()}getTodayTemperature(){return this.weatherService.getCurrentTemperature()}getWeatherName(e){return Tu[e].toLowerCase()}getForecast(){return this.weatherService.getForecast()}getForecastPeriod(){return this.weatherService.getForecastPeriod()}calculateTemp(e){return this.optionsService.getOption(_p.METRIC)?e:1.8*e+32}isDev(){return!Qu.production}progress10Days(){this.calendarService.progressDays(10)}}var ZO=Kl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{margin:.5%}#title[_ngcontent-%COMP%]{font-size:1.3em;font-weight:800}#forecast[_ngcontent-%COMP%], #title[_ngcontent-%COMP%]{text-align:center}#forecast[_ngcontent-%COMP%]{display:flex;flex-direction:row;border:1px solid #000;overflow-x:auto}.weather[_ngcontent-%COMP%]{display:flex;flex:0 0 40px;flex-direction:column;border-right:1px solid #000}.day[_ngcontent-%COMP%]{width:60px;border-bottom:1px solid #000}"]],data:{}});function JO(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.progress10Days()&&t),t}),null,null)),(e()(),Ks(-1,null,["Progress 10 days"]))],null,null)}function eT(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["\xb0C"]))],null,null)}function nT(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["\xb0F"]))],null,null)}function lT(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[["class","day"]],null,null,null,null,null)),(e()(),Ks(-1,null,["today"]))],null,null)}function tT(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[["class","day"]],null,null,null,null,null)),(e()(),Ks(1,null,["+",""]))],null,(function(e,n){e(n,1,0,n.parent.context.index)}))}function iT(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["\xb0C"]))],null,null)}function sT(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["\xb0F"]))],null,null)}function rT(e){return qs(0,[(e()(),Ds(0,0,null,null,13,"div",[["class","weather"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,lT)),ei(2,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,tT)),ei(4,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(5,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(6,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ds(7,0,null,null,6,"span",[["id","temp"]],null,null,null,null,null)),(e()(),Ks(8,null,["",""])),Ys(9,2),(e()(),Ms(16777216,null,null,1,null,iT)),ei(11,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,sT)),ei(13,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,2,0,0===n.context.index),e(n,4,0,0!==n.context.index),e(n,6,0,l.getWeatherName(n.context.$implicit[1]),"weather"),e(n,11,0,l.metric),e(n,13,0,!l.metric)}),(function(e,n){var l=n.component,t=$l(n,8,0,e(n,9,0,Yt(n.parent.parent,0),l.calculateTemp(n.context.$implicit[2]),"0.0-1"));e(n,8,0,t)}))}function uT(e){return qs(0,[(e()(),Ds(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Weather forecast: "])),(e()(),Ds(2,0,null,null,2,"div",[["id","forecast"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,rT)),ei(4,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,4,0,n.component.getForecast())}),null)}function oT(e){return qs(0,[ni(0,Ea,[ki]),(e()(),Ds(1,0,null,null,17,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),Ds(3,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Weather"])),(e()(),Ms(16777216,null,null,1,null,JO)),ei(6,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ks(7,null,[" Weather: "," "])),(e()(),Ds(8,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(9,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ds(10,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ks(11,null,[" Temperature: ",""])),Ys(12,2),(e()(),Ms(16777216,null,null,1,null,eT)),ei(14,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,nT)),ei(16,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,uT)),ei(18,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,6,0,l.isDev()),e(n,9,0,l.getWeatherName(l.getTodayWeather()),"weather"),e(n,14,0,l.metric),e(n,16,0,!l.metric),e(n,18,0,l.getForecastPeriod()>1)}),(function(e,n){var l=n.component;e(n,7,0,l.getWeatherName(l.getTodayWeather()));var t=$l(n,11,0,e(n,12,0,Yt(n,0),l.getTodayTemperature(),"0.0-1"));e(n,11,0,t)}))}function aT(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"app-weather",[],null,null,null,oT,ZO)),ei(1,114688,null,0,XO,[qO,Lp,wp],null,null)],(function(e,n){e(n,1,0)}),null)}var cT=Dt("app-weather",XO,aT,{},{},[]);class hT{constructor(e){this.optionsService=e,this.progress=0,this.text=""}set progressReInput(e){this.progressRef=e,this.ngOnChanges()}set labelRefInput(e){this.labelRef=e,this.ngOnChanges()}set label2RefInput(e){this.label2Ref=e,this.ngOnChanges()}ngOnInit(){}ngOnChanges(){this.progressBarsEnabled()?(this.progressRef&&(this.progressRef.nativeElement.style.width=this.progress+"%"),this.labelRef&&(this.labelRef.nativeElement.innerHTML=this.text&&""!==this.text?this.text:this.progress.toFixed(2)+"%")):this.label2Ref&&(this.label2Ref.nativeElement.innerHTML=this.text,this.label2Ref.nativeElement.innerHTML=this.progress.toFixed(2)+"%")}progressBarsEnabled(){return this.optionsService.getOption(_p.VISUAL_PROGRESS_BARS)}}var dT=Kl({encapsulation:0,styles:[["#progressBar[_ngcontent-%COMP%]{background-color:#ddd;border:1px solid #000}#progressBar[_ngcontent-%COMP%], #progressBar2[_ngcontent-%COMP%]{position:relative;width:95%;height:100%;display:inline-block;text-align:center;margin-top:-1px}#progress[_ngcontent-%COMP%]{height:100%;background-color:var(--active-colour);text-align:center;color:#fff}#label[_ngcontent-%COMP%], #label2[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;width:100%;font-size:1.2em;text-align:center}#label2[_ngcontent-%COMP%]{font-weight:700}"]],data:{}});function gT(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"div",[["id","progressBar"]],null,null,null,null,null)),(e()(),Ds(1,0,[[1,0],["progress",1]],null,0,"div",[["id","progress"]],null,null,null,null,null)),(e()(),Ds(2,0,[[2,0],["label",1]],null,0,"div",[["id","label"]],null,null,null,null,null))],null,null)}function pT(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[["id","progressBar2"]],null,null,null,null,null)),(e()(),Ds(1,0,[[3,0],["label2",1]],null,0,"div",[["id","label2"]],null,null,null,null,null))],null,null)}function mT(e){return qs(0,[Us(671088640,1,{progressReInput:0}),Us(671088640,2,{labelRefInput:0}),Us(671088640,3,{label2RefInput:0}),(e()(),Ms(16777216,null,null,1,null,gT)),ei(4,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,pT)),ei(6,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,4,0,l.progressBarsEnabled()),e(n,6,0,!l.progressBarsEnabled())}),null)}class fT{constructor(e,n,l,t,i,s,r,u){this.data={},this.id=e,this.name=n,this.diplomacy=l,this.colour=t,this.focus=i,this.regions=s,this.data=r,this.capital=u}getDiplomacy(){return this.diplomacy<-25?"hostile":this.diplomacy>=-25&&this.diplomacy<25?"neutral":this.diplomacy>=25?"friendly":void 0}decreaseDiplomacy(e){this.diplomacy-=e,this.diplomacy<-100&&(this.diplomacy=-100)}increaseDiplomacy(e){this.diplomacy+=e,this.diplomacy>100&&(this.diplomacy=100)}}class ST{constructor(e,n,l,t,i,s,r,u,o,a,c,h,d,g,p,m,f,S=0){this.id=e,this.path=n,this.center=l,this.neighbours=t,this.land=i,this.forest=s,this.mountains=r,this.wealth=u,this.economy=o,this.defense=a,this.harbour=c,this.roads=h,this.watchtower=d,this.watched=g,this.target=p,this.spy=m,this.army=f,this.navy=new BR([]),this.lastAttack=S}getSize(){return this.land+this.forest+this.mountains}}class ET{constructor(e,n){this.id=e,this.neighbours=n}}var vT=function(e){return e[e.LAND=0]="LAND",e[e.SEA=1]="SEA",e}({});class RT{constructor(e,n,l,t,i,s,r,u,o,a){this.speed=3,this.routePaths=[],this.servicesService=e,this.mission=l,this.settings=fo.getMission(l),this.missionTime=this.settings.TIME,this.description=this.settings.DESCRIPTION,this.icon=this.settings.ICON,this.id=n,this.targetIndex=t,this.route=i,this.progress=s,this.status=r,this.ownerCountry=u,this.army=o,this.data=a,e&&(this.armyService=e.getArmyService(),this.logService=e.getLogService(),this.worldService=e.getWorldService(),this.gameService=e.getGameService()),this.initRoutePaths(),"{mission}"===this.status?(this.origin=this.routePaths[this.routePaths.length-1].target,this.target=this.routePaths[this.routePaths.length-1].target):(this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target),this.speed=this.getMissionType()===vT.LAND?o.getArmySpeed():o.getNavy(!1).getArmySpeed()}getMissionName(){return Ou.prepareMissionName(this.mission)}getArmySpeed(){return this.getMissionType()===vT.LAND?this.army.getArmySpeed():this.army.getNavy(!1).getArmySpeed()}getTargetRegionId(){return this.route.path[this.targetIndex]}getCurrentRegionId(){return this.route.path[this.targetIndex-1]}getOrigin(){return this.origin}getTarget(){return this.target}getTravelSpeed(){return 60*this.speed/3/this.getDistance()}tick(){if("traveling"===this.status)this.progress<100?(this.progress+=this.getTravelSpeed(),this.progress>100&&(this.progress=100)):(this.evaluateRegion(),this.targetIndex===this.route.path.length-1?(this.origin=this.target,this.isInstant()?this.calculateMission()?(this.status="returning",this.route.reversePath(),this.targetIndex=1,this.initRoutePaths(),this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target):this.status="finished":this.status="{mission}"):(this.targetIndex+=1,this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target),this.progress=0);else if("{mission}"===this.status)if(this.progress<100)this.progress+=1/this.missionTime;else{if(this.calculateMission()){this.status="returning",this.speed=this.army.getArmySpeed();const e=this.worldService.findPath(this.getTargetRegionId(),this.route.path[0],this.ownerCountry.id,!1);this.route.reversePath(),this.targetIndex=1,this.initRoutePaths(),this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target,e&&(e.path.length<this.route.path.length||!this.validateRoute())&&(this.route=e,this.targetIndex=1,this.initRoutePaths(),this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target)}else this.worldService.clearMission(),this.status="finished";this.progress=0}else"returning"!==this.status&&"canceled"!==this.status||(this.progress<100?(this.progress+=this.getTravelSpeed(),this.progress>100&&(this.progress=100)):(this.evaluateRegion(),this.targetIndex===this.route.path.length-1?(this.finish("canceled"===this.status),this.worldService.getSelectedMission()&&this.worldService.getSelectedMission().id===this.id&&this.worldService.clearMission(),this.status="finished"):(this.targetIndex+=1,this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target,this.progress=0)))}getDisplayProgress(){return"{mission}"===this.status?this.progress:this.distanceSoFar()/this.totalDistance()}distanceSoFar(){let e=0;for(let n=0;n<this.targetIndex-1;n++)e+=100*this.calculatePointsDistance(this.routePaths[n].origin,this.routePaths[n].target);return e+=this.calculatePointsDistance(this.routePaths[this.targetIndex-1].origin,this.routePaths[this.targetIndex-1].target)*this.progress,e}totalDistance(){let e=0;for(let n=0;n<this.routePaths.length;n++)e+=this.calculatePointsDistance(this.routePaths[n].origin,this.routePaths[n].target);return e}getProgressPercentage(){return this.progress/100}isFinished(){return"finished"===this.status}getStatus(){return this.status.replace("{mission}",Ou.prepareMissionName(this.mission))}getDistance(){const e=this.calculatePointsDistance(this.origin,this.target);return this.worldService.getRegion(this.getCurrentRegionId()).roads?e*To.ROADS_DISTANCE_MODIFIER:e}calculatePointsDistance(e,n){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}canCancel(){return!1}}var OT=function(e){return e[e.NONE=0]="NONE",e[e.PEACE=1]="PEACE",e[e.SAVE_WEALTH=2]="SAVE_WEALTH",e[e.ECONOMY_BUILD=3]="ECONOMY_BUILD",e[e.ECONOMY_COLONIZE=4]="ECONOMY_COLONIZE",e[e.DEFENSE_WALL=5]="DEFENSE_WALL",e[e.DEFENSE_ARCHER=6]="DEFENSE_ARCHER",e[e.DEFENSE_GATHER_FORCES=7]="DEFENSE_GATHER_FORCES",e[e.OFFENSE_MILITIA=8]="OFFENSE_MILITIA",e[e.OFFENSE_SPEARMAN=9]="OFFENSE_SPEARMAN",e[e.OFFENSE_SWORDSMAN=10]="OFFENSE_SWORDSMAN",e[e.OFFENSE_LIGHT_CAVALRY=11]="OFFENSE_LIGHT_CAVALRY",e[e.OFFENSE_GATHER_FORCES=12]="OFFENSE_GATHER_FORCES",e[e.OFFENSE_COLONIZE=13]="OFFENSE_COLONIZE",e[e.OFFENSE_PLUNDER=14]="OFFENSE_PLUNDER",e[e.OFFENSE_CONQUER=15]="OFFENSE_CONQUER",e[e.OFFENSE_RECLAIM_CAPITAL=16]="OFFENSE_RECLAIM_CAPITAL",e[e.DEFENSE_GUARD_TOWER=17]="DEFENSE_GUARD_TOWER",e}({});class TT{constructor(e){this.distance=0,this.path=e}reversePath(){this.path=this.path.reverse()}calculatePathDistance(e){if(0!==this.distance)return this.distance;let n=0;for(let l=0;l<this.path.length-1;l++){const t=e.getRegion(this.path[l]),i=this.calculatePointsDistance(t.center,e.getRegion(this.path[l+1]).center);n+=t.roads?i*To.ROADS_DISTANCE_MODIFIER:i}return this.distance=n,n}calculateSeaPathDistance(e){if(0!==this.distance)return this.distance;let n=0;for(let l=0;l<this.path.length-1;l++)n+=this.calculatePointsDistance(e.getSeaArea(this.path[l]).center,e.getSeaArea(this.path[l+1]).center);return this.distance=n,n}calculatePointsDistance(e,n){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}}class CT extends RT{constructor(e,n,l,t,i,s,r,u,o,a){super(e,n,l,t,i,s,r,u,o,a)}toJSON(){const e=[];return this.army.units.forEach(n=>e.push({troop:n.troop,size:n.size})),{type:this.mission,id:this.id,ownerCountryId:this.ownerCountry.id,army:e,route:this.route.path,progress:this.progress,targetIndex:this.targetIndex,status:this.status,data:this.data}}getDestinationTargetRegion(){return this.worldService.getRegion(this.route.path[this.route.path.length-1])}getMissionType(){return vT.LAND}getTravelSpeed(){let e=super.getTravelSpeed();return this.ownerCountry.id===fu.PLAYER&&this.gameService.isEnabled(ou.LOGISTICS)&&(e*=1.1),e}evaluateRegion(){const e=this.worldService.getRegion(this.getTargetRegionId()),n=this.worldService.getCountryByRegionId(this.getTargetRegionId());if(!this.validateRoute()){const n=this.worldService.findPath(e.id,this.getDestinationTargetRegion().id,this.ownerCountry.id,!1);if(n&&n.path.length>1){const e=new TT(this.route.path.splice(0,this.targetIndex));e.path=e.path.concat(n.path),this.route=e,this.initRoutePaths(),this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target}}if(e.id!==this.getDestinationTargetRegion().id&&this.ownerCountry.id!==n.id&&(this.ownerCountry.id===fu.PLAYER&&n.id!==fu.NEUTRAL||this.ownerCountry.id!==fu.PLAYER)&&e.army.hasAny()){const l=this.armyService.calculateAttack(this.army,e.army,e.defense,this.ownerCountry.id===fu.PLAYER,this.ownerCountry.id!==fu.PLAYER);l.attacker=this.ownerCountry.id,l.defender=n.id,this.ownerCountry.id!==fu.PLAYER&&n.id!==fu.PLAYER||(l.result?l.message=this.ownerCountry.id===fu.PLAYER?"We managed to pass through enemy region":"Enemy managed to pass through our region":(this.ownerCountry.id===fu.PLAYER?(l.message="We failed passing through enemy region",this.data&&(e.wealth+=this.data)):(l.message="We defeated enemy armies passing through our region",this.data&&this.armyService.loot(this.data)),this.worldService.getSelectedMission()&&this.worldService.getSelectedMission().id===this.id&&this.worldService.clearMission(),this.status="finished"),this.logService.fightReport(l))}}validateRoute(){for(let e=this.targetIndex;e<this.route.path.length-1;e++){const n=this.worldService.getCountryByRegionId(this.route.path[e]),l=this.worldService.getRegion(this.route.path[e]);if(n.id===fu.NEUTRAL&&l.army.hasAny())return!1;if(n.id===fu.NEUTRAL)return!0;if(n.id!==this.ownerCountry.id)return!1}return!0}initRoutePaths(){this.routePaths=[];for(let e=0;e<this.route.path.length-1;e++){const n=this.worldService.getRegion(this.route.path[e]),l=this.worldService.getRegion(this.route.path[e+1]);this.routePaths.push({origin:{x:n.center.x,y:n.center.y},target:{x:l.center.x,y:l.center.y}})}}cancel(){this.canCancel()&&"traveling"===this.status&&(this.progress=100-this.progress,this.status="returning",this.route.reversePath(),this.targetIndex=this.route.path.length-this.targetIndex,this.initRoutePaths(),this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target)}getIconPath(){return"assets/army/mission/"+this.icon+".svg"}getArmyEffectiveSpeed(){return this.ownerCountry.id===fu.PLAYER&&this.gameService.isEnabled(ou.LOGISTICS)?1.1*this.army.getArmySpeed():this.army.getArmySpeed()}}class IT extends CT{constructor(e,n,l,t,i,s=0,r=1,u="traveling",o=null){super(e,n,cu.COLONIZE,r,i,s,u,l,t,o),e&&(this.landService=e.getLandService())}isInstant(){return!1}calculateMission(){const e=this.worldService.getRegion(this.getTargetRegionId());if(this.worldService.getCountryByRegionId(e.id).id!==fu.PLAYER){if(this.ownerCountry.id!==fu.PLAYER&&e.army.hasAny()&&e.army.getArmyPower(!1)<10)this.logService.success("Our troops lost against enemy colonists"),e.army=new BR([]);else if(this.ownerCountry.id!==fu.PLAYER&&e.army.hasAny())return!1;Nu.chance(5*this.army.getUnit(pu.COLONIST).size/100)?(this.worldService.ownRegion(this.getTargetRegionId(),this.ownerCountry),this.army=new BR([]),this.ownerCountry.id===fu.PLAYER&&this.logService.success("We colonized new region!")):this.ownerCountry.id===fu.PLAYER&&this.logService.warning("Our colonists lost against the harsh conditions and died during attempt to colonize new region")}else this.ownerCountry.id===fu.PLAYER&&this.logService.warning("Our colonists died in a bandits ambush");return!1}finish(e){}}class bT extends CT{constructor(e,n,l,t,i,s=0,r=1,u="traveling",o=null){super(e,n,cu.CONQUER,r,i,s,u,l,t,o),e&&(this.landService=e.getLandService())}isInstant(){return!1}calculateMission(){if(this.ownerCountry.id===fu.PLAYER){const e=this.worldService.getRegion(this.getTargetRegionId()),n=this.worldService.getCountryByRegionId(e.id);if(n.id!==this.ownerCountry.id){const l=this.armyService.calculateAttack(this.army,e.army,e.defense,!0,!1);return l.attacker=this.ownerCountry.id,l.defender=n.id,l.result?(l.message="Region conquered",this.servicesService.getHappinessService().addHappinessEffect(0,Ru.SUCCESSFUL_CONQUER,2,90),this.logService.fightReport(l),this.armyService.loot(50*e.wealth+200*e.economy),n.diplomacy<25?n.decreaseDiplomacy(30):n.diplomacy=-50,n.capital===e.id&&(n.diplomacy=-100),this.worldService.ownRegion(this.getTargetRegionId(),this.ownerCountry),this.getDestinationTargetRegion().army.addArmy(this.army),this.army=new BR([]),!1):(l.message="Our army has been defeated",this.logService.fightReport(l),n.diplomacy<25?n.decreaseDiplomacy(15):n.diplomacy=30,!1)}return!0}{const e=this.worldService.getRegion(this.getTargetRegionId()),n=this.worldService.getCountryByRegionId(e.id);if(n.id===fu.PLAYER&&this.worldService.isProtected())return this.logService.log("We were protected from conquer"),!0;if(n.id!==this.ownerCountry.id){const l=this.armyService.calculateAttack(this.army,e.army,e.defense,!1,n.id===fu.PLAYER);return l.attacker=this.ownerCountry.id,l.defender=n.id,l.result?0!==e.id?(n.id===fu.PLAYER&&(this.reduceLand(e),l.message="Our region has been conquered by enemy!",this.servicesService.getHappinessService().addHappinessEffect(0,Ru.RECENTLY_CONQUERED,-4,90),this.logService.fightReport(l)),this.worldService.ownRegion(this.getTargetRegionId(),this.ownerCountry),this.getDestinationTargetRegion().army.addArmy(this.army),this.army=new BR([]),!1):(this.data=this.armyService.lootPlayer(50*this.army.getArmySize()),l.message="Our capital has been plundered!",this.servicesService.getHappinessService().addHappinessEffect(0,Ru.RECENTLY_INVADED,-4,90),this.logService.fightReport(l),!0):(n.id===fu.PLAYER&&(l.message="We have defeated enemy conquer party!",this.logService.fightReport(l)),e.target=OT.DEFENSE_ARCHER,!1)}return!0}}finish(e){const n=this.getDestinationTargetRegion();n.army.addArmy(this.army),e||(n.wealth+=this.data)}reduceLand(e){let n=e.land+e.forest+e.mountains,l=0,t=0,i=0;if(this.landService.getLand()>=e.land?(n-=e.land,l+=e.land,this.landService.removeLand(e.land)):(n-=this.landService.getLand(),l+=this.landService.getLand(),this.landService.removeLand(this.landService.getLand())),this.landService.getForest()>=e.forest?(n-=e.forest,t+=e.forest,this.landService.removeForest(e.forest)):(n-=this.landService.getForest(),t+=this.landService.getForest(),this.landService.removeForest(this.landService.getForest())),this.landService.getMountains()>=e.mountains?(n-=e.mountains,i+=e.mountains,this.landService.removeMountains(e.mountains)):(n-=this.landService.getMountains(),i+=this.landService.getMountains(),this.landService.removeMountains(this.landService.getMountains())),n>0){if(this.landService.getForest()>0){if(this.landService.getForest()>n)return this.landService.removeForest(n),t+=n,void this.setLands(e,l,t,i);n-=this.landService.getForest(),t+=this.landService.getForest(),this.landService.removeForest(this.landService.getForest())}if(this.landService.getLand()>0){if(this.landService.getLand()>n)return this.landService.removeLand(n),l+=n,void this.setLands(e,l,t,i);n-=this.landService.getLand(),l+=this.landService.getLand(),this.landService.removeLand(this.landService.getLand())}if(this.landService.getMountains()>0){if(this.landService.getMountains()>n)return this.landService.removeMountains(n),i+=n,void this.setLands(e,l,t,i);n-=this.landService.getMountains(),i+=this.landService.getMountains(),this.landService.removeMountains(this.landService.getMountains())}}this.setLands(e,l,t,i)}setLands(e,n,l,t){e.land=n,e.forest=l,e.mountains=t}canCancel(){return!0}}class yT extends CT{constructor(e,n,l,t,i,s=0,r=1,u="traveling",o=null){super(e,n,cu.MOVE,r,i,s,u,l,t,o)}isInstant(){return!0}calculateMission(){const e=this.getDestinationTargetRegion(),n=this.worldService.getCountryByRegionId(e.id);return n.id!==fu.PLAYER&&n.id!==fu.NEUTRAL||(e.army.addArmy(this.army),this.army=new BR([]),!1)}finish(e){this.getDestinationTargetRegion().army.addArmy(this.army),this.army=new BR([])}canCancel(){return!0}}class AT extends CT{constructor(e,n,l,t,i,s=0,r=1,u="traveling",o=null){super(e,n,cu.PLUNDER,r,i,s,u,l,t,o)}isInstant(){return!1}calculateMission(){if(this.ownerCountry.id===fu.PLAYER){const e=this.worldService.getRegion(this.getTargetRegionId()),n=this.worldService.getCountryByRegionId(e.id);if(n.id!==this.ownerCountry.id){const l=this.armyService.calculateAttack(this.army,e.army,e.defense,!0,!1);return l.attacker=this.ownerCountry.id,l.defender=n.id,l.result?(n.decreaseDiplomacy(n.diplomacy<25?10:30),this.data=e.wealth,e.wealth=0,l.message="Region plundered",this.logService.fightReport(l),e.target=OT.DEFENSE_ARCHER,!0):(l.message="Our army has been defeated",this.logService.fightReport(l),n.decreaseDiplomacy(n.diplomacy<25?5:15),e.target=OT.DEFENSE_ARCHER,!1)}return!0}{const e=this.worldService.getRegion(this.getTargetRegionId()),n=this.worldService.getCountryByRegionId(e.id);if(n.id===fu.PLAYER&&this.worldService.isProtected())return this.logService.log("We were protected from plunder"),!0;if(n.id!==this.ownerCountry.id){const l=this.armyService.calculateAttack(this.army,e.army,e.defense,!1,n.id===fu.PLAYER);return l.attacker=this.ownerCountry.id,l.defender=n.id,l.result?n.id===fu.PLAYER||n.id===fu.NEUTRAL?(this.data=this.armyService.lootPlayer(50*this.army.getArmySize()),l.message=n.id===fu.NEUTRAL?"Our troops stationed in neutral region have been defeated":"We have been plundered!",this.servicesService.getHappinessService().addHappinessEffect(0,Ru.RECENTLY_INVADED,-2,60),this.logService.fightReport(l),!0):(this.data=e.wealth,this.data>Math.floor(this.army.getArmySize()/2)?(this.data=Math.floor(this.army.getArmySize()/2),e.wealth-=this.data):e.wealth=0,e.target=OT.DEFENSE_ARCHER,!0):(n.id===fu.PLAYER&&(l.message="We have defeated enemy plunder party!",this.logService.fightReport(l)),!1)}return!0}}finish(e){if(this.ownerCountry.id===fu.PLAYER)this.getDestinationTargetRegion().army.addArmy(this.army),this.army=new BR([]),e||this.armyService.loot(50*this.data);else{const e=this.getDestinationTargetRegion();this.worldService.getCountryByRegionId(e.id)!==this.ownerCountry?this.worldService.addMission(new bT(this.servicesService,this.id,this.ownerCountry,this.army,this.route,0,this.targetIndex,"{mission}",this.data)):(e.army.addArmy(this.army),e.wealth+=this.data)}}canCancel(){return!0}}class NT extends CT{constructor(e,n,l,t,i,s=0,r=1,u="traveling",o=null){super(e,n,cu.SPY,r,i,s,u,l,t,o)}isInstant(){return!1}calculateMission(){const e=this.getDestinationTargetRegion(),n=this.worldService.getCountryByRegionId(e.id);if(e&&this.army.getUnit(pu.SPY)){if(n.id===fu.PLAYER)return!0;e.spy+=this.army.getUnit(pu.SPY).size,this.army=new BR([])}return!1}finish(e){this.getDestinationTargetRegion().army.addArmy(this.army),this.army=new BR([])}}class _T extends CT{constructor(e,n,l,t,i,s=0,r=1,u="{mission}",o=null){super(e,n,cu.BUILD,r,i,s,u,l,t,o)}isInstant(){return!1}calculateMission(){const e=this.getDestinationTargetRegion();if(null!==this.data)switch(this.data){case xu.DEFENSES:return e.defense+=1,!1;case xu.ROADS:return e.roads=!0,!1;case xu.WATCHTOWER:{e.watchtower=!0;const n=this.getDestinationTargetRegion();return this.worldService.getCountryByRegionId(n.id).id===fu.PLAYER&&n.neighbours.forEach(e=>{e>=0&&(this.worldService.getRegion(e).watched=!0)}),!1}case xu.GUARD_TOWER:return e.army.addTroop(pu.GUARD_TOWER,1),!1;case xu.HARBOUR:return e.harbour=!0,!1}return!1}finish(e){}}class wT extends RT{constructor(e,n,l,t,i,s,r,u,o,a){super(e,n,l,t,i,s,r,u,o,a)}toJSON(){const e=[];return this.army.units.forEach(n=>e.push({troop:n.troop,size:n.size})),{type:this.mission,id:this.id,ownerCountryId:this.ownerCountry.id,army:e,route:this.route.path,progress:this.progress,targetIndex:this.targetIndex,status:this.status,data:this.data}}initRoutePaths(){this.routePaths=[];const e=this.worldService.getSeaArea(this.route.path[0]),n=this.worldService.getSeaArea(this.route.path[1]);this.routePaths.push({origin:{x:e.center.x,y:e.center.y},target:{x:n.center.x,y:n.center.y}});for(let l=1;l<this.route.path.length-1;l++){const e=this.worldService.getSeaArea(this.route.path[l]),n=this.worldService.getSeaArea(this.route.path[l+1]);this.routePaths.push({origin:{x:e.center.x,y:e.center.y},target:{x:n.center.x,y:n.center.y}})}if(this.mission===cu.FISHING||this.mission===cu.HUNTING||this.mission===cu.TREASURE||this.mission===cu.CARTOGRAPHY||this.mission===cu.SEA_BATTLE)if("traveling"===this.status)this.routePaths[this.routePaths.length-1].target=this.getDestinationTargetSeaEvent().center;else if("returning"===this.status){const e=this.worldService.getSeaArea(this.route.path[0]);this.routePaths[0].origin=e.events.length>0?e.events[0].center:e.center}}getTravelSpeed(){let e=super.getTravelSpeed();return this.ownerCountry.id===fu.PLAYER&&(this.gameService.isEnabled(ou.LOGISTICS)&&(e*=1.1),this.servicesService.getService(bu.SEA).getBuildings().find(e=>e.getBuildingType()===tu.LIGHTHOUSE&&e.isWorking())&&(e*=1.1)),e}getDestinationTargetRegion(){return this.route.path[this.route.path.length-1]>=0?this.worldService.getRegion(this.route.path[this.route.path.length-1]):null}getDestinationTargetSeaEvent(){return this.worldService.getSeaArea(this.route.path[this.route.path.length-1]).events[0]}getMissionType(){return vT.SEA}tick(){let e=60*this.speed/3/this.getDistance();if(this.ownerCountry.id===fu.PLAYER&&this.gameService.isEnabled(ou.LOGISTICS)&&(e*=1.1),"traveling"===this.status)if(this.progress<100)this.progress+=e,this.progress>100&&(this.progress=100);else{if(!this.evaluateRegion())return;this.targetIndex===this.route.path.length-1?(this.origin=this.target,this.isInstant()?this.calculateMission()?(this.status="returning",this.route.reversePath(),this.targetIndex=1,this.initRoutePaths(),this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target):this.status="finished":this.status="{mission}"):(this.targetIndex+=1,this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target),this.progress=0}else if("{mission}"===this.status)if(this.progress<100)this.progress+=1/this.missionTime;else{if(this.calculateMission()){this.status="returning";const e=this.worldService.findSeaPath(this.getTargetRegionId(),this.route.path[0],!1);this.route.reversePath(),this.targetIndex=1,this.initRoutePaths(),this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target,e&&(e.path.length<this.route.path.length||!this.validateRoute())&&(this.route=e,this.targetIndex=1,this.initRoutePaths(),this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target)}else this.worldService.clearMission(),this.status="finished";this.progress=0}else"returning"!==this.status&&"canceled"!==this.status||(this.progress<100?(this.progress+=e,this.progress>100&&(this.progress=100)):(this.evaluateRegion(),this.targetIndex===this.route.path.length-1?(this.finish("canceled"===this.status),this.worldService.getSelectedMission()&&this.worldService.getSelectedMission().id===this.id&&this.worldService.clearMission(),this.status="finished"):(this.targetIndex+=1,this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target,this.progress=0)))}cancel(){this.canCancel()&&"traveling"===this.status&&(this.progress=100-this.progress,this.status="returning",this.route.reversePath(),this.targetIndex=this.route.path.length-this.targetIndex,this.initRoutePaths(),this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target)}evaluateRegion(){const e=this.worldService.getSeaArea(this.getTargetRegionId());if(!this.validateRoute()){let n;if(n=this.getDestinationTargetSeaEvent()?this.worldService.findSeaPath(e.id,this.getDestinationTargetSeaEvent().parentId,!1):this.worldService.findSeaPath(e.id,this.getDestinationTargetRegion().id,!1),n&&n.path.length>1){const e=new TT(this.route.path.splice(0,this.targetIndex));e.path=e.path.concat(n.path),this.route=e,this.initRoutePaths(),this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target}}if((this.getDestinationTargetSeaEvent()&&e.id!==this.getDestinationTargetSeaEvent().parentId||this.getDestinationTargetRegion()&&e.id!==this.getDestinationTargetRegion().id)&&e.events.length>0&&(e.events[0].type===vu.PIRATES||e.events[0].type===vu.PIRATES_BASE)&&(e.events[0].type===vu.PIRATES||e.events[0].type===vu.PIRATES_BASE)){const n=this.army.getNavy(!0),l=this.armyService.calculateAttack(n,e.events[0].data,e.events[0].type===vu.PIRATES?0:3,!0,!1);if(l.attacker=this.ownerCountry.id,l.defender=fu.PIRATES,l.result){l.message=e.events[0].type===vu.PIRATES?"Pirates defeated":"Pirates base destroyed",this.army.addArmy(n);const t=this.army.getLandUnits(!0);for(;t.getArmySize()>0&&this.getTroopsSize(t)>this.getNavyCapacity(n);)t.units[Nu.randomBetween(0,t.units.length-1)].size-=1,t.removeEmptyUnits();return this.army.addArmy(t),this.data=Math.min(10*this.army.getArmyCargo(),e.events[0].amount),e.events[0].amount-=this.data,e.events[0].amount>=50?e.events[0].type=vu.TREASURE:(e.events[0].amount=0,e.events[0].time=-1),this.logService.fightReport(l),!0}return l.message="Pirates won against our navy",this.status="finished",this.army.clearArmy(),this.logService.fightReport(l),!1}return!0}validateRoute(){if("traveling"===this.status&&this.isEventBasedMission()&&!this.getDestinationTargetSeaEvent())return this.cancel(),!1;for(let e=this.targetIndex;e<this.route.path.length-1;e++){const n=this.worldService.getSeaArea(this.route.path[e]);if(n.events.length>0&&(n.events[0].type===vu.PIRATES||n.events[0].type===vu.PIRATES_BASE))return!1}return!0}getIconPath(){return this.army.hasTroop(pu.GALLEON)?"assets/sea/galleon.svg":this.army.hasTroop(pu.BRIGANTINE)?"assets/sea/brigantine.svg":this.army.hasTroop(pu.BOAT)?"assets/sea/boat.svg":void 0}getTroopsSize(e){let n=0;return e.units.forEach(e=>{e.troop!==pu.ALL&&e.troop!==pu.BOAT&&e.troop!==pu.BRIGANTINE&&e.troop!==pu.GALLEON&&e.size>0&&(n+=e.getTroopSize())}),n}getNavyCapacity(e){let n=0;return e.units.forEach(e=>{e.troop!==pu.BOAT&&e.troop!==pu.BRIGANTINE&&e.troop!==pu.GALLEON||e.size>0&&(n+=e.getTroopCargo())}),n}canCancel(){return!0}getDistance(){return this.calculatePointsDistance(this.origin,this.target)}getArmyEffectiveSpeed(){return this.servicesService.getService(bu.SEA).getBuildings().find(e=>e.getBuildingType()===tu.LIGHTHOUSE&&e.isWorking())?1.1*this.army.getNavy(!1).getArmySpeed():this.army.getNavy(!1).getArmySpeed()}isEventBasedMission(){return!1}}class PT extends wT{constructor(e,n,l,t,i,s=0,r=1,u="traveling",o=null){super(e,n,cu.FISHING,r,i,s,u,l,t,o)}isInstant(){return!1}calculateMission(){if(!this.getDestinationTargetSeaEvent())return!0;const e=5*this.army.getArmyCargo(),n=Math.min(e,this.getDestinationTargetSeaEvent().amount);return this.getDestinationTargetSeaEvent().amount-=n,this.data=n,!0}finish(e){this.data&&this.data>0&&this.servicesService.getResourcesService().increaseResource(su.FISH,this.data,"Fishing",!0),this.getDestinationTargetRegion().army.addArmy(this.army.getLandUnits(!0)),this.getDestinationTargetRegion().navy.addArmy(this.army.getNavy(!0)),this.army=new BR([])}isEventBasedMission(){return!0}}class MT extends wT{constructor(e,n,l,t,i,s=0,r=1,u="traveling",o=null){super(e,n,cu.HUNTING,r,i,s,u,l,t,o)}isInstant(){return!1}calculateMission(){if(!this.getDestinationTargetSeaEvent())return!0;const e=5*this.army.getArmyCargo(),n=Math.min(e,this.getDestinationTargetSeaEvent().amount),l=Math.ceil(.7*n),t=n-l;return this.getDestinationTargetSeaEvent().amount-=n,this.data={meat:l,fur:t},!0}finish(e){this.data&&this.data.meat>0&&(this.servicesService.getResourcesService().increaseResource(su.MEAT,this.data.meat,"Sea hunting",!0),this.servicesService.getResourcesService().increaseResource(su.FUR,this.data.fur,"Sea hunting",!0)),this.getDestinationTargetRegion().army.addArmy(this.army.getLandUnits(!0)),this.getDestinationTargetRegion().navy.addArmy(this.army.getNavy(!0)),this.army=new BR([])}isEventBasedMission(){return!0}}class DT extends wT{constructor(e,n,l,t,i,s=0,r=1,u="traveling",o=null){super(e,n,cu.TREASURE,r,i,s,u,l,t,o)}isInstant(){return!1}calculateMission(){if(!this.getDestinationTargetSeaEvent())return!0;const e=10*this.army.getArmyCargo(),n=Math.min(e,this.getDestinationTargetSeaEvent().amount);return this.getDestinationTargetSeaEvent().amount-=n,this.data=n,!0}finish(e){this.data&&this.data>0&&this.servicesService.getResourcesService().increaseResource(su.COINS,this.data,"Treasure",!0),this.getDestinationTargetRegion().army.addArmy(this.army.getLandUnits(!0)),this.getDestinationTargetRegion().navy.addArmy(this.army.getNavy(!0)),this.army=new BR([])}isEventBasedMission(){return!0}}class LT extends wT{constructor(e,n,l,t,i,s=0,r=1,u="traveling",o=null){super(e,n,cu.EXPEDITION,r,i,s,u,l,t,o)}isInstant(){return!1}calculateMission(){void 0!==this.data&&(Nu.chance(this.data/100)||this.logService.warning("Our expedition didn't find any new land, perhaps we need to go farther"));let e=0,n=0,l=0,t=0;return this.army.getLandUnits(!1).units.forEach(e=>{t+=e.getTroopStrength()*e.size,t+=e.getTroopDefense()*e.size}),Nu.chance(.5)?(e+=Math.ceil(.6*t),t-=e,n+=Math.ceil(.6*t),t-=n,l=t):Nu.chance(.7)?(n+=Math.ceil(.6*t),t-=n,e+=Math.ceil(.6*t),t-=e,l=t):(l+=Math.ceil(.6*t),t-=l,e+=Math.ceil(.6*t),t-=e,n=t),this.data={land:e,forest:n,mountains:l},!0}finish(e){const n=this.servicesService.getLandService();this.getDestinationTargetRegion().army.addArmy(this.army.getLandUnits(!0)),this.getDestinationTargetRegion().navy.addArmy(this.army.getNavy(!0)),this.army=new BR([]),this.data&&(this.data.land&&(n.increaseLand(this.data.land,!0),this.worldService.increaseDiscoveredLand(this.data.land)),this.data.forest&&(n.increaseForest(this.data.forest,!1),this.worldService.increaseDiscoveredForest(this.data.forest)),this.data.mountains&&(n.increaseMountains(this.data.mountains),this.worldService.increaseDiscoveredMountains(this.data.mountains)),this.logService.success("We found a new land:<br> Land:"+this.data.land+"<br> Forest:"+this.data.forest+"<br> Mountains:"+this.data.mountains+"<br>"))}}class xT extends wT{constructor(e,n,l,t,i,s=0,r=1,u="traveling",o=null){super(e,n,cu.CARTOGRAPHY,r,i,s,u,l,t,o)}isInstant(){return!1}calculateMission(){if(!this.getDestinationTargetSeaEvent())return!0;const e=this.army.getArmyCargo(),n=Math.min(e,this.getDestinationTargetSeaEvent().amount);return this.getDestinationTargetSeaEvent().amount-=n,this.data=n,!0}finish(e){this.data&&this.data>0&&this.servicesService.getNavyService().increaseCartographyData(this.data),this.getDestinationTargetRegion().army.addArmy(this.army.getLandUnits(!0)),this.getDestinationTargetRegion().navy.addArmy(this.army.getNavy(!0)),this.army=new BR([])}isEventBasedMission(){return!0}}class kT extends wT{constructor(e,n,l,t,i,s=0,r=1,u="traveling",o=null){super(e,n,cu.SEA_BATTLE,r,i,s,u,l,t,o)}isInstant(){return!1}calculateMission(){if(!this.getDestinationTargetSeaEvent())return!0;const e=this.army.getNavy(!0),n=this.getDestinationTargetSeaEvent().type===vu.PIRATES?0:3,l=this.armyService.calculateAttack(e,this.getDestinationTargetSeaEvent().data,n,!0,!1);if(l.attacker=this.ownerCountry.id,l.defender=fu.PIRATES,l.result){this.getDestinationTargetSeaEvent().type===vu.PIRATES?(l.message="Pirates defeated",this.servicesService.getHappinessService().addHappinessEffect(0,Ru.PIRATES_DEFEATED,1,180)):(l.message="Pirates base destroyed",this.servicesService.getHappinessService().addHappinessEffect(0,Ru.PIRATES_DEFEATED,3,360)),this.army.addArmy(e);const n=this.army.getLandUnits(!0);for(;n.getArmySize()>0&&this.getTroopsSize(n)>this.getNavyCapacity(e);)n.units[Nu.randomBetween(0,n.units.length-1)].size-=1,n.removeEmptyUnits();return this.army.addArmy(n),this.data=Math.min(10*this.army.getArmyCargo(),this.getDestinationTargetSeaEvent().amount),this.getDestinationTargetSeaEvent().amount-=this.data,this.getDestinationTargetSeaEvent().amount>=50?this.getDestinationTargetSeaEvent().type=vu.TREASURE:(this.getDestinationTargetSeaEvent().amount=0,this.getDestinationTargetSeaEvent().time=-1),this.logService.fightReport(l),!0}return l.message="Pirates won against our navy",this.army.clearArmy(),this.status="finished",this.logService.fightReport(l),!1}finish(e){this.getDestinationTargetRegion().army.addArmy(this.army.getLandUnits(!0)),this.getDestinationTargetRegion().navy.addArmy(this.army.getNavy(!0)),this.army=new BR([])}getTroopsSize(e){let n=0;return e.units.forEach(e=>{e.troop!==pu.ALL&&e.troop!==pu.BOAT&&e.troop!==pu.BRIGANTINE&&e.troop!==pu.GALLEON&&e.size>0&&(n+=e.getTroopSize())}),n}getNavyCapacity(e){let n=0;return e.units.forEach(e=>{e.troop!==pu.BOAT&&e.troop!==pu.BRIGANTINE&&e.troop!==pu.GALLEON||e.size>0&&(n+=e.getTroopCargo())}),n}isEventBasedMission(){return!0}}class FT extends wT{constructor(e,n,l,t,i,s=0,r=1,u="traveling",o=null){super(e,n,cu.SEA_CONQUER,r,i,s,u,l,t,o)}isInstant(){return!1}calculateMission(){const e=this.worldService.getRegion(this.getTargetRegionId()),n=this.worldService.getCountryByRegionId(e.id);if(n.id!==this.ownerCountry.id){const l=this.army.getLandUnits(!0),t=this.armyService.calculateAttack(l,e.army,e.defense,!0,!1);return t.attacker=this.ownerCountry.id,t.defender=n.id,t.result?(t.message="Region conquered",this.armyService.loot(50*e.wealth+200*e.economy),n.diplomacy<25?n.decreaseDiplomacy(30):n.diplomacy=-50,n.capital===e.id&&(n.diplomacy=-100),this.worldService.ownRegion(this.getTargetRegionId(),this.ownerCountry),this.getDestinationTargetRegion().army.addArmy(l),this.logService.fightReport(t),!0):(t.message="Our army has been defeated",n.diplomacy<25?n.decreaseDiplomacy(15):n.diplomacy=30,this.logService.fightReport(t),!0)}return!0}finish(e){return this.getDestinationTargetRegion().army.addArmy(this.army.getLandUnits(!0)),this.getDestinationTargetRegion().navy.addArmy(this.army.getNavy(!0)),this.army=new BR([]),!1}}class UT extends wT{constructor(e,n,l,t,i,s=0,r=1,u="traveling",o=null){super(e,n,cu.SEA_PLUNDER,r,i,s,u,l,t,o)}isInstant(){return!1}calculateMission(){const e=this.worldService.getRegion(this.getTargetRegionId()),n=this.worldService.getCountryByRegionId(e.id);if(n.id!==this.ownerCountry.id){const l=this.army.getLandUnits(!0),t=this.armyService.calculateAttack(l,e.army,e.defense,!0,!1);return t.attacker=this.ownerCountry.id,t.defender=n.id,t.result?(n.decreaseDiplomacy(n.diplomacy<25?10:30),this.data=e.wealth,e.wealth=0,t.message="Region plundered",e.target=OT.DEFENSE_ARCHER,this.army.addArmy(l),this.logService.fightReport(t),!0):(t.message="Our army has been defeated",n.decreaseDiplomacy(n.diplomacy<25?5:15),e.target=OT.DEFENSE_ARCHER,this.logService.fightReport(t),!0)}}finish(e){return this.getDestinationTargetRegion().army.addArmy(this.army.getLandUnits(!0)),this.getDestinationTargetRegion().navy.addArmy(this.army.getNavy(!0)),this.army=new BR([]),!1}}class HT extends wT{constructor(e,n,l,t,i,s=0,r=1,u="traveling",o=null){super(e,n,cu.SEA_MOVE,r,i,s,u,l,t,o)}isInstant(){return!0}calculateMission(){const e=this.getDestinationTargetRegion(),n=this.worldService.getCountryByRegionId(e.id);return n.id!==fu.PLAYER&&n.id!==fu.NEUTRAL||(e.army.addArmy(this.army.getLandUnits(!0)),!e.harbour)||(e.navy.addArmy(this.army.getNavy(!0)),!1)}finish(e){return this.getDestinationTargetRegion().army.addArmy(this.army.getLandUnits(!0)),this.getDestinationTargetRegion().navy.addArmy(this.army.getNavy(!0)),this.army=new BR([]),!1}}let GT=(()=>{class e{constructor(e){this.servicesService=e,e.addService(bu.MISSION_FACTORY,this)}loadMission(e){const n=this.servicesService.getWorldService(),l=new BR([]);if(e.army.forEach(e=>{l.addTroop(e.troop,e.size)}),e.type!==cu.BUILD&&0===l.units.length)return null;const t=new TT(e.route);switch(e.type){case cu.COLONIZE:return new IT(this.servicesService,e.id,n.getCountry(e.ownerCountryId),l,t,e.progress,e.targetIndex,e.status,e.data);case cu.CONQUER:return new bT(this.servicesService,e.id,n.getCountry(e.ownerCountryId),l,t,e.progress,e.targetIndex,e.status,e.data);case cu.MOVE:return new yT(this.servicesService,e.id,n.getCountry(e.ownerCountryId),l,t,e.progress,e.targetIndex,e.status,e.data);case cu.PLUNDER:return new AT(this.servicesService,e.id,n.getCountry(e.ownerCountryId),l,t,e.progress,e.targetIndex,e.status,e.data);case cu.SPY:return new NT(this.servicesService,e.id,n.getCountry(e.ownerCountryId),l,t,e.progress,e.targetIndex,e.status,e.data);case cu.BUILD:return new _T(this.servicesService,e.id,n.getCountry(e.ownerCountryId),l,t,e.progress,e.targetIndex,e.status,e.data);case cu.FISHING:return new PT(this.servicesService,e.id,n.getCountry(e.ownerCountryId),l,t,e.progress,e.targetIndex,e.status,e.data);case cu.HUNTING:return new MT(this.servicesService,e.id,n.getCountry(e.ownerCountryId),l,t,e.progress,e.targetIndex,e.status,e.data);case cu.TREASURE:return new DT(this.servicesService,e.id,n.getCountry(e.ownerCountryId),l,t,e.progress,e.targetIndex,e.status,e.data);case cu.EXPEDITION:return new LT(this.servicesService,e.id,n.getCountry(e.ownerCountryId),l,t,e.progress,e.targetIndex,e.status,e.data);case cu.CARTOGRAPHY:return new xT(this.servicesService,e.id,n.getCountry(e.ownerCountryId),l,t,e.progress,e.targetIndex,e.status,e.data);case cu.SEA_BATTLE:return new kT(this.servicesService,e.id,n.getCountry(e.ownerCountryId),l,t,e.progress,e.targetIndex,e.status,e.data);case cu.SEA_MOVE:return new HT(this.servicesService,e.id,n.getCountry(e.ownerCountryId),l,t,e.progress,e.targetIndex,e.status,e.data);case cu.SEA_PLUNDER:return new UT(this.servicesService,e.id,n.getCountry(e.ownerCountryId),l,t,e.progress,e.targetIndex,e.status,e.data);case cu.SEA_CONQUER:return new FT(this.servicesService,e.id,n.getCountry(e.ownerCountryId),l,t,e.progress,e.targetIndex,e.status,e.data)}}}return e.\u0275prov=re({factory:function(){return new e(Ae(Np))},token:e,providedIn:"root"}),e})();class BT{constructor(e,n,l,t,i){this.id=e,this.center=n,this.r=l,this.events=t,this.neighbours=i}}class VT{constructor(e,n,l,t,i,s,r){if(this.parentId=e,this.id=n,this.type=l,this.center=t,this.amount=i,this.time=s,this.data=r,l===vu.PIRATES||l===vu.PIRATES_BASE)if(null===r)for(this.data=new BR([]);this.amount>=80;)this.amount>=fo.getTroop(pu.GALLEON).PAY&&(this.amount-=fo.getTroop(pu.GALLEON).PAY,this.data.addTroop(pu.GALLEON,1),this.amount>=fo.getTroop(pu.BRIGANTINE).PAY&&(this.amount-=fo.getTroop(pu.BRIGANTINE).PAY,this.data.addTroop(pu.BRIGANTINE,1))),this.amount>=fo.getTroop(pu.BRIGANTINE).PAY&&(this.amount-=fo.getTroop(pu.BRIGANTINE).PAY,this.data.addTroop(pu.BRIGANTINE,1));else this.data=new BR([]),r.units.forEach(e=>{e.troop&&this.data.addTroop(e.troop,e.size)});this.amount=i}toJSON(){return{parentId:this.parentId,id:this.id,type:this.type,center:this.center,amount:this.amount,time:this.time,data:this.data}}tick(e,n,l,t){if(this.type===vu.WHIRLPOOL&&(this.time-=1),this.type===vu.PIRATES_BASE&&(this.time-=1,this.time<=10)){let i=0;if(n.getSeaAreas().forEach(e=>{e.events.length>0&&e.events[0].type===vu.PIRATES&&(i+=1)}),this.time=Nu.randomBetween(To.SEA_EVENTS.PIRATES_BASE.TIME_MIN+50*i,To.SEA_EVENTS.PIRATES_BASE.TIME_MAX+50*i),i<2*To.SEA_EVENTS.PIRATES.NUMBER_MAX){const i=n.getSeaAreas().filter(e=>-1!==e.id&&0===e.events.length&&e.r>0),s=i[Nu.randomBetween(0,i.length-1)];s.events.push(new VT(s.id,l.getNextId(),vu.PIRATES,n.getRandomPointInCircle(s.center,s.r),Nu.randomBetween(To.SEA_EVENTS.PIRATES.POWER_MIN,To.SEA_EVENTS.PIRATES.POWER_MAX),Nu.randomBetween(To.SEA_EVENTS.PIRATES.TIME_MIN,To.SEA_EVENTS.PIRATES.TIME_MAX),null)),e.getGameService().isEnabled(ou.BOAT_BUILDER)&&t.warning("Pirates base sent a new pirates group")}}}}let WT=(()=>{class e extends zE{constructor(e,n,l,t,i){super(n,e,l,i,t,Eu.SEA,bu.SEA)}}return e.\u0275prov=re({factory:function(){return new e(Ae(Qp),Ae(GE),Ae(Np),Ae(lE),Ae(WE))},token:e,providedIn:"root"}),e})(),YT=(()=>{class e{constructor(e,n,l,t,i,s){this.servicesService=e,this.resourcesService=n,this.logService=l,this.seaService=t,this.modalService=i,this.calendarService=s,this.maxHarbourSpace=0,this.cartographyData=0,this.mapProgress=0,this.paydayCounter=30,this.navy=new BR([]),e.addService(bu.NAVY,this),this.calendarService.registerForDayChange().subscribe(e=>{this.calculatePayday()})}getName(){return"NavyService"}load(e){this.maxHarbourSpace=void 0===e.maxHarbourSpace||isNaN(e.maxHarbourSpace)?0:e.maxHarbourSpace,this.cartographyData=void 0===e.cartographyData||isNaN(e.cartographyData)?0:e.cartographyData,this.mapProgress=void 0===e.mapProgress||isNaN(e.mapProgress)?0:e.mapProgress,this.paydayCounter=void 0!==e.paydayCounter?e.paydayCounter:30,this.navy.units=[],void 0!==e.navy&&e.navy.forEach(e=>{this.navy.addTroop(e[0],e[1])})}reset(e,n){this.maxHarbourSpace=0,this.cartographyData=0,this.mapProgress=0,this.navy=new BR([]),this.paydayCounter=30}save(){const e=[];return this.navy.units.forEach(n=>e.push([n.troop,n.size])),{maxHarbourSpace:this.maxHarbourSpace,cartographyData:this.cartographyData,mapProgress:this.mapProgress,navy:e,paydayCounter:this.paydayCounter}}getWorldService(){return this.servicesService.getWorldService()}tick(e){}increaseHarbourSize(e){this.maxHarbourSpace+=e}decreaseHarbourSize(e){this.maxHarbourSpace-=e,this.maxHarbourSpace<0&&(this.maxHarbourSpace=0)}getHarbourSpace(){let e=0;return[pu.BOAT,pu.BRIGANTINE,pu.GALLEON].forEach(n=>{e+=this.getTotalShips(n)*fo.getTroop(n).SIZE}),e+this.getSizeOfShipsInConstruction()}getSizeOfShipsInConstruction(){let e=0;return this.seaService.getBuildings().filter(e=>e.getBuildingType()===tu.BOAT_BUILDER||e.getBuildingType()===tu.SHIPYARD).map(e=>e).forEach(n=>e+=n.getShipSize()),e}getFreeHarbourSpace(){return this.maxHarbourSpace-this.getHarbourSpace()-this.getSizeOfShipsInConstruction()}getMaxHarbourSpace(){return this.maxHarbourSpace}addShip(e){this.navy.addTroop(e,1)}getAvailableShips(e){const n=this.navy.getUnit(e);return void 0!==n?n.size:0}getTotalShips(e){let n=0;const l=this.navy.getUnit(e);return n+=void 0!==l?l.size:0,this.getWorldService().getPlayerSeaMissions().forEach(l=>{const t=l.army.getUnit(e);n+=void 0!==t?t.size:0}),this.getWorldService().getStationedNavy().forEach(l=>{const t=l.getUnit(e);t&&(n+=t.size)}),n}getCartographyData(){return this.cartographyData}increaseCartographyData(e){this.cartographyData+=e}decreaseCartographyData(e){return this.cartographyData>=e&&(this.cartographyData-=e,!0)}addMapProgress(){this.mapProgress+=1}getMapProgress(){return this.mapProgress}createMap(){return!!(this.mapProgress>=100&&this.resourcesService.increaseResource(su.MAP,1,"Cartographer"))&&(this.mapProgress-=100,!0)}calculateNavyPay(){let e=0;return[pu.BOAT,pu.BRIGANTINE,pu.GALLEON].forEach(n=>{e+=this.getTotalShips(n)*fo.getTroop(n).PAY}),e}getNavy(){return this.navy}getPaydayCounter(){return this.paydayCounter}calculatePayday(){if(this.getPaydayCounter()<=0){const e=this.calculateNavyPay();if(e>0){let n=this.resourcesService.hasResource(su.COINS,e,"Navy");if(n>e&&(n=e),n>0){this.resourcesService.decreaseResource(su.COINS,e-n,"Navy");const l=[];for(;n>0&&(this.navy.units.forEach(e=>{if(n>0&&e.getTroopPay()>0&&e.size>0&&(n-=e.getTroopPay(),Nu.chance(.25))){e.size-=1;const n=l.find(n=>n[0]===e.troop);n?n[1]+=1:l.push([e.troop,1])}}),!(n<=0));){const e=[];this.getWorldService().getPlayerSeaMissions().forEach(n=>{n.army.getNavy(!1).getArmySize()>0&&e.push(n.army.getNavy(!1))}),this.getWorldService().getStationedNavy().forEach(n=>{n.getArmySize()>0&&e.push(n)}),e.forEach(e=>{n>0&&e.units.forEach(e=>{if(n>0&&e.getTroopPay()>0&&e.size>0&&(n-=e.getTroopPay(),Nu.chance(.25))){e.size-=1;const n=l.find(n=>n[0]===e.troop);n?n[1]+=1:l.push([e.troop,1])}}),e.removeEmptyUnits()})}if(l.length>0){let e="Deserters:<br>";l.forEach(n=>e+="&emsp;"+n[1]+" "+Ou.prepareTroopName(n[0])+"<br>"),this.logService.warning(e)}}else this.resourcesService.decreaseResource(su.COINS,e,"Navy")}this.paydayCounter=30}else this.paydayCounter-=1}dismiss(e,n){const l=this.resourcesService.getPopulationCap()-this.resourcesService.getTotalPeople(),t=void 0!==this.navy.getUnit(e)?this.navy.getUnit(e).size:0;0!==t?n>t?this.modalService.info("There are not enough ships to decommission"):l>=n?(this.navy.removeTroop(e,n),this.servicesService.getVillageService().addVillagers(n)):this.modalService.info("There are not enough housing space for sailors from decommissioned ships!"):this.modalService.info("No ship to decommission")}addBrigantines(e){this.navy.addTroop(pu.BRIGANTINE,e)}}return e.\u0275prov=re({factory:function(){return new e(Ae(Np),Ae(Qp),Ae(xp),Ae(WT),Ae(Fp),Ae(Lp))},token:e,providedIn:"root"}),e})(),zT=(()=>{class e{constructor(e,n,l,t,i,s,r,u,o,a,c,h){this.servicesService=e,this.idService=n,this.armyService=l,this.navyService=t,this.logService=i,this.calendarService=s,this.modalService=r,this.missionFactoryService=u,this.optionsService=o,this.soundService=a,this.landService=c,this.kongregateService=h,this.countries=[],this.regionsNeighbours=[],this.missions=[],this.regions=[],this.seaAreas=[],this.protection=0,this.defaultOrigin=0,this.discoveredLand=0,this.discoveredForest=0,this.discoveredMountains=0,this.x=150,this.y=-220,this.zoom=1.4,this.mapDisplayOption=0,this.showHarbours=!0,this.activeCountriesList=[],this.pathCacheSubject=new C,this.servicesService.addService(bu.WORLD,this),this.init(),this.selectedCountry=this.countries[0],this.selectedRegion=this.selectedCountry.regions[0],this.calendarService.registerForDayChange().subscribe(()=>{this.countries.filter(e=>e.id!==fu.PLAYER&&e.id!==fu.NEUTRAL).forEach(e=>{e.regions.forEach(n=>{Nu.chance((n.economy+5)*this.AI_getDifficultyMultiplier()/100)&&(n.wealth+=1),this.AI_dailyRegionAction(e,n)})}),this.seaAreas.filter(e=>e.events.length>0).map(e=>e.events[0]).forEach(e=>e.tick(this.servicesService,this,this.idService,this.logService)),this.seaAreas.forEach(e=>{e.events.length>0&&(e.events[0].time<0||e.events[0].amount<=0)&&(e.events[0]===this.selectedSeaEvent&&(this.selectedSeaEvent=null),e.events.shift())}),this.spawnSeaEvents(),this.protection>0&&(this.protection-=1),this.protection<0&&(this.protection=0)})}init(e=!0){To.REGIONS.forEach(e=>{const n=[];e.TROOPS.forEach(e=>n.push(new GR(e.troop,e.size))),this.regions.push(new ST(e.ID,e.PATH,e.CENTER,e.NEIGHBOURS,e.LAND,e.FOREST,e.MOUNTAINS,e.WEALTH,0,0,e.HARBOUR,!1,!1,!1,null,0,new BR(n)))}),this.regions[0].army=this.armyService.getArmy(),this.regions[0].navy=this.navyService.getNavy(),Object.values(To.COUNTRIES).forEach(n=>{const l=[];n.REGIONS.forEach(t=>{const i=this.regions[t];n.CAPITAL===t&&(i.capital=n.COUNTRY),l.push(i),e&&n.COUNTRY!==fu.PLAYER&&n.COUNTRY!==fu.NEUTRAL&&this.regions[t].army.addTroop(pu.ARCHER,Math.ceil(2*this.AI_getDifficultyMultiplier()))}),this.countries.push(new fT(n.COUNTRY,n.NAME,n.DIPLOMACY,n.COLOUR,n.FOCUS,l,{},n.CAPITAL))}),this.regionsNeighbours=[],Object.values(To.REGIONS).forEach(e=>{this.regionsNeighbours.push(new ET(e.ID,e.NEIGHBOURS))}),this.calendarService.registerForYearChange().subscribe(e=>{this.countries.filter(e=>e.id!==fu.PLAYER&&e.id!==fu.NEUTRAL).forEach(e=>{e.regions.length>0&&Nu.chance(To.KING_DEATH_CHANCE)&&(e.focus=Nu.randomElement([{item:mu.OFFENSE,chance:25},{item:mu.DEFENSE,chance:25},{item:mu.PEACE,chance:25},{item:mu.ECONOMY,chance:25}]),this.logService.warning(e.name+" king died. New king is known to focus on "+Ou.prepareFocusName(e.focus)))})}),this.initSeaAreas(),this.selectedRegion=this.regions[0],this.selectedCountry=this.getPlayerCountry(),this.initPlayerKingdomName()}initSeaAreas(){To.SEA_AREAS.forEach(e=>{this.seaAreas.push(new BT(e.ID,{x:e.CENTER.x,y:e.CENTER.y},e.R,[],e.NEIGHBOURS))});let e=this.seaAreas.filter(e=>-1!==e.id);Object.keys(vu).slice(Object.keys(vu).length/2).map(e=>vu[e]).forEach(n=>{const l=To.getSeaEvent(n);for(let t=0;t<l.NUMBER_INIT;t++)if(e.length>0){const t=e.filter(e=>e.r>l.FOR_RADIUS),i=t[Nu.randomBetween(0,t.length-1)];0===i.events.length&&i.events.push(new VT(i.id,this.idService.getNextId(),n,this.getRandomPointInCircle(i.center,i.r),Nu.randomBetween(l.POWER_MIN,l.POWER_MAX),Nu.randomBetween(l.TIME_MIN,l.TIME_MAX),null)),e=e.filter(e=>0===e.events.length)}})}AI_dailyRegionAction(e,n){if(null===n.target?this.AI_chooseTarget(n,e):this.AI_executeTarget(n,e),n.spy>0&&Nu.chance(n.army.getArmySize()/2e4)){n.spy-=1;const l=new VR;l.attacker=e.id,l.defender=fu.PLAYER,l.attackerArmy=BR.clone(n.army),l.defenderArmy=new BR([new GR(pu.SPY,1)]),l.skirmish.push(new WR(l.attackerArmy.getRandomUnit().troop,l.defenderArmy.getRandomUnit().troop,1,0,!0)),l.result=!0,l.armyAfterFight=l.attackerArmy,l.message="Our "+e.name+" spy has been discovered and killed!",this.logService.fightReport(l),e.decreaseDiplomacy(e.diplomacy<25?5:15)}}AI_chooseTarget(e,n){let l=10;n.regions.find(e=>e.id===n.capital)||(l=75);const t=[{item:mu.OFFENSE,chance:l},{item:mu.DEFENSE,chance:10},{item:mu.PEACE,chance:10},{item:mu.ECONOMY,chance:10}],i=t.find(e=>e.item===n.focus);i&&(i.chance=70);const s=Nu.randomElement(t);let r=OT.NONE;switch(s){case mu.ECONOMY:const l=[];let t=70-8*e.economy;t<5&&(t=5),this.getNeutralRegionsNumber()>0&&l.push({item:OT.ECONOMY_COLONIZE,chance:10}),l.push({item:OT.ECONOMY_BUILD,chance:t}),r=Nu.randomElement(l);break;case mu.DEFENSE:const i=[];e.army.getArmySize()<5*e.wealth&&i.push({item:OT.DEFENSE_ARCHER,chance:50});let s=30-4*e.defense;s<5&&(s=5),i.push({item:OT.DEFENSE_WALL,chance:s}),r=Nu.randomElement(i);break;case mu.PEACE:e.target=OT.PEACE;break;case mu.OFFENSE:const u=[{item:OT.OFFENSE_PLUNDER,chance:5},{item:OT.OFFENSE_CONQUER,chance:2}];if(e.army.getArmySize()<5*e.wealth&&u.push({item:OT.OFFENSE_SPEARMAN,chance:30},{item:OT.OFFENSE_SWORDSMAN,chance:25},{item:OT.OFFENSE_LIGHT_CAVALRY,chance:10}),this.getNeutralRegionsNumber()>0&&u.push({item:OT.OFFENSE_COLONIZE,chance:10}),!n.regions.find(e=>e.id===n.capital)&&e.army.getArmyPower(!0)>5){const l=this.findPath(e.id,n.capital,n.id,!0),t=this.missions.find(e=>e.ownerCountry===n&&e.getTargetRegionId()===n.capital);l&&!t&&u.push({item:OT.OFFENSE_RECLAIM_CAPITAL,chance:50})}r=Nu.randomElement(u)}e.target=r||OT.NONE}AI_executeTarget(e,n){switch(e.target){case OT.NONE:e.target=null;break;case OT.PEACE:Nu.chance(.1)&&(e.target=null);break;case OT.SAVE_WEALTH:e.wealth>=5*(e.economy+1)&&(e.target=null);break;case OT.ECONOMY_BUILD:e.wealth>=10*(e.economy+1)&&(e.wealth-=10*(e.economy+1),e.economy+=1,e.target=null);break;case OT.ECONOMY_COLONIZE:if(e.economy>=2){const l=this.findNeighbouringColonizableRegions(e,n);l.length?e.wealth>=40&&(this.missions.push(new IT(this.servicesService,this.idService.getNextId(),n,new BR([new GR(pu.COLONIST,15)]),this.findPath(e.id,l[0],n.id))),e.wealth-=40,e.target=null):e.target=null}else e.target=null;break;case OT.DEFENSE_WALL:if(e.economy<=e.defense||e.defense>=7){e.target=null;break}e.wealth>=20*(e.defense+1)&&(e.wealth-=20*(e.defense+1),e.defense+=1,e.target=null);break;case OT.DEFENSE_ARCHER:this.AI_hireTroop(e,pu.ARCHER);break;case OT.DEFENSE_GUARD_TOWER:e.target=null;break;case OT.OFFENSE_SPEARMAN:this.AI_hireTroop(e,pu.SPEARMAN);break;case OT.OFFENSE_SWORDSMAN:this.AI_hireTroop(e,pu.SWORDSMAN);break;case OT.OFFENSE_LIGHT_CAVALRY:this.AI_hireTroop(e,pu.LIGHT_CAVALRY);break;case OT.OFFENSE_COLONIZE:if(e.army.getArmyPower(!0)>=20){const l=this.findNeighbouringColonizableRegions(e,n);l.length?e.wealth>=20&&(this.missions.push(new IT(this.servicesService,this.idService.getNextId(),n,new BR([new GR(pu.COLONIST,15)]),this.findPath(e.id,l[0],n.id))),e.wealth-=20,e.target=null):e.target=null}else e.target=null;break;case OT.OFFENSE_PLUNDER:if(e.army.getArmyPower(!0)>20){const l=this.findNeighbouringAttackableRegions(e,n,!0);l.length>0?(this.missions.push(new AT(this.servicesService,this.idService.getNextId(),n,this.AI_prepareArmy(e.army),this.findPath(e.id,l[0],n.id))),this.getRegion(l[0]).lastAttack=this.calendarService.getAbsoluteDay(),this.getCountryByRegionId(l[0]).id===fu.PLAYER&&(this.logService.warning("Incoming invasion!"),this.soundService.playBattle())):e.target=null}else e.target=null;break;case OT.OFFENSE_CONQUER:if(e.army.getArmyPower(!0)>20){const l=this.findNeighbouringAttackableRegions(e,n,!1).filter(e=>0!==e).filter(n=>this.getRegion(n).army.getArmyPower(!1)<1.5*e.army.getArmyPower(!0));l.length>0?(this.missions.push(new bT(this.servicesService,this.idService.getNextId(),n,this.AI_prepareArmy(e.army),this.findPath(e.id,l[0],n.id))),this.getRegion(l[0]).lastAttack=this.calendarService.getAbsoluteDay(),this.getCountryByRegionId(l[0]).id===fu.PLAYER&&(this.logService.warning("Incoming invasion!"),this.soundService.playBattle())):e.target=null}else e.target=null;e.target=null;break;case OT.OFFENSE_RECLAIM_CAPITAL:if(n.regions.find(l=>l.id===n.capital&&e.army.getArmyPower(!0)>5))e.target=null;else{const l=this.findPath(e.id,n.capital,n.id,!1),t=this.missions.find(e=>e.ownerCountry===n&&e.getTargetRegionId()===n.capital);l&&!t?this.missions.push(new bT(this.servicesService,this.idService.getNextId(),n,this.AI_prepareArmy(e.army),l)):e.target=null}e.target=null}}AI_hireTroop(e,n){const l=fo.getTroop(n).AI_COST;e.wealth>=l&&(e.wealth-=l,e.army.addTroop(n,1),e.target=null)}AI_getDifficultyMultiplier(){let e=1;switch(this.optionsService.getOption(_p.AI_DIFFICULTY)){case Lu.EASY:e=.5;break;case Lu.MEDIUM:e=1;break;case Lu.HARD:e=2}return e}getName(){return"WorldService"}load(e){e.regions||e.countries?(e.regions.forEach(e=>{const n=this.regions[e.id];n.wealth=e.wealth,n.economy=e.economy,n.defense=e.defense,n.defense=null!==e.defense&&e.defense,n.target=e.target,n.land=e.land,n.forest=e.forest,n.mountains=e.mountains,n.spy=e.spy,n.harbour=void 0!==e.harbour?e.harbour:void 0!==To.REGIONS.find(e=>e.ID===n.id)&&To.REGIONS.find(e=>e.ID===n.id).HARBOUR,n.roads=void 0!==e.roads&&e.roads,n.watchtower=void 0!==e.watchtower&&e.watchtower,n.watched=void 0!==e.watched&&e.watched,n.capital=e.capital,n.lastAttack=void 0!==e.lastAttack?e.lastAttack:0,n.army=new BR([]),n.navy=new BR([]),e.army.forEach(e=>{n.army.addTroop(e.troop,e.size)}),e.navy&&e.navy.forEach(e=>{n.navy.addTroop(e.troop,e.size)})}),this.seaAreas.forEach(e=>{e.events=[]}),void 0!==e.seaEvents&&e.seaEvents.forEach(e=>{const n=this.seaAreas.find(n=>n.id===e.parentId);n&&(n.events=[],n.events.push(new VT(n.id,e.id,e.type,e.center,e.amount,e.time,e.data)))}),this.selectedCountry=null===this.selectedCountry?null:this.getCountry(this.selectedCountry.id),e.countries.forEach(e=>{const n=this.getCountry(e.id);n.diplomacy=e.diplomacy,n.focus=e.country,n.capital=void 0!==e.capital?e.capital:To.COUNTRIES.find(e=>e.COUNTRY===n.id).CAPITAL,n.regions=[],e.regions.forEach(e=>{n.regions.push(this.regions[e])}),n.data=e.data}),this.missions=[],e.missions.forEach(e=>{const n=this.missionFactoryService.loadMission(JSON.parse(e));null!==n&&this.missions.push(n)}),this.missions.forEach(e=>{e.army=new BR(e.army.units.filter(e=>e.troop!==pu.GUARD_TOWER))}),this.defaultOrigin=e.defaultOrigin,this.discoveredLand=void 0!==e.discoveredLand?e.discoveredLand:0,this.discoveredForest=void 0!==e.discoveredForest?e.discoveredForest:0,this.discoveredMountains=void 0!==e.discoveredMountains?e.discoveredMountains:0,this.getPlayerCountry().name=e.playerNationName,this.x=e.x,this.y=e.y,this.zoom=e.zoom,this.mapDisplayOption=void 0!==e.mapDisplayOption?e.mapDisplayOption:0,this.regions[0].army=this.armyService.getArmy(),this.regions[0].navy=this.navyService.getNavy(),this.protection=void 0!==e.protection?e.protection:0):this.reset(!1,!1)}reset(e,n){const l=this.getPlayerCountry().name,t=[],i=this.seaAreas;(e||n)&&(this.discoveredLand=0,this.discoveredForest=0,this.discoveredMountains=0),e||n||this.countries.forEach(e=>{t.push([e.id,e.regions.map(e=>e.id)])}),this.countries=[],this.regionsNeighbours=[],this.missions=[],this.regions=[],this.seaAreas=[],this.defaultOrigin=0,this.selectedRegion=null,this.selectedCountry=null,this.selectedMission=null,this.selectedSeaEvent=null,this.x=150,this.y=-220,this.zoom=1.4,this.mapDisplayOption=0,this.protection=0,this.init(!1),e||n||this.seaAreas.forEach(e=>{const n=i.find(n=>n.id===e.id);n&&(e.events=n.events)}),this.regions[0].army=this.armyService.getArmy(),this.regions[0].navy=this.navyService.getNavy(),e?this.initPlayerKingdomName():this.getPlayerCountry().name=l,this.countries.forEach(e=>{const n=t.find(n=>n[0]===e.id);n&&(e.regions=[],n[1].forEach(n=>{const l=this.getRegion(n);e.regions.push(l),e.id===fu.PLAYER&&0!==l.id&&(this.landService.increaseLand(l.land,!0),this.landService.increaseForest(l.forest,!1),this.landService.increaseMountains(l.mountains)),e.id!==fu.PLAYER&&e.id!==fu.NEUTRAL&&this.regions[n].army.addTroop(pu.ARCHER,Math.ceil(2*this.AI_getDifficultyMultiplier()))}))})}save(){const e=[];this.countries.forEach(n=>{const l=[];n.regions.forEach(e=>{l.push(e.id)}),e.push({id:n.id,diplomacy:n.diplomacy,focus:n.focus,regions:l,data:n.data,capital:n.capital})});const n=[];this.regions.forEach(e=>{const l=[],t=[];0!==e.id&&e.army.units.forEach(e=>{l.push({troop:e.troop,size:e.size})}),0!==e.id&&e.navy.units.forEach(e=>{t.push({troop:e.troop,size:e.size})}),n.push({id:e.id,wealth:e.wealth,economy:e.economy,defense:e.defense,harbour:e.harbour,target:e.target,land:e.land,forest:e.forest,mountains:e.mountains,spy:e.spy,capital:e.capital,army:l,navy:t,roads:e.roads,watchtower:e.watchtower,watched:e.watched,lastAttack:e.lastAttack})});const l=[];this.missions.forEach(e=>{l.push(JSON.stringify(e))});const t=[];return this.seaAreas.forEach(e=>{e.events.length>0&&t.push(e.events[0])}),{countries:e,regions:n,seaEvents:t,missions:l,defaultOrigin:this.defaultOrigin,discoveredLand:this.discoveredLand,discoveredForest:this.discoveredForest,discoveredMountains:this.discoveredMountains,playerNationName:this.getPlayerCountry().name,protection:this.protection,x:this.x,y:this.y,zoom:this.zoom,mapDisplayOption:this.mapDisplayOption}}getCountries(){return this.countries}getMissions(){return this.missions}getPlayerLandMissions(){return this.missions.filter(e=>e.getMissionType()===vT.LAND&&e.ownerCountry.id===fu.PLAYER)}getPlayerSeaMissions(){return this.missions.filter(e=>e.getMissionType()===vT.SEA&&e.ownerCountry.id===fu.PLAYER)}setSelectedCountry(e){this.selectedCountry=e,this.selectedMission=null,this.selectedSeaEvent=null}getSelectedCountry(){return this.selectedCountry}setSelectedRegion(e){this.selectedRegion=e,this.selectedMission=null,this.selectedSeaEvent=null}getSelectedRegion(){return this.selectedRegion}setSelectedMission(e){this.selectedCountry=null,this.selectedRegion=null,this.selectedSeaEvent=null,this.selectedMission=e}getSelectedMission(){return this.selectedMission}registerForCacheInvalidation(){return this.pathCacheSubject.asObservable()}tick(e){this.missions.forEach(e=>{e.tick()}),this.missions=this.missions.filter(e=>!e.isFinished()),this.missions.includes(this.getSelectedMission())||(this.selectedMission=null)}getRegionNeighbours(e,n){const l=this.regionsNeighbours.find(n=>n.id===e),t=[];return l&&l.neighbours.forEach(n?e=>{t.push(e)}:n=>{e>=0&&n>=0&&t.push(n)}),t}findPath(e,n,l,t=!1){let i=!0;if(e===n)return new TT([e]);let s=Number.MAX_SAFE_INTEGER;const r=new Array(this.regions.length).fill(Number.MAX_SAFE_INTEGER);let u=[],o=[];const a=[];for(u.push(new TT([e]));u.length>0||o.length>0;){for(const e of u){const u=this.getCountryByRegionId(e.path[e.path.length-1]);if(l===fu.SPECIAL||u.id===l||u.id===fu.NEUTRAL||i){const l=this.getRegionNeighbours(e.path[e.path.length-1],!1).filter(n=>!e.path.includes(n));for(const i of l){const l=new TT(e.path.slice().concat([i]));if(l.calculatePathDistance(this)<=r[i]&&(r[i]=l.calculatePathDistance(this),r[i]<=s))if(i===n){if(t)return l;r[i]<s&&(s=r[i]),a.push(l)}else o.push(l)}}}i=!1,u=o,o=[]}return 0===a.length?null:a.sort((e,n)=>e.distance-n.distance)[0]}addMission(e){this.missions.push(e)}getCountry(e){return this.countries.find(n=>n.id===e)}getCountryByRegionId(e){let n=null;return this.countries.forEach(l=>{l.regions.find(n=>n.id===e)&&(n=l)}),n}getRegion(e){return this.regions[e]}ownRegion(e,n){const l=this.getCountryByRegionId(e);if(l.id!==n.id){const t=l.regions.findIndex(n=>n.id===e);if(void 0!==t){const e=l.regions.splice(t,1)[0];n.regions.push(e),this.selectedRegion&&this.selectedRegion.id===e.id&&(this.selectedCountry=this.getCountryByRegionId(this.selectedRegion.id)),n.id===fu.PLAYER?(this.landService.increaseLand(e.land,!0),this.landService.increaseForest(e.forest,!1),this.landService.increaseMountains(e.mountains),e.spy=0):e.id===this.defaultOrigin&&(this.defaultOrigin=0),this.activeCountriesList=[],this.pathCacheSubject.next()}}this.regions.forEach(e=>{e.watched=!1}),this.regions.filter(e=>""!==e.path).forEach(e=>{this.getCountryByRegionId(e.id).id===fu.PLAYER&&e.watchtower&&e.neighbours.forEach(e=>{e>=0&&(this.getRegion(e).watched=!0)})})}findSeaPath(e,n,l=!1){let t=!0;if(e===n)return new TT([e]);if(void 0===this.getSeaArea(e)||void 0===n)return null;let i=Number.MAX_SAFE_INTEGER;const s=[];this.seaAreas.forEach(e=>s.push({id:e.id,cost:Number.MAX_SAFE_INTEGER}));let r=[],u=[];const o=[];for(r.push(new TT([e]));r.length>0||u.length>0;){for(const e of r){const t=this.getSeaArea(e.path[e.path.length-1]);if(0===t.events.length||t.events[0].type!==vu.PIRATES&&t.events[0].type!==vu.PIRATES_BASE&&t.events[0].type!==vu.WHIRLPOOL){const t=this.getSeaArea(e.path[e.path.length-1]).neighbours.filter(n=>!e.path.includes(n));for(const r of t){const t=new TT(e.path.slice().concat([r]));if(t.calculateSeaPathDistance(this)<=s.find(e=>e.id===r).cost&&(s.find(e=>e.id===r).cost=t.calculateSeaPathDistance(this),s.find(e=>e.id===r).cost<=i))if(r===n){if(l)return t;s.find(e=>e.id===r).cost<i&&(i=s.find(e=>e.id===r).cost),o.push(t)}else u.push(t)}}}t=!1,r=u,u=[]}return 0===o.length?null:o.sort((e,n)=>e.distance-n.distance)[0]}clearMission(){this.selectedMission=null}canColonize(e){return!this.missions.find(n=>n.getMissionType()===vT.LAND&&n.getDestinationTargetRegion().id===e&&n.mission===cu.COLONIZE)}getPlayerCountry(){return this.countries[0]}getDefaultOriginRegion(){return this.getRegion(this.getDefaultOrigin())}getDefaultOriginRegionCountry(){return this.getCountryByRegionId(this.getDefaultOrigin())}getDefaultOrigin(){return this.defaultOrigin}setDefaultOrigin(e){this.defaultOrigin=e}getStationedArmies(){const e=[];return this.countries[0].regions.filter(e=>0!==e.id&&e.army.getArmySize()>0).forEach(n=>e.push(n.army)),this.countries[1].regions.filter(e=>e.army.getArmySize()>0).forEach(n=>e.push(n.army)),e}getStationedNavy(){const e=[];return this.countries[0].regions.filter(e=>0!==e.id&&e.navy.getArmySize()>0).forEach(n=>e.push(n.navy)),this.countries[1].regions.filter(e=>e.navy.getArmySize()>0).forEach(n=>e.push(n.navy)),e}getDisplayX(){return this.x}getDisplayY(){return this.y}getDisplayZoom(){return this.zoom}setDisplayX(e){this.x=e}setDisplayY(e){this.y=e}setDisplayZoom(e){this.zoom=e}getCountriesList(){return 0===this.activeCountriesList.length&&(this.activeCountriesList.push(fu[fu.NONE]),this.countries.filter(e=>e.id!==fu.PLAYER&&e.id!==fu.NEUTRAL&&e.regions.length>0).forEach(e=>this.activeCountriesList.push(fu[e.id]))),this.activeCountriesList}getNeutralRegionsNumber(){return this.getCountry(fu.NEUTRAL).regions.length}buildRegionBuilding(e){this.missions.push(new _T(this.servicesService,this.idService.getNextId(),this.getPlayerCountry(),new BR([]),new TT([this.getSelectedRegion().id,this.getSelectedRegion().id]),0,1,"{mission}",e))}changeName(){this.modalService.open(Pu.INPUT),this.modalService.setModalText("Specify your nation name"),this.modalService.setModalValue(this.getPlayerCountry().name);const e=this.modalService.registerForValueResponse().subscribe(n=>{e.unsubscribe(),null!==n&&(this.getPlayerCountry().name=n)})}findNeighbouringAttackableRegions(e,n,l){const t=[],i=[];return n.regions.forEach(s=>{s.neighbours.filter(e=>e>=0).forEach(s=>{const r=this.getCountryByRegionId(s);if(n.id!==r.id&&r.id!==fu.NEUTRAL){if((r.id===fu.PLAYER&&n.diplomacy<25||r.id!==fu.PLAYER)&&this.findPath(e.id,s,n.id,!0)){let e=30;r.id===fu.PLAYER&&(e=90/this.AI_getDifficultyMultiplier()),this.calendarService.getAbsoluteDay()-this.getRegion(s).lastAttack>=e&&(r.id===fu.PLAYER&&n.diplomacy<-25&&this.protection<=0?t.includes(s)||t.push(s):i.includes(s)||i.push(s))}}else if(l&&r.id===fu.NEUTRAL&&this.getRegion(s).army.hasAny()&&n.diplomacy<25&&this.findPath(e.id,s,n.id,!0)){const e=30;this.calendarService.getAbsoluteDay()-this.getRegion(s).lastAttack>=e&&(t.includes(s)||t.push(s))}})}),this.shuffleArray(t.length>0?t:i)}findNeighbouringColonizableRegions(e,n){const l=[];return n.regions.forEach(t=>{t.neighbours.filter(e=>e>=0).forEach(t=>{this.getCountryByRegionId(t).id===fu.NEUTRAL&&!this.getRegion(t).army.hasAny()&&this.canColonize(t)&&this.findPath(e.id,t,n.id,!0)&&(l.includes(t)||l.push(t))})}),this.shuffleArray(l)}shuffleArray(e){let n,l,t;for(t=e.length-1;t>0;t--)n=Math.floor(Math.random()*(t+1)),l=e[t],e[t]=e[n],e[n]=l;return e}getMapDisplayOption(){return this.mapDisplayOption}setMapDisplayOption(e){this.mapDisplayOption=e}DEV_calculateTotalLand(){let e=0,n=0,l=0;this.regions.forEach(t=>{8!==t.id&&9!==t.id&&10!==t.id&&11!==t.id&&12!==t.id&&(e+=t.land,n+=t.forest,l+=t.mountains)}),this.logService.success("Land report<br>Land: "+e+"<br>Forest: "+n+"<br>Mountains: "+l+"<br><br>Total: "+(e+n+l))}AI_prepareArmy(e){const n=new BR([]);return e.units.forEach(l=>{l.troop!==pu.MILITIA&&l.troop!==pu.GUARD_TOWER&&(n.addTroop(l.troop,l.size),e.removeTroop(l.troop,l.size))}),e.removeEmptyUnits(),n}initPlayerKingdomName(){this.kongregateService.isAvailable()&&!this.kongregateService.isGuest()&&(this.getPlayerCountry().name=this.kongregateService.getUsername()+"'s nation")}setSelectedSeaEvent(e){this.selectedSeaEvent=e,this.selectedRegion=null,this.selectedCountry=null,this.selectedMission=null}getSelectedSeaEvent(){return this.selectedSeaEvent}getRandomPointInCircle(e,n){if(n<10)return e;{const l=(n-10)*Math.sqrt(Math.random()),t=Math.random()*Math.PI*2;return{x:l*Math.cos(t)+e.x,y:l*Math.sin(t)+e.y}}}getShowHarbours(){return this.showHarbours}setShowHarbours(e){this.showHarbours=e}calculatePointsDistance(e,n){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}getSeaAreas(){return this.seaAreas}getSeaArea(e){return this.seaAreas.find(n=>n.id===e)}spawnSeaEvents(){const e=this.seaAreas.filter(e=>-1!==e.id);Object.keys(vu).slice(Object.keys(vu).length/2).map(e=>vu[e]).forEach(n=>{const l=To.getSeaEvent(n);let t=0;this.getSeaAreas().forEach(e=>{e.events.length>0&&e.events[0].type===n&&(t+=1)});const i=e.filter(e=>e.r>l.FOR_RADIUS&&0===e.events.length);if(i.length>0){let e=!1;if((t<l.NUMBER_MIN||t<l.NUMBER_MAX&&Nu.chance(l.SPAWN_CHANCE-t*l.SPAWN_DECREASE))&&(e=!0),e){const e=i[Nu.randomBetween(0,i.length-1)];0===e.events.length&&e.events.push(new VT(e.id,this.idService.getNextId(),n,this.getRandomPointInCircle(e.center,e.r),Nu.randomBetween(l.POWER_MIN,l.POWER_MAX),Nu.randomBetween(l.TIME_MIN,l.TIME_MAX),null))}}})}ROYAL_spawnPositiveSeaEvents(){const e=this.seaAreas.filter(e=>-1!==e.id&&0===e.events.length),n=[];for(let l=0;l<4;l++)n.push(Nu.randomArrayElement([vu.TREASURE,vu.FISH,vu.SHARK,vu.CARTOGRAPHY]));n.forEach(n=>{const l=To.getSeaEvent(n);let t=0;this.getSeaAreas().forEach(e=>{e.events.length>0&&e.events[0].type===n&&(t+=1)});const i=e.filter(e=>e.r>l.FOR_RADIUS&&0===e.events.length);if(i.length>0){const e=i[Nu.randomBetween(0,i.length-1)];0===e.events.length&&e.events.push(new VT(e.id,this.idService.getNextId(),n,this.getRandomPointInCircle(e.center,e.r),Nu.randomBetween(l.POWER_MIN,l.POWER_MAX),Nu.randomBetween(l.TIME_MIN,l.TIME_MAX),null)),this.logService.success("New sea event: "+Ou.prepareSeaEventName(n))}})}getDiscoveredLand(){return this.discoveredLand}increaseDiscoveredLand(e){this.discoveredLand+=e}getDiscoveredForest(){return this.discoveredForest}increaseDiscoveredForest(e){this.discoveredForest+=e}getDiscoveredMountains(){return this.discoveredMountains}increaseDiscoveredMountains(e){this.discoveredMountains+=e}getTotalDiscovered(){return this.discoveredLand+this.discoveredForest+this.discoveredMountains}setPlayerColour(e){this.getPlayerCountry().colour=e}isProtected(){return this.protection>0}addProtection(e){this.protection+=e}getProtection(){return this.protection}hasPiratesBase(){return this.getSeaAreas().find(e=>e.events.length>0&&e.events[0].type===vu.PIRATES_BASE)}}return e.\u0275prov=re({factory:function(){return new e(Ae(Np),Ae(lE),Ae(YR),Ae(YT),Ae(xp),Ae(Lp),Ae(Fp),Ae(GT),Ae(wp),Ae(Dp),Ae(WE),Ae(Wp))},token:e,providedIn:"root"}),e})();class $T{constructor(e,n,l,t,i,s,r){this.originRegion=e,this.originRegionColour=n,this.targetRegion=l,this.targetRegionColour=t,this.targetRegionCountry=i,this.targetSeaEvent=s,this.missionType=r}}class KT{constructor(e,n,l,t,i){this.servicesService=e,this.worldService=n,this.gameService=l,this.resourcesService=t,this.modalService=i,this.selecting=!1,this.regionSelected=new Ii,this.dragX=-1,this.dragY=-1,this.clickX=-1,this.clickY=-1,this.moved=!1,this.selectedSeaRegion=null,this.radio=0,this.showHarbours=!0,this.pathCache=[],this.countries=fu,this.seaEvents=vu,this.missions=cu,this.missionType=vT,this.troops=pu,this.worldService.registerForCacheInvalidation().subscribe(e=>{this.pathCache=[]}),this.radio=this.worldService.getMapDisplayOption()}ngOnInit(){}getX(){return this.worldService.getDisplayX()}getY(){return this.worldService.getDisplayY()}getZoom(){return this.worldService.getDisplayZoom()}getCountries(){return this.worldService.getCountries()}getMissions(){return this.worldService.getMissions()}handleKeyDown(e){"ArrowDown"===e.key&&this.worldService.setDisplayY(this.worldService.getDisplayY()+5)}dragStart(e){this.moved=!1,this.dragX=e.x,this.dragY=e.y,this.clickX=e.x,this.clickY=e.y}mousemove(e){1===e.buttons&&this.dragX>=1&&this.dragY>=1&&(this.moved=!0,this.worldService.setDisplayX(this.worldService.getDisplayX()+e.x-this.dragX),this.worldService.setDisplayY(this.worldService.getDisplayY()+e.y-this.dragY),this.dragX=e.x,this.dragY=e.y)}dragEnd(e){this.moved&&this.dragX>=0&&this.dragY>=0&&(this.worldService.setDisplayX(this.worldService.getDisplayX()+e.x-this.dragX),this.worldService.setDisplayY(this.worldService.getDisplayY()+e.y-this.dragY)),this.dragX=-1,this.dragY=-1}onScroll(e){e.preventDefault(),(e.deltaY>0&&this.getZoom()<2.5||e.deltaY<0&&this.getZoom()>.7)&&this.worldService.setDisplayZoom(this.getZoom()+Math.sign(e.deltaY)/10),this.getZoom()<.7?this.worldService.setDisplayZoom(.7):this.getZoom()>2.5&&this.worldService.setDisplayZoom(2.5)}prepareViewbox(e){return e.x-65+" "+(e.y-65)+" 130 130"}resetView(){this.worldService.setDisplayZoom(1.4),this.worldService.setDisplayX(150),this.worldService.setDisplayY(-220)}select(e,n,l){Math.abs(e.x-this.clickX)<2&&Math.abs(e.y-this.clickY)<2&&(this.clickX=-1,this.clickY=-1,this.worldService.setSelectedRegion(l),this.worldService.setSelectedCountry(n))}moveUp(){this.worldService.setDisplayY(this.getY()-20)}moveDown(){this.worldService.setDisplayY(this.getY()+20)}moveRight(){this.worldService.setDisplayX(this.getX()+20)}moveLeft(){this.worldService.setDisplayX(this.getX()-20)}plunder(){this.modalService.open(Pu.MISSION),this.modalService.setMissionData(new $T(this.worldService.getDefaultOriginRegion(),this.worldService.getDefaultOriginRegionCountry().colour,this.worldService.getSelectedRegion(),this.worldService.getSelectedCountry().colour,this.worldService.getSelectedCountry().id,null,cu.PLUNDER))}conquer(){this.modalService.open(Pu.MISSION),this.modalService.setMissionData(new $T(this.worldService.getDefaultOriginRegion(),this.worldService.getDefaultOriginRegionCountry().colour,this.worldService.getSelectedRegion(),this.worldService.getSelectedCountry().colour,this.worldService.getSelectedCountry().id,null,cu.CONQUER))}colonize(){this.modalService.open(Pu.MISSION),this.modalService.setMissionData(new $T(this.worldService.getRegion(0),this.worldService.getPlayerCountry().colour,this.worldService.getSelectedRegion(),this.worldService.getSelectedCountry().colour,this.worldService.getSelectedCountry().id,null,cu.COLONIZE))}move(){this.modalService.open(Pu.MISSION),this.modalService.setMissionData(new $T(this.worldService.getSelectedRegion(),this.worldService.getSelectedCountry().colour,null,null,null,null,cu.MOVE))}spy(){this.modalService.open(Pu.MISSION),this.modalService.setMissionData(new $T(this.worldService.getDefaultOriginRegion(),this.worldService.getDefaultOriginRegionCountry().colour,this.worldService.getSelectedRegion(),this.worldService.getSelectedCountry().colour,this.worldService.getSelectedCountry().id,null,cu.SPY))}seaMove(){this.modalService.open(Pu.MISSION),this.modalService.setMissionData(new $T(this.worldService.getSelectedRegion(),this.worldService.getSelectedCountry().colour,null,null,null,null,cu.SEA_MOVE))}seaPlunder(){this.modalService.open(Pu.MISSION),this.modalService.setMissionData(new $T(this.worldService.getDefaultOriginRegion(),this.worldService.getDefaultOriginRegionCountry().colour,this.worldService.getSelectedRegion(),this.worldService.getSelectedCountry().colour,this.worldService.getSelectedCountry().id,null,cu.SEA_PLUNDER))}seaConquer(){this.modalService.open(Pu.MISSION),this.modalService.setMissionData(new $T(this.worldService.getDefaultOriginRegion(),this.worldService.getDefaultOriginRegionCountry().colour,this.worldService.getSelectedRegion(),this.worldService.getSelectedCountry().colour,this.worldService.getSelectedCountry().id,null,cu.SEA_CONQUER))}fishing(){this.modalService.open(Pu.MISSION),this.modalService.setMissionData(new $T(this.worldService.getDefaultOriginRegion(),this.worldService.getDefaultOriginRegionCountry().colour,null,null,null,this.worldService.getSelectedSeaEvent(),cu.FISHING))}hunting(){this.modalService.open(Pu.MISSION),this.modalService.setMissionData(new $T(this.worldService.getDefaultOriginRegion(),this.worldService.getDefaultOriginRegionCountry().colour,null,null,null,this.worldService.getSelectedSeaEvent(),cu.HUNTING))}treasure(){this.modalService.open(Pu.MISSION),this.modalService.setMissionData(new $T(this.worldService.getDefaultOriginRegion(),this.worldService.getDefaultOriginRegionCountry().colour,null,null,null,this.worldService.getSelectedSeaEvent(),cu.TREASURE))}cartography(){this.modalService.open(Pu.MISSION),this.modalService.setMissionData(new $T(this.worldService.getDefaultOriginRegion(),this.worldService.getDefaultOriginRegionCountry().colour,null,null,null,this.worldService.getSelectedSeaEvent(),cu.CARTOGRAPHY))}seaBattle(){this.modalService.open(Pu.MISSION),this.modalService.setMissionData(new $T(this.worldService.getDefaultOriginRegion(),this.worldService.getDefaultOriginRegionCountry().colour,null,null,null,this.worldService.getSelectedSeaEvent(),cu.SEA_BATTLE))}expedition(){this.modalService.open(Pu.MISSION),this.modalService.setMissionData(new $T(this.worldService.getDefaultOriginRegion(),this.worldService.getDefaultOriginRegionCountry().colour,null,null,null,null,cu.EXPEDITION))}isDev(){return!Qu.production}getNeighbours(e){const n=[];return this.getCountries().forEach(l=>{l.regions.forEach(l=>{e.neighbours.includes(l.id)&&n.push(l)})}),n}selectMission(e){this.worldService.setSelectedMission(e)}findPath(e,n,l){const t=this.worldService.findPath(e,n,l,!0);return t?t.path.length-1:-1}hasPath(e,n,l=fu.PLAYER,t=!1){if(t)return this.findPath(e,n,l)>=0;{const t=this.pathCache.find(l=>l[0]===e&&l[1]===n);if(t)return t[2];const i=this.findPath(e,n,l)>=0;return this.pathCache.push([e,n,i]),i}}getSelectedRegion(){return this.worldService.getSelectedRegion()}getSelectedCountry(){return this.worldService.getSelectedCountry()}getSelectedMission(){return this.worldService.getSelectedMission()}getTroopName(e){return Ou.prepareTroopName(e)}getMissionName(){return Ou.prepareMissionName(this.getSelectedMission().mission)}canColonize(){return this.worldService.canColonize(this.getSelectedRegion().id)}zoomIn(){this.getZoom()>.7&&(this.worldService.setDisplayZoom(this.getZoom()-.1),this.getZoom()<.7&&this.worldService.setDisplayZoom(.7))}zoomOut(){this.getZoom()<2.5&&(this.worldService.setDisplayZoom(this.getZoom()+.1),this.getZoom()>2.5&&this.worldService.setDisplayZoom(2.5))}getDefaultOrigin(){return this.worldService.getDefaultOrigin()}setDefaultOrigin(e){this.worldService.setDefaultOrigin(e)}getTarget(e){return OT[e]}build(){this.worldService.getMissions().find(e=>e.mission===cu.BUILD&&e.getDestinationTargetRegion().id===this.getSelectedRegion().id)?this.modalService.info("Building already in progress"):(this.modalService.open(Pu.WORLD_BUILD),this.modalService.setWorldRegion(this.getSelectedRegion()))}getFirstFourUnits(e){return e.length>4?e.filter(e=>e.troop===pu.MILITIA||e.troop===pu.ARCHER||e.troop===pu.SPEARMAN||e.troop===pu.SWORDSMAN).sort((e,n)=>e.troop-n.troop):e.filter(e=>e.troop!==pu.GUARD_TOWER).sort((e,n)=>e.troop-n.troop)}getSecondFourUnits(e){if(e.length>4)return e.filter(e=>e.troop===pu.LIGHT_CAVALRY||e.troop===pu.HORSE_ARCHER).sort((e,n)=>e.troop-n.troop)}changeName(){this.worldService.changeName()}calculateTotalLand(){this.worldService.DEV_calculateTotalLand()}updateMapDisplayOption(){this.worldService.setMapDisplayOption(this.radio),this.worldService.setShowHarbours(this.showHarbours)}cancel(){this.modalService.open(Pu.CONFIRM),this.modalService.setModalText("Are you sure you want to cancel this mission?");const e=this.modalService.registerForConfirmation().subscribe(n=>{e.unsubscribe(),n&&this.getSelectedMission().cancel()})}canCancel(){const e=this.getSelectedMission();return e.canCancel()&&"traveling"===e.status}getSeaAreas(){return this.worldService.getSeaAreas()}getSeaArea(e){return this.worldService.getSeaAreas().find(n=>n.id===e)}selectArea(e){this.selectedSeaRegion=e}getSeaEventIconPath(e){let n;switch(e){case vu.FISH:n="fish";break;case vu.SHARK:n="shark";break;case vu.TREASURE:n="treasure";break;case vu.PIRATES:n="pirate_flag";break;case vu.PIRATES_BASE:n="pirates_base";break;case vu.WHIRLPOOL:n="whirlpool";break;case vu.CARTOGRAPHY:n="sextant"}return"assets/sea/"+n+".svg"}selectSeaEvent(e){this.worldService.setSelectedSeaEvent(e)}getSelectedSeaEvent(){return this.worldService.getSelectedSeaEvent()}getSeaEventName(){return Ou.prepareSeaEventName(this.getSelectedSeaEvent().type)}getShowHarbours(){return this.worldService.getShowHarbours()}getHarbour(e){return To.SEA_AREAS.find(n=>n.ID===e)}hasSeaPath(e,n){return!!this.worldService.findSeaPath(e,n,!0)}DEV_changeToPirate(){this.getSelectedSeaEvent().type=vu.PIRATES,this.getSelectedSeaEvent().data=new BR([new GR(pu.BOAT,1)])}hasMap(){return 0===this.resourcesService.hasResource(su.MAP,1,"Expedition",!0)}isSeaEnabled(){return this.gameService.isEnabled(ou.NAVY)}isSeaCartographyEnabled(){return this.gameService.isEnabled(ou.CARTOGRAPHER)}getMissionCargo(){return this.getSelectedMission().army.getArmyCargo()}roundEffectiveSpeed(){return Ou.round(this.getSelectedMission().getArmyEffectiveSpeed(),2)}DEV_deleteSeaEvent(e){this.worldService.getSeaArea(e.parentId).events=[]}DEV_clearSeaEventData(){this.getSelectedSeaEvent().data=new BR([])}getGuardTowersCount(){const e=this.getSelectedRegion().army.getUnit(pu.GUARD_TOWER);return void 0===e?0:e.size}}var jT=Kl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{width:100%;height:100%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#details[_ngcontent-%COMP%]{margin:5px 5px 0;width:98%;height:152px;border:2px solid #000}#details.selecting[_ngcontent-%COMP%]{height:117px}#svg[_ngcontent-%COMP%]{position:relative;margin:5px;width:98%;height:70.5%;border:2px solid #000}#kingdomName[_ngcontent-%COMP%]{font-weight:700}#mainMap[_ngcontent-%COMP%]{background-color:#86c5da}#target[_ngcontent-%COMP%]{top:25px}#arrowUp[_ngcontent-%COMP%], #target[_ngcontent-%COMP%]{position:absolute;width:30px;right:30px;cursor:pointer}#arrowUp[_ngcontent-%COMP%]{top:0}#arrowDown[_ngcontent-%COMP%]{position:absolute;width:30px;top:50px;right:30px;cursor:pointer}#arrowRight[_ngcontent-%COMP%]{right:5px}#arrowLeft[_ngcontent-%COMP%], #arrowRight[_ngcontent-%COMP%]{position:absolute;width:30px;top:25px;cursor:pointer}#arrowLeft[_ngcontent-%COMP%]{right:55px}#plus[_ngcontent-%COMP%]{right:50px}#minus[_ngcontent-%COMP%], #plus[_ngcontent-%COMP%]{position:absolute;width:25px;top:80px;cursor:pointer}#minus[_ngcontent-%COMP%]{right:15px}#options[_ngcontent-%COMP%]{position:absolute;top:5px;right:90px;cursor:pointer}#options[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-block;width:100px;text-align:end;cursor:pointer}#options2[_ngcontent-%COMP%]{position:absolute;top:5px;right:220px;cursor:pointer}#options2[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-block;width:150px;text-align:end;cursor:pointer}.mission[_ngcontent-%COMP%]{cursor:pointer}svg[_ngcontent-%COMP%]{height:100%;width:100%}.region[_ngcontent-%COMP%]:hover{opacity:.7}#regionDetails[_ngcontent-%COMP%]{display:flex;flex-direction:row}#regionDetails[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-right:10px}#missionDetails[_ngcontent-%COMP%]{display:flex;flex-direction:column}#missionTitle[_ngcontent-%COMP%]{font-size:1.1em;font-weight:bolder;text-align:center;padding-bottom:5px}#missionBody[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-left:5px}app-progress-bar[_ngcontent-%COMP%]{margin-top:3px;margin-left:5px;display:inline-block;width:150px;height:15px;font-size:.7em}#missionStatus[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-bottom:2px}#missionStats[_ngcontent-%COMP%]{display:flex;flex-direction:column}#missionBody[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex:0 0 auto}#missionBody[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:120px}#missionDetails[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-right:20px}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}hr[_ngcontent-%COMP%]{display:block;height:1px;border:0;border-top:1px solid #000;padding:0;margin:2px 0}button[_ngcontent-%COMP%]{margin:2px;padding:4px}.buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row}.buttonIcon[_ngcontent-%COMP%]{height:20px}#changeName[_ngcontent-%COMP%]{margin-left:5px;height:14px;cursor:pointer}#svgBox[_ngcontent-%COMP%]{height:72px;width:72px}.seaEvent[_ngcontent-%COMP%]{cursor:pointer}#seaEventBody[_ngcontent-%COMP%]{display:flex;flex-direction:row}#seaEventTitle[_ngcontent-%COMP%]{margin-left:10px;font-weight:bolder}#sizeDiv[_ngcontent-%COMP%]{padding-right:15px}"]],data:{}});function QT(e){return qs(0,[(e()(),Ds(0,0,null,null,0,"img",[["id","changeName"],["src","assets/gear.svg"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.changeName()&&t),t}),null,null))],null,null)}function qT(e){return qs(0,[(e()(),Ds(0,0,null,null,0,"span",[],null,null,null,null,null))],null,null)}function XT(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(1,null,[" standing: "," (",")\n"]))],null,(function(e,n){var l=n.component;e(n,1,0,l.getSelectedCountry().getDiplomacy(),l.getSelectedCountry().diplomacy)}))}function ZT(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"span",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,0,"input",[["id","defaultOrigin"],["type","radio"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==i.setDefaultOrigin(i.getSelectedRegion().id)&&t),t}),null,null)),(e()(),Ds(2,0,null,null,1,"label",[["for","defaultOrigin"]],null,null,null,null,null)),(e()(),Ks(-1,null,["use as default origin"]))],null,(function(e,n){var l=n.component;e(n,1,0,l.getDefaultOrigin()===l.getSelectedRegion().id)}))}function JT(e){return qs(0,[(e()(),Ds(0,0,null,null,12,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(3,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(4,null,[" "," "])),(e()(),Ds(5,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(6,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(7,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(8,null,[" "," "])),(e()(),Ds(9,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(10,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(11,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(12,null,[" "," "]))],(function(e,n){e(n,3,0,"wealth","world"),e(n,7,0,"economy","world"),e(n,11,0,"defense","world")}),(function(e,n){var l=n.component;e(n,4,0,l.getSelectedRegion().wealth),e(n,8,0,l.getSelectedRegion().economy),e(n,12,0,l.getSelectedRegion().defense)}))}function eC(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["yes"]))],null,null)}function nC(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["no"]))],null,null)}function lC(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["yes"]))],null,null)}function tC(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["no"]))],null,null)}function iC(e){return qs(0,[(e()(),Ds(0,0,null,null,18,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(3,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ms(16777216,null,null,1,null,eC)),ei(5,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,nC)),ei(7,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(8,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(9,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(10,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ms(16777216,null,null,1,null,lC)),ei(12,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,tC)),ei(14,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(15,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(16,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(17,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(18,null,[" "," "]))],(function(e,n){var l=n.component;e(n,3,0,"roads","world"),e(n,5,0,l.getSelectedRegion().roads),e(n,7,0,!l.getSelectedRegion().roads),e(n,10,0,"watchtower","world"),e(n,12,0,l.getSelectedRegion().watchtower),e(n,14,0,!l.getSelectedRegion().watchtower),e(n,17,0,"guard_tower","world")}),(function(e,n){e(n,18,0,n.component.getGuardTowersCount())}))}function sC(e){return qs(0,[(e()(),Ds(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(3,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(4,null,[" "," "]))],(function(e,n){e(n,3,0,"defense","world")}),(function(e,n){e(n,4,0,n.component.getSelectedRegion().defense)}))}function rC(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["yes"]))],null,null)}function uC(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["no"]))],null,null)}function oC(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["yes"]))],null,null)}function aC(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["no"]))],null,null)}function cC(e){return qs(0,[(e()(),Ds(0,0,null,null,18,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(3,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ms(16777216,null,null,1,null,rC)),ei(5,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,uC)),ei(7,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(8,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(9,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(10,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ms(16777216,null,null,1,null,oC)),ei(12,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,aC)),ei(14,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(15,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(16,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(17,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(18,null,[" "," "]))],(function(e,n){var l=n.component;e(n,3,0,"roads","world"),e(n,5,0,l.getSelectedRegion().roads),e(n,7,0,!l.getSelectedRegion().roads),e(n,10,0,"watchtower","world"),e(n,12,0,l.getSelectedRegion().watchtower),e(n,14,0,!l.getSelectedRegion().watchtower),e(n,17,0,"guard_tower","world")}),(function(e,n){e(n,18,0,n.component.getGuardTowersCount())}))}function hC(e){return qs(0,[(e()(),Ds(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(3,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(4,null,[" "," "]))],(function(e,n){e(n,3,0,"spy","army/mission")}),(function(e,n){e(n,4,0,n.component.getSelectedRegion().spy)}))}function dC(e){return qs(0,[(e()(),Ds(0,0,null,null,12,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(3,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(-1,null,[" ? "])),(e()(),Ds(5,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(6,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(7,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(-1,null,[" ? "])),(e()(),Ds(9,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(10,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(11,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(-1,null,[" ? "]))],(function(e,n){e(n,3,0,"wealth","world"),e(n,7,0,"economy","world"),e(n,11,0,"defense","world")}),null)}function gC(e){return qs(0,[(e()(),Ds(0,0,null,null,12,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(3,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(-1,null,[" ? "])),(e()(),Ds(5,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(6,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(7,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(-1,null,[" ? "])),(e()(),Ds(9,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(10,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(11,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(-1,null,[" ? "]))],(function(e,n){e(n,3,0,"roads","world"),e(n,7,0,"watchtower","world"),e(n,11,0,"guard_tower","world")}),null)}function pC(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ks(1,null,[""," : ",""]))],null,(function(e,n){e(n,1,0,n.component.getTroopName(n.context.$implicit.troop),n.context.$implicit.size)}))}function mC(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,pC)),ei(2,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.getFirstFourUnits(l.getSelectedRegion().army.units))}),null)}function fC(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ks(1,null,[""," : ",""]))],null,(function(e,n){e(n,1,0,n.component.getTroopName(n.context.$implicit.troop),n.context.$implicit.size)}))}function SC(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,fC)),ei(2,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.getSecondFourUnits(l.getSelectedRegion().army.units))}),null)}function EC(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ks(1,null,[""," : ",""]))],null,(function(e,n){e(n,1,0,n.component.getTroopName(n.context.$implicit.troop),n.context.$implicit.size)}))}function vC(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,EC)),ei(2,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,2,0,n.component.getSelectedRegion().navy.units)}),null)}function RC(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ks(-1,null,[" troops: ? "]))],null,null)}function OC(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"button",[["class","icon"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.colonize()&&t),t}),null,null)),(e()(),Ks(-1,null,["Colonize "])),(e()(),Ds(2,0,null,null,0,"img",[["class","buttonIcon"],["src","assets/army/mission/colonize.svg"]],null,null,null,null,null))],null,null)}function TC(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"button",[["class","icon"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.move()&&t),t}),null,null)),(e()(),Ks(-1,null,["Move army "])),(e()(),Ds(2,0,null,null,0,"img",[["class","buttonIcon"],["src","assets/army/mission/move.svg"]],null,null,null,null,null))],null,null)}function CC(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"button",[["class","icon"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.seaMove()&&t),t}),null,null)),(e()(),Ks(-1,null,["Sea move "])),(e()(),Ds(2,0,null,null,0,"img",[["class","buttonIcon"],["src","assets/army/mission/sea_move.svg"]],null,null,null,null,null))],null,null)}function IC(e){return qs(0,[(e()(),Ds(0,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,6,"div",[["class","buttons"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,OC)),ei(3,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,TC)),ei(5,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,CC)),ei(7,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,3,0,l.canColonize()&&l.hasPath(0,l.getSelectedRegion().id)),e(n,5,0,l.getSelectedRegion().army.hasAny()),e(n,7,0,l.isSeaEnabled()&&l.getSelectedRegion().navy.hasAny()&&l.hasSeaPath(l.getDefaultOrigin(),l.getSelectedRegion().id))}),null)}function bC(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"button",[["class","icon"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.plunder()&&t),t}),null,null)),(e()(),Ks(-1,null,[" Plunder "])),(e()(),Ds(2,0,null,null,0,"img",[["class","buttonIcon"],["src","assets/army/mission/plunder.svg"]],null,null,null,null,null))],null,null)}function yC(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"button",[["class","icon"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.conquer()&&t),t}),null,null)),(e()(),Ks(-1,null,[" Conquer "])),(e()(),Ds(2,0,null,null,0,"img",[["class","buttonIcon"],["src","assets/army/mission/conquer.svg"]],null,null,null,null,null))],null,null)}function AC(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"button",[["class","icon"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.spy()&&t),t}),null,null)),(e()(),Ks(-1,null,["Spy "])),(e()(),Ds(2,0,null,null,0,"img",[["class","buttonIcon"],["src","assets/army/mission/spy.svg"]],null,null,null,null,null))],null,null)}function NC(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"button",[["class","icon"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.seaPlunder()&&t),t}),null,null)),(e()(),Ks(-1,null,["Sea plunder "])),(e()(),Ds(2,0,null,null,0,"img",[["class","buttonIcon"],["src","assets/army/mission/sea_plunder.svg"]],null,null,null,null,null))],null,null)}function _C(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"button",[["class","icon"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.seaConquer()&&t),t}),null,null)),(e()(),Ks(-1,null,["Sea conquer "])),(e()(),Ds(2,0,null,null,0,"img",[["class","buttonIcon"],["src","assets/army/mission/sea_conquer.svg"]],null,null,null,null,null))],null,null)}function wC(e){return qs(0,[(e()(),Ds(0,0,null,null,11,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,10,"div",[["class","buttons"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,bC)),ei(3,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,yC)),ei(5,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,AC)),ei(7,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,NC)),ei(9,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,_C)),ei(11,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,3,0,l.hasPath(l.getDefaultOrigin(),l.getSelectedRegion().id)),e(n,5,0,l.hasPath(l.getDefaultOrigin(),l.getSelectedRegion().id)),e(n,7,0,0===l.getSelectedRegion().spy&&l.hasPath(l.getDefaultOrigin(),l.getSelectedRegion().id,l.countries.SPECIAL,!0)),e(n,9,0,l.isSeaEnabled()&&l.hasSeaPath(0,l.getSelectedRegion().id)),e(n,11,0,l.isSeaEnabled()&&l.hasSeaPath(0,l.getSelectedRegion().id))}),null)}function PC(e){return qs(0,[(e()(),Ds(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,IC)),ei(2,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,wC)),ei(4,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.getSelectedCountry().id===l.countries.NEUTRAL),e(n,4,0,l.getSelectedCountry().id!==l.countries.NEUTRAL)}),null)}function MC(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"button",[["class","icon"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.move()&&t),t}),null,null)),(e()(),Ks(-1,null,["Move army "])),(e()(),Ds(2,0,null,null,0,"img",[["class","buttonIcon"],["src","assets/army/mission/move.svg"]],null,null,null,null,null))],null,null)}function DC(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"button",[["class","icon"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.build()&&t),t}),null,null)),(e()(),Ks(-1,null,["Build "])),(e()(),Ds(2,0,null,null,0,"img",[["class","buttonIcon"],["src","assets/army/mission/build.svg"]],null,null,null,null,null))],null,null)}function LC(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"button",[["class","icon"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.seaMove()&&t),t}),null,null)),(e()(),Ks(-1,null,["Sea move "])),(e()(),Ds(2,0,null,null,0,"img",[["class","buttonIcon"],["src","assets/army/mission/sea_move.svg"]],null,null,null,null,null))],null,null)}function xC(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"button",[["class","icon"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.expedition()&&t),t}),null,null)),(e()(),Ks(-1,null,["Send expedition"])),(e()(),Ds(2,0,null,null,0,"img",[["class","buttonIcon"],["src","assets/resources/map.svg"]],null,null,null,null,null))],null,null)}function kC(e){return qs(0,[(e()(),Ds(0,0,null,null,9,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,8,"div",[["class","buttons"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,MC)),ei(3,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,DC)),ei(5,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,LC)),ei(7,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,xC)),ei(9,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,3,0,l.getSelectedRegion().army.hasAny()),e(n,5,0,0!==l.getSelectedRegion().id),e(n,7,0,l.isSeaEnabled()&&l.getSelectedRegion().navy.hasAny()&&l.hasSeaPath(l.getDefaultOrigin(),l.getSelectedRegion().id)),e(n,9,0,0===l.getSelectedRegion().id&&l.hasMap())}),null)}function FC(e){return qs(0,[(e()(),Ds(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,PC)),ei(2,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,kC)),ei(4,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.getSelectedCountry().id!==l.countries.PLAYER),e(n,4,0,l.getSelectedCountry().id===l.countries.PLAYER)}),null)}function UC(e){return qs(0,[(e()(),Ds(0,0,null,null,54,"div",[],null,null,null,null,null)),(e()(),Ks(-1,null,[" Kingdom: "])),(e()(),Ds(2,0,null,null,1,"span",[["id","kingdomName"]],null,null,null,null,null)),(e()(),Ks(3,null,["",""])),(e()(),Ms(16777216,null,null,1,null,QT)),ei(5,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,qT)),ei(7,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(8,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,XT)),ei(10,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,ZT)),ei(12,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(13,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Ds(14,0,null,null,38,"div",[["id","regionDetails"]],null,null,null,null,null)),(e()(),Ds(15,0,null,null,2,"div",[["id","svgBox"]],null,null,null,null,null)),(e()(),Ds(16,0,null,null,1,":svg:svg",[["class","regionSVG"],["draggable","false"],["ondragstart","return false;"]],[[1,"height",0],[1,"width",0],[1,"viewBox",0]],null,null,null,null)),(e()(),Ds(17,0,null,null,0,":svg:path",[],[[1,"fill",0],[1,"d",0],[1,"stroke",0],[1,"stroke-width",0]],null,null,null,null)),(e()(),Ds(18,0,null,null,12,"div",[],null,null,null,null,null)),(e()(),Ds(19,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(20,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(21,114688,null,0,Rg,[],{name:[0,"name"]},null),(e()(),Ks(22,null,[" ",""])),(e()(),Ds(23,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(24,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(25,114688,null,0,Rg,[],{name:[0,"name"]},null),(e()(),Ks(26,null,[" ",""])),(e()(),Ds(27,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(28,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(29,114688,null,0,Rg,[],{name:[0,"name"]},null),(e()(),Ks(30,null,[" ",""])),(e()(),Ms(16777216,null,null,1,null,JT)),ei(32,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,iC)),ei(34,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,sC)),ei(36,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,cC)),ei(38,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,hC)),ei(40,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,dC)),ei(42,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,gC)),ei(44,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,mC)),ei(46,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,SC)),ei(48,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,vC)),ei(50,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,RC)),ei(52,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,FC)),ei(54,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,5,0,l.getSelectedCountry().id===l.countries.PLAYER),e(n,7,0,l.isDev()),e(n,10,0,l.getSelectedCountry().id!==l.countries.PLAYER&&l.getSelectedCountry().id!==l.countries.NEUTRAL),e(n,12,0,l.getSelectedCountry().id===l.countries.PLAYER||l.getSelectedCountry().id===l.countries.NEUTRAL),e(n,21,0,"land"),e(n,25,0,"forest"),e(n,29,0,"mountains"),e(n,32,0,l.getSelectedRegion().spy>0&&l.getSelectedCountry().id!==l.countries.PLAYER),e(n,34,0,l.getSelectedRegion().spy>0&&l.getSelectedCountry().id!==l.countries.PLAYER),e(n,36,0,l.getSelectedCountry().id===l.countries.PLAYER),e(n,38,0,l.getSelectedCountry().id===l.countries.PLAYER),e(n,40,0,l.getSelectedRegion().spy>0&&l.getSelectedCountry().id!==l.countries.PLAYER),e(n,42,0,0===l.getSelectedRegion().spy&&l.getSelectedCountry().id!==l.countries.PLAYER&&l.getSelectedCountry().id!==l.countries.NEUTRAL),e(n,44,0,0===l.getSelectedRegion().spy&&l.getSelectedCountry().id!==l.countries.PLAYER&&l.getSelectedCountry().id!==l.countries.NEUTRAL),e(n,46,0,l.getSelectedRegion().spy>0||l.getSelectedRegion().watched||l.getSelectedCountry().id===l.countries.PLAYER||l.getSelectedCountry().id===l.countries.NEUTRAL),e(n,48,0,l.getSelectedRegion().spy>0||l.getSelectedRegion().watched||l.getSelectedCountry().id===l.countries.PLAYER||l.getSelectedCountry().id===l.countries.NEUTRAL),e(n,50,0,l.getSelectedRegion().spy>0||l.getSelectedRegion().watched||l.getSelectedCountry().id===l.countries.PLAYER||l.getSelectedCountry().id===l.countries.NEUTRAL),e(n,52,0,0===l.getSelectedRegion().spy&&!l.getSelectedRegion().watched&&l.getSelectedCountry().id!==l.countries.PLAYER&&l.getSelectedCountry().id!==l.countries.NEUTRAL),e(n,54,0,!l.selecting)}),(function(e,n){var l=n.component;e(n,3,0,l.getSelectedCountry().name),e(n,16,0,"72px","72px",l.prepareViewbox(l.getSelectedRegion().center)),e(n,17,0,l.getSelectedCountry().colour,l.getSelectedRegion().path,"black","2"),e(n,22,0,l.getSelectedRegion().land),e(n,26,0,l.getSelectedRegion().forest),e(n,30,0,l.getSelectedRegion().mountains)}))}function HC(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(1,null,["(",")"]))],null,(function(e,n){e(n,1,0,n.component.roundEffectiveSpeed())}))}function GC(e){return qs(0,[(e()(),Ds(0,0,null,null,5,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(2,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(3,null,[" "," "])),(e()(),Ms(16777216,null,null,1,null,HC)),ei(5,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,2,0,"speed","army"),e(n,5,0,l.getSelectedMission().getArmySpeed()!==l.getSelectedMission().getArmyEffectiveSpeed())}),(function(e,n){e(n,3,0,n.component.getSelectedMission().getArmySpeed())}))}function BC(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(2,114688,null,0,Rg,[],{name:[0,"name"]},null),(e()(),Ks(3,null,[" ",""]))],(function(e,n){e(n,2,0,"cargo")}),(function(e,n){e(n,3,0,n.component.getMissionCargo())}))}function VC(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.cancel()&&t),t}),null,null)),(e()(),Ks(-1,null,["cancel mission"]))],null,null)}function WC(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ks(1,null,["",": ",""]))],null,(function(e,n){e(n,1,0,n.component.getTroopName(n.context.$implicit.troop),n.context.$implicit.size)}))}function YC(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ks(1,null,[""," fish"]))],null,(function(e,n){e(n,1,0,n.component.getSelectedMission().data)}))}function zC(e){return qs(0,[(e()(),Ds(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ks(2,null,[""," meat"])),(e()(),Ds(3,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ks(4,null,[""," fur"]))],null,(function(e,n){var l=n.component;e(n,2,0,l.getSelectedMission().data.meat),e(n,4,0,l.getSelectedMission().data.fur)}))}function $C(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ks(1,null,[""," coins"]))],null,(function(e,n){e(n,1,0,n.component.getSelectedMission().data)}))}function KC(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ks(1,null,[""," coins"]))],null,(function(e,n){e(n,1,0,n.component.getSelectedMission().data)}))}function jC(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ks(1,null,[""," cartography data "]))],null,(function(e,n){e(n,1,0,n.component.getSelectedMission().data)}))}function QC(e){return qs(0,[(e()(),Ds(0,0,null,null,10,"div",[],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,YC)),ei(2,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,zC)),ei(4,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,$C)),ei(6,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,KC)),ei(8,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,jC)),ei(10,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.getSelectedMission().mission===l.missions.FISHING),e(n,4,0,l.getSelectedMission().mission===l.missions.HUNTING),e(n,6,0,l.getSelectedMission().mission===l.missions.TREASURE),e(n,8,0,l.getSelectedMission().mission===l.missions.SEA_BATTLE),e(n,10,0,l.getSelectedMission().mission===l.missions.CARTOGRAPHY)}),null)}function qC(e){return qs(0,[(e()(),Ds(0,0,null,null,21,"div",[["id","missionDetails"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"div",[["id","missionTitle"]],null,null,null,null,null)),(e()(),Ks(2,null,["",""])),(e()(),Ds(3,0,null,null,18,"div",[["id","missionBody"]],null,null,null,null,null)),(e()(),Ds(4,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ds(5,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(e()(),Ds(6,0,null,null,10,"div",[["id","missionStats"]],null,null,null,null,null)),(e()(),Ds(7,0,null,null,3,"div",[["id","missionStatus"]],null,null,null,null,null)),(e()(),Ks(8,null,[" ",": "])),(e()(),Ds(9,0,null,null,1,"app-progress-bar",[],null,null,null,mT,dT)),ei(10,638976,null,0,hT,[wp],{progress:[0,"progress"]},null),(e()(),Ms(16777216,null,null,1,null,GC)),ei(12,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,BC)),ei(14,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,VC)),ei(16,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(17,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,WC)),ei(19,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ms(16777216,null,null,1,null,QC)),ei(21,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,10,0,l.getSelectedMission().getDisplayProgress()),e(n,12,0,l.getSelectedMission().mission!==l.missions.BUILD),e(n,14,0,l.getSelectedMission().getMissionType()===l.missionType.SEA),e(n,16,0,l.canCancel()),e(n,19,0,l.getSelectedMission().army.units),e(n,21,0,null!==l.getSelectedMission().data)}),(function(e,n){var l=n.component;e(n,2,0,l.getMissionName()),e(n,5,0,Rt(1,"",l.getSelectedMission().getIconPath(),"")),e(n,8,0,l.getSelectedMission().getStatus())}))}function XC(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.fishing()&&t),t}),null,null)),(e()(),Ks(-1,null,["Start fishing "]))],null,null)}function ZC(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.hunting()&&t),t}),null,null)),(e()(),Ks(-1,null,["Start hunting "]))],null,null)}function JC(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.treasure()&&t),t}),null,null)),(e()(),Ks(-1,null,["Look for treasure "]))],null,null)}function eI(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.cartography()&&t),t}),null,null)),(e()(),Ks(-1,null,["Gather cartography data "]))],null,null)}function nI(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.seaBattle()&&t),t}),null,null)),(e()(),Ks(-1,null,["Attack pirates "]))],null,null)}function lI(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.seaBattle()&&t),t}),null,null)),(e()(),Ks(-1,null,["Attack pirates base "]))],null,null)}function tI(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[["id","sizeDiv"]],null,null,null,null,null)),(e()(),Ks(1,null,[" size: "," "]))],null,(function(e,n){e(n,1,0,n.component.getSelectedSeaEvent().amount)}))}function iI(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ks(1,null,[""," : ",""]))],null,(function(e,n){e(n,1,0,n.component.getTroopName(n.context.$implicit.troop),n.context.$implicit.size)}))}function sI(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"div",[["id","seaEventRight"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,iI)),ei(2,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,2,0,n.component.getSelectedSeaEvent().data.units)}),null)}function rI(e){return qs(0,[(e()(),Ds(0,0,null,null,22,"div",[["id","seaEventDetails"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"div",[["id","seaEventTitle"]],null,null,null,null,null)),(e()(),Ks(2,null,["",""])),(e()(),Ds(3,0,null,null,19,"div",[["id","seaEventBody"]],null,null,null,null,null)),(e()(),Ds(4,0,null,null,14,"div",[["id","seaEventLeft"]],null,null,null,null,null)),(e()(),Ds(5,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ds(6,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,XC)),ei(8,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,ZC)),ei(10,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,JC)),ei(12,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,eI)),ei(14,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,nI)),ei(16,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,lI)),ei(18,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,tI)),ei(20,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,sI)),ei(22,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,8,0,l.isSeaEnabled()&&l.hasSeaPath(0,l.getSelectedSeaEvent().parentId)&&l.getSelectedSeaEvent().type===l.seaEvents.FISH),e(n,10,0,l.isSeaEnabled()&&l.hasSeaPath(0,l.getSelectedSeaEvent().parentId)&&l.getSelectedSeaEvent().type===l.seaEvents.SHARK),e(n,12,0,l.isSeaEnabled()&&l.hasSeaPath(0,l.getSelectedSeaEvent().parentId)&&l.getSelectedSeaEvent().type===l.seaEvents.TREASURE),e(n,14,0,l.isSeaCartographyEnabled()&&l.hasSeaPath(0,l.getSelectedSeaEvent().parentId)&&l.getSelectedSeaEvent().type===l.seaEvents.CARTOGRAPHY),e(n,16,0,l.isSeaEnabled()&&l.hasSeaPath(0,l.getSelectedSeaEvent().parentId)&&l.getSelectedSeaEvent().type===l.seaEvents.PIRATES),e(n,18,0,l.isSeaEnabled()&&l.hasSeaPath(0,l.getSelectedSeaEvent().parentId)&&l.getSelectedSeaEvent().type===l.seaEvents.PIRATES_BASE),e(n,20,0,l.getSelectedSeaEvent().type!==l.seaEvents.WHIRLPOOL),e(n,22,0,l.getSelectedSeaEvent().data)}),(function(e,n){var l=n.component;e(n,2,0,l.getSeaEventName()),e(n,6,0,Rt(1,"",l.getSeaEventIconPath(l.getSelectedSeaEvent().type),""))}))}function uI(e){return qs(0,[(e()(),Ds(0,0,null,null,0,":svg:path",[],[[1,"fill",0],[1,"d",0],[1,"stroke",0],[1,"stroke-width",0]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.select(l,e.parent.parent.context.$implicit,e.parent.context.$implicit)&&t),t}),null,null))],null,(function(e,n){e(n,0,0,n.parent.parent.context.$implicit.colour,n.parent.context.$implicit.path,"black","2")}))}function oI(e){return qs(0,[(e()(),Ds(0,0,null,null,2,":svg:g",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.select(l,e.parent.parent.context.$implicit,e.parent.context.$implicit)&&t),t}),null,null)),(e()(),Ds(1,0,null,null,0,":svg:path",[],[[1,"fill",0],[1,"d",0],[1,"stroke",0],[1,"stroke-width",0]],null,null,null,null)),(e()(),Ds(2,0,null,null,0,":svg:path",[],[[1,"fill",0],[1,"d",0]],null,null,null,null))],null,(function(e,n){e(n,1,0,n.parent.parent.context.$implicit.colour,n.parent.context.$implicit.path,"black","2"),e(n,2,0,"url(#diagonalHatch)",n.parent.context.$implicit.path)}))}function aI(e){return qs(0,[(e()(),Ds(0,0,null,null,2,":svg:g",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,0,":svg:circle",[],[[1,"r",0],[1,"cx",0],[1,"cy",0],[1,"fill",0]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.select(l,e.parent.parent.context.$implicit,e.parent.context.$implicit)&&t),t}),null,null)),(e()(),Ds(2,0,null,null,0,":svg:image",[],[[1,"height",0],[1,"width",0],[1,"x",0],[1,"y",0],[1,":xlink:href",0]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.select(l,e.parent.parent.context.$implicit,e.parent.context.$implicit)&&t),t}),null,null))],null,(function(e,n){e(n,1,0,12,n.parent.context.$implicit.center.x,n.parent.context.$implicit.center.y+1,n.component.worldService.getCountry(n.parent.context.$implicit.capital).colour),e(n,2,0,20,20,n.parent.context.$implicit.center.x-10,n.parent.context.$implicit.center.y-10,"assets/world/capital.svg")}))}function cI(e){return qs(0,[(e()(),Ds(0,0,null,null,2,":svg:g",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,0,":svg:circle",[],[[1,"r",0],[1,"cx",0],[1,"cy",0],[1,"fill",0]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.select(l,e.parent.parent.context.$implicit,e.parent.context.$implicit)&&t),t}),null,null)),(e()(),Ds(2,0,null,null,0,":svg:image",[],[[1,"height",0],[1,"width",0],[1,"x",0],[1,"y",0],[1,":xlink:href",0]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.select(l,e.parent.parent.context.$implicit,e.parent.context.$implicit)&&t),t}),null,null))],null,(function(e,n){e(n,1,0,6,n.parent.context.$implicit.center.x,n.parent.context.$implicit.center.y,n.parent.parent.context.$implicit.colour),e(n,2,0,10,10,n.parent.context.$implicit.center.x-5,n.parent.context.$implicit.center.y-5,"assets/army/recruit.svg")}))}function hI(e){return qs(0,[(e()(),Ds(0,0,null,null,2,":svg:g",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,0,":svg:circle",[],[[1,"r",0],[1,"cx",0],[1,"cy",0],[1,"fill",0]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.select(l,e.parent.parent.context.$implicit,e.parent.context.$implicit)&&t),t}),null,null)),(e()(),Ds(2,0,null,null,0,":svg:image",[],[[1,"height",0],[1,"width",0],[1,"x",0],[1,"y",0],[1,":xlink:href",0]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.select(l,e.parent.parent.context.$implicit,e.parent.context.$implicit)&&t),t}),null,null))],null,(function(e,n){e(n,1,0,6,n.parent.context.$implicit.center.x,n.parent.context.$implicit.center.y,n.parent.parent.context.$implicit.colour),e(n,2,0,10,10,n.parent.context.$implicit.center.x-5,n.parent.context.$implicit.center.y-5,"assets/army/mission/spy.svg")}))}function dI(e){return qs(0,[(e()(),Ds(0,0,null,null,2,":svg:g",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,0,":svg:circle",[],[[1,"r",0],[1,"cx",0],[1,"cy",0],[1,"fill",0]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.select(l,e.parent.parent.context.$implicit,e.parent.context.$implicit)&&t),t}),null,null)),(e()(),Ds(2,0,null,null,0,":svg:image",[],[[1,"height",0],[1,"width",0],[1,"x",0],[1,"y",0],[1,":xlink:href",0]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.select(l,e.parent.parent.context.$implicit,e.parent.context.$implicit)&&t),t}),null,null))],null,(function(e,n){e(n,1,0,6,n.parent.context.$implicit.center.x,n.parent.context.$implicit.center.y,n.parent.parent.context.$implicit.colour),e(n,2,0,10,10,n.parent.context.$implicit.center.x-5,n.parent.context.$implicit.center.y-5,"assets/world/roads.svg")}))}function gI(e){return qs(0,[(e()(),Ds(0,0,null,null,2,":svg:g",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,0,":svg:circle",[],[[1,"r",0],[1,"cx",0],[1,"cy",0],[1,"fill",0]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.select(l,e.parent.parent.context.$implicit,e.parent.context.$implicit)&&t),t}),null,null)),(e()(),Ds(2,0,null,null,0,":svg:image",[],[[1,"height",0],[1,"width",0],[1,"x",0],[1,"y",0],[1,":xlink:href",0]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.select(l,e.parent.parent.context.$implicit,e.parent.context.$implicit)&&t),t}),null,null))],null,(function(e,n){e(n,1,0,6,n.parent.context.$implicit.center.x,n.parent.context.$implicit.center.y,n.parent.parent.context.$implicit.colour),e(n,2,0,10,10,n.parent.context.$implicit.center.x-5,n.parent.context.$implicit.center.y-5,"assets/world/watchtower.svg")}))}function pI(e){return qs(0,[(e()(),Ds(0,0,null,null,0,":svg:image",[["draggable","false"],["ondragstart","return false;"]],[[1,"height",0],[1,"width",0],[1,"x",0],[1,"y",0],[1,":xlink:href",0]],null,null,null,null))],null,(function(e,n){var l=n.component;e(n,0,0,20,20,l.getHarbour(n.parent.context.$implicit.id).CENTER.x-10,l.getHarbour(n.parent.context.$implicit.id).CENTER.y-10,"assets/sea/port.svg")}))}function mI(e){return qs(0,[(e()(),Ds(0,0,null,null,16,":svg:g",[["class","region"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,uI)),ei(2,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,oI)),ei(4,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,aI)),ei(6,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,cI)),ei(8,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,hI)),ei(10,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,dI)),ei(12,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,gI)),ei(14,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,pI)),ei(16,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,2,0,!l.getSelectedRegion()||n.context.$implicit.id!==l.getSelectedRegion().id),e(n,4,0,l.getSelectedRegion()&&n.context.$implicit.id===l.getSelectedRegion().id),e(n,6,0,0===l.radio&&void 0!==n.context.$implicit.capital);var t=1===l.radio&&n.context.$implicit.army.hasAny()&&(n.parent.context.$implicit.id===l.countries.PLAYER||n.parent.context.$implicit.id===l.countries.NEUTRAL||n.context.$implicit.spy>0);e(n,8,0,t),e(n,10,0,2===l.radio&&n.context.$implicit.spy>0),e(n,12,0,3===l.radio&&n.context.$implicit.roads&&(n.parent.context.$implicit.id===l.countries.PLAYER||n.parent.context.$implicit.id===l.countries.NEUTRAL||n.context.$implicit.spy>0)),e(n,14,0,4===l.radio&&n.context.$implicit.watchtower&&(n.parent.context.$implicit.id===l.countries.PLAYER||n.parent.context.$implicit.id===l.countries.NEUTRAL||n.context.$implicit.spy>0)),e(n,16,0,l.showHarbours&&n.context.$implicit.harbour)}),null)}function fI(e){return qs(0,[(e()(),Ds(0,0,null,null,2,":svg:g",[],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,mI)),ei(2,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,2,0,n.context.$implicit.regions)}),null)}function SI(e){return qs(0,[(e()(),Ds(0,0,null,null,0,":svg:circle",[],[[1,"cx",0],[1,"cy",0],[1,"r",0],[1,"fill",0],[1,"opacity",0],[1,"stroke-width",0]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.selectArea(e.parent.context.$implicit.id)&&t),t}),null,null))],null,(function(e,n){e(n,0,0,n.parent.context.$implicit.center.x,n.parent.context.$implicit.center.y,n.parent.context.$implicit.r,"red",.1,"1")}))}function EI(e){return qs(0,[(e()(),Ds(0,0,null,null,1,":svg:g",[["class","seaEvent"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.selectSeaEvent(e.context.$implicit)&&t),t}),null,null)),(e()(),Ds(1,0,null,null,0,":svg:image",[["draggable","false"],["ondragstart","return false;"]],[[1,"height",0],[1,"width",0],[1,"x",0],[1,"y",0],[1,":xlink:href",0]],null,null,null,null))],null,(function(e,n){e(n,1,0,20,20,n.context.$implicit.center.x-10,n.context.$implicit.center.y-10,n.component.getSeaEventIconPath(n.context.$implicit.type))}))}function vI(e){return qs(0,[(e()(),Ds(0,0,null,null,4,":svg:g",[],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,SI)),ei(2,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,EI)),ei(4,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,2,0,n.context.$implicit.events.length>0&&(n.context.$implicit.events[0].type===l.seaEvents.PIRATES||n.context.$implicit.events[0].type===l.seaEvents.PIRATES_BASE)),e(n,4,0,n.context.$implicit.events)}),null)}function RI(e){return qs(0,[(e()(),Ds(0,0,null,null,1,":svg:g",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,0,":svg:line",[],[[1,"x1",0],[1,"y1",0],[1,"x2",0],[1,"y2",0],[1,"stroke",0],[1,"stroke-dasharray",0],[1,"stroke-width",0]],null,null,null,null))],null,(function(e,n){e(n,1,0,n.context.$implicit.origin.x,n.context.$implicit.origin.y,n.context.$implicit.target.x,n.context.$implicit.target.y,"black","5,5","1")}))}function OI(e){return qs(0,[(e()(),Ds(0,0,null,null,2,":svg:g",[],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,RI)),ei(2,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,2,0,n.parent.context.$implicit.routePaths)}),null)}function TI(e){return qs(0,[(e()(),Ds(0,0,null,null,2,":svg:g",[["class","mission"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,OI)),ei(2,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.getSelectedMission()&&l.getSelectedMission()===n.context.$implicit&&l.getSelectedMission().ownerCountry.id===l.countries.PLAYER)}),null)}function CI(e){return qs(0,[(e()(),Ds(0,0,null,null,2,":svg:g",[["class","mission"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,0,":svg:circle",[],[[1,"r",0],[1,"cx",0],[1,"cy",0],[1,"fill",0],[1,"stroke",0],[1,"stroke-width",0]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.selectMission(e.parent.context.$implicit)&&t),t}),null,null)),(e()(),Ds(2,0,null,null,0,":svg:image",[["draggable","false"],["ondragstart","return false;"]],[[1,"height",0],[1,"width",0],[1,"x",0],[1,"y",0],[1,":xlink:href",0]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.selectMission(e.parent.context.$implicit)&&t),t}),null,null))],null,(function(e,n){var l=n.parent.context.$implicit.getOrigin().x+(n.parent.context.$implicit.getTarget().x-n.parent.context.$implicit.getOrigin().x)*n.parent.context.$implicit.getProgressPercentage(),t=n.parent.context.$implicit.getOrigin().y+(n.parent.context.$implicit.getTarget().y-n.parent.context.$implicit.getOrigin().y)*n.parent.context.$implicit.getProgressPercentage();e(n,1,0,8,l,t,"lightgrey","black","1");var i=n.parent.context.$implicit.getOrigin().x+(n.parent.context.$implicit.getTarget().x-n.parent.context.$implicit.getOrigin().x)*n.parent.context.$implicit.getProgressPercentage()-6,s=n.parent.context.$implicit.getOrigin().y+(n.parent.context.$implicit.getTarget().y-n.parent.context.$implicit.getOrigin().y)*n.parent.context.$implicit.getProgressPercentage()-6,r=n.parent.context.$implicit.getIconPath();e(n,2,0,12,12,i,s,r)}))}function II(e){return qs(0,[(e()(),Ds(0,0,null,null,3,":svg:g",[["class","computerMission"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,0,":svg:circle",[],[[1,"r",0],[1,"cx",0],[1,"cy",0],[1,"fill",0],[1,"stroke",0],[1,"stroke-width",0]],null,null,null,null)),(e()(),Ds(2,0,null,null,0,":svg:circle",[],[[1,"r",0],[1,"cx",0],[1,"cy",0],[1,"fill",0],[1,"fill-opacity",0],[1,"stroke",0],[1,"stroke-width",0]],null,null,null,null)),(e()(),Ds(3,0,null,null,0,":svg:image",[["draggable","false"],["ondragstart","return false;"]],[[1,"height",0],[1,"width",0],[1,"x",0],[1,"y",0],[1,":xlink:href",0]],null,null,null,null))],null,(function(e,n){var l=n.parent.context.$implicit.getOrigin().x+(n.parent.context.$implicit.getTarget().x-n.parent.context.$implicit.getOrigin().x)*n.parent.context.$implicit.getProgressPercentage(),t=n.parent.context.$implicit.getOrigin().y+(n.parent.context.$implicit.getTarget().y-n.parent.context.$implicit.getOrigin().y)*n.parent.context.$implicit.getProgressPercentage();e(n,1,0,8,l,t,"white","black","1");var i=n.parent.context.$implicit.getOrigin().x+(n.parent.context.$implicit.getTarget().x-n.parent.context.$implicit.getOrigin().x)*n.parent.context.$implicit.getProgressPercentage(),s=n.parent.context.$implicit.getOrigin().y+(n.parent.context.$implicit.getTarget().y-n.parent.context.$implicit.getOrigin().y)*n.parent.context.$implicit.getProgressPercentage();e(n,2,0,8,i,s,n.parent.context.$implicit.ownerCountry.colour,.8,"black","1");var r=n.parent.context.$implicit.getOrigin().x+(n.parent.context.$implicit.getTarget().x-n.parent.context.$implicit.getOrigin().x)*n.parent.context.$implicit.getProgressPercentage()-6,u=n.parent.context.$implicit.getOrigin().y+(n.parent.context.$implicit.getTarget().y-n.parent.context.$implicit.getOrigin().y)*n.parent.context.$implicit.getProgressPercentage()-6,o=n.parent.context.$implicit.getIconPath();e(n,3,0,12,12,r,u,o)}))}function bI(e){return qs(0,[(e()(),Ds(0,0,null,null,4,":svg:g",[],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,CI)),ei(2,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,II)),ei(4,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,2,0,n.context.$implicit.ownerCountry.id===l.countries.PLAYER),e(n,4,0,n.context.$implicit.ownerCountry.id!==l.countries.PLAYER)}),null)}function yI(e){return qs(0,[Us(671088640,1,{svgRef:0}),(e()(),Ds(1,0,null,null,91,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,1,"div",[["id","title"]],null,null,null,null,null)),(e()(),Ks(-1,null,["World Map"])),(e()(),Ds(4,0,null,null,8,"div",[["id","details"]],null,null,null,null,null)),ei(5,278528,null,0,la,[Cl,Il,il,ol],{ngClass:[0,"ngClass"]},null),zs(6,{selecting:0}),(e()(),Ms(16777216,null,null,1,null,UC)),ei(8,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,qC)),ei(10,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,rI)),ei(12,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(13,0,[[1,0],["svg",1]],null,79,"div",[["id","svg"]],null,null,null,null,null)),(e()(),Ds(14,0,null,null,0,"img",[["id","target"],["src","assets/world/target.svg"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.resetView()&&t),t}),null,null)),(e()(),Ds(15,0,null,null,0,"img",[["id","arrowUp"],["src","assets/world/arrow_up.svg"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.moveDown()&&t),t}),null,null)),(e()(),Ds(16,0,null,null,0,"img",[["id","arrowDown"],["src","assets/world/arrow_down.svg"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.moveUp()&&t),t}),null,null)),(e()(),Ds(17,0,null,null,0,"img",[["id","arrowRight"],["src","assets/world/arrow_right.svg"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.moveLeft()&&t),t}),null,null)),(e()(),Ds(18,0,null,null,0,"img",[["id","arrowLeft"],["src","assets/world/arrow_left.svg"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.moveRight()&&t),t}),null,null)),(e()(),Ds(19,0,null,null,0,"img",[["id","plus"],["src","assets/world/plus.svg"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.zoomIn()&&t),t}),null,null)),(e()(),Ds(20,0,null,null,0,"img",[["id","minus"],["src","assets/world/minus.svg"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.zoomOut()&&t),t}),null,null)),(e()(),Ds(21,0,null,null,28,"div",[["id","options2"]],null,null,null,null,null)),(e()(),Ds(22,0,null,null,1,"label",[["for","showRoads"]],null,null,null,null,null)),(e()(),Ks(-1,null,["show roads"])),(e()(),Ds(24,0,null,null,6,"input",[["id","showRoads"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,25)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,25).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,25)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,25)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==Yt(e,26).onChange()&&t),"blur"===n&&(t=!1!==Yt(e,26).onTouched()&&t),"change"===n&&(t=!1!==i.updateMapDisplayOption()&&t),"ngModelChange"===n&&(t=!1!==(i.radio=l)&&t),t}),null,null)),ei(25,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(26,212992,null,0,Yg,[ol,il,Wg,Mn],{value:[0,"value"]},null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,Yg]),ei(28,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(30,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(31,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(32,0,null,null,1,"label",[["for","showWatchtowers"]],null,null,null,null,null)),(e()(),Ks(-1,null,["show watchtowers"])),(e()(),Ds(34,0,null,null,6,"input",[["id","showWatchtowers"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,35)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,35).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,35)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,35)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==Yt(e,36).onChange()&&t),"blur"===n&&(t=!1!==Yt(e,36).onTouched()&&t),"change"===n&&(t=!1!==i.updateMapDisplayOption()&&t),"ngModelChange"===n&&(t=!1!==(i.radio=l)&&t),t}),null,null)),ei(35,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(36,212992,null,0,Yg,[ol,il,Wg,Mn],{value:[0,"value"]},null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,Yg]),ei(38,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(40,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(41,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(42,0,null,null,1,"label",[["for","showHarbours"]],null,null,null,null,null)),(e()(),Ks(-1,null,["show harbours"])),(e()(),Ds(44,0,null,null,5,"input",[["id","showHarbours"],["type","checkbox"]],[[8,"checked",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,45).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==Yt(e,45).onTouched()&&t),"change"===n&&(t=!1!==i.updateMapDisplayOption()&&t),"ngModelChange"===n&&(t=!1!==(i.showHarbours=l)&&t),t}),null,null)),ei(45,16384,null,0,bg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[bg]),ei(47,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(49,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(50,0,null,null,29,"div",[["id","options"]],null,null,null,null,null)),(e()(),Ds(51,0,null,null,1,"label",[["for","showCapitals"]],null,null,null,null,null)),(e()(),Ks(-1,null,["show capitals"])),(e()(),Ds(53,0,null,null,6,"input",[["id","showCapitals"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,54)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,54).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,54)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,54)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==Yt(e,55).onChange()&&t),"blur"===n&&(t=!1!==Yt(e,55).onTouched()&&t),"change"===n&&(t=!1!==i.updateMapDisplayOption()&&t),"ngModelChange"===n&&(t=!1!==(i.radio=l)&&t),t}),null,null)),ei(54,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(55,212992,null,0,Yg,[ol,il,Wg,Mn],{value:[0,"value"]},null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,Yg]),ei(57,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(59,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(60,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(61,0,null,null,1,"label",[["for","showArmies"]],null,null,null,null,null)),(e()(),Ks(-1,null,["show armies"])),(e()(),Ds(63,0,null,null,6,"input",[["id","showArmies"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,64)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,64).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,64)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,64)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==Yt(e,65).onChange()&&t),"blur"===n&&(t=!1!==Yt(e,65).onTouched()&&t),"change"===n&&(t=!1!==i.updateMapDisplayOption()&&t),"ngModelChange"===n&&(t=!1!==(i.radio=l)&&t),t}),null,null)),ei(64,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(65,212992,null,0,Yg,[ol,il,Wg,Mn],{value:[0,"value"]},null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,Yg]),ei(67,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(69,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(70,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(71,0,null,null,1,"label",[["for","showSpies"]],null,null,null,null,null)),(e()(),Ks(-1,null,["show spies"])),(e()(),Ds(73,0,null,null,6,"input",[["id","showSpies"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,74)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,74).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,74)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,74)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==Yt(e,75).onChange()&&t),"blur"===n&&(t=!1!==Yt(e,75).onTouched()&&t),"change"===n&&(t=!1!==i.updateMapDisplayOption()&&t),"ngModelChange"===n&&(t=!1!==(i.radio=l)&&t),t}),null,null)),ei(74,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(75,212992,null,0,Yg,[ol,il,Wg,Mn],{value:[0,"value"]},null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,Yg]),ei(77,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(79,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(80,0,null,null,12,":svg:svg",[["id","mainMap"],["xmlns","http://www.w3.org/2000/svg"]],[[1,"viewBox",0]],null,null,null,null)),(e()(),Ds(81,0,null,null,2,":svg:defs",[],null,null,null,null,null)),(e()(),Ds(82,0,null,null,1,":svg:pattern",[["height","4"],["id","diagonalHatch"],["patternUnits","userSpaceOnUse"],["width","4"]],null,null,null,null,null)),(e()(),Ds(83,0,null,null,0,":svg:path",[["d","M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2"],["style","stroke:black; stroke-width:0.5"]],null,null,null,null,null)),(e()(),Ds(84,0,null,null,8,":svg:g",[],[[1,"transform",0]],null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,fI)),ei(86,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ms(16777216,null,null,1,null,vI)),ei(88,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ms(16777216,null,null,1,null,TI)),ei(90,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ms(16777216,null,null,1,null,bI)),ei(92,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component,t=e(n,6,0,l.selecting);e(n,5,0,t),e(n,8,0,l.getSelectedCountry()&&l.getSelectedRegion()),e(n,10,0,l.getSelectedMission()),e(n,12,0,l.getSelectedSeaEvent()),e(n,26,0,3),e(n,28,0,l.radio),e(n,36,0,4),e(n,38,0,l.radio),e(n,47,0,l.showHarbours),e(n,55,0,0),e(n,57,0,l.radio),e(n,65,0,1),e(n,67,0,l.radio),e(n,75,0,2),e(n,77,0,l.radio),e(n,86,0,l.getCountries()),e(n,88,0,l.getSeaAreas()),e(n,90,0,l.getMissions()),e(n,92,0,l.getMissions())}),(function(e,n){var l=n.component;e(n,24,0,Yt(n,30).ngClassUntouched,Yt(n,30).ngClassTouched,Yt(n,30).ngClassPristine,Yt(n,30).ngClassDirty,Yt(n,30).ngClassValid,Yt(n,30).ngClassInvalid,Yt(n,30).ngClassPending),e(n,34,0,Yt(n,40).ngClassUntouched,Yt(n,40).ngClassTouched,Yt(n,40).ngClassPristine,Yt(n,40).ngClassDirty,Yt(n,40).ngClassValid,Yt(n,40).ngClassInvalid,Yt(n,40).ngClassPending),e(n,44,0,l.getShowHarbours(),Yt(n,49).ngClassUntouched,Yt(n,49).ngClassTouched,Yt(n,49).ngClassPristine,Yt(n,49).ngClassDirty,Yt(n,49).ngClassValid,Yt(n,49).ngClassInvalid,Yt(n,49).ngClassPending),e(n,53,0,Yt(n,59).ngClassUntouched,Yt(n,59).ngClassTouched,Yt(n,59).ngClassPristine,Yt(n,59).ngClassDirty,Yt(n,59).ngClassValid,Yt(n,59).ngClassInvalid,Yt(n,59).ngClassPending),e(n,63,0,Yt(n,69).ngClassUntouched,Yt(n,69).ngClassTouched,Yt(n,69).ngClassPristine,Yt(n,69).ngClassDirty,Yt(n,69).ngClassValid,Yt(n,69).ngClassInvalid,Yt(n,69).ngClassPending),e(n,73,0,Yt(n,79).ngClassUntouched,Yt(n,79).ngClassTouched,Yt(n,79).ngClassPristine,Yt(n,79).ngClassDirty,Yt(n,79).ngClassValid,Yt(n,79).ngClassInvalid,Yt(n,79).ngClassPending),e(n,80,0,(0-674*l.getZoom())/2+" "+(0-674*l.getZoom())/2+" "+674*l.getZoom()+" "+464*l.getZoom()),e(n,84,0,"translate("+l.getX()+" "+l.getY()+")")}))}function AI(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"app-world",[],null,[[null,"keydown"],[null,"mousedown"],[null,"mousemove"],[null,"mouseup"],[null,"wheel"]],(function(e,n,l){var t=!0;return"keydown"===n&&(t=!1!==Yt(e,1).handleKeyDown(l)&&t),"mousedown"===n&&(t=!1!==Yt(e,1).dragStart(l)&&t),"mousemove"===n&&(t=!1!==Yt(e,1).mousemove(l)&&t),"mouseup"===n&&(t=!1!==Yt(e,1).dragEnd(l)&&t),"wheel"===n&&(t=!1!==Yt(e,1).onScroll(l)&&t),t}),yI,jT)),ei(1,114688,null,0,KT,[Np,zT,Gp,Qp,Fp],null,null)],(function(e,n){e(n,1,0)}),null)}var NI=Dt("app-world",KT,AI,{selecting:"selecting"},{regionSelected:"regionSelected"},[]);class _I{constructor(e,n,l,t,i,s){this.navyService=e,this.worldService=n,this.armyService=l,this.modalService=t,this.gameService=i,this.router=s,this.troops=pu,this.dismiss=!1}ngOnInit(){}getHarbourSpace(){return this.navyService.getHarbourSpace()}getMaxHarbourSpace(){return this.navyService.getMaxHarbourSpace()}getAvailableShips(e){return this.navyService.getAvailableShips(e)}getTotalShips(e){return this.navyService.getTotalShips(e)}getMissions(){return this.worldService.getPlayerSeaMissions()}selectMission(e){this.worldService.setSelectedMission(e),this.router.navigate(["/world"])}getTroopName(e){return Ou.prepareTroopName(e)}getCartographyData(){return this.navyService.getCartographyData()}getNavyPay(){return this.navyService.calculateNavyPay()}getPaydayCounter(){return this.navyService.getPaydayCounter()}startExpedition(){this.modalService.open(Pu.MISSION),this.modalService.setMissionData(new $T(this.worldService.getDefaultOriginRegion(),this.worldService.getDefaultOriginRegionCountry().colour,null,null,null,null,cu.EXPEDITION))}isCartographerResearched(){return this.gameService.isEnabled(ou.CARTOGRAPHER)}getShipsTypes(){return[pu.BOAT,pu.BRIGANTINE,pu.GALLEON]}getShipIconPath(e){return"assets/sea/"+Ou.prepareTroopName(e).toLowerCase()+".svg"}getShipName(e){return Ou.prepareTroopName(e)}getShipStrength(e){return fo.getTroop(e).STRENGTH}getShipDefense(e){return fo.getTroop(e).DEFENSE}getShipSpeed(e){return fo.getTroop(e).SPEED}getShipCargo(e){return fo.getTroop(e).CARGO}getShipPay(e){return fo.getTroop(e).PAY}changeDismiss(e){this.dismiss=e}tryToDismiss(e){this.dismiss&&this.navyService.dismiss(e,1)}}var wI=Kl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{margin:.7%;height:100%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#categories[_ngcontent-%COMP%]{flex-direction:row;height:91.5%}#categories[_ngcontent-%COMP%], .category[_ngcontent-%COMP%]{display:flex;border:1px solid #000;text-align:center}.category[_ngcontent-%COMP%]{flex:0 0 33%;flex-direction:column;align-items:center}.title[_ngcontent-%COMP%]{padding:2px;width:100%;font-weight:bolder;font-size:.9em;margin-bottom:5px;display:block;border-bottom:1px solid #000}.icon[_ngcontent-%COMP%]{flex-direction:row}#missionsScroll[_ngcontent-%COMP%], .icon[_ngcontent-%COMP%]{display:flex;align-items:center}#missionsScroll[_ngcontent-%COMP%]{flex-direction:column;width:100%;overflow-y:auto}.mission[_ngcontent-%COMP%]{padding:4px;border:1px solid #000;width:80%;cursor:pointer;margin:3px}.tooltipTitle[_ngcontent-%COMP%]{font-weight:700;padding:0 20px}#numbers[_ngcontent-%COMP%]{margin-top:-6px;padding:0;margin-bottom:5px}.number[_ngcontent-%COMP%]{border:1px solid #000;padding:2px 4px;background-color:var(--passive-colour);font-size:.75em;cursor:pointer}.active[_ngcontent-%COMP%], .number[_ngcontent-%COMP%]:hover{background-color:var(--active-colour)}.pointer[_ngcontent-%COMP%]{cursor:pointer}.marginTop[_ngcontent-%COMP%]{margin-top:30px}"]],data:{}});function PI(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"span",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(2,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),Ks(3,null,[" "," \xa0\xa0\xa0 "]))],(function(e,n){e(n,2,0,"sextant","sea","cartography data")}),(function(e,n){e(n,3,0,n.component.getCartographyData())}))}function MI(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[["class","number"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.changeDismiss(!0)&&t),t}),null,null)),(e()(),Ks(-1,null,["decommission"]))],null,null)}function DI(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[["class","number active"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.changeDismiss(!1)&&t),t}),null,null)),(e()(),Ks(-1,null,["decommission"]))],null,null)}function LI(e){return qs(0,[(e()(),Ds(0,0,null,null,32,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,31,"div",[["class","icon tooltip"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,3,"img",[["appTooltip",""]],[[8,"src",4]],[[null,"click"],[null,"mousemove"]],(function(e,n,l){var t=!0,i=e.component;return"mousemove"===n&&(t=!1!==Yt(e,5).onmousemove(l)&&t),"click"===n&&(t=!1!==i.tryToDismiss(e.context.$implicit)&&t),t}),null,null)),ei(3,278528,null,0,la,[Cl,Il,il,ol],{ngClass:[0,"ngClass"]},null),zs(4,{pointer:0}),ei(5,16384,null,0,vg,[],{elementId:[0,"elementId"]},null),(e()(),Ks(6,null,[" "," /"," "])),(e()(),Ds(7,0,null,null,25,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),Ds(8,0,null,null,1,"div",[["class","tooltipTitle"]],null,null,null,null,null)),(e()(),Ks(9,null,["",""])),(e()(),Ds(10,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Ds(11,0,null,null,1,"div",[["class","statsTitle"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Stats:"])),(e()(),Ds(13,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(14,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(15,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(16,null,[": ",""])),(e()(),Ds(17,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(18,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(19,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(20,null,[": ",""])),(e()(),Ds(21,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(22,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(23,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(24,null,[": ",""])),(e()(),Ds(25,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(26,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(27,114688,null,0,Rg,[],{name:[0,"name"]},null),(e()(),Ks(28,null,[": ",""])),(e()(),Ds(29,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(30,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(31,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(32,null,[": ",""]))],(function(e,n){var l=e(n,4,0,n.component.dismiss);e(n,3,0,l),e(n,5,0,"ship-"+n.context.$implicit),e(n,15,0,"attack","army"),e(n,19,0,"defense","army"),e(n,23,0,"speed","army"),e(n,27,0,"cargo"),e(n,31,0,"coins","resources")}),(function(e,n){var l=n.component;e(n,2,0,Rt(1,"",l.getShipIconPath(n.context.$implicit),"")),e(n,6,0,l.getAvailableShips(n.context.$implicit),l.getTotalShips(n.context.$implicit)),e(n,7,0,Rt(1,"ship-",n.context.$implicit,"")),e(n,9,0,l.getShipName(n.context.$implicit)),e(n,16,0,l.getShipStrength(n.context.$implicit)),e(n,20,0,l.getShipDefense(n.context.$implicit)),e(n,24,0,l.getShipSpeed(n.context.$implicit)),e(n,28,0,l.getShipCargo(n.context.$implicit)),e(n,32,0,l.getShipPay(n.context.$implicit))}))}function xI(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ks(1,null,[" ",": "," "]))],null,(function(e,n){e(n,1,0,n.component.getTroopName(n.context.$implicit.troop),n.context.$implicit.size)}))}function kI(e){return qs(0,[(e()(),Ds(0,0,null,null,9,"div",[["appTooltip",""],["class","mission tooltip"]],null,[[null,"click"],[null,"mousemove"]],(function(e,n,l){var t=!0,i=e.component;return"mousemove"===n&&(t=!1!==Yt(e,1).onmousemove(l)&&t),"click"===n&&(t=!1!==i.selectMission(e.context.$implicit)&&t),t}),null,null)),ei(1,16384,null,0,vg,[],{elementId:[0,"elementId"]},null),(e()(),Ks(2,null,[" "," "])),(e()(),Ds(3,0,null,null,6,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),Ks(4,null,[" "," "])),(e()(),Ds(5,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Ks(6,null,[" "," : ","% "])),Ys(7,2),(e()(),Ms(16777216,null,null,1,null,xI)),ei(9,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,1,0,"mission-"+n.context.$implicit.id),e(n,9,0,n.context.$implicit.army.units)}),(function(e,n){var l=n.context.$implicit.getMissionName();e(n,2,0,l),e(n,3,0,Rt(1,"mission-",n.context.$implicit.id,""));var t=n.context.$implicit.getMissionName();e(n,4,0,t);var i=n.context.$implicit.getStatus(),s=$l(n,6,1,e(n,7,0,Yt(n.parent,0),n.context.$implicit.getDisplayProgress(),"0.0-0"));e(n,6,0,i,s)}))}function FI(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.startExpedition()&&t),t}),null,null)),(e()(),Ks(-1,null,["EXPEDITION"]))],null,null)}function UI(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[["class","title marginTop"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Discovered land:"]))],null,null)}function HI(e){return qs(0,[ni(0,Ea,[ki]),(e()(),Ds(1,0,null,null,47,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,1,"div",[["id","title"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Navy"])),(e()(),Ds(4,0,null,null,8,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(5,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(6,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),Ks(7,null,[" ","/"," \xa0\xa0 "])),(e()(),Ms(16777216,null,null,1,null,PI)),ei(9,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(10,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(11,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),Ks(12,null,["\xa0"," in "," days "])),(e()(),Ds(13,0,null,null,35,"div",[["id","categories"]],null,null,null,null,null)),(e()(),Ds(14,0,null,null,9,"div",[["class","category"]],null,null,null,null,null)),(e()(),Ds(15,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),Ks(-1,null,["NAVY"])),(e()(),Ds(17,0,null,null,4,"div",[["id","numbers"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,MI)),ei(19,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,DI)),ei(21,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,LI)),ei(23,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ds(24,0,null,null,5,"div",[["class","category"]],null,null,null,null,null)),(e()(),Ds(25,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),Ks(-1,null,["MISSIONS IN PROGRESS"])),(e()(),Ds(27,0,null,null,2,"div",[["id","missionsScroll"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,kI)),ei(29,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ds(30,0,null,null,18,"div",[["class","category"]],null,null,null,null,null)),(e()(),Ds(31,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),Ks(-1,null,["OTHER"])),(e()(),Ms(16777216,null,null,1,null,FI)),ei(34,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,UI)),ei(36,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(37,0,null,null,3,"span",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(38,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(39,114688,null,0,Rg,[],{name:[0,"name"]},null),(e()(),Ks(40,null,["",""])),(e()(),Ds(41,0,null,null,3,"span",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(42,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(43,114688,null,0,Rg,[],{name:[0,"name"]},null),(e()(),Ks(44,null,["",""])),(e()(),Ds(45,0,null,null,3,"span",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(46,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(47,114688,null,0,Rg,[],{name:[0,"name"]},null),(e()(),Ks(48,null,["",""]))],(function(e,n){var l=n.component;e(n,6,0,"port","sea","Ships space"),e(n,9,0,l.isCartographerResearched()),e(n,11,0,"coins","resources","Navy upkeep (collected every 30 days)"),e(n,19,0,!l.dismiss),e(n,21,0,l.dismiss),e(n,23,0,l.getShipsTypes()),e(n,29,0,l.getMissions()),e(n,34,0,l.isCartographerResearched()),e(n,36,0,l.worldService.getTotalDiscovered()>0),e(n,39,0,"land"),e(n,43,0,"forest"),e(n,47,0,"mountains")}),(function(e,n){var l=n.component;e(n,7,0,l.getHarbourSpace(),l.getMaxHarbourSpace()),e(n,12,0,l.getNavyPay(),l.getPaydayCounter()+1),e(n,40,0,l.worldService.getDiscoveredLand()),e(n,44,0,l.worldService.getDiscoveredForest()),e(n,48,0,l.worldService.getDiscoveredMountains())}))}function GI(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"app-navy",[],null,null,null,HI,wI)),ei(1,114688,null,0,_I,[YT,zT,YR,Fp,Gp,Fd],null,null)],(function(e,n){e(n,1,0)}),null)}var BI=Dt("app-navy",_I,GI,{},{},[]);let VI=(()=>{class e{constructor(e,n,l){this.servicesService=e,this.resourcesService=n,this.gameService=l,this.heritagePoints=0,this.spentHeritagePoints=0,this.xp=0,e.addService(bu.HERITAGE,this)}getName(){return"HeritageService"}load(e){this.heritagePoints=void 0!==e.heritagePoints?e.heritagePoints:0,this.spentHeritagePoints=void 0!==e.spentHeritagePoints?e.spentHeritagePoints:0,this.xp=void 0!==e.xp?e.xp:0,this.heritagePoints>0&&this.gameService.enable(ou.HERITAGE)}reset(e,n){e&&(this.heritagePoints=0,this.xp=0),this.heritagePoints>0&&this.gameService.enable(ou.HERITAGE),this.spentHeritagePoints=0}save(){return{heritagePoints:this.heritagePoints,spentHeritagePoints:this.spentHeritagePoints,xp:this.xp}}increaseHeritagePoints(e){this.gameService.enable(ou.HERITAGE),this.heritagePoints+=e}increaseXP(e){this.xp+=e}spendHeritagePoints(e){return e<=this.getAvailableHeritagePoints()&&(this.spentHeritagePoints+=e,!0)}hasHeritagePoints(e){return e<=this.heritagePoints-this.spentHeritagePoints}getHeritagePoints(){return this.heritagePoints}calculateHeritagePoints(e=!1){let n=this.resourcesService.getTotalPeople(),l=this.xp,t=20+2*this.heritagePoints,i=0;for(;n>=t;)i+=1,n-=t,t+=2;for(;n+l>=t;)i+=1,n-=t,n<0&&(l+=n),t+=2;return e&&(this.xp=l),n-=50,n<0&&(n=0),{hp:i,xp:n}}peopleToNextHeritagePoint(){let e=this.resourcesService.getTotalPeople()+this.xp,n=20+2*this.heritagePoints;for(;e>=n;)e-=n,n+=2;return n-e}getAvailableHeritagePoints(){return this.heritagePoints-this.spentHeritagePoints}getXP(){return this.xp}}return e.\u0275prov=re({factory:function(){return new e(Ae(Np),Ae(Qp),Ae(Gp))},token:e,providedIn:"root"}),e})();class WI{constructor(e,n,l){this.heritageService=e,this.landService=n,this.modalService=l,this.multiplier=1,this.selectedMode=0}ngOnInit(){}getHeritagePoints(){return this.heritageService.getHeritagePoints()}getAvailableHeritagePoints(){return this.heritageService.getAvailableHeritagePoints()}buyLand(){this.heritageService.spendHeritagePoints(this.multiplier)?this.landService.increaseLand(10*this.multiplier,!0):this.modalService.info("No enough Heritage Points!")}buyForest(){this.heritageService.spendHeritagePoints(this.multiplier)?this.landService.increaseForest(10*this.multiplier,!1):this.modalService.info("No enough Heritage Points!")}buyMountains(){this.heritageService.spendHeritagePoints(this.multiplier)?this.landService.increaseMountains(5*this.multiplier):this.modalService.info("No enough Heritage Points!")}addHeritagePoints(){this.heritageService.increaseHeritagePoints(10)}isDev(){return!Qu.production}getXP(){return this.heritageService.getXP()}getBuyButtonText(){return 0===this.selectedMode?"Buy "+10*this.multiplier+" land":1===this.selectedMode?"Buy "+10*this.multiplier+" forest":2===this.selectedMode?"Buy "+5*this.multiplier+" mountains":void 0}buy(){0===this.selectedMode?this.buyLand():1===this.selectedMode?this.buyForest():2===this.selectedMode&&this.buyMountains()}}var YI=Kl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{margin:.5%;height:100%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#multiplier[_ngcontent-%COMP%]{width:5ch}#modes[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center}.mode[_ngcontent-%COMP%]{display:flex;cursor:pointer;flex-direction:column;height:150px;width:200px;border:1px solid #000;align-items:center;margin-right:5px;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box}.mode[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100px}.mode[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700}.mode[_ngcontent-%COMP%]   .effect[_ngcontent-%COMP%]{margin-top:4px;font-size:.8em}.selected[_ngcontent-%COMP%]{border:3px solid #000}"]],data:{}});function zI(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.addHeritagePoints()&&t),t}),null,null)),(e()(),Ks(-1,null,["add"]))],null,null)}function $I(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),Ks(1,null,["XP towards next heritage point: ",""])),(e()(),Ds(2,0,null,null,0,"br",[],null,null,null,null,null))],null,(function(e,n){e(n,1,0,n.component.getXP())}))}function KI(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"span",[],null,null,null,null,null)),(e()(),Ks(1,null,["XP towards next heritage point: ",""])),(e()(),Ds(2,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(3,0,null,null,0,"br",[],null,null,null,null,null))],null,(function(e,n){e(n,1,0,n.component.getXP())}))}function jI(e){return qs(0,[(e()(),Ds(0,0,null,null,58,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Heritage"])),(e()(),Ds(4,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ks(5,null,[" Heritage points: ","/"," "])),(e()(),Ms(16777216,null,null,1,null,zI)),ei(7,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(8,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,$I)),ei(10,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(11,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ks(-1,null,[" Heritage points can be used to buy more land or unlock researches. "])),(e()(),Ds(13,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,KI)),ei(15,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ks(-1,null,[" Heritage points can be used to buy more land or unlock research projects "])),(e()(),Ds(17,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(18,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(19,0,null,null,1,"label",[["for","multiplier"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Spend "])),(e()(),Ds(21,0,null,null,6,"input",[["id","multiplier"],["min","1"],["type","number"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,22)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,22).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,22)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,22)._compositionEnd(l.target.value)&&t),"input"===n&&(t=!1!==Yt(e,23).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,23).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.multiplier=l)&&t),t}),null,null)),ei(22,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(23,16384,null,0,Vg,[ol,il],null,null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,Vg]),ei(25,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(27,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(28,0,null,null,1,"label",[["for","multiplier"]],null,null,null,null,null)),(e()(),Ks(-1,null,[" Heritage Points to"])),(e()(),Ds(30,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.buy()&&t),t}),null,null)),(e()(),Ks(31,null,["",""])),(e()(),Ds(32,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(33,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(34,0,null,null,24,"div",[["id","modes"]],null,null,null,null,null)),(e()(),Ds(35,0,null,null,7,"div",[["class","mode"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==(e.component.selectedMode=0)&&t),t}),null,null)),ei(36,278528,null,0,la,[Cl,Il,il,ol],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),zs(37,{selected:0}),(e()(),Ds(38,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Land"])),(e()(),Ds(40,0,null,null,0,"img",[["src","assets/land.svg"]],null,null,null,null,null)),(e()(),Ds(41,0,null,null,1,"span",[["class","effect"]],null,null,null,null,null)),(e()(),Ks(42,null,[""," land for "," HP"])),(e()(),Ds(43,0,null,null,7,"div",[["class","mode"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==(e.component.selectedMode=1)&&t),t}),null,null)),ei(44,278528,null,0,la,[Cl,Il,il,ol],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),zs(45,{selected:0}),(e()(),Ds(46,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Forest"])),(e()(),Ds(48,0,null,null,0,"img",[["src","assets/forest.svg"]],null,null,null,null,null)),(e()(),Ds(49,0,null,null,1,"span",[["class","effect"]],null,null,null,null,null)),(e()(),Ks(50,null,[""," forest for "," HP"])),(e()(),Ds(51,0,null,null,7,"div",[["class","mode"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==(e.component.selectedMode=2)&&t),t}),null,null)),ei(52,278528,null,0,la,[Cl,Il,il,ol],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),zs(53,{selected:0}),(e()(),Ds(54,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Mountains"])),(e()(),Ds(56,0,null,null,0,"img",[["src","assets/mountains.svg"]],null,null,null,null,null)),(e()(),Ds(57,0,null,null,1,"span",[["class","effect"]],null,null,null,null,null)),(e()(),Ks(58,null,[""," mountains for "," HP"]))],(function(e,n){var l=n.component;e(n,7,0,l.isDev()),e(n,10,0,l.getXP()>0),e(n,15,0,l.getXP()>0),e(n,25,0,l.multiplier);var t=e(n,37,0,0===l.selectedMode);e(n,36,0,"mode",t);var i=e(n,45,0,1===l.selectedMode);e(n,44,0,"mode",i);var s=e(n,53,0,2===l.selectedMode);e(n,52,0,"mode",s)}),(function(e,n){var l=n.component;e(n,5,0,l.getAvailableHeritagePoints(),l.getHeritagePoints()),e(n,21,0,Rt(1,"",l.getAvailableHeritagePoints(),""),Yt(n,27).ngClassUntouched,Yt(n,27).ngClassTouched,Yt(n,27).ngClassPristine,Yt(n,27).ngClassDirty,Yt(n,27).ngClassValid,Yt(n,27).ngClassInvalid,Yt(n,27).ngClassPending),e(n,31,0,l.getBuyButtonText()),e(n,42,0,10*l.multiplier,l.multiplier),e(n,50,0,10*l.multiplier,l.multiplier),e(n,58,0,5*l.multiplier,l.multiplier)}))}function QI(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"app-heritage",[],null,null,null,jI,YI)),ei(1,114688,null,0,WI,[VI,WE,Fp],null,null)],(function(e,n){e(n,1,0)}),null)}var qI=Dt("app-heritage",WI,QI,{},{},[]);class XI{constructor(e){this.royalService=e,this.id=Math.random()}ngOnInit(){}getPerkName(){return Ou.preparePerkName(this.perk.perk)}unlock(){this.royalService.unlock(this.perk)}isAvailable(){return this.royalService.getRoyalPoints()>=this.perk.cost&&(0===this.perk.maxUsages||this.perk.usages<this.perk.maxUsages)}}var ZI=Kl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{border:1px solid #000}#wrapper[_ngcontent-%COMP%], #wrapperNotAvailable[_ngcontent-%COMP%]{display:inline-block;width:100%;padding:3px;text-align:center;font-size:1.2em}#wrapperNotAvailable[_ngcontent-%COMP%]{border:1px solid #57575a;cursor:auto}#text[_ngcontent-%COMP%], #titleGrey[_ngcontent-%COMP%]{display:inline-block}#titleGrey[_ngcontent-%COMP%]{color:#57575a}.notMet[_ngcontent-%COMP%]{color:var(--negative-colour)}.title[_ngcontent-%COMP%]{text-align:left}hr[_ngcontent-%COMP%]{border-color:#000}#progress[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background-color:var(--active-colour);z-index:1}#text[_ngcontent-%COMP%]{position:relative;z-index:2}app-icon[_ngcontent-%COMP%]{margin-top:-15px;height:17px}.perkTooltip[_ngcontent-%COMP%]{min-width:400px}"]],data:{}});function JI(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ks(1,null,[" Usages: ","/"," "]))],null,(function(e,n){var l=n.component;e(n,1,0,l.perk.usages,l.perk.maxUsages)}))}function eb(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ks(1,null,[" Usages: ","/unlimited "]))],null,(function(e,n){e(n,1,0,n.component.perk.usages)}))}function nb(e){return qs(0,[(e()(),Ds(0,0,null,null,14,"div",[["appTooltip",""],["class","tooltip"],["id","wrapper"]],null,[[null,"click"],[null,"mousemove"]],(function(e,n,l){var t=!0,i=e.component;return"mousemove"===n&&(t=!1!==Yt(e,1).onmousemove(l)&&t),"click"===n&&(t=!1!==i.unlock()&&t),t}),null,null)),ei(1,16384,null,0,vg,[],{elementId:[0,"elementId"]},null),(e()(),Ds(2,0,null,null,2,"div",[["id","text"]],null,null,null,null,null)),(e()(),Ds(3,0,null,null,1,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ks(4,null,[" "," "])),(e()(),Ds(5,0,null,null,9,"span",[["class","perkTooltip"]],[[8,"id",0]],null,null,null,null)),(e()(),Ds(6,0,null,null,0,"div",[],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Ds(7,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(8,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Ks(9,null,[" Cost: "," RP "])),(e()(),Ds(10,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,JI)),ei(12,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,eb)),ei(14,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,1,0,l.id),e(n,12,0,l.perk.maxUsages>0),e(n,14,0,0===l.perk.maxUsages)}),(function(e,n){var l=n.component;e(n,4,0,l.getPerkName()),e(n,5,0,Rt(1,"",l.id,"")),e(n,6,0,l.perk.description),e(n,9,0,l.perk.cost)}))}function lb(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(1,114688,null,0,Rg,[],{name:[0,"name"]},null)],(function(e,n){e(n,1,0,"tick")}),null)}function tb(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ks(1,null,[" Usages: ","/"," "]))],null,(function(e,n){var l=n.component;e(n,1,0,l.perk.usages,l.perk.maxUsages)}))}function ib(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ks(1,null,[" Usages: ","/unlimited "]))],null,(function(e,n){e(n,1,0,n.component.perk.usages)}))}function sb(e){return qs(0,[(e()(),Ds(0,0,null,null,16,"div",[["appTooltip",""],["class","tooltip"],["id","wrapperNotAvailable"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==Yt(e,1).onmousemove(l)&&t),t}),null,null)),ei(1,16384,null,0,vg,[],{elementId:[0,"elementId"]},null),(e()(),Ds(2,0,null,null,4,"div",[["id","titleGrey"]],null,null,null,null,null)),(e()(),Ds(3,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,lb)),ei(5,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ks(6,null,[""," "])),(e()(),Ds(7,0,null,null,9,"span",[["class","perkTooltip"]],[[8,"id",0]],null,null,null,null)),(e()(),Ds(8,0,null,null,0,"div",[],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Ds(9,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(10,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Ks(11,null,[" Cost: "," RP "])),(e()(),Ds(12,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,tb)),ei(14,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,ib)),ei(16,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,1,0,l.id),e(n,5,0,l.perk.usages===l.perk.maxUsages&&l.perk.maxUsages>0),e(n,14,0,l.perk.maxUsages>0),e(n,16,0,0===l.perk.maxUsages)}),(function(e,n){var l=n.component;e(n,6,0,l.getPerkName()),e(n,7,0,Rt(1,"",l.id,"")),e(n,8,0,l.perk.description),e(n,11,0,l.perk.cost)}))}function rb(e){return qs(0,[(e()(),Ms(16777216,null,null,1,null,nb)),ei(1,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,sb)),ei(3,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,1,0,l.isAvailable()),e(n,3,0,!l.isAvailable())}),null)}class ub{constructor(e,n){this.logService=e,this.royalService=n}ngOnInit(){}buyRoyalPoints(){this.royalService.buyRoyalPoints()}getRoyalPoints(){return this.royalService.getRoyalPoints()}getRoyalPerks(){return this.royalService.getRoyalPerks()}isGoldenFishCaught(){return this.royalService.isGoldenFishCaught()}isGoldenEggFound(){return this.royalService.isGoldenEggLaid()}isGoldenApplePicked(){return this.royalService.isGoldenApplePicked()}isGoldenFleeceFound(){return this.royalService.isGoldenFleeceFound()}getOneTimeUseRoyalPerks(){return this.royalService.getRoyalPerks().filter(e=>e.perk===ru.MOTIVATION_SPEECH||e.perk===ru.JESTER||e.perk===ru.CALL_TO_ARMS||e.perk===ru.ASTROLOGICAL_NOTE||e.perk===ru.ROYAL_FESTIVAL||e.perk===ru.ROYAL_RESERVE||e.perk===ru.ANCIENT_SEA_MAPS||e.perk===ru.HIRE_MERCENARIES||e.perk===ru.HIRE_PIRATES||e.perk===ru.ANCIENT_PROTECTION||e.perk===ru.ROYAL_TRADITIONS)}getPermanentUseRoyalPerks(){return this.royalService.getRoyalPerks().filter(e=>e.perk!==ru.MOTIVATION_SPEECH&&e.perk!==ru.JESTER&&e.perk!==ru.CALL_TO_ARMS&&e.perk!==ru.ASTROLOGICAL_NOTE&&e.perk!==ru.ROYAL_FESTIVAL&&e.perk!==ru.ROYAL_RESERVE&&e.perk!==ru.ANCIENT_SEA_MAPS&&e.perk!==ru.HIRE_MERCENARIES&&e.perk!==ru.HIRE_PIRATES&&e.perk!==ru.ANCIENT_PROTECTION&&e.perk!==ru.ROYAL_TRADITIONS)}}var ob=Kl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{margin:5px;display:flex;flex-direction:column}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}.bold[_ngcontent-%COMP%]{font-weight:600}app-royal-perk[_ngcontent-%COMP%]{font-size:1em;display:inline-block;width:30%;margin:4px 8px;cursor:pointer}#goldenItems[_ngcontent-%COMP%]{margin-top:10px}.groupTitle[_ngcontent-%COMP%]{font-weight:700;font-size:1.1em;text-align:center}"]],data:{}});function ab(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"app-royal-perk",[],null,null,null,rb,ZI)),ei(1,114688,null,0,XI,[Vp],{perk:[0,"perk"]},null)],(function(e,n){e(n,1,0,n.context.$implicit)}),null)}function cb(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"app-royal-perk",[],null,null,null,rb,ZI)),ei(1,114688,null,0,XI,[Vp],{perk:[0,"perk"]},null)],(function(e,n){e(n,1,0,n.context.$implicit)}),null)}function hb(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(2,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null)],(function(e,n){e(n,2,0,"fish","resources","golden fish")}),null)}function db(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(2,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null)],(function(e,n){e(n,2,0,"egg","resources","golden egg")}),null)}function gb(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(2,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null)],(function(e,n){e(n,2,0,"apple","resources","golden apple")}),null)}function pb(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(2,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null)],(function(e,n){e(n,2,0,"wool","resources","golden fleece")}),null)}function mb(e){return qs(0,[(e()(),Ds(0,0,null,null,35,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Royal perks"])),(e()(),Ds(3,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(4,0,null,null,6,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["You have "])),(e()(),Ds(6,0,null,null,1,"span",[["class","bold"]],null,null,null,null,null)),(e()(),Ks(7,null,["",""])),(e()(),Ks(-1,null,[" royal points."])),(e()(),Ds(9,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ks(-1,null,[" You can use them to acquire special upgrades."])),(e()(),Ds(11,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),Ds(12,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.buyRoyalPoints()&&t),t}),null,null)),(e()(),Ks(-1,null,["Buy Royal points"])),(e()(),Ds(14,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),Ds(15,0,null,null,1,"div",[["class","groupTitle"]],null,null,null,null,null)),(e()(),Ks(-1,null,["One time use perks"])),(e()(),Ms(16777216,null,null,1,null,ab)),ei(18,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ds(19,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Ds(20,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),Ds(21,0,null,null,1,"div",[["class","groupTitle"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Permanent perks"])),(e()(),Ms(16777216,null,null,1,null,cb)),ei(24,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ds(25,0,null,null,10,"div",[["id","goldenItems"]],null,null,null,null,null)),(e()(),Ds(26,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Golden items found:"])),(e()(),Ms(16777216,null,null,1,null,hb)),ei(29,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,db)),ei(31,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,gb)),ei(33,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,pb)),ei(35,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,18,0,l.getOneTimeUseRoyalPerks()),e(n,24,0,l.getPermanentUseRoyalPerks()),e(n,29,0,l.isGoldenFishCaught()),e(n,31,0,l.isGoldenEggFound()),e(n,33,0,l.isGoldenApplePicked()),e(n,35,0,l.isGoldenFleeceFound())}),(function(e,n){e(n,7,0,n.component.getRoyalPoints())}))}function fb(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"app-royal",[],null,null,null,mb,ob)),ei(1,114688,null,0,ub,[xp,Vp],null,null)],(function(e,n){e(n,1,0)}),null)}var Sb=Dt("app-royal",ub,fb,{},{},[]),Eb=["#wrapper[_ngcontent-%COMP%]{height:100%;max-height:100%;font-size:1em}#buttons[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{font-size:.9em;padding:7px 10px}#content[_ngcontent-%COMP%]{margin:.5%;display:flex;flex-direction:column;height:94%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#side[_ngcontent-%COMP%]{float:right;font-size:.9em;width:30%;text-align:center}#filters[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end}#side[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:.8em;margin:0;padding:0;border:none;outline:0}.buildingsWrapper[_ngcontent-%COMP%]{height:84.9%}.buildings[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;height:100%;border:2px solid #000;overflow-y:auto;align-content:flex-start}.buildings[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}#title[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]{text-align:center;border:2px solid #000;border-bottom:none}.title[_ngcontent-%COMP%]{display:flex;flex-direction:row}.page[_ngcontent-%COMP%]{flex:auto;text-align:center;border-right:2px solid #000;cursor:pointer}.activePage[_ngcontent-%COMP%]{background-color:var(--active-colour)}.page[_ngcontent-%COMP%]:last-of-type{border-right:none}.off[_ngcontent-%COMP%]{background-color:#555}.buildingRegularWrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:.6%}.buildingDropWrapper[_ngcontent-%COMP%]{display:flex;margin:.6%;cursor:move}.buildingDropWrapper[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}#allControl[_ngcontent-%COMP%]{margin-left:auto;width:108px;display:inline-block}#allControl[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:4px}.dropdown[_ngcontent-%COMP%]{display:inline-block;position:relative}.dropdown[_ngcontent-%COMP%]:active{background-color:var(--passive-colour)}.dropdown-content[_ngcontent-%COMP%]{cursor:pointer;display:none;position:absolute;list-style:none;background-color:#f9f9f9;min-width:100px;top:5px;font-size:1.2em;margin-top:25px;padding:0;border:1px solid #000;z-index:1000}.dropdown-content[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:pointer}.dropdown[_ngcontent-%COMP%]:hover   .dropdown-content[_ngcontent-%COMP%]{display:block}.dropdown-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background-color:var(--passive-colour);border:1px solid #000;padding:3px}.dropdown-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:var(--active-colour)}"];class vb{constructor(e,n,l,t){this.servicesService=e,this.resourcesService=n,this.effectsService=l,this.gameService=t,this.id=Math.random()}ngOnInit(){this.building.hasBuff()&&(this.buildingBuff=this.building.getBuff())}hasResource(e){return 0===this.resourcesService.hasResource(e.key,e.value,"Building buff",!0)}getResourceName(e){return Ou.prepareResourceName(e)}buff(){const e=this.servicesService.getModalService();if(this.building.hasBuff()&&this.buffsEnabled())if(this.building.isBuffed())e.info("This building is already buffed");else{const e=this.building.getBuff();this.resourcesService.decreaseResources(e.cost,"Building buff",!0)&&this.effectsService.addBuildingEffect(new yu(e.name,this.building.getBuildingType(),e.effect,e.duration,this.building.id))}else e.info("This building cannot be buffed")}buffsEnabled(){return this.gameService.isEnabled(ou.BUFFS)}}var Rb=Kl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{cursor:pointer}img[_ngcontent-%COMP%]{height:24px;width:24px}hr[_ngcontent-%COMP%]{border-color:#000}.notMet[_ngcontent-%COMP%]{color:var(--negative-colour)}"]],data:{}});function Ob(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),Ks(1,null,[""," "])),(e()(),Ds(2,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(3,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null)],(function(e,n){e(n,3,0,n.component.getResourceName(n.parent.context.$implicit.key),"resources")}),(function(e,n){e(n,1,0,n.parent.context.$implicit.value)}))}function Tb(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"div",[["class","notMet"]],null,null,null,null,null)),(e()(),Ks(1,null,[""," "])),(e()(),Ds(2,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(3,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null)],(function(e,n){e(n,3,0,n.component.getResourceName(n.parent.context.$implicit.key),"resources")}),(function(e,n){e(n,1,0,n.parent.context.$implicit.value)}))}function Cb(e){return qs(0,[(e()(),Ds(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,Ob)),ei(2,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,Tb)),ei(4,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.hasResource(n.context.$implicit)),e(n,4,0,!l.hasResource(n.context.$implicit))}),null)}function Ib(e){return qs(0,[(e()(),Ds(0,0,null,null,10,"div",[["appTooltip",""],["class","tooltip"],["id","buff"]],null,[[null,"click"],[null,"mousemove"]],(function(e,n,l){var t=!0,i=e.component;return"mousemove"===n&&(t=!1!==Yt(e,1).onmousemove(l)&&t),"click"===n&&(t=!1!==i.buff()&&t),t}),null,null)),ei(1,16384,null,0,vg,[],{elementId:[0,"elementId"]},null),(e()(),Ds(2,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/buff.svg"]],null,null,null,null,null)),(e()(),Ds(3,0,null,null,7,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),Ks(4,null,[" ",""])),(e()(),Ds(5,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ks(6,null,[" ","% buff for "," days "])),(e()(),Ds(7,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Ms(16777216,null,null,2,null,Cb)),ei(9,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),ni(0,fa,[Il])],(function(e,n){var l=n.component;e(n,1,0,0-l.id),e(n,9,0,$l(n,9,0,Yt(n,10).transform(l.buildingBuff.cost)))}),(function(e,n){var l=n.component;e(n,3,0,Rt(1,"",0-l.id,"")),e(n,4,0,l.buildingBuff.name),e(n,6,0,l.buildingBuff.effect,l.buildingBuff.duration)}))}function bb(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,Ib)),ei(2,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.buffsEnabled()&&l.building.hasBuff()&&!l.building.isBuffed())}),null)}class yb{constructor(e,n,l){this.resourcesService=e,this.landService=n,this.servicesService=l,this.id=Math.random()}ngOnInit(){}hasResource(e){return 0===this.resourcesService.hasResource(e.key,e.value,this.building.getName()+" upgrade",!0)}getResourceName(e){return Ou.prepareResourceName(e)}upgrade(){this.parentRegion.upgradeBuilding(this.building.getBuildingId())}getBuildingName(e){return Ou.prepareBuildingName(e)}}var Ab=Kl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{cursor:pointer}img[_ngcontent-%COMP%]{height:24px;width:24px}hr[_ngcontent-%COMP%]{border-color:#000}.notMet[_ngcontent-%COMP%]{color:var(--negative-colour)}"]],data:{}});function Nb(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ks(1,null,["Upgrade to ",""]))],null,(function(e,n){var l=n.component;e(n,1,0,l.getBuildingName(l.building.getUpgradeSettings().NEW_BUILDING))}))}function _b(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ks(1,null,["Upgrade to level ",""]))],null,(function(e,n){e(n,1,0,n.component.building.getBuildingLevel()+1)}))}function wb(e){return qs(0,[(e()(),Ds(0,0,null,null,5,"div",[],null,null,null,null,null)),ei(1,278528,null,0,la,[Cl,Il,il,ol],{ngClass:[0,"ngClass"]},null),zs(2,{notMet:0}),(e()(),Ks(3,null,[" ",""])),(e()(),Ds(4,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(5,114688,null,0,Rg,[],{name:[0,"name"]},null)],(function(e,n){var l=n.component,t=e(n,2,0,!l.landService.hasLand(l.building.getUpgradeSettings().SIZE));e(n,1,0,t),e(n,5,0,"land")}),(function(e,n){e(n,3,0,n.component.building.getUpgradeSettings().SIZE)}))}function Pb(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),Ks(1,null,[""," "])),(e()(),Ds(2,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(3,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null)],(function(e,n){e(n,3,0,n.component.getResourceName(n.parent.context.$implicit.key),"resources")}),(function(e,n){e(n,1,0,n.parent.context.$implicit.value)}))}function Mb(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"div",[["class","notMet"]],null,null,null,null,null)),(e()(),Ks(1,null,[""," "])),(e()(),Ds(2,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(3,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null)],(function(e,n){e(n,3,0,n.component.getResourceName(n.parent.context.$implicit.key),"resources")}),(function(e,n){e(n,1,0,n.parent.context.$implicit.value)}))}function Db(e){return qs(0,[(e()(),Ds(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,Pb)),ei(2,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,Mb)),ei(4,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.hasResource(n.context.$implicit)),e(n,4,0,!l.hasResource(n.context.$implicit))}),null)}function Lb(e){return qs(0,[(e()(),Ds(0,0,null,null,13,"div",[["appTooltip",""],["class","tooltip"],["id","upgrade"]],null,[[null,"click"],[null,"mousemove"]],(function(e,n,l){var t=!0,i=e.component;return"mousemove"===n&&(t=!1!==Yt(e,1).onmousemove(l)&&t),"click"===n&&(t=!1!==i.upgrade()&&t),t}),null,null)),ei(1,16384,null,0,vg,[],{elementId:[0,"elementId"]},null),(e()(),Ds(2,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/upgrade.svg"]],null,null,null,null,null)),(e()(),Ds(3,0,null,null,10,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,Nb)),ei(5,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,_b)),ei(7,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(8,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,wb)),ei(10,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,2,null,Db)),ei(12,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),ni(0,fa,[Il])],(function(e,n){var l=n.component;e(n,1,0,0-l.id),e(n,5,0,l.building.getUpgradeSettings()&&l.building.getUpgradeSettings().NEW_BUILDING),e(n,7,0,l.building.getUpgradeSettings()&&void 0===l.building.getUpgradeSettings().NEW_BUILDING),e(n,10,0,l.building.getUpgradeSettings()&&l.building.getUpgradeSettings().SIZE),e(n,12,0,$l(n,12,0,Yt(n,13).transform(l.building.getUpgradeCost())))}),(function(e,n){e(n,3,0,Rt(1,"",0-n.component.id,""))}))}function xb(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,Lb)),ei(2,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){e(n,2,0,n.component.building.hasUpgrade())}),null)}class kb{constructor(){}ngOnInit(){}isTextValue(e){return e===Df.TEXT}isButtonValue(e){return e===Df.BUTTON}isTwoButtonValue(e){return e===Df.TWO_BUTTON}isProgressValue(e){return e===Df.PROGRESS_BAR}isDropdownValue(e){return e===Df.DROPDOWN}isIconValue(e){return e===Df.ICON}isButtonCheckboxValue(e){return e===Df.BUTTON_CHECKBOX}isCheckboxValue(e){return e===Df.CHECKBOX}buildingCallback(e){this.building.callback(e)}}var Fb=Kl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{font-size:1.3em}.iconsLine[_ngcontent-%COMP%]{display:flex;flex-direction:row}.iconsLine[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:auto}.line[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:1px 4px}button[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{font-size:.9em}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center}.icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:2px;flex:0 0 auto}"]],data:{}});function Ub(e){return qs(0,[(e()(),Ds(0,0,null,null,5,"span",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,4,"span",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Ds(3,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(4,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ds(5,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null))],(function(e,n){e(n,4,0,n.context.$implicit.name,n.context.$implicit.path)}),(function(e,n){e(n,2,0,n.context.$implicit.prefix),e(n,5,0,n.context.$implicit.suffix)}))}function Hb(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"span",[["class","line iconsLine"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,Ub)),ei(2,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.building.getLine(l.line).getValue())}),null)}function Gb(e){return qs(0,[(e()(),Ds(0,0,null,null,0,"span",[["class","line"]],[[8,"innerHTML",1]],null,null,null,null))],null,(function(e,n){var l=n.component;e(n,0,0,l.building.getLine(l.line).getValue())}))}function Bb(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"span",[["class","line"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0,i=e.component;return"click"===n&&(t=!1!==i.buildingCallback(i.building.getLine(i.line).getValue().callbackValue)&&t),t}),null,null)),(e()(),Ks(2,null,[""," "]))],null,(function(e,n){var l=n.component;e(n,2,0,l.building.getLine(l.line).getValue().buttonText)}))}function Vb(e){return qs(0,[(e()(),Ds(0,0,null,null,10,"span",[["class","line"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0,i=e.component;return"click"===n&&(t=!1!==i.buildingCallback(i.building.getLine(i.line).getValue().callbackValue)&&t),t}),null,null)),(e()(),Ks(2,null,[""," "])),(e()(),Ds(3,0,null,null,7,"label",[],null,null,null,null,null)),(e()(),Ds(4,0,null,null,5,"input",[["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"change"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,5).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==Yt(e,5).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.building.getLine(i.line).getValue().checkboxState=l)&&t),"click"===n&&(t=!1!==i.buildingCallback(i.building.getLine(i.line).getValue().checkboxCallbackValue)&&t),t}),null,null)),ei(5,16384,null,0,bg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[bg]),ei(7,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(9,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ks(10,null,[""," "]))],(function(e,n){var l=n.component;e(n,7,0,l.building.getLine(l.line).getValue().checkboxState)}),(function(e,n){var l=n.component;e(n,2,0,l.building.getLine(l.line).getValue().buttonText),e(n,4,0,Yt(n,9).ngClassUntouched,Yt(n,9).ngClassTouched,Yt(n,9).ngClassPristine,Yt(n,9).ngClassDirty,Yt(n,9).ngClassValid,Yt(n,9).ngClassInvalid,Yt(n,9).ngClassPending),e(n,10,0,l.building.getLine(l.line).getValue().checkboxLabel)}))}function Wb(e){return qs(0,[(e()(),Ds(0,0,null,null,8,"span",[["class","line"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,7,"label",[],null,null,null,null,null)),(e()(),Ds(2,0,null,null,5,"input",[["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"change"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,3).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==Yt(e,3).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.building.getLine(i.line).getValue().checkboxState=l)&&t),"click"===n&&(t=!1!==i.buildingCallback(i.building.getLine(i.line).getValue().checkboxCallbackValue)&&t),t}),null,null)),ei(3,16384,null,0,bg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[bg]),ei(5,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(7,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ks(8,null,[""," "]))],(function(e,n){var l=n.component;e(n,5,0,l.building.getLine(l.line).getValue().checkboxState)}),(function(e,n){var l=n.component;e(n,2,0,Yt(n,7).ngClassUntouched,Yt(n,7).ngClassTouched,Yt(n,7).ngClassPristine,Yt(n,7).ngClassDirty,Yt(n,7).ngClassValid,Yt(n,7).ngClassInvalid,Yt(n,7).ngClassPending),e(n,8,0,l.building.getLine(l.line).getValue().checkboxLabel)}))}function Yb(e){return qs(0,[(e()(),Ds(0,0,null,null,5,"span",[["class","line"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0,i=e.component;return"click"===n&&(t=!1!==i.buildingCallback(i.building.getLine(i.line).getValue().callback1Value)&&t),t}),null,null)),(e()(),Ks(2,null,["",""])),(e()(),Ds(3,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Ds(4,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0,i=e.component;return"click"===n&&(t=!1!==i.buildingCallback(i.building.getLine(i.line).getValue().callback2Value)&&t),t}),null,null)),(e()(),Ks(5,null,["",""]))],null,(function(e,n){var l=n.component;e(n,2,0,l.building.getLine(l.line).getValue().button1Text),e(n,3,0,l.building.getLine(l.line).getValue().textBetween),e(n,5,0,l.building.getLine(l.line).getValue().button2Text)}))}function zb(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"option",[],null,null,null,null,null)),ei(1,147456,null,0,qg,[il,ol,[2,Qg]],{value:[0,"value"]},null),ei(2,147456,null,0,Zg,[il,ol,[8,null]],{value:[0,"value"]},null),(e()(),Ks(3,null,["",""]))],(function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)}),(function(e,n){e(n,3,0,n.context.$implicit)}))}function $b(e){return qs(0,[(e()(),Ds(0,0,null,null,8,"span",[["class","line"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,7,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,2).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,2).onTouched()&&t),"change"===n&&(t=!1!==i.buildingCallback(l)&&t),"ngModelChange"===n&&(t=!1!==(i.building.getLine(i.line).getValue().selected=l)&&t),t}),null,null)),ei(2,16384,null,0,Qg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[Qg]),ei(4,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(6,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ms(16777216,null,null,1,null,zb)),ei(8,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,4,0,l.building.getLine(l.line).getValue().selected),e(n,8,0,l.building.getLine(l.line).getValue().values)}),(function(e,n){e(n,1,0,Yt(n,6).ngClassUntouched,Yt(n,6).ngClassTouched,Yt(n,6).ngClassPristine,Yt(n,6).ngClassDirty,Yt(n,6).ngClassValid,Yt(n,6).ngClassInvalid,Yt(n,6).ngClassPending)}))}function Kb(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"app-progress-bar",[],null,null,null,mT,dT)),ei(1,638976,null,0,hT,[wp],{progress:[0,"progress"],text:[1,"text"]},null)],(function(e,n){var l=n.component;e(n,1,0,l.building.getLine(l.line).getValue().value,l.building.getLine(l.line).getValue().label)}),null)}function jb(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"span",[["class","line"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,Kb)),ei(2,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.building.getLine(l.line).getValue().value>=0)}),null)}function Qb(e){return qs(0,[(e()(),Ds(0,0,null,null,16,"span",[["id","wrapper"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,Hb)),ei(2,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,Gb)),ei(4,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,Bb)),ei(6,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,Vb)),ei(8,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,Wb)),ei(10,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,Yb)),ei(12,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,$b)),ei(14,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,jb)),ei(16,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.isIconValue(l.building.getLine(l.line).getValueType())),e(n,4,0,l.isTextValue(l.building.getLine(l.line).getValueType())),e(n,6,0,l.isButtonValue(l.building.getLine(l.line).getValueType())),e(n,8,0,l.isButtonCheckboxValue(l.building.getLine(l.line).getValueType())),e(n,10,0,l.isCheckboxValue(l.building.getLine(l.line).getValueType())),e(n,12,0,l.isTwoButtonValue(l.building.getLine(l.line).getValueType())),e(n,14,0,l.isDropdownValue(l.building.getLine(l.line).getValueType())),e(n,16,0,l.isProgressValue(l.building.getLine(l.line).getValueType()))}),null)}function qb(e){return qs(0,[(e()(),Ms(16777216,null,null,1,null,Qb)),ei(1,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,1,0,null!=l.line&&l.building)}),null)}class Xb{constructor(e,n,l,t,i,s,r){this.modalService=e,this.servicesService=n,this.resourcesService=l,this.managementService=t,this.villageService=i,this.optionsService=s,this.logService=r,this.demolishMode=!1,this.combineMode=!1,this.splitMode=!1,this.arrangeMode=!1,this.lines=Mf,this.id=Math.random(),this.lastEffectsDisplayValue=0,this.hasEffectsDisplayChanged=!1}ngOnInit(){}fitText(){if(this.centerRef){this.hasEffectsDisplayChanged=!1;const e=15,n=this.centerRef.nativeElement;let l=n.clientWidth,t=n.scrollWidth,i=parseInt(window.getComputedStyle(n,null).getPropertyValue("font-size"),10);if(t>l)i=Math.ceil(i*l/t),i=i>e?i=e:i-1,n.style.fontSize=i+"px";else for(;t===l&&i<e;)i=Math.ceil(i)+1,i=i>e?i=e:i,n.style.fontSize=i+"px",l=n.clientWidth,t=n.scrollWidth,t>l&&(n.style.fontSize=i-1+"px")}}stop(){this.building.isWorking()?this.building.stopProduction():this.building.startProduction()||this.modalService.info("Cannot unlock production of "+this.building.getName()+". Number of free workers: "+this.resourcesService.getPeople())}isStoppable(){return this.building.isStoppable()}isWorking(){return this.building.isWorking()}demolish(){if(void 0!==this.building.getMaxSize&&this.villageService.getPopulation()>this.villageService.getPopulationCap()-this.building.getMaxSize()){this.modalService.open(Pu.CONFIRM),this.modalService.setModalText("You don't have enough housing space to move this building occupants.<br> People that won't find new home will leave the village<br>Do you still want to demolish this building?");const e=this.modalService.registerForConfirmation().subscribe(n=>{e.unsubscribe(),n&&this.building.prepareDemolish()&&this.parentRegion.demolish(this.building)})}else if(this.building.isUsedUp())this.building.prepareDemolish()&&this.parentRegion.demolish(this.building);else{this.modalService.setModalText("Are you sure you want to demolish "+this.building.getName()+"?"),this.modalService.open(Pu.CONFIRM);const e=this.modalService.registerForConfirmation().subscribe(n=>{e.unsubscribe(),n&&this.building.prepareDemolish()&&this.parentRegion.demolish(this.building)})}}canCombine(){return this.parentRegion.canCombine(this.building)}combine(){this.parentRegion.combine(this.building)}split(){this.parentRegion.split(this.building)}areComplexWorkersEnabled(){return this.managementService.getComplexWorkers()}openWorkersManagement(e){e.ctrlKey?this.building.getWorkSettings().enabled?(this.building.getWorkSettings().enabled=!1,this.stop()):this.stop():e.shiftKey?this.building.getWorkSettings().enabled=!this.building.getWorkSettings().enabled:(this.modalService.open(Pu.WORK_MANAGEMENT),this.modalService.setBuilding(this.building))}round(e){return e%1!=0?Ou.round(e,2):e}arrange(){this.parentRegion.move(this.building)}canMove(){return this.parentRegion.canMove(this.building)}getDisplayableEffectsValue(){const e=this.building.getDisplayableEffectsValue();return this.lastEffectsDisplayValue!==e&&(this.lastEffectsDisplayValue=e,this.hasEffectsDisplayChanged=!0),e}isTextFittingEnabled(){return this.optionsService.getOption(_p.AUTO_TEXT_FITTING)}ngAfterViewChecked(){this.hasEffectsDisplayChanged&&this.isTextFittingEnabled()&&this.fitText()}}var Zb=Kl({encapsulation:0,styles:[["[_nghost-%COMP%]{height:15%;min-height:125px;width:10%;min-width:206px;border:1px solid #000}#wrapper[_ngcontent-%COMP%], [_nghost-%COMP%]{overflow:hidden}#wrapper[_ngcontent-%COMP%]{position:relative;height:100%;text-align:center;font-size:.7em}.usedUp[_ngcontent-%COMP%]{background-color:rgba(126,122,121,.6)}#demolish[_ngcontent-%COMP%]{position:absolute;font-weight:600;font-size:2em;top:0;left:0;width:100%;height:100%;background-color:rgba(126,122,121,.7);justify-content:center;align-items:center;display:flex;cursor:pointer}#demolishText[_ngcontent-%COMP%]{display:block}#arrange[_ngcontent-%COMP%], #combine[_ngcontent-%COMP%], #split[_ngcontent-%COMP%]{position:absolute;font-weight:600;font-size:2em;top:0;left:0;width:100%;height:100%;background-color:rgba(126,122,121,.7);justify-content:center;align-items:center;display:flex;cursor:pointer}.combineText[_ngcontent-%COMP%]{display:block}#nameBar[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;height:24px;font-size:1.4em;font-weight:700;border-bottom:1px solid #000;white-space:nowrap}#left[_ngcontent-%COMP%]{flex:1 0 24px}#center[_ngcontent-%COMP%]{flex:1 0 152px;font-size:.8em;overflow:hidden;line-height:24px}#right[_ngcontent-%COMP%]{flex:1 0 24px}.control[_ngcontent-%COMP%]{float:right;font-size:.6em;margin-right:2px;cursor:pointer}.control[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px;height:24px}#lines[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column}app-progress-bar[_ngcontent-%COMP%]{display:block;height:18px}app-building-line[_ngcontent-%COMP%]{height:20px;display:block;margin-top:3px;flex:1 0 auto}img[_ngcontent-%COMP%]{height:24px}.details[_ngcontent-%COMP%]{float:left;font-size:.75em;margin-right:2px}.positiveEffects[_ngcontent-%COMP%]{font-size:.7em;color:var(--positive-colour)}.negativeEffects[_ngcontent-%COMP%]{font-size:.7em;color:var(--negative-colour)}.tooltipSpan[_ngcontent-%COMP%]{font-size:1.5em;font-weight:100;text-align:left}.tooltipSpan[_ngcontent-%COMP%]   #title[_ngcontent-%COMP%]{text-align:center}.tooltipSpan[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border-color:#000}app-building-buff[_ngcontent-%COMP%]{position:absolute;right:0;top:0}app-building-upgrade[_ngcontent-%COMP%]{position:absolute;left:-2px;top:0}"]],data:{}});function Jb(e){return qs(0,[(e()(),Ds(0,0,null,null,7,"span",[["appTooltip",""],["class","details tooltip"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==Yt(e,1).onmousemove(l)&&t),t}),null,null)),ei(1,16384,null,0,vg,[],{elementId:[0,"elementId"]},null),(e()(),Ds(2,0,null,null,0,"img",[["alt","details"],["draggable","false"],["ondragstart","return false;"],["src","assets/details.svg"]],null,null,null,null,null)),(e()(),Ds(3,0,null,null,4,"span",[["class","tooltipSpan"]],[[8,"id",0]],null,null,null,null)),(e()(),Ds(4,0,null,null,1,"div",[["id","title"]],null,null,null,null,null)),(e()(),Ks(5,null,["",""])),(e()(),Ds(6,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Ds(7,0,null,null,0,"div",[],[[8,"innerHTML",1]],null,null,null,null))],(function(e,n){e(n,1,0,n.component.id)}),(function(e,n){var l=n.component;e(n,3,0,Rt(1,"",l.id,"")),e(n,5,0,l.building.getName()),e(n,7,0,l.building.getDetails())}))}function ey(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[["class","positiveEffects"]],null,null,null,null,null)),(e()(),Ks(1,null,["(+","%)"]))],null,(function(e,n){var l=n.component;e(n,1,0,l.round(l.getDisplayableEffectsValue()))}))}function ny(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[["class","negativeEffects"]],null,null,null,null,null)),(e()(),Ks(1,null,["(","%)"]))],null,(function(e,n){var l=n.component;e(n,1,0,l.round(l.getDisplayableEffectsValue()))}))}function ly(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[["class","control"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.stop()&&t),t}),null,null)),(e()(),Ds(1,0,null,null,0,"img",[["alt","on"],["draggable","false"],["ondragstart","return false;"],["src","assets/gear.svg"],["title","disable"]],null,null,null,null,null))],null,null)}function ty(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[["class","control"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.stop()&&t),t}),null,null)),(e()(),Ds(1,0,null,null,0,"img",[["alt","off"],["draggable","false"],["ondragstart","return false;"],["src","assets/gear_off.svg"],["title","enable"]],null,null,null,null,null))],null,null)}function iy(e){return qs(0,[(e()(),Ds(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,ly)),ei(2,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,ty)),ei(4,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(0,null,null,0))],(function(e,n){var l=n.component;e(n,2,0,l.isStoppable()&&l.isWorking()),e(n,4,0,l.isStoppable()&&!l.isWorking())}),null)}function sy(e){return qs(0,[(e()(),Ds(0,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/complex_management_on_on.svg"],["title","work settings"]],null,null,null,null,null))],null,null)}function ry(e){return qs(0,[(e()(),Ds(0,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/complex_management_on_off.svg"],["title","work settings"]],null,null,null,null,null))],null,null)}function uy(e){return qs(0,[(e()(),Ds(0,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/complex_management_off_on.svg"],["title","work settings"]],null,null,null,null,null))],null,null)}function oy(e){return qs(0,[(e()(),Ds(0,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/complex_management_off_off.svg"],["title","work settings"]],null,null,null,null,null))],null,null)}function ay(e){return qs(0,[(e()(),Ds(0,0,null,null,8,"span",[["class","control"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.openWorkersManagement(l)&&t),t}),null,null)),(e()(),Ms(16777216,null,null,1,null,sy)),ei(2,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,ry)),ei(4,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,uy)),ei(6,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,oy)),ei(8,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.building.getWorkSettings().enabled&&l.building.isWorking()),e(n,4,0,l.building.getWorkSettings().enabled&&!l.building.isWorking()),e(n,6,0,!l.building.getWorkSettings().enabled&&l.building.isWorking()),e(n,8,0,!l.building.getWorkSettings().enabled&&!l.building.isWorking())}),null)}function cy(e){return qs(0,[(e()(),Ds(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,ay)),ei(2,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(0,null,null,0))],(function(e,n){e(n,2,0,n.component.isStoppable())}),null)}function hy(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"div",[["id","demolish"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.demolish()&&t),t}),null,null)),(e()(),Ds(1,0,null,null,1,"span",[["id","demolishText"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Demolish"]))],null,null)}function dy(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"div",[["id","combine"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.combine()&&t),t}),null,null)),(e()(),Ds(1,0,null,null,1,"span",[["class","combineText"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Combine"]))],null,null)}function gy(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"div",[["id","split"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.split()&&t),t}),null,null)),(e()(),Ds(1,0,null,null,1,"span",[["class","combineText"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Split"]))],null,null)}function py(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"div",[["id","arrange"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.arrange()&&t),t}),null,null)),(e()(),Ds(1,0,null,null,1,"span",[["class","combineText"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Move"]))],null,null)}function my(e){return qs(0,[Us(671088640,1,{centerRef:0}),(e()(),Ds(1,0,null,null,38,"div",[["id","wrapper"]],null,null,null,null,null)),ei(2,278528,null,0,la,[Cl,Il,il,ol],{ngClass:[0,"ngClass"]},null),zs(3,{usedUp:0}),(e()(),Ds(4,0,null,null,14,"div",[["id","nameBar"]],null,null,null,null,null)),(e()(),Ds(5,0,null,null,2,"div",[["id","left"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,Jb)),ei(7,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(8,0,[[1,0],["center",1]],null,5,"div",[["id","center"]],null,null,null,null,null)),(e()(),Ks(9,null,[""," "])),(e()(),Ms(16777216,null,null,1,null,ey)),ei(11,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,ny)),ei(13,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(14,0,null,null,4,"div",[["id","right"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,iy)),ei(16,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,cy)),ei(18,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(19,0,null,null,12,"div",[["id","lines"]],null,null,null,null,null)),(e()(),Ds(20,0,null,null,1,"app-building-buff",[],null,null,null,bb,Rb)),ei(21,114688,null,0,vb,[Np,Qp,BE,Gp],{building:[0,"building"]},null),(e()(),Ds(22,0,null,null,1,"app-building-upgrade",[],null,null,null,xb,Ab)),ei(23,114688,null,0,yb,[Qp,WE,Np],{building:[0,"building"],parentRegion:[1,"parentRegion"]},null),(e()(),Ds(24,0,null,null,1,"app-building-line",[],null,null,null,qb,Fb)),ei(25,114688,null,0,kb,[],{line:[0,"line"],building:[1,"building"]},null),(e()(),Ds(26,0,null,null,1,"app-building-line",[],null,null,null,qb,Fb)),ei(27,114688,null,0,kb,[],{line:[0,"line"],building:[1,"building"]},null),(e()(),Ds(28,0,null,null,1,"app-building-line",[],null,null,null,qb,Fb)),ei(29,114688,null,0,kb,[],{line:[0,"line"],building:[1,"building"]},null),(e()(),Ds(30,0,null,null,1,"app-building-line",[],null,null,null,qb,Fb)),ei(31,114688,null,0,kb,[],{line:[0,"line"],building:[1,"building"]},null),(e()(),Ms(16777216,null,null,1,null,hy)),ei(33,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,dy)),ei(35,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,gy)),ei(37,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,py)),ei(39,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component,t=e(n,3,0,l.building.isUsedUp());e(n,2,0,t),e(n,7,0,l.building.hasDetails()),e(n,11,0,l.getDisplayableEffectsValue()>0),e(n,13,0,l.getDisplayableEffectsValue()<0),e(n,16,0,!l.building.isComplexManagement()||l.building.isComplexManagement()&&!l.areComplexWorkersEnabled()),e(n,18,0,l.building.isComplexManagement()&&l.areComplexWorkersEnabled()),e(n,21,0,l.building),e(n,23,0,l.building,l.parentRegion),e(n,25,0,l.lines.FIRST,l.building),e(n,27,0,l.lines.SECOND,l.building),e(n,29,0,l.lines.THIRD,l.building),e(n,31,0,l.lines.FOURTH,l.building),e(n,33,0,l.demolishMode&&l.building.isDemolishable()),e(n,35,0,l.combineMode&&l.building.isCombinable()&&l.canCombine()),e(n,37,0,l.splitMode&&l.building.isSplittable()),e(n,39,0,l.arrangeMode&&l.canMove())}),(function(e,n){e(n,9,0,n.component.building.getName())}))}class fy{constructor(e,n){this.gameService=e,this.resourcesService=n}ngOnInit(){}isFortEnabled(){return this.gameService.isEnabled(ou.FORT)}isFieldEnabled(){return this.gameService.isEnabled(ou.FIELD)}isSeaEnabled(){return this.gameService.isEnabled(ou.SEA)}isMountainsEnabled(){return this.gameService.isEnabled(ou.MOUNTAINS)}isPlateauEnabled(){return this.gameService.isEnabled(ou.PLATEAU)}getVillageStageName(){let e="Village";return go.forEach(n=>{this.resourcesService.getPopulationCap()>=n.population&&(e=n.name)}),e}}var Sy=Kl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{flex-direction:row}#wrapper[_ngcontent-%COMP%], .entry[_ngcontent-%COMP%]{display:flex;height:100%}.entry[_ngcontent-%COMP%]{flex:auto;justify-content:center;flex-direction:column;text-align:center;border-right:2px solid #000;cursor:pointer;text-decoration:none;color:#000;font-size:1em}.entry[_ngcontent-%COMP%]:last-of-type{border:none}.entry.active[_ngcontent-%COMP%]{background:var(--active-colour)}"]],data:{}});function Ey(e){return qs(0,[(e()(),Ds(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/regions/fort"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==Yt(e,1).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ei(1,671744,[[4,4]],0,Hd,[Fd,Rh,Ho],{routerLink:[0,"routerLink"]},null),ei(2,1720320,null,2,Bd,[Fd,il,ol,Nn,[2,Ud],[2,Hd]],{routerLinkActive:[0,"routerLinkActive"]},null),Us(603979776,3,{links:1}),Us(603979776,4,{linksWithHrefs:1}),(e()(),Ks(-1,null,["Fort"]))],(function(e,n){e(n,1,0,"/regions/fort"),e(n,2,0,"active")}),(function(e,n){e(n,0,0,Yt(n,1).target,Yt(n,1).href)}))}function vy(e){return qs(0,[(e()(),Ds(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/regions/field"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==Yt(e,1).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ei(1,671744,[[8,4]],0,Hd,[Fd,Rh,Ho],{routerLink:[0,"routerLink"]},null),ei(2,1720320,null,2,Bd,[Fd,il,ol,Nn,[2,Ud],[2,Hd]],{routerLinkActive:[0,"routerLinkActive"]},null),Us(603979776,7,{links:1}),Us(603979776,8,{linksWithHrefs:1}),(e()(),Ks(-1,null,["Field"]))],(function(e,n){e(n,1,0,"/regions/field"),e(n,2,0,"active")}),(function(e,n){e(n,0,0,Yt(n,1).target,Yt(n,1).href)}))}function Ry(e){return qs(0,[(e()(),Ds(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/regions/mountains"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==Yt(e,1).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ei(1,671744,[[10,4]],0,Hd,[Fd,Rh,Ho],{routerLink:[0,"routerLink"]},null),ei(2,1720320,null,2,Bd,[Fd,il,ol,Nn,[2,Ud],[2,Hd]],{routerLinkActive:[0,"routerLinkActive"]},null),Us(603979776,9,{links:1}),Us(603979776,10,{linksWithHrefs:1}),(e()(),Ks(-1,null,["Mountains"]))],(function(e,n){e(n,1,0,"/regions/mountains"),e(n,2,0,"active")}),(function(e,n){e(n,0,0,Yt(n,1).target,Yt(n,1).href)}))}function Oy(e){return qs(0,[(e()(),Ds(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/regions/plateau"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==Yt(e,1).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ei(1,671744,[[12,4]],0,Hd,[Fd,Rh,Ho],{routerLink:[0,"routerLink"]},null),ei(2,1720320,null,2,Bd,[Fd,il,ol,Nn,[2,Ud],[2,Hd]],{routerLinkActive:[0,"routerLinkActive"]},null),Us(603979776,11,{links:1}),Us(603979776,12,{linksWithHrefs:1}),(e()(),Ks(-1,null,["Plateau"]))],(function(e,n){e(n,1,0,"/regions/plateau"),e(n,2,0,"active")}),(function(e,n){e(n,0,0,Yt(n,1).target,Yt(n,1).href)}))}function Ty(e){return qs(0,[(e()(),Ds(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/regions/sea"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==Yt(e,1).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ei(1,671744,[[14,4]],0,Hd,[Fd,Rh,Ho],{routerLink:[0,"routerLink"]},null),ei(2,1720320,null,2,Bd,[Fd,il,ol,Nn,[2,Ud],[2,Hd]],{routerLinkActive:[0,"routerLinkActive"]},null),Us(603979776,13,{links:1}),Us(603979776,14,{linksWithHrefs:1}),(e()(),Ks(-1,null,["Sea"]))],(function(e,n){e(n,1,0,"/regions/sea"),e(n,2,0,"active")}),(function(e,n){e(n,0,0,Yt(n,1).target,Yt(n,1).href)}))}function Cy(e){return qs(0,[(e()(),Ds(0,0,null,null,22,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/regions/village"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==Yt(e,2).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ei(2,671744,[[2,4]],0,Hd,[Fd,Rh,Ho],{routerLink:[0,"routerLink"]},null),ei(3,1720320,null,2,Bd,[Fd,il,ol,Nn,[2,Ud],[2,Hd]],{routerLinkActive:[0,"routerLinkActive"]},null),Us(603979776,1,{links:1}),Us(603979776,2,{linksWithHrefs:1}),(e()(),Ks(6,null,["",""])),(e()(),Ms(16777216,null,null,1,null,Ey)),ei(8,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(9,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/regions/forest"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==Yt(e,10).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ei(10,671744,[[6,4]],0,Hd,[Fd,Rh,Ho],{routerLink:[0,"routerLink"]},null),ei(11,1720320,null,2,Bd,[Fd,il,ol,Nn,[2,Ud],[2,Hd]],{routerLinkActive:[0,"routerLinkActive"]},null),Us(603979776,5,{links:1}),Us(603979776,6,{linksWithHrefs:1}),(e()(),Ks(-1,null,["Forest"])),(e()(),Ms(16777216,null,null,1,null,vy)),ei(16,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,Ry)),ei(18,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,Oy)),ei(20,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,Ty)),ei(22,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,2,0,"/regions/village"),e(n,3,0,"active"),e(n,8,0,l.isFortEnabled()),e(n,10,0,"/regions/forest"),e(n,11,0,"active"),e(n,16,0,l.isFieldEnabled()),e(n,18,0,l.isMountainsEnabled()),e(n,20,0,l.isPlateauEnabled()),e(n,22,0,l.isSeaEnabled())}),(function(e,n){var l=n.component;e(n,1,0,Yt(n,2).target,Yt(n,2).href),e(n,6,0,l.getVillageStageName()),e(n,9,0,Yt(n,10).target,Yt(n,10).href)}))}class Iy{constructor(e){this.happinessService=e,this.id=Math.random()}ngOnInit(){}getHappiness(){return Ou.round(this.happinessService.getHappiness(),2)}getHappinessValue(){return this.happinessService.getHappiness()}getSum(){return this.happinessService.calculateDailyChange()}getSumText(){return Ou.round(this.getSum(),2)}getHappinessBonus(){return this.happinessService.getHappinessEffect()}}var by=Kl({encapsulation:0,styles:[["[_nghost-%COMP%]{display:inline-block}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.inline[_ngcontent-%COMP%]{display:inline-block}#title[_ngcontent-%COMP%]{font-size:1.3em;font-weight:800}#title[_ngcontent-%COMP%], .center[_ngcontent-%COMP%]{text-align:center}.positiveColor[_ngcontent-%COMP%]{color:var(--positive-colour)}.negativeColor[_ngcontent-%COMP%]{color:var(--negative-colour)}"]],data:{}});function yy(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(1,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"],margin:[3,"margin"]},null)],(function(e,n){e(n,1,0,"angry","happiness","","0 0 0 4px")}),null)}function Ay(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(1,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"],margin:[3,"margin"]},null)],(function(e,n){e(n,1,0,"sad","happiness","","0 0 0 4px")}),null)}function Ny(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(1,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"],margin:[3,"margin"]},null)],(function(e,n){e(n,1,0,"neutral","happiness","","0 0 0 4px")}),null)}function _y(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(1,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"],margin:[3,"margin"]},null)],(function(e,n){e(n,1,0,"happy","happiness","","0 0 0 4px")}),null)}function wy(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(1,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"],margin:[3,"margin"]},null)],(function(e,n){e(n,1,0,"overjoyed","happiness","","0 0 0 4px")}),null)}function Py(e){return qs(0,[(e()(),Ds(0,0,null,null,34,"div",[["appTooltip",""],["class","tooltip"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==Yt(e,1).onmousemove(l)&&t),t}),null,null)),ei(1,16384,null,0,vg,[],{elementId:[0,"elementId"]},null),(e()(),Ds(2,0,null,null,17,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),Ds(3,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),Ds(4,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Happiness"])),(e()(),Ds(6,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(7,0,null,null,6,"div",[["class","center"]],null,null,null,null,null)),(e()(),Ks(-1,null,[" (bonus: "])),(e()(),Ds(9,0,null,null,3,"div",[["class","inline"]],null,null,null,null,null)),ei(10,278528,null,0,la,[Cl,Il,il,ol],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),zs(11,{negativeColor:0,positiveColor:1}),(e()(),Ks(12,null,["","%"])),(e()(),Ks(-1,null,[") "])),(e()(),Ds(14,0,null,null,5,"div",[["class","center inline"]],null,null,null,null,null)),(e()(),Ds(15,0,null,null,3,"div",[["class","center inline"]],null,null,null,null,null)),ei(16,278528,null,0,la,[Cl,Il,il,ol],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),zs(17,{negativeColor:0,positiveColor:1}),(e()(),Ks(18,null,["","%"])),(e()(),Ks(-1,null,[" per day "])),(e()(),Ds(20,0,null,null,14,"div",[["class","icon"],["id","wrapper"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,yy)),ei(22,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,Ay)),ei(24,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,Ny)),ei(26,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,_y)),ei(28,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,wy)),ei(30,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(31,0,null,null,3,"div",[["class","inline"]],null,null,null,null,null)),ei(32,278528,null,0,la,[Cl,Il,il,ol],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),zs(33,{negativeColor:0,positiveColor:1}),(e()(),Ks(34,null,["","%"]))],(function(e,n){var l=n.component;e(n,1,0,"happiness-"+l.id);var t=e(n,11,0,l.getHappinessBonus()<0,l.getHappinessBonus()>0);e(n,10,0,"inline",t);var i=e(n,17,0,l.getSum()<0,l.getSum()>0);e(n,16,0,"center inline",i),e(n,22,0,l.getHappinessValue()>=0&&l.getHappinessValue()<=10),e(n,24,0,l.getHappinessValue()>10&&l.getHappinessValue()<=40),e(n,26,0,l.getHappinessValue()>40&&l.getHappinessValue()<=60),e(n,28,0,l.getHappinessValue()>60&&l.getHappinessValue()<=90),e(n,30,0,l.getHappinessValue()>90&&l.getHappinessValue()<=100);var s=e(n,33,0,l.getHappinessBonus()<=0,l.getHappinessBonus()>0);e(n,32,0,"inline",s)}),(function(e,n){var l=n.component;e(n,2,0,Rt(1,"happiness-",l.id,"")),e(n,12,0,l.getHappinessBonus()),e(n,18,0,l.getSumText()),e(n,34,0,l.getHappiness())}))}class My{constructor(e,n,l,t,i,s,r,u){this.modalService=e,this.landService=n,this.gameService=l,this.regionService=t,this.tutorialService=i,this.optionsService=s,this.changeDetectorRef=r,this.thisRegion=u,this.demolishMode=!1,this.arrangeMode=!1,this.combineMode=!1,this.splitMode=!1,this.filterBuilding=this.regionService.getFilterBuilding(),this.filterWorking=this.regionService.getFilterWorking(),this.currentPage=0,this.allBuildings=tu.ALL,this.buildingStates=YE}ngOnInit(){this.tutorialService.checkRegionTutorial(this.thisRegion)}getUniqueBuildingsFromCurrentView(){const e=[];return this.regionService.buildings.forEach(n=>{e.includes(n.getBuildingType())||e.push(n.getBuildingType()),(n.getBuildingType()!==tu.CONSTRUCTION||e.includes(n.getWorkingAt()))&&(n.getBuildingType()!==tu.DECONSTRUCTION||e.includes(n.getWorkingAt()))||e.push(n.getWorkingAt())}),e}getBuildings(){const e=this.regionService.getBuildings().filter(e=>this.filterWorking===YE.ALL||this.filterWorking===YE.WORKING&&e.isWorking()||this.filterWorking===YE.IDLE&&!e.isWorking()&&e.isStoppable()).filter(e=>this.filterBuilding===tu.ALL||e.getBuildingType()===tu.CONSTRUCTION&&e.getWorkingAt()===this.filterBuilding||e.getBuildingType()===tu.DECONSTRUCTION&&e.getWorkingAt()===this.filterBuilding||e.getBuildingType()===this.filterBuilding);return 0!==e.length||this.filterBuilding===tu.ALL||this.getUniqueBuildingsFromCurrentView().includes(this.filterBuilding)||(this.filterBuilding=tu.ALL,this.regionService.setFilterBuildings(tu.ALL)),e}getBuildingName(e){return Ou.prepareBuildingName(e)}updateFilter(e){this.filterBuilding=tu[tu[e.target.value]],this.regionService.setFilterBuildings(this.filterBuilding),this.currentPage=0}updateFilter2(e){this.filterWorking=tu[tu[e.target.value]],this.regionService.setFilterWorking(this.filterWorking),this.currentPage=0}openBuildModal(){this.demolishMode=!1,this.arrangeMode=!1,this.modalService.setRegion(this.thisRegion),this.modalService.open(Pu.BUILD)}getUnemployed(){return this.regionService.getUnemployed()}getFreeLand(){return this.landService.getLand()}toggleDemolishMode(){this.demolishMode=!this.demolishMode,this.arrangeMode=!1,this.splitMode=!1,this.clearCombineMode()}toggleArrangeMode(){this.arrangeMode=!this.arrangeMode,this.demolishMode=!1,this.splitMode=!1,this.clearCombineMode()}toggleCombineMode(){this.combineMode=!this.combineMode,this.splitMode=!1,this.demolishMode=!1,this.arrangeMode=!1}toggleSplitMode(){this.splitMode=!this.splitMode,this.combineMode=!1,this.demolishMode=!1,this.arrangeMode=!1}clearCombineMode(){this.combineMode=!1,this.regionService.clearCombineMode()}isUrbanPlanningEnabled(){return this.gameService.isEnabled(ou.URBAN_PLANNING)}hasCombinableBuildings(){return this.getBuildings().filter(e=>e.isCombinable()).length>1}hasSplittableBuildings(){return this.getBuildings().filter(e=>e.isSplittable()).length>=1}onKeydownHandler(e){this.demolishMode=!1,this.arrangeMode=!1,this.clearCombineMode()}enableAll(){this.getBuildings().filter(e=>e.isStoppable()).forEach(e=>{e.stopProduction(),e.startProduction()})}disableAll(){this.getBuildings().filter(e=>e.isStoppable()).forEach(e=>e.stopProduction())}isPagedViewEnabled(){return this.optionsService.getOption(_p.PAGED_VIEW)}getBuildingPerPage(){return this.optionsService.getOption(_p.BUILDINGS_PER_PAGE)}getPagesNumber(){let e=Math.ceil(this.getBuildings().length/this.getBuildingPerPage());return 0===e&&(e=1),Array.apply(null,Array(e)).map((function(e,n){return n}))}setPage(e){this.currentPage=e}getPagedBuildings(){const e=this.getBuildingPerPage();return this.getBuildings().slice(this.currentPage*e,this.currentPage*e+e)}autoSort(){this.modalService.open(Pu.CONFIRM),this.modalService.setModalText("Are you sure you want to <b>auto sort</b> buildings?");const e=this.modalService.registerForConfirmation().subscribe(n=>{e.unsubscribe(),n&&this.regionService.autoSort()})}autoMerge(){this.modalService.open(Pu.CONFIRM),this.modalService.setModalText("Are you sure you want to <b>auto merge</b> buildings?");const e=this.modalService.registerForConfirmation().subscribe(n=>{e.unsubscribe(),n&&this.regionService.autoMerge()})}}class Dy extends My{constructor(e,n,l,t,i,s,r,u,o,a){super(e,n,l,t,u,s,o,Eu.VILLAGE),this.landService=n,this.villageService=t,this.resourcesService=i,this.managementService=r,this.router=a}getPopulation(){return this.villageService.getPopulation()}getPopulationCap(){return this.villageService.getPopulationCap()}getTakenLand(){return this.landService.getTakenLand()}getSick(){return this.resourcesService.getSick()}getSicknessName(e){return Ou.prepareSicknessName(e)}openHappinessManagement(){this.isManagementUnlocked()&&this.router.navigate(["/management/happiness"])}isManagementUnlocked(){return this.gameService.isEnabled(ou.MANAGEMENT)}workshopsResearch(){this.villageService.getBuildings().filter(e=>e.getBuildingType()===tu.WORKSHOP).forEach(e=>e.switchToResearch()),this.modalService.info("Workshops switched to researching")}workshopsCraft(){this.villageService.getBuildings().filter(e=>e.getBuildingType()===tu.WORKSHOP).forEach(e=>e.switchToCrafting()),this.modalService.info("Workshops switched to crafting")}}var Ly=Kl({encapsulation:0,styles:[Eb,[".herbal[_ngcontent-%COMP%]{height:16px}.pointer[_ngcontent-%COMP%]{cursor:pointer}"]],data:{}});function xy(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleDemolishMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Demolish"]))],null,null)}function ky(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleDemolishMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Stop"]))],null,null)}function Fy(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleArrangeMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Arrange"]))],null,null)}function Uy(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleArrangeMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Stop"]))],null,null)}function Hy(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleCombineMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Combine"]))],null,null)}function Gy(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleCombineMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Stop"]))],null,null)}function By(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleSplitMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Split"]))],null,null)}function Vy(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleSplitMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Stop"]))],null,null)}function Wy(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"option",[],null,null,null,null,null)),ei(1,147456,null,0,qg,[il,ol,[2,Qg]],{value:[0,"value"]},null),ei(2,147456,null,0,Zg,[il,ol,[8,null]],{value:[0,"value"]},null),(e()(),Ks(3,null,["",""]))],(function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)}),(function(e,n){e(n,3,0,n.component.getBuildingName(n.context.$implicit))}))}function Yy(e){return qs(0,[(e()(),Ds(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),Ds(1,0,null,null,0,"img",[["alt",""],["class","herbal"],["src","assets/resources/herbal_medicine.svg"]],null,null,null,null,null))],null,null)}function zy(e){return qs(0,[(e()(),Ds(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),Ks(1,null,[" ",". "," ","% "])),Ys(2,2),(e()(),Ms(16777216,null,null,1,null,Yy)),ei(4,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){e(n,4,0,n.context.$implicit.medicine>0)}),(function(e,n){var l=n.context.index+1,t=n.component.getSicknessName(n.context.$implicit.sickness),i=$l(n,1,2,e(n,2,0,Yt(n.parent.parent,0),n.context.$implicit.progress,"0.0-0"));e(n,1,0,l,t,i)}))}function $y(e){return qs(0,[(e()(),Ds(0,0,null,null,10,"span",[["appTooltip",""],["class","icon tooltip"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==Yt(e,1).onmousemove(l)&&t),t}),null,null)),ei(1,16384,null,0,vg,[],{elementId:[0,"elementId"]},null),(e()(),Ds(2,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(3,114688,null,0,Rg,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),Ks(4,null,[" "," "])),(e()(),Ds(5,0,null,null,4,"span",[["id","sick"]],null,null,null,null,null)),(e()(),Ks(6,null,[" Sick: "," "])),(e()(),Ds(7,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,zy)),ei(9,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ks(-1,null,[" \xa0\xa0\xa0 "]))],(function(e,n){var l=n.component;e(n,1,0,"sick"),e(n,3,0,"sick","","0 0 0 2px"),e(n,9,0,l.getSick())}),(function(e,n){var l=n.component;e(n,4,0,l.getSick().length),e(n,6,0,l.getSick().length)}))}function Ky(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-building",[],null,null,null,my,Zb)),ei(2,8503296,null,0,Xb,[Fp,Np,Qp,Wv,$E,wp,xp],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.demolishMode,l.combineMode,l.splitMode,l.arrangeMode,n.context.$implicit,l.villageService)}),null)}function jy(e){return qs(0,[(e()(),Ds(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Buildings"])),(e()(),Ds(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,Ky)),ei(6,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,6,0,n.component.getBuildings())}),null)}function Qy(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"span",[["class","page"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.setPage(e.context.$implicit)&&t),t}),null,null)),ei(1,278528,null,0,la,[Cl,Il,il,ol],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),zs(2,{activePage:0}),(e()(),Ks(3,null,["page ",""]))],(function(e,n){var l=e(n,2,0,n.component.currentPage===n.context.$implicit);e(n,1,0,"page",l)}),(function(e,n){e(n,3,0,n.context.$implicit+1)}))}function qy(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-building",[],null,null,null,my,Zb)),ei(2,8503296,null,0,Xb,[Fp,Np,Qp,Wv,$E,wp,xp],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.demolishMode,l.combineMode,l.splitMode,l.arrangeMode,n.context.$implicit,l.villageService)}),null)}function Xy(e){return qs(0,[(e()(),Ds(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,Qy)),ei(3,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ds(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,qy)),ei(6,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,3,0,l.getPagesNumber()),e(n,6,0,l.getPagedBuildings())}),null)}function Zy(e){return qs(0,[ni(0,Ea,[ki]),(e()(),Ds(1,0,null,null,97,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),Ds(3,0,null,null,1,"app-top-menu",[],null,null,null,Cy,Sy)),ei(4,114688,null,0,fy,[Gp,Qp],null,null),(e()(),Ds(5,0,null,null,93,"div",[["id","content"]],null,null,null,null,null)),(e()(),Ds(6,0,null,null,64,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Ds(7,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.openBuildModal()&&t),t}),null,null)),(e()(),Ks(-1,null,["Build"])),(e()(),Ms(16777216,null,null,1,null,xy)),ei(10,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,ky)),ei(12,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,Fy)),ei(14,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,Uy)),ei(16,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,Hy)),ei(18,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,Gy)),ei(20,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,By)),ei(22,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,Vy)),ei(24,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(25,0,null,null,11,"button",[["class","dropdown"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Actions "])),(e()(),Ds(27,0,null,null,0,"img",[["height","10px"],["src","assets/arrow_down.svg"]],null,null,null,null,null)),(e()(),Ds(28,0,null,null,8,"ul",[["class","dropdown-content"]],null,null,null,null,null)),(e()(),Ds(29,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.autoSort()&&t),t}),null,null)),(e()(),Ks(-1,null,["Sort"])),(e()(),Ds(31,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.autoMerge()&&t),t}),null,null)),(e()(),Ks(-1,null,["Merge"])),(e()(),Ds(33,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.workshopsResearch()&&t),t}),null,null)),(e()(),Ks(-1,null,["Workshops research"])),(e()(),Ds(35,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.workshopsCraft()&&t),t}),null,null)),(e()(),Ks(-1,null,["Workshops craft"])),(e()(),Ds(37,0,null,null,33,"div",[["id","side"]],null,null,null,null,null)),(e()(),Ks(-1,null,[" Filter:"])),(e()(),Ds(39,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(40,0,null,null,30,"div",[["id","filters"]],null,null,null,null,null)),(e()(),Ds(41,0,null,null,11,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,42).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,42).onTouched()&&t),"change"===n&&(t=!1!==i.updateFilter(l)&&t),"ngModelChange"===n&&(t=!1!==(i.filterBuilding=l)&&t),t}),null,null)),ei(42,16384,null,0,Qg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[Qg]),ei(44,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(46,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(47,0,null,null,3,"option",[],null,null,null,null,null)),ei(48,147456,null,0,qg,[il,ol,[2,Qg]],{value:[0,"value"]},null),ei(49,147456,null,0,Zg,[il,ol,[8,null]],{value:[0,"value"]},null),(e()(),Ks(50,null,["",""])),(e()(),Ms(16777216,null,null,1,null,Wy)),ei(52,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ds(53,0,null,null,17,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,54).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,54).onTouched()&&t),"change"===n&&(t=!1!==i.updateFilter2(l)&&t),"ngModelChange"===n&&(t=!1!==(i.filterWorking=l)&&t),t}),null,null)),ei(54,16384,null,0,Qg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[Qg]),ei(56,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(58,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(59,0,null,null,3,"option",[],null,null,null,null,null)),ei(60,147456,null,0,qg,[il,ol,[2,Qg]],{value:[0,"value"]},null),ei(61,147456,null,0,Zg,[il,ol,[8,null]],{value:[0,"value"]},null),(e()(),Ks(-1,null,["All"])),(e()(),Ds(63,0,null,null,3,"option",[],null,null,null,null,null)),ei(64,147456,null,0,qg,[il,ol,[2,Qg]],{value:[0,"value"]},null),ei(65,147456,null,0,Zg,[il,ol,[8,null]],{value:[0,"value"]},null),(e()(),Ks(-1,null,["Working"])),(e()(),Ds(67,0,null,null,3,"option",[],null,null,null,null,null)),ei(68,147456,null,0,qg,[il,ol,[2,Qg]],{value:[0,"value"]},null),ei(69,147456,null,0,Zg,[il,ol,[8,null]],{value:[0,"value"]},null),(e()(),Ks(-1,null,["Idle"])),(e()(),Ds(71,0,null,null,23,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(72,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(73,114688,null,0,Rg,[],{name:[0,"name"]},null),(e()(),Ks(74,null,[" ","/"," \xa0\xa0 "])),(e()(),Ds(75,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(76,114688,null,0,Rg,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),Ks(77,null,[" "," \xa0\xa0\xa0 "])),(e()(),Ms(16777216,null,null,1,null,$y)),ei(79,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(80,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(81,114688,null,0,Rg,[],{name:[0,"name"]},null),(e()(),Ks(82,null,[" "," \xa0\xa0\xa0 "])),(e()(),Ds(83,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(84,114688,null,0,Rg,[],{name:[0,"name"],title:[1,"title"]},null),(e()(),Ks(85,null,["\xa0"," \xa0\xa0\xa0 "])),(e()(),Ds(86,0,null,null,3,"app-happiness",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.openHappinessManagement()&&t),t}),Py,by)),ei(87,278528,null,0,la,[Cl,Il,il,ol],{ngClass:[0,"ngClass"]},null),zs(88,{pointer:0}),ei(89,114688,null,0,Iy,[zp],null,null),(e()(),Ds(90,0,null,null,4,"div",[["id","allControl"]],null,null,null,null,null)),(e()(),Ds(91,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.enableAll()&&t),t}),null,null)),(e()(),Ks(-1,null,["all on"])),(e()(),Ds(93,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.disableAll()&&t),t}),null,null)),(e()(),Ks(-1,null,["all off"])),(e()(),Ms(16777216,null,null,1,null,jy)),ei(96,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,Xy)),ei(98,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,4,0),e(n,10,0,!l.demolishMode),e(n,12,0,l.demolishMode),e(n,14,0,!l.arrangeMode&&l.getBuildings().length>1),e(n,16,0,l.arrangeMode),e(n,18,0,!l.combineMode&&l.isUrbanPlanningEnabled()&&l.hasCombinableBuildings()),e(n,20,0,l.combineMode),e(n,22,0,!l.splitMode&&l.isUrbanPlanningEnabled()&&l.hasSplittableBuildings()),e(n,24,0,l.splitMode),e(n,44,0,l.filterBuilding),e(n,48,0,l.allBuildings),e(n,49,0,l.allBuildings),e(n,52,0,l.getUniqueBuildingsFromCurrentView()),e(n,56,0,l.filterWorking),e(n,60,0,l.buildingStates.ALL),e(n,61,0,l.buildingStates.ALL),e(n,64,0,l.buildingStates.WORKING),e(n,65,0,l.buildingStates.WORKING),e(n,68,0,l.buildingStates.IDLE),e(n,69,0,l.buildingStates.IDLE),e(n,73,0,"population"),e(n,76,0,"hammer","Workers","0 0 0 2px"),e(n,79,0,l.getSick().length>0),e(n,81,0,"land"),e(n,84,0,"village","Village size");var t=e(n,88,0,l.isManagementUnlocked());e(n,87,0,t),e(n,89,0),e(n,96,0,!l.isPagedViewEnabled()),e(n,98,0,l.isPagedViewEnabled())}),(function(e,n){var l=n.component;e(n,41,0,Yt(n,46).ngClassUntouched,Yt(n,46).ngClassTouched,Yt(n,46).ngClassPristine,Yt(n,46).ngClassDirty,Yt(n,46).ngClassValid,Yt(n,46).ngClassInvalid,Yt(n,46).ngClassPending),e(n,50,0,l.getBuildingName(l.allBuildings)),e(n,53,0,Yt(n,58).ngClassUntouched,Yt(n,58).ngClassTouched,Yt(n,58).ngClassPristine,Yt(n,58).ngClassDirty,Yt(n,58).ngClassValid,Yt(n,58).ngClassInvalid,Yt(n,58).ngClassPending),e(n,74,0,l.getPopulation(),l.getPopulationCap()),e(n,77,0,l.getUnemployed()),e(n,82,0,l.getFreeLand()),e(n,85,0,l.getTakenLand())}))}function Jy(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"app-village",[],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==Yt(e,1).onKeydownHandler(l)&&t),t}),Zy,Ly)),ei(1,114688,null,0,Dy,[Fp,WE,Gp,$E,Qp,wp,Wv,Up,Nn,Fd],null,null)],(function(e,n){e(n,1,0)}),null)}var eA=Dt("app-village",Dy,Jy,{},{},[]);class nA extends My{constructor(e,n,l,t,i,s,r){super(e,n,l,i,t,s,r,Eu.FORT),this.landService=n,this.fortService=i}}var lA=Kl({encapsulation:0,styles:[Eb,[""]],data:{}});function tA(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleDemolishMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Demolish"]))],null,null)}function iA(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleDemolishMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Stop"]))],null,null)}function sA(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleArrangeMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Arrange"]))],null,null)}function rA(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleArrangeMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Stop"]))],null,null)}function uA(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleCombineMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Combine"]))],null,null)}function oA(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleCombineMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Stop"]))],null,null)}function aA(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleSplitMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Split"]))],null,null)}function cA(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleSplitMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Stop"]))],null,null)}function hA(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"option",[],null,null,null,null,null)),ei(1,147456,null,0,qg,[il,ol,[2,Qg]],{value:[0,"value"]},null),ei(2,147456,null,0,Zg,[il,ol,[8,null]],{value:[0,"value"]},null),(e()(),Ks(3,null,["",""]))],(function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)}),(function(e,n){e(n,3,0,n.component.getBuildingName(n.context.$implicit))}))}function dA(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-building",[],null,null,null,my,Zb)),ei(2,8503296,null,0,Xb,[Fp,Np,Qp,Wv,$E,wp,xp],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.demolishMode,l.combineMode,l.splitMode,l.arrangeMode,n.context.$implicit,l.fortService)}),null)}function gA(e){return qs(0,[(e()(),Ds(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Buildings"])),(e()(),Ds(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,dA)),ei(6,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,6,0,n.component.getBuildings())}),null)}function pA(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"span",[["class","page"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.setPage(e.context.$implicit)&&t),t}),null,null)),ei(1,278528,null,0,la,[Cl,Il,il,ol],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),zs(2,{activePage:0}),(e()(),Ks(3,null,["page ",""]))],(function(e,n){var l=e(n,2,0,n.component.currentPage===n.context.$implicit);e(n,1,0,"page",l)}),(function(e,n){e(n,3,0,n.context.$implicit+1)}))}function mA(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-building",[],null,null,null,my,Zb)),ei(2,8503296,null,0,Xb,[Fp,Np,Qp,Wv,$E,wp,xp],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.demolishMode,l.combineMode,l.splitMode,l.arrangeMode,n.context.$implicit,l.fortService)}),null)}function fA(e){return qs(0,[(e()(),Ds(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,pA)),ei(3,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ds(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,mA)),ei(6,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,3,0,l.getPagesNumber()),e(n,6,0,l.getPagedBuildings())}),null)}function SA(e){return qs(0,[(e()(),Ds(0,0,null,null,79,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,1,"app-top-menu",[],null,null,null,Cy,Sy)),ei(3,114688,null,0,fy,[Gp,Qp],null,null),(e()(),Ds(4,0,null,null,75,"div",[["id","content"]],null,null,null,null,null)),(e()(),Ds(5,0,null,null,58,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Ds(6,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.openBuildModal()&&t),t}),null,null)),(e()(),Ks(-1,null,["Build"])),(e()(),Ms(16777216,null,null,1,null,tA)),ei(9,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,iA)),ei(11,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,sA)),ei(13,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,rA)),ei(15,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,uA)),ei(17,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,oA)),ei(19,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,aA)),ei(21,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,cA)),ei(23,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(24,0,null,null,5,"button",[["class","dropdown"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Actions "])),(e()(),Ds(26,0,null,null,0,"img",[["height","10px"],["src","assets/arrow_down.svg"]],null,null,null,null,null)),(e()(),Ds(27,0,null,null,2,"ul",[["class","dropdown-content"]],null,null,null,null,null)),(e()(),Ds(28,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.autoSort()&&t),t}),null,null)),(e()(),Ks(-1,null,["Sort"])),(e()(),Ds(30,0,null,null,33,"div",[["id","side"]],null,null,null,null,null)),(e()(),Ks(-1,null,[" Filter:"])),(e()(),Ds(32,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(33,0,null,null,30,"div",[["id","filters"]],null,null,null,null,null)),(e()(),Ds(34,0,null,null,11,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,35).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,35).onTouched()&&t),"change"===n&&(t=!1!==i.updateFilter(l)&&t),"ngModelChange"===n&&(t=!1!==(i.filterBuilding=l)&&t),t}),null,null)),ei(35,16384,null,0,Qg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[Qg]),ei(37,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(39,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(40,0,null,null,3,"option",[],null,null,null,null,null)),ei(41,147456,null,0,qg,[il,ol,[2,Qg]],{value:[0,"value"]},null),ei(42,147456,null,0,Zg,[il,ol,[8,null]],{value:[0,"value"]},null),(e()(),Ks(43,null,["",""])),(e()(),Ms(16777216,null,null,1,null,hA)),ei(45,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ds(46,0,null,null,17,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,47).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,47).onTouched()&&t),"change"===n&&(t=!1!==i.updateFilter2(l)&&t),"ngModelChange"===n&&(t=!1!==(i.filterWorking=l)&&t),t}),null,null)),ei(47,16384,null,0,Qg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[Qg]),ei(49,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(51,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(52,0,null,null,3,"option",[],null,null,null,null,null)),ei(53,147456,null,0,qg,[il,ol,[2,Qg]],{value:[0,"value"]},null),ei(54,147456,null,0,Zg,[il,ol,[8,null]],{value:[0,"value"]},null),(e()(),Ks(-1,null,["All"])),(e()(),Ds(56,0,null,null,3,"option",[],null,null,null,null,null)),ei(57,147456,null,0,qg,[il,ol,[2,Qg]],{value:[0,"value"]},null),ei(58,147456,null,0,Zg,[il,ol,[8,null]],{value:[0,"value"]},null),(e()(),Ks(-1,null,["Working"])),(e()(),Ds(60,0,null,null,3,"option",[],null,null,null,null,null)),ei(61,147456,null,0,qg,[il,ol,[2,Qg]],{value:[0,"value"]},null),ei(62,147456,null,0,Zg,[il,ol,[8,null]],{value:[0,"value"]},null),(e()(),Ks(-1,null,["Idle"])),(e()(),Ds(64,0,null,null,11,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(65,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(66,114688,null,0,Rg,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),Ks(67,null,[" "," \xa0\xa0\xa0 "])),(e()(),Ds(68,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(69,114688,null,0,Rg,[],{name:[0,"name"]},null),(e()(),Ks(70,null,[" "," "])),(e()(),Ds(71,0,null,null,4,"div",[["id","allControl"]],null,null,null,null,null)),(e()(),Ds(72,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.enableAll()&&t),t}),null,null)),(e()(),Ks(-1,null,["all on"])),(e()(),Ds(74,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.disableAll()&&t),t}),null,null)),(e()(),Ks(-1,null,["all off"])),(e()(),Ms(16777216,null,null,1,null,gA)),ei(77,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,fA)),ei(79,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,3,0),e(n,9,0,!l.demolishMode),e(n,11,0,l.demolishMode),e(n,13,0,!l.arrangeMode&&l.getBuildings().length>1),e(n,15,0,l.arrangeMode),e(n,17,0,!l.combineMode&&l.isUrbanPlanningEnabled()&&l.hasCombinableBuildings()),e(n,19,0,l.combineMode),e(n,21,0,!l.splitMode&&l.isUrbanPlanningEnabled()&&l.hasSplittableBuildings()),e(n,23,0,l.splitMode),e(n,37,0,l.filterBuilding),e(n,41,0,l.allBuildings),e(n,42,0,l.allBuildings),e(n,45,0,l.getUniqueBuildingsFromCurrentView()),e(n,49,0,l.filterWorking),e(n,53,0,l.buildingStates.ALL),e(n,54,0,l.buildingStates.ALL),e(n,57,0,l.buildingStates.WORKING),e(n,58,0,l.buildingStates.WORKING),e(n,61,0,l.buildingStates.IDLE),e(n,62,0,l.buildingStates.IDLE),e(n,66,0,"hammer","Workers","0 0 0 2px"),e(n,69,0,"land"),e(n,77,0,!l.isPagedViewEnabled()),e(n,79,0,l.isPagedViewEnabled())}),(function(e,n){var l=n.component;e(n,34,0,Yt(n,39).ngClassUntouched,Yt(n,39).ngClassTouched,Yt(n,39).ngClassPristine,Yt(n,39).ngClassDirty,Yt(n,39).ngClassValid,Yt(n,39).ngClassInvalid,Yt(n,39).ngClassPending),e(n,43,0,l.getBuildingName(l.allBuildings)),e(n,46,0,Yt(n,51).ngClassUntouched,Yt(n,51).ngClassTouched,Yt(n,51).ngClassPristine,Yt(n,51).ngClassDirty,Yt(n,51).ngClassValid,Yt(n,51).ngClassInvalid,Yt(n,51).ngClassPending),e(n,67,0,l.getUnemployed()),e(n,70,0,l.getFreeLand())}))}function EA(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"app-fort",[],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==Yt(e,1).onKeydownHandler(l)&&t),t}),SA,lA)),ei(1,114688,null,0,nA,[Fp,WE,Gp,Up,rO,wp,Nn],null,null)],(function(e,n){e(n,1,0)}),null)}var vA=Dt("app-fort",nA,EA,{},{},[]);let RA=(()=>{class e extends zE{constructor(e,n,l,t,i){super(n,e,l,i,t,Eu.FOREST,bu.FOREST)}init(){this.buildings.push(new Bf(this.servicesService,this.idService.getNextId()).build()),this.buildings.push(new Jf(this.servicesService,this.idService.getNextId()).build()),this.buildings.forEach(e=>this.landService.takeLand(e.getSize()))}}return e.\u0275prov=re({factory:function(){return new e(Ae(Qp),Ae(GE),Ae(Np),Ae(lE),Ae(WE))},token:e,providedIn:"root"}),e})();class OA extends My{constructor(e,n,l,t,i,s,r){super(e,n,l,i,t,s,r,Eu.FOREST),this.landService=n,this.forestService=i}getForestSize(){return this.landService.getForest()}}var TA=Kl({encapsulation:0,styles:[Eb,[".critical[_ngcontent-%COMP%]{color:var(--negative-colour)}"]],data:{}});function CA(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleDemolishMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Demolish"]))],null,null)}function IA(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleDemolishMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Stop"]))],null,null)}function bA(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleArrangeMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Arrange"]))],null,null)}function yA(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleArrangeMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Stop"]))],null,null)}function AA(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleCombineMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Combine"]))],null,null)}function NA(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleCombineMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Stop"]))],null,null)}function _A(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleSplitMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Split"]))],null,null)}function wA(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleSplitMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Stop"]))],null,null)}function PA(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"option",[],null,null,null,null,null)),ei(1,147456,null,0,qg,[il,ol,[2,Qg]],{value:[0,"value"]},null),ei(2,147456,null,0,Zg,[il,ol,[8,null]],{value:[0,"value"]},null),(e()(),Ks(3,null,["",""]))],(function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)}),(function(e,n){e(n,3,0,n.component.getBuildingName(n.context.$implicit))}))}function MA(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(1,null,["",""]))],null,(function(e,n){e(n,1,0,n.component.getForestSize())}))}function DA(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[["class","critical"]],null,null,null,null,null)),(e()(),Ks(1,null,["",""]))],null,(function(e,n){e(n,1,0,n.component.getForestSize())}))}function LA(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-building",[],null,null,null,my,Zb)),ei(2,8503296,null,0,Xb,[Fp,Np,Qp,Wv,$E,wp,xp],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.demolishMode,l.combineMode,l.splitMode,l.arrangeMode,n.context.$implicit,l.forestService)}),null)}function xA(e){return qs(0,[(e()(),Ds(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Buildings"])),(e()(),Ds(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,LA)),ei(6,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,6,0,n.component.getBuildings())}),null)}function kA(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"span",[["class","page"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.setPage(e.context.$implicit)&&t),t}),null,null)),ei(1,278528,null,0,la,[Cl,Il,il,ol],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),zs(2,{activePage:0}),(e()(),Ks(3,null,["page ",""]))],(function(e,n){var l=e(n,2,0,n.component.currentPage===n.context.$implicit);e(n,1,0,"page",l)}),(function(e,n){e(n,3,0,n.context.$implicit+1)}))}function FA(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-building",[],null,null,null,my,Zb)),ei(2,8503296,null,0,Xb,[Fp,Np,Qp,Wv,$E,wp,xp],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.demolishMode,l.combineMode,l.splitMode,l.arrangeMode,n.context.$implicit,l.forestService)}),null)}function UA(e){return qs(0,[(e()(),Ds(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,kA)),ei(3,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ds(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,FA)),ei(6,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,3,0,l.getPagesNumber()),e(n,6,0,l.getPagedBuildings())}),null)}function HA(e){return qs(0,[(e()(),Ds(0,0,null,null,86,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,1,"app-top-menu",[],null,null,null,Cy,Sy)),ei(3,114688,null,0,fy,[Gp,Qp],null,null),(e()(),Ds(4,0,null,null,82,"div",[["id","content"]],null,null,null,null,null)),(e()(),Ds(5,0,null,null,58,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Ds(6,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.openBuildModal()&&t),t}),null,null)),(e()(),Ks(-1,null,["Build"])),(e()(),Ms(16777216,null,null,1,null,CA)),ei(9,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,IA)),ei(11,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,bA)),ei(13,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,yA)),ei(15,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,AA)),ei(17,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,NA)),ei(19,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,_A)),ei(21,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,wA)),ei(23,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(24,0,null,null,5,"button",[["class","dropdown"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Actions "])),(e()(),Ds(26,0,null,null,0,"img",[["height","10px"],["src","assets/arrow_down.svg"]],null,null,null,null,null)),(e()(),Ds(27,0,null,null,2,"ul",[["class","dropdown-content"]],null,null,null,null,null)),(e()(),Ds(28,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.autoSort()&&t),t}),null,null)),(e()(),Ks(-1,null,["Sort"])),(e()(),Ds(30,0,null,null,33,"div",[["id","side"]],null,null,null,null,null)),(e()(),Ks(-1,null,[" Filter:"])),(e()(),Ds(32,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(33,0,null,null,30,"div",[["id","filters"]],null,null,null,null,null)),(e()(),Ds(34,0,null,null,11,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,35).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,35).onTouched()&&t),"change"===n&&(t=!1!==i.updateFilter(l)&&t),"ngModelChange"===n&&(t=!1!==(i.filterBuilding=l)&&t),t}),null,null)),ei(35,16384,null,0,Qg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[Qg]),ei(37,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(39,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(40,0,null,null,3,"option",[],null,null,null,null,null)),ei(41,147456,null,0,qg,[il,ol,[2,Qg]],{value:[0,"value"]},null),ei(42,147456,null,0,Zg,[il,ol,[8,null]],{value:[0,"value"]},null),(e()(),Ks(43,null,["",""])),(e()(),Ms(16777216,null,null,1,null,PA)),ei(45,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ds(46,0,null,null,17,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,47).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,47).onTouched()&&t),"change"===n&&(t=!1!==i.updateFilter2(l)&&t),"ngModelChange"===n&&(t=!1!==(i.filterWorking=l)&&t),t}),null,null)),ei(47,16384,null,0,Qg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[Qg]),ei(49,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(51,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(52,0,null,null,3,"option",[],null,null,null,null,null)),ei(53,147456,null,0,qg,[il,ol,[2,Qg]],{value:[0,"value"]},null),ei(54,147456,null,0,Zg,[il,ol,[8,null]],{value:[0,"value"]},null),(e()(),Ks(-1,null,["All"])),(e()(),Ds(56,0,null,null,3,"option",[],null,null,null,null,null)),ei(57,147456,null,0,qg,[il,ol,[2,Qg]],{value:[0,"value"]},null),ei(58,147456,null,0,Zg,[il,ol,[8,null]],{value:[0,"value"]},null),(e()(),Ks(-1,null,["Working"])),(e()(),Ds(60,0,null,null,3,"option",[],null,null,null,null,null)),ei(61,147456,null,0,qg,[il,ol,[2,Qg]],{value:[0,"value"]},null),ei(62,147456,null,0,Zg,[il,ol,[8,null]],{value:[0,"value"]},null),(e()(),Ks(-1,null,["Idle"])),(e()(),Ds(64,0,null,null,18,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(65,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(66,114688,null,0,Rg,[],{name:[0,"name"]},null),(e()(),Ms(16777216,null,null,1,null,MA)),ei(68,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,DA)),ei(70,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ks(-1,null,[" \xa0\xa0 "])),(e()(),Ds(72,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(73,114688,null,0,Rg,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),Ks(74,null,[" "," \xa0\xa0\xa0 "])),(e()(),Ds(75,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(76,114688,null,0,Rg,[],{name:[0,"name"]},null),(e()(),Ks(77,null,[" "," "])),(e()(),Ds(78,0,null,null,4,"div",[["id","allControl"]],null,null,null,null,null)),(e()(),Ds(79,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.enableAll()&&t),t}),null,null)),(e()(),Ks(-1,null,["all on"])),(e()(),Ds(81,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.disableAll()&&t),t}),null,null)),(e()(),Ks(-1,null,["all off"])),(e()(),Ms(16777216,null,null,1,null,xA)),ei(84,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,UA)),ei(86,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,3,0),e(n,9,0,!l.demolishMode),e(n,11,0,l.demolishMode),e(n,13,0,!l.arrangeMode),e(n,15,0,l.arrangeMode),e(n,17,0,!l.combineMode&&l.isUrbanPlanningEnabled()&&l.hasCombinableBuildings()),e(n,19,0,l.combineMode),e(n,21,0,!l.splitMode&&l.isUrbanPlanningEnabled()&&l.hasSplittableBuildings()),e(n,23,0,l.splitMode),e(n,37,0,l.filterBuilding),e(n,41,0,l.allBuildings),e(n,42,0,l.allBuildings),e(n,45,0,l.getUniqueBuildingsFromCurrentView()),e(n,49,0,l.filterWorking),e(n,53,0,l.buildingStates.ALL),e(n,54,0,l.buildingStates.ALL),e(n,57,0,l.buildingStates.WORKING),e(n,58,0,l.buildingStates.WORKING),e(n,61,0,l.buildingStates.IDLE),e(n,62,0,l.buildingStates.IDLE),e(n,66,0,"forest"),e(n,68,0,l.getForestSize()>=400),e(n,70,0,l.getForestSize()<400),e(n,73,0,"hammer","Workers","0 0 0 2px"),e(n,76,0,"land"),e(n,84,0,!l.isPagedViewEnabled()),e(n,86,0,l.isPagedViewEnabled())}),(function(e,n){var l=n.component;e(n,34,0,Yt(n,39).ngClassUntouched,Yt(n,39).ngClassTouched,Yt(n,39).ngClassPristine,Yt(n,39).ngClassDirty,Yt(n,39).ngClassValid,Yt(n,39).ngClassInvalid,Yt(n,39).ngClassPending),e(n,43,0,l.getBuildingName(l.allBuildings)),e(n,46,0,Yt(n,51).ngClassUntouched,Yt(n,51).ngClassTouched,Yt(n,51).ngClassPristine,Yt(n,51).ngClassDirty,Yt(n,51).ngClassValid,Yt(n,51).ngClassInvalid,Yt(n,51).ngClassPending),e(n,74,0,l.getUnemployed()),e(n,77,0,l.getFreeLand())}))}function GA(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"app-forest",[],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==Yt(e,1).onKeydownHandler(l)&&t),t}),HA,TA)),ei(1,114688,null,0,OA,[Fp,WE,Gp,Up,RA,wp,Nn],null,null)],(function(e,n){e(n,1,0)}),null)}var BA=Dt("app-forest",OA,GA,{},{},[]);let VA=(()=>{class e extends zE{constructor(e,n,l,t,i){super(n,e,l,i,t,Eu.FIELD,bu.FIELD)}}return e.\u0275prov=re({factory:function(){return new e(Ae(Qp),Ae(GE),Ae(Np),Ae(lE),Ae(WE))},token:e,providedIn:"root"}),e})();class WA extends My{constructor(e,n,l,t,i,s,r){super(e,n,l,i,t,s,r,Eu.FIELD),this.landService=n,this.fieldService=i}}var YA=Kl({encapsulation:0,styles:[Eb,[""]],data:{}});function zA(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleDemolishMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Demolish"]))],null,null)}function $A(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleDemolishMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Stop"]))],null,null)}function KA(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleArrangeMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Arrange"]))],null,null)}function jA(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleArrangeMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Stop"]))],null,null)}function QA(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleCombineMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Combine"]))],null,null)}function qA(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleCombineMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Stop"]))],null,null)}function XA(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleSplitMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Split"]))],null,null)}function ZA(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleSplitMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Stop"]))],null,null)}function JA(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"option",[],null,null,null,null,null)),ei(1,147456,null,0,qg,[il,ol,[2,Qg]],{value:[0,"value"]},null),ei(2,147456,null,0,Zg,[il,ol,[8,null]],{value:[0,"value"]},null),(e()(),Ks(3,null,["",""]))],(function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)}),(function(e,n){e(n,3,0,n.component.getBuildingName(n.context.$implicit))}))}function eN(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-building",[],null,null,null,my,Zb)),ei(2,8503296,null,0,Xb,[Fp,Np,Qp,Wv,$E,wp,xp],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.demolishMode,l.combineMode,l.splitMode,l.arrangeMode,n.context.$implicit,l.fieldService)}),null)}function nN(e){return qs(0,[(e()(),Ds(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Buildings"])),(e()(),Ds(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,eN)),ei(6,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,6,0,n.component.getBuildings())}),null)}function lN(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"span",[["class","page"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.setPage(e.context.$implicit)&&t),t}),null,null)),ei(1,278528,null,0,la,[Cl,Il,il,ol],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),zs(2,{activePage:0}),(e()(),Ks(3,null,["page ",""]))],(function(e,n){var l=e(n,2,0,n.component.currentPage===n.context.$implicit);e(n,1,0,"page",l)}),(function(e,n){e(n,3,0,n.context.$implicit+1)}))}function tN(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-building",[],null,null,null,my,Zb)),ei(2,8503296,null,0,Xb,[Fp,Np,Qp,Wv,$E,wp,xp],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.demolishMode,l.combineMode,l.splitMode,l.arrangeMode,n.context.$implicit,l.fieldService)}),null)}function iN(e){return qs(0,[(e()(),Ds(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,lN)),ei(3,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ds(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,tN)),ei(6,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,3,0,l.getPagesNumber()),e(n,6,0,l.getPagedBuildings())}),null)}function sN(e){return qs(0,[(e()(),Ds(0,0,null,null,81,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,1,"app-top-menu",[],null,null,null,Cy,Sy)),ei(3,114688,null,0,fy,[Gp,Qp],null,null),(e()(),Ds(4,0,null,null,77,"div",[["id","content"]],null,null,null,null,null)),(e()(),Ds(5,0,null,null,60,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Ds(6,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.openBuildModal()&&t),t}),null,null)),(e()(),Ks(-1,null,["Build"])),(e()(),Ms(16777216,null,null,1,null,zA)),ei(9,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,$A)),ei(11,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,KA)),ei(13,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,jA)),ei(15,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,QA)),ei(17,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,qA)),ei(19,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,XA)),ei(21,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,ZA)),ei(23,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(24,0,null,null,7,"button",[["class","dropdown"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Actions "])),(e()(),Ds(26,0,null,null,0,"img",[["height","10px"],["src","assets/arrow_down.svg"]],null,null,null,null,null)),(e()(),Ds(27,0,null,null,4,"ul",[["class","dropdown-content"]],null,null,null,null,null)),(e()(),Ds(28,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.autoSort()&&t),t}),null,null)),(e()(),Ks(-1,null,["Sort"])),(e()(),Ds(30,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.autoMerge()&&t),t}),null,null)),(e()(),Ks(-1,null,["Merge"])),(e()(),Ds(32,0,null,null,33,"div",[["id","side"]],null,null,null,null,null)),(e()(),Ks(-1,null,[" Filter:"])),(e()(),Ds(34,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(35,0,null,null,30,"div",[["id","filters"]],null,null,null,null,null)),(e()(),Ds(36,0,null,null,11,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,37).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,37).onTouched()&&t),"change"===n&&(t=!1!==i.updateFilter(l)&&t),"ngModelChange"===n&&(t=!1!==(i.filterBuilding=l)&&t),t}),null,null)),ei(37,16384,null,0,Qg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[Qg]),ei(39,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(41,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(42,0,null,null,3,"option",[],null,null,null,null,null)),ei(43,147456,null,0,qg,[il,ol,[2,Qg]],{value:[0,"value"]},null),ei(44,147456,null,0,Zg,[il,ol,[8,null]],{value:[0,"value"]},null),(e()(),Ks(45,null,["",""])),(e()(),Ms(16777216,null,null,1,null,JA)),ei(47,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ds(48,0,null,null,17,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,49).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,49).onTouched()&&t),"change"===n&&(t=!1!==i.updateFilter2(l)&&t),"ngModelChange"===n&&(t=!1!==(i.filterWorking=l)&&t),t}),null,null)),ei(49,16384,null,0,Qg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[Qg]),ei(51,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(53,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(54,0,null,null,3,"option",[],null,null,null,null,null)),ei(55,147456,null,0,qg,[il,ol,[2,Qg]],{value:[0,"value"]},null),ei(56,147456,null,0,Zg,[il,ol,[8,null]],{value:[0,"value"]},null),(e()(),Ks(-1,null,["All"])),(e()(),Ds(58,0,null,null,3,"option",[],null,null,null,null,null)),ei(59,147456,null,0,qg,[il,ol,[2,Qg]],{value:[0,"value"]},null),ei(60,147456,null,0,Zg,[il,ol,[8,null]],{value:[0,"value"]},null),(e()(),Ks(-1,null,["Working"])),(e()(),Ds(62,0,null,null,3,"option",[],null,null,null,null,null)),ei(63,147456,null,0,qg,[il,ol,[2,Qg]],{value:[0,"value"]},null),ei(64,147456,null,0,Zg,[il,ol,[8,null]],{value:[0,"value"]},null),(e()(),Ks(-1,null,["Idle"])),(e()(),Ds(66,0,null,null,11,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(67,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(68,114688,null,0,Rg,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),Ks(69,null,[" "," \xa0\xa0\xa0 "])),(e()(),Ds(70,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(71,114688,null,0,Rg,[],{name:[0,"name"]},null),(e()(),Ks(72,null,[" "," "])),(e()(),Ds(73,0,null,null,4,"div",[["id","allControl"]],null,null,null,null,null)),(e()(),Ds(74,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.enableAll()&&t),t}),null,null)),(e()(),Ks(-1,null,["all on"])),(e()(),Ds(76,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.disableAll()&&t),t}),null,null)),(e()(),Ks(-1,null,["all off"])),(e()(),Ms(16777216,null,null,1,null,nN)),ei(79,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,iN)),ei(81,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,3,0),e(n,9,0,!l.demolishMode),e(n,11,0,l.demolishMode),e(n,13,0,!l.arrangeMode&&l.getBuildings().length>1),e(n,15,0,l.arrangeMode),e(n,17,0,!l.combineMode&&l.isUrbanPlanningEnabled()&&l.hasCombinableBuildings()),e(n,19,0,l.combineMode),e(n,21,0,!l.splitMode&&l.isUrbanPlanningEnabled()&&l.hasSplittableBuildings()),e(n,23,0,l.splitMode),e(n,39,0,l.filterBuilding),e(n,43,0,l.allBuildings),e(n,44,0,l.allBuildings),e(n,47,0,l.getUniqueBuildingsFromCurrentView()),e(n,51,0,l.filterWorking),e(n,55,0,l.buildingStates.ALL),e(n,56,0,l.buildingStates.ALL),e(n,59,0,l.buildingStates.WORKING),e(n,60,0,l.buildingStates.WORKING),e(n,63,0,l.buildingStates.IDLE),e(n,64,0,l.buildingStates.IDLE),e(n,68,0,"hammer","Workers","0 0 0 2px"),e(n,71,0,"land"),e(n,79,0,!l.isPagedViewEnabled()),e(n,81,0,l.isPagedViewEnabled())}),(function(e,n){var l=n.component;e(n,36,0,Yt(n,41).ngClassUntouched,Yt(n,41).ngClassTouched,Yt(n,41).ngClassPristine,Yt(n,41).ngClassDirty,Yt(n,41).ngClassValid,Yt(n,41).ngClassInvalid,Yt(n,41).ngClassPending),e(n,45,0,l.getBuildingName(l.allBuildings)),e(n,48,0,Yt(n,53).ngClassUntouched,Yt(n,53).ngClassTouched,Yt(n,53).ngClassPristine,Yt(n,53).ngClassDirty,Yt(n,53).ngClassValid,Yt(n,53).ngClassInvalid,Yt(n,53).ngClassPending),e(n,69,0,l.getUnemployed()),e(n,72,0,l.getFreeLand())}))}function rN(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"app-field",[],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==Yt(e,1).onKeydownHandler(l)&&t),t}),sN,YA)),ei(1,114688,null,0,WA,[Fp,WE,Gp,Up,VA,wp,Nn],null,null)],(function(e,n){e(n,1,0)}),null)}var uN=Dt("app-field",WA,rN,{},{},[]);let oN=(()=>{class e extends zE{constructor(e,n,l,t,i,s){super(n,e,l,i,t,Eu.MOUNTAINS,bu.MOUNTAINS),this.logService=s}addMeteorite(){let e=Nu.randomElement([{item:su.STONE,chance:35},{item:su.COPPER_ORE,chance:30},{item:su.TIN_ORE,chance:20},{item:su.GOLD_ORE,chance:5},{item:su.SILVER_ORE,chance:5},{item:su.IRON_ORE,chance:5}]);null===e&&(e=su.STONE),this.buildings.push(new TE(this.servicesService,this.idService.getNextId(),Nu.randomBetween(100,200),e)),this.logService.success("Old meteorite found in the mountains!")}}return e.\u0275prov=re({factory:function(){return new e(Ae(Qp),Ae(GE),Ae(Np),Ae(lE),Ae(WE),Ae(xp))},token:e,providedIn:"root"}),e})();class aN extends My{constructor(e,n,l,t,i,s,r){super(e,n,l,i,t,s,r,Eu.MOUNTAINS),this.landService=n,this.mountainsService=i}getMountains(){return this.landService.getMountains()}getCoal(){return this.landService.getOre(su.COAL)}getGoldOre(){return this.landService.getOre(su.GOLD_ORE)}getSilverOre(){return this.landService.getOre(su.SILVER_ORE)}getCopperOre(){return this.landService.getOre(su.COPPER_ORE)}getTinOre(){return this.landService.getOre(su.TIN_ORE)}getIronOre(){return this.landService.getOre(su.IRON_ORE)}}var cN=Kl({encapsulation:0,styles:[Eb,[".deposit[_ngcontent-%COMP%]{display:inline-flex;font-size:.8em;height:24px;align-items:center}"]],data:{}});function hN(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleDemolishMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Demolish"]))],null,null)}function dN(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleDemolishMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Stop"]))],null,null)}function gN(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleArrangeMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Arrange"]))],null,null)}function pN(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleArrangeMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Stop"]))],null,null)}function mN(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleCombineMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Combine"]))],null,null)}function fN(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleCombineMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Stop"]))],null,null)}function SN(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleSplitMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Split"]))],null,null)}function EN(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleSplitMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Stop"]))],null,null)}function vN(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"option",[],null,null,null,null,null)),ei(1,147456,null,0,qg,[il,ol,[2,Qg]],{value:[0,"value"]},null),ei(2,147456,null,0,Zg,[il,ol,[8,null]],{value:[0,"value"]},null),(e()(),Ks(3,null,["",""]))],(function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)}),(function(e,n){e(n,3,0,n.component.getBuildingName(n.context.$implicit))}))}function RN(e){return qs(0,[(e()(),Ds(0,0,null,null,4,"span",[["class","deposit"]],null,null,null,null,null)),(e()(),Ks(-1,null,[" \xa0\xa0\xa0 "])),(e()(),Ds(2,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(3,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),Ks(4,null,[": "," "]))],(function(e,n){e(n,3,0,"coal","resources","coal deposit")}),(function(e,n){e(n,4,0,n.component.getCoal())}))}function ON(e){return qs(0,[(e()(),Ds(0,0,null,null,4,"span",[["class","deposit"]],null,null,null,null,null)),(e()(),Ks(-1,null,[" \xa0\xa0\xa0 "])),(e()(),Ds(2,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(3,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),Ks(4,null,[": "," "]))],(function(e,n){e(n,3,0,"gold_ore","resources","gold deposit")}),(function(e,n){e(n,4,0,n.component.getGoldOre())}))}function TN(e){return qs(0,[(e()(),Ds(0,0,null,null,4,"span",[["class","deposit"]],null,null,null,null,null)),(e()(),Ks(-1,null,[" \xa0\xa0\xa0 "])),(e()(),Ds(2,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(3,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),Ks(4,null,[": "," "]))],(function(e,n){e(n,3,0,"silver_ore","resources","silver deposit")}),(function(e,n){e(n,4,0,n.component.getSilverOre())}))}function CN(e){return qs(0,[(e()(),Ds(0,0,null,null,4,"span",[["class","deposit"]],null,null,null,null,null)),(e()(),Ks(-1,null,[" \xa0\xa0\xa0 "])),(e()(),Ds(2,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(3,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),Ks(4,null,[": "," "]))],(function(e,n){e(n,3,0,"copper_ore","resources","copper deposit")}),(function(e,n){e(n,4,0,n.component.getCopperOre())}))}function IN(e){return qs(0,[(e()(),Ds(0,0,null,null,4,"span",[["class","deposit"]],null,null,null,null,null)),(e()(),Ks(-1,null,[" \xa0\xa0\xa0 "])),(e()(),Ds(2,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(3,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),Ks(4,null,[": "," "]))],(function(e,n){e(n,3,0,"tin_ore","resources","tin deposit")}),(function(e,n){e(n,4,0,n.component.getTinOre())}))}function bN(e){return qs(0,[(e()(),Ds(0,0,null,null,4,"span",[["class","deposit"]],null,null,null,null,null)),(e()(),Ks(-1,null,[" \xa0\xa0\xa0 "])),(e()(),Ds(2,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(3,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),Ks(4,null,[": "," "]))],(function(e,n){e(n,3,0,"iron_ore","resources","iron deposit")}),(function(e,n){e(n,4,0,n.component.getIronOre())}))}function yN(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-building",[],null,null,null,my,Zb)),ei(2,8503296,null,0,Xb,[Fp,Np,Qp,Wv,$E,wp,xp],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.demolishMode,l.combineMode,l.splitMode,l.arrangeMode,n.context.$implicit,l.mountainsService)}),null)}function AN(e){return qs(0,[(e()(),Ds(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Buildings"])),(e()(),Ds(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,yN)),ei(6,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,6,0,n.component.getBuildings())}),null)}function NN(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"span",[["class","page"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.setPage(e.context.$implicit)&&t),t}),null,null)),ei(1,278528,null,0,la,[Cl,Il,il,ol],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),zs(2,{activePage:0}),(e()(),Ks(3,null,["page ",""]))],(function(e,n){var l=e(n,2,0,n.component.currentPage===n.context.$implicit);e(n,1,0,"page",l)}),(function(e,n){e(n,3,0,n.context.$implicit+1)}))}function _N(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-building",[],null,null,null,my,Zb)),ei(2,8503296,null,0,Xb,[Fp,Np,Qp,Wv,$E,wp,xp],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.demolishMode,l.combineMode,l.splitMode,l.arrangeMode,n.context.$implicit,l.mountainsService)}),null)}function wN(e){return qs(0,[(e()(),Ds(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,NN)),ei(3,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ds(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,_N)),ei(6,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,3,0,l.getPagesNumber()),e(n,6,0,l.getPagedBuildings())}),null)}function PN(e){return qs(0,[(e()(),Ds(0,0,null,null,94,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,1,"app-top-menu",[],null,null,null,Cy,Sy)),ei(3,114688,null,0,fy,[Gp,Qp],null,null),(e()(),Ds(4,0,null,null,90,"div",[["id","content"]],null,null,null,null,null)),(e()(),Ds(5,0,null,null,58,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Ds(6,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.openBuildModal()&&t),t}),null,null)),(e()(),Ks(-1,null,["Build"])),(e()(),Ms(16777216,null,null,1,null,hN)),ei(9,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,dN)),ei(11,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,gN)),ei(13,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,pN)),ei(15,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,mN)),ei(17,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,fN)),ei(19,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,SN)),ei(21,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,EN)),ei(23,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(24,0,null,null,5,"button",[["class","dropdown"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Actions "])),(e()(),Ds(26,0,null,null,0,"img",[["height","10px"],["src","assets/arrow_down.svg"]],null,null,null,null,null)),(e()(),Ds(27,0,null,null,2,"ul",[["class","dropdown-content"]],null,null,null,null,null)),(e()(),Ds(28,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.autoSort()&&t),t}),null,null)),(e()(),Ks(-1,null,["Sort"])),(e()(),Ds(30,0,null,null,33,"div",[["id","side"]],null,null,null,null,null)),(e()(),Ks(-1,null,[" Filter:"])),(e()(),Ds(32,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(33,0,null,null,30,"div",[["id","filters"]],null,null,null,null,null)),(e()(),Ds(34,0,null,null,11,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,35).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,35).onTouched()&&t),"change"===n&&(t=!1!==i.updateFilter(l)&&t),"ngModelChange"===n&&(t=!1!==(i.filterBuilding=l)&&t),t}),null,null)),ei(35,16384,null,0,Qg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[Qg]),ei(37,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(39,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(40,0,null,null,3,"option",[],null,null,null,null,null)),ei(41,147456,null,0,qg,[il,ol,[2,Qg]],{value:[0,"value"]},null),ei(42,147456,null,0,Zg,[il,ol,[8,null]],{value:[0,"value"]},null),(e()(),Ks(43,null,["",""])),(e()(),Ms(16777216,null,null,1,null,vN)),ei(45,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ds(46,0,null,null,17,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,47).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,47).onTouched()&&t),"change"===n&&(t=!1!==i.updateFilter2(l)&&t),"ngModelChange"===n&&(t=!1!==(i.filterWorking=l)&&t),t}),null,null)),ei(47,16384,null,0,Qg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[Qg]),ei(49,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(51,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(52,0,null,null,3,"option",[],null,null,null,null,null)),ei(53,147456,null,0,qg,[il,ol,[2,Qg]],{value:[0,"value"]},null),ei(54,147456,null,0,Zg,[il,ol,[8,null]],{value:[0,"value"]},null),(e()(),Ks(-1,null,["All"])),(e()(),Ds(56,0,null,null,3,"option",[],null,null,null,null,null)),ei(57,147456,null,0,qg,[il,ol,[2,Qg]],{value:[0,"value"]},null),ei(58,147456,null,0,Zg,[il,ol,[8,null]],{value:[0,"value"]},null),(e()(),Ks(-1,null,["Working"])),(e()(),Ds(60,0,null,null,3,"option",[],null,null,null,null,null)),ei(61,147456,null,0,qg,[il,ol,[2,Qg]],{value:[0,"value"]},null),ei(62,147456,null,0,Zg,[il,ol,[8,null]],{value:[0,"value"]},null),(e()(),Ks(-1,null,["Idle"])),(e()(),Ds(64,0,null,null,26,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(65,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(66,114688,null,0,Rg,[],{name:[0,"name"]},null),(e()(),Ks(67,null,[" "," \xa0\xa0 "])),(e()(),Ds(68,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(69,114688,null,0,Rg,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),Ks(70,null,[" "," \xa0\xa0\xa0 "])),(e()(),Ds(71,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(72,114688,null,0,Rg,[],{name:[0,"name"]},null),(e()(),Ks(73,null,[" "," "])),(e()(),Ms(16777216,null,null,1,null,RN)),ei(75,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,ON)),ei(77,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,TN)),ei(79,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,CN)),ei(81,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,IN)),ei(83,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,bN)),ei(85,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(86,0,null,null,4,"div",[["id","allControl"]],null,null,null,null,null)),(e()(),Ds(87,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.enableAll()&&t),t}),null,null)),(e()(),Ks(-1,null,["all on"])),(e()(),Ds(89,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.disableAll()&&t),t}),null,null)),(e()(),Ks(-1,null,["all off"])),(e()(),Ms(16777216,null,null,1,null,AN)),ei(92,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,wN)),ei(94,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,3,0),e(n,9,0,!l.demolishMode),e(n,11,0,l.demolishMode),e(n,13,0,!l.arrangeMode&&l.getBuildings().length>1),e(n,15,0,l.arrangeMode),e(n,17,0,!l.combineMode&&l.isUrbanPlanningEnabled()&&l.hasCombinableBuildings()),e(n,19,0,l.combineMode),e(n,21,0,!l.splitMode&&l.isUrbanPlanningEnabled()&&l.hasSplittableBuildings()),e(n,23,0,l.splitMode),e(n,37,0,l.filterBuilding),e(n,41,0,l.allBuildings),e(n,42,0,l.allBuildings),e(n,45,0,l.getUniqueBuildingsFromCurrentView()),e(n,49,0,l.filterWorking),e(n,53,0,l.buildingStates.ALL),e(n,54,0,l.buildingStates.ALL),e(n,57,0,l.buildingStates.WORKING),e(n,58,0,l.buildingStates.WORKING),e(n,61,0,l.buildingStates.IDLE),e(n,62,0,l.buildingStates.IDLE),e(n,66,0,"mountains"),e(n,69,0,"hammer","Workers","0 0 0 2px"),e(n,72,0,"land"),e(n,75,0,l.getCoal()>0),e(n,77,0,l.getGoldOre()>0),e(n,79,0,l.getSilverOre()>0),e(n,81,0,l.getCopperOre()>0),e(n,83,0,l.getTinOre()>0),e(n,85,0,l.getIronOre()>0),e(n,92,0,!l.isPagedViewEnabled()),e(n,94,0,l.isPagedViewEnabled())}),(function(e,n){var l=n.component;e(n,34,0,Yt(n,39).ngClassUntouched,Yt(n,39).ngClassTouched,Yt(n,39).ngClassPristine,Yt(n,39).ngClassDirty,Yt(n,39).ngClassValid,Yt(n,39).ngClassInvalid,Yt(n,39).ngClassPending),e(n,43,0,l.getBuildingName(l.allBuildings)),e(n,46,0,Yt(n,51).ngClassUntouched,Yt(n,51).ngClassTouched,Yt(n,51).ngClassPristine,Yt(n,51).ngClassDirty,Yt(n,51).ngClassValid,Yt(n,51).ngClassInvalid,Yt(n,51).ngClassPending),e(n,67,0,l.getMountains()),e(n,70,0,l.getUnemployed()),e(n,73,0,l.getFreeLand())}))}function MN(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"app-mountains",[],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==Yt(e,1).onKeydownHandler(l)&&t),t}),PN,cN)),ei(1,114688,null,0,aN,[Fp,WE,Gp,Up,oN,wp,Nn],null,null)],(function(e,n){e(n,1,0)}),null)}var DN=Dt("app-mountains",aN,MN,{},{},[]);let LN=(()=>{class e extends zE{constructor(e,n,l,t,i,s){super(n,e,l,t,i,Eu.PLATEAU,bu.PLATEAU),this.gameService=s}reset(e,n){e?super.reset(e,n):n?this.buildings=[]:(this.buildings=this.buildings.filter(e=>e.isFinished()),this.buildings.length>0&&this.gameService.enable(ou.PLATEAU),this.getBuildings().forEach(e=>e.verifyWonderEffects()))}}return e.\u0275prov=re({factory:function(){return new e(Ae(Qp),Ae(GE),Ae(Np),Ae(WE),Ae(lE),Ae(Gp))},token:e,providedIn:"root"}),e})();class xN extends My{constructor(e,n,l,t,i,s,r,u){super(e,n,l,s,t,r,u,Eu.PLATEAU),this.landService=n,this.techService=i,this.plateauService=s}areWonderBuildingsResearched(){return!Qu.production||this.techService.isResearched(uu.WONDER_BUILDINGS)}}var kN=Kl({encapsulation:0,styles:[Eb,["#allControl[_ngcontent-%COMP%]{margin-left:auto;width:108px;display:inline-block}#allControl[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:4px}"]],data:{}});function FN(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.openBuildModal()&&t),t}),null,null)),(e()(),Ks(-1,null,["Build"]))],null,null)}function UN(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleArrangeMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Arrange"]))],null,null)}function HN(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleArrangeMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Stop"]))],null,null)}function GN(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"option",[],null,null,null,null,null)),ei(1,147456,null,0,qg,[il,ol,[2,Qg]],{value:[0,"value"]},null),ei(2,147456,null,0,Zg,[il,ol,[8,null]],{value:[0,"value"]},null),(e()(),Ks(3,null,["",""]))],(function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)}),(function(e,n){e(n,3,0,n.component.getBuildingName(n.context.$implicit))}))}function BN(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-building",[],null,null,null,my,Zb)),ei(2,8503296,null,0,Xb,[Fp,Np,Qp,Wv,$E,wp,xp],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.demolishMode,l.combineMode,l.splitMode,l.arrangeMode,n.context.$implicit,l.plateauService)}),null)}function VN(e){return qs(0,[(e()(),Ds(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Buildings"])),(e()(),Ds(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,BN)),ei(6,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,6,0,n.component.getBuildings())}),null)}function WN(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"span",[["class","page"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.setPage(e.context.$implicit)&&t),t}),null,null)),ei(1,278528,null,0,la,[Cl,Il,il,ol],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),zs(2,{activePage:0}),(e()(),Ks(3,null,["page ",""]))],(function(e,n){var l=e(n,2,0,n.component.currentPage===n.context.$implicit);e(n,1,0,"page",l)}),(function(e,n){e(n,3,0,n.context.$implicit+1)}))}function YN(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-building",[],null,null,null,my,Zb)),ei(2,8503296,null,0,Xb,[Fp,Np,Qp,Wv,$E,wp,xp],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.demolishMode,l.combineMode,l.splitMode,l.arrangeMode,n.context.$implicit,l.plateauService)}),null)}function zN(e){return qs(0,[(e()(),Ds(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,WN)),ei(3,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ds(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,YN)),ei(6,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,3,0,l.getPagesNumber()),e(n,6,0,l.getPagedBuildings())}),null)}function $N(e){return qs(0,[(e()(),Ds(0,0,null,null,56,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,1,"app-top-menu",[],null,null,null,Cy,Sy)),ei(3,114688,null,0,fy,[Gp,Qp],null,null),(e()(),Ds(4,0,null,null,52,"div",[["id","content"]],null,null,null,null,null)),(e()(),Ds(5,0,null,null,40,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,FN)),ei(7,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,UN)),ei(9,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,HN)),ei(11,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(12,0,null,null,33,"div",[["id","side"]],null,null,null,null,null)),(e()(),Ks(-1,null,[" Filter:"])),(e()(),Ds(14,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(15,0,null,null,30,"div",[["id","filters"]],null,null,null,null,null)),(e()(),Ds(16,0,null,null,11,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,17).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,17).onTouched()&&t),"change"===n&&(t=!1!==i.updateFilter(l)&&t),"ngModelChange"===n&&(t=!1!==(i.filterBuilding=l)&&t),t}),null,null)),ei(17,16384,null,0,Qg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[Qg]),ei(19,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(21,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(22,0,null,null,3,"option",[],null,null,null,null,null)),ei(23,147456,null,0,qg,[il,ol,[2,Qg]],{value:[0,"value"]},null),ei(24,147456,null,0,Zg,[il,ol,[8,null]],{value:[0,"value"]},null),(e()(),Ks(25,null,["",""])),(e()(),Ms(16777216,null,null,1,null,GN)),ei(27,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ds(28,0,null,null,17,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,29).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,29).onTouched()&&t),"change"===n&&(t=!1!==i.updateFilter2(l)&&t),"ngModelChange"===n&&(t=!1!==(i.filterWorking=l)&&t),t}),null,null)),ei(29,16384,null,0,Qg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[Qg]),ei(31,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(33,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(34,0,null,null,3,"option",[],null,null,null,null,null)),ei(35,147456,null,0,qg,[il,ol,[2,Qg]],{value:[0,"value"]},null),ei(36,147456,null,0,Zg,[il,ol,[8,null]],{value:[0,"value"]},null),(e()(),Ks(-1,null,["All"])),(e()(),Ds(38,0,null,null,3,"option",[],null,null,null,null,null)),ei(39,147456,null,0,qg,[il,ol,[2,Qg]],{value:[0,"value"]},null),ei(40,147456,null,0,Zg,[il,ol,[8,null]],{value:[0,"value"]},null),(e()(),Ks(-1,null,["Working"])),(e()(),Ds(42,0,null,null,3,"option",[],null,null,null,null,null)),ei(43,147456,null,0,qg,[il,ol,[2,Qg]],{value:[0,"value"]},null),ei(44,147456,null,0,Zg,[il,ol,[8,null]],{value:[0,"value"]},null),(e()(),Ks(-1,null,["Idle"])),(e()(),Ds(46,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(47,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(48,114688,null,0,Rg,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),Ks(49,null,[" "," \xa0\xa0\xa0 "])),(e()(),Ds(50,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(51,114688,null,0,Rg,[],{name:[0,"name"]},null),(e()(),Ks(52,null,[" "," "])),(e()(),Ms(16777216,null,null,1,null,VN)),ei(54,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,zN)),ei(56,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,3,0),e(n,7,0,l.areWonderBuildingsResearched()),e(n,9,0,!l.arrangeMode&&l.getBuildings().length>1),e(n,11,0,l.arrangeMode),e(n,19,0,l.filterBuilding),e(n,23,0,l.allBuildings),e(n,24,0,l.allBuildings),e(n,27,0,l.getUniqueBuildingsFromCurrentView()),e(n,31,0,l.filterWorking),e(n,35,0,l.buildingStates.ALL),e(n,36,0,l.buildingStates.ALL),e(n,39,0,l.buildingStates.WORKING),e(n,40,0,l.buildingStates.WORKING),e(n,43,0,l.buildingStates.IDLE),e(n,44,0,l.buildingStates.IDLE),e(n,48,0,"hammer","Workers","0 0 0 2px"),e(n,51,0,"land"),e(n,54,0,!l.isPagedViewEnabled()),e(n,56,0,l.isPagedViewEnabled())}),(function(e,n){var l=n.component;e(n,16,0,Yt(n,21).ngClassUntouched,Yt(n,21).ngClassTouched,Yt(n,21).ngClassPristine,Yt(n,21).ngClassDirty,Yt(n,21).ngClassValid,Yt(n,21).ngClassInvalid,Yt(n,21).ngClassPending),e(n,25,0,l.getBuildingName(l.allBuildings)),e(n,28,0,Yt(n,33).ngClassUntouched,Yt(n,33).ngClassTouched,Yt(n,33).ngClassPristine,Yt(n,33).ngClassDirty,Yt(n,33).ngClassValid,Yt(n,33).ngClassInvalid,Yt(n,33).ngClassPending),e(n,49,0,l.getUnemployed()),e(n,52,0,l.getFreeLand())}))}function KN(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"app-field",[],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==Yt(e,1).onKeydownHandler(l)&&t),t}),$N,kN)),ei(1,114688,null,0,xN,[Fp,WE,Gp,Up,sR,LN,wp,Nn],null,null)],(function(e,n){e(n,1,0)}),null)}var jN=Dt("app-field",xN,KN,{},{},[]);class QN extends My{constructor(e,n,l,t,i,s,r,u){super(e,n,l,i,t,s,r,Eu.SEA),this.landService=n,this.seaService=i,this.navyService=u}getHarbourSpace(){return this.navyService.getHarbourSpace()}getMaxHarbourSpace(){return this.navyService.getMaxHarbourSpace()}}var qN=Kl({encapsulation:0,styles:[Eb,[""]],data:{}});function XN(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleDemolishMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Demolish"]))],null,null)}function ZN(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleDemolishMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Stop"]))],null,null)}function JN(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleArrangeMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Arrange"]))],null,null)}function e_(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleArrangeMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Stop"]))],null,null)}function n_(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleCombineMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Combine"]))],null,null)}function l_(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleCombineMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Stop"]))],null,null)}function t_(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleSplitMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Split"]))],null,null)}function i_(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleSplitMode()&&t),t}),null,null)),(e()(),Ks(-1,null,["Stop"]))],null,null)}function s_(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"option",[],null,null,null,null,null)),ei(1,147456,null,0,qg,[il,ol,[2,Qg]],{value:[0,"value"]},null),ei(2,147456,null,0,Zg,[il,ol,[8,null]],{value:[0,"value"]},null),(e()(),Ks(3,null,["",""]))],(function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)}),(function(e,n){e(n,3,0,n.component.getBuildingName(n.context.$implicit))}))}function r_(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-building",[],null,null,null,my,Zb)),ei(2,8503296,null,0,Xb,[Fp,Np,Qp,Wv,$E,wp,xp],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.demolishMode,l.combineMode,l.splitMode,l.arrangeMode,n.context.$implicit,l.seaService)}),null)}function u_(e){return qs(0,[(e()(),Ds(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Buildings"])),(e()(),Ds(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,r_)),ei(6,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,6,0,n.component.getBuildings())}),null)}function o_(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"span",[["class","page"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.setPage(e.context.$implicit)&&t),t}),null,null)),ei(1,278528,null,0,la,[Cl,Il,il,ol],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),zs(2,{activePage:0}),(e()(),Ks(3,null,["page ",""]))],(function(e,n){var l=e(n,2,0,n.component.currentPage===n.context.$implicit);e(n,1,0,"page",l)}),(function(e,n){e(n,3,0,n.context.$implicit+1)}))}function a_(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-building",[],null,null,null,my,Zb)),ei(2,8503296,null,0,Xb,[Fp,Np,Qp,Wv,$E,wp,xp],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.demolishMode,l.combineMode,l.splitMode,l.arrangeMode,n.context.$implicit,l.seaService)}),null)}function c_(e){return qs(0,[(e()(),Ds(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,o_)),ei(3,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ds(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,a_)),ei(6,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,3,0,l.getPagesNumber()),e(n,6,0,l.getPagedBuildings())}),null)}function h_(e){return qs(0,[(e()(),Ds(0,0,null,null,82,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,1,"app-top-menu",[],null,null,null,Cy,Sy)),ei(3,114688,null,0,fy,[Gp,Qp],null,null),(e()(),Ds(4,0,null,null,78,"div",[["id","content"]],null,null,null,null,null)),(e()(),Ds(5,0,null,null,58,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Ds(6,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.openBuildModal()&&t),t}),null,null)),(e()(),Ks(-1,null,["Build"])),(e()(),Ms(16777216,null,null,1,null,XN)),ei(9,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,ZN)),ei(11,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,JN)),ei(13,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,e_)),ei(15,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,n_)),ei(17,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,l_)),ei(19,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,t_)),ei(21,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,i_)),ei(23,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(24,0,null,null,5,"button",[["class","dropdown"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Actions "])),(e()(),Ds(26,0,null,null,0,"img",[["height","10px"],["src","assets/arrow_down.svg"]],null,null,null,null,null)),(e()(),Ds(27,0,null,null,2,"ul",[["class","dropdown-content"]],null,null,null,null,null)),(e()(),Ds(28,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.autoSort()&&t),t}),null,null)),(e()(),Ks(-1,null,["Sort"])),(e()(),Ds(30,0,null,null,33,"div",[["id","side"]],null,null,null,null,null)),(e()(),Ks(-1,null,[" Filter:"])),(e()(),Ds(32,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(33,0,null,null,30,"div",[["id","filters"]],null,null,null,null,null)),(e()(),Ds(34,0,null,null,11,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,35).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,35).onTouched()&&t),"change"===n&&(t=!1!==i.updateFilter(l)&&t),"ngModelChange"===n&&(t=!1!==(i.filterBuilding=l)&&t),t}),null,null)),ei(35,16384,null,0,Qg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[Qg]),ei(37,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(39,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(40,0,null,null,3,"option",[],null,null,null,null,null)),ei(41,147456,null,0,qg,[il,ol,[2,Qg]],{value:[0,"value"]},null),ei(42,147456,null,0,Zg,[il,ol,[8,null]],{value:[0,"value"]},null),(e()(),Ks(43,null,["",""])),(e()(),Ms(16777216,null,null,1,null,s_)),ei(45,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ds(46,0,null,null,17,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,47).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,47).onTouched()&&t),"change"===n&&(t=!1!==i.updateFilter2(l)&&t),"ngModelChange"===n&&(t=!1!==(i.filterWorking=l)&&t),t}),null,null)),ei(47,16384,null,0,Qg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[Qg]),ei(49,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(51,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(52,0,null,null,3,"option",[],null,null,null,null,null)),ei(53,147456,null,0,qg,[il,ol,[2,Qg]],{value:[0,"value"]},null),ei(54,147456,null,0,Zg,[il,ol,[8,null]],{value:[0,"value"]},null),(e()(),Ks(-1,null,["All"])),(e()(),Ds(56,0,null,null,3,"option",[],null,null,null,null,null)),ei(57,147456,null,0,qg,[il,ol,[2,Qg]],{value:[0,"value"]},null),ei(58,147456,null,0,Zg,[il,ol,[8,null]],{value:[0,"value"]},null),(e()(),Ks(-1,null,["Working"])),(e()(),Ds(60,0,null,null,3,"option",[],null,null,null,null,null)),ei(61,147456,null,0,qg,[il,ol,[2,Qg]],{value:[0,"value"]},null),ei(62,147456,null,0,Zg,[il,ol,[8,null]],{value:[0,"value"]},null),(e()(),Ks(-1,null,["Idle"])),(e()(),Ds(64,0,null,null,14,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(65,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(66,114688,null,0,Rg,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),Ks(67,null,[" "," \xa0\xa0\xa0 "])),(e()(),Ds(68,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(69,114688,null,0,Rg,[],{name:[0,"name"]},null),(e()(),Ks(70,null,[" "," \xa0\xa0\xa0 "])),(e()(),Ds(71,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(72,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(73,null,[" ","/"," "])),(e()(),Ds(74,0,null,null,4,"div",[["id","allControl"]],null,null,null,null,null)),(e()(),Ds(75,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.enableAll()&&t),t}),null,null)),(e()(),Ks(-1,null,["all on"])),(e()(),Ds(77,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.disableAll()&&t),t}),null,null)),(e()(),Ks(-1,null,["all off"])),(e()(),Ms(16777216,null,null,1,null,u_)),ei(80,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,c_)),ei(82,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,3,0),e(n,9,0,!l.demolishMode),e(n,11,0,l.demolishMode),e(n,13,0,!l.arrangeMode&&l.getBuildings().length>1),e(n,15,0,l.arrangeMode),e(n,17,0,!l.combineMode&&l.isUrbanPlanningEnabled()&&l.hasCombinableBuildings()),e(n,19,0,l.combineMode),e(n,21,0,!l.splitMode&&l.isUrbanPlanningEnabled()&&l.hasSplittableBuildings()),e(n,23,0,l.splitMode),e(n,37,0,l.filterBuilding),e(n,41,0,l.allBuildings),e(n,42,0,l.allBuildings),e(n,45,0,l.getUniqueBuildingsFromCurrentView()),e(n,49,0,l.filterWorking),e(n,53,0,l.buildingStates.ALL),e(n,54,0,l.buildingStates.ALL),e(n,57,0,l.buildingStates.WORKING),e(n,58,0,l.buildingStates.WORKING),e(n,61,0,l.buildingStates.IDLE),e(n,62,0,l.buildingStates.IDLE),e(n,66,0,"hammer","Workers","0 0 0 2px"),e(n,69,0,"land"),e(n,72,0,"port","sea"),e(n,80,0,!l.isPagedViewEnabled()),e(n,82,0,l.isPagedViewEnabled())}),(function(e,n){var l=n.component;e(n,34,0,Yt(n,39).ngClassUntouched,Yt(n,39).ngClassTouched,Yt(n,39).ngClassPristine,Yt(n,39).ngClassDirty,Yt(n,39).ngClassValid,Yt(n,39).ngClassInvalid,Yt(n,39).ngClassPending),e(n,43,0,l.getBuildingName(l.allBuildings)),e(n,46,0,Yt(n,51).ngClassUntouched,Yt(n,51).ngClassTouched,Yt(n,51).ngClassPristine,Yt(n,51).ngClassDirty,Yt(n,51).ngClassValid,Yt(n,51).ngClassInvalid,Yt(n,51).ngClassPending),e(n,67,0,l.getUnemployed()),e(n,70,0,l.getFreeLand()),e(n,73,0,l.getHarbourSpace(),l.getMaxHarbourSpace())}))}function d_(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"app-sea",[],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==Yt(e,1).onKeydownHandler(l)&&t),t}),h_,qN)),ei(1,114688,null,0,QN,[Fp,WE,Gp,Up,WT,wp,Nn,YT],null,null)],(function(e,n){e(n,1,0)}),null)}var g_=Dt("app-sea",QN,d_,{},{},[]);class p_{constructor(e){this.gameService=e}ngOnInit(){}isForestManagementEnabled(){return this.gameService.isEnabled(ou.FORESTER)}}var m_=Kl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{flex-direction:row}#wrapper[_ngcontent-%COMP%], .entry[_ngcontent-%COMP%]{display:flex;height:100%}.entry[_ngcontent-%COMP%]{flex:auto;justify-content:center;flex-direction:column;text-align:center;border-right:2px solid #000;cursor:pointer;text-decoration:none;color:#000;font-size:1em}.entry[_ngcontent-%COMP%]:last-of-type{border:none}.entry.active[_ngcontent-%COMP%]{background:var(--active-colour)}"]],data:{}});function f_(e){return qs(0,[(e()(),Ds(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/management/forestM"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==Yt(e,1).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ei(1,671744,[[8,4]],0,Hd,[Fd,Rh,Ho],{routerLink:[0,"routerLink"]},null),ei(2,1720320,null,2,Bd,[Fd,il,ol,Nn,[2,Ud],[2,Hd]],{routerLinkActive:[0,"routerLinkActive"]},null),Us(603979776,7,{links:1}),Us(603979776,8,{linksWithHrefs:1}),(e()(),Ks(-1,null,["Forest"]))],(function(e,n){e(n,1,0,"/management/forestM"),e(n,2,0,"active")}),(function(e,n){e(n,0,0,Yt(n,1).target,Yt(n,1).href)}))}function S_(e){return qs(0,[(e()(),Ds(0,0,null,null,26,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/management/general"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==Yt(e,2).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ei(2,671744,[[2,4]],0,Hd,[Fd,Rh,Ho],{routerLink:[0,"routerLink"]},null),ei(3,1720320,null,2,Bd,[Fd,il,ol,Nn,[2,Ud],[2,Hd]],{routerLinkActive:[0,"routerLinkActive"]},null),Us(603979776,1,{links:1}),Us(603979776,2,{linksWithHrefs:1}),(e()(),Ks(-1,null,["General"])),(e()(),Ds(7,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/management/happiness"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==Yt(e,8).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ei(8,671744,[[4,4]],0,Hd,[Fd,Rh,Ho],{routerLink:[0,"routerLink"]},null),ei(9,1720320,null,2,Bd,[Fd,il,ol,Nn,[2,Ud],[2,Hd]],{routerLinkActive:[0,"routerLinkActive"]},null),Us(603979776,3,{links:1}),Us(603979776,4,{linksWithHrefs:1}),(e()(),Ks(-1,null,["Happiness"])),(e()(),Ds(13,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/management/effects"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==Yt(e,14).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ei(14,671744,[[6,4]],0,Hd,[Fd,Rh,Ho],{routerLink:[0,"routerLink"]},null),ei(15,1720320,null,2,Bd,[Fd,il,ol,Nn,[2,Ud],[2,Hd]],{routerLinkActive:[0,"routerLinkActive"]},null),Us(603979776,5,{links:1}),Us(603979776,6,{linksWithHrefs:1}),(e()(),Ks(-1,null,["Effects"])),(e()(),Ms(16777216,null,null,1,null,f_)),ei(20,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(21,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/management/summary"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==Yt(e,22).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ei(22,671744,[[10,4]],0,Hd,[Fd,Rh,Ho],{routerLink:[0,"routerLink"]},null),ei(23,1720320,null,2,Bd,[Fd,il,ol,Nn,[2,Ud],[2,Hd]],{routerLinkActive:[0,"routerLinkActive"]},null),Us(603979776,9,{links:1}),Us(603979776,10,{linksWithHrefs:1}),(e()(),Ks(-1,null,["Summary"]))],(function(e,n){var l=n.component;e(n,2,0,"/management/general"),e(n,3,0,"active"),e(n,8,0,"/management/happiness"),e(n,9,0,"active"),e(n,14,0,"/management/effects"),e(n,15,0,"active"),e(n,20,0,l.isForestManagementEnabled()),e(n,22,0,"/management/summary"),e(n,23,0,"active")}),(function(e,n){e(n,1,0,Yt(n,2).target,Yt(n,2).href),e(n,7,0,Yt(n,8).target,Yt(n,8).href),e(n,13,0,Yt(n,14).target,Yt(n,14).href),e(n,21,0,Yt(n,22).target,Yt(n,22).href)}))}class E_{constructor(e,n,l){this.managementService=e,this.resourcesService=n,this.gameService=l}ngOnInit(){}getRations(){return this.managementService.getRations()}changeFoodValue(e){this.managementService.setRations(e.target.value)}changeClothesValue(e){this.managementService.setClothesRations(e.target.value)}changeAlcoholValue(e){this.managementService.setAlcoholRations(e.target.value)}getClothesRations(){return this.managementService.getClothesRations()}getAlcoholRations(){return this.managementService.getAlcoholRations()}updateFurClothes(){this.managementService.toggleFurClothes()}getFurClothes(){return this.managementService.getFurClothes()}updateFoodNutrition(){this.managementService.toggleFoodNutrition()}getFoodNutrition(){return this.managementService.getFoodNutrition()}updateComplexWorkers(){this.managementService.toggleComplexWorkers()}getComplexWorkers(){return this.managementService.getComplexWorkers()}isHREnabled(){return this.gameService.isEnabled(ou.HUMAN_RESOURCES)}getSecondHeaderRow(){return this.managementService.getSecondHeaderRow()}updateSecondHeaderRow(){this.managementService.toggleSecondHeaderRow()}getShowFreeWorkers(){return this.managementService.getShowFreeWorkers()}updateShowFreeWorkers(){this.managementService.toggleShowFreeWorkers()}getShowPopulation(){return this.managementService.getShowPopulation()}updateShowPopulation(){this.managementService.toggleShowPopulation()}getFoodLines(){return this.managementService.getFoodPriority()}getResourceName(e){return Ou.prepareResourceName(e)}up(e,n){this.managementService.up(e,n)}down(e,n){this.managementService.down(e,n)}getShowResearchProgress(){return this.managementService.getShowResearchProgress()}updateShowResearchProgress(){this.managementService.toggleShowResearchProgress()}getShowFaith(){return this.managementService.getShowFaith()}updateShowFaith(){this.managementService.toggleShowFaith()}getShowHappiness(){return this.managementService.getShowHappiness()}updateShowHappiness(){this.managementService.toggleShowHappiness()}isFaithUnlocked(){return this.gameService.isEnabled(ou.RELIGION)}getLogFiredWorkers(){return this.managementService.getLogFiredWorkers()}updateLogFiredWorkers(){this.managementService.toggleLogFiredWorkers()}getDefaultWorkshopResearch(){return this.managementService.getDefaultWorkshopResearch()}updateDefaultWorkshopResearch(){this.managementService.toggleDefaultWorkshopResearch()}getDefaultGathererFood(){return this.managementService.getDefaultGathererFood()}updateDefaultGathererFood(){this.managementService.toggleDefaultGathererFood()}getSwitchHunterFromTaming(){return this.managementService.getSwitchHunterFromTaming()}updateSwitchHunterFromTaming(){this.managementService.toggleSwitchHunterFromTaming()}getPlowInSummer(){return this.managementService.getPlowInSummer()}updatePlowInSummer(){this.managementService.togglePlowInSummer()}getLogAutoTrade(){return this.managementService.getLogAutoTrade()}updateLogAutoTrade(){this.managementService.toggleLogAutoTrade()}getShowRaw(){return this.managementService.getShowRaw()}updateShowRaw(){this.managementService.toggleShowRaw()}getShowProcessed(){return this.managementService.getShowProcessed()}updateShowProcessed(){this.managementService.toggleShowProcessed()}getShowFood(){return this.managementService.getShowFood()}updateShowFood(){this.managementService.toggleShowFood()}getShowTools(){return this.managementService.getShowTools()}updateShowTools(){this.managementService.toggleShowTools()}getLogSickness(){return this.managementService.getLogSickness()}updateLogSickness(){this.managementService.toggleLogSickness()}getLogMerchant(){return this.managementService.getLogMerchant()}updateLogMerchant(){this.managementService.toggleLogMerchant()}getTaxRate(){return this.managementService.getTaxRate()}changeTaxRate(e){this.managementService.setTaxRate(e.target.value)}isTaxUnlocked(){return this.gameService.isEnabled(ou.TAX_COLLECTOR)}}var v_=Kl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:99%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#content[_ngcontent-%COMP%]{margin:.5%;height:94%;overflow-y:auto}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}.label[_ngcontent-%COMP%]{display:inline-block;width:140px}.slidecontainer[_ngcontent-%COMP%]{display:inline-block;width:150px}.slider[_ngcontent-%COMP%]{-webkit-appearance:none;width:100%;height:10px;border-radius:5px;background:var(--passive-colour);outline:none;opacity:.7;transition:opacity .2s}.slider[_ngcontent-%COMP%]:hover{opacity:1}.slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:15px;height:15px;border-radius:50%;background:var(--active-colour);cursor:pointer}.slider[_ngcontent-%COMP%]::-moz-range-thumb{width:15px;height:15px;border-radius:50%;background:var(--active-colour);cursor:pointer}app-icon[_ngcontent-%COMP%]{display:inline-block}#arrows[_ngcontent-%COMP%]{display:flex;flex-direction:column}.arrow[_ngcontent-%COMP%]{font-size:.7em;width:12px;display:inline-block}.priorityLine[_ngcontent-%COMP%]{height:34px}.entry[_ngcontent-%COMP%]{display:inline-block;margin:2px}.item[_ngcontent-%COMP%]{display:flex;flex-direction:row}#index[_ngcontent-%COMP%]{display:inline-block;width:10px}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]],data:{}});function R_(e){return qs(0,[(e()(),Ds(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"span",[["class","label"]],null,null,null,null,null)),(e()(),Ks(2,null,["tax/donation: ","%"])),(e()(),Ds(3,0,null,null,1,"div",[["class","slidecontainer"]],null,null,null,null,null)),(e()(),Ds(4,0,null,null,0,"input",[["class","slider"],["max","5"],["min","0"],["type","range"],["value","0"]],[[8,"value",0]],[[null,"input"]],(function(e,n,l){var t=!0;return"input"===n&&(t=!1!==e.component.changeTaxRate(l)&&t),t}),null,null))],null,(function(e,n){var l=n.component;e(n,2,0,10*l.getTaxRate()),e(n,4,0,l.getTaxRate())}))}function O_(e){return qs(0,[(e()(),Ds(0,0,null,null,3,null,null,null,null,null,null,null)),(e()(),Ds(1,0,null,null,0,"input",[["id","workManagement"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==e.component.updateComplexWorkers()&&t),t}),null,null)),(e()(),Ds(2,0,null,null,1,"label",[["for","workManagement"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Enable automated work management for some buildings"]))],null,(function(e,n){e(n,1,0,n.component.getComplexWorkers())}))}function T_(e){return qs(0,[(e()(),Ds(0,0,null,null,8,"div",[["class","entry"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,7,"span",[["class","item"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(3,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ds(4,0,null,null,4,"span",[["id","arrows"]],null,null,null,null,null)),(e()(),Ds(5,0,null,null,1,"button",[["class","arrow"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.up(e.context.$implicit,e.parent.context.index)&&t),t}),null,null)),(e()(),Ks(-1,null,["\u2191"])),(e()(),Ds(7,0,null,null,1,"button",[["class","arrow"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.down(e.context.$implicit,e.parent.context.index)&&t),t}),null,null)),(e()(),Ks(-1,null,["\u2193"]))],(function(e,n){e(n,3,0,n.component.getResourceName(n.context.$implicit),"resources")}),null)}function C_(e){return qs(0,[(e()(),Ds(0,0,null,null,4,"div",[["class","priorityLine icon"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"span",[["id","index"]],null,null,null,null,null)),(e()(),Ks(2,null,["",""])),(e()(),Ms(16777216,null,null,1,null,T_)),ei(4,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,4,0,n.context.$implicit)}),(function(e,n){e(n,2,0,n.context.index+1)}))}function I_(e){return qs(0,[(e()(),Ds(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,0,"input",[["id","showFaith"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==e.component.updateShowFaith()&&t),t}),null,null)),(e()(),Ds(2,0,null,null,1,"label",[["for","showFaith"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Show faith in the header"])),(e()(),Ds(4,0,null,null,0,"br",[],null,null,null,null,null))],null,(function(e,n){e(n,1,0,n.component.getShowFaith())}))}function b_(e){return qs(0,[(e()(),Ds(0,0,null,null,120,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,1,"app-management-top-menu",[],null,null,null,S_,m_)),ei(3,114688,null,0,p_,[Gp],null,null),(e()(),Ds(4,0,null,null,116,"div",[["id","content"]],null,null,null,null,null)),(e()(),Ds(5,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),Ds(6,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["General Management"])),(e()(),Ds(8,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Rations"])),(e()(),Ds(10,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(11,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),Ds(12,0,null,null,1,"span",[["class","label"]],null,null,null,null,null)),(e()(),Ks(13,null,["food: ",""])),(e()(),Ds(14,0,null,null,1,"div",[["class","slidecontainer"]],null,null,null,null,null)),(e()(),Ds(15,0,null,null,0,"input",[["class","slider"],["max","4"],["min","1"],["type","range"],["value","2"]],[[8,"value",0]],[[null,"input"]],(function(e,n,l){var t=!0;return"input"===n&&(t=!1!==e.component.changeFoodValue(l)&&t),t}),null,null)),(e()(),Ds(16,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),Ds(17,0,null,null,1,"span",[["class","label"]],null,null,null,null,null)),(e()(),Ks(18,null,["clothes: ",""])),(e()(),Ds(19,0,null,null,1,"div",[["class","slidecontainer"]],null,null,null,null,null)),(e()(),Ds(20,0,null,null,0,"input",[["class","slider"],["max","4"],["min","1"],["type","range"],["value","2"]],[[8,"value",0]],[[null,"input"]],(function(e,n,l){var t=!0;return"input"===n&&(t=!1!==e.component.changeClothesValue(l)&&t),t}),null,null)),(e()(),Ds(21,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),Ds(22,0,null,null,1,"span",[["class","label"]],null,null,null,null,null)),(e()(),Ks(23,null,["alcohol: ",""])),(e()(),Ds(24,0,null,null,1,"div",[["class","slidecontainer"]],null,null,null,null,null)),(e()(),Ds(25,0,null,null,0,"input",[["class","slider"],["max","4"],["min","1"],["type","range"],["value","1"]],[[8,"value",0]],[[null,"input"]],(function(e,n,l){var t=!0;return"input"===n&&(t=!1!==e.component.changeAlcoholValue(l)&&t),t}),null,null)),(e()(),Ms(16777216,null,null,1,null,R_)),ei(27,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(28,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(29,0,null,null,0,"input",[["id","furClothes"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==e.component.updateFurClothes()&&t),t}),null,null)),(e()(),Ds(30,0,null,null,1,"label",[["for","furClothes"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Allow fur when no clothes are available"])),(e()(),Ds(32,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,O_)),ei(34,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(35,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(36,0,null,null,3,null,null,null,null,null,null,null)),(e()(),Ds(37,0,null,null,0,"input",[["id","defaultWorkshopResearch"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==e.component.updateDefaultWorkshopResearch()&&t),t}),null,null)),(e()(),Ds(38,0,null,null,1,"label",[["for","defaultWorkshopResearch"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Workshops start with research mode (on) or crafting (off)"])),(e()(),Ds(40,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(41,0,null,null,3,null,null,null,null,null,null,null)),(e()(),Ds(42,0,null,null,0,"input",[["id","defaultGathererFood"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==e.component.updateDefaultGathererFood()&&t),t}),null,null)),(e()(),Ds(43,0,null,null,1,"label",[["for","defaultGathererFood"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Gatherers start with food mode (on) or resources (off)"])),(e()(),Ds(45,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(46,0,null,null,3,null,null,null,null,null,null,null)),(e()(),Ds(47,0,null,null,0,"input",[["id","switchHunterFromTaming"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==e.component.updateSwitchHunterFromTaming()&&t),t}),null,null)),(e()(),Ds(48,0,null,null,1,"label",[["for","switchHunterFromTaming"]],null,null,null,null,null)),(e()(),Ks(-1,null,["If enabled hunters won't stop taming animals even if pastures are full"])),(e()(),Ds(50,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(51,0,null,null,3,null,null,null,null,null,null,null)),(e()(),Ds(52,0,null,null,0,"input",[["id","plowInSummer"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==e.component.updatePlowInSummer()&&t),t}),null,null)),(e()(),Ds(53,0,null,null,1,"label",[["for","plowInSummer"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Allow fields to be plowed in summer"])),(e()(),Ds(55,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),Ks(-1,null,["food priority"])),(e()(),Ds(57,0,null,null,2,"div",[["id","foodPriorityList"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,C_)),ei(59,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ds(60,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Log management"])),(e()(),Ds(62,0,null,null,0,"input",[["id","logMerchant"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==e.component.updateLogMerchant()&&t),t}),null,null)),(e()(),Ds(63,0,null,null,1,"label",[["for","logMerchant"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Log message when a new merchant has arrived"])),(e()(),Ds(65,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(66,0,null,null,0,"input",[["id","logFiredWorkers"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==e.component.updateLogFiredWorkers()&&t),t}),null,null)),(e()(),Ds(67,0,null,null,1,"label",[["for","logFiredWorkers"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Log message when worker is removed from building"])),(e()(),Ds(69,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(70,0,null,null,0,"input",[["id","logAutoTrade"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==e.component.updateLogAutoTrade()&&t),t}),null,null)),(e()(),Ds(71,0,null,null,1,"label",[["for","logAutoTrade"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Log message when auto trade has been performed"])),(e()(),Ds(73,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(74,0,null,null,0,"input",[["id","logSickness"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==e.component.updateLogSickness()&&t),t}),null,null)),(e()(),Ds(75,0,null,null,1,"label",[["for","logSickness"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Log sickness related events"])),(e()(),Ds(77,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(78,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Header management"])),(e()(),Ds(80,0,null,null,0,"input",[["id","secondHeaderRow"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==e.component.updateSecondHeaderRow()&&t),t}),null,null)),(e()(),Ds(81,0,null,null,1,"label",[["for","secondHeaderRow"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Display two rows in the header (resources will be displayed in second row)"])),(e()(),Ds(83,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(84,0,null,null,0,"input",[["id","foodNutrition"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==e.component.updateFoodNutrition()&&t),t}),null,null)),(e()(),Ds(85,0,null,null,1,"label",[["for","foodNutrition"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Show food nutrition in the header"])),(e()(),Ds(87,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(88,0,null,null,0,"input",[["id","showRaw"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==e.component.updateShowRaw()&&t),t}),null,null)),(e()(),Ds(89,0,null,null,1,"label",[["for","showRaw"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Show raw resources tooltip in the header"])),(e()(),Ds(91,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(92,0,null,null,0,"input",[["id","showProcessed"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==e.component.updateShowProcessed()&&t),t}),null,null)),(e()(),Ds(93,0,null,null,1,"label",[["for","showProcessed"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Show processed resources tooltip in the header"])),(e()(),Ds(95,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(96,0,null,null,0,"input",[["id","showFood"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==e.component.updateShowFood()&&t),t}),null,null)),(e()(),Ds(97,0,null,null,1,"label",[["for","showFood"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Show food resources tooltip in the header"])),(e()(),Ds(99,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(100,0,null,null,0,"input",[["id","showTools"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==e.component.updateShowTools()&&t),t}),null,null)),(e()(),Ds(101,0,null,null,1,"label",[["for","showTools"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Show tools resources tooltip in the header"])),(e()(),Ds(103,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(104,0,null,null,0,"input",[["id","showPopulation"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==e.component.updateShowPopulation()&&t),t}),null,null)),(e()(),Ds(105,0,null,null,1,"label",[["for","showPopulation"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Show population in the header"])),(e()(),Ds(107,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(108,0,null,null,0,"input",[["id","showFreeWorkers"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==e.component.updateShowFreeWorkers()&&t),t}),null,null)),(e()(),Ds(109,0,null,null,1,"label",[["for","showFreeWorkers"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Show free workers in the header"])),(e()(),Ds(111,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(112,0,null,null,0,"input",[["id","showHappiness"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==e.component.updateShowHappiness()&&t),t}),null,null)),(e()(),Ds(113,0,null,null,1,"label",[["for","showHappiness"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Show happiness in the header"])),(e()(),Ds(115,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,I_)),ei(117,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(118,0,null,null,0,"input",[["id","showResearchProgress"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==e.component.updateShowResearchProgress()&&t),t}),null,null)),(e()(),Ds(119,0,null,null,1,"label",[["for","showResearchProgress"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Show research progress in the header"]))],(function(e,n){var l=n.component;e(n,3,0),e(n,27,0,l.isTaxUnlocked()),e(n,34,0,l.isHREnabled()),e(n,59,0,l.getFoodLines()),e(n,117,0,l.isFaithUnlocked())}),(function(e,n){var l=n.component;e(n,13,0,.5*l.getRations()),e(n,15,0,l.getRations()),e(n,18,0,l.getClothesRations()),e(n,20,0,l.getClothesRations()),e(n,23,0,l.getAlcoholRations()),e(n,25,0,l.getAlcoholRations()),e(n,29,0,l.getFurClothes()),e(n,37,0,l.getDefaultWorkshopResearch()),e(n,42,0,l.getDefaultGathererFood()),e(n,47,0,l.getSwitchHunterFromTaming()),e(n,52,0,l.getPlowInSummer()),e(n,62,0,l.getLogMerchant()),e(n,66,0,l.getLogFiredWorkers()),e(n,70,0,l.getLogAutoTrade()),e(n,74,0,l.getLogSickness()),e(n,80,0,l.getSecondHeaderRow()),e(n,84,0,l.getFoodNutrition()),e(n,88,0,l.getShowRaw()),e(n,92,0,l.getShowProcessed()),e(n,96,0,l.getShowFood()),e(n,100,0,l.getShowTools()),e(n,104,0,l.getShowPopulation()),e(n,108,0,l.getShowFreeWorkers()),e(n,112,0,l.getShowHappiness()),e(n,118,0,l.getShowResearchProgress())}))}function y_(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"app-management",[],null,null,null,b_,v_)),ei(1,114688,null,0,E_,[Wv,Qp,Gp],null,null)],(function(e,n){e(n,1,0)}),null)}var A_=Dt("app-management",E_,y_,{},{},[]);class N_{constructor(e,n){this.happinessService=e,this.modalService=n}ngOnInit(){}getSum(){return this.happinessService.calculateDailyChange()}getPositiveEffects(){return this.happinessService.getHappinessEffects().filter(e=>e.value>=0)}getNegativeEffects(){return this.happinessService.getHappinessEffects().filter(e=>e.value<0)}getEffectName(e){return Ou.prepareHappinessEffectName(e)}getSumText(){return Ou.round(this.getSum(),2)}getHappinessBonus(){return this.happinessService.getHappinessEffect()}openFestivalModal(){this.modalService.open(Pu.FESTIVAL)}canStartFestival(){return void 0===this.happinessService.getHappinessEffectByEffect(Ru.FESTIVAL)}getShowDuration(){return this.happinessService.getShowDuration()}toggleShowDuration(){this.happinessService.toggleShowDuration()}}var __=Kl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:99%}#content[_ngcontent-%COMP%]{margin:.5%;height:90%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#title[_ngcontent-%COMP%]{font-size:1.5em;font-weight:800}#title[_ngcontent-%COMP%], .center[_ngcontent-%COMP%]{text-align:center}.headers[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;margin-bottom:10px}.headers[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex:0 0 49%}#effects[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;height:78%}#positive[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-right:4px solid #000;font-size:1.5em;padding-right:10px;flex:0 0 49%;align-items:flex-start;height:100%;overflow:auto;direction:rtl}.changeToRight[_ngcontent-%COMP%]{direction:ltr}#negative[_ngcontent-%COMP%]{display:flex;flex-direction:column;font-size:1.5em;padding-left:10px;flex:0 0 49%;overflow:auto}.positiveValue[_ngcontent-%COMP%]{color:var(--positive-colour)}.negativeValue[_ngcontent-%COMP%], .positiveValue[_ngcontent-%COMP%]{display:inline-block;width:30px;text-align:center}.negativeValue[_ngcontent-%COMP%]{color:var(--negative-colour)}.positiveColor[_ngcontent-%COMP%]{color:var(--positive-colour)}.negativeColor[_ngcontent-%COMP%]{color:var(--negative-colour)}.subtitle[_ngcontent-%COMP%]{font-size:1.2em;font-weight:bolder}.small[_ngcontent-%COMP%]{font-size:.7em}#festival[_ngcontent-%COMP%]{float:right}"]],data:{}});function w_(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[["id","festival"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.openFestivalModal()&&t),t}),null,null)),(e()(),Ks(-1,null,["Organize festival"]))],null,null)}function P_(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[["class","small"]],null,null,null,null,null)),(e()(),Ks(1,null,["(",")"]))],null,(function(e,n){e(n,1,0,n.parent.context.$implicit.duration)}))}function M_(e){return qs(0,[(e()(),Ds(0,0,null,null,5,"div",[["class","changeToRight"]],null,null,null,null,null)),(e()(),Ks(1,null,["",""])),(e()(),Ms(16777216,null,null,1,null,P_)),ei(3,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(4,0,null,null,1,"span",[["class","positiveValue"]],null,null,null,null,null)),(e()(),Ks(5,null,["",""]))],(function(e,n){e(n,3,0,n.component.getShowDuration()&&n.context.$implicit.duration>0)}),(function(e,n){e(n,1,0,n.component.getEffectName(n.context.$implicit.effect)),e(n,5,0,n.context.$implicit.value)}))}function D_(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[["class","small"]],null,null,null,null,null)),(e()(),Ks(1,null,["(",")"]))],null,(function(e,n){e(n,1,0,n.parent.context.$implicit.duration)}))}function L_(e){return qs(0,[(e()(),Ds(0,0,null,null,5,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"span",[["class","negativeValue"]],null,null,null,null,null)),(e()(),Ks(2,null,["",""])),(e()(),Ms(16777216,null,null,1,null,D_)),ei(4,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ks(5,null,[" ",""]))],(function(e,n){e(n,4,0,n.component.getShowDuration()&&n.context.$implicit.duration>0)}),(function(e,n){var l=n.component;e(n,2,0,n.context.$implicit.value),e(n,5,0,l.getEffectName(n.context.$implicit.effect))}))}function x_(e){return qs(0,[(e()(),Ds(0,0,null,null,41,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,1,"app-management-top-menu",[],null,null,null,S_,m_)),ei(3,114688,null,0,p_,[Gp],null,null),(e()(),Ds(4,0,null,null,37,"div",[["id","content"]],null,null,null,null,null)),(e()(),Ds(5,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),Ds(6,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Happiness"])),(e()(),Ds(8,0,null,null,9,"div",[["class","center"]],null,null,null,null,null)),(e()(),Ds(9,0,null,null,1,"app-happiness",[],null,null,null,Py,by)),ei(10,114688,null,0,Iy,[zp],null,null),(e()(),Ds(11,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ks(-1,null,[" (bonus: "])),(e()(),Ds(13,0,null,null,3,"span",[],null,null,null,null,null)),ei(14,278528,null,0,la,[Cl,Il,il,ol],{ngClass:[0,"ngClass"]},null),zs(15,{negativeColor:0,positiveColor:1}),(e()(),Ks(16,null,[""," %"])),(e()(),Ks(-1,null,[") "])),(e()(),Ds(18,0,null,null,5,"div",[["class","center"]],null,null,null,null,null)),(e()(),Ds(19,0,null,null,3,"span",[],null,null,null,null,null)),ei(20,278528,null,0,la,[Cl,Il,il,ol],{ngClass:[0,"ngClass"]},null),zs(21,{negativeColor:0,positiveColor:1}),(e()(),Ks(22,null,["","%"])),(e()(),Ks(-1,null,[" per day "])),(e()(),Ds(24,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(25,0,null,null,0,"input",[["id","showDuration"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==e.component.toggleShowDuration()&&t),t}),null,null)),(e()(),Ds(26,0,null,null,1,"label",[["for","showDuration"]],null,null,null,null,null)),(e()(),Ks(-1,null,["show duration in days"])),(e()(),Ms(16777216,null,null,1,null,w_)),ei(29,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(30,0,null,null,4,"div",[["class","headers"]],null,null,null,null,null)),(e()(),Ds(31,0,null,null,1,"span",[["class","center subtitle"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Positive Effects"])),(e()(),Ds(33,0,null,null,1,"span",[["class","center subtitle"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Negative Effects"])),(e()(),Ds(35,0,null,null,6,"div",[["id","effects"]],null,null,null,null,null)),(e()(),Ds(36,0,null,null,2,"div",[["id","positive"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,M_)),ei(38,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ds(39,0,null,null,2,"div",[["id","negative"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,L_)),ei(41,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,3,0),e(n,10,0);var t=e(n,15,0,l.getHappinessBonus()<0,l.getHappinessBonus()>0);e(n,14,0,t);var i=e(n,21,0,l.getSum()<0,l.getSum()>0);e(n,20,0,i),e(n,29,0,l.canStartFestival()),e(n,38,0,l.getPositiveEffects()),e(n,41,0,l.getNegativeEffects())}),(function(e,n){var l=n.component;e(n,16,0,l.getHappinessBonus()),e(n,22,0,l.getSumText()),e(n,25,0,l.getShowDuration())}))}function k_(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"app-happiness-management",[],null,null,null,x_,__)),ei(1,114688,null,0,N_,[zp,Fp],null,null)],(function(e,n){e(n,1,0)}),null)}var F_=Dt("app-happiness-management",N_,k_,{},{},[]);class U_{constructor(e){this.effectsService=e}ngOnInit(){}getBuildingsEffects(){return this.effectsService.getBuildingEffects().filter(e=>!e.isBuff()).sort((e,n)=>e.isPermanent()&&!n.isPermanent()?-1:e.isPermanent()&&n.isPermanent()?0:!e.isPermanent()&&n.isPermanent()?1:void 0)}getArmyEffects(){return this.effectsService.getArmyEffects()}getBuildingName(e){return Ou.prepareBuildingName(e)}getTroopName(e){return Ou.prepareTroopName(e)}getNatureEffects(){return this.effectsService.getNatureEffects()}}var H_=Kl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:99%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#content[_ngcontent-%COMP%]{margin:.5%;height:94%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#buildingEffects[_ngcontent-%COMP%]{height:40%;border:1px solid #000}#armyEffects[_ngcontent-%COMP%]{height:33%;border:1px solid #000}#natureEffects[_ngcontent-%COMP%]{height:15%;border:1px solid #000}.rows[_ngcontent-%COMP%]{height:90.5%}.natureRows[_ngcontent-%COMP%], .rows[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:center;overflow-y:auto}.natureRows[_ngcontent-%COMP%]{height:79%}.row[_ngcontent-%COMP%]{display:flex;border:1px solid #000;margin:3px}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{border-right:none}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{flex:0 0 7%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){flex:0 0 35%}.natureRow[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){flex:0 0 50%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){flex:0 0 30%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(4){flex:0 0 13%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(5){flex:0 0 15%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:auto;border-right:1px solid #000}.headers[_ngcontent-%COMP%]{margin:3px 3px 0;display:flex;width:98.3%;flex-direction:row;text-align:center;font-size:.9em}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border:1px solid #000;border-left:none}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-of-type{border-left:1px solid #000}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{flex:0 0 7%}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){flex:0 0 35%}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){flex:0 0 30%}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(4){flex:0 0 13%}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(5){flex:0 0 15%}.natureHeaders[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){flex:0 0 50%}.positive[_ngcontent-%COMP%]{color:var(--positive-colour)}.negative[_ngcontent-%COMP%]{color:var(--negative-colour)}"]],data:{}});function G_(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[["class","positive"]],null,null,null,null,null)),(e()(),Ks(1,null,["+","% "]))],null,(function(e,n){e(n,1,0,n.parent.context.$implicit.effect)}))}function B_(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[["class","negative"]],null,null,null,null,null)),(e()(),Ks(1,null,["","% "]))],null,(function(e,n){e(n,1,0,n.parent.context.$implicit.effect)}))}function V_(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(1,null,[""," "]))],null,(function(e,n){e(n,1,0,n.parent.context.$implicit.duration)}))}function W_(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["permanent"]))],null,null)}function Y_(e){return qs(0,[(e()(),Ds(0,0,null,null,14,"div",[["class","row"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(2,null,["","."])),(e()(),Ds(3,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(4,null,["",""])),(e()(),Ds(5,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(6,null,["",""])),(e()(),Ms(16777216,null,null,1,null,G_)),ei(8,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,B_)),ei(10,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,V_)),ei(12,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,W_)),ei(14,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){e(n,8,0,n.context.$implicit.effect>=0),e(n,10,0,n.context.$implicit.effect<0),e(n,12,0,n.context.$implicit.duration>0),e(n,14,0,n.context.$implicit.duration<0)}),(function(e,n){var l=n.component;e(n,2,0,n.context.index+1),e(n,4,0,n.context.$implicit.name),e(n,6,0,l.getBuildingName(n.context.$implicit.building))}))}function z_(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[["class","positive"]],null,null,null,null,null)),(e()(),Ks(1,null,["+","% "]))],null,(function(e,n){e(n,1,0,n.parent.context.$implicit.effect)}))}function $_(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[["class","negative"]],null,null,null,null,null)),(e()(),Ks(1,null,["","% "]))],null,(function(e,n){e(n,1,0,n.parent.context.$implicit.effect)}))}function K_(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(1,null,[""," "]))],null,(function(e,n){e(n,1,0,n.parent.context.$implicit.duration)}))}function j_(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["permanent"]))],null,null)}function Q_(e){return qs(0,[(e()(),Ds(0,0,null,null,14,"div",[["class","row"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(2,null,["","."])),(e()(),Ds(3,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(4,null,["",""])),(e()(),Ds(5,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(6,null,["",""])),(e()(),Ms(16777216,null,null,1,null,z_)),ei(8,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,$_)),ei(10,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,K_)),ei(12,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,j_)),ei(14,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){e(n,8,0,n.context.$implicit.effect>=0),e(n,10,0,n.context.$implicit.effect<0),e(n,12,0,n.context.$implicit.duration>0),e(n,14,0,n.context.$implicit.duration<0)}),(function(e,n){var l=n.component;e(n,2,0,n.context.index+1),e(n,4,0,n.context.$implicit.name),e(n,6,0,l.getTroopName(n.context.$implicit.troop))}))}function q_(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[["class","positive"]],null,null,null,null,null)),(e()(),Ks(1,null,["+","% "]))],null,(function(e,n){e(n,1,0,n.parent.context.$implicit.effect)}))}function X_(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[["class","negative"]],null,null,null,null,null)),(e()(),Ks(1,null,["","% "]))],null,(function(e,n){e(n,1,0,n.parent.context.$implicit.effect)}))}function Z_(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(1,null,[""," "]))],null,(function(e,n){e(n,1,0,n.parent.context.$implicit.duration)}))}function J_(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["permanent"]))],null,null)}function ew(e){return qs(0,[(e()(),Ds(0,0,null,null,12,"div",[["class","row natureRow"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(2,null,["","."])),(e()(),Ds(3,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(4,null,["",""])),(e()(),Ms(16777216,null,null,1,null,q_)),ei(6,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,X_)),ei(8,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,Z_)),ei(10,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,J_)),ei(12,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){e(n,6,0,n.context.$implicit.effect>=0),e(n,8,0,n.context.$implicit.effect<0),e(n,10,0,n.context.$implicit.duration>0),e(n,12,0,n.context.$implicit.duration<0)}),(function(e,n){e(n,2,0,n.context.index+1),e(n,4,0,n.context.$implicit.name)}))}function nw(e){return qs(0,[(e()(),Ds(0,0,null,null,56,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,1,"app-management-top-menu",[],null,null,null,S_,m_)),ei(3,114688,null,0,p_,[Gp],null,null),(e()(),Ds(4,0,null,null,52,"div",[["id","content"]],null,null,null,null,null)),(e()(),Ds(5,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),Ds(6,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Effects Management"])),(e()(),Ds(8,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Buildings effects"])),(e()(),Ds(10,0,null,null,14,"div",[["id","buildingEffects"]],null,null,null,null,null)),(e()(),Ds(11,0,null,null,10,"div",[["class","headers"]],null,null,null,null,null)),(e()(),Ds(12,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["#"])),(e()(),Ds(14,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["name"])),(e()(),Ds(16,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["building"])),(e()(),Ds(18,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["effect"])),(e()(),Ds(20,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["duration"])),(e()(),Ds(22,0,null,null,2,"div",[["class","rows"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,Y_)),ei(24,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ds(25,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Army effects"])),(e()(),Ds(27,0,null,null,14,"div",[["id","armyEffects"]],null,null,null,null,null)),(e()(),Ds(28,0,null,null,10,"div",[["class","headers"]],null,null,null,null,null)),(e()(),Ds(29,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["#"])),(e()(),Ds(31,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["name"])),(e()(),Ds(33,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["troop"])),(e()(),Ds(35,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["effect"])),(e()(),Ds(37,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["duration"])),(e()(),Ds(39,0,null,null,2,"div",[["class","rows"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,Q_)),ei(41,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ds(42,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Nature effects"])),(e()(),Ds(44,0,null,null,12,"div",[["id","natureEffects"]],null,null,null,null,null)),(e()(),Ds(45,0,null,null,8,"div",[["class","headers natureHeaders"]],null,null,null,null,null)),(e()(),Ds(46,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["#"])),(e()(),Ds(48,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["name"])),(e()(),Ds(50,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["effect"])),(e()(),Ds(52,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["duration"])),(e()(),Ds(54,0,null,null,2,"div",[["class","natureRows"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,ew)),ei(56,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,3,0),e(n,24,0,l.getBuildingsEffects()),e(n,41,0,l.getArmyEffects()),e(n,56,0,l.getNatureEffects())}),null)}function lw(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"app-effects-management",[],null,null,null,nw,H_)),ei(1,114688,null,0,U_,[BE],null,null)],(function(e,n){e(n,1,0)}),null)}var tw=Dt("app-effects-management",U_,lw,{},{},[]);class iw{constructor(e){this.landService=e}ngOnInit(){}getForestSize(){return this.landService.getForest()}getLandSize(){return this.landService.getLand()}getForestOptions(){return this.landService.getForestOptions()}}var sw=Kl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:99%}#content[_ngcontent-%COMP%]{margin:.5%;height:94%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}.foresterLabel[_ngcontent-%COMP%]{display:inline-block;width:160px}input[type=number][_ngcontent-%COMP%]{width:6ch}"]],data:{}});function rw(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(1,null,["",""]))],null,(function(e,n){e(n,1,0,n.component.getForestSize())}))}function uw(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[["class","critical"]],null,null,null,null,null)),(e()(),Ks(1,null,["",""]))],null,(function(e,n){e(n,1,0,n.component.getForestSize())}))}function ow(e){return qs(0,[(e()(),Ds(0,0,null,null,65,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,1,"app-management-top-menu",[],null,null,null,S_,m_)),ei(3,114688,null,0,p_,[Gp],null,null),(e()(),Ds(4,0,null,null,61,"div",[["id","content"]],null,null,null,null,null)),(e()(),Ds(5,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),Ds(6,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Forest Management"])),(e()(),Ds(8,0,null,null,10,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(9,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(10,114688,null,0,Rg,[],{name:[0,"name"]},null),(e()(),Ms(16777216,null,null,1,null,rw)),ei(12,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,uw)),ei(14,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ks(-1,null,[" \xa0\xa0 "])),(e()(),Ds(16,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(17,114688,null,0,Rg,[],{name:[0,"name"]},null),(e()(),Ks(18,null,[" "," "])),(e()(),Ds(19,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ks(-1,null,[" Plant trees if:"])),(e()(),Ds(21,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(22,0,null,null,5,"input",[["id","forest"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,23).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==Yt(e,23).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.getForestOptions().forestSizeRuleEnabled=l)&&t),t}),null,null)),ei(23,16384,null,0,bg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[bg]),ei(25,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(27,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(28,0,null,null,1,"label",[["class","foresterLabel"],["for","forest"]],null,null,null,null,null)),(e()(),Ks(-1,null,["forest smaller than"])),(e()(),Ds(30,0,null,null,6,"input",[["id","forestSize"],["min","0"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,31)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,31).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,31)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,31)._compositionEnd(l.target.value)&&t),"input"===n&&(t=!1!==Yt(e,32).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,32).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.getForestOptions().forestSizeRule=l)&&t),t}),null,null)),ei(31,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(32,16384,null,0,Vg,[ol,il],null,null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,Vg]),ei(34,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(36,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(37,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(38,0,null,null,5,"input",[["id","land"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,39).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==Yt(e,39).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.getForestOptions().landSizeRuleEnabled=l)&&t),t}),null,null)),ei(39,16384,null,0,bg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[bg]),ei(41,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(43,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(44,0,null,null,1,"label",[["class","foresterLabel"],["for","land"]],null,null,null,null,null)),(e()(),Ks(-1,null,["free land bigger than"])),(e()(),Ds(46,0,null,null,6,"input",[["id","landSize"],["min","0"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,47)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,47).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,47)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,47)._compositionEnd(l.target.value)&&t),"input"===n&&(t=!1!==Yt(e,48).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,48).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.getForestOptions().landSizeRule=l)&&t),t}),null,null)),ei(47,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(48,16384,null,0,Vg,[ol,il],null,null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,Vg]),ei(50,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(52,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(53,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(54,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ks(-1,null,[" Cut trees if:"])),(e()(),Ds(56,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(57,0,null,null,1,"label",[["for","forestSize2"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Forest bigger than "])),(e()(),Ds(59,0,null,null,6,"input",[["id","forestSize2"],["min","0"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,60)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,60).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,60)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,60)._compositionEnd(l.target.value)&&t),"input"===n&&(t=!1!==Yt(e,61).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,61).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.getForestOptions().forestSizeReserved=l)&&t),t}),null,null)),ei(60,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(61,16384,null,0,Vg,[ol,il],null,null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,Vg]),ei(63,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(65,16384,null,0,Mg,[[4,Pg]],null,null)],(function(e,n){var l=n.component;e(n,3,0),e(n,10,0,"forest"),e(n,12,0,l.getForestSize()>=400),e(n,14,0,l.getForestSize()<400),e(n,17,0,"land"),e(n,25,0,l.getForestOptions().forestSizeRuleEnabled),e(n,34,0,l.getForestOptions().forestSizeRule),e(n,41,0,l.getForestOptions().landSizeRuleEnabled),e(n,50,0,l.getForestOptions().landSizeRule),e(n,63,0,l.getForestOptions().forestSizeReserved)}),(function(e,n){e(n,18,0,n.component.getLandSize()),e(n,22,0,Yt(n,27).ngClassUntouched,Yt(n,27).ngClassTouched,Yt(n,27).ngClassPristine,Yt(n,27).ngClassDirty,Yt(n,27).ngClassValid,Yt(n,27).ngClassInvalid,Yt(n,27).ngClassPending),e(n,30,0,Yt(n,36).ngClassUntouched,Yt(n,36).ngClassTouched,Yt(n,36).ngClassPristine,Yt(n,36).ngClassDirty,Yt(n,36).ngClassValid,Yt(n,36).ngClassInvalid,Yt(n,36).ngClassPending),e(n,38,0,Yt(n,43).ngClassUntouched,Yt(n,43).ngClassTouched,Yt(n,43).ngClassPristine,Yt(n,43).ngClassDirty,Yt(n,43).ngClassValid,Yt(n,43).ngClassInvalid,Yt(n,43).ngClassPending),e(n,46,0,Yt(n,52).ngClassUntouched,Yt(n,52).ngClassTouched,Yt(n,52).ngClassPristine,Yt(n,52).ngClassDirty,Yt(n,52).ngClassValid,Yt(n,52).ngClassInvalid,Yt(n,52).ngClassPending),e(n,59,0,Yt(n,65).ngClassUntouched,Yt(n,65).ngClassTouched,Yt(n,65).ngClassPristine,Yt(n,65).ngClassDirty,Yt(n,65).ngClassValid,Yt(n,65).ngClassInvalid,Yt(n,65).ngClassPending)}))}function aw(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"app-forest-management",[],null,null,null,ow,sw)),ei(1,114688,null,0,iw,[WE],null,null)],(function(e,n){e(n,1,0)}),null)}var cw=Dt("app-forest-management",iw,aw,{},{},[]);class hw{constructor(e,n){this.servicesService=e,this.gameService=n,this.region=Eu.VILLAGE,this.sorting=0}ngOnInit(){}getBuildings(e){const n=[];return this.servicesService.getServiceByRegion(e).getBuildings().forEach(e=>{const l=n.find(n=>n.building===e.getBuildingType());l?(l.count+=1,l.size+=e.getSize(),e.isWorking()&&(l.working+=1)):n.push({building:e.getBuildingType(),count:1,size:e.getSize(),working:e.isWorking()?1:0})}),n.sort(0===this.sorting?(e,n)=>e.building-n.building:1===this.sorting?(e,n)=>n.count-e.count:(e,n)=>e.count-n.count)}getBuildingName(e){return Ou.prepareBuildingName(e)}getRegions(){const e=[Eu.VILLAGE];return this.gameService.isEnabled(ou.FORT)&&e.push(Eu.FORT),e.push(Eu.FOREST),this.gameService.isEnabled(ou.FIELD)&&e.push(Eu.FIELD),this.gameService.isEnabled(ou.MOUNTAINS)&&e.push(Eu.MOUNTAINS),this.gameService.isEnabled(ou.PLATEAU)&&e.push(Eu.PLATEAU),this.gameService.isEnabled(ou.SEA)&&e.push(Eu.SEA),e}getRegionName(e){return Ou.prepareRegionName(e)}}var dw=Kl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:99%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#content[_ngcontent-%COMP%]{margin:.5%;height:94%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}.headers[_ngcontent-%COMP%]{margin:3px 3px 0;width:98.3%;flex-direction:row;font-size:.9em;font-weight:700}.headers[_ngcontent-%COMP%], .rows[_ngcontent-%COMP%]{display:flex;text-align:center}.rows[_ngcontent-%COMP%]{flex-direction:column;height:90.5%;overflow-y:auto}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border:1px solid #000;border-left:none}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-of-type{border-left:1px solid #000}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{flex:0 0 7%}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){flex:0 0 30%}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){flex:0 0 15%}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(4){flex:0 0 18%}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(5), .headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(6){flex:0 0 15%}.row[_ngcontent-%COMP%]{display:flex;border:1px solid #000;margin:3px}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{border-right:none}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{flex:0 0 7%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){flex:0 0 30%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){flex:0 0 15%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(4){flex:0 0 18%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(5), .row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(6){flex:0 0 15%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:auto;border-right:1px solid #000}"]],data:{}});function gw(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"option",[],null,null,null,null,null)),ei(1,147456,null,0,qg,[il,ol,[2,Qg]],{ngValue:[0,"ngValue"]},null),ei(2,147456,null,0,Zg,[il,ol,[8,null]],{ngValue:[0,"ngValue"]},null),(e()(),Ks(3,null,[" "," "]))],(function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)}),(function(e,n){e(n,3,0,n.component.getRegionName(n.context.$implicit))}))}function pw(e){return qs(0,[(e()(),Ds(0,0,null,null,12,"div",[["class","row"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(2,null,["","."])),(e()(),Ds(3,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(4,null,["",""])),(e()(),Ds(5,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(6,null,["",""])),(e()(),Ds(7,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(8,null,["",""])),(e()(),Ds(9,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(10,null,["",""])),(e()(),Ds(11,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(12,null,["",""]))],null,(function(e,n){var l=n.component;e(n,2,0,n.context.index+1),e(n,4,0,l.getBuildingName(n.context.$implicit.building)),e(n,6,0,n.context.$implicit.count),e(n,8,0,n.context.$implicit.size),e(n,10,0,n.context.$implicit.working),e(n,12,0,n.context.$implicit.count-n.context.$implicit.working)}))}function mw(e){return qs(0,[(e()(),Ds(0,0,null,null,64,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,1,"app-management-top-menu",[],null,null,null,S_,m_)),ei(3,114688,null,0,p_,[Gp],null,null),(e()(),Ds(4,0,null,null,60,"div",[["id","content"]],null,null,null,null,null)),(e()(),Ds(5,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),Ds(6,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Summary page"])),(e()(),Ds(8,0,null,null,6,"input",[["id","sortAlphabetically"],["name","sorting"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,9)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,9).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,9)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,9)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==Yt(e,10).onChange()&&t),"blur"===n&&(t=!1!==Yt(e,10).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.sorting=l)&&t),t}),null,null)),ei(9,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(10,212992,null,0,Yg,[ol,il,Wg,Mn],{name:[0,"name"],value:[1,"value"]},null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,Yg]),ei(12,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(14,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(15,0,null,null,1,"label",[["for","sortAlphabetically"]],null,null,null,null,null)),(e()(),Ks(-1,null,["sort alphabetically"])),(e()(),Ds(17,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(18,0,null,null,6,"input",[["id","sortByBiggest"],["name","sorting"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,19)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,19).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,19)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,19)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==Yt(e,20).onChange()&&t),"blur"===n&&(t=!1!==Yt(e,20).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.sorting=l)&&t),t}),null,null)),ei(19,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(20,212992,null,0,Yg,[ol,il,Wg,Mn],{name:[0,"name"],value:[1,"value"]},null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,Yg]),ei(22,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(24,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(25,0,null,null,1,"label",[["for","sortByBiggest"]],null,null,null,null,null)),(e()(),Ks(-1,null,["sort by most buildings"])),(e()(),Ds(27,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(28,0,null,null,6,"input",[["id","sortBySmallest"],["name","sorting"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,29)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,29).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,29)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,29)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==Yt(e,30).onChange()&&t),"blur"===n&&(t=!1!==Yt(e,30).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.sorting=l)&&t),t}),null,null)),ei(29,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(30,212992,null,0,Yg,[ol,il,Wg,Mn],{name:[0,"name"],value:[1,"value"]},null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,Yg]),ei(32,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(34,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(35,0,null,null,1,"label",[["for","sortBySmallest"]],null,null,null,null,null)),(e()(),Ks(-1,null,["sort by least buildings"])),(e()(),Ds(37,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(38,0,null,null,9,"h3",[],null,null,null,null,null)),(e()(),Ds(39,0,null,null,7,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,40).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,40).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.region=l)&&t),t}),null,null)),ei(40,16384,null,0,Qg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[Qg]),ei(42,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(44,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ms(16777216,null,null,1,null,gw)),ei(46,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ks(-1,null,[" Buildings "])),(e()(),Ds(48,0,null,null,16,"div",[["id","buildingEffects"]],null,null,null,null,null)),(e()(),Ds(49,0,null,null,12,"div",[["class","headers"]],null,null,null,null,null)),(e()(),Ds(50,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["#"])),(e()(),Ds(52,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["building"])),(e()(),Ds(54,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["count"])),(e()(),Ds(56,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["total land"])),(e()(),Ds(58,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["working"])),(e()(),Ds(60,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["idle"])),(e()(),Ds(62,0,null,null,2,"div",[["class","rows"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,pw)),ei(64,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,3,0),e(n,10,0,"sorting",0),e(n,12,0,"sorting",l.sorting),e(n,20,0,"sorting",1),e(n,22,0,"sorting",l.sorting),e(n,30,0,"sorting",2),e(n,32,0,"sorting",l.sorting),e(n,42,0,l.region),e(n,46,0,l.getRegions()),e(n,64,0,l.getBuildings(l.region))}),(function(e,n){e(n,8,0,Yt(n,14).ngClassUntouched,Yt(n,14).ngClassTouched,Yt(n,14).ngClassPristine,Yt(n,14).ngClassDirty,Yt(n,14).ngClassValid,Yt(n,14).ngClassInvalid,Yt(n,14).ngClassPending),e(n,18,0,Yt(n,24).ngClassUntouched,Yt(n,24).ngClassTouched,Yt(n,24).ngClassPristine,Yt(n,24).ngClassDirty,Yt(n,24).ngClassValid,Yt(n,24).ngClassInvalid,Yt(n,24).ngClassPending),e(n,28,0,Yt(n,34).ngClassUntouched,Yt(n,34).ngClassTouched,Yt(n,34).ngClassPristine,Yt(n,34).ngClassDirty,Yt(n,34).ngClassValid,Yt(n,34).ngClassInvalid,Yt(n,34).ngClassPending),e(n,39,0,Yt(n,44).ngClassUntouched,Yt(n,44).ngClassTouched,Yt(n,44).ngClassPristine,Yt(n,44).ngClassDirty,Yt(n,44).ngClassValid,Yt(n,44).ngClassInvalid,Yt(n,44).ngClassPending)}))}function fw(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"app-summary",[],null,null,null,mw,dw)),ei(1,114688,null,0,hw,[Np,Gp],null,null)],(function(e,n){e(n,1,0)}),null)}var Sw=Dt("app-summary",hw,fw,{},{},[]);class Ew{constructor(e,n,l){this.rd=e,this.el=n,this.modalService=l,this.param="",this.element=n.nativeElement}ngOnInit(){}ngAfterViewInit(){const e=this;this.id&&(document.body.appendChild(this.element),this.rd.listen(this.element,"click",n=>{const l=n.target;null===l.closest(".modal-body")&&"BUTTON"!==l.tagName&&"path"!==l.tagName&&"IMG"!==l.tagName&&"tutorial-modal"!==e.id&&(this.modalService.sendConfirmationResult(!1),this.modalService.sendCloseSignal(Pu.ALL),e.close())}),this.modalService.add(this))}ngOnDestroy(){this.modalService.remove(this.id),this.element.remove()}open(){this.element.style.display="block",document.body.classList.add("modal-open")}openTutorialWindow(e){const n=this.element.querySelector(".modal-body");n.style.position="absolute",n.style.margin="0",n.style.width=e.width,n.style.top=e.top,n.style.left=e.left,this.element.style.display="block",document.body.classList.add("modal-open")}close(){this.element.style.display="none",document.body.classList.remove("modal-open")}onKeydownHandler(e){"tutorial-modal"!==this.id&&(this.modalService.sendConfirmationResult(!1),this.modalService.sendCloseSignal(Pu.ALL),this.close())}}var vw=Kl({encapsulation:2,styles:[],data:{}});function Rw(e){return qs(0,[Us(671088640,1,{body:1}),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:8,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:null,childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:null,ngContent:{index:0}}],null,null)}class Ow{constructor(e,n,l,t,i,s,r,u,o,a,c,h,d,g){this.buildingFactoryService=e,this.servicesService=n,this.modalService=l,this.logService=t,this.resourcesService=i,this.landService=s,this.villageService=r,this.fortService=u,this.fieldService=o,this.forestService=a,this.mountainsService=c,this.seaService=h,this.plateauService=d,this.gameService=g,this.filterText="",this.multiplier=1,this.buildings=new Map,this.regions=Eu,this.buildings.set(Eu.VILLAGE,[[new Uf,[],0],[new Hf,[ou.HOUSE],0],[new sE,[ou.LONGHOUSE],0],[new EE,[ou.TUDOR_HOUSE],0],[new DE,[ou.SETTLEMENT],0],[new SS,[ou.BAKERY],0],[new yS,[ou.TAILOR],0],[new iS,[],0],[new HE,[ou.BUILDERS_GUILD],1],[new xE,[ou.SCHOLARS_LAB],0],[new mE,[ou.KITCHEN],0],[new iE,[ou.SPECIALISED_PRODUCTION],0],[new sS,[],0],[new zS,[ou.MARKETPLACE],0],[new FE,[ou.TAX_COLLECTOR],1],[new PS,[ou.TAVERN],1],[new aS,[ou.SHRINE],1],[new KS,[ou.CHURCH],1]]),this.buildings.set(Eu.FOREST,[[new Bf,[],0],[new RE,[ou.PRODUCTION_ZONES],0],[new Jf,[],0],[new dE,[ou.PRODUCTION_ZONES],0],[new oS,[ou.HUNTER],0],[new CS,[ou.TANNERY],0],[new zf,[ou.FORESTER],0],[new Qf,[ou.SAWMILL],0],[new uE,[ou.PAPER_MILL],0]]),this.buildings.set(Eu.FORT,[[new RS,[ou.BARRACKS],0],[new TS,[ou.BARRACKS],0],[new rE,[ou.BARRACKS],1],[new IS,[ou.STOCKADE],1],[new NS,[ou.WOODEN_TOWER],1],[new _S,[ou.STONE_TOWER],1],[new nE,[ou.STASH],3]]),this.buildings.set(Eu.FIELD,[[new hS,[ou.FARM],0],[new fS,[ou.WINDMILL],0],[new gS,[ou.FARM],0],[new mS,[ou.FARM],0],[new FS,[ou.PASTURE],0],[new HS,[ou.BUTCHER],0],[new bS,[ou.COTTON_MILL],0],[new AS,[ou.BREWERY],0],[new SE,[ou.CLAY_PIT],0],[new wS,[ou.WINERY],0],[new gE,[ou.BARN],0]]),this.buildings.set(Eu.MOUNTAINS,[[new nS,[],0],[new MS,[ou.GEOLOGIST],0],[new DS,[],0],[new xS,[ou.PIT_MINE],0],[new $S,[ou.SMITHY],1],[new GS,[ou.MINT],0],[new aE,[ou.DEEP_MINE],0]]),this.buildings.set(Eu.PLATEAU,[[new YS,[],1],[new jS,[],1],[new QS,[],1],[new qS,[],1],[new ZS,[],1],[new JS,[],1],[new eE,[],1],[new XS,[],1]]),this.buildings.set(Eu.SEA,[[new vS,[ou.FISHERS_HUT],0],[new CE,[ou.BOAT_BUILDER],0],[new NE,[ou.BOAT_BUILDER],0],[new IE,[ou.HARBOUR],0],[new wE,[ou.SHIPYARD],0],[new yE,[ou.LIGHTHOUSE],1],[new ME,[ou.CARTOGRAPHER],0]])}ngOnInit(){this.clearFilterObservable.subscribe(()=>{this.filterText="",this.multiplier=1}),this.openEvent.subscribe(()=>{this.filterInputRef.nativeElement.focus()})}build(e){const n=this.getNumberToBuild(e);if(e.buildOnMountain()){if(!this.landService.hasMountains(e.getSize()*n))return this.modalService.info("Not enough mountains to build "+n+" "+e.getName()+"!<br>"+e.getSize()*n+" mountains required but only "+this.landService.getMountains()+" available"),void this.modalService.close(Pu.BUILD)}else if(!this.landService.hasLand(e.getSize()*n))return this.modalService.info("Not enough empty land to build "+n+" "+e.getName()+"!<br>"+e.getSize()*n+" empty land required but only "+this.landService.getLand()+" available"),void this.modalService.close(Pu.BUILD);if(this.resourcesService.decreaseResources(e.getCost(),"Construction",!0,n)){e.buildOnMountain()?this.landService.decreaseMountains(e.getSize()*n):this.landService.decreaseLand(e.getSize()*n);for(let l=0;l<n;l++)switch(this.region){case Eu.VILLAGE:this.villageService.createConstruction(new Wf(this.servicesService,this.servicesService.getIdService().getNextId(),Eu.VILLAGE,e.getBuildingType(),e.getComplexity(),e.getSize()).build());break;case Eu.FORT:this.fortService.createConstruction(new Wf(this.servicesService,this.servicesService.getIdService().getNextId(),Eu.FORT,e.getBuildingType(),e.getComplexity(),e.getSize()).build());break;case Eu.FOREST:this.forestService.createConstruction(new Wf(this.servicesService,this.servicesService.getIdService().getNextId(),Eu.FOREST,e.getBuildingType(),e.getComplexity(),e.getSize()).build());break;case Eu.FIELD:this.fieldService.createConstruction(new Wf(this.servicesService,this.servicesService.getIdService().getNextId(),Eu.FIELD,e.getBuildingType(),e.getComplexity(),e.getSize()).build());break;case Eu.MOUNTAINS:this.mountainsService.createConstruction(new Wf(this.servicesService,this.servicesService.getIdService().getNextId(),Eu.MOUNTAINS,e.getBuildingType(),e.getComplexity(),e.getSize()).build());break;case Eu.SEA:this.seaService.createConstruction(new Wf(this.servicesService,this.servicesService.getIdService().getNextId(),Eu.SEA,e.getBuildingType(),e.getComplexity(),e.getSize()).build());break;case Eu.PLATEAU:this.plateauService.createConstruction(new Wf(this.servicesService,this.servicesService.getIdService().getNextId(),Eu.PLATEAU,e.getBuildingType(),e.getComplexity(),e.getSize()).build())}this.modalService.close(Pu.BUILD)}else this.modalService.close(Pu.BUILD)}ngOnChanges(e){this.regionString=Eu[this.region]}checkBuilding(e,n){let l=!0;return e[1].forEach(e=>{this.gameService.isEnabled(e)||(l=!1)}),e[2]>0&&e[2]<=this.servicesService.getServiceByRegion(n).getBuildings().filter(n=>n.getBuildingType()===e[0].getBuildingType()||n.getBuildingType()===tu.CONSTRUCTION&&n.getWorkingAt()===e[0].getBuildingType()).length&&(l=!1),l}hasResource(e,n=1){return 0===this.resourcesService.hasResource(e.key,e.value*n,"Construction",!0)}getResourceName(e){return Ou.prepareResourceName(e)}getBuildingCostEntries(e){return e.getCost()}getBuildingForRegion(e){if(this.buildings&&this.buildings.get(e)){let n=this.buildings.get(e).filter(n=>this.checkBuilding(n,e)).map(e=>e[0]);if(e===Eu.PLATEAU){if(this.gameService.getAbdicationLevel()<this.servicesService.getServiceByRegion(e).getBuildings().length)return[];this.gameService.getAbdicationLevel()<7&&(n=n.filter(e=>e.getBuildingType()!==tu.ASCENSION_TEMPLE))}return null!==this.filterText&&this.filterText.length>0?n.filter(e=>e.getName().toLowerCase().includes(this.filterText.toLowerCase())):n}}isCostMet(e){let n=!0;const l=this.getNumberToBuild(e);return Array.from(e.getCost().entries()).forEach(e=>{0!==this.resourcesService.hasResource(e[0],e[1]*l,"Construction",!0)&&(n=!1)}),n&&(n=e.buildOnMountain()?this.hasMountains(e.getSize()*l):this.hasLand(e.getSize()*l)),n}hasLand(e){return this.landService.hasLand(e)}hasMountains(e){return this.landService.getMountains()>=e}getLimit(e,n){const l=this.buildings.get(e).find(e=>e[0].getBuildingType()===n);return l?l[2]:0}hasInputOutputDescription(e){return this.getBuildingSettings(e).INPUT_RESOURCES}getBuildingSettings(e){return po.getBuilding(e)}hasCanProduceDescription(e){return this.getBuildingSettings(e).CAN_PRODUCE}getNumberToBuild(e){const n=this.buildings.get(this.region).find(n=>n[0].getBuildingType()===e.getBuildingType());if(0===n[2])return Math.trunc(this.multiplier);{const e=this.servicesService.getServiceByRegion(this.region).getBuildings().filter(e=>e.getBuildingType()===n[0].getBuildingType()||e.getBuildingType()===tu.CONSTRUCTION&&e.getWorkingAt()===n[0].getBuildingType()).length;return n[2]-e<this.multiplier?n[2]-e:Math.trunc(this.multiplier)}}verifyMultiplier(){null!==this.multiplier&&(this.multiplier=Math.trunc(this.multiplier),0===this.multiplier&&(this.multiplier=1))}}var Tw=Kl({encapsulation:0,styles:[[".notMet[_ngcontent-%COMP%]{color:var(--negative-colour)}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.5em;margin-bottom:10px}#filters[_ngcontent-%COMP%]{width:100%;margin-bottom:5px;border-bottom:2px solid #000}#filters[_ngcontent-%COMP%], #filters[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:inline-block}#buildings[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;overflow-y:scroll;height:540px}.building[_ngcontent-%COMP%]{display:flex;flex-direction:row;text-align:center;border:1px solid #000;margin-bottom:10px}.buildingTitle[_ngcontent-%COMP%]{font-weight:600;background-color:var(--active-colour);border-bottom:1px solid #000}.buildingSecondRow[_ngcontent-%COMP%]{display:flex;width:100%;border-right:1px solid #000;flex-direction:column}.buildButton[_ngcontent-%COMP%]{width:30%}.buildButtonNotAvailable[_ngcontent-%COMP%]{width:30%;cursor:not-allowed}.details[_ngcontent-%COMP%]{width:100%;text-align:center}.resourceIcon[_ngcontent-%COMP%]{height:20px;width:20px;vertical-align:middle}#description[_ngcontent-%COMP%]{margin-bottom:10px}.icon[_ngcontent-%COMP%]{display:inline-flex;flex-direction:row;align-items:center;justify-content:center;margin-right:10px}.subTitle[_ngcontent-%COMP%]{font-size:1em;font-weight:700}.productionDescription[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;margin-bottom:5px}.productionDescription[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:5px}#actions[_ngcontent-%COMP%]{display:flex;flex-direction:column}#multiplierInput[_ngcontent-%COMP%]{width:5ch}#multiplierReset[_ngcontent-%COMP%]{padding:2px}"]],data:{}});function Cw(e){return qs(0,[(e()(),Ds(0,0,null,null,10,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["\xa0Number of buildings: "])),(e()(),Ds(2,0,null,null,6,"input",[["id","multiplierInput"],["min","1"],["step","1"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keyup"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,3)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,3).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,3)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,3)._compositionEnd(l.target.value)&&t),"input"===n&&(t=!1!==Yt(e,4).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,4).onTouched()&&t),"keyup"===n&&(t=!1!==i.verifyMultiplier()&&t),"ngModelChange"===n&&(t=!1!==(i.multiplier=l)&&t),t}),null,null)),ei(3,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(4,16384,null,0,Vg,[ol,il],null,null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,Vg]),ei(6,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(8,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(9,0,null,null,1,"button",[["id","multiplierReset"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==(e.component.multiplier=1)&&t),t}),null,null)),(e()(),Ks(-1,null,["reset"]))],(function(e,n){e(n,6,0,n.component.multiplier)}),(function(e,n){e(n,2,0,Yt(n,8).ngClassUntouched,Yt(n,8).ngClassTouched,Yt(n,8).ngClassPristine,Yt(n,8).ngClassDirty,Yt(n,8).ngClassValid,Yt(n,8).ngClassInvalid,Yt(n,8).ngClassPending)}))}function Iw(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(1,null,["",""]))],null,(function(e,n){var l=n.component,t=" (limit: "+l.getLimit(l.region,n.parent.context.$implicit.getBuildingType())+" building)";e(n,1,0,t)}))}function bw(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(1,null,["",""]))],null,(function(e,n){var l=n.component,t=" (limit: "+l.getLimit(l.region,n.parent.context.$implicit.getBuildingType())+" buildings)";e(n,1,0,t)}))}function yw(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"span",[["class","icon"]],null,null,null,null,null)),(e()(),Ks(1,null,[" "," "])),(e()(),Ds(2,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(3,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null)],(function(e,n){e(n,3,0,n.component.getResourceName(n.context.$implicit.resource),"resources")}),(function(e,n){e(n,1,0,n.context.$implicit.amount)}))}function Aw(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"span",[["class","icon"]],null,null,null,null,null)),(e()(),Ks(1,null,[" "," "])),(e()(),Ds(2,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(3,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null)],(function(e,n){e(n,3,0,n.component.getResourceName(n.context.$implicit.resource),"resources")}),(function(e,n){e(n,1,0,n.context.$implicit.amount)}))}function Nw(e){return qs(0,[(e()(),Ds(0,0,null,null,12,"div",[["class","productionDescription"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,5,"span",[],null,null,null,null,null)),(e()(),Ds(2,0,null,null,1,"span",[["class","subTitle"]],null,null,null,null,null)),(e()(),Ks(-1,null,["production input:"])),(e()(),Ds(4,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,yw)),ei(6,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ds(7,0,null,null,5,"span",[],null,null,null,null,null)),(e()(),Ds(8,0,null,null,1,"span",[["class","subTitle"]],null,null,null,null,null)),(e()(),Ks(-1,null,["production output:"])),(e()(),Ds(10,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,Aw)),ei(12,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component,t=l.getBuildingSettings(n.parent.context.$implicit.getBuildingType()).INPUT_RESOURCES;e(n,6,0,t);var i=l.getBuildingSettings(n.parent.context.$implicit.getBuildingType()).OUTPUT_RESOURCES;e(n,12,0,i)}),null)}function _w(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"span",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(2,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null)],(function(e,n){e(n,2,0,n.component.getResourceName(n.context.$implicit),"resources")}),null)}function ww(e){return qs(0,[(e()(),Ds(0,0,null,null,6,"div",[["class","productionDescription"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,5,"span",[],null,null,null,null,null)),(e()(),Ds(2,0,null,null,1,"span",[["class","subTitle"]],null,null,null,null,null)),(e()(),Ks(-1,null,["can produce:"])),(e()(),Ds(4,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,_w)),ei(6,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component.getBuildingSettings(n.parent.context.$implicit.getBuildingType()).CAN_PRODUCE;e(n,6,0,l)}),null)}function Pw(e){return qs(0,[(e()(),Ds(0,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,6,"span",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,3,"span",[],null,null,null,null,null)),ei(3,278528,null,0,la,[Cl,Il,il,ol],{ngClass:[0,"ngClass"]},null),zs(4,{notMet:0}),(e()(),Ks(5,null,["",""])),(e()(),Ds(6,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(7,114688,null,0,Rg,[],{name:[0,"name"]},null)],(function(e,n){var l=n.component,t=e(n,4,0,!l.hasLand(n.parent.context.$implicit.getSize()*l.getNumberToBuild(n.parent.context.$implicit)));e(n,3,0,t),e(n,7,0,"land")}),(function(e,n){var l=n.component,t=n.parent.context.$implicit.getSize()*l.getNumberToBuild(n.parent.context.$implicit);e(n,5,0,t)}))}function Mw(e){return qs(0,[(e()(),Ds(0,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,6,"span",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,3,"span",[],null,null,null,null,null)),ei(3,278528,null,0,la,[Cl,Il,il,ol],{ngClass:[0,"ngClass"]},null),zs(4,{notMet:0}),(e()(),Ks(5,null,["",""])),(e()(),Ds(6,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(7,114688,null,0,Rg,[],{name:[0,"name"]},null)],(function(e,n){var l=n.component,t=e(n,4,0,!l.hasMountains(n.parent.context.$implicit.getSize()*l.getNumberToBuild(n.parent.context.$implicit)));e(n,3,0,t),e(n,7,0,"mountains")}),(function(e,n){var l=n.component,t=n.parent.context.$implicit.getSize()*l.getNumberToBuild(n.parent.context.$implicit);e(n,5,0,t)}))}function Dw(e){return qs(0,[(e()(),Ds(0,0,null,null,7,"span",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,6,"span",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,3,"span",[],null,null,null,null,null)),ei(3,278528,null,0,la,[Cl,Il,il,ol],{ngClass:[0,"ngClass"]},null),zs(4,{notMet:0}),(e()(),Ks(5,null,["",""])),(e()(),Ds(6,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(7,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null)],(function(e,n){var l=n.component,t=e(n,4,0,!l.hasResource(n.context.$implicit,l.getNumberToBuild(n.parent.context.$implicit)));e(n,3,0,t),e(n,7,0,l.getResourceName(n.context.$implicit.key),"resources")}),(function(e,n){e(n,5,0,n.context.$implicit.value*n.component.getNumberToBuild(n.parent.context.$implicit))}))}function Lw(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[["class","buildButton"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.build(e.parent.context.$implicit)&&t),t}),null,null)),(e()(),Ks(1,null,["Build ",""]))],null,(function(e,n){e(n,1,0,n.component.getNumberToBuild(n.parent.context.$implicit))}))}function xw(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[["class","buildButtonNotAvailable"]],[[8,"disabled",0]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.build(e.parent.context.$implicit)&&t),t}),null,null)),(e()(),Ks(1,null,["Build ",""]))],null,(function(e,n){var l=n.component;e(n,0,0,0===l.getNumberToBuild(n.parent.context.$implicit)),e(n,1,0,l.getNumberToBuild(n.parent.context.$implicit))}))}function kw(e){return qs(0,[(e()(),Ds(0,0,null,null,26,"div",[["class","building"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,21,"div",[["class","buildingSecondRow"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,5,"span",[["class","buildingTitle"]],null,null,null,null,null)),(e()(),Ks(3,null,[""," "])),(e()(),Ms(16777216,null,null,1,null,Iw)),ei(5,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,bw)),ei(7,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(8,0,null,null,14,"div",[["class","details"]],null,null,null,null,null)),(e()(),Ds(9,0,null,null,0,"div",[["id","description"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,Nw)),ei(11,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,ww)),ei(13,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(14,0,null,null,1,"div",[["class","subTitle"]],null,null,null,null,null)),(e()(),Ks(-1,null,["cost:"])),(e()(),Ms(16777216,null,null,1,null,Pw)),ei(17,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,Mw)),ei(19,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,2,null,Dw)),ei(21,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),ni(0,fa,[Il]),(e()(),Ms(16777216,null,null,1,null,Lw)),ei(24,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,xw)),ei(26,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component,t=1===l.getLimit(l.region,n.context.$implicit.getBuildingType());e(n,5,0,t);var i=l.getLimit(l.region,n.context.$implicit.getBuildingType())>1;e(n,7,0,i);var s=l.hasInputOutputDescription(n.context.$implicit.getBuildingType());e(n,11,0,s);var r=l.hasCanProduceDescription(n.context.$implicit.getBuildingType());e(n,13,0,r);var u=!n.context.$implicit.buildOnMountain();e(n,17,0,u);var o=n.context.$implicit.buildOnMountain();e(n,19,0,o),e(n,21,0,$l(n,21,0,Yt(n,22).transform(l.getBuildingCostEntries(n.context.$implicit)))),e(n,24,0,0!==l.getNumberToBuild(n.context.$implicit)&&l.isCostMet(n.context.$implicit)),e(n,26,0,0===l.getNumberToBuild(n.context.$implicit)||!l.isCostMet(n.context.$implicit))}),(function(e,n){var l=n.context.$implicit.getName();e(n,3,0,l);var t=n.context.$implicit.getDescription();e(n,9,0,t)}))}function Fw(e){return qs(0,[ni(0,ma,[]),Us(671088640,1,{filterInputRef:0}),(e()(),Ds(2,0,null,null,16,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Ds(3,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),Ks(4,null,[" "," buildings "])),Ys(5,1),(e()(),Ds(6,0,null,null,9,"span",[["id","filters"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Search: "])),(e()(),Ds(8,0,[[1,0],["filterInput",1]],null,5,"input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,9)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,9).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,9)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,9)._compositionEnd(l.target.value)&&t),"ngModelChange"===n&&(t=!1!==(i.filterText=l)&&t),t}),null,null)),ei(9,16384,null,0,Ag,[ol,il,[2,yg]],null,null),li(1024,null,Ig,(function(e){return[e]}),[Ag]),ei(11,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(13,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ms(16777216,null,null,1,null,Cw)),ei(15,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(16,0,null,null,2,"div",[["id","buildings"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,kw)),ei(18,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,11,0,l.filterText),e(n,15,0,l.region!==l.regions.PLATEAU),e(n,18,0,l.getBuildingForRegion(l.region))}),(function(e,n){var l=n.component,t=$l(n,4,0,e(n,5,0,Yt(n,0),l.regionString));e(n,4,0,t),e(n,8,0,Yt(n,13).ngClassUntouched,Yt(n,13).ngClassTouched,Yt(n,13).ngClassPristine,Yt(n,13).ngClassDirty,Yt(n,13).ngClassValid,Yt(n,13).ngClassInvalid,Yt(n,13).ngClassPending)}))}class Uw{constructor(e){this.modalService=e,this.constructionOpenEventEmitter=new Ii,this.clearFilterSubject=new C,this.modalService.registerForRegion().subscribe(e=>{this.region=e,this.clearFilterSubject.next()}),this.modalService.registerForOnOpen().subscribe(e=>{e===Pu.BUILD&&(this.bodyRef.nativeElement.scrollTop=0,this.constructionOpenEventEmitter.next())})}ngOnInit(){}}var Hw=Kl({encapsulation:0,styles:[[""]],data:{}});function Gw(e){return qs(0,[Us(671088640,1,{bodyRef:0}),(e()(),Ds(1,0,null,null,6,"app-modal",[["id","build-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==Yt(e,2).onKeydownHandler(l)&&t),t}),Rw,vw)),ei(2,4440064,null,0,Ew,[ol,il,Fp],{id:[0,"id"]},null),(e()(),Ds(3,0,null,0,3,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Ds(4,0,[[1,0],["body",1]],null,2,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Ds(5,0,null,null,1,"app-construction",[],null,null,null,Fw,Tw)),ei(6,638976,null,0,Ow,[GE,Np,Fp,xp,Qp,WE,$E,rO,VA,RA,oN,WT,LN,Gp],{region:[0,"region"],clearFilterObservable:[1,"clearFilterObservable"],openEvent:[2,"openEvent"]},null),(e()(),Ds(7,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,2,0,"build-modal"),e(n,6,0,l.region,l.clearFilterSubject.asObservable(),l.constructionOpenEventEmitter.asObservable())}),null)}let Bw=(()=>{class e{constructor(e,n,l,t,i,s,r){this.servicesService=e,this.calendarService=n,this.logService=l,this.idService=t,this.mountainService=i,this.resourcesService=s,this.villageService=r,this.gameService=null,this.gameService=e.getGameService(),n.registerForDayChange().subscribe(e=>{this.checkEvents()})}checkEvents(){Object.values(Io).forEach(e=>{let n=!0;if(e.PREREQUISITES.forEach(e=>{this.gameService.isEnabled(e)||(n=!1)}),n&&Nu.chance(e.CHANCE)){this.logService.customLog(e.LOG.MESSAGE,e.LOG.LOG_TYPE);const n=Nu.randomBetween(e.MIN_POWER,e.MAX_POWER);switch(e.EVENT){case Mu.METEORITE:{let e=Nu.randomElement([{item:su.STONE,chance:35},{item:su.COPPER_ORE,chance:30},{item:su.TIN_ORE,chance:20},{item:su.GOLD_ORE,chance:5},{item:su.SILVER_ORE,chance:5},{item:su.IRON_ORE,chance:5}]);null===e&&(e=su.STONE),this.mountainService.buildings.push(new TE(this.servicesService,this.idService.getNextId(),n,e));break}case Mu.SMALL_REFUGEE:case Mu.MEDIUM_REFUGEE:this.addVillagers(n)}}})}addVillagers(e){this.servicesService.getVillageService().addVillagers(e)}}return e.\u0275prov=re({factory:function(){return new e(Ae(Np),Ae(Lp),Ae(xp),Ae(lE),Ae(oN),Ae(Qp),Ae($E))},token:e,providedIn:"root"}),e})();class Vw{constructor(e,n){this.message=e,this.fullError=n}}let Ww=(()=>{class e{constructor(e,n,l,t,i,s,r,u,o,a,c,h,d,g,p,m,f,S,E,v,R){this.logService=e,this.villageService=n,this.fortService=l,this.fieldService=t,this.mountainsService=i,this.plateauService=s,this.seaService=r,this.forestService=u,this.calendarService=o,this.landService=a,this.techService=c,this.weatherService=h,this.resourcesService=d,this.gameService=g,this.effectsService=p,this.armyService=m,this.happinessService=f,this.worldService=S,this.servicesService=E,this.navyService=v,this.eventService=R,this.tickerState=0,this.lastTick=0,this.paused=!1,this.ticking=!1,this.resolution=750,E.addService(bu.TICKER,this),this.tickSubject=new C,this.interval=setInterval(()=>this.tick(),this.resolution)}tick(){if(!this.ticking){this.ticking=!0;const n=Math.floor(Date.now()/this.resolution);if(this.tickerState>=0){this.lastTick=n;try{this.calendarService.tick(n),this.effectsService.tick(n),this.weatherService.tick(n),this.happinessService.tick(n),this.landService.tick(n),this.resourcesService.tick(n),this.gameService.tick(n),this.villageService.tick(n),this.fortService.tick(n),this.fieldService.tick(n),this.mountainsService.tick(n),this.plateauService.tick(n),this.seaService.tick(n),this.forestService.tick(n),this.armyService.tick(n),this.navyService.tick(n),this.worldService.tick(n)}catch(e){this.logService.warning("Game paused due to the internal error: "+e.name),this.logService.errorReport(new Vw("Game paused due to the internal error: "+e.name,e.name+": "+e.message+"\n"+e.stack)),console.error(e),this.pause()}}this.ticking=!1}}stop(){return this.tickerState-=1,this.lastTick}start(){this.tickerState+=1,this.tickerState>0&&(this.tickerState=0)}forceStart(){this.tickerState=0}clearTicker(){clearInterval(this.interval)}initTicker(){this.interval=setInterval(()=>this.tick(),this.resolution)}pause(){this.stop(),this.paused=!0}resume(){this.forceStart(),this.paused=!1}isPaused(){return this.paused}}return e.\u0275prov=re({factory:function(){return new e(Ae(xp),Ae($E),Ae(rO),Ae(VA),Ae(oN),Ae(LN),Ae(WT),Ae(RA),Ae(Lp),Ae(WE),Ae(sR),Ae(qO),Ae(Qp),Ae(Gp),Ae(BE),Ae(YR),Ae(zp),Ae(zT),Ae(Np),Ae(YT),Ae(Bw))},token:e,providedIn:"root"}),e})();class Yw{}class zw{}class $w{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(e=>{const n=e.indexOf(":");if(n>0){const l=e.slice(0,n),t=l.toLowerCase(),i=e.slice(n+1).trim();this.maybeSetNormalizedName(l,t),this.headers.has(t)?this.headers.get(t).push(i):this.headers.set(t,[i])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(n=>{let l=e[n];const t=n.toLowerCase();"string"==typeof l&&(l=[l]),l.length>0&&(this.headers.set(t,l),this.maybeSetNormalizedName(n,t))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof $w?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){const n=new $w;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof $w?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){const n=e.name.toLowerCase();switch(e.op){case"a":case"s":let l=e.value;if("string"==typeof l&&(l=[l]),0===l.length)return;this.maybeSetNormalizedName(e.name,n);const t=("a"===e.op?this.headers.get(n):void 0)||[];t.push(...l),this.headers.set(n,t);break;case"d":const i=e.value;if(i){let e=this.headers.get(n);if(!e)return;e=e.filter(e=>-1===i.indexOf(e)),0===e.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,e)}else this.headers.delete(n),this.normalizedNames.delete(n)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}}class Kw{encodeKey(e){return jw(e)}encodeValue(e){return jw(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}function jw(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class Qw{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Kw,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(e,n){const l=new Map;return e.length>0&&e.split("&").forEach(e=>{const t=e.indexOf("="),[i,s]=-1==t?[n.decodeKey(e),""]:[n.decodeKey(e.slice(0,t)),n.decodeValue(e.slice(t+1))],r=l.get(i)||[];r.push(s),l.set(i,r)}),l}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{const l=e.fromObject[n];this.map.set(n,Array.isArray(l)?l:[l])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const n=this.encoder.encodeKey(e);return this.map.get(e).map(e=>n+"="+this.encoder.encodeValue(e)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const n=new Qw({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat([e]),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const n=("a"===e.op?this.map.get(e.param):void 0)||[];n.push(e.value),this.map.set(e.param,n);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let n=this.map.get(e.param)||[];const l=n.indexOf(e.value);-1!==l&&n.splice(l,1),n.length>0?this.map.set(e.param,n):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}function qw(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}function Xw(e){return"undefined"!=typeof Blob&&e instanceof Blob}function Zw(e){return"undefined"!=typeof FormData&&e instanceof FormData}class Jw{constructor(e,n,l,t){let i;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||t?(this.body=void 0!==l?l:null,i=t):i=l,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new $w),this.params){const e=this.params.toString();if(0===e.length)this.urlWithParams=n;else{const l=n.indexOf("?");this.urlWithParams=n+(-1===l?"?":l<n.length-1?"&":"")+e}}else this.params=new Qw,this.urlWithParams=n}serializeBody(){return null===this.body?null:qw(this.body)||Xw(this.body)||Zw(this.body)||"string"==typeof this.body?this.body:this.body instanceof Qw?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Zw(this.body)?null:Xw(this.body)?this.body.type||null:qw(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Qw?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(e={}){const n=e.method||this.method,l=e.url||this.url,t=e.responseType||this.responseType,i=void 0!==e.body?e.body:this.body,s=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,r=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let u=e.headers||this.headers,o=e.params||this.params;return void 0!==e.setHeaders&&(u=Object.keys(e.setHeaders).reduce((n,l)=>n.set(l,e.setHeaders[l]),u)),e.setParams&&(o=Object.keys(e.setParams).reduce((n,l)=>n.set(l,e.setParams[l]),o)),new Jw(n,l,i,{params:o,headers:u,reportProgress:r,responseType:t,withCredentials:s})}}var eP=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}({});class nP{constructor(e,n=200,l="OK"){this.headers=e.headers||new $w,this.status=void 0!==e.status?e.status:n,this.statusText=e.statusText||l,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class lP extends nP{constructor(e={}){super(e),this.type=eP.ResponseHeader}clone(e={}){return new lP({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class tP extends nP{constructor(e={}){super(e),this.type=eP.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new tP({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class iP extends nP{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?"Http failure during parsing for "+(e.url||"(unknown url)"):`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function sP(e,n){return{body:n,headers:e.headers,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}class rP{constructor(e){this.handler=e}request(e,n,l={}){let t;if(e instanceof Jw)t=e;else{let i=void 0;i=l.headers instanceof $w?l.headers:new $w(l.headers);let s=void 0;l.params&&(s=l.params instanceof Qw?l.params:new Qw({fromObject:l.params})),t=new Jw(e,n,void 0!==l.body?l.body:null,{headers:i,params:s,reportProgress:l.reportProgress,responseType:l.responseType||"json",withCredentials:l.withCredentials})}const i=Ca(t).pipe(fc(e=>this.handler.handle(e)));if(e instanceof Jw||"events"===l.observe)return i;const s=i.pipe(ka(e=>e instanceof tP));switch(l.observe||"body"){case"body":switch(t.responseType){case"arraybuffer":return s.pipe(y(e=>{if(null!==e.body&&!(e.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return e.body}));case"blob":return s.pipe(y(e=>{if(null!==e.body&&!(e.body instanceof Blob))throw new Error("Response is not a Blob.");return e.body}));case"text":return s.pipe(y(e=>{if(null!==e.body&&"string"!=typeof e.body)throw new Error("Response is not a string.");return e.body}));case"json":default:return s.pipe(y(e=>e.body))}case"response":return s;default:throw new Error(`Unreachable: unhandled observe type ${l.observe}}`)}}delete(e,n={}){return this.request("DELETE",e,n)}get(e,n={}){return this.request("GET",e,n)}head(e,n={}){return this.request("HEAD",e,n)}jsonp(e,n){return this.request("JSONP",e,{params:(new Qw).append(n,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,n={}){return this.request("OPTIONS",e,n)}patch(e,n,l={}){return this.request("PATCH",e,sP(l,n))}post(e,n,l={}){return this.request("POST",e,sP(l,n))}put(e,n,l={}){return this.request("PUT",e,sP(l,n))}}class uP{constructor(e,n){this.next=e,this.interceptor=n}handle(e){return this.interceptor.intercept(e,this.next)}}const oP=new Re("HTTP_INTERCEPTORS");class aP{intercept(e,n){return n.handle(e)}}const cP=/^\)\]\}',?\n/;class hP{}class dP{constructor(){}build(){return new XMLHttpRequest}}class gP{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new E(n=>{const l=this.xhrFactory.build();if(l.open(e.method,e.urlWithParams),e.withCredentials&&(l.withCredentials=!0),e.headers.forEach((e,n)=>l.setRequestHeader(e,n.join(","))),e.headers.has("Accept")||l.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const n=e.detectContentTypeHeader();null!==n&&l.setRequestHeader("Content-Type",n)}if(e.responseType){const n=e.responseType.toLowerCase();l.responseType="json"!==n?n:"text"}const t=e.serializeBody();let i=null;const s=()=>{if(null!==i)return i;const n=1223===l.status?204:l.status,t=l.statusText||"OK",s=new $w(l.getAllResponseHeaders()),r=function(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(l)||e.url;return i=new lP({headers:s,status:n,statusText:t,url:r}),i},r=()=>{let{headers:t,status:i,statusText:r,url:u}=s(),o=null;204!==i&&(o=void 0===l.response?l.responseText:l.response),0===i&&(i=o?200:0);let a=i>=200&&i<300;if("json"===e.responseType&&"string"==typeof o){const e=o;o=o.replace(cP,"");try{o=""!==o?JSON.parse(o):null}catch(c){o=e,a&&(a=!1,o={error:c,text:o})}}a?(n.next(new tP({body:o,headers:t,status:i,statusText:r,url:u||void 0})),n.complete()):n.error(new iP({error:o,headers:t,status:i,statusText:r,url:u||void 0}))},u=e=>{const{url:t}=s(),i=new iP({error:e,status:l.status||0,statusText:l.statusText||"Unknown Error",url:t||void 0});n.error(i)};let o=!1;const a=t=>{o||(n.next(s()),o=!0);let i={type:eP.DownloadProgress,loaded:t.loaded};t.lengthComputable&&(i.total=t.total),"text"===e.responseType&&l.responseText&&(i.partialText=l.responseText),n.next(i)},c=e=>{let l={type:eP.UploadProgress,loaded:e.loaded};e.lengthComputable&&(l.total=e.total),n.next(l)};return l.addEventListener("load",r),l.addEventListener("error",u),e.reportProgress&&(l.addEventListener("progress",a),null!==t&&l.upload&&l.upload.addEventListener("progress",c)),l.send(t),n.next({type:eP.Sent}),()=>{l.removeEventListener("error",u),l.removeEventListener("load",r),e.reportProgress&&(l.removeEventListener("progress",a),null!==t&&l.upload&&l.upload.removeEventListener("progress",c)),l.readyState!==l.DONE&&l.abort()}})}}const pP=new Re("XSRF_COOKIE_NAME"),mP=new Re("XSRF_HEADER_NAME");class fP{}class SP{constructor(e,n,l){this.doc=e,this.platform=n,this.cookieName=l,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=na(e,this.cookieName),this.lastCookieString=e),this.lastToken}}class EP{constructor(e,n){this.tokenService=e,this.headerName=n}intercept(e,n){const l=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||l.startsWith("http://")||l.startsWith("https://"))return n.handle(e);const t=this.tokenService.getToken();return null===t||e.headers.has(this.headerName)||(e=e.clone({headers:e.headers.set(this.headerName,t)})),n.handle(e)}}class vP{constructor(e,n){this.backend=e,this.injector=n,this.chain=null}handle(e){if(null===this.chain){const e=this.injector.get(oP,[]);this.chain=e.reduceRight((e,n)=>new uP(e,n),this.backend)}return this.chain.handle(e)}}class RP{static disable(){return{ngModule:RP,providers:[{provide:EP,useClass:aP}]}}static withOptions(e={}){return{ngModule:RP,providers:[e.cookieName?{provide:pP,useValue:e.cookieName}:[],e.headerName?{provide:mP,useValue:e.headerName}:[]]}}}class OP{}const TP=(()=>{function e(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return e.prototype=Object.create(Error.prototype),e})();class CP{constructor(e,n,l,t){this.waitFor=e,this.absoluteTimeout=n,this.withObservable=l,this.scheduler=t}call(e,n){return n.subscribe(new IP(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))}}class IP extends U{constructor(e,n,l,t,i){super(e),this.absoluteTimeout=n,this.waitFor=l,this.withObservable=t,this.scheduler=i,this.scheduleTimeout()}static dispatchTimeout(e){const{withObservable:n}=e;e._unsubscribeAndRecycle(),e.add(H(n,new F(e)))}scheduleTimeout(){const{action:e}=this;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(IP.dispatchTimeout,this.waitFor,this))}_next(e){this.absoluteTimeout||this.scheduleTimeout(),super._next(e)}_unsubscribe(){this.action=void 0,this.scheduler=null,this.withObservable=null}}function bP(e,n=Rm){return function(e,n,l=Rm){return t=>{let i=(s=e)instanceof Date&&!isNaN(+s);var s;let r=i?+e-l.now():Math.abs(e);return t.lift(new CP(r,i,n,l))}}(e,_m(new TP),n)}let yP=(()=>{class e{constructor(e,n,l){this.http=e,this.logService=n,this.modalService=l,this.serverUrl="https://villagerkings.com/api/"}cloudSave(e,n,l,t,i){const s={headers:(new $w).append("Content-Type","application/json").append("Access-Control-Allow-Origin","*")},r={};return r.userId=e,r.gameAuthToken=n,r.save=l,r.day=t,r.year=i,this.http.post(this.serverUrl+"save",r,s).pipe(bP(15e3),qa(e=>this.handleError(e)))}cloudLoad(e,n){const l={headers:(new $w).append("Content-Type","application/json").append("Access-Control-Allow-Origin","*"),observe:"response",responseType:"text"},t={};return t.userId=e,t.gameAuthToken=n,this.http.post(this.serverUrl+"load",t,l).pipe(bP(15e3),qa(e=>this.handleError(e)))}cloudCheck(e=!1,n,l){const t={headers:(new $w).append("Content-Type","application/json").append("Access-Control-Allow-Origin","*"),observe:"response"},i={};return i.userId=n,i.gameAuthToken=l,this.http.post(this.serverUrl+"hasSave",i,t).pipe(bP(5e3),qa(n=>this.handleError(n,!e)))}handleError(e,n=!0){return e instanceof iP?401===e.status?(n?this.modalService.info("Couldn't authorize server call via Kongregate API"):this.logService.warning("Couldn't authorize server call via Kongregate API"),Ma):(console.log("error",e),e.error instanceof ErrorEvent?console.error("An error occurred:",e.error.message):console.error("Backend returned code "+e.status),n&&this.modalService.info("Something bad happened; please try again later."),_m("Something bad happened; please try again later.")):e instanceof TP?(n?this.modalService.info("Server request has timed out"):this.logService.warning("Server request has timed out"),Ma):void 0}}return e.\u0275prov=re({factory:function(){return new e(Ae(rP),Ae(xp),Ae(Fp))},token:e,providedIn:"root"}),e})(),AP=(()=>{class e{constructor(e,n,l,t,i,s,r,u,o,a,c,h,d,g,p,m,f,S,E,v,R,O,T,C,I,b,y,A,N,_,w,P,M,D,L){this.router=e,this.tickerService=n,this.gameService=l,this.modalService=t,this.optionsService=i,this.logService=s,this.villageService=r,this.forestService=u,this.resourcesService=o,this.landService=a,this.mountainsService=c,this.calendarService=h,this.royalService=d,this.techService=g,this.religionService=p,this.craftingService=m,this.recipeService=f,this.fieldService=S,this.plateauService=E,this.seaService=v,this.fortService=R,this.effectsService=O,this.armyService=T,this.happinessService=C,this.managementService=I,this.marketService=b,this.weatherService=y,this.idService=A,this.heritageService=N,this.tutorialService=_,this.worldService=w,this.kongregateService=P,this.serverService=M,this.navyService=D,this.saveName=Qu.saveName,this.saveVersion=Qu.saveVersion,L.addService(bu.SERIALIZER,this),this.autoSaveStatus=this.optionsService.getOption(_p.AUTO_SAVE_STATUS),this.autoSavePeriod=this.optionsService.getOption(_p.AUTO_SAVE_PERIOD),this.optionsSubscription||(this.optionsSubscription=this.optionsService.registerForOptionsChange().subscribe(()=>this.changeOptions())),this.saveInterval=setInterval(()=>{this.initSave(),this.logService.autoSave()},this.autoSavePeriod)}changeOptions(){const e=this.optionsService.getOption(_p.AUTO_SAVE_STATUS),n=this.optionsService.getOption(_p.AUTO_SAVE_PERIOD);this.autoSaveStatus===e&&this.autoSavePeriod===n||(this.autoSaveStatus=e,this.autoSavePeriod=n,clearInterval(this.saveInterval),this.autoSaveStatus&&(this.saveInterval=setInterval(()=>{this.initSave(),this.logService.autoSave()},1e3*this.autoSavePeriod*60)))}initSave(){this.tickerService.stop(),localStorage.setItem(this.saveName,this.prepareBase64()),this.tickerService.start()}prepareBase64(){this.tickerService.stop();const e=btoa(JSON.stringify({saveVersion:this.saveVersion,heritage:this.heritageService.save(),id:this.idService,options:this.optionsService.save(),tutorial:this.tutorialService.save(),resources:this.resourcesService.save(),village:this.villageService.save(),fort:this.fortService.save(),forest:this.forestService.save(),field:this.fieldService.save(),mountains:this.mountainsService.save(),plateau:this.plateauService.save(),sea:this.seaService.save(),land:this.landService.save(),calendar:this.calendarService.save(),game:this.gameService.save(),royal:this.royalService.save(),tech:this.techService.save(),religion:this.religionService.save(),crafting:this.craftingService.save(),recipe:this.recipeService.save(),effects:this.effectsService.save(),army:this.armyService.save(),world:this.worldService.save(),happiness:this.happinessService.save(),management:this.managementService.save(),market:this.marketService.save(),navy:this.navyService.save(),weather:this.weatherService.save(),logs:this.logService.save()}));return this.tickerService.start(),e}initLoad(){if(this.tickerService.stop(),null===localStorage.getItem(this.saveName))return this.modalService.info("There is no any save file to load."),void this.tickerService.start();let e;try{e=JSON.parse(atob(localStorage.getItem(this.saveName)))}catch(n){return this.modalService.info("Save data is corrupted! Loading failed."),void this.tickerService.start()}this.loadSave(e),this.tickerService.start(),this.logService.log("loaded")}hasSave(){return null!=localStorage.getItem(this.saveName)}import(e){let n;this.tickerService.stop();try{n=JSON.parse(atob(e))}catch(l){return this.modalService.info("Import file is not valid or corrupted! Import failed."),void this.tickerService.start()}this.loadSave(n),localStorage.setItem(this.saveName,e),this.tickerService.start(),this.logService.log("save imported")}hardReset(){this.reset(!0),localStorage.removeItem(this.saveName)}ascensionReset(){this.reset(!1,!0)}reset(e,n=!1){this.tickerService.stop(),this.tickerService.clearTicker(),localStorage.removeItem(this.saveName),this.tutorialService.reset(e,n),this.calendarService.reset(e,n),this.gameService.reset(e,n),this.idService.reset(e,n),this.weatherService.reset(e,n),this.effectsService.reset(e,n),this.resourcesService.reset(e,n),this.landService.reset(e,n),this.navyService.reset(e,n),this.villageService.reset(e,n),this.fortService.reset(e,n),this.forestService.reset(e,n),this.fieldService.reset(e,n),this.mountainsService.reset(e,n),this.plateauService.reset(e,n),this.seaService.reset(e,n),this.optionsService.reset(e,n),this.techService.reset(e,n),this.religionService.reset(e,n),this.craftingService.reset(e,n),this.recipeService.reset(e,n),this.armyService.reset(e,n),this.worldService.reset(e,n),this.happinessService.reset(e,n),this.managementService.reset(e,n),this.marketService.reset(e,n),this.heritageService.reset(e,n),this.logService.reset(e,n),this.royalService.reset(e,n),this.initSave(),this.tickerService.initTicker(),this.tickerService.start(),this.router.navigate(["/village"])}loadSave(e){switch(e.saveVersion){case iu.DEV:case iu.V1_0_0:this.loadDevVersion(e);break;default:const n="Corrupted save file (unknown save version). Loading is not possible";return this.logService.log(n),void console.error(n)}}loadDevVersion(e){this.saveVersion=e.saveVersion,this.safeLoad(this.idService,e.id),this.safeLoad(this.optionsService,e.options),this.safeLoad(this.logService,e.logs),this.safeLoad(this.effectsService,e.effects),this.safeLoad(this.resourcesService,e.resources),this.safeLoad(this.villageService,e.village),this.safeLoad(this.fortService,e.fort),this.safeLoad(this.forestService,e.forest),this.safeLoad(this.fieldService,e.field),this.safeLoad(this.mountainsService,e.mountains),this.safeLoad(this.plateauService,e.plateau),this.safeLoad(this.seaService,e.sea),this.safeLoad(this.landService,e.land),this.safeLoad(this.calendarService,e.calendar),this.safeLoad(this.gameService,e.game),this.safeLoad(this.royalService,e.royal),this.safeLoad(this.recipeService,e.recipe),this.safeLoad(this.techService,e.tech),this.safeLoad(this.religionService,e.religion),this.safeLoad(this.craftingService,e.crafting),this.safeLoad(this.armyService,e.army),this.safeLoad(this.worldService,e.world),this.safeLoad(this.navyService,e.navy),this.safeLoad(this.happinessService,e.happiness),this.safeLoad(this.managementService,e.management),this.safeLoad(this.marketService,e.market),this.safeLoad(this.weatherService,e.weather),this.safeLoad(this.heritageService,e.heritage),this.safeLoad(this.tutorialService,e.tutorial)}safeLoad(e,n){try{e.load(void 0!==n?n:{})}catch(l){e!==this.royalService&&(this.logService.errorReport(new Vw("Error ("+l.name+") while loading "+e.getName()+"! It will reset to default values",l.name+": "+l.message+"\n"+l.stack)),console.error(l),e.reset(!0,!0))}}abdicate(e,n){this.reset(!1,!1),this.tickerService.stop(),this.tickerService.clearTicker(),e&&(this.landService.reset(!1,!1),this.worldService.reset(!0,!1)),this.tickerService.initTicker(),this.tickerService.start()}getTimestamp(){return(new Date).getTime()}cloudSave(e,n,l){if(this.kongregateService.isGuest()&&!nn())this.modalService.info("You must be logged into kongregate to use cloud save");else{this.modalService.open(Pu.CONFIRM),this.modalService.setModalText("Are you sure you want to upload save to cloud? Current cloud save will be overridden");const t=this.modalService.registerForConfirmation().subscribe(i=>{if(t.unsubscribe(),i){l.timestamp=this.getTimestamp(),e.status=!0,this.tickerService.stop();const t=this.prepareBase64(),i=this.calendarService.getDay(),s=this.calendarService.getYear();this.tickerService.start(),nn()?this.serverService.cloudSave(392444,"93ba2bd2f335d13f4c9a66447ae22d3db04670c596fd87b6e6424f870d9504b1",t,i,s).subscribe(e=>{this.logService.success("saved to cloud"),this.modalService.info("Saved to cloud!"),n.day=i,n.year=s}).add(()=>{e.status=!1}):this.serverService.cloudSave(this.kongregateService.getUserId(),this.kongregateService.getGameAuthToken(),t,i,s).subscribe(e=>{this.logService.success("saved to cloud"),this.modalService.info("Saved to cloud!"),n.day=i,n.year=s}).add(()=>{e.status=!1})}})}}cloudLoad(e,n){if(this.kongregateService.isGuest()&&!nn())this.modalService.info("You must be logged into kongregate to use cloud save");else{this.modalService.open(Pu.CONFIRM),this.modalService.setModalText("Are you sure you want to download cloud save? Current game progress will be overridden");const l=this.modalService.registerForConfirmation().subscribe(t=>{l.unsubscribe(),t&&(n.timestamp=this.getTimestamp(),e.status=!0,nn()?this.serverService.cloudLoad(392444,"93ba2bd2f335d13f4c9a66447ae22d3db04670c596fd87b6e6424f870d9504b1").subscribe(e=>{204===e.status?this.modalService.info("There is no save file available on the server"):(this.import(e.body),this.modalService.info("Loaded save file from cloud"))}).add(()=>{e.status=!1}):this.serverService.cloudLoad(this.kongregateService.getUserId(),this.kongregateService.getGameAuthToken()).subscribe(e=>{204===e.status?this.modalService.info("There is no save file available on the server"):(this.import(e.body),this.modalService.info("Loaded save file from cloud"))}).add(()=>{e.status=!1}))})}}cloudCheck(e=!1,n,l,t){this.kongregateService.isGuest()&&!nn()?e||this.modalService.info("You must be logged into kongregate to use cloud save"):(t.timestamp=this.getTimestamp(),n.status=!0,nn()?this.serverService.cloudCheck(e,392444,"93ba2bd2f335d13f4c9a66447ae22d3db04670c596fd87b6e6424f870d9504b1").subscribe(e=>{204===e.status?l.day=-1:(l.day=e.body.day,l.year=e.body.year)},()=>{l.day=-1}).add(()=>{n.status=!1}):this.serverService.cloudCheck(e,this.kongregateService.getUserId(),this.kongregateService.getGameAuthToken()).subscribe(e=>{204===e.status?l.day=-1:(l.day=e.body.day,l.year=e.body.year)},()=>{l.day=-1}).add(()=>{n.status=!1}))}}return e.\u0275prov=re({factory:function(){return new e(Ae(Fd),Ae(Ww),Ae(Gp),Ae(Fp),Ae(wp),Ae(xp),Ae($E),Ae(RA),Ae(Qp),Ae(WE),Ae(oN),Ae(Lp),Ae(Vp),Ae(sR),Ae(NO),Ae(Pf),Ae(cm),Ae(VA),Ae(LN),Ae(WT),Ae(rO),Ae(BE),Ae(YR),Ae(zp),Ae(Wv),Ae(Yv),Ae(qO),Ae(lE),Ae(VI),Ae(Up),Ae(zT),Ae(Wp),Ae(yP),Ae(YT),Ae(Np))},token:e,providedIn:"root"}),e})();class NP{constructor(e,n,l,t,i){this.modalService=e,this.serializerService=n,this.heritageService=l,this.servicesService=t,this.gameService=i,this.resetWorld=!1,this.resetHeritage=!1,e.registerForOnOpen().subscribe(e=>{e===Pu.ABDICATION&&(this.resetWorld=!1,this.resetHeritage=!1)}),e.registerForCloseModal().subscribe(e=>{e!==Pu.ABDICATION&&e!==Pu.ALL||this.modalService.sendAbdicationResult(!1)})}ngOnInit(){}abdicate(){this.modalService.open(Pu.CONFIRM),this.modalService.setModalText("Are you sure you want to abdicate?");const e=this.modalService.registerForConfirmation().subscribe(n=>{e.unsubscribe(),n&&(this.modalService.sendAbdicationResult(!0),this.servicesService.getService(bu.PLATEAU).getBuildings().forEach(e=>{e.getBuildingType()!==tu.CONSTRUCTION&&e.forceAbdicate()}),this.serializerService.abdicate(this.resetWorld,this.resetHeritage),this.modalService.close(Pu.ABDICATION))})}cancel(){this.modalService.sendAbdicationResult(!1),this.modalService.close(Pu.ABDICATION)}calculateHeritagePoints(){return this.heritageService.calculateHeritagePoints()}peopleToNextHeritagePoint(){return this.heritageService.peopleToNextHeritagePoint()}getStartYear(){return this.gameService.getGameStartedYear()}}var _P=Kl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{flex-direction:column;font-size:1.2em}#buttons[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}#buttons[_ngcontent-%COMP%]{flex-direction:row;width:100%}button[_ngcontent-%COMP%]{border:1px solid #000;color:#000;padding:1% 2%;text-align:center;text-decoration:none;display:inline-block;font-size:1em;margin:.5%}"]],data:{}});function wP(e){return qs(0,[(e()(),Ds(0,0,null,null,43,"app-modal",[["id","abdication-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==Yt(e,1).onKeydownHandler(l)&&t),t}),Rw,vw)),ei(1,4440064,null,0,Ew,[ol,il,Fp],{id:[0,"id"]},null),(e()(),Ds(2,0,null,0,40,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Ds(3,0,null,null,39,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Ds(4,0,null,null,1,"h2",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Abdication"])),(e()(),Ds(6,0,null,null,31,"div",[],null,null,null,null,null)),(e()(),Ks(-1,null,[" Are you sure you want to soft reset your progress? "])),(e()(),Ds(8,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ks(-1,null,[" You will start from the beginning and all progress except for:"])),(e()(),Ds(10,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(11,0,null,null,6,"ul",[],null,null,null,null,null)),(e()(),Ds(12,0,null,null,1,"li",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Royal Points"])),(e()(),Ds(14,0,null,null,1,"li",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Heritage Points"])),(e()(),Ds(16,0,null,null,1,"li",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Wonder buildings and their effects"])),(e()(),Ks(-1,null,[" will be deleted."])),(e()(),Ds(19,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(20,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ks(21,null,[" You will be awarded "," Heritage Points and "," xp towards next point "])),(e()(),Ds(22,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ks(23,null,[" ("," more people/xp needed for the next point)"])),(e()(),Ds(24,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(25,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ks(26,null,[" You reign since the start of year "," "])),(e()(),Ds(27,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(28,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(29,0,null,null,5,"input",[["id","resetWorld"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,30).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==Yt(e,30).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.resetWorld=l)&&t),t}),null,null)),ei(30,16384,null,0,bg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[bg]),ei(32,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(34,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(35,0,null,null,1,"label",[["for","resetWorld"]],null,null,null,null,null)),(e()(),Ks(-1,null,["reset world map progress"])),(e()(),Ds(37,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(38,0,null,null,4,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Ds(39,0,null,null,1,"button",[["id","hardReset"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.abdicate()&&t),t}),null,null)),(e()(),Ks(-1,null,["ABDICATE"])),(e()(),Ds(41,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.cancel()&&t),t}),null,null)),(e()(),Ks(-1,null,["CANCEL"])),(e()(),Ds(43,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,1,0,"abdication-modal"),e(n,32,0,l.resetWorld)}),(function(e,n){var l=n.component;e(n,21,0,l.calculateHeritagePoints().hp,l.calculateHeritagePoints().xp),e(n,23,0,l.peopleToNextHeritagePoint()),e(n,26,0,l.getStartYear()),e(n,29,0,Yt(n,34).ngClassUntouched,Yt(n,34).ngClassTouched,Yt(n,34).ngClassPristine,Yt(n,34).ngClassDirty,Yt(n,34).ngClassValid,Yt(n,34).ngClassInvalid,Yt(n,34).ngClassPending)}))}class PP{constructor(e){this.modalService=e,this.selectedMode=0}ngOnInit(){}ok(){this.modalService.close(Pu.ASCENSION)}canAscend(){return!0}ascend(){this.canAscend()&&this.modalService.close(Pu.ASCENSION)}onKeydownHandler(e){"none"!==document.getElementById("ascension-modal").style.display&&(e.preventDefault(),this.ok())}}var MP=Kl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:1.2em;max-width:750px;margin:100px auto auto}.lineBreak[_ngcontent-%COMP%]{display:block}#modes[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-bottom:10px}.mode[_ngcontent-%COMP%]{display:flex;cursor:pointer;flex-direction:column;height:150px;width:200px;border:1px solid #000;align-items:center;margin-right:5px;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box}.mode[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100px}.mode[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700}.mode[_ngcontent-%COMP%]   .effect[_ngcontent-%COMP%]{font-size:.8em}#buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px;white-space:nowrap}.disabled[_ngcontent-%COMP%]{color:#5a5a5a}.selected[_ngcontent-%COMP%]{border:3px solid #000}"]],data:{}});function DP(e){return qs(0,[(e()(),Ds(0,0,null,null,51,"app-modal",[["id","ascension-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==Yt(e,1).onKeydownHandler(l)&&t),t}),Rw,vw)),ei(1,4440064,null,0,Ew,[ol,il,Fp],{id:[0,"id"]},null),(e()(),Ds(2,0,null,0,48,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Ds(3,0,null,null,47,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Ds(4,0,null,null,1,"h2",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Ascension"])),(e()(),Ds(6,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),Ks(-1,null,[" Are you sure you want to ascend into a new world? "])),(e()(),Ds(8,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(9,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(10,0,null,null,5,"div",[],null,null,null,null,null)),(e()(),Ks(-1,null,[" You will start from the beginning and all progress except for"])),(e()(),Ds(12,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ks(-1,null,[" royal points, heritage points and permanent royal upgrades will be deleted "])),(e()(),Ds(14,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(15,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(16,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ks(-1,null,["What world do you choose:"])),(e()(),Ds(18,0,null,null,24,"div",[["id","modes"]],null,null,null,null,null)),(e()(),Ds(19,0,null,null,7,"div",[["class","mode"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==(e.component.selectedMode=0)&&t),t}),null,null)),ei(20,278528,null,0,la,[Cl,Il,il,ol],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),zs(21,{selected:0}),(e()(),Ds(22,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Winter"])),(e()(),Ds(24,0,null,null,0,"img",[["src","assets/weather/snow.svg"]],null,null,null,null,null)),(e()(),Ds(25,0,null,null,1,"span",[["class","effect"]],null,null,null,null,null)),(e()(),Ks(-1,null,["cold severity +5%"])),(e()(),Ds(27,0,null,null,7,"div",[["class","mode"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==(e.component.selectedMode=1)&&t),t}),null,null)),ei(28,278528,null,0,la,[Cl,Il,il,ol],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),zs(29,{selected:0}),(e()(),Ds(30,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),Ks(-1,null,["War"])),(e()(),Ds(32,0,null,null,0,"img",[["src","assets/army/recruit.svg"]],null,null,null,null,null)),(e()(),Ds(33,0,null,null,1,"span",[["class","effect"]],null,null,null,null,null)),(e()(),Ks(-1,null,["enemy difficulty +5%"])),(e()(),Ds(35,0,null,null,7,"div",[["class","mode"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==(e.component.selectedMode=2)&&t),t}),null,null)),ei(36,278528,null,0,la,[Cl,Il,il,ol],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),zs(37,{selected:0}),(e()(),Ds(38,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Hunger"])),(e()(),Ds(40,0,null,null,0,"img",[["src","assets/resources/food.svg"]],null,null,null,null,null)),(e()(),Ds(41,0,null,null,1,"span",[["class","effect"]],null,null,null,null,null)),(e()(),Ks(-1,null,["food consumption +5%"])),(e()(),Ds(43,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(44,0,null,null,6,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Ds(45,0,null,null,3,"button",[],null,null,null,null,null)),ei(46,278528,null,0,la,[Cl,Il,il,ol],{ngClass:[0,"ngClass"]},null),zs(47,{disabled:0}),(e()(),Ks(-1,null,["ASCEND"])),(e()(),Ds(49,0,null,null,1,"button",[],null,null,null,null,null)),(e()(),Ks(-1,null,["TURN BACK"])),(e()(),Ds(51,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,1,0,"ascension-modal");var t=e(n,21,0,0===l.selectedMode);e(n,20,0,"mode",t);var i=e(n,29,0,1===l.selectedMode);e(n,28,0,"mode",i);var s=e(n,37,0,2===l.selectedMode);e(n,36,0,"mode",s);var r=e(n,47,0,!l.canAscend());e(n,46,0,r)}),null)}class LP{constructor(e,n){this.modalService=e,this.worldService=n,this.modalService.registerForFightReport().subscribe(e=>this.fightReport=e)}ngOnInit(){}ok(){this.fightReport=null,this.modalService.close(Pu.FIGHT_REPORT)}getAttackerName(){return this.fightReport.attacker===fu.PLAYER?this.worldService.getPlayerCountry().name:Ou.prepareCountryName(this.fightReport.attacker)}getDefenderName(){return this.fightReport.defender===fu.PLAYER?this.worldService.getPlayerCountry().name:Ou.prepareCountryName(this.fightReport.defender)}getTroopName(e){return Ou.prepareTroopName(e)}round(e){return Ou.round(e,1)}}var xP=Kl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;font-size:1.2em}#title[_ngcontent-%COMP%]{font-weight:700}#reportBody[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center;overflow-y:auto}.section[_ngcontent-%COMP%]{width:80%;display:flex;flex-direction:row;text-align:center;border-bottom:2px solid #000}.section[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex:0 0 50%;align-items:center}#skirmishes[_ngcontent-%COMP%]{width:80%;text-align:center}.sectionFull[_ngcontent-%COMP%]{width:100%}.sectionEnd[_ngcontent-%COMP%], .sectionFull[_ngcontent-%COMP%]{display:flex;flex-direction:row;text-align:center;border-bottom:2px solid #000}.sectionEnd[_ngcontent-%COMP%]{width:80%}.sectionEnd[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex:0 0 100%}.sectionFull[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:first-child{flex:0 0 45%;align-items:center}.sectionFull[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(2){flex:0 0 10%;align-items:center}.sectionFull[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(3){flex:0 0 45%;align-items:center}.section[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:first-child{border-right:2px solid #000}.section[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:last-child{padding-bottom:10px}.won[_ngcontent-%COMP%]{color:var(--positive-colour)}.lost[_ngcontent-%COMP%]{color:var(--negative-colour)}.attdefIcon[_ngcontent-%COMP%]{height:15px}"]],data:{}});function kP(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ks(1,null,["army size bonus: ",""]))],null,(function(e,n){e(n,1,0,n.component.fightReport.attackerArmySizeBonus)}))}function FP(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ks(1,null,["",": ",""]))],null,(function(e,n){e(n,1,0,n.component.getTroopName(n.context.$implicit.troop),n.context.$implicit.size)}))}function UP(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ks(1,null,["army size bonus: ",""]))],null,(function(e,n){e(n,1,0,n.component.fightReport.defenderArmySizeBonus)}))}function HP(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ks(1,null,["",": ",""]))],null,(function(e,n){e(n,1,0,n.component.getTroopName(n.context.$implicit.troop),n.context.$implicit.size)}))}function GP(e){return qs(0,[(e()(),Ds(0,0,null,null,19,"div",[["id","skirmishes"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ks(2,null,["Skirmish ",""])),(e()(),Ds(3,0,null,null,16,"div",[["class","sectionFull"]],null,null,null,null,null)),(e()(),Ds(4,0,null,null,7,"span",[],null,null,null,null,null)),ei(5,278528,null,0,la,[Cl,Il,il,ol],{ngClass:[0,"ngClass"]},null),zs(6,{won:0,lost:1}),(e()(),Ks(7,null,[""," "])),(e()(),Ds(8,0,null,null,3,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["("])),(e()(),Ds(10,0,null,null,0,"img",[["class","attdefIcon"],["src","assets/army/attack.svg"]],null,null,null,null,null)),(e()(),Ks(11,null,["",")"])),(e()(),Ds(12,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["vs"])),(e()(),Ds(14,0,null,null,5,"span",[],null,null,null,null,null)),ei(15,278528,null,0,la,[Cl,Il,il,ol],{ngClass:[0,"ngClass"]},null),zs(16,{won:0,lost:1}),(e()(),Ks(17,null,[""," ("])),(e()(),Ds(18,0,null,null,0,"img",[["class","attdefIcon"],["src","assets/army/defense.svg"]],null,null,null,null,null)),(e()(),Ks(19,null,["",")"]))],(function(e,n){var l=e(n,6,0,n.context.$implicit.result,!n.context.$implicit.result);e(n,5,0,l);var t=e(n,16,0,!n.context.$implicit.result,n.context.$implicit.result);e(n,15,0,t)}),(function(e,n){var l=n.component;e(n,2,0,n.context.index+1),e(n,7,0,l.getTroopName(n.context.$implicit.attackerTroop)),e(n,11,0,l.round(n.context.$implicit.attack)),e(n,17,0,l.getTroopName(n.context.$implicit.defenderTroop)),e(n,19,0,l.round(n.context.$implicit.defense))}))}function BP(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(1,null,["",""]))],null,(function(e,n){e(n,1,0,n.component.getAttackerName())}))}function VP(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(1,null,["",""]))],null,(function(e,n){e(n,1,0,n.component.getDefenderName())}))}function WP(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ks(1,null,["",": ",""]))],null,(function(e,n){e(n,1,0,n.component.getTroopName(n.context.$implicit.troop),n.context.$implicit.size)}))}function YP(e){return qs(0,[(e()(),Ds(0,0,null,null,48,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"div",[["id","title"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Fight Report"])),(e()(),Ds(3,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ks(4,null,["",""])),(e()(),Ds(5,0,null,null,12,"div",[["class","section"]],null,null,null,null,null)),(e()(),Ds(6,0,null,null,5,"div",[],null,null,null,null,null)),ei(7,278528,null,0,la,[Cl,Il,il,ol],{ngClass:[0,"ngClass"]},null),zs(8,{won:0,lost:1}),(e()(),Ks(-1,null,["ATTACKER"])),(e()(),Ds(10,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ks(11,null,[""," "])),(e()(),Ds(12,0,null,null,5,"div",[],null,null,null,null,null)),ei(13,278528,null,0,la,[Cl,Il,il,ol],{ngClass:[0,"ngClass"]},null),zs(14,{won:0,lost:1}),(e()(),Ks(-1,null,["DEFENDER"])),(e()(),Ds(16,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ks(17,null,[""," "])),(e()(),Ds(18,0,null,null,28,"div",[["id","reportBody"]],null,null,null,null,null)),(e()(),Ds(19,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Armies"])),(e()(),Ds(21,0,null,null,12,"div",[["class","section"]],null,null,null,null,null)),(e()(),Ds(22,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,kP)),ei(24,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,FP)),ei(26,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ds(27,0,null,null,6,"div",[],null,null,null,null,null)),(e()(),Ds(28,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ks(29,null,["defense: ",""])),(e()(),Ms(16777216,null,null,1,null,UP)),ei(31,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,HP)),ei(33,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ms(16777216,null,null,1,null,GP)),ei(35,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ds(36,0,null,null,6,"div",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Winner army ("])),(e()(),Ms(16777216,null,null,1,null,BP)),ei(39,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,VP)),ei(41,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ks(-1,null,[") "])),(e()(),Ds(43,0,null,null,3,"div",[["class","sectionEnd"]],null,null,null,null,null)),(e()(),Ds(44,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,WP)),ei(46,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ds(47,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.ok()&&t),t}),null,null)),(e()(),Ks(-1,null,["close"]))],(function(e,n){var l=n.component,t=e(n,8,0,l.fightReport.result,!l.fightReport.result);e(n,7,0,t);var i=e(n,14,0,!l.fightReport.result,l.fightReport.result);e(n,13,0,i),e(n,24,0,l.fightReport.attackerArmySizeBonus>0),e(n,26,0,l.fightReport.attackerArmy.units),e(n,31,0,l.fightReport.defenderArmySizeBonus>0),e(n,33,0,l.fightReport.defenderArmy.units),e(n,35,0,l.fightReport.skirmish),e(n,39,0,l.fightReport.result),e(n,41,0,!l.fightReport.result),e(n,46,0,l.fightReport.armyAfterFight.units)}),(function(e,n){var l=n.component;e(n,4,0,l.fightReport.message),e(n,11,0,l.getAttackerName()),e(n,17,0,l.getDefenderName()),e(n,29,0,l.fightReport.defense)}))}function zP(e){return qs(0,[(e()(),Ds(0,0,null,null,5,"app-modal",[["id","fight-report-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==Yt(e,1).onKeydownHandler(l)&&t),t}),Rw,vw)),ei(1,4440064,null,0,Ew,[ol,il,Fp],{id:[0,"id"]},null),(e()(),Ds(2,0,null,0,2,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,YP)),ei(4,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(5,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,1,0,"fight-report-modal"),e(n,4,0,l.fightReport)}),null)}class $P{constructor(e,n){this.serializerService=e,this.modalService=n,this.exportTextArea=null,this.showMessage=!1,this.modalService.registerForOnOpen().subscribe(e=>{e===Pu.EXPORT&&this.export()})}ngOnInit(){}export(){this.exportTextArea=this.serializerService.prepareBase64()}copy(){const e=this.exportTextArea,n=document.createElement("textarea");n.id="txt",n.style.position="fixed",n.style.top="0",n.style.left="0",n.style.opacity="0",n.value=e,document.body.appendChild(n),n.select();try{if(document.execCommand("copy"))return this.showMessage=!0,setTimeout(()=>this.showMessage=!1,1500),!0}catch(l){console.error(kp.ERROR_1)}finally{document.body.removeChild(n)}return!1}}var KP=Kl({encapsulation:0,styles:[["#export-area[_ngcontent-%COMP%]{width:100%;resize:none}.modal-body[_ngcontent-%COMP%]{flex-direction:column}#buttons[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}#buttons[_ngcontent-%COMP%]{flex-direction:row;width:100%}#title[_ngcontent-%COMP%]{font-weight:800;margin-bottom:10px}"]],data:{}});function jP(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ks(-1,null,["copied..."]))],null,null)}function QP(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,0,"br",[],null,null,null,null,null))],null,null)}function qP(e){return qs(0,[(e()(),Ds(0,0,null,null,17,"app-modal",[["id","export-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==Yt(e,1).onKeydownHandler(l)&&t),t}),Rw,vw)),ei(1,4440064,null,0,Ew,[ol,il,Fp],{id:[0,"id"]},null),(e()(),Ds(2,0,null,0,14,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Ds(3,0,null,null,13,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Ds(4,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Export save"])),(e()(),Ds(6,0,null,null,1,"textarea",[["id","export-area"],["placeholder","Your save will be generated here..."],["readonly",""],["rows","20"]],null,null,null,null,null)),(e()(),Ks(7,null,["",""])),(e()(),Ds(8,0,null,null,4,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Ds(9,0,null,null,1,"button",[["id","import-button"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.export()&&t),t}),null,null)),(e()(),Ks(-1,null,["Update"])),(e()(),Ds(11,0,null,null,1,"button",[["id","copy-button"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.copy()&&t),t}),null,null)),(e()(),Ks(-1,null,["Copy to clipboard"])),(e()(),Ms(16777216,null,null,1,null,jP)),ei(14,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,QP)),ei(16,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(17,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,1,0,"export-modal"),e(n,14,0,l.showMessage),e(n,16,0,!l.showMessage)}),(function(e,n){e(n,7,0,n.component.exportTextArea)}))}class XP{constructor(e,n){this.serializerService=e,this.modalService=n}ngOnInit(){}import(){this.serializerService.import(this.importTextArea),this.importTextArea="",this.modalService.close(Pu.IMPORT)}}var ZP=Kl({encapsulation:0,styles:[["#import-area[_ngcontent-%COMP%]{width:100%;resize:none}.modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}#title[_ngcontent-%COMP%]{font-weight:800;margin-bottom:10px}"]],data:{}});function JP(e){return qs(0,[(e()(),Ds(0,0,null,null,14,"app-modal",[["id","import-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==Yt(e,1).onKeydownHandler(l)&&t),t}),Rw,vw)),ei(1,4440064,null,0,Ew,[ol,il,Fp],{id:[0,"id"]},null),(e()(),Ds(2,0,null,0,11,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Ds(3,0,null,null,10,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Ds(4,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Import save"])),(e()(),Ds(6,0,null,null,5,"textarea",[["id","import-area"],["placeholder","Paste your save here..."],["rows","20"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,7)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,7).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,7)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,7)._compositionEnd(l.target.value)&&t),"ngModelChange"===n&&(t=!1!==(i.importTextArea=l)&&t),t}),null,null)),ei(7,16384,null,0,Ag,[ol,il,[2,yg]],null,null),li(1024,null,Ig,(function(e){return[e]}),[Ag]),ei(9,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(11,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(12,0,null,null,1,"button",[["id","import-button"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.import()&&t),t}),null,null)),(e()(),Ks(-1,null,["Import"])),(e()(),Ds(14,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,1,0,"import-modal"),e(n,9,0,l.importTextArea)}),(function(e,n){e(n,6,0,Yt(n,11).ngClassUntouched,Yt(n,11).ngClassTouched,Yt(n,11).ngClassPristine,Yt(n,11).ngClassDirty,Yt(n,11).ngClassValid,Yt(n,11).ngClassInvalid,Yt(n,11).ngClassPending)}))}class eM{constructor(e,n){this.modalService=e,this.serializerService=n}ngOnInit(){}hardReset(){this.serializerService.hardReset(),this.modalService.close(Pu.HARD_RESET)}cancel(){this.modalService.close(Pu.HARD_RESET)}}var nM=Kl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{flex-direction:column;font-size:1.2em}#buttons[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}#buttons[_ngcontent-%COMP%]{flex-direction:row;width:100%}button[_ngcontent-%COMP%]{border:2px solid #000;color:#000;padding:1% 2%;text-align:center;text-decoration:none;display:inline-block;font-size:1em;margin:.5%}#hardReset[_ngcontent-%COMP%]{background-color:#5f0000;color:#fff}"]],data:{}});function lM(e){return qs(0,[(e()(),Ds(0,0,null,null,19,"app-modal",[["id","hard-reset-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==Yt(e,1).onKeydownHandler(l)&&t),t}),Rw,vw)),ei(1,4440064,null,0,Ew,[ol,il,Fp],{id:[0,"id"]},null),(e()(),Ds(2,0,null,0,16,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Ds(3,0,null,null,15,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Ds(4,0,null,null,1,"h2",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Hard Reset"])),(e()(),Ds(6,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),Ks(-1,null,[" Are you sure you want to hard reset your progress? "])),(e()(),Ds(8,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ks(-1,null,[" This will remove ALL progress and saved game (except settings and tutorial state). "])),(e()(),Ds(10,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ks(-1,null,[" You will still be able to load game from exported save. "])),(e()(),Ds(12,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ks(-1,null,[" This should only be done if you have backup save or want to start from the beginning. "])),(e()(),Ds(14,0,null,null,4,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Ds(15,0,null,null,1,"button",[["id","hardReset"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.hardReset()&&t),t}),null,null)),(e()(),Ks(-1,null,["HARD RESET"])),(e()(),Ds(17,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.cancel()&&t),t}),null,null)),(e()(),Ks(-1,null,["CANCEL"])),(e()(),Ds(19,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){e(n,1,0,"hard-reset-modal")}),null)}class tM{constructor(e,n,l){this.optionsService=e,this.servicesService=n,this.modalService=l,this.selection=0,this.lastServerAction={timestamp:0},this.saveFileMetadata={day:-1,year:-1},this.savingLoader={status:!1},this.loadingLoader={status:!1},this.checkLoader={status:!1},this.positiveColour=this.optionsService.getOption(_p.POSITIVE_COLOUR),this.negativeColour=this.optionsService.getOption(_p.NEGATIVE_COLOUR),this.playerColour=this.optionsService.getOption(_p.PLAYER_COLOUR),this.AIDiffs=Lu,l.registerForOnOpen().subscribe(e=>{e===Pu.OPTIONS&&(this.checkSave(!0),this.lastServerAction.timestamp=0)})}ngOnInit(){this.optionsSubscription||(this.optionsSubscription=this.optionsService.registerForOptionsChange().subscribe(()=>this.initOptions())),this.initOptions()}initOptions(){this.autoSaveStatus=this.optionsService.getOption(_p.AUTO_SAVE_STATUS),this.autoSavePeriod=this.optionsService.getOption(_p.AUTO_SAVE_PERIOD),this.metricStatus=this.optionsService.getOption(_p.METRIC),this.saveLogs=this.optionsService.getOption(_p.SAVE_LOGS),this.pauseOnInit=this.optionsService.getOption(_p.PAUSE_ON_INIT),this.keepReservationSettingsOnReset=this.optionsService.getOption(_p.KEEP_RESERVATION_SETTINGS_ON_RESET),this.keepManagementSettingsOnReset=this.optionsService.getOption(_p.KEEP_MANAGEMENT_SETTINGS_ON_RESET),this.keepAutoTradeOnReset=this.optionsService.getOption(_p.KEEP_AUTO_TRADE_ON_RESET),this.soundMaster=this.optionsService.getOption(_p.SOUND_MASTER),this.soundMasterVolume=this.optionsService.getOption(_p.SOUND_MASTER_VOLUME),this.soundMusic=this.optionsService.getOption(_p.SOUND_MUSIC),this.soundMusicVolume=this.optionsService.getOption(_p.SOUND_MUSIC_VOLUME),this.soundEffects=this.optionsService.getOption(_p.SOUND_EFFECTS),this.soundEffectsVolume=this.optionsService.getOption(_p.SOUND_EFFECTS_VOLUME),this.soundEffectMarket=this.optionsService.getOption(_p.SOUND_EFFECT_MARKET),this.soundEffectResearch=this.optionsService.getOption(_p.SOUND_EFFECT_RESEARCH),this.soundEffectInvasion=this.optionsService.getOption(_p.SOUND_EFFECT_INVASION),this.soundEffectSeason=this.optionsService.getOption(_p.SOUND_EFFECT_SEASON),this.visualProgressBars=this.optionsService.getOption(_p.VISUAL_PROGRESS_BARS),this.autoTextFitting=this.optionsService.getOption(_p.AUTO_TEXT_FITTING),this.pagedView=this.optionsService.getOption(_p.PAGED_VIEW),this.buildingsPerPage=this.optionsService.getOption(_p.BUILDINGS_PER_PAGE),this.positiveColour=this.optionsService.getOption(_p.POSITIVE_COLOUR),this.negativeColour=this.optionsService.getOption(_p.NEGATIVE_COLOUR),this.playerColour=this.optionsService.getOption(_p.PLAYER_COLOUR),this.AIDifficulty=this.optionsService.getOption(_p.AI_DIFFICULTY)}close(){this.modalService.close(Pu.OPTIONS)}updateOptions(){this.optionsService.setOptions([{option:_p.AUTO_SAVE_STATUS,value:this.autoSaveStatus},{option:_p.AUTO_SAVE_PERIOD,value:this.autoSavePeriod},{option:_p.METRIC,value:this.metricStatus},{option:_p.SAVE_LOGS,value:this.saveLogs},{option:_p.PAUSE_ON_INIT,value:this.pauseOnInit},{option:_p.KEEP_RESERVATION_SETTINGS_ON_RESET,value:this.keepReservationSettingsOnReset},{option:_p.KEEP_MANAGEMENT_SETTINGS_ON_RESET,value:this.keepManagementSettingsOnReset},{option:_p.KEEP_AUTO_TRADE_ON_RESET,value:this.keepAutoTradeOnReset},{option:_p.SOUND_MASTER,value:this.soundMaster},{option:_p.SOUND_MASTER_VOLUME,value:this.soundMasterVolume},{option:_p.SOUND_MUSIC,value:this.soundMusic},{option:_p.SOUND_MUSIC_VOLUME,value:this.soundMusicVolume},{option:_p.SOUND_EFFECTS,value:this.soundEffects},{option:_p.SOUND_EFFECTS_VOLUME,value:this.soundEffectsVolume},{option:_p.SOUND_EFFECT_MARKET,value:this.soundEffectMarket},{option:_p.SOUND_EFFECT_RESEARCH,value:this.soundEffectResearch},{option:_p.SOUND_EFFECT_INVASION,value:this.soundEffectInvasion},{option:_p.SOUND_EFFECT_SEASON,value:this.soundEffectSeason},{option:_p.VISUAL_PROGRESS_BARS,value:this.visualProgressBars},{option:_p.AUTO_TEXT_FITTING,value:this.autoTextFitting},{option:_p.PAGED_VIEW,value:this.pagedView},{option:_p.BUILDINGS_PER_PAGE,value:this.buildingsPerPage},{option:_p.POSITIVE_COLOUR,value:this.positiveColour},{option:_p.NEGATIVE_COLOUR,value:this.negativeColour},{option:_p.PLAYER_COLOUR,value:this.playerColour},{option:_p.AI_DIFFICULTY,value:this.AIDifficulty}])}updateSaveOption(){this.autoSavePeriod=Number(this.autoSavePeriod),this.autoSavePeriod<1&&(this.autoSavePeriod=1),this.autoSavePeriod%1!=0&&(this.autoSavePeriod=Math.floor(this.autoSavePeriod)),this.autoSavePeriod>60&&(this.autoSavePeriod=60),this.updateOptions()}setPositiveColour(){this.optionsService.setPositiveColour(this.positiveColour)}setNegativeColour(){this.optionsService.setNegativeColour(this.negativeColour)}setPlayerColour(){this.optionsService.setPlayerColour(this.playerColour)}resetPositiveColour(){this.positiveColour=Xu.POSITIVE_COLOUR,this.setPositiveColour()}resetNegativeColour(){this.negativeColour=Xu.NEGATIVE_COLOUR,this.setNegativeColour()}resetPlayerColour(){this.playerColour=Xu.PLAYER_COLOUR,this.setPlayerColour()}resetAll(){this.modalService.open(Pu.CONFIRM),this.modalService.setModalText("Are you sure you want to reset all settings (in all tabs) to default values?");const e=this.modalService.registerForConfirmation().subscribe(n=>{e.unsubscribe(),n&&this.optionsService.init()})}getTimestamp(){return(new Date).getTime()}cloudSave(){this.getTimestamp()-this.lastServerAction.timestamp>15e3?this.servicesService.getService(bu.SERIALIZER).cloudSave(this.savingLoader,this.saveFileMetadata,this.lastServerAction):this.modalService.info("You must wait for "+(15-Math.ceil((this.getTimestamp()-this.lastServerAction.timestamp)/1e3))+"s before next cloud save")}cloudLoad(){this.getTimestamp()-this.lastServerAction.timestamp>15e3?this.servicesService.getService(bu.SERIALIZER).cloudLoad(this.loadingLoader,this.lastServerAction):this.modalService.info("You must wait for "+(15-Math.ceil((this.getTimestamp()-this.lastServerAction.timestamp)/1e3))+"s before next cloud load")}checkSave(e=!1){e||this.getTimestamp()-this.lastServerAction.timestamp>5e3?this.servicesService.getService(bu.SERIALIZER).cloudCheck(e,this.checkLoader,this.saveFileMetadata,this.lastServerAction):this.modalService.info("You must wait for "+(5-Math.ceil((this.getTimestamp()-this.lastServerAction.timestamp)/1e3))+"s before next save lookup")}getSoundMasterVolume(){return this.optionsService.getOption(_p.SOUND_MASTER_VOLUME)}changeSoundMasterVolume(e){this.soundMasterVolume=e.target.value,this.updateOptions()}getSoundMusicVolume(){return this.optionsService.getOption(_p.SOUND_MUSIC_VOLUME)}changeSoundMusicVolume(e){this.soundMusicVolume=e.target.value,this.updateOptions()}getSoundEffectsVolume(){return this.optionsService.getOption(_p.SOUND_EFFECTS_VOLUME)}changeSoundEffectsVolume(e){this.soundEffectsVolume=e.target.value,this.updateOptions()}isKongregate(){return Qu.target===ju.DEV||Qu.target===ju.KONGREGATE}}var iM=Kl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{text-align:center;font-size:1.2em}#title[_ngcontent-%COMP%]{text-align:center;font-weight:800;display:inline-block}.options[_ngcontent-%COMP%]{text-align:left}#autoSavePeriod[_ngcontent-%COMP%]{width:4ch;text-align:right}.slidecontainer[_ngcontent-%COMP%]{display:inline-block;width:150px}.slider[_ngcontent-%COMP%]{-webkit-appearance:none;width:100%;height:10px;border-radius:5px;background:var(--passive-colour);outline:none;opacity:.7;transition:opacity .2s}.slider[_ngcontent-%COMP%]:hover{opacity:1}.slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:15px;height:15px;border-radius:50%;background:var(--active-colour);cursor:pointer}.slider[_ngcontent-%COMP%]::-moz-range-thumb{width:15px;height:15px;border-radius:50%;background:var(--active-colour);cursor:pointer}.soundVolumeLabel[_ngcontent-%COMP%]{display:inline-block;width:250px}#buildingPerPage[_ngcontent-%COMP%]{width:5ch}#sections[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%}#sections[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:10px;font-size:1.2em;background-color:var(--passive-colour);border:1px solid #000;cursor:pointer}#sections[_ngcontent-%COMP%] > div.x[_ngcontent-%COMP%]{background-color:var(--active-colour)}#refresh[_ngcontent-%COMP%]{padding:4px 4px 0;align-items:center}#refreshIMG[_ngcontent-%COMP%]{height:20px}"]],data:{}});function sM(e){return qs(0,[(e()(),Ds(0,0,null,null,0,"div",[["class","loader"]],null,null,null,null,null))],null,null)}function rM(e){return qs(0,[(e()(),Ds(0,0,null,null,0,"div",[["class","loader"]],null,null,null,null,null))],null,null)}function uM(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["No save file on the server"]))],null,null)}function oM(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(1,null,["save for day: ",", year: ",""]))],null,(function(e,n){var l=n.component;e(n,1,0,l.saveFileMetadata.day,l.saveFileMetadata.year)}))}function aM(e){return qs(0,[(e()(),Ds(0,0,null,null,0,"img",[["id","refreshIMG"],["src","assets/refresh.svg"]],null,null,null,null,null))],null,null)}function cM(e){return qs(0,[(e()(),Ds(0,0,null,null,0,"div",[["class","loader"]],null,null,null,null,null))],null,null)}function hM(e){return qs(0,[(e()(),Ds(0,0,null,null,21,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Cloud saving"])),(e()(),Ds(3,0,null,null,3,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.cloudSave()&&t),t}),null,null)),(e()(),Ks(-1,null,[" Cloud save "])),(e()(),Ms(16777216,null,null,1,null,sM)),ei(6,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(7,0,null,null,3,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.cloudLoad()&&t),t}),null,null)),(e()(),Ks(-1,null,[" Cloud load "])),(e()(),Ms(16777216,null,null,1,null,rM)),ei(10,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(11,0,null,null,10,"div",[],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,uM)),ei(13,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,oM)),ei(15,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(16,0,null,null,4,"button",[["id","refresh"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.checkSave()&&t),t}),null,null)),(e()(),Ms(16777216,null,null,1,null,aM)),ei(18,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,cM)),ei(20,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(21,0,null,null,0,"br",[],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,6,0,l.savingLoader.status),e(n,10,0,l.loadingLoader.status),e(n,13,0,l.saveFileMetadata.day<0),e(n,15,0,l.saveFileMetadata.day>0),e(n,18,0,!l.checkLoader.status),e(n,20,0,l.checkLoader.status)}),null)}function dM(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),Ks(-1,null,[" Cloud save is currently only available at "])),(e()(),Ds(2,0,null,null,1,"a",[["href","https://www.kongregate.com/games/Xamer/villager-kings"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Kongregate Villager Kings"]))],null,null)}function gM(e){return qs(0,[(e()(),Ds(0,0,null,null,82,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Game options"])),(e()(),Ms(16777216,null,null,1,null,hM)),ei(4,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,dM)),ei(6,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(7,0,null,null,75,"div",[["class","options"]],null,null,null,null,null)),(e()(),Ds(8,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Game options"])),(e()(),Ds(10,0,null,null,5,"input",[["id","autoSaveStatus"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,11).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==Yt(e,11).onTouched()&&t),"change"===n&&(t=!1!==i.updateOptions()&&t),"ngModelChange"===n&&(t=!1!==(i.autoSaveStatus=l)&&t),t}),null,null)),ei(11,16384,null,0,bg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[bg]),ei(13,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(15,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(16,0,null,null,1,"label",[["for","autoSaveStatus"]],null,null,null,null,null)),(e()(),Ks(-1,null,["auto save on/off "])),(e()(),Ds(18,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(19,0,null,null,6,"input",[["id","autoSavePeriod"],["max","60"],["min","1"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,20)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,20).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,20)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,20)._compositionEnd(l.target.value)&&t),"input"===n&&(t=!1!==Yt(e,21).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,21).onTouched()&&t),"change"===n&&(t=!1!==i.updateSaveOption()&&t),"ngModelChange"===n&&(t=!1!==(i.autoSavePeriod=l)&&t),t}),null,null)),ei(20,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(21,16384,null,0,Vg,[ol,il],null,null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,Vg]),ei(23,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(25,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ks(-1,null,[" minutes "])),(e()(),Ds(27,0,null,null,1,"label",[["for","autoSavePeriod"]],null,null,null,null,null)),(e()(),Ks(-1,null,["auto save period "])),(e()(),Ds(29,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(30,0,null,null,5,"input",[["id","metricStatus"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,31).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==Yt(e,31).onTouched()&&t),"change"===n&&(t=!1!==i.updateOptions()&&t),"ngModelChange"===n&&(t=!1!==(i.metricStatus=l)&&t),t}),null,null)),ei(31,16384,null,0,bg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[bg]),ei(33,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(35,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(36,0,null,null,1,"label",[["for","metricStatus"]],null,null,null,null,null)),(e()(),Ks(-1,null,["use metric units"])),(e()(),Ds(38,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(39,0,null,null,5,"input",[["id","saveLogsStatus"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,40).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==Yt(e,40).onTouched()&&t),"change"===n&&(t=!1!==i.updateOptions()&&t),"ngModelChange"===n&&(t=!1!==(i.saveLogs=l)&&t),t}),null,null)),ei(40,16384,null,0,bg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[bg]),ei(42,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(44,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(45,0,null,null,1,"label",[["for","saveLogsStatus"]],null,null,null,null,null)),(e()(),Ks(-1,null,["save logs (up to 100 entries)"])),(e()(),Ds(47,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(48,0,null,null,5,"input",[["id","pauseOnInit"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,49).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==Yt(e,49).onTouched()&&t),"change"===n&&(t=!1!==i.updateOptions()&&t),"ngModelChange"===n&&(t=!1!==(i.pauseOnInit=l)&&t),t}),null,null)),ei(49,16384,null,0,bg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[bg]),ei(51,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(53,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(54,0,null,null,1,"label",[["for","pauseOnInit"]],null,null,null,null,null)),(e()(),Ks(-1,null,["pause the game on page refresh"])),(e()(),Ds(56,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(57,0,null,null,5,"input",[["id","keepReservationSettings"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,58).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==Yt(e,58).onTouched()&&t),"change"===n&&(t=!1!==i.updateOptions()&&t),"ngModelChange"===n&&(t=!1!==(i.keepReservationSettingsOnReset=l)&&t),t}),null,null)),ei(58,16384,null,0,bg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[bg]),ei(60,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(62,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(63,0,null,null,1,"label",[["for","keepReservationSettings"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Keep reservation settings active over resets and abdications"])),(e()(),Ds(65,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(66,0,null,null,5,"input",[["id","keepManagementSettings"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,67).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==Yt(e,67).onTouched()&&t),"change"===n&&(t=!1!==i.updateOptions()&&t),"ngModelChange"===n&&(t=!1!==(i.keepManagementSettingsOnReset=l)&&t),t}),null,null)),ei(67,16384,null,0,bg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[bg]),ei(69,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(71,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(72,0,null,null,1,"label",[["for","keepManagementSettings"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Keep management settings over resets and abdications"])),(e()(),Ds(74,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(75,0,null,null,5,"input",[["id","keepAutoTradeOnReset"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,76).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==Yt(e,76).onTouched()&&t),"change"===n&&(t=!1!==i.updateOptions()&&t),"ngModelChange"===n&&(t=!1!==(i.keepAutoTradeOnReset=l)&&t),t}),null,null)),ei(76,16384,null,0,bg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[bg]),ei(78,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(80,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(81,0,null,null,1,"label",[["for","keepAutoTradeOnReset"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Keep auto trade enabled after resets and abdications"]))],(function(e,n){var l=n.component;e(n,4,0,l.isKongregate()),e(n,6,0,!l.isKongregate()),e(n,13,0,l.autoSaveStatus),e(n,23,0,l.autoSavePeriod),e(n,33,0,l.metricStatus),e(n,42,0,l.saveLogs),e(n,51,0,l.pauseOnInit),e(n,60,0,l.keepReservationSettingsOnReset),e(n,69,0,l.keepManagementSettingsOnReset),e(n,78,0,l.keepAutoTradeOnReset)}),(function(e,n){e(n,10,0,Yt(n,15).ngClassUntouched,Yt(n,15).ngClassTouched,Yt(n,15).ngClassPristine,Yt(n,15).ngClassDirty,Yt(n,15).ngClassValid,Yt(n,15).ngClassInvalid,Yt(n,15).ngClassPending),e(n,19,0,Yt(n,25).ngClassUntouched,Yt(n,25).ngClassTouched,Yt(n,25).ngClassPristine,Yt(n,25).ngClassDirty,Yt(n,25).ngClassValid,Yt(n,25).ngClassInvalid,Yt(n,25).ngClassPending),e(n,30,0,Yt(n,35).ngClassUntouched,Yt(n,35).ngClassTouched,Yt(n,35).ngClassPristine,Yt(n,35).ngClassDirty,Yt(n,35).ngClassValid,Yt(n,35).ngClassInvalid,Yt(n,35).ngClassPending),e(n,39,0,Yt(n,44).ngClassUntouched,Yt(n,44).ngClassTouched,Yt(n,44).ngClassPristine,Yt(n,44).ngClassDirty,Yt(n,44).ngClassValid,Yt(n,44).ngClassInvalid,Yt(n,44).ngClassPending),e(n,48,0,Yt(n,53).ngClassUntouched,Yt(n,53).ngClassTouched,Yt(n,53).ngClassPristine,Yt(n,53).ngClassDirty,Yt(n,53).ngClassValid,Yt(n,53).ngClassInvalid,Yt(n,53).ngClassPending),e(n,57,0,Yt(n,62).ngClassUntouched,Yt(n,62).ngClassTouched,Yt(n,62).ngClassPristine,Yt(n,62).ngClassDirty,Yt(n,62).ngClassValid,Yt(n,62).ngClassInvalid,Yt(n,62).ngClassPending),e(n,66,0,Yt(n,71).ngClassUntouched,Yt(n,71).ngClassTouched,Yt(n,71).ngClassPristine,Yt(n,71).ngClassDirty,Yt(n,71).ngClassValid,Yt(n,71).ngClassInvalid,Yt(n,71).ngClassPending),e(n,75,0,Yt(n,80).ngClassUntouched,Yt(n,80).ngClassTouched,Yt(n,80).ngClassPristine,Yt(n,80).ngClassDirty,Yt(n,80).ngClassValid,Yt(n,80).ngClassInvalid,Yt(n,80).ngClassPending)}))}function pM(e){return qs(0,[(e()(),Ds(0,0,null,null,85,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Sound"])),(e()(),Ds(3,0,null,null,82,"div",[["class","options"]],null,null,null,null,null)),(e()(),Ds(4,0,null,null,1,"h5",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Master"])),(e()(),Ds(6,0,null,null,5,"input",[["id","soundMaster"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,7).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==Yt(e,7).onTouched()&&t),"change"===n&&(t=!1!==i.updateOptions()&&t),"ngModelChange"===n&&(t=!1!==(i.soundMaster=l)&&t),t}),null,null)),ei(7,16384,null,0,bg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[bg]),ei(9,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(11,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(12,0,null,null,1,"label",[["for","soundMaster"]],null,null,null,null,null)),(e()(),Ks(-1,null,["master sound on/off"])),(e()(),Ds(14,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(15,0,null,null,1,"label",[["class","soundVolumeLabel"],["for","soundMasterVolume"]],null,null,null,null,null)),(e()(),Ks(16,null,["master sound volume ","% "])),(e()(),Ds(17,0,null,null,1,"div",[["class","slidecontainer"]],null,null,null,null,null)),(e()(),Ds(18,0,null,null,0,"input",[["class","slider"],["id","soundMasterVolume"],["max","100"],["min","0"],["type","range"],["value","100"]],[[8,"value",0]],[[null,"input"]],(function(e,n,l){var t=!0;return"input"===n&&(t=!1!==e.component.changeSoundMasterVolume(l)&&t),t}),null,null)),(e()(),Ds(19,0,null,null,1,"h5",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Music"])),(e()(),Ds(21,0,null,null,5,"input",[["id","soundMusic"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,22).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==Yt(e,22).onTouched()&&t),"change"===n&&(t=!1!==i.updateOptions()&&t),"ngModelChange"===n&&(t=!1!==(i.soundMusic=l)&&t),t}),null,null)),ei(22,16384,null,0,bg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[bg]),ei(24,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(26,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(27,0,null,null,1,"label",[["for","soundMusic"]],null,null,null,null,null)),(e()(),Ks(-1,null,["music on/off"])),(e()(),Ds(29,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(30,0,null,null,1,"label",[["class","soundVolumeLabel"],["for","soundMusicVolume"]],null,null,null,null,null)),(e()(),Ks(31,null,["music sound volume ","% "])),(e()(),Ds(32,0,null,null,1,"div",[["class","slidecontainer"]],null,null,null,null,null)),(e()(),Ds(33,0,null,null,0,"input",[["class","slider"],["id","soundMusicVolume"],["max","100"],["min","0"],["type","range"],["value","100"]],[[8,"value",0]],[[null,"input"]],(function(e,n,l){var t=!0;return"input"===n&&(t=!1!==e.component.changeSoundMusicVolume(l)&&t),t}),null,null)),(e()(),Ds(34,0,null,null,1,"h5",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Effects"])),(e()(),Ds(36,0,null,null,5,"input",[["id","soundEffects"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,37).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==Yt(e,37).onTouched()&&t),"change"===n&&(t=!1!==i.updateOptions()&&t),"ngModelChange"===n&&(t=!1!==(i.soundEffects=l)&&t),t}),null,null)),ei(37,16384,null,0,bg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[bg]),ei(39,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(41,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(42,0,null,null,1,"label",[["for","soundEffects"]],null,null,null,null,null)),(e()(),Ks(-1,null,["effects on/off"])),(e()(),Ds(44,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(45,0,null,null,1,"label",[["class","soundVolumeLabel"],["for","soundEffectsVolume"]],null,null,null,null,null)),(e()(),Ks(46,null,["effects sound volume ","% "])),(e()(),Ds(47,0,null,null,1,"div",[["class","slidecontainer"]],null,null,null,null,null)),(e()(),Ds(48,0,null,null,0,"input",[["class","slider"],["id","soundEffectsVolume"],["max","100"],["min","0"],["type","range"],["value","100"]],[[8,"value",0]],[[null,"input"]],(function(e,n,l){var t=!0;return"input"===n&&(t=!1!==e.component.changeSoundEffectsVolume(l)&&t),t}),null,null)),(e()(),Ds(49,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(50,0,null,null,5,"input",[["id","soundEffectMarket"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,51).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==Yt(e,51).onTouched()&&t),"change"===n&&(t=!1!==i.updateOptions()&&t),"ngModelChange"===n&&(t=!1!==(i.soundEffectMarket=l)&&t),t}),null,null)),ei(51,16384,null,0,bg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[bg]),ei(53,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(55,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(56,0,null,null,1,"label",[["for","soundEffectMarket"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Play sound when merchant arrives"])),(e()(),Ds(58,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(59,0,null,null,5,"input",[["id","soundEffectResearch"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,60).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==Yt(e,60).onTouched()&&t),"change"===n&&(t=!1!==i.updateOptions()&&t),"ngModelChange"===n&&(t=!1!==(i.soundEffectResearch=l)&&t),t}),null,null)),ei(60,16384,null,0,bg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[bg]),ei(62,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(64,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(65,0,null,null,1,"label",[["for","soundEffectResearch"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Play sound when research is finished"])),(e()(),Ds(67,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(68,0,null,null,5,"input",[["id","soundEffectInvasion"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,69).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==Yt(e,69).onTouched()&&t),"change"===n&&(t=!1!==i.updateOptions()&&t),"ngModelChange"===n&&(t=!1!==(i.soundEffectInvasion=l)&&t),t}),null,null)),ei(69,16384,null,0,bg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[bg]),ei(71,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(73,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(74,0,null,null,1,"label",[["for","soundEffectInvasion"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Play sound when invasion is coming"])),(e()(),Ds(76,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(77,0,null,null,5,"input",[["id","soundEffectSeason"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,78).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==Yt(e,78).onTouched()&&t),"change"===n&&(t=!1!==i.updateOptions()&&t),"ngModelChange"===n&&(t=!1!==(i.soundEffectSeason=l)&&t),t}),null,null)),ei(78,16384,null,0,bg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[bg]),ei(80,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(82,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(83,0,null,null,1,"label",[["for","soundEffectSeason"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Play sound when season change"])),(e()(),Ds(85,0,null,null,0,"br",[],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,9,0,l.soundMaster),e(n,24,0,l.soundMusic),e(n,39,0,l.soundEffects),e(n,53,0,l.soundEffectMarket),e(n,62,0,l.soundEffectResearch),e(n,71,0,l.soundEffectInvasion),e(n,80,0,l.soundEffectSeason)}),(function(e,n){var l=n.component;e(n,6,0,Yt(n,11).ngClassUntouched,Yt(n,11).ngClassTouched,Yt(n,11).ngClassPristine,Yt(n,11).ngClassDirty,Yt(n,11).ngClassValid,Yt(n,11).ngClassInvalid,Yt(n,11).ngClassPending),e(n,16,0,l.getSoundMasterVolume()),e(n,18,0,l.getSoundMasterVolume()),e(n,21,0,Yt(n,26).ngClassUntouched,Yt(n,26).ngClassTouched,Yt(n,26).ngClassPristine,Yt(n,26).ngClassDirty,Yt(n,26).ngClassValid,Yt(n,26).ngClassInvalid,Yt(n,26).ngClassPending),e(n,31,0,l.getSoundMusicVolume()),e(n,33,0,l.getSoundMusicVolume()),e(n,36,0,Yt(n,41).ngClassUntouched,Yt(n,41).ngClassTouched,Yt(n,41).ngClassPristine,Yt(n,41).ngClassDirty,Yt(n,41).ngClassValid,Yt(n,41).ngClassInvalid,Yt(n,41).ngClassPending),e(n,46,0,l.getSoundEffectsVolume()),e(n,48,0,l.getSoundEffectsVolume()),e(n,50,0,Yt(n,55).ngClassUntouched,Yt(n,55).ngClassTouched,Yt(n,55).ngClassPristine,Yt(n,55).ngClassDirty,Yt(n,55).ngClassValid,Yt(n,55).ngClassInvalid,Yt(n,55).ngClassPending),e(n,59,0,Yt(n,64).ngClassUntouched,Yt(n,64).ngClassTouched,Yt(n,64).ngClassPristine,Yt(n,64).ngClassDirty,Yt(n,64).ngClassValid,Yt(n,64).ngClassInvalid,Yt(n,64).ngClassPending),e(n,68,0,Yt(n,73).ngClassUntouched,Yt(n,73).ngClassTouched,Yt(n,73).ngClassPristine,Yt(n,73).ngClassDirty,Yt(n,73).ngClassValid,Yt(n,73).ngClassInvalid,Yt(n,73).ngClassPending),e(n,77,0,Yt(n,82).ngClassUntouched,Yt(n,82).ngClassTouched,Yt(n,82).ngClassPristine,Yt(n,82).ngClassDirty,Yt(n,82).ngClassValid,Yt(n,82).ngClassInvalid,Yt(n,82).ngClassPending)}))}function mM(e){return qs(0,[(e()(),Ds(0,0,null,null,34,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Game difficulty"])),(e()(),Ds(3,0,null,null,31,"div",[["class","options"]],null,null,null,null,null)),(e()(),Ds(4,0,null,null,1,"h5",[],null,null,null,null,null)),(e()(),Ks(-1,null,["AI strength"])),(e()(),Ds(6,0,null,null,6,"input",[["id","AIeasy"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,7)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,7).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,7)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,7)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==Yt(e,8).onChange()&&t),"blur"===n&&(t=!1!==Yt(e,8).onTouched()&&t),"change"===n&&(t=!1!==i.updateOptions()&&t),"ngModelChange"===n&&(t=!1!==(i.AIDifficulty=l)&&t),t}),null,null)),ei(7,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(8,212992,null,0,Yg,[ol,il,Wg,Mn],{value:[0,"value"]},null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,Yg]),ei(10,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(12,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(13,0,null,null,1,"label",[["for","AIeasy"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Easy"])),(e()(),Ds(15,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(16,0,null,null,6,"input",[["id","AImedium"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,17)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,17).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,17)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,17)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==Yt(e,18).onChange()&&t),"blur"===n&&(t=!1!==Yt(e,18).onTouched()&&t),"change"===n&&(t=!1!==i.updateOptions()&&t),"ngModelChange"===n&&(t=!1!==(i.AIDifficulty=l)&&t),t}),null,null)),ei(17,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(18,212992,null,0,Yg,[ol,il,Wg,Mn],{value:[0,"value"]},null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,Yg]),ei(20,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(22,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(23,0,null,null,1,"label",[["for","AImedium"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Medium"])),(e()(),Ds(25,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(26,0,null,null,6,"input",[["id","AIhard"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,27)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,27).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,27)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,27)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==Yt(e,28).onChange()&&t),"blur"===n&&(t=!1!==Yt(e,28).onTouched()&&t),"change"===n&&(t=!1!==i.updateOptions()&&t),"ngModelChange"===n&&(t=!1!==(i.AIDifficulty=l)&&t),t}),null,null)),ei(27,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(28,212992,null,0,Yg,[ol,il,Wg,Mn],{value:[0,"value"]},null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,Yg]),ei(30,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(32,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(33,0,null,null,1,"label",[["for","AIhard"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Hard"]))],(function(e,n){var l=n.component;e(n,8,0,l.AIDiffs.EASY),e(n,10,0,l.AIDifficulty),e(n,18,0,l.AIDiffs.MEDIUM),e(n,20,0,l.AIDifficulty),e(n,28,0,l.AIDiffs.HARD),e(n,30,0,l.AIDifficulty)}),(function(e,n){e(n,6,0,Yt(n,12).ngClassUntouched,Yt(n,12).ngClassTouched,Yt(n,12).ngClassPristine,Yt(n,12).ngClassDirty,Yt(n,12).ngClassValid,Yt(n,12).ngClassInvalid,Yt(n,12).ngClassPending),e(n,16,0,Yt(n,22).ngClassUntouched,Yt(n,22).ngClassTouched,Yt(n,22).ngClassPristine,Yt(n,22).ngClassDirty,Yt(n,22).ngClassValid,Yt(n,22).ngClassInvalid,Yt(n,22).ngClassPending),e(n,26,0,Yt(n,32).ngClassUntouched,Yt(n,32).ngClassTouched,Yt(n,32).ngClassPristine,Yt(n,32).ngClassDirty,Yt(n,32).ngClassValid,Yt(n,32).ngClassInvalid,Yt(n,32).ngClassPending)}))}function fM(e){return qs(0,[(e()(),Ds(0,0,null,null,40,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Performance options"])),(e()(),Ds(3,0,null,null,37,"div",[["class","options"]],null,null,null,null,null)),(e()(),Ds(4,0,null,null,5,"input",[["id","pagedView"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,5).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==Yt(e,5).onTouched()&&t),"change"===n&&(t=!1!==i.updateOptions()&&t),"ngModelChange"===n&&(t=!1!==(i.pagedView=l)&&t),t}),null,null)),ei(5,16384,null,0,bg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[bg]),ei(7,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(9,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(10,0,null,null,1,"label",[["for","pagedView"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Display buildings in pages instead of all at once"])),(e()(),Ds(12,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(13,0,null,null,6,"input",[["id","buildingPerPage"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,14)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,14).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,14)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,14)._compositionEnd(l.target.value)&&t),"input"===n&&(t=!1!==Yt(e,15).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,15).onTouched()&&t),"change"===n&&(t=!1!==i.updateOptions()&&t),"ngModelChange"===n&&(t=!1!==(i.buildingsPerPage=l)&&t),t}),null,null)),ei(14,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(15,16384,null,0,Vg,[ol,il],null,null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,Vg]),ei(17,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(19,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(20,0,null,null,1,"label",[["for","buildingPerPage"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Number of buildings on one page"])),(e()(),Ds(22,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(23,0,null,null,5,"input",[["id","visualProgressBars"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,24).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==Yt(e,24).onTouched()&&t),"change"===n&&(t=!1!==i.updateOptions()&&t),"ngModelChange"===n&&(t=!1!==(i.visualProgressBars=l)&&t),t}),null,null)),ei(24,16384,null,0,bg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[bg]),ei(26,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(28,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(29,0,null,null,1,"label",[["for","visualProgressBars"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Display moving progress bars (on) or just text (off)"])),(e()(),Ds(31,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(32,0,null,null,5,"input",[["id","autoTextFitting"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,33).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==Yt(e,33).onTouched()&&t),"change"===n&&(t=!1!==i.updateOptions()&&t),"ngModelChange"===n&&(t=!1!==(i.autoTextFitting=l)&&t),t}),null,null)),ei(33,16384,null,0,bg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[bg]),ei(35,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(37,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(38,0,null,null,1,"label",[["for","autoTextFitting"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Buildings names and effect font size will be automatically recalculated on change"])),(e()(),Ds(40,0,null,null,0,"br",[],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,7,0,l.pagedView),e(n,17,0,l.buildingsPerPage),e(n,26,0,l.visualProgressBars),e(n,35,0,l.autoTextFitting)}),(function(e,n){e(n,4,0,Yt(n,9).ngClassUntouched,Yt(n,9).ngClassTouched,Yt(n,9).ngClassPristine,Yt(n,9).ngClassDirty,Yt(n,9).ngClassValid,Yt(n,9).ngClassInvalid,Yt(n,9).ngClassPending),e(n,13,0,Yt(n,19).ngClassUntouched,Yt(n,19).ngClassTouched,Yt(n,19).ngClassPristine,Yt(n,19).ngClassDirty,Yt(n,19).ngClassValid,Yt(n,19).ngClassInvalid,Yt(n,19).ngClassPending),e(n,23,0,Yt(n,28).ngClassUntouched,Yt(n,28).ngClassTouched,Yt(n,28).ngClassPristine,Yt(n,28).ngClassDirty,Yt(n,28).ngClassValid,Yt(n,28).ngClassInvalid,Yt(n,28).ngClassPending),e(n,32,0,Yt(n,37).ngClassUntouched,Yt(n,37).ngClassTouched,Yt(n,37).ngClassPristine,Yt(n,37).ngClassDirty,Yt(n,37).ngClassValid,Yt(n,37).ngClassInvalid,Yt(n,37).ngClassPending)}))}function SM(e){return qs(0,[(e()(),Ds(0,0,null,null,36,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Display options"])),(e()(),Ds(3,0,null,null,33,"div",[["class","options"]],null,null,null,null,null)),(e()(),Ds(4,0,null,null,5,"input",[["id","positiveColour"],["type","color"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,5)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,5).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,5)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,5)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==i.setPositiveColour()&&t),"ngModelChange"===n&&(t=!1!==(i.positiveColour=l)&&t),t}),null,null)),ei(5,16384,null,0,Ag,[ol,il,[2,yg]],null,null),li(1024,null,Ig,(function(e){return[e]}),[Ag]),ei(7,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(9,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(10,0,null,null,1,"label",[["for","positiveColour"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Font colour for positive effects"])),(e()(),Ds(12,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.resetPositiveColour()&&t),t}),null,null)),(e()(),Ks(-1,null,["reset to default"])),(e()(),Ds(14,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(15,0,null,null,5,"input",[["id","negativeColour"],["type","color"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,16)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,16).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,16)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,16)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==i.setNegativeColour()&&t),"ngModelChange"===n&&(t=!1!==(i.negativeColour=l)&&t),t}),null,null)),ei(16,16384,null,0,Ag,[ol,il,[2,yg]],null,null),li(1024,null,Ig,(function(e){return[e]}),[Ag]),ei(18,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(20,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(21,0,null,null,1,"label",[["for","negativeColour"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Font colour for negative effects"])),(e()(),Ds(23,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.resetNegativeColour()&&t),t}),null,null)),(e()(),Ks(-1,null,["reset to default"])),(e()(),Ds(25,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(26,0,null,null,5,"input",[["id","playerColour"],["type","color"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,27)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,27).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,27)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,27)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==i.setPlayerColour()&&t),"ngModelChange"===n&&(t=!1!==(i.playerColour=l)&&t),t}),null,null)),ei(27,16384,null,0,Ag,[ol,il,[2,yg]],null,null),li(1024,null,Ig,(function(e){return[e]}),[Ag]),ei(29,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(31,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(32,0,null,null,1,"label",[["for","playerColour"]],null,null,null,null,null)),(e()(),Ks(-1,null,["World map player regions colour"])),(e()(),Ds(34,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.resetPlayerColour()&&t),t}),null,null)),(e()(),Ks(-1,null,["reset to default"])),(e()(),Ds(36,0,null,null,0,"br",[],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,7,0,l.positiveColour),e(n,18,0,l.negativeColour),e(n,29,0,l.playerColour)}),(function(e,n){e(n,4,0,Yt(n,9).ngClassUntouched,Yt(n,9).ngClassTouched,Yt(n,9).ngClassPristine,Yt(n,9).ngClassDirty,Yt(n,9).ngClassValid,Yt(n,9).ngClassInvalid,Yt(n,9).ngClassPending),e(n,15,0,Yt(n,20).ngClassUntouched,Yt(n,20).ngClassTouched,Yt(n,20).ngClassPristine,Yt(n,20).ngClassDirty,Yt(n,20).ngClassValid,Yt(n,20).ngClassInvalid,Yt(n,20).ngClassPending),e(n,26,0,Yt(n,31).ngClassUntouched,Yt(n,31).ngClassTouched,Yt(n,31).ngClassPristine,Yt(n,31).ngClassDirty,Yt(n,31).ngClassValid,Yt(n,31).ngClassInvalid,Yt(n,31).ngClassPending)}))}function EM(e){return qs(0,[(e()(),Ds(0,0,null,null,44,"app-modal",[["id","options-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==Yt(e,1).onKeydownHandler(l)&&t),t}),Rw,vw)),ei(1,4440064,null,0,Ew,[ol,il,Fp],{id:[0,"id"]},null),(e()(),Ds(2,0,null,0,41,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Ds(3,0,null,null,40,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Ds(4,0,null,null,20,"div",[["id","sections"]],null,null,null,null,null)),(e()(),Ds(5,0,null,null,3,"div",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==(e.component.selection=0)&&t),t}),null,null)),ei(6,278528,null,0,la,[Cl,Il,il,ol],{ngClass:[0,"ngClass"]},null),zs(7,{x:0}),(e()(),Ks(-1,null,["General"])),(e()(),Ds(9,0,null,null,3,"div",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==(e.component.selection=1)&&t),t}),null,null)),ei(10,278528,null,0,la,[Cl,Il,il,ol],{ngClass:[0,"ngClass"]},null),zs(11,{x:0}),(e()(),Ks(-1,null,["Sound"])),(e()(),Ds(13,0,null,null,3,"div",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==(e.component.selection=2)&&t),t}),null,null)),ei(14,278528,null,0,la,[Cl,Il,il,ol],{ngClass:[0,"ngClass"]},null),zs(15,{x:0}),(e()(),Ks(-1,null,["Difficulty"])),(e()(),Ds(17,0,null,null,3,"div",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==(e.component.selection=3)&&t),t}),null,null)),ei(18,278528,null,0,la,[Cl,Il,il,ol],{ngClass:[0,"ngClass"]},null),zs(19,{x:0}),(e()(),Ks(-1,null,["Performance"])),(e()(),Ds(21,0,null,null,3,"div",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==(e.component.selection=4)&&t),t}),null,null)),ei(22,278528,null,0,la,[Cl,Il,il,ol],{ngClass:[0,"ngClass"]},null),zs(23,{x:0}),(e()(),Ks(-1,null,["Display"])),(e()(),Ms(16777216,null,null,1,null,gM)),ei(26,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,pM)),ei(28,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,mM)),ei(30,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,fM)),ei(32,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,SM)),ei(34,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(35,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(36,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(37,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(38,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.resetAll()&&t),t}),null,null)),(e()(),Ks(-1,null,["RESET ALL SETTINGS"])),(e()(),Ds(40,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(41,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(42,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.close()&&t),t}),null,null)),(e()(),Ks(-1,null,["Close"])),(e()(),Ds(44,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,1,0,"options-modal");var t=e(n,7,0,0===l.selection);e(n,6,0,t);var i=e(n,11,0,1===l.selection);e(n,10,0,i);var s=e(n,15,0,2===l.selection);e(n,14,0,s);var r=e(n,19,0,3===l.selection);e(n,18,0,r);var u=e(n,23,0,4===l.selection);e(n,22,0,u),e(n,26,0,0===l.selection),e(n,28,0,1===l.selection),e(n,30,0,2===l.selection),e(n,32,0,3===l.selection),e(n,34,0,4===l.selection)}),null)}class vM{constructor(e,n,l){this.kongregateService=e,this.royalService=n,this.modalService=l}ngOnInit(){}ok(){this.modalService.close(Pu.ROYAL)}buy(e){Qu.production?this.kongregateService.buyItem(e):(this.royalService.increaseRoyalPoints(Number(e.replace("rp_pack",""))),this.modalService.close(Pu.ROYAL))}isKongregate(){return Qu.target===ju.DEV||Qu.target===ju.KONGREGATE}}var RM=Kl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.kred[_ngcontent-%COMP%]{width:30px;height:30px;vertical-align:middle}.value[_ngcontent-%COMP%]{margin-top:5px}.entry[_ngcontent-%COMP%]{width:50%;text-align:center}#close[_ngcontent-%COMP%]{margin-top:15px}"]],data:{}});function OM(e){return qs(0,[(e()(),Ds(0,0,null,null,27,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Choose how many Royal Points you would like to buy:"])),(e()(),Ds(3,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(4,0,null,null,5,"div",[["class","entry"]],null,null,null,null,null)),(e()(),Ds(5,0,null,null,2,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.buy("rp_pack10")&&t),t}),null,null)),(e()(),Ks(-1,null,["10 "])),(e()(),Ds(7,0,null,null,0,"img",[["alt","Kreds"],["class","kred"],["src","assets/kred.png"]],null,null,null,null,null)),(e()(),Ds(8,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,[" 10 Royal points"])),(e()(),Ds(10,0,null,null,5,"div",[["class","entry"]],null,null,null,null,null)),(e()(),Ds(11,0,null,null,2,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.buy("rp_pack20")&&t),t}),null,null)),(e()(),Ks(-1,null,["20 "])),(e()(),Ds(13,0,null,null,0,"img",[["alt","Kreds"],["class","kred"],["src","assets/kred.png"]],null,null,null,null,null)),(e()(),Ds(14,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,[" 20 Royal points"])),(e()(),Ds(16,0,null,null,5,"div",[["class","entry"]],null,null,null,null,null)),(e()(),Ds(17,0,null,null,2,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.buy("rp_pack55")&&t),t}),null,null)),(e()(),Ks(-1,null,["50 "])),(e()(),Ds(19,0,null,null,0,"img",[["alt","Kreds"],["class","kred"],["src","assets/kred.png"]],null,null,null,null,null)),(e()(),Ds(20,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,[" 55 Royal points"])),(e()(),Ds(22,0,null,null,5,"div",[["class","entry"]],null,null,null,null,null)),(e()(),Ds(23,0,null,null,2,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.buy("rp_pack125")&&t),t}),null,null)),(e()(),Ks(-1,null,["100 "])),(e()(),Ds(25,0,null,null,0,"img",[["alt","Kreds"],["class","kred"],["src","assets/kred.png"]],null,null,null,null,null)),(e()(),Ds(26,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,[" 125 Royal points"]))],null,null)}function TM(e){return qs(0,[(e()(),Ds(0,0,null,null,6,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,5,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Buying Royal Points is currently possible only at "])),(e()(),Ds(3,0,null,null,1,"a",[["href","https://www.kongregate.com/games/Xamer/villager-kings"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Kongregate Villager Kings"])),(e()(),Ds(5,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ks(-1,null,[" You can still find Royal Points through playing the game or buying on Kongregate and moving your save file here. "]))],null,null)}function CM(e){return qs(0,[(e()(),Ds(0,0,null,null,10,"app-modal",[["id","royal-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==Yt(e,1).onKeydownHandler(l)&&t),t}),Rw,vw)),ei(1,4440064,null,0,Ew,[ol,il,Fp],{id:[0,"id"]},null),(e()(),Ds(2,0,null,0,7,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Ds(3,0,null,null,6,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,OM)),ei(5,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,TM)),ei(7,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(8,0,null,null,1,"button",[["id","close"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.ok()&&t),t}),null,null)),(e()(),Ks(-1,null,["CLOSE"])),(e()(),Ds(10,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,1,0,"royal-modal"),e(n,5,0,l.isKongregate()),e(n,7,0,!l.isKongregate())}),null)}class IM{constructor(e,n,l,t,i){this.servicesService=e,this.modalService=n,this.idService=l,this.resourcesService=t,this.worldService=i,this.colonistsHolder=0,this.troopsHolder=new Array(Object.values(pu).length).fill(0),this.expeditionDistance=1,this.discoveredLand=0,this.cannotStartReason="",this.missions=cu,this.resources=su,n.registerForMissionData().subscribe(e=>{this.missionData=e,this.troopsHolder=new Array(Object.values(pu).length).fill(0),this.colonistsHolder=0,this.discoveredLand=this.worldService.getTotalDiscovered(),this.expeditionDistance=this.calculateMaxDistance(),this.cannotStartReason=""})}ngOnInit(){}closeModal(){this.modalService.close(Pu.MISSION),this.missionData=null}conquer(){const e=this.worldService.findPath(this.missionData.originRegion.id,this.missionData.targetRegion.id,fu.PLAYER),n=new BR([]);this.getTroops(cu.CONQUER).forEach(e=>{this.troopsHolder[e]>0&&(n.addTroop(e,this.troopsHolder[e]),this.missionData.originRegion.army.removeTroop(e,this.troopsHolder[e]))}),this.worldService.addMission(new bT(this.servicesService,this.idService.getNextId(),this.worldService.getPlayerCountry(),n,e)),this.closeModal()}colonize(){if(this.resourcesService.removeRecruit(this.colonistsHolder)){const e=this.worldService.findPath(0,this.missionData.targetRegion.id,fu.PLAYER);this.worldService.addMission(new IT(this.servicesService,this.idService.getNextId(),this.worldService.getPlayerCountry(),new BR([new GR(pu.COLONIST,this.colonistsHolder)]),e)),this.closeModal()}else this.modalService.info("Not enough villagers")}plunder(){const e=this.worldService.findPath(this.missionData.originRegion.id,this.missionData.targetRegion.id,fu.PLAYER),n=new BR([]);this.getTroops(cu.PLUNDER).forEach(e=>{this.troopsHolder[e]>0&&(n.addTroop(e,this.troopsHolder[e]),this.missionData.originRegion.army.removeTroop(e,this.troopsHolder[e]))}),this.worldService.addMission(new AT(this.servicesService,this.idService.getNextId(),this.worldService.getPlayerCountry(),n,e)),this.closeModal()}move(){const e=this.worldService.findPath(this.missionData.originRegion.id,this.missionData.targetRegion.id,fu.PLAYER),n=new BR([]);this.getTroops(cu.MOVE).forEach(e=>{this.troopsHolder[e]>0&&(n.addTroop(e,this.troopsHolder[e]),this.missionData.originRegion.army.removeTroop(e,this.troopsHolder[e]))}),this.worldService.addMission(new yT(this.servicesService,this.idService.getNextId(),this.worldService.getPlayerCountry(),n,e)),this.closeModal()}spy(){const e=this.worldService.findPath(this.missionData.originRegion.id,this.missionData.targetRegion.id,fu.SPECIAL);this.worldService.addMission(new NT(this.servicesService,this.idService.getNextId(),this.worldService.getPlayerCountry(),new BR([new GR(pu.SPY,this.troopsHolder[pu.SPY])]),e)),this.missionData.originRegion.army.removeTroop(pu.SPY,this.troopsHolder[pu.SPY]),this.closeModal()}seaMove(){const e=this.worldService.findSeaPath(this.missionData.originRegion.id,this.missionData.targetRegion.id),n=new BR([]);this.getTroops(cu.SEA_MOVE).forEach(e=>{this.troopsHolder[e]>0&&(n.addTroop(e,this.troopsHolder[e]),e===pu.BOAT||e===pu.BRIGANTINE||e===pu.GALLEON?this.missionData.originRegion.navy.removeTroop(e,this.troopsHolder[e]):this.missionData.originRegion.army.removeTroop(e,this.troopsHolder[e]))}),this.worldService.addMission(new HT(this.servicesService,this.idService.getNextId(),this.worldService.getPlayerCountry(),n,e)),this.closeModal()}seaPlunder(){const e=this.worldService.findSeaPath(this.missionData.originRegion.id,this.missionData.targetRegion.id),n=new BR([]);this.getTroops(cu.SEA_PLUNDER).forEach(e=>{this.troopsHolder[e]>0&&(n.addTroop(e,this.troopsHolder[e]),e===pu.BOAT||e===pu.BRIGANTINE||e===pu.GALLEON?this.missionData.originRegion.navy.removeTroop(e,this.troopsHolder[e]):this.missionData.originRegion.army.removeTroop(e,this.troopsHolder[e]))}),this.worldService.addMission(new UT(this.servicesService,this.idService.getNextId(),this.worldService.getPlayerCountry(),n,e)),this.closeModal()}seaConquer(){const e=this.worldService.findSeaPath(this.missionData.originRegion.id,this.missionData.targetRegion.id),n=new BR([]);this.getTroops(cu.SEA_CONQUER).forEach(e=>{this.troopsHolder[e]>0&&(n.addTroop(e,this.troopsHolder[e]),e===pu.BOAT||e===pu.BRIGANTINE||e===pu.GALLEON?this.missionData.originRegion.navy.removeTroop(e,this.troopsHolder[e]):this.missionData.originRegion.army.removeTroop(e,this.troopsHolder[e]))}),this.worldService.addMission(new FT(this.servicesService,this.idService.getNextId(),this.worldService.getPlayerCountry(),n,e)),this.closeModal()}fishing(){const e=this.worldService.findSeaPath(this.missionData.originRegion.id,this.missionData.targetSeaEvent.parentId),n=new BR([]);this.getTroops(cu.FISHING).forEach(e=>{this.troopsHolder[e]>0&&(n.addTroop(e,this.troopsHolder[e]),e!==pu.BOAT&&e!==pu.BRIGANTINE&&e!==pu.GALLEON||this.missionData.originRegion.navy.removeTroop(e,this.troopsHolder[e]))}),this.worldService.addMission(new PT(this.servicesService,this.idService.getNextId(),this.worldService.getPlayerCountry(),n,e)),this.closeModal()}hunting(){const e=this.worldService.findSeaPath(this.missionData.originRegion.id,this.missionData.targetSeaEvent.parentId),n=new BR([]);this.getTroops(cu.HUNTING).forEach(e=>{this.troopsHolder[e]>0&&(n.addTroop(e,this.troopsHolder[e]),e!==pu.BOAT&&e!==pu.BRIGANTINE&&e!==pu.GALLEON||this.missionData.originRegion.navy.removeTroop(e,this.troopsHolder[e]))}),this.worldService.addMission(new MT(this.servicesService,this.idService.getNextId(),this.worldService.getPlayerCountry(),n,e)),this.closeModal()}treasure(){const e=this.worldService.findSeaPath(this.missionData.originRegion.id,this.missionData.targetSeaEvent.parentId),n=new BR([]);this.getTroops(cu.TREASURE).forEach(e=>{this.troopsHolder[e]>0&&(n.addTroop(e,this.troopsHolder[e]),e!==pu.BOAT&&e!==pu.BRIGANTINE&&e!==pu.GALLEON||this.missionData.originRegion.navy.removeTroop(e,this.troopsHolder[e]))}),this.worldService.addMission(new DT(this.servicesService,this.idService.getNextId(),this.worldService.getPlayerCountry(),n,e)),this.closeModal()}cartography(){const e=this.worldService.findSeaPath(this.missionData.originRegion.id,this.missionData.targetSeaEvent.parentId),n=new BR([]);this.getTroops(cu.CARTOGRAPHY).forEach(e=>{this.troopsHolder[e]>0&&(n.addTroop(e,this.troopsHolder[e]),e!==pu.BOAT&&e!==pu.BRIGANTINE&&e!==pu.GALLEON||this.missionData.originRegion.navy.removeTroop(e,this.troopsHolder[e]))}),this.worldService.addMission(new xT(this.servicesService,this.idService.getNextId(),this.worldService.getPlayerCountry(),n,e)),this.closeModal()}seaBattle(){const e=this.worldService.findSeaPath(this.missionData.originRegion.id,this.missionData.targetSeaEvent.parentId),n=new BR([]);this.getTroops(cu.SEA_BATTLE).forEach(e=>{this.troopsHolder[e]>0&&(n.addTroop(e,this.troopsHolder[e]),e!==pu.BOAT&&e!==pu.BRIGANTINE&&e!==pu.GALLEON||this.missionData.originRegion.navy.removeTroop(e,this.troopsHolder[e]))}),this.worldService.addMission(new kT(this.servicesService,this.idService.getNextId(),this.worldService.getPlayerCountry(),n,e)),this.closeModal()}expedition(){const e=this.worldService.findSeaPath(this.missionData.originRegion.id,-9999),n=new BR([]);this.getTroops(cu.EXPEDITION).forEach(e=>{this.troopsHolder[e]>0&&(n.addTroop(e,this.troopsHolder[e]),e===pu.BOAT||e===pu.BRIGANTINE||e===pu.GALLEON?this.missionData.originRegion.navy.removeTroop(e,this.troopsHolder[e]):this.missionData.originRegion.army.removeTroop(e,this.troopsHolder[e]))});const l=new LT(this.servicesService,this.idService.getNextId(),this.worldService.getPlayerCountry(),n,e);l.data=this.calculateExpeditionChance(),this.worldService.addMission(l),this.closeModal()}prepareViewbox(e){return e.x-65+" "+(e.y-65)+" 130 130"}isMissionAllowed(e){if(this.missionData.missionType===cu.EXPEDITION&&e===cu.EXPEDITION)return!0;if(this.missionData.targetRegionCountry)if(this.missionData.targetRegionCountry===fu.PLAYER){if(e===cu.MOVE||e===cu.SEA_MOVE&&this.isSeaAvailable())return!0}else if(this.missionData.targetRegionCountry===fu.NEUTRAL){if(e===cu.MOVE||e===cu.COLONIZE||e===cu.SEA_MOVE&&this.isSeaAvailable())return!0}else{if(e===cu.SPY)return!0;if((e===cu.PLUNDER||e===cu.CONQUER)&&this.hasPath())return!0;if((e===cu.SEA_PLUNDER||e===cu.SEA_CONQUER)&&this.hasSeaPath())return!0}else if(this.missionData.targetSeaEvent&&(this.missionData.targetSeaEvent.type===vu.FISH&&e===cu.FISHING||this.missionData.targetSeaEvent.type===vu.SHARK&&e===cu.HUNTING||this.missionData.targetSeaEvent.type===vu.TREASURE&&e===cu.TREASURE||this.missionData.targetSeaEvent.type===vu.CARTOGRAPHY&&e===cu.CARTOGRAPHY||this.missionData.targetSeaEvent.type===vu.PIRATES&&e===cu.SEA_BATTLE||this.missionData.targetSeaEvent.type===vu.PIRATES_BASE&&e===cu.SEA_BATTLE))return!0;return!1}hasPath(){return!!(this.missionData.originRegion&&this.missionData.targetRegion&&this.worldService.findPath(this.missionData.originRegion.id,this.missionData.targetRegion.id,fu.PLAYER,!0))}hasSeaPath(){return!!(this.missionData.originRegion&&this.missionData.targetRegion&&this.worldService.findSeaPath(this.missionData.originRegion.id,this.missionData.targetRegion.id,!0))}changeMission(e){this.missionData.missionType=e,e===cu.COLONIZE&&(this.missionData.originRegion=this.worldService.getRegion(0),this.missionData.originRegionColour=this.worldService.getPlayerCountry().colour)}start(){if(this.canStart()){switch(this.missionData.missionType===cu.EXPEDITION?this.getMissionCost(this.missionData.missionType).forEach(e=>{this.resourcesService.decreaseResource(e.resource,e.amount*this.getUnitsNumber()*this.expeditionDistance,"Mission",!0)}):this.getMissionCost(this.missionData.missionType).forEach(e=>{this.resourcesService.decreaseResource(e.resource,e.amount*this.getUnitsNumber(),"Mission",!0)}),this.missionData.missionType===cu.EXPEDITION&&this.resourcesService.decreaseResource(su.MAP,1,"Mission",!0),this.missionData.missionType){case cu.MOVE:this.move();break;case cu.PLUNDER:this.plunder();break;case cu.CONQUER:this.conquer();break;case cu.COLONIZE:this.colonize();break;case cu.SPY:this.spy();break;case cu.SEA_MOVE:this.seaMove();break;case cu.SEA_PLUNDER:this.seaPlunder();break;case cu.SEA_CONQUER:this.seaConquer();break;case cu.FISHING:this.fishing();break;case cu.HUNTING:this.hunting();break;case cu.TREASURE:this.treasure();break;case cu.CARTOGRAPHY:this.cartography();break;case cu.SEA_BATTLE:this.seaBattle();break;case cu.EXPEDITION:this.expedition()}this.troopsHolder=new Array(Object.values(pu).length).fill(0),this.colonistsHolder=0}}getTroopName(e){return Ou.prepareTroopName(e)}getTroops(e){return e===cu.MOVE?[pu.SPY,pu.MILITIA,pu.SPEARMAN,pu.ARCHER,pu.SWORDSMAN,pu.LIGHT_CAVALRY,pu.HORSE_ARCHER]:e===cu.SEA_MOVE?[pu.MILITIA,pu.SPEARMAN,pu.ARCHER,pu.SWORDSMAN,pu.LIGHT_CAVALRY,pu.HORSE_ARCHER,pu.BOAT,pu.BRIGANTINE,pu.GALLEON]:e===cu.SEA_PLUNDER||e===cu.SEA_CONQUER||e===cu.EXPEDITION?[pu.SPEARMAN,pu.ARCHER,pu.SWORDSMAN,pu.LIGHT_CAVALRY,pu.HORSE_ARCHER,pu.BOAT,pu.BRIGANTINE,pu.GALLEON]:e===cu.FISHING||e===cu.HUNTING||e===cu.TREASURE||e===cu.CARTOGRAPHY||e===cu.SEA_BATTLE?[pu.BOAT,pu.BRIGANTINE,pu.GALLEON]:[pu.SPEARMAN,pu.ARCHER,pu.SWORDSMAN,pu.LIGHT_CAVALRY,pu.HORSE_ARCHER]}getSpyUnits(){return[pu.SPY]}getTroop(e){return e!==pu.BOAT&&e!==pu.BRIGANTINE&&e!==pu.GALLEON?this.missionData.originRegion.army.units.find(n=>n.troop===e)||new GR(e,0):this.missionData.originRegion.navy.units.find(n=>n.troop===e)||new GR(e,0)}changeOrigin(){if(this.missionData.missionType!==cu.COLONIZE){this.modalService.open(Pu.WORLD),this.modalService.setRegionSelection(!0);const e=this.modalService.registerForReturnRegion().subscribe(n=>{e.unsubscribe(),null!==n&&(this.missionData.originRegionColour=this.worldService.getCountryByRegionId(n.id).colour,this.missionData.originRegion=n,this.troopsHolder=new Array(Object.values(pu).length).fill(0))})}else this.modalService.info("Cannot change origin region for colonization mission")}changeTarget(){this.modalService.open(Pu.WORLD),this.modalService.setRegionSelection(!1);const e=this.modalService.registerForReturnRegion().subscribe(n=>{if(e.unsubscribe(),null!==n){const e=this.worldService.getCountryByRegionId(n.id);this.missionData.targetRegionColour=e.colour,this.missionData.targetRegionCountry=e.id,this.missionData.targetRegion=n,e.id===fu.PLAYER||e.id===fu.NEUTRAL?this.isMissionAllowed(this.missionData.missionType)||(this.missionData.missionType=cu.MOVE):this.isMissionAllowed(this.missionData.missionType)||(this.missionData.missionType=cu.PLUNDER,this.troopsHolder[pu.MILITIA]=0)}})}canStart(){let e=!1;if(this.missionData.originRegion&&this.missionData.targetRegion&&this.missionData.originRegion!==this.missionData.targetRegion?this.missionData.missionType===cu.SPY&&this.troopsHolder[pu.SPY]>0?e=!0:this.missionData.missionType===cu.COLONIZE?e=this.colonistsHolder>0:this.anyTroops()&&(e=!0):this.missionData.originRegion&&this.missionData.targetSeaEvent?this.anyTroops()&&(e=!0):this.missionData.originRegion&&this.missionData.missionType===cu.EXPEDITION&&this.anyTroops()&&(e=!0),this.missionData.missionType===cu.FISHING||this.missionData.missionType===cu.HUNTING||this.missionData.missionType===cu.TREASURE||this.missionData.missionType===cu.CARTOGRAPHY||this.missionData.missionType===cu.SEA_BATTLE)this.worldService.findSeaPath(this.missionData.originRegion.id,this.missionData.targetSeaEvent.parentId,!0)||(e=!1,this.cannotStartReason="no sea path available");else if(this.missionData.originRegion&&this.missionData.targetRegion&&this.missionData.originRegion!==this.missionData.targetRegion&&this.missionData.missionType===cu.SEA_MOVE||this.missionData.missionType===cu.SEA_PLUNDER||this.missionData.missionType===cu.SEA_CONQUER||this.missionData.missionType===cu.EXPEDITION)this.missionData.missionType===cu.EXPEDITION?(this.worldService.findSeaPath(this.missionData.originRegion.id,-9999,!0)||(e=!1,this.cannotStartReason="no sea path available"),this.hasResource(su.MAP,1)||(e=!1,this.cannotStartReason="missing map resource"),this.calculateExpeditionChance()<=0&&(e=!1,this.cannotStartReason="expedition chance too low"),this.calculateExpeditionLand()<=0&&(e=!1,this.cannotStartReason="estimated land from expedition too low")):this.worldService.findSeaPath(this.missionData.originRegion.id,this.missionData.targetRegion.id,!0)||(e=!1,this.cannotStartReason="no sea path available"),e&&0===this.getNavyCapacity()&&(e=!1,this.cannotStartReason="not enough cargo capacity"),e&&this.getCargoUtilization()>this.getNavyCapacity()&&(e=!1,this.cannotStartReason="not enough cargo capacity");else if(e&&(this.worldService.findPath(this.missionData.originRegion.id,this.missionData.targetRegion.id,fu.PLAYER,!0)||(e=!1,this.cannotStartReason="no land path available")),e)for(let n=0;n<this.troopsHolder.length;n++)this.troopsHolder[n]>0&&(void 0===this.missionData.originRegion.army.getUnit(n)||this.missionData.originRegion.army.getUnit(n).size<this.troopsHolder[n])&&(e=!1,this.cannotStartReason="not enough troops available");return e&&(this.missionData.missionType!==cu.EXPEDITION?this.getMissionCost(this.missionData.missionType).forEach(n=>{this.hasResource(n.resource,n.amount*this.getUnitsNumber())||(e=!1,this.cannotStartReason="not enough resources")}):this.getMissionCost(this.missionData.missionType).forEach(n=>{this.hasResource(n.resource,n.amount*this.getUnitsNumber()*this.expeditionDistance)||(e=!1,this.cannotStartReason="not enough resources")})),e}anyTroops(){let e=!1;return this.troopsHolder.forEach(n=>{n>0&&(e=!0)}),e}getFreeWorkers(){return this.resourcesService.getPeople()<20?this.resourcesService.getPeople():20}getMissionCost(e){return fo.getMission(e).COST}getResourceName(e){return Ou.prepareResourceName(e)}getUnitsNumber(){let e=0;if(this.missionData.missionType===cu.COLONIZE)e=this.colonistsHolder;else for(let n=0;n<this.troopsHolder.length-1;n++)n!==pu.BOAT&&n!==pu.BRIGANTINE&&n!==pu.GALLEON&&(e+=this.troopsHolder[n]);return e}hasResource(e,n){return 0===this.resourcesService.hasResource(e,n,"Mission",!0)}getUnitsStrength(){let e=0;for(let n=0;n<this.troopsHolder.length;n++)this.troopsHolder[n]>0&&(this.missionData.missionType===cu.SEA_MOVE||this.missionData.missionType===cu.SEA_PLUNDER||this.missionData.missionType===cu.SEA_CONQUER?n!==pu.BOAT&&n!==pu.BRIGANTINE&&n!==pu.GALLEON&&(e+=fo.getTroop(n).STRENGTH*this.troopsHolder[n]):e+=fo.getTroop(n).STRENGTH*this.troopsHolder[n]);return e}getUnitsDefense(){let e=0;for(let n=0;n<this.troopsHolder.length;n++)this.troopsHolder[n]>0&&(this.missionData.missionType===cu.SEA_MOVE||this.missionData.missionType===cu.SEA_PLUNDER||this.missionData.missionType===cu.SEA_CONQUER?n!==pu.BOAT&&n!==pu.BRIGANTINE&&n!==pu.GALLEON&&(e+=fo.getTroop(n).DEFENSE*this.troopsHolder[n]):e+=fo.getTroop(n).DEFENSE*this.troopsHolder[n]);return e}getMissionName(){return void 0!==this.missionData.missionType?Ou.prepareMissionName(this.missionData.missionType):"no mission"}getUnitsSpeed(){let e=0;for(let n=0;n<this.troopsHolder.length;n++)this.troopsHolder[n]>0&&(0===e&&(e=fo.getTroop(n).SPEED),fo.getTroop(n).SPEED<e&&(e=fo.getTroop(n).SPEED));return e}getSeaUnitsSpeed(){let e=0;for(let n=0;n<this.troopsHolder.length;n++)this.troopsHolder[n]>0&&(n===pu.BOAT||n===pu.BRIGANTINE||n===pu.GALLEON)&&(0===e&&(e=fo.getTroop(n).SPEED),fo.getTroop(n).SPEED<e&&(e=fo.getTroop(n).SPEED));return e}selectAll(){this.getTroops(this.missionData.missionType).forEach(e=>{this.troopsHolder[e]=this.getTroop(e).size})}clearAll(){for(let e=0;e<this.troopsHolder.length;e++)this.troopsHolder[e]=0}isSeaAvailable(){return this.missionData.originRegion.neighbours.includes(-1)&&this.missionData.targetRegion.neighbours.includes(-1)}isSeaLandMission(){return this.missionData.missionType===cu.SEA_MOVE||this.missionData.missionType===cu.SEA_PLUNDER||this.missionData.missionType===cu.SEA_CONQUER||this.missionData.missionType===cu.EXPEDITION}getCargoUtilization(){let e=0;for(let l=0;l<this.troopsHolder.length-1;l++)l!==pu.ALL&&l!==pu.BOAT&&l!==pu.BRIGANTINE&&l!==pu.GALLEON&&this.troopsHolder[l]>0&&(e+=this.troopsHolder[l]*fo.getTroop(l).SIZE);let n=0;return this.missionData.missionType===cu.EXPEDITION&&this.getUnitsNumber()>0&&this.expeditionDistance>0&&(this.getMissionCost(this.missionData.missionType).forEach(e=>{n+=e.amount*this.getUnitsNumber()*this.expeditionDistance}),e+=Math.ceil(n/1e3)),e}getNavyCapacity(){let e=0;for(let n=0;n<this.troopsHolder.length-1;n++)n!==pu.BOAT&&n!==pu.BRIGANTINE&&n!==pu.GALLEON||this.troopsHolder[n]>0&&(e+=this.troopsHolder[n]*fo.getTroop(n).CARGO);return e}calculateExpeditionChance(){return this.discoveredLand=this.worldService.getTotalDiscovered(),Math.max(this.expeditionDistance-this.discoveredLand,0)}calculateMaxDistance(){return this.discoveredLand=this.worldService.getTotalDiscovered(),this.discoveredLand+100}calculateExpeditionLand(){let e=0;for(let n=0;n<this.troopsHolder.length-1;n++)n!==pu.ALL&&n!==pu.BOAT&&n!==pu.BRIGANTINE&&n!==pu.GALLEON&&this.troopsHolder[n]>0&&(e+=this.troopsHolder[n]*(fo.getTroop(n).STRENGTH+fo.getTroop(n).DEFENSE));return e}}var bM=Kl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:1.2em}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#regions[_ngcontent-%COMP%]{display:flex;flex-direction:row}.region[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:10px}.regionSVG[_ngcontent-%COMP%]{border:1px solid #000}.center[_ngcontent-%COMP%]{text-align:center}#missions[_ngcontent-%COMP%]{display:flex;flex-direction:row}.mission[_ngcontent-%COMP%]{height:50px;width:50px;border:1px solid #000;padding:5px;margin:10px;opacity:.3;cursor:pointer}.selectedMission[_ngcontent-%COMP%]{opacity:1;cursor:auto}#buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px}.slidecontainer[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-top:3px;width:300px}.slider[_ngcontent-%COMP%]{-webkit-appearance:none;width:100%;height:10px;border-radius:5px;background:var(--passive-colour);outline:none;opacity:.7;transition:opacity .2s}.slider[_ngcontent-%COMP%]:hover{opacity:1}.slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:15px;height:15px;border-radius:50%;background:var(--active-colour);cursor:pointer}.slider[_ngcontent-%COMP%]::-moz-range-thumb{width:15px;height:15px;border-radius:50%;background:var(--active-colour);cursor:pointer}.armyInput[_ngcontent-%COMP%]{width:5ch}#distanceInput[_ngcontent-%COMP%]{width:8ch}.troopLabel[_ngcontent-%COMP%]{display:inline-block;width:150px}.inactive[_ngcontent-%COMP%]{color:#5f5f5f}.inactive[_ngcontent-%COMP%]:hover{cursor:auto}.inactive[_ngcontent-%COMP%]:active{background-color:var(--passive-colour)}#secondHalf[_ngcontent-%COMP%]{font-size:.7em;padding-bottom:10px}#costs[_ngcontent-%COMP%]{text-align:center}#costList[_ngcontent-%COMP%], #totalCostList[_ngcontent-%COMP%], .icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center}.icon[_ngcontent-%COMP%]{align-items:center;margin-right:3px}.notAvailable[_ngcontent-%COMP%]{color:var(--negative-colour)}#bottomSection[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;margin-top:10px}#bottomSection[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{padding:10px}.stats[_ngcontent-%COMP%]{text-align:center}#startButton[_ngcontent-%COMP%]{white-space:nowrap}.seaIcon[_ngcontent-%COMP%]{height:50px;width:50px}.rejectionReason[_ngcontent-%COMP%]{color:var(--negative-colour);font-size:.6em}"]],data:{}});function yM(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,":svg:svg",[["class","regionSVG"]],[[1,"height",0],[1,"width",0],[1,"viewBox",0]],null,null,null,null)),(e()(),Ds(2,0,null,null,0,":svg:path",[],[[1,"fill",0],[1,"d",0],[1,"stroke",0],[1,"stroke-width",0]],null,null,null,null))],null,(function(e,n){var l=n.component;e(n,1,0,"80px","80px",l.prepareViewbox(l.missionData.originRegion.center)),e(n,2,0,l.missionData.originRegionColour,l.missionData.originRegion.path,"black","2")}))}function AM(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,0,":svg:svg",[["class","regionSVG"]],[[1,"height",0],[1,"width",0]],null,null,null,null))],null,(function(e,n){e(n,1,0,"80px","80px")}))}function NM(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,":svg:svg",[["class","regionSVG"]],[[1,"height",0],[1,"width",0],[1,"viewBox",0]],null,null,null,null)),(e()(),Ds(2,0,null,null,0,":svg:path",[],[[1,"fill",0],[1,"d",0],[1,"stroke",0],[1,"stroke-width",0]],null,null,null,null))],null,(function(e,n){var l=n.component;e(n,1,0,"80px","80px",l.prepareViewbox(l.missionData.targetRegion.center)),e(n,2,0,l.missionData.targetRegionColour,l.missionData.targetRegion.path,"black","2")}))}function _M(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,0,":svg:svg",[["class","regionSVG"]],[[1,"height",0],[1,"width",0]],null,null,null,null))],null,(function(e,n){e(n,1,0,"80px","80px")}))}function wM(e){return qs(0,[(e()(),Ds(0,0,null,null,8,"div",[["class","region"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"span",[["class","center"]],null,null,null,null,null)),(e()(),Ks(-1,null,["target"])),(e()(),Ms(16777216,null,null,1,null,NM)),ei(4,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,_M)),ei(6,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(7,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.changeTarget()&&t),t}),null,null)),(e()(),Ks(-1,null,["change"]))],(function(e,n){var l=n.component;e(n,4,0,l.missionData.targetRegion),e(n,6,0,!l.missionData.targetRegion)}),null)}function PM(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"div",[["class","mission"]],null,[[null,"click"]],(function(e,n,l){var t=!0,i=e.component;return"click"===n&&(t=!1!==i.changeMission(i.missions.COLONIZE)&&t),t}),null,null)),ei(1,278528,null,0,la,[Cl,Il,il,ol],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),zs(2,{selectedMission:0}),(e()(),Ds(3,0,null,null,0,"img",[["src","assets/army/mission/colonize.svg"]],null,null,null,null,null))],(function(e,n){var l=n.component,t=e(n,2,0,l.missionData.missionType===l.missions.COLONIZE);e(n,1,0,"mission",t)}),null)}function MM(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"div",[["class","mission"]],null,[[null,"click"]],(function(e,n,l){var t=!0,i=e.component;return"click"===n&&(t=!1!==i.changeMission(i.missions.MOVE)&&t),t}),null,null)),ei(1,278528,null,0,la,[Cl,Il,il,ol],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),zs(2,{selectedMission:0}),(e()(),Ds(3,0,null,null,0,"img",[["src","assets/army/mission/move.svg"]],null,null,null,null,null))],(function(e,n){var l=n.component,t=e(n,2,0,l.missionData.missionType===l.missions.MOVE);e(n,1,0,"mission",t)}),null)}function DM(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"div",[["class","mission"]],null,[[null,"click"]],(function(e,n,l){var t=!0,i=e.component;return"click"===n&&(t=!1!==i.changeMission(i.missions.SPY)&&t),t}),null,null)),ei(1,278528,null,0,la,[Cl,Il,il,ol],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),zs(2,{selectedMission:0}),(e()(),Ds(3,0,null,null,0,"img",[["src","assets/army/mission/spy.svg"]],null,null,null,null,null))],(function(e,n){var l=n.component,t=e(n,2,0,l.missionData.missionType===l.missions.SPY);e(n,1,0,"mission",t)}),null)}function LM(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"div",[["class","mission"]],null,[[null,"click"]],(function(e,n,l){var t=!0,i=e.component;return"click"===n&&(t=!1!==i.changeMission(i.missions.PLUNDER)&&t),t}),null,null)),ei(1,278528,null,0,la,[Cl,Il,il,ol],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),zs(2,{selectedMission:0}),(e()(),Ds(3,0,null,null,0,"img",[["src","assets/army/mission/plunder.svg"]],null,null,null,null,null))],(function(e,n){var l=n.component,t=e(n,2,0,l.missionData.missionType===l.missions.PLUNDER);e(n,1,0,"mission",t)}),null)}function xM(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"div",[["class","mission"]],null,[[null,"click"]],(function(e,n,l){var t=!0,i=e.component;return"click"===n&&(t=!1!==i.changeMission(i.missions.CONQUER)&&t),t}),null,null)),ei(1,278528,null,0,la,[Cl,Il,il,ol],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),zs(2,{selectedMission:0}),(e()(),Ds(3,0,null,null,0,"img",[["src","assets/army/mission/conquer.svg"]],null,null,null,null,null))],(function(e,n){var l=n.component,t=e(n,2,0,l.missionData.missionType===l.missions.CONQUER);e(n,1,0,"mission",t)}),null)}function kM(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"div",[["class","mission"]],null,[[null,"click"]],(function(e,n,l){var t=!0,i=e.component;return"click"===n&&(t=!1!==i.changeMission(i.missions.SEA_MOVE)&&t),t}),null,null)),ei(1,278528,null,0,la,[Cl,Il,il,ol],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),zs(2,{selectedMission:0}),(e()(),Ds(3,0,null,null,0,"img",[["src","assets/army/mission/sea_move.svg"]],null,null,null,null,null))],(function(e,n){var l=n.component,t=e(n,2,0,l.missionData.missionType===l.missions.SEA_MOVE);e(n,1,0,"mission",t)}),null)}function FM(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"div",[["class","mission"]],null,[[null,"click"]],(function(e,n,l){var t=!0,i=e.component;return"click"===n&&(t=!1!==i.changeMission(i.missions.SEA_PLUNDER)&&t),t}),null,null)),ei(1,278528,null,0,la,[Cl,Il,il,ol],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),zs(2,{selectedMission:0}),(e()(),Ds(3,0,null,null,0,"img",[["src","assets/army/mission/sea_plunder.svg"]],null,null,null,null,null))],(function(e,n){var l=n.component,t=e(n,2,0,l.missionData.missionType===l.missions.SEA_PLUNDER);e(n,1,0,"mission",t)}),null)}function UM(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"div",[["class","mission"]],null,[[null,"click"]],(function(e,n,l){var t=!0,i=e.component;return"click"===n&&(t=!1!==i.changeMission(i.missions.SEA_CONQUER)&&t),t}),null,null)),ei(1,278528,null,0,la,[Cl,Il,il,ol],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),zs(2,{selectedMission:0}),(e()(),Ds(3,0,null,null,0,"img",[["src","assets/army/mission/sea_conquer.svg"]],null,null,null,null,null))],(function(e,n){var l=n.component,t=e(n,2,0,l.missionData.missionType===l.missions.SEA_CONQUER);e(n,1,0,"mission",t)}),null)}function HM(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"div",[["class","mission"]],null,[[null,"click"]],(function(e,n,l){var t=!0,i=e.component;return"click"===n&&(t=!1!==i.changeMission(i.missions.FISHING)&&t),t}),null,null)),ei(1,278528,null,0,la,[Cl,Il,il,ol],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),zs(2,{selectedMission:0}),(e()(),Ds(3,0,null,null,0,"img",[["class","seaIcon"],["src","assets/sea/fish.svg"]],null,null,null,null,null))],(function(e,n){var l=n.component,t=e(n,2,0,l.missionData.missionType===l.missions.FISHING);e(n,1,0,"mission",t)}),null)}function GM(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"div",[["class","mission"]],null,[[null,"click"]],(function(e,n,l){var t=!0,i=e.component;return"click"===n&&(t=!1!==i.changeMission(i.missions.HUNTING)&&t),t}),null,null)),ei(1,278528,null,0,la,[Cl,Il,il,ol],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),zs(2,{selectedMission:0}),(e()(),Ds(3,0,null,null,0,"img",[["class","seaIcon"],["src","assets/sea/shark.svg"]],null,null,null,null,null))],(function(e,n){var l=n.component,t=e(n,2,0,l.missionData.missionType===l.missions.HUNTING);e(n,1,0,"mission",t)}),null)}function BM(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"div",[["class","mission"]],null,[[null,"click"]],(function(e,n,l){var t=!0,i=e.component;return"click"===n&&(t=!1!==i.changeMission(i.missions.TREASURE)&&t),t}),null,null)),ei(1,278528,null,0,la,[Cl,Il,il,ol],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),zs(2,{selectedMission:0}),(e()(),Ds(3,0,null,null,0,"img",[["class","seaIcon"],["src","assets/sea/treasure.svg"]],null,null,null,null,null))],(function(e,n){var l=n.component,t=e(n,2,0,l.missionData.missionType===l.missions.TREASURE);e(n,1,0,"mission",t)}),null)}function VM(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"div",[["class","mission"]],null,[[null,"click"]],(function(e,n,l){var t=!0,i=e.component;return"click"===n&&(t=!1!==i.changeMission(i.missions.CARTOGRAPHY)&&t),t}),null,null)),ei(1,278528,null,0,la,[Cl,Il,il,ol],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),zs(2,{selectedMission:0}),(e()(),Ds(3,0,null,null,0,"img",[["class","seaIcon"],["src","assets/sea/sextant.svg"]],null,null,null,null,null))],(function(e,n){var l=n.component,t=e(n,2,0,l.missionData.missionType===l.missions.CARTOGRAPHY);e(n,1,0,"mission",t)}),null)}function WM(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"div",[["class","mission"]],null,[[null,"click"]],(function(e,n,l){var t=!0,i=e.component;return"click"===n&&(t=!1!==i.changeMission(i.missions.SEA_BATTLE)&&t),t}),null,null)),ei(1,278528,null,0,la,[Cl,Il,il,ol],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),zs(2,{selectedMission:0}),(e()(),Ds(3,0,null,null,0,"img",[["class","seaIcon"],["src","assets/sea/pirate_flag.svg"]],null,null,null,null,null))],(function(e,n){var l=n.component,t=e(n,2,0,l.missionData.missionType===l.missions.SEA_BATTLE);e(n,1,0,"mission",t)}),null)}function YM(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"div",[["class","mission"]],null,[[null,"click"]],(function(e,n,l){var t=!0,i=e.component;return"click"===n&&(t=!1!==i.changeMission(i.missions.EXPEDITION)&&t),t}),null,null)),ei(1,278528,null,0,la,[Cl,Il,il,ol],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),zs(2,{selectedMission:0}),(e()(),Ds(3,0,null,null,0,"img",[["class","seaIcon"],["src","assets/resources/map.svg"]],null,null,null,null,null))],(function(e,n){var l=n.component,t=e(n,2,0,l.missionData.missionType===l.missions.EXPEDITION);e(n,1,0,"mission",t)}),null)}function zM(e){return qs(0,[(e()(),Ds(0,0,null,null,21,"span",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"span",[["class","troopLabel"]],null,null,null,null,null)),(e()(),Ks(2,null,["",":"])),(e()(),Ds(3,0,null,null,6,"input",[["class","armyInput"],["min","0"],["type","number"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,4)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,4).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,4)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,4)._compositionEnd(l.target.value)&&t),"input"===n&&(t=!1!==Yt(e,5).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,5).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.troopsHolder[e.parent.context.$implicit]=l)&&t),t}),null,null)),ei(4,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(5,16384,null,0,Vg,[ol,il],null,null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,Vg]),ei(7,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(9,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ks(10,null,["/"," "])),(e()(),Ds(11,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(12,0,null,null,9,"div",[["class","slidecontainer"]],null,null,null,null,null)),(e()(),Ks(-1,null,[" 0 "])),(e()(),Ds(14,0,null,null,6,"input",[["class","slider"],["min","0"],["type","range"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,15)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,15).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,15)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,15)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==Yt(e,16).onChange(l.target.value)&&t),"input"===n&&(t=!1!==Yt(e,16).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,16).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.troopsHolder[e.parent.context.$implicit]=l)&&t),t}),null,null)),ei(15,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(16,16384,null,0,zg,[ol,il],null,null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,zg]),ei(18,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(20,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ks(21,null,[" "," "]))],(function(e,n){var l=n.component;e(n,7,0,l.troopsHolder[n.parent.context.$implicit]),e(n,18,0,l.troopsHolder[n.parent.context.$implicit])}),(function(e,n){var l=n.component;e(n,2,0,l.getTroopName(n.parent.context.$implicit)),e(n,3,0,Rt(1,"",l.getTroop(n.parent.context.$implicit).size,""),Yt(n,9).ngClassUntouched,Yt(n,9).ngClassTouched,Yt(n,9).ngClassPristine,Yt(n,9).ngClassDirty,Yt(n,9).ngClassValid,Yt(n,9).ngClassInvalid,Yt(n,9).ngClassPending),e(n,10,0,l.getTroop(n.parent.context.$implicit).size),e(n,14,0,Rt(1,"",l.getTroop(n.parent.context.$implicit).size,""),Yt(n,20).ngClassUntouched,Yt(n,20).ngClassTouched,Yt(n,20).ngClassPristine,Yt(n,20).ngClassDirty,Yt(n,20).ngClassValid,Yt(n,20).ngClassInvalid,Yt(n,20).ngClassPending),e(n,21,0,l.getTroop(n.parent.context.$implicit).size)}))}function $M(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,zM)),ei(2,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){e(n,2,0,n.component.getTroop(n.context.$implicit).size>0)}),null)}function KM(e){return qs(0,[(e()(),Ds(0,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),Ds(2,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.clearAll()&&t),t}),null,null)),(e()(),Ks(-1,null,["clear all"])),(e()(),Ds(4,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.selectAll()&&t),t}),null,null)),(e()(),Ks(-1,null,["select all"])),(e()(),Ms(16777216,null,null,1,null,$M)),ei(7,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,7,0,l.getTroops(l.missionData.missionType))}),null)}function jM(e){return qs(0,[(e()(),Ds(0,0,null,null,21,"span",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"span",[["class","troopLabel"]],null,null,null,null,null)),(e()(),Ks(2,null,["",":"])),(e()(),Ds(3,0,null,null,6,"input",[["class","armyInput"],["min","0"],["type","number"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,4)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,4).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,4)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,4)._compositionEnd(l.target.value)&&t),"input"===n&&(t=!1!==Yt(e,5).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,5).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.troopsHolder[e.parent.context.$implicit]=l)&&t),t}),null,null)),ei(4,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(5,16384,null,0,Vg,[ol,il],null,null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,Vg]),ei(7,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(9,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ks(10,null,["/"," "])),(e()(),Ds(11,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(12,0,null,null,9,"div",[["class","slidecontainer"]],null,null,null,null,null)),(e()(),Ks(-1,null,[" 0 "])),(e()(),Ds(14,0,null,null,6,"input",[["class","slider"],["min","0"],["type","range"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,15)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,15).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,15)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,15)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==Yt(e,16).onChange(l.target.value)&&t),"input"===n&&(t=!1!==Yt(e,16).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,16).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.troopsHolder[e.parent.context.$implicit]=l)&&t),t}),null,null)),ei(15,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(16,16384,null,0,zg,[ol,il],null,null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,zg]),ei(18,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(20,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ks(21,null,[" "," "]))],(function(e,n){var l=n.component;e(n,7,0,l.troopsHolder[n.parent.context.$implicit]),e(n,18,0,l.troopsHolder[n.parent.context.$implicit])}),(function(e,n){var l=n.component;e(n,2,0,l.getTroopName(n.parent.context.$implicit)),e(n,3,0,Rt(1,"",l.getTroop(n.parent.context.$implicit).size,""),Yt(n,9).ngClassUntouched,Yt(n,9).ngClassTouched,Yt(n,9).ngClassPristine,Yt(n,9).ngClassDirty,Yt(n,9).ngClassValid,Yt(n,9).ngClassInvalid,Yt(n,9).ngClassPending),e(n,10,0,l.getTroop(n.parent.context.$implicit).size),e(n,14,0,Rt(1,"",l.getTroop(n.parent.context.$implicit).size,""),Yt(n,20).ngClassUntouched,Yt(n,20).ngClassTouched,Yt(n,20).ngClassPristine,Yt(n,20).ngClassDirty,Yt(n,20).ngClassValid,Yt(n,20).ngClassInvalid,Yt(n,20).ngClassPending),e(n,21,0,l.getTroop(n.parent.context.$implicit).size)}))}function QM(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,jM)),ei(2,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){e(n,2,0,n.component.getTroop(n.context.$implicit).size>0)}),null)}function qM(e){return qs(0,[(e()(),Ds(0,0,null,null,17,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),Ds(2,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.clearAll()&&t),t}),null,null)),(e()(),Ks(-1,null,["clear all"])),(e()(),Ds(4,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.selectAll()&&t),t}),null,null)),(e()(),Ks(-1,null,["select all"])),(e()(),Ms(16777216,null,null,1,null,QM)),ei(7,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ds(8,0,null,null,9,"div",[],null,null,null,null,null)),(e()(),Ds(9,0,null,null,1,"label",[["for","distanceInput"]],null,null,null,null,null)),(e()(),Ks(-1,null,["distance: "])),(e()(),Ds(11,0,null,null,6,"input",[["id","distanceInput"],["type","number"]],[[8,"min",0],[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,12)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,12).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,12)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,12)._compositionEnd(l.target.value)&&t),"input"===n&&(t=!1!==Yt(e,13).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,13).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.expeditionDistance=l)&&t),t}),null,null)),ei(12,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(13,16384,null,0,Vg,[ol,il],null,null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,Vg]),ei(15,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(17,16384,null,0,Mg,[[4,Pg]],null,null)],(function(e,n){var l=n.component;e(n,7,0,l.getTroops(l.missionData.missionType)),e(n,15,0,l.expeditionDistance)}),(function(e,n){var l=n.component;e(n,11,0,Rt(1,"",l.discoveredLand+10,""),Rt(1,"",l.calculateMaxDistance(),""),Yt(n,17).ngClassUntouched,Yt(n,17).ngClassTouched,Yt(n,17).ngClassPristine,Yt(n,17).ngClassDirty,Yt(n,17).ngClassValid,Yt(n,17).ngClassInvalid,Yt(n,17).ngClassPending)}))}function XM(e){return qs(0,[(e()(),Ds(0,0,null,null,21,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"span",[["class","troopLabel"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Colonist:"])),(e()(),Ds(3,0,null,null,6,"input",[["class","armyInput"],["min","0"],["type","number"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,4)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,4).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,4)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,4)._compositionEnd(l.target.value)&&t),"input"===n&&(t=!1!==Yt(e,5).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,5).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.colonistsHolder=l)&&t),t}),null,null)),ei(4,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(5,16384,null,0,Vg,[ol,il],null,null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,Vg]),ei(7,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(9,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ks(10,null,["/",""])),(e()(),Ds(11,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(12,0,null,null,9,"div",[["class","slidecontainer"]],null,null,null,null,null)),(e()(),Ks(-1,null,[" 0 "])),(e()(),Ds(14,0,null,null,6,"input",[["class","slider"],["min","0"],["type","range"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,15)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,15).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,15)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,15)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==Yt(e,16).onChange(l.target.value)&&t),"input"===n&&(t=!1!==Yt(e,16).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,16).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.colonistsHolder=l)&&t),t}),null,null)),ei(15,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(16,16384,null,0,zg,[ol,il],null,null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,zg]),ei(18,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(20,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ks(21,null,[" "," "]))],(function(e,n){var l=n.component;e(n,7,0,l.colonistsHolder),e(n,18,0,l.colonistsHolder)}),(function(e,n){var l=n.component;e(n,3,0,Rt(1,"",l.getFreeWorkers(),""),Yt(n,9).ngClassUntouched,Yt(n,9).ngClassTouched,Yt(n,9).ngClassPristine,Yt(n,9).ngClassDirty,Yt(n,9).ngClassValid,Yt(n,9).ngClassInvalid,Yt(n,9).ngClassPending),e(n,10,0,l.getFreeWorkers()),e(n,14,0,Rt(1,"",l.getFreeWorkers(),""),Yt(n,20).ngClassUntouched,Yt(n,20).ngClassTouched,Yt(n,20).ngClassPristine,Yt(n,20).ngClassDirty,Yt(n,20).ngClassValid,Yt(n,20).ngClassInvalid,Yt(n,20).ngClassPending),e(n,21,0,l.getFreeWorkers())}))}function ZM(e){return qs(0,[(e()(),Ds(0,0,null,null,21,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"span",[["class","troopLabel"]],null,null,null,null,null)),(e()(),Ks(2,null,["",":"])),(e()(),Ds(3,0,null,null,6,"input",[["class","armyInput"],["min","0"],["type","number"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,4)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,4).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,4)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,4)._compositionEnd(l.target.value)&&t),"input"===n&&(t=!1!==Yt(e,5).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,5).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.troopsHolder[e.context.$implicit]=l)&&t),t}),null,null)),ei(4,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(5,16384,null,0,Vg,[ol,il],null,null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,Vg]),ei(7,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(9,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ks(10,null,["/"," "])),(e()(),Ds(11,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(12,0,null,null,9,"div",[["class","slidecontainer"]],null,null,null,null,null)),(e()(),Ks(-1,null,[" 0 "])),(e()(),Ds(14,0,null,null,6,"input",[["class","slider"],["min","0"],["type","range"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,15)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,15).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,15)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,15)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==Yt(e,16).onChange(l.target.value)&&t),"input"===n&&(t=!1!==Yt(e,16).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,16).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.troopsHolder[e.context.$implicit]=l)&&t),t}),null,null)),ei(15,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(16,16384,null,0,zg,[ol,il],null,null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,zg]),ei(18,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(20,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ks(21,null,[" "," "]))],(function(e,n){var l=n.component;e(n,7,0,l.troopsHolder[n.context.$implicit]),e(n,18,0,l.troopsHolder[n.context.$implicit])}),(function(e,n){var l=n.component;e(n,2,0,l.getTroopName(n.context.$implicit)),e(n,3,0,Rt(1,"",l.getTroop(n.context.$implicit).size,""),Yt(n,9).ngClassUntouched,Yt(n,9).ngClassTouched,Yt(n,9).ngClassPristine,Yt(n,9).ngClassDirty,Yt(n,9).ngClassValid,Yt(n,9).ngClassInvalid,Yt(n,9).ngClassPending),e(n,10,0,l.getTroop(n.context.$implicit).size),e(n,14,0,Rt(1,"",l.getTroop(n.context.$implicit).size,""),Yt(n,20).ngClassUntouched,Yt(n,20).ngClassTouched,Yt(n,20).ngClassPristine,Yt(n,20).ngClassDirty,Yt(n,20).ngClassValid,Yt(n,20).ngClassInvalid,Yt(n,20).ngClassPending),e(n,21,0,l.getTroop(n.context.$implicit).size)}))}function JM(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,ZM)),ei(2,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,2,0,n.component.getSpyUnits())}),null)}function eD(e){return qs(0,[(e()(),Ds(0,0,null,null,6,"div",[["class","stats"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Stats"])),(e()(),Ds(3,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(4,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(5,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(6,null,[" ","% success chance "]))],(function(e,n){e(n,5,0,"colonize","army/mission")}),(function(e,n){e(n,6,0,5*n.component.colonistsHolder)}))}function nD(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(2,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(3,null,[" "," "]))],(function(e,n){e(n,2,0,n.component.getResourceName(n.context.$implicit.resource),"resources")}),(function(e,n){e(n,3,0,n.context.$implicit.amount)}))}function lD(e){return qs(0,[(e()(),Ds(0,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(2,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ds(3,0,null,null,3,"span",[],null,null,null,null,null)),ei(4,278528,null,0,la,[Cl,Il,il,ol],{ngClass:[0,"ngClass"]},null),zs(5,{notAvailable:0}),(e()(),Ks(6,null,[" "," "]))],(function(e,n){var l=n.component;e(n,2,0,l.getResourceName(n.context.$implicit.resource),"resources");var t=e(n,5,0,!l.hasResource(n.context.$implicit.resource,n.context.$implicit.amount*l.getUnitsNumber()));e(n,4,0,t)}),(function(e,n){e(n,6,0,n.context.$implicit.amount*n.component.getUnitsNumber())}))}function tD(e){return qs(0,[(e()(),Ds(0,0,null,null,11,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Cost per person"])),(e()(),Ds(3,0,null,null,3,"div",[["id","costList"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,nD)),ei(5,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ds(6,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(7,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Total cost"])),(e()(),Ds(9,0,null,null,2,"div",[["id","totalCostList"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,lD)),ei(11,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,5,0,l.getMissionCost(l.missionData.missionType)),e(n,11,0,l.getMissionCost(l.missionData.missionType))}),null)}function iD(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(2,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(3,null,[" "," "]))],(function(e,n){e(n,2,0,n.component.getResourceName(n.context.$implicit.resource),"resources")}),(function(e,n){e(n,3,0,n.context.$implicit.amount*n.component.expeditionDistance)}))}function sD(e){return qs(0,[(e()(),Ds(0,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(2,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ds(3,0,null,null,3,"span",[],null,null,null,null,null)),ei(4,278528,null,0,la,[Cl,Il,il,ol],{ngClass:[0,"ngClass"]},null),zs(5,{notAvailable:0}),(e()(),Ks(6,null,[" "," "]))],(function(e,n){var l=n.component;e(n,2,0,l.getResourceName(n.context.$implicit.resource),"resources");var t=e(n,5,0,!l.hasResource(n.context.$implicit.resource,n.context.$implicit.amount*l.getUnitsNumber()*l.expeditionDistance));e(n,4,0,t)}),(function(e,n){var l=n.component;e(n,6,0,n.context.$implicit.amount*l.getUnitsNumber()*l.expeditionDistance)}))}function rD(e){return qs(0,[(e()(),Ds(0,0,null,null,18,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Cost per person"])),(e()(),Ds(3,0,null,null,3,"div",[["id","costList"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,iD)),ei(5,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ds(6,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(7,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Total cost"])),(e()(),Ds(9,0,null,null,9,"div",[["id","totalCostList"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,sD)),ei(11,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ds(12,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(13,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(14,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ds(15,0,null,null,3,"span",[],null,null,null,null,null)),ei(16,278528,null,0,la,[Cl,Il,il,ol],{ngClass:[0,"ngClass"]},null),zs(17,{notAvailable:0}),(e()(),Ks(-1,null,[" 1 "]))],(function(e,n){var l=n.component;e(n,5,0,l.getMissionCost(l.missionData.missionType)),e(n,11,0,l.getMissionCost(l.missionData.missionType)),e(n,14,0,"map","resources");var t=e(n,17,0,!l.hasResource(l.resources.MAP,1));e(n,16,0,t)}),null)}function uD(e){return qs(0,[(e()(),Ds(0,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(2,114688,null,0,Rg,[],{name:[0,"name"]},null),(e()(),Ds(3,0,null,null,3,"span",[],null,null,null,null,null)),ei(4,278528,null,0,la,[Cl,Il,il,ol],{ngClass:[0,"ngClass"]},null),zs(5,{notAvailable:0}),(e()(),Ks(6,null,[""," /",""]))],(function(e,n){var l=n.component;e(n,2,0,"cargo");var t=e(n,5,0,l.getCargoUtilization()>l.getNavyCapacity());e(n,4,0,t)}),(function(e,n){var l=n.component;e(n,6,0,l.getCargoUtilization(),l.getNavyCapacity())}))}function oD(e){return qs(0,[(e()(),Ds(0,0,null,null,24,"div",[["class","stats"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Stats"])),(e()(),Ds(3,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(4,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(5,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(6,null,[" ","% success chance "])),(e()(),Ds(7,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(8,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(9,114688,null,0,Rg,[],{name:[0,"name"]},null),(e()(),Ks(10,null,[" ~"," estimated land "])),(e()(),Ds(11,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(12,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(13,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(14,null,[" "," "])),(e()(),Ds(15,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(16,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(17,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(18,null,[" "," "])),(e()(),Ds(19,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(20,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(21,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(22,null,[" "," "])),(e()(),Ms(16777216,null,null,1,null,uD)),ei(24,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,5,0,"map","resources"),e(n,9,0,"land"),e(n,13,0,"attack","army"),e(n,17,0,"defense","army"),e(n,21,0,"speed","army"),e(n,24,0,l.isSeaLandMission())}),(function(e,n){var l=n.component;e(n,6,0,l.calculateExpeditionChance()),e(n,10,0,l.calculateExpeditionLand()),e(n,14,0,l.getUnitsStrength()),e(n,18,0,l.getUnitsDefense()),e(n,22,0,l.getSeaUnitsSpeed())}))}function aD(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(1,null,["",""]))],null,(function(e,n){e(n,1,0,n.component.getSeaUnitsSpeed())}))}function cD(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(1,null,["",""]))],null,(function(e,n){e(n,1,0,n.component.getUnitsSpeed())}))}function hD(e){return qs(0,[(e()(),Ds(0,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(2,114688,null,0,Rg,[],{name:[0,"name"]},null),(e()(),Ds(3,0,null,null,3,"span",[],null,null,null,null,null)),ei(4,278528,null,0,la,[Cl,Il,il,ol],{ngClass:[0,"ngClass"]},null),zs(5,{notAvailable:0}),(e()(),Ks(6,null,[""," /",""]))],(function(e,n){var l=n.component;e(n,2,0,"cargo");var t=e(n,5,0,l.getCargoUtilization()>l.getNavyCapacity());e(n,4,0,t)}),(function(e,n){var l=n.component;e(n,6,0,l.getCargoUtilization(),l.getNavyCapacity())}))}function dD(e){return qs(0,[(e()(),Ds(0,0,null,null,19,"div",[["class","stats"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Stats"])),(e()(),Ds(3,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(4,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(5,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(6,null,[" "," "])),(e()(),Ds(7,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(8,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(9,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(10,null,[" "," "])),(e()(),Ds(11,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(12,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(13,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ms(16777216,null,null,1,null,aD)),ei(15,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,cD)),ei(17,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,hD)),ei(19,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,5,0,"attack","army"),e(n,9,0,"defense","army"),e(n,13,0,"speed","army"),e(n,15,0,l.isSeaLandMission()),e(n,17,0,!l.isSeaLandMission()),e(n,19,0,l.isSeaLandMission())}),(function(e,n){var l=n.component;e(n,6,0,l.getUnitsStrength()),e(n,10,0,l.getUnitsDefense())}))}function gD(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[["class","rejectionReason"]],null,null,null,null,null)),(e()(),Ks(1,null,[" "," "]))],null,(function(e,n){e(n,1,0,n.component.cannotStartReason)}))}function pD(e){return qs(0,[(e()(),Ds(0,0,null,null,73,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"div",[["id","title"]],null,null,null,null,null)),(e()(),Ks(-1,null,["New mission"])),(e()(),Ds(3,0,null,null,11,"div",[["id","regions"]],null,null,null,null,null)),(e()(),Ds(4,0,null,null,8,"div",[["class","region"]],null,null,null,null,null)),(e()(),Ds(5,0,null,null,1,"span",[["class","center"]],null,null,null,null,null)),(e()(),Ks(-1,null,["origin"])),(e()(),Ms(16777216,null,null,1,null,yM)),ei(8,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,AM)),ei(10,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(11,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.changeOrigin()&&t),t}),null,null)),(e()(),Ks(-1,null,["change"])),(e()(),Ms(16777216,null,null,1,null,wM)),ei(14,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(15,0,null,null,28,"div",[["id","missions"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,PM)),ei(17,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,MM)),ei(19,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,DM)),ei(21,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,LM)),ei(23,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,xM)),ei(25,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,kM)),ei(27,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,FM)),ei(29,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,UM)),ei(31,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,HM)),ei(33,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,GM)),ei(35,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,BM)),ei(37,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,VM)),ei(39,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,WM)),ei(41,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,YM)),ei(43,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(44,0,null,null,20,"div",[["id","secondHalf"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,KM)),ei(46,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,qM)),ei(48,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,XM)),ei(50,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,JM)),ei(52,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(53,0,null,null,11,"div",[["id","bottomSection"]],null,null,null,null,null)),(e()(),Ds(54,0,null,null,6,"div",[["id","costs"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,eD)),ei(56,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,tD)),ei(58,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,rD)),ei(60,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,oD)),ei(62,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,dD)),ei(64,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,gD)),ei(66,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(67,0,null,null,6,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Ds(68,0,null,null,3,"button",[["id","startButton"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.start()&&t),t}),null,null)),ei(69,278528,null,0,la,[Cl,Il,il,ol],{ngClass:[0,"ngClass"]},null),zs(70,{inactive:0}),(e()(),Ks(71,null,["",""])),(e()(),Ds(72,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.closeModal()&&t),t}),null,null)),(e()(),Ks(-1,null,["Cancel"]))],(function(e,n){var l=n.component;e(n,8,0,l.missionData.originRegion),e(n,10,0,!l.missionData.originRegion),e(n,14,0,!l.missionData.targetSeaEvent&&l.missionData.missionType!==l.missions.EXPEDITION),e(n,17,0,l.isMissionAllowed(l.missions.COLONIZE)),e(n,19,0,l.isMissionAllowed(l.missions.MOVE)),e(n,21,0,l.isMissionAllowed(l.missions.SPY)),e(n,23,0,l.isMissionAllowed(l.missions.PLUNDER)),e(n,25,0,l.isMissionAllowed(l.missions.CONQUER)),e(n,27,0,l.isMissionAllowed(l.missions.SEA_MOVE)),e(n,29,0,l.isMissionAllowed(l.missions.SEA_PLUNDER)),e(n,31,0,l.isMissionAllowed(l.missions.SEA_CONQUER)),e(n,33,0,l.isMissionAllowed(l.missions.FISHING)),e(n,35,0,l.isMissionAllowed(l.missions.HUNTING)),e(n,37,0,l.isMissionAllowed(l.missions.TREASURE)),e(n,39,0,l.isMissionAllowed(l.missions.CARTOGRAPHY)),e(n,41,0,l.isMissionAllowed(l.missions.SEA_BATTLE)),e(n,43,0,l.isMissionAllowed(l.missions.EXPEDITION)),e(n,46,0,l.missionData.originRegion&&l.missionData.missionType!==l.missions.SPY&&l.missionData.missionType!==l.missions.COLONIZE&&l.missionData.missionType!==l.missions.EXPEDITION),e(n,48,0,l.missionData.originRegion&&l.missionData.missionType===l.missions.EXPEDITION),e(n,50,0,l.missionData.originRegion&&l.missionData.missionType===l.missions.COLONIZE),e(n,52,0,l.missionData.originRegion&&l.missionData.missionType===l.missions.SPY),e(n,56,0,l.missionData.missionType===l.missions.COLONIZE),e(n,58,0,l.missionData.missionType!==l.missions.EXPEDITION),e(n,60,0,l.missionData.missionType===l.missions.EXPEDITION),e(n,62,0,l.missionData.missionType===l.missions.EXPEDITION),e(n,64,0,l.missionData.missionType!==l.missions.COLONIZE&&l.missionData.missionType!==l.missions.EXPEDITION),e(n,66,0,!l.canStart());var t=e(n,70,0,!l.canStart());e(n,69,0,t)}),(function(e,n){e(n,71,0,n.component.getMissionName())}))}function mD(e){return qs(0,[(e()(),Ds(0,0,null,null,5,"app-modal",[["id","mission-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==Yt(e,1).onKeydownHandler(l)&&t),t}),Rw,vw)),ei(1,4440064,null,0,Ew,[ol,il,Fp],{id:[0,"id"]},null),(e()(),Ds(2,0,null,0,2,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,pD)),ei(4,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(5,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,1,0,"mission-modal"),e(n,4,0,l.missionData)}),null)}class fD{constructor(e,n,l,t){this.modalService=e,this.happinessService=n,this.resourceService=l,this.gameService=t,this.food=1,this.clothes=0,this.beer=0,this.wine=0,this.jewelry=0,this.duration=1,this.happiness=5,e.registerForOnOpen().subscribe(e=>{e===Pu.FESTIVAL&&(this.food=Math.ceil(5*this.resourceService.getTotalPeople()/2),this.clothes=0,this.beer=0,this.wine=0,this.jewelry=0,this.happiness=1,this.duration=5)})}ngOnInit(){}onKeydownHandler(e){"none"!==document.getElementById("festival-modal").style.display&&(e.preventDefault(),this.modalService.close(Pu.FESTIVAL))}closeModal(){this.modalService.close(Pu.FESTIVAL)}startFestival(){this.canStart(!0)&&(this.getCost().forEach(e=>{this.resourceService.decreaseResource(e.resource,e.amount,"Festival",!0)}),this.happinessService.addHappinessEffect(0,Ru.FESTIVAL,this.happiness,this.duration),this.modalService.close(Pu.FESTIVAL))}getDuration(){return this.duration}getPoints(){return Math.floor((2*this.food+500*this.clothes+125*this.wine+75*this.beer+300*this.jewelry*25)/this.resourceService.getTotalPeople())}getHappiness(){return this.happiness}getCost(){const e=[];return this.food>0&&e.push({resource:su.FOOD,amount:this.food}),this.clothes>0&&e.push({resource:su.CLOTHES,amount:this.clothes}),this.beer>0&&e.push({resource:su.BEER,amount:this.beer}),this.wine>0&&e.push({resource:su.WINE,amount:this.wine}),this.jewelry>0&&e.push({resource:su.JEWELRY,amount:this.jewelry}),e}getMaxHappinessThreshold(){return this.gameService.isEnabled(ou.JEWELRY)||this.resourceService.getResource(su.JEWELRY).isVisible()?20:this.gameService.isEnabled(ou.ALCOHOL)?15:this.gameService.isEnabled(ou.TAILOR)?10:4}canStart(e=!1){if(this.calculateStats(),this.happiness<1)return e&&this.modalService.info("Happiness must be at least 1"),!1;if(this.duration<1)return e&&this.modalService.info("Duration must be at least 1"),!1;let n=!0;return this.getCost().forEach(e=>{n&&(n=0===this.resourceService.hasResource(e.resource,e.amount,"Festival",!0))}),!n&&e&&this.modalService.info("Not enough resources!"),n}getResourceName(e){return Ou.prepareResourceName(e)}getNutrition(){return this.resourceService.getFoodValue("Festival",!0)}getMaxClothes(){return this.resourceService.getResource(su.CLOTHES).amount}getMaxWine(){return this.resourceService.getResource(su.WINE).amount}getMaxBeer(){return this.resourceService.getResource(su.BEER).amount}getMaxJewelry(){return this.resourceService.getResource(su.JEWELRY).amount}isClothesEnabled(){return this.gameService.isEnabled(ou.TAILOR)}isAlcoholEnabled(){return this.gameService.isEnabled(ou.ALCOHOL)}isJewelryEnabled(){return this.gameService.isEnabled(ou.JEWELRY)||this.resourceService.getResource(su.JEWELRY).isVisible()}calculateStats(){this.duration=Math.floor(this.getPoints()/this.happiness)}hasResource(e,n){return 0===this.resourceService.hasResource(e,n,"Festival",!0)}}var SD=Kl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:1.2em;max-width:750px;margin:160px auto auto}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px;white-space:nowrap}.slidecontainer[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-top:3px;width:300px}.slider[_ngcontent-%COMP%]{-webkit-appearance:none;width:100%;height:10px;border-radius:5px;background:var(--passive-colour);outline:none;opacity:.7;transition:opacity .2s}.slider[_ngcontent-%COMP%]:hover{opacity:1}.slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:15px;height:15px;border-radius:50%;background:var(--active-colour);cursor:pointer}.slider[_ngcontent-%COMP%]::-moz-range-thumb{width:15px;height:15px;border-radius:50%;background:var(--active-colour);cursor:pointer}.label[_ngcontent-%COMP%]{display:inline-block;width:150px}.input[_ngcontent-%COMP%]{width:10ch}.inactive[_ngcontent-%COMP%]{color:#5f5f5f}.icon[_ngcontent-%COMP%], .iconsLine[_ngcontent-%COMP%]{display:flex;flex-direction:row}.icon[_ngcontent-%COMP%]{align-items:center;justify-content:center;margin-right:7px}hr[_ngcontent-%COMP%]{border-color:#000;width:50%}.notMet[_ngcontent-%COMP%]{color:var(--negative-colour)}"]],data:{}});function ED(e){return qs(0,[(e()(),Ds(0,0,null,null,10,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"span",[["class","label"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Clothes"])),(e()(),Ds(3,0,null,null,6,"input",[["class","input"],["min","0"],["type","number"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"ngModelChange"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,4)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,4).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,4)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,4)._compositionEnd(l.target.value)&&t),"input"===n&&(t=!1!==Yt(e,5).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,5).onTouched()&&t),"input"===n&&(t=!1!==i.calculateStats()&&t),"ngModelChange"===n&&(t=!1!==(i.clothes=l)&&t),t}),null,null)),ei(4,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(5,16384,null,0,Vg,[ol,il],null,null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,Vg]),ei(7,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(9,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ks(10,null,["/"," "]))],(function(e,n){e(n,7,0,n.component.clothes)}),(function(e,n){var l=n.component;e(n,3,0,Rt(1,"",l.getMaxClothes(),""),Yt(n,9).ngClassUntouched,Yt(n,9).ngClassTouched,Yt(n,9).ngClassPristine,Yt(n,9).ngClassDirty,Yt(n,9).ngClassValid,Yt(n,9).ngClassInvalid,Yt(n,9).ngClassPending),e(n,10,0,l.getMaxClothes())}))}function vD(e){return qs(0,[(e()(),Ds(0,0,null,null,10,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"span",[["class","label"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Beer"])),(e()(),Ds(3,0,null,null,6,"input",[["class","input"],["min","0"],["type","number"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"ngModelChange"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,4)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,4).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,4)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,4)._compositionEnd(l.target.value)&&t),"input"===n&&(t=!1!==Yt(e,5).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,5).onTouched()&&t),"input"===n&&(t=!1!==i.calculateStats()&&t),"ngModelChange"===n&&(t=!1!==(i.beer=l)&&t),t}),null,null)),ei(4,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(5,16384,null,0,Vg,[ol,il],null,null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,Vg]),ei(7,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(9,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ks(10,null,["/"," "]))],(function(e,n){e(n,7,0,n.component.beer)}),(function(e,n){var l=n.component;e(n,3,0,Rt(1,"",l.getMaxBeer(),""),Yt(n,9).ngClassUntouched,Yt(n,9).ngClassTouched,Yt(n,9).ngClassPristine,Yt(n,9).ngClassDirty,Yt(n,9).ngClassValid,Yt(n,9).ngClassInvalid,Yt(n,9).ngClassPending),e(n,10,0,l.getMaxBeer())}))}function RD(e){return qs(0,[(e()(),Ds(0,0,null,null,10,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"span",[["class","label"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Wine"])),(e()(),Ds(3,0,null,null,6,"input",[["class","input"],["min","0"],["type","number"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"ngModelChange"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,4)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,4).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,4)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,4)._compositionEnd(l.target.value)&&t),"input"===n&&(t=!1!==Yt(e,5).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,5).onTouched()&&t),"input"===n&&(t=!1!==i.calculateStats()&&t),"ngModelChange"===n&&(t=!1!==(i.wine=l)&&t),t}),null,null)),ei(4,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(5,16384,null,0,Vg,[ol,il],null,null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,Vg]),ei(7,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(9,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ks(10,null,["/"," "]))],(function(e,n){e(n,7,0,n.component.wine)}),(function(e,n){var l=n.component;e(n,3,0,Rt(1,"",l.getMaxWine(),""),Yt(n,9).ngClassUntouched,Yt(n,9).ngClassTouched,Yt(n,9).ngClassPristine,Yt(n,9).ngClassDirty,Yt(n,9).ngClassValid,Yt(n,9).ngClassInvalid,Yt(n,9).ngClassPending),e(n,10,0,l.getMaxWine())}))}function OD(e){return qs(0,[(e()(),Ds(0,0,null,null,10,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"span",[["class","label"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Jewelry"])),(e()(),Ds(3,0,null,null,6,"input",[["class","input"],["min","0"],["type","number"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"ngModelChange"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,4)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,4).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,4)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,4)._compositionEnd(l.target.value)&&t),"input"===n&&(t=!1!==Yt(e,5).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,5).onTouched()&&t),"input"===n&&(t=!1!==i.calculateStats()&&t),"ngModelChange"===n&&(t=!1!==(i.jewelry=l)&&t),t}),null,null)),ei(4,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(5,16384,null,0,Vg,[ol,il],null,null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,Vg]),ei(7,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(9,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ks(10,null,["/"," "]))],(function(e,n){e(n,7,0,n.component.jewelry)}),(function(e,n){var l=n.component;e(n,3,0,Rt(1,"",l.getMaxJewelry(),""),Yt(n,9).ngClassUntouched,Yt(n,9).ngClassTouched,Yt(n,9).ngClassPristine,Yt(n,9).ngClassDirty,Yt(n,9).ngClassValid,Yt(n,9).ngClassInvalid,Yt(n,9).ngClassPending),e(n,10,0,l.getMaxJewelry())}))}function TD(e){return qs(0,[(e()(),Ds(0,0,null,null,7,"span",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(2,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),Ks(-1,null,[" \xa0"])),(e()(),Ds(4,0,null,null,3,"span",[],null,null,null,null,null)),ei(5,278528,null,0,la,[Cl,Il,il,ol],{ngClass:[0,"ngClass"]},null),zs(6,{notMet:0}),(e()(),Ks(7,null,["",""]))],(function(e,n){var l=n.component;e(n,2,0,l.getResourceName(n.context.$implicit.resource),"resources",l.getResourceName(n.context.$implicit.resource));var t=e(n,6,0,!l.hasResource(n.context.$implicit.resource,n.context.$implicit.amount));e(n,5,0,t)}),(function(e,n){e(n,7,0,n.context.$implicit.amount)}))}function CD(e){return qs(0,[(e()(),Ds(0,0,null,null,46,"app-modal",[["id","festival-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==Yt(e,1).onKeydownHandler(l)&&t),t}),Rw,vw)),ei(1,4440064,null,0,Ew,[ol,il,Fp],{id:[0,"id"]},null),(e()(),Ds(2,0,null,0,43,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Ds(3,0,null,null,42,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Ds(4,0,null,null,1,"div",[["id","title"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Festival preparations"])),(e()(),Ds(6,0,null,null,1,"span",[["id","text"]],null,null,null,null,null)),(e()(),Ks(-1,null,["\xa0"])),(e()(),Ds(8,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(9,0,null,null,10,"div",[],null,null,null,null,null)),(e()(),Ds(10,0,null,null,1,"span",[["class","label"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Food"])),(e()(),Ds(12,0,null,null,6,"input",[["class","input"],["min","1"],["type","number"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"ngModelChange"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,13)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,13).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,13)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,13)._compositionEnd(l.target.value)&&t),"input"===n&&(t=!1!==Yt(e,14).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,14).onTouched()&&t),"input"===n&&(t=!1!==i.calculateStats()&&t),"ngModelChange"===n&&(t=!1!==(i.food=l)&&t),t}),null,null)),ei(13,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(14,16384,null,0,Vg,[ol,il],null,null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,Vg]),ei(16,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(18,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ks(19,null,["/"," "])),(e()(),Ms(16777216,null,null,1,null,ED)),ei(21,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,vD)),ei(23,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,RD)),ei(25,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,OD)),ei(27,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(28,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Ds(29,0,null,null,3,"div",[["id","costList"]],null,null,null,null,null)),(e()(),Ds(30,0,null,null,2,"div",[["class","iconsLine"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,TD)),ei(32,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ds(33,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(34,null,["Festival Points: ",""])),(e()(),Ds(35,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(36,null,["Festival happiness: ",""])),(e()(),Ds(37,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(38,null,["Festival duration: "," days"])),(e()(),Ds(39,0,null,null,6,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Ds(40,0,null,null,3,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.startFestival()&&t),t}),null,null)),ei(41,278528,null,0,la,[Cl,Il,il,ol],{ngClass:[0,"ngClass"]},null),zs(42,{inactive:0}),(e()(),Ks(-1,null,["Start festival"])),(e()(),Ds(44,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.closeModal()&&t),t}),null,null)),(e()(),Ks(-1,null,["Cancel"])),(e()(),Ds(46,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,1,0,"festival-modal"),e(n,16,0,l.food),e(n,21,0,l.isClothesEnabled()),e(n,23,0,l.isAlcoholEnabled()),e(n,25,0,l.isAlcoholEnabled()),e(n,27,0,l.isJewelryEnabled()),e(n,32,0,l.getCost());var t=e(n,42,0,!l.canStart());e(n,41,0,t)}),(function(e,n){var l=n.component;e(n,12,0,Rt(1,"",l.getNutrition(),""),Yt(n,18).ngClassUntouched,Yt(n,18).ngClassTouched,Yt(n,18).ngClassPristine,Yt(n,18).ngClassDirty,Yt(n,18).ngClassValid,Yt(n,18).ngClassInvalid,Yt(n,18).ngClassPending),e(n,19,0,l.getNutrition()),e(n,34,0,l.getPoints()),e(n,36,0,l.getHappiness()),e(n,38,0,l.getDuration())}))}class ID{constructor(e,n){this.modalService=e,this.resourcesService=n}ngOnInit(){this.modalService.registerForValue().subscribe(e=>{e&&void 0!==e.id&&(this.offer=e,this.value=this.offer.amount,this.inputRef&&(this.inputRef.nativeElement.style.width=this.value.toString().length+1+"ch"))})}ok(){this.checkValue(this.value),this.modalService.sendValueInput(Number(this.value)),this.modalService.close(Pu.MARKET),this.offer=null}cancel(){this.modalService.sendValueInput(null),this.offer=null,this.modalService.close(Pu.MARKET)}onKeydownHandler(e){"none"!==document.getElementById("market-modal").style.display&&(e.preventDefault(),this.ok())}getResourceName(e){return su[e]}calculatePrice(){let e=this.value;return this.offer.amount<e&&(e=this.offer.amount),this.offer.buy?Math.ceil(e/this.offer.amount*this.offer.price):Math.floor(e/this.offer.amount*this.offer.price)}checkValue(e){if(e&&!isNaN(e)){if(this.offer.amount>=e)return!0;this.inputRef.nativeElement.value=this.offer.amount,this.value=this.offer.amount}return!1}getResourceAmount(){return this.resourcesService.getResource(this.offer.resource).amount}getResourceLimit(){return this.resourcesService.getResource(this.offer.resource).limit}}var bD=Kl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:1.2em}#title[_ngcontent-%COMP%]{font-size:1.5em;margin-bottom:5px}#buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px;padding:5px}#input[_ngcontent-%COMP%]{width:3ch;font-size:1em}#input[_ngcontent-%COMP%], app-icon[_ngcontent-%COMP%]{display:inline-block}app-icon[_ngcontent-%COMP%]{margin:0 3px}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]],data:{}});function yD(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["buy"]))],null,null)}function AD(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["sell"]))],null,null)}function ND(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["BUY"]))],null,null)}function _D(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["SELL"]))],null,null)}function wD(e){return qs(0,[(e()(),Ds(0,0,null,null,35,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Market offer"])),(e()(),Ds(3,0,null,null,9,"span",[["class","icon"],["id","text"]],null,null,null,null,null)),(e()(),Ks(-1,null,["How many "])),(e()(),Ds(5,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(6,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(7,null,["(","/",") would you like to "])),(e()(),Ms(16777216,null,null,1,null,yD)),ei(9,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,AD)),ei(11,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ks(-1,null,["?"])),(e()(),Ds(13,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(14,0,null,null,12,"span",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(15,0,[[1,0],["input",1]],null,5,"input",[["id","input"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,16)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,16).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,16)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,16)._compositionEnd(l.target.value)&&t),"ngModelChange"===n&&(t=!1!==i.checkValue(l)&&t),"ngModelChange"===n&&(t=!1!==(i.value=l)&&t),t}),null,null)),ei(16,16384,null,0,Ag,[ol,il,[2,yg]],null,null),li(1024,null,Ig,(function(e){return[e]}),[Ag]),ei(18,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(20,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ks(21,null,["/"," "])),(e()(),Ds(22,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(23,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(24,null,[" for "," "])),(e()(),Ds(25,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(26,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ds(27,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(28,0,null,null,7,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Ds(29,0,null,null,4,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.ok()&&t),t}),null,null)),(e()(),Ms(16777216,null,null,1,null,ND)),ei(31,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,_D)),ei(33,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(34,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.cancel()&&t),t}),null,null)),(e()(),Ks(-1,null,["CANCEL"]))],(function(e,n){var l=n.component;e(n,6,0,l.getResourceName(l.offer.resource),"resources"),e(n,9,0,l.offer.buy),e(n,11,0,!l.offer.buy),e(n,18,0,l.value),e(n,23,0,l.getResourceName(l.offer.resource),"resources"),e(n,26,0,"coins","resources"),e(n,31,0,l.offer.buy),e(n,33,0,!l.offer.buy)}),(function(e,n){var l=n.component;e(n,7,0,l.getResourceAmount(),l.getResourceLimit()),e(n,15,0,Yt(n,20).ngClassUntouched,Yt(n,20).ngClassTouched,Yt(n,20).ngClassPristine,Yt(n,20).ngClassDirty,Yt(n,20).ngClassValid,Yt(n,20).ngClassInvalid,Yt(n,20).ngClassPending),e(n,21,0,l.offer.amount),e(n,24,0,l.calculatePrice())}))}function PD(e){return qs(0,[Us(671088640,1,{inputRef:0}),(e()(),Ds(1,0,null,null,5,"app-modal",[["id","market-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==Yt(e,2).onKeydownHandler(l)&&t),t}),Rw,vw)),ei(2,4440064,null,0,Ew,[ol,il,Fp],{id:[0,"id"]},null),(e()(),Ds(3,0,null,0,2,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,wD)),ei(5,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(6,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,2,0,"market-modal"),e(n,5,0,l.offer)}),null)}class MD{constructor(e,n,l){this.servicesService=e,this.modalService=n,this.resourcesService=l,this.modalService.registerForBuilding().subscribe(e=>{this.building=e,setTimeout((function(){const e=window.document.getElementsByClassName("textInput").item(0);e&&e.select()}),10)})}ngOnInit(){}ok(){this.modalService.close(Pu.WORK_MANAGEMENT)}cancel(){this.modalService.close(Pu.WORK_MANAGEMENT)}stop(){this.building.isWorking()?this.building.stopProduction():this.building.startProduction()||this.modalService.info("Cannot unlock production of "+this.building.getName()+". Number of free workers: "+this.resourcesService.getPeople())}getBuildingName(){return Ou.prepareBuildingName(this.building.getBuildingType())}getResourceName(e){return Ou.prepareResourceName(e)}getResource(e){return this.resourcesService.getResource(e)}onKeydownHandler(){"none"!==document.getElementById("work-management-modal").style.display&&(event.preventDefault(),this.ok())}isCoins(e){return e===su.COINS}applyToAll(){const e=po.getBuildingRegion(this.building.getBuildingType());this.servicesService.getServiceByRegion(e).getBuildings().filter(e=>e.getBuildingType()===this.building.getBuildingType()).forEach(e=>e.setWorkSettings($f.clone(this.building.getWorkSettings())))}}var DD=Kl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{text-align:center;font-size:1.2em}input[_ngcontent-%COMP%]:not([type]), input[type=text][_ngcontent-%COMP%]{width:5ch}#rules[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}#input[_ngcontent-%COMP%]{border-right:1px solid #000}#input[_ngcontent-%COMP%], #output[_ngcontent-%COMP%]{flex:0 0 50%}.seasonalRule[_ngcontent-%COMP%]{margin-right:10px}"]],data:{}});function LD(e){return qs(0,[(e()(),Ds(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),Ks(-1,null,[" working"]))],null,null)}function xD(e){return qs(0,[(e()(),Ds(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),Ks(-1,null,[" not working"]))],null,null)}function kD(e){return qs(0,[(e()(),Ds(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.stop()&&t),t}),null,null)),(e()(),Ks(-1,null,["Hire worker"]))],null,null)}function FD(e){return qs(0,[(e()(),Ds(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.stop()&&t),t}),null,null)),(e()(),Ks(-1,null,["Fire worker"]))],null,null)}function UD(e){return qs(0,[(e()(),Ds(0,0,null,null,8,"div",[["id","customRule"]],null,null,null,null,null)),(e()(),Ks(1,null,[" "," "])),(e()(),Ds(2,0,null,null,5,"input",[["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,3).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==Yt(e,3).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.building.getWorkSettings().customRuleEnabled=l)&&t),t}),null,null)),ei(3,16384,null,0,bg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[bg]),ei(5,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(7,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(8,0,null,null,0,"br",[],null,null,null,null,null))],(function(e,n){e(n,5,0,n.component.building.getWorkSettings().customRuleEnabled)}),(function(e,n){e(n,1,0,n.component.building.getWorkSettings().customRuleText),e(n,2,0,Yt(n,7).ngClassUntouched,Yt(n,7).ngClassTouched,Yt(n,7).ngClassPristine,Yt(n,7).ngClassDirty,Yt(n,7).ngClassValid,Yt(n,7).ngClassInvalid,Yt(n,7).ngClassPending)}))}function HD(e){return qs(0,[(e()(),Ds(0,0,null,null,10,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(2,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(-1,null,[" > "])),(e()(),Ds(4,0,null,null,5,"input",[["class","textInput"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0;return"input"===n&&(t=!1!==Yt(e,5)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,5).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,5)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,5)._compositionEnd(l.target.value)&&t),"ngModelChange"===n&&(t=!1!==(e.context.$implicit[1]=l)&&t),t}),null,null)),ei(5,16384,null,0,Ag,[ol,il,[2,yg]],null,null),li(1024,null,Ig,(function(e){return[e]}),[Ag]),ei(7,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(9,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ks(10,null,[" ( ","/"," ) "]))],(function(e,n){e(n,2,0,n.component.getResourceName(n.context.$implicit[0]),"resources"),e(n,7,0,n.context.$implicit[1])}),(function(e,n){var l=n.component;e(n,4,0,Yt(n,9).ngClassUntouched,Yt(n,9).ngClassTouched,Yt(n,9).ngClassPristine,Yt(n,9).ngClassDirty,Yt(n,9).ngClassValid,Yt(n,9).ngClassInvalid,Yt(n,9).ngClassPending),e(n,10,0,l.getResource(n.context.$implicit[0]).amount,l.getResource(n.context.$implicit[0]).limit)}))}function GD(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"div",[["id","input"]],null,null,null,null,null)),(e()(),Ks(-1,null,[" Input resources: "])),(e()(),Ms(16777216,null,null,1,null,HD)),ei(3,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,3,0,n.component.building.getWorkSettings().inputSettings)}),null)}function BD(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["\u221e"]))],null,null)}function VD(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(1,null,["",""]))],null,(function(e,n){e(n,1,0,n.component.getResource(n.parent.context.$implicit[0]).limit)}))}function WD(e){return qs(0,[(e()(),Ds(0,0,null,null,7,"span",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,5,"input",[["class","textInput"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0;return"input"===n&&(t=!1!==Yt(e,2)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,2).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,2)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,2)._compositionEnd(l.target.value)&&t),"ngModelChange"===n&&(t=!1!==(e.parent.context.$implicit[1]=l)&&t),t}),null,null)),ei(2,16384,null,0,Ag,[ol,il,[2,yg]],null,null),li(1024,null,Ig,(function(e){return[e]}),[Ag]),ei(4,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(6,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ks(7,null,[" (",""]))],(function(e,n){e(n,4,0,n.parent.context.$implicit[1])}),(function(e,n){var l=n.component;e(n,1,0,Yt(n,6).ngClassUntouched,Yt(n,6).ngClassTouched,Yt(n,6).ngClassPristine,Yt(n,6).ngClassDirty,Yt(n,6).ngClassValid,Yt(n,6).ngClassInvalid,Yt(n,6).ngClassPending),e(n,7,0,l.getResource(n.parent.context.$implicit[0]).amount)}))}function YD(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["\u221e"]))],null,null)}function zD(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(1,null,["",""]))],null,(function(e,n){e(n,1,0,n.component.getResource(n.parent.context.$implicit[0]).limit)}))}function $D(e){return qs(0,[(e()(),Ds(0,0,null,null,23,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(2,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(-1,null,[" < "])),(e()(),Ms(16777216,null,null,1,null,BD)),ei(5,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,VD)),ei(7,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,WD)),ei(9,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ks(-1,null,[" / "])),(e()(),Ms(16777216,null,null,1,null,YD)),ei(12,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,zD)),ei(14,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ks(-1,null,[") "])),(e()(),Ds(16,0,null,null,5,"input",[["id","full"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==Yt(e,17).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==Yt(e,17).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(e.context.$implicit[2]=l)&&t),t}),null,null)),ei(17,16384,null,0,bg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[bg]),ei(19,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(21,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(22,0,null,null,1,"label",[["for","full"]],null,null,null,null,null)),(e()(),Ks(-1,null,["full"]))],(function(e,n){var l=n.component;e(n,2,0,l.getResourceName(n.context.$implicit[0]),"resources"),e(n,5,0,n.context.$implicit[2]&&l.isCoins(n.context.$implicit[0])),e(n,7,0,n.context.$implicit[2]&&!l.isCoins(n.context.$implicit[0])),e(n,9,0,!n.context.$implicit[2]),e(n,12,0,l.isCoins(n.context.$implicit[0])),e(n,14,0,!l.isCoins(n.context.$implicit[0])),e(n,19,0,n.context.$implicit[2])}),(function(e,n){e(n,16,0,Yt(n,21).ngClassUntouched,Yt(n,21).ngClassTouched,Yt(n,21).ngClassPristine,Yt(n,21).ngClassDirty,Yt(n,21).ngClassValid,Yt(n,21).ngClassInvalid,Yt(n,21).ngClassPending)}))}function KD(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"div",[["id","output"]],null,null,null,null,null)),(e()(),Ks(-1,null,[" Output resources: "])),(e()(),Ms(16777216,null,null,1,null,$D)),ei(3,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,3,0,n.component.building.getWorkSettings().outputSettings)}),null)}function jD(e){return qs(0,[(e()(),Ds(0,0,null,null,79,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),Ks(2,null,[""," work management"])),(e()(),Ds(3,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(4,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ks(-1,null,[" status: "])),(e()(),Ms(16777216,null,null,1,null,LD)),ei(7,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,xD)),ei(9,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,kD)),ei(11,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,FD)),ei(13,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(14,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ks(-1,null,[" work management on/off "])),(e()(),Ds(16,0,null,null,5,"input",[["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,17).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==Yt(e,17).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.building.getWorkSettings().enabled=l)&&t),t}),null,null)),ei(17,16384,null,0,bg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[bg]),ei(19,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(21,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(22,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(23,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(24,0,null,null,40,"div",[["id","seasonalRules"]],null,null,null,null,null)),(e()(),Ds(25,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Seasonal rules"])),(e()(),Ds(27,0,null,null,8,"span",[["class","seasonalRule"]],null,null,null,null,null)),(e()(),Ds(28,0,null,null,1,"label",[["for","spring"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Spring"])),(e()(),Ds(30,0,null,null,5,"input",[["id","spring"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,31).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==Yt(e,31).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.building.getWorkSettings().seasons[0]=l)&&t),t}),null,null)),ei(31,16384,null,0,bg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[bg]),ei(33,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(35,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(36,0,null,null,8,"span",[["class","seasonalRule"]],null,null,null,null,null)),(e()(),Ds(37,0,null,null,1,"label",[["for","summer"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Summer"])),(e()(),Ds(39,0,null,null,5,"input",[["id","summer"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,40).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==Yt(e,40).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.building.getWorkSettings().seasons[1]=l)&&t),t}),null,null)),ei(40,16384,null,0,bg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[bg]),ei(42,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(44,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(45,0,null,null,8,"span",[["class","seasonalRule"]],null,null,null,null,null)),(e()(),Ds(46,0,null,null,1,"label",[["for","autumn"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Autumn"])),(e()(),Ds(48,0,null,null,5,"input",[["id","autumn"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,49).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==Yt(e,49).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.building.getWorkSettings().seasons[2]=l)&&t),t}),null,null)),ei(49,16384,null,0,bg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[bg]),ei(51,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(53,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(54,0,null,null,8,"span",[["class","seasonalRule"]],null,null,null,null,null)),(e()(),Ds(55,0,null,null,1,"label",[["for","winter"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Winter"])),(e()(),Ds(57,0,null,null,5,"input",[["id","winter"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,58).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==Yt(e,58).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.building.getWorkSettings().seasons[3]=l)&&t),t}),null,null)),ei(58,16384,null,0,bg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[bg]),ei(60,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(62,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(63,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(64,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,UD)),ei(66,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(67,0,null,null,5,"div",[["id","rules"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,GD)),ei(69,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(70,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,KD)),ei(72,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(73,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(74,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(75,0,null,null,4,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Ds(76,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.applyToAll()&&t),t}),null,null)),(e()(),Ks(-1,null,["Apply to all buildings of this type"])),(e()(),Ds(78,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.ok()&&t),t}),null,null)),(e()(),Ks(-1,null,["Close"]))],(function(e,n){var l=n.component;e(n,7,0,l.building.isWorking()),e(n,9,0,!l.building.isWorking()),e(n,11,0,!l.building.getWorkSettings().enabled&&!l.building.isWorking()),e(n,13,0,!l.building.getWorkSettings().enabled&&l.building.isWorking()),e(n,19,0,l.building.getWorkSettings().enabled),e(n,33,0,l.building.getWorkSettings().seasons[0]),e(n,42,0,l.building.getWorkSettings().seasons[1]),e(n,51,0,l.building.getWorkSettings().seasons[2]),e(n,60,0,l.building.getWorkSettings().seasons[3]),e(n,66,0,l.building.getWorkSettings().hasCustomRule),e(n,69,0,l.building.getWorkSettings().inputSettings),e(n,72,0,l.building.getWorkSettings().outputSettings)}),(function(e,n){e(n,2,0,n.component.getBuildingName()),e(n,16,0,Yt(n,21).ngClassUntouched,Yt(n,21).ngClassTouched,Yt(n,21).ngClassPristine,Yt(n,21).ngClassDirty,Yt(n,21).ngClassValid,Yt(n,21).ngClassInvalid,Yt(n,21).ngClassPending),e(n,30,0,Yt(n,35).ngClassUntouched,Yt(n,35).ngClassTouched,Yt(n,35).ngClassPristine,Yt(n,35).ngClassDirty,Yt(n,35).ngClassValid,Yt(n,35).ngClassInvalid,Yt(n,35).ngClassPending),e(n,39,0,Yt(n,44).ngClassUntouched,Yt(n,44).ngClassTouched,Yt(n,44).ngClassPristine,Yt(n,44).ngClassDirty,Yt(n,44).ngClassValid,Yt(n,44).ngClassInvalid,Yt(n,44).ngClassPending),e(n,48,0,Yt(n,53).ngClassUntouched,Yt(n,53).ngClassTouched,Yt(n,53).ngClassPristine,Yt(n,53).ngClassDirty,Yt(n,53).ngClassValid,Yt(n,53).ngClassInvalid,Yt(n,53).ngClassPending),e(n,57,0,Yt(n,62).ngClassUntouched,Yt(n,62).ngClassTouched,Yt(n,62).ngClassPristine,Yt(n,62).ngClassDirty,Yt(n,62).ngClassValid,Yt(n,62).ngClassInvalid,Yt(n,62).ngClassPending)}))}function QD(e){return qs(0,[(e()(),Ds(0,0,null,null,5,"app-modal",[["id","work-management-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==Yt(e,1).onKeydownHandler(l)&&t),t}),Rw,vw)),ei(1,4440064,null,0,Ew,[ol,il,Fp],{id:[0,"id"]},null),(e()(),Ds(2,0,null,0,2,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,jD)),ei(4,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(5,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,1,0,"work-management-modal"),e(n,4,0,l.building)}),null)}class qD{constructor(e,n,l,t){this.modalService=e,this.tutorialService=n,this.tickerService=l,this.text="",this.tutorialStages=[],this.currentStep=1,this.modalService.registerForTutorial().subscribe(e=>{this.tutorialStages=e,this.currentStep=1,t.destroyed||t.detectChanges()})}ngOnInit(){}ngAfterViewInit(){this.tutorialService.enableTutorials()}ok(){this.currentStep+=1,this.modalService.openTutorialModal(this.tutorialStages[this.currentStep-1].position)}skip(){this.modalService.open(Pu.CONFIRM),this.modalService.setModalText("Are you sure you want to skip tutorial?<br>You can always start it again from the top right settings menu");const e=this.modalService.registerForConfirmation().subscribe(n=>{e.unsubscribe(),n&&(this.modalService.sendTutorialResponse(-1),this.tickerService.start(),this.modalService.close(Pu.TUTORIAL))})}finish(){this.modalService.sendTutorialResponse(1),this.tickerService.start(),this.modalService.close(Pu.TUTORIAL)}}var XD=Kl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.space[_ngcontent-%COMP%]{height:20px}"]],data:{}});function ZD(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.ok()&&t),t}),null,null)),(e()(),Ks(-1,null,["NEXT"]))],null,null)}function JD(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.finish()&&t),t}),null,null)),(e()(),Ks(-1,null,["FINISH"]))],null,null)}function eL(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.skip()&&t),t}),null,null)),(e()(),Ks(-1,null,["SKIP TUTORIAL"]))],null,null)}function nL(e){return qs(0,[(e()(),Ds(0,0,null,null,12,null,null,null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),Ks(2,null,["Tutorial ",""])),(e()(),Ds(3,0,null,null,0,"div",[["class","space"]],null,null,null,null,null)),(e()(),Ds(4,0,null,null,0,"span",[["id","text"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Ds(5,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(6,0,null,null,0,"div",[["class","space"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,ZD)),ei(8,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,JD)),ei(10,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,eL)),ei(12,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(0,null,null,0))],(function(e,n){var l=n.component;e(n,8,0,l.currentStep<l.tutorialStages.length),e(n,10,0,l.currentStep===l.tutorialStages.length),e(n,12,0,l.currentStep!==l.tutorialStages.length)}),(function(e,n){var l=n.component;e(n,2,0,l.currentStep+"/"+l.tutorialStages.length),e(n,4,0,l.tutorialStages[l.currentStep-1].text)}))}function lL(e){return qs(0,[(e()(),Ds(0,0,null,null,6,"app-modal",[["id","tutorial-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==Yt(e,1).onKeydownHandler(l)&&t),t}),Rw,vw)),ei(1,4440064,null,0,Ew,[ol,il,Fp],{id:[0,"id"]},null),(e()(),Ds(2,0,null,0,3,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Ds(3,0,null,null,2,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,nL)),ei(5,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(6,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,1,0,"tutorial-modal"),e(n,5,0,l.tutorialStages.length>0)}),null)}class tL{constructor(e){this.modalService=e,this.messageNumber=Hp.length,this.modalService.registerForCloseModal().subscribe(e=>this.messageNumber=Hp.length),this.modalService.registerForOnOpen().subscribe(e=>{e!==Pu.CHANGELOG&&e!==Pu.ALL||(this.textRef.nativeElement.scrollTop=0)})}ngOnInit(){}ok(){this.modalService.close(Pu.CHANGELOG)}hasPrevious(){return this.messageNumber>1}previous(){this.messageNumber>1&&(this.messageNumber-=1)}hasNext(){return this.messageNumber<Hp.length}next(){this.messageNumber<Hp.length&&(this.messageNumber+=1)}onKeydownHandler(e){"none"!==document.getElementById("changelog-modal").style.display&&(e.preventDefault(),this.ok())}getChange(){return Hp[this.messageNumber-1]}}var iL=Kl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}#buttons[_ngcontent-%COMP%]{width:50%;display:flex;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:0 0 33%}#header[_ngcontent-%COMP%]{font-size:1.5em;font-weight:700;margin-bottom:10px}#text[_ngcontent-%COMP%]{font-size:1.2em;overflow-y:auto}#text[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:0}button[disabled][_ngcontent-%COMP%]{color:#5a5a5a}button[disabled][_ngcontent-%COMP%]:active{background-color:var(--passive-colour);cursor:default}button[disabled][_ngcontent-%COMP%]:hover{cursor:default}"]],data:{}});function sL(e){return qs(0,[Us(671088640,1,{textRef:0}),(e()(),Ds(1,0,null,null,14,"app-modal",[["id","changelog-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==Yt(e,2).onKeydownHandler(l)&&t),t}),Rw,vw)),ei(2,4440064,null,0,Ew,[ol,il,Fp],{id:[0,"id"]},null),(e()(),Ds(3,0,null,0,11,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Ds(4,0,null,null,10,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Ds(5,0,null,null,0,"span",[["id","header"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Ds(6,0,[[1,0],["text",1]],null,0,"div",[["id","text"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Ds(7,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(8,0,null,null,6,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Ds(9,0,null,null,1,"button",[],[[8,"disabled",0]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.previous()&&t),t}),null,null)),(e()(),Ks(-1,null,["PREVIOUS"])),(e()(),Ds(11,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.ok()&&t),t}),null,null)),(e()(),Ks(-1,null,["CLOSE"])),(e()(),Ds(13,0,null,null,1,"button",[],[[8,"disabled",0]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.next()&&t),t}),null,null)),(e()(),Ks(-1,null,["NEXT"])),(e()(),Ds(15,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){e(n,2,0,"changelog-modal")}),(function(e,n){var l=n.component;e(n,5,0,l.getChange().VERSION),e(n,6,0,l.getChange().MESSAGE),e(n,9,0,!l.hasPrevious()),e(n,13,0,!l.hasNext())}))}class rL{constructor(e){this.modalService=e,this.modalService.registerForResourceOptions().subscribe(e=>{this.resourceOptions=Ip.clone(e),setTimeout((function(){window.document.getElementById("reserved").select()}),10)}),this.modalService.registerForCloseModal().subscribe(e=>{e!==Pu.RESOURCE_MANAGEMENT&&e!==Pu.ALL||this.modalService.sendResourceOptionsResponse(null)})}ngOnInit(){}ok(){this.modalService.sendResourceOptionsResponse(this.resourceOptions),this.modalService.close(Pu.RESOURCE_MANAGEMENT)}cancel(){this.modalService.sendResourceOptionsResponse(null),this.modalService.close(Pu.RESOURCE_MANAGEMENT)}onKeydownHandler(e){"none"!==document.getElementById("resource-management-modal").style.display&&(e.preventDefault(),this.ok())}getResourceName(){return Ou.prepareResourceName(this.resourceOptions.resource)}reset(){this.resourceOptions=new Ip(this.resourceOptions.resource)}}var uL=Kl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{padding:40px;display:flex;flex-direction:column;align-items:center;justify-content:center}#title[_ngcontent-%COMP%]{font-size:1.3em;font-weight:700;margin-bottom:20px}input[type=number][_ngcontent-%COMP%]{width:6ch}#exceptions[_ngcontent-%COMP%]{width:100%;text-align:center}.subTitle[_ngcontent-%COMP%]{padding-top:10px}.entry[_ngcontent-%COMP%], .exceptionEntry[_ngcontent-%COMP%], .subTitle[_ngcontent-%COMP%]{text-align:center}.exceptionEntry[_ngcontent-%COMP%]{display:inline-block;border:1px solid #000;min-width:100px;min-height:50px;padding:4px 4px 0;margin:5px}#buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px;padding:5px}.hidden[_ngcontent-%COMP%]{visibility:hidden}.tradeLabel[_ngcontent-%COMP%]{display:inline-block;width:200px}"]],data:{}});function oL(e){return qs(0,[(e()(),Ds(0,0,null,null,31,"div",[["class","exceptionEntry"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,7,"label",[],[[8,"htmlFor",0]],null,null,null,null)),(e()(),Ks(2,null,["",""])),(e()(),Ds(3,0,null,null,5,"input",[["type","checkbox"]],[[8,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==Yt(e,4).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==Yt(e,4).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(e.context.$implicit.enabled=l)&&t),t}),null,null)),ei(4,16384,null,0,bg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[bg]),ei(6,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(8,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(9,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(10,0,null,null,8,"input",[["min","0"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0;return"input"===n&&(t=!1!==Yt(e,11)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,11).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,11)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,11)._compositionEnd(l.target.value)&&t),"input"===n&&(t=!1!==Yt(e,12).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,12).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(e.context.$implicit.reserved=l)&&t),t}),null,null)),ei(11,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(12,16384,null,0,Vg,[ol,il],null,null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,Vg]),ei(14,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(16,16384,null,0,Mg,[[4,Pg]],null,null),ei(17,278528,null,0,la,[Cl,Il,il,ol],{ngClass:[0,"ngClass"]},null),zs(18,{hidden:0}),(e()(),Ds(19,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(20,0,null,null,3,"label",[["for","percent"]],null,null,null,null,null)),ei(21,278528,null,0,la,[Cl,Il,il,ol],{ngClass:[0,"ngClass"]},null),zs(22,{hidden:0}),(e()(),Ks(-1,null,["reserve %"])),(e()(),Ds(24,0,null,null,7,"input",[["id","percent"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==Yt(e,25).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==Yt(e,25).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(e.context.$implicit.reservedPercent=l)&&t),t}),null,null)),ei(25,16384,null,0,bg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[bg]),ei(27,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(29,16384,null,0,Mg,[[4,Pg]],null,null),ei(30,278528,null,0,la,[Cl,Il,il,ol],{ngClass:[0,"ngClass"]},null),zs(31,{hidden:0})],(function(e,n){e(n,6,0,n.context.$implicit.enabled),e(n,14,0,n.context.$implicit.reserved);var l=e(n,18,0,!n.context.$implicit.enabled);e(n,17,0,l);var t=e(n,22,0,!n.context.$implicit.enabled);e(n,21,0,t),e(n,27,0,n.context.$implicit.reservedPercent);var i=e(n,31,0,!n.context.$implicit.enabled);e(n,30,0,i)}),(function(e,n){e(n,1,0,Rt(1,"",n.context.$implicit.name,"")),e(n,2,0,n.context.$implicit.name),e(n,3,0,Rt(1,"",n.context.$implicit.name,""),Yt(n,8).ngClassUntouched,Yt(n,8).ngClassTouched,Yt(n,8).ngClassPristine,Yt(n,8).ngClassDirty,Yt(n,8).ngClassValid,Yt(n,8).ngClassInvalid,Yt(n,8).ngClassPending),e(n,10,0,Yt(n,16).ngClassUntouched,Yt(n,16).ngClassTouched,Yt(n,16).ngClassPristine,Yt(n,16).ngClassDirty,Yt(n,16).ngClassValid,Yt(n,16).ngClassInvalid,Yt(n,16).ngClassPending),e(n,24,0,Yt(n,29).ngClassUntouched,Yt(n,29).ngClassTouched,Yt(n,29).ngClassPristine,Yt(n,29).ngClassDirty,Yt(n,29).ngClassValid,Yt(n,29).ngClassInvalid,Yt(n,29).ngClassPending)}))}function aL(e){return qs(0,[(e()(),Ds(0,0,null,null,123,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),Ks(2,null,[""," management"])),(e()(),Ds(3,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(4,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(5,0,null,null,19,"span",[["class","entry"]],null,null,null,null,null)),(e()(),Ds(6,0,null,null,1,"label",[["for","reserved"]],null,null,null,null,null)),(e()(),Ks(-1,null,["reserved amount: "])),(e()(),Ds(8,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(9,0,null,null,6,"input",[["id","reserved"],["min","0"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,10)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,10).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,10)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,10)._compositionEnd(l.target.value)&&t),"input"===n&&(t=!1!==Yt(e,11).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,11).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.resourceOptions.reserve=l)&&t),t}),null,null)),ei(10,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(11,16384,null,0,Vg,[ol,il],null,null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,Vg]),ei(13,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(15,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(16,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(17,0,null,null,1,"label",[["for","mainPercent"]],null,null,null,null,null)),(e()(),Ks(-1,null,["reserve %"])),(e()(),Ds(19,0,null,null,5,"input",[["id","mainPercent"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,20).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==Yt(e,20).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.resourceOptions.reservePercent=l)&&t),t}),null,null)),ei(20,16384,null,0,bg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[bg]),ei(22,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(24,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(25,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(26,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(27,0,null,null,3,"span",[["class","subTitle"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Exceptions:"])),(e()(),Ds(29,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ks(-1,null,[" (will use it's own limit number if enabled)"])),(e()(),Ds(31,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(32,0,null,null,2,"div",[["id","exceptions"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,oL)),ei(34,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ds(35,0,null,null,3,"div",[["class","subTitle"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Auto trade settings"])),(e()(),Ds(37,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Auto trade will try to buy/sell until you have the specified amount of resource"])),(e()(),Ds(39,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(40,0,null,null,76,"div",[],null,null,null,null,null)),(e()(),Ds(41,0,null,null,1,"label",[["class","tradeLabel"],["for","autoSellEnabled"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Auto sell enabled"])),(e()(),Ds(43,0,null,null,5,"input",[["id","autoSellEnabled"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,44).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==Yt(e,44).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.resourceOptions.autoTrade.autoSellEnabled=l)&&t),t}),null,null)),ei(44,16384,null,0,bg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[bg]),ei(46,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(48,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(49,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(50,0,null,null,17,"span",[],null,null,null,null,null)),(e()(),Ds(51,0,null,null,1,"label",[["class","tradeLabel"],["for","autoSellAmount"]],null,null,null,null,null)),(e()(),Ks(-1,null,["continuous sell limit"])),(e()(),Ds(53,0,null,null,6,"input",[["id","autoSellAmount"],["min","0"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,54)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,54).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,54)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,54)._compositionEnd(l.target.value)&&t),"input"===n&&(t=!1!==Yt(e,55).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,55).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.resourceOptions.autoTrade.autoSellAmount=l)&&t),t}),null,null)),ei(54,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(55,16384,null,0,Vg,[ol,il],null,null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,Vg]),ei(57,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(59,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(60,0,null,null,5,"input",[["id","autoSellPercentage"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,61).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==Yt(e,61).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.resourceOptions.autoTrade.autoSellPercentage=l)&&t),t}),null,null)),ei(61,16384,null,0,bg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[bg]),ei(63,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(65,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(66,0,null,null,1,"label",[["for","autoSellPercentage"]],null,null,null,null,null)),(e()(),Ks(-1,null,["%"])),(e()(),Ds(68,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(69,0,null,null,1,"label",[["class","tradeLabel"],["for","autoSellOrder"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Fixed one time sell amount"])),(e()(),Ds(71,0,null,null,6,"input",[["id","autoSellOrder"],["min","0"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,72)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,72).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,72)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,72)._compositionEnd(l.target.value)&&t),"input"===n&&(t=!1!==Yt(e,73).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,73).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.resourceOptions.autoTrade.autoSellOrder=l)&&t),t}),null,null)),ei(72,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(73,16384,null,0,Vg,[ol,il],null,null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,Vg]),ei(75,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(77,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(78,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(79,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(80,0,null,null,1,"label",[["class","tradeLabel"],["for","autoBuyEnabled"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Auto buy enabled"])),(e()(),Ds(82,0,null,null,5,"input",[["id","autoBuyEnabled"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,83).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==Yt(e,83).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.resourceOptions.autoTrade.autoBuyEnabled=l)&&t),t}),null,null)),ei(83,16384,null,0,bg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[bg]),ei(85,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(87,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(88,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(89,0,null,null,17,"span",[],null,null,null,null,null)),(e()(),Ds(90,0,null,null,1,"label",[["class","tradeLabel"],["for","autoBuyAmount"]],null,null,null,null,null)),(e()(),Ks(-1,null,["continuous buy limit"])),(e()(),Ds(92,0,null,null,6,"input",[["id","autoBuyAmount"],["min","0"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,93)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,93).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,93)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,93)._compositionEnd(l.target.value)&&t),"input"===n&&(t=!1!==Yt(e,94).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,94).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.resourceOptions.autoTrade.autoBuyAmount=l)&&t),t}),null,null)),ei(93,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(94,16384,null,0,Vg,[ol,il],null,null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,Vg]),ei(96,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(98,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(99,0,null,null,5,"input",[["id","autoBuyPercentage"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==Yt(e,100).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==Yt(e,100).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.resourceOptions.autoTrade.autoBuyPercentage=l)&&t),t}),null,null)),ei(100,16384,null,0,bg,[ol,il],null,null),li(1024,null,Ig,(function(e){return[e]}),[bg]),ei(102,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(104,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(105,0,null,null,1,"label",[["for","autoBuyPercentage"]],null,null,null,null,null)),(e()(),Ks(-1,null,["%"])),(e()(),Ds(107,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(108,0,null,null,1,"label",[["class","tradeLabel"],["for","autoBuyOrder"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Fixed one time buy amount"])),(e()(),Ds(110,0,null,null,6,"input",[["id","autoBuyOrder"],["min","0"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,111)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,111).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,111)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,111)._compositionEnd(l.target.value)&&t),"input"===n&&(t=!1!==Yt(e,112).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,112).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.resourceOptions.autoTrade.autoBuyOrder=l)&&t),t}),null,null)),ei(111,16384,null,0,Ag,[ol,il,[2,yg]],null,null),ei(112,16384,null,0,Vg,[ol,il],null,null),li(1024,null,Ig,(function(e,n){return[e,n]}),[Ag,Vg]),ei(114,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(116,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(117,0,null,null,6,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Ds(118,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.ok()&&t),t}),null,null)),(e()(),Ks(-1,null,["SAVE"])),(e()(),Ds(120,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.cancel()&&t),t}),null,null)),(e()(),Ks(-1,null,["CANCEL"])),(e()(),Ds(122,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.reset()&&t),t}),null,null)),(e()(),Ks(-1,null,["RESET"]))],(function(e,n){var l=n.component;e(n,13,0,l.resourceOptions.reserve),e(n,22,0,l.resourceOptions.reservePercent),e(n,34,0,l.resourceOptions.consumers),e(n,46,0,l.resourceOptions.autoTrade.autoSellEnabled),e(n,57,0,l.resourceOptions.autoTrade.autoSellAmount),e(n,63,0,l.resourceOptions.autoTrade.autoSellPercentage),e(n,75,0,l.resourceOptions.autoTrade.autoSellOrder),e(n,85,0,l.resourceOptions.autoTrade.autoBuyEnabled),e(n,96,0,l.resourceOptions.autoTrade.autoBuyAmount),e(n,102,0,l.resourceOptions.autoTrade.autoBuyPercentage),e(n,114,0,l.resourceOptions.autoTrade.autoBuyOrder)}),(function(e,n){e(n,2,0,n.component.getResourceName()),e(n,9,0,Yt(n,15).ngClassUntouched,Yt(n,15).ngClassTouched,Yt(n,15).ngClassPristine,Yt(n,15).ngClassDirty,Yt(n,15).ngClassValid,Yt(n,15).ngClassInvalid,Yt(n,15).ngClassPending),e(n,19,0,Yt(n,24).ngClassUntouched,Yt(n,24).ngClassTouched,Yt(n,24).ngClassPristine,Yt(n,24).ngClassDirty,Yt(n,24).ngClassValid,Yt(n,24).ngClassInvalid,Yt(n,24).ngClassPending),e(n,43,0,Yt(n,48).ngClassUntouched,Yt(n,48).ngClassTouched,Yt(n,48).ngClassPristine,Yt(n,48).ngClassDirty,Yt(n,48).ngClassValid,Yt(n,48).ngClassInvalid,Yt(n,48).ngClassPending),e(n,53,0,Yt(n,59).ngClassUntouched,Yt(n,59).ngClassTouched,Yt(n,59).ngClassPristine,Yt(n,59).ngClassDirty,Yt(n,59).ngClassValid,Yt(n,59).ngClassInvalid,Yt(n,59).ngClassPending),e(n,60,0,Yt(n,65).ngClassUntouched,Yt(n,65).ngClassTouched,Yt(n,65).ngClassPristine,Yt(n,65).ngClassDirty,Yt(n,65).ngClassValid,Yt(n,65).ngClassInvalid,Yt(n,65).ngClassPending),e(n,71,0,Yt(n,77).ngClassUntouched,Yt(n,77).ngClassTouched,Yt(n,77).ngClassPristine,Yt(n,77).ngClassDirty,Yt(n,77).ngClassValid,Yt(n,77).ngClassInvalid,Yt(n,77).ngClassPending),e(n,82,0,Yt(n,87).ngClassUntouched,Yt(n,87).ngClassTouched,Yt(n,87).ngClassPristine,Yt(n,87).ngClassDirty,Yt(n,87).ngClassValid,Yt(n,87).ngClassInvalid,Yt(n,87).ngClassPending),e(n,92,0,Yt(n,98).ngClassUntouched,Yt(n,98).ngClassTouched,Yt(n,98).ngClassPristine,Yt(n,98).ngClassDirty,Yt(n,98).ngClassValid,Yt(n,98).ngClassInvalid,Yt(n,98).ngClassPending),e(n,99,0,Yt(n,104).ngClassUntouched,Yt(n,104).ngClassTouched,Yt(n,104).ngClassPristine,Yt(n,104).ngClassDirty,Yt(n,104).ngClassValid,Yt(n,104).ngClassInvalid,Yt(n,104).ngClassPending),e(n,110,0,Yt(n,116).ngClassUntouched,Yt(n,116).ngClassTouched,Yt(n,116).ngClassPristine,Yt(n,116).ngClassDirty,Yt(n,116).ngClassValid,Yt(n,116).ngClassInvalid,Yt(n,116).ngClassPending)}))}function cL(e){return qs(0,[(e()(),Ds(0,0,null,null,5,"app-modal",[["id","resource-management-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==Yt(e,1).onKeydownHandler(l)&&t),t}),Rw,vw)),ei(1,4440064,null,0,Ew,[ol,il,Fp],{id:[0,"id"]},null),(e()(),Ds(2,0,null,0,2,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,aL)),ei(4,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(5,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,1,0,"resource-management-modal"),e(n,4,0,l.resourceOptions)}),null)}class hL{constructor(e,n){this.modalService=e,this.recipeService=n,this.selectedRecipeId=-1,this.modalService.registerForCloseModal().subscribe(e=>{e!==Pu.RECIPE&&e!==Pu.ALL||(this.selectedRecipeId=-1,this.modalService.sendValueInput(null))}),this.modalService.registerForValue().subscribe(e=>{this.selectedRecipeId=e})}ngOnInit(){}ok(){this.modalService.sendValueInput(this.selectedRecipeId),this.modalService.close(Pu.RECIPE)}cancel(){this.modalService.sendValueInput(null),this.modalService.close(Pu.RECIPE)}onKeydownHandler(e){"none"!==document.getElementById("recipe-modal").style.display&&(e.preventDefault(),this.ok())}getRecipes(){return this.recipeService.getRecipes()}choose(e){this.selectedRecipeId=e.id}}var dL=Kl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}#buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px;padding:5px}app-recipe[_ngcontent-%COMP%]{font-size:.8em;width:110px;margin:4px 8px;cursor:pointer}.recipe[_ngcontent-%COMP%], app-recipe[_ngcontent-%COMP%]{display:inline-block}.selected[_ngcontent-%COMP%]{border:2px solid #000}"]],data:{}});function gL(e){return qs(0,[(e()(),Ds(0,0,null,null,4,"div",[["class","recipe"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,3,"app-recipe",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.choose(e.context.$implicit)&&t),t}),mv,jE)),ei(2,278528,null,0,la,[Cl,Il,il,ol],{ngClass:[0,"ngClass"]},null),zs(3,{selected:0}),ei(4,114688,null,0,KE,[Pf,Qp,$E],{recipe:[0,"recipe"]},null)],(function(e,n){var l=e(n,3,0,n.context.$implicit.id===n.component.selectedRecipeId);e(n,2,0,l),e(n,4,0,n.context.$implicit)}),null)}function pL(e){return qs(0,[(e()(),Ds(0,0,null,null,15,"app-modal",[["id","recipe-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==Yt(e,1).onKeydownHandler(l)&&t),t}),Rw,vw)),ei(1,4440064,null,0,Ew,[ol,il,Fp],{id:[0,"id"]},null),(e()(),Ds(2,0,null,0,12,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Ds(3,0,null,null,11,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Ds(4,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Choose recipe"])),(e()(),Ds(6,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(7,0,null,null,2,"div",[["id","recipes"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,gL)),ei(9,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ds(10,0,null,null,4,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Ds(11,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.ok()&&t),t}),null,null)),(e()(),Ks(-1,null,["CONFIRM"])),(e()(),Ds(13,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.cancel()&&t),t}),null,null)),(e()(),Ks(-1,null,["CANCEL"])),(e()(),Ds(15,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,1,0,"recipe-modal"),e(n,9,0,l.getRecipes())}),null)}class mL{constructor(e,n){this.modalService=e,this.worldService=n,this.on=!1,this.selectOrigin=!0,this.modalService.registerForRegionSelectionOrder().subscribe(e=>{this.selectOrigin=e,this.on=!0})}ngOnInit(){}select(){if(this.canSelect()){const e=this.worldService.getSelectedRegion();this.modalService.setReturnRegion(e),this.modalService.close(Pu.WORLD),this.on=!1}else this.modalService.info("Only your and neutral regions can be selected as origin")}cancel(){this.modalService.setReturnRegion(null),this.modalService.close(Pu.WORLD),this.on=!1}canSelect(){if(!this.on)return!1;{const e=this.worldService.getSelectedCountry();if(e)return!(this.selectOrigin&&e.id!==fu.PLAYER&&e.id!==fu.NEUTRAL)}}}var fL=Kl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{height:660px;max-height:660px;margin:20px;display:flex;flex-direction:column;align-items:center;justify-content:center}app-world[_ngcontent-%COMP%]{display:inline-block;height:90%;width:90%}#buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px;margin-right:4px}.inactive[_ngcontent-%COMP%]{color:#5f5f5f}.inactive[_ngcontent-%COMP%]:hover{cursor:auto}"]],data:{}});function SL(e){return qs(0,[(e()(),Ds(0,0,null,null,13,"app-modal",[["id","world-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==Yt(e,1).onKeydownHandler(l)&&t),t}),Rw,vw)),ei(1,4440064,null,0,Ew,[ol,il,Fp],{id:[0,"id"]},null),(e()(),Ds(2,0,null,0,10,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Ds(3,0,null,null,9,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Ds(4,0,null,null,1,"app-world",[],null,[[null,"keydown"],[null,"mousedown"],[null,"mousemove"],[null,"mouseup"],[null,"wheel"]],(function(e,n,l){var t=!0;return"keydown"===n&&(t=!1!==Yt(e,5).handleKeyDown(l)&&t),"mousedown"===n&&(t=!1!==Yt(e,5).dragStart(l)&&t),"mousemove"===n&&(t=!1!==Yt(e,5).mousemove(l)&&t),"mouseup"===n&&(t=!1!==Yt(e,5).dragEnd(l)&&t),"wheel"===n&&(t=!1!==Yt(e,5).onScroll(l)&&t),t}),yI,jT)),ei(5,114688,null,0,KT,[Np,zT,Gp,Qp,Fp],{selecting:[0,"selecting"]},null),(e()(),Ds(6,0,null,null,6,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Ds(7,0,null,null,3,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.select()&&t),t}),null,null)),ei(8,278528,null,0,la,[Cl,Il,il,ol],{ngClass:[0,"ngClass"]},null),zs(9,{inactive:0}),(e()(),Ks(-1,null,["Select"])),(e()(),Ds(11,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.cancel()&&t),t}),null,null)),(e()(),Ks(-1,null,["Cancel"])),(e()(),Ds(13,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,1,0,"world-modal"),e(n,5,0,!0);var t=e(n,9,0,!l.canSelect());e(n,8,0,t)}),null)}class EL{constructor(e,n,l,t){this.modalService=e,this.resourcesService=n,this.gameService=l,this.worldService=t,this.defensesCost=[[{resource:su.LOG,amount:50}],[{resource:su.LOG,amount:50},{resource:su.PLANK,amount:30}],[{resource:su.LOG,amount:50},{resource:su.CUT_STONE,amount:30}],[{resource:su.LOG,amount:80},{resource:su.CUT_STONE,amount:50}],[{resource:su.LOG,amount:80},{resource:su.PLANK,amount:40},{resource:su.CUT_STONE,amount:40}],[{resource:su.LOG,amount:100},{resource:su.PLANK,amount:60},{resource:su.CUT_STONE,amount:60}],[{resource:su.LOG,amount:100},{resource:su.PLANK,amount:80},{resource:su.CUT_STONE,amount:80}]],this.modalService.registerForWorldRegion().subscribe(e=>{this.region=e})}ngOnInit(){}isCostMet(e){let n=!0;return this.getBuildingCost(e).forEach(e=>{0!==this.resourcesService.hasResource(e.resource,e.amount,"Region construction",!0)&&(n=!1)}),n}buildBuilding(e){this.getBuildingCost(e).forEach(e=>{this.resourcesService.decreaseResource(e.resource,e.amount,"Region construction",!0)}),this.worldService.buildRegionBuilding(e.REGION_BUILDING),this.region=null,this.modalService.close(Pu.WORLD_BUILD)}hasResource(e){return 0===this.resourcesService.hasResource(e.resource,e.amount,"Region construction",!0)}getResourceName(e){return Ou.prepareResourceName(e)}buildWallNotAvailable(){this.modalService.info("Not enough resources")}getBuildings(){const e=[];return this.region.defense<7&&e.push(To.REGION_BUILDINGS.DEFENSES),!this.region.roads&&this.gameService.isEnabled(ou.LOGISTICS)&&e.push(To.REGION_BUILDINGS.ROADS),!this.region.watchtower&&this.gameService.isEnabled(ou.WOODEN_TOWER)&&e.push(To.REGION_BUILDINGS.WATCHTOWER),this.gameService.isEnabled(ou.WOODEN_TOWER)&&(void 0===this.region.army.getUnit(pu.GUARD_TOWER)||this.region.army.getUnit(pu.GUARD_TOWER).size<5)&&e.push(To.REGION_BUILDINGS.GUARD_TOWER),this.gameService.isEnabled(ou.HARBOUR)&&!this.region.harbour&&this.region.neighbours.includes(-1)&&e.push(To.REGION_BUILDINGS.HARBOUR),e}getBuildingCost(e){return e.REGION_BUILDING===xu.DEFENSES?this.defensesCost[this.region.defense]:e.COST}}var vL=Kl({encapsulation:0,styles:[["#title[_ngcontent-%COMP%]{font-size:1.3em}#title[_ngcontent-%COMP%], .building[_ngcontent-%COMP%]{text-align:center}.building[_ngcontent-%COMP%]{display:flex;flex-direction:row;border:1px solid #000;margin-bottom:10px}.buildingTitle[_ngcontent-%COMP%]{font-weight:600;background-color:var(--active-colour);border-bottom:1px solid #000}.buildingSecondRow[_ngcontent-%COMP%]{display:flex;width:100%;border-right:1px solid #000;flex-direction:column}.details[_ngcontent-%COMP%]{width:100%;text-align:center}.resourceIcon[_ngcontent-%COMP%]{height:20px;width:20px;vertical-align:middle}.description[_ngcontent-%COMP%]{margin-bottom:10px}.icon[_ngcontent-%COMP%]{display:inline-flex;flex-direction:row;align-items:center;justify-content:center;margin-right:10px}.buildButton[_ngcontent-%COMP%]{width:30%}.buildButtonNotAvailable[_ngcontent-%COMP%]{width:30%;cursor:not-allowed}.notMet[_ngcontent-%COMP%]{color:var(--negative-colour)}"]],data:{}});function RL(e){return qs(0,[(e()(),Ds(0,0,null,null,7,"span",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,6,"span",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,3,"span",[],null,null,null,null,null)),ei(3,278528,null,0,la,[Cl,Il,il,ol],{ngClass:[0,"ngClass"]},null),zs(4,{notMet:0}),(e()(),Ks(5,null,["",""])),(e()(),Ds(6,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(7,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null)],(function(e,n){var l=n.component,t=e(n,4,0,!l.hasResource(n.context.$implicit));e(n,3,0,t),e(n,7,0,l.getResourceName(n.context.$implicit.resource),"resources")}),(function(e,n){e(n,5,0,n.context.$implicit.amount)}))}function OL(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[["class","buildButton"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.buildBuilding(e.parent.context.$implicit)&&t),t}),null,null)),(e()(),Ks(-1,null,["Build "]))],null,null)}function TL(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"button",[["class","buildButtonNotAvailable"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.buildWallNotAvailable()&&t),t}),null,null)),(e()(),Ks(-1,null,["Build "]))],null,null)}function CL(e){return qs(0,[(e()(),Ds(0,0,null,null,13,"div",[["class","building"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,8,"div",[["class","buildingSecondRow"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,1,"span",[["class","buildingTitle"]],null,null,null,null,null)),(e()(),Ks(3,null,[""," "])),(e()(),Ds(4,0,null,null,5,"div",[["class","details"]],null,null,null,null,null)),(e()(),Ds(5,0,null,null,0,"div",[["id","description"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Ds(6,0,null,null,1,"div",[["class","subTitle"]],null,null,null,null,null)),(e()(),Ks(-1,null,["cost:"])),(e()(),Ms(16777216,null,null,1,null,RL)),ei(9,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ms(16777216,null,null,1,null,OL)),ei(11,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,TL)),ei(13,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,9,0,l.getBuildingCost(n.context.$implicit)),e(n,11,0,l.isCostMet(n.context.$implicit)),e(n,13,0,!l.isCostMet(n.context.$implicit))}),(function(e,n){e(n,3,0,n.context.$implicit.NAME),e(n,5,0,n.context.$implicit.DESCRIPTION)}))}function IL(e){return qs(0,[(e()(),Ds(0,0,null,null,5,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"div",[["id","title"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Region construction"])),(e()(),Ds(3,0,null,null,2,"div",[["id","buildings"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,CL)),ei(5,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,5,0,n.component.getBuildings())}),null)}function bL(e){return qs(0,[(e()(),Ds(0,0,null,null,5,"app-modal",[["id","world-build-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==Yt(e,1).onKeydownHandler(l)&&t),t}),Rw,vw)),ei(1,4440064,null,0,Ew,[ol,il,Fp],{id:[0,"id"]},null),(e()(),Ds(2,0,null,0,2,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,IL)),ei(4,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(5,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,1,0,"world-build-modal"),e(n,4,0,l.region)}),null)}class yL{constructor(e){this.modalService=e,this.text="",this.value=""}ngOnInit(){this.modalService.registerForText().subscribe(e=>{this.text=e,this.inputRef.nativeElement.select()}),this.modalService.registerForValue().subscribe(e=>this.value=e)}ok(){this.modalService.sendValueInput(this.value),this.modalService.close(Pu.INPUT)}cancel(){this.modalService.sendValueInput(null),this.modalService.close(Pu.INPUT)}onKeydownHandler(e){"none"!==document.getElementById("input-modal").style.display&&(e.preventDefault(),this.ok())}}var AL=Kl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}#buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px;padding:5px}"]],data:{}});function NL(e){return qs(0,[Us(402653184,1,{inputRef:0}),(e()(),Ds(1,0,null,null,18,"app-modal",[["id","input-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==Yt(e,2).onKeydownHandler(l)&&t),t}),Rw,vw)),ei(2,4440064,null,0,Ew,[ol,il,Fp],{id:[0,"id"]},null),(e()(),Ds(3,0,null,0,15,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Ds(4,0,null,null,14,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Ds(5,0,null,null,0,"span",[["id","text"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Ds(6,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(7,0,[[1,0],["input",1]],null,5,"input",[["id","input"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==Yt(e,8)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==Yt(e,8).onTouched()&&t),"compositionstart"===n&&(t=!1!==Yt(e,8)._compositionStart()&&t),"compositionend"===n&&(t=!1!==Yt(e,8)._compositionEnd(l.target.value)&&t),"ngModelChange"===n&&(t=!1!==(i.value=l)&&t),t}),null,null)),ei(8,16384,null,0,Ag,[ol,il,[2,yg]],null,null),li(1024,null,Ig,(function(e){return[e]}),[Ag]),ei(10,671744,null,0,vp,[[8,null],[8,null],[8,null],[6,Ig]],{model:[0,"model"]},{update:"ngModelChange"}),li(2048,null,Pg,null,[vp]),ei(12,16384,null,0,Mg,[[4,Pg]],null,null),(e()(),Ds(13,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(14,0,null,null,4,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Ds(15,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.ok()&&t),t}),null,null)),(e()(),Ks(-1,null,["CONFIRM"])),(e()(),Ds(17,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.cancel()&&t),t}),null,null)),(e()(),Ks(-1,null,["CANCEL"])),(e()(),Ds(19,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,2,0,"input-modal"),e(n,10,0,l.value)}),(function(e,n){e(n,5,0,n.component.text),e(n,7,0,Yt(n,12).ngClassUntouched,Yt(n,12).ngClassTouched,Yt(n,12).ngClassPristine,Yt(n,12).ngClassDirty,Yt(n,12).ngClassValid,Yt(n,12).ngClassInvalid,Yt(n,12).ngClassPending)}))}class _L{constructor(e,n,l,t){this.modalService=e,this.heritageService=n,this.gameService=l,this.techService=t,this.modalService.registerForTech().subscribe(e=>{this.tech=e})}ngOnInit(){}ok(){this.hasQueueSpace()?this.modalService.sendConfirmationResult(!0):this.modalService.sendConfirmationResult(!1),this.tech=null,this.modalService.close(Pu.RESEARCH_UNLOCK)}cancel(){this.modalService.sendConfirmationResult(!1),this.tech=null,this.modalService.close(Pu.RESEARCH_UNLOCK)}onKeydownHandler(e){"none"!==document.getElementById("research-unlock-modal").style.display&&(e.preventDefault(),this.ok())}hasQueueSpace(){return this.techService.hasQueueSpace()}requiredHeritagePoints(){let e=0,n=10*this.tech.getRequiredResearchPoints();return Array.from(this.tech.getCost()).forEach(e=>{n+=e[0]===su.FOOD?Math.ceil(e[1]/50):mo.getResource(e[0]).TRADE_VALUE*e[1]}),n>0&&(e+=Math.ceil(n/100)),e}hasHeritagePoints(){return this.heritageService.hasHeritagePoints(this.requiredHeritagePoints())}unlockWithHeritage(){this.meetsPrerequisites()?this.heritageService.spendHeritagePoints(this.requiredHeritagePoints())?this.techService.finishTech(this.tech.getTech()):this.modalService.info("Not enough Heritage Points"):this.modalService.info("Prerequisites not met"),this.modalService.sendConfirmationResult(!1),this.tech=null,this.modalService.close(Pu.RESEARCH_UNLOCK)}isHeritageUnlocked(){return this.gameService.isEnabled(ou.HERITAGE)}getHeritagePoints(){return this.heritageService.getAvailableHeritagePoints()}getHeritageCap(){return this.heritageService.getHeritagePoints()}meetsPrerequisites(){let e=!0;const n=this.techService.getTechDone();return this.tech.getPrerequisites().forEach(l=>{e&&(n.includes(l)||(e=!1))}),this.tech.getFlagPrerequisites().forEach(n=>{this.gameService.isEnabled(n)||e&&(e=!1)}),e}}var wL=Kl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;max-width:750px;margin:200px auto auto}#buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px;padding:5px}.center[_ngcontent-%COMP%]{text-align:center}.disabled[_ngcontent-%COMP%]{color:#5a5a5a}"]],data:{}});function PL(e){return qs(0,[(e()(),Ds(0,0,null,null,7,"div",[["class","center"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,0,"span",[["id","text"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Ds(2,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(3,0,null,null,4,"div",[["class","buttons"]],null,null,null,null,null)),(e()(),Ds(4,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.ok()&&t),t}),null,null)),(e()(),Ks(-1,null,["YES"])),(e()(),Ds(6,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.cancel()&&t),t}),null,null)),(e()(),Ks(-1,null,["NO"]))],null,(function(e,n){e(n,1,0,"Are you sure you want to start researching "+n.component.tech.getTechName()+"?")}))}function ML(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"div",[["class","center"]],null,null,null,null,null)),(e()(),Ks(-1,null,[" Research queue is full "])),(e()(),Ds(2,0,null,null,0,"br",[],null,null,null,null,null))],null,null)}function DL(e){return qs(0,[(e()(),Ds(0,0,null,null,7,"div",[["class","center"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Ks(2,null,[" Unlock with Heritage Points (","/",") "])),(e()(),Ds(3,0,null,null,4,"div",[["class","buttons"]],null,null,null,null,null)),(e()(),Ds(4,0,null,null,3,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.unlockWithHeritage()&&t),t}),null,null)),ei(5,278528,null,0,la,[Cl,Il,il,ol],{ngClass:[0,"ngClass"]},null),zs(6,{disabled:0}),(e()(),Ks(7,null,["unlock for "," HP"]))],(function(e,n){var l=n.component,t=e(n,6,0,!l.hasHeritagePoints()||!l.meetsPrerequisites());e(n,5,0,t)}),(function(e,n){var l=n.component;e(n,2,0,l.getHeritagePoints(),l.getHeritageCap()),e(n,7,0,l.requiredHeritagePoints())}))}function LL(e){return qs(0,[(e()(),Ds(0,0,null,null,6,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,PL)),ei(2,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,ML)),ei(4,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,DL)),ei(6,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.hasQueueSpace()),e(n,4,0,!l.hasQueueSpace()),e(n,6,0,l.isHeritageUnlocked())}),null)}function xL(e){return qs(0,[(e()(),Ds(0,0,null,null,5,"app-modal",[["id","research-unlock-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==Yt(e,1).onKeydownHandler(l)&&t),t}),Rw,vw)),ei(1,4440064,null,0,Ew,[ol,il,Fp],{id:[0,"id"]},null),(e()(),Ds(2,0,null,0,2,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,LL)),ei(4,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(5,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,1,0,"research-unlock-modal"),e(n,4,0,l.tech)}),null)}class kL{constructor(e,n,l,t){this.modalService=e,this.resourcesService=n,this.gameService=l,this.navyService=t,this.selectedShip=pu.BOAT,this.troops=pu,this.limitToBoat=!1,e.registerForShipyardLimitBoat().subscribe(e=>{this.limitToBoat=e,this.selectedShip=pu.BOAT})}ngOnInit(){}onKeydownHandler(e){"none"!==document.getElementById("shipyard-modal").style.display&&(e.preventDefault(),this.cancel())}build(){if(this.hasPort())if(this.hasResources()){if(!(this.resourcesService.getPeople()>=this.getShipStats().CREW))return void this.modalService.info("Not enough sailors!");this.resourcesService.removeRecruit(this.getShipStats().CREW),this.getCost().forEach(e=>{this.resourcesService.decreaseResource(e.resource,e.amount,"ship construction",!0)}),this.modalService.sendValueInput(this.selectedShip),this.modalService.close(Pu.SHIPYARD)}else this.modalService.info("Not enough resources!");else this.modalService.info("Not enough port space!")}cancel(){this.modalService.close(Pu.SHIPYARD)}hasResources(){let e=!0;return this.getCost().forEach(n=>{e&&(e=this.hasResource(n.resource,n.amount))}),e}hasResource(e,n){return 0===this.resourcesService.hasResource(e,n,"ship construction",!0)}getCost(){return fo.getTroop(this.selectedShip).COST}getResourceName(e){return Ou.prepareResourceName(e)}getShipStats(){return fo.getTroop(this.selectedShip)}hasPort(){return this.navyService.getFreeHarbourSpace()>=this.getShipStats().SIZE}hasPeople(){return this.resourcesService.getPeople()>=this.getShipStats().CREW}isBrigantineUnlocked(){return this.gameService.isEnabled(ou.BRIGANTINE)}isGalleonUnlocked(){return this.gameService.isEnabled(ou.GALLEON)}}var FL=Kl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:1.2em;max-width:750px;margin:100px auto auto}.lineBreak[_ngcontent-%COMP%]{display:block}#modes[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-bottom:10px}.mode[_ngcontent-%COMP%]{display:flex;cursor:pointer;flex-direction:column;height:150px;width:200px;border:1px solid #000;align-items:center;margin-right:5px;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box}.mode[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100px}.mode[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700}.mode[_ngcontent-%COMP%]   .effect[_ngcontent-%COMP%]{font-size:.8em}#buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-top:10px}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px;white-space:nowrap}.disabled[_ngcontent-%COMP%]{color:#5a5a5a}.selected[_ngcontent-%COMP%]{border:3px solid #000}.notMet[_ngcontent-%COMP%]{color:var(--negative-colour)}#costList[_ngcontent-%COMP%], #stats[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center}.center[_ngcontent-%COMP%]{text-align:center}h5[_ngcontent-%COMP%]{margin-bottom:5px}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;margin-right:10px}"]],data:{}});function UL(e){return qs(0,[(e()(),Ds(0,0,null,null,5,"div",[["class","mode"]],null,[[null,"click"]],(function(e,n,l){var t=!0,i=e.component;return"click"===n&&(t=!1!==(i.selectedShip=i.troops.BRIGANTINE)&&t),t}),null,null)),ei(1,278528,null,0,la,[Cl,Il,il,ol],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),zs(2,{selected:0}),(e()(),Ds(3,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Brigantine"])),(e()(),Ds(5,0,null,null,0,"img",[["src","assets/sea/brigantine.svg"]],null,null,null,null,null))],(function(e,n){var l=n.component,t=e(n,2,0,l.selectedShip===l.troops.BRIGANTINE);e(n,1,0,"mode",t)}),null)}function HL(e){return qs(0,[(e()(),Ds(0,0,null,null,5,"div",[["class","mode"]],null,[[null,"click"]],(function(e,n,l){var t=!0,i=e.component;return"click"===n&&(t=!1!==(i.selectedShip=i.troops.GALLEON)&&t),t}),null,null)),ei(1,278528,null,0,la,[Cl,Il,il,ol],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),zs(2,{selected:0}),(e()(),Ds(3,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Galleon"])),(e()(),Ds(5,0,null,null,0,"img",[["src","assets/sea/galleon.svg"]],null,null,null,null,null))],(function(e,n){var l=n.component,t=e(n,2,0,l.selectedShip===l.troops.GALLEON);e(n,1,0,"mode",t)}),null)}function GL(e){return qs(0,[(e()(),Ds(0,0,null,null,6,"div",[],null,null,null,null,null)),ei(1,278528,null,0,la,[Cl,Il,il,ol],{ngClass:[0,"ngClass"]},null),zs(2,{notMet:0}),(e()(),Ds(3,0,null,null,3,"span",[["class","icon"]],null,null,null,null,null)),(e()(),Ks(4,null,[""," "])),(e()(),Ds(5,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(6,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null)],(function(e,n){var l=n.component,t=e(n,2,0,!l.hasResource(n.context.$implicit.resource,n.context.$implicit.amount));e(n,1,0,t),e(n,6,0,l.getResourceName(n.context.$implicit.resource),"resources")}),(function(e,n){e(n,4,0,n.context.$implicit.amount)}))}function BL(e){return qs(0,[(e()(),Ds(0,0,null,null,48,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"h5",[["class","center"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Cost"])),(e()(),Ds(3,0,null,null,14,"div",[["id","costList"]],null,null,null,null,null)),(e()(),Ds(4,0,null,null,5,"span",[["class","icon"]],null,null,null,null,null)),ei(5,278528,null,0,la,[Cl,Il,il,ol],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),zs(6,{notMet:0}),(e()(),Ks(7,null,[""," "])),(e()(),Ds(8,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(9,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),Ds(10,0,null,null,5,"span",[["class","icon"]],null,null,null,null,null)),ei(11,278528,null,0,la,[Cl,Il,il,ol],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),zs(12,{notMet:0}),(e()(),Ks(13,null,[""," "])),(e()(),Ds(14,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(15,114688,null,0,Rg,[],{name:[0,"name"],title:[1,"title"]},null),(e()(),Ms(16777216,null,null,1,null,GL)),ei(17,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ds(18,0,null,null,1,"h5",[["class","center"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Stats"])),(e()(),Ds(20,0,null,null,28,"div",[["id","stats"]],null,null,null,null,null)),(e()(),Ds(21,0,null,null,3,"span",[["class","icon"]],null,null,null,null,null)),(e()(),Ks(22,null,[""," "])),(e()(),Ds(23,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(24,114688,null,0,Rg,[],{name:[0,"name"]},null),(e()(),Ds(25,0,null,null,3,"span",[["class","icon"]],null,null,null,null,null)),(e()(),Ks(26,null,[""," "])),(e()(),Ds(27,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(28,114688,null,0,Rg,[],{name:[0,"name"]},null),(e()(),Ds(29,0,null,null,3,"span",[["class","icon"]],null,null,null,null,null)),(e()(),Ks(30,null,[""," "])),(e()(),Ds(31,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(32,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ds(33,0,null,null,3,"span",[["class","icon"]],null,null,null,null,null)),(e()(),Ks(34,null,[""," "])),(e()(),Ds(35,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(36,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ds(37,0,null,null,3,"span",[["class","icon"]],null,null,null,null,null)),(e()(),Ks(38,null,[""," "])),(e()(),Ds(39,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(40,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ds(41,0,null,null,3,"span",[["class","icon"]],null,null,null,null,null)),(e()(),Ks(42,null,[""," "])),(e()(),Ds(43,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(44,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ds(45,0,null,null,3,"span",[["class","icon"]],null,null,null,null,null)),(e()(),Ks(46,null,[""," "])),(e()(),Ds(47,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(48,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null)],(function(e,n){var l=n.component,t=e(n,6,0,!l.hasPort());e(n,5,0,"icon",t),e(n,9,0,"port","sea","port space");var i=e(n,12,0,!l.hasPeople());e(n,11,0,"icon",i),e(n,15,0,"hammer","sailors"),e(n,17,0,l.getCost()),e(n,24,0,"size"),e(n,28,0,"cargo"),e(n,32,0,"speed","army"),e(n,36,0,"speed","army"),e(n,40,0,"coins","resources"),e(n,44,0,"attack","army"),e(n,48,0,"defense","army")}),(function(e,n){var l=n.component;e(n,7,0,l.getShipStats().SIZE),e(n,13,0,l.getShipStats().CREW),e(n,22,0,l.getShipStats().SIZE),e(n,26,0,l.getShipStats().CARGO),e(n,30,0,l.getShipStats().SPEED),e(n,34,0,l.getShipStats().SPEED),e(n,38,0,l.getShipStats().PAY),e(n,42,0,l.getShipStats().STRENGTH),e(n,46,0,l.getShipStats().DEFENSE)}))}function VL(e){return qs(0,[(e()(),Ds(0,0,null,null,27,"app-modal",[["id","shipyard-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==Yt(e,1).onKeydownHandler(l)&&t),t}),Rw,vw)),ei(1,4440064,null,0,Ew,[ol,il,Fp],{id:[0,"id"]},null),(e()(),Ds(2,0,null,0,24,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Ds(3,0,null,null,23,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Ds(4,0,null,null,1,"h2",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Select ship to build"])),(e()(),Ds(6,0,null,null,10,"div",[["id","modes"]],null,null,null,null,null)),(e()(),Ds(7,0,null,null,5,"div",[["class","mode"]],null,[[null,"click"]],(function(e,n,l){var t=!0,i=e.component;return"click"===n&&(t=!1!==(i.selectedShip=i.troops.BOAT)&&t),t}),null,null)),ei(8,278528,null,0,la,[Cl,Il,il,ol],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),zs(9,{selected:0}),(e()(),Ds(10,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Boat"])),(e()(),Ds(12,0,null,null,0,"img",[["src","assets/sea/boat.svg"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,UL)),ei(14,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,HL)),ei(16,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(17,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,BL)),ei(19,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(20,0,null,null,6,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Ds(21,0,null,null,3,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.build()&&t),t}),null,null)),ei(22,278528,null,0,la,[Cl,Il,il,ol],{ngClass:[0,"ngClass"]},null),zs(23,{disabled:0}),(e()(),Ks(-1,null,["BUILD"])),(e()(),Ds(25,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.cancel()&&t),t}),null,null)),(e()(),Ks(-1,null,["CANCEL"])),(e()(),Ds(27,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,1,0,"shipyard-modal");var t=e(n,9,0,l.selectedShip===l.troops.BOAT);e(n,8,0,"mode",t),e(n,14,0,!l.limitToBoat&&l.isBrigantineUnlocked()),e(n,16,0,!l.limitToBoat&&l.isGalleonUnlocked()),e(n,19,0,l.selectedShip);var i=e(n,23,0,!l.hasPort()||!l.hasPeople()||!l.hasResources());e(n,22,0,i)}),null)}class WL{constructor(e){this.modalService=e,this.errorReport=null,this.modalService.registerForErrorReport().subscribe(e=>this.errorReport=e),this.modalService.registerForCloseModal().subscribe(e=>{e===Pu.ERROR&&(this.errorReport=null)})}ngOnInit(){}ok(){this.modalService.close(Pu.ERROR)}onKeydownHandler(e){"none"!==document.getElementById("error-modal").style.display&&(e.preventDefault(),this.ok())}}var YL=Kl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:1.2em}#title[_ngcontent-%COMP%]{font-weight:700}#wrapper[_ngcontent-%COMP%]{width:100%;text-align:center}#errorBox[_ngcontent-%COMP%]{width:100%;resize:none}"]],data:{}});function zL(e){return qs(0,[(e()(),Ds(0,0,null,null,10,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(3,null,["",""])),(e()(),Ds(4,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(5,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(6,0,null,null,1,"label",[["for","errorBox"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Full error:"])),(e()(),Ds(8,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(9,0,null,null,1,"textarea",[["id","errorBox"],["readonly",""],["rows","20"]],null,null,null,null,null)),(e()(),Ks(10,null,["",""]))],null,(function(e,n){var l=n.component;e(n,3,0,l.errorReport.message),e(n,10,0,l.errorReport.fullError)}))}function $L(e){return qs(0,[(e()(),Ds(0,0,null,null,11,"app-modal",[["id","error-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==Yt(e,1).onKeydownHandler(l)&&t),t}),Rw,vw)),ei(1,4440064,null,0,Ew,[ol,il,Fp],{id:[0,"id"]},null),(e()(),Ds(2,0,null,0,8,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Ds(3,0,null,null,7,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Ds(4,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Error report"])),(e()(),Ms(16777216,null,null,1,null,zL)),ei(7,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(8,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(9,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.ok()&&t),t}),null,null)),(e()(),Ks(-1,null,["OK"])),(e()(),Ds(11,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,1,0,"error-modal"),e(n,7,0,l.errorReport)}),null)}class KL{constructor(e){this.modalService=e,this.modalService.registerForText().subscribe(e=>this.text=e)}ngOnInit(){}ok(){this.modalService.sendConfirmationResult(!0),this.modalService.close(Pu.CONFIRM)}cancel(){this.modalService.sendConfirmationResult(!1),this.modalService.close(Pu.CONFIRM)}onKeydownHandler(e){"none"!==document.getElementById("confirm-modal").style.display&&(e.preventDefault(),this.ok())}}var jL=Kl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;max-width:750px;margin:200px auto auto}#buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px;padding:5px}"]],data:{}});function QL(e){return qs(0,[(e()(),Ds(0,0,null,null,11,"app-modal",[["id","confirm-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==Yt(e,1).onKeydownHandler(l)&&t),t}),Rw,vw)),ei(1,4440064,null,0,Ew,[ol,il,Fp],{id:[0,"id"]},null),(e()(),Ds(2,0,null,0,8,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Ds(3,0,null,null,7,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Ds(4,0,null,null,0,"span",[["id","text"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Ds(5,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(6,0,null,null,4,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Ds(7,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.ok()&&t),t}),null,null)),(e()(),Ks(-1,null,["YES"])),(e()(),Ds(9,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.cancel()&&t),t}),null,null)),(e()(),Ks(-1,null,["NO"])),(e()(),Ds(11,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){e(n,1,0,"confirm-modal")}),(function(e,n){e(n,4,0,n.component.text)}))}class qL{constructor(e){this.modalService=e,this.text="",this.modalService.registerForText().subscribe(e=>this.text=e)}ngOnInit(){}ok(){this.modalService.close(Pu.INFO)}onKeydownHandler(e){"none"!==document.getElementById("info-modal").style.display&&(e.preventDefault(),this.ok())}}var XL=Kl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:1.2em;max-width:750px;margin:200px auto auto}"]],data:{}});function ZL(e){return qs(0,[(e()(),Ds(0,0,null,null,8,"app-modal",[["id","info-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==Yt(e,1).onKeydownHandler(l)&&t),t}),Rw,vw)),ei(1,4440064,null,0,Ew,[ol,il,Fp],{id:[0,"id"]},null),(e()(),Ds(2,0,null,0,5,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Ds(3,0,null,null,4,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Ds(4,0,null,null,0,"span",[["id","text"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Ds(5,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(6,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.ok()&&t),t}),null,null)),(e()(),Ks(-1,null,["OK"])),(e()(),Ds(8,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){e(n,1,0,"info-modal")}),(function(e,n){e(n,4,0,n.component.text)}))}class JL{constructor(){}ngOnInit(){}}var ex=Kl({encapsulation:0,styles:[[""]],data:{}});function nx(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"app-build-modal",[],null,null,null,Gw,Hw)),ei(1,114688,null,0,Uw,[Fp],null,null),(e()(),Ds(2,0,null,null,1,"app-abdication-modal",[],null,null,null,wP,_P)),ei(3,114688,null,0,NP,[Fp,AP,VI,Np,Gp],null,null),(e()(),Ds(4,0,null,null,1,"app-ascension-modal",[],null,[["document","keydown.enter"]],(function(e,n,l){var t=!0;return"document:keydown.enter"===n&&(t=!1!==Yt(e,5).onKeydownHandler(l)&&t),t}),DP,MP)),ei(5,114688,null,0,PP,[Fp],null,null),(e()(),Ds(6,0,null,null,1,"app-fight-report-modal",[],null,null,null,zP,xP)),ei(7,114688,null,0,LP,[Fp,zT],null,null),(e()(),Ds(8,0,null,null,1,"app-export-modal",[],null,null,null,qP,KP)),ei(9,114688,null,0,$P,[AP,Fp],null,null),(e()(),Ds(10,0,null,null,1,"app-import-modal",[],null,null,null,JP,ZP)),ei(11,114688,null,0,XP,[AP,Fp],null,null),(e()(),Ds(12,0,null,null,1,"app-hard-reset-modal",[],null,null,null,lM,nM)),ei(13,114688,null,0,eM,[Fp,AP],null,null),(e()(),Ds(14,0,null,null,1,"app-options-modal",[],null,null,null,EM,iM)),ei(15,114688,null,0,tM,[wp,Np,Fp],null,null),(e()(),Ds(16,0,null,null,1,"app-royal-modal",[],null,null,null,CM,RM)),ei(17,114688,null,0,vM,[Wp,Vp,Fp],null,null),(e()(),Ds(18,0,null,null,1,"app-mission-modal",[],null,null,null,mD,bM)),ei(19,114688,null,0,IM,[Np,Fp,lE,Qp,zT],null,null),(e()(),Ds(20,0,null,null,1,"app-festival-modal",[],null,[["document","keydown.enter"]],(function(e,n,l){var t=!0;return"document:keydown.enter"===n&&(t=!1!==Yt(e,21).onKeydownHandler(l)&&t),t}),CD,SD)),ei(21,114688,null,0,fD,[Fp,zp,Qp,Gp],null,null),(e()(),Ds(22,0,null,null,1,"app-market-modal",[],null,[["document","keydown.enter"]],(function(e,n,l){var t=!0;return"document:keydown.enter"===n&&(t=!1!==Yt(e,23).onKeydownHandler(l)&&t),t}),PD,bD)),ei(23,114688,null,0,ID,[Fp,Qp],null,null),(e()(),Ds(24,0,null,null,1,"app-work-management-modal",[],null,[["document","keydown.enter"]],(function(e,n,l){var t=!0;return"document:keydown.enter"===n&&(t=!1!==Yt(e,25).onKeydownHandler(l)&&t),t}),QD,DD)),ei(25,114688,null,0,MD,[Np,Fp,Qp],null,null),(e()(),Ds(26,0,null,null,1,"app-tutorial-modal",[],null,null,null,lL,XD)),ei(27,4308992,null,0,qD,[Fp,Up,Ww,Nn],null,null),(e()(),Ds(28,0,null,null,1,"app-changelog-modal",[],null,[["document","keydown.enter"]],(function(e,n,l){var t=!0;return"document:keydown.enter"===n&&(t=!1!==Yt(e,29).onKeydownHandler(l)&&t),t}),sL,iL)),ei(29,114688,null,0,tL,[Fp],null,null),(e()(),Ds(30,0,null,null,1,"app-resource-management-modal",[],null,[["document","keydown.enter"]],(function(e,n,l){var t=!0;return"document:keydown.enter"===n&&(t=!1!==Yt(e,31).onKeydownHandler(l)&&t),t}),cL,uL)),ei(31,114688,null,0,rL,[Fp],null,null),(e()(),Ds(32,0,null,null,1,"app-recipe-modal",[],null,[["document","keydown.enter"]],(function(e,n,l){var t=!0;return"document:keydown.enter"===n&&(t=!1!==Yt(e,33).onKeydownHandler(l)&&t),t}),pL,dL)),ei(33,114688,null,0,hL,[Fp,cm],null,null),(e()(),Ds(34,0,null,null,1,"app-world-modal",[],null,null,null,SL,fL)),ei(35,114688,null,0,mL,[Fp,zT],null,null),(e()(),Ds(36,0,null,null,1,"app-world-build-modal",[],null,null,null,bL,vL)),ei(37,114688,null,0,EL,[Fp,Qp,Gp,zT],null,null),(e()(),Ds(38,0,null,null,1,"app-input-modal",[],null,[["document","keydown.enter"]],(function(e,n,l){var t=!0;return"document:keydown.enter"===n&&(t=!1!==Yt(e,39).onKeydownHandler(l)&&t),t}),NL,AL)),ei(39,114688,null,0,yL,[Fp],null,null),(e()(),Ds(40,0,null,null,1,"app-research-unlock-modal",[],null,[["document","keydown.enter"]],(function(e,n,l){var t=!0;return"document:keydown.enter"===n&&(t=!1!==Yt(e,41).onKeydownHandler(l)&&t),t}),xL,wL)),ei(41,114688,null,0,_L,[Fp,VI,Gp,sR],null,null),(e()(),Ds(42,0,null,null,1,"app-shipyard-modal",[],null,[["document","keydown.enter"]],(function(e,n,l){var t=!0;return"document:keydown.enter"===n&&(t=!1!==Yt(e,43).onKeydownHandler(l)&&t),t}),VL,FL)),ei(43,114688,null,0,kL,[Fp,Qp,Gp,YT],null,null),(e()(),Ds(44,0,null,null,1,"app-error-modal",[],null,[["document","keydown.enter"]],(function(e,n,l){var t=!0;return"document:keydown.enter"===n&&(t=!1!==Yt(e,45).onKeydownHandler(l)&&t),t}),$L,YL)),ei(45,114688,null,0,WL,[Fp],null,null),(e()(),Ds(46,0,null,null,1,"app-confirm-modal",[],null,[["document","keydown.enter"]],(function(e,n,l){var t=!0;return"document:keydown.enter"===n&&(t=!1!==Yt(e,47).onKeydownHandler(l)&&t),t}),QL,jL)),ei(47,114688,null,0,KL,[Fp],null,null),(e()(),Ds(48,0,null,null,1,"app-info-modal",[],null,[["document","keydown.enter"]],(function(e,n,l){var t=!0;return"document:keydown.enter"===n&&(t=!1!==Yt(e,49).onKeydownHandler(l)&&t),t}),ZL,XL)),ei(49,114688,null,0,qL,[Fp],null,null)],(function(e,n){e(n,1,0),e(n,3,0),e(n,5,0),e(n,7,0),e(n,9,0),e(n,11,0),e(n,13,0),e(n,15,0),e(n,17,0),e(n,19,0),e(n,21,0),e(n,23,0),e(n,25,0),e(n,27,0),e(n,29,0),e(n,31,0),e(n,33,0),e(n,35,0),e(n,37,0),e(n,39,0),e(n,41,0),e(n,43,0),e(n,45,0),e(n,47,0),e(n,49,0)}),null)}class lx{constructor(e){this.calendarService=e}ngOnInit(){}getDay(){return this.calendarService.getDay()}getYear(){return this.calendarService.getYear()}getSeason(){return Pp[this.calendarService.getSeason()].toLowerCase()}polarToCartesian(e,n,l,t){const i=(t-90)*Math.PI/180;return{x:e+l*Math.cos(i),y:n+l*Math.sin(i)}}describeArc(e,n,l,t,i){360===i&&(i=359.9);const s=this.polarToCartesian(e,n,l,i),r=this.polarToCartesian(e,n,l,t);return["M",s.x,s.y,"A",l,l,0,i-t<=180?"0":"1",0,r.x,r.y,"L",e,n,"L",s.x,s.y].join(" ")}getTickNumber(){return this.calendarService.getTickInDay()-1}}var tx=Kl({encapsulation:0,styles:[[".progress-circle[_ngcontent-%COMP%]{margin-bottom:-2px}"]],data:{}});function ix(e){return qs(0,[(e()(),Ds(0,0,null,null,5,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Ks(1,null,[" day: "," "])),(e()(),Ds(2,0,null,null,2,":svg:svg",[["class","progress-circle"],["height","22px"],["width","23px"]],null,null,null,null,null)),(e()(),Ds(3,0,null,null,0,":svg:circle",[["cx","11"],["cy","11"],["fill","transparent"],["r","10"],["stroke","black"],["stroke-width","1.5"]],null,null,null,null,null)),(e()(),Ds(4,0,null,null,0,":svg:path",[],[[1,"d",0]],null,null,null,null)),(e()(),Ks(5,null,[" year: "," ","\n"]))],null,(function(e,n){var l=n.component;e(n,1,0,l.getDay()),e(n,4,0,l.describeArc(11,11,8,0,36*l.getTickNumber())),e(n,5,0,l.getYear(),l.getSeason())}))}class sx{constructor(e,n,l,t,i,s,r,u,o,a,c,h,d,g){this.serializerService=e,this.servicesService=n,this.logService=l,this.modalService=t,this.resourcesService=i,this.weatherService=s,this.optionsService=r,this.gameService=u,this.tickerService=o,this.tutorialService=a,this.techService=c,this.religionService=h,this.router=d,this.managementService=g,this.metric=this.optionsService.getOption(_p.METRIC),this.optionsSubscription||(this.optionsSubscription=this.optionsService.registerForOptionsChange().subscribe(()=>this.metric=this.optionsService.getOption(_p.METRIC)))}ngOnInit(){this.resources=this.resourcesService.getResources(),this.resourcesService.registerForResourcesChange().subscribe(e=>{this.resources=e})}getResourcesValues(){return Array.from(this.resources.values())}save(){this.serializerService.initSave(),this.logService.log("saved")}load(){this.serializerService.initLoad()}import(){this.modalService.open(Pu.IMPORT)}export(){this.modalService.open(Pu.EXPORT)}hardReset(){this.modalService.open(Pu.HARD_RESET)}options(){this.modalService.open(Pu.OPTIONS)}getTemperature(){return this.weatherService.getCurrentTemperature()}getWeather(){return this.weatherService.getCurrentWeather()}getWeatherName(){return Tu[this.getWeather()].toLowerCase()}calendarEnabled(){return this.gameService.isEnabled(ou.CALENDAR)}softReset(){this.modalService.open(Pu.ABDICATION)}isNotCoins(e){return e.resource!==su.COINS}resetTutorials(){this.tutorialService.resetTutorials()}pause(){this.tickerService.pause()}resume(){this.tickerService.resume()}isPaused(){return this.tickerService.isPaused()}getResourceDescription(e){let n="";return e.hasResourceType(du.CONSUMABLE)&&(n+="nutrition: "+mo.getResource(e.resource).POWER),e.hasResourceType(du.FUEL)&&(n+="heating energy: "+mo.getResource(e.resource).POWER),""!==n?"<hr>"+n:n}getResourceConsumers(e){let n="",l="<b>used by:</b><br>";const t=this.resourcesService.getResourceUses(e.resource),i=[];t&&(t.slice().forEach(e=>{const n=i.find(n=>n[0]===e.userName);n?n[1]+=e.value:i.push([e.userName,e.value])}),i.sort((e,n)=>e[0].localeCompare(n[0])).forEach(e=>{l+=e[0]+": "+e[1]+"<br>"})),"<b>used by:</b><br>"!==l&&(n+="<hr>"+l),l="<b>produced by:</b><br>";const s=this.resourcesService.getResourceProductions(e.resource),r=[];return s&&(s.slice().forEach(e=>{const n=r.find(n=>n[0]===e.producerName);n?n[1]+=e.value:r.push([e.producerName,e.value])}),r.sort((e,n)=>e[0].localeCompare(n[0])).forEach(e=>{l+=e[0]+": "+e[1]+"<br>"})),"<b>produced by:</b><br>"!==l&&(n+="<hr>"+l),n}showCurrentTutorial(){this.tutorialService.showCurrentViewTutorial()}getFoodValue(){return this.resourcesService.getFoodValue("Village")}isFoodNutritionEnabled(){return this.managementService.getFoodNutrition()}getConsumableResources(){return this.resourcesService.getResourcesByType(du.CONSUMABLE).filter(e=>e.isVisible())}getDailyNutritionUsage(){return 5*(this.resourcesService.getTotalPeople()-1)*this.managementService.getRations()}getAverageDailyNutritionProduction(){return this.resourcesService.getAverageNutritionProduction()}getRations(){return.5*this.managementService.getRations()}isHeaderTwoLines(){return this.managementService.getSecondHeaderRow()}showFreeWorkers(){return this.managementService.getShowFreeWorkers()}getFreeWorkers(){return this.resourcesService.getPeople()}showPopulation(){return this.managementService.getShowPopulation()}getPopulation(){return this.resourcesService.getTotalPeople()+"/"+this.resourcesService.getPopulationCap()}isManagementResearched(){return this.gameService.isEnabled(ou.MANAGEMENT)}showResearchProgress(){return this.managementService.getShowResearchProgress()}getResearchProgress(){const e=this.techService.getCurrentResearch();return e?Ou.prepareTechName(e.getTech())+": "+e.getResearchPoints()+"/"+e.getRequiredResearchPoints():"no research"}showFaith(){return this.managementService.getShowFaith()}showHappiness(){return this.managementService.getShowHappiness()}getFaith(){return this.religionService.getFaith()+"/"+this.religionService.getFaithCap()}isFaithUnlocked(){return this.gameService.isEnabled(ou.RELIGION)}isRawEnabled(){return this.managementService.getShowRaw()}geRawResources(){return this.resourcesService.getResourcesByType(du.RAW).filter(e=>e.isVisible())}isProcessedEnabled(){return this.managementService.getShowProcessed()}geProcessedResources(){return this.resourcesService.getResourcesByType(du.PROCESSED).filter(e=>e.isVisible())}isFoodEnabled(){return this.managementService.getShowFood()}geFoodResources(){return this.resourcesService.getResourcesByType(du.FOOD).filter(e=>e.isVisible())}isToolsEnabled(){return this.managementService.getShowTools()}geToolsResources(){return this.resourcesService.getResourcesByType(du.TOOLS).filter(e=>e.isVisible())}openHappiness(){this.router.navigate(["/management/happiness"])}}var rx=Kl({encapsulation:0,styles:[["#wrapperTwoLines[_ngcontent-%COMP%]{flex-direction:column}#wrapperOneLine[_ngcontent-%COMP%], #wrapperTwoLines[_ngcontent-%COMP%]{font-size:1em;display:flex;height:100%;align-items:center}.line[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:50%;width:100%}button[_ngcontent-%COMP%]{width:100%;margin:0;padding:0}.highlighted[_ngcontent-%COMP%]{display:inline-block}#cog[_ngcontent-%COMP%]{float:right;margin-top:-2px;height:30px}#cog[_ngcontent-%COMP%]:hover{cursor:pointer}.dropdown[_ngcontent-%COMP%]{position:absolute;right:4px;display:inline-block}.dropdown-content[_ngcontent-%COMP%]{cursor:pointer;display:none;position:absolute;list-style:none;background-color:#f9f9f9;min-width:150px;right:0;font-size:1.2em;margin-top:25px;padding:0;border:1px solid #000;z-index:1000}.dropdown-content[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:pointer}.dropdown[_ngcontent-%COMP%]:hover   .dropdown-content[_ngcontent-%COMP%]{display:block}.dropdown-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background-color:var(--passive-colour);border:1px solid #000;padding:3px}.dropdown-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:var(--active-colour)}#cog[_ngcontent-%COMP%]{width:30px}#temp[_ngcontent-%COMP%]{padding-top:2px;padding-left:5px}.full[_ngcontent-%COMP%]{font-weight:600}app-calendar[_ngcontent-%COMP%]{display:inline-block;font-size:1.1em}#right[_ngcontent-%COMP%]{position:absolute;display:flex;flex-direction:row;font-size:1.1em;margin-top:2px;right:40px}app-icon[_ngcontent-%COMP%]{margin-right:3px}#weather[_ngcontent-%COMP%], app-icon[_ngcontent-%COMP%]{flex:0 0 auto}.icon[_ngcontent-%COMP%]{font-size:1.1em;display:flex;flex-direction:row;align-items:center}hr[_ngcontent-%COMP%]{border-color:#000}.center[_ngcontent-%COMP%]{text-align:center}app-happiness[_ngcontent-%COMP%]{cursor:pointer}"]],data:{}});function ux(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(2,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(3,null,["","/"," "]))],(function(e,n){var l=n.context.$implicit.getName();e(n,2,0,l,"resources")}),(function(e,n){e(n,3,0,n.context.$implicit.amount,n.context.$implicit.limit)}))}function ox(e){return qs(0,[(e()(),Ds(0,0,null,null,18,"div",[["appTooltip",""],["class","highlighted icon tooltip"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==Yt(e,1).onmousemove(l)&&t),t}),null,null)),ei(1,16384,null,0,vg,[],{elementId:[0,"elementId"]},null),(e()(),Ds(2,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(3,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),Ks(4,null,["\xa0"," "])),(e()(),Ds(5,0,null,null,13,"span",[["id","nutTolltip"]],null,null,null,null,null)),(e()(),Ks(-1,null,[" Total food nutrition"])),(e()(),Ds(7,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(8,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Ks(9,null,[" Rations: ",""])),(e()(),Ds(10,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ks(11,null,[" Daily consumption: ",""])),(e()(),Ds(12,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ks(13,null,[" Average daily production: ",""])),Ys(14,2),(e()(),Ds(15,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(16,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,ux)),ei(18,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,1,0,"nutTolltip"),e(n,3,0,"food","resources",""),e(n,18,0,l.getConsumableResources())}),(function(e,n){var l=n.component;e(n,4,0,l.getFoodValue()),e(n,9,0,l.getRations()),e(n,11,0,l.getDailyNutritionUsage());var t=$l(n,13,0,e(n,14,0,Yt(n.parent.parent,0),l.getAverageDailyNutritionProduction(),"0.0-0"));e(n,13,0,t)}))}function ax(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(2,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(3,null,["","/"," "]))],(function(e,n){var l=n.context.$implicit.getName();e(n,2,0,l,"resources")}),(function(e,n){e(n,3,0,n.context.$implicit.amount,n.context.$implicit.limit)}))}function cx(e){return qs(0,[(e()(),Ds(0,0,null,null,5,"div",[["appTooltip",""],["class","highlighted icon tooltip"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==Yt(e,1).onmousemove(l)&&t),t}),null,null)),ei(1,16384,null,0,vg,[],{elementId:[0,"elementId"]},null),(e()(),Ks(-1,null,[" \xa0RAW "])),(e()(),Ds(3,0,null,null,2,"span",[["id","rawTolltip"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,ax)),ei(5,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,1,0,"rawTolltip"),e(n,5,0,l.geRawResources())}),null)}function hx(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(2,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(3,null,["","/"," "]))],(function(e,n){var l=n.parent.context.$implicit.getName();e(n,2,0,l,"resources")}),(function(e,n){e(n,3,0,n.parent.context.$implicit.amount,n.parent.context.$implicit.limit)}))}function dx(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(2,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(3,null,[""," "]))],(function(e,n){var l=n.parent.context.$implicit.getName();e(n,2,0,l,"resources")}),(function(e,n){e(n,3,0,n.parent.context.$implicit.amount)}))}function gx(e){return qs(0,[(e()(),Ds(0,0,null,null,4,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,hx)),ei(2,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,dx)),ei(4,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.isNotCoins(n.context.$implicit)),e(n,4,0,!l.isNotCoins(n.context.$implicit))}),null)}function px(e){return qs(0,[(e()(),Ds(0,0,null,null,5,"div",[["appTooltip",""],["class","highlighted icon tooltip"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==Yt(e,1).onmousemove(l)&&t),t}),null,null)),ei(1,16384,null,0,vg,[],{elementId:[0,"elementId"]},null),(e()(),Ks(-1,null,[" \xa0PROCESSED "])),(e()(),Ds(3,0,null,null,2,"span",[["id","processedTolltip"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,gx)),ei(5,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,1,0,"processedTolltip"),e(n,5,0,l.geProcessedResources())}),null)}function mx(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(2,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(3,null,["","/"," "]))],(function(e,n){var l=n.context.$implicit.getName();e(n,2,0,l,"resources")}),(function(e,n){e(n,3,0,n.context.$implicit.amount,n.context.$implicit.limit)}))}function fx(e){return qs(0,[(e()(),Ds(0,0,null,null,5,"div",[["appTooltip",""],["class","highlighted icon tooltip"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==Yt(e,1).onmousemove(l)&&t),t}),null,null)),ei(1,16384,null,0,vg,[],{elementId:[0,"elementId"]},null),(e()(),Ks(-1,null,[" \xa0FOOD "])),(e()(),Ds(3,0,null,null,2,"span",[["id","foodTolltip"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,mx)),ei(5,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,1,0,"foodTolltip"),e(n,5,0,l.geFoodResources())}),null)}function Sx(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(2,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(3,null,["","/"," "]))],(function(e,n){var l=n.context.$implicit.getName();e(n,2,0,l,"resources")}),(function(e,n){e(n,3,0,n.context.$implicit.amount,n.context.$implicit.limit)}))}function Ex(e){return qs(0,[(e()(),Ds(0,0,null,null,5,"div",[["appTooltip",""],["class","highlighted icon tooltip"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==Yt(e,1).onmousemove(l)&&t),t}),null,null)),ei(1,16384,null,0,vg,[],{elementId:[0,"elementId"]},null),(e()(),Ks(-1,null,[" \xa0TOOLS "])),(e()(),Ds(3,0,null,null,2,"span",[["id","toolsTolltip"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,Sx)),ei(5,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,1,0,"toolsTolltip"),e(n,5,0,l.geToolsResources())}),null)}function vx(e){return qs(0,[(e()(),Ds(0,0,null,null,6,"div",[["appTooltip",""],["class","highlighted icon tooltip"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==Yt(e,1).onmousemove(l)&&t),t}),null,null)),ei(1,16384,null,0,vg,[],{elementId:[0,"elementId"]},null),(e()(),Ds(2,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(3,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),Ks(4,null,["\xa0"," "])),(e()(),Ds(5,0,null,null,1,"span",[["id","nutTolltip"]],null,null,null,null,null)),(e()(),Ks(-1,null,[" Total food nutrition "]))],(function(e,n){e(n,1,0,"nutTolltip"),e(n,3,0,"food","resources","")}),(function(e,n){e(n,4,0,n.component.getFoodValue())}))}function Rx(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"div",[["class","highlighted icon"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(2,114688,null,0,Rg,[],{name:[0,"name"]},null),(e()(),Ks(3,null,[" "," "]))],(function(e,n){e(n,2,0,"population")}),(function(e,n){e(n,3,0,n.component.getPopulation())}))}function Ox(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"div",[["class","highlighted icon"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(2,114688,null,0,Rg,[],{name:[0,"name"],title:[1,"title"]},null),(e()(),Ks(3,null,[" "," "]))],(function(e,n){e(n,2,0,"hammer","Workers")}),(function(e,n){e(n,3,0,n.component.getFreeWorkers())}))}function Tx(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"div",[["class","highlighted icon"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-happiness",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.openHappiness()&&t),t}),Py,by)),ei(2,114688,null,0,Iy,[zp],null,null),(e()(),Ks(-1,null,[" \xa0 "]))],(function(e,n){e(n,2,0)}),null)}function Cx(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"div",[["class","highlighted icon"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(2,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),Ks(3,null,[" "," \xa0 "]))],(function(e,n){e(n,2,0,"faith","religion","Faith")}),(function(e,n){e(n,3,0,n.component.getFaith())}))}function Ix(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[["class","highlighted icon"]],null,null,null,null,null)),(e()(),Ks(1,null,[" "," "]))],null,(function(e,n){e(n,1,0,n.component.getResearchProgress())}))}function bx(e){return qs(0,[(e()(),Ds(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),Ks(1,null,["","/",""]))],null,(function(e,n){var l=n.parent.parent.context.$implicit.getAmount(),t=n.parent.parent.context.$implicit.getLimit();e(n,1,0,l,t)}))}function yx(e){return qs(0,[(e()(),Ds(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),Ks(1,null,["","/",""]))],null,(function(e,n){var l=n.parent.parent.context.$implicit.getAmount(),t=n.parent.parent.context.$implicit.getLimit();e(n,1,0,l,t)}))}function Ax(e){return qs(0,[(e()(),Ds(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),Ks(1,null,["",""]))],null,(function(e,n){var l=n.parent.parent.context.$implicit.getAmount();e(n,1,0,l)}))}function Nx(e){return qs(0,[(e()(),Ds(0,0,null,null,16,"span",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,15,"span",[["appTooltip",""],["class","icon tooltip"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==Yt(e,2).onmousemove(l)&&t),t}),null,null)),ei(2,16384,null,0,vg,[],{elementId:[0,"elementId"]},null),(e()(),Ds(3,0,null,null,4,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),Ds(4,0,null,null,1,"div",[["class","center"]],null,null,null,null,null)),(e()(),Ks(5,null,["",""])),(e()(),Ds(6,0,null,null,0,"div",[["class","center"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Ds(7,0,null,null,0,"div",[["class","center"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Ds(8,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(9,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),Ms(16777216,null,null,1,null,bx)),ei(11,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,yx)),ei(13,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,Ax)),ei(15,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ks(-1,null,[" \xa0"]))],(function(e,n){var l=n.component;e(n,2,0,1e5*n.parent.context.$implicit.resource);var t=n.parent.context.$implicit.getName();e(n,9,0,t,"resources","");var i=n.parent.context.$implicit.getAmount()===n.parent.context.$implicit.getLimit();e(n,11,0,i);var s=l.isNotCoins(n.parent.context.$implicit)&&n.parent.context.$implicit.getAmount()!==n.parent.context.$implicit.getLimit();e(n,13,0,s),e(n,15,0,!l.isNotCoins(n.parent.context.$implicit))}),(function(e,n){var l=n.component;e(n,3,0,Rt(1,"",1e5*n.parent.context.$implicit.resource,"")),e(n,5,0,n.parent.context.$implicit.name),e(n,6,0,l.getResourceDescription(n.parent.context.$implicit)),e(n,7,0,l.getResourceConsumers(n.parent.context.$implicit))}))}function _x(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"div",[["class","highlighted"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,Nx)),ei(2,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){e(n,2,0,n.context.$implicit.visible&&n.context.$implicit.highlighted)}),null)}function wx(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"app-calendar",[],null,null,null,ix,tx)),ei(1,114688,null,0,lx,[Lp],null,null)],(function(e,n){e(n,1,0)}),null)}function Px(e){return qs(0,[(e()(),Ds(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),Ks(-1,null,["\xb0C"]))],null,null)}function Mx(e){return qs(0,[(e()(),Ds(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),Ks(-1,null,["\xb0F"]))],null,null)}function Dx(e){return qs(0,[(e()(),Ds(0,0,null,null,0,"img",[["alt","settings"],["draggable","false"],["id","cog"],["src","assets/settings.svg"]],null,null,null,null,null))],null,null)}function Lx(e){return qs(0,[(e()(),Ds(0,0,null,null,0,"img",[["alt","settings"],["draggable","false"],["id","cog"],["src","assets/pause.svg"]],null,null,null,null,null))],null,null)}function xx(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.pause()&&t),t}),null,null)),(e()(),Ks(-1,null,["pause game"]))],null,null)}function kx(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.resume()&&t),t}),null,null)),(e()(),Ks(-1,null,["resume game"]))],null,null)}function Fx(e){return qs(0,[(e()(),Ds(0,0,null,null,70,"div",[["id","wrapperOneLine"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,ox)),ei(2,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,cx)),ei(4,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,px)),ei(6,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,fx)),ei(8,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,Ex)),ei(10,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,vx)),ei(12,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,Rx)),ei(14,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ks(-1,null,[" \xa0 "])),(e()(),Ms(16777216,null,null,1,null,Ox)),ei(17,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ks(-1,null,[" \xa0 "])),(e()(),Ms(16777216,null,null,1,null,Tx)),ei(20,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,Cx)),ei(22,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,Ix)),ei(24,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ks(-1,null,[" \xa0 "])),(e()(),Ms(16777216,null,null,1,null,_x)),ei(27,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null),(e()(),Ks(-1,null,[" \xa0 "])),(e()(),Ds(29,0,null,null,13,"div",[["id","right"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,wx)),ei(31,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(32,0,null,null,10,"span",[["class","icon"],["id","weather"]],null,null,null,null,null)),(e()(),Ks(-1,null,[" \xa0 "])),(e()(),Ds(34,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(35,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ds(36,0,null,null,6,null,null,null,null,null,null,null)),(e()(),Ks(37,null,[""," "])),Ys(38,2),(e()(),Ms(16777216,null,null,1,null,Px)),ei(40,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,Mx)),ei(42,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(43,0,null,null,27,"div",[["class","dropdown"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,Dx)),ei(45,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,Lx)),ei(47,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(48,0,null,null,22,"ul",[["class","dropdown-content"]],null,null,null,null,null)),(e()(),Ds(49,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.options()&&t),t}),null,null)),(e()(),Ks(-1,null,["options"])),(e()(),Ds(51,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.save()&&t),t}),null,null)),(e()(),Ks(-1,null,["save"])),(e()(),Ds(53,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.load()&&t),t}),null,null)),(e()(),Ks(-1,null,["load"])),(e()(),Ds(55,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.import()&&t),t}),null,null)),(e()(),Ks(-1,null,["import"])),(e()(),Ds(57,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.export()&&t),t}),null,null)),(e()(),Ks(-1,null,["export"])),(e()(),Ms(16777216,null,null,1,null,xx)),ei(60,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,kx)),ei(62,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(63,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.showCurrentTutorial()&&t),t}),null,null)),(e()(),Ks(-1,null,["show current tab tutorial"])),(e()(),Ds(65,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.resetTutorials()&&t),t}),null,null)),(e()(),Ks(-1,null,["reset tutorials"])),(e()(),Ds(67,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.softReset()&&t),t}),null,null)),(e()(),Ks(-1,null,["abdicate"])),(e()(),Ds(69,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.hardReset()&&t),t}),null,null)),(e()(),Ks(-1,null,["hard reset"]))],(function(e,n){var l=n.component;e(n,2,0,l.isFoodNutritionEnabled()&&l.isManagementResearched()),e(n,4,0,l.isRawEnabled()&&l.isManagementResearched()),e(n,6,0,l.isProcessedEnabled()&&l.isManagementResearched()),e(n,8,0,l.isFoodEnabled()&&l.isManagementResearched()),e(n,10,0,l.isToolsEnabled()&&l.isManagementResearched()),e(n,12,0,l.isFoodNutritionEnabled()&&!l.isManagementResearched()),e(n,14,0,l.showPopulation()),e(n,17,0,l.showFreeWorkers()),e(n,20,0,l.showHappiness()&&l.isManagementResearched()),e(n,22,0,l.showFaith()&&l.isFaithUnlocked()),e(n,24,0,l.showResearchProgress()),e(n,27,0,l.getResourcesValues()),e(n,31,0,l.calendarEnabled()),e(n,35,0,l.getWeatherName(),"weather"),e(n,40,0,l.metric),e(n,42,0,!l.metric),e(n,45,0,!l.isPaused()),e(n,47,0,l.isPaused()),e(n,60,0,!l.isPaused()),e(n,62,0,l.isPaused())}),(function(e,n){var l=n.component,t=$l(n,37,0,e(n,38,0,Yt(n.parent,0),l.getTemperature(),"0.0-1"));e(n,37,0,t)}))}function Ux(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(2,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(3,null,["","/"," "]))],(function(e,n){var l=n.context.$implicit.getName();e(n,2,0,l,"resources")}),(function(e,n){e(n,3,0,n.context.$implicit.amount,n.context.$implicit.limit)}))}function Hx(e){return qs(0,[(e()(),Ds(0,0,null,null,18,"div",[["appTooltip",""],["class","highlighted icon tooltip"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==Yt(e,1).onmousemove(l)&&t),t}),null,null)),ei(1,16384,null,0,vg,[],{elementId:[0,"elementId"]},null),(e()(),Ds(2,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(3,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),Ks(4,null,["\xa0"," "])),(e()(),Ds(5,0,null,null,13,"span",[["id","nutTolltip"]],null,null,null,null,null)),(e()(),Ks(-1,null,[" Nutrition"])),(e()(),Ds(7,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(8,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Ks(9,null,[" Rations: ",""])),(e()(),Ds(10,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ks(11,null,[" Daily consumption: ",""])),(e()(),Ds(12,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ks(13,null,[" Average daily production: ",""])),Ys(14,2),(e()(),Ds(15,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ds(16,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,Ux)),ei(18,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,1,0,"nutTolltip"),e(n,3,0,"food","resources",""),e(n,18,0,l.getConsumableResources())}),(function(e,n){var l=n.component;e(n,4,0,l.getFoodValue()),e(n,9,0,l.getRations()),e(n,11,0,l.getDailyNutritionUsage());var t=$l(n,13,0,e(n,14,0,Yt(n.parent.parent,0),l.getAverageDailyNutritionProduction(),"0.0-0"));e(n,13,0,t)}))}function Gx(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(2,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(3,null,["","/"," "]))],(function(e,n){var l=n.context.$implicit.getName();e(n,2,0,l,"resources")}),(function(e,n){e(n,3,0,n.context.$implicit.amount,n.context.$implicit.limit)}))}function Bx(e){return qs(0,[(e()(),Ds(0,0,null,null,5,"div",[["appTooltip",""],["class","highlighted icon tooltip"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==Yt(e,1).onmousemove(l)&&t),t}),null,null)),ei(1,16384,null,0,vg,[],{elementId:[0,"elementId"]},null),(e()(),Ks(-1,null,[" \xa0RAW "])),(e()(),Ds(3,0,null,null,2,"span",[["id","rawTolltip"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,Gx)),ei(5,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,1,0,"rawTolltip"),e(n,5,0,l.geRawResources())}),null)}function Vx(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(2,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(3,null,["","/"," "]))],(function(e,n){var l=n.parent.context.$implicit.getName();e(n,2,0,l,"resources")}),(function(e,n){e(n,3,0,n.parent.context.$implicit.amount,n.parent.context.$implicit.limit)}))}function Wx(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(2,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(3,null,[""," "]))],(function(e,n){var l=n.parent.context.$implicit.getName();e(n,2,0,l,"resources")}),(function(e,n){e(n,3,0,n.parent.context.$implicit.amount)}))}function Yx(e){return qs(0,[(e()(),Ds(0,0,null,null,4,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,Vx)),ei(2,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,Wx)),ei(4,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.isNotCoins(n.context.$implicit)),e(n,4,0,!l.isNotCoins(n.context.$implicit))}),null)}function zx(e){return qs(0,[(e()(),Ds(0,0,null,null,5,"div",[["appTooltip",""],["class","highlighted icon tooltip"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==Yt(e,1).onmousemove(l)&&t),t}),null,null)),ei(1,16384,null,0,vg,[],{elementId:[0,"elementId"]},null),(e()(),Ks(-1,null,[" \xa0PROCESSED "])),(e()(),Ds(3,0,null,null,2,"span",[["id","processedTolltip"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,Yx)),ei(5,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,1,0,"processedTolltip"),e(n,5,0,l.geProcessedResources())}),null)}function $x(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(2,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(3,null,["","/"," "]))],(function(e,n){var l=n.context.$implicit.getName();e(n,2,0,l,"resources")}),(function(e,n){e(n,3,0,n.context.$implicit.amount,n.context.$implicit.limit)}))}function Kx(e){return qs(0,[(e()(),Ds(0,0,null,null,5,"div",[["appTooltip",""],["class","highlighted icon tooltip"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==Yt(e,1).onmousemove(l)&&t),t}),null,null)),ei(1,16384,null,0,vg,[],{elementId:[0,"elementId"]},null),(e()(),Ks(-1,null,[" \xa0FOOD "])),(e()(),Ds(3,0,null,null,2,"span",[["id","foodTolltip"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,$x)),ei(5,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,1,0,"foodTolltip"),e(n,5,0,l.geFoodResources())}),null)}function jx(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(2,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ks(3,null,["","/"," "]))],(function(e,n){var l=n.context.$implicit.getName();e(n,2,0,l,"resources")}),(function(e,n){e(n,3,0,n.context.$implicit.amount,n.context.$implicit.limit)}))}function Qx(e){return qs(0,[(e()(),Ds(0,0,null,null,5,"div",[["appTooltip",""],["class","highlighted icon tooltip"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==Yt(e,1).onmousemove(l)&&t),t}),null,null)),ei(1,16384,null,0,vg,[],{elementId:[0,"elementId"]},null),(e()(),Ks(-1,null,[" \xa0TOOLS "])),(e()(),Ds(3,0,null,null,2,"span",[["id","toolsTolltip"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,jx)),ei(5,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,1,0,"toolsTolltip"),e(n,5,0,l.geToolsResources())}),null)}function qx(e){return qs(0,[(e()(),Ds(0,0,null,null,6,"div",[["appTooltip",""],["class","highlighted icon tooltip"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==Yt(e,1).onmousemove(l)&&t),t}),null,null)),ei(1,16384,null,0,vg,[],{elementId:[0,"elementId"]},null),(e()(),Ds(2,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(3,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),Ks(4,null,["\xa0"," "])),(e()(),Ds(5,0,null,null,1,"span",[["id","nutTolltip"]],null,null,null,null,null)),(e()(),Ks(-1,null,[" Total food nutrition "]))],(function(e,n){e(n,1,0,"nutTolltip"),e(n,3,0,"food","resources","")}),(function(e,n){e(n,4,0,n.component.getFoodValue())}))}function Xx(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"div",[["class","highlighted icon"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(2,114688,null,0,Rg,[],{name:[0,"name"]},null),(e()(),Ks(3,null,[" "," "]))],(function(e,n){e(n,2,0,"population")}),(function(e,n){e(n,3,0,n.component.getPopulation())}))}function Zx(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"div",[["class","highlighted icon"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(2,114688,null,0,Rg,[],{name:[0,"name"],title:[1,"title"]},null),(e()(),Ks(3,null,[" "," "]))],(function(e,n){e(n,2,0,"hammer","Workers")}),(function(e,n){e(n,3,0,n.component.getFreeWorkers())}))}function Jx(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"div",[["class","highlighted icon"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-happiness",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.openHappiness()&&t),t}),Py,by)),ei(2,114688,null,0,Iy,[zp],null,null),(e()(),Ks(-1,null,[" \xa0 "]))],(function(e,n){e(n,2,0)}),null)}function ek(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"div",[["class","highlighted icon"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(2,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),Ks(3,null,[" "," \xa0 "]))],(function(e,n){e(n,2,0,"faith","religion","Faith")}),(function(e,n){e(n,3,0,n.component.getFaith())}))}function nk(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"div",[["class","highlighted icon"]],null,null,null,null,null)),(e()(),Ks(1,null,[" "," "]))],null,(function(e,n){e(n,1,0,n.component.getResearchProgress())}))}function lk(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"app-calendar",[],null,null,null,ix,tx)),ei(1,114688,null,0,lx,[Lp],null,null)],(function(e,n){e(n,1,0)}),null)}function tk(e){return qs(0,[(e()(),Ds(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),Ks(-1,null,["\xb0C"]))],null,null)}function ik(e){return qs(0,[(e()(),Ds(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),Ks(-1,null,["\xb0F"]))],null,null)}function sk(e){return qs(0,[(e()(),Ds(0,0,null,null,0,"img",[["alt","settings"],["draggable","false"],["id","cog"],["ondragstart","return false;"],["src","assets/settings.svg"]],null,null,null,null,null))],null,null)}function rk(e){return qs(0,[(e()(),Ds(0,0,null,null,0,"img",[["alt","settings"],["draggable","false"],["id","cog"],["ondragstart","return false;"],["src","assets/pause.svg"]],null,null,null,null,null))],null,null)}function uk(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.pause()&&t),t}),null,null)),(e()(),Ks(-1,null,["pause game"]))],null,null)}function ok(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.resume()&&t),t}),null,null)),(e()(),Ks(-1,null,["resume game"]))],null,null)}function ak(e){return qs(0,[(e()(),Ds(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),Ks(1,null,["","/",""]))],null,(function(e,n){var l=n.parent.parent.context.$implicit.getAmount(),t=n.parent.parent.context.$implicit.getLimit();e(n,1,0,l,t)}))}function ck(e){return qs(0,[(e()(),Ds(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),Ks(1,null,["","/",""]))],null,(function(e,n){var l=n.parent.parent.context.$implicit.getAmount(),t=n.parent.parent.context.$implicit.getLimit();e(n,1,0,l,t)}))}function hk(e){return qs(0,[(e()(),Ds(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),Ks(1,null,["",""]))],null,(function(e,n){var l=n.parent.parent.context.$implicit.getAmount();e(n,1,0,l)}))}function dk(e){return qs(0,[(e()(),Ds(0,0,null,null,16,"span",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,15,"span",[["appTooltip",""],["class","icon tooltip"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==Yt(e,2).onmousemove(l)&&t),t}),null,null)),ei(2,16384,null,0,vg,[],{elementId:[0,"elementId"]},null),(e()(),Ds(3,0,null,null,4,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),Ds(4,0,null,null,1,"div",[["class","center"]],null,null,null,null,null)),(e()(),Ks(5,null,["",""])),(e()(),Ds(6,0,null,null,0,"div",[["class","center"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Ds(7,0,null,null,0,"div",[["class","center"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Ds(8,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(9,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),Ms(16777216,null,null,1,null,ak)),ei(11,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,ck)),ei(13,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,hk)),ei(15,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ks(-1,null,[" \xa0"]))],(function(e,n){var l=n.component;e(n,2,0,1e5*n.parent.context.$implicit.resource);var t=n.parent.context.$implicit.getName();e(n,9,0,t,"resources","");var i=n.parent.context.$implicit.getAmount()===n.parent.context.$implicit.getLimit();e(n,11,0,i);var s=l.isNotCoins(n.parent.context.$implicit)&&n.parent.context.$implicit.getAmount()!==n.parent.context.$implicit.getLimit();e(n,13,0,s),e(n,15,0,!l.isNotCoins(n.parent.context.$implicit))}),(function(e,n){var l=n.component;e(n,3,0,Rt(1,"",1e5*n.parent.context.$implicit.resource,"")),e(n,5,0,n.parent.context.$implicit.name),e(n,6,0,l.getResourceDescription(n.parent.context.$implicit)),e(n,7,0,l.getResourceConsumers(n.parent.context.$implicit))}))}function gk(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"div",[["class","highlighted"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,dk)),ei(2,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){e(n,2,0,n.context.$implicit.visible&&n.context.$implicit.highlighted)}),null)}function pk(e){return qs(0,[(e()(),Ds(0,0,null,null,71,"div",[["id","wrapperTwoLines"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,67,"div",[["class","line"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,Hx)),ei(3,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,Bx)),ei(5,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,zx)),ei(7,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,Kx)),ei(9,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,Qx)),ei(11,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,qx)),ei(13,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,Xx)),ei(15,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ks(-1,null,[" \xa0 "])),(e()(),Ms(16777216,null,null,1,null,Zx)),ei(18,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ks(-1,null,[" \xa0 "])),(e()(),Ms(16777216,null,null,1,null,Jx)),ei(21,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,ek)),ei(23,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,nk)),ei(25,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ks(-1,null,[" \xa0 "])),(e()(),Ds(27,0,null,null,13,"div",[["id","right"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,lk)),ei(29,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(30,0,null,null,10,"span",[["class","icon"],["id","weather"]],null,null,null,null,null)),(e()(),Ks(-1,null,[" \xa0 "])),(e()(),Ds(32,0,null,null,1,"app-icon",[],null,null,null,Tg,Og)),ei(33,114688,null,0,Rg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Ds(34,0,null,null,6,null,null,null,null,null,null,null)),(e()(),Ks(35,null,[""," "])),Ys(36,2),(e()(),Ms(16777216,null,null,1,null,tk)),ei(38,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,ik)),ei(40,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(41,0,null,null,27,"div",[["class","dropdown"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,sk)),ei(43,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,rk)),ei(45,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(46,0,null,null,22,"ul",[["class","dropdown-content"]],null,null,null,null,null)),(e()(),Ds(47,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.options()&&t),t}),null,null)),(e()(),Ks(-1,null,["options"])),(e()(),Ds(49,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.save()&&t),t}),null,null)),(e()(),Ks(-1,null,["save"])),(e()(),Ds(51,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.load()&&t),t}),null,null)),(e()(),Ks(-1,null,["load"])),(e()(),Ds(53,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.import()&&t),t}),null,null)),(e()(),Ks(-1,null,["import"])),(e()(),Ds(55,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.export()&&t),t}),null,null)),(e()(),Ks(-1,null,["export"])),(e()(),Ms(16777216,null,null,1,null,uk)),ei(58,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,ok)),ei(60,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(61,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.showCurrentTutorial()&&t),t}),null,null)),(e()(),Ks(-1,null,["show current tab tutorial"])),(e()(),Ds(63,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.resetTutorials()&&t),t}),null,null)),(e()(),Ks(-1,null,["reset tutorials"])),(e()(),Ds(65,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.softReset()&&t),t}),null,null)),(e()(),Ks(-1,null,["abdicate"])),(e()(),Ds(67,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.hardReset()&&t),t}),null,null)),(e()(),Ks(-1,null,["hard reset"])),(e()(),Ds(69,0,null,null,2,"div",[["class","line"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,gk)),ei(71,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,3,0,l.isFoodNutritionEnabled()&&l.isManagementResearched()),e(n,5,0,l.isRawEnabled()&&l.isManagementResearched()),e(n,7,0,l.isProcessedEnabled()&&l.isManagementResearched()),e(n,9,0,l.isFoodEnabled()&&l.isManagementResearched()),e(n,11,0,l.isToolsEnabled()&&l.isManagementResearched()),e(n,13,0,l.isFoodNutritionEnabled()&&!l.isManagementResearched()),e(n,15,0,l.showPopulation()),e(n,18,0,l.showFreeWorkers()),e(n,21,0,l.showHappiness()&&l.isManagementResearched()),e(n,23,0,l.showFaith()&&l.isFaithUnlocked()),e(n,25,0,l.showResearchProgress()),e(n,29,0,l.calendarEnabled()),e(n,33,0,l.getWeatherName(),"weather"),e(n,38,0,l.metric),e(n,40,0,!l.metric),e(n,43,0,!l.isPaused()),e(n,45,0,l.isPaused()),e(n,58,0,!l.isPaused()),e(n,60,0,l.isPaused()),e(n,71,0,l.getResourcesValues())}),(function(e,n){var l=n.component,t=$l(n,35,0,e(n,36,0,Yt(n.parent,0),l.getTemperature(),"0.0-1"));e(n,35,0,t)}))}function mk(e){return qs(0,[ni(0,Ea,[ki]),Us(671088640,1,{line1Ref:0}),Us(671088640,2,{line22Ref:0}),(e()(),Ms(16777216,null,null,1,null,Fx)),ei(4,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,pk)),ei(6,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,4,0,!l.isHeaderTwoLines()),e(n,6,0,l.isHeaderTwoLines())}),null)}class fk{constructor(e,n,l){this.gameService=e,this.resourcesService=n,this.router=l}ngOnInit(){}isWeatherEnabled(){return this.gameService.isEnabled(ou.WEATHER)}isMarketEnabled(){return this.gameService.isEnabled(ou.MARKET)}isManagementEnabled(){return this.gameService.isEnabled(ou.MANAGEMENT)}isResearchEnabled(){return this.gameService.isEnabled(ou.RESEARCH)}isArmyEnabled(){return this.gameService.isEnabled(ou.ARMY)}isReligionEnabled(){return this.gameService.isEnabled(ou.RELIGION)}isCraftingEnabled(){return this.gameService.isEnabled(ou.CRAFTING)}isHeritageUnlocked(){return this.gameService.isEnabled(ou.HERITAGE)}isCartographyEnabled(){return this.gameService.isEnabled(ou.CARTOGRAPHY)}isDev(){return!Qu.production}isInRegions(){return this.router.url.includes("/regions/")}isNavyEnabled(){return this.gameService.isEnabled(ou.NAVY)}getVillageStageName(){let e="Village";return go.forEach(n=>{this.resourcesService.getPopulationCap()>=n.population&&(e=n.name)}),e}}var Sk=Kl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{display:flex;height:100%;flex-direction:column}.entry[_ngcontent-%COMP%]{height:5%;border-bottom:2px solid #000}.entry[_ngcontent-%COMP%], .entry2[_ngcontent-%COMP%]{padding:0;margin:0;display:flex;justify-content:center;flex-direction:column;text-align:center;cursor:pointer;text-decoration:none;color:#000;font-size:1em}.entry2[_ngcontent-%COMP%]{height:10%;border:none}.entry3[_ngcontent-%COMP%]{padding:0;margin:0;display:flex;justify-content:center;flex-direction:column;height:50%;text-align:center;border-top:2px solid #000;cursor:pointer;text-decoration:none;color:#000;font-size:1em}.entry3[_ngcontent-%COMP%]:last-of-type{border-bottom:none}.empty[_ngcontent-%COMP%], .entry[_ngcontent-%COMP%]:first-of-type{cursor:default}.empty[_ngcontent-%COMP%]{padding:0;margin:0;display:flex;justify-content:center;flex-direction:column;height:50%;text-align:center;text-decoration:none;color:#000;font-size:1em}.entry3.active[_ngcontent-%COMP%], .entry.active[_ngcontent-%COMP%]{background:var(--active-colour);text-decoration:none}.end[_ngcontent-%COMP%]{margin-top:auto;border:none}"]],data:{}});function Ek(e){return qs(0,[(e()(),Ds(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/regions"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==Yt(e,1).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ei(1,671744,[[2,4]],0,Hd,[Fd,Rh,Ho],{routerLink:[0,"routerLink"]},null),ei(2,1720320,null,2,Bd,[Fd,il,ol,Nn,[2,Ud],[2,Hd]],{routerLinkActive:[0,"routerLinkActive"]},null),Us(603979776,1,{links:1}),Us(603979776,2,{linksWithHrefs:1}),(e()(),Ks(5,null,["",""]))],(function(e,n){e(n,1,0,"/regions"),e(n,2,0,"active")}),(function(e,n){var l=n.component;e(n,0,0,Yt(n,1).target,Yt(n,1).href),e(n,5,0,l.getVillageStageName())}))}function vk(e){return qs(0,[(e()(),Ds(0,0,null,null,2,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/regions/village"]],[[2,"active",null],[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==Yt(e,1).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ei(1,671744,null,0,Hd,[Fd,Rh,Ho],{routerLink:[0,"routerLink"]},null),(e()(),Ks(2,null,["",""]))],(function(e,n){e(n,1,0,"/regions/village")}),(function(e,n){var l=n.component;e(n,0,0,!0,Yt(n,1).target,Yt(n,1).href),e(n,2,0,l.getVillageStageName())}))}function Rk(e){return qs(0,[(e()(),Ds(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/management"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==Yt(e,1).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ei(1,671744,[[6,4]],0,Hd,[Fd,Rh,Ho],{routerLink:[0,"routerLink"]},null),ei(2,1720320,null,2,Bd,[Fd,il,ol,Nn,[2,Ud],[2,Hd]],{routerLinkActive:[0,"routerLinkActive"]},null),Us(603979776,5,{links:1}),Us(603979776,6,{linksWithHrefs:1}),(e()(),Ks(-1,null,["Management"]))],(function(e,n){e(n,1,0,"/management"),e(n,2,0,"active")}),(function(e,n){e(n,0,0,Yt(n,1).target,Yt(n,1).href)}))}function Ok(e){return qs(0,[(e()(),Ds(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/crafting"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==Yt(e,1).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ei(1,671744,[[8,4]],0,Hd,[Fd,Rh,Ho],{routerLink:[0,"routerLink"]},null),ei(2,1720320,null,2,Bd,[Fd,il,ol,Nn,[2,Ud],[2,Hd]],{routerLinkActive:[0,"routerLinkActive"]},null),Us(603979776,7,{links:1}),Us(603979776,8,{linksWithHrefs:1}),(e()(),Ks(-1,null,["Crafting"]))],(function(e,n){e(n,1,0,"/crafting"),e(n,2,0,"active")}),(function(e,n){e(n,0,0,Yt(n,1).target,Yt(n,1).href)}))}function Tk(e){return qs(0,[(e()(),Ds(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/research"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==Yt(e,1).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ei(1,671744,[[10,4]],0,Hd,[Fd,Rh,Ho],{routerLink:[0,"routerLink"]},null),ei(2,1720320,null,2,Bd,[Fd,il,ol,Nn,[2,Ud],[2,Hd]],{routerLinkActive:[0,"routerLinkActive"]},null),Us(603979776,9,{links:1}),Us(603979776,10,{linksWithHrefs:1}),(e()(),Ks(-1,null,["Research"]))],(function(e,n){e(n,1,0,"/research"),e(n,2,0,"active")}),(function(e,n){e(n,0,0,Yt(n,1).target,Yt(n,1).href)}))}function Ck(e){return qs(0,[(e()(),Ds(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/market"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==Yt(e,1).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ei(1,671744,[[12,4]],0,Hd,[Fd,Rh,Ho],{routerLink:[0,"routerLink"]},null),ei(2,1720320,null,2,Bd,[Fd,il,ol,Nn,[2,Ud],[2,Hd]],{routerLinkActive:[0,"routerLinkActive"]},null),Us(603979776,11,{links:1}),Us(603979776,12,{linksWithHrefs:1}),(e()(),Ks(-1,null,["Market"]))],(function(e,n){e(n,1,0,"/market"),e(n,2,0,"active")}),(function(e,n){e(n,0,0,Yt(n,1).target,Yt(n,1).href)}))}function Ik(e){return qs(0,[(e()(),Ds(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/army"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==Yt(e,1).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ei(1,671744,[[14,4]],0,Hd,[Fd,Rh,Ho],{routerLink:[0,"routerLink"]},null),ei(2,1720320,null,2,Bd,[Fd,il,ol,Nn,[2,Ud],[2,Hd]],{routerLinkActive:[0,"routerLinkActive"]},null),Us(603979776,13,{links:1}),Us(603979776,14,{linksWithHrefs:1}),(e()(),Ks(-1,null,["Army"]))],(function(e,n){e(n,1,0,"/army"),e(n,2,0,"active")}),(function(e,n){e(n,0,0,Yt(n,1).target,Yt(n,1).href)}))}function bk(e){return qs(0,[(e()(),Ds(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/religion"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==Yt(e,1).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ei(1,671744,[[16,4]],0,Hd,[Fd,Rh,Ho],{routerLink:[0,"routerLink"]},null),ei(2,1720320,null,2,Bd,[Fd,il,ol,Nn,[2,Ud],[2,Hd]],{routerLinkActive:[0,"routerLinkActive"]},null),Us(603979776,15,{links:1}),Us(603979776,16,{linksWithHrefs:1}),(e()(),Ks(-1,null,["Religion"]))],(function(e,n){e(n,1,0,"/religion"),e(n,2,0,"active")}),(function(e,n){e(n,0,0,Yt(n,1).target,Yt(n,1).href)}))}function yk(e){return qs(0,[(e()(),Ds(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/weather"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==Yt(e,1).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ei(1,671744,[[18,4]],0,Hd,[Fd,Rh,Ho],{routerLink:[0,"routerLink"]},null),ei(2,1720320,null,2,Bd,[Fd,il,ol,Nn,[2,Ud],[2,Hd]],{routerLinkActive:[0,"routerLinkActive"]},null),Us(603979776,17,{links:1}),Us(603979776,18,{linksWithHrefs:1}),(e()(),Ks(-1,null,["Weather"]))],(function(e,n){e(n,1,0,"/weather"),e(n,2,0,"active")}),(function(e,n){e(n,0,0,Yt(n,1).target,Yt(n,1).href)}))}function Ak(e){return qs(0,[(e()(),Ds(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/world"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==Yt(e,1).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ei(1,671744,[[20,4]],0,Hd,[Fd,Rh,Ho],{routerLink:[0,"routerLink"]},null),ei(2,1720320,null,2,Bd,[Fd,il,ol,Nn,[2,Ud],[2,Hd]],{routerLinkActive:[0,"routerLinkActive"]},null),Us(603979776,19,{links:1}),Us(603979776,20,{linksWithHrefs:1}),(e()(),Ks(-1,null,["World Map"]))],(function(e,n){e(n,1,0,"/world"),e(n,2,0,"active")}),(function(e,n){e(n,0,0,Yt(n,1).target,Yt(n,1).href)}))}function Nk(e){return qs(0,[(e()(),Ds(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/navy"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==Yt(e,1).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ei(1,671744,[[22,4]],0,Hd,[Fd,Rh,Ho],{routerLink:[0,"routerLink"]},null),ei(2,1720320,null,2,Bd,[Fd,il,ol,Nn,[2,Ud],[2,Hd]],{routerLinkActive:[0,"routerLinkActive"]},null),Us(603979776,21,{links:1}),Us(603979776,22,{linksWithHrefs:1}),(e()(),Ks(-1,null,["Navy"]))],(function(e,n){e(n,1,0,"/navy"),e(n,2,0,"active")}),(function(e,n){e(n,0,0,Yt(n,1).target,Yt(n,1).href)}))}function _k(e){return qs(0,[(e()(),Ds(0,0,null,null,5,"a",[["class","entry3"],["draggable","false"],["ondragstart","return false;"],["routerLink","/heritage"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==Yt(e,1).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ei(1,671744,[[24,4]],0,Hd,[Fd,Rh,Ho],{routerLink:[0,"routerLink"]},null),ei(2,1720320,null,2,Bd,[Fd,il,ol,Nn,[2,Ud],[2,Hd]],{routerLinkActive:[0,"routerLinkActive"]},null),Us(603979776,23,{links:1}),Us(603979776,24,{linksWithHrefs:1}),(e()(),Ks(-1,null,["Heritage"]))],(function(e,n){e(n,1,0,"/heritage"),e(n,2,0,"active")}),(function(e,n){e(n,0,0,Yt(n,1).target,Yt(n,1).href)}))}function wk(e){return qs(0,[(e()(),Ds(0,0,null,null,0,"a",[["class","empty"],["draggable","false"],["ondragstart","return false;"]],null,null,null,null,null))],null,null)}function Pk(e){return qs(0,[(e()(),Ds(0,0,null,null,40,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,0,"a",[["class","entry"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,Ek)),ei(3,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,vk)),ei(5,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(6,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/resources"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==Yt(e,7).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ei(7,671744,[[4,4]],0,Hd,[Fd,Rh,Ho],{routerLink:[0,"routerLink"]},null),ei(8,1720320,null,2,Bd,[Fd,il,ol,Nn,[2,Ud],[2,Hd]],{routerLinkActive:[0,"routerLinkActive"]},null),Us(603979776,3,{links:1}),Us(603979776,4,{linksWithHrefs:1}),(e()(),Ks(-1,null,["Resources"])),(e()(),Ms(16777216,null,null,1,null,Rk)),ei(13,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,Ok)),ei(15,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,Tk)),ei(17,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,Ck)),ei(19,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,Ik)),ei(21,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,bk)),ei(23,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,yk)),ei(25,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,Ak)),ei(27,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,Nk)),ei(29,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(30,0,null,null,10,"div",[["class","entry2 end"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,_k)),ei(32,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,wk)),ei(34,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(35,0,null,null,5,"a",[["class","entry3"],["draggable","false"],["ondragstart","return false;"],["routerLink","/royal"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==Yt(e,36).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ei(36,671744,[[26,4]],0,Hd,[Fd,Rh,Ho],{routerLink:[0,"routerLink"]},null),ei(37,1720320,null,2,Bd,[Fd,il,ol,Nn,[2,Ud],[2,Hd]],{routerLinkActive:[0,"routerLinkActive"]},null),Us(603979776,25,{links:1}),Us(603979776,26,{linksWithHrefs:1}),(e()(),Ks(-1,null,["Royal perks"]))],(function(e,n){var l=n.component;e(n,3,0,!l.isInRegions()),e(n,5,0,l.isInRegions()),e(n,7,0,"/resources"),e(n,8,0,"active"),e(n,13,0,l.isManagementEnabled()),e(n,15,0,l.isCraftingEnabled()),e(n,17,0,l.isResearchEnabled()),e(n,19,0,l.isMarketEnabled()),e(n,21,0,l.isArmyEnabled()),e(n,23,0,l.isReligionEnabled()),e(n,25,0,l.isWeatherEnabled()),e(n,27,0,l.isCartographyEnabled()),e(n,29,0,l.isNavyEnabled()),e(n,32,0,l.isHeritageUnlocked()),e(n,34,0,!l.isHeritageUnlocked()),e(n,36,0,"/royal"),e(n,37,0,"active")}),(function(e,n){e(n,6,0,Yt(n,7).target,Yt(n,7).href),e(n,35,0,Yt(n,36).target,Yt(n,36).href)}))}class Mk{constructor(e,n,l){this.logService=e,this.changeDetectorRef=n,this.modalService=l,this.entries=[],this.logEntryTypes=Du}ngOnInit(){this.logService.registerForLogs().subscribe(()=>{this.entries=this.logService.getEntries(),this.scrollToBottom()}),this.entries=this.logService.getEntries(),this.scrollToBottom()}clearLogs(){this.logService.clearEntries()}scrollToBottom(){const e=this.scrollRef.nativeElement,n=e.scrollHeight-e.clientHeight<=e.scrollTop+25;this.changeDetectorRef.destroyed||this.changeDetectorRef.detectChanges(),n&&(e.scrollTop=e.scrollHeight)}showFightReport(e){this.modalService.open(Pu.FIGHT_REPORT),this.modalService.setFightReport(e)}showErrorReport(e){this.modalService.open(Pu.ERROR),this.modalService.setModalErrorReport(e)}}var Dk=Kl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;max-height:100%}#clear-button[_ngcontent-%COMP%]{float:right}#log[_ngcontent-%COMP%]{height:100%;overflow-y:scroll;font-size:.8em}.title[_ngcontent-%COMP%]{border-bottom:1px solid #000;text-align:center;font-weight:700;font-size:1.1em}#title-text[_ngcontent-%COMP%]{display:inline-block;margin-left:20px;margin-top:3px}ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}li[_ngcontent-%COMP%]{padding-left:.5%;padding-bottom:.4%}.date[_ngcontent-%COMP%]{font-weight:bolder}.warning[_ngcontent-%COMP%]{color:var(--negative-colour)}.success[_ngcontent-%COMP%]{color:var(--positive-colour)}.mystical[_ngcontent-%COMP%]{color:#00008b}#log[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:1px;margin-left:2px}"]],data:{}});function Lk(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"span",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"span",[["class","date"]],null,null,null,null,null)),(e()(),Ks(2,null,["day ",":"])),(e()(),Ds(3,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null))],null,(function(e,n){e(n,2,0,n.parent.context.$implicit.day),e(n,3,0," "+n.parent.context.$implicit.message)}))}function xk(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"span",[["class","success"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"span",[["class","date"]],null,null,null,null,null)),(e()(),Ks(2,null,["day ",":"])),(e()(),Ds(3,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null))],null,(function(e,n){e(n,2,0,n.parent.context.$implicit.day),e(n,3,0," "+n.parent.context.$implicit.message)}))}function kk(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"span",[["class","warning"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"span",[["class","date"]],null,null,null,null,null)),(e()(),Ks(2,null,["day ",":"])),(e()(),Ds(3,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null))],null,(function(e,n){e(n,2,0,n.parent.context.$implicit.day),e(n,3,0," "+n.parent.context.$implicit.message)}))}function Fk(e){return qs(0,[(e()(),Ds(0,0,null,null,3,"span",[["class","mystical"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"span",[["class","date"]],null,null,null,null,null)),(e()(),Ks(2,null,["day ",":"])),(e()(),Ds(3,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null))],null,(function(e,n){e(n,2,0,n.parent.context.$implicit.day),e(n,3,0," "+n.parent.context.$implicit.message)}))}function Uk(e){return qs(0,[(e()(),Ds(0,0,null,null,5,"span",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"span",[["class","date"]],null,null,null,null,null)),(e()(),Ks(2,null,["day ",":"])),(e()(),Ds(3,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Ds(4,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.showFightReport(e.parent.context.$implicit.data)&&t),t}),null,null)),(e()(),Ks(-1,null,["report"]))],null,(function(e,n){e(n,2,0,n.parent.context.$implicit.day),e(n,3,0," "+n.parent.context.$implicit.message)}))}function Hk(e){return qs(0,[(e()(),Ds(0,0,null,null,5,"span",[["class","warning"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"span",[["class","date"]],null,null,null,null,null)),(e()(),Ks(2,null,["day ",":"])),(e()(),Ds(3,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Ds(4,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.showErrorReport(e.parent.context.$implicit.data)&&t),t}),null,null)),(e()(),Ks(-1,null,["report"]))],null,(function(e,n){e(n,2,0,n.parent.context.$implicit.day),e(n,3,0," "+n.parent.context.$implicit.message)}))}function Gk(e){return qs(0,[(e()(),Ds(0,0,null,null,14,"li",[],null,null,null,null,null)),(e()(),Ds(1,0,null,null,13,"div",[],null,null,null,null,null)),ei(2,16384,null,0,ca,[],{ngSwitch:[0,"ngSwitch"]},null),(e()(),Ms(16777216,null,null,1,null,Lk)),ei(4,278528,null,0,ha,[wl,Nl,ca],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),Ms(16777216,null,null,1,null,xk)),ei(6,278528,null,0,ha,[wl,Nl,ca],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),Ms(16777216,null,null,1,null,kk)),ei(8,278528,null,0,ha,[wl,Nl,ca],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),Ms(16777216,null,null,1,null,Fk)),ei(10,278528,null,0,ha,[wl,Nl,ca],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),Ms(16777216,null,null,1,null,Uk)),ei(12,278528,null,0,ha,[wl,Nl,ca],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),Ms(16777216,null,null,1,null,Hk)),ei(14,278528,null,0,ha,[wl,Nl,ca],{ngSwitchCase:[0,"ngSwitchCase"]},null)],(function(e,n){var l=n.component;e(n,2,0,n.context.$implicit.type),e(n,4,0,l.logEntryTypes.LOG),e(n,6,0,l.logEntryTypes.SUCCESS),e(n,8,0,l.logEntryTypes.WARNING),e(n,10,0,l.logEntryTypes.MYSTICAL),e(n,12,0,l.logEntryTypes.FIGHT_REPORT),e(n,14,0,l.logEntryTypes.ERROR)}),null)}function Bk(e){return qs(0,[Us(402653184,1,{scrollRef:0}),(e()(),Ds(1,0,null,null,9,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,4,"div",[["class","title"]],null,null,null,null,null)),(e()(),Ds(3,0,null,null,1,"span",[["id","title-text"]],null,null,null,null,null)),(e()(),Ks(-1,null,["Log"])),(e()(),Ds(5,0,null,null,1,"button",[["id","clear-button"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.clearLogs()&&t),t}),null,null)),(e()(),Ks(-1,null,["clear"])),(e()(),Ds(7,0,[[1,0],["scroll",1]],null,3,"div",[["id","log"]],null,null,null,null,null)),(e()(),Ds(8,0,null,null,2,"ul",[],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,Gk)),ei(10,278528,null,0,ia,[wl,Nl,Cl],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,10,0,n.component.entries)}),null)}class Vk{constructor(e,n,l){this.gameService=e,this.tickerService=n,this.optionsService=l,this.gameName=Qu.gameName,this.version=Qu.versionString}ngOnInit(){}showDevNotes(){this.gameService.showDevNotes()}getSound(){return this.optionsService.getOption(_p.SOUND_MASTER)}toggleSound(){this.optionsService.setOption(_p.SOUND_MASTER,!this.optionsService.getOption(_p.SOUND_MASTER))}isPaused(){return this.tickerService.isPaused()}pause(){this.tickerService.pause()}resume(){this.tickerService.resume()}}var Wk=Kl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:row;font-size:1.2em}.first[_ngcontent-%COMP%], .second[_ngcontent-%COMP%]{flex:0 0 4%;height:30px}.second[_ngcontent-%COMP%]{display:flex;align-items:center;vertical-align:center}.second[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:24px}#center[_ngcontent-%COMP%]{flex:0 0 84%;display:flex;justify-content:center;align-items:center}#wiki[_ngcontent-%COMP%]{display:flex;flex:0 0 4%;justify-content:flex-end;margin-top:5px}a[_ngcontent-%COMP%]{text-decoration:none;color:#000}#dev[_ngcontent-%COMP%]{display:flex;flex:0 0 4%;height:30px;justify-content:flex-end}img[_ngcontent-%COMP%]{width:30px;cursor:pointer}"]],data:{}});function Yk(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[["class","first"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/sound_on.svg"],["title","turn master sounds off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleSound()&&t),t}),null,null))],null,null)}function zk(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[["class","first"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/sound_off.svg"],["title","turn master sound on"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleSound()&&t),t}),null,null))],null,null)}function $k(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[["class","second"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/pause2.svg"],["title","pause"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.pause()&&t),t}),null,null))],null,null)}function Kk(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"span",[["class","second"]],null,null,null,null,null)),(e()(),Ds(1,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/play.svg"],["title","play"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.resume()&&t),t}),null,null))],null,null)}function jk(e){return qs(0,[(e()(),Ds(0,0,null,null,16,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Ms(16777216,null,null,1,null,Yk)),ei(2,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,zk)),ei(4,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,$k)),ei(6,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,Kk)),ei(8,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ds(9,0,null,null,2,"div",[["id","center"]],null,null,null,null,null)),(e()(),Ds(10,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Ks(11,null,[""," v",""])),(e()(),Ds(12,0,null,null,2,"span",[["id","wiki"]],null,null,null,null,null)),(e()(),Ds(13,0,null,null,1,"a",[["href","http://wiki.villagerkings.com"],["rel","noopener noreferrer"],["target","_blank"]],null,null,null,null,null)),(e()(),Ks(-1,null,["wiki"])),(e()(),Ds(15,0,null,null,1,"span",[["id","dev"]],null,null,null,null,null)),(e()(),Ds(16,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/dev.svg"],["title","dev notes"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.showDevNotes()&&t),t}),null,null))],(function(e,n){var l=n.component;e(n,2,0,l.getSound()),e(n,4,0,!l.getSound()),e(n,6,0,!l.isPaused()),e(n,8,0,l.isPaused())}),(function(e,n){var l=n.component;e(n,11,0,l.gameName,l.version)}))}let Qk=(()=>{class e{constructor(e){this.servicesService=e,e.addService(bu.REGIONS,this),this.init()}init(){this.villageService=this.servicesService.getVillageService(),this.fortService=this.servicesService.getFortService(),this.forestService=this.servicesService.getForestService(),this.fieldService=this.servicesService.getFieldService(),this.mountainsService=this.servicesService.getMountainsService(),this.seaService=this.servicesService.getSeaService(),this.regionsServices=[this.villageService,this.fortService,this.forestService,this.fieldService,this.mountainsService,this.seaService]}getAllBuildingSites(){let e=[];return this.regionsServices.forEach(n=>{e=e.concat(n.getBuildings().filter(e=>e.getBuildingType()===tu.CONSTRUCTION||e.getBuildingType()===tu.DECONSTRUCTION))}),e}}return e.\u0275prov=re({factory:function(){return new e(Ae(Np))},token:e,providedIn:"root"}),e})();class qk{constructor(e,n,l,t,i,s,r,u,o,a,c,h,d,g,p,m,f,S){this.gameService=e,this.randomService=n,this.optionsService=l,this.tickerService=t,this.serializerService=i,this.resourceService=s,this.techService=r,this.logService=u,this.seaService=o,this.mountainsService=a,this.fortService=c,this.forestService=h,this.fieldService=d,this.managementService=g,this.villageService=p,this.regionsService=m,this.soundService=f,this.router=S,e.registerForHeaderRowsChange().subscribe(e=>{e&&this.wrapperRef?this.wrapperRef.nativeElement.style.gridTemplateRows="8% auto 4%":!e&&this.wrapperRef&&(this.wrapperRef.nativeElement.style.gridTemplateRows="4% auto 4%")})}ngOnInit(){this.serializerService.hasSave()?this.serializerService.initLoad():this.initGame(),this.managementService.getSecondHeaderRow()&&this.wrapperRef&&(this.wrapperRef.nativeElement.style.gridTemplateRows="8% auto 4%"),this.tickerService.start(),this.optionsService.getOption(_p.PAUSE_ON_INIT)&&(this.logService.warning("Game paused on start (settings option)"),this.tickerService.pause()),this.soundService.playMusic()}initGame(){this.gameService.init(),this.optionsService.init(),this.resourceService.init(),this.villageService.init(),this.fortService.init(),this.forestService.init(),this.fieldService.init(),this.mountainsService.init(),this.seaService.init()}exitSave(e){this.serializerService.initSave()}pause(e){if("VillagerKings"===e.target.id)switch(e.key){case"p":"VillagerKings"===e.target.id&&(this.tickerService.isPaused()?this.tickerService.resume():this.tickerService.pause());break;case"m":this.gameService.isEnabled(ou.CARTOGRAPHY)&&this.router.navigate(["/world"])}}}var Xk=Kl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{position:relative;display:grid;height:100%;max-height:100%;grid-template-columns:11% auto 20%;grid-template-rows:4% auto 4%;border:1px solid #000;background:var(--background-clour);background-image:url(old_parchment.5ec6f5823080b4e43708.jpg);background-size:100% 100%}#header[_ngcontent-%COMP%]{grid-column-end:4}#header[_ngcontent-%COMP%], #left-menu[_ngcontent-%COMP%]{grid-column-start:1;border:1px solid #000;overflow:hidden}#left-menu[_ngcontent-%COMP%]{grid-column-end:2}#center[_ngcontent-%COMP%]{grid-column-start:2;grid-column-end:3;border:1px solid #000;overflow:hidden}#screen[_ngcontent-%COMP%]{height:100%}#right-menu[_ngcontent-%COMP%]{grid-column-start:3}#footer[_ngcontent-%COMP%], #right-menu[_ngcontent-%COMP%]{grid-column-end:4;border:1px solid #000;overflow:hidden}#footer[_ngcontent-%COMP%]{grid-column-start:1}.asset[_ngcontent-%COMP%]{display:none}"]],data:{}});function Zk(e){return qs(0,[Us(402653184,1,{wrapperRef:0}),(e()(),Ds(1,0,[[1,0],["wrap",1]],null,135,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/buff.svg"]],null,null,null,null,null)),(e()(),Ds(3,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/complex_management_off_off.svg"]],null,null,null,null,null)),(e()(),Ds(4,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/complex_management_off_on.svg"]],null,null,null,null,null)),(e()(),Ds(5,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/complex_management_on_off.svg"]],null,null,null,null,null)),(e()(),Ds(6,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/complex_management_on_on.svg"]],null,null,null,null,null)),(e()(),Ds(7,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/details.svg"]],null,null,null,null,null)),(e()(),Ds(8,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/dev.svg"]],null,null,null,null,null)),(e()(),Ds(9,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/eye.svg"]],null,null,null,null,null)),(e()(),Ds(10,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/foresight.svg"]],null,null,null,null,null)),(e()(),Ds(11,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/forest.svg"]],null,null,null,null,null)),(e()(),Ds(12,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/gear.svg"]],null,null,null,null,null)),(e()(),Ds(13,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/gear_off.svg"]],null,null,null,null,null)),(e()(),Ds(14,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/hammer.svg"]],null,null,null,null,null)),(e()(),Ds(15,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/kred.png"]],null,null,null,null,null)),(e()(),Ds(16,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/land.svg"]],null,null,null,null,null)),(e()(),Ds(17,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/manage.svg"]],null,null,null,null,null)),(e()(),Ds(18,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/mountains.svg"]],null,null,null,null,null)),(e()(),Ds(19,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/pause.svg"]],null,null,null,null,null)),(e()(),Ds(20,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/pause2.svg"]],null,null,null,null,null)),(e()(),Ds(21,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/play.svg"]],null,null,null,null,null)),(e()(),Ds(22,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/population.svg"]],null,null,null,null,null)),(e()(),Ds(23,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/question_mark.svg"]],null,null,null,null,null)),(e()(),Ds(24,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/settings.svg"]],null,null,null,null,null)),(e()(),Ds(25,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/sound_off.svg"]],null,null,null,null,null)),(e()(),Ds(26,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/sound_on.svg"]],null,null,null,null,null)),(e()(),Ds(27,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/stop.svg"]],null,null,null,null,null)),(e()(),Ds(28,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/tick.svg"]],null,null,null,null,null)),(e()(),Ds(29,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/time.svg"]],null,null,null,null,null)),(e()(),Ds(30,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/trade.svg"]],null,null,null,null,null)),(e()(),Ds(31,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/upgrade.svg"]],null,null,null,null,null)),(e()(),Ds(32,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/village.svg"]],null,null,null,null,null)),(e()(),Ds(33,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/religion/faith.svg"]],null,null,null,null,null)),(e()(),Ds(34,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/religion/faith_shield.svg"]],null,null,null,null,null)),(e()(),Ds(35,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/weather/clouds.svg"]],null,null,null,null,null)),(e()(),Ds(36,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/weather/rain.svg"]],null,null,null,null,null)),(e()(),Ds(37,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/weather/snow.svg"]],null,null,null,null,null)),(e()(),Ds(38,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/weather/storm.svg"]],null,null,null,null,null)),(e()(),Ds(39,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/weather/sun.svg"]],null,null,null,null,null)),(e()(),Ds(40,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/weather/wind.svg"]],null,null,null,null,null)),(e()(),Ds(41,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/army/attack.svg"]],null,null,null,null,null)),(e()(),Ds(42,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/army/barracks.svg"]],null,null,null,null,null)),(e()(),Ds(43,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/army/defense.svg"]],null,null,null,null,null)),(e()(),Ds(44,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/army/invasion.svg"]],null,null,null,null,null)),(e()(),Ds(45,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/army/recruit.svg"]],null,null,null,null,null)),(e()(),Ds(46,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/happiness/angry.svg"]],null,null,null,null,null)),(e()(),Ds(47,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/happiness/happy.svg"]],null,null,null,null,null)),(e()(),Ds(48,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/happiness/neutral.svg"]],null,null,null,null,null)),(e()(),Ds(49,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/happiness/overjoyed.svg"]],null,null,null,null,null)),(e()(),Ds(50,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/happiness/sad.svg"]],null,null,null,null,null)),(e()(),Ds(51,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/apple.svg"]],null,null,null,null,null)),(e()(),Ds(52,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/barley.svg"]],null,null,null,null,null)),(e()(),Ds(53,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/beer.svg"]],null,null,null,null,null)),(e()(),Ds(54,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/berry.svg"]],null,null,null,null,null)),(e()(),Ds(55,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/bow.svg"]],null,null,null,null,null)),(e()(),Ds(56,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/bread.svg"]],null,null,null,null,null)),(e()(),Ds(57,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/bricks.svg"]],null,null,null,null,null)),(e()(),Ds(58,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/bronze.svg"]],null,null,null,null,null)),(e()(),Ds(59,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/brushwood.svg"]],null,null,null,null,null)),(e()(),Ds(60,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/cheese.svg"]],null,null,null,null,null)),(e()(),Ds(61,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/chicken.svg"]],null,null,null,null,null)),(e()(),Ds(62,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/clay.svg"]],null,null,null,null,null)),(e()(),Ds(63,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/clothes.svg"]],null,null,null,null,null)),(e()(),Ds(64,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/coal.svg"]],null,null,null,null,null)),(e()(),Ds(65,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/coins.svg"]],null,null,null,null,null)),(e()(),Ds(66,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/cooked_fish.svg"]],null,null,null,null,null)),(e()(),Ds(67,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/cooked_meat.svg"]],null,null,null,null,null)),(e()(),Ds(68,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/copper.svg"]],null,null,null,null,null)),(e()(),Ds(69,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/copper_ore.svg"]],null,null,null,null,null)),(e()(),Ds(70,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/cotton.svg"]],null,null,null,null,null)),(e()(),Ds(71,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/cow.svg"]],null,null,null,null,null)),(e()(),Ds(72,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/cut_stone.svg"]],null,null,null,null,null)),(e()(),Ds(73,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/egg.svg"]],null,null,null,null,null)),(e()(),Ds(74,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/fabric.svg"]],null,null,null,null,null)),(e()(),Ds(75,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/fish.svg"]],null,null,null,null,null)),(e()(),Ds(76,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/flour.svg"]],null,null,null,null,null)),(e()(),Ds(77,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/food.svg"]],null,null,null,null,null)),(e()(),Ds(78,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/fuel.svg"]],null,null,null,null,null)),(e()(),Ds(79,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/fur.svg"]],null,null,null,null,null)),(e()(),Ds(80,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/gold.svg"]],null,null,null,null,null)),(e()(),Ds(81,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/gold_ore.svg"]],null,null,null,null,null)),(e()(),Ds(82,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/grape.svg"]],null,null,null,null,null)),(e()(),Ds(83,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/hay.svg"]],null,null,null,null,null)),(e()(),Ds(84,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/hop.svg"]],null,null,null,null,null)),(e()(),Ds(85,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/horse.svg"]],null,null,null,null,null)),(e()(),Ds(86,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/iron.svg"]],null,null,null,null,null)),(e()(),Ds(87,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/iron_ore.svg"]],null,null,null,null,null)),(e()(),Ds(88,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/leather.svg"]],null,null,null,null,null)),(e()(),Ds(89,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/leather_armor.svg"]],null,null,null,null,null)),(e()(),Ds(90,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/light_armor.svg"]],null,null,null,null,null)),(e()(),Ds(91,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/heavy_armor.svg"]],null,null,null,null,null)),(e()(),Ds(92,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/log.svg"]],null,null,null,null,null)),(e()(),Ds(93,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/meat.svg"]],null,null,null,null,null)),(e()(),Ds(94,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/meat_soup.svg"]],null,null,null,null,null)),(e()(),Ds(95,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/milk.svg"]],null,null,null,null,null)),(e()(),Ds(96,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/mushroom.svg"]],null,null,null,null,null)),(e()(),Ds(97,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/nails.svg"]],null,null,null,null,null)),(e()(),Ds(98,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/omelette.svg"]],null,null,null,null,null)),(e()(),Ds(99,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/pig.svg"]],null,null,null,null,null)),(e()(),Ds(100,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/plank.svg"]],null,null,null,null,null)),(e()(),Ds(101,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/pottery.svg"]],null,null,null,null,null)),(e()(),Ds(102,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/sheep.svg"]],null,null,null,null,null)),(e()(),Ds(103,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/silver.svg"]],null,null,null,null,null)),(e()(),Ds(104,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/silver_ore.svg"]],null,null,null,null,null)),(e()(),Ds(105,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/steel.svg"]],null,null,null,null,null)),(e()(),Ds(106,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/stone.svg"]],null,null,null,null,null)),(e()(),Ds(107,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/axe.svg"]],null,null,null,null,null)),(e()(),Ds(108,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/hammer.svg"]],null,null,null,null,null)),(e()(),Ds(109,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/pickaxe.svg"]],null,null,null,null,null)),(e()(),Ds(110,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/pie.svg"]],null,null,null,null,null)),(e()(),Ds(111,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/shovel.svg"]],null,null,null,null,null)),(e()(),Ds(112,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/spear.svg"]],null,null,null,null,null)),(e()(),Ds(113,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/sword.svg"]],null,null,null,null,null)),(e()(),Ds(114,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/tin.svg"]],null,null,null,null,null)),(e()(),Ds(115,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/tin_ore.svg"]],null,null,null,null,null)),(e()(),Ds(116,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/vegetable_soup.svg"]],null,null,null,null,null)),(e()(),Ds(117,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/wheat.svg"]],null,null,null,null,null)),(e()(),Ds(118,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/wine.svg"]],null,null,null,null,null)),(e()(),Ds(119,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/shield.svg"]],null,null,null,null,null)),(e()(),Ds(120,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/wool.svg"]],null,null,null,null,null)),(e()(),Ds(121,0,null,null,2,"div",[["id","header"]],null,null,null,null,null)),(e()(),Ds(122,0,null,null,1,"app-header",[],null,null,null,mk,rx)),ei(123,114688,null,0,sx,[AP,Np,xp,Fp,Qp,qO,wp,Gp,Ww,Up,sR,NO,Fd,Wv],null,null),(e()(),Ds(124,0,null,null,2,"div",[["id","left-menu"]],null,null,null,null,null)),(e()(),Ds(125,0,null,null,1,"app-left-menu",[],null,null,null,Pk,Sk)),ei(126,114688,null,0,fk,[Gp,Qp,Fd],null,null),(e()(),Ds(127,0,null,null,3,"div",[["id","center"]],null,null,null,null,null)),(e()(),Ds(128,0,null,null,2,"div",[["id","screen"]],null,null,null,null,null)),(e()(),Ds(129,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),ei(130,212992,null,0,Vd,[Pd,wl,el,[8,null],Nn],null,null),(e()(),Ds(131,0,null,null,2,"div",[["id","right-menu"]],null,null,null,null,null)),(e()(),Ds(132,0,null,null,1,"app-log",[],null,null,null,Bk,Dk)),ei(133,114688,null,0,Mk,[xp,Nn,Fp],null,null),(e()(),Ds(134,0,null,null,2,"div",[["id","footer"]],null,null,null,null,null)),(e()(),Ds(135,0,null,null,1,"app-footer",[],null,null,null,jk,Wk)),ei(136,114688,null,0,Vk,[Gp,Ww,wp],null,null)],(function(e,n){e(n,123,0),e(n,126,0),e(n,130,0),e(n,133,0),e(n,136,0)}),null)}var Jk=Kl({encapsulation:0,styles:[["#IEwrapper[_ngcontent-%COMP%]{border:1px solid #000;background:#919191;font-size:3em;height:100%;max-height:100%;display:flex;justify-content:center;align-items:center}#IEwrapper[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center}"]],data:{}});function eF(e){return qs(0,[(e()(),Ds(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),Ds(1,0,null,null,1,"app-modals",[],null,null,null,nx,ex)),ei(2,114688,null,0,JL,[],null,null),(e()(),Ds(3,0,null,null,1,"app-game",[],null,[["window","beforeunload"],["document","keydown"]],(function(e,n,l){var t=!0;return"window:beforeunload"===n&&(t=!1!==Yt(e,4).exitSave(l)&&t),"document:keydown"===n&&(t=!1!==Yt(e,4).pause(l)&&t),t}),Zk,Xk)),ei(4,114688,null,0,qk,[Gp,Nu,wp,Ww,AP,Qp,sR,xp,WT,oN,rO,RA,VA,Wv,$E,Qk,Dp,Fd],null,null)],(function(e,n){e(n,2,0),e(n,4,0)}),null)}function nF(e){return qs(0,[(e()(),Ds(0,0,null,null,7,null,null,null,null,null,null,null)),(e()(),Ds(1,0,null,null,6,"div",[["id","IEwrapper"]],null,null,null,null,null)),(e()(),Ds(2,0,null,null,5,"span",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Internet Explorer is not supported."])),(e()(),Ds(4,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ks(-1,null,["Please use Firefox, Chrome, Safari"])),(e()(),Ds(6,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Ks(-1,null,["or Edge."]))],null,null)}function lF(e){return qs(0,[(e()(),Ms(16777216,null,null,1,null,eF)),ei(1,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null),(e()(),Ms(16777216,null,null,1,null,nF)),ei(3,16384,null,0,ra,[wl,Nl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,1,0,!l.isIE()),e(n,3,0,l.isIE())}),null)}function tF(e){return qs(0,[(e()(),Ds(0,0,null,null,1,"app-root",[],null,[["document","contextmenu"]],(function(e,n,l){var t=!0;return"document:contextmenu"===n&&(t=!1!==Yt(e,1).catchContextMenu(l)&&t),t}),lF,Jk)),ei(1,49152,null,0,yo,[],null,null)],null,null)}var iF=Dt("app-root",yo,tF,{},{},[]);class sF extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var e;e=new sF,Ao||(Ao=e)}getProperty(e,n){return e[n]}log(e){window.console&&window.console.log&&window.console.log(e)}logGroup(e){window.console&&window.console.group&&window.console.group(e)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(e,n,l){return e.addEventListener(n,l,!1),()=>{e.removeEventListener(n,l,!1)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){return e.parentNode&&e.parentNode.removeChild(e),e}getValue(e){return e.value}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(e){const n=uF||(uF=document.querySelector("base"),uF)?uF.getAttribute("href"):null;return null==n?null:(l=n,rF||(rF=document.createElement("a")),rF.setAttribute("href",l),"/"===rF.pathname.charAt(0)?rF.pathname:"/"+rF.pathname);var l}resetBaseElement(){uF=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(e){return na(document.cookie,e)}}let rF,uF=null;const oF=new Re("TRANSITION_ID"),aF=[{provide:Ai,useFactory:function(e,n,l){return()=>{l.get(Ni).donePromise.then(()=>{const l=No();Array.prototype.slice.apply(n.querySelectorAll("style[ng-transition]")).filter(n=>n.getAttribute("ng-transition")===e).forEach(e=>l.remove(e))})}},deps:[oF,_o,Mn],multi:!0}];class cF{static init(){var e;e=new cF,ss=e}addToWindow(e){ve.getAngularTestability=(n,l=!0)=>{const t=e.findTestabilityInTree(n,l);if(null==t)throw new Error("Could not find testability for element.");return t},ve.getAllAngularTestabilities=()=>e.getAllTestabilities(),ve.getAllAngularRootElements=()=>e.getAllRootElements(),ve.frameworkStabilizers||(ve.frameworkStabilizers=[]),ve.frameworkStabilizers.push(e=>{const n=ve.getAllAngularTestabilities();let l=n.length,t=!1;const i=function(n){t=t||n,l--,0==l&&e(t)};n.forEach((function(e){e.whenStable(i)}))})}findTestabilityInTree(e,n,l){if(null==n)return null;const t=e.getTestability(n);return null!=t?t:l?No().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null}}function hF(e,n){"undefined"!=typeof COMPILED&&COMPILED||((ve.ng=ve.ng||{})[e]=n)}const dF=(()=>({ApplicationRef:ds,NgZone:Ki}))();function gF(e){return Cs(e)}const pF=new Re("EventManagerPlugins");class mF{constructor(e,n){this._zone=n,this._eventNameToPlugin=new Map,e.forEach(e=>e.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,n,l){return this._findPluginFor(n).addEventListener(e,n,l)}addGlobalEventListener(e,n,l){return this._findPluginFor(n).addGlobalEventListener(e,n,l)}getZone(){return this._zone}_findPluginFor(e){const n=this._eventNameToPlugin.get(e);if(n)return n;const l=this._plugins;for(let t=0;t<l.length;t++){const n=l[t];if(n.supports(e))return this._eventNameToPlugin.set(e,n),n}throw new Error("No event manager plugin found for event "+e)}}class fF{constructor(e){this._doc=e}addGlobalEventListener(e,n,l){const t=No().getGlobalEventTarget(this._doc,e);if(!t)throw new Error(`Unsupported event target ${t} for event ${n}`);return this.addEventListener(t,n,l)}}class SF{constructor(){this._stylesSet=new Set}addStyles(e){const n=new Set;e.forEach(e=>{this._stylesSet.has(e)||(this._stylesSet.add(e),n.add(e))}),this.onStylesAdded(n)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}class EF extends SF{constructor(e){super(),this._doc=e,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(e.head)}_addStylesToHost(e,n){e.forEach(e=>{const l=this._doc.createElement("style");l.textContent=e,this._styleNodes.add(n.appendChild(l))})}addHost(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)}removeHost(e){this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach(n=>this._addStylesToHost(e,n))}ngOnDestroy(){this._styleNodes.forEach(e=>No().remove(e))}}const vF={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},RF=/%COMP%/g;function OF(e,n,l){for(let t=0;t<n.length;t++){let i=n[t];Array.isArray(i)?OF(e,i,l):(i=i.replace(RF,e),l.push(i))}return l}function TF(e){return n=>{if("__ngUnwrap__"===n)return e;!1===e(n)&&(n.preventDefault(),n.returnValue=!1)}}class CF{constructor(e,n,l){this.eventManager=e,this.sharedStylesHost=n,this.appId=l,this.rendererByCompId=new Map,this.defaultRenderer=new IF(e)}createRenderer(e,n){if(!e||!n)return this.defaultRenderer;switch(n.encapsulation){case ke.Emulated:{let l=this.rendererByCompId.get(n.id);return l||(l=new bF(this.eventManager,this.sharedStylesHost,n,this.appId),this.rendererByCompId.set(n.id,l)),l.applyToHost(e),l}case ke.Native:case ke.ShadowDom:return new yF(this.eventManager,this.sharedStylesHost,e,n);default:if(!this.rendererByCompId.has(n.id)){const e=OF(n.id,n.styles,[]);this.sharedStylesHost.addStyles(e),this.rendererByCompId.set(n.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}class IF{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,n){return n?document.createElementNS(vF[n]||n,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,n){e.appendChild(n)}insertBefore(e,n,l){e&&e.insertBefore(n,l)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let l="string"==typeof e?document.querySelector(e):e;if(!l)throw new Error(`The selector "${e}" did not match any elements`);return n||(l.textContent=""),l}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,l,t){if(t){n=t+":"+n;const i=vF[t];i?e.setAttributeNS(i,n,l):e.setAttribute(n,l)}else e.setAttribute(n,l)}removeAttribute(e,n,l){if(l){const t=vF[l];t?e.removeAttributeNS(t,n):e.removeAttribute(`${l}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,l,t){t&ul.DashCase?e.style.setProperty(n,l,t&ul.Important?"important":""):e.style[n]=l}removeStyle(e,n,l){l&ul.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,l){e[n]=l}setValue(e,n){e.nodeValue=n}listen(e,n,l){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,n,TF(l)):this.eventManager.addEventListener(e,n,TF(l))}}class bF extends IF{constructor(e,n,l,t){super(e),this.component=l;const i=OF(t+"-"+l.id,l.styles,[]);n.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(RF,t+"-"+l.id),this.hostAttr=function(e){return"_nghost-%COMP%".replace(RF,e)}(t+"-"+l.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,n){const l=super.createElement(e,n);return super.setAttribute(l,this.contentAttr,""),l}}class yF extends IF{constructor(e,n,l,t){super(e),this.sharedStylesHost=n,this.hostEl=l,this.component=t,this.shadowRoot=t.encapsulation===ke.ShadowDom?l.attachShadow({mode:"open"}):l.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const i=OF(t.id,t.styles,[]);for(let s=0;s<i.length;s++){const e=document.createElement("style");e.textContent=i[s],this.shadowRoot.appendChild(e)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,l){return super.insertBefore(this.nodeOrShadowRoot(e),n,l)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}class AF extends fF{constructor(e){super(e)}supports(e){return!0}addEventListener(e,n,l){return e.addEventListener(n,l,!1),()=>this.removeEventListener(e,n,l)}removeEventListener(e,n,l){return e.removeEventListener(n,l)}}const NF={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},_F=new Re("HammerGestureConfig"),wF=new Re("HammerLoader");class PF{constructor(){this.events=[],this.overrides={}}buildHammer(e){const n=new Hammer(e,this.options);n.get("pinch").set({enable:!0}),n.get("rotate").set({enable:!0});for(const l in this.overrides)n.get(l).set(this.overrides[l]);return n}}class MF extends fF{constructor(e,n,l,t){super(e),this._config=n,this.console=l,this.loader=t}supports(e){return!(!NF.hasOwnProperty(e.toLowerCase())&&!this.isCustomEvent(e)||!window.Hammer&&!this.loader&&(this.console.warn(`The "${e}" event cannot be bound because Hammer.JS is not loaded and no custom loader has been specified.`),1))}addEventListener(e,n,l){const t=this.manager.getZone();if(n=n.toLowerCase(),!window.Hammer&&this.loader){let t=!1,i=()=>{t=!0};return this.loader().then(()=>{if(!window.Hammer)return this.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(i=()=>{});t||(i=this.addEventListener(e,n,l))}).catch(()=>{this.console.warn(`The "${n}" event cannot be bound because the custom Hammer.JS loader failed.`),i=()=>{}}),()=>{i()}}return t.runOutsideAngular(()=>{const i=this._config.buildHammer(e),s=function(e){t.runGuarded((function(){l(e)}))};return i.on(n,s),()=>{i.off(n,s),"function"==typeof i.destroy&&i.destroy()}})}isCustomEvent(e){return this._config.events.indexOf(e)>-1}}const DF=["alt","control","meta","shift"],LF={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},xF={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},kF={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};class FF extends fF{constructor(e){super(e)}supports(e){return null!=FF.parseEventName(e)}addEventListener(e,n,l){const t=FF.parseEventName(n),i=FF.eventCallback(t.fullKey,l,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>No().onAndCancel(e,t.domEventName,i))}static parseEventName(e){const n=e.toLowerCase().split("."),l=n.shift();if(0===n.length||"keydown"!==l&&"keyup"!==l)return null;const t=FF._normalizeKey(n.pop());let i="";if(DF.forEach(e=>{const l=n.indexOf(e);l>-1&&(n.splice(l,1),i+=e+".")}),i+=t,0!=n.length||0===t.length)return null;const s={};return s.domEventName=l,s.fullKey=i,s}static getEventFullKey(e){let n="",l=function(e){let n=e.key;if(null==n){if(n=e.keyIdentifier,null==n)return"Unidentified";n.startsWith("U+")&&(n=String.fromCharCode(parseInt(n.substring(2),16)),3===e.location&&xF.hasOwnProperty(n)&&(n=xF[n]))}return LF[n]||n}(e);return l=l.toLowerCase()," "===l?l="space":"."===l&&(l="dot"),DF.forEach(t=>{t!=l&&(0,kF[t])(e)&&(n+=t+".")}),n+=l,n}static eventCallback(e,n,l){return t=>{FF.getEventFullKey(t)===e&&l.runGuarded(()=>n(t))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}let UF=(()=>{class e{}return e.\u0275prov=re({factory:function(){return Ae(HF)},token:e,providedIn:"root"}),e})(),HF=(()=>{class e extends UF{constructor(e){super(),this._doc=e}sanitize(e,n){if(null==n)return null;switch(e){case bn.NONE:return n;case bn.HTML:return Xe(n,"HTML")?qe(n):function(e,n){let l=null;try{Cn=Cn||function(e){return function(){try{return!!(new window.DOMParser).parseFromString("","text/html")}catch(WH){return!1}}()?new ln:new tn(e)}(e);let t=n?String(n):"";l=Cn.getInertBodyElement(t);let i=5,s=t;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,t=s,s=l.innerHTML,l=Cn.getInertBodyElement(t)}while(t!==s);const r=new vn,u=r.sanitizeChildren(In(l)||l);return nn()&&r.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),u}finally{if(l){const e=In(l)||l;for(;e.firstChild;)e.removeChild(e.firstChild)}}}(this._doc,String(n));case bn.STYLE:return Xe(n,"Style")?qe(n):n;case bn.SCRIPT:if(Xe(n,"Script"))return qe(n);throw new Error("unsafe value used in a script context");case bn.URL:return Ze(n),Xe(n,"URL")?qe(n):un(String(n));case bn.RESOURCE_URL:if(Xe(n,"ResourceURL"))return qe(n);throw new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see http://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return new ze(e)}bypassSecurityTrustStyle(e){return new $e(e)}bypassSecurityTrustScript(e){return new Ke(e)}bypassSecurityTrustUrl(e){return new je(e)}bypassSecurityTrustResourceUrl(e){return new Qe(e)}}return e.\u0275prov=re({factory:function(){return e=Ae(Oe),new HF(e.get(_o));var e},token:e,providedIn:"root"}),e})();function GF(){return new We}const BF=os(ys,"browser",[{provide:Di,useValue:"browser"},{provide:Mi,useValue:function(){sF.makeCurrent(),cF.init()},multi:!0},{provide:_o,useFactory:function(){return function(e){Ue=e}(document),document},deps:[]}]);class VF{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:VF,providers:[{provide:_i,useValue:e.appId},{provide:oF,useExisting:_i},aF]}}}"undefined"!=typeof window&&window;class WF{}function YF(e,n=null){return{type:2,steps:e,options:n}}function zF(e){return{type:6,styles:e,offset:null}}function $F(e){Promise.resolve(null).then(e)}class KF{constructor(e=0,n=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=e+n}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){$F(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){}setPosition(e){}getPosition(){return 0}triggerCallback(e){const n="start"==e?this._onStartFns:this._onDoneFns;n.forEach(e=>e()),n.length=0}}class jF{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let n=0,l=0,t=0;const i=this.players.length;0==i?$F(()=>this._onFinish()):this.players.forEach(e=>{e.onDone(()=>{++n==i&&this._onFinish()}),e.onDestroy(()=>{++l==i&&this._onDestroy()}),e.onStart(()=>{++t==i&&this._onStart()})}),this.totalTime=this.players.reduce((e,n)=>Math.max(e,n.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const n=e*this.totalTime;this.players.forEach(e=>{const l=e.totalTime?Math.min(1,n/e.totalTime):1;e.setPosition(l)})}getPosition(){let e=0;return this.players.forEach(n=>{const l=n.getPosition();e=Math.min(l,e)}),e}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const n="start"==e?this._onStartFns:this._onDoneFns;n.forEach(e=>e()),n.length=0}}function QF(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function qF(e){switch(e.length){case 0:return new KF;case 1:return e[0];default:return new jF(e)}}function XF(e,n,l,t,i={},s={}){const r=[],u=[];let o=-1,a=null;if(t.forEach(e=>{const l=e.offset,t=l==o,c=t&&a||{};Object.keys(e).forEach(l=>{let t=l,u=e[l];if("offset"!==l)switch(t=n.normalizePropertyName(t,r),u){case"!":u=i[l];break;case"*":u=s[l];break;default:u=n.normalizeStyleValue(l,t,u,r)}c[t]=u}),t||u.push(c),a=c,o=l}),r.length){const e="\n - ";throw new Error(`Unable to animate due to the following errors:${e}${r.join(e)}`)}return u}function ZF(e,n,l,t){switch(n){case"start":e.onStart(()=>t(l&&JF(l,"start",e)));break;case"done":e.onDone(()=>t(l&&JF(l,"done",e)));break;case"destroy":e.onDestroy(()=>t(l&&JF(l,"destroy",e)))}}function JF(e,n,l){const t=l.totalTime,i=eU(e.element,e.triggerName,e.fromState,e.toState,n||e.phaseName,null==t?e.totalTime:t,!!l.disabled),s=e._data;return null!=s&&(i._data=s),i}function eU(e,n,l,t,i="",s=0,r){return{element:e,triggerName:n,fromState:l,toState:t,phaseName:i,totalTime:s,disabled:!!r}}function nU(e,n,l){let t;return e instanceof Map?(t=e.get(n),t||e.set(n,t=l)):(t=e[n],t||(t=e[n]=l)),t}function lU(e){const n=e.indexOf(":");return[e.substring(1,n),e.substr(n+1)]}let tU=(e,n)=>!1,iU=(e,n)=>!1,sU=(e,n,l)=>[];const rU=QF();(rU||"undefined"!=typeof Element)&&(tU=(e,n)=>e.contains(n),iU=(()=>{if(rU||Element.prototype.matches)return(e,n)=>e.matches(n);{const e=Element.prototype,n=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;return n?(e,l)=>n.apply(e,[l]):iU}})(),sU=(e,n,l)=>{let t=[];if(l)t.push(...e.querySelectorAll(n));else{const l=e.querySelector(n);l&&t.push(l)}return t});let uU=null,oU=!1;const aU=iU,cU=tU,hU=sU;class dU{validateStyleProperty(e){return function(e){uU||(uU=("undefined"!=typeof document?document.body:null)||{},oU=!!uU.style&&"WebkitAppearance"in uU.style);let n=!0;return uU.style&&!function(e){return"ebkit"==e.substring(1,6)}(e)&&(n=e in uU.style,!n&&oU)&&(n="Webkit"+e.charAt(0).toUpperCase()+e.substr(1)in uU.style),n}(e)}matchesElement(e,n){return aU(e,n)}containsElement(e,n){return cU(e,n)}query(e,n,l){return hU(e,n,l)}computeStyle(e,n,l){return l||""}animate(e,n,l,t,i,s=[],r){return new KF(l,t)}}let gU=(()=>{class e{}return e.NOOP=new dU,e})();function pU(e){if("number"==typeof e)return e;const n=e.match(/^(-?[\.\d]+)(m?s)/);return!n||n.length<2?0:mU(parseFloat(n[1]),n[2])}function mU(e,n){switch(n){case"s":return 1e3*e;default:return e}}function fU(e,n,l){return e.hasOwnProperty("duration")?e:function(e,n,l){let t,i=0,s="";if("string"==typeof e){const l=e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===l)return n.push(`The provided timing value "${e}" is invalid.`),{duration:0,delay:0,easing:""};t=mU(parseFloat(l[1]),l[2]);const r=l[3];null!=r&&(i=mU(parseFloat(r),l[4]));const u=l[5];u&&(s=u)}else t=e;if(!l){let l=!1,s=n.length;t<0&&(n.push("Duration values below 0 are not allowed for this animation step."),l=!0),i<0&&(n.push("Delay values below 0 are not allowed for this animation step."),l=!0),l&&n.splice(s,0,`The provided timing value "${e}" is invalid.`)}return{duration:t,delay:i,easing:s}}(e,n,l)}function SU(e,n={}){return Object.keys(e).forEach(l=>{n[l]=e[l]}),n}function EU(e,n,l={}){if(n)for(let t in e)l[t]=e[t];else SU(e,l);return l}function vU(e,n,l){return l?n+":"+l+";":""}function RU(e){let n="";for(let l=0;l<e.style.length;l++){const t=e.style.item(l);n+=vU(0,t,e.style.getPropertyValue(t))}for(const l in e.style)e.style.hasOwnProperty(l)&&!l.startsWith("_")&&(n+=vU(0,l.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),e.style[l]));e.setAttribute("style",n)}function OU(e,n,l){e.style&&(Object.keys(n).forEach(t=>{const i=_U(t);l&&!l.hasOwnProperty(t)&&(l[t]=e.style[i]),e.style[i]=n[t]}),QF()&&RU(e))}function TU(e,n){e.style&&(Object.keys(n).forEach(n=>{const l=_U(n);e.style[l]=""}),QF()&&RU(e))}function CU(e){return Array.isArray(e)?1==e.length?e[0]:YF(e):e}const IU=new RegExp("{{\\s*(.+?)\\s*}}","g");function bU(e){let n=[];if("string"==typeof e){let l;for(;l=IU.exec(e);)n.push(l[1]);IU.lastIndex=0}return n}function yU(e,n,l){const t=e.toString(),i=t.replace(IU,(e,t)=>{let i=n[t];return n.hasOwnProperty(t)||(l.push("Please provide a value for the animation param "+t),i=""),i.toString()});return i==t?e:i}function AU(e){const n=[];let l=e.next();for(;!l.done;)n.push(l.value),l=e.next();return n}const NU=/-+([a-z0-9])/g;function _U(e){return e.replace(NU,(...e)=>e[1].toUpperCase())}function wU(e,n,l){switch(n.type){case 7:return e.visitTrigger(n,l);case 0:return e.visitState(n,l);case 1:return e.visitTransition(n,l);case 2:return e.visitSequence(n,l);case 3:return e.visitGroup(n,l);case 4:return e.visitAnimate(n,l);case 5:return e.visitKeyframes(n,l);case 6:return e.visitStyle(n,l);case 8:return e.visitReference(n,l);case 9:return e.visitAnimateChild(n,l);case 10:return e.visitAnimateRef(n,l);case 11:return e.visitQuery(n,l);case 12:return e.visitStagger(n,l);default:throw new Error("Unable to resolve animation metadata node #"+n.type)}}function PU(e,n){const l=[];return"string"==typeof e?e.split(/\s*,\s*/).forEach(e=>function(e,n,l){if(":"==e[0]){const t=function(e,n){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,n)=>parseFloat(n)>parseFloat(e);case":decrement":return(e,n)=>parseFloat(n)<parseFloat(e);default:return n.push(`The transition alias value "${e}" is not supported`),"* => *"}}(e,l);if("function"==typeof t)return void n.push(t);e=t}const t=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==t||t.length<4)return l.push(`The provided transition expression "${e}" is not supported`),n;const i=t[1],s=t[2],r=t[3];n.push(LU(i,r)),"<"!=s[0]||"*"==i&&"*"==r||n.push(LU(r,i))}(e,l,n)):l.push(e),l}const MU=new Set(["true","1"]),DU=new Set(["false","0"]);function LU(e,n){const l=MU.has(e)||DU.has(e),t=MU.has(n)||DU.has(n);return(i,s)=>{let r="*"==e||e==i,u="*"==n||n==s;return!r&&l&&"boolean"==typeof i&&(r=i?MU.has(e):DU.has(e)),!u&&t&&"boolean"==typeof s&&(u=s?MU.has(n):DU.has(n)),r&&u}}const xU=new RegExp("s*:selfs*,?","g");function kU(e,n,l){return new FU(e).build(n,l)}class FU{constructor(e){this._driver=e}build(e,n){const l=new UU(n);return this._resetContextStyleTimingState(l),wU(this,CU(e),l)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,n){let l=n.queryCount=0,t=n.depCount=0;const i=[],s=[];return"@"==e.name.charAt(0)&&n.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(e=>{if(this._resetContextStyleTimingState(n),0==e.type){const l=e,t=l.name;t.toString().split(/\s*,\s*/).forEach(e=>{l.name=e,i.push(this.visitState(l,n))}),l.name=t}else if(1==e.type){const i=this.visitTransition(e,n);l+=i.queryCount,t+=i.depCount,s.push(i)}else n.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:i,transitions:s,queryCount:l,depCount:t,options:null}}visitState(e,n){const l=this.visitStyle(e.styles,n),t=e.options&&e.options.params||null;if(l.containsDynamicStyles){const i=new Set,s=t||{};if(l.styles.forEach(e=>{if(HU(e)){const n=e;Object.keys(n).forEach(e=>{bU(n[e]).forEach(e=>{s.hasOwnProperty(e)||i.add(e)})})}}),i.size){const l=AU(i.values());n.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${l.join(", ")}`)}}return{type:0,name:e.name,style:l,options:t?{params:t}:null}}visitTransition(e,n){n.queryCount=0,n.depCount=0;const l=wU(this,CU(e.animation),n);return{type:1,matchers:PU(e.expr,n.errors),animation:l,queryCount:n.queryCount,depCount:n.depCount,options:GU(e.options)}}visitSequence(e,n){return{type:2,steps:e.steps.map(e=>wU(this,e,n)),options:GU(e.options)}}visitGroup(e,n){const l=n.currentTime;let t=0;const i=e.steps.map(e=>{n.currentTime=l;const i=wU(this,e,n);return t=Math.max(t,n.currentTime),i});return n.currentTime=t,{type:3,steps:i,options:GU(e.options)}}visitAnimate(e,n){const l=function(e,n){let l=null;if(e.hasOwnProperty("duration"))l=e;else if("number"==typeof e)return BU(fU(e,n).duration,0,"");const t=e;if(t.split(/\s+/).some(e=>"{"==e.charAt(0)&&"{"==e.charAt(1))){const e=BU(0,0,"");return e.dynamic=!0,e.strValue=t,e}return l=l||fU(t,n),BU(l.duration,l.delay,l.easing)}(e.timings,n.errors);let t;n.currentAnimateTimings=l;let i=e.styles?e.styles:zF({});if(5==i.type)t=this.visitKeyframes(i,n);else{let i=e.styles,s=!1;if(!i){s=!0;const e={};l.easing&&(e.easing=l.easing),i=zF(e)}n.currentTime+=l.duration+l.delay;const r=this.visitStyle(i,n);r.isEmptyStep=s,t=r}return n.currentAnimateTimings=null,{type:4,timings:l,style:t,options:null}}visitStyle(e,n){const l=this._makeStyleAst(e,n);return this._validateStyleAst(l,n),l}_makeStyleAst(e,n){const l=[];Array.isArray(e.styles)?e.styles.forEach(e=>{"string"==typeof e?"*"==e?l.push(e):n.errors.push(`The provided style string value ${e} is not allowed.`):l.push(e)}):l.push(e.styles);let t=!1,i=null;return l.forEach(e=>{if(HU(e)){const n=e,l=n.easing;if(l&&(i=l,delete n.easing),!t)for(let e in n)if(n[e].toString().indexOf("{{")>=0){t=!0;break}}}),{type:6,styles:l,easing:i,offset:e.offset,containsDynamicStyles:t,options:null}}_validateStyleAst(e,n){const l=n.currentAnimateTimings;let t=n.currentTime,i=n.currentTime;l&&i>0&&(i-=l.duration+l.delay),e.styles.forEach(e=>{"string"!=typeof e&&Object.keys(e).forEach(l=>{if(!this._driver.validateStyleProperty(l))return void n.errors.push(`The provided animation property "${l}" is not a supported CSS property for animations`);const s=n.collectedStyles[n.currentQuerySelector],r=s[l];let u=!0;r&&(i!=t&&i>=r.startTime&&t<=r.endTime&&(n.errors.push(`The CSS property "${l}" that exists between the times of "${r.startTime}ms" and "${r.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${t}ms"`),u=!1),i=r.startTime),u&&(s[l]={startTime:i,endTime:t}),n.options&&function(e,n,l){const t=n.params||{},i=bU(e);i.length&&i.forEach(e=>{t.hasOwnProperty(e)||l.push(`Unable to resolve the local animation param ${e} in the given list of values`)})}(e[l],n.options,n.errors)})})}visitKeyframes(e,n){const l={type:5,styles:[],options:null};if(!n.currentAnimateTimings)return n.errors.push("keyframes() must be placed inside of a call to animate()"),l;let t=0;const i=[];let s=!1,r=!1,u=0;const o=e.steps.map(e=>{const l=this._makeStyleAst(e,n);let o=null!=l.offset?l.offset:function(e){if("string"==typeof e)return null;let n=null;if(Array.isArray(e))e.forEach(e=>{if(HU(e)&&e.hasOwnProperty("offset")){const l=e;n=parseFloat(l.offset),delete l.offset}});else if(HU(e)&&e.hasOwnProperty("offset")){const l=e;n=parseFloat(l.offset),delete l.offset}return n}(l.styles),a=0;return null!=o&&(t++,a=l.offset=o),r=r||a<0||a>1,s=s||a<u,u=a,i.push(a),l});r&&n.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),s&&n.errors.push("Please ensure that all keyframe offsets are in order");const a=e.steps.length;let c=0;t>0&&t<a?n.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==t&&(c=1/(a-1));const h=a-1,d=n.currentTime,g=n.currentAnimateTimings,p=g.duration;return o.forEach((e,t)=>{const s=c>0?t==h?1:c*t:i[t],r=s*p;n.currentTime=d+g.delay+r,g.duration=r,this._validateStyleAst(e,n),e.offset=s,l.styles.push(e)}),l}visitReference(e,n){return{type:8,animation:wU(this,CU(e.animation),n),options:GU(e.options)}}visitAnimateChild(e,n){return n.depCount++,{type:9,options:GU(e.options)}}visitAnimateRef(e,n){return{type:10,animation:this.visitReference(e.animation,n),options:GU(e.options)}}visitQuery(e,n){const l=n.currentQuerySelector,t=e.options||{};n.queryCount++,n.currentQuery=e;const[i,s]=function(e){const n=!!e.split(/\s*,\s*/).find(e=>":self"==e);return n&&(e=e.replace(xU,"")),[e=e.replace(/@\*/g,".ng-trigger").replace(/@\w+/g,e=>".ng-trigger-"+e.substr(1)).replace(/:animating/g,".ng-animating"),n]}(e.selector);n.currentQuerySelector=l.length?l+" "+i:i,nU(n.collectedStyles,n.currentQuerySelector,{});const r=wU(this,CU(e.animation),n);return n.currentQuery=null,n.currentQuerySelector=l,{type:11,selector:i,limit:t.limit||0,optional:!!t.optional,includeSelf:s,animation:r,originalSelector:e.selector,options:GU(e.options)}}visitStagger(e,n){n.currentQuery||n.errors.push("stagger() can only be used inside of query()");const l="full"===e.timings?{duration:0,delay:0,easing:"full"}:fU(e.timings,n.errors,!0);return{type:12,animation:wU(this,CU(e.animation),n),timings:l,options:null}}}class UU{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function HU(e){return!Array.isArray(e)&&"object"==typeof e}function GU(e){var n;return e?(e=SU(e)).params&&(e.params=(n=e.params)?SU(n):null):e={},e}function BU(e,n,l){return{duration:e,delay:n,easing:l}}function VU(e,n,l,t,i,s,r=null,u=!1){return{type:1,element:e,keyframes:n,preStyleProps:l,postStyleProps:t,duration:i,delay:s,totalTime:i+s,easing:r,subTimeline:u}}class WU{constructor(){this._map=new Map}consume(e){let n=this._map.get(e);return n?this._map.delete(e):n=[],n}append(e,n){let l=this._map.get(e);l||this._map.set(e,l=[]),l.push(...n)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const YU=new RegExp(":enter","g"),zU=new RegExp(":leave","g");function $U(e,n,l,t,i,s={},r={},u,o,a=[]){return(new KU).buildKeyframes(e,n,l,t,i,s,r,u,o,a)}class KU{buildKeyframes(e,n,l,t,i,s,r,u,o,a=[]){o=o||new WU;const c=new QU(e,n,o,t,i,a,[]);c.options=u,c.currentTimeline.setStyles([s],null,c.errors,u),wU(this,l,c);const h=c.timelines.filter(e=>e.containsAnimation());if(h.length&&Object.keys(r).length){const e=h[h.length-1];e.allowOnlyTimelineStyles()||e.setStyles([r],null,c.errors,u)}return h.length?h.map(e=>e.buildKeyframes()):[VU(n,[],[],[],0,0,"",!1)]}visitTrigger(e,n){}visitState(e,n){}visitTransition(e,n){}visitAnimateChild(e,n){const l=n.subInstructions.consume(n.element);if(l){const t=n.createSubContext(e.options),i=n.currentTimeline.currentTime,s=this._visitSubInstructions(l,t,t.options);i!=s&&n.transformIntoNewTimeline(s)}n.previousNode=e}visitAnimateRef(e,n){const l=n.createSubContext(e.options);l.transformIntoNewTimeline(),this.visitReference(e.animation,l),n.transformIntoNewTimeline(l.currentTimeline.currentTime),n.previousNode=e}_visitSubInstructions(e,n,l){let t=n.currentTimeline.currentTime;const i=null!=l.duration?pU(l.duration):null,s=null!=l.delay?pU(l.delay):null;return 0!==i&&e.forEach(e=>{const l=n.appendInstructionToTimeline(e,i,s);t=Math.max(t,l.duration+l.delay)}),t}visitReference(e,n){n.updateOptions(e.options,!0),wU(this,e.animation,n),n.previousNode=e}visitSequence(e,n){const l=n.subContextCount;let t=n;const i=e.options;if(i&&(i.params||i.delay)&&(t=n.createSubContext(i),t.transformIntoNewTimeline(),null!=i.delay)){6==t.previousNode.type&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=jU);const e=pU(i.delay);t.delayNextStep(e)}e.steps.length&&(e.steps.forEach(e=>wU(this,e,t)),t.currentTimeline.applyStylesToKeyframe(),t.subContextCount>l&&t.transformIntoNewTimeline()),n.previousNode=e}visitGroup(e,n){const l=[];let t=n.currentTimeline.currentTime;const i=e.options&&e.options.delay?pU(e.options.delay):0;e.steps.forEach(s=>{const r=n.createSubContext(e.options);i&&r.delayNextStep(i),wU(this,s,r),t=Math.max(t,r.currentTimeline.currentTime),l.push(r.currentTimeline)}),l.forEach(e=>n.currentTimeline.mergeTimelineCollectedStyles(e)),n.transformIntoNewTimeline(t),n.previousNode=e}_visitTiming(e,n){if(e.dynamic){const l=e.strValue;return fU(n.params?yU(l,n.params,n.errors):l,n.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,n){const l=n.currentAnimateTimings=this._visitTiming(e.timings,n),t=n.currentTimeline;l.delay&&(n.incrementTime(l.delay),t.snapshotCurrentStyles());const i=e.style;5==i.type?this.visitKeyframes(i,n):(n.incrementTime(l.duration),this.visitStyle(i,n),t.applyStylesToKeyframe()),n.currentAnimateTimings=null,n.previousNode=e}visitStyle(e,n){const l=n.currentTimeline,t=n.currentAnimateTimings;!t&&l.getCurrentStyleProperties().length&&l.forwardFrame();const i=t&&t.easing||e.easing;e.isEmptyStep?l.applyEmptyStep(i):l.setStyles(e.styles,i,n.errors,n.options),n.previousNode=e}visitKeyframes(e,n){const l=n.currentAnimateTimings,t=n.currentTimeline.duration,i=l.duration,s=n.createSubContext().currentTimeline;s.easing=l.easing,e.styles.forEach(e=>{s.forwardTime((e.offset||0)*i),s.setStyles(e.styles,e.easing,n.errors,n.options),s.applyStylesToKeyframe()}),n.currentTimeline.mergeTimelineCollectedStyles(s),n.transformIntoNewTimeline(t+i),n.previousNode=e}visitQuery(e,n){const l=n.currentTimeline.currentTime,t=e.options||{},i=t.delay?pU(t.delay):0;i&&(6===n.previousNode.type||0==l&&n.currentTimeline.getCurrentStyleProperties().length)&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=jU);let s=l;const r=n.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!t.optional,n.errors);n.currentQueryTotal=r.length;let u=null;r.forEach((l,t)=>{n.currentQueryIndex=t;const r=n.createSubContext(e.options,l);i&&r.delayNextStep(i),l===n.element&&(u=r.currentTimeline),wU(this,e.animation,r),r.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,r.currentTimeline.currentTime)}),n.currentQueryIndex=0,n.currentQueryTotal=0,n.transformIntoNewTimeline(s),u&&(n.currentTimeline.mergeTimelineCollectedStyles(u),n.currentTimeline.snapshotCurrentStyles()),n.previousNode=e}visitStagger(e,n){const l=n.parentContext,t=n.currentTimeline,i=e.timings,s=Math.abs(i.duration),r=s*(n.currentQueryTotal-1);let u=s*n.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":u=r-u;break;case"full":u=l.currentStaggerTime}const o=n.currentTimeline;u&&o.delayNextStep(u);const a=o.currentTime;wU(this,e.animation,n),n.previousNode=e,l.currentStaggerTime=t.currentTime-a+(t.startTime-l.currentTimeline.startTime)}}const jU={};class QU{constructor(e,n,l,t,i,s,r,u){this._driver=e,this.element=n,this.subInstructions=l,this._enterClassName=t,this._leaveClassName=i,this.errors=s,this.timelines=r,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=jU,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=u||new qU(this._driver,n,0),r.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,n){if(!e)return;const l=e;let t=this.options;null!=l.duration&&(t.duration=pU(l.duration)),null!=l.delay&&(t.delay=pU(l.delay));const i=l.params;if(i){let e=t.params;e||(e=this.options.params={}),Object.keys(i).forEach(l=>{n&&e.hasOwnProperty(l)||(e[l]=yU(i[l],e,this.errors))})}}_copyOptions(){const e={};if(this.options){const n=this.options.params;if(n){const l=e.params={};Object.keys(n).forEach(e=>{l[e]=n[e]})}}return e}createSubContext(e=null,n,l){const t=n||this.element,i=new QU(this._driver,t,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(t,l||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(e),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(e){return this.previousNode=jU,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,n,l){const t={duration:null!=n?n:e.duration,delay:this.currentTimeline.currentTime+(null!=l?l:0)+e.delay,easing:""},i=new XU(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,t,e.stretchStartingKeyframe);return this.timelines.push(i),t}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,n,l,t,i,s){let r=[];if(t&&r.push(this.element),e.length>0){e=(e=e.replace(YU,"."+this._enterClassName)).replace(zU,"."+this._leaveClassName);let n=this._driver.query(this.element,e,1!=l);0!==l&&(n=l<0?n.slice(n.length+l,n.length):n.slice(0,l)),r.push(...n)}return i||0!=r.length||s.push(`\`query("${n}")\` returned zero elements. (Use \`query("${n}", { optional: true })\` if you wish to allow this.)`),r}}class qU{constructor(e,n,l,t){this._driver=e,this.element=n,this.startTime=l,this._elementTimelineStylesLookup=t,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const n=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||n?(this.forwardTime(this.currentTime+e),n&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,n){return this.applyStylesToKeyframe(),new qU(this._driver,e,n||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,n){this._localTimelineStyles[e]=n,this._globalTimelineStyles[e]=n,this._styleSummary[e]={time:this.currentTime,value:n}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||"*",this._currentKeyframe[e]="*"}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,n,l,t){n&&(this._previousKeyframe.easing=n);const i=t&&t.params||{},s=function(e,n){const l={};let t;return e.forEach(e=>{"*"===e?(t=t||Object.keys(n),t.forEach(e=>{l[e]="*"})):EU(e,!1,l)}),l}(e,this._globalTimelineStyles);Object.keys(s).forEach(e=>{const n=yU(s[e],i,l);this._pendingStyles[e]=n,this._localTimelineStyles.hasOwnProperty(e)||(this._backFill[e]=this._globalTimelineStyles.hasOwnProperty(e)?this._globalTimelineStyles[e]:"*"),this._updateStyle(e,n)})}applyStylesToKeyframe(){const e=this._pendingStyles,n=Object.keys(e);0!=n.length&&(this._pendingStyles={},n.forEach(n=>{this._currentKeyframe[n]=e[n]}),Object.keys(this._localTimelineStyles).forEach(e=>{this._currentKeyframe.hasOwnProperty(e)||(this._currentKeyframe[e]=this._localTimelineStyles[e])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const n=this._localTimelineStyles[e];this._pendingStyles[e]=n,this._updateStyle(e,n)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let n in this._currentKeyframe)e.push(n);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(n=>{const l=this._styleSummary[n],t=e._styleSummary[n];(!l||t.time>l.time)&&this._updateStyle(n,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,n=new Set,l=1===this._keyframes.size&&0===this.duration;let t=[];this._keyframes.forEach((i,s)=>{const r=EU(i,!0);Object.keys(r).forEach(l=>{const t=r[l];"!"==t?e.add(l):"*"==t&&n.add(l)}),l||(r.offset=s/this.duration),t.push(r)});const i=e.size?AU(e.values()):[],s=n.size?AU(n.values()):[];if(l){const e=t[0],n=SU(e);e.offset=0,n.offset=1,t=[e,n]}return VU(this.element,t,i,s,this.duration,this.startTime,this.easing,!1)}}class XU extends qU{constructor(e,n,l,t,i,s,r=!1){super(e,n,s.delay),this.element=n,this.keyframes=l,this.preStyleProps=t,this.postStyleProps=i,this._stretchStartingKeyframe=r,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:n,duration:l,easing:t}=this.timings;if(this._stretchStartingKeyframe&&n){const i=[],s=l+n,r=n/s,u=EU(e[0],!1);u.offset=0,i.push(u);const o=EU(e[0],!1);o.offset=ZU(r),i.push(o);const a=e.length-1;for(let t=1;t<=a;t++){let r=EU(e[t],!1);r.offset=ZU((n+r.offset*l)/s),i.push(r)}l=s,n=0,t="",e=i}return VU(this.element,e,this.preStyleProps,this.postStyleProps,l,n,t,!0)}}function ZU(e,n=3){const l=Math.pow(10,n-1);return Math.round(e*l)/l}class JU{}class eH extends JU{normalizePropertyName(e,n){return _U(e)}normalizeStyleValue(e,n,l,t){let i="";const s=l.toString().trim();if(nH[n]&&0!==l&&"0"!==l)if("number"==typeof l)i="px";else{const n=l.match(/^[+-]?[\d\.]+([a-z]*)$/);n&&0==n[1].length&&t.push(`Please provide a CSS unit value for ${e}:${l}`)}return s+i}}const nH=(()=>function(e){const n={};return e.forEach(e=>n[e]=!0),n}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function lH(e,n,l,t,i,s,r,u,o,a,c,h,d){return{type:0,element:e,triggerName:n,isRemovalTransition:i,fromState:l,fromStyles:s,toState:t,toStyles:r,timelines:u,queriedElements:o,preStyleProps:a,postStyleProps:c,totalTime:h,errors:d}}const tH={};class iH{constructor(e,n,l){this._triggerName=e,this.ast=n,this._stateStyles=l}match(e,n,l,t){return function(e,n,l,t,i){return e.some(e=>e(n,l,t,i))}(this.ast.matchers,e,n,l,t)}buildStyles(e,n,l){const t=this._stateStyles["*"],i=this._stateStyles[e],s=t?t.buildStyles(n,l):{};return i?i.buildStyles(n,l):s}build(e,n,l,t,i,s,r,u,o,a){const c=[],h=this.ast.options&&this.ast.options.params||tH,d=this.buildStyles(l,r&&r.params||tH,c),g=u&&u.params||tH,p=this.buildStyles(t,g,c),m=new Set,f=new Map,S=new Map,E="void"===t,v={params:Object.assign(Object.assign({},h),g)},R=a?[]:$U(e,n,this.ast.animation,i,s,d,p,v,o,c);let O=0;if(R.forEach(e=>{O=Math.max(e.duration+e.delay,O)}),c.length)return lH(n,this._triggerName,l,t,E,d,p,[],[],f,S,O,c);R.forEach(e=>{const l=e.element,t=nU(f,l,{});e.preStyleProps.forEach(e=>t[e]=!0);const i=nU(S,l,{});e.postStyleProps.forEach(e=>i[e]=!0),l!==n&&m.add(l)});const T=AU(m.values());return lH(n,this._triggerName,l,t,E,d,p,R,T,f,S,O)}}class sH{constructor(e,n){this.styles=e,this.defaultParams=n}buildStyles(e,n){const l={},t=SU(this.defaultParams);return Object.keys(e).forEach(n=>{const l=e[n];null!=l&&(t[n]=l)}),this.styles.styles.forEach(e=>{if("string"!=typeof e){const i=e;Object.keys(i).forEach(e=>{let s=i[e];s.length>1&&(s=yU(s,t,n)),l[e]=s})}}),l}}class rH{constructor(e,n){this.name=e,this.ast=n,this.transitionFactories=[],this.states={},n.states.forEach(e=>{this.states[e.name]=new sH(e.style,e.options&&e.options.params||{})}),uH(this.states,"true","1"),uH(this.states,"false","0"),n.transitions.forEach(n=>{this.transitionFactories.push(new iH(e,n,this.states))}),this.fallbackTransition=new iH(e,{type:1,animation:{type:2,steps:[],options:null},matchers:[(e,n)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,n,l,t){return this.transitionFactories.find(i=>i.match(e,n,l,t))||null}matchStyles(e,n,l){return this.fallbackTransition.buildStyles(e,n,l)}}function uH(e,n,l){e.hasOwnProperty(n)?e.hasOwnProperty(l)||(e[l]=e[n]):e.hasOwnProperty(l)&&(e[n]=e[l])}const oH=new WU;class aH{constructor(e,n,l){this.bodyNode=e,this._driver=n,this._normalizer=l,this._animations={},this._playersById={},this.players=[]}register(e,n){const l=[],t=kU(this._driver,n,l);if(l.length)throw new Error("Unable to build the animation due to the following errors: "+l.join("\n"));this._animations[e]=t}_buildPlayer(e,n,l){const t=e.element,i=XF(0,this._normalizer,0,e.keyframes,n,l);return this._driver.animate(t,i,e.duration,e.delay,e.easing,[],!0)}create(e,n,l={}){const t=[],i=this._animations[e];let s;const r=new Map;if(i?(s=$U(this._driver,n,i,"ng-enter","ng-leave",{},{},l,oH,t),s.forEach(e=>{const n=nU(r,e.element,{});e.postStyleProps.forEach(e=>n[e]=null)})):(t.push("The requested animation doesn't exist or has already been destroyed"),s=[]),t.length)throw new Error("Unable to create the animation due to the following errors: "+t.join("\n"));r.forEach((e,n)=>{Object.keys(e).forEach(l=>{e[l]=this._driver.computeStyle(n,l,"*")})});const u=qF(s.map(e=>{const n=r.get(e.element);return this._buildPlayer(e,{},n)}));return this._playersById[e]=u,u.onDestroy(()=>this.destroy(e)),this.players.push(u),u}destroy(e){const n=this._getPlayer(e);n.destroy(),delete this._playersById[e];const l=this.players.indexOf(n);l>=0&&this.players.splice(l,1)}_getPlayer(e){const n=this._playersById[e];if(!n)throw new Error("Unable to find the timeline player referenced by "+e);return n}listen(e,n,l,t){const i=eU(n,"","","");return ZF(this._getPlayer(e),l,i,t),()=>{}}command(e,n,l,t){if("register"==l)return void this.register(e,t[0]);if("create"==l)return void this.create(e,n,t[0]||{});const i=this._getPlayer(e);switch(l){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(t[0]));break;case"destroy":this.destroy(e)}}}const cH=[],hH={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},dH={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class gH{constructor(e,n=""){this.namespaceId=n;const l=e&&e.hasOwnProperty("value");if(this.value=null!=(t=l?e.value:e)?t:null,l){const n=SU(e);delete n.value,this.options=n}else this.options={};var t;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const n=e.params;if(n){const e=this.options.params;Object.keys(n).forEach(l=>{null==e[l]&&(e[l]=n[l])})}}}const pH=new gH("void");class mH{constructor(e,n,l){this.id=e,this.hostElement=n,this._engine=l,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,TH(n,this._hostClassName)}listen(e,n,l,t){if(!this._triggers.hasOwnProperty(n))throw new Error(`Unable to listen on the animation trigger event "${l}" because the animation trigger "${n}" doesn't exist!`);if(null==l||0==l.length)throw new Error(`Unable to listen on the animation trigger "${n}" because the provided event is undefined!`);if("start"!=(i=l)&&"done"!=i)throw new Error(`The provided animation trigger event "${l}" for the animation trigger "${n}" is not supported!`);var i;const s=nU(this._elementListeners,e,[]),r={name:n,phase:l,callback:t};s.push(r);const u=nU(this._engine.statesByElement,e,{});return u.hasOwnProperty(n)||(TH(e,"ng-trigger"),TH(e,"ng-trigger-"+n),u[n]=pH),()=>{this._engine.afterFlush(()=>{const e=s.indexOf(r);e>=0&&s.splice(e,1),this._triggers[n]||delete u[n]})}}register(e,n){return!this._triggers[e]&&(this._triggers[e]=n,!0)}_getTrigger(e){const n=this._triggers[e];if(!n)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return n}trigger(e,n,l,t=!0){const i=this._getTrigger(n),s=new SH(this.id,n,e);let r=this._engine.statesByElement.get(e);r||(TH(e,"ng-trigger"),TH(e,"ng-trigger-"+n),this._engine.statesByElement.set(e,r={}));let u=r[n];const o=new gH(l,this.id);if(!(l&&l.hasOwnProperty("value"))&&u&&o.absorbOptions(u.options),r[n]=o,u||(u=pH),"void"!==o.value&&u.value===o.value){if(!function(e,n){const l=Object.keys(e),t=Object.keys(n);if(l.length!=t.length)return!1;for(let i=0;i<l.length;i++){const t=l[i];if(!n.hasOwnProperty(t)||e[t]!==n[t])return!1}return!0}(u.params,o.params)){const n=[],l=i.matchStyles(u.value,u.params,n),t=i.matchStyles(o.value,o.params,n);n.length?this._engine.reportError(n):this._engine.afterFlush(()=>{TU(e,l),OU(e,t)})}return}const a=nU(this._engine.playersByElement,e,[]);a.forEach(e=>{e.namespaceId==this.id&&e.triggerName==n&&e.queued&&e.destroy()});let c=i.matchTransition(u.value,o.value,e,o.params),h=!1;if(!c){if(!t)return;c=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:n,transition:c,fromState:u,toState:o,player:s,isFallbackTransition:h}),h||(TH(e,"ng-animate-queued"),s.onStart(()=>{CH(e,"ng-animate-queued")})),s.onDone(()=>{let n=this.players.indexOf(s);n>=0&&this.players.splice(n,1);const l=this._engine.playersByElement.get(e);if(l){let e=l.indexOf(s);e>=0&&l.splice(e,1)}}),this.players.push(s),a.push(s),s}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((n,l)=>{delete n[e]}),this._elementListeners.forEach((n,l)=>{this._elementListeners.set(l,n.filter(n=>n.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const n=this._engine.playersByElement.get(e);n&&(n.forEach(e=>e.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,n){const l=this._engine.driver.query(e,".ng-trigger",!0);l.forEach(e=>{if(e.__ng_removed)return;const l=this._engine.fetchNamespacesByElement(e);l.size?l.forEach(l=>l.triggerLeaveAnimation(e,n,!1,!0)):this.clearElementCache(e)}),this._engine.afterFlushAnimationsDone(()=>l.forEach(e=>this.clearElementCache(e)))}triggerLeaveAnimation(e,n,l,t){const i=this._engine.statesByElement.get(e);if(i){const s=[];if(Object.keys(i).forEach(n=>{if(this._triggers[n]){const l=this.trigger(e,n,"void",t);l&&s.push(l)}}),s.length)return this._engine.markElementAsRemoved(this.id,e,!0,n),l&&qF(s).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const n=this._elementListeners.get(e);if(n){const l=new Set;n.forEach(n=>{const t=n.name;if(l.has(t))return;l.add(t);const i=this._triggers[t].fallbackTransition,s=this._engine.statesByElement.get(e)[t]||pH,r=new gH("void"),u=new SH(this.id,t,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:i,fromState:s,toState:r,player:u,isFallbackTransition:!0})})}}removeNode(e,n){const l=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,n),this.triggerLeaveAnimation(e,n,!0))return;let t=!1;if(l.totalAnimations){const n=l.players.length?l.playersByQueriedElement.get(e):[];if(n&&n.length)t=!0;else{let n=e;for(;n=n.parentNode;)if(l.statesByElement.get(n)){t=!0;break}}}if(this.prepareLeaveAnimationListeners(e),t)l.markElementAsRemoved(this.id,e,!1,n);else{const t=e.__ng_removed;t&&t!==hH||(l.afterFlush(()=>this.clearElementCache(e)),l.destroyInnerAnimations(e),l._onRemovalComplete(e,n))}}insertNode(e,n){TH(e,this._hostClassName)}drainQueuedTransitions(e){const n=[];return this._queue.forEach(l=>{const t=l.player;if(t.destroyed)return;const i=l.element,s=this._elementListeners.get(i);s&&s.forEach(n=>{if(n.name==l.triggerName){const t=eU(i,l.triggerName,l.fromState.value,l.toState.value);t._data=e,ZF(l.player,n.phase,t,n.callback)}}),t.markedForDestroy?this._engine.afterFlush(()=>{t.destroy()}):n.push(l)}),this._queue=[],n.sort((e,n)=>{const l=e.transition.ast.depCount,t=n.transition.ast.depCount;return 0==l||0==t?l-t:this._engine.driver.containsElement(e.element,n.element)?1:-1})}destroy(e){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let n=!1;return this._elementListeners.has(e)&&(n=!0),n=!!this._queue.find(n=>n.element===e)||n,n}}class fH{constructor(e,n,l){this.bodyNode=e,this.driver=n,this._normalizer=l,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(e,n)=>{}}_onRemovalComplete(e,n){this.onRemovalComplete(e,n)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(n=>{n.players.forEach(n=>{n.queued&&e.push(n)})}),e}createNamespace(e,n){const l=new mH(e,n,this);return n.parentNode?this._balanceNamespaceList(l,n):(this.newHostElements.set(n,l),this.collectEnterElement(n)),this._namespaceLookup[e]=l}_balanceNamespaceList(e,n){const l=this._namespaceList.length-1;if(l>=0){let t=!1;for(let i=l;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,n)){this._namespaceList.splice(i+1,0,e),t=!0;break}t||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(n,e),e}register(e,n){let l=this._namespaceLookup[e];return l||(l=this.createNamespace(e,n)),l}registerTrigger(e,n,l){let t=this._namespaceLookup[e];t&&t.register(n,l)&&this.totalAnimations++}destroy(e,n){if(!e)return;const l=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(l.hostElement),delete this._namespaceLookup[e];const n=this._namespaceList.indexOf(l);n>=0&&this._namespaceList.splice(n,1)}),this.afterFlushAnimationsDone(()=>l.destroy(n))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const n=new Set,l=this.statesByElement.get(e);if(l){const e=Object.keys(l);for(let t=0;t<e.length;t++){const i=l[e[t]].namespaceId;if(i){const e=this._fetchNamespace(i);e&&n.add(e)}}}return n}trigger(e,n,l,t){if(EH(n)){const i=this._fetchNamespace(e);if(i)return i.trigger(n,l,t),!0}return!1}insertNode(e,n,l,t){if(!EH(n))return;const i=n.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const e=this.collectedLeaveElements.indexOf(n);e>=0&&this.collectedLeaveElements.splice(e,1)}if(e){const t=this._fetchNamespace(e);t&&t.insertNode(n,l)}t&&this.collectEnterElement(n)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,n){n?this.disabledNodes.has(e)||(this.disabledNodes.add(e),TH(e,"ng-animate-disabled")):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),CH(e,"ng-animate-disabled"))}removeNode(e,n,l,t){if(EH(n)){const i=e?this._fetchNamespace(e):null;if(i?i.removeNode(n,t):this.markElementAsRemoved(e,n,!1,t),l){const l=this.namespacesByHostElement.get(n);l&&l.id!==e&&l.removeNode(n,t)}}else this._onRemovalComplete(n,t)}markElementAsRemoved(e,n,l,t){this.collectedLeaveElements.push(n),n.__ng_removed={namespaceId:e,setForRemoval:t,hasAnimation:l,removedBeforeQueried:!1}}listen(e,n,l,t,i){return EH(n)?this._fetchNamespace(e).listen(n,l,t,i):()=>{}}_buildInstruction(e,n,l,t,i){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,l,t,e.fromState.options,e.toState.options,n,i)}destroyInnerAnimations(e){let n=this.driver.query(e,".ng-trigger",!0);n.forEach(e=>this.destroyActiveAnimationsForElement(e)),0!=this.playersByQueriedElement.size&&(n=this.driver.query(e,".ng-animating",!0),n.forEach(e=>this.finishActiveQueriedAnimationOnElement(e)))}destroyActiveAnimationsForElement(e){const n=this.playersByElement.get(e);n&&n.forEach(e=>{e.queued?e.markedForDestroy=!0:e.destroy()})}finishActiveQueriedAnimationOnElement(e){const n=this.playersByQueriedElement.get(e);n&&n.forEach(e=>e.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return qF(this.players).onDone(()=>e());e()})}processLeaveNode(e){const n=e.__ng_removed;if(n&&n.setForRemoval){if(e.__ng_removed=hH,n.namespaceId){this.destroyInnerAnimations(e);const l=this._fetchNamespace(n.namespaceId);l&&l.clearElementCache(e)}this._onRemovalComplete(e,n.setForRemoval)}this.driver.matchesElement(e,".ng-animate-disabled")&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(e=>{this.markElementAsDisabled(e,!1)})}flush(e=-1){let n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((e,n)=>this._balanceNamespaceList(e,n)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let l=0;l<this.collectedEnterElements.length;l++)TH(this.collectedEnterElements[l],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const l=[];try{n=this._flushAnimations(l,e)}finally{for(let e=0;e<l.length;e++)l[e]()}}else for(let l=0;l<this.collectedLeaveElements.length;l++)this.processLeaveNode(this.collectedLeaveElements[l]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(e=>e()),this._flushFns=[],this._whenQuietFns.length){const e=this._whenQuietFns;this._whenQuietFns=[],n.length?qF(n).onDone(()=>{e.forEach(e=>e())}):e.forEach(e=>e())}}reportError(e){throw new Error("Unable to process animations due to the following failed trigger transitions\n "+e.join("\n"))}_flushAnimations(e,n){const l=new WU,t=[],i=new Map,s=[],r=new Map,u=new Map,o=new Map,a=new Set;this.disabledNodes.forEach(e=>{a.add(e);const n=this.driver.query(e,".ng-animate-queued",!0);for(let l=0;l<n.length;l++)a.add(n[l])});const c=this.bodyNode,h=Array.from(this.statesByElement.keys()),d=OH(h,this.collectedEnterElements),g=new Map;let p=0;d.forEach((e,n)=>{const l="ng-enter"+p++;g.set(n,l),e.forEach(e=>TH(e,l))});const m=[],f=new Set,S=new Set;for(let w=0;w<this.collectedLeaveElements.length;w++){const e=this.collectedLeaveElements[w],n=e.__ng_removed;n&&n.setForRemoval&&(m.push(e),f.add(e),n.hasAnimation?this.driver.query(e,".ng-star-inserted",!0).forEach(e=>f.add(e)):S.add(e))}const E=new Map,v=OH(h,Array.from(f));v.forEach((e,n)=>{const l="ng-leave"+p++;E.set(n,l),e.forEach(e=>TH(e,l))}),e.push(()=>{d.forEach((e,n)=>{const l=g.get(n);e.forEach(e=>CH(e,l))}),v.forEach((e,n)=>{const l=E.get(n);e.forEach(e=>CH(e,l))}),m.forEach(e=>{this.processLeaveNode(e)})});const R=[],O=[];for(let w=this._namespaceList.length-1;w>=0;w--)this._namespaceList[w].drainQueuedTransitions(n).forEach(e=>{const n=e.player,i=e.element;if(R.push(n),this.collectedEnterElements.length){const e=i.__ng_removed;if(e&&e.setForMove)return void n.destroy()}const a=!c||!this.driver.containsElement(c,i),h=E.get(i),d=g.get(i),p=this._buildInstruction(e,l,d,h,a);if(p.errors&&p.errors.length)O.push(p);else{if(a)return n.onStart(()=>TU(i,p.fromStyles)),n.onDestroy(()=>OU(i,p.toStyles)),void t.push(n);if(e.isFallbackTransition)return n.onStart(()=>TU(i,p.fromStyles)),n.onDestroy(()=>OU(i,p.toStyles)),void t.push(n);p.timelines.forEach(e=>e.stretchStartingKeyframe=!0),l.append(i,p.timelines),s.push({instruction:p,player:n,element:i}),p.queriedElements.forEach(e=>nU(r,e,[]).push(n)),p.preStyleProps.forEach((e,n)=>{const l=Object.keys(e);if(l.length){let e=u.get(n);e||u.set(n,e=new Set),l.forEach(n=>e.add(n))}}),p.postStyleProps.forEach((e,n)=>{const l=Object.keys(e);let t=o.get(n);t||o.set(n,t=new Set),l.forEach(e=>t.add(e))})}});if(O.length){const e=[];O.forEach(n=>{e.push(`@${n.triggerName} has failed due to:\n`),n.errors.forEach(n=>e.push(`- ${n}\n`))}),R.forEach(e=>e.destroy()),this.reportError(e)}const T=new Map,C=new Map;s.forEach(e=>{const n=e.element;l.has(n)&&(C.set(n,n),this._beforeAnimationBuild(e.player.namespaceId,e.instruction,T))}),t.forEach(e=>{const n=e.element;this._getPreviousPlayers(n,!1,e.namespaceId,e.triggerName,null).forEach(e=>{nU(T,n,[]).push(e),e.destroy()})});const I=m.filter(e=>bH(e,u,o)),b=new Map;RH(b,this.driver,S,o,"*").forEach(e=>{bH(e,u,o)&&I.push(e)});const y=new Map;d.forEach((e,n)=>{RH(y,this.driver,new Set(e),u,"!")}),I.forEach(e=>{const n=b.get(e),l=y.get(e);b.set(e,Object.assign(Object.assign({},n),l))});const A=[],N=[],_={};s.forEach(e=>{const{element:n,player:s,instruction:r}=e;if(l.has(n)){if(a.has(n))return s.onDestroy(()=>OU(n,r.toStyles)),s.disabled=!0,s.overrideTotalTime(r.totalTime),void t.push(s);let e=_;if(C.size>1){let l=n;const t=[];for(;l=l.parentNode;){const n=C.get(l);if(n){e=n;break}t.push(l)}t.forEach(n=>C.set(n,e))}const l=this._buildAnimation(s.namespaceId,r,T,i,y,b);if(s.setRealPlayer(l),e===_)A.push(s);else{const n=this.playersByElement.get(e);n&&n.length&&(s.parentPlayer=qF(n)),t.push(s)}}else TU(n,r.fromStyles),s.onDestroy(()=>OU(n,r.toStyles)),N.push(s),a.has(n)&&t.push(s)}),N.forEach(e=>{const n=i.get(e.element);if(n&&n.length){const l=qF(n);e.setRealPlayer(l)}}),t.forEach(e=>{e.parentPlayer?e.syncPlayerEvents(e.parentPlayer):e.destroy()});for(let w=0;w<m.length;w++){const e=m[w],n=e.__ng_removed;if(CH(e,"ng-leave"),n&&n.hasAnimation)continue;let l=[];if(r.size){let n=r.get(e);n&&n.length&&l.push(...n);let t=this.driver.query(e,".ng-animating",!0);for(let e=0;e<t.length;e++){let n=r.get(t[e]);n&&n.length&&l.push(...n)}}const t=l.filter(e=>!e.destroyed);t.length?IH(this,e,t):this.processLeaveNode(e)}return m.length=0,A.forEach(e=>{this.players.push(e),e.onDone(()=>{e.destroy();const n=this.players.indexOf(e);this.players.splice(n,1)}),e.play()}),A}elementContainsData(e,n){let l=!1;const t=n.__ng_removed;return t&&t.setForRemoval&&(l=!0),this.playersByElement.has(n)&&(l=!0),this.playersByQueriedElement.has(n)&&(l=!0),this.statesByElement.has(n)&&(l=!0),this._fetchNamespace(e).elementContainsData(n)||l}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,n,l,t,i){let s=[];if(n){const n=this.playersByQueriedElement.get(e);n&&(s=n)}else{const n=this.playersByElement.get(e);if(n){const e=!i||"void"==i;n.forEach(n=>{n.queued||(e||n.triggerName==t)&&s.push(n)})}}return(l||t)&&(s=s.filter(e=>!(l&&l!=e.namespaceId||t&&t!=e.triggerName))),s}_beforeAnimationBuild(e,n,l){const t=n.element,i=n.isRemovalTransition?void 0:e,s=n.isRemovalTransition?void 0:n.triggerName;for(const r of n.timelines){const e=r.element,u=e!==t,o=nU(l,e,[]);this._getPreviousPlayers(e,u,i,s,n.toState).forEach(e=>{const n=e.getRealPlayer();n.beforeDestroy&&n.beforeDestroy(),e.destroy(),o.push(e)})}TU(t,n.fromStyles)}_buildAnimation(e,n,l,t,i,s){const r=n.triggerName,u=n.element,o=[],a=new Set,c=new Set,h=n.timelines.map(n=>{const h=n.element;a.add(h);const d=h.__ng_removed;if(d&&d.removedBeforeQueried)return new KF(n.duration,n.delay);const g=h!==u,p=function(e){const n=[];return function e(n,l){for(let t=0;t<n.length;t++){const i=n[t];i instanceof jF?e(i.players,l):l.push(i)}}(e,n),n}((l.get(h)||cH).map(e=>e.getRealPlayer())).filter(e=>!!e.element&&e.element===h),m=i.get(h),f=s.get(h),S=XF(0,this._normalizer,0,n.keyframes,m,f),E=this._buildPlayer(n,S,p);if(n.subTimeline&&t&&c.add(h),g){const n=new SH(e,r,h);n.setRealPlayer(E),o.push(n)}return E});o.forEach(e=>{nU(this.playersByQueriedElement,e.element,[]).push(e),e.onDone(()=>function(e,n,l){let t;if(e instanceof Map){if(t=e.get(n),t){if(t.length){const e=t.indexOf(l);t.splice(e,1)}0==t.length&&e.delete(n)}}else if(t=e[n],t){if(t.length){const e=t.indexOf(l);t.splice(e,1)}0==t.length&&delete e[n]}return t}(this.playersByQueriedElement,e.element,e))}),a.forEach(e=>TH(e,"ng-animating"));const d=qF(h);return d.onDestroy(()=>{a.forEach(e=>CH(e,"ng-animating")),OU(u,n.toStyles)}),c.forEach(e=>{nU(t,e,[]).push(d)}),d}_buildPlayer(e,n,l){return n.length>0?this.driver.animate(e.element,n,e.duration,e.delay,e.easing,l):new KF(e.duration,e.delay)}}class SH{constructor(e,n,l){this.namespaceId=e,this.triggerName=n,this.element=l,this._player=new KF,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(n=>{this._queuedCallbacks[n].forEach(l=>ZF(e,n,void 0,l))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const n=this._player;n.triggerCallback&&e.onStart(()=>n.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,n){nU(this._queuedCallbacks,e,[]).push(n)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const n=this._player;n.triggerCallback&&n.triggerCallback(e)}}function EH(e){return e&&1===e.nodeType}function vH(e,n){const l=e.style.display;return e.style.display=null!=n?n:"none",l}function RH(e,n,l,t,i){const s=[];l.forEach(e=>s.push(vH(e)));const r=[];t.forEach((l,t)=>{const s={};l.forEach(e=>{const l=s[e]=n.computeStyle(t,e,i);l&&0!=l.length||(t.__ng_removed=dH,r.push(t))}),e.set(t,s)});let u=0;return l.forEach(e=>vH(e,s[u++])),r}function OH(e,n){const l=new Map;if(e.forEach(e=>l.set(e,[])),0==n.length)return l;const t=new Set(n),i=new Map;return n.forEach(e=>{const n=function e(n){if(!n)return 1;let s=i.get(n);if(s)return s;const r=n.parentNode;return s=l.has(r)?r:t.has(r)?1:e(r),i.set(n,s),s}(e);1!==n&&l.get(n).push(e)}),l}function TH(e,n){if(e.classList)e.classList.add(n);else{let l=e.$$classes;l||(l=e.$$classes={}),l[n]=!0}}function CH(e,n){if(e.classList)e.classList.remove(n);else{let l=e.$$classes;l&&delete l[n]}}function IH(e,n,l){qF(l).onDone(()=>e.processLeaveNode(n))}function bH(e,n,l){const t=l.get(e);if(!t)return!1;let i=n.get(e);return i?t.forEach(e=>i.add(e)):n.set(e,t),l.delete(e),!0}class yH{constructor(e,n,l){this.bodyNode=e,this._driver=n,this._triggerCache={},this.onRemovalComplete=(e,n)=>{},this._transitionEngine=new fH(e,n,l),this._timelineEngine=new aH(e,n,l),this._transitionEngine.onRemovalComplete=(e,n)=>this.onRemovalComplete(e,n)}registerTrigger(e,n,l,t,i){const s=e+"-"+t;let r=this._triggerCache[s];if(!r){const e=[],n=kU(this._driver,i,e);if(e.length)throw new Error(`The animation trigger "${t}" has failed to build due to the following errors:\n - ${e.join("\n - ")}`);r=function(e,n){return new rH(e,n)}(t,n),this._triggerCache[s]=r}this._transitionEngine.registerTrigger(n,t,r)}register(e,n){this._transitionEngine.register(e,n)}destroy(e,n){this._transitionEngine.destroy(e,n)}onInsert(e,n,l,t){this._transitionEngine.insertNode(e,n,l,t)}onRemove(e,n,l,t){this._transitionEngine.removeNode(e,n,t||!1,l)}disableAnimations(e,n){this._transitionEngine.markElementAsDisabled(e,n)}process(e,n,l,t){if("@"==l.charAt(0)){const[e,i]=lU(l);this._timelineEngine.command(e,n,i,t)}else this._transitionEngine.trigger(e,n,l,t)}listen(e,n,l,t,i){if("@"==l.charAt(0)){const[e,t]=lU(l);return this._timelineEngine.listen(e,n,t,i)}return this._transitionEngine.listen(e,n,l,t,i)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}class AH extends WF{constructor(e,n){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(n.body,{id:"0",encapsulation:ke.None,styles:[],data:{animation:[]}})}build(e){const n=this._nextAnimationId.toString();this._nextAnimationId++;const l=Array.isArray(e)?YF(e):e;return wH(this._renderer,null,n,"register",[l]),new NH(n,this._renderer)}}class NH extends class{}{constructor(e,n){super(),this._id=e,this._renderer=n}create(e,n){return new _H(this._id,e,n||{},this._renderer)}}class _H{constructor(e,n,l,t){this.id=e,this.element=n,this._renderer=t,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",l)}_listen(e,n){return this._renderer.listen(this.element,`@@${this.id}:${e}`,n)}_command(e,...n){return wH(this._renderer,this.element,this.id,e,n)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(e){this._command("setPosition",e)}getPosition(){return 0}}function wH(e,n,l,t,i){return e.setProperty(n,`@@${l}:${t}`,i)}class PH{constructor(e,n,l){this.delegate=e,this.engine=n,this._zone=l,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),n.onRemovalComplete=(e,n)=>{n&&n.parentNode(e)&&n.removeChild(e.parentNode,e)}}createRenderer(e,n){const l=this.delegate.createRenderer(e,n);if(!(e&&n&&n.data&&n.data.animation)){let e=this._rendererCache.get(l);return e||(e=new MH("",l,this.engine),this._rendererCache.set(l,e)),e}const t=n.id,i=n.id+"-"+this._currentId;this._currentId++,this.engine.register(i,e);const s=n=>{Array.isArray(n)?n.forEach(s):this.engine.registerTrigger(t,i,e,n.name,n)};return n.data.animation.forEach(s),new DH(this,i,l,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,n,l){e>=0&&e<this._microtaskId?this._zone.run(()=>n(l)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(e=>{const[n,l]=e;n(l)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([n,l]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}class MH{constructor(e,n,l){this.namespaceId=e,this.delegate=n,this.engine=l,this.destroyNode=this.delegate.destroyNode?e=>n.destroyNode(e):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,n){return this.delegate.createElement(e,n)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,n){this.delegate.appendChild(e,n),this.engine.onInsert(this.namespaceId,n,e,!1)}insertBefore(e,n,l){this.delegate.insertBefore(e,n,l),this.engine.onInsert(this.namespaceId,n,e,!0)}removeChild(e,n,l){this.engine.onRemove(this.namespaceId,n,this.delegate,l)}selectRootElement(e,n){return this.delegate.selectRootElement(e,n)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,n,l,t){this.delegate.setAttribute(e,n,l,t)}removeAttribute(e,n,l){this.delegate.removeAttribute(e,n,l)}addClass(e,n){this.delegate.addClass(e,n)}removeClass(e,n){this.delegate.removeClass(e,n)}setStyle(e,n,l,t){this.delegate.setStyle(e,n,l,t)}removeStyle(e,n,l){this.delegate.removeStyle(e,n,l)}setProperty(e,n,l){"@"==n.charAt(0)&&"@.disabled"==n?this.disableAnimations(e,!!l):this.delegate.setProperty(e,n,l)}setValue(e,n){this.delegate.setValue(e,n)}listen(e,n,l){return this.delegate.listen(e,n,l)}disableAnimations(e,n){this.engine.disableAnimations(e,n)}}class DH extends MH{constructor(e,n,l,t){super(n,l,t),this.factory=e,this.namespaceId=n}setProperty(e,n,l){"@"==n.charAt(0)?"."==n.charAt(1)&&"@.disabled"==n?this.disableAnimations(e,l=void 0===l||!!l):this.engine.process(this.namespaceId,e,n.substr(1),l):this.delegate.setProperty(e,n,l)}listen(e,n,l){if("@"==n.charAt(0)){const t=function(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(e);let i=n.substr(1),s="";return"@"!=i.charAt(0)&&([i,s]=function(e){const n=e.indexOf(".");return[e.substring(0,n),e.substr(n+1)]}(i)),this.engine.listen(this.namespaceId,t,i,s,e=>{this.factory.scheduleListenerCallback(e._data||-1,l,e)})}return this.delegate.listen(e,n,l)}}class LH extends yH{constructor(e,n,l){super(e.body,n,l)}}function xH(){return new eH}function kH(e,n,l){return new PH(e,n,l)}const FH=new Re("AnimationModuleType");class UH{}let HH=(()=>{class e{constructor(e,n){this.gameService=e,this.router=n,this.lastRegion=Eu.VILLAGE}canActivate(e,n){switch(e.routeConfig.path){case"redirect":const e="/regions/"+Eu[this.lastRegion].toLowerCase();return this.router.navigate([e],{skipLocationChange:!1}),!1;case"crafting":return!!this.gameService.isEnabled(ou.CRAFTING)||(this.goToError(),!1);case"market":return!!this.gameService.isEnabled(ou.MARKET)||(this.goToError(),!1);case"research":return!!this.gameService.isEnabled(ou.RESEARCH)||(this.goToError(),!1);case"army":return!!this.gameService.isEnabled(ou.ARMY)||(this.goToError(),!1);case"religion":return!!this.gameService.isEnabled(ou.RELIGION)||(this.goToError(),!1);case"weather":return!!this.gameService.isEnabled(ou.WEATHER)||(this.goToError(),!1);case"world":return!!this.gameService.isEnabled(ou.CARTOGRAPHY)||(this.goToError(),!1);case"navy":return!!this.gameService.isEnabled(ou.NAVY)||(this.goToError(),!1);case"heritage":return!!this.gameService.isEnabled(ou.HERITAGE)||(this.goToError(),!1);case"village":return this.lastRegion=Eu.VILLAGE,!0;case"forest":return this.lastRegion=Eu.FOREST,!0;case"mountains":return this.gameService.isEnabled(ou.MOUNTAINS)?(this.lastRegion=Eu.MOUNTAINS,!0):(this.goToError(),!1);case"fort":return this.gameService.isEnabled(ou.FORT)?(this.lastRegion=Eu.FORT,!0):(this.goToError(),!1);case"sea":return this.gameService.isEnabled(ou.SEA)?(this.lastRegion=Eu.SEA,!0):(this.goToError(),!1);case"field":return this.gameService.isEnabled(ou.FIELD)?(this.lastRegion=Eu.FIELD,!0):(this.goToError(),!1);case"plateau":return this.gameService.isEnabled(ou.PLATEAU)?(this.lastRegion=Eu.PLATEAU,!0):(this.goToError(),!1);default:return!1}}goToError(){this.router.navigate(["/404"],{skipLocationChange:!0})}}return e.\u0275prov=re({factory:function(){return new e(Ae(Gp),Ae(Fd))},token:e,providedIn:"root"}),e})();class GH{constructor(){this.handlers={}}shouldDetach(e){return e.routeConfig&&("village"===e.routeConfig.path||"fort"===e.routeConfig.path||"forest"===e.routeConfig.path||"field"===e.routeConfig.path||"mountains"===e.routeConfig.path||"plateau"===e.routeConfig.path||"sea"===e.routeConfig.path)}store(e,n){this.handlers[e.routeConfig.path]=n}shouldAttach(e){return!!e.routeConfig&&!!this.handlers[e.routeConfig.path]}retrieve(e){return e.routeConfig?this.handlers[e.routeConfig.path]:null}shouldReuseRoute(e,n){return!1}}class BH{}var VH=nu(bo,[yo],(function(e){return function(e){const n={},l=[];let t=null;for(let i=0;i<e.length;i++){const s=e[i];s.token===wn&&(t=s.value),1073741824&s.flags&&l.push(s.token),s.index=i,n[zl(s.token)]=s}return{factory:null,providersByKey:n,providers:e,modules:l,scope:t}}([yt(512,el,nl,[[8,[gg,Eg,om,Pv,Bv,lR,HR,yO,QO,cT,NI,BI,qI,Sb,eA,vA,BA,uN,DN,jN,g_,A_,F_,tw,cw,Sw,iF]],[3,el],Pe]),yt(4608,Wg,Wg,[]),yt(5120,ki,_s,[[3,ki]]),yt(4608,Jo,ea,[ki]),yt(5120,Si,ws,[Ki]),yt(5120,_i,wi,[]),yt(5120,Cl,As,[]),yt(5120,Il,Ns,[]),yt(4608,UF,HF,[_o]),yt(6144,cl,null,[UF]),yt(4608,_F,PF,[]),yt(5120,pF,(function(e,n,l,t,i,s,r,u){return[new AF(e,n,l),new FF(t),new MF(i,s,r,u)]}),[_o,Ki,Di,_o,_o,_F,xi,[2,wF]]),yt(4608,mF,mF,[pF,Ki]),yt(135680,EF,EF,[_o]),yt(4608,CF,CF,[mF,EF,_i]),yt(4608,gU,dU,[]),yt(5120,JU,xH,[]),yt(4608,yH,LH,[_o,gU,JU]),yt(5120,rl,kH,[CF,yH,Ki]),yt(6144,SF,null,[EF]),yt(4608,ns,ns,[Ki]),yt(5120,Rh,sg,[Fd]),yt(4608,$d,$d,[]),yt(6144,Yd,null,[$d]),yt(135680,Kd,Kd,[Fd,ps,Wi,Mn,Yd]),yt(4608,zd,zd,[]),yt(5120,jd,eg,[Fd,Ra,Qd]),yt(5120,ag,og,[rg]),yt(5120,Li,(function(e){return[e]}),[ag]),yt(4608,WF,AH,[rl,_o]),yt(4608,Rf,Rf,[_o,Ki,Fm,Ef]),yt(4608,fP,SP,[_o,Di,pP]),yt(4608,EP,EP,[fP,mP]),yt(5120,oP,(function(e){return[e]}),[EP]),yt(4608,dP,dP,[]),yt(6144,hP,null,[dP]),yt(4608,gP,gP,[hP]),yt(6144,zw,null,[gP]),yt(4608,Yw,vP,[zw,Mn]),yt(4608,rP,rP,[Yw]),yt(4608,Qp,Qp,[xp,Np,Gp,Fp,wp,zp,Lp,Wp]),yt(1073742336,Rp,Rp,[]),yt(1073742336,Op,Op,[]),yt(1073742336,va,va,[]),yt(1024,We,GF,[]),yt(1024,us,(function(){return[Zd()]}),[]),yt(512,rg,rg,[Mn]),yt(1024,Ai,(function(e,n){return[(l=e,hF("probe",gF),hF("coreTokens",Object.assign(Object.assign({},dF),(l||[]).reduce((e,n)=>(e[n.name]=n.token,e),{}))),()=>gF),ug(n)];var l}),[[2,us],rg]),yt(512,Ni,Ni,[[2,Ai]]),yt(131584,ds,ds,[Ki,xi,Mn,We,el,Ni]),yt(1073742336,Ps,Ps,[ds]),yt(1073742336,VF,VF,[[3,VF]]),yt(1024,qd,lg,[[3,Fd]]),yt(512,Zc,Jc,[]),yt(512,Pd,Pd,[]),yt(256,Qd,{},[]),yt(1024,Ho,ng,[wo,[2,Bo],Qd]),yt(512,Yo,Yo,[Ho,wo]),yt(512,Wi,Wi,[]),yt(512,ps,Ss,[Wi,[2,ms]]),yt(1024,Nd,(function(){return[[{path:"",redirectTo:"regions/redirect",pathMatch:"full"},{path:"404",component:pg,pathMatch:"full"},{path:"resources",component:qp},{path:"crafting",children:[{path:"",redirectTo:"crafting",pathMatch:"full"},{path:"crafting",component:Tv,canActivate:[HH]},{path:"cooking",component:Mv}]},{path:"market",component:zv,canActivate:[HH]},{path:"research",component:yR,canActivate:[HH]},{path:"army",component:uO,canActivate:[HH]},{path:"religion",component:LO,canActivate:[HH]},{path:"weather",component:XO,canActivate:[HH]},{path:"world",component:KT,canActivate:[HH]},{path:"navy",component:_I,canActivate:[HH]},{path:"heritage",component:WI,canActivate:[HH]},{path:"royal",component:ub},{path:"regions",children:[{path:"",redirectTo:"redirect",pathMatch:"full"},{path:"redirect",component:Dy,canActivate:[HH]},{path:"village",component:Dy,canActivate:[HH]},{path:"fort",component:nA,canActivate:[HH]},{path:"forest",component:OA,canActivate:[HH]},{path:"field",component:WA,canActivate:[HH]},{path:"mountains",component:aN,canActivate:[HH]},{path:"plateau",component:xN,canActivate:[HH]},{path:"sea",component:QN,canActivate:[HH]}]},{path:"management",children:[{path:"",redirectTo:"general",pathMatch:"full"},{path:"general",component:E_},{path:"happiness",component:N_},{path:"effects",component:U_},{path:"forestM",component:iw},{path:"summary",component:hw}]},{path:"**",redirectTo:"regions/village",pathMatch:"full"}]]}),[]),yt(512,Od,GH,[]),yt(1024,Fd,ig,[Zc,Pd,Yo,Mn,ps,Wi,Nd,Qd,[2,Md],[2,Od]]),yt(1073742336,Jd,Jd,[[2,qd],[2,Fd]]),yt(1073742336,BH,BH,[]),yt(1073742336,UH,UH,[]),yt(1073742336,Um,Um,[]),yt(1073742336,_f,_f,[]),yt(1073742336,RP,RP,[]),yt(1073742336,OP,OP,[]),yt(1073742336,bo,bo,[]),yt(256,Fi,"USD",[]),yt(256,wn,"root",[]),yt(256,FH,"NoopAnimations",[]),yt(256,pP,"XSRF-TOKEN",[]),yt(256,mP,"X-XSRF-TOKEN",[])])}));Qu.production&&function(){if(en)throw new Error("Cannot enable prod mode after platform setup.");Je=!1}(),BF().bootstrapModuleFactory(VH).catch(e=>console.log(e))}},[[0,0]]]);
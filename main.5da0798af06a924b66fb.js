(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,n,t){e.exports=t("zUnb")},crnd:function(e,n){function t(e){return Promise.resolve().then(function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n})}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id="crnd"},zUnb:function(e,n,t){"use strict";t.r(n);var l=function(e,n){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])})(e,n)};function r(e,n){function t(){this.constructor=e}l(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}var i=function(){return(i=Object.assign||function(e){for(var n,t=1,l=arguments.length;t<l;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e}).apply(this,arguments)};function o(e,n,t,l){var r,i=arguments.length,o=i<3?n:null===l?l=Object.getOwnPropertyDescriptor(n,t):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,n,t,l);else for(var u=e.length-1;u>=0;u--)(r=e[u])&&(o=(i<3?r(o):i>3?r(n,t,o):r(n,t))||o);return i>3&&o&&Object.defineProperty(n,t,o),o}function u(e,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,n)}function s(e){var n="function"==typeof Symbol&&e[Symbol.iterator],t=0;return n?n.call(e):{next:function(){return e&&t>=e.length&&(e=void 0),{value:e&&e[t++],done:!e}}}}function a(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var l,r,i=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(l=i.next()).done;)o.push(l.value)}catch(u){r={error:u}}finally{try{l&&!l.done&&(t=i.return)&&t.call(i)}finally{if(r)throw r.error}}return o}function c(){for(var e=[],n=0;n<arguments.length;n++)e=e.concat(a(arguments[n]));return e}var p=Array.isArray||function(e){return e&&"number"==typeof e.length};function h(e){return null!==e&&"object"==typeof e}function d(e){return"function"==typeof e}function f(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,n){return n+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}f.prototype=Object.create(Error.prototype);var g=f,v=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}var n;return e.prototype.unsubscribe=function(){var n;if(!this.closed){var t=this._parentOrParents,l=this._unsubscribe,r=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof e)t.remove(this);else if(null!==t)for(var i=0;i<t.length;++i)t[i].remove(this);if(d(l))try{l.call(this)}catch(s){n=s instanceof g?m(s.errors):[s]}if(p(r)){i=-1;for(var o=r.length;++i<o;){var u=r[i];if(h(u))try{u.unsubscribe()}catch(s){n=n||[],s instanceof g?n=n.concat(m(s.errors)):n.push(s)}}}if(n)throw new g(n)}},e.prototype.add=function(n){var t=n;if(!n)return e.EMPTY;switch(typeof n){case"function":t=new e(n);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof e)){var l=t;(t=new e)._subscriptions=[l]}break;default:throw new Error("unrecognized teardown "+n+" added to Subscription.")}var r=t._parentOrParents;if(null===r)t._parentOrParents=this;else if(r instanceof e){if(r===this)return t;t._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return t;r.push(this)}var i=this._subscriptions;return null===i?this._subscriptions=[t]:i.push(t),t},e.prototype.remove=function(e){var n=this._subscriptions;if(n){var t=n.indexOf(e);-1!==t&&n.splice(t,1)}},e.EMPTY=((n=new e).closed=!0,n),e}();function m(e){return e.reduce(function(e,n){return e.concat(n instanceof g?n.errors:n)},[])}var y=!1,S={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){y=e},get useDeprecatedSynchronousErrorHandling(){return y}};function E(e){setTimeout(function(){throw e},0)}var b={closed:!0,next:function(e){},error:function(e){if(S.useDeprecatedSynchronousErrorHandling)throw e;E(e)},complete:function(){}},O="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),R=function(e){function n(t,l,r){var i=e.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=b;break;case 1:if(!t){i.destination=b;break}if("object"==typeof t){t instanceof n?(i.syncErrorThrowable=t.syncErrorThrowable,i.destination=t,t.add(i)):(i.syncErrorThrowable=!0,i.destination=new C(i,t));break}default:i.syncErrorThrowable=!0,i.destination=new C(i,t,l,r)}return i}return r(n,e),n.prototype[O]=function(){return this},n.create=function(e,t,l){var r=new n(e,t,l);return r.syncErrorThrowable=!1,r},n.prototype.next=function(e){this.isStopped||this._next(e)},n.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},n.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},n.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},n.prototype._next=function(e){this.destination.next(e)},n.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},n.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},n.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},n}(v),C=function(e){function n(n,t,l,r){var i,o=e.call(this)||this;o._parentSubscriber=n;var u=o;return d(t)?i=t:t&&(i=t.next,l=t.error,r=t.complete,t!==b&&(d((u=Object.create(t)).unsubscribe)&&o.add(u.unsubscribe.bind(u)),u.unsubscribe=o.unsubscribe.bind(o))),o._context=u,o._next=i,o._error=l,o._complete=r,o}return r(n,e),n.prototype.next=function(e){if(!this.isStopped&&this._next){var n=this._parentSubscriber;S.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?this.__tryOrSetError(n,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},n.prototype.error=function(e){if(!this.isStopped){var n=this._parentSubscriber,t=S.useDeprecatedSynchronousErrorHandling;if(this._error)t&&n.syncErrorThrowable?(this.__tryOrSetError(n,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(n.syncErrorThrowable)t?(n.syncErrorValue=e,n.syncErrorThrown=!0):E(e),this.unsubscribe();else{if(this.unsubscribe(),t)throw e;E(e)}}},n.prototype.complete=function(){var e=this;if(!this.isStopped){var n=this._parentSubscriber;if(this._complete){var t=function(){return e._complete.call(e._context)};S.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?(this.__tryOrSetError(n,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}},n.prototype.__tryOrUnsub=function(e,n){try{e.call(this._context,n)}catch(t){if(this.unsubscribe(),S.useDeprecatedSynchronousErrorHandling)throw t;E(t)}},n.prototype.__tryOrSetError=function(e,n,t){if(!S.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,t)}catch(l){return S.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=l,e.syncErrorThrown=!0,!0):(E(l),!0)}return!1},n.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},n}(R),_="function"==typeof Symbol&&Symbol.observable||"@@observable";function T(){}function I(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return A(e)}function A(e){return e?1===e.length?e[0]:function(n){return e.reduce(function(e,n){return n(e)},n)}:T}var w=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(n){var t=new e;return t.source=this,t.operator=n,t},e.prototype.subscribe=function(e,n,t){var l=this.operator,r=function(e,n,t){if(e){if(e instanceof R)return e;if(e[O])return e[O]()}return e||n||t?new R(e,n,t):new R(b)}(e,n,t);if(r.add(l?l.call(r,this.source):this.source||S.useDeprecatedSynchronousErrorHandling&&!r.syncErrorThrowable?this._subscribe(r):this._trySubscribe(r)),S.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable&&(r.syncErrorThrowable=!1,r.syncErrorThrown))throw r.syncErrorValue;return r},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){S.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=n),function(e){for(;e;){var n=e.destination;if(e.closed||e.isStopped)return!1;e=n&&n instanceof R?n:null}return!0}(e)?e.error(n):console.warn(n)}},e.prototype.forEach=function(e,n){var t=this;return new(n=N(n))(function(n,l){var r;r=t.subscribe(function(n){try{e(n)}catch(t){l(t),r&&r.unsubscribe()}},l,n)})},e.prototype._subscribe=function(e){var n=this.source;return n&&n.subscribe(e)},e.prototype[_]=function(){return this},e.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 0===e.length?this:A(e)(this)},e.prototype.toPromise=function(e){var n=this;return new(e=N(e))(function(e,t){var l;n.subscribe(function(e){return l=e},function(e){return t(e)},function(){return e(l)})})},e.create=function(n){return new e(n)},e}();function N(e){if(e||(e=S.Promise||Promise),!e)throw new Error("no Promise impl found");return e}function P(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}P.prototype=Object.create(Error.prototype);var D=P,k=function(e){function n(n,t){var l=e.call(this)||this;return l.subject=n,l.subscriber=t,l.closed=!1,l}return r(n,e),n.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,n=e.observers;if(this.subject=null,n&&0!==n.length&&!e.isStopped&&!e.closed){var t=n.indexOf(this.subscriber);-1!==t&&n.splice(t,1)}}},n}(v),M=function(e){function n(n){var t=e.call(this,n)||this;return t.destination=n,t}return r(n,e),n}(R),x=function(e){function n(){var n=e.call(this)||this;return n.observers=[],n.closed=!1,n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return r(n,e),n.prototype[O]=function(){return new M(this)},n.prototype.lift=function(e){var n=new L(this,this);return n.operator=e,n},n.prototype.next=function(e){if(this.closed)throw new D;if(!this.isStopped)for(var n=this.observers,t=n.length,l=n.slice(),r=0;r<t;r++)l[r].next(e)},n.prototype.error=function(e){if(this.closed)throw new D;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var n=this.observers,t=n.length,l=n.slice(),r=0;r<t;r++)l[r].error(e);this.observers.length=0},n.prototype.complete=function(){if(this.closed)throw new D;this.isStopped=!0;for(var e=this.observers,n=e.length,t=e.slice(),l=0;l<n;l++)t[l].complete();this.observers.length=0},n.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},n.prototype._trySubscribe=function(n){if(this.closed)throw new D;return e.prototype._trySubscribe.call(this,n)},n.prototype._subscribe=function(e){if(this.closed)throw new D;return this.hasError?(e.error(this.thrownError),v.EMPTY):this.isStopped?(e.complete(),v.EMPTY):(this.observers.push(e),new k(this,e))},n.prototype.asObservable=function(){var e=new w;return e.source=this,e},n.create=function(e,n){return new L(e,n)},n}(w),L=function(e){function n(n,t){var l=e.call(this)||this;return l.destination=n,l.source=t,l}return r(n,e),n.prototype.next=function(e){var n=this.destination;n&&n.next&&n.next(e)},n.prototype.error=function(e){var n=this.destination;n&&n.error&&this.destination.error(e)},n.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},n.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):v.EMPTY},n}(x);function F(e){return e&&"function"==typeof e.schedule}var U=function(e){function n(n,t,l){var r=e.call(this)||this;return r.parent=n,r.outerValue=t,r.outerIndex=l,r.index=0,r}return r(n,e),n.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},n.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},n.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},n}(R),H=function(e){return function(n){for(var t=0,l=e.length;t<l&&!n.closed;t++)n.next(e[t]);n.complete()}};function G(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var B=G(),V=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function W(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var j=function(e){if(e&&"function"==typeof e[_])return l=e,function(e){var n=l[_]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)};if(V(e))return H(e);if(W(e))return t=e,function(e){return t.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,E),e};if(e&&"function"==typeof e[B])return n=e,function(e){for(var t=n[B]();;){var l=t.next();if(l.done){e.complete();break}if(e.next(l.value),e.closed)break}return"function"==typeof t.return&&e.add(function(){t.return&&t.return()}),e};var n,t,l,r=h(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+r+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function z(e,n,t,l,r){if(void 0===r&&(r=new U(e,t,l)),!r.closed)return n instanceof w?n.subscribe(r):j(n)(r)}var Y=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r(n,e),n.prototype.notifyNext=function(e,n,t,l,r){this.destination.next(n)},n.prototype.notifyError=function(e,n){this.destination.error(e)},n.prototype.notifyComplete=function(e){this.destination.complete()},n}(R);function K(e,n){return function(t){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return t.lift(new q(e,n))}}var q=function(){function e(e,n){this.project=e,this.thisArg=n}return e.prototype.call=function(e,n){return n.subscribe(new $(e,this.project,this.thisArg))},e}(),$=function(e){function n(n,t,l){var r=e.call(this,n)||this;return r.project=t,r.count=0,r.thisArg=l||r,r}return r(n,e),n.prototype._next=function(e){var n;try{n=this.project.call(this.thisArg,e,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(n)},n}(R);function Q(e,n){return new w(function(t){var l=new v,r=0;return l.add(n.schedule(function(){r!==e.length?(t.next(e[r++]),t.closed||l.add(this.schedule())):t.complete()})),l})}function Z(e,n){return n?function(e,n){if(null!=e){if(function(e){return e&&"function"==typeof e[_]}(e))return function(e,n){return new w(function(t){var l=new v;return l.add(n.schedule(function(){var r=e[_]();l.add(r.subscribe({next:function(e){l.add(n.schedule(function(){return t.next(e)}))},error:function(e){l.add(n.schedule(function(){return t.error(e)}))},complete:function(){l.add(n.schedule(function(){return t.complete()}))}}))})),l})}(e,n);if(W(e))return function(e,n){return new w(function(t){var l=new v;return l.add(n.schedule(function(){return e.then(function(e){l.add(n.schedule(function(){t.next(e),l.add(n.schedule(function(){return t.complete()}))}))},function(e){l.add(n.schedule(function(){return t.error(e)}))})})),l})}(e,n);if(V(e))return Q(e,n);if(function(e){return e&&"function"==typeof e[B]}(e)||"string"==typeof e)return function(e,n){if(!e)throw new Error("Iterable cannot be null");return new w(function(t){var l,r=new v;return r.add(function(){l&&"function"==typeof l.return&&l.return()}),r.add(n.schedule(function(){l=e[B](),r.add(n.schedule(function(){if(!t.closed){var e,n;try{var r=l.next();e=r.value,n=r.done}catch(i){return void t.error(i)}n?t.complete():(t.next(e),this.schedule())}}))})),r})}(e,n)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,n):e instanceof w?e:new w(j(e))}function X(e,n,t){return void 0===t&&(t=Number.POSITIVE_INFINITY),"function"==typeof n?function(l){return l.pipe(X(function(t,l){return Z(e(t,l)).pipe(K(function(e,r){return n(t,e,l,r)}))},t))}:("number"==typeof n&&(t=n),function(n){return n.lift(new J(e,t))})}var J=function(){function e(e,n){void 0===n&&(n=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=n}return e.prototype.call=function(e,n){return n.subscribe(new ee(e,this.project,this.concurrent))},e}(),ee=function(e){function n(n,t,l){void 0===l&&(l=Number.POSITIVE_INFINITY);var r=e.call(this,n)||this;return r.project=t,r.concurrent=l,r.hasCompleted=!1,r.buffer=[],r.active=0,r.index=0,r}return r(n,e),n.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},n.prototype._tryNext=function(e){var n,t=this.index++;try{n=this.project(e,t)}catch(l){return void this.destination.error(l)}this.active++,this._innerSub(n,e,t)},n.prototype._innerSub=function(e,n,t){var l=new U(this,void 0,void 0);this.destination.add(l),z(this,e,n,t,l)},n.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},n.prototype.notifyNext=function(e,n,t,l,r){this.destination.next(n)},n.prototype.notifyComplete=function(e){var n=this.buffer;this.remove(e),this.active--,n.length>0?this._next(n.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},n}(Y);function ne(e){return e}function te(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),X(ne,e)}function le(e,n){return n?Q(e,n):new w(H(e))}function re(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=Number.POSITIVE_INFINITY,l=null,r=e[e.length-1];return F(r)?(l=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof r&&(t=e.pop()),null===l&&1===e.length&&e[0]instanceof w?e[0]:te(t)(le(e,l))}function ie(){return function(e){return e.lift(new oe(e))}}var oe=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,n){var t=this.connectable;t._refCount++;var l=new ue(e,t),r=n.subscribe(l);return l.closed||(l.connection=t.connect()),r},e}(),ue=function(e){function n(n,t){var l=e.call(this,n)||this;return l.connectable=t,l}return r(n,e),n.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var n=e._refCount;if(n<=0)this.connection=null;else if(e._refCount=n-1,n>1)this.connection=null;else{var t=this.connection,l=e._connection;this.connection=null,!l||t&&l!==t||l.unsubscribe()}}else this.connection=null},n}(R),se=function(e){function n(n,t){var l=e.call(this)||this;return l.source=n,l.subjectFactory=t,l._refCount=0,l._isComplete=!1,l}return r(n,e),n.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},n.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},n.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new v).add(this.source.subscribe(new ce(this.getSubject(),this))),e.closed&&(this._connection=null,e=v.EMPTY)),e},n.prototype.refCount=function(){return ie()(this)},n}(w).prototype,ae={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:se._subscribe},_isComplete:{value:se._isComplete,writable:!0},getSubject:{value:se.getSubject},connect:{value:se.connect},refCount:{value:se.refCount}},ce=function(e){function n(n,t){var l=e.call(this,n)||this;return l.connectable=t,l}return r(n,e),n.prototype._error=function(n){this._unsubscribe(),e.prototype._error.call(this,n)},n.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},n.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var n=e._connection;e._refCount=0,e._subject=null,e._connection=null,n&&n.unsubscribe()}},n}(M);function pe(){return new x}function he(e){for(var n in e)if(e[n]===he)return n;throw Error("Could not find renamed property on target object.")}function de(e,n){for(var t in n)n.hasOwnProperty(t)&&!e.hasOwnProperty(t)&&(e[t]=n[t])}var fe=he({ngInjectableDef:he}),ge=he({ngBaseDef:he});function ve(e){return{providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function me(e){return e&&e.hasOwnProperty(fe)?e[fe]:null}var ye=function(){function e(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.ngInjectableDef=void 0!==n?ve({providedIn:n.providedIn||"root",factory:n.factory}):void 0}return e.prototype.toString=function(){return"InjectionToken "+this._desc},e}(),Se="__parameters__",Ee="__prop__metadata__";function be(e){return function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];if(e){var l=e.apply(void 0,c(n));for(var r in l)this[r]=l[r]}}}function Oe(e,n,t){var l=be(n);function r(){for(var e,n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];if(this instanceof r)return l.apply(this,n),this;var i=new((e=r).bind.apply(e,c([void 0],n)));return o.annotation=i,o;function o(e,n,t){for(var l=e.hasOwnProperty(Se)?e[Se]:Object.defineProperty(e,Se,{value:[]})[Se];l.length<=t;)l.push(null);return(l[t]=l[t]||[]).push(i),e}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=e,r.annotationCls=r,r}function Re(e,n,t,l){var r=be(n);function i(){for(var e,n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];if(this instanceof i)return r.apply(this,n),this;var o=new((e=i).bind.apply(e,c([void 0],n)));return function(e,t){var r=e.constructor,i=r.hasOwnProperty(Ee)?r[Ee]:Object.defineProperty(r,Ee,{value:{}})[Ee];i[t]=i.hasOwnProperty(t)&&i[t]||[],i[t].unshift(o),l&&l.apply(void 0,c([e,t],n))}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i}var Ce=new ye("AnalyzeForEntryComponents"),_e="undefined"!=typeof window&&window,Te="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ie="undefined"!=typeof global&&global||_e||Te,Ae=Promise.resolve(0),we=null;function Ne(){if(!we){var e=Ie.Symbol;if(e&&e.iterator)we=e.iterator;else for(var n=Object.getOwnPropertyNames(Map.prototype),t=0;t<n.length;++t){var l=n[t];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(we=l)}}return we}function Pe(e){"undefined"==typeof Zone?Ae.then(function(){e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}function De(e,n){return e===n||"number"==typeof e&&"number"==typeof n&&isNaN(e)&&isNaN(n)}function ke(e){if("string"==typeof e)return e;if(e instanceof Array)return"["+e.map(ke).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return""+e.overriddenName;if(e.name)return""+e.name;var n=e.toString();if(null==n)return""+n;var t=n.indexOf("\n");return-1===t?n:n.substring(0,t)}var Me=he({__forward_ref__:he});function xe(e){return e.__forward_ref__=xe,e.toString=function(){return ke(this())},e}function Le(e){var n=e;return"function"==typeof n&&n.hasOwnProperty(Me)&&n.__forward_ref__===xe?n():e}var Fe,Ue=function(e){return e[e.Emulated=0]="Emulated",e[e.Native=1]="Native",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}({}),He=Oe("Inject",function(e){return{token:e}}),Ge=Oe("Optional"),Be=Oe("Self"),Ve=Oe("SkipSelf"),We=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({}),je=void 0;function ze(e){var n=je;return je=e,n}function Ye(e,n){return void 0===n&&(n=We.Default),(Fe||function(e,n){if(void 0===n&&(n=We.Default),void 0===je)throw new Error("inject() must be called from an injection context");return null===je?function(e,n,t){var l=me(e);if(l&&"root"==l.providedIn)return void 0===l.value?l.value=l.factory():l.value;if(t&We.Optional)return null;throw new Error("Injector: NOT_FOUND ["+ke(e)+"]")}(e,0,n):je.get(e,n&We.Optional?null:void 0,n)})(e,n)}var Ke=/([A-Z])/g;function qe(e){try{return null!=e?e.toString().slice(0,30):e}catch(n){return"[ERROR] Exception while trying to serialize the value"}}function $e(e,n){var t=Xe(e),l=Xe(n);return t&&l?function(e,n,t){for(var l=e[Ne()](),r=n[Ne()]();;){var i=l.next(),o=r.next();if(i.done&&o.done)return!0;if(i.done||o.done)return!1;if(!t(i.value,o.value))return!1}}(e,n,$e):!(t||!e||"object"!=typeof e&&"function"!=typeof e||l||!n||"object"!=typeof n&&"function"!=typeof n)||De(e,n)}var Qe=function(){function e(e){this.wrapped=e}return e.wrap=function(n){return new e(n)},e.unwrap=function(n){return e.isWrapped(n)?n.wrapped:n},e.isWrapped=function(n){return n instanceof e},e}(),Ze=function(){function e(e,n,t){this.previousValue=e,this.currentValue=n,this.firstChange=t}return e.prototype.isFirstChange=function(){return this.firstChange},e}();function Xe(e){return!!Je(e)&&(Array.isArray(e)||!(e instanceof Map)&&Ne()in e)}function Je(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function en(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n]}var nn="__source",tn=new Object,ln=new ye("INJECTOR"),rn=function(){function e(){}return e.prototype.get=function(e,n){if(void 0===n&&(n=tn),n===tn)throw new Error("NullInjectorError: No provider for "+ke(e)+"!");return n},e}(),on=function(){function e(){}return e.create=function(e,n){return Array.isArray(e)?new vn(e,n):new vn(e.providers,e.parent,e.name||null)},e.THROW_IF_NOT_FOUND=tn,e.NULL=new rn,e.ngInjectableDef=ve({providedIn:"any",factory:function(){return Ye(ln)}}),e.__NG_ELEMENT_ID__=function(){return un()},e}(),un=en,sn=function(e){return e},an=[],cn=sn,pn=function(){return Array.prototype.slice.call(arguments)},hn=he({provide:String,useValue:he}),dn=on.NULL,fn=/\n/gm,gn="\u0275",vn=function(){function e(e,n,t){void 0===n&&(n=dn),void 0===t&&(t=null),this.parent=n,this.source=t;var l=this._records=new Map;l.set(on,{token:on,fn:sn,deps:an,value:this,useNew:!1}),l.set(ln,{token:ln,fn:sn,deps:an,value:this,useNew:!1}),function e(n,t){if(t)if((t=Le(t))instanceof Array)for(var l=0;l<t.length;l++)e(n,t[l]);else{if("function"==typeof t)throw Sn("Function/Class not supported",t);if(!t||"object"!=typeof t||!t.provide)throw Sn("Unexpected provider",t);var r=Le(t.provide),i=function(e){var n=function(e){var n=an,t=e.deps;if(t&&t.length){n=[];for(var l=0;l<t.length;l++){var r=6;if((s=Le(t[l]))instanceof Array)for(var i=0,o=s;i<o.length;i++){var u=o[i];u instanceof Ge||u==Ge?r|=1:u instanceof Ve||u==Ve?r&=-3:u instanceof Be||u==Be?r&=-5:s=u instanceof He?u.token:Le(u)}n.push({token:s,options:r})}}else if(e.useExisting){var s;n=[{token:s=Le(e.useExisting),options:6}]}else if(!(t||hn in e))throw Sn("'deps' required",e);return n}(e),t=sn,l=an,r=!1,i=Le(e.provide);if(hn in e)l=e.useValue;else if(e.useFactory)t=e.useFactory;else if(e.useExisting);else if(e.useClass)r=!0,t=Le(e.useClass);else{if("function"!=typeof i)throw Sn("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",e);r=!0,t=i}return{deps:n,fn:t,useNew:r,value:l}}(t);if(!0===t.multi){var o=n.get(r);if(o){if(o.fn!==pn)throw mn(r)}else n.set(r,o={token:t.provide,deps:[],useNew:!1,fn:pn,value:an});o.deps.push({token:r=t,options:6})}var u=n.get(r);if(u&&u.fn==pn)throw mn(r);n.set(r,i)}}(l,e)}return e.prototype.get=function(e,n,t){void 0===t&&(t=We.Default);var l=this._records.get(e);try{return function e(n,t,l,r,i,o){try{return function(n,t,l,r,i,o){var u,s;if(!t||o&We.SkipSelf)o&We.Self||(s=r.get(n,i,We.Default));else{if((s=t.value)==cn)throw Error(gn+"Circular dependency");if(s===an){t.value=cn;var a=t.useNew,p=t.fn,h=t.deps,d=an;if(h.length){d=[];for(var f=0;f<h.length;f++){var g=h[f],v=g.options,m=2&v?l.get(g.token):void 0;d.push(e(g.token,m,l,m||4&v?r:dn,1&v?null:on.THROW_IF_NOT_FOUND,We.Default))}}t.value=s=a?new((u=p).bind.apply(u,c([void 0],d))):p.apply(void 0,d)}}return s}(n,t,l,r,i,o)}catch(u){throw u instanceof Error||(u=new Error(u)),(u.ngTempTokenPath=u.ngTempTokenPath||[]).unshift(n),t&&t.value==cn&&(t.value=an),u}}(e,l,this._records,this.parent,n,t)}catch(i){var r=i.ngTempTokenPath;throw e[nn]&&r.unshift(e[nn]),i.message=yn("\n"+i.message,r,this.source),i.ngTokenPath=r,i.ngTempTokenPath=null,i}},e.prototype.toString=function(){var e=[];return this._records.forEach(function(n,t){return e.push(ke(t))}),"StaticInjector["+e.join(", ")+"]"},e}();function mn(e){return Sn("Cannot mix multi providers and regular providers",e)}function yn(e,n,t){void 0===t&&(t=null),e=e&&"\n"===e.charAt(0)&&e.charAt(1)==gn?e.substr(2):e;var l=ke(n);if(n instanceof Array)l=n.map(ke).join(" -> ");else if("object"==typeof n){var r=[];for(var i in n)if(n.hasOwnProperty(i)){var o=n[i];r.push(i+":"+("string"==typeof o?JSON.stringify(o):ke(o)))}l="{"+r.join(", ")+"}"}return"StaticInjectorError"+(t?"("+t+")":"")+"["+l+"]: "+e.replace(fn,"\n  ")}function Sn(e,n){return new Error(yn(e,n))}var En=new ye("The presence of this token marks an injector as being the root injector."),bn=function(){return function(){}}(),On=function(){return function(){}}();function Rn(e){var n=Error("No component factory found for "+ke(e)+". Did you add it to @NgModule.entryComponents?");return n[Cn]=e,n}var Cn="ngComponent",_n=function(){function e(){}return e.prototype.resolveComponentFactory=function(e){throw Rn(e)},e}(),Tn=function(){function e(){}return e.NULL=new _n,e}(),In=function(){function e(e,n,t){this._parent=n,this._ngModule=t,this._factories=new Map;for(var l=0;l<e.length;l++){var r=e[l];this._factories.set(r.componentType,r)}}return e.prototype.resolveComponentFactory=function(e){var n=this._factories.get(e);if(!n&&this._parent&&(n=this._parent.resolveComponentFactory(e)),!n)throw Rn(e);return new An(n,this._ngModule)},e}(),An=function(e){function n(n,t){var l=e.call(this)||this;return l.factory=n,l.ngModule=t,l.selector=n.selector,l.componentType=n.componentType,l.ngContentSelectors=n.ngContentSelectors,l.inputs=n.inputs,l.outputs=n.outputs,l}return r(n,e),n.prototype.create=function(e,n,t,l){return this.factory.create(e,n,t,l||this.ngModule)},n}(On),wn=function(){return function(){}}(),Nn=function(){return function(){}}(),Pn=function(){function e(e){this.nativeElement=e}return e.__NG_ELEMENT_ID__=function(){return Dn(e)},e}(),Dn=en,kn=function(){return function(){}}(),Mn=function(){return function(){}}(),xn=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}({}),Ln=function(){function e(){}return e.__NG_ELEMENT_ID__=function(){return Fn()},e}(),Fn=en,Un=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}({}),Hn=function(){return function(){}}(),Gn=new(function(){return function(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}())("7.2.15"),Bn=!0,Vn=!1;function Wn(){return Vn=!0,Bn}var jn=function(){function e(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),this.inertBodyElement=this.inertDocument.body,null==this.inertBodyElement){var n=this.inertDocument.createElement("html");this.inertDocument.appendChild(n),this.inertBodyElement=this.inertDocument.createElement("body"),n.appendChild(this.inertBodyElement)}this.inertBodyElement.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.inertBodyElement.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(e){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}return e.prototype.getInertBodyElement_XHR=function(e){e="<body><remove></remove>"+e+"</body>";try{e=encodeURI(e)}catch(l){return null}var n=new XMLHttpRequest;n.responseType="document",n.open("GET","data:text/html;charset=utf-8,"+e,!1),n.send(void 0);var t=n.response.body;return t.removeChild(t.firstChild),t},e.prototype.getInertBodyElement_DOMParser=function(e){e="<body><remove></remove>"+e+"</body>";try{var n=(new window.DOMParser).parseFromString(e,"text/html").body;return n.removeChild(n.firstChild),n}catch(t){return null}},e.prototype.getInertBodyElement_InertDocument=function(e){var n=this.inertDocument.createElement("template");return"content"in n?(n.innerHTML=e,n):(this.inertBodyElement.innerHTML=e,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)},e.prototype.stripCustomNsAttrs=function(e){for(var n=e.attributes,t=n.length-1;0<t;t--){var l=n.item(t).name;"xmlns:ns1"!==l&&0!==l.indexOf("ns1:")||e.removeAttribute(l)}for(var r=e.firstChild;r;)r.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(r),r=r.nextSibling},e}(),zn=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:\/?#]*(?:[\/?#]|$))/gi,Yn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Kn(e){return(e=String(e)).match(zn)||e.match(Yn)?e:(Wn()&&console.warn("WARNING: sanitizing unsafe URL value "+e+" (see http://g.co/ng/security#xss)"),"unsafe:"+e)}function qn(e){var n,t,l={};try{for(var r=s(e.split(",")),i=r.next();!i.done;i=r.next())l[i.value]=!0}catch(o){n={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(n)throw n.error}}return l}function $n(){for(var e,n,t=[],l=0;l<arguments.length;l++)t[l]=arguments[l];var r={};try{for(var i=s(t),o=i.next();!o.done;o=i.next()){var u=o.value;for(var a in u)u.hasOwnProperty(a)&&(r[a]=!0)}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}var Qn,Zn=qn("area,br,col,hr,img,wbr"),Xn=qn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Jn=qn("rp,rt"),et=$n(Jn,Xn),nt=$n(Zn,$n(Xn,qn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),$n(Jn,qn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),et),tt=qn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),lt=qn("srcset"),rt=$n(tt,lt,qn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width")),it=qn("script,style,template"),ot=function(){function e(){this.sanitizedSomething=!1,this.buf=[]}return e.prototype.sanitizeChildren=function(e){for(var n=e.firstChild,t=!0;n;)if(n.nodeType===Node.ELEMENT_NODE?t=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,t&&n.firstChild)n=n.firstChild;else for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);var l=this.checkClobberedElement(n,n.nextSibling);if(l){n=l;break}n=this.checkClobberedElement(n,n.parentNode)}return this.buf.join("")},e.prototype.startElement=function(e){var n,t=e.nodeName.toLowerCase();if(!nt.hasOwnProperty(t))return this.sanitizedSomething=!0,!it.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);for(var l=e.attributes,r=0;r<l.length;r++){var i=l.item(r),o=i.name,u=o.toLowerCase();if(rt.hasOwnProperty(u)){var s=i.value;tt[u]&&(s=Kn(s)),lt[u]&&(n=s,s=(n=String(n)).split(",").map(function(e){return Kn(e.trim())}).join(", ")),this.buf.push(" ",o,'="',at(s),'"')}else this.sanitizedSomething=!0}return this.buf.push(">"),!0},e.prototype.endElement=function(e){var n=e.nodeName.toLowerCase();nt.hasOwnProperty(n)&&!Zn.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))},e.prototype.chars=function(e){this.buf.push(at(e))},e.prototype.checkClobberedElement=function(e,n){if(n&&(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+e.outerHTML);return n},e}(),ut=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,st=/([^\#-~ |!])/g;function at(e){return e.replace(/&/g,"&amp;").replace(ut,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(st,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function ct(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var pt=function(e){function n(n){void 0===n&&(n=!1);var t=e.call(this)||this;return t.__isAsync=n,t}return r(n,e),n.prototype.emit=function(n){e.prototype.next.call(this,n)},n.prototype.subscribe=function(n,t,l){var r,i=function(e){return null},o=function(){return null};n&&"object"==typeof n?(r=this.__isAsync?function(e){setTimeout(function(){return n.next(e)})}:function(e){n.next(e)},n.error&&(i=this.__isAsync?function(e){setTimeout(function(){return n.error(e)})}:function(e){n.error(e)}),n.complete&&(o=this.__isAsync?function(){setTimeout(function(){return n.complete()})}:function(){n.complete()})):(r=this.__isAsync?function(e){setTimeout(function(){return n(e)})}:function(e){n(e)},t&&(i=this.__isAsync?function(e){setTimeout(function(){return t(e)})}:function(e){t(e)}),l&&(o=this.__isAsync?function(){setTimeout(function(){return l()})}:function(){l()}));var u=e.prototype.subscribe.call(this,r,i,o);return n instanceof v&&n.add(u),u},n}(x),ht=function(){function e(){}return e.__NG_ELEMENT_ID__=function(){return dt(e,Pn)},e}(),dt=en,ft=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),gt=/^url\(([^)]+)\)$/,vt=function(){return function(){}}(),mt=Re("Input",function(e){return{bindingPropertyName:e}},void 0,function(e){return function(e,n){for(var t=[],l=2;l<arguments.length;l++)t[l-2]=arguments[l];var r=e.constructor;r.hasOwnProperty(ge)||function(e){var n=e.constructor,t=n.ngBaseDef,l=n.ngBaseDef={inputs:{},outputs:{},declaredInputs:{}};t&&(de(l.inputs,t.inputs),de(l.outputs,t.outputs),de(l.declaredInputs,t.declaredInputs))}(e),(function(e){return e.inputs||{}}(r.ngBaseDef))[n]=t[0]}}()),yt=Re("HostBinding",function(e){return{hostPropertyName:e}}),St="ngDebugContext",Et="ngOriginalError",bt="ngErrorLogger";function Ot(e){return e[St]}function Rt(e){return e[Et]}function Ct(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];e.error.apply(e,c(n))}var _t=function(){function e(){this._console=console}return e.prototype.handleError=function(e){var n=this._findOriginalError(e),t=this._findContext(e),l=function(e){return e[bt]||Ct}(e);l(this._console,"ERROR",e),n&&l(this._console,"ORIGINAL ERROR",n),t&&l(this._console,"ERROR CONTEXT",t)},e.prototype._findContext=function(e){return e?Ot(e)?Ot(e):this._findContext(Rt(e)):null},e.prototype._findOriginalError=function(e){for(var n=Rt(e);n&&Rt(n);)n=Rt(n);return n},e}();function Tt(e){return!!e&&"function"==typeof e.then}function It(e){return!!e&&"function"==typeof e.subscribe}var At=new ye("Application Initializer"),wt=function(){function e(e){var n=this;this.appInits=e,this.initialized=!1,this.done=!1,this.donePromise=new Promise(function(e,t){n.resolve=e,n.reject=t})}return e.prototype.runInitializers=function(){var e=this;if(!this.initialized){var n=[],t=function(){e.done=!0,e.resolve()};if(this.appInits)for(var l=0;l<this.appInits.length;l++){var r=this.appInits[l]();Tt(r)&&n.push(r)}Promise.all(n).then(function(){t()}).catch(function(n){e.reject(n)}),0===n.length&&t(),this.initialized=!0}},e}(),Nt=new ye("AppId");function Pt(){return""+Dt()+Dt()+Dt()}function Dt(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var kt=new ye("Platform Initializer"),Mt=new ye("Platform ID"),xt=new ye("appBootstrapListener"),Lt=function(){function e(){}return e.prototype.log=function(e){console.log(e)},e.prototype.warn=function(e){console.warn(e)},e}();function Ft(){throw new Error("Runtime compiler is not loaded")}var Ut,Ht,Gt=Ft,Bt=Ft,Vt=Ft,Wt=Ft,jt=function(){function e(){this.compileModuleSync=Gt,this.compileModuleAsync=Bt,this.compileModuleAndAllComponentsSync=Vt,this.compileModuleAndAllComponentsAsync=Wt}return e.prototype.clearCache=function(){},e.prototype.clearCacheFor=function(e){},e.prototype.getModuleId=function(e){},e}(),zt=function(){return function(){}}();function Yt(){var e=Ie.wtf;return!(!e||!(Ut=e.trace)||(Ht=Ut.events,0))}var Kt=Yt();function qt(e,n){return null}var $t=Kt?function(e,n){return void 0===n&&(n=null),Ht.createScope(e,n)}:function(e,n){return qt},Qt=Kt?function(e,n){return Ut.leaveScope(e,n),n}:function(e,n){return n},Zt=function(){function e(e){var n,t=e.enableLongStackTrace,l=void 0!==t&&t;if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new pt(!1),this.onMicrotaskEmpty=new pt(!1),this.onStable=new pt(!1),this.onError=new pt(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),l&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(n=this)._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(e,t,l,r,i,o){try{return nl(n),e.invokeTask(l,r,i,o)}finally{tl(n)}},onInvoke:function(e,t,l,r,i,o,u){try{return nl(n),e.invoke(l,r,i,o,u)}finally{tl(n)}},onHasTask:function(e,t,l,r){e.hasTask(l,r),t===l&&("microTask"==r.change?(n.hasPendingMicrotasks=r.microTask,el(n)):"macroTask"==r.change&&(n.hasPendingMacrotasks=r.macroTask))},onHandleError:function(e,t,l,r){return e.handleError(l,r),n.runOutsideAngular(function(){return n.onError.emit(r)}),!1}})}return e.isInAngularZone=function(){return!0===Zone.current.get("isAngularZone")},e.assertInAngularZone=function(){if(!e.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")},e.assertNotInAngularZone=function(){if(e.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")},e.prototype.run=function(e,n,t){return this._inner.run(e,n,t)},e.prototype.runTask=function(e,n,t,l){var r=this._inner,i=r.scheduleEventTask("NgZoneEvent: "+l,e,Jt,Xt,Xt);try{return r.runTask(i,n,t)}finally{r.cancelTask(i)}},e.prototype.runGuarded=function(e,n,t){return this._inner.runGuarded(e,n,t)},e.prototype.runOutsideAngular=function(e){return this._outer.run(e)},e}();function Xt(){}var Jt={};function el(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(function(){return e.onStable.emit(null)})}finally{e.isStable=!0}}}function nl(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function tl(e){e._nesting--,el(e)}var ll,rl=function(){function e(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new pt,this.onMicrotaskEmpty=new pt,this.onStable=new pt,this.onError=new pt}return e.prototype.run=function(e){return e()},e.prototype.runGuarded=function(e){return e()},e.prototype.runOutsideAngular=function(e){return e()},e.prototype.runTask=function(e){return e()},e}(),il=function(){function e(e){var n=this;this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(function(){n.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}return e.prototype._watchAngularEvents=function(){var e=this;this._ngZone.onUnstable.subscribe({next:function(){e._didWork=!0,e._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){e._ngZone.onStable.subscribe({next:function(){Zt.assertNotInAngularZone(),Pe(function(){e._isZoneStable=!0,e._runCallbacksIfReady()})}})})},e.prototype.increasePendingRequestCount=function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount},e.prototype.decreasePendingRequestCount=function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount},e.prototype.isStable=function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks},e.prototype._runCallbacksIfReady=function(){var e=this;if(this.isStable())Pe(function(){for(;0!==e._callbacks.length;){var n=e._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(e._didWork)}e._didWork=!1});else{var n=this.getPendingTasks();this._callbacks=this._callbacks.filter(function(e){return!e.updateCb||!e.updateCb(n)||(clearTimeout(e.timeoutId),!1)}),this._didWork=!0}},e.prototype.getPendingTasks=function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(function(e){return{source:e.source,creationLocation:e.creationLocation,data:e.data}}):[]},e.prototype.addCallback=function(e,n,t){var l=this,r=-1;n&&n>0&&(r=setTimeout(function(){l._callbacks=l._callbacks.filter(function(e){return e.timeoutId!==r}),e(l._didWork,l.getPendingTasks())},n)),this._callbacks.push({doneCb:e,timeoutId:r,updateCb:t})},e.prototype.whenStable=function(e,n,t){if(t&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(e,n,t),this._runCallbacksIfReady()},e.prototype.getPendingRequestCount=function(){return this._pendingCount},e.prototype.findProviders=function(e,n,t){return[]},e}(),ol=function(){function e(){this._applications=new Map,ul.addToWindow(this)}return e.prototype.registerApplication=function(e,n){this._applications.set(e,n)},e.prototype.unregisterApplication=function(e){this._applications.delete(e)},e.prototype.unregisterAllApplications=function(){this._applications.clear()},e.prototype.getTestability=function(e){return this._applications.get(e)||null},e.prototype.getAllTestabilities=function(){return Array.from(this._applications.values())},e.prototype.getAllRootElements=function(){return Array.from(this._applications.keys())},e.prototype.findTestabilityInTree=function(e,n){return void 0===n&&(n=!0),ul.findTestabilityInTree(this,e,n)},o([u("design:paramtypes",[])],e)}(),ul=new(function(){function e(){}return e.prototype.addToWindow=function(e){},e.prototype.findTestabilityInTree=function(e,n,t){return null},e}()),sl=new ye("AllowMultipleToken"),al=function(){return function(e,n){this.name=e,this.token=n}}();function cl(e,n,t){void 0===t&&(t=[]);var l="Platform: "+n,r=new ye(l);return function(n){void 0===n&&(n=[]);var i=pl();if(!i||i.injector.get(sl,!1))if(e)e(t.concat(n).concat({provide:r,useValue:!0}));else{var o=t.concat(n).concat({provide:r,useValue:!0});!function(e){if(ll&&!ll.destroyed&&!ll.injector.get(sl,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");ll=e.get(hl);var n=e.get(kt,null);n&&n.forEach(function(e){return e()})}(on.create({providers:o,name:l}))}return function(e){var n=pl();if(!n)throw new Error("No platform exists!");if(!n.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return n}(r)}}function pl(){return ll&&!ll.destroyed?ll:null}var hl=function(){function e(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return e.prototype.bootstrapModuleFactory=function(e,n){var t,l=this,r="noop"===(t=n?n.ngZone:void 0)?new rl:("zone.js"===t?void 0:t)||new Zt({enableLongStackTrace:Wn()}),i=[{provide:Zt,useValue:r}];return r.run(function(){var n=on.create({providers:i,parent:l.injector,name:e.moduleType.name}),t=e.create(n),o=t.injector.get(_t,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return t.onDestroy(function(){return gl(l._modules,t)}),r.runOutsideAngular(function(){return r.onError.subscribe({next:function(e){o.handleError(e)}})}),function(e,n,r){try{var i=((o=t.injector.get(wt)).runInitializers(),o.donePromise.then(function(){return l._moduleDoBootstrap(t),t}));return Tt(i)?i.catch(function(t){throw n.runOutsideAngular(function(){return e.handleError(t)}),t}):i}catch(u){throw n.runOutsideAngular(function(){return e.handleError(u)}),u}var o}(o,r)})},e.prototype.bootstrapModule=function(e,n){var t=this;void 0===n&&(n=[]);var l=dl({},n);return function(e,n,t){return e.get(zt).createCompiler([n]).compileModuleAsync(t)}(this.injector,l,e).then(function(e){return t.bootstrapModuleFactory(e,l)})},e.prototype._moduleDoBootstrap=function(e){var n=e.injector.get(fl);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(function(e){return n.bootstrap(e)});else{if(!e.instance.ngDoBootstrap)throw new Error("The module "+ke(e.instance.constructor)+' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.');e.instance.ngDoBootstrap(n)}this._modules.push(e)},e.prototype.onDestroy=function(e){this._destroyListeners.push(e)},Object.defineProperty(e.prototype,"injector",{get:function(){return this._injector},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(function(e){return e.destroy()}),this._destroyListeners.forEach(function(e){return e()}),this._destroyed=!0},Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!0,configurable:!0}),e}();function dl(e,n){return Array.isArray(n)?n.reduce(dl,e):i({},e,n)}var fl=function(){function e(e,n,t,l,r,i){var o=this;this._zone=e,this._console=n,this._injector=t,this._exceptionHandler=l,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=Wn(),this._zone.onMicrotaskEmpty.subscribe({next:function(){o._zone.run(function(){o.tick()})}});var u=new w(function(e){o._stable=o._zone.isStable&&!o._zone.hasPendingMacrotasks&&!o._zone.hasPendingMicrotasks,o._zone.runOutsideAngular(function(){e.next(o._stable),e.complete()})}),s=new w(function(e){var n;o._zone.runOutsideAngular(function(){n=o._zone.onStable.subscribe(function(){Zt.assertNotInAngularZone(),Pe(function(){o._stable||o._zone.hasPendingMacrotasks||o._zone.hasPendingMicrotasks||(o._stable=!0,e.next(!0))})})});var t=o._zone.onUnstable.subscribe(function(){Zt.assertInAngularZone(),o._stable&&(o._stable=!1,o._zone.runOutsideAngular(function(){e.next(!1)}))});return function(){n.unsubscribe(),t.unsubscribe()}});this.isStable=re(u,s.pipe(function(e){return ie()((n=pe,function(e){var t;t="function"==typeof n?n:function(){return n};var l=Object.create(e,ae);return l.source=e,l.subjectFactory=t,l})(e));var n}))}var n;return n=e,e.prototype.bootstrap=function(e,n){var t,l=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");t=e instanceof On?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(t.componentType);var r=t instanceof An?null:this._injector.get(wn),i=t.create(on.NULL,[],n||t.selector,r);i.onDestroy(function(){l._unloadComponent(i)});var o=i.injector.get(il,null);return o&&i.injector.get(ol).registerApplication(i.location.nativeElement,o),this._loadComponent(i),Wn()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),i},e.prototype.tick=function(){var e=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");var t=n._tickScope();try{this._runningTick=!0,this._views.forEach(function(e){return e.detectChanges()}),this._enforceNoNewChanges&&this._views.forEach(function(e){return e.checkNoChanges()})}catch(l){this._zone.runOutsideAngular(function(){return e._exceptionHandler.handleError(l)})}finally{this._runningTick=!1,Qt(t)}},e.prototype.attachView=function(e){var n=e;this._views.push(n),n.attachToAppRef(this)},e.prototype.detachView=function(e){var n=e;gl(this._views,n),n.detachFromAppRef()},e.prototype._loadComponent=function(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(xt,[]).concat(this._bootstrapListeners).forEach(function(n){return n(e)})},e.prototype._unloadComponent=function(e){this.detachView(e.hostView),gl(this.components,e)},e.prototype.ngOnDestroy=function(){this._views.slice().forEach(function(e){return e.destroy()})},Object.defineProperty(e.prototype,"viewCount",{get:function(){return this._views.length},enumerable:!0,configurable:!0}),e._tickScope=$t("ApplicationRef#tick()"),e}();function gl(e,n){var t=e.indexOf(n);t>-1&&e.splice(t,1)}var vl=function(){function e(){this.dirty=!0,this._results=[],this.changes=new pt,this.length=0}return e.prototype.map=function(e){return this._results.map(e)},e.prototype.filter=function(e){return this._results.filter(e)},e.prototype.find=function(e){return this._results.find(e)},e.prototype.reduce=function(e,n){return this._results.reduce(e,n)},e.prototype.forEach=function(e){this._results.forEach(e)},e.prototype.some=function(e){return this._results.some(e)},e.prototype.toArray=function(){return this._results.slice()},e.prototype[Ne()]=function(){return this._results[Ne()]()},e.prototype.toString=function(){return this._results.toString()},e.prototype.reset=function(e){this._results=function e(n){return n.reduce(function(n,t){var l=Array.isArray(t)?e(t):t;return n.concat(l)},[])}(e),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]},e.prototype.notifyOnChanges=function(){this.changes.emit(this)},e.prototype.setDirty=function(){this.dirty=!0},e.prototype.destroy=function(){this.changes.complete(),this.changes.unsubscribe()},e}(),ml=function(){return function(){}}(),yl={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},Sl=function(){function e(e,n){this._compiler=e,this._config=n||yl}return e.prototype.load=function(e){return this._compiler instanceof jt?this.loadFactory(e):this.loadAndCompile(e)},e.prototype.loadAndCompile=function(e){var n=this,l=a(e.split("#"),2),r=l[0],i=l[1];return void 0===i&&(i="default"),t("crnd")(r).then(function(e){return e[i]}).then(function(e){return El(e,r,i)}).then(function(e){return n._compiler.compileModuleAsync(e)})},e.prototype.loadFactory=function(e){var n=a(e.split("#"),2),l=n[0],r=n[1],i="NgFactory";return void 0===r&&(r="default",i=""),t("crnd")(this._config.factoryPathPrefix+l+this._config.factoryPathSuffix).then(function(e){return e[r+i]}).then(function(e){return El(e,l,r)})},e}();function El(e,n,t){if(!e)throw new Error("Cannot find '"+t+"' in '"+n+"'");return e}var bl=function(){function e(){}return e.__NG_ELEMENT_ID__=function(){return Ol(e,Pn)},e}(),Ol=en,Rl=function(){function e(){}return e.__NG_ELEMENT_ID__=function(){return Cl()},e}(),Cl=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n]},_l=function(){return function(e,n){this.name=e,this.callback=n}}(),Tl=function(){function e(e,n,t){this.listeners=[],this.parent=null,this._debugContext=t,this.nativeNode=e,n&&n instanceof Il&&n.addChild(this)}return Object.defineProperty(e.prototype,"injector",{get:function(){return this._debugContext.injector},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentInstance",{get:function(){return this._debugContext.component},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this._debugContext.context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"references",{get:function(){return this._debugContext.references},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"providerTokens",{get:function(){return this._debugContext.providerTokens},enumerable:!0,configurable:!0}),e}(),Il=function(e){function n(n,t,l){var r=e.call(this,n,t,l)||this;return r.properties={},r.attributes={},r.classes={},r.styles={},r.childNodes=[],r.nativeElement=n,r}return r(n,e),n.prototype.addChild=function(e){e&&(this.childNodes.push(e),e.parent=this)},n.prototype.removeChild=function(e){var n=this.childNodes.indexOf(e);-1!==n&&(e.parent=null,this.childNodes.splice(n,1))},n.prototype.insertChildrenAfter=function(e,n){var t,l=this,r=this.childNodes.indexOf(e);-1!==r&&((t=this.childNodes).splice.apply(t,c([r+1,0],n)),n.forEach(function(n){n.parent&&n.parent.removeChild(n),e.parent=l}))},n.prototype.insertBefore=function(e,n){var t=this.childNodes.indexOf(e);-1===t?this.addChild(n):(n.parent&&n.parent.removeChild(n),n.parent=this,this.childNodes.splice(t,0,n))},n.prototype.query=function(e){return this.queryAll(e)[0]||null},n.prototype.queryAll=function(e){var n=[];return function e(n,t,l){n.childNodes.forEach(function(n){n instanceof Il&&(t(n)&&l.push(n),e(n,t,l))})}(this,e,n),n},n.prototype.queryAllNodes=function(e){var n=[];return function e(n,t,l){n instanceof Il&&n.childNodes.forEach(function(n){t(n)&&l.push(n),n instanceof Il&&e(n,t,l)})}(this,e,n),n},Object.defineProperty(n.prototype,"children",{get:function(){return this.childNodes.filter(function(e){return e instanceof n})},enumerable:!0,configurable:!0}),n.prototype.triggerEventHandler=function(e,n){this.listeners.forEach(function(t){t.name==e&&t.callback(n)})},n}(Tl),Al=new Map,wl=function(e){return Al.get(e)||null};function Nl(e){Al.set(e.nativeNode,e)}var Pl=function(){function e(){}return e.prototype.supports=function(e){return Xe(e)},e.prototype.create=function(e){return new kl(e)},e}(),Dl=function(e,n){return n},kl=function(){function e(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Dl}return e.prototype.forEachItem=function(e){var n;for(n=this._itHead;null!==n;n=n._next)e(n)},e.prototype.forEachOperation=function(e){for(var n=this._itHead,t=this._removalsHead,l=0,r=null;n||t;){var i=!t||n&&n.currentIndex<Fl(t,l,r)?n:t,o=Fl(i,l,r),u=i.currentIndex;if(i===t)l--,t=t._nextRemoved;else if(n=n._next,null==i.previousIndex)l++;else{r||(r=[]);var s=o-l,a=u-l;if(s!=a){for(var c=0;c<s;c++){var p=c<r.length?r[c]:r[c]=0,h=p+c;a<=h&&h<s&&(r[c]=p+1)}r[i.previousIndex]=a-s}}o!==u&&e(i,o,u)}},e.prototype.forEachPreviousItem=function(e){var n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)},e.prototype.forEachAddedItem=function(e){var n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)},e.prototype.forEachMovedItem=function(e){var n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)},e.prototype.forEachRemovedItem=function(e){var n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)},e.prototype.forEachIdentityChange=function(e){var n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)},e.prototype.diff=function(e){if(null==e&&(e=[]),!Xe(e))throw new Error("Error trying to diff '"+ke(e)+"'. Only arrays and iterables are allowed");return this.check(e)?this:null},e.prototype.onDestroy=function(){},e.prototype.check=function(e){var n=this;this._reset();var t,l,r,i=this._itHead,o=!1;if(Array.isArray(e)){this.length=e.length;for(var u=0;u<this.length;u++)r=this._trackByFn(u,l=e[u]),null!==i&&De(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,l,r,u)),De(i.item,l)||this._addIdentityChange(i,l)):(i=this._mismatch(i,l,r,u),o=!0),i=i._next}else t=0,function(e,n){if(Array.isArray(e))for(var t=0;t<e.length;t++)n(e[t]);else for(var l=e[Ne()](),r=void 0;!(r=l.next()).done;)n(r.value)}(e,function(e){r=n._trackByFn(t,e),null!==i&&De(i.trackById,r)?(o&&(i=n._verifyReinsertion(i,e,r,t)),De(i.item,e)||n._addIdentityChange(i,e)):(i=n._mismatch(i,e,r,t),o=!0),i=i._next,t++}),this.length=t;return this._truncate(i),this.collection=e,this.isDirty},Object.defineProperty(e.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead},enumerable:!0,configurable:!0}),e.prototype._reset=function(){if(this.isDirty){var e=void 0,n=void 0;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=n)e.previousIndex=e.currentIndex,n=e._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}},e.prototype._mismatch=function(e,n,t,l){var r;return null===e?r=this._itTail:(r=e._prev,this._remove(e)),null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(t,l))?(De(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,r,l)):null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(t,null))?(De(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,r,l)):e=this._addAfter(new Ml(n,t),r,l),e},e.prototype._verifyReinsertion=function(e,n,t,l){var r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(t,null);return null!==r?e=this._reinsertAfter(r,e._prev,l):e.currentIndex!=l&&(e.currentIndex=l,this._addToMoves(e,l)),e},e.prototype._truncate=function(e){for(;null!==e;){var n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)},e.prototype._reinsertAfter=function(e,n,t){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);var l=e._prevRemoved,r=e._nextRemoved;return null===l?this._removalsHead=r:l._nextRemoved=r,null===r?this._removalsTail=l:r._prevRemoved=l,this._insertAfter(e,n,t),this._addToMoves(e,t),e},e.prototype._moveAfter=function(e,n,t){return this._unlink(e),this._insertAfter(e,n,t),this._addToMoves(e,t),e},e.prototype._addAfter=function(e,n,t){return this._insertAfter(e,n,t),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e},e.prototype._insertAfter=function(e,n,t){var l=null===n?this._itHead:n._next;return e._next=l,e._prev=n,null===l?this._itTail=e:l._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new Ll),this._linkedRecords.put(e),e.currentIndex=t,e},e.prototype._remove=function(e){return this._addToRemovals(this._unlink(e))},e.prototype._unlink=function(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);var n=e._prev,t=e._next;return null===n?this._itHead=t:n._next=t,null===t?this._itTail=n:t._prev=n,e},e.prototype._addToMoves=function(e,n){return e.previousIndex===n?e:(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e,e)},e.prototype._addToRemovals=function(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ll),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e},e.prototype._addIdentityChange=function(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e},e}(),Ml=function(){return function(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}(),xl=function(){function e(){this._head=null,this._tail=null}return e.prototype.add=function(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)},e.prototype.get=function(e,n){var t;for(t=this._head;null!==t;t=t._nextDup)if((null===n||n<=t.currentIndex)&&De(t.trackById,e))return t;return null},e.prototype.remove=function(e){var n=e._prevDup,t=e._nextDup;return null===n?this._head=t:n._nextDup=t,null===t?this._tail=n:t._prevDup=n,null===this._head},e}(),Ll=function(){function e(){this.map=new Map}return e.prototype.put=function(e){var n=e.trackById,t=this.map.get(n);t||(t=new xl,this.map.set(n,t)),t.add(e)},e.prototype.get=function(e,n){var t=this.map.get(e);return t?t.get(e,n):null},e.prototype.remove=function(e){var n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e},Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this.map.size},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this.map.clear()},e}();function Fl(e,n,t){var l=e.previousIndex;if(null===l)return l;var r=0;return t&&l<t.length&&(r=t[l]),l+n+r}var Ul=function(){function e(){}return e.prototype.supports=function(e){return e instanceof Map||Je(e)},e.prototype.create=function(){return new Hl},e}(),Hl=function(){function e(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return Object.defineProperty(e.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead},enumerable:!0,configurable:!0}),e.prototype.forEachItem=function(e){var n;for(n=this._mapHead;null!==n;n=n._next)e(n)},e.prototype.forEachPreviousItem=function(e){var n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)e(n)},e.prototype.forEachChangedItem=function(e){var n;for(n=this._changesHead;null!==n;n=n._nextChanged)e(n)},e.prototype.forEachAddedItem=function(e){var n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)},e.prototype.forEachRemovedItem=function(e){var n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)},e.prototype.diff=function(e){if(e){if(!(e instanceof Map||Je(e)))throw new Error("Error trying to diff '"+ke(e)+"'. Only maps and objects are allowed")}else e=new Map;return this.check(e)?this:null},e.prototype.onDestroy=function(){},e.prototype.check=function(e){var n=this;this._reset();var t=this._mapHead;if(this._appendAfter=null,this._forEach(e,function(e,l){if(t&&t.key===l)n._maybeAddToChanges(t,e),n._appendAfter=t,t=t._next;else{var r=n._getOrCreateRecordForKey(l,e);t=n._insertBeforeOrAppend(t,r)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(var l=t;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty},e.prototype._insertBeforeOrAppend=function(e,n){if(e){var t=e._prev;return n._next=e,n._prev=t,e._prev=n,t&&(t._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null},e.prototype._getOrCreateRecordForKey=function(e,n){if(this._records.has(e)){var t=this._records.get(e);this._maybeAddToChanges(t,n);var l=t._prev,r=t._next;return l&&(l._next=r),r&&(r._prev=l),t._next=null,t._prev=null,t}var i=new Gl(e);return this._records.set(e,i),i.currentValue=n,this._addToAdditions(i),i},e.prototype._reset=function(){if(this.isDirty){var e=void 0;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}},e.prototype._maybeAddToChanges=function(e,n){De(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))},e.prototype._addToAdditions=function(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)},e.prototype._addToChanges=function(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)},e.prototype._forEach=function(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(function(t){return n(e[t],t)})},e}(),Gl=function(){return function(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}(),Bl=function(){function e(e){this.factories=e}return e.create=function(n,t){if(null!=t){var l=t.factories.slice();n=n.concat(l)}return new e(n)},e.extend=function(n){return{provide:e,useFactory:function(t){if(!t)throw new Error("Cannot extend IterableDiffers without a parent injector");return e.create(n,t)},deps:[[e,new Ve,new Ge]]}},e.prototype.find=function(e){var n,t=this.factories.find(function(n){return n.supports(e)});if(null!=t)return t;throw new Error("Cannot find a differ supporting object '"+e+"' of type '"+((n=e).name||typeof n)+"'")},e.ngInjectableDef=ve({providedIn:"root",factory:function(){return new e([new Pl])}}),e}(),Vl=function(){function e(e){this.factories=e}return e.create=function(n,t){if(t){var l=t.factories.slice();n=n.concat(l)}return new e(n)},e.extend=function(n){return{provide:e,useFactory:function(t){if(!t)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return e.create(n,t)},deps:[[e,new Ve,new Ge]]}},e.prototype.find=function(e){var n=this.factories.find(function(n){return n.supports(e)});if(n)return n;throw new Error("Cannot find a differ supporting object '"+e+"'")},e.ngInjectableDef=ve({providedIn:"root",factory:function(){return new e([new Ul])}}),e}(),Wl=[new Ul],jl=new Bl([new Pl]),zl=new Vl(Wl),Yl=cl(null,"core",[{provide:Mt,useValue:"unknown"},{provide:hl,deps:[on]},{provide:ol,deps:[]},{provide:Lt,deps:[]}]),Kl=new ye("LocaleId");function ql(){return jl}function $l(){return zl}function Ql(e){return e||"en-US"}var Zl=function(){return function(e){}}();function Xl(e,n,t){var l=e.state,r=1792&l;return r===n?(e.state=-1793&l|t,e.initIndex=-1,!0):r===t}function Jl(e,n,t){return(1792&e.state)===n&&e.initIndex<=t&&(e.initIndex=t+1,!0)}function er(e,n){return e.nodes[n]}function nr(e,n){return e.nodes[n]}function tr(e,n){return e.nodes[n]}function lr(e,n){return e.nodes[n]}function rr(e,n){return e.nodes[n]}var ir={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0};function or(e,n,t,l){var r="ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '"+n+"'. Current value: '"+t+"'.";return l&&(r+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(e,n){var t=new Error(e);return ur(t,n),t}(r,e)}function ur(e,n){e[St]=n,e[bt]=n.logError.bind(n)}function sr(e){return new Error("ViewDestroyedError: Attempt to use a destroyed view: "+e)}var ar=function(){},cr=new Map;function pr(e){var n=cr.get(e);return n||(n=ke(e)+"_"+cr.size,cr.set(e,n)),n}function hr(e,n,t,l){if(Qe.isWrapped(l)){l=Qe.unwrap(l);var r=e.def.nodes[n].bindingIndex+t,i=Qe.unwrap(e.oldValues[r]);e.oldValues[r]=new Qe(i)}return l}var dr="$$undefined",fr="$$empty";function gr(e){return{id:dr,styles:e.styles,encapsulation:e.encapsulation,data:e.data}}var vr=0;function mr(e,n,t,l){return!(!(2&e.state)&&De(e.oldValues[n.bindingIndex+t],l))}function yr(e,n,t,l){return!!mr(e,n,t,l)&&(e.oldValues[n.bindingIndex+t]=l,!0)}function Sr(e,n,t,l){var r=e.oldValues[n.bindingIndex+t];if(1&e.state||!$e(r,l)){var i=n.bindings[t].name;throw or(ir.createDebugContext(e,n.nodeIndex),i+": "+r,i+": "+l,0!=(1&e.state))}}function Er(e){for(var n=e;n;)2&n.def.flags&&(n.state|=8),n=n.viewContainerParent||n.parent}function br(e,n){for(var t=e;t&&t!==n;)t.state|=64,t=t.viewContainerParent||t.parent}function Or(e,n,t,l){try{return Er(33554432&e.def.nodes[n].flags?nr(e,n).componentView:e),ir.handleEvent(e,n,t,l)}catch(r){e.root.errorHandler.handleError(r)}}function Rr(e){return e.parent?nr(e.parent,e.parentNodeDef.nodeIndex):null}function Cr(e){return e.parent?e.parentNodeDef.parent:null}function _r(e,n){switch(201347067&n.flags){case 1:return nr(e,n.nodeIndex).renderElement;case 2:return er(e,n.nodeIndex).renderText}}function Tr(e){return!!e.parent&&!!(32768&e.parentNodeDef.flags)}function Ir(e){return!(!e.parent||32768&e.parentNodeDef.flags)}function Ar(e){return 1<<e%32}function wr(e){var n={},t=0,l={};return e&&e.forEach(function(e){var r=a(e,2),i=r[0],o=r[1];"number"==typeof i?(n[i]=o,t|=Ar(i)):l[i]=o}),{matchedQueries:n,references:l,matchedQueryIds:t}}function Nr(e,n){return e.map(function(e){var t,l,r;return Array.isArray(e)?(r=(t=a(e,2))[0],l=t[1]):(r=0,l=e),l&&("function"==typeof l||"object"==typeof l)&&n&&Object.defineProperty(l,nn,{value:n,configurable:!0}),{flags:r,token:l,tokenKey:pr(l)}})}function Pr(e,n,t){var l=t.renderParent;return l?0==(1&l.flags)||0==(33554432&l.flags)||l.element.componentRendererType&&l.element.componentRendererType.encapsulation===Ue.Native?nr(e,t.renderParent.nodeIndex).renderElement:void 0:n}var Dr=new WeakMap;function kr(e){var n=Dr.get(e);return n||((n=e(function(){return ar})).factory=e,Dr.set(e,n)),n}function Mr(e,n,t,l,r){3===n&&(t=e.renderer.parentNode(_r(e,e.def.lastRenderRootNode))),xr(e,n,0,e.def.nodes.length-1,t,l,r)}function xr(e,n,t,l,r,i,o){for(var u=t;u<=l;u++){var s=e.def.nodes[u];11&s.flags&&Fr(e,s,n,r,i,o),u+=s.childCount}}function Lr(e,n,t,l,r,i){for(var o=e;o&&!Tr(o);)o=o.parent;for(var u=o.parent,s=Cr(o),a=s.nodeIndex+s.childCount,c=s.nodeIndex+1;c<=a;c++){var p=u.def.nodes[c];p.ngContentIndex===n&&Fr(u,p,t,l,r,i),c+=p.childCount}if(!u.parent){var h=e.root.projectableNodes[n];if(h)for(c=0;c<h.length;c++)Ur(e,h[c],t,l,r,i)}}function Fr(e,n,t,l,r,i){if(8&n.flags)Lr(e,n.ngContent.index,t,l,r,i);else{var o=_r(e,n);if(3===t&&33554432&n.flags&&48&n.bindingFlags?(16&n.bindingFlags&&Ur(e,o,t,l,r,i),32&n.bindingFlags&&Ur(nr(e,n.nodeIndex).componentView,o,t,l,r,i)):Ur(e,o,t,l,r,i),16777216&n.flags)for(var u=nr(e,n.nodeIndex).viewContainer._embeddedViews,s=0;s<u.length;s++)Mr(u[s],t,l,r,i);1&n.flags&&!n.element.name&&xr(e,t,n.nodeIndex+1,n.nodeIndex+n.childCount,l,r,i)}}function Ur(e,n,t,l,r,i){var o=e.renderer;switch(t){case 1:o.appendChild(l,n);break;case 2:o.insertBefore(l,n,r);break;case 3:o.removeChild(l,n);break;case 0:i.push(n)}}var Hr=/^:([^:]+):(.+)$/;function Gr(e){if(":"===e[0]){var n=e.match(Hr);return[n[1],n[2]]}return["",e]}function Br(e){for(var n=0,t=0;t<e.length;t++)n|=e[t].flags;return n}function Vr(e,n,t,l,r,i,o,u,s,a,c,p,h,d,f,g,v,m,y,S){switch(e){case 1:return n+Wr(t)+l;case 2:return n+Wr(t)+l+Wr(r)+i;case 3:return n+Wr(t)+l+Wr(r)+i+Wr(o)+u;case 4:return n+Wr(t)+l+Wr(r)+i+Wr(o)+u+Wr(s)+a;case 5:return n+Wr(t)+l+Wr(r)+i+Wr(o)+u+Wr(s)+a+Wr(c)+p;case 6:return n+Wr(t)+l+Wr(r)+i+Wr(o)+u+Wr(s)+a+Wr(c)+p+Wr(h)+d;case 7:return n+Wr(t)+l+Wr(r)+i+Wr(o)+u+Wr(s)+a+Wr(c)+p+Wr(h)+d+Wr(f)+g;case 8:return n+Wr(t)+l+Wr(r)+i+Wr(o)+u+Wr(s)+a+Wr(c)+p+Wr(h)+d+Wr(f)+g+Wr(v)+m;case 9:return n+Wr(t)+l+Wr(r)+i+Wr(o)+u+Wr(s)+a+Wr(c)+p+Wr(h)+d+Wr(f)+g+Wr(v)+m+Wr(y)+S;default:throw new Error("Does not support more than 9 expressions")}}function Wr(e){return null!=e?e.toString():""}function jr(e,n,t,l,r,i){e|=1;var o=wr(n);return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:e,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:o.matchedQueries,matchedQueryIds:o.matchedQueryIds,references:o.references,ngContentIndex:t,childCount:l,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:i?kr(i):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:r||ar},provider:null,text:null,query:null,ngContent:null}}function zr(e,n,t,l,r,i,o,u,s,c,p,h){var d;void 0===o&&(o=[]),c||(c=ar);var f=wr(t),g=f.matchedQueries,v=f.references,m=f.matchedQueryIds,y=null,S=null;i&&(y=(d=a(Gr(i),2))[0],S=d[1]),u=u||[];for(var E=new Array(u.length),b=0;b<u.length;b++){var O=a(u[b],3),R=O[0],C=O[2],_=a(Gr(O[1]),2),T=_[0],I=_[1],A=void 0,w=void 0;switch(15&R){case 4:w=C;break;case 1:case 8:A=C}E[b]={flags:R,ns:T,name:I,nonMinifiedName:I,securityContext:A,suffix:w}}s=s||[];var N=new Array(s.length);for(b=0;b<s.length;b++){var P=a(s[b],2);N[b]={type:0,target:P[0],eventName:P[1],propName:null}}var D=(o=o||[]).map(function(e){var n=a(e,2),t=n[1],l=a(Gr(n[0]),2);return[l[0],l[1],t]});return h=function(e){if(e&&e.id===dr){var n=null!=e.encapsulation&&e.encapsulation!==Ue.None||e.styles.length||Object.keys(e.data).length;e.id=n?"c"+vr++:fr}return e&&e.id===fr&&(e=null),e||null}(h),p&&(n|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:n|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:g,matchedQueryIds:m,references:v,ngContentIndex:l,childCount:r,bindings:E,bindingFlags:Br(E),outputs:N,element:{ns:y,name:S,attrs:D,template:null,componentProvider:null,componentView:p||null,componentRendererType:h,publicProviders:null,allProviders:null,handleEvent:c||ar},provider:null,text:null,query:null,ngContent:null}}function Yr(e,n,t){var l,r=t.element,i=e.root.selectorOrNode,o=e.renderer;if(e.parent||!i){l=r.name?o.createElement(r.name,r.ns):o.createComment("");var u=Pr(e,n,t);u&&o.appendChild(u,l)}else l=o.selectRootElement(i,!!r.componentRendererType&&r.componentRendererType.encapsulation===Ue.ShadowDom);if(r.attrs)for(var s=0;s<r.attrs.length;s++){var c=a(r.attrs[s],3);o.setAttribute(l,c[1],c[2],c[0])}return l}function Kr(e,n,t,l){for(var r=0;r<t.outputs.length;r++){var i=t.outputs[r],o=qr(e,t.nodeIndex,(p=i.eventName,(c=i.target)?c+":"+p:p)),u=i.target,s=e;"component"===i.target&&(u=null,s=n);var a=s.renderer.listen(u||l,i.eventName,o);e.disposables[t.outputIndex+r]=a}var c,p}function qr(e,n,t){return function(l){return Or(e,n,t,l)}}function $r(e,n,t,l){if(!yr(e,n,t,l))return!1;var r=n.bindings[t],i=nr(e,n.nodeIndex),o=i.renderElement,u=r.name;switch(15&r.flags){case 1:!function(e,n,t,l,r,i){var o=n.securityContext,u=o?e.root.sanitizer.sanitize(o,i):i;u=null!=u?u.toString():null;var s=e.renderer;null!=i?s.setAttribute(t,r,u,l):s.removeAttribute(t,r,l)}(e,r,o,r.ns,u,l);break;case 2:!function(e,n,t,l){var r=e.renderer;l?r.addClass(n,t):r.removeClass(n,t)}(e,o,u,l);break;case 4:!function(e,n,t,l,r){var i=e.root.sanitizer.sanitize(Un.STYLE,r);if(null!=i){i=i.toString();var o=n.suffix;null!=o&&(i+=o)}else i=null;var u=e.renderer;null!=i?u.setStyle(t,l,i):u.removeStyle(t,l)}(e,r,o,u,l);break;case 8:!function(e,n,t,l,r){var i=n.securityContext,o=i?e.root.sanitizer.sanitize(i,r):r;e.renderer.setProperty(t,l,o)}(33554432&n.flags&&32&r.flags?i.componentView:e,r,o,u,l)}return!0}var Qr=new Object,Zr=pr(on),Xr=pr(ln),Jr=pr(wn);function ei(e,n,t,l){return t=Le(t),{index:-1,deps:Nr(l,ke(n)),flags:e,token:n,value:t}}function ni(e,n,t){void 0===t&&(t=on.THROW_IF_NOT_FOUND);var l,r,i=ze(e);try{if(8&n.flags)return n.token;if(2&n.flags&&(t=null),1&n.flags)return e._parent.get(n.token,t);var o=n.tokenKey;switch(o){case Zr:case Xr:case Jr:return e}var u,s=e._def.providersByKey[o];if(s){var a=e._providers[s.index];return void 0===a&&(a=e._providers[s.index]=ti(e,s)),a===Qr?void 0:a}if((u=me(n.token))&&(l=e,null!=(r=u).providedIn&&(function(e,n){return e._def.modules.indexOf(r.providedIn)>-1}(l)||"root"===r.providedIn&&l._def.isRoot))){var c=e._providers.length;return e._def.providersByKey[n.tokenKey]={flags:5120,value:u.factory,deps:[],index:c,token:n.token},e._providers[c]=Qr,e._providers[c]=ti(e,e._def.providersByKey[n.tokenKey])}return 4&n.flags?t:e._parent.get(n.token,t)}finally{ze(i)}}function ti(e,n){var t;switch(201347067&n.flags){case 512:t=function(e,n,t){var l=t.length;switch(l){case 0:return new n;case 1:return new n(ni(e,t[0]));case 2:return new n(ni(e,t[0]),ni(e,t[1]));case 3:return new n(ni(e,t[0]),ni(e,t[1]),ni(e,t[2]));default:for(var r=new Array(l),i=0;i<l;i++)r[i]=ni(e,t[i]);return new(n.bind.apply(n,c([void 0],r)))}}(e,n.value,n.deps);break;case 1024:t=function(e,n,t){var l=t.length;switch(l){case 0:return n();case 1:return n(ni(e,t[0]));case 2:return n(ni(e,t[0]),ni(e,t[1]));case 3:return n(ni(e,t[0]),ni(e,t[1]),ni(e,t[2]));default:for(var r=Array(l),i=0;i<l;i++)r[i]=ni(e,t[i]);return n.apply(void 0,c(r))}}(e,n.value,n.deps);break;case 2048:t=ni(e,n.deps[0]);break;case 256:t=n.value}return t===Qr||null==t||"object"!=typeof t||131072&n.flags||"function"!=typeof t.ngOnDestroy||(n.flags|=131072),void 0===t?Qr:t}function li(e,n){var t=e.viewContainer._embeddedViews;if((null==n||n>=t.length)&&(n=t.length-1),n<0)return null;var l=t[n];return l.viewContainerParent=null,ui(t,n),ir.dirtyParentQueries(l),ii(l),l}function ri(e,n,t){var l=n?_r(n,n.def.lastRenderRootNode):e.renderElement,r=t.renderer.parentNode(l),i=t.renderer.nextSibling(l);Mr(t,2,r,i,void 0)}function ii(e){Mr(e,3,null,null,void 0)}function oi(e,n,t){n>=e.length?e.push(t):e.splice(n,0,t)}function ui(e,n){n>=e.length-1?e.pop():e.splice(n,1)}var si=new Object;function ai(e,n,t,l,r,i){return new ci(e,n,t,l,r,i)}var ci=function(e){function n(n,t,l,r,i,o){var u=e.call(this)||this;return u.selector=n,u.componentType=t,u._inputs=r,u._outputs=i,u.ngContentSelectors=o,u.viewDefFactory=l,u}return r(n,e),Object.defineProperty(n.prototype,"inputs",{get:function(){var e=[],n=this._inputs;for(var t in n)e.push({propName:t,templateName:n[t]});return e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"outputs",{get:function(){var e=[];for(var n in this._outputs)e.push({propName:n,templateName:this._outputs[n]});return e},enumerable:!0,configurable:!0}),n.prototype.create=function(e,n,t,l){if(!l)throw new Error("ngModule should be provided");var r=kr(this.viewDefFactory),i=r.nodes[0].element.componentProvider.nodeIndex,o=ir.createRootView(e,n||[],t,r,l,si),u=tr(o,i).instance;return t&&o.renderer.setAttribute(nr(o,0).renderElement,"ng-version",Gn.full),new pi(o,new gi(o),u)},n}(On),pi=function(e){function n(n,t,l){var r=e.call(this)||this;return r._view=n,r._viewRef=t,r._component=l,r._elDef=r._view.def.nodes[0],r.hostView=t,r.changeDetectorRef=t,r.instance=l,r}return r(n,e),Object.defineProperty(n.prototype,"location",{get:function(){return new Pn(nr(this._view,this._elDef.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"injector",{get:function(){return new Si(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"componentType",{get:function(){return this._component.constructor},enumerable:!0,configurable:!0}),n.prototype.destroy=function(){this._viewRef.destroy()},n.prototype.onDestroy=function(e){this._viewRef.onDestroy(e)},n}(bn);function hi(e,n,t){return new di(e,n,t)}var di=function(){function e(e,n,t){this._view=e,this._elDef=n,this._data=t,this._embeddedViews=[]}return Object.defineProperty(e.prototype,"element",{get:function(){return new Pn(this._data.renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"injector",{get:function(){return new Si(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parentInjector",{get:function(){for(var e=this._view,n=this._elDef.parent;!n&&e;)n=Cr(e),e=e.parent;return e?new Si(e,n):new Si(this._view,null)},enumerable:!0,configurable:!0}),e.prototype.clear=function(){for(var e=this._embeddedViews.length-1;e>=0;e--){var n=li(this._data,e);ir.destroyView(n)}},e.prototype.get=function(e){var n=this._embeddedViews[e];if(n){var t=new gi(n);return t.attachToViewContainerRef(this),t}return null},Object.defineProperty(e.prototype,"length",{get:function(){return this._embeddedViews.length},enumerable:!0,configurable:!0}),e.prototype.createEmbeddedView=function(e,n,t){var l=e.createEmbeddedView(n||{});return this.insert(l,t),l},e.prototype.createComponent=function(e,n,t,l,r){var i=t||this.parentInjector;r||e instanceof An||(r=i.get(wn));var o=e.create(i,l,void 0,r);return this.insert(o.hostView,n),o},e.prototype.insert=function(e,n){if(e.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");var t,l,r,i,o=e;return i=(t=this._data).viewContainer._embeddedViews,null==(l=n)&&(l=i.length),(r=o._view).viewContainerParent=this._view,oi(i,l,r),function(e,n){var t=Rr(n);if(t&&t!==e&&!(16&n.state)){n.state|=16;var l=t.template._projectedViews;l||(l=t.template._projectedViews=[]),l.push(n),function(e,t){if(!(4&t.flags)){n.parent.def.nodeFlags|=4,t.flags|=4;for(var l=t.parent;l;)l.childFlags|=4,l=l.parent}}(0,n.parentNodeDef)}}(t,r),ir.dirtyParentQueries(r),ri(t,l>0?i[l-1]:null,r),o.attachToViewContainerRef(this),e},e.prototype.move=function(e,n){if(e.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");var t,l,r,i,o,u=this._embeddedViews.indexOf(e._view);return r=n,o=(i=(t=this._data).viewContainer._embeddedViews)[l=u],ui(i,l),null==r&&(r=i.length),oi(i,r,o),ir.dirtyParentQueries(o),ii(o),ri(t,r>0?i[r-1]:null,o),e},e.prototype.indexOf=function(e){return this._embeddedViews.indexOf(e._view)},e.prototype.remove=function(e){var n=li(this._data,e);n&&ir.destroyView(n)},e.prototype.detach=function(e){var n=li(this._data,e);return n?new gi(n):null},e}();function fi(e){return new gi(e)}var gi=function(){function e(e){this._view=e,this._viewContainerRef=null,this._appRef=null}return Object.defineProperty(e.prototype,"rootNodes",{get:function(){return Mr(this._view,0,void 0,void 0,e=[]),e;var e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this._view.context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"destroyed",{get:function(){return 0!=(128&this._view.state)},enumerable:!0,configurable:!0}),e.prototype.markForCheck=function(){Er(this._view)},e.prototype.detach=function(){this._view.state&=-5},e.prototype.detectChanges=function(){var e=this._view.root.rendererFactory;e.begin&&e.begin();try{ir.checkAndUpdateView(this._view)}finally{e.end&&e.end()}},e.prototype.checkNoChanges=function(){ir.checkNoChangesView(this._view)},e.prototype.reattach=function(){this._view.state|=4},e.prototype.onDestroy=function(e){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(e)},e.prototype.destroy=function(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),ir.destroyView(this._view)},e.prototype.detachFromAppRef=function(){this._appRef=null,ii(this._view),ir.dirtyParentQueries(this._view)},e.prototype.attachToAppRef=function(e){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e},e.prototype.attachToViewContainerRef=function(e){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=e},e}();function vi(e,n){return new mi(e,n)}var mi=function(e){function n(n,t){var l=e.call(this)||this;return l._parentView=n,l._def=t,l}return r(n,e),n.prototype.createEmbeddedView=function(e){return new gi(ir.createEmbeddedView(this._parentView,this._def,this._def.element.template,e))},Object.defineProperty(n.prototype,"elementRef",{get:function(){return new Pn(nr(this._parentView,this._def.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),n}(ht);function yi(e,n){return new Si(e,n)}var Si=function(){function e(e,n){this.view=e,this.elDef=n}return e.prototype.get=function(e,n){return void 0===n&&(n=on.THROW_IF_NOT_FOUND),ir.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:e,tokenKey:pr(e)},n)},e}();function Ei(e,n){var t=e.def.nodes[n];if(1&t.flags){var l=nr(e,t.nodeIndex);return t.element.template?l.template:l.renderElement}if(2&t.flags)return er(e,t.nodeIndex).renderText;if(20240&t.flags)return tr(e,t.nodeIndex).instance;throw new Error("Illegal state: read nodeValue for node index "+n)}function bi(e){return new Oi(e.renderer)}var Oi=function(){function e(e){this.delegate=e}return e.prototype.selectRootElement=function(e){return this.delegate.selectRootElement(e)},e.prototype.createElement=function(e,n){var t=a(Gr(n),2),l=this.delegate.createElement(t[1],t[0]);return e&&this.delegate.appendChild(e,l),l},e.prototype.createViewRoot=function(e){return e},e.prototype.createTemplateAnchor=function(e){var n=this.delegate.createComment("");return e&&this.delegate.appendChild(e,n),n},e.prototype.createText=function(e,n){var t=this.delegate.createText(n);return e&&this.delegate.appendChild(e,t),t},e.prototype.projectNodes=function(e,n){for(var t=0;t<n.length;t++)this.delegate.appendChild(e,n[t])},e.prototype.attachViewAfter=function(e,n){for(var t=this.delegate.parentNode(e),l=this.delegate.nextSibling(e),r=0;r<n.length;r++)this.delegate.insertBefore(t,n[r],l)},e.prototype.detachView=function(e){for(var n=0;n<e.length;n++){var t=e[n],l=this.delegate.parentNode(t);this.delegate.removeChild(l,t)}},e.prototype.destroyView=function(e,n){for(var t=0;t<n.length;t++)this.delegate.destroyNode(n[t])},e.prototype.listen=function(e,n,t){return this.delegate.listen(e,n,t)},e.prototype.listenGlobal=function(e,n,t){return this.delegate.listen(e,n,t)},e.prototype.setElementProperty=function(e,n,t){this.delegate.setProperty(e,n,t)},e.prototype.setElementAttribute=function(e,n,t){var l=a(Gr(n),2),r=l[0],i=l[1];null!=t?this.delegate.setAttribute(e,i,t,r):this.delegate.removeAttribute(e,i,r)},e.prototype.setBindingDebugInfo=function(e,n,t){},e.prototype.setElementClass=function(e,n,t){t?this.delegate.addClass(e,n):this.delegate.removeClass(e,n)},e.prototype.setElementStyle=function(e,n,t){null!=t?this.delegate.setStyle(e,n,t):this.delegate.removeStyle(e,n)},e.prototype.invokeElementMethod=function(e,n,t){e[n].apply(e,t)},e.prototype.setText=function(e,n){this.delegate.setValue(e,n)},e.prototype.animate=function(){throw new Error("Renderer.animate is no longer supported!")},e}();function Ri(e,n,t,l){return new Ci(e,n,t,l)}var Ci=function(){function e(e,n,t,l){this._moduleType=e,this._parent=n,this._bootstrapComponents=t,this._def=l,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(e){for(var n=e._def,t=e._providers=new Array(n.providers.length),l=0;l<n.providers.length;l++){var r=n.providers[l];4096&r.flags||void 0===t[l]&&(t[l]=ti(e,r))}}(this)}return e.prototype.get=function(e,n,t){void 0===n&&(n=on.THROW_IF_NOT_FOUND),void 0===t&&(t=We.Default);var l=0;return t&We.SkipSelf?l|=1:t&We.Self&&(l|=4),ni(this,{token:e,tokenKey:pr(e),flags:l},n)},Object.defineProperty(e.prototype,"instance",{get:function(){return this.get(this._moduleType)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentFactoryResolver",{get:function(){return this.get(Tn)},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){if(this._destroyed)throw new Error("The ng module "+ke(this.instance.constructor)+" has already been destroyed.");this._destroyed=!0,function(e,n){for(var t=e._def,l=new Set,r=0;r<t.providers.length;r++)if(131072&t.providers[r].flags){var i=e._providers[r];if(i&&i!==Qr){var o=i.ngOnDestroy;"function"!=typeof o||l.has(i)||(o.apply(i),l.add(i))}}}(this),this._destroyListeners.forEach(function(e){return e()})},e.prototype.onDestroy=function(e){this._destroyListeners.push(e)},e}(),_i=pr(kn),Ti=pr(Ln),Ii=pr(Pn),Ai=pr(bl),wi=pr(ht),Ni=pr(Rl),Pi=pr(on),Di=pr(ln);function ki(e,n,t,l,r,i,o,u){var s=[];if(o)for(var c in o){var p=a(o[c],2);s[p[0]]={flags:8,name:c,nonMinifiedName:p[1],ns:null,securityContext:null,suffix:null}}var h=[];if(u)for(var d in u)h.push({type:1,propName:d,target:null,eventName:u[d]});return Li(e,n|=16384,t,l,r,r,i,s,h)}function Mi(e,n,t){return Li(-1,e|=16,null,0,n,n,t)}function xi(e,n,t,l,r){return Li(-1,e,n,0,t,l,r)}function Li(e,n,t,l,r,i,o,u,s){var a=wr(t),c=a.matchedQueries,p=a.references,h=a.matchedQueryIds;s||(s=[]),u||(u=[]),i=Le(i);var d=Nr(o,ke(r));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:n,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:c,matchedQueryIds:h,references:p,ngContentIndex:-1,childCount:l,bindings:u,bindingFlags:Br(u),outputs:s,element:null,provider:{token:r,value:i,deps:d},text:null,query:null,ngContent:null}}function Fi(e,n){return Bi(e,n)}function Ui(e,n){for(var t=e;t.parent&&!Tr(t);)t=t.parent;return Vi(t.parent,Cr(t),!0,n.provider.value,n.provider.deps)}function Hi(e,n){var t=Vi(e,n.parent,(32768&n.flags)>0,n.provider.value,n.provider.deps);if(n.outputs.length)for(var l=0;l<n.outputs.length;l++){var r=n.outputs[l],i=t[r.propName];if(!It(i))throw new Error("@Output "+r.propName+" not initialized in '"+t.constructor.name+"'.");var o=i.subscribe(Gi(e,n.parent.nodeIndex,r.eventName));e.disposables[n.outputIndex+l]=o.unsubscribe.bind(o)}return t}function Gi(e,n,t){return function(l){return Or(e,n,t,l)}}function Bi(e,n){var t=(8192&n.flags)>0,l=n.provider;switch(201347067&n.flags){case 512:return Vi(e,n.parent,t,l.value,l.deps);case 1024:return function(e,n,t,l,r){var i=r.length;switch(i){case 0:return l();case 1:return l(ji(e,n,t,r[0]));case 2:return l(ji(e,n,t,r[0]),ji(e,n,t,r[1]));case 3:return l(ji(e,n,t,r[0]),ji(e,n,t,r[1]),ji(e,n,t,r[2]));default:for(var o=Array(i),u=0;u<i;u++)o[u]=ji(e,n,t,r[u]);return l.apply(void 0,c(o))}}(e,n.parent,t,l.value,l.deps);case 2048:return ji(e,n.parent,t,l.deps[0]);case 256:return l.value}}function Vi(e,n,t,l,r){var i=r.length;switch(i){case 0:return new l;case 1:return new l(ji(e,n,t,r[0]));case 2:return new l(ji(e,n,t,r[0]),ji(e,n,t,r[1]));case 3:return new l(ji(e,n,t,r[0]),ji(e,n,t,r[1]),ji(e,n,t,r[2]));default:for(var o=new Array(i),u=0;u<i;u++)o[u]=ji(e,n,t,r[u]);return new(l.bind.apply(l,c([void 0],o)))}}var Wi={};function ji(e,n,t,l,r){if(void 0===r&&(r=on.THROW_IF_NOT_FOUND),8&l.flags)return l.token;var i=e;2&l.flags&&(r=null);var o=l.tokenKey;o===Ni&&(t=!(!n||!n.element.componentView)),n&&1&l.flags&&(t=!1,n=n.parent);for(var u=e;u;){if(n)switch(o){case _i:return bi(zi(u,n,t));case Ti:return zi(u,n,t).renderer;case Ii:return new Pn(nr(u,n.nodeIndex).renderElement);case Ai:return nr(u,n.nodeIndex).viewContainer;case wi:if(n.element.template)return nr(u,n.nodeIndex).template;break;case Ni:return fi(zi(u,n,t));case Pi:case Di:return yi(u,n);default:var s=(t?n.element.allProviders:n.element.publicProviders)[o];if(s){var a=tr(u,s.nodeIndex);return a||(a={instance:Bi(u,s)},u.nodes[s.nodeIndex]=a),a.instance}}t=Tr(u),n=Cr(u),u=u.parent,4&l.flags&&(u=null)}var c=i.root.injector.get(l.token,Wi);return c!==Wi||r===Wi?c:i.root.ngModule.injector.get(l.token,r)}function zi(e,n,t){var l;if(t)l=nr(e,n.nodeIndex).componentView;else for(l=e;l.parent&&!Tr(l);)l=l.parent;return l}function Yi(e,n,t,l,r,i){if(32768&t.flags){var o=nr(e,t.parent.nodeIndex).componentView;2&o.def.flags&&(o.state|=8)}if(n.instance[t.bindings[l].name]=r,524288&t.flags){i=i||{};var u=Qe.unwrap(e.oldValues[t.bindingIndex+l]);i[t.bindings[l].nonMinifiedName]=new Ze(u,r,0!=(2&e.state))}return e.oldValues[t.bindingIndex+l]=r,i}function Ki(e,n){if(e.def.nodeFlags&n)for(var t=e.def.nodes,l=0,r=0;r<t.length;r++){var i=t[r],o=i.parent;for(!o&&i.flags&n&&$i(e,r,i.flags&n,l++),0==(i.childFlags&n)&&(r+=i.childCount);o&&1&o.flags&&r===o.nodeIndex+o.childCount;)o.directChildFlags&n&&(l=qi(e,o,n,l)),o=o.parent}}function qi(e,n,t,l){for(var r=n.nodeIndex+1;r<=n.nodeIndex+n.childCount;r++){var i=e.def.nodes[r];i.flags&t&&$i(e,r,i.flags&t,l++),r+=i.childCount}return l}function $i(e,n,t,l){var r=tr(e,n);if(r){var i=r.instance;i&&(ir.setCurrentNode(e,n),1048576&t&&Jl(e,512,l)&&i.ngAfterContentInit(),2097152&t&&i.ngAfterContentChecked(),4194304&t&&Jl(e,768,l)&&i.ngAfterViewInit(),8388608&t&&i.ngAfterViewChecked(),131072&t&&i.ngOnDestroy())}}function Qi(e,n,t){var l=[];for(var r in t)l.push({propName:r,bindingType:t[r]});return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,ngContentIndex:-1,matchedQueries:{},matchedQueryIds:0,references:{},childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:{id:n,filterId:Ar(n),bindings:l},ngContent:null}}function Zi(e){for(var n=e.def.nodeMatchedQueries;e.parent&&Ir(e);){var t=e.parentNodeDef;e=e.parent;for(var l=t.nodeIndex+t.childCount,r=0;r<=l;r++)67108864&(i=e.def.nodes[r]).flags&&536870912&i.flags&&(i.query.filterId&n)===i.query.filterId&&rr(e,r).setDirty(),!(1&i.flags&&r+i.childCount<t.nodeIndex)&&67108864&i.childFlags&&536870912&i.childFlags||(r+=i.childCount)}if(134217728&e.def.nodeFlags)for(r=0;r<e.def.nodes.length;r++){var i;134217728&(i=e.def.nodes[r]).flags&&536870912&i.flags&&rr(e,r).setDirty(),r+=i.childCount}}function Xi(e,n){var t=rr(e,n.nodeIndex);if(t.dirty){var l,r=void 0;if(67108864&n.flags){var i=n.parent.parent;r=Ji(e,i.nodeIndex,i.nodeIndex+i.childCount,n.query,[]),l=tr(e,n.parent.nodeIndex).instance}else 134217728&n.flags&&(r=Ji(e,0,e.def.nodes.length-1,n.query,[]),l=e.component);t.reset(r);for(var o=n.query.bindings,u=!1,s=0;s<o.length;s++){var a=o[s],c=void 0;switch(a.bindingType){case 0:c=t.first;break;case 1:c=t,u=!0}l[a.propName]=c}u&&t.notifyOnChanges()}}function Ji(e,n,t,l,r){for(var i=n;i<=t;i++){var o=e.def.nodes[i],u=o.matchedQueries[l.id];if(null!=u&&r.push(eo(e,o,u)),1&o.flags&&o.element.template&&(o.element.template.nodeMatchedQueries&l.filterId)===l.filterId){var s=nr(e,i);if((o.childMatchedQueries&l.filterId)===l.filterId&&(Ji(e,i+1,i+o.childCount,l,r),i+=o.childCount),16777216&o.flags)for(var a=s.viewContainer._embeddedViews,c=0;c<a.length;c++){var p=a[c],h=Rr(p);h&&h===s&&Ji(p,0,p.def.nodes.length-1,l,r)}var d=s.template._projectedViews;if(d)for(c=0;c<d.length;c++){var f=d[c];Ji(f,0,f.def.nodes.length-1,l,r)}}(o.childMatchedQueries&l.filterId)!==l.filterId&&(i+=o.childCount)}return r}function eo(e,n,t){if(null!=t)switch(t){case 1:return nr(e,n.nodeIndex).renderElement;case 0:return new Pn(nr(e,n.nodeIndex).renderElement);case 2:return nr(e,n.nodeIndex).template;case 3:return nr(e,n.nodeIndex).viewContainer;case 4:return tr(e,n.nodeIndex).instance}}function no(e,n,t){var l=Pr(e,n,t);l&&Lr(e,t.ngContent.index,1,l,null,void 0)}function to(e,n){return ro(128,e,new Array(n+1))}function lo(e,n){for(var t=Object.keys(n),l=t.length,r=new Array(l),i=0;i<l;i++){var o=t[i];r[n[o]]=o}return ro(64,e,r)}function ro(e,n,t){for(var l=new Array(t.length),r=0;r<t.length;r++){var i=t[r];l[r]={flags:8,name:i,ns:null,nonMinifiedName:i,securityContext:null,suffix:null}}return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:n,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:-1,childCount:0,bindings:l,bindingFlags:Br(l),outputs:[],element:null,provider:null,text:null,query:null,ngContent:null}}function io(e,n,t){for(var l=new Array(t.length-1),r=1;r<t.length;r++)l[r-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:t[r]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:n,childCount:0,bindings:l,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:t[0]},query:null,ngContent:null}}function oo(e,n,t){var l,r=e.renderer;l=r.createText(t.text.prefix);var i=Pr(e,n,t);return i&&r.appendChild(i,l),{renderText:l}}function uo(e,n){return(null!=e?e.toString():"")+n.suffix}function so(e,n,t,l){for(var r=0,i=0,o=0,u=0,s=0,a=null,c=null,p=!1,h=!1,d=null,f=0;f<n.length;f++){var g=n[f];if(g.nodeIndex=f,g.parent=a,g.bindingIndex=r,g.outputIndex=i,g.renderParent=c,o|=g.flags,s|=g.matchedQueryIds,g.element){var v=g.element;v.publicProviders=a?a.element.publicProviders:Object.create(null),v.allProviders=v.publicProviders,p=!1,h=!1,g.element.template&&(s|=g.element.template.nodeMatchedQueries)}if(co(a,g,n.length),r+=g.bindings.length,i+=g.outputs.length,!c&&3&g.flags&&(d=g),20224&g.flags){p||(p=!0,a.element.publicProviders=Object.create(a.element.publicProviders),a.element.allProviders=a.element.publicProviders);var m=0!=(32768&g.flags);0==(8192&g.flags)||m?a.element.publicProviders[pr(g.provider.token)]=g:(h||(h=!0,a.element.allProviders=Object.create(a.element.publicProviders)),a.element.allProviders[pr(g.provider.token)]=g),m&&(a.element.componentProvider=g)}if(a?(a.childFlags|=g.flags,a.directChildFlags|=g.flags,a.childMatchedQueries|=g.matchedQueryIds,g.element&&g.element.template&&(a.childMatchedQueries|=g.element.template.nodeMatchedQueries)):u|=g.flags,g.childCount>0)a=g,ao(g)||(c=g);else for(;a&&f===a.nodeIndex+a.childCount;){var y=a.parent;y&&(y.childFlags|=a.childFlags,y.childMatchedQueries|=a.childMatchedQueries),c=(a=y)&&ao(a)?a.renderParent:a}}return{factory:null,nodeFlags:o,rootNodeFlags:u,nodeMatchedQueries:s,flags:e,nodes:n,updateDirectives:t||ar,updateRenderer:l||ar,handleEvent:function(e,t,l,r){return n[t].element.handleEvent(e,l,r)},bindingCount:r,outputCount:i,lastRenderRootNode:d}}function ao(e){return 0!=(1&e.flags)&&null===e.element.name}function co(e,n,t){var l=n.element&&n.element.template;if(l){if(!l.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(l.lastRenderRootNode&&16777216&l.lastRenderRootNode.flags)throw new Error("Illegal State: Last root node of a template can't have embedded views, at index "+n.nodeIndex+"!")}if(20224&n.flags&&0==(1&(e?e.flags:0)))throw new Error("Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index "+n.nodeIndex+"!");if(n.query){if(67108864&n.flags&&(!e||0==(16384&e.flags)))throw new Error("Illegal State: Content Query nodes need to be children of directives, at index "+n.nodeIndex+"!");if(134217728&n.flags&&e)throw new Error("Illegal State: View Query nodes have to be top level nodes, at index "+n.nodeIndex+"!")}if(n.childCount){var r=e?e.nodeIndex+e.childCount:t-1;if(n.nodeIndex<=r&&n.nodeIndex+n.childCount>r)throw new Error("Illegal State: childCount of node leads outside of parent, at index "+n.nodeIndex+"!")}}function po(e,n,t,l){var r=go(e.root,e.renderer,e,n,t);return vo(r,e.component,l),mo(r),r}function ho(e,n,t){var l=go(e,e.renderer,null,null,n);return vo(l,t,t),mo(l),l}function fo(e,n,t,l){var r,i=n.element.componentRendererType;return r=i?e.root.rendererFactory.createRenderer(l,i):e.root.renderer,go(e.root,r,e,n.element.componentProvider,t)}function go(e,n,t,l,r){var i=new Array(r.nodes.length),o=r.outputCount?new Array(r.outputCount):null;return{def:r,parent:t,viewContainerParent:null,parentNodeDef:l,context:null,component:null,nodes:i,state:13,root:e,renderer:n,oldValues:new Array(r.bindingCount),disposables:o,initIndex:-1}}function vo(e,n,t){e.component=n,e.context=t}function mo(e){var n;Tr(e)&&(n=nr(e.parent,e.parentNodeDef.parent.nodeIndex).renderElement);for(var t=e.def,l=e.nodes,r=0;r<t.nodes.length;r++){var i=t.nodes[r];ir.setCurrentNode(e,r);var o=void 0;switch(201347067&i.flags){case 1:var u=Yr(e,n,i),s=void 0;if(33554432&i.flags){var a=kr(i.element.componentView);s=ir.createComponentView(e,i,a,u)}Kr(e,s,i,u),o={renderElement:u,componentView:s,viewContainer:null,template:i.element.template?vi(e,i):void 0},16777216&i.flags&&(o.viewContainer=hi(e,i,o));break;case 2:o=oo(e,n,i);break;case 512:case 1024:case 2048:case 256:(o=l[r])||4096&i.flags||(o={instance:Fi(e,i)});break;case 16:o={instance:Ui(e,i)};break;case 16384:(o=l[r])||(o={instance:Hi(e,i)}),32768&i.flags&&vo(nr(e,i.parent.nodeIndex).componentView,o.instance,o.instance);break;case 32:case 64:case 128:o={value:void 0};break;case 67108864:case 134217728:o=new vl;break;case 8:no(e,n,i),o=void 0}l[r]=o}To(e,_o.CreateViewNodes),No(e,201326592,268435456,0)}function yo(e){bo(e),ir.updateDirectives(e,1),Io(e,_o.CheckNoChanges),ir.updateRenderer(e,1),To(e,_o.CheckNoChanges),e.state&=-97}function So(e){1&e.state?(e.state&=-2,e.state|=2):e.state&=-3,Xl(e,0,256),bo(e),ir.updateDirectives(e,0),Io(e,_o.CheckAndUpdate),No(e,67108864,536870912,0);var n=Xl(e,256,512);Ki(e,2097152|(n?1048576:0)),ir.updateRenderer(e,0),To(e,_o.CheckAndUpdate),No(e,134217728,536870912,0),Ki(e,8388608|((n=Xl(e,512,768))?4194304:0)),2&e.def.flags&&(e.state&=-9),e.state&=-97,Xl(e,768,1024)}function Eo(e,n,t,l,r,i,o,u,s,a,p,h,d){return 0===t?function(e,n,t,l,r,i,o,u,s,a,c,p){switch(201347067&n.flags){case 1:return function(e,n,t,l,r,i,o,u,s,a,c,p){var h=n.bindings.length,d=!1;return h>0&&$r(e,n,0,t)&&(d=!0),h>1&&$r(e,n,1,l)&&(d=!0),h>2&&$r(e,n,2,r)&&(d=!0),h>3&&$r(e,n,3,i)&&(d=!0),h>4&&$r(e,n,4,o)&&(d=!0),h>5&&$r(e,n,5,u)&&(d=!0),h>6&&$r(e,n,6,s)&&(d=!0),h>7&&$r(e,n,7,a)&&(d=!0),h>8&&$r(e,n,8,c)&&(d=!0),h>9&&$r(e,n,9,p)&&(d=!0),d}(e,n,t,l,r,i,o,u,s,a,c,p);case 2:return function(e,n,t,l,r,i,o,u,s,a,c,p){var h=!1,d=n.bindings,f=d.length;if(f>0&&yr(e,n,0,t)&&(h=!0),f>1&&yr(e,n,1,l)&&(h=!0),f>2&&yr(e,n,2,r)&&(h=!0),f>3&&yr(e,n,3,i)&&(h=!0),f>4&&yr(e,n,4,o)&&(h=!0),f>5&&yr(e,n,5,u)&&(h=!0),f>6&&yr(e,n,6,s)&&(h=!0),f>7&&yr(e,n,7,a)&&(h=!0),f>8&&yr(e,n,8,c)&&(h=!0),f>9&&yr(e,n,9,p)&&(h=!0),h){var g=n.text.prefix;f>0&&(g+=uo(t,d[0])),f>1&&(g+=uo(l,d[1])),f>2&&(g+=uo(r,d[2])),f>3&&(g+=uo(i,d[3])),f>4&&(g+=uo(o,d[4])),f>5&&(g+=uo(u,d[5])),f>6&&(g+=uo(s,d[6])),f>7&&(g+=uo(a,d[7])),f>8&&(g+=uo(c,d[8])),f>9&&(g+=uo(p,d[9]));var v=er(e,n.nodeIndex).renderText;e.renderer.setValue(v,g)}return h}(e,n,t,l,r,i,o,u,s,a,c,p);case 16384:return function(e,n,t,l,r,i,o,u,s,a,c,p){var h=tr(e,n.nodeIndex),d=h.instance,f=!1,g=void 0,v=n.bindings.length;return v>0&&mr(e,n,0,t)&&(f=!0,g=Yi(e,h,n,0,t,g)),v>1&&mr(e,n,1,l)&&(f=!0,g=Yi(e,h,n,1,l,g)),v>2&&mr(e,n,2,r)&&(f=!0,g=Yi(e,h,n,2,r,g)),v>3&&mr(e,n,3,i)&&(f=!0,g=Yi(e,h,n,3,i,g)),v>4&&mr(e,n,4,o)&&(f=!0,g=Yi(e,h,n,4,o,g)),v>5&&mr(e,n,5,u)&&(f=!0,g=Yi(e,h,n,5,u,g)),v>6&&mr(e,n,6,s)&&(f=!0,g=Yi(e,h,n,6,s,g)),v>7&&mr(e,n,7,a)&&(f=!0,g=Yi(e,h,n,7,a,g)),v>8&&mr(e,n,8,c)&&(f=!0,g=Yi(e,h,n,8,c,g)),v>9&&mr(e,n,9,p)&&(f=!0,g=Yi(e,h,n,9,p,g)),g&&d.ngOnChanges(g),65536&n.flags&&Jl(e,256,n.nodeIndex)&&d.ngOnInit(),262144&n.flags&&d.ngDoCheck(),f}(e,n,t,l,r,i,o,u,s,a,c,p);case 32:case 64:case 128:return function(e,n,t,l,r,i,o,u,s,a,c,p){var h=n.bindings,d=!1,f=h.length;if(f>0&&yr(e,n,0,t)&&(d=!0),f>1&&yr(e,n,1,l)&&(d=!0),f>2&&yr(e,n,2,r)&&(d=!0),f>3&&yr(e,n,3,i)&&(d=!0),f>4&&yr(e,n,4,o)&&(d=!0),f>5&&yr(e,n,5,u)&&(d=!0),f>6&&yr(e,n,6,s)&&(d=!0),f>7&&yr(e,n,7,a)&&(d=!0),f>8&&yr(e,n,8,c)&&(d=!0),f>9&&yr(e,n,9,p)&&(d=!0),d){var g=lr(e,n.nodeIndex),v=void 0;switch(201347067&n.flags){case 32:v=new Array(h.length),f>0&&(v[0]=t),f>1&&(v[1]=l),f>2&&(v[2]=r),f>3&&(v[3]=i),f>4&&(v[4]=o),f>5&&(v[5]=u),f>6&&(v[6]=s),f>7&&(v[7]=a),f>8&&(v[8]=c),f>9&&(v[9]=p);break;case 64:v={},f>0&&(v[h[0].name]=t),f>1&&(v[h[1].name]=l),f>2&&(v[h[2].name]=r),f>3&&(v[h[3].name]=i),f>4&&(v[h[4].name]=o),f>5&&(v[h[5].name]=u),f>6&&(v[h[6].name]=s),f>7&&(v[h[7].name]=a),f>8&&(v[h[8].name]=c),f>9&&(v[h[9].name]=p);break;case 128:var m=t;switch(f){case 1:v=m.transform(t);break;case 2:v=m.transform(l);break;case 3:v=m.transform(l,r);break;case 4:v=m.transform(l,r,i);break;case 5:v=m.transform(l,r,i,o);break;case 6:v=m.transform(l,r,i,o,u);break;case 7:v=m.transform(l,r,i,o,u,s);break;case 8:v=m.transform(l,r,i,o,u,s,a);break;case 9:v=m.transform(l,r,i,o,u,s,a,c);break;case 10:v=m.transform(l,r,i,o,u,s,a,c,p)}}g.value=v}return d}(e,n,t,l,r,i,o,u,s,a,c,p);default:throw"unreachable"}}(e,n,l,r,i,o,u,s,a,p,h,d):function(e,n,t){switch(201347067&n.flags){case 1:return function(e,n,t){for(var l=!1,r=0;r<t.length;r++)$r(e,n,r,t[r])&&(l=!0);return l}(e,n,t);case 2:return function(e,n,t){for(var l=n.bindings,r=!1,i=0;i<t.length;i++)yr(e,n,i,t[i])&&(r=!0);if(r){var o="";for(i=0;i<t.length;i++)o+=uo(t[i],l[i]);o=n.text.prefix+o;var u=er(e,n.nodeIndex).renderText;e.renderer.setValue(u,o)}return r}(e,n,t);case 16384:return function(e,n,t){for(var l=tr(e,n.nodeIndex),r=l.instance,i=!1,o=void 0,u=0;u<t.length;u++)mr(e,n,u,t[u])&&(i=!0,o=Yi(e,l,n,u,t[u],o));return o&&r.ngOnChanges(o),65536&n.flags&&Jl(e,256,n.nodeIndex)&&r.ngOnInit(),262144&n.flags&&r.ngDoCheck(),i}(e,n,t);case 32:case 64:case 128:return function(e,n,t){for(var l=n.bindings,r=!1,i=0;i<t.length;i++)yr(e,n,i,t[i])&&(r=!0);if(r){var o=lr(e,n.nodeIndex),u=void 0;switch(201347067&n.flags){case 32:u=t;break;case 64:for(u={},i=0;i<t.length;i++)u[l[i].name]=t[i];break;case 128:var s=t[0],a=t.slice(1);u=s.transform.apply(s,c(a))}o.value=u}return r}(e,n,t);default:throw"unreachable"}}(e,n,l)}function bo(e){var n=e.def;if(4&n.nodeFlags)for(var t=0;t<n.nodes.length;t++){var l=n.nodes[t];if(4&l.flags){var r=nr(e,t).template._projectedViews;if(r)for(var i=0;i<r.length;i++){var o=r[i];o.state|=32,br(o,e)}}else 0==(4&l.childFlags)&&(t+=l.childCount)}}function Oo(e,n,t,l,r,i,o,u,s,a,c,p,h){return 0===t?function(e,n,t,l,r,i,o,u,s,a,c,p){var h=n.bindings.length;h>0&&Sr(e,n,0,t),h>1&&Sr(e,n,1,l),h>2&&Sr(e,n,2,r),h>3&&Sr(e,n,3,i),h>4&&Sr(e,n,4,o),h>5&&Sr(e,n,5,u),h>6&&Sr(e,n,6,s),h>7&&Sr(e,n,7,a),h>8&&Sr(e,n,8,c),h>9&&Sr(e,n,9,p)}(e,n,l,r,i,o,u,s,a,c,p,h):function(e,n,t){for(var l=0;l<t.length;l++)Sr(e,n,l,t[l])}(e,n,l),!1}function Ro(e,n){if(rr(e,n.nodeIndex).dirty)throw or(ir.createDebugContext(e,n.nodeIndex),"Query "+n.query.id+" not dirty","Query "+n.query.id+" dirty",0!=(1&e.state))}function Co(e){if(!(128&e.state)){if(Io(e,_o.Destroy),To(e,_o.Destroy),Ki(e,131072),e.disposables)for(var n=0;n<e.disposables.length;n++)e.disposables[n]();!function(e){if(16&e.state){var n=Rr(e);if(n){var t=n.template._projectedViews;t&&(ui(t,t.indexOf(e)),ir.dirtyParentQueries(e))}}}(e),e.renderer.destroyNode&&function(e){for(var n=e.def.nodes.length,t=0;t<n;t++){var l=e.def.nodes[t];1&l.flags?e.renderer.destroyNode(nr(e,t).renderElement):2&l.flags?e.renderer.destroyNode(er(e,t).renderText):(67108864&l.flags||134217728&l.flags)&&rr(e,t).destroy()}}(e),Tr(e)&&e.renderer.destroy(),e.state|=128}}var _o=function(e){return e[e.CreateViewNodes=0]="CreateViewNodes",e[e.CheckNoChanges=1]="CheckNoChanges",e[e.CheckNoChangesProjectedViews=2]="CheckNoChangesProjectedViews",e[e.CheckAndUpdate=3]="CheckAndUpdate",e[e.CheckAndUpdateProjectedViews=4]="CheckAndUpdateProjectedViews",e[e.Destroy=5]="Destroy",e}({});function To(e,n){var t=e.def;if(33554432&t.nodeFlags)for(var l=0;l<t.nodes.length;l++){var r=t.nodes[l];33554432&r.flags?Ao(nr(e,l).componentView,n):0==(33554432&r.childFlags)&&(l+=r.childCount)}}function Io(e,n){var t=e.def;if(16777216&t.nodeFlags)for(var l=0;l<t.nodes.length;l++){var r=t.nodes[l];if(16777216&r.flags)for(var i=nr(e,l).viewContainer._embeddedViews,o=0;o<i.length;o++)Ao(i[o],n);else 0==(16777216&r.childFlags)&&(l+=r.childCount)}}function Ao(e,n){var t=e.state;switch(n){case _o.CheckNoChanges:0==(128&t)&&(12==(12&t)?yo(e):64&t&&wo(e,_o.CheckNoChangesProjectedViews));break;case _o.CheckNoChangesProjectedViews:0==(128&t)&&(32&t?yo(e):64&t&&wo(e,n));break;case _o.CheckAndUpdate:0==(128&t)&&(12==(12&t)?So(e):64&t&&wo(e,_o.CheckAndUpdateProjectedViews));break;case _o.CheckAndUpdateProjectedViews:0==(128&t)&&(32&t?So(e):64&t&&wo(e,n));break;case _o.Destroy:Co(e);break;case _o.CreateViewNodes:mo(e)}}function wo(e,n){Io(e,n),To(e,n)}function No(e,n,t,l){if(e.def.nodeFlags&n&&e.def.nodeFlags&t)for(var r=e.def.nodes.length,i=0;i<r;i++){var o=e.def.nodes[i];if(o.flags&n&&o.flags&t)switch(ir.setCurrentNode(e,o.nodeIndex),l){case 0:Xi(e,o);break;case 1:Ro(e,o)}o.childFlags&n&&o.childFlags&t||(i+=o.childCount)}}var Po=!1;function Do(e,n,t,l,r,i){var o=r.injector.get(Mn);return ho(Mo(e,r,o,n,t),l,i)}function ko(e,n,t,l,r,i){var o=r.injector.get(Mn),u=Mo(e,r,new hu(o),n,t),s=jo(l);return cu(Jo.create,ho,null,[u,s,i])}function Mo(e,n,t,l,r){var i=n.injector.get(Hn),o=n.injector.get(_t),u=t.createRenderer(null,null);return{ngModule:n,injector:e,projectableNodes:l,selectorOrNode:r,sanitizer:i,rendererFactory:t,renderer:u,errorHandler:o}}function xo(e,n,t,l){var r=jo(t);return cu(Jo.create,po,null,[e,n,r,l])}function Lo(e,n,t,l){return t=Go.get(n.element.componentProvider.provider.token)||jo(t),cu(Jo.create,fo,null,[e,n,t,l])}function Fo(e,n,t,l){return Ri(e,n,t,function(e){var n=function(e){var n=!1,t=!1;return 0===Uo.size?{hasOverrides:n,hasDeprecatedOverrides:t}:(e.providers.forEach(function(e){var l=Uo.get(e.token);3840&e.flags&&l&&(n=!0,t=t||l.deprecatedBehavior)}),e.modules.forEach(function(e){Ho.forEach(function(l,r){me(r).providedIn===e&&(n=!0,t=t||l.deprecatedBehavior)})}),{hasOverrides:n,hasDeprecatedOverrides:t})}(e),t=n.hasDeprecatedOverrides;return n.hasOverrides?(function(e){for(var n=0;n<e.providers.length;n++){var l=e.providers[n];t&&(l.flags|=4096);var r=Uo.get(l.token);r&&(l.flags=-3841&l.flags|r.flags,l.deps=Nr(r.deps),l.value=r.value)}if(Ho.size>0){var i=new Set(e.modules);Ho.forEach(function(n,l){if(i.has(me(l).providedIn)){var r={token:l,flags:n.flags|(t?4096:0),deps:Nr(n.deps),value:n.value,index:e.providers.length};e.providers.push(r),e.providersByKey[pr(l)]=r}})}}(e=e.factory(function(){return ar})),e):e}(l))}var Uo=new Map,Ho=new Map,Go=new Map;function Bo(e){var n;Uo.set(e.token,e),"function"==typeof e.token&&(n=me(e.token))&&"function"==typeof n.providedIn&&Ho.set(e.token,e)}function Vo(e,n){var t=kr(n.viewDefFactory),l=kr(t.nodes[0].element.componentView);Go.set(e,l)}function Wo(){Uo.clear(),Ho.clear(),Go.clear()}function jo(e){if(0===Uo.size)return e;var n=function(e){for(var n=[],t=null,l=0;l<e.nodes.length;l++){var r=e.nodes[l];1&r.flags&&(t=r),t&&3840&r.flags&&Uo.has(r.provider.token)&&(n.push(t.nodeIndex),t=null)}return n}(e);if(0===n.length)return e;e=e.factory(function(){return ar});for(var t=0;t<n.length;t++)l(e,n[t]);return e;function l(e,n){for(var t=n+1;t<e.nodes.length;t++){var l=e.nodes[t];if(1&l.flags)return;if(3840&l.flags){var r=l.provider,i=Uo.get(r.token);i&&(l.flags=-3841&l.flags|i.flags,r.deps=Nr(i.deps),r.value=i.value)}}}}function zo(e,n,t,l,r,i,o,u,s,a,c,p,h){var d=e.def.nodes[n];return Eo(e,d,t,l,r,i,o,u,s,a,c,p,h),224&d.flags?lr(e,n).value:void 0}function Yo(e,n,t,l,r,i,o,u,s,a,c,p,h){var d=e.def.nodes[n];return Oo(e,d,t,l,r,i,o,u,s,a,c,p,h),224&d.flags?lr(e,n).value:void 0}function Ko(e){return cu(Jo.detectChanges,So,null,[e])}function qo(e){return cu(Jo.checkNoChanges,yo,null,[e])}function $o(e){return cu(Jo.destroy,Co,null,[e])}var Qo,Zo,Xo,Jo=function(e){return e[e.create=0]="create",e[e.detectChanges=1]="detectChanges",e[e.checkNoChanges=2]="checkNoChanges",e[e.destroy=3]="destroy",e[e.handleEvent=4]="handleEvent",e}({});function eu(e,n){Zo=e,Xo=n}function nu(e,n,t,l){return eu(e,n),cu(Jo.handleEvent,e.def.handleEvent,null,[e,n,t,l])}function tu(e,n){if(128&e.state)throw sr(Jo[Qo]);return eu(e,ou(e,0)),e.def.updateDirectives(function(e,t,l){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=e.def.nodes[t];return 0===n?ru(e,o,l,r):iu(e,o,l,r),16384&o.flags&&eu(e,ou(e,t)),224&o.flags?lr(e,o.nodeIndex).value:void 0},e)}function lu(e,n){if(128&e.state)throw sr(Jo[Qo]);return eu(e,uu(e,0)),e.def.updateRenderer(function(e,t,l){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=e.def.nodes[t];return 0===n?ru(e,o,l,r):iu(e,o,l,r),3&o.flags&&eu(e,uu(e,t)),224&o.flags?lr(e,o.nodeIndex).value:void 0},e)}function ru(e,n,t,l){if(Eo.apply(void 0,c([e,n,t],l))){var r=1===t?l[0]:l;if(16384&n.flags){for(var i={},o=0;o<n.bindings.length;o++){var u=n.bindings[o],s=r[o];8&u.flags&&(i[(d=u.nonMinifiedName,"ng-reflect-"+d.replace(/[$@]/g,"_").replace(Ke,function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return"-"+e[1].toLowerCase()}))]=qe(s))}var a=n.parent,p=nr(e,a.nodeIndex).renderElement;if(a.element.name)for(var h in i)null!=(s=i[h])?e.renderer.setAttribute(p,h,s):e.renderer.removeAttribute(p,h);else e.renderer.setValue(p,"bindings="+JSON.stringify(i,null,2))}}var d}function iu(e,n,t,l){Oo.apply(void 0,c([e,n,t],l))}function ou(e,n){for(var t=n;t<e.def.nodes.length;t++){var l=e.def.nodes[t];if(16384&l.flags&&l.bindings&&l.bindings.length)return t}return null}function uu(e,n){for(var t=n;t<e.def.nodes.length;t++){var l=e.def.nodes[t];if(3&l.flags&&l.bindings&&l.bindings.length)return t}return null}var su=function(){function e(e,n){this.view=e,this.nodeIndex=n,null==n&&(this.nodeIndex=n=0),this.nodeDef=e.def.nodes[n];for(var t=this.nodeDef,l=e;t&&0==(1&t.flags);)t=t.parent;if(!t)for(;!t&&l;)t=Cr(l),l=l.parent;this.elDef=t,this.elView=l}return Object.defineProperty(e.prototype,"elOrCompView",{get:function(){return nr(this.elView,this.elDef.nodeIndex).componentView||this.view},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"injector",{get:function(){return yi(this.elView,this.elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"component",{get:function(){return this.elOrCompView.component},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this.elOrCompView.context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"providerTokens",{get:function(){var e=[];if(this.elDef)for(var n=this.elDef.nodeIndex+1;n<=this.elDef.nodeIndex+this.elDef.childCount;n++){var t=this.elView.def.nodes[n];20224&t.flags&&e.push(t.provider.token),n+=t.childCount}return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"references",{get:function(){var e={};if(this.elDef){au(this.elView,this.elDef,e);for(var n=this.elDef.nodeIndex+1;n<=this.elDef.nodeIndex+this.elDef.childCount;n++){var t=this.elView.def.nodes[n];20224&t.flags&&au(this.elView,t,e),n+=t.childCount}}return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentRenderElement",{get:function(){var e=function(e){for(;e&&!Tr(e);)e=e.parent;return e.parent?nr(e.parent,Cr(e).nodeIndex):null}(this.elOrCompView);return e?e.renderElement:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderNode",{get:function(){return 2&this.nodeDef.flags?_r(this.view,this.nodeDef):_r(this.elView,this.elDef)},enumerable:!0,configurable:!0}),e.prototype.logError=function(e){for(var n,t,l=[],r=1;r<arguments.length;r++)l[r-1]=arguments[r];2&this.nodeDef.flags?(n=this.view.def,t=this.nodeDef.nodeIndex):(n=this.elView.def,t=this.elDef.nodeIndex);var i=function(e,n){for(var t=-1,l=0;l<=n;l++)3&e.nodes[l].flags&&t++;return t}(n,t),o=-1;n.factory(function(){var n;return++o===i?(n=e.error).bind.apply(n,c([e],l)):ar}),o<i&&(e.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),e.error.apply(e,c(l)))},e}();function au(e,n,t){for(var l in n.references)t[l]=eo(e,n,n.references[l])}function cu(e,n,t,l){var r=Qo,i=Zo,o=Xo;try{Qo=e;var u=n.apply(t,l);return Zo=i,Xo=o,Qo=r,u}catch(s){if(Ot(s)||!Zo)throw s;throw function(e,n){return e instanceof Error||(e=new Error(e.toString())),ur(e,n),e}(s,pu())}}function pu(){return Zo?new su(Zo,Xo):null}var hu=function(){function e(e){this.delegate=e}return e.prototype.createRenderer=function(e,n){return new du(this.delegate.createRenderer(e,n))},e.prototype.begin=function(){this.delegate.begin&&this.delegate.begin()},e.prototype.end=function(){this.delegate.end&&this.delegate.end()},e.prototype.whenRenderingDone=function(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)},e}(),du=function(){function e(e){this.delegate=e,this.debugContextFactory=pu,this.data=this.delegate.data}return e.prototype.createDebugContext=function(e){return this.debugContextFactory(e)},e.prototype.destroyNode=function(e){!function(e){Al.delete(e.nativeNode)}(wl(e)),this.delegate.destroyNode&&this.delegate.destroyNode(e)},e.prototype.destroy=function(){this.delegate.destroy()},e.prototype.createElement=function(e,n){var t=this.delegate.createElement(e,n),l=this.createDebugContext(t);if(l){var r=new Il(t,null,l);r.name=e,Nl(r)}return t},e.prototype.createComment=function(e){var n=this.delegate.createComment(e),t=this.createDebugContext(n);return t&&Nl(new Tl(n,null,t)),n},e.prototype.createText=function(e){var n=this.delegate.createText(e),t=this.createDebugContext(n);return t&&Nl(new Tl(n,null,t)),n},e.prototype.appendChild=function(e,n){var t=wl(e),l=wl(n);t&&l&&t instanceof Il&&t.addChild(l),this.delegate.appendChild(e,n)},e.prototype.insertBefore=function(e,n,t){var l=wl(e),r=wl(n),i=wl(t);l&&r&&l instanceof Il&&l.insertBefore(i,r),this.delegate.insertBefore(e,n,t)},e.prototype.removeChild=function(e,n){var t=wl(e),l=wl(n);t&&l&&t instanceof Il&&t.removeChild(l),this.delegate.removeChild(e,n)},e.prototype.selectRootElement=function(e,n){var t=this.delegate.selectRootElement(e,n),l=pu();return l&&Nl(new Il(t,null,l)),t},e.prototype.setAttribute=function(e,n,t,l){var r=wl(e);r&&r instanceof Il&&(r.attributes[l?l+":"+n:n]=t),this.delegate.setAttribute(e,n,t,l)},e.prototype.removeAttribute=function(e,n,t){var l=wl(e);l&&l instanceof Il&&(l.attributes[t?t+":"+n:n]=null),this.delegate.removeAttribute(e,n,t)},e.prototype.addClass=function(e,n){var t=wl(e);t&&t instanceof Il&&(t.classes[n]=!0),this.delegate.addClass(e,n)},e.prototype.removeClass=function(e,n){var t=wl(e);t&&t instanceof Il&&(t.classes[n]=!1),this.delegate.removeClass(e,n)},e.prototype.setStyle=function(e,n,t,l){var r=wl(e);r&&r instanceof Il&&(r.styles[n]=t),this.delegate.setStyle(e,n,t,l)},e.prototype.removeStyle=function(e,n,t){var l=wl(e);l&&l instanceof Il&&(l.styles[n]=null),this.delegate.removeStyle(e,n,t)},e.prototype.setProperty=function(e,n,t){var l=wl(e);l&&l instanceof Il&&(l.properties[n]=t),this.delegate.setProperty(e,n,t)},e.prototype.listen=function(e,n,t){if("string"!=typeof e){var l=wl(e);l&&l.listeners.push(new _l(n,t))}return this.delegate.listen(e,n,t)},e.prototype.parentNode=function(e){return this.delegate.parentNode(e)},e.prototype.nextSibling=function(e){return this.delegate.nextSibling(e)},e.prototype.setValue=function(e,n){return this.delegate.setValue(e,n)},e}();function fu(e,n,t){return new gu(e,n,t)}var gu=function(e){function n(n,t,l){var r=e.call(this)||this;return r.moduleType=n,r._bootstrapComponents=t,r._ngModuleDefFactory=l,r}return r(n,e),n.prototype.create=function(e){!function(){if(!Po){Po=!0;var e=Wn()?{setCurrentNode:eu,createRootView:ko,createEmbeddedView:xo,createComponentView:Lo,createNgModuleRef:Fo,overrideProvider:Bo,overrideComponentView:Vo,clearOverrides:Wo,checkAndUpdateView:Ko,checkNoChangesView:qo,destroyView:$o,createDebugContext:function(e,n){return new su(e,n)},handleEvent:nu,updateDirectives:tu,updateRenderer:lu}:{setCurrentNode:function(){},createRootView:Do,createEmbeddedView:po,createComponentView:fo,createNgModuleRef:Ri,overrideProvider:ar,overrideComponentView:ar,clearOverrides:ar,checkAndUpdateView:So,checkNoChangesView:yo,destroyView:Co,createDebugContext:function(e,n){return new su(e,n)},handleEvent:function(e,n,t,l){return e.def.handleEvent(e,n,t,l)},updateDirectives:function(e,n){return e.def.updateDirectives(0===n?zo:Yo,e)},updateRenderer:function(e,n){return e.def.updateRenderer(0===n?zo:Yo,e)}};ir.setCurrentNode=e.setCurrentNode,ir.createRootView=e.createRootView,ir.createEmbeddedView=e.createEmbeddedView,ir.createComponentView=e.createComponentView,ir.createNgModuleRef=e.createNgModuleRef,ir.overrideProvider=e.overrideProvider,ir.overrideComponentView=e.overrideComponentView,ir.clearOverrides=e.clearOverrides,ir.checkAndUpdateView=e.checkAndUpdateView,ir.checkNoChangesView=e.checkNoChangesView,ir.destroyView=e.destroyView,ir.resolveDep=ji,ir.createDebugContext=e.createDebugContext,ir.handleEvent=e.handleEvent,ir.updateDirectives=e.updateDirectives,ir.updateRenderer=e.updateRenderer,ir.dirtyParentQueries=Zi}}();var n=function(e){var n=Array.from(e.providers),t=Array.from(e.modules),l={};for(var r in e.providersByKey)l[r]=e.providersByKey[r];return{factory:e.factory,isRoot:e.isRoot,providers:n,modules:t,providersByKey:l}}(kr(this._ngModuleDefFactory));return ir.createNgModuleRef(this.moduleType,e||on.NULL,this._bootstrapComponents,n)},n}(Nn),vu=function(e){return e[e.NOTHING=0]="NOTHING",e[e.FOOD=1]="FOOD",e[e.LOG=2]="LOG",e[e.BRUSHWOOD=3]="BRUSHWOOD",e[e.STONE=4]="STONE",e[e.FUR=5]="FUR",e[e.WHEAT=6]="WHEAT",e[e.BARLEY=7]="BARLEY",e[e.HOP=8]="HOP",e[e.COTTON=9]="COTTON",e[e.HAY=10]="HAY",e[e.CHICKEN=11]="CHICKEN",e[e.COW=12]="COW",e[e.PIG=13]="PIG",e[e.HORSE=14]="HORSE",e[e.COAL=15]="COAL",e[e.GOLD_ORE=16]="GOLD_ORE",e[e.SILVER_ORE=17]="SILVER_ORE",e[e.COPPER_ORE=18]="COPPER_ORE",e[e.TIN_ORE=19]="TIN_ORE",e[e.IRON_ORE=20]="IRON_ORE",e[e.PLANK=21]="PLANK",e[e.CUT_STONE=22]="CUT_STONE",e[e.FUEL=23]="FUEL",e[e.FLOUR=24]="FLOUR",e[e.FABRIC=25]="FABRIC",e[e.LEATHER=26]="LEATHER",e[e.COINS=27]="COINS",e[e.COPPER=28]="COPPER",e[e.GOLD=29]="GOLD",e[e.SILVER=30]="SILVER",e[e.TIN=31]="TIN",e[e.BRONZE=32]="BRONZE",e[e.IRON=33]="IRON",e[e.STEEL=34]="STEEL",e[e.BERRY=35]="BERRY",e[e.MUSHROOM=36]="MUSHROOM",e[e.FISH=37]="FISH",e[e.APPLE=38]="APPLE",e[e.GRAPE=39]="GRAPE",e[e.BREAD=40]="BREAD",e[e.MEAT=41]="MEAT",e[e.EGG=42]="EGG",e[e.MILK=43]="MILK",e[e.COOKED_MEAT=44]="COOKED_MEAT",e[e.VEGETABLE_SOUP=45]="VEGETABLE_SOUP",e[e.MEAT_SOUP=46]="MEAT_SOUP",e[e.BEER=47]="BEER",e[e.WINE=48]="WINE",e[e.CLOTHES=49]="CLOTHES",e[e.BOW=50]="BOW",e[e.STONE_PICKAXE=51]="STONE_PICKAXE",e[e.STONE_SHOVEL=52]="STONE_SHOVEL",e[e.STONE_AXE=53]="STONE_AXE",e[e.STONE_SPEAR=54]="STONE_SPEAR",e[e.STONE_HAMMER=55]="STONE_HAMMER",e[e.SWORD=56]="SWORD",e[e.WOODEN_SHIELD=57]="WOODEN_SHIELD",e[e.LEATHER_ARMOR=58]="LEATHER_ARMOR",e[e.LIGHT_ARMOR=59]="LIGHT_ARMOR",e[e.HEAVY_ARMOR=60]="HEAVY_ARMOR",e[e.FISH_FOOD=61]="FISH_FOOD",e}({});!function(e){e.values=function(){return Object.keys(e).filter(function(e){return isNaN(e)&&"values"!==e})}}(vu||(vu={}));var mu,yu=function(e){return e[e.MOTIVATION_SPEECH=0]="MOTIVATION_SPEECH",e[e.ROYAL_PROPHECY=1]="ROYAL_PROPHECY",e[e.HERITAGE=2]="HERITAGE",e[e.FAMILY_JEWELS=3]="FAMILY_JEWELS",e[e.KING_OF_THE_FOREST=4]="KING_OF_THE_FOREST",e[e.KING_OF_THE_SEAS=5]="KING_OF_THE_SEAS",e[e.KING_OF_THE_PEOPLE=6]="KING_OF_THE_PEOPLE",e[e.KING_OF_THE_WAR=7]="KING_OF_THE_WAR",e[e.CALL_TO_ARMS=8]="CALL_TO_ARMS",e[e.UNITE_WITH_THE_PEOPLE=9]="UNITE_WITH_THE_PEOPLE",e}({}),Su=function(e){return e[e.MANAGEMENT=0]="MANAGEMENT",e[e.STONE_AXE=1]="STONE_AXE",e[e.STONE_PICKAXE=2]="STONE_PICKAXE",e[e.STONE_SHOVEL=3]="STONE_SHOVEL",e[e.STONE_HAMMER=4]="STONE_HAMMER",e[e.HUNTING=5]="HUNTING",e[e.FIRE=6]="FIRE",e[e.BIGGER_FIRE=7]="BIGGER_FIRE",e[e.COOKING=8]="COOKING",e[e.TRADE=9]="TRADE",e[e.ALCOHOL=10]="ALCOHOL",e[e.WONDER_BUILDINGS=11]="WONDER_BUILDINGS",e[e.TRADE_ROUTES=12]="TRADE_ROUTES",e[e.BUFF_PRODUCTION=13]="BUFF_PRODUCTION",e[e.STONE_SPEAR=14]="STONE_SPEAR",e[e.BOW=15]="BOW",e[e.BARRACKS=16]="BARRACKS",e[e.WOODEN_DEFENCES=17]="WOODEN_DEFENCES",e[e.STONE_DEFENCES=18]="STONE_DEFENCES",e[e.STASH=19]="STASH",e[e.SCIENTIFIC_METHOD=20]="SCIENTIFIC_METHOD",e[e.FORESIGHT=21]="FORESIGHT",e[e.CALENDAR=22]="CALENDAR",e[e.WEATHER=23]="WEATHER",e[e.HISTORY=24]="HISTORY",e[e.URBAN_PLANNING=25]="URBAN_PLANNING",e[e.MATHEMATICS=26]="MATHEMATICS",e[e.PROSPECTING_FOR_ORE=27]="PROSPECTING_FOR_ORE",e[e.ADVANCED_PROSPECTING=28]="ADVANCED_PROSPECTING",e[e.MASTER_PROSPECTING=29]="MASTER_PROSPECTING",e[e.SAWMILL=30]="SAWMILL",e[e.MINING=31]="MINING",e[e.PIT_MINE=32]="PIT_MINE",e[e.UNDERGROUND_MINE=33]="UNDERGROUND_MINE",e[e.WINDMILL=34]="WINDMILL",e[e.MORTAR=35]="MORTAR",e[e.HOUSE=36]="HOUSE",e[e.LEATHER=37]="LEATHER",e[e.FABRIC=38]="FABRIC",e[e.TAILORING=39]="TAILORING",e[e.ORE_PROCESSING=40]="ORE_PROCESSING",e[e.ADVANCED_ORE_PROCESSING=41]="ADVANCED_ORE_PROCESSING",e[e.MASTER_ORE_PROCESSING=42]="MASTER_ORE_PROCESSING",e[e.COINS_MINTING=43]="COINS_MINTING",e[e.METALLURGY=44]="METALLURGY",e[e.ADVANCED_METALLURGY=45]="ADVANCED_METALLURGY",e[e.PICKAXE_DESIGN=46]="PICKAXE_DESIGN",e[e.AGRICULTURE=47]="AGRICULTURE",e[e.FORESTRY=48]="FORESTRY",e[e.FISHING=49]="FISHING",e[e.ANIMALS=50]="ANIMALS",e[e.COTTON=51]="COTTON",e[e.FERTILIZER=52]="FERTILIZER",e[e.HUMAN_RESOURCES=53]="HUMAN_RESOURCES",e[e.FISH_FOOD=54]="FISH_FOOD",e[e.SPECIALISED_PRODUCTION=55]="SPECIALISED_PRODUCTION",e}({}),Eu=function(e){return e[e.WEATHER=0]="WEATHER",e[e.MARKET=1]="MARKET",e[e.MANAGEMENT=2]="MANAGEMENT",e[e.CRAFTING=3]="CRAFTING",e[e.RESEARCH=4]="RESEARCH",e[e.ARMY=5]="ARMY",e[e.RELIGION=6]="RELIGION",e[e.FORT=7]="FORT",e[e.SEA=8]="SEA",e[e.FIELD=9]="FIELD",e[e.MOUNTAINS=10]="MOUNTAINS",e[e.PLATEAU=11]="PLATEAU",e[e.HOUSE=12]="HOUSE",e[e.SHRINE=13]="SHRINE",e[e.CHURCH=14]="CHURCH",e[e.TAILOR=15]="TAILOR",e[e.TAVERN=16]="TAVERN",e[e.BAKERY=17]="BAKERY",e[e.MARKETPLACE=18]="MARKETPLACE",e[e.BARRACKS=19]="BARRACKS",e[e.STOCKADE=20]="STOCKADE",e[e.WOODEN_TOWER=21]="WOODEN_TOWER",e[e.STONE_TOWER=22]="STONE_TOWER",e[e.STASH=23]="STASH",e[e.FORESTER=24]="FORESTER",e[e.SAWMILL=25]="SAWMILL",e[e.HUNTER=26]="HUNTER",e[e.TANNERY=27]="TANNERY",e[e.WINDMILL=28]="WINDMILL",e[e.FARM=29]="FARM",e[e.PASTURE=30]="PASTURE",e[e.BUTCHER=31]="BUTCHER",e[e.BREWERY=32]="BREWERY",e[e.WINERY=33]="WINERY",e[e.COTTON_MILL=34]="COTTON_MILL",e[e.PIT_MINE=35]="PIT_MINE",e[e.GEOLOGIST=36]="GEOLOGIST",e[e.SMITHY=37]="SMITHY",e[e.MINT=38]="MINT",e[e.FISHERS_HUT=39]="FISHERS_HUT",e[e.CALENDAR=40]="CALENDAR",e[e.FIRE=41]="FIRE",e[e.URBAN_PLANNING=42]="URBAN_PLANNING",e[e.ALCOHOL=43]="ALCOHOL",e[e.GOLD=44]="GOLD",e[e.SILVER=45]="SILVER",e[e.BRONZE=46]="BRONZE",e[e.IRON=47]="IRON",e[e.STEEL=48]="STEEL",e[e.ADVANCED_ORE_PROCESSING=49]="ADVANCED_ORE_PROCESSING",e[e.BUFFS=50]="BUFFS",e[e.COTTON=51]="COTTON",e[e.BARLEY=52]="BARLEY",e[e.HOPS=53]="HOPS",e[e.BUILT_QUARRY=54]="BUILT_QUARRY",e[e.BUILT_SMITHY=55]="BUILT_SMITHY",e[e.HUMAN_RESOURCES=56]="HUMAN_RESOURCES",e[e.FISH_FOOD=57]="FISH_FOOD",e[e.SPECIALISED_PRODUCTION=58]="SPECIALISED_PRODUCTION",e[e.MANUFACTURE=59]="MANUFACTURE",e[e.STONEMASON=60]="STONEMASON",e}({}),bu=function(e){return e[e.ALL=0]="ALL",e[e.CONSTRUCTION=1]="CONSTRUCTION",e[e.DECONSTRUCTION=2]="DECONSTRUCTION",e[e.HUT=3]="HUT",e[e.HOUSE=4]="HOUSE",e[e.MARKETPLACE=5]="MARKETPLACE",e[e.WAREHOUSE=6]="WAREHOUSE",e[e.SMITHY=7]="SMITHY",e[e.BAKERY=8]="BAKERY",e[e.WORKSHOP=9]="WORKSHOP",e[e.SHRINE=10]="SHRINE",e[e.TAILOR=11]="TAILOR",e[e.BREWERY=12]="BREWERY",e[e.TAVERN=13]="TAVERN",e[e.CHURCH=14]="CHURCH",e[e.STOCKADE=15]="STOCKADE",e[e.BARRACKS=16]="BARRACKS",e[e.TRAINING_SQUARE=17]="TRAINING_SQUARE",e[e.WOODEN_TOWER=18]="WOODEN_TOWER",e[e.STONE_TOWER=19]="STONE_TOWER",e[e.STASH=20]="STASH",e[e.LOGGERS_HUT=21]="LOGGERS_HUT",e[e.SAWMILL=22]="SAWMILL",e[e.FORESTER=23]="FORESTER",e[e.HUNTER_LODGE=24]="HUNTER_LODGE",e[e.GATHERER=25]="GATHERER",e[e.TANNERY=26]="TANNERY",e[e.FARM=27]="FARM",e[e.FIELD=28]="FIELD",e[e.ORCHARD=29]="ORCHARD",e[e.PASTURE=30]="PASTURE",e[e.WINDMILL=31]="WINDMILL",e[e.BUTCHER=32]="BUTCHER",e[e.COTTON_MILL=33]="COTTON_MILL",e[e.WINERY=34]="WINERY",e[e.PIT_MINE=35]="PIT_MINE",e[e.QUARRY=36]="QUARRY",e[e.GEOLOGIST=37]="GEOLOGIST",e[e.STONEMASON=38]="STONEMASON",e[e.MINT=39]="MINT",e[e.FISHERS_HUT=40]="FISHERS_HUT",e[e.SCHOOL_OF_FISH=41]="SCHOOL_OF_FISH",e[e.SHARKS=42]="SHARKS",e[e.STONEHENGE=43]="STONEHENGE",e[e.PYRAMID=44]="PYRAMID",e[e.HANGING_GARDEN=45]="HANGING_GARDEN",e[e.COLOSSUS=46]="COLOSSUS",e[e.UNDERGROUND_CITY=47]="UNDERGROUND_CITY",e[e.GREAT_LIGHTHOUSE=48]="GREAT_LIGHTHOUSE",e[e.SACRED_GROVE=49]="SACRED_GROVE",e[e.ASCENSION_TEMPLE=50]="ASCENSION_TEMPLE",e[e.MANUFACTURE=51]="MANUFACTURE",e}({}),Ou=function(e){return e[e.BLESSING=0]="BLESSING",e[e.PREACH=1]="PREACH",e[e.FAITH_SHIELD=2]="FAITH_SHIELD",e[e.SOLDIER_PRAYER=3]="SOLDIER_PRAYER",e[e.FAITHFUL_RESEARCH=4]="FAITHFUL_RESEARCH",e[e.BABY_BOOM=5]="BABY_BOOM",e[e.LIFE_CYCLE=6]="LIFE_CYCLE",e[e.HOLY_WAR=7]="HOLY_WAR",e}({}),Ru=function(e){return e[e.TRAIN=0]="TRAIN",e[e.DEFEND=1]="DEFEND",e[e.SPY=2]="SPY",e[e.DIVERSION=3]="DIVERSION",e[e.PLUNDER=4]="PLUNDER",e[e.EXPEDITION=5]="EXPEDITION",e[e.CONQUER=6]="CONQUER",e}({}),Cu=function(e){return e[e.NONE=0]="NONE",e[e.WHEAT=1]="WHEAT",e[e.BARLEY=2]="BARLEY",e[e.HAY=3]="HAY",e[e.HOP=4]="HOP",e[e.COTTON=5]="COTTON",e[e.BERRY=6]="BERRY",e[e.GRAPE=7]="GRAPE",e[e.APPLE=8]="APPLE",e}({}),_u=function(e){return e[e.ALL=0]="ALL",e[e.NONE=1]="NONE",e[e.RAW=2]="RAW",e[e.PROCESSED=3]="PROCESSED",e[e.FOOD=4]="FOOD",e[e.TOOLS=5]="TOOLS",e[e.OTHER=6]="OTHER",e[e.WOODEN=7]="WOODEN",e[e.METAL=8]="METAL",e[e.STONE=9]="STONE",e[e.ANIMAL=10]="ANIMAL",e[e.FUEL=11]="FUEL",e[e.CONSUMABLE=12]="CONSUMABLE",e}({}),Tu=function(e){return e[e.NONE=0]="NONE",e[e.FERTILITY=1]="FERTILITY",e[e.NATURE=2]="NATURE",e[e.TECHNOLOGY=3]="TECHNOLOGY",e[e.WAR=4]="WAR",e}({}),Iu=function(e){return e[e.ALL=0]="ALL",e[e.MILITIA=1]="MILITIA",e[e.SPEARMAN=2]="SPEARMAN",e[e.ARCHER=3]="ARCHER",e[e.SWORDSMAN=4]="SWORDSMAN",e}({}),Au=function(){function e(){}return e.round=function(e,n){return e.toFixed(n)},e.titleCase=function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()},e.prepareResourceName=function(e){return this.titleCase(vu[e].replace(/_/g," "))},e.prepareResourceTypeName=function(e){return this.titleCase(_u[e].replace(/_/g," "))},e.preparePerkName=function(e){return this.titleCase(yu[e].replace(/_/g," "))},e.prepareTechName=function(e){return this.titleCase(Su[e].replace(/_/g," "))},e.prepareFlagName=function(e){return this.titleCase(Eu[e].replace(/_/g," "))},e.prepareBuildingName=function(e){return this.titleCase(bu[e].replace(/_/g," "))},e.preparePrayerName=function(e){return this.titleCase(Ou[e].replace(/_/g," "))},e.prepareReligionName=function(e){return this.titleCase(Tu[e].replace(/_/g," "))},e.prepareTroopName=function(e){return this.titleCase(Iu[e].replace(/_/g," "))},e.prepareMissionName=function(e){return this.titleCase(Ru[e].replace(/_/g," "))},e.prepareCropName=function(e){return this.titleCase(Cu[e].replace(/_/g," "))},e.resourcesArraysDiff=function(e,n){return e.filter(function(e){return n.findIndex(function(n){return n.resource===e.resource})<0})},e.prepareResourcesNamesList=function(n){var t="";return n.forEach(function(n){return t+=e.prepareResourceName(n.resource)+", "}),(t=t.substr(0,t.length-2)).toLowerCase()},e.copyResourceArray=function(e){var n=[];return e.forEach(function(e){return n.push({resource:e.resource,amount:e.amount})}),n},e}(),wu=function(e){return e[e.GENERAL=0]="GENERAL",e[e.MILITARY=1]="MILITARY",e[e.SCIENCE=2]="SCIENCE",e[e.TECHNOLOGY=3]="TECHNOLOGY",e[e.AGRICULTURE=4]="AGRICULTURE",e}({}),Nu=function(e){return e[e.GAME=0]="GAME",e[e.LOG=1]="LOG",e[e.MODAL=2]="MODAL",e[e.RESOURCES=3]="RESOURCES",e[e.LAND=4]="LAND",e[e.RESEARCH=5]="RESEARCH",e[e.CRAFTING=6]="CRAFTING",e[e.RECIPE=7]="RECIPE",e[e.RELIGION=8]="RELIGION",e[e.WEATHER=9]="WEATHER",e[e.CALENDAR=10]="CALENDAR",e[e.EFFECTS=11]="EFFECTS",e[e.ARMY=12]="ARMY",e[e.HAPPINESS=13]="HAPPINESS",e[e.MANAGEMENT=14]="MANAGEMENT",e[e.ROYAL=15]="ROYAL",e[e.MARKET=16]="MARKET",e[e.VILLAGE=17]="VILLAGE",e[e.FORT=18]="FORT",e[e.FOREST=19]="FOREST",e[e.FIELD=20]="FIELD",e[e.MOUNTAINS=21]="MOUNTAINS",e[e.SEA=22]="SEA",e[e.PLATEAU=23]="PLATEAU",e[e.BUILDING_FACTORY=24]="BUILDING_FACTORY",e[e.SERIALIZER=25]="SERIALIZER",e[e.KONGREGATE=26]="KONGREGATE",e[e.ID=27]="ID",e[e.TICKER=28]="TICKER",e}({}),Pu=function(e){return e[e.PLANK=0]="PLANK",e[e.CUT_STONE=1]="CUT_STONE",e[e.FABRIC=2]="FABRIC",e[e.LEATHER=3]="LEATHER",e[e.GOLD=4]="GOLD",e[e.SILVER=5]="SILVER",e[e.COPPER=6]="COPPER",e[e.TIN=7]="TIN",e[e.BRONZE=8]="BRONZE",e[e.IRON=9]="IRON",e[e.STEEL=10]="STEEL",e[e.FUEL_BRUSHWOOD=11]="FUEL_BRUSHWOOD",e[e.FUEL_LOG=12]="FUEL_LOG",e[e.FUEL_COAL=13]="FUEL_COAL",e[e.STONE_AXE=14]="STONE_AXE",e[e.STONE_PICKAXE=15]="STONE_PICKAXE",e[e.STONE_SHOVEL=16]="STONE_SHOVEL",e[e.STONE_SPEAR=17]="STONE_SPEAR",e[e.STONE_HAMMER=18]="STONE_HAMMER",e[e.BOW=19]="BOW",e[e.CLOTHES_FUR=20]="CLOTHES_FUR",e[e.CLOTHES_FABRIC=21]="CLOTHES_FABRIC",e[e.SWORD=22]="SWORD",e[e.WOODEN_SHIELD=23]="WOODEN_SHIELD",e[e.LEATHER_ARMOR=24]="LEATHER_ARMOR",e[e.LIGHT_ARMOR=25]="LIGHT_ARMOR",e[e.HEAVY_ARMOR=26]="HEAVY_ARMOR",e[e.COOKED_MEAT=27]="COOKED_MEAT",e[e.FLOUR=28]="FLOUR",e[e.BREAD=29]="BREAD",e[e.VEGETABLE_SOUP_BERRY=30]="VEGETABLE_SOUP_BERRY",e[e.VEGETABLE_SOUP_MUSHROOM=31]="VEGETABLE_SOUP_MUSHROOM",e[e.MEAT_SOUP=32]="MEAT_SOUP",e}({}),Du=function(){function e(e,n,t,l,r){void 0===r&&(r=0),this.name=e,this.building=n,this.effect=t,this.duration=l,this.buff=r}return e.prototype.isPermanent=function(){return this.duration<0},e.prototype.isRoyal=function(){return-10===this.duration},e.prototype.isWonder=function(){return-9===this.duration},e.prototype.isBuff=function(){return this.buff>0},e}();!function(e){e.ALL="all",e.BUILD="build-modal",e.IMPORT="import-modal",e.EXPORT="export-modal",e.HARD_RESET="hard-reset-modal",e.INFO="info-modal",e.OPTIONS="options-modal",e.CONFIRM="confirm-modal",e.INPUT="input-modal",e.ROYAL="royal-modal",e.MISSION="mission-modal",e.MARKET="market-modal",e.WORK_MANAGEMENT="work-management-modal",e.TUTORIAL="tutorial-modal",e.CHANGELOG="changelog-modal",e.RESOURCE_MANAGEMENT="resource-management-modal",e.RECIPE="recipe-modal"}(mu||(mu={}));var ku=function(){function e(){}return e.randomElement=function(e,n){void 0===n&&(n=10);var t=0;if(e.forEach(function(e){return t+=e.chance}),t>100){console.warn("Random roll for params with sum of chances over 100");var l=100/t;e.forEach(function(e){return e.chance=Math.floor(e.chance*l)})}for(var r=this.randomBetween(1,100*n),i=0,o=0,u=e;o<u.length;o++){var s=u[o];if(i+1<=r&&i+s.chance*n>=r)return s.item;i+=s.chance*n}for(;t>100;)for(var a=0,c=e;a<c.length;a++){if(s=c[a],i+1<=r&&i+s.chance*n>=r)return s.item;i+=s.chance*n}return null},e.chance=function(e){return Math.random()<e},e.randomExcept=function(e,n){var t=e.filter(function(e){return n.indexOf(e)<0});return t[this.randomBetween(0,t.length-1)]},e.randomBetween=function(e,n){return Math.floor(Math.random()*(n-e+1))+e},e.randomWeightedExcept=function(e,n){var t=e.filter(function(e){return n.indexOf(e.item)<0}),l=0;t.forEach(function(e){return l+=e.chance});for(var r=this.randomBetween(1,l),i=0,o=0;o<t.length;o++){if(i<r&&r<=i+t[o].chance)return t[o].item;i+=t[o].chance}},e.ngInjectableDef=ve({factory:function(){return new e},token:e,providedIn:"root"}),e}(),Mu=function(e){return e[e.VILLAGE=0]="VILLAGE",e[e.FORT=1]="FORT",e[e.FOREST=2]="FOREST",e[e.FIELD=3]="FIELD",e[e.MOUNTAINS=4]="MOUNTAINS",e[e.SEA=5]="SEA",e[e.PLATEAU=6]="PLATEAU",e}({}),xu=function(){function e(e,n,t,l){this.name=e,this.troop=n,this.effect=t,this.duration=l}return e.prototype.isPermanent=function(){return this.duration<0},e.prototype.isRoyal=function(){return-10===this.duration},e.prototype.isWonder=function(){return-9===this.duration},e}(),Lu=function(e){return e[e.SUN=0]="SUN",e[e.CLOUDS=1]="CLOUDS",e[e.RAIN=2]="RAIN",e[e.WIND=3]="WIND",e[e.STORM=4]="STORM",e[e.SNOW=5]="SNOW",e}({}),Fu=function(e){return e[e.DEV=0]="DEV",e[e.V1_0_0=1]="V1_0_0",e}({}),Uu=function(){function e(e,n,t){this.name=e,this.effect=n,this.duration=t}return e.prototype.isPermanent=function(){return this.duration<0},e.prototype.isRoyal=function(){return-10===this.duration},e.prototype.isWonder=function(){return-9===this.duration},e}(),Hu=function(){function e(){}return e.PERMANENT=-1,e.WONDER=-9,e.ROYAL=-10,e}(),Gu={production:!0,gameName:"Villager Kings",saveName:"VillagerKingsSave",versionString:"1.0.11",saveVersion:Fu.V1_0_0},Bu="Welcome to <b>"+Gu.gameName+"</b><br>You start as a leader of a small village.<br>Will you manage to lead your people to greatness? <br>First thing you need to focus on is to make sure that your people will survive winter.<br>You will need to increase food production and have some wood to heat houses.<br>Remember that winter is not the only threat to your people!<br>Good luck!",Vu=[{VERSION:"v1.0.1",MESSAGE:['<ul><li>Fixed barracks not unlocking after being researched</li><li>Fixed weather research description</li><li>Shrine and Church will be available earlier</li><li>"New year!" message will appear on day 1 and only after researching calendar</li><li>Shrine and Church will now log when they become available</li><li>Fixed wrapper boxes sizes</li><li>Pit mine research description changed</li><li>Reduced building button and dropdown font size to prevent overflow</li><li>Aligned building icon and text</li><li>Reduced amount of fur produced by hunter</li><li>Fixed merchant buying items for 0 coins</li><li>Reduced required research points for forestry</li><li>Last tutorial step no longer has "skip tutorial" button</li><li>Available nutrition metric doesn\'t include reserved food</li><li>Researching animals require hay</li><li>Fixed geologist last find description</li></ul>']},{VERSION:"v1.0.2",MESSAGE:["<ul><li>Fixed building line icons alignment</li><li>Refactored dev message window into changelog</li><li>Reduced low happiness severity</li><li>Doubled starting food amount</li><li>Buffed berry and mushroom find chance</li></ul>"]},{VERSION:"v1.0.3",MESSAGE:["<ul><li><b>Famine is now satisfied with 50% less food</b></li><li><b>Refactored happiness so that multiple things combined cannot bring it down to 0</b></li><li>It is now possible to pause the game through settings dropdown menu</li><li>The game is now paused during tutorials</li><li>Reduced brushwood cost of stone tools and bow.</li><li>Buildings are now taking action in random order instead of left to right top to bottom</li><li>Tavern decrease happiness over 75% when no alcohol is available</li><li>Changed Tavern building lines to show amount of alcohols</li><li>Added option to produce fish food for fishers</li><li>Added option to boost school of fish with fish food</li><li>Fixed new school of fish not spawning</li><li>Fixed new sharks not spawning</li><li>Added new Research for Fish Food</li><li>Added tutorials for Field, Mountains, Sea and Plateau regions</li><li>Added close button for royal points modal</li><li>Greatly increased animal taming chance <br>(Taming is supposed to be slow, as this only to be used to kick-start pastures. Another method is to buy animals on the market)</li><li>Fixed animal amount calculation errors resulting in negative, doubled<br> or over the limit amount of animals</li><li>Added notification to market tab if there is no marketplace</li><li>Changed marketplace bribe button text</li></ul>"]},{VERSION:"v1.0.4",MESSAGE:["<ul><li><b>Fixed demolishing huts and houses</b></li><li>Fixed Crafting tab display for Chrome and Edge</li><li>Increased gatherer chance for finding stone and brushwood</li><li>Added several warning for low forest size</li><li>Increased minimal yearly forest growth</li></ul>"]},{VERSION:"v1.0.5",MESSAGE:['<ul><li><b>Fixed wrong army mission being started</b></li><li><b>Fixed Food nutrition value displaying NaN and blocking anything that requires FOOD nutrition as cost</b></li><li>Fixed "Spy" mission not displaying enemy power</li><li>Church will now unlock Religion tab when built</li><li>Urban Planning no longer require house to be researched</li></ul>']},{VERSION:"v1.0.6",MESSAGE:["Bug fixes:<ul><li><b>Fixed King of the People royal perk not allowing to build houses</b></li><li><b>Fixed royal perks not processing unlocked research correctly</b></li><li><b>Fixed research permanent effects not to persist through soft reset and abdication</b></li><li><b>Fixed geologist not finding gold, silver and iron</b></li><li><b>Fixed Tavern not appearing after being researched</b></li><li><b>Fixed fields, orchards and pastures splitting value</b></li><li><b>Fixed 'Blessing' prayer and excluded a lot of buildings that would not benefit from it</b></li><li><b>Fixed changing religion to be player action</b></li></ul>Performance:<ul><li>Improved performance for reloading region<br>It will still take regular time on the first visit but after that I got about 3 times better loading time for region with 36 buildings</li></ul>Other:<ul><li>Improved butcher meat transporting. It no longer requires whole warehouse space to be available at once</li><li>Increased geologist deposits find chances</li><li>Renamed 'Entertainment' research to 'Alcohol'</li><li>Housing buildings show when they are using fuel</li><li>Added research tab warning when no workshop is set to research</li><li>Added button to show finished research projects</li><li>Increased average meat production for hunter lodge</li><li>Improved scrolling in modals</li><li>Urban planning research points requirement greatly reduced</li><li>Improved some prayers descriptions</li><li>Nature effects are now logged when added</li><li>Decreased recruitment times for all troops</li><li>Fishers huts will now work during rain (apparently fish can catch even better during rain due to more oxygen in the water)</li></ul>"]},{VERSION:"v1.0.7",MESSAGE:["Bug fixes:<ul><li><b>Fixed forecast period saving. It will no longer go back to one day after researching weather and reloading game</b></li><li><b>Fixed pastures filling only one butcher. Pasture will now give animal to butcher with shortest queue</b></li><li><b>Fixed demolishing buildings other than housing buildings</b></li><li><b>Fixed work management output to start with maxed output resources</b></li><li><b>Fixed mission not returning troops</b></li><li><b>Fixed possibility to build next wonder without researching</b></li><li><b>Lost wonder effects will be restored on abdication or soft reset</b></li><li><b>Fixed harvesting from field in summer</b></li><li><b>Fixed buying animal filling entire pasture</b></li><li><b>Fixed animals produce filling warehouse when chores went over 50</b></li></ul>Other:<ul><li><b>Changed expedition to take longer and cost more but give more land and kill less troops</b></li><li><b>Improved building filtering and made it persistent</b></li><li><b>Increased game size by about 25%</b></li><li><b>Arrange doesn't require to be researched anymore</b></li><li><b>New option to change visual progress bars to text progress value</b></li><li>Workshops show what is being researched</li><li>Geologist is no longer limited by mountains size</li><li>Slightly improved Royal perks descriptions</li><li>Added special warning for demolishing housing building when there is no enough free space to move all occupants to</li><li>Increased amount of fuel crafted from coal and heating power of coal</li><li>Pit mine now warn that it requires 20 deposits</li><li>Slightly corrected research display</li><li>Changes for Royal Points granting events</li><li>Disabled Ascension temple until it will be fixed</li></ul>Information:<ul><li>Drag and drop arrange seems to work on some computers and not on others. I have tested on a PC and laptop with the same operating system and browser version and it does work on PC and not on laptop.</li></ul>"]},{VERSION:"v1.0.8",MESSAGE:['Bug fixes:<ul><li><b>Fixed workshop display that caused buildings to display in two columns</b></li><li><b>Changes regarding workshop logic that might fix locking issue</b></li><li><b>Fixed "R Quarry" and "R Smithy" prerequisites display</b></li><li><b>Fixed incorrect animals moving when splitting or demolishing pasture</b></li><li><b>Gatherers won\'t lock on warehouse. Locking resource will be removed</b></li><li><b>Fixed field and orchard harvest scale display</b></li><li><b>Fixed bread recipe wheat cost to 2 instead of 1</b></li><li><b>Work management will fire worker after finishing work cycle if rules are not satisfied</b></li><li><b>Fixed and enabled Ascension Temple (requires conditions to be met to become available)</b></li><li><b>Fixed Missions again</b></li><li><b>Fixed some metals recipes not adding after research and smithy built</b></li><li><b>Fixed smithy demolishing</b></li></ul>Other:<ul><li><b>Added tooltips to resources in resource tab.<br>Consumable resources display nutrition<br>Fuel resources display heating power</b></li><li><b>Resources tooltip will now show what building/action used each resource in previous 30 days.</b></li><li>Increased hay consumption of animals by 30%</li><li>Increased apples nutrition value</li><li>Increased apples harvest multiplier</li><li>Increased great lighthouse royal points temporary (to make up for no effects)</li></ul>']},{VERSION:"v1.0.9",MESSAGE:["New features<ul><li><b>Implemented new extended reserver that can define different limit for most of the consumers</b></li></ul>Bug fixes:<ul><li><b>Fixed building Smithy required to research tech allowing to build it</b></li><li><b>Fixed limited buildings allowed to build over the limit</b></li><li><b>Fixed missions finishing without calculating outcome</b></li><li><b>Most probably fixed overscrolling from game to kongregate window</b></li></ul>Other:<ul><li>Doubled iron deposit find chance</li><li>Ore deposits found limited at 50 each</li><li>Troops multiplier now shows multiplied required resources in tooltip. If you cannot afford - troop turns grey</li><li>Slightly increased happiness reduction from half food rations</li><li>Buildings number limit is now added to build window</li><li>Decreased brushwood fuel cost and increased brushwood energy</li></ul>"]},{VERSION:"v1.0.10",MESSAGE:["New features<ul><li><b>Added more production details to buildings in build window</b></li><li><b>Added Manufacture building for specialised crafting</b></li><li><b>Added Specialised production research to unlock manufacture</b></li></ul>Bug fixes:<ul><li><b>Fixed and improved building power modifier display to include permanent effects and correctly use weather multiplier</b></li><li><b>Fixed pastures limits updating to resources tab</b></li><li><b>Fixed wooden tower starting with decreased health</b></li><li><b>Fixed metallurgy to add bronze recipe</b></li><li><b>Fixed orchard harvest calculation when in autumn</b></li><li><b>Fixed bug with New King buff lasting 0 days after reset or abdication</b></li></ul>Other:<ul><li>Changed work management option description (management tab) and added description message after researching Human Resources</li><li>Extended some buildings descriptions</li><li>Increased fur production from hunters</li></ul>"]},{VERSION:"v1.0.11",MESSAGE:["New features<ul><li><b>Forest management improved and moved into management tab</b></li></ul>Bug fixes:<ul><li><b>Fixed some wonders add effects after each reset</b></li><li><b>Fixed Forester not returning land when demolished</b></li></ul>Other:<ul><li>Added option to show only current view tutorial</li><li>Added buttons to hire/fire workers in all currently viewed buildings</li><li>Removed autofill '1' for crafting amount input</li><li>Increased expeditions cost</li><li>Decreased chicken and pigs breeding speed </li><li>Forestry research now requires management to be researched</li><li>Added Stonehenge effect for manufacture</li><li>Changed wonders to reapply missing effects on soft reset or abdication</li><li>Changed some missions times</li><li>Added troops list to mission in progress</li></ul>"]}],Wu={name:"New King",building:bu.ALL,effect:100,duration:90},ju=750,zu=360,Yu={START_HAPPINESS:15,FOOD_HAPPINESS_FLOOR:0,FOOD_HAPPINESS_LIMIT:20,HEAT_HAPPINESS_FLOOR:10,HEAT_HAPPINESS_LIMIT:50,CLOTHES_HAPPINESS_FLOOR:35,CLOTHES_HAPPINESS_LIMIT:75,ALCOHOL_HAPPINESS_FLOOR:75,ALCOHOL_HAPPINESS_LIMIT:100},Ku=[{text:"Welcome to this quick tutorial that will guide you through basic controls of Villager Kings",position:{width:"250px",top:"180px",left:"275px"}},{text:"To the left you can see navigation menu that will allow you to browse tabs representing different aspects of your village",position:{width:"200px",top:"50px",left:"100px"}},{text:"Right now we are in the village tab and using top menu you can navigate between village regions",position:{width:"200px",top:"65px",left:"130px"}},{text:"In the middle of the village region you can see your buildings. There are many different types of buildings. <br> Some of them produce items, others consume them to produce more advanced items. <br>Currently in your village there are only Huts which produce workers for your village.<br>Housing buildings cannot be stopped and require constant supply of food, fuel (in winter) and clothes",position:{width:"400px",top:"180px",left:"200px"}},{text:"Above your buildings you can see most important metrics for current region.<br>For village those are:<br>1. Population of your village/max population<br>2. Free workers that can be assigned to work<br>3. Size of your empty land where you can build<br>4. Size of your whole village (all regions)<br>5. Your people happiness, which will influence their productivity<br>",position:{width:"400px",top:"115px",left:"100px"}},{text:"That's all here for now let's move into the Forest region<br> using top menu and continue the tutorial there",position:{width:"400px",top:"180px",left:"200px"}}],qu=[{text:"In the forest you have two working buildings<br>Logger's hut that cuts forest trees and produces logs<br>and Gatherer that collects various resources when wandering in the forest. Gatherer has two operating modes<br>Worker working here can either focus on looking for food or useful and sometimes rare resources",position:{width:"400px",top:"240px",left:"200px"}},{text:"There are two icons on both sides of building name.<br>To the left there is details icon. If you hover over it, <br>a tooltip with more technical details regarding a building will popup (not active during tutorial),<br>To the right you can see a cog icon which allows you to stop and start production by hiring or firing worker",position:{width:"450px",top:"160px",left:"150px"}},{text:"Above buildings you can see 'Build' and 'Demolish' buttons.<br>First one opens a window with all buildings you can build in this region.<br>In future you will discover many more types of building to build.<br>Second one allows you to set buildings to be demolished by free worker<br>You will receive small portion of resources used to build demolished building",position:{width:"450px",top:"100px",left:"50px"}},{text:"Now let's order your people to build more gatherers and continue to the 'Resources' tab in the left menu",position:{width:"250px",top:"180px",left:"275px"}}],$u=[{text:"Field region has many buildings with different mechanics than other regions.<br>Field, Orchard and Pasture buildings require Farm with workers <br>who will work on planting, sowing, harvesting and tending to animals.<br><br>Fields yearly cycle starts in spring, after you have selected what type of crops should be planted,<br>your Farm workers will start plowing the land and then sowing selected crop.<br>After sowing is completed your crops will start to grow until Autumn.<br>On autumn all crops will stop growing and will be ready for harvest performed by Farm workers.<br>If there are any crops not harvested by the beginning of winter they will wither and will be lost.<br><br>",position:{width:"400px",top:"150px",left:"200px"}},{text:"Orchards are a bit different. Those also need to be plowed and plants need to be planted,<br>after that they keep growing for several years without any work input.<br>Once they matured they will fruit every year with only harvest work required.<br><br>",position:{width:"400px",top:"150px",left:"200px"}},{text:"Pastures allow animals breeding. They require work input for the whole year (chores)<br>and animals require Hay to eat during winter.<br>If no hay is available animals can starve to death.<br> They eat grass and other natural food during other seasons.<br>Some animals produce animals products like eggs and milk which add to your food supplies.<br>All animals can be butchered for meat when butcher building is built.<br>Once animals are researched Hunters can try to tame animals for which there is empty pasture space.",position:{width:"400px",top:"150px",left:"200px"}}],Qu=[{text:"Most mountains buildings require mountains space instead of free land.<br>This mountain area is finite and after the building deplete resources it can be demolished to add empty land instead of back to mountains.<br><br>To gain more mountains areas you will need to run expeditions or conquer enemies (Army).<br><br>After geologist is unlocked and built he will start looking for ores deposits which is very slow process.<br>Once 20 deposits of certain resource has been found Pit Mine can be used to mine it.",position:{width:"400px",top:"150px",left:"200px"}}],Zu=[{text:"In this special area Wonder buildings can be constructed.<br>These require much more resources and much more work to be completed.<br>Each Wonder building adds permanent buff corresponding to it's nature.<br>Wonder building also allows you to abdicate what performs soft reset and additionally award you with Royal Points to spend on Royal perks.<br>Wonder building and it's buff persist through soft resets and abdications.",position:{width:"400px",top:"150px",left:"200px"}}],Xu=[{text:"By the sea fishers can catch fish from the sea.<br>Each school of fish has certain number of fish that slowly breed.<br>If you catch all fish, new school of fish should appear in some time.<br><br>Fishers can also produce fish food which will boost fish breeding rate.",position:{width:"400px",top:"150px",left:"200px"}}],Ju=[{text:"In this tab you can browse all of the resources that you have discovered<br>Next to the resource icon there is current amount that you have and storage limit for that resource.<br><br>Storage can be extended by building warehouses in the village",position:{width:"400px",top:"150px",left:"200px"}},{text:"To the right there are two additional icons present for each resource<br>First one allows you to set amount that will be reserved and no automated action can use them<br>Player initiated action can on the other hand use reserved resources<br>(keep in mind that some actions like for example invasion can still reduce resources below reserved amount!)<br><br>Second icon toggles which resources should be highlighted in the game header",position:{width:"400px",top:"150px",left:"200px"}},{text:"In the header you can highlight up to 7 resources to know their amounts in any tab of the game",position:{width:"400px",top:"30px",left:"30px"}},{text:"That's all for the basics.<br>To really start progressing you should work towards building Workshop in the village which will open new opportunities<br>",position:{width:"400px",top:"150px",left:"200px"}}],es={ALLOW_FUR_CLOTHES:!0,SHOW_FOOD_NUTRITION:!1,FOOD_RATIONS:2,CLOTHES_RATIONS:1,ALCOHOL_RATIONS:1},ns={START_LAND:1e3,START_FOREST:1500,START_MOUNTAINS:200,FOREST_GROW_PERCENTAGE:.05,MINIMAL_FOREST_GROWTH:100,FOREST_GROW_TICKS:10*zu},ts={getBuilding:function(e){var n=this.getBuildings().find(function(n){return n[0]===bu[e]});if(n)return n[1];console.warn("Invalid building: "+Au.prepareBuildingName(e))},getBuildings:function(){return Object.entries(this.VILLAGE).concat(Object.entries(this.FORT)).concat(Object.entries(this.FOREST)).concat(Object.entries(this.FIELD)).concat(Object.entries(this.MOUNTAINS)).concat(Object.entries(this.PLATEAU)).concat(Object.entries(this.SEA))},DEMOLITION_RETURN:.3,FOREST:{LOGGERS_HUT:{BASE_POWER:5,SIZE:2,COMPLEXITY:5,DESCRIPTION:"Loggers cut trees in the forest",COST:[{resource:vu.LOG,amount:10}],WEATHER:[{weather:Lu.RAIN,effect:-50},{weather:Lu.STORM,effect:-100}],BUFF:{name:"New tools",effect:5,duration:360,cost:[{resource:vu.STONE_AXE,amount:5}]},UPGRADES:[{BASE_POWER:7.5,COMPLEXITY:10,PREREQUISITES:[Eu.URBAN_PLANNING],COST:[{resource:vu.PLANK,amount:10},{resource:vu.CUT_STONE,amount:10},{resource:vu.STONE_HAMMER,amount:5},{resource:vu.STONE_AXE,amount:5}]},{BASE_POWER:10,COMPLEXITY:20,PREREQUISITES:[],COST:[{resource:vu.PLANK,amount:20},{resource:vu.CUT_STONE,amount:20},{resource:vu.COPPER,amount:10},{resource:vu.STONE_AXE,amount:10}]}]},FORESTER:{BASE_POWER:10,SIZE:5,COMPLEXITY:10,DESCRIPTION:"Forester can plant new trees and control natural growth of the forest",COST:[{resource:vu.LOG,amount:10},{resource:vu.STONE_SHOVEL,amount:2}],WEATHER:[{weather:Lu.RAIN,effect:-100},{weather:Lu.STORM,effect:-100}],BUFF:{name:"New tools",effect:5,duration:360,cost:[{resource:vu.STONE_SHOVEL,amount:5}]}},SAWMILL:{BASE_POWER:3,SIZE:5,COMPLEXITY:15,DESCRIPTION:"Sawmill cut logs into planks",COST:[{resource:vu.LOG,amount:20},{resource:vu.CUT_STONE,amount:10}],TEXT:"cutting",INPUT_RESOURCES:[{resource:vu.LOG,amount:3}],OUTPUT_RESOURCES:[{resource:vu.PLANK,amount:1}]},GATHERER:{BASE_POWER:10,SIZE:5,COMPLEXITY:3,DESCRIPTION:"Gatherer can find all kinds of useful things in the forest.<br>They can look for either food or resources",COST:[{resource:vu.LOG,amount:10},{resource:vu.STONE,amount:5}],WEATHER:[{weather:Lu.RAIN,effect:-75},{weather:Lu.STORM,effect:-100}],CAN_PRODUCE:[vu.BERRY,vu.MUSHROOM,vu.WHEAT,vu.BRUSHWOOD,vu.STONE,vu.LOG,vu.COPPER],BERRY_CHANCE:30,MUSHROOM_CHANCE:30,WHEAT_CHANCE:3,BRUSHWOOD_CHANCE:35,STONE_CHANCE:15,LOG_CHANCE:5,COPPER_CHANCE:.5},HUNTER_LODGE:{BASE_POWER:2,SIZE:5,COMPLEXITY:8,DESCRIPTION:"Hunts animals for meat and fur",COST:[{resource:vu.LOG,amount:15},{resource:vu.PLANK,amount:5},{resource:vu.BOW,amount:1}],WEATHER:[{weather:Lu.RAIN,effect:-100},{weather:Lu.STORM,effect:-100}],CAN_PRODUCE:[vu.MEAT,vu.FUR],BUFF:{name:"New tools",effect:5,duration:360,cost:[{resource:vu.BOW,amount:5}]}},TANNERY:{BASE_POWER:5,SIZE:5,COMPLEXITY:5,DESCRIPTION:"Turns furs into leather",COST:[{resource:vu.LOG,amount:20},{resource:vu.PLANK,amount:10}],TEXT:"tanning",INPUT_RESOURCES:[{resource:vu.FUR,amount:1}],OUTPUT_RESOURCES:[{resource:vu.LEATHER,amount:1}]}},MOUNTAINS:{QUARRY:{BASE_POWER:5,SIZE:20,COMPLEXITY:15,DESCRIPTION:"Cuts stone out of mountains",COST:[{resource:vu.LOG,amount:40},{resource:vu.PLANK,amount:20}],WEATHER:[{weather:Lu.RAIN,effect:-100},{weather:Lu.STORM,effect:-100}],CAN_PRODUCE:[vu.STONE],BUFF:{name:"New tools",effect:5,duration:360,cost:[{resource:vu.STONE_PICKAXE,amount:5}]}},GEOLOGIST:{BASE_POWER:1,SIZE:5,COMPLEXITY:10,DESCRIPTION:"Looks for useful rocks",COST:[{resource:vu.LOG,amount:10},{resource:vu.STONE,amount:5}],WEATHER:[{weather:Lu.RAIN,effect:-100},{weather:Lu.STORM,effect:-100}],COAL_CHANCE:20,GOLD_CHANCE:4,SILVER_CHANCE:8,COPPER_CHANCE:10,TIN_CHANCE:6,IRON_CHANCE:4},PIT_MINE:{BASE_POWER:10,SIZE:20,COMPLEXITY:15,DESCRIPTION:"Allows workers to mine ores",COST:[{resource:vu.LOG,amount:60},{resource:vu.STONE_PICKAXE,amount:5}],WEATHER:[{weather:Lu.RAIN,effect:-100},{weather:Lu.STORM,effect:-100}],BUFF:{name:"New tools",effect:5,duration:360,cost:[{resource:vu.STONE_PICKAXE,amount:5},{resource:vu.STONE_SHOVEL,amount:5}]}},STONEMASON:{BASE_POWER:3,SIZE:5,COMPLEXITY:10,DESCRIPTION:"Shapes stones for building",COST:[{resource:vu.LOG,amount:10},{resource:vu.STONE,amount:10}],TEXT:"cutting",INPUT_RESOURCES:[{resource:vu.STONE,amount:3}],OUTPUT_RESOURCES:[{resource:vu.CUT_STONE,amount:1}]},SMITHY:{BASE_POWER:5,SIZE:10,COMPLEXITY:20,DESCRIPTION:"Provides furnace for smelting ore and metal items",COST:[{resource:vu.LOG,amount:20},{resource:vu.PLANK,amount:10},{resource:vu.CUT_STONE,amount:10},{resource:vu.COPPER,amount:5}],RECIPES:[{recipe:Pu.COPPER,prerequisite:Eu.SMITHY},{recipe:Pu.TIN,prerequisite:Eu.SMITHY},{recipe:Pu.BRONZE,prerequisite:Eu.BRONZE},{recipe:Pu.GOLD,prerequisite:Eu.ADVANCED_ORE_PROCESSING},{recipe:Pu.SILVER,prerequisite:Eu.ADVANCED_ORE_PROCESSING},{recipe:Pu.IRON,prerequisite:Eu.IRON},{recipe:Pu.STEEL,prerequisite:Eu.STEEL},{recipe:Pu.SWORD,prerequisite:Eu.SMITHY},{recipe:Pu.LIGHT_ARMOR,prerequisite:Eu.SMITHY},{recipe:Pu.HEAVY_ARMOR,prerequisite:Eu.SMITHY}]},MINT:{BASE_POWER:5,SIZE:5,COMPLEXITY:10,DESCRIPTION:"Produces coins from gold",COST:[{resource:vu.LOG,amount:20},{resource:vu.PLANK,amount:10},{resource:vu.CUT_STONE,amount:10},{resource:vu.BRONZE,amount:10}],TEXT:"minting",INPUT_RESOURCES:[{resource:vu.GOLD,amount:1}],OUTPUT_RESOURCES:[{resource:vu.COINS,amount:100}]}},VILLAGE:{HUT:{BASE_POWER:.5,SIZE:2,COMPLEXITY:5,DESCRIPTION:"Very primitive shelter but keeps rain and cold away. Houses 2 villagers",COST:[{resource:vu.FOOD,amount:100},{resource:vu.LOG,amount:10},{resource:vu.BRUSHWOOD,amount:10}],MAX_OCCUPANTS:2},HOUSE:{BASE_POWER:.7,SIZE:2,COMPLEXITY:15,DESCRIPTION:"Bigger and more durable shelter. Houses 6 villagers",COST:[{resource:vu.FOOD,amount:100},{resource:vu.LOG,amount:20},{resource:vu.PLANK,amount:20}],MAX_OCCUPANTS:6},WAREHOUSE:{BASE_POWER:0,SIZE:20,COMPLEXITY:10,DESCRIPTION:"Stores selected type of resources",COST:[{resource:vu.LOG,amount:20},{resource:vu.PLANK,amount:10},{resource:vu.CUT_STONE,amount:5}]},WORKSHOP:{BASE_POWER:5,RESEARCH_POWER:1,CRAFTING_POWER:1.5,SIZE:5,COMPLEXITY:15,DESCRIPTION:"At the workshop workers can do research projects or build complex things",COST:[{resource:vu.LOG,amount:20},{resource:vu.BRUSHWOOD,amount:10}]},MANUFACTURE:{BASE_POWER:7,CRAFTING_POWER:1.5,SIZE:5,COMPLEXITY:20,DESCRIPTION:"Manufacture specialises in crafting one recipe and it takes time to change production but it produces slightly faster than workshop",COST:[{resource:vu.LOG,amount:30},{resource:vu.PLANK,amount:20},{resource:vu.CUT_STONE,amount:20},{resource:vu.STONE_HAMMER,amount:5}],WEATHER:[{weather:Lu.STORM,effect:-100}]},MARKETPLACE:{BASE_POWER:1,SIZE:20,COMPLEXITY:5,DESCRIPTION:"Place for trading with other villages",COST:[{resource:vu.LOG,amount:10},{resource:vu.PLANK,amount:10},{resource:vu.STONE,amount:20}]},TAVERN:{BASE_POWER:1,SIZE:10,COMPLEXITY:20,DESCRIPTION:"Meeting place where villagers can relax and cheer up<br>Consume wine and beer but increase happiness",COST:[{resource:vu.LOG,amount:10},{resource:vu.PLANK,amount:20},{resource:vu.CUT_STONE,amount:20},{resource:vu.BRUSHWOOD,amount:20}],WEATHER:[{weather:Lu.RAIN,effect:25},{weather:Lu.STORM,effect:25}]},BAKERY:{BASE_POWER:10,SIZE:5,COMPLEXITY:10,DESCRIPTION:"Bakes bread from flour",COST:[{resource:vu.LOG,amount:10},{resource:vu.PLANK,amount:10},{resource:vu.STONE,amount:10},{resource:vu.CUT_STONE,amount:10}],TEXT:"baking",INPUT_RESOURCES:[{resource:vu.FLOUR,amount:2},{resource:vu.FUEL,amount:1}],OUTPUT_RESOURCES:[{resource:vu.BREAD,amount:1}],BUFF:{name:"Bread oven",effect:5,duration:360,cost:[{resource:vu.CUT_STONE,amount:20}]}},TAILOR:{BASE_POWER:5,SIZE:5,COMPLEXITY:10,DESCRIPTION:"Produces clothes from fabric",COST:[{resource:vu.LOG,amount:10},{resource:vu.PLANK,amount:10}],TEXT:"sewing",INPUT_RESOURCES:[{resource:vu.FABRIC,amount:3}],OUTPUT_RESOURCES:[{resource:vu.CLOTHES,amount:1}]},SHRINE:{BASE_POWER:1,POPULATION:8,SIZE:2,COMPLEXITY:8,DESCRIPTION:"Place for prayer and offerings",COST:[{resource:vu.LOG,amount:5},{resource:vu.CUT_STONE,amount:5},{resource:vu.VEGETABLE_SOUP,amount:5},{resource:vu.MEAT_SOUP,amount:5}]},CHURCH:{BASE_POWER:1,POPULATION:20,SIZE:10,COMPLEXITY:10,DESCRIPTION:"Place of prayer and contemplation",COST:[{resource:vu.LOG,amount:40},{resource:vu.CUT_STONE,amount:30}],BUFF:{name:"Offering",effect:5,duration:360,cost:[{resource:vu.COINS,amount:200}]}}},FORT:{BARRACKS:{BASE_POWER:0,SIZE:10,COMPLEXITY:10,DESCRIPTION:"Housing for troops",COST:[{resource:vu.LOG,amount:20},{resource:vu.CUT_STONE,amount:10}]},TRAINING_SQUARE:{BASE_POWER:10,SIZE:10,COMPLEXITY:3,DESCRIPTION:"Place for training recruits",COST:[{resource:vu.STONE,amount:40}],WEATHER:[{weather:Lu.RAIN,effect:-50},{weather:Lu.STORM,effect:-100}]},STOCKADE:{BASE_POWER:10,SIZE:50,COMPLEXITY:100,DESCRIPTION:"Protective wall around the village to protect against attackers",COST:[{resource:vu.LOG,amount:100},{resource:vu.STONE,amount:10}],DEFENSE:50,DURABILITY:50},WOODEN_TOWER:{BASE_POWER:10,SIZE:10,COMPLEXITY:30,DESCRIPTION:" Provide passive defense power",COST:[{resource:vu.LOG,amount:40},{resource:vu.PLANK,amount:20}],DEFENSE:10,DURABILITY:50},STONE_TOWER:{BASE_POWER:10,SIZE:10,COMPLEXITY:30,DESCRIPTION:"Provide passive defense power, more durable than wooden tower",COST:[{resource:vu.CUT_STONE,amount:40},{resource:vu.PLANK,amount:20}],DEFENSE:20,DURABILITY:100},STASH:{BASE_POWER:1,SIZE:10,COMPLEXITY:30,DESCRIPTION:"Complex hidden tunnels allow us to hide some resources in case of invasion",COST:[{resource:vu.LOG,amount:30},{resource:vu.CUT_STONE,amount:10},{resource:vu.PLANK,amount:10},{resource:vu.STONE_PICKAXE,amount:5}]}},FIELD:{FARM:{BASE_POWER:20,SIZE:15,COMPLEXITY:10,DESCRIPTION:"Farm allows workers to work on fields, orchard and pastures",COST:[{resource:vu.LOG,amount:40},{resource:vu.PLANK,amount:20},{resource:vu.STONE,amount:10}],WEATHER:[{weather:Lu.RAIN,effect:-50},{weather:Lu.STORM,effect:-100}],BUFF:{name:"New tools",effect:5,duration:360,cost:[{resource:vu.STONE_SHOVEL,amount:5}]}},WINDMILL:{BASE_POWER:5,SIZE:10,COMPLEXITY:15,DESCRIPTION:"Windmill turns wheat into flour",COST:[{resource:vu.LOG,amount:30},{resource:vu.PLANK,amount:10},{resource:vu.FABRIC,amount:20}],TEXT:"milling",INPUT_RESOURCES:[{resource:vu.WHEAT,amount:1}],OUTPUT_RESOURCES:[{resource:vu.FLOUR,amount:1}],WEATHER:[{weather:Lu.WIND,effect:50},{weather:Lu.STORM,effect:-100}]},COTTON_MILL:{BASE_POWER:5,SIZE:5,COMPLEXITY:10,DESCRIPTION:"Spins cotton into fabric",COST:[{resource:vu.LOG,amount:10},{resource:vu.PLANK,amount:10}],TEXT:"spinning",INPUT_RESOURCES:[{resource:vu.COTTON,amount:2}],OUTPUT_RESOURCES:[{resource:vu.FABRIC,amount:1}]},BREWERY:{BASE_POWER:1,SIZE:15,COMPLEXITY:20,DESCRIPTION:"Brews delicious beer",COST:[{resource:vu.LOG,amount:30},{resource:vu.PLANK,amount:30},{resource:vu.COPPER,amount:10}],TEXT:"brewing",INPUT_RESOURCES:[{resource:vu.BARLEY,amount:10},{resource:vu.HOP,amount:5},{resource:vu.FUEL,amount:3}],OUTPUT_RESOURCES:[{resource:vu.BEER,amount:10}]},FIELD:{BASE_POWER:1,SIZE:50,COMPLEXITY:1,DESCRIPTION:"Various crops can be grown here (Farm required to work on fields)",COST:[{resource:vu.STONE,amount:4}],WEATHER:[{weather:Lu.RAIN,effect:50},{weather:Lu.SUN,effect:50},{weather:Lu.CLOUDS,effect:-25}]},BUTCHER:{BASE_POWER:5,SIZE:15,COMPLEXITY:10,DESCRIPTION:"Turns animals from pastures into meat",COST:[{resource:vu.LOG,amount:15},{resource:vu.PLANK,amount:10},{resource:vu.CUT_STONE,amount:5}]},ORCHARD:{BASE_POWER:1,SIZE:50,COMPLEXITY:1,DESCRIPTION:"Various fruit trees and bushes can be grown here (Farm required to work on orchards)",COST:[{resource:vu.LOG,amount:5}],WEATHER:[{weather:Lu.RAIN,effect:50},{weather:Lu.SUN,effect:50},{weather:Lu.CLOUDS,effect:-25}]},PASTURE:{BASE_POWER:1,SIZE:50,COMPLEXITY:3,DESCRIPTION:"Many animals can be grown here (Farm required to work on pastures)",COST:[{resource:vu.LOG,amount:10},{resource:vu.PLANK,amount:20}]},WINERY:{BASE_POWER:1,SIZE:30,COMPLEXITY:10,DESCRIPTION:"Extracts and ferments grape juices",COST:[{resource:vu.LOG,amount:20},{resource:vu.PLANK,amount:20},{resource:vu.COPPER,amount:10}],TEXT:"fermenting",INPUT_RESOURCES:[{resource:vu.GRAPE,amount:35}],OUTPUT_RESOURCES:[{resource:vu.WINE,amount:8}]}},SEA:{FISHERS_HUT:{BASE_POWER:5,SIZE:2,COMPLEXITY:5,DESCRIPTION:"Fishers catch fish in the sea",COST:[{resource:vu.LOG,amount:10},{resource:vu.PLANK,amount:5},{resource:vu.COPPER,amount:1}],WEATHER:[{weather:Lu.RAIN,effect:25},{weather:Lu.STORM,effect:-100},{weather:Lu.WIND,effect:25}]},SCHOOL_OF_FISH:{FISH_FOOD_DAYS:60,BREED_CHANCE:400,BREED_AMOUNT:10,SPLIT_THRESHOLD:400,SPLIT_CHANCE:100,NEW_SCHOOL_CHANCE:100,NEW_SCHOOL_SIZE:50},SHARKS:{FEED_CHANCE:15,FEED_AMOUNT:1,BREED_THRESHOLD:500,BREED_CHANCE:100,DIE_THRESHOLD:300,DIE_CHANCE:100}},PLATEAU:{STONEHENGE:{BASE_POWER:3,SIZE:50,COMPLEXITY:0,DESCRIPTION:"Huge rocks mark place for old rituals and scientific experiments",COST:[],STAGES:[{cost:[{resource:vu.STONE_SHOVEL,amount:10},{resource:vu.STONE_PICKAXE,amount:10},{resource:vu.STONE_HAMMER,amount:10}],progress:10},{cost:[{resource:vu.LOG,amount:50},{resource:vu.PLANK,amount:50}],progress:10},{cost:[{resource:vu.LOG,amount:50},{resource:vu.PLANK,amount:50}],progress:10},{cost:[{resource:vu.STONE,amount:100}],progress:10},{cost:[{resource:vu.CUT_STONE,amount:100}],progress:10},{cost:[{resource:vu.STONE,amount:100}],progress:10},{cost:[{resource:vu.CUT_STONE,amount:100}],progress:10},{cost:[{resource:vu.LOG,amount:50},{resource:vu.PLANK,amount:50}],progress:10},{cost:[{resource:vu.STONE,amount:100}],progress:10},{cost:[{resource:vu.CUT_STONE,amount:100}],progress:10}],BUILDING_EFFECTS:[{building:bu.WORKSHOP,value:20},{building:bu.MANUFACTURE,value:10}],RP:20},PYRAMID:{BASE_POWER:3,SIZE:100,COMPLEXITY:0,DESCRIPTION:"Although it's just \"putting one rock on the other\", our construction worker's skill will be put to the test with this huge project",COST:[],STAGES:[{cost:[{resource:vu.STONE_SHOVEL,amount:10},{resource:vu.STONE_PICKAXE,amount:10},{resource:vu.STONE_HAMMER,amount:10}],progress:10},{cost:[{resource:vu.CUT_STONE,amount:50}],progress:10},{cost:[{resource:vu.LOG,amount:50},{resource:vu.PLANK,amount:50}],progress:10},{cost:[{resource:vu.CUT_STONE,amount:100}],progress:10},{cost:[{resource:vu.LOG,amount:50},{resource:vu.PLANK,amount:50}],progress:10},{cost:[{resource:vu.CUT_STONE,amount:100}],progress:10},{cost:[{resource:vu.LOG,amount:50},{resource:vu.PLANK,amount:50}],progress:10},{cost:[{resource:vu.CUT_STONE,amount:100}],progress:5},{cost:[{resource:vu.CUT_STONE,amount:100}],progress:5},{cost:[{resource:vu.LOG,amount:50},{resource:vu.PLANK,amount:50}],progress:10},{cost:[{resource:vu.CUT_STONE,amount:100}],progress:5},{cost:[{resource:vu.CUT_STONE,amount:100}],progress:5}],BUILDING_EFFECTS:[{building:bu.CONSTRUCTION,value:10},{building:bu.DECONSTRUCTION,value:10}],RP:20},HANGING_GARDEN:{BASE_POWER:3,SIZE:30,COMPLEXITY:0,DESCRIPTION:"With all those plants that cover entire buildings we truly became masters of flora",COST:[],STAGES:[{cost:[{resource:vu.STONE_SHOVEL,amount:10},{resource:vu.STONE_HAMMER,amount:10},{resource:vu.STONE_AXE,amount:10}],progress:10},{cost:[{resource:vu.LOG,amount:100},{resource:vu.PLANK,amount:50}],progress:10},{cost:[{resource:vu.BERRY,amount:75},{resource:vu.MUSHROOM,amount:75}],progress:10},{cost:[{resource:vu.STONE_SHOVEL,amount:20}],progress:10},{cost:[{resource:vu.WHEAT,amount:100}],progress:10},{cost:[{resource:vu.BARLEY,amount:100}],progress:10},{cost:[{resource:vu.APPLE,amount:100}],progress:10},{cost:[{resource:vu.HOP,amount:100}],progress:10},{cost:[{resource:vu.COTTON,amount:100}],progress:10},{cost:[{resource:vu.GRAPE,amount:100}],progress:10}],BUILDING_EFFECTS:[{building:bu.FARM,value:15}],RP:20},COLOSSUS:{BASE_POWER:3,SIZE:50,COMPLEXITY:0,DESCRIPTION:"This giant statue watches over our troops both during defense and attack",COST:[],STAGES:[{cost:[{resource:vu.STONE_SHOVEL,amount:10},{resource:vu.STONE_PICKAXE,amount:10},{resource:vu.STONE_HAMMER,amount:10}],progress:10},{cost:[{resource:vu.LOG,amount:100},{resource:vu.PLANK,amount:50}],progress:10},{cost:[{resource:vu.STONE,amount:75},{resource:vu.CUT_STONE,amount:75}],progress:10},{cost:[{resource:vu.LOG,amount:100},{resource:vu.PLANK,amount:50}],progress:10},{cost:[{resource:vu.STONE,amount:75},{resource:vu.CUT_STONE,amount:75}],progress:10},{cost:[{resource:vu.LOG,amount:100},{resource:vu.PLANK,amount:50}],progress:10},{cost:[{resource:vu.STONE,amount:75},{resource:vu.CUT_STONE,amount:75}],progress:10},{cost:[{resource:vu.LOG,amount:100},{resource:vu.PLANK,amount:50}],progress:10},{cost:[{resource:vu.STONE,amount:75},{resource:vu.CUT_STONE,amount:75}],progress:10},{cost:[{resource:vu.COPPER,amount:100},{resource:vu.STONE_HAMMER,amount:20}],progress:10}],ARMY_EFFECTS:[{troop:Iu.ALL,value:15}],RP:20},UNDERGROUND_CITY:{BASE_POWER:3,SIZE:0,COMPLEXITY:0,DESCRIPTION:"After connecting empty mines tunnels and repurposing them we will create entire underground city",COST:[],STAGES:[{cost:[{resource:vu.STONE_SHOVEL,amount:10},{resource:vu.STONE_HAMMER,amount:10},{resource:vu.STONE_PICKAXE,amount:10}],progress:10},{cost:[{resource:vu.LOG,amount:100}],progress:10},{cost:[{resource:vu.STONE_SHOVEL,amount:20},{resource:vu.STONE_HAMMER,amount:20},{resource:vu.STONE_PICKAXE,amount:20}],progress:10},{cost:[{resource:vu.LOG,amount:100}],progress:10},{cost:[{resource:vu.STONE_SHOVEL,amount:20},{resource:vu.STONE_HAMMER,amount:20},{resource:vu.STONE_PICKAXE,amount:20}],progress:10},{cost:[{resource:vu.LOG,amount:100}],progress:10},{cost:[{resource:vu.STONE_SHOVEL,amount:20},{resource:vu.STONE_HAMMER,amount:20},{resource:vu.STONE_PICKAXE,amount:20}],progress:10},{cost:[{resource:vu.LOG,amount:100}],progress:10},{cost:[{resource:vu.STONE_SHOVEL,amount:20},{resource:vu.STONE_HAMMER,amount:20},{resource:vu.STONE_PICKAXE,amount:20}],progress:10},{cost:[{resource:vu.LOG,amount:50},{resource:vu.CUT_STONE,amount:50}],progress:10}],BUILDING_EFFECTS:[{building:bu.PIT_MINE,value:15},{building:bu.QUARRY,value:15},{building:bu.GEOLOGIST,value:15}],RP:20},GREAT_LIGHTHOUSE:{BASE_POWER:3,SIZE:50,COMPLEXITY:0,DESCRIPTION:"Light from this building can be seen as far as anyone would like to ever travel",COST:[],STAGES:[{cost:[{resource:vu.STONE_SHOVEL,amount:10},{resource:vu.STONE_HAMMER,amount:10},{resource:vu.STONE_PICKAXE,amount:10}],progress:10},{cost:[{resource:vu.LOG,amount:100},{resource:vu.PLANK,amount:50}],progress:10},{cost:[{resource:vu.CUT_STONE,amount:100}],progress:10},{cost:[{resource:vu.LOG,amount:100},{resource:vu.PLANK,amount:50}],progress:10},{cost:[{resource:vu.CUT_STONE,amount:100}],progress:10},{cost:[{resource:vu.LOG,amount:100},{resource:vu.PLANK,amount:50}],progress:10},{cost:[{resource:vu.CUT_STONE,amount:100}],progress:10},{cost:[{resource:vu.LOG,amount:100},{resource:vu.PLANK,amount:50}],progress:10},{cost:[{resource:vu.CUT_STONE,amount:100}],progress:10},{cost:[{resource:vu.PLANK,amount:100}],progress:10}],BUILDING_EFFECTS:[],RP:30},SACRED_GROVE:{BASE_POWER:3,SIZE:50,COMPLEXITY:0,DESCRIPTION:"Collection of the oldest and greatest forest fauna and flora in one place",COST:[],STAGES:[{cost:[{resource:vu.STONE_SHOVEL,amount:10},{resource:vu.STONE_HAMMER,amount:10},{resource:vu.STONE_PICKAXE,amount:10}],progress:10},{cost:[{resource:vu.BERRY,amount:100},{resource:vu.MUSHROOM,amount:100}],progress:10},{cost:[{resource:vu.CHICKEN,amount:20},{resource:vu.HORSE,amount:10},{resource:vu.PIG,amount:10}],progress:10},{cost:[{resource:vu.BERRY,amount:200},{resource:vu.MUSHROOM,amount:200}],progress:10},{cost:[{resource:vu.BERRY,amount:100},{resource:vu.MUSHROOM,amount:100}],progress:10},{cost:[{resource:vu.CHICKEN,amount:20},{resource:vu.HORSE,amount:10},{resource:vu.PIG,amount:10}],progress:10},{cost:[{resource:vu.BERRY,amount:100},{resource:vu.MUSHROOM,amount:100}],progress:10},{cost:[{resource:vu.CHICKEN,amount:20},{resource:vu.HORSE,amount:10},{resource:vu.PIG,amount:10}],progress:10},{cost:[{resource:vu.BERRY,amount:100},{resource:vu.MUSHROOM,amount:100}],progress:10},{cost:[{resource:vu.BERRY,amount:200},{resource:vu.MUSHROOM,amount:200}],progress:10}],BUILDING_EFFECTS:[{building:bu.FORESTER,value:10},{building:bu.LOGGERS_HUT,value:10},{building:bu.HUNTER_LODGE,value:10},{building:bu.GATHERER,value:10}],RP:20},ASCENSION_TEMPLE:{BASE_POWER:1.5,SIZE:100,COMPLEXITY:0,DESCRIPTION:"Mystical place where your fate will be determined",COST:[],STAGES:[{cost:[{resource:vu.STONE_SHOVEL,amount:10},{resource:vu.STONE_HAMMER,amount:10},{resource:vu.STONE_PICKAXE,amount:10}],progress:5},{cost:[{resource:vu.LOG,amount:100},{resource:vu.PLANK,amount:100}],progress:5},{cost:[{resource:vu.CUT_STONE,amount:100},{resource:vu.PLANK,amount:100}],progress:10},{cost:[{resource:vu.COPPER,amount:50},{resource:vu.IRON,amount:50},{resource:vu.STEEL,amount:50},{resource:vu.GOLD,amount:50},{resource:vu.SILVER,amount:50}],progress:10},{cost:[{resource:vu.CUT_STONE,amount:100},{resource:vu.PLANK,amount:100}],progress:10},{cost:[{resource:vu.COPPER,amount:50},{resource:vu.IRON,amount:50},{resource:vu.STEEL,amount:50},{resource:vu.GOLD,amount:50},{resource:vu.SILVER,amount:50}],progress:10},{cost:[{resource:vu.CUT_STONE,amount:100},{resource:vu.PLANK,amount:100}],progress:10},{cost:[{resource:vu.COPPER,amount:50},{resource:vu.IRON,amount:50},{resource:vu.STEEL,amount:50},{resource:vu.GOLD,amount:50},{resource:vu.SILVER,amount:50}],progress:10},{cost:[{resource:vu.CUT_STONE,amount:100},{resource:vu.PLANK,amount:100}],progress:10},{cost:[{resource:vu.COPPER,amount:50},{resource:vu.IRON,amount:50},{resource:vu.STEEL,amount:50},{resource:vu.GOLD,amount:50},{resource:vu.SILVER,amount:50}],progress:10},{cost:[{resource:vu.GOLD,amount:100},{resource:vu.SILVER,amount:100}],progress:10}],RP:50}},CONSTRUCTION_SITE:{BASE_POWER:10,SIZE:0,COMPLEXITY:0,DESCRIPTION:"",COST:[],WEATHER:[{weather:Lu.RAIN,effect:-75},{weather:Lu.STORM,effect:-100}]},DECONSTRUCTION_SITE:{BASE_POWER:10,SIZE:0,COMPLEXITY:0,DESCRIPTION:"",COST:[],WEATHER:[{weather:Lu.RAIN,effect:-75},{weather:Lu.STORM,effect:-100}]}},ls={getResource:function(e){var n=this.getResources().find(function(n){return n[0]===vu[e]});if(n)return n[1];console.warn("Invalid resource: "+Au.prepareResourceName(e))},getResourcesByType:function(e){var n=this.getResources().filter(function(n){return n[1].TYPES.includes(e)});if(n)return n;console.warn("Invalid resource type: "+Au.prepareResourceTypeName(e))},getResources:function(){return Object.entries(this.RAW).concat(Object.entries(this.PROCESSED)).concat(Object.entries(this.FOOD)).concat(Object.entries(this.TOOLS))},DEFAULT_AMOUNT:0,DEFAULT_LIMIT:50,DEFAULT_VISIBLE:!1,DEFAULT_HIGHLIGHTED:!1,RAW:{LOG:{TYPES:[_u.RAW,_u.FUEL],TRADE_VALUE:2,AMOUNT:20,LIMIT:100,VISIBLE:!0,HIGHLIGHTED:!0,FUEL_PRIORITY:3,POWER:10},BRUSHWOOD:{TYPES:[_u.RAW,_u.FUEL],TRADE_VALUE:1,AMOUNT:20,LIMIT:100,VISIBLE:!0,HIGHLIGHTED:!0,FUEL_PRIORITY:4,POWER:5.5},STONE:{TYPES:[_u.RAW],TRADE_VALUE:2,AMOUNT:20,LIMIT:100,VISIBLE:!0},FUR:{TYPES:[_u.RAW],TRADE_VALUE:3},WHEAT:{TYPES:[_u.RAW],TRADE_VALUE:2},BARLEY:{TYPES:[_u.RAW],TRADE_VALUE:3},HOP:{TYPES:[_u.RAW],TRADE_VALUE:3},COTTON:{TYPES:[_u.RAW],TRADE_VALUE:3},HAY:{TYPES:[_u.RAW],TRADE_VALUE:2},CHICKEN:{TYPES:[_u.RAW,_u.ANIMAL],LIMIT:0,SIZE:2,MEAT:4,REPRODUCTION_SPEED:6,BUTCHERING_DIFFICULTY:1,TRADE_VALUE:20},COW:{TYPES:[_u.RAW,_u.ANIMAL],LIMIT:0,SIZE:5,MEAT:30,REPRODUCTION_SPEED:1,BUTCHERING_DIFFICULTY:3,TRADE_VALUE:40},PIG:{TYPES:[_u.RAW,_u.ANIMAL],LIMIT:0,SIZE:3,MEAT:15,REPRODUCTION_SPEED:5,BUTCHERING_DIFFICULTY:3,TRADE_VALUE:30},HORSE:{TYPES:[_u.RAW,_u.ANIMAL],LIMIT:0,SIZE:5,MEAT:10,REPRODUCTION_SPEED:1,BUTCHERING_DIFFICULTY:5,TRADE_VALUE:50},COAL:{TYPES:[_u.RAW,_u.FUEL],TRADE_VALUE:8,FUEL_PRIORITY:2,POWER:50},GOLD_ORE:{TYPES:[_u.RAW],TRADE_VALUE:40},SILVER_ORE:{TYPES:[_u.RAW],TRADE_VALUE:20},COPPER_ORE:{TYPES:[_u.RAW],TRADE_VALUE:13},TIN_ORE:{TYPES:[_u.RAW],TRADE_VALUE:20},IRON_ORE:{TYPES:[_u.RAW],TRADE_VALUE:40}},PROCESSED:{PLANK:{TYPES:[_u.PROCESSED,_u.FUEL],TRADE_VALUE:3,VISIBLE:!0,FUEL_PRIORITY:5,POWER:20},CUT_STONE:{TYPES:[_u.PROCESSED],TRADE_VALUE:3},FUEL:{TYPES:[_u.PROCESSED,_u.FUEL],TRADE_VALUE:3,FUEL_PRIORITY:1,POWER:12.5},FLOUR:{TYPES:[_u.PROCESSED],TRADE_VALUE:3},FABRIC:{TYPES:[_u.PROCESSED],TRADE_VALUE:7},LEATHER:{TYPES:[_u.PROCESSED],TRADE_VALUE:4},COINS:{TYPES:[_u.PROCESSED],TRADE_VALUE:1,LIMIT:Number.MAX_SAFE_INTEGER},COPPER:{TYPES:[_u.PROCESSED],TRADE_VALUE:32},GOLD:{TYPES:[_u.PROCESSED],TRADE_VALUE:90},SILVER:{TYPES:[_u.PROCESSED],TRADE_VALUE:45},TIN:{TYPES:[_u.PROCESSED],TRADE_VALUE:45},BRONZE:{TYPES:[_u.PROCESSED],TRADE_VALUE:50},IRON:{TYPES:[_u.PROCESSED],TRADE_VALUE:135},STEEL:{TYPES:[_u.PROCESSED],TRADE_VALUE:190},FISH_FOOD:{TYPES:[_u.PROCESSED],TRADE_VALUE:5}},FOOD:{BERRY:{TYPES:[_u.FOOD,_u.CONSUMABLE],TRADE_VALUE:2,AMOUNT:50,LIMIT:100,VISIBLE:!0,HIGHLIGHTED:!0,POWER:50},MUSHROOM:{TYPES:[_u.FOOD,_u.CONSUMABLE],TRADE_VALUE:2,AMOUNT:50,LIMIT:100,VISIBLE:!0,HIGHLIGHTED:!0,POWER:50},FISH:{TYPES:[_u.FOOD,_u.CONSUMABLE],TRADE_VALUE:3,POWER:75},APPLE:{TYPES:[_u.FOOD,_u.CONSUMABLE],TRADE_VALUE:1,POWER:25},GRAPE:{TYPES:[_u.FOOD,_u.CONSUMABLE],TRADE_VALUE:1,POWER:20},BREAD:{TYPES:[_u.FOOD,_u.CONSUMABLE],TRADE_VALUE:10,POWER:300},MEAT:{TYPES:[_u.FOOD,_u.CONSUMABLE],TRADE_VALUE:3,POWER:75},EGG:{TYPES:[_u.FOOD,_u.CONSUMABLE],TRADE_VALUE:1,POWER:25},MILK:{TYPES:[_u.FOOD,_u.CONSUMABLE],TRADE_VALUE:1,POWER:25},COOKED_MEAT:{TYPES:[_u.FOOD,_u.CONSUMABLE],TRADE_VALUE:7,POWER:175},VEGETABLE_SOUP:{TYPES:[_u.FOOD,_u.CONSUMABLE],TRADE_VALUE:8,POWER:225},MEAT_SOUP:{TYPES:[_u.FOOD,_u.CONSUMABLE],TRADE_VALUE:8,POWER:225},BEER:{TYPES:[_u.FOOD],TRADE_VALUE:5},WINE:{TYPES:[_u.FOOD],TRADE_VALUE:5}},TOOLS:{CLOTHES:{TYPES:[_u.TOOLS],VISIBLE:!0,AMOUNT:10,TRADE_VALUE:25},BOW:{TYPES:[_u.TOOLS],TRADE_VALUE:35},STONE_PICKAXE:{TYPES:[_u.TOOLS],TRADE_VALUE:35},STONE_SHOVEL:{TYPES:[_u.TOOLS],TRADE_VALUE:35},STONE_AXE:{TYPES:[_u.TOOLS],TRADE_VALUE:35},STONE_SPEAR:{TYPES:[_u.TOOLS],TRADE_VALUE:35},STONE_HAMMER:{TYPES:[_u.TOOLS],TRADE_VALUE:35},SWORD:{TYPES:[_u.TOOLS],TRADE_VALUE:190},WOODEN_SHIELD:{TYPES:[_u.TOOLS],TRADE_VALUE:30},LEATHER_ARMOR:{TYPES:[_u.TOOLS],TRADE_VALUE:50},LIGHT_ARMOR:{TYPES:[_u.TOOLS],TRADE_VALUE:400},HEAVY_ARMOR:{TYPES:[_u.TOOLS],TRADE_VALUE:550}}},rs={getTroop:function(e){var n=Object.entries(this.TROOPS).find(function(n){return n[0]===Iu[e]});if(n)return n[1];console.warn("Invalid troop: "+Au.prepareTroopName(e))},TROOPS:{MILITIA:{RECRUIT_TIME:15,STRENGTH:1,DEFENSE:2,COST:[{resource:vu.FUR,amount:5}]},SPEARMAN:{RECRUIT_TIME:25,STRENGTH:5,DEFENSE:2,COST:[{resource:vu.STONE_SPEAR,amount:1},{resource:vu.LEATHER_ARMOR,amount:1}]},ARCHER:{RECRUIT_TIME:25,STRENGTH:3,DEFENSE:4,COST:[{resource:vu.BOW,amount:1},{resource:vu.LEATHER_ARMOR,amount:1}]},SWORDSMAN:{RECRUIT_TIME:35,STRENGTH:10,DEFENSE:4,COST:[{resource:vu.SWORD,amount:1},{resource:vu.WOODEN_SHIELD,amount:1},{resource:vu.LEATHER_ARMOR,amount:1}]}},MISSIONS:{TRAIN:{TIME:10,DESCRIPTION:"Train your troops to temporary increase their power",REQUIRED_STRENGTH:10,REQUIRED_DEFENSE:10,COST:[{resource:vu.FOOD,amount:100},{resource:vu.COINS,amount:5}],FINISH:function(e,n,t){n.troops.forEach(function(n){e.getService(Nu.EFFECTS).addArmyEffect(new xu("Training",n[0].troop,5,10*n[1]),!0)})}},DEFEND:{TIME:30,DESCRIPTION:"Protect your land and reduce chance for being invaded",REQUIRED_STRENGTH:0,REQUIRED_DEFENSE:20,COST:[{resource:vu.FOOD,amount:100},{resource:vu.LOG,amount:10}],FINISH:function(e,n,t){e.getService(Nu.ARMY).decreaseInvasionThreat(n.squadDefense)}},SPY:{TIME:60,DESCRIPTION:"Try to find out military strength of the enemy",REQUIRED_STRENGTH:20,REQUIRED_DEFENSE:0,COST:[{resource:vu.FOOD,amount:100},{resource:vu.CLOTHES,amount:1}],FINISH:function(e,n,t){for(var l=e.getService(Nu.ARMY).generateArmyOfPower(t/10),r=function(){var t=e.getService(Nu.ARMY).getRandomTroop(l),r=e.getService(Nu.ARMY).getRandomTroop(n.troops),i=r.strength*e.getService(Nu.ARMY).getTroopEffectsMultiplier(r.troop)-t.defense,o=50;i>0?(o+=2*i)>90&&(o=90):(o-=2*i)<10&&(o=10),ku.chance(o/100)?(l.find(function(e){return e[0].troop===t.troop})[1]-=1,l=l.filter(function(e){return e[1]>0})):n.troops.find(function(e){return e[0].troop===r.troop})[1]-=1};l.length>0&&e.getService(Nu.ARMY).hasTroops(n.troops);)r();l.length>0?e.getService(Nu.LOG).log("Our spies have been discovered and killed"):e.getService(Nu.LOG).log("Our spies discovered that enemy power is: "+Math.floor(e.getService(Nu.ARMY).getEnemyPower()))}},DIVERSION:{TIME:30,DESCRIPTION:"We need to bring enemy power down",REQUIRED_STRENGTH:40,REQUIRED_DEFENSE:20,COST:[{resource:vu.FOOD,amount:100},{resource:vu.CLOTHES,amount:1},{resource:vu.FUEL,amount:2}],FINISH:function(e,n,t){for(var l=e.getService(Nu.ARMY).generateArmyOfPower(t/5),r=function(){var t=e.getService(Nu.ARMY).getRandomTroop(l),r=e.getService(Nu.ARMY).getRandomTroop(n.troops),i=r.strength*e.getService(Nu.ARMY).getTroopEffectsMultiplier(r.troop)-t.defense,o=50;i>0?(o+=2*i)>90&&(o=90):(o-=2*i)<10&&(o=10),ku.chance(o/100)?(l.find(function(e){return e[0].troop===t.troop})[1]-=1,l=l.filter(function(e){return e[1]>0})):n.troops.find(function(e){return e[0].troop===r.troop})[1]-=1};l.length>0&&e.getService(Nu.ARMY).hasTroops(n.troops);)r();l.length>0?e.getService(Nu.LOG).log("Our diversion party has been discovered and killed"):(e.getService(Nu.LOG).log("Our diversion worked"),e.getService(Nu.ARMY).reduceEnemyPower(t/10))}},PLUNDER:{TIME:40,DESCRIPTION:"Plunder your enemies",REQUIRED_STRENGTH:50,REQUIRED_DEFENSE:0,COST:[{resource:vu.FOOD,amount:100}],FINISH:function(e,n,t){for(var l=e.getService(Nu.ARMY).generateArmyOfPower(t/2),r=function(){var t=e.getService(Nu.ARMY).getRandomTroop(l),r=e.getService(Nu.ARMY).getRandomTroop(n.troops),i=r.strength*e.getService(Nu.ARMY).getTroopEffectsMultiplier(r.troop)-t.defense,o=50;i>0?(o+=2*i)>90&&(o=90):(o-=2*i)<10&&(o=10),ku.chance(o/100)?(l.find(function(e){return e[0].troop===t.troop})[1]-=1,l=l.filter(function(e){return e[1]>0})):n.troops.find(function(e){return e[0].troop===r.troop})[1]-=1};l.length>0&&e.getService(Nu.ARMY).hasTroops(n.troops);)r();if(l.length>0)e.getService(Nu.LOG).log("Our plunder party has been defeated");else{n.squadStrength=0,n.squadDefense=0,n.troops.forEach(function(t){n.squadStrength+=t[0].strength*t[1]*e.getService(Nu.ARMY).getTroopEffectsMultiplier(t[0].troop),n.squadDefense+=t[0].defense*t[1]*e.getService(Nu.ARMY).getTroopEffectsMultiplier(t[0].troop)});for(var i=e.getService(Nu.RESOURCES),o=20*n.squadStrength,u=new Map,s="Loot:<br>",a=Array.from(i.getResources().values()).filter(function(e){return e.isVisible()}).map(function(e){return{item:e.resource,chance:e.prioritise?10:1}});o>0;){var c,p=ku.randomWeightedExcept(a,[]),h=ls.getResource(p);c=ku.randomBetween(1,h.TRADE_VALUE<10?20:h.TRADE_VALUE<50?10:h.TRADE_VALUE<300?5:2),u.has(p)?u.set(p,u.get(p)+c):u.set(p,c),s+="&emsp;"+c+" "+Au.prepareResourceName(p)+"<br>",o-=c*h.TRADE_VALUE}e.getService(Nu.LOG).log(s),i.increaseResources(u,!0),e.getService(Nu.ARMY).reduceEnemyPower(n.squadStrength/4)}}},EXPEDITION:{TIME:180,DESCRIPTION:"Look for new land, other villages and treasures",REQUIRED_STRENGTH:25,REQUIRED_DEFENSE:25,COST:[{resource:vu.FOOD,amount:400},{resource:vu.CLOTHES,amount:2},{resource:vu.HORSE,amount:1}],FINISH:function(e,n,t){for(var l=3*(n.squadStrength+n.squadDefense),r=0,i=0,o=0;l>0;){var u=ku.randomBetween(1,3);1===u?r+=1:2===u?i+=1:3===u&&(o+=1),l-=1}var s="Discovered:<br>";r>0&&(e.getService(Nu.LAND).increaseLand(r,!0),s+="&emsp;"+r+" empty land<br>"),i>0&&(e.getService(Nu.LAND).increaseForest(i,!1),s+="&emsp;"+i+" forest<br>"),o>0&&(e.getService(Nu.LAND).increaseMountains(o),s+="&emsp;"+o+" mountains<br>"),e.getService(Nu.LOG).success(s),n.troops.forEach(function(e){return e[1]=Math.floor(.9*e[1])})}},CONQUER:{TIME:100,DESCRIPTION:"Conquer your enemies and claim their land",REQUIRED_STRENGTH:200,REQUIRED_DEFENSE:100,COST:[{resource:vu.FOOD,amount:200}],FINISH:function(e,n,t){for(var l=e.getService(Nu.ARMY).generateArmyOfPower(t),r=function(){var t=e.getService(Nu.ARMY).getRandomTroop(l),r=e.getService(Nu.ARMY).getRandomTroop(n.troops),i=r.strength*e.getService(Nu.ARMY).getTroopEffectsMultiplier(r.troop)-t.defense,o=50;i>0?(o+=2*i)>90&&(o=90):(o-=2*i)<10&&(o=10),ku.chance(o/100)?(l.find(function(e){return e[0].troop===t.troop})[1]-=1,l=l.filter(function(e){return e[1]>0})):n.troops.find(function(e){return e[0].troop===r.troop})[1]-=1};l.length>0&&e.getService(Nu.ARMY).hasTroops(n.troops);)r();if(l.length>0)e.getService(Nu.LOG).log("Our plunder party has been defeated");else{n.squadStrength=0,n.squadDefense=0,n.troops.forEach(function(t){n.squadStrength+=t[0].strength*t[1]*e.getService(Nu.ARMY).getTroopEffectsMultiplier(t[0].troop),n.squadDefense+=t[0].defense*t[1]*e.getService(Nu.ARMY).getTroopEffectsMultiplier(t[0].troop)});for(var i=n.squadStrength,o=0,u=0,s=0;i>0;){var a=ku.randomBetween(1,3);1===a?o+=1:2===a?u+=1:3===a&&(s+=1),i-=1}var c="Conquered:<br>";o>0&&(e.getService(Nu.LAND).increaseLand(o,!0),c+="&emsp;"+o+" empty land"),u>0&&(e.getService(Nu.LAND).increaseForest(u,!1),c+="&emsp;"+u+" forest"),s>0&&(e.getService(Nu.LAND).increaseMountains(s),c+="&emsp;"+s+" mountains"),e.getService(Nu.LOG).log(c),e.getService(Nu.ARMY).reduceEnemyPower(n.squadStrength)}}}}},is={getCrop:function(e){var n=this.getCrops().find(function(n){return n[0]===Cu[e]});if(n)return n[1];console.warn("Invalid crop: "+Au.prepareCropName(e))},getCrops:function(){return Object.entries(this.FIELD).concat(Object.entries(this.ORCHARD))},FIELD:{WHEAT:{CROP:Cu.WHEAT,GROWTH:20,YIELD_MULTIPLIER:2},BARLEY:{CROP:Cu.BARLEY,GROWTH:20,YIELD_MULTIPLIER:2,PREREQUISITE:Eu.BARLEY},HAY:{CROP:Cu.HAY,GROWTH:10,YIELD_MULTIPLIER:2},HOP:{CROP:Cu.HOP,GROWTH:20,YIELD_MULTIPLIER:2,PREREQUISITE:Eu.HOPS},COTTON:{CROP:Cu.COTTON,GROWTH:20,YIELD_MULTIPLIER:2,PREREQUISITE:Eu.COTTON}},ORCHARD:{BERRY:{CROP:Cu.BERRY,GROWTH:25,FRUITING:50,YIELD_MULTIPLIER:1},GRAPE:{CROP:Cu.GRAPE,GROWTH:50,FRUITING:50,YIELD_MULTIPLIER:1},APPLE:{CROP:Cu.APPLE,GROWTH:100,FRUITING:100,YIELD_MULTIPLIER:2}}},os={SCIENTIFIC_METHOD:{CATEGORY:wu.SCIENCE,COST:[],RESEARCH_POINT:5,DESCRIPTION:"Maybe there is something we don't know about yet?",PREREQUISITES:[],FINISH:function(e){e.getService(Nu.LOG).log("New research projects unlocked")}},FORESIGHT:{CATEGORY:wu.SCIENCE,COST:[],RESEARCH_POINT:20,DESCRIPTION:"If only we knew what we don't know",PREREQUISITES:[Su.SCIENTIFIC_METHOD],FINISH:function(e){e.getService(Nu.RESEARCH).increaseForesight(1),e.getService(Nu.LOG).log("Foresight level increased")}},MANAGEMENT:{CATEGORY:wu.GENERAL,COST:[],RESEARCH_POINT:30,DESCRIPTION:"Maybe we could make some hard decisions which could help us survive?",PREREQUISITES:[Su.FORESIGHT],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.MANAGEMENT),e.getService(Nu.LOG).log("Management tab unlocked")}},FISHING:{CATEGORY:wu.AGRICULTURE,COST:[{resource:vu.BERRY,amount:20}],RESEARCH_POINT:30,DESCRIPTION:"Could there be something edible in the water?",PREREQUISITES:[Su.SCIENTIFIC_METHOD],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.SEA),e.getService(Nu.LOG).log("Sea unlocked"),e.getService(Nu.GAME).enable(Eu.FISHERS_HUT),e.getService(Nu.LOG).log("Fisher's hut invented")}},FISH_FOOD:{CATEGORY:wu.AGRICULTURE,COST:[{resource:vu.WHEAT,amount:20}],RESEARCH_POINT:30,DESCRIPTION:"Is it possible to lure more fish?",PREREQUISITES:[Su.FISHING],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.FISH_FOOD),e.getService(Nu.RESOURCES).increaseResource(vu.FISH_FOOD,2,!0)}},ANIMALS:{CATEGORY:wu.AGRICULTURE,COST:[{resource:vu.HAY,amount:20}],RESEARCH_POINT:70,DESCRIPTION:"Is it possible to breed animals near farms?",PREREQUISITES:[Su.AGRICULTURE,Su.HUNTING],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.PASTURE),e.getService(Nu.LOG).log("Pastures invented"),e.getService(Nu.GAME).enable(Eu.BUTCHER),e.getService(Nu.LOG).log("Butcher invented")}},TRADE:{CATEGORY:wu.GENERAL,COST:[],RESEARCH_POINT:50,DESCRIPTION:"If others have resources we need maybe we could trade with them?",PREREQUISITES:[Su.MANAGEMENT],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.MARKETPLACE),e.getService(Nu.LOG).log("Marketplace invented"),e.getService(Nu.RESOURCES).makeVisible(vu.COINS)}},LEATHER:{CATEGORY:wu.TECHNOLOGY,COST:[{resource:vu.FUR,amount:20}],RESEARCH_POINT:50,DESCRIPTION:"Could we use dead animals fur in our advantage?",PREREQUISITES:[Su.HUNTING],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.TANNERY),e.getService(Nu.LOG).log("Tannery invented"),e.getService(Nu.RECIPE).enable(Pu.LEATHER)}},COTTON:{CATEGORY:wu.AGRICULTURE,COST:[],RESEARCH_POINT:50,DESCRIPTION:"Maybe we can plant cotton?",PREREQUISITES:[Su.AGRICULTURE],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.COTTON),e.getService(Nu.LOG).log("Cotton planting unlocked"),e.getService(Nu.RESOURCES).makeVisible(vu.COTTON)}},FABRIC:{CATEGORY:wu.TECHNOLOGY,COST:[{resource:vu.COTTON,amount:20}],RESEARCH_POINT:50,DESCRIPTION:"Could we make fabric using cotton?",PREREQUISITES:[Su.COTTON],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.COTTON_MILL),e.getService(Nu.LOG).log("Cotton mill invented"),e.getService(Nu.RECIPE).enable(Pu.FABRIC)}},TAILORING:{CATEGORY:wu.TECHNOLOGY,COST:[{resource:vu.FABRIC,amount:5},{resource:vu.FUR,amount:10}],RESEARCH_POINT:100,DESCRIPTION:"How can me make new clothes?",PREREQUISITES:[Su.FABRIC,Su.LEATHER],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.TAILOR),e.getService(Nu.LOG).log("Tailor invented"),e.getService(Nu.RECIPE).enable(Pu.CLOTHES_FABRIC),e.getService(Nu.RECIPE).enable(Pu.CLOTHES_FUR)}},ALCOHOL:{CATEGORY:wu.GENERAL,COST:[],RESEARCH_POINT:100,DESCRIPTION:"Would it boost our moods if we took some time to have fun??",PREREQUISITES:[Su.SCIENTIFIC_METHOD,Su.COOKING],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.ALCOHOL),e.getService(Nu.GAME).enable(Eu.TAVERN),e.getService(Nu.LOG).log("Tavern invented"),e.getService(Nu.GAME).enable(Eu.BREWERY),e.getService(Nu.LOG).log("Brewery invented"),e.getService(Nu.GAME).enable(Eu.WINERY),e.getService(Nu.LOG).log("Winery invented"),e.getService(Nu.GAME).enable(Eu.BARLEY),e.getService(Nu.LOG).log("Barley planting unlocked"),e.getService(Nu.GAME).enable(Eu.HOPS),e.getService(Nu.LOG).log("Hops planting unlocked")}},CALENDAR:{CATEGORY:wu.SCIENCE,COST:[{resource:vu.LOG,amount:10}],RESEARCH_POINT:30,DESCRIPTION:"Is there some pattern to seasons?",PREREQUISITES:[Su.SCIENTIFIC_METHOD],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.CALENDAR),e.getService(Nu.LOG).log("We are now able to track years and seasons")}},WEATHER:{CATEGORY:wu.SCIENCE,COST:[{resource:vu.LOG,amount:10},{resource:vu.STONE,amount:10},{resource:vu.PLANK,amount:10}],RESEARCH_POINT:50,DESCRIPTION:"Would it be good to know the weather in advance?",PREREQUISITES:[Su.FORESIGHT],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.WEATHER),e.getService(Nu.LOG).log("We now can predict weather"),e.getService(Nu.WEATHER).increaseForecastPeriod(4)}},AGRICULTURE:{CATEGORY:wu.AGRICULTURE,COST:[{resource:vu.LOG,amount:10},{resource:vu.BERRY,amount:20},{resource:vu.WHEAT,amount:20},{resource:vu.STONE_SHOVEL,amount:5}],RESEARCH_POINT:100,DESCRIPTION:"Why should we risk looking for food in the forest if we can grow it it the open?",PREREQUISITES:[Su.WEATHER,Su.CALENDAR,Su.STONE_SHOVEL],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.FIELD),e.getService(Nu.LOG).log("Field unlocked"),e.getService(Nu.GAME).enable(Eu.FARM),e.getService(Nu.LOG).log("Farm invented"),e.getService(Nu.RESOURCES).makeVisible(vu.WHEAT),e.getService(Nu.RESOURCES).makeVisible(vu.BARLEY),e.getService(Nu.RESOURCES).makeVisible(vu.HAY)}},BOW:{CATEGORY:wu.GENERAL,COST:[{resource:vu.LOG,amount:20},{resource:vu.BRUSHWOOD,amount:20}],RESEARCH_POINT:25,DESCRIPTION:"Could we kill without coming closer?",PREREQUISITES:[Su.SCIENTIFIC_METHOD],FINISH:function(e){e.getService(Nu.RECIPE).enable(Pu.BOW)}},HUNTING:{CATEGORY:wu.GENERAL,COST:[{resource:vu.LOG,amount:5},{resource:vu.BRUSHWOOD,amount:5},{resource:vu.STONE,amount:5},{resource:vu.BOW,amount:2}],RESEARCH_POINT:50,DESCRIPTION:"What if hunted became the hunter?",PREREQUISITES:[Su.BOW],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.HUNTER),e.getService(Nu.LOG).log("Hunter invented")}},FIRE:{CATEGORY:wu.TECHNOLOGY,COST:[{resource:vu.BRUSHWOOD,amount:20},{resource:vu.STONE,amount:2}],RESEARCH_POINT:30,DESCRIPTION:"Would it be useful if we could start fire on demand?",PREREQUISITES:[Su.SCIENTIFIC_METHOD],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.FIRE),e.getService(Nu.RECIPE).enable(Pu.FUEL_BRUSHWOOD)}},BIGGER_FIRE:{CATEGORY:wu.TECHNOLOGY,COST:[{resource:vu.LOG,amount:10},{resource:vu.STONE,amount:2}],RESEARCH_POINT:50,DESCRIPTION:"Could we make our fire bigger and last for longer?",PREREQUISITES:[Su.SCIENTIFIC_METHOD,Su.FIRE],FINISH:function(e){e.getService(Nu.RECIPE).enable(Pu.FUEL_LOG)}},COOKING:{CATEGORY:wu.GENERAL,COST:[{resource:vu.FUEL,amount:20},{resource:vu.BERRY,amount:20},{resource:vu.MUSHROOM,amount:20}],RESEARCH_POINT:30,DESCRIPTION:"What would happen if we heat up raw food?",PREREQUISITES:[Su.FIRE],FINISH:function(e){e.getService(Nu.RECIPE).enable(Pu.COOKED_MEAT),e.getService(Nu.RECIPE).enable(Pu.BREAD),e.getService(Nu.GAME).enable(Eu.BAKERY),e.getService(Nu.LOG).log("Bakery invented"),e.getService(Nu.RECIPE).enable(Pu.VEGETABLE_SOUP_BERRY),e.getService(Nu.RECIPE).enable(Pu.VEGETABLE_SOUP_MUSHROOM),e.getService(Nu.RECIPE).enable(Pu.MEAT_SOUP)}},MORTAR:{CATEGORY:wu.TECHNOLOGY,COST:[{resource:vu.STONE,amount:20}],RESEARCH_POINT:20,DESCRIPTION:"Would it be useful to ground things up?",PREREQUISITES:[Su.SCIENTIFIC_METHOD],FINISH:function(e){e.getService(Nu.RECIPE).enable(Pu.FLOUR)}},STONE_SPEAR:{CATEGORY:wu.MILITARY,COST:[{resource:vu.STONE,amount:10},{resource:vu.LOG,amount:5}],RESEARCH_POINT:25,DESCRIPTION:"We would have better chance of survival if we keep enemy at distance?",PREREQUISITES:[Su.SCIENTIFIC_METHOD],FINISH:function(e){e.getService(Nu.RECIPE).enable(Pu.STONE_SPEAR)}},STONE_AXE:{CATEGORY:wu.GENERAL,COST:[{resource:vu.STONE,amount:10},{resource:vu.LOG,amount:5}],RESEARCH_POINT:25,DESCRIPTION:"It's probably more effective to hit trees with sharp stone?",PREREQUISITES:[Su.SCIENTIFIC_METHOD],FINISH:function(e){e.getService(Nu.RECIPE).enable(Pu.STONE_AXE)}},STONE_PICKAXE:{CATEGORY:wu.GENERAL,COST:[{resource:vu.STONE,amount:10},{resource:vu.LOG,amount:5}],RESEARCH_POINT:25,DESCRIPTION:"Would stone win against stone?",PREREQUISITES:[Su.SCIENTIFIC_METHOD],FINISH:function(e){e.getService(Nu.RECIPE).enable(Pu.STONE_PICKAXE)}},STONE_HAMMER:{CATEGORY:wu.GENERAL,COST:[{resource:vu.STONE,amount:10},{resource:vu.LOG,amount:5}],RESEARCH_POINT:25,DESCRIPTION:"Can hitting with stone be easier?",PREREQUISITES:[Su.SCIENTIFIC_METHOD],FINISH:function(e){e.getService(Nu.RECIPE).enable(Pu.STONE_HAMMER)}},STONE_SHOVEL:{CATEGORY:wu.GENERAL,COST:[{resource:vu.STONE,amount:10},{resource:vu.LOG,amount:5}],RESEARCH_POINT:25,DESCRIPTION:"It should be better to get your stone dirty and not your hands?",PREREQUISITES:[Su.SCIENTIFIC_METHOD],FINISH:function(e){e.getService(Nu.RECIPE).enable(Pu.STONE_SHOVEL)}},MINING:{CATEGORY:wu.TECHNOLOGY,COST:[{resource:vu.LOG,amount:10},{resource:vu.STONE,amount:5},{resource:vu.STONE_PICKAXE,amount:1}],RESEARCH_POINT:50,DESCRIPTION:"If we dig deep enough maybe there is something nice?",PREREQUISITES:[Su.SCIENTIFIC_METHOD,Su.STONE_PICKAXE],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.MOUNTAINS),e.getService(Nu.LOG).log("Mountains unlocked")}},PROSPECTING_FOR_ORE:{CATEGORY:wu.TECHNOLOGY,COST:[{resource:vu.STONE_PICKAXE,amount:10}],RESEARCH_POINT:50,DESCRIPTION:"There must be something useful under all this dirt",PREREQUISITES:[Su.MINING],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.GEOLOGIST),e.getService(Nu.LOG).log("Geologist invented")}},ADVANCED_PROSPECTING:{CATEGORY:wu.TECHNOLOGY,COST:[{resource:vu.STONE_PICKAXE,amount:20}],RESEARCH_POINT:75,DESCRIPTION:"There must be something even more valuable under the ground?",PREREQUISITES:[Su.PROSPECTING_FOR_ORE],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.GOLD),e.getService(Nu.GAME).enable(Eu.SILVER)}},MASTER_PROSPECTING:{CATEGORY:wu.TECHNOLOGY,COST:[{resource:vu.STONE_PICKAXE,amount:40}],RESEARCH_POINT:100,DESCRIPTION:"Is there anything else to find?",PREREQUISITES:[Su.ADVANCED_PROSPECTING],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.IRON)}},PIT_MINE:{CATEGORY:wu.TECHNOLOGY,COST:[{resource:vu.STONE,amount:20},{resource:vu.LOG,amount:20},{resource:vu.STONE_PICKAXE,amount:10}],RESEARCH_POINT:100,DESCRIPTION:"Could we get precious resources from under the ground?",PREREQUISITES:[Su.PROSPECTING_FOR_ORE],FLAG_PREREQUISITES:[Eu.BUILT_QUARRY],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.PIT_MINE),e.getService(Nu.LOG).log("Pit mine invented"),e.getService(Nu.RECIPE).enable(Pu.FUEL_COAL)}},ORE_PROCESSING:{CATEGORY:wu.TECHNOLOGY,COST:[{resource:vu.CUT_STONE,amount:40},{resource:vu.STONE,amount:20},{resource:vu.STONE_HAMMER,amount:10},{resource:vu.COPPER_ORE,amount:20}],RESEARCH_POINT:100,DESCRIPTION:"What happens if we heat ore in fire?",PREREQUISITES:[Su.PROSPECTING_FOR_ORE],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.SMITHY),e.getService(Nu.LOG).log("Smithy invented")}},ADVANCED_ORE_PROCESSING:{CATEGORY:wu.TECHNOLOGY,COST:[{resource:vu.CUT_STONE,amount:40},{resource:vu.STONE,amount:20},{resource:vu.STONE_HAMMER,amount:5},{resource:vu.GOLD_ORE,amount:5},{resource:vu.SILVER_ORE,amount:5}],RESEARCH_POINT:150,DESCRIPTION:"What about heating other ores?",PREREQUISITES:[Su.ADVANCED_PROSPECTING,Su.ORE_PROCESSING],FLAG_PREREQUISITES:[Eu.BUILT_SMITHY],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.ADVANCED_ORE_PROCESSING),e.getService(Nu.GAME).isEnabled(Eu.BUILT_SMITHY)&&(e.getService(Nu.RECIPE).enable(Pu.GOLD),e.getService(Nu.RECIPE).enable(Pu.SILVER))}},MASTER_ORE_PROCESSING:{CATEGORY:wu.TECHNOLOGY,COST:[{resource:vu.CUT_STONE,amount:40},{resource:vu.STONE,amount:20},{resource:vu.STONE_HAMMER,amount:5},{resource:vu.IRON_ORE,amount:10}],RESEARCH_POINT:200,DESCRIPTION:"Can we smelt any ore we want?",PREREQUISITES:[Su.MASTER_PROSPECTING,Su.ADVANCED_ORE_PROCESSING],FLAG_PREREQUISITES:[Eu.BUILT_SMITHY],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.IRON),e.getService(Nu.GAME).isEnabled(Eu.BUILT_SMITHY)&&e.getService(Nu.RECIPE).enable(Pu.SILVER)}},METALLURGY:{CATEGORY:wu.TECHNOLOGY,COST:[{resource:vu.COPPER,amount:10},{resource:vu.TIN,amount:10}],RESEARCH_POINT:100,DESCRIPTION:"What would happen if we mix two metals?",PREREQUISITES:[Su.ORE_PROCESSING],FLAG_PREREQUISITES:[Eu.BUILT_SMITHY],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.BRONZE),e.getService(Nu.GAME).isEnabled(Eu.BUILT_SMITHY)&&e.getService(Nu.RECIPE).enable(Pu.BRONZE)}},ADVANCED_METALLURGY:{CATEGORY:wu.TECHNOLOGY,COST:[{resource:vu.IRON,amount:10},{resource:vu.COAL,amount:50}],RESEARCH_POINT:200,DESCRIPTION:"Could we mix iron with coal to make it stronger?",PREREQUISITES:[Su.MASTER_ORE_PROCESSING],FLAG_PREREQUISITES:[Eu.BUILT_SMITHY,Eu.IRON],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.STEEL),e.getService(Nu.GAME).isEnabled(Eu.BUILT_SMITHY)&&e.getService(Nu.RECIPE).enable(Pu.STEEL)}},COINS_MINTING:{CATEGORY:wu.TECHNOLOGY,COST:[{resource:vu.GOLD,amount:10},{resource:vu.SILVER,amount:20}],RESEARCH_POINT:100,DESCRIPTION:"Maybe we can make our own coins?",PREREQUISITES:[Su.ADVANCED_ORE_PROCESSING],FLAG_PREREQUISITES:[Eu.BUILT_SMITHY],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.MINT),e.getService(Nu.LOG).log("Mint invented")}},HOUSE:{CATEGORY:wu.TECHNOLOGY,COST:[{resource:vu.LOG,amount:50},{resource:vu.PLANK,amount:50}],RESEARCH_POINT:100,DESCRIPTION:"What if huts were bigger?",PREREQUISITES:[Su.SCIENTIFIC_METHOD,Su.STONE_HAMMER,Su.STONE_SHOVEL],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.HOUSE),e.getService(Nu.LOG).log("House invented")}},URBAN_PLANNING:{CATEGORY:wu.SCIENCE,COST:[],RESEARCH_POINT:50,DESCRIPTION:"Maybe we could rearrange buildings?",PREREQUISITES:[Su.MANAGEMENT,Su.MATHEMATICS],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.URBAN_PLANNING)}},WONDER_BUILDINGS:{CATEGORY:wu.GENERAL,COST:[],RESEARCH_POINT:300,DESCRIPTION:"What if we built something remarkable?",PREREQUISITES:[Su.HOUSE,Su.URBAN_PLANNING,Su.MATHEMATICS],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.PLATEAU),e.getService(Nu.LOG).log("Plateau unlocked")}},SAWMILL:{CATEGORY:wu.TECHNOLOGY,COST:[{resource:vu.LOG,amount:50},{resource:vu.PLANK,amount:10},{resource:vu.COPPER,amount:5}],RESEARCH_POINT:100,DESCRIPTION:"Is it possible to produce planks even faster?",PREREQUISITES:[Su.SCIENTIFIC_METHOD,Su.STONE_HAMMER,Su.STONE_AXE],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.SAWMILL),e.getService(Nu.LOG).log("Sawmill invented")}},WINDMILL:{CATEGORY:wu.TECHNOLOGY,COST:[{resource:vu.LOG,amount:50},{resource:vu.PLANK,amount:10},{resource:vu.COPPER,amount:5}],RESEARCH_POINT:100,DESCRIPTION:"Could we use wind to do hard work for us?",PREREQUISITES:[Su.AGRICULTURE,Su.MORTAR,Su.MATHEMATICS],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.WINDMILL),e.getService(Nu.LOG).log("Windmill invented")}},FORESTRY:{CATEGORY:wu.AGRICULTURE,COST:[{resource:vu.LOG,amount:20},{resource:vu.BRUSHWOOD,amount:20},{resource:vu.STONE_SHOVEL,amount:2}],RESEARCH_POINT:50,DESCRIPTION:"Is there any reason why trees grow out of dirt?",PREREQUISITES:[Su.SCIENTIFIC_METHOD,Su.MANAGEMENT,Su.STONE_SHOVEL],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.FORESTER),e.getService(Nu.LOG).log("Forester invented"),e.getService(Nu.LOG).log("Forest management unlocked")}},BARRACKS:{CATEGORY:wu.MILITARY,COST:[{resource:vu.LOG,amount:20},{resource:vu.PLANK,amount:20},{resource:vu.STONE_SPEAR,amount:5}],RESEARCH_POINT:100,DESCRIPTION:"How can we make those of us more aggressive less of a threat to others?",PREREQUISITES:[Su.SCIENTIFIC_METHOD,Su.CALENDAR,Su.STONE_SPEAR],FINISH:function(e){e.getService(Nu.GAME).isEnabled(Eu.FORT)||(e.getService(Nu.GAME).enable(Eu.FORT),e.getService(Nu.LOG).log("Fort unlocked")),e.getService(Nu.RECIPE).enable(Pu.WOODEN_SHIELD),e.getService(Nu.RECIPE).enable(Pu.LEATHER_ARMOR),e.getService(Nu.GAME).enable(Eu.BARRACKS),e.getService(Nu.LOG).log("Barracks invented")}},STASH:{CATEGORY:wu.MILITARY,COST:[{resource:vu.LOG,amount:20},{resource:vu.PLANK,amount:10}],RESEARCH_POINT:30,DESCRIPTION:"Can we hide our goods somewhere?",PREREQUISITES:[Su.FORESIGHT],FINISH:function(e){e.getService(Nu.GAME).isEnabled(Eu.FORT)||(e.getService(Nu.GAME).enable(Eu.FORT),e.getService(Nu.LOG).log("Fort unlocked")),e.getService(Nu.GAME).enable(Eu.STASH)}},WOODEN_DEFENCES:{CATEGORY:wu.MILITARY,COST:[{resource:vu.LOG,amount:50}],RESEARCH_POINT:100,DESCRIPTION:"Maybe we could use logs to defend ourselves?",PREREQUISITES:[Su.BARRACKS],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.STOCKADE),e.getService(Nu.LOG).log("Stockade invented"),e.getService(Nu.GAME).enable(Eu.WOODEN_TOWER),e.getService(Nu.LOG).log("Wooden tower invented")}},STONE_DEFENCES:{CATEGORY:wu.MILITARY,COST:[{resource:vu.STONE,amount:50},{resource:vu.CUT_STONE,amount:50}],RESEARCH_POINT:200,DESCRIPTION:"Maybe we could use stone to defend ourselves?",PREREQUISITES:[Su.WOODEN_DEFENCES],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.STONE_TOWER),e.getService(Nu.LOG).log("Stone tower invented")}},MATHEMATICS:{CATEGORY:wu.SCIENCE,COST:[{resource:vu.FOOD,amount:1e3}],RESEARCH_POINT:50,DESCRIPTION:"What if we calculate things first?",PREREQUISITES:[Su.FORESIGHT],FINISH:function(e){e.getService(Nu.EFFECTS).addBuildingEffect(new Du("Mathematics",bu.CONSTRUCTION,10,Hu.PERMANENT))}},FERTILIZER:{CATEGORY:wu.AGRICULTURE,COST:[{resource:vu.FOOD,amount:3e3}],RESEARCH_POINT:100,DESCRIPTION:"Could we reuse what animals produce?",PREREQUISITES:[Su.ANIMALS],FINISH:function(e){e.getService(Nu.EFFECTS).addBuildingEffect(new Du("Fertilizer",bu.FIELD,10,Hu.PERMANENT)),e.getService(Nu.EFFECTS).addBuildingEffect(new Du("Fertilizer",bu.ORCHARD,10,Hu.PERMANENT))}},PICKAXE_DESIGN:{CATEGORY:wu.TECHNOLOGY,COST:[{resource:vu.LOG,amount:10},{resource:vu.CUT_STONE,amount:10},{resource:vu.STONE_PICKAXE,amount:5}],RESEARCH_POINT:100,DESCRIPTION:"Maybe we could redesign our pickaxes?",PREREQUISITES:[Su.MINING],FINISH:function(e){e.getService(Nu.EFFECTS).addBuildingEffect(new Du("Pickaxe Design",bu.QUARRY,10,Hu.PERMANENT)),e.getService(Nu.EFFECTS).addBuildingEffect(new Du("Pickaxe Design",bu.PIT_MINE,10,Hu.PERMANENT)),e.getService(Nu.EFFECTS).addBuildingEffect(new Du("Pickaxe Design",bu.GEOLOGIST,10,Hu.PERMANENT))}},TRADE_ROUTES:{CATEGORY:wu.GENERAL,COST:[{resource:vu.COINS,amount:400}],RESEARCH_POINT:50,DESCRIPTION:"Is it possible to attract more merchants?",PREREQUISITES:[Su.TRADE,Su.MATHEMATICS],FINISH:function(e){e.getService(Nu.EFFECTS).addBuildingEffect(new Du("Trade Routes",bu.MARKETPLACE,15,Hu.PERMANENT))}},BUFF_PRODUCTION:{CATEGORY:wu.GENERAL,COST:[{resource:vu.STONE_AXE,amount:2},{resource:vu.STONE_SHOVEL,amount:2},{resource:vu.STONE_PICKAXE,amount:2},{resource:vu.STONE_HAMMER,amount:2}],RESEARCH_POINT:50,DESCRIPTION:"Would people work better if we give them better tools?",PREREQUISITES:[Su.MANAGEMENT],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.BUFFS),e.getService(Nu.LOG).log("Production buffs invented")}},HUMAN_RESOURCES:{CATEGORY:wu.GENERAL,COST:[{resource:vu.FOOD,amount:5e3}],RESEARCH_POINT:50,DESCRIPTION:"Maybe we can optimize work?",PREREQUISITES:[Su.MANAGEMENT],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.HUMAN_RESOURCES),e.getService(Nu.LOG).log("Automated work management available in management tab")}},SPECIALISED_PRODUCTION:{CATEGORY:wu.TECHNOLOGY,COST:[{resource:vu.FOOD,amount:5e3},{resource:vu.STONE_HAMMER,amount:20},{resource:vu.STONE_AXE,amount:20},{resource:vu.STONE_PICKAXE,amount:20},{resource:vu.STONE_SHOVEL,amount:20}],RESEARCH_POINT:50,DESCRIPTION:"Can we specialise in crafting one thing to do it better and faster?",PREREQUISITES:[Su.MANAGEMENT,Su.MATHEMATICS,Su.HUMAN_RESOURCES,Su.STONE_HAMMER,Su.STONE_AXE],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.SPECIALISED_PRODUCTION),e.getService(Nu.LOG).log("Manufacture invented")}}},us={START_QUEUE_SIZE:2,RECIPES:{PLANK:{RESOURCE:vu.PLANK,AMOUNT:1,COST:[{resource:vu.LOG,amount:5}],CRAFTING:5},CUT_STONE:{RESOURCE:vu.CUT_STONE,AMOUNT:1,COST:[{resource:vu.STONE,amount:5}],CRAFTING:10},LEATHER:{RESOURCE:vu.LEATHER,AMOUNT:1,COST:[{resource:vu.FUR,amount:2}],CRAFTING:10},STONE_AXE:{RESOURCE:vu.STONE_AXE,AMOUNT:1,COST:[{resource:vu.BRUSHWOOD,amount:1},{resource:vu.LOG,amount:2},{resource:vu.STONE,amount:5}],CRAFTING:15},STONE_PICKAXE:{RESOURCE:vu.STONE_PICKAXE,AMOUNT:1,COST:[{resource:vu.BRUSHWOOD,amount:1},{resource:vu.LOG,amount:2},{resource:vu.STONE,amount:5}],CRAFTING:15},STONE_SHOVEL:{RESOURCE:vu.STONE_SHOVEL,AMOUNT:1,COST:[{resource:vu.BRUSHWOOD,amount:1},{resource:vu.LOG,amount:2},{resource:vu.STONE,amount:5}],CRAFTING:15},STONE_SPEAR:{RESOURCE:vu.STONE_SPEAR,AMOUNT:1,COST:[{resource:vu.BRUSHWOOD,amount:1},{resource:vu.LOG,amount:2},{resource:vu.STONE,amount:5}],CRAFTING:15},STONE_HAMMER:{RESOURCE:vu.STONE_HAMMER,AMOUNT:1,COST:[{resource:vu.BRUSHWOOD,amount:1},{resource:vu.LOG,amount:2},{resource:vu.STONE,amount:5}],CRAFTING:15},BOW:{RESOURCE:vu.BOW,AMOUNT:1,COST:[{resource:vu.BRUSHWOOD,amount:5},{resource:vu.LOG,amount:10}],CRAFTING:15},SWORD:{RESOURCE:vu.SWORD,AMOUNT:1,COST:[{resource:vu.COPPER,amount:5},{resource:vu.LOG,amount:1},{resource:vu.FUEL,amount:5}],CRAFTING:20},WOODEN_SHIELD:{RESOURCE:vu.WOODEN_SHIELD,AMOUNT:1,COST:[{resource:vu.PLANK,amount:5},{resource:vu.LOG,amount:2},{resource:vu.LEATHER,amount:1}],CRAFTING:20},LEATHER_ARMOR:{RESOURCE:vu.LEATHER_ARMOR,AMOUNT:1,COST:[{resource:vu.LEATHER,amount:10}],CRAFTING:20},LIGHT_ARMOR:{RESOURCE:vu.LIGHT_ARMOR,AMOUNT:1,COST:[{resource:vu.COPPER,amount:10},{resource:vu.LEATHER,amount:5},{resource:vu.FUEL,amount:10}],CRAFTING:25},HEAVY_ARMOR:{RESOURCE:vu.HEAVY_ARMOR,AMOUNT:1,COST:[{resource:vu.COPPER,amount:15},{resource:vu.LEATHER,amount:5},{resource:vu.FUEL,amount:10}],CRAFTING:30},FUEL_BRUSHWOOD:{RESOURCE:vu.FUEL,AMOUNT:2,COST:[{resource:vu.BRUSHWOOD,amount:4}],CRAFTING:3},FUEL_LOG:{RESOURCE:vu.FUEL,AMOUNT:4,COST:[{resource:vu.LOG,amount:4}],CRAFTING:5},FUEL_COAL:{RESOURCE:vu.FUEL,AMOUNT:12,COST:[{resource:vu.COAL,amount:2}],CRAFTING:5},COOKED_MEAT:{RESOURCE:vu.COOKED_MEAT,AMOUNT:1,COST:[{resource:vu.MEAT,amount:1},{resource:vu.FUEL,amount:1}],CRAFTING:5},FLOUR:{RESOURCE:vu.FLOUR,AMOUNT:1,COST:[{resource:vu.WHEAT,amount:3}],CRAFTING:3},BREAD:{RESOURCE:vu.BREAD,AMOUNT:1,COST:[{resource:vu.FLOUR,amount:2},{resource:vu.FUEL,amount:1}],CRAFTING:5},VEGETABLE_SOUP_BERRY:{RESOURCE:vu.VEGETABLE_SOUP,AMOUNT:1,COST:[{resource:vu.BERRY,amount:2},{resource:vu.FUEL,amount:1}],CRAFTING:5},VEGETABLE_SOUP_MUSHROOM:{RESOURCE:vu.VEGETABLE_SOUP,AMOUNT:1,COST:[{resource:vu.MUSHROOM,amount:2},{resource:vu.FUEL,amount:1}],CRAFTING:5},MEAT_SOUP:{RESOURCE:vu.MEAT_SOUP,AMOUNT:1,COST:[{resource:vu.MEAT,amount:1},{resource:vu.FUEL,amount:1}],CRAFTING:5},FABRIC:{RESOURCE:vu.FABRIC,AMOUNT:1,COST:[{resource:vu.COTTON,amount:2}],CRAFTING:5},CLOTHES_FABRIC:{RESOURCE:vu.CLOTHES,AMOUNT:1,COST:[{resource:vu.FABRIC,amount:10}],CRAFTING:20},CLOTHES_FUR:{RESOURCE:vu.CLOTHES,AMOUNT:1,COST:[{resource:vu.FUR,amount:15}],CRAFTING:20},GOLD:{RESOURCE:vu.GOLD,AMOUNT:1,COST:[{resource:vu.GOLD_ORE,amount:2},{resource:vu.FUEL,amount:1}],CRAFTING:10},SILVER:{RESOURCE:vu.SILVER,AMOUNT:1,COST:[{resource:vu.SILVER_ORE,amount:2},{resource:vu.FUEL,amount:1}],CRAFTING:10},COPPER:{RESOURCE:vu.COPPER,AMOUNT:1,COST:[{resource:vu.COPPER_ORE,amount:2},{resource:vu.FUEL,amount:1}],CRAFTING:20},TIN:{RESOURCE:vu.TIN,AMOUNT:1,COST:[{resource:vu.TIN_ORE,amount:2},{resource:vu.FUEL,amount:1}],CRAFTING:20},BRONZE:{RESOURCE:vu.BRONZE,AMOUNT:2,COST:[{resource:vu.COPPER,amount:1},{resource:vu.TIN,amount:1},{resource:vu.FUEL,amount:1}],CRAFTING:30},IRON:{RESOURCE:vu.IRON,AMOUNT:1,COST:[{resource:vu.IRON_ORE,amount:3},{resource:vu.FUEL,amount:3}],CRAFTING:30},STEEL:{RESOURCE:vu.STEEL,AMOUNT:1,COST:[{resource:vu.IRON,amount:1},{resource:vu.COAL,amount:5},{resource:vu.FUEL,amount:1}],CRAFTING:40}}},ss={getReligion:function(e){var n=Object.entries(this.RELIGIONS).find(function(n){return n[0]===Tu[e]});if(n)return n[1];console.warn("Invalid religion: "+Au.prepareReligionName(e))},RELIGIONS:{NONE:{FAITH_LEVEL:0,FAITH:0,TIME:0,OFFERING:[]},NATURE:{FAITH_LEVEL:1,FAITH:20,TIME:10,OFFERING:[{resource:vu.LOG,amount:40},{resource:vu.BERRY,amount:20},{resource:vu.MUSHROOM,amount:20}]},FERTILITY:{FAITH_LEVEL:1,FAITH:30,TIME:10,OFFERING:[{resource:vu.WHEAT,amount:40},{resource:vu.BERRY,amount:40},{resource:vu.APPLE,amount:40}]},TECHNOLOGY:{FAITH_LEVEL:1,FAITH:40,TIME:10,OFFERING:[{resource:vu.PLANK,amount:20},{resource:vu.CUT_STONE,amount:20},{resource:vu.STONE_HAMMER,amount:5},{resource:vu.STONE_PICKAXE,amount:5}]},WAR:{FAITH_LEVEL:1,FAITH:50,TIME:10,OFFERING:[{resource:vu.STONE_SPEAR,amount:5},{resource:vu.LEATHER_ARMOR,amount:5},{resource:vu.FUR,amount:10},{resource:vu.LEATHER,amount:10},{resource:vu.FOOD,amount:1e3}]}},PRAYERS:{BLESSING:{FAITH:50,FAITH_LEVEL:2,RELIGION:Tu.NONE,DESCRIPTION:"May everything go according to our plans",FINISH:function(e){var n=[];Object.values(Mu).filter(function(e){return!isNaN(e)}).forEach(function(t){e.getServiceByRegion(t).getBuildings().forEach(function(e){n.includes(e.getBuildingType())||n.push(e.getBuildingType())})});var t=ku.randomExcept(n,[bu.ALL,bu.CONSTRUCTION,bu.DECONSTRUCTION,bu.FIELD,bu.ORCHARD,bu.PASTURE,bu.WAREHOUSE,bu.ASCENSION_TEMPLE,bu.COLOSSUS,bu.GREAT_LIGHTHOUSE,bu.HANGING_GARDEN,bu.PYRAMID,bu.SACRED_GROVE,bu.STONEHENGE,bu.UNDERGROUND_CITY,bu.STASH,bu.WOODEN_TOWER,bu.BARRACKS,bu.STONE_TOWER,bu.STOCKADE]);e.getService(Nu.LOG).log(Au.prepareBuildingName(t)+" blessed"),e.getService(Nu.EFFECTS).addBuildingEffect(new Du("Blessing",t,25,zu/2))}},PREACH:{FAITH:20,FAITH_LEVEL:1,RELIGION:Tu.NONE,DESCRIPTION:"We shall spread our beliefs to others",FINISH:function(e){e.getService(Nu.RELIGION).increaseFaithLevel(1)}},FAITH_SHIELD:{FAITH:50,FAITH_LEVEL:3,RELIGION:Tu.NONE,DESCRIPTION:"Our faith will protect us from harm",FINISH:function(e){var n=25;n+=e.getService(Nu.RELIGION).getFaithLevel(),e.getService(Nu.RELIGION).increaseFaithShield(n)}},SOLDIER_PRAYER:{FAITH:50,FAITH_LEVEL:5,RELIGION:Tu.NONE,DESCRIPTION:"We shall win any enemy with our faith. All troops buffed 20% for one year",FINISH:function(e){e.getService(Nu.EFFECTS).addArmyEffect(new xu("Soldier prayer",Iu.ALL,20,zu))}},FAITHFUL_RESEARCH:{FAITH:100,FAITH_LEVEL:5,RELIGION:Tu.TECHNOLOGY,DESCRIPTION:"We live to improve our knowledge. Gain 100 research points spent only on current research",FINISH:function(e){e.getService(Nu.RESEARCH).progressTech(100)}},BABY_BOOM:{FAITH:100,FAITH_LEVEL:5,RELIGION:Tu.FERTILITY,DESCRIPTION:"May we have a lot of children",FINISH:function(e){e.getService(Nu.EFFECTS).addBuildingEffect(new Du("Baby boom",bu.HUT,100,zu/2)),e.getService(Nu.EFFECTS).addBuildingEffect(new Du("Baby boom",bu.HOUSE,100,zu/2))}},LIFE_CYCLE:{FAITH:100,FAITH_LEVEL:5,RELIGION:Tu.NATURE,DESCRIPTION:"We pray for all live to thrive. 10% buff to natural sources for 5 years",FINISH:function(e){e.getService(Nu.EFFECTS).addNatureEffect(new Uu("Life cycle",10,5*zu))}},HOLY_WAR:{FAITH:100,FAITH_LEVEL:5,RELIGION:Tu.WAR,DESCRIPTION:"The only true faith must be spread at all cost. All troops buffed 10% for 5 years",FINISH:function(e){e.getService(Nu.EFFECTS).addArmyEffect(new xu("Holy War",Iu.ALL,10,5*zu))}}}},as={GOLDEN_ITEMS:{GOLDEN_FISH_CHANCE:5e-4,GOLDEN_EGG_CHANCE:5e-4},PERKS:{MOTIVATION_SPEECH:{DESCRIPTION:"Use your royal position to motivate people to harder work. 25% production upgrade for all buildings for 1 year (single use)",USAGES:0,MAX_USAGES:0,COST:20,RESET:function(e,n){},EFFECT:function(e,n){e.getService(Nu.EFFECTS).addBuildingEffect(new Du("Motivation speech",bu.ALL,25,zu)),e.getService(Nu.ROYAL).unlockCallback(n)}},ROYAL_PROPHECY:{DESCRIPTION:"Your royal blood allows prophets to look into the future. Unlocks certain research for each perk level (awarded immediately and after any soft reset or abdication)",USAGES:0,MAX_USAGES:3,COST:50,RESET:function(e,n){n.usages>=1&&e.getService(Nu.RESEARCH).finishTech(Su.FIRE),n.usages>=2&&e.getService(Nu.RESEARCH).finishTech(Su.COOKING),3===n.usages&&e.getService(Nu.RESEARCH).finishTech(Su.MORTAR)},EFFECT:function(e,n){switch(n.usages){case 0:e.getService(Nu.RESEARCH).finishTech(Su.FIRE);break;case 1:e.getService(Nu.RESEARCH).finishTech(Su.COOKING);break;case 2:e.getService(Nu.RESEARCH).finishTech(Su.MORTAR)}e.getService(Nu.ROYAL).unlockCallback(n)}},HERITAGE:{DESCRIPTION:"Your predecessors ruled better. You start with extra building (awarded after any soft reset or abdication)",USAGES:0,MAX_USAGES:2,COST:20,RESET:function(e,n){n.usages>=1&&e.getService(Nu.FOREST).addBuilding(bu.GATHERER),2===n.usages&&e.getService(Nu.VILLAGE).addBuilding(bu.WORKSHOP)},EFFECT:function(e,n){e.getService(Nu.ROYAL).unlockCallback(n)}},FAMILY_JEWELS:{DESCRIPTION:"Your predecessors left you with more riches. You start with extra resources (awarded after any soft reset or abdication)",USAGES:0,MAX_USAGES:2,COST:20,RESET:function(e,n){n.usages>=1&&(e.getService(Nu.RESOURCES).increaseResource(vu.LOG,20,!0),e.getService(Nu.RESOURCES).increaseResource(vu.BRUSHWOOD,10,!0),e.getService(Nu.RESOURCES).increaseResource(vu.BERRY,20,!0),e.getService(Nu.RESOURCES).increaseResource(vu.MUSHROOM,20,!0)),2===n.usages&&(e.getService(Nu.RESOURCES).increaseResource(vu.STONE,30,!0),e.getService(Nu.RESOURCES).increaseResource(vu.PLANK,20,!0),e.getService(Nu.RESOURCES).increaseResource(vu.FUEL,5,!0),e.getService(Nu.RESOURCES).increaseResource(vu.LEATHER,5,!0))},EFFECT:function(e,n){e.getService(Nu.ROYAL).unlockCallback(n)}},KING_OF_THE_FOREST:{DESCRIPTION:"You rule everything in the forests. You start with a few forest buildings unlocked (awarded after any soft reset or abdication)",USAGES:0,MAX_USAGES:1,COST:50,RESET:function(e,n){1===n.usages&&(e.getService(Nu.FOREST).addBuilding(bu.GATHERER),e.getService(Nu.FOREST).addBuilding(bu.FORESTER),e.getService(Nu.FOREST).addBuilding(bu.HUNTER_LODGE),e.getService(Nu.LAND).takeLand(2*ts.FOREST.GATHERER.SIZE+ts.FOREST.HUNTER_LODGE.SIZE))},EFFECT:function(e,n){e.getService(Nu.ROYAL).unlockCallback(n)}},KING_OF_THE_PEOPLE:{DESCRIPTION:"People love you unconditionally. You start with House unlocked and built instead of huts (awarded after any soft reset or abdication)",USAGES:0,MAX_USAGES:1,COST:50,RESET:function(e,n){1===n.usages&&(e.getService(Nu.RESEARCH).finishTech(Su.HOUSE),e.getService(Nu.VILLAGE).replaceWithHouses())},EFFECT:function(e,n){e.getService(Nu.ROYAL).unlockCallback(n)}},KING_OF_THE_WAR:{DESCRIPTION:"War is your game. You start with military unlocked and small army (awarded after any soft reset or abdication)",USAGES:0,MAX_USAGES:1,COST:50,RESET:function(e,n){e.getService(Nu.GAME).enable(Eu.ARMY),e.getService(Nu.GAME).enable(Eu.FORT);var t=e.getService(Nu.ARMY);e.getService(Nu.FORT).addBuilding(bu.BARRACKS),e.getService(Nu.FORT).addBuilding(bu.BARRACKS),e.getService(Nu.LAND).takeLand(2*ts.FORT.BARRACKS.SIZE),t.addMilitia(20)},EFFECT:function(e,n){e.getService(Nu.ROYAL).unlockCallback(n)}},CALL_TO_ARMS:{DESCRIPTION:"We will fight till the last of us drops dead. You can convert up to 10 villagers to militia (single use)",USAGES:0,MAX_USAGES:0,COST:10,RESET:function(e,n){},EFFECT:function(e,n){var t=e.getService(Nu.RESOURCES),l=e.getService(Nu.MODAL),r=e.getService(Nu.ARMY),i=e.getService(Nu.ROYAL);l.open(mu.INPUT),l.setModalText("How many villagers would you like to convert to militia?<br>"+t.getPeople()+" recruits available");var o=l.registerForValueResponse().subscribe(function(e){if(o.unsubscribe(),null!==e&&!isNaN(e)){var u=t.getPeople();if(u>10)return void l.info("You can only convert up to 10 villagers");if(r.getFreeBarracks()<e)return void l.info("Not enough barracks space for so many militia");if(e>u)return void l.info("Not enough recruits");if(e<=0)return void l.info("Invalid amount of recruits");if(i.getRoyalPoints()<n.cost)return void l.info("Not enough royal points");t.removeRecruit(Number(e)),r.addMilitia(Number(e)),i.unlockCallback(n)}})}},UNITE_WITH_THE_PEOPLE:{DESCRIPTION:"You step down from your throne and live with others. Permanent 20% upgrade to all buildings (persists through soft resets and abdications)",USAGES:0,MAX_USAGES:0,COST:100,RESET:function(e,n){},EFFECT:function(e,n){e.getService(Nu.EFFECTS).addBuildingEffect(new Du("Unite with the people",bu.ALL,20,Hu.ROYAL)),e.getService(Nu.ROYAL).unlockCallback(n)}}}},cs=function(){return function(){}}(),ps=function(){function e(){this.title="app"}return e.prototype.isIE=function(){return-1!==navigator.userAgent.indexOf("MSIE")||1==!!document.documentMode},e.prototype.catchContextMenu=function(e){return!1},e}(),hs=function(){return function(){}}(),ds=new ye("Location Initialized"),fs=function(){return function(){}}(),gs=new ye("appBaseHref"),vs=function(){function e(e){var t=this;this._subject=new pt,this._platformStrategy=e;var l=this._platformStrategy.getBaseHref();this._baseHref=n.stripTrailingSlash(ms(l)),this._platformStrategy.onPopState(function(e){t._subject.emit({url:t.path(!0),pop:!0,state:e.state,type:e.type})})}var n;return n=e,e.prototype.path=function(e){return void 0===e&&(e=!1),this.normalize(this._platformStrategy.path(e))},e.prototype.isCurrentPathEqualTo=function(e,t){return void 0===t&&(t=""),this.path()==this.normalize(e+n.normalizeQueryParams(t))},e.prototype.normalize=function(e){return n.stripTrailingSlash(function(e,n){return e&&n.startsWith(e)?n.substring(e.length):n}(this._baseHref,ms(e)))},e.prototype.prepareExternalUrl=function(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)},e.prototype.go=function(e,n,t){void 0===n&&(n=""),void 0===t&&(t=null),this._platformStrategy.pushState(t,"",e,n)},e.prototype.replaceState=function(e,n,t){void 0===n&&(n=""),void 0===t&&(t=null),this._platformStrategy.replaceState(t,"",e,n)},e.prototype.forward=function(){this._platformStrategy.forward()},e.prototype.back=function(){this._platformStrategy.back()},e.prototype.subscribe=function(e,n,t){return this._subject.subscribe({next:e,error:n,complete:t})},e.normalizeQueryParams=function(e){return e&&"?"!==e[0]?"?"+e:e},e.joinWithSlash=function(e,n){if(0==e.length)return n;if(0==n.length)return e;var t=0;return e.endsWith("/")&&t++,n.startsWith("/")&&t++,2==t?e+n.substring(1):1==t?e+n:e+"/"+n},e.stripTrailingSlash=function(e){var n=e.match(/#|\?|$/),t=n&&n.index||e.length;return e.slice(0,t-("/"===e[t-1]?1:0))+e.slice(t)},e}();function ms(e){return e.replace(/\/index.html$/,"")}var ys=function(e){function n(n,t){var l=e.call(this)||this;return l._platformLocation=n,l._baseHref="",null!=t&&(l._baseHref=t),l}return r(n,e),n.prototype.onPopState=function(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)},n.prototype.getBaseHref=function(){return this._baseHref},n.prototype.path=function(e){void 0===e&&(e=!1);var n=this._platformLocation.hash;return null==n&&(n="#"),n.length>0?n.substring(1):n},n.prototype.prepareExternalUrl=function(e){var n=vs.joinWithSlash(this._baseHref,e);return n.length>0?"#"+n:n},n.prototype.pushState=function(e,n,t,l){var r=this.prepareExternalUrl(t+vs.normalizeQueryParams(l));0==r.length&&(r=this._platformLocation.pathname),this._platformLocation.pushState(e,n,r)},n.prototype.replaceState=function(e,n,t,l){var r=this.prepareExternalUrl(t+vs.normalizeQueryParams(l));0==r.length&&(r=this._platformLocation.pathname),this._platformLocation.replaceState(e,n,r)},n.prototype.forward=function(){this._platformLocation.forward()},n.prototype.back=function(){this._platformLocation.back()},n}(fs),Ss=function(e){function n(n,t){var l=e.call(this)||this;if(l._platformLocation=n,null==t&&(t=l._platformLocation.getBaseHrefFromDOM()),null==t)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return l._baseHref=t,l}return r(n,e),n.prototype.onPopState=function(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)},n.prototype.getBaseHref=function(){return this._baseHref},n.prototype.prepareExternalUrl=function(e){return vs.joinWithSlash(this._baseHref,e)},n.prototype.path=function(e){void 0===e&&(e=!1);var n=this._platformLocation.pathname+vs.normalizeQueryParams(this._platformLocation.search),t=this._platformLocation.hash;return t&&e?""+n+t:n},n.prototype.pushState=function(e,n,t,l){var r=this.prepareExternalUrl(t+vs.normalizeQueryParams(l));this._platformLocation.pushState(e,n,r)},n.prototype.replaceState=function(e,n,t,l){var r=this.prepareExternalUrl(t+vs.normalizeQueryParams(l));this._platformLocation.replaceState(e,n,r)},n.prototype.forward=function(){this._platformLocation.forward()},n.prototype.back=function(){this._platformLocation.back()},n}(fs),Es=void 0,bs=["en",[["a","p"],["AM","PM"],Es],[["AM","PM"],Es,Es],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Es,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Es,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Es,"{1} 'at' {0}",Es],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",{},function(e){var n=Math.floor(Math.abs(e)),t=e.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===t?1:5}],Os={},Rs=function(e){return e[e.Decimal=0]="Decimal",e[e.Percent=1]="Percent",e[e.Currency=2]="Currency",e[e.Scientific=3]="Scientific",e}({}),Cs=function(e){return e[e.Zero=0]="Zero",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Few=3]="Few",e[e.Many=4]="Many",e[e.Other=5]="Other",e}({}),_s=function(e){return e[e.Decimal=0]="Decimal",e[e.Group=1]="Group",e[e.List=2]="List",e[e.PercentSign=3]="PercentSign",e[e.PlusSign=4]="PlusSign",e[e.MinusSign=5]="MinusSign",e[e.Exponential=6]="Exponential",e[e.SuperscriptingExponent=7]="SuperscriptingExponent",e[e.PerMille=8]="PerMille",e[e[1/0]=9]="Infinity",e[e.NaN=10]="NaN",e[e.TimeSeparator=11]="TimeSeparator",e[e.CurrencyDecimal=12]="CurrencyDecimal",e[e.CurrencyGroup=13]="CurrencyGroup",e}({});function Ts(e,n){var t=Is(e),l=t[13][n];if(void 0===l){if(n===_s.CurrencyDecimal)return t[13][_s.Decimal];if(n===_s.CurrencyGroup)return t[13][_s.Group]}return l}function Is(e){var n=e.toLowerCase().replace(/_/g,"-"),t=Os[n];if(t)return t;var l=n.split("-")[0];if(t=Os[l])return t;if("en"===l)return bs;throw new Error('Missing locale data for the locale "'+e+'".')}var As=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function ws(e){var n=parseInt(e);if(isNaN(n))throw new Error("Invalid integer literal when parsing "+e);return n}var Ns=new ye("UseV4Plurals"),Ps=function(){return function(){}}(),Ds=function(e){function n(n,t){var l=e.call(this)||this;return l.locale=n,l.deprecatedPluralFn=t,l}return r(n,e),n.prototype.getPluralCategory=function(e,n){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(n||this.locale,e):function(e){return Is(e)[18]}(n||this.locale)(e)){case Cs.Zero:return"zero";case Cs.One:return"one";case Cs.Two:return"two";case Cs.Few:return"few";case Cs.Many:return"many";default:return"other"}},n}(Ps),ks=function(){function e(e,n,t,l){this._iterableDiffers=e,this._keyValueDiffers=n,this._ngEl=t,this._renderer=l,this._initialClasses=[]}return Object.defineProperty(e.prototype,"klass",{set:function(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClass",{set:function(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(Xe(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())},enumerable:!0,configurable:!0}),e.prototype.ngDoCheck=function(){if(this._iterableDiffer){var e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){var n=this._keyValueDiffer.diff(this._rawClass);n&&this._applyKeyValueChanges(n)}},e.prototype._applyKeyValueChanges=function(e){var n=this;e.forEachAddedItem(function(e){return n._toggleClass(e.key,e.currentValue)}),e.forEachChangedItem(function(e){return n._toggleClass(e.key,e.currentValue)}),e.forEachRemovedItem(function(e){e.previousValue&&n._toggleClass(e.key,!1)})},e.prototype._applyIterableChanges=function(e){var n=this;e.forEachAddedItem(function(e){if("string"!=typeof e.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got "+ke(e.item));n._toggleClass(e.item,!0)}),e.forEachRemovedItem(function(e){return n._toggleClass(e.item,!1)})},e.prototype._applyClasses=function(e){var n=this;e&&(Array.isArray(e)||e instanceof Set?e.forEach(function(e){return n._toggleClass(e,!0)}):Object.keys(e).forEach(function(t){return n._toggleClass(t,!!e[t])}))},e.prototype._removeClasses=function(e){var n=this;e&&(Array.isArray(e)||e instanceof Set?e.forEach(function(e){return n._toggleClass(e,!1)}):Object.keys(e).forEach(function(e){return n._toggleClass(e,!1)}))},e.prototype._toggleClass=function(e,n){var t=this;(e=e.trim())&&e.split(/\s+/g).forEach(function(e){n?t._renderer.addClass(t._ngEl.nativeElement,e):t._renderer.removeClass(t._ngEl.nativeElement,e)})},e}(),Ms=function(){function e(e,n,t,l){this.$implicit=e,this.ngForOf=n,this.index=t,this.count=l}return Object.defineProperty(e.prototype,"first",{get:function(){return 0===this.index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"last",{get:function(){return this.index===this.count-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"even",{get:function(){return this.index%2==0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"odd",{get:function(){return!this.even},enumerable:!0,configurable:!0}),e}(),xs=function(){function e(e,n,t){this._viewContainer=e,this._template=n,this._differs=t,this._ngForOfDirty=!0,this._differ=null}return Object.defineProperty(e.prototype,"ngForOf",{set:function(e){this._ngForOf=e,this._ngForOfDirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngForTrackBy",{get:function(){return this._trackByFn},set:function(e){Wn()&&null!=e&&"function"!=typeof e&&console&&console.warn&&console.warn("trackBy must be a function, but received "+JSON.stringify(e)+". See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."),this._trackByFn=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngForTemplate",{set:function(e){e&&(this._template=e)},enumerable:!0,configurable:!0}),e.prototype.ngDoCheck=function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(l){throw new Error("Cannot find a differ supporting object '"+e+"' of type '"+((n=e).name||typeof n)+"'. NgFor only supports binding to Iterables such as Arrays.")}}var n;if(this._differ){var t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}},e.prototype._applyChanges=function(e){var n=this,t=[];e.forEachOperation(function(e,l,r){if(null==e.previousIndex){var i=n._viewContainer.createEmbeddedView(n._template,new Ms(null,n._ngForOf,-1,-1),r),o=new Ls(e,i);t.push(o)}else null==r?n._viewContainer.remove(l):(i=n._viewContainer.get(l),n._viewContainer.move(i,r),o=new Ls(e,i),t.push(o))});for(var l=0;l<t.length;l++)this._perViewChange(t[l].view,t[l].record);l=0;for(var r=this._viewContainer.length;l<r;l++){var i=this._viewContainer.get(l);i.context.index=l,i.context.count=r,i.context.ngForOf=this._ngForOf}e.forEachIdentityChange(function(e){n._viewContainer.get(e.currentIndex).context.$implicit=e.item})},e.prototype._perViewChange=function(e,n){e.context.$implicit=n.item},e.ngTemplateContextGuard=function(e,n){return!0},e}(),Ls=function(){return function(e,n){this.record=e,this.view=n}}(),Fs=function(){function e(e,n){this._viewContainer=e,this._context=new Us,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}return Object.defineProperty(e.prototype,"ngIf",{set:function(e){this._context.$implicit=this._context.ngIf=e,this._updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngIfThen",{set:function(e){Hs("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngIfElse",{set:function(e){Hs("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()},enumerable:!0,configurable:!0}),e.prototype._updateView=function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))},e.ngTemplateGuard_ngIf=function(e,n){return!0},e}(),Us=function(){return function(){this.$implicit=null,this.ngIf=null}}();function Hs(e,n){if(n&&!n.createEmbeddedView)throw new Error(e+" must be a TemplateRef, but received '"+ke(n)+"'.")}var Gs=function(){function e(e,n){this._viewContainerRef=e,this._templateRef=n,this._created=!1}return e.prototype.create=function(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)},e.prototype.destroy=function(){this._created=!1,this._viewContainerRef.clear()},e.prototype.enforceState=function(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()},e}(),Bs=function(){function e(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}return Object.defineProperty(e.prototype,"ngSwitch",{set:function(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)},enumerable:!0,configurable:!0}),e.prototype._addCase=function(){return this._caseCount++},e.prototype._addDefault=function(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)},e.prototype._matchCase=function(e){var n=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||n,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),n},e.prototype._updateDefaultCases=function(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(var n=0;n<this._defaultViews.length;n++)this._defaultViews[n].enforceState(e)}},e}(),Vs=function(){function e(e,n,t){this.ngSwitch=t,t._addCase(),this._view=new Gs(e,n)}return e.prototype.ngDoCheck=function(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))},e}(),Ws=function(){function e(e,n,t){this._differs=e,this._ngEl=n,this._renderer=t}return Object.defineProperty(e.prototype,"ngStyle",{set:function(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())},enumerable:!0,configurable:!0}),e.prototype.ngDoCheck=function(){if(this._differ){var e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}},e.prototype._applyChanges=function(e){var n=this;e.forEachRemovedItem(function(e){return n._setStyle(e.key,null)}),e.forEachAddedItem(function(e){return n._setStyle(e.key,e.currentValue)}),e.forEachChangedItem(function(e){return n._setStyle(e.key,e.currentValue)})},e.prototype._setStyle=function(e,n){var t=a(e.split("."),2),l=t[0],r=t[1];null!=(n=null!=n&&r?""+n+r:n)?this._renderer.setStyle(this._ngEl.nativeElement,l,n):this._renderer.removeStyle(this._ngEl.nativeElement,l)},e}();function js(e,n){return Error("InvalidPipeArgument: '"+n+"' for pipe '"+ke(e)+"'")}var zs=/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D])\S*/g,Ys=function(){function e(){}var n;return n=e,e.prototype.transform=function(e){if(!e)return e;if("string"!=typeof e)throw js(n,e);return e.replace(zs,function(e){return e[0].toUpperCase()+e.substr(1).toLowerCase()})},e}(),Ks=function(){function e(e){this.differs=e,this.keyValues=[]}return e.prototype.transform=function(e,n){var t=this;if(void 0===n&&(n=qs),!e||!(e instanceof Map)&&"object"!=typeof e)return null;this.differ||(this.differ=this.differs.find(e).create());var l=this.differ.diff(e);return l&&(this.keyValues=[],l.forEachItem(function(e){t.keyValues.push({key:e.key,value:e.currentValue})}),this.keyValues.sort(n)),this.keyValues},e}();function qs(e,n){var t=e.key,l=n.key;if(t===l)return 0;if(void 0===t)return 1;if(void 0===l)return-1;if(null===t)return 1;if(null===l)return-1;if("string"==typeof t&&"string"==typeof l)return t<l?-1:1;if("number"==typeof t&&"number"==typeof l)return t-l;if("boolean"==typeof t&&"boolean"==typeof l)return t<l?-1:1;var r=String(t),i=String(l);return r==i?0:r<i?-1:1}var $s=function(){function e(e){this._locale=e}var n;return n=e,e.prototype.transform=function(e,t,l){if(function(e){return null==e||""===e||e!=e}(e))return null;l=l||this._locale;try{return function(e,n,t){return function(e,n,t,l,r,i,o){void 0===o&&(o=!1);var u="",s=!1;if(isFinite(e)){var a=function(n){var t,l,r,i,o,u=Math.abs(e)+"",s=0;for((l=u.indexOf("."))>-1&&(u=u.replace(".","")),(r=u.search(/e/i))>0?(l<0&&(l=r),l+=+u.slice(r+1),u=u.substring(0,r)):l<0&&(l=u.length),r=0;"0"===u.charAt(r);r++);if(r===(o=u.length))t=[0],l=1;else{for(o--;"0"===u.charAt(o);)o--;for(l-=r,t=[],i=0;r<=o;r++,i++)t[i]=Number(u.charAt(r))}return l>22&&(t=t.splice(0,21),s=l-1,l=1),{digits:t,exponent:s,integerLen:l}}();o&&(a=function(e){if(0===e.digits[0])return e;var n=e.digits.length-e.integerLen;return e.exponent?e.exponent+=2:(0===n?e.digits.push(0,0):1===n&&e.digits.push(0),e.integerLen+=2),e}(a));var c=n.minInt,p=n.minFrac,h=n.maxFrac;if(i){var d=i.match(As);if(null===d)throw new Error(i+" is not a valid digit info");var f=d[1],g=d[3],v=d[5];null!=f&&(c=ws(f)),null!=g&&(p=ws(g)),null!=v?h=ws(v):null!=g&&p>h&&(h=p)}!function(e,n,t){if(n>t)throw new Error("The minimum number of digits after fraction ("+n+") is higher than the maximum ("+t+").");var l=e.digits,r=l.length-e.integerLen,i=Math.min(Math.max(n,r),t),o=i+e.integerLen,u=l[o];if(o>0){l.splice(Math.max(e.integerLen,o));for(var s=o;s<l.length;s++)l[s]=0}else{r=Math.max(0,r),e.integerLen=1,l.length=Math.max(1,o=i+1),l[0]=0;for(var a=1;a<o;a++)l[a]=0}if(u>=5)if(o-1<0){for(var c=0;c>o;c--)l.unshift(0),e.integerLen++;l.unshift(1),e.integerLen++}else l[o-1]++;for(;r<Math.max(0,i);r++)l.push(0);var p=0!==i,h=n+e.integerLen,d=l.reduceRight(function(e,n,t,l){return l[t]=(n+=e)<10?n:n-10,p&&(0===l[t]&&t>=h?l.pop():p=!1),n>=10?1:0},0);d&&(l.unshift(d),e.integerLen++)}(a,p,h);var m=a.digits,y=a.integerLen,S=a.exponent,E=[];for(s=m.every(function(e){return!e});y<c;y++)m.unshift(0);for(;y<0;y++)m.unshift(0);y>0?E=m.splice(y,m.length):(E=m,m=[0]);var b=[];for(m.length>=n.lgSize&&b.unshift(m.splice(-n.lgSize,m.length).join(""));m.length>n.gSize;)b.unshift(m.splice(-n.gSize,m.length).join(""));m.length&&b.unshift(m.join("")),u=b.join(Ts(t,l)),E.length&&(u+=Ts(t,r)+E.join("")),S&&(u+=Ts(t,_s.Exponential)+"+"+S)}else u=Ts(t,_s.Infinity);return e<0&&!s?n.negPre+u+n.negSuf:n.posPre+u+n.posSuf}(e,function(e,n){void 0===n&&(n="-");var t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},l=e.split(";"),r=l[0],i=l[1],o=-1!==r.indexOf(".")?r.split("."):[r.substring(0,r.lastIndexOf("0")+1),r.substring(r.lastIndexOf("0")+1)],u=o[0],s=o[1]||"";t.posPre=u.substr(0,u.indexOf("#"));for(var a=0;a<s.length;a++){var c=s.charAt(a);"0"===c?t.minFrac=t.maxFrac=a+1:"#"===c?t.maxFrac=a+1:t.posSuf+=c}var p=u.split(",");if(t.gSize=p[1]?p[1].length:0,t.lgSize=p[2]||p[1]?(p[2]||p[1]).length:0,i){var h=r.length-t.posPre.length-t.posSuf.length,d=i.indexOf("#");t.negPre=i.substr(0,d).replace(/'/g,""),t.negSuf=i.substr(d+h).replace(/'/g,"")}else t.negPre=n+t.posPre,t.negSuf=t.posSuf;return t}(function(e,n){return Is(e)[14][n]}(n,Rs.Decimal),Ts(n,_s.MinusSign)),n,_s.Group,_s.Decimal,t)}(function(e){if("string"==typeof e&&!isNaN(Number(e)-parseFloat(e)))return Number(e);if("number"!=typeof e)throw new Error(e+" is not a number");return e}(e),l,t)}catch(r){throw js(n,r.message)}},e}(),Qs=function(){return function(){}}(),Zs=new ye("DocumentToken"),Xs="browser",Js="server",ea=function(){function e(){}return e.ngInjectableDef=ve({providedIn:"root",factory:function(){return new na(Ye(Zs),window,Ye(_t))}}),e}(),na=function(){function e(e,n,t){this.document=e,this.window=n,this.errorHandler=t,this.offset=function(){return[0,0]}}return e.prototype.setOffset=function(e){this.offset=Array.isArray(e)?function(){return e}:e},e.prototype.getScrollPosition=function(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]},e.prototype.scrollToPosition=function(e){this.supportScrollRestoration()&&this.window.scrollTo(e[0],e[1])},e.prototype.scrollToAnchor=function(e){if(this.supportScrollRestoration()){e=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(e):e.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{var n=this.document.querySelector("#"+e);if(n)return void this.scrollToElement(n);var t=this.document.querySelector("[name='"+e+"']");if(t)return void this.scrollToElement(t)}catch(l){this.errorHandler.handleError(l)}}},e.prototype.setHistoryScrollRestoration=function(e){if(this.supportScrollRestoration()){var n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=e)}},e.prototype.scrollToElement=function(e){var n=e.getBoundingClientRect(),t=n.left+this.window.pageXOffset,l=n.top+this.window.pageYOffset,r=this.offset();this.window.scrollTo(t-r[0],l-r[1])},e.prototype.supportScrollRestoration=function(){try{return!!this.window&&!!this.window.scrollTo}catch(e){return!1}},e}();function ta(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=e[e.length-1];return F(t)?(e.pop(),Q(e,t)):le(e)}var la=function(e){function n(n){var t=e.call(this)||this;return t._value=n,t}return r(n,e),Object.defineProperty(n.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),n.prototype._subscribe=function(n){var t=e.prototype._subscribe.call(this,n);return t&&!t.closed&&n.next(this._value),t},n.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new D;return this._value},n.prototype.next=function(n){e.prototype.next.call(this,this._value=n)},n}(x);function ra(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}ra.prototype=Object.create(Error.prototype);var ia=ra,oa={},ua=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,n){return n.subscribe(new sa(e,this.resultSelector))},e}(),sa=function(e){function n(n,t){var l=e.call(this,n)||this;return l.resultSelector=t,l.active=0,l.values=[],l.observables=[],l}return r(n,e),n.prototype._next=function(e){this.values.push(oa),this.observables.push(e)},n.prototype._complete=function(){var e=this.observables,n=e.length;if(0===n)this.destination.complete();else{this.active=n,this.toRespond=n;for(var t=0;t<n;t++){var l=e[t];this.add(z(this,l,l,t))}}},n.prototype.notifyComplete=function(e){0==(this.active-=1)&&this.destination.complete()},n.prototype.notifyNext=function(e,n,t,l,r){var i=this.values,o=this.toRespond?i[t]===oa?--this.toRespond:this.toRespond:0;i[t]=n,0===o&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))},n.prototype._tryResultSelector=function(e){var n;try{n=this.resultSelector.apply(this,e)}catch(t){return void this.destination.error(t)}this.destination.next(n)},n}(Y),aa=new w(function(e){return e.complete()});function ca(e){return e?function(e){return new w(function(n){return e.schedule(function(){return n.complete()})})}(e):aa}function pa(e){return new w(function(n){var t;try{t=e()}catch(l){return void n.error(l)}return(t?Z(t):ca()).subscribe(n)})}function ha(){return te(1)}function da(e,n){return function(t){return t.lift(new fa(e,n))}}var fa=function(){function e(e,n){this.predicate=e,this.thisArg=n}return e.prototype.call=function(e,n){return n.subscribe(new ga(e,this.predicate,this.thisArg))},e}(),ga=function(e){function n(n,t,l){var r=e.call(this,n)||this;return r.predicate=t,r.thisArg=l,r.count=0,r}return r(n,e),n.prototype._next=function(e){var n;try{n=this.predicate.call(this.thisArg,e,this.count++)}catch(t){return void this.destination.error(t)}n&&this.destination.next(e)},n}(R);function va(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}va.prototype=Object.create(Error.prototype);var ma=va;function ya(e){return function(n){return 0===e?ca():n.lift(new Sa(e))}}var Sa=function(){function e(e){if(this.total=e,this.total<0)throw new ma}return e.prototype.call=function(e,n){return n.subscribe(new Ea(e,this.total))},e}(),Ea=function(e){function n(n,t){var l=e.call(this,n)||this;return l.total=t,l.ring=new Array,l.count=0,l}return r(n,e),n.prototype._next=function(e){var n=this.ring,t=this.total,l=this.count++;n.length<t?n.push(e):n[l%t]=e},n.prototype._complete=function(){var e=this.destination,n=this.count;if(n>0)for(var t=this.count>=this.total?this.total:this.count,l=this.ring,r=0;r<t;r++){var i=n++%t;e.next(l[i])}e.complete()},n}(R);function ba(e){return void 0===e&&(e=Ca),function(n){return n.lift(new Oa(e))}}var Oa=function(){function e(e){this.errorFactory=e}return e.prototype.call=function(e,n){return n.subscribe(new Ra(e,this.errorFactory))},e}(),Ra=function(e){function n(n,t){var l=e.call(this,n)||this;return l.errorFactory=t,l.hasValue=!1,l}return r(n,e),n.prototype._next=function(e){this.hasValue=!0,this.destination.next(e)},n.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var e=void 0;try{e=this.errorFactory()}catch(n){e=n}this.destination.error(e)},n}(R);function Ca(){return new ia}function _a(e){return void 0===e&&(e=null),function(n){return n.lift(new Ta(e))}}var Ta=function(){function e(e){this.defaultValue=e}return e.prototype.call=function(e,n){return n.subscribe(new Ia(e,this.defaultValue))},e}(),Ia=function(e){function n(n,t){var l=e.call(this,n)||this;return l.defaultValue=t,l.isEmpty=!0,l}return r(n,e),n.prototype._next=function(e){this.isEmpty=!1,this.destination.next(e)},n.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},n}(R);function Aa(e,n){var t=arguments.length>=2;return function(l){return l.pipe(e?da(function(n,t){return e(n,t,l)}):ne,ya(1),t?_a(n):ba(function(){return new ia}))}}function wa(e){return function(n){var t=new Na(e),l=n.lift(t);return t.caught=l}}var Na=function(){function e(e){this.selector=e}return e.prototype.call=function(e,n){return n.subscribe(new Pa(e,this.selector,this.caught))},e}(),Pa=function(e){function n(n,t,l){var r=e.call(this,n)||this;return r.selector=t,r.caught=l,r}return r(n,e),n.prototype.error=function(n){if(!this.isStopped){var t=void 0;try{t=this.selector(n,this.caught)}catch(r){return void e.prototype.error.call(this,r)}this._unsubscribeAndRecycle();var l=new U(this,void 0,void 0);this.add(l),z(this,t,void 0,void 0,l)}},n}(Y);function Da(e){return function(n){return 0===e?ca():n.lift(new ka(e))}}var ka=function(){function e(e){if(this.total=e,this.total<0)throw new ma}return e.prototype.call=function(e,n){return n.subscribe(new Ma(e,this.total))},e}(),Ma=function(e){function n(n,t){var l=e.call(this,n)||this;return l.total=t,l.count=0,l}return r(n,e),n.prototype._next=function(e){var n=this.total,t=++this.count;t<=n&&(this.destination.next(e),t===n&&(this.destination.complete(),this.unsubscribe()))},n}(R);function xa(e,n){var t=arguments.length>=2;return function(l){return l.pipe(e?da(function(n,t){return e(n,t,l)}):ne,Da(1),t?_a(n):ba(function(){return new ia}))}}var La=function(){function e(e,n,t){this.predicate=e,this.thisArg=n,this.source=t}return e.prototype.call=function(e,n){return n.subscribe(new Fa(e,this.predicate,this.thisArg,this.source))},e}(),Fa=function(e){function n(n,t,l,r){var i=e.call(this,n)||this;return i.predicate=t,i.thisArg=l,i.source=r,i.index=0,i.thisArg=l||i,i}return r(n,e),n.prototype.notifyComplete=function(e){this.destination.next(e),this.destination.complete()},n.prototype._next=function(e){var n=!1;try{n=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(t){return void this.destination.error(t)}n||this.notifyComplete(!1)},n.prototype._complete=function(){this.notifyComplete(!0)},n}(R);function Ua(e,n){return"function"==typeof n?function(t){return t.pipe(Ua(function(t,l){return Z(e(t,l)).pipe(K(function(e,r){return n(t,e,l,r)}))}))}:function(n){return n.lift(new Ha(e))}}var Ha=function(){function e(e){this.project=e}return e.prototype.call=function(e,n){return n.subscribe(new Ga(e,this.project))},e}(),Ga=function(e){function n(n,t){var l=e.call(this,n)||this;return l.project=t,l.index=0,l}return r(n,e),n.prototype._next=function(e){var n,t=this.index++;try{n=this.project(e,t)}catch(l){return void this.destination.error(l)}this._innerSub(n,e,t)},n.prototype._innerSub=function(e,n,t){var l=this.innerSubscription;l&&l.unsubscribe();var r=new U(this,void 0,void 0);this.destination.add(r),this.innerSubscription=z(this,e,n,t,r)},n.prototype._complete=function(){var n=this.innerSubscription;n&&!n.closed||e.prototype._complete.call(this),this.unsubscribe()},n.prototype._unsubscribe=function(){this.innerSubscription=null},n.prototype.notifyComplete=function(n){this.destination.remove(n),this.innerSubscription=null,this.isStopped&&e.prototype._complete.call(this)},n.prototype.notifyNext=function(e,n,t,l,r){this.destination.next(n)},n}(Y);function Ba(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return ha()(ta.apply(void 0,e))}function Va(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=e[e.length-1];return F(t)?(e.pop(),function(n){return Ba(e,n,t)}):function(n){return Ba(e,n)}}function Wa(e,n){var t=!1;return arguments.length>=2&&(t=!0),function(l){return l.lift(new ja(e,n,t))}}var ja=function(){function e(e,n,t){void 0===t&&(t=!1),this.accumulator=e,this.seed=n,this.hasSeed=t}return e.prototype.call=function(e,n){return n.subscribe(new za(e,this.accumulator,this.seed,this.hasSeed))},e}(),za=function(e){function n(n,t,l,r){var i=e.call(this,n)||this;return i.accumulator=t,i._seed=l,i.hasSeed=r,i.index=0,i}return r(n,e),Object.defineProperty(n.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e},enumerable:!0,configurable:!0}),n.prototype._next=function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)},n.prototype._tryNext=function(e){var n,t=this.index++;try{n=this.accumulator(this.seed,e,t)}catch(l){this.destination.error(l)}this.seed=n,this.destination.next(n)},n}(R);function Ya(e,n){return X(e,n,1)}function Ka(e,n,t){return function(l){return l.lift(new qa(e,n,t))}}var qa=function(){function e(e,n,t){this.nextOrObserver=e,this.error=n,this.complete=t}return e.prototype.call=function(e,n){return n.subscribe(new $a(e,this.nextOrObserver,this.error,this.complete))},e}(),$a=function(e){function n(n,t,l,r){var i=e.call(this,n)||this;return i._tapNext=T,i._tapError=T,i._tapComplete=T,i._tapError=l||T,i._tapComplete=r||T,d(t)?(i._context=i,i._tapNext=t):t&&(i._context=t,i._tapNext=t.next||T,i._tapError=t.error||T,i._tapComplete=t.complete||T),i}return r(n,e),n.prototype._next=function(e){try{this._tapNext.call(this._context,e)}catch(n){return void this.destination.error(n)}this.destination.next(e)},n.prototype._error=function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)},n.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()},n}(R),Qa=function(){function e(e){this.callback=e}return e.prototype.call=function(e,n){return n.subscribe(new Za(e,this.callback))},e}(),Za=function(e){function n(n,t){var l=e.call(this,n)||this;return l.add(new v(t)),l}return r(n,e),n}(R),Xa=null;function Ja(){return Xa}var ec,nc={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},tc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},lc={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"};Ie.Node&&(ec=Ie.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))});var rc,ic=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r(n,e),n.prototype.parse=function(e){throw new Error("parse not implemented")},n.makeCurrent=function(){var e;e=new n,Xa||(Xa=e)},n.prototype.hasProperty=function(e,n){return n in e},n.prototype.setProperty=function(e,n,t){e[n]=t},n.prototype.getProperty=function(e,n){return e[n]},n.prototype.invoke=function(e,n,t){var l;(l=e)[n].apply(l,c(t))},n.prototype.logError=function(e){window.console&&(console.error?console.error(e):console.log(e))},n.prototype.log=function(e){window.console&&window.console.log&&window.console.log(e)},n.prototype.logGroup=function(e){window.console&&window.console.group&&window.console.group(e)},n.prototype.logGroupEnd=function(){window.console&&window.console.groupEnd&&window.console.groupEnd()},Object.defineProperty(n.prototype,"attrToPropMap",{get:function(){return nc},enumerable:!0,configurable:!0}),n.prototype.contains=function(e,n){return ec.call(e,n)},n.prototype.querySelector=function(e,n){return e.querySelector(n)},n.prototype.querySelectorAll=function(e,n){return e.querySelectorAll(n)},n.prototype.on=function(e,n,t){e.addEventListener(n,t,!1)},n.prototype.onAndCancel=function(e,n,t){return e.addEventListener(n,t,!1),function(){e.removeEventListener(n,t,!1)}},n.prototype.dispatchEvent=function(e,n){e.dispatchEvent(n)},n.prototype.createMouseEvent=function(e){var n=this.getDefaultDocument().createEvent("MouseEvent");return n.initEvent(e,!0,!0),n},n.prototype.createEvent=function(e){var n=this.getDefaultDocument().createEvent("Event");return n.initEvent(e,!0,!0),n},n.prototype.preventDefault=function(e){e.preventDefault(),e.returnValue=!1},n.prototype.isPrevented=function(e){return e.defaultPrevented||null!=e.returnValue&&!e.returnValue},n.prototype.getInnerHTML=function(e){return e.innerHTML},n.prototype.getTemplateContent=function(e){return"content"in e&&this.isTemplateElement(e)?e.content:null},n.prototype.getOuterHTML=function(e){return e.outerHTML},n.prototype.nodeName=function(e){return e.nodeName},n.prototype.nodeValue=function(e){return e.nodeValue},n.prototype.type=function(e){return e.type},n.prototype.content=function(e){return this.hasProperty(e,"content")?e.content:e},n.prototype.firstChild=function(e){return e.firstChild},n.prototype.nextSibling=function(e){return e.nextSibling},n.prototype.parentElement=function(e){return e.parentNode},n.prototype.childNodes=function(e){return e.childNodes},n.prototype.childNodesAsList=function(e){for(var n=e.childNodes,t=new Array(n.length),l=0;l<n.length;l++)t[l]=n[l];return t},n.prototype.clearNodes=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},n.prototype.appendChild=function(e,n){e.appendChild(n)},n.prototype.removeChild=function(e,n){e.removeChild(n)},n.prototype.replaceChild=function(e,n,t){e.replaceChild(n,t)},n.prototype.remove=function(e){return e.parentNode&&e.parentNode.removeChild(e),e},n.prototype.insertBefore=function(e,n,t){e.insertBefore(t,n)},n.prototype.insertAllBefore=function(e,n,t){t.forEach(function(t){return e.insertBefore(t,n)})},n.prototype.insertAfter=function(e,n,t){e.insertBefore(t,n.nextSibling)},n.prototype.setInnerHTML=function(e,n){e.innerHTML=n},n.prototype.getText=function(e){return e.textContent},n.prototype.setText=function(e,n){e.textContent=n},n.prototype.getValue=function(e){return e.value},n.prototype.setValue=function(e,n){e.value=n},n.prototype.getChecked=function(e){return e.checked},n.prototype.setChecked=function(e,n){e.checked=n},n.prototype.createComment=function(e){return this.getDefaultDocument().createComment(e)},n.prototype.createTemplate=function(e){var n=this.getDefaultDocument().createElement("template");return n.innerHTML=e,n},n.prototype.createElement=function(e,n){return(n=n||this.getDefaultDocument()).createElement(e)},n.prototype.createElementNS=function(e,n,t){return(t=t||this.getDefaultDocument()).createElementNS(e,n)},n.prototype.createTextNode=function(e,n){return(n=n||this.getDefaultDocument()).createTextNode(e)},n.prototype.createScriptTag=function(e,n,t){var l=(t=t||this.getDefaultDocument()).createElement("SCRIPT");return l.setAttribute(e,n),l},n.prototype.createStyleElement=function(e,n){var t=(n=n||this.getDefaultDocument()).createElement("style");return this.appendChild(t,this.createTextNode(e,n)),t},n.prototype.createShadowRoot=function(e){return e.createShadowRoot()},n.prototype.getShadowRoot=function(e){return e.shadowRoot},n.prototype.getHost=function(e){return e.host},n.prototype.clone=function(e){return e.cloneNode(!0)},n.prototype.getElementsByClassName=function(e,n){return e.getElementsByClassName(n)},n.prototype.getElementsByTagName=function(e,n){return e.getElementsByTagName(n)},n.prototype.classList=function(e){return Array.prototype.slice.call(e.classList,0)},n.prototype.addClass=function(e,n){e.classList.add(n)},n.prototype.removeClass=function(e,n){e.classList.remove(n)},n.prototype.hasClass=function(e,n){return e.classList.contains(n)},n.prototype.setStyle=function(e,n,t){e.style[n]=t},n.prototype.removeStyle=function(e,n){e.style[n]=""},n.prototype.getStyle=function(e,n){return e.style[n]},n.prototype.hasStyle=function(e,n,t){var l=this.getStyle(e,n)||"";return t?l==t:l.length>0},n.prototype.tagName=function(e){return e.tagName},n.prototype.attributeMap=function(e){for(var n=new Map,t=e.attributes,l=0;l<t.length;l++){var r=t.item(l);n.set(r.name,r.value)}return n},n.prototype.hasAttribute=function(e,n){return e.hasAttribute(n)},n.prototype.hasAttributeNS=function(e,n,t){return e.hasAttributeNS(n,t)},n.prototype.getAttribute=function(e,n){return e.getAttribute(n)},n.prototype.getAttributeNS=function(e,n,t){return e.getAttributeNS(n,t)},n.prototype.setAttribute=function(e,n,t){e.setAttribute(n,t)},n.prototype.setAttributeNS=function(e,n,t,l){e.setAttributeNS(n,t,l)},n.prototype.removeAttribute=function(e,n){e.removeAttribute(n)},n.prototype.removeAttributeNS=function(e,n,t){e.removeAttributeNS(n,t)},n.prototype.templateAwareRoot=function(e){return this.isTemplateElement(e)?this.content(e):e},n.prototype.createHtmlDocument=function(){return document.implementation.createHTMLDocument("fakeTitle")},n.prototype.getDefaultDocument=function(){return document},n.prototype.getBoundingClientRect=function(e){try{return e.getBoundingClientRect()}catch(n){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}},n.prototype.getTitle=function(e){return e.title},n.prototype.setTitle=function(e,n){e.title=n||""},n.prototype.elementMatches=function(e,n){return!!this.isElementNode(e)&&(e.matches&&e.matches(n)||e.msMatchesSelector&&e.msMatchesSelector(n)||e.webkitMatchesSelector&&e.webkitMatchesSelector(n))},n.prototype.isTemplateElement=function(e){return this.isElementNode(e)&&"TEMPLATE"===e.nodeName},n.prototype.isTextNode=function(e){return e.nodeType===Node.TEXT_NODE},n.prototype.isCommentNode=function(e){return e.nodeType===Node.COMMENT_NODE},n.prototype.isElementNode=function(e){return e.nodeType===Node.ELEMENT_NODE},n.prototype.hasShadowRoot=function(e){return null!=e.shadowRoot&&e instanceof HTMLElement},n.prototype.isShadowRoot=function(e){return e instanceof DocumentFragment},n.prototype.importIntoDoc=function(e){return document.importNode(this.templateAwareRoot(e),!0)},n.prototype.adoptNode=function(e){return document.adoptNode(e)},n.prototype.getHref=function(e){return e.getAttribute("href")},n.prototype.getEventKey=function(e){var n=e.key;if(null==n){if(null==(n=e.keyIdentifier))return"Unidentified";n.startsWith("U+")&&(n=String.fromCharCode(parseInt(n.substring(2),16)),3===e.location&&lc.hasOwnProperty(n)&&(n=lc[n]))}return tc[n]||n},n.prototype.getGlobalEventTarget=function(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null},n.prototype.getHistory=function(){return window.history},n.prototype.getLocation=function(){return window.location},n.prototype.getBaseHref=function(e){var n,t=oc||(oc=document.querySelector("base"))?oc.getAttribute("href"):null;return null==t?null:(n=t,rc||(rc=document.createElement("a")),rc.setAttribute("href",n),"/"===rc.pathname.charAt(0)?rc.pathname:"/"+rc.pathname)},n.prototype.resetBaseElement=function(){oc=null},n.prototype.getUserAgent=function(){return window.navigator.userAgent},n.prototype.setData=function(e,n,t){this.setAttribute(e,"data-"+n,t)},n.prototype.getData=function(e,n){return this.getAttribute(e,"data-"+n)},n.prototype.getComputedStyle=function(e){return getComputedStyle(e)},n.prototype.supportsWebAnimation=function(){return"function"==typeof Element.prototype.animate},n.prototype.performanceNow=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},n.prototype.supportsCookies=function(){return!0},n.prototype.getCookie=function(e){return function(e,n){var t,l;n=encodeURIComponent(n);try{for(var r=s(e.split(";")),i=r.next();!i.done;i=r.next()){var o=i.value,u=o.indexOf("="),c=a(-1==u?[o,""]:[o.slice(0,u),o.slice(u+1)],2),p=c[1];if(c[0].trim()===n)return decodeURIComponent(p)}}catch(h){t={error:h}}finally{try{i&&!i.done&&(l=r.return)&&l.call(r)}finally{if(t)throw t.error}}return null}(document.cookie,e)},n.prototype.setCookie=function(e,n){document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(n)},n}(function(e){function n(){var n=e.call(this)||this;n._animationPrefix=null,n._transitionEnd=null;try{var t=n.createElement("div",document);if(null!=n.getStyle(t,"animationName"))n._animationPrefix="";else for(var l=["Webkit","Moz","O","ms"],r=0;r<l.length;r++)if(null!=n.getStyle(t,l[r]+"AnimationName")){n._animationPrefix="-"+l[r].toLowerCase()+"-";break}var i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(i).forEach(function(e){null!=n.getStyle(t,e)&&(n._transitionEnd=i[e])})}catch(o){n._animationPrefix=null,n._transitionEnd=null}return n}return r(n,e),n.prototype.getDistributedNodes=function(e){return e.getDistributedNodes()},n.prototype.resolveAndSetHref=function(e,n,t){e.href=null==t?n:n+"/../"+t},n.prototype.supportsDOMEvents=function(){return!0},n.prototype.supportsNativeShadowDOM=function(){return"function"==typeof document.body.createShadowRoot},n.prototype.getAnimationPrefix=function(){return this._animationPrefix?this._animationPrefix:""},n.prototype.getTransitionEnd=function(){return this._transitionEnd?this._transitionEnd:""},n.prototype.supportsAnimation=function(){return null!=this._animationPrefix&&null!=this._transitionEnd},n}(function(){function e(){this.resourceLoaderType=null}return Object.defineProperty(e.prototype,"attrToPropMap",{get:function(){return this._attrToPropMap},set:function(e){this._attrToPropMap=e},enumerable:!0,configurable:!0}),e}())),oc=null,uc=Zs;function sc(){return!!window.history.pushState}var ac=function(e){function n(n){var t=e.call(this)||this;return t._doc=n,t._init(),t}var t;return r(n,e),n.prototype._init=function(){this.location=Ja().getLocation(),this._history=Ja().getHistory()},n.prototype.getBaseHrefFromDOM=function(){return Ja().getBaseHref(this._doc)},n.prototype.onPopState=function(e){Ja().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)},n.prototype.onHashChange=function(e){Ja().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)},Object.defineProperty(n.prototype,"pathname",{get:function(){return this.location.pathname},set:function(e){this.location.pathname=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"search",{get:function(){return this.location.search},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hash",{get:function(){return this.location.hash},enumerable:!0,configurable:!0}),n.prototype.pushState=function(e,n,t){sc()?this._history.pushState(e,n,t):this.location.hash=t},n.prototype.replaceState=function(e,n,t){sc()?this._history.replaceState(e,n,t):this.location.hash=t},n.prototype.forward=function(){this._history.forward()},n.prototype.back=function(){this._history.back()},o([(t=He(uc),function(e,n){t(e,n,0)}),u("design:paramtypes",[Object])],n)}(hs),cc=new ye("TRANSITION_ID"),pc=[{provide:At,useFactory:function(e,n,t){return function(){t.get(wt).donePromise.then(function(){var t=Ja();Array.prototype.slice.apply(t.querySelectorAll(n,"style[ng-transition]")).filter(function(n){return t.getAttribute(n,"ng-transition")===e}).forEach(function(e){return t.remove(e)})})}},deps:[cc,uc,on],multi:!0}],hc=function(){function e(){}return e.init=function(){var n;n=new e,ul=n},e.prototype.addToWindow=function(e){Ie.getAngularTestability=function(n,t){void 0===t&&(t=!0);var l=e.findTestabilityInTree(n,t);if(null==l)throw new Error("Could not find testability for element.");return l},Ie.getAllAngularTestabilities=function(){return e.getAllTestabilities()},Ie.getAllAngularRootElements=function(){return e.getAllRootElements()},Ie.frameworkStabilizers||(Ie.frameworkStabilizers=[]),Ie.frameworkStabilizers.push(function(e){var n=Ie.getAllAngularTestabilities(),t=n.length,l=!1,r=function(n){l=l||n,0==--t&&e(l)};n.forEach(function(e){e.whenStable(r)})})},e.prototype.findTestabilityInTree=function(e,n,t){if(null==n)return null;var l=e.getTestability(n);return null!=l?l:t?Ja().isShadowRoot(n)?this.findTestabilityInTree(e,Ja().getHost(n),!0):this.findTestabilityInTree(e,Ja().parentElement(n),!0):null},e}();function dc(e,n){"undefined"!=typeof COMPILED&&COMPILED||((Ie.ng=Ie.ng||{})[e]=n)}var fc={ApplicationRef:fl,NgZone:Zt};function gc(e){return wl(e)}var vc=new ye("EventManagerPlugins"),mc=function(){function e(e,n){var t=this;this._zone=n,this._eventNameToPlugin=new Map,e.forEach(function(e){return e.manager=t}),this._plugins=e.slice().reverse()}return e.prototype.addEventListener=function(e,n,t){return this._findPluginFor(n).addEventListener(e,n,t)},e.prototype.addGlobalEventListener=function(e,n,t){return this._findPluginFor(n).addGlobalEventListener(e,n,t)},e.prototype.getZone=function(){return this._zone},e.prototype._findPluginFor=function(e){var n=this._eventNameToPlugin.get(e);if(n)return n;for(var t=this._plugins,l=0;l<t.length;l++){var r=t[l];if(r.supports(e))return this._eventNameToPlugin.set(e,r),r}throw new Error("No event manager plugin found for event "+e)},e}(),yc=function(){function e(e){this._doc=e}return e.prototype.addGlobalEventListener=function(e,n,t){var l=Ja().getGlobalEventTarget(this._doc,e);if(!l)throw new Error("Unsupported event target "+l+" for event "+n);return this.addEventListener(l,n,t)},e}(),Sc=function(){function e(){this._stylesSet=new Set}return e.prototype.addStyles=function(e){var n=this,t=new Set;e.forEach(function(e){n._stylesSet.has(e)||(n._stylesSet.add(e),t.add(e))}),this.onStylesAdded(t)},e.prototype.onStylesAdded=function(e){},e.prototype.getAllStyles=function(){return Array.from(this._stylesSet)},e}(),Ec=function(e){function n(n){var t=e.call(this)||this;return t._doc=n,t._hostNodes=new Set,t._styleNodes=new Set,t._hostNodes.add(n.head),t}return r(n,e),n.prototype._addStylesToHost=function(e,n){var t=this;e.forEach(function(e){var l=t._doc.createElement("style");l.textContent=e,t._styleNodes.add(n.appendChild(l))})},n.prototype.addHost=function(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)},n.prototype.removeHost=function(e){this._hostNodes.delete(e)},n.prototype.onStylesAdded=function(e){var n=this;this._hostNodes.forEach(function(t){return n._addStylesToHost(e,t)})},n.prototype.ngOnDestroy=function(){this._styleNodes.forEach(function(e){return Ja().remove(e)})},n}(Sc),bc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Oc=/%COMP%/g,Rc="_nghost-%COMP%",Cc="_ngcontent-%COMP%";function _c(e,n,t){for(var l=0;l<n.length;l++){var r=n[l];Array.isArray(r)?_c(e,r,t):(r=r.replace(Oc,e),t.push(r))}return t}function Tc(e){return function(n){!1===e(n)&&(n.preventDefault(),n.returnValue=!1)}}var Ic=function(){function e(e,n,t){this.eventManager=e,this.sharedStylesHost=n,this.appId=t,this.rendererByCompId=new Map,this.defaultRenderer=new Ac(e)}return e.prototype.createRenderer=function(e,n){if(!e||!n)return this.defaultRenderer;switch(n.encapsulation){case Ue.Emulated:var t=this.rendererByCompId.get(n.id);return t||(t=new Dc(this.eventManager,this.sharedStylesHost,n,this.appId),this.rendererByCompId.set(n.id,t)),t.applyToHost(e),t;case Ue.Native:case Ue.ShadowDom:return new kc(this.eventManager,this.sharedStylesHost,e,n);default:if(!this.rendererByCompId.has(n.id)){var l=_c(n.id,n.styles,[]);this.sharedStylesHost.addStyles(l),this.rendererByCompId.set(n.id,this.defaultRenderer)}return this.defaultRenderer}},e.prototype.begin=function(){},e.prototype.end=function(){},e}(),Ac=function(){function e(e){this.eventManager=e,this.data=Object.create(null)}return e.prototype.destroy=function(){},e.prototype.createElement=function(e,n){return n?document.createElementNS(bc[n],e):document.createElement(e)},e.prototype.createComment=function(e){return document.createComment(e)},e.prototype.createText=function(e){return document.createTextNode(e)},e.prototype.appendChild=function(e,n){e.appendChild(n)},e.prototype.insertBefore=function(e,n,t){e&&e.insertBefore(n,t)},e.prototype.removeChild=function(e,n){e&&e.removeChild(n)},e.prototype.selectRootElement=function(e,n){var t="string"==typeof e?document.querySelector(e):e;if(!t)throw new Error('The selector "'+e+'" did not match any elements');return n||(t.textContent=""),t},e.prototype.parentNode=function(e){return e.parentNode},e.prototype.nextSibling=function(e){return e.nextSibling},e.prototype.setAttribute=function(e,n,t,l){if(l){n=l+":"+n;var r=bc[l];r?e.setAttributeNS(r,n,t):e.setAttribute(n,t)}else e.setAttribute(n,t)},e.prototype.removeAttribute=function(e,n,t){if(t){var l=bc[t];l?e.removeAttributeNS(l,n):e.removeAttribute(t+":"+n)}else e.removeAttribute(n)},e.prototype.addClass=function(e,n){e.classList.add(n)},e.prototype.removeClass=function(e,n){e.classList.remove(n)},e.prototype.setStyle=function(e,n,t,l){l&xn.DashCase?e.style.setProperty(n,t,l&xn.Important?"important":""):e.style[n]=t},e.prototype.removeStyle=function(e,n,t){t&xn.DashCase?e.style.removeProperty(n):e.style[n]=""},e.prototype.setProperty=function(e,n,t){Nc(n,"property"),e[n]=t},e.prototype.setValue=function(e,n){e.nodeValue=n},e.prototype.listen=function(e,n,t){return Nc(n,"listener"),"string"==typeof e?this.eventManager.addGlobalEventListener(e,n,Tc(t)):this.eventManager.addEventListener(e,n,Tc(t))},e}(),wc="@".charCodeAt(0);function Nc(e,n){if(e.charCodeAt(0)===wc)throw new Error("Found the synthetic "+n+" "+e+'. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.')}var Pc,Dc=function(e){function n(n,t,l,r){var i=e.call(this,n)||this;i.component=l;var o=_c(r+"-"+l.id,l.styles,[]);return t.addStyles(o),i.contentAttr=Cc.replace(Oc,r+"-"+l.id),i.hostAttr=Rc.replace(Oc,r+"-"+l.id),i}return r(n,e),n.prototype.applyToHost=function(n){e.prototype.setAttribute.call(this,n,this.hostAttr,"")},n.prototype.createElement=function(n,t){var l=e.prototype.createElement.call(this,n,t);return e.prototype.setAttribute.call(this,l,this.contentAttr,""),l},n}(Ac),kc=function(e){function n(n,t,l,r){var i=e.call(this,n)||this;i.sharedStylesHost=t,i.hostEl=l,i.component=r,i.shadowRoot=r.encapsulation===Ue.ShadowDom?l.attachShadow({mode:"open"}):l.createShadowRoot(),i.sharedStylesHost.addHost(i.shadowRoot);for(var o=_c(r.id,r.styles,[]),u=0;u<o.length;u++){var s=document.createElement("style");s.textContent=o[u],i.shadowRoot.appendChild(s)}return i}return r(n,e),n.prototype.nodeOrShadowRoot=function(e){return e===this.hostEl?this.shadowRoot:e},n.prototype.destroy=function(){this.sharedStylesHost.removeHost(this.shadowRoot)},n.prototype.appendChild=function(n,t){return e.prototype.appendChild.call(this,this.nodeOrShadowRoot(n),t)},n.prototype.insertBefore=function(n,t,l){return e.prototype.insertBefore.call(this,this.nodeOrShadowRoot(n),t,l)},n.prototype.removeChild=function(n,t){return e.prototype.removeChild.call(this,this.nodeOrShadowRoot(n),t)},n.prototype.parentNode=function(n){return this.nodeOrShadowRoot(e.prototype.parentNode.call(this,this.nodeOrShadowRoot(n)))},n}(Ac),Mc="undefined"!=typeof Zone&&Zone.__symbol__||function(e){return"__zone_symbol__"+e},xc=Mc("addEventListener"),Lc=Mc("removeEventListener"),Fc={},Uc="__zone_symbol__propagationStopped";"undefined"!=typeof Zone&&Zone[Mc("BLACK_LISTED_EVENTS")]&&(Pc={});var Hc=function(e){return!!Pc&&Pc.hasOwnProperty(e)},Gc=function(e){var n=Fc[e.type];if(n){var t=this[n];if(t){var l=[e];if(1===t.length)return(o=t[0]).zone!==Zone.current?o.zone.run(o.handler,this,l):o.handler.apply(this,l);for(var r=t.slice(),i=0;i<r.length&&!0!==e[Uc];i++){var o;(o=r[i]).zone!==Zone.current?o.zone.run(o.handler,this,l):o.handler.apply(this,l)}}}},Bc=function(e){function n(n,t,l){var r=e.call(this,n)||this;return r.ngZone=t,l&&function(e){return e===Js}(l)||r.patchEvent(),r}return r(n,e),n.prototype.patchEvent=function(){if("undefined"!=typeof Event&&Event&&Event.prototype&&!Event.prototype.__zone_symbol__stopImmediatePropagation){var e=Event.prototype.__zone_symbol__stopImmediatePropagation=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[Uc]=!0),e&&e.apply(this,arguments)}}},n.prototype.supports=function(e){return!0},n.prototype.addEventListener=function(e,n,t){var l=this,r=t;if(!e[xc]||Zt.isInAngularZone()&&!Hc(n))e.addEventListener(n,r,!1);else{var i=Fc[n];i||(i=Fc[n]=Mc("ANGULAR"+n+"FALSE"));var o=e[i],u=o&&o.length>0;o||(o=e[i]=[]);var s=Hc(n)?Zone.root:Zone.current;if(0===o.length)o.push({zone:s,handler:r});else{for(var a=!1,c=0;c<o.length;c++)if(o[c].handler===r){a=!0;break}a||o.push({zone:s,handler:r})}u||e[xc](n,Gc,!1)}return function(){return l.removeEventListener(e,n,r)}},n.prototype.removeEventListener=function(e,n,t){var l=e[Lc];if(!l)return e.removeEventListener.apply(e,[n,t,!1]);var r=Fc[n],i=r&&e[r];if(!i)return e.removeEventListener.apply(e,[n,t,!1]);for(var o=!1,u=0;u<i.length;u++)if(i[u].handler===t){o=!0,i.splice(u,1);break}o?0===i.length&&l.apply(e,[n,Gc,!1]):e.removeEventListener.apply(e,[n,t,!1])},n}(yc),Vc={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},Wc=new ye("HammerGestureConfig"),jc=new ye("HammerLoader"),zc=function(){function e(){this.events=[],this.overrides={}}return e.prototype.buildHammer=function(e){var n=new Hammer(e,this.options);for(var t in n.get("pinch").set({enable:!0}),n.get("rotate").set({enable:!0}),this.overrides)n.get(t).set(this.overrides[t]);return n},e}(),Yc=function(e){function n(n,t,l,r){var i=e.call(this,n)||this;return i._config=t,i.console=l,i.loader=r,i}return r(n,e),n.prototype.supports=function(e){return!(!Vc.hasOwnProperty(e.toLowerCase())&&!this.isCustomEvent(e)||!window.Hammer&&!this.loader&&(this.console.warn('The "'+e+'" event cannot be bound because Hammer.JS is not loaded and no custom loader has been specified.'),1))},n.prototype.addEventListener=function(e,n,t){var l=this,r=this.manager.getZone();if(n=n.toLowerCase(),!window.Hammer&&this.loader){var i=!1,o=function(){i=!0};return this.loader().then(function(){if(!window.Hammer)return l.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(o=function(){});i||(o=l.addEventListener(e,n,t))}).catch(function(){l.console.warn('The "'+n+'" event cannot be bound because the custom Hammer.JS loader failed.'),o=function(){}}),function(){o()}}return r.runOutsideAngular(function(){var i=l._config.buildHammer(e),o=function(e){r.runGuarded(function(){t(e)})};return i.on(n,o),function(){i.off(n,o),"function"==typeof i.destroy&&i.destroy()}})},n.prototype.isCustomEvent=function(e){return this._config.events.indexOf(e)>-1},n}(yc),Kc=["alt","control","meta","shift"],qc={alt:function(e){return e.altKey},control:function(e){return e.ctrlKey},meta:function(e){return e.metaKey},shift:function(e){return e.shiftKey}},$c=function(e){function n(n){return e.call(this,n)||this}var t;return r(n,e),t=n,n.prototype.supports=function(e){return null!=t.parseEventName(e)},n.prototype.addEventListener=function(e,n,l){var r=t.parseEventName(n),i=t.eventCallback(r.fullKey,l,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return Ja().onAndCancel(e,r.domEventName,i)})},n.parseEventName=function(e){var n=e.toLowerCase().split("."),l=n.shift();if(0===n.length||"keydown"!==l&&"keyup"!==l)return null;var r=t._normalizeKey(n.pop()),i="";if(Kc.forEach(function(e){var t=n.indexOf(e);t>-1&&(n.splice(t,1),i+=e+".")}),i+=r,0!=n.length||0===r.length)return null;var o={};return o.domEventName=l,o.fullKey=i,o},n.getEventFullKey=function(e){var n="",t=Ja().getEventKey(e);return" "===(t=t.toLowerCase())?t="space":"."===t&&(t="dot"),Kc.forEach(function(l){l!=t&&(0,qc[l])(e)&&(n+=l+".")}),n+=t},n.eventCallback=function(e,n,l){return function(r){t.getEventFullKey(r)===e&&l.runGuarded(function(){return n(r)})}},n._normalizeKey=function(e){switch(e){case"esc":return"escape";default:return e}},n}(yc),Qc=function(){return function(){}}(),Zc=function(e){function n(n){var t=e.call(this)||this;return t._doc=n,t}return r(n,e),n.prototype.sanitize=function(e,n){if(null==n)return null;switch(e){case Un.NONE:return n;case Un.HTML:return n instanceof Jc?n.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(n,"HTML"),function(e,n){var t=null;try{Qn=Qn||new jn(e);var l=n?String(n):"";t=Qn.getInertBodyElement(l);var r=5,i=l;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,l=i,i=t.innerHTML,t=Qn.getInertBodyElement(l)}while(l!==i);var o=new ot,u=o.sanitizeChildren(ct(t)||t);return Wn()&&o.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),u}finally{if(t)for(var s=ct(t)||t;s.firstChild;)s.removeChild(s.firstChild)}}(this._doc,String(n)));case Un.STYLE:return n instanceof ep?n.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(n,"Style"),function(e){if(!(e=String(e).trim()))return"";var n=e.match(gt);return n&&Kn(n[1])===n[1]||e.match(ft)&&function(e){for(var n=!0,t=!0,l=0;l<e.length;l++){var r=e.charAt(l);"'"===r&&t?n=!n:'"'===r&&n&&(t=!t)}return n&&t}(e)?e:(Wn()&&console.warn("WARNING: sanitizing unsafe style value "+e+" (see http://g.co/ng/security#xss)."),"unsafe")}(n));case Un.SCRIPT:if(n instanceof np)return n.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(n,"Script"),new Error("unsafe value used in a script context");case Un.URL:return n instanceof lp||n instanceof tp?n.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(n,"URL"),Kn(String(n)));case Un.RESOURCE_URL:if(n instanceof lp)return n.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(n,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext "+e+" (see http://g.co/ng/security#xss)")}},n.prototype.checkNotSafeValue=function(e,n){if(e instanceof Xc)throw new Error("Required a safe "+n+", got a "+e.getTypeName()+" (see http://g.co/ng/security#xss)")},n.prototype.bypassSecurityTrustHtml=function(e){return new Jc(e)},n.prototype.bypassSecurityTrustStyle=function(e){return new ep(e)},n.prototype.bypassSecurityTrustScript=function(e){return new np(e)},n.prototype.bypassSecurityTrustUrl=function(e){return new tp(e)},n.prototype.bypassSecurityTrustResourceUrl=function(e){return new lp(e)},n}(Qc),Xc=function(){function e(e){this.changingThisBreaksApplicationSecurity=e}return e.prototype.toString=function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"},e}(),Jc=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r(n,e),n.prototype.getTypeName=function(){return"HTML"},n}(Xc),ep=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r(n,e),n.prototype.getTypeName=function(){return"Style"},n}(Xc),np=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r(n,e),n.prototype.getTypeName=function(){return"Script"},n}(Xc),tp=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r(n,e),n.prototype.getTypeName=function(){return"URL"},n}(Xc),lp=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r(n,e),n.prototype.getTypeName=function(){return"ResourceURL"},n}(Xc),rp=cl(Yl,"browser",[{provide:Mt,useValue:Xs},{provide:kt,useValue:function(){ic.makeCurrent(),hc.init()},multi:!0},{provide:hs,useClass:ac,deps:[uc]},{provide:uc,useFactory:function(){return document},deps:[]}]);function ip(){return new _t}var op=function(){function e(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}var n;return n=e,e.withServerTransition=function(e){return{ngModule:n,providers:[{provide:Nt,useValue:e.appId},{provide:cc,useExisting:Nt},pc]}},e}();"undefined"!=typeof window&&window;var up=function(){return function(e,n){this.id=e,this.url=n}}(),sp=function(e){function n(n,t,l,r){void 0===l&&(l="imperative"),void 0===r&&(r=null);var i=e.call(this,n,t)||this;return i.navigationTrigger=l,i.restoredState=r,i}return r(n,e),n.prototype.toString=function(){return"NavigationStart(id: "+this.id+", url: '"+this.url+"')"},n}(up),ap=function(e){function n(n,t,l){var r=e.call(this,n,t)||this;return r.urlAfterRedirects=l,r}return r(n,e),n.prototype.toString=function(){return"NavigationEnd(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"')"},n}(up),cp=function(e){function n(n,t,l){var r=e.call(this,n,t)||this;return r.reason=l,r}return r(n,e),n.prototype.toString=function(){return"NavigationCancel(id: "+this.id+", url: '"+this.url+"')"},n}(up),pp=function(e){function n(n,t,l){var r=e.call(this,n,t)||this;return r.error=l,r}return r(n,e),n.prototype.toString=function(){return"NavigationError(id: "+this.id+", url: '"+this.url+"', error: "+this.error+")"},n}(up),hp=function(e){function n(n,t,l,r){var i=e.call(this,n,t)||this;return i.urlAfterRedirects=l,i.state=r,i}return r(n,e),n.prototype.toString=function(){return"RoutesRecognized(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},n}(up),dp=function(e){function n(n,t,l,r){var i=e.call(this,n,t)||this;return i.urlAfterRedirects=l,i.state=r,i}return r(n,e),n.prototype.toString=function(){return"GuardsCheckStart(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},n}(up),fp=function(e){function n(n,t,l,r,i){var o=e.call(this,n,t)||this;return o.urlAfterRedirects=l,o.state=r,o.shouldActivate=i,o}return r(n,e),n.prototype.toString=function(){return"GuardsCheckEnd(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+", shouldActivate: "+this.shouldActivate+")"},n}(up),gp=function(e){function n(n,t,l,r){var i=e.call(this,n,t)||this;return i.urlAfterRedirects=l,i.state=r,i}return r(n,e),n.prototype.toString=function(){return"ResolveStart(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},n}(up),vp=function(e){function n(n,t,l,r){var i=e.call(this,n,t)||this;return i.urlAfterRedirects=l,i.state=r,i}return r(n,e),n.prototype.toString=function(){return"ResolveEnd(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},n}(up),mp=function(){function e(e){this.route=e}return e.prototype.toString=function(){return"RouteConfigLoadStart(path: "+this.route.path+")"},e}(),yp=function(){function e(e){this.route=e}return e.prototype.toString=function(){return"RouteConfigLoadEnd(path: "+this.route.path+")"},e}(),Sp=function(){function e(e){this.snapshot=e}return e.prototype.toString=function(){return"ChildActivationStart(path: '"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"")+"')"},e}(),Ep=function(){function e(e){this.snapshot=e}return e.prototype.toString=function(){return"ChildActivationEnd(path: '"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"")+"')"},e}(),bp=function(){function e(e){this.snapshot=e}return e.prototype.toString=function(){return"ActivationStart(path: '"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"")+"')"},e}(),Op=function(){function e(e){this.snapshot=e}return e.prototype.toString=function(){return"ActivationEnd(path: '"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"")+"')"},e}(),Rp=function(){function e(e,n,t){this.routerEvent=e,this.position=n,this.anchor=t}return e.prototype.toString=function(){return"Scroll(anchor: '"+this.anchor+"', position: '"+(this.position?this.position[0]+", "+this.position[1]:null)+"')"},e}(),Cp=function(){return function(){}}(),_p="primary",Tp=function(){function e(e){this.params=e||{}}return e.prototype.has=function(e){return this.params.hasOwnProperty(e)},e.prototype.get=function(e){if(this.has(e)){var n=this.params[e];return Array.isArray(n)?n[0]:n}return null},e.prototype.getAll=function(e){if(this.has(e)){var n=this.params[e];return Array.isArray(n)?n:[n]}return[]},Object.defineProperty(e.prototype,"keys",{get:function(){return Object.keys(this.params)},enumerable:!0,configurable:!0}),e}();function Ip(e){return new Tp(e)}var Ap="ngNavigationCancelingError";function wp(e){var n=Error("NavigationCancelingError: "+e);return n[Ap]=!0,n}function Np(e,n,t){var l=t.path.split("/");if(l.length>e.length)return null;if("full"===t.pathMatch&&(n.hasChildren()||l.length<e.length))return null;for(var r={},i=0;i<l.length;i++){var o=l[i],u=e[i];if(o.startsWith(":"))r[o.substring(1)]=u;else if(o!==u.path)return null}return{consumed:e.slice(0,l.length),posParams:r}}var Pp=function(){return function(e,n){this.routes=e,this.module=n}}();function Dp(e,n){void 0===n&&(n="");for(var t=0;t<e.length;t++){var l=e[t];kp(l,Mp(n,l))}}function kp(e,n){if(!e)throw new Error("\n      Invalid configuration of route '"+n+"': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    ");if(Array.isArray(e))throw new Error("Invalid configuration of route '"+n+"': Array cannot be specified");if(!e.component&&!e.children&&!e.loadChildren&&e.outlet&&e.outlet!==_p)throw new Error("Invalid configuration of route '"+n+"': a componentless route without children or loadChildren cannot have a named outlet set");if(e.redirectTo&&e.children)throw new Error("Invalid configuration of route '"+n+"': redirectTo and children cannot be used together");if(e.redirectTo&&e.loadChildren)throw new Error("Invalid configuration of route '"+n+"': redirectTo and loadChildren cannot be used together");if(e.children&&e.loadChildren)throw new Error("Invalid configuration of route '"+n+"': children and loadChildren cannot be used together");if(e.redirectTo&&e.component)throw new Error("Invalid configuration of route '"+n+"': redirectTo and component cannot be used together");if(e.path&&e.matcher)throw new Error("Invalid configuration of route '"+n+"': path and matcher cannot be used together");if(void 0===e.redirectTo&&!e.component&&!e.children&&!e.loadChildren)throw new Error("Invalid configuration of route '"+n+"'. One of the following must be provided: component, redirectTo, children or loadChildren");if(void 0===e.path&&void 0===e.matcher)throw new Error("Invalid configuration of route '"+n+"': routes must have either a path or a matcher specified");if("string"==typeof e.path&&"/"===e.path.charAt(0))throw new Error("Invalid configuration of route '"+n+"': path cannot start with a slash");if(""===e.path&&void 0!==e.redirectTo&&void 0===e.pathMatch)throw new Error("Invalid configuration of route '{path: \""+n+'", redirectTo: "'+e.redirectTo+"\"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.");if(void 0!==e.pathMatch&&"full"!==e.pathMatch&&"prefix"!==e.pathMatch)throw new Error("Invalid configuration of route '"+n+"': pathMatch can only be set to 'prefix' or 'full'");e.children&&Dp(e.children,n)}function Mp(e,n){return n?e||n.path?e&&!n.path?e+"/":!e&&n.path?n.path:e+"/"+n.path:"":e}function xp(e){var n=e.children&&e.children.map(xp),t=n?i({},e,{children:n}):i({},e);return!t.component&&(n||t.loadChildren)&&t.outlet&&t.outlet!==_p&&(t.component=Cp),t}function Lp(e,n){var t,l=Object.keys(e),r=Object.keys(n);if(l.length!=r.length)return!1;for(var i=0;i<l.length;i++)if(e[t=l[i]]!==n[t])return!1;return!0}function Fp(e){return Array.prototype.concat.apply([],e)}function Up(e){return e.length>0?e[e.length-1]:null}function Hp(e,n){for(var t in e)e.hasOwnProperty(t)&&n(e[t],t)}function Gp(e){return It(e)?e:Tt(e)?Z(Promise.resolve(e)):ta(e)}function Bp(e,n,t){return t?function(e,n){return Lp(e,n)}(e.queryParams,n.queryParams)&&function e(n,t){if(!zp(n.segments,t.segments))return!1;if(n.numberOfChildren!==t.numberOfChildren)return!1;for(var l in t.children){if(!n.children[l])return!1;if(!e(n.children[l],t.children[l]))return!1}return!0}(e.root,n.root):function(e,n){return Object.keys(n).length<=Object.keys(e).length&&Object.keys(n).every(function(t){return n[t]===e[t]})}(e.queryParams,n.queryParams)&&function e(n,t){return function n(t,l,r){if(t.segments.length>r.length)return!!zp(o=t.segments.slice(0,r.length),r)&&!l.hasChildren();if(t.segments.length===r.length){if(!zp(t.segments,r))return!1;for(var i in l.children){if(!t.children[i])return!1;if(!e(t.children[i],l.children[i]))return!1}return!0}var o=r.slice(0,t.segments.length),u=r.slice(t.segments.length);return!!zp(t.segments,o)&&!!t.children[_p]&&n(t.children[_p],l,u)}(n,t,t.segments)}(e.root,n.root)}var Vp=function(){function e(e,n,t){this.root=e,this.queryParams=n,this.fragment=t}return Object.defineProperty(e.prototype,"queryParamMap",{get:function(){return this._queryParamMap||(this._queryParamMap=Ip(this.queryParams)),this._queryParamMap},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return $p.serialize(this)},e}(),Wp=function(){function e(e,n){var t=this;this.segments=e,this.children=n,this.parent=null,Hp(n,function(e,n){return e.parent=t})}return e.prototype.hasChildren=function(){return this.numberOfChildren>0},Object.defineProperty(e.prototype,"numberOfChildren",{get:function(){return Object.keys(this.children).length},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return Qp(this)},e}(),jp=function(){function e(e,n){this.path=e,this.parameters=n}return Object.defineProperty(e.prototype,"parameterMap",{get:function(){return this._parameterMap||(this._parameterMap=Ip(this.parameters)),this._parameterMap},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return th(this)},e}();function zp(e,n){return e.length===n.length&&e.every(function(e,t){return e.path===n[t].path})}function Yp(e,n){var t=[];return Hp(e.children,function(e,l){l===_p&&(t=t.concat(n(e,l)))}),Hp(e.children,function(e,l){l!==_p&&(t=t.concat(n(e,l)))}),t}var Kp=function(){return function(){}}(),qp=function(){function e(){}return e.prototype.parse=function(e){var n=new uh(e);return new Vp(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())},e.prototype.serialize=function(e){var n,t;return"/"+function e(n,t){if(!n.hasChildren())return Qp(n);if(t){var l=n.children[_p]?e(n.children[_p],!1):"",r=[];return Hp(n.children,function(n,t){t!==_p&&r.push(t+":"+e(n,!1))}),r.length>0?l+"("+r.join("//")+")":l}var i=Yp(n,function(t,l){return l===_p?[e(n.children[_p],!1)]:[l+":"+e(t,!1)]});return Qp(n)+"/("+i.join("//")+")"}(e.root,!0)+(n=e.queryParams,(t=Object.keys(n).map(function(e){var t=n[e];return Array.isArray(t)?t.map(function(n){return Xp(e)+"="+Xp(n)}).join("&"):Xp(e)+"="+Xp(t)})).length?"?"+t.join("&"):"")+("string"==typeof e.fragment?"#"+encodeURI(e.fragment):"")},e}(),$p=new qp;function Qp(e){return e.segments.map(function(e){return th(e)}).join("/")}function Zp(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Xp(e){return Zp(e).replace(/%3B/gi,";")}function Jp(e){return Zp(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function eh(e){return decodeURIComponent(e)}function nh(e){return eh(e.replace(/\+/g,"%20"))}function th(e){return""+Jp(e.path)+(n=e.parameters,Object.keys(n).map(function(e){return";"+Jp(e)+"="+Jp(n[e])}).join(""));var n}var lh=/^[^\/()?;=#]+/;function rh(e){var n=e.match(lh);return n?n[0]:""}var ih=/^[^=?&#]+/,oh=/^[^?&#]+/,uh=function(){function e(e){this.url=e,this.remaining=e}return e.prototype.parseRootSegment=function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Wp([],{}):new Wp([],this.parseChildren())},e.prototype.parseQueryParams=function(){var e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e},e.prototype.parseFragment=function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null},e.prototype.parseChildren=function(){if(""===this.remaining)return{};this.consumeOptional("/");var e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());var n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));var t={};return this.peekStartsWith("(")&&(t=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(t[_p]=new Wp(e,n)),t},e.prototype.parseSegment=function(){var e=rh(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '"+this.remaining+"'.");return this.capture(e),new jp(eh(e),this.parseMatrixParams())},e.prototype.parseMatrixParams=function(){for(var e={};this.consumeOptional(";");)this.parseParam(e);return e},e.prototype.parseParam=function(e){var n=rh(this.remaining);if(n){this.capture(n);var t="";if(this.consumeOptional("=")){var l=rh(this.remaining);l&&this.capture(t=l)}e[eh(n)]=eh(t)}},e.prototype.parseQueryParam=function(e){var n,t=(n=this.remaining.match(ih))?n[0]:"";if(t){this.capture(t);var l="";if(this.consumeOptional("=")){var r=function(e){var n=e.match(oh);return n?n[0]:""}(this.remaining);r&&this.capture(l=r)}var i=nh(t),o=nh(l);if(e.hasOwnProperty(i)){var u=e[i];Array.isArray(u)||(e[i]=u=[u]),u.push(o)}else e[i]=o}},e.prototype.parseParens=function(e){var n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var t=rh(this.remaining),l=this.remaining[t.length];if("/"!==l&&")"!==l&&";"!==l)throw new Error("Cannot parse url '"+this.url+"'");var r=void 0;t.indexOf(":")>-1?(r=t.substr(0,t.indexOf(":")),this.capture(r),this.capture(":")):e&&(r=_p);var i=this.parseChildren();n[r]=1===Object.keys(i).length?i[_p]:new Wp([],i),this.consumeOptional("//")}return n},e.prototype.peekStartsWith=function(e){return this.remaining.startsWith(e)},e.prototype.consumeOptional=function(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)},e.prototype.capture=function(e){if(!this.consumeOptional(e))throw new Error('Expected "'+e+'".')},e}(),sh=function(){function e(e){this._root=e}return Object.defineProperty(e.prototype,"root",{get:function(){return this._root.value},enumerable:!0,configurable:!0}),e.prototype.parent=function(e){var n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null},e.prototype.children=function(e){var n=ah(e,this._root);return n?n.children.map(function(e){return e.value}):[]},e.prototype.firstChild=function(e){var n=ah(e,this._root);return n&&n.children.length>0?n.children[0].value:null},e.prototype.siblings=function(e){var n=ch(e,this._root);return n.length<2?[]:n[n.length-2].children.map(function(e){return e.value}).filter(function(n){return n!==e})},e.prototype.pathFromRoot=function(e){return ch(e,this._root).map(function(e){return e.value})},e}();function ah(e,n){var t,l;if(e===n.value)return n;try{for(var r=s(n.children),i=r.next();!i.done;i=r.next()){var o=ah(e,i.value);if(o)return o}}catch(u){t={error:u}}finally{try{i&&!i.done&&(l=r.return)&&l.call(r)}finally{if(t)throw t.error}}return null}function ch(e,n){var t,l;if(e===n.value)return[n];try{for(var r=s(n.children),i=r.next();!i.done;i=r.next()){var o=ch(e,i.value);if(o.length)return o.unshift(n),o}}catch(u){t={error:u}}finally{try{i&&!i.done&&(l=r.return)&&l.call(r)}finally{if(t)throw t.error}}return[]}var ph=function(){function e(e,n){this.value=e,this.children=n}return e.prototype.toString=function(){return"TreeNode("+this.value+")"},e}();function hh(e){var n={};return e&&e.children.forEach(function(e){return n[e.value.outlet]=e}),n}var dh=function(e){function n(n,t){var l=e.call(this,n)||this;return l.snapshot=t,Sh(l,n),l}return r(n,e),n.prototype.toString=function(){return this.snapshot.toString()},n}(sh);function fh(e,n){var t=function(e,n){var t=new mh([],{},{},"",{},_p,n,null,e.root,-1,{});return new yh("",new ph(t,[]))}(e,n),l=new la([new jp("",{})]),r=new la({}),i=new la({}),o=new la({}),u=new la(""),s=new gh(l,r,o,u,i,_p,n,t.root);return s.snapshot=t.root,new dh(new ph(s,[]),t)}var gh=function(){function e(e,n,t,l,r,i,o,u){this.url=e,this.params=n,this.queryParams=t,this.fragment=l,this.data=r,this.outlet=i,this.component=o,this._futureSnapshot=u}return Object.defineProperty(e.prototype,"routeConfig",{get:function(){return this._futureSnapshot.routeConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._routerState.root},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._routerState.parent(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstChild",{get:function(){return this._routerState.firstChild(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this._routerState.children(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pathFromRoot",{get:function(){return this._routerState.pathFromRoot(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paramMap",{get:function(){return this._paramMap||(this._paramMap=this.params.pipe(K(function(e){return Ip(e)}))),this._paramMap},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"queryParamMap",{get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(K(function(e){return Ip(e)}))),this._queryParamMap},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return this.snapshot?this.snapshot.toString():"Future("+this._futureSnapshot+")"},e}();function vh(e,n){void 0===n&&(n="emptyOnly");var t=e.pathFromRoot,l=0;if("always"!==n)for(l=t.length-1;l>=1;){var r=t[l],o=t[l-1];if(r.routeConfig&&""===r.routeConfig.path)l--;else{if(o.component)break;l--}}return function(e){return e.reduce(function(e,n){return{params:i({},e.params,n.params),data:i({},e.data,n.data),resolve:i({},e.resolve,n._resolvedData)}},{params:{},data:{},resolve:{}})}(t.slice(l))}var mh=function(){function e(e,n,t,l,r,i,o,u,s,a,c){this.url=e,this.params=n,this.queryParams=t,this.fragment=l,this.data=r,this.outlet=i,this.component=o,this.routeConfig=u,this._urlSegment=s,this._lastPathIndex=a,this._resolve=c}return Object.defineProperty(e.prototype,"root",{get:function(){return this._routerState.root},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._routerState.parent(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstChild",{get:function(){return this._routerState.firstChild(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this._routerState.children(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pathFromRoot",{get:function(){return this._routerState.pathFromRoot(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paramMap",{get:function(){return this._paramMap||(this._paramMap=Ip(this.params)),this._paramMap},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"queryParamMap",{get:function(){return this._queryParamMap||(this._queryParamMap=Ip(this.queryParams)),this._queryParamMap},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return"Route(url:'"+this.url.map(function(e){return e.toString()}).join("/")+"', path:'"+(this.routeConfig?this.routeConfig.path:"")+"')"},e}(),yh=function(e){function n(n,t){var l=e.call(this,t)||this;return l.url=n,Sh(l,t),l}return r(n,e),n.prototype.toString=function(){return Eh(this._root)},n}(sh);function Sh(e,n){n.value._routerState=e,n.children.forEach(function(n){return Sh(e,n)})}function Eh(e){var n=e.children.length>0?" { "+e.children.map(Eh).join(", ")+" } ":"";return""+e.value+n}function bh(e){if(e.snapshot){var n=e.snapshot,t=e._futureSnapshot;e.snapshot=t,Lp(n.queryParams,t.queryParams)||e.queryParams.next(t.queryParams),n.fragment!==t.fragment&&e.fragment.next(t.fragment),Lp(n.params,t.params)||e.params.next(t.params),function(e,n){if(e.length!==n.length)return!1;for(var t=0;t<e.length;++t)if(!Lp(e[t],n[t]))return!1;return!0}(n.url,t.url)||e.url.next(t.url),Lp(n.data,t.data)||e.data.next(t.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function Oh(e,n){var t,l;return Lp(e.params,n.params)&&zp(t=e.url,l=n.url)&&t.every(function(e,n){return Lp(e.parameters,l[n].parameters)})&&!(!e.parent!=!n.parent)&&(!e.parent||Oh(e.parent,n.parent))}function Rh(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Ch(e,n,t,l,r){var i={};return l&&Hp(l,function(e,n){i[n]=Array.isArray(e)?e.map(function(e){return""+e}):""+e}),new Vp(t.root===e?n:function e(n,t,l){var r={};return Hp(n.children,function(n,i){r[i]=n===t?l:e(n,t,l)}),new Wp(n.segments,r)}(t.root,e,n),i,r)}var _h=function(){function e(e,n,t){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=t,e&&t.length>0&&Rh(t[0]))throw new Error("Root segment cannot have matrix parameters");var l=t.find(function(e){return"object"==typeof e&&null!=e&&e.outlets});if(l&&l!==Up(t))throw new Error("{outlets:{}} has to be the last command")}return e.prototype.toRoot=function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]},e}(),Th=function(){return function(e,n,t){this.segmentGroup=e,this.processChildren=n,this.index=t}}();function Ih(e){return"object"==typeof e&&null!=e&&e.outlets?e.outlets[_p]:""+e}function Ah(e,n,t){if(e||(e=new Wp([],{})),0===e.segments.length&&e.hasChildren())return wh(e,n,t);var l=function(e,n,t){for(var l=0,r=n,i={match:!1,pathIndex:0,commandIndex:0};r<e.segments.length;){if(l>=t.length)return i;var o=e.segments[r],u=Ih(t[l]),s=l<t.length-1?t[l+1]:null;if(r>0&&void 0===u)break;if(u&&s&&"object"==typeof s&&void 0===s.outlets){if(!kh(u,s,o))return i;l+=2}else{if(!kh(u,{},o))return i;l++}r++}return{match:!0,pathIndex:r,commandIndex:l}}(e,n,t),r=t.slice(l.commandIndex);if(l.match&&l.pathIndex<e.segments.length){var i=new Wp(e.segments.slice(0,l.pathIndex),{});return i.children[_p]=new Wp(e.segments.slice(l.pathIndex),e.children),wh(i,0,r)}return l.match&&0===r.length?new Wp(e.segments,{}):l.match&&!e.hasChildren()?Nh(e,n,t):l.match?wh(e,0,r):Nh(e,n,t)}function wh(e,n,t){if(0===t.length)return new Wp(e.segments,{});var l=function(e){var n,t;return"object"!=typeof e[0]?((n={})[_p]=e,n):void 0===e[0].outlets?((t={})[_p]=e,t):e[0].outlets}(t),r={};return Hp(l,function(t,l){null!==t&&(r[l]=Ah(e.children[l],n,t))}),Hp(e.children,function(e,n){void 0===l[n]&&(r[n]=e)}),new Wp(e.segments,r)}function Nh(e,n,t){for(var l=e.segments.slice(0,n),r=0;r<t.length;){if("object"==typeof t[r]&&void 0!==t[r].outlets){var i=Ph(t[r].outlets);return new Wp(l,i)}if(0===r&&Rh(t[0]))l.push(new jp(e.segments[n].path,t[0])),r++;else{var o=Ih(t[r]),u=r<t.length-1?t[r+1]:null;o&&u&&Rh(u)?(l.push(new jp(o,Dh(u))),r+=2):(l.push(new jp(o,{})),r++)}}return new Wp(l,{})}function Ph(e){var n={};return Hp(e,function(e,t){null!==e&&(n[t]=Nh(new Wp([],{}),0,e))}),n}function Dh(e){var n={};return Hp(e,function(e,t){return n[t]=""+e}),n}function kh(e,n,t){return e==t.path&&Lp(n,t.parameters)}var Mh=function(){function e(e,n,t,l){this.routeReuseStrategy=e,this.futureState=n,this.currState=t,this.forwardEvent=l}return e.prototype.activate=function(e){var n=this.futureState._root,t=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,t,e),bh(this.futureState.root),this.activateChildRoutes(n,t,e)},e.prototype.deactivateChildRoutes=function(e,n,t){var l=this,r=hh(n);e.children.forEach(function(e){var n=e.value.outlet;l.deactivateRoutes(e,r[n],t),delete r[n]}),Hp(r,function(e,n){l.deactivateRouteAndItsChildren(e,t)})},e.prototype.deactivateRoutes=function(e,n,t){var l=e.value,r=n?n.value:null;if(l===r)if(l.component){var i=t.getContext(l.outlet);i&&this.deactivateChildRoutes(e,n,i.children)}else this.deactivateChildRoutes(e,n,t);else r&&this.deactivateRouteAndItsChildren(n,t)},e.prototype.deactivateRouteAndItsChildren=function(e,n){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)},e.prototype.detachAndStoreRouteSubtree=function(e,n){var t=n.getContext(e.value.outlet);if(t&&t.outlet){var l=t.outlet.detach(),r=t.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:r})}},e.prototype.deactivateRouteAndOutlet=function(e,n){var t=this,l=n.getContext(e.value.outlet);if(l){var r=hh(e),i=e.value.component?l.children:n;Hp(r,function(e,n){return t.deactivateRouteAndItsChildren(e,i)}),l.outlet&&(l.outlet.deactivate(),l.children.onOutletDeactivated())}},e.prototype.activateChildRoutes=function(e,n,t){var l=this,r=hh(n);e.children.forEach(function(e){l.activateRoutes(e,r[e.value.outlet],t),l.forwardEvent(new Op(e.value.snapshot))}),e.children.length&&this.forwardEvent(new Ep(e.value.snapshot))},e.prototype.activateRoutes=function(e,n,t){var l=e.value,r=n?n.value:null;if(bh(l),l===r)if(l.component){var i=t.getOrCreateContext(l.outlet);this.activateChildRoutes(e,n,i.children)}else this.activateChildRoutes(e,n,t);else if(l.component)if(i=t.getOrCreateContext(l.outlet),this.routeReuseStrategy.shouldAttach(l.snapshot)){var o=this.routeReuseStrategy.retrieve(l.snapshot);this.routeReuseStrategy.store(l.snapshot,null),i.children.onOutletReAttached(o.contexts),i.attachRef=o.componentRef,i.route=o.route.value,i.outlet&&i.outlet.attach(o.componentRef,o.route.value),xh(o.route)}else{var u=function(e){for(var n=l.snapshot.parent;n;n=n.parent){var t=n.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(),s=u?u.module.componentFactoryResolver:null;i.attachRef=null,i.route=l,i.resolver=s,i.outlet&&i.outlet.activateWith(l,s),this.activateChildRoutes(e,null,i.children)}else this.activateChildRoutes(e,null,t)},e}();function xh(e){bh(e.value),e.children.forEach(xh)}function Lh(e){return"function"==typeof e}function Fh(e){return e instanceof Vp}var Uh=function(){return function(e){this.segmentGroup=e||null}}(),Hh=function(){return function(e){this.urlTree=e}}();function Gh(e){return new w(function(n){return n.error(new Uh(e))})}function Bh(e){return new w(function(n){return n.error(new Hh(e))})}function Vh(e){return new w(function(n){return n.error(new Error("Only absolute redirects can have named outlets. redirectTo: '"+e+"'"))})}var Wh=function(){function e(e,n,t,l,r){this.configLoader=n,this.urlSerializer=t,this.urlTree=l,this.config=r,this.allowRedirects=!0,this.ngModule=e.get(wn)}return e.prototype.apply=function(){var e=this;return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,_p).pipe(K(function(n){return e.createUrlTree(n,e.urlTree.queryParams,e.urlTree.fragment)})).pipe(wa(function(n){if(n instanceof Hh)return e.allowRedirects=!1,e.match(n.urlTree);if(n instanceof Uh)throw e.noMatchError(n);throw n}))},e.prototype.match=function(e){var n=this;return this.expandSegmentGroup(this.ngModule,this.config,e.root,_p).pipe(K(function(t){return n.createUrlTree(t,e.queryParams,e.fragment)})).pipe(wa(function(e){if(e instanceof Uh)throw n.noMatchError(e);throw e}))},e.prototype.noMatchError=function(e){return new Error("Cannot match any routes. URL Segment: '"+e.segmentGroup+"'")},e.prototype.createUrlTree=function(e,n,t){var l,r=e.segments.length>0?new Wp([],((l={})[_p]=e,l)):e;return new Vp(r,n,t)},e.prototype.expandSegmentGroup=function(e,n,t,l){return 0===t.segments.length&&t.hasChildren()?this.expandChildren(e,n,t).pipe(K(function(e){return new Wp([],e)})):this.expandSegment(e,t,n,t.segments,l,!0)},e.prototype.expandChildren=function(e,n,t){var l=this;return function(t,r){if(0===Object.keys(t).length)return ta({});var i=[],o=[],u={};return Hp(t,function(t,r){var s,a,c=(s=r,a=t,l.expandSegmentGroup(e,n,a,s)).pipe(K(function(e){return u[r]=e}));r===_p?i.push(c):o.push(c)}),ta.apply(null,i.concat(o)).pipe(ha(),Aa(),K(function(){return u}))}(t.children)},e.prototype.expandSegment=function(e,n,t,l,r,i){var o=this;return ta.apply(void 0,c(t)).pipe(K(function(u){return o.expandSegmentAgainstRoute(e,n,t,u,l,r,i).pipe(wa(function(e){if(e instanceof Uh)return ta(null);throw e}))}),ha(),xa(function(e){return!!e}),wa(function(e,t){if(e instanceof ia||"EmptyError"===e.name){if(o.noLeftoversInUrl(n,l,r))return ta(new Wp([],{}));throw new Uh(n)}throw e}))},e.prototype.noLeftoversInUrl=function(e,n,t){return 0===n.length&&!e.children[t]},e.prototype.expandSegmentAgainstRoute=function(e,n,t,l,r,i,o){return Kh(l)!==i?Gh(n):void 0===l.redirectTo?this.matchSegmentAgainstRoute(e,n,l,r):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,n,t,l,r,i):Gh(n)},e.prototype.expandSegmentAgainstRouteUsingRedirect=function(e,n,t,l,r,i){return"**"===l.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,l,i):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,t,l,r,i)},e.prototype.expandWildCardWithParamsAgainstRouteUsingRedirect=function(e,n,t,l){var r=this,i=this.applyRedirectCommands([],t.redirectTo,{});return t.redirectTo.startsWith("/")?Bh(i):this.lineralizeSegments(t,i).pipe(X(function(t){var i=new Wp(t,{});return r.expandSegment(e,i,n,t,l,!1)}))},e.prototype.expandRegularSegmentAgainstRouteUsingRedirect=function(e,n,t,l,r,i){var o=this,u=jh(n,l,r),s=u.consumedSegments,a=u.lastChild,c=u.positionalParamSegments;if(!u.matched)return Gh(n);var p=this.applyRedirectCommands(s,l.redirectTo,c);return l.redirectTo.startsWith("/")?Bh(p):this.lineralizeSegments(l,p).pipe(X(function(l){return o.expandSegment(e,n,t,l.concat(r.slice(a)),i,!1)}))},e.prototype.matchSegmentAgainstRoute=function(e,n,t,l){var r=this;if("**"===t.path)return t.loadChildren?this.configLoader.load(e.injector,t).pipe(K(function(e){return t._loadedConfig=e,new Wp(l,{})})):ta(new Wp(l,{}));var o=jh(n,t,l),u=o.consumedSegments,a=o.lastChild;if(!o.matched)return Gh(n);var c=l.slice(a);return this.getChildConfig(e,t,l).pipe(X(function(e){var t=e.module,l=e.routes,o=function(e,n,t,l){return t.length>0&&function(e,n,t){return l.some(function(t){return Yh(e,n,t)&&Kh(t)!==_p})}(e,t)?{segmentGroup:zh(new Wp(n,function(e,n){var t,l,r={};r[_p]=n;try{for(var i=s(e),o=i.next();!o.done;o=i.next()){var u=o.value;""===u.path&&Kh(u)!==_p&&(r[Kh(u)]=new Wp([],{}))}}catch(a){t={error:a}}finally{try{o&&!o.done&&(l=i.return)&&l.call(i)}finally{if(t)throw t.error}}return r}(l,new Wp(t,e.children)))),slicedSegments:[]}:0===t.length&&function(e,n,t){return l.some(function(t){return Yh(e,n,t)})}(e,t)?{segmentGroup:zh(new Wp(e.segments,function(e,n,t,l){var r,o,u={};try{for(var a=s(t),c=a.next();!c.done;c=a.next()){var p=c.value;Yh(e,n,p)&&!l[Kh(p)]&&(u[Kh(p)]=new Wp([],{}))}}catch(h){r={error:h}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}return i({},l,u)}(e,t,l,e.children))),slicedSegments:t}:{segmentGroup:e,slicedSegments:t}}(n,u,c,l),a=o.segmentGroup,p=o.slicedSegments;return 0===p.length&&a.hasChildren()?r.expandChildren(t,l,a).pipe(K(function(e){return new Wp(u,e)})):0===l.length&&0===p.length?ta(new Wp(u,{})):r.expandSegment(t,a,l,p,_p,!0).pipe(K(function(e){return new Wp(u.concat(e.segments),e.children)}))}))},e.prototype.getChildConfig=function(e,n,t){var l=this;return n.children?ta(new Pp(n.children,e)):n.loadChildren?void 0!==n._loadedConfig?ta(n._loadedConfig):function(e,n,t){var l,r=n.canLoad;return r&&0!==r.length?Z(r).pipe(K(function(l){var r,i=e.get(l);if(function(e){return e&&Lh(e.canLoad)}(i))r=i.canLoad(n,t);else{if(!Lh(i))throw new Error("Invalid CanLoad guard");r=i(n,t)}return Gp(r)})).pipe(ha(),(l=function(e){return!0===e},function(e){return e.lift(new La(l,void 0,e))})):ta(!0)}(e.injector,n,t).pipe(X(function(t){return t?l.configLoader.load(e.injector,n).pipe(K(function(e){return n._loadedConfig=e,e})):function(e){return new w(function(n){return n.error(wp("Cannot load children because the guard of the route \"path: '"+e.path+"'\" returned false"))})}(n)})):ta(new Pp([],e))},e.prototype.lineralizeSegments=function(e,n){for(var t=[],l=n.root;;){if(t=t.concat(l.segments),0===l.numberOfChildren)return ta(t);if(l.numberOfChildren>1||!l.children[_p])return Vh(e.redirectTo);l=l.children[_p]}},e.prototype.applyRedirectCommands=function(e,n,t){return this.applyRedirectCreatreUrlTree(n,this.urlSerializer.parse(n),e,t)},e.prototype.applyRedirectCreatreUrlTree=function(e,n,t,l){var r=this.createSegmentGroup(e,n.root,t,l);return new Vp(r,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)},e.prototype.createQueryParams=function(e,n){var t={};return Hp(e,function(e,l){if("string"==typeof e&&e.startsWith(":")){var r=e.substring(1);t[l]=n[r]}else t[l]=e}),t},e.prototype.createSegmentGroup=function(e,n,t,l){var r=this,i=this.createSegments(e,n.segments,t,l),o={};return Hp(n.children,function(n,i){o[i]=r.createSegmentGroup(e,n,t,l)}),new Wp(i,o)},e.prototype.createSegments=function(e,n,t,l){var r=this;return n.map(function(n){return n.path.startsWith(":")?r.findPosParam(e,n,l):r.findOrReturn(n,t)})},e.prototype.findPosParam=function(e,n,t){var l=t[n.path.substring(1)];if(!l)throw new Error("Cannot redirect to '"+e+"'. Cannot find '"+n.path+"'.");return l},e.prototype.findOrReturn=function(e,n){var t,l,r=0;try{for(var i=s(n),o=i.next();!o.done;o=i.next()){var u=o.value;if(u.path===e.path)return n.splice(r),u;r++}}catch(a){t={error:a}}finally{try{o&&!o.done&&(l=i.return)&&l.call(i)}finally{if(t)throw t.error}}return e},e}();function jh(e,n,t){if(""===n.path)return"full"===n.pathMatch&&(e.hasChildren()||t.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};var l=(n.matcher||Np)(t,e,n);return l?{matched:!0,consumedSegments:l.consumed,lastChild:l.consumed.length,positionalParamSegments:l.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function zh(e){if(1===e.numberOfChildren&&e.children[_p]){var n=e.children[_p];return new Wp(e.segments.concat(n.segments),n.children)}return e}function Yh(e,n,t){return(!(e.hasChildren()||n.length>0)||"full"!==t.pathMatch)&&""===t.path&&void 0!==t.redirectTo}function Kh(e){return e.outlet||_p}var qh=function(){return function(e){this.path=e,this.route=this.path[this.path.length-1]}}(),$h=function(){return function(e,n){this.component=e,this.route=n}}();function Qh(e,n,t){var l=function(e){if(!e)return null;for(var n=e.parent;n;n=n.parent){var t=n.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(n);return(l?l.module.injector:t).get(e)}function Zh(e,n,t,l,r){void 0===r&&(r={canDeactivateChecks:[],canActivateChecks:[]});var i=hh(n);return e.children.forEach(function(e){!function(e,n,t,l,r){void 0===r&&(r={canDeactivateChecks:[],canActivateChecks:[]});var i=e.value,o=n?n.value:null,u=t?t.getContext(e.value.outlet):null;if(o&&i.routeConfig===o.routeConfig){var s=function(e,n,t){if("function"==typeof t)return t(e,n);switch(t){case"pathParamsChange":return!zp(e.url,n.url);case"pathParamsOrQueryParamsChange":return!zp(e.url,n.url)||!Lp(e.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Oh(e,n)||!Lp(e.queryParams,n.queryParams);case"paramsChange":default:return!Oh(e,n)}}(o,i,i.routeConfig.runGuardsAndResolvers);s?r.canActivateChecks.push(new qh(l)):(i.data=o.data,i._resolvedData=o._resolvedData),Zh(e,n,i.component?u?u.children:null:t,l,r),s&&r.canDeactivateChecks.push(new $h(u&&u.outlet&&u.outlet.component||null,o))}else o&&Xh(n,u,r),r.canActivateChecks.push(new qh(l)),Zh(e,null,i.component?u?u.children:null:t,l,r)}(e,i[e.value.outlet],t,l.concat([e.value]),r),delete i[e.value.outlet]}),Hp(i,function(e,n){return Xh(e,t.getContext(n),r)}),r}function Xh(e,n,t){var l=hh(e),r=e.value;Hp(l,function(e,l){Xh(e,r.component?n?n.children.getContext(l):null:n,t)}),t.canDeactivateChecks.push(new $h(r.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,r))}var Jh=Symbol("INITIAL_VALUE");function ed(){return Ua(function(e){return(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=null,l=null;return F(e[e.length-1])&&(l=e.pop()),"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&p(e[0])&&(e=e[0]),le(e,l).lift(new ua(t))}).apply(void 0,c(e.map(function(e){return e.pipe(Da(1),Va(Jh))}))).pipe(Wa(function(e,n){var t=!1;return n.reduce(function(e,l,r){if(e!==Jh)return e;if(l===Jh&&(t=!0),!t){if(!1===l)return l;if(r===n.length-1||Fh(l))return l}return e},e)},Jh),da(function(e){return e!==Jh}),K(function(e){return Fh(e)?e:!0===e}),Da(1))})}function nd(e,n){return null!==e&&n&&n(new bp(e)),ta(!0)}function td(e,n){return null!==e&&n&&n(new Sp(e)),ta(!0)}function ld(e,n,t){var l=n.routeConfig?n.routeConfig.canActivate:null;return l&&0!==l.length?ta(l.map(function(l){return pa(function(){var r,i=Qh(l,n,t);if(function(e){return e&&Lh(e.canActivate)}(i))r=Gp(i.canActivate(n,e));else{if(!Lh(i))throw new Error("Invalid CanActivate guard");r=Gp(i(n,e))}return r.pipe(xa())})})).pipe(ed()):ta(!0)}function rd(e,n,t){var l=n[n.length-1],r=n.slice(0,n.length-1).reverse().map(function(e){return function(e){var n=e.routeConfig?e.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:e,guards:n}:null}(e)}).filter(function(e){return null!==e}).map(function(n){return pa(function(){return ta(n.guards.map(function(r){var i,o=Qh(r,n.node,t);if(function(e){return e&&Lh(e.canActivateChild)}(o))i=Gp(o.canActivateChild(l,e));else{if(!Lh(o))throw new Error("Invalid CanActivateChild guard");i=Gp(o(l,e))}return i.pipe(xa())})).pipe(ed())})});return ta(r).pipe(ed())}var id=function(){return function(){}}(),od=function(){function e(e,n,t,l,r,i){this.rootComponentType=e,this.config=n,this.urlTree=t,this.url=l,this.paramsInheritanceStrategy=r,this.relativeLinkResolution=i}return e.prototype.recognize=function(){try{var e=ad(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,n=this.processSegmentGroup(this.config,e,_p),t=new mh([],Object.freeze({}),Object.freeze(i({},this.urlTree.queryParams)),this.urlTree.fragment,{},_p,this.rootComponentType,null,this.urlTree.root,-1,{}),l=new ph(t,n),r=new yh(this.url,l);return this.inheritParamsAndData(r._root),ta(r)}catch(o){return new w(function(e){return e.error(o)})}},e.prototype.inheritParamsAndData=function(e){var n=this,t=e.value,l=vh(t,this.paramsInheritanceStrategy);t.params=Object.freeze(l.params),t.data=Object.freeze(l.data),e.children.forEach(function(e){return n.inheritParamsAndData(e)})},e.prototype.processSegmentGroup=function(e,n,t){return 0===n.segments.length&&n.hasChildren()?this.processChildren(e,n):this.processSegment(e,n,n.segments,t)},e.prototype.processChildren=function(e,n){var t,l=this,r=Yp(n,function(n,t){return l.processSegmentGroup(e,n,t)});return t={},r.forEach(function(e){var n=t[e.value.outlet];if(n){var l=n.url.map(function(e){return e.toString()}).join("/"),r=e.value.url.map(function(e){return e.toString()}).join("/");throw new Error("Two segments cannot have the same outlet name: '"+l+"' and '"+r+"'.")}t[e.value.outlet]=e.value}),r.sort(function(e,n){return e.value.outlet===_p?-1:n.value.outlet===_p?1:e.value.outlet.localeCompare(n.value.outlet)}),r},e.prototype.processSegment=function(e,n,t,l){var r,i;try{for(var o=s(e),u=o.next();!u.done;u=o.next()){var a=u.value;try{return this.processSegmentAgainstRoute(a,n,t,l)}catch(c){if(!(c instanceof id))throw c}}}catch(p){r={error:p}}finally{try{u&&!u.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}if(this.noLeftoversInUrl(n,t,l))return[];throw new id},e.prototype.noLeftoversInUrl=function(e,n,t){return 0===n.length&&!e.children[t]},e.prototype.processSegmentAgainstRoute=function(e,n,t,l){if(e.redirectTo)throw new id;if((e.outlet||_p)!==l)throw new id;var r,o=[],u=[];if("**"===e.path){var s=t.length>0?Up(t).parameters:{};r=new mh(t,s,Object.freeze(i({},this.urlTree.queryParams)),this.urlTree.fragment,hd(e),l,e.component,e,ud(n),sd(n)+t.length,dd(e))}else{var a=function(e,n,t){if(""===n.path){if("full"===n.pathMatch&&(e.hasChildren()||t.length>0))throw new id;return{consumedSegments:[],lastChild:0,parameters:{}}}var l=(n.matcher||Np)(t,e,n);if(!l)throw new id;var r={};Hp(l.posParams,function(e,n){r[n]=e.path});var o=l.consumed.length>0?i({},r,l.consumed[l.consumed.length-1].parameters):r;return{consumedSegments:l.consumed,lastChild:l.consumed.length,parameters:o}}(n,e,t);o=a.consumedSegments,u=t.slice(a.lastChild),r=new mh(o,a.parameters,Object.freeze(i({},this.urlTree.queryParams)),this.urlTree.fragment,hd(e),l,e.component,e,ud(n),sd(n)+o.length,dd(e))}var c=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),p=ad(n,o,u,c,this.relativeLinkResolution),h=p.segmentGroup,d=p.slicedSegments;if(0===d.length&&h.hasChildren()){var f=this.processChildren(c,h);return[new ph(r,f)]}if(0===c.length&&0===d.length)return[new ph(r,[])];var g=this.processSegment(c,h,d,_p);return[new ph(r,g)]},e}();function ud(e){for(var n=e;n._sourceSegment;)n=n._sourceSegment;return n}function sd(e){for(var n=e,t=n._segmentIndexShift?n._segmentIndexShift:0;n._sourceSegment;)t+=(n=n._sourceSegment)._segmentIndexShift?n._segmentIndexShift:0;return t-1}function ad(e,n,t,l,r){if(t.length>0&&function(e,n,t){return l.some(function(t){return cd(e,n,t)&&pd(t)!==_p})}(e,t)){var o=new Wp(n,function(e,n,t,l){var r,i,o={};o[_p]=l,l._sourceSegment=e,l._segmentIndexShift=n.length;try{for(var u=s(t),a=u.next();!a.done;a=u.next()){var c=a.value;if(""===c.path&&pd(c)!==_p){var p=new Wp([],{});p._sourceSegment=e,p._segmentIndexShift=n.length,o[pd(c)]=p}}}catch(h){r={error:h}}finally{try{a&&!a.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return o}(e,n,l,new Wp(t,e.children)));return o._sourceSegment=e,o._segmentIndexShift=n.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function(e,n,t){return l.some(function(t){return cd(e,n,t)})}(e,t)){var u=new Wp(e.segments,function(e,n,t,l,r,o){var u,a,c={};try{for(var p=s(l),h=p.next();!h.done;h=p.next()){var d=h.value;if(cd(e,t,d)&&!r[pd(d)]){var f=new Wp([],{});f._sourceSegment=e,f._segmentIndexShift="legacy"===o?e.segments.length:n.length,c[pd(d)]=f}}}catch(g){u={error:g}}finally{try{h&&!h.done&&(a=p.return)&&a.call(p)}finally{if(u)throw u.error}}return i({},r,c)}(e,n,t,l,e.children,r));return u._sourceSegment=e,u._segmentIndexShift=n.length,{segmentGroup:u,slicedSegments:t}}var a=new Wp(e.segments,e.children);return a._sourceSegment=e,a._segmentIndexShift=n.length,{segmentGroup:a,slicedSegments:t}}function cd(e,n,t){return(!(e.hasChildren()||n.length>0)||"full"!==t.pathMatch)&&""===t.path&&void 0===t.redirectTo}function pd(e){return e.outlet||_p}function hd(e){return e.data||{}}function dd(e){return e.resolve||{}}function fd(e,n,t,l){var r=Qh(e,n,l);return Gp(r.resolve?r.resolve(n,t):r(n,t))}function gd(e){return function(n){return n.pipe(Ua(function(n){var t=e(n);return t?Z(t).pipe(K(function(){return n})):Z([n])}))}}var vd=function(){return function(){}}(),md=function(){function e(){}return e.prototype.shouldDetach=function(e){return!1},e.prototype.store=function(e,n){},e.prototype.shouldAttach=function(e){return!1},e.prototype.retrieve=function(e){return null},e.prototype.shouldReuseRoute=function(e,n){return e.routeConfig===n.routeConfig},e}(),yd=new ye("ROUTES"),Sd=function(){function e(e,n,t,l){this.loader=e,this.compiler=n,this.onLoadStartListener=t,this.onLoadEndListener=l}return e.prototype.load=function(e,n){var t=this;return this.onLoadStartListener&&this.onLoadStartListener(n),this.loadModuleFactory(n.loadChildren).pipe(K(function(l){t.onLoadEndListener&&t.onLoadEndListener(n);var r=l.create(e);return new Pp(Fp(r.injector.get(yd)).map(xp),r)}))},e.prototype.loadModuleFactory=function(e){var n=this;return"string"==typeof e?Z(this.loader.load(e)):Gp(e()).pipe(X(function(e){return e instanceof Nn?ta(e):Z(n.compiler.compileModuleAsync(e))}))},e}(),Ed=function(){return function(){}}(),bd=function(){function e(){}return e.prototype.shouldProcessUrl=function(e){return!0},e.prototype.extract=function(e){return e},e.prototype.merge=function(e,n){return e},e}();function Od(e){throw e}function Rd(e,n,t){return n.parse("/")}function Cd(e,n){return ta(null)}var _d=function(){function e(e,n,t,l,r,i,o,u){var s=this;this.rootComponentType=e,this.urlSerializer=n,this.rootContexts=t,this.location=l,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new x,this.errorHandler=Od,this.malformedUriErrorHandler=Rd,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Cd,afterPreactivation:Cd},this.urlHandlingStrategy=new bd,this.routeReuseStrategy=new md,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=r.get(wn),this.console=r.get(Lt);var a=r.get(Zt);this.isNgZoneEnabled=a instanceof Zt,this.resetConfig(u),this.currentUrlTree=new Vp(new Wp([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Sd(i,o,function(e){return s.triggerEvent(new mp(e))},function(e){return s.triggerEvent(new yp(e))}),this.routerState=fh(this.currentUrlTree,this.rootComponentType),this.transitions=new la({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}return e.prototype.setupNavigations=function(e){var n=this,t=this.events;return e.pipe(da(function(e){return 0!==e.id}),K(function(e){return i({},e,{extractedUrl:n.urlHandlingStrategy.extract(e.rawUrl)})}),Ua(function(e){var l,r,o,u,a=!1,c=!1;return ta(e).pipe(Ka(function(e){n.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:n.lastSuccessfulNavigation?i({},n.lastSuccessfulNavigation,{previousNavigation:null}):null}}),Ua(function(e){var l,r,o,u,s=!n.navigated||e.extractedUrl.toString()!==n.browserUrlTree.toString();if(("reload"===n.onSameUrlNavigation||s)&&n.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return ta(e).pipe(Ua(function(e){var l=n.transitions.getValue();return t.next(new sp(e.id,n.serializeUrl(e.extractedUrl),e.source,e.restoredState)),l!==n.transitions.getValue()?aa:[e]}),Ua(function(e){return Promise.resolve(e)}),(l=n.ngModule.injector,r=n.configLoader,o=n.urlSerializer,u=n.config,function(e){return e.pipe(Ua(function(e){return function(n,t,l,r,i){return new Wh(n,t,l,e.extractedUrl,i).apply()}(l,r,o,0,u).pipe(K(function(n){return i({},e,{urlAfterRedirects:n})}))}))}),Ka(function(e){n.currentNavigation=i({},n.currentNavigation,{finalUrl:e.urlAfterRedirects})}),function(e,t,l,r,o){return function(l){return l.pipe(X(function(l){return function(e,n,t,l,r,i){return void 0===r&&(r="emptyOnly"),void 0===i&&(i="legacy"),new od(e,n,t,l,r,i).recognize()}(e,t,l.urlAfterRedirects,(u=l.urlAfterRedirects,n.serializeUrl(u)),r,o).pipe(K(function(e){return i({},l,{targetSnapshot:e})}));var u}))}}(n.rootComponentType,n.config,0,n.paramsInheritanceStrategy,n.relativeLinkResolution),Ka(function(e){"eager"===n.urlUpdateStrategy&&(e.extras.skipLocationChange||n.setBrowserUrl(e.urlAfterRedirects,!!e.extras.replaceUrl,e.id),n.browserUrlTree=e.urlAfterRedirects)}),Ka(function(e){var l=new hp(e.id,n.serializeUrl(e.extractedUrl),n.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.next(l)}));if(s&&n.rawUrlTree&&n.urlHandlingStrategy.shouldProcessUrl(n.rawUrlTree)){var a=e.extractedUrl,c=e.source,p=e.restoredState,h=e.extras,d=new sp(e.id,n.serializeUrl(a),c,p);t.next(d);var f=fh(a,n.rootComponentType).snapshot;return ta(i({},e,{targetSnapshot:f,urlAfterRedirects:a,extras:i({},h,{skipLocationChange:!1,replaceUrl:!1})}))}return n.rawUrlTree=e.rawUrl,e.resolve(null),aa}),gd(function(e){var t=e.extras;return n.hooks.beforePreactivation(e.targetSnapshot,{navigationId:e.id,appliedUrlTree:e.extractedUrl,rawUrlTree:e.rawUrl,skipLocationChange:!!t.skipLocationChange,replaceUrl:!!t.replaceUrl})}),Ka(function(e){var t=new dp(e.id,n.serializeUrl(e.extractedUrl),n.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);n.triggerEvent(t)}),K(function(e){return i({},e,{guards:(t=e.targetSnapshot,l=e.currentSnapshot,r=n.rootContexts,o=t._root,Zh(o,l?l._root:null,r,[o.value]))});var t,l,r,o}),function(e,n){return function(t){return t.pipe(X(function(t){var l=t.targetSnapshot,r=t.currentSnapshot,o=t.guards,u=o.canActivateChecks,s=o.canDeactivateChecks;return 0===s.length&&0===u.length?ta(i({},t,{guardsResult:!0})):function(e,n,t,l){return Z(s).pipe(X(function(e){return function(e,n,t,l,r){var i=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return i&&0!==i.length?ta(i.map(function(i){var o,u=Qh(i,n,r);if(function(e){return e&&Lh(e.canDeactivate)}(u))o=Gp(u.canDeactivate(e,n,t,l));else{if(!Lh(u))throw new Error("Invalid CanDeactivate guard");o=Gp(u(e,n,t,l))}return o.pipe(xa())})).pipe(ed()):ta(!0)}(e.component,e.route,t,n,l)}),xa(function(e){return!0!==e},!0))}(0,l,r,e).pipe(X(function(t){return t&&"boolean"==typeof t?function(e,n,t,l){return Z(u).pipe(Ya(function(n){return Z([td(n.route.parent,l),nd(n.route,l),rd(e,n.path,t),ld(e,n.route,t)]).pipe(ha(),xa(function(e){return!0!==e},!0))}),xa(function(e){return!0!==e},!0))}(l,0,e,n):ta(t)}),K(function(e){return i({},t,{guardsResult:e})}))}))}}(n.ngModule.injector,function(e){return n.triggerEvent(e)}),Ka(function(e){if(Fh(e.guardsResult)){var t=wp('Redirecting to "'+n.serializeUrl(e.guardsResult)+'"');throw t.url=e.guardsResult,t}}),Ka(function(e){var t=new fp(e.id,n.serializeUrl(e.extractedUrl),n.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);n.triggerEvent(t)}),da(function(e){if(!e.guardsResult){n.resetUrlToCurrentUrlTree();var l=new cp(e.id,n.serializeUrl(e.extractedUrl),"");return t.next(l),e.resolve(!1),!1}return!0}),gd(function(e){if(e.guards.canActivateChecks.length)return ta(e).pipe(Ka(function(e){var t=new gp(e.id,n.serializeUrl(e.extractedUrl),n.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);n.triggerEvent(t)}),(t=n.paramsInheritanceStrategy,l=n.ngModule.injector,function(e){return e.pipe(X(function(e){var n=e.targetSnapshot,r=e.guards.canActivateChecks;return r.length?Z(r).pipe(Ya(function(e){return function(e,t,l,r){return function(e,n,t,l){var r=Object.keys(e);if(0===r.length)return ta({});if(1===r.length){var i=r[0];return fd(e[i],n,t,l).pipe(K(function(e){var n;return(n={})[i]=e,n}))}var o={};return Z(r).pipe(X(function(r){return fd(e[r],n,t,l).pipe(K(function(e){return o[r]=e,e}))})).pipe(Aa(),K(function(){return o}))}(e._resolve,e,n,r).pipe(K(function(n){return e._resolvedData=n,e.data=i({},e.data,vh(e,l).resolve),null}))}(e.route,0,t,l)}),function(e,n){return arguments.length>=2?function(n){return I(Wa(e,void 0),ya(1),_a(void 0))(n)}:function(n){return I(Wa(function(n,t,l){return e(n)}),ya(1))(n)}}(function(e,n){return e}),K(function(n){return e})):ta(e)}))}),Ka(function(e){var t=new vp(e.id,n.serializeUrl(e.extractedUrl),n.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);n.triggerEvent(t)}));var t,l}),gd(function(e){var t=e.extras;return n.hooks.afterPreactivation(e.targetSnapshot,{navigationId:e.id,appliedUrlTree:e.extractedUrl,rawUrlTree:e.rawUrl,skipLocationChange:!!t.skipLocationChange,replaceUrl:!!t.replaceUrl})}),K(function(e){var t,l,r,o=(r=function e(n,t,l){if(l&&n.shouldReuseRoute(t.value,l.value.snapshot)){(a=l.value)._futureSnapshot=t.value;var r=function(n,t,l){return t.children.map(function(t){var r,i;try{for(var o=s(l.children),u=o.next();!u.done;u=o.next()){var a=u.value;if(n.shouldReuseRoute(a.value.snapshot,t.value))return e(n,t,a)}}catch(c){r={error:c}}finally{try{u&&!u.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return e(n,t)})}(n,t,l);return new ph(a,r)}var i=n.retrieve(t.value);if(i){var o=i.route;return function e(n,t){if(n.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=n.value;for(var l=0;l<n.children.length;++l)e(n.children[l],t.children[l])}(t,o),o}var u,a=new gh(new la((u=t.value).url),new la(u.params),new la(u.queryParams),new la(u.fragment),new la(u.data),u.outlet,u.component,u);return r=t.children.map(function(t){return e(n,t)}),new ph(a,r)}(n.routeReuseStrategy,(t=e.targetSnapshot)._root,(l=e.currentRouterState)?l._root:void 0),new dh(r,t));return i({},e,{targetRouterState:o})}),Ka(function(e){n.currentUrlTree=e.urlAfterRedirects,n.rawUrlTree=n.urlHandlingStrategy.merge(n.currentUrlTree,e.rawUrl),n.routerState=e.targetRouterState,"deferred"===n.urlUpdateStrategy&&(e.extras.skipLocationChange||n.setBrowserUrl(n.rawUrlTree,!!e.extras.replaceUrl,e.id,e.extras.state),n.browserUrlTree=e.urlAfterRedirects)}),(r=n.rootContexts,o=n.routeReuseStrategy,u=function(e){return n.triggerEvent(e)},K(function(e){return new Mh(o,e.targetRouterState,e.currentRouterState,u).activate(r),e})),Ka({next:function(){a=!0},complete:function(){a=!0}}),(l=function(){if(!a&&!c){n.resetUrlToCurrentUrlTree();var l=new cp(e.id,n.serializeUrl(e.extractedUrl),"Navigation ID "+e.id+" is not equal to the current navigation id "+n.navigationId);t.next(l),e.resolve(!1)}n.currentNavigation=null},function(e){return e.lift(new Qa(l))}),wa(function(l){if(c=!0,(u=l)&&u[Ap]){var r=Fh(l.url);r||(n.navigated=!0,n.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl));var i=new cp(e.id,n.serializeUrl(e.extractedUrl),l.message);t.next(i),e.resolve(!1),r&&n.navigateByUrl(l.url)}else{n.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl);var o=new pp(e.id,n.serializeUrl(e.extractedUrl),l);t.next(o);try{e.resolve(n.errorHandler(l))}catch(s){e.reject(s)}}var u;return aa}))}))},e.prototype.resetRootComponentType=function(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType},e.prototype.getTransition=function(){return this.transitions.value},e.prototype.setTransition=function(e){this.transitions.next(i({},this.getTransition(),e))},e.prototype.initialNavigation=function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})},e.prototype.setUpLocationChangeListener=function(){var e=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe(function(n){var t=e.parseUrl(n.url),l="popstate"===n.type?"popstate":"hashchange",r=n.state&&n.state.navigationId?n.state:null;setTimeout(function(){e.scheduleNavigation(t,l,r,{replaceUrl:!0})},0)}))},Object.defineProperty(e.prototype,"url",{get:function(){return this.serializeUrl(this.currentUrlTree)},enumerable:!0,configurable:!0}),e.prototype.getCurrentNavigation=function(){return this.currentNavigation},e.prototype.triggerEvent=function(e){this.events.next(e)},e.prototype.resetConfig=function(e){Dp(e),this.config=e.map(xp),this.navigated=!1,this.lastSuccessfulId=-1},e.prototype.ngOnDestroy=function(){this.dispose()},e.prototype.dispose=function(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)},e.prototype.createUrlTree=function(e,n){void 0===n&&(n={});var t=n.relativeTo,l=n.queryParams,r=n.fragment,o=n.preserveQueryParams,u=n.queryParamsHandling,s=n.preserveFragment;Wn()&&o&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");var a=t||this.routerState.root,p=s?this.currentUrlTree.fragment:r,h=null;if(u)switch(u){case"merge":h=i({},this.currentUrlTree.queryParams,l);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=l||null}else h=o?this.currentUrlTree.queryParams:l||null;return null!==h&&(h=this.removeEmptyProps(h)),function(e,n,t,l,r){if(0===t.length)return Ch(n.root,n.root,n,l,r);var i=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new _h(!0,0,e);var n=0,t=!1,l=e.reduce(function(e,l,r){if("object"==typeof l&&null!=l){if(l.outlets){var i={};return Hp(l.outlets,function(e,n){i[n]="string"==typeof e?e.split("/"):e}),c(e,[{outlets:i}])}if(l.segmentPath)return c(e,[l.segmentPath])}return"string"!=typeof l?c(e,[l]):0===r?(l.split("/").forEach(function(l,r){0==r&&"."===l||(0==r&&""===l?t=!0:".."===l?n++:""!=l&&e.push(l))}),e):c(e,[l])},[]);return new _h(t,n,l)}(t);if(i.toRoot())return Ch(n.root,new Wp([],{}),n,l,r);var o=function(e,t,l){if(e.isAbsolute)return new Th(n.root,!0,0);if(-1===l.snapshot._lastPathIndex)return new Th(l.snapshot._urlSegment,!0,0);var r=Rh(e.commands[0])?0:1;return function(n,t,i){for(var o=l.snapshot._urlSegment,u=l.snapshot._lastPathIndex+r,s=e.numberOfDoubleDots;s>u;){if(s-=u,!(o=o.parent))throw new Error("Invalid number of '../'");u=o.segments.length}return new Th(o,!1,u-s)}()}(i,0,e),u=o.processChildren?wh(o.segmentGroup,o.index,i.commands):Ah(o.segmentGroup,o.index,i.commands);return Ch(o.segmentGroup,u,n,l,r)}(a,this.currentUrlTree,e,h,p)},e.prototype.navigateByUrl=function(e,n){void 0===n&&(n={skipLocationChange:!1}),Wn()&&this.isNgZoneEnabled&&!Zt.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");var t=Fh(e)?e:this.parseUrl(e),l=this.urlHandlingStrategy.merge(t,this.rawUrlTree);return this.scheduleNavigation(l,"imperative",null,n)},e.prototype.navigate=function(e,n){return void 0===n&&(n={skipLocationChange:!1}),function(e){for(var n=0;n<e.length;n++){var t=e[n];if(null==t)throw new Error("The requested path contains "+t+" segment at index "+n)}}(e),this.navigateByUrl(this.createUrlTree(e,n),n)},e.prototype.serializeUrl=function(e){return this.urlSerializer.serialize(e)},e.prototype.parseUrl=function(e){var n;try{n=this.urlSerializer.parse(e)}catch(t){n=this.malformedUriErrorHandler(t,this.urlSerializer,e)}return n},e.prototype.isActive=function(e,n){if(Fh(e))return Bp(this.currentUrlTree,e,n);var t=this.parseUrl(e);return Bp(this.currentUrlTree,t,n)},e.prototype.removeEmptyProps=function(e){return Object.keys(e).reduce(function(n,t){var l=e[t];return null!=l&&(n[t]=l),n},{})},e.prototype.processNavigations=function(){var e=this;this.navigations.subscribe(function(n){e.navigated=!0,e.lastSuccessfulId=n.id,e.events.next(new ap(n.id,e.serializeUrl(n.extractedUrl),e.serializeUrl(e.currentUrlTree))),e.lastSuccessfulNavigation=e.currentNavigation,e.currentNavigation=null,n.resolve(!0)},function(n){e.console.warn("Unhandled Navigation Error: ")})},e.prototype.scheduleNavigation=function(e,n,t,l){var r=this.getTransition();if(r&&"imperative"!==n&&"imperative"===r.source&&r.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(r&&"hashchange"==n&&"popstate"===r.source&&r.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(r&&"popstate"==n&&"hashchange"===r.source&&r.rawUrl.toString()===e.toString())return Promise.resolve(!0);var i=null,o=null,u=new Promise(function(e,n){i=e,o=n}),s=++this.navigationId;return this.setTransition({id:s,source:n,restoredState:t,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:l,resolve:i,reject:o,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(function(e){return Promise.reject(e)})},e.prototype.setBrowserUrl=function(e,n,t,l){var r=this.urlSerializer.serialize(e);l=l||{},this.location.isCurrentPathEqualTo(r)||n?this.location.replaceState(r,"",i({},l,{navigationId:t})):this.location.go(r,"",i({},l,{navigationId:t}))},e.prototype.resetStateAndUrl=function(e,n,t){this.routerState=e,this.currentUrlTree=n,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t),this.resetUrlToCurrentUrlTree()},e.prototype.resetUrlToCurrentUrlTree=function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})},e}(),Td=function(){function e(e,n,t){var l=this;this.router=e,this.route=n,this.locationStrategy=t,this.commands=[],this.subscription=e.events.subscribe(function(e){e instanceof ap&&l.updateTargetUrlAndHref()})}return Object.defineProperty(e.prototype,"routerLink",{set:function(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"preserveQueryParams",{set:function(e){Wn()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=e},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(e){this.updateTargetUrlAndHref()},e.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},e.prototype.onClick=function(e,n,t,l){if(0!==e||n||t||l)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;var r={skipLocationChange:Id(this.skipLocationChange),replaceUrl:Id(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,r),!1},e.prototype.updateTargetUrlAndHref=function(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))},Object.defineProperty(e.prototype,"urlTree",{get:function(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:Id(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:Id(this.preserveFragment)})},enumerable:!0,configurable:!0}),o([yt("attr.target"),mt(),u("design:type",String)],e.prototype,"target",void 0),e}();function Id(e){return""===e||!!e}var Ad=function(){function e(e,n,t,l){var r=this;this.router=e,this.element=n,this.renderer=t,this.cdr=l,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.subscription=e.events.subscribe(function(e){e instanceof ap&&r.update()})}return e.prototype.ngAfterContentInit=function(){var e=this;this.links.changes.subscribe(function(n){return e.update()}),this.linksWithHrefs.changes.subscribe(function(n){return e.update()}),this.update()},Object.defineProperty(e.prototype,"routerLinkActive",{set:function(e){var n=Array.isArray(e)?e:e.split(" ");this.classes=n.filter(function(e){return!!e})},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(e){this.update()},e.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},e.prototype.update=function(){var e=this;this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(function(){var n=e.hasActiveLinks();e.isActive!==n&&(e.isActive=n,e.classes.forEach(function(t){n?e.renderer.addClass(e.element.nativeElement,t):e.renderer.removeClass(e.element.nativeElement,t)}))})},e.prototype.isLinkActive=function(e){var n=this;return function(t){return e.isActive(t.urlTree,n.routerLinkActiveOptions.exact)}},e.prototype.hasActiveLinks=function(){return this.links.some(this.isLinkActive(this.router))||this.linksWithHrefs.some(this.isLinkActive(this.router))},e}(),wd=function(){return function(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Nd,this.attachRef=null}}(),Nd=function(){function e(){this.contexts=new Map}return e.prototype.onChildOutletCreated=function(e,n){var t=this.getOrCreateContext(e);t.outlet=n,this.contexts.set(e,t)},e.prototype.onChildOutletDestroyed=function(e){var n=this.getContext(e);n&&(n.outlet=null)},e.prototype.onOutletDeactivated=function(){var e=this.contexts;return this.contexts=new Map,e},e.prototype.onOutletReAttached=function(e){this.contexts=e},e.prototype.getOrCreateContext=function(e){var n=this.getContext(e);return n||(n=new wd,this.contexts.set(e,n)),n},e.prototype.getContext=function(e){return this.contexts.get(e)||null},e}(),Pd=function(){function e(e,n,t,l,r){this.parentContexts=e,this.location=n,this.resolver=t,this.changeDetector=r,this.activated=null,this._activatedRoute=null,this.activateEvents=new pt,this.deactivateEvents=new pt,this.name=l||_p,e.onChildOutletCreated(this.name,this)}return e.prototype.ngOnDestroy=function(){this.parentContexts.onChildOutletDestroyed(this.name)},e.prototype.ngOnInit=function(){if(!this.activated){var e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}},Object.defineProperty(e.prototype,"isActivated",{get:function(){return!!this.activated},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"component",{get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activatedRoute",{get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activatedRouteData",{get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}},enumerable:!0,configurable:!0}),e.prototype.detach=function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var e=this.activated;return this.activated=null,this._activatedRoute=null,e},e.prototype.attach=function(e,n){this.activated=e,this._activatedRoute=n,this.location.insert(e.hostView)},e.prototype.deactivate=function(){if(this.activated){var e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}},e.prototype.activateWith=function(e,n){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;var t=(n=n||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),l=this.parentContexts.getOrCreateContext(this.name).children,r=new Dd(e,l,this.location.injector);this.activated=this.location.createComponent(t,this.location.length,r),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)},e}(),Dd=function(){function e(e,n,t){this.route=e,this.childContexts=n,this.parent=t}return e.prototype.get=function(e,n){return e===gh?this.route:e===Nd?this.childContexts:this.parent.get(e,n)},e}(),kd=function(){return function(){}}(),Md=function(){function e(){}return e.prototype.preload=function(e,n){return n().pipe(wa(function(){return ta(null)}))},e}(),xd=function(){function e(){}return e.prototype.preload=function(e,n){return ta(null)},e}(),Ld=function(){function e(e,n,t,l,r){this.router=e,this.injector=l,this.preloadingStrategy=r,this.loader=new Sd(n,t,function(n){return e.triggerEvent(new mp(n))},function(n){return e.triggerEvent(new yp(n))})}return e.prototype.setUpPreloading=function(){var e=this;this.subscription=this.router.events.pipe(da(function(e){return e instanceof ap}),Ya(function(){return e.preload()})).subscribe(function(){})},e.prototype.preload=function(){var e=this.injector.get(wn);return this.processRoutes(e,this.router.config)},e.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},e.prototype.processRoutes=function(e,n){var t,l,r=[];try{for(var i=s(n),o=i.next();!o.done;o=i.next()){var u=o.value;if(u.loadChildren&&!u.canLoad&&u._loadedConfig){var a=u._loadedConfig;r.push(this.processRoutes(a.module,a.routes))}else u.loadChildren&&!u.canLoad?r.push(this.preloadConfig(e,u)):u.children&&r.push(this.processRoutes(e,u.children))}}catch(c){t={error:c}}finally{try{o&&!o.done&&(l=i.return)&&l.call(i)}finally{if(t)throw t.error}}return Z(r).pipe(te(),K(function(e){}))},e.prototype.preloadConfig=function(e,n){var t=this;return this.preloadingStrategy.preload(n,function(){return t.loader.load(e.injector,n).pipe(X(function(e){return n._loadedConfig=e,t.processRoutes(e.module,e.routes)}))})},e}(),Fd=function(){function e(e,n,t){void 0===t&&(t={}),this.router=e,this.viewportScroller=n,this.options=t,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},t.scrollPositionRestoration=t.scrollPositionRestoration||"disabled",t.anchorScrolling=t.anchorScrolling||"disabled"}return e.prototype.init=function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()},e.prototype.createScrollEvents=function(){var e=this;return this.router.events.subscribe(function(n){n instanceof sp?(e.store[e.lastId]=e.viewportScroller.getScrollPosition(),e.lastSource=n.navigationTrigger,e.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof ap&&(e.lastId=n.id,e.scheduleScrollEvent(n,e.router.parseUrl(n.urlAfterRedirects).fragment))})},e.prototype.consumeScrollEvents=function(){var e=this;return this.router.events.subscribe(function(n){n instanceof Rp&&(n.position?"top"===e.options.scrollPositionRestoration?e.viewportScroller.scrollToPosition([0,0]):"enabled"===e.options.scrollPositionRestoration&&e.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===e.options.anchorScrolling?e.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==e.options.scrollPositionRestoration&&e.viewportScroller.scrollToPosition([0,0]))})},e.prototype.scheduleScrollEvent=function(e,n){this.router.triggerEvent(new Rp(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,n))},e.prototype.ngOnDestroy=function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()},e}(),Ud=new ye("ROUTER_CONFIGURATION"),Hd=new ye("ROUTER_FORROOT_GUARD"),Gd=[vs,{provide:Kp,useClass:qp},{provide:_d,useFactory:Kd,deps:[fl,Kp,Nd,vs,on,vt,jt,yd,Ud,[Ed,new Ge],[vd,new Ge]]},Nd,{provide:gh,useFactory:qd,deps:[_d]},{provide:vt,useClass:Sl},Ld,xd,Md,{provide:Ud,useValue:{enableTracing:!1}}];function Bd(){return new al("Router",_d)}var Vd=function(){function e(e,n){}var n;return n=e,e.forRoot=function(e,t){return{ngModule:n,providers:[Gd,Yd(e),{provide:Hd,useFactory:zd,deps:[[_d,new Ge,new Ve]]},{provide:Ud,useValue:t||{}},{provide:fs,useFactory:jd,deps:[hs,[new He(gs),new Ge],Ud]},{provide:Fd,useFactory:Wd,deps:[_d,ea,Ud]},{provide:kd,useExisting:t&&t.preloadingStrategy?t.preloadingStrategy:xd},{provide:al,multi:!0,useFactory:Bd},[$d,{provide:At,multi:!0,useFactory:Qd,deps:[$d]},{provide:Xd,useFactory:Zd,deps:[$d]},{provide:xt,multi:!0,useExisting:Xd}]]}},e.forChild=function(e){return{ngModule:n,providers:[Yd(e)]}},e}();function Wd(e,n,t){return t.scrollOffset&&n.setOffset(t.scrollOffset),new Fd(e,n,t)}function jd(e,n,t){return void 0===t&&(t={}),t.useHash?new ys(e,n):new Ss(e,n)}function zd(e){if(e)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Yd(e){return[{provide:Ce,multi:!0,useValue:e},{provide:yd,multi:!0,useValue:e}]}function Kd(e,n,t,l,r,i,o,u,s,a,c){void 0===s&&(s={});var p=new _d(null,n,t,l,r,i,o,Fp(u));if(a&&(p.urlHandlingStrategy=a),c&&(p.routeReuseStrategy=c),s.errorHandler&&(p.errorHandler=s.errorHandler),s.malformedUriErrorHandler&&(p.malformedUriErrorHandler=s.malformedUriErrorHandler),s.enableTracing){var h=Ja();p.events.subscribe(function(e){h.logGroup("Router Event: "+e.constructor.name),h.log(e.toString()),h.log(e),h.logGroupEnd()})}return s.onSameUrlNavigation&&(p.onSameUrlNavigation=s.onSameUrlNavigation),s.paramsInheritanceStrategy&&(p.paramsInheritanceStrategy=s.paramsInheritanceStrategy),s.urlUpdateStrategy&&(p.urlUpdateStrategy=s.urlUpdateStrategy),s.relativeLinkResolution&&(p.relativeLinkResolution=s.relativeLinkResolution),p}function qd(e){return e.routerState.root}var $d=function(){function e(e){this.injector=e,this.initNavigation=!1,this.resultOfPreactivationDone=new x}return e.prototype.appInitializer=function(){var e=this;return this.injector.get(ds,Promise.resolve(null)).then(function(){var n=null,t=new Promise(function(e){return n=e}),l=e.injector.get(_d),r=e.injector.get(Ud);if(e.isLegacyDisabled(r)||e.isLegacyEnabled(r))n(!0);else if("disabled"===r.initialNavigation)l.setUpLocationChangeListener(),n(!0);else{if("enabled"!==r.initialNavigation)throw new Error("Invalid initialNavigation options: '"+r.initialNavigation+"'");l.hooks.afterPreactivation=function(){return e.initNavigation?ta(null):(e.initNavigation=!0,n(!0),e.resultOfPreactivationDone)},l.initialNavigation()}return t})},e.prototype.bootstrapListener=function(e){var n=this.injector.get(Ud),t=this.injector.get(Ld),l=this.injector.get(Fd),r=this.injector.get(_d),i=this.injector.get(fl);e===i.components[0]&&(this.isLegacyEnabled(n)?r.initialNavigation():this.isLegacyDisabled(n)&&r.setUpLocationChangeListener(),t.setUpPreloading(),l.init(),r.resetRootComponentType(i.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())},e.prototype.isLegacyEnabled=function(e){return"legacy_enabled"===e.initialNavigation||!0===e.initialNavigation||void 0===e.initialNavigation},e.prototype.isLegacyDisabled=function(e){return"legacy_disabled"===e.initialNavigation||!1===e.initialNavigation},e}();function Qd(e){return e.appInitializer.bind(e)}function Zd(e){return e.bootstrapListener.bind(e)}var Xd=new ye("Router Initializer"),Jd=gr({encapsulation:2,styles:[],data:{}});function ef(e){return so(0,[(e()(),zr(0,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),ki(1,212992,null,0,Pd,[Nd,bl,Tn,[8,null],Rl],null,null)],function(e,n){e(n,1,0)},null)}function nf(e){return so(0,[(e()(),zr(0,0,null,null,1,"ng-component",[],null,null,null,ef,Jd)),ki(1,49152,null,0,Cp,[],null,null)],null,null)}var tf=ai("ng-component",Cp,nf,{},{},[]),lf=function(){function e(e){this.router=e}return e.prototype.ngOnInit=function(){},e.prototype.goToVillage=function(){this.router.navigate(["/village"])},e}(),rf=gr({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{margin:10px;font-size:4vw;text-align:center}button[_ngcontent-%COMP%]{font-size:1.5vw}"]],data:{}});function of(e){return so(0,[(e()(),zr(0,0,null,null,4,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),io(-1,null,[" Page not found "])),(e()(),zr(2,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(3,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.goToVillage()&&l),l},null,null)),(e()(),io(-1,null,["Village"]))],null,null)}function uf(e){return so(0,[(e()(),zr(0,0,null,null,1,"app-not-found",[],null,null,null,of,rf)),ki(1,114688,null,0,lf,[_d],null,null)],function(e,n){e(n,1,0)},null)}var sf=ai("app-not-found",lf,uf,{},{},[]),af=function(){function e(){}return e.prototype.onmousemove=function(e){var n=document.getElementById(this.elementId);if(n){var t=e.clientX;n.style.top=e.clientY+20+"px",n.style.left=t+20+"px"}},e}(),cf=function(){function e(){this.margin="0"}return e.prototype.ngOnInit=function(){},e.prototype.getTitle=function(){return""===this.title?"":this.title?this.title:"Food"===this.name?"Food nutrition":Au.titleCase(this.name).replace("_"," ")},e.prototype.getPath=function(){var e="assets/";return this.path&&(e+=this.path+"/"),e},e}(),pf=gr({encapsulation:0,styles:[["[_nghost-%COMP%]{display:inline-block;vertical-align:middle;height:24px}#wrapper[_ngcontent-%COMP%]{display:inline-block;height:24px;margin:0;padding:0}img[_ngcontent-%COMP%]{display:inline-block;margin:0;padding:0;height:24px;width:24px}"]],data:{}});function hf(e){return so(0,[(e()(),zr(0,0,null,null,3,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,2,"img",[["class","resourceIcon"],["draggable","false"],["onerror","if (this.src !== 'assets/question_mark.svg') this.src = 'assets/question_mark.svg';"]],[[8,"src",4],[8,"title",0],[8,"alt",0]],null,null,null,null)),ki(2,278528,null,0,Ws,[Vl,Pn,Ln],{ngStyle:[0,"ngStyle"]},null),lo(3,{margin:0})],function(e,n){var t=e(n,3,0,n.component.margin);e(n,2,0,t)},function(e,n){var t=n.component;e(n,1,0,Vr(1,"",t.getPath()+t.name.replace(" ","_").toLowerCase(),".svg"),Vr(1,"",t.getTitle(),""),Vr(1,"",t.name,""))})}function df(e,n){return new w(function(t){var l=e.length;if(0!==l)for(var r=new Array(l),i=0,o=0,u=function(u){var s=Z(e[u]),a=!1;t.add(s.subscribe({next:function(e){a||(a=!0,o++),r[u]=e},error:function(e){return t.error(e)},complete:function(){++i!==l&&a||(o===l&&t.next(n?n.reduce(function(e,n,t){return e[n]=r[t],e},{}):r),t.complete())}}))},s=0;s<l;s++)u(s);else t.complete()})}var ff=function(){function e(){}return Object.defineProperty(e.prototype,"value",{get:function(){return this.control?this.control.value:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valid",{get:function(){return this.control?this.control.valid:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"invalid",{get:function(){return this.control?this.control.invalid:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pending",{get:function(){return this.control?this.control.pending:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this.control?this.control.disabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this.control?this.control.enabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errors",{get:function(){return this.control?this.control.errors:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pristine",{get:function(){return this.control?this.control.pristine:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dirty",{get:function(){return this.control?this.control.dirty:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"touched",{get:function(){return this.control?this.control.touched:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){return this.control?this.control.status:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"untouched",{get:function(){return this.control?this.control.untouched:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"statusChanges",{get:function(){return this.control?this.control.statusChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueChanges",{get:function(){return this.control?this.control.valueChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),e.prototype.reset=function(e){void 0===e&&(e=void 0),this.control&&this.control.reset(e)},e.prototype.hasError=function(e,n){return!!this.control&&this.control.hasError(e,n)},e.prototype.getError=function(e,n){return this.control?this.control.getError(e,n):null},e}(),gf=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r(n,e),Object.defineProperty(n.prototype,"formDirective",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),n}(ff);function vf(e){return null==e||0===e.length}var mf=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,yf=function(){function e(){}return e.min=function(e){return function(n){if(vf(n.value)||vf(e))return null;var t=parseFloat(n.value);return!isNaN(t)&&t<e?{min:{min:e,actual:n.value}}:null}},e.max=function(e){return function(n){if(vf(n.value)||vf(e))return null;var t=parseFloat(n.value);return!isNaN(t)&&t>e?{max:{max:e,actual:n.value}}:null}},e.required=function(e){return vf(e.value)?{required:!0}:null},e.requiredTrue=function(e){return!0===e.value?null:{required:!0}},e.email=function(e){return vf(e.value)?null:mf.test(e.value)?null:{email:!0}},e.minLength=function(e){return function(n){if(vf(n.value))return null;var t=n.value?n.value.length:0;return t<e?{minlength:{requiredLength:e,actualLength:t}}:null}},e.maxLength=function(e){return function(n){var t=n.value?n.value.length:0;return t>e?{maxlength:{requiredLength:e,actualLength:t}}:null}},e.pattern=function(n){return n?("string"==typeof n?(l="","^"!==n.charAt(0)&&(l+="^"),l+=n,"$"!==n.charAt(n.length-1)&&(l+="$"),t=new RegExp(l)):(l=n.toString(),t=n),function(e){if(vf(e.value))return null;var n=e.value;return t.test(n)?null:{pattern:{requiredPattern:l,actualValue:n}}}):e.nullValidator;var t,l},e.nullValidator=function(e){return null},e.compose=function(e){if(!e)return null;var n=e.filter(Sf);return 0==n.length?null:function(e){return bf(function(e,t){return n.map(function(n){return n(e)})}(e))}},e.composeAsync=function(e){if(!e)return null;var n=e.filter(Sf);return 0==n.length?null:function(e){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(1===e.length){var t=e[0];if(p(t))return df(t,null);if(h(t)&&Object.getPrototypeOf(t)===Object.prototype){var l=Object.keys(t);return df(l.map(function(e){return t[e]}),l)}}if("function"==typeof e[e.length-1]){var r=e.pop();return df(e=1===e.length&&p(e[0])?e[0]:e,null).pipe(K(function(e){return r.apply(void 0,e)}))}return df(e,null)}(function(e,t){return n.map(function(n){return n(e)})}(e).map(Ef)).pipe(K(bf))}},e}();function Sf(e){return null!=e}function Ef(e){var n=Tt(e)?Z(e):e;if(!It(n))throw new Error("Expected validator to return Promise or Observable.");return n}function bf(e){var n=e.reduce(function(e,n){return null!=n?i({},e,n):e},{});return 0===Object.keys(n).length?null:n}var Of=new ye("NgValueAccessor"),Rf=function(){function e(e,n){this._renderer=e,this._elementRef=n,this.onChange=function(e){},this.onTouched=function(){}}return e.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e}(),Cf=new ye("CompositionEventMode"),_f=function(){function e(e,n,t){var l;this._renderer=e,this._elementRef=n,this._compositionMode=t,this.onChange=function(e){},this.onTouched=function(){},this._composing=!1,null==this._compositionMode&&(this._compositionMode=(l=Ja()?Ja().getUserAgent():"",!/android (\d+)/.test(l.toLowerCase())))}return e.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e.prototype._handleInput=function(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)},e.prototype._compositionStart=function(){this._composing=!0},e.prototype._compositionEnd=function(e){this._composing=!1,this._compositionMode&&this.onChange(e)},e}();function Tf(e){return e.validate?function(n){return e.validate(n)}:e}function If(e){return e.validate?function(n){return e.validate(n)}:e}var Af=function(){function e(e,n){this._renderer=e,this._elementRef=n,this.onChange=function(e){},this.onTouched=function(){}}return e.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)},e.prototype.registerOnChange=function(e){this.onChange=function(n){e(""==n?null:parseFloat(n))}},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e}();function wf(){throw new Error("unimplemented")}var Nf=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n._parent=null,n.name=null,n.valueAccessor=null,n._rawValidators=[],n._rawAsyncValidators=[],n}return r(n,e),Object.defineProperty(n.prototype,"validator",{get:function(){return wf()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"asyncValidator",{get:function(){return wf()},enumerable:!0,configurable:!0}),n}(ff),Pf=function(){function e(){this._accessors=[]}return e.prototype.add=function(e,n){this._accessors.push([e,n])},e.prototype.remove=function(e){for(var n=this._accessors.length-1;n>=0;--n)if(this._accessors[n][1]===e)return void this._accessors.splice(n,1)},e.prototype.select=function(e){var n=this;this._accessors.forEach(function(t){n._isSameGroup(t,e)&&t[1]!==e&&t[1].fireUncheck(e.value)})},e.prototype._isSameGroup=function(e,n){return!!e[0].control&&e[0]._parent===n._control._parent&&e[1].name===n.name},e}(),Df=function(){function e(e,n,t,l){this._renderer=e,this._elementRef=n,this._registry=t,this._injector=l,this.onChange=function(){},this.onTouched=function(){}}return e.prototype.ngOnInit=function(){this._control=this._injector.get(Nf),this._checkName(),this._registry.add(this._control,this)},e.prototype.ngOnDestroy=function(){this._registry.remove(this)},e.prototype.writeValue=function(e){this._state=e===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)},e.prototype.registerOnChange=function(e){var n=this;this._fn=e,this.onChange=function(){e(n.value),n._registry.select(n)}},e.prototype.fireUncheck=function(e){this.writeValue(e)},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e.prototype._checkName=function(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)},e.prototype._throwNameError=function(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')},e}(),kf=function(){function e(e,n){this._renderer=e,this._elementRef=n,this.onChange=function(e){},this.onTouched=function(){}}return e.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(e))},e.prototype.registerOnChange=function(e){this.onChange=function(n){e(""==n?null:parseFloat(n))}},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e}(),Mf='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',xf='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>';function Lf(e,n){return null==e?""+n:(n&&"object"==typeof n&&(n="Object"),(e+": "+n).slice(0,50))}var Ff=function(){function e(e,n){this._renderer=e,this._elementRef=n,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=De}return Object.defineProperty(e.prototype,"compareWith",{set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e},enumerable:!0,configurable:!0}),e.prototype.writeValue=function(e){this.value=e;var n=this._getOptionId(e);null==n&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);var t=Lf(n,e);this._renderer.setProperty(this._elementRef.nativeElement,"value",t)},e.prototype.registerOnChange=function(e){var n=this;this.onChange=function(t){n.value=n._getOptionValue(t),e(n.value)}},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e.prototype._registerOption=function(){return(this._idCounter++).toString()},e.prototype._getOptionId=function(e){var n,t;try{for(var l=s(Array.from(this._optionMap.keys())),r=l.next();!r.done;r=l.next()){var i=r.value;if(this._compareWith(this._optionMap.get(i),e))return i}}catch(o){n={error:o}}finally{try{r&&!r.done&&(t=l.return)&&t.call(l)}finally{if(n)throw n.error}}return null},e.prototype._getOptionValue=function(e){var n=function(e){return e.split(":")[0]}(e);return this._optionMap.has(n)?this._optionMap.get(n):e},e}(),Uf=function(){function e(e,n,t){this._element=e,this._renderer=n,this._select=t,this._select&&(this.id=this._select._registerOption())}return Object.defineProperty(e.prototype,"ngValue",{set:function(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(Lf(this.id,e)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{set:function(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)},enumerable:!0,configurable:!0}),e.prototype._setElementValue=function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)},e.prototype.ngOnDestroy=function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},e}();function Hf(e,n){return null==e?""+n:("string"==typeof n&&(n="'"+n+"'"),n&&"object"==typeof n&&(n="Object"),(e+": "+n).slice(0,50))}var Gf=function(){function e(e,n){this._renderer=e,this._elementRef=n,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=De}return Object.defineProperty(e.prototype,"compareWith",{set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e},enumerable:!0,configurable:!0}),e.prototype.writeValue=function(e){var n,t=this;if(this.value=e,Array.isArray(e)){var l=e.map(function(e){return t._getOptionId(e)});n=function(e,n){e._setSelected(l.indexOf(n.toString())>-1)}}else n=function(e,n){e._setSelected(!1)};this._optionMap.forEach(n)},e.prototype.registerOnChange=function(e){var n=this;this.onChange=function(t){var l=[];if(t.hasOwnProperty("selectedOptions"))for(var r=t.selectedOptions,i=0;i<r.length;i++){var o=r.item(i),u=n._getOptionValue(o.value);l.push(u)}else for(r=t.options,i=0;i<r.length;i++)(o=r.item(i)).selected&&(u=n._getOptionValue(o.value),l.push(u));n.value=l,e(l)}},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e.prototype._registerOption=function(e){var n=(this._idCounter++).toString();return this._optionMap.set(n,e),n},e.prototype._getOptionId=function(e){var n,t;try{for(var l=s(Array.from(this._optionMap.keys())),r=l.next();!r.done;r=l.next()){var i=r.value;if(this._compareWith(this._optionMap.get(i)._value,e))return i}}catch(o){n={error:o}}finally{try{r&&!r.done&&(t=l.return)&&t.call(l)}finally{if(n)throw n.error}}return null},e.prototype._getOptionValue=function(e){var n=function(e){return e.split(":")[0]}(e);return this._optionMap.has(n)?this._optionMap.get(n)._value:e},e}(),Bf=function(){function e(e,n,t){this._element=e,this._renderer=n,this._select=t,this._select&&(this.id=this._select._registerOption(this))}return Object.defineProperty(e.prototype,"ngValue",{set:function(e){null!=this._select&&(this._value=e,this._setElementValue(Hf(this.id,e)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{set:function(e){this._select?(this._value=e,this._setElementValue(Hf(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)},enumerable:!0,configurable:!0}),e.prototype._setElementValue=function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)},e.prototype._setSelected=function(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)},e.prototype.ngOnDestroy=function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},e}();function Vf(e,n){return c(n.path,[e])}function Wf(e,n){e||zf(n,"Cannot find control with"),n.valueAccessor||zf(n,"No value accessor for form control with"),e.validator=yf.compose([e.validator,n.validator]),e.asyncValidator=yf.composeAsync([e.asyncValidator,n.asyncValidator]),n.valueAccessor.writeValue(e.value),function(e,n){n.valueAccessor.registerOnChange(function(t){e._pendingValue=t,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&jf(e,n)})}(e,n),function(e,n){e.registerOnChange(function(e,t){n.valueAccessor.writeValue(e),t&&n.viewToModelUpdate(e)})}(e,n),function(e,n){n.valueAccessor.registerOnTouched(function(){e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&jf(e,n),"submit"!==e.updateOn&&e.markAsTouched()})}(e,n),n.valueAccessor.setDisabledState&&e.registerOnDisabledChange(function(e){n.valueAccessor.setDisabledState(e)}),n._rawValidators.forEach(function(n){n.registerOnValidatorChange&&n.registerOnValidatorChange(function(){return e.updateValueAndValidity()})}),n._rawAsyncValidators.forEach(function(n){n.registerOnValidatorChange&&n.registerOnValidatorChange(function(){return e.updateValueAndValidity()})})}function jf(e,n){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function zf(e,n){var t;throw t=e.path.length>1?"path: '"+e.path.join(" -> ")+"'":e.path[0]?"name: '"+e.path+"'":"unspecified name attribute",new Error(n+" "+t)}function Yf(e){return null!=e?yf.compose(e.map(Tf)):null}function Kf(e){return null!=e?yf.composeAsync(e.map(If)):null}var qf=[Rf,kf,Af,Ff,Gf,Df],$f=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r(n,e),n.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormGroup(this)},n.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeFormGroup(this)},Object.defineProperty(n.prototype,"control",{get:function(){return this.formDirective.getFormGroup(this)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"path",{get:function(){return Vf(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"validator",{get:function(){return Yf(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"asyncValidator",{get:function(){return Kf(this._asyncValidators)},enumerable:!0,configurable:!0}),n.prototype._checkParentType=function(){},n}(gf),Qf=function(e){function n(n){return e.call(this,n)||this}return r(n,e),n}(function(){function e(e){this._cd=e}return Object.defineProperty(e.prototype,"ngClassUntouched",{get:function(){return!!this._cd.control&&this._cd.control.untouched},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassTouched",{get:function(){return!!this._cd.control&&this._cd.control.touched},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassPristine",{get:function(){return!!this._cd.control&&this._cd.control.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassDirty",{get:function(){return!!this._cd.control&&this._cd.control.dirty},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassValid",{get:function(){return!!this._cd.control&&this._cd.control.valid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassInvalid",{get:function(){return!!this._cd.control&&this._cd.control.invalid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassPending",{get:function(){return!!this._cd.control&&this._cd.control.pending},enumerable:!0,configurable:!0}),e}());function Zf(e){var n=Jf(e)?e.validators:e;return Array.isArray(n)?Yf(n):n||null}function Xf(e,n){var t=Jf(n)?n.asyncValidators:e;return Array.isArray(t)?Kf(t):t||null}function Jf(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}var eg,ng=function(){function e(e,n){this.validator=e,this.asyncValidator=n,this._onCollectionChange=function(){},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}return Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valid",{get:function(){return"VALID"===this.status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"invalid",{get:function(){return"INVALID"===this.status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pending",{get:function(){return"PENDING"==this.status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return"DISABLED"===this.status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return"DISABLED"!==this.status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dirty",{get:function(){return!this.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"untouched",{get:function(){return!this.touched},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"updateOn",{get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"},enumerable:!0,configurable:!0}),e.prototype.setValidators=function(e){this.validator=Zf(e)},e.prototype.setAsyncValidators=function(e){this.asyncValidator=Xf(e)},e.prototype.clearValidators=function(){this.validator=null},e.prototype.clearAsyncValidators=function(){this.asyncValidator=null},e.prototype.markAsTouched=function(e){void 0===e&&(e={}),this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)},e.prototype.markAsUntouched=function(e){void 0===e&&(e={}),this.touched=!1,this._pendingTouched=!1,this._forEachChild(function(e){e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)},e.prototype.markAsDirty=function(e){void 0===e&&(e={}),this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)},e.prototype.markAsPristine=function(e){void 0===e&&(e={}),this.pristine=!0,this._pendingDirty=!1,this._forEachChild(function(e){e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)},e.prototype.markAsPending=function(e){void 0===e&&(e={}),this.status="PENDING",!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)},e.prototype.disable=function(e){void 0===e&&(e={}),this.status="DISABLED",this.errors=null,this._forEachChild(function(n){n.disable(i({},e,{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(e),this._onDisabledChange.forEach(function(e){return e(!0)})},e.prototype.enable=function(e){void 0===e&&(e={}),this.status="VALID",this._forEachChild(function(n){n.enable(i({},e,{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(e),this._onDisabledChange.forEach(function(e){return e(!1)})},e.prototype._updateAncestors=function(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),this._parent._updatePristine(),this._parent._updateTouched())},e.prototype.setParent=function(e){this._parent=e},e.prototype.updateValueAndValidity=function(e){void 0===e&&(e={}),this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)},e.prototype._updateTreeValidity=function(e){void 0===e&&(e={emitEvent:!0}),this._forEachChild(function(n){return n._updateTreeValidity(e)}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})},e.prototype._setInitialStatus=function(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"},e.prototype._runValidator=function(){return this.validator?this.validator(this):null},e.prototype._runAsyncValidator=function(e){var n=this;if(this.asyncValidator){this.status="PENDING";var t=Ef(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(function(t){return n.setErrors(t,{emitEvent:e})})}},e.prototype._cancelExistingSubscription=function(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()},e.prototype.setErrors=function(e,n){void 0===n&&(n={}),this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)},e.prototype.get=function(e){return function(e,n,t){return null==n?null:(n instanceof Array||(n=n.split(".")),n instanceof Array&&0===n.length?null:n.reduce(function(e,n){return e instanceof lg?e.controls.hasOwnProperty(n)?e.controls[n]:null:e instanceof rg&&e.at(n)||null},e))}(this,e)},e.prototype.getError=function(e,n){var t=n?this.get(n):this;return t&&t.errors?t.errors[e]:null},e.prototype.hasError=function(e,n){return!!this.getError(e,n)},Object.defineProperty(e.prototype,"root",{get:function(){for(var e=this;e._parent;)e=e._parent;return e},enumerable:!0,configurable:!0}),e.prototype._updateControlsErrors=function(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)},e.prototype._initObservables=function(){this.valueChanges=new pt,this.statusChanges=new pt},e.prototype._calculateStatus=function(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"},e.prototype._anyControlsHaveStatus=function(e){return this._anyControls(function(n){return n.status===e})},e.prototype._anyControlsDirty=function(){return this._anyControls(function(e){return e.dirty})},e.prototype._anyControlsTouched=function(){return this._anyControls(function(e){return e.touched})},e.prototype._updatePristine=function(e){void 0===e&&(e={}),this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)},e.prototype._updateTouched=function(e){void 0===e&&(e={}),this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)},e.prototype._isBoxedValue=function(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e},e.prototype._registerOnCollectionChange=function(e){this._onCollectionChange=e},e.prototype._setUpdateStrategy=function(e){Jf(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)},e}(),tg=function(e){function n(n,t,l){void 0===n&&(n=null);var r=e.call(this,Zf(t),Xf(l,t))||this;return r._onChange=[],r._applyFormState(n),r._setUpdateStrategy(t),r.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),r._initObservables(),r}return r(n,e),n.prototype.setValue=function(e,n){var t=this;void 0===n&&(n={}),this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(function(e){return e(t.value,!1!==n.emitViewToModelChange)}),this.updateValueAndValidity(n)},n.prototype.patchValue=function(e,n){void 0===n&&(n={}),this.setValue(e,n)},n.prototype.reset=function(e,n){void 0===e&&(e=null),void 0===n&&(n={}),this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1},n.prototype._updateValue=function(){},n.prototype._anyControls=function(e){return!1},n.prototype._allControlsDisabled=function(){return this.disabled},n.prototype.registerOnChange=function(e){this._onChange.push(e)},n.prototype._clearChangeFns=function(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=function(){}},n.prototype.registerOnDisabledChange=function(e){this._onDisabledChange.push(e)},n.prototype._forEachChild=function(e){},n.prototype._syncPendingControls=function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))},n.prototype._applyFormState=function(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e},n}(ng),lg=function(e){function n(n,t,l){var r=e.call(this,Zf(t),Xf(l,t))||this;return r.controls=n,r._initObservables(),r._setUpdateStrategy(t),r._setUpControls(),r.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),r}return r(n,e),n.prototype.registerControl=function(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)},n.prototype.addControl=function(e,n){this.registerControl(e,n),this.updateValueAndValidity(),this._onCollectionChange()},n.prototype.removeControl=function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()},n.prototype.setControl=function(e,n){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity(),this._onCollectionChange()},n.prototype.contains=function(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled},n.prototype.setValue=function(e,n){var t=this;void 0===n&&(n={}),this._checkAllValuesPresent(e),Object.keys(e).forEach(function(l){t._throwIfControlMissing(l),t.controls[l].setValue(e[l],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},n.prototype.patchValue=function(e,n){var t=this;void 0===n&&(n={}),Object.keys(e).forEach(function(l){t.controls[l]&&t.controls[l].patchValue(e[l],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},n.prototype.reset=function(e,n){void 0===e&&(e={}),void 0===n&&(n={}),this._forEachChild(function(t,l){t.reset(e[l],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n),this._updatePristine(n),this._updateTouched(n)},n.prototype.getRawValue=function(){return this._reduceChildren({},function(e,n,t){return e[t]=n instanceof tg?n.value:n.getRawValue(),e})},n.prototype._syncPendingControls=function(){var e=this._reduceChildren(!1,function(e,n){return!!n._syncPendingControls()||e});return e&&this.updateValueAndValidity({onlySelf:!0}),e},n.prototype._throwIfControlMissing=function(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error("Cannot find form control with name: "+e+".")},n.prototype._forEachChild=function(e){var n=this;Object.keys(this.controls).forEach(function(t){return e(n.controls[t],t)})},n.prototype._setUpControls=function(){var e=this;this._forEachChild(function(n){n.setParent(e),n._registerOnCollectionChange(e._onCollectionChange)})},n.prototype._updateValue=function(){this.value=this._reduceValue()},n.prototype._anyControls=function(e){var n=this,t=!1;return this._forEachChild(function(l,r){t=t||n.contains(r)&&e(l)}),t},n.prototype._reduceValue=function(){var e=this;return this._reduceChildren({},function(n,t,l){return(t.enabled||e.disabled)&&(n[l]=t.value),n})},n.prototype._reduceChildren=function(e,n){var t=e;return this._forEachChild(function(e,l){t=n(t,e,l)}),t},n.prototype._allControlsDisabled=function(){var e,n;try{for(var t=s(Object.keys(this.controls)),l=t.next();!l.done;l=t.next())if(this.controls[l.value].enabled)return!1}catch(r){e={error:r}}finally{try{l&&!l.done&&(n=t.return)&&n.call(t)}finally{if(e)throw e.error}}return Object.keys(this.controls).length>0||this.disabled},n.prototype._checkAllValuesPresent=function(e){this._forEachChild(function(n,t){if(void 0===e[t])throw new Error("Must supply a value for form control with name: '"+t+"'.")})},n}(ng),rg=function(e){function n(n,t,l){var r=e.call(this,Zf(t),Xf(l,t))||this;return r.controls=n,r._initObservables(),r._setUpdateStrategy(t),r._setUpControls(),r.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),r}return r(n,e),n.prototype.at=function(e){return this.controls[e]},n.prototype.push=function(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()},n.prototype.insert=function(e,n){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity()},n.prototype.removeAt=function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),this.updateValueAndValidity()},n.prototype.setControl=function(e,n){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),n&&(this.controls.splice(e,0,n),this._registerControl(n)),this.updateValueAndValidity(),this._onCollectionChange()},Object.defineProperty(n.prototype,"length",{get:function(){return this.controls.length},enumerable:!0,configurable:!0}),n.prototype.setValue=function(e,n){var t=this;void 0===n&&(n={}),this._checkAllValuesPresent(e),e.forEach(function(e,l){t._throwIfControlMissing(l),t.at(l).setValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},n.prototype.patchValue=function(e,n){var t=this;void 0===n&&(n={}),e.forEach(function(e,l){t.at(l)&&t.at(l).patchValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},n.prototype.reset=function(e,n){void 0===e&&(e=[]),void 0===n&&(n={}),this._forEachChild(function(t,l){t.reset(e[l],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n),this._updatePristine(n),this._updateTouched(n)},n.prototype.getRawValue=function(){return this.controls.map(function(e){return e instanceof tg?e.value:e.getRawValue()})},n.prototype._syncPendingControls=function(){var e=this.controls.reduce(function(e,n){return!!n._syncPendingControls()||e},!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e},n.prototype._throwIfControlMissing=function(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error("Cannot find form control at index "+e)},n.prototype._forEachChild=function(e){this.controls.forEach(function(n,t){e(n,t)})},n.prototype._updateValue=function(){var e=this;this.value=this.controls.filter(function(n){return n.enabled||e.disabled}).map(function(e){return e.value})},n.prototype._anyControls=function(e){return this.controls.some(function(n){return n.enabled&&e(n)})},n.prototype._setUpControls=function(){var e=this;this._forEachChild(function(n){return e._registerControl(n)})},n.prototype._checkAllValuesPresent=function(e){this._forEachChild(function(n,t){if(void 0===e[t])throw new Error("Must supply a value for form control at index: "+t+".")})},n.prototype._allControlsDisabled=function(){var e,n;try{for(var t=s(this.controls),l=t.next();!l.done;l=t.next())if(l.value.enabled)return!1}catch(r){e={error:r}}finally{try{l&&!l.done&&(n=t.return)&&n.call(t)}finally{if(e)throw e.error}}return this.controls.length>0||this.disabled},n.prototype._registerControl=function(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)},n}(ng),ig=Promise.resolve(null),og=function(e){function n(n,t){var l=e.call(this)||this;return l.submitted=!1,l._directives=[],l.ngSubmit=new pt,l.form=new lg({},Yf(n),Kf(t)),l}return r(n,e),n.prototype.ngAfterViewInit=function(){this._setUpdateStrategy()},Object.defineProperty(n.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"controls",{get:function(){return this.form.controls},enumerable:!0,configurable:!0}),n.prototype.addControl=function(e){var n=this;ig.then(function(){var t=n._findContainer(e.path);e.control=t.registerControl(e.name,e.control),Wf(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),n._directives.push(e)})},n.prototype.getControl=function(e){return this.form.get(e.path)},n.prototype.removeControl=function(e){var n=this;ig.then(function(){var t,l,r=n._findContainer(e.path);r&&r.removeControl(e.name),(l=(t=n._directives).indexOf(e))>-1&&t.splice(l,1)})},n.prototype.addFormGroup=function(e){var n=this;ig.then(function(){var t=n._findContainer(e.path),l=new lg({});(function(e,n){null==e&&zf(n,"Cannot find control with"),e.validator=yf.compose([e.validator,n.validator]),e.asyncValidator=yf.composeAsync([e.asyncValidator,n.asyncValidator])})(l,e),t.registerControl(e.name,l),l.updateValueAndValidity({emitEvent:!1})})},n.prototype.removeFormGroup=function(e){var n=this;ig.then(function(){var t=n._findContainer(e.path);t&&t.removeControl(e.name)})},n.prototype.getFormGroup=function(e){return this.form.get(e.path)},n.prototype.updateModel=function(e,n){var t=this;ig.then(function(){t.form.get(e.path).setValue(n)})},n.prototype.setValue=function(e){this.control.setValue(e)},n.prototype.onSubmit=function(e){return this.submitted=!0,n=this._directives,this.form._syncPendingControls(),n.forEach(function(e){var n=e.control;"submit"===n.updateOn&&n._pendingChange&&(e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)}),this.ngSubmit.emit(e),!1;var n},n.prototype.onReset=function(){this.resetForm()},n.prototype.resetForm=function(e){void 0===e&&(e=void 0),this.form.reset(e),this.submitted=!1},n.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)},n.prototype._findContainer=function(e){return e.pop(),e.length?this.form.get(e):this.form},n}(gf),ug=function(){function e(){}return e.modelParentException=function(){throw new Error('\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup\'s partner directive "formControlName" instead.  Example:\n\n      \n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });\n\n      Or, if you\'d like to avoid registering this form control, indicate that it\'s standalone in ngModelOptions:\n\n      Example:\n\n      \n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  ')},e.formGroupNameException=function(){throw new Error("\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      "+Mf+"\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      "+xf)},e.missingNameException=function(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')},e.modelGroupParentException=function(){throw new Error("\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      "+Mf+"\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      "+xf)},e.ngFormWarning=function(){console.warn("\n    It looks like you're using 'ngForm'.\n\n    Support for using the 'ngForm' element selector has been deprecated in Angular v6 and will be removed\n    in Angular v9.\n\n    Use 'ng-form' instead.\n\n    Before:\n    <ngForm #myForm=\"ngForm\">\n\n    After:\n    <ng-form #myForm=\"ngForm\">\n    ")},e}(),sg=new ye("NgFormSelectorWarning"),ag=function(e){function n(n,t,l){var r=e.call(this)||this;return r._parent=n,r._validators=t,r._asyncValidators=l,r}var t;return r(n,e),t=n,n.prototype._checkParentType=function(){this._parent instanceof t||this._parent instanceof og||ug.modelGroupParentException()},n}($f),cg=Promise.resolve(null),pg=function(e){function n(n,t,l,r){var i=e.call(this)||this;return i.control=new tg,i._registered=!1,i.update=new pt,i._parent=n,i._rawValidators=t||[],i._rawAsyncValidators=l||[],i.valueAccessor=function(e,n){if(!n)return null;Array.isArray(n)||zf(e,"Value accessor was not provided as an array for form control with");var t=void 0,l=void 0,r=void 0;return n.forEach(function(n){var i;n.constructor===_f?t=n:(i=n,qf.some(function(e){return i.constructor===e})?(l&&zf(e,"More than one built-in value accessor matches form control with"),l=n):(r&&zf(e,"More than one custom value accessor matches form control with"),r=n))}),r||l||t||(zf(e,"No valid value accessor for form control with"),null)}(i,r),i}return r(n,e),n.prototype.ngOnChanges=function(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),function(e,n){if(!e.hasOwnProperty("model"))return!1;var t=e.model;return!!t.isFirstChange()||!De(n,t.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)},n.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeControl(this)},Object.defineProperty(n.prototype,"path",{get:function(){return this._parent?Vf(this.name,this._parent):[this.name]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"validator",{get:function(){return Yf(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"asyncValidator",{get:function(){return Kf(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),n.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},n.prototype._setUpControl=function(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0},n.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)},n.prototype._isStandalone=function(){return!this._parent||!(!this.options||!this.options.standalone)},n.prototype._setUpStandalone=function(){Wf(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})},n.prototype._checkForErrors=function(){this._isStandalone()||this._checkParentType(),this._checkName()},n.prototype._checkParentType=function(){!(this._parent instanceof ag)&&this._parent instanceof $f?ug.formGroupNameException():this._parent instanceof ag||this._parent instanceof og||ug.modelParentException()},n.prototype._checkName=function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||ug.missingNameException()},n.prototype._updateValue=function(e){var n=this;cg.then(function(){n.control.setValue(e,{emitViewToModelChange:!1})})},n.prototype._updateDisabled=function(e){var n=this,t=e.isDisabled.currentValue,l=""===t||t&&"false"!==t;cg.then(function(){l&&!n.control.disabled?n.control.disable():!l&&n.control.disabled&&n.control.enable()})},n}(Nf),hg=function(){return function(){}}(),dg=function(){function e(){}var n;return n=e,e.withConfig=function(e){return{ngModule:n,providers:[{provide:sg,useValue:e.warnOnDeprecatedNgFormSelector}]}},e}(),fg=function(){return function(e,n,t){this.name=e,this.enabled=n,this.reserved=t}}(),gg=function(){function e(e,n,t){void 0===n&&(n=0),void 0===t&&(t=[new fg("Crafting",!1,0),new fg("Manufacture",!1,0),new fg("Hut",!1,0),new fg("House",!1,0),new fg("Bakery",!1,0),new fg("Tailor",!1,0),new fg("Tavern",!1,0),new fg("Tannery",!1,0),new fg("Sawmill",!1,0),new fg("Windmill",!1,0),new fg("Cotton mill",!1,0),new fg("Brewery",!1,0),new fg("Winery",!1,0),new fg("Stonemason",!1,0),new fg("Mint",!1,0),new fg("Fishers hut",!1,0)]),this.resource=e,this.reserve=n,this.consumers=t}return e.clone=function(n){var t=[];return n.consumers.forEach(function(e){return t.push(new fg(e.name,e.enabled,e.reserved))}),new e(n.resource,n.reserve,t)},e.prototype.getReservedAmountBySource=function(e,n){var t=0;return n?0:(t=this.reserve,this.consumers.forEach(function(n){n.enabled&&n.name===e&&(t=n.reserved)}),t)},e.prototype.isUsed=function(){var e=!1;return 0!==this.reserve||(this.consumers.forEach(function(n){n.enabled&&(e=!0)}),e)},e}(),vg=function(){function e(e,n,t,l,r,i,o,u,s){this.resource=e,this.name=n,this.amount=t,this.limit=l,this.reserved=r,this.resourceTypes=i,this.visible=o,this.highlighted=u,this.prioritise=s,this.options=new gg(e)}return e.prototype.toJSON=function(){return{amount:this.amount,limit:this.limit,visible:this.visible,highlighted:this.highlighted,prioritise:this.prioritise,options:this.options}},e.prototype.addResource=function(e){return this.amount+e>this.limit?(this.amount=this.limit,this.amount):(this.amount+=e,this.amount)},e.prototype.removeResource=function(e){return this.amount-e>0&&(this.amount-=e,!0)},e.prototype.getResource=function(){return this.resource},e.prototype.getName=function(){return this.name},e.prototype.getAmount=function(){return this.amount},e.prototype.getLimit=function(){return this.limit},e.prototype.getResourceTypes=function(){return this.resourceTypes},e.prototype.hasResourceType=function(e){return this.resourceTypes.indexOf(e)>-1},e.prototype.isVisible=function(){return this.visible},e.prototype.toggleVisible=function(){return this.visible=!this.visible,this.visible},e.prototype.isHighlighted=function(){return this.highlighted},e.prototype.toggleHighlighted=function(){return this.highlighted=!this.highlighted,this.highlighted},e.prototype.getFreeSpace=function(){return this.limit-this.amount},e}(),mg=function(){function e(){this.amount=0,this.limit=0,this.reserved=0,this.resourceTypes=[],this.visible=!1,this.highlighted=!1,this.prioritise=!1}return e.prototype.forResource=function(e){return this.resource=e,this},e.prototype.withName=function(e){return this.name=e,this},e.prototype.withAmount=function(e){return this.amount=e,this},e.prototype.withLimit=function(e){return this.limit=e,this},e.prototype.withReserved=function(e){return this.reserved=e,this},e.prototype.withResourceTypes=function(e){var n=this;return e.forEach(function(e){return n.resourceTypes.push(e)}),this},e.prototype.withResourceType=function(e){return this.resourceTypes.push(e),this},e.prototype.withVisible=function(e){return this.visible=e,this},e.prototype.withHighlighted=function(e){return this.highlighted=e,this},e.prototype.withPrioritise=function(e){return this.prioritise=e,this},e.prototype.build=function(){var e=new vg(this.resource,this.name,this.amount,this.limit,this.reserved,this.resourceTypes,this.visible,this.highlighted,this.prioritise);return this.resource=void 0,this.name=void 0,this.amount=0,this.limit=0,this.reserved=0,this.resourceTypes=[],this.visible=!1,this.highlighted=!1,this.prioritise=!1,e},e}(),yg=function(){return function(e,n,t){this.message=e,this.day=t,this.type=n}}(),Sg=function(){function e(){this.services=new Map}return e.prototype.addService=function(e,n){this.services.set(e,n)},e.prototype.getService=function(e){return this.services.get(e)},e.prototype.getServiceByRegion=function(e){switch(e){case Mu.VILLAGE:return this.services.get(Nu.VILLAGE);case Mu.FORT:return this.services.get(Nu.FORT);case Mu.FIELD:return this.services.get(Nu.FIELD);case Mu.FOREST:return this.services.get(Nu.FOREST);case Mu.MOUNTAINS:return this.services.get(Nu.MOUNTAINS);case Mu.SEA:return this.services.get(Nu.SEA);case Mu.PLATEAU:return this.services.get(Nu.PLATEAU);default:console.error("Region service not found for ["+Mu[e]+"]")}},e.ngInjectableDef=ve({factory:function(){return new e},token:e,providedIn:"root"}),e}(),Eg=function(e){return e[e.AUTO_SAVE_STATUS=0]="AUTO_SAVE_STATUS",e[e.AUTO_SAVE_PERIOD=1]="AUTO_SAVE_PERIOD",e[e.METRIC=2]="METRIC",e[e.SAVE_LOGS=3]="SAVE_LOGS",e[e.SOUND=4]="SOUND",e[e.SOUND_VOLUME=5]="SOUND_VOLUME",e[e.VISUAL_PROGRESS_BARS=6]="VISUAL_PROGRESS_BARS",e}({}),bg=function(){function e(){this.optionsSubject=new x,this.options=new Map}return e.prototype.init=function(){this.options.set(Eg.AUTO_SAVE_STATUS,!0),this.options.set(Eg.AUTO_SAVE_PERIOD,5),this.options.set(Eg.METRIC,!0),this.options.set(Eg.SAVE_LOGS,!1),this.options.set(Eg.SOUND,!0),this.options.set(Eg.SOUND_VOLUME,100),this.options.set(Eg.VISUAL_PROGRESS_BARS,!0),this.optionsSubject.next()},e.prototype.load=function(e){this.options=new Map(JSON.parse(e.options)),this.options.has(Eg.VISUAL_PROGRESS_BARS)||this.options.set(Eg.VISUAL_PROGRESS_BARS,!0),this.optionsSubject.next()},e.prototype.save=function(){return{options:JSON.stringify(Array.from(this.options.entries()))}},e.prototype.reset=function(e,n){e&&this.init()},e.prototype.registerForOptionsChange=function(){return this.optionsSubject.asObservable()},e.prototype.setOption=function(e,n){this.options.set(e,n),this.optionsSubject.next()},e.prototype.setOptions=function(e){for(var n=0,t=e;n<t.length;n++){var l=t[n];this.options.set(l.option,l.value)}this.optionsSubject.next()},e.prototype.getOption=function(e){return this.options.get(e)},e.ngInjectableDef=ve({factory:function(){return new e},token:e,providedIn:"root"}),e}(),Og=function(e){return e[e.LOG=0]="LOG",e[e.WARNING=1]="WARNING",e[e.SUCCESS=2]="SUCCESS",e[e.MYSTICAL=3]="MYSTICAL",e}({}),Rg=function(e){return e[e.SPRING=0]="SPRING",e[e.SUMMER=1]="SUMMER",e[e.AUTUMN=2]="AUTUMN",e[e.WINTER=3]="WINTER",e}({}),Cg=function(){return function(e,n){this.day=e,this.year=n}}(),_g=function(){function e(e){this.servicesService=e,this.daySubject=new x,this.year=1,this.day=1,this.tickInDay=0,this.season=Rg.SPRING,e.addService(Nu.CALENDAR,this)}return e.prototype.load=function(e){this.day=e.day,this.year=e.year,this.season=e.season,this.tickInDay=e.tickInDay},e.prototype.save=function(){return{day:this.day,year:this.year,season:this.season,tickInDay:this.tickInDay}},e.prototype.reset=function(e,n){this.day=1,this.tickInDay=0,this.season=Rg.SPRING,e?this.year=1:this.year+=1},e.prototype.tick=function(e){this.tickInDay+=1,11===this.tickInDay&&(this.tickInDay=0,this.day+=1,this.day===zu+1&&(this.day=1,this.year+=1,this.servicesService.getService(Nu.GAME).isEnabled(Eu.CALENDAR)&&this.servicesService.getService(Nu.LOG).success("New Year!")),this.daySubject.next(this.day)),this.day>=1&&this.day<=zu/4?this.season=Rg.SPRING:this.day>zu/4&&this.day<=zu/2?this.season=Rg.SUMMER:this.day>zu/2&&this.day<=zu/4*3?this.season=Rg.AUTUMN:this.day>zu/4*3&&this.day<=zu&&(this.season=Rg.WINTER)},e.prototype.getDay=function(){return this.day},e.prototype.getYear=function(){return this.year},e.prototype.getSeason=function(){return this.season},e.prototype.getAbsoluteDay=function(){return(this.year-1)*zu+this.day},e.prototype.getSeasonForAbsoluteDay=function(e){var n=(e-1)%zu+1;return n>=1&&n<=zu/4?Rg.SPRING:n>zu/4&&n<=zu/2?Rg.SUMMER:n>zu/2&&n<=zu/4*3?Rg.AUTUMN:n>zu/4*3&&n<=zu?Rg.WINTER:void 0},e.prototype.registerForDayChange=function(){return this.daySubject.asObservable()},e.prototype.getDate=function(){return new Cg(this.day,this.year)},e.ngInjectableDef=ve({factory:function(){return new e(Ye(Sg))},token:e,providedIn:"root"}),e}(),Tg=function(){function e(e,n,t){this.servicesService=e,this.calendarService=n,this.optionsService=t,this.entries=[],this.servicesService.addService(Nu.LOG,this),this.logSubject=new x}return e.prototype.log=function(e){this.entries.push(new yg(e,Og.LOG,this.calendarService.getDay())),this.logSubject.next()},e.prototype.warning=function(e){this.entries.push(new yg(e,Og.WARNING,this.calendarService.getDay())),this.logSubject.next()},e.prototype.success=function(e){this.entries.push(new yg(e,Og.SUCCESS,this.calendarService.getDay())),this.logSubject.next()},e.prototype.mystical=function(e){this.entries.push(new yg(e,Og.MYSTICAL,this.calendarService.getDay())),this.logSubject.next()},e.prototype.registerForLogs=function(){return this.logSubject.asObservable()},e.prototype.getEntries=function(){return this.entries},e.prototype.clearEntries=function(){this.entries=[],this.logSubject.next()},e.prototype.load=function(e){this.entries=e.logs},e.prototype.reset=function(e,n){this.entries=this.entries.slice(-5).filter(function(e){return e.type===Og.MYSTICAL})},e.prototype.save=function(){return this.optionsService.getOption(Eg.SAVE_LOGS)?{logs:this.entries}:{logs:[]}},e.ngInjectableDef=ve({factory:function(){return new e(Ye(Sg),Ye(_g),Ye(bg))},token:e,providedIn:"root"}),e}();!function(e){e.ERROR_1="ERROR_1: Copying failed",e.ERROR_2="ERROR_2: Resource limit below 0",e.ERROR_3="ERROR_3: Workers below 0",e.ERROR_4="ERROR_4: Population Cap below 0",e.ERROR_5="ERROR_5: ",e.ERROR_6="ERROR_6: ",e.ERROR_7="ERROR_7: ",e.ERROR_8="ERROR_8: "}(eg||(eg={}));var Ig=function(){function e(e){this.servicesService=e,this.textSubject=new x,this.missionSubject=new x,this.missionResponseSubject=new x,this.buildingSubject=new x,this.tutorialSubject=new x,this.tutorialResponseSubject=new x,this.valueSubject=new x,this.onOpenSubject=new x,this.confirmationSubject=new x,this.closeSubject=new x,this.valueResponseSubject=new x,this.regionSubject=new x,this.resourceOptionsSubject=new x,this.resourceOptionsResponseSubject=new x,this.modals=[],this.servicesService.addService(Nu.MODAL,this)}return e.prototype.add=function(e){this.modals.push(e)},e.prototype.remove=function(e){this.modals=this.modals.filter(function(n){return n.id!==e})},e.prototype.open=function(e){this.modals.find(function(n){return n.id===e}).open(),this.onOpenSubject.next(e)},e.prototype.close=function(e){this.modals.find(function(n){return n.id===e}).close(),this.closeSubject.next(e)},e.prototype.registerForText=function(){return this.textSubject.asObservable()},e.prototype.registerForOnOpen=function(){return this.onOpenSubject.asObservable()},e.prototype.registerForConfirmation=function(){return this.confirmationSubject.asObservable()},e.prototype.sendConfirmationResult=function(e){this.confirmationSubject.next(e)},e.prototype.setModalText=function(e){this.textSubject.next(e)},e.prototype.registerForRegion=function(){return this.regionSubject.asObservable()},e.prototype.setRegion=function(e){this.regionSubject.next(e)},e.prototype.registerForCloseModal=function(){return this.closeSubject.asObservable()},e.prototype.sendCloseSignal=function(e){this.closeSubject.next(e)},e.prototype.registerForValue=function(){return this.valueSubject.asObservable()},e.prototype.setModalValue=function(e){this.valueSubject.next(e)},e.prototype.sendValueInput=function(e){this.valueResponseSubject.next(e)},e.prototype.registerForValueResponse=function(){return this.valueResponseSubject.asObservable()},e.prototype.registerForMission=function(){return this.missionSubject.asObservable()},e.prototype.registerForMissionResponse=function(){return this.missionResponseSubject.asObservable()},e.prototype.registerForBuilding=function(){return this.buildingSubject.asObservable()},e.prototype.setMission=function(e){this.missionSubject.next(e)},e.prototype.sendMissionResponse=function(e){this.missionResponseSubject.next(e)},e.prototype.setBuilding=function(e){this.buildingSubject.next(e)},e.prototype.info=function(e){this.open(mu.INFO),this.setModalText(e)},e.prototype.openTutorialModal=function(e){var n=this.modals.find(function(e){return e.id===mu.TUTORIAL});n.close(),n.openTutorialWindow(e)},e.prototype.registerForTutorial=function(){return this.tutorialSubject.asObservable()},e.prototype.setTutorial=function(e){this.tutorialSubject.next(e)},e.prototype.registerForTutorialResponse=function(){return this.tutorialResponseSubject.asObservable()},e.prototype.sendTutorialResponse=function(e){this.tutorialResponseSubject.next(e)},e.prototype.registerForResourceOptions=function(){return this.resourceOptionsSubject.asObservable()},e.prototype.setResourceOptions=function(e){this.resourceOptionsSubject.next(e)},e.prototype.registerForResourceOptionsResponse=function(){return this.resourceOptionsResponseSubject.asObservable()},e.prototype.sendResourceOptionsResponse=function(e){return this.resourceOptionsResponseSubject.next(e)},e.ngInjectableDef=ve({factory:function(){return new e(Ye(Sg))},token:e,providedIn:"root"}),e}(),Ag=function(){function e(e,n,t){this.modalService=e,this.servicesService=n,this.router=t,this.tutorialsEnabled=!1,this.villageTutorialState=0,this.forestTutorialState=0,this.fieldTutorialState=0,this.mountainsTutorialState=0,this.plateauTutorialState=0,this.seaTutorialState=0,this.resourcesTutorialState=0}return e.prototype.load=function(e){this.villageTutorialState=void 0!==e.villageTutorialState?e.villageTutorialState:0,this.forestTutorialState=void 0!==e.forestTutorialState?e.forestTutorialState:0,this.resourcesTutorialState=void 0!==e.resourcesTutorialState?e.resourcesTutorialState:0,this.fieldTutorialState=void 0!==e.fieldTutorialState?e.fieldTutorialState:0,this.mountainsTutorialState=void 0!==e.mountainsTutorialState?e.mountainsTutorialState:0,this.plateauTutorialState=void 0!==e.plateauTutorialState?e.plateauTutorialState:0,this.seaTutorialState=void 0!==e.seaTutorialState?e.seaTutorialState:0},e.prototype.save=function(){return{villageTutorialState:this.villageTutorialState,forestTutorialState:this.forestTutorialState,resourcesTutorialState:this.resourcesTutorialState,fieldTutorialState:this.fieldTutorialState,mountainsTutorialState:this.mountainsTutorialState,plateauTutorialState:this.plateauTutorialState,seaTutorialState:this.seaTutorialState}},e.prototype.reset=function(e,n){},e.prototype.checkRegionTutorial=function(e){var n=this;if(this.tutorialsEnabled)switch(e){case Mu.VILLAGE:if(0===this.villageTutorialState){this.startTutorial(Ku);var t=this.modalService.registerForTutorialResponse().subscribe(function(e){t.unsubscribe(),n.villageTutorialState=e})}break;case Mu.FOREST:if(0===this.forestTutorialState){this.startTutorial(qu);var l=this.modalService.registerForTutorialResponse().subscribe(function(e){l.unsubscribe(),n.forestTutorialState=e})}break;case Mu.FIELD:if(0===this.fieldTutorialState){this.startTutorial($u);var r=this.modalService.registerForTutorialResponse().subscribe(function(e){r.unsubscribe(),n.fieldTutorialState=e})}break;case Mu.MOUNTAINS:if(0===this.mountainsTutorialState){this.startTutorial(Qu);var i=this.modalService.registerForTutorialResponse().subscribe(function(e){i.unsubscribe(),n.mountainsTutorialState=e})}break;case Mu.PLATEAU:if(0===this.plateauTutorialState){this.startTutorial(Zu);var o=this.modalService.registerForTutorialResponse().subscribe(function(e){o.unsubscribe(),n.plateauTutorialState=e})}break;case Mu.SEA:if(0===this.seaTutorialState){this.startTutorial(Xu);var u=this.modalService.registerForTutorialResponse().subscribe(function(e){u.unsubscribe(),n.seaTutorialState=e})}}},e.prototype.checkResourcesTutorial=function(){var e=this;if(0===this.resourcesTutorialState){this.startTutorial(Ju);var n=this.modalService.registerForTutorialResponse().subscribe(function(t){n.unsubscribe(),e.resourcesTutorialState=t})}},e.prototype.enableTutorials=function(){this.tutorialsEnabled=!0},e.prototype.resetTutorials=function(){this.villageTutorialState=0,this.forestTutorialState=0,this.fieldTutorialState=0,this.mountainsTutorialState=0,this.plateauTutorialState=0,this.seaTutorialState=0,this.resourcesTutorialState=0,this.router.url.endsWith("village")?this.checkRegionTutorial(Mu.VILLAGE):this.router.url.endsWith("forest")?this.checkRegionTutorial(Mu.FOREST):this.router.url.endsWith("field")?this.checkRegionTutorial(Mu.FIELD):this.router.url.endsWith("mountains")?this.checkRegionTutorial(Mu.MOUNTAINS):this.router.url.endsWith("plateau")?this.checkRegionTutorial(Mu.PLATEAU):this.router.url.endsWith("sea")?this.checkRegionTutorial(Mu.SEA):this.router.url.endsWith("resources")?this.checkResourcesTutorial():this.modalService.info("Tutorials have been enabled")},e.prototype.startTutorial=function(e){this.modalService.setTutorial(e),this.servicesService.getService(Nu.TICKER).stop(),this.modalService.openTutorialModal(e[0].position)},e.prototype.showCurrentViewTutorial=function(){this.router.url.endsWith("village")?this.startTutorial(Ku):this.router.url.endsWith("forest")?this.startTutorial(qu):this.router.url.endsWith("field")?this.startTutorial($u):this.router.url.endsWith("mountains")?this.startTutorial(Qu):this.router.url.endsWith("plateau")?this.startTutorial(Zu):this.router.url.endsWith("sea")?this.startTutorial(Xu):this.router.url.endsWith("resources")?this.startTutorial(Ju):this.modalService.info("There is no tutorial for this tab")},e.ngInjectableDef=ve({factory:function(){return new e(Ye(Ig),Ye(Sg),Ye(_d))},token:e,providedIn:"root"}),e}(),wg=function(){function e(e,n,t,l){this.servicesService=e,this.modalService=n,this.logService=t,this.tutorialsService=l,this.flags=[],this.gameState=0,this.abdicationLevel=0,this.devMessage=Number.MAX_SAFE_INTEGER,this.demolishReturn=ts.DEMOLITION_RETURN,this.servicesService.addService(Nu.GAME,this)}return e.prototype.init=function(){var e=this;Gu.production?this.flags=[]:(this.flags=[],Object.values(Eu).filter(function(e){return!isNaN(e)}).forEach(function(n){return e.flags.push(n)}))},e.prototype.load=function(e){this.flags=e.flags,this.gameState=e.gameState,this.demolishReturn=e.demolishReturn,this.devMessage=e.devMessage,this.abdicationLevel=e.abdicationLevel},e.prototype.save=function(){return{flags:this.flags,gameState:this.gameState,demolishReturn:this.demolishReturn,devMessage:this.devMessage,abdicationLevel:this.abdicationLevel}},e.prototype.reset=function(e,n){this.flags=[],this.gameState=0,this.demolishReturn=ts.DEMOLITION_RETURN,this.init(),e&&(this.devMessage=Number.MAX_SAFE_INTEGER,this.abdicationLevel=0),n&&(this.abdicationLevel=0)},e.prototype.isEnabled=function(e){return this.flags.includes(e)},e.prototype.enable=function(e){this.flags.includes(e)||this.flags.push(e)},e.prototype.disable=function(e){this.flags.includes(e)&&this.flags.splice(this.flags.indexOf(e),1)},e.prototype.setGameState=function(e){this.gameState=e},e.prototype.getGameState=function(){return this.gameState},e.prototype.tick=function(e){0===this.getGameState()&&(this.displayWelcomeModal(),this.addStartBoost(),this.tutorialsService.checkRegionTutorial(Mu.VILLAGE),this.setGameState(1)),this.displayDevMessage()},e.prototype.displayWelcomeModal=function(){var e=this;this.modalService.info(Bu);var n=this.modalService.registerForCloseModal().subscribe(function(){e.devMessage===Number.MAX_SAFE_INTEGER&&(e.devMessage=0),n.unsubscribe()})},e.prototype.displayDevMessage=function(){var e=Vu.length;this.devMessage<e&&(this.showDevNotes(),this.devMessage=e)},e.prototype.showDevNotes=function(){this.modalService.open(mu.CHANGELOG)},e.prototype.addStartBoost=function(){Wu&&this.servicesService.getService(Nu.EFFECTS).addBuildingEffect(new Du(Wu.name,Wu.building,Wu.effect,Wu.duration))},e.prototype.getAbdicationLevel=function(){return this.abdicationLevel},e.prototype.incrementAbdicationLevel=function(){this.abdicationLevel+=1,this.abdicationLevel>=7&&this.logService.mystical("As you finish last wonder building strange thoughts of ancient structures appear in your head. Who knows what purpose this building serve")},e.ngInjectableDef=ve({factory:function(){return new e(Ye(Sg),Ye(Ig),Ye(Tg),Ye(Ag))},token:e,providedIn:"root"}),e}(),Ng=function(){return function(e,n,t,l,r,i,o){this.perk=e,this.usages=n,this.maxUsages=t,this.description=l,this.cost=r,this.reset=i,this.effect=o}}(),Pg=function(){function e(e,n,t){this.modalService=e,this.logService=n,this.servicesService=t,this.royalPoints=0,this.perks=[],this.goldenFish=!1,this.goldenEgg=!1,this.servicesService.addService(Nu.ROYAL,this),this.initPerks()}return e.prototype.initPerks=function(){var e=this;this.perks=[],Object.entries(as.PERKS).forEach(function(n){e.perks.push(new Ng(yu[n[0]],n[1].USAGES,n[1].MAX_USAGES,n[1].DESCRIPTION,n[1].COST,n[1].RESET,n[1].EFFECT))})},e.prototype.load=function(e){var n=this;this.royalPoints=e.royalPoints,this.goldenFish=void 0!==e.goldenFish&&e.goldenFish,this.goldenEgg=void 0!==e.goldenEgg&&e.goldenEgg,e.progress.forEach(function(e){var t=n.perks.find(function(n){return n.perk===e[0]});t&&(t.usages=e[1])})},e.prototype.save=function(){var e=[];return this.perks.forEach(function(n){return e.push([n.perk,n.usages])}),{royalPoints:this.royalPoints,progress:e,goldenFish:this.goldenFish,goldenEgg:this.goldenEgg}},e.prototype.reset=function(e,n){var t=this;e?(this.royalPoints=0,this.goldenFish=!1,this.goldenEgg=!1,this.initPerks()):this.perks.forEach(function(e){e.reset&&e.usages>0&&e.reset(t.servicesService,e)})},e.prototype.getRoyalPoints=function(){return this.royalPoints},e.prototype.buyRoyalPoints=function(){this.modalService.open(mu.ROYAL)},e.prototype.increaseRoyalPoints=function(e){this.royalPoints+=e},e.prototype.getRoyalPerks=function(){return this.perks},e.prototype.unlock=function(e){(0===e.maxUsages||e.usages<e.maxUsages)&&(this.royalPoints>=e.cost?this.perks.find(function(n){return e===n}).effect(this.servicesService,e):this.modalService.info("Not enough Royal Points!<br>"+e.cost+" RP required but only "+this.royalPoints+" available"))},e.prototype.unlockCallback=function(e){this.royalPoints-=Number(e.cost),e.usages+=1},e.prototype.isGoldenFishCaught=function(){return this.goldenFish},e.prototype.catchGoldenFish=function(){return!(this.goldenFish||!ku.chance(as.GOLDEN_ITEMS.GOLDEN_FISH_CHANCE)||(this.increaseRoyalPoints(5),this.logService.mystical("You have caught a golden fish. You let it go and it granted you 5 Royal Points"),this.goldenFish=!0,0))},e.prototype.layGoldenEgg=function(){return!(this.goldenEgg||!ku.chance(as.GOLDEN_ITEMS.GOLDEN_EGG_CHANCE)||(this.increaseRoyalPoints(5),this.logService.mystical("Your chicken laid golden egg. You decided to keep it and was granted 5 Royal Points"),this.goldenEgg=!0,0))},e.ngInjectableDef=ve({factory:function(){return new e(Ye(Ig),Ye(Tg),Ye(Sg))},token:e,providedIn:"root"}),e}(),Dg=function(){function e(e,n,t,l){this.servicesService=e,this.modalService=n,this.royalService=t,this.logService=l,e.addService(Nu.KONGREGATE,this);try{kongregateAPI.loadAPI(function(){window.kongregate=kongregateAPI.getAPI();var e=[],n=function(n){if(n.success){var l=e.find(function(e){return e[0]===n.id});l&&t.increaseRoyalPoints(l[1])}};window.kongregate.mtx.requestUserItemList(null,function(t){if(t.success)for(var l=0;l<t.data.length;l++){var r=t.data[l];e.push([r.id,Number(r.identifier.replace("rp_pack",""))]),window.kongregate.mtx.useItemInstance(r.id,n)}})})}catch(r){console.error(r)}}return e.prototype.isSet=function(){return!!window.kongregate},e.prototype.isAvailable=function(){return window.kongregate&&0!==this.getUserId()},e.prototype.submitStat=function(e,n){window.kongregate.stats.submit(e,n)},e.prototype.getUsername=function(){if(this.isSet())return window.kongregate.services.getUsername()},e.prototype.getUserId=function(){if(this.isSet())return window.kongregate.services.getUserId()},e.prototype.buyItem=function(e){var n=this.modalService,t=this.royalService,l=this.logService,r=[],i=function(e){if(e.success){var n=r.find(function(n){return n[0]===e.id});n&&(t.increaseRoyalPoints(n[1]),l.log("Added "+n[1]+" Royal Points"))}},o=function(e){if(e.success)for(var n=0;n<e.data.length;n++){var t=e.data[n];r.push([t.id,Number(t.identifier.replace("rp_pack",""))]),window.kongregate.mtx.useItemInstance(t.id,i)}};window.kongregate.mtx.purchaseItems([e],function(e){e.success&&(n.close(mu.ROYAL),window.kongregate.mtx.requestUserItemList(null,o))})},e.ngInjectableDef=ve({factory:function(){return new e(Ye(Sg),Ye(Ig),Ye(Pg),Ye(Tg))},token:e,providedIn:"root"}),e}(),kg=function(){function e(e){this.happiness=Yu.START_HAPPINESS,e.addService(Nu.HAPPINESS,this)}return e.prototype.load=function(e){this.happiness=e.happiness},e.prototype.save=function(){return{happiness:this.happiness}},e.prototype.reset=function(e,n){this.happiness=Yu.START_HAPPINESS},e.prototype.tick=function(e){},e.prototype.getHappiness=function(){return this.happiness},e.prototype.getHappinessEffect=function(){return this.happiness>=0&&this.happiness<=10?-10:this.happiness>10&&this.happiness<=40?5:this.happiness>40&&this.happiness<=60?10:this.happiness>60&&this.happiness<=90?20:this.happiness>90&&this.happiness<=100?35:void 0},e.prototype.increaseHappiness=function(e,n){void 0===n&&(n=100),this.happiness<n&&(this.happiness+=e,this.happiness>100&&(this.happiness=100))},e.prototype.decreaseHappiness=function(e,n){void 0===n&&(n=0),this.happiness>n&&(this.happiness-=e,this.happiness<0&&(this.happiness=0))},e.prototype.resetHappiness=function(){this.happiness=Yu.START_HAPPINESS},e.ngInjectableDef=ve({factory:function(){return new e(Ye(Sg))},token:e,providedIn:"root"}),e}(),Mg=function(){function e(e,n,t){void 0===t&&(t=0),this.userName=e,this.value=n,this.daysAgo=t}return e.prototype.incrementDaysAgo=function(){this.daysAgo+=1},e}(),xg=function(){function e(e,n,t,l,r,i){var o=this;this.logService=e,this.servicesService=n,this.gameService=t,this.modalService=l,this.happinessService=r,this.kongregateService=i,this.resources=new Map,this.resourcesUse=new Map,this.populationScore=0,this.resourcesSubject=new x,this.callbacks=new Map,n.addService(Nu.RESOURCES,this),this.init(),n.getService(Nu.CALENDAR).registerForDayChange().subscribe(function(e){Array.from(o.resourcesUse.keys()).forEach(function(e){o.resourcesUse.set(e,o.resourcesUse.get(e).filter(function(e){return e.daysAgo<30})),o.resourcesUse.get(e).forEach(function(e){return e.incrementDaysAgo()}),0===o.resourcesUse.get(e).length&&o.resourcesUse.delete(e)})})}return e.prototype.init=function(){var e=this,n=new mg;ls.getResources().forEach(function(t){e.resources.set(vu[t[0]],n.forResource(vu[t[0]]).withName(Au.prepareResourceName(vu[t[0]])).withAmount(void 0!==t[1].AMOUNT?t[1].AMOUNT:ls.DEFAULT_AMOUNT).withLimit(void 0!==t[1].LIMIT?t[1].LIMIT:ls.DEFAULT_LIMIT).withResourceTypes(t[1].TYPES).withResourceType(_u.ALL).withVisible(void 0!==t[1].VISIBLE?t[1].VISIBLE:ls.DEFAULT_VISIBLE).withHighlighted(void 0!==t[1].HIGHLIGHTED?t[1].HIGHLIGHTED:ls.DEFAULT_HIGHLIGHTED).build())}),this.people=1,this.workers=0,this.populationCap=1,Gu.production||this.resources.forEach(function(e){return e.visible=!0})},e.prototype.getResource=function(e){return this.resources.get(e)},e.prototype.makeVisible=function(e){this.resources.get(e).visible=!0},e.prototype.increaseResource=function(e,n,t){if(void 0===t&&(t=!1),e===vu.FOOD||e===vu.NOTHING)return!0;var l=this.resources.get(e);if(l.getResourceTypes().includes(_u.ANIMAL)){var r=this.servicesService.getServiceByRegion(Mu.FIELD).getBuildings().filter(function(e){return e.getBuildingType()===bu.PASTURE}).map(function(e){return e}).filter(function(n){return n.getResourceType()===e}),i=0;if(r.forEach(function(e){return i+=e.getMaxAnimals()-e.getAnimals()}),n>i&&!t)return!1;for(t&&n>i&&(n=i);n>0&&i>0;)for(var o=0,u=r;o<u.length;o++){for(var s=u[o];s.getAnimals()<s.getMaxAnimals()&&n>0;)s.increaseAnimal(1),n-=1,i-=1;if(0===n)return!0}return!0}return!(!t&&l.amount+n>l.limit||(l.amount+=n,l.amount>l.limit&&(l.amount=l.limit),this.resourcesSubject.next(this.resources),l.isVisible()||(l.toggleVisible(),this.logService.log("New resource discovered: "+Au.prepareResourceName(e))),0))},e.prototype.decreaseResource=function(e,n,t,l){if(void 0===l&&(l=!1),e===vu.FOOD)return this.getFoodValue(t,l)>=n&&(this.getFood(n,t,l),!0);var r=this.resources.get(e);if(r.getResourceTypes().includes(_u.ANIMAL)){var i=this.servicesService.getServiceByRegion(Mu.FIELD).getBuildings().filter(function(e){return e.getBuildingType()===bu.PASTURE}).map(function(e){return e}).filter(function(n){return n.getResourceType()===e&&n.getAnimals()>0}),o=0;if(i.forEach(function(e){return o+=e.getAnimals()}),o>=n){for(var u=0,s=i;u<s.length;u++){for(var a=s[u];n>0&&a.getAnimals()>0;)a.decreaseAnimal(1),r.amount-=1,this.addResourceUse(e,t,1),n-=1;if(0===n)return!0}return!0}return!1}return 0!==this.hasResource(e,n,t,l)?(this.resourcesSubject.next(this.resources),!1):(r.amount-=n,this.addResourceUse(e,t,n),this.resourcesSubject.next(this.resources),!0)},e.prototype.hasResource=function(e,n,t,l){if(void 0===l&&(l=!1),e===vu.FOOD)return this.getFoodValue(t,l)>=n?0:n-this.getFoodValue(t,l);var r=this.resources.get(e);return l?r.amount>=n?0:n-this.resources.get(e).amount:r.amount-r.options.getReservedAmountBySource(t,l)>=n?0:n-(r.amount-r.options.getReservedAmountBySource(t,l))},e.prototype.hasLimit=function(e){return this.resources.get(e).amount<this.resources.get(e).limit},e.prototype.decreaseResources=function(e,n,t,l,r){void 0===t&&(t=!1),void 0===l&&(l=1),void 0===r&&(r=!1);for(var i="",o=!0,u=0,s=Array.from(e);u<s.length;u++){var a=s[u],c=this.hasResource(d=a[0],a[1]*l,n,t);0!==c&&(i+="Missing "+c+" "+Au.prepareResourceName(d)+"<br>",o=!1)}if(!o&&!r)return this.modalService.info(i),!1;for(var p=0,h=Array.from(e);p<h.length;p++){var d,f=h[p];this.decreaseResource(d=f[0],f[1]*l,n,t)}return!0},e.prototype.hasResources=function(e,n,t,l){void 0===t&&(t=1),void 0===l&&(l=!1);for(var r=!0,i=0,o=Array.from(e);i<o.length;i++){var u=o[i];0!==this.hasResource(u[0],u[1]*t,n,l)&&(r=!1)}return r},e.prototype.increaseLimit=function(e,n){this.resources.forEach(function(t){t.getResourceTypes().includes(e)&&!t.getResourceTypes().includes(_u.ANIMAL)&&(t.limit+=n)})},e.prototype.increaseResourceLimit=function(e,n){this.resources.get(e).limit+=n},e.prototype.decreaseLimit=function(e,n){this.resources.forEach(function(t){t.getResourceTypes().includes(e)&&!t.getResourceTypes().includes(_u.ANIMAL)&&(t.limit-=n,t.limit<0&&(t.limit=0,console.error(eg.ERROR_2,t.getResource(),t.limit)),t.amount>t.limit&&(t.amount=t.limit))})},e.prototype.decreaseResourceLimit=function(e,n){var t=this.resources.get(e);t.limit-=n,t.limit<0&&(t.limit=0,console.error(eg.ERROR_2,t.getResource(),t.limit)),t.amount>t.limit&&(t.amount=t.limit)},e.prototype.getResources=function(){return this.resources},e.prototype.save=function(){var e="[";return this.resources.forEach(function(n){e+="["+n.resource+","+JSON.stringify(n)+"],"}),{resources:e=e.slice(0,-1)+"]",people:this.people,workers:this.workers,populationCap:this.populationCap}},e.prototype.load=function(e){var n=this;JSON.parse(e.resources).forEach(function(e){if(n.resources.get(e[0]).amount=e[1].amount,n.resources.get(e[0]).limit=e[1].limit,n.resources.get(e[0]).visible=e[1].visible,n.resources.get(e[0]).highlighted=e[1].highlighted,n.resources.get(e[0]).prioritise=e[1].prioritise,e[1].reserved)n.resources.get(e[0]).options=new gg(n.resources.get(e[0]).resource,e[1].reserved);else if(e[1].options){var t=[];e[1].options.consumers.forEach(function(e){t.push(new fg(e.name,e.enabled,e.reserved))}),n.resources.get(e[0]).options=new gg(e[1].options.resource,e[1].options.reserve,t)}else n.resources.get(e[0]).options=new gg(n.resources.get(e[0]).resource)}),this.people=e.people,this.workers=e.workers,this.populationCap=e.populationCap,this.resourcesSubject.next(this.resources)},e.prototype.reset=function(e,n){this.resources=new Map,this.people=1,this.workers=0,this.populationCap=1,this.populationScore=0,this.init(),this.resourcesSubject.next(this.resources)},e.prototype.registerForResourcesChange=function(){return this.resourcesSubject.asObservable()},e.prototype.createPeople=function(e){this.people+=e},e.prototype.removePeople=function(e){if(this.people-=e,this.people-e<0)for(;this.people<0;){var n=Math.floor(Math.random()*this.callbacks.size);Array.from(this.callbacks.values())[n].fireRandomWorker()}},e.prototype.hireWorker=function(){return this.people>0&&(this.people-=1,this.workers+=1,!0)},e.prototype.fireWorker=function(e){void 0===e&&(e=1),0===this.workers&&console.error(eg.ERROR_3),this.workers-=e,this.people+=e},e.prototype.getPeople=function(){return this.people},e.prototype.getWorkers=function(){return this.workers},e.prototype.getPopulationCap=function(){return this.populationCap},e.prototype.increasePopulationCap=function(e){return this.populationCap+=e},e.prototype.decreasePopulationCap=function(e){return this.populationCap-e<0&&console.error(eg.ERROR_4),this.populationCap-=e},e.prototype.addCallback=function(e,n){this.callbacks.set(n,e)},e.prototype.tick=function(e){this.kongregateService.isAvailable()&&this.getTotalPeople()>this.populationScore&&(this.populationScore=this.getTotalPeople(),this.kongregateService.submitStat("Population",this.populationScore)),1===this.getTotalPeople()&&this.happinessService.resetHappiness(),this.people+this.workers>=ts.VILLAGE.SHRINE.POPULATION&&(this.gameService.isEnabled(Eu.SHRINE)||(this.gameService.enable(Eu.SHRINE),this.logService.log("Shrine unlocked"))),this.people+this.workers>=ts.VILLAGE.CHURCH.POPULATION&&(this.gameService.isEnabled(Eu.CHURCH)||(this.gameService.enable(Eu.CHURCH),this.logService.log("Church unlocked")))},e.prototype.getRandomFood=function(e,n){var t;if(void 0===n&&(n=!1),(t=n?Array.from(this.resources.entries()).filter(function(e){return e[1].resourceTypes.includes(_u.CONSUMABLE)&&e[1].amount>0}):Array.from(this.resources.entries()).filter(function(t){return t[1].resourceTypes.includes(_u.CONSUMABLE)&&t[1].amount-t[1].options.getReservedAmountBySource(e,n)>0})).length>0){var l=t[Math.floor(Math.random()*t.length)];return this.decreaseResource(l[0],1,e),ls.getResource(l[0]).POWER}return 0},e.prototype.getFood=function(e,n,t){for(void 0===t&&(t=!1);e>0;)e-=this.getRandomFood(n,t)},e.prototype.getFoodValue=function(e,n){void 0===n&&(n=!1);var t=0;return n?Array.from(this.resources.entries()).filter(function(e){return e[1].resourceTypes.includes(_u.CONSUMABLE)&&e[1].amount>0}).forEach(function(e){return t+=ls.getResource(e[0]).POWER*e[1].amount}):Array.from(this.resources.entries()).filter(function(t){return t[1].resourceTypes.includes(_u.CONSUMABLE)&&t[1].amount-t[1].options.getReservedAmountBySource(e,n)>0}).forEach(function(e){return t+=ls.getResource(e[0]).POWER*(e[1].amount-e[1].reserved)}),t},e.prototype.getResourceTypes=function(e){return this.resources.get(e).getResourceTypes()},e.prototype.increaseResources=function(e,n){void 0===n&&(n=!1);for(var t=0,l=Array.from(e);t<l.length;t++){var r=l[t];this.increaseResource(r[0],r[1],n)}},e.prototype.removeRecruit=function(e){return this.people>=e&&this.callbacks.get(Mu.VILLAGE).removeRecruit(e)},e.prototype.getFuel=function(e){for(var n=0,t=ls.getResourcesByType(_u.FUEL).sort(function(e,n){return e[1].FUEL_PRIORITY-n[1].FUEL_PRIORITY});n<t.length;n++){var l=t[n];if(this.decreaseResource(vu[String(l[0])],1,e))return l[1].POWER}return 0},e.prototype.getTotalPeople=function(){return this.people+this.workers},e.prototype.getResourcesValue=function(){var e=0;return this.resources.forEach(function(n){n.amount>0&&(e+=ls.getResource(n.resource).TRADE_VALUE*n.getAmount())}),e},e.prototype.updateAnimals=function(){var e=Array.from(this.getResources().values()).filter(function(e){return e.getResourceTypes().includes(_u.ANIMAL)}),n=this.servicesService.getServiceByRegion(Mu.FIELD).getBuildings().filter(function(e){return e.getBuildingType()===bu.PASTURE}).map(function(e){return e});e.forEach(function(e){var t=0,l=0;n.filter(function(n){return n.getResourceType()===e.resource}).forEach(function(e){t+=e.getAnimals(),l+=e.getMaxAnimals()}),e.amount=t,e.limit=l})},e.prototype.getLimit=function(e){var n=this.resources.get(e);return n.limit-n.amount},e.prototype.addResourceUse=function(e,n,t){this.resourcesUse.has(e)?this.resourcesUse.get(e).push(new Mg(n,t)):this.resourcesUse.set(e,[new Mg(n,t)])},e.prototype.getResourceUses=function(e){return this.resourcesUse.get(e)},e.ngInjectableDef=ve({factory:function(){return new e(Ye(Tg),Ye(Sg),Ye(wg),Ye(Ig),Ye(kg),Ye(Dg))},token:e,providedIn:"root"}),e}(),Lg=function(){function e(e,n,t,l){this.resourcesService=e,this.modalService=n,this.tutorialService=t,this.gameService=l,this.filterText=""}return e.prototype.ngOnInit=function(){var e=this;this.categories=Object.keys(_u),this.categories=[_u[_u.RAW],_u[_u.PROCESSED],_u[_u.FOOD],_u[_u.TOOLS]],this.resources=this.resourcesService.getResources(),this.resourcesService.registerForResourcesChange().subscribe(function(n){e.resources=n}),this.tutorialService.checkResourcesTutorial()},e.prototype.getResourcesList=function(e){var n=this;return Array.from(this.resourcesService.getResources().entries()).filter(function(t){return t[1].getResourceTypes().includes(_u[e])&&Au.prepareResourceName(t[1].getResource()).toLowerCase().includes(n.filterText)}).map(function(e){return e[1]})},e.prototype.openManageModal=function(e){this.modalService.open(mu.RESOURCE_MANAGEMENT),this.modalService.setResourceOptions(e.options);var n=this.modalService.registerForResourceOptionsResponse().subscribe(function(t){n.unsubscribe(),t&&(e.options=t)})},e.prototype.isMarketEnabled=function(){return this.gameService.isEnabled(Eu.MARKET)},e.prototype.highlightResource=function(e){e.highlighted?e.highlighted=!1:Array.from(this.resourcesService.getResources().values()).filter(function(e){return e.highlighted}).length<7?e.highlighted=!0:this.modalService.info("Too many highlighted resources")},e.prototype.isNotCoins=function(e){return e.resource!==vu.COINS},e.prototype.isDev=function(){return!Gu.production},e.prototype.addDevRes=function(e){this.resourcesService.increaseResource(e,5,!0)},e.prototype.getResourceDescription=function(e){var n="";return e.hasResourceType(_u.CONSUMABLE)&&(n+="nutrition: "+ls.getResource(e.resource).POWER),e.hasResourceType(_u.FUEL)&&(n+="heating energy: "+ls.getResource(e.resource).POWER),""!==n?"<hr>"+n:n},e.prototype.getResourceConsumers=function(e){var n="<b>used by:</b><br>",t=this.resourcesService.getResourceUses(e.resource),l=[];return t&&(t.slice().forEach(function(e){var n=l.find(function(n){return n[0]===e.userName});n?n[1]+=e.value:l.push([e.userName,e.value])}),l.sort(function(e,n){return e[0].localeCompare(n[0])}).forEach(function(e){n+=e[0]+": "+e[1]+"<br>"})),"<b>used by:</b><br>"!==n?"<hr>"+n:""},e}(),Fg=gr({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:100%;max-height:100%;font-size:1em;margin:.7%;text-align:center}#resourcesTitle[_ngcontent-%COMP%]{display:flex;flex-direction:row;font-size:1.3em;font-weight:bolder;vertical-align:middle}#center[_ngcontent-%COMP%]{flex:10 0 auto}.side[_ngcontent-%COMP%]{flex:0 0 25%;font-size:.6em;width:15%;margin:3px;display:inline-block}#categories[_ngcontent-%COMP%]{display:flex;flex-direction:row;border:1px solid #000;height:94%;text-align:center}.category[_ngcontent-%COMP%]{text-align:left;flex:1 0 0;display:flex;flex-direction:column;border:1px solid #000}.resource[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-left:3px;width:100%;vertical-align:middle}.title[_ngcontent-%COMP%]{text-align:center;padding:2px 0;width:100%;font-weight:bolder;font-size:1em;margin-bottom:5px;display:block;border-bottom:1px solid #000}.highlight[_ngcontent-%COMP%]{flex:1 0 auto;text-align:right;margin-right:3px}.highlight[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}app-icon[_ngcontent-%COMP%]{flex:0 0 auto;margin-right:3px}.manage[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:22px;width:22px}.greyout[_ngcontent-%COMP%]{opacity:.3}.prioritise[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:22px;width:22px}.full[_ngcontent-%COMP%]{font-weight:600}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}hr[_ngcontent-%COMP%]{border-color:#000}.center[_ngcontent-%COMP%]{text-align:center}"]],data:{}});function Ug(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.addDevRes(e.parent.parent.context.$implicit.resource)&&l),l},null,null)),(e()(),io(-1,null,["+"]))],null,null)}function Hg(e){return so(0,[(e()(),zr(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),io(1,null,["","/",""]))],null,function(e,n){var t=n.parent.parent.context.$implicit.getAmount(),l=n.parent.parent.context.$implicit.getLimit();e(n,1,0,t,l)})}function Gg(e){return so(0,[(e()(),zr(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),io(1,null,["","/",""]))],null,function(e,n){var t=n.parent.parent.context.$implicit.getAmount(),l=n.parent.parent.context.$implicit.getLimit();e(n,1,0,t,l)})}function Bg(e){return so(0,[(e()(),zr(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),io(1,null,["",""]))],null,function(e,n){var t=n.parent.parent.context.$implicit.getAmount();e(n,1,0,t)})}function Vg(e){return so(0,[(e()(),zr(0,0,null,null,4,"span",[],null,null,null,null,null)),(e()(),zr(1,0,null,null,3,"span",[["class","prioritise"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=0!=(e.parent.parent.context.$implicit.prioritise=!e.parent.parent.context.$implicit.prioritise)&&l),l},null,null)),ki(2,278528,null,0,ks,[Bl,Vl,Pn,Ln],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),lo(3,{greyout:0}),(e()(),zr(4,0,null,null,0,"img",[["draggable","false"],["src","assets/trade.svg"],["title","prioritise on market"]],null,null,null,null,null))],function(e,n){var t=e(n,3,0,!n.parent.parent.context.$implicit.prioritise);e(n,2,0,"prioritise",t)},null)}function Wg(e){return so(0,[(e()(),zr(0,0,null,null,29,"div",[["class","resource"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,17,"span",[["class","icon"]],null,null,null,null,null)),(e()(),zr(2,0,null,null,8,"span",[["appTooltip",""],["class","tooltip"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==Ei(e,3).onmousemove(t)&&l),l},null,null)),ki(3,16384,null,0,af,[],{elementId:[0,"elementId"]},null),(e()(),zr(4,0,null,null,4,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),zr(5,0,null,null,1,"div",[["class","center"]],null,null,null,null,null)),(e()(),io(6,null,["",""])),(e()(),zr(7,0,null,null,0,"div",[["class","center"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),zr(8,0,null,null,0,"div",[["class","center"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),zr(9,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(10,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),jr(16777216,null,null,1,null,Ug)),ki(12,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,Hg)),ki(14,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,Gg)),ki(16,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,Bg)),ki(18,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),zr(19,0,null,null,10,"span",[["class","highlight"]],null,null,null,null,null)),(e()(),zr(20,0,null,null,3,"span",[["class","manage"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.openManageModal(e.parent.context.$implicit)&&l),l},null,null)),ki(21,278528,null,0,ks,[Bl,Vl,Pn,Ln],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),lo(22,{greyout:0}),(e()(),zr(23,0,null,null,0,"img",[["draggable","false"],["src","assets/manage.svg"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,Vg)),ki(25,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),zr(26,0,null,null,3,"span",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.highlightResource(e.parent.context.$implicit)&&l),l},null,null)),ki(27,278528,null,0,ks,[Bl,Vl,Pn,Ln],{ngClass:[0,"ngClass"]},null),lo(28,{greyout:0}),(e()(),zr(29,0,null,null,0,"img",[["draggable","false"],["src","assets/eye.svg"],["title","add to header"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,3,0,n.parent.context.$implicit.resource);var l=n.parent.context.$implicit.getName();e(n,10,0,l,"resources",""),e(n,12,0,t.isDev());var r=n.parent.context.$implicit.getAmount()===n.parent.context.$implicit.getLimit();e(n,14,0,r);var i=t.isNotCoins(n.parent.context.$implicit)&&n.parent.context.$implicit.getAmount()!==n.parent.context.$implicit.getLimit();e(n,16,0,i),e(n,18,0,!t.isNotCoins(n.parent.context.$implicit));var o=e(n,22,0,!n.parent.context.$implicit.options.isUsed());e(n,21,0,"manage",o),e(n,25,0,t.isMarketEnabled());var u=e(n,28,0,!n.parent.context.$implicit.highlighted);e(n,27,0,u)},function(e,n){var t=n.component;e(n,4,0,Vr(1,"",n.parent.context.$implicit.resource,"")),e(n,6,0,n.parent.context.$implicit.name),e(n,7,0,t.getResourceDescription(n.parent.context.$implicit)),e(n,8,0,t.getResourceConsumers(n.parent.context.$implicit))})}function jg(e){return so(0,[(e()(),zr(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,Wg)),ki(2,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,2,0,n.context.$implicit.visible)},null)}function zg(e){return so(0,[(e()(),zr(0,0,null,null,4,"div",[["class","category"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),io(2,null,["",""])),(e()(),jr(16777216,null,null,1,null,jg)),ki(4,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,4,0,n.component.getResourcesList(n.context.$implicit))},function(e,n){e(n,2,0,n.context.$implicit)})}function Yg(e){return so(0,[(e()(),zr(0,0,null,null,13,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,9,"span",[["id","resourcesTitle"]],null,null,null,null,null)),(e()(),zr(2,0,null,null,0,"span",[["class","side"]],null,null,null,null,null)),(e()(),zr(3,0,null,null,1,"span",[["id","center"]],null,null,null,null,null)),(e()(),io(-1,null,["Resources"])),(e()(),zr(5,0,null,null,5,"input",[["class","side"],["placeholder","filter"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var l=!0,r=e.component;return"input"===n&&(l=!1!==Ei(e,6)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ei(e,6).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ei(e,6)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ei(e,6)._compositionEnd(t.target.value)&&l),"ngModelChange"===n&&(l=!1!==(r.filterText=t)&&l),l},null,null)),ki(6,16384,null,0,_f,[Ln,Pn,[2,Cf]],null,null),xi(1024,null,Of,function(e){return[e]},[_f]),ki(8,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),xi(2048,null,Nf,null,[pg]),ki(10,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),zr(11,0,null,null,2,"div",[["id","categories"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,zg)),ki(13,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,8,0,t.filterText),e(n,13,0,t.categories)},function(e,n){e(n,5,0,Ei(n,10).ngClassUntouched,Ei(n,10).ngClassTouched,Ei(n,10).ngClassPristine,Ei(n,10).ngClassDirty,Ei(n,10).ngClassValid,Ei(n,10).ngClassInvalid,Ei(n,10).ngClassPending)})}function Kg(e){return so(0,[(e()(),zr(0,0,null,null,1,"app-resources",[],null,null,null,Yg,Fg)),ki(1,114688,null,0,Lg,[xg,Ig,Ag,wg],null,null)],function(e,n){e(n,1,0)},null)}var qg,$g=ai("app-resources",Lg,Kg,{},{},[]),Qg=function(){function e(e,n,t,l,r,i){void 0===i&&(i=!1),this.canceled=!1,this.id=e,this.resource=n,this.amount=t,this.cost=l,this.craftingDifficulty=r,this.available=i}return e.prototype.getResource=function(){return this.resource},e}(),Zg=function(){function e(e,n){this.servicesService=e,this.resourcesService=n,this.recipes=[],e.addService(Nu.RECIPE,this),this.initRecipes()}return e.prototype.initRecipes=function(){var e=this;this.recipes=[],Object.entries(us.RECIPES).forEach(function(n){var t=new Map;n[1].COST.forEach(function(e){return t.set(e.resource,e.amount)}),e.recipes.push(new Qg(Pu[n[0]],n[1].RESOURCE,n[1].AMOUNT?n[1].AMOUNT:1,t,n[1].CRAFTING,!1))}),this.recipes.find(function(e){return e.id===Pu.PLANK}).available=!0,this.recipes.find(function(e){return e.id===Pu.CUT_STONE}).available=!0,this.recipes.find(function(e){return e.id===Pu.LEATHER}).available=!0,Gu.production||Object.values(Pu).filter(function(e){return!isNaN(e)}).forEach(function(n){return e.enable(n)})},e.prototype.getRecipes=function(){return this.recipes.filter(function(e){return e.available})},e.prototype.getRecipeById=function(e){return this.recipes.find(function(n){return n.id===e})},e.prototype.enable=function(e){var n=this,t=this.recipes.find(function(n){return n.id===e});this.resourcesService.makeVisible(t.getResource()),Array.from(t.cost.keys()).forEach(function(e){return n.resourcesService.makeVisible(e)}),t.available=!0},e.prototype.disable=function(e){var n=this.recipes.find(function(n){return n.id===e});this.resourcesService.makeVisible(n.getResource()),n.available=!1},e.prototype.load=function(e){var n=this;this.initRecipes(),e.recipes.forEach(function(e){var t=n.recipes.find(function(n){return n.id===e});t&&(t.available=!0)})},e.prototype.save=function(){return{recipes:this.recipes.filter(function(e){return e.available}).map(function(e){return e.id})}},e.prototype.reset=function(e,n){this.initRecipes()},e.ngInjectableDef=ve({factory:function(){return new e(Ye(Sg),Ye(xg))},token:e,providedIn:"root"}),e}();try{qg="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(JN){qg=!1}var Xg,Jg=function(){function e(e){this._platformId=e,this.isBrowser=this._platformId?this._platformId===Xs:"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!qg)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}return e.ngInjectableDef=ve({factory:function(){return new e(Ye(Mt,8))},token:e,providedIn:"root"}),e}();function ev(e){return function(){if(null==Xg&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){return Xg=!0}}))}finally{Xg=Xg||!1}return Xg}()?e:!!e.capture}function nv(e){return null!=e&&""+e!="false"}function tv(e){return e instanceof Pn?e.nativeElement:e}function lv(e,n,t,l){return d(t)&&(l=t,t=void 0),l?lv(e,n,t).pipe(K(function(e){return p(e)?l.apply(void 0,e):l(e)})):new w(function(l){!function e(n,t,l,r,i){var o;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(n)){var u=n;n.addEventListener(t,l,i),o=function(){return u.removeEventListener(t,l,i)}}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(n)){var s=n;n.on(t,l),o=function(){return s.off(t,l)}}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(n)){var a=n;n.addListener(t,l),o=function(){return a.removeListener(t,l)}}else{if(!n||!n.length)throw new TypeError("Invalid event target");for(var c=0,p=n.length;c<p;c++)e(n[c],t,l,r,i)}r.add(o)}(e,n,function(e){l.next(arguments.length>1?Array.prototype.slice.call(arguments):e)},l,t)})}var rv=function(e){function n(n,t){var l=e.call(this,n,t)||this;return l.scheduler=n,l.work=t,l.pending=!1,l}return r(n,e),n.prototype.schedule=function(e,n){if(void 0===n&&(n=0),this.closed)return this;this.state=e;var t=this.id,l=this.scheduler;return null!=t&&(this.id=this.recycleAsyncId(l,t,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(l,this.id,n),this},n.prototype.requestAsyncId=function(e,n,t){return void 0===t&&(t=0),setInterval(e.flush.bind(e,this),t)},n.prototype.recycleAsyncId=function(e,n,t){if(void 0===t&&(t=0),null!==t&&this.delay===t&&!1===this.pending)return n;clearInterval(n)},n.prototype.execute=function(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var t=this._execute(e,n);if(t)return t;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},n.prototype._execute=function(e,n){var t=!1,l=void 0;try{this.work(e)}catch(r){t=!0,l=!!r&&r||new Error(r)}if(t)return this.unsubscribe(),l},n.prototype._unsubscribe=function(){var e=this.id,n=this.scheduler,t=n.actions,l=t.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==l&&t.splice(l,1),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null},n}(function(e){function n(n,t){return e.call(this)||this}return r(n,e),n.prototype.schedule=function(e,n){return void 0===n&&(n=0),this},n}(v)),iv=function(){function e(n,t){void 0===t&&(t=e.now),this.SchedulerAction=n,this.now=t}return e.prototype.schedule=function(e,n,t){return void 0===n&&(n=0),new this.SchedulerAction(this,e).schedule(t,n)},e.now=function(){return Date.now()},e}(),ov=new(function(e){function n(t,l){void 0===l&&(l=iv.now);var r=e.call(this,t,function(){return n.delegate&&n.delegate!==r?n.delegate.now():l()})||this;return r.actions=[],r.active=!1,r.scheduled=void 0,r}return r(n,e),n.prototype.schedule=function(t,l,r){return void 0===l&&(l=0),n.delegate&&n.delegate!==this?n.delegate.schedule(t,l,r):e.prototype.schedule.call(this,t,l,r)},n.prototype.flush=function(e){var n=this.actions;if(this.active)n.push(e);else{var t;this.active=!0;do{if(t=e.execute(e.state,e.delay))break}while(e=n.shift());if(this.active=!1,t){for(;e=n.shift();)e.unsubscribe();throw t}}},n}(iv))(rv),uv=function(){function e(e){this.durationSelector=e}return e.prototype.call=function(e,n){return n.subscribe(new sv(e,this.durationSelector))},e}(),sv=function(e){function n(n,t){var l=e.call(this,n)||this;return l.durationSelector=t,l.hasValue=!1,l}return r(n,e),n.prototype._next=function(e){if(this.value=e,this.hasValue=!0,!this.throttled){var n=void 0;try{n=(0,this.durationSelector)(e)}catch(l){return this.destination.error(l)}var t=z(this,n);!t||t.closed?this.clearThrottle():this.add(this.throttled=t)}},n.prototype.clearThrottle=function(){var e=this.value,n=this.hasValue,t=this.throttled;t&&(this.remove(t),this.throttled=null,t.unsubscribe()),n&&(this.value=null,this.hasValue=!1,this.destination.next(e))},n.prototype.notifyNext=function(e,n,t,l){this.clearThrottle()},n.prototype.notifyComplete=function(){this.clearThrottle()},n}(Y);function av(e){return!p(e)&&e-parseFloat(e)+1>=0}function cv(e){var n=e.index,t=e.period,l=e.subscriber;if(l.next(n),!l.closed){if(-1===t)return l.complete();e.index=n+1,this.schedule(e,t)}}function pv(e){return function(n){return n.lift(new dv(e))}}var hv,dv=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,n){var t=new fv(e),l=z(t,this.notifier);return l&&!t.seenValue?(t.add(l),n.subscribe(t)):t},e}(),fv=function(e){function n(n){var t=e.call(this,n)||this;return t.seenValue=!1,t}return r(n,e),n.prototype.notifyNext=function(e,n,t,l,r){this.seenValue=!0,this.complete()},n.prototype.notifyComplete=function(){},n}(Y);hv||(hv={});var gv=function(){function e(e,n){var t=this;this._platform=e,n.runOutsideAngular(function(){t._change=e.isBrowser?re(lv(window,"resize"),lv(window,"orientationchange")):ta(),t._invalidateCache=t.change().subscribe(function(){return t._updateViewportSize()})})}return e.prototype.ngOnDestroy=function(){this._invalidateCache.unsubscribe()},e.prototype.getViewportSize=function(){this._viewportSize||this._updateViewportSize();var e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e},e.prototype.getViewportRect=function(){var e=this.getViewportScrollPosition(),n=this.getViewportSize(),t=n.width,l=n.height;return{top:e.top,left:e.left,bottom:e.top+l,right:e.left+t,height:l,width:t}},e.prototype.getViewportScrollPosition=function(){if(!this._platform.isBrowser)return{top:0,left:0};var e=document.documentElement,n=e.getBoundingClientRect();return{top:-n.top||document.body.scrollTop||window.scrollY||e.scrollTop||0,left:-n.left||document.body.scrollLeft||window.scrollX||e.scrollLeft||0}},e.prototype.change=function(e){return void 0===e&&(e=20),e>0?this._change.pipe((n=e,void 0===t&&(t=ov),l=function(){return function(e,n,t){void 0===e&&(e=0);var l=-1;return av(n)?l=Number(n)<1?1:Number(n):F(n)&&(t=n),F(t)||(t=ov),new w(function(n){var r=av(e)?e:+e-t.now();return t.schedule(cv,r,{index:0,period:l,subscriber:n})})}(n,t)},function(e){return e.lift(new uv(l))})):this._change;var n,t,l},e.prototype._updateViewportSize=function(){this._viewportSize=this._platform.isBrowser?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0}},e.ngInjectableDef=ve({factory:function(){return new e(Ye(Jg),Ye(Zt))},token:e,providedIn:"root"}),e}();function vv(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e}function mv(e,n){var t=n?"":"none";vv(e.style,{touchAction:n?"":"none",webkitUserDrag:n?"":"none",webkitTapHighlightColor:n?"":"transparent",userSelect:t,msUserSelect:t,webkitUserSelect:t,MozUserSelect:t})}function yv(e){var n=e.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(e)*n}function Sv(e,n){return e.getPropertyValue(n).split(",").map(function(e){return e.trim()})}var Ev=ev({passive:!0}),bv=ev({passive:!1}),Ov=function(){function e(e,n,t,l,r,i){var o=this;this._config=n,this._document=t,this._ngZone=l,this._viewportRuler=r,this._dragDropRegistry=i,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._moveEvents=new x,this._moveEventSubscriptions=0,this._pointerMoveSubscription=v.EMPTY,this._pointerUpSubscription=v.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this._disabled=!1,this.beforeStarted=new x,this.started=new x,this.released=new x,this.ended=new x,this.entered=new x,this.exited=new x,this.dropped=new x,this.moved=new w(function(e){var n=o._moveEvents.subscribe(e);return o._moveEventSubscriptions++,function(){n.unsubscribe(),o._moveEventSubscriptions--}}),this._pointerDown=function(e){if(o.beforeStarted.next(),o._handles.length){var n=o._handles.find(function(n){var t=e.target;return!!t&&(t===n||n.contains(t))});!n||o._disabledHandles.has(n)||o.disabled||o._initializeDragSequence(n,e)}else o.disabled||o._initializeDragSequence(o._rootElement,e)},this._pointerMove=function(e){if(o._hasStartedDragging){o._boundaryElement&&(o._previewRect&&(o._previewRect.width||o._previewRect.height)||(o._previewRect=(o._preview||o._rootElement).getBoundingClientRect()));var n=o._getConstrainedPointerPosition(e);if(o._hasMoved=!0,e.preventDefault(),o._updatePointerDirectionDelta(n),o._dropContainer)o._updateActiveDropContainer(n);else{var t=o._activeTransform;t.x=n.x-o._pickupPositionOnPage.x+o._passiveTransform.x,t.y=n.y-o._pickupPositionOnPage.y+o._passiveTransform.y;var l=Rv(t.x,t.y);o._rootElement.style.transform=o._initialTransform?l+" "+o._initialTransform:l,"undefined"!=typeof SVGElement&&o._rootElement instanceof SVGElement&&o._rootElement.setAttribute("transform","translate("+t.x+" "+t.y+")")}o._moveEventSubscriptions>0&&o._ngZone.run(function(){o._moveEvents.next({source:o,pointerPosition:n,event:e,delta:o._pointerDirectionDelta})})}else{var r=o._getPointerPositionOnPage(e);Math.abs(r.x-o._pickupPositionOnPage.x)+Math.abs(r.y-o._pickupPositionOnPage.y)>=o._config.dragStartThreshold&&(o._hasStartedDragging=!0,o._ngZone.run(function(){return o._startDragSequence(e)}))}},this._pointerUp=function(e){if(o._dragDropRegistry.isDragging(o)&&(o._removeSubscriptions(),o._dragDropRegistry.stopDragging(o),o._handles&&(o._rootElement.style.webkitTapHighlightColor=o._rootElementTapHighlight),o._hasStartedDragging)){if(o.released.next({source:o}),!o._dropContainer)return o._passiveTransform.x=o._activeTransform.x,o._passiveTransform.y=o._activeTransform.y,o._ngZone.run(function(){return o.ended.next({source:o})}),void o._dragDropRegistry.stopDragging(o);o._animatePreviewToPlaceholder().then(function(){o._cleanupDragArtifacts(e),o._dragDropRegistry.stopDragging(o)})}},this.withRootElement(e),i.registerDragItem(this)}return Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)},set:function(e){var n=nv(e);n!==this._disabled&&(this._disabled=n,this._toggleNativeDragInteractions())},enumerable:!0,configurable:!0}),e.prototype.getPlaceholderElement=function(){return this._placeholder},e.prototype.getRootElement=function(){return this._rootElement},e.prototype.withHandles=function(e){return this._handles=e.map(function(e){return tv(e)}),this._handles.forEach(function(e){return mv(e,!1)}),this._toggleNativeDragInteractions(),this},e.prototype.withPreviewTemplate=function(e){return this._previewTemplate=e,this},e.prototype.withPlaceholderTemplate=function(e){return this._placeholderTemplate=e,this},e.prototype.withRootElement=function(e){var n=tv(e);return n!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),n.addEventListener("mousedown",this._pointerDown,bv),n.addEventListener("touchstart",this._pointerDown,Ev),this._initialTransform=void 0,this._rootElement=n),this},e.prototype.withBoundaryElement=function(e){return this._boundaryElement=e?tv(e):null,this},e.prototype.dispose=function(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&Tv(this._rootElement),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._boundaryElement=this._rootElement=this._placeholderTemplate=this._previewTemplate=this._nextSibling=null},e.prototype.isDragging=function(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)},e.prototype.reset=function(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}},e.prototype.disableHandle=function(e){this._handles.indexOf(e)>-1&&this._disabledHandles.add(e)},e.prototype.enableHandle=function(e){this._disabledHandles.delete(e)},e.prototype.withDirection=function(e){return this._direction=e,this},e.prototype._withDropContainer=function(e){this._dropContainer=e},e.prototype._removeSubscriptions=function(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe()},e.prototype._destroyPreview=function(){this._preview&&Tv(this._preview),this._previewRef&&this._previewRef.destroy(),this._preview=this._previewRef=null},e.prototype._destroyPlaceholder=function(){this._placeholder&&Tv(this._placeholder),this._placeholderRef&&this._placeholderRef.destroy(),this._placeholder=this._placeholderRef=null},e.prototype._startDragSequence=function(e){if(this.started.next({source:this}),Iv(e)&&(this._lastTouchEventTime=Date.now()),this._dropContainer){var n=this._rootElement;this._nextSibling=n.nextSibling;var t=this._preview=this._createPreviewElement(),l=this._placeholder=this._createPlaceholderElement();n.style.display="none",this._document.body.appendChild(n.parentNode.replaceChild(l,n)),this._document.body.appendChild(t),this._dropContainer.start()}},e.prototype._initializeDragSequence=function(e,n){n.stopPropagation();var t=this.isDragging(),l=Iv(n),r=!l&&0!==n.button,i=this._rootElement,o=!l&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now();if(n.target&&n.target.draggable&&"mousedown"===n.type&&n.preventDefault(),!(t||r||o)){null==this._initialTransform&&(this._initialTransform=this._rootElement.style.transform||""),this._handles.length&&(this._rootElementTapHighlight=i.style.webkitTapHighlightColor,i.style.webkitTapHighlightColor="transparent"),this._toggleNativeDragInteractions(),this._hasStartedDragging=this._hasMoved=!1,this._initialContainer=this._dropContainer,this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollPosition=this._viewportRuler.getViewportScrollPosition(),this._boundaryElement&&(this._boundaryRect=this._boundaryElement.getBoundingClientRect()),this._pickupPositionInElement=this._previewTemplate&&this._previewTemplate.template?{x:0,y:0}:this._getPointerPositionInElement(e,n);var u=this._pickupPositionOnPage=this._getPointerPositionOnPage(n);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:u.x,y:u.y},this._dragDropRegistry.startDragging(this,n)}},e.prototype._cleanupDragArtifacts=function(e){var n=this;this._rootElement.style.display="",this._nextSibling?this._nextSibling.parentNode.insertBefore(this._rootElement,this._nextSibling):this._initialContainer.element.appendChild(this._rootElement),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=void 0,this._ngZone.run(function(){var t=n._dropContainer,l=t.getItemIndex(n),r=n._getPointerPositionOnPage(e),i=t._isOverContainer(r.x,r.y);n.ended.next({source:n}),n.dropped.next({item:n,currentIndex:l,previousIndex:n._initialContainer.getItemIndex(n),container:t,previousContainer:n._initialContainer,isPointerOverContainer:i}),t.drop(n,l,n._initialContainer,i),n._dropContainer=n._initialContainer})},e.prototype._updateActiveDropContainer=function(e){var n=this,t=e.x,l=e.y,r=this._dropContainer._getSiblingContainerFromPosition(this,t,l)||this._initialContainer._getSiblingContainerFromPosition(this,t,l);!r&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(t,l)&&(r=this._initialContainer),r&&r!==this._dropContainer&&this._ngZone.run(function(){n.exited.next({item:n,container:n._dropContainer}),n._dropContainer.exit(n),n.entered.next({item:n,container:r}),n._dropContainer=r,n._dropContainer.enter(n,t,l)}),this._dropContainer._sortItem(this,t,l,this._pointerDirectionDelta),this._preview.style.transform=Rv(t-this._pickupPositionInElement.x,l-this._pickupPositionInElement.y)},e.prototype._createPreviewElement=function(){var e,n=this._previewTemplate,t=n?n.template:null;if(t){var l=n.viewContainer.createEmbeddedView(t,n.context);e=l.rootNodes[0],this._previewRef=l,e.style.transform=Rv(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{var r=this._rootElement,i=r.getBoundingClientRect();(e=Cv(r)).style.width=i.width+"px",e.style.height=i.height+"px",e.style.transform=Rv(i.left,i.top)}return vv(e.style,{pointerEvents:"none",position:"fixed",top:"0",left:"0",zIndex:"1000"}),mv(e,!1),e.classList.add("cdk-drag-preview"),e.setAttribute("dir",this._direction),e},e.prototype._animatePreviewToPlaceholder=function(){var e=this;if(!this._hasMoved)return Promise.resolve();var n=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._preview.style.transform=Rv(n.left,n.top);var t=function(e){var n=getComputedStyle(e),t=Sv(n,"transition-property"),l=t.find(function(e){return"transform"===e||"all"===e});if(!l)return 0;var r=t.indexOf(l),i=Sv(n,"transition-duration"),o=Sv(n,"transition-delay");return yv(i[r])+yv(o[r])}(this._preview);return 0===t?Promise.resolve():this._ngZone.runOutsideAngular(function(){return new Promise(function(n){var l=function(t){(!t||t.target===e._preview&&"transform"===t.propertyName)&&(e._preview.removeEventListener("transitionend",l),n(),clearTimeout(r))},r=setTimeout(l,1.5*t);e._preview.addEventListener("transitionend",l)})})},e.prototype._createPlaceholderElement=function(){var e,n=this._placeholderTemplate,t=n?n.template:null;return t?(this._placeholderRef=n.viewContainer.createEmbeddedView(t,n.context),e=this._placeholderRef.rootNodes[0]):e=Cv(this._rootElement),e.classList.add("cdk-drag-placeholder"),e},e.prototype._getPointerPositionInElement=function(e,n){var t=this._rootElement.getBoundingClientRect(),l=e===this._rootElement?null:e,r=l?l.getBoundingClientRect():t,i=Iv(n)?n.targetTouches[0]:n;return{x:r.left-t.left+(i.pageX-r.left-this._scrollPosition.left),y:r.top-t.top+(i.pageY-r.top-this._scrollPosition.top)}},e.prototype._getPointerPositionOnPage=function(e){var n=Iv(e)?e.touches[0]||e.changedTouches[0]:e;return{x:n.pageX-this._scrollPosition.left,y:n.pageY-this._scrollPosition.top}},e.prototype._getConstrainedPointerPosition=function(e){var n=this._getPointerPositionOnPage(e),t=this._dropContainer?this._dropContainer.lockAxis:null;if("x"===this.lockAxis||"x"===t?n.y=this._pickupPositionOnPage.y:"y"!==this.lockAxis&&"y"!==t||(n.x=this._pickupPositionOnPage.x),this._boundaryRect){var l=this._pickupPositionInElement,r=l.x,i=l.y,o=this._boundaryRect,u=this._previewRect,s=o.top+i,a=o.bottom-(u.height-i);n.x=_v(n.x,o.left+r,o.right-(u.width-r)),n.y=_v(n.y,s,a)}return n},e.prototype._updatePointerDirectionDelta=function(e){var n=e.x,t=e.y,l=this._pointerDirectionDelta,r=this._pointerPositionAtLastDirectionChange,i=Math.abs(n-r.x),o=Math.abs(t-r.y);return i>this._config.pointerDirectionChangeThreshold&&(l.x=n>r.x?1:-1,r.x=n),o>this._config.pointerDirectionChangeThreshold&&(l.y=t>r.y?1:-1,r.y=t),l},e.prototype._toggleNativeDragInteractions=function(){if(this._rootElement&&this._handles){var e=this.disabled||this._handles.length>0;e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,mv(this._rootElement,e))}},e.prototype._removeRootElementListeners=function(e){e.removeEventListener("mousedown",this._pointerDown,bv),e.removeEventListener("touchstart",this._pointerDown,Ev)},e}();function Rv(e,n){return"translate3d("+Math.round(e)+"px, "+Math.round(n)+"px, 0)"}function Cv(e){var n=e.cloneNode(!0);return n.removeAttribute("id"),n}function _v(e,n,t){return Math.max(n,Math.min(t,e))}function Tv(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Iv(e){return e.type.startsWith("touch")}function Av(e,n,t){var l=wv(n,e.length-1),r=wv(t,e.length-1);if(l!==r){for(var i=e[l],o=r<l?-1:1,u=l;u!==r;u+=o)e[u]=e[u+o];e[r]=i}}function wv(e,n){return Math.max(0,Math.min(n,e))}var Nv=0,Pv=function(){function e(e,n,t){this._dragDropRegistry=n,this.id="cdk-drop-list-ref-"+Nv++,this.disabled=!1,this.enterPredicate=function(){return!0},this.beforeStarted=new x,this.entered=new x,this.exited=new x,this.dropped=new x,this.sorted=new x,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0},this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",n.registerDropContainer(this),this._document=t,this.element=e instanceof Pn?e.nativeElement:e}return e.prototype.dispose=function(){this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._dragDropRegistry.removeDropContainer(this)},e.prototype.isDragging=function(){return this._isDragging},e.prototype.start=function(){var e=this;this.beforeStarted.next(),this._isDragging=!0,this._activeDraggables=this._draggables.slice(),this._cacheOwnPosition(),this._cacheItemPositions(),this._siblings.forEach(function(n){return n._startReceiving(e)})},e.prototype.enter=function(e,n,t){this.entered.next({item:e,container:this}),this.start();var l=this._getItemIndexFromPointerPosition(e,n,t),r=this._activeDraggables.indexOf(e),i=this._activeDraggables[l],o=e.getPlaceholderElement();if(r>-1&&this._activeDraggables.splice(r,1),i&&!this._dragDropRegistry.isDragging(i)){var u=i.getRootElement();u.parentElement.insertBefore(o,u),this._activeDraggables.splice(l,0,e)}else this.element.appendChild(o),this._activeDraggables.push(e);o.style.transform="",this._cacheItemPositions()},e.prototype.exit=function(e){this._reset(),this.exited.next({item:e,container:this})},e.prototype.drop=function(e,n,t,l){this._reset(),this.dropped.next({item:e,currentIndex:n,previousIndex:t.getItemIndex(e),container:this,previousContainer:t,isPointerOverContainer:l})},e.prototype.withItems=function(e){var n=this;return this._draggables=e,e.forEach(function(e){return e._withDropContainer(n)}),this},e.prototype.withDirection=function(e){return this._direction=e,this},e.prototype.connectedTo=function(e){return this._siblings=e.slice(),this},e.prototype.withOrientation=function(e){return this._orientation=e,this},e.prototype.getItemIndex=function(e){return this._isDragging?kv("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions,function(n){return n.drag===e}):this._draggables.indexOf(e)},e.prototype.isReceiving=function(){return this._activeSiblings.size>0},e.prototype._sortItem=function(e,n,t,l){if(this._isPointerNearDropContainer(n,t)){var r=this._itemPositions,i=this._getItemIndexFromPointerPosition(e,n,t,l);if(!(-1===i&&r.length>0)){var o="horizontal"===this._orientation,u=kv(r,function(n){return n.drag===e}),s=r[i],a=r[u].clientRect,c=s.clientRect,p=u>i?1:-1;this._previousSwap.drag=s.drag,this._previousSwap.delta=o?l.x:l.y;var h=this._getItemOffsetPx(a,c,p),d=this._getSiblingOffsetPx(u,r,p),f=r.slice();Av(r,u,i),this.sorted.next({previousIndex:u,currentIndex:i,container:this,item:e}),r.forEach(function(n,t){if(f[t]!==n){var l=n.drag===e,r=l?h:d,i=l?e.getPlaceholderElement():n.drag.getRootElement();n.offset+=r,o?(i.style.transform="translate3d("+Math.round(n.offset)+"px, 0, 0)",Dv(n.clientRect,0,r)):(i.style.transform="translate3d(0, "+Math.round(n.offset)+"px, 0)",Dv(n.clientRect,r,0))}})}}},e.prototype._cacheOwnPosition=function(){this._clientRect=this.element.getBoundingClientRect()},e.prototype._cacheItemPositions=function(){var e=this,n="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(function(n){var t=(e._dragDropRegistry.isDragging(n)?n.getPlaceholderElement():n.getRootElement()).getBoundingClientRect();return{drag:n,offset:0,clientRect:{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}}}).sort(function(e,t){return n?e.clientRect.left-t.clientRect.left:e.clientRect.top-t.clientRect.top})},e.prototype._reset=function(){var e=this;this._isDragging=!1,this._activeDraggables.forEach(function(e){return e.getRootElement().style.transform=""}),this._siblings.forEach(function(n){return n._stopReceiving(e)}),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0},e.prototype._getSiblingOffsetPx=function(e,n,t){var l="horizontal"===this._orientation,r=n[e].clientRect,i=n[e+-1*t],o=r[l?"width":"height"]*t;if(i){var u=l?"left":"top",s=l?"right":"bottom";-1===t?o-=i.clientRect[u]-r[s]:o+=r[u]-i.clientRect[s]}return o},e.prototype._isPointerNearDropContainer=function(e,n){var t=this._clientRect,l=.05*t.width,r=.05*t.height;return n>t.top-r&&n<t.bottom+r&&e>t.left-l&&e<t.right+l},e.prototype._getItemOffsetPx=function(e,n,t){var l="horizontal"===this._orientation,r=l?n.left-e.left:n.top-e.top;return-1===t&&(r+=l?n.width-e.width:n.height-e.height),r},e.prototype._getItemIndexFromPointerPosition=function(e,n,t,l){var r=this,i="horizontal"===this._orientation;return kv(this._itemPositions,function(o,u,s){var a=o.drag,c=o.clientRect;return a===e?s.length<2:(!l||a!==r._previousSwap.drag||(i?l.x:l.y)!==r._previousSwap.delta)&&(i?n>=Math.floor(c.left)&&n<=Math.floor(c.right):t>=Math.floor(c.top)&&t<=Math.floor(c.bottom))})},e.prototype._isOverContainer=function(e,n){return Mv(this._clientRect,e,n)},e.prototype._getSiblingContainerFromPosition=function(e,n,t){return this._siblings.find(function(l){return l._canReceive(e,n,t)})},e.prototype._canReceive=function(e,n,t){if(!this.enterPredicate(e,this)||!Mv(this._clientRect,n,t))return!1;var l=this._document.elementFromPoint(n,t);return!!l&&(l===this.element||this.element.contains(l))},e.prototype._startReceiving=function(e){var n=this._activeSiblings;n.has(e)||(n.add(e),this._cacheOwnPosition())},e.prototype._stopReceiving=function(e){this._activeSiblings.delete(e)},e}();function Dv(e,n,t){e.top+=n,e.bottom=e.top+e.height,e.left+=t,e.right=e.left+e.width}function kv(e,n){for(var t=0;t<e.length;t++)if(n(e[t],t,e))return t;return-1}function Mv(e,n,t){return t>=e.top&&t<=e.bottom&&n>=e.left&&n<=e.right}var xv=ev({passive:!1,capture:!0}),Lv=function(){function e(e,n){var t=this;this._ngZone=e,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=new Set,this._globalListeners=new Map,this.pointerMove=new x,this.pointerUp=new x,this._preventDefaultWhileDragging=function(e){t._activeDragInstances.size&&e.preventDefault()},this._document=n}return e.prototype.registerDropContainer=function(e){if(!this._dropInstances.has(e)){if(this.getDropContainer(e.id))throw Error('Drop instance with id "'+e.id+'" has already been registered.');this._dropInstances.add(e)}},e.prototype.registerDragItem=function(e){var n=this;this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(function(){n._document.addEventListener("touchmove",n._preventDefaultWhileDragging,xv)})},e.prototype.removeDropContainer=function(e){this._dropInstances.delete(e)},e.prototype.removeDragItem=function(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._preventDefaultWhileDragging,xv)},e.prototype.startDragging=function(e,n){var t=this;if(this._activeDragInstances.add(e),1===this._activeDragInstances.size){var l=n.type.startsWith("touch"),r=l?"touchend":"mouseup";this._globalListeners.set(l?"touchmove":"mousemove",{handler:function(e){return t.pointerMove.next(e)},options:xv}).set(r,{handler:function(e){return t.pointerUp.next(e)},options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:xv}),l||this._globalListeners.set("wheel",{handler:this._preventDefaultWhileDragging,options:xv}),this._ngZone.runOutsideAngular(function(){t._globalListeners.forEach(function(e,n){t._document.addEventListener(n,e.handler,e.options)})})}},e.prototype.stopDragging=function(e){this._activeDragInstances.delete(e),0===this._activeDragInstances.size&&this._clearGlobalListeners()},e.prototype.isDragging=function(e){return this._activeDragInstances.has(e)},e.prototype.getDropContainer=function(e){return Array.from(this._dropInstances).find(function(n){return n.id===e})},e.prototype.ngOnDestroy=function(){var e=this;this._dragInstances.forEach(function(n){return e.removeDragItem(n)}),this._dropInstances.forEach(function(n){return e.removeDropContainer(n)}),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()},e.prototype._clearGlobalListeners=function(){var e=this;this._globalListeners.forEach(function(n,t){e._document.removeEventListener(t,n.handler,n.options)}),this._globalListeners.clear()},e.ngInjectableDef=ve({factory:function(){return new e(Ye(Zt),Ye(Zs))},token:e,providedIn:"root"}),e}(),Fv={dragStartThreshold:5,pointerDirectionChangeThreshold:5},Uv=function(){function e(e,n,t,l){this._document=e,this._ngZone=n,this._viewportRuler=t,this._dragDropRegistry=l}return e.prototype.createDrag=function(e,n){return void 0===n&&(n=Fv),new Ov(e,n,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)},e.prototype.createDropList=function(e){return new Pv(e,this._dragDropRegistry,this._document)},e.ngInjectableDef=ve({factory:function(){return new e(Ye(Zs),Ye(Zt),Ye(gv),Ye(Lv))},token:e,providedIn:"root"}),e}(),Hv=new ye("CDK_DROP_LIST"),Gv=new ye("CDK_DRAG_PARENT"),Bv=new ye("CDK_DRAG_CONFIG",{providedIn:"root",factory:function(){return{dragStartThreshold:5,pointerDirectionChangeThreshold:5}}}),Vv=function(){function e(e,n,t,l,r,i,o,u,s,a,c){var p=this;this.element=e,this.dropContainer=n,this._document=t,this._ngZone=l,this._viewContainerRef=r,this._dir=s,this._changeDetectorRef=c,this._destroyed=new x,this._disabled=!1,this.started=new pt,this.released=new pt,this.ended=new pt,this.entered=new pt,this.exited=new pt,this.dropped=new pt,this.moved=new w(function(e){var n=p._dragRef.moved.pipe(K(function(e){return{source:p,pointerPosition:e.pointerPosition,event:e.event,delta:e.delta}})).subscribe(e);return function(){n.unsubscribe()}}),this._dragRef=a?a.createDrag(e,u):new Ov(e,u,t,l,i,o),this._dragRef.data=this,this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}return Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled||this.dropContainer&&this.dropContainer.disabled},set:function(e){this._disabled=nv(e),this._dragRef.disabled=this._disabled},enumerable:!0,configurable:!0}),e.prototype.getPlaceholderElement=function(){return this._dragRef.getPlaceholderElement()},e.prototype.getRootElement=function(){return this._dragRef.getRootElement()},e.prototype.reset=function(){this._dragRef.reset()},e.prototype.ngAfterViewInit=function(){var e=this;this._ngZone.onStable.asObservable().pipe(Da(1),pv(this._destroyed)).subscribe(function(){e._updateRootElement(),e._handles.changes.pipe(Va(e._handles),Ka(function(n){var t=n.filter(function(n){return n._parentDrag===e}).map(function(e){return e.element});e._dragRef.withHandles(t)}),Ua(function(e){return re.apply(void 0,e.map(function(e){return e._stateChanges}))}),pv(e._destroyed)).subscribe(function(n){var t=e._dragRef,l=n.element.nativeElement;n.disabled?t.disableHandle(l):t.enableHandle(l)})})},e.prototype.ngOnChanges=function(e){var n=e.rootElementSelector;n&&!n.firstChange&&this._updateRootElement()},e.prototype.ngOnDestroy=function(){this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()},e.prototype._updateRootElement=function(){var e=this.element.nativeElement,n=this.rootElementSelector?Wv(e,this.rootElementSelector):e;if(n&&n.nodeType!==this._document.ELEMENT_NODE)throw Error('cdkDrag must be attached to an element node. Currently attached to "'+n.nodeName+'".');this._dragRef.withRootElement(n||e)},e.prototype._getBoundaryElement=function(){var e=this.boundaryElementSelector;return e?Wv(this.element.nativeElement,e):null},e.prototype._syncInputs=function(e){var n=this;e.beforeStarted.subscribe(function(){if(!e.isDragging()){var t=n._dir,l=n._placeholderTemplate?{template:n._placeholderTemplate.templateRef,context:n._placeholderTemplate.data,viewContainer:n._viewContainerRef}:null,r=n._previewTemplate?{template:n._previewTemplate.templateRef,context:n._previewTemplate.data,viewContainer:n._viewContainerRef}:null;e.disabled=n.disabled,e.lockAxis=n.lockAxis,e.withBoundaryElement(n._getBoundaryElement()).withPlaceholderTemplate(l).withPreviewTemplate(r),t&&e.withDirection(t.value)}})},e.prototype._handleEvents=function(e){var n=this;e.started.subscribe(function(){n.started.emit({source:n}),n._changeDetectorRef&&n._changeDetectorRef.markForCheck()}),e.released.subscribe(function(){n.released.emit({source:n})}),e.ended.subscribe(function(){n.ended.emit({source:n}),n._changeDetectorRef&&n._changeDetectorRef.markForCheck()}),e.entered.subscribe(function(e){n.entered.emit({container:e.container.data,item:n})}),e.exited.subscribe(function(e){n.exited.emit({container:e.container.data,item:n})}),e.dropped.subscribe(function(e){n.dropped.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,previousContainer:e.previousContainer.data,container:e.container.data,isPointerOverContainer:e.isPointerOverContainer,item:n})})},e}();function Wv(e,n){for(var t=e.parentElement;t;){if(t.matches?t.matches(n):t.msMatchesSelector(n))return t;t=t.parentElement}return null}var jv=function(){function e(){this._items=new Set,this._disabled=!1}return Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled},set:function(e){this._disabled=nv(e)},enumerable:!0,configurable:!0}),e.prototype.ngOnDestroy=function(){this._items.clear()},e}(),zv=0,Yv=function(){function e(n,t,l,r,i,o,u){var s=this;this.element=n,this._changeDetectorRef=l,this._dir=r,this._group=i,this._destroyed=new x,this.connectedTo=[],this.orientation="vertical",this.id="cdk-drop-list-"+zv++,this._disabled=!1,this.enterPredicate=function(){return!0},this.dropped=new pt,this.entered=new pt,this.exited=new pt,this.sorted=new pt,this._dropListRef=u?u.createDropList(n):new Pv(n,t,o||document),this._dropListRef.data=this,this._dropListRef.enterPredicate=function(e,n){return s.enterPredicate(e.data,n.data)},this._syncInputs(this._dropListRef),this._handleEvents(this._dropListRef),e._dropLists.push(this),i&&i._items.add(this)}return Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled||!!this._group&&this._group.disabled},set:function(e){this._disabled=nv(e)},enumerable:!0,configurable:!0}),e.prototype.ngAfterContentInit=function(){var e=this;this._draggables.changes.pipe(Va(this._draggables),pv(this._destroyed)).subscribe(function(n){e._dropListRef.withItems(n.map(function(e){return e._dragRef}))})},e.prototype.ngOnDestroy=function(){var n=e._dropLists.indexOf(this);n>-1&&e._dropLists.splice(n,1),this._group&&this._group._items.delete(this),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()},e.prototype.start=function(){this._dropListRef.start()},e.prototype.drop=function(e,n,t,l){this._dropListRef.drop(e._dragRef,n,t._dropListRef,l)},e.prototype.enter=function(e,n,t){this._dropListRef.enter(e._dragRef,n,t)},e.prototype.exit=function(e){this._dropListRef.exit(e._dragRef)},e.prototype.getItemIndex=function(e){return this._dropListRef.getItemIndex(e._dragRef)},e.prototype._sortItem=function(e,n,t,l){return this._dropListRef._sortItem(e._dragRef,n,t,l)},e.prototype._getSiblingContainerFromPosition=function(e,n,t){var l=this._dropListRef._getSiblingContainerFromPosition(e._dragRef,n,t);return l?l.data:null},e.prototype._isOverContainer=function(e,n){return this._dropListRef._isOverContainer(e,n)},e.prototype._syncInputs=function(n){var t=this;this._dir&&this._dir.change.pipe(Va(this._dir.value),pv(this._destroyed)).subscribe(function(e){return n.withDirection(e)}),n.beforeStarted.subscribe(function(){var l,r=(l=t.connectedTo,Array.isArray(l)?l:[l]).map(function(n){return"string"==typeof n?e._dropLists.find(function(e){return e.id===n}):n});t._group&&t._group._items.forEach(function(e){-1===r.indexOf(e)&&r.push(e)}),n.lockAxis=t.lockAxis,n.connectedTo(r.filter(function(e){return e&&e!==t}).map(function(e){return e._dropListRef})).withOrientation(t.orientation)})},e.prototype._handleEvents=function(e){var n=this;e.beforeStarted.subscribe(function(){n._changeDetectorRef.markForCheck()}),e.entered.subscribe(function(e){n.entered.emit({container:n,item:e.item.data})}),e.exited.subscribe(function(e){n.exited.emit({container:n,item:e.item.data})}),e.sorted.subscribe(function(e){n.sorted.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,container:n,item:e.item.data})}),e.dropped.subscribe(function(e){n.dropped.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,previousContainer:e.previousContainer.data,container:e.container.data,item:e.item.data,isPointerOverContainer:e.isPointerOverContainer}),n._changeDetectorRef.markForCheck()})},e._dropLists=[],e}(),Kv=function(){return function(){}}(),qv=function(e){return e[e.NONE=0]="NONE",e[e.SELECTED=1]="SELECTED",e[e.UNTIL_X=2]="UNTIL_X",e[e.CONTINUOUS=3]="CONTINUOUS",e}({}),$v=function(){function e(e,n,t,l){this.resourcesService=e,this.servicesService=n,this.recipeService=t,this.modalService=l,this.recipeUpdate=new x,this.queue=[],this.id=1,this.queueSize=us.START_QUEUE_SIZE,n.addService(Nu.CRAFTING,this)}return e.prototype.craft=function(e,n,t){this.queue.length>=this.queueSize?this.modalService.info("Order queue is full"):this.queue.push({id:this.nextId(),recipe:e,amount:n,type:t})},e.prototype.getQueue=function(){return this.queue},e.prototype.getOrder=function(){var e=this,n=this.queue.find(function(n){if(n.type===qv.SELECTED&&n.amount>0&&e.resourcesService.hasResources(n.recipe.cost,"Crafting"))return!0;if(n.type===qv.UNTIL_X&&e.resourcesService.hasResources(n.recipe.cost,"Crafting")){var t=0;return e.servicesService.getService(Nu.VILLAGE).buildings.filter(function(e){return e.getBuildingType()===bu.WORKSHOP}).forEach(function(e){e.getRecipe()&&e.getRecipe().id===n.recipe.id&&(t+=n.recipe.amount)}),e.resourcesService.getResource(n.recipe.resource).amount+t<n.amount}if(n.type===qv.CONTINUOUS&&e.resourcesService.hasResources(n.recipe.cost,"Crafting")){var l=0;e.servicesService.getService(Nu.VILLAGE).buildings.filter(function(e){return e.getBuildingType()===bu.WORKSHOP}).forEach(function(e){e.getRecipe()&&e.getRecipe().id===n.recipe.id&&(l+=n.recipe.amount)});var r=e.resourcesService.getResource(n.recipe.resource);return r.amount+l<r.limit}});return n?(this.resourcesService.decreaseResources(n.recipe.cost,"Crafting"),n.type===qv.SELECTED&&(n.amount-=1),this.queue=this.queue.filter(function(e){return e.type!==qv.SELECTED||e.amount>0}),n.recipe):null},e.prototype.load=function(e){var n=this;this.queue=[],Array.from(e.queue).forEach(function(e){n.queue.push({id:n.nextId(),recipe:n.recipeService.getRecipeById(e.recipeId),amount:e.amount,type:e.type})}),this.queueSize=e.queueSize},e.prototype.save=function(){return{queue:this.queue.map(function(e){return{recipeId:e.recipe.id,amount:e.amount,type:e.type}}),queueSize:this.queueSize}},e.prototype.reset=function(e,n){this.queue=[],this.id=1,this.queueSize=us.START_QUEUE_SIZE},e.prototype.registerForUpdate=function(){return this.recipeUpdate.asObservable()},e.prototype.cancel=function(e,n){var t=this;void 0===n&&(n=!1);var l=this.queue.find(function(n){return n.id===e});if(l&&!n){this.modalService.open(mu.CONFIRM),this.modalService.setModalText("Are you sure you want to cancel crafting "+Au.prepareResourceName(l.recipe.resource)+"?");var r=this.modalService.registerForConfirmation().subscribe(function(n){n&&(t.queue=t.queue.filter(function(n){return n.id!==e}),t.recipeUpdate.next()),r.unsubscribe()})}else l&&n&&(this.queue=this.queue.filter(function(n){return n.id!==e}),this.recipeUpdate.next())},e.prototype.nextId=function(){var e=this.id;return this.id++,e},e.prototype.moveRecipeInQueue=function(e){Av(this.queue,e.previousIndex,e.currentIndex)},e.prototype.getQueueMaxSize=function(){return this.queueSize},e.prototype.increaseQueueSize=function(e){this.queueSize+=e},e.prototype.filterQueue=function(e){var n=this;this.queue.forEach(function(t){e.includes(t.recipe.id)&&n.cancel(t.id,!0)})},e.prototype.decreaseQueueSize=function(e){this.queueSize-=e},e.ngInjectableDef=ve({factory:function(){return new e(Ye(xg),Ye(Sg),Ye(Zg),Ye(Ig))},token:e,providedIn:"root"}),e}(),Qv=function(){function e(e,n){this.craftingService=e,this.resourcesService=n,this.id=Math.random(),this.progress=0,this.amount=1,this.type=qv.NONE,this.paid=!1,this.craftingTypes=qv}return e.prototype.ngOnInit=function(){var e=this;this.updateSubscription=this.craftingService.registerForUpdate().subscribe(function(){e.progressRef&&(e.progressRef.nativeElement.style.width=e.progress/e.recipe.craftingDifficulty*100+"%")})},e.prototype.getResourceName=function(e){return Au.prepareResourceName(e)},e.prototype.ngAfterViewInit=function(){this.progressRef&&(this.progressRef.nativeElement.style.width=this.progress/this.recipe.craftingDifficulty*100+"%")},e.prototype.cancel=function(){null!==this.id&&this.craftingService.cancel(this.id)},e.prototype.getCost=function(){return this.recipe.cost},e.prototype.isAvailable=function(){for(var e=0,n=Array.from(this.recipe.cost);e<n.length;e++){var t=n[e];if(0!==this.resourcesService.hasResource(t[0],t[1],"Crafting"))return!1}return!0},e.prototype.checkResource=function(e){return 0===this.resourcesService.hasResource(e.key,e.value,"Crafting")},e.prototype.getResourceAmount=function(){return this.resourcesService.getResource(this.recipe.resource).amount},e}(),Zv=gr({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{width:100%;display:inline-block}#available[_ngcontent-%COMP%]{position:relative;padding:3px;text-align:center;font-weight:100;font-size:1.1em;border:1px solid #000}#notAvailable[_ngcontent-%COMP%]{padding:3px;text-align:center;font-size:1.1em;border:1px solid #57575a}#titleGrey[_ngcontent-%COMP%]{display:inline-block;color:#57575a}.notMet[_ngcontent-%COMP%]{color:#8b0000}.title[_ngcontent-%COMP%]{text-align:left}hr[_ngcontent-%COMP%]{border-color:#000}#progressId[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background-color:var(--active-colour);z-index:1}#text[_ngcontent-%COMP%]{position:relative;z-index:2}.costTitle[_ngcontent-%COMP%]{text-align:left}.missing[_ngcontent-%COMP%]{color:#8b0000}.tooltip[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{min-width:200px}.craftingTitle[_ngcontent-%COMP%]{text-align:left}.type[_ngcontent-%COMP%]{display:inline-block}app-icon[_ngcontent-%COMP%]{flex:0 0 auto;margin-left:3px}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center}"]],data:{}});function Xv(e){return so(0,[(e()(),zr(0,0,null,null,1,"div",[["class","type"]],null,null,null,null,null)),(e()(),io(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.amount)})}function Jv(e){return so(0,[(e()(),zr(0,0,null,null,1,"div",[["class","type"]],null,null,null,null,null)),(e()(),io(1,null,["","/",""]))],null,function(e,n){var t=n.component;e(n,1,0,t.getResourceAmount(),t.amount)})}function em(e){return so(0,[(e()(),zr(0,0,null,null,1,"div",[["class","type"]],null,null,null,null,null)),(e()(),io(-1,null,["\u221e"]))],null,null)}function nm(e){return so(0,[(e()(),zr(0,0,null,null,1,"div",[["class","craftingTitle"]],null,null,null,null,null)),(e()(),io(1,null,["Crafted: ",""]))],null,function(e,n){e(n,1,0,n.component.recipe.amount)})}function tm(e){return so(0,[(e()(),zr(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),zr(1,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),io(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.value)})}function lm(e){return so(0,[(e()(),zr(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),zr(1,0,null,null,1,"div",[["class","missing"]],null,null,null,null,null)),(e()(),io(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.value)})}function rm(e){return so(0,[(e()(),zr(0,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,tm)),ki(2,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,lm)),ki(4,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),zr(5,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(6,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){var t=n.component;e(n,2,0,t.checkResource(n.context.$implicit)),e(n,4,0,!t.checkResource(n.context.$implicit)),e(n,6,0,t.getResourceName(n.context.$implicit.key),"resources")},null)}function im(e){return so(0,[(e()(),zr(0,0,null,null,24,"div",[["appTooltip",""],["class","tooltip"],["id","available"]],null,[[null,"click"],[null,"mousemove"]],function(e,n,t){var l=!0,r=e.component;return"mousemove"===n&&(l=!1!==Ei(e,1).onmousemove(t)&&l),"click"===n&&(l=!1!==r.cancel()&&l),l},null,null)),ki(1,16384,null,0,af,[],{elementId:[0,"elementId"]},null),(e()(),zr(2,0,[[1,0],["progressId",1]],null,0,"div",[["id","progressId"]],null,null,null,null,null)),(e()(),zr(3,0,null,null,8,"div",[["id","text"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,Xv)),ki(5,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,Jv)),ki(7,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,em)),ki(9,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),io(10,null,[" "," "])),to(11,1),(e()(),zr(12,0,null,null,12,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),io(13,null,[" "," "])),to(14,1),(e()(),zr(15,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),zr(16,0,null,null,1,"div",[["class","craftingTitle"]],null,null,null,null,null)),(e()(),io(17,null,["Difficulty: ",""])),(e()(),jr(16777216,null,null,1,null,nm)),ki(19,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),zr(20,0,null,null,1,"div",[["class","costTitle"]],null,null,null,null,null)),(e()(),io(-1,null,["Cost:"])),(e()(),jr(16777216,null,null,2,null,rm)),ki(23,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null),Mi(0,Ks,[Vl])],function(e,n){var t=n.component;e(n,1,0,t.id),e(n,5,0,t.type===t.craftingTypes.SELECTED),e(n,7,0,t.type===t.craftingTypes.UNTIL_X),e(n,9,0,t.type===t.craftingTypes.CONTINUOUS),e(n,19,0,t.recipe.amount>1),e(n,23,0,hr(n,23,0,Ei(n,24).transform(t.getCost())))},function(e,n){var t=n.component,l=hr(n,10,0,e(n,11,0,Ei(n.parent,0),t.getResourceName(t.recipe.getResource())));e(n,10,0,l),e(n,12,0,Vr(1,"",t.id,""));var r=hr(n,13,0,e(n,14,0,Ei(n.parent,0),t.getResourceName(t.recipe.resource)));e(n,13,0,r),e(n,17,0,t.recipe.craftingDifficulty)})}function om(e){return so(0,[(e()(),zr(0,0,null,null,1,"div",[["class","type"]],null,null,null,null,null)),(e()(),io(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.amount)})}function um(e){return so(0,[(e()(),zr(0,0,null,null,1,"div",[["class","type"]],null,null,null,null,null)),(e()(),io(1,null,["","/",""]))],null,function(e,n){var t=n.component;e(n,1,0,t.getResourceAmount(),t.amount)})}function sm(e){return so(0,[(e()(),zr(0,0,null,null,1,"div",[["class","type"]],null,null,null,null,null)),(e()(),io(-1,null,["\u221e"]))],null,null)}function am(e){return so(0,[(e()(),zr(0,0,null,null,1,"div",[["class","craftingTitle"]],null,null,null,null,null)),(e()(),io(1,null,["Crafted: ",""]))],null,function(e,n){e(n,1,0,n.component.recipe.amount)})}function cm(e){return so(0,[(e()(),zr(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),zr(1,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),io(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.value)})}function pm(e){return so(0,[(e()(),zr(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),zr(1,0,null,null,1,"div",[["class","missing"]],null,null,null,null,null)),(e()(),io(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.value)})}function hm(e){return so(0,[(e()(),zr(0,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,cm)),ki(2,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,pm)),ki(4,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),zr(5,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(6,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){var t=n.component;e(n,2,0,t.checkResource(n.context.$implicit)),e(n,4,0,!t.checkResource(n.context.$implicit)),e(n,6,0,t.getResourceName(n.context.$implicit.key),"resources")},null)}function dm(e){return so(0,[(e()(),zr(0,0,null,null,23,"div",[["appTooltip",""],["class","tooltip"],["id","notAvailable"]],null,[[null,"click"],[null,"mousemove"]],function(e,n,t){var l=!0,r=e.component;return"mousemove"===n&&(l=!1!==Ei(e,1).onmousemove(t)&&l),"click"===n&&(l=!1!==r.cancel()&&l),l},null,null)),ki(1,16384,null,0,af,[],{elementId:[0,"elementId"]},null),(e()(),zr(2,0,null,null,8,"div",[["id","titleGrey"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,om)),ki(4,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,um)),ki(6,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,sm)),ki(8,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),io(9,null,[" "," "])),to(10,1),(e()(),zr(11,0,null,null,12,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),io(12,null,[" "," "])),to(13,1),(e()(),zr(14,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),zr(15,0,null,null,1,"div",[["class","craftingTitle"]],null,null,null,null,null)),(e()(),io(16,null,["Difficulty: ",""])),(e()(),jr(16777216,null,null,1,null,am)),ki(18,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),zr(19,0,null,null,1,"div",[["class","costTitle"]],null,null,null,null,null)),(e()(),io(-1,null,["Cost:"])),(e()(),jr(16777216,null,null,2,null,hm)),ki(22,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null),Mi(0,Ks,[Vl])],function(e,n){var t=n.component;e(n,1,0,t.id),e(n,4,0,t.type===t.craftingTypes.SELECTED),e(n,6,0,t.type===t.craftingTypes.UNTIL_X),e(n,8,0,t.type===t.craftingTypes.CONTINUOUS),e(n,18,0,t.recipe.amount>1),e(n,22,0,hr(n,22,0,Ei(n,23).transform(t.getCost())))},function(e,n){var t=n.component,l=hr(n,9,0,e(n,10,0,Ei(n.parent,0),t.getResourceName(t.recipe.getResource())));e(n,9,0,l),e(n,11,0,Vr(1,"",t.id,""));var r=hr(n,12,0,e(n,13,0,Ei(n.parent,0),t.getResourceName(t.recipe.resource)));e(n,12,0,r),e(n,16,0,t.recipe.craftingDifficulty)})}function fm(e){return so(0,[Mi(0,Ys,[]),Qi(671088640,1,{progressRef:0}),(e()(),zr(2,0,null,null,4,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,im)),ki(4,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,dm)),ki(6,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,4,0,t.isAvailable()),e(n,6,0,!t.isAvailable())},null)}var gm=new ye("cdk-dir-doc",{providedIn:"root",factory:function(){return Ye(Zs)}}),vm=function(){function e(e){if(this.value="ltr",this.change=new pt,e){var n=(e.body?e.body.dir:null)||(e.documentElement?e.documentElement.dir:null);this.value="ltr"===n||"rtl"===n?n:"ltr"}}return e.prototype.ngOnDestroy=function(){this.change.complete()},e.ngInjectableDef=ve({factory:function(){return new e(Ye(gm,8))},token:e,providedIn:"root"}),e}(),mm=function(){function e(e,n,t,l,r){this.recipeService=e,this.resourcesService=n,this.craftingService=t,this.modalService=l,this.changeDetectorRef=r,this.craftingTypes=qv,this.filterText="",this.amount=1,this.craftingType=this.craftingTypes.SELECTED,this.bookPage=_u[_u.ALL]}return e.prototype.ngOnInit=function(){var e=this;this.craftingService.registerForUpdate().subscribe(function(){e.changeDetectorRef.destroyed||e.changeDetectorRef.detectChanges()})},e.prototype.getRecipes=function(){var e=this;return this.filterText&&this.filterText.length>0?this.recipeService.getRecipes().filter(function(n){return n.available&&e.resourcesService.getResourceTypes(n.getResource()).includes(_u[e.bookPage])&&Au.prepareResourceName(n.getResource()).toLowerCase().includes(e.filterText.toLowerCase())}):this.recipeService.getRecipes().filter(function(n){return n.available&&e.resourcesService.getResourceTypes(n.getResource()).includes(_u[e.bookPage])})},e.prototype.getEntries=function(){var e=[];return e.push(_u[_u.ALL]),e.push(_u[_u.PROCESSED]),e.push(_u[_u.TOOLS]),e.push(_u[_u.FOOD]),e.push(_u[_u.OTHER]),e},e.prototype.select=function(e){this.bookPage=e},e.prototype.craft=function(e){this.validateAmountInput()&&this.craftingService.craft(e,this.amount,this.craftingType)},e.prototype.getQueue=function(){return this.craftingService.getQueue()},e.prototype.drop=function(e){this.craftingService.moveRecipeInQueue(e)},e.prototype.getQueueMaxSize=function(){return this.craftingService.getQueueMaxSize()},e.prototype.validateAmountInput=function(){return!(isNaN(this.amount)||Number(this.amount)<1)||(this.modalService.info("Invalid craft amount"),this.amount=1,!1)},e}(),ym=gr({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{margin:.7%;height:100%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#boxes[_ngcontent-%COMP%]{display:flex;flex-direction:row;border:1px solid #000;height:94.5%;text-align:center}#recipes[_ngcontent-%COMP%]{text-align:center;flex:0 0 74.3%;display:flex;flex-direction:column;border:1px solid #000;align-items:center}.queue[_ngcontent-%COMP%]{text-align:center;flex:0 0 25%;display:flex;flex-direction:column;border:1px solid #000;align-items:center}#queueRecipes[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}.title[_ngcontent-%COMP%]{width:100.5%;font-weight:bolder;font-size:1.1em;display:inline-block;border-bottom:1px solid #000}#modes[_ngcontent-%COMP%]{margin-top:-1px;padding:0;margin-bottom:5px}#recipesBook[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:100%;width:100%}#menu[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-right:1px solid #000;flex:0 0 10%}.entry[_ngcontent-%COMP%]{display:flex;border-bottom:1px solid #000;flex:1 0 0;height:100%;width:100%;margin-right:-30px;font-size:.8em;font-weight:600;cursor:pointer}.entry[_ngcontent-%COMP%]:last-of-type{border-bottom:none}.entryText[_ngcontent-%COMP%]{-webkit-transform:rotate(-90deg);-moz-transform:rotate(-90deg);-ms-transform:rotate(-90deg);-o-transform:rotate(-90deg)}.inactiveEntry[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;justify-content:center;align-items:center}.activeEntry[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;justify-content:center;align-items:center;background-color:var(--active-colour)}#book[_ngcontent-%COMP%]{flex:0 0 90%;width:100%}#bookRecipes[_ngcontent-%COMP%]{overflow-y:auto;border-top:1px solid #000}app-recipe[_ngcontent-%COMP%]{font-size:.8em;display:inline-block;width:130px;margin:4px 8px;cursor:pointer}#side[_ngcontent-%COMP%]{display:flex;flex-direction:row;font-size:.8em;margin:1%;vertical-align:bottom}#amount[_ngcontent-%COMP%], #filter[_ngcontent-%COMP%]{font-size:1em;width:20%;margin:1%;display:block;vertical-align:bottom}#filter[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:1.05em;margin-left:0;padding:0;border:none;outline:0}#amount[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:65%;font-size:1.15em;margin-left:0;padding:0;border:none;outline:0}#radios[_ngcontent-%COMP%]{text-align:left;font-size:.9em}#progressButton[_ngcontent-%COMP%]{font-size:.6em}"]],data:{}});function Sm(e){return so(0,[(e()(),zr(0,0,null,null,2,"div",[["class","activeEntry"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,1,"div",[["class","entryText"]],null,null,null,null,null)),(e()(),io(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit)})}function Em(e){return so(0,[(e()(),zr(0,0,null,null,2,"div",[["class","inactiveEntry"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,1,"div",[["class","entryText"]],null,null,null,null,null)),(e()(),io(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit)})}function bm(e){return so(0,[(e()(),zr(0,0,null,null,4,"div",[["class","entry"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.select(e.context.$implicit)&&l),l},null,null)),(e()(),jr(16777216,null,null,1,null,Sm)),ki(2,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,Em)),ki(4,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.bookPage===n.context.$implicit),e(n,4,0,t.bookPage!==n.context.$implicit)},null)}function Om(e){return so(0,[(e()(),zr(0,0,null,null,1,"app-recipe",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.craft(e.context.$implicit)&&l),l},fm,Zv)),ki(1,4308992,null,0,Qv,[$v,xg],{recipe:[0,"recipe"]},null)],function(e,n){e(n,1,0,n.context.$implicit)},null)}function Rm(e){return so(0,[(e()(),zr(0,16777216,null,null,6,"app-recipe",[["cdkDrag",""],["class","cdk-drag"]],[[2,"cdk-drag-disabled",null],[2,"cdk-drag-dragging",null]],null,null,fm,Zv)),xi(6144,null,Gv,null,[Vv]),ki(2,4866048,[[1,4]],3,Vv,[Pn,[3,Hv],Zs,Zt,bl,gv,Lv,Bv,[2,vm],Uv,Rl],null,null),Qi(603979776,2,{_handles:1}),Qi(335544320,3,{_previewTemplate:0}),Qi(335544320,4,{_placeholderTemplate:0}),ki(6,4308992,null,0,Qv,[$v,xg],{id:[0,"id"],recipe:[1,"recipe"],amount:[2,"amount"],type:[3,"type"]},null),(e()(),jr(0,null,null,0))],function(e,n){e(n,6,0,n.context.$implicit.id,n.context.$implicit.recipe,n.context.$implicit.amount,n.context.$implicit.type)},function(e,n){e(n,0,0,Ei(n,2).disabled,Ei(n,2)._dragRef.isDragging())})}function Cm(e){return so(0,[(e()(),zr(0,0,null,null,76,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),zr(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["Crafting"])),(e()(),zr(4,0,null,null,72,"div",[["id","boxes"]],null,null,null,null,null)),(e()(),zr(5,0,null,null,60,"div",[["id","recipes"]],null,null,null,null,null)),(e()(),zr(6,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),io(-1,null,[" Recipes "])),(e()(),zr(8,0,null,null,57,"div",[["id","recipesBook"]],null,null,null,null,null)),(e()(),zr(9,0,null,null,2,"div",[["id","menu"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,bm)),ki(11,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null),(e()(),zr(12,0,null,null,53,"div",[["id","book"]],null,null,null,null,null)),(e()(),zr(13,0,null,null,49,"div",[["id","side"]],null,null,null,null,null)),(e()(),zr(14,0,null,null,8,"div",[["id","filter"]],null,null,null,null,null)),(e()(),io(-1,null,[" Filter:"])),(e()(),zr(16,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(17,0,null,null,5,"input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var l=!0,r=e.component;return"input"===n&&(l=!1!==Ei(e,18)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ei(e,18).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ei(e,18)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ei(e,18)._compositionEnd(t.target.value)&&l),"ngModelChange"===n&&(l=!1!==(r.filterText=t)&&l),l},null,null)),ki(18,16384,null,0,_f,[Ln,Pn,[2,Cf]],null,null),xi(1024,null,Of,function(e){return[e]},[_f]),ki(20,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),xi(2048,null,Nf,null,[pg]),ki(22,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),zr(23,0,null,null,9,"div",[["id","amount"]],null,null,null,null,null)),(e()(),io(-1,null,[" amount:"])),(e()(),zr(25,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(26,0,null,null,6,"input",[["min","1"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,r=e.component;return"input"===n&&(l=!1!==Ei(e,27)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ei(e,27).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ei(e,27)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ei(e,27)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==Ei(e,28).onChange(t.target.value)&&l),"input"===n&&(l=!1!==Ei(e,28).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==Ei(e,28).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(r.amount=t)&&l),l},null,null)),ki(27,16384,null,0,_f,[Ln,Pn,[2,Cf]],null,null),ki(28,16384,null,0,Af,[Ln,Pn],null,null),xi(1024,null,Of,function(e,n){return[e,n]},[_f,Af]),ki(30,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),xi(2048,null,Nf,null,[pg]),ki(32,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),zr(33,0,null,null,29,"div",[["id","radios"]],null,null,null,null,null)),(e()(),zr(34,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),zr(35,0,null,null,6,"input",[["name","type"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,r=e.component;return"input"===n&&(l=!1!==Ei(e,36)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ei(e,36).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ei(e,36)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ei(e,36)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==Ei(e,37).onChange()&&l),"blur"===n&&(l=!1!==Ei(e,37).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(r.craftingType=t)&&l),l},null,null)),ki(36,16384,null,0,_f,[Ln,Pn,[2,Cf]],null,null),ki(37,212992,null,0,Df,[Ln,Pn,Pf,on],{name:[0,"name"],value:[1,"value"]},null),xi(1024,null,Of,function(e,n){return[e,n]},[_f,Df]),ki(39,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),xi(2048,null,Nf,null,[pg]),ki(41,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),io(-1,null,[" selected amount "])),(e()(),zr(43,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(44,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),zr(45,0,null,null,6,"input",[["name","type"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,r=e.component;return"input"===n&&(l=!1!==Ei(e,46)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ei(e,46).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ei(e,46)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ei(e,46)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==Ei(e,47).onChange()&&l),"blur"===n&&(l=!1!==Ei(e,47).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(r.craftingType=t)&&l),l},null,null)),ki(46,16384,null,0,_f,[Ln,Pn,[2,Cf]],null,null),ki(47,212992,null,0,Df,[Ln,Pn,Pf,on],{name:[0,"name"],value:[1,"value"]},null),xi(1024,null,Of,function(e,n){return[e,n]},[_f,Df]),ki(49,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),xi(2048,null,Nf,null,[pg]),ki(51,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),io(-1,null,[" until X available "])),(e()(),zr(53,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(54,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),zr(55,0,null,null,6,"input",[["name","type"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,r=e.component;return"input"===n&&(l=!1!==Ei(e,56)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ei(e,56).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ei(e,56)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ei(e,56)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==Ei(e,57).onChange()&&l),"blur"===n&&(l=!1!==Ei(e,57).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(r.craftingType=t)&&l),l},null,null)),ki(56,16384,null,0,_f,[Ln,Pn,[2,Cf]],null,null),ki(57,212992,null,0,Df,[Ln,Pn,Pf,on],{name:[0,"name"],value:[1,"value"]},null),xi(1024,null,Of,function(e,n){return[e,n]},[_f,Df]),ki(59,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),xi(2048,null,Nf,null,[pg]),ki(61,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),io(-1,null,[" continuous "])),(e()(),zr(63,0,null,null,2,"div",[["id","bookRecipes"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,Om)),ki(65,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null),(e()(),zr(66,0,null,null,10,"div",[["class","queue"]],null,null,null,null,null)),(e()(),zr(67,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),io(-1,null,["Orders"])),(e()(),io(69,null,[" ","/"," "])),(e()(),zr(70,0,null,null,6,"div",[["cdkDropList",""],["class","cdk-drop-list"],["id","queueRecipes"]],[[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],[[null,"cdkDropListDropped"]],function(e,n,t){var l=!0;return"cdkDropListDropped"===n&&(l=!1!==e.component.drop(t)&&l),l},null,null)),xi(6144,null,Hv,null,[Yv]),ki(72,1196032,null,1,Yv,[Pn,Lv,Rl,[2,vm],[3,jv],[2,Zs],Uv],{id:[0,"id"]},{dropped:"cdkDropListDropped"}),Qi(603979776,1,{_draggables:1}),xi(256,null,jv,void 0,[]),(e()(),jr(16777216,null,null,1,null,Rm)),ki(76,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,11,0,t.getEntries()),e(n,20,0,t.filterText),e(n,30,0,t.amount),e(n,37,0,"type",t.craftingTypes.SELECTED),e(n,39,0,"type",t.craftingType),e(n,47,0,"type",t.craftingTypes.UNTIL_X),e(n,49,0,"type",t.craftingType),e(n,57,0,"type",t.craftingTypes.CONTINUOUS),e(n,59,0,"type",t.craftingType),e(n,65,0,t.getRecipes()),e(n,72,0,"queueRecipes"),e(n,76,0,t.getQueue())},function(e,n){var t=n.component;e(n,17,0,Ei(n,22).ngClassUntouched,Ei(n,22).ngClassTouched,Ei(n,22).ngClassPristine,Ei(n,22).ngClassDirty,Ei(n,22).ngClassValid,Ei(n,22).ngClassInvalid,Ei(n,22).ngClassPending),e(n,26,0,Ei(n,32).ngClassUntouched,Ei(n,32).ngClassTouched,Ei(n,32).ngClassPristine,Ei(n,32).ngClassDirty,Ei(n,32).ngClassValid,Ei(n,32).ngClassInvalid,Ei(n,32).ngClassPending),e(n,35,0,Ei(n,41).ngClassUntouched,Ei(n,41).ngClassTouched,Ei(n,41).ngClassPristine,Ei(n,41).ngClassDirty,Ei(n,41).ngClassValid,Ei(n,41).ngClassInvalid,Ei(n,41).ngClassPending),e(n,45,0,Ei(n,51).ngClassUntouched,Ei(n,51).ngClassTouched,Ei(n,51).ngClassPristine,Ei(n,51).ngClassDirty,Ei(n,51).ngClassValid,Ei(n,51).ngClassInvalid,Ei(n,51).ngClassPending),e(n,55,0,Ei(n,61).ngClassUntouched,Ei(n,61).ngClassTouched,Ei(n,61).ngClassPristine,Ei(n,61).ngClassDirty,Ei(n,61).ngClassValid,Ei(n,61).ngClassInvalid,Ei(n,61).ngClassPending),e(n,69,0,t.getQueue().length,t.getQueueMaxSize()),e(n,70,0,Ei(n,72).id,Ei(n,72).disabled,Ei(n,72)._dropListRef.isDragging(),Ei(n,72)._dropListRef.isReceiving())})}function _m(e){return so(0,[(e()(),zr(0,0,null,null,1,"app-crafting",[],null,null,null,Cm,ym)),ki(1,114688,null,0,mm,[Zg,xg,$v,Ig,Rl],null,null)],function(e,n){e(n,1,0)},null)}var Tm,Im=ai("app-crafting",mm,_m,{},{},[]),Am=function(){return function(e,n,t,l,r,i){this.id=e,this.resource=n,this.amount=t,this.buy=l,this.price=r,this.duration=i}}(),wm=function(){function e(e){var n=this;this.optionsService=e,this.audios=[],this.optionsService.registerForOptionsChange().subscribe(function(){n.optionsService.getOption(Eg.SOUND)?n.audios.forEach(function(e){return e.volume=n.optionsService.getOption(Eg.SOUND_VOLUME)/100}):n.audios.forEach(function(e){return e.volume=0})})}return e.prototype.playAudio=function(e){this.audios=this.audios.filter(function(e){return!e.ended}),e.load(),e.volume=this.optionsService.getOption(Eg.SOUND)?this.optionsService.getOption(Eg.SOUND_VOLUME)/100:0,e.play(),this.audios.push(e)},e.prototype.playTownBells=function(){this.playAudio(new Audio("assets/sounds/village_bells.wav"))},e.ngInjectableDef=ve({factory:function(){return new e(Ye(bg))},token:e,providedIn:"root"}),e}(),Nm=function(){function e(e,n,t,l,r,i){var o=this;this.servicesService=e,this.calendarService=n,this.resourcesService=t,this.logService=l,this.soundService=r,this.modalService=i,this.offers=[],this.id=10,this.servicesService.addService(Nu.MARKET,this),this.calendarService.registerForDayChange().subscribe(function(e){o.offers.forEach(function(e){return e.duration-=1}),o.offers=o.offers.filter(function(e){return e.duration>0})})}return e.prototype.nextId=function(){return this.id+=1,this.id-1},e.prototype.load=function(e){this.offers=e.offers,this.id=e.id},e.prototype.save=function(){return{offers:this.offers,id:this.id}},e.prototype.reset=function(e,n){this.offers=[],this.id=10},e.prototype.getOffers=function(){return this.offers},e.prototype.accept=function(e){var n=this,t=this.offers.find(function(n){return n.id===e});if(t){this.modalService.open(mu.MARKET),this.modalService.setModalValue(t);var l=this.modalService.registerForValueResponse().subscribe(function(e){if(l.unsubscribe(),null!==e&&!isNaN(e)){if(e>t.amount&&(e=t.amount),t.buy){if(!n.resourcesService.decreaseResource(vu.COINS,n.calculatePrice(t,e),"Market",!0))return void n.modalService.info("Not enough coins to buy "+e+" "+Au.prepareResourceName(t.resource));n.resourcesService.increaseResource(t.resource,e,!0)}else{if(!n.resourcesService.decreaseResource(t.resource,e,"Market",!0))return void n.modalService.info("Not enough resources to sell");n.resourcesService.increaseResource(vu.COINS,n.calculatePrice(t,e),!0)}t.amount===Number(e)?n.offers.splice(n.offers.indexOf(t),1):(t.price=n.calculatePrice(t,t.amount-e),t.amount-=e)}})}else this.modalService.info("Market offer not found")},e.prototype.callMerchant=function(){for(var e=Array.from(this.resourcesService.getResources().values()).filter(function(e){return e.isVisible()}).map(function(e){return{item:e.resource,chance:e.prioritise?10:1}}),n=ku.randomBetween(3,8),t=ku.randomBetween(50,180),l=0;l<n;l++){var r=ku.randomWeightedExcept(e,[vu.COINS]),i=ku.randomBetween(5,20),o=ku.randomBetween(0,1),u=ku.randomBetween(-5,25),s=ls.getResource(r).TRADE_VALUE*i;0===(s=o?Math.floor(s*(1+u/100)):Math.floor(s*(1-u/100)))?l--:this.offers.push(new Am(this.nextId(),r,i,!!o,s,t))}this.logService.log("Merchant arrived"),this.soundService.playTownBells()},e.prototype.calculatePrice=function(e,n){return e.buy?Math.ceil(n/e.amount*e.price):Math.floor(n/e.amount*e.price)},e.ngInjectableDef=ve({factory:function(){return new e(Ye(Sg),Ye(_g),Ye(xg),Ye(Tg),Ye(wm),Ye(Ig))},token:e,providedIn:"root"}),e}(),Pm=function(e){return e[e.FIRST=0]="FIRST",e[e.SECOND=1]="SECOND",e[e.THIRD=2]="THIRD",e[e.FOURTH=3]="FOURTH",e}({}),Dm=function(e){return e[e.TEXT=0]="TEXT",e[e.PROGRESS_BAR=1]="PROGRESS_BAR",e[e.BUTTON=2]="BUTTON",e[e.BUTTON_CHECKBOX=3]="BUTTON_CHECKBOX",e[e.TWO_BUTTON=4]="TWO_BUTTON",e[e.DROPDOWN=5]="DROPDOWN",e[e.ICON=6]="ICON",e}({}),km=function(){function e(e,n){this.valueType=e,this.value=n}return e.emptyValue=function(){return new e(Dm.TEXT,"")},e.textValue=function(n){return new e(Dm.TEXT,n)},e.progressValue=function(n,t){return void 0===t&&(t=""),new e(Dm.PROGRESS_BAR,{value:n,label:t})},e.buttonValue=function(n,t){return new e(Dm.BUTTON,{buttonText:n,callbackValue:t})},e.buttonCheckboxValue=function(n,t,l,r,i){return new e(Dm.BUTTON_CHECKBOX,{buttonText:n,callbackValue:t,checkboxState:r,checkboxLabel:l,checkboxCallbackValue:i})},e.twoButtonValue=function(n,t,l,r,i){return new e(Dm.TWO_BUTTON,{button1Text:n,callback1Value:t,textBetween:l,button2Text:r,callback2Value:i})},e.dropdownValue=function(n,t){return new e(Dm.DROPDOWN,{values:n,selected:t})},e.iconValue=function(n){return new e(Dm.ICON,n)},e.prototype.getValueType=function(){return this.valueType},e.prototype.getValue=function(){return this.value},e}(),Mm=function(){return function(e,n,t,l){this.name=e,this.effect=n,this.duration=t,this.cost=l}}(),xm=function(){function e(e,n,t,l,r,i,o,u){this.servicesService=t,this.id=e,this.buildingType=n,this.demolishable=i,this.settings=l,this.stoppable=o,this.working=r,this.level=u,this.size=l.SIZE,this.complexity=l.COMPLEXITY,t&&(this.resourcesService=t.getService(Nu.RESOURCES),this.effectsService=t.getService(Nu.EFFECTS),this.happinessService=t.getService(Nu.HAPPINESS),this.gameService=t.getService(Nu.GAME),this.logService=t.getService(Nu.LOG),this.modalService=t.getService(Nu.MODAL),this.weatherService=t.getService(Nu.WEATHER))}return e.prototype.build=function(){return this.startProduction(),this},e.prototype.getBuildingId=function(){return this.id},e.prototype.callback=function(e){},e.prototype.finishDemolish=function(){var e=this;Array.from(this.getCost().entries()).forEach(function(n){return e.resourcesService.increaseResource(n[0],Math.floor(.3*n[1]))})},e.prototype.fireWorker=function(){return!!this.working&&(this.resourcesService.fireWorker(),this.working=!1,!0)},e.prototype.getBuildingType=function(){return this.buildingType},e.prototype.getComplexity=function(){return this.complexity},e.prototype.getCost=function(){var e=new Map;return this.settings.COST.forEach(function(n){return e.set(n.resource,n.amount)}),e},e.prototype.getDescription=function(){return this.settings.DESCRIPTION},e.prototype.hasDetails=function(){return!0},e.prototype.getDetails=function(){var e="";(this.getBuildingLevel()>1||this.hasUpgrade())&&(e+="building level: "+this.level+"<br>");var n=0;return 1===this.level||this.buildingType===bu.CONSTRUCTION?n=this.settings.BASE_POWER:this.settings.UPGRADES&&(n=this.settings.UPGRADES[this.level-2].BASE_POWER),e+="building base power: "+n+"<br>",this.getPower()%1==0?e+="building power: "+this.getPower()+"<br>":e+="building power: "+Au.round(this.getPower(),2)+"<br>",0!==this.getPermanentEffects()&&(e+="permanent effects: "+this.getPermanentEffects()+"%<br>"),0!==this.getEffects()&&(e+="temporary effects: "+this.getEffects()+"%<br>"),0!==this.getHappinessEffect()&&(e+="happiness effects: "+this.getHappinessEffect()+"%<br>"),0!==this.getWeatherMultiplier()&&(e+="weather multiplier: "+this.getWeatherMultiplier()+"%<br>"),e},e.prototype.getEffects=function(){return this.effectsService.getBuildingEffectsValue(this.buildingType,!1,this.id)},e.prototype.getPermanentEffects=function(){return this.effectsService.getBuildingEffectsValue(this.buildingType,!0)},e.prototype.getHappinessEffect=function(){return this.happinessService.getHappinessEffect()},e.prototype.getWeatherMultiplier=function(){var e=this,n=(this.settings.WEATHER?this.settings.WEATHER:[]).find(function(n){return e.weatherService.isWeather(n.weather)});return n?n.effect:0},e.prototype.getDisplayableEffectsValue=function(){var e=0;return 1===this.level||this.buildingType===bu.CONSTRUCTION?e=this.settings.BASE_POWER:this.settings.UPGRADES&&(e=this.settings.UPGRADES[this.level-2].BASE_POWER),Number(Au.round(100*(this.getPower()/e-1),2))},e.prototype.getPower=function(){var e=0;return 1===this.level||this.buildingType===bu.CONSTRUCTION?e=this.settings.BASE_POWER:this.settings.UPGRADES&&(e=this.settings.UPGRADES[this.level-2].BASE_POWER),e*(1+(this.getPermanentEffects()+this.getEffects()+this.getHappinessEffect())/100)*(1+this.getWeatherMultiplier()/100)},e.prototype.getLine=function(e){switch(e){case Pm.FIRST:case Pm.SECOND:case Pm.THIRD:case Pm.FOURTH:return km.emptyValue()}},e.prototype.getName=function(){return Au.titleCase(Au.prepareBuildingName(this.buildingType))},e.prototype.getSize=function(){return this.size},e.prototype.buildOnMountain=function(){return!1},e.prototype.getWorkers=function(){return this.working?1:0},e.prototype.hireWorker=function(){return!(this.working||!this.resourcesService.hireWorker()||(this.working=!0,0))},e.prototype.isDemolishable=function(){return this.demolishable},e.prototype.isStoppable=function(){return this.stoppable},e.prototype.isComplexManagement=function(){return!1},e.prototype.getWorkSettings=function(){return null},e.prototype.isWorking=function(){return this.working},e.prototype.prepareDemolish=function(){return this.stopProduction(),!0},e.prototype.startProduction=function(){return!(this.working||!this.resourcesService.hireWorker()||(this.working=!0,0))},e.prototype.stopProduction=function(){this.working&&(this.resourcesService.fireWorker(),this.working=!1)},e.prototype.tick=function(e){},e.prototype.isCombinable=function(){return!1},e.prototype.isSplittable=function(){return!1},e.prototype.hasBuff=function(){return this.settings.BUFF},e.prototype.isBuffed=function(){var e=this;return!!this.hasBuff()&&this.effectsService.getBuildingEffects(this.buildingType).filter(function(n){return n.buff===e.id}).length>0},e.prototype.getBuff=function(){if(this.settings.BUFF){var e=new Map;return this.settings.BUFF.cost.forEach(function(n){return e.set(n.resource,n.amount)}),new Mm(this.settings.BUFF.name,this.settings.BUFF.effect,this.settings.BUFF.duration,e)}return null},e.prototype.hasUpgrade=function(){var e=this;if(this.settings.UPGRADES&&this.settings.UPGRADES.length>=this.getBuildingLevel()){if(this.settings.UPGRADES[this.getBuildingLevel()-1].PREREQUISITES){var n=!0;return this.settings.UPGRADES[this.getBuildingLevel()-1].PREREQUISITES.forEach(function(t){e.gameService.isEnabled(t)||(n=!1)}),n}return!0}return!1},e.prototype.getUpgradeCost=function(){var e=new Map;return this.hasUpgrade()&&this.settings.UPGRADES[this.level-1].COST.forEach(function(n){return e.set(n.resource,n.amount)}),e},e.prototype.setBuildingLevel=function(e){this.level=e},e.prototype.getBuildingLevel=function(){return this.level},e}(),Lm=function(e){function n(n,t,l,r,i,o,u,s,a,c){void 0===n&&(n=null);var p=e.call(this,t,l,n,r,!1,!0,!1,c)||this;return p.occupants=i,p.progress=o,p.food=u,p.fuel=s,p.clothes=a,p.maxSize=r.MAX_OCCUPANTS,p.servicesService&&(p.villageService=n.getService(Nu.VILLAGE),p.weatherService=n.getService(Nu.WEATHER),p.religionService=n.getService(Nu.RELIGION),p.managementService=n.getService(Nu.MANAGEMENT)),p}return r(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,occupants:this.occupants,maxSize:this.maxSize,progress:this.progress,food:this.food,fuel:this.fuel,clothes:this.clothes}},n.prototype.getLine=function(e){switch(e){case Pm.FIRST:return km.textValue("occupants: "+this.occupants+"/"+this.maxSize);case Pm.SECOND:return km.progressValue(this.occupants<this.maxSize?this.progress:-1);case Pm.THIRD:return this.food>0?km.emptyValue():km.progressValue(Math.abs(this.food),"famine");case Pm.FOURTH:return this.fuel>=0?this.weatherService.getCurrentTemperature()<10&&this.occupants>0?km.textValue("heating"):km.emptyValue():km.progressValue(Math.abs(this.fuel),"freezing")}},n.prototype.tick=function(){if(this.clothes<50&&(this.resourcesService.decreaseResource(vu.CLOTHES,1,this.getName()+" clothing")?this.clothes+=50:this.managementService.getFurClothes()&&this.resourcesService.decreaseResource(vu.FUR,1,this.getName()+" clothing")&&(this.clothes+=2)),this.food<=50){var e=this.resourcesService.getRandomFood(this.getName());if(this.food<0){var n=Math.abs(this.food)/2;e>=n?(e-=n,this.food=0):(this.food-=2*e,e=0)}this.food+=e}for(var t=Number(this.managementService.getRations()),l=0;l<this.occupants;l++)this.food>0?(this.food-=.5*t,1===t?this.happinessService.decreaseHappiness(.003,Yu.FOOD_HAPPINESS_FLOOR):this.happinessService.getHappiness()<75&&(2===t?this.happinessService.increaseHappiness(.001,Yu.FOOD_HAPPINESS_LIMIT):3===t?this.happinessService.increaseHappiness(.0025,Yu.FOOD_HAPPINESS_LIMIT):4===t&&this.happinessService.increaseHappiness(.005,Yu.FOOD_HAPPINESS_LIMIT))):(this.food-=.5,this.happinessService.decreaseHappiness(.005,Yu.FOOD_HAPPINESS_FLOOR));this.food<0&&0===this.occupants&&(this.food=0),this.food<-100&&this.occupants>0&&(this.occupants-=1,this.food=-1,this.resourcesService.removePeople(1)),this.food<0&&this.occupants>0&&this.religionService.getFaithShield()>0&&(this.food=100*this.religionService.decreaseFaithShield(Math.abs(this.food)/100)),this.fuel<=50&&(this.fuel+=this.resourcesService.getFuel(this.getName()+" heating"));var r=this.weatherService.getCurrentTemperature(),i=this.managementService.getClothesRations();if(r<10&&this.occupants>0){var o=.2*(10-r)/10;if(this.clothes>0&&(this.clothes-=.01*this.occupants*i,o/=i+1,this.clothes<0&&(this.clothes=0)),this.fuel-o<-100?this.fuel=-100:this.fuel-=o,this.fuel<0&&this.occupants>0&&this.religionService.getFaithShield()>0)return void(this.fuel=200*this.religionService.decreaseFaithShield(Math.abs(this.food)/200));this.fuel<0?this.happinessService.decreaseHappiness(.01,Yu.HEAT_HAPPINESS_FLOOR):this.happinessService.increaseHappiness(.005,Yu.HEAT_HAPPINESS_LIMIT)}else this.fuel<0&&(this.fuel=0),r>10&&(this.clothes>0?(this.clothes-=.005*this.occupants,this.clothes<0&&(this.clothes=0),this.happinessService.increaseHappiness(.01*this.occupants,Yu.CLOTHES_HAPPINESS_LIMIT)):this.happinessService.decreaseHappiness(.01*this.occupants,Yu.CLOTHES_HAPPINESS_FLOOR));this.progress<100&&this.occupants<this.maxSize&&this.food>0?(this.progress+=this.getPower(),this.progress>100&&(this.progress=100)):this.occupants<this.maxSize&&100===this.progress?(this.occupants+=1,this.resourcesService.createPeople(1),this.progress=0):this.progress>0&&this.food<=0&&(this.progress-=this.getPower())},n.prototype.build=function(){return this.resourcesService.increasePopulationCap(this.maxSize),this},n.prototype.prepareDemolish=function(){if(this.occupants>0){var e=this.villageService.moveOccupants(this,this.occupants);this.resourcesService.removePeople(e)}return this.resourcesService.decreasePopulationCap(this.maxSize),!0},n.prototype.getDetails=function(){return"occupants: "+this.occupants+"/"+this.maxSize+"<br>food nutrition: "+Au.round(this.food,2)+"<br>heating fuel: "+Au.round(this.fuel,2)+"<br>clothes: "+Au.round(this.clothes,2)+"<br>"+e.prototype.getDetails.call(this)},n.prototype.hasDetails=function(){return!0},n.prototype.stopProduction=function(){},n.prototype.startProduction=function(){return!0},n.prototype.getMaxSize=function(){return this.maxSize},n.prototype.getOccupants=function(){return this.occupants},n.prototype.addOccupant=function(){return this.occupants<this.maxSize&&(this.occupants+=1,this.occupants===this.maxSize&&(this.progress=0),!0)},n.prototype.removeOccupant=function(){return this.occupants>0&&(this.occupants-=1,!0)},n.prototype.fireWorker=function(){return!1},n.prototype.hireWorker=function(){return!1},n.prototype.getWorkers=function(){return 0},n}(xm),Fm=function(e){function n(n,t,l,r,i,o,u,s){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===r&&(r=0),void 0===i&&(i=100),void 0===o&&(o=100),void 0===u&&(u=0),void 0===s&&(s=1),e.call(this,n,t,bu.HUT,ts.VILLAGE.HUT,l,r,i,o,u,s)||this}return r(n,e),n}(Lm),Um=function(e){function n(n,t,l,r,i,o,u,s){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===r&&(r=0),void 0===i&&(i=100),void 0===o&&(o=100),void 0===u&&(u=0),void 0===s&&(s=1),e.call(this,n,t,bu.HOUSE,ts.VILLAGE.HOUSE,l,r,i,o,u,s)||this}return r(n,e),n}(Lm);!function(e){e.CHOPPING_TREES="chopping trees",e.WAITING_FOR_TREES="waiting for trees",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.TRANSPORTING_LOG="transporting log"}(Tm||(Tm={}));var Hm,Gm=function(e){function n(n,t,l,r,i,o,u){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===r&&(r=0),void 0===i&&(i=Tm.WAITING_FOR_TREES),void 0===o&&(o=!1),void 0===u&&(u=1);var s=e.call(this,t,bu.LOGGERS_HUT,n,ts.FOREST.LOGGERS_HUT,o,!0,!0,u)||this;return s.progress=l,s.localStorage=r,s.status=i,s.servicesService&&(s.landService=n.getService(Nu.LAND)),s}return r(n,e),n.prototype.getLine=function(e){switch(e){case Pm.FIRST:return km.emptyValue();case Pm.SECOND:return km.textValue(this.status);case Pm.THIRD:return km.progressValue(this.progress);case Pm.FOURTH:return km.emptyValue()}},n.prototype.tick=function(){if(this.working)if(this.status===Tm.WAITING_FOR_TREES)this.landService.reduceForest(1)&&(this.status=Tm.CHOPPING_TREES);else if(this.status===Tm.CHOPPING_TREES)this.progress<100&&(this.progress+=this.getPower(),this.progress>=100&&(this.progress=0,this.status=Tm.TRANSPORTING_LOG));else if(this.status===Tm.TRANSPORTING_LOG||this.status===Tm.WAITING_FOR_WAREHOUSE_SPACE){var e=this.resourcesService.increaseResource(vu.LOG,1);this.status=e?Tm.WAITING_FOR_TREES:Tm.WAITING_FOR_WAREHOUSE_SPACE}},n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,localStorage:this.localStorage,status:this.status,working:this.working}},n}(xm),Bm=function(e){function n(n,t,l,r,i,o,u,s,a){void 0===n&&(n=null),void 0===i&&(i=1),void 0===o&&(o=1),void 0===u&&(u=1),void 0===s&&(s=0),void 0===a&&(a=!1);var c=e.call(this,t,bu.CONSTRUCTION,n,ts.CONSTRUCTION_SITE,a,1===u,!0,u)||this;return c.region=l,c.constructing=r,c.buildingComplexity=i,c.buildingSize=o,c.upgradeLevel=u,c.progress=s,c.servicesService&&(c.resourcesService=c.servicesService.getService(Nu.RESOURCES),c.buildingFactoryService=c.servicesService.getService(Nu.BUILDING_FACTORY),c.regionService=c.servicesService.getServiceByRegion(l)),c}return r(n,e),n.prototype.isUpgrade=function(){return 1!==this.upgradeLevel},n.prototype.getLine=function(e){switch(e){case Pm.FIRST:return km.emptyValue();case Pm.SECOND:return this.isUpgrade()?km.textValue("upgrading "+Au.prepareBuildingName(this.constructing)):km.textValue("constructing "+Au.prepareBuildingName(this.constructing));case Pm.THIRD:return km.progressValue(this.progress);case Pm.FOURTH:return km.emptyValue()}},n.prototype.tick=function(){0===this.buildingComplexity&&(this.isUpgrade?this.regionService.finishUpgrade(this,this.constructing):this.regionService.finishConstruction(this,this.constructing)),this.working&&(this.progress<100?(this.progress+=this.getPower()/this.buildingComplexity,this.progress>100&&(this.progress=100)):this.isUpgrade?this.regionService.finishUpgrade(this,this.constructing):this.regionService.finishConstruction(this,this.constructing))},n.prototype.build=function(){return this.startProduction()||0===this.buildingComplexity||this.servicesService.getService(Nu.MODAL).info("Couldn't unlock construction. Not enough free workers."),this},n.prototype.toJSON=function(){return{id:this.id,upgradeLevel:this.upgradeLevel,buildingType:this.buildingType,region:this.region,constructing:this.constructing,buildingComplexity:this.buildingComplexity,progress:this.progress,working:this.working,buildingSize:this.buildingSize}},n.prototype.getComplexity=function(){return 0},n.prototype.getSize=function(){return this.buildingSize},n.prototype.finishDemolish=function(){var e=this;Array.from(this.buildingFactoryService.createBuildingShell(this.constructing).getCost().entries()).forEach(function(n){return e.resourcesService.increaseResource(n[0],Math.floor(n[1]*(1-e.progress/100)+n[1]*(e.progress/100*.3)))})},n.prototype.getConstructing=function(){return this.constructing},n}(xm);!function(e){e.PLANTING_TREES="planting trees",e.WAITING_FOR_LAND="waiting for land",e.NO_ENOUGH_LAND="no enough free land",e.FOREST_TOO_BIG="forest too big"}(Hm||(Hm={}));var Vm,Wm=function(e){function n(n,t,l,r,i,o,u,s){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===r&&(r=0),void 0===i&&(i=Hm.WAITING_FOR_LAND),void 0===o&&(o=1),void 0===u&&(u=!1),void 0===s&&(s=1);var a=e.call(this,t,bu.FORESTER,n,ts.FOREST.FORESTER,u,!0,!0,s)||this;return a.progress=l,a.localStorage=r,a.status=i,a.effectiveness=o,a.servicesService&&(a.landService=n.getService(Nu.LAND),a.modalService=n.getService(Nu.MODAL)),a}return r(n,e),n.prototype.getLine=function(e){switch(e){case Pm.FIRST:return km.emptyValue();case Pm.SECOND:return km.textValue(this.status);case Pm.THIRD:return km.progressValue(this.progress);case Pm.FOURTH:return km.emptyValue()}},n.prototype.tick=function(){if(this.working){if(0===this.localStorage){var e=this.landService.getForestOptions();if(e.forestSizeRuleEnabled&&this.landService.getForest()>=e.forestSizeRule)return void(this.status=Hm.FOREST_TOO_BIG);if(e.landSizeRuleEnabled&&this.landService.getLand()<=e.landSizeRule)return void(this.status=Hm.NO_ENOUGH_LAND);this.landService.reduceLand(this.effectiveness)?(this.localStorage=this.effectiveness,this.status=Hm.PLANTING_TREES):this.status=Hm.WAITING_FOR_LAND}this.localStorage>0&&(this.progress<100?(this.progress+=this.getPower(),this.progress>100&&(this.progress=100)):(this.landService.increaseForest(this.localStorage,!1),this.progress=0,this.localStorage=0))}},n.prototype.prepareDemolish=function(){return this.localStorage>0&&this.landService.increaseLand(this.localStorage,!0),e.prototype.prepareDemolish.call(this)},n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,localStorage:this.localStorage,status:this.status,effectiveness:this.effectiveness,working:this.working}},n}(xm),jm=function(){return function(e,n,t,l){this.enabled=e,this.buildingType=n,this.inputSettings=t,this.outputSettings=l}}();!function(e){e.FETCHING_INPUT="fetching {in}",e.WAITING_FOR_INPUT="waiting for {wait}",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.PREPARING="preparing {out}",e.PRODUCING_OUTPUT="{prod} {out}",e.TRANSPORTING_OUTPUT="transporting {out}"}(Vm||(Vm={}));var zm,Ym=function(e){function n(n,t,l,r,i,o,u,s,a,c,p){void 0===n&&(n=null),void 0===o&&(o=0),void 0===u&&(u=[]),void 0===s&&(s=[]),void 0===a&&(a=!1),void 0===c&&(c=null);var h=e.call(this,t,l,n,r,a,!0,!0,p)||this;if(h.status=i,h.progress=o,h.inputStorage=u,h.outputStorage=s,h.workSettings=c,h.productionText=r.TEXT,n&&(h.managementService=n.getService(Nu.MANAGEMENT),null===h.workSettings)){var d=r.INPUT_RESOURCES.map(function(e){return[e.resource,0]}),f=r.OUTPUT_RESOURCES.map(function(e){return[e.resource,n.getService(Nu.RESOURCES).getResource(e.resource).getLimit()]});h.workSettings=new jm(!0,l,d,f)}return h}return r(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,workSettings:this.workSettings,buildingType:this.buildingType,progress:this.progress,status:this.status,inputStorage:this.inputStorage,outputStorage:this.outputStorage,working:this.working}},n.prototype.getLine=function(e){switch(e){case Pm.FIRST:return km.emptyValue();case Pm.SECOND:var n=Au.resourcesArraysDiff(this.settings.INPUT_RESOURCES,this.inputStorage),t=String(this.status);return n.length>0&&(t=t.replace("{wait}",Au.prepareResourcesNamesList(n))),t=(t=(t=t.replace("{in}",Au.prepareResourcesNamesList(this.settings.INPUT_RESOURCES))).replace("{out}",Au.prepareResourcesNamesList(this.settings.OUTPUT_RESOURCES))).replace("{prod}",this.productionText+" "),km.textValue(t);case Pm.THIRD:return km.progressValue(this.progress);case Pm.FOURTH:return km.emptyValue()}},n.prototype.isMet=function(){var e=this,n=!0;return this.workSettings.inputSettings.forEach(function(t){n&&(n=e.resourcesService.getResource(t[0]).amount>t[1])}),this.workSettings.outputSettings.forEach(function(t){n&&(n=e.resourcesService.getResource(t[0]).amount<t[1])}),n},n.prototype.tick=function(){this.managementService.getComplexWorkers()&&this.workSettings&&this.workSettings.enabled&&(this.isMet()?this.isWorking()||this.hireWorker():this.isWorking()&&this.status!==Vm.PRODUCING_OUTPUT&&this.status!==Vm.TRANSPORTING_OUTPUT&&this.fireWorker()),this.isWorking()&&(this.outputStorage.length>0?this.collectOutputResources():this.inputStorage.length<this.settings.INPUT_RESOURCES.length&&0===this.outputStorage.length?this.collectInputResources():this.progress<100?(this.status=Vm.PRODUCING_OUTPUT,this.progress+=this.getPower(),this.progress>100&&(this.progress=100)):100===this.progress&&(this.progress=0,this.inputStorage=[],this.outputStorage=Au.copyResourceArray(this.settings.OUTPUT_RESOURCES),this.status=Vm.TRANSPORTING_OUTPUT))},n.prototype.collectInputResources=function(){var e=this,n=!0;return this.settings.INPUT_RESOURCES.forEach(function(t){e.inputStorage.find(function(e){return e.resource===t.resource})||(e.resourcesService.decreaseResource(t.resource,t.amount,e.getName())?e.inputStorage.push({resource:t.resource,amount:t.amount}):n=!1)}),n?(this.status=Vm.FETCHING_INPUT,!0):(this.status=Vm.WAITING_FOR_INPUT,!1)},n.prototype.collectOutputResources=function(){var e=this,n=!0;return this.outputStorage.forEach(function(t){e.resourcesService.increaseResource(t.resource,t.amount)?t.amount=0:n=!1}),this.outputStorage=this.outputStorage.filter(function(e){return e.amount>0}),n?0===this.outputStorage.length?(this.status=Vm.FETCHING_INPUT,!0):void 0:(this.status=Vm.WAITING_FOR_WAREHOUSE_SPACE,!1)},n.prototype.isComplexManagement=function(){return!0},n.prototype.getWorkSettings=function(){return this.workSettings},n}(xm),Km=function(e){function n(n,t,l,r,i,o,u,s,a){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===r&&(r=Vm.FETCHING_INPUT),void 0===i&&(i=[]),void 0===o&&(o=[]),void 0===u&&(u=!1),void 0===s&&(s=null),void 0===a&&(a=1),e.call(this,n,t,bu.SAWMILL,ts.FOREST.SAWMILL,r,l,i,o,u,s,a)||this}return r(n,e),n}(Ym),qm=function(e){function n(n,t,l,r,i,o,u,s){void 0===n&&(n=null),void 0===i&&(i=1),void 0===o&&(o=1),void 0===u&&(u=0),void 0===s&&(s=!1);var a=e.call(this,t,bu.DECONSTRUCTION,n,ts.DECONSTRUCTION_SITE,s,!1,!0,1)||this;return a.region=l,a.deconstructing=r,a.buildingComplexity=i,a.buildingSize=o,a.progress=u,a.servicesService&&(a.regionService=n.getServiceByRegion(l)),a}return r(n,e),n.prototype.getLine=function(e){switch(e){case Pm.FIRST:return km.emptyValue();case Pm.SECOND:return km.textValue("deconstructing "+Au.prepareBuildingName(this.deconstructing));case Pm.THIRD:return km.progressValue(this.progress);case Pm.FOURTH:return km.emptyValue()}},n.prototype.tick=function(){this.working&&(this.progress<100?(this.progress+=this.getPower()/this.buildingComplexity,this.progress>100&&(this.progress=100)):this.regionService.finishDeconstruction(this))},n.prototype.toJSON=function(){return{id:this.id,buildingType:this.buildingType,region:this.region,deconstructing:this.deconstructing,buildingComplexity:this.buildingComplexity,progress:this.progress,working:this.working,buildingSize:this.buildingSize}},n.prototype.getComplexity=function(){return 0},n.prototype.getSize=function(){return this.buildingSize},n.prototype.prepareDemolish=function(){return!1},n.prototype.finishDemolish=function(){},n.prototype.getBuildingBeingDemolished=function(){return this.deconstructing},n.prototype.getDecontructing=function(){return this.deconstructing},n}(xm);!function(e){e.GATHERING_FOOD="gathering food",e.GATHERING_RESOURCES="gathering resources",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.TRANSPORTING="transporting"}(zm||(zm={}));var $m,Qm=function(e){return e[e.FOOD=0]="FOOD",e[e.RESOURCES=1]="RESOURCES",e}({}),Zm=function(e){function n(n,t,l,r,i,o,u,s){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===r&&(r=zm.GATHERING_FOOD),void 0===i&&(i=!1),void 0===o&&(o=Qm.FOOD),void 0===u&&(u=[null,0]),void 0===s&&(s=1);var a=e.call(this,t,bu.GATHERER,n,ts.FOREST.GATHERER,i,!0,!0,s)||this;return a.progress=l,a.status=r,a.mode=o,a.storage=u,a.lastFind=null,a.servicesService&&(a.weatherService=n.getService(Nu.WEATHER)),a}return r(n,e),n.prototype.rollForFind=function(){var e=null;return this.mode===Qm.FOOD?e=ku.randomElement([{item:vu.BERRY,chance:this.settings.BERRY_CHANCE},{item:vu.MUSHROOM,chance:this.settings.MUSHROOM_CHANCE},{item:vu.WHEAT,chance:this.settings.WHEAT_CHANCE}]):this.mode===Qm.RESOURCES&&(e=ku.randomElement([{item:vu.BRUSHWOOD,chance:this.settings.BRUSHWOOD_CHANCE},{item:vu.STONE,chance:this.settings.STONE_CHANCE},{item:vu.LOG,chance:this.settings.LOG_CHANCE},{item:vu.COPPER,chance:this.settings.COPPER_CHANCE}])),e},n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,working:this.working,storage:this.storage,mode:this.mode}},n.prototype.callback=function(e){e===Qm.FOOD?(this.mode=Qm.FOOD,this.progress=0,this.status=zm.GATHERING_FOOD):e===Qm.RESOURCES&&(this.mode=Qm.RESOURCES,this.progress=0,this.status=zm.GATHERING_RESOURCES)},n.prototype.getLine=function(e){switch(e){case Pm.FIRST:return this.mode===Qm.FOOD?km.buttonValue("gather resources",Qm.RESOURCES):km.buttonValue("gather food",Qm.FOOD);case Pm.SECOND:return km.textValue(this.status);case Pm.THIRD:return km.progressValue(this.progress);case Pm.FOURTH:return null!=this.lastFind?km.textValue("last find: "+Au.prepareResourceName(this.lastFind)):km.emptyValue()}},n.prototype.tick=function(e){if(this.working)if(this.storage[1]>0)this.resourcesService.increaseResource(this.storage[0],this.storage[1]),this.storage=[null,0],this.setStatus();else if(this.progress<100)this.setStatus(),this.progress+=this.getPower(),this.progress>100&&(this.progress=100);else if(100===this.progress){this.progress=0;var n=this.rollForFind();if(null!==n&&!this.resourcesService.hasLimit(n))return n=null,void(this.progress=50);n?(this.lastFind=n,this.storage=[n,1],this.status=zm.TRANSPORTING):(this.lastFind=vu.NOTHING,this.progress=0)}},n.prototype.setStatus=function(){this.status=this.mode===Qm.FOOD?zm.GATHERING_FOOD:zm.GATHERING_RESOURCES},n}(xm);!function(e){e.MINING_STONE="mining stone",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.NO_MORE_RESOURCES="no more resources",e.TRANSPORTING="transporting"}($m||($m={}));var Xm,Jm=function(e){function n(n,t,l,r,i,o,u,s){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===r&&(r=$m.MINING_STONE),void 0===i&&(i=!1),void 0===o&&(o=0),void 0===u&&(u=200),void 0===s&&(s=1);var a=e.call(this,t,bu.QUARRY,n,ts.MOUNTAINS.QUARRY,i,!0,!0,s)||this;return a.progress=l,a.status=r,a.storage=o,a.resources=u,a.servicesService&&(a.gameService=n.getService(Nu.GAME)),a}return r(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,working:this.working,storage:this.storage,resources:this.resources}},n.prototype.build=function(){return this.startProduction(),this.gameService.enable(Eu.BUILT_QUARRY),this},n.prototype.buildOnMountain=function(){return!0},n.prototype.getLine=function(e){switch(e){case Pm.FIRST:return km.textValue("stone: "+this.resources);case Pm.SECOND:return km.textValue(this.status);case Pm.THIRD:return km.progressValue(this.progress);case Pm.FOURTH:return km.emptyValue()}},n.prototype.isStoppable=function(){return this.resources>0},n.prototype.tick=function(e){this.resources<=0&&(this.status=$m.NO_MORE_RESOURCES,this.stopProduction()),this.working&&(this.storage>0?this.resourcesService.increaseResource(vu.STONE,this.storage)?(this.storage=0,this.status=$m.MINING_STONE):this.status=$m.WAITING_FOR_WAREHOUSE_SPACE:this.progress<100?(this.status=$m.MINING_STONE,this.progress+=this.getPower(),this.progress>100&&(this.progress=100)):100===this.progress&&(this.progress=0,this.resources-=1,this.storage=1,this.status=$m.TRANSPORTING))},n}(xm);!function(e){e.RESEARCHING="researching",e.CRAFTING="crafting {craft}",e.WAITING_FOR_WAREHOUSE="waiting for warehouse space",e.NO_RESEARCH="nothing to research",e.NO_CRAFTING="nothing to craft"}(Xm||(Xm={}));var ey,ny=function(e){return e[e.RESEARCH=0]="RESEARCH",e[e.CRAFT=1]="CRAFT",e[e.SWITCH_TO_RESEARCH=2]="SWITCH_TO_RESEARCH",e}({}),ty=function(e){function n(n,t,l,r,i,o,u,s,a){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===r&&(r=Xm.NO_RESEARCH),void 0===i&&(i=ny.RESEARCH),void 0===o&&(o=!1),void 0===u&&(u=null),void 0===s&&(s=1),void 0===a&&(a=0);var c=e.call(this,t,bu.WORKSHOP,n,ts.VILLAGE.WORKSHOP,o,!0,!0,s)||this;return c.progress=l,c.status=r,c.mode=i,c.recipe=u,c.storage=a,c.servicesService&&(c.craftingService=n.getService(Nu.CRAFTING),c.techService=n.getService(Nu.RESEARCH),c.gameService=n.getService(Nu.GAME)),c}return r(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,mode:this.mode,working:this.working,recipe:this.recipe,storage:this.storage}},n.prototype.build=function(){this.startProduction();var e=this.servicesService.getService(Nu.LOG);return this.gameService.isEnabled(Eu.RESEARCH)||(this.gameService.enable(Eu.RESEARCH),e.log("Researching unlocked")),this.gameService.isEnabled(Eu.CRAFTING)||(this.gameService.enable(Eu.CRAFTING),e.log("Crafting unlocked")),this.craftingService.increaseQueueSize(1),this},n.prototype.prepareDemolish=function(){return this.craftingService.decreaseQueueSize(1),e.prototype.prepareDemolish.call(this)},n.prototype.callback=function(e){var n=this;if("switch"===e){if(this.mode===ny.RESEARCH)this.progress=0,this.mode=ny.CRAFT,this.recipe=this.craftingService.getOrder(),this.status=null!==this.recipe?Xm.CRAFTING:Xm.NO_CRAFTING;else if(this.mode===ny.SWITCH_TO_RESEARCH)this.mode=ny.CRAFT,this.status=null!==this.recipe?Xm.CRAFTING:Xm.NO_CRAFTING;else if(this.mode===ny.CRAFT)if(this.recipe){this.modalService.open(mu.CONFIRM),this.modalService.setModalText("Workshop will switch to research after finishing current craft.");var t=this.modalService.registerForConfirmation().subscribe(function(e){t.unsubscribe(),e&&(n.mode=ny.SWITCH_TO_RESEARCH)})}else this.progress=0,this.mode=ny.RESEARCH,this.status=this.techService.isResearchStarted()?Xm.RESEARCHING:Xm.NO_RESEARCH}else"cancel"===e&&(this.recipe=null,this.progress=0,this.mode===ny.SWITCH_TO_RESEARCH?(this.mode=ny.RESEARCH,this.status=this.techService.isResearchStarted()?Xm.RESEARCHING:Xm.NO_RESEARCH):this.status=Xm.NO_CRAFTING)},n.prototype.getLine=function(e){switch(e){case Pm.FIRST:return this.firstLine();case Pm.SECOND:return km.textValue(this.status.replace("{craft}",this.recipe?Au.prepareResourceName(this.recipe.resource):""));case Pm.THIRD:if(this.recipe)return km.buttonValue("cancel crafting","cancel");var n="";return this.techService.getCurrentResearch()&&(n=Au.prepareTechName(this.techService.getCurrentResearch().getTech())),km.textValue(n);case Pm.FOURTH:return km.progressValue(this.progress)}},n.prototype.firstLine=function(){return km.buttonValue(this.mode===ny.RESEARCH||this.mode===ny.SWITCH_TO_RESEARCH?"craft":"research","switch")},n.prototype.tick=function(e){if(this.working)if(this.mode===ny.RESEARCH)this.techService.isResearchStarted()?(this.status!==Xm.RESEARCHING&&(this.progress=0),this.status=Xm.RESEARCHING,this.progress+=this.getPower(),this.progress>=100&&(this.progress=0,this.techService.progressTech(ts.VILLAGE.WORKSHOP.RESEARCH_POWER))):(this.status=Xm.NO_RESEARCH,this.progress=0);else if(this.mode===ny.CRAFT||this.mode===ny.SWITCH_TO_RESEARCH)if(null===this.recipe&&(this.recipe=this.craftingService.getOrder(),this.progress=0),null===this.recipe)this.status=Xm.NO_CRAFTING;else if(this.status===Xm.WAITING_FOR_WAREHOUSE){var n=this.resourcesService.getLimit(this.recipe.resource);this.storage>n?(this.storage-=n,this.resourcesService.increaseResource(this.recipe.resource,n)):(this.resourcesService.increaseResource(this.recipe.resource,this.storage),this.status=Xm.CRAFTING,this.progress=0,this.recipe=null)}else this.status=Xm.CRAFTING,this.progress<100&&(this.progress+=this.getPower()/this.recipe.craftingDifficulty*ts.VILLAGE.WORKSHOP.CRAFTING_POWER),this.progress>=100&&(this.progress=100,this.storage=this.recipe.amount,n=this.resourcesService.getLimit(this.recipe.resource),this.storage>n?(this.storage-=n,this.resourcesService.increaseResource(this.recipe.resource,n),this.status=Xm.WAITING_FOR_WAREHOUSE):this.resourcesService.increaseResource(this.recipe.resource,this.storage)?(this.progress=0,this.storage=0,this.recipe=null,this.mode===ny.SWITCH_TO_RESEARCH&&(this.mode=ny.RESEARCH,this.status=this.techService.isResearchStarted()?Xm.RESEARCHING:Xm.NO_RESEARCH)):this.status=Xm.WAITING_FOR_WAREHOUSE)},n.prototype.getRecipe=function(){return this.recipe},n.prototype.cancelCrafting=function(){this.recipe=null},n.prototype.willResearch=function(){return this.mode===ny.RESEARCH||this.mode===ny.SWITCH_TO_RESEARCH},n}(xm),ly=function(e){function n(n,t,l,r){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=_u.NONE),void 0===r&&(r=1);var i=e.call(this,t,bu.WAREHOUSE,n,ts.VILLAGE.WAREHOUSE,!1,!0,!1,r)||this;return i.resource=l,i.storage=50,i.servicesService&&(i.modalService=n.getService(Nu.MODAL)),i}return r(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,resource:this.resource}},n.prototype.callback=function(e){var n=this;if(this.resource===_u.NONE)this.resource=_u[String(e.target.value)],this.resourcesService.increaseLimit(this.resource,this.storage);else{this.modalService.open(mu.CONFIRM),this.modalService.setModalText("Are you sure you want to switch warehouse storage type?<br>All excess resources will be lost");var t=this.modalService.registerForConfirmation().subscribe(function(l){l?(n.resourcesService.decreaseLimit(n.resource,n.storage),n.resource=_u[String(e.target.value)],n.resourcesService.increaseLimit(n.resource,n.storage)):e.target.selectedIndex=n.resource-1,t.unsubscribe()})}},n.prototype.getLine=function(e){switch(e){case Pm.FIRST:return this.firstLine();case Pm.SECOND:return km.textValue("storage: "+this.storage);case Pm.THIRD:case Pm.FOURTH:return km.emptyValue()}},n.prototype.firstLine=function(){var e=[];return e.push(_u[_u.NONE]),e.push(_u[_u.RAW]),e.push(_u[_u.PROCESSED]),e.push(_u[_u.FOOD]),e.push(_u[_u.TOOLS]),km.dropdownValue(e,_u[this.resource])},n.prototype.prepareDemolish=function(){return this.resourcesService.decreaseLimit(this.resource,this.storage),!0},n.prototype.startProduction=function(){return!1},n.prototype.stopProduction=function(){},n.prototype.fireWorker=function(){return!1},n.prototype.hireWorker=function(){return!1},n.prototype.getWorkers=function(){return 0},n.prototype.getHappinessEffect=function(){return 0},n}(xm);!function(e){e.HUNTING="hunting",e.TAME="taming animals",e.WAITING_FOR_PASTURE_SPACE="waiting for warehouse space",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.TRANSPORTING="transporting"}(ey||(ey={}));var ry,iy=function(e){return e[e.HUNTING=0]="HUNTING",e[e.TAMING=1]="TAMING",e}({}),oy=function(e){function n(n,t,l,r,i,o,u,s,a,c){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===r&&(r=ey.HUNTING),void 0===i&&(i=iy.HUNTING),void 0===o&&(o=!1),void 0===u&&(u=0),void 0===s&&(s=0),void 0===a&&(a=null),void 0===c&&(c=1);var p=e.call(this,t,bu.HUNTER_LODGE,n,ts.FOREST.HUNTER_LODGE,o,!0,!0,c)||this;return p.progress=l,p.status=r,p.mode=i,p.storage=u,p.storage2=s,p.animal=a,p.lastFind=null,p.servicesService&&(p.weatherService=n.getService(Nu.WEATHER),p.gameService=n.getService(Nu.GAME)),p}return r(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,mode:this.mode,working:this.working,storage:this.storage,storage2:this.storage2,animal:this.animal}},n.prototype.callback=function(e){"tame"===e?(this.mode=iy.TAMING,this.progress=0,this.storage=0,this.storage2=0,this.status=ey.TAME):(this.mode=iy.HUNTING,this.progress=0,this.storage=0,this.storage2=0,this.lastFind=null,this.status=ey.HUNTING)},n.prototype.getLine=function(e){switch(e){case Pm.FIRST:return this.gameService.isEnabled(Eu.PASTURE)?this.mode===iy.HUNTING?km.buttonValue("tame animals","tame"):km.buttonValue("hunt","hunt"):km.emptyValue();case Pm.SECOND:return km.textValue(this.status);case Pm.THIRD:return km.progressValue(this.progress);case Pm.FOURTH:return null!==this.lastFind?km.textValue("last tamed: "+Au.prepareResourceName(this.lastFind)):km.emptyValue()}},n.prototype.tick=function(e){if(this.working)if(this.mode===iy.HUNTING)this.status=0!==this.storage&&0!==this.storage2?ey.TRANSPORTING:ey.HUNTING,this.status===ey.HUNTING?this.progress<100&&(this.progress+=this.getPower(),this.progress>=100&&(this.progress=0,this.storage<5&&(this.storage+=ku.randomBetween(1,3),this.storage>5&&(this.storage=5)),this.storage2<5&&(this.storage2+=ku.randomBetween(0,2),this.storage2>5&&(this.storage2=5)),this.status=ey.TRANSPORTING)):this.status!==ey.TRANSPORTING&&this.status!==ey.WAITING_FOR_WAREHOUSE_SPACE||(0!==this.storage&&this.resourcesService.increaseResource(vu.MEAT,this.storage)&&(this.storage=0),0!==this.storage2&&this.resourcesService.increaseResource(vu.FUR,this.storage2)&&(this.storage2=0),0!==this.storage&&0!==this.storage2&&(this.status=ey.WAITING_FOR_WAREHOUSE_SPACE));else if(this.mode===iy.TAMING)if(this.status===ey.TAME){if(this.progress<100&&(this.progress+=this.getPower(),this.progress>=100)){this.progress=0;var n=[];this.resourcesService.hasLimit(vu.CHICKEN)&&n.push({item:vu.CHICKEN,chance:6}),this.resourcesService.hasLimit(vu.PIG)&&n.push({item:vu.PIG,chance:5}),this.resourcesService.hasLimit(vu.COW)&&n.push({item:vu.COW,chance:4}),this.resourcesService.hasLimit(vu.HORSE)&&n.push({item:vu.HORSE,chance:3}),0===n.length&&(this.logService.log("No more space for animals. Hunter switched to hunting"),this.callback("hunt"));var t=ku.randomElement(n);null!=t?(this.lastFind=t,this.animal=t,this.status=ey.TRANSPORTING):(this.lastFind=vu.NOTHING,this.animal=null)}}else this.status!==ey.TRANSPORTING&&this.status!==ey.WAITING_FOR_PASTURE_SPACE||this.animal&&(this.resourcesService.increaseResource(this.animal,1)?(this.animal=null,this.status=ey.TAME):this.status=ey.WAITING_FOR_PASTURE_SPACE)},n}(xm),uy=function(e){function n(n,t,l,r){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===r&&(r=1);var i=e.call(this,t,bu.SHRINE,n,ts.VILLAGE.SHRINE,!0,!0,!1,r)||this;return i.progress=l,i.servicesService&&(i.religionService=n.getService(Nu.RELIGION)),i}return r(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress}},n.prototype.build=function(){return this.religionService.increaseFaithCap(10),this.servicesService.getService(Nu.GAME).enable(Eu.RELIGION),this},n.prototype.getLine=function(e){switch(e){case Pm.FIRST:case Pm.SECOND:return km.emptyValue();case Pm.THIRD:return km.progressValue(this.progress,"prayers");case Pm.FOURTH:return km.emptyValue()}},n.prototype.prepareDemolish=function(){return this.religionService.decreaseFaithCap(10),!0},n.prototype.startProduction=function(){return!0},n.prototype.stopProduction=function(){},n.prototype.tick=function(e){var n=this.servicesService.getService(Nu.VILLAGE).getPopulation();this.progress+=.01*n*this.getPower(),this.progress>100&&(this.progress=0,this.religionService.increaseFaith(1))},n.prototype.fireWorker=function(){return!1},n.prototype.hireWorker=function(){return!1},n.prototype.getWorkers=function(){return 0},n}(xm),sy=function(){function e(e,n,t,l){void 0===e&&(e=null),void 0===n&&(n=-1),void 0===t&&(t=0),void 0===l&&(l=0),this.servicesService=e,this.fish=t,this.food=l,this.buildingType=bu.SCHOOL_OF_FISH,this.icons=[{name:"fish_food",path:"resources",prefix:"",suffix:"1"}],this.id=n,this.servicesService&&(this.resourcesService=e.getService(Nu.RESOURCES),this.effectsService=e.getService(Nu.EFFECTS),this.gameService=e.getService(Nu.GAME))}return e.prototype.callback=function(e){"food"===e&&this.resourcesService.decreaseResource(vu.FISH_FOOD,1,this.getName(),!0)?this.food+=10*ts.SEA.SCHOOL_OF_FISH.FISH_FOOD_DAYS:this.servicesService.getService(Nu.MODAL).info("No fish food available")},e.prototype.getBuildingType=function(){return this.buildingType},e.prototype.getComplexity=function(){return 0},e.prototype.getCost=function(){return new Map},e.prototype.getName=function(){return"School of fish"},e.prototype.getLine=function(e){switch(e){case Pm.FIRST:return km.textValue("fish: "+this.fish);case Pm.SECOND:return this.gameService.isEnabled(Eu.FISH_FOOD)?km.textValue("fish food: "+Math.floor(this.food/10)):km.emptyValue();case Pm.THIRD:return this.gameService.isEnabled(Eu.FISH_FOOD)?km.iconValue(this.icons):km.emptyValue();case Pm.FOURTH:return this.gameService.isEnabled(Eu.FISH_FOOD)?km.buttonValue("add fish food","food"):km.emptyValue()}},e.prototype.getSize=function(){return 0},e.prototype.buildOnMountain=function(){return!1},e.prototype.tick=function(){this.food>0?(this.food-=1,1===ku.randomBetween(1,ts.SEA.SCHOOL_OF_FISH.BREED_CHANCE/2)&&(this.fish+=Math.floor(ts.SEA.SCHOOL_OF_FISH.BREED_AMOUNT*this.getPower()))):1===ku.randomBetween(1,ts.SEA.SCHOOL_OF_FISH.BREED_CHANCE)&&(this.fish+=Math.floor(ts.SEA.SCHOOL_OF_FISH.BREED_AMOUNT*this.getPower()))},e.prototype.build=function(){return this},e.prototype.getBuildingId=function(){return this.id},e.prototype.toJSON=function(){return{id:this.id,buildingType:this.buildingType,fish:this.fish,food:this.food}},e.prototype.prepareDemolish=function(){return this.stopProduction(),!1},e.prototype.finishDemolish=function(){},e.prototype.startProduction=function(){return!1},e.prototype.stopProduction=function(){},e.prototype.isStoppable=function(){return!1},e.prototype.isWorking=function(){return!0},e.prototype.isDemolishable=function(){return!1},e.prototype.getDescription=function(){return"School of fish"},e.prototype.fireWorker=function(){return!1},e.prototype.hireWorker=function(){return!1},e.prototype.getWorkers=function(){return 0},e.prototype.getFish=function(){return this.fish},e.prototype.reduceFish=function(e){return this.fish>=e&&(this.fish-=e,!0)},e.prototype.getEffects=function(){return 0},e.prototype.getPermanentEffects=function(){return 0},e.prototype.getDetails=function(){return""},e.prototype.hasDetails=function(){return!1},e.prototype.getPower=function(){return 1+this.effectsService.getNatureEffectsValue()/100},e.prototype.isCombinable=function(){return!1},e.prototype.isSplittable=function(){return!1},e.prototype.getHappinessEffect=function(){return 0},e.prototype.getWeatherMultiplier=function(){return 0},e.prototype.getDisplayableEffectsValue=function(){return 0},e.prototype.hasBuff=function(){return!1},e.prototype.isBuffed=function(){return!1},e.prototype.getBuff=function(){return null},e.prototype.isComplexManagement=function(){return!1},e.prototype.getWorkSettings=function(){return null},e.prototype.hasUpgrade=function(){return!1},e.prototype.getUpgradeCost=function(){return new Map},e.prototype.setBuildingLevel=function(e){},e.prototype.getBuildingLevel=function(){return 0},e}();!function(e){e.WORKING="working",e.BAD_WEATHER="bad weather",e.STOPPED="stopped"}(ry||(ry={}));var ay,cy=function(e){function n(n,t,l,r,i,o){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===r&&(r=4),void 0===i&&(i=ry.WORKING),void 0===o&&(o=1);var u=e.call(this,t,bu.FARM,n,ts.FIELD.FARM,l>0,!0,!0,o)||this;return u.workers=l,u.maxWorkers=r,u.status=i,u.servicesService&&(u.weatherService=n.getService(Nu.WEATHER),u.calendarService=n.getService(Nu.CALENDAR),u.fieldService=n.getServiceByRegion(Mu.FIELD)),u}return r(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,workers:this.workers,maxWorkers:this.maxWorkers}},n.prototype.callback=function(e){"hire"===e&&this.workers<this.maxWorkers&&this.resourcesService.hireWorker()?this.workers+=1:"fire"===e&&this.workers>0&&(this.resourcesService.fireWorker(),this.workers-=1)},n.prototype.getLine=function(e){switch(e){case Pm.FIRST:return km.textValue("workers: "+this.workers+"/"+this.maxWorkers);case Pm.SECOND:return km.textValue(this.status);case Pm.THIRD:return km.twoButtonValue("hire worker","hire","","fire worker","fire");case Pm.FOURTH:return km.emptyValue()}},n.prototype.isWorking=function(){return this.workers>0},n.prototype.startProduction=function(){if(0===this.workers){for(;this.workers<this.maxWorkers&&this.resourcesService.hireWorker();)this.workers+=1;if(this.workers>0)return!0}return!1},n.prototype.stopProduction=function(){this.workers>0&&(this.resourcesService.fireWorker(this.workers),this.workers=0)},n.prototype.tick=function(e){var n=this;if(this.workers>0)if(this.weatherService.isWeather(Lu.RAIN,Lu.STORM))this.status=ry.BAD_WEATHER;else{this.status=ry.WORKING;for(var t=this.workers;t>0;){var l=this.fieldService.getBuildings().filter(function(e){return(e.getBuildingType()===bu.FIELD||e.getBuildingType()===bu.ORCHARD||e.getBuildingType()===bu.PASTURE)&&e.hasWork()});if(0===l.length)break;l.forEach(function(e){t>0&&e.work(n.getPower())&&(t-=1)})}}else this.status=ry.STOPPED},n.prototype.fireWorker=function(){return this.workers>0&&(this.resourcesService.fireWorker(1),this.workers-=1,!0)},n.prototype.hireWorker=function(){return!!(this.workers<this.maxWorkers&&this.resourcesService.hireWorker())&&(this.workers+=1,!0)},n.prototype.getWorkers=function(){return this.workers},n}(xm);!function(e){e.PLOW_FIELD="plowing {crop} field",e.SOWING="sowing {crop}",e.GROWING="{crop} growing",e.HARVEST="harvesting {crop}",e.FALLOW="fallow"}(ay||(ay={}));var py,hy=function(e){function n(n,t,l,r,i,o,u,s,a){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=ts.FIELD.FIELD.SIZE),void 0===r&&(r=Cu.NONE),void 0===i&&(i=ay.FALLOW),void 0===o&&(o=0),void 0===u&&(u=!0),void 0===s&&(s=0),void 0===a&&(a=1);var c=e.call(this,t,bu.FIELD,n,ts.FIELD.FIELD,u,!0,!0,a)||this;return c.currentSize=l,c.crop=r,c.status=i,c.progress=o,c.growth=s,c.servicesService&&(c.gameService=n.getService(Nu.GAME),c.modalService=n.getService(Nu.MODAL),c.weatherService=n.getService(Nu.WEATHER),c.calendarService=n.getService(Nu.CALENDAR)),c}return r(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,size:this.currentSize,crop:this.crop,status:this.status,progress:this.progress,working:this.working,growth:this.growth}},n.prototype.getSize=function(){return this.currentSize},n.prototype.getComplexity=function(){return e.prototype.getComplexity.call(this)*(this.getSize()/this.settings.SIZE)},n.prototype.callback=function(e){var n=this;if(this.crop===Cu.NONE||this.status===ay.FALLOW)this.crop=Cu[String(e.target.value)],this.status=ay.FALLOW,this.progress=0;else{this.modalService.open(mu.CONFIRM),this.modalService.setModalText("Are you sure you want to switch field crop type?<br>All field progress will be lost");var t=this.modalService.registerForConfirmation().subscribe(function(l){l?(n.crop=Cu[String(e.target.value)],n.status=ay.FALLOW,n.progress=0):e.target.selectedIndex=n.crop,t.unsubscribe()})}},n.prototype.finishDemolish=function(){},n.prototype.getLine=function(e){var n=this;switch(e){case Pm.FIRST:return km.textValue("size: "+this.getSize());case Pm.SECOND:var t=[];return t.push(Cu[Cu.NONE]),Object.entries(Object(is.FIELD)).forEach(function(e){is.getCrop(Cu[e[0]]).PREREQUISITE?n.gameService.isEnabled(is.getCrop(Cu[e[0]]).PREREQUISITE)&&t.push(e[0]):t.push(e[0])}),km.dropdownValue(t,Cu[this.crop]);case Pm.THIRD:return km.textValue(this.status.replace("{crop}",Cu[this.crop].toLowerCase()));case Pm.FOURTH:return this.status===ay.HARVEST?km.progressValue(Math.floor(this.growth/(2*this.getSize())*100),"harvest: "+this.growth):km.progressValue(this.progress)}},n.prototype.getName=function(){return this.crop===Cu.NONE?"Field":Cu[this.crop].charAt(0).toUpperCase()+Cu[this.crop].slice(1).toLowerCase()+" field"},n.prototype.startProduction=function(){return this.working=!0,!0},n.prototype.stopProduction=function(){this.working=!1},n.prototype.tick=function(e){if(this.calendarService.getSeason()===Rg.WINTER&&(this.status=ay.FALLOW,this.growth=0,this.progress=0),this.status===ay.GROWING)if(this.calendarService.getSeason()===Rg.AUTUMN)this.status=ay.HARVEST,this.growth=Math.floor(2*this.progress*this.getSize()/100),this.progress=0;else if(this.progress<100){var n=this.getPower()*(1+this.effectsService.getNatureEffectsValue()/100)/is.getCrop(this.crop).GROWTH;this.weatherService.getCurrentTemperature()<=5?n*=0:this.weatherService.getCurrentTemperature()<=10?n*=.2:this.weatherService.getCurrentTemperature()<=15?n*=.5:this.weatherService.getCurrentTemperature()<=20?n*=.8:this.weatherService.getCurrentTemperature()<=25?n*=1:this.weatherService.getCurrentTemperature()<=27?n*=.8:this.weatherService.getCurrentTemperature()<=29?n*=.6:this.weatherService.getCurrentTemperature()<=31?n*=.4:this.weatherService.getCurrentTemperature()<=33?n*=.2:this.weatherService.getCurrentTemperature()<=35&&(n*=0),this.progress+=n,this.progress>100&&(this.progress=100)}else 100===this.progress&&(this.growth=this.getSize()*is.getCrop(this.crop).YIELD_MULTIPLIER,this.progress=0,this.status=ay.HARVEST)},n.prototype.work=function(e){if(this.isWorking()&&this.status!==ay.GROWING&&this.crop!==Cu.NONE){if(this.status===ay.FALLOW&&this.calendarService.getSeason()===Rg.SPRING)return this.status=ay.PLOW_FIELD,!0;if(this.status===ay.PLOW_FIELD&&this.calendarService.getSeason()===Rg.SPRING)return this.progress<100&&(this.progress+=e/this.getSize(),this.progress>=100&&(this.progress=0,this.status=ay.SOWING)),!0;if(this.status===ay.SOWING&&(this.calendarService.getSeason()===Rg.SPRING||this.calendarService.getSeason()===Rg.SUMMER))return this.progress+=e/this.getSize(),this.progress>=100&&(this.progress=0,this.status=ay.GROWING),!0;if(this.status===ay.HARVEST){var n=vu[Cu[this.crop]];if(this.resourcesService.hasLimit(n))return this.resourcesService.increaseResource(n,1),this.growth-=1,this.growth<=0&&(this.status=ay.FALLOW),!0}}return!1},n.prototype.fireWorker=function(){return!1},n.prototype.hireWorker=function(){return!1},n.prototype.getWorkers=function(){return 0},n.prototype.hasWork=function(){return this.isWorking()&&this.status!==ay.GROWING&&this.crop!==Cu.NONE&&(this.status===ay.FALLOW&&this.calendarService.getSeason()===Rg.SPRING||this.status===ay.PLOW_FIELD&&this.calendarService.getSeason()===Rg.SPRING||this.status===ay.SOWING&&(this.calendarService.getSeason()===Rg.SPRING||this.calendarService.getSeason()===Rg.SUMMER)||this.status===ay.HARVEST&&this.resourcesService.hasLimit(vu[Cu[this.crop]]))},n.prototype.getDetails=function(){return this.crop!==Cu.NONE?"growing difficulty: "+is.getCrop(this.crop).GROWTH+"<br>yield multiplier: "+is.getCrop(this.crop).YIELD_MULTIPLIER+"<br>"+e.prototype.getDetails.call(this):e.prototype.getDetails.call(this)},n.prototype.getHappinessEffect=function(){return 0},n.prototype.isCombinable=function(){return!0},n.prototype.isSplittable=function(){return!0},n.prototype.combine=function(e,n){var t=this;if(this.getBuildingType()===e.getBuildingType()){this.modalService.open(mu.CONFIRM),this.modalService.setModalText(" Are you sure you want to combine "+this.getName()+" of size "+this.getSize()+" with "+e.getName()+" of size "+e.getSize()+"?<br>Resulting "+this.getName()+" of size "+(this.getSize()+e.getSize())+" will be changed to fallow");var l=this.modalService.registerForConfirmation().subscribe(function(r){l.unsubscribe(),r?(t.currentSize+=e.getSize(),t.status=ay.FALLOW,t.progress=0,t.growth=0,n.finaliseCombine(!0)):n.finaliseCombine(!1)})}},n.prototype.split=function(e){var t=this;this.modalService.open(mu.INPUT),this.modalService.setModalText("Set split size (1-"+(this.getSize()-1)+")");var l=this.modalService.registerForValueResponse().subscribe(function(r){l.unsubscribe(),isNaN(r)||0===r||(r>=1&&r<t.getSize()?(t.currentSize-=Number(r),e.finaliseSplit(new n(t.servicesService,t.servicesService.getService(Nu.ID).getNextId(),Number(r)).build())):t.modalService.info("Invalid size value!"))})},n}(xm);!function(e){e.FALLOW="fallow",e.PLANTING="planting {crop}",e.GROWING="{crop} growing",e.FRUITING="{crop} fruits growing",e.HARVEST="picking {crop}",e.NO_FRUITS="no fruits",e.CLEAR="clear old plants"}(py||(py={}));var dy,fy=function(e){function n(n,t,l,r,i,o,u,s,a){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=ts.FIELD.ORCHARD.SIZE),void 0===r&&(r=Cu.NONE),void 0===i&&(i=py.FALLOW),void 0===o&&(o=0),void 0===u&&(u=!0),void 0===s&&(s=0),void 0===a&&(a=1);var c=e.call(this,t,bu.ORCHARD,n,ts.FIELD.ORCHARD,u,!0,!0,a)||this;return c.currentSize=l,c.crop=r,c.status=i,c.progress=o,c.growth=s,c.servicesService&&(c.modalService=n.getService(Nu.MODAL),c.weatherService=n.getService(Nu.WEATHER),c.calendarService=n.getService(Nu.CALENDAR)),c}return r(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,size:this.currentSize,crop:this.crop,status:this.status,progress:this.progress,working:this.working,growth:this.growth}},n.prototype.getSize=function(){return this.currentSize},n.prototype.getComplexity=function(){return e.prototype.getComplexity.call(this)*(this.getSize()/this.settings.SIZE)},n.prototype.callback=function(e){var n=this;if(this.crop===Cu.NONE||this.status===py.FALLOW)this.crop=Cu[String(e.target.value)],this.status=py.FALLOW,this.progress=0;else{this.modalService.open(mu.CONFIRM),this.modalService.setModalText("Are you sure you want to switch orchard plant type?<br>All orchard progress will be lost");var t=this.modalService.registerForConfirmation().subscribe(function(l){l?(n.crop=Cu[String(e.target.value)],n.status=n.status===py.FALLOW||n.status===py.PLANTING?py.FALLOW:py.CLEAR,n.progress=0):e.target.selectedIndex=n.crop-Object.entries(is.FIELD).length,t.unsubscribe()})}},n.prototype.finishDemolish=function(){},n.prototype.getLine=function(e){var n=this;switch(e){case Pm.FIRST:return km.textValue("size: "+this.getSize());case Pm.SECOND:var t=[];return t.push(Cu[Cu.NONE]),Object.entries(Object(is.ORCHARD)).forEach(function(e){is.getCrop(Cu[e[0]]).PREREQUISITE?n.gameService.isEnabled(is.getCrop(Cu[e[0]]).PREREQUISITE)&&t.push(e[0]):t.push(e[0])}),km.dropdownValue(t,Cu[this.crop]);case Pm.THIRD:return km.textValue(this.status.replace("{crop}",Cu[this.crop].toLowerCase()));case Pm.FOURTH:return this.status===py.HARVEST?km.progressValue(Math.floor(this.growth/(is.getCrop(this.crop).YIELD_MULTIPLIER*this.getSize())*100),"harvest: "+this.growth):this.status===py.NO_FRUITS?km.emptyValue():km.progressValue(this.progress)}},n.prototype.getName=function(){return this.crop===Cu.NONE?"Orchard":Cu[this.crop].charAt(0).toUpperCase()+Cu[this.crop].slice(1).toLowerCase()+" orchard"},n.prototype.startProduction=function(){return this.working=!0,!0},n.prototype.stopProduction=function(){this.working=!1},n.prototype.tick=function(e){if(this.crop!==Cu.NONE){if(this.status!==py.FALLOW&&this.calendarService.getSeason()===Rg.WINTER){if(this.status===py.GROWING)return;this.status=py.NO_FRUITS,this.growth=0,this.progress=0}else this.status===py.NO_FRUITS&&this.calendarService.getSeason()===Rg.SPRING&&(this.status=py.FRUITING);if(this.status===py.GROWING||this.status===py.FRUITING)if(this.calendarService.getSeason()===Rg.AUTUMN&&this.status===py.FRUITING)this.status=py.HARVEST,this.growth=Math.floor(this.progress*is.getCrop(this.crop).YIELD_MULTIPLIER*this.getSize()/100),this.progress=0;else if(this.progress<100){var n=this.getPower()*(1+this.effectsService.getNatureEffectsValue()/100);this.status===py.GROWING?n/=is.getCrop(this.crop).GROWTH:this.status===py.FRUITING&&(n/=is.getCrop(this.crop).FRUITING),this.weatherService.getCurrentTemperature()<=5?n*=0:this.weatherService.getCurrentTemperature()<=10?n*=.2:this.weatherService.getCurrentTemperature()<=15?n*=.5:this.weatherService.getCurrentTemperature()<=20?n*=.8:this.weatherService.getCurrentTemperature()<=25?n*=1:this.weatherService.getCurrentTemperature()<=27?n*=.8:this.weatherService.getCurrentTemperature()<=29?n*=.6:this.weatherService.getCurrentTemperature()<=31?n*=.4:this.weatherService.getCurrentTemperature()<=33?n*=.2:this.weatherService.getCurrentTemperature()<=35&&(n*=0),this.progress+=n,this.progress>100&&(this.progress=100)}else 100===this.progress&&(this.status===py.GROWING?this.status=py.FRUITING:this.status===py.FRUITING&&(this.growth=is.getCrop(this.crop).YIELD_MULTIPLIER*this.getSize(),this.status=py.HARVEST),this.progress=0)}},n.prototype.work=function(e){if(this.isWorking()&&this.status!==py.GROWING&&this.crop!==Cu.NONE)if(this.status===py.FALLOW){if(this.calendarService.getSeason()===Rg.SPRING)return this.status=py.PLANTING,!0}else{if(this.status===py.PLANTING)return this.progress<100&&(this.progress+=e/this.getSize(),this.progress>=100&&(this.progress=0,this.status=py.GROWING)),!0;if(this.status===py.HARVEST){var n=vu[Cu[this.crop]];if(this.resourcesService.hasLimit(n))return this.resourcesService.increaseResource(n,1),this.growth-=1,this.growth<=0&&(this.status=py.NO_FRUITS),!0}else if(this.status===py.CLEAR)return this.progress<100&&(this.progress+=e/this.getSize(),this.progress>=100&&(this.progress=0,this.status=py.FALLOW)),!0}return!1},n.prototype.fireWorker=function(){return!1},n.prototype.hireWorker=function(){return!1},n.prototype.getWorkers=function(){return 0},n.prototype.hasWork=function(){return this.isWorking()&&this.status!==py.GROWING&&this.crop!==Cu.NONE&&(this.status===py.FALLOW&&this.calendarService.getSeason()===Rg.SPRING||this.status===py.PLANTING||this.status===py.CLEAR||this.status===py.HARVEST&&this.resourcesService.hasLimit(vu[Cu[this.crop]]))},n.prototype.getDetails=function(){return this.crop!==Cu.NONE?"growing difficulty: "+is.getCrop(this.crop).GROWTH+"<br>fruiting difficulty: "+is.getCrop(this.crop).FRUITING+"<br>yield multiplier: "+is.getCrop(this.crop).YIELD_MULTIPLIER+"<br>"+e.prototype.getDetails.call(this):e.prototype.getDetails.call(this)},n.prototype.getHappinessEffect=function(){return 0},n.prototype.isCombinable=function(){return!0},n.prototype.isSplittable=function(){return!0},n.prototype.combine=function(e,n){var t=this;if(this.getBuildingType()===e.getBuildingType()){this.modalService.open(mu.CONFIRM),this.modalService.setModalText(" Are you sure you want to combine "+this.getName()+" of size "+this.getSize()+" with "+e.getName()+" of size "+e.getSize()+"?<br>Resulting "+this.getName()+" of size "+(this.getSize()+e.getSize())+" will be changed to fallow");var l=this.modalService.registerForConfirmation().subscribe(function(r){l.unsubscribe(),r?(t.currentSize+=e.getSize(),t.status=py.FALLOW,t.progress=0,t.growth=0,n.finaliseCombine(!0)):n.finaliseCombine(!1)})}},n.prototype.split=function(e){var t=this;this.modalService.open(mu.INPUT),this.modalService.setModalText("Set split size (1-"+(this.getSize()-1)+")");var l=this.modalService.registerForValueResponse().subscribe(function(r){l.unsubscribe(),isNaN(r)||0===r||(r>=1&&r<t.getSize()?(t.currentSize-=Number(r),e.finaliseSplit(new n(t.servicesService,t.servicesService.getService(Nu.ID).getNextId(),Number(r)).build())):t.modalService.info("Invalid size value!"))})},n}(xm),gy=function(e){function n(n,t,l,r,i,o,u,s,a){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===r&&(r=Vm.FETCHING_INPUT),void 0===i&&(i=[]),void 0===o&&(o=[]),void 0===u&&(u=!1),void 0===s&&(s=null),void 0===a&&(a=1),e.call(this,n,t,bu.WINDMILL,ts.FIELD.WINDMILL,r,l,i,o,u,s,a)||this}return r(n,e),n}(Ym),vy=function(e){function n(n,t,l,r,i,o,u,s,a){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===r&&(r=Vm.FETCHING_INPUT),void 0===i&&(i=[]),void 0===o&&(o=[]),void 0===u&&(u=!1),void 0===s&&(s=null),void 0===a&&(a=1),e.call(this,n,t,bu.BAKERY,ts.VILLAGE.BAKERY,r,l,i,o,u,s,a)||this}return r(n,e),n}(Ym);!function(e){e.FISHING="fishing",e.WAITING_FOR_FISH="waiting for fish",e.FETCHING_WHEAT="fetching wheat",e.PRODUCING_BAIT="producing fish food",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.WAITING_FOR_WAREHOUSE_SPACE_FISH_FOOD="waiting for warehouse space",e.TRANSPORTING_FISH="transporting fish",e.TRANSPORTING_BAIT="transporting fish food"}(dy||(dy={}));var my,yy=function(e){function n(n,t,l,r,i,o){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===r&&(r=dy.WAITING_FOR_FISH),void 0===i&&(i=!1),void 0===o&&(o=1);var u=e.call(this,t,bu.FISHERS_HUT,n,ts.SEA.FISHERS_HUT,i,!0,!0,o)||this;return u.progress=l,u.status=r,u.servicesService&&(u.seaService=n.getServiceByRegion(Mu.SEA)),u}return r(n,e),n.prototype.callback=function(e){"bait"===e?(this.status=dy.FETCHING_WHEAT,this.progress=0):"fishing"===e&&(this.status=dy.WAITING_FOR_FISH,this.progress=0)},n.prototype.getLine=function(e){switch(e){case Pm.FIRST:return!this.gameService.isEnabled(Eu.FISH_FOOD)||this.status!==dy.FISHING&&this.status!==dy.WAITING_FOR_FISH&&this.status!==dy.TRANSPORTING_FISH&&this.status!==dy.WAITING_FOR_WAREHOUSE_SPACE?km.buttonValue("fishing","fishing"):km.buttonValue("produce fish food","bait");case Pm.SECOND:return km.textValue(this.status);case Pm.THIRD:return km.progressValue(this.progress);case Pm.FOURTH:return km.emptyValue()}},n.prototype.tick=function(){if(this.working)if(this.status===dy.WAITING_FOR_FISH)this.seaService.reduceFish(1)&&(this.status=dy.FISHING);else if(this.status===dy.FISHING){if(this.progress<100&&(this.progress+=this.getPower(),this.progress>=100)){if(this.progress=0,this.servicesService.getService(Nu.ROYAL).catchGoldenFish())return;this.status=dy.TRANSPORTING_FISH}}else if(this.status===dy.TRANSPORTING_FISH||this.status===dy.WAITING_FOR_WAREHOUSE_SPACE){var e=this.resourcesService.increaseResource(vu.FISH,1);this.status=e?dy.WAITING_FOR_FISH:dy.WAITING_FOR_WAREHOUSE_SPACE}else this.status===dy.FETCHING_WHEAT?this.resourcesService.decreaseResource(vu.WHEAT,2,this.getName())&&(this.status=dy.PRODUCING_BAIT):this.status===dy.PRODUCING_BAIT?this.progress<100&&(this.progress+=this.getPower(),this.progress>=100&&(this.progress=0,this.status=dy.TRANSPORTING_BAIT)):this.status!==dy.TRANSPORTING_BAIT&&this.status!==dy.WAITING_FOR_WAREHOUSE_SPACE_FISH_FOOD||(e=this.resourcesService.increaseResource(vu.FISH_FOOD,1),this.status=e?dy.FETCHING_WHEAT:dy.WAITING_FOR_WAREHOUSE_SPACE_FISH_FOOD)},n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,working:this.working}},n.prototype.getDescription=function(){return"Fishers catch fish in the sea"},n}(xm),Sy=function(e){function n(n,t,l,r){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=ts.FORT.BARRACKS.SIZE),void 0===r&&(r=1);var i=e.call(this,t,bu.BARRACKS,n,ts.FORT.BARRACKS,!1,!0,!1,r)||this;return i.barracksSize=l,i.servicesService&&(i.armyService=n.getService(Nu.ARMY),i.modalService=n.getService(Nu.MODAL)),i}return r(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,barracksSize:this.barracksSize}},n.prototype.build=function(){return this.servicesService.getService(Nu.GAME).isEnabled(Eu.ARMY)||this.servicesService.getService(Nu.GAME).enable(Eu.ARMY),this.armyService.increaseBarracks(this.barracksSize),this},n.prototype.prepareDemolish=function(){return this.armyService.getFreeBarracks()>=this.barracksSize?(this.armyService.decreaseBarracks(this.barracksSize),!0):(this.modalService.info("Your troops would have nowhere to sleep!<br>You cannot demolish barracks right now!"),!1)},n.prototype.getLine=function(e){switch(e){case Pm.FIRST:return km.textValue("capacity: "+this.barracksSize);case Pm.SECOND:case Pm.THIRD:case Pm.FOURTH:return km.emptyValue()}},n.prototype.getHappinessEffect=function(){return 0},n.prototype.getEffects=function(){return 0},n.prototype.getPermanentEffects=function(){return 0},n}(xm);!function(e){e.TRAINING="training",e.NO_RECRUITS="no recruits"}(my||(my={}));var Ey,by=function(e){function n(n,t,l,r,i,o){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===r&&(r=!1),void 0===i&&(i=my.NO_RECRUITS),void 0===o&&(o=1);var u=e.call(this,t,bu.TRAINING_SQUARE,n,ts.FORT.TRAINING_SQUARE,r,!0,!0,o)||this;return u.progress=l,u.status=i,u.servicesService&&(u.armyService=n.getService(Nu.ARMY)),u}return r(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,working:this.working}},n.prototype.getLine=function(e){switch(e){case Pm.FIRST:return km.emptyValue();case Pm.SECOND:return km.textValue(this.status);case Pm.THIRD:return this.status===my.TRAINING?km.progressValue(this.progress):km.emptyValue();case Pm.FOURTH:return km.emptyValue()}},n.prototype.tick=function(e){this.working&&(this.armyService.hasRecruits()?(this.status=my.TRAINING,this.progress<100&&(this.progress+=this.getPower()),this.progress>=100&&(this.progress=0,this.armyService.progressRecruitment(1))):(this.status=my.NO_RECRUITS,this.progress=0))},n}(xm),Oy=function(e){function n(n,t,l,r,i,o,u,s,a){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===r&&(r=Vm.FETCHING_INPUT),void 0===i&&(i=[]),void 0===o&&(o=[]),void 0===u&&(u=!1),void 0===s&&(s=null),void 0===a&&(a=1),e.call(this,n,t,bu.TANNERY,ts.FOREST.TANNERY,r,l,i,o,u,s,a)||this}return r(n,e),n}(Ym),Ry=function(e){function n(n,t,l,r,i,o,u){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=ts.FORT.STOCKADE.DURABILITY),void 0===r&&(r=ts.FORT.STOCKADE.DURABILITY),void 0===i&&(i=0),void 0===o&&(o=!1),void 0===u&&(u=1);var s=e.call(this,t,bu.STOCKADE,n,ts.FORT.STOCKADE,o,!0,!1,u)||this;return s.health=l,s.durability=r,s.progress=i,s.servicesService&&(s.armyService=n.getService(Nu.ARMY),s.modalService=n.getService(Nu.MODAL)),s}return r(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,health:this.health,durability:this.durability,progress:this.progress,working:this.working}},n.prototype.build=function(){return this.armyService.increaseDefense(ts.FORT.STOCKADE.DEFENSE),this},n.prototype.prepareDemolish=function(){return this.armyService.decreaseDefense(ts.FORT.STOCKADE.DEFENSE),!0},n.prototype.callback=function(e){var n=this;if("repair"===e){this.modalService.open(mu.CONFIRM),this.modalService.setModalText("Are you sure you want to repair "+this.getName()+" for 1 log for each durability point missing?");var t=this.modalService.registerForConfirmation().subscribe(function(e){e&&(n.startProduction()||n.modalService.info("No free worker to repair stockade!")),t.unsubscribe()})}else"stop"===e&&this.fireWorker()},n.prototype.getLine=function(e){switch(e){case Pm.FIRST:return km.textValue("durability: "+this.health+"/"+this.durability);case Pm.SECOND:return km.textValue("defense: "+ts.FORT.STOCKADE.DEFENSE);case Pm.THIRD:return this.health<this.durability&&!this.working?km.buttonValue("repair","repair"):this.health<this.durability&&this.working?km.buttonValue("stop repair","stop"):km.emptyValue();case Pm.FOURTH:return this.working?km.progressValue(this.progress):km.emptyValue()}},n.prototype.tick=function(e){this.working&&(this.progress<100&&(0===this.progress&&this.resourcesService.decreaseResource(vu.LOG,1,this.getName())?this.progress+=this.getPower():this.progress>0&&(this.progress+=this.getPower())),this.progress>=100&&(this.progress=0,this.health+=1),this.health===this.durability&&this.fireWorker())},n.prototype.getHappinessEffect=function(){return 0},n}(xm),Cy=function(e){function n(n,t,l,r,i,o,u,s,a){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===r&&(r=Vm.FETCHING_INPUT),void 0===i&&(i=[]),void 0===o&&(o=[]),void 0===u&&(u=!1),void 0===s&&(s=null),void 0===a&&(a=1),e.call(this,n,t,bu.COTTON_MILL,ts.FIELD.COTTON_MILL,r,l,i,o,u,s,a)||this}return r(n,e),n}(Ym),_y=function(e){function n(n,t,l,r,i,o,u,s,a){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===r&&(r=Vm.FETCHING_INPUT),void 0===i&&(i=[]),void 0===o&&(o=[]),void 0===u&&(u=!1),void 0===s&&(s=null),void 0===a&&(a=1),e.call(this,n,t,bu.TAILOR,ts.VILLAGE.TAILOR,r,l,i,o,u,s,a)||this}return r(n,e),n}(Ym),Ty=function(e){function n(n,t,l,r,i,o,u,s,a){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===r&&(r=Vm.FETCHING_INPUT),void 0===i&&(i=[]),void 0===o&&(o=[]),void 0===u&&(u=!1),void 0===s&&(s=null),void 0===a&&(a=1),e.call(this,n,t,bu.BREWERY,ts.FIELD.BREWERY,r,l,i,o,u,s,a)||this}return r(n,e),n}(Ym),Iy=function(e){function n(n,t,l,r,i,o,u){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=ts.FORT.WOODEN_TOWER.DURABILITY),void 0===r&&(r=ts.FORT.WOODEN_TOWER.DURABILITY),void 0===i&&(i=0),void 0===o&&(o=!1),void 0===u&&(u=1);var s=e.call(this,t,bu.WOODEN_TOWER,n,ts.FORT.WOODEN_TOWER,o,!0,!1,u)||this;return s.health=l,s.durability=r,s.progress=i,s.servicesService&&(s.armyService=n.getService(Nu.ARMY),s.modalService=n.getService(Nu.MODAL)),s}return r(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,health:this.health,durability:this.durability,progress:this.progress,working:this.working}},n.prototype.build=function(){return this.armyService.increaseDefense(ts.FORT.WOODEN_TOWER.DEFENSE),this},n.prototype.prepareDemolish=function(){return this.armyService.decreaseDefense(ts.FORT.WOODEN_TOWER.DEFENSE),!0},n.prototype.callback=function(e){var n=this;if("repair"===e){this.modalService.open(mu.CONFIRM),this.modalService.setModalText("Are you sure you want to repair "+this.getName()+" for 1 log for each durability point missing?");var t=this.modalService.registerForConfirmation().subscribe(function(e){e&&(n.startProduction()||n.modalService.info("No free worker to repair wooden tower!")),t.unsubscribe()})}else"stop"===e&&this.fireWorker()},n.prototype.getLine=function(e){switch(e){case Pm.FIRST:return km.textValue("durability: "+this.health+"/"+this.durability);case Pm.SECOND:return km.textValue("defense: "+ts.FORT.WOODEN_TOWER.DEFENSE);case Pm.THIRD:return this.health<this.durability&&!this.working?km.buttonValue("repair","repair"):this.health<this.durability&&this.working?km.buttonValue("stop repair","stop"):km.emptyValue();case Pm.FOURTH:return this.working?km.progressValue(this.progress):km.emptyValue()}},n.prototype.tick=function(e){this.working&&(this.progress<100&&(0===this.progress&&this.resourcesService.decreaseResource(vu.LOG,1,this.getName())?this.progress+=this.getPower():this.progress>0&&(this.progress+=this.getPower())),this.progress>=100&&(this.progress=0,this.health+=1),this.health===this.durability&&this.fireWorker())},n.prototype.getHappinessEffect=function(){return 0},n}(xm),Ay=function(e){function n(n,t,l,r,i,o,u){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=ts.FORT.STONE_TOWER.DURABILITY),void 0===r&&(r=ts.FORT.STONE_TOWER.DURABILITY),void 0===i&&(i=0),void 0===o&&(o=!1),void 0===u&&(u=1);var s=e.call(this,t,bu.STONE_TOWER,n,ts.FORT.STONE_TOWER,o,!0,!1,u)||this;return s.health=l,s.durability=r,s.progress=i,s.servicesService&&(s.armyService=n.getService(Nu.ARMY),s.modalService=n.getService(Nu.MODAL)),s}return r(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,health:this.health,durability:this.durability,progress:this.progress,working:this.working}},n.prototype.build=function(){return this.armyService.increaseDefense(ts.FORT.STONE_TOWER.DEFENSE),this},n.prototype.prepareDemolish=function(){return this.armyService.decreaseDefense(ts.FORT.STONE_TOWER.DEFENSE),!0},n.prototype.callback=function(e){var n=this;if("repair"===e){this.modalService.open(mu.CONFIRM),this.modalService.setModalText("Are you sure you want to repair "+this.getName()+" for 1 stone for each durability point missing?");var t=this.modalService.registerForConfirmation().subscribe(function(e){e&&(n.startProduction()||n.modalService.info("No free worker to repair stone tower!")),t.unsubscribe()})}else"stop"===e&&this.fireWorker()},n.prototype.getLine=function(e){switch(e){case Pm.FIRST:return km.textValue("durability: "+this.health+"/"+this.durability);case Pm.SECOND:return km.textValue("defense: "+ts.FORT.STONE_TOWER.DEFENSE);case Pm.THIRD:return this.health<this.durability&&!this.working?km.buttonValue("repair","repair"):this.health<this.durability&&this.working?km.buttonValue("stop repair","stop"):km.emptyValue();case Pm.FOURTH:return this.working?km.progressValue(this.progress):km.emptyValue()}},n.prototype.tick=function(e){this.working&&(this.progress<100&&(0===this.progress&&this.resourcesService.decreaseResource(vu.STONE,1,this.getName())?this.progress+=this.getPower():this.progress>0&&(this.progress+=this.getPower())),this.progress>=100&&(this.progress=0,this.health+=1),this.health===this.durability&&this.fireWorker())},n.prototype.getHappinessEffect=function(){return 0},n}(xm),wy=function(e){function n(n,t,l,r,i,o,u,s,a){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===r&&(r=Vm.FETCHING_INPUT),void 0===i&&(i=[]),void 0===o&&(o=[]),void 0===u&&(u=!1),void 0===s&&(s=null),void 0===a&&(a=1);var c=e.call(this,n,t,bu.WINERY,ts.FIELD.WINERY,r,l,i,o,u,s,a)||this;return n&&(c.managementService=n.getService(Nu.MANAGEMENT)),c}return r(n,e),n.prototype.tick=function(){this.managementService.getComplexWorkers()&&this.workSettings&&this.workSettings.enabled&&(this.isMet()?this.isWorking()||this.hireWorker():this.isWorking()&&this.fireWorker()),this.working&&(this.outputStorage.length>0?this.collectOutputResources():this.inputStorage.length<this.settings.INPUT_RESOURCES.length&&0===this.outputStorage.length?this.collectInputResources()&&(this.status=Vm.PREPARING):this.progress<100&&this.status===Vm.PREPARING?(this.progress+=this.getPower(),this.progress>100&&(this.progress=100)):100===this.progress&&this.status===Vm.PREPARING?(this.progress=0,this.status=Vm.PRODUCING_OUTPUT):this.progress<100&&this.status===Vm.PRODUCING_OUTPUT?(this.progress+=100/(10*zu),this.progress>=100&&(this.progress=100)):100===this.progress&&this.status===Vm.PRODUCING_OUTPUT&&(this.progress=0,this.inputStorage=[],this.outputStorage=Au.copyResourceArray(this.settings.OUTPUT_RESOURCES),this.status=Vm.TRANSPORTING_OUTPUT))},n}(Ym),Ny=function(e){function n(n,t,l,r,i,o,u){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===o&&(o=!1),void 0===u&&(u=1);var s=e.call(this,t,bu.TAVERN,n,ts.VILLAGE.TAVERN,o,!0,!0,u)||this;return s.progress=l,s.beer=r,s.wine=i,s.servicesService&&(s.resourcesService=n.getService(Nu.RESOURCES),s.happinessService=n.getService(Nu.HAPPINESS),s.managementService=n.getService(Nu.MANAGEMENT)),s}return r(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,beer:this.beer,wine:this.wine,working:this.working}},n.prototype.getLine=function(e){switch(e){case Pm.FIRST:return km.textValue(this.beer<.001&&this.wine<.001?"waiting for alcohol":this.working?"open":"closed");case Pm.SECOND:return km.emptyValue();case Pm.THIRD:return km.textValue("beer: "+Au.round(this.beer,2));case Pm.FOURTH:return km.textValue("wine: "+Au.round(this.wine,2))}},n.prototype.tick=function(e){if(this.working){this.beer<10&&this.resourcesService.decreaseResource(vu.BEER,1,this.getName())&&(this.beer+=1,this.beer>10&&(this.beer=10)),this.wine<10&&this.resourcesService.decreaseResource(vu.WINE,1,this.getName())&&(this.wine+=1,this.wine>10&&(this.wine=10));var n=this.managementService.getAlcoholRations(),t=this.resourcesService.getTotalPeople();if(this.happinessService.getHappiness()<=100&&t>1&&(this.beer>0||this.wine>0))for(var l=t;l>0;l--){var r=ku.randomBetween(0,1);0===r&&this.beer>=.01*n?(this.beer-=.01*n,this.happinessService.increaseHappiness(.01*n/t*this.getPower(),Yu.ALCOHOL_HAPPINESS_LIMIT)):1===r&&this.wine>=.01*n&&(this.wine-=.01*n,this.happinessService.increaseHappiness(.01*n/t*this.getPower(),Yu.ALCOHOL_HAPPINESS_LIMIT))}else this.happinessService.getHappiness()>75&&t>1&&this.happinessService.decreaseHappiness(.02,Yu.ALCOHOL_HAPPINESS_FLOOR)}},n}(xm),Py=function(e){function n(n,t,l,r,i){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===r&&(r=!1),void 0===i&&(i=1);var o=e.call(this,t,bu.GEOLOGIST,n,ts.MOUNTAINS.GEOLOGIST,r,!0,!0,i)||this;return o.progress=l,o.servicesService&&(o.gameService=n.getService(Nu.GAME),o.resourcesService=n.getService(Nu.RESOURCES),o.landService=n.getService(Nu.LAND)),o}return r(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,working:this.working}},n.prototype.getLine=function(e){switch(e){case Pm.FIRST:return km.textValue("looking for ores");case Pm.SECOND:return km.progressValue(this.progress);case Pm.THIRD:return km.textValue(this.lastFind?"last find: "+Au.prepareResourceName(this.lastFind)+" deposit":"last find: nothing");case Pm.FOURTH:return km.emptyValue()}},n.prototype.tick=function(e){if(this.working)if(this.progress<100)this.progress+=this.getPower(),this.progress>100&&(this.progress=100);else{var n=[];if(this.landService.getOre(vu.COAL)<50&&n.push({item:vu.COAL,chance:this.settings.COAL_CHANCE}),this.landService.getOre(vu.COPPER_ORE)<50&&n.push({item:vu.COPPER_ORE,chance:this.settings.COPPER_CHANCE}),this.landService.getOre(vu.TIN_ORE)<50&&n.push({item:vu.TIN_ORE,chance:this.settings.TIN_CHANCE}),this.gameService.isEnabled(Eu.GOLD)&&this.landService.getOre(vu.GOLD_ORE)<50&&n.push({item:vu.GOLD_ORE,chance:this.settings.GOLD_CHANCE}),this.gameService.isEnabled(Eu.SILVER)&&this.landService.getOre(vu.SILVER_ORE)<50&&n.push({item:vu.SILVER_ORE,chance:this.settings.SILVER_CHANCE}),this.gameService.isEnabled(Eu.IRON)&&this.landService.getOre(vu.IRON_ORE)<50&&n.push({item:vu.IRON_ORE,chance:this.settings.IRON_CHANCE}),n.length>0){this.progress=0;var t=ku.randomElement(n,10);t?(this.landService.increaseOre(t,1),this.lastFind=t):this.lastFind=null}}},n}(xm),Dy=function(e){function n(n,t,l,r,i,o,u,s,a){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===r&&(r=Vm.FETCHING_INPUT),void 0===i&&(i=[]),void 0===o&&(o=[]),void 0===u&&(u=!1),void 0===s&&(s=null),void 0===a&&(a=1),e.call(this,n,t,bu.STONEMASON,ts.MOUNTAINS.STONEMASON,r,l,i,o,u,s,a)||this}return r(n,e),n}(Ym),ky=function(){function e(e,n,t){void 0===e&&(e=null),void 0===n&&(n=-1),void 0===t&&(t=0),this.servicesService=e,this.sharks=t,this.buildingType=bu.SHARKS,this.id=n,this.servicesService&&(this.resourcesService=e.getService(Nu.RESOURCES),this.seaService=e.getService(Nu.SEA),this.effectsService=e.getService(Nu.EFFECTS))}return e.prototype.callback=function(e){},e.prototype.getBuildingType=function(){return this.buildingType},e.prototype.getComplexity=function(){return 0},e.prototype.getCost=function(){return new Map},e.prototype.getName=function(){return 1===this.sharks?"Shark":"Sharks"},e.prototype.getLine=function(e){switch(e){case Pm.FIRST:return km.textValue("sharks: "+this.sharks);case Pm.SECOND:case Pm.THIRD:case Pm.FOURTH:return km.emptyValue()}},e.prototype.getSize=function(){return 0},e.prototype.buildOnMountain=function(){return!1},e.prototype.tick=function(){1===ku.randomBetween(1,ts.SEA.SHARKS.FEED_CHANCE)&&(this.seaService.reduceFish(this.sharks)||(this.sharks-=ts.SEA.SHARKS.FEED_AMOUNT)),this.seaService.getFishAmount()>this.sharks*ts.SEA.SHARKS.BREED_THRESHOLD&&1===ku.randomBetween(1,ts.SEA.SHARKS.BREED_CHANCE)&&(this.sharks+=Math.floor(this.getPower())),this.seaService.getFishAmount()<this.sharks*ts.SEA.SHARKS.DIE_THRESHOLD&&1===ku.randomBetween(1,ts.SEA.SHARKS.DIE_CHANCE)&&(this.sharks-=1)},e.prototype.build=function(){return this},e.prototype.getBuildingId=function(){return this.id},e.prototype.toJSON=function(){return{id:this.id,buildingType:this.buildingType,sharks:this.sharks}},e.prototype.prepareDemolish=function(){return this.stopProduction(),!1},e.prototype.finishDemolish=function(){},e.prototype.startProduction=function(){return!1},e.prototype.stopProduction=function(){},e.prototype.isStoppable=function(){return!1},e.prototype.isWorking=function(){return!0},e.prototype.isDemolishable=function(){return!1},e.prototype.getDescription=function(){return"Sea predators"},e.prototype.fireWorker=function(){return!1},e.prototype.hireWorker=function(){return!1},e.prototype.getWorkers=function(){return 0},e.prototype.getSharks=function(){return this.sharks},e.prototype.reduceSharks=function(e){return this.sharks>=e&&(this.sharks-=e,!0)},e.prototype.getEffects=function(){return 0},e.prototype.getPermanentEffects=function(){return 0},e.prototype.getDetails=function(){return""},e.prototype.hasDetails=function(){return!1},e.prototype.getPower=function(){return 1+this.effectsService.getNatureEffectsValue()/100},e.prototype.isCombinable=function(){return!1},e.prototype.isSplittable=function(){return!1},e.prototype.getHappinessEffect=function(){return 0},e.prototype.getWeatherMultiplier=function(){return 0},e.prototype.getDisplayableEffectsValue=function(){return 0},e.prototype.hasBuff=function(){return!1},e.prototype.isBuffed=function(){return!1},e.prototype.getBuff=function(){return null},e.prototype.isComplexManagement=function(){return!1},e.prototype.getWorkSettings=function(){return null},e.prototype.hasUpgrade=function(){return!1},e.prototype.getUpgradeCost=function(){return new Map},e.prototype.setBuildingLevel=function(e){},e.prototype.getBuildingLevel=function(){return 0},e}();!function(e){e.MINING="mining {res}",e.WAITING_FOR_SELECTION="waiting for ore selection",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.NO_MORE_RESOURCES="no more {res}",e.TRANSPORTING="transporting {res}"}(Ey||(Ey={}));var My,xy=function(e){function n(n,t,l,r,i,o,u,s,a){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===r&&(r=Ey.WAITING_FOR_SELECTION),void 0===i&&(i=!1),void 0===o&&(o=0),void 0===u&&(u=200),void 0===s&&(s=vu.NOTHING),void 0===a&&(a=1);var c=e.call(this,t,bu.PIT_MINE,n,ts.MOUNTAINS.PIT_MINE,i,!0,!0,a)||this;return c.progress=l,c.status=r,c.storage=o,c.resources=u,c.ore=s,c.servicesService&&(c.modalService=n.getService(Nu.MODAL),c.landService=n.getService(Nu.LAND)),c}return r(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,working:this.working,storage:this.storage,resources:this.resources,ore:this.ore}},n.prototype.callback=function(e){var n=this;if(this.ore===vu.NOTHING)if(this.landService.hasOre(vu[String(e.target.value).replace(" ","_")],20)){this.modalService.open(mu.CONFIRM),this.modalService.setModalText("Are you sure you want to mine "+Au.prepareResourceName(vu[String(e.target.value).replace(" ","_")])+" in this mine?");var t=this.modalService.registerForConfirmation().subscribe(function(l){l?(n.landService.decreaseOre(vu[String(e.target.value).replace(" ","_")],20),n.ore=vu[String(e.target.value).replace(" ","_")],n.status=Ey.MINING,n.progress=0):e.target.selectedIndex=n.ore,t.unsubscribe()})}else this.modalService.info("Not enough "+Au.prepareResourceName(vu[String(e.target.value).replace(" ","_")])+" deposits available<br>20 "+Au.prepareResourceName(vu[String(e.target.value).replace(" ","_")])+" deposits required to start mining."),e.target.selectedIndex=this.ore},n.prototype.build=function(){return this.startProduction(),this},n.prototype.buildOnMountain=function(){return!0},n.prototype.getLine=function(e){switch(e){case Pm.FIRST:return this.ore!==vu.NOTHING?km.textValue(Au.prepareResourceName(this.ore).toLowerCase()+": "+this.resources):km.emptyValue();case Pm.SECOND:return km.textValue(this.status.replace("{res}",Au.prepareResourceName(this.ore).toLowerCase()));case Pm.THIRD:return km.progressValue(this.progress);case Pm.FOURTH:if(this.ore===vu.NOTHING){var n=[];return n.push(vu[vu.NOTHING].replace("_"," ")),n.push(vu[vu.COAL].replace("_"," ")),n.push(vu[vu.GOLD_ORE].replace("_"," ")),n.push(vu[vu.SILVER_ORE].replace("_"," ")),n.push(vu[vu.COPPER_ORE].replace("_"," ")),n.push(vu[vu.TIN_ORE].replace("_"," ")),n.push(vu[vu.IRON_ORE].replace("_"," ")),km.dropdownValue(n,vu[this.ore])}return km.emptyValue()}},n.prototype.isStoppable=function(){return this.resources>0},n.prototype.tick=function(e){if(this.ore!==vu.NOTHING){if(this.resources<=0&&(this.status=Ey.NO_MORE_RESOURCES,this.stopProduction()),!this.working)return;this.storage>0?this.resourcesService.increaseResource(this.ore,this.storage)?(this.storage=0,this.status=Ey.MINING):this.status=Ey.WAITING_FOR_WAREHOUSE_SPACE:this.progress<100?(this.status=Ey.MINING,this.progress+=this.getPower(),this.progress>100&&(this.progress=100)):100===this.progress&&(this.progress=0,this.resources-=1,this.storage=1,this.status=Ey.TRANSPORTING)}},n}(xm),Ly=function(e){return e[e.NONE=0]="NONE",e[e.COW=1]="COW",e[e.CHICKEN=2]="CHICKEN",e[e.PIG=3]="PIG",e[e.HORSE=4]="HORSE",e}({}),Fy=function(e){function n(n,t,l,r,i,o,u,s,a,c,p,h){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=ts.FIELD.PASTURE.SIZE),void 0===r&&(r=Ly.NONE),void 0===i&&(i=0),void 0===o&&(o=0),void 0===u&&(u=!0),void 0===s&&(s=0),void 0===a&&(a=0),void 0===c&&(c=0),void 0===p&&(p=!1),void 0===h&&(h=1);var d=e.call(this,t,bu.PASTURE,n,ts.FIELD.PASTURE,u,!0,!0,h)||this;return d.currentSize=l,d.animal=r,d.progress=i,d.produceProgress=o,d.animals=s,d.food=a,d.chores=c,d.autoButcher=p,d.servicesService&&(d.modalService=n.getService(Nu.MODAL),d.weatherService=n.getService(Nu.WEATHER),d.calendarService=n.getService(Nu.CALENDAR),d.fieldService=n.getService(Nu.FIELD)),d}return r(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,size:this.currentSize,animal:this.animal,progress:this.progress,produceProgress:this.produceProgress,working:this.working,animals:this.animals,food:this.food,chores:this.chores,autoButcher:this.autoButcher}},n.prototype.build=function(){return this.resourcesService.getResource(vu.CHICKEN).isVisible()||(this.resourcesService.makeVisible(vu.CHICKEN),this.logService.log("New resource discovered: "+Au.prepareResourceName(vu.CHICKEN)),this.resourcesService.makeVisible(vu.COW),this.logService.log("New resource discovered: "+Au.prepareResourceName(vu.COW)),this.resourcesService.makeVisible(vu.PIG),this.logService.log("New resource discovered: "+Au.prepareResourceName(vu.PIG)),this.resourcesService.makeVisible(vu.HORSE),this.logService.log("New resource discovered: "+Au.prepareResourceName(vu.HORSE))),this.resourcesService.updateAnimals(),e.prototype.build.call(this)},n.prototype.getSize=function(){return this.currentSize},n.prototype.getComplexity=function(){return e.prototype.getComplexity.call(this)*(this.getSize()/this.settings.SIZE)},n.prototype.findButcher=function(){return this.fieldService.getBuildings().filter(function(e){return e.getBuildingType()===bu.BUTCHER}).map(function(e){return e}).sort(function(e,n){return e.getAnimalsNumber()-n.getAnimalsNumber()})[0]},n.prototype.butcher=function(e){void 0===e&&(e=!0);var n=this.findButcher();n?n.addAnimalToButcher(this.getResourceType())&&this.decreaseAnimal(1):e||this.modalService.info("No butcher available or their work queue is full")},n.prototype.callback=function(e){var n=this;if("butcher"===e&&this.animals>0)this.butcher(!1);else if("x"===e)this.autoButcher=!this.autoButcher;else if(this.animal===Ly.NONE||0===this.animals)this.animal!==Ly.NONE&&this.resourcesService.decreaseResourceLimit(this.getResourceType(),this.getMaxAnimals()),this.animal=Ly[String(e.target.value)],this.progress=0,this.animal!==Ly.NONE&&this.resourcesService.increaseResourceLimit(this.getResourceType(),this.getMaxAnimals()),this.resourcesService.updateAnimals();else{this.modalService.open(mu.CONFIRM),this.modalService.setModalText("Are you sure you want to change animals?<br>All current animals will be moved to other pastures and if there is no enough space they will be lost");var t=this.modalService.registerForConfirmation().subscribe(function(l){l?(n.resourcesService.decreaseResourceLimit(n.getResourceType(),n.getMaxAnimals()),n.animal=Ly[String(e.target.value)],n.progress=0,n.moveAnimals(n.animals),n.animals=0,n.animal!==Ly.NONE&&n.resourcesService.increaseResourceLimit(n.getResourceType(),n.getMaxAnimals()),n.resourcesService.updateAnimals()):e.target.selectedIndex=n.animal-1,t.unsubscribe()})}},n.prototype.finishDemolish=function(){},n.prototype.prepareDemolish=function(){return this.stopProduction(),this.animal!==Ly.NONE&&(this.moveAnimals(this.animals),this.resourcesService.decreaseResourceLimit(this.getResourceType(),this.getMaxAnimals())),!0},n.prototype.getLine=function(e){switch(e){case Pm.FIRST:return this.animal!==Ly.NONE?km.textValue(Ly[this.animal].toLowerCase()+": "+this.animals+"/"+this.getMaxAnimals()):km.emptyValue();case Pm.SECOND:if(this.animals>0&&this.food<0)return km.progressValue(Math.abs(this.food),"famine");var n=[];return n.push(Ly[Ly.NONE]),n.push(Ly[Ly.CHICKEN]),n.push(Ly[Ly.COW]),n.push(Ly[Ly.PIG]),n.push(Ly[Ly.HORSE]),km.dropdownValue(n,Ly[this.animal]);case Pm.THIRD:return this.animals>0&&this.findButcher()?km.buttonCheckboxValue("butcher","butcher","auto butcher",this.autoButcher,"x"):km.emptyValue();case Pm.FOURTH:return km.emptyValue()}},n.prototype.getName=function(){return this.animal===Ly.NONE?"Pasture":Ly[this.animal].charAt(0).toUpperCase()+Ly[this.animal].slice(1).toLowerCase()+" pasture"},n.prototype.startProduction=function(){return this.working=!0,!0},n.prototype.stopProduction=function(){this.working=!1},n.prototype.tick=function(e){if(this.food<0&&this.calendarService.getSeason()!==Rg.WINTER&&(this.food=0),this.autoButcher&&this.animals>0&&this.animals===this.getMaxAnimals()&&this.butcher(),this.chores+=.05*this.animals,this.chores>100&&(this.chores=100),this.animals>0&&this.calendarService.getSeason()===Rg.WINTER?(this.food-=65e-5*this.getAnimalSettings().SIZE*this.animals,this.food<=-100&&(this.food=0,this.decreaseAnimal(1))):this.food<0&&(this.food=0),this.food>=0&&this.animals>1&&this.chores<50&&this.animals<this.getMaxAnimals()&&(this.progress<100?this.progress+=.1/(10/this.getAnimalSettings().REPRODUCTION_SPEED)*this.animals*(1+this.effectsService.getNatureEffectsValue()/100):(this.progress=0,this.increaseAnimal(1))),(this.animal===Ly.CHICKEN||this.animal===Ly.COW)&&(0===this.animals&&(this.produceProgress=0),this.produceProgress<100&&this.chores<50&&(this.produceProgress+=.1*this.animals*(1+this.effectsService.getNatureEffectsValue()/100),this.produceProgress>=100)))if(this.produceProgress=0,this.animal===Ly.CHICKEN){if(this.servicesService.getService(Nu.ROYAL).layGoldenEgg())return;this.resourcesService.increaseResource(vu.EGG,1)}else this.animal===Ly.COW&&this.resourcesService.increaseResource(vu.MILK,1)},n.prototype.work=function(e){return this.food<100&&0===this.resourcesService.hasResource(vu.HAY,1,this.getName())?(this.resourcesService.decreaseResource(vu.HAY,1,this.getName())&&(this.food+=25),!0):this.chores>=1&&(this.chores-=1,!0)},n.prototype.fireWorker=function(){return!1},n.prototype.hireWorker=function(){return!1},n.prototype.getWorkers=function(){return 0},n.prototype.hasWork=function(){return!!this.isWorking()&&(this.food<50&&0===this.resourcesService.hasResource(vu.HAY,1,this.getName())||this.chores>=1)},n.prototype.getDetails=function(){return this.animal!==Ly.NONE?"pasture size: "+Au.round(this.getSize(),0)+"<br>progress: "+Au.round(this.progress,2)+"%<br>produce progress: "+Au.round(this.produceProgress,2)+"%<br>food: "+Au.round(this.food,2)+"<br>chores: "+Au.round(this.chores,2)+"<br>"+Au.prepareResourceName(this.getResourceType()).toLowerCase()+" size: "+this.getAnimalSettings().SIZE+"<br>"+e.prototype.getDetails.call(this):e.prototype.getDetails.call(this)},n.prototype.getHappinessEffect=function(){return 0},n.prototype.isCombinable=function(){return!0},n.prototype.isSplittable=function(){return!0},n.prototype.moveAnimals=function(e){for(var n=this,t=0,l=this.fieldService.getBuildings().filter(function(e){return e.getBuildingType()===bu.PASTURE&&e!==n&&e.getAnimals()<e.getMaxAnimals()}).map(function(e){return e}).filter(function(e){return e.getResourceType()===n.getResourceType()});t<l.length;t++){for(var r=l[t];e>0&&r.getAnimals()<r.getMaxAnimals();)r.increaseAnimal(1),e-=1,this.decreaseAnimal(1);if(0===e)return}},n.prototype.getResourceType=function(){return this.animal!==Ly.NONE?vu[Ly[this.animal]]:vu.NOTHING},n.prototype.getAnimals=function(){return this.animals},n.prototype.getAnimalSettings=function(){return ls.getResource(this.getResourceType())},n.prototype.getMaxAnimals=function(){return this.getResourceType()!==vu.NOTHING?Math.floor(this.currentSize/this.getAnimalSettings().SIZE):0},n.prototype.increaseAnimal=function(e){this.animals+=e,this.resourcesService.updateAnimals()},n.prototype.decreaseAnimal=function(e){this.animals-=e,this.resourcesService.updateAnimals()},n.prototype.combine=function(e,n){var t=this;if(this.getBuildingType()===e.getBuildingType()){this.modalService.open(mu.CONFIRM),this.modalService.setModalText(" Are you sure you want to combine "+this.getName()+" of size "+this.getSize()+" with "+e.getName()+" of size "+e.getSize()+"?<br>Resulting "+this.getName()+" of size "+(this.getSize()+e.getSize())+" will keep animals");var l=this.modalService.registerForConfirmation().subscribe(function(r){l.unsubscribe(),r?(t.currentSize+=e.getSize(),e.animal===t.animal?t.increaseAnimal(e.getAnimals()):e.moveAnimals(e.getAnimals()),e.animals=0,n.finaliseCombine(!0)):n.finaliseCombine(!1),t.resourcesService.updateAnimals()})}},n.prototype.split=function(e){var t=this;this.modalService.open(mu.INPUT),this.modalService.setModalText("Set new pasture size (1-"+(this.getSize()-1)+")");var l=this.modalService.registerForValueResponse().subscribe(function(r){if(l.unsubscribe(),!isNaN(r)&&0!==r)if(r>=1&&r<t.getSize()){t.currentSize-=Number(r);var i=new n(t.servicesService,t.servicesService.getService(Nu.ID).getNextId(),Number(r)).build();e.finaliseSplit(i),i.animal=t.animal,t.animals>t.getMaxAnimals()&&(t.moveAnimals(t.animals-t.getMaxAnimals()),t.animals>t.getMaxAnimals()&&t.decreaseAnimal(t.animals-t.getMaxAnimals()))}else t.modalService.info("Invalid size value!");t.resourcesService.updateAnimals()})},n}(xm);!function(e){e.BUTCHERING="butchering {animal}",e.WAITING_FOR_ANIMALS="waiting for animals",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.TRANSPORTING="transporting meat"}(My||(My={}));var Uy,Hy=function(e){function n(n,t,l,r,i,o,u,s){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=My.WAITING_FOR_ANIMALS),void 0===r&&(r=0),void 0===i&&(i=!0),void 0===o&&(o=0),void 0===u&&(u=[]),void 0===s&&(s=1);var a=e.call(this,t,bu.BUTCHER,n,ts.FIELD.BUTCHER,i,!0,!0,s)||this;return a.status=l,a.progress=r,a.outputStorage=o,a.animals=u,a}return r(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,status:this.status,progress:this.progress,working:this.working,outputStorage:this.outputStorage,animals:this.animals}},n.prototype.getLine=function(e){switch(e){case Pm.FIRST:return km.textValue(this.animals.length>0?this.status.replace("{animal}",Au.prepareResourceName(this.animals[0])):this.status);case Pm.SECOND:return km.progressValue(this.progress);case Pm.THIRD:return km.textValue("queue: "+this.animals.length+"/10");case Pm.FOURTH:return km.emptyValue()}},n.prototype.getAnimalsNumber=function(){return this.animals.length},n.prototype.addAnimalToButcher=function(e){return this.animals.length<10&&(this.animals.push(e),!0)},n.prototype.tick=function(e){if(this.working)if(this.animals.length>0&&0===this.outputStorage)this.status=My.BUTCHERING,this.progress<100?(this.progress+=this.getPower()/ls.getResource(this.animals[0]).BUTCHERING_DIFFICULTY,this.progress>100&&(this.progress=100)):(this.status=My.TRANSPORTING,this.progress=0,this.outputStorage=ls.getResource(this.animals.shift()).MEAT,this.resourcesService.increaseResource(vu.MEAT,this.outputStorage)||(this.status=My.WAITING_FOR_WAREHOUSE_SPACE));else if(0!==this.outputStorage){var n=this.resourcesService.getResource(vu.MEAT).getFreeSpace();n>=this.outputStorage?this.resourcesService.increaseResource(vu.MEAT,this.outputStorage)&&(this.outputStorage=0,this.status=My.WAITING_FOR_ANIMALS):this.resourcesService.increaseResource(vu.MEAT,n)&&(this.outputStorage-=n)}else 0===this.animals.length&&(this.status=My.WAITING_FOR_ANIMALS)},n}(xm),Gy=function(e){function n(n,t,l,r,i,o,u,s,a){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===r&&(r=Vm.FETCHING_INPUT),void 0===i&&(i=[]),void 0===o&&(o=[]),void 0===u&&(u=!1),void 0===s&&(s=null),void 0===a&&(a=1),e.call(this,n,t,bu.MINT,ts.MOUNTAINS.MINT,r,l,i,o,u,s,a)||this}return r(n,e),n}(Ym),By=function(e){return e[e.CONSTRUCTION=0]="CONSTRUCTION",e[e.BUILT=1]="BUILT",e[e.ABDICATED=2]="ABDICATED",e[e.USED=3]="USED",e}({}),Vy=function(e){function n(n,t,l,r,i,o,u,s,a,c){var p=e.call(this,n,t,l,r,c>0,!1,!0,1)||this;return p.progress=i,p.maxProgress=o,p.stage=u,p.state=s,p.year=a,p.workers=c,p.maxWorkers=5,p.prepareIcons(),p}return r(n,e),n.prototype.toJSON=function(){return{id:this.id,buildingType:this.buildingType,progress:this.progress,maxProgress:this.maxProgress,stage:this.stage,state:this.state,year:this.year,workers:this.workers}},n.prototype.prepareIcons=function(){var e=this;this.iconsValue=[],this.settings.STAGES[this.stage]&&this.settings.STAGES[this.stage].cost.forEach(function(n){return e.iconsValue.push({name:vu[n.resource],path:"resources",prefix:n.amount,suffix:""})})},n.prototype.callback=function(e){var n=this;if("add"===e){var t=this.settings.STAGES[this.stage],l=new Map;t.cost.forEach(function(e){return l.set(e.resource,e.amount)}),this.resourcesService.decreaseResources(l,this.getName(),!0)&&(this.stage+=1,this.maxProgress+=t.progress,this.prepareIcons())}else if("abdicate"===e){this.modalService.open(mu.CONFIRM),this.modalService.setModalText("Are you sure you want to soft reset your progress? <br>You will start from the beginning and all progress except for</br>royal points, permanent royal upgrades and Wonders will be deleted.");var r=this.modalService.registerForConfirmation().subscribe(function(e){r.unsubscribe(),e&&(n.state=By.ABDICATED,n.servicesService.getService(Nu.GAME).incrementAbdicationLevel(),n.servicesService.getService(Nu.SERIALIZER).softReset())})}else"hire"===e?this.hireWorker():"fire"===e&&this.fireWorker()},n.prototype.getName=function(){return this.progress>=100?e.prototype.getName.call(this):e.prototype.getName.call(this)+" construction"},n.prototype.getLine=function(e){switch(e){case Pm.FIRST:return this.state===By.CONSTRUCTION?km.progressValue(this.progress,Au.round(this.progress,2)+"% / "+this.maxProgress+"%"):km.textValue("built in year "+this.year);case Pm.SECOND:return this.state===By.CONSTRUCTION?km.iconValue(this.iconsValue):this.state===By.BUILT?km.buttonValue(this.getAbdicationText(),"abdicate"):km.emptyValue();case Pm.THIRD:return this.maxProgress<100?km.buttonValue("add materials","add"):km.emptyValue();case Pm.FOURTH:return this.state===By.CONSTRUCTION?km.twoButtonValue("hire worker","hire",this.workers+"/"+this.maxWorkers,"fire worker","fire"):km.emptyValue()}},n.prototype.getAbdicationText=function(){return"abdicate"},n.prototype.tick=function(e){this.isWorking()&&(this.progress>=100&&(this.stopProduction(),this.addPermanentEffect(),this.progress=100,this.state=By.BUILT,this.year=this.servicesService.getService(Nu.CALENDAR).getYear(),this.getBuildingType()===bu.ASCENSION_TEMPLE&&this.servicesService.getService(Nu.LOG).mystical("As you enter the temple you have strange feeling of many eyes watching you, <br>however there is nobody there. At the end of a big hall you find a golden altar.<br>This is it, your whole life lead you here. You feel safe.")),this.progress<this.maxProgress&&(this.progress+=.001*this.getPower()*this.workers))},n.prototype.getEffects=function(){return this.state!==By.CONSTRUCTION?this.effectsService.getBuildingEffectsValue(bu.CONSTRUCTION,!1):e.prototype.getEffects.call(this)},n.prototype.getPermanentEffects=function(){return this.state!==By.CONSTRUCTION?this.effectsService.getBuildingEffectsValue(bu.CONSTRUCTION,!0):e.prototype.getPermanentEffects.call(this)},n.prototype.getHappinessEffect=function(){return this.state!==By.CONSTRUCTION?0:e.prototype.getHappinessEffect.call(this)},n.prototype.isStoppable=function(){return this.state===By.CONSTRUCTION},n.prototype.isFinished=function(){return this.state!==By.CONSTRUCTION},n.prototype.fireWorker=function(){return this.workers>0&&(this.resourcesService.fireWorker(1),this.workers-=1,!0)},n.prototype.hireWorker=function(){return!!(this.workers<this.maxWorkers&&this.resourcesService.hireWorker())&&(this.workers+=1,!0)},n.prototype.getWorkers=function(){return this.workers},n.prototype.isWorking=function(){return this.workers>0},n.prototype.startProduction=function(){if(0===this.workers){for(;this.workers<this.maxWorkers&&this.resourcesService.hireWorker();)this.workers+=1;if(this.workers>0)return!0}return!1},n.prototype.stopProduction=function(){this.workers>0&&(this.resourcesService.fireWorker(this.workers),this.workers=0)},n.prototype.addPermanentEffect=function(){this.addBuildingEffects(),this.addArmyEffects()},n.prototype.addBuildingEffects=function(){var e=this;if(this.settings.BUILDING_EFFECTS&&this.settings.BUILDING_EFFECTS.length>0){var n=this.servicesService.getService(Nu.EFFECTS);this.settings.BUILDING_EFFECTS.forEach(function(t){n.addBuildingEffect(new Du(e.getName(),t.building,Number(t.value),Hu.WONDER))})}},n.prototype.addArmyEffects=function(){var e=this;if(this.settings.ARMY_EFFECTS&&this.settings.ARMY_EFFECTS.length>0){var n=this.servicesService.getService(Nu.EFFECTS);this.settings.ARMY_EFFECTS.forEach(function(t){n.addArmyEffect(new xu(e.getName(),t.troop,Number(t.value),Hu.WONDER))})}},n.prototype.verifyWonderEffects=function(){var e=this;if(this.isFinished()){if(this.settings.BUILDING_EFFECTS){var n=this.servicesService.getService(Nu.EFFECTS);this.settings.BUILDING_EFFECTS.forEach(function(t){e.effectsService.hasBuildingEffect(e.getName(),t.building)||n.addBuildingEffect(new Du(e.getName(),t.building,Number(t.value),Hu.WONDER))})}if(this.settings.ARMY_EFFECTS){var t=this.servicesService.getService(Nu.EFFECTS);this.settings.ARMY_EFFECTS.forEach(function(n){e.effectsService.hasArmyEffect(e.getName(),n.troop)||t.addArmyEffect(new xu(e.getName(),n.troop,Number(n.value),Hu.WONDER))})}}},n}(xm),Wy=function(e){function n(n,t,l,r,i,o,u,s){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===o&&(o=By.CONSTRUCTION),void 0===u&&(u=-1),void 0===s&&(s=0),e.call(this,t,bu.STONEHENGE,n,ts.PLATEAU.STONEHENGE,l,r,i,o,u,s)||this}return r(n,e),n.prototype.tick=function(n){if(e.prototype.tick.call(this,n),this.state===By.ABDICATED){this.state=By.USED,this.servicesService.getService(Nu.GAME).enable(Eu.PLATEAU),this.servicesService.getService(Nu.ROYAL).increaseRoyalPoints(this.settings.RP),this.logService.log("Your abdication granted you "+this.settings.RP+" royal points");var t=this.servicesService.getService(Nu.KONGREGATE);t.isAvailable()&&t.submitStat("Stonehenge",!0)}},n}(Vy),jy=function(e){function n(n,t,l,r){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===r&&(r=1);var i=e.call(this,t,bu.MARKETPLACE,n,ts.VILLAGE.MARKETPLACE,!0,!0,!1,r)||this;return i.progress=l,i.callMerchantPrice=[{name:"coins",path:"resources",prefix:"",suffix:"25"}],i}return r(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress}},n.prototype.build=function(){return this.servicesService.getService(Nu.GAME).enable(Eu.MARKET),e.prototype.build.call(this)},n.prototype.callback=function(e){"bribe"===e&&(this.resourcesService.decreaseResource(vu.COINS,25,this.getName(),!0)?1===ku.randomBetween(1,2)&&(this.progress+=50,this.progress>=100&&(this.progress=0,this.servicesService.getService(Nu.MARKET).callMerchant())):this.modalService.info("Not enough coins for a bribe"))},n.prototype.getLine=function(e){switch(e){case Pm.FIRST:return km.progressValue(this.progress,"merchant arrival");case Pm.SECOND:return km.emptyValue();case Pm.THIRD:return km.iconValue(this.callMerchantPrice);case Pm.FOURTH:return km.buttonValue("bribe merchant (50% chance)","bribe")}},n.prototype.tick=function(e){1===ku.randomBetween(1,10)&&(this.progress+=this.getPower()),this.progress>=100&&(this.servicesService.getService(Nu.MARKET).callMerchant(),this.progress=0)},n}(xm),zy=function(e){function n(n,t,l){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=1);var r=e.call(this,t,bu.SMITHY,n,ts.MOUNTAINS.SMITHY,!1,!0,!1,l)||this;return n&&(r.gameService=n.getService(Nu.GAME)),r}return r(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType}},n.prototype.build=function(){var e=this;return this.settings.RECIPES.forEach(function(n){e.gameService.isEnabled(n.prerequisite)&&e.servicesService.getService(Nu.RECIPE).enable(n.recipe)}),this.gameService.enable(Eu.BUILT_SMITHY),this},n.prototype.prepareDemolish=function(){var e=this;return this.settings.RECIPES.forEach(function(n){return e.servicesService.getService(Nu.RECIPE).disable(n.recipe)}),this.gameService.disable(Eu.BUILT_SMITHY),this.servicesService.getService(Nu.CRAFTING).filterQueue(this.settings.RECIPES),this.servicesService.getService(Nu.VILLAGE).buildings.filter(function(e){return e.getBuildingType()===bu.WORKSHOP}).map(function(e){return e}).forEach(function(n){n.getRecipe()&&e.settings.RECIPES.includes(n.getRecipe().id)&&n.cancelCrafting()}),this.servicesService.getService(Nu.VILLAGE).buildings.filter(function(e){return e.getBuildingType()===bu.MANUFACTURE}).map(function(e){return e}).forEach(function(n){n.getRecipe()&&e.settings.RECIPES.includes(n.getRecipe().id)&&n.cancelCrafting()}),!0},n}(xm),Yy=function(e){function n(n,t,l,r,i){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=!1),void 0===r&&(r=0),void 0===i&&(i=1);var o=e.call(this,t,bu.CHURCH,n,ts.VILLAGE.CHURCH,l,!0,!0,i)||this;return o.progress=r,o.servicesService&&(o.religionService=n.getService(Nu.RELIGION)),o}return r(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,working:this.working,progress:this.progress}},n.prototype.build=function(){return this.religionService.increaseFaithCap(50),this.servicesService.getService(Nu.GAME).enable(Eu.RELIGION),this},n.prototype.getLine=function(e){switch(e){case Pm.FIRST:case Pm.SECOND:return km.emptyValue();case Pm.THIRD:return km.progressValue(this.progress,"prayers");case Pm.FOURTH:return km.emptyValue()}},n.prototype.prepareDemolish=function(){return this.religionService.decreaseFaithCap(50),!0},n.prototype.tick=function(e){if(this.working){var n=this.servicesService.getService(Nu.VILLAGE).getPopulation();this.progress+=.1*n*this.getPower(),this.progress>100&&(this.progress=0,this.religionService.increaseFaith(1))}},n}(xm),Ky=function(e){function n(n,t,l,r,i,o,u,s){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===o&&(o=By.CONSTRUCTION),void 0===u&&(u=-1),void 0===s&&(s=0),e.call(this,t,bu.PYRAMID,n,ts.PLATEAU.PYRAMID,l,r,i,o,u,s)||this}return r(n,e),n.prototype.tick=function(n){if(e.prototype.tick.call(this,n),this.state===By.ABDICATED){this.state=By.USED,this.servicesService.getService(Nu.GAME).enable(Eu.PLATEAU),this.servicesService.getService(Nu.ROYAL).increaseRoyalPoints(this.settings.RP),this.logService.log("Your abdication granted you "+this.settings.RP+" royal points");var t=this.servicesService.getService(Nu.KONGREGATE);t.isAvailable()&&t.submitStat("Pyramid",!0)}},n}(Vy),qy=function(e){function n(n,t,l,r,i,o,u,s){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===o&&(o=By.CONSTRUCTION),void 0===u&&(u=-1),void 0===s&&(s=0),e.call(this,t,bu.HANGING_GARDEN,n,ts.PLATEAU.HANGING_GARDEN,l,r,i,o,u,s)||this}return r(n,e),n.prototype.tick=function(n){if(e.prototype.tick.call(this,n),this.state===By.ABDICATED){this.state=By.USED,this.servicesService.getService(Nu.GAME).enable(Eu.PLATEAU),this.servicesService.getService(Nu.ROYAL).increaseRoyalPoints(this.settings.RP),this.logService.log("Your abdication granted you "+this.settings.RP+" royal points");var t=this.servicesService.getService(Nu.KONGREGATE);t.isAvailable()&&t.submitStat("Hanging Garden",!0)}},n}(Vy),$y=function(e){function n(n,t,l,r,i,o,u,s){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===o&&(o=By.CONSTRUCTION),void 0===u&&(u=-1),void 0===s&&(s=0),e.call(this,t,bu.COLOSSUS,n,ts.PLATEAU.COLOSSUS,l,r,i,o,u,s)||this}return r(n,e),n.prototype.tick=function(n){if(e.prototype.tick.call(this,n),this.state===By.ABDICATED){this.state=By.USED,this.servicesService.getService(Nu.GAME).enable(Eu.PLATEAU),this.servicesService.getService(Nu.ROYAL).increaseRoyalPoints(this.settings.RP),this.logService.log("Your abdication granted you "+this.settings.RP+" royal points");var t=this.servicesService.getService(Nu.KONGREGATE);t.isAvailable()&&t.submitStat("Colossus",!0)}},n}(Vy),Qy=function(e){function n(n,t,l,r,i,o,u,s){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===o&&(o=By.CONSTRUCTION),void 0===u&&(u=-1),void 0===s&&(s=0),e.call(this,t,bu.ASCENSION_TEMPLE,n,ts.PLATEAU.ASCENSION_TEMPLE,l,r,i,o,u,s)||this}return r(n,e),n.prototype.callback=function(n){var t=this;if("abdicate"===n){this.modalService.open(mu.CONFIRM),this.modalService.setModalText("Are you sure you want to ascend? <br>You will start from the beginning and all progress except for</br>royal points and permanent royal upgrades will be deleted.");var l=this.modalService.registerForConfirmation().subscribe(function(e){if(l.unsubscribe(),e){t.state=By.ABDICATED,t.servicesService.getService(Nu.ROYAL).increaseRoyalPoints(t.settings.RP),t.logService.mystical("Your ascension granted you "+t.settings.RP+" royal points");var n=t.servicesService.getService(Nu.KONGREGATE);n.isAvailable()&&n.submitStat("Ascension Temple",!0),t.servicesService.getService(Nu.SERIALIZER).ascensionReset()}})}else e.prototype.callback.call(this,n)},n.prototype.getAbdicationText=function(){return"ascend"},n}(Vy),Zy=function(e){function n(n,t,l,r,i,o,u,s){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===o&&(o=By.CONSTRUCTION),void 0===u&&(u=-1),void 0===s&&(s=0),e.call(this,t,bu.UNDERGROUND_CITY,n,ts.PLATEAU.UNDERGROUND_CITY,l,r,i,o,u,s)||this}return r(n,e),n.prototype.tick=function(n){if(e.prototype.tick.call(this,n),this.state===By.ABDICATED){this.state=By.USED,this.servicesService.getService(Nu.GAME).enable(Eu.PLATEAU),this.servicesService.getService(Nu.ROYAL).increaseRoyalPoints(this.settings.RP),this.logService.log("Your abdication granted you "+this.settings.RP+" royal points");var t=this.servicesService.getService(Nu.KONGREGATE);t.isAvailable()&&t.submitStat("Underground City",!0)}},n}(Vy),Xy=function(e){function n(n,t,l,r,i,o,u,s){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===o&&(o=By.CONSTRUCTION),void 0===u&&(u=-1),void 0===s&&(s=0),e.call(this,t,bu.GREAT_LIGHTHOUSE,n,ts.PLATEAU.GREAT_LIGHTHOUSE,l,r,i,o,u,s)||this}return r(n,e),n.prototype.tick=function(n){if(e.prototype.tick.call(this,n),this.state===By.ABDICATED){this.state=By.USED,this.servicesService.getService(Nu.GAME).enable(Eu.PLATEAU),this.servicesService.getService(Nu.ROYAL).increaseRoyalPoints(this.settings.RP),this.logService.log("Your abdication granted you "+this.settings.RP+" royal points");var t=this.servicesService.getService(Nu.KONGREGATE);t.isAvailable()&&t.submitStat("Great Lighthouse",!0)}},n}(Vy),Jy=function(e){function n(n,t,l,r,i,o,u,s){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===o&&(o=By.CONSTRUCTION),void 0===u&&(u=-1),void 0===s&&(s=0),e.call(this,t,bu.SACRED_GROVE,n,ts.PLATEAU.SACRED_GROVE,l,r,i,o,u,s)||this}return r(n,e),n.prototype.tick=function(n){if(e.prototype.tick.call(this,n),this.state===By.ABDICATED){this.state=By.USED,this.servicesService.getService(Nu.GAME).enable(Eu.PLATEAU),this.servicesService.getService(Nu.ROYAL).increaseRoyalPoints(this.settings.RP),this.logService.log("Your abdication granted you "+this.settings.RP+" royal points");var t=this.servicesService.getService(Nu.KONGREGATE);t.isAvailable()&&t.submitStat("Sacred Grove",!0)}},n}(Vy),eS=function(e){function n(n,t,l){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=1);var r=e.call(this,t,bu.STASH,n,ts.FORT.STASH,!1,!0,!1,l)||this;return r.servicesService&&(r.armyService=n.getService(Nu.ARMY)),r}return r(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType}},n.prototype.build=function(){return this.armyService.increaseStash(ts.FORT.STASH.SIZE),this},n.prototype.prepareDemolish=function(){return this.armyService.decreaseStash(ts.FORT.STASH.SIZE),!0},n.prototype.getLine=function(e){switch(e){case Pm.FIRST:return km.textValue("stash size: "+ts.FORT.STASH.SIZE);case Pm.SECOND:case Pm.THIRD:case Pm.FOURTH:return km.emptyValue()}},n}(xm),nS=function(){function e(e){this.servicesService=e,this.nextId=1,e.addService(Nu.ID,this)}return e.prototype.getNextId=function(){var e=this.nextId;return this.nextId+=1,e},e.prototype.load=function(e){this.nextId=e.nextId},e.prototype.reset=function(e,n){e&&(this.nextId=1)},e.prototype.save=function(){return{nextId:this.nextId}},e.ngInjectableDef=ve({factory:function(){return new e(Ye(Sg))},token:e,providedIn:"root"}),e}();!function(e){e.CRAFTING="crafting {craft}",e.WAITING_FOR_RESOURCES="waiting for resources",e.WAITING_FOR_WAREHOUSE="waiting for warehouse space",e.NO_CRAFTING="no crafting recipe",e.PRODUCTION_SETUP="production setup",e.FETCHING_MATERIALS="fetching materials",e.TRANSPORTING="transporting goods"}(Uy||(Uy={}));var tS=function(e){function n(n,t,l,r,i,o,u,s){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===r&&(r=Uy.NO_CRAFTING),void 0===i&&(i=!1),void 0===o&&(o=-1),void 0===u&&(u=1),void 0===s&&(s=0);var a=e.call(this,t,bu.MANUFACTURE,n,ts.VILLAGE.MANUFACTURE,i,!0,!0,u)||this;return a.progress=l,a.status=r,a.storage=s,a.recipe=null,a.iconsValue=[],n&&(a.resourcesService=n.getService(Nu.RESOURCES),a.modalService=n.getService(Nu.MODAL),a.recipeService=n.getService(Nu.RECIPE),o>=0&&(a.recipe=a.recipeService.getRecipeById(o),a.prepareIcons())),a}return r(n,e),n.prototype.prepareIcons=function(){var e=this;this.iconsValue=[],this.recipe&&Array.from(this.recipe.cost.entries()).forEach(function(n){e.iconsValue.push({name:vu[n[0]],path:"resources",prefix:n[1],suffix:""})})},n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,working:this.working,recipe:null!==this.recipe?this.recipe.id:-1,storage:this.storage}},n.prototype.build=function(){return this.startProduction(),this},n.prototype.prepareDemolish=function(){return e.prototype.prepareDemolish.call(this)},n.prototype.callback=function(e){var n=this;if("select"===e){this.modalService.open(mu.RECIPE);var t=this.modalService.registerForValueResponse().subscribe(function(e){t.unsubscribe(),null!==e&&(n.recipe=n.recipeService.getRecipeById(e),n.prepareIcons(),n.status=Uy.PRODUCTION_SETUP)})}else if("change"===e){this.modalService.open(mu.CONFIRM),this.modalService.setModalText("Are you sure you want to change production recipe?");var l=this.modalService.registerForConfirmation().subscribe(function(e){if(l.unsubscribe(),e){n.modalService.open(mu.RECIPE),n.modalService.setModalValue(n.recipe.id);var t=n.modalService.registerForValueResponse().subscribe(function(e){t.unsubscribe(),null!==e&&(n.progress=0,n.recipe=n.recipeService.getRecipeById(e),n.prepareIcons(),n.status=Uy.PRODUCTION_SETUP)})}})}},n.prototype.getLine=function(e){switch(e){case Pm.FIRST:return km.textValue(this.recipe?this.status.replace("{craft}",Au.prepareResourceName(this.recipe.resource)):this.status);case Pm.SECOND:return km.progressValue(this.progress);case Pm.THIRD:return this.recipe?km.iconValue(this.iconsValue):km.emptyValue();case Pm.FOURTH:return null===this.recipe?km.buttonValue("select recipe","select"):km.buttonValue(Au.prepareResourceName(this.recipe.resource),"change")}},n.prototype.tick=function(e){if(this.working)if(this.status===Uy.PRODUCTION_SETUP)this.progress<100?(this.progress+=.5*this.getPower()/this.recipe.craftingDifficulty,this.progress>100&&(this.progress=100)):(this.progress=0,this.status=Uy.FETCHING_MATERIALS);else if(this.status===Uy.CRAFTING)this.progress<100?(this.progress+=this.getPower()/this.recipe.craftingDifficulty*ts.VILLAGE.MANUFACTURE.CRAFTING_POWER,this.progress>100&&(this.progress=100)):(this.progress=0,this.storage=this.recipe.amount,this.status=Uy.TRANSPORTING);else if(this.status===Uy.FETCHING_MATERIALS||this.status===Uy.WAITING_FOR_RESOURCES)this.resourcesService.decreaseResources(this.recipe.cost,this.getName(),!1,1,!0)&&(this.status=Uy.CRAFTING);else if(this.status===Uy.TRANSPORTING||this.status===Uy.WAITING_FOR_WAREHOUSE){var n=this.resourcesService.getLimit(this.recipe.resource);this.storage>n?(this.storage-=n,this.resourcesService.increaseResource(this.recipe.resource,n),this.status=Uy.WAITING_FOR_WAREHOUSE):this.resourcesService.increaseResource(this.recipe.resource,this.storage)&&(this.status=Uy.FETCHING_MATERIALS)}},n.prototype.getRecipe=function(){return this.recipe},n.prototype.cancelCrafting=function(){this.recipe=null,this.progress=0,this.status=Uy.NO_CRAFTING},n}(xm),lS=function(){function e(e,n){this.servicesService=e,this.idService=n,e.addService(Nu.BUILDING_FACTORY,this)}return e.prototype.loadBuilding=function(e){return e.buildingType===bu.HUT?new Fm(this.servicesService,e.id,e.occupants,e.progress,e.food,e.fuel,e.clothes,e.level):e.buildingType===bu.HOUSE?new Um(this.servicesService,e.id,e.occupants,e.progress,e.food,e.fuel,e.clothes,e.level):e.buildingType===bu.BAKERY?new vy(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===bu.TAILOR?new _y(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===bu.WORKSHOP?new ty(this.servicesService,e.id,e.progress,e.status,e.mode,e.working,e.recipe,e.level,void 0!==e.storage?e.storage:0):e.buildingType===bu.MANUFACTURE?new tS(this.servicesService,e.id,e.progress,e.status,e.working,e.recipe,e.level,e.storage):e.buildingType===bu.WAREHOUSE?new ly(this.servicesService,e.id,e.resource,e.level):e.buildingType===bu.MARKETPLACE?new jy(this.servicesService,e.id,e.progress,e.level):e.buildingType===bu.TAVERN?new Ny(this.servicesService,e.id,e.progress,e.beer,e.wine,e.working,e.level):e.buildingType===bu.SHRINE?new uy(this.servicesService,e.id,e.progress,e.level):e.buildingType===bu.CHURCH?new Yy(this.servicesService,e.id,e.working,e.progress,e.level):e.buildingType===bu.BARRACKS?new Sy(this.servicesService,e.id,e.barracksSize,e.level):e.buildingType===bu.TRAINING_SQUARE?new by(this.servicesService,e.id,e.progress,e.working,e.status,e.level):e.buildingType===bu.STOCKADE?new Ry(this.servicesService,e.id,e.health,e.durability,e.progress,e.working,e.level):e.buildingType===bu.WOODEN_TOWER?new Iy(this.servicesService,e.id,e.health,e.durability,e.progress,e.working,e.level):e.buildingType===bu.STONE_TOWER?new Ay(this.servicesService,e.id,e.health,e.durability,e.progress,e.working,e.level):e.buildingType===bu.STASH?new eS(this.servicesService,e.id,e.level):e.buildingType===bu.LOGGERS_HUT?new Gm(this.servicesService,e.id,e.progress,e.localStorage,e.status,e.working,e.level):e.buildingType===bu.GATHERER?new Zm(this.servicesService,e.id,e.progress,e.status,e.working,e.mode,e.storage,e.level):e.buildingType===bu.HUNTER_LODGE?new oy(this.servicesService,e.id,e.progress,e.status,e.mode,e.working,e.storage,e.storage2,e.animal,e.level):e.buildingType===bu.TANNERY?new Oy(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===bu.FORESTER?new Wm(this.servicesService,e.id,e.progress,e.localStorage,e.status,e.effectiveness,e.working,e.level):e.buildingType===bu.SAWMILL?new Km(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===bu.FARM?new cy(this.servicesService,e.id,e.workers,e.maxWorkers,e.level):e.buildingType===bu.WINDMILL?new gy(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===bu.BUTCHER?new Hy(this.servicesService,e.id,e.status,e.progress,e.working,e.outputStorage,e.animals,e.level):e.buildingType===bu.COTTON_MILL?new Cy(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===bu.BREWERY?new Ty(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===bu.WINERY?new wy(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===bu.FIELD?new hy(this.servicesService,e.id,e.size,e.crop,e.status,e.progress,e.working,e.growth,e.level):e.buildingType===bu.ORCHARD?new fy(this.servicesService,e.id,e.size,e.crop,e.status,e.progress,e.working,e.growth,e.level):e.buildingType===bu.PASTURE?new Fy(this.servicesService,e.id,e.size,e.animal,e.progress,e.produceProgress,e.working,e.animals,e.food,e.chores,e.autoButcher,e.level):e.buildingType===bu.QUARRY?new Jm(this.servicesService,e.id,e.progress,e.status,e.working,e.storage,e.resources,e.level):e.buildingType===bu.GEOLOGIST?new Py(this.servicesService,e.id,e.progress,e.working,e.level):e.buildingType===bu.STONEMASON?new Dy(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===bu.MINT?new Gy(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===bu.SMITHY?new zy(this.servicesService,e.id,e.level):e.buildingType===bu.PIT_MINE?new xy(this.servicesService,e.id,e.progress,e.status,e.working,e.storage,e.resources,e.ore,e.level):e.buildingType===bu.STONEHENGE?new Wy(this.servicesService,e.id,e.progress,e.maxProgress,e.stage,e.state,e.year,e.workers):e.buildingType===bu.PYRAMID?new Ky(this.servicesService,e.id,e.progress,e.maxProgress,e.stage,e.state,e.year,e.workers):e.buildingType===bu.HANGING_GARDEN?new qy(this.servicesService,e.id,e.progress,e.maxProgress,e.stage,e.state,e.year,e.workers):e.buildingType===bu.COLOSSUS?new $y(this.servicesService,e.id,e.progress,e.maxProgress,e.stage,e.state,e.year,e.workers):e.buildingType===bu.UNDERGROUND_CITY?new Zy(this.servicesService,e.id,e.progress,e.maxProgress,e.stage,e.state,e.year,e.workers):e.buildingType===bu.GREAT_LIGHTHOUSE?new Xy(this.servicesService,e.id,e.progress,e.maxProgress,e.stage,e.state,e.year,e.workers):e.buildingType===bu.SACRED_GROVE?new Jy(this.servicesService,e.id,e.progress,e.maxProgress,e.stage,e.state,e.year,e.workers):e.buildingType===bu.ASCENSION_TEMPLE?new Qy(this.servicesService,e.id,e.progress,e.maxProgress,e.stage,e.state,e.year,e.workers):e.buildingType===bu.FISHERS_HUT?new yy(this.servicesService,e.id,e.progress,e.status,e.working,e.level):e.buildingType===bu.SCHOOL_OF_FISH?new sy(this.servicesService,e.id,e.fish,void 0!==e.food?e.food:0):e.buildingType===bu.SHARKS?new ky(this.servicesService,e.id,e.sharks):e.buildingType===bu.CONSTRUCTION?new Bm(this.servicesService,e.id,e.region,e.constructing,e.buildingComplexity,e.buildingSize,e.upgradeLevel,e.progress,e.working):e.buildingType===bu.DECONSTRUCTION?new qm(this.servicesService,e.id,e.region,e.deconstructing,e.buildingComplexity,e.buildingSize,e.progress,e.working):void console.error("Couldn't load building of type ["+e.buildingType+"]")},e.prototype.createBuilding=function(e,n){return void 0===n&&(n=this.idService.getNextId()),this.createBuildingShell(e,n).build()},e.prototype.createBuildingShell=function(e,n){switch(void 0===n&&(n=this.idService.getNextId()),e){case bu.HUT:return new Fm(this.servicesService);case bu.HOUSE:return new Um(this.servicesService,n);case bu.BAKERY:return new vy(this.servicesService,n);case bu.TAILOR:return new _y(this.servicesService,n);case bu.WORKSHOP:return new ty(this.servicesService,n);case bu.MANUFACTURE:return new tS(this.servicesService,n);case bu.WAREHOUSE:return new ly(this.servicesService,n);case bu.MARKETPLACE:return new jy(this.servicesService,n);case bu.TAVERN:return new Ny(this.servicesService,n);case bu.SHRINE:return new uy(this.servicesService,n);case bu.CHURCH:return new Yy(this.servicesService,n);case bu.BARRACKS:return new Sy(this.servicesService,n);case bu.TRAINING_SQUARE:return new by(this.servicesService,n);case bu.STOCKADE:return new Ry(this.servicesService,n);case bu.WOODEN_TOWER:return new Iy(this.servicesService,n);case bu.STONE_TOWER:return new Ay(this.servicesService,n);case bu.STASH:return new eS(this.servicesService,n);case bu.LOGGERS_HUT:return new Gm(this.servicesService,n);case bu.GATHERER:return new Zm(this.servicesService,n);case bu.HUNTER_LODGE:return new oy(this.servicesService,n);case bu.TANNERY:return new Oy(this.servicesService,n);case bu.FORESTER:return new Wm(this.servicesService,n);case bu.SAWMILL:return new Km(this.servicesService,n);case bu.FARM:return new cy(this.servicesService,n);case bu.WINDMILL:return new gy(this.servicesService,n);case bu.BUTCHER:return new Hy(this.servicesService,n);case bu.COTTON_MILL:return new Cy(this.servicesService,n);case bu.BREWERY:return new Ty(this.servicesService,n);case bu.WINERY:return new wy(this.servicesService,n);case bu.FIELD:return new hy(this.servicesService,n);case bu.ORCHARD:return new fy(this.servicesService,n);case bu.PASTURE:return new Fy(this.servicesService,n);case bu.QUARRY:return new Jm(this.servicesService,n);case bu.GEOLOGIST:return new Py(this.servicesService,n);case bu.STONEMASON:return new Dy(this.servicesService,n);case bu.MINT:return new Gy(this.servicesService,n);case bu.SMITHY:return new zy(this.servicesService,n);case bu.PIT_MINE:return new xy(this.servicesService,n);case bu.STONEHENGE:return new Wy(this.servicesService,n);case bu.PYRAMID:return new Ky(this.servicesService,n);case bu.HANGING_GARDEN:return new qy(this.servicesService,n);case bu.COLOSSUS:return new $y(this.servicesService,n);case bu.UNDERGROUND_CITY:return new Zy(this.servicesService,n);case bu.GREAT_LIGHTHOUSE:return new Xy(this.servicesService,n);case bu.SACRED_GROVE:return new Jy(this.servicesService,n);case bu.ASCENSION_TEMPLE:return new Qy(this.servicesService,n);case bu.FISHERS_HUT:return new yy(this.servicesService,n);case bu.SCHOOL_OF_FISH:return new sy(this.servicesService,n);case bu.SHARKS:return new ky(this.servicesService,n);case bu.CONSTRUCTION:console.error("Building factory cannot create construction sites!");break;case bu.DECONSTRUCTION:console.error("Building factory cannot create deconstruction sites!");break;default:console.error("Couldn't construct building of type ["+bu[e]+"]!")}},e.ngInjectableDef=ve({factory:function(){return new e(Ye(Sg),Ye(nS))},token:e,providedIn:"root"}),e}(),rS=function(){function e(e,n,t){var l=this;this.servicesService=e,this.calendarService=n,this.logService=t,this.buildingEffects=[],this.natureEffects=[],this.armyEffects=[],e.addService(Nu.EFFECTS,this),this.daySubscription=n.registerForDayChange().subscribe(function(e){l.buildingEffects.forEach(function(e){e.duration>0&&(e.duration-=1)}),l.armyEffects.forEach(function(e){e.duration>0&&(e.duration-=1)}),l.natureEffects.forEach(function(e){e.duration>0&&(e.duration-=1)})})}return e.prototype.load=function(e){var n=this;this.buildingEffects=[],e.buildingEffects.forEach(function(e){n.buildingEffects.push(new Du(e.name,e.building,e.effect,e.duration))}),this.armyEffects=[],e.armyEffects.forEach(function(e){n.armyEffects.push(new xu(e.name,e.troop,e.effect,e.duration))}),this.natureEffects=[],e.natureEffects.forEach(function(e){n.natureEffects.push(new Uu(e.name,e.effect,e.duration))})},e.prototype.save=function(){return{buildingEffects:this.buildingEffects,armyEffects:this.armyEffects,natureEffects:this.natureEffects}},e.prototype.reset=function(e,n){e?(this.buildingEffects=[],this.armyEffects=[],this.natureEffects=[]):n?(this.buildingEffects=this.buildingEffects.filter(function(e){return e.isRoyal()}),this.armyEffects=this.armyEffects.filter(function(e){return e.isRoyal()}),this.natureEffects=this.natureEffects.filter(function(e){return e.isRoyal()})):(this.buildingEffects=this.buildingEffects.filter(function(e){return e.isRoyal()||e.isWonder()}),this.armyEffects=this.armyEffects.filter(function(e){return e.isRoyal()||e.isWonder()}),this.natureEffects=this.natureEffects.filter(function(e){return e.isRoyal()||e.isWonder()}))},e.prototype.tick=function(e){this.buildingEffects=this.buildingEffects.filter(function(e){return 0!==e.duration}),this.armyEffects=this.armyEffects.filter(function(e){return 0!==e.duration}),this.natureEffects=this.natureEffects.filter(function(e){return 0!==e.duration})},e.prototype.getBuildingEffectsValue=function(e,n,t){void 0===n&&(n=!1),void 0===t&&(t=-1);var l=0;return t>0?this.buildingEffects.filter(function(n){return n.building===e||n.building===bu.ALL}).filter(function(e){return e.isPermanent()===n}).filter(function(e){return!e.isBuff()||e.isBuff()&&e.buff===t}).forEach(function(e){return l+=e.effect}):this.buildingEffects.filter(function(n){return n.building===e||n.building===bu.ALL}).filter(function(e){return e.isPermanent()===n}).forEach(function(e){return l+=e.effect}),l},e.prototype.getBuildingEffects=function(e,n){return void 0===n&&(n=-1),e?n>0?this.buildingEffects.filter(function(n){return n.building===e||n.building===bu.ALL}).filter(function(e){return e.buff===n}):this.buildingEffects.filter(function(n){return n.building===e||n.building===bu.ALL}):this.buildingEffects},e.prototype.hasWonderEffects=function(e){return this.buildingEffects.filter(function(n){return n.name===e}).length>0||this.armyEffects.filter(function(n){return n.name===e}).length>0||this.natureEffects.filter(function(n){return n.name===e}).length>0},e.prototype.getNatureEffectsValue=function(){var e=0;return this.natureEffects.forEach(function(n){return e+=n.effect}),e},e.prototype.getNatureEffects=function(){return this.natureEffects},e.prototype.addNatureEffect=function(e,n){if(void 0===n&&(n=!0),this.natureEffects.push(e),n){var t=e.name;e.isPermanent()?t+=" will permanently affect ":t+=" will affect ",t+="most natural sources with ",t+=e.effect>0?"+"+e.effect+"%":e.effect+"%",t+=" of their base power",e.isPermanent()||(t+=" for "+e.duration+" days"),this.logService.log(t)}},e.prototype.addBuildingEffect=function(e,n){if(void 0===n&&(n=!0),this.buildingEffects.push(e),n){var t=e.name;e.isPermanent()?t+=" will permanently affect ":t+=" will affect ",t+=e.building===bu.ALL?"all buildings with ":Au.prepareBuildingName(e.building)+" with ",t+=e.effect>0?"+"+e.effect+"%":e.effect+"%",t+=e.building===bu.ALL?" of their base power":" of its base power",e.isPermanent()||(t+=" for "+e.duration+" days"),this.logService.log(t)}},e.prototype.addArmyEffect=function(e,n){if(void 0===n&&(n=!0),this.armyEffects.push(e),n){var t=e.name;e.isPermanent()?t+=" will permanently affect ":t+=" will affect ",t+=e.troop===Iu.ALL?"all troops with ":Au.prepareTroopName(e.troop)+" with ",t+=e.effect>0?"+"+e.effect+"%":e.effect+"%",t+=" of their base strength and defense",e.isPermanent()||(t+=" for "+e.duration+" days"),this.logService.log(t)}},e.prototype.getArmyEffects=function(){return this.armyEffects},e.prototype.hasBuildingEffect=function(e,n){return void 0!==this.buildingEffects.find(function(t){return t.name===e&&t.building===n})},e.prototype.hasArmyEffect=function(e,n){return void 0!==this.armyEffects.find(function(t){return t.name===e&&t.troop===n})},e.ngInjectableDef=ve({factory:function(){return new e(Ye(Sg),Ye(_g),Ye(Tg))},token:e,providedIn:"root"}),e}(),iS=function(){return function(e,n,t,l,r){this.forestSizeRule=e,this.forestSizeRuleEnabled=n,this.landSizeRule=t,this.landSizeRuleEnabled=l,this.forestSizeReserved=r}}(),oS=function(){function e(e,n,t){this.servicesService=e,this.effectsService=n,this.logService=t,this.land=ns.START_LAND,this.forest=ns.START_FOREST,this.mountains=ns.START_MOUNTAINS,this.takenLand=0,this.ores=[[vu.COAL,0],[vu.GOLD_ORE,0],[vu.SILVER_ORE,0],[vu.COPPER_ORE,0],[vu.TIN_ORE,0],[vu.IRON_ORE,0]],this.forestGrowTick=0,this.forestGrowTicks=ns.FOREST_GROW_TICKS,this.forestGrowPercentage=ns.FOREST_GROW_PERCENTAGE,this.forestOptions=new iS(0,!1,25,!0,0),this.servicesService.addService(Nu.LAND,this)}return e.prototype.load=function(e){this.land=e.land,this.forest=e.forest,this.mountains=e.mountains,this.forestGrowTick=e.forestGrowTick,this.takenLand=e.takenLand,e.forestLandLimit&&(this.forestOptions=new iS(0,!1,e.forestLandLimit,!0,0)),e.forestOptions&&(this.forestOptions=e.forestOptions),this.ores=e.ores},e.prototype.save=function(){return{land:this.land,forest:this.forest,mountains:this.mountains,forestGrowTick:this.forestGrowTick,takenLand:this.takenLand,forestOptions:this.forestOptions,ores:this.ores}},e.prototype.reset=function(e,n){this.land=ns.START_LAND,this.forest=ns.START_FOREST,this.mountains=ns.START_MOUNTAINS,this.takenLand=0,this.forestOptions=new iS(0,!1,25,!0,0),this.ores=[[vu.COAL,0],[vu.GOLD_ORE,0],[vu.SILVER_ORE,0],[vu.COPPER_ORE,0],[vu.TIN_ORE,0],[vu.IRON_ORE,0]]},e.prototype.tick=function(e){this.growForest()},e.prototype.growForest=function(){if(this.forestGrowTick<this.forestGrowTicks&&(this.forestGrowTick+=1),this.forestGrowTick===this.forestGrowTicks){var e=Math.floor(this.forestGrowPercentage*this.forest*(1+this.effectsService.getNatureEffectsValue()/100));e<ns.MINIMAL_FOREST_GROWTH&&(e=ns.MINIMAL_FOREST_GROWTH),this.increaseForest(e),this.forestGrowTick=0}},e.prototype.reduceForest=function(e){var n=this.forest;return this.forest-e>=this.forestOptions.forestSizeReserved&&(this.forest-=e,this.land+=e,n>=500&&this.forest<500&&this.logService.warning("There are less than 500 trees in the forest!"),n>=300&&this.forest<300&&this.logService.warning("There are less than 300 trees in the forest!"),n>=100&&this.forest<100&&(this.logService.warning("Critical forest size!"),this.logService.warning("There are less than 100 trees in the forest!")),!0)},e.prototype.increaseForest=function(e,n){if(void 0===n&&(n=!0),n){var t=0;this.forestOptions.landSizeRuleEnabled&&(t=this.forestOptions.landSizeRule),t<0&&(t=0);var l=this.land-t;return l<0&&(l=0),l-e>=0?(this.forest+=e,this.land-=e,0):(this.forest+=l,this.land-=l,e-l)}return this.forest+=e,0},e.prototype.reduceLand=function(e){var n=0;return this.forestOptions.landSizeRuleEnabled&&(n=this.forestOptions.landSizeRule),n<0&&(n=0),this.land-n-e>=0&&(this.land-=e,this.checkLandTriggers(),!0)},e.prototype.increaseLand=function(e,n){return void 0===n&&(n=!1),this.land+=e,n||(this.takenLand-=e),!0},e.prototype.increaseMountains=function(e){return this.mountains+=e,!0},e.prototype.getForest=function(){return this.forest},e.prototype.decreaseLand=function(e){if(!(this.land-e>=0))return e-this.land;this.takenLand+=e,this.land-=e},e.prototype.hasLand=function(e){return this.land-e>=0},e.prototype.getLand=function(){return this.land},e.prototype.getMountains=function(){return this.mountains},e.prototype.hasMountains=function(e){return this.mountains-e>=0},e.prototype.decreaseMountains=function(e){if(!(this.mountains-e>=0))return e-this.mountains;this.mountains-=e,this.takenLand+=e},e.prototype.checkLandTriggers=function(){},e.prototype.getOre=function(e){return this.ores.find(function(n){return n[0]===e})[1]},e.prototype.hasOre=function(e,n){return this.ores.find(function(n){return n[0]===e})[1]>=n},e.prototype.increaseOre=function(e,n){this.ores.find(function(n){return n[0]===e})[1]+=n},e.prototype.decreaseOre=function(e,n){var t=this.ores.find(function(n){return n[0]===e});if(t[1]>=n)return t[1]-=n,0;var l=n-t[1];return t[1]=0,l},e.prototype.getTakenLand=function(){return this.takenLand},e.prototype.takeLand=function(e){this.land-=e,this.takenLand+=e},e.prototype.getForestOptions=function(){return this.forestOptions},e.ngInjectableDef=ve({factory:function(){return new e(Ye(Sg),Ye(rS),Ye(Tg))},token:e,providedIn:"root"}),e}(),uS=function(){function e(e,n,t,l,r,i){this.buildings=[],this.filterBuilding=bu.ALL,this.thisRegion=r,this.buildingFactoryService=e,this.resourcesService=n,this.servicesService=t,this.landService=l,n.addCallback(this,r),t.addService(i,this)}return e.prototype.init=function(){},e.prototype.getBuildings=function(){return this.buildings},e.prototype.tick=function(e){this.shuffleArray(this.buildings).forEach(function(n){return n.tick(e)})},e.prototype.shuffleArray=function(e){for(var n,t=e.slice(),l=t.length-1;l>0;l--){var r=Math.floor(Math.random()*(l+1));t[l]=(n=[t[r],t[l]])[0],t[r]=n[1]}return t},e.prototype.save=function(){return{buildings:this.buildings,filterBuilding:this.filterBuilding}},e.prototype.reset=function(e,n){this.buildings=[],this.filterBuilding=bu.ALL,this.init()},e.prototype.load=function(e){this.buildings=[],this.filterBuilding=void 0!==e.filterBuilding?e.filterBuilding:bu.ALL;for(var n=0,t=e.buildings;n<t.length;n++)this.buildings.push(this.buildingFactoryService.loadBuilding(t[n]))},e.prototype.getFilterBuilding=function(){return this.filterBuilding},e.prototype.setFilterBuildings=function(e){this.filterBuilding=e},e.prototype.getUnemployed=function(){return this.resourcesService.getPeople()},e.prototype.finishConstruction=function(e,n){var t=this.buildings.indexOf(e);-1!==t&&(this.buildings[t].stopProduction(),this.buildings[t]=this.buildingFactoryService.createBuilding(n,this.buildings[t].getBuildingId()))},e.prototype.createConstruction=function(e){this.buildings.push(e)},e.prototype.demolish=function(e){var n=this.buildings.indexOf(e);-1!==n&&(this.buildings[n].getBuildingType()===bu.CONSTRUCTION?(this.buildings[n].stopProduction(),this.buildings[n].finishDemolish(),this.landService.increaseLand(this.buildings[n].getSize()),this.buildings.splice(n,1)):this.buildings[n]=new qm(this.servicesService,this.buildings[n].getBuildingId(),this.thisRegion,this.buildings[n].getBuildingType(),this.buildings[n].getComplexity(),this.buildings[n].getSize()).build())},e.prototype.finishDeconstruction=function(e){var n=this.buildings.indexOf(e);-1!==n&&(this.buildings[n].stopProduction(),this.buildingFactoryService.createBuildingShell(this.buildings[n].getBuildingBeingDemolished()).finishDemolish(),this.landService.increaseLand(this.buildings[n].getSize()),this.buildings.splice(n,1))},e.prototype.finishUpgrade=function(e,n){var t=this.buildings.indexOf(e);if(-1!==t){this.buildings[t].stopProduction();var l=this.buildingFactoryService.createBuildingShell(n,this.buildings[t].getBuildingId());l.setBuildingLevel(this.buildings[t].getBuildingLevel()),l.build(),this.buildings[t]=l}},e.prototype.fireRandomWorker=function(){var e=this.buildings.filter(function(e){return void 0===e.getOccupants&&e.isWorking()});return e.length>0&&(e[Math.floor(Math.random()*e.length)].fireWorker(),!0)},e.prototype.moveBuildingInList=function(e,n){Av(this.buildings,e,n)},e.prototype.moveBuildingInListByBuildingId=function(e,n){var t=this.buildings.findIndex(function(n){return e===n.getBuildingId()}),l=this.buildings.findIndex(function(e){return n===e.getBuildingId()});Av(this.buildings,t,l)},e.prototype.canCombine=function(e){if(this.buildings.filter(function(e){return e.isCombinable()}).length>1)return this.toCombine?this.toCombine!==e&&this.toCombine.getBuildingType()===e.getBuildingType():!!this.buildings.find(function(n){return n!==e&&n.getBuildingType()===e.getBuildingType()})},e.prototype.combine=function(e){if(!this.toCombine)return this.toCombine=e,!1;e.combine(this.toCombine,this)},e.prototype.finaliseCombine=function(e){if(e){var n=this.buildings.indexOf(this.toCombine);if(n>=0)return this.buildings[n].prepareDemolish()?(this.toCombine=null,this.buildings.splice(n,1),!0):(this.toCombine=null,!1)}else this.toCombine=null},e.prototype.clearCombineMode=function(){this.toCombine=null},e.prototype.split=function(e){e.isSplittable()&&e.split(this)},e.prototype.finaliseSplit=function(e){this.buildings.push(e)},e.prototype.addBuilding=function(e){this.buildings.push(this.buildingFactoryService.createBuilding(e))},e.prototype.upgradeBuilding=function(e){var n=this.buildings.find(function(n){return n.getBuildingId()===e}),t=this.servicesService.getService(Nu.MODAL);if(n)if(n.hasUpgrade()){if(this.resourcesService.decreaseResources(n.getUpgradeCost(),"Upgrade",!0)){n.stopProduction();var l=this.buildings.indexOf(n),r=ts.getBuilding(n.getBuildingType());this.buildings[l]=new Bm(this.servicesService,n.getBuildingId(),this.thisRegion,n.getBuildingType(),r.UPGRADES[n.getBuildingLevel()-1].COMPLEXITY,n.getSize(),n.getBuildingLevel()+1).build()}}else t.info("This building cannot be upgraded");else t.info("Error! Building not found")},e}(),sS=function(e){function n(n,t,l,r,i){var o=e.call(this,t,n,l,i,Mu.VILLAGE,Nu.VILLAGE)||this;return o.idService=r,o}return r(n,e),n.prototype.init=function(){var e=this;this.buildings.push(new Fm(this.servicesService,this.idService.getNextId(),2).build()),this.buildings.push(new Fm(this.servicesService,this.idService.getNextId(),1).build()),this.resourcesService.createPeople(3),this.buildings.forEach(function(n){return e.landService.takeLand(n.getSize())})},n.prototype.getPopulation=function(){return this.resourcesService.getPeople()+this.resourcesService.getWorkers()},n.prototype.getPopulationCap=function(){return this.resourcesService.getPopulationCap()},n.prototype.moveOccupants=function(e,n){for(var t=0;n>0&&t<this.buildings.length;){var l=this.buildings[t];if(this.buildings[t]!==e&&void 0!==l.getOccupants)for(;l.getOccupants()<l.getMaxSize()&&n>0;)l.addOccupant()&&(n-=1);t+=1}return n},n.prototype.removeRecruit=function(e){var n=this.buildings.filter(function(e){return void 0!==e.getOccupants}).map(function(e){return e}).sort(function(e,n){return e.getOccupants()===e.getMaxSize()&&n.getOccupants()===n.getMaxSize()?e.getMaxSize()>n.getMaxSize()?-1:1:e.getOccupants()===e.getMaxSize()&&n.getOccupants()<n.getMaxSize()?-1:e.getOccupants()<e.getMaxSize()&&n.getOccupants()===n.getMaxSize()?1:void 0}),t=0;if(n.forEach(function(e){return t+=e.getOccupants()}),t>=e)for(;e>0;)for(var l=0,r=n;l<r.length;l++){if(!(e>0))return!0;r[l].removeOccupant()&&(this.resourcesService.removePeople(1),e-=1)}return!1},n.prototype.replaceWithHouses=function(){var e=this;this.buildings.push(new Um(this.servicesService,2).build()),this.buildings.filter(function(e){return e.getBuildingType()===bu.HUT}).forEach(function(n){n.prepareDemolish(),e.demolish(n)}),this.buildings.filter(function(e){return e.getBuildingType()===bu.DECONSTRUCTION}).forEach(function(n){return e.finishDeconstruction(n)})},n.ngInjectableDef=ve({factory:function(){return new n(Ye(xg),Ye(lS),Ye(Sg),Ye(nS),Ye(oS))},token:n,providedIn:"root"}),n}(uS),aS=function(){function e(e,n,t){this.marketService=e,this.villageService=n,this.resourcesService=t,this.filterText="",this.typeRadio="all"}return e.prototype.ngOnInit=function(){},e.prototype.getOffers=function(){var e,n=this;return e=null!==this.filterText&&this.filterText.length>0?this.marketService.getOffers().filter(function(e){return Au.prepareResourceName(e.resource).toLowerCase().includes(n.filterText)}):this.marketService.getOffers(),"buy"===this.typeRadio?e=e.filter(function(e){return e.buy}):"sell"===this.typeRadio&&(e=e.filter(function(e){return!e.buy})),e},e.prototype.getCoins=function(){return this.resourcesService.getResource(vu.COINS).amount},e.prototype.accept=function(e){this.marketService.accept(e)},e.prototype.isMarketBuilt=function(){return void 0!==this.villageService.getBuildings().find(function(e){return e.getBuildingType()===bu.MARKETPLACE})},e.prototype.getResourceName=function(e){return vu[e]},e}(),cS=gr({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{margin:.5%;height:100%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}.boxTitle[_ngcontent-%COMP%]{text-align:center;border-bottom:2px solid #000}#side[_ngcontent-%COMP%]{float:right;font-size:1em;width:25%;margin:.5%;display:inline-block;vertical-align:bottom}#side[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:.8em;margin:0;padding:0;border:none;outline:0}#headers[_ngcontent-%COMP%]{margin:3px 3px 0;display:flex;flex-direction:row;width:97%;text-align:center;font-size:.9em}#headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:0 0 24%;padding:2px;border:1px solid #000;border-left:none}#headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-of-type{border-left:1px solid #000}#market[_ngcontent-%COMP%]{display:flex;flex-direction:row;border:2px solid #000;height:91.5%}#offersBox[_ngcontent-%COMP%]{display:flex;flex:0 0 70%;flex-direction:column;border-right:2px solid #000;height:100%;font-size:1.2em}#filterBox[_ngcontent-%COMP%]{display:flex;flex:0 0 30%;flex-direction:column;height:100%}#offers[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:center;height:100%;overflow-y:auto}.offer[_ngcontent-%COMP%]{flex:0 0 auto;display:flex;flex-direction:row;border:1px solid #000;margin:3px}.offer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:0 0 24%;padding:2px}.offer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:.8em}#filters[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}#filter[_ngcontent-%COMP%]{width:90%}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.icon2[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center}#noMarket[_ngcontent-%COMP%]{margin-left:112px;color:#8b0000}"]],data:{}});function pS(e){return so(0,[(e()(),zr(0,0,null,null,1,"span",[["id","noMarket"]],null,null,null,null,null)),(e()(),io(-1,null,["No Marketplace available. No merchant will visit."]))],null,null)}function hS(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.accept(e.parent.context.$implicit.id)&&l),l},null,null)),(e()(),io(-1,null,["Buy"]))],null,null)}function dS(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.accept(e.parent.context.$implicit.id)&&l),l},null,null)),(e()(),io(-1,null,["Sell"]))],null,null)}function fS(e){return so(0,[(e()(),zr(0,0,null,null,15,"div",[["class","offer"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,3,"span",[["class","icon2"]],null,null,null,null,null)),(e()(),io(2,null,[" "," "])),(e()(),zr(3,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(4,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),zr(5,0,null,null,3,"span",[["class","icon2"]],null,null,null,null,null)),(e()(),io(6,null,[" "," "])),(e()(),zr(7,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(8,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),zr(9,0,null,null,1,"span",[["class","icon2"]],null,null,null,null,null)),(e()(),io(10,null,[" "," days "])),(e()(),zr(11,0,null,null,4,"span",[],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,hS)),ki(13,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,dS)),ki(15,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,4,0,n.component.getResourceName(n.context.$implicit.resource),"resources"),e(n,8,0,"coins","resources"),e(n,13,0,n.context.$implicit.buy),e(n,15,0,!n.context.$implicit.buy)},function(e,n){e(n,2,0,n.context.$implicit.amount),e(n,6,0,n.context.$implicit.price),e(n,10,0,n.context.$implicit.duration)})}function gS(e){return so(0,[(e()(),zr(0,0,null,null,65,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),zr(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["Market"])),(e()(),zr(4,0,null,null,5,"div",[["class","icon"]],null,null,null,null,null)),(e()(),zr(5,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(6,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),io(7,null,[" "," "])),(e()(),jr(16777216,null,null,1,null,pS)),ki(9,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),zr(10,0,null,null,55,"div",[["id","market"]],null,null,null,null,null)),(e()(),zr(11,0,null,null,15,"div",[["id","offersBox"]],null,null,null,null,null)),(e()(),zr(12,0,null,null,2,"div",[["class","boxTitle"]],null,null,null,null,null)),(e()(),zr(13,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["Offers"])),(e()(),zr(15,0,null,null,8,"div",[["id","headers"]],null,null,null,null,null)),(e()(),zr(16,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["offer"])),(e()(),zr(18,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["price"])),(e()(),zr(20,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["duration"])),(e()(),zr(22,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["buy/sell"])),(e()(),zr(24,0,null,null,2,"div",[["id","offers"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,fS)),ki(26,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null),(e()(),zr(27,0,null,null,38,"div",[["id","filterBox"]],null,null,null,null,null)),(e()(),zr(28,0,null,null,2,"div",[["class","boxTitle"]],null,null,null,null,null)),(e()(),zr(29,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["Filters"])),(e()(),zr(31,0,null,null,34,"div",[["id","filters"]],null,null,null,null,null)),(e()(),zr(32,0,null,null,5,"input",[["id","filter"],["placeholder","search"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var l=!0,r=e.component;return"input"===n&&(l=!1!==Ei(e,33)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ei(e,33).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ei(e,33)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ei(e,33)._compositionEnd(t.target.value)&&l),"ngModelChange"===n&&(l=!1!==(r.filterText=t)&&l),l},null,null)),ki(33,16384,null,0,_f,[Ln,Pn,[2,Cf]],null,null),xi(1024,null,Of,function(e){return[e]},[_f]),ki(35,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),xi(2048,null,Nf,null,[pg]),ki(37,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),zr(38,0,null,null,27,"div",[],null,null,null,null,null)),(e()(),zr(39,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),zr(40,0,null,null,6,"input",[["name","type"],["type","radio"],["value","all"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,r=e.component;return"input"===n&&(l=!1!==Ei(e,41)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ei(e,41).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ei(e,41)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ei(e,41)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==Ei(e,42).onChange()&&l),"blur"===n&&(l=!1!==Ei(e,42).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(r.typeRadio=t)&&l),l},null,null)),ki(41,16384,null,0,_f,[Ln,Pn,[2,Cf]],null,null),ki(42,212992,null,0,Df,[Ln,Pn,Pf,on],{name:[0,"name"],value:[1,"value"]},null),xi(1024,null,Of,function(e,n){return[e,n]},[_f,Df]),ki(44,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),xi(2048,null,Nf,null,[pg]),ki(46,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),io(-1,null,[" All "])),(e()(),zr(48,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),zr(49,0,null,null,6,"input",[["name","type"],["type","radio"],["value","buy"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,r=e.component;return"input"===n&&(l=!1!==Ei(e,50)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ei(e,50).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ei(e,50)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ei(e,50)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==Ei(e,51).onChange()&&l),"blur"===n&&(l=!1!==Ei(e,51).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(r.typeRadio=t)&&l),l},null,null)),ki(50,16384,null,0,_f,[Ln,Pn,[2,Cf]],null,null),ki(51,212992,null,0,Df,[Ln,Pn,Pf,on],{name:[0,"name"],value:[1,"value"]},null),xi(1024,null,Of,function(e,n){return[e,n]},[_f,Df]),ki(53,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),xi(2048,null,Nf,null,[pg]),ki(55,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),io(-1,null,[" Buy "])),(e()(),zr(57,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),zr(58,0,null,null,6,"input",[["name","type"],["type","radio"],["value","sell"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,r=e.component;return"input"===n&&(l=!1!==Ei(e,59)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ei(e,59).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ei(e,59)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ei(e,59)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==Ei(e,60).onChange()&&l),"blur"===n&&(l=!1!==Ei(e,60).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(r.typeRadio=t)&&l),l},null,null)),ki(59,16384,null,0,_f,[Ln,Pn,[2,Cf]],null,null),ki(60,212992,null,0,Df,[Ln,Pn,Pf,on],{name:[0,"name"],value:[1,"value"]},null),xi(1024,null,Of,function(e,n){return[e,n]},[_f,Df]),ki(62,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),xi(2048,null,Nf,null,[pg]),ki(64,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),io(-1,null,[" Sell "]))],function(e,n){var t=n.component;e(n,6,0,"coins","resources"),e(n,9,0,!t.isMarketBuilt()),e(n,26,0,t.getOffers()),e(n,35,0,t.filterText),e(n,42,0,"type","all"),e(n,44,0,"type",t.typeRadio),e(n,51,0,"type","buy"),e(n,53,0,"type",t.typeRadio),e(n,60,0,"type","sell"),e(n,62,0,"type",t.typeRadio)},function(e,n){e(n,7,0,n.component.getCoins()),e(n,32,0,Ei(n,37).ngClassUntouched,Ei(n,37).ngClassTouched,Ei(n,37).ngClassPristine,Ei(n,37).ngClassDirty,Ei(n,37).ngClassValid,Ei(n,37).ngClassInvalid,Ei(n,37).ngClassPending),e(n,40,0,Ei(n,46).ngClassUntouched,Ei(n,46).ngClassTouched,Ei(n,46).ngClassPristine,Ei(n,46).ngClassDirty,Ei(n,46).ngClassValid,Ei(n,46).ngClassInvalid,Ei(n,46).ngClassPending),e(n,49,0,Ei(n,55).ngClassUntouched,Ei(n,55).ngClassTouched,Ei(n,55).ngClassPristine,Ei(n,55).ngClassDirty,Ei(n,55).ngClassValid,Ei(n,55).ngClassInvalid,Ei(n,55).ngClassPending),e(n,58,0,Ei(n,64).ngClassUntouched,Ei(n,64).ngClassTouched,Ei(n,64).ngClassPristine,Ei(n,64).ngClassDirty,Ei(n,64).ngClassValid,Ei(n,64).ngClassInvalid,Ei(n,64).ngClassPending)})}function vS(e){return so(0,[(e()(),zr(0,0,null,null,1,"app-market",[],null,null,null,gS,cS)),ki(1,114688,null,0,aS,[Nm,sS,xg],null,null)],function(e,n){e(n,1,0)},null)}var mS=ai("app-market",aS,vS,{},{},[]),yS=function(){function e(e,n,t,l,r,i,o,u,s){void 0===u&&(u=function(){}),void 0===s&&(s=0),this.tech=e,this.category=n,this.prerequisites=t,this.flagPrerequisites=l,this.cost=r,this.requiredResearchPoints=i,this.description=o,this.researchPoints=s,this.finishFunction=u}return e.prototype.getTech=function(){return this.tech},e.prototype.getTechName=function(){return Au.prepareTechName(this.tech)},e.prototype.isResearched=function(){return this.researchPoints>this.requiredResearchPoints&&(this.researchPoints=this.requiredResearchPoints),this.researchPoints===this.requiredResearchPoints},e.prototype.getCategory=function(){return this.category},e.prototype.getDescription=function(){return this.description},e.prototype.getResearchPointsDue=function(){return this.requiredResearchPoints-this.researchPoints},e.prototype.addResearchPoints=function(e){this.researchPoints+=e,this.researchPoints>this.requiredResearchPoints&&(this.researchPoints=this.requiredResearchPoints)},e.prototype.getResearchPoints=function(){return this.researchPoints},e.prototype.setResearchPoints=function(e){this.researchPoints=e},e.prototype.setResearched=function(){this.researchPoints=this.requiredResearchPoints},e.prototype.getCost=function(){return this.cost},e.prototype.clearCost=function(){this.cost=new Map},e.prototype.getPrerequisites=function(){return this.prerequisites},e.prototype.getFlagPrerequisites=function(){return this.flagPrerequisites},e.prototype.getFinishFunction=function(){return this.finishFunction},e.prototype.getRequiredResearchPoints=function(){return this.requiredResearchPoints},e}(),SS=function(){function e(){this.prerequisites=[],this.flagPrerequisites=[],this.cost=new Map,this.researchPoints=0,this.finishFunction=function(){}}return e.prototype.forTech=function(e){return this.tech=e,this},e.prototype.withCategory=function(e){return this.category=e,this},e.prototype.withPrerequisite=function(e){return this.prerequisites.push(e),this},e.prototype.withPrerequisites=function(e){var n=this;return e.forEach(function(e){return n.prerequisites.push(e)}),this},e.prototype.withFlagPrerequisite=function(e){return this.flagPrerequisites.push(e),this},e.prototype.withFlagPrerequisites=function(e){var n=this;return e.forEach(function(e){return n.flagPrerequisites.push(e)}),this},e.prototype.withCost=function(e,n){return this.cost.set(e,n),this},e.prototype.withCosts=function(e){var n=this;return e.forEach(function(e,t){return n.cost.set(t,e)}),this},e.prototype.withResearchPoints=function(e){return this.researchPoints=e,this},e.prototype.withDescription=function(e){return this.description=e,this},e.prototype.withFinishFunction=function(e){return this.finishFunction=e,this},e.prototype.build=function(){var e=new yS(this.tech,this.category,this.prerequisites,this.flagPrerequisites,this.cost,this.researchPoints,this.description,this.finishFunction);return this.tech=void 0,this.category=void 0,this.prerequisites=[],this.flagPrerequisites=[],this.cost=new Map,this.researchPoints=0,this.description=void 0,this.finishFunction=function(){},e},e}(),ES=function(){function e(e,n,t,l,r,i){this.servicesService=e,this.modalService=n,this.resourcesService=t,this.logService=l,this.soundService=r,this.gameService=i,this.techUpdate=new x,this.techList=[],this.techDone=[],this.techStarted=[],this.currentResearch=null,this.foresight=0,this.showDone=!1,this.servicesService.addService(Nu.RESEARCH,this),this.init()}return e.prototype.init=function(){var e=this;this.techList=[];var n=new SS;Object.entries(os).forEach(function(t){n.forTech(Su[t[0]]).withCategory(t[1].CATEGORY).withFinishFunction(t[1].FINISH).withResearchPoints(t[1].RESEARCH_POINT).withPrerequisites(t[1].PREREQUISITES).withFlagPrerequisites(t[1].FLAG_PREREQUISITES?t[1].FLAG_PREREQUISITES:[]).withDescription(t[1].DESCRIPTION),t[1].COST.forEach(function(e){return n.withCost(e.resource,e.amount)}),e.techList.push(n.build())})},e.prototype.isResearched=function(e){return null!=this.techDone.find(function(n){return n===e})},e.prototype.startResearch=function(e){var n=this;if(!this.currentResearch||this.currentResearch.getTech()!==e){var t=this.techList.find(function(n){return n.getTech()===e}),l=!0,r="";if(t.getPrerequisites().forEach(function(e){n.techDone.includes(e)||(l=!1,r+=Au.prepareTechName(e)+" not researched!<br>")}),t.getFlagPrerequisites().forEach(function(e){n.gameService.isEnabled(e)||(l=!1,r+=Au.prepareFlagName(e)+" not unlocked!<br>")}),l){if(!this.techStarted.find(function(n){return n[0]===e})){var i=this.techList.find(function(n){return n.getTech()===e}),o=!0,u="";if(Array.from(i.getCost().entries()).forEach(function(e){var t=n.resourcesService.hasResource(e[0],e[1],"Research",!0);0!==t&&(u+="Missing "+t+" "+Au.prepareResourceName(e[0])+"!<br>",o=!1)}),!o)return void this.modalService.info(u)}this.modalService.setModalText("Are you sure you want to unlock researching "+Au.prepareTechName(e)+"?"),this.modalService.open(mu.CONFIRM);var s=this.modalService.registerForConfirmation().subscribe(function(t){if(s.unsubscribe(),t){var l=n.techList.find(function(n){return n.getTech()===e}),r=!0,i="";if(Array.from(l.getCost().entries()).forEach(function(e){var t=n.resourcesService.hasResource(e[0],e[1],"Research",!0);0!==t&&(i+="Missing "+t+" "+Au.prepareResourceName(e[0])+"!<br>",r=!1)}),!r)return void n.modalService.info(i);if(n.resourcesService.decreaseResources(l.getCost(),"Research",!0),n.currentResearch){var o=n.techStarted.find(function(n){return n[0]===e});o?o[1]=n.currentResearch.getResearchPoints():n.techStarted.push([n.currentResearch.getTech(),n.currentResearch.getResearchPoints()])}n.currentResearch=n.techList.find(function(n){return n.getTech()===e}),n.currentResearch.clearCost();var u=n.techStarted.find(function(n){return n[0]===e});u?u[1]=n.currentResearch.getResearchPoints():n.techStarted.push([n.currentResearch.getTech(),n.currentResearch.getResearchPoints()])}})}else this.modalService.info(r)}},e.prototype.progressTech=function(e){var n=this;this.currentResearch&&(this.currentResearch.addResearchPoints(e),this.currentResearch.isResearched()&&(this.logService.log(this.currentResearch.getTechName()+" researched"),this.soundService.playTownBells(),this.currentResearch.getFinishFunction()(this.servicesService),this.techDone.push(this.currentResearch.getTech()),this.techStarted=this.techStarted.filter(function(e){return e[0]!==n.currentResearch.getTech()}),this.currentResearch=null),this.techUpdate.next())},e.prototype.save=function(){var e=this;if(this.currentResearch){var n=this.techStarted.find(function(n){return n[0]===e.currentResearch.getTech()});n&&(n[1]=this.currentResearch.getResearchPoints())}return{foresight:this.foresight,showDone:this.showDone,techDone:this.techDone,techStarted:this.techStarted,currentResearchTech:this.currentResearch?this.currentResearch.getTech():null}},e.prototype.load=function(e){var n=this;this.foresight=e.foresight,this.showDone=void 0!==e.showDone&&e.showDone,this.techDone=e.techDone,this.techStarted=e.techStarted,this.techDone.forEach(function(e){return n.techList.find(function(n){return n.getTech()===e}).setResearched()}),this.techStarted.forEach(function(e){var t=n.techList.find(function(n){return n.getTech()===e[0]});t&&(t.clearCost(),t.setResearchPoints(e[1]))}),this.currentResearch=this.techList.find(function(n){return n.getTech()===e.currentResearchTech}),this.techDone.includes(Su.BARRACKS)&&!this.gameService.isEnabled(Eu.BARRACKS)&&(this.gameService.enable(Eu.BARRACKS),this.logService.log("Barracks invented"))},e.prototype.reset=function(e,n){this.techList=[],this.techDone=[],this.techStarted=[],this.currentResearch=null,this.foresight=0,this.showDone=!1,this.init()},e.prototype.getTech=function(){var e=this;return this.techList.filter(function(n){if(e.techDone.includes(n.getTech()))return e.showDone;var t=!0;return n.getPrerequisites().forEach(function(n){e.checkPrerequisite(n,e.foresight)||(t=!1)}),t})},e.prototype.checkPrerequisite=function(e,n){var t=this;if(this.techDone.includes(e))return!0;if(n>0){var l=!0;return this.techList.find(function(n){return n.getTech()===e}).getPrerequisites().forEach(function(e){t.checkPrerequisite(e,n-1)||(l=!1)}),l}return!1},e.prototype.getCurrentResearch=function(){return this.currentResearch},e.prototype.increaseForesight=function(e){this.foresight+=1},e.prototype.isResearchStarted=function(){return!!this.currentResearch},e.prototype.getTechPrerequisites=function(e){var n=this,t=[];return e.getPrerequisites().forEach(function(e){n.techDone.includes(e)||t.push(e)}),t},e.prototype.registerForUpdate=function(){return this.techUpdate.asObservable()},e.prototype.getForesight=function(){return this.foresight},e.prototype.getTechFlagPrerequisites=function(e){var n=this,t=[];return e.getFlagPrerequisites().forEach(function(e){n.gameService.isEnabled(e)||t.push(e)}),t},e.prototype.finishTech=function(e){this.techDone.push(e);var n=this.techList.find(function(n){return n.getTech()===e});n&&(this.logService.log(n.getTechName()+" researched"),n.getFinishFunction()(this.servicesService)),this.currentResearch&&this.currentResearch.getTech()===e&&(this.currentResearch=null),this.techUpdate.next()},e.prototype.toggleShowDone=function(){this.showDone=!this.showDone},e.prototype.shouldShowDone=function(){return this.showDone},e.ngInjectableDef=ve({factory:function(){return new e(Ye(Sg),Ye(Ig),Ye(xg),Ye(Tg),Ye(wm),Ye(wg))},token:e,providedIn:"root"}),e}(),bS=function(){function e(n,t){this.techService=n,this.resourcesService=t,this.id=e.randomId()}return e.randomId=function(){return Math.random()},e.prototype.ngOnInit=function(){var e=this;this.updateSubscription=this.techService.registerForUpdate().subscribe(function(){e.progressRef&&(e.progressRef.nativeElement.style.width=e.tech.getResearchPoints()/e.tech.getRequiredResearchPoints()*100+"%")})},e.prototype.ngAfterViewInit=function(){this.progressRef&&(this.progressRef.nativeElement.style.width=this.tech.getResearchPoints()/this.tech.getRequiredResearchPoints()*100+"%")},e.prototype.ngOnChanges=function(){this.progressRef&&(this.progressRef.nativeElement.style.width=this.tech.getResearchPoints()/this.tech.getRequiredResearchPoints()*100+"%")},e.prototype.getResourceName=function(e){return Au.prepareResourceName(e)},e.prototype.start=function(){this.techService.startResearch(this.tech.getTech())},e.prototype.getPrerequisiteName=function(e){return Au.prepareTechName(e)},e.prototype.getMissingPrerequisites=function(){return this.techService.getTechPrerequisites(this.tech)},e.prototype.hasResource=function(e){return 0===this.resourcesService.hasResource(e.key,e.value,"Research",!0)},e.prototype.getMissingFlagPrerequisites=function(){return this.techService.getTechFlagPrerequisites(this.tech)},e.prototype.getFlagPrerequisiteName=function(e){return Au.prepareFlagName(e)},e}(),OS=gr({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #000}#researched[_ngcontent-%COMP%]{display:inline-block;width:100%;padding:3px;text-align:center;cursor:initial;border:1px solid #000}#wrapperNotAvailable[_ngcontent-%COMP%]{display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #57575a}#titleGrey[_ngcontent-%COMP%]{display:inline-block;color:#57575a}.notMet[_ngcontent-%COMP%]{color:#8b0000}.title[_ngcontent-%COMP%]{text-align:left}hr[_ngcontent-%COMP%]{border-color:#000}#progress[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background-color:var(--active-colour);z-index:1}#text[_ngcontent-%COMP%]{position:relative;z-index:2}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center}"]],data:{}});function RS(e){return so(0,[(e()(),zr(0,0,null,null,7,"div",[["appTooltip",""],["class","tooltip"],["id","researched"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==Ei(e,1).onmousemove(t)&&l),l},null,null)),ki(1,16384,null,0,af,[],{elementId:[0,"elementId"]},null),(e()(),zr(2,0,[[1,0],["progress",1]],null,0,"div",[["id","progress"]],null,null,null,null,null)),(e()(),zr(3,0,null,null,1,"div",[["id","text"]],null,null,null,null,null)),(e()(),io(4,null,["",""])),(e()(),zr(5,0,null,null,2,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),io(6,null,[" ",""])),(e()(),zr(7,0,null,null,0,"br",[],null,null,null,null,null))],function(e,n){e(n,1,0,n.component.id)},function(e,n){var t=n.component;e(n,4,0,t.tech.getTechName()),e(n,5,0,Vr(1,"",t.id,"")),e(n,6,0,t.tech.getDescription())})}function CS(e){return so(0,[(e()(),zr(0,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),io(-1,null,["Cost:"])),(e()(),zr(2,0,null,null,0,"br",[],null,null,null,null,null))],null,null)}function _S(e){return so(0,[(e()(),zr(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),zr(1,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),io(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.value)})}function TS(e){return so(0,[(e()(),zr(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),zr(1,0,null,null,1,"div",[["class","notMet"]],null,null,null,null,null)),(e()(),io(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.value)})}function IS(e){return so(0,[(e()(),zr(0,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,_S)),ki(2,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,TS)),ki(4,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),zr(5,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(6,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){var t=n.component;e(n,2,0,t.hasResource(n.context.$implicit)),e(n,4,0,!t.hasResource(n.context.$implicit)),e(n,6,0,t.getResourceName(n.context.$implicit.key),"resources")},null)}function AS(e){return so(0,[(e()(),zr(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),io(1,null,[" "," "]))],null,function(e,n){e(n,1,0,n.component.getPrerequisiteName(n.context.$implicit))})}function wS(e){return so(0,[(e()(),zr(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),io(1,null,[" "," "]))],null,function(e,n){e(n,1,0,n.component.getFlagPrerequisiteName(n.context.$implicit))})}function NS(e){return so(0,[(e()(),zr(0,0,null,null,7,"div",[["class","prerequisites"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),io(-1,null,["Prerequisites:"])),(e()(),zr(3,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,AS)),ki(5,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null),(e()(),jr(16777216,null,null,1,null,wS)),ki(7,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,5,0,t.getMissingPrerequisites()),e(n,7,0,t.getMissingFlagPrerequisites())},null)}function PS(e){return so(0,[(e()(),zr(0,0,null,null,17,"div",[["appTooltip",""],["class","tooltip"],["id","wrapper"]],null,[[null,"click"],[null,"mousemove"]],function(e,n,t){var l=!0,r=e.component;return"mousemove"===n&&(l=!1!==Ei(e,1).onmousemove(t)&&l),"click"===n&&(l=!1!==r.start()&&l),l},null,null)),ki(1,16384,null,0,af,[],{elementId:[0,"elementId"]},null),(e()(),zr(2,0,[[1,0],["progress",1]],null,0,"div",[["id","progress"]],null,null,null,null,null)),(e()(),zr(3,0,null,null,1,"div",[["id","text"]],null,null,null,null,null)),(e()(),io(4,null,["",""])),(e()(),zr(5,0,null,null,12,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),io(6,null,[" ",""])),(e()(),zr(7,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(8,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),zr(9,0,null,null,1,"div",[["class","title"]],null,null,null,null,null)),(e()(),io(10,null,["Research points: ","/",""])),(e()(),jr(16777216,null,null,1,null,CS)),ki(12,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,2,null,IS)),ki(14,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null),Mi(0,Ks,[Vl]),(e()(),jr(16777216,null,null,1,null,NS)),ki(17,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.id),e(n,12,0,t.tech.getCost().size>0),e(n,14,0,hr(n,14,0,Ei(n,15).transform(t.tech.getCost()))),e(n,17,0,t.getMissingPrerequisites().length>0||t.getMissingFlagPrerequisites().length>0)},function(e,n){var t=n.component;e(n,4,0,t.tech.getTechName()),e(n,5,0,Vr(1,"",t.id,"")),e(n,6,0,t.tech.getDescription()),e(n,10,0,t.tech.getResearchPoints(),t.tech.getRequiredResearchPoints())})}function DS(e){return so(0,[(e()(),zr(0,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),io(-1,null,["Cost:"])),(e()(),zr(2,0,null,null,0,"br",[],null,null,null,null,null))],null,null)}function kS(e){return so(0,[(e()(),zr(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),zr(1,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),io(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.value)})}function MS(e){return so(0,[(e()(),zr(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),zr(1,0,null,null,1,"div",[["class","notMet"]],null,null,null,null,null)),(e()(),io(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.value)})}function xS(e){return so(0,[(e()(),zr(0,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,kS)),ki(2,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,MS)),ki(4,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),zr(5,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(6,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){var t=n.component;e(n,2,0,t.hasResource(n.context.$implicit)),e(n,4,0,!t.hasResource(n.context.$implicit)),e(n,6,0,t.getResourceName(n.context.$implicit.key),"resources")},null)}function LS(e){return so(0,[(e()(),zr(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),io(1,null,[" "," "]))],null,function(e,n){e(n,1,0,n.component.getPrerequisiteName(n.context.$implicit))})}function FS(e){return so(0,[(e()(),zr(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),io(1,null,[" "," "]))],null,function(e,n){e(n,1,0,n.component.getFlagPrerequisiteName(n.context.$implicit))})}function US(e){return so(0,[(e()(),zr(0,0,null,null,7,"div",[["class","prerequisites"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),io(-1,null,["Prerequisites:"])),(e()(),zr(3,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,LS)),ki(5,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null),(e()(),jr(16777216,null,null,1,null,FS)),ki(7,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,5,0,t.getMissingPrerequisites()),e(n,7,0,t.getMissingFlagPrerequisites())},null)}function HS(e){return so(0,[(e()(),zr(0,0,null,null,16,"div",[["appTooltip",""],["class","tooltip"],["id","wrapperNotAvailable"]],null,[[null,"click"],[null,"mousemove"]],function(e,n,t){var l=!0,r=e.component;return"mousemove"===n&&(l=!1!==Ei(e,1).onmousemove(t)&&l),"click"===n&&(l=!1!==r.start()&&l),l},null,null)),ki(1,16384,null,0,af,[],{elementId:[0,"elementId"]},null),(e()(),zr(2,0,null,null,1,"div",[["id","titleGrey"]],null,null,null,null,null)),(e()(),io(3,null,["",""])),(e()(),zr(4,0,null,null,12,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),io(5,null,[" ",""])),(e()(),zr(6,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(7,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),zr(8,0,null,null,1,"div",[["class","title"]],null,null,null,null,null)),(e()(),io(9,null,["Research points: ","/",""])),(e()(),jr(16777216,null,null,1,null,DS)),ki(11,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,2,null,xS)),ki(13,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null),Mi(0,Ks,[Vl]),(e()(),jr(16777216,null,null,1,null,US)),ki(16,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.id),e(n,11,0,t.tech.getCost().size>0),e(n,13,0,hr(n,13,0,Ei(n,14).transform(t.tech.getCost()))),e(n,16,0,t.getMissingPrerequisites().length>0||t.getMissingFlagPrerequisites().length>0)},function(e,n){var t=n.component;e(n,3,0,t.tech.getTechName()),e(n,4,0,Vr(1,"",t.id,"")),e(n,5,0,t.tech.getDescription()),e(n,9,0,t.tech.getResearchPoints(),t.tech.getRequiredResearchPoints())})}function GS(e){return so(0,[Qi(671088640,1,{progressRef:0}),(e()(),jr(16777216,null,null,1,null,RS)),ki(2,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,PS)),ki(4,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,HS)),ki(6,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.tech.isResearched()),e(n,4,0,0===t.getMissingPrerequisites().length&&!t.tech.isResearched()),e(n,6,0,t.getMissingPrerequisites().length>0&&!t.tech.isResearched())},null)}var BS=function(){function e(e,n,t){this.techService=e,this.villageService=n,this.gameService=t}return e.prototype.ngOnInit=function(){this.categories=Object.keys(wu),this.categories=this.categories.slice(this.categories.length/2)},e.prototype.getTechList=function(e){return this.techService.getTech().filter(function(n){return n.getCategory()===wu[e]})},e.prototype.getCurrentResearch=function(){return this.techService.getCurrentResearch()},e.prototype.research=function(e){this.techService.progressTech(e)},e.prototype.isDev=function(){return!Gu.production},e.prototype.getForesight=function(){return this.techService.getForesight()},e.prototype.isResearcher=function(){return this.villageService.getBuildings().filter(function(e){return e.getBuildingType()===bu.WORKSHOP}).map(function(e){return e}).filter(function(e){return e.willResearch()}).length>0},e.prototype.shouldShowDone=function(){return this.techService.shouldShowDone()},e.prototype.showDone=function(){this.techService.toggleShowDone()},e}(),VS=gr({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{margin:.7%;height:100%}#categories[_ngcontent-%COMP%]{display:inline-flex;flex-direction:row;border:1px solid #000;height:86%;width:100%;text-align:center}.category[_ngcontent-%COMP%]{text-align:center;flex:0 0 19.75%;display:flex;flex-direction:column;border:1px solid #000;align-items:center}#categoryBody[_ngcontent-%COMP%]{height:100%;width:100%;overflow-y:auto;overflow-x:hidden}.title[_ngcontent-%COMP%]{padding:2px;width:100%;font-weight:bolder;font-size:1em;margin-bottom:5px;display:block;border-bottom:1px solid #000}app-tech[_ngcontent-%COMP%]{display:inline-block;margin-bottom:4px;margin-top:4px;margin-left:-4px;width:75%;font-size:.7em}#researching[_ngcontent-%COMP%]{margin-bottom:8px}#currentTech[_ngcontent-%COMP%]{display:inline-block;width:auto;margin-right:10px}.tech[_ngcontent-%COMP%]{cursor:pointer}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}#noResearchers[_ngcontent-%COMP%]{margin-left:175px;color:#8b0000}.showHiddenButton[_ngcontent-%COMP%]{font-size:.8em;padding:4px;margin-left:auto}"]],data:{}});function WS(e){return so(0,[(e()(),zr(0,0,null,null,3,"span",[],null,null,null,null,null)),(e()(),zr(1,0,null,null,1,"app-tech",[["id","currentTech"]],null,null,null,GS,OS)),ki(2,4833280,null,0,bS,[ES,xg],{tech:[0,"tech"]},null),(e()(),io(3,null,[" requires "," more research points "]))],function(e,n){e(n,2,0,n.component.getCurrentResearch())},function(e,n){e(n,3,0,n.component.getCurrentResearch().getResearchPointsDue())})}function jS(e){return so(0,[(e()(),zr(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["nothing"]))],null,null)}function zS(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.research(10)&&l),l},null,null)),(e()(),io(-1,null,["Research"]))],null,null)}function YS(e){return so(0,[(e()(),zr(0,0,null,null,1,"span",[["id","noResearchers"]],null,null,null,null,null)),(e()(),io(-1,null,["No workshop set to research."]))],null,null)}function KS(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[["class","showHiddenButton"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.showDone()&&l),l},null,null)),(e()(),io(-1,null,["show finished"]))],null,null)}function qS(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[["class","showHiddenButton"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.showDone()&&l),l},null,null)),(e()(),io(-1,null,["hide finished"]))],null,null)}function $S(e){return so(0,[(e()(),zr(0,0,null,null,1,"app-tech",[["class","tech"]],null,null,null,GS,OS)),ki(1,4833280,null,0,bS,[ES,xg],{tech:[0,"tech"]},null)],function(e,n){e(n,1,0,n.context.$implicit)},null)}function QS(e){return so(0,[(e()(),zr(0,0,null,null,5,"div",[["class","category"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),io(2,null,["",""])),(e()(),zr(3,0,null,null,2,"span",[["id","categoryBody"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,$S)),ki(5,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,5,0,n.component.getTechList(n.context.$implicit))},function(e,n){e(n,2,0,n.context.$implicit)})}function ZS(e){return so(0,[(e()(),zr(0,0,null,null,21,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,7,"div",[["id","researching"]],null,null,null,null,null)),(e()(),io(-1,null,[" Researching: "])),(e()(),jr(16777216,null,null,1,null,WS)),ki(4,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,jS)),ki(6,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,zS)),ki(8,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),zr(9,0,null,null,9,"div",[["class","icon"]],null,null,null,null,null)),(e()(),zr(10,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(11,114688,null,0,cf,[],{name:[0,"name"]},null),(e()(),io(12,null,["\xa0"," "])),(e()(),jr(16777216,null,null,1,null,YS)),ki(14,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,KS)),ki(16,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,qS)),ki(18,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),zr(19,0,null,null,2,"div",[["id","categories"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,QS)),ki(21,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,4,0,t.getCurrentResearch()),e(n,6,0,!t.getCurrentResearch()),e(n,8,0,t.isDev()),e(n,11,0,"foresight"),e(n,14,0,!t.isResearcher()),e(n,16,0,!t.shouldShowDone()),e(n,18,0,t.shouldShowDone()),e(n,21,0,t.categories)},function(e,n){e(n,12,0,n.component.getForesight())})}function XS(e){return so(0,[(e()(),zr(0,0,null,null,1,"app-research",[],null,null,null,ZS,VS)),ki(1,114688,null,0,BS,[ES,sS,wg],null,null)],function(e,n){e(n,1,0)},null)}var JS=ai("app-research",BS,XS,{},{},[]),eE=function(){return function(e,n,t,l,r,i){void 0===r&&(r=null),void 0===i&&(i=1),this.troop=e,this.recruitTime=n,this.strength=t,this.defense=l,this.cost=r,this.level=i}}(),nE=function(){function e(e,n,t,l,r,i,o,u){void 0===i&&(i=new Map),void 0===o&&(o=function(e,n,t){}),void 0===u&&(u=[]),this.squadStrength=0,this.squadDefense=0,this.mission=e,this.time=n,this.description=t,this.requiredStrength=l,this.requiredDefense=r,this.cost=i,this.troops=u,this.finish=o}return e.prototype.clone=function(){return new e(this.mission,this.time,this.description,this.requiredStrength,this.requiredDefense,this.cost,this.finish,this.troops)},e}(),tE=function(){function e(e,n,t,l,r,i,o){var u=this;this.resourcesService=e,this.modalService=n,this.logService=t,this.soundService=l,this.calendarService=r,this.effectsService=i,this.servicesService=o,this.missions=[],this.troops=[],this.missionsInProgress=[],this.recruits=[],this.barracksSize=0,this.invasionThreat=0,this.defense=0,this.enemyPower=0,this.incomingAttack=0,this.invasionEvaluation=10,this.stashSize=0,this.recruitsUpdate=new x,this.missionsUpdate=new x,o.addService(Nu.ARMY,this),this.init(),this.calendarService.registerForDayChange().subscribe(function(e){u.getEnemyInvasionPower()>u.getDefenseStrength()+u.defense+u.resourcesService.getTotalPeople()/2&&(u.invasionThreat+=u.resourcesService.getResourcesValue()/(100*zu)),u.invasionEvaluation-=1,u.invasionEvaluation<=0&&0===u.incomingAttack&&(u.invasionEvaluation=10,ku.chance((u.invasionThreat-u.defense)/100)&&(u.incomingAttack=ku.randomBetween(20,50),u.invasionThreat=0,u.logService.warning("Incoming attack in "+u.incomingAttack+" days!"),u.soundService.playTownBells())),u.incomingAttack>0&&(u.incomingAttack-=1,0===u.incomingAttack&&u.calculateInvasion()),u.enemyPower+=10/zu})}return e.prototype.init=function(){var e=this;this.missions=[],this.missionsInProgress=[],this.troops=[],Array.from(Object.entries(rs.MISSIONS)).forEach(function(n){var t=new Map;n[1].COST.forEach(function(e){return t.set(e.resource,e.amount)}),e.missions.push(new nE(Ru[n[0]],n[1].TIME,n[1].DESCRIPTION,n[1].REQUIRED_STRENGTH,n[1].REQUIRED_DEFENSE,t,n[1].FINISH))}),Array.from(Object.entries(rs.TROOPS)).forEach(function(n){var t=new Map;n[1].COST.forEach(function(e){return t.set(e.resource,e.amount)}),e.troops.push([new eE(Iu[n[0]],n[1].RECRUIT_TIME,n[1].STRENGTH,n[1].DEFENSE,t),0])})},e.prototype.tick=function(e){var n=this;this.missionsInProgress.forEach(function(e){e[1]+=.1,e[1]>=e[0].time&&(n.missions.find(function(n){return n.mission===e[0].mission}).finish(n.servicesService,e[0],n.enemyPower),e[0].troops.forEach(function(e){n.troops.find(function(n){return n[0].troop===e[0].troop})[1]+=e[1]}),n.logService.log(Au.prepareMissionName(e[0].mission)+" finished"))}),this.missionsInProgress=this.missionsInProgress.filter(function(e){return e[1]<e[0].time}),this.missionsUpdate.next()},e.prototype.getEnemyInvasionPower=function(){return Math.floor(this.enemyPower/10)},e.prototype.calculateInvasion=function(){var e=this;this.logService.warning("INVASION");for(var n=this.getEnemyInvasionPower(),t=this.generateArmyOfPower(n),l=function(){var e=r.getRandomTroop(r.troops),n=r.getRandomTroop(t),l=n.strength-e.defense*r.getTroopEffectsMultiplier(e.troop),i=50;l>0?(i+=2*l)>90&&(i=90):(i-=2*l)<10&&(i=10),ku.chance(i/100)?r.troops.find(function(n){return n[0].troop===e.troop})[1]-=1:(t.find(function(e){return e[0].troop===n.troop})[1]-=1,t=t.filter(function(e){return e[1]>0}))},r=this;t.length>0&&this.hasTroops(this.troops);)l();if(t.length>0){var i=0;t.forEach(function(e){return i+=e[0].strength*e[1]*20});for(var o="<br>",u=[],s=function(){var n=Array.from(a.resourcesService.getResources().values()).filter(function(n){return n.amount>e.stashSize}),t=ku.randomExcept(n,[]);if(void 0===t)return i=0,"break";var l=ls.getResource(t.resource),r=0;r=ku.randomBetween(1,l.TRADE_VALUE<10?20:l.TRADE_VALUE<50?10:l.TRADE_VALUE<300?5:2),t.amount-a.stashSize<r&&(r=t.amount-a.stashSize),i-=l.TRADE_VALUE*r;var o=u.find(function(e){return e.resource===t.resource});o?o.amount+=r:u.push({resource:t.resource,amount:r}),a.resourcesService.decreaseResource(t.resource,r,"Invasion",!0)},a=this;i>0&&"break"!==s(););u.forEach(function(e){o+="&emsp;"+e.amount+" "+Au.prepareResourceName(e.resource)+"<br>"}),this.logService.log(u.length>0?"We have been plundered: "+o:"We have been invaded but nothing has been stolen")}else this.logService.log("Invading forces have been defeated"),this.reduceEnemyPower(n)},e.prototype.reduceEnemyPower=function(e){this.enemyPower-=e,this.enemyPower<10&&(this.enemyPower=10)},e.prototype.getTroopEffectsValue=function(e){var n=0;return this.effectsService.getArmyEffects().filter(function(n){return null===n.troop||n.troop===e}).forEach(function(e){return n+=e.effect}),n},e.prototype.getTroopEffectsMultiplier=function(e){return 1+this.getTroopEffectsValue(e)/100},e.prototype.getRandomTroop=function(e){var n=e.filter(function(e){return e[1]>0});return n[ku.randomBetween(0,n.length-1)][0]},e.prototype.hasTroops=function(e){var n=!1;return e.forEach(function(e){e[1]>0&&(n=!0)}),n},e.prototype.generateArmyOfPower=function(e){for(var n=[],t=function(){var t=ku.randomElement([{item:Iu.MILITIA,chance:40},{item:Iu.SPEARMAN,chance:30},{item:Iu.ARCHER,chance:20},{item:Iu.SWORDSMAN,chance:10}]),l=rs.getTroop(t),r=l.DEFENSE+l.STRENGTH,i=n.find(function(e){return e[0].troop===t});i?i[1]+=1:n.push([new eE(t,0,l.STRENGTH,l.DEFENSE,null,1),1]),e-=r};e>0;)t();return n},e.prototype.load=function(e){var n=this;this.barracksSize=e.barracksSize,this.invasionThreat=e.invasionThreat,this.defense=e.defense,this.enemyPower=e.enemyPower,this.invasionEvaluation=e.invasionEvaluation,this.incomingAttack=e.incomingAttack,this.stashSize=e.stashSize,e.troops.forEach(function(e){var t=n.troops.find(function(n){return n[0].troop===e[0]});t&&(t[1]=e[1])}),this.recruits=[],e.recruits.forEach(function(e){var t=n.troops.find(function(n){return n[0].troop===e[0]});t&&n.recruits.push([t[0],e[1],e[2]])}),this.missionsInProgress=[],e.missionsInProgress.forEach(function(e){var t=n.missions.find(function(n){return n.mission===e[0]});t&&(e.length<5&&(e.push(0),e.push(0),e.push([])),t.squadDefense=e[2],t.squadStrength=e[3],t.troops=[],e[4].forEach(function(e){var l=n.troops.find(function(n){return n[0].troop===e[0]});l&&t.troops.push([new eE(l[0].troop,0,l[0].strength,l[0].defense),e[1]])}),n.missionsInProgress.push([t,e[1]]))})},e.prototype.save=function(){var e=[];this.troops.forEach(function(n){return e.push([n[0].troop,n[1]])});var n=[];this.recruits.forEach(function(e){return n.push([e[0].troop,e[1],e[2]])});var t=[];return this.missionsInProgress.forEach(function(e){var n=[];e[0].troops.forEach(function(e){return n.push([e[0].troop,e[1]])}),t.push([e[0].mission,e[1],e[0].squadDefense,e[0].squadStrength,n])}),{barracksSize:this.barracksSize,troops:e,missionsInProgress:t,recruits:n,invasionThreat:this.invasionThreat,defense:this.defense,enemyPower:this.enemyPower,invasionEvaluation:this.invasionEvaluation,incomingAttack:this.incomingAttack,stashSize:this.stashSize}},e.prototype.reset=function(e,n){this.missions=[],this.troops=[],this.missionsInProgress=[],this.recruits=[],this.barracksSize=0,this.invasionThreat=0,this.defense=0,this.enemyPower=0,this.incomingAttack=0,this.invasionEvaluation=10,this.stashSize=0,this.init()},e.prototype.progressRecruitment=function(e){var n=this;this.recruits.length>0&&(this.recruits[0][2]+=e,this.recruits[0][2]>=this.recruits[0][0].recruitTime&&(this.troops.find(function(e){return e[0].troop===n.recruits[0][0].troop})[1]+=1,this.recruits[0][1]-=1,this.recruits[0][2]=0,0===this.recruits[0][1]&&this.recruits.shift()),this.recruitsUpdate.next())},e.prototype.recruit=function(e,n){this.getFreeBarracks()>=n?this.resourcesService.getPeople()>=n?this.resourcesService.decreaseResources(e.cost,"Army",!0,n)&&(this.resourcesService.removeRecruit(n),this.recruits.push([e,n,0])):this.modalService.info("Not enough unemployed people to recruit!"):this.modalService.info("Not enough space in barracks for so many recruits")},e.prototype.getRecruits=function(){return this.recruits},e.prototype.getMissions=function(){return this.missions},e.prototype.getCurrentMissions=function(){return this.missionsInProgress},e.prototype.getTroops=function(){return this.troops},e.prototype.getArmySize=function(){var e=0;return this.troops.forEach(function(n){return e+=n[1]}),this.recruits.forEach(function(n){return e+=n[1]}),this.missionsInProgress.forEach(function(n){n[0].troops.forEach(function(n){return e+=n[1]})}),e},e.prototype.getFreeBarracks=function(){return this.barracksSize-this.getArmySize()},e.prototype.increaseBarracks=function(e){this.barracksSize+=e},e.prototype.decreaseBarracks=function(e){this.barracksSize-=e},e.prototype.getBarracksSize=function(){return this.barracksSize},e.prototype.getDefenseStrength=function(){var e=this.defense;return this.troops.forEach(function(n){return e+=n[0].defense*n[1]}),e},e.prototype.getInvasionThreat=function(){return Math.floor(this.invasionThreat)},e.prototype.increaseDefense=function(e){this.defense+=e},e.prototype.decreaseDefense=function(e){this.defense-=e},e.prototype.hasRecruits=function(){return this.recruits.length>0},e.prototype.registerForRecruitsUpdate=function(){return this.recruitsUpdate.asObservable()},e.prototype.registerForMissionsUpdate=function(){return this.missionsUpdate.asObservable()},e.prototype.getAttackStrength=function(){var e=0;return this.troops.forEach(function(n){return e+=n[0].strength*n[1]}),e},e.prototype.startMission=function(e){var n=this;this.modalService.open(mu.MISSION),this.modalService.setMission(e);var t=this.modalService.registerForMissionResponse().subscribe(function(e){if(t.unsubscribe(),null!=e){var l=!0,r=0,i=0,o=0;if(e.troops.forEach(function(e){if(r+=e[1],i+=e[1]*e[0].strength*n.getTroopEffectsMultiplier(e[0].troop),o+=e[1]*e[0].defense*n.getTroopEffectsMultiplier(e[0].troop),l){var t=n.troops.find(function(n){return n[0].troop===e[0].troop});e[1]>t[1]&&(l=!1,n.modalService.info("You don't have so many "+Au.prepareTroopName(t[0].troop)))}}),0===r?(n.modalService.info("You cannot start mission without any troops"),l=!1):i<e.requiredStrength?(n.modalService.info("Selected troops don't meet strength requirement"),l=!1):o<e.requiredDefense&&(n.modalService.info("Selected troops don't meet defense requirement"),l=!1),!l)return;if(!n.resourcesService.decreaseResources(e.cost,"Army",!0,r))return void n.modalService.info("You don't have enough resources to start this mission");e.troops.forEach(function(e){n.troops.find(function(n){return n[0].troop===e[0].troop})[1]-=e[1]}),n.missionsInProgress.push([e,0])}})},e.prototype.addMilitia=function(e){this.troops.find(function(e){return e[0].troop===Iu.MILITIA})[1]+=e},e.prototype.decreaseInvasionThreat=function(e){this.invasionThreat-=e},e.prototype.increaseStash=function(e){this.stashSize+=e},e.prototype.decreaseStash=function(e){this.stashSize-=e},e.prototype.getEnemyPower=function(){return this.enemyPower},e.ngInjectableDef=ve({factory:function(){return new e(Ye(xg),Ye(Ig),Ye(Tg),Ye(wm),Ye(_g),Ye(rS),Ye(Sg))},token:e,providedIn:"root"}),e}(),lE=function(){function e(e,n){this.armyService=e,this.resourcesService=n,this.id=Math.random(),this.progress=0,this.multiplier=0}return e.prototype.ngOnInit=function(){var e=this;this.updateSubscription=this.armyService.registerForRecruitsUpdate().subscribe(function(){e.progressRef&&(e.progressRef.nativeElement.style.width=e.progress/e.troop.recruitTime*100+"%")})},e.prototype.ngAfterViewInit=function(){this.progressRef&&(this.progressRef.nativeElement.style.width=this.progress/this.troop.recruitTime*100+"%")},e.prototype.getTroopName=function(){return Iu[this.troop.troop]},e.prototype.getResourceName=function(e){return Au.prepareResourceName(e)},e.prototype.getCost=function(){return this.troop.cost},e.prototype.checkResource=function(e){return 0===this.resourcesService.hasResource(e.key,e.value*this.multiplier,"Army",!0)},e.prototype.isAvailable=function(){return this.resourcesService.hasResources(this.troop.cost,"Army",this.multiplier,!0)},e}(),rE=gr({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{position:relative;display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #000;font-size:1.2em}#wrapperNotAvailable[_ngcontent-%COMP%]{position:relative;display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #57575a;font-size:1.2em}#text[_ngcontent-%COMP%]{position:relative;z-index:2}#textNotAvailable[_ngcontent-%COMP%]{position:relative;z-index:2;color:#57575a}#progressId[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background-color:var(--active-colour);z-index:1}hr[_ngcontent-%COMP%]{border-color:#000}.costTitle[_ngcontent-%COMP%], .statsTitle[_ngcontent-%COMP%]{text-align:left}.tooltipSpan[_ngcontent-%COMP%]{min-width:125px}.missing[_ngcontent-%COMP%]{color:#8b0000}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center}"]],data:{}});function iE(e){return so(0,[(e()(),zr(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),io(1,null,["",""]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.value*n.component.multiplier)})}function oE(e){return so(0,[(e()(),zr(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),zr(1,0,null,null,1,"div",[["class","missing"]],null,null,null,null,null)),(e()(),io(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.value*n.component.multiplier)})}function uE(e){return so(0,[(e()(),zr(0,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),zr(1,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,iE)),ki(3,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,oE)),ki(5,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),zr(6,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(7,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){var t=n.component;e(n,3,0,t.checkResource(n.context.$implicit)),e(n,5,0,!t.checkResource(n.context.$implicit)),e(n,7,0,t.getResourceName(n.context.$implicit.key),"resources")},null)}function sE(e){return so(0,[(e()(),zr(0,0,null,null,23,"div",[["appTooltip",""],["class","tooltip"],["id","wrapper"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==Ei(e,1).onmousemove(t)&&l),l},null,null)),ki(1,16384,null,0,af,[],{elementId:[0,"elementId"]},null),(e()(),zr(2,0,[[1,0],["progressId",1]],null,0,"div",[["id","progressId"]],null,null,null,null,null)),(e()(),zr(3,0,null,null,18,"span",[["class","tooltipSpan"]],[[8,"id",0]],null,null,null,null)),(e()(),io(4,null,[" "," x "," "])),to(5,1),(e()(),zr(6,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),zr(7,0,null,null,1,"div",[["class","statsTitle"]],null,null,null,null,null)),(e()(),io(-1,null,["Stats (per soldier):"])),(e()(),zr(9,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),zr(10,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(11,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),io(12,null,[": ",""])),(e()(),zr(13,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),zr(14,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(15,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),io(16,null,[": ",""])),(e()(),zr(17,0,null,null,1,"div",[["class","costTitle"]],null,null,null,null,null)),(e()(),io(-1,null,["Cost:"])),(e()(),jr(16777216,null,null,2,null,uE)),ki(20,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null),Mi(0,Ks,[Vl]),(e()(),zr(22,0,null,null,1,"div",[["id","text"]],null,null,null,null,null)),(e()(),io(23,null,[""," - ",""]))],function(e,n){var t=n.component;e(n,1,0,t.id),e(n,11,0,"attack","army"),e(n,15,0,"defense","army"),e(n,20,0,hr(n,20,0,Ei(n,21).transform(t.getCost())))},function(e,n){var t=n.component;e(n,3,0,Vr(1,"",t.id,""));var l=t.multiplier,r=hr(n,4,1,e(n,5,0,Ei(n.parent,0),t.getTroopName()));e(n,4,0,l,r),e(n,12,0,t.troop.strength),e(n,16,0,t.troop.defense),e(n,23,0,t.getTroopName(),t.count)})}function aE(e){return so(0,[(e()(),zr(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),io(1,null,["",""]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.value*n.component.multiplier)})}function cE(e){return so(0,[(e()(),zr(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),zr(1,0,null,null,1,"div",[["class","missing"]],null,null,null,null,null)),(e()(),io(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.value*n.component.multiplier)})}function pE(e){return so(0,[(e()(),zr(0,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),zr(1,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,aE)),ki(3,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,cE)),ki(5,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),zr(6,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(7,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){var t=n.component;e(n,3,0,t.checkResource(n.context.$implicit)),e(n,5,0,!t.checkResource(n.context.$implicit)),e(n,7,0,t.getResourceName(n.context.$implicit.key),"resources")},null)}function hE(e){return so(0,[(e()(),zr(0,0,null,null,23,"div",[["appTooltip",""],["class","tooltip"],["id","wrapperNotAvailable"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==Ei(e,1).onmousemove(t)&&l),l},null,null)),ki(1,16384,null,0,af,[],{elementId:[0,"elementId"]},null),(e()(),zr(2,0,[[1,0],["progressId",1]],null,0,"div",[["id","progressId"]],null,null,null,null,null)),(e()(),zr(3,0,null,null,18,"span",[["class","tooltipSpan"]],[[8,"id",0]],null,null,null,null)),(e()(),io(4,null,[" "," x "," "])),to(5,1),(e()(),zr(6,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),zr(7,0,null,null,1,"div",[["class","statsTitle"]],null,null,null,null,null)),(e()(),io(-1,null,["Stats (per soldier):"])),(e()(),zr(9,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),zr(10,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(11,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),io(12,null,[": ",""])),(e()(),zr(13,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),zr(14,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(15,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),io(16,null,[": ",""])),(e()(),zr(17,0,null,null,1,"div",[["class","costTitle"]],null,null,null,null,null)),(e()(),io(-1,null,["Cost:"])),(e()(),jr(16777216,null,null,2,null,pE)),ki(20,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null),Mi(0,Ks,[Vl]),(e()(),zr(22,0,null,null,1,"div",[["id","textNotAvailable"]],null,null,null,null,null)),(e()(),io(23,null,[""," - ",""]))],function(e,n){var t=n.component;e(n,1,0,t.id),e(n,11,0,"attack","army"),e(n,15,0,"defense","army"),e(n,20,0,hr(n,20,0,Ei(n,21).transform(t.getCost())))},function(e,n){var t=n.component;e(n,3,0,Vr(1,"",t.id,""));var l=t.multiplier,r=hr(n,4,1,e(n,5,0,Ei(n.parent,0),t.getTroopName()));e(n,4,0,l,r),e(n,12,0,t.troop.strength),e(n,16,0,t.troop.defense),e(n,23,0,t.getTroopName(),t.count)})}function dE(e){return so(0,[Mi(0,Ys,[]),Qi(671088640,1,{progressRef:0}),(e()(),jr(16777216,null,null,1,null,sE)),ki(3,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,hE)),ki(5,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,3,0,t.isAvailable()),e(n,5,0,!t.isAvailable())},null)}var fE=function(){function e(e){this.armyService=e,this.progress=0,this.id=Math.random()}return e.prototype.ngOnInit=function(){var e=this;this.updateSubscription=this.armyService.registerForMissionsUpdate().subscribe(function(){e.progressRef&&(e.progressRef.nativeElement.style.width=e.progress/e.mission.time*100+"%")})},e.prototype.ngAfterViewInit=function(){this.progressRef&&(this.progressRef.nativeElement.style.width=this.progress/this.mission.time*100+"%")},e.prototype.getMissionName=function(e){return Ru[e]},e.prototype.getTroopName=function(e){return Au.prepareTroopName(e)},e}(),gE=gr({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #000;font-size:1.2em}#text[_ngcontent-%COMP%]{position:relative;z-index:2}#progressId[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background-color:var(--active-colour);z-index:1}hr[_ngcontent-%COMP%]{border-color:#000}"]],data:{}});function vE(e){return so(0,[(e()(),zr(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),io(1,null,[" ",": "," "]))],null,function(e,n){e(n,1,0,n.component.getTroopName(n.context.$implicit[0].troop),n.context.$implicit[1])})}function mE(e){return so(0,[(e()(),zr(0,0,null,null,3,null,null,null,null,null,null,null)),(e()(),zr(1,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,vE)),ki(3,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null),(e()(),jr(0,null,null,0))],function(e,n){e(n,3,0,n.component.mission.troops)},null)}function yE(e){return so(0,[Qi(402653184,1,{progressRef:0}),(e()(),zr(1,0,null,null,8,"div",[["appTooltip",""],["class","tooltip"],["id","wrapper"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==Ei(e,2).onmousemove(t)&&l),l},null,null)),ki(2,16384,null,0,af,[],{elementId:[0,"elementId"]},null),(e()(),zr(3,0,[[1,0],["progressId",1]],null,0,"div",[["id","progressId"]],null,null,null,null,null)),(e()(),zr(4,0,null,null,1,"div",[["id","text"]],null,null,null,null,null)),(e()(),io(5,null,["",""])),(e()(),zr(6,0,null,null,3,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),io(7,null,[" "," "])),(e()(),jr(16777216,null,null,1,null,mE)),ki(9,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.id),e(n,9,0,t.mission.troops&&t.mission.troops.length>0)},function(e,n){var t=n.component;e(n,5,0,t.getMissionName(t.mission.mission)),e(n,6,0,Vr(1,"",t.id,"")),e(n,7,0,t.mission.description)})}var SE=function(e){function n(n,t,l,r){return e.call(this,t,n,l,r,Mu.FORT,Nu.FORT)||this}return r(n,e),n.ngInjectableDef=ve({factory:function(){return new n(Ye(xg),Ye(lS),Ye(Sg),Ye(oS))},token:n,providedIn:"root"}),n}(uS),EE=function(){function e(e,n,t,l){this.armyService=e,this.resourcesService=n,this.fortService=t,this.changeDetectorRef=l,this.selection=1}return e.prototype.ngOnInit=function(){var e=this;this.armyService.registerForRecruitsUpdate().subscribe(function(){e.changeDetectorRef.destroyed||e.changeDetectorRef.detectChanges()})},e.prototype.changeSelection=function(e){this.selection=e},e.prototype.getMissions=function(){return this.armyService.getMissions()},e.prototype.getCurrentMissions=function(){return this.armyService.getCurrentMissions()},e.prototype.getTroops=function(){return this.armyService.getTroops()},e.prototype.getRecruits=function(){return this.armyService.getRecruits()},e.prototype.recruit=function(e){this.armyService.recruit(e,this.selection)},e.prototype.isDev=function(){return!Gu.production},e.prototype.progress=function(){this.armyService.progressRecruitment(10)},e.prototype.getBarracksSize=function(){return this.armyService.getBarracksSize()},e.prototype.getTroopsSize=function(){return this.armyService.getArmySize()},e.prototype.getUnemployed=function(){return this.resourcesService.getPeople()},e.prototype.getDefenseStrength=function(){return this.armyService.getDefenseStrength()},e.prototype.getInvasionThreat=function(){return this.armyService.getInvasionThreat()},e.prototype.getAttackStrength=function(){return this.armyService.getAttackStrength()},e.prototype.startMission=function(e){this.armyService.startMission(e)},e.prototype.checkForTrainingSquare=function(){return void 0!==this.fortService.getBuildings().find(function(e){return e.getBuildingType()===bu.TRAINING_SQUARE})},e}(),bE=gr({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{margin:.7%;height:100%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#categories[_ngcontent-%COMP%]{display:flex;flex-direction:row;border:1px solid #000;height:91.5%;text-align:center}.category[_ngcontent-%COMP%]{text-align:center;flex:0 0 33%;display:flex;flex-direction:column;border:1px solid #000;align-items:center}.category2[_ngcontent-%COMP%]{flex:auto;display:flex;flex-direction:column;border:1px solid #000}.recruits[_ngcontent-%COMP%]{text-align:center;flex:0 0 50%;display:flex;flex-direction:column;align-items:center;overflow-y:auto;overflow-x:hidden;border-bottom:1px solid #000}.missionsInProgress[_ngcontent-%COMP%]{text-align:center;flex:0 0 50%;display:flex;flex-direction:column;align-items:center;overflow-y:auto;overflow-x:hidden}.category3[_ngcontent-%COMP%]:last-of-type{border-top:1px solid #000}.title[_ngcontent-%COMP%]{padding:2px;width:100%;font-weight:bolder;font-size:.9em;margin-bottom:5px;display:block;border-bottom:1px solid #000}#numbers[_ngcontent-%COMP%]{margin-top:-6px;padding:0;margin-bottom:5px}.number[_ngcontent-%COMP%]{border:1px solid #000;padding:2px 4px;background-color:var(--passive-colour);font-size:.75em;cursor:pointer}.active[_ngcontent-%COMP%], .number[_ngcontent-%COMP%]:hover{background-color:var(--active-colour)}app-mission[_ngcontent-%COMP%]{display:inline-block;margin:4px;width:75%;font-size:.7em}app-troop[_ngcontent-%COMP%]{display:inline-block;margin:4px;width:75%;font-size:.7em;cursor:pointer}.mission[_ngcontent-%COMP%]{cursor:pointer}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}#noTrainingSquare[_ngcontent-%COMP%]{margin-left:60px;color:#8b0000}"]],data:{}});function OE(e){return so(0,[(e()(),zr(0,0,null,null,1,"span",[["id","noTrainingSquare"]],null,null,null,null,null)),(e()(),io(-1,null,["No Training square available"]))],null,null)}function RE(e){return so(0,[(e()(),zr(0,0,null,null,1,"span",[["class","number"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.changeSelection(1)&&l),l},null,null)),(e()(),io(-1,null,["1x"]))],null,null)}function CE(e){return so(0,[(e()(),zr(0,0,null,null,1,"span",[["class","number active"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.changeSelection(1)&&l),l},null,null)),(e()(),io(-1,null,["1x"]))],null,null)}function _E(e){return so(0,[(e()(),zr(0,0,null,null,1,"span",[["class","number"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.changeSelection(5)&&l),l},null,null)),(e()(),io(-1,null,["5x"]))],null,null)}function TE(e){return so(0,[(e()(),zr(0,0,null,null,1,"span",[["class","number active"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.changeSelection(5)&&l),l},null,null)),(e()(),io(-1,null,["5x"]))],null,null)}function IE(e){return so(0,[(e()(),zr(0,0,null,null,1,"span",[["class","number"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.changeSelection(10)&&l),l},null,null)),(e()(),io(-1,null,["10x"]))],null,null)}function AE(e){return so(0,[(e()(),zr(0,0,null,null,1,"span",[["class","number active"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.changeSelection(10)&&l),l},null,null)),(e()(),io(-1,null,["10x"]))],null,null)}function wE(e){return so(0,[(e()(),zr(0,0,null,null,1,"app-troop",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.recruit(e.context.$implicit[0])&&l),l},dE,rE)),ki(1,4308992,null,0,lE,[tE,xg],{troop:[0,"troop"],count:[1,"count"],multiplier:[2,"multiplier"]},null)],function(e,n){e(n,1,0,n.context.$implicit[0],n.context.$implicit[1],Vr(1,"",n.component.selection,""))},null)}function NE(e){return so(0,[(e()(),zr(0,0,null,null,1,"app-mission",[["class","mission"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.startMission(e.context.$implicit)&&l),l},yE,gE)),ki(1,4308992,null,0,fE,[tE],{mission:[0,"mission"]},null)],function(e,n){e(n,1,0,n.context.$implicit)},null)}function PE(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.progress()&&l),l},null,null)),(e()(),io(-1,null,["recruit"]))],null,null)}function DE(e){return so(0,[(e()(),zr(0,0,null,null,1,"app-troop",[],null,null,null,dE,rE)),ki(1,4308992,null,0,lE,[tE,xg],{troop:[0,"troop"],count:[1,"count"],progress:[2,"progress"]},null)],function(e,n){e(n,1,0,n.context.$implicit[0],n.context.$implicit[1],n.context.$implicit[2])},null)}function kE(e){return so(0,[(e()(),zr(0,0,null,null,1,"app-mission",[],null,null,null,yE,gE)),ki(1,4308992,null,0,fE,[tE],{mission:[0,"mission"],progress:[1,"progress"],id:[2,"id"]},null)],function(e,n){e(n,1,0,n.context.$implicit[0],n.context.$implicit[1],n.context.index)},null)}function ME(e){return so(0,[(e()(),zr(0,0,null,null,57,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,1,"div",[["id","title"]],null,null,null,null,null)),(e()(),io(-1,null,["Army"])),(e()(),zr(3,0,null,null,17,"div",[["class","icon"]],null,null,null,null,null)),(e()(),zr(4,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(5,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),io(6,null,["\xa0","/"," \xa0\xa0 "])),(e()(),zr(7,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(8,114688,null,0,cf,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),io(9,null,["\xa0"," \xa0\xa0\xa0 "])),(e()(),zr(10,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(11,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),io(12,null,["\xa0"," \xa0\xa0\xa0 "])),(e()(),zr(13,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(14,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),io(15,null,["\xa0"," \xa0\xa0\xa0 "])),(e()(),zr(16,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(17,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),io(18,null,["\xa0"," "])),(e()(),jr(16777216,null,null,1,null,OE)),ki(20,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),zr(21,0,null,null,36,"div",[["id","categories"]],null,null,null,null,null)),(e()(),zr(22,0,null,null,17,"div",[["class","category"]],null,null,null,null,null)),(e()(),zr(23,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),io(-1,null,["GARRISON"])),(e()(),zr(25,0,null,null,12,"div",[["id","numbers"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,RE)),ki(27,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,CE)),ki(29,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,_E)),ki(31,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,TE)),ki(33,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,IE)),ki(35,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,AE)),ki(37,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,wE)),ki(39,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null),(e()(),zr(40,0,null,null,4,"div",[["class","category"]],null,null,null,null,null)),(e()(),zr(41,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),io(-1,null,["MISSIONS"])),(e()(),jr(16777216,null,null,1,null,NE)),ki(44,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null),(e()(),zr(45,0,null,null,12,"div",[["class","category2"]],null,null,null,null,null)),(e()(),zr(46,0,null,null,6,"div",[["class","recruits"]],null,null,null,null,null)),(e()(),zr(47,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),io(-1,null,["RECRUITS"])),(e()(),jr(16777216,null,null,1,null,PE)),ki(50,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,DE)),ki(52,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null),(e()(),zr(53,0,null,null,4,"div",[["class","missionsInProgress"]],null,null,null,null,null)),(e()(),zr(54,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),io(-1,null,["MISSIONS IN PROGRESS"])),(e()(),jr(16777216,null,null,1,null,kE)),ki(57,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,5,0,"barracks","army","Barracks"),e(n,8,0,"hammer","Workers","0 0 0 2px"),e(n,11,0,"invasion","army","Invasion threat"),e(n,14,0,"attack","army","Attack strength"),e(n,17,0,"defense","army","Defense strength"),e(n,20,0,!t.checkForTrainingSquare()),e(n,27,0,1!==t.selection),e(n,29,0,1===t.selection),e(n,31,0,5!==t.selection),e(n,33,0,5===t.selection),e(n,35,0,10!==t.selection),e(n,37,0,10===t.selection),e(n,39,0,t.getTroops()),e(n,44,0,t.getMissions()),e(n,50,0,t.isDev()),e(n,52,0,t.getRecruits()),e(n,57,0,t.getCurrentMissions())},function(e,n){var t=n.component;e(n,6,0,t.getTroopsSize(),t.getBarracksSize()),e(n,9,0,t.getUnemployed()),e(n,12,0,t.getInvasionThreat()),e(n,15,0,t.getAttackStrength()),e(n,18,0,t.getDefenseStrength())})}function xE(e){return so(0,[(e()(),zr(0,0,null,null,1,"app-army",[],null,null,null,ME,bE)),ki(1,114688,null,0,EE,[tE,xg,SE,Rl],null,null)],function(e,n){e(n,1,0)},null)}var LE=ai("app-army",EE,xE,{},{},[]),FE=function(){return function(e,n,t,l,r,i){this.prayer=e,this.cost=n,this.requiredFaithLevel=t,this.religion=l,this.description=r,this.effect=i}}(),UE=function(){function e(e,n,t){this.servicesService=e,this.modalService=n,this.resourcesService=t,this.faith=0,this.faithCap=40,this.faithLevel=1,this.faithShield=0,this.religion=Tu.NONE,this.prayers=[],e.addService(Nu.RELIGION,this),this.initPrayers()}return e.prototype.initPrayers=function(){var e=this;this.prayers=[],Object.entries(ss.PRAYERS).forEach(function(n){e.prayers.push(new FE(Ou[n[0]],n[1].FAITH,n[1].FAITH_LEVEL,n[1].RELIGION,n[1].DESCRIPTION,n[1].FINISH))})},e.prototype.load=function(e){this.faith=e.faith,this.faithCap=e.faithCap,this.faithLevel=e.faithLevel,this.religion=e.religion,this.faithShield=e.faithShield,this.prayers.find(function(e){return e.prayer===Ou.PREACH}).cost=e.preachCost},e.prototype.save=function(){return{faith:this.faith,faithCap:this.faithCap,faithLevel:this.faithLevel,religion:this.religion,faithShield:this.faithShield,preachCost:this.prayers.find(function(e){return e.prayer===Ou.PREACH}).cost}},e.prototype.reset=function(e,n){this.faith=0,this.faithCap=40,this.faithLevel=1,this.faithShield=0,this.religion=Tu.NONE,this.prayers=[],this.initPrayers()},e.prototype.getFaith=function(){return this.faith},e.prototype.increaseFaith=function(e){this.faith+=e,this.faith>this.faithCap&&(this.faith=this.faithCap)},e.prototype.increaseFaithCap=function(e){this.faithCap+=e},e.prototype.decreaseFaithCap=function(e){this.faithCap-=e,this.faith>this.faithCap&&(this.faith=this.faithCap)},e.prototype.decreaseFaith=function(e){return this.faith-e>=0?(this.faith-=e,0):e-this.faith},e.prototype.getFaithCap=function(){return this.faithCap},e.prototype.getPrayers=function(){var e=this;return this.prayers.filter(function(n){return(n.religion===Tu.NONE||n.religion===e.religion)&&n.requiredFaithLevel<=e.faithLevel})},e.prototype.pray=function(e){e.cost<=this.faith?(this.faith-=e.cost,e.effect(this.servicesService),e.prayer===Ou.PREACH&&(this.prayers.find(function(e){return e.prayer===Ou.PREACH}).cost+=10)):this.modalService.info("Not enough faith for this prayer!")},e.prototype.increaseFaithLevel=function(e){this.faithLevel+=e},e.prototype.increaseFaithShield=function(e){this.faithShield+=e},e.prototype.decreaseFaithShield=function(e){if(this.faithShield>=e)return this.faithShield-=e,0;var n=e-this.faithShield;return this.faithShield=0,n},e.prototype.getFaithLevel=function(){return this.faithLevel},e.prototype.getFaithShield=function(){return this.faithShield},e.prototype.getCurrentReligion=function(){return this.religion},e.prototype.getReligionSettings=function(e){return ss.getReligion(e)},e.prototype.changeReligion=function(e){var n=this;this.modalService.open(mu.CONFIRM),this.modalService.setModalText("Are you sure you want to change religion?");var t=this.modalService.registerForConfirmation().subscribe(function(l){if(t.unsubscribe(),l){var r=n.getReligionSettings(e);if(n.faith<r.FAITH)return void n.modalService.info("Not enough faith");var i=new Map;if(r.OFFERING.forEach(function(e){return i.set(e.resource,e.amount)}),!n.resourcesService.hasResources(i,"Religion",1,!0))return void n.modalService.info("Not enough offering resources");n.faith-=r.FAITH,n.resourcesService.decreaseResources(i,"Religion",!0),n.religion=e}})},e.ngInjectableDef=ve({factory:function(){return new e(Ye(Sg),Ye(Ig),Ye(xg))},token:e,providedIn:"root"}),e}(),HE=function(){function e(e){this.religionService=e}return e.prototype.ngOnInit=function(){},e.prototype.getPrayerName=function(){return Au.preparePrayerName(this.prayer.prayer)},e.prototype.isAvailable=function(){return this.religionService.getFaith()>=this.prayer.cost},e}(),GE=gr({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{display:inline-block;width:47%;padding:3px;margin:3px;text-align:center;border:1px solid #000}#wrapperNotAvailable[_ngcontent-%COMP%]{display:inline-block;width:47%;padding:3px;margin:3px;text-align:center;border:1px solid #646464}#titleGrey[_ngcontent-%COMP%]{display:inline-block;color:#646464}.notMet[_ngcontent-%COMP%]{color:#8b0000}.title[_ngcontent-%COMP%]{text-align:left}hr[_ngcontent-%COMP%]{border-color:#000}#progress[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background-color:var(--active-colour);z-index:1}#text[_ngcontent-%COMP%]{position:relative;z-index:2}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center}"]],data:{}});function BE(e){return so(0,[(e()(),zr(0,0,null,null,9,"div",[["appTooltip",""],["class","tooltip"],["id","wrapper"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==Ei(e,1).onmousemove(t)&&l),l},null,null)),ki(1,16384,null,0,af,[],{elementId:[0,"elementId"]},null),(e()(),zr(2,0,null,null,1,"div",[["id","title"]],null,null,null,null,null)),(e()(),io(3,null,["",""])),(e()(),zr(4,0,null,null,5,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),io(5,null,[" "," "])),(e()(),zr(6,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),io(7,null,[" "," "])),(e()(),zr(8,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(9,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){e(n,1,0,n.component.id),e(n,9,0,"faith","religion")},function(e,n){var t=n.component;e(n,3,0,t.getPrayerName()),e(n,4,0,Vr(1,"",t.id,"")),e(n,5,0,t.prayer.description),e(n,7,0,t.prayer.cost)})}function VE(e){return so(0,[(e()(),zr(0,0,null,null,10,"div",[["appTooltip",""],["class","tooltip"],["id","wrapperNotAvailable"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==Ei(e,1).onmousemove(t)&&l),l},null,null)),ki(1,16384,null,0,af,[],{elementId:[0,"elementId"]},null),(e()(),zr(2,0,null,null,1,"div",[["id","titleGrey"]],null,null,null,null,null)),(e()(),io(3,null,["",""])),(e()(),zr(4,0,null,null,6,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),io(5,null,[" "," "])),(e()(),zr(6,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),zr(7,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),io(8,null,[" "," "])),(e()(),zr(9,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(10,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){e(n,1,0,n.component.id),e(n,10,0,"faith","religion")},function(e,n){var t=n.component;e(n,3,0,t.getPrayerName()),e(n,4,0,Vr(1,"",t.id,"")),e(n,5,0,t.prayer.description),e(n,8,0,t.prayer.cost)})}function WE(e){return so(0,[(e()(),jr(16777216,null,null,1,null,BE)),ki(1,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,VE)),ki(3,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.isAvailable()),e(n,3,0,!t.isAvailable())},null)}var jE=function(){function e(e,n){this.religionService=e,this.resourcesService=n}return e.prototype.ngOnInit=function(){},e.prototype.getFaith=function(){return this.religionService.getFaith()},e.prototype.getFaithCap=function(){return this.religionService.getFaithCap()},e.prototype.increaseFaith=function(e){this.religionService.increaseFaith(e)},e.prototype.isDev=function(){return!Gu.production},e.prototype.getPrayers=function(){return this.religionService.getPrayers()},e.prototype.pray=function(e){this.religionService.pray(e)},e.prototype.getFaithShield=function(){return Au.round(this.religionService.getFaithShield(),2)},e.prototype.getReligions=function(){return[Tu.NONE,Tu.FERTILITY,Tu.NATURE,Tu.TECHNOLOGY,Tu.WAR]},e.prototype.getReligionName=function(e){return Au.prepareReligionName(e)},e.prototype.getCurrentReligion=function(){return this.religionService.getCurrentReligion()},e.prototype.getCurrentReligionName=function(){return Tu[this.getCurrentReligion()]},e.prototype.getCurrentReligionDisplayName=function(){return Au.prepareReligionName(this.getCurrentReligion())},e.prototype.changeReligion=function(e){this.religionService.changeReligion(e)},e.prototype.getReligionSettings=function(e){return ss.getReligion(e)},e.prototype.getResourceString=function(e){return vu[e]},e.prototype.hasResource=function(e){return 0===this.resourcesService.hasResource(e.resource,e.amount,"Religion",!0)},e}(),zE=gr({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:100%;margin:.5%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#table[_ngcontent-%COMP%]{display:flex;flex-direction:row;border:1px solid #000;height:85%}.column[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:auto;border:1px solid #000}#prayers[_ngcontent-%COMP%]{flex:0 0 70%;overflow-y:auto}#religions[_ngcontent-%COMP%]{flex:1 0 auto;overflow-y:auto}.prayer[_ngcontent-%COMP%]{display:inline}.tableTitle[_ngcontent-%COMP%]{border-bottom:1px solid #000;text-align:center}app-prayer[_ngcontent-%COMP%]{cursor:pointer}.faith[_ngcontent-%COMP%]{margin-right:-2px}.religion[_ngcontent-%COMP%]{border:1px solid #000;text-align:center;margin:3px;cursor:pointer}.active[_ngcontent-%COMP%]{background-color:var(--active-colour);cursor:auto}.tooltip[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:100px}.notMet[_ngcontent-%COMP%]{color:#8b0000}.inline[_ngcontent-%COMP%]{display:inline}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.icon2[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center}"]],data:{}});function YE(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.increaseFaith(10)&&l),l},null,null)),(e()(),io(-1,null,["Increase faith"]))],null,null)}function KE(e){return so(0,[(e()(),zr(0,0,null,null,2,"div",[["class","prayer"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,1,"app-prayer",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.pray(e.context.$implicit)&&l),l},WE,GE)),ki(2,114688,null,0,HE,[UE],{prayer:[0,"prayer"],id:[1,"id"]},null)],function(e,n){e(n,2,0,n.context.$implicit,n.context.index)},null)}function qE(e){return so(0,[(e()(),zr(0,0,null,null,1,"div",[["class","religion active"]],null,null,null,null,null)),(e()(),io(1,null,[" "," "]))],null,function(e,n){e(n,1,0,n.component.getReligionName(n.parent.context.$implicit))})}function $E(e){return so(0,[(e()(),zr(0,0,null,null,1,"div",[["class","inline"]],null,null,null,null,null)),(e()(),io(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.getReligionSettings(n.parent.parent.context.$implicit).FAITH)})}function QE(e){return so(0,[(e()(),zr(0,0,null,null,1,"div",[["class","inline notMet"]],null,null,null,null,null)),(e()(),io(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.getReligionSettings(n.parent.parent.context.$implicit).FAITH)})}function ZE(e){return so(0,[(e()(),zr(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),io(-1,null,["offering:"]))],null,null)}function XE(e){return so(0,[(e()(),zr(0,0,null,null,1,"div",[["class","inline"]],null,null,null,null,null)),(e()(),io(1,null,[""," "]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.amount)})}function JE(e){return so(0,[(e()(),zr(0,0,null,null,1,"div",[["class","inline notMet"]],null,null,null,null,null)),(e()(),io(1,null,[""," "]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.amount)})}function eb(e){return so(0,[(e()(),zr(0,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),zr(1,0,null,null,6,"div",[["class","icon2"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,XE)),ki(3,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,JE)),ki(5,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),zr(6,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(7,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){var t=n.component;e(n,3,0,t.hasResource(n.context.$implicit)),e(n,5,0,!t.hasResource(n.context.$implicit)),e(n,7,0,t.getResourceString(n.context.$implicit.resource),"resources")},null)}function nb(e){return so(0,[(e()(),zr(0,0,null,null,16,"div",[["appTooltip",""],["class","religion tooltip"]],null,[[null,"click"],[null,"mousemove"]],function(e,n,t){var l=!0,r=e.component;return"mousemove"===n&&(l=!1!==Ei(e,1).onmousemove(t)&&l),"click"===n&&(l=!1!==r.changeReligion(e.parent.context.$implicit)&&l),l},null,null)),ki(1,16384,null,0,af,[],{elementId:[0,"elementId"]},null),(e()(),io(2,null,[" "," "])),(e()(),zr(3,0,null,null,13,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),io(4,null,[" "," "])),(e()(),zr(5,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),zr(6,0,null,null,6,"div",[["class","icon2"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,$E)),ki(8,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,QE)),ki(10,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),zr(11,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(12,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),jr(16777216,null,null,1,null,ZE)),ki(14,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,eb)),ki(16,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,1,0,0-n.parent.context.$implicit),e(n,8,0,t.getFaith()>=t.getReligionSettings(n.parent.context.$implicit).FAITH),e(n,10,0,t.getFaith()<t.getReligionSettings(n.parent.context.$implicit).FAITH),e(n,12,0,"faith","religion"),e(n,14,0,t.getReligionSettings(n.parent.context.$implicit).OFFERING.length>0),e(n,16,0,t.getReligionSettings(n.parent.context.$implicit).OFFERING)},function(e,n){var t=n.component;e(n,2,0,t.getReligionName(n.parent.context.$implicit)),e(n,3,0,Vr(1,"",0-n.parent.context.$implicit,"")),e(n,4,0,t.getReligionName(n.parent.context.$implicit))})}function tb(e){return so(0,[(e()(),zr(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,qE)),ki(2,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,nb)),ki(4,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,n.context.$implicit===t.getCurrentReligion()),e(n,4,0,n.context.$implicit!==t.getCurrentReligion())},null)}function lb(e){return so(0,[(e()(),zr(0,0,null,null,32,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),zr(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["Religion"])),(e()(),zr(4,0,null,null,9,"div",[],null,null,null,null,null)),(e()(),zr(5,0,null,null,1,null,null,null,null,null,null,null)),(e()(),io(-1,null,["Faith"])),(e()(),zr(7,0,null,null,1,"app-icon",[["class","faith"]],null,null,null,hf,pf)),ki(8,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),zr(9,0,null,null,1,null,null,null,null,null,null,null)),(e()(),io(-1,null,[":"])),(e()(),io(11,null,[" ","/"," "])),(e()(),jr(16777216,null,null,1,null,YE)),ki(13,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),zr(14,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),io(-1,null,[" Faith shield "])),(e()(),zr(16,0,null,null,1,"app-icon",[["class","prayer"]],null,null,null,hf,pf)),ki(17,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),io(18,null,[" : "," "])),(e()(),zr(19,0,null,null,13,"div",[["id","table"]],null,null,null,null,null)),(e()(),zr(20,0,null,null,7,"div",[["class","column"],["id","prayers"]],null,null,null,null,null)),(e()(),zr(21,0,null,null,3,"span",[["class","tableTitle"]],null,null,null,null,null)),(e()(),io(-1,null,[" Prayers "])),(e()(),zr(23,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(24,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),zr(25,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,KE)),ki(27,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null),(e()(),zr(28,0,null,null,4,"div",[["class","column"],["id","religions"]],null,null,null,null,null)),(e()(),zr(29,0,null,null,1,"span",[["class","tableTitle"]],null,null,null,null,null)),(e()(),io(-1,null,["Religions"])),(e()(),jr(16777216,null,null,1,null,tb)),ki(32,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,8,0,"faith","religion"),e(n,13,0,t.isDev()),e(n,17,0,"faith_shield","religion","Faith shield"),e(n,24,0,t.getCurrentReligionName(),"religion",t.getCurrentReligionDisplayName()),e(n,27,0,t.getPrayers()),e(n,32,0,t.getReligions())},function(e,n){var t=n.component;e(n,11,0,t.getFaith(),t.getFaithCap()),e(n,18,0,t.getFaithShield())})}function rb(e){return so(0,[(e()(),zr(0,0,null,null,1,"app-religion",[],null,null,null,lb,zE)),ki(1,114688,null,0,jE,[UE,xg],null,null)],function(e,n){e(n,1,0)},null)}var ib=ai("app-religion",jE,rb,{},{},[]),ob=function(){function e(e,n,t){this.servicesService=e,this.calendarService=n,this.optionsService=t,this.forecastPeriod=1,this.forecast=[],e.addService(Nu.WEATHER,this),this.tick(0)}return e.prototype.load=function(e){this.forecastPeriod=void 0!==e.forecastPeriod?e.forecastPeriod:1,this.forecast=e.forecast},e.prototype.save=function(){return{forecastPeriod:this.forecastPeriod,forecast:this.forecast}},e.prototype.reset=function(e,n){this.forecastPeriod=1,this.forecast=[],this.today=null,this.tick(0)},e.prototype.tick=function(e){for(var n=this.calendarService.getAbsoluteDay();this.forecast.length>0&&this.forecast[0][0]<n;)this.forecast.shift();for(;this.forecast.length<this.forecastPeriod;){var t=n;0!==this.forecast.length&&(t=this.forecast[this.forecast.length-1][0]+1),this.forecast.push(this.predictDay(t))}this.today=this.forecast[0]},e.prototype.predictDay=function(e){var n,t;switch(this.calendarService.getSeasonForAbsoluteDay(e)){case Rg.SPRING:n=ku.randomBetween(10,25),t=ku.randomElement([{item:Lu.SUN,chance:40},{item:Lu.CLOUDS,chance:25},{item:Lu.WIND,chance:14},{item:Lu.RAIN,chance:20},{item:Lu.STORM,chance:1}]);break;case Rg.SUMMER:n=ku.randomBetween(15,35),t=ku.randomElement([{item:Lu.SUN,chance:50},{item:Lu.CLOUDS,chance:10},{item:Lu.WIND,chance:10},{item:Lu.RAIN,chance:20},{item:Lu.STORM,chance:10}]);break;case Rg.AUTUMN:n=ku.randomBetween(10,25),t=ku.randomElement([{item:Lu.SUN,chance:20},{item:Lu.CLOUDS,chance:40},{item:Lu.WIND,chance:10},{item:Lu.RAIN,chance:25},{item:Lu.STORM,chance:5}]);break;case Rg.WINTER:n=ku.randomBetween(-20,5),t=ku.randomElement([{item:Lu.SUN,chance:30},{item:Lu.CLOUDS,chance:20},{item:Lu.WIND,chance:15},{item:Lu.SNOW,chance:25},{item:Lu.STORM,chance:10}])}return[e,t,n]},e.prototype.getCurrentWeather=function(){return this.today[1]},e.prototype.getCurrentTemperature=function(){return this.optionsService.getOption(Eg.METRIC)?this.today[2]:1.8*this.today[2]+32},e.prototype.increaseForecastPeriod=function(e){this.forecastPeriod+=e},e.prototype.isWeather=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.includes(this.getCurrentWeather())},e.prototype.getForecast=function(){return this.forecast},e.prototype.getForecastPeriod=function(){return this.forecastPeriod},e.ngInjectableDef=ve({factory:function(){return new e(Ye(Sg),Ye(_g),Ye(bg))},token:e,providedIn:"root"}),e}(),ub=function(){function e(e,n){var t=this;this.weatherService=e,this.optionsService=n,this.metric=this.optionsService.getOption(Eg.METRIC),this.optionsSubscription||(this.optionsSubscription=this.optionsService.registerForOptionsChange().subscribe(function(){return t.metric=t.optionsService.getOption(Eg.METRIC)}))}return e.prototype.ngOnInit=function(){},e.prototype.getTodayWeather=function(){return this.weatherService.getCurrentWeather()},e.prototype.getTodayTemperature=function(){return this.weatherService.getCurrentTemperature()},e.prototype.getWeatherName=function(e){return Lu[e].toLowerCase()},e.prototype.getForecast=function(){return this.weatherService.getForecast()},e.prototype.getForecastPeriod=function(){return this.weatherService.getForecastPeriod()},e}(),sb=gr({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{margin:.5%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#forecast[_ngcontent-%COMP%]{display:flex;flex-direction:row;border:1px solid #000;text-align:center;overflow-x:auto}.weather[_ngcontent-%COMP%]{display:flex;flex:0 0 40px;flex-direction:column;border-right:1px solid #000}.day[_ngcontent-%COMP%]{border-bottom:1px solid #000}"]],data:{}});function ab(e){return so(0,[(e()(),zr(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["\xb0C"]))],null,null)}function cb(e){return so(0,[(e()(),zr(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["\xb0F"]))],null,null)}function pb(e){return so(0,[(e()(),zr(0,0,null,null,1,"span",[["class","day"]],null,null,null,null,null)),(e()(),io(-1,null,["today"]))],null,null)}function hb(e){return so(0,[(e()(),zr(0,0,null,null,1,"span",[["class","day"]],null,null,null,null,null)),(e()(),io(1,null,["+",""]))],null,function(e,n){e(n,1,0,n.parent.context.index)})}function db(e){return so(0,[(e()(),zr(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["\xb0C"]))],null,null)}function fb(e){return so(0,[(e()(),zr(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["\xb0F"]))],null,null)}function gb(e){return so(0,[(e()(),zr(0,0,null,null,13,"div",[["class","weather"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,pb)),ki(2,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,hb)),ki(4,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),zr(5,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(6,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),zr(7,0,null,null,6,"span",[["id","temp"]],null,null,null,null,null)),(e()(),io(8,null,["",""])),to(9,2),(e()(),jr(16777216,null,null,1,null,db)),ki(11,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,fb)),ki(13,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,0===n.context.index),e(n,4,0,0!==n.context.index),e(n,6,0,t.getWeatherName(n.context.$implicit[1]),"weather"),e(n,11,0,t.metric),e(n,13,0,!t.metric)},function(e,n){var t=hr(n,8,0,e(n,9,0,Ei(n.parent.parent,0),n.context.$implicit[2],"0.0-1"));e(n,8,0,t)})}function vb(e){return so(0,[(e()(),zr(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),io(-1,null,["Weather forecast: "])),(e()(),zr(2,0,null,null,2,"div",[["id","forecast"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,gb)),ki(4,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,4,0,n.component.getForecast())},null)}function mb(e){return so(0,[Mi(0,$s,[Kl]),(e()(),zr(1,0,null,null,15,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),zr(2,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),zr(3,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["Weather"])),(e()(),io(5,null,[" Weather: "," "])),(e()(),zr(6,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(7,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),zr(8,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),io(9,null,[" Temperature: ",""])),to(10,2),(e()(),jr(16777216,null,null,1,null,ab)),ki(12,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,cb)),ki(14,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,vb)),ki(16,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,7,0,t.getWeatherName(t.getTodayWeather()),"weather"),e(n,12,0,t.metric),e(n,14,0,!t.metric),e(n,16,0,t.getForecastPeriod()>1)},function(e,n){var t=n.component;e(n,5,0,t.getWeatherName(t.getTodayWeather()));var l=hr(n,9,0,e(n,10,0,Ei(n,0),t.getTodayTemperature(),"0.0-1"));e(n,9,0,l)})}function yb(e){return so(0,[(e()(),zr(0,0,null,null,1,"app-weather",[],null,null,null,mb,sb)),ki(1,114688,null,0,ub,[ob,bg],null,null)],function(e,n){e(n,1,0)},null)}var Sb=ai("app-weather",ub,yb,{},{},[]),Eb=function(){function e(e){this.royalService=e,this.id=Math.random()}return e.prototype.ngOnInit=function(){},e.prototype.getPerkName=function(){return Au.preparePerkName(this.perk.perk)},e.prototype.unlock=function(){this.royalService.unlock(this.perk)},e.prototype.isAvailable=function(){return this.royalService.getRoyalPoints()>=this.perk.cost&&(0===this.perk.maxUsages||this.perk.usages<this.perk.maxUsages)},e}(),bb=gr({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #000;font-size:1.2em}#wrapperNotAvailable[_ngcontent-%COMP%]{display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #57575a;cursor:initial;font-size:1.2em}#text[_ngcontent-%COMP%]{display:inline-block;position:relative;z-index:2}#titleGrey[_ngcontent-%COMP%]{display:inline-block;color:#57575a}.notMet[_ngcontent-%COMP%]{color:#8b0000}.title[_ngcontent-%COMP%]{text-align:left}hr[_ngcontent-%COMP%]{border-color:#000}#progress[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background-color:var(--active-colour);z-index:1}app-icon[_ngcontent-%COMP%]{margin-top:-15px;height:17px}"]],data:{}});function Ob(e){return so(0,[(e()(),zr(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),io(1,null,[" Usages: ","/"," "]))],null,function(e,n){var t=n.component;e(n,1,0,t.perk.usages,t.perk.maxUsages)})}function Rb(e){return so(0,[(e()(),zr(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),io(-1,null,[" Usages: unlimited "]))],null,null)}function Cb(e){return so(0,[(e()(),zr(0,0,null,null,14,"div",[["appTooltip",""],["class","tooltip"],["id","wrapper"]],null,[[null,"click"],[null,"mousemove"]],function(e,n,t){var l=!0,r=e.component;return"mousemove"===n&&(l=!1!==Ei(e,1).onmousemove(t)&&l),"click"===n&&(l=!1!==r.unlock()&&l),l},null,null)),ki(1,16384,null,0,af,[],{elementId:[0,"elementId"]},null),(e()(),zr(2,0,null,null,2,"div",[["id","text"]],null,null,null,null,null)),(e()(),zr(3,0,null,null,1,"div",[["class","icon"]],null,null,null,null,null)),(e()(),io(4,null,[" "," "])),(e()(),zr(5,0,null,null,9,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),io(6,null,[" ",""])),(e()(),zr(7,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(8,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),io(9,null,[" Cost: "," RP "])),(e()(),zr(10,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,Ob)),ki(12,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,Rb)),ki(14,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.id),e(n,12,0,t.perk.maxUsages>0),e(n,14,0,0===t.perk.maxUsages)},function(e,n){var t=n.component;e(n,4,0,t.getPerkName()),e(n,5,0,Vr(1,"",t.id,"")),e(n,6,0,t.perk.description),e(n,9,0,t.perk.cost)})}function _b(e){return so(0,[(e()(),zr(0,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(1,114688,null,0,cf,[],{name:[0,"name"]},null)],function(e,n){e(n,1,0,"tick")},null)}function Tb(e){return so(0,[(e()(),zr(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),io(1,null,[" Usages: ","/"," "]))],null,function(e,n){var t=n.component;e(n,1,0,t.perk.usages,t.perk.maxUsages)})}function Ib(e){return so(0,[(e()(),zr(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),io(-1,null,[" Usages: unlimited "]))],null,null)}function Ab(e){return so(0,[(e()(),zr(0,0,null,null,16,"div",[["appTooltip",""],["class","tooltip"],["id","wrapperNotAvailable"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==Ei(e,1).onmousemove(t)&&l),l},null,null)),ki(1,16384,null,0,af,[],{elementId:[0,"elementId"]},null),(e()(),zr(2,0,null,null,4,"div",[["id","titleGrey"]],null,null,null,null,null)),(e()(),zr(3,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,_b)),ki(5,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),io(6,null,[""," "])),(e()(),zr(7,0,null,null,9,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),io(8,null,[" ",""])),(e()(),zr(9,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(10,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),io(11,null,[" Cost: "," RP "])),(e()(),zr(12,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,Tb)),ki(14,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,Ib)),ki(16,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.id),e(n,5,0,t.perk.usages===t.perk.maxUsages&&t.perk.maxUsages>0),e(n,14,0,t.perk.maxUsages>0),e(n,16,0,0===t.perk.maxUsages)},function(e,n){var t=n.component;e(n,6,0,t.getPerkName()),e(n,7,0,Vr(1,"",t.id,"")),e(n,8,0,t.perk.description),e(n,11,0,t.perk.cost)})}function wb(e){return so(0,[(e()(),jr(16777216,null,null,1,null,Cb)),ki(1,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,Ab)),ki(3,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.isAvailable()),e(n,3,0,!t.isAvailable())},null)}var Nb=function(){function e(e,n,t){this.logService=e,this.royalService=n,this.kongregateService=t}return e.prototype.ngOnInit=function(){},e.prototype.buyRoyalPoints=function(){this.royalService.buyRoyalPoints()},e.prototype.getRoyalPoints=function(){return this.royalService.getRoyalPoints()},e.prototype.getRoyalPerks=function(){return this.royalService.getRoyalPerks()},e}(),Pb=gr({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{margin:5px;display:flex;flex-direction:column}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}.bold[_ngcontent-%COMP%]{font-weight:600}app-royal-perk[_ngcontent-%COMP%]{font-size:1em;display:inline-block;width:30%;margin:4px 8px;cursor:pointer}"]],data:{}});function Db(e){return so(0,[(e()(),zr(0,0,null,null,1,"app-royal-perk",[],null,null,null,wb,bb)),ki(1,114688,null,0,Eb,[Pg],{perk:[0,"perk"]},null)],function(e,n){e(n,1,0,n.context.$implicit)},null)}function kb(e){return so(0,[(e()(),zr(0,0,null,null,16,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),io(-1,null,["Royal perks"])),(e()(),zr(3,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(4,0,null,null,6,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["You have "])),(e()(),zr(6,0,null,null,1,"span",[["class","bold"]],null,null,null,null,null)),(e()(),io(7,null,["",""])),(e()(),io(-1,null,[" royal points."])),(e()(),zr(9,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),io(-1,null,[" You can use them to acquire special upgrades."])),(e()(),zr(11,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),zr(12,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.buyRoyalPoints()&&l),l},null,null)),(e()(),io(-1,null,["Buy Royal points"])),(e()(),zr(14,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,Db)),ki(16,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,16,0,n.component.getRoyalPerks())},function(e,n){e(n,7,0,n.component.getRoyalPoints())})}function Mb(e){return so(0,[(e()(),zr(0,0,null,null,1,"app-royal",[],null,null,null,kb,Pb)),ki(1,114688,null,0,Nb,[Tg,Pg,Dg],null,null)],function(e,n){e(n,1,0)},null)}var xb=ai("app-royal",Nb,Mb,{},{},[]),Lb=function(){function e(e,n,t,l){this.servicesService=e,this.resourcesService=n,this.effectsService=t,this.gameService=l,this.id=Math.random()}return e.prototype.ngOnInit=function(){this.building.hasBuff()&&(this.buildingBuff=this.building.getBuff())},e.prototype.hasResource=function(e){return 0===this.resourcesService.hasResource(e.key,e.value,"Building buff",!0)},e.prototype.getResourceName=function(e){return Au.prepareResourceName(e)},e.prototype.buff=function(){var e=this.servicesService.getService(Nu.MODAL);if(this.building.hasBuff()&&this.buffsEnabled())if(this.building.isBuffed())e.info("This building is already buffed");else{var n=this.building.getBuff();this.resourcesService.decreaseResources(n.cost,"Building buff",!0)&&this.effectsService.addBuildingEffect(new Du(n.name,this.building.getBuildingType(),n.effect,n.duration,this.building.id))}else e.info("This building cannot be buffed")},e.prototype.buffsEnabled=function(){return this.gameService.isEnabled(Eu.BUFFS)},e}(),Fb=gr({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{cursor:pointer}img[_ngcontent-%COMP%]{height:24px;width:24px}hr[_ngcontent-%COMP%]{border-color:#000}.notMet[_ngcontent-%COMP%]{color:#8b0000}"]],data:{}});function Ub(e){return so(0,[(e()(),zr(0,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),io(1,null,[""," "])),(e()(),zr(2,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(3,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){e(n,3,0,n.component.getResourceName(n.parent.context.$implicit.key),"resources")},function(e,n){e(n,1,0,n.parent.context.$implicit.value)})}function Hb(e){return so(0,[(e()(),zr(0,0,null,null,3,"div",[["class","notMet"]],null,null,null,null,null)),(e()(),io(1,null,[""," "])),(e()(),zr(2,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(3,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){e(n,3,0,n.component.getResourceName(n.parent.context.$implicit.key),"resources")},function(e,n){e(n,1,0,n.parent.context.$implicit.value)})}function Gb(e){return so(0,[(e()(),zr(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,Ub)),ki(2,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,Hb)),ki(4,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.hasResource(n.context.$implicit)),e(n,4,0,!t.hasResource(n.context.$implicit))},null)}function Bb(e){return so(0,[(e()(),zr(0,0,null,null,8,"div",[["appTooltip",""],["class","tooltip"],["id","buff"]],null,[[null,"click"],[null,"mousemove"]],function(e,n,t){var l=!0,r=e.component;return"mousemove"===n&&(l=!1!==Ei(e,1).onmousemove(t)&&l),"click"===n&&(l=!1!==r.buff()&&l),l},null,null)),ki(1,16384,null,0,af,[],{elementId:[0,"elementId"]},null),(e()(),zr(2,0,null,null,0,"img",[["src","assets/buff.svg"]],null,null,null,null,null)),(e()(),zr(3,0,null,null,5,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),io(4,null,[" "," "])),(e()(),zr(5,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),jr(16777216,null,null,2,null,Gb)),ki(7,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null),Mi(0,Ks,[Vl])],function(e,n){var t=n.component;e(n,1,0,0-t.id),e(n,7,0,hr(n,7,0,Ei(n,8).transform(t.buildingBuff.cost)))},function(e,n){var t=n.component;e(n,3,0,Vr(1,"",0-t.id,"")),e(n,4,0,t.buildingBuff.name)})}function Vb(e){return so(0,[(e()(),zr(0,0,null,null,2,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,Bb)),ki(2,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.buffsEnabled()&&t.building.hasBuff()&&!t.building.isBuffed())},null)}var Wb=function(){function e(e,n){this.resourcesService=e,this.servicesService=n,this.id=Math.random()}return e.prototype.ngOnInit=function(){},e.prototype.hasResource=function(e){return 0===this.resourcesService.hasResource(e.key,e.value,this.building.getName()+" upgrade",!0)},e.prototype.getResourceName=function(e){return Au.prepareResourceName(e)},e.prototype.upgrade=function(){this.parentRegion.upgradeBuilding(this.building.getBuildingId())},e}(),jb=gr({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{cursor:pointer}img[_ngcontent-%COMP%]{height:24px;width:24px}hr[_ngcontent-%COMP%]{border-color:#000}.notMet[_ngcontent-%COMP%]{color:#8b0000}"]],data:{}});function zb(e){return so(0,[(e()(),zr(0,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),io(1,null,[""," "])),(e()(),zr(2,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(3,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){e(n,3,0,n.component.getResourceName(n.parent.context.$implicit.key),"resources")},function(e,n){e(n,1,0,n.parent.context.$implicit.value)})}function Yb(e){return so(0,[(e()(),zr(0,0,null,null,3,"div",[["class","notMet"]],null,null,null,null,null)),(e()(),io(1,null,[""," "])),(e()(),zr(2,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(3,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){e(n,3,0,n.component.getResourceName(n.parent.context.$implicit.key),"resources")},function(e,n){e(n,1,0,n.parent.context.$implicit.value)})}function Kb(e){return so(0,[(e()(),zr(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,zb)),ki(2,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,Yb)),ki(4,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.hasResource(n.context.$implicit)),e(n,4,0,!t.hasResource(n.context.$implicit))},null)}function qb(e){return so(0,[(e()(),zr(0,0,null,null,8,"div",[["appTooltip",""],["class","tooltip"],["id","upgrade"]],null,[[null,"click"],[null,"mousemove"]],function(e,n,t){var l=!0,r=e.component;return"mousemove"===n&&(l=!1!==Ei(e,1).onmousemove(t)&&l),"click"===n&&(l=!1!==r.upgrade()&&l),l},null,null)),ki(1,16384,null,0,af,[],{elementId:[0,"elementId"]},null),(e()(),zr(2,0,null,null,0,"img",[["src","assets/upgrade.svg"]],null,null,null,null,null)),(e()(),zr(3,0,null,null,5,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),io(4,null,[" Upgrade to level "," "])),(e()(),zr(5,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),jr(16777216,null,null,2,null,Kb)),ki(7,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null),Mi(0,Ks,[Vl])],function(e,n){var t=n.component;e(n,1,0,0-t.id),e(n,7,0,hr(n,7,0,Ei(n,8).transform(t.building.getUpgradeCost())))},function(e,n){var t=n.component;e(n,3,0,Vr(1,"",0-t.id,"")),e(n,4,0,t.building.getBuildingLevel()+1)})}function $b(e){return so(0,[(e()(),zr(0,0,null,null,2,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,qb)),ki(2,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,2,0,n.component.building.hasUpgrade())},null)}var Qb=function(){function e(e){this.optionsService=e,this.progress=0,this.text=""}return Object.defineProperty(e.prototype,"progressReInput",{set:function(e){this.progressRef=e,this.ngOnChanges()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labelRefInput",{set:function(e){this.labelRef=e,this.ngOnChanges()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"label2RefInput",{set:function(e){this.label2Ref=e,this.ngOnChanges()},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.ngOnChanges=function(){this.progressBarsEnabled()?(this.progressRef&&(this.progressRef.nativeElement.style.width=this.progress+"%"),this.labelRef&&(this.labelRef.nativeElement.innerHTML=this.text&&""!==this.text?this.text:this.progress.toFixed(2)+"%")):this.label2Ref&&(this.label2Ref.nativeElement.innerHTML=this.text,this.label2Ref.nativeElement.innerHTML=this.progress.toFixed(2)+"%")},e.prototype.progressBarsEnabled=function(){return this.optionsService.getOption(Eg.VISUAL_PROGRESS_BARS)},e}(),Zb=gr({encapsulation:0,styles:[["#progressBar[_ngcontent-%COMP%]{position:relative;width:95%;height:100%;display:inline-block;text-align:center;background-color:#ddd;border:1px solid #000;margin-top:-1px}#progressBar2[_ngcontent-%COMP%]{position:relative;width:95%;height:100%;display:inline-block;text-align:center;margin-top:-1px}#progress[_ngcontent-%COMP%]{height:100%;background-color:var(--active-colour);text-align:center;color:#fff}#label[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;width:100%;font-size:1.2em;text-align:center}#label2[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;width:100%;font-size:1.2em;text-align:center;font-weight:700}"]],data:{}});function Xb(e){return so(0,[(e()(),zr(0,0,null,null,2,"div",[["id","progressBar"]],null,null,null,null,null)),(e()(),zr(1,0,[[1,0],["progress",1]],null,0,"div",[["id","progress"]],null,null,null,null,null)),(e()(),zr(2,0,[[2,0],["label",1]],null,0,"div",[["id","label"]],null,null,null,null,null))],null,null)}function Jb(e){return so(0,[(e()(),zr(0,0,null,null,1,"div",[["id","progressBar2"]],null,null,null,null,null)),(e()(),zr(1,0,[[3,0],["label2",1]],null,0,"div",[["id","label2"]],null,null,null,null,null))],null,null)}function eO(e){return so(0,[Qi(671088640,1,{progressReInput:0}),Qi(671088640,2,{labelRefInput:0}),Qi(671088640,3,{label2RefInput:0}),(e()(),jr(16777216,null,null,1,null,Xb)),ki(4,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,Jb)),ki(6,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,4,0,t.progressBarsEnabled()),e(n,6,0,!t.progressBarsEnabled())},null)}var nO=function(){function e(){}return e.prototype.ngOnInit=function(){},e.prototype.isTextValue=function(e){return e===Dm.TEXT},e.prototype.isButtonValue=function(e){return e===Dm.BUTTON},e.prototype.isTwoButtonValue=function(e){return e===Dm.TWO_BUTTON},e.prototype.isProgressValue=function(e){return e===Dm.PROGRESS_BAR},e.prototype.isDropdownValue=function(e){return e===Dm.DROPDOWN},e.prototype.isIconValue=function(e){return e===Dm.ICON},e.prototype.isButtonCheckboxValue=function(e){return e===Dm.BUTTON_CHECKBOX},e.prototype.buildingCallback=function(e){this.building.callback(e)},e}(),tO=gr({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{font-size:1.3em}.iconsLine[_ngcontent-%COMP%]{display:flex;flex-direction:row}.iconsLine[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:auto}.line[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:1px 4px}button[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{font-size:.9em}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center}.icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:2px;flex:0 0 auto}"]],data:{}});function lO(e){return so(0,[(e()(),zr(0,0,null,null,5,"span",[],null,null,null,null,null)),(e()(),zr(1,0,null,null,4,"span",[["class","icon"]],null,null,null,null,null)),(e()(),zr(2,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null)),(e()(),zr(3,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(4,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),zr(5,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null))],function(e,n){e(n,4,0,n.context.$implicit.name,n.context.$implicit.path)},function(e,n){e(n,2,0,n.context.$implicit.prefix),e(n,5,0,n.context.$implicit.suffix)})}function rO(e){return so(0,[(e()(),zr(0,0,null,null,2,"span",[["class","line iconsLine"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,lO)),ki(2,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.building.getLine(t.line).getValue())},null)}function iO(e){return so(0,[(e()(),zr(0,0,null,null,0,"span",[["class","line"]],[[8,"innerHTML",1]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,0,0,t.building.getLine(t.line).getValue())})}function oO(e){return so(0,[(e()(),zr(0,0,null,null,2,"span",[["class","line"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0,r=e.component;return"click"===n&&(l=!1!==r.buildingCallback(r.building.getLine(r.line).getValue().callbackValue)&&l),l},null,null)),(e()(),io(2,null,[""," "]))],null,function(e,n){var t=n.component;e(n,2,0,t.building.getLine(t.line).getValue().buttonText)})}function uO(e){return so(0,[(e()(),zr(0,0,null,null,10,"span",[["class","line"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0,r=e.component;return"click"===n&&(l=!1!==r.buildingCallback(r.building.getLine(r.line).getValue().callbackValue)&&l),l},null,null)),(e()(),io(2,null,[""," "])),(e()(),zr(3,0,null,null,7,"label",[],null,null,null,null,null)),(e()(),zr(4,0,null,null,5,"input",[["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"change"],[null,"blur"]],function(e,n,t){var l=!0,r=e.component;return"change"===n&&(l=!1!==Ei(e,5).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==Ei(e,5).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(r.building.getLine(r.line).getValue().checkboxState=t)&&l),"click"===n&&(l=!1!==r.buildingCallback(r.building.getLine(r.line).getValue().checkboxCallbackValue)&&l),l},null,null)),ki(5,16384,null,0,Rf,[Ln,Pn],null,null),xi(1024,null,Of,function(e){return[e]},[Rf]),ki(7,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),xi(2048,null,Nf,null,[pg]),ki(9,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),io(10,null,[""," "]))],function(e,n){var t=n.component;e(n,7,0,t.building.getLine(t.line).getValue().checkboxState)},function(e,n){var t=n.component;e(n,2,0,t.building.getLine(t.line).getValue().buttonText),e(n,4,0,Ei(n,9).ngClassUntouched,Ei(n,9).ngClassTouched,Ei(n,9).ngClassPristine,Ei(n,9).ngClassDirty,Ei(n,9).ngClassValid,Ei(n,9).ngClassInvalid,Ei(n,9).ngClassPending),e(n,10,0,t.building.getLine(t.line).getValue().checkboxLabel)})}function sO(e){return so(0,[(e()(),zr(0,0,null,null,5,"span",[["class","line"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0,r=e.component;return"click"===n&&(l=!1!==r.buildingCallback(r.building.getLine(r.line).getValue().callback1Value)&&l),l},null,null)),(e()(),io(2,null,["",""])),(e()(),zr(3,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null)),(e()(),zr(4,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0,r=e.component;return"click"===n&&(l=!1!==r.buildingCallback(r.building.getLine(r.line).getValue().callback2Value)&&l),l},null,null)),(e()(),io(5,null,["",""]))],null,function(e,n){var t=n.component;e(n,2,0,t.building.getLine(t.line).getValue().button1Text),e(n,3,0,t.building.getLine(t.line).getValue().textBetween),e(n,5,0,t.building.getLine(t.line).getValue().button2Text)})}function aO(e){return so(0,[(e()(),zr(0,0,null,null,3,"option",[],null,null,null,null,null)),ki(1,147456,null,0,Uf,[Pn,Ln,[2,Ff]],{value:[0,"value"]},null),ki(2,147456,null,0,Bf,[Pn,Ln,[8,null]],{value:[0,"value"]},null),(e()(),io(3,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,3,0,n.context.$implicit)})}function cO(e){return so(0,[(e()(),zr(0,0,null,null,8,"span",[["class","line"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,7,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,r=e.component;return"change"===n&&(l=!1!==Ei(e,2).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==Ei(e,2).onTouched()&&l),"change"===n&&(l=!1!==r.buildingCallback(t)&&l),"ngModelChange"===n&&(l=!1!==(r.building.getLine(r.line).getValue().selected=t)&&l),l},null,null)),ki(2,16384,null,0,Ff,[Ln,Pn],null,null),xi(1024,null,Of,function(e){return[e]},[Ff]),ki(4,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),xi(2048,null,Nf,null,[pg]),ki(6,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),jr(16777216,null,null,1,null,aO)),ki(8,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,4,0,t.building.getLine(t.line).getValue().selected),e(n,8,0,t.building.getLine(t.line).getValue().values)},function(e,n){e(n,1,0,Ei(n,6).ngClassUntouched,Ei(n,6).ngClassTouched,Ei(n,6).ngClassPristine,Ei(n,6).ngClassDirty,Ei(n,6).ngClassValid,Ei(n,6).ngClassInvalid,Ei(n,6).ngClassPending)})}function pO(e){return so(0,[(e()(),zr(0,0,null,null,1,"app-progress-bar",[],null,null,null,eO,Zb)),ki(1,638976,null,0,Qb,[bg],{progress:[0,"progress"],text:[1,"text"]},null)],function(e,n){var t=n.component;e(n,1,0,t.building.getLine(t.line).getValue().value,t.building.getLine(t.line).getValue().label)},null)}function hO(e){return so(0,[(e()(),zr(0,0,null,null,2,"span",[["class","line"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,pO)),ki(2,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.building.getLine(t.line).getValue().value>=0)},null)}function dO(e){return so(0,[(e()(),zr(0,0,null,null,14,"span",[["id","wrapper"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,rO)),ki(2,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,iO)),ki(4,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,oO)),ki(6,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,uO)),ki(8,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,sO)),ki(10,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,cO)),ki(12,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,hO)),ki(14,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.isIconValue(t.building.getLine(t.line).getValueType())),e(n,4,0,t.isTextValue(t.building.getLine(t.line).getValueType())),e(n,6,0,t.isButtonValue(t.building.getLine(t.line).getValueType())),e(n,8,0,t.isButtonCheckboxValue(t.building.getLine(t.line).getValueType())),e(n,10,0,t.isTwoButtonValue(t.building.getLine(t.line).getValueType())),e(n,12,0,t.isDropdownValue(t.building.getLine(t.line).getValueType())),e(n,14,0,t.isProgressValue(t.building.getLine(t.line).getValueType()))},null)}function fO(e){return so(0,[(e()(),jr(16777216,null,null,1,null,dO)),ki(1,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,null!=t.line&&t.building)},null)}var gO=function(){function e(e){this.servicesService=e,this.rations=es.FOOD_RATIONS,this.clothes=es.CLOTHES_RATIONS,this.alcohol=es.ALCOHOL_RATIONS,this.furClothes=es.ALLOW_FUR_CLOTHES,this.foodNutrition=es.SHOW_FOOD_NUTRITION,this.complexWorkers=!1,e.addService(Nu.MANAGEMENT,this)}return e.prototype.load=function(e){this.rations=e.rations,this.clothes=e.clothes,this.alcohol=e.alcohol,this.furClothes=e.furClothes,this.foodNutrition=e.foodNutrition,this.complexWorkers=e.complexWorkers},e.prototype.save=function(){return{rations:this.rations,clothes:this.clothes,alcohol:this.alcohol,furClothes:this.furClothes,foodNutrition:this.foodNutrition,complexWorkers:this.complexWorkers}},e.prototype.reset=function(e,n){this.rations=es.FOOD_RATIONS,this.clothes=es.CLOTHES_RATIONS,this.alcohol=es.ALCOHOL_RATIONS,this.furClothes=es.ALLOW_FUR_CLOTHES,this.foodNutrition=es.SHOW_FOOD_NUTRITION,this.complexWorkers=!1},e.prototype.getRations=function(){return this.rations},e.prototype.getClothesRations=function(){return this.clothes},e.prototype.getAlcoholRations=function(){return this.alcohol},e.prototype.setRations=function(e){this.rations=e},e.prototype.setClothesRations=function(e){this.clothes=e},e.prototype.setAlcoholRations=function(e){this.alcohol=e},e.prototype.toggleFurClothes=function(){this.furClothes=!this.furClothes},e.prototype.getFurClothes=function(){return this.furClothes},e.prototype.toggleFoodNutrition=function(){this.foodNutrition=!this.foodNutrition},e.prototype.getFoodNutrition=function(){return this.foodNutrition},e.prototype.toggleComplexWorkers=function(){this.complexWorkers=!this.complexWorkers},e.prototype.getComplexWorkers=function(){return this.complexWorkers},e.ngInjectableDef=ve({factory:function(){return new e(Ye(Sg))},token:e,providedIn:"root"}),e}(),vO=function(){function e(e,n,t,l,r,i){this.modalService=e,this.servicesService=n,this.resourcesService=t,this.managementService=l,this.villageService=r,this.logService=i,this.demolishMode=!1,this.combineMode=!1,this.splitMode=!1,this.lines=Pm,this.id=Math.random()}return e.prototype.ngOnInit=function(){},e.prototype.fitText=function(){if(this.centerRef){var e=this.centerRef.nativeElement,n=e.clientWidth,t=e.scrollWidth,l=parseInt(window.getComputedStyle(e,null).getPropertyValue("font-size"),10);if(t>n)l=(l=Math.ceil(l*n/t))>15?l=15:l-1,e.style.fontSize=l+"px";else for(;t===n&&l<15;)l=(l=Math.ceil(l)+1)>15?l=15:l,e.style.fontSize=l+"px",(t=e.scrollWidth)>(n=e.clientWidth)&&(e.style.fontSize=l-1+"px")}},e.prototype.stop=function(){this.building.isWorking()?this.building.stopProduction():this.building.startProduction()||this.modalService.info("Cannot unlock production of "+this.building.getName()+". Number of free workers: "+this.resourcesService.getPeople())},e.prototype.isStoppable=function(){return this.building.isStoppable()},e.prototype.isWorking=function(){return this.building.isWorking()},e.prototype.demolish=function(){var e=this;if(void 0!==this.building.getMaxSize&&this.villageService.getPopulation()>this.villageService.getPopulationCap()-this.building.getMaxSize()){this.modalService.open(mu.CONFIRM),this.modalService.setModalText("You don't have enough housing space to move this building occupants.<br> People that won't find new home will leave the village<br>Do you still want to demolish this building?");var n=this.modalService.registerForConfirmation().subscribe(function(t){n.unsubscribe(),t&&e.building.prepareDemolish()&&e.parentRegion.demolish(e.building)})}else{this.modalService.setModalText("Are you sure you want to demolish "+this.building.getName()+"?"),this.modalService.open(mu.CONFIRM);var t=this.modalService.registerForConfirmation().subscribe(function(n){t.unsubscribe(),n&&e.building.prepareDemolish()&&e.parentRegion.demolish(e.building)})}},e.prototype.canCombine=function(){return this.parentRegion.canCombine(this.building)},e.prototype.combine=function(){this.parentRegion.combine(this.building)},e.prototype.split=function(){this.parentRegion.split(this.building)},e.prototype.areComplexWorkersEnabled=function(){return this.managementService.getComplexWorkers()},e.prototype.openWorkersManagement=function(e){e.ctrlKey?this.building.getWorkSettings().enabled?(this.building.getWorkSettings().enabled=!1,this.stop()):this.stop():e.shiftKey?this.building.getWorkSettings().enabled=!this.building.getWorkSettings().enabled:(this.modalService.open(mu.WORK_MANAGEMENT),this.modalService.setBuilding(this.building))},e.prototype.round=function(e){return e%1!=0?Au.round(e,2):e},e}(),mO=gr({encapsulation:0,styles:[["[_nghost-%COMP%]{height:15%;min-height:125px;width:10%;min-width:206px;border:1px solid #000;overflow:hidden}#wrapper[_ngcontent-%COMP%]{position:relative;height:100%;text-align:center;font-size:.7em}#combine[_ngcontent-%COMP%], #demolish[_ngcontent-%COMP%], #split[_ngcontent-%COMP%]{position:absolute;font-weight:600;font-size:2em;top:0;left:0;width:100%;height:100%;background-color:rgba(126,122,121,.7);justify-content:center;align-items:center;display:flex;cursor:pointer}#demolishText[_ngcontent-%COMP%], .combineText[_ngcontent-%COMP%]{display:block}#nameBar[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;height:24px;font-size:1.4em;font-weight:700;border-bottom:1px solid #000;white-space:nowrap}#left[_ngcontent-%COMP%], #right[_ngcontent-%COMP%]{flex:1 0 24px}#center[_ngcontent-%COMP%]{flex:1 0 152px;font-size:.8em;overflow:hidden;line-height:24px}.control[_ngcontent-%COMP%]{float:right;font-size:.6em;margin-right:2px;cursor:pointer}.control[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px;height:24px}#lines[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column}app-progress-bar[_ngcontent-%COMP%]{display:block;height:18px}app-building-line[_ngcontent-%COMP%]{height:20px;display:block;margin-top:3px;flex:1 0 auto}img[_ngcontent-%COMP%]{height:24px}.details[_ngcontent-%COMP%]{float:left;font-size:.75em;margin-right:2px}.positiveEffects[_ngcontent-%COMP%]{font-size:.7em;color:#006400}.negativeEffects[_ngcontent-%COMP%]{font-size:.7em;color:#8b0000}.tooltipSpan[_ngcontent-%COMP%]{font-size:1.5em;font-weight:100;text-align:left}.tooltipSpan[_ngcontent-%COMP%]   #title[_ngcontent-%COMP%]{text-align:center}.tooltipSpan[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border-color:#000}app-building-buff[_ngcontent-%COMP%]{position:absolute;right:0;top:0}app-building-upgrade[_ngcontent-%COMP%]{position:absolute;left:-2px;top:0}"]],data:{}});function yO(e){return so(0,[(e()(),zr(0,0,null,null,7,"span",[["appTooltip",""],["class","details tooltip"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==Ei(e,1).onmousemove(t)&&l),l},null,null)),ki(1,16384,null,0,af,[],{elementId:[0,"elementId"]},null),(e()(),zr(2,0,null,null,0,"img",[["alt","details"],["draggable","false"],["src","assets/details.svg"]],null,null,null,null,null)),(e()(),zr(3,0,null,null,4,"span",[["class","tooltipSpan"]],[[8,"id",0]],null,null,null,null)),(e()(),zr(4,0,null,null,1,"div",[["id","title"]],null,null,null,null,null)),(e()(),io(5,null,["",""])),(e()(),zr(6,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),zr(7,0,null,null,0,"div",[],[[8,"innerHTML",1]],null,null,null,null))],function(e,n){e(n,1,0,n.component.id)},function(e,n){var t=n.component;e(n,3,0,Vr(1,"",t.id,"")),e(n,5,0,t.building.getName()),e(n,7,0,t.building.getDetails())})}function SO(e){return so(0,[(e()(),zr(0,0,null,null,1,"span",[["class","positiveEffects"]],null,null,null,null,null)),(e()(),io(1,null,["(+","%)"]))],null,function(e,n){var t=n.component;e(n,1,0,t.round(t.building.getDisplayableEffectsValue()))})}function EO(e){return so(0,[(e()(),zr(0,0,null,null,1,"span",[["class","negativeEffects"]],null,null,null,null,null)),(e()(),io(1,null,["(","%)"]))],null,function(e,n){var t=n.component;e(n,1,0,t.round(t.building.getDisplayableEffectsValue()))})}function bO(e){return so(0,[(e()(),zr(0,0,null,null,1,"span",[["class","control"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.stop()&&l),l},null,null)),(e()(),zr(1,0,null,null,0,"img",[["alt","on"],["draggable","false"],["src","assets/gear.svg"],["title","disable"]],null,null,null,null,null))],null,null)}function OO(e){return so(0,[(e()(),zr(0,0,null,null,1,"span",[["class","control"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.stop()&&l),l},null,null)),(e()(),zr(1,0,null,null,0,"img",[["alt","off"],["draggable","false"],["src","assets/gear_off.svg"],["title","enable"]],null,null,null,null,null))],null,null)}function RO(e){return so(0,[(e()(),zr(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,bO)),ki(2,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,OO)),ki(4,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(0,null,null,0))],function(e,n){var t=n.component;e(n,2,0,t.isStoppable()&&t.isWorking()),e(n,4,0,t.isStoppable()&&!t.isWorking())},null)}function CO(e){return so(0,[(e()(),zr(0,0,null,null,0,"img",[["draggable","false"],["src","assets/complex_management_on_on.svg"],["title","work settings"]],null,null,null,null,null))],null,null)}function _O(e){return so(0,[(e()(),zr(0,0,null,null,0,"img",[["draggable","false"],["src","assets/complex_management_on_off.svg"],["title","work settings"]],null,null,null,null,null))],null,null)}function TO(e){return so(0,[(e()(),zr(0,0,null,null,0,"img",[["draggable","false"],["src","assets/complex_management_off_on.svg"],["title","work settings"]],null,null,null,null,null))],null,null)}function IO(e){return so(0,[(e()(),zr(0,0,null,null,0,"img",[["draggable","false"],["src","assets/complex_management_off_off.svg"],["title","work settings"]],null,null,null,null,null))],null,null)}function AO(e){return so(0,[(e()(),zr(0,0,null,null,8,"span",[["class","control"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.openWorkersManagement(t)&&l),l},null,null)),(e()(),jr(16777216,null,null,1,null,CO)),ki(2,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,_O)),ki(4,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,TO)),ki(6,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,IO)),ki(8,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.building.getWorkSettings().enabled&&t.building.isWorking()),e(n,4,0,t.building.getWorkSettings().enabled&&!t.building.isWorking()),e(n,6,0,!t.building.getWorkSettings().enabled&&t.building.isWorking()),e(n,8,0,!t.building.getWorkSettings().enabled&&!t.building.isWorking())},null)}function wO(e){return so(0,[(e()(),zr(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,AO)),ki(2,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(0,null,null,0))],function(e,n){e(n,2,0,n.component.isStoppable())},null)}function NO(e){return so(0,[(e()(),zr(0,0,null,null,2,"div",[["id","demolish"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.demolish()&&l),l},null,null)),(e()(),zr(1,0,null,null,1,"span",[["id","demolishText"]],null,null,null,null,null)),(e()(),io(-1,null,["Demolish"]))],null,null)}function PO(e){return so(0,[(e()(),zr(0,0,null,null,2,"div",[["id","combine"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.combine()&&l),l},null,null)),(e()(),zr(1,0,null,null,1,"span",[["class","combineText"]],null,null,null,null,null)),(e()(),io(-1,null,["Combine"]))],null,null)}function DO(e){return so(0,[(e()(),zr(0,0,null,null,2,"div",[["id","split"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.split()&&l),l},null,null)),(e()(),zr(1,0,null,null,1,"span",[["class","combineText"]],null,null,null,null,null)),(e()(),io(-1,null,["Split"]))],null,null)}function kO(e){return so(0,[Qi(402653184,1,{centerRef:0}),(e()(),zr(1,0,null,null,35,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),zr(2,0,null,null,15,"div",[["id","nameBar"]],null,null,null,null,null)),(e()(),zr(3,0,null,null,2,"div",[["id","left"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,yO)),ki(5,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),zr(6,0,[[1,0],["center",1]],null,6,"div",[["id","center"]],null,null,null,null,null)),(e()(),io(7,null,[""," "])),(e()(),jr(16777216,null,null,1,null,SO)),ki(9,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,EO)),ki(11,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),io(12,null,[" "," "])),(e()(),zr(13,0,null,null,4,"div",[["id","right"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,RO)),ki(15,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,wO)),ki(17,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),zr(18,0,null,null,12,"div",[["id","lines"]],null,null,null,null,null)),(e()(),zr(19,0,null,null,1,"app-building-buff",[],null,null,null,Vb,Fb)),ki(20,114688,null,0,Lb,[Sg,xg,rS,wg],{building:[0,"building"]},null),(e()(),zr(21,0,null,null,1,"app-building-upgrade",[],null,null,null,$b,jb)),ki(22,114688,null,0,Wb,[xg,Sg],{building:[0,"building"],parentRegion:[1,"parentRegion"]},null),(e()(),zr(23,0,null,null,1,"app-building-line",[],null,null,null,fO,tO)),ki(24,114688,null,0,nO,[],{line:[0,"line"],building:[1,"building"]},null),(e()(),zr(25,0,null,null,1,"app-building-line",[],null,null,null,fO,tO)),ki(26,114688,null,0,nO,[],{line:[0,"line"],building:[1,"building"]},null),(e()(),zr(27,0,null,null,1,"app-building-line",[],null,null,null,fO,tO)),ki(28,114688,null,0,nO,[],{line:[0,"line"],building:[1,"building"]},null),(e()(),zr(29,0,null,null,1,"app-building-line",[],null,null,null,fO,tO)),ki(30,114688,null,0,nO,[],{line:[0,"line"],building:[1,"building"]},null),(e()(),jr(16777216,null,null,1,null,NO)),ki(32,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,PO)),ki(34,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,DO)),ki(36,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,5,0,t.building.hasDetails()),e(n,9,0,t.building.getDisplayableEffectsValue()>0),e(n,11,0,t.building.getDisplayableEffectsValue()<0),e(n,15,0,!t.building.isComplexManagement()||t.building.isComplexManagement()&&!t.areComplexWorkersEnabled()),e(n,17,0,t.building.isComplexManagement()&&t.areComplexWorkersEnabled()),e(n,20,0,t.building),e(n,22,0,t.building,t.parentRegion),e(n,24,0,t.lines.FIRST,t.building),e(n,26,0,t.lines.SECOND,t.building),e(n,28,0,t.lines.THIRD,t.building),e(n,30,0,t.lines.FOURTH,t.building),e(n,32,0,t.demolishMode&&t.building.isDemolishable()),e(n,34,0,t.combineMode&&t.building.isCombinable()&&t.canCombine()),e(n,36,0,t.splitMode&&t.building.isSplittable())},function(e,n){var t=n.component;e(n,7,0,t.building.getName()),e(n,12,0,t.fitText())})}var MO=function(){function e(e){this.gameService=e}return e.prototype.ngOnInit=function(){},e.prototype.isFortEnabled=function(){return this.gameService.isEnabled(Eu.FORT)},e.prototype.isFieldEnabled=function(){return this.gameService.isEnabled(Eu.FIELD)},e.prototype.isSeaEnabled=function(){return this.gameService.isEnabled(Eu.SEA)},e.prototype.isMountainsEnabled=function(){return this.gameService.isEnabled(Eu.MOUNTAINS)},e.prototype.isPlateauEnabled=function(){return this.gameService.isEnabled(Eu.PLATEAU)},e}(),xO=gr({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{display:flex;height:100%;flex-direction:row}.entry[_ngcontent-%COMP%]{flex:auto;display:flex;justify-content:center;flex-direction:column;height:100%;text-align:center;border-right:2px solid #000;cursor:pointer;text-decoration:none;color:#000;font-size:1em}.entry[_ngcontent-%COMP%]:last-of-type{border:none}.entry.active[_ngcontent-%COMP%]{background:var(--active-colour)}"]],data:{}});function LO(e){return so(0,[(e()(),zr(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["routerLink","/regions/fort"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==Ei(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),ki(1,671744,[[4,4]],0,Td,[_d,gh,fs],{routerLink:[0,"routerLink"]},null),ki(2,1720320,null,2,Ad,[_d,Pn,Ln,Rl],{routerLinkActive:[0,"routerLinkActive"]},null),Qi(603979776,3,{links:1}),Qi(603979776,4,{linksWithHrefs:1}),(e()(),io(-1,null,["Fort"]))],function(e,n){e(n,1,0,"/regions/fort"),e(n,2,0,"active")},function(e,n){e(n,0,0,Ei(n,1).target,Ei(n,1).href)})}function FO(e){return so(0,[(e()(),zr(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["routerLink","/regions/field"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==Ei(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),ki(1,671744,[[8,4]],0,Td,[_d,gh,fs],{routerLink:[0,"routerLink"]},null),ki(2,1720320,null,2,Ad,[_d,Pn,Ln,Rl],{routerLinkActive:[0,"routerLinkActive"]},null),Qi(603979776,7,{links:1}),Qi(603979776,8,{linksWithHrefs:1}),(e()(),io(-1,null,["Field"]))],function(e,n){e(n,1,0,"/regions/field"),e(n,2,0,"active")},function(e,n){e(n,0,0,Ei(n,1).target,Ei(n,1).href)})}function UO(e){return so(0,[(e()(),zr(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["routerLink","/regions/mountains"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==Ei(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),ki(1,671744,[[10,4]],0,Td,[_d,gh,fs],{routerLink:[0,"routerLink"]},null),ki(2,1720320,null,2,Ad,[_d,Pn,Ln,Rl],{routerLinkActive:[0,"routerLinkActive"]},null),Qi(603979776,9,{links:1}),Qi(603979776,10,{linksWithHrefs:1}),(e()(),io(-1,null,["Mountains"]))],function(e,n){e(n,1,0,"/regions/mountains"),e(n,2,0,"active")},function(e,n){e(n,0,0,Ei(n,1).target,Ei(n,1).href)})}function HO(e){return so(0,[(e()(),zr(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["routerLink","/regions/plateau"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==Ei(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),ki(1,671744,[[12,4]],0,Td,[_d,gh,fs],{routerLink:[0,"routerLink"]},null),ki(2,1720320,null,2,Ad,[_d,Pn,Ln,Rl],{routerLinkActive:[0,"routerLinkActive"]},null),Qi(603979776,11,{links:1}),Qi(603979776,12,{linksWithHrefs:1}),(e()(),io(-1,null,["Plateau"]))],function(e,n){e(n,1,0,"/regions/plateau"),e(n,2,0,"active")},function(e,n){e(n,0,0,Ei(n,1).target,Ei(n,1).href)})}function GO(e){return so(0,[(e()(),zr(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["routerLink","/regions/sea"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==Ei(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),ki(1,671744,[[14,4]],0,Td,[_d,gh,fs],{routerLink:[0,"routerLink"]},null),ki(2,1720320,null,2,Ad,[_d,Pn,Ln,Rl],{routerLinkActive:[0,"routerLinkActive"]},null),Qi(603979776,13,{links:1}),Qi(603979776,14,{linksWithHrefs:1}),(e()(),io(-1,null,["Sea"]))],function(e,n){e(n,1,0,"/regions/sea"),e(n,2,0,"active")},function(e,n){e(n,0,0,Ei(n,1).target,Ei(n,1).href)})}function BO(e){return so(0,[(e()(),zr(0,0,null,null,22,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,5,"a",[["class","entry"],["draggable","false"],["routerLink","/regions/village"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==Ei(e,2).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),ki(2,671744,[[2,4]],0,Td,[_d,gh,fs],{routerLink:[0,"routerLink"]},null),ki(3,1720320,null,2,Ad,[_d,Pn,Ln,Rl],{routerLinkActive:[0,"routerLinkActive"]},null),Qi(603979776,1,{links:1}),Qi(603979776,2,{linksWithHrefs:1}),(e()(),io(-1,null,["Village"])),(e()(),jr(16777216,null,null,1,null,LO)),ki(8,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),zr(9,0,null,null,5,"a",[["class","entry"],["draggable","false"],["routerLink","/regions/forest"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==Ei(e,10).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),ki(10,671744,[[6,4]],0,Td,[_d,gh,fs],{routerLink:[0,"routerLink"]},null),ki(11,1720320,null,2,Ad,[_d,Pn,Ln,Rl],{routerLinkActive:[0,"routerLinkActive"]},null),Qi(603979776,5,{links:1}),Qi(603979776,6,{linksWithHrefs:1}),(e()(),io(-1,null,["Forest"])),(e()(),jr(16777216,null,null,1,null,FO)),ki(16,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,UO)),ki(18,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,HO)),ki(20,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,GO)),ki(22,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,"/regions/village"),e(n,3,0,"active"),e(n,8,0,t.isFortEnabled()),e(n,10,0,"/regions/forest"),e(n,11,0,"active"),e(n,16,0,t.isFieldEnabled()),e(n,18,0,t.isMountainsEnabled()),e(n,20,0,t.isPlateauEnabled()),e(n,22,0,t.isSeaEnabled())},function(e,n){e(n,1,0,Ei(n,2).target,Ei(n,2).href),e(n,9,0,Ei(n,10).target,Ei(n,10).href)})}var VO=function(){function e(e){this.happinessService=e}return e.prototype.ngOnInit=function(){},e.prototype.getHappiness=function(){return Au.round(this.happinessService.getHappiness(),2)},e.prototype.getHappinessValue=function(){return this.happinessService.getHappiness()},e}(),WO=gr({encapsulation:0,styles:[["[_nghost-%COMP%]{display:inline-block}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]],data:{}});function jO(e){return so(0,[(e()(),zr(0,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(1,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"],margin:[2,"margin"]},null)],function(e,n){e(n,1,0,"angry","happiness","0 0 0 4px")},null)}function zO(e){return so(0,[(e()(),zr(0,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(1,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"],margin:[2,"margin"]},null)],function(e,n){e(n,1,0,"sad","happiness","0 0 0 4px")},null)}function YO(e){return so(0,[(e()(),zr(0,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(1,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"],margin:[2,"margin"]},null)],function(e,n){e(n,1,0,"neutral","happiness","0 0 0 4px")},null)}function KO(e){return so(0,[(e()(),zr(0,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(1,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"],margin:[2,"margin"]},null)],function(e,n){e(n,1,0,"happy","happiness","0 0 0 4px")},null)}function qO(e){return so(0,[(e()(),zr(0,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(1,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"],margin:[2,"margin"]},null)],function(e,n){e(n,1,0,"overjoyed","happiness","0 0 0 4px")},null)}function $O(e){return so(0,[(e()(),zr(0,0,null,null,11,"div",[["class","icon"],["id","wrapper"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,jO)),ki(2,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,zO)),ki(4,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,YO)),ki(6,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,KO)),ki(8,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,qO)),ki(10,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),io(11,null,[" ","%\n"]))],function(e,n){var t=n.component;e(n,2,0,t.getHappinessValue()>=0&&t.getHappinessValue()<=10),e(n,4,0,t.getHappinessValue()>10&&t.getHappinessValue()<=40),e(n,6,0,t.getHappinessValue()>40&&t.getHappinessValue()<=60),e(n,8,0,t.getHappinessValue()>60&&t.getHappinessValue()<=90),e(n,10,0,t.getHappinessValue()>90&&t.getHappinessValue()<=100)},function(e,n){e(n,11,0,n.component.getHappiness())})}var QO=function(){function e(e,n,t,l,r,i,o){var u=this;this.modalService=e,this.landService=n,this.gameService=t,this.regionService=l,this.tutorialService=r,this.changeDetectorRef=i,this.thisRegion=o,this.demolishMode=!1,this.arrangeMode=!1,this.combineMode=!1,this.splitMode=!1,this.filterBuilding=this.regionService.getFilterBuilding(),this.allBuildings=bu.ALL,this.target=null,this.source=null,this.enter=function(e,n){if(n===u.placeholder)return!0;var t=u.placeholder.element.nativeElement,l=n.element.nativeElement,r=u.__indexOf(l.parentNode.children,e.dropContainer.element.nativeElement),i=u.__indexOf(l.parentNode.children,l);if(!u.source){u.sourceIndex=r,u.source=e.dropContainer;var o=u.source.element.nativeElement;t.style.width=o.clientWidth+"px",t.style.height=o.clientHeight+"px",o.parentNode.removeChild(o)}return u.targetIndex=i,u.target=n,t.style.display="",l.parentNode.insertBefore(t,r<i?l.nextSibling:l),u.source.start(),u.placeholder.enter(e,e.element.nativeElement.offsetLeft,e.element.nativeElement.offsetTop),!1}}return e.prototype.ngOnInit=function(){this.tutorialService.checkRegionTutorial(this.thisRegion)},e.prototype.getUniqueBuildingsFromCurrentView=function(){var e=[];return this.regionService.buildings.forEach(function(n){e.includes(n.getBuildingType())||e.push(n.getBuildingType()),n.getBuildingType()!==bu.CONSTRUCTION||e.includes(n.getConstructing())?n.getBuildingType()!==bu.DECONSTRUCTION||e.includes(n.getDecontructing())||e.push(n.getDecontructing()):e.push(n.getConstructing())}),e},e.prototype.getBuildings=function(){var e=this,n=this.regionService.getBuildings().filter(function(n){return e.filterBuilding===bu.ALL||n.getBuildingType()===bu.CONSTRUCTION&&n.getConstructing()===e.filterBuilding||n.getBuildingType()===bu.DECONSTRUCTION&&n.getDecontructing()===e.filterBuilding||n.getBuildingType()===e.filterBuilding});return 0===n.length&&this.filterBuilding!==bu.ALL&&(this.filterBuilding=bu.ALL,this.regionService.setFilterBuildings(bu.ALL)),n},e.prototype.getBuildingName=function(e){return Au.prepareBuildingName(e)},e.prototype.updateFilter=function(e){this.filterBuilding=bu[bu[e.target.value]],this.regionService.setFilterBuildings(this.filterBuilding)},e.prototype.openBuildModal=function(){this.demolishMode=!1,this.arrangeMode=!1,this.modalService.setRegion(this.thisRegion),this.modalService.open(mu.BUILD)},e.prototype.getUnemployed=function(){return this.regionService.getUnemployed()},e.prototype.getFreeLand=function(){return this.landService.getLand()},e.prototype.toggleDemolishMode=function(){this.demolishMode=!this.demolishMode,this.arrangeMode=!1,this.splitMode=!1,this.clearCombineMode()},e.prototype.toggleArrangeMode=function(){if(this.arrangeMode=!this.arrangeMode,this.demolishMode=!1,this.splitMode=!1,this.clearCombineMode(),this.changeDetectorRef.destroyed||this.changeDetectorRef.detectChanges(),this.placeholder){var e=this.placeholder.element.nativeElement;e.style.display="none",e.parentNode.removeChild(e),e.parentNode.removeChild(e)}},e.prototype.toggleCombineMode=function(){this.combineMode=!this.combineMode,this.splitMode=!1,this.demolishMode=!1,this.arrangeMode=!1},e.prototype.toggleSplitMode=function(){this.splitMode=!this.splitMode,this.combineMode=!1,this.demolishMode=!1,this.arrangeMode=!1},e.prototype.clearCombineMode=function(){this.combineMode=!1,this.regionService.clearCombineMode()},e.prototype.drop=function(){if(this.target){var e=this.placeholder.element.nativeElement,n=e.parentNode;if(e.style.display="none",n.removeChild(e),n.appendChild(e),n.insertBefore(this.source.element.nativeElement,n.children[this.sourceIndex]),this.target=null,this.source=null,this.sourceIndex!==this.targetIndex)if(this.filterBuilding===bu.ALL)this.regionService.moveBuildingInList(this.sourceIndex,this.targetIndex);else{var t=this.getBuildings();this.regionService.moveBuildingInListByBuildingId(t[this.sourceIndex].getBuildingId(),t[this.targetIndex].getBuildingId())}}},e.prototype.__indexOf=function(e,n){return Array.prototype.indexOf.call(e,n)},e.prototype.isUrbanPlanningEnabled=function(){return this.gameService.isEnabled(Eu.URBAN_PLANNING)},e.prototype.hasCombinableBuildings=function(){return this.getBuildings().filter(function(e){return e.isCombinable()}).length>1},e.prototype.hasSplittableBuildings=function(){return this.getBuildings().filter(function(e){return e.isSplittable()}).length>=1},e.prototype.onKeydownHandler=function(e){this.demolishMode=!1,this.arrangeMode=!1,this.clearCombineMode()},e.prototype.enableAll=function(){this.getBuildings().filter(function(e){return e.isStoppable()}).forEach(function(e){return e.startProduction()})},e.prototype.disableAll=function(){this.getBuildings().filter(function(e){return e.isStoppable()}).forEach(function(e){return e.stopProduction()})},e.prototype.resuable=function(){return"y"},e}(),ZO=function(e){function n(n,t,l,r,i,o,u,s){var a=e.call(this,n,t,l,r,u,s,Mu.VILLAGE)||this;return a.villageService=r,a.resourcesService=i,a.managementService=o,a}return r(n,e),n.prototype.getPopulation=function(){return this.villageService.getPopulation()},n.prototype.getPopulationCap=function(){return this.villageService.getPopulationCap()},n.prototype.getFoodValue=function(){return this.resourcesService.getFoodValue("Village")},n.prototype.isFoodNutritionEnabled=function(){return this.managementService.getFoodNutrition()},n.prototype.getTakenLand=function(){return this.landService.getTakenLand()},n}(QO),XO=gr({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:100%;max-height:100%;font-size:1em}#content[_ngcontent-%COMP%]{margin:.5%;display:flex;flex-direction:column;height:94%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#side[_ngcontent-%COMP%]{float:right;font-size:.9em;width:25%;margin:.5%;display:inline-block;vertical-align:bottom}#side[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:.8em;margin:0;padding:0;border:none;outline:0}#buildingsWrapper[_ngcontent-%COMP%]{height:85.5%}.buildings[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;height:100%;border:2px solid #000;overflow-y:auto;align-content:flex-start}.buildings[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}#title[_ngcontent-%COMP%]{text-align:center;border:2px solid #000;border-bottom:none}.off[_ngcontent-%COMP%]{background-color:#555}.buildingRegularWrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:.6%}.buildingDropWrapper[_ngcontent-%COMP%]{display:flex;margin:.6%;cursor:move}.buildingDropWrapper[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}#allControl[_ngcontent-%COMP%]{margin-left:auto;width:108px;display:inline-block}#allControl[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:4px}"]],data:{}});function JO(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleDemolishMode()&&l),l},null,null)),(e()(),io(-1,null,["Demolish"]))],null,null)}function eR(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleDemolishMode()&&l),l},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function nR(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleArrangeMode()&&l),l},null,null)),(e()(),io(-1,null,["Arrange"]))],null,null)}function tR(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleArrangeMode()&&l),l},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function lR(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleCombineMode()&&l),l},null,null)),(e()(),io(-1,null,["Combine"]))],null,null)}function rR(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleCombineMode()&&l),l},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function iR(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleSplitMode()&&l),l},null,null)),(e()(),io(-1,null,["Split"]))],null,null)}function oR(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleSplitMode()&&l),l},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function uR(e){return so(0,[(e()(),zr(0,0,null,null,3,"option",[],null,null,null,null,null)),ki(1,147456,null,0,Uf,[Pn,Ln,[2,Ff]],{value:[0,"value"]},null),ki(2,147456,null,0,Bf,[Pn,Ln,[8,null]],{value:[0,"value"]},null),(e()(),io(3,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,3,0,n.component.getBuildingName(n.context.$implicit))})}function sR(e){return so(0,[(e()(),zr(0,0,null,null,3,null,null,null,null,null,null,null)),(e()(),zr(1,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(2,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),io(3,null,["\xa0"," \xa0\xa0\xa0 "]))],function(e,n){e(n,2,0,"food","resources","available food nutrition (excluding reserved food)")},function(e,n){e(n,3,0,n.component.getFoodValue())})}function aR(e){return so(0,[(e()(),zr(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,1,"app-building",[],null,null,null,kO,mO)),ki(2,114688,null,0,vO,[Ig,Sg,xg,gO,sS,Tg],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],building:[3,"building"],parentRegion:[4,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,2,0,t.demolishMode,t.combineMode,t.splitMode,n.context.$implicit,t.villageService)},null)}function cR(e){return so(0,[(e()(),zr(0,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,aR)),ki(2,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,2,0,n.component.getBuildings())},null)}function pR(e){return so(0,[(e()(),zr(0,0,null,null,11,"div",[["cdkDropList",""],["class","buildingDropWrapper cdk-drop-list"]],[[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],[[null,"cdkDropListDropped"]],function(e,n,t){var l=!0;return"cdkDropListDropped"===n&&(l=!1!==e.component.drop()&&l),l},null,null)),ki(1,1196032,[[2,4]],1,Yv,[Pn,Lv,Rl,[2,vm],[3,jv],[2,Zs],Uv],{enterPredicate:[0,"enterPredicate"]},{dropped:"cdkDropListDropped"}),Qi(603979776,4,{_draggables:1}),xi(256,[[1,4]],jv,void 0,[]),xi(2048,null,Hv,null,[Yv]),(e()(),zr(5,16777216,null,null,6,"app-building",[["cdkDrag",""],["class","cdk-drag"]],[[2,"cdk-drag-disabled",null],[2,"cdk-drag-dragging",null]],null,null,kO,mO)),xi(6144,null,Gv,null,[Vv]),ki(7,4866048,[[4,4]],3,Vv,[Pn,[3,Hv],Zs,Zt,bl,gv,Lv,Bv,[2,vm],Uv,Rl],null,null),Qi(603979776,5,{_handles:1}),Qi(335544320,6,{_previewTemplate:0}),Qi(335544320,7,{_placeholderTemplate:0}),ki(11,114688,null,0,vO,[Ig,Sg,xg,gO,sS,Tg],{demolishMode:[0,"demolishMode"],building:[1,"building"],parentRegion:[2,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,1,0,t.enter),e(n,11,0,t.demolishMode,n.context.$implicit,t.villageService)},function(e,n){e(n,0,0,Ei(n,1).id,Ei(n,1).disabled,Ei(n,1)._dropListRef.isDragging(),Ei(n,1)._dropListRef.isReceiving()),e(n,5,0,Ei(n,7).disabled,Ei(n,7)._dragRef.isDragging())})}function hR(e){return so(0,[(e()(),zr(0,0,null,null,8,"div",[["cdkDropListGroup",""],["class","buildings"]],null,null,null,null,null)),ki(1,147456,[[1,4]],0,jv,[],null,null),(e()(),zr(2,0,[["placeholder",1]],null,4,"div",[["cdkDropList",""],["class","cdk-drop-list"],["id","placeholder"]],[[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],[[null,"cdkDropListDropped"]],function(e,n,t){var l=!0;return"cdkDropListDropped"===n&&(l=!1!==e.component.drop()&&l),l},null,null)),xi(6144,null,Hv,null,[Yv]),ki(4,1196032,[[2,4]],1,Yv,[Pn,Lv,Rl,[2,vm],[3,jv],[2,Zs],Uv],{id:[0,"id"],enterPredicate:[1,"enterPredicate"]},{dropped:"cdkDropListDropped"}),Qi(603979776,3,{_draggables:1}),xi(256,[[1,4]],jv,void 0,[]),(e()(),jr(16777216,null,null,1,null,pR)),ki(8,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,4,0,"placeholder",t.enter),e(n,8,0,t.getBuildings())},function(e,n){e(n,2,0,Ei(n,4).id,Ei(n,4).disabled,Ei(n,4)._dropListRef.isDragging(),Ei(n,4)._dropListRef.isReceiving())})}function dR(e){return so(0,[Qi(671088640,1,{listGroup:0}),Qi(671088640,2,{placeholder:0}),(e()(),zr(2,0,null,null,68,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),zr(3,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),zr(4,0,null,null,1,"app-top-menu",[],null,null,null,BO,xO)),ki(5,114688,null,0,MO,[wg],null,null),(e()(),zr(6,0,null,null,64,"div",[["id","content"]],null,null,null,null,null)),(e()(),zr(7,0,null,null,33,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),zr(8,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.openBuildModal()&&l),l},null,null)),(e()(),io(-1,null,["Build"])),(e()(),jr(16777216,null,null,1,null,JO)),ki(11,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,eR)),ki(13,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,nR)),ki(15,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,tR)),ki(17,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,lR)),ki(19,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,rR)),ki(21,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,iR)),ki(23,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,oR)),ki(25,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),zr(26,0,null,null,14,"div",[["id","side"]],null,null,null,null,null)),(e()(),io(-1,null,[" Filter:"])),(e()(),zr(28,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(29,0,null,null,11,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,r=e.component;return"change"===n&&(l=!1!==Ei(e,30).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==Ei(e,30).onTouched()&&l),"change"===n&&(l=!1!==r.updateFilter(t)&&l),"ngModelChange"===n&&(l=!1!==(r.filterBuilding=t)&&l),l},null,null)),ki(30,16384,null,0,Ff,[Ln,Pn],null,null),xi(1024,null,Of,function(e){return[e]},[Ff]),ki(32,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),xi(2048,null,Nf,null,[pg]),ki(34,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),zr(35,0,null,null,3,"option",[],null,null,null,null,null)),ki(36,147456,null,0,Uf,[Pn,Ln,[2,Ff]],{value:[0,"value"]},null),ki(37,147456,null,0,Bf,[Pn,Ln,[8,null]],{value:[0,"value"]},null),(e()(),io(38,null,["",""])),(e()(),jr(16777216,null,null,1,null,uR)),ki(40,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null),(e()(),zr(41,0,null,null,21,"div",[["class","icon"]],null,null,null,null,null)),(e()(),zr(42,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(43,114688,null,0,cf,[],{name:[0,"name"]},null),(e()(),io(44,null,[" ","/"," \xa0\xa0 "])),(e()(),zr(45,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(46,114688,null,0,cf,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),io(47,null,[" "," \xa0\xa0\xa0 "])),(e()(),zr(48,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(49,114688,null,0,cf,[],{name:[0,"name"]},null),(e()(),io(50,null,[" "," \xa0\xa0\xa0 "])),(e()(),zr(51,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(52,114688,null,0,cf,[],{name:[0,"name"],title:[1,"title"]},null),(e()(),io(53,null,["\xa0"," \xa0\xa0\xa0 "])),(e()(),jr(16777216,null,null,1,null,sR)),ki(55,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),zr(56,0,null,null,1,"app-happiness",[],null,null,null,$O,WO)),ki(57,114688,null,0,VO,[kg],null,null),(e()(),zr(58,0,null,null,4,"div",[["id","allControl"]],null,null,null,null,null)),(e()(),zr(59,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.enableAll()&&l),l},null,null)),(e()(),io(-1,null,["all on"])),(e()(),zr(61,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.disableAll()&&l),l},null,null)),(e()(),io(-1,null,["all off"])),(e()(),zr(63,0,null,null,7,"div",[["id","buildingsWrapper"]],null,null,null,null,null)),(e()(),zr(64,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),zr(65,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["Buildings"])),(e()(),jr(16777216,null,null,1,null,cR)),ki(68,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,hR)),ki(70,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,5,0),e(n,11,0,!t.demolishMode),e(n,13,0,t.demolishMode),e(n,15,0,!t.arrangeMode&&t.getBuildings().length>1),e(n,17,0,t.arrangeMode),e(n,19,0,!t.combineMode&&t.isUrbanPlanningEnabled()&&t.hasCombinableBuildings()),e(n,21,0,t.combineMode),e(n,23,0,!t.splitMode&&t.isUrbanPlanningEnabled()&&t.hasSplittableBuildings()),e(n,25,0,t.splitMode),e(n,32,0,t.filterBuilding),e(n,36,0,t.allBuildings),e(n,37,0,t.allBuildings),e(n,40,0,t.getUniqueBuildingsFromCurrentView()),e(n,43,0,"population"),e(n,46,0,"hammer","Workers","0 0 0 2px"),e(n,49,0,"land"),e(n,52,0,"village","Village size"),e(n,55,0,t.isFoodNutritionEnabled()),e(n,57,0),e(n,68,0,!t.arrangeMode),e(n,70,0,t.arrangeMode)},function(e,n){var t=n.component;e(n,29,0,Ei(n,34).ngClassUntouched,Ei(n,34).ngClassTouched,Ei(n,34).ngClassPristine,Ei(n,34).ngClassDirty,Ei(n,34).ngClassValid,Ei(n,34).ngClassInvalid,Ei(n,34).ngClassPending),e(n,38,0,t.getBuildingName(t.allBuildings)),e(n,44,0,t.getPopulation(),t.getPopulationCap()),e(n,47,0,t.getUnemployed()),e(n,50,0,t.getFreeLand()),e(n,53,0,t.getTakenLand())})}function fR(e){return so(0,[(e()(),zr(0,0,null,null,1,"app-village",[],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ei(e,1).onKeydownHandler(t)&&l),l},dR,XO)),ki(1,114688,null,0,ZO,[Ig,oS,wg,sS,xg,gO,Ag,Rl],null,null)],function(e,n){e(n,1,0)},null)}var gR=ai("app-village",ZO,fR,{},{},[]),vR=function(e){function n(n,t,l,r,i,o){var u=e.call(this,n,t,l,i,r,o,Mu.FORT)||this;return u.fortService=i,u}return r(n,e),n}(QO),mR=gr({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:100%;max-height:100%;font-size:1em}#content[_ngcontent-%COMP%]{margin:.5%;display:flex;flex-direction:column;height:94%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#side[_ngcontent-%COMP%]{float:right;font-size:.9em;width:25%;margin:.5%;display:inline-block;vertical-align:bottom}#side[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:.8em;margin:0;padding:0;border:none;outline:0}#buildingsWrapper[_ngcontent-%COMP%]{height:85.5%}.buildings[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;height:100%;border:2px solid #000;overflow-y:auto;align-content:flex-start}.buildings[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}#title[_ngcontent-%COMP%]{text-align:center;border:2px solid #000;border-bottom:none}.off[_ngcontent-%COMP%]{background-color:#555}.buildingRegularWrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:.6%}.buildingDropWrapper[_ngcontent-%COMP%]{display:flex;margin:.6%;cursor:move}.buildingDropWrapper[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}#allControl[_ngcontent-%COMP%]{margin-left:auto;width:108px;display:inline-block}#allControl[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:4px}"]],data:{}});function yR(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleDemolishMode()&&l),l},null,null)),(e()(),io(-1,null,["Demolish"]))],null,null)}function SR(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleDemolishMode()&&l),l},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function ER(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleArrangeMode()&&l),l},null,null)),(e()(),io(-1,null,["Arrange"]))],null,null)}function bR(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleArrangeMode()&&l),l},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function OR(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleCombineMode()&&l),l},null,null)),(e()(),io(-1,null,["Combine"]))],null,null)}function RR(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleCombineMode()&&l),l},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function CR(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleSplitMode()&&l),l},null,null)),(e()(),io(-1,null,["Split"]))],null,null)}function _R(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleSplitMode()&&l),l},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function TR(e){return so(0,[(e()(),zr(0,0,null,null,3,"option",[],null,null,null,null,null)),ki(1,147456,null,0,Uf,[Pn,Ln,[2,Ff]],{value:[0,"value"]},null),ki(2,147456,null,0,Bf,[Pn,Ln,[8,null]],{value:[0,"value"]},null),(e()(),io(3,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,3,0,n.component.getBuildingName(n.context.$implicit))})}function IR(e){return so(0,[(e()(),zr(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,1,"app-building",[],null,null,null,kO,mO)),ki(2,114688,null,0,vO,[Ig,Sg,xg,gO,sS,Tg],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],building:[3,"building"],parentRegion:[4,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,2,0,t.demolishMode,t.combineMode,t.splitMode,n.context.$implicit,t.fortService)},null)}function AR(e){return so(0,[(e()(),zr(0,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,IR)),ki(2,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,2,0,n.component.getBuildings())},null)}function wR(e){return so(0,[(e()(),zr(0,0,null,null,11,"div",[["cdkDropList",""],["class","buildingDropWrapper cdk-drop-list"]],[[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],[[null,"cdkDropListDropped"]],function(e,n,t){var l=!0;return"cdkDropListDropped"===n&&(l=!1!==e.component.drop()&&l),l},null,null)),ki(1,1196032,[[2,4]],1,Yv,[Pn,Lv,Rl,[2,vm],[3,jv],[2,Zs],Uv],{enterPredicate:[0,"enterPredicate"]},{dropped:"cdkDropListDropped"}),Qi(603979776,4,{_draggables:1}),xi(256,[[1,4]],jv,void 0,[]),xi(2048,null,Hv,null,[Yv]),(e()(),zr(5,16777216,null,null,6,"app-building",[["cdkDrag",""],["class","cdk-drag"]],[[2,"cdk-drag-disabled",null],[2,"cdk-drag-dragging",null]],null,null,kO,mO)),xi(6144,null,Gv,null,[Vv]),ki(7,4866048,[[4,4]],3,Vv,[Pn,[3,Hv],Zs,Zt,bl,gv,Lv,Bv,[2,vm],Uv,Rl],null,null),Qi(603979776,5,{_handles:1}),Qi(335544320,6,{_previewTemplate:0}),Qi(335544320,7,{_placeholderTemplate:0}),ki(11,114688,null,0,vO,[Ig,Sg,xg,gO,sS,Tg],{demolishMode:[0,"demolishMode"],building:[1,"building"],parentRegion:[2,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,1,0,t.enter),e(n,11,0,t.demolishMode,n.context.$implicit,t.fortService)},function(e,n){e(n,0,0,Ei(n,1).id,Ei(n,1).disabled,Ei(n,1)._dropListRef.isDragging(),Ei(n,1)._dropListRef.isReceiving()),e(n,5,0,Ei(n,7).disabled,Ei(n,7)._dragRef.isDragging())})}function NR(e){return so(0,[(e()(),zr(0,0,null,null,8,"div",[["cdkDropListGroup",""],["class","buildings"]],null,null,null,null,null)),ki(1,147456,[[1,4]],0,jv,[],null,null),(e()(),zr(2,0,[["placeholder",1]],null,4,"div",[["cdkDropList",""],["class","cdk-drop-list"],["id","placeholder"]],[[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],[[null,"cdkDropListDropped"]],function(e,n,t){var l=!0;return"cdkDropListDropped"===n&&(l=!1!==e.component.drop()&&l),l},null,null)),xi(6144,null,Hv,null,[Yv]),ki(4,1196032,[[2,4]],1,Yv,[Pn,Lv,Rl,[2,vm],[3,jv],[2,Zs],Uv],{id:[0,"id"],enterPredicate:[1,"enterPredicate"]},{dropped:"cdkDropListDropped"}),Qi(603979776,3,{_draggables:1}),xi(256,[[1,4]],jv,void 0,[]),(e()(),jr(16777216,null,null,1,null,wR)),ki(8,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,4,0,"placeholder",t.enter),e(n,8,0,t.getBuildings())},function(e,n){e(n,2,0,Ei(n,4).id,Ei(n,4).disabled,Ei(n,4)._dropListRef.isDragging(),Ei(n,4)._dropListRef.isReceiving())})}function PR(e){return so(0,[Qi(671088640,1,{listGroup:0}),Qi(671088640,2,{placeholder:0}),(e()(),zr(2,0,null,null,58,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),zr(3,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),zr(4,0,null,null,1,"app-top-menu",[],null,null,null,BO,xO)),ki(5,114688,null,0,MO,[wg],null,null),(e()(),zr(6,0,null,null,54,"div",[["id","content"]],null,null,null,null,null)),(e()(),zr(7,0,null,null,33,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),zr(8,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.openBuildModal()&&l),l},null,null)),(e()(),io(-1,null,["Build"])),(e()(),jr(16777216,null,null,1,null,yR)),ki(11,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,SR)),ki(13,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,ER)),ki(15,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,bR)),ki(17,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,OR)),ki(19,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,RR)),ki(21,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,CR)),ki(23,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,_R)),ki(25,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),zr(26,0,null,null,14,"div",[["id","side"]],null,null,null,null,null)),(e()(),io(-1,null,[" Filter:"])),(e()(),zr(28,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(29,0,null,null,11,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,r=e.component;return"change"===n&&(l=!1!==Ei(e,30).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==Ei(e,30).onTouched()&&l),"change"===n&&(l=!1!==r.updateFilter(t)&&l),"ngModelChange"===n&&(l=!1!==(r.filterBuilding=t)&&l),l},null,null)),ki(30,16384,null,0,Ff,[Ln,Pn],null,null),xi(1024,null,Of,function(e){return[e]},[Ff]),ki(32,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),xi(2048,null,Nf,null,[pg]),ki(34,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),zr(35,0,null,null,3,"option",[],null,null,null,null,null)),ki(36,147456,null,0,Uf,[Pn,Ln,[2,Ff]],{value:[0,"value"]},null),ki(37,147456,null,0,Bf,[Pn,Ln,[8,null]],{value:[0,"value"]},null),(e()(),io(38,null,["",""])),(e()(),jr(16777216,null,null,1,null,TR)),ki(40,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null),(e()(),zr(41,0,null,null,11,"div",[["class","icon"]],null,null,null,null,null)),(e()(),zr(42,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(43,114688,null,0,cf,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),io(44,null,[" "," \xa0\xa0\xa0 "])),(e()(),zr(45,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(46,114688,null,0,cf,[],{name:[0,"name"]},null),(e()(),io(47,null,[" "," "])),(e()(),zr(48,0,null,null,4,"div",[["id","allControl"]],null,null,null,null,null)),(e()(),zr(49,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.enableAll()&&l),l},null,null)),(e()(),io(-1,null,["all on"])),(e()(),zr(51,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.disableAll()&&l),l},null,null)),(e()(),io(-1,null,["all off"])),(e()(),zr(53,0,null,null,7,"div",[["id","buildingsWrapper"]],null,null,null,null,null)),(e()(),zr(54,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),zr(55,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["Buildings"])),(e()(),jr(16777216,null,null,1,null,AR)),ki(58,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,NR)),ki(60,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,5,0),e(n,11,0,!t.demolishMode),e(n,13,0,t.demolishMode),e(n,15,0,!t.arrangeMode&&t.getBuildings().length>1),e(n,17,0,t.arrangeMode),e(n,19,0,!t.combineMode&&t.isUrbanPlanningEnabled()&&t.hasCombinableBuildings()),e(n,21,0,t.combineMode),e(n,23,0,!t.splitMode&&t.isUrbanPlanningEnabled()&&t.hasSplittableBuildings()),e(n,25,0,t.splitMode),e(n,32,0,t.filterBuilding),e(n,36,0,t.allBuildings),e(n,37,0,t.allBuildings),e(n,40,0,t.getUniqueBuildingsFromCurrentView()),e(n,43,0,"hammer","Workers","0 0 0 2px"),e(n,46,0,"land"),e(n,58,0,!t.arrangeMode),e(n,60,0,t.arrangeMode)},function(e,n){var t=n.component;e(n,29,0,Ei(n,34).ngClassUntouched,Ei(n,34).ngClassTouched,Ei(n,34).ngClassPristine,Ei(n,34).ngClassDirty,Ei(n,34).ngClassValid,Ei(n,34).ngClassInvalid,Ei(n,34).ngClassPending),e(n,38,0,t.getBuildingName(t.allBuildings)),e(n,44,0,t.getUnemployed()),e(n,47,0,t.getFreeLand())})}function DR(e){return so(0,[(e()(),zr(0,0,null,null,1,"app-fort",[],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ei(e,1).onKeydownHandler(t)&&l),l},PR,mR)),ki(1,114688,null,0,vR,[Ig,oS,wg,Ag,SE,Rl],null,null)],function(e,n){e(n,1,0)},null)}var kR=ai("app-fort",vR,DR,{},{},[]),MR=function(e){function n(n,t,l,r,i){var o=e.call(this,t,n,l,i,Mu.FOREST,Nu.FOREST)||this;return o.idService=r,o}return r(n,e),n.prototype.init=function(){var e=this;this.buildings.push(new Gm(this.servicesService,this.idService.getNextId()).build()),this.buildings.push(new Zm(this.servicesService,this.idService.getNextId()).build()),this.buildings.forEach(function(n){return e.landService.takeLand(n.getSize())})},n.ngInjectableDef=ve({factory:function(){return new n(Ye(xg),Ye(lS),Ye(Sg),Ye(nS),Ye(oS))},token:n,providedIn:"root"}),n}(uS),xR=function(e){function n(n,t,l,r,i,o){var u=e.call(this,n,t,l,i,r,o,Mu.FOREST)||this;return u.forestService=i,u}return r(n,e),n.prototype.getForestSize=function(){return this.landService.getForest()},n}(QO),LR=gr({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:100%;max-height:100%;font-size:1em}#content[_ngcontent-%COMP%]{margin:.5%;display:flex;flex-direction:column;height:94%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#side[_ngcontent-%COMP%]{float:right;font-size:.9em;width:25%;margin:.5%;display:inline-block;vertical-align:bottom}#side[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:.8em;margin:0;padding:0;border:none;outline:0}#buildingsWrapper[_ngcontent-%COMP%]{height:85.5%}.buildings[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;height:100%;border:2px solid #000;overflow-y:auto;align-content:flex-start}.buildings[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}#title[_ngcontent-%COMP%]{text-align:center;border:2px solid #000;border-bottom:none}.off[_ngcontent-%COMP%]{background-color:#555}.buildingRegularWrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:.6%}.buildingDropWrapper[_ngcontent-%COMP%]{display:flex;margin:.6%;cursor:move}.buildingDropWrapper[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}.critical[_ngcontent-%COMP%]{color:#8b0000}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}#allControl[_ngcontent-%COMP%]{margin-left:auto;width:108px;display:inline-block}#allControl[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:4px}"]],data:{}});function FR(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleDemolishMode()&&l),l},null,null)),(e()(),io(-1,null,["Demolish"]))],null,null)}function UR(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleDemolishMode()&&l),l},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function HR(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleArrangeMode()&&l),l},null,null)),(e()(),io(-1,null,["Arrange"]))],null,null)}function GR(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleArrangeMode()&&l),l},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function BR(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleCombineMode()&&l),l},null,null)),(e()(),io(-1,null,["Combine"]))],null,null)}function VR(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleCombineMode()&&l),l},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function WR(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleSplitMode()&&l),l},null,null)),(e()(),io(-1,null,["Split"]))],null,null)}function jR(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleSplitMode()&&l),l},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function zR(e){return so(0,[(e()(),zr(0,0,null,null,3,"option",[],null,null,null,null,null)),ki(1,147456,null,0,Uf,[Pn,Ln,[2,Ff]],{value:[0,"value"]},null),ki(2,147456,null,0,Bf,[Pn,Ln,[8,null]],{value:[0,"value"]},null),(e()(),io(3,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,3,0,n.component.getBuildingName(n.context.$implicit))})}function YR(e){return so(0,[(e()(),zr(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.getForestSize())})}function KR(e){return so(0,[(e()(),zr(0,0,null,null,1,"span",[["class","critical"]],null,null,null,null,null)),(e()(),io(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.getForestSize())})}function qR(e){return so(0,[(e()(),zr(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,1,"app-building",[],null,null,null,kO,mO)),ki(2,114688,null,0,vO,[Ig,Sg,xg,gO,sS,Tg],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],building:[3,"building"],parentRegion:[4,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,2,0,t.demolishMode,t.combineMode,t.splitMode,n.context.$implicit,t.forestService)},null)}function $R(e){return so(0,[(e()(),zr(0,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,qR)),ki(2,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,2,0,n.component.getBuildings())},null)}function QR(e){return so(0,[(e()(),zr(0,0,null,null,11,"div",[["cdkDropList",""],["class","buildingDropWrapper cdk-drop-list"]],[[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],[[null,"cdkDropListDropped"]],function(e,n,t){var l=!0;return"cdkDropListDropped"===n&&(l=!1!==e.component.drop()&&l),l},null,null)),ki(1,1196032,[[2,4]],1,Yv,[Pn,Lv,Rl,[2,vm],[3,jv],[2,Zs],Uv],{enterPredicate:[0,"enterPredicate"]},{dropped:"cdkDropListDropped"}),Qi(603979776,4,{_draggables:1}),xi(256,[[1,4]],jv,void 0,[]),xi(2048,null,Hv,null,[Yv]),(e()(),zr(5,16777216,null,null,6,"app-building",[["cdkDrag",""],["class","cdk-drag"]],[[2,"cdk-drag-disabled",null],[2,"cdk-drag-dragging",null]],null,null,kO,mO)),xi(6144,null,Gv,null,[Vv]),ki(7,4866048,[[4,4]],3,Vv,[Pn,[3,Hv],Zs,Zt,bl,gv,Lv,Bv,[2,vm],Uv,Rl],null,null),Qi(603979776,5,{_handles:1}),Qi(335544320,6,{_previewTemplate:0}),Qi(335544320,7,{_placeholderTemplate:0}),ki(11,114688,null,0,vO,[Ig,Sg,xg,gO,sS,Tg],{demolishMode:[0,"demolishMode"],building:[1,"building"],parentRegion:[2,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,1,0,t.enter),e(n,11,0,t.demolishMode,n.context.$implicit,t.forestService)},function(e,n){e(n,0,0,Ei(n,1).id,Ei(n,1).disabled,Ei(n,1)._dropListRef.isDragging(),Ei(n,1)._dropListRef.isReceiving()),e(n,5,0,Ei(n,7).disabled,Ei(n,7)._dragRef.isDragging())})}function ZR(e){return so(0,[(e()(),zr(0,0,null,null,8,"div",[["cdkDropListGroup",""],["class","buildings"]],null,null,null,null,null)),ki(1,147456,[[1,4]],0,jv,[],null,null),(e()(),zr(2,0,[["placeholder",1]],null,4,"div",[["cdkDropList",""],["class","cdk-drop-list"],["id","placeholder"]],[[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],[[null,"cdkDropListDropped"]],function(e,n,t){var l=!0;return"cdkDropListDropped"===n&&(l=!1!==e.component.drop()&&l),l},null,null)),xi(6144,null,Hv,null,[Yv]),ki(4,1196032,[[2,4]],1,Yv,[Pn,Lv,Rl,[2,vm],[3,jv],[2,Zs],Uv],{id:[0,"id"],enterPredicate:[1,"enterPredicate"]},{dropped:"cdkDropListDropped"}),Qi(603979776,3,{_draggables:1}),xi(256,[[1,4]],jv,void 0,[]),(e()(),jr(16777216,null,null,1,null,QR)),ki(8,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,4,0,"placeholder",t.enter),e(n,8,0,t.getBuildings())},function(e,n){e(n,2,0,Ei(n,4).id,Ei(n,4).disabled,Ei(n,4)._dropListRef.isDragging(),Ei(n,4)._dropListRef.isReceiving())})}function XR(e){return so(0,[Qi(671088640,1,{listGroup:0}),Qi(671088640,2,{placeholder:0}),(e()(),zr(2,0,null,null,65,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),zr(3,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),zr(4,0,null,null,1,"app-top-menu",[],null,null,null,BO,xO)),ki(5,114688,null,0,MO,[wg],null,null),(e()(),zr(6,0,null,null,61,"div",[["id","content"]],null,null,null,null,null)),(e()(),zr(7,0,null,null,33,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),zr(8,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.openBuildModal()&&l),l},null,null)),(e()(),io(-1,null,["Build"])),(e()(),jr(16777216,null,null,1,null,FR)),ki(11,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,UR)),ki(13,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,HR)),ki(15,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,GR)),ki(17,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,BR)),ki(19,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,VR)),ki(21,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,WR)),ki(23,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,jR)),ki(25,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),zr(26,0,null,null,14,"div",[["id","side"]],null,null,null,null,null)),(e()(),io(-1,null,[" Filter:"])),(e()(),zr(28,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(29,0,null,null,11,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,r=e.component;return"change"===n&&(l=!1!==Ei(e,30).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==Ei(e,30).onTouched()&&l),"change"===n&&(l=!1!==r.updateFilter(t)&&l),"ngModelChange"===n&&(l=!1!==(r.filterBuilding=t)&&l),l},null,null)),ki(30,16384,null,0,Ff,[Ln,Pn],null,null),xi(1024,null,Of,function(e){return[e]},[Ff]),ki(32,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),xi(2048,null,Nf,null,[pg]),ki(34,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),zr(35,0,null,null,3,"option",[],null,null,null,null,null)),ki(36,147456,null,0,Uf,[Pn,Ln,[2,Ff]],{value:[0,"value"]},null),ki(37,147456,null,0,Bf,[Pn,Ln,[8,null]],{value:[0,"value"]},null),(e()(),io(38,null,["",""])),(e()(),jr(16777216,null,null,1,null,zR)),ki(40,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null),(e()(),zr(41,0,null,null,18,"div",[["class","icon"]],null,null,null,null,null)),(e()(),zr(42,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(43,114688,null,0,cf,[],{name:[0,"name"]},null),(e()(),jr(16777216,null,null,1,null,YR)),ki(45,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,KR)),ki(47,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),io(-1,null,[" \xa0\xa0 "])),(e()(),zr(49,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(50,114688,null,0,cf,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),io(51,null,[" "," \xa0\xa0\xa0 "])),(e()(),zr(52,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(53,114688,null,0,cf,[],{name:[0,"name"]},null),(e()(),io(54,null,[" "," "])),(e()(),zr(55,0,null,null,4,"div",[["id","allControl"]],null,null,null,null,null)),(e()(),zr(56,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.enableAll()&&l),l},null,null)),(e()(),io(-1,null,["all on"])),(e()(),zr(58,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.disableAll()&&l),l},null,null)),(e()(),io(-1,null,["all off"])),(e()(),zr(60,0,null,null,7,"div",[["id","buildingsWrapper"]],null,null,null,null,null)),(e()(),zr(61,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),zr(62,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["Buildings"])),(e()(),jr(16777216,null,null,1,null,$R)),ki(65,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,ZR)),ki(67,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,5,0),e(n,11,0,!t.demolishMode),e(n,13,0,t.demolishMode),e(n,15,0,!t.arrangeMode&&t.getBuildings().length>1),e(n,17,0,t.arrangeMode),e(n,19,0,!t.combineMode&&t.isUrbanPlanningEnabled()&&t.hasCombinableBuildings()),e(n,21,0,t.combineMode),e(n,23,0,!t.splitMode&&t.isUrbanPlanningEnabled()&&t.hasSplittableBuildings()),e(n,25,0,t.splitMode),e(n,32,0,t.filterBuilding),e(n,36,0,t.allBuildings),e(n,37,0,t.allBuildings),e(n,40,0,t.getUniqueBuildingsFromCurrentView()),e(n,43,0,"forest"),e(n,45,0,t.getForestSize()>=500),e(n,47,0,t.getForestSize()<500),e(n,50,0,"hammer","Workers","0 0 0 2px"),e(n,53,0,"land"),e(n,65,0,!t.arrangeMode),e(n,67,0,t.arrangeMode)},function(e,n){var t=n.component;e(n,29,0,Ei(n,34).ngClassUntouched,Ei(n,34).ngClassTouched,Ei(n,34).ngClassPristine,Ei(n,34).ngClassDirty,Ei(n,34).ngClassValid,Ei(n,34).ngClassInvalid,Ei(n,34).ngClassPending),e(n,38,0,t.getBuildingName(t.allBuildings)),e(n,51,0,t.getUnemployed()),e(n,54,0,t.getFreeLand())})}function JR(e){return so(0,[(e()(),zr(0,0,null,null,1,"app-forest",[],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ei(e,1).onKeydownHandler(t)&&l),l},XR,LR)),ki(1,114688,null,0,xR,[Ig,oS,wg,Ag,MR,Rl],null,null)],function(e,n){e(n,1,0)},null)}var eC=ai("app-forest",xR,JR,{},{},[]),nC=function(e){function n(n,t,l,r){return e.call(this,t,n,l,r,Mu.FIELD,Nu.FIELD)||this}return r(n,e),n.ngInjectableDef=ve({factory:function(){return new n(Ye(xg),Ye(lS),Ye(Sg),Ye(oS))},token:n,providedIn:"root"}),n}(uS),tC=function(e){function n(n,t,l,r,i,o){var u=e.call(this,n,t,l,i,r,o,Mu.FIELD)||this;return u.fieldService=i,u}return r(n,e),n}(QO),lC=gr({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:100%;max-height:100%;font-size:1em}#content[_ngcontent-%COMP%]{margin:.5%;display:flex;flex-direction:column;height:94%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#side[_ngcontent-%COMP%]{float:right;font-size:.9em;width:25%;margin:.5%;display:inline-block;vertical-align:bottom}#side[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:.8em;margin:0;padding:0;border:none;outline:0}#buildingsWrapper[_ngcontent-%COMP%]{height:85.5%}.buildings[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;height:100%;border:2px solid #000;overflow-y:auto;align-content:flex-start}.buildings[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}#title[_ngcontent-%COMP%]{text-align:center;border:2px solid #000;border-bottom:none}.off[_ngcontent-%COMP%]{background-color:#555}.buildingRegularWrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:.6%}.buildingDropWrapper[_ngcontent-%COMP%]{display:flex;margin:.6%;cursor:move}.buildingDropWrapper[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}#allControl[_ngcontent-%COMP%]{margin-left:auto;width:108px;display:inline-block}#allControl[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:4px}"]],data:{}});function rC(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleDemolishMode()&&l),l},null,null)),(e()(),io(-1,null,["Demolish"]))],null,null)}function iC(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleDemolishMode()&&l),l},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function oC(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleArrangeMode()&&l),l},null,null)),(e()(),io(-1,null,["Arrange"]))],null,null)}function uC(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleArrangeMode()&&l),l},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function sC(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleCombineMode()&&l),l},null,null)),(e()(),io(-1,null,["Combine"]))],null,null)}function aC(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleCombineMode()&&l),l},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function cC(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleSplitMode()&&l),l},null,null)),(e()(),io(-1,null,["Split"]))],null,null)}function pC(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleSplitMode()&&l),l},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function hC(e){return so(0,[(e()(),zr(0,0,null,null,3,"option",[],null,null,null,null,null)),ki(1,147456,null,0,Uf,[Pn,Ln,[2,Ff]],{value:[0,"value"]},null),ki(2,147456,null,0,Bf,[Pn,Ln,[8,null]],{value:[0,"value"]},null),(e()(),io(3,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,3,0,n.component.getBuildingName(n.context.$implicit))})}function dC(e){return so(0,[(e()(),zr(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,1,"app-building",[],null,null,null,kO,mO)),ki(2,114688,null,0,vO,[Ig,Sg,xg,gO,sS,Tg],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],building:[3,"building"],parentRegion:[4,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,2,0,t.demolishMode,t.combineMode,t.splitMode,n.context.$implicit,t.fieldService)},null)}function fC(e){return so(0,[(e()(),zr(0,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,dC)),ki(2,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,2,0,n.component.getBuildings())},null)}function gC(e){return so(0,[(e()(),zr(0,0,null,null,11,"div",[["cdkDropList",""],["class","buildingDropWrapper cdk-drop-list"]],[[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],[[null,"cdkDropListDropped"]],function(e,n,t){var l=!0;return"cdkDropListDropped"===n&&(l=!1!==e.component.drop()&&l),l},null,null)),ki(1,1196032,[[2,4]],1,Yv,[Pn,Lv,Rl,[2,vm],[3,jv],[2,Zs],Uv],{enterPredicate:[0,"enterPredicate"]},{dropped:"cdkDropListDropped"}),Qi(603979776,4,{_draggables:1}),xi(256,[[1,4]],jv,void 0,[]),xi(2048,null,Hv,null,[Yv]),(e()(),zr(5,16777216,null,null,6,"app-building",[["cdkDrag",""],["class","cdk-drag"]],[[2,"cdk-drag-disabled",null],[2,"cdk-drag-dragging",null]],null,null,kO,mO)),xi(6144,null,Gv,null,[Vv]),ki(7,4866048,[[4,4]],3,Vv,[Pn,[3,Hv],Zs,Zt,bl,gv,Lv,Bv,[2,vm],Uv,Rl],null,null),Qi(603979776,5,{_handles:1}),Qi(335544320,6,{_previewTemplate:0}),Qi(335544320,7,{_placeholderTemplate:0}),ki(11,114688,null,0,vO,[Ig,Sg,xg,gO,sS,Tg],{demolishMode:[0,"demolishMode"],building:[1,"building"],parentRegion:[2,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,1,0,t.enter),e(n,11,0,t.demolishMode,n.context.$implicit,t.fieldService)},function(e,n){e(n,0,0,Ei(n,1).id,Ei(n,1).disabled,Ei(n,1)._dropListRef.isDragging(),Ei(n,1)._dropListRef.isReceiving()),e(n,5,0,Ei(n,7).disabled,Ei(n,7)._dragRef.isDragging())})}function vC(e){return so(0,[(e()(),zr(0,0,null,null,8,"div",[["cdkDropListGroup",""],["class","buildings"]],null,null,null,null,null)),ki(1,147456,[[1,4]],0,jv,[],null,null),(e()(),zr(2,0,[["placeholder",1]],null,4,"div",[["cdkDropList",""],["class","cdk-drop-list"],["id","placeholder"]],[[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],[[null,"cdkDropListDropped"]],function(e,n,t){var l=!0;return"cdkDropListDropped"===n&&(l=!1!==e.component.drop()&&l),l},null,null)),xi(6144,null,Hv,null,[Yv]),ki(4,1196032,[[2,4]],1,Yv,[Pn,Lv,Rl,[2,vm],[3,jv],[2,Zs],Uv],{id:[0,"id"],enterPredicate:[1,"enterPredicate"]},{dropped:"cdkDropListDropped"}),Qi(603979776,3,{_draggables:1}),xi(256,[[1,4]],jv,void 0,[]),(e()(),jr(16777216,null,null,1,null,gC)),ki(8,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,4,0,"placeholder",t.enter),e(n,8,0,t.getBuildings())},function(e,n){e(n,2,0,Ei(n,4).id,Ei(n,4).disabled,Ei(n,4)._dropListRef.isDragging(),Ei(n,4)._dropListRef.isReceiving())})}function mC(e){return so(0,[Qi(671088640,1,{listGroup:0}),Qi(671088640,2,{placeholder:0}),(e()(),zr(2,0,null,null,58,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),zr(3,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),zr(4,0,null,null,1,"app-top-menu",[],null,null,null,BO,xO)),ki(5,114688,null,0,MO,[wg],null,null),(e()(),zr(6,0,null,null,54,"div",[["id","content"]],null,null,null,null,null)),(e()(),zr(7,0,null,null,33,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),zr(8,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.openBuildModal()&&l),l},null,null)),(e()(),io(-1,null,["Build"])),(e()(),jr(16777216,null,null,1,null,rC)),ki(11,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,iC)),ki(13,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,oC)),ki(15,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,uC)),ki(17,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,sC)),ki(19,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,aC)),ki(21,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,cC)),ki(23,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,pC)),ki(25,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),zr(26,0,null,null,14,"div",[["id","side"]],null,null,null,null,null)),(e()(),io(-1,null,[" Filter:"])),(e()(),zr(28,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(29,0,null,null,11,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,r=e.component;return"change"===n&&(l=!1!==Ei(e,30).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==Ei(e,30).onTouched()&&l),"change"===n&&(l=!1!==r.updateFilter(t)&&l),"ngModelChange"===n&&(l=!1!==(r.filterBuilding=t)&&l),l},null,null)),ki(30,16384,null,0,Ff,[Ln,Pn],null,null),xi(1024,null,Of,function(e){return[e]},[Ff]),ki(32,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),xi(2048,null,Nf,null,[pg]),ki(34,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),zr(35,0,null,null,3,"option",[],null,null,null,null,null)),ki(36,147456,null,0,Uf,[Pn,Ln,[2,Ff]],{value:[0,"value"]},null),ki(37,147456,null,0,Bf,[Pn,Ln,[8,null]],{value:[0,"value"]},null),(e()(),io(38,null,["",""])),(e()(),jr(16777216,null,null,1,null,hC)),ki(40,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null),(e()(),zr(41,0,null,null,11,"div",[["class","icon"]],null,null,null,null,null)),(e()(),zr(42,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(43,114688,null,0,cf,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),io(44,null,[" "," \xa0\xa0\xa0 "])),(e()(),zr(45,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(46,114688,null,0,cf,[],{name:[0,"name"]},null),(e()(),io(47,null,[" "," "])),(e()(),zr(48,0,null,null,4,"div",[["id","allControl"]],null,null,null,null,null)),(e()(),zr(49,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.enableAll()&&l),l},null,null)),(e()(),io(-1,null,["all on"])),(e()(),zr(51,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.disableAll()&&l),l},null,null)),(e()(),io(-1,null,["all off"])),(e()(),zr(53,0,null,null,7,"div",[["id","buildingsWrapper"]],null,null,null,null,null)),(e()(),zr(54,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),zr(55,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["Buildings"])),(e()(),jr(16777216,null,null,1,null,fC)),ki(58,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,vC)),ki(60,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,5,0),e(n,11,0,!t.demolishMode),e(n,13,0,t.demolishMode),e(n,15,0,!t.arrangeMode&&t.getBuildings().length>1),e(n,17,0,t.arrangeMode),e(n,19,0,!t.combineMode&&t.isUrbanPlanningEnabled()&&t.hasCombinableBuildings()),e(n,21,0,t.combineMode),e(n,23,0,!t.splitMode&&t.isUrbanPlanningEnabled()&&t.hasSplittableBuildings()),e(n,25,0,t.splitMode),e(n,32,0,t.filterBuilding),e(n,36,0,t.allBuildings),e(n,37,0,t.allBuildings),e(n,40,0,t.getUniqueBuildingsFromCurrentView()),e(n,43,0,"hammer","Workers","0 0 0 2px"),e(n,46,0,"land"),e(n,58,0,!t.arrangeMode),e(n,60,0,t.arrangeMode)},function(e,n){var t=n.component;e(n,29,0,Ei(n,34).ngClassUntouched,Ei(n,34).ngClassTouched,Ei(n,34).ngClassPristine,Ei(n,34).ngClassDirty,Ei(n,34).ngClassValid,Ei(n,34).ngClassInvalid,Ei(n,34).ngClassPending),e(n,38,0,t.getBuildingName(t.allBuildings)),e(n,44,0,t.getUnemployed()),e(n,47,0,t.getFreeLand())})}function yC(e){return so(0,[(e()(),zr(0,0,null,null,1,"app-field",[],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ei(e,1).onKeydownHandler(t)&&l),l},mC,lC)),ki(1,114688,null,0,tC,[Ig,oS,wg,Ag,nC,Rl],null,null)],function(e,n){e(n,1,0)},null)}var SC=ai("app-field",tC,yC,{},{},[]),EC=function(e){function n(n,t,l,r){return e.call(this,t,n,l,r,Mu.MOUNTAINS,Nu.MOUNTAINS)||this}return r(n,e),n.ngInjectableDef=ve({factory:function(){return new n(Ye(xg),Ye(lS),Ye(Sg),Ye(oS))},token:n,providedIn:"root"}),n}(uS),bC=function(e){function n(n,t,l,r,i,o){var u=e.call(this,n,t,l,i,r,o,Mu.MOUNTAINS)||this;return u.mountainsService=i,u}return r(n,e),n.prototype.getMountains=function(){return this.landService.getMountains()},n.prototype.getCoal=function(){return this.landService.getOre(vu.COAL)},n.prototype.getGoldOre=function(){return this.landService.getOre(vu.GOLD_ORE)},n.prototype.getSilverOre=function(){return this.landService.getOre(vu.SILVER_ORE)},n.prototype.getCopperOre=function(){return this.landService.getOre(vu.COPPER_ORE)},n.prototype.getTinOre=function(){return this.landService.getOre(vu.TIN_ORE)},n.prototype.getIronOre=function(){return this.landService.getOre(vu.IRON_ORE)},n}(QO),OC=gr({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:100%;max-height:100%;font-size:1em}#content[_ngcontent-%COMP%]{margin:.5%;display:flex;flex-direction:column;height:94%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#side[_ngcontent-%COMP%]{float:right;font-size:.9em;width:25%;margin:.5%;display:inline-block;vertical-align:bottom}#side[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:.8em;margin:0;padding:0;border:none;outline:0}#buildingsWrapper[_ngcontent-%COMP%]{height:85.5%}.buildings[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;height:100%;border:2px solid #000;overflow-y:auto;align-content:flex-start}.buildings[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}#title[_ngcontent-%COMP%]{text-align:center;border:2px solid #000;border-bottom:none}.off[_ngcontent-%COMP%]{background-color:#555}.buildingRegularWrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:.6%}.buildingDropWrapper[_ngcontent-%COMP%]{display:flex;margin:.6%;cursor:move}.buildingDropWrapper[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}#allControl[_ngcontent-%COMP%]{margin-left:auto;width:108px;display:inline-block}#allControl[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:4px}"]],data:{}});function RC(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleDemolishMode()&&l),l},null,null)),(e()(),io(-1,null,["Demolish"]))],null,null)}function CC(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleDemolishMode()&&l),l},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function _C(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleArrangeMode()&&l),l},null,null)),(e()(),io(-1,null,["Arrange"]))],null,null)}function TC(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleArrangeMode()&&l),l},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function IC(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleCombineMode()&&l),l},null,null)),(e()(),io(-1,null,["Combine"]))],null,null)}function AC(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleCombineMode()&&l),l},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function wC(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleSplitMode()&&l),l},null,null)),(e()(),io(-1,null,["Split"]))],null,null)}function NC(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleSplitMode()&&l),l},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function PC(e){return so(0,[(e()(),zr(0,0,null,null,3,"option",[],null,null,null,null,null)),ki(1,147456,null,0,Uf,[Pn,Ln,[2,Ff]],{value:[0,"value"]},null),ki(2,147456,null,0,Bf,[Pn,Ln,[8,null]],{value:[0,"value"]},null),(e()(),io(3,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,3,0,n.component.getBuildingName(n.context.$implicit))})}function DC(e){return so(0,[(e()(),zr(0,0,null,null,4,"span",[],null,null,null,null,null)),(e()(),io(-1,null,[" \xa0\xa0\xa0 "])),(e()(),zr(2,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(3,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),io(4,null,[": "," "]))],function(e,n){e(n,3,0,"coal","resources","coal deposit")},function(e,n){e(n,4,0,n.component.getCoal())})}function kC(e){return so(0,[(e()(),zr(0,0,null,null,4,"span",[],null,null,null,null,null)),(e()(),io(-1,null,[" \xa0\xa0\xa0 "])),(e()(),zr(2,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(3,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),io(4,null,[": "," "]))],function(e,n){e(n,3,0,"gold_ore","resources","gold deposit")},function(e,n){e(n,4,0,n.component.getGoldOre())})}function MC(e){return so(0,[(e()(),zr(0,0,null,null,4,"span",[],null,null,null,null,null)),(e()(),io(-1,null,[" \xa0\xa0\xa0 "])),(e()(),zr(2,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(3,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),io(4,null,[": "," "]))],function(e,n){e(n,3,0,"silver_ore","resources","silver deposit")},function(e,n){e(n,4,0,n.component.getSilverOre())})}function xC(e){return so(0,[(e()(),zr(0,0,null,null,4,"span",[],null,null,null,null,null)),(e()(),io(-1,null,[" \xa0\xa0\xa0 "])),(e()(),zr(2,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(3,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),io(4,null,[": "," "]))],function(e,n){e(n,3,0,"copper_ore","resources","copper deposit")},function(e,n){e(n,4,0,n.component.getCopperOre())})}function LC(e){return so(0,[(e()(),zr(0,0,null,null,4,"span",[],null,null,null,null,null)),(e()(),io(-1,null,[" \xa0\xa0\xa0 "])),(e()(),zr(2,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(3,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),io(4,null,[": "," "]))],function(e,n){e(n,3,0,"tin_ore","resources","tin deposit")},function(e,n){e(n,4,0,n.component.getTinOre())})}function FC(e){return so(0,[(e()(),zr(0,0,null,null,4,"span",[],null,null,null,null,null)),(e()(),io(-1,null,[" \xa0\xa0\xa0 "])),(e()(),zr(2,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(3,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),io(4,null,[": "," "]))],function(e,n){e(n,3,0,"iron_ore","resources","iron deposit")},function(e,n){e(n,4,0,n.component.getIronOre())})}function UC(e){return so(0,[(e()(),zr(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,1,"app-building",[],null,null,null,kO,mO)),ki(2,114688,null,0,vO,[Ig,Sg,xg,gO,sS,Tg],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],building:[3,"building"],parentRegion:[4,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,2,0,t.demolishMode,t.combineMode,t.splitMode,n.context.$implicit,t.mountainsService)},null)}function HC(e){return so(0,[(e()(),zr(0,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,UC)),ki(2,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,2,0,n.component.getBuildings())},null)}function GC(e){return so(0,[(e()(),zr(0,0,null,null,11,"div",[["cdkDropList",""],["class","buildingDropWrapper cdk-drop-list"]],[[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],[[null,"cdkDropListDropped"]],function(e,n,t){var l=!0;return"cdkDropListDropped"===n&&(l=!1!==e.component.drop()&&l),l},null,null)),ki(1,1196032,[[2,4]],1,Yv,[Pn,Lv,Rl,[2,vm],[3,jv],[2,Zs],Uv],{enterPredicate:[0,"enterPredicate"]},{dropped:"cdkDropListDropped"}),Qi(603979776,4,{_draggables:1}),xi(256,[[1,4]],jv,void 0,[]),xi(2048,null,Hv,null,[Yv]),(e()(),zr(5,16777216,null,null,6,"app-building",[["cdkDrag",""],["class","cdk-drag"]],[[2,"cdk-drag-disabled",null],[2,"cdk-drag-dragging",null]],null,null,kO,mO)),xi(6144,null,Gv,null,[Vv]),ki(7,4866048,[[4,4]],3,Vv,[Pn,[3,Hv],Zs,Zt,bl,gv,Lv,Bv,[2,vm],Uv,Rl],null,null),Qi(603979776,5,{_handles:1}),Qi(335544320,6,{_previewTemplate:0}),Qi(335544320,7,{_placeholderTemplate:0}),ki(11,114688,null,0,vO,[Ig,Sg,xg,gO,sS,Tg],{demolishMode:[0,"demolishMode"],building:[1,"building"],parentRegion:[2,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,1,0,t.enter),e(n,11,0,t.demolishMode,n.context.$implicit,t.mountainsService)},function(e,n){e(n,0,0,Ei(n,1).id,Ei(n,1).disabled,Ei(n,1)._dropListRef.isDragging(),Ei(n,1)._dropListRef.isReceiving()),e(n,5,0,Ei(n,7).disabled,Ei(n,7)._dragRef.isDragging())})}function BC(e){return so(0,[(e()(),zr(0,0,null,null,8,"div",[["cdkDropListGroup",""],["class","buildings"]],null,null,null,null,null)),ki(1,147456,[[1,4]],0,jv,[],null,null),(e()(),zr(2,0,[["placeholder",1]],null,4,"div",[["cdkDropList",""],["class","cdk-drop-list"],["id","placeholder"]],[[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],[[null,"cdkDropListDropped"]],function(e,n,t){var l=!0;return"cdkDropListDropped"===n&&(l=!1!==e.component.drop()&&l),l},null,null)),xi(6144,null,Hv,null,[Yv]),ki(4,1196032,[[2,4]],1,Yv,[Pn,Lv,Rl,[2,vm],[3,jv],[2,Zs],Uv],{id:[0,"id"],enterPredicate:[1,"enterPredicate"]},{dropped:"cdkDropListDropped"}),Qi(603979776,3,{_draggables:1}),xi(256,[[1,4]],jv,void 0,[]),(e()(),jr(16777216,null,null,1,null,GC)),ki(8,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,4,0,"placeholder",t.enter),e(n,8,0,t.getBuildings())},function(e,n){e(n,2,0,Ei(n,4).id,Ei(n,4).disabled,Ei(n,4)._dropListRef.isDragging(),Ei(n,4)._dropListRef.isReceiving())})}function VC(e){return so(0,[Qi(671088640,1,{listGroup:0}),Qi(671088640,2,{placeholder:0}),(e()(),zr(2,0,null,null,73,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),zr(3,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),zr(4,0,null,null,1,"app-top-menu",[],null,null,null,BO,xO)),ki(5,114688,null,0,MO,[wg],null,null),(e()(),zr(6,0,null,null,69,"div",[["id","content"]],null,null,null,null,null)),(e()(),zr(7,0,null,null,33,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),zr(8,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.openBuildModal()&&l),l},null,null)),(e()(),io(-1,null,["Build"])),(e()(),jr(16777216,null,null,1,null,RC)),ki(11,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,CC)),ki(13,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,_C)),ki(15,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,TC)),ki(17,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,IC)),ki(19,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,AC)),ki(21,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,wC)),ki(23,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,NC)),ki(25,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),zr(26,0,null,null,14,"div",[["id","side"]],null,null,null,null,null)),(e()(),io(-1,null,[" Filter:"])),(e()(),zr(28,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(29,0,null,null,11,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,r=e.component;return"change"===n&&(l=!1!==Ei(e,30).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==Ei(e,30).onTouched()&&l),"change"===n&&(l=!1!==r.updateFilter(t)&&l),"ngModelChange"===n&&(l=!1!==(r.filterBuilding=t)&&l),l},null,null)),ki(30,16384,null,0,Ff,[Ln,Pn],null,null),xi(1024,null,Of,function(e){return[e]},[Ff]),ki(32,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),xi(2048,null,Nf,null,[pg]),ki(34,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),zr(35,0,null,null,3,"option",[],null,null,null,null,null)),ki(36,147456,null,0,Uf,[Pn,Ln,[2,Ff]],{value:[0,"value"]},null),ki(37,147456,null,0,Bf,[Pn,Ln,[8,null]],{value:[0,"value"]},null),(e()(),io(38,null,["",""])),(e()(),jr(16777216,null,null,1,null,PC)),ki(40,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null),(e()(),zr(41,0,null,null,26,"div",[["class","icon"]],null,null,null,null,null)),(e()(),zr(42,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(43,114688,null,0,cf,[],{name:[0,"name"]},null),(e()(),io(44,null,[" "," \xa0\xa0 "])),(e()(),zr(45,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(46,114688,null,0,cf,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),io(47,null,[" "," \xa0\xa0\xa0 "])),(e()(),zr(48,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(49,114688,null,0,cf,[],{name:[0,"name"]},null),(e()(),io(50,null,[" "," "])),(e()(),jr(16777216,null,null,1,null,DC)),ki(52,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,kC)),ki(54,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,MC)),ki(56,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,xC)),ki(58,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,LC)),ki(60,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,FC)),ki(62,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),zr(63,0,null,null,4,"div",[["id","allControl"]],null,null,null,null,null)),(e()(),zr(64,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.enableAll()&&l),l},null,null)),(e()(),io(-1,null,["all on"])),(e()(),zr(66,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.disableAll()&&l),l},null,null)),(e()(),io(-1,null,["all off"])),(e()(),zr(68,0,null,null,7,"div",[["id","buildingsWrapper"]],null,null,null,null,null)),(e()(),zr(69,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),zr(70,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["Buildings"])),(e()(),jr(16777216,null,null,1,null,HC)),ki(73,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,BC)),ki(75,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,5,0),e(n,11,0,!t.demolishMode),e(n,13,0,t.demolishMode),e(n,15,0,!t.arrangeMode&&t.getBuildings().length>1),e(n,17,0,t.arrangeMode),e(n,19,0,!t.combineMode&&t.isUrbanPlanningEnabled()&&t.hasCombinableBuildings()),e(n,21,0,t.combineMode),e(n,23,0,!t.splitMode&&t.isUrbanPlanningEnabled()&&t.hasSplittableBuildings()),e(n,25,0,t.splitMode),e(n,32,0,t.filterBuilding),e(n,36,0,t.allBuildings),e(n,37,0,t.allBuildings),e(n,40,0,t.getUniqueBuildingsFromCurrentView()),e(n,43,0,"mountains"),e(n,46,0,"hammer","Workers","0 0 0 2px"),e(n,49,0,"land"),e(n,52,0,t.getCoal()>0),e(n,54,0,t.getGoldOre()>0),e(n,56,0,t.getSilverOre()>0),e(n,58,0,t.getCopperOre()>0),e(n,60,0,t.getTinOre()>0),e(n,62,0,t.getIronOre()>0),e(n,73,0,!t.arrangeMode),e(n,75,0,t.arrangeMode)},function(e,n){var t=n.component;e(n,29,0,Ei(n,34).ngClassUntouched,Ei(n,34).ngClassTouched,Ei(n,34).ngClassPristine,Ei(n,34).ngClassDirty,Ei(n,34).ngClassValid,Ei(n,34).ngClassInvalid,Ei(n,34).ngClassPending),e(n,38,0,t.getBuildingName(t.allBuildings)),e(n,44,0,t.getMountains()),e(n,47,0,t.getUnemployed()),e(n,50,0,t.getFreeLand())})}function WC(e){return so(0,[(e()(),zr(0,0,null,null,1,"app-mountains",[],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ei(e,1).onKeydownHandler(t)&&l),l},VC,OC)),ki(1,114688,null,0,bC,[Ig,oS,wg,Ag,EC,Rl],null,null)],function(e,n){e(n,1,0)},null)}var jC=ai("app-mountains",bC,WC,{},{},[]),zC=function(e){function n(n,t,l,r,i){var o=e.call(this,t,n,l,r,Mu.PLATEAU,Nu.PLATEAU)||this;return o.gameService=i,o}return r(n,e),n.prototype.reset=function(n,t){n?e.prototype.reset.call(this,n,t):t?this.buildings=[]:(this.buildings=this.buildings.filter(function(e){return e.isFinished()}),this.buildings.length>0&&this.gameService.enable(Eu.PLATEAU),this.getBuildings().forEach(function(e){return e.verifyWonderEffects()}))},n.ngInjectableDef=ve({factory:function(){return new n(Ye(xg),Ye(lS),Ye(Sg),Ye(oS),Ye(wg))},token:n,providedIn:"root"}),n}(uS),YC=function(e){function n(n,t,l,r,i,o,u){var s=e.call(this,n,t,l,o,r,u,Mu.PLATEAU)||this;return s.techService=i,s.plateauService=o,s}return r(n,e),n.prototype.areWonderBuildingsResearched=function(){return!Gu.production||this.techService.isResearched(Su.WONDER_BUILDINGS)},n}(QO),KC=gr({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:100%;max-height:100%;font-size:1em}#content[_ngcontent-%COMP%]{margin:.5%;display:flex;flex-direction:column;height:94%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#side[_ngcontent-%COMP%]{float:right;font-size:.9em;width:25%;margin:.5%;display:inline-block;vertical-align:bottom}#side[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:.8em;margin:0;padding:0;border:none;outline:0}#buildingsWrapper[_ngcontent-%COMP%]{height:85.5%}.buildings[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;height:100%;border:2px solid #000;overflow-y:auto;align-content:flex-start}.buildings[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}#title[_ngcontent-%COMP%]{text-align:center;border:2px solid #000;border-bottom:none}.off[_ngcontent-%COMP%]{background-color:#555}.buildingRegularWrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:.6%}.buildingDropWrapper[_ngcontent-%COMP%]{display:flex;margin:.6%;cursor:move}.buildingDropWrapper[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]],data:{}});function qC(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.openBuildModal()&&l),l},null,null)),(e()(),io(-1,null,["Build"]))],null,null)}function $C(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleArrangeMode()&&l),l},null,null)),(e()(),io(-1,null,["Arrange"]))],null,null)}function QC(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleArrangeMode()&&l),l},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function ZC(e){return so(0,[(e()(),zr(0,0,null,null,3,"option",[],null,null,null,null,null)),ki(1,147456,null,0,Uf,[Pn,Ln,[2,Ff]],{value:[0,"value"]},null),ki(2,147456,null,0,Bf,[Pn,Ln,[8,null]],{value:[0,"value"]},null),(e()(),io(3,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,3,0,n.component.getBuildingName(n.context.$implicit))})}function XC(e){return so(0,[(e()(),zr(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,1,"app-building",[],null,null,null,kO,mO)),ki(2,114688,null,0,vO,[Ig,Sg,xg,gO,sS,Tg],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],building:[3,"building"],parentRegion:[4,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,2,0,t.demolishMode,t.combineMode,t.splitMode,n.context.$implicit,t.plateauService)},null)}function JC(e){return so(0,[(e()(),zr(0,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,XC)),ki(2,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,2,0,n.component.getBuildings())},null)}function e_(e){return so(0,[(e()(),zr(0,0,null,null,11,"div",[["cdkDropList",""],["class","buildingDropWrapper cdk-drop-list"]],[[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],[[null,"cdkDropListDropped"]],function(e,n,t){var l=!0;return"cdkDropListDropped"===n&&(l=!1!==e.component.drop()&&l),l},null,null)),ki(1,1196032,[[2,4]],1,Yv,[Pn,Lv,Rl,[2,vm],[3,jv],[2,Zs],Uv],{enterPredicate:[0,"enterPredicate"]},{dropped:"cdkDropListDropped"}),Qi(603979776,4,{_draggables:1}),xi(256,[[1,4]],jv,void 0,[]),xi(2048,null,Hv,null,[Yv]),(e()(),zr(5,16777216,null,null,6,"app-building",[["cdkDrag",""],["class","cdk-drag"]],[[2,"cdk-drag-disabled",null],[2,"cdk-drag-dragging",null]],null,null,kO,mO)),xi(6144,null,Gv,null,[Vv]),ki(7,4866048,[[4,4]],3,Vv,[Pn,[3,Hv],Zs,Zt,bl,gv,Lv,Bv,[2,vm],Uv,Rl],null,null),Qi(603979776,5,{_handles:1}),Qi(335544320,6,{_previewTemplate:0}),Qi(335544320,7,{_placeholderTemplate:0}),ki(11,114688,null,0,vO,[Ig,Sg,xg,gO,sS,Tg],{demolishMode:[0,"demolishMode"],building:[1,"building"],parentRegion:[2,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,1,0,t.enter),e(n,11,0,t.demolishMode,n.context.$implicit,t.plateauService)},function(e,n){e(n,0,0,Ei(n,1).id,Ei(n,1).disabled,Ei(n,1)._dropListRef.isDragging(),Ei(n,1)._dropListRef.isReceiving()),e(n,5,0,Ei(n,7).disabled,Ei(n,7)._dragRef.isDragging())})}function n_(e){return so(0,[(e()(),zr(0,0,null,null,8,"div",[["cdkDropListGroup",""],["class","buildings"]],null,null,null,null,null)),ki(1,147456,[[1,4]],0,jv,[],null,null),(e()(),zr(2,0,[["placeholder",1]],null,4,"div",[["cdkDropList",""],["class","cdk-drop-list"],["id","placeholder"]],[[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],[[null,"cdkDropListDropped"]],function(e,n,t){var l=!0;return"cdkDropListDropped"===n&&(l=!1!==e.component.drop()&&l),l},null,null)),xi(6144,null,Hv,null,[Yv]),ki(4,1196032,[[2,4]],1,Yv,[Pn,Lv,Rl,[2,vm],[3,jv],[2,Zs],Uv],{id:[0,"id"],enterPredicate:[1,"enterPredicate"]},{dropped:"cdkDropListDropped"}),Qi(603979776,3,{_draggables:1}),xi(256,[[1,4]],jv,void 0,[]),(e()(),jr(16777216,null,null,1,null,e_)),ki(8,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,4,0,"placeholder",t.enter),e(n,8,0,t.getBuildings())},function(e,n){e(n,2,0,Ei(n,4).id,Ei(n,4).disabled,Ei(n,4)._dropListRef.isDragging(),Ei(n,4)._dropListRef.isReceiving())})}function t_(e){return so(0,[Qi(671088640,1,{listGroup:0}),Qi(671088640,2,{placeholder:0}),(e()(),zr(2,0,null,null,41,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),zr(3,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),zr(4,0,null,null,1,"app-top-menu",[],null,null,null,BO,xO)),ki(5,114688,null,0,MO,[wg],null,null),(e()(),zr(6,0,null,null,37,"div",[["id","content"]],null,null,null,null,null)),(e()(),zr(7,0,null,null,21,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,qC)),ki(9,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,$C)),ki(11,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,QC)),ki(13,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),zr(14,0,null,null,14,"div",[["id","side"]],null,null,null,null,null)),(e()(),io(-1,null,[" Filter:"])),(e()(),zr(16,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(17,0,null,null,11,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,r=e.component;return"change"===n&&(l=!1!==Ei(e,18).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==Ei(e,18).onTouched()&&l),"change"===n&&(l=!1!==r.updateFilter(t)&&l),"ngModelChange"===n&&(l=!1!==(r.filterBuilding=t)&&l),l},null,null)),ki(18,16384,null,0,Ff,[Ln,Pn],null,null),xi(1024,null,Of,function(e){return[e]},[Ff]),ki(20,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),xi(2048,null,Nf,null,[pg]),ki(22,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),zr(23,0,null,null,3,"option",[],null,null,null,null,null)),ki(24,147456,null,0,Uf,[Pn,Ln,[2,Ff]],{value:[0,"value"]},null),ki(25,147456,null,0,Bf,[Pn,Ln,[8,null]],{value:[0,"value"]},null),(e()(),io(26,null,["",""])),(e()(),jr(16777216,null,null,1,null,ZC)),ki(28,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null),(e()(),zr(29,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),zr(30,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(31,114688,null,0,cf,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),io(32,null,[" "," \xa0\xa0\xa0 "])),(e()(),zr(33,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(34,114688,null,0,cf,[],{name:[0,"name"]},null),(e()(),io(35,null,[" "," "])),(e()(),zr(36,0,null,null,7,"div",[["id","buildingsWrapper"]],null,null,null,null,null)),(e()(),zr(37,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),zr(38,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["Buildings"])),(e()(),jr(16777216,null,null,1,null,JC)),ki(41,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,n_)),ki(43,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,5,0),e(n,9,0,t.areWonderBuildingsResearched()),e(n,11,0,!t.arrangeMode&&t.getBuildings().length>1),e(n,13,0,t.arrangeMode),e(n,20,0,t.filterBuilding),e(n,24,0,t.allBuildings),e(n,25,0,t.allBuildings),e(n,28,0,t.getUniqueBuildingsFromCurrentView()),e(n,31,0,"hammer","Workers","0 0 0 2px"),e(n,34,0,"land"),e(n,41,0,!t.arrangeMode),e(n,43,0,t.arrangeMode)},function(e,n){var t=n.component;e(n,17,0,Ei(n,22).ngClassUntouched,Ei(n,22).ngClassTouched,Ei(n,22).ngClassPristine,Ei(n,22).ngClassDirty,Ei(n,22).ngClassValid,Ei(n,22).ngClassInvalid,Ei(n,22).ngClassPending),e(n,26,0,t.getBuildingName(t.allBuildings)),e(n,32,0,t.getUnemployed()),e(n,35,0,t.getFreeLand())})}function l_(e){return so(0,[(e()(),zr(0,0,null,null,1,"app-field",[],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ei(e,1).onKeydownHandler(t)&&l),l},t_,KC)),ki(1,114688,null,0,YC,[Ig,oS,wg,Ag,ES,zC,Rl],null,null)],function(e,n){e(n,1,0)},null)}var r_=ai("app-field",YC,l_,{},{},[]),i_=function(e){function n(n,t,l,r,i){var o=e.call(this,t,n,l,i,Mu.SEA,Nu.SEA)||this;return o.idService=r,o.seaBuildings=[],o}return r(n,e),n.prototype.init=function(){this.seaBuildings.push(new sy(this.servicesService,this.idService.getNextId(),200))},n.prototype.reset=function(n,t){this.seaBuildings=[],e.prototype.reset.call(this,n,t)},n.prototype.tick=function(e){var n=this;this.seaBuildings.filter(function(e){return e.getBuildingType()===bu.SCHOOL_OF_FISH}).map(function(e){return e}).filter(function(e){return e.getFish()>ts.SEA.SCHOOL_OF_FISH.SPLIT_THRESHOLD}).forEach(function(e){if(1===ku.randomBetween(1,ts.SEA.SCHOOL_OF_FISH.SPLIT_CHANCE)){var t=Math.floor(e.getFish()/2);e.reduceFish(t),n.seaBuildings.push(new sy(n.servicesService,n.idService.getNextId(),t))}}),0===this.seaBuildings.filter(function(e){return e.getBuildingType()===bu.SCHOOL_OF_FISH}).length&&1===ku.randomBetween(1,ts.SEA.SCHOOL_OF_FISH.NEW_SCHOOL_CHANCE)&&this.seaBuildings.push(new sy(this.servicesService,this.idService.getNextId(),ts.SEA.SCHOOL_OF_FISH.NEW_SCHOOL_SIZE)),0===this.getSharksAmount()&&this.getFishAmount()>ts.SEA.SHARKS.BREED_THRESHOLD&&this.seaBuildings.push(new ky(this.servicesService,this.idService.getNextId(),1)),this.seaBuildings=this.seaBuildings.filter(function(e){return e.getBuildingType()!==bu.SHARKS||0!==e.getSharks()}),this.buildings.forEach(function(n){return n.tick(e)}),this.seaBuildings.forEach(function(n){return n.tick(e)})},n.prototype.save=function(){return{buildings:this.buildings,seaBuildings:this.seaBuildings}},n.prototype.load=function(e){this.buildings=[],this.seaBuildings=[];for(var n=0,t=e.buildings;n<t.length;n++)this.buildings.push(this.buildingFactoryService.loadBuilding(t[n]));for(var l=0,r=e.seaBuildings;l<r.length;l++)this.seaBuildings.push(this.buildingFactoryService.loadBuilding(r[l]))},n.prototype.addSeaBuilding=function(e){this.seaBuildings.push(e)},n.prototype.getSeaBuildings=function(){return this.seaBuildings},n.prototype.reduceFish=function(e){var n=this.seaBuildings.filter(function(e){return e.getBuildingType()===bu.SCHOOL_OF_FISH});return n.length>0&&!!n[0].reduceFish(e)&&(0===n[0].getFish()&&this.seaBuildings.shift(),!0)},n.prototype.getFishAmount=function(){var e=0;return this.seaBuildings.filter(function(e){return e.getBuildingType()===bu.SCHOOL_OF_FISH}).map(function(e){return e}).forEach(function(n){return e+=n.getFish()}),e},n.prototype.getSharksAmount=function(){var e=0;return this.seaBuildings.filter(function(e){return e.getBuildingType()===bu.SHARKS}).map(function(e){return e}).forEach(function(n){return e+=n.getSharks()}),e},n.ngInjectableDef=ve({factory:function(){return new n(Ye(xg),Ye(lS),Ye(Sg),Ye(nS),Ye(oS))},token:n,providedIn:"root"}),n}(uS),o_=function(e){function n(n,t,l,r,i,o){var u=e.call(this,n,t,l,i,r,o,Mu.SEA)||this;return u.seaService=i,u}return r(n,e),n.prototype.getSeaBuildings=function(){return this.seaService.getSeaBuildings()},n}(QO),u_=gr({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:100%;max-height:100%;font-size:1em}#content[_ngcontent-%COMP%]{margin:.5%;display:flex;flex-direction:column;height:94%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#side[_ngcontent-%COMP%]{float:right;font-size:.9em;width:25%;margin:.5%;display:inline-block;vertical-align:bottom}#side[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:.8em;margin:0;padding:0;border:none;outline:0}#buildingsWrapper[_ngcontent-%COMP%]{height:21.5%;margin-bottom:30px}#seaWrapper[_ngcontent-%COMP%]{height:59%}.buildings[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;height:100%;border:2px solid #000;overflow-y:auto;align-content:flex-start}.buildings[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}.title[_ngcontent-%COMP%]{text-align:center;border:2px solid #000;border-bottom:none}.off[_ngcontent-%COMP%]{background-color:#555}.buildingRegularWrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:.6%}.buildingDropWrapper[_ngcontent-%COMP%]{display:flex;margin:.6%;cursor:move}.buildingDropWrapper[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}#allControl[_ngcontent-%COMP%]{margin-left:auto;width:108px;display:inline-block}#allControl[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:4px}"]],data:{}});function s_(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleDemolishMode()&&l),l},null,null)),(e()(),io(-1,null,["Demolish"]))],null,null)}function a_(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleDemolishMode()&&l),l},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function c_(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleArrangeMode()&&l),l},null,null)),(e()(),io(-1,null,["Arrange"]))],null,null)}function p_(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleArrangeMode()&&l),l},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function h_(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleCombineMode()&&l),l},null,null)),(e()(),io(-1,null,["Combine"]))],null,null)}function d_(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleCombineMode()&&l),l},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function f_(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleSplitMode()&&l),l},null,null)),(e()(),io(-1,null,["Split"]))],null,null)}function g_(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleSplitMode()&&l),l},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function v_(e){return so(0,[(e()(),zr(0,0,null,null,3,"option",[],null,null,null,null,null)),ki(1,147456,null,0,Uf,[Pn,Ln,[2,Ff]],{value:[0,"value"]},null),ki(2,147456,null,0,Bf,[Pn,Ln,[8,null]],{value:[0,"value"]},null),(e()(),io(3,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,3,0,n.component.getBuildingName(n.context.$implicit))})}function m_(e){return so(0,[(e()(),zr(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,1,"app-building",[],null,null,null,kO,mO)),ki(2,114688,null,0,vO,[Ig,Sg,xg,gO,sS,Tg],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],building:[3,"building"],parentRegion:[4,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,2,0,t.demolishMode,t.combineMode,t.splitMode,n.context.$implicit,t.seaService)},null)}function y_(e){return so(0,[(e()(),zr(0,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,m_)),ki(2,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,2,0,n.component.getBuildings())},null)}function S_(e){return so(0,[(e()(),zr(0,0,null,null,11,"div",[["cdkDropList",""],["class","buildingDropWrapper cdk-drop-list"]],[[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],[[null,"cdkDropListDropped"]],function(e,n,t){var l=!0;return"cdkDropListDropped"===n&&(l=!1!==e.component.drop()&&l),l},null,null)),ki(1,1196032,[[2,4]],1,Yv,[Pn,Lv,Rl,[2,vm],[3,jv],[2,Zs],Uv],{enterPredicate:[0,"enterPredicate"]},{dropped:"cdkDropListDropped"}),Qi(603979776,4,{_draggables:1}),xi(256,[[1,4]],jv,void 0,[]),xi(2048,null,Hv,null,[Yv]),(e()(),zr(5,16777216,null,null,6,"app-building",[["cdkDrag",""],["class","cdk-drag"]],[[2,"cdk-drag-disabled",null],[2,"cdk-drag-dragging",null]],null,null,kO,mO)),xi(6144,null,Gv,null,[Vv]),ki(7,4866048,[[4,4]],3,Vv,[Pn,[3,Hv],Zs,Zt,bl,gv,Lv,Bv,[2,vm],Uv,Rl],null,null),Qi(603979776,5,{_handles:1}),Qi(335544320,6,{_previewTemplate:0}),Qi(335544320,7,{_placeholderTemplate:0}),ki(11,114688,null,0,vO,[Ig,Sg,xg,gO,sS,Tg],{demolishMode:[0,"demolishMode"],building:[1,"building"],parentRegion:[2,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,1,0,t.enter),e(n,11,0,t.demolishMode,n.context.$implicit,t.seaService)},function(e,n){e(n,0,0,Ei(n,1).id,Ei(n,1).disabled,Ei(n,1)._dropListRef.isDragging(),Ei(n,1)._dropListRef.isReceiving()),e(n,5,0,Ei(n,7).disabled,Ei(n,7)._dragRef.isDragging())})}function E_(e){return so(0,[(e()(),zr(0,0,null,null,8,"div",[["cdkDropListGroup",""],["class","buildings"]],null,null,null,null,null)),ki(1,147456,[[1,4]],0,jv,[],null,null),(e()(),zr(2,0,[["placeholder",1]],null,4,"div",[["cdkDropList",""],["class","cdk-drop-list"],["id","placeholder"]],[[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],[[null,"cdkDropListDropped"]],function(e,n,t){var l=!0;return"cdkDropListDropped"===n&&(l=!1!==e.component.drop()&&l),l},null,null)),xi(6144,null,Hv,null,[Yv]),ki(4,1196032,[[2,4]],1,Yv,[Pn,Lv,Rl,[2,vm],[3,jv],[2,Zs],Uv],{id:[0,"id"],enterPredicate:[1,"enterPredicate"]},{dropped:"cdkDropListDropped"}),Qi(603979776,3,{_draggables:1}),xi(256,[[1,4]],jv,void 0,[]),(e()(),jr(16777216,null,null,1,null,S_)),ki(8,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,4,0,"placeholder",t.enter),e(n,8,0,t.getBuildings())},function(e,n){e(n,2,0,Ei(n,4).id,Ei(n,4).disabled,Ei(n,4)._dropListRef.isDragging(),Ei(n,4)._dropListRef.isReceiving())})}function b_(e){return so(0,[(e()(),zr(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,1,"app-building",[],null,null,null,kO,mO)),ki(2,114688,null,0,vO,[Ig,Sg,xg,gO,sS,Tg],{building:[0,"building"],parentRegion:[1,"parentRegion"]},null)],function(e,n){e(n,2,0,n.context.$implicit,n.component.seaService)},null)}function O_(e){return so(0,[Qi(671088640,1,{listGroup:0}),Qi(671088640,2,{placeholder:0}),(e()(),zr(2,0,null,null,67,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),zr(3,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),zr(4,0,null,null,1,"app-top-menu",[],null,null,null,BO,xO)),ki(5,114688,null,0,MO,[wg],null,null),(e()(),zr(6,0,null,null,63,"div",[["id","content"]],null,null,null,null,null)),(e()(),zr(7,0,null,null,33,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),zr(8,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.openBuildModal()&&l),l},null,null)),(e()(),io(-1,null,["Build"])),(e()(),jr(16777216,null,null,1,null,s_)),ki(11,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,a_)),ki(13,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,c_)),ki(15,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,p_)),ki(17,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,h_)),ki(19,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,d_)),ki(21,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,f_)),ki(23,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,g_)),ki(25,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),zr(26,0,null,null,14,"div",[["id","side"]],null,null,null,null,null)),(e()(),io(-1,null,[" Filter:"])),(e()(),zr(28,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(29,0,null,null,11,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,r=e.component;return"change"===n&&(l=!1!==Ei(e,30).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==Ei(e,30).onTouched()&&l),"change"===n&&(l=!1!==r.updateFilter(t)&&l),"ngModelChange"===n&&(l=!1!==(r.filterBuilding=t)&&l),l},null,null)),ki(30,16384,null,0,Ff,[Ln,Pn],null,null),xi(1024,null,Of,function(e){return[e]},[Ff]),ki(32,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),xi(2048,null,Nf,null,[pg]),ki(34,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),zr(35,0,null,null,3,"option",[],null,null,null,null,null)),ki(36,147456,null,0,Uf,[Pn,Ln,[2,Ff]],{value:[0,"value"]},null),ki(37,147456,null,0,Bf,[Pn,Ln,[8,null]],{value:[0,"value"]},null),(e()(),io(38,null,["",""])),(e()(),jr(16777216,null,null,1,null,v_)),ki(40,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null),(e()(),zr(41,0,null,null,11,"div",[["class","icon"]],null,null,null,null,null)),(e()(),zr(42,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(43,114688,null,0,cf,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),io(44,null,[" "," \xa0\xa0\xa0 "])),(e()(),zr(45,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(46,114688,null,0,cf,[],{name:[0,"name"]},null),(e()(),io(47,null,[" "," "])),(e()(),zr(48,0,null,null,4,"div",[["id","allControl"]],null,null,null,null,null)),(e()(),zr(49,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.enableAll()&&l),l},null,null)),(e()(),io(-1,null,["all on"])),(e()(),zr(51,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.disableAll()&&l),l},null,null)),(e()(),io(-1,null,["all off"])),(e()(),zr(53,0,null,null,7,"div",[["id","buildingsWrapper"]],null,null,null,null,null)),(e()(),zr(54,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),zr(55,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["Buildings"])),(e()(),jr(16777216,null,null,1,null,y_)),ki(58,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,E_)),ki(60,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),zr(61,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(62,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(63,0,null,null,6,"div",[["id","seaWrapper"]],null,null,null,null,null)),(e()(),zr(64,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),zr(65,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["Sea"])),(e()(),zr(67,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,b_)),ki(69,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,5,0),e(n,11,0,!t.demolishMode),e(n,13,0,t.demolishMode),e(n,15,0,!t.arrangeMode&&t.getBuildings().length>1),e(n,17,0,t.arrangeMode),e(n,19,0,!t.combineMode&&t.isUrbanPlanningEnabled()&&t.hasCombinableBuildings()),e(n,21,0,t.combineMode),e(n,23,0,!t.splitMode&&t.isUrbanPlanningEnabled()&&t.hasSplittableBuildings()),e(n,25,0,t.splitMode),e(n,32,0,t.filterBuilding),e(n,36,0,t.allBuildings),e(n,37,0,t.allBuildings),e(n,40,0,t.getUniqueBuildingsFromCurrentView()),e(n,43,0,"hammer","Workers","0 0 0 2px"),e(n,46,0,"land"),e(n,58,0,!t.arrangeMode),e(n,60,0,t.arrangeMode),e(n,69,0,t.getSeaBuildings())},function(e,n){var t=n.component;e(n,29,0,Ei(n,34).ngClassUntouched,Ei(n,34).ngClassTouched,Ei(n,34).ngClassPristine,Ei(n,34).ngClassDirty,Ei(n,34).ngClassValid,Ei(n,34).ngClassInvalid,Ei(n,34).ngClassPending),e(n,38,0,t.getBuildingName(t.allBuildings)),e(n,44,0,t.getUnemployed()),e(n,47,0,t.getFreeLand())})}function R_(e){return so(0,[(e()(),zr(0,0,null,null,1,"app-sea",[],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ei(e,1).onKeydownHandler(t)&&l),l},O_,u_)),ki(1,114688,null,0,o_,[Ig,oS,wg,Ag,i_,Rl],null,null)],function(e,n){e(n,1,0)},null)}var C_=ai("app-sea",o_,R_,{},{},[]),__=function(){function e(e){this.gameService=e}return e.prototype.ngOnInit=function(){},e.prototype.isForestManagementEnabled=function(){return this.gameService.isEnabled(Eu.FORESTER)},e}(),T_=gr({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{display:flex;height:100%;flex-direction:row}.entry[_ngcontent-%COMP%]{flex:auto;display:flex;justify-content:center;flex-direction:column;height:100%;text-align:center;border-right:2px solid #000;cursor:pointer;text-decoration:none;color:#000;font-size:1em}.entry[_ngcontent-%COMP%]:last-of-type{border:none}.entry.active[_ngcontent-%COMP%]{background:var(--active-colour)}"]],data:{}});function I_(e){return so(0,[(e()(),zr(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["routerLink","/management/forestM"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==Ei(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),ki(1,671744,[[6,4]],0,Td,[_d,gh,fs],{routerLink:[0,"routerLink"]},null),ki(2,1720320,null,2,Ad,[_d,Pn,Ln,Rl],{routerLinkActive:[0,"routerLinkActive"]},null),Qi(603979776,5,{links:1}),Qi(603979776,6,{linksWithHrefs:1}),(e()(),io(-1,null,["Forest"]))],function(e,n){e(n,1,0,"/management/forestM"),e(n,2,0,"active")},function(e,n){e(n,0,0,Ei(n,1).target,Ei(n,1).href)})}function A_(e){return so(0,[(e()(),zr(0,0,null,null,14,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,5,"a",[["class","entry"],["draggable","false"],["routerLink","/management/general"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==Ei(e,2).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),ki(2,671744,[[2,4]],0,Td,[_d,gh,fs],{routerLink:[0,"routerLink"]},null),ki(3,1720320,null,2,Ad,[_d,Pn,Ln,Rl],{routerLinkActive:[0,"routerLinkActive"]},null),Qi(603979776,1,{links:1}),Qi(603979776,2,{linksWithHrefs:1}),(e()(),io(-1,null,["General"])),(e()(),zr(7,0,null,null,5,"a",[["class","entry"],["draggable","false"],["routerLink","/management/effects"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==Ei(e,8).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),ki(8,671744,[[4,4]],0,Td,[_d,gh,fs],{routerLink:[0,"routerLink"]},null),ki(9,1720320,null,2,Ad,[_d,Pn,Ln,Rl],{routerLinkActive:[0,"routerLinkActive"]},null),Qi(603979776,3,{links:1}),Qi(603979776,4,{linksWithHrefs:1}),(e()(),io(-1,null,["Effects"])),(e()(),jr(16777216,null,null,1,null,I_)),ki(14,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,"/management/general"),e(n,3,0,"active"),e(n,8,0,"/management/effects"),e(n,9,0,"active"),e(n,14,0,t.isForestManagementEnabled())},function(e,n){e(n,1,0,Ei(n,2).target,Ei(n,2).href),e(n,7,0,Ei(n,8).target,Ei(n,8).href)})}var w_=function(){function e(e,n){this.managementService=e,this.gameService=n}return e.prototype.ngOnInit=function(){},e.prototype.getRations=function(){return this.managementService.getRations()},e.prototype.changeFoodValue=function(e){this.managementService.setRations(e.target.value)},e.prototype.changeClothesValue=function(e){this.managementService.setClothesRations(e.target.value)},e.prototype.changeAlcoholValue=function(e){this.managementService.setAlcoholRations(e.target.value)},e.prototype.getClothesRations=function(){return this.managementService.getClothesRations()},e.prototype.getAlcoholRations=function(){return this.managementService.getAlcoholRations()},e.prototype.updateFurClothes=function(){this.managementService.toggleFurClothes()},e.prototype.getFurClothes=function(){return this.managementService.getFurClothes()},e.prototype.updateFoodNutrition=function(){this.managementService.toggleFoodNutrition()},e.prototype.getFoodNutrition=function(){return this.managementService.getFoodNutrition()},e.prototype.updateComplexWorkers=function(){this.managementService.toggleComplexWorkers()},e.prototype.getComplexWorkers=function(){return this.managementService.getComplexWorkers()},e.prototype.isHREnabled=function(){return this.gameService.isEnabled(Eu.HUMAN_RESOURCES)},e}(),N_=gr({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:99%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#content[_ngcontent-%COMP%]{margin:.5%;height:94%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}.label[_ngcontent-%COMP%]{display:inline-block;width:80px}.slidecontainer[_ngcontent-%COMP%]{display:inline-block;width:150px}.slider[_ngcontent-%COMP%]{-webkit-appearance:none;width:100%;height:10px;border-radius:5px;background:var(--passive-colour);outline:0;opacity:.7;transition:opacity .2s}.slider[_ngcontent-%COMP%]:hover{opacity:1}.slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:15px;height:15px;border-radius:50%;background:var(--active-colour);cursor:pointer}.slider[_ngcontent-%COMP%]::-moz-range-thumb{width:15px;height:15px;border-radius:50%;background:var(--active-colour);cursor:pointer}"]],data:{}});function P_(e){return so(0,[(e()(),zr(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),zr(1,0,null,null,0,"input",[["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.updateComplexWorkers()&&l),l},null,null)),(e()(),io(-1,null,[" enable automated work management for some buildings "]))],null,function(e,n){e(n,1,0,n.component.getComplexWorkers())})}function D_(e){return so(0,[(e()(),zr(0,0,null,null,31,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),zr(2,0,null,null,1,"app-management-top-menu",[],null,null,null,A_,T_)),ki(3,114688,null,0,__,[wg],null,null),(e()(),zr(4,0,null,null,27,"div",[["id","content"]],null,null,null,null,null)),(e()(),zr(5,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),zr(6,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["General Management"])),(e()(),zr(8,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["Rations"])),(e()(),zr(10,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(11,0,null,null,6,"div",[],null,null,null,null,null)),(e()(),zr(12,0,null,null,1,"span",[["class","label"]],null,null,null,null,null)),(e()(),io(13,null,["food: ",""])),(e()(),zr(14,0,null,null,1,"div",[["class","slidecontainer"]],null,null,null,null,null)),(e()(),zr(15,0,null,null,0,"input",[["class","slider"],["max","4"],["min","1"],["type","range"],["value","2"]],[[8,"value",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.changeFoodValue(t)&&l),l},null,null)),(e()(),zr(16,0,null,null,0,"input",[["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.updateFoodNutrition()&&l),l},null,null)),(e()(),io(-1,null,[" show total food nutrition in village tab "])),(e()(),zr(18,0,null,null,6,"div",[],null,null,null,null,null)),(e()(),zr(19,0,null,null,1,"span",[["class","label"]],null,null,null,null,null)),(e()(),io(20,null,["clothes: ",""])),(e()(),zr(21,0,null,null,1,"div",[["class","slidecontainer"]],null,null,null,null,null)),(e()(),zr(22,0,null,null,0,"input",[["class","slider"],["max","4"],["min","1"],["type","range"],["value","2"]],[[8,"value",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.changeClothesValue(t)&&l),l},null,null)),(e()(),zr(23,0,null,null,0,"input",[["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.updateFurClothes()&&l),l},null,null)),(e()(),io(-1,null,[" allow fur when no clothes available "])),(e()(),zr(25,0,null,null,1,"span",[["class","label"]],null,null,null,null,null)),(e()(),io(26,null,["alcohol: ",""])),(e()(),zr(27,0,null,null,1,"div",[["class","slidecontainer"]],null,null,null,null,null)),(e()(),zr(28,0,null,null,0,"input",[["class","slider"],["max","4"],["min","1"],["type","range"],["value","1"]],[[8,"value",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.changeAlcoholValue(t)&&l),l},null,null)),(e()(),zr(29,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,P_)),ki(31,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,3,0),e(n,31,0,t.isHREnabled())},function(e,n){var t=n.component;e(n,13,0,.5*t.getRations()),e(n,15,0,t.getRations()),e(n,16,0,t.getFoodNutrition()),e(n,20,0,t.getClothesRations()),e(n,22,0,t.getClothesRations()),e(n,23,0,t.getFurClothes()),e(n,26,0,t.getAlcoholRations()),e(n,28,0,t.getAlcoholRations())})}function k_(e){return so(0,[(e()(),zr(0,0,null,null,1,"app-management",[],null,null,null,D_,N_)),ki(1,114688,null,0,w_,[gO,wg],null,null)],function(e,n){e(n,1,0)},null)}var M_=ai("app-management",w_,k_,{},{},[]),x_=function(){function e(e){this.effectsService=e}return e.prototype.ngOnInit=function(){},e.prototype.getBuildingsEffects=function(){return this.effectsService.getBuildingEffects().filter(function(e){return!e.isBuff()}).sort(function(e,n){return e.isPermanent()&&!n.isPermanent()?-1:e.isPermanent()&&n.isPermanent()?0:!e.isPermanent()&&n.isPermanent()?1:void 0})},e.prototype.getArmyEffects=function(){return this.effectsService.getArmyEffects()},e.prototype.getBuildingName=function(e){return Au.prepareBuildingName(e)},e.prototype.getTroopName=function(e){return Au.prepareTroopName(e)},e}(),L_=gr({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:99%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#content[_ngcontent-%COMP%]{margin:.5%;height:94%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#armyEffects[_ngcontent-%COMP%], #buildingEffects[_ngcontent-%COMP%]{height:45%;border:1px solid #000}.rows[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:center;height:90.5%;overflow-y:auto}.row[_ngcontent-%COMP%]{display:flex;border:1px solid #000;margin:3px}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{border-right:none}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){flex:0 0 7%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){flex:0 0 35%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){flex:0 0 30%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(4){flex:0 0 13%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(5){flex:0 0 15%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:auto;border-right:1px solid #000}.headers[_ngcontent-%COMP%]{margin:3px 3px 0;display:flex;width:98.3%;flex-direction:row;text-align:center;font-size:.9em}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border:1px solid #000;border-left:none}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-of-type{border-left:1px solid #000}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){flex:0 0 7%}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){flex:0 0 35%}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){flex:0 0 30%}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(4){flex:0 0 13%}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(5){flex:0 0 15%}.positive[_ngcontent-%COMP%]{color:#006400}.negative[_ngcontent-%COMP%]{color:#8b0000}"]],data:{}});function F_(e){return so(0,[(e()(),zr(0,0,null,null,1,"span",[["class","positive"]],null,null,null,null,null)),(e()(),io(1,null,["+","% "]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.effect)})}function U_(e){return so(0,[(e()(),zr(0,0,null,null,1,"span",[["class","negative"]],null,null,null,null,null)),(e()(),io(1,null,["","% "]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.effect)})}function H_(e){return so(0,[(e()(),zr(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(1,null,[""," "]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.duration)})}function G_(e){return so(0,[(e()(),zr(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["permanent"]))],null,null)}function B_(e){return so(0,[(e()(),zr(0,0,null,null,14,"div",[["class","row"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(2,null,["","."])),(e()(),zr(3,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(4,null,["",""])),(e()(),zr(5,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(6,null,["",""])),(e()(),jr(16777216,null,null,1,null,F_)),ki(8,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,U_)),ki(10,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,H_)),ki(12,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,G_)),ki(14,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,8,0,n.context.$implicit.effect>=0),e(n,10,0,n.context.$implicit.effect<0),e(n,12,0,n.context.$implicit.duration>0),e(n,14,0,n.context.$implicit.duration<0)},function(e,n){var t=n.component;e(n,2,0,n.context.index+1),e(n,4,0,n.context.$implicit.name),e(n,6,0,t.getBuildingName(n.context.$implicit.building))})}function V_(e){return so(0,[(e()(),zr(0,0,null,null,1,"span",[["class","positive"]],null,null,null,null,null)),(e()(),io(1,null,["+","% "]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.effect)})}function W_(e){return so(0,[(e()(),zr(0,0,null,null,1,"span",[["class","negative"]],null,null,null,null,null)),(e()(),io(1,null,["","% "]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.effect)})}function j_(e){return so(0,[(e()(),zr(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(1,null,[""," "]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.duration)})}function z_(e){return so(0,[(e()(),zr(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["permanent"]))],null,null)}function Y_(e){return so(0,[(e()(),zr(0,0,null,null,14,"div",[["class","row"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(2,null,["","."])),(e()(),zr(3,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(4,null,["",""])),(e()(),zr(5,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(6,null,["",""])),(e()(),jr(16777216,null,null,1,null,V_)),ki(8,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,W_)),ki(10,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,j_)),ki(12,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,z_)),ki(14,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,8,0,n.context.$implicit.effect>=0),e(n,10,0,n.context.$implicit.effect<0),e(n,12,0,n.context.$implicit.duration>0),e(n,14,0,n.context.$implicit.duration<0)},function(e,n){var t=n.component;e(n,2,0,n.context.index+1),e(n,4,0,n.context.$implicit.name),e(n,6,0,t.getTroopName(n.context.$implicit.troop))})}function K_(e){return so(0,[(e()(),zr(0,0,null,null,41,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),zr(2,0,null,null,1,"app-management-top-menu",[],null,null,null,A_,T_)),ki(3,114688,null,0,__,[wg],null,null),(e()(),zr(4,0,null,null,37,"div",[["id","content"]],null,null,null,null,null)),(e()(),zr(5,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),zr(6,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["Effects Management"])),(e()(),zr(8,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["Buildings effects"])),(e()(),zr(10,0,null,null,14,"div",[["id","buildingEffects"]],null,null,null,null,null)),(e()(),zr(11,0,null,null,10,"div",[["class","headers"]],null,null,null,null,null)),(e()(),zr(12,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["#"])),(e()(),zr(14,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["name"])),(e()(),zr(16,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["building"])),(e()(),zr(18,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["effect"])),(e()(),zr(20,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["duration"])),(e()(),zr(22,0,null,null,2,"div",[["class","rows"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,B_)),ki(24,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null),(e()(),zr(25,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["Army effects"])),(e()(),zr(27,0,null,null,14,"div",[["id","armyEffects"]],null,null,null,null,null)),(e()(),zr(28,0,null,null,10,"div",[["class","headers"]],null,null,null,null,null)),(e()(),zr(29,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["#"])),(e()(),zr(31,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["name"])),(e()(),zr(33,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["building"])),(e()(),zr(35,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["effect"])),(e()(),zr(37,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["duration"])),(e()(),zr(39,0,null,null,2,"div",[["class","rows"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,Y_)),ki(41,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,3,0),e(n,24,0,t.getBuildingsEffects()),e(n,41,0,t.getArmyEffects())},null)}function q_(e){return so(0,[(e()(),zr(0,0,null,null,1,"app-effects-management",[],null,null,null,K_,L_)),ki(1,114688,null,0,x_,[rS],null,null)],function(e,n){e(n,1,0)},null)}var $_=ai("app-effects-management",x_,q_,{},{},[]),Q_=function(){function e(e){this.landService=e}return e.prototype.ngOnInit=function(){},e.prototype.getForestSize=function(){return this.landService.getForest()},e.prototype.getLandSize=function(){return this.landService.getLand()},e.prototype.getForestOptions=function(){return this.landService.getForestOptions()},e}(),Z_=gr({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:99%}#content[_ngcontent-%COMP%]{margin:.5%;height:94%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}.foresterLabel[_ngcontent-%COMP%]{display:inline-block;width:160px}input[type=number][_ngcontent-%COMP%]{width:6ch}"]],data:{}});function X_(e){return so(0,[(e()(),zr(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.getForestSize())})}function J_(e){return so(0,[(e()(),zr(0,0,null,null,1,"span",[["class","critical"]],null,null,null,null,null)),(e()(),io(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.getForestSize())})}function eT(e){return so(0,[(e()(),zr(0,0,null,null,65,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),zr(2,0,null,null,1,"app-management-top-menu",[],null,null,null,A_,T_)),ki(3,114688,null,0,__,[wg],null,null),(e()(),zr(4,0,null,null,61,"div",[["id","content"]],null,null,null,null,null)),(e()(),zr(5,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),zr(6,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["Forest Management"])),(e()(),zr(8,0,null,null,10,"div",[["class","icon"]],null,null,null,null,null)),(e()(),zr(9,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(10,114688,null,0,cf,[],{name:[0,"name"]},null),(e()(),jr(16777216,null,null,1,null,X_)),ki(12,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,J_)),ki(14,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),io(-1,null,[" \xa0\xa0 "])),(e()(),zr(16,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(17,114688,null,0,cf,[],{name:[0,"name"]},null),(e()(),io(18,null,[" "," "])),(e()(),zr(19,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),io(-1,null,[" Plant trees if:"])),(e()(),zr(21,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(22,0,null,null,5,"input",[["id","forest"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var l=!0,r=e.component;return"change"===n&&(l=!1!==Ei(e,23).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==Ei(e,23).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(r.getForestOptions().forestSizeRuleEnabled=t)&&l),l},null,null)),ki(23,16384,null,0,Rf,[Ln,Pn],null,null),xi(1024,null,Of,function(e){return[e]},[Rf]),ki(25,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),xi(2048,null,Nf,null,[pg]),ki(27,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),zr(28,0,null,null,1,"label",[["class","foresterLabel"],["for","forest"]],null,null,null,null,null)),(e()(),io(-1,null,["forest smaller than"])),(e()(),zr(30,0,null,null,6,"input",[["id","forestSize"],["min","0"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,r=e.component;return"input"===n&&(l=!1!==Ei(e,31)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ei(e,31).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ei(e,31)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ei(e,31)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==Ei(e,32).onChange(t.target.value)&&l),"input"===n&&(l=!1!==Ei(e,32).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==Ei(e,32).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(r.getForestOptions().forestSizeRule=t)&&l),l},null,null)),ki(31,16384,null,0,_f,[Ln,Pn,[2,Cf]],null,null),ki(32,16384,null,0,Af,[Ln,Pn],null,null),xi(1024,null,Of,function(e,n){return[e,n]},[_f,Af]),ki(34,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),xi(2048,null,Nf,null,[pg]),ki(36,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),zr(37,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(38,0,null,null,5,"input",[["id","land"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var l=!0,r=e.component;return"change"===n&&(l=!1!==Ei(e,39).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==Ei(e,39).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(r.getForestOptions().landSizeRuleEnabled=t)&&l),l},null,null)),ki(39,16384,null,0,Rf,[Ln,Pn],null,null),xi(1024,null,Of,function(e){return[e]},[Rf]),ki(41,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),xi(2048,null,Nf,null,[pg]),ki(43,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),zr(44,0,null,null,1,"label",[["class","foresterLabel"],["for","land"]],null,null,null,null,null)),(e()(),io(-1,null,["free land bigger than"])),(e()(),zr(46,0,null,null,6,"input",[["id","landSize"],["min","0"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,r=e.component;return"input"===n&&(l=!1!==Ei(e,47)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ei(e,47).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ei(e,47)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ei(e,47)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==Ei(e,48).onChange(t.target.value)&&l),"input"===n&&(l=!1!==Ei(e,48).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==Ei(e,48).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(r.getForestOptions().landSizeRule=t)&&l),l},null,null)),ki(47,16384,null,0,_f,[Ln,Pn,[2,Cf]],null,null),ki(48,16384,null,0,Af,[Ln,Pn],null,null),xi(1024,null,Of,function(e,n){return[e,n]},[_f,Af]),ki(50,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),xi(2048,null,Nf,null,[pg]),ki(52,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),zr(53,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(54,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),io(-1,null,[" Cut trees if:"])),(e()(),zr(56,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(57,0,null,null,1,"label",[["for","forestSize2"]],null,null,null,null,null)),(e()(),io(-1,null,["Forest bigger than "])),(e()(),zr(59,0,null,null,6,"input",[["id","forestSize2"],["min","0"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,r=e.component;return"input"===n&&(l=!1!==Ei(e,60)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ei(e,60).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ei(e,60)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ei(e,60)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==Ei(e,61).onChange(t.target.value)&&l),"input"===n&&(l=!1!==Ei(e,61).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==Ei(e,61).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(r.getForestOptions().forestSizeReserved=t)&&l),l},null,null)),ki(60,16384,null,0,_f,[Ln,Pn,[2,Cf]],null,null),ki(61,16384,null,0,Af,[Ln,Pn],null,null),xi(1024,null,Of,function(e,n){return[e,n]},[_f,Af]),ki(63,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),xi(2048,null,Nf,null,[pg]),ki(65,16384,null,0,Qf,[[4,Nf]],null,null)],function(e,n){var t=n.component;e(n,3,0),e(n,10,0,"forest"),e(n,12,0,t.getForestSize()>=500),e(n,14,0,t.getForestSize()<500),e(n,17,0,"land"),e(n,25,0,t.getForestOptions().forestSizeRuleEnabled),e(n,34,0,t.getForestOptions().forestSizeRule),e(n,41,0,t.getForestOptions().landSizeRuleEnabled),e(n,50,0,t.getForestOptions().landSizeRule),e(n,63,0,t.getForestOptions().forestSizeReserved)},function(e,n){e(n,18,0,n.component.getLandSize()),e(n,22,0,Ei(n,27).ngClassUntouched,Ei(n,27).ngClassTouched,Ei(n,27).ngClassPristine,Ei(n,27).ngClassDirty,Ei(n,27).ngClassValid,Ei(n,27).ngClassInvalid,Ei(n,27).ngClassPending),e(n,30,0,Ei(n,36).ngClassUntouched,Ei(n,36).ngClassTouched,Ei(n,36).ngClassPristine,Ei(n,36).ngClassDirty,Ei(n,36).ngClassValid,Ei(n,36).ngClassInvalid,Ei(n,36).ngClassPending),e(n,38,0,Ei(n,43).ngClassUntouched,Ei(n,43).ngClassTouched,Ei(n,43).ngClassPristine,Ei(n,43).ngClassDirty,Ei(n,43).ngClassValid,Ei(n,43).ngClassInvalid,Ei(n,43).ngClassPending),e(n,46,0,Ei(n,52).ngClassUntouched,Ei(n,52).ngClassTouched,Ei(n,52).ngClassPristine,Ei(n,52).ngClassDirty,Ei(n,52).ngClassValid,Ei(n,52).ngClassInvalid,Ei(n,52).ngClassPending),e(n,59,0,Ei(n,65).ngClassUntouched,Ei(n,65).ngClassTouched,Ei(n,65).ngClassPristine,Ei(n,65).ngClassDirty,Ei(n,65).ngClassValid,Ei(n,65).ngClassInvalid,Ei(n,65).ngClassPending)})}function nT(e){return so(0,[(e()(),zr(0,0,null,null,1,"app-forest-management",[],null,null,null,eT,Z_)),ki(1,114688,null,0,Q_,[oS],null,null)],function(e,n){e(n,1,0)},null)}var tT=ai("app-forest-management",Q_,nT,{},{},[]),lT=function(){function e(e,n,t){this.rd=e,this.el=n,this.modalService=t,this.param="",this.element=n.nativeElement}return e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){var e=this,n=this;this.id&&(document.body.appendChild(this.element),this.rd.listen(this.element,"click",function(t){var l=t.target;null===l.closest(".modal-body")&&"BUTTON"!==l.tagName&&"tutorial-modal"!==n.id&&(e.modalService.sendConfirmationResult(!1),e.modalService.sendCloseSignal(mu.ALL),n.close())}),this.modalService.add(this))},e.prototype.ngOnDestroy=function(){this.modalService.remove(this.id),this.element.remove()},e.prototype.open=function(){this.element.style.display="block",document.body.classList.add("modal-open")},e.prototype.openTutorialWindow=function(e){var n=this.element.querySelector(".modal-body");n.style.position="absolute",n.style.margin="0",n.style.width=e.width,n.style.top=e.top,n.style.left=e.left,this.element.style.display="block",document.body.classList.add("modal-open")},e.prototype.close=function(){this.element.style.display="none",document.body.classList.remove("modal-open")},e.prototype.onKeydownHandler=function(e){"tutorial-modal"!==this.id&&(this.modalService.sendConfirmationResult(!1),this.modalService.sendCloseSignal(mu.ALL),this.close())},e}(),rT=gr({encapsulation:2,styles:[],data:{}});function iT(e){return so(0,[Qi(671088640,1,{body:1}),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:8,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:null,childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:null,ngContent:{index:0}}],null,null)}var oT=function(){function e(e,n,t,l,r,i,o,u,s,a,c,p,h,d){this.buildingFactoryService=e,this.servicesService=n,this.modalService=t,this.logService=l,this.resourcesService=r,this.landService=i,this.villageService=o,this.fortService=u,this.fieldService=s,this.forestService=a,this.mountainsService=c,this.seaService=p,this.plateauService=h,this.gameService=d,this.filterText="",this.buildings=new Map,this.buildings.set(Mu.VILLAGE,[[new Fm,[],0],[new Um,[Eu.HOUSE],0],[new vy,[Eu.BAKERY],0],[new _y,[Eu.TAILOR],0],[new ty,[],0],[new tS,[Eu.SPECIALISED_PRODUCTION],0],[new ly,[],0],[new jy,[Eu.MARKETPLACE],0],[new Ny,[Eu.TAVERN],0],[new uy,[Eu.SHRINE],1],[new Yy,[Eu.CHURCH],1]]),this.buildings.set(Mu.FOREST,[[new Gm,[],0],[new Zm,[],0],[new oy,[Eu.HUNTER],0],[new Oy,[Eu.TANNERY],0],[new Wm,[Eu.FORESTER],0],[new Km,[Eu.SAWMILL],0]]),this.buildings.set(Mu.FORT,[[new Sy,[Eu.BARRACKS],0],[new by,[Eu.BARRACKS],0],[new Ry,[Eu.STOCKADE],1],[new Iy,[Eu.WOODEN_TOWER],0],[new Ay,[Eu.STONE_TOWER],0],[new eS,[Eu.STASH],3]]),this.buildings.set(Mu.FIELD,[[new cy,[Eu.FARM],0],[new gy,[Eu.WINDMILL],0],[new hy,[],0],[new fy,[],0],[new Fy,[Eu.PASTURE],0],[new Hy,[Eu.BUTCHER],0],[new Cy,[Eu.COTTON_MILL],0],[new Ty,[Eu.BREWERY],0],[new wy,[Eu.WINERY],0]]),this.buildings.set(Mu.MOUNTAINS,[[new Jm,[],0],[new Py,[Eu.GEOLOGIST],0],[new Dy,[],0],[new xy,[Eu.PIT_MINE],0],[new zy,[Eu.SMITHY],1],[new Gy,[Eu.MINT],0]]),this.buildings.set(Mu.PLATEAU,[[new Wy,[],1],[new Ky,[],1],[new qy,[],1],[new $y,[],1],[new Zy,[],1],[new Xy,[],1],[new Jy,[],1],[new Qy,[],1]]),this.buildings.set(Mu.SEA,[[new yy,[Eu.FISHERS_HUT],0]])}return e.prototype.ngOnInit=function(){var e=this;this.clearFilterObservable.subscribe(function(n){return e.filterText=""})},e.prototype.build=function(e){if(e.buildOnMountain()){if(!this.landService.hasMountains(e.getSize()))return this.modalService.info("Not enough mountains to build "+e.getName()+"!<br>"+e.getSize()+" mountains required but "+this.landService.getMountains()+" available"),void this.modalService.close(mu.BUILD)}else if(!this.landService.hasLand(e.getSize()))return this.modalService.info("Not enough empty land to build "+e.getName()+"!<br>"+e.getSize()+" empty land required but "+this.landService.getLand()+" available"),void this.modalService.close(mu.BUILD);if(this.resourcesService.decreaseResources(e.getCost(),"Construction",!0)){switch(e.buildOnMountain()?this.landService.decreaseMountains(e.getSize()):this.landService.decreaseLand(e.getSize()),this.region){case Mu.VILLAGE:this.villageService.createConstruction(new Bm(this.servicesService,this.servicesService.getService(Nu.ID).getNextId(),Mu.VILLAGE,e.getBuildingType(),e.getComplexity(),e.getSize()).build());break;case Mu.FORT:this.fortService.createConstruction(new Bm(this.servicesService,this.servicesService.getService(Nu.ID).getNextId(),Mu.FORT,e.getBuildingType(),e.getComplexity(),e.getSize()).build());break;case Mu.FOREST:this.forestService.createConstruction(new Bm(this.servicesService,this.servicesService.getService(Nu.ID).getNextId(),Mu.FOREST,e.getBuildingType(),e.getComplexity(),e.getSize()).build());break;case Mu.FIELD:this.fieldService.createConstruction(new Bm(this.servicesService,this.servicesService.getService(Nu.ID).getNextId(),Mu.FIELD,e.getBuildingType(),e.getComplexity(),e.getSize()).build());break;case Mu.MOUNTAINS:this.mountainsService.createConstruction(new Bm(this.servicesService,this.servicesService.getService(Nu.ID).getNextId(),Mu.MOUNTAINS,e.getBuildingType(),e.getComplexity(),e.getSize()).build());break;case Mu.SEA:this.seaService.createConstruction(new Bm(this.servicesService,this.servicesService.getService(Nu.ID).getNextId(),Mu.SEA,e.getBuildingType(),e.getComplexity(),e.getSize()).build());break;case Mu.PLATEAU:this.plateauService.createConstruction(new Bm(this.servicesService,this.servicesService.getService(Nu.ID).getNextId(),Mu.PLATEAU,e.getBuildingType(),e.getComplexity(),e.getSize()).build())}this.modalService.close(mu.BUILD)}else this.modalService.close(mu.BUILD)},e.prototype.ngOnChanges=function(e){this.regionString=Mu[this.region]},e.prototype.checkBuilding=function(e,n){var t=this,l=!0;return e[1].forEach(function(e){t.gameService.isEnabled(e)||(l=!1)}),e[2]>0&&e[2]<=this.servicesService.getServiceByRegion(n).getBuildings().filter(function(n){return n.getBuildingType()===e[0].getBuildingType()||n.getBuildingType()===bu.CONSTRUCTION&&n.getConstructing()===e[0].getBuildingType()}).length&&(l=!1),l},e.prototype.hasResource=function(e){return 0===this.resourcesService.hasResource(e.key,e.value,"Construction",!0)},e.prototype.getResourceName=function(e){return Au.prepareResourceName(e)},e.prototype.getBuildingCostEntries=function(e){return e.getCost()},e.prototype.getBuildingForRegion=function(e){var n=this;if(this.buildings&&this.buildings.get(e)){var t=this.buildings.get(e).filter(function(t){return n.checkBuilding(t,e)}).map(function(e){return e[0]});if(e===Mu.PLATEAU){if(this.gameService.getAbdicationLevel()<this.servicesService.getServiceByRegion(e).getBuildings().length)return[];this.gameService.getAbdicationLevel()<7&&(t=t.filter(function(e){return e.getBuildingType()!==bu.ASCENSION_TEMPLE}))}return null!==this.filterText&&this.filterText.length>0?t.filter(function(e){return e.getName().toLowerCase().includes(n.filterText.toLowerCase())}):t}},e.prototype.isCostMet=function(e){var n=this,t=!0;return Array.from(e.getCost().entries()).forEach(function(e){0!==n.resourcesService.hasResource(e[0],e[1],"Construction",!0)&&(t=!1)}),t},e.prototype.hasLand=function(e){return this.landService.hasLand(e)},e.prototype.hasMountains=function(e){return this.landService.getMountains()>=e},e.prototype.getLimit=function(e,n){var t=this.buildings.get(e).find(function(e){return e[0].getBuildingType()===n});return t?t[2]:0},e.prototype.hasInputOutputDescription=function(e){return this.getBuildingSettings(e).INPUT_RESOURCES},e.prototype.getBuildingSettings=function(e){return ts.getBuilding(e)},e.prototype.hasCanProduceDescription=function(e){return this.getBuildingSettings(e).CAN_PRODUCE},e}(),uT=gr({encapsulation:0,styles:[[".notMet[_ngcontent-%COMP%]{color:#8b0000}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.5em;margin-bottom:10px}#buildings[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch}.building[_ngcontent-%COMP%]{display:flex;flex-direction:row;text-align:center;border:1px solid #000;margin-bottom:10px}.buildingTitle[_ngcontent-%COMP%]{font-weight:600;background-color:var(--active-colour);border-bottom:1px solid #000}.buildingSecondRow[_ngcontent-%COMP%]{display:flex;width:100%;border-right:1px solid #000;flex-direction:column}.buildButton[_ngcontent-%COMP%]{width:30%}.buildButtonNotAvailable[_ngcontent-%COMP%]{width:30%;cursor:not-allowed}.details[_ngcontent-%COMP%]{width:100%;text-align:center}.resourceIcon[_ngcontent-%COMP%]{height:20px;width:20px;vertical-align:middle}#description[_ngcontent-%COMP%]{margin-bottom:10px}.icon[_ngcontent-%COMP%]{display:inline-flex;flex-direction:row;align-items:center;justify-content:center;margin-right:10px}.subTitle[_ngcontent-%COMP%]{font-size:1em;font-weight:700}.productionDescription[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;margin-bottom:5px}.productionDescription[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:5px}#actions[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]],data:{}});function sT(e){return so(0,[(e()(),zr(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(1,null,["",""]))],null,function(e,n){var t=n.component,l=" (limit: "+t.getLimit(t.region,n.parent.context.$implicit.getBuildingType())+" building)";e(n,1,0,l)})}function aT(e){return so(0,[(e()(),zr(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(1,null,["",""]))],null,function(e,n){var t=n.component,l=" (limit: "+t.getLimit(t.region,n.parent.context.$implicit.getBuildingType())+" buildings)";e(n,1,0,l)})}function cT(e){return so(0,[(e()(),zr(0,0,null,null,3,"span",[["class","icon"]],null,null,null,null,null)),(e()(),io(1,null,[" "," "])),(e()(),zr(2,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(3,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){e(n,3,0,n.component.getResourceName(n.context.$implicit.resource),"resources")},function(e,n){e(n,1,0,n.context.$implicit.amount)})}function pT(e){return so(0,[(e()(),zr(0,0,null,null,3,"span",[["class","icon"]],null,null,null,null,null)),(e()(),io(1,null,[" "," "])),(e()(),zr(2,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(3,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){e(n,3,0,n.component.getResourceName(n.context.$implicit.resource),"resources")},function(e,n){e(n,1,0,n.context.$implicit.amount)})}function hT(e){return so(0,[(e()(),zr(0,0,null,null,12,"div",[["class","productionDescription"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,5,"span",[],null,null,null,null,null)),(e()(),zr(2,0,null,null,1,"span",[["class","subTitle"]],null,null,null,null,null)),(e()(),io(-1,null,["production input:"])),(e()(),zr(4,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,cT)),ki(6,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null),(e()(),zr(7,0,null,null,5,"span",[],null,null,null,null,null)),(e()(),zr(8,0,null,null,1,"span",[["class","subTitle"]],null,null,null,null,null)),(e()(),io(-1,null,["production output:"])),(e()(),zr(10,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,pT)),ki(12,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component,l=t.getBuildingSettings(n.parent.context.$implicit.getBuildingType()).INPUT_RESOURCES;e(n,6,0,l);var r=t.getBuildingSettings(n.parent.context.$implicit.getBuildingType()).OUTPUT_RESOURCES;e(n,12,0,r)},null)}function dT(e){return so(0,[(e()(),zr(0,0,null,null,2,"span",[["class","icon"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(2,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){e(n,2,0,n.component.getResourceName(n.context.$implicit),"resources")},null)}function fT(e){return so(0,[(e()(),zr(0,0,null,null,6,"div",[["class","productionDescription"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,5,"span",[],null,null,null,null,null)),(e()(),zr(2,0,null,null,1,"span",[["class","subTitle"]],null,null,null,null,null)),(e()(),io(-1,null,["can produce:"])),(e()(),zr(4,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,dT)),ki(6,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component.getBuildingSettings(n.parent.context.$implicit.getBuildingType()).CAN_PRODUCE;e(n,6,0,t)},null)}function gT(e){return so(0,[(e()(),zr(0,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),zr(1,0,null,null,6,"span",[["class","icon"]],null,null,null,null,null)),(e()(),zr(2,0,null,null,3,"span",[],null,null,null,null,null)),ki(3,278528,null,0,ks,[Bl,Vl,Pn,Ln],{ngClass:[0,"ngClass"]},null),lo(4,{notMet:0}),(e()(),io(5,null,["",""])),(e()(),zr(6,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(7,114688,null,0,cf,[],{name:[0,"name"]},null)],function(e,n){var t=e(n,4,0,!n.component.hasLand(n.parent.context.$implicit.getSize()));e(n,3,0,t),e(n,7,0,"land")},function(e,n){var t=n.parent.context.$implicit.getSize();e(n,5,0,t)})}function vT(e){return so(0,[(e()(),zr(0,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),zr(1,0,null,null,6,"span",[["class","icon"]],null,null,null,null,null)),(e()(),zr(2,0,null,null,3,"span",[],null,null,null,null,null)),ki(3,278528,null,0,ks,[Bl,Vl,Pn,Ln],{ngClass:[0,"ngClass"]},null),lo(4,{notMet:0}),(e()(),io(5,null,["",""])),(e()(),zr(6,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(7,114688,null,0,cf,[],{name:[0,"name"]},null)],function(e,n){var t=e(n,4,0,!n.component.hasMountains(n.parent.context.$implicit.getSize()));e(n,3,0,t),e(n,7,0,"mountains")},function(e,n){var t=n.parent.context.$implicit.getSize();e(n,5,0,t)})}function mT(e){return so(0,[(e()(),zr(0,0,null,null,7,"span",[],null,null,null,null,null)),(e()(),zr(1,0,null,null,6,"span",[["class","icon"]],null,null,null,null,null)),(e()(),zr(2,0,null,null,3,"span",[],null,null,null,null,null)),ki(3,278528,null,0,ks,[Bl,Vl,Pn,Ln],{ngClass:[0,"ngClass"]},null),lo(4,{notMet:0}),(e()(),io(5,null,["",""])),(e()(),zr(6,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(7,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){var t=n.component,l=e(n,4,0,!t.hasResource(n.context.$implicit));e(n,3,0,l),e(n,7,0,t.getResourceName(n.context.$implicit.key),"resources")},function(e,n){e(n,5,0,n.context.$implicit.value)})}function yT(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[["class","buildButton"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.build(e.parent.context.$implicit)&&l),l},null,null)),(e()(),io(-1,null,["Build"]))],null,null)}function ST(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[["class","buildButtonNotAvailable"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.build(e.parent.context.$implicit)&&l),l},null,null)),(e()(),io(-1,null,["Build"]))],null,null)}function ET(e){return so(0,[(e()(),zr(0,0,null,null,26,"div",[["class","building"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,21,"div",[["class","buildingSecondRow"]],null,null,null,null,null)),(e()(),zr(2,0,null,null,5,"span",[["class","buildingTitle"]],null,null,null,null,null)),(e()(),io(3,null,[""," "])),(e()(),jr(16777216,null,null,1,null,sT)),ki(5,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,aT)),ki(7,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),zr(8,0,null,null,14,"div",[["class","details"]],null,null,null,null,null)),(e()(),zr(9,0,null,null,0,"div",[["id","description"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),jr(16777216,null,null,1,null,hT)),ki(11,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,fT)),ki(13,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),zr(14,0,null,null,1,"div",[["class","subTitle"]],null,null,null,null,null)),(e()(),io(-1,null,["cost:"])),(e()(),jr(16777216,null,null,1,null,gT)),ki(17,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,vT)),ki(19,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,2,null,mT)),ki(21,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null),Mi(0,Ks,[Vl]),(e()(),jr(16777216,null,null,1,null,yT)),ki(24,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,ST)),ki(26,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component,l=1===t.getLimit(t.region,n.context.$implicit.getBuildingType());e(n,5,0,l);var r=t.getLimit(t.region,n.context.$implicit.getBuildingType())>1;e(n,7,0,r);var i=t.hasInputOutputDescription(n.context.$implicit.getBuildingType());e(n,11,0,i);var o=t.hasCanProduceDescription(n.context.$implicit.getBuildingType());e(n,13,0,o);var u=!n.context.$implicit.buildOnMountain();e(n,17,0,u);var s=n.context.$implicit.buildOnMountain();e(n,19,0,s),e(n,21,0,hr(n,21,0,Ei(n,22).transform(t.getBuildingCostEntries(n.context.$implicit)))),e(n,24,0,t.isCostMet(n.context.$implicit)),e(n,26,0,!t.isCostMet(n.context.$implicit))},function(e,n){var t=n.context.$implicit.getName();e(n,3,0,t);var l=n.context.$implicit.getDescription();e(n,9,0,l)})}function bT(e){return so(0,[Mi(0,Ys,[]),(e()(),zr(1,0,null,null,13,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),zr(2,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),io(3,null,[" "," buildings "])),to(4,1),(e()(),io(-1,null,[" Search: "])),(e()(),zr(6,0,null,null,5,"input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var l=!0,r=e.component;return"input"===n&&(l=!1!==Ei(e,7)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ei(e,7).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ei(e,7)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ei(e,7)._compositionEnd(t.target.value)&&l),"ngModelChange"===n&&(l=!1!==(r.filterText=t)&&l),l},null,null)),ki(7,16384,null,0,_f,[Ln,Pn,[2,Cf]],null,null),xi(1024,null,Of,function(e){return[e]},[_f]),ki(9,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),xi(2048,null,Nf,null,[pg]),ki(11,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),zr(12,0,null,null,2,"div",[["id","buildings"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,ET)),ki(14,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,9,0,t.filterText),e(n,14,0,t.getBuildingForRegion(t.region))},function(e,n){var t=n.component,l=hr(n,3,0,e(n,4,0,Ei(n,0),t.regionString));e(n,3,0,l),e(n,6,0,Ei(n,11).ngClassUntouched,Ei(n,11).ngClassTouched,Ei(n,11).ngClassPristine,Ei(n,11).ngClassDirty,Ei(n,11).ngClassValid,Ei(n,11).ngClassInvalid,Ei(n,11).ngClassPending)})}var OT=function(){function e(e){var n=this;this.modalService=e,this.clearFilterSubject=new x,this.modalService.registerForRegion().subscribe(function(e){n.region=e,n.clearFilterSubject.next()}),this.modalService.registerForOnOpen().subscribe(function(e){e===mu.BUILD&&(n.bodyRef.nativeElement.scrollTop=0)})}return e.prototype.ngOnInit=function(){},e}(),RT=gr({encapsulation:0,styles:[[""]],data:{}});function CT(e){return so(0,[Qi(402653184,1,{bodyRef:0}),(e()(),zr(1,0,null,null,6,"app-modal",[["id","build-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ei(e,2).onKeydownHandler(t)&&l),l},iT,rT)),ki(2,4440064,null,0,lT,[Ln,Pn,Ig],{id:[0,"id"]},null),(e()(),zr(3,0,null,0,3,"div",[["class","modal"]],null,null,null,null,null)),(e()(),zr(4,0,[[1,0],["body",1]],null,2,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),zr(5,0,null,null,1,"app-construction",[],null,null,null,bT,uT)),ki(6,638976,null,0,oT,[lS,Sg,Ig,Tg,xg,oS,sS,SE,nC,MR,EC,i_,zC,wg],{region:[0,"region"],clearFilterObservable:[1,"clearFilterObservable"]},null),(e()(),zr(7,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,2,0,"build-modal"),e(n,6,0,t.region,t.clearFilterSubject.asObservable())},null)}var _T=function(){function e(e,n,t,l,r,i,o,u,s,a,c,p,h,d,f,g,v,m){var y=this;this.logService=e,this.villageService=n,this.fortService=t,this.fieldService=l,this.mountainsService=r,this.plateauService=i,this.seaService=o,this.forestService=u,this.calendarService=s,this.landService=a,this.techService=c,this.weatherService=p,this.resourcesService=h,this.gameService=d,this.effectsService=f,this.armyService=g,this.happinessService=v,this.servicesService=m,this.tickerState=0,this.lastTick=0,this.ticking=!1,this.resolution=ju,m.addService(Nu.TICKER,this),this.tickSubject=new x,this.interval=setInterval(function(){return y.tick()},this.resolution)}return e.prototype.tick=function(){if(!this.ticking){this.ticking=!0;var e=Math.floor(Date.now()/this.resolution);this.tickerState>=0&&(this.lastTick=e,this.calendarService.tick(e),this.effectsService.tick(e),this.weatherService.tick(e),this.happinessService.tick(e),this.landService.tick(e),this.resourcesService.tick(e),this.gameService.tick(e),this.villageService.tick(e),this.fortService.tick(e),this.fieldService.tick(e),this.mountainsService.tick(e),this.plateauService.tick(e),this.seaService.tick(e),this.forestService.tick(e),this.armyService.tick(e)),this.ticking=!1}},e.prototype.stop=function(){return this.tickerState-=1,this.lastTick},e.prototype.start=function(){this.tickerState+=1,this.tickerState>0&&(this.tickerState=0)},e.prototype.forceStart=function(){this.tickerState=0},e.prototype.clearTicker=function(){clearInterval(this.interval)},e.prototype.initTicker=function(){var e=this;this.interval=setInterval(function(){return e.tick()},this.resolution)},e.ngInjectableDef=ve({factory:function(){return new e(Ye(Tg),Ye(sS),Ye(SE),Ye(nC),Ye(EC),Ye(zC),Ye(i_),Ye(MR),Ye(_g),Ye(oS),Ye(ES),Ye(ob),Ye(xg),Ye(wg),Ye(rS),Ye(tE),Ye(kg),Ye(Sg))},token:e,providedIn:"root"}),e}(),TT=function(){function e(e,n,t,l,r,i,o,u,s,a,c,p,h,d,f,g,v,m,y,S,E,b,O,R,C,_,T,I,A,w){var N=this;this.router=e,this.tickerService=n,this.gameService=t,this.modalService=l,this.optionsService=r,this.logService=i,this.villageService=o,this.forestService=u,this.resourcesService=s,this.landService=a,this.mountainsService=c,this.calendarService=p,this.royalService=h,this.techService=d,this.religionService=f,this.craftingService=g,this.recipeService=v,this.fieldService=m,this.plateauService=y,this.seaService=S,this.fortService=E,this.effectsService=b,this.armyService=O,this.happinessService=R,this.managementService=C,this.marketService=_,this.weatherService=T,this.idService=I,this.tutorialService=A,this.saveName=Gu.saveName,this.saveVersion=Gu.saveVersion,w.addService(Nu.SERIALIZER,this),this.autoSaveStatus=this.optionsService.getOption(Eg.AUTO_SAVE_STATUS),this.autoSavePeriod=this.optionsService.getOption(Eg.AUTO_SAVE_PERIOD),this.optionsSubscription||(this.optionsSubscription=this.optionsService.registerForOptionsChange().subscribe(function(){return N.changeOptions()})),this.saveInterval=setInterval(function(){N.initSave(),N.logService.log("Auto saved")},this.autoSavePeriod)}return e.prototype.changeOptions=function(){var e=this,n=this.optionsService.getOption(Eg.AUTO_SAVE_STATUS),t=this.optionsService.getOption(Eg.AUTO_SAVE_PERIOD);this.autoSaveStatus===n&&this.autoSavePeriod===t||(this.autoSaveStatus=n,this.autoSavePeriod=t,clearInterval(this.saveInterval),this.autoSaveStatus&&(this.saveInterval=setInterval(function(){e.initSave(),e.logService.log("Auto saved")},1e3*this.autoSavePeriod*60)))},e.prototype.initSave=function(){this.tickerService.stop(),localStorage.setItem(this.saveName,this.prepareBase64()),this.tickerService.start()},e.prototype.prepareBase64=function(){this.tickerService.stop();var e=btoa(JSON.stringify({saveVersion:this.saveVersion,id:this.idService,tutorial:this.tutorialService.save(),resources:this.resourcesService.save(),village:this.villageService.save(),fort:this.fortService.save(),forest:this.forestService.save(),field:this.fieldService.save(),mountains:this.mountainsService.save(),plateau:this.plateauService.save(),sea:this.seaService.save(),land:this.landService.save(),calendar:this.calendarService.save(),game:this.gameService.save(),options:this.optionsService.save(),royal:this.royalService.save(),tech:this.techService.save(),religion:this.religionService.save(),crafting:this.craftingService.save(),recipe:this.recipeService.save(),effects:this.effectsService.save(),army:this.armyService.save(),happiness:this.happinessService.save(),management:this.managementService.save(),market:this.marketService.save(),weather:this.weatherService.save(),logs:this.logService.save()}));return this.tickerService.start(),e},e.prototype.initLoad=function(){if(this.tickerService.stop(),null===localStorage.getItem(this.saveName))return this.modalService.info("There is no any save file to load."),void this.tickerService.start();var e;try{e=JSON.parse(atob(localStorage.getItem(this.saveName)))}catch(n){return this.modalService.info("Save data is corrupted! Loading failed."),void this.tickerService.start()}this.loadSave(e),this.tickerService.start(),this.logService.log("loaded")},e.prototype.hasSave=function(){return null!=localStorage.getItem(this.saveName)},e.prototype.import=function(e){var n;this.tickerService.stop();try{n=JSON.parse(atob(e))}catch(t){return this.modalService.info("Import file is not valid or corrupted! Import failed."),void this.tickerService.start()}this.loadSave(n),localStorage.setItem(this.saveName,e),this.tickerService.start(),this.logService.log("save imported")},e.prototype.hardReset=function(){this.reset(!0),localStorage.removeItem(this.saveName)},e.prototype.softReset=function(){this.reset(!1)},e.prototype.ascensionReset=function(){this.reset(!1,!0)},e.prototype.reset=function(e,n){void 0===n&&(n=!1),this.tickerService.stop(),this.tickerService.clearTicker(),localStorage.removeItem(this.saveName),this.tutorialService.reset(e,n),this.gameService.reset(e,n),this.idService.reset(e,n),this.calendarService.reset(e,n),this.weatherService.reset(e,n),this.effectsService.reset(e,n),this.resourcesService.reset(e,n),this.landService.reset(e,n),this.villageService.reset(e,n),this.fortService.reset(e,n),this.forestService.reset(e,n),this.fieldService.reset(e,n),this.mountainsService.reset(e,n),this.plateauService.reset(e,n),this.seaService.reset(e,n),this.optionsService.reset(e,n),this.techService.reset(e,n),this.religionService.reset(e,n),this.craftingService.reset(e,n),this.recipeService.reset(e,n),this.armyService.reset(e,n),this.happinessService.reset(e,n),this.managementService.reset(e,n),this.marketService.reset(e,n),this.logService.reset(e,n),this.royalService.reset(e,n),this.initSave(),this.tickerService.initTicker(),this.tickerService.start(),this.router.navigate(["/village"])},e.prototype.loadSave=function(e){switch(e.saveVersion){case Fu.DEV:case Fu.V1_0_0:this.loadDevVersion(e);break;default:var n="Corrupted save file (unknown save version). Loading is not possible";return this.logService.log(n),void console.error(n)}},e.prototype.loadDevVersion=function(e){this.saveVersion=e.saveVersion,this.idService.load(e.id),this.effectsService.load(e.effects),this.resourcesService.load(e.resources),this.villageService.load(e.village),this.fortService.load(e.fort),this.forestService.load(e.forest),this.fieldService.load(e.field),this.mountainsService.load(e.mountains),this.plateauService.load(e.plateau),this.seaService.load(e.sea),this.landService.load(e.land),this.calendarService.load(e.calendar),this.optionsService.load(e.options),this.gameService.load(e.game),this.royalService.load(e.royal),this.techService.load(e.tech),this.religionService.load(e.religion),this.craftingService.load(e.crafting),this.recipeService.load(e.recipe),this.armyService.load(e.army),this.happinessService.load(e.happiness),this.managementService.load(e.management),this.marketService.load(e.market),this.weatherService.load(e.weather),this.logService.load(e.logs),this.tutorialService.load(void 0!==e.tutorial?e.tutorial:{})},e.ngInjectableDef=ve({factory:function(){return new e(Ye(_d),Ye(_T),Ye(wg),Ye(Ig),Ye(bg),Ye(Tg),Ye(sS),Ye(MR),Ye(xg),Ye(oS),Ye(EC),Ye(_g),Ye(Pg),Ye(ES),Ye(UE),Ye($v),Ye(Zg),Ye(nC),Ye(zC),Ye(i_),Ye(SE),Ye(rS),Ye(tE),Ye(kg),Ye(gO),Ye(Nm),Ye(ob),Ye(nS),Ye(Ag),Ye(Sg))},token:e,providedIn:"root"}),e}(),IT=function(){function e(e,n){var t=this;this.serializerService=e,this.modalService=n,this.exportTextArea=null,this.showMessage=!1,this.modalService.registerForOnOpen().subscribe(function(e){e===mu.EXPORT&&t.export()})}return e.prototype.ngOnInit=function(){},e.prototype.export=function(){this.exportTextArea=this.serializerService.prepareBase64()},e.prototype.copy=function(){var e=this,n=this.exportTextArea,t=document.createElement("textarea");t.id="txt",t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.opacity="0",t.value=n,document.body.appendChild(t),t.select();try{if(document.execCommand("copy"))return this.showMessage=!0,setTimeout(function(){return e.showMessage=!1},1500),!0}catch(l){console.error(eg.ERROR_1)}finally{document.body.removeChild(t)}return!1},e}(),AT=gr({encapsulation:0,styles:[["#export-area[_ngcontent-%COMP%]{width:100%;resize:none}.modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}#buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;width:100%}#title[_ngcontent-%COMP%]{font-weight:800;margin-bottom:10px}"]],data:{}});function wT(e){return so(0,[(e()(),zr(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),io(-1,null,["copied..."]))],null,null)}function NT(e){return so(0,[(e()(),zr(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),zr(1,0,null,null,0,"br",[],null,null,null,null,null))],null,null)}function PT(e){return so(0,[(e()(),zr(0,0,null,null,17,"app-modal",[["id","export-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ei(e,1).onKeydownHandler(t)&&l),l},iT,rT)),ki(1,4440064,null,0,lT,[Ln,Pn,Ig],{id:[0,"id"]},null),(e()(),zr(2,0,null,0,14,"div",[["class","modal"]],null,null,null,null,null)),(e()(),zr(3,0,null,null,13,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),zr(4,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),io(-1,null,["Export save"])),(e()(),zr(6,0,null,null,1,"textarea",[["id","export-area"],["placeholder","Your save will be generated here..."],["readonly",""],["rows","20"]],null,null,null,null,null)),(e()(),io(7,null,["",""])),(e()(),zr(8,0,null,null,4,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),zr(9,0,null,null,1,"button",[["id","import-button"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.export()&&l),l},null,null)),(e()(),io(-1,null,["Update"])),(e()(),zr(11,0,null,null,1,"button",[["id","copy-button"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.copy()&&l),l},null,null)),(e()(),io(-1,null,["Copy to clipboard"])),(e()(),jr(16777216,null,null,1,null,wT)),ki(14,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,NT)),ki(16,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),zr(17,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,1,0,"export-modal"),e(n,14,0,t.showMessage),e(n,16,0,!t.showMessage)},function(e,n){e(n,7,0,n.component.exportTextArea)})}var DT=function(){function e(e,n){this.serializerService=e,this.modalService=n}return e.prototype.ngOnInit=function(){},e.prototype.import=function(){this.serializerService.import(this.importTextArea),this.importTextArea="",this.modalService.close(mu.IMPORT)},e}(),kT=gr({encapsulation:0,styles:[["#import-area[_ngcontent-%COMP%]{width:100%;resize:none}.modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}#title[_ngcontent-%COMP%]{font-weight:800;margin-bottom:10px}"]],data:{}});function MT(e){return so(0,[(e()(),zr(0,0,null,null,14,"app-modal",[["id","import-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ei(e,1).onKeydownHandler(t)&&l),l},iT,rT)),ki(1,4440064,null,0,lT,[Ln,Pn,Ig],{id:[0,"id"]},null),(e()(),zr(2,0,null,0,11,"div",[["class","modal"]],null,null,null,null,null)),(e()(),zr(3,0,null,null,10,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),zr(4,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),io(-1,null,["Import save"])),(e()(),zr(6,0,null,null,5,"textarea",[["id","import-area"],["placeholder","Paste your save here..."],["rows","20"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var l=!0,r=e.component;return"input"===n&&(l=!1!==Ei(e,7)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ei(e,7).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ei(e,7)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ei(e,7)._compositionEnd(t.target.value)&&l),"ngModelChange"===n&&(l=!1!==(r.importTextArea=t)&&l),l},null,null)),ki(7,16384,null,0,_f,[Ln,Pn,[2,Cf]],null,null),xi(1024,null,Of,function(e){return[e]},[_f]),ki(9,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),xi(2048,null,Nf,null,[pg]),ki(11,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),zr(12,0,null,null,1,"button",[["id","import-button"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.import()&&l),l},null,null)),(e()(),io(-1,null,["Import"])),(e()(),zr(14,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,1,0,"import-modal"),e(n,9,0,t.importTextArea)},function(e,n){e(n,6,0,Ei(n,11).ngClassUntouched,Ei(n,11).ngClassTouched,Ei(n,11).ngClassPristine,Ei(n,11).ngClassDirty,Ei(n,11).ngClassValid,Ei(n,11).ngClassInvalid,Ei(n,11).ngClassPending)})}var xT=function(){function e(e,n){this.modalService=e,this.serializerService=n}return e.prototype.ngOnInit=function(){},e.prototype.hardReset=function(){this.serializerService.hardReset(),this.modalService.close(mu.HARD_RESET)},e.prototype.cancel=function(){this.modalService.close(mu.HARD_RESET)},e}(),LT=gr({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:1.2em}#buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;width:100%}button[_ngcontent-%COMP%]{border:2px solid #000;color:#000;padding:1% 2%;text-align:center;text-decoration:none;display:inline-block;font-size:1em;margin:.5%}#hardReset[_ngcontent-%COMP%]{background-color:#5f0000;color:#fff}"]],data:{}});function FT(e){return so(0,[(e()(),zr(0,0,null,null,19,"app-modal",[["id","hard-reset-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ei(e,1).onKeydownHandler(t)&&l),l},iT,rT)),ki(1,4440064,null,0,lT,[Ln,Pn,Ig],{id:[0,"id"]},null),(e()(),zr(2,0,null,0,16,"div",[["class","modal"]],null,null,null,null,null)),(e()(),zr(3,0,null,null,15,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),zr(4,0,null,null,1,"h2",[],null,null,null,null,null)),(e()(),io(-1,null,["Hard Reset"])),(e()(),zr(6,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),io(-1,null,[" Are you sure you want to hard reset your progress? "])),(e()(),zr(8,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),io(-1,null,[" This will remove ALL progress and saved game (except settings and tutorial state). "])),(e()(),zr(10,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),io(-1,null,[" You will still be able to load game from exported save. "])),(e()(),zr(12,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),io(-1,null,[" This should only be done if you have backup save or want to start from the beginning. "])),(e()(),zr(14,0,null,null,4,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),zr(15,0,null,null,1,"button",[["id","hardReset"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.hardReset()&&l),l},null,null)),(e()(),io(-1,null,["HARD RESET"])),(e()(),zr(17,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.cancel()&&l),l},null,null)),(e()(),io(-1,null,["CANCEL"])),(e()(),zr(19,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){e(n,1,0,"hard-reset-modal")},null)}var UT=function(){function e(e,n){this.optionsService=e,this.modalService=n}return e.prototype.ngOnInit=function(){var e=this;this.optionsSubscription||(this.optionsSubscription=this.optionsService.registerForOptionsChange().subscribe(function(){return e.initOptions()})),this.initOptions()},e.prototype.initOptions=function(){this.autoSaveStatus=this.optionsService.getOption(Eg.AUTO_SAVE_STATUS),this.autoSavePeriod=this.optionsService.getOption(Eg.AUTO_SAVE_PERIOD),this.metricStatus=this.optionsService.getOption(Eg.METRIC),this.saveLogs=this.optionsService.getOption(Eg.SAVE_LOGS),this.sound=this.optionsService.getOption(Eg.SOUND),this.soundVolume=this.optionsService.getOption(Eg.SOUND_VOLUME),this.visualProgressBars=this.optionsService.getOption(Eg.VISUAL_PROGRESS_BARS)},e.prototype.close=function(){this.modalService.close(mu.OPTIONS)},e.prototype.updateOptions=function(){this.optionsService.setOptions([{option:Eg.AUTO_SAVE_STATUS,value:this.autoSaveStatus},{option:Eg.AUTO_SAVE_PERIOD,value:this.autoSavePeriod},{option:Eg.METRIC,value:this.metricStatus},{option:Eg.SAVE_LOGS,value:this.saveLogs},{option:Eg.SOUND,value:this.sound},{option:Eg.SOUND_VOLUME,value:this.soundVolume},{option:Eg.VISUAL_PROGRESS_BARS,value:this.visualProgressBars}])},e.prototype.updateSaveOption=function(){this.autoSavePeriod=Number(this.autoSavePeriod),this.autoSavePeriod%1!=0&&(this.autoSavePeriod=Math.floor(this.autoSavePeriod)),this.autoSavePeriod<=0&&(this.autoSaveStatus=!1,this.autoSavePeriod=1),this.updateOptions()},e.prototype.getSoundVolume=function(){return this.optionsService.getOption(Eg.SOUND_VOLUME)},e.prototype.changeSoundVolume=function(e){this.soundVolume=e.target.value,this.updateOptions()},e}(),HT=gr({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{text-align:center;font-size:1.2em}#title[_ngcontent-%COMP%]{text-align:center;font-weight:800;display:inline-block}.options[_ngcontent-%COMP%]{text-align:left}#autoSavePeriod[_ngcontent-%COMP%]{width:4ch;text-align:right}.slidecontainer[_ngcontent-%COMP%]{display:inline-block;width:150px}.slider[_ngcontent-%COMP%]{-webkit-appearance:none;width:100%;height:10px;border-radius:5px;background:var(--passive-colour);outline:0;opacity:.7;transition:opacity .2s}.slider[_ngcontent-%COMP%]:hover{opacity:1}.slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:15px;height:15px;border-radius:50%;background:var(--active-colour);cursor:pointer}.slider[_ngcontent-%COMP%]::-moz-range-thumb{width:15px;height:15px;border-radius:50%;background:var(--active-colour);cursor:pointer}#soundVolumeLabel[_ngcontent-%COMP%]{display:inline-block;width:180px}"]],data:{}});function GT(e){return so(0,[(e()(),zr(0,0,null,null,72,"app-modal",[["id","options-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ei(e,1).onKeydownHandler(t)&&l),l},iT,rT)),ki(1,4440064,null,0,lT,[Ln,Pn,Ig],{id:[0,"id"]},null),(e()(),zr(2,0,null,0,69,"div",[["class","modal"]],null,null,null,null,null)),(e()(),zr(3,0,null,null,68,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),zr(4,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),io(-1,null,["Options"])),(e()(),zr(6,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(7,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(8,0,null,null,59,"div",[["class","options"]],null,null,null,null,null)),(e()(),zr(9,0,null,null,1,"label",[["for","autoSaveStatus"]],null,null,null,null,null)),(e()(),io(-1,null,["auto save on/off "])),(e()(),zr(11,0,null,null,5,"input",[["id","autoSaveStatus"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,r=e.component;return"change"===n&&(l=!1!==Ei(e,12).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==Ei(e,12).onTouched()&&l),"change"===n&&(l=!1!==r.updateOptions()&&l),"ngModelChange"===n&&(l=!1!==(r.autoSaveStatus=t)&&l),l},null,null)),ki(12,16384,null,0,Rf,[Ln,Pn],null,null),xi(1024,null,Of,function(e){return[e]},[Rf]),ki(14,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),xi(2048,null,Nf,null,[pg]),ki(16,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),zr(17,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(18,0,null,null,1,"label",[["for","autoSavePeriod"]],null,null,null,null,null)),(e()(),io(-1,null,["auto save period "])),(e()(),zr(20,0,null,null,5,"input",[["id","autoSavePeriod"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var l=!0,r=e.component;return"input"===n&&(l=!1!==Ei(e,21)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ei(e,21).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ei(e,21)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ei(e,21)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==r.updateSaveOption()&&l),"ngModelChange"===n&&(l=!1!==(r.autoSavePeriod=t)&&l),l},null,null)),ki(21,16384,null,0,_f,[Ln,Pn,[2,Cf]],null,null),xi(1024,null,Of,function(e){return[e]},[_f]),ki(23,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),xi(2048,null,Nf,null,[pg]),ki(25,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),io(-1,null,[" minutes "])),(e()(),zr(27,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(28,0,null,null,1,"label",[["for","metricStatus"]],null,null,null,null,null)),(e()(),io(-1,null,["use metric units"])),(e()(),zr(30,0,null,null,5,"input",[["id","metricStatus"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,r=e.component;return"change"===n&&(l=!1!==Ei(e,31).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==Ei(e,31).onTouched()&&l),"change"===n&&(l=!1!==r.updateOptions()&&l),"ngModelChange"===n&&(l=!1!==(r.metricStatus=t)&&l),l},null,null)),ki(31,16384,null,0,Rf,[Ln,Pn],null,null),xi(1024,null,Of,function(e){return[e]},[Rf]),ki(33,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),xi(2048,null,Nf,null,[pg]),ki(35,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),zr(36,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(37,0,null,null,1,"label",[["for","visualProgressBars"]],null,null,null,null,null)),(e()(),io(-1,null,["Display moving progress bars (on) or just text (off)"])),(e()(),zr(39,0,null,null,5,"input",[["id","visualProgressBars"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,r=e.component;return"change"===n&&(l=!1!==Ei(e,40).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==Ei(e,40).onTouched()&&l),"change"===n&&(l=!1!==r.updateOptions()&&l),"ngModelChange"===n&&(l=!1!==(r.visualProgressBars=t)&&l),l},null,null)),ki(40,16384,null,0,Rf,[Ln,Pn],null,null),xi(1024,null,Of,function(e){return[e]},[Rf]),ki(42,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),xi(2048,null,Nf,null,[pg]),ki(44,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),zr(45,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(46,0,null,null,1,"label",[["for","saveLogsStatus"]],null,null,null,null,null)),(e()(),io(-1,null,["save logs"])),(e()(),zr(48,0,null,null,5,"input",[["id","saveLogsStatus"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,r=e.component;return"change"===n&&(l=!1!==Ei(e,49).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==Ei(e,49).onTouched()&&l),"change"===n&&(l=!1!==r.updateOptions()&&l),"ngModelChange"===n&&(l=!1!==(r.saveLogs=t)&&l),l},null,null)),ki(49,16384,null,0,Rf,[Ln,Pn],null,null),xi(1024,null,Of,function(e){return[e]},[Rf]),ki(51,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),xi(2048,null,Nf,null,[pg]),ki(53,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),zr(54,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(55,0,null,null,1,"label",[["for","sound"]],null,null,null,null,null)),(e()(),io(-1,null,["sound on/off"])),(e()(),zr(57,0,null,null,5,"input",[["id","sound"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,r=e.component;return"change"===n&&(l=!1!==Ei(e,58).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==Ei(e,58).onTouched()&&l),"change"===n&&(l=!1!==r.updateOptions()&&l),"ngModelChange"===n&&(l=!1!==(r.sound=t)&&l),l},null,null)),ki(58,16384,null,0,Rf,[Ln,Pn],null,null),xi(1024,null,Of,function(e){return[e]},[Rf]),ki(60,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),xi(2048,null,Nf,null,[pg]),ki(62,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),zr(63,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(64,0,null,null,1,"label",[["for","soundVolume"],["id","soundVolumeLabel"]],null,null,null,null,null)),(e()(),io(65,null,["sound volume ","% "])),(e()(),zr(66,0,null,null,1,"div",[["class","slidecontainer"]],null,null,null,null,null)),(e()(),zr(67,0,null,null,0,"input",[["class","slider"],["id","soundVolume"],["max","100"],["min","0"],["type","range"],["value","100"]],[[8,"value",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.changeSoundVolume(t)&&l),l},null,null)),(e()(),zr(68,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(69,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(70,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.close()&&l),l},null,null)),(e()(),io(-1,null,["Close"])),(e()(),zr(72,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,1,0,"options-modal"),e(n,14,0,t.autoSaveStatus),e(n,23,0,t.autoSavePeriod),e(n,33,0,t.metricStatus),e(n,42,0,t.visualProgressBars),e(n,51,0,t.saveLogs),e(n,60,0,t.sound)},function(e,n){var t=n.component;e(n,11,0,Ei(n,16).ngClassUntouched,Ei(n,16).ngClassTouched,Ei(n,16).ngClassPristine,Ei(n,16).ngClassDirty,Ei(n,16).ngClassValid,Ei(n,16).ngClassInvalid,Ei(n,16).ngClassPending),e(n,20,0,Ei(n,25).ngClassUntouched,Ei(n,25).ngClassTouched,Ei(n,25).ngClassPristine,Ei(n,25).ngClassDirty,Ei(n,25).ngClassValid,Ei(n,25).ngClassInvalid,Ei(n,25).ngClassPending),e(n,30,0,Ei(n,35).ngClassUntouched,Ei(n,35).ngClassTouched,Ei(n,35).ngClassPristine,Ei(n,35).ngClassDirty,Ei(n,35).ngClassValid,Ei(n,35).ngClassInvalid,Ei(n,35).ngClassPending),e(n,39,0,Ei(n,44).ngClassUntouched,Ei(n,44).ngClassTouched,Ei(n,44).ngClassPristine,Ei(n,44).ngClassDirty,Ei(n,44).ngClassValid,Ei(n,44).ngClassInvalid,Ei(n,44).ngClassPending),e(n,48,0,Ei(n,53).ngClassUntouched,Ei(n,53).ngClassTouched,Ei(n,53).ngClassPristine,Ei(n,53).ngClassDirty,Ei(n,53).ngClassValid,Ei(n,53).ngClassInvalid,Ei(n,53).ngClassPending),e(n,57,0,Ei(n,62).ngClassUntouched,Ei(n,62).ngClassTouched,Ei(n,62).ngClassPristine,Ei(n,62).ngClassDirty,Ei(n,62).ngClassValid,Ei(n,62).ngClassInvalid,Ei(n,62).ngClassPending),e(n,65,0,t.getSoundVolume()),e(n,67,0,t.getSoundVolume())})}var BT=function(){function e(e){this.modalService=e,this.text="",this.value=""}return e.prototype.ngOnInit=function(){var e=this;this.modalService.registerForText().subscribe(function(n){return e.text=n}),this.modalService.registerForValue().subscribe(function(n){return e.value=n})},e.prototype.ok=function(){this.modalService.sendValueInput(this.value),this.modalService.close(mu.INPUT)},e.prototype.cancel=function(){this.modalService.sendValueInput(null),this.modalService.close(mu.INPUT)},e.prototype.onKeydownHandler=function(e){document.getElementById("input-modal").style.display&&this.ok()},e}(),VT=gr({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}#buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px;padding:5px}"]],data:{}});function WT(e){return so(0,[(e()(),zr(0,0,null,null,18,"app-modal",[["id","input-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ei(e,1).onKeydownHandler(t)&&l),l},iT,rT)),ki(1,4440064,null,0,lT,[Ln,Pn,Ig],{id:[0,"id"]},null),(e()(),zr(2,0,null,0,15,"div",[["class","modal"]],null,null,null,null,null)),(e()(),zr(3,0,null,null,14,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),zr(4,0,null,null,0,"span",[["id","text"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),zr(5,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(6,0,null,null,5,"input",[["id","input"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var l=!0,r=e.component;return"input"===n&&(l=!1!==Ei(e,7)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ei(e,7).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ei(e,7)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ei(e,7)._compositionEnd(t.target.value)&&l),"ngModelChange"===n&&(l=!1!==(r.value=t)&&l),l},null,null)),ki(7,16384,null,0,_f,[Ln,Pn,[2,Cf]],null,null),xi(1024,null,Of,function(e){return[e]},[_f]),ki(9,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),xi(2048,null,Nf,null,[pg]),ki(11,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),zr(12,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(13,0,null,null,4,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),zr(14,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.ok()&&l),l},null,null)),(e()(),io(-1,null,["CONFIRM"])),(e()(),zr(16,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.cancel()&&l),l},null,null)),(e()(),io(-1,null,["CANCEL"])),(e()(),zr(18,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,1,0,"input-modal"),e(n,9,0,t.value)},function(e,n){e(n,4,0,n.component.text),e(n,6,0,Ei(n,11).ngClassUntouched,Ei(n,11).ngClassTouched,Ei(n,11).ngClassPristine,Ei(n,11).ngClassDirty,Ei(n,11).ngClassValid,Ei(n,11).ngClassInvalid,Ei(n,11).ngClassPending)})}var jT=function(){function e(e,n,t){this.kongregateService=e,this.royalService=n,this.modalService=t}return e.prototype.ngOnInit=function(){},e.prototype.ok=function(){this.modalService.close(mu.ROYAL)},e.prototype.buy=function(e){Gu.production?this.kongregateService.buyItem(e):(this.royalService.increaseRoyalPoints(Number(e.replace("rp_pack",""))),this.modalService.close(mu.ROYAL))},e}(),zT=gr({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.kred[_ngcontent-%COMP%]{width:30px;height:30px;vertical-align:middle}.value[_ngcontent-%COMP%]{margin-top:5px}.entry[_ngcontent-%COMP%]{width:50%;text-align:center}#close[_ngcontent-%COMP%]{margin-top:15px}"]],data:{}});function YT(e){return so(0,[(e()(),zr(0,0,null,null,33,"app-modal",[["id","royal-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ei(e,1).onKeydownHandler(t)&&l),l},iT,rT)),ki(1,4440064,null,0,lT,[Ln,Pn,Ig],{id:[0,"id"]},null),(e()(),zr(2,0,null,0,30,"div",[["class","modal"]],null,null,null,null,null)),(e()(),zr(3,0,null,null,29,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),zr(4,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["Choose how many Royal Points you would like to buy:"])),(e()(),zr(6,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(7,0,null,null,5,"div",[["class","entry"]],null,null,null,null,null)),(e()(),zr(8,0,null,null,2,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.buy("rp_pack10")&&l),l},null,null)),(e()(),io(-1,null,["10 "])),(e()(),zr(10,0,null,null,0,"img",[["alt","Kreds"],["class","kred"],["src","assets/kred.png"]],null,null,null,null,null)),(e()(),zr(11,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,[" 10 Royal points"])),(e()(),zr(13,0,null,null,5,"div",[["class","entry"]],null,null,null,null,null)),(e()(),zr(14,0,null,null,2,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.buy("rp_pack20")&&l),l},null,null)),(e()(),io(-1,null,["20 "])),(e()(),zr(16,0,null,null,0,"img",[["alt","Kreds"],["class","kred"],["src","assets/kred.png"]],null,null,null,null,null)),(e()(),zr(17,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,[" 20 Royal points"])),(e()(),zr(19,0,null,null,5,"div",[["class","entry"]],null,null,null,null,null)),(e()(),zr(20,0,null,null,2,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.buy("rp_pack55")&&l),l},null,null)),(e()(),io(-1,null,["50 "])),(e()(),zr(22,0,null,null,0,"img",[["alt","Kreds"],["class","kred"],["src","assets/kred.png"]],null,null,null,null,null)),(e()(),zr(23,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,[" 55 Royal points"])),(e()(),zr(25,0,null,null,5,"div",[["class","entry"]],null,null,null,null,null)),(e()(),zr(26,0,null,null,2,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.buy("rp_pack125")&&l),l},null,null)),(e()(),io(-1,null,["100 "])),(e()(),zr(28,0,null,null,0,"img",[["alt","Kreds"],["class","kred"],["src","assets/kred.png"]],null,null,null,null,null)),(e()(),zr(29,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,[" 125 Royal points"])),(e()(),zr(31,0,null,null,1,"button",[["id","close"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.ok()&&l),l},null,null)),(e()(),io(-1,null,["CLOSE"])),(e()(),zr(33,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){e(n,1,0,"royal-modal")},null)}var KT=function(){function e(e,n,t){var l=this;this.modalService=e,this.resourcesService=n,this.armyService=t,this.troops=[],this.modalService.registerForMission().subscribe(function(e){var n=new nE(e.mission,e.time,e.description,e.requiredStrength,e.requiredStrength,e.cost,function(){},[]);l.mission=n,l.troops=l.getTroops()}),this.modalService.registerForCloseModal().subscribe(function(e){e!==mu.MISSION&&e!==mu.ALL||l.modalService.sendMissionResponse(null)})}return e.prototype.ngOnInit=function(){},e.prototype.ok=function(){this.modalService.sendMissionResponse(this.mission),this.modalService.close(mu.MISSION)},e.prototype.cancel=function(){this.modalService.sendMissionResponse(null),this.modalService.close(mu.MISSION)},e.prototype.getMissionName=function(){return Au.prepareMissionName(this.mission.mission)},e.prototype.getCost=function(){return this.mission.cost},e.prototype.getResourceName=function(e){return Au.prepareResourceName(e)},e.prototype.hasResource=function(e,n){return void 0===n&&(n=1),0===this.resourcesService.hasResource(e.key,e.value*n,"Army",!0)},e.prototype.getTroops=function(){return this.armyService.getTroops().filter(function(e){return e[1]>0}).map(function(e){return[e[0],e[1]]})},e.prototype.getTroopName=function(e){return Au.prepareTroopName(e)},e.prototype.evaluateValue=function(e,n){e.target.style.width=e.target.value.toString().length+1+"ch";var t=this.mission.troops.find(function(e){return e[0].troop===n[0].troop});t&&!isNaN(e.target.value)?t[1]=Number(e.target.value):this.mission.troops.push([new eE(n[0].troop,0,n[0].strength,n[0].defense),Number(e.target.value)]),this.calculateMission()},e.prototype.getTotalTroops=function(){var e=0;return this.mission.troops.forEach(function(n){return e+=n[1]}),e},e.prototype.calculateMission=function(){var e=this;this.mission.squadStrength=0,this.mission.squadDefense=0,this.mission.troops.forEach(function(n){e.mission.squadStrength+=n[0].strength*n[1],e.mission.squadDefense+=n[0].defense*n[1]})},e}(),qT=gr({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:1.2em}#buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px;padding:5px}hr[_ngcontent-%COMP%]{border-color:#000;width:90%}.modal[_ngcontent-%COMP%]{width:700px}.missing[_ngcontent-%COMP%]{color:#8b0000}#troops[_ngcontent-%COMP%]{display:flex;flex-direction:row;text-align:center}.troop[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:4px}.troop[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:2ch}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]],data:{}});function $T(e){return so(0,[(e()(),zr(0,0,null,null,4,"span",[],null,null,null,null,null)),(e()(),zr(1,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),zr(2,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(3,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),io(4,null,[": "," / soldier "]))],function(e,n){e(n,3,0,n.component.getResourceName(n.context.$implicit.key),"resources")},function(e,n){e(n,4,0,n.context.$implicit.value)})}function QT(e){return so(0,[(e()(),zr(0,0,null,null,5,"div",[["class","troop"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(2,null,["",""])),(e()(),zr(3,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),zr(4,0,null,null,0,"input",[["type","text"],["value","0"]],null,[[null,"keyup"]],function(e,n,t){var l=!0;return"keyup"===n&&(l=!1!==e.component.evaluateValue(t,e.context.$implicit)&&l),l},null,null)),(e()(),io(5,null,["/",""]))],null,function(e,n){e(n,2,0,n.component.getTroopName(n.context.$implicit[0].troop)),e(n,5,0,n.context.$implicit[1])})}function ZT(e){return so(0,[(e()(),zr(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(1,null,["",""]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.value*n.component.getTotalTroops())})}function XT(e){return so(0,[(e()(),zr(0,0,null,null,1,"span",[["class","missing"]],null,null,null,null,null)),(e()(),io(1,null,["",""]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.value*n.component.getTotalTroops())})}function JT(e){return so(0,[(e()(),zr(0,0,null,null,8,"span",[],null,null,null,null,null)),(e()(),zr(1,0,null,null,7,"div",[["class","icon"]],null,null,null,null,null)),(e()(),zr(2,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(3,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),io(-1,null,[": "])),(e()(),jr(16777216,null,null,1,null,ZT)),ki(6,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,XT)),ki(8,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,3,0,t.getResourceName(n.context.$implicit.key),"resources"),e(n,6,0,t.hasResource(n.context.$implicit,t.getTotalTroops())),e(n,8,0,!t.hasResource(n.context.$implicit,t.getTotalTroops()))},null)}function eI(e){return so(0,[(e()(),zr(0,0,null,null,29,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),io(2,null,["",""])),(e()(),zr(3,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),zr(4,0,null,null,1,"span",[["id","description"]],null,null,null,null,null)),(e()(),io(5,null,["",""])),(e()(),zr(6,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),zr(7,0,null,null,1,"span",[["id","time"]],null,null,null,null,null)),(e()(),io(8,null,["duration: "," days"])),(e()(),zr(9,0,null,null,3,"div",[["id","cost"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,2,null,$T)),ki(11,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null),Mi(0,Ks,[Vl]),(e()(),zr(13,0,null,null,1,"span",[["id","requiredStrength"]],null,null,null,null,null)),(e()(),io(14,null,["squad strength: ",""])),(e()(),zr(15,0,null,null,1,"span",[["id","requiredDefense"]],null,null,null,null,null)),(e()(),io(16,null,["squad defense: ",""])),(e()(),zr(17,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(18,0,null,null,2,"div",[["id","troops"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,QT)),ki(20,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null),(e()(),zr(21,0,null,null,3,"div",[["id","totalCost"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,2,null,JT)),ki(23,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null),Mi(0,Ks,[Vl]),(e()(),zr(25,0,null,null,4,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),zr(26,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.ok()&&l),l},null,null)),(e()(),io(-1,null,["START"])),(e()(),zr(28,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.cancel()&&l),l},null,null)),(e()(),io(-1,null,["CANCEL"]))],function(e,n){var t=n.component;e(n,11,0,hr(n,11,0,Ei(n,12).transform(t.getCost()))),e(n,20,0,t.troops),e(n,23,0,hr(n,23,0,Ei(n,24).transform(t.getCost())))},function(e,n){var t=n.component;e(n,2,0,t.getMissionName()),e(n,5,0,t.mission.description),e(n,8,0,t.mission.time),e(n,14,0,t.mission.squadStrength+" / "+t.mission.requiredStrength),e(n,16,0,t.mission.squadDefense+" / "+t.mission.requiredDefense)})}function nI(e){return so(0,[(e()(),zr(0,0,null,null,5,"app-modal",[["id","mission-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ei(e,1).onKeydownHandler(t)&&l),l},iT,rT)),ki(1,4440064,null,0,lT,[Ln,Pn,Ig],{id:[0,"id"]},null),(e()(),zr(2,0,null,0,2,"div",[["class","modal"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,eI)),ki(4,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),zr(5,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,1,0,"mission-modal"),e(n,4,0,t.mission)},null)}var tI=function(){function e(e,n){this.modalService=e,this.resourcesService=n}return e.prototype.ngOnInit=function(){var e=this;this.modalService.registerForValue().subscribe(function(n){n&&void 0!==n.id&&(e.offer=n,e.value=e.offer.amount,e.inputRef&&(e.inputRef.nativeElement.style.width=e.value.toString().length+1+"ch"))})},e.prototype.ok=function(){this.checkValue(this.value),this.modalService.sendValueInput(Number(this.value)),this.modalService.close(mu.MARKET),this.offer=null},e.prototype.cancel=function(){this.modalService.sendValueInput(null),this.offer=null,this.modalService.close(mu.MARKET)},e.prototype.onKeydownHandler=function(e){document.getElementById("market-modal").style.display&&this.ok()},e.prototype.getResourceName=function(e){return vu[e]},e.prototype.calculatePrice=function(){var e=this.value;return this.offer.amount<e&&(e=this.offer.amount),this.offer.buy?Math.ceil(e/this.offer.amount*this.offer.price):Math.floor(e/this.offer.amount*this.offer.price)},e.prototype.checkValue=function(e){if(e&&!isNaN(e)){if(this.offer.amount>=e)return!0;this.inputRef.nativeElement.value=this.offer.amount,this.value=this.offer.amount}return!1},e.prototype.getResourceAmount=function(){return this.resourcesService.getResource(this.offer.resource).amount},e.prototype.getResourceLimit=function(){return this.resourcesService.getResource(this.offer.resource).limit},e}(),lI=gr({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:1.2em}#title[_ngcontent-%COMP%]{font-size:1.5em;margin-bottom:5px}#buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px;padding:5px}#input[_ngcontent-%COMP%]{display:inline-block;width:3ch;font-size:1em}app-icon[_ngcontent-%COMP%]{display:inline-block;margin:0 3px}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]],data:{}});function rI(e){return so(0,[(e()(),zr(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["buy"]))],null,null)}function iI(e){return so(0,[(e()(),zr(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["sell"]))],null,null)}function oI(e){return so(0,[(e()(),zr(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["BUY"]))],null,null)}function uI(e){return so(0,[(e()(),zr(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["SELL"]))],null,null)}function sI(e){return so(0,[(e()(),zr(0,0,null,null,35,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),io(-1,null,["Market offer"])),(e()(),zr(3,0,null,null,9,"span",[["class","icon"],["id","text"]],null,null,null,null,null)),(e()(),io(-1,null,["How many "])),(e()(),zr(5,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(6,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),io(7,null,["(","/",") would you like to "])),(e()(),jr(16777216,null,null,1,null,rI)),ki(9,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,iI)),ki(11,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),io(-1,null,["?"])),(e()(),zr(13,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(14,0,null,null,12,"span",[["class","icon"]],null,null,null,null,null)),(e()(),zr(15,0,[[1,0],["input",1]],null,5,"input",[["id","input"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var l=!0,r=e.component;return"input"===n&&(l=!1!==Ei(e,16)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ei(e,16).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ei(e,16)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ei(e,16)._compositionEnd(t.target.value)&&l),"ngModelChange"===n&&(l=!1!==r.checkValue(t)&&l),"ngModelChange"===n&&(l=!1!==(r.value=t)&&l),l},null,null)),ki(16,16384,null,0,_f,[Ln,Pn,[2,Cf]],null,null),xi(1024,null,Of,function(e){return[e]},[_f]),ki(18,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),xi(2048,null,Nf,null,[pg]),ki(20,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),io(21,null,["/"," "])),(e()(),zr(22,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(23,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),io(24,null,[" for "," "])),(e()(),zr(25,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(26,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),zr(27,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(28,0,null,null,7,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),zr(29,0,null,null,4,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.ok()&&l),l},null,null)),(e()(),jr(16777216,null,null,1,null,oI)),ki(31,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,uI)),ki(33,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),zr(34,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.cancel()&&l),l},null,null)),(e()(),io(-1,null,["CANCEL"]))],function(e,n){var t=n.component;e(n,6,0,t.getResourceName(t.offer.resource),"resources"),e(n,9,0,t.offer.buy),e(n,11,0,!t.offer.buy),e(n,18,0,t.value),e(n,23,0,t.getResourceName(t.offer.resource),"resources"),e(n,26,0,"coins","resources"),e(n,31,0,t.offer.buy),e(n,33,0,!t.offer.buy)},function(e,n){var t=n.component;e(n,7,0,t.getResourceAmount(),t.getResourceLimit()),e(n,15,0,Ei(n,20).ngClassUntouched,Ei(n,20).ngClassTouched,Ei(n,20).ngClassPristine,Ei(n,20).ngClassDirty,Ei(n,20).ngClassValid,Ei(n,20).ngClassInvalid,Ei(n,20).ngClassPending),e(n,21,0,t.offer.amount),e(n,24,0,t.calculatePrice())})}function aI(e){return so(0,[Qi(671088640,1,{inputRef:0}),(e()(),zr(1,0,null,null,5,"app-modal",[["id","market-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ei(e,2).onKeydownHandler(t)&&l),l},iT,rT)),ki(2,4440064,null,0,lT,[Ln,Pn,Ig],{id:[0,"id"]},null),(e()(),zr(3,0,null,0,2,"div",[["class","modal"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,sI)),ki(5,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),zr(6,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,2,0,"market-modal"),e(n,5,0,t.offer)},null)}var cI=function(){function e(e,n){var t=this;this.modalService=e,this.resourcesService=n,this.modalService.registerForBuilding().subscribe(function(e){t.building=e})}return e.prototype.ngOnInit=function(){},e.prototype.ok=function(){this.modalService.close(mu.WORK_MANAGEMENT)},e.prototype.cancel=function(){this.modalService.close(mu.WORK_MANAGEMENT)},e.prototype.stop=function(){this.building.isWorking()?this.building.stopProduction():this.building.startProduction()||this.modalService.info("Cannot unlock production of "+this.building.getName()+". Number of free workers: "+this.resourcesService.getPeople())},e.prototype.getBuildingName=function(){return Au.prepareBuildingName(this.building.getBuildingType())},e.prototype.getResourceName=function(e){return Au.prepareResourceName(e)},e.prototype.getResource=function(e){return this.resourcesService.getResource(e)},e.prototype.onKeydownHandler=function(){document.getElementById("work-management-modal").style.display&&this.ok()},e}(),pI=gr({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{text-align:center;font-size:1.2em}input[_ngcontent-%COMP%]:not([type]), input[type=text][_ngcontent-%COMP%]{width:5ch}#rules[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}#input[_ngcontent-%COMP%]{flex:0 0 50%;border-right:1px solid #000}#output[_ngcontent-%COMP%]{flex:0 0 50%}"]],data:{}});function hI(e){return so(0,[(e()(),zr(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),io(-1,null,[" working"]))],null,null)}function dI(e){return so(0,[(e()(),zr(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),io(-1,null,[" not working"]))],null,null)}function fI(e){return so(0,[(e()(),zr(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),zr(1,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.stop()&&l),l},null,null)),(e()(),io(-1,null,["Hire worker"]))],null,null)}function gI(e){return so(0,[(e()(),zr(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),zr(1,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.stop()&&l),l},null,null)),(e()(),io(-1,null,["Fire worker"]))],null,null)}function vI(e){return so(0,[(e()(),zr(0,0,null,null,10,"div",[],null,null,null,null,null)),(e()(),zr(1,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(2,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),io(-1,null,[" > "])),(e()(),zr(4,0,null,null,5,"input",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var l=!0;return"input"===n&&(l=!1!==Ei(e,5)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ei(e,5).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ei(e,5)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ei(e,5)._compositionEnd(t.target.value)&&l),"ngModelChange"===n&&(l=!1!==(e.context.$implicit[1]=t)&&l),l},null,null)),ki(5,16384,null,0,_f,[Ln,Pn,[2,Cf]],null,null),xi(1024,null,Of,function(e){return[e]},[_f]),ki(7,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),xi(2048,null,Nf,null,[pg]),ki(9,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),io(10,null,[" ( ","/"," ) "]))],function(e,n){e(n,2,0,n.component.getResourceName(n.context.$implicit[0]),"resources"),e(n,7,0,n.context.$implicit[1])},function(e,n){var t=n.component;e(n,4,0,Ei(n,9).ngClassUntouched,Ei(n,9).ngClassTouched,Ei(n,9).ngClassPristine,Ei(n,9).ngClassDirty,Ei(n,9).ngClassValid,Ei(n,9).ngClassInvalid,Ei(n,9).ngClassPending),e(n,10,0,t.getResource(n.context.$implicit[0]).amount,t.getResource(n.context.$implicit[0]).limit)})}function mI(e){return so(0,[(e()(),zr(0,0,null,null,10,"div",[],null,null,null,null,null)),(e()(),zr(1,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(2,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),io(-1,null,[" < "])),(e()(),zr(4,0,null,null,5,"input",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var l=!0;return"input"===n&&(l=!1!==Ei(e,5)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ei(e,5).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ei(e,5)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ei(e,5)._compositionEnd(t.target.value)&&l),"ngModelChange"===n&&(l=!1!==(e.context.$implicit[1]=t)&&l),l},null,null)),ki(5,16384,null,0,_f,[Ln,Pn,[2,Cf]],null,null),xi(1024,null,Of,function(e){return[e]},[_f]),ki(7,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),xi(2048,null,Nf,null,[pg]),ki(9,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),io(10,null,[" ( ","/"," ) "]))],function(e,n){e(n,2,0,n.component.getResourceName(n.context.$implicit[0]),"resources"),e(n,7,0,n.context.$implicit[1])},function(e,n){var t=n.component;e(n,4,0,Ei(n,9).ngClassUntouched,Ei(n,9).ngClassTouched,Ei(n,9).ngClassPristine,Ei(n,9).ngClassDirty,Ei(n,9).ngClassValid,Ei(n,9).ngClassInvalid,Ei(n,9).ngClassPending),e(n,10,0,t.getResource(n.context.$implicit[0]).amount,t.getResource(n.context.$implicit[0]).limit)})}function yI(e){return so(0,[(e()(),zr(0,0,null,null,37,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),io(2,null,[""," work management"])),(e()(),zr(3,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(4,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),io(-1,null,[" status: "])),(e()(),jr(16777216,null,null,1,null,hI)),ki(7,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,dI)),ki(9,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,fI)),ki(11,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,gI)),ki(13,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),zr(14,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),io(-1,null,[" work management on/off "])),(e()(),zr(16,0,null,null,5,"input",[["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var l=!0,r=e.component;return"change"===n&&(l=!1!==Ei(e,17).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==Ei(e,17).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(r.building.getWorkSettings().enabled=t)&&l),l},null,null)),ki(17,16384,null,0,Rf,[Ln,Pn],null,null),xi(1024,null,Of,function(e){return[e]},[Rf]),ki(19,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),xi(2048,null,Nf,null,[pg]),ki(21,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),zr(22,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(23,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(24,0,null,null,9,"div",[["id","rules"]],null,null,null,null,null)),(e()(),zr(25,0,null,null,3,"div",[["id","input"]],null,null,null,null,null)),(e()(),io(-1,null,[" Input resources: "])),(e()(),jr(16777216,null,null,1,null,vI)),ki(28,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null),(e()(),zr(29,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(30,0,null,null,3,"div",[["id","output"]],null,null,null,null,null)),(e()(),io(-1,null,[" Output resources: "])),(e()(),jr(16777216,null,null,1,null,mI)),ki(33,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null),(e()(),zr(34,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(35,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(36,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.ok()&&l),l},null,null)),(e()(),io(-1,null,["Close"]))],function(e,n){var t=n.component;e(n,7,0,t.building.isWorking()),e(n,9,0,!t.building.isWorking()),e(n,11,0,!t.building.getWorkSettings().enabled&&!t.building.isWorking()),e(n,13,0,!t.building.getWorkSettings().enabled&&t.building.isWorking()),e(n,19,0,t.building.getWorkSettings().enabled),e(n,28,0,t.building.getWorkSettings().inputSettings),e(n,33,0,t.building.getWorkSettings().outputSettings)},function(e,n){e(n,2,0,n.component.getBuildingName()),e(n,16,0,Ei(n,21).ngClassUntouched,Ei(n,21).ngClassTouched,Ei(n,21).ngClassPristine,Ei(n,21).ngClassDirty,Ei(n,21).ngClassValid,Ei(n,21).ngClassInvalid,Ei(n,21).ngClassPending)})}function SI(e){return so(0,[(e()(),zr(0,0,null,null,5,"app-modal",[["id","work-management-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ei(e,1).onKeydownHandler(t)&&l),l},iT,rT)),ki(1,4440064,null,0,lT,[Ln,Pn,Ig],{id:[0,"id"]},null),(e()(),zr(2,0,null,0,2,"div",[["class","modal"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,yI)),ki(4,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),zr(5,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,1,0,"work-management-modal"),e(n,4,0,t.building)},null)}var EI=function(){function e(e,n,t,l){var r=this;this.modalService=e,this.tutorialService=n,this.tickerService=t,this.text="",this.tutorialStages=[],this.currentStep=1,this.modalService.registerForTutorial().subscribe(function(e){r.tutorialStages=e,r.currentStep=1,l.destroyed||l.detectChanges()})}return e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.tutorialService.enableTutorials()},e.prototype.ok=function(){this.currentStep+=1,this.modalService.openTutorialModal(this.tutorialStages[this.currentStep-1].position)},e.prototype.skip=function(){var e=this;this.modalService.open(mu.CONFIRM),this.modalService.setModalText("Are you sure you want to skip tutorial?<br>You can always start it again from the top right settings menu");var n=this.modalService.registerForConfirmation().subscribe(function(t){n.unsubscribe(),t&&(e.modalService.sendTutorialResponse(-1),e.tickerService.start(),e.modalService.close(mu.TUTORIAL))})},e.prototype.finish=function(){this.modalService.sendTutorialResponse(1),this.tickerService.start(),this.modalService.close(mu.TUTORIAL)},e}(),bI=gr({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}"]],data:{}});function OI(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.ok()&&l),l},null,null)),(e()(),io(-1,null,["NEXT"]))],null,null)}function RI(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.finish()&&l),l},null,null)),(e()(),io(-1,null,["FINISH"]))],null,null)}function CI(e){return so(0,[(e()(),zr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.skip()&&l),l},null,null)),(e()(),io(-1,null,["SKIP TUTORIAL"]))],null,null)}function _I(e){return so(0,[(e()(),zr(0,0,null,null,10,null,null,null,null,null,null,null)),(e()(),zr(1,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),io(2,null,["Tutorial ",""])),(e()(),zr(3,0,null,null,0,"span",[["id","text"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),zr(4,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,OI)),ki(6,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,RI)),ki(8,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,CI)),ki(10,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(0,null,null,0))],function(e,n){var t=n.component;e(n,6,0,t.currentStep<t.tutorialStages.length),e(n,8,0,t.currentStep===t.tutorialStages.length),e(n,10,0,t.currentStep!==t.tutorialStages.length)},function(e,n){var t=n.component;e(n,2,0,t.currentStep+"/"+t.tutorialStages.length),e(n,3,0,t.tutorialStages[t.currentStep-1].text)})}function TI(e){return so(0,[(e()(),zr(0,0,null,null,6,"app-modal",[["id","tutorial-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ei(e,1).onKeydownHandler(t)&&l),l},iT,rT)),ki(1,4440064,null,0,lT,[Ln,Pn,Ig],{id:[0,"id"]},null),(e()(),zr(2,0,null,0,3,"div",[["class","modal"]],null,null,null,null,null)),(e()(),zr(3,0,null,null,2,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,_I)),ki(5,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),zr(6,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,1,0,"tutorial-modal"),e(n,5,0,t.tutorialStages.length>0)},null)}var II=function(){function e(e){var n=this;this.modalService=e,this.messageNumber=Vu.length,this.modalService.registerForCloseModal().subscribe(function(e){return n.messageNumber=Vu.length}),this.modalService.registerForOnOpen().subscribe(function(e){e!==mu.CHANGELOG&&e!==mu.ALL||(n.textRef.nativeElement.scrollTop=0)})}return e.prototype.ngOnInit=function(){},e.prototype.ok=function(){this.modalService.close(mu.CHANGELOG)},e.prototype.hasPrevious=function(){return this.messageNumber>1},e.prototype.previous=function(){this.messageNumber>1&&(this.messageNumber-=1)},e.prototype.hasNext=function(){return this.messageNumber<Vu.length},e.prototype.next=function(){this.messageNumber<Vu.length&&(this.messageNumber+=1)},e.prototype.onKeydownHandler=function(e){document.getElementById("changelog-modal").style.display&&this.ok()},e.prototype.getChange=function(){return Vu[this.messageNumber-1]},e}(),AI=gr({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}#buttons[_ngcontent-%COMP%]{width:50%;display:flex;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:0 0 33%}#header[_ngcontent-%COMP%]{font-size:1.5em;font-weight:700;margin-bottom:10px}#text[_ngcontent-%COMP%]{font-size:1.2em;overflow-y:auto}#text[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:0}button[disabled][_ngcontent-%COMP%]{color:#5a5a5a}button[disabled][_ngcontent-%COMP%]:active{background-color:var(--passive-colour);cursor:default}button[disabled][_ngcontent-%COMP%]:hover{cursor:default}"]],data:{}});function wI(e){return so(0,[Qi(402653184,1,{textRef:0}),(e()(),zr(1,0,null,null,14,"app-modal",[["id","changelog-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ei(e,2).onKeydownHandler(t)&&l),l},iT,rT)),ki(2,4440064,null,0,lT,[Ln,Pn,Ig],{id:[0,"id"]},null),(e()(),zr(3,0,null,0,11,"div",[["class","modal"]],null,null,null,null,null)),(e()(),zr(4,0,null,null,10,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),zr(5,0,null,null,0,"span",[["id","header"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),zr(6,0,[[1,0],["text",1]],null,0,"div",[["id","text"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),zr(7,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(8,0,null,null,6,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),zr(9,0,null,null,1,"button",[],[[8,"disabled",0]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.previous()&&l),l},null,null)),(e()(),io(-1,null,["PREVIOUS"])),(e()(),zr(11,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.ok()&&l),l},null,null)),(e()(),io(-1,null,["CLOSE"])),(e()(),zr(13,0,null,null,1,"button",[],[[8,"disabled",0]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.next()&&l),l},null,null)),(e()(),io(-1,null,["NEXT"])),(e()(),zr(15,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){e(n,2,0,"changelog-modal")},function(e,n){var t=n.component;e(n,5,0,t.getChange().VERSION),e(n,6,0,t.getChange().MESSAGE),e(n,9,0,!t.hasPrevious()),e(n,13,0,!t.hasNext())})}var NI=function(){function e(e){var n=this;this.modalService=e,this.modalService.registerForText().subscribe(function(e){return n.text=e})}return e.prototype.ngOnInit=function(){},e.prototype.ok=function(){this.modalService.sendConfirmationResult(!0),this.modalService.close(mu.CONFIRM)},e.prototype.cancel=function(){this.modalService.sendConfirmationResult(!1),this.modalService.close(mu.CONFIRM)},e.prototype.onKeydownHandler=function(e){document.getElementById("confirm-modal").style.display&&this.ok()},e}(),PI=gr({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}#buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px;padding:5px}"]],data:{}});function DI(e){return so(0,[(e()(),zr(0,0,null,null,11,"app-modal",[["id","confirm-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ei(e,1).onKeydownHandler(t)&&l),l},iT,rT)),ki(1,4440064,null,0,lT,[Ln,Pn,Ig],{id:[0,"id"]},null),(e()(),zr(2,0,null,0,8,"div",[["class","modal"]],null,null,null,null,null)),(e()(),zr(3,0,null,null,7,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),zr(4,0,null,null,0,"span",[["id","text"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),zr(5,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(6,0,null,null,4,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),zr(7,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.ok()&&l),l},null,null)),(e()(),io(-1,null,["YES"])),(e()(),zr(9,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.cancel()&&l),l},null,null)),(e()(),io(-1,null,["NO"])),(e()(),zr(11,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){e(n,1,0,"confirm-modal")},function(e,n){e(n,4,0,n.component.text)})}var kI=function(){function e(e){var n=this;this.modalService=e,this.modalService.registerForResourceOptions().subscribe(function(e){n.resourceOptions=gg.clone(e)}),this.modalService.registerForCloseModal().subscribe(function(e){e!==mu.RESOURCE_MANAGEMENT&&e!==mu.ALL||n.modalService.sendResourceOptionsResponse(null)})}return e.prototype.ngOnInit=function(){},e.prototype.ok=function(){this.modalService.sendResourceOptionsResponse(this.resourceOptions),this.modalService.close(mu.RESOURCE_MANAGEMENT)},e.prototype.cancel=function(){this.modalService.sendResourceOptionsResponse(null),this.modalService.close(mu.RESOURCE_MANAGEMENT)},e.prototype.onKeydownHandler=function(e){document.getElementById("resource-management-modal").style.display&&this.ok()},e.prototype.getResourceName=function(){return Au.prepareResourceName(this.resourceOptions.resource)},e}(),MI=gr({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}#title[_ngcontent-%COMP%]{font-size:1.3em;font-weight:700;margin-bottom:20px}input[type=number][_ngcontent-%COMP%]{width:6ch}#exceptions[_ngcontent-%COMP%]{width:100%;text-align:center}#exceptionTitle[_ngcontent-%COMP%]{padding-top:10px;text-align:center}.entry[_ngcontent-%COMP%]{text-align:center}.exceptionEntry[_ngcontent-%COMP%]{display:inline-block;text-align:center;border:1px solid #000;min-width:100px;min-height:50px;padding:4px 4px 0;margin:5px}#buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px;padding:5px}.hidden[_ngcontent-%COMP%]{visibility:hidden}"]],data:{}});function xI(e){return so(0,[(e()(),zr(0,0,null,null,18,"div",[["class","exceptionEntry"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,7,"label",[],[[8,"htmlFor",0]],null,null,null,null)),(e()(),io(2,null,["",""])),(e()(),zr(3,0,null,null,5,"input",[["type","checkbox"]],[[8,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==Ei(e,4).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==Ei(e,4).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(e.context.$implicit.enabled=t)&&l),l},null,null)),ki(4,16384,null,0,Rf,[Ln,Pn],null,null),xi(1024,null,Of,function(e){return[e]},[Rf]),ki(6,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),xi(2048,null,Nf,null,[pg]),ki(8,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),zr(9,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(10,0,null,null,8,"input",[["min","0"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0;return"input"===n&&(l=!1!==Ei(e,11)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ei(e,11).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ei(e,11)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ei(e,11)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==Ei(e,12).onChange(t.target.value)&&l),"input"===n&&(l=!1!==Ei(e,12).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==Ei(e,12).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(e.context.$implicit.reserved=t)&&l),l},null,null)),ki(11,16384,null,0,_f,[Ln,Pn,[2,Cf]],null,null),ki(12,16384,null,0,Af,[Ln,Pn],null,null),xi(1024,null,Of,function(e,n){return[e,n]},[_f,Af]),ki(14,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),xi(2048,null,Nf,null,[pg]),ki(16,16384,null,0,Qf,[[4,Nf]],null,null),ki(17,278528,null,0,ks,[Bl,Vl,Pn,Ln],{ngClass:[0,"ngClass"]},null),lo(18,{hidden:0})],function(e,n){e(n,6,0,n.context.$implicit.enabled),e(n,14,0,n.context.$implicit.reserved);var t=e(n,18,0,!n.context.$implicit.enabled);e(n,17,0,t)},function(e,n){e(n,1,0,Vr(1,"",n.context.$implicit.name,"")),e(n,2,0,n.context.$implicit.name),e(n,3,0,Vr(1,"",n.context.$implicit.name,""),Ei(n,8).ngClassUntouched,Ei(n,8).ngClassTouched,Ei(n,8).ngClassPristine,Ei(n,8).ngClassDirty,Ei(n,8).ngClassValid,Ei(n,8).ngClassInvalid,Ei(n,8).ngClassPending),e(n,10,0,Ei(n,16).ngClassUntouched,Ei(n,16).ngClassTouched,Ei(n,16).ngClassPristine,Ei(n,16).ngClassDirty,Ei(n,16).ngClassValid,Ei(n,16).ngClassInvalid,Ei(n,16).ngClassPending)})}function LI(e){return so(0,[(e()(),zr(0,0,null,null,30,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),io(2,null,[""," management"])),(e()(),zr(3,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(4,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(5,0,null,null,10,"span",[["class","entry"]],null,null,null,null,null)),(e()(),zr(6,0,null,null,1,"label",[["for","reserved"]],null,null,null,null,null)),(e()(),io(-1,null,["reserved amount: "])),(e()(),zr(8,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(9,0,null,null,6,"input",[["id","reserved"],["min","0"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,r=e.component;return"input"===n&&(l=!1!==Ei(e,10)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ei(e,10).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ei(e,10)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ei(e,10)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==Ei(e,11).onChange(t.target.value)&&l),"input"===n&&(l=!1!==Ei(e,11).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==Ei(e,11).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(r.resourceOptions.reserve=t)&&l),l},null,null)),ki(10,16384,null,0,_f,[Ln,Pn,[2,Cf]],null,null),ki(11,16384,null,0,Af,[Ln,Pn],null,null),xi(1024,null,Of,function(e,n){return[e,n]},[_f,Af]),ki(13,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),xi(2048,null,Nf,null,[pg]),ki(15,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),zr(16,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(17,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(18,0,null,null,3,"span",[["id","exceptionTitle"]],null,null,null,null,null)),(e()(),io(-1,null,["Exceptions:"])),(e()(),zr(20,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),io(-1,null,[" (will use it's own limit number if enabled)"])),(e()(),zr(22,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(23,0,null,null,2,"div",[["id","exceptions"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,xI)),ki(25,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null),(e()(),zr(26,0,null,null,4,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),zr(27,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.ok()&&l),l},null,null)),(e()(),io(-1,null,["SAVE"])),(e()(),zr(29,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.cancel()&&l),l},null,null)),(e()(),io(-1,null,["CANCEL"]))],function(e,n){var t=n.component;e(n,13,0,t.resourceOptions.reserve),e(n,25,0,t.resourceOptions.consumers)},function(e,n){e(n,2,0,n.component.getResourceName()),e(n,9,0,Ei(n,15).ngClassUntouched,Ei(n,15).ngClassTouched,Ei(n,15).ngClassPristine,Ei(n,15).ngClassDirty,Ei(n,15).ngClassValid,Ei(n,15).ngClassInvalid,Ei(n,15).ngClassPending)})}function FI(e){return so(0,[(e()(),zr(0,0,null,null,5,"app-modal",[["id","resource-management-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ei(e,1).onKeydownHandler(t)&&l),l},iT,rT)),ki(1,4440064,null,0,lT,[Ln,Pn,Ig],{id:[0,"id"]},null),(e()(),zr(2,0,null,0,2,"div",[["class","modal"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,LI)),ki(4,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),zr(5,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,1,0,"resource-management-modal"),e(n,4,0,t.resourceOptions)},null)}var UI=function(){function e(e,n){var t=this;this.modalService=e,this.recipeService=n,this.selectedRecipeId=-1,this.modalService.registerForCloseModal().subscribe(function(e){e!==mu.RECIPE&&e!==mu.ALL||(t.selectedRecipeId=-1,t.modalService.sendValueInput(null))}),this.modalService.registerForValue().subscribe(function(e){t.selectedRecipeId=e})}return e.prototype.ngOnInit=function(){},e.prototype.ok=function(){this.modalService.sendValueInput(this.selectedRecipeId),this.modalService.close(mu.RECIPE)},e.prototype.cancel=function(){this.modalService.sendValueInput(null),this.modalService.close(mu.RECIPE)},e.prototype.onKeydownHandler=function(e){document.getElementById("recipe-modal").style.display&&this.ok()},e.prototype.getRecipes=function(){return this.recipeService.getRecipes()},e.prototype.choose=function(e){this.selectedRecipeId=e.id},e}(),HI=gr({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}#buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px;padding:5px}app-recipe[_ngcontent-%COMP%]{font-size:.8em;display:inline-block;width:110px;margin:4px 8px;cursor:pointer}.recipe[_ngcontent-%COMP%]{display:inline-block}.selected[_ngcontent-%COMP%]{border:2px solid #000}"]],data:{}});function GI(e){return so(0,[(e()(),zr(0,0,null,null,4,"div",[["class","recipe"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,3,"app-recipe",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.choose(e.context.$implicit)&&l),l},fm,Zv)),ki(2,278528,null,0,ks,[Bl,Vl,Pn,Ln],{ngClass:[0,"ngClass"]},null),lo(3,{selected:0}),ki(4,4308992,null,0,Qv,[$v,xg],{recipe:[0,"recipe"]},null)],function(e,n){var t=e(n,3,0,n.context.$implicit.id===n.component.selectedRecipeId);e(n,2,0,t),e(n,4,0,n.context.$implicit)},null)}function BI(e){return so(0,[(e()(),zr(0,0,null,null,15,"app-modal",[["id","recipe-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ei(e,1).onKeydownHandler(t)&&l),l},iT,rT)),ki(1,4440064,null,0,lT,[Ln,Pn,Ig],{id:[0,"id"]},null),(e()(),zr(2,0,null,0,12,"div",[["class","modal"]],null,null,null,null,null)),(e()(),zr(3,0,null,null,11,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),zr(4,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["Choose recipe"])),(e()(),zr(6,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(7,0,null,null,2,"div",[["id","recipes"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,GI)),ki(9,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null),(e()(),zr(10,0,null,null,4,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),zr(11,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.ok()&&l),l},null,null)),(e()(),io(-1,null,["CONFIRM"])),(e()(),zr(13,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.cancel()&&l),l},null,null)),(e()(),io(-1,null,["CANCEL"])),(e()(),zr(15,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,1,0,"recipe-modal"),e(n,9,0,t.getRecipes())},null)}var VI=function(){function e(e){var n=this;this.modalService=e,this.text="",this.modalService.registerForText().subscribe(function(e){return n.text=e})}return e.prototype.ngOnInit=function(){},e.prototype.ok=function(){this.modalService.close(mu.INFO)},e.prototype.onKeydownHandler=function(e){document.getElementById("info-modal").style.display&&this.ok()},e}(),WI=gr({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:1.2em}"]],data:{}});function jI(e){return so(0,[(e()(),zr(0,0,null,null,8,"app-modal",[["id","info-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ei(e,1).onKeydownHandler(t)&&l),l},iT,rT)),ki(1,4440064,null,0,lT,[Ln,Pn,Ig],{id:[0,"id"]},null),(e()(),zr(2,0,null,0,5,"div",[["class","modal"]],null,null,null,null,null)),(e()(),zr(3,0,null,null,4,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),zr(4,0,null,null,0,"span",[["id","text"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),zr(5,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),zr(6,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.ok()&&l),l},null,null)),(e()(),io(-1,null,["OK"])),(e()(),zr(8,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){e(n,1,0,"info-modal")},function(e,n){e(n,4,0,n.component.text)})}var zI=function(){function e(){}return e.prototype.ngOnInit=function(){},e}(),YI=gr({encapsulation:0,styles:[[""]],data:{}});function KI(e){return so(0,[(e()(),zr(0,0,null,null,1,"app-build-modal",[],null,null,null,CT,RT)),ki(1,114688,null,0,OT,[Ig],null,null),(e()(),zr(2,0,null,null,1,"app-export-modal",[],null,null,null,PT,AT)),ki(3,114688,null,0,IT,[TT,Ig],null,null),(e()(),zr(4,0,null,null,1,"app-import-modal",[],null,null,null,MT,kT)),ki(5,114688,null,0,DT,[TT,Ig],null,null),(e()(),zr(6,0,null,null,1,"app-hard-reset-modal",[],null,null,null,FT,LT)),ki(7,114688,null,0,xT,[Ig,TT],null,null),(e()(),zr(8,0,null,null,1,"app-options-modal",[],null,null,null,GT,HT)),ki(9,114688,null,0,UT,[bg,Ig],null,null),(e()(),zr(10,0,null,null,1,"app-input-modal",[],null,[["document","keydown.enter"]],function(e,n,t){var l=!0;return"document:keydown.enter"===n&&(l=!1!==Ei(e,11).onKeydownHandler(t)&&l),l},WT,VT)),ki(11,114688,null,0,BT,[Ig],null,null),(e()(),zr(12,0,null,null,1,"app-royal-modal",[],null,null,null,YT,zT)),ki(13,114688,null,0,jT,[Dg,Pg,Ig],null,null),(e()(),zr(14,0,null,null,1,"app-mission-modal",[],null,null,null,nI,qT)),ki(15,114688,null,0,KT,[Ig,xg,tE],null,null),(e()(),zr(16,0,null,null,1,"app-market-modal",[],null,[["document","keydown.enter"]],function(e,n,t){var l=!0;return"document:keydown.enter"===n&&(l=!1!==Ei(e,17).onKeydownHandler(t)&&l),l},aI,lI)),ki(17,114688,null,0,tI,[Ig,xg],null,null),(e()(),zr(18,0,null,null,1,"app-work-management-modal",[],null,[["document","keydown.enter"]],function(e,n,t){var l=!0;return"document:keydown.enter"===n&&(l=!1!==Ei(e,19).onKeydownHandler(t)&&l),l},SI,pI)),ki(19,114688,null,0,cI,[Ig,xg],null,null),(e()(),zr(20,0,null,null,1,"app-tutorial-modal",[],null,null,null,TI,bI)),ki(21,4308992,null,0,EI,[Ig,Ag,_T,Rl],null,null),(e()(),zr(22,0,null,null,1,"app-changelog-modal",[],null,[["document","keydown.enter"]],function(e,n,t){var l=!0;return"document:keydown.enter"===n&&(l=!1!==Ei(e,23).onKeydownHandler(t)&&l),l},wI,AI)),ki(23,114688,null,0,II,[Ig],null,null),(e()(),zr(24,0,null,null,1,"app-confirm-modal",[],null,[["document","keydown.enter"]],function(e,n,t){var l=!0;return"document:keydown.enter"===n&&(l=!1!==Ei(e,25).onKeydownHandler(t)&&l),l},DI,PI)),ki(25,114688,null,0,NI,[Ig],null,null),(e()(),zr(26,0,null,null,1,"app-resource-management-modal",[],null,[["document","keydown.enter"]],function(e,n,t){var l=!0;return"document:keydown.enter"===n&&(l=!1!==Ei(e,27).onKeydownHandler(t)&&l),l},FI,MI)),ki(27,114688,null,0,kI,[Ig],null,null),(e()(),zr(28,0,null,null,1,"app-recipe-modal",[],null,[["document","keydown.enter"]],function(e,n,t){var l=!0;return"document:keydown.enter"===n&&(l=!1!==Ei(e,29).onKeydownHandler(t)&&l),l},BI,HI)),ki(29,114688,null,0,UI,[Ig,Zg],null,null),(e()(),zr(30,0,null,null,1,"app-info-modal",[],null,[["document","keydown.enter"]],function(e,n,t){var l=!0;return"document:keydown.enter"===n&&(l=!1!==Ei(e,31).onKeydownHandler(t)&&l),l},jI,WI)),ki(31,114688,null,0,VI,[Ig],null,null)],function(e,n){e(n,1,0),e(n,3,0),e(n,5,0),e(n,7,0),e(n,9,0),e(n,11,0),e(n,13,0),e(n,15,0),e(n,17,0),e(n,19,0),e(n,21,0),e(n,23,0),e(n,25,0),e(n,27,0),e(n,29,0),e(n,31,0)},null)}var qI=function(){function e(e){this.calendarService=e}return e.prototype.ngOnInit=function(){},e.prototype.getDay=function(){return this.calendarService.getDay()},e.prototype.getYear=function(){return this.calendarService.getYear()},e.prototype.getSeason=function(){return Rg[this.calendarService.getSeason()].toLowerCase()},e}(),$I=gr({encapsulation:0,styles:[[""]],data:{}});function QI(e){return so(0,[(e()(),zr(0,0,null,null,1,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),io(1,null,[" day: "," year: "," ","\n"]))],null,function(e,n){var t=n.component;e(n,1,0,t.getDay(),t.getYear(),t.getSeason())})}var ZI=function(){function e(e,n,t,l,r,i,o,u,s){var a=this;this.serializerService=e,this.logService=n,this.modalService=t,this.resourcesService=l,this.weatherService=r,this.optionsService=i,this.gameService=o,this.tickerService=u,this.tutorialService=s,this.paused=!1,this.metric=this.optionsService.getOption(Eg.METRIC),this.optionsSubscription||(this.optionsSubscription=this.optionsService.registerForOptionsChange().subscribe(function(){return a.metric=a.optionsService.getOption(Eg.METRIC)}))}return e.prototype.ngOnInit=function(){var e=this;this.resources=this.resourcesService.getResources(),this.resourcesService.registerForResourcesChange().subscribe(function(n){e.resources=n})},e.prototype.getResourcesValues=function(){return Array.from(this.resources.values())},e.prototype.save=function(){this.serializerService.initSave(),this.logService.log("saved")},e.prototype.load=function(){this.serializerService.initLoad()},e.prototype.import=function(){this.modalService.open(mu.IMPORT)},e.prototype.export=function(){this.modalService.open(mu.EXPORT)},e.prototype.hardReset=function(){this.modalService.open(mu.HARD_RESET)},e.prototype.options=function(){this.modalService.open(mu.OPTIONS)},e.prototype.getTemperature=function(){return this.weatherService.getCurrentTemperature()},e.prototype.getWeather=function(){return this.weatherService.getCurrentWeather()},e.prototype.getWeatherName=function(){return Lu[this.getWeather()].toLowerCase()},e.prototype.calendarEnabled=function(){return this.gameService.isEnabled(Eu.CALENDAR)},e.prototype.softReset=function(){var e=this;this.modalService.open(mu.CONFIRM),this.modalService.setModalText("Are you sure you want to soft reset your progress? <br>You will start from the beginning and all progress except for</br>royal points,<br>permanent royal upgrades<br>and Wonders and their effects will be deleted.");var n=this.modalService.registerForConfirmation().subscribe(function(t){t&&e.serializerService.softReset(),n.unsubscribe()})},e.prototype.isNotCoins=function(e){return e.resource!==vu.COINS},e.prototype.resetTutorials=function(){this.tutorialService.resetTutorials()},e.prototype.pause=function(){this.tickerService.stop(),this.paused=!0},e.prototype.resume=function(){this.tickerService.forceStart(),this.paused=!1},e.prototype.getResourceDescription=function(e){var n="";return e.hasResourceType(_u.CONSUMABLE)&&(n+="nutrition: "+ls.getResource(e.resource).POWER),e.hasResourceType(_u.FUEL)&&(n+="heating energy: "+ls.getResource(e.resource).POWER),""!==n?"<hr>"+n:n},e.prototype.getResourceConsumers=function(e){var n="<b>used by:</b><br>",t=this.resourcesService.getResourceUses(e.resource),l=[];return t&&(t.slice().forEach(function(e){var n=l.find(function(n){return n[0]===e.userName});n?n[1]+=e.value:l.push([e.userName,e.value])}),l.sort(function(e,n){return e[0].localeCompare(n[0])}).forEach(function(e){n+=e[0]+": "+e[1]+"<br>"})),"<b>used by:</b><br>"!==n?"<hr>"+n:""},e.prototype.showCurrentTutorial=function(){this.tutorialService.showCurrentViewTutorial()},e}(),XI=gr({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{font-size:1em;display:flex;height:100%;align-items:center}button[_ngcontent-%COMP%]{width:100%;margin:0;padding:0}#highlighted[_ngcontent-%COMP%], app-calendar[_ngcontent-%COMP%]{display:inline-block}#cog[_ngcontent-%COMP%]{float:right;margin-top:-2px;height:30px;width:30px}#cog[_ngcontent-%COMP%]:hover{cursor:pointer}.dropdown[_ngcontent-%COMP%]{position:absolute;right:4px;display:inline-block}.dropdown-content[_ngcontent-%COMP%]{cursor:pointer;display:none;position:absolute;list-style:none;background-color:#f9f9f9;min-width:150px;right:0;font-size:1.2em;margin-top:25px;padding:0;border:1px solid #000}.dropdown-content[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:pointer}.dropdown[_ngcontent-%COMP%]:hover   .dropdown-content[_ngcontent-%COMP%]{display:block}.dropdown-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background-color:var(--passive-colour);border:1px solid #000;padding:3px}.dropdown-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:var(--active-colour)}#temp[_ngcontent-%COMP%]{padding-top:2px;padding-left:5px}.full[_ngcontent-%COMP%]{font-weight:600}app-calendar[_ngcontent-%COMP%]{display:inline-block;font-size:1.1em}#right[_ngcontent-%COMP%]{position:absolute;display:flex;flex-direction:row;right:40px}app-icon[_ngcontent-%COMP%]{flex:0 0 auto;margin-right:3px}#weather[_ngcontent-%COMP%]{flex:0 0 auto}.icon[_ngcontent-%COMP%]{font-size:1.1em;display:flex;flex-direction:row;align-items:center}hr[_ngcontent-%COMP%]{border-color:#000}.center[_ngcontent-%COMP%]{text-align:center}"]],data:{}});function JI(e){return so(0,[(e()(),zr(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),io(1,null,["","/",""]))],null,function(e,n){var t=n.parent.parent.context.$implicit.getAmount(),l=n.parent.parent.context.$implicit.getLimit();e(n,1,0,t,l)})}function eA(e){return so(0,[(e()(),zr(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),io(1,null,["","/",""]))],null,function(e,n){var t=n.parent.parent.context.$implicit.getAmount(),l=n.parent.parent.context.$implicit.getLimit();e(n,1,0,t,l)})}function nA(e){return so(0,[(e()(),zr(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),io(1,null,["",""]))],null,function(e,n){var t=n.parent.parent.context.$implicit.getAmount();e(n,1,0,t)})}function tA(e){return so(0,[(e()(),zr(0,0,null,null,16,"span",[["class","icon"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,15,"span",[["appTooltip",""],["class","tooltip"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==Ei(e,2).onmousemove(t)&&l),l},null,null)),ki(2,16384,null,0,af,[],{elementId:[0,"elementId"]},null),(e()(),zr(3,0,null,null,4,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),zr(4,0,null,null,1,"div",[["class","center"]],null,null,null,null,null)),(e()(),io(5,null,["",""])),(e()(),zr(6,0,null,null,0,"div",[["class","center"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),zr(7,0,null,null,0,"div",[["class","center"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),zr(8,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(9,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),jr(16777216,null,null,1,null,JI)),ki(11,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,eA)),ki(13,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,nA)),ki(15,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),io(-1,null,[" \xa0"]))],function(e,n){var t=n.component;e(n,2,0,1e5*n.parent.context.$implicit.resource);var l=n.parent.context.$implicit.getName();e(n,9,0,l,"resources");var r=n.parent.context.$implicit.getAmount()===n.parent.context.$implicit.getLimit();e(n,11,0,r);var i=t.isNotCoins(n.parent.context.$implicit)&&n.parent.context.$implicit.getAmount()!==n.parent.context.$implicit.getLimit();e(n,13,0,i),e(n,15,0,!t.isNotCoins(n.parent.context.$implicit))},function(e,n){var t=n.component;e(n,3,0,Vr(1,"",1e5*n.parent.context.$implicit.resource,"")),e(n,5,0,n.parent.context.$implicit.name),e(n,6,0,t.getResourceDescription(n.parent.context.$implicit)),e(n,7,0,t.getResourceConsumers(n.parent.context.$implicit))})}function lA(e){return so(0,[(e()(),zr(0,0,null,null,2,"div",[["id","highlighted"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,tA)),ki(2,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,2,0,n.context.$implicit.visible&&n.context.$implicit.highlighted)},null)}function rA(e){return so(0,[(e()(),zr(0,0,null,null,1,"app-calendar",[],null,null,null,QI,$I)),ki(1,114688,null,0,qI,[_g],null,null)],function(e,n){e(n,1,0)},null)}function iA(e){return so(0,[(e()(),zr(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),io(-1,null,["\xb0C"]))],null,null)}function oA(e){return so(0,[(e()(),zr(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),io(-1,null,["\xb0F"]))],null,null)}function uA(e){return so(0,[(e()(),zr(0,0,null,null,0,"img",[["alt","settings"],["draggable","false"],["id","cog"],["src","assets/settings.svg"]],null,null,null,null,null))],null,null)}function sA(e){return so(0,[(e()(),zr(0,0,null,null,0,"img",[["alt","settings"],["draggable","false"],["id","cog"],["src","assets/pause.svg"]],null,null,null,null,null))],null,null)}function aA(e){return so(0,[(e()(),zr(0,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.pause()&&l),l},null,null)),(e()(),io(-1,null,["pause game"]))],null,null)}function cA(e){return so(0,[(e()(),zr(0,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.resume()&&l),l},null,null)),(e()(),io(-1,null,["resume game"]))],null,null)}function pA(e){return so(0,[Mi(0,$s,[Kl]),(e()(),zr(1,0,null,null,45,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,lA)),ki(3,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null),(e()(),io(-1,null,[" \xa0 "])),(e()(),zr(5,0,null,null,13,"div",[["id","right"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,rA)),ki(7,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),zr(8,0,null,null,10,"span",[["class","icon"],["id","weather"]],null,null,null,null,null)),(e()(),io(-1,null,[" \xa0 "])),(e()(),zr(10,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),ki(11,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),zr(12,0,null,null,6,null,null,null,null,null,null,null)),(e()(),io(13,null,[""," "])),to(14,2),(e()(),jr(16777216,null,null,1,null,iA)),ki(16,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,oA)),ki(18,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),zr(19,0,null,null,27,"div",[["class","dropdown"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,uA)),ki(21,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,sA)),ki(23,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),zr(24,0,null,null,22,"ul",[["class","dropdown-content"]],null,null,null,null,null)),(e()(),zr(25,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.options()&&l),l},null,null)),(e()(),io(-1,null,["options"])),(e()(),zr(27,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.save()&&l),l},null,null)),(e()(),io(-1,null,["save"])),(e()(),zr(29,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.load()&&l),l},null,null)),(e()(),io(-1,null,["load"])),(e()(),zr(31,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.import()&&l),l},null,null)),(e()(),io(-1,null,["import"])),(e()(),zr(33,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.export()&&l),l},null,null)),(e()(),io(-1,null,["export"])),(e()(),jr(16777216,null,null,1,null,aA)),ki(36,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,cA)),ki(38,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),zr(39,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.showCurrentTutorial()&&l),l},null,null)),(e()(),io(-1,null,["show current tab tutorial"])),(e()(),zr(41,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.resetTutorials()&&l),l},null,null)),(e()(),io(-1,null,["reset tutorials"])),(e()(),zr(43,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.softReset()&&l),l},null,null)),(e()(),io(-1,null,["soft reset"])),(e()(),zr(45,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.hardReset()&&l),l},null,null)),(e()(),io(-1,null,["hard reset"]))],function(e,n){var t=n.component;e(n,3,0,t.getResourcesValues()),e(n,7,0,t.calendarEnabled()),e(n,11,0,t.getWeatherName(),"weather"),e(n,16,0,t.metric),e(n,18,0,!t.metric),e(n,21,0,!t.paused),e(n,23,0,t.paused),e(n,36,0,!t.paused),e(n,38,0,t.paused)},function(e,n){var t=n.component,l=hr(n,13,0,e(n,14,0,Ei(n,0),t.getTemperature(),"0.0-1"));e(n,13,0,l)})}var hA=function(){function e(e){this.gameService=e}return e.prototype.ngOnInit=function(){},e.prototype.isWeatherEnabled=function(){return this.gameService.isEnabled(Eu.WEATHER)},e.prototype.isMarketEnabled=function(){return this.gameService.isEnabled(Eu.MARKET)},e.prototype.isManagementEnabled=function(){return this.gameService.isEnabled(Eu.MANAGEMENT)},e.prototype.isResearchEnabled=function(){return this.gameService.isEnabled(Eu.RESEARCH)},e.prototype.isArmyEnabled=function(){return this.gameService.isEnabled(Eu.ARMY)},e.prototype.isReligionEnabled=function(){return this.gameService.isEnabled(Eu.RELIGION)},e.prototype.isCraftingEnabled=function(){return this.gameService.isEnabled(Eu.CRAFTING)},e}(),dA=gr({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{display:flex;height:100%;flex-direction:column}.entry[_ngcontent-%COMP%]{padding:0;margin:0;display:flex;justify-content:center;flex-direction:column;height:5%;text-align:center;border-bottom:2px solid #000;cursor:pointer;text-decoration:none;color:#000;font-size:1em}.entry[_ngcontent-%COMP%]:first-of-type{cursor:default}.entry.active[_ngcontent-%COMP%]{background:var(--active-colour);text-decoration:none}.end[_ngcontent-%COMP%]{margin-top:auto;border-top:2px solid #000;border-bottom:none}"]],data:{}});function fA(e){return so(0,[(e()(),zr(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["routerLink","/management"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==Ei(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),ki(1,671744,[[6,4]],0,Td,[_d,gh,fs],{routerLink:[0,"routerLink"]},null),ki(2,1720320,null,2,Ad,[_d,Pn,Ln,Rl],{routerLinkActive:[0,"routerLinkActive"]},null),Qi(603979776,5,{links:1}),Qi(603979776,6,{linksWithHrefs:1}),(e()(),io(-1,null,["Management"]))],function(e,n){e(n,1,0,"/management"),e(n,2,0,"active")},function(e,n){e(n,0,0,Ei(n,1).target,Ei(n,1).href)})}function gA(e){return so(0,[(e()(),zr(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["routerLink","/crafting"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==Ei(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),ki(1,671744,[[8,4]],0,Td,[_d,gh,fs],{routerLink:[0,"routerLink"]},null),ki(2,1720320,null,2,Ad,[_d,Pn,Ln,Rl],{routerLinkActive:[0,"routerLinkActive"]},null),Qi(603979776,7,{links:1}),Qi(603979776,8,{linksWithHrefs:1}),(e()(),io(-1,null,["Crafting"]))],function(e,n){e(n,1,0,"/crafting"),e(n,2,0,"active")},function(e,n){e(n,0,0,Ei(n,1).target,Ei(n,1).href)})}function vA(e){return so(0,[(e()(),zr(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["routerLink","/research"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==Ei(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),ki(1,671744,[[10,4]],0,Td,[_d,gh,fs],{routerLink:[0,"routerLink"]},null),ki(2,1720320,null,2,Ad,[_d,Pn,Ln,Rl],{routerLinkActive:[0,"routerLinkActive"]},null),Qi(603979776,9,{links:1}),Qi(603979776,10,{linksWithHrefs:1}),(e()(),io(-1,null,["Research"]))],function(e,n){e(n,1,0,"/research"),e(n,2,0,"active")},function(e,n){e(n,0,0,Ei(n,1).target,Ei(n,1).href)})}function mA(e){return so(0,[(e()(),zr(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["routerLink","/market"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==Ei(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),ki(1,671744,[[12,4]],0,Td,[_d,gh,fs],{routerLink:[0,"routerLink"]},null),ki(2,1720320,null,2,Ad,[_d,Pn,Ln,Rl],{routerLinkActive:[0,"routerLinkActive"]},null),Qi(603979776,11,{links:1}),Qi(603979776,12,{linksWithHrefs:1}),(e()(),io(-1,null,["Market"]))],function(e,n){e(n,1,0,"/market"),e(n,2,0,"active")},function(e,n){e(n,0,0,Ei(n,1).target,Ei(n,1).href)})}function yA(e){return so(0,[(e()(),zr(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["routerLink","/army"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==Ei(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),ki(1,671744,[[14,4]],0,Td,[_d,gh,fs],{routerLink:[0,"routerLink"]},null),ki(2,1720320,null,2,Ad,[_d,Pn,Ln,Rl],{routerLinkActive:[0,"routerLinkActive"]},null),Qi(603979776,13,{links:1}),Qi(603979776,14,{linksWithHrefs:1}),(e()(),io(-1,null,["Army"]))],function(e,n){e(n,1,0,"/army"),e(n,2,0,"active")},function(e,n){e(n,0,0,Ei(n,1).target,Ei(n,1).href)})}function SA(e){return so(0,[(e()(),zr(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["routerLink","/religion"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==Ei(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),ki(1,671744,[[16,4]],0,Td,[_d,gh,fs],{routerLink:[0,"routerLink"]},null),ki(2,1720320,null,2,Ad,[_d,Pn,Ln,Rl],{routerLinkActive:[0,"routerLinkActive"]},null),Qi(603979776,15,{links:1}),Qi(603979776,16,{linksWithHrefs:1}),(e()(),io(-1,null,["Religion"]))],function(e,n){e(n,1,0,"/religion"),e(n,2,0,"active")},function(e,n){e(n,0,0,Ei(n,1).target,Ei(n,1).href)})}function EA(e){return so(0,[(e()(),zr(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["routerLink","/weather"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==Ei(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),ki(1,671744,[[18,4]],0,Td,[_d,gh,fs],{routerLink:[0,"routerLink"]},null),ki(2,1720320,null,2,Ad,[_d,Pn,Ln,Rl],{routerLinkActive:[0,"routerLinkActive"]},null),Qi(603979776,17,{links:1}),Qi(603979776,18,{linksWithHrefs:1}),(e()(),io(-1,null,["Weather"]))],function(e,n){e(n,1,0,"/weather"),e(n,2,0,"active")},function(e,n){e(n,0,0,Ei(n,1).target,Ei(n,1).href)})}function bA(e){return so(0,[(e()(),zr(0,0,null,null,33,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,0,"a",[["class","entry"]],null,null,null,null,null)),(e()(),zr(2,0,null,null,5,"a",[["class","entry"],["draggable","false"],["routerLink","/regions"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==Ei(e,3).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),ki(3,671744,[[2,4]],0,Td,[_d,gh,fs],{routerLink:[0,"routerLink"]},null),ki(4,1720320,null,2,Ad,[_d,Pn,Ln,Rl],{routerLinkActive:[0,"routerLinkActive"]},null),Qi(603979776,1,{links:1}),Qi(603979776,2,{linksWithHrefs:1}),(e()(),io(-1,null,["Village"])),(e()(),zr(8,0,null,null,5,"a",[["class","entry"],["draggable","false"],["routerLink","/resources"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==Ei(e,9).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),ki(9,671744,[[4,4]],0,Td,[_d,gh,fs],{routerLink:[0,"routerLink"]},null),ki(10,1720320,null,2,Ad,[_d,Pn,Ln,Rl],{routerLinkActive:[0,"routerLinkActive"]},null),Qi(603979776,3,{links:1}),Qi(603979776,4,{linksWithHrefs:1}),(e()(),io(-1,null,["Resources"])),(e()(),jr(16777216,null,null,1,null,fA)),ki(15,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,gA)),ki(17,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,vA)),ki(19,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,mA)),ki(21,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,yA)),ki(23,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,SA)),ki(25,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,EA)),ki(27,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),zr(28,0,null,null,5,"a",[["class","entry end"],["draggable","false"],["routerLink","/royal"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==Ei(e,29).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),ki(29,671744,[[20,4]],0,Td,[_d,gh,fs],{routerLink:[0,"routerLink"]},null),ki(30,1720320,null,2,Ad,[_d,Pn,Ln,Rl],{routerLinkActive:[0,"routerLinkActive"]},null),Qi(603979776,19,{links:1}),Qi(603979776,20,{linksWithHrefs:1}),(e()(),io(-1,null,["Royal perks"]))],function(e,n){var t=n.component;e(n,3,0,"/regions"),e(n,4,0,"active"),e(n,9,0,"/resources"),e(n,10,0,"active"),e(n,15,0,t.isManagementEnabled()),e(n,17,0,t.isCraftingEnabled()),e(n,19,0,t.isResearchEnabled()),e(n,21,0,t.isMarketEnabled()),e(n,23,0,t.isArmyEnabled()),e(n,25,0,t.isReligionEnabled()),e(n,27,0,t.isWeatherEnabled()),e(n,29,0,"/royal"),e(n,30,0,"active")},function(e,n){e(n,2,0,Ei(n,3).target,Ei(n,3).href),e(n,8,0,Ei(n,9).target,Ei(n,9).href),e(n,28,0,Ei(n,29).target,Ei(n,29).href)})}var OA=function(){function e(e,n){this.logService=e,this.changeDetectorRef=n,this.entries=[],this.logEntryTypes=Og}return e.prototype.ngOnInit=function(){var e=this;this.logService.registerForLogs().subscribe(function(){e.entries=e.logService.getEntries(),e.scrollToBottom()}),this.entries=this.logService.getEntries(),this.scrollToBottom()},e.prototype.clearLogs=function(){this.logService.clearEntries()},e.prototype.scrollToBottom=function(){var e=this.scrollRef.nativeElement,n=e.scrollHeight-e.clientHeight<=e.scrollTop+25;this.changeDetectorRef.destroyed||this.changeDetectorRef.detectChanges(),n&&(e.scrollTop=e.scrollHeight)},e}(),RA=gr({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;max-height:100%}#clear-button[_ngcontent-%COMP%]{float:right}#log[_ngcontent-%COMP%]{height:100%;overflow-y:scroll;font-size:.8em}.title[_ngcontent-%COMP%]{border-bottom:1px solid #000;text-align:center;font-weight:700;font-size:1.1em}#title-text[_ngcontent-%COMP%]{display:inline-block;margin-left:20px;margin-top:3px}ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}li[_ngcontent-%COMP%]{padding-left:.5%;padding-bottom:.4%}.date[_ngcontent-%COMP%]{font-weight:bolder}.warning[_ngcontent-%COMP%]{color:#8b0000}.success[_ngcontent-%COMP%]{color:#006400}.mystical[_ngcontent-%COMP%]{color:#00008b}"]],data:{}});function CA(e){return so(0,[(e()(),zr(0,0,null,null,3,"span",[],null,null,null,null,null)),(e()(),zr(1,0,null,null,1,"span",[["class","date"]],null,null,null,null,null)),(e()(),io(2,null,["day ",":"])),(e()(),zr(3,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.day),e(n,3,0," "+n.parent.context.$implicit.message)})}function _A(e){return so(0,[(e()(),zr(0,0,null,null,3,"span",[["class","success"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,1,"span",[["class","date"]],null,null,null,null,null)),(e()(),io(2,null,["day ",":"])),(e()(),zr(3,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.day),e(n,3,0," "+n.parent.context.$implicit.message)})}function TA(e){return so(0,[(e()(),zr(0,0,null,null,3,"span",[["class","warning"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,1,"span",[["class","date"]],null,null,null,null,null)),(e()(),io(2,null,["day ",":"])),(e()(),zr(3,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.day),e(n,3,0," "+n.parent.context.$implicit.message)})}function IA(e){return so(0,[(e()(),zr(0,0,null,null,3,"span",[["class","mystical"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,1,"span",[["class","date"]],null,null,null,null,null)),(e()(),io(2,null,["day ",":"])),(e()(),zr(3,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.day),e(n,3,0," "+n.parent.context.$implicit.message)})}function AA(e){return so(0,[(e()(),zr(0,0,null,null,10,"li",[],null,null,null,null,null)),(e()(),zr(1,0,null,null,9,"div",[],null,null,null,null,null)),ki(2,16384,null,0,Bs,[],{ngSwitch:[0,"ngSwitch"]},null),(e()(),jr(16777216,null,null,1,null,CA)),ki(4,278528,null,0,Vs,[bl,ht,Bs],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),jr(16777216,null,null,1,null,_A)),ki(6,278528,null,0,Vs,[bl,ht,Bs],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),jr(16777216,null,null,1,null,TA)),ki(8,278528,null,0,Vs,[bl,ht,Bs],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),jr(16777216,null,null,1,null,IA)),ki(10,278528,null,0,Vs,[bl,ht,Bs],{ngSwitchCase:[0,"ngSwitchCase"]},null)],function(e,n){var t=n.component;e(n,2,0,n.context.$implicit.type),e(n,4,0,t.logEntryTypes.LOG),e(n,6,0,t.logEntryTypes.SUCCESS),e(n,8,0,t.logEntryTypes.WARNING),e(n,10,0,t.logEntryTypes.MYSTICAL)},null)}function wA(e){return so(0,[Qi(402653184,1,{scrollRef:0}),(e()(),zr(1,0,null,null,9,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),zr(2,0,null,null,4,"div",[["class","title"]],null,null,null,null,null)),(e()(),zr(3,0,null,null,1,"span",[["id","title-text"]],null,null,null,null,null)),(e()(),io(-1,null,["Log"])),(e()(),zr(5,0,null,null,1,"button",[["id","clear-button"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.clearLogs()&&l),l},null,null)),(e()(),io(-1,null,["clear"])),(e()(),zr(7,0,[[1,0],["scroll",1]],null,3,"div",[["id","log"]],null,null,null,null,null)),(e()(),zr(8,0,null,null,2,"ul",[],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,AA)),ki(10,278528,null,0,xs,[bl,ht,Bl],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,10,0,n.component.entries)},null)}var NA=function(){function e(e,n){this.gameService=e,this.optionsService=n,this.gameName=Gu.gameName,this.version=Gu.versionString}return e.prototype.ngOnInit=function(){},e.prototype.showDevNotes=function(){this.gameService.showDevNotes()},e.prototype.getSound=function(){return this.optionsService.getOption(Eg.SOUND)},e.prototype.toggleSound=function(){this.optionsService.setOption(Eg.SOUND,!this.optionsService.getOption(Eg.SOUND))},e}(),PA=gr({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:row;font-size:1.2em}.first[_ngcontent-%COMP%]{flex:0 0 3%;height:30px;cursor:pointer}#center[_ngcontent-%COMP%]{flex:0 0 94%;display:flex;justify-content:center;align-items:center}#dev[_ngcontent-%COMP%]{flex:0 0 3%;height:30px;cursor:pointer}img[_ngcontent-%COMP%]{width:30px}"]],data:{}});function DA(e){return so(0,[(e()(),zr(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),zr(1,0,null,null,0,"img",[["src","assets/sound_on.svg"],["title","turn off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleSound()&&l),l},null,null))],null,null)}function kA(e){return so(0,[(e()(),zr(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),zr(1,0,null,null,0,"img",[["src","assets/sound_off.svg"],["title","turn on"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleSound()&&l),l},null,null))],null,null)}function MA(e){return so(0,[(e()(),zr(0,0,null,null,8,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),jr(16777216,null,null,1,null,DA)),ki(2,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,kA)),ki(4,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),zr(5,0,null,null,2,"div",[["id","center"]],null,null,null,null,null)),(e()(),zr(6,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(7,null,[""," v",""])),(e()(),zr(8,0,null,null,0,"img",[["id","dev"],["src","assets/dev.svg"],["title","dev notes"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.showDevNotes()&&l),l},null,null))],function(e,n){var t=n.component;e(n,2,0,t.getSound()),e(n,4,0,!t.getSound())},function(e,n){var t=n.component;e(n,7,0,t.gameName,t.version)})}var xA=function(){function e(e,n,t,l,r,i,o,u,s,a,c,p,h,d){this.gameService=e,this.randomService=n,this.optionsService=t,this.tickerService=l,this.serializerService=r,this.resourceService=i,this.techService=o,this.logService=u,this.seaService=s,this.mountainsService=a,this.fortService=c,this.forestService=p,this.fieldService=h,this.villageService=d}return e.prototype.ngOnInit=function(){this.serializerService.hasSave()?this.serializerService.initLoad():this.initGame(),this.tickerService.start()},e.prototype.initGame=function(){this.gameService.init(),this.optionsService.init(),this.resourceService.init(),this.villageService.init(),this.fortService.init(),this.forestService.init(),this.fieldService.init(),this.mountainsService.init(),this.seaService.init()},e.prototype.exitSave=function(e){this.serializerService.initSave()},e}(),LA=gr({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{position:relative;display:grid;height:100%;max-height:100%;grid-template-columns:11% auto 20%;grid-template-rows:5% auto 4%;border:1px solid #000;background:var(--background-clour);background-image:url(old_parchment.e3e77af15bdb5cd39bab.jpg);background-size:100% 100%}#footer[_ngcontent-%COMP%], #header[_ngcontent-%COMP%]{grid-column-start:1;grid-column-end:4;border:1px solid #000;overflow:hidden}#left-menu[_ngcontent-%COMP%]{grid-column-start:1;grid-column-end:2;border:1px solid #000;overflow:hidden}#center[_ngcontent-%COMP%]{grid-column-start:2;grid-column-end:3;border:1px solid #000;overflow:hidden}#screen[_ngcontent-%COMP%]{height:100%}#right-menu[_ngcontent-%COMP%]{grid-column-start:3;grid-column-end:4;border:1px solid #000;overflow:hidden}.asset[_ngcontent-%COMP%]{display:none}"]],data:{}});function FA(e){return so(0,[(e()(),zr(0,0,null,null,119,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),zr(1,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/buff.svg"]],null,null,null,null,null)),(e()(),zr(2,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/complex_management_off_off.svg"]],null,null,null,null,null)),(e()(),zr(3,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/complex_management_off_on.svg"]],null,null,null,null,null)),(e()(),zr(4,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/complex_management_on_off.svg"]],null,null,null,null,null)),(e()(),zr(5,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/complex_management_on_on.svg"]],null,null,null,null,null)),(e()(),zr(6,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/details.svg"]],null,null,null,null,null)),(e()(),zr(7,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/dev.svg"]],null,null,null,null,null)),(e()(),zr(8,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/eye.svg"]],null,null,null,null,null)),(e()(),zr(9,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/foresight.svg"]],null,null,null,null,null)),(e()(),zr(10,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/forest.svg"]],null,null,null,null,null)),(e()(),zr(11,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/gear.svg"]],null,null,null,null,null)),(e()(),zr(12,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/gear_off.svg"]],null,null,null,null,null)),(e()(),zr(13,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/hammer.svg"]],null,null,null,null,null)),(e()(),zr(14,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/kred.png"]],null,null,null,null,null)),(e()(),zr(15,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/land.svg"]],null,null,null,null,null)),(e()(),zr(16,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/manage.svg"]],null,null,null,null,null)),(e()(),zr(17,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/mountains.svg"]],null,null,null,null,null)),(e()(),zr(18,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/population.svg"]],null,null,null,null,null)),(e()(),zr(19,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/question_mark.svg"]],null,null,null,null,null)),(e()(),zr(20,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/settings.svg"]],null,null,null,null,null)),(e()(),zr(21,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/tick.svg"]],null,null,null,null,null)),(e()(),zr(22,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/time.svg"]],null,null,null,null,null)),(e()(),zr(23,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/trade.svg"]],null,null,null,null,null)),(e()(),zr(24,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/upgrade.svg"]],null,null,null,null,null)),(e()(),zr(25,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/village.svg"]],null,null,null,null,null)),(e()(),zr(26,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/religion/faith.svg"]],null,null,null,null,null)),(e()(),zr(27,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/religion/faith_shield.svg"]],null,null,null,null,null)),(e()(),zr(28,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/weather/clouds.svg"]],null,null,null,null,null)),(e()(),zr(29,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/weather/rain.svg"]],null,null,null,null,null)),(e()(),zr(30,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/weather/snow.svg"]],null,null,null,null,null)),(e()(),zr(31,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/weather/storm.svg"]],null,null,null,null,null)),(e()(),zr(32,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/weather/sun.svg"]],null,null,null,null,null)),(e()(),zr(33,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/weather/wind.svg"]],null,null,null,null,null)),(e()(),zr(34,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/army/attack.svg"]],null,null,null,null,null)),(e()(),zr(35,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/army/barracks.svg"]],null,null,null,null,null)),(e()(),zr(36,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/army/defense.svg"]],null,null,null,null,null)),(e()(),zr(37,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/army/invasion.svg"]],null,null,null,null,null)),(e()(),zr(38,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/army/recruit.svg"]],null,null,null,null,null)),(e()(),zr(39,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/happiness/angry.svg"]],null,null,null,null,null)),(e()(),zr(40,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/happiness/happy.svg"]],null,null,null,null,null)),(e()(),zr(41,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/happiness/neutral.svg"]],null,null,null,null,null)),(e()(),zr(42,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/happiness/overjoyed.svg"]],null,null,null,null,null)),(e()(),zr(43,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/happiness/sad.svg"]],null,null,null,null,null)),(e()(),zr(44,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/apple.svg"]],null,null,null,null,null)),(e()(),zr(45,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/barley.svg"]],null,null,null,null,null)),(e()(),zr(46,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/beer.svg"]],null,null,null,null,null)),(e()(),zr(47,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/berry.svg"]],null,null,null,null,null)),(e()(),zr(48,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/bow.svg"]],null,null,null,null,null)),(e()(),zr(49,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/bread.svg"]],null,null,null,null,null)),(e()(),zr(50,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/bronze.svg"]],null,null,null,null,null)),(e()(),zr(51,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/brushwood.svg"]],null,null,null,null,null)),(e()(),zr(52,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/chicken.svg"]],null,null,null,null,null)),(e()(),zr(53,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/clothes.svg"]],null,null,null,null,null)),(e()(),zr(54,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/coal.svg"]],null,null,null,null,null)),(e()(),zr(55,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/coins.svg"]],null,null,null,null,null)),(e()(),zr(56,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/cooked_meat.svg"]],null,null,null,null,null)),(e()(),zr(57,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/copper.svg"]],null,null,null,null,null)),(e()(),zr(58,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/copper_ore.svg"]],null,null,null,null,null)),(e()(),zr(59,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/cotton.svg"]],null,null,null,null,null)),(e()(),zr(60,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/cow.svg"]],null,null,null,null,null)),(e()(),zr(61,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/cut_stone.svg"]],null,null,null,null,null)),(e()(),zr(62,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/egg.svg"]],null,null,null,null,null)),(e()(),zr(63,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/fabric.svg"]],null,null,null,null,null)),(e()(),zr(64,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/fish.svg"]],null,null,null,null,null)),(e()(),zr(65,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/flour.svg"]],null,null,null,null,null)),(e()(),zr(66,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/food.svg"]],null,null,null,null,null)),(e()(),zr(67,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/fuel.svg"]],null,null,null,null,null)),(e()(),zr(68,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/fur.svg"]],null,null,null,null,null)),(e()(),zr(69,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/gold.svg"]],null,null,null,null,null)),(e()(),zr(70,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/gold_ore.svg"]],null,null,null,null,null)),(e()(),zr(71,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/grape.svg"]],null,null,null,null,null)),(e()(),zr(72,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/hay.svg"]],null,null,null,null,null)),(e()(),zr(73,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/hop.svg"]],null,null,null,null,null)),(e()(),zr(74,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/horse.svg"]],null,null,null,null,null)),(e()(),zr(75,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/iron.svg"]],null,null,null,null,null)),(e()(),zr(76,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/iron_ore.svg"]],null,null,null,null,null)),(e()(),zr(77,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/leather.svg"]],null,null,null,null,null)),(e()(),zr(78,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/leather_armor.svg"]],null,null,null,null,null)),(e()(),zr(79,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/light_armor.svg"]],null,null,null,null,null)),(e()(),zr(80,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/heavy_armor.svg"]],null,null,null,null,null)),(e()(),zr(81,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/log.svg"]],null,null,null,null,null)),(e()(),zr(82,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/meat.svg"]],null,null,null,null,null)),(e()(),zr(83,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/meat_soup.svg"]],null,null,null,null,null)),(e()(),zr(84,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/milk.svg"]],null,null,null,null,null)),(e()(),zr(85,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/mushroom.svg"]],null,null,null,null,null)),(e()(),zr(86,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/pig.svg"]],null,null,null,null,null)),(e()(),zr(87,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/plank.svg"]],null,null,null,null,null)),(e()(),zr(88,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/silver.svg"]],null,null,null,null,null)),(e()(),zr(89,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/silver_ore.svg"]],null,null,null,null,null)),(e()(),zr(90,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/steel.svg"]],null,null,null,null,null)),(e()(),zr(91,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/stone.svg"]],null,null,null,null,null)),(e()(),zr(92,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/stone_axe.svg"]],null,null,null,null,null)),(e()(),zr(93,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/stone_hammer.svg"]],null,null,null,null,null)),(e()(),zr(94,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/stone_pickaxe.svg"]],null,null,null,null,null)),(e()(),zr(95,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/stone_shovel.svg"]],null,null,null,null,null)),(e()(),zr(96,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/stone_spear.svg"]],null,null,null,null,null)),(e()(),zr(97,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/sword.svg"]],null,null,null,null,null)),(e()(),zr(98,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/tin.svg"]],null,null,null,null,null)),(e()(),zr(99,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/tin_ore.svg"]],null,null,null,null,null)),(e()(),zr(100,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/vegetable_soup.svg"]],null,null,null,null,null)),(e()(),zr(101,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/wheat.svg"]],null,null,null,null,null)),(e()(),zr(102,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/wine.svg"]],null,null,null,null,null)),(e()(),zr(103,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/wooden_shield.svg"]],null,null,null,null,null)),(e()(),zr(104,0,null,null,2,"div",[["id","header"]],null,null,null,null,null)),(e()(),zr(105,0,null,null,1,"app-header",[],null,null,null,pA,XI)),ki(106,114688,null,0,ZI,[TT,Tg,Ig,xg,ob,bg,wg,_T,Ag],null,null),(e()(),zr(107,0,null,null,2,"div",[["id","left-menu"]],null,null,null,null,null)),(e()(),zr(108,0,null,null,1,"app-left-menu",[],null,null,null,bA,dA)),ki(109,114688,null,0,hA,[wg],null,null),(e()(),zr(110,0,null,null,3,"div",[["id","center"]],null,null,null,null,null)),(e()(),zr(111,0,null,null,2,"div",[["id","screen"]],null,null,null,null,null)),(e()(),zr(112,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),ki(113,212992,null,0,Pd,[Nd,bl,Tn,[8,null],Rl],null,null),(e()(),zr(114,0,null,null,2,"div",[["id","right-menu"]],null,null,null,null,null)),(e()(),zr(115,0,null,null,1,"app-log",[],null,null,null,wA,RA)),ki(116,114688,null,0,OA,[Tg,Rl],null,null),(e()(),zr(117,0,null,null,2,"div",[["id","footer"]],null,null,null,null,null)),(e()(),zr(118,0,null,null,1,"app-footer",[],null,null,null,MA,PA)),ki(119,114688,null,0,NA,[wg,bg],null,null)],function(e,n){e(n,106,0),e(n,109,0),e(n,113,0),e(n,116,0),e(n,119,0)},null)}var UA=gr({encapsulation:0,styles:[["#IEwrapper[_ngcontent-%COMP%]{border:1px solid #000;background:#919191;font-size:3em;height:100%;max-height:100%;display:flex;justify-content:center;align-items:center}#IEwrapper[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center}"]],data:{}});function HA(e){return so(0,[(e()(),zr(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),zr(1,0,null,null,1,"app-modals",[],null,null,null,KI,YI)),ki(2,114688,null,0,zI,[],null,null),(e()(),zr(3,0,null,null,1,"app-game",[],null,[["window","beforeunload"]],function(e,n,t){var l=!0;return"window:beforeunload"===n&&(l=!1!==Ei(e,4).exitSave(t)&&l),l},FA,LA)),ki(4,114688,null,0,xA,[wg,ku,bg,_T,TT,xg,ES,Tg,i_,EC,SE,MR,nC,sS],null,null)],function(e,n){e(n,2,0),e(n,4,0)},null)}function GA(e){return so(0,[(e()(),zr(0,0,null,null,7,null,null,null,null,null,null,null)),(e()(),zr(1,0,null,null,6,"div",[["id","IEwrapper"]],null,null,null,null,null)),(e()(),zr(2,0,null,null,5,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["Internet Explorer is not supported."])),(e()(),zr(4,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),io(-1,null,["Please use Firefox, Chrome, Safari"])),(e()(),zr(6,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),io(-1,null,["or Edge."]))],null,null)}function BA(e){return so(0,[(e()(),jr(16777216,null,null,1,null,HA)),ki(1,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null),(e()(),jr(16777216,null,null,1,null,GA)),ki(3,16384,null,0,Fs,[bl,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,!t.isIE()),e(n,3,0,t.isIE())},null)}function VA(e){return so(0,[(e()(),zr(0,0,null,null,1,"app-root",[],null,[["document","contextmenu"]],function(e,n,t){var l=!0;return"document:contextmenu"===n&&(l=!1!==Ei(e,1).catchContextMenu(t)&&l),l},BA,UA)),ki(1,49152,null,0,ps,[],null,null)],null,null)}var WA=ai("app-root",ps,VA,{},{},[]),jA=function(){return function(){}}(),zA=function(){return function(){}}(),YA="*";function KA(e,n){return void 0===n&&(n=null),{type:2,steps:e,options:n}}function qA(e){return{type:6,styles:e,offset:null}}function $A(e){Promise.resolve(null).then(e)}var QA=function(){function e(e,n){void 0===e&&(e=0),void 0===n&&(n=0),this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=e+n}return e.prototype._onFinish=function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(e){return e()}),this._onDoneFns=[])},e.prototype.onStart=function(e){this._onStartFns.push(e)},e.prototype.onDone=function(e){this._onDoneFns.push(e)},e.prototype.onDestroy=function(e){this._onDestroyFns.push(e)},e.prototype.hasStarted=function(){return this._started},e.prototype.init=function(){},e.prototype.play=function(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0},e.prototype.triggerMicrotask=function(){var e=this;$A(function(){return e._onFinish()})},e.prototype._onStart=function(){this._onStartFns.forEach(function(e){return e()}),this._onStartFns=[]},e.prototype.pause=function(){},e.prototype.restart=function(){},e.prototype.finish=function(){this._onFinish()},e.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(function(e){return e()}),this._onDestroyFns=[])},e.prototype.reset=function(){},e.prototype.setPosition=function(e){},e.prototype.getPosition=function(){return 0},e.prototype.triggerCallback=function(e){var n="start"==e?this._onStartFns:this._onDoneFns;n.forEach(function(e){return e()}),n.length=0},e}(),ZA=function(){function e(e){var n=this;this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;var t=0,l=0,r=0,i=this.players.length;0==i?$A(function(){return n._onFinish()}):this.players.forEach(function(e){e.onDone(function(){++t==i&&n._onFinish()}),e.onDestroy(function(){++l==i&&n._onDestroy()}),e.onStart(function(){++r==i&&n._onStart()})}),this.totalTime=this.players.reduce(function(e,n){return Math.max(e,n.totalTime)},0)}return e.prototype._onFinish=function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(e){return e()}),this._onDoneFns=[])},e.prototype.init=function(){this.players.forEach(function(e){return e.init()})},e.prototype.onStart=function(e){this._onStartFns.push(e)},e.prototype._onStart=function(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(function(e){return e()}),this._onStartFns=[])},e.prototype.onDone=function(e){this._onDoneFns.push(e)},e.prototype.onDestroy=function(e){this._onDestroyFns.push(e)},e.prototype.hasStarted=function(){return this._started},e.prototype.play=function(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(function(e){return e.play()})},e.prototype.pause=function(){this.players.forEach(function(e){return e.pause()})},e.prototype.restart=function(){this.players.forEach(function(e){return e.restart()})},e.prototype.finish=function(){this._onFinish(),this.players.forEach(function(e){return e.finish()})},e.prototype.destroy=function(){this._onDestroy()},e.prototype._onDestroy=function(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(function(e){return e.destroy()}),this._onDestroyFns.forEach(function(e){return e()}),this._onDestroyFns=[])},e.prototype.reset=function(){this.players.forEach(function(e){return e.reset()}),this._destroyed=!1,this._finished=!1,this._started=!1},e.prototype.setPosition=function(e){var n=e*this.totalTime;this.players.forEach(function(e){var t=e.totalTime?Math.min(1,n/e.totalTime):1;e.setPosition(t)})},e.prototype.getPosition=function(){var e=0;return this.players.forEach(function(n){var t=n.getPosition();e=Math.min(t,e)}),e},e.prototype.beforeDestroy=function(){this.players.forEach(function(e){e.beforeDestroy&&e.beforeDestroy()})},e.prototype.triggerCallback=function(e){var n="start"==e?this._onStartFns:this._onDoneFns;n.forEach(function(e){return e()}),n.length=0},e}(),XA="!";function JA(){return"undefined"!=typeof process}function ew(e){switch(e.length){case 0:return new QA;case 1:return e[0];default:return new ZA(e)}}function nw(e,n,t,l,r,i){void 0===r&&(r={}),void 0===i&&(i={});var o=[],u=[],s=-1,a=null;if(l.forEach(function(e){var t=e.offset,l=t==s,c=l&&a||{};Object.keys(e).forEach(function(t){var l=t,u=e[t];if("offset"!==t)switch(l=n.normalizePropertyName(l,o),u){case XA:u=r[t];break;case YA:u=i[t];break;default:u=n.normalizeStyleValue(t,l,u,o)}c[l]=u}),l||u.push(c),a=c,s=t}),o.length)throw new Error("Unable to animate due to the following errors:\n - "+o.join("\n - "));return u}function tw(e,n,t,l){switch(n){case"start":e.onStart(function(){return l(t&&lw(t,"start",e))});break;case"done":e.onDone(function(){return l(t&&lw(t,"done",e))});break;case"destroy":e.onDestroy(function(){return l(t&&lw(t,"destroy",e))})}}function lw(e,n,t){var l=t.totalTime,r=rw(e.element,e.triggerName,e.fromState,e.toState,n||e.phaseName,null==l?e.totalTime:l,!!t.disabled),i=e._data;return null!=i&&(r._data=i),r}function rw(e,n,t,l,r,i,o){return void 0===r&&(r=""),void 0===i&&(i=0),{element:e,triggerName:n,fromState:t,toState:l,phaseName:r,totalTime:i,disabled:!!o}}function iw(e,n,t){var l;return e instanceof Map?(l=e.get(n))||e.set(n,l=t):(l=e[n])||(l=e[n]=t),l}function ow(e){var n=e.indexOf(":");return[e.substring(1,n),e.substr(n+1)]}var uw=function(e,n){return!1},sw=function(e,n){return!1},aw=function(e,n,t){return[]},cw=JA();if(cw||"undefined"!=typeof Element){if(uw=function(e,n){return e.contains(n)},cw||Element.prototype.matches)sw=function(e,n){return e.matches(n)};else{var pw=Element.prototype,hw=pw.matchesSelector||pw.mozMatchesSelector||pw.msMatchesSelector||pw.oMatchesSelector||pw.webkitMatchesSelector;hw&&(sw=function(e,n){return hw.apply(e,[n])})}aw=function(e,n,t){var l=[];if(t)l.push.apply(l,c(e.querySelectorAll(n)));else{var r=e.querySelector(n);r&&l.push(r)}return l}}var dw=null,fw=!1,gw=sw,vw=uw,mw=aw,yw=function(){function e(){}return e.prototype.validateStyleProperty=function(e){return function(e){dw||(dw=("undefined"!=typeof document?document.body:null)||{},fw=!!dw.style&&"WebkitAppearance"in dw.style);var n=!0;return dw.style&&!function(e){return"ebkit"==e.substring(1,6)}(e)&&!(n=e in dw.style)&&fw&&(n="Webkit"+e.charAt(0).toUpperCase()+e.substr(1)in dw.style),n}(e)},e.prototype.matchesElement=function(e,n){return gw(e,n)},e.prototype.containsElement=function(e,n){return vw(e,n)},e.prototype.query=function(e,n,t){return mw(e,n,t)},e.prototype.computeStyle=function(e,n,t){return t||""},e.prototype.animate=function(e,n,t,l,r,i,o){return void 0===i&&(i=[]),new QA(t,l)},e}(),Sw=function(){function e(){}return e.NOOP=new yw,e}(),Ew=1e3;function bw(e){if("number"==typeof e)return e;var n=e.match(/^(-?[\.\d]+)(m?s)/);return!n||n.length<2?0:Ow(parseFloat(n[1]),n[2])}function Ow(e,n){switch(n){case"s":return e*Ew;default:return e}}function Rw(e,n,t){return e.hasOwnProperty("duration")?e:function(e,n,t){var l,r=0,i="";if("string"==typeof e){var o=e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===o)return n.push('The provided timing value "'+e+'" is invalid.'),{duration:0,delay:0,easing:""};l=Ow(parseFloat(o[1]),o[2]);var u=o[3];null!=u&&(r=Ow(parseFloat(u),o[4]));var s=o[5];s&&(i=s)}else l=e;if(!t){var a=!1,c=n.length;l<0&&(n.push("Duration values below 0 are not allowed for this animation step."),a=!0),r<0&&(n.push("Delay values below 0 are not allowed for this animation step."),a=!0),a&&n.splice(c,0,'The provided timing value "'+e+'" is invalid.')}return{duration:l,delay:r,easing:i}}(e,n,t)}function Cw(e,n){return void 0===n&&(n={}),Object.keys(e).forEach(function(t){n[t]=e[t]}),n}function _w(e,n,t){if(void 0===t&&(t={}),n)for(var l in e)t[l]=e[l];else Cw(e,t);return t}function Tw(e,n,t){return t?n+":"+t+";":""}function Iw(e){for(var n="",t=0;t<e.style.length;t++)n+=Tw(0,l=e.style.item(t),e.style.getPropertyValue(l));for(var l in e.style)e.style.hasOwnProperty(l)&&!l.startsWith("_")&&(n+=Tw(0,l.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),e.style[l]));e.setAttribute("style",n)}function Aw(e,n,t){e.style&&(Object.keys(n).forEach(function(l){var r=Lw(l);t&&!t.hasOwnProperty(l)&&(t[l]=e.style[r]),e.style[r]=n[l]}),JA()&&Iw(e))}function ww(e,n){e.style&&(Object.keys(n).forEach(function(n){var t=Lw(n);e.style[t]=""}),JA()&&Iw(e))}function Nw(e){return Array.isArray(e)?1==e.length?e[0]:KA(e):e}var Pw=new RegExp("{{\\s*(.+?)\\s*}}","g");function Dw(e){var n=[];if("string"==typeof e){for(var t=e.toString(),l=void 0;l=Pw.exec(t);)n.push(l[1]);Pw.lastIndex=0}return n}function kw(e,n,t){var l=e.toString(),r=l.replace(Pw,function(e,l){var r=n[l];return n.hasOwnProperty(l)||(t.push("Please provide a value for the animation param "+l),r=""),r.toString()});return r==l?e:r}function Mw(e){for(var n=[],t=e.next();!t.done;)n.push(t.value),t=e.next();return n}var xw=/-+([a-z0-9])/g;function Lw(e){return e.replace(xw,function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e[1].toUpperCase()})}function Fw(e,n,t){switch(n.type){case 7:return e.visitTrigger(n,t);case 0:return e.visitState(n,t);case 1:return e.visitTransition(n,t);case 2:return e.visitSequence(n,t);case 3:return e.visitGroup(n,t);case 4:return e.visitAnimate(n,t);case 5:return e.visitKeyframes(n,t);case 6:return e.visitStyle(n,t);case 8:return e.visitReference(n,t);case 9:return e.visitAnimateChild(n,t);case 10:return e.visitAnimateRef(n,t);case 11:return e.visitQuery(n,t);case 12:return e.visitStagger(n,t);default:throw new Error("Unable to resolve animation metadata node #"+n.type)}}var Uw="*",Hw=new Set(["true","1"]),Gw=new Set(["false","0"]);function Bw(e,n){var t=Hw.has(e)||Gw.has(e),l=Hw.has(n)||Gw.has(n);return function(r,i){var o=e==Uw||e==r,u=n==Uw||n==i;return!o&&t&&"boolean"==typeof r&&(o=r?Hw.has(e):Gw.has(e)),!u&&l&&"boolean"==typeof i&&(u=i?Hw.has(n):Gw.has(n)),o&&u}}var Vw=new RegExp("s*:selfs*,?","g");function Ww(e,n,t){return new jw(e).build(n,t)}var jw=function(){function e(e){this._driver=e}return e.prototype.build=function(e,n){var t=new zw(n);return this._resetContextStyleTimingState(t),Fw(this,Nw(e),t)},e.prototype._resetContextStyleTimingState=function(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0},e.prototype.visitTrigger=function(e,n){var t=this,l=n.queryCount=0,r=n.depCount=0,i=[],o=[];return"@"==e.name.charAt(0)&&n.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(function(e){if(t._resetContextStyleTimingState(n),0==e.type){var u=e,s=u.name;s.toString().split(/\s*,\s*/).forEach(function(e){u.name=e,i.push(t.visitState(u,n))}),u.name=s}else if(1==e.type){var a=t.visitTransition(e,n);l+=a.queryCount,r+=a.depCount,o.push(a)}else n.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:i,transitions:o,queryCount:l,depCount:r,options:null}},e.prototype.visitState=function(e,n){var t=this.visitStyle(e.styles,n),l=e.options&&e.options.params||null;if(t.containsDynamicStyles){var r=new Set,i=l||{};if(t.styles.forEach(function(e){if(Yw(e)){var n=e;Object.keys(n).forEach(function(e){Dw(n[e]).forEach(function(e){i.hasOwnProperty(e)||r.add(e)})})}}),r.size){var o=Mw(r.values());n.errors.push('state("'+e.name+'", ...) must define default values for all the following style substitutions: '+o.join(", "))}}return{type:0,name:e.name,style:t,options:l?{params:l}:null}},e.prototype.visitTransition=function(e,n){n.queryCount=0,n.depCount=0;var t,l,r,i=Fw(this,Nw(e.animation),n);return{type:1,matchers:(t=e.expr,l=n.errors,r=[],"string"==typeof t?t.split(/\s*,\s*/).forEach(function(e){return function(e,n,t){if(":"==e[0]){var l=function(e,n){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return function(e,n){return parseFloat(n)>parseFloat(e)};case":decrement":return function(e,n){return parseFloat(n)<parseFloat(e)};default:return n.push('The transition alias value "'+e+'" is not supported'),"* => *"}}(e,t);if("function"==typeof l)return void n.push(l);e=l}var r=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push('The provided transition expression "'+e+'" is not supported'),n;var i=r[1],o=r[2],u=r[3];n.push(Bw(i,u)),"<"!=o[0]||i==Uw&&u==Uw||n.push(Bw(u,i))}(e,r,l)}):r.push(t),r),animation:i,queryCount:n.queryCount,depCount:n.depCount,options:Kw(e.options)}},e.prototype.visitSequence=function(e,n){var t=this;return{type:2,steps:e.steps.map(function(e){return Fw(t,e,n)}),options:Kw(e.options)}},e.prototype.visitGroup=function(e,n){var t=this,l=n.currentTime,r=0,i=e.steps.map(function(e){n.currentTime=l;var i=Fw(t,e,n);return r=Math.max(r,n.currentTime),i});return n.currentTime=r,{type:3,steps:i,options:Kw(e.options)}},e.prototype.visitAnimate=function(e,n){var t,l=function(e,n){var t=null;if(e.hasOwnProperty("duration"))t=e;else if("number"==typeof e)return qw(Rw(e,n).duration,0,"");var l=e;if(l.split(/\s+/).some(function(e){return"{"==e.charAt(0)&&"{"==e.charAt(1)})){var r=qw(0,0,"");return r.dynamic=!0,r.strValue=l,r}return qw((t=t||Rw(l,n)).duration,t.delay,t.easing)}(e.timings,n.errors);n.currentAnimateTimings=l;var r=e.styles?e.styles:qA({});if(5==r.type)t=this.visitKeyframes(r,n);else{var i=e.styles,o=!1;if(!i){o=!0;var u={};l.easing&&(u.easing=l.easing),i=qA(u)}n.currentTime+=l.duration+l.delay;var s=this.visitStyle(i,n);s.isEmptyStep=o,t=s}return n.currentAnimateTimings=null,{type:4,timings:l,style:t,options:null}},e.prototype.visitStyle=function(e,n){var t=this._makeStyleAst(e,n);return this._validateStyleAst(t,n),t},e.prototype._makeStyleAst=function(e,n){var t=[];Array.isArray(e.styles)?e.styles.forEach(function(e){"string"==typeof e?e==YA?t.push(e):n.errors.push("The provided style string value "+e+" is not allowed."):t.push(e)}):t.push(e.styles);var l=!1,r=null;return t.forEach(function(e){if(Yw(e)){var n=e,t=n.easing;if(t&&(r=t,delete n.easing),!l)for(var i in n)if(n[i].toString().indexOf("{{")>=0){l=!0;break}}}),{type:6,styles:t,easing:r,offset:e.offset,containsDynamicStyles:l,options:null}},e.prototype._validateStyleAst=function(e,n){var t=this,l=n.currentAnimateTimings,r=n.currentTime,i=n.currentTime;l&&i>0&&(i-=l.duration+l.delay),e.styles.forEach(function(e){"string"!=typeof e&&Object.keys(e).forEach(function(l){if(t._driver.validateStyleProperty(l)){var o,u,s,a=n.collectedStyles[n.currentQuerySelector],c=a[l],p=!0;c&&(i!=r&&i>=c.startTime&&r<=c.endTime&&(n.errors.push('The CSS property "'+l+'" that exists between the times of "'+c.startTime+'ms" and "'+c.endTime+'ms" is also being animated in a parallel animation between the times of "'+i+'ms" and "'+r+'ms"'),p=!1),i=c.startTime),p&&(a[l]={startTime:i,endTime:r}),n.options&&(o=n.errors,u=n.options.params||{},(s=Dw(e[l])).length&&s.forEach(function(e){u.hasOwnProperty(e)||o.push("Unable to resolve the local animation param "+e+" in the given list of values")}))}else n.errors.push('The provided animation property "'+l+'" is not a supported CSS property for animations')})})},e.prototype.visitKeyframes=function(e,n){var t=this,l={type:5,styles:[],options:null};if(!n.currentAnimateTimings)return n.errors.push("keyframes() must be placed inside of a call to animate()"),l;var r=0,i=[],o=!1,u=!1,s=0,a=e.steps.map(function(e){var l=t._makeStyleAst(e,n),a=null!=l.offset?l.offset:function(e){if("string"==typeof e)return null;var n=null;if(Array.isArray(e))e.forEach(function(e){if(Yw(e)&&e.hasOwnProperty("offset")){var t=e;n=parseFloat(t.offset),delete t.offset}});else if(Yw(e)&&e.hasOwnProperty("offset")){var t=e;n=parseFloat(t.offset),delete t.offset}return n}(l.styles),c=0;return null!=a&&(r++,c=l.offset=a),u=u||c<0||c>1,o=o||c<s,s=c,i.push(c),l});u&&n.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),o&&n.errors.push("Please ensure that all keyframe offsets are in order");var c=e.steps.length,p=0;r>0&&r<c?n.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(p=1/(c-1));var h=c-1,d=n.currentTime,f=n.currentAnimateTimings,g=f.duration;return a.forEach(function(e,r){var o=p>0?r==h?1:p*r:i[r],u=o*g;n.currentTime=d+f.delay+u,f.duration=u,t._validateStyleAst(e,n),e.offset=o,l.styles.push(e)}),l},e.prototype.visitReference=function(e,n){return{type:8,animation:Fw(this,Nw(e.animation),n),options:Kw(e.options)}},e.prototype.visitAnimateChild=function(e,n){return n.depCount++,{type:9,options:Kw(e.options)}},e.prototype.visitAnimateRef=function(e,n){return{type:10,animation:this.visitReference(e.animation,n),options:Kw(e.options)}},e.prototype.visitQuery=function(e,n){var t=n.currentQuerySelector,l=e.options||{};n.queryCount++,n.currentQuery=e;var r=a(function(e){var n=!!e.split(/\s*,\s*/).find(function(e){return":self"==e});return n&&(e=e.replace(Vw,"")),[e=e.replace(/@\*/g,".ng-trigger").replace(/@\w+/g,function(e){return".ng-trigger-"+e.substr(1)}).replace(/:animating/g,".ng-animating"),n]}(e.selector),2),i=r[0],o=r[1];n.currentQuerySelector=t.length?t+" "+i:i,iw(n.collectedStyles,n.currentQuerySelector,{});var u=Fw(this,Nw(e.animation),n);return n.currentQuery=null,n.currentQuerySelector=t,{type:11,selector:i,limit:l.limit||0,optional:!!l.optional,includeSelf:o,animation:u,originalSelector:e.selector,options:Kw(e.options)}},e.prototype.visitStagger=function(e,n){n.currentQuery||n.errors.push("stagger() can only be used inside of query()");var t="full"===e.timings?{duration:0,delay:0,easing:"full"}:Rw(e.timings,n.errors,!0);return{type:12,animation:Fw(this,Nw(e.animation),n),timings:t,options:null}},e}(),zw=function(){return function(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}();function Yw(e){return!Array.isArray(e)&&"object"==typeof e}function Kw(e){var n;return e?(e=Cw(e)).params&&(e.params=(n=e.params)?Cw(n):null):e={},e}function qw(e,n,t){return{duration:e,delay:n,easing:t}}function $w(e,n,t,l,r,i,o,u){return void 0===o&&(o=null),void 0===u&&(u=!1),{type:1,element:e,keyframes:n,preStyleProps:t,postStyleProps:l,duration:r,delay:i,totalTime:r+i,easing:o,subTimeline:u}}var Qw=function(){function e(){this._map=new Map}return e.prototype.consume=function(e){var n=this._map.get(e);return n?this._map.delete(e):n=[],n},e.prototype.append=function(e,n){var t=this._map.get(e);t||this._map.set(e,t=[]),t.push.apply(t,c(n))},e.prototype.has=function(e){return this._map.has(e)},e.prototype.clear=function(){this._map.clear()},e}(),Zw=new RegExp(":enter","g"),Xw=new RegExp(":leave","g");function Jw(e,n,t,l,r,i,o,u,s,a){return void 0===i&&(i={}),void 0===o&&(o={}),void 0===a&&(a=[]),(new eN).buildKeyframes(e,n,t,l,r,i,o,u,s,a)}var eN=function(){function e(){}return e.prototype.buildKeyframes=function(e,n,t,l,r,i,o,u,s,a){void 0===a&&(a=[]),s=s||new Qw;var c=new tN(e,n,s,l,r,a,[]);c.options=u,c.currentTimeline.setStyles([i],null,c.errors,u),Fw(this,t,c);var p=c.timelines.filter(function(e){return e.containsAnimation()});if(p.length&&Object.keys(o).length){var h=p[p.length-1];h.allowOnlyTimelineStyles()||h.setStyles([o],null,c.errors,u)}return p.length?p.map(function(e){return e.buildKeyframes()}):[$w(n,[],[],[],0,0,"",!1)]},e.prototype.visitTrigger=function(e,n){},e.prototype.visitState=function(e,n){},e.prototype.visitTransition=function(e,n){},e.prototype.visitAnimateChild=function(e,n){var t=n.subInstructions.consume(n.element);if(t){var l=n.createSubContext(e.options),r=n.currentTimeline.currentTime,i=this._visitSubInstructions(t,l,l.options);r!=i&&n.transformIntoNewTimeline(i)}n.previousNode=e},e.prototype.visitAnimateRef=function(e,n){var t=n.createSubContext(e.options);t.transformIntoNewTimeline(),this.visitReference(e.animation,t),n.transformIntoNewTimeline(t.currentTimeline.currentTime),n.previousNode=e},e.prototype._visitSubInstructions=function(e,n,t){var l=n.currentTimeline.currentTime,r=null!=t.duration?bw(t.duration):null,i=null!=t.delay?bw(t.delay):null;return 0!==r&&e.forEach(function(e){var t=n.appendInstructionToTimeline(e,r,i);l=Math.max(l,t.duration+t.delay)}),l},e.prototype.visitReference=function(e,n){n.updateOptions(e.options,!0),Fw(this,e.animation,n),n.previousNode=e},e.prototype.visitSequence=function(e,n){var t=this,l=n.subContextCount,r=n,i=e.options;if(i&&(i.params||i.delay)&&((r=n.createSubContext(i)).transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=nN);var o=bw(i.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(function(e){return Fw(t,e,r)}),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>l&&r.transformIntoNewTimeline()),n.previousNode=e},e.prototype.visitGroup=function(e,n){var t=this,l=[],r=n.currentTimeline.currentTime,i=e.options&&e.options.delay?bw(e.options.delay):0;e.steps.forEach(function(o){var u=n.createSubContext(e.options);i&&u.delayNextStep(i),Fw(t,o,u),r=Math.max(r,u.currentTimeline.currentTime),l.push(u.currentTimeline)}),l.forEach(function(e){return n.currentTimeline.mergeTimelineCollectedStyles(e)}),n.transformIntoNewTimeline(r),n.previousNode=e},e.prototype._visitTiming=function(e,n){if(e.dynamic){var t=e.strValue;return Rw(n.params?kw(t,n.params,n.errors):t,n.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}},e.prototype.visitAnimate=function(e,n){var t=n.currentAnimateTimings=this._visitTiming(e.timings,n),l=n.currentTimeline;t.delay&&(n.incrementTime(t.delay),l.snapshotCurrentStyles());var r=e.style;5==r.type?this.visitKeyframes(r,n):(n.incrementTime(t.duration),this.visitStyle(r,n),l.applyStylesToKeyframe()),n.currentAnimateTimings=null,n.previousNode=e},e.prototype.visitStyle=function(e,n){var t=n.currentTimeline,l=n.currentAnimateTimings;!l&&t.getCurrentStyleProperties().length&&t.forwardFrame();var r=l&&l.easing||e.easing;e.isEmptyStep?t.applyEmptyStep(r):t.setStyles(e.styles,r,n.errors,n.options),n.previousNode=e},e.prototype.visitKeyframes=function(e,n){var t=n.currentAnimateTimings,l=n.currentTimeline.duration,r=t.duration,i=n.createSubContext().currentTimeline;i.easing=t.easing,e.styles.forEach(function(e){i.forwardTime((e.offset||0)*r),i.setStyles(e.styles,e.easing,n.errors,n.options),i.applyStylesToKeyframe()}),n.currentTimeline.mergeTimelineCollectedStyles(i),n.transformIntoNewTimeline(l+r),n.previousNode=e},e.prototype.visitQuery=function(e,n){var t=this,l=n.currentTimeline.currentTime,r=e.options||{},i=r.delay?bw(r.delay):0;i&&(6===n.previousNode.type||0==l&&n.currentTimeline.getCurrentStyleProperties().length)&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=nN);var o=l,u=n.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,n.errors);n.currentQueryTotal=u.length;var s=null;u.forEach(function(l,r){n.currentQueryIndex=r;var u=n.createSubContext(e.options,l);i&&u.delayNextStep(i),l===n.element&&(s=u.currentTimeline),Fw(t,e.animation,u),u.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,u.currentTimeline.currentTime)}),n.currentQueryIndex=0,n.currentQueryTotal=0,n.transformIntoNewTimeline(o),s&&(n.currentTimeline.mergeTimelineCollectedStyles(s),n.currentTimeline.snapshotCurrentStyles()),n.previousNode=e},e.prototype.visitStagger=function(e,n){var t=n.parentContext,l=n.currentTimeline,r=e.timings,i=Math.abs(r.duration),o=i*(n.currentQueryTotal-1),u=i*n.currentQueryIndex;switch(r.duration<0?"reverse":r.easing){case"reverse":u=o-u;break;case"full":u=t.currentStaggerTime}var s=n.currentTimeline;u&&s.delayNextStep(u);var a=s.currentTime;Fw(this,e.animation,n),n.previousNode=e,t.currentStaggerTime=l.currentTime-a+(l.startTime-t.currentTimeline.startTime)},e}(),nN={},tN=function(){function e(e,n,t,l,r,i,o,u){this._driver=e,this.element=n,this.subInstructions=t,this._enterClassName=l,this._leaveClassName=r,this.errors=i,this.timelines=o,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=nN,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=u||new lN(this._driver,n,0),o.push(this.currentTimeline)}return Object.defineProperty(e.prototype,"params",{get:function(){return this.options.params},enumerable:!0,configurable:!0}),e.prototype.updateOptions=function(e,n){var t=this;if(e){var l=e,r=this.options;null!=l.duration&&(r.duration=bw(l.duration)),null!=l.delay&&(r.delay=bw(l.delay));var i=l.params;if(i){var o=r.params;o||(o=this.options.params={}),Object.keys(i).forEach(function(e){n&&o.hasOwnProperty(e)||(o[e]=kw(i[e],o,t.errors))})}}},e.prototype._copyOptions=function(){var e={};if(this.options){var n=this.options.params;if(n){var t=e.params={};Object.keys(n).forEach(function(e){t[e]=n[e]})}}return e},e.prototype.createSubContext=function(n,t,l){void 0===n&&(n=null);var r=t||this.element,i=new e(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,l||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(n),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i},e.prototype.transformIntoNewTimeline=function(e){return this.previousNode=nN,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline},e.prototype.appendInstructionToTimeline=function(e,n,t){var l={duration:null!=n?n:e.duration,delay:this.currentTimeline.currentTime+(null!=t?t:0)+e.delay,easing:""},r=new rN(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,l,e.stretchStartingKeyframe);return this.timelines.push(r),l},e.prototype.incrementTime=function(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)},e.prototype.delayNextStep=function(e){e>0&&this.currentTimeline.delayNextStep(e)},e.prototype.invokeQuery=function(e,n,t,l,r,i){var o=[];if(l&&o.push(this.element),e.length>0){e=(e=e.replace(Zw,"."+this._enterClassName)).replace(Xw,"."+this._leaveClassName);var u=this._driver.query(this.element,e,1!=t);0!==t&&(u=t<0?u.slice(u.length+t,u.length):u.slice(0,t)),o.push.apply(o,c(u))}return r||0!=o.length||i.push('`query("'+n+'")` returned zero elements. (Use `query("'+n+'", { optional: true })` if you wish to allow this.)'),o},e}(),lN=function(){function e(e,n,t,l){this._driver=e,this.element=n,this.startTime=t,this._elementTimelineStylesLookup=l,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}return e.prototype.containsAnimation=function(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}},e.prototype.getCurrentStyleProperties=function(){return Object.keys(this._currentKeyframe)},Object.defineProperty(e.prototype,"currentTime",{get:function(){return this.startTime+this.duration},enumerable:!0,configurable:!0}),e.prototype.delayNextStep=function(e){var n=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||n?(this.forwardTime(this.currentTime+e),n&&this.snapshotCurrentStyles()):this.startTime+=e},e.prototype.fork=function(n,t){return this.applyStylesToKeyframe(),new e(this._driver,n,t||this.currentTime,this._elementTimelineStylesLookup)},e.prototype._loadKeyframe=function(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))},e.prototype.forwardFrame=function(){this.duration+=1,this._loadKeyframe()},e.prototype.forwardTime=function(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()},e.prototype._updateStyle=function(e,n){this._localTimelineStyles[e]=n,this._globalTimelineStyles[e]=n,this._styleSummary[e]={time:this.currentTime,value:n}},e.prototype.allowOnlyTimelineStyles=function(){return this._currentEmptyStepKeyframe!==this._currentKeyframe},e.prototype.applyEmptyStep=function(e){var n=this;e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(function(e){n._backFill[e]=n._globalTimelineStyles[e]||YA,n._currentKeyframe[e]=YA}),this._currentEmptyStepKeyframe=this._currentKeyframe},e.prototype.setStyles=function(e,n,t,l){var r=this;n&&(this._previousKeyframe.easing=n);var i=l&&l.params||{},o=function(e,n){var t,l={};return e.forEach(function(e){"*"===e?(t=t||Object.keys(n)).forEach(function(e){l[e]=YA}):_w(e,!1,l)}),l}(e,this._globalTimelineStyles);Object.keys(o).forEach(function(e){var n=kw(o[e],i,t);r._pendingStyles[e]=n,r._localTimelineStyles.hasOwnProperty(e)||(r._backFill[e]=r._globalTimelineStyles.hasOwnProperty(e)?r._globalTimelineStyles[e]:YA),r._updateStyle(e,n)})},e.prototype.applyStylesToKeyframe=function(){var e=this,n=this._pendingStyles,t=Object.keys(n);0!=t.length&&(this._pendingStyles={},t.forEach(function(t){e._currentKeyframe[t]=n[t]}),Object.keys(this._localTimelineStyles).forEach(function(n){e._currentKeyframe.hasOwnProperty(n)||(e._currentKeyframe[n]=e._localTimelineStyles[n])}))},e.prototype.snapshotCurrentStyles=function(){var e=this;Object.keys(this._localTimelineStyles).forEach(function(n){var t=e._localTimelineStyles[n];e._pendingStyles[n]=t,e._updateStyle(n,t)})},e.prototype.getFinalKeyframe=function(){return this._keyframes.get(this.duration)},Object.defineProperty(e.prototype,"properties",{get:function(){var e=[];for(var n in this._currentKeyframe)e.push(n);return e},enumerable:!0,configurable:!0}),e.prototype.mergeTimelineCollectedStyles=function(e){var n=this;Object.keys(e._styleSummary).forEach(function(t){var l=n._styleSummary[t],r=e._styleSummary[t];(!l||r.time>l.time)&&n._updateStyle(t,r.value)})},e.prototype.buildKeyframes=function(){var e=this;this.applyStylesToKeyframe();var n=new Set,t=new Set,l=1===this._keyframes.size&&0===this.duration,r=[];this._keyframes.forEach(function(i,o){var u=_w(i,!0);Object.keys(u).forEach(function(e){var l=u[e];l==XA?n.add(e):l==YA&&t.add(e)}),l||(u.offset=o/e.duration),r.push(u)});var i=n.size?Mw(n.values()):[],o=t.size?Mw(t.values()):[];if(l){var u=r[0],s=Cw(u);u.offset=0,s.offset=1,r=[u,s]}return $w(this.element,r,i,o,this.duration,this.startTime,this.easing,!1)},e}(),rN=function(e){function n(n,t,l,r,i,o,u){void 0===u&&(u=!1);var s=e.call(this,n,t,o.delay)||this;return s.element=t,s.keyframes=l,s.preStyleProps=r,s.postStyleProps=i,s._stretchStartingKeyframe=u,s.timings={duration:o.duration,delay:o.delay,easing:o.easing},s}return r(n,e),n.prototype.containsAnimation=function(){return this.keyframes.length>1},n.prototype.buildKeyframes=function(){var e=this.keyframes,n=this.timings,t=n.delay,l=n.duration,r=n.easing;if(this._stretchStartingKeyframe&&t){var i=[],o=l+t,u=t/o,s=_w(e[0],!1);s.offset=0,i.push(s);var a=_w(e[0],!1);a.offset=iN(u),i.push(a);for(var c=e.length-1,p=1;p<=c;p++){var h=_w(e[p],!1);h.offset=iN((t+h.offset*l)/o),i.push(h)}l=o,t=0,r="",e=i}return $w(this.element,e,this.preStyleProps,this.postStyleProps,l,t,r,!0)},n}(lN);function iN(e,n){void 0===n&&(n=3);var t=Math.pow(10,n-1);return Math.round(e*t)/t}var oN=function(){return function(){}}(),uN=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r(n,e),n.prototype.normalizePropertyName=function(e,n){return Lw(e)},n.prototype.normalizeStyleValue=function(e,n,t,l){var r="",i=t.toString().trim();if(sN[n]&&0!==t&&"0"!==t)if("number"==typeof t)r="px";else{var o=t.match(/^[+-]?[\d\.]+([a-z]*)$/);o&&0==o[1].length&&l.push("Please provide a CSS unit value for "+e+":"+t)}return i+r},n}(oN),sN=aN("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(","));function aN(e){var n={};return e.forEach(function(e){return n[e]=!0}),n}function cN(e,n,t,l,r,i,o,u,s,a,c,p,h){return{type:0,element:e,triggerName:n,isRemovalTransition:r,fromState:t,fromStyles:i,toState:l,toStyles:o,timelines:u,queriedElements:s,preStyleProps:a,postStyleProps:c,totalTime:p,errors:h}}var pN={},hN=function(){function e(e,n,t){this._triggerName=e,this.ast=n,this._stateStyles=t}return e.prototype.match=function(e,n,t,l){return function(e,n,t,l,r){return e.some(function(e){return e(n,t,l,r)})}(this.ast.matchers,e,n,t,l)},e.prototype.buildStyles=function(e,n,t){var l=this._stateStyles["*"],r=this._stateStyles[e],i=l?l.buildStyles(n,t):{};return r?r.buildStyles(n,t):i},e.prototype.build=function(e,n,t,l,r,o,u,s,a,c){var p=[],h=this.ast.options&&this.ast.options.params||pN,d=this.buildStyles(t,u&&u.params||pN,p),f=s&&s.params||pN,g=this.buildStyles(l,f,p),v=new Set,m=new Map,y=new Map,S="void"===l,E={params:i({},h,f)},b=c?[]:Jw(e,n,this.ast.animation,r,o,d,g,E,a,p),O=0;if(b.forEach(function(e){O=Math.max(e.duration+e.delay,O)}),p.length)return cN(n,this._triggerName,t,l,S,d,g,[],[],m,y,O,p);b.forEach(function(e){var t=e.element,l=iw(m,t,{});e.preStyleProps.forEach(function(e){return l[e]=!0});var r=iw(y,t,{});e.postStyleProps.forEach(function(e){return r[e]=!0}),t!==n&&v.add(t)});var R=Mw(v.values());return cN(n,this._triggerName,t,l,S,d,g,b,R,m,y,O)},e}(),dN=function(){function e(e,n){this.styles=e,this.defaultParams=n}return e.prototype.buildStyles=function(e,n){var t={},l=Cw(this.defaultParams);return Object.keys(e).forEach(function(n){var t=e[n];null!=t&&(l[n]=t)}),this.styles.styles.forEach(function(e){if("string"!=typeof e){var r=e;Object.keys(r).forEach(function(e){var i=r[e];i.length>1&&(i=kw(i,l,n)),t[e]=i})}}),t},e}(),fN=function(){function e(e,n){var t=this;this.name=e,this.ast=n,this.transitionFactories=[],this.states={},n.states.forEach(function(e){t.states[e.name]=new dN(e.style,e.options&&e.options.params||{})}),gN(this.states,"true","1"),gN(this.states,"false","0"),n.transitions.forEach(function(n){t.transitionFactories.push(new hN(e,n,t.states))}),this.fallbackTransition=new hN(e,{type:1,animation:{type:2,steps:[],options:null},matchers:[function(e,n){return!0}],options:null,queryCount:0,depCount:0},this.states)}return Object.defineProperty(e.prototype,"containsQueries",{get:function(){return this.ast.queryCount>0},enumerable:!0,configurable:!0}),e.prototype.matchTransition=function(e,n,t,l){return this.transitionFactories.find(function(r){return r.match(e,n,t,l)})||null},e.prototype.matchStyles=function(e,n,t){return this.fallbackTransition.buildStyles(e,n,t)},e}();function gN(e,n,t){e.hasOwnProperty(n)?e.hasOwnProperty(t)||(e[t]=e[n]):e.hasOwnProperty(t)&&(e[n]=e[t])}var vN=new Qw,mN=function(){function e(e,n,t){this.bodyNode=e,this._driver=n,this._normalizer=t,this._animations={},this._playersById={},this.players=[]}return e.prototype.register=function(e,n){var t=[],l=Ww(this._driver,n,t);if(t.length)throw new Error("Unable to build the animation due to the following errors: "+t.join("\n"));this._animations[e]=l},e.prototype._buildPlayer=function(e,n,t){var l=e.element,r=nw(0,this._normalizer,0,e.keyframes,n,t);return this._driver.animate(l,r,e.duration,e.delay,e.easing,[],!0)},e.prototype.create=function(e,n,t){var l=this;void 0===t&&(t={});var r,i=[],o=this._animations[e],u=new Map;if(o?(r=Jw(this._driver,n,o,"ng-enter","ng-leave",{},{},t,vN,i)).forEach(function(e){var n=iw(u,e.element,{});e.postStyleProps.forEach(function(e){return n[e]=null})}):(i.push("The requested animation doesn't exist or has already been destroyed"),r=[]),i.length)throw new Error("Unable to create the animation due to the following errors: "+i.join("\n"));u.forEach(function(e,n){Object.keys(e).forEach(function(t){e[t]=l._driver.computeStyle(n,t,YA)})});var s=ew(r.map(function(e){var n=u.get(e.element);return l._buildPlayer(e,{},n)}));return this._playersById[e]=s,s.onDestroy(function(){return l.destroy(e)}),this.players.push(s),s},e.prototype.destroy=function(e){var n=this._getPlayer(e);n.destroy(),delete this._playersById[e];var t=this.players.indexOf(n);t>=0&&this.players.splice(t,1)},e.prototype._getPlayer=function(e){var n=this._playersById[e];if(!n)throw new Error("Unable to find the timeline player referenced by "+e);return n},e.prototype.listen=function(e,n,t,l){var r=rw(n,"","","");return tw(this._getPlayer(e),t,r,l),function(){}},e.prototype.command=function(e,n,t,l){if("register"!=t)if("create"!=t){var r=this._getPlayer(e);switch(t){case"play":r.play();break;case"pause":r.pause();break;case"reset":r.reset();break;case"restart":r.restart();break;case"finish":r.finish();break;case"init":r.init();break;case"setPosition":r.setPosition(parseFloat(l[0]));break;case"destroy":this.destroy(e)}}else this.create(e,n,l[0]||{});else this.register(e,l[0])},e}(),yN=[],SN={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},EN={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},bN="__ng_removed",ON=function(){function e(e,n){void 0===n&&(n=""),this.namespaceId=n;var t=e&&e.hasOwnProperty("value");if(this.value=function(e){return null!=e?e:null}(t?e.value:e),t){var l=Cw(e);delete l.value,this.options=l}else this.options={};this.options.params||(this.options.params={})}return Object.defineProperty(e.prototype,"params",{get:function(){return this.options.params},enumerable:!0,configurable:!0}),e.prototype.absorbOptions=function(e){var n=e.params;if(n){var t=this.options.params;Object.keys(n).forEach(function(e){null==t[e]&&(t[e]=n[e])})}},e}(),RN=new ON("void"),CN=function(){function e(e,n,t){this.id=e,this.hostElement=n,this._engine=t,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,DN(n,this._hostClassName)}return e.prototype.listen=function(e,n,t,l){var r,i=this;if(!this._triggers.hasOwnProperty(n))throw new Error('Unable to listen on the animation trigger event "'+t+'" because the animation trigger "'+n+"\" doesn't exist!");if(null==t||0==t.length)throw new Error('Unable to listen on the animation trigger "'+n+'" because the provided event is undefined!');if("start"!=(r=t)&&"done"!=r)throw new Error('The provided animation trigger event "'+t+'" for the animation trigger "'+n+'" is not supported!');var o=iw(this._elementListeners,e,[]),u={name:n,phase:t,callback:l};o.push(u);var s=iw(this._engine.statesByElement,e,{});return s.hasOwnProperty(n)||(DN(e,"ng-trigger"),DN(e,"ng-trigger-"+n),s[n]=RN),function(){i._engine.afterFlush(function(){var e=o.indexOf(u);e>=0&&o.splice(e,1),i._triggers[n]||delete s[n]})}},e.prototype.register=function(e,n){return!this._triggers[e]&&(this._triggers[e]=n,!0)},e.prototype._getTrigger=function(e){var n=this._triggers[e];if(!n)throw new Error('The provided animation trigger "'+e+'" has not been registered!');return n},e.prototype.trigger=function(e,n,t,l){var r=this;void 0===l&&(l=!0);var i=this._getTrigger(n),o=new TN(this.id,n,e),u=this._engine.statesByElement.get(e);u||(DN(e,"ng-trigger"),DN(e,"ng-trigger-"+n),this._engine.statesByElement.set(e,u={}));var s=u[n],a=new ON(t,this.id);if(!(t&&t.hasOwnProperty("value"))&&s&&a.absorbOptions(s.options),u[n]=a,s||(s=RN),"void"===a.value||s.value!==a.value){var c=iw(this._engine.playersByElement,e,[]);c.forEach(function(e){e.namespaceId==r.id&&e.triggerName==n&&e.queued&&e.destroy()});var p=i.matchTransition(s.value,a.value,e,a.params),h=!1;if(!p){if(!l)return;p=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:n,transition:p,fromState:s,toState:a,player:o,isFallbackTransition:h}),h||(DN(e,"ng-animate-queued"),o.onStart(function(){kN(e,"ng-animate-queued")})),o.onDone(function(){var n=r.players.indexOf(o);n>=0&&r.players.splice(n,1);var t=r._engine.playersByElement.get(e);if(t){var l=t.indexOf(o);l>=0&&t.splice(l,1)}}),this.players.push(o),c.push(o),o}if(!function(e,n){var t=Object.keys(e),l=Object.keys(n);if(t.length!=l.length)return!1;for(var r=0;r<t.length;r++){var i=t[r];if(!n.hasOwnProperty(i)||e[i]!==n[i])return!1}return!0}(s.params,a.params)){var d=[],f=i.matchStyles(s.value,s.params,d),g=i.matchStyles(a.value,a.params,d);d.length?this._engine.reportError(d):this._engine.afterFlush(function(){ww(e,f),Aw(e,g)})}},e.prototype.deregister=function(e){var n=this;delete this._triggers[e],this._engine.statesByElement.forEach(function(n,t){delete n[e]}),this._elementListeners.forEach(function(t,l){n._elementListeners.set(l,t.filter(function(n){return n.name!=e}))})},e.prototype.clearElementCache=function(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);var n=this._engine.playersByElement.get(e);n&&(n.forEach(function(e){return e.destroy()}),this._engine.playersByElement.delete(e))},e.prototype._signalRemovalForInnerTriggers=function(e,n,t){var l=this;void 0===t&&(t=!1),this._engine.driver.query(e,".ng-trigger",!0).forEach(function(e){if(!e[bN]){var t=l._engine.fetchNamespacesByElement(e);t.size?t.forEach(function(t){return t.triggerLeaveAnimation(e,n,!1,!0)}):l.clearElementCache(e)}})},e.prototype.triggerLeaveAnimation=function(e,n,t,l){var r=this,i=this._engine.statesByElement.get(e);if(i){var o=[];if(Object.keys(i).forEach(function(n){if(r._triggers[n]){var t=r.trigger(e,n,"void",l);t&&o.push(t)}}),o.length)return this._engine.markElementAsRemoved(this.id,e,!0,n),t&&ew(o).onDone(function(){return r._engine.processLeaveNode(e)}),!0}return!1},e.prototype.prepareLeaveAnimationListeners=function(e){var n=this,t=this._elementListeners.get(e);if(t){var l=new Set;t.forEach(function(t){var r=t.name;if(!l.has(r)){l.add(r);var i=n._triggers[r].fallbackTransition,o=n._engine.statesByElement.get(e)[r]||RN,u=new ON("void"),s=new TN(n.id,r,e);n._engine.totalQueuedPlayers++,n._queue.push({element:e,triggerName:r,transition:i,fromState:o,toState:u,player:s,isFallbackTransition:!0})}})}},e.prototype.removeNode=function(e,n){var t=this,l=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,n,!0),!this.triggerLeaveAnimation(e,n,!0)){var r=!1;if(l.totalAnimations){var i=l.players.length?l.playersByQueriedElement.get(e):[];if(i&&i.length)r=!0;else for(var o=e;o=o.parentNode;)if(l.statesByElement.get(o)){r=!0;break}}this.prepareLeaveAnimationListeners(e),r?l.markElementAsRemoved(this.id,e,!1,n):(l.afterFlush(function(){return t.clearElementCache(e)}),l.destroyInnerAnimations(e),l._onRemovalComplete(e,n))}},e.prototype.insertNode=function(e,n){DN(e,this._hostClassName)},e.prototype.drainQueuedTransitions=function(e){var n=this,t=[];return this._queue.forEach(function(l){var r=l.player;if(!r.destroyed){var i=l.element,o=n._elementListeners.get(i);o&&o.forEach(function(n){if(n.name==l.triggerName){var t=rw(i,l.triggerName,l.fromState.value,l.toState.value);t._data=e,tw(l.player,n.phase,t,n.callback)}}),r.markedForDestroy?n._engine.afterFlush(function(){r.destroy()}):t.push(l)}}),this._queue=[],t.sort(function(e,t){var l=e.transition.ast.depCount,r=t.transition.ast.depCount;return 0==l||0==r?l-r:n._engine.driver.containsElement(e.element,t.element)?1:-1})},e.prototype.destroy=function(e){this.players.forEach(function(e){return e.destroy()}),this._signalRemovalForInnerTriggers(this.hostElement,e)},e.prototype.elementContainsData=function(e){var n=!1;return this._elementListeners.has(e)&&(n=!0),!!this._queue.find(function(n){return n.element===e})||n},e}(),_N=function(){function e(e,n,t){this.bodyNode=e,this.driver=n,this._normalizer=t,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=function(e,n){}}return e.prototype._onRemovalComplete=function(e,n){this.onRemovalComplete(e,n)},Object.defineProperty(e.prototype,"queuedPlayers",{get:function(){var e=[];return this._namespaceList.forEach(function(n){n.players.forEach(function(n){n.queued&&e.push(n)})}),e},enumerable:!0,configurable:!0}),e.prototype.createNamespace=function(e,n){var t=new CN(e,n,this);return n.parentNode?this._balanceNamespaceList(t,n):(this.newHostElements.set(n,t),this.collectEnterElement(n)),this._namespaceLookup[e]=t},e.prototype._balanceNamespaceList=function(e,n){var t=this._namespaceList.length-1;if(t>=0){for(var l=!1,r=t;r>=0;r--)if(this.driver.containsElement(this._namespaceList[r].hostElement,n)){this._namespaceList.splice(r+1,0,e),l=!0;break}l||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(n,e),e},e.prototype.register=function(e,n){var t=this._namespaceLookup[e];return t||(t=this.createNamespace(e,n)),t},e.prototype.registerTrigger=function(e,n,t){var l=this._namespaceLookup[e];l&&l.register(n,t)&&this.totalAnimations++},e.prototype.destroy=function(e,n){var t=this;if(e){var l=this._fetchNamespace(e);this.afterFlush(function(){t.namespacesByHostElement.delete(l.hostElement),delete t._namespaceLookup[e];var n=t._namespaceList.indexOf(l);n>=0&&t._namespaceList.splice(n,1)}),this.afterFlushAnimationsDone(function(){return l.destroy(n)})}},e.prototype._fetchNamespace=function(e){return this._namespaceLookup[e]},e.prototype.fetchNamespacesByElement=function(e){var n=new Set,t=this.statesByElement.get(e);if(t)for(var l=Object.keys(t),r=0;r<l.length;r++){var i=t[l[r]].namespaceId;if(i){var o=this._fetchNamespace(i);o&&n.add(o)}}return n},e.prototype.trigger=function(e,n,t,l){if(IN(n)){var r=this._fetchNamespace(e);if(r)return r.trigger(n,t,l),!0}return!1},e.prototype.insertNode=function(e,n,t,l){if(IN(n)){var r=n[bN];if(r&&r.setForRemoval){r.setForRemoval=!1,r.setForMove=!0;var i=this.collectedLeaveElements.indexOf(n);i>=0&&this.collectedLeaveElements.splice(i,1)}if(e){var o=this._fetchNamespace(e);o&&o.insertNode(n,t)}l&&this.collectEnterElement(n)}},e.prototype.collectEnterElement=function(e){this.collectedEnterElements.push(e)},e.prototype.markElementAsDisabled=function(e,n){n?this.disabledNodes.has(e)||(this.disabledNodes.add(e),DN(e,"ng-animate-disabled")):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),kN(e,"ng-animate-disabled"))},e.prototype.removeNode=function(e,n,t){if(IN(n)){var l=e?this._fetchNamespace(e):null;l?l.removeNode(n,t):this.markElementAsRemoved(e,n,!1,t)}else this._onRemovalComplete(n,t)},e.prototype.markElementAsRemoved=function(e,n,t,l){this.collectedLeaveElements.push(n),n[bN]={namespaceId:e,setForRemoval:l,hasAnimation:t,removedBeforeQueried:!1}},e.prototype.listen=function(e,n,t,l,r){return IN(n)?this._fetchNamespace(e).listen(n,t,l,r):function(){}},e.prototype._buildInstruction=function(e,n,t,l,r){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,t,l,e.fromState.options,e.toState.options,n,r)},e.prototype.destroyInnerAnimations=function(e){var n=this,t=this.driver.query(e,".ng-trigger",!0);t.forEach(function(e){return n.destroyActiveAnimationsForElement(e)}),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,".ng-animating",!0)).forEach(function(e){return n.finishActiveQueriedAnimationOnElement(e)})},e.prototype.destroyActiveAnimationsForElement=function(e){var n=this.playersByElement.get(e);n&&n.forEach(function(e){e.queued?e.markedForDestroy=!0:e.destroy()})},e.prototype.finishActiveQueriedAnimationOnElement=function(e){var n=this.playersByQueriedElement.get(e);n&&n.forEach(function(e){return e.finish()})},e.prototype.whenRenderingDone=function(){var e=this;return new Promise(function(n){if(e.players.length)return ew(e.players).onDone(function(){return n()});n()})},e.prototype.processLeaveNode=function(e){var n=this,t=e[bN];if(t&&t.setForRemoval){if(e[bN]=SN,t.namespaceId){this.destroyInnerAnimations(e);var l=this._fetchNamespace(t.namespaceId);l&&l.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}this.driver.matchesElement(e,".ng-animate-disabled")&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(function(e){n.markElementAsDisabled(e,!1)})},e.prototype.flush=function(e){var n=this;void 0===e&&(e=-1);var t=[];if(this.newHostElements.size&&(this.newHostElements.forEach(function(e,t){return n._balanceNamespaceList(e,t)}),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(var l=0;l<this.collectedEnterElements.length;l++)DN(this.collectedEnterElements[l],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){var r=[];try{t=this._flushAnimations(r,e)}finally{for(l=0;l<r.length;l++)r[l]()}}else for(l=0;l<this.collectedLeaveElements.length;l++)this.processLeaveNode(this.collectedLeaveElements[l]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(function(e){return e()}),this._flushFns=[],this._whenQuietFns.length){var i=this._whenQuietFns;this._whenQuietFns=[],t.length?ew(t).onDone(function(){i.forEach(function(e){return e()})}):i.forEach(function(e){return e()})}},e.prototype.reportError=function(e){throw new Error("Unable to process animations due to the following failed trigger transitions\n "+e.join("\n"))},e.prototype._flushAnimations=function(e,n){var t=this,l=new Qw,r=[],o=new Map,u=[],s=new Map,a=new Map,p=new Map,h=new Set;this.disabledNodes.forEach(function(e){h.add(e);for(var n=t.driver.query(e,".ng-animate-queued",!0),l=0;l<n.length;l++)h.add(n[l])});var d=this.bodyNode,f=Array.from(this.statesByElement.keys()),g=NN(f,this.collectedEnterElements),v=new Map,m=0;g.forEach(function(e,n){var t="ng-enter"+m++;v.set(n,t),e.forEach(function(e){return DN(e,t)})});for(var y=[],S=new Set,E=new Set,b=0;b<this.collectedLeaveElements.length;b++)(U=(F=this.collectedLeaveElements[b])[bN])&&U.setForRemoval&&(y.push(F),S.add(F),U.hasAnimation?this.driver.query(F,".ng-star-inserted",!0).forEach(function(e){return S.add(e)}):E.add(F));var O=new Map,R=NN(f,Array.from(S));R.forEach(function(e,n){var t="ng-leave"+m++;O.set(n,t),e.forEach(function(e){return DN(e,t)})}),e.push(function(){g.forEach(function(e,n){var t=v.get(n);e.forEach(function(e){return kN(e,t)})}),R.forEach(function(e,n){var t=O.get(n);e.forEach(function(e){return kN(e,t)})}),y.forEach(function(e){t.processLeaveNode(e)})});for(var C=[],_=[],T=this._namespaceList.length-1;T>=0;T--)this._namespaceList[T].drainQueuedTransitions(n).forEach(function(e){var n=e.player,i=e.element;if(C.push(n),t.collectedEnterElements.length){var o=i[bN];if(o&&o.setForMove)return void n.destroy()}var c=!d||!t.driver.containsElement(d,i),h=O.get(i),f=v.get(i),g=t._buildInstruction(e,l,f,h,c);if(g.errors&&g.errors.length)_.push(g);else{if(c)return n.onStart(function(){return ww(i,g.fromStyles)}),n.onDestroy(function(){return Aw(i,g.toStyles)}),void r.push(n);if(e.isFallbackTransition)return n.onStart(function(){return ww(i,g.fromStyles)}),n.onDestroy(function(){return Aw(i,g.toStyles)}),void r.push(n);g.timelines.forEach(function(e){return e.stretchStartingKeyframe=!0}),l.append(i,g.timelines),u.push({instruction:g,player:n,element:i}),g.queriedElements.forEach(function(e){return iw(s,e,[]).push(n)}),g.preStyleProps.forEach(function(e,n){var t=Object.keys(e);if(t.length){var l=a.get(n);l||a.set(n,l=new Set),t.forEach(function(e){return l.add(e)})}}),g.postStyleProps.forEach(function(e,n){var t=Object.keys(e),l=p.get(n);l||p.set(n,l=new Set),t.forEach(function(e){return l.add(e)})})}});if(_.length){var I=[];_.forEach(function(e){I.push("@"+e.triggerName+" has failed due to:\n"),e.errors.forEach(function(e){return I.push("- "+e+"\n")})}),C.forEach(function(e){return e.destroy()}),this.reportError(I)}var A=new Map,w=new Map;u.forEach(function(e){var n=e.element;l.has(n)&&(w.set(n,n),t._beforeAnimationBuild(e.player.namespaceId,e.instruction,A))}),r.forEach(function(e){var n=e.element;t._getPreviousPlayers(n,!1,e.namespaceId,e.triggerName,null).forEach(function(e){iw(A,n,[]).push(e),e.destroy()})});var N=y.filter(function(e){return xN(e,a,p)}),P=new Map;wN(P,this.driver,E,p,YA).forEach(function(e){xN(e,a,p)&&N.push(e)});var D=new Map;g.forEach(function(e,n){wN(D,t.driver,new Set(e),a,XA)}),N.forEach(function(e){var n=P.get(e),t=D.get(e);P.set(e,i({},n,t))});var k=[],M=[],x={};u.forEach(function(e){var n=e.element,i=e.player,u=e.instruction;if(l.has(n)){if(h.has(n))return i.onDestroy(function(){return Aw(n,u.toStyles)}),i.disabled=!0,i.overrideTotalTime(u.totalTime),void r.push(i);var s=x;if(w.size>1){for(var a=n,c=[];a=a.parentNode;){var p=w.get(a);if(p){s=p;break}c.push(a)}c.forEach(function(e){return w.set(e,s)})}var d=t._buildAnimation(i.namespaceId,u,A,o,D,P);if(i.setRealPlayer(d),s===x)k.push(i);else{var f=t.playersByElement.get(s);f&&f.length&&(i.parentPlayer=ew(f)),r.push(i)}}else ww(n,u.fromStyles),i.onDestroy(function(){return Aw(n,u.toStyles)}),M.push(i),h.has(n)&&r.push(i)}),M.forEach(function(e){var n=o.get(e.element);if(n&&n.length){var t=ew(n);e.setRealPlayer(t)}}),r.forEach(function(e){e.parentPlayer?e.syncPlayerEvents(e.parentPlayer):e.destroy()});for(var L=0;L<y.length;L++){var F,U=(F=y[L])[bN];if(kN(F,"ng-leave"),!U||!U.hasAnimation){var H=[];if(s.size){var G=s.get(F);G&&G.length&&H.push.apply(H,c(G));for(var B=this.driver.query(F,".ng-animating",!0),V=0;V<B.length;V++){var W=s.get(B[V]);W&&W.length&&H.push.apply(H,c(W))}}var j=H.filter(function(e){return!e.destroyed});j.length?MN(this,F,j):this.processLeaveNode(F)}}return y.length=0,k.forEach(function(e){t.players.push(e),e.onDone(function(){e.destroy();var n=t.players.indexOf(e);t.players.splice(n,1)}),e.play()}),k},e.prototype.elementContainsData=function(e,n){var t=!1,l=n[bN];return l&&l.setForRemoval&&(t=!0),this.playersByElement.has(n)&&(t=!0),this.playersByQueriedElement.has(n)&&(t=!0),this.statesByElement.has(n)&&(t=!0),this._fetchNamespace(e).elementContainsData(n)||t},e.prototype.afterFlush=function(e){this._flushFns.push(e)},e.prototype.afterFlushAnimationsDone=function(e){this._whenQuietFns.push(e)},e.prototype._getPreviousPlayers=function(e,n,t,l,r){var i=[];if(n){var o=this.playersByQueriedElement.get(e);o&&(i=o)}else{var u=this.playersByElement.get(e);if(u){var s=!r||"void"==r;u.forEach(function(e){e.queued||(s||e.triggerName==l)&&i.push(e)})}}return(t||l)&&(i=i.filter(function(e){return!(t&&t!=e.namespaceId||l&&l!=e.triggerName)})),i},e.prototype._beforeAnimationBuild=function(e,n,t){var l,r,i=n.element,o=n.isRemovalTransition?void 0:e,u=n.isRemovalTransition?void 0:n.triggerName,a=function(e){var l=e.element,r=l!==i,s=iw(t,l,[]);c._getPreviousPlayers(l,r,o,u,n.toState).forEach(function(e){var n=e.getRealPlayer();n.beforeDestroy&&n.beforeDestroy(),e.destroy(),s.push(e)})},c=this;try{for(var p=s(n.timelines),h=p.next();!h.done;h=p.next())a(h.value)}catch(d){l={error:d}}finally{try{h&&!h.done&&(r=p.return)&&r.call(p)}finally{if(l)throw l.error}}ww(i,n.fromStyles)},e.prototype._buildAnimation=function(e,n,t,l,r,i){var o=this,u=n.triggerName,s=n.element,a=[],c=new Set,p=new Set,h=n.timelines.map(function(n){var h=n.element;c.add(h);var d=h[bN];if(d&&d.removedBeforeQueried)return new QA(n.duration,n.delay);var f,g,v=h!==s,m=(f=(t.get(h)||yN).map(function(e){return e.getRealPlayer()}),g=[],function e(n,t){for(var l=0;l<n.length;l++){var r=n[l];r instanceof ZA?e(r.players,t):t.push(r)}}(f,g),g).filter(function(e){return!!e.element&&e.element===h}),y=r.get(h),S=i.get(h),E=nw(0,o._normalizer,0,n.keyframes,y,S),b=o._buildPlayer(n,E,m);if(n.subTimeline&&l&&p.add(h),v){var O=new TN(e,u,h);O.setRealPlayer(b),a.push(O)}return b});a.forEach(function(e){iw(o.playersByQueriedElement,e.element,[]).push(e),e.onDone(function(){return function(e,n,t){var l;if(e instanceof Map){if(l=e.get(n)){if(l.length){var r=l.indexOf(t);l.splice(r,1)}0==l.length&&e.delete(n)}}else(l=e[n])&&(l.length&&(r=l.indexOf(t),l.splice(r,1)),0==l.length&&delete e[n]);return l}(o.playersByQueriedElement,e.element,e)})}),c.forEach(function(e){return DN(e,"ng-animating")});var d=ew(h);return d.onDestroy(function(){c.forEach(function(e){return kN(e,"ng-animating")}),Aw(s,n.toStyles)}),p.forEach(function(e){iw(l,e,[]).push(d)}),d},e.prototype._buildPlayer=function(e,n,t){return n.length>0?this.driver.animate(e.element,n,e.duration,e.delay,e.easing,t):new QA(e.duration,e.delay)},e}(),TN=function(){function e(e,n,t){this.namespaceId=e,this.triggerName=n,this.element=t,this._player=new QA,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}return e.prototype.setRealPlayer=function(e){var n=this;this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(function(t){n._queuedCallbacks[t].forEach(function(n){return tw(e,t,void 0,n)})}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)},e.prototype.getRealPlayer=function(){return this._player},e.prototype.overrideTotalTime=function(e){this.totalTime=e},e.prototype.syncPlayerEvents=function(e){var n=this,t=this._player;t.triggerCallback&&e.onStart(function(){return t.triggerCallback("start")}),e.onDone(function(){return n.finish()}),e.onDestroy(function(){return n.destroy()})},e.prototype._queueEvent=function(e,n){iw(this._queuedCallbacks,e,[]).push(n)},e.prototype.onDone=function(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)},e.prototype.onStart=function(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)},e.prototype.onDestroy=function(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)},e.prototype.init=function(){this._player.init()},e.prototype.hasStarted=function(){return!this.queued&&this._player.hasStarted()},e.prototype.play=function(){!this.queued&&this._player.play()},e.prototype.pause=function(){!this.queued&&this._player.pause()},e.prototype.restart=function(){!this.queued&&this._player.restart()},e.prototype.finish=function(){this._player.finish()},e.prototype.destroy=function(){this.destroyed=!0,this._player.destroy()},e.prototype.reset=function(){!this.queued&&this._player.reset()},e.prototype.setPosition=function(e){this.queued||this._player.setPosition(e)},e.prototype.getPosition=function(){return this.queued?0:this._player.getPosition()},e.prototype.triggerCallback=function(e){var n=this._player;n.triggerCallback&&n.triggerCallback(e)},e}();function IN(e){return e&&1===e.nodeType}function AN(e,n){var t=e.style.display;return e.style.display=null!=n?n:"none",t}function wN(e,n,t,l,r){var i=[];t.forEach(function(e){return i.push(AN(e))});var o=[];l.forEach(function(t,l){var i={};t.forEach(function(e){var t=i[e]=n.computeStyle(l,e,r);t&&0!=t.length||(l[bN]=EN,o.push(l))}),e.set(l,i)});var u=0;return t.forEach(function(e){return AN(e,i[u++])}),o}function NN(e,n){var t=new Map;if(e.forEach(function(e){return t.set(e,[])}),0==n.length)return t;var l=new Set(n),r=new Map;return n.forEach(function(e){var n=function e(n){if(!n)return 1;var i=r.get(n);if(i)return i;var o=n.parentNode;return i=t.has(o)?o:l.has(o)?1:e(o),r.set(n,i),i}(e);1!==n&&t.get(n).push(e)}),t}var PN="$$classes";function DN(e,n){if(e.classList)e.classList.add(n);else{var t=e[PN];t||(t=e[PN]={}),t[n]=!0}}function kN(e,n){if(e.classList)e.classList.remove(n);else{var t=e[PN];t&&delete t[n]}}function MN(e,n,t){ew(t).onDone(function(){return e.processLeaveNode(n)})}function xN(e,n,t){var l=t.get(e);if(!l)return!1;var r=n.get(e);return r?l.forEach(function(e){return r.add(e)}):n.set(e,l),t.delete(e),!0}var LN=function(){function e(e,n,t){var l=this;this.bodyNode=e,this._driver=n,this._triggerCache={},this.onRemovalComplete=function(e,n){},this._transitionEngine=new _N(e,n,t),this._timelineEngine=new mN(e,n,t),this._transitionEngine.onRemovalComplete=function(e,n){return l.onRemovalComplete(e,n)}}return e.prototype.registerTrigger=function(e,n,t,l,r){var i=e+"-"+l,o=this._triggerCache[i];if(!o){var u=[],s=Ww(this._driver,r,u);if(u.length)throw new Error('The animation trigger "'+l+'" has failed to build due to the following errors:\n - '+u.join("\n - "));o=function(e,n){return new fN(e,n)}(l,s),this._triggerCache[i]=o}this._transitionEngine.registerTrigger(n,l,o)},e.prototype.register=function(e,n){this._transitionEngine.register(e,n)},e.prototype.destroy=function(e,n){this._transitionEngine.destroy(e,n)},e.prototype.onInsert=function(e,n,t,l){this._transitionEngine.insertNode(e,n,t,l)},e.prototype.onRemove=function(e,n,t){this._transitionEngine.removeNode(e,n,t)},e.prototype.disableAnimations=function(e,n){this._transitionEngine.markElementAsDisabled(e,n)},e.prototype.process=function(e,n,t,l){if("@"==t.charAt(0)){var r=a(ow(t),2);this._timelineEngine.command(r[0],n,r[1],l)}else this._transitionEngine.trigger(e,n,t,l)},e.prototype.listen=function(e,n,t,l,r){if("@"==t.charAt(0)){var i=a(ow(t),2);return this._timelineEngine.listen(i[0],n,i[1],r)}return this._transitionEngine.listen(e,n,t,l,r)},e.prototype.flush=function(e){void 0===e&&(e=-1),this._transitionEngine.flush(e)},Object.defineProperty(e.prototype,"players",{get:function(){return this._transitionEngine.players.concat(this._timelineEngine.players)},enumerable:!0,configurable:!0}),e.prototype.whenRenderingDone=function(){return this._transitionEngine.whenRenderingDone()},e}(),FN=function(e){function n(n,t){var l=e.call(this)||this;return l._nextAnimationId=0,l._renderer=n.createRenderer(t.body,{id:"0",encapsulation:Ue.None,styles:[],data:{animation:[]}}),l}return r(n,e),n.prototype.build=function(e){var n=this._nextAnimationId.toString();this._nextAnimationId++;var t=Array.isArray(e)?KA(e):e;return GN(this._renderer,null,n,"register",[t]),new UN(n,this._renderer)},n}(jA),UN=function(e){function n(n,t){var l=e.call(this)||this;return l._id=n,l._renderer=t,l}return r(n,e),n.prototype.create=function(e,n){return new HN(this._id,e,n||{},this._renderer)},n}(zA),HN=function(){function e(e,n,t,l){this.id=e,this.element=n,this._renderer=l,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",t)}return e.prototype._listen=function(e,n){return this._renderer.listen(this.element,"@@"+this.id+":"+e,n)},e.prototype._command=function(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];return GN(this._renderer,this.element,this.id,e,n)},e.prototype.onDone=function(e){this._listen("done",e)},e.prototype.onStart=function(e){this._listen("start",e)},e.prototype.onDestroy=function(e){this._listen("destroy",e)},e.prototype.init=function(){this._command("init")},e.prototype.hasStarted=function(){return this._started},e.prototype.play=function(){this._command("play"),this._started=!0},e.prototype.pause=function(){this._command("pause")},e.prototype.restart=function(){this._command("restart")},e.prototype.finish=function(){this._command("finish")},e.prototype.destroy=function(){this._command("destroy")},e.prototype.reset=function(){this._command("reset")},e.prototype.setPosition=function(e){this._command("setPosition",e)},e.prototype.getPosition=function(){return 0},e}();function GN(e,n,t,l,r){return e.setProperty(n,"@@"+t+":"+l,r)}var BN=function(){function e(e,n,t){this.delegate=e,this.engine=n,this._zone=t,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),n.onRemovalComplete=function(e,n){n&&n.parentNode(e)&&n.removeChild(e.parentNode,e)}}return e.prototype.createRenderer=function(e,n){var t=this,l=this.delegate.createRenderer(e,n);if(!(e&&n&&n.data&&n.data.animation)){var r=this._rendererCache.get(l);return r||(r=new VN("",l,this.engine),this._rendererCache.set(l,r)),r}var i=n.id,o=n.id+"-"+this._currentId;return this._currentId++,this.engine.register(o,e),n.data.animation.forEach(function(n){return t.engine.registerTrigger(i,o,e,n.name,n)}),new WN(this,o,l,this.engine)},e.prototype.begin=function(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()},e.prototype._scheduleCountTask=function(){var e=this;this.promise.then(function(){e._microtaskId++})},e.prototype.scheduleListenerCallback=function(e,n,t){var l=this;e>=0&&e<this._microtaskId?this._zone.run(function(){return n(t)}):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(function(){l._zone.run(function(){l._animationCallbacksBuffer.forEach(function(e){var n=a(e,2);(0,n[0])(n[1])}),l._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([n,t]))},e.prototype.end=function(){var e=this;this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(function(){e._scheduleCountTask(),e.engine.flush(e._microtaskId)}),this.delegate.end&&this.delegate.end()},e.prototype.whenRenderingDone=function(){return this.engine.whenRenderingDone()},e}(),VN=function(){function e(e,n,t){this.namespaceId=e,this.delegate=n,this.engine=t,this.destroyNode=this.delegate.destroyNode?function(e){return n.destroyNode(e)}:null}return Object.defineProperty(e.prototype,"data",{get:function(){return this.delegate.data},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()},e.prototype.createElement=function(e,n){return this.delegate.createElement(e,n)},e.prototype.createComment=function(e){return this.delegate.createComment(e)},e.prototype.createText=function(e){return this.delegate.createText(e)},e.prototype.appendChild=function(e,n){this.delegate.appendChild(e,n),this.engine.onInsert(this.namespaceId,n,e,!1)},e.prototype.insertBefore=function(e,n,t){this.delegate.insertBefore(e,n,t),this.engine.onInsert(this.namespaceId,n,e,!0)},e.prototype.removeChild=function(e,n){this.engine.onRemove(this.namespaceId,n,this.delegate)},e.prototype.selectRootElement=function(e,n){return this.delegate.selectRootElement(e,n)},e.prototype.parentNode=function(e){return this.delegate.parentNode(e)},e.prototype.nextSibling=function(e){return this.delegate.nextSibling(e)},e.prototype.setAttribute=function(e,n,t,l){this.delegate.setAttribute(e,n,t,l)},e.prototype.removeAttribute=function(e,n,t){this.delegate.removeAttribute(e,n,t)},e.prototype.addClass=function(e,n){this.delegate.addClass(e,n)},e.prototype.removeClass=function(e,n){this.delegate.removeClass(e,n)},e.prototype.setStyle=function(e,n,t,l){this.delegate.setStyle(e,n,t,l)},e.prototype.removeStyle=function(e,n,t){this.delegate.removeStyle(e,n,t)},e.prototype.setProperty=function(e,n,t){"@"==n.charAt(0)&&"@.disabled"==n?this.disableAnimations(e,!!t):this.delegate.setProperty(e,n,t)},e.prototype.setValue=function(e,n){this.delegate.setValue(e,n)},e.prototype.listen=function(e,n,t){return this.delegate.listen(e,n,t)},e.prototype.disableAnimations=function(e,n){this.engine.disableAnimations(e,n)},e}(),WN=function(e){function n(n,t,l,r){var i=e.call(this,t,l,r)||this;return i.factory=n,i.namespaceId=t,i}return r(n,e),n.prototype.setProperty=function(e,n,t){"@"==n.charAt(0)?"."==n.charAt(1)&&"@.disabled"==n?this.disableAnimations(e,t=void 0===t||!!t):this.engine.process(this.namespaceId,e,n.substr(1),t):this.delegate.setProperty(e,n,t)},n.prototype.listen=function(e,n,t){var l,r,i,o=this;if("@"==n.charAt(0)){var u=function(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(e),s=n.substr(1),c="";return"@"!=s.charAt(0)&&(s=(l=a((r=s,i=r.indexOf("."),[r.substring(0,i),r.substr(i+1)]),2))[0],c=l[1]),this.engine.listen(this.namespaceId,u,s,c,function(e){o.factory.scheduleListenerCallback(e._data||-1,t,e)})}return this.delegate.listen(e,n,t)},n}(VN),jN=function(e){function n(n,t,l){return e.call(this,n.body,t,l)||this}return r(n,e),n}(LN);function zN(){return new uN}function YN(e,n,t){return new BN(e,n,t)}var KN=new ye("AnimationModuleType"),qN=function(){return function(){}}(),$N=function(){function e(e,n){this.gameService=e,this.router=n}return e.prototype.canActivate=function(e,n){switch(e.routeConfig.path){case"crafting":return!!this.gameService.isEnabled(Eu.CRAFTING)||(this.goToError(),!1);case"market":return!!this.gameService.isEnabled(Eu.MARKET)||(this.goToError(),!1);case"research":return!!this.gameService.isEnabled(Eu.RESEARCH)||(this.goToError(),!1);case"army":return!!this.gameService.isEnabled(Eu.ARMY)||(this.goToError(),!1);case"religion":return!!this.gameService.isEnabled(Eu.RELIGION)||(this.goToError(),!1);case"weather":return!!this.gameService.isEnabled(Eu.WEATHER)||(this.goToError(),!1);case"mountains":return!!this.gameService.isEnabled(Eu.MOUNTAINS)||(this.goToError(),!1);case"fort":return!!this.gameService.isEnabled(Eu.FORT)||(this.goToError(),!1);case"sea":return!!this.gameService.isEnabled(Eu.SEA)||(this.goToError(),!1);case"field":return!!this.gameService.isEnabled(Eu.FIELD)||(this.goToError(),!1);case"plateau":return!!this.gameService.isEnabled(Eu.PLATEAU)||(this.goToError(),!1);default:return!1}},e.prototype.goToError=function(){this.router.navigate(["/404"],{skipLocationChange:!0})},e.ngInjectableDef=ve({factory:function(){return new e(Ye(wg),Ye(_d))},token:e,providedIn:"root"}),e}(),QN=function(){function e(){this.handlers={}}return e.prototype.shouldDetach=function(e){return e.routeConfig&&("village"===e.routeConfig.path||"fort"===e.routeConfig.path||"forest"===e.routeConfig.path||"field"===e.routeConfig.path||"mountains"===e.routeConfig.path||"plateau"===e.routeConfig.path||"sea"===e.routeConfig.path)},e.prototype.store=function(e,n){this.handlers[e.routeConfig.path]=n},e.prototype.shouldAttach=function(e){return!!e.routeConfig&&!!this.handlers[e.routeConfig.path]},e.prototype.retrieve=function(e){return e.routeConfig?this.handlers[e.routeConfig.path]:null},e.prototype.shouldReuseRoute=function(e,n){return!1},e}(),ZN=function(){return function(){}}(),XN=fu(cs,[ps],function(e){return function(e){for(var n={},t=[],l=!1,r=0;r<e.length;r++){var i=e[r];i.token===En&&!0===i.value&&(l=!0),1073741824&i.flags&&t.push(i.token),i.index=r,n[pr(i.token)]=i}return{factory:null,providersByKey:n,providers:e,modules:t,isRoot:l}}([ei(512,Tn,In,[[8,[tf,sf,$g,Im,mS,JS,LE,ib,Sb,xb,gR,kR,eC,SC,jC,r_,C_,M_,$_,tT,WA]],[3,Tn],wn]),ei(4608,Pf,Pf,[]),ei(5120,Kl,Ql,[[3,Kl]]),ei(4608,Ps,Ds,[Kl,[2,Ns]]),ei(5120,Nt,Pt,[]),ei(5120,Bl,ql,[]),ei(5120,Vl,$l,[]),ei(4608,Qc,Zc,[Zs]),ei(6144,Hn,null,[Qc]),ei(4608,Wc,zc,[]),ei(5120,vc,function(e,n,t,l,r,i,o,u){return[new Bc(e,n,t),new $c(l),new Yc(r,i,o,u)]},[Zs,Zt,Mt,Zs,Zs,Wc,Lt,[2,jc]]),ei(4608,mc,mc,[vc,Zt]),ei(135680,Ec,Ec,[Zs]),ei(4608,Ic,Ic,[mc,Ec,Nt]),ei(4608,Sw,yw,[]),ei(5120,oN,zN,[]),ei(4608,LN,jN,[Zs,Sw,oN]),ei(5120,Mn,YN,[Ic,LN,Zt]),ei(6144,Sc,null,[Ec]),ei(4608,il,il,[Zt]),ei(5120,gh,qd,[_d]),ei(4608,xd,xd,[]),ei(6144,kd,null,[xd]),ei(135680,Ld,Ld,[_d,vt,jt,on,kd]),ei(4608,Md,Md,[]),ei(5120,Fd,Wd,[_d,ea,Ud]),ei(5120,Xd,Zd,[$d]),ei(5120,xt,function(e){return[e]},[Xd]),ei(4608,jA,FN,[Mn,uc]),ei(4608,Uv,Uv,[Zs,Zt,gv,Lv]),ei(4608,xg,xg,[Tg,Sg,wg,Ig,kg,Dg]),ei(1073742336,hg,hg,[]),ei(1073742336,dg,dg,[]),ei(1073742336,Qs,Qs,[]),ei(1024,_t,ip,[]),ei(1024,al,function(){return[Bd()]},[]),ei(512,$d,$d,[on]),ei(1024,At,function(e,n){return[(t=e,dc("probe",gc),dc("coreTokens",i({},fc,(t||[]).reduce(function(e,n){return e[n.name]=n.token,e},{}))),function(){return gc}),Qd(n)];var t},[[2,al],$d]),ei(512,wt,wt,[[2,At]]),ei(131584,fl,fl,[Zt,Lt,on,_t,Tn,wt]),ei(1073742336,Zl,Zl,[fl]),ei(1073742336,op,op,[[3,op]]),ei(1024,Hd,zd,[[3,_d]]),ei(512,Kp,qp,[]),ei(512,Nd,Nd,[]),ei(256,Ud,{},[]),ei(1024,fs,jd,[hs,[2,gs],Ud]),ei(512,vs,vs,[fs]),ei(512,jt,jt,[]),ei(512,vt,Sl,[jt,[2,ml]]),ei(1024,yd,function(){return[[{path:"",redirectTo:"regions/village",pathMatch:"full"},{path:"404",component:lf,pathMatch:"full"},{path:"resources",component:Lg},{path:"crafting",component:mm,canActivate:[$N]},{path:"market",component:aS,canActivate:[$N]},{path:"research",component:BS,canActivate:[$N]},{path:"army",component:EE,canActivate:[$N]},{path:"religion",component:jE,canActivate:[$N]},{path:"weather",component:ub,canActivate:[$N]},{path:"royal",component:Nb},{path:"regions",children:[{path:"",redirectTo:"village",pathMatch:"full"},{path:"village",component:ZO},{path:"fort",component:vR,canActivate:[$N]},{path:"forest",component:xR},{path:"field",component:tC,canActivate:[$N]},{path:"mountains",component:bC,canActivate:[$N]},{path:"plateau",component:YC,canActivate:[$N]},{path:"sea",component:o_,canActivate:[$N]}]},{path:"management",children:[{path:"",redirectTo:"general",pathMatch:"full"},{path:"general",component:w_},{path:"effects",component:x_},{path:"forestM",component:Q_}]},{path:"**",redirectTo:"regions/village",pathMatch:"full"}]]},[]),ei(512,vd,QN,[]),ei(1024,_d,Kd,[fl,Kp,Nd,vs,on,vt,jt,yd,Ud,[2,Ed],[2,vd]]),ei(1073742336,Vd,Vd,[[2,Hd],[2,_d]]),ei(1073742336,ZN,ZN,[]),ei(1073742336,qN,qN,[]),ei(1073742336,Kv,Kv,[]),ei(1073742336,cs,cs,[]),ei(256,En,!0,[]),ei(256,KN,"NoopAnimations",[])])});Gu.production&&function(){if(Vn)throw new Error("Cannot enable prod mode after platform setup.");Bn=!1}(),rp().bootstrapModuleFactory(XN).catch(function(e){return console.log(e)})}},[[0,0]]]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,n,t){e.exports=t("zUnb")},crnd:function(e,n){function t(e){return Promise.resolve().then(function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n})}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id="crnd"},zUnb:function(e,n,t){"use strict";function l(e){return"function"==typeof e}t.r(n);let i=!1;const r={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){i=e},get useDeprecatedSynchronousErrorHandling(){return i}};function s(e){setTimeout(()=>{throw e},0)}const u={closed:!0,next(e){},error(e){if(r.useDeprecatedSynchronousErrorHandling)throw e;s(e)},complete(){}},o=Array.isArray||(e=>e&&"number"==typeof e.length);function a(e){return null!==e&&"object"==typeof e}function c(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((e,n)=>`${n+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}c.prototype=Object.create(Error.prototype);const h=c,d=(()=>{class e{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}unsubscribe(){let n;if(this.closed)return;let{_parentOrParents:t,_unsubscribe:i,_subscriptions:r}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof e)t.remove(this);else if(null!==t)for(let e=0;e<t.length;++e)t[e].remove(this);if(l(i))try{i.call(this)}catch(s){n=s instanceof h?g(s.errors):[s]}if(o(r)){let e=-1,t=r.length;for(;++e<t;){const t=r[e];if(a(t))try{t.unsubscribe()}catch(s){n=n||[],s instanceof h?n=n.concat(g(s.errors)):n.push(s)}}}if(n)throw new h(n)}add(n){let t=n;if(!n)return e.EMPTY;switch(typeof n){case"function":t=new e(n);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof e)){const n=t;(t=new e)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+n+" added to Subscription.")}let{_parentOrParents:l}=t;if(null===l)t._parentOrParents=this;else if(l instanceof e){if(l===this)return t;t._parentOrParents=[l,this]}else{if(-1!==l.indexOf(this))return t;l.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[t]:i.push(t),t}remove(e){const n=this._subscriptions;if(n){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}}return e.EMPTY=function(e){return e.closed=!0,e}(new e),e})();function g(e){return e.reduce((e,n)=>e.concat(n instanceof h?n.errors:n),[])}const p="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class m extends d{constructor(e,n,t){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=u;break;case 1:if(!e){this.destination=u;break}if("object"==typeof e){e instanceof m?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new f(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new f(this,e,n,t)}}[p](){return this}static create(e,n,t){const l=new m(e,n,t);return l.syncErrorThrowable=!1,l}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class f extends m{constructor(e,n,t,i){let r;super(),this._parentSubscriber=e;let s=this;l(n)?r=n:n&&(r=n.next,t=n.error,i=n.complete,n!==u&&(l((s=Object.create(n)).unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=r,this._error=t,this._complete=i}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:n}=this;r.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?this.__tryOrSetError(n,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:n}=this,{useDeprecatedSynchronousErrorHandling:t}=r;if(this._error)t&&n.syncErrorThrowable?(this.__tryOrSetError(n,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(n.syncErrorThrowable)t?(n.syncErrorValue=e,n.syncErrorThrown=!0):s(e),this.unsubscribe();else{if(this.unsubscribe(),t)throw e;s(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const n=()=>this._complete.call(this._context);r.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,n){try{e.call(this._context,n)}catch(t){if(this.unsubscribe(),r.useDeprecatedSynchronousErrorHandling)throw t;s(t)}}__tryOrSetError(e,n,t){if(!r.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,t)}catch(l){return r.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=l,e.syncErrorThrown=!0,!0):(s(l),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const S="function"==typeof Symbol&&Symbol.observable||"@@observable";function E(){}function v(...e){return b(e)}function b(e){return e?1===e.length?e[0]:function(n){return e.reduce((e,n)=>n(e),n)}:E}const O=(()=>{class e{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(n){const t=new e;return t.source=this,t.operator=n,t}subscribe(e,n,t){const{operator:l}=this,i=function(e,n,t){if(e){if(e instanceof m)return e;if(e[p])return e[p]()}return e||n||t?new m(e,n,t):new m(u)}(e,n,t);if(i.add(l?l.call(i,this.source):this.source||r.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),r.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}_trySubscribe(e){try{return this._subscribe(e)}catch(n){r.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=n),function(e){for(;e;){const{closed:n,destination:t,isStopped:l}=e;if(n||l)return!1;e=t&&t instanceof m?t:null}return!0}(e)?e.error(n):console.warn(n)}}forEach(e,n){return new(n=R(n))((n,t)=>{let l;l=this.subscribe(n=>{try{e(n)}catch(i){t(i),l&&l.unsubscribe()}},t,n)})}_subscribe(e){const{source:n}=this;return n&&n.subscribe(e)}[S](){return this}pipe(...e){return 0===e.length?this:b(e)(this)}toPromise(e){return new(e=R(e))((e,n)=>{let t;this.subscribe(e=>t=e,e=>n(e),()=>e(t))})}}return e.create=n=>new e(n),e})();function R(e){if(e||(e=r.Promise||Promise),!e)throw new Error("no Promise impl found");return e}function T(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}T.prototype=Object.create(Error.prototype);const C=T;class I extends d{constructor(e,n){super(),this.subject=e,this.subscriber=n,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,n=e.observers;if(this.subject=null,!n||0===n.length||e.isStopped||e.closed)return;const t=n.indexOf(this.subscriber);-1!==t&&n.splice(t,1)}}class y extends m{constructor(e){super(e),this.destination=e}}const _=(()=>{class e extends O{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[p](){return new y(this)}lift(e){const n=new A(this,this);return n.operator=e,n}next(e){if(this.closed)throw new C;if(!this.isStopped){const{observers:n}=this,t=n.length,l=n.slice();for(let i=0;i<t;i++)l[i].next(e)}}error(e){if(this.closed)throw new C;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:n}=this,t=n.length,l=n.slice();for(let i=0;i<t;i++)l[i].error(e);this.observers.length=0}complete(){if(this.closed)throw new C;this.isStopped=!0;const{observers:e}=this,n=e.length,t=e.slice();for(let l=0;l<n;l++)t[l].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new C;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new C;return this.hasError?(e.error(this.thrownError),d.EMPTY):this.isStopped?(e.complete(),d.EMPTY):(this.observers.push(e),new I(this,e))}asObservable(){const e=new O;return e.source=this,e}}return e.create=(e,n)=>new A(e,n),e})();class A extends _{constructor(e,n){super(),this.destination=e,this.source=n}next(e){const{destination:n}=this;n&&n.next&&n.next(e)}error(e){const{destination:n}=this;n&&n.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:n}=this;return n?this.source.subscribe(e):d.EMPTY}}function w(e){return e&&"function"==typeof e.schedule}class N extends m{constructor(e,n,t){super(),this.parent=e,this.outerValue=n,this.outerIndex=t,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}const P=e=>n=>{for(let t=0,l=e.length;t<l&&!n.closed;t++)n.next(e[t]);n.complete()};function k(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const x=k(),M=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function D(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}const L=e=>{if(e&&"function"==typeof e[S])return(e=>n=>{const t=e[S]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(n)})(e);if(M(e))return P(e);if(D(e))return(e=>n=>(e.then(e=>{n.closed||(n.next(e),n.complete())},e=>n.error(e)).then(null,s),n))(e);if(e&&"function"==typeof e[x])return(e=>n=>{const t=e[x]();for(;;){const e=t.next();if(e.done){n.complete();break}if(n.next(e.value),n.closed)break}return"function"==typeof t.return&&n.add(()=>{t.return&&t.return()}),n})(e);{const n=a(e)?"an invalid object":`'${e}'`;throw new TypeError(`You provided ${n} where a stream was expected.`+" You can provide an Observable, Promise, Array, or Iterable.")}};function F(e,n,t,l,i=new N(e,t,l)){if(!i.closed)return n instanceof O?n.subscribe(i):L(n)(i)}class H extends m{notifyNext(e,n,t,l,i){this.destination.next(n)}notifyError(e,n){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}function U(e,n){return function(t){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return t.lift(new G(e,n))}}class G{constructor(e,n){this.project=e,this.thisArg=n}call(e,n){return n.subscribe(new B(e,this.project,this.thisArg))}}class B extends m{constructor(e,n,t){super(e),this.project=n,this.count=0,this.thisArg=t||this}_next(e){let n;try{n=this.project.call(this.thisArg,e,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(n)}}function W(e,n){return new O(t=>{const l=new d;let i=0;return l.add(n.schedule(function(){i!==e.length?(t.next(e[i++]),t.closed||l.add(this.schedule())):t.complete()})),l})}function V(e,n){return n?function(e,n){if(null!=e){if(function(e){return e&&"function"==typeof e[S]}(e))return function(e,n){return new O(t=>{const l=new d;return l.add(n.schedule(()=>{const i=e[S]();l.add(i.subscribe({next(e){l.add(n.schedule(()=>t.next(e)))},error(e){l.add(n.schedule(()=>t.error(e)))},complete(){l.add(n.schedule(()=>t.complete()))}}))})),l})}(e,n);if(D(e))return function(e,n){return new O(t=>{const l=new d;return l.add(n.schedule(()=>e.then(e=>{l.add(n.schedule(()=>{t.next(e),l.add(n.schedule(()=>t.complete()))}))},e=>{l.add(n.schedule(()=>t.error(e)))}))),l})}(e,n);if(M(e))return W(e,n);if(function(e){return e&&"function"==typeof e[x]}(e)||"string"==typeof e)return function(e,n){if(!e)throw new Error("Iterable cannot be null");return new O(t=>{const l=new d;let i;return l.add(()=>{i&&"function"==typeof i.return&&i.return()}),l.add(n.schedule(()=>{i=e[x](),l.add(n.schedule(function(){if(t.closed)return;let e,n;try{const r=i.next();e=r.value,n=r.done}catch(l){return void t.error(l)}n?t.complete():(t.next(e),this.schedule())}))})),l})}(e,n)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,n):e instanceof O?e:new O(L(e))}function z(e,n,t=Number.POSITIVE_INFINITY){return"function"==typeof n?l=>l.pipe(z((t,l)=>V(e(t,l)).pipe(U((e,i)=>n(t,e,l,i))),t)):("number"==typeof n&&(t=n),n=>n.lift(new Y(e,t)))}class Y{constructor(e,n=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=n}call(e,n){return n.subscribe(new $(e,this.project,this.concurrent))}}class $ extends H{constructor(e,n,t=Number.POSITIVE_INFINITY){super(e),this.project=n,this.concurrent=t,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let n;const t=this.index++;try{n=this.project(e,t)}catch(l){return void this.destination.error(l)}this.active++,this._innerSub(n,e,t)}_innerSub(e,n,t){const l=new N(this,void 0,void 0);this.destination.add(l),F(this,e,n,t,l)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e,n,t,l,i){this.destination.next(n)}notifyComplete(e){const n=this.buffer;this.remove(e),this.active--,n.length>0?this._next(n.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function K(e){return e}function j(e=Number.POSITIVE_INFINITY){return z(K,e)}function q(e,n){return n?W(e,n):new O(P(e))}function X(...e){let n=Number.POSITIVE_INFINITY,t=null,l=e[e.length-1];return w(l)?(t=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(n=e.pop())):"number"==typeof l&&(n=e.pop()),null===t&&1===e.length&&e[0]instanceof O?e[0]:j(n)(q(e,t))}function Q(){return function(e){return e.lift(new Z(e))}}class Z{constructor(e){this.connectable=e}call(e,n){const{connectable:t}=this;t._refCount++;const l=new J(e,t),i=n.subscribe(l);return l.closed||(l.connection=t.connect()),i}}class J extends m{constructor(e,n){super(e),this.connectable=n}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const n=e._refCount;if(n<=0)return void(this.connection=null);if(e._refCount=n-1,n>1)return void(this.connection=null);const{connection:t}=this,l=e._connection;this.connection=null,!l||t&&l!==t||l.unsubscribe()}}const ee=class extends O{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new d).add(this.source.subscribe(new te(this.getSubject(),this))),e.closed&&(this._connection=null,e=d.EMPTY)),e}refCount(){return Q()(this)}}.prototype,ne={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:ee._subscribe},_isComplete:{value:ee._isComplete,writable:!0},getSubject:{value:ee.getSubject},connect:{value:ee.connect},refCount:{value:ee.refCount}};class te extends y{constructor(e,n){super(e),this.connectable=n}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const n=e._connection;e._refCount=0,e._subject=null,e._connection=null,n&&n.unsubscribe()}}}function le(){return new _}const ie="__parameters__";function re(e,n,t){const l=function(e){return function(...n){if(e){const t=e(...n);for(const e in t)this[e]=t[e]}}}(n);function i(...e){if(this instanceof i)return l.apply(this,e),this;const n=new i(...e);return t.annotation=n,t;function t(e,t,l){const i=e.hasOwnProperty(ie)?e[ie]:Object.defineProperty(e,ie,{value:[]})[ie];for(;i.length<=l;)i.push(null);return(i[l]=i[l]||[]).push(n),e}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i}const se=re("Inject",e=>({token:e})),ue=re("Optional"),oe=re("Self"),ae=re("SkipSelf");var ce=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({});function he(e){for(let n in e)if(e[n]===he)return n;throw Error("Could not find renamed property on target object.")}function de(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function ge(e){const n=e[pe];return n&&n.token===e?n:null}const pe=he({ngInjectableDef:he});function me(e){if("string"==typeof e)return e;if(e instanceof Array)return"["+e.map(me).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const n=e.toString();if(null==n)return""+n;const t=n.indexOf("\n");return-1===t?n:n.substring(0,t)}const fe=he({__forward_ref__:he});function Se(e){return e.__forward_ref__=Se,e.toString=function(){return me(this())},e}function Ee(e){const n=e;return"function"==typeof n&&n.hasOwnProperty(fe)&&n.__forward_ref__===Se?n():e}const ve="undefined"!=typeof globalThis&&globalThis,be="undefined"!=typeof window&&window,Oe="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Re="undefined"!=typeof global&&global,Te=ve||Re||be||Oe;class Ce{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.ngInjectableDef=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.ngInjectableDef=de({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Ie=new Ce("INJECTOR",-1),ye=new Object,_e="ngTempTokenPath",Ae="ngTokenPath",we=/\n/gm,Ne="\u0275",Pe="__source",ke=he({provide:String,useValue:he});let xe,Me=void 0;function De(e){const n=Me;return Me=e,n}function Le(e,n=ce.Default){return(xe||function(e,n=ce.Default){if(void 0===Me)throw new Error("inject() must be called from an injection context");return null===Me?function(e,n,t){const l=ge(e);if(l&&"root"==l.providedIn)return void 0===l.value?l.value=l.factory():l.value;if(t&ce.Optional)return null;throw new Error(`Injector: NOT_FOUND [${me(e)}]`)}(e,0,n):Me.get(e,n&ce.Optional?null:void 0,n)})(e,n)}const Fe=Le;class He{get(e,n=ye){if(n===ye){const n=new Error(`NullInjectorError: No provider for ${me(e)}!`);throw n.name="NullInjectorError",n}return n}}function Ue(e,n,t,l=null){e=e&&"\n"===e.charAt(0)&&e.charAt(1)==Ne?e.substr(2):e;let i=me(n);if(n instanceof Array)i=n.map(me).join(" -> ");else if("object"==typeof n){let e=[];for(let t in n)if(n.hasOwnProperty(t)){let l=n[t];e.push(t+":"+("string"==typeof l?JSON.stringify(l):me(l)))}i=`{${e.join(", ")}}`}return`${t}${l?"("+l+")":""}[${i}]: ${e.replace(we,"\n  ")}`}const Ge=new Ce("The presence of this token marks an injector as being the root injector."),Be=function(e,n,t){return new je(e,n,t)},We=(()=>{class e{static create(e,n){return Array.isArray(e)?Be(e,n,""):Be(e.providers,e.parent,e.name||"")}}return e.THROW_IF_NOT_FOUND=ye,e.NULL=new He,e.ngInjectableDef=de({token:e,providedIn:"any",factory:()=>Le(Ie)}),e.__NG_ELEMENT_ID__=-1,e})(),Ve=function(e){return e},ze=[],Ye=Ve,$e=function(){return Array.prototype.slice.call(arguments)},Ke="\u0275";class je{constructor(e,n=We.NULL,t=null){this.parent=n,this.source=t;const l=this._records=new Map;l.set(We,{token:We,fn:Ve,deps:ze,value:this,useNew:!1}),l.set(Ie,{token:Ie,fn:Ve,deps:ze,value:this,useNew:!1}),function e(n,t){if(t)if((t=Ee(t))instanceof Array)for(let l=0;l<t.length;l++)e(n,t[l]);else{if("function"==typeof t)throw Xe("Function/Class not supported",t);if(!t||"object"!=typeof t||!t.provide)throw Xe("Unexpected provider",t);{let e=Ee(t.provide);const l=function(e){const n=function(e){let n=ze;const t=e.deps;if(t&&t.length){n=[];for(let e=0;e<t.length;e++){let l=6,i=Ee(t[e]);if(i instanceof Array)for(let e=0,n=i;e<n.length;e++){const t=n[e];t instanceof ue||t==ue?l|=1:t instanceof ae||t==ae?l&=-3:t instanceof oe||t==oe?l&=-5:i=t instanceof se?t.token:Ee(t)}n.push({token:i,options:l})}}else if(e.useExisting)n=[{token:Ee(e.useExisting),options:6}];else if(!(t||ke in e))throw Xe("'deps' required",e);return n}(e);let t=Ve,l=ze,i=!1,r=Ee(e.provide);if(ke in e)l=e.useValue;else if(e.useFactory)t=e.useFactory;else if(e.useExisting);else if(e.useClass)i=!0,t=Ee(e.useClass);else{if("function"!=typeof r)throw Xe("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",e);i=!0,t=r}return{deps:n,fn:t,useNew:i,value:l}}(t);if(!0===t.multi){let l=n.get(e);if(l){if(l.fn!==$e)throw qe(e)}else n.set(e,l={token:t.provide,deps:[],useNew:!1,fn:$e,value:ze});l.deps.push({token:e=t,options:6})}const i=n.get(e);if(i&&i.fn==$e)throw qe(e);n.set(e,l)}}}(l,e)}get(e,n,t=ce.Default){const l=this._records.get(e);try{return function e(n,t,l,i,r,s){try{return function(n,t,l,i,r,s){let u;if(!t||s&ce.SkipSelf)s&ce.Self||(u=i.get(n,r,ce.Default));else{if((u=t.value)==Ye)throw Error(Ke+"Circular dependency");if(u===ze){t.value=Ye;let n=void 0,r=t.useNew,s=t.fn,o=t.deps,a=ze;if(o.length){a=[];for(let n=0;n<o.length;n++){const t=o[n],r=t.options,s=2&r?l.get(t.token):void 0;a.push(e(t.token,s,l,s||4&r?i:We.NULL,1&r?null:We.THROW_IF_NOT_FOUND,ce.Default))}}t.value=u=r?new s(...a):s.apply(n,a)}}return u}(n,t,l,i,r,s)}catch(u){throw u instanceof Error||(u=new Error(u)),(u[_e]=u[_e]||[]).unshift(n),t&&t.value==Ye&&(t.value=ze),u}}(e,l,this._records,this.parent,n,t)}catch(i){return function(e,n,t,l){const i=e[_e];throw n[Pe]&&i.unshift(n[Pe]),e.message=Ue("\n"+e.message,i,"StaticInjectorError",l),e[Ae]=i,e[_e]=null,e}(i,e,0,this.source)}}toString(){const e=[];return this._records.forEach((n,t)=>e.push(me(t))),`StaticInjector[${e.join(", ")}]`}}function qe(e){return Xe("Cannot mix multi providers and regular providers",e)}function Xe(e,n){return new Error(Ue(e,n,"StaticInjectorError"))}const Qe="ngDebugContext",Ze="ngOriginalError",Je="ngErrorLogger",en=new Ce("AnalyzeForEntryComponents"),nn=function(){var e={Emulated:0,Native:1,None:2,ShadowDom:3};return e[e.Emulated]="Emulated",e[e.Native]="Native",e[e.None]="None",e[e.ShadowDom]="ShadowDom",e}(),tn=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Te))();let ln=!0,rn=!1;function sn(){return rn=!0,ln}class un{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),this.inertBodyElement=this.inertDocument.body,null==this.inertBodyElement){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e),this.inertBodyElement=this.inertDocument.createElement("body"),e.appendChild(this.inertBodyElement)}this.inertBodyElement.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.inertBodyElement.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(e){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}getInertBodyElement_XHR(e){e="<body><remove></remove>"+e+"</body>";try{e=encodeURI(e)}catch(l){return null}const n=new XMLHttpRequest;n.responseType="document",n.open("GET","data:text/html;charset=utf-8,"+e,!1),n.send(void 0);const t=n.response.body;return t.removeChild(t.firstChild),t}getInertBodyElement_DOMParser(e){e="<body><remove></remove>"+e+"</body>";try{const t=(new window.DOMParser).parseFromString(e,"text/html").body;return t.removeChild(t.firstChild),t}catch(n){return null}}getInertBodyElement_InertDocument(e){const n=this.inertDocument.createElement("template");return"content"in n?(n.innerHTML=e,n):(this.inertBodyElement.innerHTML=e,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)}stripCustomNsAttrs(e){const n=e.attributes;for(let l=n.length-1;0<l;l--){const t=n.item(l).name;"xmlns:ns1"!==t&&0!==t.indexOf("ns1:")||e.removeAttribute(t)}let t=e.firstChild;for(;t;)t.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(t),t=t.nextSibling}}const on=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:\/?#]*(?:[\/?#]|$))/gi,an=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function cn(e){return(e=String(e)).match(on)||e.match(an)?e:(sn()&&console.warn(`WARNING: sanitizing unsafe URL value ${e} (see http://g.co/ng/security#xss)`),"unsafe:"+e)}function hn(e){const n={};for(const t of e.split(","))n[t]=!0;return n}function dn(...e){const n={};for(const t of e)for(const e in t)t.hasOwnProperty(e)&&(n[e]=!0);return n}const gn=hn("area,br,col,hr,img,wbr"),pn=hn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),mn=hn("rp,rt"),fn=dn(mn,pn),Sn=dn(gn,dn(pn,hn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),dn(mn,hn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),fn),En=hn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),vn=hn("srcset"),bn=dn(En,vn,hn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),hn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),On=hn("script,style,template");class Rn{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let n=e.firstChild,t=!0;for(;n;)if(n.nodeType===Node.ELEMENT_NODE?t=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,t&&n.firstChild)n=n.firstChild;else for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let e=this.checkClobberedElement(n,n.nextSibling);if(e){n=e;break}n=this.checkClobberedElement(n,n.parentNode)}return this.buf.join("")}startElement(e){const n=e.nodeName.toLowerCase();if(!Sn.hasOwnProperty(n))return this.sanitizedSomething=!0,!On.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);const t=e.attributes;for(let i=0;i<t.length;i++){const e=t.item(i),n=e.name,r=n.toLowerCase();if(!bn.hasOwnProperty(r)){this.sanitizedSomething=!0;continue}let s=e.value;En[r]&&(s=cn(s)),vn[r]&&(l=s,s=(l=String(l)).split(",").map(e=>cn(e.trim())).join(", ")),this.buf.push(" ",n,'="',In(s),'"')}var l;return this.buf.push(">"),!0}endElement(e){const n=e.nodeName.toLowerCase();Sn.hasOwnProperty(n)&&!gn.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(In(e))}checkClobberedElement(e,n){if(n&&(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return n}}const Tn=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Cn=/([^\#-~ |!])/g;function In(e){return e.replace(/&/g,"&amp;").replace(Tn,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(Cn,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let yn;function _n(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}const An=function(){var e={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return e[e.NONE]="NONE",e[e.HTML]="HTML",e[e.STYLE]="STYLE",e[e.SCRIPT]="SCRIPT",e[e.URL]="URL",e[e.RESOURCE_URL]="RESOURCE_URL",e}();class wn{}const Nn=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),Pn=/^url\(([^)]+)\)$/;function kn(e){return e[Qe]}function xn(e){return e[Ze]}function Mn(e,...n){e.error(...n)}class Dn{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e),t=this._findContext(e),l=function(e){return e[Je]||Mn}(e);l(this._console,"ERROR",e),n&&l(this._console,"ORIGINAL ERROR",n),t&&l(this._console,"ERROR CONTEXT",t)}_findContext(e){return e?kn(e)?kn(e):this._findContext(xn(e)):null}_findOriginalError(e){let n=xn(e);for(;n&&xn(n);)n=xn(n);return n}}const Ln=/([A-Z])/g;function Fn(e){try{return null!=e?e.toString().slice(0,30):e}catch(n){return"[ERROR] Exception while trying to serialize the value"}}let Hn=null;function Un(){if(!Hn){const e=Te.Symbol;if(e&&e.iterator)Hn=e.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<e.length;++n){const t=e[n];"entries"!==t&&"size"!==t&&Map.prototype[t]===Map.prototype.entries&&(Hn=t)}}}return Hn}function Gn(e,n){return e===n||"number"==typeof e&&"number"==typeof n&&isNaN(e)&&isNaN(n)}function Bn(e,n){const t=Vn(e),l=Vn(n);if(t&&l)return function(e,n,t){const l=e[Un()](),i=n[Un()]();for(;;){const e=l.next(),n=i.next();if(e.done&&n.done)return!0;if(e.done||n.done)return!1;if(!t(e.value,n.value))return!1}}(e,n,Bn);{const i=e&&("object"==typeof e||"function"==typeof e),r=n&&("object"==typeof n||"function"==typeof n);return!(t||!i||l||!r)||Gn(e,n)}}class Wn{constructor(e){this.wrapped=e}static wrap(e){return new Wn(e)}static unwrap(e){return Wn.isWrapped(e)?e.wrapped:e}static isWrapped(e){return e instanceof Wn}}function Vn(e){return!!zn(e)&&(Array.isArray(e)||!(e instanceof Map)&&Un()in e)}function zn(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Yn(e){return!!e&&"function"==typeof e.then}function $n(e){return!!e&&"function"==typeof e.subscribe}class Kn{constructor(e,n,t){this.previousValue=e,this.currentValue=n,this.firstChange=t}isFirstChange(){return this.firstChange}}class jn{}class qn{}function Xn(e){const n=Error(`No component factory found for ${me(e)}. Did you add it to @NgModule.entryComponents?`);return n[Qn]=e,n}const Qn="ngComponent";class Zn{resolveComponentFactory(e){throw Xn(e)}}const Jn=(()=>{class e{}return e.NULL=new Zn,e})();class et{constructor(e,n,t){this._parent=n,this._ngModule=t,this._factories=new Map;for(let l=0;l<e.length;l++){const n=e[l];this._factories.set(n.componentType,n)}}resolveComponentFactory(e){let n=this._factories.get(e);if(!n&&this._parent&&(n=this._parent.resolveComponentFactory(e)),!n)throw Xn(e);return new nt(n,this._ngModule)}}class nt extends qn{constructor(e,n){super(),this.factory=e,this.ngModule=n,this.selector=e.selector,this.componentType=e.componentType,this.ngContentSelectors=e.ngContentSelectors,this.inputs=e.inputs,this.outputs=e.outputs}create(e,n,t,l){return this.factory.create(e,n,t,l||this.ngModule)}}class tt{}class lt{}function it(...e){}const rt=(()=>{class e{constructor(e){this.nativeElement=e}}return e.__NG_ELEMENT_ID__=()=>st(e),e})(),st=it;class ut{}class ot{}const at=function(){var e={Important:1,DashCase:2};return e[e.Important]="Important",e[e.DashCase]="DashCase",e}(),ct=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>ht(),e})(),ht=it;class dt{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const gt=new dt("8.1.0");class pt{constructor(){}supports(e){return Vn(e)}create(e){return new ft(e)}}const mt=(e,n)=>n;class ft{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||mt}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,t=this._removalsHead,l=0,i=null;for(;n||t;){const r=!t||n&&n.currentIndex<bt(t,l,i)?n:t,s=bt(r,l,i),u=r.currentIndex;if(r===t)l--,t=t._nextRemoved;else if(n=n._next,null==r.previousIndex)l++;else{i||(i=[]);const e=s-l,n=u-l;if(e!=n){for(let t=0;t<e;t++){const l=t<i.length?i[t]:i[t]=0,r=l+t;n<=r&&r<e&&(i[t]=l+1)}i[r.previousIndex]=n-e}}s!==u&&e(r,s,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!Vn(e))throw new Error(`Error trying to diff '${me(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n,t,l,i=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let n=0;n<this.length;n++)l=this._trackByFn(n,t=e[n]),null!==i&&Gn(i.trackById,l)?(r&&(i=this._verifyReinsertion(i,t,l,n)),Gn(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,l,n),r=!0),i=i._next}else n=0,function(e,n){if(Array.isArray(e))for(let t=0;t<e.length;t++)n(e[t]);else{const t=e[Un()]();let l;for(;!(l=t.next()).done;)n(l.value)}}(e,e=>{l=this._trackByFn(n,e),null!==i&&Gn(i.trackById,l)?(r&&(i=this._verifyReinsertion(i,e,l,n)),Gn(i.item,e)||this._addIdentityChange(i,e)):(i=this._mismatch(i,e,l,n),r=!0),i=i._next,n++}),this.length=n;return this._truncate(i),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e,n;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=n)e.previousIndex=e.currentIndex,n=e._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,t,l){let i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(t,l))?(Gn(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,i,l)):null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(t,null))?(Gn(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,i,l)):e=this._addAfter(new St(n,t),i,l),e}_verifyReinsertion(e,n,t,l){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(t,null);return null!==i?e=this._reinsertAfter(i,e._prev,l):e.currentIndex!=l&&(e.currentIndex=l,this._addToMoves(e,l)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,t){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const l=e._prevRemoved,i=e._nextRemoved;return null===l?this._removalsHead=i:l._nextRemoved=i,null===i?this._removalsTail=l:i._prevRemoved=l,this._insertAfter(e,n,t),this._addToMoves(e,t),e}_moveAfter(e,n,t){return this._unlink(e),this._insertAfter(e,n,t),this._addToMoves(e,t),e}_addAfter(e,n,t){return this._insertAfter(e,n,t),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,t){const l=null===n?this._itHead:n._next;return e._next=l,e._prev=n,null===l?this._itTail=e:l._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new vt),this._linkedRecords.put(e),e.currentIndex=t,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,t=e._next;return null===n?this._itHead=t:n._next=t,null===t?this._itTail=n:t._prev=n,e}_addToMoves(e,n){return e.previousIndex===n?e:(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e,e)}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new vt),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class St{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Et{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let t;for(t=this._head;null!==t;t=t._nextDup)if((null===n||n<=t.currentIndex)&&Gn(t.trackById,e))return t;return null}remove(e){const n=e._prevDup,t=e._nextDup;return null===n?this._head=t:n._nextDup=t,null===t?this._tail=n:t._prevDup=n,null===this._head}}class vt{constructor(){this.map=new Map}put(e){const n=e.trackById;let t=this.map.get(n);t||(t=new Et,this.map.set(n,t)),t.add(e)}get(e,n){const t=this.map.get(e);return t?t.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function bt(e,n,t){const l=e.previousIndex;if(null===l)return l;let i=0;return t&&l<t.length&&(i=t[l]),l+n+i}class Ot{constructor(){}supports(e){return e instanceof Map||zn(e)}create(){return new Rt}}class Rt{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let n;for(n=this._mapHead;null!==n;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}diff(e){if(e){if(!(e instanceof Map||zn(e)))throw new Error(`Error trying to diff '${me(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(e,t)=>{if(n&&n.key===t)this._maybeAddToChanges(n,e),this._appendAfter=n,n=n._next;else{const l=this._getOrCreateRecordForKey(t,e);n=this._insertBeforeOrAppend(n,l)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let e=n;null!==e;e=e._nextRemoved)e===this._mapHead&&(this._mapHead=null),this._records.delete(e.key),e._nextRemoved=e._next,e.previousValue=e.currentValue,e.currentValue=null,e._prev=null,e._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){const t=e._prev;return n._next=e,n._prev=t,e._prev=n,t&&(t._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){const t=this._records.get(e);this._maybeAddToChanges(t,n);const l=t._prev,i=t._next;return l&&(l._next=i),i&&(i._prev=l),t._next=null,t._prev=null,t}const t=new Tt(e);return this._records.set(e,t),t.currentValue=n,this._addToAdditions(t),t}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Gn(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(t=>n(e[t],t))}}class Tt{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}const Ct=(()=>{class e{constructor(e){this.factories=e}static create(n,t){if(null!=t){const e=t.factories.slice();n=n.concat(e)}return new e(n)}static extend(n){return{provide:e,useFactory:t=>{if(!t)throw new Error("Cannot extend IterableDiffers without a parent injector");return e.create(n,t)},deps:[[e,new ae,new ue]]}}find(e){const n=this.factories.find(n=>n.supports(e));if(null!=n)return n;throw new Error(`Cannot find a differ supporting object '${e}' of type '${t=e,t.name||typeof t}'`);var t}}return e.ngInjectableDef=de({token:e,providedIn:"root",factory:()=>new e([new pt])}),e})(),It=(()=>{class e{constructor(e){this.factories=e}static create(n,t){if(t){const e=t.factories.slice();n=n.concat(e)}return new e(n)}static extend(n){return{provide:e,useFactory:t=>{if(!t)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return e.create(n,t)},deps:[[e,new ae,new ue]]}}find(e){const n=this.factories.find(n=>n.supports(e));if(n)return n;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return e.ngInjectableDef=de({token:e,providedIn:"root",factory:()=>new e([new Ot])}),e})(),yt=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>_t(),e})(),_t=(...e)=>{},At=[new Ot],wt=new Ct([new pt]),Nt=new It(At),Pt=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>kt(e,rt),e})(),kt=it,xt=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>Mt(e,rt),e})(),Mt=it;function Dt(e,n,t,l){let i=`ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '${n}'. Current value: '${t}'.`;return l&&(i+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(e,n){const t=new Error(e);return Lt(t,n),t}(i,e)}function Lt(e,n){e[Qe]=n,e[Je]=n.logError.bind(n)}function Ft(e){return new Error(`ViewDestroyedError: Attempt to use a destroyed view: ${e}`)}function Ht(e,n,t){const l=e.state,i=1792&l;return i===n?(e.state=-1793&l|t,e.initIndex=-1,!0):i===t}function Ut(e,n,t){return(1792&e.state)===n&&e.initIndex<=t&&(e.initIndex=t+1,!0)}function Gt(e,n){return e.nodes[n]}function Bt(e,n){return e.nodes[n]}function Wt(e,n){return e.nodes[n]}function Vt(e,n){return e.nodes[n]}function zt(e,n){return e.nodes[n]}const Yt={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0},$t=()=>{},Kt=new Map;function jt(e){let n=Kt.get(e);return n||(n=me(e)+"_"+Kt.size,Kt.set(e,n)),n}function qt(e,n,t,l){if(Wn.isWrapped(l)){l=Wn.unwrap(l);const i=e.def.nodes[n].bindingIndex+t,r=Wn.unwrap(e.oldValues[i]);e.oldValues[i]=new Wn(r)}return l}const Xt="$$undefined",Qt="$$empty";function Zt(e){return{id:Xt,styles:e.styles,encapsulation:e.encapsulation,data:e.data}}let Jt=0;function el(e,n,t,l){return!(!(2&e.state)&&Gn(e.oldValues[n.bindingIndex+t],l))}function nl(e,n,t,l){return!!el(e,n,t,l)&&(e.oldValues[n.bindingIndex+t]=l,!0)}function tl(e,n,t,l){const i=e.oldValues[n.bindingIndex+t];if(1&e.state||!Bn(i,l)){const r=n.bindings[t].name;throw Dt(Yt.createDebugContext(e,n.nodeIndex),`${r}: ${i}`,`${r}: ${l}`,0!=(1&e.state))}}function ll(e){let n=e;for(;n;)2&n.def.flags&&(n.state|=8),n=n.viewContainerParent||n.parent}function il(e,n){let t=e;for(;t&&t!==n;)t.state|=64,t=t.viewContainerParent||t.parent}function rl(e,n,t,l){try{return ll(33554432&e.def.nodes[n].flags?Bt(e,n).componentView:e),Yt.handleEvent(e,n,t,l)}catch(i){e.root.errorHandler.handleError(i)}}function sl(e){return e.parent?Bt(e.parent,e.parentNodeDef.nodeIndex):null}function ul(e){return e.parent?e.parentNodeDef.parent:null}function ol(e,n){switch(201347067&n.flags){case 1:return Bt(e,n.nodeIndex).renderElement;case 2:return Gt(e,n.nodeIndex).renderText}}function al(e){return!!e.parent&&!!(32768&e.parentNodeDef.flags)}function cl(e){return!(!e.parent||32768&e.parentNodeDef.flags)}function hl(e){return 1<<e%32}function dl(e){const n={};let t=0;const l={};return e&&e.forEach(([e,i])=>{"number"==typeof e?(n[e]=i,t|=hl(e)):l[e]=i}),{matchedQueries:n,references:l,matchedQueryIds:t}}function gl(e,n){return e.map(e=>{let t,l;return Array.isArray(e)?[l,t]=e:(l=0,t=e),t&&("function"==typeof t||"object"==typeof t)&&n&&Object.defineProperty(t,Pe,{value:n,configurable:!0}),{flags:l,token:t,tokenKey:jt(t)}})}function pl(e,n,t){let l=t.renderParent;return l?0==(1&l.flags)||0==(33554432&l.flags)||l.element.componentRendererType&&l.element.componentRendererType.encapsulation===nn.Native?Bt(e,t.renderParent.nodeIndex).renderElement:void 0:n}const ml=new WeakMap;function fl(e){let n=ml.get(e);return n||((n=e(()=>$t)).factory=e,ml.set(e,n)),n}function Sl(e,n,t,l,i){3===n&&(t=e.renderer.parentNode(ol(e,e.def.lastRenderRootNode))),El(e,n,0,e.def.nodes.length-1,t,l,i)}function El(e,n,t,l,i,r,s){for(let u=t;u<=l;u++){const t=e.def.nodes[u];11&t.flags&&bl(e,t,n,i,r,s),u+=t.childCount}}function vl(e,n,t,l,i,r){let s=e;for(;s&&!al(s);)s=s.parent;const u=s.parent,o=ul(s),a=o.nodeIndex+o.childCount;for(let c=o.nodeIndex+1;c<=a;c++){const e=u.def.nodes[c];e.ngContentIndex===n&&bl(u,e,t,l,i,r),c+=e.childCount}if(!u.parent){const s=e.root.projectableNodes[n];if(s)for(let n=0;n<s.length;n++)Ol(e,s[n],t,l,i,r)}}function bl(e,n,t,l,i,r){if(8&n.flags)vl(e,n.ngContent.index,t,l,i,r);else{const s=ol(e,n);if(3===t&&33554432&n.flags&&48&n.bindingFlags?(16&n.bindingFlags&&Ol(e,s,t,l,i,r),32&n.bindingFlags&&Ol(Bt(e,n.nodeIndex).componentView,s,t,l,i,r)):Ol(e,s,t,l,i,r),16777216&n.flags){const s=Bt(e,n.nodeIndex).viewContainer._embeddedViews;for(let e=0;e<s.length;e++)Sl(s[e],t,l,i,r)}1&n.flags&&!n.element.name&&El(e,t,n.nodeIndex+1,n.nodeIndex+n.childCount,l,i,r)}}function Ol(e,n,t,l,i,r){const s=e.renderer;switch(t){case 1:s.appendChild(l,n);break;case 2:s.insertBefore(l,n,i);break;case 3:s.removeChild(l,n);break;case 0:r.push(n)}}const Rl=/^:([^:]+):(.+)$/;function Tl(e){if(":"===e[0]){const n=e.match(Rl);return[n[1],n[2]]}return["",e]}function Cl(e){let n=0;for(let t=0;t<e.length;t++)n|=e[t].flags;return n}function Il(e,n,t,l,i,r,s,u,o,a,c,h,d,g,p,m,f,S,E,v){switch(e){case 1:return n+yl(t)+l;case 2:return n+yl(t)+l+yl(i)+r;case 3:return n+yl(t)+l+yl(i)+r+yl(s)+u;case 4:return n+yl(t)+l+yl(i)+r+yl(s)+u+yl(o)+a;case 5:return n+yl(t)+l+yl(i)+r+yl(s)+u+yl(o)+a+yl(c)+h;case 6:return n+yl(t)+l+yl(i)+r+yl(s)+u+yl(o)+a+yl(c)+h+yl(d)+g;case 7:return n+yl(t)+l+yl(i)+r+yl(s)+u+yl(o)+a+yl(c)+h+yl(d)+g+yl(p)+m;case 8:return n+yl(t)+l+yl(i)+r+yl(s)+u+yl(o)+a+yl(c)+h+yl(d)+g+yl(p)+m+yl(f)+S;case 9:return n+yl(t)+l+yl(i)+r+yl(s)+u+yl(o)+a+yl(c)+h+yl(d)+g+yl(p)+m+yl(f)+S+yl(E)+v;default:throw new Error("Does not support more than 9 expressions")}}function yl(e){return null!=e?e.toString():""}const _l=new Object,Al=jt(We),wl=jt(Ie),Nl=jt(tt);function Pl(e,n,t,l){return t=Ee(t),{index:-1,deps:gl(l,me(n)),flags:e,token:n,value:t}}function kl(e,n,t=We.THROW_IF_NOT_FOUND){const l=De(e);try{if(8&n.flags)return n.token;if(2&n.flags&&(t=null),1&n.flags)return e._parent.get(n.token,t);const s=n.tokenKey;switch(s){case Al:case wl:case Nl:return e}const u=e._def.providersByKey[s];let o;if(u){let n=e._providers[u.index];return void 0===n&&(n=e._providers[u.index]=xl(e,u)),n===_l?void 0:n}if((o=ge(n.token))&&(i=e,null!=(r=o).providedIn&&(function(e,n){return e._def.modules.indexOf(r.providedIn)>-1}(i)||"root"===r.providedIn&&i._def.isRoot))){const t=e._providers.length;return e._def.providers[t]=e._def.providersByKey[n.tokenKey]={flags:5120,value:o.factory,deps:[],index:t,token:n.token},e._providers[t]=_l,e._providers[t]=xl(e,e._def.providersByKey[n.tokenKey])}return 4&n.flags?t:e._parent.get(n.token,t)}finally{De(l)}var i,r}function xl(e,n){let t;switch(201347067&n.flags){case 512:t=function(e,n,t){const l=t.length;switch(l){case 0:return new n;case 1:return new n(kl(e,t[0]));case 2:return new n(kl(e,t[0]),kl(e,t[1]));case 3:return new n(kl(e,t[0]),kl(e,t[1]),kl(e,t[2]));default:const i=new Array(l);for(let n=0;n<l;n++)i[n]=kl(e,t[n]);return new n(...i)}}(e,n.value,n.deps);break;case 1024:t=function(e,n,t){const l=t.length;switch(l){case 0:return n();case 1:return n(kl(e,t[0]));case 2:return n(kl(e,t[0]),kl(e,t[1]));case 3:return n(kl(e,t[0]),kl(e,t[1]),kl(e,t[2]));default:const i=Array(l);for(let n=0;n<l;n++)i[n]=kl(e,t[n]);return n(...i)}}(e,n.value,n.deps);break;case 2048:t=kl(e,n.deps[0]);break;case 256:t=n.value}return t===_l||null===t||"object"!=typeof t||131072&n.flags||"function"!=typeof t.ngOnDestroy||(n.flags|=131072),void 0===t?_l:t}function Ml(e,n){const t=e.viewContainer._embeddedViews;if((null==n||n>=t.length)&&(n=t.length-1),n<0)return null;const l=t[n];return l.viewContainerParent=null,Hl(t,n),Yt.dirtyParentQueries(l),Ll(l),l}function Dl(e,n,t){const l=n?ol(n,n.def.lastRenderRootNode):e.renderElement,i=t.renderer.parentNode(l),r=t.renderer.nextSibling(l);Sl(t,2,i,r,void 0)}function Ll(e){Sl(e,3,null,null,void 0)}function Fl(e,n,t){n>=e.length?e.push(t):e.splice(n,0,t)}function Hl(e,n){n>=e.length-1?e.pop():e.splice(n,1)}const Ul=new Object;function Gl(e,n,t,l,i,r){return new Bl(e,n,t,l,i,r)}class Bl extends qn{constructor(e,n,t,l,i,r){super(),this.selector=e,this.componentType=n,this._inputs=l,this._outputs=i,this.ngContentSelectors=r,this.viewDefFactory=t}get inputs(){const e=[],n=this._inputs;for(let t in n)e.push({propName:t,templateName:n[t]});return e}get outputs(){const e=[];for(let n in this._outputs)e.push({propName:n,templateName:this._outputs[n]});return e}create(e,n,t,l){if(!l)throw new Error("ngModule should be provided");const i=fl(this.viewDefFactory),r=i.nodes[0].element.componentProvider.nodeIndex,s=Yt.createRootView(e,n||[],t,i,l,Ul),u=Wt(s,r).instance;return t&&s.renderer.setAttribute(Bt(s,0).renderElement,"ng-version",gt.full),new Wl(s,new $l(s),u)}}class Wl extends jn{constructor(e,n,t){super(),this._view=e,this._viewRef=n,this._component=t,this._elDef=this._view.def.nodes[0],this.hostView=n,this.changeDetectorRef=n,this.instance=t}get location(){return new rt(Bt(this._view,this._elDef.nodeIndex).renderElement)}get injector(){return new Xl(this._view,this._elDef)}get componentType(){return this._component.constructor}destroy(){this._viewRef.destroy()}onDestroy(e){this._viewRef.onDestroy(e)}}function Vl(e,n,t){return new zl(e,n,t)}class zl{constructor(e,n,t){this._view=e,this._elDef=n,this._data=t,this._embeddedViews=[]}get element(){return new rt(this._data.renderElement)}get injector(){return new Xl(this._view,this._elDef)}get parentInjector(){let e=this._view,n=this._elDef.parent;for(;!n&&e;)n=ul(e),e=e.parent;return e?new Xl(e,n):new Xl(this._view,null)}clear(){for(let e=this._embeddedViews.length-1;e>=0;e--){const n=Ml(this._data,e);Yt.destroyView(n)}}get(e){const n=this._embeddedViews[e];if(n){const e=new $l(n);return e.attachToViewContainerRef(this),e}return null}get length(){return this._embeddedViews.length}createEmbeddedView(e,n,t){const l=e.createEmbeddedView(n||{});return this.insert(l,t),l}createComponent(e,n,t,l,i){const r=t||this.parentInjector;i||e instanceof nt||(i=r.get(tt));const s=e.create(r,l,void 0,i);return this.insert(s.hostView,n),s}insert(e,n){if(e.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");const t=e;return function(e,n,t,l){let i=n.viewContainer._embeddedViews;null==t&&(t=i.length),l.viewContainerParent=e,Fl(i,t,l),function(e,n){const t=sl(n);if(!t||t===e||16&n.state)return;n.state|=16;let l=t.template._projectedViews;l||(l=t.template._projectedViews=[]),l.push(n),function(e,t){if(4&t.flags)return;n.parent.def.nodeFlags|=4,t.flags|=4;let l=t.parent;for(;l;)l.childFlags|=4,l=l.parent}(0,n.parentNodeDef)}(n,l),Yt.dirtyParentQueries(l),Dl(n,t>0?i[t-1]:null,l)}(this._view,this._data,n,t._view),t.attachToViewContainerRef(this),e}move(e,n){if(e.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");const t=this._embeddedViews.indexOf(e._view);return function(e,n,l){const i=e.viewContainer._embeddedViews,r=i[t];Hl(i,t),null==l&&(l=i.length),Fl(i,l,r),Yt.dirtyParentQueries(r),Ll(r),Dl(e,l>0?i[l-1]:null,r)}(this._data,0,n),e}indexOf(e){return this._embeddedViews.indexOf(e._view)}remove(e){const n=Ml(this._data,e);n&&Yt.destroyView(n)}detach(e){const n=Ml(this._data,e);return n?new $l(n):null}}function Yl(e){return new $l(e)}class $l{constructor(e){this._view=e,this._viewContainerRef=null,this._appRef=null}get rootNodes(){return function(e){const n=[];return Sl(e,0,void 0,void 0,n),n}(this._view)}get context(){return this._view.context}get destroyed(){return 0!=(128&this._view.state)}markForCheck(){ll(this._view)}detach(){this._view.state&=-5}detectChanges(){const e=this._view.root.rendererFactory;e.begin&&e.begin();try{Yt.checkAndUpdateView(this._view)}finally{e.end&&e.end()}}checkNoChanges(){Yt.checkNoChangesView(this._view)}reattach(){this._view.state|=4}onDestroy(e){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(e)}destroy(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),Yt.destroyView(this._view)}detachFromAppRef(){this._appRef=null,Ll(this._view),Yt.dirtyParentQueries(this._view)}attachToAppRef(e){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}attachToViewContainerRef(e){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=e}}function Kl(e,n){return new jl(e,n)}class jl extends Pt{constructor(e,n){super(),this._parentView=e,this._def=n}createEmbeddedView(e){return new $l(Yt.createEmbeddedView(this._parentView,this._def,this._def.element.template,e))}get elementRef(){return new rt(Bt(this._parentView,this._def.nodeIndex).renderElement)}}function ql(e,n){return new Xl(e,n)}class Xl{constructor(e,n){this.view=e,this.elDef=n}get(e,n=We.THROW_IF_NOT_FOUND){return Yt.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:e,tokenKey:jt(e)},n)}}function Ql(e,n){const t=e.def.nodes[n];if(1&t.flags){const n=Bt(e,t.nodeIndex);return t.element.template?n.template:n.renderElement}if(2&t.flags)return Gt(e,t.nodeIndex).renderText;if(20240&t.flags)return Wt(e,t.nodeIndex).instance;throw new Error(`Illegal state: read nodeValue for node index ${n}`)}function Zl(e){return new Jl(e.renderer)}class Jl{constructor(e){this.delegate=e}selectRootElement(e){return this.delegate.selectRootElement(e)}createElement(e,n){const[t,l]=Tl(n),i=this.delegate.createElement(l,t);return e&&this.delegate.appendChild(e,i),i}createViewRoot(e){return e}createTemplateAnchor(e){const n=this.delegate.createComment("");return e&&this.delegate.appendChild(e,n),n}createText(e,n){const t=this.delegate.createText(n);return e&&this.delegate.appendChild(e,t),t}projectNodes(e,n){for(let t=0;t<n.length;t++)this.delegate.appendChild(e,n[t])}attachViewAfter(e,n){const t=this.delegate.parentNode(e),l=this.delegate.nextSibling(e);for(let i=0;i<n.length;i++)this.delegate.insertBefore(t,n[i],l)}detachView(e){for(let n=0;n<e.length;n++){const t=e[n],l=this.delegate.parentNode(t);this.delegate.removeChild(l,t)}}destroyView(e,n){for(let t=0;t<n.length;t++)this.delegate.destroyNode(n[t])}listen(e,n,t){return this.delegate.listen(e,n,t)}listenGlobal(e,n,t){return this.delegate.listen(e,n,t)}setElementProperty(e,n,t){this.delegate.setProperty(e,n,t)}setElementAttribute(e,n,t){const[l,i]=Tl(n);null!=t?this.delegate.setAttribute(e,i,t,l):this.delegate.removeAttribute(e,i,l)}setBindingDebugInfo(e,n,t){}setElementClass(e,n,t){t?this.delegate.addClass(e,n):this.delegate.removeClass(e,n)}setElementStyle(e,n,t){null!=t?this.delegate.setStyle(e,n,t):this.delegate.removeStyle(e,n)}invokeElementMethod(e,n,t){e[n].apply(e,t)}setText(e,n){this.delegate.setValue(e,n)}animate(){throw new Error("Renderer.animate is no longer supported!")}}function ei(e,n,t,l){return new ni(e,n,t,l)}class ni{constructor(e,n,t,l){this._moduleType=e,this._parent=n,this._bootstrapComponents=t,this._def=l,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(e){const n=e._def,t=e._providers=new Array(n.providers.length);for(let l=0;l<n.providers.length;l++){const i=n.providers[l];4096&i.flags||void 0===t[l]&&(t[l]=xl(e,i))}}(this)}get(e,n=We.THROW_IF_NOT_FOUND,t=ce.Default){let l=0;return t&ce.SkipSelf?l|=1:t&ce.Self&&(l|=4),kl(this,{token:e,tokenKey:jt(e),flags:l},n)}get instance(){return this.get(this._moduleType)}get componentFactoryResolver(){return this.get(Jn)}destroy(){if(this._destroyed)throw new Error(`The ng module ${me(this.instance.constructor)} has already been destroyed.`);this._destroyed=!0,function(e,n){const t=e._def,l=new Set;for(let i=0;i<t.providers.length;i++)if(131072&t.providers[i].flags){const n=e._providers[i];if(n&&n!==_l){const e=n.ngOnDestroy;"function"!=typeof e||l.has(n)||(e.apply(n),l.add(n))}}}(this),this._destroyListeners.forEach(e=>e())}onDestroy(e){this._destroyListeners.push(e)}}const ti=jt(ut),li=jt(ct),ii=jt(rt),ri=jt(xt),si=jt(Pt),ui=jt(yt),oi=jt(We),ai=jt(Ie);function ci(e,n,t,l,i,r,s,u){const o=[];if(s)for(let c in s){const[e,n]=s[c];o[e]={flags:8,name:c,nonMinifiedName:n,ns:null,securityContext:null,suffix:null}}const a=[];if(u)for(let c in u)a.push({type:1,propName:c,target:null,eventName:u[c]});return gi(e,n|=16384,t,l,i,i,r,o,a)}function hi(e,n,t){return gi(-1,e|=16,null,0,n,n,t)}function di(e,n,t,l,i){return gi(-1,e,n,0,t,l,i)}function gi(e,n,t,l,i,r,s,u,o){const{matchedQueries:a,references:c,matchedQueryIds:h}=dl(t);o||(o=[]),u||(u=[]),r=Ee(r);const d=gl(s,me(i));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:n,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:a,matchedQueryIds:h,references:c,ngContentIndex:-1,childCount:l,bindings:u,bindingFlags:Cl(u),outputs:o,element:null,provider:{token:i,value:r,deps:d},text:null,query:null,ngContent:null}}function pi(e,n){return Ei(e,n)}function mi(e,n){let t=e;for(;t.parent&&!al(t);)t=t.parent;return vi(t.parent,ul(t),!0,n.provider.value,n.provider.deps)}function fi(e,n){const t=vi(e,n.parent,(32768&n.flags)>0,n.provider.value,n.provider.deps);if(n.outputs.length)for(let l=0;l<n.outputs.length;l++){const i=n.outputs[l],r=t[i.propName];if(!$n(r))throw new Error(`@Output ${i.propName} not initialized in '${t.constructor.name}'.`);{const t=r.subscribe(Si(e,n.parent.nodeIndex,i.eventName));e.disposables[n.outputIndex+l]=t.unsubscribe.bind(t)}}return t}function Si(e,n,t){return l=>rl(e,n,t,l)}function Ei(e,n){const t=(8192&n.flags)>0,l=n.provider;switch(201347067&n.flags){case 512:return vi(e,n.parent,t,l.value,l.deps);case 1024:return function(e,n,t,l,i){const r=i.length;switch(r){case 0:return l();case 1:return l(Oi(e,n,t,i[0]));case 2:return l(Oi(e,n,t,i[0]),Oi(e,n,t,i[1]));case 3:return l(Oi(e,n,t,i[0]),Oi(e,n,t,i[1]),Oi(e,n,t,i[2]));default:const s=Array(r);for(let l=0;l<r;l++)s[l]=Oi(e,n,t,i[l]);return l(...s)}}(e,n.parent,t,l.value,l.deps);case 2048:return Oi(e,n.parent,t,l.deps[0]);case 256:return l.value}}function vi(e,n,t,l,i){const r=i.length;switch(r){case 0:return new l;case 1:return new l(Oi(e,n,t,i[0]));case 2:return new l(Oi(e,n,t,i[0]),Oi(e,n,t,i[1]));case 3:return new l(Oi(e,n,t,i[0]),Oi(e,n,t,i[1]),Oi(e,n,t,i[2]));default:const s=new Array(r);for(let l=0;l<r;l++)s[l]=Oi(e,n,t,i[l]);return new l(...s)}}const bi={};function Oi(e,n,t,l,i=We.THROW_IF_NOT_FOUND){if(8&l.flags)return l.token;const r=e;2&l.flags&&(i=null);const s=l.tokenKey;s===ui&&(t=!(!n||!n.element.componentView)),n&&1&l.flags&&(t=!1,n=n.parent);let u=e;for(;u;){if(n)switch(s){case ti:return Zl(Ri(u,n,t));case li:return Ri(u,n,t).renderer;case ii:return new rt(Bt(u,n.nodeIndex).renderElement);case ri:return Bt(u,n.nodeIndex).viewContainer;case si:if(n.element.template)return Bt(u,n.nodeIndex).template;break;case ui:return Yl(Ri(u,n,t));case oi:case ai:return ql(u,n);default:const e=(t?n.element.allProviders:n.element.publicProviders)[s];if(e){let n=Wt(u,e.nodeIndex);return n||(n={instance:Ei(u,e)},u.nodes[e.nodeIndex]=n),n.instance}}t=al(u),n=ul(u),u=u.parent,4&l.flags&&(u=null)}const o=r.root.injector.get(l.token,bi);return o!==bi||i===bi?o:r.root.ngModule.injector.get(l.token,i)}function Ri(e,n,t){let l;if(t)l=Bt(e,n.nodeIndex).componentView;else for(l=e;l.parent&&!al(l);)l=l.parent;return l}function Ti(e,n,t,l,i,r){if(32768&t.flags){const n=Bt(e,t.parent.nodeIndex).componentView;2&n.def.flags&&(n.state|=8)}if(n.instance[t.bindings[l].name]=i,524288&t.flags){r=r||{};const n=Wn.unwrap(e.oldValues[t.bindingIndex+l]);r[t.bindings[l].nonMinifiedName]=new Kn(n,i,0!=(2&e.state))}return e.oldValues[t.bindingIndex+l]=i,r}function Ci(e,n){if(!(e.def.nodeFlags&n))return;const t=e.def.nodes;let l=0;for(let i=0;i<t.length;i++){const r=t[i];let s=r.parent;for(!s&&r.flags&n&&yi(e,i,r.flags&n,l++),0==(r.childFlags&n)&&(i+=r.childCount);s&&1&s.flags&&i===s.nodeIndex+s.childCount;)s.directChildFlags&n&&(l=Ii(e,s,n,l)),s=s.parent}}function Ii(e,n,t,l){for(let i=n.nodeIndex+1;i<=n.nodeIndex+n.childCount;i++){const n=e.def.nodes[i];n.flags&t&&yi(e,i,n.flags&t,l++),i+=n.childCount}return l}function yi(e,n,t,l){const i=Wt(e,n);if(!i)return;const r=i.instance;r&&(Yt.setCurrentNode(e,n),1048576&t&&Ut(e,512,l)&&r.ngAfterContentInit(),2097152&t&&r.ngAfterContentChecked(),4194304&t&&Ut(e,768,l)&&r.ngAfterViewInit(),8388608&t&&r.ngAfterViewChecked(),131072&t&&r.ngOnDestroy())}const _i=new Ce("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>tn}),Ai={},wi=function(){var e={LocaleId:0,DayPeriodsFormat:1,DayPeriodsStandalone:2,DaysFormat:3,DaysStandalone:4,MonthsFormat:5,MonthsStandalone:6,Eras:7,FirstDayOfWeek:8,WeekendRange:9,DateFormat:10,TimeFormat:11,DateTimeFormat:12,NumberSymbols:13,NumberFormats:14,CurrencySymbol:15,CurrencyName:16,Currencies:17,PluralCase:18,ExtraData:19};return e[e.LocaleId]="LocaleId",e[e.DayPeriodsFormat]="DayPeriodsFormat",e[e.DayPeriodsStandalone]="DayPeriodsStandalone",e[e.DaysFormat]="DaysFormat",e[e.DaysStandalone]="DaysStandalone",e[e.MonthsFormat]="MonthsFormat",e[e.MonthsStandalone]="MonthsStandalone",e[e.Eras]="Eras",e[e.FirstDayOfWeek]="FirstDayOfWeek",e[e.WeekendRange]="WeekendRange",e[e.DateFormat]="DateFormat",e[e.TimeFormat]="TimeFormat",e[e.DateTimeFormat]="DateTimeFormat",e[e.NumberSymbols]="NumberSymbols",e[e.NumberFormats]="NumberFormats",e[e.CurrencySymbol]="CurrencySymbol",e[e.CurrencyName]="CurrencyName",e[e.Currencies]="Currencies",e[e.PluralCase]="PluralCase",e[e.ExtraData]="ExtraData",e}(),Ni=void 0;var Pi=["en",[["a","p"],["AM","PM"],Ni],[["AM","PM"],Ni,Ni],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ni,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ni,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ni,"{1} 'at' {0}",Ni],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",{},function(e){let n=Math.floor(Math.abs(e)),t=e.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===t?1:5}];function ki(e){const n=e.toLowerCase().replace(/_/g,"-");let t=Ai[n];if(t)return t;const l=n.split("-")[0];if(t=Ai[l])return t;if("en"===l)return Pi;throw new Error(`Missing locale data for the locale "${e}".`)}let xi="en-US";class Mi extends _{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,t){let l,i=e=>null,r=()=>null;e&&"object"==typeof e?(l=this.__isAsync?n=>{setTimeout(()=>e.next(n))}:n=>{e.next(n)},e.error&&(i=this.__isAsync?n=>{setTimeout(()=>e.error(n))}:n=>{e.error(n)}),e.complete&&(r=this.__isAsync?()=>{setTimeout(()=>e.complete())}:()=>{e.complete()})):(l=this.__isAsync?n=>{setTimeout(()=>e(n))}:n=>{e(n)},n&&(i=this.__isAsync?e=>{setTimeout(()=>n(e))}:e=>{n(e)}),t&&(r=this.__isAsync?()=>{setTimeout(()=>t())}:()=>{t()}));const s=super.subscribe(l,i,r);return e instanceof d&&e.add(s),s}}function Di(){return this._results[Un()]()}class Li{constructor(){this.dirty=!0,this._results=[],this.changes=new Mi,this.length=0;const e=Un(),n=Li.prototype;n[e]||(n[e]=Di)}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e){this._results=function e(n,t){void 0===t&&(t=n);for(let l=0;l<n.length;l++){let i=n[l];Array.isArray(i)?(t===n&&(t=n.slice(0,l)),e(i,t)):t!==n&&t.push(i)}return t}(e),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}const Fi=new Ce("Application Initializer"),Hi=(()=>(class{constructor(e){this.appInits=e,this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}runInitializers(){if(this.initialized)return;const e=[],n=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let t=0;t<this.appInits.length;t++){const n=this.appInits[t]();Yn(n)&&e.push(n)}Promise.all(e).then(()=>{n()}).catch(e=>{this.reject(e)}),0===e.length&&n(),this.initialized=!0}}))(),Ui=new Ce("AppId");function Gi(){return`${Bi()}${Bi()}${Bi()}`}function Bi(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Wi=new Ce("Platform Initializer"),Vi=new Ce("Platform ID"),zi=new Ce("appBootstrapListener"),Yi=(()=>(class{log(e){console.log(e)}warn(e){console.warn(e)}}))(),$i=new Ce("LocaleId");function Ki(){throw new Error("Runtime compiler is not loaded")}const ji=Ki,qi=Ki,Xi=Ki,Qi=Ki,Zi=(()=>(class{constructor(){this.compileModuleSync=ji,this.compileModuleAsync=qi,this.compileModuleAndAllComponentsSync=Xi,this.compileModuleAndAllComponentsAsync=Qi}clearCache(){}clearCacheFor(e){}getModuleId(e){}}))();class Ji{}let er,nr;function tr(){const e=Te.wtf;return!(!e||!(er=e.trace)||(nr=er.events,0))}const lr=tr(),ir=lr?function(e,n=null){return nr.createScope(e,n)}:(e,n)=>(function(e,n){return null}),rr=lr?function(e,n){return er.leaveScope(e,n),n}:(e,n)=>n,sr=(()=>Promise.resolve(0))();function ur(e){"undefined"==typeof Zone?sr.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class or{constructor({enableLongStackTrace:e=!1}){if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Mi(!1),this.onMicrotaskEmpty=new Mi(!1),this.onStable=new Mi(!1),this.onError=new Mi(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");var n;Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(n=this)._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,t,l,i,r,s)=>{try{return dr(n),e.invokeTask(l,i,r,s)}finally{gr(n)}},onInvoke:(e,t,l,i,r,s,u)=>{try{return dr(n),e.invoke(l,i,r,s,u)}finally{gr(n)}},onHasTask:(e,t,l,i)=>{e.hasTask(l,i),t===l&&("microTask"==i.change?(n.hasPendingMicrotasks=i.microTask,hr(n)):"macroTask"==i.change&&(n.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,t,l,i)=>(e.handleError(l,i),n.runOutsideAngular(()=>n.onError.emit(i)),!1)})}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!or.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(or.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,n,t){return this._inner.run(e,n,t)}runTask(e,n,t,l){const i=this._inner,r=i.scheduleEventTask("NgZoneEvent: "+l,e,cr,ar,ar);try{return i.runTask(r,n,t)}finally{i.cancelTask(r)}}runGuarded(e,n,t){return this._inner.runGuarded(e,n,t)}runOutsideAngular(e){return this._outer.run(e)}}function ar(){}const cr={};function hr(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function dr(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function gr(e){e._nesting--,hr(e)}class pr{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Mi,this.onMicrotaskEmpty=new Mi,this.onStable=new Mi,this.onError=new Mi}run(e){return e()}runGuarded(e){return e()}runOutsideAngular(e){return e()}runTask(e){return e()}}const mr=(()=>(class{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{or.assertNotInAngularZone(),ur(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ur(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(n=>!n.updateCb||!n.updateCb(e)||(clearTimeout(n.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,n,t){let l=-1;n&&n>0&&(l=setTimeout(()=>{this._callbacks=this._callbacks.filter(e=>e.timeoutId!==l),e(this._didWork,this.getPendingTasks())},n)),this._callbacks.push({doneCb:e,timeoutId:l,updateCb:t})}whenStable(e,n,t){if(t&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(e,n,t),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,n,t){return[]}}))(),fr=(()=>{class e{constructor(){this._applications=new Map,vr.addToWindow(this)}registerApplication(e,n){this._applications.set(e,n)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,n=!0){return vr.findTestabilityInTree(this,e,n)}}return e.ctorParameters=()=>[],e})();class Sr{addToWindow(e){}findTestabilityInTree(e,n,t){return null}}let Er,vr=new Sr,br=function(e){return e instanceof nt};const Or=new Ce("AllowMultipleToken");class Rr{constructor(e,n){this.name=e,this.token=n}}function Tr(e,n,t=[]){const l=`Platform: ${n}`,i=new Ce(l);return(n=[])=>{let r=Cr();if(!r||r.injector.get(Or,!1))if(e)e(t.concat(n).concat({provide:i,useValue:!0}));else{const e=t.concat(n).concat({provide:i,useValue:!0});!function(e){if(Er&&!Er.destroyed&&!Er.injector.get(Or,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Er=e.get(Ir);const n=e.get(Wi,null);n&&n.forEach(e=>e())}(We.create({providers:e,name:l}))}return function(e){const n=Cr();if(!n)throw new Error("No platform exists!");if(!n.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return n}(i)}}function Cr(){return Er&&!Er.destroyed?Er:null}const Ir=(()=>(class{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,n){const t="noop"===(i=n?n.ngZone:void 0)?new pr:("zone.js"===i?void 0:i)||new or({enableLongStackTrace:sn()}),l=[{provide:or,useValue:t}];var i;return t.run(()=>{const n=We.create({providers:l,parent:this.injector,name:e.moduleType.name}),i=e.create(n),r=i.injector.get(Dn,null);if(!r)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return function(e){xi=e.toLowerCase().replace(/_/g,"-")}(i.injector.get($i,"en-US")),i.onDestroy(()=>Ar(this._modules,i)),t.runOutsideAngular(()=>t.onError.subscribe({next:e=>{r.handleError(e)}})),function(e,n,t){try{const i=t();return Yn(i)?i.catch(t=>{throw n.runOutsideAngular(()=>e.handleError(t)),t}):i}catch(l){throw n.runOutsideAngular(()=>e.handleError(l)),l}}(r,t,()=>{const e=i.injector.get(Hi);return e.runInitializers(),e.donePromise.then(()=>(this._moduleDoBootstrap(i),i))})})}bootstrapModule(e,n=[]){const t=yr({},n);return function(e,n,t){return e.get(Ji).createCompiler([n]).compileModuleAsync(t)}(this.injector,t,e).then(e=>this.bootstrapModuleFactory(e,t))}_moduleDoBootstrap(e){const n=e.injector.get(_r);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(e=>n.bootstrap(e));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${me(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. `+"Please define one of these.");e.instance.ngDoBootstrap(n)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}))();function yr(e,n){return Array.isArray(n)?n.reduce(yr,e):Object.assign({},e,n)}const _r=(()=>{class e{constructor(e,n,t,l,i,r){this._zone=e,this._console=n,this._injector=t,this._exceptionHandler=l,this._componentFactoryResolver=i,this._initStatus=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=sn(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new O(e=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{e.next(this._stable),e.complete()})}),u=new O(e=>{let n;this._zone.runOutsideAngular(()=>{n=this._zone.onStable.subscribe(()=>{or.assertNotInAngularZone(),ur(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,e.next(!0))})})});const t=this._zone.onUnstable.subscribe(()=>{or.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{e.next(!1)}))});return()=>{n.unsubscribe(),t.unsubscribe()}});this.isStable=X(s,u.pipe(e=>Q()(function(e,n){return function(n){let t;t="function"==typeof e?e:function(){return e};const l=Object.create(n,ne);return l.source=n,l.subjectFactory=t,l}}(le)(e))))}bootstrap(e,n){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let t;t=e instanceof qn?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(t.componentType);const l=br(t)?null:this._injector.get(tt),i=t.create(We.NULL,[],n||t.selector,l);i.onDestroy(()=>{this._unloadComponent(i)});const r=i.injector.get(mr,null);return r&&i.injector.get(fr).registerApplication(i.location.nativeElement,r),this._loadComponent(i),sn()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");const n=e._tickScope();try{this._runningTick=!0;for(let e of this._views)e.detectChanges();if(this._enforceNoNewChanges)for(let e of this._views)e.checkNoChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1,rr(n)}}attachView(e){const n=e;this._views.push(n),n.attachToAppRef(this)}detachView(e){const n=e;Ar(this._views,n),n.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(zi,[]).concat(this._bootstrapListeners).forEach(n=>n(e))}_unloadComponent(e){this.detachView(e.hostView),Ar(this.components,e)}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy())}get viewCount(){return this._views.length}}return e._tickScope=ir("ApplicationRef#tick()"),e})();function Ar(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}class wr{}class Nr{}const Pr={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},kr=(()=>(class{constructor(e,n){this._compiler=e,this._config=n||Pr}load(e){return this._compiler instanceof Zi?this.loadFactory(e):this.loadAndCompile(e)}loadAndCompile(e){let[n,l]=e.split("#");return void 0===l&&(l="default"),t("crnd")(n).then(e=>e[l]).then(e=>xr(e,n,l)).then(e=>this._compiler.compileModuleAsync(e))}loadFactory(e){let[n,l]=e.split("#"),i="NgFactory";return void 0===l&&(l="default",i=""),t("crnd")(this._config.factoryPathPrefix+n+this._config.factoryPathSuffix).then(e=>e[l+i]).then(e=>xr(e,n,l))}}))();function xr(e,n,t){if(!e)throw new Error(`Cannot find '${t}' in '${n}'`);return e}class Mr{constructor(e,n){this.name=e,this.callback=n}}class Dr{constructor(e,n,t){this.listeners=[],this.parent=null,this._debugContext=t,this.nativeNode=e,n&&n instanceof Lr&&n.addChild(this)}get injector(){return this._debugContext.injector}get componentInstance(){return this._debugContext.component}get context(){return this._debugContext.context}get references(){return this._debugContext.references}get providerTokens(){return this._debugContext.providerTokens}}class Lr extends Dr{constructor(e,n,t){super(e,n,t),this.properties={},this.attributes={},this.classes={},this.styles={},this.childNodes=[],this.nativeElement=e}addChild(e){e&&(this.childNodes.push(e),e.parent=this)}removeChild(e){const n=this.childNodes.indexOf(e);-1!==n&&(e.parent=null,this.childNodes.splice(n,1))}insertChildrenAfter(e,n){const t=this.childNodes.indexOf(e);-1!==t&&(this.childNodes.splice(t+1,0,...n),n.forEach(n=>{n.parent&&n.parent.removeChild(n),e.parent=this}))}insertBefore(e,n){const t=this.childNodes.indexOf(e);-1===t?this.addChild(n):(n.parent&&n.parent.removeChild(n),n.parent=this,this.childNodes.splice(t,0,n))}query(e){return this.queryAll(e)[0]||null}queryAll(e){const n=[];return function e(n,t,l){n.childNodes.forEach(n=>{n instanceof Lr&&(t(n)&&l.push(n),e(n,t,l))})}(this,e,n),n}queryAllNodes(e){const n=[];return function e(n,t,l){n instanceof Lr&&n.childNodes.forEach(n=>{t(n)&&l.push(n),n instanceof Lr&&e(n,t,l)})}(this,e,n),n}get children(){return this.childNodes.filter(e=>e instanceof Lr)}triggerEventHandler(e,n){this.listeners.forEach(t=>{t.name==e&&t.callback(n)})}}const Fr=new Map,Hr=function(e){return Fr.get(e)||null};function Ur(e){Fr.set(e.nativeNode,e)}const Gr=Tr(null,"core",[{provide:Vi,useValue:"unknown"},{provide:Ir,deps:[We]},{provide:fr,deps:[]},{provide:Yi,deps:[]}]);function Br(){return wt}function Wr(){return Nt}function Vr(e){return e||"en-US"}function zr(e){let n=[];return e.onStable.subscribe(()=>{for(;n.length;)n.pop()()}),function(e){n.push(e)}}const Yr=(()=>(class{constructor(e){}}))();function $r(e,n,t,l,i,r){e|=1;const{matchedQueries:s,references:u,matchedQueryIds:o}=dl(n);return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:e,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:s,matchedQueryIds:o,references:u,ngContentIndex:t,childCount:l,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:r?fl(r):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:i||$t},provider:null,text:null,query:null,ngContent:null}}function Kr(e,n,t,l,i,r,s=[],u,o,a,c,h){a||(a=$t);const{matchedQueries:d,references:g,matchedQueryIds:p}=dl(t);let m=null,f=null;r&&([m,f]=Tl(r)),u=u||[];const S=new Array(u.length);for(let b=0;b<u.length;b++){const[e,n,t]=u[b],[l,i]=Tl(n);let r=void 0,s=void 0;switch(15&e){case 4:s=t;break;case 1:case 8:r=t}S[b]={flags:e,ns:l,name:i,nonMinifiedName:i,securityContext:r,suffix:s}}o=o||[];const E=new Array(o.length);for(let b=0;b<o.length;b++){const[e,n]=o[b];E[b]={type:0,target:e,eventName:n,propName:null}}const v=(s=s||[]).map(([e,n])=>{const[t,l]=Tl(e);return[t,l,n]});return h=function(e){if(e&&e.id===Xt){const n=null!=e.encapsulation&&e.encapsulation!==nn.None||e.styles.length||Object.keys(e.data).length;e.id=n?`c${Jt++}`:Qt}return e&&e.id===Qt&&(e=null),e||null}(h),c&&(n|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:n|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:d,matchedQueryIds:p,references:g,ngContentIndex:l,childCount:i,bindings:S,bindingFlags:Cl(S),outputs:E,element:{ns:m,name:f,attrs:v,template:null,componentProvider:null,componentView:c||null,componentRendererType:h,publicProviders:null,allProviders:null,handleEvent:a||$t},provider:null,text:null,query:null,ngContent:null}}function jr(e,n,t){const l=t.element,i=e.root.selectorOrNode,r=e.renderer;let s;if(e.parent||!i){s=l.name?r.createElement(l.name,l.ns):r.createComment("");const i=pl(e,n,t);i&&r.appendChild(i,s)}else s=r.selectRootElement(i,!!l.componentRendererType&&l.componentRendererType.encapsulation===nn.ShadowDom);if(l.attrs)for(let u=0;u<l.attrs.length;u++){const[e,n,t]=l.attrs[u];r.setAttribute(s,n,t,e)}return s}function qr(e,n,t,l){for(let s=0;s<t.outputs.length;s++){const u=t.outputs[s],o=Xr(e,t.nodeIndex,(r=u.eventName,(i=u.target)?`${i}:${r}`:r));let a=u.target,c=e;"component"===u.target&&(a=null,c=n);const h=c.renderer.listen(a||l,u.eventName,o);e.disposables[t.outputIndex+s]=h}var i,r}function Xr(e,n,t){return l=>rl(e,n,t,l)}function Qr(e,n,t,l){if(!nl(e,n,t,l))return!1;const i=n.bindings[t],r=Bt(e,n.nodeIndex),s=r.renderElement,u=i.name;switch(15&i.flags){case 1:!function(e,n,t,l,i,r){const s=n.securityContext;let u=s?e.root.sanitizer.sanitize(s,r):r;u=null!=u?u.toString():null;const o=e.renderer;null!=r?o.setAttribute(t,i,u,l):o.removeAttribute(t,i,l)}(e,i,s,i.ns,u,l);break;case 2:!function(e,n,t,l){const i=e.renderer;l?i.addClass(n,t):i.removeClass(n,t)}(e,s,u,l);break;case 4:!function(e,n,t,l,i){let r=e.root.sanitizer.sanitize(An.STYLE,i);if(null!=r){r=r.toString();const e=n.suffix;null!=e&&(r+=e)}else r=null;const s=e.renderer;null!=r?s.setStyle(t,l,r):s.removeStyle(t,l)}(e,i,s,u,l);break;case 8:!function(e,n,t,l,i){const r=n.securityContext;let s=r?e.root.sanitizer.sanitize(r,i):i;e.renderer.setProperty(t,l,s)}(33554432&n.flags&&32&i.flags?r.componentView:e,i,s,u,l)}return!0}function Zr(e,n,t){let l=[];for(let i in t)l.push({propName:i,bindingType:t[i]});return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,ngContentIndex:-1,matchedQueries:{},matchedQueryIds:0,references:{},childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:{id:n,filterId:hl(n),bindings:l},ngContent:null}}function Jr(e){const n=e.def.nodeMatchedQueries;for(;e.parent&&cl(e);){let t=e.parentNodeDef;e=e.parent;const l=t.nodeIndex+t.childCount;for(let i=0;i<=l;i++){const l=e.def.nodes[i];67108864&l.flags&&536870912&l.flags&&(l.query.filterId&n)===l.query.filterId&&zt(e,i).setDirty(),!(1&l.flags&&i+l.childCount<t.nodeIndex)&&67108864&l.childFlags&&536870912&l.childFlags||(i+=l.childCount)}}if(134217728&e.def.nodeFlags)for(let t=0;t<e.def.nodes.length;t++){const n=e.def.nodes[t];134217728&n.flags&&536870912&n.flags&&zt(e,t).setDirty(),t+=n.childCount}}function es(e,n){const t=zt(e,n.nodeIndex);if(!t.dirty)return;let l,i=void 0;if(67108864&n.flags){const t=n.parent.parent;i=ns(e,t.nodeIndex,t.nodeIndex+t.childCount,n.query,[]),l=Wt(e,n.parent.nodeIndex).instance}else 134217728&n.flags&&(i=ns(e,0,e.def.nodes.length-1,n.query,[]),l=e.component);t.reset(i);const r=n.query.bindings;let s=!1;for(let u=0;u<r.length;u++){const e=r[u];let n;switch(e.bindingType){case 0:n=t.first;break;case 1:n=t,s=!0}l[e.propName]=n}s&&t.notifyOnChanges()}function ns(e,n,t,l,i){for(let r=n;r<=t;r++){const n=e.def.nodes[r],t=n.matchedQueries[l.id];if(null!=t&&i.push(ts(e,n,t)),1&n.flags&&n.element.template&&(n.element.template.nodeMatchedQueries&l.filterId)===l.filterId){const t=Bt(e,r);if((n.childMatchedQueries&l.filterId)===l.filterId&&(ns(e,r+1,r+n.childCount,l,i),r+=n.childCount),16777216&n.flags){const e=t.viewContainer._embeddedViews;for(let n=0;n<e.length;n++){const r=e[n],s=sl(r);s&&s===t&&ns(r,0,r.def.nodes.length-1,l,i)}}const s=t.template._projectedViews;if(s)for(let e=0;e<s.length;e++){const n=s[e];ns(n,0,n.def.nodes.length-1,l,i)}}(n.childMatchedQueries&l.filterId)!==l.filterId&&(r+=n.childCount)}return i}function ts(e,n,t){if(null!=t)switch(t){case 1:return Bt(e,n.nodeIndex).renderElement;case 0:return new rt(Bt(e,n.nodeIndex).renderElement);case 2:return Bt(e,n.nodeIndex).template;case 3:return Bt(e,n.nodeIndex).viewContainer;case 4:return Wt(e,n.nodeIndex).instance}}function ls(e,n,t){const l=pl(e,n,t);l&&vl(e,t.ngContent.index,1,l,null,void 0)}function is(e,n){return ss(128,e,new Array(n+1))}function rs(e,n){const t=Object.keys(n),l=t.length,i=new Array(l);for(let r=0;r<l;r++){const e=t[r];i[n[e]]=e}return ss(64,e,i)}function ss(e,n,t){const l=new Array(t.length);for(let i=0;i<t.length;i++){const e=t[i];l[i]={flags:8,name:e,ns:null,nonMinifiedName:e,securityContext:null,suffix:null}}return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:n,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:-1,childCount:0,bindings:l,bindingFlags:Cl(l),outputs:[],element:null,provider:null,text:null,query:null,ngContent:null}}function us(e,n,t){const l=new Array(t.length-1);for(let i=1;i<t.length;i++)l[i-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:t[i]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:n,childCount:0,bindings:l,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:t[0]},query:null,ngContent:null}}function os(e,n,t){let l;const i=e.renderer;l=i.createText(t.text.prefix);const r=pl(e,n,t);return r&&i.appendChild(r,l),{renderText:l}}function as(e,n){return(null!=e?e.toString():"")+n.suffix}function cs(e,n,t,l){let i=0,r=0,s=0,u=0,o=0,a=null,c=null,h=!1,d=!1,g=null;for(let p=0;p<n.length;p++){const e=n[p];if(e.nodeIndex=p,e.parent=a,e.bindingIndex=i,e.outputIndex=r,e.renderParent=c,s|=e.flags,o|=e.matchedQueryIds,e.element){const n=e.element;n.publicProviders=a?a.element.publicProviders:Object.create(null),n.allProviders=n.publicProviders,h=!1,d=!1,e.element.template&&(o|=e.element.template.nodeMatchedQueries)}if(ds(a,e,n.length),i+=e.bindings.length,r+=e.outputs.length,!c&&3&e.flags&&(g=e),20224&e.flags){h||(h=!0,a.element.publicProviders=Object.create(a.element.publicProviders),a.element.allProviders=a.element.publicProviders);const n=0!=(32768&e.flags);0==(8192&e.flags)||n?a.element.publicProviders[jt(e.provider.token)]=e:(d||(d=!0,a.element.allProviders=Object.create(a.element.publicProviders)),a.element.allProviders[jt(e.provider.token)]=e),n&&(a.element.componentProvider=e)}if(a?(a.childFlags|=e.flags,a.directChildFlags|=e.flags,a.childMatchedQueries|=e.matchedQueryIds,e.element&&e.element.template&&(a.childMatchedQueries|=e.element.template.nodeMatchedQueries)):u|=e.flags,e.childCount>0)a=e,hs(e)||(c=e);else for(;a&&p===a.nodeIndex+a.childCount;){const e=a.parent;e&&(e.childFlags|=a.childFlags,e.childMatchedQueries|=a.childMatchedQueries),c=(a=e)&&hs(a)?a.renderParent:a}}return{factory:null,nodeFlags:s,rootNodeFlags:u,nodeMatchedQueries:o,flags:e,nodes:n,updateDirectives:t||$t,updateRenderer:l||$t,handleEvent:(e,t,l,i)=>n[t].element.handleEvent(e,l,i),bindingCount:i,outputCount:r,lastRenderRootNode:g}}function hs(e){return 0!=(1&e.flags)&&null===e.element.name}function ds(e,n,t){const l=n.element&&n.element.template;if(l){if(!l.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(l.lastRenderRootNode&&16777216&l.lastRenderRootNode.flags)throw new Error(`Illegal State: Last root node of a template can't have embedded views, at index ${n.nodeIndex}!`)}if(20224&n.flags&&0==(1&(e?e.flags:0)))throw new Error(`Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index ${n.nodeIndex}!`);if(n.query){if(67108864&n.flags&&(!e||0==(16384&e.flags)))throw new Error(`Illegal State: Content Query nodes need to be children of directives, at index ${n.nodeIndex}!`);if(134217728&n.flags&&e)throw new Error(`Illegal State: View Query nodes have to be top level nodes, at index ${n.nodeIndex}!`)}if(n.childCount){const l=e?e.nodeIndex+e.childCount:t-1;if(n.nodeIndex<=l&&n.nodeIndex+n.childCount>l)throw new Error(`Illegal State: childCount of node leads outside of parent, at index ${n.nodeIndex}!`)}}function gs(e,n,t,l){const i=fs(e.root,e.renderer,e,n,t);return Ss(i,e.component,l),Es(i),i}function ps(e,n,t){const l=fs(e,e.renderer,null,null,n);return Ss(l,t,t),Es(l),l}function ms(e,n,t,l){const i=n.element.componentRendererType;let r;return r=i?e.root.rendererFactory.createRenderer(l,i):e.root.renderer,fs(e.root,r,e,n.element.componentProvider,t)}function fs(e,n,t,l,i){const r=new Array(i.nodes.length),s=i.outputCount?new Array(i.outputCount):null;return{def:i,parent:t,viewContainerParent:null,parentNodeDef:l,context:null,component:null,nodes:r,state:13,root:e,renderer:n,oldValues:new Array(i.bindingCount),disposables:s,initIndex:-1}}function Ss(e,n,t){e.component=n,e.context=t}function Es(e){let n;al(e)&&(n=Bt(e.parent,e.parentNodeDef.parent.nodeIndex).renderElement);const t=e.def,l=e.nodes;for(let i=0;i<t.nodes.length;i++){const r=t.nodes[i];let s;switch(Yt.setCurrentNode(e,i),201347067&r.flags){case 1:const t=jr(e,n,r);let u=void 0;if(33554432&r.flags){const n=fl(r.element.componentView);u=Yt.createComponentView(e,r,n,t)}qr(e,u,r,t),s={renderElement:t,componentView:u,viewContainer:null,template:r.element.template?Kl(e,r):void 0},16777216&r.flags&&(s.viewContainer=Vl(e,r,s));break;case 2:s=os(e,n,r);break;case 512:case 1024:case 2048:case 256:(s=l[i])||4096&r.flags||(s={instance:pi(e,r)});break;case 16:s={instance:mi(e,r)};break;case 16384:(s=l[i])||(s={instance:fi(e,r)}),32768&r.flags&&Ss(Bt(e,r.parent.nodeIndex).componentView,s.instance,s.instance);break;case 32:case 64:case 128:s={value:void 0};break;case 67108864:case 134217728:s=new Li;break;case 8:ls(e,n,r),s=void 0}l[i]=s}_s(e,ys.CreateViewNodes),Ps(e,201326592,268435456,0)}function vs(e){Rs(e),Yt.updateDirectives(e,1),As(e,ys.CheckNoChanges),Yt.updateRenderer(e,1),_s(e,ys.CheckNoChanges),e.state&=-97}function bs(e){1&e.state?(e.state&=-2,e.state|=2):e.state&=-3,Ht(e,0,256),Rs(e),Yt.updateDirectives(e,0),As(e,ys.CheckAndUpdate),Ps(e,67108864,536870912,0);let n=Ht(e,256,512);Ci(e,2097152|(n?1048576:0)),Yt.updateRenderer(e,0),_s(e,ys.CheckAndUpdate),Ps(e,134217728,536870912,0),Ci(e,8388608|((n=Ht(e,512,768))?4194304:0)),2&e.def.flags&&(e.state&=-9),e.state&=-97,Ht(e,768,1024)}function Os(e,n,t,l,i,r,s,u,o,a,c,h,d){return 0===t?function(e,n,t,l,i,r,s,u,o,a,c,h){switch(201347067&n.flags){case 1:return function(e,n,t,l,i,r,s,u,o,a,c,h){const d=n.bindings.length;let g=!1;return d>0&&Qr(e,n,0,t)&&(g=!0),d>1&&Qr(e,n,1,l)&&(g=!0),d>2&&Qr(e,n,2,i)&&(g=!0),d>3&&Qr(e,n,3,r)&&(g=!0),d>4&&Qr(e,n,4,s)&&(g=!0),d>5&&Qr(e,n,5,u)&&(g=!0),d>6&&Qr(e,n,6,o)&&(g=!0),d>7&&Qr(e,n,7,a)&&(g=!0),d>8&&Qr(e,n,8,c)&&(g=!0),d>9&&Qr(e,n,9,h)&&(g=!0),g}(e,n,t,l,i,r,s,u,o,a,c,h);case 2:return function(e,n,t,l,i,r,s,u,o,a,c,h){let d=!1;const g=n.bindings,p=g.length;if(p>0&&nl(e,n,0,t)&&(d=!0),p>1&&nl(e,n,1,l)&&(d=!0),p>2&&nl(e,n,2,i)&&(d=!0),p>3&&nl(e,n,3,r)&&(d=!0),p>4&&nl(e,n,4,s)&&(d=!0),p>5&&nl(e,n,5,u)&&(d=!0),p>6&&nl(e,n,6,o)&&(d=!0),p>7&&nl(e,n,7,a)&&(d=!0),p>8&&nl(e,n,8,c)&&(d=!0),p>9&&nl(e,n,9,h)&&(d=!0),d){let d=n.text.prefix;p>0&&(d+=as(t,g[0])),p>1&&(d+=as(l,g[1])),p>2&&(d+=as(i,g[2])),p>3&&(d+=as(r,g[3])),p>4&&(d+=as(s,g[4])),p>5&&(d+=as(u,g[5])),p>6&&(d+=as(o,g[6])),p>7&&(d+=as(a,g[7])),p>8&&(d+=as(c,g[8])),p>9&&(d+=as(h,g[9]));const m=Gt(e,n.nodeIndex).renderText;e.renderer.setValue(m,d)}return d}(e,n,t,l,i,r,s,u,o,a,c,h);case 16384:return function(e,n,t,l,i,r,s,u,o,a,c,h){const d=Wt(e,n.nodeIndex),g=d.instance;let p=!1,m=void 0;const f=n.bindings.length;return f>0&&el(e,n,0,t)&&(p=!0,m=Ti(e,d,n,0,t,m)),f>1&&el(e,n,1,l)&&(p=!0,m=Ti(e,d,n,1,l,m)),f>2&&el(e,n,2,i)&&(p=!0,m=Ti(e,d,n,2,i,m)),f>3&&el(e,n,3,r)&&(p=!0,m=Ti(e,d,n,3,r,m)),f>4&&el(e,n,4,s)&&(p=!0,m=Ti(e,d,n,4,s,m)),f>5&&el(e,n,5,u)&&(p=!0,m=Ti(e,d,n,5,u,m)),f>6&&el(e,n,6,o)&&(p=!0,m=Ti(e,d,n,6,o,m)),f>7&&el(e,n,7,a)&&(p=!0,m=Ti(e,d,n,7,a,m)),f>8&&el(e,n,8,c)&&(p=!0,m=Ti(e,d,n,8,c,m)),f>9&&el(e,n,9,h)&&(p=!0,m=Ti(e,d,n,9,h,m)),m&&g.ngOnChanges(m),65536&n.flags&&Ut(e,256,n.nodeIndex)&&g.ngOnInit(),262144&n.flags&&g.ngDoCheck(),p}(e,n,t,l,i,r,s,u,o,a,c,h);case 32:case 64:case 128:return function(e,n,t,l,i,r,s,u,o,a,c,h){const d=n.bindings;let g=!1;const p=d.length;if(p>0&&nl(e,n,0,t)&&(g=!0),p>1&&nl(e,n,1,l)&&(g=!0),p>2&&nl(e,n,2,i)&&(g=!0),p>3&&nl(e,n,3,r)&&(g=!0),p>4&&nl(e,n,4,s)&&(g=!0),p>5&&nl(e,n,5,u)&&(g=!0),p>6&&nl(e,n,6,o)&&(g=!0),p>7&&nl(e,n,7,a)&&(g=!0),p>8&&nl(e,n,8,c)&&(g=!0),p>9&&nl(e,n,9,h)&&(g=!0),g){const g=Vt(e,n.nodeIndex);let m;switch(201347067&n.flags){case 32:m=new Array(d.length),p>0&&(m[0]=t),p>1&&(m[1]=l),p>2&&(m[2]=i),p>3&&(m[3]=r),p>4&&(m[4]=s),p>5&&(m[5]=u),p>6&&(m[6]=o),p>7&&(m[7]=a),p>8&&(m[8]=c),p>9&&(m[9]=h);break;case 64:m={},p>0&&(m[d[0].name]=t),p>1&&(m[d[1].name]=l),p>2&&(m[d[2].name]=i),p>3&&(m[d[3].name]=r),p>4&&(m[d[4].name]=s),p>5&&(m[d[5].name]=u),p>6&&(m[d[6].name]=o),p>7&&(m[d[7].name]=a),p>8&&(m[d[8].name]=c),p>9&&(m[d[9].name]=h);break;case 128:const e=t;switch(p){case 1:m=e.transform(t);break;case 2:m=e.transform(l);break;case 3:m=e.transform(l,i);break;case 4:m=e.transform(l,i,r);break;case 5:m=e.transform(l,i,r,s);break;case 6:m=e.transform(l,i,r,s,u);break;case 7:m=e.transform(l,i,r,s,u,o);break;case 8:m=e.transform(l,i,r,s,u,o,a);break;case 9:m=e.transform(l,i,r,s,u,o,a,c);break;case 10:m=e.transform(l,i,r,s,u,o,a,c,h)}}g.value=m}return g}(e,n,t,l,i,r,s,u,o,a,c,h);default:throw"unreachable"}}(e,n,l,i,r,s,u,o,a,c,h,d):function(e,n,t){switch(201347067&n.flags){case 1:return function(e,n,t){let l=!1;for(let i=0;i<t.length;i++)Qr(e,n,i,t[i])&&(l=!0);return l}(e,n,t);case 2:return function(e,n,t){const l=n.bindings;let i=!1;for(let r=0;r<t.length;r++)nl(e,n,r,t[r])&&(i=!0);if(i){let i="";for(let e=0;e<t.length;e++)i+=as(t[e],l[e]);i=n.text.prefix+i;const r=Gt(e,n.nodeIndex).renderText;e.renderer.setValue(r,i)}return i}(e,n,t);case 16384:return function(e,n,t){const l=Wt(e,n.nodeIndex),i=l.instance;let r=!1,s=void 0;for(let u=0;u<t.length;u++)el(e,n,u,t[u])&&(r=!0,s=Ti(e,l,n,u,t[u],s));return s&&i.ngOnChanges(s),65536&n.flags&&Ut(e,256,n.nodeIndex)&&i.ngOnInit(),262144&n.flags&&i.ngDoCheck(),r}(e,n,t);case 32:case 64:case 128:return function(e,n,t){const l=n.bindings;let i=!1;for(let r=0;r<t.length;r++)nl(e,n,r,t[r])&&(i=!0);if(i){const i=Vt(e,n.nodeIndex);let r;switch(201347067&n.flags){case 32:r=t;break;case 64:r={};for(let n=0;n<t.length;n++)r[l[n].name]=t[n];break;case 128:const e=t[0],i=t.slice(1);r=e.transform(...i)}i.value=r}return i}(e,n,t);default:throw"unreachable"}}(e,n,l)}function Rs(e){const n=e.def;if(4&n.nodeFlags)for(let t=0;t<n.nodes.length;t++){const l=n.nodes[t];if(4&l.flags){const n=Bt(e,t).template._projectedViews;if(n)for(let t=0;t<n.length;t++){const l=n[t];l.state|=32,il(l,e)}}else 0==(4&l.childFlags)&&(t+=l.childCount)}}function Ts(e,n,t,l,i,r,s,u,o,a,c,h,d){return 0===t?function(e,n,t,l,i,r,s,u,o,a,c,h){const d=n.bindings.length;d>0&&tl(e,n,0,t),d>1&&tl(e,n,1,l),d>2&&tl(e,n,2,i),d>3&&tl(e,n,3,r),d>4&&tl(e,n,4,s),d>5&&tl(e,n,5,u),d>6&&tl(e,n,6,o),d>7&&tl(e,n,7,a),d>8&&tl(e,n,8,c),d>9&&tl(e,n,9,h)}(e,n,l,i,r,s,u,o,a,c,h,d):function(e,n,t){for(let l=0;l<t.length;l++)tl(e,n,l,t[l])}(e,n,l),!1}function Cs(e,n){if(zt(e,n.nodeIndex).dirty)throw Dt(Yt.createDebugContext(e,n.nodeIndex),`Query ${n.query.id} not dirty`,`Query ${n.query.id} dirty`,0!=(1&e.state))}function Is(e){if(!(128&e.state)){if(As(e,ys.Destroy),_s(e,ys.Destroy),Ci(e,131072),e.disposables)for(let n=0;n<e.disposables.length;n++)e.disposables[n]();!function(e){if(!(16&e.state))return;const n=sl(e);if(n){const t=n.template._projectedViews;t&&(Hl(t,t.indexOf(e)),Yt.dirtyParentQueries(e))}}(e),e.renderer.destroyNode&&function(e){const n=e.def.nodes.length;for(let t=0;t<n;t++){const n=e.def.nodes[t];1&n.flags?e.renderer.destroyNode(Bt(e,t).renderElement):2&n.flags?e.renderer.destroyNode(Gt(e,t).renderText):(67108864&n.flags||134217728&n.flags)&&zt(e,t).destroy()}}(e),al(e)&&e.renderer.destroy(),e.state|=128}}const ys=function(){var e={CreateViewNodes:0,CheckNoChanges:1,CheckNoChangesProjectedViews:2,CheckAndUpdate:3,CheckAndUpdateProjectedViews:4,Destroy:5};return e[e.CreateViewNodes]="CreateViewNodes",e[e.CheckNoChanges]="CheckNoChanges",e[e.CheckNoChangesProjectedViews]="CheckNoChangesProjectedViews",e[e.CheckAndUpdate]="CheckAndUpdate",e[e.CheckAndUpdateProjectedViews]="CheckAndUpdateProjectedViews",e[e.Destroy]="Destroy",e}();function _s(e,n){const t=e.def;if(33554432&t.nodeFlags)for(let l=0;l<t.nodes.length;l++){const i=t.nodes[l];33554432&i.flags?ws(Bt(e,l).componentView,n):0==(33554432&i.childFlags)&&(l+=i.childCount)}}function As(e,n){const t=e.def;if(16777216&t.nodeFlags)for(let l=0;l<t.nodes.length;l++){const i=t.nodes[l];if(16777216&i.flags){const t=Bt(e,l).viewContainer._embeddedViews;for(let e=0;e<t.length;e++)ws(t[e],n)}else 0==(16777216&i.childFlags)&&(l+=i.childCount)}}function ws(e,n){const t=e.state;switch(n){case ys.CheckNoChanges:0==(128&t)&&(12==(12&t)?vs(e):64&t&&Ns(e,ys.CheckNoChangesProjectedViews));break;case ys.CheckNoChangesProjectedViews:0==(128&t)&&(32&t?vs(e):64&t&&Ns(e,n));break;case ys.CheckAndUpdate:0==(128&t)&&(12==(12&t)?bs(e):64&t&&Ns(e,ys.CheckAndUpdateProjectedViews));break;case ys.CheckAndUpdateProjectedViews:0==(128&t)&&(32&t?bs(e):64&t&&Ns(e,n));break;case ys.Destroy:Is(e);break;case ys.CreateViewNodes:Es(e)}}function Ns(e,n){As(e,n),_s(e,n)}function Ps(e,n,t,l){if(!(e.def.nodeFlags&n&&e.def.nodeFlags&t))return;const i=e.def.nodes.length;for(let r=0;r<i;r++){const i=e.def.nodes[r];if(i.flags&n&&i.flags&t)switch(Yt.setCurrentNode(e,i.nodeIndex),l){case 0:es(e,i);break;case 1:Cs(e,i)}i.childFlags&n&&i.childFlags&t||(r+=i.childCount)}}let ks=!1;function xs(e,n,t,l,i,r){const s=i.injector.get(ot);return ps(Ds(e,i,s,n,t),l,r)}function Ms(e,n,t,l,i,r){const s=i.injector.get(ot),u=Ds(e,i,new gu(s),n,t),o=Ys(l);return hu(Qs.create,ps,null,[u,o,r])}function Ds(e,n,t,l,i){const r=n.injector.get(wn),s=n.injector.get(Dn),u=t.createRenderer(null,null);return{ngModule:n,injector:e,projectableNodes:l,selectorOrNode:i,sanitizer:r,rendererFactory:t,renderer:u,errorHandler:s}}function Ls(e,n,t,l){const i=Ys(t);return hu(Qs.create,gs,null,[e,n,i,l])}function Fs(e,n,t,l){return t=Bs.get(n.element.componentProvider.provider.token)||Ys(t),hu(Qs.create,ms,null,[e,n,t,l])}function Hs(e,n,t,l){return ei(e,n,t,function(e){const{hasOverrides:n,hasDeprecatedOverrides:t}=function(e){let n=!1,t=!1;return 0===Us.size?{hasOverrides:n,hasDeprecatedOverrides:t}:(e.providers.forEach(e=>{const l=Us.get(e.token);3840&e.flags&&l&&(n=!0,t=t||l.deprecatedBehavior)}),e.modules.forEach(e=>{Gs.forEach((l,i)=>{ge(i).providedIn===e&&(n=!0,t=t||l.deprecatedBehavior)})}),{hasOverrides:n,hasDeprecatedOverrides:t})}(e);return n?(function(e){for(let n=0;n<e.providers.length;n++){const l=e.providers[n];t&&(l.flags|=4096);const i=Us.get(l.token);i&&(l.flags=-3841&l.flags|i.flags,l.deps=gl(i.deps),l.value=i.value)}if(Gs.size>0){let n=new Set(e.modules);Gs.forEach((l,i)=>{if(n.has(ge(i).providedIn)){let n={token:i,flags:l.flags|(t?4096:0),deps:gl(l.deps),value:l.value,index:e.providers.length};e.providers.push(n),e.providersByKey[jt(i)]=n}})}}(e=e.factory(()=>$t)),e):e}(l))}const Us=new Map,Gs=new Map,Bs=new Map;function Ws(e){let n;Us.set(e.token,e),"function"==typeof e.token&&(n=ge(e.token))&&"function"==typeof n.providedIn&&Gs.set(e.token,e)}function Vs(e,n){const t=fl(n.viewDefFactory),l=fl(t.nodes[0].element.componentView);Bs.set(e,l)}function zs(){Us.clear(),Gs.clear(),Bs.clear()}function Ys(e){if(0===Us.size)return e;const n=function(e){const n=[];let t=null;for(let l=0;l<e.nodes.length;l++){const i=e.nodes[l];1&i.flags&&(t=i),t&&3840&i.flags&&Us.has(i.provider.token)&&(n.push(t.nodeIndex),t=null)}return n}(e);if(0===n.length)return e;e=e.factory(()=>$t);for(let l=0;l<n.length;l++)t(e,n[l]);return e;function t(e,n){for(let t=n+1;t<e.nodes.length;t++){const n=e.nodes[t];if(1&n.flags)return;if(3840&n.flags){const e=n.provider,t=Us.get(e.token);t&&(n.flags=-3841&n.flags|t.flags,e.deps=gl(t.deps),e.value=t.value)}}}}function $s(e,n,t,l,i,r,s,u,o,a,c,h,d){const g=e.def.nodes[n];return Os(e,g,t,l,i,r,s,u,o,a,c,h,d),224&g.flags?Vt(e,n).value:void 0}function Ks(e,n,t,l,i,r,s,u,o,a,c,h,d){const g=e.def.nodes[n];return Ts(e,g,t,l,i,r,s,u,o,a,c,h,d),224&g.flags?Vt(e,n).value:void 0}function js(e){return hu(Qs.detectChanges,bs,null,[e])}function qs(e){return hu(Qs.checkNoChanges,vs,null,[e])}function Xs(e){return hu(Qs.destroy,Is,null,[e])}const Qs=function(){var e={create:0,detectChanges:1,checkNoChanges:2,destroy:3,handleEvent:4};return e[e.create]="create",e[e.detectChanges]="detectChanges",e[e.checkNoChanges]="checkNoChanges",e[e.destroy]="destroy",e[e.handleEvent]="handleEvent",e}();let Zs,Js,eu;function nu(e,n){Js=e,eu=n}function tu(e,n,t,l){return nu(e,n),hu(Qs.handleEvent,e.def.handleEvent,null,[e,n,t,l])}function lu(e,n){if(128&e.state)throw Ft(Qs[Zs]);return nu(e,uu(e,0)),e.def.updateDirectives(function(e,t,l,...i){const r=e.def.nodes[t];return 0===n?ru(e,r,l,i):su(e,r,l,i),16384&r.flags&&nu(e,uu(e,t)),224&r.flags?Vt(e,r.nodeIndex).value:void 0},e)}function iu(e,n){if(128&e.state)throw Ft(Qs[Zs]);return nu(e,ou(e,0)),e.def.updateRenderer(function(e,t,l,...i){const r=e.def.nodes[t];return 0===n?ru(e,r,l,i):su(e,r,l,i),3&r.flags&&nu(e,ou(e,t)),224&r.flags?Vt(e,r.nodeIndex).value:void 0},e)}function ru(e,n,t,l){if(Os(e,n,t,...l)){const s=1===t?l[0]:l;if(16384&n.flags){const t={};for(let e=0;e<n.bindings.length;e++){const l=n.bindings[e],u=s[e];8&l.flags&&(t[(i=l.nonMinifiedName,r=void 0,r=i.replace(/[$@]/g,"_"),`ng-reflect-${i=r.replace(Ln,(...e)=>"-"+e[1].toLowerCase())}`)]=Fn(u))}const l=n.parent,u=Bt(e,l.nodeIndex).renderElement;if(l.element.name)for(let n in t){const l=t[n];null!=l?e.renderer.setAttribute(u,n,l):e.renderer.removeAttribute(u,n)}else e.renderer.setValue(u,`bindings=${JSON.stringify(t,null,2)}`)}}var i,r}function su(e,n,t,l){Ts(e,n,t,...l)}function uu(e,n){for(let t=n;t<e.def.nodes.length;t++){const n=e.def.nodes[t];if(16384&n.flags&&n.bindings&&n.bindings.length)return t}return null}function ou(e,n){for(let t=n;t<e.def.nodes.length;t++){const n=e.def.nodes[t];if(3&n.flags&&n.bindings&&n.bindings.length)return t}return null}class au{constructor(e,n){this.view=e,this.nodeIndex=n,null==n&&(this.nodeIndex=n=0),this.nodeDef=e.def.nodes[n];let t=this.nodeDef,l=e;for(;t&&0==(1&t.flags);)t=t.parent;if(!t)for(;!t&&l;)t=ul(l),l=l.parent;this.elDef=t,this.elView=l}get elOrCompView(){return Bt(this.elView,this.elDef.nodeIndex).componentView||this.view}get injector(){return ql(this.elView,this.elDef)}get component(){return this.elOrCompView.component}get context(){return this.elOrCompView.context}get providerTokens(){const e=[];if(this.elDef)for(let n=this.elDef.nodeIndex+1;n<=this.elDef.nodeIndex+this.elDef.childCount;n++){const t=this.elView.def.nodes[n];20224&t.flags&&e.push(t.provider.token),n+=t.childCount}return e}get references(){const e={};if(this.elDef){cu(this.elView,this.elDef,e);for(let n=this.elDef.nodeIndex+1;n<=this.elDef.nodeIndex+this.elDef.childCount;n++){const t=this.elView.def.nodes[n];20224&t.flags&&cu(this.elView,t,e),n+=t.childCount}}return e}get componentRenderElement(){const e=function(e){for(;e&&!al(e);)e=e.parent;return e.parent?Bt(e.parent,ul(e).nodeIndex):null}(this.elOrCompView);return e?e.renderElement:void 0}get renderNode(){return 2&this.nodeDef.flags?ol(this.view,this.nodeDef):ol(this.elView,this.elDef)}logError(e,...n){let t,l;2&this.nodeDef.flags?(t=this.view.def,l=this.nodeDef.nodeIndex):(t=this.elView.def,l=this.elDef.nodeIndex);const i=function(e,n){let t=-1;for(let l=0;l<=n;l++)3&e.nodes[l].flags&&t++;return t}(t,l);let r=-1;t.factory(()=>++r===i?e.error.bind(e,...n):$t),r<i&&(e.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),e.error(...n))}}function cu(e,n,t){for(let l in n.references)t[l]=ts(e,n,n.references[l])}function hu(e,n,t,l){const i=Zs,r=Js,s=eu;try{Zs=e;const o=n.apply(t,l);return Js=r,eu=s,Zs=i,o}catch(u){if(kn(u)||!Js)throw u;throw function(e,n){return e instanceof Error||(e=new Error(e.toString())),Lt(e,n),e}(u,du())}}function du(){return Js?new au(Js,eu):null}class gu{constructor(e){this.delegate=e}createRenderer(e,n){return new pu(this.delegate.createRenderer(e,n))}begin(){this.delegate.begin&&this.delegate.begin()}end(){this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)}}class pu{constructor(e){this.delegate=e,this.debugContextFactory=du,this.data=this.delegate.data}createDebugContext(e){return this.debugContextFactory(e)}destroyNode(e){!function(e){Fr.delete(e.nativeNode)}(Hr(e)),this.delegate.destroyNode&&this.delegate.destroyNode(e)}destroy(){this.delegate.destroy()}createElement(e,n){const t=this.delegate.createElement(e,n),l=this.createDebugContext(t);if(l){const n=new Lr(t,null,l);n.name=e,Ur(n)}return t}createComment(e){const n=this.delegate.createComment(e),t=this.createDebugContext(n);return t&&Ur(new Dr(n,null,t)),n}createText(e){const n=this.delegate.createText(e),t=this.createDebugContext(n);return t&&Ur(new Dr(n,null,t)),n}appendChild(e,n){const t=Hr(e),l=Hr(n);t&&l&&t instanceof Lr&&t.addChild(l),this.delegate.appendChild(e,n)}insertBefore(e,n,t){const l=Hr(e),i=Hr(n),r=Hr(t);l&&i&&l instanceof Lr&&l.insertBefore(r,i),this.delegate.insertBefore(e,n,t)}removeChild(e,n){const t=Hr(e),l=Hr(n);t&&l&&t instanceof Lr&&t.removeChild(l),this.delegate.removeChild(e,n)}selectRootElement(e,n){const t=this.delegate.selectRootElement(e,n),l=du();return l&&Ur(new Lr(t,null,l)),t}setAttribute(e,n,t,l){const i=Hr(e);i&&i instanceof Lr&&(i.attributes[l?l+":"+n:n]=t),this.delegate.setAttribute(e,n,t,l)}removeAttribute(e,n,t){const l=Hr(e);l&&l instanceof Lr&&(l.attributes[t?t+":"+n:n]=null),this.delegate.removeAttribute(e,n,t)}addClass(e,n){const t=Hr(e);t&&t instanceof Lr&&(t.classes[n]=!0),this.delegate.addClass(e,n)}removeClass(e,n){const t=Hr(e);t&&t instanceof Lr&&(t.classes[n]=!1),this.delegate.removeClass(e,n)}setStyle(e,n,t,l){const i=Hr(e);i&&i instanceof Lr&&(i.styles[n]=t),this.delegate.setStyle(e,n,t,l)}removeStyle(e,n,t){const l=Hr(e);l&&l instanceof Lr&&(l.styles[n]=null),this.delegate.removeStyle(e,n,t)}setProperty(e,n,t){const l=Hr(e);l&&l instanceof Lr&&(l.properties[n]=t),this.delegate.setProperty(e,n,t)}listen(e,n,t){if("string"!=typeof e){const l=Hr(e);l&&l.listeners.push(new Mr(n,t))}return this.delegate.listen(e,n,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setValue(e,n){return this.delegate.setValue(e,n)}}function mu(e,n,t){return new fu(e,n,t)}class fu extends lt{constructor(e,n,t){super(),this.moduleType=e,this._bootstrapComponents=n,this._ngModuleDefFactory=t}create(e){!function(){if(ks)return;ks=!0;const e=sn()?{setCurrentNode:nu,createRootView:Ms,createEmbeddedView:Ls,createComponentView:Fs,createNgModuleRef:Hs,overrideProvider:Ws,overrideComponentView:Vs,clearOverrides:zs,checkAndUpdateView:js,checkNoChangesView:qs,destroyView:Xs,createDebugContext:(e,n)=>new au(e,n),handleEvent:tu,updateDirectives:lu,updateRenderer:iu}:{setCurrentNode:()=>{},createRootView:xs,createEmbeddedView:gs,createComponentView:ms,createNgModuleRef:ei,overrideProvider:$t,overrideComponentView:$t,clearOverrides:$t,checkAndUpdateView:bs,checkNoChangesView:vs,destroyView:Is,createDebugContext:(e,n)=>new au(e,n),handleEvent:(e,n,t,l)=>e.def.handleEvent(e,n,t,l),updateDirectives:(e,n)=>e.def.updateDirectives(0===n?$s:Ks,e),updateRenderer:(e,n)=>e.def.updateRenderer(0===n?$s:Ks,e)};Yt.setCurrentNode=e.setCurrentNode,Yt.createRootView=e.createRootView,Yt.createEmbeddedView=e.createEmbeddedView,Yt.createComponentView=e.createComponentView,Yt.createNgModuleRef=e.createNgModuleRef,Yt.overrideProvider=e.overrideProvider,Yt.overrideComponentView=e.overrideComponentView,Yt.clearOverrides=e.clearOverrides,Yt.checkAndUpdateView=e.checkAndUpdateView,Yt.checkNoChangesView=e.checkNoChangesView,Yt.destroyView=e.destroyView,Yt.resolveDep=Oi,Yt.createDebugContext=e.createDebugContext,Yt.handleEvent=e.handleEvent,Yt.updateDirectives=e.updateDirectives,Yt.updateRenderer=e.updateRenderer,Yt.dirtyParentQueries=Jr}();const n=function(e){const n=Array.from(e.providers),t=Array.from(e.modules),l={};for(const i in e.providersByKey)l[i]=e.providersByKey[i];return{factory:e.factory,isRoot:e.isRoot,providers:n,modules:t,providersByKey:l}}(fl(this._ngModuleDefFactory));return Yt.createNgModuleRef(this.moduleType,e||We.NULL,this._bootstrapComponents,n)}}var Su=function(e){return e[e.NOTHING=0]="NOTHING",e[e.FOOD=1]="FOOD",e[e.LOG=2]="LOG",e[e.BRUSHWOOD=3]="BRUSHWOOD",e[e.STONE=4]="STONE",e[e.FUR=5]="FUR",e[e.WHEAT=6]="WHEAT",e[e.BARLEY=7]="BARLEY",e[e.HOP=8]="HOP",e[e.COTTON=9]="COTTON",e[e.HAY=10]="HAY",e[e.CHICKEN=11]="CHICKEN",e[e.COW=12]="COW",e[e.PIG=13]="PIG",e[e.HORSE=14]="HORSE",e[e.COAL=15]="COAL",e[e.GOLD_ORE=16]="GOLD_ORE",e[e.SILVER_ORE=17]="SILVER_ORE",e[e.COPPER_ORE=18]="COPPER_ORE",e[e.TIN_ORE=19]="TIN_ORE",e[e.IRON_ORE=20]="IRON_ORE",e[e.PLANK=21]="PLANK",e[e.CUT_STONE=22]="CUT_STONE",e[e.FUEL=23]="FUEL",e[e.FLOUR=24]="FLOUR",e[e.FABRIC=25]="FABRIC",e[e.LEATHER=26]="LEATHER",e[e.COINS=27]="COINS",e[e.COPPER=28]="COPPER",e[e.GOLD=29]="GOLD",e[e.SILVER=30]="SILVER",e[e.TIN=31]="TIN",e[e.BRONZE=32]="BRONZE",e[e.IRON=33]="IRON",e[e.STEEL=34]="STEEL",e[e.BERRY=35]="BERRY",e[e.MUSHROOM=36]="MUSHROOM",e[e.FISH=37]="FISH",e[e.APPLE=38]="APPLE",e[e.GRAPE=39]="GRAPE",e[e.BREAD=40]="BREAD",e[e.MEAT=41]="MEAT",e[e.EGG=42]="EGG",e[e.MILK=43]="MILK",e[e.COOKED_MEAT=44]="COOKED_MEAT",e[e.VEGETABLE_SOUP=45]="VEGETABLE_SOUP",e[e.MEAT_SOUP=46]="MEAT_SOUP",e[e.BEER=47]="BEER",e[e.WINE=48]="WINE",e[e.CLOTHES=49]="CLOTHES",e[e.BOW=50]="BOW",e[e.STONE_PICKAXE=51]="STONE_PICKAXE",e[e.STONE_SHOVEL=52]="STONE_SHOVEL",e[e.STONE_AXE=53]="STONE_AXE",e[e.STONE_SPEAR=54]="STONE_SPEAR",e[e.STONE_HAMMER=55]="STONE_HAMMER",e[e.SWORD=56]="SWORD",e[e.WOODEN_SHIELD=57]="WOODEN_SHIELD",e[e.LEATHER_ARMOR=58]="LEATHER_ARMOR",e[e.LIGHT_ARMOR=59]="LIGHT_ARMOR",e[e.HEAVY_ARMOR=60]="HEAVY_ARMOR",e[e.FISH_FOOD=61]="FISH_FOOD",e[e.CHEESE=62]="CHEESE",e[e.HERBS=63]="HERBS",e[e.HERBAL_MEDICINE=64]="HERBAL_MEDICINE",e[e.COOKED_FISH=65]="COOKED_FISH",e[e.SHEEP=66]="SHEEP",e[e.WOOL=67]="WOOL",e[e.PAPER=68]="PAPER",e[e.GLASS=69]="GLASS",e}({});!function(e){e.values=function(){return Object.keys(e).filter(e=>isNaN(e)&&"values"!==e)}}(Su||(Su={}));var Eu=function(e){return e[e.MOTIVATION_SPEECH=0]="MOTIVATION_SPEECH",e[e.ROYAL_PROPHECY=1]="ROYAL_PROPHECY",e[e.HERITAGE=2]="HERITAGE",e[e.FAMILY_JEWELS=3]="FAMILY_JEWELS",e[e.KING_OF_THE_FOREST=4]="KING_OF_THE_FOREST",e[e.KING_OF_THE_SEAS=5]="KING_OF_THE_SEAS",e[e.KING_OF_THE_PEOPLE=6]="KING_OF_THE_PEOPLE",e[e.KING_OF_THE_WAR=7]="KING_OF_THE_WAR",e[e.CALL_TO_ARMS=8]="CALL_TO_ARMS",e[e.UNITE_WITH_THE_PEOPLE=9]="UNITE_WITH_THE_PEOPLE",e[e.JESTER=10]="JESTER",e[e.ROYAL_ORDERS=11]="ROYAL_ORDERS",e}({}),vu=function(e){return e[e.MANAGEMENT=0]="MANAGEMENT",e[e.STONE_AXE=1]="STONE_AXE",e[e.STONE_PICKAXE=2]="STONE_PICKAXE",e[e.STONE_SHOVEL=3]="STONE_SHOVEL",e[e.STONE_HAMMER=4]="STONE_HAMMER",e[e.HUNTING=5]="HUNTING",e[e.FIRE=6]="FIRE",e[e.BIGGER_FIRE=7]="BIGGER_FIRE",e[e.COOKING=8]="COOKING",e[e.TRADE=9]="TRADE",e[e.ALCOHOL=10]="ALCOHOL",e[e.WONDER_BUILDINGS=11]="WONDER_BUILDINGS",e[e.TRADE_ROUTES=12]="TRADE_ROUTES",e[e.BUFF_PRODUCTION=13]="BUFF_PRODUCTION",e[e.STONE_SPEAR=14]="STONE_SPEAR",e[e.BOW=15]="BOW",e[e.BARRACKS=16]="BARRACKS",e[e.WOODEN_DEFENCES=17]="WOODEN_DEFENCES",e[e.STONE_DEFENCES=18]="STONE_DEFENCES",e[e.STASH=19]="STASH",e[e.SCIENTIFIC_METHOD=20]="SCIENTIFIC_METHOD",e[e.FORESIGHT=21]="FORESIGHT",e[e.CALENDAR=22]="CALENDAR",e[e.WEATHER=23]="WEATHER",e[e.HISTORY=24]="HISTORY",e[e.URBAN_PLANNING=25]="URBAN_PLANNING",e[e.MATHEMATICS=26]="MATHEMATICS",e[e.PROSPECTING_FOR_ORE=27]="PROSPECTING_FOR_ORE",e[e.ADVANCED_PROSPECTING=28]="ADVANCED_PROSPECTING",e[e.MASTER_PROSPECTING=29]="MASTER_PROSPECTING",e[e.SAWMILL=30]="SAWMILL",e[e.MINING=31]="MINING",e[e.PIT_MINE=32]="PIT_MINE",e[e.UNDERGROUND_MINE=33]="UNDERGROUND_MINE",e[e.WINDMILL=34]="WINDMILL",e[e.MORTAR=35]="MORTAR",e[e.HOUSE=36]="HOUSE",e[e.TANNERY=37]="TANNERY",e[e.FABRIC=38]="FABRIC",e[e.TAILORING=39]="TAILORING",e[e.ORE_PROCESSING=40]="ORE_PROCESSING",e[e.ADVANCED_ORE_PROCESSING=41]="ADVANCED_ORE_PROCESSING",e[e.MASTER_ORE_PROCESSING=42]="MASTER_ORE_PROCESSING",e[e.COINS_MINTING=43]="COINS_MINTING",e[e.METALLURGY=44]="METALLURGY",e[e.ADVANCED_METALLURGY=45]="ADVANCED_METALLURGY",e[e.PICKAXE_DESIGN=46]="PICKAXE_DESIGN",e[e.AGRICULTURE=47]="AGRICULTURE",e[e.FORESTRY=48]="FORESTRY",e[e.FISHING=49]="FISHING",e[e.ANIMALS=50]="ANIMALS",e[e.COTTON=51]="COTTON",e[e.FERTILIZER=52]="FERTILIZER",e[e.HUMAN_RESOURCES=53]="HUMAN_RESOURCES",e[e.FISH_FOOD=54]="FISH_FOOD",e[e.SPECIALISED_PRODUCTION=55]="SPECIALISED_PRODUCTION",e[e.LONGHOUSE=56]="LONGHOUSE",e[e.HERBAL_MEDICINE=57]="HERBAL_MEDICINE",e[e.HERBALISM=58]="HERBALISM",e[e.CARTOGRAPHY=59]="CARTOGRAPHY",e[e.PARCHMENT=60]="PARCHMENT",e[e.PAPER_MILL=61]="PAPER_MILL",e[e.DEEP_MINE=62]="DEEP_MINE",e[e.ADVANCED_MATHEMATICS=63]="ADVANCED_MATHEMATICS",e[e.IMPROVED_FORESIGHT=64]="IMPROVED_FORESIGHT",e[e.LOGISTICS=65]="LOGISTICS",e[e.PRODUCTION_ZONES=66]="PRODUCTION_ZONES",e}({}),bu=function(e){return e[e.WEATHER=0]="WEATHER",e[e.MARKET=1]="MARKET",e[e.MANAGEMENT=2]="MANAGEMENT",e[e.CRAFTING=3]="CRAFTING",e[e.RESEARCH=4]="RESEARCH",e[e.ARMY=5]="ARMY",e[e.RELIGION=6]="RELIGION",e[e.FORT=7]="FORT",e[e.SEA=8]="SEA",e[e.FIELD=9]="FIELD",e[e.MOUNTAINS=10]="MOUNTAINS",e[e.PLATEAU=11]="PLATEAU",e[e.HOUSE=12]="HOUSE",e[e.SHRINE=13]="SHRINE",e[e.CHURCH=14]="CHURCH",e[e.TAILOR=15]="TAILOR",e[e.TAVERN=16]="TAVERN",e[e.BAKERY=17]="BAKERY",e[e.MARKETPLACE=18]="MARKETPLACE",e[e.BARRACKS=19]="BARRACKS",e[e.STOCKADE=20]="STOCKADE",e[e.WOODEN_TOWER=21]="WOODEN_TOWER",e[e.STONE_TOWER=22]="STONE_TOWER",e[e.STASH=23]="STASH",e[e.FORESTER=24]="FORESTER",e[e.SAWMILL=25]="SAWMILL",e[e.HUNTER=26]="HUNTER",e[e.TANNERY=27]="TANNERY",e[e.WINDMILL=28]="WINDMILL",e[e.FARM=29]="FARM",e[e.PASTURE=30]="PASTURE",e[e.BUTCHER=31]="BUTCHER",e[e.BREWERY=32]="BREWERY",e[e.WINERY=33]="WINERY",e[e.COTTON_MILL=34]="COTTON_MILL",e[e.PIT_MINE=35]="PIT_MINE",e[e.GEOLOGIST=36]="GEOLOGIST",e[e.SMITHY=37]="SMITHY",e[e.MINT=38]="MINT",e[e.FISHERS_HUT=39]="FISHERS_HUT",e[e.CALENDAR=40]="CALENDAR",e[e.FIRE=41]="FIRE",e[e.URBAN_PLANNING=42]="URBAN_PLANNING",e[e.ALCOHOL=43]="ALCOHOL",e[e.GOLD=44]="GOLD",e[e.SILVER=45]="SILVER",e[e.BRONZE=46]="BRONZE",e[e.IRON=47]="IRON",e[e.STEEL=48]="STEEL",e[e.ADVANCED_ORE_PROCESSING=49]="ADVANCED_ORE_PROCESSING",e[e.BUFFS=50]="BUFFS",e[e.COTTON=51]="COTTON",e[e.BARLEY=52]="BARLEY",e[e.HOPS=53]="HOPS",e[e.BUILT_QUARRY=54]="BUILT_QUARRY",e[e.BUILT_SMITHY=55]="BUILT_SMITHY",e[e.HUMAN_RESOURCES=56]="HUMAN_RESOURCES",e[e.FISH_FOOD=57]="FISH_FOOD",e[e.SPECIALISED_PRODUCTION=58]="SPECIALISED_PRODUCTION",e[e.MANUFACTURE=59]="MANUFACTURE",e[e.STONEMASON=60]="STONEMASON",e[e.LONGHOUSE=61]="LONGHOUSE",e[e.HERITAGE=62]="HERITAGE",e[e.HERBALISM=63]="HERBALISM",e[e.EMBASSY=64]="EMBASSY",e[e.CARTOGRAPHY=65]="CARTOGRAPHY",e[e.PAPER_MILL=66]="PAPER_MILL",e[e.DEEP_MINE=67]="DEEP_MINE",e[e.LOGISTICS=68]="LOGISTICS",e[e.PRODUCTION_ZONES=69]="PRODUCTION_ZONES",e}({}),Ou=function(e){return e[e.ALL=0]="ALL",e[e.CONSTRUCTION=1]="CONSTRUCTION",e[e.DECONSTRUCTION=2]="DECONSTRUCTION",e[e.HUT=3]="HUT",e[e.HOUSE=4]="HOUSE",e[e.MARKETPLACE=5]="MARKETPLACE",e[e.WAREHOUSE=6]="WAREHOUSE",e[e.SMITHY=7]="SMITHY",e[e.BAKERY=8]="BAKERY",e[e.WORKSHOP=9]="WORKSHOP",e[e.SHRINE=10]="SHRINE",e[e.TAILOR=11]="TAILOR",e[e.BREWERY=12]="BREWERY",e[e.TAVERN=13]="TAVERN",e[e.CHURCH=14]="CHURCH",e[e.STOCKADE=15]="STOCKADE",e[e.BARRACKS=16]="BARRACKS",e[e.TRAINING_SQUARE=17]="TRAINING_SQUARE",e[e.WOODEN_TOWER=18]="WOODEN_TOWER",e[e.STONE_TOWER=19]="STONE_TOWER",e[e.STASH=20]="STASH",e[e.LOGGERS_HUT=21]="LOGGERS_HUT",e[e.SAWMILL=22]="SAWMILL",e[e.FORESTER=23]="FORESTER",e[e.HUNTER_LODGE=24]="HUNTER_LODGE",e[e.GATHERER=25]="GATHERER",e[e.TANNERY=26]="TANNERY",e[e.FARM=27]="FARM",e[e.FIELD=28]="FIELD",e[e.ORCHARD=29]="ORCHARD",e[e.PASTURE=30]="PASTURE",e[e.WINDMILL=31]="WINDMILL",e[e.BUTCHER=32]="BUTCHER",e[e.COTTON_MILL=33]="COTTON_MILL",e[e.WINERY=34]="WINERY",e[e.PIT_MINE=35]="PIT_MINE",e[e.QUARRY=36]="QUARRY",e[e.GEOLOGIST=37]="GEOLOGIST",e[e.STONEMASON=38]="STONEMASON",e[e.MINT=39]="MINT",e[e.FISHERS_HUT=40]="FISHERS_HUT",e[e.SCHOOL_OF_FISH=41]="SCHOOL_OF_FISH",e[e.SHARKS=42]="SHARKS",e[e.STONEHENGE=43]="STONEHENGE",e[e.PYRAMID=44]="PYRAMID",e[e.HANGING_GARDEN=45]="HANGING_GARDEN",e[e.COLOSSUS=46]="COLOSSUS",e[e.UNDERGROUND_CITY=47]="UNDERGROUND_CITY",e[e.GREAT_LIGHTHOUSE=48]="GREAT_LIGHTHOUSE",e[e.SACRED_GROVE=49]="SACRED_GROVE",e[e.ASCENSION_TEMPLE=50]="ASCENSION_TEMPLE",e[e.MANUFACTURE=51]="MANUFACTURE",e[e.LONGHOUSE=52]="LONGHOUSE",e[e.EMBASSY=53]="EMBASSY",e[e.PAPER_MILL=54]="PAPER_MILL",e[e.DEEP_MINE=55]="DEEP_MINE",e[e.GATHERERS_CAMP=56]="GATHERERS_CAMP",e}({}),Ru=function(e){return e[e.BLESSING=0]="BLESSING",e[e.PREACH=1]="PREACH",e[e.FAITH_SHIELD=2]="FAITH_SHIELD",e[e.SOLDIER_PRAYER=3]="SOLDIER_PRAYER",e[e.FAITHFUL_RESEARCH=4]="FAITHFUL_RESEARCH",e[e.BABY_BOOM=5]="BABY_BOOM",e[e.LIFE_CYCLE=6]="LIFE_CYCLE",e[e.HOLY_WAR=7]="HOLY_WAR",e}({}),Tu=function(e){return e[e.SPY=0]="SPY",e[e.DIVERSION=1]="DIVERSION",e[e.PLUNDER=2]="PLUNDER",e[e.EXPEDITION=3]="EXPEDITION",e[e.CONQUER=4]="CONQUER",e[e.COLONIZE=5]="COLONIZE",e[e.MOVE=6]="MOVE",e[e.BUILD=7]="BUILD",e}({}),Cu=function(e){return e[e.NONE=0]="NONE",e[e.WHEAT=1]="WHEAT",e[e.BARLEY=2]="BARLEY",e[e.HAY=3]="HAY",e[e.HOP=4]="HOP",e[e.COTTON=5]="COTTON",e[e.BERRY=6]="BERRY",e[e.GRAPE=7]="GRAPE",e[e.APPLE=8]="APPLE",e[e.HERBS=9]="HERBS",e[e.MUSHROOM=10]="MUSHROOM",e}({}),Iu=function(e){return e[e.ALL=0]="ALL",e[e.NONE=1]="NONE",e[e.RAW=2]="RAW",e[e.PROCESSED=3]="PROCESSED",e[e.FOOD=4]="FOOD",e[e.TOOLS=5]="TOOLS",e[e.OTHER=6]="OTHER",e[e.WOODEN=7]="WOODEN",e[e.METAL=8]="METAL",e[e.STONE=9]="STONE",e[e.ANIMAL=10]="ANIMAL",e[e.FUEL=11]="FUEL",e[e.CONSUMABLE=12]="CONSUMABLE",e}({}),yu=function(e){return e[e.NONE=0]="NONE",e[e.FERTILITY=1]="FERTILITY",e[e.NATURE=2]="NATURE",e[e.TECHNOLOGY=3]="TECHNOLOGY",e[e.WAR=4]="WAR",e}({}),_u=function(e){return e[e.ALL=0]="ALL",e[e.MILITIA=1]="MILITIA",e[e.SPEARMAN=2]="SPEARMAN",e[e.ARCHER=3]="ARCHER",e[e.SWORDSMAN=4]="SWORDSMAN",e[e.LIGHT_CAVALRY=5]="LIGHT_CAVALRY",e[e.SPY=6]="SPY",e[e.COLONIST=7]="COLONIST",e}({}),Au=function(e){return e[e.NONE=0]="NONE",e[e.OFFENSE=1]="OFFENSE",e[e.DEFENSE=2]="DEFENSE",e[e.ECONOMY=3]="ECONOMY",e[e.PEACE=4]="PEACE",e}({}),wu=function(e){return e[e.SPECIAL=0]="SPECIAL",e[e.PLAYER=1]="PLAYER",e[e.NEUTRAL=2]="NEUTRAL",e[e.EXPEDITION=3]="EXPEDITION",e[e.CLEADAL=4]="CLEADAL",e[e.GRIERIA=5]="GRIERIA",e[e.BOTHIL=6]="BOTHIL",e[e.DOSHOR=7]="DOSHOR",e[e.CREURUS=8]="CREURUS",e[e.ESTRAILA=9]="ESTRAILA",e[e.NONE=10]="NONE",e}({}),Nu=function(e){return e[e.FLU=0]="FLU",e[e.COLD=1]="COLD",e[e.PNEUMONIA=2]="PNEUMONIA",e}({});class Pu{static round(e,n){return e.toFixed(n)}static titleCase(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}static prepareResourceName(e){return this.titleCase(Su[e].replace(/_/g," "))}static prepareResourceTypeName(e){return this.titleCase(Iu[e].replace(/_/g," "))}static preparePerkName(e){return this.titleCase(Eu[e].replace(/_/g," "))}static prepareTechName(e){return this.titleCase(vu[e].replace(/_/g," "))}static prepareFlagName(e){return this.titleCase(bu[e].replace(/_/g," "))}static prepareBuildingName(e){return this.titleCase(Ou[e].replace(/_/g," "))}static preparePrayerName(e){return this.titleCase(Ru[e].replace(/_/g," "))}static prepareReligionName(e){return this.titleCase(yu[e].replace(/_/g," "))}static prepareTroopName(e){return this.titleCase(_u[e].replace(/_/g," "))}static prepareMissionName(e){return this.titleCase(Tu[e].replace(/_/g," "))}static prepareCropName(e){return this.titleCase(Cu[e].replace(/_/g," "))}static prepareFocusName(e){return this.titleCase(Au[e].replace(/_/g," "))}static prepareCountryName(e){return this.titleCase(wu[e].replace(/_/g," "))}static prepareSicknessName(e){return this.titleCase(Nu[e].replace(/_/g," "))}static resourcesArraysDiff(e,n){return e.filter(e=>n.findIndex(n=>n.resource===e.resource)<0)}static prepareResourcesNamesList(e){let n="";return e.forEach(e=>n+=Pu.prepareResourceName(e.resource)+", "),(n=n.substr(0,n.length-2)).toLowerCase()}static copyResourceArray(e){const n=[];return e.forEach(e=>n.push({resource:e.resource,amount:e.amount})),n}}var ku=function(e){return e[e.GENERAL=0]="GENERAL",e[e.MILITARY=1]="MILITARY",e[e.SCIENCE=2]="SCIENCE",e[e.TECHNOLOGY=3]="TECHNOLOGY",e[e.AGRICULTURE=4]="AGRICULTURE",e}({}),xu=function(e){return e[e.GAME=0]="GAME",e[e.LOG=1]="LOG",e[e.MODAL=2]="MODAL",e[e.RESOURCES=3]="RESOURCES",e[e.LAND=4]="LAND",e[e.RESEARCH=5]="RESEARCH",e[e.CRAFTING=6]="CRAFTING",e[e.RECIPE=7]="RECIPE",e[e.RELIGION=8]="RELIGION",e[e.WEATHER=9]="WEATHER",e[e.CALENDAR=10]="CALENDAR",e[e.EFFECTS=11]="EFFECTS",e[e.ARMY=12]="ARMY",e[e.HAPPINESS=13]="HAPPINESS",e[e.MANAGEMENT=14]="MANAGEMENT",e[e.ROYAL=15]="ROYAL",e[e.MARKET=16]="MARKET",e[e.VILLAGE=17]="VILLAGE",e[e.FORT=18]="FORT",e[e.FOREST=19]="FOREST",e[e.FIELD=20]="FIELD",e[e.MOUNTAINS=21]="MOUNTAINS",e[e.SEA=22]="SEA",e[e.PLATEAU=23]="PLATEAU",e[e.BUILDING_FACTORY=24]="BUILDING_FACTORY",e[e.SERIALIZER=25]="SERIALIZER",e[e.KONGREGATE=26]="KONGREGATE",e[e.ID=27]="ID",e[e.TICKER=28]="TICKER",e[e.HERITAGE=29]="HERITAGE",e[e.WORLD=30]="WORLD",e[e.MISSION_FACTORY=31]="MISSION_FACTORY",e}({}),Mu=function(e){return e[e.PLANK=0]="PLANK",e[e.CUT_STONE=1]="CUT_STONE",e[e.FABRIC=2]="FABRIC",e[e.LEATHER=3]="LEATHER",e[e.GOLD=4]="GOLD",e[e.SILVER=5]="SILVER",e[e.COPPER=6]="COPPER",e[e.TIN=7]="TIN",e[e.BRONZE=8]="BRONZE",e[e.IRON=9]="IRON",e[e.STEEL=10]="STEEL",e[e.FUEL_BRUSHWOOD=11]="FUEL_BRUSHWOOD",e[e.FUEL_LOG=12]="FUEL_LOG",e[e.FUEL_COAL=13]="FUEL_COAL",e[e.STONE_AXE=14]="STONE_AXE",e[e.STONE_PICKAXE=15]="STONE_PICKAXE",e[e.STONE_SHOVEL=16]="STONE_SHOVEL",e[e.STONE_SPEAR=17]="STONE_SPEAR",e[e.STONE_HAMMER=18]="STONE_HAMMER",e[e.BOW=19]="BOW",e[e.CLOTHES_FUR=20]="CLOTHES_FUR",e[e.CLOTHES_FABRIC=21]="CLOTHES_FABRIC",e[e.SWORD=22]="SWORD",e[e.WOODEN_SHIELD=23]="WOODEN_SHIELD",e[e.LEATHER_ARMOR=24]="LEATHER_ARMOR",e[e.LIGHT_ARMOR=25]="LIGHT_ARMOR",e[e.HEAVY_ARMOR=26]="HEAVY_ARMOR",e[e.COOKED_MEAT=27]="COOKED_MEAT",e[e.FLOUR=28]="FLOUR",e[e.BREAD=29]="BREAD",e[e.VEGETABLE_SOUP_BERRY=30]="VEGETABLE_SOUP_BERRY",e[e.VEGETABLE_SOUP_MUSHROOM=31]="VEGETABLE_SOUP_MUSHROOM",e[e.MEAT_SOUP=32]="MEAT_SOUP",e[e.CHEESE=33]="CHEESE",e[e.HERBAL_MEDICINE=34]="HERBAL_MEDICINE",e[e.COOKED_FISH=35]="COOKED_FISH",e[e.FABRIC_WOOL=36]="FABRIC_WOOL",e[e.PARCHMENT=37]="PARCHMENT",e}({});class Du{constructor(e,n,t,l,i=0){this.name=e,this.building=n,this.effect=t,this.duration=l,this.buff=i}isPermanent(){return this.duration<0}isRoyal(){return-10===this.duration}isWonder(){return-9===this.duration}isBuff(){return this.buff>0}}var Lu=function(e){return e.ALL="all",e.BUILD="build-modal",e.IMPORT="import-modal",e.EXPORT="export-modal",e.HARD_RESET="hard-reset-modal",e.INFO="info-modal",e.OPTIONS="options-modal",e.CONFIRM="confirm-modal",e.INPUT="input-modal",e.ROYAL="royal-modal",e.MISSION="mission-modal",e.MARKET="market-modal",e.WORK_MANAGEMENT="work-management-modal",e.TUTORIAL="tutorial-modal",e.CHANGELOG="changelog-modal",e.RESOURCE_MANAGEMENT="resource-management-modal",e.RECIPE="recipe-modal",e.WORLD="world-modal",e.WORLD_BUILD="world-build-modal",e.FIGHT_REPORT="fight-report-modal",e.ABDICATION="abdication-modal",e.RESEARCH_UNLOCK="research-unlock-modal",e}({});const Fu=(()=>{class e{static randomElement(e,n=!1,t=10){let l=0;if(e.forEach(e=>l+=e.chance),l>100||l<100&&n){const n=100/l;e.forEach(e=>e.chance=Math.floor(e.chance*n))}const i=this.randomBetween(1,100*t);let r=0;for(const s of e){if(r+1<=i&&r+s.chance*t>=i)return s.item;r+=s.chance*t}for(;l>100;){console.log("x");for(const n of e){if(r+1<=i&&r+n.chance*t>=i)return n.item;r+=n.chance*t}}return null}static chance(e){return Math.random()<e}static randomExcept(e,n){const t=e.filter(function(e){return n.indexOf(e)<0});return t[this.randomBetween(0,t.length-1)]}static randomArrayElement(e){return e[this.randomBetween(0,e.length-1)]}static randomBetween(e,n){return Math.floor(Math.random()*(n-e+1))+e}static randomWeightedExcept(e,n){const t=e.filter(function(e){return n.indexOf(e.item)<0});let l=0;t.forEach(e=>l+=e.chance);const i=this.randomBetween(1,l);let r=0;for(let s=0;s<t.length;s++){if(r<i&&i<=r+t[s].chance)return t[s].item;r+=t[s].chance}}}return e.ngInjectableDef=de({factory:function(){return new e},token:e,providedIn:"root"}),e})();var Hu=function(e){return e[e.VILLAGE=0]="VILLAGE",e[e.FORT=1]="FORT",e[e.FOREST=2]="FOREST",e[e.FIELD=3]="FIELD",e[e.MOUNTAINS=4]="MOUNTAINS",e[e.SEA=5]="SEA",e[e.PLATEAU=6]="PLATEAU",e}({});class Uu{constructor(e,n,t,l){this.name=e,this.troop=n,this.effect=t,this.duration=l}isPermanent(){return this.duration<0}isRoyal(){return-10===this.duration}isWonder(){return-9===this.duration}}var Gu=function(e){return e[e.SUN=0]="SUN",e[e.CLOUDS=1]="CLOUDS",e[e.RAIN=2]="RAIN",e[e.WIND=3]="WIND",e[e.STORM=4]="STORM",e[e.SNOW=5]="SNOW",e}({}),Bu=function(e){return e[e.DEV=0]="DEV",e[e.V1_0_0=1]="V1_0_0",e}({});class Wu{constructor(e,n,t){this.name=e,this.effect=n,this.duration=t}isPermanent(){return this.duration<0}isRoyal(){return-10===this.duration}isWonder(){return-9===this.duration}}const Vu=(()=>{class e{}return e.PERMANENT=-1,e.WONDER=-9,e.ROYAL=-10,e})(),zu={production:!0,gameName:"Villager Kings",saveName:"VillagerKingsSave",versionString:"1.1.9",saveVersion:Bu.V1_0_0},Yu="Welcome to <b>"+zu.gameName+"</b><br>You start as a leader of a small village.<br>Will you manage to lead your people to greatness? <br>First thing you need to focus on is to make sure that your people will survive winter.<br>You will need to increase food production and have some wood to heat houses.<br>Remember that winter is not the only threat to your people!<br>Good luck!",$u=[{VERSION:"v1.0.1",MESSAGE:['<ul><li>Fixed barracks not unlocking after being researched</li><li>Fixed weather research description</li><li>Shrine and Church will be available earlier</li><li>"New year!" message will appear on day 1 and only after researching calendar</li><li>Shrine and Church will now log when they become available</li><li>Fixed wrapper boxes sizes</li><li>Pit mine research description changed</li><li>Reduced building button and dropdown font size to prevent overflow</li><li>Aligned building icon and text</li><li>Reduced amount of fur produced by hunter</li><li>Fixed merchant buying items for 0 coins</li><li>Reduced required research points for forestry</li><li>Last tutorial step no longer has "skip tutorial" button</li><li>Available nutrition metric doesn\'t include reserved food</li><li>Researching animals require hay</li><li>Fixed geologist last find description</li></ul>']},{VERSION:"v1.0.2",MESSAGE:["<ul><li>Fixed building line icons alignment</li><li>Refactored dev message window into changelog</li><li>Reduced low happiness severity</li><li>Doubled starting food amount</li><li>Buffed berry and mushroom find chance</li></ul>"]},{VERSION:"v1.0.3",MESSAGE:["<ul><li><b>Famine is now satisfied with 50% less food</b></li><li><b>Refactored happiness so that multiple things combined cannot bring it down to 0</b></li><li>It is now possible to pause the game through settings dropdown menu</li><li>The game is now paused during tutorials</li><li>Reduced brushwood cost of stone tools and bow.</li><li>Buildings are now taking action in random order instead of left to right top to bottom</li><li>Tavern decrease happiness over 75% when no alcohol is available</li><li>Changed Tavern building lines to show amount of alcohols</li><li>Added option to produce fish food for fishers</li><li>Added option to boost school of fish with fish food</li><li>Fixed new school of fish not spawning</li><li>Fixed new sharks not spawning</li><li>Added new Research for Fish Food</li><li>Added tutorials for Field, Mountains, Sea and Plateau regions</li><li>Added close button for royal points modal</li><li>Greatly increased animal taming chance <br>(Taming is supposed to be slow, as this only to be used to kick-start pastures. Another method is to buy animals on the market)</li><li>Fixed animal amount calculation errors resulting in negative, doubled<br> or over the limit amount of animals</li><li>Added notification to market tab if there is no marketplace</li><li>Changed marketplace bribe button text</li></ul>"]},{VERSION:"v1.0.4",MESSAGE:["<ul><li><b>Fixed demolishing huts and houses</b></li><li>Fixed Crafting tab display for Chrome and Edge</li><li>Increased gatherer chance for finding stone and brushwood</li><li>Added several warning for low forest size</li><li>Increased minimal yearly forest growth</li></ul>"]},{VERSION:"v1.0.5",MESSAGE:['<ul><li><b>Fixed wrong army mission being started</b></li><li><b>Fixed Food nutrition value displaying NaN and blocking anything that requires FOOD nutrition as cost</b></li><li>Fixed "Spy" mission not displaying enemy power</li><li>Church will now unlock Religion tab when built</li><li>Urban Planning no longer require house to be researched</li></ul>']},{VERSION:"v1.0.6",MESSAGE:["Bug fixes:<ul><li><b>Fixed King of the People royal perk not allowing to build houses</b></li><li><b>Fixed royal perks not processing unlocked research correctly</b></li><li><b>Fixed research permanent effects not to persist through soft reset and abdication</b></li><li><b>Fixed geologist not finding gold, silver and iron</b></li><li><b>Fixed Tavern not appearing after being researched</b></li><li><b>Fixed fields, orchards and pastures splitting value</b></li><li><b>Fixed 'Blessing' prayer and excluded a lot of buildings that would not benefit from it</b></li><li><b>Fixed changing religion to be player action</b></li></ul>Performance:<ul><li>Improved performance for reloading region<br>It will still take regular time on the first visit but after that I got about 3 times better loading time for region with 36 buildings</li></ul>Other:<ul><li>Improved butcher meat transporting. It no longer requires whole warehouse space to be available at once</li><li>Increased geologist deposits find chances</li><li>Renamed 'Entertainment' research to 'Alcohol'</li><li>Housing buildings show when they are using fuel</li><li>Added research tab warning when no workshop is set to research</li><li>Added button to show finished research projects</li><li>Increased average meat production for hunter lodge</li><li>Improved scrolling in modals</li><li>Urban planning research points requirement greatly reduced</li><li>Improved some prayers descriptions</li><li>Nature effects are now logged when added</li><li>Decreased recruitment times for all troops</li><li>Fishers huts will now work during rain (apparently fish can catch even better during rain due to more oxygen in the water)</li></ul>"]},{VERSION:"v1.0.7",MESSAGE:["Bug fixes:<ul><li><b>Fixed forecast period saving. It will no longer go back to one day after researching weather and reloading game</b></li><li><b>Fixed pastures filling only one butcher. Pasture will now give animal to butcher with shortest queue</b></li><li><b>Fixed demolishing buildings other than housing buildings</b></li><li><b>Fixed work management output to start with maxed output resources</b></li><li><b>Fixed mission not returning troops</b></li><li><b>Fixed possibility to build next wonder without researching</b></li><li><b>Lost wonder effects will be restored on abdication or soft reset</b></li><li><b>Fixed harvesting from field in summer</b></li><li><b>Fixed buying animal filling entire pasture</b></li><li><b>Fixed animals produce filling warehouse when chores went over 50</b></li></ul>Other:<ul><li><b>Changed expedition to take longer and cost more but give more land and kill less troops</b></li><li><b>Improved building filtering and made it persistent</b></li><li><b>Increased game size by about 25%</b></li><li><b>Arrange doesn't require to be researched anymore</b></li><li><b>New option to change visual progress bars to text progress value</b></li><li>Workshops show what is being researched</li><li>Geologist is no longer limited by mountains size</li><li>Slightly improved Royal perks descriptions</li><li>Added special warning for demolishing housing building when there is no enough free space to move all occupants to</li><li>Increased amount of fuel crafted from coal and heating power of coal</li><li>Pit mine now warn that it requires 20 deposits</li><li>Slightly corrected research display</li><li>Changes for Royal Points granting events</li><li>Disabled Ascension temple until it will be fixed</li></ul>Information:<ul><li>Drag and drop arrange seems to work on some computers and not on others. I have tested on a PC and laptop with the same operating system and browser version and it does work on PC and not on laptop.</li></ul>"]},{VERSION:"v1.0.8",MESSAGE:['Bug fixes:<ul><li><b>Fixed workshop display that caused buildings to display in two columns</b></li><li><b>Changes regarding workshop logic that might fix locking issue</b></li><li><b>Fixed "R Quarry" and "R Smithy" prerequisites display</b></li><li><b>Fixed incorrect animals moving when splitting or demolishing pasture</b></li><li><b>Gatherers won\'t lock on warehouse. Locking resource will be removed</b></li><li><b>Fixed field and orchard harvest scale display</b></li><li><b>Fixed bread recipe wheat cost to 2 instead of 1</b></li><li><b>Work management will fire worker after finishing work cycle if rules are not satisfied</b></li><li><b>Fixed and enabled Ascension Temple (requires conditions to be met to become available)</b></li><li><b>Fixed Missions again</b></li><li><b>Fixed some metals recipes not adding after research and smithy built</b></li><li><b>Fixed smithy demolishing</b></li></ul>Other:<ul><li><b>Added tooltips to resources in resource tab.<br>Consumable resources display nutrition<br>Fuel resources display heating power</b></li><li><b>Resources tooltip will now show what building/action used each resource in previous 30 days.</b></li><li>Increased hay consumption of animals by 30%</li><li>Increased apples nutrition value</li><li>Increased apples harvest multiplier</li><li>Increased great lighthouse royal points temporary (to make up for no effects)</li></ul>']},{VERSION:"v1.0.9",MESSAGE:["New features<ul><li><b>Implemented new extended reserver that can define different limit for most of the consumers</b></li></ul>Bug fixes:<ul><li><b>Fixed building Smithy required to research tech allowing to build it</b></li><li><b>Fixed limited buildings allowed to build over the limit</b></li><li><b>Fixed missions finishing without calculating outcome</b></li><li><b>Most probably fixed overscrolling from game to kongregate window</b></li></ul>Other:<ul><li>Doubled iron deposit find chance</li><li>Ore deposits found limited at 50 each</li><li>Troops multiplier now shows multiplied required resources in tooltip. If you cannot afford - troop turns grey</li><li>Slightly increased happiness reduction from half food rations</li><li>Buildings number limit is now added to build window</li><li>Decreased brushwood fuel cost and increased brushwood energy</li></ul>"]},{VERSION:"v1.0.10",MESSAGE:["New features<ul><li><b>Added more production details to buildings in build window</b></li><li><b>Added Manufacture building for specialised crafting</b></li><li><b>Added Specialised production research to unlock manufacture</b></li></ul>Bug fixes:<ul><li><b>Fixed and improved building power modifier display to include permanent effects and correctly use weather multiplier</b></li><li><b>Fixed pastures limits updating to resources tab</b></li><li><b>Fixed wooden tower starting with decreased health</b></li><li><b>Fixed metallurgy to add bronze recipe</b></li><li><b>Fixed orchard harvest calculation when in autumn</b></li><li><b>Fixed bug with New King buff lasting 0 days after reset or abdication</b></li></ul>Other:<ul><li>Changed work management option description (management tab) and added description message after researching Human Resources</li><li>Extended some buildings descriptions</li><li>Increased fur production from hunters</li></ul>"]},{VERSION:"v1.0.11",MESSAGE:["New features<ul><li><b>Forest management improved and moved into management tab</b></li></ul>Bug fixes:<ul><li><b>Fixed some wonders add effects after each reset</b></li><li><b>Fixed Forester not returning land when demolished</b></li></ul>Other:<ul><li>Added option to show only current view tutorial</li><li>Added buttons to hire/fire workers in all currently viewed buildings</li><li>Removed autofill '1' for crafting amount input</li><li>Increased expeditions cost</li><li>Decreased chicken and pigs breeding speed </li><li>Forestry research now requires management to be researched</li><li>Added Stonehenge effect for manufacture</li><li>Changed wonders to reapply missing effects on soft reset or abdication</li><li>Changed some missions times</li><li>Added troops list to mission in progress</li></ul>"]},{VERSION:"v1.0.12",MESSAGE:["New features<ul><li><b>Added new housing building</b></li><li><b>Added crafting cheese from milk (might require new run)</b></li><li><b>Added new army troop</b></li></ul>Bug fixes:<ul><li><b>Fixed huts and houses ignoring fuel items reserved amounts</b></li><li><b>Smithy can no longer be blessed</b></li><li><b>Fixed manufacture producing even when there are no required resources</b></li><li><b>Fixed pastures not producing when there is more than 1000 animals</b></li><li><b>Fixed some imperfections on the background image</b></li><li><b>Fixed orchard resources not available in resources and market before discovered via harvest</b></li></ul>Other:<ul><li><b>Warehouses can be combined and split</b></li><li>Warehouse building size increased (resource storage stays the same)</li><li>Nutrition display has been moved to header (might cause highlighted items to overflow)</li><li>Increased hay required by animals during winter</li><li>Animals now require food for the whole year ( less food required during spring, summer and autumn than in winter )</li><li>Added tooltip to market offers to show more information regarding the offer</li><li>Removed horse cost from expeditions</li><li>Manufacture moved closer in the research tree and has cost decreased</li><li>Mint now requires gold and silver to make coins</li><li>Added nutrition usage to header nutrition tooltip</li><li>Forest low size warnings will now display only when forestry is not researched</li><li>Crafting tab orders will now display how many workshops are crafting particular item</li></ul>"]},{VERSION:"v1.0.13",MESSAGE:["New features<ul><li><b>Added new health resources (no use yet)</b></li><li><b>It's now possible to switch reserved value to be interpreted as reserve % of total limit</b></li><li><b>Added possibility to add second row to header through management menu</b></li><li><b>Added Heritage system that awards points based on population size on reset</b></li></ul>Performance<ul><li><b>Big performance improvement</b></li><li><b>New performance option in settings (give current default performance a try before changing options)</b></li></ul>Bug fixes:<ul><li><b>Fixed wonder construction not benefiting from construction effects</b></li><li><b>Church will employ worker when finished building</b></li></ul>Other:<ul><li><b>Changed arrange drag and drop to click and click</b></li><li>Researching windmill will now make fabric visible and tradeable</li><li>Upgrade arrow will now have green outline</li><li>Farm can now be upgraded to level 2</li><li>Shrine and Church now have diminishing return from population size</li><li>Apples growth time reduced by 25%</li><li>Greatly reduced alcohol consumption rate</li><li>Invasions will now only happen when village reach certain size</li><li>Invasions will now have a recharge period when invasion threat will not grow</li><li>Workers and population can now be added to header</li><li>Nutrition value will show in the header from the start</li></ul>"]},{VERSION:"v1.0.14",MESSAGE:["New features<ul><li><b>Army troops will now require soldiers pay every 30 days.<br>If there is no enough coins to pay soldier has 25% chance to desert</b></li><li><b>Added new buildings filter for all/working/idle buildings</b></li></ul>Bug fixes:<ul><li><b>Fixed iron recipe not added after researching</b></li></ul>Other:<ul><li>Renamed 'Leather' research to 'Tannery' and removed it from tailor prerequisites</li><li>Added warning about low heating resources on start of autumn</li><li>Added herbs to gatherer building description</li><li>Vegetable and meat soups now require herbs</li><li>Increased high (90-100) happiness effect from 35% to 50%</li><li>Prioritized resources have higher chance to appear on market</li><li>Added new royal perk</li><li>Added a window for nature effects in effects management</li><li>Increased workshops building size</li><li>Decreased animals reproduction rate</li><li>Farm upgrade increases farm power</li></ul>"]},{VERSION:"v1.0.15",MESSAGE:["New features<ul><li><b>Added 'Herbalism' research that allows to plant herbs at fields</b></li></ul>Bug fixes:<ul><li><b>Fixed field harvest display and yield calculation</b></li><li><b>Fixed House building awarded with King of the People perk. It now starts with 3 occupants</b></li><li><b>Fixed game freeze when coins were reserved</b></li></ul>Other:<ul><li>Manufacture no longer stops production during storm</li><li>Mint building size increased, power decreased, output coins increased to be worth more than input resources</li><li>Initial housing buildings start equipped with clothes</li><li>Mathematics research will now also buff deconstructions</li><li>Added pause/resume button in the footer</li><li>Added options to change positive and negative colours to user defined</li></ul>"]},{VERSION:"v1.0.16",MESSAGE:["New features<ul><li><b>Added food priority to management</b></li></ul>Performance<ul><li><b>Added settings option that allows to paginate buildings in regions.<br>Number of buildings per page can be also defined in settings</b></li></ul>Bug fixes:<ul><li><b>Fixed king of the people House building having too much population from start (6 instead of 3)</b></li><li><b>Fixed selling animals removing more than it should</b></li><li><b>Fixed pit mine mining only 199 resources</b></li></ul>Other:<ul><li>Pit mine base power reduced</li><li>Workshops now show what resource they are waiting to deposit</li><li>Workshops won't start crafting if there is no space in warehouse or if warehouse will be filled to full by other workshops</li></ul>"]},{VERSION:"v1.0.17",MESSAGE:["New features<ul><li><b>Resources tooltips will now show who produced that item in the last 30 days</b></li></ul>Bug fixes:<ul><li><b>Fixed mountains tab deposits causing scroll bar to go below the screen</b></li><li><b>Tooltips should no longer go under the screen</b></li><li><b>Probably fixed tavern bug</b></li><li><b>Fixed army payday countdown stuck and invasions being tied to this countdown</b></li><li><b>Fixed day being 11 ticks instead of 10</b></li><li><b>Fixed golden items not resetting correctly</b></li></ul>Other:<ul><li>Changed 'Royal prophecy' 3rd perk to grant 'Bow' and 'Hunting' research instead of 'Mortar'</li><li>Added display of what golden items have been found during current run</li><li>Farms will now work on pastures during rain</li><li>Pastures details now show how much meat current animals will yield</li><li>Alcohol unlocks beer and wine resources</li><li>Windmill power and flour amount doubled, flour recipe cost reduced</li><li>Longhouse require hay instead of fabric (for roof), House require brushwood (also for roof)</li><li>Limited tavern to 1 (having more might be bad if they lack alcohol as negative/positive effects would be applied multiple times)</li></ul>"]},{VERSION:"v1.0.18",MESSAGE:["Bug fixes:<ul><li><b>Fixed huts not arranging correctly</b></li><li><b>Fixed importing showing researches blocked and as done</b></li><li><b>Fixed temperature in weather tab not showing in fahrenheit</b></li><li><b>Fixed workshop waiting for warehouse text breaking buildings order</b></li></ul>Other:<ul><li>Added description to finished research projects describing what has been learned</li></ul>"]},{VERSION:"v1.0.19",MESSAGE:["New features<ul><li><b>Added cooked fish. Researching 'cooking' required to get recipe</b></li><li><b>Added sheep and wool. Wool can be used to craft fabric</b></li></ul>Bug fixes:<ul></ul>Other:<ul><li><b>Reservation settings carry over soft resets/abdications but are deactivated. Added settings option to carry over activated reservations.</b></li><li><b>Management menu options carry over soft resets/abdications if settings option is enabled. Some options require research to become available so until they are researched default values will be used.</b></li><li>Mushrooms can now be planted on farms</li><li>Increased shrine building power</li><li>Increased single buildings buffs power from 5% to 10%. Added more buff information to buff tooltip</li><li>Added agriculture as prerequisite for alcohol</li><li>Unlocking shrine or church will log in green</li><li>Leather recipe no longer available from start</li><li>Removed 'waiting for trees' from loggers hut if forest is available</li><li>Added management option to display research progress in the header</li><li>Quarry and pit mine will log when resources finished</li><li>Increased bigger housing buildings food and fuel storage. Changed their cost to that value.</li></ul>"]},{VERSION:"v1.0.20",MESSAGE:["Bug fixes:<ul><li><b>Produced/used by data will no longer persist through resets</b></li></ul>Other:<ul><li>Added pasture description to hint where to find first animals</li><li>Added management option to display faith in the header</li><li>Added new royal perk to increase initial crafting queue size</li><li>Increased 'Motivation Speech' perk to last 5 years instead of just 1 year</li><li>Soft reset and abdication now shows how many people are needed for the next heritage point</li><li>Chores cap now scale with pasture size</li><li>Hay nutrition for animals reduced from 25 to 10</li><li>'Auto save' messages will now combine into one with number of total saves</li><li>Added log message when worker is removed from the building. This can be disabled in management</li><li>Used up building (quarry, pit mine) will now have greyed out background</li><li>Greatly increased fruiting rate for all orchard crops. Orchards can now fruit also in summer</li></ul>"]},{VERSION:"v1.1.0",MESSAGE:["New Features:<ul><li><b>Introduced world map tab with new mechanics and reworked army missions</b></li><li><b>New buildings: Embassy, Paper mill, Deep mine</b></li><li><b>A few new researches</b></li><li><b>Added average daily nutrition production display to nutrition tooltip</b></li></ul>Bug fixes:<ul><li>Lack of alcohol now reduces happiness again down to 75%</li><li>Added better verification to auto save period input</li><li>Fixed stuck payday counter when no pay is due</li></ul>Other:<ul><li><b>New level of 'Family jewels' that add coins to starting resources</b></li><li>'Motivation speech' duration increased to 100 years</li><li>Reduced alcohol consumption and happiness increase/decrease</li><li>Used up buildings (quarry, pit mine) will not require demolish confirmation anymore</li><li>Wiki link added to footer</li><li>Pit mine base power decreased</li></ul>"]},{VERSION:"v1.1.1",MESSAGE:["Bug fixes:<ul><li><b>Fixed deep mine not working after upgrade</b></li><li><b>Underground City will now also buff deep mine</b></li><li><b>Player plunder and conquer no longer will fight player region when conquered</b></li><li><b>Fixed issue with region selection moving map instead</b></li></ul>Other:<ul><li><b>Increased cost for AI colonization (so that it happens less frequently)</b></li><li><b>Increased cost for AI troops</b></li><li>Deep mine will take longer to find new ores and longer to upgrade</li><li>Royal perks split into permanent and one time use groups</li><li>When demolishing housing buildings villagers will take their share of food, fuel and clothes to the new building</li><li>There are reports about golden apples in the orchards!</li><li>Removed stone from colonization cost</li></ul>"]},{VERSION:"v1.1.2",MESSAGE:["New Features:<ul><li><b>Auto trade options in resource settings window</b></li></ul>Bug fixes:<ul><li><b>Fixed pasture chores to use farm power bonus</b></li><li><b>Fixed player regions being attacked even with friendly standing</b></li></ul>Other:<ul><li>Reduced troops training time</li><li>Reduced AI attacks chance</li><li>Removed fabric from paper mill cost</li><li>Pit mine require only 20 mountains again</li><li>Added confirm window when trying to buy resource over the limit</li></ul>"]},{VERSION:"v1.1.3",MESSAGE:["New Features:<ul><li><b>Work management has now a season rule</b></li><li><b>Work management can be set to craft always to max</b></li><li><b>Work management for training square added</b></li><li><b>Work management can be set to all buildings of the same type</b></li><li><b>Work management for farm added</b></li></ul>Bug fixes:<ul><li><b>Added Paper mill to resource settings</b></li><li><b>Fixed spy mission</b></li><li><b>'Move' mission troops will return if target region has been conquered</b></li></ul>Other:<ul><li><b>Reduced AI income</b></li><li>Reduced number of AI starting regions</li><li>Changed shrine cost to raw resources</li><li>Deep mine ore finding rate per ore increase with each building level</li><li>Added logs when player region is conquered</li></ul>"]},{VERSION:"v1.1.4",MESSAGE:["New Features:<ul><li><b>Added fight reports</b></li></ul>Other:<ul><li>Diplomacy will be decreased much more after hostile actions towards friendly kingdoms</li><li>AI regions will start with 2 archers to slow down early rush</li><li>Added settings option that will pause the game on page open/refresh</li></ul>"]},{VERSION:"v1.1.5",MESSAGE:["Bug fixes:<ul><li><b>Added missing fight reports on won defense</b></li><li><b>Fixed missing path connection from one of the regions</b></li><li><b>Fixed farm work management not saving</b></li><li><b>Added scroll bar to general management tab to prevent food priority hiding</b></li><li><b>Fixed player kingdom name changing</b></li><li><b>Loot message will combine the same resources</b></li><li><b>'Pickaxe design' will now add bonus to deep mine</b></li></ul>Other:<ul><li>Max colonists set to 20 (as there is no point in sending more)</li><li>Reduced hay yield multiplier from 2 to 1.5</li><li>Reduced the cost of 'specialised production' research</li><li>Increased pit mine base power</li><li>Reduced wine fermenting time from 1 year to 30 days</li><li>Recruits can be 'drag and drop' arranged</li><li>Soft reset/abdication message will now say on what year current run has started</li></ul>"]},{VERSION:"v1.1.6",MESSAGE:["New Features:<ul><li><b>Added research crafting queue</b></li><li><b>Added Buildings auto-sort.<br>Order of buildings will be the same as the order of appearance.</b></li></ul>Bug fixes:<ul><li><b>Chrome map bugs should be fixed now</b></li><li><b>Fixed building confirmation (triggered by button) to work incorrectly when confirmed with enter</b></li></ul>Other:<ul><li>Village region will be now remembered and redirected on reentry</li><li>Added management switch to change default workshop mode</li><li>Added management switch to prevent hunters stop taming</li></ul>"]},{VERSION:"v1.1.7",MESSAGE:["New Features:<ul><li><b>Added percentage auto trade</b></li></ul>Bug fixes:<ul><li><b>Fixed research progress resetting on load. Might not work for research already in the queue (finish or cancel and add again)</b></li></ul>Other:<ul><li>Added queue size display to research tab</li><li>Added pause 'p' and world map 'm' hotkeys</li><li>Improved pasture, field and orchard splitting and combining</li><li>Added management option to allow summer plowing</li><li>Added focus on input to some popup windows</li><li>Added settings option to keep auto trade on after reset</li><li>Added management option to disable auto trade logs</li><li>Changed skirmish win chance calculation</li><li>Added army bonus to each skirmish if army is at least twice the size of the enemy army</li><li>Reduce attack/defense of troop that won skirmish by 1 (tiredness)</li></ul>"]},{VERSION:"v1.1.8",MESSAGE:["Bug fixes:<ul><li><b>Fixed winter happiness from clothes not being applied</b></li></ul>Other:<ul><li>Soft reset renamed to abdication</li><li>World map regions ownership won't reset on abdications unless ordered to</li><li>Added map switch to show capitals, armies and spies</li></ul>"]},{VERSION:"v1.1.9",MESSAGE:["New Features:<ul><li><b>Added Gatherers camp (upgrades will come in future patches)</b></li><li><b>Added sickness mechanic. Freezing villagers will get sick.<br>Each sickness has a chance that sick villager will die.<br>Sick villagers cannot work<br>Herbal medicine reduces sickness time (and indirectly lethality)</b></li><li><b>Added research unlocking with Heritage Points</b></li></ul>Bug fixes:<ul><li><b>Fixed research queue entry canceling when selecting 'no' in confirmation window</b></li><li><b>Fixed header size when importing save with 2-line header on 1-line header state</b></li><li><b>Added Gatherers camp (upgrades will come in future patches)</b></li></ul>Other:<ul><li>Added heating efficiency descriptions to house building</li><li>Auto sort should now also consider manufacture recipe while sorting</li><li>Added log message when faith is full</li><li>Added header entries that list all resources of each category</li><li>Slightly changed buildings sizes</li></ul>"]}],Ku={name:"New King",building:Ou.ALL,effect:100,duration:90},ju=.2,qu=750,Xu=10,Qu=360,Zu={START_HAPPINESS:15,FOOD_HAPPINESS_FLOOR:0,FOOD_HAPPINESS_LIMIT:20,HEAT_HAPPINESS_FLOOR:10,HEAT_HAPPINESS_LIMIT:50,CLOTHES_HAPPINESS_FLOOR:35,CLOTHES_HAPPINESS_LIMIT:75,ALCOHOL_HAPPINESS_FLOOR:75,ALCOHOL_HAPPINESS_LIMIT:100},Ju={AUTO_SAVE_STATUS:!0,AUTO_SAVE_PERIOD:5,METRIC:!0,SAVE_LOGS:!1,PAUSE_ON_INIT:!1,KEEP_RESERVATION_SETTINGS_ON_RESET:!1,KEEP_MANAGEMENT_SETTINGS_ON_RESET:!1,KEEP_AUTO_TRADE_ON_RESET:!1,SOUND:!0,SOUND_VOLUME:100,VISUAL_PROGRESS_BARS:!0,AUTO_TEXT_FITTING:!0,PAGED_VIEW:!1,BUILDINGS_PER_PAGE:12,POSITIVE_COLOUR:"#006400",NEGATIVE_COLOUR:"#8B0000"},eo={VILLAGE_TUTORIAL:[{text:"Welcome to this quick tutorial that will guide you through basic controls of Villager Kings",position:{width:"250px",top:"180px",left:"275px"}},{text:"To the left you can see navigation menu that will allow you to browse tabs representing different aspects of your village",position:{width:"200px",top:"50px",left:"100px"}},{text:"Right now we are in the village tab and using top menu you can navigate between village regions",position:{width:"200px",top:"65px",left:"130px"}},{text:"In the middle of the village region you can see your buildings. There are many different types of buildings. <br> Some of them produce items, others consume them to produce more advanced items. <br>Currently in your village there are only Huts which produce workers for your village.<br>Housing buildings cannot be stopped and require constant supply of food, fuel (in winter) and clothes",position:{width:"400px",top:"180px",left:"200px"}},{text:"Above your buildings you can see most important metrics for current region.<br>For village those are:<br>1. Population of your village/max population<br>2. Free workers that can be assigned to work<br>3. Size of your empty land where you can build<br>4. Size of your whole village (all regions)<br>5. Your people happiness, which will influence their productivity<br>",position:{width:"400px",top:"115px",left:"100px"}},{text:"That's all here for now let's move into the Forest region<br> using top menu and continue the tutorial there",position:{width:"400px",top:"180px",left:"200px"}}],FOREST_TUTORIAL:[{text:"In the forest you have two working buildings<br>Logger's hut that cuts forest trees and produces logs<br>and Gatherer that collects various resources when wandering in the forest. Gatherer has two operating modes<br>Worker working here can either focus on looking for food or useful and sometimes rare resources",position:{width:"400px",top:"240px",left:"200px"}},{text:"There are two icons on both sides of building name.<br>To the left there is details icon. If you hover over it, <br>a tooltip with more technical details regarding a building will popup (not active during tutorial),<br>To the right you can see a cog icon which allows you to stop and start production by hiring or firing worker",position:{width:"450px",top:"160px",left:"150px"}},{text:"Above buildings you can see 'Build' and 'Demolish' buttons.<br>First one opens a window with all buildings you can build in this region.<br>In future you will discover many more types of building to build.<br>Second one allows you to set buildings to be demolished by free worker<br>You will receive small portion of resources used to build demolished building",position:{width:"450px",top:"100px",left:"50px"}},{text:"Now let's order your people to build more gatherers and continue to the 'Resources' tab in the left menu",position:{width:"250px",top:"180px",left:"275px"}}],FIELD_TUTORIAL:[{text:"Field region has many buildings with different mechanics than other regions.<br>Field, Orchard and Pasture buildings require Farm with workers <br>who will work on planting, sowing, harvesting and tending to animals.<br><br>Fields yearly cycle starts in spring, after you have selected what type of crops should be planted,<br>your Farm workers will start plowing the land and then sowing selected crop.<br>After sowing is completed your crops will start to grow until Autumn.<br>On autumn all crops will stop growing and will be ready for harvest performed by Farm workers.<br>If there are any crops not harvested by the beginning of winter they will wither and will be lost.<br><br>",position:{width:"400px",top:"150px",left:"200px"}},{text:"Orchards are a bit different. Those also need to be plowed and plants need to be planted,<br>after that they keep growing for several years without any work input.<br>Once they matured they will fruit every year with only harvest work required.<br><br>",position:{width:"400px",top:"150px",left:"200px"}},{text:"Pastures allow animals breeding. They require work input for the whole year (chores)<br>and animals require Hay to eat during winter.<br>If no hay is available animals can starve to death.<br> They eat grass and other natural food during other seasons.<br>Some animals produce animals products like eggs and milk which add to your food supplies.<br>All animals can be butchered for meat when butcher building is built.<br>Once animals are researched Hunters can try to tame animals for which there is empty pasture space.",position:{width:"400px",top:"150px",left:"200px"}}],MOUNTAINS_TUTORIAL:[{text:"Most mountains buildings require mountains space instead of free land.<br>This mountain area is finite and after the building deplete resources it can be demolished to add empty land instead of back to mountains.<br><br>To gain more mountains areas you will need to run expeditions or conquer enemies (Army).<br><br>After geologist is unlocked and built he will start looking for ores deposits which is very slow process.<br>Once 20 deposits of certain resource has been found Pit Mine can be used to mine it.",position:{width:"400px",top:"150px",left:"200px"}}],PLATEAU_TUTORIAL:[{text:"In this special area Wonder buildings can be constructed.<br>These require much more resources and much more work to be completed.<br>Each Wonder building adds permanent buff corresponding to it's nature.<br>Wonder building also allows you to abdicate what performs soft reset and additionally award you with Royal Points to spend on Royal perks.<br>Wonder building and it's buff persist through soft resets and abdications.",position:{width:"400px",top:"150px",left:"200px"}}],SEA_TUTORIAL:[{text:"By the sea fishers can catch fish from the sea.<br>Each school of fish has certain number of fish that slowly breed.<br>If you catch all fish, new school of fish should appear in some time.<br><br>Fishers can also produce fish food which will boost fish breeding rate.",position:{width:"400px",top:"150px",left:"200px"}}],RESOURCES_TUTORIAL:[{text:"In this tab you can browse all of the resources that you have discovered<br>Next to the resource icon there is current amount that you have and storage limit for that resource.<br><br>Storage can be extended by building warehouses in the village",position:{width:"400px",top:"150px",left:"200px"}},{text:"To the right there are two additional icons present for each resource<br>First one allows you to set amount that will be reserved and no automated action can use them<br>Player initiated action can on the other hand use reserved resources<br>(keep in mind that some actions like for example invasion can still reduce resources below reserved amount!)<br><br>Second icon toggles which resources should be highlighted in the game header",position:{width:"400px",top:"150px",left:"200px"}},{text:"In the header you can highlight up to 7 resources to know their amounts in any tab of the game",position:{width:"400px",top:"30px",left:"30px"}},{text:"That's all for the basics.<br>To really start progressing you should work towards building Workshop in the village which will open new opportunities<br>",position:{width:"400px",top:"150px",left:"200px"}}]},no={ALLOW_FUR_CLOTHES:!0,SHOW_FOOD_NUTRITION:!0,FOOD_RATIONS:2,CLOTHES_RATIONS:1,ALCOHOL_RATIONS:1,LOG_FIRED_WORKERS:!0,LOG_AUTO_TRADE:!0,LOG_SICKNESS:!0,COMPLEX_WORK_MANAGEMENT:!1,SECOND_HEADER_ROW:!1,SHOW_FREE_WORKERS:!1,SHOW_POPULATION:!1,SHOW_RESEARCH_PROGRESS:!1,SHOW_FAITH:!1,SHOW_RAW:!1,SHOW_PROCESSED:!1,SHOW_FOOD:!1,SHOW_TOOLS:!1,DEFAULT_WORKSHOP_RESEARCH:!0,SWITCH_HUNTER_FROM_TAMING:!0,PLOW_IN_SUMMER:!1},to={START_LAND:500,START_FOREST:500,START_MOUNTAINS:100,FOREST_GROW_PERCENTAGE:.05,MINIMAL_FOREST_GROWTH:100,FOREST_GROW_TICKS:Xu*Qu},lo={getBuilding(e){const n=this.getBuildings().find(n=>n[0]===Ou[e]);if(n)return n[1];console.warn("Invalid building: "+Pu.prepareBuildingName(e))},getBuildings(){return Object.entries(this.VILLAGE).concat(Object.entries(this.FORT)).concat(Object.entries(this.FOREST)).concat(Object.entries(this.FIELD)).concat(Object.entries(this.MOUNTAINS)).concat(Object.entries(this.PLATEAU)).concat(Object.entries(this.SEA))},getBuildingRegion(e){return Object.keys(this.FOREST).includes(Ou[e])?Hu.FOREST:Object.keys(this.VILLAGE).includes(Ou[e])?Hu.VILLAGE:Object.keys(this.MOUNTAINS).includes(Ou[e])?Hu.MOUNTAINS:Object.keys(this.FIELD).includes(Ou[e])?Hu.FIELD:Object.keys(this.FORT).includes(Ou[e])?Hu.FORT:Object.keys(this.SEA).includes(Ou[e])?Hu.SEA:Object.keys(this.PLATEAU).includes(Ou[e])?Hu.PLATEAU:void 0},DEMOLITION_RETURN:.3,FOREST:{LOGGERS_HUT:{BASE_POWER:5,SIZE:2,COMPLEXITY:5,DESCRIPTION:"Loggers cut trees in the forest",COST:[{resource:Su.LOG,amount:10}],WEATHER:[{weather:Gu.RAIN,effect:-50},{weather:Gu.STORM,effect:-100}],BUFF:{name:"New tools",effect:10,duration:360,cost:[{resource:Su.STONE_AXE,amount:5}]},UPGRADES:[{BASE_POWER:7.5,COMPLEXITY:10,PREREQUISITES:[bu.URBAN_PLANNING],COST:[{resource:Su.PLANK,amount:10},{resource:Su.CUT_STONE,amount:10},{resource:Su.STONE_HAMMER,amount:5},{resource:Su.STONE_AXE,amount:5}]},{BASE_POWER:10,COMPLEXITY:20,PREREQUISITES:[],COST:[{resource:Su.PLANK,amount:20},{resource:Su.CUT_STONE,amount:20},{resource:Su.COPPER,amount:10},{resource:Su.STONE_AXE,amount:10}]}]},FORESTER:{BASE_POWER:10,SIZE:10,COMPLEXITY:10,DESCRIPTION:"Forester can plant new trees and control natural growth of the forest",COST:[{resource:Su.LOG,amount:10},{resource:Su.STONE_SHOVEL,amount:2}],WEATHER:[{weather:Gu.RAIN,effect:-100},{weather:Gu.STORM,effect:-100}],BUFF:{name:"New tools",effect:10,duration:360,cost:[{resource:Su.STONE_SHOVEL,amount:5}]}},SAWMILL:{BASE_POWER:3,SIZE:20,COMPLEXITY:15,DESCRIPTION:"Sawmill cut logs into planks",COST:[{resource:Su.LOG,amount:20},{resource:Su.CUT_STONE,amount:10}],TEXT:"cutting",INPUT_RESOURCES:[{resource:Su.LOG,amount:3}],OUTPUT_RESOURCES:[{resource:Su.PLANK,amount:1}]},GATHERER:{BASE_POWER:10,SIZE:5,COMPLEXITY:3,DESCRIPTION:"Gatherer can find all kinds of useful things in the forest.<br>They can look for either food or resources",COST:[{resource:Su.LOG,amount:10},{resource:Su.STONE,amount:5}],WEATHER:[{weather:Gu.RAIN,effect:-75},{weather:Gu.STORM,effect:-100}],CAN_PRODUCE:[Su.BERRY,Su.MUSHROOM,Su.WHEAT,Su.HERBS,Su.BRUSHWOOD,Su.STONE,Su.LOG,Su.COPPER],BERRY_CHANCE:30,MUSHROOM_CHANCE:30,WHEAT_CHANCE:3,BRUSHWOOD_CHANCE:35,STONE_CHANCE:15,LOG_CHANCE:5,COPPER_CHANCE:.5,HERBS_CHANCE:2},GATHERERS_CAMP:{BASE_POWER:10,SIZE:20,COMPLEXITY:15,DESCRIPTION:"It is more efficient to group gatherers together in one place",COST:[{resource:Su.LOG,amount:30},{resource:Su.PLANK,amount:10},{resource:Su.CUT_STONE,amount:10}],WEATHER:[{weather:Gu.RAIN,effect:-75},{weather:Gu.STORM,effect:-100}],CAN_PRODUCE:[Su.BERRY,Su.MUSHROOM,Su.WHEAT,Su.HERBS,Su.BRUSHWOOD,Su.STONE,Su.LOG,Su.COPPER],BERRY_CHANCE:30,MUSHROOM_CHANCE:30,WHEAT_CHANCE:3,BRUSHWOOD_CHANCE:35,STONE_CHANCE:15,LOG_CHANCE:5,COPPER_CHANCE:.5,HERBS_CHANCE:2},HUNTER_LODGE:{BASE_POWER:2,SIZE:5,COMPLEXITY:8,DESCRIPTION:"Hunts animals for meat and fur",COST:[{resource:Su.LOG,amount:15},{resource:Su.PLANK,amount:5},{resource:Su.BOW,amount:1}],WEATHER:[{weather:Gu.RAIN,effect:-100},{weather:Gu.STORM,effect:-100}],CAN_PRODUCE:[Su.MEAT,Su.FUR],BUFF:{name:"New tools",effect:10,duration:360,cost:[{resource:Su.BOW,amount:5}]}},TANNERY:{BASE_POWER:5,SIZE:5,COMPLEXITY:5,DESCRIPTION:"Turns furs into leather",COST:[{resource:Su.LOG,amount:20},{resource:Su.PLANK,amount:10}],TEXT:"tanning",INPUT_RESOURCES:[{resource:Su.FUR,amount:1}],OUTPUT_RESOURCES:[{resource:Su.LEATHER,amount:1}]},PAPER_MILL:{BASE_POWER:2,SIZE:20,COMPLEXITY:20,DESCRIPTION:"Produces paper from logs",COST:[{resource:Su.LOG,amount:20},{resource:Su.CUT_STONE,amount:10},{resource:Su.PLANK,amount:10}],TEXT:"producing",INPUT_RESOURCES:[{resource:Su.LOG,amount:3}],OUTPUT_RESOURCES:[{resource:Su.PAPER,amount:1}]}},MOUNTAINS:{QUARRY:{BASE_POWER:5,SIZE:20,COMPLEXITY:15,DESCRIPTION:"Cuts stone out of mountains",COST:[{resource:Su.LOG,amount:40},{resource:Su.PLANK,amount:20}],WEATHER:[{weather:Gu.RAIN,effect:-100},{weather:Gu.STORM,effect:-100}],CAN_PRODUCE:[Su.STONE],BUFF:{name:"New tools",effect:10,duration:360,cost:[{resource:Su.STONE_PICKAXE,amount:5}]}},GEOLOGIST:{BASE_POWER:1,SIZE:5,COMPLEXITY:10,DESCRIPTION:"Looks for useful rocks",COST:[{resource:Su.LOG,amount:10},{resource:Su.STONE,amount:5}],WEATHER:[{weather:Gu.RAIN,effect:-100},{weather:Gu.STORM,effect:-100}],COAL_CHANCE:20,GOLD_CHANCE:4,SILVER_CHANCE:8,COPPER_CHANCE:10,TIN_CHANCE:6,IRON_CHANCE:4},PIT_MINE:{BASE_POWER:2,SIZE:20,COMPLEXITY:15,DESCRIPTION:"Allows workers to mine ores",COST:[{resource:Su.LOG,amount:60},{resource:Su.STONE_PICKAXE,amount:5}],WEATHER:[{weather:Gu.RAIN,effect:-100},{weather:Gu.STORM,effect:-100}],BUFF:{name:"New tools",effect:10,duration:360,cost:[{resource:Su.STONE_PICKAXE,amount:5},{resource:Su.STONE_SHOVEL,amount:5}]}},DEEP_MINE:{BASE_POWER:1,SIZE:20,COMPLEXITY:30,DESCRIPTION:"Allows workers to mine ores from under the ground",COST:[{resource:Su.LOG,amount:100},{resource:Su.PLANK,amount:50},{resource:Su.CUT_STONE,amount:50},{resource:Su.STONE_PICKAXE,amount:20},{resource:Su.STONE_SHOVEL,amount:20},{resource:Su.STONE_HAMMER,amount:10}],WEATHER:[],BUFF:{name:"New tools",effect:10,duration:360,cost:[{resource:Su.STONE_PICKAXE,amount:10},{resource:Su.STONE_SHOVEL,amount:10}]},UPGRADES:[{BASE_POWER:1,COMPLEXITY:40,PREREQUISITES:[],COST:[{resource:Su.LOG,amount:20},{resource:Su.PLANK,amount:20},{resource:Su.CUT_STONE,amount:10},{resource:Su.STONE_PICKAXE,amount:5},{resource:Su.STONE_HAMMER,amount:5},{resource:Su.STONE_SHOVEL,amount:5}]},{BASE_POWER:1,COMPLEXITY:50,PREREQUISITES:[],COST:[{resource:Su.LOG,amount:20},{resource:Su.PLANK,amount:20},{resource:Su.CUT_STONE,amount:10},{resource:Su.STONE_PICKAXE,amount:5},{resource:Su.STONE_HAMMER,amount:5},{resource:Su.STONE_SHOVEL,amount:5}]},{BASE_POWER:1,COMPLEXITY:60,PREREQUISITES:[],COST:[{resource:Su.LOG,amount:20},{resource:Su.PLANK,amount:20},{resource:Su.CUT_STONE,amount:10},{resource:Su.STONE_PICKAXE,amount:5},{resource:Su.STONE_HAMMER,amount:5},{resource:Su.STONE_SHOVEL,amount:5}]},{BASE_POWER:1,COMPLEXITY:70,PREREQUISITES:[],COST:[{resource:Su.LOG,amount:20},{resource:Su.PLANK,amount:20},{resource:Su.CUT_STONE,amount:10},{resource:Su.STONE_PICKAXE,amount:5},{resource:Su.STONE_HAMMER,amount:5},{resource:Su.STONE_SHOVEL,amount:5}]}]},STONEMASON:{BASE_POWER:3,SIZE:5,COMPLEXITY:10,DESCRIPTION:"Shapes stones for building",COST:[{resource:Su.LOG,amount:10},{resource:Su.STONE,amount:10}],TEXT:"cutting",INPUT_RESOURCES:[{resource:Su.STONE,amount:3}],OUTPUT_RESOURCES:[{resource:Su.CUT_STONE,amount:1}]},SMITHY:{BASE_POWER:5,SIZE:10,COMPLEXITY:20,DESCRIPTION:"Provides furnace for smelting ore and metal items",COST:[{resource:Su.LOG,amount:20},{resource:Su.PLANK,amount:10},{resource:Su.CUT_STONE,amount:10},{resource:Su.COPPER,amount:5}],RECIPES:[{recipe:Mu.COPPER,prerequisite:bu.SMITHY},{recipe:Mu.TIN,prerequisite:bu.SMITHY},{recipe:Mu.BRONZE,prerequisite:bu.BRONZE},{recipe:Mu.GOLD,prerequisite:bu.ADVANCED_ORE_PROCESSING},{recipe:Mu.SILVER,prerequisite:bu.ADVANCED_ORE_PROCESSING},{recipe:Mu.IRON,prerequisite:bu.IRON},{recipe:Mu.STEEL,prerequisite:bu.STEEL},{recipe:Mu.SWORD,prerequisite:bu.SMITHY},{recipe:Mu.LIGHT_ARMOR,prerequisite:bu.SMITHY},{recipe:Mu.HEAVY_ARMOR,prerequisite:bu.SMITHY}]},MINT:{BASE_POWER:3,SIZE:40,COMPLEXITY:20,DESCRIPTION:"Produces coins from gold",COST:[{resource:Su.LOG,amount:20},{resource:Su.PLANK,amount:10},{resource:Su.CUT_STONE,amount:10},{resource:Su.BRONZE,amount:10}],TEXT:"minting",INPUT_RESOURCES:[{resource:Su.GOLD,amount:1},{resource:Su.SILVER,amount:1}],OUTPUT_RESOURCES:[{resource:Su.COINS,amount:150}]}},VILLAGE:{HUT:{BASE_POWER:.5,SIZE:10,COMPLEXITY:5,STORAGE:100,DESCRIPTION:"Very primitive shelter but keeps rain and cold away. Houses 2 villagers",COST:[{resource:Su.FOOD,amount:100},{resource:Su.LOG,amount:10},{resource:Su.BRUSHWOOD,amount:10}],MAX_OCCUPANTS:2},HOUSE:{BASE_POWER:.7,SIZE:25,COMPLEXITY:15,STORAGE:200,DESCRIPTION:"Bigger and more durable shelter. Houses 6 villagers.<br>It's more efficient to heat than multiple huts",COST:[{resource:Su.FOOD,amount:200},{resource:Su.LOG,amount:20},{resource:Su.PLANK,amount:20},{resource:Su.BRUSHWOOD,amount:10}],MAX_OCCUPANTS:6},LONGHOUSE:{BASE_POWER:.9,SIZE:45,COMPLEXITY:20,STORAGE:300,DESCRIPTION:"Long building for multiple families. Houses 15 villagers",COST:[{resource:Su.FOOD,amount:300},{resource:Su.LOG,amount:40},{resource:Su.PLANK,amount:40},{resource:Su.CUT_STONE,amount:20},{resource:Su.HAY,amount:10}],MAX_OCCUPANTS:15},WAREHOUSE:{BASE_POWER:0,SIZE:50,COMPLEXITY:10,DESCRIPTION:"Stores selected type of resources",COST:[{resource:Su.LOG,amount:20},{resource:Su.PLANK,amount:10},{resource:Su.CUT_STONE,amount:5}]},WORKSHOP:{BASE_POWER:5,RESEARCH_POWER:1,CRAFTING_POWER:1.5,SIZE:15,COMPLEXITY:15,DESCRIPTION:"At the workshop workers can do research projects or build complex things",COST:[{resource:Su.LOG,amount:20},{resource:Su.BRUSHWOOD,amount:10}]},MANUFACTURE:{BASE_POWER:7,CRAFTING_POWER:1.5,SIZE:5,COMPLEXITY:20,DESCRIPTION:"Manufacture specialises in crafting one recipe and it takes time to change production but it produces slightly faster than workshop",COST:[{resource:Su.LOG,amount:20},{resource:Su.PLANK,amount:10},{resource:Su.CUT_STONE,amount:10},{resource:Su.STONE_HAMMER,amount:5}]},MARKETPLACE:{BASE_POWER:1,SIZE:20,COMPLEXITY:5,DESCRIPTION:"Place for trading with other villages",COST:[{resource:Su.LOG,amount:10},{resource:Su.PLANK,amount:10},{resource:Su.STONE,amount:20}]},TAVERN:{BASE_POWER:1,SIZE:10,COMPLEXITY:20,DESCRIPTION:"Meeting place where villagers can relax and cheer up<br>Consume wine and beer but increase happiness",COST:[{resource:Su.LOG,amount:10},{resource:Su.PLANK,amount:20},{resource:Su.CUT_STONE,amount:20},{resource:Su.BRUSHWOOD,amount:20}],WEATHER:[{weather:Gu.RAIN,effect:25},{weather:Gu.STORM,effect:25}]},BAKERY:{BASE_POWER:10,SIZE:5,COMPLEXITY:10,DESCRIPTION:"Bakes bread from flour",COST:[{resource:Su.LOG,amount:10},{resource:Su.PLANK,amount:10},{resource:Su.STONE,amount:10},{resource:Su.CUT_STONE,amount:10}],TEXT:"baking",INPUT_RESOURCES:[{resource:Su.FLOUR,amount:2},{resource:Su.FUEL,amount:1}],OUTPUT_RESOURCES:[{resource:Su.BREAD,amount:1}],BUFF:{name:"Bread oven",effect:10,duration:360,cost:[{resource:Su.CUT_STONE,amount:20}]}},TAILOR:{BASE_POWER:5,SIZE:5,COMPLEXITY:10,DESCRIPTION:"Produces clothes from fabric",COST:[{resource:Su.LOG,amount:10},{resource:Su.PLANK,amount:10}],TEXT:"sewing",INPUT_RESOURCES:[{resource:Su.FABRIC,amount:3}],OUTPUT_RESOURCES:[{resource:Su.CLOTHES,amount:1}]},SHRINE:{BASE_POWER:2,POPULATION:8,SIZE:2,COMPLEXITY:8,DESCRIPTION:"Place for prayer and offerings",COST:[{resource:Su.LOG,amount:5},{resource:Su.CUT_STONE,amount:5},{resource:Su.BERRY,amount:10},{resource:Su.MUSHROOM,amount:10},{resource:Su.MEAT,amount:10}]},CHURCH:{BASE_POWER:1,POPULATION:20,SIZE:10,COMPLEXITY:10,DESCRIPTION:"Place of prayer and contemplation",COST:[{resource:Su.LOG,amount:40},{resource:Su.CUT_STONE,amount:30}],BUFF:{name:"Offering",effect:10,duration:360,cost:[{resource:Su.COINS,amount:200}]}}},FORT:{BARRACKS:{BASE_POWER:0,SIZE:10,COMPLEXITY:10,DESCRIPTION:"Housing for troops",COST:[{resource:Su.LOG,amount:20},{resource:Su.CUT_STONE,amount:10}]},TRAINING_SQUARE:{BASE_POWER:10,SIZE:10,COMPLEXITY:3,DESCRIPTION:"Place for training recruits",COST:[{resource:Su.STONE,amount:40}],WEATHER:[{weather:Gu.RAIN,effect:-50},{weather:Gu.STORM,effect:-100}]},EMBASSY:{BASE_POWER:1,SIZE:20,COMPLEXITY:10,DESCRIPTION:"Ambassadors work here to improve relations with other kingdoms",COST:[{resource:Su.PLANK,amount:30},{resource:Su.CUT_STONE,amount:30}]},STOCKADE:{BASE_POWER:10,SIZE:50,COMPLEXITY:100,DESCRIPTION:"Protective wall around the village to protect against attackers",COST:[{resource:Su.LOG,amount:100},{resource:Su.STONE,amount:10}],DEFENSE:2,DURABILITY:50},WOODEN_TOWER:{BASE_POWER:10,SIZE:10,COMPLEXITY:30,DESCRIPTION:" Provide passive defense power",COST:[{resource:Su.LOG,amount:40},{resource:Su.PLANK,amount:20}],DEFENSE:3,DURABILITY:50},STONE_TOWER:{BASE_POWER:10,SIZE:10,COMPLEXITY:30,DESCRIPTION:"Provide passive defense power, more durable than wooden tower",COST:[{resource:Su.CUT_STONE,amount:40},{resource:Su.PLANK,amount:20}],DEFENSE:3,DURABILITY:100},STASH:{BASE_POWER:1,SIZE:10,COMPLEXITY:30,DESCRIPTION:"Complex hidden tunnels allow us to hide some resources in case of invasion",COST:[{resource:Su.LOG,amount:30},{resource:Su.CUT_STONE,amount:10},{resource:Su.PLANK,amount:10},{resource:Su.STONE_PICKAXE,amount:5}]}},FIELD:{FARM:{BASE_POWER:20,SIZE:15,COMPLEXITY:10,DESCRIPTION:"Farm allows workers to work on fields, orchard and pastures",COST:[{resource:Su.LOG,amount:40},{resource:Su.PLANK,amount:20},{resource:Su.STONE,amount:10}],WEATHER:[{weather:Gu.RAIN,effect:-50},{weather:Gu.STORM,effect:-100}],BUFF:{name:"New tools",effect:10,duration:360,cost:[{resource:Su.STONE_SHOVEL,amount:5}]},UPGRADES:[{BASE_POWER:22,COMPLEXITY:10,PREREQUISITES:[bu.URBAN_PLANNING],COST:[{resource:Su.LOG,amount:20},{resource:Su.PLANK,amount:20},{resource:Su.CUT_STONE,amount:10},{resource:Su.STONE_HAMMER,amount:5},{resource:Su.STONE_SHOVEL,amount:5}]}]},WINDMILL:{BASE_POWER:10,SIZE:20,COMPLEXITY:15,DESCRIPTION:"Windmill turns wheat into flour",COST:[{resource:Su.LOG,amount:30},{resource:Su.PLANK,amount:10},{resource:Su.FABRIC,amount:20}],TEXT:"milling",INPUT_RESOURCES:[{resource:Su.WHEAT,amount:1}],OUTPUT_RESOURCES:[{resource:Su.FLOUR,amount:2}],WEATHER:[{weather:Gu.WIND,effect:50},{weather:Gu.STORM,effect:-100}]},COTTON_MILL:{BASE_POWER:5,SIZE:10,COMPLEXITY:10,DESCRIPTION:"Spins cotton into fabric",COST:[{resource:Su.LOG,amount:10},{resource:Su.PLANK,amount:10}],TEXT:"spinning",INPUT_RESOURCES:[{resource:Su.COTTON,amount:2}],OUTPUT_RESOURCES:[{resource:Su.FABRIC,amount:1}]},BREWERY:{BASE_POWER:1,SIZE:25,COMPLEXITY:20,DESCRIPTION:"Brews delicious beer",COST:[{resource:Su.LOG,amount:30},{resource:Su.PLANK,amount:30},{resource:Su.COPPER,amount:10}],TEXT:"brewing",INPUT_RESOURCES:[{resource:Su.BARLEY,amount:10},{resource:Su.HOP,amount:5},{resource:Su.FUEL,amount:3}],OUTPUT_RESOURCES:[{resource:Su.BEER,amount:10}]},FIELD:{BASE_POWER:1,SIZE:50,COMPLEXITY:1,DESCRIPTION:"Various crops can be grown here (Farm required to work on fields)",COST:[{resource:Su.STONE,amount:4}],WEATHER:[{weather:Gu.RAIN,effect:50},{weather:Gu.SUN,effect:50},{weather:Gu.CLOUDS,effect:-25}]},BUTCHER:{BASE_POWER:5,SIZE:15,COMPLEXITY:10,DESCRIPTION:"Turns animals from pastures into meat",COST:[{resource:Su.LOG,amount:15},{resource:Su.PLANK,amount:10},{resource:Su.CUT_STONE,amount:5}]},ORCHARD:{BASE_POWER:1,SIZE:50,COMPLEXITY:1,DESCRIPTION:"Various fruit trees and bushes can be grown here (Farm required to work on orchards)",COST:[{resource:Su.LOG,amount:5}],WEATHER:[{weather:Gu.RAIN,effect:50},{weather:Gu.SUN,effect:50},{weather:Gu.CLOUDS,effect:-25}]},PASTURE:{BASE_POWER:1,SIZE:50,COMPLEXITY:3,DESCRIPTION:"Many animals can be grown here (Farm required to work on pastures). <br>After building pasture and selecting animal type it is possible to use hunter lodges to tame animals or buy them from market.<br>Animals start to breed if there are at least two of them in a pasture.",COST:[{resource:Su.LOG,amount:10},{resource:Su.PLANK,amount:20}]},WINERY:{BASE_POWER:1,SIZE:25,COMPLEXITY:10,DESCRIPTION:"Extracts and ferments grape juices",COST:[{resource:Su.LOG,amount:20},{resource:Su.PLANK,amount:20},{resource:Su.COPPER,amount:10}],TEXT:"fermenting",INPUT_RESOURCES:[{resource:Su.GRAPE,amount:35}],OUTPUT_RESOURCES:[{resource:Su.WINE,amount:8}]}},SEA:{FISHERS_HUT:{BASE_POWER:5,SIZE:5,COMPLEXITY:5,DESCRIPTION:"Fishers catch fish in the sea",COST:[{resource:Su.LOG,amount:10},{resource:Su.PLANK,amount:5},{resource:Su.COPPER,amount:1}],WEATHER:[{weather:Gu.RAIN,effect:25},{weather:Gu.STORM,effect:-100},{weather:Gu.WIND,effect:25}]},SCHOOL_OF_FISH:{FISH_FOOD_DAYS:60,BREED_CHANCE:400,BREED_AMOUNT:10,SPLIT_THRESHOLD:400,SPLIT_CHANCE:100,NEW_SCHOOL_CHANCE:100,NEW_SCHOOL_SIZE:50},SHARKS:{FEED_CHANCE:15,FEED_AMOUNT:1,BREED_THRESHOLD:500,BREED_CHANCE:100,DIE_THRESHOLD:300,DIE_CHANCE:100}},PLATEAU:{STONEHENGE:{BASE_POWER:3,SIZE:50,COMPLEXITY:0,DESCRIPTION:"Huge rocks mark place for old rituals and scientific experiments",COST:[],STAGES:[{cost:[{resource:Su.STONE_SHOVEL,amount:10},{resource:Su.STONE_PICKAXE,amount:10},{resource:Su.STONE_HAMMER,amount:10}],progress:10},{cost:[{resource:Su.LOG,amount:50},{resource:Su.PLANK,amount:50}],progress:10},{cost:[{resource:Su.LOG,amount:50},{resource:Su.PLANK,amount:50}],progress:10},{cost:[{resource:Su.STONE,amount:100}],progress:10},{cost:[{resource:Su.CUT_STONE,amount:100}],progress:10},{cost:[{resource:Su.STONE,amount:100}],progress:10},{cost:[{resource:Su.CUT_STONE,amount:100}],progress:10},{cost:[{resource:Su.LOG,amount:50},{resource:Su.PLANK,amount:50}],progress:10},{cost:[{resource:Su.STONE,amount:100}],progress:10},{cost:[{resource:Su.CUT_STONE,amount:100}],progress:10}],BUILDING_EFFECTS:[{building:Ou.WORKSHOP,value:20},{building:Ou.MANUFACTURE,value:10}],RP:20},PYRAMID:{BASE_POWER:3,SIZE:100,COMPLEXITY:0,DESCRIPTION:"Although it's just \"putting one rock on the other\", our construction worker's skill will be put to the test with this huge project",COST:[],STAGES:[{cost:[{resource:Su.STONE_SHOVEL,amount:10},{resource:Su.STONE_PICKAXE,amount:10},{resource:Su.STONE_HAMMER,amount:10}],progress:10},{cost:[{resource:Su.CUT_STONE,amount:50}],progress:10},{cost:[{resource:Su.LOG,amount:50},{resource:Su.PLANK,amount:50}],progress:10},{cost:[{resource:Su.CUT_STONE,amount:100}],progress:10},{cost:[{resource:Su.LOG,amount:50},{resource:Su.PLANK,amount:50}],progress:10},{cost:[{resource:Su.CUT_STONE,amount:100}],progress:10},{cost:[{resource:Su.LOG,amount:50},{resource:Su.PLANK,amount:50}],progress:10},{cost:[{resource:Su.CUT_STONE,amount:100}],progress:5},{cost:[{resource:Su.CUT_STONE,amount:100}],progress:5},{cost:[{resource:Su.LOG,amount:50},{resource:Su.PLANK,amount:50}],progress:10},{cost:[{resource:Su.CUT_STONE,amount:100}],progress:5},{cost:[{resource:Su.CUT_STONE,amount:100}],progress:5}],BUILDING_EFFECTS:[{building:Ou.CONSTRUCTION,value:10},{building:Ou.DECONSTRUCTION,value:10}],RP:20},HANGING_GARDEN:{BASE_POWER:3,SIZE:30,COMPLEXITY:0,DESCRIPTION:"With all those plants that cover entire buildings we truly became masters of flora",COST:[],STAGES:[{cost:[{resource:Su.STONE_SHOVEL,amount:10},{resource:Su.STONE_HAMMER,amount:10},{resource:Su.STONE_AXE,amount:10}],progress:10},{cost:[{resource:Su.LOG,amount:100},{resource:Su.PLANK,amount:50}],progress:10},{cost:[{resource:Su.BERRY,amount:75},{resource:Su.MUSHROOM,amount:75}],progress:10},{cost:[{resource:Su.STONE_SHOVEL,amount:20}],progress:10},{cost:[{resource:Su.WHEAT,amount:100}],progress:10},{cost:[{resource:Su.BARLEY,amount:100}],progress:10},{cost:[{resource:Su.APPLE,amount:100}],progress:10},{cost:[{resource:Su.HOP,amount:100}],progress:10},{cost:[{resource:Su.COTTON,amount:100}],progress:10},{cost:[{resource:Su.GRAPE,amount:100}],progress:10}],BUILDING_EFFECTS:[{building:Ou.FARM,value:15}],RP:20},COLOSSUS:{BASE_POWER:3,SIZE:50,COMPLEXITY:0,DESCRIPTION:"This giant statue watches over our troops both during defense and attack",COST:[],STAGES:[{cost:[{resource:Su.STONE_SHOVEL,amount:10},{resource:Su.STONE_PICKAXE,amount:10},{resource:Su.STONE_HAMMER,amount:10}],progress:10},{cost:[{resource:Su.LOG,amount:100},{resource:Su.PLANK,amount:50}],progress:10},{cost:[{resource:Su.STONE,amount:75},{resource:Su.CUT_STONE,amount:75}],progress:10},{cost:[{resource:Su.LOG,amount:100},{resource:Su.PLANK,amount:50}],progress:10},{cost:[{resource:Su.STONE,amount:75},{resource:Su.CUT_STONE,amount:75}],progress:10},{cost:[{resource:Su.LOG,amount:100},{resource:Su.PLANK,amount:50}],progress:10},{cost:[{resource:Su.STONE,amount:75},{resource:Su.CUT_STONE,amount:75}],progress:10},{cost:[{resource:Su.LOG,amount:100},{resource:Su.PLANK,amount:50}],progress:10},{cost:[{resource:Su.STONE,amount:75},{resource:Su.CUT_STONE,amount:75}],progress:10},{cost:[{resource:Su.COPPER,amount:100},{resource:Su.STONE_HAMMER,amount:20}],progress:10}],ARMY_EFFECTS:[{troop:_u.ALL,value:15}],RP:20},UNDERGROUND_CITY:{BASE_POWER:3,SIZE:0,COMPLEXITY:0,DESCRIPTION:"After connecting empty mines tunnels and repurposing them we will create entire underground city",COST:[],STAGES:[{cost:[{resource:Su.STONE_SHOVEL,amount:10},{resource:Su.STONE_HAMMER,amount:10},{resource:Su.STONE_PICKAXE,amount:10}],progress:10},{cost:[{resource:Su.LOG,amount:100}],progress:10},{cost:[{resource:Su.STONE_SHOVEL,amount:20},{resource:Su.STONE_HAMMER,amount:20},{resource:Su.STONE_PICKAXE,amount:20}],progress:10},{cost:[{resource:Su.LOG,amount:100}],progress:10},{cost:[{resource:Su.STONE_SHOVEL,amount:20},{resource:Su.STONE_HAMMER,amount:20},{resource:Su.STONE_PICKAXE,amount:20}],progress:10},{cost:[{resource:Su.LOG,amount:100}],progress:10},{cost:[{resource:Su.STONE_SHOVEL,amount:20},{resource:Su.STONE_HAMMER,amount:20},{resource:Su.STONE_PICKAXE,amount:20}],progress:10},{cost:[{resource:Su.LOG,amount:100}],progress:10},{cost:[{resource:Su.STONE_SHOVEL,amount:20},{resource:Su.STONE_HAMMER,amount:20},{resource:Su.STONE_PICKAXE,amount:20}],progress:10},{cost:[{resource:Su.LOG,amount:50},{resource:Su.CUT_STONE,amount:50}],progress:10}],BUILDING_EFFECTS:[{building:Ou.DEEP_MINE,value:15},{building:Ou.PIT_MINE,value:15},{building:Ou.QUARRY,value:15},{building:Ou.GEOLOGIST,value:15}],RP:20},GREAT_LIGHTHOUSE:{BASE_POWER:3,SIZE:50,COMPLEXITY:0,DESCRIPTION:"Light from this building can be seen as far as anyone would like to ever travel",COST:[],STAGES:[{cost:[{resource:Su.STONE_SHOVEL,amount:10},{resource:Su.STONE_HAMMER,amount:10},{resource:Su.STONE_PICKAXE,amount:10}],progress:10},{cost:[{resource:Su.LOG,amount:100},{resource:Su.PLANK,amount:50}],progress:10},{cost:[{resource:Su.CUT_STONE,amount:100}],progress:10},{cost:[{resource:Su.LOG,amount:100},{resource:Su.PLANK,amount:50}],progress:10},{cost:[{resource:Su.CUT_STONE,amount:100}],progress:10},{cost:[{resource:Su.LOG,amount:100},{resource:Su.PLANK,amount:50}],progress:10},{cost:[{resource:Su.CUT_STONE,amount:100}],progress:10},{cost:[{resource:Su.LOG,amount:100},{resource:Su.PLANK,amount:50}],progress:10},{cost:[{resource:Su.CUT_STONE,amount:100}],progress:10},{cost:[{resource:Su.PLANK,amount:100}],progress:10}],BUILDING_EFFECTS:[],RP:30},SACRED_GROVE:{BASE_POWER:3,SIZE:50,COMPLEXITY:0,DESCRIPTION:"Collection of the oldest and greatest forest fauna and flora in one place",COST:[],STAGES:[{cost:[{resource:Su.STONE_SHOVEL,amount:10},{resource:Su.STONE_HAMMER,amount:10},{resource:Su.STONE_PICKAXE,amount:10}],progress:10},{cost:[{resource:Su.BERRY,amount:100},{resource:Su.MUSHROOM,amount:100}],progress:10},{cost:[{resource:Su.CHICKEN,amount:20},{resource:Su.HORSE,amount:10},{resource:Su.PIG,amount:10}],progress:10},{cost:[{resource:Su.BERRY,amount:200},{resource:Su.MUSHROOM,amount:200}],progress:10},{cost:[{resource:Su.BERRY,amount:100},{resource:Su.MUSHROOM,amount:100}],progress:10},{cost:[{resource:Su.CHICKEN,amount:20},{resource:Su.HORSE,amount:10},{resource:Su.PIG,amount:10}],progress:10},{cost:[{resource:Su.BERRY,amount:100},{resource:Su.MUSHROOM,amount:100}],progress:10},{cost:[{resource:Su.CHICKEN,amount:20},{resource:Su.HORSE,amount:10},{resource:Su.PIG,amount:10}],progress:10},{cost:[{resource:Su.BERRY,amount:100},{resource:Su.MUSHROOM,amount:100}],progress:10},{cost:[{resource:Su.BERRY,amount:200},{resource:Su.MUSHROOM,amount:200}],progress:10}],BUILDING_EFFECTS:[{building:Ou.FORESTER,value:10},{building:Ou.LOGGERS_HUT,value:10},{building:Ou.HUNTER_LODGE,value:10},{building:Ou.GATHERER,value:10}],RP:20},ASCENSION_TEMPLE:{BASE_POWER:1.5,SIZE:100,COMPLEXITY:0,DESCRIPTION:"Mystical place where your fate will be determined",COST:[],STAGES:[{cost:[{resource:Su.STONE_SHOVEL,amount:10},{resource:Su.STONE_HAMMER,amount:10},{resource:Su.STONE_PICKAXE,amount:10}],progress:5},{cost:[{resource:Su.LOG,amount:100},{resource:Su.PLANK,amount:100}],progress:5},{cost:[{resource:Su.CUT_STONE,amount:100},{resource:Su.PLANK,amount:100}],progress:10},{cost:[{resource:Su.COPPER,amount:50},{resource:Su.IRON,amount:50},{resource:Su.STEEL,amount:50},{resource:Su.GOLD,amount:50},{resource:Su.SILVER,amount:50}],progress:10},{cost:[{resource:Su.CUT_STONE,amount:100},{resource:Su.PLANK,amount:100}],progress:10},{cost:[{resource:Su.COPPER,amount:50},{resource:Su.IRON,amount:50},{resource:Su.STEEL,amount:50},{resource:Su.GOLD,amount:50},{resource:Su.SILVER,amount:50}],progress:10},{cost:[{resource:Su.CUT_STONE,amount:100},{resource:Su.PLANK,amount:100}],progress:10},{cost:[{resource:Su.COPPER,amount:50},{resource:Su.IRON,amount:50},{resource:Su.STEEL,amount:50},{resource:Su.GOLD,amount:50},{resource:Su.SILVER,amount:50}],progress:10},{cost:[{resource:Su.CUT_STONE,amount:100},{resource:Su.PLANK,amount:100}],progress:10},{cost:[{resource:Su.COPPER,amount:50},{resource:Su.IRON,amount:50},{resource:Su.STEEL,amount:50},{resource:Su.GOLD,amount:50},{resource:Su.SILVER,amount:50}],progress:10},{cost:[{resource:Su.GOLD,amount:100},{resource:Su.SILVER,amount:100}],progress:10}],RP:50}},CONSTRUCTION_SITE:{BASE_POWER:10,SIZE:0,COMPLEXITY:0,DESCRIPTION:"",COST:[],WEATHER:[{weather:Gu.RAIN,effect:-75},{weather:Gu.STORM,effect:-100}]},DECONSTRUCTION_SITE:{BASE_POWER:10,SIZE:0,COMPLEXITY:0,DESCRIPTION:"",COST:[],WEATHER:[{weather:Gu.RAIN,effect:-75},{weather:Gu.STORM,effect:-100}]}},io={getResource(e){const n=this.getResources().find(n=>n[0]===Su[e]);if(n)return n[1];console.warn("Invalid resource: "+Pu.prepareResourceName(e))},getResourcesByType(e){const n=this.getResources().filter(n=>n[1].TYPES.includes(e));if(n)return n;console.warn("Invalid resource type: "+Pu.prepareResourceTypeName(e))},getResources(){return Object.entries(this.RAW).concat(Object.entries(this.PROCESSED)).concat(Object.entries(this.FOOD)).concat(Object.entries(this.TOOLS))},DEFAULT_AMOUNT:0,DEFAULT_LIMIT:50,DEFAULT_VISIBLE:!1,DEFAULT_HIGHLIGHTED:!1,RAW:{LOG:{TYPES:[Iu.RAW,Iu.FUEL],TRADE_VALUE:2,AMOUNT:20,LIMIT:100,VISIBLE:!0,HIGHLIGHTED:!0,FUEL_PRIORITY:3,POWER:10},BRUSHWOOD:{TYPES:[Iu.RAW,Iu.FUEL],TRADE_VALUE:1,AMOUNT:20,LIMIT:100,VISIBLE:!0,HIGHLIGHTED:!0,FUEL_PRIORITY:4,POWER:5.5},STONE:{TYPES:[Iu.RAW],TRADE_VALUE:3,AMOUNT:20,LIMIT:100,VISIBLE:!0},FUR:{TYPES:[Iu.RAW],TRADE_VALUE:3},WHEAT:{TYPES:[Iu.RAW],TRADE_VALUE:2},BARLEY:{TYPES:[Iu.RAW],TRADE_VALUE:3},HOP:{TYPES:[Iu.RAW],TRADE_VALUE:3},COTTON:{TYPES:[Iu.RAW],TRADE_VALUE:3},WOOL:{TYPES:[Iu.RAW],TRADE_VALUE:3},HERBS:{TYPES:[Iu.RAW],TRADE_VALUE:2},HAY:{TYPES:[Iu.RAW],TRADE_VALUE:2},CHICKEN:{TYPES:[Iu.RAW,Iu.ANIMAL],LIMIT:0,SIZE:2,MEAT:4,REPRODUCTION_SPEED:6,BUTCHERING_DIFFICULTY:1,TRADE_VALUE:20},SHEEP:{TYPES:[Iu.RAW,Iu.ANIMAL],LIMIT:0,SIZE:3,MEAT:8,REPRODUCTION_SPEED:4,BUTCHERING_DIFFICULTY:1,TRADE_VALUE:25},COW:{TYPES:[Iu.RAW,Iu.ANIMAL],LIMIT:0,SIZE:5,MEAT:30,REPRODUCTION_SPEED:1,BUTCHERING_DIFFICULTY:3,TRADE_VALUE:40},PIG:{TYPES:[Iu.RAW,Iu.ANIMAL],LIMIT:0,SIZE:3,MEAT:15,REPRODUCTION_SPEED:5,BUTCHERING_DIFFICULTY:3,TRADE_VALUE:30},HORSE:{TYPES:[Iu.RAW,Iu.ANIMAL],LIMIT:0,SIZE:5,MEAT:10,REPRODUCTION_SPEED:1,BUTCHERING_DIFFICULTY:5,TRADE_VALUE:50},COAL:{TYPES:[Iu.RAW,Iu.FUEL],TRADE_VALUE:8,FUEL_PRIORITY:2,POWER:50},GOLD_ORE:{TYPES:[Iu.RAW],TRADE_VALUE:40},SILVER_ORE:{TYPES:[Iu.RAW],TRADE_VALUE:20},COPPER_ORE:{TYPES:[Iu.RAW],TRADE_VALUE:13},TIN_ORE:{TYPES:[Iu.RAW],TRADE_VALUE:20},IRON_ORE:{TYPES:[Iu.RAW],TRADE_VALUE:40}},PROCESSED:{PLANK:{TYPES:[Iu.PROCESSED,Iu.FUEL],TRADE_VALUE:3,VISIBLE:!0,FUEL_PRIORITY:5,POWER:20},CUT_STONE:{TYPES:[Iu.PROCESSED],TRADE_VALUE:5},FUEL:{TYPES:[Iu.PROCESSED,Iu.FUEL],TRADE_VALUE:3,FUEL_PRIORITY:1,POWER:12.5},FLOUR:{TYPES:[Iu.PROCESSED],TRADE_VALUE:3},FABRIC:{TYPES:[Iu.PROCESSED],TRADE_VALUE:7},LEATHER:{TYPES:[Iu.PROCESSED],TRADE_VALUE:4},PAPER:{TYPES:[Iu.PROCESSED],TRADE_VALUE:8},COINS:{TYPES:[Iu.PROCESSED],TRADE_VALUE:1,LIMIT:Number.MAX_SAFE_INTEGER},COPPER:{TYPES:[Iu.PROCESSED],TRADE_VALUE:32},GOLD:{TYPES:[Iu.PROCESSED],TRADE_VALUE:90},SILVER:{TYPES:[Iu.PROCESSED],TRADE_VALUE:45},TIN:{TYPES:[Iu.PROCESSED],TRADE_VALUE:45},BRONZE:{TYPES:[Iu.PROCESSED],TRADE_VALUE:50},IRON:{TYPES:[Iu.PROCESSED],TRADE_VALUE:135},STEEL:{TYPES:[Iu.PROCESSED],TRADE_VALUE:190},FISH_FOOD:{TYPES:[Iu.PROCESSED],TRADE_VALUE:5}},FOOD:{BERRY:{TYPES:[Iu.FOOD,Iu.CONSUMABLE],TRADE_VALUE:2,AMOUNT:50,LIMIT:100,VISIBLE:!0,HIGHLIGHTED:!0,POWER:50},MUSHROOM:{TYPES:[Iu.FOOD,Iu.CONSUMABLE],TRADE_VALUE:2,AMOUNT:50,LIMIT:100,VISIBLE:!0,HIGHLIGHTED:!0,POWER:50},FISH:{TYPES:[Iu.FOOD,Iu.CONSUMABLE],TRADE_VALUE:3,POWER:75},APPLE:{TYPES:[Iu.FOOD,Iu.CONSUMABLE],TRADE_VALUE:1,POWER:25},GRAPE:{TYPES:[Iu.FOOD,Iu.CONSUMABLE],TRADE_VALUE:1,POWER:20},BREAD:{TYPES:[Iu.FOOD,Iu.CONSUMABLE],TRADE_VALUE:10,POWER:300},MEAT:{TYPES:[Iu.FOOD,Iu.CONSUMABLE],TRADE_VALUE:3,POWER:75},EGG:{TYPES:[Iu.FOOD,Iu.CONSUMABLE],TRADE_VALUE:1,POWER:25},MILK:{TYPES:[Iu.FOOD,Iu.CONSUMABLE],TRADE_VALUE:1,POWER:25},CHEESE:{TYPES:[Iu.FOOD,Iu.CONSUMABLE],TRADE_VALUE:10,POWER:200},COOKED_FISH:{TYPES:[Iu.FOOD,Iu.CONSUMABLE],TRADE_VALUE:7,POWER:175},COOKED_MEAT:{TYPES:[Iu.FOOD,Iu.CONSUMABLE],TRADE_VALUE:7,POWER:175},VEGETABLE_SOUP:{TYPES:[Iu.FOOD,Iu.CONSUMABLE],TRADE_VALUE:8,POWER:225},MEAT_SOUP:{TYPES:[Iu.FOOD,Iu.CONSUMABLE],TRADE_VALUE:8,POWER:225},BEER:{TYPES:[Iu.FOOD],TRADE_VALUE:5},WINE:{TYPES:[Iu.FOOD],TRADE_VALUE:10},HERBAL_MEDICINE:{TYPES:[Iu.FOOD],TRADE_VALUE:15}},TOOLS:{CLOTHES:{TYPES:[Iu.TOOLS],VISIBLE:!0,AMOUNT:10,TRADE_VALUE:25},BOW:{TYPES:[Iu.TOOLS],TRADE_VALUE:35},STONE_PICKAXE:{TYPES:[Iu.TOOLS],TRADE_VALUE:35},STONE_SHOVEL:{TYPES:[Iu.TOOLS],TRADE_VALUE:35},STONE_AXE:{TYPES:[Iu.TOOLS],TRADE_VALUE:35},STONE_SPEAR:{TYPES:[Iu.TOOLS],TRADE_VALUE:35},STONE_HAMMER:{TYPES:[Iu.TOOLS],TRADE_VALUE:35},SWORD:{TYPES:[Iu.TOOLS],TRADE_VALUE:190},WOODEN_SHIELD:{TYPES:[Iu.TOOLS],TRADE_VALUE:30},LEATHER_ARMOR:{TYPES:[Iu.TOOLS],TRADE_VALUE:50},LIGHT_ARMOR:{TYPES:[Iu.TOOLS],TRADE_VALUE:400},HEAVY_ARMOR:{TYPES:[Iu.TOOLS],TRADE_VALUE:550}}},ro={getTroop(e){const n=Object.entries(this.TROOPS).find(n=>n[0]===_u[e]);if(n)return n[1];console.warn("Invalid troop: "+Pu.prepareTroopName(e))},getMission(e){const n=Object.entries(this.MISSIONS).find(n=>n[0]===Tu[e]);if(n)return n[1];console.warn("Invalid mission: "+Pu.prepareMissionName(e))},TROOPS:{SPY:{RECRUIT_TIME:20,STRENGTH:0,DEFENSE:1,PAY:5,COST:[{resource:Su.CLOTHES,amount:1},{resource:Su.COINS,amount:50}]},MILITIA:{RECRUIT_TIME:5,STRENGTH:1,DEFENSE:2,PAY:0,COST:[{resource:Su.FUR,amount:5}],AI_COST:3},SPEARMAN:{RECRUIT_TIME:15,STRENGTH:5,DEFENSE:2,PAY:2,COST:[{resource:Su.STONE_SPEAR,amount:1},{resource:Su.LEATHER_ARMOR,amount:1}],AI_COST:6},ARCHER:{RECRUIT_TIME:15,STRENGTH:3,DEFENSE:4,PAY:2,COST:[{resource:Su.BOW,amount:1},{resource:Su.LEATHER_ARMOR,amount:1}],AI_COST:6},SWORDSMAN:{RECRUIT_TIME:25,STRENGTH:8,DEFENSE:4,PAY:5,COST:[{resource:Su.SWORD,amount:1},{resource:Su.WOODEN_SHIELD,amount:1},{resource:Su.LEATHER_ARMOR,amount:1}],AI_COST:10},LIGHT_CAVALRY:{RECRUIT_TIME:35,STRENGTH:15,DEFENSE:6,PAY:10,COST:[{resource:Su.HORSE,amount:1},{resource:Su.SWORD,amount:1},{resource:Su.LIGHT_ARMOR,amount:1}],AI_COST:15}},MISSIONS:{MOVE:{TIME:3,ICON:"move",DESCRIPTION:"Connect this unowned land to your kingdom",COST:[{resource:Su.FOOD,amount:20}]},BUILD:{TIME:10,ICON:"build",DESCRIPTION:"Improve region defenses",COST:[{resource:Su.LOG,amount:20},{resource:Su.CUT_STONE,amount:20}]},COLONIZE:{TIME:3,ICON:"colonize",DESCRIPTION:"Connect this unowned land to your kingdom",COST:[{resource:Su.FOOD,amount:200},{resource:Su.LOG,amount:3},{resource:Su.BRUSHWOOD,amount:2},{resource:Su.FUEL,amount:1}]},SPY:{TIME:9,ICON:"spy",DESCRIPTION:"Try to find out military strength of the enemy and region wealth",COST:[{resource:Su.FOOD,amount:100}]},PLUNDER:{TIME:1,ICON:"plunder",DESCRIPTION:"Plunder your enemies",COST:[{resource:Su.FOOD,amount:100}]},CONQUER:{TIME:2,ICON:"conquer",DESCRIPTION:"Conquer your enemies and claim their land",COST:[{resource:Su.FOOD,amount:200}]}}},so={getCrop(e){const n=this.getCrops().find(n=>n[0]===Cu[e]);if(n)return n[1];console.warn("Invalid crop: "+Pu.prepareCropName(e))},getCrops(){return Object.entries(this.FIELD).concat(Object.entries(this.ORCHARD))},FIELD:{WHEAT:{CROP:Cu.WHEAT,GROWTH:20,YIELD_MULTIPLIER:2},BARLEY:{CROP:Cu.BARLEY,GROWTH:20,YIELD_MULTIPLIER:2,PREREQUISITE:bu.BARLEY},HAY:{CROP:Cu.HAY,GROWTH:10,YIELD_MULTIPLIER:1.5},HOP:{CROP:Cu.HOP,GROWTH:20,YIELD_MULTIPLIER:2,PREREQUISITE:bu.HOPS},HERBS:{CROP:Cu.HERBS,GROWTH:20,YIELD_MULTIPLIER:4,PREREQUISITE:bu.HERBALISM},MUSHROOM:{CROP:Cu.MUSHROOM,GROWTH:10,YIELD_MULTIPLIER:1},COTTON:{CROP:Cu.COTTON,GROWTH:20,YIELD_MULTIPLIER:2,PREREQUISITE:bu.COTTON}},ORCHARD:{BERRY:{CROP:Cu.BERRY,GROWTH:25,FRUITING:15,YIELD_MULTIPLIER:1},GRAPE:{CROP:Cu.GRAPE,GROWTH:50,FRUITING:15,YIELD_MULTIPLIER:1},APPLE:{CROP:Cu.APPLE,GROWTH:75,FRUITING:25,YIELD_MULTIPLIER:2}}},uo={SCIENTIFIC_METHOD:{CATEGORY:ku.SCIENCE,COST:[],RESEARCH_POINT:5,DESCRIPTION:"Maybe there is something we don't know about yet?",FINISH_DESCRIPTION:"We learned how to research things",PREREQUISITES:[],FINISH:function(e){e.getService(xu.LOG).log("New research projects unlocked")}},FORESIGHT:{CATEGORY:ku.SCIENCE,COST:[],RESEARCH_POINT:20,DESCRIPTION:"If only we knew what we don't know",FINISH_DESCRIPTION:"We gained insight into what can be researched in close future",PREREQUISITES:[vu.SCIENTIFIC_METHOD],FINISH:function(e){e.getService(xu.RESEARCH).increaseForesight(1),e.getService(xu.LOG).log("Foresight level increased")}},CARTOGRAPHY:{CATEGORY:ku.SCIENCE,COST:[],RESEARCH_POINT:50,DESCRIPTION:"What if we combine all the information we get from visitors and scouts?",FINISH_DESCRIPTION:"We unlocked world map and gained insight into what happens in the world",PREREQUISITES:[vu.FORESIGHT],FINISH:function(e){e.getService(xu.GAME).enable(bu.CARTOGRAPHY),e.getService(xu.LOG).log("World map unlocked")}},MANAGEMENT:{CATEGORY:ku.GENERAL,COST:[],RESEARCH_POINT:30,DESCRIPTION:"Maybe we could make some hard decisions which could help us survive?",FINISH_DESCRIPTION:"Now we have access to many management options",PREREQUISITES:[vu.FORESIGHT],FINISH:function(e){e.getService(xu.GAME).enable(bu.MANAGEMENT),e.getService(xu.LOG).log("Management tab unlocked")}},FISHING:{CATEGORY:ku.AGRICULTURE,COST:[{resource:Su.BERRY,amount:20}],RESEARCH_POINT:30,DESCRIPTION:"Could there be something edible in the water?",FINISH_DESCRIPTION:"We learned how to get fish out of the sea",PREREQUISITES:[vu.SCIENTIFIC_METHOD],FINISH:function(e){e.getService(xu.GAME).enable(bu.SEA),e.getService(xu.LOG).log("Sea unlocked"),e.getService(xu.GAME).enable(bu.FISHERS_HUT),e.getService(xu.LOG).log("Fisher's hut invented")}},FISH_FOOD:{CATEGORY:ku.AGRICULTURE,COST:[{resource:Su.WHEAT,amount:20}],RESEARCH_POINT:30,DESCRIPTION:"Is it possible to lure more fish?",FINISH_DESCRIPTION:"There will be more fish if we feed them wheat",PREREQUISITES:[vu.FISHING],FINISH:function(e){e.getService(xu.GAME).enable(bu.FISH_FOOD),e.getService(xu.RESOURCES).increaseResource(Su.FISH_FOOD,2,"Research",!0)}},ANIMALS:{CATEGORY:ku.AGRICULTURE,COST:[{resource:Su.HAY,amount:20}],RESEARCH_POINT:70,DESCRIPTION:"Is it possible to breed animals near farms?",FINISH_DESCRIPTION:"Now we know how to breed animals on pastures",PREREQUISITES:[vu.AGRICULTURE,vu.HUNTING],FINISH:function(e){e.getService(xu.GAME).enable(bu.PASTURE),e.getService(xu.LOG).log("Pastures invented"),e.getService(xu.GAME).enable(bu.BUTCHER),e.getService(xu.LOG).log("Butcher invented")}},TRADE:{CATEGORY:ku.GENERAL,COST:[],RESEARCH_POINT:50,DESCRIPTION:"If others have resources we need maybe we could trade with them?",FINISH_DESCRIPTION:"We learned how to trade on marketplace",PREREQUISITES:[vu.MANAGEMENT,vu.CARTOGRAPHY],FINISH:function(e){e.getService(xu.GAME).enable(bu.MARKETPLACE),e.getService(xu.LOG).log("Marketplace invented"),e.getService(xu.RESOURCES).makeVisible(Su.COINS)}},TANNERY:{CATEGORY:ku.TECHNOLOGY,COST:[{resource:Su.FUR,amount:20}],RESEARCH_POINT:50,DESCRIPTION:"Could we use dead animals fur in our advantage?",FINISH_DESCRIPTION:"Tanned fur is much better for armour",PREREQUISITES:[vu.SCIENTIFIC_METHOD,vu.HUNTING],FINISH:function(e){e.getService(xu.GAME).enable(bu.TANNERY),e.getService(xu.LOG).log("Tannery invented"),e.getService(xu.RECIPE).enable(Mu.LEATHER)}},COTTON:{CATEGORY:ku.AGRICULTURE,COST:[],RESEARCH_POINT:50,DESCRIPTION:"Maybe we can plant cotton?",FINISH_DESCRIPTION:"Now we can plant cotton on fields",PREREQUISITES:[vu.AGRICULTURE],FINISH:function(e){e.getService(xu.GAME).enable(bu.COTTON),e.getService(xu.LOG).log("Cotton planting unlocked"),e.getService(xu.RESOURCES).makeVisible(Su.COTTON)}},PARCHMENT:{CATEGORY:ku.TECHNOLOGY,COST:[{resource:Su.FUR,amount:10}],RESEARCH_POINT:50,DESCRIPTION:"What if we make leather even thinner?",FINISH_DESCRIPTION:"We learned how to make parchment (paper) out of fur",PREREQUISITES:[vu.TANNERY],FINISH:function(e){e.getService(xu.LOG).log("Parchment recipe unlocked"),e.getService(xu.RESOURCES).makeVisible(Su.PAPER),e.getService(xu.RECIPE).enable(Mu.PARCHMENT)}},PAPER_MILL:{CATEGORY:ku.TECHNOLOGY,COST:[{resource:Su.PAPER,amount:5}],RESEARCH_POINT:50,DESCRIPTION:"Maybe we could use trees to make paper?",FINISH_DESCRIPTION:"We invented paper mill where we can produce paper from logs",PREREQUISITES:[vu.PARCHMENT,vu.SAWMILL],FINISH:function(e){e.getService(xu.LOG).log("Paper mill invented"),e.getService(xu.GAME).enable(bu.PAPER_MILL)}},HERBALISM:{CATEGORY:ku.AGRICULTURE,COST:[{resource:Su.HERBS,amount:10}],RESEARCH_POINT:100,DESCRIPTION:"Is it possible to effectively plant herbs?",FINISH_DESCRIPTION:"We learned to how to plant herbs on fields",PREREQUISITES:[vu.AGRICULTURE],FINISH:function(e){e.getService(xu.GAME).enable(bu.HERBALISM),e.getService(xu.LOG).log("Herbs planting unlocked"),e.getService(xu.RESOURCES).makeVisible(Su.HERBS)}},FABRIC:{CATEGORY:ku.TECHNOLOGY,COST:[{resource:Su.COTTON,amount:20}],RESEARCH_POINT:50,DESCRIPTION:"Could we make fabric using cotton?",FINISH_DESCRIPTION:"We invented cotton mill and ways to spint cotton into fabric",PREREQUISITES:[vu.COTTON],FINISH:function(e){e.getService(xu.GAME).enable(bu.COTTON_MILL),e.getService(xu.LOG).log("Cotton mill invented"),e.getService(xu.RECIPE).enable(Mu.FABRIC),e.getService(xu.RECIPE).enable(Mu.FABRIC_WOOL)}},TAILORING:{CATEGORY:ku.TECHNOLOGY,COST:[{resource:Su.FABRIC,amount:5},{resource:Su.FUR,amount:10}],RESEARCH_POINT:100,DESCRIPTION:"How can me make new clothes?",FINISH_DESCRIPTION:"We can now make clothes out of fabric and fur",PREREQUISITES:[vu.FABRIC],FINISH:function(e){e.getService(xu.GAME).enable(bu.TAILOR),e.getService(xu.LOG).log("Tailor invented"),e.getService(xu.RECIPE).enable(Mu.CLOTHES_FABRIC),e.getService(xu.RECIPE).enable(Mu.CLOTHES_FUR)}},ALCOHOL:{CATEGORY:ku.GENERAL,COST:[],RESEARCH_POINT:100,DESCRIPTION:"Would it boost our moods if we took some time to have fun??",FINISH_DESCRIPTION:"We learned how to plants hops and barley, how to build buildings that will make alcohol and tavern where we can drink it",PREREQUISITES:[vu.SCIENTIFIC_METHOD,vu.COOKING,vu.AGRICULTURE],FINISH:function(e){e.getService(xu.GAME).enable(bu.ALCOHOL),e.getService(xu.GAME).enable(bu.TAVERN),e.getService(xu.LOG).log("Tavern invented"),e.getService(xu.GAME).enable(bu.BREWERY),e.getService(xu.LOG).log("Brewery invented"),e.getService(xu.GAME).enable(bu.WINERY),e.getService(xu.LOG).log("Winery invented"),e.getService(xu.GAME).enable(bu.BARLEY),e.getService(xu.LOG).log("Barley planting unlocked"),e.getService(xu.RESOURCES).makeVisible(Su.BARLEY),e.getService(xu.GAME).enable(bu.HOPS),e.getService(xu.LOG).log("Hops planting unlocked"),e.getService(xu.RESOURCES).makeVisible(Su.HOP),e.getService(xu.RESOURCES).makeVisible(Su.BEER),e.getService(xu.RESOURCES).makeVisible(Su.WINE)}},CALENDAR:{CATEGORY:ku.SCIENCE,COST:[{resource:Su.LOG,amount:10}],RESEARCH_POINT:30,DESCRIPTION:"Is there some pattern to seasons?",FINISH_DESCRIPTION:"Now we know what day it is today",PREREQUISITES:[vu.SCIENTIFIC_METHOD],FINISH:function(e){e.getService(xu.GAME).enable(bu.CALENDAR),e.getService(xu.LOG).log("We are now able to track years and seasons")}},WEATHER:{CATEGORY:ku.SCIENCE,COST:[{resource:Su.LOG,amount:10},{resource:Su.STONE,amount:10},{resource:Su.PLANK,amount:10}],RESEARCH_POINT:50,DESCRIPTION:"Would it be good to know the weather in advance?",FINISH_DESCRIPTION:"We can now predict weather for a few days ahead",PREREQUISITES:[vu.FORESIGHT],FINISH:function(e){e.getService(xu.GAME).enable(bu.WEATHER),e.getService(xu.LOG).log("We now can predict weather"),e.getService(xu.WEATHER).increaseForecastPeriod(4)}},AGRICULTURE:{CATEGORY:ku.AGRICULTURE,COST:[{resource:Su.LOG,amount:10},{resource:Su.BERRY,amount:20},{resource:Su.WHEAT,amount:20},{resource:Su.STONE_SHOVEL,amount:5}],RESEARCH_POINT:100,DESCRIPTION:"Why should we risk looking for food in the forest if we can grow it it the open?",FINISH_DESCRIPTION:"We discovered how to build farms and cultivate crops on fields and orchards",PREREQUISITES:[vu.WEATHER,vu.CALENDAR,vu.STONE_SHOVEL],FINISH:function(e){e.getService(xu.GAME).enable(bu.FIELD),e.getService(xu.LOG).log("Field unlocked"),e.getService(xu.GAME).enable(bu.FARM),e.getService(xu.LOG).log("Farm invented"),e.getService(xu.RESOURCES).makeVisible(Su.WHEAT),e.getService(xu.RESOURCES).makeVisible(Su.BARLEY),e.getService(xu.RESOURCES).makeVisible(Su.HAY),e.getService(xu.RESOURCES).makeVisible(Su.APPLE),e.getService(xu.RESOURCES).makeVisible(Su.GRAPE)}},BOW:{CATEGORY:ku.GENERAL,COST:[{resource:Su.LOG,amount:20},{resource:Su.BRUSHWOOD,amount:20}],RESEARCH_POINT:25,DESCRIPTION:"Could we kill without coming closer?",FINISH_DESCRIPTION:"We learned how to craft bows",PREREQUISITES:[vu.SCIENTIFIC_METHOD],FINISH:function(e){e.getService(xu.RECIPE).enable(Mu.BOW)}},HUNTING:{CATEGORY:ku.GENERAL,COST:[{resource:Su.LOG,amount:5},{resource:Su.BRUSHWOOD,amount:5},{resource:Su.STONE,amount:5},{resource:Su.BOW,amount:2}],RESEARCH_POINT:50,DESCRIPTION:"What if hunted became the hunter?",FINISH_DESCRIPTION:"We learned how to hunt animals in the forest",PREREQUISITES:[vu.BOW],FINISH:function(e){e.getService(xu.GAME).enable(bu.HUNTER),e.getService(xu.LOG).log("Hunter invented")}},FIRE:{CATEGORY:ku.TECHNOLOGY,COST:[{resource:Su.BRUSHWOOD,amount:20},{resource:Su.STONE,amount:2}],RESEARCH_POINT:30,DESCRIPTION:"Would it be useful if we could start fire on demand?",FINISH_DESCRIPTION:"We discovered ways to process brushwood into more efficient fuel",PREREQUISITES:[vu.SCIENTIFIC_METHOD],FINISH:function(e){e.getService(xu.GAME).enable(bu.FIRE),e.getService(xu.RECIPE).enable(Mu.FUEL_BRUSHWOOD)}},BIGGER_FIRE:{CATEGORY:ku.TECHNOLOGY,COST:[{resource:Su.LOG,amount:10},{resource:Su.STONE,amount:2}],RESEARCH_POINT:50,DESCRIPTION:"Could we make our fire bigger and last for longer?",FINISH_DESCRIPTION:"We learned how to turn logs into fuel",PREREQUISITES:[vu.SCIENTIFIC_METHOD,vu.FIRE],FINISH:function(e){e.getService(xu.RECIPE).enable(Mu.FUEL_LOG)}},COOKING:{CATEGORY:ku.GENERAL,COST:[{resource:Su.FUEL,amount:20},{resource:Su.BERRY,amount:20},{resource:Su.MUSHROOM,amount:20}],RESEARCH_POINT:30,DESCRIPTION:"What would happen if we heat up raw food?",FINISH_DESCRIPTION:"We discovered the art of cooking. We can prepare things with more nutrition value",PREREQUISITES:[vu.SCIENTIFIC_METHOD,vu.FIRE],FINISH:function(e){e.getService(xu.RECIPE).enable(Mu.COOKED_MEAT),e.getService(xu.RECIPE).enable(Mu.COOKED_FISH),e.getService(xu.RECIPE).enable(Mu.BREAD),e.getService(xu.GAME).enable(bu.BAKERY),e.getService(xu.LOG).log("Bakery invented"),e.getService(xu.RECIPE).enable(Mu.VEGETABLE_SOUP_BERRY),e.getService(xu.RECIPE).enable(Mu.VEGETABLE_SOUP_MUSHROOM),e.getService(xu.RECIPE).enable(Mu.MEAT_SOUP),e.getService(xu.RECIPE).enable(Mu.CHEESE)}},MORTAR:{CATEGORY:ku.TECHNOLOGY,COST:[{resource:Su.STONE,amount:20}],RESEARCH_POINT:20,DESCRIPTION:"Would it be useful to grind things up?",FINISH_DESCRIPTION:"Now we can grind things up",PREREQUISITES:[vu.SCIENTIFIC_METHOD],FINISH:function(e){e.getService(xu.RECIPE).enable(Mu.FLOUR)}},STONE_SPEAR:{CATEGORY:ku.MILITARY,COST:[{resource:Su.STONE,amount:10},{resource:Su.LOG,amount:5}],RESEARCH_POINT:25,DESCRIPTION:"We would have better chance of survival if we keep enemy at distance?",FINISH_DESCRIPTION:"We learned how to craft stone spear",PREREQUISITES:[vu.SCIENTIFIC_METHOD],FINISH:function(e){e.getService(xu.RECIPE).enable(Mu.STONE_SPEAR)}},STONE_AXE:{CATEGORY:ku.GENERAL,COST:[{resource:Su.STONE,amount:10},{resource:Su.LOG,amount:5}],RESEARCH_POINT:25,DESCRIPTION:"It's probably more effective to hit trees with sharp stone?",FINISH_DESCRIPTION:"We learned how to craft stone axe",PREREQUISITES:[vu.SCIENTIFIC_METHOD],FINISH:function(e){e.getService(xu.RECIPE).enable(Mu.STONE_AXE)}},STONE_PICKAXE:{CATEGORY:ku.GENERAL,COST:[{resource:Su.STONE,amount:10},{resource:Su.LOG,amount:5}],RESEARCH_POINT:25,DESCRIPTION:"Would stone win against stone?",FINISH_DESCRIPTION:"We learned how to craft stone pickaxe",PREREQUISITES:[vu.SCIENTIFIC_METHOD],FINISH:function(e){e.getService(xu.RECIPE).enable(Mu.STONE_PICKAXE)}},STONE_HAMMER:{CATEGORY:ku.GENERAL,COST:[{resource:Su.STONE,amount:10},{resource:Su.LOG,amount:5}],RESEARCH_POINT:25,DESCRIPTION:"Can hitting with stone be easier?",FINISH_DESCRIPTION:"We learned how to craft stone hammer",PREREQUISITES:[vu.SCIENTIFIC_METHOD],FINISH:function(e){e.getService(xu.RECIPE).enable(Mu.STONE_HAMMER)}},STONE_SHOVEL:{CATEGORY:ku.GENERAL,COST:[{resource:Su.STONE,amount:10},{resource:Su.LOG,amount:5}],RESEARCH_POINT:25,DESCRIPTION:"It should be better to get your stone dirty and not your hands?",FINISH_DESCRIPTION:"We learned how to craft stone shovel",PREREQUISITES:[vu.SCIENTIFIC_METHOD],FINISH:function(e){e.getService(xu.RECIPE).enable(Mu.STONE_SHOVEL)}},MINING:{CATEGORY:ku.TECHNOLOGY,COST:[{resource:Su.LOG,amount:10},{resource:Su.STONE,amount:5},{resource:Su.STONE_PICKAXE,amount:1}],RESEARCH_POINT:50,DESCRIPTION:"If we dig deep enough maybe there is something nice?",FINISH_DESCRIPTION:"We discovered that stone can be harvested in the mountains",PREREQUISITES:[vu.SCIENTIFIC_METHOD,vu.STONE_PICKAXE],FINISH:function(e){e.getService(xu.GAME).enable(bu.MOUNTAINS),e.getService(xu.LOG).log("Mountains unlocked")}},PROSPECTING_FOR_ORE:{CATEGORY:ku.TECHNOLOGY,COST:[{resource:Su.STONE_PICKAXE,amount:10}],RESEARCH_POINT:50,DESCRIPTION:"There must be something useful under all this dirt",FINISH_DESCRIPTION:"We discovered that trained geologist can find ores deposits in the mountains",PREREQUISITES:[vu.MINING],FINISH:function(e){e.getService(xu.GAME).enable(bu.GEOLOGIST),e.getService(xu.LOG).log("Geologist invented")}},ADVANCED_PROSPECTING:{CATEGORY:ku.TECHNOLOGY,COST:[{resource:Su.STONE_PICKAXE,amount:20}],RESEARCH_POINT:75,DESCRIPTION:"There must be something even more valuable under the ground?",FINISH_DESCRIPTION:"We learned about more resources that mountains have to offer",PREREQUISITES:[vu.PROSPECTING_FOR_ORE],FINISH:function(e){e.getService(xu.GAME).enable(bu.GOLD),e.getService(xu.GAME).enable(bu.SILVER)}},MASTER_PROSPECTING:{CATEGORY:ku.TECHNOLOGY,COST:[{resource:Su.STONE_PICKAXE,amount:40}],RESEARCH_POINT:100,DESCRIPTION:"Is there anything else to find?",FINISH_DESCRIPTION:"We discovered iron",PREREQUISITES:[vu.ADVANCED_PROSPECTING],FINISH:function(e){e.getService(xu.GAME).enable(bu.IRON)}},PIT_MINE:{CATEGORY:ku.TECHNOLOGY,COST:[{resource:Su.STONE,amount:20},{resource:Su.LOG,amount:20},{resource:Su.STONE_PICKAXE,amount:10}],RESEARCH_POINT:100,DESCRIPTION:"Could we get precious resources from under the ground?",FINISH_DESCRIPTION:"We invented a way to mine ore deposits from the ground",PREREQUISITES:[vu.PROSPECTING_FOR_ORE],FLAG_PREREQUISITES:[bu.BUILT_QUARRY],FINISH:function(e){e.getService(xu.GAME).enable(bu.PIT_MINE),e.getService(xu.LOG).log("Pit mine invented"),e.getService(xu.RECIPE).enable(Mu.FUEL_COAL)}},DEEP_MINE:{CATEGORY:ku.TECHNOLOGY,COST:[{resource:Su.LOG,amount:40},{resource:Su.PLANK,amount:40},{resource:Su.CUT_STONE,amount:20},{resource:Su.STONE_PICKAXE,amount:10}],RESEARCH_POINT:100,DESCRIPTION:"Do we have to move all the dirt or could we just dig tunnels?",FINISH_DESCRIPTION:"It's now possible to build deep mines to mine ore",PREREQUISITES:[vu.PIT_MINE,vu.ADVANCED_MATHEMATICS],FLAG_PREREQUISITES:[],FINISH:function(e){e.getService(xu.GAME).enable(bu.DEEP_MINE),e.getService(xu.LOG).log("Deep mine invented")}},ORE_PROCESSING:{CATEGORY:ku.TECHNOLOGY,COST:[{resource:Su.CUT_STONE,amount:40},{resource:Su.STONE,amount:20},{resource:Su.STONE_HAMMER,amount:10},{resource:Su.COPPER_ORE,amount:20}],RESEARCH_POINT:100,DESCRIPTION:"What happens if we heat ore in fire?",FINISH_DESCRIPTION:"We discovered how to process ore into metal",PREREQUISITES:[vu.PROSPECTING_FOR_ORE],FINISH:function(e){e.getService(xu.GAME).enable(bu.SMITHY),e.getService(xu.LOG).log("Smithy invented")}},ADVANCED_ORE_PROCESSING:{CATEGORY:ku.TECHNOLOGY,COST:[{resource:Su.CUT_STONE,amount:40},{resource:Su.STONE,amount:20},{resource:Su.STONE_HAMMER,amount:5},{resource:Su.GOLD_ORE,amount:5},{resource:Su.SILVER_ORE,amount:5}],RESEARCH_POINT:150,DESCRIPTION:"What about heating other ores?",FINISH_DESCRIPTION:"We discovered how to process gold and silver ore",PREREQUISITES:[vu.ADVANCED_PROSPECTING,vu.ORE_PROCESSING],FLAG_PREREQUISITES:[bu.BUILT_SMITHY],FINISH:function(e){e.getService(xu.GAME).enable(bu.ADVANCED_ORE_PROCESSING),e.getService(xu.GAME).isEnabled(bu.BUILT_SMITHY)&&(e.getService(xu.RECIPE).enable(Mu.GOLD),e.getService(xu.RECIPE).enable(Mu.SILVER))}},MASTER_ORE_PROCESSING:{CATEGORY:ku.TECHNOLOGY,COST:[{resource:Su.CUT_STONE,amount:40},{resource:Su.STONE,amount:20},{resource:Su.STONE_HAMMER,amount:5},{resource:Su.IRON_ORE,amount:10}],RESEARCH_POINT:200,DESCRIPTION:"Can we smelt any ore we want?",FINISH_DESCRIPTION:"We learned to process iron ore",PREREQUISITES:[vu.MASTER_PROSPECTING,vu.ADVANCED_ORE_PROCESSING],FLAG_PREREQUISITES:[bu.BUILT_SMITHY],FINISH:function(e){e.getService(xu.GAME).enable(bu.IRON),e.getService(xu.GAME).isEnabled(bu.BUILT_SMITHY)&&e.getService(xu.RECIPE).enable(Mu.IRON)}},METALLURGY:{CATEGORY:ku.TECHNOLOGY,COST:[{resource:Su.COPPER,amount:10},{resource:Su.TIN,amount:10}],RESEARCH_POINT:100,DESCRIPTION:"What would happen if we mix two metals?",FINISH_DESCRIPTION:"We discovered that mixing multiple metals can give better results",PREREQUISITES:[vu.ORE_PROCESSING],FLAG_PREREQUISITES:[bu.BUILT_SMITHY],FINISH:function(e){e.getService(xu.GAME).enable(bu.BRONZE),e.getService(xu.GAME).isEnabled(bu.BUILT_SMITHY)&&e.getService(xu.RECIPE).enable(Mu.BRONZE)}},ADVANCED_METALLURGY:{CATEGORY:ku.TECHNOLOGY,COST:[{resource:Su.IRON,amount:10},{resource:Su.COAL,amount:50}],RESEARCH_POINT:200,DESCRIPTION:"Could we mix iron with coal to make it stronger?",FINISH_DESCRIPTION:"We invented steel",PREREQUISITES:[vu.MASTER_ORE_PROCESSING],FLAG_PREREQUISITES:[bu.BUILT_SMITHY,bu.IRON],FINISH:function(e){e.getService(xu.GAME).enable(bu.STEEL),e.getService(xu.GAME).isEnabled(bu.BUILT_SMITHY)&&e.getService(xu.RECIPE).enable(Mu.STEEL)}},COINS_MINTING:{CATEGORY:ku.TECHNOLOGY,COST:[{resource:Su.GOLD,amount:10},{resource:Su.SILVER,amount:20}],RESEARCH_POINT:100,DESCRIPTION:"Maybe we can make our own coins?",FINISH_DESCRIPTION:"We learned how to mint our own coins",PREREQUISITES:[vu.ADVANCED_ORE_PROCESSING],FLAG_PREREQUISITES:[bu.BUILT_SMITHY],FINISH:function(e){e.getService(xu.GAME).enable(bu.MINT),e.getService(xu.LOG).log("Mint invented")}},HOUSE:{CATEGORY:ku.TECHNOLOGY,COST:[{resource:Su.LOG,amount:50},{resource:Su.PLANK,amount:50}],RESEARCH_POINT:100,DESCRIPTION:"What if huts were bigger?",FINISH_DESCRIPTION:"We learned how to build bigger and more efficient buildings for living",PREREQUISITES:[vu.SCIENTIFIC_METHOD,vu.STONE_HAMMER,vu.STONE_SHOVEL],FINISH:function(e){e.getService(xu.GAME).enable(bu.HOUSE),e.getService(xu.LOG).log("House invented")}},LONGHOUSE:{CATEGORY:ku.TECHNOLOGY,COST:[{resource:Su.LOG,amount:50},{resource:Su.PLANK,amount:50},{resource:Su.CUT_STONE,amount:20},{resource:Su.HAY,amount:20},{resource:Su.STONE_HAMMER,amount:5}],RESEARCH_POINT:200,DESCRIPTION:"Could we house multiple families in one building?",FINISH_DESCRIPTION:"Now we can build longhouses that can house multiple families",PREREQUISITES:[vu.HOUSE,vu.AGRICULTURE],FINISH:function(e){e.getService(xu.GAME).enable(bu.LONGHOUSE),e.getService(xu.LOG).log("Longhouse invented")}},URBAN_PLANNING:{CATEGORY:ku.SCIENCE,COST:[],RESEARCH_POINT:50,DESCRIPTION:"Maybe we could rearrange buildings?",FINISH_DESCRIPTION:"Now we can combine and split some buildings like fields, orchards, pastures and warehouses",PREREQUISITES:[vu.MANAGEMENT,vu.MATHEMATICS],FINISH:function(e){e.getService(xu.GAME).enable(bu.URBAN_PLANNING)}},WONDER_BUILDINGS:{CATEGORY:ku.GENERAL,COST:[],RESEARCH_POINT:500,DESCRIPTION:"What if we built something remarkable?",FINISH_DESCRIPTION:"We learned that by building wonders we can boost future generations progress",PREREQUISITES:[vu.HOUSE,vu.URBAN_PLANNING,vu.ADVANCED_MATHEMATICS],FINISH:function(e){e.getService(xu.GAME).enable(bu.PLATEAU),e.getService(xu.LOG).log("Plateau unlocked")}},SAWMILL:{CATEGORY:ku.TECHNOLOGY,COST:[{resource:Su.LOG,amount:50},{resource:Su.PLANK,amount:10},{resource:Su.COPPER,amount:5}],RESEARCH_POINT:100,DESCRIPTION:"Is it possible to produce planks even faster?",FINISH_DESCRIPTION:"We discovered sawmill that efficiently turns logs into planks",PREREQUISITES:[vu.SCIENTIFIC_METHOD,vu.STONE_HAMMER,vu.STONE_AXE],FINISH:function(e){e.getService(xu.GAME).enable(bu.SAWMILL),e.getService(xu.LOG).log("Sawmill invented")}},WINDMILL:{CATEGORY:ku.TECHNOLOGY,COST:[{resource:Su.LOG,amount:50},{resource:Su.PLANK,amount:10},{resource:Su.COPPER,amount:5}],RESEARCH_POINT:100,DESCRIPTION:"Could we use wind to do hard work for us?",FINISH_DESCRIPTION:"We invented windmill that can effortlessly turn wheat into flour",PREREQUISITES:[vu.AGRICULTURE,vu.MORTAR,vu.MATHEMATICS],FINISH:function(e){e.getService(xu.GAME).enable(bu.WINDMILL),e.getService(xu.LOG).log("Windmill invented"),e.getService(xu.RESOURCES).makeVisible(Su.FABRIC)}},FORESTRY:{CATEGORY:ku.AGRICULTURE,COST:[{resource:Su.LOG,amount:20},{resource:Su.BRUSHWOOD,amount:20},{resource:Su.STONE_SHOVEL,amount:2}],RESEARCH_POINT:50,DESCRIPTION:"Is there any reason why trees grow out of dirt?",FINISH_DESCRIPTION:"We now can hire foresters to plant new trees and manage forest better",PREREQUISITES:[vu.SCIENTIFIC_METHOD,vu.MANAGEMENT,vu.STONE_SHOVEL],FINISH:function(e){e.getService(xu.GAME).enable(bu.FORESTER),e.getService(xu.LOG).log("Forester invented"),e.getService(xu.LOG).log("Forest management unlocked")}},BARRACKS:{CATEGORY:ku.MILITARY,COST:[{resource:Su.LOG,amount:20},{resource:Su.PLANK,amount:20},{resource:Su.STONE_SPEAR,amount:5}],RESEARCH_POINT:100,DESCRIPTION:"How can we make those of us more aggressive less of a threat to others?",FINISH_DESCRIPTION:"We found out that we can form army and use it to our advantage",PREREQUISITES:[vu.SCIENTIFIC_METHOD,vu.CALENDAR,vu.STONE_SPEAR],FINISH:function(e){e.getService(xu.GAME).isEnabled(bu.FORT)||(e.getService(xu.GAME).enable(bu.FORT),e.getService(xu.LOG).log("Fort unlocked")),e.getService(xu.RECIPE).enable(Mu.WOODEN_SHIELD),e.getService(xu.RECIPE).enable(Mu.LEATHER_ARMOR),e.getService(xu.GAME).enable(bu.BARRACKS),e.getService(xu.LOG).log("Barracks invented")}},STASH:{CATEGORY:ku.MILITARY,COST:[{resource:Su.LOG,amount:20},{resource:Su.PLANK,amount:10}],RESEARCH_POINT:30,DESCRIPTION:"Can we hide our goods somewhere?",FINISH_DESCRIPTION:"We learned how to hide goods from invaders",PREREQUISITES:[vu.FORESIGHT],FINISH:function(e){e.getService(xu.GAME).isEnabled(bu.FORT)||(e.getService(xu.GAME).enable(bu.FORT),e.getService(xu.LOG).log("Fort unlocked")),e.getService(xu.GAME).enable(bu.STASH)}},WOODEN_DEFENCES:{CATEGORY:ku.MILITARY,COST:[{resource:Su.LOG,amount:50}],RESEARCH_POINT:100,DESCRIPTION:"Maybe we could use logs to defend ourselves?",FINISH_DESCRIPTION:"Now we can build simple wooden defences that will delay invasions",PREREQUISITES:[vu.BARRACKS],FINISH:function(e){e.getService(xu.GAME).enable(bu.STOCKADE),e.getService(xu.LOG).log("Stockade invented"),e.getService(xu.GAME).enable(bu.WOODEN_TOWER),e.getService(xu.LOG).log("Wooden tower invented")}},STONE_DEFENCES:{CATEGORY:ku.MILITARY,COST:[{resource:Su.STONE,amount:50},{resource:Su.CUT_STONE,amount:50}],RESEARCH_POINT:200,DESCRIPTION:"Maybe we could use stone to defend ourselves?",FINISH_DESCRIPTION:"We learned how to build more durable defences",PREREQUISITES:[vu.WOODEN_DEFENCES],FINISH:function(e){e.getService(xu.GAME).enable(bu.STONE_TOWER),e.getService(xu.LOG).log("Stone tower invented")}},MATHEMATICS:{CATEGORY:ku.SCIENCE,COST:[{resource:Su.FOOD,amount:1e3}],RESEARCH_POINT:50,DESCRIPTION:"What if we calculate things first?",FINISH_DESCRIPTION:"By calculating things we are better at constructing and deconstructing buildings",PREREQUISITES:[vu.FORESIGHT],FINISH:function(e){e.getService(xu.EFFECTS).addBuildingEffect(new Du("Mathematics",Ou.CONSTRUCTION,10,Vu.PERMANENT)),e.getService(xu.EFFECTS).addBuildingEffect(new Du("Mathematics",Ou.DECONSTRUCTION,10,Vu.PERMANENT))}},ADVANCED_MATHEMATICS:{CATEGORY:ku.SCIENCE,COST:[{resource:Su.FOOD,amount:4e3},{resource:Su.PAPER,amount:20}],RESEARCH_POINT:200,DESCRIPTION:"Are there any better ways of calculations?",FINISH_DESCRIPTION:"Our calculations methods improved and we are now able to research more advanced things",PREREQUISITES:[vu.MATHEMATICS,vu.PARCHMENT],FINISH:function(e){}},IMPROVED_FORESIGHT:{CATEGORY:ku.SCIENCE,COST:[{resource:Su.FOOD,amount:5e3},{resource:Su.PAPER,amount:50}],RESEARCH_POINT:300,DESCRIPTION:"Can we use our knowledge to foresight what we could learn?",FINISH_DESCRIPTION:"With our knowledge we can look further into the unknown and foresight future researches",PREREQUISITES:[vu.ADVANCED_MATHEMATICS,vu.PARCHMENT],FINISH:function(e){e.getService(xu.RESEARCH).increaseForesight(1),e.getService(xu.LOG).log("Foresight level increased")}},LOGISTICS:{CATEGORY:ku.MILITARY,COST:[{resource:Su.STONE,amount:100},{resource:Su.CLOTHES,amount:25}],RESEARCH_POINT:200,DESCRIPTION:"Can we improve travel speed between world regions?",FINISH_DESCRIPTION:"With improved military clothing and roads we can move faster between world regions",PREREQUISITES:[vu.ADVANCED_MATHEMATICS],FINISH:function(e){e.getService(xu.GAME).enable(bu.LOGISTICS),e.getService(xu.LOG).log("Logistics invented")}},FERTILIZER:{CATEGORY:ku.AGRICULTURE,COST:[{resource:Su.FOOD,amount:3e3}],RESEARCH_POINT:100,DESCRIPTION:"Could we reuse what animals produce?",FINISH_DESCRIPTION:"By using animals manure we boost growth on fields and orchards",PREREQUISITES:[vu.ANIMALS],FINISH:function(e){e.getService(xu.EFFECTS).addBuildingEffect(new Du("Fertilizer",Ou.FIELD,10,Vu.PERMANENT)),e.getService(xu.EFFECTS).addBuildingEffect(new Du("Fertilizer",Ou.ORCHARD,10,Vu.PERMANENT))}},PICKAXE_DESIGN:{CATEGORY:ku.TECHNOLOGY,COST:[{resource:Su.LOG,amount:10},{resource:Su.CUT_STONE,amount:10},{resource:Su.STONE_PICKAXE,amount:5}],RESEARCH_POINT:100,DESCRIPTION:"Maybe we could redesign our pickaxes?",FINISH_DESCRIPTION:"We discovered different pickaxe design that improved mining speed",PREREQUISITES:[vu.MINING],FINISH:function(e){e.getService(xu.EFFECTS).addBuildingEffect(new Du("Pickaxe Design",Ou.QUARRY,10,Vu.PERMANENT)),e.getService(xu.EFFECTS).addBuildingEffect(new Du("Pickaxe Design",Ou.PIT_MINE,10,Vu.PERMANENT)),e.getService(xu.EFFECTS).addBuildingEffect(new Du("Pickaxe Design",Ou.GEOLOGIST,10,Vu.PERMANENT)),e.getService(xu.EFFECTS).addBuildingEffect(new Du("Pickaxe Design",Ou.DEEP_MINE,10,Vu.PERMANENT))}},TRADE_ROUTES:{CATEGORY:ku.GENERAL,COST:[{resource:Su.COINS,amount:400}],RESEARCH_POINT:50,DESCRIPTION:"Is it possible to attract more merchants?",FINISH_DESCRIPTION:"By optimizing roads system we will have more visiting merchants",PREREQUISITES:[vu.TRADE,vu.MATHEMATICS],FINISH:function(e){e.getService(xu.EFFECTS).addBuildingEffect(new Du("Trade Routes",Ou.MARKETPLACE,15,Vu.PERMANENT))}},BUFF_PRODUCTION:{CATEGORY:ku.GENERAL,COST:[{resource:Su.STONE_AXE,amount:2},{resource:Su.STONE_SHOVEL,amount:2},{resource:Su.STONE_PICKAXE,amount:2},{resource:Su.STONE_HAMMER,amount:2}],RESEARCH_POINT:50,DESCRIPTION:"Would people work better if we give them better tools?",FINISH_DESCRIPTION:"Now we can replace used tools to boost some buildings production",PREREQUISITES:[vu.MANAGEMENT],FINISH:function(e){e.getService(xu.GAME).enable(bu.BUFFS),e.getService(xu.LOG).log("Production buffs invented")}},HUMAN_RESOURCES:{CATEGORY:ku.GENERAL,COST:[{resource:Su.FOOD,amount:5e3}],RESEARCH_POINT:50,DESCRIPTION:"Maybe we can optimize work?",FINISH_DESCRIPTION:"We discovered automated work management for some buildings",PREREQUISITES:[vu.MANAGEMENT],FINISH:function(e){e.getService(xu.GAME).enable(bu.HUMAN_RESOURCES),e.getService(xu.LOG).log("Automated work management available in management tab")}},SPECIALISED_PRODUCTION:{CATEGORY:ku.TECHNOLOGY,COST:[{resource:Su.FOOD,amount:3e3},{resource:Su.STONE_HAMMER,amount:5},{resource:Su.STONE_AXE,amount:5},{resource:Su.STONE_PICKAXE,amount:5},{resource:Su.STONE_SHOVEL,amount:5}],RESEARCH_POINT:50,DESCRIPTION:"Can we specialise in crafting one thing to do it better and faster?",FINISH_DESCRIPTION:"We realized that if we focus on crafting only one thing we can do it more efficiently",PREREQUISITES:[vu.MATHEMATICS,vu.STONE_HAMMER,vu.STONE_AXE,vu.STONE_PICKAXE,vu.STONE_SHOVEL],FINISH:function(e){e.getService(xu.GAME).enable(bu.SPECIALISED_PRODUCTION),e.getService(xu.LOG).log("Manufacture invented")}},HERBAL_MEDICINE:{CATEGORY:ku.SCIENCE,COST:[{resource:Su.HERBS,amount:20}],RESEARCH_POINT:25,DESCRIPTION:"Would we heal faster if we used herbs?",FINISH_DESCRIPTION:"We learned how to craft medicine from herbs",PREREQUISITES:[vu.MORTAR],FINISH:function(e){e.getService(xu.RECIPE).enable(Mu.HERBAL_MEDICINE)}},PRODUCTION_ZONES:{CATEGORY:ku.GENERAL,COST:[{resource:Su.FOOD,amount:5e3}],RESEARCH_POINT:50,DESCRIPTION:"Would creating production camps help with productivity?",FINISH_DESCRIPTION:"We discovered that groups of production buildings can increase production",PREREQUISITES:[vu.HUMAN_RESOURCES],FINISH:function(e){e.getService(xu.GAME).enable(bu.PRODUCTION_ZONES),e.getService(xu.LOG).log("Unlocked buildings camps")}}},oo={START_QUEUE_SIZE:2,RECIPES:{PLANK:{RESOURCE:Su.PLANK,AMOUNT:1,COST:[{resource:Su.LOG,amount:5}],CRAFTING:5},CUT_STONE:{RESOURCE:Su.CUT_STONE,AMOUNT:1,COST:[{resource:Su.STONE,amount:5}],CRAFTING:10},LEATHER:{RESOURCE:Su.LEATHER,AMOUNT:1,COST:[{resource:Su.FUR,amount:2}],CRAFTING:10},STONE_AXE:{RESOURCE:Su.STONE_AXE,AMOUNT:1,COST:[{resource:Su.BRUSHWOOD,amount:1},{resource:Su.LOG,amount:2},{resource:Su.STONE,amount:5}],CRAFTING:15},STONE_PICKAXE:{RESOURCE:Su.STONE_PICKAXE,AMOUNT:1,COST:[{resource:Su.BRUSHWOOD,amount:1},{resource:Su.LOG,amount:2},{resource:Su.STONE,amount:5}],CRAFTING:15},STONE_SHOVEL:{RESOURCE:Su.STONE_SHOVEL,AMOUNT:1,COST:[{resource:Su.BRUSHWOOD,amount:1},{resource:Su.LOG,amount:2},{resource:Su.STONE,amount:5}],CRAFTING:15},STONE_SPEAR:{RESOURCE:Su.STONE_SPEAR,AMOUNT:1,COST:[{resource:Su.BRUSHWOOD,amount:1},{resource:Su.LOG,amount:2},{resource:Su.STONE,amount:5}],CRAFTING:15},STONE_HAMMER:{RESOURCE:Su.STONE_HAMMER,AMOUNT:1,COST:[{resource:Su.BRUSHWOOD,amount:1},{resource:Su.LOG,amount:2},{resource:Su.STONE,amount:5}],CRAFTING:15},BOW:{RESOURCE:Su.BOW,AMOUNT:1,COST:[{resource:Su.BRUSHWOOD,amount:5},{resource:Su.LOG,amount:10}],CRAFTING:15},PARCHMENT:{RESOURCE:Su.PAPER,AMOUNT:1,COST:[{resource:Su.FUR,amount:1}],CRAFTING:15},SWORD:{RESOURCE:Su.SWORD,AMOUNT:1,COST:[{resource:Su.COPPER,amount:5},{resource:Su.LOG,amount:1},{resource:Su.FUEL,amount:5}],CRAFTING:20},WOODEN_SHIELD:{RESOURCE:Su.WOODEN_SHIELD,AMOUNT:1,COST:[{resource:Su.PLANK,amount:5},{resource:Su.LOG,amount:2},{resource:Su.LEATHER,amount:1}],CRAFTING:20},LEATHER_ARMOR:{RESOURCE:Su.LEATHER_ARMOR,AMOUNT:1,COST:[{resource:Su.LEATHER,amount:10}],CRAFTING:20},LIGHT_ARMOR:{RESOURCE:Su.LIGHT_ARMOR,AMOUNT:1,COST:[{resource:Su.COPPER,amount:10},{resource:Su.LEATHER,amount:5},{resource:Su.FUEL,amount:10}],CRAFTING:25},HEAVY_ARMOR:{RESOURCE:Su.HEAVY_ARMOR,AMOUNT:1,COST:[{resource:Su.COPPER,amount:15},{resource:Su.LEATHER,amount:5},{resource:Su.FUEL,amount:10}],CRAFTING:30},FUEL_BRUSHWOOD:{RESOURCE:Su.FUEL,AMOUNT:2,COST:[{resource:Su.BRUSHWOOD,amount:4}],CRAFTING:3},FUEL_LOG:{RESOURCE:Su.FUEL,AMOUNT:4,COST:[{resource:Su.LOG,amount:4}],CRAFTING:5},FUEL_COAL:{RESOURCE:Su.FUEL,AMOUNT:12,COST:[{resource:Su.COAL,amount:2}],CRAFTING:5},COOKED_FISH:{RESOURCE:Su.COOKED_FISH,AMOUNT:1,COST:[{resource:Su.FISH,amount:1},{resource:Su.FUEL,amount:1}],CRAFTING:5},COOKED_MEAT:{RESOURCE:Su.COOKED_MEAT,AMOUNT:1,COST:[{resource:Su.MEAT,amount:1},{resource:Su.FUEL,amount:1}],CRAFTING:5},CHEESE:{RESOURCE:Su.CHEESE,AMOUNT:1,COST:[{resource:Su.MILK,amount:3}],CRAFTING:7},FLOUR:{RESOURCE:Su.FLOUR,AMOUNT:1,COST:[{resource:Su.WHEAT,amount:2}],CRAFTING:3},BREAD:{RESOURCE:Su.BREAD,AMOUNT:1,COST:[{resource:Su.FLOUR,amount:2},{resource:Su.FUEL,amount:1}],CRAFTING:5},VEGETABLE_SOUP_BERRY:{RESOURCE:Su.VEGETABLE_SOUP,AMOUNT:1,COST:[{resource:Su.BERRY,amount:2},{resource:Su.HERBS,amount:1},{resource:Su.FUEL,amount:1}],CRAFTING:5},VEGETABLE_SOUP_MUSHROOM:{RESOURCE:Su.VEGETABLE_SOUP,AMOUNT:1,COST:[{resource:Su.MUSHROOM,amount:2},{resource:Su.HERBS,amount:1},{resource:Su.FUEL,amount:1}],CRAFTING:5},MEAT_SOUP:{RESOURCE:Su.MEAT_SOUP,AMOUNT:1,COST:[{resource:Su.MEAT,amount:1},{resource:Su.HERBS,amount:1},{resource:Su.FUEL,amount:1}],CRAFTING:5},FABRIC:{RESOURCE:Su.FABRIC,AMOUNT:1,COST:[{resource:Su.COTTON,amount:2}],CRAFTING:5},FABRIC_WOOL:{RESOURCE:Su.FABRIC,AMOUNT:1,COST:[{resource:Su.WOOL,amount:3}],CRAFTING:5},CLOTHES_FABRIC:{RESOURCE:Su.CLOTHES,AMOUNT:1,COST:[{resource:Su.FABRIC,amount:10}],CRAFTING:20},CLOTHES_FUR:{RESOURCE:Su.CLOTHES,AMOUNT:1,COST:[{resource:Su.FUR,amount:15}],CRAFTING:20},GOLD:{RESOURCE:Su.GOLD,AMOUNT:1,COST:[{resource:Su.GOLD_ORE,amount:2},{resource:Su.FUEL,amount:1}],CRAFTING:10},SILVER:{RESOURCE:Su.SILVER,AMOUNT:1,COST:[{resource:Su.SILVER_ORE,amount:2},{resource:Su.FUEL,amount:1}],CRAFTING:10},COPPER:{RESOURCE:Su.COPPER,AMOUNT:1,COST:[{resource:Su.COPPER_ORE,amount:2},{resource:Su.FUEL,amount:1}],CRAFTING:20},TIN:{RESOURCE:Su.TIN,AMOUNT:1,COST:[{resource:Su.TIN_ORE,amount:2},{resource:Su.FUEL,amount:1}],CRAFTING:20},BRONZE:{RESOURCE:Su.BRONZE,AMOUNT:2,COST:[{resource:Su.COPPER,amount:1},{resource:Su.TIN,amount:1},{resource:Su.FUEL,amount:1}],CRAFTING:30},IRON:{RESOURCE:Su.IRON,AMOUNT:1,COST:[{resource:Su.IRON_ORE,amount:3},{resource:Su.FUEL,amount:3}],CRAFTING:30},STEEL:{RESOURCE:Su.STEEL,AMOUNT:1,COST:[{resource:Su.IRON,amount:1},{resource:Su.COAL,amount:5},{resource:Su.FUEL,amount:1}],CRAFTING:40},HERBAL_MEDICINE:{RESOURCE:Su.HERBAL_MEDICINE,AMOUNT:1,COST:[{resource:Su.HERBS,amount:5}],CRAFTING:15}}},ao={getReligion(e){const n=Object.entries(this.RELIGIONS).find(n=>n[0]===yu[e]);if(n)return n[1];console.warn("Invalid religion: "+Pu.prepareReligionName(e))},RELIGIONS:{NONE:{FAITH_LEVEL:0,FAITH:0,TIME:0,OFFERING:[]},NATURE:{FAITH_LEVEL:1,FAITH:20,TIME:10,OFFERING:[{resource:Su.LOG,amount:40},{resource:Su.BERRY,amount:20},{resource:Su.MUSHROOM,amount:20}]},FERTILITY:{FAITH_LEVEL:1,FAITH:30,TIME:10,OFFERING:[{resource:Su.WHEAT,amount:40},{resource:Su.BERRY,amount:40},{resource:Su.APPLE,amount:40}]},TECHNOLOGY:{FAITH_LEVEL:1,FAITH:40,TIME:10,OFFERING:[{resource:Su.PLANK,amount:20},{resource:Su.CUT_STONE,amount:20},{resource:Su.STONE_HAMMER,amount:5},{resource:Su.STONE_PICKAXE,amount:5}]},WAR:{FAITH_LEVEL:1,FAITH:50,TIME:10,OFFERING:[{resource:Su.STONE_SPEAR,amount:5},{resource:Su.LEATHER_ARMOR,amount:5},{resource:Su.FUR,amount:10},{resource:Su.LEATHER,amount:10},{resource:Su.FOOD,amount:1e3}]}},PRAYERS:{BLESSING:{FAITH:50,FAITH_LEVEL:2,RELIGION:yu.NONE,DESCRIPTION:"May everything go according to our plans",FINISH:function(e){const n=[];Object.values(Hu).filter(e=>!isNaN(e)).forEach(t=>{e.getServiceByRegion(t).getBuildings().forEach(e=>{n.includes(e.getBuildingType())||n.push(e.getBuildingType())})});const t=Fu.randomExcept(n,[Ou.ALL,Ou.CONSTRUCTION,Ou.DECONSTRUCTION,Ou.FIELD,Ou.ORCHARD,Ou.PASTURE,Ou.WAREHOUSE,Ou.SMITHY,Ou.ASCENSION_TEMPLE,Ou.COLOSSUS,Ou.GREAT_LIGHTHOUSE,Ou.HANGING_GARDEN,Ou.PYRAMID,Ou.SACRED_GROVE,Ou.STONEHENGE,Ou.UNDERGROUND_CITY,Ou.STASH,Ou.WOODEN_TOWER,Ou.BARRACKS,Ou.STONE_TOWER,Ou.STOCKADE]);e.getService(xu.LOG).log(Pu.prepareBuildingName(t)+" blessed"),e.getService(xu.EFFECTS).addBuildingEffect(new Du("Blessing",t,25,Qu/2))}},PREACH:{FAITH:20,FAITH_LEVEL:1,RELIGION:yu.NONE,DESCRIPTION:"We shall spread our beliefs to others",FINISH:function(e){e.getService(xu.RELIGION).increaseFaithLevel(1)}},FAITH_SHIELD:{FAITH:50,FAITH_LEVEL:3,RELIGION:yu.NONE,DESCRIPTION:"Our faith will protect us from harm",FINISH:function(e){let n=25;n+=e.getService(xu.RELIGION).getFaithLevel(),e.getService(xu.RELIGION).increaseFaithShield(n)}},SOLDIER_PRAYER:{FAITH:50,FAITH_LEVEL:5,RELIGION:yu.NONE,DESCRIPTION:"We shall win any enemy with our faith. All troops buffed 20% for one year",FINISH:function(e){e.getService(xu.EFFECTS).addArmyEffect(new Uu("Soldier prayer",_u.ALL,20,Qu))}},FAITHFUL_RESEARCH:{FAITH:100,FAITH_LEVEL:5,RELIGION:yu.TECHNOLOGY,DESCRIPTION:"We live to improve our knowledge. Gain 100 research points spent only on current research",FINISH:function(e){e.getService(xu.RESEARCH).progressTech(100)}},BABY_BOOM:{FAITH:100,FAITH_LEVEL:5,RELIGION:yu.FERTILITY,DESCRIPTION:"May we have a lot of children",FINISH:function(e){e.getService(xu.EFFECTS).addBuildingEffect(new Du("Baby boom",Ou.HUT,100,Qu/2)),e.getService(xu.EFFECTS).addBuildingEffect(new Du("Baby boom",Ou.HOUSE,100,Qu/2)),e.getService(xu.EFFECTS).addBuildingEffect(new Du("Baby boom",Ou.LONGHOUSE,100,Qu/2))}},LIFE_CYCLE:{FAITH:100,FAITH_LEVEL:5,RELIGION:yu.NATURE,DESCRIPTION:"We pray for all live to thrive. 10% buff to natural sources for 5 years",FINISH:function(e){e.getService(xu.EFFECTS).addNatureEffect(new Wu("Life cycle",10,5*Qu))}},HOLY_WAR:{FAITH:100,FAITH_LEVEL:5,RELIGION:yu.WAR,DESCRIPTION:"The only true faith must be spread at all cost. All troops buffed 10% for 5 years",FINISH:function(e){e.getService(xu.EFFECTS).addArmyEffect(new Uu("Holy War",_u.ALL,10,5*Qu))}}}},co={GOLDEN_ITEMS:{GOLDEN_FISH_CHANCE:4e-4,GOLDEN_EGG_CHANCE:4e-4,GOLDEN_APPLE_CHANCE:4e-4},PERKS:{MOTIVATION_SPEECH:{DESCRIPTION:"Use your royal position to motivate people to harder work. 25% production upgrade for all buildings for 100 years or until reset (single use)",USAGES:0,MAX_USAGES:0,COST:20,RESET:function(e,n){},EFFECT:function(e,n){e.getService(xu.EFFECTS).addBuildingEffect(new Du("Motivation speech",Ou.ALL,25,100*Qu)),e.getService(xu.ROYAL).unlockCallback(n)}},ROYAL_PROPHECY:{DESCRIPTION:"Your royal blood allows prophets to look into the future. Unlocks certain research for each perk level (awarded immediately and after any soft reset or abdication)",USAGES:0,MAX_USAGES:3,COST:50,RESET:function(e,n){n.usages>=1&&e.getService(xu.RESEARCH).finishTech(vu.FIRE),n.usages>=2&&e.getService(xu.RESEARCH).finishTech(vu.COOKING),3===n.usages&&(e.getService(xu.RESEARCH).finishTech(vu.BOW),e.getService(xu.RESEARCH).finishTech(vu.HUNTING))},EFFECT:function(e,n){switch(n.usages){case 0:e.getService(xu.RESEARCH).finishTech(vu.FIRE);break;case 1:e.getService(xu.RESEARCH).finishTech(vu.COOKING);break;case 2:e.getService(xu.RESEARCH).finishTech(vu.BOW),e.getService(xu.RESEARCH).finishTech(vu.HUNTING)}e.getService(xu.ROYAL).unlockCallback(n)}},HERITAGE:{DESCRIPTION:"Your predecessors ruled better. You start with extra building (awarded after any soft reset or abdication)",USAGES:0,MAX_USAGES:2,COST:20,RESET:function(e,n){n.usages>=1&&e.getService(xu.FOREST).addBuilding(Ou.GATHERER),2===n.usages&&e.getService(xu.VILLAGE).addBuilding(Ou.WORKSHOP)},EFFECT:function(e,n){e.getService(xu.ROYAL).unlockCallback(n)}},FAMILY_JEWELS:{DESCRIPTION:"Your predecessors left you with more riches. You start with extra resources (awarded after any soft reset or abdication)",USAGES:0,MAX_USAGES:3,COST:20,RESET:function(e,n){n.usages>=1&&(e.getService(xu.RESOURCES).increaseResource(Su.LOG,20,"Royal",!0),e.getService(xu.RESOURCES).increaseResource(Su.BRUSHWOOD,10,"Royal",!0),e.getService(xu.RESOURCES).increaseResource(Su.BERRY,20,"Royal",!0),e.getService(xu.RESOURCES).increaseResource(Su.MUSHROOM,20,"Royal",!0)),n.usages>=2&&(e.getService(xu.RESOURCES).increaseResource(Su.STONE,30,"Royal",!0),e.getService(xu.RESOURCES).increaseResource(Su.PLANK,20,"Royal",!0),e.getService(xu.RESOURCES).increaseResource(Su.FUEL,5,"Royal",!0),e.getService(xu.RESOURCES).increaseResource(Su.LEATHER,5,"Royal",!0)),3===n.usages&&e.getService(xu.RESOURCES).increaseResource(Su.COINS,300,"Royal",!0)},EFFECT:function(e,n){e.getService(xu.ROYAL).unlockCallback(n)}},KING_OF_THE_FOREST:{DESCRIPTION:"You rule everything in the forests. You start with a few forest buildings unlocked (awarded after any soft reset or abdication)",USAGES:0,MAX_USAGES:1,COST:50,RESET:function(e,n){1===n.usages&&(e.getService(xu.FOREST).addBuilding(Ou.GATHERER),e.getService(xu.FOREST).addBuilding(Ou.FORESTER),e.getService(xu.FOREST).addBuilding(Ou.HUNTER_LODGE),e.getService(xu.LAND).takeLand(2*lo.FOREST.GATHERER.SIZE+lo.FOREST.HUNTER_LODGE.SIZE))},EFFECT:function(e,n){e.getService(xu.ROYAL).unlockCallback(n)}},KING_OF_THE_PEOPLE:{DESCRIPTION:"People love you unconditionally. You start with House unlocked and built instead of huts (awarded after any soft reset or abdication)",USAGES:0,MAX_USAGES:1,COST:50,RESET:function(e,n){1===n.usages&&(e.getService(xu.RESEARCH).finishTech(vu.HOUSE),e.getService(xu.VILLAGE).replaceWithHouses())},EFFECT:function(e,n){e.getService(xu.ROYAL).unlockCallback(n)}},KING_OF_THE_WAR:{DESCRIPTION:"War is your game. You start with military unlocked and small army (awarded after any soft reset or abdication)",USAGES:0,MAX_USAGES:1,COST:50,RESET:function(e,n){e.getService(xu.GAME).enable(bu.ARMY),e.getService(xu.GAME).enable(bu.FORT);const t=e.getService(xu.ARMY);e.getService(xu.FORT).addBuilding(Ou.BARRACKS),e.getService(xu.FORT).addBuilding(Ou.BARRACKS),e.getService(xu.LAND).takeLand(2*lo.FORT.BARRACKS.SIZE),t.addMilitia(20)},EFFECT:function(e,n){e.getService(xu.ROYAL).unlockCallback(n)}},CALL_TO_ARMS:{DESCRIPTION:"We will fight till the last of us drops dead. You can convert up to 10 villagers to militia (single use)",USAGES:0,MAX_USAGES:0,COST:10,RESET:function(e,n){},EFFECT:function(e,n){const t=e.getService(xu.RESOURCES),l=e.getService(xu.MODAL),i=e.getService(xu.ARMY),r=e.getService(xu.ROYAL);l.open(Lu.INPUT),l.setModalText("How many villagers would you like to convert to militia?<br>"+t.getPeople()+" recruits available");const s=l.registerForValueResponse().subscribe(e=>{if(s.unsubscribe(),null!==e&&!isNaN(e)){const s=t.getPeople();if(s>10)return void l.info("You can only convert up to 10 villagers");if(i.getFreeBarracks()<e)return void l.info("Not enough barracks space for so many militia");if(e>s)return void l.info("Not enough recruits");if(e<=0)return void l.info("Invalid amount of recruits");if(r.getRoyalPoints()<n.cost)return void l.info("Not enough royal points");t.removeRecruit(Number(e)),i.addMilitia(Number(e)),r.unlockCallback(n)}})}},UNITE_WITH_THE_PEOPLE:{DESCRIPTION:"You step down from your throne and live with others. Permanent 20% upgrade to all buildings (persists through soft resets and abdications)",USAGES:0,MAX_USAGES:0,COST:100,RESET:function(e,n){},EFFECT:function(e,n){e.getService(xu.EFFECTS).addBuildingEffect(new Du("Unite with the people",Ou.ALL,20,Vu.ROYAL)),e.getService(xu.ROYAL).unlockCallback(n)}},JESTER:{DESCRIPTION:"You hired jester to entertain you but who knows what can you expect from him? Jester will pick random unlocked resource (except coins) and fill it to max storage. Each time he fills resource or picks already full resource he has 50% chance to pick another one (single use)",USAGES:0,MAX_USAGES:0,COST:25,RESET:function(e,n){},EFFECT:function(e,n){const t=Array.from(e.getService(xu.RESOURCES).getResources().values()).filter(e=>e.isVisible()&&e.resource!==Su.COINS);for(;;){const n=t[Fu.randomBetween(0,t.length-1)];if(n.amount<n.limit?(n.amount=n.limit,e.getService(xu.LOG).success("Jester filled "+Pu.prepareResourceName(n.resource)+" storage!")):e.getService(xu.LOG).warning("Jester couldn't fill "+Pu.prepareResourceName(n.resource)+" storage!"),Fu.chance(.5))break}e.getService(xu.ROYAL).unlockCallback(n)}},ROYAL_ORDERS:{DESCRIPTION:"Your people work harder when you give them orders. Your initial crafting queue is increased by 1 for each perk level",USAGES:0,MAX_USAGES:5,COST:10,RESET:function(e,n){n.usages>0&&e.getService(xu.CRAFTING).increaseQueueSize(n.usages)},EFFECT:function(e,n){e.getService(xu.CRAFTING).increaseQueueSize(1),e.getService(xu.ROYAL).unlockCallback(n)}}}},ho={KING_DEATH_CHANCE:.02,REGIONS:[{ID:0,PATH:"m 126.49907,133.07398 7.34991,7.88445 11.67185,8.93323 4.23333,15.875 11.37709,2.64584 7.14375,8.46666 0.26458,8.59896 13.89063,3.96875 15.08125,-9.525 -1.19063,-16.40417 9.78958,-4.36562 11.2448,5.68854 11.77395,-5.42396 17.33021,3.83646 3.57188,-11.50937 -7.80521,-10.58334 0.66146,-10.45104 7.40833,-7.14375 0.79375,-5.15937 -6.48229,-1.32292 -2.24896,-7.40833 -10.05417,-5.29167 -9.12812,3.96875 -1.71979,-6.21771 1.45521,-8.069789 0.66145,-5.89643 -6.04761,-5.858629 -11.90625,-0.944941 -15.11905,5.669645 -13.08608,0.871196 -12.96258,5.345393 -10.28987,7.617185 -5.07812,-7.750818 -10.55715,5.211754 -6.5481,6.681744 8.68626,10.15624 -7.75082,0.53454 z",LAND:500,FOREST:500,MOUNTAINS:100,CENTER:{X:187,Y:127},NEIGHBOURS:[-1,1,2,13],WEALTH:0,TROOPS:[]},{ID:1,PATH:"m 126.49907,133.07398 -24.13484,-2.04836 -6.013569,-14.96709 -11.49259,-7.61718 4.677217,-1.33635 5.479026,-16.971615 -3.608139,-3.073598 3.741775,-19.510677 -2.405428,-3.340867 13.497118,-6.414468 11.22531,10.15624 11.09169,-3.073598 5.21176,5.211754 10.55714,-4.409945 2.53906,1.336347 4.00905,5.211754 -7.61719,5.479026 21.19488,15.545464 -10.28987,7.617183 -5.07812,-7.750816 -10.55715,5.211754 -6.5481,6.681742 8.68626,10.15624 -7.75082,0.53454 -6.41447,17.37252",LAND:80,FOREST:100,MOUNTAINS:0,CENTER:{X:116,Y:97},NEIGHBOURS:[-1,0,2,3,4,7,13,15],WEALTH:0,TROOPS:[]},{ID:2,PATH:"m 126.49907,133.07398 -24.13484,-2.04836 0.4009,8.01809 -21.782464,-3.60814 -12.828937,12.96257 v 8.95353 l -11.893494,18.04069 -0.80181,16.83798 19.510677,-3.20723 14.03165,-4.67722 2.138156,-10.28988 9.488072,2.40543 6.949,-8.15172 5.61266,-0.80181 1.46999,12.82894 0.13363,11.49259 3.87541,0.53454 3.87541,-3.34087 3.20723,-9.75534 -0.53454,-8.81989 9.62171,2.13815 -6.28084,-10.28987 6.5481,-11.75986 -1.25576,-9.57787 z",LAND:80,FOREST:100,MOUNTAINS:0,CENTER:{X:100,Y:155},NEIGHBOURS:[-1,0,1,3,5],WEALTH:0,TROOPS:[]},{ID:3,PATH:"m 56.260235,175.39236 -5.233451,-16.73165 -9.827379,-12.28422 11.433778,-11.43378 1.039435,-11.2448 4.346725,-8.59895 0.566965,-9.92188 6.803573,-0.56696 V 92.703868 l 15.119045,1.700893 10.897249,-7.344976 3.608138,3.073598 -5.479026,16.971617 -4.677217,1.33635 11.49259,7.61718 6.01357,14.96709 0.4009,8.01809 -21.782464,-3.60814 -12.828937,12.96257 v 8.95353 z",LAND:20,FOREST:60,MOUNTAINS:0,CENTER:{X:71,Y:125},NEIGHBOURS:[1,2,4,5],WEALTH:0,TROOPS:[]},{ID:4,PATH:"m 41.199405,146.37649 -10.997948,-3.99191 -13.363477,-1.33635 4.577637,-11.0537 -3.508559,-16.87597 10.429075,-11.27348 6.676174,-23.33792 1.469982,-7.483546 14.83346,3.741772 2.405425,-8.285356 -1.202711,-5.879928 12.160763,-1.603618 7.617179,8.151722 8.953529,6.548102 13.898015,-6.1472 -3.741774,19.510677 -10.897251,7.344976 -15.119043,-1.700895 v 11.906254 l -6.803573,0.56696 -0.566965,9.92188 -4.346725,8.59895 -1.039435,11.2448 z",LAND:30,FOREST:60,MOUNTAINS:0,CENTER:{X:48,Y:98},NEIGHBOURS:[1,3,5,6,7],WEALTH:0,TROOPS:[]},{ID:5,PATH:"m 6.2808339,146.92816 -14.9670935,3.74177 6.2808339,12.02713 2.00452142,12.6953 -10.82441572,8.28536 0.534539,6.68174 8.9535291,6.949 12.1607629,0.66818 5.479026,8.01808 7.082642,5.07812 h 7.082642 l 0.400905,-10.0226 10.958049,-1.87089 6.013566,3.47451 7.082642,-2.93997 0.935442,-7.48355 0.80181,-16.83798 -5.233451,-16.73165 -9.827379,-12.28422 -10.997948,-3.99191 -13.363477,-1.33635 z",LAND:40,FOREST:70,MOUNTAINS:0,CENTER:{X:25,Y:175},NEIGHBOURS:[-1,2,3,4,6,25],WEALTH:0,TROOPS:[]},{ID:6,PATH:"M 16.83798,141.04823 6.2808339,146.92816 -0.13363471,129.0211 -12.828937,117.39488 l 4.0090427,-7.88446 -9.3544327,-9.48806 9.0871631,-4.810855 -4.2763121,-4.276313 0.133635,-15.234361 10.2898762,-5.746295 10.9580504,-0.935445 1.0690783,-7.349911 3.7417731,-6.414468 8.819894,3.207234 2.939965,4.009044 1.603617,-2.939966 7.483547,-1.603618 2.806329,13.096208 -1.469982,7.483544 -6.676174,23.337922 -10.429075,11.27348 3.508559,16.87597 z",LAND:30,FOREST:60,MOUNTAINS:0,CENTER:{X:10,Y:92},NEIGHBOURS:[-1,4,5,7,25,106],WEALTH:0,TROOPS:[]},{ID:7,PATH:"M 36.482289,71.023614 33.67596,57.927406 26.192413,59.531024 24.588796,62.47099 21.648831,58.461946 12.828937,55.254712 10.824416,52.314747 7.4835466,48.706608 6.8153729,34.674958 19.91158,32.002264 l 9.888972,1.603616 4.81085,-10.289877 4.409948,3.474504 5.746295,1.469982 14.03165,-4.543581 10.423512,5.879928 16.169806,0.133636 4.276313,9.220798 7.082641,-2.405425 3.474503,2.80633 1.20271,6.815372 -7.349906,5.746295 -1.336353,12.294399 2.405428,3.340867 -13.898017,6.1472 -8.953527,-6.548102 -7.617179,-8.151722 -12.160763,1.603618 1.202711,5.879928 -2.405425,8.285356 z",LAND:30,FOREST:60,MOUNTAINS:0,CENTER:{X:56,Y:44},NEIGHBOURS:[-1,1,4,6,15,18,106],WEALTH:0,TROOPS:[]},{ID:8,PATH:"m 130.40178,245.02827 -7.37053,9.26042 -11.33929,2.07887 -2.26785,7.18154 1.32291,11.15031 6.61459,6.42559 -3.96875,9.82737 -6.23661,1.13395 0.94494,2.64583 3.59077,1.70087 6.61459,-2.64583 1.13392,-3.77976 6.23661,-1.7009 7.55953,-0.94493 3.59077,-5.48066 1.88988,-1.13392 6.61458,1.13392 10.01637,-4.72469 6.99256,6.99257 5.85863,-8.12649 -5.10268,-6.04764 v -10.01636 l 2.26786,-7.9375 -7.37053,-6.23661 -11.1503,-1.88988 -5.29167,6.23661 -2.83482,-5.85863 -6.61458,-6.04762 z",LAND:40,FOREST:50,MOUNTAINS:0,CENTER:{X:138,Y:265},NEIGHBOURS:[-1,9,10,11],WEALTH:0,TROOPS:[]},{ID:9,PATH:"m 165.36458,252.02083 6.22245,-3.26298 4.94449,-4.94449 8.41899,0.66817 5.61266,-5.21175 1.46998,-3.87541 1.73726,0.80181 -0.13364,2.80633 2.27179,4.27631 4.54358,0.66817 2.13816,4.54359 4.54358,0.4009 2.13816,4.94449 1.33635,7.61718 -0.66818,6.1472 -3.87541,4.67722 2.40543,0.93544 2.67269,-0.93544 2.6727,1.33633 -0.13364,2.80633 -4.94448,1.20272 -4.54358,-1.33633 -3.34087,-3.60815 -3.0736,-1.20272 -3.60814,2.53908 -0.53454,5.07812 3.20723,3.74176 3.87541,0.93544 -0.13363,3.8754 -4.14268,1.0691 -6.94901,1.46997 -7.21627,-1.73725 -5.47903,-3.8754 -5.61266,0.66817 -8.84536,-1.09132 5.85863,-8.12649 -5.10268,-6.04764 v -10.01636 z",LAND:40,FOREST:40,MOUNTAINS:10,CENTER:{X:186,Y:263},NEIGHBOURS:[-1,8,11],WEALTH:0,TROOPS:[]},{ID:10,PATH:"m 111.69196,296.43302 -4.51688,2.97241 -4.94449,1.60362 -1.87088,4.40994 v 6.68173 l 3.4745,-1.06907 -0.26727,4.81084 1.06908,4.9445 5.47902,2.93995 -0.8018,5.07812 5.34539,-1.46997 -1.06908,9.75534 -5.07812,4.6772 0.4009,3.47451 3.34087,0.13364 1.46998,-2.93997 5.87993,-1.20272 2.93997,4.40995 5.61266,2.00453 0.66817,5.21177 6.5481,2.53904 2.40543,-2.67269 5.87993,-2.00453 -0.40091,-4.40994 6.54811,-1.60362 -2.00452,-4.40994 1.87088,-3.34087 4.14268,-4.67722 2.13816,-5.87992 -8.01809,-3.47451 -1.73725,-6.28083 1.87089,-7.88445 -0.26727,-5.47902 0.4009,-6.94902 5.07812,-3.60815 -1.33635,-6.01355 -6.61088,-4.82918 -6.61458,-1.13392 -1.88988,1.13392 -3.59077,5.48066 -7.55953,0.94493 -6.23661,1.7009 -1.13392,3.77976 z",LAND:20,FOREST:50,MOUNTAINS:20,CENTER:{X:130,Y:316},NEIGHBOURS:[-1,8,11],WEALTH:0,TROOPS:[]},{ID:11,PATH:"m 200.58578,287.64555 3.20723,4.67723 6.41447,5.47901 0.13363,5.47905 4.54359,1.06907 1.06908,7.88445 3.60814,8.95353 -3.60814,5.61266 -4.40995,-1.60361 -4.00904,-0.53454 -0.80181,4.00905 -3.47451,4.14266 -11.89349,-0.4009 -0.13363,-4.54358 2.80633,-1.73726 v -4.00904 l -5.7463,-0.4009 -1.60362,3.60815 -2.53906,4.94448 -6.01356,2.4054 -4.14268,-5.34537 1.73725,-5.21176 5.47903,-5.74631 0.13363,-5.34537 -4.54358,-3.74177 -5.47903,4.94448 -0.53453,7.34992 -2.13816,7.88445 -6.94901,-2.80633 -5.74629,1.73725 -8.01809,-3.47451 -1.73725,-6.28083 1.87089,-7.88445 -0.26727,-5.47902 0.4009,-6.94902 5.07812,-3.60815 -1.33635,-6.01355 -6.61088,-4.82918 10.01637,-4.72469 6.99256,6.99257 8.84536,1.09132 5.61266,-0.66817 5.47903,3.8754 7.21627,1.73725 z",LAND:70,FOREST:20,MOUNTAINS:0,CENTER:{X:188,Y:303},NEIGHBOURS:[-1,8,9,10],WEALTH:0,TROOPS:[]},{ID:12,PATH:"m 263.52775,322.65786 0.26727,9.62171 -7.48355,5.3454 -1.06907,5.87992 3.74177,4.27632 h 7.7508 l 8.0181,6.94899 1.33635,6.68174 8.81989,2.40543 4.27633,-1.60361 10.4235,1.60361 1.33635,-4.2763 -6.94901,-5.87994 -0.53454,-5.87992 4.81084,2.40541 6.94901,0.53454 3.74177,-5.87992 -4.00902,-5.87994 -6.68176,-2.67269 4.54358,-5.07812 -1.87087,-7.75081 -9.08716,-2.67269 -5.07813,3.20723 -6.41447,-6.1472 -8.0181,0.8018 z",LAND:30,FOREST:60,MOUNTAINS:0,CENTER:{X:282,Y:340},NEIGHBOURS:[-1],WEALTH:0,TROOPS:[]},{ID:13,PATH:"M 177.41392,87.905422 190.5,87.034226 l 15.11905,-5.669645 11.90625,0.944941 6.04761,5.858631 c -1.13392,0.377976 4.15774,-1.511905 4.15774,-1.511905 v -3.401785 l -6.99256,-7.9375 2.64583,-9.449403 h 6.04763 l -1.32292,-6.425597 -15.11905,-2.456844 -12.09524,-6.614583 -13.79613,3.023809 -7.18155,-8.882441 -9.82738,-4.157739 0.37798,-10.016368 -3.59077,-8.126488 -15.49703,-3.590774 -17.76488,13.040178 -0.37797,14.363097 1.32291,13.229166 9.76602,6.42525 2.53906,1.336347 4.00905,5.211752 -7.61719,5.479026 21.19488,15.545464 z",LAND:80,FOREST:40,MOUNTAINS:50,CENTER:{X:169,Y:61},NEIGHBOURS:[-1,0,1,15,14],WEALTH:0,TROOPS:[]},{ID:14,PATH:"m 228.10863,59.441963 7.18154,-1.700892 5.10268,2.834822 6.4256,-2.456847 -5.10268,-6.236607 -6.99256,-4.535712 10.20536,-1.133931 7.55952,3.590775 2.07887,-6.047619 5.10268,-6.236607 -0.18899,-7.559524 -8.12649,-8.126488 -12.28422,-2.834821 0.56696,-7.181548 -16.06399,1.322917 -26.45833,-2.456846 -6.42559,-5.6696423 -15.875,3.2127975 -7.9375,13.9851188 3.59077,8.126488 -0.37798,10.016368 9.82738,4.157739 7.18155,8.882441 13.79613,-3.023809 12.09524,6.614583 z",LAND:50,FOREST:80,MOUNTAINS:0,CENTER:{X:210,Y:32},NEIGHBOURS:[-1,13,15,16],WEALTH:0,TROOPS:[]},{ID:15,PATH:"m 85.392611,29.730472 -0.536956,-8.275115 13.985118,-2.267858 9.449407,-5.291666 4.91369,-7.7485118 12.47321,0.9449405 V -4.0580357 l 12.6622,-2.0788691 12.85119,4.7247023 -0.94494,5.6696428 3.96875,2.8348214 6.80358,-3.779762 8.12648,2.2678572 5.66965,2.6458333 -7.9375,13.9851188 -15.49703,-3.590774 -17.76488,13.040178 -0.37797,14.363097 1.32291,13.229166 9.76602,6.42525 -10.55714,4.409943 -5.21176,-5.211752 -11.09169,3.073596 -11.22531,-10.156237 -13.497121,6.414465 1.336355,-12.294399 7.349906,-5.746295 -1.20271,-6.815372 -3.474505,-2.80633 -7.082639,2.405425 z",LAND:50,FOREST:60,MOUNTAINS:50,CENTER:{X:119,Y:32},NEIGHBOURS:[1,7,13,14,16,17,18],WEALTH:0,TROOPS:[]},{ID:16,PATH:"m 138.33928,-6.1369048 -1.13392,-15.6860122 14.93005,-5.102678 3.2128,5.291667 15.30804,-5.858632 5.29166,-7.9375 12.09524,5.10268 15.30804,-12.662204 13.79613,0.566965 5.10268,10.772322 4.34672,-0.377975 4.34673,-5.291667 4.7247,3.023809 -2.07887,8.315475 1.88988,10.583334 7.9375,12.0952374 -12.47321,9.4494048 -7.37054,6.9925598 -26.45833,-2.456846 -6.42559,-5.6696423 -15.875,3.2127975 -5.66965,-2.6458333 -8.12648,-2.2678572 -6.80358,3.779762 -3.96875,-2.8348214 0.94494,-5.6696428 z",LAND:30,FOREST:30,MOUNTAINS:10,CENTER:{X:194,Y:-12},NEIGHBOURS:[-1,14,15,17,108],WEALTH:0,TROOPS:[]},{ID:17,PATH:"m 121.38705,-45.729911 -13.47485,-20.883184 -10.016368,9.827382 -14.174107,2.078868 0.755951,8.882441 6.803573,3.96875 3.96875,11.339285 -5.669643,6.047619 0.755952,9.449405 6.614581,7.9374999 0.188989,8.8824402 6.236612,3.0238094 6.04762,-2.6458332 3.77976,3.9687499 12.47321,0.9449405 V -4.0580357 l 12.6622,-2.0788691 -1.13392,-15.6860122 1.96547,-11.320386 z",LAND:20,FOREST:60,MOUNTAINS:50,CENTER:{X:114,Y:-21},NEIGHBOURS:[15,16,18,19,20,108],WEALTH:0,TROOPS:[]},{ID:18,PATH:"M 0.75595238,29.581845 -3.7797618,20.888392 -13.418155,15.029762 -9.8273808,6.5252975 0.56696427,3.8794642 6.8035714,8.9821426 5.6696427,-1.6011906 l 5.6696433,-2.6458333 4.157738,3.40178565 11.339285,-7.55952375 4.157739,-7.181547 13.229166,-1.133929 7.181546,9.8273808 5.858632,-4.9136908 -2.456844,-5.291666 10.583333,2.267857 5.102677,6.9925592 6.614584,-10.3943452 13.229166,3.212798 6.614583,7.9374997 0.188989,8.8824404 6.23661,3.0238094 6.04762,-2.6458332 3.77976,3.9687499 -4.91369,7.7485118 -9.449407,5.291666 -13.985118,2.267858 0.536956,8.275115 L 69.222807,29.596836 58.799295,23.716908 44.767645,28.260489 39.02135,26.790507 34.611402,23.316003 29.800552,33.60588 19.91158,32.002264 6.8153729,34.674958 Z",LAND:20,FOREST:80,MOUNTAINS:30,CENTER:{X:48,Y:7},NEIGHBOURS:[7,15,17,19,22,106],WEALTH:0,TROOPS:[]},{ID:19,PATH:"m 30.994048,-15.586309 -9.638393,-5.858632 -3.02381,-8.598956 -5.386161,-0.472472 2.173363,-3.590774 4.724703,-1.228421 0.377976,-6.331103 4.252232,-7.559522 5.669642,1.41741 7.087055,-1.795388 7.654018,-4.346726 4.630208,3.779763 7.559524,-1.417412 4.157737,-3.779761 3.685267,3.496281 1.228424,5.38616 3.401784,-0.850448 3.02381,-5.008184 4.535715,-2.267857 6.614583,-0.09449 0.755949,8.882441 6.803575,3.96875 3.96875,11.339285 -5.669645,6.047619 0.755954,9.449405 -13.229166,-3.212798 -6.614584,10.3943452 -5.102677,-6.9925592 -10.583333,-2.267857 2.456844,5.291666 -5.858632,4.9136908 -7.181546,-9.8273808 z",LAND:20,FOREST:60,MOUNTAINS:40,CENTER:{X:54,Y:-32},NEIGHBOURS:[17,18,20,21,22],WEALTH:0,TROOPS:[]},{ID:20,PATH:"m 109.80208,-78.519342 -8.23966,-5.473369 -4.543584,-9.354434 -10.557144,-1.469982 -10.557148,5.078121 -3.340867,6.68174 -11.49259,-0.668176 -4.276312,-7.082642 -13.096208,-0.400904 -7.082642,7.349913 -3.608139,6.681737 -13.363476,-5.078122 -8.018086,8.819896 -2.5390601,9.755339 -10.02260723,6.280832 3.47450383,7.082642 8.8198945,3.207234 8.862771,5.44285 4.252232,-7.559522 5.669642,1.41741 7.087055,-1.795388 7.654018,-4.346726 4.630208,3.779763 7.559524,-1.417412 4.157737,-3.779761 3.685267,3.496281 1.228424,5.38616 3.401784,-0.850448 3.02381,-5.008184 4.535715,-2.267857 6.614583,-0.09449 14.174104,-2.078874 10.016371,-9.827382 z",LAND:20,FOREST:40,MOUNTAINS:20,CENTER:{X:53,Y:-68},NEIGHBOURS:[-1,17,19,21,33,108],WEALTH:0,TROOPS:[]},{ID:21,PATH:"m -12.428033,-35.483294 -4.944486,-3.340867 -7.216277,0.400904 -4.409947,-4.142676 -1.603618,-7.082645 3.207234,-4.81085 7.884452,-2.672696 8.953529,3.608139 3.8754078,-4.81085 5.74629489,0.935442 3.47450381,7.082642 8.8198945,3.207234 8.862771,5.44285 -0.377976,6.331103 -4.724703,1.228421 -2.173363,3.590774 -8.1348325,-0.02244 -7.884451,5.61266 -4.8108512,-3.60814 0.5345388,-5.211754 z",LAND:10,FOREST:10,MOUNTAINS:20,CENTER:{X:-4,Y:-42},NEIGHBOURS:[19,20,22,31,32,33],WEALTH:0,TROOPS:[]},{ID:22,PATH:"m 12.945684,-30.516369 -8.1348325,-0.02244 -7.884451,5.61266 -4.8108514,-3.60814 0.534539,-5.211754 -5.0781211,-1.737252 -3.340869,5.61266 0.400904,6.280834 -13.22984,0.133635 -5.345391,5.34539 -9.621702,0.400904 -12.160766,5.345391 -3.741772,6.5481032 0.668174,7.7508163 -4.009044,5.2117558 -7.082641,2.0045214 3.608138,2.9399643 11.091685,6.548104 3.608139,9.888971 8.285356,-0.534537 6.414468,3.608138 6.815373,-0.53454 -0.400905,8.285356 9.354434,3.207234 3.727387,7.811127 6.425596,-6.236608 6.8035709,-3.212798 -0.7559524,-7.9375 5.66964288,-3.401785 -4.53571418,-8.693453 -9.6383932,-5.85863 3.5907742,-8.5044645 10.39434507,-2.6458333 6.23660713,5.1026782 -1.1339287,-10.583333 5.6696433,-2.6458333 4.157738,3.40178565 11.339285,-7.55952375 4.157739,-7.181547 -9.638393,-5.858632 -3.02381,-8.598956 z",LAND:30,FOREST:50,MOUNTAINS:20,CENTER:{X:-25,Y:2},NEIGHBOURS:[18,19,21,23,30,31,106],WEALTH:0,TROOPS:[]},{ID:23,PATH:"m -17.386905,50.370536 -3.727387,-7.811127 -9.354434,-3.207234 0.400905,-8.285356 -6.815373,0.53454 -6.414468,-3.608138 -8.285356,0.534537 -3.608139,-9.888971 -11.091685,-6.548104 -12.828936,3.34087 -8.151723,7.617181 -0.801806,10.690781 -8.285356,2.405425 1.069078,6.013564 -11.893495,6.414468 2.27179,2.672697 6.414471,-0.801809 -2.672701,8.953529 -5.21175,6.548104 8.819893,9.087164 3.059332,6.331924 6.614581,-0.755954 5.858634,-10.961307 3.779758,-11.150298 10.016371,2.645833 14.174108,-0.566962 8.504462,8.126487 14.363096,-1.700893 13.418154,-7.181548 z",LAND:30,FOREST:80,MOUNTAINS:0,CENTER:{X:-62,Y:44},NEIGHBOURS:[22,24,28,29,30,106],WEALTH:0,TROOPS:[]},{ID:24,PATH:"m -91.848214,135.22619 -10.016366,-6.80357 -2.26786,-8.50447 -10.58333,-7.9375 6.2366,-7.9375 12.851195,2.64584 8.504465,-10.583337 -6.992561,-7.74851 -0.377976,-6.992562 6.614583,-0.755952 5.858632,-10.961309 3.77976,-11.150298 10.016371,2.645833 14.174108,-0.566962 8.504462,8.126487 14.363096,-1.700893 -7.181548,7.748511 -2.267857,12.662204 1.889881,10.77232 -9.449405,5.858628 -4.157737,8.50447 5.669642,7.37053 -7.937499,7.18155 -3.212799,6.23661 -4.724701,3.40178 -13.607143,-3.59077 -9.07143,3.59077 z",LAND:40,FOREST:90,MOUNTAINS:40,CENTER:{X:-68,Y:97},NEIGHBOURS:[23,25,26,28,106,109],WEALTH:0,TROOPS:[]},{ID:25,PATH:"m -11.22532,183.67772 -14.855037,-2.33844 -17.197917,2.26786 -3.023809,-6.04762 5.669643,-3.96875 -7.370535,-6.61458 -12.851191,-1.51191 -1.889882,-10.39434 5.858632,-4.34673 4.157739,-11.52827 -5.10268,-5.85863 3.212799,-6.23661 7.937499,-7.18155 9.827382,-1.70089 0.755952,-7.37053 10.016368,-1.7009 7.90603,-9.12347 9.3544327,9.48806 -4.0090427,7.88446 12.69530229,11.62622 6.41446861,17.90706 -14.9670935,3.74177 6.2808339,12.02713 2.00452142,12.6953 z",LAND:30,FOREST:80,MOUNTAINS:20,CENTER:{X:-29,Y:146},NEIGHBOURS:[-1,5,6,24,26,106],WEALTH:0,TROOPS:[]},{ID:26,PATH:"m -60.854166,165.46428 -11.528274,8.31548 -4.913691,12.47321 -4.724701,13.04018 -16.063989,0.75595 -14.174109,4.72471 -9.63839,-5.85863 -2.83482,-9.6384 -8.50447,-11.52827 1.32292,-5.85863 0.56697,-10.96131 10.01636,-8.12649 16.63096,-3.40178 -1.13393,-8.12649 4.34672,1.13393 2.834826,4.53571 3.96875,2.83482 3.590774,-6.61458 -0.755954,-7.9375 6.614583,1.5119 9.07143,-3.59077 13.607143,3.59077 4.724701,-3.40178 5.10268,5.85863 -4.157739,11.52827 -5.858632,4.34673 z",LAND:30,FOREST:60,MOUNTAINS:30,CENTER:{X:-96,Y:170},NEIGHBOURS:[-1,24,25,27,109],WEALTH:0,TROOPS:[]},{ID:27,PATH:"m -133.23661,177.74851 -6.14445,7.53282 0.93545,7.75082 1.87088,10.15624 -4.54358,9.75534 -8.95353,-3.60814 0.26727,-6.1472 -3.87541,-5.74629 2.13816,-5.61266 -5.34539,0.4009 -5.07812,6.41447 -0.13364,6.54811 -8.68626,-2.53906 -8.01808,1.60361 -4.14268,-6.28083 2.6727,-5.61266 -6.28084,-0.93545 -3.87541,-7.88445 6.1472,-4.27631 4.00905,-9.2208 h 7.08264 l 2.40542,-7.61718 -1.73725,-4.27631 7.48355,-0.80181 3.60814,4.40995 1.73725,5.34539 6.41447,-8.95353 11.22532,-0.53454 2.93996,5.21176 7.76707,-1.90213 -0.56697,10.96131 z",LAND:20,FOREST:60,MOUNTAINS:0,CENTER:{X:-158,Y:180},NEIGHBOURS:[-1,26,39,40,109],WEALTH:0,TROOPS:[]},{ID:28,PATH:"m -180.86161,118.40625 0.75596,-10.20536 10.20535,-6.99256 -4.53571,-5.480652 10.96131,1.511903 5.48065,-0.944938 3.59078,-11.150299 16.81994,2.456844 5.29167,-8.693451 -3.96875,-3.96875 1.5119,-3.401785 8.12649,3.401785 6.42559,-1.700893 -0.18899,-8.88244 5.29167,4.157739 8.72048,-2.5679 8.819893,9.087162 3.059332,6.331926 0.377976,6.992562 6.992559,7.748508 -8.504465,10.583339 -12.851195,-2.64584 -6.2366,7.9375 10.58333,7.9375 -9.54722,7.96695 -7.27652,2.27925 -4.4037,-4.96972 -0.28353,-14.18749 -10.61059,6.01356 -1.6838,7.64391 -6.21548,5.63935 -11.19493,3.03235 -8.12649,-7.74851 -11.33929,4.15773 z",LAND:10,FOREST:60,MOUNTAINS:50,CENTER:{X:-130,Y:100},NEIGHBOURS:[23,24,29,38,39,109],WEALTH:0,TROOPS:[]},{ID:29,PATH:"m -154.40327,85.144342 -7.18155,-7.748511 2.26786,-8.315476 -10.96131,-9.449403 -1.88988,-13.04018 3.77976,-9.071427 6.61458,-8.693452 -2.07887,-9.071429 11.33929,6.236607 11.71726,0.377976 6.99256,-7.9375 -2.64583,-7.370536 10.58333,3.212798 6.23661,11.90625 10.77232,3.401786 10.205356,-5.669643 11.388283,-0.863468 -0.801804,10.690781 -8.285358,2.405425 1.069078,6.013564 -11.893495,6.414468 2.27179,2.672697 6.414471,-0.801809 -2.672701,8.953529 -5.21175,6.548104 -8.72048,2.5679 -5.29167,-4.157739 0.18899,8.882438 -6.42559,1.700895 -8.12649,-3.401785 -1.5119,3.401785 3.96875,3.96875 -5.29167,8.693449 z",LAND:30,FOREST:80,MOUNTAINS:20,CENTER:{X:-140,Y:51},NEIGHBOURS:[-1,23,28,30,37,38,107],WEALTH:0,TROOPS:[]},{ID:30,PATH:"m -59.467469,-5.8163777 -9.220798,-5.8799263 -12.294399,1.603617 -1.603618,-9.087164 4.009043,-4.009043 -6.147199,-2.939964 -7.750815,7.216276 -12.027135,-3.474503 -3.20723,-8.285357 -13.63075,7.483548 -3.20723,8.552625 -15.7689,4.8108514 1.60362,11.7598591 6.94901,4.0090428 -4.68553,5.1175267 10.58333,3.212798 6.23661,11.90625 10.77232,3.401786 10.205356,-5.669643 11.388283,-0.863468 8.151723,-7.617181 12.828936,-3.34087 -3.608138,-2.9399675 7.082641,-2.0045214 4.009044,-5.2117556 z",LAND:30,FOREST:50,MOUNTAINS:0,CENTER:{X:-104,Y:-2},NEIGHBOURS:[22,23,29,31,32,36,37],WEALTH:0,TROOPS:[]},{ID:31,PATH:"m -84.72444,-26.128858 13.630746,-4.276312 4.276312,-8.285356 -1.603616,-4.810852 5.34539,-1.870887 0.80181,8.018086 4.543581,0.267269 4.810852,-9.354434 22.317004,-3.207234 1.603618,7.082645 4.409947,4.142676 7.216277,-0.400904 4.944486,3.340867 -3.340869,5.612659 0.400904,6.280834 -13.22984,0.133635 -5.345391,5.34539 -9.621702,0.400904 -12.160766,5.345391 -3.741772,6.5481033 -9.220798,-5.8799263 -12.294399,1.603617 -1.603618,-9.087164 4.009043,-4.009043 z",LAND:20,FOREST:60,MOUNTAINS:50,CENTER:{X:-50,Y:-28},NEIGHBOURS:[21,22,30,32],WEALTH:0,TROOPS:[]},{ID:32,PATH:"m -64.946495,-102.83521 -1.069078,10.42351 -9.888971,5.879928 -5.34539,11.49259 -9.621705,1.336347 -2.138157,8.552627 6.414471,-0.801809 5.879928,3.474503 -2.939965,8.285355 -2.939963,12.561668 -10.156242,-1.870887 -3.207235,8.552624 -7.750818,4.276312 3.20723,8.285357 12.027137,3.474503 7.750813,-7.216276 13.630746,-4.276312 4.276312,-8.285356 -1.603616,-4.810852 5.34539,-1.870887 0.80181,8.018086 4.543581,0.267269 4.810852,-9.354434 22.317004,-3.207234 3.207234,-4.81085 7.884452,-2.672696 8.953529,3.608139 -3.427973,-6.663516 4.1577382,-10.583333 4.5357142,-7.559521 -6.9925594,-6.614581 -5.102679,-1.322919 -9.072777,-2.402073 -15.234365,0.267269 -12.561667,-1.603616 z",LAND:20,FOREST:40,MOUNTAINS:90,CENTER:{X:-57,Y:-64},NEIGHBOURS:[21,30,31,33,34,35,36,52],WEALTH:0,TROOPS:[]},{ID:33,PATH:"m 56.794775,-90.808084 0.846593,-10.200846 11.339287,-10.01637 -9.092728,-8.51199 -10.075318,-5.00147 -5.635252,-10.79329 -7.313215,1.72579 -1.716291,5.14658 -4.468898,3.86557 -14.384054,0.56892 -4.199661,-7.69708 -6.5002804,4.10109 -3.9743132,9.24176 -7.6666341,4.15346 0.6681736,7.75293 -7.1898919,3.9522 -4.819197,16.252975 5.102679,1.322917 6.9925594,6.614583 -4.5357142,7.559521 -4.1577382,10.583333 3.427973,6.663516 3.8754078,-4.81085 5.74629489,0.935442 10.02260701,-6.280832 2.5390603,-9.755339 8.018086,-8.819896 13.363476,5.078122 3.608139,-6.681737 7.082642,-7.349911 z",LAND:30,FOREST:50,MOUNTAINS:70,CENTER:{X:20,Y:-101},NEIGHBOURS:[-1,20,21,32,34],WEALTH:0,TROOPS:[]},{ID:34,PATH:"m 5.5949574,-127.62118 -12.8112346,-9.42453 -4.8108518,-9.6217 -10.95805,-2.6727 -5.879928,-10.42351 -9.354434,5.34539 -9.087165,9.88897 -16.83798,-4.00904 -5.612659,7.75082 9.888972,14.43255 2.672696,14.96709 -7.750818,8.55263 10.690781,12.828935 12.561667,1.603616 15.234365,-0.267269 9.072777,2.402073 4.819197,-16.252975 7.189892,-3.9522 -0.6681737,-7.75293 7.6666341,-4.15346 z",LAND:30,FOREST:60,MOUNTAINS:50,CENTER:{X:-34,Y:-117},NEIGHBOURS:[-1,32,33,35],WEALTH:0,TROOPS:[]},{ID:35,PATH:"m -69.757345,-140.78748 -4.276315,-2.53906 -8.819893,1.46998 -4.142676,8.68626 -7.216278,0.53454 -2.004523,4.94448 -9.88897,1.87089 1.06908,6.28083 7.349908,7.34992 -1.870885,8.81989 7.349911,6.280834 3.741774,8.552624 6.414468,3.207234 0.801812,10.289876 5.345388,-11.49259 9.888971,-5.879928 1.069078,-10.42351 7.750818,-8.55263 -2.672696,-14.96709 z",LAND:20,FOREST:10,MOUNTAINS:20,CENTER:{X:-81,Y:-112},NEIGHBOURS:[-1,32,34,52,53],WEALTH:0,TROOPS:[]},{ID:36,PATH:"m -121.34037,-23.188894 -6.949,-5.879929 -1.06908,-12.561668 -8.28535,-0.267269 -4.54359,5.34539 -5.61266,-10.423511 5.34539,-10.156243 12.2944,-4.81085 -4.27631,-8.285355 0.53454,-16.570712 4.27631,4.009044 1.87089,5.879928 6.68174,5.078121 9.35443,-4.81085 6.94901,4.009041 3.20723,-7.483546 10.690783,6.414468 -2.138159,8.552627 6.414471,-0.801809 5.879928,3.474503 -2.939965,8.285355 -2.939963,12.561668 -10.15624,-1.870887 -3.207237,8.552624 -7.750818,4.276312 z",LAND:20,FOREST:60,MOUNTAINS:10,CENTER:{X:-114,Y:-52},NEIGHBOURS:[30,32,37,50,51,52],WEALTH:0,TROOPS:[]},{ID:37,PATH:"m -192.57887,9.1711303 7.37054,2e-7 4.53571,-4.9136905 7.9375,2.8348215 5.29167,3.5907735 5.85863,-3.4017854 5.48066,0.9449403 3.96875,-7.37053545 -6.23661,-5.66964285 -2.07887,-5.2916666 6.42559,0.3779764 4.91369,-3.7797624 -0.18898,-6.236607 h 7.55952 l 6.23661,-3.212797 1.70089,-5.480656 5.5142,-0.631322 6.949,5.879929 -3.20723,8.552625 -15.7689,4.8108514 1.60362,11.7598591 6.94901,4.0090428 -4.68553,5.1175267 2.64583,7.370536 -6.99256,7.9375 -11.71726,-0.377976 -11.33929,-6.236607 -16.28698,1.423383 -20.31248,-8.552624 7.30631,-0.241295 z",LAND:10,FOREST:30,MOUNTAINS:10,CENTER:{X:-146,Y:10},NEIGHBOURS:[29,30,36,49,50,107],WEALTH:0,TROOPS:[]},{ID:38,PATH:"m -210.91071,87.979162 -16.80293,-8.536559 5.3454,-13.898015 17.35916,-9.795427 17.53764,3.566014 15.30329,-12.724403 1.88988,13.04018 10.96131,9.449403 -2.26786,8.315476 7.18155,7.748511 -3.59078,11.150301 -5.48065,0.944938 -10.96131,-1.511903 4.53571,5.480652 -10.20535,6.99256 -12.66221,-5.85863 -3.0238,-12.095238 -10.20536,-10.961309 z",LAND:30,FOREST:60,MOUNTAINS:0,CENTER:{X:-183,Y:80},NEIGHBOURS:[-2,28,29,47,107],WEALTH:0,TROOPS:[]},{ID:39,PATH:"m -249.46428,177.74851 0.75595,-13.41816 16.06399,-11.33928 -5.10268,-10.01637 -5.85863,-12.09524 17.19791,-4.53571 2.64584,-7.74851 -6.4256,-8.12649 6.23661,-2.26786 6.99256,7.9375 -1.51191,12.47321 13.41816,-6.42559 7.55952,-10.58333 16.63095,6.80357 6.04762,11.33928 11.33929,-4.15773 8.12649,7.74851 -3.02381,14.74107 5.09295,10.0761 -6.41447,8.95353 -1.73725,-5.34539 -3.60814,-4.40995 -7.48355,0.80181 1.73725,4.27631 -2.40542,7.61718 h -7.08264 l -4.00905,9.2208 -6.1472,4.27631 -13.29962,-11.84314 -0.18899,8.50441 -14.74107,1.32297 -12.66221,-7.18155 0.56697,9.82733 -13.60714,7.9375 z",LAND:20,FOREST:100,MOUNTAINS:50,CENTER:{X:-202,Y:151},NEIGHBOURS:[-2,27,28,40,41,109],WEALTH:0,TROOPS:[]},{ID:40,PATH:"m -182.94599,197.97664 -6.23109,10.57693 5.85863,10.20536 -14.93006,0.18898 -2.91317,-7.67206 -6.15826,-0.0764 -4.7247,6.4256 5.48065,10.20535 -3.21279,10.39435 -8.88244,6.99256 -5.66965,2.45684 -4.34672,-3.59077 -9.82738,-4.53571 1.13392,-13.60715 6.61459,-9.26041 -0.94494,-6.61459 -6.12787,-0.5266 -9.93612,6.76321 -4.15774,10.96131 -7.35164,10.34705 -1.33945,-7.70599 0.5646,-10.76755 -2.06955,-10.52743 6.53439,-10.09117 11.22118,-6.4067 13.60714,-7.9375 -0.56697,-9.82738 12.66221,7.18155 14.74107,-1.32292 0.18899,-8.50446 13.29962,11.84314 3.87541,7.8845 6.28084,0.93545 z",LAND:30,FOREST:60,MOUNTAINS:0,CENTER:{X:-220,Y:202},NEIGHBOURS:[-1,27,39,41],WEALTH:0,TROOPS:[]},{ID:41,PATH:"m -260.61222,229.9045 -16.25534,-4.53099 0.56697,9.63839 -25.13541,3.40179 -11.71726,-3.02381 -4.72472,-13.98512 4.91371,-13.79613 -8.31548,-13.98512 6.61458,-10.39435 14.1741,4.91369 7.9375,-11.33928 12.28423,-7.55953 2.07886,-11.33928 13.60715,5.10268 0.18899,11.1503 14.93006,3.59077 5.10268,14.36309 -11.22118,6.40675 -6.53439,10.09117 2.06955,10.52738 z",LAND:20,FOREST:60,MOUNTAINS:10,CENTER:{X:-283,Y:201},NEIGHBOURS:[-1,-2,39,40,42,43],WEALTH:0,TROOPS:[]},{ID:42,PATH:"m -317.87798,221.40476 -5.25087,-3.51654 -10.15624,5.07812 1.60361,10.15624 -5.3454,5.61266 -12.56165,3.74177 -10.42352,-6.949 2.67268,-9.88898 -8.28534,-6.41447 1.33635,-8.28535 7.48356,-9.6217 -3.47451,-8.01809 11.75986,-2.93996 10.15624,-2.13816 6.41445,-8.01809 5.3454,4.00905 11.93819,-0.9831 -6.61458,10.39435 8.31548,13.98512 z",LAND:10,FOREST:60,MOUNTAINS:20,CENTER:{X:-340,Y:210},NEIGHBOURS:[-1,41,43,44,65],WEALTH:0,TROOPS:[]},{ID:43,PATH:"m -314.66517,183.22916 -11.93819,0.9831 -5.3454,-4.00905 -8.5526,-0.8018 1.60361,-12.02713 -4.27633,-10.15625 7.48356,0.26728 8.28534,8.81989 -1.33633,-10.15624 -7.48355,-9.35444 5.61266,-6.68173 5.87994,1.33634 -4.54358,-11.75986 14.79986,-0.88868 4.15774,12.47322 19.65476,3.77976 12.4732,12.85119 -2.07886,11.33928 -12.28423,7.55953 -7.9375,11.33928 z",LAND:20,FOREST:60,MOUNTAINS:0,CENTER:{X:-308,Y:163},NEIGHBOURS:[-2,41,42,44,45],WEALTH:0,TROOPS:[]},{ID:44,PATH:"m -339.69957,130.22381 -10.4235,1.60362 -3.74179,7.75082 -8.01806,5.07812 -5.87994,15.50163 8.28534,7.75082 -4.54358,12.56166 -11.49257,7.75082 2.4054,12.2944 8.81991,10.42351 7.48356,-9.6217 -3.47451,-8.01809 21.9161,-5.07812 6.41445,-8.01809 -8.5526,-0.8018 1.60361,-12.02713 -4.27633,-10.15625 7.48356,0.26728 8.28534,8.81989 -1.33633,-10.15624 -7.48355,-9.35444 5.61266,-6.68173 5.87994,1.33634 -4.54358,-11.75986 -4.27633,4.00905 z",LAND:20,FOREST:40,MOUNTAINS:10,CENTER:{X:-351,Y:162},NEIGHBOURS:[42,43,45,63,64,65],WEALTH:0,TROOPS:[]},{ID:45,PATH:"m -320.45616,56.190154 -13.89801,2.405425 -12.82895,-2.672693 -0.53454,10.958049 -10.4235,12.561668 11.75986,3.207234 -2.40544,13.630746 8.0181,15.768897 8.55263,1.87089 -7.48356,16.30344 6.1472,3.47451 4.27633,-4.00905 14.79986,-0.88868 8.31546,-15.11904 -14.36309,-25.324407 12.85121,-1.13393 -14.11992,-9.116957 -4.00904,-12.561668 z",LAND:20,FOREST:50,MOUNTAINS:0,CENTER:{X:-330,Y:97},NEIGHBOURS:[-2,43,44,46,62,63],WEALTH:0,TROOPS:[]},{ID:46,PATH:"m -307.6726,87.223213 -14.11992,-9.116957 -4.00904,-12.561668 5.3454,-9.354434 -1.33636,-14.699823 -10.69078,-1.336347 -2.67269,-8.552625 6.41448,-2.138156 19.24341,-3.207235 8.81989,4.810851 13.63075,-10.69078 17.37251,-4.810852 14.16529,4.009043 9.35443,-0.534539 11.75986,-5.61266 10.95805,7.750816 -8.55263,15.501634 -7.21627,-1.870888 -8.8199,-6.147199 -6.41447,9.087165 1.60362,9.888971 -12.56167,0.267269 -10.95804,-4.009043 -8.01809,2.405427 1.60361,11.225318 7.75081,13.898018 -17.90705,7.483546 0.75181,9.827051 z",LAND:30,FOREST:60,MOUNTAINS:80,CENTER:{X:-286,Y:38},NEIGHBOURS:[-2,45,47,48,60,61,62],WEALTH:0,TROOPS:[]},{ID:47,PATH:"m -292.17559,88.735116 -0.75181,-9.827051 17.90705,-7.483546 -7.75081,-13.898018 -1.60361,-11.225318 8.01809,-2.405427 10.95804,4.009043 12.56167,-0.267269 -1.60362,-9.888971 6.41447,-9.087165 8.8199,6.147199 7.21627,1.870888 8.55263,9.621702 1.06908,19.243405 -5.3454,13.898015 16.80293,8.536559 -21.92262,5.291669 h -15.875 l -9.07143,17.008929 -19.65475,-1.88988 -10.96132,-9.071428 z",LAND:10,FOREST:60,MOUNTAINS:50,CENTER:{X:-254,Y:73},NEIGHBOURS:[-2,38,46,107],WEALTH:0,TROOPS:[]},{ID:48,PATH:"m -234.39537,13.427031 1.18406,-11.2484599 -5.66964,-8.5044643 3.77976,-9.4494048 4.15774,2.834822 3.2128,-7.9375 -6.23661,-6.99256 2.83482,-9.071427 13.41816,-4.535715 11.52827,7.9375 2.07887,12.473214 8.50446,0.755952 3.02381,6.992559 -0.37797,12.47321459 -5.48066,2.45684521 5.85863,7.5595237 -0.56696,3.2127975 -7.30631,0.241295 -22.98518,8.552624 z",LAND:20,FOREST:60,MOUNTAINS:0,CENTER:{X:-216,Y:-3},NEIGHBOURS:[-3,37,46,49,60,107],WEALTH:0,TROOPS:[]},{ID:49,PATH:"m -149.11161,-13.507441 -8.69345,-3.96875 1.32292,-8.504464 -9.07143,-3.968749 -7.37054,4.157737 -2.64583,-5.85863 -7.18155,-5.669642 -7.74851,0.377976 -5.66964,-6.425597 -7.37054,3.023809 -2.64583,6.803573 2.07887,12.473214 8.50446,0.755952 3.02381,6.992559 -0.37797,12.47321459 -5.48066,2.45684521 5.85863,7.5595235 h 7.37054 l 4.53571,-4.9136903 7.9375,2.8348215 5.29167,3.5907735 5.85863,-3.4017854 5.48066,0.9449401 3.96875,-7.37053525 -6.23661,-5.66964285 -2.07887,-5.2916666 6.42559,0.3779766 z",LAND:20,FOREST:40,MOUNTAINS:0,CENTER:{X:-177,Y:-11},NEIGHBOURS:[-3,37,48,50],WEALTH:0,TROOPS:[]},{ID:50,PATH:"m -178.02678,-53.572917 8.12648,-2.078869 3.2128,-7.181548 -5.10268,-9.260416 6.99256,0.94494 4.34673,3.590775 3.40178,-5.858632 -3.77976,-4.724702 7.9375,-2.078868 9.6384,0.944941 1.70089,7.370535 7.11551,1.676434 4.27631,8.285353 -12.2944,4.81085 -5.34539,10.156243 5.61266,10.423511 4.54359,-5.34539 8.28535,0.267269 1.06908,12.561668 -5.5142,0.631322 -1.70089,5.480656 -6.23661,3.212797 h -7.55952 l 0.18898,6.236607 -8.69345,-3.96875 1.32292,-8.504464 -9.07143,-3.968749 -0.56696,-6.425597 -10.39435,-1.322917 1.32292,-7.370534 z",LAND:30,FOREST:60,MOUNTAINS:0,CENTER:{X:-159,Y:-47},NEIGHBOURS:[-3,36,37,49,51],WEALTH:0,TROOPS:[]},{ID:51,PATH:"m -188.23214,-70.581845 4.61798,-8.199109 7.75081,-0.801809 -3.4745,-8.018087 9.88897,-3.474503 -7.21627,-6.147199 3.20723,-2.405425 2.67269,2.405425 5.87993,-1.069078 -0.53454,-6.1472 5.87993,-1.33635 3.47451,-3.74177 8.81989,1.46998 6.28084,4.54359 -3.74178,2.67269 4.54358,5.07812 8.8199,-2.806326 6.81537,1.336346 1.60362,4.27631 4.00904,-1.603616 5.07812,4.409948 -3.34087,3.073601 5.7463,5.612659 -0.26727,4.81085 -9.35443,4.81085 -6.68174,-5.078121 -1.87089,-5.879928 -4.27631,-4.009044 -0.53454,16.570714 -7.11551,-1.676434 -1.70089,-7.370535 -9.6384,-0.944941 -7.9375,2.078868 3.77976,4.724702 -3.40178,5.858632 -4.34673,-3.590775 -6.99256,-0.944938 5.10268,9.260414 -3.2128,7.181548 -8.12648,2.078869 -8.12649,-9.638393 z",LAND:10,FOREST:30,MOUNTAINS:50,CENTER:{X:-153,Y:-90},NEIGHBOURS:[-3,36,50,52,55,56],WEALTH:0,TROOPS:[]},{ID:52,PATH:"m -111.71866,-76.642798 0.26727,-4.810852 -5.7463,-5.612659 3.34087,-3.073601 -5.07812,-4.409946 -4.00904,1.603616 -1.60362,-4.276312 2.93997,-5.879928 -2.53906,-4.40995 4.67721,-2.13815 1.60362,-5.21176 4.40995,-4.81085 8.41899,0.13363 7.34991,7.34992 -1.870887,8.81989 7.349913,6.280836 3.741772,8.552622 6.414468,3.207234 0.801812,10.289876 -9.621705,1.336347 -10.690783,-6.414466 -3.20723,7.483544 z",LAND:10,FOREST:20,MOUNTAINS:10,CENTER:{X:-107,Y:-93},NEIGHBOURS:[35,36,51,53,55],WEALTH:0,TROOPS:[]},{ID:53,PATH:"m -82.853553,-141.85656 -4.810852,-2.27179 -0.400902,-7.48355 -4.409948,-3.20723 -10.824415,-0.13364 -4.00904,4.94449 -6.01357,-1.20271 0.53454,-7.88446 -4.94449,0.40091 -9.88897,2.27179 -0.4009,7.21628 -4.67722,5.74629 3.60814,5.34539 7.34991,3.20723 -0.26727,7.88446 2.00452,6.28083 -2.00452,5.7463 4.14268,0.13363 4.40995,-4.81085 8.41899,0.13363 -1.06908,-6.28083 9.88897,-1.87089 2.004523,-4.94448 7.216278,-0.53454 z",LAND:10,FOREST:10,MOUNTAINS:10,CENTER:{X:-111,Y:-137},NEIGHBOURS:[-1,35,52,54,55],WEALTH:0,TROOPS:[]},{ID:54,PATH:"m -158.08992,-140.25295 -6.94901,-1.60361 -3.20724,-3.34087 -6.68173,-1.06908 -2.00453,-3.87541 -0.26727,-2.27179 2.53907,-5.74629 11.35895,-3.20724 6.5481,4.67722 7.34992,-3.74178 5.34539,3.07361 2.53906,3.74177 6.5481,-4.27631 7.34991,1.46998 -0.4009,7.21628 -4.67722,5.74629 -0.80181,4.81085 -4.14267,0.93545 -7.61719,-0.80181 -4.54358,-4.67722 z",LAND:10,FOREST:10,MOUNTAINS:0,CENTER:{X:-153,Y:-150},NEIGHBOURS:[-1,53,55,56],WEALTH:0,TROOPS:[]},{ID:55,PATH:"m -124.5476,-97.22255 -6.81537,-1.336349 -8.8199,2.806329 -4.54358,-5.07812 3.74178,-2.67269 -6.28084,-4.54359 -0.53454,-6.949 -8.28535,-2.13816 -4.00904,-5.47903 3.8754,-5.21175 -4.40994,-5.21176 2.53906,-7.21628 8.28535,-2.93996 4.54358,4.67722 7.61719,0.80181 4.14267,-0.93545 0.80181,-4.81085 3.60814,5.34539 7.34991,3.20723 -0.26727,7.88446 2.00452,6.28083 -2.00452,5.7463 4.14268,0.13363 -1.60362,5.21176 -4.67721,2.13815 2.53906,4.40995 z",LAND:10,FOREST:20,MOUNTAINS:0,CENTER:{X:-136,Y:-119},NEIGHBOURS:[51,52,53,54,56],WEALTH:0,TROOPS:[]},{ID:56,PATH:"m -174.9279,-146.26651 -8.57954,-0.28855 -7.37053,-6.80357 2.64583,-6.04762 -12.47321,0.37798 -7.37054,8.69345 -9.44941,3.40179 -8.12648,7.37053 6.2366,8.12649 8.12649,1.32292 -2.45684,6.61458 -11.52828,2.64583 1.13393,7.37054 -1.88988,10.96131 2.64583,10.016367 4.91369,1.511904 1.88989,10.205357 6.99255,1.511906 -2.07886,3.212798 6.42559,5.669643 17.00893,-0.18899 4.61798,-8.199109 7.75081,-0.801809 -3.4745,-8.018087 9.88897,-3.474503 -7.21627,-6.147197 3.20723,-2.405424 2.67269,2.405424 5.87993,-1.069078 -0.53454,-6.147202 5.87993,-1.33635 3.47451,-3.74177 8.81989,1.46998 -0.53454,-6.949 -8.28535,-2.13816 -4.00904,-5.47903 3.8754,-5.21175 -4.40994,-5.21176 2.53906,-7.21628 -6.94901,-1.60361 -3.20724,-3.34087 z",LAND:10,FOREST:80,MOUNTAINS:40,CENTER:{X:-192,Y:-118},NEIGHBOURS:[-1,-3,51,54,55,57,58],WEALTH:0,TROOPS:[]},{ID:57,PATH:"m -225.65178,-139.5625 -6.99256,0.94494 -4.15774,-5.29167 1.13393,-5.10267 -4.34673,-7.9375 -8.50446,-0.75596 -10.96131,3.96875 -6.80358,6.04762 3.40179,13.04018 -5.66964,4.7247 -4.53573,10.01637 7.55955,9.6384 9.26041,-1.32292 4.53571,8.69345 7.74851,4.15774 7.74851,-1.32292 5.10268,6.236611 3.2128,3.779761 4.53571,-2.456845 -2.64583,-10.016367 1.88988,-10.96131 -1.13393,-7.37054 11.52828,-2.64583 2.45684,-6.61458 -8.12649,-1.32292 z",LAND:30,FOREST:60,MOUNTAINS:50,CENTER:{X:-248,Y:-125},NEIGHBOURS:[-1,56,58,75,76],WEALTH:0,TROOPS:[]},{ID:58,PATH:"m -251.73214,-102.89881 -4.15774,4.535716 2.45685,4.913691 -2.26786,7.74851 -4.7247,4.724702 2.26785,6.614583 -4.34672,5.480656 -4.7247,0.755952 0.56697,3.212798 3.21279,2.456847 4.91369,0.566962 -1.32292,4.913691 6.23661,5.480656 6.42559,-4.724705 -4.7247,-7.74851 7.74851,-6.992559 17.76488,0.94494 14.74108,-6.047618 2.07886,-3.212798 -6.99255,-1.511906 -1.88989,-10.205355 -4.91369,-1.511906 -4.53571,2.456847 -8.31548,-10.016374 -7.74851,1.32292 z",LAND:30,FOREST:60,MOUNTAINS:20,CENTER:{X:-241,Y:-84},NEIGHBOURS:[-3,56,57,59,75],WEALTH:0,TROOPS:[]},{ID:59,PATH:"m -295.86737,-44.035916 0.66797,-5.568251 4.72471,-5.102678 0.37796,-7.181548 7.37055,0.377976 4.5357,-5.858629 0.94496,-6.425597 5.85861,-1.322917 5.66966,-4.346725 7.55951,5.102677 -4.34672,5.480656 -4.7247,0.755954 0.56697,3.212796 3.21279,2.456847 4.91369,0.566962 -1.32292,4.913691 6.23661,5.480656 6.42559,-4.724705 8.31548,1.511906 1.70089,3.96875 -11.15029,3.212799 -4.53572,7.74851 1.51191,7.559524 -7.9375,1.133928 -7.55952,5.291667 -13.98513,-1.322917 -0.86577,-5.963283 9.08716,2.405425 2.40544,-9.087162 -8.55263,-7.216277 -6.68174,-4.276312 z",LAND:10,FOREST:60,MOUNTAINS:0,CENTER:{X:-267,Y:-50},NEIGHBOURS:[-3,58,60,61,74,75],WEALTH:0,TROOPS:[]},{ID:60,PATH:"m -287.04746,20.376039 -7.77396,-7.614135 3.02382,-10.5833329 -6.23663,-1.1339286 -2.07886,-4.5357142 4.5357,-3.0238094 h 6.42562 l 6.2366,1.3229166 3.49628,-3.9687502 -7.27604,-6.6145833 -1.7009,-6.614583 7.55952,-4.724703 13.98513,1.322917 7.55952,-5.291667 7.9375,-1.133928 3.96875,2.456844 8.31547,-3.77976 h 2.83482 l 2.26786,5.669642 6.23661,6.99256 -3.2128,7.9375 -4.15774,-2.834822 -3.77976,9.4494048 5.66964,8.5044643 -1.18406,11.2484599 -11.75986,5.61266 -9.35443,0.534539 -14.16529,-4.009043 z",LAND:20,FOREST:60,MOUNTAINS:0,CENTER:{X:-262,Y:-5},NEIGHBOURS:[-3,46,48,59,61],WEALTH:0,TROOPS:[]},{ID:61,PATH:"m -336.22506,9.9525269 1.87089,-6.4144683 -6.14719,-7.216277 2.93994,-9.3544336 6.41448,-6.681738 -5.61266,-9.621702 2.40543,-10.156243 10.15625,-5.078121 10.69078,5.34539 7.21627,-9.087162 10.4235,4.276312 10.42352,-7.216277 6.68174,4.276312 8.55263,7.216277 -2.40544,9.087162 -9.08716,-2.405425 0.86577,5.963283 -7.55952,4.724703 1.7009,6.614583 7.27604,6.6145833 -3.49628,3.9687502 -6.2366,-1.3229166 h -6.42562 l -4.5357,3.0238094 2.07886,4.5357142 6.23663,1.1339286 -3.02382,10.5833329 7.77396,7.614135 -13.63075,10.69078 -8.81989,-4.810851 -6.41448,-9.354433 -12.56167,0.801808 z",LAND:30,FOREST:60,MOUNTAINS:0,CENTER:{X:-313,Y:-14},NEIGHBOURS:[46,59,60,62,72,73,74],WEALTH:0,TROOPS:[]},{ID:62,PATH:"m -395.36309,71.726189 -0.46307,-6.716139 9.08717,-6.949008 -2.13818,-9.087165 -9.35442,-8.285356 7.48355,-4.00904 8.01809,2.405425 8.28535,-0.534541 2.40543,-6.147196 5.34538,-8.819896 7.48355,-5.61266 7.75081,3.741773 4.27631,-4.276312 2.67271,-9.621703 8.28535,2.1381561 7.75081,7.7508159 12.56167,-0.801808 6.41448,9.354433 -19.24341,3.207235 -6.41448,2.138156 2.67269,8.552625 10.69078,1.336347 1.33636,14.699823 -13.89801,2.405425 -12.82895,-2.672693 -0.53454,10.958049 -15.51744,4.467278 -8.69347,5.291664 z",LAND:40,FOREST:50,MOUNTAINS:50,CENTER:{X:-355,Y:44},NEIGHBOURS:[45,46,61,63,70,71,72],WEALTH:0,TROOPS:[]},{ID:63,PATH:"m -361.88292,144.65637 -14.95933,1.53113 -10.20535,-6.80357 -6.80358,-11.33929 -19.65476,5.29167 -3.4018,-19.65476 9.44941,-6.4256 4.53573,4.91369 13.60712,-3.02381 2.26788,-10.205354 -9.44941,-15.119048 -11.3393,-4.535715 12.47322,-7.559524 23.43452,4.91369 8.69347,-5.291666 15.51744,-4.467278 -10.4235,12.561668 11.75986,3.207234 -2.40544,13.630746 8.0181,15.768897 8.55263,1.87089 -7.48356,16.30344 -10.4235,1.60362 -3.74179,7.75082 z",LAND:30,FOREST:100,MOUNTAINS:10,CENTER:{X:-370,Y:112},NEIGHBOURS:[44,45,62,64,68,69],WEALTH:0,TROOPS:[]},{ID:64,PATH:"m -408.65509,185.5486 -2.40543,-5.07812 7.48355,-5.34539 -2.67272,-6.68174 8.81992,-1.06907 3.20722,4.81085 5.34538,-2.6727 -3.20723,-6.41447 -5.07812,-2.13815 0.53454,-6.41447 5.61266,-2.6727 2.67271,-6.68173 1.29501,-5.80698 10.20535,6.80357 14.95933,-1.53113 -5.87994,15.50163 8.28534,7.75082 -4.54358,12.56166 -11.49257,7.75082 2.4054,12.2944 -15.7689,3.74177 -8.5526,-5.61266 -1.33636,-12.02713 z",LAND:10,FOREST:10,MOUNTAINS:40,CENTER:{X:-380,Y:174},NEIGHBOURS:[44,63,65,67,68],WEALTH:0,TROOPS:[]},{ID:65,PATH:"m -373.10827,200.5157 -15.7689,3.74177 -8.5526,-5.61266 -6.41448,-8.28535 -8.81989,12.56166 -9.6217,6.68174 -0.80182,13.63075 6.68173,10.95805 7.75084,4.54358 1.87087,-6.41447 -4.2763,-4.81085 9.35442,-0.80181 8.01809,4.81085 5.87994,-3.74177 3.74177,9.35443 6.14719,-5.34539 8.01809,-1.06908 12.56165,-5.07812 -8.28534,-6.41447 1.33635,-8.28535 z",LAND:10,FOREST:70,MOUNTAINS:0,CENTER:{X:-392,Y:217},NEIGHBOURS:[-1,42,44,64,66,67],WEALTH:0,TROOPS:[]},{ID:66,PATH:"m -408.65509,238.73524 -11.75988,4.81085 -2.40541,9.6217 -9.35445,9.35444 2.40543,11.22531 -4.81084,6.68174 -6.68176,2.40543 -11.22532,1.33636 -6.41445,-2.93997 1.33633,-4.54359 7.48356,-0.80182 6.94901,-2.67268 1.06908,-6.1472 -1.8709,-7.48355 -13.09621,1.06908 -6.94899,-4.27631 -5.87994,-14.16529 4.54358,-9.08716 5.07812,-8.55262 7.48356,4.81085 11.75985,0.80181 7.21628,-4.00905 10.69078,-2.93996 6.68173,10.95805 z",LAND:10,FOREST:50,MOUNTAINS:20,CENTER:{X:-444,Y:246},NEIGHBOURS:[-1,65,67,90],WEALTH:0,TROOPS:[]},{ID:67,PATH:"m -476.80882,228.31173 4.2763,-8.28536 -2.93997,-9.35443 9.35445,-4.00904 v -5.61266 l 4.54358,-8.55263 3.47449,2.6727 -2.13816,6.68174 1.60362,4.00904 9.08717,-4.81085 0.53453,-8.28536 8.81991,-6.949 10.69079,0.8018 6.68173,5.07812 6.41445,-5.61266 7.75084,-0.53454 9.88896,1.06908 1.33636,12.02713 -6.41448,-8.28535 -8.81989,12.56166 -9.6217,6.68174 -0.80182,13.63075 -10.69078,2.93996 -7.21628,4.00905 -11.75985,-0.80181 -7.48356,-4.81085 -5.07812,8.55262 z",LAND:20,FOREST:60,MOUNTAINS:20,CENTER:{X:-443,Y:211},NEIGHBOURS:[64,65,66,68,89,90,91],WEALTH:0,TROOPS:[]},{ID:68,PATH:"m -449.01281,192.76488 -4.36962,-7.07887 5.48066,-5.48066 -11.52829,-7.55952 -3.77976,-10.39434 16.06399,-4.15774 8.12649,-6.99256 3.40178,-8.88244 -2.45684,-6.99256 6.2366,-6.99256 8.50447,0.37797 -0.18899,-9.07142 -4.72469,-4.91369 5.29167,-1.13393 6.0476,0.18899 3.4018,19.65476 19.65476,-5.29167 6.80358,11.33929 -1.29501,5.80698 -2.67271,6.68173 -5.61266,2.6727 -0.53454,6.41447 5.07812,2.13815 3.20723,6.41447 -5.34538,2.6727 -3.20722,-4.81085 -8.81992,1.06907 2.67272,6.68174 -7.48355,5.34539 2.40543,5.07812 -7.75084,0.53454 -6.41445,5.61266 -6.68173,-5.07812 -10.69079,-0.8018 z",LAND:30,FOREST:50,MOUNTAINS:30,CENTER:{X:-423,Y:160},NEIGHBOURS:[63,64,67,69,87,88],WEALTH:0,TROOPS:[]},{ID:69,PATH:"m -430.78607,119.90506 -6.73414,-7.05377 2.13815,-8.55262 6.41448,-6.949009 -11.22532,-2.672694 -10.15624,5.345393 -1.60364,-7.750818 6.41448,-4.810853 -6.41448,-5.612659 7.2163,-7.483549 10.69078,-2.405425 -4.27633,-4.276312 5.07812,-9.621702 14.16529,4.009043 4.81087,10.423512 6.43144,6.792116 11.3393,4.535715 9.44941,15.119048 -2.26788,10.205354 -13.60712,3.02381 -4.53573,-4.91369 -9.44941,6.4256 -6.0476,-0.18899 -5.29167,1.13393 z",LAND:30,FOREST:50,MOUNTAINS:0,CENTER:{X:-420,Y:91},NEIGHBOURS:[63,68,70,87,88],WEALTH:0,TROOPS:[]},{ID:70,PATH:"m -407.83631,79.285713 -6.43144,-6.792116 -4.81087,-10.423512 -14.16529,-4.009043 -11.22531,3.474503 -0.53454,-13.096206 8.55263,-7.750818 0.26725,-8.285352 5.34541,-8.285357 -4.54359,-4.810852 15.76891,-0.534539 9.08716,8.819895 10.69078,-5.345391 10.95804,2.405426 6.14722,14.432555 -8.01809,-2.405425 -7.48355,4.00904 9.35442,8.285356 2.13818,9.087165 -9.08717,6.949008 0.46307,6.716139 z",LAND:20,FOREST:60,MOUNTAINS:50,CENTER:{X:-417,Y:47},NEIGHBOURS:[62,63,69,71,85,87],WEALTH:0,TROOPS:[]},{ID:71,PATH:"m -366.69379,23.583273 -3.72287,-9.876428 -9.82739,-5.1026787 -7.74851,-0.3779764 -1.13393,-6.2366069 0.37799,-6.047619 -6.99257,-0.1889881 -3.40177,4.34672617 -7.74851,-1.88988097 -6.23663,-6.8035713 -4.15774,3.5907736 -5.48063,5.85863105 -10.20538,-4.72470225 -3.21278,-6.4255952 -5.85864,2.6458331 0.37798,6.0476191 6.2366,4.1577381 0.94493,7.3705356 -5.29166,5.1026781 -0.37796,5.858631 -2.45684,6.614585 6.42622,4.900192 5.34541,-8.285357 -4.54359,-4.810852 15.76891,-0.534539 9.08716,8.819895 10.69078,-5.345391 10.95804,2.405426 6.14722,14.432555 8.28535,-0.534541 2.40543,-6.147196 z",LAND:10,FOREST:40,MOUNTAINS:20,CENTER:{X:-405,Y:10},NEIGHBOURS:[62,70,72,84,85],WEALTH:0,TROOPS:[]},{ID:72,PATH:"m -395.74107,-4.2470241 -2.45684,-6.8035709 4.34673,-4.724703 -3.21281,-6.425595 -7.37052,-2.456845 5.29167,-4.157739 -0.189,-4.157736 4.15775,-2.834823 0.75594,-6.80357 -5.85862,-3.401787 3.77976,-1.511903 3.02379,1.889879 5.48066,-1.133928 2.64583,-4.346726 11.15031,9.638393 6.2366,-1.322917 -1.13393,6.992559 -6.80357,0.755952 -1.32292,3.779763 11.15031,1.511903 3.40178,5.10268 -1.13393,5.858631 7.37053,5.291666 9.07145,-3.023809 9.79868,3.498598 -2.93994,9.3544336 6.14719,7.216277 -1.87089,6.4144683 -8.28535,-2.1381559 -2.67271,9.621703 -4.27631,4.276312 -7.75081,-3.741773 -7.48355,5.61266 -3.72287,-9.876428 -9.82739,-5.1026787 -7.74851,-0.3779766 -1.13393,-6.2366067 0.37799,-6.047619 z",LAND:20,FOREST:60,MOUNTAINS:0,CENTER:{X:-373,Y:-5},NEIGHBOURS:[61,62,71,73,83,84],WEALTH:0,TROOPS:[]},{ID:73,PATH:"m -337.56142,-13.032652 -9.79868,-3.498598 -9.07145,3.023809 -7.37053,-5.291666 1.13393,-5.858631 -3.40178,-5.10268 -11.15031,-1.511903 1.32292,-3.779763 6.80357,-0.755952 1.13393,-6.992559 -6.42559,-4.346726 7.37052,-7.748513 3.96875,5.669645 9.26042,-1.13393 1.7009,-5.858632 8.88243,-6.992559 7.9375,3.212799 11.3393,-1.889882 6.42559,7.559524 4.72469,6.992559 6.48444,-0.975918 -7.21627,9.087162 -10.69078,-5.34539 -10.15625,5.078121 -2.40543,10.156243 5.61266,9.621702 z",LAND:10,FOREST:60,MOUNTAINS:0,CENTER:{X:-348,Y:-39},NEIGHBOURS:[61,72,74,82,83],WEALTH:0,TROOPS:[]},{ID:74,PATH:"m -343.20239,-63.21131 -2.10984,-6.883386 3.87541,-3.608139 8.95352,-2.00452 -3.34086,-5.345391 3.8754,-2.138156 5.07812,0.400905 5.21176,-3.34087 2.53908,-4.944486 5.87991,-1.469982 5.47902,-4.944486 3.11206,-1.251249 3.4018,10.583333 -11.3393,5.10268 1.51191,9.449403 9.82739,8.882441 8.50445,-2.267857 2.64583,5.102677 -0.37796,7.181548 -4.72471,5.102678 -0.66797,5.568251 -10.4235,-4.276312 -6.48444,0.975918 -4.72469,-6.992559 -6.42559,-7.559524 -11.3393,1.889882 z",LAND:10,FOREST:60,MOUNTAINS:50,CENTER:{X:-319,Y:-67},NEIGHBOURS:[59,61,73,75,77,82],WEALTH:0,TROOPS:[]},{ID:75,PATH:"m -273.08781,-119.90774 h -6.99254 l -13.04017,4.15774 -4.53573,-6.04762 -10.01635,3.59078 -2.07889,4.7247 -1.51191,6.80357 5.85865,-2.26786 3.96875,4.15774 -3.21281,6.04762 3.4018,10.583333 -11.3393,5.102678 1.51191,9.449405 9.82739,8.882441 8.50445,-2.267857 2.64583,5.102677 7.37055,0.377976 4.5357,-5.858629 0.94496,-6.425597 5.85861,-1.322917 5.66966,-4.346725 7.55951,5.102677 -2.26785,-6.614583 4.7247,-4.724702 2.26786,-7.748508 -2.45685,-4.913691 4.15774,-4.535718 -4.53571,-8.69345 -9.26041,1.32292 z",LAND:30,FOREST:60,MOUNTAINS:50,CENTER:{X:-282,Y:-93},NEIGHBOURS:[57,58,59,74,76,77],WEALTH:0,TROOPS:[]},{ID:76,PATH:"m -336.96576,-143.15327 -3.21281,-2.83482 7.37055,-3.40179 v -6.04762 l 4.72469,-5.48065 -3.96875,-6.61459 -7.74851,2.45685 -3.21281,-4.53572 0.56698,-5.85863 3.02382,-6.04762 16.44195,0.37798 9.26041,8.12649 7.37055,-3.59078 7.18154,3.40179 6.80357,9.4494 9.26042,-6.2366 5.29166,4.15774 8.50448,-2.83483 6.23659,-5.48065 6.4256,7.74851 -2.64583,8.31548 -0.18899,4.34672 -6.80358,6.04762 3.40179,13.04018 -5.66964,4.7247 -4.53573,10.01637 h -6.99254 l -13.04017,4.15774 1.88987,-6.80357 -0.56695,-7.9375 -2.26788,-7.9375 -7.37052,3.2128 -9.07143,-1.32292 -7.74851,-5.66964 -6.61458,3.02381 -3.02382,-3.59078 z",LAND:30,FOREST:60,MOUNTAINS:0,CENTER:{X:-300,Y:-150},NEIGHBOURS:[-1,57,75,77,78],WEALTH:0,TROOPS:[]},{ID:77,PATH:"m -335.82416,-81.052746 -7.18924,-0.301421 -11.33927,0.755954 -5.29167,-6.803572 3.77976,-9.260417 -6.42559,-6.047618 -9.44941,-1.51191 5.85864,-8.69345 12.09522,-2.26785 1.32292,-8.88245 13.22916,-8.31547 2.26788,-10.77232 9.07142,0.37797 3.02382,3.59078 6.61458,-3.02381 7.74851,5.66964 9.07143,1.32292 7.37052,-3.2128 2.26788,7.9375 0.56695,7.9375 -1.88987,6.80357 -4.53573,-6.04762 -10.01635,3.59078 -2.07889,4.7247 -1.51191,6.80357 5.85865,-2.26786 3.96875,4.15774 -3.21281,6.04762 -3.11206,1.251249 -5.47902,4.944488 -5.87991,1.46998 -2.53908,4.944486 -5.21176,3.34087 -5.07812,-0.400905 z",LAND:30,FOREST:60,MOUNTAINS:50,CENTER:{X:-334,Y:-112},NEIGHBOURS:[74,75,76,78,81,82],WEALTH:0,TROOPS:[]},{ID:78,PATH:"m -343.0134,-169.61161 -4.72469,3.59078 -8.31548,-5.48066 -2.83483,-5.10268 -7.37052,-2.07886 -6.42559,5.29166 -3.77976,-5.48065 -6.23663,8.50446 3.96875,9.63839 6.99257,1.7009 2.83483,6.99256 -4.91369,4.34672 -3.4018,10.01637 -7.18153,3.40179 2.64583,3.96875 6.2366,6.04762 7.9375,-5.85863 5.66965,2.07886 6.80355,-0.56696 2.64584,4.53571 13.22916,-8.31547 2.26788,-10.77232 -3.21281,-2.83482 7.37055,-3.40179 v -6.04762 l 4.72469,-5.48065 -3.96875,-6.61459 -7.74851,2.45685 z",LAND:30,FOREST:60,MOUNTAINS:50,CENTER:{X:-357,Y:-147},NEIGHBOURS:[-1,76,77,79,81],WEALTH:0,TROOPS:[]},{ID:79,PATH:"m -395.17409,-137.48363 -8.50448,-4.34673 -3.40177,-6.04762 2.83482,-8.88244 -6.42562,-4.7247 0.18899,-9.63839 5.29167,-5.48066 -3.77976,-6.04761 7.18156,-2.64584 5.48066,2.45685 7.37052,-2.64584 6.04761,6.23661 4.72472,-6.04762 7.9375,-3.2128 7.18153,4.34673 4.15774,7.55952 -7.37052,-2.07886 -6.42559,5.29166 -3.77976,-5.48065 -6.23663,8.50446 3.96875,9.63839 6.99257,1.7009 2.83483,6.99256 -4.91369,4.34672 -3.4018,10.01637 -5.29166,-2.83482 -6.04761,-1.32292 z",LAND:20,FOREST:60,MOUNTAINS:0,CENTER:{X:-394,Y:-160},NEIGHBOURS:[-1,78,80,81],WEALTH:0,TROOPS:[]},{ID:80,PATH:"m -408.97024,-182.65178 -6.42559,-3.77976 0.18899,-4.9137 -3.59076,-7.37053 -10.20538,2.45684 -2.45684,6.04762 -0.75594,9.07143 -9.44941,2.83482 -6.2366,7.18155 -1.7009,6.04762 3.96875,4.91369 -2.64583,8.31547 10.39434,2.26786 -2.64583,5.48066 7.37052,2.07887 5.48066,4.53571 6.99257,-0.18899 4.15774,5.85863 8.69344,-2.26785 8.12649,1.88988 4.53573,-5.29167 -8.50448,-4.34673 -3.40177,-6.04762 2.83482,-8.88244 -6.42562,-4.7247 0.18899,-9.63839 5.29167,-5.48066 z",LAND:30,FOREST:60,MOUNTAINS:0,CENTER:{X:-427,Y:-161},NEIGHBOURS:[-1,79,81,105],WEALTH:0,TROOPS:[]},{ID:81,PATH:"m -393.66219,-108.00149 -7.18155,-0.37797 -3.21281,-3.59078 -9.26042,-4.53571 0.94496,-5.66964 -1.88989,-4.72471 6.42559,-7.18154 8.12649,1.88988 4.53573,-5.29167 6.61458,-4.34673 6.04761,1.32292 5.29166,2.83482 -7.18153,3.40179 2.64583,3.96875 6.2366,6.04762 7.9375,-5.85863 5.66965,2.07886 6.80355,-0.56696 2.64584,4.53571 -1.32292,8.88245 -12.09522,2.26785 -9.26041,-4.34672 -3.02382,4.91369 -6.04763,3.96875 z",LAND:10,FOREST:60,MOUNTAINS:40,CENTER:{X:-395,Y:-121},NEIGHBOURS:[77,78,79,80,82,105],WEALTH:0,TROOPS:[]},{ID:82,PATH:"m -405.37947,-74.550592 -3.02379,-2.338731 5.33359,-4.84282 -1.64554,-6.324385 -5.19996,-0.290198 3.314,-5.734492 6.70236,-0.880091 1.7009,-6.803571 4.53572,-6.23661 9.44939,-0.37797 6.04763,-3.96875 3.02382,-4.91369 9.26041,4.34672 -5.85864,8.69345 9.44941,1.51191 6.42559,6.047618 -3.77976,9.260417 5.29167,6.803572 11.33927,-0.755954 7.18924,0.301421 3.34086,5.345393 -8.95352,2.004518 -3.87541,3.608139 2.10984,6.883386 -8.88243,6.992559 -1.7009,5.858632 -9.26042,1.13393 1.32292,-7.9375 -6.99254,-6.236607 -2.64583,-7.748514 -3.96875,-5.102677 -6.4256,4.535712 -8.69346,-4.346723 -8.29649,2.953056 z",LAND:30,FOREST:60,MOUNTAINS:50,CENTER:{X:-378,Y:-89},NEIGHBOURS:[74,77,81,83,103,105],WEALTH:0,TROOPS:[]},{ID:83,PATH:"m -393.47322,-45.635417 0.18899,-4.913689 -9.63837,-1.322916 -8.50448,-5.291667 0.37799,-6.803572 5.66962,-10.583333 6.63358,1.441152 8.29649,-2.953058 8.69346,4.346725 6.4256,-4.535712 3.96875,5.102677 2.64583,7.748514 6.99254,6.236607 -1.32292,7.9375 -3.96875,-5.669645 -7.37052,7.748513 6.42559,4.346726 -6.2366,1.322917 -11.15031,-9.638393 -2.64583,4.346726 z",LAND:10,FOREST:60,MOUNTAINS:0,CENTER:{X:-388,Y:-61},NEIGHBOURS:[72,73,82,84,103],WEALTH:0,TROOPS:[]},{ID:84,PATH:"m -411.42708,-57.163689 -4.91368,5.480653 1.32292,4.913691 -4.72472,6.425594 -8.50445,2.078871 -4.72472,6.614583 h -7.9375 l -8.12649,3.779761 -0.37796,-6.047618 -4.34673,-2.267858 -6.2366,10.205357 -0.75597,6.614583 3.4018,6.52009 7.74851,-2.078869 5.00819,-5.197173 7.55952,2.834821 8.59896,-1.984375 3.59076,5.953125 7.55952,8.3154764 4.15774,-3.5907736 6.23663,6.8035713 7.74851,1.88988097 3.40177,-4.34672617 -2.45684,-6.8035709 4.34673,-4.724703 -3.21281,-6.425595 -7.37052,-2.456845 5.29167,-4.157739 -0.189,-4.157736 4.15775,-2.834823 0.75594,-6.80357 -5.85862,-3.401787 3.77976,-1.511903 3.02379,1.889879 0.18899,-4.913689 -9.63837,-1.322916 z",LAND:20,FOREST:40,MOUNTAINS:0,CENTER:{X:-418,Y:-28},NEIGHBOURS:[71,72,83,85,102,103],WEALTH:0,TROOPS:[]},{ID:85,PATH:"m -480.40774,26.180059 -5.85861,-0.377977 -0.18899,-7.559523 5.57514,-3.212798 1.51191,-7.0870533 3.21278,-6.1421129 9.54392,0.188988 -1.51191,-7.9374999 6.04761,-1.8898809 4.72471,-5.008184 7.74851,-2.078869 5.00819,-5.197173 7.55952,2.834821 8.59896,-1.984375 3.59076,5.953125 7.55952,8.3154764 -5.48063,5.85863105 -10.20538,-4.72470225 -3.21278,-6.4255952 -5.85864,2.6458331 0.37798,6.0476191 6.2366,4.1577381 0.94493,7.3705354 -5.29166,5.1026783 -0.37796,5.858631 -2.45684,6.614585 6.42622,4.900192 -0.26725,8.285352 -5.97001,-5.815009 -7.55951,-2.078869 -9.26042,-2.834822 -8.69344,-0.755952 -9.07143,2.456844 z",LAND:30,FOREST:60,MOUNTAINS:0,CENTER:{X:-457,Y:11},NEIGHBOURS:[70,71,84,87,98,99,102],WEALTH:0,TROOPS:[]},{ID:86,PATH:"",LAND:0,FOREST:0,MOUNTAINS:0,CENTER:{X:0,Y:0},NEIGHBOURS:[],WEALTH:0,TROOPS:[]},{ID:87,PATH:"m -450.34914,100.02236 -1.60364,-7.750818 6.41448,-4.810855 -6.41448,-5.612657 7.2163,-7.483549 10.69078,-2.405425 -4.27633,-4.276312 5.07812,-9.621702 -11.22531,3.474503 -0.53454,-13.096206 8.55263,-7.750818 -5.97001,-5.815009 -7.55951,-2.078869 -1.32292,5.102678 1.7009,4.724701 -5.85864,5.480656 -7.9375,-7.9375 -7.37053,2.078869 -3.2128,4.157739 2.64583,4.346725 9.44941,4.157737 0.94493,8.315478 -6.42559,4.535713 -0.18899,5.669642 -1.90236,2.808288 -4.27633,1.870887 -1.46997,3.34087 -3.47451,2.138156 1.33636,8.018084 -3.87543,0.400902 0.13364,6.280838 7.48356,2.138154 3.34086,6.68174 -3.74176,1.87089 -1.47,2.93996 7.08266,-0.13363 2.80633,3.74177 5.74627,-0.93544 5.3454,-0.13364 -2.53907,2.93996 1.47,3.60814 6.94902,-3.60814 6.68173,-0.13363 4.40994,-4.40995 2.13815,-8.55262 6.41448,-6.949009 -11.22532,-2.672694 z",LAND:30,FOREST:50,MOUNTAINS:0,CENTER:{X:-459,Y:82},NEIGHBOURS:[69,70,85,88,95,98],WEALTH:0,TROOPS:[]},{ID:88,PATH:"m -437.52021,112.85129 -4.40994,4.40995 -6.68173,0.13363 -6.94902,3.60814 -1.47,-3.60814 2.53907,-2.93996 -5.3454,0.13364 -2.80633,3.74177 -7.34991,3.0736 2.13818,3.0736 -7.34992,4.00904 -7.08265,-3.34087 -2.40541,5.34539 -1.47,8.68626 2.40543,4.14268 2.80633,2.13816 -1.46997,7.75081 6.68173,-7.21627 6.68174,0.53453 5.34538,-9.35443 6.94901,1.87089 9.08717,-0.26727 12.05889,3.44231 -2.45684,-6.99256 6.2366,-6.99256 8.50447,0.37797 -0.18899,-9.07142 -4.72469,-4.91369 -2.53905,5.27857 z",LAND:30,FOREST:30,MOUNTAINS:0,CENTER:{X:-456,Y:130},NEIGHBOURS:[68,69,87,89,95],WEALTH:0,TROOPS:[]},{ID:89,PATH:"m -466.11804,206.6629 -12.02714,-5.61266 2.40543,-5.87993 -9.6217,-5.34539 -1.8709,-13.89802 3.20723,-9.6217 -7.75081,-6.41447 1.8709,-8.01809 7.48355,1.33635 6.68173,-7.21627 6.68174,0.53453 5.34538,-9.35443 6.94901,1.87089 9.08717,-0.26727 12.05889,3.44231 -3.40178,8.88244 -8.12649,6.99256 -16.06399,4.15774 3.77976,10.39434 11.52829,7.55952 -5.48066,5.48066 4.36962,7.07887 -0.53453,8.28536 -9.08717,4.81085 -1.60362,-4.00904 2.13816,-6.68174 -3.47449,-2.6727 -4.54358,8.55263 z",LAND:10,FOREST:30,MOUNTAINS:40,CENTER:{X:-474,Y:170},NEIGHBOURS:[67,68,91,94,95],WEALTH:0,TROOPS:[]},{ID:90,PATH:"m -463.97989,256.37503 -7.75081,4.81085 -12.64187,1.22944 -1.7907,-9.24753 -2.6326,-1.87088 -4.75739,0.66817 -3.47451,2.28516 -1.80407,4.07586 -5.5993,4.34313 -10.98477,-4.58367 -0.14701,-8.65954 -3.47448,-9.08716 3.74176,-8.8199 9.35442,-8.01808 9.08717,-3.20724 10.69078,8.01809 h 9.35445 l 11.49257,4.81085 -4.54358,9.08716 z",LAND:20,FOREST:60,MOUNTAINS:20,CENTER:{X:-493,Y:237},NEIGHBOURS:[-1,66,67,91],WEALTH:0,TROOPS:[]},{ID:91,PATH:"m -519.0374,240.33886 -8.80634,4.50042 -11.71726,-0.18899 -2.07889,-15.30803 2.45687,-8.88244 7.9375,-3.96875 7.9375,-0.94494 5.48063,-6.61459 5.10271,-4.53571 8.69344,0.75595 10.01635,2.83482 9.6384,-2.83482 1.32292,-4.34672 7.31382,-5.63475 -2.40543,5.87993 12.02714,5.61266 -9.35445,4.00904 2.93997,9.35443 -4.2763,8.28536 h -9.35445 l -10.69078,-8.01809 -9.08717,3.20724 -9.35442,8.01808 z",LAND:10,FOREST:50,MOUNTAINS:10,CENTER:{X:-509,Y:216},NEIGHBOURS:[-1,67,89,90,92,94],WEALTH:0,TROOPS:[]},{ID:92,PATH:"m -539.18302,220.45982 1.43674,-6.84792 -1.06907,-8.28535 -6.68174,1.33635 -10.42352,0.53454 -7.21627,-6.94901 -1.33636,-8.01809 9.6217,-4.27631 8.28535,-7.48355 9.35445,3.20724 8.81989,-5.07812 5.87994,-9.88898 7.75081,3.47451 5.34537,9.6217 2.67272,10.15624 6.41445,7.48355 6.31367,8.53998 -10.01635,-2.83482 -8.69344,-0.75595 -5.10271,4.53571 -5.48063,6.61459 -7.9375,0.94494 z",LAND:20,FOREST:60,MOUNTAINS:0,CENTER:{X:-529,Y:196},NEIGHBOURS:[-1,91,93,94],WEALTH:0,TROOPS:[]},{ID:93,PATH:"m -517.96833,134.23285 -3.20725,-6.949 -12.02711,-4.00904 -7.75084,3.74177 -3.74176,-7.48355 -8.81989,-2.13816 -5.61266,11.49259 8.01809,8.28536 -0.80182,8.28536 -7.21627,-4.00905 -5.07812,-6.68173 -8.81991,-2.40543 -2.93995,3.74177 2.40541,9.88898 -4.2763,13.0962 5.34538,8.28536 -5.07813,11.49259 -10.15621,3.74177 4.2763,5.34539 6.1472,9.88897 6.68173,-4.27631 7.48356,6.68174 -1.33636,-8.01809 9.6217,-4.27631 8.28535,-7.48355 9.35445,3.20724 8.81989,-5.07812 5.87994,-9.88898 -0.80182,-7.75081 -4.2763,-8.01809 6.14719,-6.949 z",LAND:20,FOREST:60,MOUNTAINS:20,CENTER:{X:-550,Y:161},NEIGHBOURS:[-1,92,94,95,96],WEALTH:0,TROOPS:[]},{ID:94,PATH:"m -522.51191,168.71062 -0.80182,-7.75081 -4.2763,-8.01809 6.14719,-6.949 3.47451,-11.75987 7.75081,-1.33634 2.13815,8.55262 6.41448,5.07812 1.60361,10.15625 10.15625,-4.81086 -1.8709,8.01809 7.75081,6.41447 -3.20723,9.6217 1.8709,13.89802 9.6217,5.34539 -7.31382,5.63475 -1.32292,4.34672 -9.6384,2.83482 -6.31367,-8.53998 -6.41445,-7.48355 -2.67272,-10.15624 -5.34537,-9.6217 z",LAND:10,FOREST:20,MOUNTAINS:40,CENTER:{X:-504,Y:168},NEIGHBOURS:[89,91,92,93,95],WEALTH:0,TROOPS:[]},{ID:95,PATH:"m -521.17558,127.28385 3.34819,-4.90885 10.20538,-0.56697 2.83483,-7.9375 -1.70091,-6.2366 6.4256,0.37797 0.56697,2.83483 6.2366,-2.64584 1.32292,-5.85863 8.31548,0.37798 1.88987,7.18154 7.72816,-0.92589 -1.47,2.93996 7.08266,-0.13363 2.80633,3.74177 5.74627,-0.93544 -2.80633,3.74177 -7.34991,3.0736 2.13818,3.0736 -7.34992,4.00904 -7.08265,-3.34087 -2.40541,5.34539 -1.47,8.68626 2.40543,4.14268 2.80633,2.13816 -1.46997,7.75081 -7.48355,-1.33635 -10.15625,4.81086 -1.60361,-10.15625 -6.41448,-5.07812 -2.13815,-8.55262 -7.75081,1.33634 z",LAND:30,FOREST:40,MOUNTAINS:0,CENTER:{X:-495,Y:127},NEIGHBOURS:[87,88,89,93,94,96,98],WEALTH:0,TROOPS:[]},{ID:96,PATH:"m -544.69529,119.53303 3.43339,-6.04047 -5.29167,-6.61458 -2.07886,-9.638399 -6.61458,-3.779761 3.59077,-3.401785 4.15774,2.645833 7.55951,-1.322916 h 8.31549 l 6.2366,-4.535715 7.9375,5.291666 3.59076,-3.590774 1.7009,-3.96875 6.99257,3.023809 8.12649,-0.566962 -0.75596,7.181546 5.10267,2.834822 0.75597,5.291666 -1.32292,5.85863 -6.2366,2.64584 -0.56697,-2.83483 -6.4256,-0.37797 1.70091,6.2366 -2.83483,7.9375 -10.20538,0.56697 -3.34819,4.90885 -12.02711,-4.00904 -7.75084,3.74177 z",LAND:20,FOREST:30,MOUNTAINS:10,CENTER:{X:-523,Y:107},NEIGHBOURS:[-1,93,95,97,98],WEALTH:0,TROOPS:[]},{ID:97,PATH:"m -539.93899,91.380952 -2.26784,-5.669643 -4.26125,-5.654448 1.71228,-5.871928 -2.26978,-6.225209 -0.18896,-10.919524 8.65927,-2.642033 5.31982,5.061077 3.69081,-2.096149 0.93544,-3.320824 -0.36278,-5.33464 4.5566,-4.339129 7.15497,5.813044 0.37798,8.504465 8.69344,2.83482 7.18156,10.583331 -8.12649,5.480658 -3.02382,6.992557 -1.7009,3.96875 -3.59076,3.590774 -7.9375,-5.291664 -6.2366,4.535715 z",LAND:20,FOREST:20,MOUNTAINS:20,CENTER:{X:-523,Y:74},NEIGHBOURS:[-1,96,98],WEALTH:0,TROOPS:[]},{ID:98,PATH:"m -512.15774,84.577377 3.02382,-6.992557 8.12649,-5.480656 -7.18156,-10.583333 -8.69344,-2.83482 -0.37798,-8.504465 7.18156,-9.827381 -0.94496,-8.126487 10.39434,-2.078868 12.09524,5.102677 8.12649,-9.071428 3.4018,5.480654 9.07143,-2.456844 8.69344,0.755952 9.26042,2.834822 -1.32292,5.102678 1.7009,4.724701 -5.85864,5.480656 -7.9375,-7.9375 -7.37053,2.078869 -3.2128,4.157739 2.64583,4.346725 9.44941,4.157737 0.94493,8.315478 -6.42559,4.535713 -0.18899,5.669642 -1.90236,2.808288 -4.27633,1.870887 -1.46997,3.34087 -3.47451,2.138156 1.33636,8.018084 -3.87543,0.400902 0.13364,6.280838 7.48356,2.138154 3.34086,6.68174 -3.74176,1.87089 -7.72816,0.92589 -1.88987,-7.18154 -8.31548,-0.37798 -0.75597,-5.291668 -5.10267,-2.83482 0.75596,-7.181546 -8.12649,0.56696 z",LAND:30,FOREST:60,MOUNTAINS:30,CENTER:{X:-488,Y:62},NEIGHBOURS:[-1,85,87,95,96,97,99],WEALTH:0,TROOPS:[]},{ID:99,PATH:"m -500.62947,30.14881 -3.02379,-4.724703 -9.07142,0.377976 -10.01639,-1.700893 -5.48066,-5.480655 -0.18899,-8.315476 3.59079,-5.6696427 -7.18156,-2.6458333 -6.80357,1.7008928 -0.94493,-6.0476189 7.37052,-4.7247022 3.21281,-8.3154767 7.9375,3.401786 7.37052,-3.023809 12.47323,0.94494 3.40177,6.4255951 13.79615,-4.9136901 3.59076,7.3705355 4.44122,6.9925593 -3.21278,6.1421129 -1.51191,7.0870533 -5.57514,3.212798 0.18899,7.559523 5.85861,0.377977 -8.12649,9.071428 z",LAND:30,FOREST:50,MOUNTAINS:0,CENTER:{X:-507,Y:8},NEIGHBOURS:[-1,85,98,100,102],WEALTH:0,TROOPS:[]},{ID:100,PATH:"m -497.03868,-59.431546 -8.31548,0.944941 -6.04761,4.724701 -5.1027,-4.157739 -0.94493,-4.913691 -7.37053,1.13393 -7.55954,5.102678 -5.48063,-3.96875 -4.91371,1.700892 v 3.779763 l 4.34673,2.456845 2.26785,5.858631 4.15774,3.401785 5.66966,-0.377976 3.40177,2.645834 -0.18899,2.078868 -3.40178,0.188989 -6.42559,-0.944941 -7.55951,2.456847 -8.1265,-0.377979 -3.77975,6.047621 3.40177,4.535713 5.48066,2.267858 4.5357,1.889881 -0.18897,6.992559 3.96875,3.96875 6.04761,-3.401786 7.9375,3.401786 7.37052,-3.023809 12.47323,0.94494 3.77976,-3.023809 -6.04761,-6.425596 -1.32292,-8.504462 6.04761,-4.346729 1.13393,-7.9375 -2.26785,-6.047618 z",LAND:20,FOREST:50,MOUNTAINS:0,CENTER:{X:-517,Y:-32},NEIGHBOURS:[-1,99,101,102],WEALTH:0,TROOPS:[]},{ID:101,PATH:"m -478.13989,-71.526785 -4.91368,-2.078869 -2.26785,-4.157739 -5.48066,-3.401785 -8.50447,1.700893 -3.96875,-5.480656 -6.04761,1.700895 -5.66965,-1.700895 -1.88987,-5.102677 -5.10267,-1.511906 -12.09524,3.590774 0.37795,4.535715 5.10271,2.456844 1.70087,5.858631 -3.40177,3.212799 2.45684,4.913691 3.02381,5.291666 7.37053,-1.13393 0.94493,4.913691 5.1027,4.157739 6.04761,-4.724701 8.31548,-0.944941 5.85862,-5.858632 7.37055,-1.133927 z",LAND:20,FOREST:20,MOUNTAINS:0,CENTER:{X:-509,Y:-69},NEIGHBOURS:[-1,100,102,104],WEALTH:0,TROOPS:[]},{ID:102,PATH:"m -457.35118,-12.845982 -3.4018,-6.52009 0.75597,-6.614583 6.2366,-10.205357 -1.51191,-6.614583 4.91368,-3.212798 0.189,-7.559524 -3.40178,-4.157737 -2.26785,-8.504465 6.2366,-4.157736 -0.18899,-3.968753 -6.04761,0.188989 -5.48066,3.212799 -5.66965,1.133927 -3.40177,-5.669642 -6.23663,0.377975 -1.51191,3.590775 -5.66962,5.10268 -7.37055,1.133927 -5.85862,5.858632 -3.02381,9.071427 2.26785,6.047618 -1.13393,7.9375 -6.04761,4.346729 1.32292,8.504462 6.04761,6.425596 -3.77976,3.023809 3.40177,6.4255951 13.79615,-4.9136901 3.59076,7.3705355 4.44122,6.9925593 9.54392,0.188988 -1.51191,-7.9374999 6.04761,-1.8898809 z",LAND:50,FOREST:60,MOUNTAINS:0,CENTER:{X:-480,Y:-37},NEIGHBOURS:[84,85,99,100,101,103,104],WEALTH:0,TROOPS:[]},{ID:103,PATH:"m -409.91517,-88.346726 -6.04763,-1.700892 -5.29167,4.346725 -1.32292,5.480656 -5.66962,2.078868 -6.80358,3.401785 -0.56697,5.669645 -3.96875,8.126487 -6.61458,1.322916 -3.21279,-4.157736 -6.42559,-2.456847 2.26785,8.504465 3.40178,4.157737 -0.189,7.559524 -4.91368,3.212798 1.51191,6.614583 4.34673,2.267858 0.37796,6.047618 8.12649,-3.779761 h 7.9375 l 4.72472,-6.614583 8.50445,-2.078871 4.72472,-6.425594 -1.32292,-4.913691 4.91368,-5.480653 0.37799,-6.803572 5.66962,-10.583331 -3.02379,-2.338731 5.3336,-4.84282 -1.64555,-6.324383 z",LAND:10,FOREST:30,MOUNTAINS:0,CENTER:{X:-429,Y:-54},NEIGHBOURS:[82,83,84,102,104,105],WEALTH:0,TROOPS:[]},{ID:104,PATH:"m -485.32142,-77.763393 2.07886,-5.480653 6.04763,-1.889882 6.42559,-3.023809 2.07886,-3.779763 4.91371,-4.157737 5.85862,-0.188989 5.66965,-0.755952 6.61458,4.157737 5.29167,3.590774 5.48066,-3.401785 7.18153,1.700893 -0.75594,-5.102678 -2.64584,-3.023809 3.96875,-0.944944 4.5357,2.645837 0.56698,3.77976 6.99257,-0.377975 -0.94496,3.968752 -5.29167,4.346723 -1.32292,5.480656 -5.66962,2.078868 -6.80358,3.401785 -0.56697,5.669645 -3.96875,8.126487 -6.61458,1.322916 -3.21279,-4.157736 -6.42559,-2.456847 6.2366,-4.157736 -0.18899,-3.968753 -6.04761,0.188989 -5.48066,3.212799 -5.66965,1.133927 -3.40177,-5.669642 -6.23663,0.377975 -1.51191,3.590775 -4.91368,-2.078869 z",LAND:20,FOREST:30,MOUNTAINS:30,CENTER:{X:-449,Y:-82},NEIGHBOURS:[-1,101,102,103,105],WEALTH:0,TROOPS:[]},{ID:105,PATH:"m -452.2485,-97.040178 2.26785,-6.236602 -2.64584,-6.04762 6.04764,-4.34673 0.37796,-4.7247 -4.91369,-7.55953 3.21281,-6.04762 -2.45687,-5.29166 0.94496,-6.23661 8.88244,-0.56696 7.37052,2.07887 5.48066,4.53571 6.99257,-0.18899 4.15774,5.85863 8.69344,-2.26785 -6.42559,7.18154 1.88989,4.72471 -0.94496,5.66964 9.26042,4.53571 3.21281,3.59078 7.18155,0.37797 -4.53572,6.23661 -1.7009,6.803573 -6.70235,0.880089 -3.31401,5.734492 -6.04763,-1.70089 0.94496,-3.96875 -6.99257,0.377973 -0.56698,-3.779758 -4.5357,-2.645839 -3.96875,0.944944 2.64584,3.023809 0.75594,5.10268 -7.18153,-1.700895 -5.48066,3.401785 z",LAND:30,FOREST:60,MOUNTAINS:0,CENTER:{X:-429,Y:-115},NEIGHBOURS:[-1,80,81,82,103,104],WEALTH:0,TROOPS:[]},{ID:106,PATH:"m -46.680059,119.91815 -5.669642,-7.37053 4.157737,-8.50447 9.449405,-5.858628 -1.889881,-10.77232 2.267857,-12.662204 7.181548,-7.748511 13.418154,-7.181548 0.377976,-9.449403 6.425596,-6.236608 6.8035709,-3.212798 -0.7559524,-7.9375 5.66964288,-3.401785 6.05942052,5.093113 0.6681737,14.03165 3.3408694,3.608139 2.004521,2.939965 -3.7417733,6.414468 -1.0690783,7.349911 -10.9580502,0.935445 -10.2898762,5.746295 -0.133635,15.234359 4.2763123,4.276315 -9.0871633,4.810855 -7.90603,9.12347 -10.016368,1.7009 -0.755952,7.37053 z",LAND:20,FOREST:60,MOUNTAINS:0,CENTER:{X:-20,Y:75},NEIGHBOURS:[6,7,18,22,23,24,25],WEALTH:0,TROOPS:[]},{ID:107,PATH:"m -231.98995,36.679481 8.55263,9.621702 1.06908,19.243405 17.35916,-9.795428 17.53764,3.566015 15.30329,-12.724403 3.77976,-9.071427 6.61458,-8.693452 -2.07887,-9.071429 -16.28698,1.423383 -20.31248,-8.552624 -22.98518,8.552624 z",LAND:20,FOREST:50,MOUNTAINS:0,CENTER:{X:-200,Y:36},NEIGHBOURS:[29,37,38,46,47,48],WEALTH:0,TROOPS:[]},{ID:108,PATH:"m 175.94791,-35.43006 4.49792,-4.781399 9.12813,-5.423958 -3.3073,-6.746875 -6.35,-0.132292 -6.61458,-3.307292 -1.45521,-5.688541 5.95313,-5.291667 -0.66146,-4.630208 -5.15938,-6.35 -1.5875,4.7625 0.66146,3.96875 -3.57187,4.233333 -6.21771,-0.132292 -9.12813,-3.968749 0.66146,-7.672917 -4.63021,-5.688542 -11.64166,-4.365625 -4.49792,2.778125 -10.31875,3.836459 -5.29166,-1.719792 -6.61459,3.2317 -1.88988,11.906247 13.47485,20.883184 17.78378,12.586608 -1.96547,11.320386 14.93005,-5.102678 3.2128,5.291667 15.30804,-5.858632 z",LAND:20,FOREST:60,MOUNTAINS:0,CENTER:{X:150,Y:-48},NEIGHBOURS:[-1,16,17,20],WEALTH:0,TROOPS:[]},{ID:109,PATH:"m -155.34821,133.33631 -3.02381,14.74107 5.09295,10.0761 11.22532,-0.53454 2.93996,5.21176 7.76707,-1.90213 10.01636,-8.12649 16.63096,-3.40178 -1.13393,-8.12649 4.34672,1.13393 2.834826,4.53571 3.96875,2.83482 3.590774,-6.61458 -0.755954,-7.9375 -10.016366,-6.80357 -2.26786,-8.50447 -9.54722,7.96695 -7.27652,2.27925 -4.4037,-4.96972 -0.28353,-14.18749 -10.61059,6.01356 -1.6838,7.64391 -6.21548,5.63935 z",LAND:20,FOREST:30,MOUNTAINS:0,CENTER:{X:-129,Y:140},NEIGHBOURS:[24,26,27,28,39],WEALTH:0,TROOPS:[]}],COUNTRIES:[{COUNTRY:wu.PLAYER,NAME:"Player nation",DIPLOMACY:0,POTENTIAL:0,COLOUR:"darkgreen",FOCUS:Au.NONE,REGIONS:[0],CAPITAL:0},{COUNTRY:wu.NEUTRAL,NAME:"none",DIPLOMACY:0,COLOUR:"gray",FOCUS:Au.NONE,REGIONS:[1,2,3,4,5,7,13,14,15,16,17,18,22,27,30,31,37,38,39,40,41,42,43,44,45,47,48,49,50,51,53,54,55,56,58,59,63,64,69,73,74,82,83,87,88,93,95,96,97,98,99,100,101,102,103,104,107,108],CAPITAL:-1},{COUNTRY:wu.CLEADAL,NAME:"Cleadal",DIPLOMACY:0,COLOUR:"darkred",FOCUS:Au.ECONOMY,REGIONS:[6,23,24,25,26,28,29,106,109],CAPITAL:24},{COUNTRY:wu.GRIERIA,NAME:"Grieria",DIPLOMACY:0,COLOUR:"#bcaa4f",FOCUS:Au.PEACE,REGIONS:[8,9,10,11,12],CAPITAL:10},{COUNTRY:wu.BOTHIL,NAME:"Bothil",DIPLOMACY:0,COLOUR:"#286fbc",FOCUS:Au.DEFENSE,REGIONS:[19,20,21,32,33,34,35,36,52],CAPITAL:34},{COUNTRY:wu.DOSHOR,NAME:"Doshor",DIPLOMACY:0,COLOUR:"#a163bc",FOCUS:Au.OFFENSE,REGIONS:[57,75,76,77,78,79,80,81,105],CAPITAL:80},{COUNTRY:wu.CREURUS,NAME:"Creurus",DIPLOMACY:0,COLOUR:"#bc6935",FOCUS:Au.OFFENSE,REGIONS:[65,66,67,68,89,90,91,92,94],CAPITAL:90},{COUNTRY:wu.ESTRAILA,NAME:"Estraila",DIPLOMACY:0,COLOUR:"#49a37e",FOCUS:Au.ECONOMY,REGIONS:[46,60,61,62,70,71,72,84,85],CAPITAL:71}]},go={getSickness(e){const n=Object.entries(this.SICKNESS).find(n=>n[0]===Nu[e]);if(n)return n[1];console.warn("Invalid sickness: "+Pu.prepareSicknessName(e))},SICKNESS:{COLD:{CHANCE:20,DURATION:20,LETHALITY:20},FLU:{CHANCE:10,DURATION:30,LETHALITY:40},PNEUMONIA:{CHANCE:5,DURATION:60,LETHALITY:70}}};class po{}class mo{constructor(){this.title="app"}isIE(){return-1!==navigator.userAgent.indexOf("MSIE")||1==!!document.documentMode}catchContextMenu(e){return!1}}class fo{}const So=new Ce("Location Initialized");class Eo{}const vo=new Ce("appBaseHref"),bo=(()=>{class e{constructor(n,t){this._subject=new Mi,this._urlChangeListeners=[],this._platformStrategy=n;const l=this._platformStrategy.getBaseHref();this._platformLocation=t,this._baseHref=e.stripTrailingSlash(Oo(l)),this._platformStrategy.onPopState(e=>{this._subject.emit({url:this.path(!0),pop:!0,state:e.state,type:e.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(n,t=""){return this.path()==this.normalize(n+e.normalizeQueryParams(t))}normalize(n){return e.stripTrailingSlash(function(e,n){return e&&n.startsWith(e)?n.substring(e.length):n}(this._baseHref,Oo(n)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(n,t="",l=null){this._platformStrategy.pushState(l,"",n,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+e.normalizeQueryParams(t)),l)}replaceState(n,t="",l=null){this._platformStrategy.replaceState(l,"",n,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+e.normalizeQueryParams(t)),l)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(e){this._urlChangeListeners.push(e),this.subscribe(e=>{this._notifyUrlChangeListeners(e.url,e.state)})}_notifyUrlChangeListeners(e="",n){this._urlChangeListeners.forEach(t=>t(e,n))}subscribe(e,n,t){return this._subject.subscribe({next:e,error:n,complete:t})}static normalizeQueryParams(e){return e&&"?"!==e[0]?"?"+e:e}static joinWithSlash(e,n){if(0==e.length)return n;if(0==n.length)return e;let t=0;return e.endsWith("/")&&t++,n.startsWith("/")&&t++,2==t?e+n.substring(1):1==t?e+n:e+"/"+n}static stripTrailingSlash(e){const n=e.match(/#|\?|$/),t=n&&n.index||e.length;return e.slice(0,t-("/"===e[t-1]?1:0))+e.slice(t)}}return e})();function Oo(e){return e.replace(/\/index.html$/,"")}const Ro=(()=>(class extends Eo{constructor(e,n){super(),this._platformLocation=e,this._baseHref="",null!=n&&(this._baseHref=n)}onPopState(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}getBaseHref(){return this._baseHref}path(e=!1){let n=this._platformLocation.hash;return null==n&&(n="#"),n.length>0?n.substring(1):n}prepareExternalUrl(e){const n=bo.joinWithSlash(this._baseHref,e);return n.length>0?"#"+n:n}pushState(e,n,t,l){let i=this.prepareExternalUrl(t+bo.normalizeQueryParams(l));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(e,n,i)}replaceState(e,n,t,l){let i=this.prepareExternalUrl(t+bo.normalizeQueryParams(l));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(e,n,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}))(),To=(()=>(class extends Eo{constructor(e,n){if(super(),this._platformLocation=e,null==n&&(n=this._platformLocation.getBaseHrefFromDOM()),null==n)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=n}onPopState(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return bo.joinWithSlash(this._baseHref,e)}path(e=!1){const n=this._platformLocation.pathname+bo.normalizeQueryParams(this._platformLocation.search),t=this._platformLocation.hash;return t&&e?`${n}${t}`:n}pushState(e,n,t,l){const i=this.prepareExternalUrl(t+bo.normalizeQueryParams(l));this._platformLocation.pushState(e,n,i)}replaceState(e,n,t,l){const i=this.prepareExternalUrl(t+bo.normalizeQueryParams(l));this._platformLocation.replaceState(e,n,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}))(),Co=function(){var e={Decimal:0,Percent:1,Currency:2,Scientific:3};return e[e.Decimal]="Decimal",e[e.Percent]="Percent",e[e.Currency]="Currency",e[e.Scientific]="Scientific",e}(),Io=function(){var e={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return e[e.Zero]="Zero",e[e.One]="One",e[e.Two]="Two",e[e.Few]="Few",e[e.Many]="Many",e[e.Other]="Other",e}(),yo=function(){var e={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};return e[e.Decimal]="Decimal",e[e.Group]="Group",e[e.List]="List",e[e.PercentSign]="PercentSign",e[e.PlusSign]="PlusSign",e[e.MinusSign]="MinusSign",e[e.Exponential]="Exponential",e[e.SuperscriptingExponent]="SuperscriptingExponent",e[e.PerMille]="PerMille",e[e.Infinity]="Infinity",e[e.NaN]="NaN",e[e.TimeSeparator]="TimeSeparator",e[e.CurrencyDecimal]="CurrencyDecimal",e[e.CurrencyGroup]="CurrencyGroup",e}();function _o(e,n){const t=ki(e),l=t[wi.NumberSymbols][n];if(void 0===l){if(n===yo.CurrencyDecimal)return t[wi.NumberSymbols][yo.Decimal];if(n===yo.CurrencyGroup)return t[wi.NumberSymbols][yo.Group]}return l}const Ao=/^(\d+)?\.((\d+)(-(\d+))?)?$/,wo=22,No=".",Po="0",ko=";",xo=",",Mo="#";function Do(e){const n=parseInt(e);if(isNaN(n))throw new Error("Invalid integer literal when parsing "+e);return n}const Lo=new Ce("UseV4Plurals");class Fo{}const Ho=(()=>(class extends Fo{constructor(e,n){super(),this.locale=e,this.deprecatedPluralFn=n}getPluralCategory(e,n){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(n||this.locale,e):function(e){return ki(e)[wi.PluralCase]}(n||this.locale)(e)){case Io.Zero:return"zero";case Io.One:return"one";case Io.Two:return"two";case Io.Few:return"few";case Io.Many:return"many";default:return"other"}}}))();class Uo{}const Go=(()=>(class{constructor(e,n,t,l){this._iterableDiffers=e,this._keyValueDiffers=n,this._ngEl=t,this._renderer=l,this._initialClasses=[]}getValue(){return null}setClass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}setNgClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(Vn(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}applyChanges(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachChangedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachRemovedItem(e=>{e.previousValue&&this._toggleClass(e.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(e=>{if("string"!=typeof e.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${me(e.item)}`);this._toggleClass(e.item,!0)}),e.forEachRemovedItem(e=>this._toggleClass(e.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!0)):Object.keys(e).forEach(n=>this._toggleClass(n,!!e[n])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!1)):Object.keys(e).forEach(e=>this._toggleClass(e,!1)))}_toggleClass(e,n){(e=e.trim())&&e.split(/\s+/g).forEach(e=>{n?this._renderer.addClass(this._ngEl.nativeElement,e):this._renderer.removeClass(this._ngEl.nativeElement,e)})}}))(),Bo=(()=>{class e{constructor(e){this._delegate=e}getValue(){return this._delegate.getValue()}}return e.ngDirectiveDef=void 0,e})(),Wo=(()=>(class extends Bo{constructor(e){super(e)}set klass(e){this._delegate.setClass(e)}set ngClass(e){this._delegate.setNgClass(e)}ngDoCheck(){this._delegate.applyChanges()}}))();class Vo{constructor(e,n,t,l){this.$implicit=e,this.ngForOf=n,this.index=t,this.count=l}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}const zo=(()=>(class{constructor(e,n,t){this._viewContainer=e,this._template=n,this._differs=t,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){sn()&&null!=e&&"function"!=typeof e&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(e)}. `+"See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."),this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(n){throw new Error(`Cannot find a differ supporting object '${t}' of type '${e=t,e.name||typeof e}'. NgFor only supports binding to Iterables such as Arrays.`)}}var e;if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const n=[];e.forEachOperation((e,t,l)=>{if(null==e.previousIndex){const t=this._viewContainer.createEmbeddedView(this._template,new Vo(null,this._ngForOf,-1,-1),l),i=new Yo(e,t);n.push(i)}else if(null==l)this._viewContainer.remove(t);else{const i=this._viewContainer.get(t);this._viewContainer.move(i,l);const r=new Yo(e,i);n.push(r)}});for(let t=0;t<n.length;t++)this._perViewChange(n[t].view,n[t].record);for(let t=0,l=this._viewContainer.length;t<l;t++){const e=this._viewContainer.get(t);e.context.index=t,e.context.count=l,e.context.ngForOf=this._ngForOf}e.forEachIdentityChange(e=>{this._viewContainer.get(e.currentIndex).context.$implicit=e.item})}_perViewChange(e,n){e.context.$implicit=n.item}static ngTemplateContextGuard(e,n){return!0}}))();class Yo{constructor(e,n){this.record=e,this.view=n}}const $o=(()=>(class{constructor(e,n){this._viewContainer=e,this._context=new Ko,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){jo("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){jo("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}}))();class Ko{constructor(){this.$implicit=null,this.ngIf=null}}function jo(e,n){if(n&&!n.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${me(n)}'.`)}class qo{constructor(e,n){this._viewContainerRef=e,this._templateRef=n,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}const Xo=(()=>(class{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const n=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||n,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),n}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let n=0;n<this._defaultViews.length;n++)this._defaultViews[n].enforceState(e)}}}))(),Qo=(()=>(class{constructor(e,n,t){this.ngSwitch=t,t._addCase(),this._view=new qo(e,n)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}))();class Zo{}const Jo=(()=>(class{constructor(e,n,t){this._ngEl=e,this._differs=n,this._renderer=t}getValue(){return null}setNgStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}applyChanges(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_applyChanges(e){e.forEachRemovedItem(e=>this._setStyle(e.key,null)),e.forEachAddedItem(e=>this._setStyle(e.key,e.currentValue)),e.forEachChangedItem(e=>this._setStyle(e.key,e.currentValue))}_setStyle(e,n){const[t,l]=e.split(".");null!=(n=null!=n&&l?`${n}${l}`:n)?this._renderer.setStyle(this._ngEl.nativeElement,t,n):this._renderer.removeStyle(this._ngEl.nativeElement,t)}}))(),ea=(()=>{class e{constructor(e){this._delegate=e}getValue(){return this._delegate.getValue()}}return e.ngDirectiveDef=void 0,e})(),na=(()=>(class extends ea{constructor(e){super(e)}set ngStyle(e){this._delegate.setNgStyle(e)}ngDoCheck(){this._delegate.applyChanges()}}))();function ta(e,n){return Error(`InvalidPipeArgument: '${n}' for pipe '${me(e)}'`)}const la=/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D])\S*/g,ia=(()=>{class e{transform(n){if(!n)return n;if("string"!=typeof n)throw ta(e,n);return n.replace(la,e=>e[0].toUpperCase()+e.substr(1).toLowerCase())}}return e})(),ra=(()=>(class{constructor(e){this.differs=e,this.keyValues=[]}transform(e,n=function(e,n){const t=e.key,l=n.key;if(t===l)return 0;if(void 0===t)return 1;if(void 0===l)return-1;if(null===t)return 1;if(null===l)return-1;if("string"==typeof t&&"string"==typeof l)return t<l?-1:1;if("number"==typeof t&&"number"==typeof l)return t-l;if("boolean"==typeof t&&"boolean"==typeof l)return t<l?-1:1;const i=String(t),r=String(l);return i==r?0:i<r?-1:1}){if(!e||!(e instanceof Map)&&"object"!=typeof e)return null;this.differ||(this.differ=this.differs.find(e).create());const t=this.differ.diff(e);return t&&(this.keyValues=[],t.forEachItem(e=>{this.keyValues.push(function(n,t){return{key:e.key,value:e.currentValue}}())}),this.keyValues.sort(n)),this.keyValues}}))(),sa=(()=>{class e{constructor(e){this._locale=e}transform(n,t,l){if(function(e){return null==e||""===e||e!=e}(n))return null;l=l||this._locale;try{return function(e,n,t){return function(e,n,t,l,i,r,s=!1){let u="",o=!1;if(isFinite(e)){let a=function(n){let t,l,i,r,s,u=Math.abs(e)+"",o=0;for((l=u.indexOf(No))>-1&&(u=u.replace(No,"")),(i=u.search(/e/i))>0?(l<0&&(l=i),l+=+u.slice(i+1),u=u.substring(0,i)):l<0&&(l=u.length),i=0;u.charAt(i)===Po;i++);if(i===(s=u.length))t=[0],l=1;else{for(s--;u.charAt(s)===Po;)s--;for(l-=i,t=[],r=0;i<=s;i++,r++)t[r]=Number(u.charAt(i))}return l>wo&&(t=t.splice(0,wo-1),o=l-1,l=1),{digits:t,exponent:o,integerLen:l}}();s&&(a=function(e){if(0===e.digits[0])return e;const n=e.digits.length-e.integerLen;return e.exponent?e.exponent+=2:(0===n?e.digits.push(0,0):1===n&&e.digits.push(0),e.integerLen+=2),e}(a));let c=n.minInt,h=n.minFrac,d=n.maxFrac;if(r){const e=r.match(Ao);if(null===e)throw new Error(`${r} is not a valid digit info`);const n=e[1],t=e[3],l=e[5];null!=n&&(c=Do(n)),null!=t&&(h=Do(t)),null!=l?d=Do(l):null!=t&&h>d&&(d=h)}!function(e,n,t){if(n>t)throw new Error(`The minimum number of digits after fraction (${n}) is higher than the maximum (${t}).`);let l=e.digits,i=l.length-e.integerLen;const r=Math.min(Math.max(n,i),t);let s=r+e.integerLen,u=l[s];if(s>0){l.splice(Math.max(e.integerLen,s));for(let e=s;e<l.length;e++)l[e]=0}else{i=Math.max(0,i),e.integerLen=1,l.length=Math.max(1,s=r+1),l[0]=0;for(let e=1;e<s;e++)l[e]=0}if(u>=5)if(s-1<0){for(let n=0;n>s;n--)l.unshift(0),e.integerLen++;l.unshift(1),e.integerLen++}else l[s-1]++;for(;i<Math.max(0,r);i++)l.push(0);let o=0!==r;const a=n+e.integerLen,c=l.reduceRight(function(e,n,t,l){return l[t]=(n+=e)<10?n:n-10,o&&(0===l[t]&&t>=a?l.pop():o=!1),n>=10?1:0},0);c&&(l.unshift(c),e.integerLen++)}(a,h,d);let g=a.digits,p=a.integerLen;const m=a.exponent;let f=[];for(o=g.every(e=>!e);p<c;p++)g.unshift(0);for(;p<0;p++)g.unshift(0);p>0?f=g.splice(p,g.length):(f=g,g=[0]);const S=[];for(g.length>=n.lgSize&&S.unshift(g.splice(-n.lgSize,g.length).join(""));g.length>n.gSize;)S.unshift(g.splice(-n.gSize,g.length).join(""));g.length&&S.unshift(g.join("")),u=S.join(_o(t,l)),f.length&&(u+=_o(t,i)+f.join("")),m&&(u+=_o(t,yo.Exponential)+"+"+m)}else u=_o(t,yo.Infinity);return e<0&&!o?n.negPre+u+n.negSuf:n.posPre+u+n.posSuf}(e,function(e,n="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},l=e.split(ko),i=l[0],r=l[1],s=-1!==i.indexOf(No)?i.split(No):[i.substring(0,i.lastIndexOf(Po)+1),i.substring(i.lastIndexOf(Po)+1)],u=s[0],o=s[1]||"";t.posPre=u.substr(0,u.indexOf(Mo));for(let c=0;c<o.length;c++){const e=o.charAt(c);e===Po?t.minFrac=t.maxFrac=c+1:e===Mo?t.maxFrac=c+1:t.posSuf+=e}const a=u.split(xo);if(t.gSize=a[1]?a[1].length:0,t.lgSize=a[2]||a[1]?(a[2]||a[1]).length:0,r){const e=i.length-t.posPre.length-t.posSuf.length,n=r.indexOf(Mo);t.negPre=r.substr(0,n).replace(/'/g,""),t.negSuf=r.substr(n+e).replace(/'/g,"")}else t.negPre=n+t.posPre,t.negSuf=t.posSuf;return t}(function(e,n){return ki(e)[wi.NumberFormats][n]}(n,Co.Decimal),_o(n,yo.MinusSign)),n,yo.Group,yo.Decimal,t)}(function(e){if("string"==typeof e&&!isNaN(Number(e)-parseFloat(e)))return Number(e);if("number"!=typeof e)throw new Error(`${e} is not a number`);return e}(n),l,t)}catch(i){throw ta(e,i.message)}}}return e})(),ua=(()=>(class{}))(),oa=new Ce("DocumentToken"),aa="browser",ca=(()=>{class e{}return e.ngInjectableDef=de({token:e,providedIn:"root",factory:()=>new ha(Le(oa),window,Le(Dn))}),e})();class ha{constructor(e,n,t){this.document=e,this.window=n,this.errorHandler=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(e){this.supportScrollRestoration()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(this.supportScrollRestoration()){e=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(e):e.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{const t=this.document.querySelector(`#${e}`);if(t)return void this.scrollToElement(t);const l=this.document.querySelector(`[name='${e}']`);if(l)return void this.scrollToElement(l)}catch(n){this.errorHandler.handleError(n)}}}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=e)}}scrollToElement(e){const n=e.getBoundingClientRect(),t=n.left+this.window.pageXOffset,l=n.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(t-i[0],l-i[1])}supportScrollRestoration(){try{return!!this.window&&!!this.window.scrollTo}catch(e){return!1}}}function da(...e){let n=e[e.length-1];return w(n)?(e.pop(),W(e,n)):q(e)}class ga extends _{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return n&&!n.closed&&e.next(this._value),n}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new C;return this._value}next(e){super.next(this._value=e)}}function pa(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}pa.prototype=Object.create(Error.prototype);const ma=pa,fa={};class Sa{constructor(e){this.resultSelector=e}call(e,n){return n.subscribe(new Ea(e,this.resultSelector))}}class Ea extends H{constructor(e,n){super(e),this.resultSelector=n,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(fa),this.observables.push(e)}_complete(){const e=this.observables,n=e.length;if(0===n)this.destination.complete();else{this.active=n,this.toRespond=n;for(let t=0;t<n;t++){const n=e[t];this.add(F(this,n,n,t))}}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,n,t,l,i){const r=this.values,s=this.toRespond?r[t]===fa?--this.toRespond:this.toRespond:0;r[t]=n,0===s&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(e){let n;try{n=this.resultSelector.apply(this,e)}catch(t){return void this.destination.error(t)}this.destination.next(n)}}const va=new O(e=>e.complete());function ba(e){return e?function(e){return new O(n=>e.schedule(()=>n.complete()))}(e):va}function Oa(e){return new O(n=>{let t;try{t=e()}catch(l){return void n.error(l)}return(t?V(t):ba()).subscribe(n)})}function Ra(){return j(1)}function Ta(e,n){return function(t){return t.lift(new Ca(e,n))}}class Ca{constructor(e,n){this.predicate=e,this.thisArg=n}call(e,n){return n.subscribe(new Ia(e,this.predicate,this.thisArg))}}class Ia extends m{constructor(e,n,t){super(e),this.predicate=n,this.thisArg=t,this.count=0}_next(e){let n;try{n=this.predicate.call(this.thisArg,e,this.count++)}catch(t){return void this.destination.error(t)}n&&this.destination.next(e)}}function ya(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}ya.prototype=Object.create(Error.prototype);const _a=ya;function Aa(e){return function(n){return 0===e?ba():n.lift(new wa(e))}}class wa{constructor(e){if(this.total=e,this.total<0)throw new _a}call(e,n){return n.subscribe(new Na(e,this.total))}}class Na extends m{constructor(e,n){super(e),this.total=n,this.ring=new Array,this.count=0}_next(e){const n=this.ring,t=this.total,l=this.count++;n.length<t?n.push(e):n[l%t]=e}_complete(){const e=this.destination;let n=this.count;if(n>0){const t=this.count>=this.total?this.total:this.count,l=this.ring;for(let i=0;i<t;i++){const i=n++%t;e.next(l[i])}}e.complete()}}function Pa(e=function(){return new ma}){return n=>n.lift(new ka(e))}class ka{constructor(e){this.errorFactory=e}call(e,n){return n.subscribe(new xa(e,this.errorFactory))}}class xa extends m{constructor(e,n){super(e),this.errorFactory=n,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let n;try{n=this.errorFactory()}catch(e){n=e}this.destination.error(n)}}}function Ma(e=null){return n=>n.lift(new Da(e))}class Da{constructor(e){this.defaultValue=e}call(e,n){return n.subscribe(new La(e,this.defaultValue))}}class La extends m{constructor(e,n){super(e),this.defaultValue=n,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Fa(e,n){const t=arguments.length>=2;return l=>l.pipe(e?Ta((n,t)=>e(n,t,l)):K,Aa(1),t?Ma(n):Pa(()=>new ma))}function Ha(e){return function(n){const t=new Ua(e),l=n.lift(t);return t.caught=l}}class Ua{constructor(e){this.selector=e}call(e,n){return n.subscribe(new Ga(e,this.selector,this.caught))}}class Ga extends H{constructor(e,n,t){super(e),this.selector=n,this.caught=t}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(n){return void super.error(n)}this._unsubscribeAndRecycle();const l=new N(this,void 0,void 0);this.add(l),F(this,t,void 0,void 0,l)}}}function Ba(e){return n=>0===e?ba():n.lift(new Wa(e))}class Wa{constructor(e){if(this.total=e,this.total<0)throw new _a}call(e,n){return n.subscribe(new Va(e,this.total))}}class Va extends m{constructor(e,n){super(e),this.total=n,this.count=0}_next(e){const n=this.total,t=++this.count;t<=n&&(this.destination.next(e),t===n&&(this.destination.complete(),this.unsubscribe()))}}function za(e,n){const t=arguments.length>=2;return l=>l.pipe(e?Ta((n,t)=>e(n,t,l)):K,Ba(1),t?Ma(n):Pa(()=>new ma))}class Ya{constructor(e,n,t){this.predicate=e,this.thisArg=n,this.source=t}call(e,n){return n.subscribe(new $a(e,this.predicate,this.thisArg,this.source))}}class $a extends m{constructor(e,n,t,l){super(e),this.predicate=n,this.thisArg=t,this.source=l,this.index=0,this.thisArg=t||this}notifyComplete(e){this.destination.next(e),this.destination.complete()}_next(e){let n=!1;try{n=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(t){return void this.destination.error(t)}n||this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}function Ka(e,n){return"function"==typeof n?t=>t.pipe(Ka((t,l)=>V(e(t,l)).pipe(U((e,i)=>n(t,e,l,i))))):n=>n.lift(new ja(e))}class ja{constructor(e){this.project=e}call(e,n){return n.subscribe(new qa(e,this.project))}}class qa extends H{constructor(e,n){super(e),this.project=n,this.index=0}_next(e){let n;const t=this.index++;try{n=this.project(e,t)}catch(l){return void this.destination.error(l)}this._innerSub(n,e,t)}_innerSub(e,n,t){const l=this.innerSubscription;l&&l.unsubscribe();const i=new N(this,void 0,void 0);this.destination.add(i),this.innerSubscription=F(this,e,n,t,i)}_complete(){const{innerSubscription:e}=this;e&&!e.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(e,n,t,l,i){this.destination.next(n)}}function Xa(...e){return Ra()(da(...e))}function Qa(...e){const n=e[e.length-1];return w(n)?(e.pop(),t=>Xa(e,t,n)):n=>Xa(e,n)}function Za(e,n){let t=!1;return arguments.length>=2&&(t=!0),function(l){return l.lift(new Ja(e,n,t))}}class Ja{constructor(e,n,t=!1){this.accumulator=e,this.seed=n,this.hasSeed=t}call(e,n){return n.subscribe(new ec(e,this.accumulator,this.seed,this.hasSeed))}}class ec extends m{constructor(e,n,t,l){super(e),this.accumulator=n,this._seed=t,this.hasSeed=l,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const n=this.index++;let t;try{t=this.accumulator(this.seed,e,n)}catch(l){this.destination.error(l)}this.seed=t,this.destination.next(t)}}function nc(e,n){return z(e,n,1)}function tc(e,n,t){return function(l){return l.lift(new lc(e,n,t))}}class lc{constructor(e,n,t){this.nextOrObserver=e,this.error=n,this.complete=t}call(e,n){return n.subscribe(new ic(e,this.nextOrObserver,this.error,this.complete))}}class ic extends m{constructor(e,n,t,i){super(e),this._tapNext=E,this._tapError=E,this._tapComplete=E,this._tapError=t||E,this._tapComplete=i||E,l(n)?(this._context=this,this._tapNext=n):n&&(this._context=n,this._tapNext=n.next||E,this._tapError=n.error||E,this._tapComplete=n.complete||E)}_next(e){try{this._tapNext.call(this._context,e)}catch(n){return void this.destination.error(n)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}class rc{constructor(e){this.callback=e}call(e,n){return n.subscribe(new sc(e,this.callback))}}class sc extends m{constructor(e,n){super(e),this.add(new d(n))}}let uc=null;function oc(){return uc}class ac{constructor(){this.resourceLoaderType=null}get attrToPropMap(){return this._attrToPropMap}set attrToPropMap(e){this._attrToPropMap=e}}class cc extends ac{constructor(){super(),this._animationPrefix=null,this._transitionEnd=null;try{const n=this.createElement("div",document);if(null!=this.getStyle(n,"animationName"))this._animationPrefix="";else{const e=["Webkit","Moz","O","ms"];for(let t=0;t<e.length;t++)if(null!=this.getStyle(n,e[t]+"AnimationName")){this._animationPrefix="-"+e[t].toLowerCase()+"-";break}}const t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(t).forEach(e=>{null!=this.getStyle(n,e)&&(this._transitionEnd=t[e])})}catch(e){this._animationPrefix=null,this._transitionEnd=null}}getDistributedNodes(e){return e.getDistributedNodes()}resolveAndSetHref(e,n,t){e.href=null==t?n:n+"/../"+t}supportsDOMEvents(){return!0}supportsNativeShadowDOM(){return"function"==typeof document.body.createShadowRoot}getAnimationPrefix(){return this._animationPrefix?this._animationPrefix:""}getTransitionEnd(){return this._transitionEnd?this._transitionEnd:""}supportsAnimation(){return null!=this._animationPrefix&&null!=this._transitionEnd}}const hc={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},dc=3,gc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},pc={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},mc=(()=>{if(Te.Node)return Te.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))}})();class fc extends cc{parse(e){throw new Error("parse not implemented")}static makeCurrent(){var e;e=new fc,uc||(uc=e)}hasProperty(e,n){return n in e}setProperty(e,n,t){e[n]=t}getProperty(e,n){return e[n]}invoke(e,n,t){e[n](...t)}logError(e){window.console&&(console.error?console.error(e):console.log(e))}log(e){window.console&&window.console.log&&window.console.log(e)}logGroup(e){window.console&&window.console.group&&window.console.group(e)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}get attrToPropMap(){return hc}contains(e,n){return mc.call(e,n)}querySelector(e,n){return e.querySelector(n)}querySelectorAll(e,n){return e.querySelectorAll(n)}on(e,n,t){e.addEventListener(n,t,!1)}onAndCancel(e,n,t){return e.addEventListener(n,t,!1),()=>{e.removeEventListener(n,t,!1)}}dispatchEvent(e,n){e.dispatchEvent(n)}createMouseEvent(e){const n=this.getDefaultDocument().createEvent("MouseEvent");return n.initEvent(e,!0,!0),n}createEvent(e){const n=this.getDefaultDocument().createEvent("Event");return n.initEvent(e,!0,!0),n}preventDefault(e){e.preventDefault(),e.returnValue=!1}isPrevented(e){return e.defaultPrevented||null!=e.returnValue&&!e.returnValue}getInnerHTML(e){return e.innerHTML}getTemplateContent(e){return"content"in e&&this.isTemplateElement(e)?e.content:null}getOuterHTML(e){return e.outerHTML}nodeName(e){return e.nodeName}nodeValue(e){return e.nodeValue}type(e){return e.type}content(e){return this.hasProperty(e,"content")?e.content:e}firstChild(e){return e.firstChild}nextSibling(e){return e.nextSibling}parentElement(e){return e.parentNode}childNodes(e){return e.childNodes}childNodesAsList(e){const n=e.childNodes,t=new Array(n.length);for(let l=0;l<n.length;l++)t[l]=n[l];return t}clearNodes(e){for(;e.firstChild;)e.removeChild(e.firstChild)}appendChild(e,n){e.appendChild(n)}removeChild(e,n){e.removeChild(n)}replaceChild(e,n,t){e.replaceChild(n,t)}remove(e){return e.parentNode&&e.parentNode.removeChild(e),e}insertBefore(e,n,t){e.insertBefore(t,n)}insertAllBefore(e,n,t){t.forEach(t=>e.insertBefore(t,n))}insertAfter(e,n,t){e.insertBefore(t,n.nextSibling)}setInnerHTML(e,n){e.innerHTML=n}getText(e){return e.textContent}setText(e,n){e.textContent=n}getValue(e){return e.value}setValue(e,n){e.value=n}getChecked(e){return e.checked}setChecked(e,n){e.checked=n}createComment(e){return this.getDefaultDocument().createComment(e)}createTemplate(e){const n=this.getDefaultDocument().createElement("template");return n.innerHTML=e,n}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createElementNS(e,n,t){return(t=t||this.getDefaultDocument()).createElementNS(e,n)}createTextNode(e,n){return(n=n||this.getDefaultDocument()).createTextNode(e)}createScriptTag(e,n,t){const l=(t=t||this.getDefaultDocument()).createElement("SCRIPT");return l.setAttribute(e,n),l}createStyleElement(e,n){const t=(n=n||this.getDefaultDocument()).createElement("style");return this.appendChild(t,this.createTextNode(e,n)),t}createShadowRoot(e){return e.createShadowRoot()}getShadowRoot(e){return e.shadowRoot}getHost(e){return e.host}clone(e){return e.cloneNode(!0)}getElementsByClassName(e,n){return e.getElementsByClassName(n)}getElementsByTagName(e,n){return e.getElementsByTagName(n)}classList(e){return Array.prototype.slice.call(e.classList,0)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}hasClass(e,n){return e.classList.contains(n)}setStyle(e,n,t){e.style[n]=t}removeStyle(e,n){e.style[n]=""}getStyle(e,n){return e.style[n]}hasStyle(e,n,t){const l=this.getStyle(e,n)||"";return t?l==t:l.length>0}tagName(e){return e.tagName}attributeMap(e){const n=new Map,t=e.attributes;for(let l=0;l<t.length;l++){const e=t.item(l);n.set(e.name,e.value)}return n}hasAttribute(e,n){return e.hasAttribute(n)}hasAttributeNS(e,n,t){return e.hasAttributeNS(n,t)}getAttribute(e,n){return e.getAttribute(n)}getAttributeNS(e,n,t){return e.getAttributeNS(n,t)}setAttribute(e,n,t){e.setAttribute(n,t)}setAttributeNS(e,n,t,l){e.setAttributeNS(n,t,l)}removeAttribute(e,n){e.removeAttribute(n)}removeAttributeNS(e,n,t){e.removeAttributeNS(n,t)}templateAwareRoot(e){return this.isTemplateElement(e)?this.content(e):e}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}getBoundingClientRect(e){try{return e.getBoundingClientRect()}catch(n){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}}getTitle(e){return e.title}setTitle(e,n){e.title=n||""}elementMatches(e,n){return!!this.isElementNode(e)&&(e.matches&&e.matches(n)||e.msMatchesSelector&&e.msMatchesSelector(n)||e.webkitMatchesSelector&&e.webkitMatchesSelector(n))}isTemplateElement(e){return this.isElementNode(e)&&"TEMPLATE"===e.nodeName}isTextNode(e){return e.nodeType===Node.TEXT_NODE}isCommentNode(e){return e.nodeType===Node.COMMENT_NODE}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}hasShadowRoot(e){return null!=e.shadowRoot&&e instanceof HTMLElement}isShadowRoot(e){return e instanceof DocumentFragment}importIntoDoc(e){return document.importNode(this.templateAwareRoot(e),!0)}adoptNode(e){return document.adoptNode(e)}getHref(e){return e.getAttribute("href")}getEventKey(e){let n=e.key;if(null==n){if(null==(n=e.keyIdentifier))return"Unidentified";n.startsWith("U+")&&(n=String.fromCharCode(parseInt(n.substring(2),16)),e.location===dc&&pc.hasOwnProperty(n)&&(n=pc[n]))}return gc[n]||n}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(e){const n=Ec||(Ec=document.querySelector("base"))?Ec.getAttribute("href"):null;return null==n?null:(t=n,Sc||(Sc=document.createElement("a")),Sc.setAttribute("href",t),"/"===Sc.pathname.charAt(0)?Sc.pathname:"/"+Sc.pathname);var t}resetBaseElement(){Ec=null}getUserAgent(){return window.navigator.userAgent}setData(e,n,t){this.setAttribute(e,"data-"+n,t)}getData(e,n){return this.getAttribute(e,"data-"+n)}getComputedStyle(e){return getComputedStyle(e)}supportsWebAnimation(){return"function"==typeof Element.prototype.animate}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(e){return function(e,n){n=encodeURIComponent(n);for(const t of e.split(";")){const e=t.indexOf("="),[l,i]=-1==e?[t,""]:[t.slice(0,e),t.slice(e+1)];if(l.trim()===n)return decodeURIComponent(i)}return null}(document.cookie,e)}setCookie(e,n){document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(n)}}let Sc,Ec=null;function vc(){return!!window.history.pushState}const bc=(()=>{class e extends fo{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=oc().getLocation(),this._history=oc().getHistory()}getBaseHrefFromDOM(){return oc().getBaseHref(this._doc)}onPopState(e){oc().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)}onHashChange(e){oc().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,n,t){vc()?this._history.pushState(e,n,t):this.location.hash=t}replaceState(e,n,t){vc()?this._history.replaceState(e,n,t):this.location.hash=t}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return e.ctorParameters=()=>[{type:void 0,decorators:[{type:se,args:[oa]}]}],e})(),Oc=new Ce("TRANSITION_ID"),Rc=[{provide:Fi,useFactory:function(e,n,t){return()=>{t.get(Hi).donePromise.then(()=>{const t=oc();Array.prototype.slice.apply(t.querySelectorAll(n,"style[ng-transition]")).filter(n=>t.getAttribute(n,"ng-transition")===e).forEach(e=>t.remove(e))})}},deps:[Oc,oa,We],multi:!0}];class Tc{static init(){var e;e=new Tc,vr=e}addToWindow(e){Te.getAngularTestability=(n,t=!0)=>{const l=e.findTestabilityInTree(n,t);if(null==l)throw new Error("Could not find testability for element.");return l},Te.getAllAngularTestabilities=()=>e.getAllTestabilities(),Te.getAllAngularRootElements=()=>e.getAllRootElements(),Te.frameworkStabilizers||(Te.frameworkStabilizers=[]),Te.frameworkStabilizers.push(e=>{const n=Te.getAllAngularTestabilities();let t=n.length,l=!1;const i=function(n){l=l||n,0==--t&&e(l)};n.forEach(function(e){e.whenStable(i)})})}findTestabilityInTree(e,n,t){if(null==n)return null;const l=e.getTestability(n);return null!=l?l:t?oc().isShadowRoot(n)?this.findTestabilityInTree(e,oc().getHost(n),!0):this.findTestabilityInTree(e,oc().parentElement(n),!0):null}}function Cc(e,n){"undefined"!=typeof COMPILED&&COMPILED||((Te.ng=Te.ng||{})[e]=n)}const Ic=(()=>({ApplicationRef:_r,NgZone:or}))();function yc(e){return Hr(e)}const _c=new Ce("EventManagerPlugins"),Ac=(()=>(class{constructor(e,n){this._zone=n,this._eventNameToPlugin=new Map,e.forEach(e=>e.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,n,t){return this._findPluginFor(n).addEventListener(e,n,t)}addGlobalEventListener(e,n,t){return this._findPluginFor(n).addGlobalEventListener(e,n,t)}getZone(){return this._zone}_findPluginFor(e){const n=this._eventNameToPlugin.get(e);if(n)return n;const t=this._plugins;for(let l=0;l<t.length;l++){const n=t[l];if(n.supports(e))return this._eventNameToPlugin.set(e,n),n}throw new Error(`No event manager plugin found for event ${e}`)}}))();class wc{constructor(e){this._doc=e}addGlobalEventListener(e,n,t){const l=oc().getGlobalEventTarget(this._doc,e);if(!l)throw new Error(`Unsupported event target ${l} for event ${n}`);return this.addEventListener(l,n,t)}}const Nc=(()=>(class{constructor(){this._stylesSet=new Set}addStyles(e){const n=new Set;e.forEach(e=>{this._stylesSet.has(e)||(this._stylesSet.add(e),n.add(e))}),this.onStylesAdded(n)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}))(),Pc=(()=>(class extends Nc{constructor(e){super(),this._doc=e,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(e.head)}_addStylesToHost(e,n){e.forEach(e=>{const t=this._doc.createElement("style");t.textContent=e,this._styleNodes.add(n.appendChild(t))})}addHost(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)}removeHost(e){this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach(n=>this._addStylesToHost(e,n))}ngOnDestroy(){this._styleNodes.forEach(e=>oc().remove(e))}}))(),kc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},xc=/%COMP%/g,Mc="_nghost-%COMP%",Dc="_ngcontent-%COMP%";function Lc(e,n,t){for(let l=0;l<n.length;l++){let i=n[l];Array.isArray(i)?Lc(e,i,t):(i=i.replace(xc,e),t.push(i))}return t}function Fc(e){return n=>{!1===e(n)&&(n.preventDefault(),n.returnValue=!1)}}const Hc=(()=>(class{constructor(e,n,t){this.eventManager=e,this.sharedStylesHost=n,this.appId=t,this.rendererByCompId=new Map,this.defaultRenderer=new Uc(e)}createRenderer(e,n){if(!e||!n)return this.defaultRenderer;switch(n.encapsulation){case nn.Emulated:{let t=this.rendererByCompId.get(n.id);return t||(t=new Wc(this.eventManager,this.sharedStylesHost,n,this.appId),this.rendererByCompId.set(n.id,t)),t.applyToHost(e),t}case nn.Native:case nn.ShadowDom:return new Vc(this.eventManager,this.sharedStylesHost,e,n);default:if(!this.rendererByCompId.has(n.id)){const e=Lc(n.id,n.styles,[]);this.sharedStylesHost.addStyles(e),this.rendererByCompId.set(n.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}))();class Uc{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,n){return n?document.createElementNS(kc[n]||n,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,n){e.appendChild(n)}insertBefore(e,n,t){e&&e.insertBefore(n,t)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let t="string"==typeof e?document.querySelector(e):e;if(!t)throw new Error(`The selector "${e}" did not match any elements`);return n||(t.textContent=""),t}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,t,l){if(l){n=l+":"+n;const i=kc[l];i?e.setAttributeNS(i,n,t):e.setAttribute(n,t)}else e.setAttribute(n,t)}removeAttribute(e,n,t){if(t){const l=kc[t];l?e.removeAttributeNS(l,n):e.removeAttribute(`${t}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,t,l){l&at.DashCase?e.style.setProperty(n,t,l&at.Important?"important":""):e.style[n]=t}removeStyle(e,n,t){t&at.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,t){Bc(n,"property"),e[n]=t}setValue(e,n){e.nodeValue=n}listen(e,n,t){return Bc(n,"listener"),"string"==typeof e?this.eventManager.addGlobalEventListener(e,n,Fc(t)):this.eventManager.addEventListener(e,n,Fc(t))}}const Gc=(()=>"@".charCodeAt(0))();function Bc(e,n){if(e.charCodeAt(0)===Gc)throw new Error(`Found the synthetic ${n} ${e}. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.`)}class Wc extends Uc{constructor(e,n,t,l){super(e),this.component=t;const i=Lc(l+"-"+t.id,t.styles,[]);n.addStyles(i),this.contentAttr=Dc.replace(xc,l+"-"+t.id),this.hostAttr=Mc.replace(xc,l+"-"+t.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,n){const t=super.createElement(e,n);return super.setAttribute(t,this.contentAttr,""),t}}class Vc extends Uc{constructor(e,n,t,l){super(e),this.sharedStylesHost=n,this.hostEl=t,this.component=l,this.shadowRoot=l.encapsulation===nn.ShadowDom?t.attachShadow({mode:"open"}):t.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const i=Lc(l.id,l.styles,[]);for(let r=0;r<i.length;r++){const e=document.createElement("style");e.textContent=i[r],this.shadowRoot.appendChild(e)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,t){return super.insertBefore(this.nodeOrShadowRoot(e),n,t)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}const zc=(()=>"undefined"!=typeof Zone&&Zone.__symbol__||function(e){return"__zone_symbol__"+e})(),Yc=zc("addEventListener"),$c=zc("removeEventListener"),Kc={},jc="__zone_symbol__propagationStopped",qc=(()=>{const e="undefined"!=typeof Zone&&Zone[zc("BLACK_LISTED_EVENTS")];if(e){const n={};return e.forEach(e=>{n[e]=e}),n}})(),Xc=function(e){return!!qc&&qc.hasOwnProperty(e)},Qc=function(e){const n=Kc[e.type];if(!n)return;const t=this[n];if(!t)return;const l=[e];if(1===t.length){const e=t[0];return e.zone!==Zone.current?e.zone.run(e.handler,this,l):e.handler.apply(this,l)}{const n=t.slice();for(let t=0;t<n.length&&!0!==e[jc];t++){const e=n[t];e.zone!==Zone.current?e.zone.run(e.handler,this,l):e.handler.apply(this,l)}}},Zc=(()=>(class extends wc{constructor(e,n,t){super(e),this.ngZone=n,t&&function(e){return"server"===e}(t)||this.patchEvent()}patchEvent(){if("undefined"==typeof Event||!Event||!Event.prototype)return;if(Event.prototype.__zone_symbol__stopImmediatePropagation)return;const e=Event.prototype.__zone_symbol__stopImmediatePropagation=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[jc]=!0),e&&e.apply(this,arguments)}}supports(e){return!0}addEventListener(e,n,t){let l=t;if(!e[Yc]||or.isInAngularZone()&&!Xc(n))e.addEventListener(n,l,!1);else{let t=Kc[n];t||(t=Kc[n]=zc("ANGULAR"+n+"FALSE"));let i=e[t];const r=i&&i.length>0;i||(i=e[t]=[]);const s=Xc(n)?Zone.root:Zone.current;if(0===i.length)i.push({zone:s,handler:l});else{let e=!1;for(let n=0;n<i.length;n++)if(i[n].handler===l){e=!0;break}e||i.push({zone:s,handler:l})}r||e[Yc](n,Qc,!1)}return()=>this.removeEventListener(e,n,l)}removeEventListener(e,n,t){let l=e[$c];if(!l)return e.removeEventListener.apply(e,[n,t,!1]);let i=Kc[n],r=i&&e[i];if(!r)return e.removeEventListener.apply(e,[n,t,!1]);let s=!1;for(let u=0;u<r.length;u++)if(r[u].handler===t){s=!0,r.splice(u,1);break}s?0===r.length&&l.apply(e,[n,Qc,!1]):e.removeEventListener.apply(e,[n,t,!1])}}))(),Jc={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},eh=new Ce("HammerGestureConfig"),nh=new Ce("HammerLoader"),th=(()=>(class{constructor(){this.events=[],this.overrides={}}buildHammer(e){const n=new Hammer(e,this.options);n.get("pinch").set({enable:!0}),n.get("rotate").set({enable:!0});for(const t in this.overrides)n.get(t).set(this.overrides[t]);return n}}))(),lh=(()=>(class extends wc{constructor(e,n,t,l){super(e),this._config=n,this.console=t,this.loader=l}supports(e){return!(!Jc.hasOwnProperty(e.toLowerCase())&&!this.isCustomEvent(e)||!window.Hammer&&!this.loader&&(this.console.warn(`The "${e}" event cannot be bound because Hammer.JS is not `+"loaded and no custom loader has been specified."),1))}addEventListener(e,n,t){const l=this.manager.getZone();if(n=n.toLowerCase(),!window.Hammer&&this.loader){let l=!1,i=()=>{l=!0};return this.loader().then(()=>{if(!window.Hammer)return this.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(i=()=>{});l||(i=this.addEventListener(e,n,t))}).catch(()=>{this.console.warn(`The "${n}" event cannot be bound because the custom `+"Hammer.JS loader failed."),i=()=>{}}),()=>{i()}}return l.runOutsideAngular(()=>{const i=this._config.buildHammer(e),r=function(e){l.runGuarded(function(){t(e)})};return i.on(n,r),()=>{i.off(n,r),"function"==typeof i.destroy&&i.destroy()}})}isCustomEvent(e){return this._config.events.indexOf(e)>-1}}))(),ih=["alt","control","meta","shift"],rh={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},sh=(()=>{class e extends wc{constructor(e){super(e)}supports(n){return null!=e.parseEventName(n)}addEventListener(n,t,l){const i=e.parseEventName(t),r=e.eventCallback(i.fullKey,l,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>oc().onAndCancel(n,i.domEventName,r))}static parseEventName(n){const t=n.toLowerCase().split("."),l=t.shift();if(0===t.length||"keydown"!==l&&"keyup"!==l)return null;const i=e._normalizeKey(t.pop());let r="";if(ih.forEach(e=>{const n=t.indexOf(e);n>-1&&(t.splice(n,1),r+=e+".")}),r+=i,0!=t.length||0===i.length)return null;const s={};return s.domEventName=l,s.fullKey=r,s}static getEventFullKey(e){let n="",t=oc().getEventKey(e);return" "===(t=t.toLowerCase())?t="space":"."===t&&(t="dot"),ih.forEach(l=>{l!=t&&(0,rh[l])(e)&&(n+=l+".")}),n+=t}static eventCallback(n,t,l){return i=>{e.getEventFullKey(i)===n&&l.runGuarded(()=>t(i))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return e})();class uh{}const oh=(()=>(class extends uh{constructor(e){super(),this._doc=e}sanitize(e,n){if(null==n)return null;switch(e){case An.NONE:return n;case An.HTML:return n instanceof ch?n.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(n,"HTML"),function(e,n){let t=null;try{yn=yn||new un(e);let l=n?String(n):"";t=yn.getInertBodyElement(l);let i=5,r=l;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,l=r,r=t.innerHTML,t=yn.getInertBodyElement(l)}while(l!==r);const s=new Rn,u=s.sanitizeChildren(_n(t)||t);return sn()&&s.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),u}finally{if(t){const e=_n(t)||t;for(;e.firstChild;)e.removeChild(e.firstChild)}}}(this._doc,String(n)));case An.STYLE:return n instanceof hh?n.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(n,"Style"),function(e){if(!(e=String(e).trim()))return"";const n=e.match(Pn);return n&&cn(n[1])===n[1]||e.match(Nn)&&function(e){let n=!0,t=!0;for(let l=0;l<e.length;l++){const i=e.charAt(l);"'"===i&&t?n=!n:'"'===i&&n&&(t=!t)}return n&&t}(e)?e:(sn()&&console.warn(`WARNING: sanitizing unsafe style value ${e} (see http://g.co/ng/security#xss).`),"unsafe")}(n));case An.SCRIPT:if(n instanceof dh)return n.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(n,"Script"),new Error("unsafe value used in a script context");case An.URL:return n instanceof ph||n instanceof gh?n.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(n,"URL"),cn(String(n)));case An.RESOURCE_URL:if(n instanceof ph)return n.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(n,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see http://g.co/ng/security#xss)`)}}checkNotSafeValue(e,n){if(e instanceof ah)throw new Error(`Required a safe ${n}, got a ${e.getTypeName()} `+"(see http://g.co/ng/security#xss)")}bypassSecurityTrustHtml(e){return new ch(e)}bypassSecurityTrustStyle(e){return new hh(e)}bypassSecurityTrustScript(e){return new dh(e)}bypassSecurityTrustUrl(e){return new gh(e)}bypassSecurityTrustResourceUrl(e){return new ph(e)}}))();class ah{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity}`+" (see http://g.co/ng/security#xss)"}}class ch extends ah{getTypeName(){return"HTML"}}class hh extends ah{getTypeName(){return"Style"}}class dh extends ah{getTypeName(){return"Script"}}class gh extends ah{getTypeName(){return"URL"}}class ph extends ah{getTypeName(){return"ResourceURL"}}const mh=Tr(Gr,"browser",[{provide:Vi,useValue:aa},{provide:Wi,useValue:function(){fc.makeCurrent(),Tc.init()},multi:!0},{provide:fo,useClass:bc,deps:[oa]},{provide:oa,useFactory:function(){return document},deps:[]}]);function fh(){return new Dn}const Sh=(()=>{class e{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(n){return{ngModule:e,providers:[{provide:Ui,useValue:n.appId},{provide:Oc,useExisting:Ui},Rc]}}}return e})();"undefined"!=typeof window&&window;class Eh{constructor(e,n){this.id=e,this.url=n}}class vh extends Eh{constructor(e,n,t="imperative",l=null){super(e,n),this.navigationTrigger=t,this.restoredState=l}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class bh extends Eh{constructor(e,n,t){super(e,n),this.urlAfterRedirects=t}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Oh extends Eh{constructor(e,n,t){super(e,n),this.reason=t}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Rh extends Eh{constructor(e,n,t){super(e,n),this.error=t}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Th extends Eh{constructor(e,n,t,l){super(e,n),this.urlAfterRedirects=t,this.state=l}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ch extends Eh{constructor(e,n,t,l){super(e,n),this.urlAfterRedirects=t,this.state=l}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ih extends Eh{constructor(e,n,t,l,i){super(e,n),this.urlAfterRedirects=t,this.state=l,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class yh extends Eh{constructor(e,n,t,l){super(e,n),this.urlAfterRedirects=t,this.state=l}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _h extends Eh{constructor(e,n,t,l){super(e,n),this.urlAfterRedirects=t,this.state=l}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ah{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class wh{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Nh{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ph{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class kh{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xh{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mh{constructor(e,n,t){this.routerEvent=e,this.position=n,this.anchor=t}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Dh=(()=>(class{}))(),Lh="primary";class Fh{constructor(e){this.params=e||{}}has(e){return this.params.hasOwnProperty(e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function Hh(e){return new Fh(e)}const Uh="ngNavigationCancelingError";function Gh(e){const n=Error("NavigationCancelingError: "+e);return n[Uh]=!0,n}function Bh(e,n,t){const l=t.path.split("/");if(l.length>e.length)return null;if("full"===t.pathMatch&&(n.hasChildren()||l.length<e.length))return null;const i={};for(let r=0;r<l.length;r++){const n=l[r],t=e[r];if(n.startsWith(":"))i[n.substring(1)]=t;else if(n!==t.path)return null}return{consumed:e.slice(0,l.length),posParams:i}}class Wh{constructor(e,n){this.routes=e,this.module=n}}function Vh(e,n=""){for(let t=0;t<e.length;t++){const l=e[t];zh(l,Yh(n,l))}}function zh(e,n){if(!e)throw new Error(`\n      Invalid configuration of route '${n}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(e))throw new Error(`Invalid configuration of route '${n}': Array cannot be specified`);if(!e.component&&!e.children&&!e.loadChildren&&e.outlet&&e.outlet!==Lh)throw new Error(`Invalid configuration of route '${n}': a componentless route without children or loadChildren cannot have a named outlet set`);if(e.redirectTo&&e.children)throw new Error(`Invalid configuration of route '${n}': redirectTo and children cannot be used together`);if(e.redirectTo&&e.loadChildren)throw new Error(`Invalid configuration of route '${n}': redirectTo and loadChildren cannot be used together`);if(e.children&&e.loadChildren)throw new Error(`Invalid configuration of route '${n}': children and loadChildren cannot be used together`);if(e.redirectTo&&e.component)throw new Error(`Invalid configuration of route '${n}': redirectTo and component cannot be used together`);if(e.path&&e.matcher)throw new Error(`Invalid configuration of route '${n}': path and matcher cannot be used together`);if(void 0===e.redirectTo&&!e.component&&!e.children&&!e.loadChildren)throw new Error(`Invalid configuration of route '${n}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===e.path&&void 0===e.matcher)throw new Error(`Invalid configuration of route '${n}': routes must have either a path or a matcher specified`);if("string"==typeof e.path&&"/"===e.path.charAt(0))throw new Error(`Invalid configuration of route '${n}': path cannot start with a slash`);if(""===e.path&&void 0!==e.redirectTo&&void 0===e.pathMatch)throw new Error(`Invalid configuration of route '{path: "${n}", redirectTo: "${e.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==e.pathMatch&&"full"!==e.pathMatch&&"prefix"!==e.pathMatch)throw new Error(`Invalid configuration of route '${n}': pathMatch can only be set to 'prefix' or 'full'`);e.children&&Vh(e.children,n)}function Yh(e,n){return n?e||n.path?e&&!n.path?`${e}/`:!e&&n.path?n.path:`${e}/${n.path}`:"":e}function $h(e){const n=e.children&&e.children.map($h),t=n?Object.assign({},e,{children:n}):Object.assign({},e);return!t.component&&(n||t.loadChildren)&&t.outlet&&t.outlet!==Lh&&(t.component=Dh),t}function Kh(e,n){const t=Object.keys(e),l=Object.keys(n);if(!t||!l||t.length!=l.length)return!1;let i;for(let r=0;r<t.length;r++)if(e[i=t[r]]!==n[i])return!1;return!0}function jh(e){return Array.prototype.concat.apply([],e)}function qh(e){return e.length>0?e[e.length-1]:null}function Xh(e,n){for(const t in e)e.hasOwnProperty(t)&&n(e[t],t)}function Qh(e){return $n(e)?e:Yn(e)?V(Promise.resolve(e)):da(e)}function Zh(e,n,t){return t?function(e,n){return Kh(e,n)}(e.queryParams,n.queryParams)&&function e(n,t){if(!td(n.segments,t.segments))return!1;if(n.numberOfChildren!==t.numberOfChildren)return!1;for(const l in t.children){if(!n.children[l])return!1;if(!e(n.children[l],t.children[l]))return!1}return!0}(e.root,n.root):function(e,n){return Object.keys(n).length<=Object.keys(e).length&&Object.keys(n).every(t=>n[t]===e[t])}(e.queryParams,n.queryParams)&&function e(n,t){return function n(t,l,i){if(t.segments.length>i.length){return!!td(t.segments.slice(0,i.length),i)&&!l.hasChildren()}if(t.segments.length===i.length){if(!td(t.segments,i))return!1;for(const n in l.children){if(!t.children[n])return!1;if(!e(t.children[n],l.children[n]))return!1}return!0}{const e=i.slice(0,t.segments.length),r=i.slice(t.segments.length);return!!td(t.segments,e)&&!!t.children[Lh]&&n(t.children[Lh],l,r)}}(n,t,t.segments)}(e.root,n.root)}class Jh{constructor(e,n,t){this.root=e,this.queryParams=n,this.fragment=t}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Hh(this.queryParams)),this._queryParamMap}toString(){return sd.serialize(this)}}class ed{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Xh(n,(e,n)=>e.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ud(this)}}class nd{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=Hh(this.parameters)),this._parameterMap}toString(){return gd(this)}}function td(e,n){return e.length===n.length&&e.every((e,t)=>e.path===n[t].path)}function ld(e,n){let t=[];return Xh(e.children,(e,l)=>{l===Lh&&(t=t.concat(n(e,l)))}),Xh(e.children,(e,l)=>{l!==Lh&&(t=t.concat(n(e,l)))}),t}class id{}class rd{parse(e){const n=new Ed(e);return new Jh(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){var n;return`${`/${function e(n,t){if(!n.hasChildren())return ud(n);if(t){const t=n.children[Lh]?e(n.children[Lh],!1):"",l=[];return Xh(n.children,(n,t)=>{t!==Lh&&l.push(`${t}:${e(n,!1)}`)}),l.length>0?`${t}(${l.join("//")})`:t}{const t=ld(n,(t,l)=>l===Lh?[e(n.children[Lh],!1)]:[`${l}:${e(t,!1)}`]);return`${ud(n)}/(${t.join("//")})`}}(e.root,!0)}`}${function(e){const n=Object.keys(e).map(n=>{const t=e[n];return Array.isArray(t)?t.map(e=>`${ad(n)}=${ad(e)}`).join("&"):`${ad(n)}=${ad(t)}`});return n.length?`?${n.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${n=e.fragment,encodeURI(n)}`:""}`}}const sd=new rd;function ud(e){return e.segments.map(e=>gd(e)).join("/")}function od(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ad(e){return od(e).replace(/%3B/gi,";")}function cd(e){return od(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function hd(e){return decodeURIComponent(e)}function dd(e){return hd(e.replace(/\+/g,"%20"))}function gd(e){return`${cd(e.path)}${n=e.parameters,Object.keys(n).map(e=>`;${cd(e)}=${cd(n[e])}`).join("")}`;var n}const pd=/^[^\/()?;=#]+/;function md(e){const n=e.match(pd);return n?n[0]:""}const fd=/^[^=?&#]+/,Sd=/^[^?&#]+/;class Ed{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ed([],{}):new ed([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let t={};return this.peekStartsWith("(")&&(t=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(t[Lh]=new ed(e,n)),t}parseSegment(){const e=md(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new nd(hd(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=md(this.remaining);if(!n)return;this.capture(n);let t="";if(this.consumeOptional("=")){const e=md(this.remaining);e&&this.capture(t=e)}e[hd(n)]=hd(t)}parseQueryParam(e){const n=function(e){const n=e.match(fd);return n?n[0]:""}(this.remaining);if(!n)return;this.capture(n);let t="";if(this.consumeOptional("=")){const e=function(e){const n=e.match(Sd);return n?n[0]:""}(this.remaining);e&&this.capture(t=e)}const l=dd(n),i=dd(t);if(e.hasOwnProperty(l)){let n=e[l];Array.isArray(n)||(e[l]=n=[n]),n.push(i)}else e[l]=i}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const t=md(this.remaining),l=this.remaining[t.length];if("/"!==l&&")"!==l&&";"!==l)throw new Error(`Cannot parse url '${this.url}'`);let i=void 0;t.indexOf(":")>-1?(i=t.substr(0,t.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=Lh);const r=this.parseChildren();n[i]=1===Object.keys(r).length?r[Lh]:new ed([],r),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class vd{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=bd(e,this._root);return n?n.children.map(e=>e.value):[]}firstChild(e){const n=bd(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=Od(e,this._root);return n.length<2?[]:n[n.length-2].children.map(e=>e.value).filter(n=>n!==e)}pathFromRoot(e){return Od(e,this._root).map(e=>e.value)}}function bd(e,n){if(e===n.value)return n;for(const t of n.children){const n=bd(e,t);if(n)return n}return null}function Od(e,n){if(e===n.value)return[n];for(const t of n.children){const l=Od(e,t);if(l.length)return l.unshift(n),l}return[]}class Rd{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function Td(e){const n={};return e&&e.children.forEach(e=>n[e.value.outlet]=e),n}class Cd extends vd{constructor(e,n){super(e),this.snapshot=n,Nd(this,e)}toString(){return this.snapshot.toString()}}function Id(e,n){const t=function(e,n){const t=new Ad([],{},{},"",{},Lh,n,null,e.root,-1,{});return new wd("",new Rd(t,[]))}(e,n),l=new ga([new nd("",{})]),i=new ga({}),r=new ga({}),s=new ga({}),u=new ga(""),o=new yd(l,i,s,u,r,Lh,n,t.root);return o.snapshot=t.root,new Cd(new Rd(o,[]),t)}class yd{constructor(e,n,t,l,i,r,s,u){this.url=e,this.params=n,this.queryParams=t,this.fragment=l,this.data=i,this.outlet=r,this.component=s,this._futureSnapshot=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(U(e=>Hh(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(U(e=>Hh(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function _d(e,n="emptyOnly"){const t=e.pathFromRoot;let l=0;if("always"!==n)for(l=t.length-1;l>=1;){const e=t[l],n=t[l-1];if(e.routeConfig&&""===e.routeConfig.path)l--;else{if(n.component)break;l--}}return function(e){return e.reduce((e,n)=>({params:Object.assign({},e.params,n.params),data:Object.assign({},e.data,n.data),resolve:Object.assign({},e.resolve,n._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(l))}class Ad{constructor(e,n,t,l,i,r,s,u,o,a,c){this.url=e,this.params=n,this.queryParams=t,this.fragment=l,this.data=i,this.outlet=r,this.component=s,this.routeConfig=u,this._urlSegment=o,this._lastPathIndex=a,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Hh(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Hh(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(e=>e.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class wd extends vd{constructor(e,n){super(n),this.url=e,Nd(this,n)}toString(){return Pd(this._root)}}function Nd(e,n){n.value._routerState=e,n.children.forEach(n=>Nd(e,n))}function Pd(e){const n=e.children.length>0?` { ${e.children.map(Pd).join(", ")} } `:"";return`${e.value}${n}`}function kd(e){if(e.snapshot){const n=e.snapshot,t=e._futureSnapshot;e.snapshot=t,Kh(n.queryParams,t.queryParams)||e.queryParams.next(t.queryParams),n.fragment!==t.fragment&&e.fragment.next(t.fragment),Kh(n.params,t.params)||e.params.next(t.params),function(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;++t)if(!Kh(e[t],n[t]))return!1;return!0}(n.url,t.url)||e.url.next(t.url),Kh(n.data,t.data)||e.data.next(t.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function xd(e,n){var t,l;return Kh(e.params,n.params)&&td(t=e.url,l=n.url)&&t.every((e,n)=>Kh(e.parameters,l[n].parameters))&&!(!e.parent!=!n.parent)&&(!e.parent||xd(e.parent,n.parent))}function Md(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Dd(e,n,t,l,i){let r={};return l&&Xh(l,(e,n)=>{r[n]=Array.isArray(e)?e.map(e=>`${e}`):`${e}`}),new Jh(t.root===e?n:function e(n,t,l){const i={};return Xh(n.children,(n,r)=>{i[r]=n===t?l:e(n,t,l)}),new ed(n.segments,i)}(t.root,e,n),r,i)}class Ld{constructor(e,n,t){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=t,e&&t.length>0&&Md(t[0]))throw new Error("Root segment cannot have matrix parameters");const l=t.find(e=>"object"==typeof e&&null!=e&&e.outlets);if(l&&l!==qh(t))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Fd{constructor(e,n,t){this.segmentGroup=e,this.processChildren=n,this.index=t}}function Hd(e){return"object"==typeof e&&null!=e&&e.outlets?e.outlets[Lh]:`${e}`}function Ud(e,n,t){if(e||(e=new ed([],{})),0===e.segments.length&&e.hasChildren())return Gd(e,n,t);const l=function(e,n,t){let l=0,i=n;const r={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(l>=t.length)return r;const n=e.segments[i],s=Hd(t[l]),u=l<t.length-1?t[l+1]:null;if(i>0&&void 0===s)break;if(s&&u&&"object"==typeof u&&void 0===u.outlets){if(!zd(s,u,n))return r;l+=2}else{if(!zd(s,{},n))return r;l++}i++}return{match:!0,pathIndex:i,commandIndex:l}}(e,n,t),i=t.slice(l.commandIndex);if(l.match&&l.pathIndex<e.segments.length){const n=new ed(e.segments.slice(0,l.pathIndex),{});return n.children[Lh]=new ed(e.segments.slice(l.pathIndex),e.children),Gd(n,0,i)}return l.match&&0===i.length?new ed(e.segments,{}):l.match&&!e.hasChildren()?Bd(e,n,t):l.match?Gd(e,0,i):Bd(e,n,t)}function Gd(e,n,t){if(0===t.length)return new ed(e.segments,{});{const l=function(e){return"object"!=typeof e[0]?{[Lh]:e}:void 0===e[0].outlets?{[Lh]:e}:e[0].outlets}(t),i={};return Xh(l,(t,l)=>{null!==t&&(i[l]=Ud(e.children[l],n,t))}),Xh(e.children,(e,n)=>{void 0===l[n]&&(i[n]=e)}),new ed(e.segments,i)}}function Bd(e,n,t){const l=e.segments.slice(0,n);let i=0;for(;i<t.length;){if("object"==typeof t[i]&&void 0!==t[i].outlets){const e=Wd(t[i].outlets);return new ed(l,e)}if(0===i&&Md(t[0])){l.push(new nd(e.segments[n].path,t[0])),i++;continue}const r=Hd(t[i]),s=i<t.length-1?t[i+1]:null;r&&s&&Md(s)?(l.push(new nd(r,Vd(s))),i+=2):(l.push(new nd(r,{})),i++)}return new ed(l,{})}function Wd(e){const n={};return Xh(e,(e,t)=>{null!==e&&(n[t]=Bd(new ed([],{}),0,e))}),n}function Vd(e){const n={};return Xh(e,(e,t)=>n[t]=`${e}`),n}function zd(e,n,t){return e==t.path&&Kh(n,t.parameters)}const Yd=(e,n,t)=>U(l=>(new $d(n,l.targetRouterState,l.currentRouterState,t).activate(e),l));class $d{constructor(e,n,t,l){this.routeReuseStrategy=e,this.futureState=n,this.currState=t,this.forwardEvent=l}activate(e){const n=this.futureState._root,t=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,t,e),kd(this.futureState.root),this.activateChildRoutes(n,t,e)}deactivateChildRoutes(e,n,t){const l=Td(n);e.children.forEach(e=>{const n=e.value.outlet;this.deactivateRoutes(e,l[n],t),delete l[n]}),Xh(l,(e,n)=>{this.deactivateRouteAndItsChildren(e,t)})}deactivateRoutes(e,n,t){const l=e.value,i=n?n.value:null;if(l===i)if(l.component){const i=t.getContext(l.outlet);i&&this.deactivateChildRoutes(e,n,i.children)}else this.deactivateChildRoutes(e,n,t);else i&&this.deactivateRouteAndItsChildren(n,t)}deactivateRouteAndItsChildren(e,n){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const t=n.getContext(e.value.outlet);if(t&&t.outlet){const n=t.outlet.detach(),l=t.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:n,route:e,contexts:l})}}deactivateRouteAndOutlet(e,n){const t=n.getContext(e.value.outlet);if(t){const l=Td(e),i=e.value.component?t.children:n;Xh(l,(e,n)=>this.deactivateRouteAndItsChildren(e,i)),t.outlet&&(t.outlet.deactivate(),t.children.onOutletDeactivated())}}activateChildRoutes(e,n,t){const l=Td(n);e.children.forEach(e=>{this.activateRoutes(e,l[e.value.outlet],t),this.forwardEvent(new xh(e.value.snapshot))}),e.children.length&&this.forwardEvent(new Ph(e.value.snapshot))}activateRoutes(e,n,t){const l=e.value,i=n?n.value:null;if(kd(l),l===i)if(l.component){const i=t.getOrCreateContext(l.outlet);this.activateChildRoutes(e,n,i.children)}else this.activateChildRoutes(e,n,t);else if(l.component){const n=t.getOrCreateContext(l.outlet);if(this.routeReuseStrategy.shouldAttach(l.snapshot)){const e=this.routeReuseStrategy.retrieve(l.snapshot);this.routeReuseStrategy.store(l.snapshot,null),n.children.onOutletReAttached(e.contexts),n.attachRef=e.componentRef,n.route=e.route.value,n.outlet&&n.outlet.attach(e.componentRef,e.route.value),Kd(e.route)}else{const t=function(e){for(let n=l.snapshot.parent;n;n=n.parent){const e=n.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(),i=t?t.module.componentFactoryResolver:null;n.attachRef=null,n.route=l,n.resolver=i,n.outlet&&n.outlet.activateWith(l,i),this.activateChildRoutes(e,null,n.children)}}else this.activateChildRoutes(e,null,t)}}function Kd(e){kd(e.value),e.children.forEach(Kd)}function jd(e){return"function"==typeof e}function qd(e){return e instanceof Jh}class Xd{constructor(e){this.segmentGroup=e||null}}class Qd{constructor(e){this.urlTree=e}}function Zd(e){return new O(n=>n.error(new Xd(e)))}function Jd(e){return new O(n=>n.error(new Qd(e)))}function eg(e){return new O(n=>n.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e}'`)))}class ng{constructor(e,n,t,l,i){this.configLoader=n,this.urlSerializer=t,this.urlTree=l,this.config=i,this.allowRedirects=!0,this.ngModule=e.get(tt)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,Lh).pipe(U(e=>this.createUrlTree(e,this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ha(e=>{if(e instanceof Qd)return this.allowRedirects=!1,this.match(e.urlTree);if(e instanceof Xd)throw this.noMatchError(e);throw e}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Lh).pipe(U(n=>this.createUrlTree(n,e.queryParams,e.fragment))).pipe(Ha(e=>{if(e instanceof Xd)throw this.noMatchError(e);throw e}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,n,t){const l=e.segments.length>0?new ed([],{[Lh]:e}):e;return new Jh(l,n,t)}expandSegmentGroup(e,n,t,l){return 0===t.segments.length&&t.hasChildren()?this.expandChildren(e,n,t).pipe(U(e=>new ed([],e))):this.expandSegment(e,t,n,t.segments,l,!0)}expandChildren(e,n,t){return function(e,n){if(0===Object.keys(e).length)return da({});const t=[],l=[],i={};return Xh(e,(e,r)=>{const s=n(r,e).pipe(U(e=>i[r]=e));r===Lh?t.push(s):l.push(s)}),da.apply(null,t.concat(l)).pipe(Ra(),Fa(),U(()=>i))}(t.children,(t,l)=>this.expandSegmentGroup(e,n,l,t))}expandSegment(e,n,t,l,i,r){return da(...t).pipe(U(s=>this.expandSegmentAgainstRoute(e,n,t,s,l,i,r).pipe(Ha(e=>{if(e instanceof Xd)return da(null);throw e}))),Ra(),za(e=>!!e),Ha((e,t)=>{if(e instanceof ma||"EmptyError"===e.name){if(this.noLeftoversInUrl(n,l,i))return da(new ed([],{}));throw new Xd(n)}throw e}))}noLeftoversInUrl(e,n,t){return 0===n.length&&!e.children[t]}expandSegmentAgainstRoute(e,n,t,l,i,r,s){return rg(l)!==r?Zd(n):void 0===l.redirectTo?this.matchSegmentAgainstRoute(e,n,l,i):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,n,t,l,i,r):Zd(n)}expandSegmentAgainstRouteUsingRedirect(e,n,t,l,i,r){return"**"===l.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,l,r):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,t,l,i,r)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,t,l){const i=this.applyRedirectCommands([],t.redirectTo,{});return t.redirectTo.startsWith("/")?Jd(i):this.lineralizeSegments(t,i).pipe(z(t=>{const i=new ed(t,{});return this.expandSegment(e,i,n,t,l,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,t,l,i,r){const{matched:s,consumedSegments:u,lastChild:o,positionalParamSegments:a}=tg(n,l,i);if(!s)return Zd(n);const c=this.applyRedirectCommands(u,l.redirectTo,a);return l.redirectTo.startsWith("/")?Jd(c):this.lineralizeSegments(l,c).pipe(z(l=>this.expandSegment(e,n,t,l.concat(i.slice(o)),r,!1)))}matchSegmentAgainstRoute(e,n,t,l){if("**"===t.path)return t.loadChildren?this.configLoader.load(e.injector,t).pipe(U(e=>(t._loadedConfig=e,new ed(l,{})))):da(new ed(l,{}));const{matched:i,consumedSegments:r,lastChild:s}=tg(n,t,l);if(!i)return Zd(n);const u=l.slice(s);return this.getChildConfig(e,t,l).pipe(z(e=>{const t=e.module,l=e.routes,{segmentGroup:i,slicedSegments:s}=function(e,n,t,l){return t.length>0&&function(e,n,t){return l.some(t=>ig(e,n,t)&&rg(t)!==Lh)}(e,t)?{segmentGroup:lg(new ed(n,function(e,n){const t={};t[Lh]=n;for(const l of e)""===l.path&&rg(l)!==Lh&&(t[rg(l)]=new ed([],{}));return t}(l,new ed(t,e.children)))),slicedSegments:[]}:0===t.length&&function(e,n,t){return l.some(t=>ig(e,n,t))}(e,t)?{segmentGroup:lg(new ed(e.segments,function(e,n,t,l){const i={};for(const r of t)ig(e,n,r)&&!l[rg(r)]&&(i[rg(r)]=new ed([],{}));return Object.assign({},l,i)}(e,t,l,e.children))),slicedSegments:t}:{segmentGroup:e,slicedSegments:t}}(n,r,u,l);return 0===s.length&&i.hasChildren()?this.expandChildren(t,l,i).pipe(U(e=>new ed(r,e))):0===l.length&&0===s.length?da(new ed(r,{})):this.expandSegment(t,i,l,s,Lh,!0).pipe(U(e=>new ed(r.concat(e.segments),e.children)))}))}getChildConfig(e,n,t){return n.children?da(new Wh(n.children,e)):n.loadChildren?void 0!==n._loadedConfig?da(n._loadedConfig):function(e,n,t){const l=n.canLoad;return l&&0!==l.length?V(l).pipe(U(l=>{const i=e.get(l);let r;if(function(e){return e&&jd(e.canLoad)}(i))r=i.canLoad(n,t);else{if(!jd(i))throw new Error("Invalid CanLoad guard");r=i(n,t)}return Qh(r)})).pipe(Ra(),(i=e=>!0===e,e=>e.lift(new Ya(i,void 0,e)))):da(!0);var i}(e.injector,n,t).pipe(z(t=>t?this.configLoader.load(e.injector,n).pipe(U(e=>(n._loadedConfig=e,e))):function(e){return new O(n=>n.error(Gh(`Cannot load children because the guard of the route "path: '${e.path}'" returned false`)))}(n))):da(new Wh([],e))}lineralizeSegments(e,n){let t=[],l=n.root;for(;;){if(t=t.concat(l.segments),0===l.numberOfChildren)return da(t);if(l.numberOfChildren>1||!l.children[Lh])return eg(e.redirectTo);l=l.children[Lh]}}applyRedirectCommands(e,n,t){return this.applyRedirectCreatreUrlTree(n,this.urlSerializer.parse(n),e,t)}applyRedirectCreatreUrlTree(e,n,t,l){const i=this.createSegmentGroup(e,n.root,t,l);return new Jh(i,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const t={};return Xh(e,(e,l)=>{if("string"==typeof e&&e.startsWith(":")){const i=e.substring(1);t[l]=n[i]}else t[l]=e}),t}createSegmentGroup(e,n,t,l){const i=this.createSegments(e,n.segments,t,l);let r={};return Xh(n.children,(n,i)=>{r[i]=this.createSegmentGroup(e,n,t,l)}),new ed(i,r)}createSegments(e,n,t,l){return n.map(n=>n.path.startsWith(":")?this.findPosParam(e,n,l):this.findOrReturn(n,t))}findPosParam(e,n,t){const l=t[n.path.substring(1)];if(!l)throw new Error(`Cannot redirect to '${e}'. Cannot find '${n.path}'.`);return l}findOrReturn(e,n){let t=0;for(const l of n){if(l.path===e.path)return n.splice(t),l;t++}return e}}function tg(e,n,t){if(""===n.path)return"full"===n.pathMatch&&(e.hasChildren()||t.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const l=(n.matcher||Bh)(t,e,n);return l?{matched:!0,consumedSegments:l.consumed,lastChild:l.consumed.length,positionalParamSegments:l.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function lg(e){if(1===e.numberOfChildren&&e.children[Lh]){const n=e.children[Lh];return new ed(e.segments.concat(n.segments),n.children)}return e}function ig(e,n,t){return(!(e.hasChildren()||n.length>0)||"full"!==t.pathMatch)&&""===t.path&&void 0!==t.redirectTo}function rg(e){return e.outlet||Lh}class sg{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class ug{constructor(e,n){this.component=e,this.route=n}}function og(e,n,t){const l=e._root;return function e(n,t,l,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=Td(t);return n.children.forEach(n=>{!function(n,t,l,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,u=t?t.value:null,o=l?l.getContext(n.value.outlet):null;if(u&&s.routeConfig===u.routeConfig){const a=function(e,n,t){if("function"==typeof t)return t(e,n);switch(t){case"pathParamsChange":return!td(e.url,n.url);case"pathParamsOrQueryParamsChange":return!td(e.url,n.url)||!Kh(e.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!xd(e,n)||!Kh(e.queryParams,n.queryParams);case"paramsChange":default:return!xd(e,n)}}(u,s,s.routeConfig.runGuardsAndResolvers);if(a?r.canActivateChecks.push(new sg(i)):(s.data=u.data,s._resolvedData=u._resolvedData),e(n,t,s.component?o?o.children:null:l,i,r),a){r.canDeactivateChecks.push(new ug(o&&o.outlet&&o.outlet.component||null,u))}}else u&&cg(t,o,r),r.canActivateChecks.push(new sg(i)),e(n,null,s.component?o?o.children:null:l,i,r)}(n,s[n.value.outlet],l,i.concat([n.value]),r),delete s[n.value.outlet]}),Xh(s,(e,n)=>cg(e,l.getContext(n),r)),r}(l,n?n._root:null,t,[l.value])}function ag(e,n,t){const l=function(e){if(!e)return null;for(let n=e.parent;n;n=n.parent){const e=n.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(n);return(l?l.module.injector:t).get(e)}function cg(e,n,t){const l=Td(e),i=e.value;Xh(l,(e,l)=>{cg(e,i.component?n?n.children.getContext(l):null:n,t)}),t.canDeactivateChecks.push(new ug(i.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,i))}const hg=Symbol("INITIAL_VALUE");function dg(){return Ka(e=>(function(...e){let n=null,t=null;return w(e[e.length-1])&&(t=e.pop()),"function"==typeof e[e.length-1]&&(n=e.pop()),1===e.length&&o(e[0])&&(e=e[0]),q(e,t).lift(new Sa(n))})(...e.map(e=>e.pipe(Ba(1),Qa(hg)))).pipe(Za((e,n)=>{let t=!1;return n.reduce((e,l,i)=>{if(e!==hg)return e;if(l===hg&&(t=!0),!t){if(!1===l)return l;if(i===n.length-1||qd(l))return l}return e},e)},hg),Ta(e=>e!==hg),U(e=>qd(e)?e:!0===e),Ba(1)))}function gg(e,n){return null!==e&&n&&n(new kh(e)),da(!0)}function pg(e,n){return null!==e&&n&&n(new Nh(e)),da(!0)}function mg(e,n,t){const l=n.routeConfig?n.routeConfig.canActivate:null;return l&&0!==l.length?da(l.map(l=>Oa(()=>{const i=ag(l,n,t);let r;if(function(e){return e&&jd(e.canActivate)}(i))r=Qh(i.canActivate(n,e));else{if(!jd(i))throw new Error("Invalid CanActivate guard");r=Qh(i(n,e))}return r.pipe(za())}))).pipe(dg()):da(!0)}function fg(e,n,t){const l=n[n.length-1],i=n.slice(0,n.length-1).reverse().map(e=>(function(e){const n=e.routeConfig?e.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:e,guards:n}:null})(e)).filter(e=>null!==e).map(n=>Oa(()=>da(n.guards.map(i=>{const r=ag(i,n.node,t);let s;if(function(e){return e&&jd(e.canActivateChild)}(r))s=Qh(r.canActivateChild(l,e));else{if(!jd(r))throw new Error("Invalid CanActivateChild guard");s=Qh(r(l,e))}return s.pipe(za())})).pipe(dg())));return da(i).pipe(dg())}class Sg{}class Eg{constructor(e,n,t,l,i,r){this.rootComponentType=e,this.config=n,this.urlTree=t,this.url=l,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=r}recognize(){try{const n=Og(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,n,Lh),l=new Ad([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Lh,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Rd(l,t),r=new wd(this.url,i);return this.inheritParamsAndData(r._root),da(r)}catch(e){return new O(n=>n.error(e))}}inheritParamsAndData(e){const n=e.value,t=_d(n,this.paramsInheritanceStrategy);n.params=Object.freeze(t.params),n.data=Object.freeze(t.data),e.children.forEach(e=>this.inheritParamsAndData(e))}processSegmentGroup(e,n,t){return 0===n.segments.length&&n.hasChildren()?this.processChildren(e,n):this.processSegment(e,n,n.segments,t)}processChildren(e,n){const t=ld(n,(n,t)=>this.processSegmentGroup(e,n,t));return function(e){const n={};t.forEach(e=>{const t=n[e.value.outlet];if(t){const n=t.url.map(e=>e.toString()).join("/"),l=e.value.url.map(e=>e.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${n}' and '${l}'.`)}n[e.value.outlet]=e.value})}(),t.sort((e,n)=>e.value.outlet===Lh?-1:n.value.outlet===Lh?1:e.value.outlet.localeCompare(n.value.outlet)),t}processSegment(e,n,t,l){for(const r of e)try{return this.processSegmentAgainstRoute(r,n,t,l)}catch(i){if(!(i instanceof Sg))throw i}if(this.noLeftoversInUrl(n,t,l))return[];throw new Sg}noLeftoversInUrl(e,n,t){return 0===n.length&&!e.children[t]}processSegmentAgainstRoute(e,n,t,l){if(e.redirectTo)throw new Sg;if((e.outlet||Lh)!==l)throw new Sg;let i,r=[],s=[];if("**"===e.path){const r=t.length>0?qh(t).parameters:{};i=new Ad(t,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Cg(e),l,e.component,e,vg(n),bg(n)+t.length,Ig(e))}else{const u=function(e,n,t){if(""===n.path){if("full"===n.pathMatch&&(e.hasChildren()||t.length>0))throw new Sg;return{consumedSegments:[],lastChild:0,parameters:{}}}const l=(n.matcher||Bh)(t,e,n);if(!l)throw new Sg;const i={};Xh(l.posParams,(e,n)=>{i[n]=e.path});const r=l.consumed.length>0?Object.assign({},i,l.consumed[l.consumed.length-1].parameters):i;return{consumedSegments:l.consumed,lastChild:l.consumed.length,parameters:r}}(n,e,t);r=u.consumedSegments,s=t.slice(u.lastChild),i=new Ad(r,u.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Cg(e),l,e.component,e,vg(n),bg(n)+r.length,Ig(e))}const u=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),{segmentGroup:o,slicedSegments:a}=Og(n,r,s,u,this.relativeLinkResolution);if(0===a.length&&o.hasChildren()){const e=this.processChildren(u,o);return[new Rd(i,e)]}if(0===u.length&&0===a.length)return[new Rd(i,[])];const c=this.processSegment(u,o,a,Lh);return[new Rd(i,c)]}}function vg(e){let n=e;for(;n._sourceSegment;)n=n._sourceSegment;return n}function bg(e){let n=e,t=n._segmentIndexShift?n._segmentIndexShift:0;for(;n._sourceSegment;)t+=(n=n._sourceSegment)._segmentIndexShift?n._segmentIndexShift:0;return t-1}function Og(e,n,t,l,i){if(t.length>0&&function(e,n,t){return l.some(t=>Rg(e,n,t)&&Tg(t)!==Lh)}(e,t)){const i=new ed(n,function(e,n,t,l){const i={};i[Lh]=l,l._sourceSegment=e,l._segmentIndexShift=n.length;for(const r of t)if(""===r.path&&Tg(r)!==Lh){const t=new ed([],{});t._sourceSegment=e,t._segmentIndexShift=n.length,i[Tg(r)]=t}return i}(e,n,l,new ed(t,e.children)));return i._sourceSegment=e,i._segmentIndexShift=n.length,{segmentGroup:i,slicedSegments:[]}}if(0===t.length&&function(e,n,t){return l.some(t=>Rg(e,n,t))}(e,t)){const r=new ed(e.segments,function(e,n,t,l,i,r){const s={};for(const u of l)if(Rg(e,t,u)&&!i[Tg(u)]){const t=new ed([],{});t._sourceSegment=e,t._segmentIndexShift="legacy"===r?e.segments.length:n.length,s[Tg(u)]=t}return Object.assign({},i,s)}(e,n,t,l,e.children,i));return r._sourceSegment=e,r._segmentIndexShift=n.length,{segmentGroup:r,slicedSegments:t}}const r=new ed(e.segments,e.children);return r._sourceSegment=e,r._segmentIndexShift=n.length,{segmentGroup:r,slicedSegments:t}}function Rg(e,n,t){return(!(e.hasChildren()||n.length>0)||"full"!==t.pathMatch)&&""===t.path&&void 0===t.redirectTo}function Tg(e){return e.outlet||Lh}function Cg(e){return e.data||{}}function Ig(e){return e.resolve||{}}function yg(e,n,t,l){const i=ag(e,n,l);return Qh(i.resolve?i.resolve(n,t):i(n,t))}function _g(e){return function(n){return n.pipe(Ka(n=>{const t=e(n);return t?V(t).pipe(U(()=>n)):V([n])}))}}class Ag{}class wg{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}const Ng=new Ce("ROUTES");class Pg{constructor(e,n,t,l){this.loader=e,this.compiler=n,this.onLoadStartListener=t,this.onLoadEndListener=l}load(e,n){return this.onLoadStartListener&&this.onLoadStartListener(n),this.loadModuleFactory(n.loadChildren).pipe(U(t=>{this.onLoadEndListener&&this.onLoadEndListener(n);const l=t.create(e);return new Wh(jh(l.injector.get(Ng)).map($h),l)}))}loadModuleFactory(e){return"string"==typeof e?V(this.loader.load(e)):Qh(e()).pipe(z(e=>e instanceof lt?da(e):V(this.compiler.compileModuleAsync(e))))}}class kg{}class xg{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,n){return e}}function Mg(e){throw e}function Dg(e,n,t){return n.parse("/")}function Lg(e,n){return da(null)}class Fg{constructor(e,n,t,l,i,r,s,u){this.rootComponentType=e,this.urlSerializer=n,this.rootContexts=t,this.location=l,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new _,this.errorHandler=Mg,this.malformedUriErrorHandler=Dg,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Lg,afterPreactivation:Lg},this.urlHandlingStrategy=new xg,this.routeReuseStrategy=new wg,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=i.get(tt),this.console=i.get(Yi);const o=i.get(or);this.isNgZoneEnabled=o instanceof or,this.resetConfig(u),this.currentUrlTree=new Jh(new ed([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Pg(r,s,e=>this.triggerEvent(new Ah(e)),e=>this.triggerEvent(new wh(e))),this.routerState=Id(this.currentUrlTree,this.rootComponentType),this.transitions=new ga({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(e){const n=this.events;return e.pipe(Ta(e=>0!==e.id),U(e=>Object.assign({},e,{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl)})),Ka(e=>{let t=!1,l=!1;return da(e).pipe(tc(e=>{this.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign({},this.lastSuccessfulNavigation,{previousNavigation:null}):null}}),Ka(e=>{const t=!this.navigated||e.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||t)&&this.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return da(e).pipe(Ka(e=>{const t=this.transitions.getValue();return n.next(new vh(e.id,this.serializeUrl(e.extractedUrl),e.source,e.restoredState)),t!==this.transitions.getValue()?va:[e]}),Ka(e=>Promise.resolve(e)),function(e,n,t,l){return function(i){return i.pipe(Ka(i=>(function(e,n,t,l,r){return new ng(e,n,t,i.extractedUrl,r).apply()})(e,n,t,0,l).pipe(U(e=>Object.assign({},i,{urlAfterRedirects:e})))))}}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),tc(e=>{this.currentNavigation=Object.assign({},this.currentNavigation,{finalUrl:e.urlAfterRedirects})}),function(e,n,t,l,i){return function(r){return r.pipe(z(r=>(function(e,n,t,l,i="emptyOnly",r="legacy"){return new Eg(e,n,t,l,i,r).recognize()})(e,n,r.urlAfterRedirects,t(r.urlAfterRedirects),l,i).pipe(U(e=>Object.assign({},r,{targetSnapshot:e})))))}}(this.rootComponentType,this.config,e=>this.serializeUrl(e),this.paramsInheritanceStrategy,this.relativeLinkResolution),tc(e=>{"eager"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(e.urlAfterRedirects,!!e.extras.replaceUrl,e.id,e.extras.state),this.browserUrlTree=e.urlAfterRedirects)}),tc(e=>{const t=new Th(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);n.next(t)}));if(t&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:t,extractedUrl:l,source:i,restoredState:r,extras:s}=e,u=new vh(t,this.serializeUrl(l),i,r);n.next(u);const o=Id(l,this.rootComponentType).snapshot;return da(Object.assign({},e,{targetSnapshot:o,urlAfterRedirects:l,extras:Object.assign({},s,{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=e.rawUrl,this.browserUrlTree=e.urlAfterRedirects,e.resolve(null),va}),_g(e=>{const{targetSnapshot:n,id:t,extractedUrl:l,rawUrl:i,extras:{skipLocationChange:r,replaceUrl:s}}=e;return this.hooks.beforePreactivation(n,{navigationId:t,appliedUrlTree:l,rawUrlTree:i,skipLocationChange:!!r,replaceUrl:!!s})}),tc(e=>{const n=new Ch(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(n)}),U(e=>Object.assign({},e,{guards:og(e.targetSnapshot,e.currentSnapshot,this.rootContexts)})),function(e,n){return function(t){return t.pipe(z(t=>{const{targetSnapshot:l,currentSnapshot:i,guards:{canActivateChecks:r,canDeactivateChecks:s}}=t;return 0===s.length&&0===r.length?da(Object.assign({},t,{guardsResult:!0})):function(e,n,t,l){return V(s).pipe(z(e=>(function(e,n,t,l,i){const r=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return r&&0!==r.length?da(r.map(r=>{const s=ag(r,n,i);let u;if(function(e){return e&&jd(e.canDeactivate)}(s))u=Qh(s.canDeactivate(e,n,t,l));else{if(!jd(s))throw new Error("Invalid CanDeactivate guard");u=Qh(s(e,n,t,l))}return u.pipe(za())})).pipe(dg()):da(!0)})(e.component,e.route,t,n,l)),za(e=>!0!==e,!0))}(0,l,i,e).pipe(z(t=>t&&function(e){return"boolean"==typeof t}()?function(e,n,t,l){return V(r).pipe(nc(n=>V([pg(n.route.parent,l),gg(n.route,l),fg(e,n.path,t),mg(e,n.route,t)]).pipe(Ra(),za(e=>!0!==e,!0))),za(e=>!0!==e,!0))}(l,0,e,n):da(t)),U(e=>Object.assign({},t,{guardsResult:e})))}))}}(this.ngModule.injector,e=>this.triggerEvent(e)),tc(e=>{if(qd(e.guardsResult)){const n=Gh(`Redirecting to "${this.serializeUrl(e.guardsResult)}"`);throw n.url=e.guardsResult,n}}),tc(e=>{const n=new Ih(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);this.triggerEvent(n)}),Ta(e=>{if(!e.guardsResult){this.resetUrlToCurrentUrlTree();const t=new Oh(e.id,this.serializeUrl(e.extractedUrl),"");return n.next(t),e.resolve(!1),!1}return!0}),_g(e=>{if(e.guards.canActivateChecks.length)return da(e).pipe(tc(e=>{const n=new yh(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(n)}),function(e,n){return function(t){return t.pipe(z(t=>{const{targetSnapshot:l,guards:{canActivateChecks:i}}=t;return i.length?V(i).pipe(nc(t=>(function(e,n,t,i){return function(e,n,t,l){const i=Object.keys(e);if(0===i.length)return da({});if(1===i.length){const r=i[0];return yg(e[r],n,t,l).pipe(U(e=>({[r]:e})))}const r={};return V(i).pipe(z(i=>yg(e[i],n,t,l).pipe(U(e=>(r[i]=e,e))))).pipe(Fa(),U(()=>r))}(e._resolve,e,l,i).pipe(U(n=>(e._resolvedData=n,e.data=Object.assign({},e.data,_d(e,t).resolve),null)))})(t.route,0,e,n)),function(e,n){return arguments.length>=2?function(t){return v(Za(e,n),Aa(1),Ma(n))(t)}:function(n){return v(Za((n,t,l)=>e(n,t,l+1)),Aa(1))(n)}}((e,n)=>e),U(e=>t)):da(t)}))}}(this.paramsInheritanceStrategy,this.ngModule.injector),tc(e=>{const n=new _h(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(n)}))}),_g(e=>{const{targetSnapshot:n,id:t,extractedUrl:l,rawUrl:i,extras:{skipLocationChange:r,replaceUrl:s}}=e;return this.hooks.afterPreactivation(n,{navigationId:t,appliedUrlTree:l,rawUrlTree:i,skipLocationChange:!!r,replaceUrl:!!s})}),U(e=>{const n=function(e,n,t){const l=function e(n,t,l){if(l&&n.shouldReuseRoute(t.value,l.value.snapshot)){const i=l.value;i._futureSnapshot=t.value;const r=function(n,t,l){return t.children.map(t=>{for(const i of l.children)if(n.shouldReuseRoute(i.value.snapshot,t.value))return e(n,t,i);return e(n,t)})}(n,t,l);return new Rd(i,r)}{const l=n.retrieve(t.value);if(l){const e=l.route;return function e(n,t){if(n.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=n.value;for(let l=0;l<n.children.length;++l)e(n.children[l],t.children[l])}(t,e),e}{const l=new yd(new ga((i=t.value).url),new ga(i.params),new ga(i.queryParams),new ga(i.fragment),new ga(i.data),i.outlet,i.component,i),r=t.children.map(t=>e(n,t));return new Rd(l,r)}}var i}(e,n._root,t?t._root:void 0);return new Cd(l,n)}(this.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign({},e,{targetRouterState:n})}),tc(e=>{this.currentUrlTree=e.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl),this.routerState=e.targetRouterState,"deferred"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!e.extras.replaceUrl,e.id,e.extras.state),this.browserUrlTree=e.urlAfterRedirects)}),Yd(this.rootContexts,this.routeReuseStrategy,e=>this.triggerEvent(e)),tc({next(){t=!0},complete(){t=!0}}),function(e){return n=>n.lift(new rc(e))}(()=>{if(!t&&!l){this.resetUrlToCurrentUrlTree();const t=new Oh(e.id,this.serializeUrl(e.extractedUrl),`Navigation ID ${e.id} is not equal to the current navigation id ${this.navigationId}`);n.next(t),e.resolve(!1)}this.currentNavigation=null}),Ha(t=>{if(l=!0,function(e){return t&&t[Uh]}()){const l=qd(t.url);l||(this.navigated=!0,this.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl));const i=new Oh(e.id,this.serializeUrl(e.extractedUrl),t.message);n.next(i),e.resolve(!1),l&&this.navigateByUrl(t.url)}else{this.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl);const l=new Rh(e.id,this.serializeUrl(e.extractedUrl),t);n.next(l);try{e.resolve(this.errorHandler(t))}catch(i){e.reject(i)}}return va}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign({},this.getTransition(),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{let n=this.parseUrl(e.url);const t="popstate"===e.type?"popstate":"hashchange",l=e.state&&e.state.navigationId?e.state:null;setTimeout(()=>{this.scheduleNavigation(n,t,l,{replaceUrl:!0})},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){Vh(e),this.config=e.map($h),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}createUrlTree(e,n={}){const{relativeTo:t,queryParams:l,fragment:i,preserveQueryParams:r,queryParamsHandling:s,preserveFragment:u}=n;sn()&&r&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const o=t||this.routerState.root,a=u?this.currentUrlTree.fragment:i;let c=null;if(s)switch(s){case"merge":c=Object.assign({},this.currentUrlTree.queryParams,l);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=l||null}else c=r?this.currentUrlTree.queryParams:l||null;return null!==c&&(c=this.removeEmptyProps(c)),function(e,n,t,l,i){if(0===t.length)return Dd(n.root,n.root,n,l,i);const r=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new Ld(!0,0,e);let n=0,t=!1;const l=e.reduce((e,l,i)=>{if("object"==typeof l&&null!=l){if(l.outlets){const n={};return Xh(l.outlets,(e,t)=>{n[t]="string"==typeof e?e.split("/"):e}),[...e,{outlets:n}]}if(l.segmentPath)return[...e,l.segmentPath]}return"string"!=typeof l?[...e,l]:0===i?(l.split("/").forEach((l,i)=>{0==i&&"."===l||(0==i&&""===l?t=!0:".."===l?n++:""!=l&&e.push(l))}),e):[...e,l]},[]);return new Ld(t,n,l)}(t);if(r.toRoot())return Dd(n.root,new ed([],{}),n,l,i);const s=function(e,t,l){if(e.isAbsolute)return new Fd(n.root,!0,0);if(-1===l.snapshot._lastPathIndex)return new Fd(l.snapshot._urlSegment,!0,0);const i=Md(e.commands[0])?0:1;return function(n,t,r){let s=l.snapshot._urlSegment,u=l.snapshot._lastPathIndex+i,o=e.numberOfDoubleDots;for(;o>u;){if(o-=u,!(s=s.parent))throw new Error("Invalid number of '../'");u=s.segments.length}return new Fd(s,!1,u-o)}()}(r,0,e),u=s.processChildren?Gd(s.segmentGroup,s.index,r.commands):Ud(s.segmentGroup,s.index,r.commands);return Dd(s.segmentGroup,u,n,l,i)}(o,this.currentUrlTree,e,c,a)}navigateByUrl(e,n={skipLocationChange:!1}){sn()&&this.isNgZoneEnabled&&!or.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const t=qd(e)?e:this.parseUrl(e),l=this.urlHandlingStrategy.merge(t,this.rawUrlTree);return this.scheduleNavigation(l,"imperative",null,n)}navigate(e,n={skipLocationChange:!1}){return function(e){for(let n=0;n<e.length;n++){const t=e[n];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${n}`)}}(e),this.navigateByUrl(this.createUrlTree(e,n),n)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let n;try{n=this.urlSerializer.parse(e)}catch(t){n=this.malformedUriErrorHandler(t,this.urlSerializer,e)}return n}isActive(e,n){if(qd(e))return Zh(this.currentUrlTree,e,n);const t=this.parseUrl(e);return Zh(this.currentUrlTree,t,n)}removeEmptyProps(e){return Object.keys(e).reduce((n,t)=>{const l=e[t];return null!=l&&(n[t]=l),n},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.events.next(new bh(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,e.resolve(!0)},e=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(e,n,t,l){const i=this.getTransition();if(i&&"imperative"!==n&&"imperative"===i.source&&i.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(i&&"hashchange"==n&&"popstate"===i.source&&i.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(i&&"popstate"==n&&"hashchange"===i.source&&i.rawUrl.toString()===e.toString())return Promise.resolve(!0);let r=null,s=null;const u=new Promise((e,n)=>{r=e,s=n}),o=++this.navigationId;return this.setTransition({id:o,source:n,restoredState:t,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:l,resolve:r,reject:s,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(e=>Promise.reject(e))}setBrowserUrl(e,n,t,l){const i=this.urlSerializer.serialize(e);l=l||{},this.location.isCurrentPathEqualTo(i)||n?this.location.replaceState(i,"",Object.assign({},l,{navigationId:t})):this.location.go(i,"",Object.assign({},l,{navigationId:t}))}resetStateAndUrl(e,n,t){this.routerState=e,this.currentUrlTree=n,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}const Hg=(()=>(class{constructor(e,n,t,l,i){this.router=e,this.route=n,this.commands=[],null==t&&l.setAttribute(i.nativeElement,"tabindex","0")}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}set preserveQueryParams(e){sn()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated!, use queryParamsHandling instead."),this.preserve=e}onClick(){const e={skipLocationChange:Gg(this.skipLocationChange),replaceUrl:Gg(this.replaceUrl)};return this.router.navigateByUrl(this.urlTree,e),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:Gg(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:Gg(this.preserveFragment)})}}))(),Ug=(()=>(class{constructor(e,n,t){this.router=e,this.route=n,this.locationStrategy=t,this.commands=[],this.subscription=e.events.subscribe(e=>{e instanceof bh&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}set preserveQueryParams(e){sn()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=e}ngOnChanges(e){this.updateTargetUrlAndHref()}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,n,t,l){if(0!==e||n||t||l)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const i={skipLocationChange:Gg(this.skipLocationChange),replaceUrl:Gg(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,i),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:Gg(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:Gg(this.preserveFragment)})}}))();function Gg(e){return""===e||!!e}const Bg=(()=>(class{constructor(e,n,t,l,i){this.router=e,this.element=n,this.renderer=t,this.link=l,this.linkWithHref=i,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.subscription=e.events.subscribe(e=>{e instanceof bh&&this.update()})}ngAfterContentInit(){this.links.changes.subscribe(e=>this.update()),this.linksWithHrefs.changes.subscribe(e=>this.update()),this.update()}set routerLinkActive(e){const n=Array.isArray(e)?e:e.split(" ");this.classes=n.filter(e=>!!e)}ngOnChanges(e){this.update()}ngOnDestroy(){this.subscription.unsubscribe()}update(){this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(()=>{const e=this.hasActiveLinks();this.isActive!==e&&(this.isActive=e,this.classes.forEach(n=>{e?this.renderer.addClass(this.element.nativeElement,n):this.renderer.removeClass(this.element.nativeElement,n)}))})}isLinkActive(e){return n=>e.isActive(n.urlTree,this.routerLinkActiveOptions.exact)}hasActiveLinks(){const e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.linkWithHref&&e(this.linkWithHref)||this.links.some(e)||this.linksWithHrefs.some(e)}}))();class Wg{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Vg,this.attachRef=null}}class Vg{constructor(){this.contexts=new Map}onChildOutletCreated(e,n){const t=this.getOrCreateContext(e);t.outlet=n,this.contexts.set(e,t)}onChildOutletDestroyed(e){const n=this.getContext(e);n&&(n.outlet=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let n=this.getContext(e);return n||(n=new Wg,this.contexts.set(e,n)),n}getContext(e){return this.contexts.get(e)||null}}const zg=(()=>(class{constructor(e,n,t,l,i){this.parentContexts=e,this.location=n,this.resolver=t,this.changeDetector=i,this.activated=null,this._activatedRoute=null,this.activateEvents=new Mi,this.deactivateEvents=new Mi,this.name=l||Lh,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,n){this.activated=e,this._activatedRoute=n,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,n){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const t=(n=n||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),l=this.parentContexts.getOrCreateContext(this.name).children,i=new Yg(e,l,this.location.injector);this.activated=this.location.createComponent(t,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}))();class Yg{constructor(e,n,t){this.route=e,this.childContexts=n,this.parent=t}get(e,n){return e===yd?this.route:e===Vg?this.childContexts:this.parent.get(e,n)}}class $g{}class Kg{preload(e,n){return n().pipe(Ha(()=>da(null)))}}class jg{preload(e,n){return da(null)}}const qg=(()=>(class{constructor(e,n,t,l,i){this.router=e,this.injector=l,this.preloadingStrategy=i,this.loader=new Pg(n,t,n=>e.triggerEvent(new Ah(n)),n=>e.triggerEvent(new wh(n)))}setUpPreloading(){this.subscription=this.router.events.pipe(Ta(e=>e instanceof bh),nc(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(tt);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription.unsubscribe()}processRoutes(e,n){const t=[];for(const l of n)if(l.loadChildren&&!l.canLoad&&l._loadedConfig){const e=l._loadedConfig;t.push(this.processRoutes(e.module,e.routes))}else l.loadChildren&&!l.canLoad?t.push(this.preloadConfig(e,l)):l.children&&t.push(this.processRoutes(e,l.children));return V(t).pipe(j(),U(e=>void 0))}preloadConfig(e,n){return this.preloadingStrategy.preload(n,()=>this.loader.load(e.injector,n).pipe(z(e=>(n._loadedConfig=e,this.processRoutes(e.module,e.routes)))))}}))();class Xg{constructor(e,n,t={}){this.router=e,this.viewportScroller=n,this.options=t,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},t.scrollPositionRestoration=t.scrollPositionRestoration||"disabled",t.anchorScrolling=t.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof vh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof bh&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Mh&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,n){this.router.triggerEvent(new Mh(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,n))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}const Qg=new Ce("ROUTER_CONFIGURATION"),Zg=new Ce("ROUTER_FORROOT_GUARD"),Jg=[bo,{provide:id,useClass:rd},{provide:Fg,useFactory:sp,deps:[_r,id,Vg,bo,We,wr,Zi,Ng,Qg,[kg,new ue],[Ag,new ue]]},Vg,{provide:yd,useFactory:up,deps:[Fg]},{provide:wr,useClass:kr},qg,jg,Kg,{provide:Qg,useValue:{enableTracing:!1}}];function ep(){return new Rr("Router",Fg)}const np=(()=>{class e{constructor(e,n){}static forRoot(n,t){return{ngModule:e,providers:[Jg,rp(n),{provide:Zg,useFactory:ip,deps:[[Fg,new ue,new ae]]},{provide:Qg,useValue:t||{}},{provide:Eo,useFactory:lp,deps:[fo,[new se(vo),new ue],Qg]},{provide:Xg,useFactory:tp,deps:[Fg,ca,Qg]},{provide:$g,useExisting:t&&t.preloadingStrategy?t.preloadingStrategy:jg},{provide:Rr,multi:!0,useFactory:ep},[op,{provide:Fi,multi:!0,useFactory:ap,deps:[op]},{provide:hp,useFactory:cp,deps:[op]},{provide:zi,multi:!0,useExisting:hp}]]}}static forChild(n){return{ngModule:e,providers:[rp(n)]}}}return e})();function tp(e,n,t){return t.scrollOffset&&n.setOffset(t.scrollOffset),new Xg(e,n,t)}function lp(e,n,t={}){return t.useHash?new Ro(e,n):new To(e,n)}function ip(e){if(e)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function rp(e){return[{provide:en,multi:!0,useValue:e},{provide:Ng,multi:!0,useValue:e}]}function sp(e,n,t,l,i,r,s,u,o={},a,c){const h=new Fg(null,n,t,l,i,r,s,jh(u));if(a&&(h.urlHandlingStrategy=a),c&&(h.routeReuseStrategy=c),o.errorHandler&&(h.errorHandler=o.errorHandler),o.malformedUriErrorHandler&&(h.malformedUriErrorHandler=o.malformedUriErrorHandler),o.enableTracing){const e=oc();h.events.subscribe(n=>{e.logGroup(`Router Event: ${n.constructor.name}`),e.log(n.toString()),e.log(n),e.logGroupEnd()})}return o.onSameUrlNavigation&&(h.onSameUrlNavigation=o.onSameUrlNavigation),o.paramsInheritanceStrategy&&(h.paramsInheritanceStrategy=o.paramsInheritanceStrategy),o.urlUpdateStrategy&&(h.urlUpdateStrategy=o.urlUpdateStrategy),o.relativeLinkResolution&&(h.relativeLinkResolution=o.relativeLinkResolution),h}function up(e){return e.routerState.root}const op=(()=>(class{constructor(e){this.injector=e,this.initNavigation=!1,this.resultOfPreactivationDone=new _}appInitializer(){return this.injector.get(So,Promise.resolve(null)).then(()=>{let e=null;const n=new Promise(n=>e=n),t=this.injector.get(Fg),l=this.injector.get(Qg);if(this.isLegacyDisabled(l)||this.isLegacyEnabled(l))e(!0);else if("disabled"===l.initialNavigation)t.setUpLocationChangeListener(),e(!0);else{if("enabled"!==l.initialNavigation)throw new Error(`Invalid initialNavigation options: '${l.initialNavigation}'`);t.hooks.afterPreactivation=()=>this.initNavigation?da(null):(this.initNavigation=!0,e(!0),this.resultOfPreactivationDone),t.initialNavigation()}return n})}bootstrapListener(e){const n=this.injector.get(Qg),t=this.injector.get(qg),l=this.injector.get(Xg),i=this.injector.get(Fg),r=this.injector.get(_r);e===r.components[0]&&(this.isLegacyEnabled(n)?i.initialNavigation():this.isLegacyDisabled(n)&&i.setUpLocationChangeListener(),t.setUpPreloading(),l.init(),i.resetRootComponentType(r.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(e){return"legacy_enabled"===e.initialNavigation||!0===e.initialNavigation||void 0===e.initialNavigation}isLegacyDisabled(e){return"legacy_disabled"===e.initialNavigation||!1===e.initialNavigation}}))();function ap(e){return e.appInitializer.bind(e)}function cp(e){return e.bootstrapListener.bind(e)}const hp=new Ce("Router Initializer");var dp=Zt({encapsulation:2,styles:[],data:{}});function gp(e){return cs(0,[(e()(),Kr(0,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),ci(1,212992,null,0,zg,[Vg,xt,Jn,[8,null],yt],null,null)],function(e,n){e(n,1,0)},null)}function pp(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"ng-component",[],null,null,null,gp,dp)),ci(1,49152,null,0,Dh,[],null,null)],null,null)}var mp=Gl("ng-component",Dh,pp,{},{},[]);class fp{constructor(e){this.router=e}ngOnInit(){}goToVillage(){this.router.navigate(["/village"])}}var Sp=Zt({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{margin:10px;font-size:4vw;text-align:center}button[_ngcontent-%COMP%]{font-size:1.5vw}"]],data:{}});function Ep(e){return cs(0,[(e()(),Kr(0,0,null,null,4,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),us(-1,null,[" Page not found "])),(e()(),Kr(2,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(3,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.goToVillage()&&l),l},null,null)),(e()(),us(-1,null,["Village"]))],null,null)}function vp(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"app-not-found",[],null,null,null,Ep,Sp)),ci(1,114688,null,0,fp,[Fg],null,null)],function(e,n){e(n,1,0)},null)}var bp=Gl("app-not-found",fp,vp,{},{},[]);class Op{constructor(){this.xMargin=20,this.yMargin=20}onmousemove(e){const n=document.getElementById(this.elementId);if(n){const t=e.clientX+this.xMargin;let l=e.clientY+this.yMargin;l+n.offsetHeight>740&&(l-=n.offsetHeight+2*this.yMargin),n.style.top=l+"px",n.style.left=t+"px"}}}class Rp{constructor(){this.margin="0"}ngOnInit(){}getTitle(){return""===this.title?"":this.title?this.title:"Food"===this.name?"Food nutrition":Pu.titleCase(this.name).replace("_"," ")}getPath(){let e="assets/";return this.path&&(e+=this.path+"/"),e}}var Tp=Zt({encapsulation:0,styles:[["[_nghost-%COMP%]{display:inline-block;vertical-align:middle;height:24px}#wrapper[_ngcontent-%COMP%]{display:inline-block;height:24px;margin:0;padding:0}img[_ngcontent-%COMP%]{display:inline-block;margin:0;padding:0;height:24px;width:24px}"]],data:{}});function Cp(e){return cs(0,[(e()(),Kr(0,0,null,null,4,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,3,"img",[["class","resourceIcon"],["draggable","false"],["ondragstart","return false;"],["onerror","if (this.src !== 'assets/question_mark.svg') this.src = 'assets/question_mark.svg';"]],[[8,"src",4],[8,"title",0],[8,"alt",0]],null,null,null,null)),di(512,null,Zo,Jo,[rt,It,ct]),ci(3,278528,null,0,na,[Zo],{ngStyle:[0,"ngStyle"]},null),rs(4,{margin:0})],function(e,n){var t=e(n,4,0,n.component.margin);e(n,3,0,t)},function(e,n){var t=n.component;e(n,1,0,Il(1,"",t.getPath()+t.name.replace(" ","_").toLowerCase(),".svg"),Il(1,"",t.getTitle(),""),Il(1,"",t.name,""))})}function Ip(e,n){return new O(t=>{const l=e.length;if(0===l)return void t.complete();const i=new Array(l);let r=0,s=0;for(let u=0;u<l;u++){const o=V(e[u]);let a=!1;t.add(o.subscribe({next:e=>{a||(a=!0,s++),i[u]=e},error:e=>t.error(e),complete:()=>{++r!==l&&a||(s===l&&t.next(n?n.reduce((e,n,t)=>(e[n]=i[t],e),{}):i),t.complete())}}))}})}const yp=new Ce("NgValueAccessor"),_p=(()=>(class{constructor(e,n){this._renderer=e,this._elementRef=n,this.onChange=e=>{},this.onTouched=()=>{}}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}))(),Ap=new Ce("CompositionEventMode"),wp=(()=>(class{constructor(e,n,t){this._renderer=e,this._elementRef=n,this._compositionMode=t,this.onChange=e=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const e=oc()?oc().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}))();class Np{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}reset(e){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class Pp extends Np{get formDirective(){return null}get path(){return null}}function kp(){throw new Error("unimplemented")}class xp extends Np{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}get validator(){return kp()}get asyncValidator(){return kp()}}const Mp=(()=>(class extends class{constructor(e){this._cd=e}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}{constructor(e){super(e)}}))();function Dp(e){return null==e||0===e.length}const Lp=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/;class Fp{static min(e){return n=>{if(Dp(n.value)||Dp(e))return null;const t=parseFloat(n.value);return!isNaN(t)&&t<e?{min:{min:e,actual:n.value}}:null}}static max(e){return n=>{if(Dp(n.value)||Dp(e))return null;const t=parseFloat(n.value);return!isNaN(t)&&t>e?{max:{max:e,actual:n.value}}:null}}static required(e){return Dp(e.value)?{required:!0}:null}static requiredTrue(e){return!0===e.value?null:{required:!0}}static email(e){return Dp(e.value)?null:Lp.test(e.value)?null:{email:!0}}static minLength(e){return n=>{if(Dp(n.value))return null;const t=n.value?n.value.length:0;return t<e?{minlength:{requiredLength:e,actualLength:t}}:null}}static maxLength(e){return n=>{const t=n.value?n.value.length:0;return t>e?{maxlength:{requiredLength:e,actualLength:t}}:null}}static pattern(e){if(!e)return Fp.nullValidator;let n,t;return"string"==typeof e?(t="","^"!==e.charAt(0)&&(t+="^"),t+=e,"$"!==e.charAt(e.length-1)&&(t+="$"),n=new RegExp(t)):(t=e.toString(),n=e),e=>{if(Dp(e.value))return null;const l=e.value;return n.test(l)?null:{pattern:{requiredPattern:t,actualValue:l}}}}static nullValidator(e){return null}static compose(e){if(!e)return null;const n=e.filter(Hp);return 0==n.length?null:function(e){return Gp(function(e,t){return n.map(n=>n(e))}(e))}}static composeAsync(e){if(!e)return null;const n=e.filter(Hp);return 0==n.length?null:function(e){return function(...e){if(1===e.length){const n=e[0];if(o(n))return Ip(n,null);if(a(n)&&Object.getPrototypeOf(n)===Object.prototype){const e=Object.keys(n);return Ip(e.map(e=>n[e]),e)}}if("function"==typeof e[e.length-1]){const n=e.pop();return Ip(e=1===e.length&&o(e[0])?e[0]:e,null).pipe(U(e=>n(...e)))}return Ip(e,null)}(function(e,t){return n.map(n=>n(e))}(e).map(Up)).pipe(U(Gp))}}}function Hp(e){return null!=e}function Up(e){const n=Yn(e)?V(e):e;if(!$n(n))throw new Error("Expected validator to return Promise or Observable.");return n}function Gp(e){const n=e.reduce((e,n)=>null!=n?Object.assign({},e,n):e,{});return 0===Object.keys(n).length?null:n}function Bp(e){return e.validate?n=>e.validate(n):e}function Wp(e){return e.validate?n=>e.validate(n):e}const Vp=(()=>(class{constructor(e,n){this._renderer=e,this._elementRef=n,this.onChange=e=>{},this.onTouched=()=>{}}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}registerOnChange(e){this.onChange=n=>{e(""==n?null:parseFloat(n))}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}))(),zp=(()=>(class{constructor(){this._accessors=[]}add(e,n){this._accessors.push([e,n])}remove(e){for(let n=this._accessors.length-1;n>=0;--n)if(this._accessors[n][1]===e)return void this._accessors.splice(n,1)}select(e){this._accessors.forEach(n=>{this._isSameGroup(n,e)&&n[1]!==e&&n[1].fireUncheck(e.value)})}_isSameGroup(e,n){return!!e[0].control&&e[0]._parent===n._control._parent&&e[1].name===n.name}}))(),Yp=(()=>(class{constructor(e,n,t,l){this._renderer=e,this._elementRef=n,this._registry=t,this._injector=l,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(xp),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(e){this._state=e===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(e){this._fn=e,this.onChange=()=>{e(this.value),this._registry.select(this)}}fireUncheck(e){this.writeValue(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}_throwNameError(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}))(),$p=(()=>(class{constructor(e,n){this._renderer=e,this._elementRef=n,this.onChange=e=>{},this.onTouched=()=>{}}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(e))}registerOnChange(e){this.onChange=n=>{e(""==n?null:parseFloat(n))}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}))(),Kp={formControlName:'\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',formGroupName:'\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',formArrayName:'\n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });',ngModelGroup:'\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',ngModelWithFormGroup:'\n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  '};function jp(e,n){return null==e?`${n}`:(n&&"object"==typeof n&&(n="Object"),`${e}: ${n}`.slice(0,50))}const qp=(()=>(class{constructor(e,n){this._renderer=e,this._elementRef=n,this._optionMap=new Map,this._idCounter=0,this.onChange=e=>{},this.onTouched=()=>{},this._compareWith=Gn}set compareWith(e){if("function"!=typeof e)throw new Error(`compareWith must be a function, but received ${JSON.stringify(e)}`);this._compareWith=e}writeValue(e){this.value=e;const n=this._getOptionId(e);null==n&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const t=jp(n,e);this._renderer.setProperty(this._elementRef.nativeElement,"value",t)}registerOnChange(e){this.onChange=n=>{this.value=this._getOptionValue(n),e(this.value)}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const n of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(n),e))return n;return null}_getOptionValue(e){const n=function(e){return e.split(":")[0]}(e);return this._optionMap.has(n)?this._optionMap.get(n):e}}))(),Xp=(()=>(class{constructor(e,n,t){this._element=e,this._renderer=n,this._select=t,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(jp(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}))();function Qp(e,n){return null==e?`${n}`:("string"==typeof n&&(n=`'${n}'`),n&&"object"==typeof n&&(n="Object"),`${e}: ${n}`.slice(0,50))}const Zp=(()=>(class{constructor(e,n){this._renderer=e,this._elementRef=n,this._optionMap=new Map,this._idCounter=0,this.onChange=e=>{},this.onTouched=()=>{},this._compareWith=Gn}set compareWith(e){if("function"!=typeof e)throw new Error(`compareWith must be a function, but received ${JSON.stringify(e)}`);this._compareWith=e}writeValue(e){let n;if(this.value=e,Array.isArray(e)){const t=e.map(e=>this._getOptionId(e));n=(e,n)=>{e._setSelected(t.indexOf(n.toString())>-1)}}else n=(e,n)=>{e._setSelected(!1)};this._optionMap.forEach(n)}registerOnChange(e){this.onChange=n=>{const t=[];if(n.hasOwnProperty("selectedOptions")){const e=n.selectedOptions;for(let n=0;n<e.length;n++){const l=e.item(n),i=this._getOptionValue(l.value);t.push(i)}}else{const e=n.options;for(let n=0;n<e.length;n++){const l=e.item(n);if(l.selected){const e=this._getOptionValue(l.value);t.push(e)}}}this.value=t,e(t)}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_registerOption(e){const n=(this._idCounter++).toString();return this._optionMap.set(n,e),n}_getOptionId(e){for(const n of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(n)._value,e))return n;return null}_getOptionValue(e){const n=function(e){return e.split(":")[0]}(e);return this._optionMap.has(n)?this._optionMap.get(n)._value:e}}))(),Jp=(()=>(class{constructor(e,n,t){this._element=e,this._renderer=n,this._select=t,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(Qp(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(Qp(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}))();function em(e,n){return[...n.path,e]}function nm(e,n){e||lm(n,"Cannot find control with"),n.valueAccessor||lm(n,"No value accessor for form control with"),e.validator=Fp.compose([e.validator,n.validator]),e.asyncValidator=Fp.composeAsync([e.asyncValidator,n.asyncValidator]),n.valueAccessor.writeValue(e.value),function(e,n){n.valueAccessor.registerOnChange(t=>{e._pendingValue=t,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&tm(e,n)})}(e,n),function(e,n){e.registerOnChange((e,t)=>{n.valueAccessor.writeValue(e),t&&n.viewToModelUpdate(e)})}(e,n),function(e,n){n.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&tm(e,n),"submit"!==e.updateOn&&e.markAsTouched()})}(e,n),n.valueAccessor.setDisabledState&&e.registerOnDisabledChange(e=>{n.valueAccessor.setDisabledState(e)}),n._rawValidators.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(()=>e.updateValueAndValidity())}),n._rawAsyncValidators.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(()=>e.updateValueAndValidity())})}function tm(e,n){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function lm(e,n){let t;throw t=e.path.length>1?`path: '${e.path.join(" -> ")}'`:e.path[0]?`name: '${e.path}'`:"unspecified name attribute",new Error(`${n} ${t}`)}function im(e){return null!=e?Fp.compose(e.map(Bp)):null}function rm(e){return null!=e?Fp.composeAsync(e.map(Wp)):null}const sm=[_p,$p,Vp,qp,Zp,Yp],um="VALID",om="INVALID",am="PENDING",cm="DISABLED";function hm(e){const n=gm(e)?e.validators:e;return Array.isArray(n)?im(n):n||null}function dm(e,n){const t=gm(n)?n.asyncValidators:e;return Array.isArray(t)?rm(t):t||null}function gm(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class pm{constructor(e,n){this.validator=e,this.asyncValidator=n,this._onCollectionChange=()=>{},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}get parent(){return this._parent}get valid(){return this.status===um}get invalid(){return this.status===om}get pending(){return this.status==am}get disabled(){return this.status===cm}get enabled(){return this.status!==cm}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this.validator=hm(e)}setAsyncValidators(e){this.asyncValidator=dm(e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=am,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=cm,this.errors=null,this._forEachChild(n=>{n.disable(Object.assign({},e,{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign({},e,{skipPristineCheck:n})),this._onDisabledChange.forEach(e=>e(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=um,this._forEachChild(n=>{n.enable(Object.assign({},e,{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign({},e,{skipPristineCheck:n})),this._onDisabledChange.forEach(e=>e(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==um&&this.status!==am||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?cm:um}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=am;const n=Up(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(n=>this.setErrors(n,{emitEvent:e}))}}_cancelExistingSubscription(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)}get(e){return function(e,n,t){return null==n?null:(n instanceof Array||(n=n.split(".")),n instanceof Array&&0===n.length?null:n.reduce((e,n)=>e instanceof fm?e.controls.hasOwnProperty(n)?e.controls[n]:null:e instanceof Sm&&e.at(n)||null,e))}(this,e)}getError(e,n){const t=n?this.get(n):this;return t&&t.errors?t.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Mi,this.statusChanges=new Mi}_calculateStatus(){return this._allControlsDisabled()?cm:this.errors?om:this._anyControlsHaveStatus(am)?am:this._anyControlsHaveStatus(om)?om:um}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){gm(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}class mm extends pm{constructor(e=null,n,t){super(hm(n),dm(t,n)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(n),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(e=>e(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=null,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=()=>{}}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class fm extends pm{constructor(e,n,t){super(hm(n),dm(t,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n){this.registerControl(e,n),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()}setControl(e,n){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity(),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(t=>{this._throwIfControlMissing(t),this.controls[t].setValue(e[t],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){Object.keys(e).forEach(t=>{this.controls[t]&&this.controls[t].patchValue(e[t],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}reset(e={},n={}){this._forEachChild((t,l)=>{t.reset(e[l],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,t)=>(e[t]=n instanceof mm?n.value:n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(e,n)=>!!n._syncPendingControls()||e);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(n=>e(this.controls[n],n))}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){let n=!1;return this._forEachChild((t,l)=>{n=n||this.contains(l)&&e(t)}),n}_reduceValue(){return this._reduceChildren({},(e,n,t)=>((n.enabled||this.disabled)&&(e[t]=n.value),e))}_reduceChildren(e,n){let t=e;return this._forEachChild((e,l)=>{t=n(t,e,l)}),t}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((n,t)=>{if(void 0===e[t])throw new Error(`Must supply a value for form control with name: '${t}'.`)})}}class Sm extends pm{constructor(e,n,t){super(hm(n),dm(t,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(e){return this.controls[e]}push(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()}insert(e,n){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity()}removeAt(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity()}setControl(e,n){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),n&&(this.controls.splice(e,0,n),this._registerControl(n)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){this._checkAllValuesPresent(e),e.forEach((e,t)=>{this._throwIfControlMissing(t),this.at(t).setValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e.forEach((e,t)=>{this.at(t)&&this.at(t).patchValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}reset(e=[],n={}){this._forEachChild((t,l)=>{t.reset(e[l],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e instanceof mm?e.value:e.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let e=this.controls.reduce((e,n)=>!!n._syncPendingControls()||e,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((n,t)=>{e(n,t)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((n,t)=>{if(void 0===e[t])throw new Error(`Must supply a value for form control at index: ${t}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const Em=(()=>Promise.resolve(null))(),vm=(()=>(class extends Pp{constructor(e,n){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new Mi,this.form=new fm({},im(e),rm(n))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Em.then(()=>{const n=this._findContainer(e.path);e.control=n.registerControl(e.name,e.control),nm(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Em.then(()=>{const n=this._findContainer(e.path);n&&n.removeControl(e.name),function(n,t){const l=n.indexOf(e);l>-1&&n.splice(l,1)}(this._directives)})}addFormGroup(e){Em.then(()=>{const n=this._findContainer(e.path),t=new fm({});(function(e,n){null==e&&lm(n,"Cannot find control with"),e.validator=Fp.compose([e.validator,n.validator]),e.asyncValidator=Fp.composeAsync([e.asyncValidator,n.asyncValidator])})(t,e),n.registerControl(e.name,t),t.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Em.then(()=>{const n=this._findContainer(e.path);n&&n.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,n){Em.then(()=>{this.form.get(e.path).setValue(n)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,n=this._directives,this.form._syncPendingControls(),n.forEach(e=>{const n=e.control;"submit"===n.updateOn&&n._pendingChange&&(e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)}),this.ngSubmit.emit(e),!1;var n}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}))();class bm{static modelParentException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup's partner directive "formControlName" instead.  Example:\n\n      ${Kp.formControlName}\n\n      Or, if you'd like to avoid registering this form control, indicate that it's standalone in ngModelOptions:\n\n      Example:\n\n      ${Kp.ngModelWithFormGroup}`)}static formGroupNameException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      ${Kp.formGroupName}\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      ${Kp.ngModelGroup}`)}static missingNameException(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')}static modelGroupParentException(){throw new Error(`\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      ${Kp.formGroupName}\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      ${Kp.ngModelGroup}`)}static ngFormWarning(){console.warn("\n    It looks like you're using 'ngForm'.\n\n    Support for using the 'ngForm' element selector has been deprecated in Angular v6 and will be removed\n    in Angular v9.\n\n    Use 'ng-form' instead.\n\n    Before:\n    <ngForm #myForm=\"ngForm\">\n\n    After:\n    <ng-form #myForm=\"ngForm\">\n    ")}}const Om=new Ce("NgFormSelectorWarning");class Rm extends Pp{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return em(this.name,this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return im(this._validators)}get asyncValidator(){return rm(this._asyncValidators)}_checkParentType(){}}const Tm=(()=>{class e extends Rm{constructor(e,n,t){super(),this._parent=e,this._validators=n,this._asyncValidators=t}_checkParentType(){this._parent instanceof e||this._parent instanceof vm||bm.modelGroupParentException()}}return e})(),Cm=(()=>Promise.resolve(null))(),Im=(()=>(class extends xp{constructor(e,n,t,l){super(),this.control=new mm,this._registered=!1,this.update=new Mi,this._parent=e,this._rawValidators=n||[],this._rawAsyncValidators=t||[],this.valueAccessor=function(e,n){if(!n)return null;Array.isArray(n)||lm(e,"Value accessor was not provided as an array for form control with");let t=void 0,l=void 0,i=void 0;return n.forEach(n=>{n.constructor===wp?t=n:function(e){return sm.some(n=>e.constructor===n)}(n)?(l&&lm(e,"More than one built-in value accessor matches form control with"),l=n):(i&&lm(e,"More than one custom value accessor matches form control with"),i=n)}),i||l||t||(lm(e,"No valid value accessor for form control with"),null)}(this,l)}ngOnChanges(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),function(e,n){if(!e.hasOwnProperty("model"))return!1;const t=e.model;return!!t.isFirstChange()||!Gn(n,t.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?em(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return im(this._rawValidators)}get asyncValidator(){return rm(this._rawAsyncValidators)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){nm(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){!(this._parent instanceof Tm)&&this._parent instanceof Rm?bm.formGroupNameException():this._parent instanceof Tm||this._parent instanceof vm||bm.modelParentException()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||bm.missingNameException()}_updateValue(e){Cm.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1})})}_updateDisabled(e){const n=e.isDisabled.currentValue,t=""===n||n&&"false"!==n;Cm.then(()=>{t&&!this.control.disabled?this.control.disable():!t&&this.control.disabled&&this.control.enable()})}}))(),ym=(()=>(class{}))(),_m=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:Om,useValue:n.warnOnDeprecatedNgFormSelector}]}}}return e})();class Am{constructor(e,n=!1,t=0,l=!1){this.name=e,this.enabled=n,this.reserved=t,this.reservedPercent=l}}class wm{constructor(e=!1,n=0,t=!1,l=0,i=!1,r=0,s=!1,u=0){this.autoSellEnabled=e,this.autoSellAmount=n,this.autoSellPercentage=t,this.autoSellOrder=l,this.autoBuyEnabled=i,this.autoBuyAmount=r,this.autoBuyPercentage=s,this.autoBuyOrder=u}static clone(e){return new wm(e.autoSellEnabled,e.autoSellAmount,e.autoSellPercentage,e.autoSellOrder,e.autoBuyEnabled,e.autoBuyAmount,e.autoBuyPercentage,e.autoBuyOrder)}}class Nm{constructor(e,n=0,t=[new Am("Crafting"),new Am("Manufacture"),new Am("Hut"),new Am("House"),new Am("Longhouse"),new Am("Bakery"),new Am("Tailor"),new Am("Tavern"),new Am("Tannery"),new Am("Sawmill"),new Am("Windmill"),new Am("Cotton mill"),new Am("Brewery"),new Am("Winery"),new Am("Stonemason"),new Am("Mint"),new Am("Fishers hut"),new Am("Paper mill")],l=!1,i=null){this.resource=e,this.reserve=n,this.reservePercent=l,this.consumers=t,this.autoTrade=null===i?new wm:i}static clone(e){const n=[];return e.consumers.forEach(e=>n.push(new Am(e.name,e.enabled,e.reserved,e.reservedPercent))),new Nm(e.resource,e.reserve,n,e.reservePercent,wm.clone(e.autoTrade))}getReservedAmountBySource(e,n,t){let l=0,i=!1;return t?0:(l=this.reserve,i=this.reservePercent,this.consumers.forEach(n=>{n.enabled&&n.name===e&&(l=n.reserved,i=n.reservedPercent)}),i?Math.floor(l/100*n.getLimit()):l)}isUsed(){let e=!1;return 0!==this.reserve||(this.consumers.forEach(n=>{n.enabled&&(e=!0)}),(this.autoTrade.autoSellEnabled||this.autoTrade.autoBuyEnabled)&&(e=!0),e)}}class Pm{constructor(e,n,t,l,i,r,s,u,o){this.resource=e,this.name=n,this.amount=t,this.limit=l,this.reserved=i,this.resourceTypes=r,this.visible=s,this.highlighted=u,this.prioritise=o,this.options=new Nm(e)}toJSON(){return{amount:this.amount,limit:this.limit,visible:this.visible,highlighted:this.highlighted,prioritise:this.prioritise,options:this.options}}addResource(e){return this.amount+e>this.limit?(this.amount=this.limit,this.amount):(this.amount+=e,this.amount)}removeResource(e){return this.amount-e>0&&(this.amount-=e,!0)}getResource(){return this.resource}getName(){return this.name}getAmount(){return this.amount}getLimit(){return this.limit}getResourceTypes(){return this.resourceTypes}hasResourceType(e){return this.resourceTypes.indexOf(e)>-1}isVisible(){return this.visible}toggleVisible(){return this.visible=!this.visible,this.visible}isHighlighted(){return this.highlighted}toggleHighlighted(){return this.highlighted=!this.highlighted,this.highlighted}getFreeSpace(){return this.limit-this.amount}}class km{constructor(){this.amount=0,this.limit=0,this.reserved=0,this.resourceTypes=[],this.visible=!1,this.highlighted=!1,this.prioritise=!1}forResource(e){return this.resource=e,this}withName(e){return this.name=e,this}withAmount(e){return this.amount=e,this}withLimit(e){return this.limit=e,this}withReserved(e){return this.reserved=e,this}withResourceTypes(e){return e.forEach(e=>this.resourceTypes.push(e)),this}withResourceType(e){return this.resourceTypes.push(e),this}withVisible(e){return this.visible=e,this}withHighlighted(e){return this.highlighted=e,this}withPrioritise(e){return this.prioritise=e,this}build(){const e=new Pm(this.resource,this.name,this.amount,this.limit,this.reserved,this.resourceTypes,this.visible,this.highlighted,this.prioritise);return this.resource=void 0,this.name=void 0,this.amount=0,this.limit=0,this.reserved=0,this.resourceTypes=[],this.visible=!1,this.highlighted=!1,this.prioritise=!1,e}}class xm{constructor(e,n,t,l=null){this.type=n,this.day=t,this.message=e,this.data=l}}const Mm=(()=>{class e{constructor(){this.services=new Map}addService(e,n){this.services.set(e,n)}getService(e){return this.services.get(e)}getServiceByRegion(e){switch(e){case Hu.VILLAGE:return this.services.get(xu.VILLAGE);case Hu.FORT:return this.services.get(xu.FORT);case Hu.FIELD:return this.services.get(xu.FIELD);case Hu.FOREST:return this.services.get(xu.FOREST);case Hu.MOUNTAINS:return this.services.get(xu.MOUNTAINS);case Hu.SEA:return this.services.get(xu.SEA);case Hu.PLATEAU:return this.services.get(xu.PLATEAU);default:console.error("Region service not found for ["+Hu[e]+"]")}}}return e.ngInjectableDef=de({factory:function(){return new e},token:e,providedIn:"root"}),e})();var Dm=function(e){return e[e.AUTO_SAVE_STATUS=0]="AUTO_SAVE_STATUS",e[e.AUTO_SAVE_PERIOD=1]="AUTO_SAVE_PERIOD",e[e.METRIC=2]="METRIC",e[e.SAVE_LOGS=3]="SAVE_LOGS",e[e.SOUND=4]="SOUND",e[e.SOUND_VOLUME=5]="SOUND_VOLUME",e[e.VISUAL_PROGRESS_BARS=6]="VISUAL_PROGRESS_BARS",e[e.AUTO_TEXT_FITTING=7]="AUTO_TEXT_FITTING",e[e.POSITIVE_COLOUR=8]="POSITIVE_COLOUR",e[e.NEGATIVE_COLOUR=9]="NEGATIVE_COLOUR",e[e.PAGED_VIEW=10]="PAGED_VIEW",e[e.BUILDINGS_PER_PAGE=11]="BUILDINGS_PER_PAGE",e[e.KEEP_RESERVATION_SETTINGS_ON_RESET=12]="KEEP_RESERVATION_SETTINGS_ON_RESET",e[e.KEEP_MANAGEMENT_SETTINGS_ON_RESET=13]="KEEP_MANAGEMENT_SETTINGS_ON_RESET",e[e.PAUSE_ON_INIT=14]="PAUSE_ON_INIT",e[e.KEEP_AUTO_TRADE_ON_RESET=15]="KEEP_AUTO_TRADE_ON_RESET",e}({});const Lm=(()=>{class e{constructor(){this.optionsSubject=new _,this.options=new Map}init(){this.options.set(Dm.AUTO_SAVE_STATUS,Ju.AUTO_SAVE_STATUS),this.options.set(Dm.AUTO_SAVE_PERIOD,Ju.AUTO_SAVE_PERIOD),this.options.set(Dm.METRIC,Ju.METRIC),this.options.set(Dm.SAVE_LOGS,Ju.SAVE_LOGS),this.options.set(Dm.PAUSE_ON_INIT,Ju.PAUSE_ON_INIT),this.options.set(Dm.KEEP_RESERVATION_SETTINGS_ON_RESET,Ju.KEEP_RESERVATION_SETTINGS_ON_RESET),this.options.set(Dm.KEEP_MANAGEMENT_SETTINGS_ON_RESET,Ju.KEEP_MANAGEMENT_SETTINGS_ON_RESET),this.options.set(Dm.KEEP_AUTO_TRADE_ON_RESET,Ju.KEEP_AUTO_TRADE_ON_RESET),this.options.set(Dm.SOUND,Ju.SOUND),this.options.set(Dm.SOUND_VOLUME,Ju.SOUND_VOLUME),this.options.set(Dm.VISUAL_PROGRESS_BARS,Ju.VISUAL_PROGRESS_BARS),this.options.set(Dm.AUTO_TEXT_FITTING,Ju.AUTO_TEXT_FITTING),this.options.set(Dm.PAGED_VIEW,Ju.PAGED_VIEW),this.options.set(Dm.BUILDINGS_PER_PAGE,Ju.BUILDINGS_PER_PAGE),this.options.set(Dm.POSITIVE_COLOUR,Ju.POSITIVE_COLOUR),this.options.set(Dm.NEGATIVE_COLOUR,Ju.NEGATIVE_COLOUR),this.changePositiveColour(),this.changeNegativeColour(),this.optionsSubject.next()}load(e){this.options=new Map(JSON.parse(e.options)),this.options.has(Dm.KEEP_RESERVATION_SETTINGS_ON_RESET)||this.options.set(Dm.KEEP_RESERVATION_SETTINGS_ON_RESET,Ju.KEEP_RESERVATION_SETTINGS_ON_RESET),this.options.has(Dm.KEEP_MANAGEMENT_SETTINGS_ON_RESET)||this.options.set(Dm.KEEP_MANAGEMENT_SETTINGS_ON_RESET,Ju.KEEP_MANAGEMENT_SETTINGS_ON_RESET),this.options.has(Dm.KEEP_AUTO_TRADE_ON_RESET)||this.options.set(Dm.KEEP_AUTO_TRADE_ON_RESET,Ju.KEEP_AUTO_TRADE_ON_RESET),this.options.has(Dm.VISUAL_PROGRESS_BARS)||this.options.set(Dm.VISUAL_PROGRESS_BARS,Ju.VISUAL_PROGRESS_BARS),this.options.has(Dm.AUTO_TEXT_FITTING)||this.options.set(Dm.AUTO_TEXT_FITTING,Ju.AUTO_TEXT_FITTING),this.options.has(Dm.PAGED_VIEW)||this.options.set(Dm.PAGED_VIEW,Ju.PAGED_VIEW),this.options.has(Dm.BUILDINGS_PER_PAGE)||this.options.set(Dm.BUILDINGS_PER_PAGE,Ju.BUILDINGS_PER_PAGE),this.options.has(Dm.POSITIVE_COLOUR)||this.options.set(Dm.POSITIVE_COLOUR,Ju.POSITIVE_COLOUR),this.options.has(Dm.NEGATIVE_COLOUR)||this.options.set(Dm.NEGATIVE_COLOUR,Ju.NEGATIVE_COLOUR),this.options.has(Dm.PAUSE_ON_INIT)||this.options.set(Dm.PAUSE_ON_INIT,Ju.PAUSE_ON_INIT),this.changePositiveColour(),this.changeNegativeColour(),this.optionsSubject.next()}save(){return{options:JSON.stringify(Array.from(this.options.entries()))}}reset(e,n){}registerForOptionsChange(){return this.optionsSubject.asObservable()}setOption(e,n){this.options.set(e,n),this.optionsSubject.next()}setOptions(e){for(const n of e)this.options.set(n.option,n.value);this.optionsSubject.next()}getOption(e){return this.options.get(e)}setPositiveColour(e){this.options.set(Dm.POSITIVE_COLOUR,e),this.changePositiveColour()}setNegativeColour(e){this.options.set(Dm.NEGATIVE_COLOUR,e),this.changeNegativeColour()}changePositiveColour(){document.getElementById("VillagerKings").style.setProperty("--positive-colour",this.options.get(Dm.POSITIVE_COLOUR))}changeNegativeColour(){document.getElementById("VillagerKings").style.setProperty("--negative-colour",this.options.get(Dm.NEGATIVE_COLOUR))}}return e.ngInjectableDef=de({factory:function(){return new e},token:e,providedIn:"root"}),e})();var Fm=function(e){return e[e.LOG=0]="LOG",e[e.WARNING=1]="WARNING",e[e.SUCCESS=2]="SUCCESS",e[e.MYSTICAL=3]="MYSTICAL",e[e.FIGHT_REPORT=4]="FIGHT_REPORT",e}({}),Hm=function(e){return e[e.SPRING=0]="SPRING",e[e.SUMMER=1]="SUMMER",e[e.AUTUMN=2]="AUTUMN",e[e.WINTER=3]="WINTER",e}({});class Um{constructor(e,n){this.day=e,this.year=n}}const Gm=(()=>{class e{constructor(e){this.servicesService=e,this.daySubject=new _,this.yearSubject=new _,this.year=1,this.day=1,this.tickInDay=1,this.season=Hm.SPRING,e.addService(xu.CALENDAR,this)}load(e){this.day=e.day,this.year=e.year,this.season=e.season,this.tickInDay=e.tickInDay}save(){return{day:this.day,year:this.year,season:this.season,tickInDay:this.tickInDay}}reset(e,n){this.day=1,this.tickInDay=1,this.season=Hm.SPRING,e?this.year=1:this.year+=1}tick(e){this.tickInDay+=1,this.tickInDay===Xu+1&&(this.tickInDay=1,this.day+=1,this.day===Qu+1&&(this.day=1,this.year+=1,this.servicesService.getService(xu.GAME).isEnabled(bu.CALENDAR)&&this.servicesService.getService(xu.LOG).success("New Year!"),this.yearSubject.next(this.year)),this.daySubject.next(this.day)),this.day>=1&&this.day<=Qu/4?this.season=Hm.SPRING:this.day>Qu/4&&this.day<=Qu/2?this.season=Hm.SUMMER:this.day>Qu/2&&this.day<=Qu/4*3?(this.season!==Hm.AUTUMN&&this.servicesService.getService(xu.RESOURCES).checkResourcesBeforeWinter(),this.season=Hm.AUTUMN):this.day>Qu/4*3&&this.day<=Qu&&(this.season=Hm.WINTER)}getDay(){return this.day}getYear(){return this.year}getSeason(){return this.season}getAbsoluteDay(){return(this.year-1)*Qu+this.day}getSeasonForAbsoluteDay(e){const n=(e-1)%Qu+1;return n>=1&&n<=Qu/4?Hm.SPRING:n>Qu/4&&n<=Qu/2?Hm.SUMMER:n>Qu/2&&n<=Qu/4*3?Hm.AUTUMN:n>Qu/4*3&&n<=Qu?Hm.WINTER:void 0}registerForDayChange(){return this.daySubject.asObservable()}registerForYearChange(){return this.yearSubject.asObservable()}getDate(){return new Um(this.day,this.year)}}return e.ngInjectableDef=de({factory:function(){return new e(Le(Mm))},token:e,providedIn:"root"}),e})(),Bm=(()=>{class e{constructor(e,n,t){this.servicesService=e,this.calendarService=n,this.optionsService=t,this.entries=[],this.servicesService.addService(xu.LOG,this),this.logSubject=new _}log(e){this.entries.push(new xm(e,Fm.LOG,this.calendarService.getDay())),this.logSubject.next()}warning(e){this.entries.push(new xm(e,Fm.WARNING,this.calendarService.getDay())),this.logSubject.next()}success(e){this.entries.push(new xm(e,Fm.SUCCESS,this.calendarService.getDay())),this.logSubject.next()}mystical(e){this.entries.push(new xm(e,Fm.MYSTICAL,this.calendarService.getDay())),this.logSubject.next()}fightReport(e){this.entries.push(new xm(e.message,Fm.FIGHT_REPORT,this.calendarService.getDay(),e)),this.logSubject.next()}autoSave(){if(this.entries.length>0){const e=this.entries[this.entries.length-1];if(e.message.includes("Auto saved")){let n=2;const t=e.message.replace("Auto saved","").replace(" ","");t.length>0&&(n=Number(t)+1),e.message="Auto saved "+n,this.logSubject.next()}else this.log("Auto saved")}else this.log("Auto saved")}registerForLogs(){return this.logSubject.asObservable()}getEntries(){return this.entries}clearEntries(){this.entries=[],this.logSubject.next()}load(e){this.entries=e.logs}reset(e,n){this.entries=this.entries.slice(-5).filter(e=>e.type===Fm.MYSTICAL)}save(){return this.optionsService.getOption(Dm.SAVE_LOGS)?{logs:this.entries}:{logs:[]}}}return e.ngInjectableDef=de({factory:function(){return new e(Le(Mm),Le(Gm),Le(Lm))},token:e,providedIn:"root"}),e})();var Wm=function(e){return e.ERROR_1="ERROR_1: Copying failed",e.ERROR_2="ERROR_2: Resource limit below 0",e.ERROR_3="ERROR_3: Workers below 0",e.ERROR_4="ERROR_4: Population Cap below 0",e.ERROR_5="ERROR_5: ",e.ERROR_6="ERROR_6: ",e.ERROR_7="ERROR_7: ",e.ERROR_8="ERROR_8: ",e}({});const Vm=(()=>{class e{constructor(e){this.servicesService=e,this.textSubject=new _,this.missionDataSubject=new _,this.returnRegionSubject=new _,this.regionselectionSubject=new _,this.buildingSubject=new _,this.tutorialSubject=new _,this.tutorialResponseSubject=new _,this.valueSubject=new _,this.onOpenSubject=new _,this.confirmationSubject=new _,this.abdicationSubject=new _,this.closeSubject=new _,this.valueResponseSubject=new _,this.regionSubject=new _,this.worldRegionSubject=new _,this.fightReportSubject=new _,this.techSubject=new _,this.resourceOptionsSubject=new _,this.resourceOptionsResponseSubject=new _,this.modals=[],this.servicesService.addService(xu.MODAL,this)}add(e){this.modals.push(e)}remove(e){this.modals=this.modals.filter(n=>n.id!==e)}open(e){this.modals.find(n=>n.id===e).open(),this.onOpenSubject.next(e)}close(e){this.modals.find(n=>n.id===e).close(),this.closeSubject.next(e)}registerForText(){return this.textSubject.asObservable()}registerForOnOpen(){return this.onOpenSubject.asObservable()}registerForConfirmation(){return this.confirmationSubject.asObservable()}sendConfirmationResult(e){this.confirmationSubject.next(e)}registerForAbdication(){return this.abdicationSubject.asObservable()}sendAbdicationResult(e){this.abdicationSubject.next(e)}setModalText(e){this.textSubject.next(e)}registerForRegion(){return this.regionSubject.asObservable()}setRegion(e){this.regionSubject.next(e)}registerForCloseModal(){return this.closeSubject.asObservable()}sendCloseSignal(e){this.closeSubject.next(e)}registerForValue(){return this.valueSubject.asObservable()}setModalValue(e){this.valueSubject.next(e)}sendValueInput(e){this.valueResponseSubject.next(e)}registerForValueResponse(){return this.valueResponseSubject.asObservable()}registerForMissionData(){return this.missionDataSubject.asObservable()}registerForBuilding(){return this.buildingSubject.asObservable()}setMissionData(e){this.missionDataSubject.next(e)}setBuilding(e){this.buildingSubject.next(e)}info(e){this.open(Lu.INFO),this.setModalText(e)}openTutorialModal(e){const n=this.modals.find(e=>e.id===Lu.TUTORIAL);n.close(),n.openTutorialWindow(e)}registerForTutorial(){return this.tutorialSubject.asObservable()}setTutorial(e){this.tutorialSubject.next(e)}registerForTutorialResponse(){return this.tutorialResponseSubject.asObservable()}sendTutorialResponse(e){this.tutorialResponseSubject.next(e)}registerForResourceOptions(){return this.resourceOptionsSubject.asObservable()}setResourceOptions(e){this.resourceOptionsSubject.next(e)}registerForResourceOptionsResponse(){return this.resourceOptionsResponseSubject.asObservable()}sendResourceOptionsResponse(e){return this.resourceOptionsResponseSubject.next(e)}registerForReturnRegion(){return this.returnRegionSubject.asObservable()}setReturnRegion(e){this.returnRegionSubject.next(e)}registerForRegionSelectionOrder(){return this.regionselectionSubject.asObservable()}setRegionSelection(e){this.regionselectionSubject.next(e)}registerForWorldRegion(){return this.worldRegionSubject.asObservable()}setWorldRegion(e){this.worldRegionSubject.next(e)}registerForFightReport(){return this.fightReportSubject.asObservable()}setFightReport(e){this.fightReportSubject.next(e)}registerForTech(){return this.techSubject.asObservable()}setTech(e){this.techSubject.next(e)}}return e.ngInjectableDef=de({factory:function(){return new e(Le(Mm))},token:e,providedIn:"root"}),e})(),zm=(()=>{class e{constructor(e,n,t){this.modalService=e,this.servicesService=n,this.router=t,this.tutorialsEnabled=!1,this.villageTutorialState=0,this.forestTutorialState=0,this.fieldTutorialState=0,this.mountainsTutorialState=0,this.plateauTutorialState=0,this.seaTutorialState=0,this.resourcesTutorialState=0}load(e){this.villageTutorialState=void 0!==e.villageTutorialState?e.villageTutorialState:0,this.forestTutorialState=void 0!==e.forestTutorialState?e.forestTutorialState:0,this.resourcesTutorialState=void 0!==e.resourcesTutorialState?e.resourcesTutorialState:0,this.fieldTutorialState=void 0!==e.fieldTutorialState?e.fieldTutorialState:0,this.mountainsTutorialState=void 0!==e.mountainsTutorialState?e.mountainsTutorialState:0,this.plateauTutorialState=void 0!==e.plateauTutorialState?e.plateauTutorialState:0,this.seaTutorialState=void 0!==e.seaTutorialState?e.seaTutorialState:0}save(){return{villageTutorialState:this.villageTutorialState,forestTutorialState:this.forestTutorialState,resourcesTutorialState:this.resourcesTutorialState,fieldTutorialState:this.fieldTutorialState,mountainsTutorialState:this.mountainsTutorialState,plateauTutorialState:this.plateauTutorialState,seaTutorialState:this.seaTutorialState}}reset(e,n){}checkRegionTutorial(e){if(this.tutorialsEnabled)switch(e){case Hu.VILLAGE:if(0===this.villageTutorialState){this.startTutorial(eo.VILLAGE_TUTORIAL);const e=this.modalService.registerForTutorialResponse().subscribe(n=>{e.unsubscribe(),this.villageTutorialState=n})}break;case Hu.FOREST:if(0===this.forestTutorialState){this.startTutorial(eo.FOREST_TUTORIAL);const e=this.modalService.registerForTutorialResponse().subscribe(n=>{e.unsubscribe(),this.forestTutorialState=n})}break;case Hu.FIELD:if(0===this.fieldTutorialState){this.startTutorial(eo.FIELD_TUTORIAL);const e=this.modalService.registerForTutorialResponse().subscribe(n=>{e.unsubscribe(),this.fieldTutorialState=n})}break;case Hu.MOUNTAINS:if(0===this.mountainsTutorialState){this.startTutorial(eo.MOUNTAINS_TUTORIAL);const e=this.modalService.registerForTutorialResponse().subscribe(n=>{e.unsubscribe(),this.mountainsTutorialState=n})}break;case Hu.PLATEAU:if(0===this.plateauTutorialState){this.startTutorial(eo.PLATEAU_TUTORIAL);const e=this.modalService.registerForTutorialResponse().subscribe(n=>{e.unsubscribe(),this.plateauTutorialState=n})}break;case Hu.SEA:if(0===this.seaTutorialState){this.startTutorial(eo.SEA_TUTORIAL);const e=this.modalService.registerForTutorialResponse().subscribe(n=>{e.unsubscribe(),this.seaTutorialState=n})}}}checkResourcesTutorial(){if(0===this.resourcesTutorialState){this.startTutorial(eo.RESOURCES_TUTORIAL);const e=this.modalService.registerForTutorialResponse().subscribe(n=>{e.unsubscribe(),this.resourcesTutorialState=n})}}enableTutorials(){this.tutorialsEnabled=!0}resetTutorials(){this.villageTutorialState=0,this.forestTutorialState=0,this.fieldTutorialState=0,this.mountainsTutorialState=0,this.plateauTutorialState=0,this.seaTutorialState=0,this.resourcesTutorialState=0,this.router.url.endsWith("village")?this.checkRegionTutorial(Hu.VILLAGE):this.router.url.endsWith("forest")?this.checkRegionTutorial(Hu.FOREST):this.router.url.endsWith("field")?this.checkRegionTutorial(Hu.FIELD):this.router.url.endsWith("mountains")?this.checkRegionTutorial(Hu.MOUNTAINS):this.router.url.endsWith("plateau")?this.checkRegionTutorial(Hu.PLATEAU):this.router.url.endsWith("sea")?this.checkRegionTutorial(Hu.SEA):this.router.url.endsWith("resources")?this.checkResourcesTutorial():this.modalService.info("Tutorials have been enabled")}startTutorial(e){this.modalService.setTutorial(e),this.servicesService.getService(xu.TICKER).stop(),this.modalService.openTutorialModal(e[0].position)}showCurrentViewTutorial(){this.router.url.endsWith("village")?this.startTutorial(eo.VILLAGE_TUTORIAL):this.router.url.endsWith("forest")?this.startTutorial(eo.FOREST_TUTORIAL):this.router.url.endsWith("field")?this.startTutorial(eo.FIELD_TUTORIAL):this.router.url.endsWith("mountains")?this.startTutorial(eo.MOUNTAINS_TUTORIAL):this.router.url.endsWith("plateau")?this.startTutorial(eo.PLATEAU_TUTORIAL):this.router.url.endsWith("sea")?this.startTutorial(eo.SEA_TUTORIAL):this.router.url.endsWith("resources")?this.startTutorial(eo.RESOURCES_TUTORIAL):this.modalService.info("There is no tutorial for this tab")}}return e.ngInjectableDef=de({factory:function(){return new e(Le(Vm),Le(Mm),Le(Fg))},token:e,providedIn:"root"}),e})(),Ym=(()=>{class e{constructor(e,n,t,l,i){this.servicesService=e,this.modalService=n,this.logService=t,this.calendarService=l,this.tutorialsService=i,this.flags=[],this.gameState=0,this.abdicationLevel=0,this.gameStartedYear=1,this.devMessage=Number.MAX_SAFE_INTEGER,this.headerRowsSubject=new _,this.demolishReturn=lo.DEMOLITION_RETURN,this.servicesService.addService(xu.GAME,this)}init(){zu.production?this.flags=[]:(this.flags=[],Object.values(bu).filter(e=>!isNaN(e)).forEach(e=>this.flags.push(e)))}load(e){this.flags=e.flags,this.gameState=e.gameState,this.demolishReturn=e.demolishReturn,this.devMessage=e.devMessage,this.abdicationLevel=e.abdicationLevel,this.gameStartedYear=void 0!==e.gameStartedYear?e.gameStartedYear:1}save(){return{flags:this.flags,gameState:this.gameState,demolishReturn:this.demolishReturn,devMessage:this.devMessage,abdicationLevel:this.abdicationLevel,gameStartedYear:this.gameStartedYear}}reset(e,n){this.flags=[],this.gameState=0,this.gameStartedYear=this.calendarService.getYear(),this.demolishReturn=lo.DEMOLITION_RETURN,this.init(),e&&(this.devMessage=Number.MAX_SAFE_INTEGER,this.abdicationLevel=0,this.gameStartedYear=1),n&&(this.abdicationLevel=0)}isEnabled(e){return this.flags.includes(e)}enable(e){this.flags.includes(e)||this.flags.push(e)}disable(e){this.flags.includes(e)&&this.flags.splice(this.flags.indexOf(e),1)}setGameState(e){this.gameState=e}getGameState(){return this.gameState}tick(e){0===this.getGameState()&&(this.displayWelcomeModal(),this.addStartBoost(),this.tutorialsService.checkRegionTutorial(Hu.VILLAGE),this.setGameState(1)),this.displayDevMessage()}displayWelcomeModal(){this.modalService.info(Yu);const e=this.modalService.registerForCloseModal().subscribe(()=>{this.devMessage===Number.MAX_SAFE_INTEGER&&(this.devMessage=0),e.unsubscribe()})}displayDevMessage(){const e=$u.length;this.devMessage<e&&(this.showDevNotes(),this.devMessage=e)}showDevNotes(){this.modalService.open(Lu.CHANGELOG)}addStartBoost(){Ku&&this.servicesService.getService(xu.EFFECTS).addBuildingEffect(new Du(Ku.name,Ku.building,Ku.effect,Ku.duration))}getAbdicationLevel(){return this.abdicationLevel}incrementAbdicationLevel(){this.abdicationLevel+=1,this.abdicationLevel>=7&&this.logService.mystical("As you finish last wonder building strange thoughts of ancient structures appear in your head. Who knows what purpose this building serve")}updateHeader(e){this.headerRowsSubject.next(e)}registerForHeaderRowsChange(){return this.headerRowsSubject.asObservable()}getGameStartedYear(){return this.gameStartedYear}}return e.ngInjectableDef=de({factory:function(){return new e(Le(Mm),Le(Vm),Le(Bm),Le(Gm),Le(zm))},token:e,providedIn:"root"}),e})();class $m{constructor(e,n,t,l,i,r,s){this.perk=e,this.usages=n,this.maxUsages=t,this.description=l,this.cost=i,this.reset=r,this.effect=s}}const Km=(()=>{class e{constructor(e,n,t){this.modalService=e,this.logService=n,this.servicesService=t,this.royalPoints=0,this.perks=[],this.goldenFish=!1,this.goldenEgg=!1,this.goldenApple=!1,this.servicesService.addService(xu.ROYAL,this),this.initPerks()}initPerks(){this.perks=[],Object.entries(co.PERKS).forEach(e=>{this.perks.push(new $m(Eu[e[0]],e[1].USAGES,e[1].MAX_USAGES,e[1].DESCRIPTION,e[1].COST,e[1].RESET,e[1].EFFECT))})}load(e){this.royalPoints=e.royalPoints,this.goldenFish=void 0!==e.goldenFish&&e.goldenFish,this.goldenEgg=void 0!==e.goldenEgg&&e.goldenEgg,this.goldenApple=void 0!==e.goldenApple&&e.goldenApple,e.progress.forEach(e=>{const n=this.perks.find(n=>n.perk===e[0]);n&&(n.usages=e[1])})}save(){const e=[];return this.perks.forEach(n=>e.push([n.perk,n.usages])),{royalPoints:this.royalPoints,progress:e,goldenFish:this.goldenFish,goldenEgg:this.goldenEgg,goldenApple:this.goldenApple}}reset(e,n){e?(this.royalPoints=0,this.initPerks()):this.perks.forEach(e=>{e.reset&&e.usages>0&&e.reset(this.servicesService,e)}),this.goldenFish=!1,this.goldenEgg=!1,this.goldenApple=!1}getRoyalPoints(){return this.royalPoints}buyRoyalPoints(){this.modalService.open(Lu.ROYAL)}increaseRoyalPoints(e){this.royalPoints+=e}getRoyalPerks(){return this.perks}unlock(e){(0===e.maxUsages||e.usages<e.maxUsages)&&(this.royalPoints>=e.cost?this.perks.find(n=>e===n).effect(this.servicesService,e):this.modalService.info("Not enough Royal Points!<br>"+e.cost+" RP required but only "+this.royalPoints+" available"))}unlockCallback(e){this.royalPoints-=Number(e.cost),e.usages+=1}isGoldenFishCaught(){return this.goldenFish}isGoldenEggLaid(){return this.goldenEgg}isGoldenApplePicked(){return this.goldenApple}catchGoldenFish(){return!(this.goldenFish||!Fu.chance(co.GOLDEN_ITEMS.GOLDEN_FISH_CHANCE)||(this.increaseRoyalPoints(5),this.logService.mystical("You have caught a golden fish. You let it go and it granted you 5 Royal Points"),this.goldenFish=!0,0))}layGoldenEgg(){return!(this.goldenEgg||!Fu.chance(co.GOLDEN_ITEMS.GOLDEN_EGG_CHANCE)||(this.increaseRoyalPoints(5),this.logService.mystical("Your chicken laid golden egg. You decided to keep it and was granted 5 Royal Points"),this.goldenEgg=!0,0))}pickGoldenApple(){return!(this.goldenApple||!Fu.chance(co.GOLDEN_ITEMS.GOLDEN_APPLE_CHANCE)||(this.increaseRoyalPoints(5),this.logService.mystical("You picked golden apple in the orchard. You decided to keep it and was granted 5 Royal Points"),this.goldenApple=!0,0))}}return e.ngInjectableDef=de({factory:function(){return new e(Le(Vm),Le(Bm),Le(Mm))},token:e,providedIn:"root"}),e})(),jm=(()=>{class e{constructor(e,n,t,l){this.servicesService=e,this.modalService=n,this.royalService=t,this.logService=l,e.addService(xu.KONGREGATE,this);try{kongregateAPI.loadAPI(function(){window.kongregate=kongregateAPI.getAPI();const e=[],n=function(n){if(n.success){const l=e.find(e=>e[0]===n.id);l&&t.increaseRoyalPoints(l[1])}};window.kongregate.mtx.requestUserItemList(null,function(t){if(t.success)for(let l=0;l<t.data.length;l++){const i=t.data[l];e.push([i.id,Number(i.identifier.replace("rp_pack",""))]),window.kongregate.mtx.useItemInstance(i.id,n)}})})}catch(i){console.error(i)}}isSet(){return!!window.kongregate}isAvailable(){return window.kongregate&&0!==this.getUserId()}submitStat(e,n){window.kongregate.stats.submit(e,n)}getUsername(){if(this.isSet())return window.kongregate.services.getUsername()}getUserId(){if(this.isSet())return window.kongregate.services.getUserId()}buyItem(e){const n=this.modalService,t=this.royalService,l=this.logService,i=[],r=function(e){if(e.success){const n=i.find(n=>n[0]===e.id);n&&(t.increaseRoyalPoints(n[1]),l.log("Added "+n[1]+" Royal Points"))}},s=function(e){if(e.success)for(let n=0;n<e.data.length;n++){const t=e.data[n];i.push([t.id,Number(t.identifier.replace("rp_pack",""))]),window.kongregate.mtx.useItemInstance(t.id,r)}};window.kongregate.mtx.purchaseItems([e],function(e){e.success&&(n.close(Lu.ROYAL),window.kongregate.mtx.requestUserItemList(null,s))})}}return e.ngInjectableDef=de({factory:function(){return new e(Le(Mm),Le(Vm),Le(Km),Le(Bm))},token:e,providedIn:"root"}),e})(),qm=(()=>{class e{constructor(e){this.happiness=Zu.START_HAPPINESS,e.addService(xu.HAPPINESS,this)}load(e){this.happiness=e.happiness}save(){return{happiness:this.happiness}}reset(e,n){this.happiness=Zu.START_HAPPINESS}tick(e){}getHappiness(){return this.happiness}getHappinessEffect(){return this.happiness>=0&&this.happiness<=10?-10:this.happiness>10&&this.happiness<=40?5:this.happiness>40&&this.happiness<=60?10:this.happiness>60&&this.happiness<=90?20:this.happiness>90&&this.happiness<=100?50:void 0}increaseHappiness(e,n=100){this.happiness<n&&(this.happiness+=e,this.happiness>100&&(this.happiness=100))}decreaseHappiness(e,n=0){this.happiness>n&&(this.happiness-=e,this.happiness<0&&(this.happiness=0))}resetHappiness(){this.happiness=Zu.START_HAPPINESS}}return e.ngInjectableDef=de({factory:function(){return new e(Le(Mm))},token:e,providedIn:"root"}),e})();class Xm{constructor(e,n,t=0){this.userName=e,this.value=n,this.daysAgo=t}incrementDaysAgo(){this.daysAgo+=1}}class Qm{constructor(e,n,t=0){this.producerName=e,this.value=n,this.daysAgo=t}incrementDaysAgo(){this.daysAgo+=1}}class Zm{constructor(e,n=0,t=0){this.sickness=e,this.progress=n,this.medicine=t}}const Jm=(()=>{class e{constructor(e,n,t,l,i,r,s,u){this.logService=e,this.servicesService=n,this.gameService=t,this.modalService=l,this.optionsService=i,this.happinessService=r,this.calendarService=s,this.kongregateService=u,this.resources=new Map,this.resourcesUse=new Map,this.resourcesProduction=new Map,this.sick=[],this.populationScore=0,this.resourcesSubject=new _,this.callbacks=new Map,n.addService(xu.RESOURCES,this),this.init(),n.getService(xu.CALENDAR).registerForDayChange().subscribe(e=>{Array.from(this.resourcesUse.keys()).forEach(e=>{this.resourcesUse.set(e,this.resourcesUse.get(e).filter(e=>e.daysAgo<30)),this.resourcesUse.get(e).forEach(e=>e.incrementDaysAgo()),0===this.resourcesUse.get(e).length&&this.resourcesUse.delete(e)}),Array.from(this.resourcesProduction.keys()).forEach(e=>{this.resourcesProduction.set(e,this.resourcesProduction.get(e).filter(e=>e.daysAgo<30)),this.resourcesProduction.get(e).forEach(e=>e.incrementDaysAgo()),0===this.resourcesProduction.get(e).length&&this.resourcesProduction.delete(e)})})}init(){const e=new km;io.getResources().forEach(n=>{this.resources.set(Su[n[0]],e.forResource(Su[n[0]]).withName(Pu.prepareResourceName(Su[n[0]])).withAmount(void 0!==n[1].AMOUNT?n[1].AMOUNT:io.DEFAULT_AMOUNT).withLimit(void 0!==n[1].LIMIT?n[1].LIMIT:io.DEFAULT_LIMIT).withResourceTypes(n[1].TYPES).withResourceType(Iu.ALL).withVisible(void 0!==n[1].VISIBLE?n[1].VISIBLE:io.DEFAULT_VISIBLE).withHighlighted(void 0!==n[1].HIGHLIGHTED?n[1].HIGHLIGHTED:io.DEFAULT_HIGHLIGHTED).build())}),this.people=1,this.workers=0,this.populationCap=1,zu.production||this.resources.forEach(e=>e.visible=!0)}getResource(e){return this.resources.get(e)}makeVisible(e){this.resources.get(e).visible=!0}increaseResource(e,n,t,l=!1){if(e===Su.FOOD||e===Su.NOTHING)return!0;const i=this.resources.get(e);if(i.getResourceTypes().includes(Iu.ANIMAL)){const i=this.servicesService.getServiceByRegion(Hu.FIELD).getBuildings().filter(e=>e.getBuildingType()===Ou.PASTURE).map(e=>e).filter(n=>n.getResourceType()===e);let r=0;if(i.forEach(e=>r+=e.getMaxAnimals()-e.getAnimals()),n>r&&!l)return!1;for(l&&n>r&&(n=r);n>0&&r>0;)for(const l of i){for(;l.getAnimals()<l.getMaxAnimals()&&n>0;)l.increaseAnimal(1),n-=1,this.addResourceProduction(e,t,1),r-=1;if(0===n)return!0}return!0}return!(!l&&i.amount+n>i.limit||(i.amount+=n,this.addResourceProduction(e,t,n),i.amount>i.limit&&(i.amount=i.limit),this.resourcesSubject.next(this.resources),i.isVisible()||(i.toggleVisible(),this.logService.log("New resource discovered: "+Pu.prepareResourceName(e))),0))}decreaseResource(e,n,t,l=!1){if(e===Su.FOOD)return this.getFoodValue(t,l)>=n&&(this.getFood(n,t,l),!0);const i=this.resources.get(e);if(i.getResourceTypes().includes(Iu.ANIMAL)){const l=this.servicesService.getServiceByRegion(Hu.FIELD).getBuildings().filter(e=>e.getBuildingType()===Ou.PASTURE).map(e=>e).filter(n=>n.getResourceType()===e&&n.getAnimals()>0);let i=0;if(l.forEach(e=>i+=e.getAnimals()),i>=n){for(const i of l){for(;n>0&&i.getAnimals()>0;)i.decreaseAnimal(1),this.addResourceUse(e,t,1),n-=1;if(0===n)return!0}return!0}return!1}return 0!==this.hasResource(e,n,t,l)?(this.resourcesSubject.next(this.resources),!1):(i.amount-=n,this.addResourceUse(e,t,n),this.resourcesSubject.next(this.resources),!0)}hasResource(e,n,t,l=!1){if(e===Su.FOOD)return this.getFoodValue(t,l)>=n?0:n-this.getFoodValue(t,l);const i=this.resources.get(e);return l?i.amount>=n?0:n-this.resources.get(e).amount:i.amount-i.options.getReservedAmountBySource(t,i,l)>=n?0:n-(i.amount-i.options.getReservedAmountBySource(t,i,l))}hasLimit(e){return this.resources.get(e).amount<this.resources.get(e).limit}decreaseResources(e,n,t=!1,l=1,i=!1){let r="",s=!0;for(const[u,o]of Array.from(e)){const e=this.hasResource(u,o*l,n,t);0!==e&&(r+="Missing "+e+" "+Pu.prepareResourceName(u)+"<br>",s=!1)}if(!s)return!i&&(this.modalService.info(r),!1);for(const[u,o]of Array.from(e))this.decreaseResource(u,o*l,n,t);return!0}hasResources(e,n,t=1,l=!1){let i=!0;for(const[r,s]of Array.from(e))0!==this.hasResource(r,s*t,n,l)&&(i=!1);return i}increaseLimit(e,n){this.resources.forEach(t=>{t.getResourceTypes().includes(e)&&!t.getResourceTypes().includes(Iu.ANIMAL)&&(t.limit+=n)})}increaseResourceLimit(e,n){this.resources.get(e).limit+=n}decreaseLimit(e,n){this.resources.forEach(t=>{t.getResourceTypes().includes(e)&&!t.getResourceTypes().includes(Iu.ANIMAL)&&(t.limit-=n,t.limit<0&&(t.limit=0,console.error(Wm.ERROR_2,t.getResource(),t.limit)),t.amount>t.limit&&(t.amount=t.limit))})}decreaseResourceLimit(e,n){const t=this.resources.get(e);t.limit-=n,t.limit<0&&(t.limit=0,console.error(Wm.ERROR_2,t.getResource(),t.limit)),t.amount>t.limit&&(t.amount=t.limit)}getResources(){return this.resources}save(){let e="[";return this.resources.forEach(n=>{e+="["+n.resource+","+JSON.stringify(n)+"],"}),{resources:e=e.slice(0,-1)+"]",people:this.people,workers:this.workers,sick:this.sick,populationCap:this.populationCap}}load(e){JSON.parse(e.resources).forEach(e=>{if(this.resources.get(e[0]).amount=e[1].amount,this.resources.get(e[0]).limit=e[1].limit,this.resources.get(e[0]).visible=e[1].visible,this.resources.get(e[0]).highlighted=e[1].highlighted,this.resources.get(e[0]).prioritise=e[1].prioritise,e[1].reserved)this.resources.get(e[0]).options=new Nm(this.resources.get(e[0]).resource,e[1].reserved);else if(e[1].options){const n=[],t=new wm;e[1].options.consumers.forEach(e=>{n.push(new Am(e.name,e.enabled,e.reserved,void 0!==e.reservedPercent&&e.reservedPercent))}),n.find(e=>"Paper mill"===e.name)||n.push(new Am("Paper mill")),e[1].options.autoTrade&&(t.autoSellEnabled=e[1].options.autoTrade.autoSellEnabled,t.autoSellAmount=e[1].options.autoTrade.autoSellAmount,t.autoSellOrder=e[1].options.autoTrade.autoSellOrder,t.autoBuyEnabled=e[1].options.autoTrade.autoBuyEnabled,t.autoBuyAmount=e[1].options.autoTrade.autoBuyAmount,t.autoBuyOrder=e[1].options.autoTrade.autoBuyOrder,void 0!==e[1].options.autoTrade.autoSellPercentage?(t.autoSellPercentage=e[1].options.autoTrade.autoSellPercentage,t.autoBuyPercentage=e[1].options.autoTrade.autoBuyPercentage):(t.autoSellPercentage=!1,t.autoBuyPercentage=!1)),this.resources.get(e[0]).options=new Nm(e[1].options.resource,e[1].options.reserve,n,void 0!==e[1].options.reservePercent&&e[1].options.reservePercent,t)}else this.resources.get(e[0]).options=new Nm(this.resources.get(e[0]).resource)}),this.sick=void 0!==e.sick?e.sick:[],this.people=e.people,this.workers=e.workers,this.populationCap=e.populationCap,this.resourcesSubject.next(this.resources)}reset(e,n){const t=this.servicesService.getService(xu.HERITAGE).calculateHeritagePoints();t>0&&!e&&this.servicesService.getService(xu.HERITAGE).increaseHeritagePoints(t);const l=this.resources;this.resources=new Map,this.people=1,this.workers=0,this.populationCap=1,this.sick=[],this.populationScore=0,this.resourcesUse=new Map,this.resourcesProduction=new Map,this.init(),e||Array.from(this.resources.values()).forEach(e=>{this.optionsService.getOption(Dm.KEEP_RESERVATION_SETTINGS_ON_RESET)?e.options=l.get(e.resource).options:(e.options=l.get(e.resource).options,e.options.reservePercent=!1,e.options.reserve=0,e.options.consumers.forEach(e=>e.enabled=!1)),this.optionsService.getOption(Dm.KEEP_AUTO_TRADE_ON_RESET)||(e.options.autoTrade.autoSellEnabled=!1,e.options.autoTrade.autoBuyEnabled=!1)}),this.resourcesSubject.next(this.resources)}registerForResourcesChange(){return this.resourcesSubject.asObservable()}createPeople(e){this.people+=e}removePeople(e){if(this.people-=e,this.people-e<0)for(;this.people<0;){const e=Math.floor(Math.random()*this.callbacks.size);Array.from(this.callbacks.values())[e].fireRandomWorker()}}hireWorker(){return this.people>0&&(this.people-=1,this.workers+=1,!0)}fireWorker(e=1){0===this.workers&&console.error(Wm.ERROR_3),this.workers-=e,this.people+=e}getPeople(){return this.people}getWorkers(){return this.workers}getPopulationCap(){return this.populationCap}increasePopulationCap(e){return this.populationCap+=e}decreasePopulationCap(e){return this.populationCap-e<0&&console.error(Wm.ERROR_4),this.populationCap-=e}addCallback(e,n){this.callbacks.set(n,e)}tick(e){this.kongregateService.isAvailable()&&this.getTotalPeople()>this.populationScore&&(this.populationScore=this.getTotalPeople(),this.kongregateService.submitStat("Population",this.populationScore)),1===this.getTotalPeople()&&this.happinessService.resetHappiness(),this.people+this.workers>=lo.VILLAGE.SHRINE.POPULATION&&(this.gameService.isEnabled(bu.SHRINE)||(this.gameService.enable(bu.SHRINE),this.logService.success("Shrine unlocked"))),this.people+this.workers>=lo.VILLAGE.CHURCH.POPULATION&&(this.gameService.isEnabled(bu.CHURCH)||(this.gameService.enable(bu.CHURCH),this.logService.success("Church unlocked"))),this.sick=this.sick.filter(e=>!Fu.chance(go.getSickness(e.sickness).LETHALITY/100/(go.getSickness(e.sickness).DURATION*Xu))||(this.callbacks.get(Hu.VILLAGE).removeRecruit(1,!1),this.servicesService.getService(xu.MANAGEMENT).getLogSickness()&&this.logService.warning("Villager died from "+Pu.prepareSicknessName(e.sickness)),!1)),this.sick.forEach(e=>{0===e.medicine&&this.decreaseResource(Su.HERBAL_MEDICINE,1,"Sickness")&&(e.medicine=1),e.progress+=e.medicine>0?100/(go.getSickness(e.sickness).DURATION*Xu)*2:100/(go.getSickness(e.sickness).DURATION*Xu)}),this.sick.forEach(e=>{e.progress>=100&&(this.people+=1)}),this.sick=this.sick.filter(e=>e.progress<100)}getPriorityFood(e,n=!1){const t=this.servicesService.getService(xu.MANAGEMENT).getFoodPriority();for(const l in t){const i=t[l].filter(t=>this.getAvailableAmount(t,e,n)>0);if(i.length>0&&i.length>0){const n=i[Math.floor(Math.random()*i.length)];return this.decreaseResource(n,1,e),io.getResource(n).POWER}}return 0}getFood(e,n,t=!1){for(;e>0;)e-=this.getPriorityFood(n,t)}getFoodValue(e,n=!1){let t,l=0;return n?(t=Array.from(this.resources.entries()).filter(e=>e[1].resourceTypes.includes(Iu.CONSUMABLE)&&e[1].amount>0)).forEach(e=>l+=io.getResource(e[0]).POWER*e[1].amount):(t=Array.from(this.resources.entries()).filter(t=>t[1].resourceTypes.includes(Iu.CONSUMABLE)&&t[1].amount-t[1].options.getReservedAmountBySource(e,t[1],n)>0)).forEach(e=>l+=io.getResource(e[0]).POWER*(e[1].amount-e[1].reserved)),l}getResourceTypes(e){return this.resources.get(e).getResourceTypes()}increaseResources(e,n,t=!1){for(const[l,i]of Array.from(e))this.increaseResource(l,i,n,t)}removeRecruit(e){return this.people>=e&&this.callbacks.get(Hu.VILLAGE).removeRecruit(e)}getFuel(e){const n=io.getResourcesByType(Iu.FUEL).sort((e,n)=>e[1].FUEL_PRIORITY-n[1].FUEL_PRIORITY);for(const t of n)if(this.decreaseResource(Su[String(t[0])],1,e))return t[1].POWER;return 0}getTotalPeople(){return this.people+this.workers+this.sick.length}getResourcesValue(){let e=0;return this.resources.forEach(n=>{n.amount>0&&(e+=io.getResource(n.resource).TRADE_VALUE*n.getAmount())}),e}getAvailableAmount(e,n,t=!1){const l=this.resources.get(e);let i=l.amount-l.options.getReservedAmountBySource(n,l,t);return i<0&&(i=0),i}updateAnimals(){const e=Array.from(this.getResources().values()).filter(e=>e.getResourceTypes().includes(Iu.ANIMAL)),n=this.servicesService.getServiceByRegion(Hu.FIELD).getBuildings().filter(e=>e.getBuildingType()===Ou.PASTURE).map(e=>e);e.forEach(e=>{let t=0,l=0;n.filter(n=>n.getResourceType()===e.resource).forEach(e=>{t+=e.getAnimals(),l+=e.getMaxAnimals()}),e.amount=t,e.limit=l})}getLimit(e){const n=this.resources.get(e);return n.limit-n.amount}addResourceUse(e,n,t){this.resourcesUse.has(e)?this.resourcesUse.get(e).push(new Xm(n,t)):this.resourcesUse.set(e,[new Xm(n,t)])}addResourceProduction(e,n,t){this.resourcesProduction.has(e)?this.resourcesProduction.get(e).push(new Qm(n,t)):this.resourcesProduction.set(e,[new Qm(n,t)])}getResourceUses(e){return this.resourcesUse.get(e)}getResourceProductions(e){return this.resourcesProduction.get(e)}getResourcesByType(e){return Array.from(this.resources.values()).filter(n=>n.getResourceTypes().includes(e))}getFuelValue(){let e=0;return Array.from(this.resources.values()).filter(e=>e.getResourceTypes().includes(Iu.FUEL)).forEach(n=>e+=n.amount*io.getResource(n.resource).POWER),e}checkResourcesBeforeWinter(){160*this.servicesService.getService(xu.VILLAGE).getHousingBuildings().length>this.getFuelValue()&&this.logService.warning("We might not have enough available resources to heat our homes during winter!")}getAverageNutritionProduction(){let e=0,n=1;return this.getResourcesByType(Iu.CONSUMABLE).forEach(t=>{const l=this.getResourceProductions(t.resource);l&&l.forEach(l=>{l.daysAgo>n&&(n=l.daysAgo),e+=l.value*io.getResource(t.resource).POWER})}),e/n}addSick(e){if(this.people-=1,this.sick.push(new Zm(e)),this.people-1<0)for(;this.people<0;){const e=Math.floor(Math.random()*this.callbacks.size);Array.from(this.callbacks.values())[e].fireRandomWorker()}}getSick(){return this.sick}}return e.ngInjectableDef=de({factory:function(){return new e(Le(Bm),Le(Mm),Le(Ym),Le(Vm),Le(Lm),Le(qm),Le(Gm),Le(jm))},token:e,providedIn:"root"}),e})();class ef{constructor(e,n,t,l){this.resourcesService=e,this.modalService=n,this.tutorialService=t,this.gameService=l,this.filterText=""}ngOnInit(){this.categories=Object.keys(Iu),this.categories=[Iu[Iu.RAW],Iu[Iu.PROCESSED],Iu[Iu.FOOD],Iu[Iu.TOOLS]],this.resources=this.resourcesService.getResources(),this.resourcesService.registerForResourcesChange().subscribe(e=>{this.resources=e}),this.tutorialService.checkResourcesTutorial()}getResourcesList(e){return Array.from(this.resourcesService.getResources().entries()).filter(n=>n[1].getResourceTypes().includes(Iu[e])&&Pu.prepareResourceName(n[1].getResource()).toLowerCase().includes(this.filterText)).map(e=>e[1])}openManageModal(e){this.modalService.open(Lu.RESOURCE_MANAGEMENT),this.modalService.setResourceOptions(e.options);const n=this.modalService.registerForResourceOptionsResponse().subscribe(t=>{n.unsubscribe(),t&&(e.options=t)})}isMarketEnabled(){return this.gameService.isEnabled(bu.MARKET)}highlightResource(e){e.highlighted?e.highlighted=!1:(Array.from(this.resourcesService.getResources().values()).filter(e=>e.highlighted),e.highlighted=!0)}isNotCoins(e){return e.resource!==Su.COINS}isDev(){return!zu.production}addDevRes(e){this.resourcesService.increaseResource(e,e===Su.COINS?100:5,"Dev",!0)}getResourceDescription(e){let n="";return e.hasResourceType(Iu.CONSUMABLE)&&(n+="nutrition: "+io.getResource(e.resource).POWER),e.hasResourceType(Iu.FUEL)&&(n+="heating energy: "+io.getResource(e.resource).POWER),""!==n?"<hr>"+n:n}getResourceConsumers(e){let n="",t="<b>used by:</b><br>";const l=this.resourcesService.getResourceUses(e.resource),i=[];l&&(l.slice().forEach(e=>{const n=i.find(n=>n[0]===e.userName);n?n[1]+=e.value:i.push([e.userName,e.value])}),i.sort((e,n)=>e[0].localeCompare(n[0])).forEach(e=>{t+=e[0]+": "+e[1]+"<br>"})),"<b>used by:</b><br>"!==t&&(n+="<hr>"+t),t="<b>produced by:</b><br>";const r=this.resourcesService.getResourceProductions(e.resource),s=[];return r&&(r.slice().forEach(e=>{const n=s.find(n=>n[0]===e.producerName);n?n[1]+=e.value:s.push([e.producerName,e.value])}),s.sort((e,n)=>e[0].localeCompare(n[0])).forEach(e=>{t+=e[0]+": "+e[1]+"<br>"})),"<b>produced by:</b><br>"!==t&&(n+="<hr>"+t),n}}var nf=Zt({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:100%;max-height:100%;font-size:1em;margin:.7%;text-align:center}#resourcesTitle[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;font-size:1.3em;font-weight:bolder;vertical-align:middle}#center[_ngcontent-%COMP%]{-webkit-box-flex:10;flex:10 0 auto}.side[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 25%;font-size:.6em;width:15%;margin:3px;display:inline-block}#categories[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;border:1px solid #000;height:94.8%;text-align:center}.category[_ngcontent-%COMP%]{text-align:left;-webkit-box-flex:1;flex:1 0 0;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;border:1px solid #000}.resource[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;margin-left:3px;width:100%;vertical-align:middle}.title[_ngcontent-%COMP%]{text-align:center;padding:2px 0;width:100%;font-weight:bolder;font-size:1em;margin-bottom:5px;display:block;border-bottom:1px solid #000}.highlight[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1 0 auto;text-align:right;margin-right:3px}.highlight[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}app-icon[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 auto;margin-right:3px}.manage[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:22px;width:22px}.greyout[_ngcontent-%COMP%]{opacity:.3}.prioritise[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:22px;width:22px}.full[_ngcontent-%COMP%]{font-weight:600}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center}hr[_ngcontent-%COMP%]{border-color:#000}.center[_ngcontent-%COMP%]{text-align:center}"]],data:{}});function tf(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.addDevRes(e.parent.parent.context.$implicit.resource)&&l),l},null,null)),(e()(),us(-1,null,["+"]))],null,null)}function lf(e){return cs(0,[(e()(),Kr(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),us(1,null,["","/",""]))],null,function(e,n){var t=n.parent.parent.context.$implicit.getAmount(),l=n.parent.parent.context.$implicit.getLimit();e(n,1,0,t,l)})}function rf(e){return cs(0,[(e()(),Kr(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),us(1,null,["","/",""]))],null,function(e,n){var t=n.parent.parent.context.$implicit.getAmount(),l=n.parent.parent.context.$implicit.getLimit();e(n,1,0,t,l)})}function sf(e){return cs(0,[(e()(),Kr(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),us(1,null,["",""]))],null,function(e,n){var t=n.parent.parent.context.$implicit.getAmount();e(n,1,0,t)})}function uf(e){return cs(0,[(e()(),Kr(0,0,null,null,5,"span",[],null,null,null,null,null)),(e()(),Kr(1,0,null,null,4,"span",[["class","prioritise"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=0!=(e.parent.parent.context.$implicit.prioritise=!e.parent.parent.context.$implicit.prioritise)&&l),l},null,null)),di(512,null,Uo,Go,[Ct,It,rt,ct]),ci(3,278528,null,0,Wo,[Uo],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),rs(4,{greyout:0}),(e()(),Kr(5,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/trade.svg"],["title","prioritise on market"]],null,null,null,null,null))],function(e,n){var t=e(n,4,0,!n.parent.parent.context.$implicit.prioritise);e(n,3,0,"prioritise",t)},null)}function of(e){return cs(0,[(e()(),Kr(0,0,null,null,31,"div",[["class","resource"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,17,"span",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(2,0,null,null,8,"span",[["appTooltip",""],["class","tooltip"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==Ql(e,3).onmousemove(t)&&l),l},null,null)),ci(3,16384,null,0,Op,[],{elementId:[0,"elementId"]},null),(e()(),Kr(4,0,null,null,4,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),Kr(5,0,null,null,1,"div",[["class","center"]],null,null,null,null,null)),(e()(),us(6,null,["",""])),(e()(),Kr(7,0,null,null,0,"div",[["class","center"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Kr(8,0,null,null,0,"div",[["class","center"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Kr(9,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(10,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),$r(16777216,null,null,1,null,tf)),ci(12,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,lf)),ci(14,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,rf)),ci(16,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,sf)),ci(18,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(19,0,null,null,12,"span",[["class","highlight"]],null,null,null,null,null)),(e()(),Kr(20,0,null,null,4,"span",[["class","manage"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.openManageModal(e.parent.context.$implicit)&&l),l},null,null)),di(512,null,Uo,Go,[Ct,It,rt,ct]),ci(22,278528,null,0,Wo,[Uo],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),rs(23,{greyout:0}),(e()(),Kr(24,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/manage.svg"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,uf)),ci(26,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(27,0,null,null,4,"span",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.highlightResource(e.parent.context.$implicit)&&l),l},null,null)),di(512,null,Uo,Go,[Ct,It,rt,ct]),ci(29,278528,null,0,Wo,[Uo],{ngClass:[0,"ngClass"]},null),rs(30,{greyout:0}),(e()(),Kr(31,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/eye.svg"],["title","add to header"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,3,0,n.parent.context.$implicit.resource);var l=n.parent.context.$implicit.getName();e(n,10,0,l,"resources",""),e(n,12,0,t.isDev());var i=n.parent.context.$implicit.getAmount()===n.parent.context.$implicit.getLimit();e(n,14,0,i);var r=t.isNotCoins(n.parent.context.$implicit)&&n.parent.context.$implicit.getAmount()!==n.parent.context.$implicit.getLimit();e(n,16,0,r),e(n,18,0,!t.isNotCoins(n.parent.context.$implicit));var s=e(n,23,0,!n.parent.context.$implicit.options.isUsed());e(n,22,0,"manage",s),e(n,26,0,t.isMarketEnabled());var u=e(n,30,0,!n.parent.context.$implicit.highlighted);e(n,29,0,u)},function(e,n){var t=n.component;e(n,4,0,Il(1,"",n.parent.context.$implicit.resource,"")),e(n,6,0,n.parent.context.$implicit.name),e(n,7,0,t.getResourceDescription(n.parent.context.$implicit)),e(n,8,0,t.getResourceConsumers(n.parent.context.$implicit))})}function af(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,of)),ci(2,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,2,0,n.context.$implicit.visible)},null)}function cf(e){return cs(0,[(e()(),Kr(0,0,null,null,4,"div",[["class","category"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),us(2,null,["",""])),(e()(),$r(16777216,null,null,1,null,af)),ci(4,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,4,0,n.component.getResourcesList(n.context.$implicit))},function(e,n){e(n,2,0,n.context.$implicit)})}function hf(e){return cs(0,[(e()(),Kr(0,0,null,null,13,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,9,"span",[["id","resourcesTitle"]],null,null,null,null,null)),(e()(),Kr(2,0,null,null,0,"span",[["class","side"]],null,null,null,null,null)),(e()(),Kr(3,0,null,null,1,"span",[["id","center"]],null,null,null,null,null)),(e()(),us(-1,null,["Resources"])),(e()(),Kr(5,0,null,null,5,"input",[["class","side"],["placeholder","filter"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==Ql(e,6)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,6).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ql(e,6)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ql(e,6)._compositionEnd(t.target.value)&&l),"ngModelChange"===n&&(l=!1!==(i.filterText=t)&&l),l},null,null)),ci(6,16384,null,0,wp,[ct,rt,[2,Ap]],null,null),di(1024,null,yp,function(e){return[e]},[wp]),ci(8,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(10,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(11,0,null,null,2,"div",[["id","categories"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,cf)),ci(13,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,8,0,t.filterText),e(n,13,0,t.categories)},function(e,n){e(n,5,0,Ql(n,10).ngClassUntouched,Ql(n,10).ngClassTouched,Ql(n,10).ngClassPristine,Ql(n,10).ngClassDirty,Ql(n,10).ngClassValid,Ql(n,10).ngClassInvalid,Ql(n,10).ngClassPending)})}function df(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"app-resources",[],null,null,null,hf,nf)),ci(1,114688,null,0,ef,[Jm,Vm,zm,Ym],null,null)],function(e,n){e(n,1,0)},null)}var gf=Gl("app-resources",ef,df,{},{},[]);class pf{constructor(e,n,t,l,i,r=!1){this.canceled=!1,this.id=e,this.resource=n,this.amount=t,this.cost=l,this.craftingDifficulty=i,this.available=r}getResource(){return this.resource}}const mf=(()=>{class e{constructor(e,n){this.servicesService=e,this.resourcesService=n,this.recipes=[],e.addService(xu.RECIPE,this),this.initRecipes()}initRecipes(){this.recipes=[],Object.entries(oo.RECIPES).forEach(e=>{const n=new Map;e[1].COST.forEach(e=>n.set(e.resource,e.amount)),this.recipes.push(new pf(Mu[e[0]],e[1].RESOURCE,e[1].AMOUNT?e[1].AMOUNT:1,n,e[1].CRAFTING,!1))}),this.recipes.find(e=>e.id===Mu.PLANK).available=!0,this.recipes.find(e=>e.id===Mu.CUT_STONE).available=!0,zu.production||Object.values(Mu).filter(e=>!isNaN(e)).forEach(e=>this.enable(e))}getRecipes(){return this.recipes.filter(e=>e.available)}getRecipeById(e){return this.recipes.find(n=>n.id===e)}enable(e){const n=this.recipes.find(n=>n.id===e);this.resourcesService.makeVisible(n.getResource()),Array.from(n.cost.keys()).forEach(e=>this.resourcesService.makeVisible(e)),n.available=!0}disable(e){const n=this.recipes.find(n=>n.id===e);this.resourcesService.makeVisible(n.getResource()),n.available=!1}load(e){this.initRecipes(),e.recipes.forEach(e=>{const n=this.recipes.find(n=>n.id===e);n&&(n.available=!0)})}save(){return{recipes:this.recipes.filter(e=>e.available).map(e=>e.id)}}reset(e,n){this.initRecipes()}}return e.ngInjectableDef=de({factory:function(){return new e(Le(Mm),Le(Jm))},token:e,providedIn:"root"}),e})();let ff;try{ff="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(DD){ff=!1}const Sf=(()=>{class e{constructor(e){this._platformId=e,this.isBrowser=this._platformId?this._platformId===aa:"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!ff)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return e.ngInjectableDef=de({factory:function(){return new e(Le(Vi,8))},token:e,providedIn:"root"}),e})();let Ef;function vf(e){return function(){if(null==Ef&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Ef=!0}))}finally{Ef=Ef||!1}return Ef}()?e:!!e.capture}function bf(e){return null!=e&&"false"!==`${e}`}function Of(e){return e instanceof rt?e.nativeElement:e}function Rf(e,n,t,i){return l(t)&&(i=t,t=void 0),i?Rf(e,n,t).pipe(U(e=>o(e)?i(...e):i(e))):new O(l=>{!function e(n,t,l,i,r){let s;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(n)){const e=n;n.addEventListener(t,l,r),s=()=>e.removeEventListener(t,l,r)}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(n)){const e=n;n.on(t,l),s=()=>e.off(t,l)}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(n)){const e=n;n.addListener(t,l),s=()=>e.removeListener(t,l)}else{if(!n||!n.length)throw new TypeError("Invalid event target");for(let s=0,u=n.length;s<u;s++)e(n[s],t,l,i,r)}i.add(s)}(e,n,function(e){l.next(arguments.length>1?Array.prototype.slice.call(arguments):e)},l,t)})}class Tf extends d{constructor(e,n){super()}schedule(e,n=0){return this}}class Cf extends Tf{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){if(this.closed)return this;this.state=e;const t=this.id,l=this.scheduler;return null!=t&&(this.id=this.recycleAsyncId(l,t,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(l,this.id,n),this}requestAsyncId(e,n,t=0){return setInterval(e.flush.bind(e,this),t)}recycleAsyncId(e,n,t=0){if(null!==t&&this.delay===t&&!1===this.pending)return n;clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const t=this._execute(e,n);if(t)return t;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let t=!1,l=void 0;try{this.work(e)}catch(i){t=!0,l=!!i&&i||new Error(i)}if(t)return this.unsubscribe(),l}_unsubscribe(){const e=this.id,n=this.scheduler,t=n.actions,l=t.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==l&&t.splice(l,1),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null}}const If=(()=>{class e{constructor(n,t=e.now){this.SchedulerAction=n,this.now=t}schedule(e,n=0,t){return new this.SchedulerAction(this,e).schedule(t,n)}}return e.now=()=>Date.now(),e})();class yf extends If{constructor(e,n=If.now){super(e,()=>yf.delegate&&yf.delegate!==this?yf.delegate.now():n()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,n=0,t){return yf.delegate&&yf.delegate!==this?yf.delegate.schedule(e,n,t):super.schedule(e,n,t)}flush(e){const{actions:n}=this;if(this.active)return void n.push(e);let t;this.active=!0;do{if(t=e.execute(e.state,e.delay))break}while(e=n.shift());if(this.active=!1,t){for(;e=n.shift();)e.unsubscribe();throw t}}}const _f=new yf(Cf);class Af{constructor(e){this.durationSelector=e}call(e,n){return n.subscribe(new wf(e,this.durationSelector))}}class wf extends H{constructor(e,n){super(e),this.durationSelector=n,this.hasValue=!1}_next(e){if(this.value=e,this.hasValue=!0,!this.throttled){let t;try{const{durationSelector:l}=this;t=l(e)}catch(n){return this.destination.error(n)}const l=F(this,t);!l||l.closed?this.clearThrottle():this.add(this.throttled=l)}}clearThrottle(){const{value:e,hasValue:n,throttled:t}=this;t&&(this.remove(t),this.throttled=null,t.unsubscribe()),n&&(this.value=null,this.hasValue=!1,this.destination.next(e))}notifyNext(e,n,t,l){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function Nf(e){return!o(e)&&e-parseFloat(e)+1>=0}function Pf(e){const{index:n,period:t,subscriber:l}=e;if(l.next(n),!l.closed){if(-1===t)return l.complete();e.index=n+1,this.schedule(e,t)}}function kf(e){return n=>n.lift(new xf(e))}class xf{constructor(e){this.notifier=e}call(e,n){const t=new Mf(e),l=F(t,this.notifier);return l&&!t.seenValue?(t.add(l),n.subscribe(t)):t}}class Mf extends H{constructor(e){super(e),this.seenValue=!1}notifyNext(e,n,t,l,i){this.seenValue=!0,this.complete()}notifyComplete(){}}const Df=20,Lf=(()=>{class e{constructor(e,n){this._platform=e,n.runOutsideAngular(()=>{this._change=e.isBrowser?X(Rf(window,"resize"),Rf(window,"orientationchange")):da(),this._invalidateCache=this.change().subscribe(()=>this._updateViewportSize())})}ngOnDestroy(){this._invalidateCache.unsubscribe()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:n,height:t}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+t,right:e.left+n,height:t,width:n}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=document.documentElement,n=e.getBoundingClientRect();return{top:-n.top||document.body.scrollTop||window.scrollY||e.scrollTop||0,left:-n.left||document.body.scrollLeft||window.scrollX||e.scrollLeft||0}}change(e=Df){return e>0?this._change.pipe(function(e,n=_f){return t=()=>(function(e=0,n,t){let l=-1;return Nf(n)?l=Number(n)<1?1:Number(n):w(n)&&(t=n),w(t)||(t=_f),new O(n=>{const i=Nf(e)?e:+e-t.now();return t.schedule(Pf,i,{index:0,period:l,subscriber:n})})})(e,n),function(e){return e.lift(new Af(t))};var t}(e)):this._change}_updateViewportSize(){this._viewportSize=this._platform.isBrowser?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0}}}return e.ngInjectableDef=de({factory:function(){return new e(Le(Sf),Le(or))},token:e,providedIn:"root"}),e})();function Ff(e,n){for(let t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e}function Hf(e,n){const t=n?"":"none";Ff(e.style,{touchAction:n?"":"none",webkitUserDrag:n?"":"none",webkitTapHighlightColor:n?"":"transparent",userSelect:t,msUserSelect:t,webkitUserSelect:t,MozUserSelect:t})}function Uf(e){const n=e.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(e)*n}function Gf(e,n){return e.getPropertyValue(n).split(",").map(e=>e.trim())}const Bf=vf({passive:!0}),Wf=vf({passive:!1}),Vf=800;class zf{constructor(e,n,t,l,i,r){this._config=n,this._document=t,this._ngZone=l,this._viewportRuler=i,this._dragDropRegistry=r,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._moveEvents=new _,this._pointerMoveSubscription=d.EMPTY,this._pointerUpSubscription=d.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new _,this.started=new _,this.released=new _,this.ended=new _,this.entered=new _,this.exited=new _,this.dropped=new _,this.moved=this._moveEvents.asObservable(),this._pointerDown=e=>{if(this.beforeStarted.next(),this._handles.length){const n=this._handles.find(n=>{const t=e.target;return!!t&&(t===n||n.contains(t))});!n||this._disabledHandles.has(n)||this.disabled||this._initializeDragSequence(n,e)}else this.disabled||this._initializeDragSequence(this._rootElement,e)},this._pointerMove=e=>{if(!this._hasStartedDragging){const n=this._getPointerPositionOnPage(e);return void(Math.abs(n.x-this._pickupPositionOnPage.x)+Math.abs(n.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold&&Date.now()>=this._dragStartTime+(this.dragStartDelay||0)&&(this._dropContainer&&this._dropContainer.isDragging()||(this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(e)))))}this._boundaryElement&&(this._previewRect&&(this._previewRect.width||this._previewRect.height)||(this._previewRect=(this._preview||this._rootElement).getBoundingClientRect()));const n=this._getConstrainedPointerPosition(e);if(this._hasMoved=!0,e.preventDefault(),this._updatePointerDirectionDelta(n),this._dropContainer)this._updateActiveDropContainer(n);else{const e=this._activeTransform;e.x=n.x-this._pickupPositionOnPage.x+this._passiveTransform.x,e.y=n.y-this._pickupPositionOnPage.y+this._passiveTransform.y,this._applyRootElementTransform(e.x,e.y),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&this._rootElement.setAttribute("transform",`translate(${e.x} ${e.y})`)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:n,event:e,distance:this._getDragDistance(n),delta:this._pointerDirectionDelta})})},this._pointerUp=e=>{if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging)){if(this.released.next({source:this}),!this._dropContainer)return this._passiveTransform.x=this._activeTransform.x,this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(this._getPointerPositionOnPage(e))})}),void this._dragDropRegistry.stopDragging(this);this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._dragDropRegistry.stopDragging(this)})}},this.withRootElement(e),r.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(e){const n=bf(e);n!==this._disabled&&(this._disabled=n,this._toggleNativeDragInteractions())}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}withHandles(e){return this._handles=e.map(e=>Of(e)),this._handles.forEach(e=>Hf(e,!1)),this._toggleNativeDragInteractions(),this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){const n=Of(e);return n!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),n.addEventListener("mousedown",this._pointerDown,Wf),n.addEventListener("touchstart",this._pointerDown,Bf),this._initialTransform=void 0,this._rootElement=n),this}withBoundaryElement(e){return this._boundaryElement=e?Of(e):null,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&jf(this._rootElement),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._boundaryElement=this._rootElement=this._placeholderTemplate=this._previewTemplate=this._nextSibling=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(e){this._handles.indexOf(e)>-1&&this._disabledHandles.add(e)}enableHandle(e){this._disabledHandles.delete(e)}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){return{x:this._passiveTransform.x,y:this._passiveTransform.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe()}_destroyPreview(){this._preview&&jf(this._preview),this._previewRef&&this._previewRef.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder&&jf(this._placeholder),this._placeholderRef&&this._placeholderRef.destroy(),this._placeholder=this._placeholderRef=null}_startDragSequence(e){if(this.started.next({source:this}),qf(e)&&(this._lastTouchEventTime=Date.now()),this._dropContainer){const e=this._rootElement;this._nextSibling=e.nextSibling;const t=this._preview=this._createPreviewElement(),l=this._placeholder=this._createPlaceholderElement();e.style.display="none",this._document.body.appendChild(e.parentNode.replaceChild(l,e)),(n=this._document,n.fullscreenElement||n.webkitFullscreenElement||n.mozFullScreenElement||n.msFullscreenElement||n.body).appendChild(t),this._dropContainer.start()}var n}_initializeDragSequence(e,n){n.stopPropagation();const t=this.isDragging(),l=qf(n),i=!l&&0!==n.button,r=this._rootElement,s=!l&&this._lastTouchEventTime&&this._lastTouchEventTime+Vf>Date.now();if(n.target&&n.target.draggable&&"mousedown"===n.type&&n.preventDefault(),t||i||s)return;this._handles.length&&(this._rootElementTapHighlight=r.style.webkitTapHighlightColor,r.style.webkitTapHighlightColor="transparent"),this._toggleNativeDragInteractions(),this._hasStartedDragging=this._hasMoved=!1,this._initialContainer=this._dropContainer,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollPosition=this._viewportRuler.getViewportScrollPosition(),this._boundaryElement&&(this._boundaryRect=this._boundaryElement.getBoundingClientRect()),this._pickupPositionInElement=this._previewTemplate&&this._previewTemplate.template?{x:0,y:0}:this._getPointerPositionInElement(e,n);const u=this._pickupPositionOnPage=this._getPointerPositionOnPage(n);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:u.x,y:u.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,n)}_cleanupDragArtifacts(e){this._rootElement.style.display="",this._nextSibling?this._nextSibling.parentNode.insertBefore(this._rootElement,this._nextSibling):Of(this._initialContainer.element).appendChild(this._rootElement),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=void 0,this._ngZone.run(()=>{const n=this._dropContainer,t=n.getItemIndex(this),l=this._getPointerPositionOnPage(e),i=this._getDragDistance(this._getPointerPositionOnPage(e)),r=n._isOverContainer(l.x,l.y);this.ended.next({source:this,distance:i}),this.dropped.next({item:this,currentIndex:t,previousIndex:this._initialContainer.getItemIndex(this),container:n,previousContainer:this._initialContainer,isPointerOverContainer:r,distance:i}),n.drop(this,t,this._initialContainer,r,i),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:n}){let t=this._initialContainer._getSiblingContainerFromPosition(this,e,n);!t&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,n)&&(t=this._initialContainer),t&&t!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=t,this._dropContainer.enter(this,e,n),this.entered.next({item:this,container:t,currentIndex:t.getItemIndex(this)})}),this._dropContainer._sortItem(this,e,n,this._pointerDirectionDelta),this._preview.style.transform=Yf(e-this._pickupPositionInElement.x,n-this._pickupPositionInElement.y)}_createPreviewElement(){const e=this._previewTemplate,n=e?e.template:null;let t;if(n){const l=e.viewContainer.createEmbeddedView(n,e.context);t=l.rootNodes[0],this._previewRef=l,t.style.transform=Yf(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{const e=this._rootElement,n=e.getBoundingClientRect();(t=$f(e)).style.width=`${n.width}px`,t.style.height=`${n.height}px`,t.style.transform=Yf(n.left,n.top)}return Ff(t.style,{pointerEvents:"none",position:"fixed",top:"0",left:"0",zIndex:"1000"}),Hf(t,!1),t.classList.add("cdk-drag-preview"),t.setAttribute("dir",this._direction),t}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const e=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._preview.style.transform=Yf(e.left,e.top);const n=function(e){const n=getComputedStyle(e),t=Gf(n,"transition-property"),l=t.find(e=>"transform"===e||"all"===e);if(!l)return 0;const i=t.indexOf(l),r=Gf(n,"transition-duration"),s=Gf(n,"transition-delay");return Uf(r[i])+Uf(s[i])}(this._preview);return 0===n?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(e=>{const t=n=>{(!n||n.target===this._preview&&"transform"===n.propertyName)&&(this._preview.removeEventListener("transitionend",t),e(),clearTimeout(l))},l=setTimeout(t,1.5*n);this._preview.addEventListener("transitionend",t)}))}_createPlaceholderElement(){const e=this._placeholderTemplate,n=e?e.template:null;let t;return n?(this._placeholderRef=e.viewContainer.createEmbeddedView(n,e.context),t=this._placeholderRef.rootNodes[0]):t=$f(this._rootElement),t.classList.add("cdk-drag-placeholder"),t}_getPointerPositionInElement(e,n){const t=this._rootElement.getBoundingClientRect(),l=e===this._rootElement?null:e,i=l?l.getBoundingClientRect():t,r=qf(n)?n.targetTouches[0]:n;return{x:i.left-t.left+(r.pageX-i.left-this._scrollPosition.left),y:i.top-t.top+(r.pageY-i.top-this._scrollPosition.top)}}_getPointerPositionOnPage(e){const n=qf(e)?e.touches[0]||e.changedTouches[0]:e;return{x:n.pageX-this._scrollPosition.left,y:n.pageY-this._scrollPosition.top}}_getConstrainedPointerPosition(e){const n=this._getPointerPositionOnPage(e),t=this.constrainPosition?this.constrainPosition(n):n,l=this._dropContainer?this._dropContainer.lockAxis:null;if("x"===this.lockAxis||"x"===l?t.y=this._pickupPositionOnPage.y:"y"!==this.lockAxis&&"y"!==l||(t.x=this._pickupPositionOnPage.x),this._boundaryRect){const{x:e,y:n}=this._pickupPositionInElement,l=this._boundaryRect,i=this._previewRect,r=l.top+n,s=l.bottom-(i.height-n);t.x=Kf(t.x,l.left+e,l.right-(i.width-e)),t.y=Kf(t.y,r,s)}return t}_updatePointerDirectionDelta(e){const{x:n,y:t}=e,l=this._pointerDirectionDelta,i=this._pointerPositionAtLastDirectionChange,r=Math.abs(n-i.x),s=Math.abs(t-i.y);return r>this._config.pointerDirectionChangeThreshold&&(l.x=n>i.x?1:-1,i.x=n),s>this._config.pointerDirectionChangeThreshold&&(l.y=t>i.y?1:-1,i.y=t),l}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const e=this.disabled||this._handles.length>0;e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,Hf(this._rootElement,e))}_removeRootElementListeners(e){e.removeEventListener("mousedown",this._pointerDown,Wf),e.removeEventListener("touchstart",this._pointerDown,Bf)}_applyRootElementTransform(e,n){const t=Yf(e,n);null==this._initialTransform&&(this._initialTransform=this._rootElement.style.transform||""),this._rootElement.style.transform=this._initialTransform?t+" "+this._initialTransform:t}_getDragDistance(e){const n=this._pickupPositionOnPage;return n?{x:e.x-n.x,y:e.y-n.y}:{x:0,y:0}}}function Yf(e,n){return`translate3d(${Math.round(e)}px, ${Math.round(n)}px, 0)`}function $f(e){const n=e.cloneNode(!0),t=n.querySelectorAll("[id]"),l=e.querySelectorAll("canvas");n.removeAttribute("id");for(let i=0;i<t.length;i++)t[i].removeAttribute("id");if(l.length){const e=n.querySelectorAll("canvas");for(let n=0;n<l.length;n++){const t=e[n].getContext("2d");t&&t.drawImage(l[n],0,0)}}return n}function Kf(e,n,t){return Math.max(n,Math.min(t,e))}function jf(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function qf(e){return"t"===e.type[0]}function Xf(e,n,t){const l=Qf(n,e.length-1),i=Qf(t,e.length-1);if(l===i)return;const r=e[l],s=i<l?-1:1;for(let u=l;u!==i;u+=s)e[u]=e[u+s];e[i]=r}function Qf(e,n){return Math.max(0,Math.min(n,e))}let Zf=0;const Jf=.05;class eS{constructor(e,n,t){this._dragDropRegistry=n,this.id=`cdk-drop-list-ref-${Zf++}`,this.disabled=!1,this.sortingDisabled=!0,this.enterPredicate=()=>!0,this.beforeStarted=new _,this.entered=new _,this.exited=new _,this.dropped=new _,this.sorted=new _,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0},this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",n.registerDropContainer(this),this._document=t,this.element=e instanceof rt?e.nativeElement:e}dispose(){this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this.beforeStarted.next(),this._isDragging=!0,this._cacheItems(),this._siblings.forEach(e=>e._startReceiving(this))}enter(e,n,t){this.start();let l=this.sortingDisabled?this._draggables.indexOf(e):-1;-1===l&&(l=this._getItemIndexFromPointerPosition(e,n,t));const i=this._activeDraggables,r=i.indexOf(e),s=e.getPlaceholderElement();let u=i[l];if(u===e&&(u=i[l+1]),r>-1&&i.splice(r,1),u&&!this._dragDropRegistry.isDragging(u)){const n=u.getRootElement();n.parentElement.insertBefore(s,n),i.splice(l,0,e)}else Of(this.element).appendChild(s),i.push(e);s.style.transform="",this._cacheItemPositions(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,n,t,l,i={x:0,y:0}){this._reset(),this.dropped.next({item:e,currentIndex:n,previousIndex:t.getItemIndex(e),container:this,previousContainer:t,isPointerOverContainer:l,distance:i})}withItems(e){return this._draggables=e,e.forEach(e=>e._withDropContainer(this)),this.isDragging()&&this._cacheItems(),this}withDirection(e){return this._direction=e,this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){return this._orientation=e,this}getItemIndex(e){return this._isDragging?tS("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions,n=>n.drag===e):this._draggables.indexOf(e)}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,n,t,l){if(this.sortingDisabled||!this._isPointerNearDropContainer(n,t))return;const i=this._itemPositions,r=this._getItemIndexFromPointerPosition(e,n,t,l);if(-1===r&&i.length>0)return;const s="horizontal"===this._orientation,u=tS(i,n=>n.drag===e),o=i[r],a=i[u].clientRect,c=o.clientRect,h=u>r?1:-1;this._previousSwap.drag=o.drag,this._previousSwap.delta=s?l.x:l.y;const d=this._getItemOffsetPx(a,c,h),g=this._getSiblingOffsetPx(u,i,h),p=i.slice();Xf(i,u,r),this.sorted.next({previousIndex:u,currentIndex:r,container:this,item:e}),i.forEach((n,t)=>{if(p[t]===n)return;const l=n.drag===e,i=l?d:g,r=l?e.getPlaceholderElement():n.drag.getRootElement();n.offset+=i,s?(r.style.transform=`translate3d(${Math.round(n.offset)}px, 0, 0)`,nS(n.clientRect,0,i)):(r.style.transform=`translate3d(0, ${Math.round(n.offset)}px, 0)`,nS(n.clientRect,i,0))})}_cacheOwnPosition(){this._clientRect=Of(this.element).getBoundingClientRect()}_cacheItemPositions(){const e="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(e=>{const n=(this._dragDropRegistry.isDragging(e)?e.getPlaceholderElement():e.getRootElement()).getBoundingClientRect();return{drag:e,offset:0,clientRect:{top:n.top,right:n.right,bottom:n.bottom,left:n.left,width:n.width,height:n.height}}}).sort((n,t)=>e?n.clientRect.left-t.clientRect.left:n.clientRect.top-t.clientRect.top)}_reset(){this._isDragging=!1,this._activeDraggables.forEach(e=>e.getRootElement().style.transform=""),this._siblings.forEach(e=>e._stopReceiving(this)),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0}_getSiblingOffsetPx(e,n,t){const l="horizontal"===this._orientation,i=n[e].clientRect,r=n[e+-1*t];let s=i[l?"width":"height"]*t;if(r){const e=l?"left":"top",n=l?"right":"bottom";-1===t?s-=r.clientRect[e]-i[n]:s+=i[e]-r.clientRect[n]}return s}_isPointerNearDropContainer(e,n){const{top:t,right:l,bottom:i,left:r,width:s,height:u}=this._clientRect,o=s*Jf,a=u*Jf;return n>t-a&&n<i+a&&e>r-o&&e<l+o}_getItemOffsetPx(e,n,t){const l="horizontal"===this._orientation;let i=l?n.left-e.left:n.top-e.top;return-1===t&&(i+=l?n.width-e.width:n.height-e.height),i}_getItemIndexFromPointerPosition(e,n,t,l){const i="horizontal"===this._orientation;return tS(this._itemPositions,({drag:r,clientRect:s},u,o)=>{if(r===e)return o.length<2;if(l){const e=i?l.x:l.y;if(r===this._previousSwap.drag&&e===this._previousSwap.delta)return!1}return i?n>=Math.floor(s.left)&&n<=Math.floor(s.right):t>=Math.floor(s.top)&&t<=Math.floor(s.bottom)})}_cacheItems(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheOwnPosition()}_isOverContainer(e,n){return lS(this._clientRect,e,n)}_getSiblingContainerFromPosition(e,n,t){return this._siblings.find(l=>l._canReceive(e,n,t))}_canReceive(e,n,t){if(!this.enterPredicate(e,this)||!lS(this._clientRect,n,t))return!1;const l=this._document.elementFromPoint(n,t);if(!l)return!1;const i=Of(this.element);return l===i||i.contains(l)}_startReceiving(e){const n=this._activeSiblings;n.has(e)||(n.add(e),this._cacheOwnPosition())}_stopReceiving(e){this._activeSiblings.delete(e)}}function nS(e,n,t){e.top+=n,e.bottom=e.top+e.height,e.left+=t,e.right=e.left+e.width}function tS(e,n){for(let t=0;t<e.length;t++)if(n(e[t],t,e))return t;return-1}function lS(e,n,t){const{top:l,bottom:i,left:r,right:s}=e;return t>=l&&t<=i&&n>=r&&n<=s}const iS=vf({passive:!1,capture:!0}),rS=(()=>{class e{constructor(e,n){this._ngZone=e,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=new Set,this._globalListeners=new Map,this.pointerMove=new _,this.pointerUp=new _,this._preventDefaultWhileDragging=e=>{this._activeDragInstances.size&&e.preventDefault()},this._document=n}registerDropContainer(e){if(!this._dropInstances.has(e)){if(this.getDropContainer(e.id))throw Error(`Drop instance with id "${e.id}" has already been registered.`);this._dropInstances.add(e)}}registerDragItem(e){this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._preventDefaultWhileDragging,iS)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._preventDefaultWhileDragging,iS)}startDragging(e,n){if(!this._activeDragInstances.has(e)&&(this._activeDragInstances.add(e),1===this._activeDragInstances.size)){const e=n.type.startsWith("touch"),t=e?"touchend":"mouseup";this._globalListeners.set(e?"touchmove":"mousemove",{handler:e=>this.pointerMove.next(e),options:iS}).set(t,{handler:e=>this.pointerUp.next(e),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:iS}),e||this._globalListeners.set("wheel",{handler:this._preventDefaultWhileDragging,options:iS}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((e,n)=>{this._document.addEventListener(n,e.handler,e.options)})})}}stopDragging(e){this._activeDragInstances.delete(e),0===this._activeDragInstances.size&&this._clearGlobalListeners()}isDragging(e){return this._activeDragInstances.has(e)}getDropContainer(e){return Array.from(this._dropInstances).find(n=>n.id===e)}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((e,n)=>{this._document.removeEventListener(n,e.handler,e.options)}),this._globalListeners.clear()}}return e.ngInjectableDef=de({factory:function(){return new e(Le(or),Le(oa))},token:e,providedIn:"root"}),e})(),sS={dragStartThreshold:5,pointerDirectionChangeThreshold:5},uS=(()=>{class e{constructor(e,n,t,l){this._document=e,this._ngZone=n,this._viewportRuler=t,this._dragDropRegistry=l}createDrag(e,n=sS){return new zf(e,n,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(e){return new eS(e,this._dragDropRegistry,this._document)}}return e.ngInjectableDef=de({factory:function(){return new e(Le(oa),Le(or),Le(Lf),Le(rS))},token:e,providedIn:"root"}),e})(),oS=new Ce("CDK_DROP_LIST"),aS=new Ce("CDK_DRAG_PARENT"),cS=new Ce("CDK_DRAG_CONFIG",{providedIn:"root",factory:function(){return{dragStartThreshold:5,pointerDirectionChangeThreshold:5}}}),hS=(()=>(class{constructor(e,n,t,l,i,r,s,u,o){this.element=e,this.dropContainer=n,this._document=t,this._ngZone=l,this._viewContainerRef=i,this._dir=s,this._changeDetectorRef=o,this._destroyed=new _,this.dragStartDelay=0,this._disabled=!1,this.started=new Mi,this.released=new Mi,this.ended=new Mi,this.entered=new Mi,this.exited=new Mi,this.dropped=new Mi,this.moved=new O(e=>{const n=this._dragRef.moved.pipe(U(e=>({source:this,pointerPosition:e.pointerPosition,event:e.event,delta:e.delta,distance:e.distance}))).subscribe(e);return()=>{n.unsubscribe()}}),this._dragRef=u.createDrag(e,r),this._dragRef.data=this,this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}get boundaryElementSelector(){return"string"==typeof this.boundaryElement?this.boundaryElement:void 0}set boundaryElementSelector(e){this.boundaryElement=e}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(e){this._disabled=bf(e),this._dragRef.disabled=this._disabled}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}ngAfterViewInit(){this._ngZone.onStable.asObservable().pipe(Ba(1),kf(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._handles.changes.pipe(Qa(this._handles),tc(e=>{const n=e.filter(e=>e._parentDrag===this).map(e=>e.element);this._dragRef.withHandles(n)}),Ka(e=>X(...e.map(e=>e._stateChanges))),kf(this._destroyed)).subscribe(e=>{const n=this._dragRef,t=e.element.nativeElement;e.disabled?n.disableHandle(t):n.enableHandle(t)}),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})}ngOnChanges(e){const n=e.rootElementSelector,t=e.freeDragPosition;n&&!n.firstChange&&this._updateRootElement(),t&&!t.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()}_updateRootElement(){const e=this.element.nativeElement,n=this.rootElementSelector?dS(e,this.rootElementSelector):e;if(n&&n.nodeType!==this._document.ELEMENT_NODE)throw Error("cdkDrag must be attached to an element node. "+`Currently attached to "${n.nodeName}".`);this._dragRef.withRootElement(n||e)}_getBoundaryElement(){const e=this.boundaryElement;if(!e)return null;if("string"==typeof e)return dS(this.element.nativeElement,e);const n=Of(e);if(sn()&&!n.contains(this.element.nativeElement))throw Error("Draggable element is not inside of the node passed into cdkDragBoundary.");return n}_syncInputs(e){e.beforeStarted.subscribe(()=>{if(!e.isDragging()){const n=this._dir,t=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,l=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,viewContainer:this._viewContainerRef}:null;e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.dragStartDelay=function(e,n=0){return function(e){return!isNaN(parseFloat(e))&&!isNaN(Number(e))}(e)?Number(e):n}(this.dragStartDelay),e.constrainPosition=this.constrainPosition,e.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(t).withPreviewTemplate(l),n&&e.withDirection(n.value)}})}_handleEvents(e){e.started.subscribe(()=>{this.started.emit({source:this}),this._changeDetectorRef.markForCheck()}),e.released.subscribe(()=>{this.released.emit({source:this})}),e.ended.subscribe(e=>{this.ended.emit({source:this,distance:e.distance}),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(e=>{this.entered.emit({container:e.container.data,item:this,currentIndex:e.currentIndex})}),e.exited.subscribe(e=>{this.exited.emit({container:e.container.data,item:this})}),e.dropped.subscribe(e=>{this.dropped.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,previousContainer:e.previousContainer.data,container:e.container.data,isPointerOverContainer:e.isPointerOverContainer,item:this,distance:e.distance})})}}))();function dS(e,n){let t=e.parentElement;for(;t;){if(t.matches?t.matches(n):t.msMatchesSelector(n))return t;t=t.parentElement}return null}const gS=(()=>(class{constructor(){this._items=new Set,this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=bf(e)}ngOnDestroy(){this._items.clear()}}))();let pS=0;const mS=(()=>{class e{constructor(n,t,l,i,r){this.element=n,this._changeDetectorRef=l,this._dir=i,this._group=r,this._destroyed=new _,this.connectedTo=[],this.orientation="vertical",this.id=`cdk-drop-list-${pS++}`,this._disabled=!1,this._sortingDisabled=!1,this.enterPredicate=()=>!0,this.dropped=new Mi,this.entered=new Mi,this.exited=new Mi,this.sorted=new Mi,this._dropListRef=t.createDropList(n),this._dropListRef.data=this,this._dropListRef.enterPredicate=(e,n)=>this.enterPredicate(e.data,n.data),this._syncInputs(this._dropListRef),this._handleEvents(this._dropListRef),e._dropLists.push(this),r&&r._items.add(this)}get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(e){this._disabled=bf(e)}get sortingDisabled(){return this._sortingDisabled}set sortingDisabled(e){this._sortingDisabled=bf(e)}ngAfterContentInit(){this._draggables.changes.pipe(Qa(this._draggables),kf(this._destroyed)).subscribe(e=>{this._dropListRef.withItems(e.map(e=>e._dragRef))})}ngOnDestroy(){const n=e._dropLists.indexOf(this);n>-1&&e._dropLists.splice(n,1),this._group&&this._group._items.delete(this),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}start(){this._dropListRef.start()}drop(e,n,t,l){this._dropListRef.drop(e._dragRef,n,t._dropListRef,l)}enter(e,n,t){this._dropListRef.enter(e._dragRef,n,t)}exit(e){this._dropListRef.exit(e._dragRef)}getItemIndex(e){return this._dropListRef.getItemIndex(e._dragRef)}_sortItem(e,n,t,l){return this._dropListRef._sortItem(e._dragRef,n,t,l)}_getSiblingContainerFromPosition(e,n,t){const l=this._dropListRef._getSiblingContainerFromPosition(e._dragRef,n,t);return l?l.data:null}_isOverContainer(e,n){return this._dropListRef._isOverContainer(e,n)}_syncInputs(n){this._dir&&this._dir.change.pipe(Qa(this._dir.value),kf(this._destroyed)).subscribe(e=>n.withDirection(e)),n.beforeStarted.subscribe(()=>{const t=function(e){return Array.isArray(e)?e:[e]}(this.connectedTo).map(n=>"string"==typeof n?e._dropLists.find(e=>e.id===n):n);this._group&&this._group._items.forEach(e=>{-1===t.indexOf(e)&&t.push(e)}),n.disabled=this.disabled,n.lockAxis=this.lockAxis,n.sortingDisabled=this.sortingDisabled,n.connectedTo(t.filter(e=>e&&e!==this).map(e=>e._dropListRef)).withOrientation(this.orientation)})}_handleEvents(e){e.beforeStarted.subscribe(()=>{this._changeDetectorRef.markForCheck()}),e.entered.subscribe(e=>{this.entered.emit({container:this,item:e.item.data,currentIndex:e.currentIndex})}),e.exited.subscribe(e=>{this.exited.emit({container:this,item:e.item.data}),this._changeDetectorRef.markForCheck()}),e.sorted.subscribe(e=>{this.sorted.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,container:this,item:e.item.data})}),e.dropped.subscribe(e=>{this.dropped.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,previousContainer:e.previousContainer.data,container:e.container.data,item:e.item.data,isPointerOverContainer:e.isPointerOverContainer,distance:e.distance}),this._changeDetectorRef.markForCheck()})}}return e._dropLists=[],e})(),fS=(()=>(class{}))();var SS=function(e){return e[e.NONE=0]="NONE",e[e.SELECTED=1]="SELECTED",e[e.UNTIL_X=2]="UNTIL_X",e[e.CONTINUOUS=3]="CONTINUOUS",e}({});const ES=(()=>{class e{constructor(e,n,t,l){this.resourcesService=e,this.servicesService=n,this.recipeService=t,this.modalService=l,this.recipeUpdate=new _,this.queue=[],this.id=1,this.queueSize=oo.START_QUEUE_SIZE,n.addService(xu.CRAFTING,this)}craft(e,n,t){this.queue.length>=this.queueSize?this.modalService.info("Order queue is full"):this.queue.push({id:this.nextId(),recipe:e,amount:n,type:t})}getQueue(){return this.queue}getOrder(){const e=this.queue.find(e=>{if(e.type===SS.SELECTED&&e.amount>0&&this.resourcesService.hasResources(e.recipe.cost,"Crafting")){let n=0;this.servicesService.getService(xu.VILLAGE).buildings.filter(e=>e.getBuildingType()===Ou.WORKSHOP).forEach(t=>{t.getRecipe()&&t.getRecipe().id===e.recipe.id&&(n+=e.recipe.amount)});const t=this.resourcesService.getResource(e.recipe.resource);return t.amount+n<t.limit}if(e.type===SS.UNTIL_X&&this.resourcesService.hasResources(e.recipe.cost,"Crafting")){let n=0;this.servicesService.getService(xu.VILLAGE).buildings.filter(e=>e.getBuildingType()===Ou.WORKSHOP).forEach(t=>{t.getRecipe()&&t.getRecipe().id===e.recipe.id&&(n+=e.recipe.amount)});const t=this.resourcesService.getResource(e.recipe.resource);return t.limit<e.amount?t.amount+n<t.limit:t.amount+n<e.amount}if(e.type===SS.CONTINUOUS&&this.resourcesService.hasResources(e.recipe.cost,"Crafting")){let n=0;this.servicesService.getService(xu.VILLAGE).buildings.filter(e=>e.getBuildingType()===Ou.WORKSHOP).forEach(t=>{t.getRecipe()&&t.getRecipe().id===e.recipe.id&&(n+=e.recipe.amount)});const t=this.resourcesService.getResource(e.recipe.resource);return t.amount+n<t.limit}});return e?(this.resourcesService.decreaseResources(e.recipe.cost,"Crafting"),e.type===SS.SELECTED&&(e.amount-=1),this.queue=this.queue.filter(e=>e.type!==SS.SELECTED||e.amount>0),e.recipe):null}load(e){this.queue=[],Array.from(e.queue).forEach(e=>{this.queue.push({id:this.nextId(),recipe:this.recipeService.getRecipeById(e.recipeId),amount:e.amount,type:e.type})}),this.queueSize=e.queueSize}save(){return{queue:this.queue.map(e=>({recipeId:e.recipe.id,amount:e.amount,type:e.type})),queueSize:this.queueSize}}reset(e,n){this.queue=[],this.id=1,this.queueSize=oo.START_QUEUE_SIZE}registerForUpdate(){return this.recipeUpdate.asObservable()}cancel(e,n=!1){const t=this.queue.find(n=>n.id===e);if(t&&!n){this.modalService.open(Lu.CONFIRM),this.modalService.setModalText("Are you sure you want to cancel crafting "+Pu.prepareResourceName(t.recipe.resource)+"?");const n=this.modalService.registerForConfirmation().subscribe(t=>{t&&(this.queue=this.queue.filter(n=>n.id!==e),this.recipeUpdate.next()),n.unsubscribe()})}else t&&n&&(this.queue=this.queue.filter(n=>n.id!==e),this.recipeUpdate.next())}nextId(){const e=this.id;return this.id++,e}moveRecipeInQueue(e){Xf(this.queue,e.previousIndex,e.currentIndex)}getQueueMaxSize(){return this.queueSize}increaseQueueSize(e){this.queueSize+=e}filterQueue(e){this.queue.forEach(n=>{e.includes(n.recipe.id)&&this.cancel(n.id,!0)})}decreaseQueueSize(e){this.queueSize-=e}}return e.ngInjectableDef=de({factory:function(){return new e(Le(Jm),Le(Mm),Le(mf),Le(Vm))},token:e,providedIn:"root"}),e})();var vS=function(e){return e[e.FIRST=0]="FIRST",e[e.SECOND=1]="SECOND",e[e.THIRD=2]="THIRD",e[e.FOURTH=3]="FOURTH",e}({}),bS=function(e){return e[e.TEXT=0]="TEXT",e[e.PROGRESS_BAR=1]="PROGRESS_BAR",e[e.BUTTON=2]="BUTTON",e[e.BUTTON_CHECKBOX=3]="BUTTON_CHECKBOX",e[e.TWO_BUTTON=4]="TWO_BUTTON",e[e.DROPDOWN=5]="DROPDOWN",e[e.ICON=6]="ICON",e}({});class OS{constructor(e,n){this.valueType=e,this.value=n}static emptyValue(){return new OS(bS.TEXT,"")}static textValue(e){return new OS(bS.TEXT,e)}static progressValue(e,n=""){return new OS(bS.PROGRESS_BAR,{value:e,label:n})}static buttonValue(e,n){return new OS(bS.BUTTON,{buttonText:e,callbackValue:n})}static buttonCheckboxValue(e,n,t,l,i){return new OS(bS.BUTTON_CHECKBOX,{buttonText:e,callbackValue:n,checkboxState:l,checkboxLabel:t,checkboxCallbackValue:i})}static twoButtonValue(e,n,t,l,i){return new OS(bS.TWO_BUTTON,{button1Text:e,callback1Value:n,textBetween:t,button2Text:l,callback2Value:i})}static dropdownValue(e,n){return new OS(bS.DROPDOWN,{values:e,selected:n})}static iconValue(e){return new OS(bS.ICON,e)}getValueType(){return this.valueType}getValue(){return this.value}}class RS{constructor(e,n,t,l){this.name=e,this.effect=n,this.duration=t,this.cost=l}}class TS{constructor(e,n,t,l,i,r,s,u){this.servicesService=t,this.id=e,this.buildingType=n,this.demolishable=r,this.settings=l,this.stoppable=s,this.working=i,this.level=u,this.size=l.SIZE,this.complexity=l.COMPLEXITY,t&&(this.resourcesService=t.getService(xu.RESOURCES),this.effectsService=t.getService(xu.EFFECTS),this.happinessService=t.getService(xu.HAPPINESS),this.gameService=t.getService(xu.GAME),this.logService=t.getService(xu.LOG),this.modalService=t.getService(xu.MODAL),this.weatherService=t.getService(xu.WEATHER))}build(){return this.startProduction(),this}getBuildingId(){return this.id}callback(e){}finishDemolish(){Array.from(this.getCost().entries()).forEach(e=>this.resourcesService.increaseResource(e[0],Math.floor(.3*e[1]),"Demolition"))}fireWorker(){return!!this.working&&(this.resourcesService.fireWorker(),this.working=!1,!0)}getBuildingType(){return this.buildingType}getComplexity(){return this.complexity}getCost(){const e=new Map;return this.settings.COST.forEach(n=>e.set(n.resource,n.amount)),e}getDescription(){return this.settings.DESCRIPTION}hasDetails(){return!0}getDetails(){let e="";(this.getBuildingLevel()>1||this.hasUpgrade())&&(e+="building level: "+this.level+"<br>");let n=0;return 1===this.level||this.buildingType===Ou.CONSTRUCTION?n=this.settings.BASE_POWER:this.settings.UPGRADES&&(n=this.settings.UPGRADES[this.level-2].BASE_POWER),e+="building base power: "+n+"<br>",this.getPower()%1==0?e+="building power: "+this.getPower()+"<br>":e+="building power: "+Pu.round(this.getPower(),2)+"<br>",0!==this.getPermanentEffects()&&(e+="permanent effects: "+this.getPermanentEffects()+"%<br>"),0!==this.getEffects()&&(e+="temporary effects: "+this.getEffects()+"%<br>"),0!==this.getHappinessEffect()&&(e+="happiness effects: "+this.getHappinessEffect()+"%<br>"),0!==this.getWeatherMultiplier()&&(e+="weather multiplier: "+this.getWeatherMultiplier()+"%<br>"),e}getEffects(){return this.effectsService.getBuildingEffectsValue(this.buildingType,!1,this.id)}getPermanentEffects(){return this.effectsService.getBuildingEffectsValue(this.buildingType,!0)}getHappinessEffect(){return this.happinessService.getHappinessEffect()}getWeatherMultiplier(){const e=(this.settings.WEATHER?this.settings.WEATHER:[]).find(e=>this.weatherService.isWeather(e.weather));return e?e.effect:0}getDisplayableEffectsValue(){let e=0;return 1===this.level||this.buildingType===Ou.CONSTRUCTION?e=this.settings.BASE_POWER:this.settings.UPGRADES&&(e=this.settings.UPGRADES[this.level-2].BASE_POWER),Number(Pu.round(100*(this.getPower()/e-1),2))}getPower(){let e=0;return 1===this.level||this.buildingType===Ou.CONSTRUCTION?e=this.settings.BASE_POWER:this.settings.UPGRADES&&(e=this.settings.UPGRADES[this.level-2].BASE_POWER),e*(1+(this.getPermanentEffects()+this.getEffects()+this.getHappinessEffect())/100)*(1+this.getWeatherMultiplier()/100)}isUsedUp(){return!1}getLine(e){switch(e){case vS.FIRST:case vS.SECOND:case vS.THIRD:case vS.FOURTH:return OS.emptyValue()}}getName(){return Pu.titleCase(Pu.prepareBuildingName(this.buildingType))}getSize(){return this.size}buildOnMountain(){return!1}getWorkers(){return this.working?1:0}hireWorker(){return!(this.working||!this.resourcesService.hireWorker()||(this.working=!0,0))}isDemolishable(){return this.demolishable}isStoppable(){return this.stoppable}isComplexManagement(){return!1}getWorkSettings(){return null}setWorkSettings(e){}isWorking(){return this.working}prepareDemolish(){return this.stopProduction(),!0}startProduction(){return!(this.working||!this.resourcesService.hireWorker()||(this.working=!0,0))}stopProduction(){this.working&&(this.resourcesService.fireWorker(),this.working=!1)}tick(e){}isCombinable(){return!1}isSplittable(){return!1}hasBuff(){return this.settings.BUFF}isBuffed(){return!!this.hasBuff()&&this.effectsService.getBuildingEffects(this.buildingType).filter(e=>e.buff===this.id).length>0}getBuff(){if(this.settings.BUFF){const e=new Map;return this.settings.BUFF.cost.forEach(n=>e.set(n.resource,n.amount)),new RS(this.settings.BUFF.name,this.settings.BUFF.effect,this.settings.BUFF.duration,e)}return null}hasUpgrade(){if(this.settings.UPGRADES&&this.settings.UPGRADES.length>=this.getBuildingLevel()){if(this.settings.UPGRADES[this.getBuildingLevel()-1].PREREQUISITES){let e=!0;return this.settings.UPGRADES[this.getBuildingLevel()-1].PREREQUISITES.forEach(n=>{this.gameService.isEnabled(n)||(e=!1)}),e}return!0}return!1}getUpgradeCost(){const e=new Map;return this.hasUpgrade()&&this.settings.UPGRADES[this.level-1].COST.forEach(n=>e.set(n.resource,n.amount)),e}setBuildingLevel(e){this.level=e}getBuildingLevel(){return this.level}getBuildingData(){return null}setBuildingData(e){}}class CS extends TS{constructor(e=null,n,t,l,i,r,s,u,o,a){super(n,t,e,l,!1,!0,!1,a),this.occupants=i,this.progress=r,this.food=s,this.fuel=u,this.clothes=o,this.maxSize=l.MAX_OCCUPANTS,this.servicesService&&(this.villageService=e.getService(xu.VILLAGE),this.weatherService=e.getService(xu.WEATHER),this.religionService=e.getService(xu.RELIGION),this.managementService=e.getService(xu.MANAGEMENT))}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,occupants:this.occupants,maxSize:this.maxSize,progress:this.progress,food:this.food,fuel:this.fuel,clothes:this.clothes}}getLine(e){switch(e){case vS.FIRST:return OS.textValue("occupants: "+this.occupants+"/"+this.maxSize);case vS.SECOND:return OS.progressValue(this.occupants<this.maxSize?this.progress:-1);case vS.THIRD:return this.food>0?OS.emptyValue():OS.progressValue(Math.abs(this.food),"famine");case vS.FOURTH:return this.fuel>=0?this.weatherService.getCurrentTemperature()<10&&this.occupants>0?OS.textValue("heating"):OS.emptyValue():OS.progressValue(Math.abs(this.fuel),"freezing")}}tick(){if(this.clothes<50&&(this.resourcesService.decreaseResource(Su.CLOTHES,1,this.getName()+" clothing")?this.clothes+=50:this.managementService.getFurClothes()&&this.resourcesService.decreaseResource(Su.FUR,1,this.getName()+" clothing")&&(this.clothes+=2)),this.food<=this.settings.STORAGE-50){let e=this.resourcesService.getPriorityFood(this.getName());if(this.food<0){const n=Math.abs(this.food)/2;e>=n?(e-=n,this.food=0):(this.food-=2*e,e=0)}this.food+=e}const e=Number(this.managementService.getRations());for(let l=0;l<this.occupants;l++)this.food>0?(this.food-=.5*e,1===e?this.happinessService.decreaseHappiness(.03/Xu,Zu.FOOD_HAPPINESS_FLOOR):this.happinessService.getHappiness()<75&&(2===e?this.happinessService.increaseHappiness(.01/Xu,Zu.FOOD_HAPPINESS_LIMIT):3===e?this.happinessService.increaseHappiness(.025/Xu,Zu.FOOD_HAPPINESS_LIMIT):4===e&&this.happinessService.increaseHappiness(.05/Xu,Zu.FOOD_HAPPINESS_LIMIT))):(this.food-=.5,this.happinessService.decreaseHappiness(.05/Xu,Zu.FOOD_HAPPINESS_FLOOR));this.food<0&&0===this.occupants&&(this.food=0),this.food<-100&&this.occupants>0&&(this.occupants-=1,this.food=-1,this.resourcesService.removePeople(1)),this.food<0&&this.occupants>0&&this.religionService.getFaithShield()>0&&(this.food=100*this.religionService.decreaseFaithShield(Math.abs(this.food)/100)),this.fuel<=this.settings.STORAGE-50&&(this.fuel+=this.resourcesService.getFuel(this.getName()));const n=this.weatherService.getCurrentTemperature(),t=this.managementService.getClothesRations();if(n<10&&this.occupants>0){let e=(10-n)*ju/Xu;if(this.clothes>0?(this.clothes-=.01*this.occupants*t,e/=t+1,this.clothes<0&&(this.clothes=0),this.happinessService.increaseHappiness(.01*this.occupants,Zu.CLOTHES_HAPPINESS_LIMIT)):this.happinessService.decreaseHappiness(.01*this.occupants,Zu.CLOTHES_HAPPINESS_FLOOR),this.fuel-e<-100){const e=[{item:Nu.COLD,chance:go.getSickness(Nu.COLD).CHANCE},{item:Nu.FLU,chance:go.getSickness(Nu.FLU).CHANCE},{item:Nu.PNEUMONIA,chance:go.getSickness(Nu.PNEUMONIA).CHANCE}],n=Fu.randomElement(e,!0);null!=n&&(this.managementService.getLogSickness()&&this.logService.warning("Villager caught a "+Pu.prepareSicknessName(n)),this.resourcesService.addSick(n)),this.fuel=0}else this.fuel-=e;if(this.fuel<0&&this.occupants>0&&this.religionService.getFaithShield()>0)return void(this.fuel=200*this.religionService.decreaseFaithShield(Math.abs(this.food)/200));this.fuel<0?this.happinessService.decreaseHappiness(.01,Zu.HEAT_HAPPINESS_FLOOR):this.happinessService.increaseHappiness(.005,Zu.HEAT_HAPPINESS_LIMIT)}else this.fuel<0&&(this.fuel=0),n>10&&(this.clothes>0?(this.clothes-=.005*this.occupants*t,this.clothes<0&&(this.clothes=0),this.happinessService.increaseHappiness(.01*this.occupants,Zu.CLOTHES_HAPPINESS_LIMIT)):this.happinessService.decreaseHappiness(.01*this.occupants,Zu.CLOTHES_HAPPINESS_FLOOR));this.progress<100&&this.occupants<this.maxSize&&this.food>0?(this.progress+=this.getPower(),this.progress>100&&(this.progress=100)):this.occupants<this.maxSize&&100===this.progress?(this.occupants+=1,this.resourcesService.createPeople(1),this.progress=0):this.progress>0&&this.food<=0&&(this.progress-=this.getPower())}build(){return this.resourcesService.increasePopulationCap(this.maxSize),this}prepareDemolish(){if(this.occupants>0){const e=this.villageService.moveOccupants(this,this.occupants,this.food,this.fuel,this.clothes);this.resourcesService.removePeople(e)}return this.resourcesService.decreasePopulationCap(this.maxSize),!0}getDetails(){return"occupants: "+this.occupants+"/"+this.maxSize+"<br>food nutrition: "+Pu.round(this.food,2)+"<br>heating fuel: "+Pu.round(this.fuel,2)+"<br>clothes: "+Pu.round(this.clothes,2)+"<br>"+super.getDetails()}hasDetails(){return!0}stopProduction(){}startProduction(){return!0}getMaxSize(){return this.maxSize}getOccupants(){return this.occupants}addOccupant(){return this.occupants<this.maxSize&&(this.occupants+=1,this.occupants===this.maxSize&&(this.progress=0),!0)}removeOccupant(){return this.occupants>0&&(this.occupants-=1,!0)}addFood(e){this.food+=e}addFuel(e){this.fuel+=e}addClothes(e){this.clothes+=e}fireWorker(){return!1}hireWorker(){return!1}getWorkers(){return 0}}class IS extends CS{constructor(e=null,n=-1,t=0,l=0,i=100,r=100,s=0,u=1){super(e,n,Ou.HUT,lo.VILLAGE.HUT,t,l,i,r,s,u)}}class yS extends CS{constructor(e=null,n=-1,t=0,l=0,i=100,r=100,s=0,u=1){super(e,n,Ou.HOUSE,lo.VILLAGE.HOUSE,t,l,i,r,s,u)}}var _S=function(e){return e.CHOPPING_TREES="chopping trees",e.WAITING_FOR_TREES="waiting for trees",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.TRANSPORTING_LOG="transporting log",e}({});class AS extends TS{constructor(e=null,n=-1,t=0,l=0,i=_S.WAITING_FOR_TREES,r=!1,s=1){super(n,Ou.LOGGERS_HUT,e,lo.FOREST.LOGGERS_HUT,r,!0,!0,s),this.progress=t,this.localStorage=l,this.status=i,this.servicesService&&(this.landService=e.getService(xu.LAND))}getLine(e){switch(e){case vS.FIRST:return OS.emptyValue();case vS.SECOND:return OS.textValue(this.status);case vS.THIRD:return OS.progressValue(this.progress);case vS.FOURTH:return OS.emptyValue()}}tick(){if(this.working)if(this.status===_S.WAITING_FOR_TREES)this.landService.reduceForest(1)&&(this.status=_S.CHOPPING_TREES);else if(this.status===_S.CHOPPING_TREES)this.progress<100&&(this.progress+=this.getPower(),this.progress>=100&&(this.progress=0,this.status=_S.TRANSPORTING_LOG));else if(this.status===_S.TRANSPORTING_LOG||this.status===_S.WAITING_FOR_WAREHOUSE_SPACE){const e=this.resourcesService.increaseResource(Su.LOG,1,this.getName());this.status=e?this.landService.reduceForest(1)?_S.CHOPPING_TREES:_S.WAITING_FOR_TREES:_S.WAITING_FOR_WAREHOUSE_SPACE}}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,localStorage:this.localStorage,status:this.status,working:this.working}}}class wS extends TS{constructor(e=null,n,t,l,i=1,r=1,s=1,u=0,o=!1,a=null){super(n,Ou.CONSTRUCTION,e,lo.CONSTRUCTION_SITE,o,1===s,!0,s),this.region=t,this.constructing=l,this.buildingComplexity=i,this.buildingSize=r,this.upgradeLevel=s,this.progress=u,this.data=a,this.servicesService&&(this.resourcesService=this.servicesService.getService(xu.RESOURCES),this.buildingFactoryService=this.servicesService.getService(xu.BUILDING_FACTORY),this.regionService=this.servicesService.getServiceByRegion(t))}isUpgrade(){return 1!==this.upgradeLevel}getLine(e){switch(e){case vS.FIRST:return OS.emptyValue();case vS.SECOND:return this.isUpgrade()?OS.textValue("upgrading "+Pu.prepareBuildingName(this.constructing)):OS.textValue("constructing "+Pu.prepareBuildingName(this.constructing));case vS.THIRD:return OS.progressValue(this.progress);case vS.FOURTH:return OS.emptyValue()}}tick(){0===this.buildingComplexity&&(this.isUpgrade()?this.regionService.finishUpgrade(this,this.constructing):this.regionService.finishConstruction(this,this.constructing)),this.working&&(this.progress<100?(this.progress+=this.getPower()/this.buildingComplexity,this.progress>100&&(this.progress=100)):this.isUpgrade()?this.regionService.finishUpgrade(this,this.constructing):this.regionService.finishConstruction(this,this.constructing))}build(){return this.startProduction()||0===this.buildingComplexity||this.servicesService.getService(xu.MODAL).info("Couldn't unlock construction. Not enough free workers."),this}toJSON(){return{id:this.id,upgradeLevel:this.upgradeLevel,buildingType:this.buildingType,region:this.region,constructing:this.constructing,buildingComplexity:this.buildingComplexity,progress:this.progress,working:this.working,buildingSize:this.buildingSize,data:this.data}}getComplexity(){return 0}getSize(){return this.buildingSize}finishDemolish(){Array.from(this.buildingFactoryService.createBuildingShell(this.constructing).getCost().entries()).forEach(e=>this.resourcesService.increaseResource(e[0],Math.floor(e[1]*(1-this.progress/100)+e[1]*(this.progress/100*.3)),"Cancel construction"))}getConstructing(){return this.constructing}getBuildingData(){return this.data}}var NS=function(e){return e.PLANTING_TREES="planting trees",e.WAITING_FOR_LAND="waiting for land",e.NO_ENOUGH_LAND="no enough free land",e.FOREST_TOO_BIG="forest too big",e}({});class PS extends TS{constructor(e=null,n=-1,t=0,l=0,i=NS.WAITING_FOR_LAND,r=1,s=!1,u=1){super(n,Ou.FORESTER,e,lo.FOREST.FORESTER,s,!0,!0,u),this.progress=t,this.localStorage=l,this.status=i,this.effectiveness=r,this.servicesService&&(this.landService=e.getService(xu.LAND),this.modalService=e.getService(xu.MODAL))}getLine(e){switch(e){case vS.FIRST:return OS.emptyValue();case vS.SECOND:return OS.textValue(this.status);case vS.THIRD:return OS.progressValue(this.progress);case vS.FOURTH:return OS.emptyValue()}}tick(){if(this.working){if(0===this.localStorage){const e=this.landService.getForestOptions();if(e.forestSizeRuleEnabled&&this.landService.getForest()>=e.forestSizeRule)return void(this.status=NS.FOREST_TOO_BIG);if(e.landSizeRuleEnabled&&this.landService.getLand()<=e.landSizeRule)return void(this.status=NS.NO_ENOUGH_LAND);this.landService.reduceLand(this.effectiveness)?(this.localStorage=this.effectiveness,this.status=NS.PLANTING_TREES):this.status=NS.WAITING_FOR_LAND}this.localStorage>0&&(this.progress<100?(this.progress+=this.getPower(),this.progress>100&&(this.progress=100)):(this.landService.increaseForest(this.localStorage,!1),this.progress=0,this.localStorage=0))}}prepareDemolish(){return this.localStorage>0&&this.landService.increaseLand(this.localStorage,!0),super.prepareDemolish()}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,localStorage:this.localStorage,status:this.status,effectiveness:this.effectiveness,working:this.working}}}class kS{constructor(e,n,t,l,i,r=!1,s=!1,u=""){this.enabled=e,this.buildingType=n,this.seasons=t,this.inputSettings=l,this.outputSettings=i,this.customRuleEnabled=s,this.hasCustomRule=r,this.customRuleText=u}static clone(e){let n=null,t=null;return e.inputSettings&&(n=[],e.inputSettings.forEach(e=>{n.push([e[0],e[1]])})),e.outputSettings&&(t=[],e.outputSettings.forEach(e=>{t.push([e[0],e[1],e[2]])})),new kS(e.enabled,e.buildingType,[e.seasons[0],e.seasons[1],e.seasons[2],e.seasons[3]],n,t,e.hasCustomRule,e.customRuleEnabled,e.customRuleText)}}var xS=function(e){return e.FETCHING_INPUT="fetching {in}",e.WAITING_FOR_INPUT="waiting for {wait}",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.PREPARING="preparing {out}",e.PRODUCING_OUTPUT="{prod} {out}",e.TRANSPORTING_OUTPUT="transporting {out}",e}({});class MS extends TS{constructor(e=null,n,t,l,i,r=0,s=[],u=[],o=!1,a=null,c){if(super(n,t,e,l,o,!0,!0,c),this.status=i,this.progress=r,this.inputStorage=s,this.outputStorage=u,this.workSettings=a,this.productionText=l.TEXT,e)if(this.managementService=e.getService(xu.MANAGEMENT),this.calendarService=e.getService(xu.CALENDAR),null===this.workSettings){const e=l.INPUT_RESOURCES.map(e=>[e.resource,0]),n=l.OUTPUT_RESOURCES.map(e=>e.resource===Su.COINS?[e.resource,0,!0]:[e.resource,this.resourcesService.getResource(e.resource).getLimit(),!1]);this.workSettings=new kS(!0,t,[!0,!0,!0,!0],e,n)}else if(!this.workSettings.seasons){const e=[!0,!0,!0,!0],n=[];a.outputSettings.forEach(e=>n.push([e[0],e[1],void 0!==e[2]&&e[2]])),this.workSettings=new kS(!0,t,e,a.inputSettings,n)}}toJSON(){return{id:this.id,level:this.level,workSettings:this.workSettings,buildingType:this.buildingType,progress:this.progress,status:this.status,inputStorage:this.inputStorage,outputStorage:this.outputStorage,working:this.working}}getLine(e){switch(e){case vS.FIRST:return OS.emptyValue();case vS.SECOND:const n=Pu.resourcesArraysDiff(this.settings.INPUT_RESOURCES,this.inputStorage);let t=String(this.status);return n.length>0&&(t=t.replace("{wait}",Pu.prepareResourcesNamesList(n))),t=(t=(t=t.replace("{in}",Pu.prepareResourcesNamesList(this.settings.INPUT_RESOURCES))).replace("{out}",Pu.prepareResourcesNamesList(this.settings.OUTPUT_RESOURCES))).replace("{prod}",this.productionText+" "),OS.textValue(t);case vS.THIRD:return OS.progressValue(this.progress);case vS.FOURTH:return OS.emptyValue()}}isMet(){let e=!0;return this.workSettings.seasons[this.calendarService.getSeason()]||e&&(e=!1),this.workSettings.inputSettings.forEach(n=>{e&&(e=this.resourcesService.getResource(n[0]).amount>n[1])}),this.workSettings.outputSettings.forEach(n=>{e&&(e=n[2]?this.resourcesService.getResource(n[0]).amount<this.resourcesService.getResource(n[0]).limit:this.resourcesService.getResource(n[0]).amount<n[1])}),e}tick(){this.managementService.getComplexWorkers()&&this.workSettings&&this.workSettings.enabled&&(this.isMet()?this.isWorking()||this.hireWorker():this.isWorking()&&this.status!==xS.PRODUCING_OUTPUT&&this.status!==xS.TRANSPORTING_OUTPUT&&this.fireWorker()),this.isWorking()&&(this.outputStorage.length>0?this.collectOutputResources():this.inputStorage.length<this.settings.INPUT_RESOURCES.length&&0===this.outputStorage.length?this.collectInputResources():this.progress<100?(this.status=xS.PRODUCING_OUTPUT,this.progress+=this.getPower(),this.progress>100&&(this.progress=100)):100===this.progress&&(this.progress=0,this.inputStorage=[],this.outputStorage=Pu.copyResourceArray(this.settings.OUTPUT_RESOURCES),this.status=xS.TRANSPORTING_OUTPUT))}collectInputResources(){let e=!0;return this.settings.INPUT_RESOURCES.forEach(n=>{this.inputStorage.find(e=>e.resource===n.resource)||(this.resourcesService.decreaseResource(n.resource,n.amount,this.getName())?this.inputStorage.push({resource:n.resource,amount:n.amount}):e=!1)}),e?(this.status=xS.FETCHING_INPUT,!0):(this.status=xS.WAITING_FOR_INPUT,!1)}collectOutputResources(){let e=!0;return this.outputStorage.forEach(n=>{this.resourcesService.increaseResource(n.resource,n.amount,this.getName())?n.amount=0:e=!1}),this.outputStorage=this.outputStorage.filter(e=>e.amount>0),e?0===this.outputStorage.length?(this.status=xS.FETCHING_INPUT,!0):void 0:(this.status=xS.WAITING_FOR_WAREHOUSE_SPACE,!1)}isComplexManagement(){return!0}getWorkSettings(){return this.workSettings}setWorkSettings(e){this.workSettings=e}}class DS extends MS{constructor(e=null,n=-1,t=0,l=xS.FETCHING_INPUT,i=[],r=[],s=!1,u=null,o=1){super(e,n,Ou.SAWMILL,lo.FOREST.SAWMILL,l,t,i,r,s,u,o)}}class LS extends TS{constructor(e=null,n,t,l,i=1,r=1,s=0,u=!1){super(n,Ou.DECONSTRUCTION,e,lo.DECONSTRUCTION_SITE,u,!1,!0,1),this.region=t,this.deconstructing=l,this.buildingComplexity=i,this.buildingSize=r,this.progress=s,this.servicesService&&(this.regionService=e.getServiceByRegion(t))}getLine(e){switch(e){case vS.FIRST:return OS.emptyValue();case vS.SECOND:return OS.textValue("deconstructing "+Pu.prepareBuildingName(this.deconstructing));case vS.THIRD:return OS.progressValue(this.progress);case vS.FOURTH:return OS.emptyValue()}}tick(){this.working&&(this.progress<100?(this.progress+=this.getPower()/this.buildingComplexity,this.progress>100&&(this.progress=100)):this.regionService.finishDeconstruction(this))}toJSON(){return{id:this.id,buildingType:this.buildingType,region:this.region,deconstructing:this.deconstructing,buildingComplexity:this.buildingComplexity,progress:this.progress,working:this.working,buildingSize:this.buildingSize}}getComplexity(){return 0}getSize(){return this.buildingSize}prepareDemolish(){return!1}finishDemolish(){}getBuildingBeingDemolished(){return this.deconstructing}getDecontructing(){return this.deconstructing}}var FS=function(e){return e.GATHERING_FOOD="gathering food",e.GATHERING_RESOURCES="gathering resources",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.TRANSPORTING="transporting",e}({}),HS=function(e){return e[e.FOOD=0]="FOOD",e[e.RESOURCES=1]="RESOURCES",e}({});class US extends TS{constructor(e=null,n=-1,t=0,l=FS.GATHERING_FOOD,i=!1,r=HS.FOOD,s=[null,0],u=1){super(n,Ou.GATHERER,e,lo.FOREST.GATHERER,i,!0,!0,u),this.progress=t,this.status=l,this.mode=r,this.storage=s,this.lastFind=null,this.servicesService&&(this.weatherService=e.getService(xu.WEATHER))}rollForFind(){let e=null;return this.mode===HS.FOOD?e=Fu.randomElement([{item:Su.BERRY,chance:this.settings.BERRY_CHANCE},{item:Su.MUSHROOM,chance:this.settings.MUSHROOM_CHANCE},{item:Su.WHEAT,chance:this.settings.WHEAT_CHANCE},{item:Su.HERBS,chance:this.settings.HERBS_CHANCE}]):this.mode===HS.RESOURCES&&(e=Fu.randomElement([{item:Su.BRUSHWOOD,chance:this.settings.BRUSHWOOD_CHANCE},{item:Su.STONE,chance:this.settings.STONE_CHANCE},{item:Su.LOG,chance:this.settings.LOG_CHANCE},{item:Su.COPPER,chance:this.settings.COPPER_CHANCE},{item:Su.HERBS,chance:this.settings.HERBS_CHANCE}])),e}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,working:this.working,storage:this.storage,mode:this.mode}}callback(e){e===HS.FOOD?(this.mode=HS.FOOD,this.progress=0,this.status=FS.GATHERING_FOOD):e===HS.RESOURCES&&(this.mode=HS.RESOURCES,this.progress=0,this.status=FS.GATHERING_RESOURCES)}getLine(e){switch(e){case vS.FIRST:return this.mode===HS.FOOD?OS.buttonValue("gather resources",HS.RESOURCES):OS.buttonValue("gather food",HS.FOOD);case vS.SECOND:return OS.textValue(this.status);case vS.THIRD:return OS.progressValue(this.progress);case vS.FOURTH:return null!=this.lastFind?OS.textValue("last find: "+Pu.prepareResourceName(this.lastFind)):OS.emptyValue()}}tick(e){if(this.working)if(this.storage[1]>0)this.resourcesService.increaseResource(this.storage[0],this.storage[1],this.getName()),this.storage=[null,0],this.setStatus();else if(this.progress<100)this.setStatus(),this.progress+=this.getPower(),this.progress>100&&(this.progress=100);else if(100===this.progress){this.progress=0;let e=this.rollForFind();if(null!==e&&!this.resourcesService.hasLimit(e))return e=null,void(this.progress=50);e?(this.lastFind=e,this.storage=[e,1],this.status=FS.TRANSPORTING):(this.lastFind=Su.NOTHING,this.progress=0)}}setStatus(){this.status=this.mode===HS.FOOD?FS.GATHERING_FOOD:FS.GATHERING_RESOURCES}}var GS=function(e){return e.MINING_STONE="mining stone",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.NO_MORE_RESOURCES="no more resources",e.TRANSPORTING="transporting",e}({});class BS extends TS{constructor(e=null,n=-1,t=0,l=GS.MINING_STONE,i=!1,r=0,s=200,u=1){super(n,Ou.QUARRY,e,lo.MOUNTAINS.QUARRY,i,!0,!0,u),this.progress=t,this.status=l,this.storage=r,this.resources=s,this.servicesService&&(this.gameService=e.getService(xu.GAME))}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,working:this.working,storage:this.storage,resources:this.resources}}build(){return this.startProduction(),this.gameService.enable(bu.BUILT_QUARRY),this}buildOnMountain(){return!0}getLine(e){switch(e){case vS.FIRST:return OS.textValue("stone: "+this.resources);case vS.SECOND:return OS.textValue(this.status);case vS.THIRD:return OS.progressValue(this.progress);case vS.FOURTH:return OS.emptyValue()}}isStoppable(){return this.resources>0}isUsedUp(){return this.status===GS.NO_MORE_RESOURCES}hasBuff(){return!this.isUsedUp()&&super.hasBuff()}tick(e){this.resources<=0&&(this.status!==GS.NO_MORE_RESOURCES&&this.servicesService.getService(xu.LOG).warning("Quarry mined all stone"),this.status=GS.NO_MORE_RESOURCES,this.stopProduction()),this.working&&(this.storage>0?this.resourcesService.increaseResource(Su.STONE,this.storage,this.getName())?(this.storage=0,this.status=GS.MINING_STONE):this.status=GS.WAITING_FOR_WAREHOUSE_SPACE:this.progress<100?(this.status=GS.MINING_STONE,this.progress+=this.getPower(),this.progress>100&&(this.progress=100)):100===this.progress&&(this.progress=0,this.resources-=1,this.storage=1,this.status=GS.TRANSPORTING))}}var WS=function(e){return e.RESEARCHING="researching",e.CRAFTING="crafting {craft}",e.WAITING_FOR_WAREHOUSE="waiting for {craft} space",e.NO_RESEARCH="nothing to research",e.NO_CRAFTING="nothing to craft",e}({}),VS=function(e){return e[e.RESEARCH=0]="RESEARCH",e[e.CRAFT=1]="CRAFT",e[e.SWITCH_TO_RESEARCH=2]="SWITCH_TO_RESEARCH",e}({});class zS extends TS{constructor(e=null,n=-1,t=0,l=WS.NO_RESEARCH,i=VS.RESEARCH,r=!1,s=-1,u=null,o=1,a=0){super(n,Ou.WORKSHOP,e,lo.VILLAGE.WORKSHOP,r,!0,!0,o),this.progress=t,this.status=l,this.mode=i,this.storage=a,this.recipe=null,this.icon=null,this.servicesService&&(u?this.recipe=u:s>=0&&(this.recipe=this.servicesService.getService(xu.RECIPE).getRecipeById(s)),this.craftingService=e.getService(xu.CRAFTING),this.techService=e.getService(xu.RESEARCH),this.gameService=e.getService(xu.GAME))}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,mode:this.mode,working:this.working,recipeId:null!==this.recipe?this.recipe.id:-1,storage:this.storage}}build(){this.servicesService.getService(xu.MANAGEMENT).getDefaultWorkshopResearch()||(this.mode=VS.CRAFT),this.startProduction();const e=this.servicesService.getService(xu.LOG);return this.gameService.isEnabled(bu.RESEARCH)||(this.gameService.enable(bu.RESEARCH),e.log("Researching unlocked")),this.gameService.isEnabled(bu.CRAFTING)||(this.gameService.enable(bu.CRAFTING),e.log("Crafting unlocked")),this.craftingService.increaseQueueSize(1),this}prepareDemolish(){return this.craftingService.decreaseQueueSize(1),super.prepareDemolish()}callback(e){if("switch"===e){if(this.mode===VS.RESEARCH)this.progress=0,this.mode=VS.CRAFT,this.recipe=this.craftingService.getOrder(),this.icon=null,this.status=null!==this.recipe?WS.CRAFTING:WS.NO_CRAFTING;else if(this.mode===VS.SWITCH_TO_RESEARCH)this.mode=VS.CRAFT,this.status=null!==this.recipe?WS.CRAFTING:WS.NO_CRAFTING;else if(this.mode===VS.CRAFT)if(this.recipe){this.modalService.open(Lu.CONFIRM),this.modalService.setModalText("Workshop will switch to research after finishing current craft.");const e=this.modalService.registerForConfirmation().subscribe(n=>{e.unsubscribe(),n&&(this.mode=VS.SWITCH_TO_RESEARCH)})}else this.progress=0,this.mode=VS.RESEARCH,this.status=this.techService.isResearchStarted()?WS.RESEARCHING:WS.NO_RESEARCH}else"cancel"===e&&(this.recipe=null,this.progress=0,this.mode===VS.SWITCH_TO_RESEARCH?(this.mode=VS.RESEARCH,this.status=this.techService.isResearchStarted()?WS.RESEARCHING:WS.NO_RESEARCH):this.status=WS.NO_CRAFTING)}getLine(e){switch(e){case vS.FIRST:return this.firstLine();case vS.SECOND:return this.recipe?(this.icon||(this.prepareIcon(),this.status===WS.CRAFTING?this.icon[0].prefix="crafting ":this.status===WS.WAITING_FOR_WAREHOUSE&&(this.icon[0].prefix="waiting for ",this.icon[0].suffix=" space")),OS.iconValue(this.icon)):OS.textValue(this.status.replace("{craft}","warehouse"));case vS.THIRD:if(this.recipe)return OS.buttonValue("cancel crafting","cancel");{let e="";return this.techService.getCurrentResearch()&&(e=Pu.prepareTechName(this.techService.getCurrentResearch().getTech())),OS.textValue(e)}case vS.FOURTH:return OS.progressValue(this.progress)}}firstLine(){return OS.buttonValue(this.mode===VS.RESEARCH||this.mode===VS.SWITCH_TO_RESEARCH?"craft":"research","switch")}tick(e){if(this.working)if(this.mode===VS.RESEARCH)this.techService.isResearchStarted()?(this.status!==WS.RESEARCHING&&(this.progress=0),this.status=WS.RESEARCHING,this.progress+=this.getPower(),this.progress>=100&&(this.progress=0,this.techService.progressTech(lo.VILLAGE.WORKSHOP.RESEARCH_POWER))):(this.status=WS.NO_RESEARCH,this.progress=0);else if(this.mode===VS.CRAFT||this.mode===VS.SWITCH_TO_RESEARCH)if(null===this.recipe&&(this.recipe=this.craftingService.getOrder(),this.icon=null,this.progress=0),null===this.recipe)this.status=WS.NO_CRAFTING;else if(this.status===WS.WAITING_FOR_WAREHOUSE){const e=this.resourcesService.getLimit(this.recipe.resource);this.storage>e?(this.storage-=e,this.resourcesService.increaseResource(this.recipe.resource,e,this.getName())):(this.resourcesService.increaseResource(this.recipe.resource,this.storage,this.getName()),this.status=WS.CRAFTING,this.progress=0,this.recipe=null)}else if(this.status=WS.CRAFTING,this.progress<100&&(this.progress+=this.getPower()/this.recipe.craftingDifficulty*lo.VILLAGE.WORKSHOP.CRAFTING_POWER),this.progress>=100){this.progress=100,this.storage=this.recipe.amount;const e=this.resourcesService.getLimit(this.recipe.resource);this.storage>e?(this.storage-=e,this.resourcesService.increaseResource(this.recipe.resource,e,this.getName()),this.status=WS.WAITING_FOR_WAREHOUSE,this.icon=null):this.resourcesService.increaseResource(this.recipe.resource,this.storage,this.getName())?(this.progress=0,this.storage=0,this.recipe=null,this.mode===VS.SWITCH_TO_RESEARCH&&(this.mode=VS.RESEARCH,this.status=this.techService.isResearchStarted()?WS.RESEARCHING:WS.NO_RESEARCH)):(this.status=WS.WAITING_FOR_WAREHOUSE,this.icon=null)}}getRecipe(){return this.recipe}cancelCrafting(){this.recipe=null}willResearch(){return this.mode===VS.RESEARCH||this.mode===VS.SWITCH_TO_RESEARCH}prepareIcon(){this.recipe&&(this.icon=[{name:Pu.prepareResourceName(this.recipe.resource),path:"resources",prefix:"",suffix:""}])}}class YS extends TS{constructor(e=null,n=-1,t=Iu.NONE,l=50,i=1){super(n,Ou.WAREHOUSE,e,lo.VILLAGE.WAREHOUSE,!1,!0,!1,i),this.resource=t,this.storage=l,this.servicesService&&(this.modalService=e.getService(xu.MODAL))}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,resource:this.resource,storage:this.storage}}callback(e){if(this.resource===Iu.NONE)this.resource=Iu[String(e.target.value)],this.resourcesService.increaseLimit(this.resource,this.storage);else{this.modalService.open(Lu.CONFIRM),this.modalService.setModalText("Are you sure you want to switch warehouse storage type?<br>All excess resources will be lost");const n=this.modalService.registerForConfirmation().subscribe(t=>{t?(this.resourcesService.decreaseLimit(this.resource,this.storage),this.resource=Iu[String(e.target.value)],this.resourcesService.increaseLimit(this.resource,this.storage)):e.target.selectedIndex=this.resource-1,n.unsubscribe()})}}getComplexity(){return super.getComplexity()*(this.storage/this.settings.SIZE)}getSize(){return this.storage}getLine(e){switch(e){case vS.FIRST:return this.firstLine();case vS.SECOND:return OS.textValue("storage: "+this.storage);case vS.THIRD:case vS.FOURTH:return OS.emptyValue()}}firstLine(){const e=[];return e.push(Iu[Iu.NONE]),e.push(Iu[Iu.RAW]),e.push(Iu[Iu.PROCESSED]),e.push(Iu[Iu.FOOD]),e.push(Iu[Iu.TOOLS]),OS.dropdownValue(e,Iu[this.resource])}prepareDemolish(){return this.resourcesService.decreaseLimit(this.resource,this.storage),!0}startProduction(){return!1}stopProduction(){}fireWorker(){return!1}hireWorker(){return!1}getWorkers(){return 0}getHappinessEffect(){return 0}isCombinable(){return!0}isSplittable(){return!0}combine(e,n){if(this.getBuildingType()===e.getBuildingType()){this.modalService.open(Lu.CONFIRM),this.modalService.setModalText(" Are you sure you want to combine "+this.getName()+" of size "+this.getSize()+" with "+e.getName()+" of size "+e.getSize()+"?<br>Resulting "+this.getName()+" of size "+(this.getSize()+e.getSize())+" will store <b>"+Pu.prepareResourceTypeName(this.resource)+" resources</b><br>All resources exceeding decreased limit of <b>"+Pu.prepareResourceTypeName(e.resource)+"</b> will be lost");const t=this.modalService.registerForConfirmation().subscribe(l=>{t.unsubscribe(),l?(this.storage+=e.getSize(),this.resource!==Iu.NONE&&this.resourcesService.increaseLimit(this.resource,e.getSize()),n.finaliseCombine(!0)):n.finaliseCombine(!1)})}}split(e){this.modalService.open(Lu.INPUT),this.modalService.setModalText("Set split size (1-"+(this.getSize()-1)+")");const n=this.modalService.registerForValueResponse().subscribe(t=>{n.unsubscribe(),isNaN(t)||0===t||(t>=1&&t<this.getSize()?(this.storage-=Number(t),e.finaliseSplit(new YS(this.servicesService,this.servicesService.getService(xu.ID).getNextId(),this.resource,Number(t)).build())):this.modalService.info("Invalid size value!"))})}}var $S=function(e){return e.HUNTING="hunting",e.TAME="taming animals",e.WAITING_FOR_PASTURE_SPACE="waiting for pasture space",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.TRANSPORTING="transporting",e}({}),KS=function(e){return e[e.HUNTING=0]="HUNTING",e[e.TAMING=1]="TAMING",e}({});class jS extends TS{constructor(e=null,n=-1,t=0,l=$S.HUNTING,i=KS.HUNTING,r=!1,s=0,u=0,o=null,a=1){super(n,Ou.HUNTER_LODGE,e,lo.FOREST.HUNTER_LODGE,r,!0,!0,a),this.progress=t,this.status=l,this.mode=i,this.storage=s,this.storage2=u,this.animal=o,this.lastFind=null,this.servicesService&&(this.weatherService=e.getService(xu.WEATHER),this.gameService=e.getService(xu.GAME))}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,mode:this.mode,working:this.working,storage:this.storage,storage2:this.storage2,animal:this.animal}}callback(e){"tame"===e?(this.mode=KS.TAMING,this.progress=0,this.storage=0,this.storage2=0,this.status=$S.TAME):(this.mode=KS.HUNTING,this.progress=0,this.storage=0,this.storage2=0,this.lastFind=null,this.status=$S.HUNTING)}getLine(e){switch(e){case vS.FIRST:return this.gameService.isEnabled(bu.PASTURE)?this.mode===KS.HUNTING?OS.buttonValue("tame animals","tame"):OS.buttonValue("hunt","hunt"):OS.emptyValue();case vS.SECOND:return OS.textValue(this.status);case vS.THIRD:return OS.progressValue(this.progress);case vS.FOURTH:return null!==this.lastFind?OS.textValue("last tamed: "+Pu.prepareResourceName(this.lastFind)):OS.emptyValue()}}tick(e){if(this.working)if(this.mode===KS.HUNTING)this.status=0!==this.storage&&0!==this.storage2?$S.TRANSPORTING:$S.HUNTING,this.status===$S.HUNTING?this.progress<100&&(this.progress+=this.getPower(),this.progress>=100&&(this.progress=0,this.storage<5&&(this.storage+=Fu.randomBetween(1,3),this.storage>5&&(this.storage=5)),this.storage2<5&&(this.storage2+=Fu.randomBetween(0,2),this.storage2>5&&(this.storage2=5)),this.status=$S.TRANSPORTING)):this.status!==$S.TRANSPORTING&&this.status!==$S.WAITING_FOR_WAREHOUSE_SPACE||(0!==this.storage&&this.resourcesService.increaseResource(Su.MEAT,this.storage,this.getName())&&(this.storage=0),0!==this.storage2&&this.resourcesService.increaseResource(Su.FUR,this.storage2,this.getName())&&(this.storage2=0),0!==this.storage&&0!==this.storage2&&(this.status=$S.WAITING_FOR_WAREHOUSE_SPACE));else if(this.mode===KS.TAMING)if(this.status===$S.TAME){if(this.progress<100&&(this.progress+=this.getPower(),this.progress>=100)){this.progress=0;const e=[];this.resourcesService.hasLimit(Su.CHICKEN)&&e.push({item:Su.CHICKEN,chance:6}),this.resourcesService.hasLimit(Su.SHEEP)&&e.push({item:Su.SHEEP,chance:5}),this.resourcesService.hasLimit(Su.PIG)&&e.push({item:Su.PIG,chance:5}),this.resourcesService.hasLimit(Su.COW)&&e.push({item:Su.COW,chance:4}),this.resourcesService.hasLimit(Su.HORSE)&&e.push({item:Su.HORSE,chance:3}),0!==e.length||this.servicesService.getService(xu.MANAGEMENT).getSwitchHunterFromTaming()||(this.logService.log("No more space for animals. Hunter switched to hunting"),this.callback("hunt"));const n=Fu.randomElement(e);null!=n?(this.lastFind=n,this.animal=n,this.status=$S.TRANSPORTING):(this.lastFind=Su.NOTHING,this.animal=null)}}else this.status!==$S.TRANSPORTING&&this.status!==$S.WAITING_FOR_PASTURE_SPACE||this.animal&&(this.resourcesService.increaseResource(this.animal,1,this.getName())?(this.animal=null,this.status=$S.TAME):this.status=$S.WAITING_FOR_PASTURE_SPACE)}}class qS extends TS{constructor(e=null,n=-1,t=0,l=1){super(n,Ou.SHRINE,e,lo.VILLAGE.SHRINE,!0,!0,!1,l),this.progress=t,this.servicesService&&(this.religionService=e.getService(xu.RELIGION))}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress}}build(){return this.religionService.increaseFaithCap(10),this.servicesService.getService(xu.GAME).enable(bu.RELIGION),this}getLine(e){switch(e){case vS.FIRST:case vS.SECOND:return OS.emptyValue();case vS.THIRD:return OS.progressValue(this.progress,"prayers");case vS.FOURTH:return OS.emptyValue()}}prepareDemolish(){return this.religionService.decreaseFaithCap(10),!0}startProduction(){return!0}stopProduction(){}tick(e){const n=this.servicesService.getService(xu.VILLAGE).getPopulation();this.progress+=.01*(Math.pow(Math.log(n),2)+1)*this.getPower(),this.progress>100&&(this.progress=0,this.religionService.increaseFaith(1))}fireWorker(){return!1}hireWorker(){return!1}getWorkers(){return 0}}class XS{constructor(e=null,n=-1,t=0,l=0){this.servicesService=e,this.fish=t,this.food=l,this.buildingType=Ou.SCHOOL_OF_FISH,this.icons=[{name:"fish_food",path:"resources",prefix:"",suffix:"1"}],this.id=n,this.servicesService&&(this.resourcesService=e.getService(xu.RESOURCES),this.effectsService=e.getService(xu.EFFECTS),this.gameService=e.getService(xu.GAME))}callback(e){"food"===e&&this.resourcesService.decreaseResource(Su.FISH_FOOD,1,this.getName(),!0)?this.food+=lo.SEA.SCHOOL_OF_FISH.FISH_FOOD_DAYS*Xu:this.servicesService.getService(xu.MODAL).info("No fish food available")}getBuildingType(){return this.buildingType}getComplexity(){return 0}getCost(){return new Map}getName(){return"School of fish"}getLine(e){switch(e){case vS.FIRST:return OS.textValue("fish: "+this.fish);case vS.SECOND:return this.gameService.isEnabled(bu.FISH_FOOD)?OS.textValue("fish food: "+Math.floor(this.food/Xu)+" days"):OS.emptyValue();case vS.THIRD:return this.gameService.isEnabled(bu.FISH_FOOD)?OS.iconValue(this.icons):OS.emptyValue();case vS.FOURTH:return this.gameService.isEnabled(bu.FISH_FOOD)?OS.buttonValue("add fish food","food"):OS.emptyValue()}}getSize(){return 0}buildOnMountain(){return!1}tick(){this.food>0?(this.food-=1,1===Fu.randomBetween(1,lo.SEA.SCHOOL_OF_FISH.BREED_CHANCE/2)&&(this.fish+=Math.floor(lo.SEA.SCHOOL_OF_FISH.BREED_AMOUNT*this.getPower()))):1===Fu.randomBetween(1,lo.SEA.SCHOOL_OF_FISH.BREED_CHANCE)&&(this.fish+=Math.floor(lo.SEA.SCHOOL_OF_FISH.BREED_AMOUNT*this.getPower()))}build(){return this}getBuildingId(){return this.id}toJSON(){return{id:this.id,buildingType:this.buildingType,fish:this.fish,food:this.food}}prepareDemolish(){return this.stopProduction(),!1}finishDemolish(){}startProduction(){return!1}stopProduction(){}isStoppable(){return!1}isWorking(){return!0}isDemolishable(){return!1}getDescription(){return"School of fish"}fireWorker(){return!1}hireWorker(){return!1}getWorkers(){return 0}getFish(){return this.fish}reduceFish(e){return this.fish>=e&&(this.fish-=e,!0)}getEffects(){return 0}getPermanentEffects(){return 0}getDetails(){return""}hasDetails(){return!1}getPower(){return 1+this.effectsService.getNatureEffectsValue()/100}isUsedUp(){return!1}isCombinable(){return!1}isSplittable(){return!1}getHappinessEffect(){return 0}getWeatherMultiplier(){return 0}getDisplayableEffectsValue(){return 0}hasBuff(){return!1}isBuffed(){return!1}getBuff(){return null}isComplexManagement(){return!1}getWorkSettings(){return null}setWorkSettings(e){}hasUpgrade(){return!1}getUpgradeCost(){return new Map}setBuildingLevel(e){}getBuildingLevel(){return 0}getBuildingData(){return null}setBuildingData(e){}}var QS=function(e){return e.WORKING="working",e.BAD_WEATHER="bad weather",e.STOPPED="stopped",e}({});class ZS extends TS{constructor(e=null,n=-1,t=0,l=4,i=1,r=QS.WORKING,s=null){super(n,Ou.FARM,e,lo.FIELD.FARM,t>0,!0,!0,i),this.workers=t,this.maxWorkers=l,this.status=r,this.workSettings=s,this.servicesService&&(this.weatherService=e.getService(xu.WEATHER),this.calendarService=e.getService(xu.CALENDAR),this.managementService=e.getService(xu.MANAGEMENT),this.fieldService=e.getServiceByRegion(Hu.FIELD),null===s&&(this.workSettings=new kS(!0,this.getBuildingType(),[!0,!0,!0,!0],null,null)))}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,workers:this.workers,maxWorkers:this.maxWorkers,workSettings:this.workSettings}}callback(e){"hire"===e&&this.workers<this.maxWorkers&&this.resourcesService.hireWorker()?this.workers+=1:"fire"===e&&this.workers>0&&(this.resourcesService.fireWorker(),this.workers-=1)}getLine(e){switch(e){case vS.FIRST:return OS.textValue("workers: "+this.workers+"/"+this.maxWorkers);case vS.SECOND:return OS.textValue(this.status);case vS.THIRD:return OS.twoButtonValue("hire worker","hire","","fire worker","fire");case vS.FOURTH:return OS.emptyValue()}}isWorking(){return this.workers>0}startProduction(){if(0===this.workers){for(;this.workers<this.maxWorkers&&this.resourcesService.hireWorker();)this.workers+=1;if(this.workers>0)return!0}return!1}stopProduction(){this.workers>0&&(this.resourcesService.fireWorker(this.workers),this.workers=0)}isMet(){let e=!0;return this.workSettings.seasons[this.calendarService.getSeason()]||e&&(e=!1),e}tick(e){if(this.managementService.getComplexWorkers()&&this.workSettings&&this.workSettings.enabled&&(this.isMet()?this.workers<this.maxWorkers&&this.hireWorker():this.isWorking()&&this.stopProduction()),this.workers>0)if(this.weatherService.isWeather(Gu.RAIN,Gu.STORM))if(this.weatherService.isWeather(Gu.STORM))this.status=QS.BAD_WEATHER;else{this.status=QS.WORKING;let e=this.workers;for(;e>0;){const n=this.fieldService.getBuildings().filter(e=>e.getBuildingType()===Ou.PASTURE&&e.hasWork());if(0===n.length){this.status=QS.BAD_WEATHER;break}n.forEach(n=>{e>0&&n.work(this.getPower())&&(e-=1)})}}else{this.status=QS.WORKING;let e=this.workers;for(;e>0;){const n=this.fieldService.getBuildings().filter(e=>(e.getBuildingType()===Ou.FIELD||e.getBuildingType()===Ou.ORCHARD||e.getBuildingType()===Ou.PASTURE)&&e.hasWork());if(0===n.length)break;n.forEach(n=>{e>0&&n.work(this.getPower())&&(e-=1)})}}else this.status=QS.STOPPED}fireWorker(){return this.workers>0&&(this.resourcesService.fireWorker(1),this.workers-=1,!0)}hireWorker(){return!!(this.workers<this.maxWorkers&&this.resourcesService.hireWorker())&&(this.workers+=1,!0)}getWorkers(){return this.workers}setBuildingLevel(e){super.setBuildingLevel(e),this.maxWorkers=2+2*e}isComplexManagement(){return!0}getWorkSettings(){return this.workSettings}setWorkSettings(e){this.workSettings=e}}var JS=function(e){return e.PLOW_FIELD="plowing {crop} field",e.SOWING="sowing {crop}",e.GROWING="{crop} growing",e.HARVEST="harvesting {crop}",e.FALLOW="fallow",e}({});class eE extends TS{constructor(e=null,n=-1,t=lo.FIELD.FIELD.SIZE,l=Cu.NONE,i=JS.FALLOW,r=0,s=!0,u=0,o=1){super(n,Ou.FIELD,e,lo.FIELD.FIELD,s,!0,!0,o),this.currentSize=t,this.crop=l,this.status=i,this.progress=r,this.growth=u,this.servicesService&&(this.gameService=e.getService(xu.GAME),this.modalService=e.getService(xu.MODAL),this.weatherService=e.getService(xu.WEATHER),this.calendarService=e.getService(xu.CALENDAR))}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,size:this.currentSize,crop:this.crop,status:this.status,progress:this.progress,working:this.working,growth:this.growth}}getSize(){return this.currentSize}getComplexity(){return super.getComplexity()*(this.getSize()/this.settings.SIZE)}callback(e){if(this.crop===Cu.NONE||this.status===JS.FALLOW)this.crop=Cu[String(e.target.value)],this.status=JS.FALLOW,this.progress=0;else{this.modalService.open(Lu.CONFIRM),this.modalService.setModalText("Are you sure you want to switch field crop type?<br>All field progress will be lost");const n=this.modalService.registerForConfirmation().subscribe(t=>{t?(this.crop=Cu[String(e.target.value)],this.status=JS.FALLOW,this.progress=0):e.target.selectedIndex=this.crop,n.unsubscribe()})}}finishDemolish(){}getLine(e){switch(e){case vS.FIRST:return OS.textValue("size: "+this.getSize());case vS.SECOND:const n=[];return n.push(Cu[Cu.NONE]),Object.entries(Object(so.FIELD)).forEach(e=>{so.getCrop(Cu[e[0]]).PREREQUISITE?this.gameService.isEnabled(so.getCrop(Cu[e[0]]).PREREQUISITE)&&n.push(e[0]):n.push(e[0])}),OS.dropdownValue(n,Cu[this.crop]);case vS.THIRD:return OS.textValue(this.status.replace("{crop}",Cu[this.crop].toLowerCase()));case vS.FOURTH:return this.status===JS.HARVEST?OS.progressValue(Math.floor(this.growth/(so.getCrop(this.crop).YIELD_MULTIPLIER*this.getSize())*100),"harvest: "+this.growth):OS.progressValue(this.progress)}}getName(){return this.crop===Cu.NONE?"Field":Cu[this.crop].charAt(0).toUpperCase()+Cu[this.crop].slice(1).toLowerCase()+" field"}startProduction(){return this.working=!0,!0}stopProduction(){this.working=!1}tick(e){if(this.calendarService.getSeason()===Hm.WINTER&&(this.status=JS.FALLOW,this.growth=0,this.progress=0),this.status===JS.GROWING)if(this.calendarService.getSeason()===Hm.AUTUMN)this.status=JS.HARVEST,this.growth=Math.floor(this.progress*so.getCrop(this.crop).YIELD_MULTIPLIER*this.getSize()/100),this.progress=0;else if(this.progress<100){let e=this.getPower()*(1+this.effectsService.getNatureEffectsValue()/100)/so.getCrop(this.crop).GROWTH;this.weatherService.getCurrentTemperature()<=5?e*=0:this.weatherService.getCurrentTemperature()<=10?e*=.2:this.weatherService.getCurrentTemperature()<=15?e*=.5:this.weatherService.getCurrentTemperature()<=20?e*=.8:this.weatherService.getCurrentTemperature()<=25?e*=1:this.weatherService.getCurrentTemperature()<=27?e*=.8:this.weatherService.getCurrentTemperature()<=29?e*=.6:this.weatherService.getCurrentTemperature()<=31?e*=.4:this.weatherService.getCurrentTemperature()<=33?e*=.2:this.weatherService.getCurrentTemperature()<=35&&(e*=0),this.progress+=e,this.progress>100&&(this.progress=100)}else 100===this.progress&&(this.growth=this.getSize()*so.getCrop(this.crop).YIELD_MULTIPLIER,this.progress=0,this.status=JS.HARVEST)}work(e){if(this.isWorking()&&this.status!==JS.GROWING&&this.crop!==Cu.NONE){if(this.status===JS.FALLOW&&this.calendarService.getSeason()===Hm.SPRING)return this.status=JS.PLOW_FIELD,!0;if(this.status===JS.PLOW_FIELD&&(this.calendarService.getSeason()===Hm.SPRING||this.calendarService.getSeason()===Hm.SUMMER&&this.servicesService.getService(xu.MANAGEMENT).getPlowInSummer()))return this.progress<100&&(this.progress+=e/this.getSize(),this.progress>=100&&(this.progress=0,this.status=JS.SOWING)),!0;if(this.status===JS.SOWING&&(this.calendarService.getSeason()===Hm.SPRING||this.calendarService.getSeason()===Hm.SUMMER))return this.progress+=e/this.getSize(),this.progress>=100&&(this.progress=0,this.status=JS.GROWING),!0;if(this.status===JS.HARVEST){const e=Su[Cu[this.crop]];if(this.resourcesService.hasLimit(e))return this.resourcesService.increaseResource(e,1,this.getName()),this.growth-=1,this.growth<=0&&(this.status=JS.FALLOW),!0}}return!1}fireWorker(){return!1}hireWorker(){return!1}getWorkers(){return 0}hasWork(){return this.isWorking()&&this.status!==JS.GROWING&&this.crop!==Cu.NONE&&(this.status===JS.FALLOW&&this.calendarService.getSeason()===Hm.SPRING||this.status===JS.PLOW_FIELD&&(this.calendarService.getSeason()===Hm.SPRING||this.calendarService.getSeason()===Hm.SUMMER&&this.servicesService.getService(xu.MANAGEMENT).getPlowInSummer())||this.status===JS.SOWING&&(this.calendarService.getSeason()===Hm.SPRING||this.calendarService.getSeason()===Hm.SUMMER)||this.status===JS.HARVEST&&this.resourcesService.hasLimit(Su[Cu[this.crop]]))}getDetails(){return this.crop!==Cu.NONE?"growing difficulty: "+so.getCrop(this.crop).GROWTH+"<br>yield multiplier: "+so.getCrop(this.crop).YIELD_MULTIPLIER+"<br>"+super.getDetails():super.getDetails()}getHappinessEffect(){return 0}isCombinable(){return!0}isSplittable(){return!0}combine(e,n){if(this.getBuildingType()===e.getBuildingType()){this.modalService.open(Lu.CONFIRM),this.modalService.setModalText(this.crop===e.crop?" Are you sure you want to combine "+this.getName()+" of size "+this.getSize()+" with "+e.getName()+" of size "+e.getSize()+"?<br>Resulting "+this.getName()+" of size "+(this.getSize()+e.getSize())+" will be changed to fallow if both are in different stages":" Are you sure you want to combine "+this.getName()+" of size "+this.getSize()+" with "+e.getName()+" of size "+e.getSize()+"?<br>Resulting "+this.getName()+" of size "+(this.getSize()+e.getSize())+" will be changed to fallow");const t=this.modalService.registerForConfirmation().subscribe(l=>{if(t.unsubscribe(),l){if(this.crop===e.crop)if(this.status===e.status)if(this.status===JS.HARVEST)this.growth+=e.growth;else{let n=this.progress*this.getSize();n+=e.progress*e.getSize(),this.progress=n/(this.getSize()+e.getSize())}else this.status=JS.FALLOW,this.progress=0,this.growth=0;else this.status=JS.FALLOW,this.progress=0,this.growth=0;this.currentSize+=e.getSize(),n.finaliseCombine(!0)}else n.finaliseCombine(!1)})}}split(e){this.modalService.open(Lu.INPUT),this.modalService.setModalText("Set split size (1-"+(this.getSize()-1)+")");const n=this.modalService.registerForValueResponse().subscribe(t=>{if(n.unsubscribe(),!isNaN(t)&&0!==t)if(t>=1&&t<this.getSize()){const n=Math.floor(this.growth*t/this.currentSize);this.growth-=n,this.currentSize-=Number(t),e.finaliseSplit(new eE(this.servicesService,this.servicesService.getService(xu.ID).getNextId(),Number(t),this.crop,this.status,this.progress,!0,n,this.level).build())}else this.modalService.info("Invalid size value!")})}}var nE=function(e){return e.FALLOW="fallow",e.PLANTING="planting {crop}",e.GROWING="{crop} growing",e.FRUITING="{crop} fruits growing",e.HARVEST="picking {crop}",e.NO_FRUITS="no fruits",e.CLEAR="clear old plants",e}({});class tE extends TS{constructor(e=null,n=-1,t=lo.FIELD.ORCHARD.SIZE,l=Cu.NONE,i=nE.FALLOW,r=0,s=!0,u=0,o=1){super(n,Ou.ORCHARD,e,lo.FIELD.ORCHARD,s,!0,!0,o),this.currentSize=t,this.crop=l,this.status=i,this.progress=r,this.growth=u,this.servicesService&&(this.modalService=e.getService(xu.MODAL),this.weatherService=e.getService(xu.WEATHER),this.calendarService=e.getService(xu.CALENDAR),this.royalService=e.getService(xu.ROYAL))}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,size:this.currentSize,crop:this.crop,status:this.status,progress:this.progress,working:this.working,growth:this.growth}}getSize(){return this.currentSize}getComplexity(){return super.getComplexity()*(this.getSize()/this.settings.SIZE)}callback(e){if(this.crop===Cu.NONE||this.status===nE.FALLOW)this.crop=Cu[String(e.target.value)],this.status=nE.FALLOW,this.progress=0;else{this.modalService.open(Lu.CONFIRM),this.modalService.setModalText("Are you sure you want to switch orchard plant type?<br>All orchard progress will be lost");const n=this.modalService.registerForConfirmation().subscribe(t=>{t?(this.crop=Cu[String(e.target.value)],this.status=this.status===nE.FALLOW||this.status===nE.PLANTING?nE.FALLOW:nE.CLEAR,this.progress=0):e.target.selectedIndex=this.crop-Object.entries(so.FIELD).length,n.unsubscribe()})}}finishDemolish(){}getLine(e){switch(e){case vS.FIRST:return OS.textValue("size: "+this.getSize());case vS.SECOND:const n=[];return n.push(Cu[Cu.NONE]),Object.entries(Object(so.ORCHARD)).forEach(e=>{so.getCrop(Cu[e[0]]).PREREQUISITE?this.gameService.isEnabled(so.getCrop(Cu[e[0]]).PREREQUISITE)&&n.push(e[0]):n.push(e[0])}),OS.dropdownValue(n,Cu[this.crop]);case vS.THIRD:return OS.textValue(this.status.replace("{crop}",Cu[this.crop].toLowerCase()));case vS.FOURTH:return this.status===nE.HARVEST?OS.progressValue(Math.floor(this.growth/(so.getCrop(this.crop).YIELD_MULTIPLIER*this.getSize())*100),"harvest: "+this.growth):this.status===nE.NO_FRUITS?OS.emptyValue():OS.progressValue(this.progress)}}getName(){return this.crop===Cu.NONE?"Orchard":Cu[this.crop].charAt(0).toUpperCase()+Cu[this.crop].slice(1).toLowerCase()+" orchard"}startProduction(){return this.working=!0,!0}stopProduction(){this.working=!1}tick(e){if(this.crop!==Cu.NONE){if(this.status!==nE.FALLOW&&this.calendarService.getSeason()===Hm.WINTER){if(this.status===nE.GROWING)return;this.status=nE.NO_FRUITS,this.growth=0,this.progress=0}else this.status!==nE.NO_FRUITS||this.calendarService.getSeason()!==Hm.SPRING&&this.calendarService.getSeason()!==Hm.SUMMER||(this.status=nE.FRUITING);if(this.status===nE.GROWING||this.status===nE.FRUITING)if(this.calendarService.getSeason()===Hm.AUTUMN&&this.status===nE.FRUITING)this.status=nE.HARVEST,this.growth=Math.floor(this.progress*so.getCrop(this.crop).YIELD_MULTIPLIER*this.getSize()/100),this.progress=0;else if(this.progress<100){let e=this.getPower()*(1+this.effectsService.getNatureEffectsValue()/100);this.status===nE.GROWING?e/=so.getCrop(this.crop).GROWTH:this.status===nE.FRUITING&&(e/=so.getCrop(this.crop).FRUITING),this.weatherService.getCurrentTemperature()<=5?e*=0:this.weatherService.getCurrentTemperature()<=10?e*=.2:this.weatherService.getCurrentTemperature()<=15?e*=.5:this.weatherService.getCurrentTemperature()<=20?e*=.8:this.weatherService.getCurrentTemperature()<=25?e*=1:this.weatherService.getCurrentTemperature()<=27?e*=.8:this.weatherService.getCurrentTemperature()<=29?e*=.6:this.weatherService.getCurrentTemperature()<=31?e*=.4:this.weatherService.getCurrentTemperature()<=33?e*=.2:this.weatherService.getCurrentTemperature()<=35&&(e*=0),this.progress+=e,this.progress>100&&(this.progress=100)}else 100===this.progress&&(this.status===nE.GROWING?this.status=nE.FRUITING:this.status===nE.FRUITING&&(this.growth=so.getCrop(this.crop).YIELD_MULTIPLIER*this.getSize(),this.status=nE.HARVEST),this.progress=0)}}work(e){if(this.isWorking()&&this.status!==nE.GROWING&&this.crop!==Cu.NONE)if(this.status===nE.FALLOW){if(this.calendarService.getSeason()===Hm.SPRING)return this.status=nE.PLANTING,!0}else{if(this.status===nE.PLANTING)return this.progress<100&&(this.progress+=e/this.getSize(),this.progress>=100&&(this.progress=0,this.status=nE.GROWING)),!0;if(this.status===nE.HARVEST){const e=Su[Cu[this.crop]];if(this.resourcesService.hasLimit(e))return!(e!==Su.APPLE||!this.royalService.pickGoldenApple())||(this.resourcesService.increaseResource(e,1,this.getName()),this.growth-=1,this.growth<=0&&(this.status=nE.NO_FRUITS),!0)}else if(this.status===nE.CLEAR)return this.progress<100&&(this.progress+=e/this.getSize(),this.progress>=100&&(this.progress=0,this.status=nE.FALLOW)),!0}return!1}fireWorker(){return!1}hireWorker(){return!1}getWorkers(){return 0}hasWork(){return this.isWorking()&&this.status!==nE.GROWING&&this.crop!==Cu.NONE&&(this.status===nE.FALLOW&&this.calendarService.getSeason()===Hm.SPRING||this.status===nE.PLANTING||this.status===nE.CLEAR||this.status===nE.HARVEST&&this.resourcesService.hasLimit(Su[Cu[this.crop]]))}getDetails(){return this.crop!==Cu.NONE?"growing difficulty: "+so.getCrop(this.crop).GROWTH+"<br>fruiting difficulty: "+so.getCrop(this.crop).FRUITING+"<br>yield multiplier: "+so.getCrop(this.crop).YIELD_MULTIPLIER+"<br>"+super.getDetails():super.getDetails()}getHappinessEffect(){return 0}isCombinable(){return!0}isSplittable(){return!0}combine(e,n){if(this.getBuildingType()===e.getBuildingType()){this.modalService.open(Lu.CONFIRM),this.modalService.setModalText(this.crop===e.crop?" Are you sure you want to combine "+this.getName()+" of size "+this.getSize()+" with "+e.getName()+" of size "+e.getSize()+"?<br>Resulting "+this.getName()+" of size "+(this.getSize()+e.getSize())+" will be changed to fallow if both are in different stages":" Are you sure you want to combine "+this.getName()+" of size "+this.getSize()+" with "+e.getName()+" of size "+e.getSize()+"?<br>Resulting "+this.getName()+" of size "+(this.getSize()+e.getSize())+" will be changed to fallow");const t=this.modalService.registerForConfirmation().subscribe(l=>{if(t.unsubscribe(),l){if(this.crop===e.crop)if(this.status===e.status)if(this.status===nE.HARVEST)this.growth+=e.growth;else{let n=this.progress*this.getSize();n+=e.progress*e.getSize(),this.progress=n/(this.getSize()+e.getSize())}else this.status=nE.FALLOW,this.progress=0,this.growth=0;else this.status=nE.FALLOW,this.progress=0,this.growth=0;this.currentSize+=e.getSize(),n.finaliseCombine(!0)}else n.finaliseCombine(!1)})}}split(e){this.modalService.open(Lu.INPUT),this.modalService.setModalText("Set split size (1-"+(this.getSize()-1)+")");const n=this.modalService.registerForValueResponse().subscribe(t=>{if(n.unsubscribe(),!isNaN(t)&&0!==t)if(t>=1&&t<this.getSize()){const n=Math.floor(this.growth*t/this.currentSize);this.growth-=n,this.currentSize-=Number(t),e.finaliseSplit(new tE(this.servicesService,this.servicesService.getService(xu.ID).getNextId(),Number(t),this.crop,this.status,this.progress,!0,n,this.level).build())}else this.modalService.info("Invalid size value!")})}}class lE extends MS{constructor(e=null,n=-1,t=0,l=xS.FETCHING_INPUT,i=[],r=[],s=!1,u=null,o=1){super(e,n,Ou.WINDMILL,lo.FIELD.WINDMILL,l,t,i,r,s,u,o)}}class iE extends MS{constructor(e=null,n=-1,t=0,l=xS.FETCHING_INPUT,i=[],r=[],s=!1,u=null,o=1){super(e,n,Ou.BAKERY,lo.VILLAGE.BAKERY,l,t,i,r,s,u,o)}}var rE=function(e){return e.FISHING="fishing",e.WAITING_FOR_FISH="waiting for fish",e.FETCHING_WHEAT="fetching wheat",e.PRODUCING_BAIT="producing fish food",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.WAITING_FOR_WAREHOUSE_SPACE_FISH_FOOD="waiting for warehouse space",e.TRANSPORTING_FISH="transporting fish",e.TRANSPORTING_BAIT="transporting fish food",e}({});class sE extends TS{constructor(e=null,n=-1,t=0,l=rE.WAITING_FOR_FISH,i=!1,r=1){super(n,Ou.FISHERS_HUT,e,lo.SEA.FISHERS_HUT,i,!0,!0,r),this.progress=t,this.status=l,this.servicesService&&(this.seaService=e.getServiceByRegion(Hu.SEA))}callback(e){"bait"===e?(this.status=rE.FETCHING_WHEAT,this.progress=0):"fishing"===e&&(this.status=rE.WAITING_FOR_FISH,this.progress=0)}getLine(e){switch(e){case vS.FIRST:return!this.gameService.isEnabled(bu.FISH_FOOD)||this.status!==rE.FISHING&&this.status!==rE.WAITING_FOR_FISH&&this.status!==rE.TRANSPORTING_FISH&&this.status!==rE.WAITING_FOR_WAREHOUSE_SPACE?OS.buttonValue("fishing","fishing"):OS.buttonValue("produce fish food","bait");case vS.SECOND:return OS.textValue(this.status);case vS.THIRD:return OS.progressValue(this.progress);case vS.FOURTH:return OS.emptyValue()}}tick(){if(this.working)if(this.status===rE.WAITING_FOR_FISH)this.seaService.reduceFish(1)&&(this.status=rE.FISHING);else if(this.status===rE.FISHING){if(this.progress<100&&(this.progress+=this.getPower(),this.progress>=100)){if(this.progress=0,this.servicesService.getService(xu.ROYAL).catchGoldenFish())return;this.status=rE.TRANSPORTING_FISH}}else if(this.status===rE.TRANSPORTING_FISH||this.status===rE.WAITING_FOR_WAREHOUSE_SPACE){const e=this.resourcesService.increaseResource(Su.FISH,1,this.getName());this.status=e?rE.WAITING_FOR_FISH:rE.WAITING_FOR_WAREHOUSE_SPACE}else if(this.status===rE.FETCHING_WHEAT)this.resourcesService.decreaseResource(Su.WHEAT,2,this.getName())&&(this.status=rE.PRODUCING_BAIT);else if(this.status===rE.PRODUCING_BAIT)this.progress<100&&(this.progress+=this.getPower(),this.progress>=100&&(this.progress=0,this.status=rE.TRANSPORTING_BAIT));else if(this.status===rE.TRANSPORTING_BAIT||this.status===rE.WAITING_FOR_WAREHOUSE_SPACE_FISH_FOOD){const e=this.resourcesService.increaseResource(Su.FISH_FOOD,1,this.getName());this.status=e?rE.FETCHING_WHEAT:rE.WAITING_FOR_WAREHOUSE_SPACE_FISH_FOOD}}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,working:this.working}}getDescription(){return"Fishers catch fish in the sea"}}class uE extends TS{constructor(e=null,n=-1,t=lo.FORT.BARRACKS.SIZE,l=1){super(n,Ou.BARRACKS,e,lo.FORT.BARRACKS,!1,!0,!1,l),this.barracksSize=t,this.servicesService&&(this.armyService=e.getService(xu.ARMY),this.modalService=e.getService(xu.MODAL))}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,barracksSize:this.barracksSize}}build(){return this.servicesService.getService(xu.GAME).isEnabled(bu.ARMY)||this.servicesService.getService(xu.GAME).enable(bu.ARMY),this.armyService.increaseBarracks(this.barracksSize),this}prepareDemolish(){return this.armyService.getFreeBarracks()>=this.barracksSize?(this.armyService.decreaseBarracks(this.barracksSize),!0):(this.modalService.info("Your troops would have nowhere to sleep!<br>You cannot demolish barracks right now!"),!1)}getLine(e){switch(e){case vS.FIRST:return OS.textValue("capacity: "+this.barracksSize);case vS.SECOND:case vS.THIRD:case vS.FOURTH:return OS.emptyValue()}}getHappinessEffect(){return 0}getEffects(){return 0}getPermanentEffects(){return 0}}var oE=function(e){return e.TRAINING="training",e.NO_RECRUITS="no recruits",e}({});class aE extends TS{constructor(e=null,n=-1,t=0,l=!1,i=oE.NO_RECRUITS,r=1,s=null){super(n,Ou.TRAINING_SQUARE,e,lo.FORT.TRAINING_SQUARE,l,!0,!0,r),this.progress=t,this.status=i,this.workSettings=s,this.servicesService&&(this.armyService=e.getService(xu.ARMY),this.managementService=e.getService(xu.MANAGEMENT),this.calendarService=e.getService(xu.CALENDAR),null===this.workSettings)&&(this.workSettings=new kS(!0,this.buildingType,[!0,!0,!0,!0],null,null,!0,!0,"work when there are troops to train"))}customWorkRule(){return this.armyService.hasRecruits()}getWorkSettings(){return this.workSettings}setWorkSettings(e){this.workSettings=e}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,working:this.working,workSettings:this.workSettings}}getLine(e){switch(e){case vS.FIRST:return OS.emptyValue();case vS.SECOND:return OS.textValue(this.status);case vS.THIRD:return this.status===oE.TRAINING?OS.progressValue(this.progress):OS.emptyValue();case vS.FOURTH:return OS.emptyValue()}}tick(e){this.managementService.getComplexWorkers()&&this.workSettings&&this.workSettings.enabled&&(this.isMet()?this.isWorking()||this.hireWorker():!this.isWorking()||this.status===oE.TRAINING&&0!==this.progress||this.fireWorker()),this.working&&(this.armyService.hasRecruits()?(this.status=oE.TRAINING,this.progress<100&&(this.progress+=this.getPower()),this.progress>=100&&(this.progress=0,this.armyService.progressRecruitment(1))):(this.status=oE.NO_RECRUITS,this.progress=0))}isMet(){let e=!0;return this.workSettings.seasons[this.calendarService.getSeason()]||e&&(e=!1),this.workSettings.customRuleEnabled&&e&&(e=this.customWorkRule()),e}isComplexManagement(){return!0}}class cE extends MS{constructor(e=null,n=-1,t=0,l=xS.FETCHING_INPUT,i=[],r=[],s=!1,u=null,o=1){super(e,n,Ou.TANNERY,lo.FOREST.TANNERY,l,t,i,r,s,u,o)}}class hE extends TS{constructor(e=null,n=-1,t=lo.FORT.STOCKADE.DURABILITY,l=lo.FORT.STOCKADE.DURABILITY,i=0,r=!1,s=1){super(n,Ou.STOCKADE,e,lo.FORT.STOCKADE,r,!0,!1,s),this.health=t,this.durability=l,this.progress=i,this.servicesService&&(this.armyService=e.getService(xu.ARMY),this.modalService=e.getService(xu.MODAL),this.worldService=e.getService(xu.WORLD))}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,health:this.health,durability:this.durability,progress:this.progress,working:this.working}}build(){return this.worldService.getRegion(0).defense+=lo.FORT.STOCKADE.DEFENSE,this}prepareDemolish(){return this.worldService.getRegion(0).defense-=lo.FORT.STOCKADE.DEFENSE,!0}callback(e){if("repair"===e){this.modalService.open(Lu.CONFIRM),this.modalService.setModalText("Are you sure you want to repair "+this.getName()+" for 1 log for each durability point missing?");const e=this.modalService.registerForConfirmation().subscribe(n=>{n&&(this.startProduction()||this.modalService.info("No free worker to repair stockade!")),e.unsubscribe()})}else"stop"===e&&this.fireWorker()}getLine(e){switch(e){case vS.FIRST:return OS.textValue("durability: "+this.health+"/"+this.durability);case vS.SECOND:return OS.textValue("defense: "+lo.FORT.STOCKADE.DEFENSE);case vS.THIRD:return this.health<this.durability&&!this.working?OS.buttonValue("repair","repair"):this.health<this.durability&&this.working?OS.buttonValue("stop repair","stop"):OS.emptyValue();case vS.FOURTH:return this.working?OS.progressValue(this.progress):OS.emptyValue()}}tick(e){this.working&&(this.progress<100&&(0===this.progress&&this.resourcesService.decreaseResource(Su.LOG,1,this.getName())?this.progress+=this.getPower():this.progress>0&&(this.progress+=this.getPower())),this.progress>=100&&(this.progress=0,this.health+=1),this.health===this.durability&&this.fireWorker())}getHappinessEffect(){return 0}}class dE extends MS{constructor(e=null,n=-1,t=0,l=xS.FETCHING_INPUT,i=[],r=[],s=!1,u=null,o=1){super(e,n,Ou.COTTON_MILL,lo.FIELD.COTTON_MILL,l,t,i,r,s,u,o)}}class gE extends MS{constructor(e=null,n=-1,t=0,l=xS.FETCHING_INPUT,i=[],r=[],s=!1,u=null,o=1){super(e,n,Ou.TAILOR,lo.VILLAGE.TAILOR,l,t,i,r,s,u,o)}}class pE extends MS{constructor(e=null,n=-1,t=0,l=xS.FETCHING_INPUT,i=[],r=[],s=!1,u=null,o=1){super(e,n,Ou.BREWERY,lo.FIELD.BREWERY,l,t,i,r,s,u,o)}}class mE extends TS{constructor(e=null,n=-1,t=lo.FORT.WOODEN_TOWER.DURABILITY,l=lo.FORT.WOODEN_TOWER.DURABILITY,i=0,r=!1,s=1){super(n,Ou.WOODEN_TOWER,e,lo.FORT.WOODEN_TOWER,r,!0,!1,s),this.health=t,this.durability=l,this.progress=i,this.servicesService&&(this.armyService=e.getService(xu.ARMY),this.modalService=e.getService(xu.MODAL),this.worldService=e.getService(xu.WORLD))}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,health:this.health,durability:this.durability,progress:this.progress,working:this.working}}build(){return this.worldService.getRegion(0).defense+=lo.FORT.STOCKADE.DEFENSE,this}prepareDemolish(){return this.worldService.getRegion(0).defense-=lo.FORT.STOCKADE.DEFENSE,!0}callback(e){if("repair"===e){this.modalService.open(Lu.CONFIRM),this.modalService.setModalText("Are you sure you want to repair "+this.getName()+" for 1 log for each durability point missing?");const e=this.modalService.registerForConfirmation().subscribe(n=>{n&&(this.startProduction()||this.modalService.info("No free worker to repair wooden tower!")),e.unsubscribe()})}else"stop"===e&&this.fireWorker()}getLine(e){switch(e){case vS.FIRST:return OS.textValue("durability: "+this.health+"/"+this.durability);case vS.SECOND:return OS.textValue("defense: "+lo.FORT.WOODEN_TOWER.DEFENSE);case vS.THIRD:return this.health<this.durability&&!this.working?OS.buttonValue("repair","repair"):this.health<this.durability&&this.working?OS.buttonValue("stop repair","stop"):OS.emptyValue();case vS.FOURTH:return this.working?OS.progressValue(this.progress):OS.emptyValue()}}tick(e){this.working&&(this.progress<100&&(0===this.progress&&this.resourcesService.decreaseResource(Su.LOG,1,this.getName())?this.progress+=this.getPower():this.progress>0&&(this.progress+=this.getPower())),this.progress>=100&&(this.progress=0,this.health+=1),this.health===this.durability&&this.fireWorker())}getHappinessEffect(){return 0}}class fE extends TS{constructor(e=null,n=-1,t=lo.FORT.STONE_TOWER.DURABILITY,l=lo.FORT.STONE_TOWER.DURABILITY,i=0,r=!1,s=1){super(n,Ou.STONE_TOWER,e,lo.FORT.STONE_TOWER,r,!0,!1,s),this.health=t,this.durability=l,this.progress=i,this.servicesService&&(this.armyService=e.getService(xu.ARMY),this.modalService=e.getService(xu.MODAL),this.worldService=e.getService(xu.WORLD))}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,health:this.health,durability:this.durability,progress:this.progress,working:this.working}}build(){return this.worldService.getRegion(0).defense+=lo.FORT.STOCKADE.DEFENSE,this}prepareDemolish(){return this.worldService.getRegion(0).defense-=lo.FORT.STOCKADE.DEFENSE,!0}callback(e){if("repair"===e){this.modalService.open(Lu.CONFIRM),this.modalService.setModalText("Are you sure you want to repair "+this.getName()+" for 1 stone for each durability point missing?");const e=this.modalService.registerForConfirmation().subscribe(n=>{n&&(this.startProduction()||this.modalService.info("No free worker to repair stone tower!")),e.unsubscribe()})}else"stop"===e&&this.fireWorker()}getLine(e){switch(e){case vS.FIRST:return OS.textValue("durability: "+this.health+"/"+this.durability);case vS.SECOND:return OS.textValue("defense: "+lo.FORT.STONE_TOWER.DEFENSE);case vS.THIRD:return this.health<this.durability&&!this.working?OS.buttonValue("repair","repair"):this.health<this.durability&&this.working?OS.buttonValue("stop repair","stop"):OS.emptyValue();case vS.FOURTH:return this.working?OS.progressValue(this.progress):OS.emptyValue()}}tick(e){this.working&&(this.progress<100&&(0===this.progress&&this.resourcesService.decreaseResource(Su.STONE,1,this.getName())?this.progress+=this.getPower():this.progress>0&&(this.progress+=this.getPower())),this.progress>=100&&(this.progress=0,this.health+=1),this.health===this.durability&&this.fireWorker())}getHappinessEffect(){return 0}}class SE extends MS{constructor(e=null,n=-1,t=0,l=xS.FETCHING_INPUT,i=[],r=[],s=!1,u=null,o=1){super(e,n,Ou.WINERY,lo.FIELD.WINERY,l,t,i,r,s,u,o),e&&(this.managementService=e.getService(xu.MANAGEMENT))}tick(){this.managementService.getComplexWorkers()&&this.workSettings&&this.workSettings.enabled&&(this.isMet()?this.isWorking()||this.hireWorker():this.isWorking()&&this.fireWorker()),this.working&&(this.outputStorage.length>0?this.collectOutputResources():this.inputStorage.length<this.settings.INPUT_RESOURCES.length&&0===this.outputStorage.length?this.collectInputResources()&&(this.status=xS.PREPARING):this.progress<100&&this.status===xS.PREPARING?(this.progress+=this.getPower(),this.progress>100&&(this.progress=100)):100===this.progress&&this.status===xS.PREPARING?(this.progress=0,this.status=xS.PRODUCING_OUTPUT):this.progress<100&&this.status===xS.PRODUCING_OUTPUT?(this.progress+=100/(30*Xu),this.progress>=100&&(this.progress=100)):100===this.progress&&this.status===xS.PRODUCING_OUTPUT&&(this.progress=0,this.inputStorage=[],this.outputStorage=Pu.copyResourceArray(this.settings.OUTPUT_RESOURCES),this.status=xS.TRANSPORTING_OUTPUT))}}class EE extends TS{constructor(e=null,n=-1,t=0,l=0,i=0,r=!1,s=1){super(n,Ou.TAVERN,e,lo.VILLAGE.TAVERN,r,!0,!0,s),this.progress=t,this.beer=l,this.wine=i,this.servicesService&&(this.resourcesService=e.getService(xu.RESOURCES),this.happinessService=e.getService(xu.HAPPINESS),this.managementService=e.getService(xu.MANAGEMENT))}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,beer:this.beer,wine:this.wine,working:this.working}}getLine(e){switch(e){case vS.FIRST:return OS.textValue(this.beer<.001&&this.wine<.001?"waiting for alcohol":this.working?"open":"closed");case vS.SECOND:return OS.emptyValue();case vS.THIRD:return OS.textValue("beer: "+Pu.round(this.beer,2));case vS.FOURTH:return OS.textValue("wine: "+Pu.round(this.wine,2))}}tick(e){if(!this.working)return;const n=this.resourcesService.getTotalPeople();for(;this.beer<10*Math.ceil(n/100)&&this.resourcesService.decreaseResource(Su.BEER,1,this.getName());)this.beer+=1;for(;this.wine<10*Math.ceil(n/100)&&this.resourcesService.decreaseResource(Su.WINE,1,this.getName());)this.wine+=1;const t=this.managementService.getAlcoholRations();if(this.happinessService.getHappiness()<=100&&n>1&&(this.beer>.002||this.wine>.002)){for(let e=n;e>0;e--){const e=Fu.randomBetween(0,1);(0===e||this.wine<.002)&&this.beer>=.002*t?(this.beer-=.005*t,this.happinessService.increaseHappiness(.01*t/n*this.getPower(),Zu.ALCOHOL_HAPPINESS_LIMIT)):(1===e||this.beer<.002)&&this.wine>=.002*t&&(this.wine-=.005*t,this.happinessService.increaseHappiness(.01*t/n*this.getPower(),Zu.ALCOHOL_HAPPINESS_LIMIT))}this.beer<0&&(this.beer=0),this.wine<0&&(this.wine=0)}else this.happinessService.getHappiness()>75&&n>1&&this.happinessService.decreaseHappiness(.01,Zu.ALCOHOL_HAPPINESS_FLOOR)}}class vE extends TS{constructor(e=null,n=-1,t=0,l=!1,i=1){super(n,Ou.GEOLOGIST,e,lo.MOUNTAINS.GEOLOGIST,l,!0,!0,i),this.progress=t,this.servicesService&&(this.gameService=e.getService(xu.GAME),this.resourcesService=e.getService(xu.RESOURCES),this.landService=e.getService(xu.LAND))}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,working:this.working}}getLine(e){switch(e){case vS.FIRST:return OS.textValue("looking for ores");case vS.SECOND:return OS.progressValue(this.progress);case vS.THIRD:return OS.textValue(this.lastFind?"last find: "+Pu.prepareResourceName(this.lastFind)+" deposit":"last find: nothing");case vS.FOURTH:return OS.emptyValue()}}tick(e){if(this.working)if(this.progress<100)this.progress+=this.getPower(),this.progress>100&&(this.progress=100);else{const e=[];if(this.landService.getOre(Su.COAL)<50&&e.push({item:Su.COAL,chance:this.settings.COAL_CHANCE}),this.landService.getOre(Su.COPPER_ORE)<50&&e.push({item:Su.COPPER_ORE,chance:this.settings.COPPER_CHANCE}),this.landService.getOre(Su.TIN_ORE)<50&&e.push({item:Su.TIN_ORE,chance:this.settings.TIN_CHANCE}),this.gameService.isEnabled(bu.GOLD)&&this.landService.getOre(Su.GOLD_ORE)<50&&e.push({item:Su.GOLD_ORE,chance:this.settings.GOLD_CHANCE}),this.gameService.isEnabled(bu.SILVER)&&this.landService.getOre(Su.SILVER_ORE)<50&&e.push({item:Su.SILVER_ORE,chance:this.settings.SILVER_CHANCE}),this.gameService.isEnabled(bu.IRON)&&this.landService.getOre(Su.IRON_ORE)<50&&e.push({item:Su.IRON_ORE,chance:this.settings.IRON_CHANCE}),e.length>0){this.progress=0;const n=Fu.randomElement(e);n?(this.landService.increaseOre(n,1),this.lastFind=n):this.lastFind=null}}}}class bE extends MS{constructor(e=null,n=-1,t=0,l=xS.FETCHING_INPUT,i=[],r=[],s=!1,u=null,o=1){super(e,n,Ou.STONEMASON,lo.MOUNTAINS.STONEMASON,l,t,i,r,s,u,o)}}class OE{constructor(e=null,n=-1,t=0){this.servicesService=e,this.sharks=t,this.buildingType=Ou.SHARKS,this.id=n,this.servicesService&&(this.resourcesService=e.getService(xu.RESOURCES),this.seaService=e.getService(xu.SEA),this.effectsService=e.getService(xu.EFFECTS))}callback(e){}getBuildingType(){return this.buildingType}getComplexity(){return 0}getCost(){return new Map}getName(){return 1===this.sharks?"Shark":"Sharks"}getLine(e){switch(e){case vS.FIRST:return OS.textValue("sharks: "+this.sharks);case vS.SECOND:case vS.THIRD:case vS.FOURTH:return OS.emptyValue()}}getSize(){return 0}buildOnMountain(){return!1}tick(){1===Fu.randomBetween(1,lo.SEA.SHARKS.FEED_CHANCE)&&(this.seaService.reduceFish(this.sharks)||(this.sharks-=lo.SEA.SHARKS.FEED_AMOUNT)),this.seaService.getFishAmount()>this.sharks*lo.SEA.SHARKS.BREED_THRESHOLD&&1===Fu.randomBetween(1,lo.SEA.SHARKS.BREED_CHANCE)&&(this.sharks+=Math.floor(this.getPower())),this.seaService.getFishAmount()<this.sharks*lo.SEA.SHARKS.DIE_THRESHOLD&&1===Fu.randomBetween(1,lo.SEA.SHARKS.DIE_CHANCE)&&(this.sharks-=1)}build(){return this}getBuildingId(){return this.id}toJSON(){return{id:this.id,buildingType:this.buildingType,sharks:this.sharks}}prepareDemolish(){return this.stopProduction(),!1}finishDemolish(){}startProduction(){return!1}stopProduction(){}isStoppable(){return!1}isWorking(){return!0}isDemolishable(){return!1}getDescription(){return"Sea predators"}fireWorker(){return!1}hireWorker(){return!1}getWorkers(){return 0}getSharks(){return this.sharks}reduceSharks(e){return this.sharks>=e&&(this.sharks-=e,!0)}getEffects(){return 0}getPermanentEffects(){return 0}getDetails(){return""}hasDetails(){return!1}getPower(){return 1+this.effectsService.getNatureEffectsValue()/100}isUsedUp(){return!1}isCombinable(){return!1}isSplittable(){return!1}getHappinessEffect(){return 0}getWeatherMultiplier(){return 0}getDisplayableEffectsValue(){return 0}hasBuff(){return!1}isBuffed(){return!1}getBuff(){return null}isComplexManagement(){return!1}getWorkSettings(){return null}setWorkSettings(e){}hasUpgrade(){return!1}getUpgradeCost(){return new Map}setBuildingLevel(e){}getBuildingLevel(){return 0}getBuildingData(){return null}setBuildingData(e){}}var RE=function(e){return e.MINING="mining {res}",e.WAITING_FOR_SELECTION="waiting for ore selection",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.NO_MORE_RESOURCES="no more {res}",e.TRANSPORTING="transporting {res}",e}({});class TE extends TS{constructor(e=null,n=-1,t=0,l=RE.WAITING_FOR_SELECTION,i=!1,r=0,s=200,u=Su.NOTHING,o=1){super(n,Ou.PIT_MINE,e,lo.MOUNTAINS.PIT_MINE,i,!0,!0,o),this.progress=t,this.status=l,this.storage=r,this.resources=s,this.ore=u,this.servicesService&&(this.modalService=e.getService(xu.MODAL),this.landService=e.getService(xu.LAND))}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,working:this.working,storage:this.storage,resources:this.resources,ore:this.ore}}callback(e){if(this.ore===Su.NOTHING)if(this.landService.hasOre(Su[String(e.target.value).replace(" ","_")],20)){this.modalService.open(Lu.CONFIRM),this.modalService.setModalText("Are you sure you want to mine "+Pu.prepareResourceName(Su[String(e.target.value).replace(" ","_")])+" in this mine?");const n=this.modalService.registerForConfirmation().subscribe(t=>{t?(this.landService.decreaseOre(Su[String(e.target.value).replace(" ","_")],20),this.ore=Su[String(e.target.value).replace(" ","_")],this.status=RE.MINING,this.progress=0):e.target.selectedIndex=this.ore,n.unsubscribe()})}else this.modalService.info("Not enough "+Pu.prepareResourceName(Su[String(e.target.value).replace(" ","_")])+" deposits available<br>20 "+Pu.prepareResourceName(Su[String(e.target.value).replace(" ","_")])+" deposits required to start mining."),e.target.selectedIndex=this.ore}buildOnMountain(){return!0}isUsedUp(){return this.status===RE.NO_MORE_RESOURCES}hasBuff(){return!this.isUsedUp()&&super.hasBuff()}getLine(e){switch(e){case vS.FIRST:return this.ore!==Su.NOTHING?OS.textValue(Pu.prepareResourceName(this.ore).toLowerCase()+": "+this.resources):OS.emptyValue();case vS.SECOND:return OS.textValue(this.status.replace("{res}",Pu.prepareResourceName(this.ore).toLowerCase()));case vS.THIRD:return OS.progressValue(this.progress);case vS.FOURTH:if(this.ore===Su.NOTHING){const e=[];return e.push(Su[Su.NOTHING].replace("_"," ")),e.push(Su[Su.COAL].replace("_"," ")),e.push(Su[Su.GOLD_ORE].replace("_"," ")),e.push(Su[Su.SILVER_ORE].replace("_"," ")),e.push(Su[Su.COPPER_ORE].replace("_"," ")),e.push(Su[Su.TIN_ORE].replace("_"," ")),e.push(Su[Su.IRON_ORE].replace("_"," ")),OS.dropdownValue(e,Su[this.ore])}return OS.emptyValue()}}isStoppable(){return this.resources>0}tick(e){if(this.ore!==Su.NOTHING){if(this.resources<=0&&0===this.storage&&(this.status!==RE.NO_MORE_RESOURCES&&this.servicesService.getService(xu.LOG).warning("Pit mine mined all "+Pu.prepareResourceName(this.ore)),this.status=RE.NO_MORE_RESOURCES,this.stopProduction()),!this.working)return;this.storage>0?this.resourcesService.increaseResource(this.ore,this.storage,this.getName())?(this.storage=0,this.status=RE.MINING):this.status=RE.WAITING_FOR_WAREHOUSE_SPACE:this.progress<100?(this.status=RE.MINING,this.progress+=this.getPower(),this.progress>100&&(this.progress=100)):100===this.progress&&(this.progress=0,this.resources-=1,this.storage=1,this.status=RE.TRANSPORTING)}}}var CE=function(e){return e[e.NONE=0]="NONE",e[e.COW=1]="COW",e[e.CHICKEN=2]="CHICKEN",e[e.PIG=3]="PIG",e[e.HORSE=4]="HORSE",e[e.SHEEP=5]="SHEEP",e}({});class IE extends TS{constructor(e=null,n=-1,t=lo.FIELD.PASTURE.SIZE,l=CE.NONE,i=0,r=0,s=!0,u=0,o=0,a=0,c=!1,h=1){super(n,Ou.PASTURE,e,lo.FIELD.PASTURE,s,!0,!0,h),this.currentSize=t,this.animal=l,this.progress=i,this.produceProgress=r,this.animals=u,this.food=o,this.chores=a,this.autoButcher=c,this.servicesService&&(this.modalService=e.getService(xu.MODAL),this.weatherService=e.getService(xu.WEATHER),this.calendarService=e.getService(xu.CALENDAR),this.fieldService=e.getService(xu.FIELD))}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,size:this.currentSize,animal:this.animal,progress:this.progress,produceProgress:this.produceProgress,working:this.working,animals:this.animals,food:this.food,chores:this.chores,autoButcher:this.autoButcher}}build(){return this.resourcesService.getResource(Su.CHICKEN).isVisible()||(this.resourcesService.makeVisible(Su.CHICKEN),this.logService.log("New resource discovered: "+Pu.prepareResourceName(Su.CHICKEN)),this.resourcesService.makeVisible(Su.SHEEP),this.logService.log("New resource discovered: "+Pu.prepareResourceName(Su.SHEEP)),this.resourcesService.makeVisible(Su.COW),this.logService.log("New resource discovered: "+Pu.prepareResourceName(Su.COW)),this.resourcesService.makeVisible(Su.PIG),this.logService.log("New resource discovered: "+Pu.prepareResourceName(Su.PIG)),this.resourcesService.makeVisible(Su.HORSE),this.logService.log("New resource discovered: "+Pu.prepareResourceName(Su.HORSE))),this.resourcesService.updateAnimals(),super.build()}getSize(){return this.currentSize}getComplexity(){return super.getComplexity()*(this.getSize()/this.settings.SIZE)}findButcher(){return this.fieldService.getBuildings().filter(e=>e.getBuildingType()===Ou.BUTCHER).map(e=>e).sort((e,n)=>e.getAnimalsNumber()-n.getAnimalsNumber())[0]}butcher(e=!0){const n=this.findButcher();n?n.addAnimalToButcher(this.getResourceType())&&this.decreaseAnimal(1):e||this.modalService.info("No butcher available or their work queue is full")}callback(e){if("butcher"===e&&this.animals>0)this.butcher(!1);else if("x"===e)this.autoButcher=!this.autoButcher;else if(this.animal===CE.NONE||0===this.animals)this.animal!==CE.NONE&&this.resourcesService.decreaseResourceLimit(this.getResourceType(),this.getMaxAnimals()),this.animal=CE[String(e.target.value)],this.progress=0,this.animal!==CE.NONE&&this.resourcesService.increaseResourceLimit(this.getResourceType(),this.getMaxAnimals()),this.resourcesService.updateAnimals();else{this.modalService.open(Lu.CONFIRM),this.modalService.setModalText("Are you sure you want to change animals?<br>All current animals will be moved to other pastures and if there is no enough space they will be lost");const n=this.modalService.registerForConfirmation().subscribe(t=>{t?(this.resourcesService.decreaseResourceLimit(this.getResourceType(),this.getMaxAnimals()),this.animal=CE[String(e.target.value)],this.progress=0,this.moveAnimals(this.animals),this.animals=0,this.animal!==CE.NONE&&this.resourcesService.increaseResourceLimit(this.getResourceType(),this.getMaxAnimals()),this.resourcesService.updateAnimals()):e.target.selectedIndex=this.animal-1,n.unsubscribe()})}}finishDemolish(){}prepareDemolish(){return this.stopProduction(),this.animal!==CE.NONE&&(this.moveAnimals(this.animals),this.resourcesService.decreaseResourceLimit(this.getResourceType(),this.getMaxAnimals())),!0}getLine(e){switch(e){case vS.FIRST:return this.animal!==CE.NONE?OS.textValue(CE[this.animal].toLowerCase()+": "+this.animals+"/"+this.getMaxAnimals()):OS.emptyValue();case vS.SECOND:if(this.animals>0&&this.food<0)return OS.progressValue(Math.abs(this.food),"famine");{const e=[];return e.push(CE[CE.NONE]),e.push(CE[CE.CHICKEN]),e.push(CE[CE.SHEEP]),e.push(CE[CE.COW]),e.push(CE[CE.PIG]),e.push(CE[CE.HORSE]),OS.dropdownValue(e,CE[this.animal])}case vS.THIRD:return this.animals>0&&this.findButcher()?OS.buttonCheckboxValue("butcher","butcher","auto butcher",this.autoButcher,"x"):OS.emptyValue();case vS.FOURTH:return OS.emptyValue()}}getName(){return this.animal===CE.NONE?"Pasture":CE[this.animal].charAt(0).toUpperCase()+CE[this.animal].slice(1).toLowerCase()+" pasture"}startProduction(){return this.working=!0,!0}stopProduction(){this.working=!1}tick(e){if(this.food<0&&this.calendarService.getSeason()!==Hm.WINTER&&(this.food=0),this.autoButcher&&this.animals>0&&this.animals===this.getMaxAnimals()&&this.butcher(),this.animals>0?this.calendarService.getSeason()===Hm.WINTER?(this.food-=.001*this.getAnimalSettings().SIZE*this.animals,this.food<=-100&&(this.food=0,this.decreaseAnimal(1))):(this.food-=2e-4*this.getAnimalSettings().SIZE*this.animals,this.food<=-100&&(this.food=0,this.decreaseAnimal(1))):this.food<0&&(this.food=0),this.food>=0&&this.animals>1&&this.chores<this.getSize()&&this.animals<this.getMaxAnimals()&&this.progress<100&&(this.progress+=.05/(10/this.getAnimalSettings().REPRODUCTION_SPEED)*this.animals*(1+this.effectsService.getNatureEffectsValue()/100),this.progress>=100&&(this.progress=0,this.increaseAnimal(1))),(this.animal===CE.CHICKEN||this.animal===CE.COW||this.animal===CE.SHEEP)&&(0===this.animals&&(this.produceProgress=0),this.produceProgress<100&&this.chores<this.getSize()&&(this.produceProgress+=.1*this.animals*(1+this.effectsService.getNatureEffectsValue()/100),this.produceProgress>=100)))if(this.produceProgress=0,this.animal===CE.CHICKEN){if(this.servicesService.getService(xu.ROYAL).layGoldenEgg())return;this.resourcesService.increaseResource(Su.EGG,1,this.getName())}else this.animal===CE.COW?this.resourcesService.increaseResource(Su.MILK,1,this.getName()):this.animal===CE.SHEEP&&this.resourcesService.increaseResource(Su.WOOL,1,this.getName());this.chores+=.05*this.animals,this.chores>2*this.getSize()&&(this.chores=2*this.getSize())}work(e){return this.food<100&&0===this.resourcesService.hasResource(Su.HAY,1,this.getName())?(this.resourcesService.decreaseResource(Su.HAY,1,this.getName())&&(this.food+=10),!0):this.chores>=1&&(this.chores-=e/lo.FIELD.FARM.BASE_POWER,this.chores<0&&(this.chores=0),!0)}fireWorker(){return!1}hireWorker(){return!1}getWorkers(){return 0}hasWork(){return!!this.isWorking()&&(this.food<50&&0===this.resourcesService.hasResource(Su.HAY,1,this.getName())||this.chores>=1)}getDetails(){return this.animal!==CE.NONE?"pasture size: "+Pu.round(this.getSize(),0)+"<br>progress: "+Pu.round(this.progress,2)+"%<br>produce progress: "+Pu.round(this.produceProgress,2)+"%<br>food: "+Pu.round(this.food,2)+"<br>chores: "+Pu.round(this.chores,2)+"<br>"+Pu.prepareResourceName(this.getResourceType())+" meat: "+this.getAnimalSettings().MEAT+"<br>"+Pu.prepareResourceName(this.getResourceType()).toLowerCase()+" size: "+this.getAnimalSettings().SIZE+"<br>"+super.getDetails():super.getDetails()}getHappinessEffect(){return 0}isCombinable(){return!0}isSplittable(){return!0}moveAnimals(e){const n=this.fieldService.getBuildings().filter(e=>e.getBuildingType()===Ou.PASTURE&&e!==this&&e.getAnimals()<e.getMaxAnimals()).map(e=>e).filter(e=>e.getResourceType()===this.getResourceType());for(const t of n){for(;e>0&&t.getAnimals()<t.getMaxAnimals();)t.increaseAnimal(1),e-=1,this.decreaseAnimal(1);if(0===e)return}}getResourceType(){return this.animal!==CE.NONE?Su[CE[this.animal]]:Su.NOTHING}getAnimals(){return this.animals}getAnimalSettings(){return io.getResource(this.getResourceType())}getMaxAnimals(){return this.getResourceType()!==Su.NOTHING?Math.floor(this.currentSize/this.getAnimalSettings().SIZE):0}increaseAnimal(e){this.animals+=e,this.resourcesService.updateAnimals()}decreaseAnimal(e){this.animals-=e,this.resourcesService.updateAnimals()}combine(e,n){if(this.getBuildingType()===e.getBuildingType()){this.modalService.open(Lu.CONFIRM),this.modalService.setModalText(" Are you sure you want to combine "+this.getName()+" of size "+this.getSize()+" with "+e.getName()+" of size "+e.getSize()+"?<br>Resulting "+this.getName()+" of size "+(this.getSize()+e.getSize())+" will keep animals");const t=this.modalService.registerForConfirmation().subscribe(l=>{t.unsubscribe(),l?(this.currentSize+=e.getSize(),e.animal===this.animal?this.increaseAnimal(e.getAnimals()):this.animal===CE.NONE&&e.animal!==CE.NONE?(this.animal=e.animal,this.increaseAnimal(e.getAnimals())):e.moveAnimals(e.getAnimals()),e.animals=0,n.finaliseCombine(!0)):n.finaliseCombine(!1),this.resourcesService.updateAnimals()})}}split(e){this.modalService.open(Lu.INPUT),this.modalService.setModalText("Set new pasture size (1-"+(this.getSize()-1)+")");const n=this.modalService.registerForValueResponse().subscribe(t=>{if(n.unsubscribe(),!isNaN(t)&&0!==t)if(t>=1&&t<this.getSize()){this.currentSize-=Number(t);const n=new IE(this.servicesService,this.servicesService.getService(xu.ID).getNextId(),Number(t)).build();e.finaliseSplit(n),n.animal=this.animal,this.animals>this.getMaxAnimals()&&(this.moveAnimals(this.animals-this.getMaxAnimals()),this.animals>this.getMaxAnimals()&&this.decreaseAnimal(this.animals-this.getMaxAnimals()))}else this.modalService.info("Invalid size value!");this.resourcesService.updateAnimals()})}}var yE=function(e){return e.BUTCHERING="butchering {animal}",e.WAITING_FOR_ANIMALS="waiting for animals",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.TRANSPORTING="transporting meat",e}({});class _E extends TS{constructor(e=null,n=-1,t=yE.WAITING_FOR_ANIMALS,l=0,i=!0,r=0,s=[],u=1){super(n,Ou.BUTCHER,e,lo.FIELD.BUTCHER,i,!0,!0,u),this.status=t,this.progress=l,this.outputStorage=r,this.animals=s}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,status:this.status,progress:this.progress,working:this.working,outputStorage:this.outputStorage,animals:this.animals}}getLine(e){switch(e){case vS.FIRST:return OS.textValue(this.animals.length>0?this.status.replace("{animal}",Pu.prepareResourceName(this.animals[0])):this.status);case vS.SECOND:return OS.progressValue(this.progress);case vS.THIRD:return OS.textValue("queue: "+this.animals.length+"/10");case vS.FOURTH:return OS.emptyValue()}}getAnimalsNumber(){return this.animals.length}addAnimalToButcher(e){return this.animals.length<10&&(this.animals.push(e),!0)}tick(e){if(this.working)if(this.animals.length>0&&0===this.outputStorage)this.status=yE.BUTCHERING,this.progress<100?(this.progress+=this.getPower()/io.getResource(this.animals[0]).BUTCHERING_DIFFICULTY,this.progress>100&&(this.progress=100)):(this.status=yE.TRANSPORTING,this.progress=0,this.outputStorage=io.getResource(this.animals.shift()).MEAT,this.resourcesService.increaseResource(Su.MEAT,this.outputStorage,this.getName())||(this.status=yE.WAITING_FOR_WAREHOUSE_SPACE));else if(0!==this.outputStorage){const e=this.resourcesService.getResource(Su.MEAT).getFreeSpace();e>=this.outputStorage?this.resourcesService.increaseResource(Su.MEAT,this.outputStorage,this.getName())&&(this.outputStorage=0,this.status=yE.WAITING_FOR_ANIMALS):this.resourcesService.increaseResource(Su.MEAT,e,this.getName())&&(this.outputStorage-=e)}else 0===this.animals.length&&(this.status=yE.WAITING_FOR_ANIMALS)}}class AE extends MS{constructor(e=null,n=-1,t=0,l=xS.FETCHING_INPUT,i=[],r=[],s=!1,u=null,o=1){super(e,n,Ou.MINT,lo.MOUNTAINS.MINT,l,t,i,r,s,u,o)}}var wE=function(e){return e[e.CONSTRUCTION=0]="CONSTRUCTION",e[e.BUILT=1]="BUILT",e[e.ABDICATED=2]="ABDICATED",e[e.USED=3]="USED",e}({});class NE extends TS{constructor(e,n,t,l,i,r,s,u,o,a){super(e,n,t,l,a>0,!1,!0,1),this.progress=i,this.maxProgress=r,this.stage=s,this.state=u,this.year=o,this.workers=a,this.maxWorkers=5,this.prepareIcons()}toJSON(){return{id:this.id,buildingType:this.buildingType,progress:this.progress,maxProgress:this.maxProgress,stage:this.stage,state:this.state,year:this.year,workers:this.workers}}prepareIcons(){this.iconsValue=[],this.settings.STAGES[this.stage]&&this.settings.STAGES[this.stage].cost.forEach(e=>this.iconsValue.push({name:Su[e.resource],path:"resources",prefix:e.amount,suffix:""}))}callback(e){if("add"===e){const e=this.settings.STAGES[this.stage],n=new Map;e.cost.forEach(e=>n.set(e.resource,e.amount)),this.resourcesService.decreaseResources(n,this.getName(),!0)&&(this.stage+=1,this.maxProgress+=e.progress,this.prepareIcons())}else if("abdicate"===e){this.modalService.open(Lu.ABDICATION);const e=this.modalService.registerForAbdication().subscribe(n=>{e.unsubscribe(),n&&(this.state=wE.ABDICATED,this.servicesService.getService(xu.GAME).incrementAbdicationLevel())})}else"hire"===e?this.hireWorker():"fire"===e&&this.fireWorker()}getName(){return this.progress>=100?super.getName():super.getName()+" construction"}getLine(e){switch(e){case vS.FIRST:return this.state===wE.CONSTRUCTION?OS.progressValue(this.progress,Pu.round(this.progress,2)+"% / "+this.maxProgress+"%"):OS.textValue("built in year "+this.year);case vS.SECOND:return this.state===wE.CONSTRUCTION?OS.iconValue(this.iconsValue):this.state===wE.BUILT?OS.buttonValue(this.getAbdicationText(),"abdicate"):OS.emptyValue();case vS.THIRD:return this.maxProgress<100?OS.buttonValue("add materials","add"):OS.emptyValue();case vS.FOURTH:return this.state===wE.CONSTRUCTION?OS.twoButtonValue("hire worker","hire",this.workers+"/"+this.maxWorkers,"fire worker","fire"):OS.emptyValue()}}getAbdicationText(){return"abdicate"}tick(e){this.isWorking()&&(this.progress>=100&&(this.stopProduction(),this.addPermanentEffect(),this.progress=100,this.state=wE.BUILT,this.year=this.servicesService.getService(xu.CALENDAR).getYear(),this.getBuildingType()===Ou.ASCENSION_TEMPLE&&this.servicesService.getService(xu.LOG).mystical("As you enter the temple you have strange feeling of many eyes watching you, <br>however there is nobody there. At the end of a big hall you find a golden altar.<br>This is it, your whole life lead you here. You feel safe.")),this.progress<this.maxProgress&&(this.progress+=.001*this.getPower()*this.workers))}getEffects(){return this.state===wE.CONSTRUCTION?this.effectsService.getBuildingEffectsValue(Ou.CONSTRUCTION,!1):super.getEffects()}getPermanentEffects(){return this.state===wE.CONSTRUCTION?this.effectsService.getBuildingEffectsValue(Ou.CONSTRUCTION,!0):super.getPermanentEffects()}getHappinessEffect(){return this.state===wE.CONSTRUCTION?super.getHappinessEffect():0}isStoppable(){return this.state===wE.CONSTRUCTION}isFinished(){return this.state!==wE.CONSTRUCTION}fireWorker(){return this.workers>0&&(this.resourcesService.fireWorker(1),this.workers-=1,!0)}hireWorker(){return!!(this.workers<this.maxWorkers&&this.resourcesService.hireWorker())&&(this.workers+=1,!0)}getWorkers(){return this.workers}isWorking(){return this.workers>0}startProduction(){if(0===this.workers){for(;this.workers<this.maxWorkers&&this.resourcesService.hireWorker();)this.workers+=1;if(this.workers>0)return!0}return!1}stopProduction(){this.workers>0&&(this.resourcesService.fireWorker(this.workers),this.workers=0)}addPermanentEffect(){this.addBuildingEffects(),this.addArmyEffects()}addBuildingEffects(){if(this.settings.BUILDING_EFFECTS&&this.settings.BUILDING_EFFECTS.length>0){const e=this.servicesService.getService(xu.EFFECTS);this.settings.BUILDING_EFFECTS.forEach(n=>{e.addBuildingEffect(new Du(this.getName(),n.building,Number(n.value),Vu.WONDER))})}}addArmyEffects(){if(this.settings.ARMY_EFFECTS&&this.settings.ARMY_EFFECTS.length>0){const e=this.servicesService.getService(xu.EFFECTS);this.settings.ARMY_EFFECTS.forEach(n=>{e.addArmyEffect(new Uu(this.getName(),n.troop,Number(n.value),Vu.WONDER))})}}verifyWonderEffects(){if(this.isFinished()){if(this.settings.BUILDING_EFFECTS){const e=this.servicesService.getService(xu.EFFECTS);this.settings.BUILDING_EFFECTS.forEach(n=>{this.effectsService.hasBuildingEffect(this.getName(),n.building)||e.addBuildingEffect(new Du(this.getName(),n.building,Number(n.value),Vu.WONDER))})}if(this.settings.ARMY_EFFECTS){const e=this.servicesService.getService(xu.EFFECTS);this.settings.ARMY_EFFECTS.forEach(n=>{this.effectsService.hasArmyEffect(this.getName(),n.troop)||e.addArmyEffect(new Uu(this.getName(),n.troop,Number(n.value),Vu.WONDER))})}}}}class PE extends NE{constructor(e=null,n=-1,t=0,l=0,i=0,r=wE.CONSTRUCTION,s=-1,u=0){super(n,Ou.STONEHENGE,e,lo.PLATEAU.STONEHENGE,t,l,i,r,s,u)}tick(e){if(super.tick(e),this.state===wE.ABDICATED){this.state=wE.USED,this.servicesService.getService(xu.GAME).enable(bu.PLATEAU),this.servicesService.getService(xu.ROYAL).increaseRoyalPoints(this.settings.RP),this.logService.log("Your abdication granted you "+this.settings.RP+" royal points");const e=this.servicesService.getService(xu.KONGREGATE);e.isAvailable()&&e.submitStat("Stonehenge",!0)}}}class kE extends TS{constructor(e=null,n=-1,t=0,l=1){super(n,Ou.MARKETPLACE,e,lo.VILLAGE.MARKETPLACE,!0,!0,!1,l),this.progress=t,this.callMerchantPrice=[{name:"coins",path:"resources",prefix:"",suffix:"25"}]}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress}}build(){return this.servicesService.getService(xu.GAME).enable(bu.MARKET),super.build()}callback(e){"bribe"===e&&(this.resourcesService.decreaseResource(Su.COINS,25,this.getName(),!0)?1===Fu.randomBetween(1,2)&&(this.progress+=50,this.progress>=100&&(this.progress=0,this.servicesService.getService(xu.MARKET).callMerchant())):this.modalService.info("Not enough coins for a bribe"))}getLine(e){switch(e){case vS.FIRST:return OS.progressValue(this.progress,"merchant arrival");case vS.SECOND:return OS.emptyValue();case vS.THIRD:return OS.iconValue(this.callMerchantPrice);case vS.FOURTH:return OS.buttonValue("bribe merchant (50% chance)","bribe")}}tick(e){1===Fu.randomBetween(1,10)&&(this.progress+=this.getPower()),this.progress>=100&&(this.servicesService.getService(xu.MARKET).callMerchant(),this.progress=0)}}class xE extends TS{constructor(e=null,n=-1,t=1){super(n,Ou.SMITHY,e,lo.MOUNTAINS.SMITHY,!1,!0,!1,t),e&&(this.gameService=e.getService(xu.GAME))}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType}}build(){return this.settings.RECIPES.forEach(e=>{this.gameService.isEnabled(e.prerequisite)&&this.servicesService.getService(xu.RECIPE).enable(e.recipe)}),this.gameService.enable(bu.BUILT_SMITHY),this}prepareDemolish(){return this.settings.RECIPES.forEach(e=>this.servicesService.getService(xu.RECIPE).disable(e.recipe)),this.gameService.disable(bu.BUILT_SMITHY),this.servicesService.getService(xu.CRAFTING).filterQueue(this.settings.RECIPES),this.servicesService.getService(xu.VILLAGE).buildings.filter(e=>e.getBuildingType()===Ou.WORKSHOP).map(e=>e).forEach(e=>{e.getRecipe()&&this.settings.RECIPES.includes(e.getRecipe().id)&&e.cancelCrafting()}),this.servicesService.getService(xu.VILLAGE).buildings.filter(e=>e.getBuildingType()===Ou.MANUFACTURE).map(e=>e).forEach(e=>{e.getRecipe()&&this.settings.RECIPES.includes(e.getRecipe().id)&&e.cancelCrafting()}),!0}}class ME extends TS{constructor(e=null,n=-1,t=!1,l=0,i=1){super(n,Ou.CHURCH,e,lo.VILLAGE.CHURCH,t,!0,!0,i),this.progress=l,this.servicesService&&(this.religionService=e.getService(xu.RELIGION))}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,working:this.working,progress:this.progress}}build(){return this.religionService.increaseFaithCap(50),this.servicesService.getService(xu.GAME).enable(bu.RELIGION),this.startProduction(),this}getLine(e){switch(e){case vS.FIRST:case vS.SECOND:return OS.emptyValue();case vS.THIRD:return OS.progressValue(this.progress,"prayers");case vS.FOURTH:return OS.emptyValue()}}prepareDemolish(){return this.religionService.decreaseFaithCap(50),!0}tick(e){if(!this.working)return;const n=this.servicesService.getService(xu.VILLAGE).getPopulation();this.progress+=.1*(Math.pow(Math.log(n),2)+1)*this.getPower(),this.progress>100&&(this.progress=0,this.religionService.increaseFaith(1))}}class DE extends NE{constructor(e=null,n=-1,t=0,l=0,i=0,r=wE.CONSTRUCTION,s=-1,u=0){super(n,Ou.PYRAMID,e,lo.PLATEAU.PYRAMID,t,l,i,r,s,u)}tick(e){if(super.tick(e),this.state===wE.ABDICATED){this.state=wE.USED,this.servicesService.getService(xu.GAME).enable(bu.PLATEAU),this.servicesService.getService(xu.ROYAL).increaseRoyalPoints(this.settings.RP),this.logService.log("Your abdication granted you "+this.settings.RP+" royal points");const e=this.servicesService.getService(xu.KONGREGATE);e.isAvailable()&&e.submitStat("Pyramid",!0)}}}class LE extends NE{constructor(e=null,n=-1,t=0,l=0,i=0,r=wE.CONSTRUCTION,s=-1,u=0){super(n,Ou.HANGING_GARDEN,e,lo.PLATEAU.HANGING_GARDEN,t,l,i,r,s,u)}tick(e){if(super.tick(e),this.state===wE.ABDICATED){this.state=wE.USED,this.servicesService.getService(xu.GAME).enable(bu.PLATEAU),this.servicesService.getService(xu.ROYAL).increaseRoyalPoints(this.settings.RP),this.logService.log("Your abdication granted you "+this.settings.RP+" royal points");const e=this.servicesService.getService(xu.KONGREGATE);e.isAvailable()&&e.submitStat("Hanging Garden",!0)}}}class FE extends NE{constructor(e=null,n=-1,t=0,l=0,i=0,r=wE.CONSTRUCTION,s=-1,u=0){super(n,Ou.COLOSSUS,e,lo.PLATEAU.COLOSSUS,t,l,i,r,s,u)}tick(e){if(super.tick(e),this.state===wE.ABDICATED){this.state=wE.USED,this.servicesService.getService(xu.GAME).enable(bu.PLATEAU),this.servicesService.getService(xu.ROYAL).increaseRoyalPoints(this.settings.RP),this.logService.log("Your abdication granted you "+this.settings.RP+" royal points");const e=this.servicesService.getService(xu.KONGREGATE);e.isAvailable()&&e.submitStat("Colossus",!0)}}}class HE extends NE{constructor(e=null,n=-1,t=0,l=0,i=0,r=wE.CONSTRUCTION,s=-1,u=0){super(n,Ou.ASCENSION_TEMPLE,e,lo.PLATEAU.ASCENSION_TEMPLE,t,l,i,r,s,u)}callback(e){if("abdicate"===e){this.modalService.open(Lu.CONFIRM),this.modalService.setModalText("Are you sure you want to ascend? <br>You will start from the beginning and all progress except for</br>royal points and permanent royal upgrades will be deleted.");const e=this.modalService.registerForConfirmation().subscribe(n=>{if(e.unsubscribe(),n){this.state=wE.ABDICATED,this.servicesService.getService(xu.ROYAL).increaseRoyalPoints(this.settings.RP),this.logService.mystical("Your ascension granted you "+this.settings.RP+" royal points");const e=this.servicesService.getService(xu.KONGREGATE);e.isAvailable()&&e.submitStat("Ascension Temple",!0),this.servicesService.getService(xu.SERIALIZER).ascensionReset()}})}else super.callback(e)}getAbdicationText(){return"ascend"}}class UE extends NE{constructor(e=null,n=-1,t=0,l=0,i=0,r=wE.CONSTRUCTION,s=-1,u=0){super(n,Ou.UNDERGROUND_CITY,e,lo.PLATEAU.UNDERGROUND_CITY,t,l,i,r,s,u)}tick(e){if(super.tick(e),this.state===wE.ABDICATED){this.state=wE.USED,this.servicesService.getService(xu.GAME).enable(bu.PLATEAU),this.servicesService.getService(xu.ROYAL).increaseRoyalPoints(this.settings.RP),this.logService.log("Your abdication granted you "+this.settings.RP+" royal points");const e=this.servicesService.getService(xu.KONGREGATE);e.isAvailable()&&e.submitStat("Underground City",!0)}}}class GE extends NE{constructor(e=null,n=-1,t=0,l=0,i=0,r=wE.CONSTRUCTION,s=-1,u=0){super(n,Ou.GREAT_LIGHTHOUSE,e,lo.PLATEAU.GREAT_LIGHTHOUSE,t,l,i,r,s,u)}tick(e){if(super.tick(e),this.state===wE.ABDICATED){this.state=wE.USED,this.servicesService.getService(xu.GAME).enable(bu.PLATEAU),this.servicesService.getService(xu.ROYAL).increaseRoyalPoints(this.settings.RP),this.logService.log("Your abdication granted you "+this.settings.RP+" royal points");const e=this.servicesService.getService(xu.KONGREGATE);e.isAvailable()&&e.submitStat("Great Lighthouse",!0)}}}class BE extends NE{constructor(e=null,n=-1,t=0,l=0,i=0,r=wE.CONSTRUCTION,s=-1,u=0){super(n,Ou.SACRED_GROVE,e,lo.PLATEAU.SACRED_GROVE,t,l,i,r,s,u)}tick(e){if(super.tick(e),this.state===wE.ABDICATED){this.state=wE.USED,this.servicesService.getService(xu.GAME).enable(bu.PLATEAU),this.servicesService.getService(xu.ROYAL).increaseRoyalPoints(this.settings.RP),this.logService.log("Your abdication granted you "+this.settings.RP+" royal points");const e=this.servicesService.getService(xu.KONGREGATE);e.isAvailable()&&e.submitStat("Sacred Grove",!0)}}}class WE extends TS{constructor(e=null,n=-1,t=1){super(n,Ou.STASH,e,lo.FORT.STASH,!1,!0,!1,t),this.servicesService&&(this.armyService=e.getService(xu.ARMY))}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType}}build(){return this.armyService.increaseStash(lo.FORT.STASH.SIZE),this}prepareDemolish(){return this.armyService.decreaseStash(lo.FORT.STASH.SIZE),!0}getLine(e){switch(e){case vS.FIRST:return OS.textValue("stash size: "+lo.FORT.STASH.SIZE);case vS.SECOND:case vS.THIRD:case vS.FOURTH:return OS.emptyValue()}}}const VE=(()=>{class e{constructor(e){this.servicesService=e,this.nextId=1,e.addService(xu.ID,this)}getNextId(){const e=this.nextId;return this.nextId+=1,e}load(e){this.nextId=e.nextId}reset(e,n){e&&(this.nextId=1)}save(){return{nextId:this.nextId}}}return e.ngInjectableDef=de({factory:function(){return new e(Le(Mm))},token:e,providedIn:"root"}),e})();var zE=function(e){return e.CRAFTING="crafting {craft}",e.WAITING_FOR_RESOURCES="waiting for resources",e.WAITING_FOR_WAREHOUSE="waiting for warehouse space",e.NO_CRAFTING="no crafting recipe",e.PRODUCTION_SETUP="production setup",e.FETCHING_MATERIALS="fetching materials",e.TRANSPORTING="transporting goods",e}({});class YE extends TS{constructor(e=null,n=-1,t=0,l=zE.NO_CRAFTING,i=!1,r=-1,s=1,u=0){super(n,Ou.MANUFACTURE,e,lo.VILLAGE.MANUFACTURE,i,!0,!0,s),this.progress=t,this.status=l,this.storage=u,this.recipe=null,this.iconsValue=[],e&&(this.resourcesService=e.getService(xu.RESOURCES),this.modalService=e.getService(xu.MODAL),this.recipeService=e.getService(xu.RECIPE),r>=0&&(this.recipe=this.recipeService.getRecipeById(r),this.prepareIcons()))}prepareIcons(){this.iconsValue=[],this.recipe&&Array.from(this.recipe.cost.entries()).forEach(e=>{this.iconsValue.push({name:Su[e[0]],path:"resources",prefix:e[1],suffix:""})})}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,working:this.working,recipe:null!==this.recipe?this.recipe.id:-1,storage:this.storage}}build(){return this.startProduction(),this}prepareDemolish(){return super.prepareDemolish()}callback(e){if("select"===e){this.modalService.open(Lu.RECIPE);const e=this.modalService.registerForValueResponse().subscribe(n=>{e.unsubscribe(),null!==n&&(this.recipe=this.recipeService.getRecipeById(n),this.prepareIcons(),this.status=zE.PRODUCTION_SETUP)})}else if("change"===e){this.modalService.open(Lu.CONFIRM),this.modalService.setModalText("Are you sure you want to change production recipe?");const e=this.modalService.registerForConfirmation().subscribe(n=>{if(e.unsubscribe(),n){this.modalService.open(Lu.RECIPE),this.modalService.setModalValue(this.recipe.id);const e=this.modalService.registerForValueResponse().subscribe(n=>{e.unsubscribe(),null!==n&&(this.progress=0,this.recipe=this.recipeService.getRecipeById(n),this.prepareIcons(),this.status=zE.PRODUCTION_SETUP)})}})}}getLine(e){switch(e){case vS.FIRST:return OS.textValue(this.recipe?this.status.replace("{craft}",Pu.prepareResourceName(this.recipe.resource)):this.status);case vS.SECOND:return OS.progressValue(this.progress);case vS.THIRD:return this.recipe?OS.iconValue(this.iconsValue):OS.emptyValue();case vS.FOURTH:return null===this.recipe?OS.buttonValue("select recipe","select"):OS.buttonValue(Pu.prepareResourceName(this.recipe.resource),"change")}}tick(e){if(this.working)if(this.status===zE.PRODUCTION_SETUP)this.progress<100?(this.progress+=.5*this.getPower()/this.recipe.craftingDifficulty,this.progress>100&&(this.progress=100)):(this.progress=0,this.status=zE.FETCHING_MATERIALS);else if(this.status===zE.CRAFTING)this.progress<100?(this.progress+=this.getPower()/this.recipe.craftingDifficulty*lo.VILLAGE.MANUFACTURE.CRAFTING_POWER,this.progress>100&&(this.progress=100)):(this.progress=0,this.storage=this.recipe.amount,this.status=zE.TRANSPORTING);else if(this.status===zE.FETCHING_MATERIALS||this.status===zE.WAITING_FOR_RESOURCES)this.status=this.resourcesService.decreaseResources(this.recipe.cost,this.getName(),!1,1,!0)?zE.CRAFTING:zE.WAITING_FOR_RESOURCES;else if(this.status===zE.TRANSPORTING||this.status===zE.WAITING_FOR_WAREHOUSE){const e=this.resourcesService.getLimit(this.recipe.resource);this.storage>e?(this.storage-=e,this.resourcesService.increaseResource(this.recipe.resource,e,this.getName()),this.status=zE.WAITING_FOR_WAREHOUSE):this.resourcesService.increaseResource(this.recipe.resource,this.storage,this.getName())&&(this.status=zE.FETCHING_MATERIALS)}}getRecipe(){return this.recipe}cancelCrafting(){this.recipe=null,this.progress=0,this.status=zE.NO_CRAFTING}}class $E extends CS{constructor(e=null,n=-1,t=0,l=0,i=100,r=100,s=0,u=1){super(e,n,Ou.LONGHOUSE,lo.VILLAGE.LONGHOUSE,t,l,i,r,s,u)}}class KE extends TS{constructor(e=null,n=-1,t=0,l=!1,i=wu.NONE,r=0,s=1){super(n,Ou.EMBASSY,e,lo.FORT.EMBASSY,l,!0,!0,s),this.progress=t,this.country=i,this.paper=r,this.servicesService&&(this.worldService=e.getService(xu.WORLD))}toJSON(){return{id:this.id,level:this.level,working:this.working,progress:this.progress,country:this.country,paper:this.paper,buildingType:this.buildingType}}callback(e){this.country=wu[String(e.target.value)],this.progress=0}getLine(e){switch(e){case vS.FIRST:const n=this.worldService.getCountriesList();return n.includes(wu[this.country])||(this.country=wu.NONE),OS.dropdownValue(n,wu[this.country]);case vS.SECOND:return this.country===wu.NONE?OS.emptyValue():OS.textValue("current standing: "+this.worldService.getCountry(this.country).diplomacy);case vS.THIRD:return this.country===wu.NONE?OS.emptyValue():OS.progressValue(this.progress);case vS.FOURTH:return this.paper<.5?OS.textValue("No enough paper"):OS.emptyValue()}}tick(e){this.working&&(this.paper<5&&this.resourcesService.decreaseResource(Su.PAPER,1,this.getName())&&(this.paper+=1),this.country!==wu.NONE&&this.paper>=1&&this.worldService.getCountry(this.country).diplomacy<100&&(this.progress<100?(this.progress+=this.getPower(),this.progress>100&&(this.progress=100)):(this.progress=0,this.paper-=.5,this.worldService.getCountry(this.country).increaseDiplomacy(1))))}getDetails(){return super.getDetails()+"paper: "+this.paper}}class jE extends MS{constructor(e=null,n=-1,t=0,l=xS.FETCHING_INPUT,i=[],r=[],s=!1,u=null,o=1){super(e,n,Ou.PAPER_MILL,lo.FOREST.PAPER_MILL,l,t,i,r,s,u,o)}}var qE=function(e){return e.MINING="mining {res}",e.WAITING_FOR_SELECTION="waiting for ore selection",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.LOOKING_FOR_NEW_ORE_VEIN="looking for new ore vein",e.TRANSPORTING="transporting {res}",e}({});class XE extends TS{constructor(e=null,n=-1,t=0,l=qE.WAITING_FOR_SELECTION,i=0,r=0,s=20,u=Su.NOTHING,o=1){super(n,Ou.DEEP_MINE,e,lo.MOUNTAINS.DEEP_MINE,r>0,!0,!0,o),this.progress=t,this.status=l,this.storage=i,this.workers=r,this.resources=s,this.ore=u,this.maxWorkers=4,this.maxResources=20*o,this.servicesService&&(this.modalService=e.getService(xu.MODAL),this.landService=e.getService(xu.LAND))}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,storage:this.storage,workers:this.workers,resources:this.resources,ore:this.ore}}callback(e){if(this.ore===Su.NOTHING)if(this.landService.hasOre(Su[String(e.target.value).replace(" ","_")],20)){this.modalService.open(Lu.CONFIRM),this.modalService.setModalText("Are you sure you want to mine "+Pu.prepareResourceName(Su[String(e.target.value).replace(" ","_")])+" in this mine?");const n=this.modalService.registerForConfirmation().subscribe(t=>{t?(this.landService.decreaseOre(Su[String(e.target.value).replace(" ","_")],20),this.ore=Su[String(e.target.value).replace(" ","_")],this.status=qE.MINING,this.progress=0):e.target.selectedIndex=this.ore,n.unsubscribe()})}else this.modalService.info("Not enough "+Pu.prepareResourceName(Su[String(e.target.value).replace(" ","_")])+" deposits available<br>20 "+Pu.prepareResourceName(Su[String(e.target.value).replace(" ","_")])+" deposits required to start mining."),e.target.selectedIndex=this.ore;else"hire"===e?this.hireWorker():"fire"===e&&this.fireWorker()}hasBuff(){return!this.isUsedUp()&&super.hasBuff()}getLine(e){switch(e){case vS.FIRST:if(this.ore!==Su.NOTHING)return OS.textValue(Pu.prepareResourceName(this.ore).toLowerCase()+": "+this.resources+"/"+this.maxResources);{const e=[];return e.push(Su[Su.NOTHING].replace("_"," ")),e.push(Su[Su.COAL].replace("_"," ")),e.push(Su[Su.GOLD_ORE].replace("_"," ")),e.push(Su[Su.SILVER_ORE].replace("_"," ")),e.push(Su[Su.COPPER_ORE].replace("_"," ")),e.push(Su[Su.TIN_ORE].replace("_"," ")),e.push(Su[Su.IRON_ORE].replace("_"," ")),OS.dropdownValue(e,Su[this.ore])}case vS.SECOND:return OS.textValue(this.status.replace("{res}",Pu.prepareResourceName(this.ore).toLowerCase()));case vS.THIRD:return this.ore!==Su.NOTHING?OS.progressValue(this.progress):OS.emptyValue();case vS.FOURTH:return this.ore!==Su.NOTHING?OS.twoButtonValue("hire worker","hire",this.workers+"/"+this.maxWorkers,"fire worker","fire"):OS.emptyValue()}}tick(e){if(this.ore!==Su.NOTHING){if(!this.isWorking())return;this.status===qE.LOOKING_FOR_NEW_ORE_VEIN?this.progress<100?(this.progress+=this.getPower()*this.workers/(10+10*this.getBuildingLevel()),this.progress>100&&(this.progress=100)):100===this.progress&&(this.progress=0,this.resources=this.maxResources,this.status=qE.MINING):this.storage>0?this.resourcesService.increaseResource(this.ore,this.storage,this.getName())?(this.storage=0,this.status=0===this.resources?qE.LOOKING_FOR_NEW_ORE_VEIN:qE.MINING):this.status=qE.WAITING_FOR_WAREHOUSE_SPACE:this.progress<100?(this.status=qE.MINING,this.progress+=this.getPower()*this.workers,this.progress>100&&(this.progress=100)):100===this.progress&&(this.progress=0,this.resources-=1,this.storage=1,this.status=qE.TRANSPORTING)}}isStoppable(){return this.status!==qE.WAITING_FOR_SELECTION}fireWorker(){return this.workers>0&&(this.resourcesService.fireWorker(1),this.workers-=1,!0)}hireWorker(){return!!(this.workers<this.maxWorkers&&this.resourcesService.hireWorker())&&(this.workers+=1,!0)}getWorkers(){return this.workers}isWorking(){return this.workers>0}startProduction(){if(0===this.workers){for(;this.workers<this.maxWorkers&&this.resourcesService.hireWorker();)this.workers+=1;if(this.workers>0)return!0}return!1}stopProduction(){this.workers>0&&(this.resourcesService.fireWorker(this.workers),this.workers=0)}setBuildingLevel(e){super.setBuildingLevel(e),this.maxResources=20*this.getBuildingLevel(),this.resources+=20}getBuildingData(){return[this.ore,this.resources,this.status]}setBuildingData(e){this.ore=e[0],this.resources=e[1],this.status=e[2],this.resources>0&&(this.status=qE.MINING)}}var QE=function(e){return e.GATHERING_FOOD="gathering food",e.GATHERING_RESOURCES="gathering resources",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.TRANSPORTING="transporting",e}({}),ZE=function(e){return e[e.FOOD=0]="FOOD",e[e.RESOURCES=1]="RESOURCES",e}({});class JE extends TS{constructor(e=null,n=-1,t=0,l=QE.GATHERING_FOOD,i=0,r=ZE.FOOD,s=[],u=1){super(n,Ou.GATHERERS_CAMP,e,lo.FOREST.GATHERERS_CAMP,i>0,!0,!0,u),this.progress=t,this.status=l,this.workers=i,this.mode=r,this.storage=s,this.lastFind=null,this.maxWorkers=5,this.servicesService&&(this.weatherService=e.getService(xu.WEATHER))}rollForFind(){let e=null;return this.mode===ZE.FOOD?e=Fu.randomElement([{item:Su.BERRY,chance:this.settings.BERRY_CHANCE},{item:Su.MUSHROOM,chance:this.settings.MUSHROOM_CHANCE},{item:Su.WHEAT,chance:this.settings.WHEAT_CHANCE},{item:Su.HERBS,chance:this.settings.HERBS_CHANCE}]):this.mode===ZE.RESOURCES&&(e=Fu.randomElement([{item:Su.BRUSHWOOD,chance:this.settings.BRUSHWOOD_CHANCE},{item:Su.STONE,chance:this.settings.STONE_CHANCE},{item:Su.LOG,chance:this.settings.LOG_CHANCE},{item:Su.COPPER,chance:this.settings.COPPER_CHANCE},{item:Su.HERBS,chance:this.settings.HERBS_CHANCE}])),e}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,workers:this.workers,storage:this.storage,mode:this.mode}}callback(e){e===ZE.FOOD?(this.mode=ZE.FOOD,this.progress=0,this.status=QE.GATHERING_FOOD):e===ZE.RESOURCES?(this.mode=ZE.RESOURCES,this.progress=0,this.status=QE.GATHERING_RESOURCES):"hire"===e?this.hireWorker():"fire"===e&&this.fireWorker()}getLine(e){switch(e){case vS.FIRST:return this.mode===ZE.FOOD?OS.buttonValue("gather resources",ZE.RESOURCES):OS.buttonValue("gather food",ZE.FOOD);case vS.SECOND:return OS.textValue(this.status);case vS.THIRD:return OS.progressValue(this.progress);case vS.FOURTH:return OS.twoButtonValue("hire worker","hire",this.workers+"/"+this.maxWorkers,"fire worker","fire")}}tick(e){if(this.isWorking())if(this.status===QE.TRANSPORTING)this.storage.forEach(e=>{this.resourcesService.increaseResource(e[0],e[1],this.getName())&&(e[1]=0)}),this.storage=this.storage.filter(e=>e[1]>0),this.storage.length>=this.workers?(this.status=QE.WAITING_FOR_WAREHOUSE_SPACE,this.setStatus()):this.setStatus();else if(this.progress<100)this.setStatus(),this.progress+=this.getPower(),this.progress>100&&(this.progress=100);else if(100===this.progress){this.progress=0;const e=this.storage.length;this.lastFind=[];for(let n=0;n<this.workers-e;n++){let e=this.rollForFind();null===e||this.resourcesService.hasLimit(e)||(e=null),e?(this.lastFind.push(e),this.storage.push([e,1]),this.status=QE.TRANSPORTING):this.progress=0}}}getDetails(){let e="last find:<br>";this.lastFind&&this.lastFind.length>0?this.lastFind.forEach(n=>{e+=Pu.prepareResourceName(n)+"<br>"}):e+="nothing<br>";let n="";return e.length>"last find:<br>".length&&(n=e),n+="local storage:<br>",this.storage.forEach(e=>{n+=Pu.prepareResourceName(e[0])+": "+e[1]+"<br>"}),super.getDetails()+n}setStatus(){this.status=this.mode===ZE.FOOD?QE.GATHERING_FOOD:QE.GATHERING_RESOURCES}fireWorker(){return this.workers>0&&(this.resourcesService.fireWorker(1),this.workers-=1,!0)}hireWorker(){return!!(this.workers<this.maxWorkers&&this.resourcesService.hireWorker())&&(this.workers+=1,!0)}getWorkers(){return this.workers}isWorking(){return this.workers>0}startProduction(){if(0===this.workers){for(;this.workers<this.maxWorkers&&this.resourcesService.hireWorker();)this.workers+=1;if(this.workers>0)return!0}return!1}stopProduction(){this.workers>0&&(this.resourcesService.fireWorker(this.workers),this.workers=0)}}const ev=(()=>{class e{constructor(e,n){this.servicesService=e,this.idService=n,e.addService(xu.BUILDING_FACTORY,this)}loadBuilding(e){return e.buildingType===Ou.HUT?new IS(this.servicesService,e.id,e.occupants,e.progress,e.food,e.fuel,e.clothes,e.level):e.buildingType===Ou.HOUSE?new yS(this.servicesService,e.id,e.occupants,e.progress,e.food,e.fuel,e.clothes,e.level):e.buildingType===Ou.LONGHOUSE?new $E(this.servicesService,e.id,e.occupants,e.progress,e.food,e.fuel,e.clothes,e.level):e.buildingType===Ou.BAKERY?new iE(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===Ou.TAILOR?new gE(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===Ou.WORKSHOP?new zS(this.servicesService,e.id,e.progress,e.status,e.mode,e.working,void 0!==e.recipeId?e.recipeId:-1,e.recipe,e.level,void 0!==e.storage?e.storage:0):e.buildingType===Ou.MANUFACTURE?new YE(this.servicesService,e.id,e.progress,e.status,e.working,e.recipe,e.level,e.storage):e.buildingType===Ou.WAREHOUSE?new YS(this.servicesService,e.id,e.resource,void 0!==e.storage?e.storage:50,e.level):e.buildingType===Ou.MARKETPLACE?new kE(this.servicesService,e.id,e.progress,e.level):e.buildingType===Ou.TAVERN?new EE(this.servicesService,e.id,e.progress,e.beer,e.wine,e.working,e.level):e.buildingType===Ou.SHRINE?new qS(this.servicesService,e.id,e.progress,e.level):e.buildingType===Ou.CHURCH?new ME(this.servicesService,e.id,e.working,e.progress,e.level):e.buildingType===Ou.BARRACKS?new uE(this.servicesService,e.id,e.barracksSize,e.level):e.buildingType===Ou.EMBASSY?new KE(this.servicesService,e.id,e.progress,e.working,e.country,e.paper,e.level):e.buildingType===Ou.TRAINING_SQUARE?new aE(this.servicesService,e.id,e.progress,e.working,e.status,e.level,void 0!==e.workSettings?e.workSettings:null):e.buildingType===Ou.STOCKADE?new hE(this.servicesService,e.id,e.health,e.durability,e.progress,e.working,e.level):e.buildingType===Ou.WOODEN_TOWER?new mE(this.servicesService,e.id,e.health,e.durability,e.progress,e.working,e.level):e.buildingType===Ou.STONE_TOWER?new fE(this.servicesService,e.id,e.health,e.durability,e.progress,e.working,e.level):e.buildingType===Ou.STASH?new WE(this.servicesService,e.id,e.level):e.buildingType===Ou.LOGGERS_HUT?new AS(this.servicesService,e.id,e.progress,e.localStorage,e.status,e.working,e.level):e.buildingType===Ou.GATHERER?new US(this.servicesService,e.id,e.progress,e.status,e.working,e.mode,e.storage,e.level):e.buildingType===Ou.GATHERERS_CAMP?new JE(this.servicesService,e.id,e.progress,e.status,e.workers,e.mode,e.storage,e.level):e.buildingType===Ou.HUNTER_LODGE?new jS(this.servicesService,e.id,e.progress,e.status,e.mode,e.working,e.storage,e.storage2,e.animal,e.level):e.buildingType===Ou.TANNERY?new cE(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===Ou.PAPER_MILL?new jE(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===Ou.FORESTER?new PS(this.servicesService,e.id,e.progress,e.localStorage,e.status,e.effectiveness,e.working,e.level):e.buildingType===Ou.SAWMILL?new DS(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===Ou.FARM?new ZS(this.servicesService,e.id,e.workers,e.maxWorkers,e.level,e.status,void 0!==e.workSettings?e.workSettings:null):e.buildingType===Ou.WINDMILL?new lE(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===Ou.BUTCHER?new _E(this.servicesService,e.id,e.status,e.progress,e.working,e.outputStorage,e.animals,e.level):e.buildingType===Ou.COTTON_MILL?new dE(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===Ou.BREWERY?new pE(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===Ou.WINERY?new SE(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===Ou.FIELD?new eE(this.servicesService,e.id,e.size,e.crop,e.status,e.progress,e.working,e.growth,e.level):e.buildingType===Ou.ORCHARD?new tE(this.servicesService,e.id,e.size,e.crop,e.status,e.progress,e.working,e.growth,e.level):e.buildingType===Ou.PASTURE?new IE(this.servicesService,e.id,e.size,e.animal,e.progress,e.produceProgress,e.working,e.animals,e.food,e.chores,e.autoButcher,e.level):e.buildingType===Ou.QUARRY?new BS(this.servicesService,e.id,e.progress,e.status,e.working,e.storage,e.resources,e.level):e.buildingType===Ou.GEOLOGIST?new vE(this.servicesService,e.id,e.progress,e.working,e.level):e.buildingType===Ou.STONEMASON?new bE(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===Ou.MINT?new AE(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===Ou.SMITHY?new xE(this.servicesService,e.id,e.level):e.buildingType===Ou.PIT_MINE?new TE(this.servicesService,e.id,e.progress,e.status,e.working,e.storage,e.resources,e.ore,e.level):e.buildingType===Ou.DEEP_MINE?new XE(this.servicesService,e.id,e.progress,e.status,e.storage,e.workers,e.resources,e.ore,e.level):e.buildingType===Ou.STONEHENGE?new PE(this.servicesService,e.id,e.progress,e.maxProgress,e.stage,e.state,e.year,e.workers):e.buildingType===Ou.PYRAMID?new DE(this.servicesService,e.id,e.progress,e.maxProgress,e.stage,e.state,e.year,e.workers):e.buildingType===Ou.HANGING_GARDEN?new LE(this.servicesService,e.id,e.progress,e.maxProgress,e.stage,e.state,e.year,e.workers):e.buildingType===Ou.COLOSSUS?new FE(this.servicesService,e.id,e.progress,e.maxProgress,e.stage,e.state,e.year,e.workers):e.buildingType===Ou.UNDERGROUND_CITY?new UE(this.servicesService,e.id,e.progress,e.maxProgress,e.stage,e.state,e.year,e.workers):e.buildingType===Ou.GREAT_LIGHTHOUSE?new GE(this.servicesService,e.id,e.progress,e.maxProgress,e.stage,e.state,e.year,e.workers):e.buildingType===Ou.SACRED_GROVE?new BE(this.servicesService,e.id,e.progress,e.maxProgress,e.stage,e.state,e.year,e.workers):e.buildingType===Ou.ASCENSION_TEMPLE?new HE(this.servicesService,e.id,e.progress,e.maxProgress,e.stage,e.state,e.year,e.workers):e.buildingType===Ou.FISHERS_HUT?new sE(this.servicesService,e.id,e.progress,e.status,e.working,e.level):e.buildingType===Ou.SCHOOL_OF_FISH?new XS(this.servicesService,e.id,e.fish,void 0!==e.food?e.food:0):e.buildingType===Ou.SHARKS?new OE(this.servicesService,e.id,e.sharks):e.buildingType===Ou.CONSTRUCTION?new wS(this.servicesService,e.id,e.region,e.constructing,e.buildingComplexity,e.buildingSize,e.upgradeLevel,e.progress,e.working,void 0!==e.data?e.data:null):e.buildingType===Ou.DECONSTRUCTION?new LS(this.servicesService,e.id,e.region,e.deconstructing,e.buildingComplexity,e.buildingSize,e.progress,e.working):void console.error("Couldn't load building of type ["+e.buildingType+"]")}createBuilding(e,n=this.idService.getNextId()){return this.createBuildingShell(e,n).build()}createBuildingShell(e,n=this.idService.getNextId()){switch(e){case Ou.HUT:return new IS(this.servicesService,n);case Ou.HOUSE:return new yS(this.servicesService,n);case Ou.LONGHOUSE:return new $E(this.servicesService,n);case Ou.BAKERY:return new iE(this.servicesService,n);case Ou.TAILOR:return new gE(this.servicesService,n);case Ou.WORKSHOP:return new zS(this.servicesService,n);case Ou.MANUFACTURE:return new YE(this.servicesService,n);case Ou.WAREHOUSE:return new YS(this.servicesService,n);case Ou.MARKETPLACE:return new kE(this.servicesService,n);case Ou.TAVERN:return new EE(this.servicesService,n);case Ou.SHRINE:return new qS(this.servicesService,n);case Ou.CHURCH:return new ME(this.servicesService,n);case Ou.BARRACKS:return new uE(this.servicesService,n);case Ou.EMBASSY:return new KE(this.servicesService,n);case Ou.TRAINING_SQUARE:return new aE(this.servicesService,n);case Ou.STOCKADE:return new hE(this.servicesService,n);case Ou.WOODEN_TOWER:return new mE(this.servicesService,n);case Ou.STONE_TOWER:return new fE(this.servicesService,n);case Ou.STASH:return new WE(this.servicesService,n);case Ou.LOGGERS_HUT:return new AS(this.servicesService,n);case Ou.GATHERER:return new US(this.servicesService,n);case Ou.GATHERERS_CAMP:return new JE(this.servicesService,n);case Ou.HUNTER_LODGE:return new jS(this.servicesService,n);case Ou.TANNERY:return new cE(this.servicesService,n);case Ou.PAPER_MILL:return new jE(this.servicesService,n);case Ou.FORESTER:return new PS(this.servicesService,n);case Ou.SAWMILL:return new DS(this.servicesService,n);case Ou.FARM:return new ZS(this.servicesService,n);case Ou.WINDMILL:return new lE(this.servicesService,n);case Ou.BUTCHER:return new _E(this.servicesService,n);case Ou.COTTON_MILL:return new dE(this.servicesService,n);case Ou.BREWERY:return new pE(this.servicesService,n);case Ou.WINERY:return new SE(this.servicesService,n);case Ou.FIELD:return new eE(this.servicesService,n);case Ou.ORCHARD:return new tE(this.servicesService,n);case Ou.PASTURE:return new IE(this.servicesService,n);case Ou.QUARRY:return new BS(this.servicesService,n);case Ou.GEOLOGIST:return new vE(this.servicesService,n);case Ou.STONEMASON:return new bE(this.servicesService,n);case Ou.MINT:return new AE(this.servicesService,n);case Ou.SMITHY:return new xE(this.servicesService,n);case Ou.PIT_MINE:return new TE(this.servicesService,n);case Ou.DEEP_MINE:return new XE(this.servicesService,n);case Ou.STONEHENGE:return new PE(this.servicesService,n);case Ou.PYRAMID:return new DE(this.servicesService,n);case Ou.HANGING_GARDEN:return new LE(this.servicesService,n);case Ou.COLOSSUS:return new FE(this.servicesService,n);case Ou.UNDERGROUND_CITY:return new UE(this.servicesService,n);case Ou.GREAT_LIGHTHOUSE:return new GE(this.servicesService,n);case Ou.SACRED_GROVE:return new BE(this.servicesService,n);case Ou.ASCENSION_TEMPLE:return new HE(this.servicesService,n);case Ou.FISHERS_HUT:return new sE(this.servicesService,n);case Ou.SCHOOL_OF_FISH:return new XS(this.servicesService,n);case Ou.SHARKS:return new OE(this.servicesService,n);case Ou.CONSTRUCTION:console.error("Building factory cannot create construction sites!");break;case Ou.DECONSTRUCTION:console.error("Building factory cannot create deconstruction sites!");break;default:console.error("Couldn't construct building of type ["+Ou[e]+"]!")}}}return e.ngInjectableDef=de({factory:function(){return new e(Le(Mm),Le(VE))},token:e,providedIn:"root"}),e})(),nv=(()=>{class e{constructor(e,n,t){this.servicesService=e,this.calendarService=n,this.logService=t,this.buildingEffects=[],this.natureEffects=[],this.armyEffects=[],e.addService(xu.EFFECTS,this),this.daySubscription=n.registerForDayChange().subscribe(e=>{this.buildingEffects.forEach(e=>{e.duration>0&&(e.duration-=1)}),this.armyEffects.forEach(e=>{e.duration>0&&(e.duration-=1)}),this.natureEffects.forEach(e=>{e.duration>0&&(e.duration-=1)})})}load(e){this.buildingEffects=[],e.buildingEffects.forEach(e=>{this.buildingEffects.push(new Du(e.name,e.building,e.effect,e.duration))}),this.armyEffects=[],e.armyEffects.forEach(e=>{this.armyEffects.push(new Uu(e.name,e.troop,e.effect,e.duration))}),this.natureEffects=[],e.natureEffects.forEach(e=>{this.natureEffects.push(new Wu(e.name,e.effect,e.duration))})}save(){return{buildingEffects:this.buildingEffects,armyEffects:this.armyEffects,natureEffects:this.natureEffects}}reset(e,n){e?(this.buildingEffects=[],this.armyEffects=[],this.natureEffects=[]):n?(this.buildingEffects=this.buildingEffects.filter(e=>e.isRoyal()),this.armyEffects=this.armyEffects.filter(e=>e.isRoyal()),this.natureEffects=this.natureEffects.filter(e=>e.isRoyal())):(this.buildingEffects=this.buildingEffects.filter(e=>e.isRoyal()||e.isWonder()),this.armyEffects=this.armyEffects.filter(e=>e.isRoyal()||e.isWonder()),this.natureEffects=this.natureEffects.filter(e=>e.isRoyal()||e.isWonder()))}tick(e){this.buildingEffects=this.buildingEffects.filter(e=>0!==e.duration),this.armyEffects=this.armyEffects.filter(e=>0!==e.duration),this.natureEffects=this.natureEffects.filter(e=>0!==e.duration)}getBuildingEffectsValue(e,n=!1,t=-1){let l=0;return t>0?this.buildingEffects.filter(n=>n.building===e||n.building===Ou.ALL).filter(e=>e.isPermanent()===n).filter(e=>!e.isBuff()||e.isBuff()&&e.buff===t).forEach(e=>l+=e.effect):this.buildingEffects.filter(n=>n.building===e||n.building===Ou.ALL).filter(e=>e.isPermanent()===n).forEach(e=>l+=e.effect),l}getBuildingEffects(e,n=-1){return e?n>0?this.buildingEffects.filter(n=>n.building===e||n.building===Ou.ALL).filter(e=>e.buff===n):this.buildingEffects.filter(n=>n.building===e||n.building===Ou.ALL):this.buildingEffects}hasWonderEffects(e){return this.buildingEffects.filter(n=>n.name===e).length>0||this.armyEffects.filter(n=>n.name===e).length>0||this.natureEffects.filter(n=>n.name===e).length>0}getNatureEffectsValue(){let e=0;return this.natureEffects.forEach(n=>e+=n.effect),e}getNatureEffects(){return this.natureEffects}addNatureEffect(e,n=!0){if(this.natureEffects.push(e),n){let n=e.name;e.isPermanent()?n+=" will permanently affect ":n+=" will affect ",n+="most natural sources with ",n+=e.effect>0?"+"+e.effect+"%":e.effect+"%",n+=" of their base power",e.isPermanent()||(n+=" for "+e.duration+" days"),this.logService.log(n)}}addBuildingEffect(e,n=!0){if(this.buildingEffects.push(e),n){let n=e.name;e.isPermanent()?n+=" will permanently affect ":n+=" will affect ",n+=e.building===Ou.ALL?"all buildings with ":Pu.prepareBuildingName(e.building)+" with ",n+=e.effect>0?"+"+e.effect+"%":e.effect+"%",n+=e.building===Ou.ALL?" of their base power":" of its base power",e.isPermanent()||(n+=e.duration%Qu==0?e.duration===Qu?" for "+e.duration/Qu+" year":" for "+e.duration/Qu+" years":" for "+e.duration+" days"),this.logService.log(n)}}addArmyEffect(e,n=!0){if(this.armyEffects.push(e),n){let n=e.name;e.isPermanent()?n+=" will permanently affect ":n+=" will affect ",n+=e.troop===_u.ALL?"all troops with ":Pu.prepareTroopName(e.troop)+" with ",n+=e.effect>0?"+"+e.effect+"%":e.effect+"%",n+=" of their base strength and defense",e.isPermanent()||(n+=" for "+e.duration+" days"),this.logService.log(n)}}getArmyEffects(){return this.armyEffects}hasBuildingEffect(e,n){return void 0!==this.buildingEffects.find(t=>t.name===e&&t.building===n)}hasArmyEffect(e,n){return void 0!==this.armyEffects.find(t=>t.name===e&&t.troop===n)}}return e.ngInjectableDef=de({factory:function(){return new e(Le(Mm),Le(Gm),Le(Bm))},token:e,providedIn:"root"}),e})();class tv{constructor(e,n,t,l,i){this.forestSizeRule=e,this.forestSizeRuleEnabled=n,this.landSizeRule=t,this.landSizeRuleEnabled=l,this.forestSizeReserved=i}}const lv=(()=>{class e{constructor(e,n,t,l,i){this.servicesService=e,this.effectsService=n,this.gameService=t,this.optionsService=l,this.logService=i,this.land=to.START_LAND,this.forest=to.START_FOREST,this.mountains=to.START_MOUNTAINS,this.takenLand=0,this.ores=[[Su.COAL,0],[Su.GOLD_ORE,0],[Su.SILVER_ORE,0],[Su.COPPER_ORE,0],[Su.TIN_ORE,0],[Su.IRON_ORE,0]],this.forestGrowTick=0,this.forestGrowTicks=to.FOREST_GROW_TICKS,this.forestGrowPercentage=to.FOREST_GROW_PERCENTAGE,this.defaultForestOptions=new tv(0,!1,25,!0,0),this.forestOptions=new tv(0,!1,25,!0,0),this.servicesService.addService(xu.LAND,this)}load(e){this.land=e.land,this.forest=e.forest,this.mountains=e.mountains,this.forestGrowTick=e.forestGrowTick,this.takenLand=e.takenLand,e.forestLandLimit&&(this.forestOptions=new tv(0,!1,e.forestLandLimit,!0,0)),e.forestOptions&&(this.forestOptions=e.forestOptions),this.ores=e.ores}save(){return{land:this.land,forest:this.forest,mountains:this.mountains,forestGrowTick:this.forestGrowTick,takenLand:this.takenLand,forestOptions:this.forestOptions,ores:this.ores}}reset(e,n){this.land=to.START_LAND,this.forest=to.START_FOREST,this.mountains=to.START_MOUNTAINS,this.takenLand=0,this.optionsService.getOption(Dm.KEEP_MANAGEMENT_SETTINGS_ON_RESET)&&!e||(this.forestOptions=new tv(0,!1,25,!0,0)),this.ores=[[Su.COAL,0],[Su.GOLD_ORE,0],[Su.SILVER_ORE,0],[Su.COPPER_ORE,0],[Su.TIN_ORE,0],[Su.IRON_ORE,0]]}tick(e){this.growForest()}growForest(){if(this.forestGrowTick<this.forestGrowTicks&&(this.forestGrowTick+=1),this.forestGrowTick===this.forestGrowTicks){let e=Math.floor(this.forestGrowPercentage*this.forest*(1+this.effectsService.getNatureEffectsValue()/100));e<to.MINIMAL_FOREST_GROWTH&&(e=to.MINIMAL_FOREST_GROWTH),this.increaseForest(e),this.forestGrowTick=0}}removeForest(e){this.forest>=e&&(this.forest-=e)}reduceForest(e){const n=this.forest;return this.forest-e>=this.forestOptions.forestSizeReserved&&(this.forest-=e,this.land+=e,this.gameService.isEnabled(bu.FORESTER)||(n>=400&&this.forest<400&&this.logService.warning("There are less than 400 trees in the forest!"),n>=250&&this.forest<250&&this.logService.warning("There are less than 250 trees in the forest!"),n>=100&&this.forest<100&&(this.logService.warning("Critical forest size!"),this.logService.warning("There are less than 100 trees in the forest!"))),!0)}increaseForest(e,n=!0){if(n){let n=0;this.forestOptions.landSizeRuleEnabled&&(n=this.forestOptions.landSizeRule),n<0&&(n=0);let t=this.land-n;return t<0&&(t=0),t-e>=0?(this.forest+=e,this.land-=e,0):(this.forest+=t,this.land-=t,e-t)}return this.forest+=e,0}removeLand(e){this.land>=e&&(this.land-=e)}reduceLand(e){let n=0;return this.forestOptions.landSizeRuleEnabled&&(n=this.forestOptions.landSizeRule),n<0&&(n=0),this.land-n-e>=0&&(this.land-=e,!0)}increaseLand(e,n=!1){return this.land+=e,n||(this.takenLand-=e),!0}increaseMountains(e){return this.mountains+=e,!0}getForest(){return this.forest}decreaseLand(e){if(!(this.land-e>=0))return e-this.land;this.takenLand+=e,this.land-=e}hasLand(e){return this.land-e>=0}getLand(){return this.land}getMountains(){return this.mountains}hasMountains(e){return this.mountains-e>=0}removeMountains(e){this.mountains>=e&&(this.mountains-=e)}decreaseMountains(e){if(!(this.mountains-e>=0))return e-this.mountains;this.mountains-=e,this.takenLand+=e}getOre(e){return this.ores.find(n=>n[0]===e)[1]}hasOre(e,n){return this.ores.find(n=>n[0]===e)[1]>=n}increaseOre(e,n){this.ores.find(n=>n[0]===e)[1]+=n}decreaseOre(e,n){const t=this.ores.find(n=>n[0]===e);if(t[1]>=n)return t[1]-=n,0;{const e=n-t[1];return t[1]=0,e}}getTakenLand(){return this.takenLand}takeLand(e){this.land-=e,this.takenLand+=e}getForestOptions(){return this.gameService.isEnabled(bu.FORESTER)?this.forestOptions:this.defaultForestOptions}}return e.ngInjectableDef=de({factory:function(){return new e(Le(Mm),Le(nv),Le(Ym),Le(Lm),Le(Bm))},token:e,providedIn:"root"}),e})();var iv=function(e){return e[e.ALL=0]="ALL",e[e.WORKING=1]="WORKING",e[e.IDLE=2]="IDLE",e[e.PASSIVE=3]="PASSIVE",e}({});class rv{constructor(e,n,t,l,i,r,s){this.buildings=[],this.filterBuilding=Ou.ALL,this.filterWorking=iv.ALL,this.thisRegion=r,this.buildingFactoryService=e,this.resourcesService=n,this.servicesService=t,this.landService=l,this.idService=i,n.addCallback(this,r),t.addService(s,this)}init(){}getBuildings(){return this.buildings}tick(e){this.shuffleArray(this.buildings).forEach(n=>n.tick(e))}shuffleArray(e){const n=e.slice();for(let t=n.length-1;t>0;t--){const e=Math.floor(Math.random()*(t+1));[n[t],n[e]]=[n[e],n[t]]}return n}save(){return{buildings:this.buildings,filterBuilding:this.filterBuilding,filterWorking:this.filterWorking}}reset(e,n){this.buildings=[],this.filterBuilding=Ou.ALL,this.filterWorking=iv.ALL,this.init()}load(e){this.buildings=[],this.filterBuilding=void 0!==e.filterBuilding?e.filterBuilding:Ou.ALL,this.filterWorking=void 0!==e.filterWorking?e.filterWorking:iv.ALL;for(const n of e.buildings)-1===n.id&&(n.id=this.idService.getNextId()),this.buildings.push(this.buildingFactoryService.loadBuilding(n))}getFilterBuilding(){return this.filterBuilding}setFilterBuildings(e){this.filterBuilding=e}setFilterWorking(e){this.filterWorking=e}getFilterWorking(){return this.filterWorking}getUnemployed(){return this.resourcesService.getPeople()}finishConstruction(e,n){const t=this.buildings.indexOf(e);-1!==t&&(this.buildings[t].stopProduction(),this.buildings[t]=this.buildingFactoryService.createBuilding(n,this.buildings[t].getBuildingId()))}createConstruction(e){this.buildings.push(e)}demolish(e){const n=this.buildings.indexOf(e);-1!==n&&(this.buildings[n].getBuildingType()===Ou.CONSTRUCTION?(this.buildings[n].stopProduction(),this.buildings[n].finishDemolish(),this.landService.increaseLand(this.buildings[n].getSize()),this.buildings.splice(n,1)):this.buildings[n]=new LS(this.servicesService,this.buildings[n].getBuildingId(),this.thisRegion,this.buildings[n].getBuildingType(),this.buildings[n].getComplexity(),this.buildings[n].getSize()).build())}finishDeconstruction(e){const n=this.buildings.indexOf(e);-1!==n&&(this.buildings[n].stopProduction(),this.buildingFactoryService.createBuildingShell(this.buildings[n].getBuildingBeingDemolished()).finishDemolish(),this.landService.increaseLand(this.buildings[n].getSize()),this.buildings.splice(n,1))}finishUpgrade(e,n){const t=this.buildings.indexOf(e);if(-1!==t){this.buildings[t].stopProduction();const e=this.buildingFactoryService.createBuildingShell(n,this.buildings[t].getBuildingId());e.setBuildingData(this.buildings[t].getBuildingData()),e.setBuildingLevel(this.buildings[t].getBuildingLevel()),e.build(),this.buildings[t]=e}}fireRandomWorker(){const e=this.buildings.filter(e=>void 0===e.getOccupants&&e.isWorking());return e.length>0&&(e[Math.floor(Math.random()*e.length)].fireWorker(),this.servicesService.getService(xu.MANAGEMENT).getLogFiredWorkers()&&this.servicesService.getService(xu.LOG).warning("Worker removed from "+e[Math.floor(Math.random()*e.length)].getName()),!0)}moveBuildingInList(e,n){Xf(this.buildings,e,n)}moveBuildingInListByBuildingId(e,n){const t=this.buildings.findIndex(n=>e===n.getBuildingId()),l=this.buildings.findIndex(e=>n===e.getBuildingId());Xf(this.buildings,t,l)}canCombine(e){if(this.buildings.filter(e=>e.isCombinable()).length>1)return this.toCombine?this.toCombine!==e&&this.toCombine.getBuildingType()===e.getBuildingType():!!this.buildings.find(n=>n!==e&&n.getBuildingType()===e.getBuildingType())}combine(e){if(!this.toCombine)return this.toCombine=e,!1;e.combine(this.toCombine,this)}finaliseCombine(e){if(e){const e=this.buildings.indexOf(this.toCombine);if(e>=0)return this.buildings[e].prepareDemolish()?(this.toCombine=null,this.buildings.splice(e,1),!0):(this.toCombine=null,!1)}else this.toCombine=null}clearCombineMode(){this.toCombine=null}split(e){e.isSplittable()&&e.split(this)}finaliseSplit(e){this.buildings.push(e)}addBuilding(e){this.buildings.push(this.buildingFactoryService.createBuilding(e))}upgradeBuilding(e){const n=this.buildings.find(n=>n.getBuildingId()===e),t=this.servicesService.getService(xu.MODAL);if(n)if(n.hasUpgrade()){if(this.resourcesService.decreaseResources(n.getUpgradeCost(),"Upgrade",!0)){n.stopProduction();const e=this.buildings.indexOf(n),t=lo.getBuilding(n.getBuildingType());this.buildings[e]=new wS(this.servicesService,n.getBuildingId(),this.thisRegion,n.getBuildingType(),t.UPGRADES[n.getBuildingLevel()-1].COMPLEXITY,n.getSize(),n.getBuildingLevel()+1,0,!1,n.getBuildingData()).build()}}else t.info("This building cannot be upgraded");else t.info("Error! Building not found")}move(e){if(!this.toArrange)return this.toArrange=e,!1;this.moveBuildingInListByBuildingId(this.toArrange.getBuildingId(),e.getBuildingId()),this.toArrange=null}canMove(e){return!(this.toArrange&&e.getBuildingId()===this.toArrange.getBuildingId())}autoSort(){let e=[];const n=this.buildings;for(;this.buildings.length>0;){const n=this.buildings[0].getBuildingType();if(n===Ou.MANUFACTURE){let t=this.buildings.filter(e=>e.getBuildingType()===n||e.getBuildingType()===Ou.CONSTRUCTION&&e.getConstructing()===n).map(e=>e);for(this.buildings=this.buildings.filter(e=>!(e.getBuildingType()===n||e.getBuildingType()===Ou.CONSTRUCTION&&e.getConstructing()===n));t.length>0;){const n=t[0].getRecipe().id;e=e.concat(t.filter(e=>e.getRecipe().id===n)),t=t.filter(e=>!(e.getRecipe().id===n))}}else e=e.concat(this.buildings.filter(e=>e.getBuildingType()===n||e.getBuildingType()===Ou.CONSTRUCTION&&e.getConstructing()===n)),this.buildings=this.buildings.filter(e=>!(e.getBuildingType()===n||e.getBuildingType()===Ou.CONSTRUCTION&&e.getConstructing()===n))}this.buildings=n.length===e.length?e:n}}const sv=(()=>{class e extends rv{constructor(e,n,t,l,i){super(n,e,t,i,l,Hu.VILLAGE,xu.VILLAGE)}init(){this.buildings.push(new IS(this.servicesService,this.idService.getNextId(),2,0,100,100,100).build()),this.buildings.push(new IS(this.servicesService,this.idService.getNextId(),1,0,100,100,100).build()),this.resourcesService.createPeople(3),this.buildings.forEach(e=>this.landService.takeLand(e.getSize()))}getPopulation(){return this.resourcesService.getTotalPeople()}getPopulationCap(){return this.resourcesService.getPopulationCap()}moveOccupants(e,n,t,l,i){const r=n;let s=0;for(;n>0&&s<this.buildings.length;){const u=this.buildings[s];if(this.buildings[s]!==e&&void 0!==u.getOccupants)for(;u.getOccupants()<u.getMaxSize()&&n>0;)u.addOccupant()&&(u.addFood(t/r),u.addFuel(l/r),u.addClothes(i/r),n-=1);s+=1}return n}removeRecruit(e,n=!0){const t=this.buildings.filter(e=>void 0!==e.getOccupants).map(e=>e).sort((e,n)=>e.getOccupants()===e.getMaxSize()&&n.getOccupants()===n.getMaxSize()?e.getMaxSize()>n.getMaxSize()?-1:1:e.getOccupants()===e.getMaxSize()&&n.getOccupants()<n.getMaxSize()?-1:e.getOccupants()<e.getMaxSize()&&n.getOccupants()===n.getMaxSize()?1:void 0);let l=0;if(t.forEach(e=>l+=e.getOccupants()),l>=e){for(;e>0;)for(const l of t){if(!(e>0))return!0;l.removeOccupant()&&(n&&this.resourcesService.removePeople(1),e-=1)}if(0===e)return!0}return!1}replaceWithHouses(){this.buildings.push(new yS(this.servicesService,this.idService.getNextId(),0,0,100,100,200).build()),this.buildings.filter(e=>e.getBuildingType()===Ou.HUT).forEach(e=>{e.prepareDemolish(),this.demolish(e)}),this.buildings.filter(e=>e.getBuildingType()===Ou.DECONSTRUCTION).forEach(e=>this.finishDeconstruction(e))}getHousingBuildings(){return this.buildings.filter(e=>e.getBuildingType()===Ou.HUT||e.getBuildingType()===Ou.HOUSE||e.getBuildingType()===Ou.LONGHOUSE)}}return e.ngInjectableDef=de({factory:function(){return new e(Le(Jm),Le(ev),Le(Mm),Le(VE),Le(lv))},token:e,providedIn:"root"}),e})();class uv{constructor(e,n,t){this.craftingService=e,this.resourcesService=n,this.villageService=t,this.id=Math.random(),this.amount=1,this.type=SS.NONE,this.craftingTypes=SS}getResourceName(e){return Pu.prepareResourceName(e)}ngOnInit(){}cancel(){null!==this.id&&this.craftingService.cancel(this.id)}getCost(){return this.recipe.cost}isAvailable(){for(const[e,n]of Array.from(this.recipe.cost))if(0!==this.resourcesService.hasResource(e,n,"Crafting"))return!1;return!0}checkResource(e){return 0===this.resourcesService.hasResource(e.key,e.value,"Crafting")}getResourceAmount(){return this.resourcesService.getResource(this.recipe.resource).amount}getCurrentlyCrafted(){return this.villageService.getBuildings().filter(e=>e.getBuildingType()===Ou.WORKSHOP&&e.isWorking()).map(e=>e).filter(e=>e.getRecipe()&&e.getRecipe().id===this.recipe.id).length}isStarted(){return this.id>=1&&this.getCurrentlyCrafted()>0}}var ov=Zt({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{width:100%;display:inline-block}#available[_ngcontent-%COMP%]{position:relative;padding:3px;text-align:center;font-weight:100;font-size:1.1em;border:1px solid #000}#notAvailable[_ngcontent-%COMP%]{padding:3px;text-align:center;font-size:1.1em;border:1px solid #57575a}#titleGrey[_ngcontent-%COMP%]{display:inline-block;color:#57575a}.notMet[_ngcontent-%COMP%]{color:var(--negative-colour)}.title[_ngcontent-%COMP%]{text-align:left}hr[_ngcontent-%COMP%]{border-color:#000}#progressId[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background-color:var(--active-colour);z-index:1}#text[_ngcontent-%COMP%]{position:relative;z-index:2}.costTitle[_ngcontent-%COMP%]{text-align:left}.missing[_ngcontent-%COMP%]{color:var(--negative-colour)}.tooltip[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{min-width:200px}.craftingTitle[_ngcontent-%COMP%]{text-align:left}.type[_ngcontent-%COMP%]{display:inline-block}app-icon[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 auto;margin-left:3px}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}"]],data:{}});function av(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"div",[["class","type"]],null,null,null,null,null)),(e()(),us(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.amount)})}function cv(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"div",[["class","type"]],null,null,null,null,null)),(e()(),us(1,null,["","/",""]))],null,function(e,n){var t=n.component;e(n,1,0,t.getResourceAmount(),t.amount)})}function hv(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"div",[["class","type"]],null,null,null,null,null)),(e()(),us(-1,null,["\u221e"]))],null,null)}function dv(e){return cs(0,[(e()(),Kr(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),us(1,null,[" (",") "]))],null,function(e,n){e(n,1,0,n.component.getCurrentlyCrafted())})}function gv(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"div",[["class","craftingTitle"]],null,null,null,null,null)),(e()(),us(1,null,["Crafted: ",""]))],null,function(e,n){e(n,1,0,n.component.recipe.amount)})}function pv(e){return cs(0,[(e()(),Kr(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),us(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.value)})}function mv(e){return cs(0,[(e()(),Kr(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"div",[["class","missing"]],null,null,null,null,null)),(e()(),us(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.value)})}function fv(e){return cs(0,[(e()(),Kr(0,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,pv)),ci(2,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,mv)),ci(4,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(5,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(6,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){var t=n.component;e(n,2,0,t.checkResource(n.context.$implicit)),e(n,4,0,!t.checkResource(n.context.$implicit)),e(n,6,0,t.getResourceName(n.context.$implicit.key),"resources")},null)}function Sv(e){return cs(0,[(e()(),Kr(0,0,null,null,25,"div",[["appTooltip",""],["class","tooltip"],["id","available"]],null,[[null,"click"],[null,"mousemove"]],function(e,n,t){var l=!0,i=e.component;return"mousemove"===n&&(l=!1!==Ql(e,1).onmousemove(t)&&l),"click"===n&&(l=!1!==i.cancel()&&l),l},null,null)),ci(1,16384,null,0,Op,[],{elementId:[0,"elementId"]},null),(e()(),Kr(2,0,null,null,10,"div",[["id","text"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,av)),ci(4,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,cv)),ci(6,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,hv)),ci(8,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),us(9,null,[" "," "])),is(10,1),(e()(),$r(16777216,null,null,1,null,dv)),ci(12,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(13,0,null,null,12,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),us(14,null,[" "," "])),is(15,1),(e()(),Kr(16,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Kr(17,0,null,null,1,"div",[["class","craftingTitle"]],null,null,null,null,null)),(e()(),us(18,null,["Difficulty: ",""])),(e()(),$r(16777216,null,null,1,null,gv)),ci(20,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(21,0,null,null,1,"div",[["class","costTitle"]],null,null,null,null,null)),(e()(),us(-1,null,["Cost:"])),(e()(),$r(16777216,null,null,2,null,fv)),ci(24,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),hi(0,ra,[It])],function(e,n){var t=n.component;e(n,1,0,t.id),e(n,4,0,t.type===t.craftingTypes.SELECTED),e(n,6,0,t.type===t.craftingTypes.UNTIL_X),e(n,8,0,t.type===t.craftingTypes.CONTINUOUS),e(n,12,0,t.isStarted()),e(n,20,0,t.recipe.amount>1),e(n,24,0,qt(n,24,0,Ql(n,25).transform(t.getCost())))},function(e,n){var t=n.component,l=qt(n,9,0,e(n,10,0,Ql(n.parent,0),t.getResourceName(t.recipe.getResource())));e(n,9,0,l),e(n,13,0,Il(1,"",t.id,""));var i=qt(n,14,0,e(n,15,0,Ql(n.parent,0),t.getResourceName(t.recipe.resource)));e(n,14,0,i),e(n,18,0,t.recipe.craftingDifficulty)})}function Ev(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"div",[["class","type"]],null,null,null,null,null)),(e()(),us(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.amount)})}function vv(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"div",[["class","type"]],null,null,null,null,null)),(e()(),us(1,null,["","/",""]))],null,function(e,n){var t=n.component;e(n,1,0,t.getResourceAmount(),t.amount)})}function bv(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"div",[["class","type"]],null,null,null,null,null)),(e()(),us(-1,null,["\u221e"]))],null,null)}function Ov(e){return cs(0,[(e()(),Kr(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),us(1,null,[" (",") "]))],null,function(e,n){e(n,1,0,n.component.getCurrentlyCrafted())})}function Rv(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"div",[["class","craftingTitle"]],null,null,null,null,null)),(e()(),us(1,null,["Crafted: ",""]))],null,function(e,n){e(n,1,0,n.component.recipe.amount)})}function Tv(e){return cs(0,[(e()(),Kr(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),us(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.value)})}function Cv(e){return cs(0,[(e()(),Kr(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"div",[["class","missing"]],null,null,null,null,null)),(e()(),us(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.value)})}function Iv(e){return cs(0,[(e()(),Kr(0,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,Tv)),ci(2,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,Cv)),ci(4,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(5,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(6,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){var t=n.component;e(n,2,0,t.checkResource(n.context.$implicit)),e(n,4,0,!t.checkResource(n.context.$implicit)),e(n,6,0,t.getResourceName(n.context.$implicit.key),"resources")},null)}function yv(e){return cs(0,[(e()(),Kr(0,0,null,null,25,"div",[["appTooltip",""],["class","tooltip"],["id","notAvailable"]],null,[[null,"click"],[null,"mousemove"]],function(e,n,t){var l=!0,i=e.component;return"mousemove"===n&&(l=!1!==Ql(e,1).onmousemove(t)&&l),"click"===n&&(l=!1!==i.cancel()&&l),l},null,null)),ci(1,16384,null,0,Op,[],{elementId:[0,"elementId"]},null),(e()(),Kr(2,0,null,null,10,"div",[["id","titleGrey"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,Ev)),ci(4,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,vv)),ci(6,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,bv)),ci(8,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),us(9,null,[" "," "])),is(10,1),(e()(),$r(16777216,null,null,1,null,Ov)),ci(12,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(13,0,null,null,12,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),us(14,null,[" "," "])),is(15,1),(e()(),Kr(16,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Kr(17,0,null,null,1,"div",[["class","craftingTitle"]],null,null,null,null,null)),(e()(),us(18,null,["Difficulty: ",""])),(e()(),$r(16777216,null,null,1,null,Rv)),ci(20,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(21,0,null,null,1,"div",[["class","costTitle"]],null,null,null,null,null)),(e()(),us(-1,null,["Cost:"])),(e()(),$r(16777216,null,null,2,null,Iv)),ci(24,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),hi(0,ra,[It])],function(e,n){var t=n.component;e(n,1,0,t.id),e(n,4,0,t.type===t.craftingTypes.SELECTED),e(n,6,0,t.type===t.craftingTypes.UNTIL_X),e(n,8,0,t.type===t.craftingTypes.CONTINUOUS),e(n,12,0,t.isStarted()),e(n,20,0,t.recipe.amount>1),e(n,24,0,qt(n,24,0,Ql(n,25).transform(t.getCost())))},function(e,n){var t=n.component,l=qt(n,9,0,e(n,10,0,Ql(n.parent,0),t.getResourceName(t.recipe.getResource())));e(n,9,0,l),e(n,13,0,Il(1,"",t.id,""));var i=qt(n,14,0,e(n,15,0,Ql(n.parent,0),t.getResourceName(t.recipe.resource)));e(n,14,0,i),e(n,18,0,t.recipe.craftingDifficulty)})}function _v(e){return cs(0,[hi(0,ia,[]),(e()(),Kr(1,0,null,null,4,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,Sv)),ci(3,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,yv)),ci(5,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,3,0,t.isAvailable()),e(n,5,0,!t.isAvailable())},null)}const Av=new Ce("cdk-dir-doc",{providedIn:"root",factory:function(){return Fe(oa)}}),wv=(()=>{class e{constructor(e){if(this.value="ltr",this.change=new Mi,e){const n=e.documentElement?e.documentElement.dir:null,t=(e.body?e.body.dir:null)||n;this.value="ltr"===t||"rtl"===t?t:"ltr"}}ngOnDestroy(){this.change.complete()}}return e.ngInjectableDef=de({factory:function(){return new e(Le(Av,8))},token:e,providedIn:"root"}),e})();class Nv{constructor(e,n,t,l,i){this.recipeService=e,this.resourcesService=n,this.craftingService=t,this.modalService=l,this.changeDetectorRef=i,this.craftingTypes=SS,this.filterText="",this.amount=1,this.craftingType=this.craftingTypes.SELECTED,this.bookPage=Iu[Iu.ALL]}ngOnInit(){this.craftingService.registerForUpdate().subscribe(()=>{this.changeDetectorRef.destroyed||this.changeDetectorRef.detectChanges()})}getRecipes(){return this.filterText&&this.filterText.length>0?this.recipeService.getRecipes().filter(e=>e.available&&this.resourcesService.getResourceTypes(e.getResource()).includes(Iu[this.bookPage])&&Pu.prepareResourceName(e.getResource()).toLowerCase().includes(this.filterText.toLowerCase())):this.recipeService.getRecipes().filter(e=>e.available&&this.resourcesService.getResourceTypes(e.getResource()).includes(Iu[this.bookPage]))}getEntries(){const e=[];return e.push(Iu[Iu.ALL]),e.push(Iu[Iu.PROCESSED]),e.push(Iu[Iu.TOOLS]),e.push(Iu[Iu.FOOD]),e.push(Iu[Iu.OTHER]),e}select(e){this.bookPage=e}craft(e){this.validateAmountInput()&&this.craftingService.craft(e,this.amount,this.craftingType)}getQueue(){return this.craftingService.getQueue()}drop(e){this.craftingService.moveRecipeInQueue(e)}getQueueMaxSize(){return this.craftingService.getQueueMaxSize()}validateAmountInput(){return!(isNaN(this.amount)||Number(this.amount)<1)||(this.modalService.info("Invalid craft amount"),this.amount=1,!1)}}var Pv=Zt({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{margin:.7%;height:100%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#boxes[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;border:1px solid #000;height:94.5%;text-align:center}#recipes[_ngcontent-%COMP%]{text-align:center;-webkit-box-flex:0;flex:0 0 74.3%;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;border:1px solid #000;-webkit-box-align:center;align-items:center}.queue[_ngcontent-%COMP%]{text-align:center;-webkit-box-flex:0;flex:0 0 25%;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;border:1px solid #000;-webkit-box-align:center;align-items:center}#queueRecipes[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}.title[_ngcontent-%COMP%]{width:100.5%;font-weight:bolder;font-size:1.1em;display:inline-block;border-bottom:1px solid #000}#modes[_ngcontent-%COMP%]{margin-top:-1px;padding:0;margin-bottom:5px}#recipesBook[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;height:100%;width:100%}#menu[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;border-right:1px solid #000;-webkit-box-flex:0;flex:0 0 10%}.entry[_ngcontent-%COMP%]{display:-webkit-box;display:flex;border-bottom:1px solid #000;-webkit-box-flex:1;flex:1 0 0;height:100%;width:100%;margin-right:-30px;font-size:.8em;font-weight:600;cursor:pointer}.entry[_ngcontent-%COMP%]:last-of-type{border-bottom:none}.entryText[_ngcontent-%COMP%]{-webkit-transform:rotate(-90deg);-moz-transform:rotate(-90deg);-ms-transform:rotate(-90deg);-o-transform:rotate(-90deg)}.inactiveEntry[_ngcontent-%COMP%]{height:100%;width:100%;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center}.activeEntry[_ngcontent-%COMP%]{height:100%;width:100%;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;background-color:var(--active-colour)}#book[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 90%;width:100%}#bookRecipes[_ngcontent-%COMP%]{overflow-y:auto;border-top:1px solid #000}app-recipe[_ngcontent-%COMP%]{font-size:.8em;display:inline-block;width:130px;margin:4px 8px;cursor:pointer}#side[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;font-size:.8em;margin:1%;vertical-align:bottom}#amount[_ngcontent-%COMP%], #filter[_ngcontent-%COMP%]{font-size:1em;width:20%;margin:1%;display:block;vertical-align:bottom}#filter[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:1.05em;margin-left:0;padding:0;border:none;outline:0}#amount[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:65%;font-size:1.15em;margin-left:0;padding:0;border:none;outline:0}#radios[_ngcontent-%COMP%]{text-align:left;font-size:.9em}#progressButton[_ngcontent-%COMP%]{font-size:.6em}"]],data:{}});function kv(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"div",[["class","activeEntry"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"div",[["class","entryText"]],null,null,null,null,null)),(e()(),us(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit)})}function xv(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"div",[["class","inactiveEntry"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"div",[["class","entryText"]],null,null,null,null,null)),(e()(),us(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit)})}function Mv(e){return cs(0,[(e()(),Kr(0,0,null,null,4,"div",[["class","entry"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.select(e.context.$implicit)&&l),l},null,null)),(e()(),$r(16777216,null,null,1,null,kv)),ci(2,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,xv)),ci(4,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.bookPage===n.context.$implicit),e(n,4,0,t.bookPage!==n.context.$implicit)},null)}function Dv(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"app-recipe",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.craft(e.context.$implicit)&&l),l},_v,ov)),ci(1,114688,null,0,uv,[ES,Jm,sv],{recipe:[0,"recipe"]},null)],function(e,n){e(n,1,0,n.context.$implicit)},null)}function Lv(e){return cs(0,[(e()(),Kr(0,16777216,null,null,6,"app-recipe",[["cdkDrag",""],["class","cdk-drag"]],[[2,"cdk-drag-disabled",null],[2,"cdk-drag-dragging",null]],null,null,_v,ov)),di(6144,null,aS,null,[hS]),ci(2,4866048,[[1,4]],3,hS,[rt,[3,oS],oa,or,xt,cS,[2,wv],uS,yt],null,null),Zr(603979776,2,{_handles:1}),Zr(603979776,3,{_previewTemplate:0}),Zr(603979776,4,{_placeholderTemplate:0}),ci(6,114688,null,0,uv,[ES,Jm,sv],{id:[0,"id"],recipe:[1,"recipe"],amount:[2,"amount"],type:[3,"type"]},null),(e()(),$r(0,null,null,0))],function(e,n){e(n,6,0,n.context.$implicit.id,n.context.$implicit.recipe,n.context.$implicit.amount,n.context.$implicit.type)},function(e,n){e(n,0,0,Ql(n,2).disabled,Ql(n,2)._dragRef.isDragging())})}function Fv(e){return cs(0,[(e()(),Kr(0,0,null,null,76,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),Kr(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["Crafting"])),(e()(),Kr(4,0,null,null,72,"div",[["id","boxes"]],null,null,null,null,null)),(e()(),Kr(5,0,null,null,60,"div",[["id","recipes"]],null,null,null,null,null)),(e()(),Kr(6,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),us(-1,null,[" Recipes "])),(e()(),Kr(8,0,null,null,57,"div",[["id","recipesBook"]],null,null,null,null,null)),(e()(),Kr(9,0,null,null,2,"div",[["id","menu"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,Mv)),ci(11,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),(e()(),Kr(12,0,null,null,53,"div",[["id","book"]],null,null,null,null,null)),(e()(),Kr(13,0,null,null,49,"div",[["id","side"]],null,null,null,null,null)),(e()(),Kr(14,0,null,null,8,"div",[["id","filter"]],null,null,null,null,null)),(e()(),us(-1,null,[" Filter:"])),(e()(),Kr(16,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(17,0,null,null,5,"input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==Ql(e,18)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,18).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ql(e,18)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ql(e,18)._compositionEnd(t.target.value)&&l),"ngModelChange"===n&&(l=!1!==(i.filterText=t)&&l),l},null,null)),ci(18,16384,null,0,wp,[ct,rt,[2,Ap]],null,null),di(1024,null,yp,function(e){return[e]},[wp]),ci(20,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(22,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(23,0,null,null,9,"div",[["id","amount"]],null,null,null,null,null)),(e()(),us(-1,null,[" amount:"])),(e()(),Kr(25,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(26,0,null,null,6,"input",[["min","1"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==Ql(e,27)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,27).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ql(e,27)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ql(e,27)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==Ql(e,28).onChange(t.target.value)&&l),"input"===n&&(l=!1!==Ql(e,28).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,28).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.amount=t)&&l),l},null,null)),ci(27,16384,null,0,wp,[ct,rt,[2,Ap]],null,null),ci(28,16384,null,0,Vp,[ct,rt],null,null),di(1024,null,yp,function(e,n){return[e,n]},[wp,Vp]),ci(30,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(32,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(33,0,null,null,29,"div",[["id","radios"]],null,null,null,null,null)),(e()(),Kr(34,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),Kr(35,0,null,null,6,"input",[["name","type"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==Ql(e,36)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,36).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ql(e,36)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ql(e,36)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==Ql(e,37).onChange()&&l),"blur"===n&&(l=!1!==Ql(e,37).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.craftingType=t)&&l),l},null,null)),ci(36,16384,null,0,wp,[ct,rt,[2,Ap]],null,null),ci(37,212992,null,0,Yp,[ct,rt,zp,We],{name:[0,"name"],value:[1,"value"]},null),di(1024,null,yp,function(e,n){return[e,n]},[wp,Yp]),ci(39,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(41,16384,null,0,Mp,[[4,xp]],null,null),(e()(),us(-1,null,[" selected amount "])),(e()(),Kr(43,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(44,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),Kr(45,0,null,null,6,"input",[["name","type"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==Ql(e,46)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,46).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ql(e,46)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ql(e,46)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==Ql(e,47).onChange()&&l),"blur"===n&&(l=!1!==Ql(e,47).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.craftingType=t)&&l),l},null,null)),ci(46,16384,null,0,wp,[ct,rt,[2,Ap]],null,null),ci(47,212992,null,0,Yp,[ct,rt,zp,We],{name:[0,"name"],value:[1,"value"]},null),di(1024,null,yp,function(e,n){return[e,n]},[wp,Yp]),ci(49,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(51,16384,null,0,Mp,[[4,xp]],null,null),(e()(),us(-1,null,[" until X available "])),(e()(),Kr(53,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(54,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),Kr(55,0,null,null,6,"input",[["name","type"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==Ql(e,56)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,56).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ql(e,56)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ql(e,56)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==Ql(e,57).onChange()&&l),"blur"===n&&(l=!1!==Ql(e,57).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.craftingType=t)&&l),l},null,null)),ci(56,16384,null,0,wp,[ct,rt,[2,Ap]],null,null),ci(57,212992,null,0,Yp,[ct,rt,zp,We],{name:[0,"name"],value:[1,"value"]},null),di(1024,null,yp,function(e,n){return[e,n]},[wp,Yp]),ci(59,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(61,16384,null,0,Mp,[[4,xp]],null,null),(e()(),us(-1,null,[" continuous "])),(e()(),Kr(63,0,null,null,2,"div",[["id","bookRecipes"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,Dv)),ci(65,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),(e()(),Kr(66,0,null,null,10,"div",[["class","queue"]],null,null,null,null,null)),(e()(),Kr(67,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),us(-1,null,["Orders"])),(e()(),us(69,null,[" ","/"," "])),(e()(),Kr(70,0,null,null,6,"div",[["cdkDropList",""],["class","cdk-drop-list"],["id","queueRecipes"]],[[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],[[null,"cdkDropListDropped"]],function(e,n,t){var l=!0;return"cdkDropListDropped"===n&&(l=!1!==e.component.drop(t)&&l),l},null,null)),di(6144,null,oS,null,[mS]),ci(72,1196032,null,1,mS,[rt,uS,yt,[2,wv],[3,gS]],{id:[0,"id"]},{dropped:"cdkDropListDropped"}),Zr(603979776,1,{_draggables:1}),di(256,null,gS,void 0,[]),(e()(),$r(16777216,null,null,1,null,Lv)),ci(76,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,11,0,t.getEntries()),e(n,20,0,t.filterText),e(n,30,0,t.amount),e(n,37,0,"type",t.craftingTypes.SELECTED),e(n,39,0,"type",t.craftingType),e(n,47,0,"type",t.craftingTypes.UNTIL_X),e(n,49,0,"type",t.craftingType),e(n,57,0,"type",t.craftingTypes.CONTINUOUS),e(n,59,0,"type",t.craftingType),e(n,65,0,t.getRecipes()),e(n,72,0,"queueRecipes"),e(n,76,0,t.getQueue())},function(e,n){var t=n.component;e(n,17,0,Ql(n,22).ngClassUntouched,Ql(n,22).ngClassTouched,Ql(n,22).ngClassPristine,Ql(n,22).ngClassDirty,Ql(n,22).ngClassValid,Ql(n,22).ngClassInvalid,Ql(n,22).ngClassPending),e(n,26,0,Ql(n,32).ngClassUntouched,Ql(n,32).ngClassTouched,Ql(n,32).ngClassPristine,Ql(n,32).ngClassDirty,Ql(n,32).ngClassValid,Ql(n,32).ngClassInvalid,Ql(n,32).ngClassPending),e(n,35,0,Ql(n,41).ngClassUntouched,Ql(n,41).ngClassTouched,Ql(n,41).ngClassPristine,Ql(n,41).ngClassDirty,Ql(n,41).ngClassValid,Ql(n,41).ngClassInvalid,Ql(n,41).ngClassPending),e(n,45,0,Ql(n,51).ngClassUntouched,Ql(n,51).ngClassTouched,Ql(n,51).ngClassPristine,Ql(n,51).ngClassDirty,Ql(n,51).ngClassValid,Ql(n,51).ngClassInvalid,Ql(n,51).ngClassPending),e(n,55,0,Ql(n,61).ngClassUntouched,Ql(n,61).ngClassTouched,Ql(n,61).ngClassPristine,Ql(n,61).ngClassDirty,Ql(n,61).ngClassValid,Ql(n,61).ngClassInvalid,Ql(n,61).ngClassPending),e(n,69,0,t.getQueue().length,t.getQueueMaxSize()),e(n,70,0,Ql(n,72).id,Ql(n,72).disabled,Ql(n,72)._dropListRef.isDragging(),Ql(n,72)._dropListRef.isReceiving())})}function Hv(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"app-crafting",[],null,null,null,Fv,Pv)),ci(1,114688,null,0,Nv,[mf,Jm,ES,Vm,yt],null,null)],function(e,n){e(n,1,0)},null)}var Uv=Gl("app-crafting",Nv,Hv,{},{},[]);class Gv{constructor(e,n,t,l,i,r){this.id=e,this.resource=n,this.amount=t,this.buy=l,this.price=i,this.duration=r}}const Bv=(()=>{class e{constructor(e){this.optionsService=e,this.audios=[],this.optionsService.registerForOptionsChange().subscribe(()=>{this.optionsService.getOption(Dm.SOUND)?this.audios.forEach(e=>e.volume=this.optionsService.getOption(Dm.SOUND_VOLUME)/100):this.audios.forEach(e=>e.volume=0)})}playAudio(e){this.audios=this.audios.filter(e=>!e.ended),e.load(),e.volume=this.optionsService.getOption(Dm.SOUND)?this.optionsService.getOption(Dm.SOUND_VOLUME)/100:0,e.play(),this.audios.push(e)}playTownBells(){this.playAudio(new Audio("assets/sounds/village_bells.wav"))}}return e.ngInjectableDef=de({factory:function(){return new e(Le(Lm))},token:e,providedIn:"root"}),e})(),Wv=(()=>{class e{constructor(e,n,t){this.servicesService=e,this.optionsService=n,this.gameService=t,this.rations=no.FOOD_RATIONS,this.clothes=no.CLOTHES_RATIONS,this.alcohol=no.ALCOHOL_RATIONS,this.logFiredWorkers=no.LOG_FIRED_WORKERS,this.logAutoTrade=no.LOG_AUTO_TRADE,this.logSickness=no.LOG_SICKNESS,this.furClothes=no.ALLOW_FUR_CLOTHES,this.foodNutrition=no.SHOW_FOOD_NUTRITION,this.complexWorkers=no.COMPLEX_WORK_MANAGEMENT,this.secondHeaderRow=no.SECOND_HEADER_ROW,this.showFreeWorkers=no.SHOW_FREE_WORKERS,this.showPopulation=no.SHOW_POPULATION,this.showResearchProgress=no.SHOW_RESEARCH_PROGRESS,this.showFaith=no.SHOW_FAITH,this.showRaw=no.SHOW_RAW,this.showProcessed=no.SHOW_PROCESSED,this.showFood=no.SHOW_FOOD,this.showTools=no.SHOW_TOOLS,this.defaultWorkshopResearch=no.DEFAULT_WORKSHOP_RESEARCH,this.switchHunterFromTaming=no.DEFAULT_WORKSHOP_RESEARCH,this.plowInSummer=no.PLOW_IN_SUMMER,e.addService(xu.MANAGEMENT,this),this.initFoodPriority()}initFoodPriority(){return this.foodPriority=[[]],this.servicesService.getService(xu.RESOURCES).getResourcesByType(Iu.CONSUMABLE).forEach(e=>this.foodPriority[0].push(e.resource)),this.foodPriority}load(e){this.rations=e.rations,this.clothes=e.clothes,this.alcohol=e.alcohol,this.furClothes=e.furClothes,this.foodNutrition=e.foodNutrition,this.showRaw=void 0!==e.showRaw?e.showRaw:no.SHOW_RAW,this.showProcessed=void 0!==e.showProcessed?e.showProcessed:no.SHOW_PROCESSED,this.showFood=void 0!==e.showFood?e.showFood:no.SHOW_FOOD,this.showTools=void 0!==e.showTools?e.showTools:no.SHOW_TOOLS,this.complexWorkers=e.complexWorkers,this.logFiredWorkers=void 0!==e.logFiredWorkers?e.logFiredWorkers:no.LOG_FIRED_WORKERS,this.logAutoTrade=void 0!==e.logAutoTrade?e.logAutoTrade:no.LOG_AUTO_TRADE,this.logSickness=void 0!==e.logSickness?e.logSickness:no.LOG_SICKNESS,this.secondHeaderRow=void 0!==e.secondHeaderRow?e.secondHeaderRow:no.SECOND_HEADER_ROW,this.showFreeWorkers=void 0!==e.showFreeWorkers?e.showFreeWorkers:no.SHOW_FREE_WORKERS,this.showPopulation=void 0!==e.showPopulation?e.showPopulation:no.SHOW_POPULATION,this.foodPriority=void 0!==e.foodPriority?e.foodPriority:this.initFoodPriority(),this.showResearchProgress=void 0!==e.showResearchProgress?e.showResearchProgress:no.SHOW_RESEARCH_PROGRESS,this.showFaith=void 0!==e.showFaith?e.showFaith:no.SHOW_FAITH,this.defaultWorkshopResearch=void 0!==e.defaultWorkshopResearch?e.defaultWorkshopResearch:no.DEFAULT_WORKSHOP_RESEARCH,this.switchHunterFromTaming=void 0!==e.switchHunterFromTaming?e.switchHunterFromTaming:no.SWITCH_HUNTER_FROM_TAMING,this.plowInSummer=void 0!==e.plowInSummer?e.plowInSummer:no.PLOW_IN_SUMMER,this.validateFoodPriority(),this.gameService.updateHeader(this.secondHeaderRow)}save(){return{rations:this.rations,clothes:this.clothes,alcohol:this.alcohol,furClothes:this.furClothes,foodNutrition:this.foodNutrition,showRaw:this.showRaw,showProcessed:this.showProcessed,showFood:this.showFood,showTools:this.showTools,complexWorkers:this.complexWorkers,logFiredWorkers:this.logFiredWorkers,logAutoTrade:this.logAutoTrade,logSickness:this.logSickness,secondHeaderRow:this.secondHeaderRow,showFreeWorkers:this.showFreeWorkers,showPopulation:this.showPopulation,foodPriority:this.foodPriority,showResearchProgress:this.showResearchProgress,showFaith:this.showFaith,defaultWorkshopResearch:this.defaultWorkshopResearch,switchHunterFromTaming:this.switchHunterFromTaming,plowInSummer:this.plowInSummer}}reset(e,n){!this.optionsService.getOption(Dm.KEEP_MANAGEMENT_SETTINGS_ON_RESET)||e?(this.rations=no.FOOD_RATIONS,this.clothes=no.CLOTHES_RATIONS,this.alcohol=no.ALCOHOL_RATIONS,this.furClothes=no.ALLOW_FUR_CLOTHES,this.foodNutrition=no.SHOW_FOOD_NUTRITION,this.showRaw=no.SHOW_RAW,this.showProcessed=no.SHOW_PROCESSED,this.showFood=no.SHOW_FOOD,this.showTools=no.SHOW_TOOLS,this.complexWorkers=no.COMPLEX_WORK_MANAGEMENT,this.logFiredWorkers=no.LOG_FIRED_WORKERS,this.logAutoTrade=no.LOG_AUTO_TRADE,this.logSickness=no.LOG_SICKNESS,this.secondHeaderRow=no.SECOND_HEADER_ROW,this.showFreeWorkers=no.SHOW_FREE_WORKERS,this.showPopulation=no.SHOW_POPULATION,this.showResearchProgress=no.SHOW_RESEARCH_PROGRESS,this.showFaith=no.SHOW_FAITH,this.defaultWorkshopResearch=no.DEFAULT_WORKSHOP_RESEARCH,this.switchHunterFromTaming=no.SWITCH_HUNTER_FROM_TAMING,this.plowInSummer=no.PLOW_IN_SUMMER,this.initFoodPriority()):(this.complexWorkers=no.COMPLEX_WORK_MANAGEMENT,this.validateFoodPriority()),e&&(this.complexWorkers=no.COMPLEX_WORK_MANAGEMENT,this.initFoodPriority()),this.gameService.updateHeader(this.secondHeaderRow)}getRations(){return this.rations}getClothesRations(){return this.clothes}getAlcoholRations(){return this.alcohol}setRations(e){this.rations=e}setClothesRations(e){this.clothes=e}setAlcoholRations(e){this.alcohol=e}toggleFurClothes(){this.furClothes=!this.furClothes}getFurClothes(){return this.furClothes}toggleFoodNutrition(){this.foodNutrition=!this.foodNutrition}getFoodNutrition(){return this.foodNutrition}toggleComplexWorkers(){this.complexWorkers=!this.complexWorkers}getComplexWorkers(){return this.complexWorkers}getSecondHeaderRow(){return this.secondHeaderRow}toggleSecondHeaderRow(){this.secondHeaderRow=!this.secondHeaderRow,this.gameService.updateHeader(this.secondHeaderRow)}getShowFreeWorkers(){return this.showFreeWorkers}toggleShowFreeWorkers(){this.showFreeWorkers=!this.showFreeWorkers}getShowPopulation(){return this.showPopulation}toggleShowPopulation(){this.showPopulation=!this.showPopulation}getShowResearchProgress(){return this.showResearchProgress}toggleShowResearchProgress(){this.showResearchProgress=!this.showResearchProgress}getFoodPriority(){if(this.gameService.isEnabled(bu.MANAGEMENT))return this.foodPriority;{const e=[[]];return this.servicesService.getService(xu.RESOURCES).getResourcesByType(Iu.CONSUMABLE).forEach(n=>e[0].push(n.resource)),e}}up(e,n){const t=this.foodPriority[n].findIndex(n=>n===e);n>0?(t>=0&&(this.foodPriority[n-1].push(this.foodPriority[n][t]),this.foodPriority[n].splice(t,1)),this.clearList(this.foodPriority)):(this.foodPriority.unshift([]),this.foodPriority[0].push(this.foodPriority[1][t]),this.foodPriority[1].splice(t,1))}down(e,n){const t=this.foodPriority[n].findIndex(n=>n===e);t>=0&&n+1<9&&(this.foodPriority.length<n+2&&this.foodPriority.push([]),this.foodPriority[n+1].push(this.foodPriority[n][t]),this.foodPriority[n].splice(t,1)),this.clearList(this.foodPriority)}clearList(e){for(;e.length>0&&0===e[e.length-1].length;)e.splice(e.length-1,1);for(;e.length>0&&0===e[0].length;)e.splice(0,1)}validateFoodPriority(){const e=[];this.foodPriority.forEach(n=>n.forEach(n=>e.push(n))),io.getResourcesByType(Iu.CONSUMABLE).forEach(n=>{e.find(e=>e===Su[n[0]])||this.foodPriority[0].push(Su[n[0]])})}getShowFaith(){return this.showFaith}toggleShowFaith(){this.showFaith=!this.showFaith}getLogFiredWorkers(){return this.logFiredWorkers}toggleLogFiredWorkers(){this.logFiredWorkers=!this.logFiredWorkers}getDefaultWorkshopResearch(){return this.defaultWorkshopResearch}toggleDefaultWorkshopResearch(){this.defaultWorkshopResearch=!this.defaultWorkshopResearch}getSwitchHunterFromTaming(){return this.switchHunterFromTaming}toggleSwitchHunterFromTaming(){this.switchHunterFromTaming=!this.switchHunterFromTaming}getPlowInSummer(){return this.plowInSummer}togglePlowInSummer(){this.plowInSummer=!this.plowInSummer}getLogAutoTrade(){return this.logAutoTrade}toggleLogAutoTrade(){this.logAutoTrade=!this.logAutoTrade}getShowRaw(){return this.showRaw}toggleShowRaw(){this.showRaw=!this.showRaw}getShowProcessed(){return this.showProcessed}toggleShowProcessed(){this.showProcessed=!this.showProcessed}getShowFood(){return this.showFood}toggleShowFood(){this.showFood=!this.showFood}getShowTools(){return this.showTools}toggleShowTools(){this.showTools=!this.showTools}getLogSickness(){return this.logSickness}toggleLogSickness(){this.logSickness=!this.logSickness}}return e.ngInjectableDef=de({factory:function(){return new e(Le(Mm),Le(Lm),Le(Ym))},token:e,providedIn:"root"}),e})(),Vv=(()=>{class e{constructor(e,n,t,l,i,r,s){this.servicesService=e,this.calendarService=n,this.managementService=t,this.resourcesService=l,this.logService=i,this.soundService=r,this.modalService=s,this.offers=[],this.id=10,this.servicesService.addService(xu.MARKET,this),this.calendarService.registerForDayChange().subscribe(e=>{this.offers.forEach(e=>{e.duration-=1,0===e.duration&&this.autoBuy([e])}),this.offers=this.offers.filter(e=>e.duration>0)})}autoBuy(e){e.forEach(e=>{let n=e.amount;const t=this.resourcesService.getResource(e.resource);if(e.buy&&t.options.autoTrade.autoBuyEnabled){let l=t.options.autoTrade.autoBuyAmount;t.options.autoTrade.autoBuyPercentage&&(l=Math.floor(t.limit*t.options.autoTrade.autoBuyAmount/100));let i=t.options.autoTrade.autoBuyOrder;t.amount+i<l&&l-t.amount>i&&(i=l-t.amount),n>i&&(n=i);const r=this.resourcesService.getLimit(e.resource);n>r&&(n=r),n>0&&this.resourcesService.decreaseResource(Su.COINS,this.calculatePrice(e,n),"Auto trade",!0)&&(this.resourcesService.increaseResource(e.resource,n,"Auto trade",!0),t.options.autoTrade.autoBuyOrder>0&&(t.options.autoTrade.autoBuyOrder-=n,t.options.autoTrade.autoBuyOrder<0&&(t.options.autoTrade.autoBuyOrder=0)),this.managementService.getLogAutoTrade()&&this.logService.log("auto bought "+n+" "+Pu.prepareResourceName(e.resource))),e.amount===Number(n)?this.offers.splice(this.offers.indexOf(e),1):(e.price=this.calculatePrice(e,e.amount-n),e.amount-=n)}else if(!e.buy&&t.options.autoTrade.autoSellEnabled){let l=t.options.autoTrade.autoSellAmount;t.options.autoTrade.autoSellPercentage&&(l=Math.floor(t.limit*t.options.autoTrade.autoSellAmount/100));let i=t.options.autoTrade.autoSellOrder;l<t.amount-i&&(i=t.amount-l),n>i&&(n=i),n>0&&this.resourcesService.decreaseResource(e.resource,n,"Auto trade",!0)&&(this.resourcesService.increaseResource(Su.COINS,this.calculatePrice(e,n),"Auto trade",!0),t.options.autoTrade.autoSellOrder>0&&(t.options.autoTrade.autoSellOrder-=n,t.options.autoTrade.autoSellOrder<0&&(t.options.autoTrade.autoSellOrder=0)),this.managementService.getLogAutoTrade()&&this.logService.log("auto sold "+n+" "+Pu.prepareResourceName(e.resource))),e.amount===Number(n)?this.offers.splice(this.offers.indexOf(e),1):(e.price=this.calculatePrice(e,e.amount-n),e.amount-=n)}})}nextId(){return this.id+=1,this.id-1}load(e){this.offers=e.offers,this.id=e.id}save(){return{offers:this.offers,id:this.id}}reset(e,n){this.offers=[],this.id=10}getOffers(){return this.offers}accept(e){const n=this.offers.find(n=>n.id===e);let t=!1;if(n){this.modalService.open(Lu.MARKET),this.modalService.setModalValue(n);const e=this.modalService.registerForValueResponse().subscribe(l=>{if(e.unsubscribe(),null!==l&&!isNaN(l)){if(l>n.amount&&(l=n.amount),n.buy)if(l>this.resourcesService.getLimit(n.resource)){this.modalService.open(Lu.CONFIRM),this.modalService.setModalText("Selected amount exceeds available warehouse space.<br>Would you like to buy anyway?");const e=this.modalService.registerForConfirmation().subscribe(t=>{if(e.unsubscribe(),t){if(!this.resourcesService.decreaseResource(Su.COINS,this.calculatePrice(n,l),"Market",!0))return void this.modalService.info("Not enough coins to buy "+l+" "+Pu.prepareResourceName(n.resource));this.resourcesService.increaseResource(n.resource,l,"Market",!0),n.amount===Number(l)?this.offers.splice(this.offers.indexOf(n),1):(n.price=this.calculatePrice(n,n.amount-l),n.amount-=l)}})}else{if(!this.resourcesService.decreaseResource(Su.COINS,this.calculatePrice(n,l),"Market",!0))return void this.modalService.info("Not enough coins to buy "+l+" "+Pu.prepareResourceName(n.resource));this.resourcesService.increaseResource(n.resource,l,"Market",!0),t=!0}else{if(!this.resourcesService.decreaseResource(n.resource,l,"Market",!0))return void this.modalService.info("Not enough resources to sell");this.resourcesService.increaseResource(Su.COINS,this.calculatePrice(n,l),"Market",!0),t=!0}t&&(n.amount===Number(l)?this.offers.splice(this.offers.indexOf(n),1):(n.price=this.calculatePrice(n,n.amount-l),n.amount-=l))}})}else this.modalService.info("Market offer not found")}callMerchant(){const e=Array.from(this.resourcesService.getResources().values()).filter(e=>e.isVisible()).map(e=>({item:e.resource,chance:e.prioritise?15:1})),n=Fu.randomBetween(3,8),t=Fu.randomBetween(50,180);for(let l=0;l<n;l++){const n=Fu.randomWeightedExcept(e,[Su.COINS]),i=Fu.randomBetween(5,20),r=Fu.randomBetween(0,1),s=Fu.randomBetween(-5,25);let u=io.getResource(n).TRADE_VALUE*i;0===(u=r?Math.floor(u*(1+s/100)):Math.floor(u*(1-s/100)))?l--:this.offers.push(new Gv(this.nextId(),n,i,!!r,u,t))}this.logService.log("Merchant arrived"),this.soundService.playTownBells(),this.autoBuy(this.offers)}calculatePrice(e,n){return e.buy?Math.ceil(n/e.amount*e.price):Math.floor(n/e.amount*e.price)}}return e.ngInjectableDef=de({factory:function(){return new e(Le(Mm),Le(Gm),Le(Wv),Le(Jm),Le(Bm),Le(Bv),Le(Vm))},token:e,providedIn:"root"}),e})();class zv{constructor(e,n,t){this.marketService=e,this.villageService=n,this.resourcesService=t,this.filterText="",this.typeRadio="all"}ngOnInit(){}getOffers(){let e;return e=null!==this.filterText&&this.filterText.length>0?this.marketService.getOffers().filter(e=>Pu.prepareResourceName(e.resource).toLowerCase().includes(this.filterText)):this.marketService.getOffers(),"buy"===this.typeRadio?e=e.filter(e=>e.buy):"sell"===this.typeRadio&&(e=e.filter(e=>!e.buy)),e}getCoins(){return this.resourcesService.getResource(Su.COINS).amount}accept(e){this.marketService.accept(e)}isMarketBuilt(){return void 0!==this.villageService.getBuildings().find(e=>e.getBuildingType()===Ou.MARKETPLACE)}getResourceName(e){return Pu.prepareResourceName(e)}calculatePiecePrice(e){return this.marketService.calculatePrice(e,1)}getResourceAmount(e){return this.resourcesService.getResource(e.resource).amount}getResourceLimit(e){return this.resourcesService.getResource(e.resource).limit}}var Yv=Zt({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{margin:.5%;height:100%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}.boxTitle[_ngcontent-%COMP%]{text-align:center;border-bottom:2px solid #000}#side[_ngcontent-%COMP%]{float:right;font-size:1em;width:25%;margin:.5%;display:inline-block;vertical-align:bottom}#side[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:.8em;margin:0;padding:0;border:none;outline:0}#headers[_ngcontent-%COMP%]{margin:3px 3px 0;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;width:96.5%;text-align:center;font-size:1em;font-weight:700}#headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 24%;padding:2px;border:1px solid #000;border-left:none}#headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-of-type{border-left:1px solid #000}#market[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;border:2px solid #000;height:91.5%}#offersBox[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 0 85%;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;border-right:2px solid #000;height:100%;font-size:1.2em}#filterBox[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 0 15%;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:100%;font-size:1.2em}#offers[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;text-align:center;height:100%;overflow-y:auto}.offer[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 auto;width:98%;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;border:1px solid #000;margin:3px}.offer[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 24%;padding:2px}.offer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:.8em}#filters[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center}#filter[_ngcontent-%COMP%]{width:90%}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center}.icon2[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}#noMarket[_ngcontent-%COMP%]{margin-left:112px;color:var(--negative-colour)}"]],data:{}});function $v(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[["id","noMarket"]],null,null,null,null,null)),(e()(),us(-1,null,["No Marketplace available. No merchant will visit."]))],null,null)}function Kv(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),us(1,null,[""," buy offer"]))],null,function(e,n){e(n,1,0,n.component.getResourceName(n.parent.context.$implicit.resource))})}function jv(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),us(1,null,[""," sell offer"]))],null,function(e,n){e(n,1,0,n.component.getResourceName(n.parent.context.$implicit.resource))})}function qv(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.accept(e.parent.context.$implicit.id)&&l),l},null,null)),(e()(),us(-1,null,["Buy"]))],null,null)}function Xv(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.accept(e.parent.context.$implicit.id)&&l),l},null,null)),(e()(),us(-1,null,["Sell"]))],null,null)}function Qv(e){return cs(0,[(e()(),Kr(0,0,null,null,28,"div",[["appTooltip",""],["class","offer tooltip"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==Ql(e,1).onmousemove(t)&&l),l},null,null)),ci(1,16384,null,0,Op,[],{elementId:[0,"elementId"]},null),(e()(),Kr(2,0,null,null,11,"span",[["class","tooltipOffer"]],[[8,"id",0]],null,null,null,null)),(e()(),$r(16777216,null,null,1,null,Kv)),ci(4,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,jv)),ci(6,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(7,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),us(8,null,[" total price: ",""])),(e()(),Kr(9,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),us(10,null,[" piece price: ",""])),(e()(),Kr(11,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(12,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),us(13,null,[" storage: ","/"," "])),(e()(),Kr(14,0,null,null,3,"div",[["class","icon2 "]],null,null,null,null,null)),(e()(),us(15,null,[" "," "])),(e()(),Kr(16,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(17,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Kr(18,0,null,null,3,"div",[["class","icon2"]],null,null,null,null,null)),(e()(),us(19,null,[" "," "])),(e()(),Kr(20,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(21,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Kr(22,0,null,null,1,"div",[["class","icon2"]],null,null,null,null,null)),(e()(),us(23,null,[" "," days "])),(e()(),Kr(24,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,qv)),ci(26,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,Xv)),ci(28,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,n.context.$implicit.id),e(n,4,0,n.context.$implicit.buy),e(n,6,0,!n.context.$implicit.buy),e(n,17,0,t.getResourceName(n.context.$implicit.resource),"resources"),e(n,21,0,"coins","resources"),e(n,26,0,n.context.$implicit.buy),e(n,28,0,!n.context.$implicit.buy)},function(e,n){var t=n.component;e(n,2,0,Il(1,"",n.context.$implicit.id,"")),e(n,8,0,n.context.$implicit.price),e(n,10,0,t.calculatePiecePrice(n.context.$implicit)),e(n,13,0,t.getResourceAmount(n.context.$implicit),t.getResourceLimit(n.context.$implicit)),e(n,15,0,n.context.$implicit.amount),e(n,19,0,n.context.$implicit.price),e(n,23,0,n.context.$implicit.duration)})}function Zv(e){return cs(0,[(e()(),Kr(0,0,null,null,67,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),Kr(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["Market"])),(e()(),Kr(4,0,null,null,5,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(5,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(6,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),us(7,null,[" "," "])),(e()(),$r(16777216,null,null,1,null,$v)),ci(9,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(10,0,null,null,57,"div",[["id","market"]],null,null,null,null,null)),(e()(),Kr(11,0,null,null,15,"div",[["id","offersBox"]],null,null,null,null,null)),(e()(),Kr(12,0,null,null,2,"div",[["class","boxTitle"]],null,null,null,null,null)),(e()(),Kr(13,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["Offers"])),(e()(),Kr(15,0,null,null,8,"div",[["id","headers"]],null,null,null,null,null)),(e()(),Kr(16,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["offer"])),(e()(),Kr(18,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["price"])),(e()(),Kr(20,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["duration"])),(e()(),Kr(22,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["buy/sell"])),(e()(),Kr(24,0,null,null,2,"div",[["id","offers"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,Qv)),ci(26,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),(e()(),Kr(27,0,null,null,40,"div",[["id","filterBox"]],null,null,null,null,null)),(e()(),Kr(28,0,null,null,2,"div",[["class","boxTitle"]],null,null,null,null,null)),(e()(),Kr(29,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["Filters"])),(e()(),Kr(31,0,null,null,36,"div",[["id","filters"]],null,null,null,null,null)),(e()(),Kr(32,0,null,null,5,"input",[["id","filter"],["placeholder","search"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==Ql(e,33)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,33).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ql(e,33)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ql(e,33)._compositionEnd(t.target.value)&&l),"ngModelChange"===n&&(l=!1!==(i.filterText=t)&&l),l},null,null)),ci(33,16384,null,0,wp,[ct,rt,[2,Ap]],null,null),di(1024,null,yp,function(e){return[e]},[wp]),ci(35,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(37,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(38,0,null,null,29,"div",[],null,null,null,null,null)),(e()(),Kr(39,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),Kr(40,0,null,null,6,"input",[["name","type"],["type","radio"],["value","all"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==Ql(e,41)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,41).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ql(e,41)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ql(e,41)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==Ql(e,42).onChange()&&l),"blur"===n&&(l=!1!==Ql(e,42).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.typeRadio=t)&&l),l},null,null)),ci(41,16384,null,0,wp,[ct,rt,[2,Ap]],null,null),ci(42,212992,null,0,Yp,[ct,rt,zp,We],{name:[0,"name"],value:[1,"value"]},null),di(1024,null,yp,function(e,n){return[e,n]},[wp,Yp]),ci(44,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(46,16384,null,0,Mp,[[4,xp]],null,null),(e()(),us(-1,null,[" All "])),(e()(),Kr(48,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(49,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),Kr(50,0,null,null,6,"input",[["name","type"],["type","radio"],["value","buy"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==Ql(e,51)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,51).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ql(e,51)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ql(e,51)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==Ql(e,52).onChange()&&l),"blur"===n&&(l=!1!==Ql(e,52).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.typeRadio=t)&&l),l},null,null)),ci(51,16384,null,0,wp,[ct,rt,[2,Ap]],null,null),ci(52,212992,null,0,Yp,[ct,rt,zp,We],{name:[0,"name"],value:[1,"value"]},null),di(1024,null,yp,function(e,n){return[e,n]},[wp,Yp]),ci(54,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(56,16384,null,0,Mp,[[4,xp]],null,null),(e()(),us(-1,null,[" Buy "])),(e()(),Kr(58,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(59,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),Kr(60,0,null,null,6,"input",[["name","type"],["type","radio"],["value","sell"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==Ql(e,61)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,61).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ql(e,61)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ql(e,61)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==Ql(e,62).onChange()&&l),"blur"===n&&(l=!1!==Ql(e,62).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.typeRadio=t)&&l),l},null,null)),ci(61,16384,null,0,wp,[ct,rt,[2,Ap]],null,null),ci(62,212992,null,0,Yp,[ct,rt,zp,We],{name:[0,"name"],value:[1,"value"]},null),di(1024,null,yp,function(e,n){return[e,n]},[wp,Yp]),ci(64,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(66,16384,null,0,Mp,[[4,xp]],null,null),(e()(),us(-1,null,[" Sell "]))],function(e,n){var t=n.component;e(n,6,0,"coins","resources"),e(n,9,0,!t.isMarketBuilt()),e(n,26,0,t.getOffers()),e(n,35,0,t.filterText),e(n,42,0,"type","all"),e(n,44,0,"type",t.typeRadio),e(n,52,0,"type","buy"),e(n,54,0,"type",t.typeRadio),e(n,62,0,"type","sell"),e(n,64,0,"type",t.typeRadio)},function(e,n){e(n,7,0,n.component.getCoins()),e(n,32,0,Ql(n,37).ngClassUntouched,Ql(n,37).ngClassTouched,Ql(n,37).ngClassPristine,Ql(n,37).ngClassDirty,Ql(n,37).ngClassValid,Ql(n,37).ngClassInvalid,Ql(n,37).ngClassPending),e(n,40,0,Ql(n,46).ngClassUntouched,Ql(n,46).ngClassTouched,Ql(n,46).ngClassPristine,Ql(n,46).ngClassDirty,Ql(n,46).ngClassValid,Ql(n,46).ngClassInvalid,Ql(n,46).ngClassPending),e(n,50,0,Ql(n,56).ngClassUntouched,Ql(n,56).ngClassTouched,Ql(n,56).ngClassPristine,Ql(n,56).ngClassDirty,Ql(n,56).ngClassValid,Ql(n,56).ngClassInvalid,Ql(n,56).ngClassPending),e(n,60,0,Ql(n,66).ngClassUntouched,Ql(n,66).ngClassTouched,Ql(n,66).ngClassPristine,Ql(n,66).ngClassDirty,Ql(n,66).ngClassValid,Ql(n,66).ngClassInvalid,Ql(n,66).ngClassPending)})}function Jv(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"app-market",[],null,null,null,Zv,Yv)),ci(1,114688,null,0,zv,[Vv,sv,Jm],null,null)],function(e,n){e(n,1,0)},null)}var eb=Gl("app-market",zv,Jv,{},{},[]);class nb{constructor(e,n,t,l,i,r,s,u,o=function(){},a=0){this.tech=e,this.category=n,this.prerequisites=t,this.flagPrerequisites=l,this.cost=i,this.requiredResearchPoints=r,this.description=s,this.finishDescription=u,this.researchPoints=a,this.finishFunction=o}getTech(){return this.tech}getTechName(){return Pu.prepareTechName(this.tech)}isResearched(){return this.researchPoints>this.requiredResearchPoints&&(this.researchPoints=this.requiredResearchPoints),this.researchPoints===this.requiredResearchPoints}getCategory(){return this.category}getDescription(){return this.description}getResearchPointsDue(){return this.requiredResearchPoints-this.researchPoints}addResearchPoints(e){this.researchPoints+=e,this.researchPoints>this.requiredResearchPoints&&(this.researchPoints=this.requiredResearchPoints)}getResearchPoints(){return this.researchPoints}setResearchPoints(e){this.researchPoints=e}setResearched(){this.researchPoints=this.requiredResearchPoints}getCost(){return this.cost}clearCost(){this.cost=new Map}getPrerequisites(){return this.prerequisites}getFlagPrerequisites(){return this.flagPrerequisites}getFinishFunction(){return this.finishFunction}getRequiredResearchPoints(){return this.requiredResearchPoints}getFinishDescription(){return this.finishDescription}}class tb{constructor(){this.prerequisites=[],this.flagPrerequisites=[],this.cost=new Map,this.researchPoints=0,this.finishFunction=function(){}}forTech(e){return this.tech=e,this}withCategory(e){return this.category=e,this}withPrerequisite(e){return this.prerequisites.push(e),this}withPrerequisites(e){return e.forEach(e=>this.prerequisites.push(e)),this}withFlagPrerequisite(e){return this.flagPrerequisites.push(e),this}withFlagPrerequisites(e){return e.forEach(e=>this.flagPrerequisites.push(e)),this}withCost(e,n){return this.cost.set(e,n),this}withCosts(e){return e.forEach((e,n)=>this.cost.set(n,e)),this}withResearchPoints(e){return this.researchPoints=e,this}withDescription(e){return this.description=e,this}withFinishDescription(e){return this.finishDescription=e,this}withFinishFunction(e){return this.finishFunction=e,this}build(){const e=new nb(this.tech,this.category,this.prerequisites,this.flagPrerequisites,this.cost,this.researchPoints,this.description,this.finishDescription,this.finishFunction);return this.tech=void 0,this.category=void 0,this.prerequisites=[],this.flagPrerequisites=[],this.cost=new Map,this.researchPoints=0,this.description=void 0,this.finishDescription=void 0,this.finishFunction=function(){},e}}const lb=(()=>{class e{constructor(e,n,t,l,i,r){this.servicesService=e,this.modalService=n,this.resourcesService=t,this.logService=l,this.soundService=i,this.gameService=r,this.techUpdate=new _,this.techList=[],this.techDone=[],this.techQueue=[],this.techStarted=[],this.techQueueSize=1,this.foresight=0,this.showDone=!1,this.servicesService.addService(xu.RESEARCH,this),this.init()}init(){this.techList=[];const e=new tb;Object.entries(uo).forEach(n=>{e.forTech(vu[n[0]]).withCategory(n[1].CATEGORY).withFinishFunction(n[1].FINISH).withResearchPoints(n[1].RESEARCH_POINT).withPrerequisites(n[1].PREREQUISITES).withFlagPrerequisites(n[1].FLAG_PREREQUISITES?n[1].FLAG_PREREQUISITES:[]).withDescription(n[1].DESCRIPTION).withFinishDescription(n[1].FINISH_DESCRIPTION),n[1].COST.forEach(n=>e.withCost(n.resource,n.amount)),this.techList.push(e.build())})}isResearched(e){return null!=this.techDone.find(n=>n===e)}startResearch(e){if(this.techQueue.find(n=>n.getTech()===e))return;const n=this.techList.find(n=>n.getTech()===e);let t=!0,l="";if(n.getPrerequisites().forEach(e=>{this.techDone.includes(e)||this.techQueue.find(n=>n.getTech()===e)||(t=!1,l+=Pu.prepareTechName(e)+" not researched!<br>")}),n.getFlagPrerequisites().forEach(e=>{this.gameService.isEnabled(e)||(t=!1,l+=Pu.prepareFlagName(e)+" not unlocked!<br>")}),!t)return void this.modalService.info(l);this.modalService.open(Lu.RESEARCH_UNLOCK),this.modalService.setTech(this.techList.find(n=>n.getTech()===e));const i=this.modalService.registerForConfirmation().subscribe(n=>{if(i.unsubscribe(),n){const n=this.techList.find(n=>n.getTech()===e);if(!this.techStarted.find(n=>n[0]===e)){let e=!0,t="";if(Array.from(n.getCost().entries()).forEach(n=>{const l=this.resourcesService.hasResource(n[0],n[1],"Research",!0);0!==l&&(t+="Missing "+l+" "+Pu.prepareResourceName(n[0])+"!<br>",e=!1)}),!e)return void this.modalService.info(t)}let t=!0,l="";if(Array.from(n.getCost().entries()).forEach(e=>{const n=this.resourcesService.hasResource(e[0],e[1],"Research",!0);0!==n&&(l+="Missing "+n+" "+Pu.prepareResourceName(e[0])+"!<br>",t=!1)}),!t)return void this.modalService.info(l);this.resourcesService.decreaseResources(n.getCost(),"Research",!0);const i=this.techList.find(n=>n.getTech()===e);i.clearCost(),this.techStarted.find(e=>e[0]===i.getTech())||this.techStarted.push([i.getTech(),i.getResearchPoints()]),this.techQueue.push(i)}})}progressTech(e){this.techQueue.length>0&&(this.techQueue[0].addResearchPoints(e),this.techQueue[0].isResearched()&&(this.logService.log(this.techQueue[0].getTechName()+" researched"),this.soundService.playTownBells(),this.techQueue[0].getFinishFunction()(this.servicesService),this.techDone.push(this.techQueue[0].getTech()),this.techStarted=this.techStarted.filter(e=>e[0]!==this.techQueue[0].getTech()),this.techQueue.shift()),this.techUpdate.next())}save(){const e=[];return this.techQueue.forEach(n=>{e.push(n.getTech());const t=this.techStarted.find(e=>e[0]===n.getTech());t&&(t[1]=n.getResearchPoints())}),{foresight:this.foresight,showDone:this.showDone,techDone:this.techDone,techStarted:this.techStarted,techQueue:e,techQueueSize:this.techQueueSize}}load(e){this.init(),this.foresight=e.foresight,this.showDone=void 0!==e.showDone&&e.showDone,this.techDone=e.techDone,this.techStarted=e.techStarted,this.techQueueSize=void 0!==e.techQueueSize?e.techQueueSize:1,this.techDone.forEach(e=>this.techList.find(n=>n.getTech()===e).setResearched()),this.techStarted.forEach(e=>{const n=this.techList.find(n=>n.getTech()===e[0]);n&&(n.clearCost(),n.setResearchPoints(e[1]))}),this.techQueue=[],e.techQueue?e.techQueue.forEach(e=>{this.techQueue.push(this.techList.find(n=>n.getTech()===e))}):e.currentResearchTech&&this.techQueue.push(this.techList.find(n=>n.getTech()===e.currentResearchTech)),this.techDone.includes(vu.BARRACKS)&&!this.gameService.isEnabled(bu.BARRACKS)&&(this.gameService.enable(bu.BARRACKS),this.logService.log("Barracks invented"))}reset(e,n){this.techList=[],this.techDone=[],this.techStarted=[],this.techQueue=[],this.techQueueSize=1,this.foresight=0,this.showDone=!1,this.init()}getTech(){return this.techList.filter(e=>{if(this.techDone.includes(e.getTech()))return this.showDone;let n=!0;return e.getPrerequisites().forEach(e=>{this.checkPrerequisite(e,this.foresight)||(n=!1)}),n})}checkPrerequisite(e,n){if(this.techDone.includes(e))return!0;if(n>0){let t=!0;return this.techList.find(n=>n.getTech()===e).getPrerequisites().forEach(e=>{this.checkPrerequisite(e,n-1)||(t=!1)}),t}return!1}getCurrentResearch(){return this.techQueue.length>0?this.techQueue[0]:null}increaseForesight(e){this.foresight+=1}isResearchStarted(){return this.techQueue.length>0}getTechPrerequisites(e){const n=[];return e.getPrerequisites().forEach(e=>{this.techDone.includes(e)||n.push(e)}),n}registerForUpdate(){return this.techUpdate.asObservable()}getForesight(){return this.foresight}getTechFlagPrerequisites(e){const n=[];return e.getFlagPrerequisites().forEach(e=>{this.gameService.isEnabled(e)||n.push(e)}),n}finishTech(e){this.techDone.push(e);const n=this.techList.find(n=>n.getTech()===e);n&&(this.logService.log(n.getTechName()+" researched"),n.getFinishFunction()(this.servicesService)),this.techQueue=this.techQueue.filter(n=>n.getTech()!==e),this.techUpdate.next()}toggleShowDone(){this.showDone=!this.showDone}shouldShowDone(){return this.showDone}getTechQueue(){return this.techQueue}removeFromQueue(e){this.modalService.open(Lu.CONFIRM),this.modalService.setModalText("Remove research from the queue?");const n=this.modalService.registerForConfirmation().subscribe(t=>{if(n.unsubscribe(),t){const n=this.techStarted.find(n=>n[0]===e.getTech());n?n[1]=e.getResearchPoints():this.techStarted.push([e.getTech(),e.getResearchPoints()]),this.techQueue.splice(this.techQueue.indexOf(e),1);let t=null;do{t&&(this.techQueue.splice(this.techQueue.indexOf(t),1),t=null),this.techQueue.forEach(e=>{if(null===t){const n=this.techList.find(n=>n.getTech()===e.getTech());let l=!0;n.getPrerequisites().forEach(e=>{this.techDone.includes(e)||this.techQueue.find(n=>n.getTech()===e)||(l=!1)}),n.getFlagPrerequisites().forEach(e=>{this.gameService.isEnabled(e)||(l=!1)}),l||(t=e)}})}while(null!==t)}})}increaseTechQueueSize(){this.techQueueSize+=1}getTechQueueSize(){return this.techQueueSize}hasQueueSpace(){return this.getTechQueue().length<this.techQueueSize+this.foresight}getTechDone(){return this.techDone}}return e.ngInjectableDef=de({factory:function(){return new e(Le(Mm),Le(Vm),Le(Jm),Le(Bm),Le(Bv),Le(Ym))},token:e,providedIn:"root"}),e})();class ib{constructor(e,n){this.techService=e,this.resourcesService=n,this.id=ib.randomId()}static randomId(){return Math.random()}ngOnInit(){this.updateSubscription=this.techService.registerForUpdate().subscribe(()=>{this.progressRef&&(this.progressRef.nativeElement.style.width=this.tech.getResearchPoints()/this.tech.getRequiredResearchPoints()*100+"%")})}ngAfterViewInit(){this.progressRef&&(this.progressRef.nativeElement.style.width=this.tech.getResearchPoints()/this.tech.getRequiredResearchPoints()*100+"%")}ngOnChanges(){this.progressRef&&(this.progressRef.nativeElement.style.width=this.tech.getResearchPoints()/this.tech.getRequiredResearchPoints()*100+"%")}getResourceName(e){return Pu.prepareResourceName(e)}start(){this.techService.startResearch(this.tech.getTech())}getPrerequisiteName(e){return Pu.prepareTechName(e)}getMissingPrerequisites(){return this.techService.getTechPrerequisites(this.tech)}hasResource(e){return 0===this.resourcesService.hasResource(e.key,e.value,"Research",!0)}getMissingFlagPrerequisites(){return this.techService.getTechFlagPrerequisites(this.tech)}getFlagPrerequisiteName(e){return Pu.prepareFlagName(e)}}var rb=Zt({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #000}#researched[_ngcontent-%COMP%]{display:inline-block;width:100%;padding:3px;text-align:center;cursor:initial;border:1px solid #000}#wrapperNotAvailable[_ngcontent-%COMP%]{display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #57575a}#titleGrey[_ngcontent-%COMP%]{display:inline-block;color:#57575a}.notMet[_ngcontent-%COMP%]{color:var(--negative-colour)}.title[_ngcontent-%COMP%]{text-align:left}hr[_ngcontent-%COMP%]{border-color:#000}#progress[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background-color:var(--active-colour);z-index:1}#text[_ngcontent-%COMP%]{position:relative;z-index:2}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}"]],data:{}});function sb(e){return cs(0,[(e()(),Kr(0,0,null,null,7,"div",[["appTooltip",""],["class","tooltip"],["id","researched"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==Ql(e,1).onmousemove(t)&&l),l},null,null)),ci(1,16384,null,0,Op,[],{elementId:[0,"elementId"]},null),(e()(),Kr(2,0,[[1,0],["progress",1]],null,0,"div",[["id","progress"]],null,null,null,null,null)),(e()(),Kr(3,0,null,null,1,"div",[["id","text"]],null,null,null,null,null)),(e()(),us(4,null,["",""])),(e()(),Kr(5,0,null,null,2,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),us(6,null,[" ",""])),(e()(),Kr(7,0,null,null,0,"br",[],null,null,null,null,null))],function(e,n){e(n,1,0,n.component.id)},function(e,n){var t=n.component;e(n,4,0,t.tech.getTechName()),e(n,5,0,Il(1,"",t.id,"")),e(n,6,0,t.tech.getFinishDescription())})}function ub(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),us(-1,null,["Cost:"])),(e()(),Kr(2,0,null,null,0,"br",[],null,null,null,null,null))],null,null)}function ob(e){return cs(0,[(e()(),Kr(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),us(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.value)})}function ab(e){return cs(0,[(e()(),Kr(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"div",[["class","notMet"]],null,null,null,null,null)),(e()(),us(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.value)})}function cb(e){return cs(0,[(e()(),Kr(0,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,ob)),ci(2,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,ab)),ci(4,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(5,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(6,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){var t=n.component;e(n,2,0,t.hasResource(n.context.$implicit)),e(n,4,0,!t.hasResource(n.context.$implicit)),e(n,6,0,t.getResourceName(n.context.$implicit.key),"resources")},null)}function hb(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),us(1,null,[" "," "]))],null,function(e,n){e(n,1,0,n.component.getPrerequisiteName(n.context.$implicit))})}function db(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),us(1,null,[" "," "]))],null,function(e,n){e(n,1,0,n.component.getFlagPrerequisiteName(n.context.$implicit))})}function gb(e){return cs(0,[(e()(),Kr(0,0,null,null,7,"div",[["class","prerequisites"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),us(-1,null,["Prerequisites:"])),(e()(),Kr(3,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,hb)),ci(5,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),(e()(),$r(16777216,null,null,1,null,db)),ci(7,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,5,0,t.getMissingPrerequisites()),e(n,7,0,t.getMissingFlagPrerequisites())},null)}function pb(e){return cs(0,[(e()(),Kr(0,0,null,null,17,"div",[["appTooltip",""],["class","tooltip"],["id","wrapper"]],null,[[null,"click"],[null,"mousemove"]],function(e,n,t){var l=!0,i=e.component;return"mousemove"===n&&(l=!1!==Ql(e,1).onmousemove(t)&&l),"click"===n&&(l=!1!==i.start()&&l),l},null,null)),ci(1,16384,null,0,Op,[],{elementId:[0,"elementId"]},null),(e()(),Kr(2,0,[[1,0],["progress",1]],null,0,"div",[["id","progress"]],null,null,null,null,null)),(e()(),Kr(3,0,null,null,1,"div",[["id","text"]],null,null,null,null,null)),(e()(),us(4,null,["",""])),(e()(),Kr(5,0,null,null,12,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),us(6,null,[" ",""])),(e()(),Kr(7,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(8,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Kr(9,0,null,null,1,"div",[["class","title"]],null,null,null,null,null)),(e()(),us(10,null,["Research points: ","/",""])),(e()(),$r(16777216,null,null,1,null,ub)),ci(12,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,2,null,cb)),ci(14,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),hi(0,ra,[It]),(e()(),$r(16777216,null,null,1,null,gb)),ci(17,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.id),e(n,12,0,t.tech.getCost().size>0),e(n,14,0,qt(n,14,0,Ql(n,15).transform(t.tech.getCost()))),e(n,17,0,t.getMissingPrerequisites().length>0||t.getMissingFlagPrerequisites().length>0)},function(e,n){var t=n.component;e(n,4,0,t.tech.getTechName()),e(n,5,0,Il(1,"",t.id,"")),e(n,6,0,t.tech.getDescription()),e(n,10,0,t.tech.getResearchPoints(),t.tech.getRequiredResearchPoints())})}function mb(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),us(-1,null,["Cost:"])),(e()(),Kr(2,0,null,null,0,"br",[],null,null,null,null,null))],null,null)}function fb(e){return cs(0,[(e()(),Kr(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),us(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.value)})}function Sb(e){return cs(0,[(e()(),Kr(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"div",[["class","notMet"]],null,null,null,null,null)),(e()(),us(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.value)})}function Eb(e){return cs(0,[(e()(),Kr(0,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,fb)),ci(2,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,Sb)),ci(4,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(5,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(6,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){var t=n.component;e(n,2,0,t.hasResource(n.context.$implicit)),e(n,4,0,!t.hasResource(n.context.$implicit)),e(n,6,0,t.getResourceName(n.context.$implicit.key),"resources")},null)}function vb(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),us(1,null,[" "," "]))],null,function(e,n){e(n,1,0,n.component.getPrerequisiteName(n.context.$implicit))})}function bb(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),us(1,null,[" "," "]))],null,function(e,n){e(n,1,0,n.component.getFlagPrerequisiteName(n.context.$implicit))})}function Ob(e){return cs(0,[(e()(),Kr(0,0,null,null,7,"div",[["class","prerequisites"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),us(-1,null,["Prerequisites:"])),(e()(),Kr(3,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,vb)),ci(5,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),(e()(),$r(16777216,null,null,1,null,bb)),ci(7,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,5,0,t.getMissingPrerequisites()),e(n,7,0,t.getMissingFlagPrerequisites())},null)}function Rb(e){return cs(0,[(e()(),Kr(0,0,null,null,16,"div",[["appTooltip",""],["class","tooltip"],["id","wrapperNotAvailable"]],null,[[null,"click"],[null,"mousemove"]],function(e,n,t){var l=!0,i=e.component;return"mousemove"===n&&(l=!1!==Ql(e,1).onmousemove(t)&&l),"click"===n&&(l=!1!==i.start()&&l),l},null,null)),ci(1,16384,null,0,Op,[],{elementId:[0,"elementId"]},null),(e()(),Kr(2,0,null,null,1,"div",[["id","titleGrey"]],null,null,null,null,null)),(e()(),us(3,null,["",""])),(e()(),Kr(4,0,null,null,12,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),us(5,null,[" ",""])),(e()(),Kr(6,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(7,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Kr(8,0,null,null,1,"div",[["class","title"]],null,null,null,null,null)),(e()(),us(9,null,["Research points: ","/",""])),(e()(),$r(16777216,null,null,1,null,mb)),ci(11,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,2,null,Eb)),ci(13,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),hi(0,ra,[It]),(e()(),$r(16777216,null,null,1,null,Ob)),ci(16,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.id),e(n,11,0,t.tech.getCost().size>0),e(n,13,0,qt(n,13,0,Ql(n,14).transform(t.tech.getCost()))),e(n,16,0,t.getMissingPrerequisites().length>0||t.getMissingFlagPrerequisites().length>0)},function(e,n){var t=n.component;e(n,3,0,t.tech.getTechName()),e(n,4,0,Il(1,"",t.id,"")),e(n,5,0,t.tech.getDescription()),e(n,9,0,t.tech.getResearchPoints(),t.tech.getRequiredResearchPoints())})}function Tb(e){return cs(0,[Zr(671088640,1,{progressRef:0}),(e()(),$r(16777216,null,null,1,null,sb)),ci(2,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,pb)),ci(4,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,Rb)),ci(6,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.tech.isResearched()),e(n,4,0,0===t.getMissingPrerequisites().length&&!t.tech.isResearched()),e(n,6,0,t.getMissingPrerequisites().length>0&&!t.tech.isResearched())},null)}class Cb{constructor(e,n){this.techService=e,this.villageService=n}ngOnInit(){this.categories=Object.keys(ku),this.categories=this.categories.slice(this.categories.length/2)}getTechList(e){return this.techService.getTech().filter(n=>n.getCategory()===ku[e])}getCurrentResearch(){return this.techService.getCurrentResearch()}research(e){this.techService.progressTech(e)}isDev(){return!zu.production}getForesight(){return this.techService.getForesight()}isResearcher(){return this.villageService.getBuildings().filter(e=>e.getBuildingType()===Ou.WORKSHOP).map(e=>e).filter(e=>e.willResearch()).length>0}shouldShowDone(){return this.techService.shouldShowDone()}showDone(){this.techService.toggleShowDone()}getTechQueue(){return this.techService.getTechQueue()}removeFromQueue(e){this.techService.removeFromQueue(e)}getTechQueueSize(){return this.techService.getTechQueueSize()}}var Ib=Zt({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{margin:.7%;height:100%}#categories[_ngcontent-%COMP%]{display:-webkit-inline-box;display:inline-flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;border:1px solid #000;height:86%;width:100%;text-align:center}.category[_ngcontent-%COMP%]{text-align:center;-webkit-box-flex:0;flex:0 0 19.75%;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;border:1px solid #000;-webkit-box-align:center;align-items:center}#categoryBody[_ngcontent-%COMP%]{height:100%;width:100%;overflow-y:auto;overflow-x:hidden}.title[_ngcontent-%COMP%]{padding:2px;width:100%;font-weight:bolder;font-size:1em;margin-bottom:5px;display:block;border-bottom:1px solid #000}app-tech[_ngcontent-%COMP%]{display:inline-block;margin-bottom:4px;margin-top:4px;margin-left:-4px;width:75%;font-size:.7em}#researching[_ngcontent-%COMP%]{margin-bottom:8px}#currentTech[_ngcontent-%COMP%]{display:inline-block;width:auto;margin-right:10px}.tech[_ngcontent-%COMP%]{cursor:pointer}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center}#noResearchers[_ngcontent-%COMP%]{margin-left:175px;color:var(--negative-colour)}.showHiddenButton[_ngcontent-%COMP%]{font-size:.8em;padding:4px;margin-left:auto}#techQueue[_ngcontent-%COMP%]{display:-webkit-inline-box;display:inline-flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}.techQueueEntry[_ngcontent-%COMP%]{width:110px;margin-right:20px;cursor:pointer}"]],data:{}});function yb(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"app-tech",[["class","techQueueEntry"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.removeFromQueue(e.context.$implicit)&&l),l},Tb,rb)),ci(1,4833280,null,0,ib,[lb,Jm],{tech:[0,"tech"]},null)],function(e,n){e(n,1,0,n.context.$implicit)},null)}function _b(e){return cs(0,[(e()(),Kr(0,0,null,null,3,"span",[],null,null,null,null,null)),(e()(),Kr(1,0,null,null,2,"div",[["id","techQueue"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,yb)),ci(3,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,3,0,n.component.getTechQueue())},null)}function Ab(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["nothing"]))],null,null)}function wb(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.research(10)&&l),l},null,null)),(e()(),us(-1,null,["Research"]))],null,null)}function Nb(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[["id","noResearchers"]],null,null,null,null,null)),(e()(),us(-1,null,["No workshop set to research."]))],null,null)}function Pb(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[["class","showHiddenButton"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.showDone()&&l),l},null,null)),(e()(),us(-1,null,["show finished"]))],null,null)}function kb(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[["class","showHiddenButton"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.showDone()&&l),l},null,null)),(e()(),us(-1,null,["hide finished"]))],null,null)}function xb(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"app-tech",[["class","tech"]],null,null,null,Tb,rb)),ci(1,4833280,null,0,ib,[lb,Jm],{tech:[0,"tech"]},null)],function(e,n){e(n,1,0,n.context.$implicit)},null)}function Mb(e){return cs(0,[(e()(),Kr(0,0,null,null,5,"div",[["class","category"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),us(2,null,["",""])),(e()(),Kr(3,0,null,null,2,"span",[["id","categoryBody"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,xb)),ci(5,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,5,0,n.component.getTechList(n.context.$implicit))},function(e,n){e(n,2,0,n.context.$implicit)})}function Db(e){return cs(0,[(e()(),Kr(0,0,null,null,21,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,7,"div",[["id","researching"]],null,null,null,null,null)),(e()(),us(2,null,[" Research queue (","/","): \xa0 "])),(e()(),$r(16777216,null,null,1,null,_b)),ci(4,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,Ab)),ci(6,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,wb)),ci(8,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(9,0,null,null,9,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(10,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(11,114688,null,0,Rp,[],{name:[0,"name"]},null),(e()(),us(12,null,["\xa0"," "])),(e()(),$r(16777216,null,null,1,null,Nb)),ci(14,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,Pb)),ci(16,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,kb)),ci(18,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(19,0,null,null,2,"div",[["id","categories"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,Mb)),ci(21,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,4,0,t.getCurrentResearch()),e(n,6,0,!t.getCurrentResearch()),e(n,8,0,t.isDev()),e(n,11,0,"foresight"),e(n,14,0,!t.isResearcher()),e(n,16,0,!t.shouldShowDone()),e(n,18,0,t.shouldShowDone()),e(n,21,0,t.categories)},function(e,n){var t=n.component;e(n,2,0,t.getTechQueue().length,t.getTechQueueSize()+t.getForesight()),e(n,12,0,t.getForesight())})}function Lb(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"app-research",[],null,null,null,Db,Ib)),ci(1,114688,null,0,Cb,[lb,sv],null,null)],function(e,n){e(n,1,0)},null)}var Fb=Gl("app-research",Cb,Lb,{},{},[]);class Hb{constructor(e,n){this.troop=e,this.size=n}getTroopStrength(){return ro.getTroop(this.troop).STRENGTH}getTroopDefense(){return ro.getTroop(this.troop).DEFENSE}getTroopPay(){return ro.getTroop(this.troop).PAY}getRecruitTime(){return ro.getTroop(this.troop).RECRUIT_TIME}}class Ub{constructor(e){this.units=e}static clone(e){const n=new Ub([]);return e.units.forEach(e=>n.addTroop(e.troop,e.size)),n}getRandomUnit(){return Fu.randomArrayElement(this.units.filter(e=>e.size>=0))}getUnit(e){return this.units.find(n=>n.troop===e)}removeEmptyUnits(){this.units=this.units.filter(e=>e.size>0)}hasAny(){return this.removeEmptyUnits(),this.units.length>0}addTroop(e,n){const t=this.units.find(n=>n.troop===e);t?t.size+=n:this.units.push(new Hb(e,n))}getArmySize(){let e=0;return this.removeEmptyUnits(),this.units.filter(e=>e.troop!==_u.COLONIST).forEach(n=>e+=n.size),e}getArmyPower(e){let n=0;return this.units.forEach(t=>{n+=e?t.size*t.getTroopStrength():t.size*t.getTroopDefense()}),n}removeTroop(e,n){const t=this.units.find(n=>n.troop===e);t&&(t.size-=n),this.removeEmptyUnits()}addArmy(e){e.units.forEach(e=>this.addTroop(e.troop,e.size))}getArmyPay(){let e=0;return this.units.filter(e=>e.troop!==_u.COLONIST).forEach(n=>e+=n.getTroopPay()*n.size),e}clearArmy(){this.units=[]}}class Gb{constructor(){this.skirmish=[]}}class Bb{constructor(e,n,t,l,i){this.attackerTroop=e,this.defenderTroop=n,this.attack=t,this.defense=l,this.result=i}}const Wb=(()=>{class e{constructor(e,n,t,l,i,r,s,u){this.resourcesService=e,this.modalService=n,this.logService=t,this.landService=l,this.soundService=i,this.calendarService=r,this.effectsService=s,this.servicesService=u,this.barracksSize=0,this.defense=0,this.stashSize=0,this.paydayCounter=30,this.army=new Ub([]),this.recruits=[],this.recruitsUpdate=new _,u.addService(xu.ARMY,this),this.calendarService.registerForDayChange().subscribe(e=>{this.calculatePayday()})}tick(e){}load(e){this.barracksSize=e.barracksSize,this.defense=e.defense,this.paydayCounter=void 0!==e.paydayCounter?e.paydayCounter:30,this.stashSize=e.stashSize,this.army.units=[],void 0!==e.troops?e.troops.forEach(e=>{this.army.addTroop(e[0],e[1])}):void 0!==e.army&&e.army.forEach(e=>{this.army.addTroop(e[0],e[1])}),this.recruits=[],e.recruits.forEach(e=>{this.recruits.push([new Hb(e[0],e[1]),e[2]])}),void 0!==e.missionsInProgress&&e.missionsInProgress.forEach(e=>{e[4].forEach(e=>{this.army.addTroop(e[0],e[1])})})}save(){const e=[];this.army.units.forEach(n=>e.push([n.troop,n.size]));const n=[];return this.recruits.forEach(e=>n.push([e[0].troop,e[0].size,e[1]])),{barracksSize:this.barracksSize,army:e,recruits:n,defense:this.defense,stashSize:this.stashSize,paydayCounter:this.paydayCounter}}reset(e,n){this.recruits=[],this.barracksSize=0,this.defense=0,this.stashSize=0,this.paydayCounter=30,this.army.units=[]}progressRecruitment(e){this.recruits.length>0&&(this.recruits[0][1]+=e,this.recruits[0][1]>=this.recruits[0][0].getRecruitTime()&&(this.army.addTroop(this.recruits[0][0].troop,1),this.recruits[0][0].size-=1,this.recruits[0][1]=0,0===this.recruits[0][0].size&&this.recruits.shift()),this.recruitsUpdate.next())}recruit(e,n){if(this.getFreeBarracks()>=n)if(this.resourcesService.getPeople()>=n){const t=new Map;ro.getTroop(e).COST.forEach(e=>t.set(e.resource,e.amount)),this.resourcesService.decreaseResources(t,"Army",!0,n)&&(this.resourcesService.removeRecruit(n),this.recruits.push([new Hb(e,n),0]))}else this.modalService.info("Not enough unemployed people to recruit!");else this.modalService.info("Not enough space in barracks for so many recruits")}getRecruits(){return this.recruits}getUnits(){return this.army.units}getWorldService(){return this.servicesService.getService(xu.WORLD)}getArmySize(){let e=this.army.getArmySize();return this.recruits.forEach(n=>e+=n[0].size),this.getWorldService().getPlayerMissions().forEach(n=>{e+=n.army.getArmySize()}),this.getWorldService().getStationedArmies().forEach(n=>{e+=n.getArmySize()}),e}getFreeBarracks(){return this.barracksSize-this.getArmySize()}increaseBarracks(e){this.barracksSize+=e}decreaseBarracks(e){this.barracksSize-=e}getBarracksSize(){return this.barracksSize}getDefenseStrength(){let e=this.defense;return this.army.units.forEach(n=>e+=n.getTroopDefense()*n.size),e}increaseDefense(e){this.defense+=e}decreaseDefense(e){this.defense-=e}hasRecruits(){return this.recruits.length>0}registerForRecruitsUpdate(){return this.recruitsUpdate.asObservable()}getAttackStrength(){let e=0;return this.army.units.forEach(n=>e+=n.getTroopStrength()*n.size),e}increaseStash(e){this.stashSize+=e}decreaseStash(e){this.stashSize-=e}calculateSoldiersPay(){let e=0;return e+=this.army.getArmyPay(),this.getWorldService().getPlayerMissions().forEach(n=>{e+=n.army.getArmyPay()}),this.getWorldService().getStationedArmies().forEach(n=>{e+=n.getArmyPay()}),e}getPaydayCounter(){return this.paydayCounter}calculatePayday(){if(this.paydayCounter<=0){const e=this.calculateSoldiersPay();if(e>0){let n=this.resourcesService.hasResource(Su.COINS,e,"Army");if(n>e&&(n=e),n>0){this.resourcesService.decreaseResource(Su.COINS,e-n,"Army");const t=[];for(;n>0&&(this.army.units.forEach(e=>{if(n>0&&e.getTroopPay()>0&&e.size>0&&(n-=e.getTroopPay(),Fu.chance(.25))){e.size-=1;const n=t.find(n=>n[0]===e.troop);n?n[1]+=1:t.push([e.troop,1])}}),!(n<=0));){const e=[];this.getWorldService().getPlayerMissions().forEach(n=>{n.army.getArmySize()>0&&e.push(n.army)}),this.getWorldService().getStationedArmies().forEach(n=>{n.getArmySize()>0&&e.push(n)}),e.forEach(e=>{n>0&&e.units.forEach(e=>{if(n>0&&e.getTroopPay()>0&&e.size>0&&(n-=e.getTroopPay(),Fu.chance(.25))){e.size-=1;const n=t.find(n=>n[0]===e.troop);n?n[1]+=1:t.push([e.troop,1])}})})}if(t.length>0){let e="Deserters:<br>";t.forEach(n=>e+="&emsp;"+n[1]+" "+Pu.prepareTroopName(n[0])+"<br>"),this.logService.warning(e)}}else this.resourcesService.decreaseResource(Su.COINS,e,"Army")}this.paydayCounter=30}else this.paydayCounter-=1}getTroopEffectsMultiplier(e){return 1+this.getTroopEffectsValue(e)/100}getTroopEffectsValue(e){let n=0;return this.effectsService.getArmyEffects().filter(n=>null===n.troop||n.troop===e).forEach(e=>n+=e.effect),n}addMilitia(e){this.army.addTroop(_u.MILITIA,e)}calculateAttack(e,n,t,l,i){const r=new Gb;r.attackerArmy=Ub.clone(e),r.defenderArmy=Ub.clone(n),r.defense=t;let s=0,u=0,o=0;if(e.getArmySize()>n.getArmySize()?(u=Math.floor(e.getArmySize()/n.getArmySize())-1)>3&&(u=3):n.getArmySize()>e.getArmySize()&&(o=Math.floor(n.getArmySize()/e.getArmySize())-1)>3&&(o=3),r.attackerArmySizeBonus=u,r.defenderArmySizeBonus=o,e.units.length>0&&n.units.length>0){let a=n.getRandomUnit(),c=a.getTroopDefense(),h=e.getRandomUnit(),d=h.getTroopStrength();for(;e.units.length>0&&n.units.length>0;){if(s+=1,null===h){d=(h=e.getRandomUnit()).getTroopStrength();const n=Math.floor(d/2);d-=n<t?n:t}null===a&&(c=(a=n.getRandomUnit()).getTroopDefense());let g=0,p=0,m=0;if(l)p=g=d*this.getTroopEffectsMultiplier(h.troop)+u,m=c+o,g-=c+o;else if(i){const e=c*this.getTroopEffectsMultiplier(a.troop)+o;m=e,p=d+u,g=-e+d+u}else p=g=d+u,m=c+o,g-=c+o;const f=this.calculateWinChance(g);Fu.chance(f/100)?(r.skirmish.push(new Bb(h.troop,a.troop,p,m,!0)),a.size-=1,n.removeEmptyUnits(),a=null,d-=1):(r.skirmish.push(new Bb(h.troop,a.troop,p,m,!1)),h.size-=1,e.removeEmptyUnits(),h=null,c-=1)}}return e.units.length>0?(r.result=!0,r.armyAfterFight=Ub.clone(e)):(r.result=!1,r.armyAfterFight=Ub.clone(n)),r}calculateWinChance(e){let n=Math.floor(Math.abs(e)),t=50,l=5;for(n>=1&&(n-=1,t+=10*Math.sign(e));n>0;)t+=l*Math.sign(e),l+=1,n-=1;return t>95?t=95:t<5&&(t=5),t}getArmy(){return this.army}loot(e){const n=new Map;let t="Loot:<br>";const l=Array.from(this.resourcesService.getResources().values()).filter(e=>e.isVisible()).map(e=>({item:e.resource,chance:e.prioritise?10:1}));for(;e>5;){const t=Fu.randomWeightedExcept(l,[]),i=io.getResource(t);let r=0;for(r=Fu.randomBetween(1,i.TRADE_VALUE<10?20:i.TRADE_VALUE<50?10:i.TRADE_VALUE<300?5:2);i.TRADE_VALUE*r>e;)r-=1;r>0&&(n.has(t)?n.set(t,n.get(t)+r):n.set(t,r),e-=r*i.TRADE_VALUE)}Array.from(n.keys()).forEach(e=>{t+="&emsp;"+n.get(e)+" "+Pu.prepareResourceName(e)+"<br>"}),this.logService.success(t),this.resourcesService.increaseResources(n,"Plunder",!0)}lootPlayer(e){let n="<br>";const t=[];for(;e>0;){const n=Array.from(this.resourcesService.getResources().values()).filter(e=>e.amount>this.stashSize),l=Fu.randomExcept(n,[]);if(void 0===l){e=0;break}const i=io.getResource(l.resource);let r=0;r=Fu.randomBetween(1,i.TRADE_VALUE<10?20:i.TRADE_VALUE<50?10:i.TRADE_VALUE<300?5:2),l.amount-this.stashSize<r&&(r=l.amount-this.stashSize),e-=i.TRADE_VALUE*r;const s=t.find(e=>e.resource===l.resource);s?s.amount+=r:t.push({resource:l.resource,amount:r}),this.resourcesService.decreaseResource(l.resource,r,"Invasion",!0)}let l=0;return t.forEach(e=>{n+="&emsp;"+e.amount+" "+Pu.prepareResourceName(e.resource)+"<br>",l+=e.amount*io.getResource(e.resource).TRADE_VALUE}),this.logService.warning(t.length>0?"Plundered: "+n:"Nothing has been stolen"),Math.floor(l/100)}moveRecipeInQueue(e){Xf(this.recruits,e.previousIndex,e.currentIndex)}}return e.ngInjectableDef=de({factory:function(){return new e(Le(Jm),Le(Vm),Le(Bm),Le(lv),Le(Bv),Le(Gm),Le(nv),Le(Mm))},token:e,providedIn:"root"}),e})();class Vb{constructor(e,n){this.armyService=e,this.resourcesService=n,this.id=Math.random(),this.progress=0,this.multiplier=0}ngOnInit(){this.updateSubscription=this.armyService.registerForRecruitsUpdate().subscribe(()=>{this.progressRef&&(this.progressRef.nativeElement.style.width=this.progress/this.getRecruitTime()*100+"%")})}ngAfterViewInit(){this.progressRef&&(this.progressRef.nativeElement.style.width=this.progress/this.getRecruitTime()*100+"%")}getTroopName(){return Pu.prepareTroopName(this.troop)}getResourceName(e){return Pu.prepareResourceName(e)}checkResource(e){return 0===this.resourcesService.hasResource(e.resource,e.amount*this.multiplier,"Army",!0)}isAvailable(){const e=new Map;return this.getRecruitCost().forEach(n=>e.set(n.resource,n.amount)),this.resourcesService.hasResources(e,"Army",this.multiplier,!0)}getRecruitTime(){return ro.getTroop(this.troop).RECRUIT_TIME}getRecruitCost(){return ro.getTroop(this.troop).COST}getTroopStrength(){return ro.getTroop(this.troop).STRENGTH}getTroopDefense(){return ro.getTroop(this.troop).DEFENSE}getTroopPay(){return ro.getTroop(this.troop).PAY}}var zb=Zt({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{position:relative;display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #000;font-size:1.2em}#wrapperNotAvailable[_ngcontent-%COMP%]{position:relative;display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #57575a;font-size:1.2em}#text[_ngcontent-%COMP%]{position:relative;z-index:2}#textNotAvailable[_ngcontent-%COMP%]{position:relative;z-index:2;color:#57575a}#progressId[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background-color:var(--active-colour);z-index:1}hr[_ngcontent-%COMP%]{border-color:#000}.costTitle[_ngcontent-%COMP%], .statsTitle[_ngcontent-%COMP%]{text-align:left}.tooltipSpan[_ngcontent-%COMP%]{min-width:125px}.missing[_ngcontent-%COMP%]{color:var(--negative-colour)}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}"]],data:{}});function Yb(e){return cs(0,[(e()(),Kr(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),us(1,null,["",""]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.amount*n.component.multiplier)})}function $b(e){return cs(0,[(e()(),Kr(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"div",[["class","missing"]],null,null,null,null,null)),(e()(),us(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.amount*n.component.multiplier)})}function Kb(e){return cs(0,[(e()(),Kr(0,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),Kr(1,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,Yb)),ci(3,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,$b)),ci(5,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(6,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(7,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){var t=n.component;e(n,3,0,t.checkResource(n.context.$implicit)),e(n,5,0,!t.checkResource(n.context.$implicit)),e(n,7,0,t.getResourceName(n.context.$implicit.resource),"resources")},null)}function jb(e){return cs(0,[(e()(),Kr(0,0,null,null,26,"div",[["appTooltip",""],["class","tooltip"],["id","wrapper"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==Ql(e,1).onmousemove(t)&&l),l},null,null)),ci(1,16384,null,0,Op,[],{elementId:[0,"elementId"]},null),(e()(),Kr(2,0,[[1,0],["progressId",1]],null,0,"div",[["id","progressId"]],null,null,null,null,null)),(e()(),Kr(3,0,null,null,21,"span",[["class","tooltipSpan"]],[[8,"id",0]],null,null,null,null)),(e()(),us(4,null,[" "," x "," "])),is(5,1),(e()(),Kr(6,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Kr(7,0,null,null,1,"div",[["class","statsTitle"]],null,null,null,null,null)),(e()(),us(-1,null,["Stats (per soldier):"])),(e()(),Kr(9,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(10,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(11,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),us(12,null,[": ",""])),(e()(),Kr(13,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(14,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(15,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),us(16,null,[": ",""])),(e()(),Kr(17,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(18,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(19,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),us(20,null,[": ",""])),(e()(),Kr(21,0,null,null,1,"div",[["class","costTitle"]],null,null,null,null,null)),(e()(),us(-1,null,["Cost:"])),(e()(),$r(16777216,null,null,1,null,Kb)),ci(24,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),(e()(),Kr(25,0,null,null,1,"div",[["id","text"]],null,null,null,null,null)),(e()(),us(26,null,[""," - ",""]))],function(e,n){var t=n.component;e(n,1,0,t.id),e(n,11,0,"attack","army"),e(n,15,0,"defense","army"),e(n,19,0,"coins","resources"),e(n,24,0,t.getRecruitCost())},function(e,n){var t=n.component;e(n,3,0,Il(1,"",t.id,""));var l=t.multiplier,i=qt(n,4,1,e(n,5,0,Ql(n.parent,0),t.getTroopName()));e(n,4,0,l,i),e(n,12,0,t.getTroopStrength()),e(n,16,0,t.getTroopDefense()),e(n,20,0,t.getTroopPay()),e(n,26,0,t.getTroopName(),t.count)})}function qb(e){return cs(0,[(e()(),Kr(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),us(1,null,["",""]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.amount*n.component.multiplier)})}function Xb(e){return cs(0,[(e()(),Kr(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"div",[["class","missing"]],null,null,null,null,null)),(e()(),us(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.amount*n.component.multiplier)})}function Qb(e){return cs(0,[(e()(),Kr(0,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),Kr(1,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,qb)),ci(3,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,Xb)),ci(5,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(6,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(7,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){var t=n.component;e(n,3,0,t.checkResource(n.context.$implicit)),e(n,5,0,!t.checkResource(n.context.$implicit)),e(n,7,0,t.getResourceName(n.context.$implicit.resource),"resources")},null)}function Zb(e){return cs(0,[(e()(),Kr(0,0,null,null,26,"div",[["appTooltip",""],["class","tooltip"],["id","wrapperNotAvailable"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==Ql(e,1).onmousemove(t)&&l),l},null,null)),ci(1,16384,null,0,Op,[],{elementId:[0,"elementId"]},null),(e()(),Kr(2,0,[[1,0],["progressId",1]],null,0,"div",[["id","progressId"]],null,null,null,null,null)),(e()(),Kr(3,0,null,null,21,"span",[["class","tooltipSpan"]],[[8,"id",0]],null,null,null,null)),(e()(),us(4,null,[" "," x "," "])),is(5,1),(e()(),Kr(6,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Kr(7,0,null,null,1,"div",[["class","statsTitle"]],null,null,null,null,null)),(e()(),us(-1,null,["Stats (per soldier):"])),(e()(),Kr(9,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(10,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(11,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),us(12,null,[": ",""])),(e()(),Kr(13,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(14,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(15,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),us(16,null,[": ",""])),(e()(),Kr(17,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(18,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(19,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),us(20,null,[": ",""])),(e()(),Kr(21,0,null,null,1,"div",[["class","costTitle"]],null,null,null,null,null)),(e()(),us(-1,null,["Cost:"])),(e()(),$r(16777216,null,null,1,null,Qb)),ci(24,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),(e()(),Kr(25,0,null,null,1,"div",[["id","textNotAvailable"]],null,null,null,null,null)),(e()(),us(26,null,[""," - ",""]))],function(e,n){var t=n.component;e(n,1,0,t.id),e(n,11,0,"attack","army"),e(n,15,0,"defense","army"),e(n,19,0,"coins","resources"),e(n,24,0,t.getRecruitCost())},function(e,n){var t=n.component;e(n,3,0,Il(1,"",t.id,""));var l=t.multiplier,i=qt(n,4,1,e(n,5,0,Ql(n.parent,0),t.getTroopName()));e(n,4,0,l,i),e(n,12,0,t.getTroopStrength()),e(n,16,0,t.getTroopDefense()),e(n,20,0,t.getTroopPay()),e(n,26,0,t.getTroopName(),t.count)})}function Jb(e){return cs(0,[hi(0,ia,[]),Zr(671088640,1,{progressRef:0}),(e()(),$r(16777216,null,null,1,null,jb)),ci(3,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,Zb)),ci(5,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,3,0,t.isAvailable()),e(n,5,0,!t.isAvailable())},null)}const eO=(()=>{class e extends rv{constructor(e,n,t,l,i){super(n,e,t,i,l,Hu.FORT,xu.FORT)}}return e.ngInjectableDef=de({factory:function(){return new e(Le(Jm),Le(ev),Le(Mm),Le(VE),Le(lv))},token:e,providedIn:"root"}),e})();class nO{constructor(e,n,t,l,i,r){this.servicesService=e,this.armyService=n,this.resourcesService=t,this.fortService=l,this.router=i,this.changeDetectorRef=r,this.selection=1,this.troops=[_u.MILITIA,_u.SPY,_u.SPEARMAN,_u.ARCHER,_u.SWORDSMAN,_u.LIGHT_CAVALRY]}ngOnInit(){this.armyService.registerForRecruitsUpdate().subscribe(()=>{this.changeDetectorRef.destroyed||this.changeDetectorRef.detectChanges()})}changeSelection(e){this.selection=e}getTroops(){return this.armyService.getUnits()}getRecruits(){return this.armyService.getRecruits()}recruit(e){this.armyService.recruit(e,this.selection)}isDev(){return!zu.production}progress(){this.armyService.progressRecruitment(10)}getBarracksSize(){return this.armyService.getBarracksSize()}getTroopsSize(){return this.armyService.getArmySize()}getUnemployed(){return this.resourcesService.getPeople()}getDefenseStrength(){return this.armyService.getDefenseStrength()}getAttackStrength(){return this.armyService.getAttackStrength()}checkForTrainingSquare(){return void 0!==this.fortService.getBuildings().find(e=>e.getBuildingType()===Ou.TRAINING_SQUARE)}getSoldiersPay(){return this.armyService.calculateSoldiersPay()}getPaydayCounter(){return this.armyService.getPaydayCounter()}getMissions(){return this.servicesService.getService(xu.WORLD).getPlayerMissions()}selectMission(e){this.servicesService.getService(xu.WORLD).setSelectedMission(e),this.router.navigate(["/world"])}getTroopSize(e){const n=this.armyService.getArmy().getUnit(e);return n?n.size:0}getTroopName(e){return Pu.prepareTroopName(e)}drop(e){this.armyService.moveRecipeInQueue(e)}}var tO=Zt({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{margin:.7%;height:100%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#categories[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;border:1px solid #000;height:91.5%;text-align:center}.category[_ngcontent-%COMP%]{text-align:center;-webkit-box-flex:0;flex:0 0 33%;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;border:1px solid #000;-webkit-box-align:center;align-items:center}.recruits[_ngcontent-%COMP%]{text-align:center;-webkit-box-flex:0;flex:0 0 50%;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;overflow-y:auto;overflow-x:hidden;border-bottom:1px solid #000}.title[_ngcontent-%COMP%]{padding:2px;width:100%;font-weight:bolder;font-size:.9em;margin-bottom:5px;display:block;border-bottom:1px solid #000}#numbers[_ngcontent-%COMP%]{margin-top:-6px;padding:0;margin-bottom:5px}.number[_ngcontent-%COMP%]{border:1px solid #000;padding:2px 4px;background-color:var(--passive-colour);font-size:.75em;cursor:pointer}.active[_ngcontent-%COMP%], .number[_ngcontent-%COMP%]:hover{background-color:var(--active-colour)}app-troop[_ngcontent-%COMP%]{display:inline-block;margin:4px;width:75%;font-size:.7em;cursor:pointer}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center}#noTrainingSquare[_ngcontent-%COMP%]{margin-left:4px;color:var(--negative-colour)}#missionsScroll[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;width:100%;overflow-y:auto;-webkit-box-align:center;align-items:center}.mission[_ngcontent-%COMP%]{padding:4px;border:1px solid #000;width:80%;cursor:pointer;margin:3px}#recruitsList[_ngcontent-%COMP%]{height:100%;width:100%}"]],data:{}});function lO(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[["id","noTrainingSquare"]],null,null,null,null,null)),(e()(),us(-1,null,["No Training square available"]))],null,null)}function iO(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[["class","number"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.changeSelection(1)&&l),l},null,null)),(e()(),us(-1,null,["1x"]))],null,null)}function rO(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[["class","number active"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.changeSelection(1)&&l),l},null,null)),(e()(),us(-1,null,["1x"]))],null,null)}function sO(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[["class","number"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.changeSelection(5)&&l),l},null,null)),(e()(),us(-1,null,["5x"]))],null,null)}function uO(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[["class","number active"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.changeSelection(5)&&l),l},null,null)),(e()(),us(-1,null,["5x"]))],null,null)}function oO(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[["class","number"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.changeSelection(10)&&l),l},null,null)),(e()(),us(-1,null,["10x"]))],null,null)}function aO(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[["class","number active"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.changeSelection(10)&&l),l},null,null)),(e()(),us(-1,null,["10x"]))],null,null)}function cO(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"app-troop",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.recruit(e.context.$implicit)&&l),l},Jb,zb)),ci(1,4308992,null,0,Vb,[Wb,Jm],{troop:[0,"troop"],count:[1,"count"],multiplier:[2,"multiplier"]},null)],function(e,n){var t=n.component;e(n,1,0,n.context.$implicit,t.getTroopSize(n.context.$implicit),Il(1,"",t.selection,""))},null)}function hO(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.progress()&&l),l},null,null)),(e()(),us(-1,null,["recruit"]))],null,null)}function dO(e){return cs(0,[(e()(),Kr(0,16777216,null,null,6,"app-troop",[["cdkDrag",""],["class","cdk-drag"]],[[2,"cdk-drag-disabled",null],[2,"cdk-drag-dragging",null]],null,null,Jb,zb)),di(6144,null,aS,null,[hS]),ci(2,4866048,[[1,4]],3,hS,[rt,[3,oS],oa,or,xt,cS,[2,wv],uS,yt],null,null),Zr(603979776,2,{_handles:1}),Zr(603979776,3,{_previewTemplate:0}),Zr(603979776,4,{_placeholderTemplate:0}),ci(6,4308992,null,0,Vb,[Wb,Jm],{troop:[0,"troop"],count:[1,"count"],progress:[2,"progress"]},null),(e()(),$r(0,null,null,0))],function(e,n){e(n,6,0,n.context.$implicit[0].troop,n.context.$implicit[0].size,n.context.$implicit[1])},function(e,n){e(n,0,0,Ql(n,2).disabled,Ql(n,2)._dragRef.isDragging())})}function gO(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),us(1,null,[" ",": "," "]))],null,function(e,n){e(n,1,0,n.component.getTroopName(n.context.$implicit.troop),n.context.$implicit.size)})}function pO(e){return cs(0,[(e()(),Kr(0,0,null,null,9,"div",[["appTooltip",""],["class","mission tooltip"]],null,[[null,"click"],[null,"mousemove"]],function(e,n,t){var l=!0,i=e.component;return"mousemove"===n&&(l=!1!==Ql(e,1).onmousemove(t)&&l),"click"===n&&(l=!1!==i.selectMission(e.context.$implicit)&&l),l},null,null)),ci(1,16384,null,0,Op,[],{elementId:[0,"elementId"]},null),(e()(),us(2,null,[" "," "])),(e()(),Kr(3,0,null,null,6,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),us(4,null,[" "," "])),(e()(),Kr(5,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),us(6,null,[" "," : ","% "])),is(7,2),(e()(),$r(16777216,null,null,1,null,gO)),ci(9,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,1,0,"mission-"+n.context.$implicit.id),e(n,9,0,n.context.$implicit.army.units)},function(e,n){var t=n.context.$implicit.getMissionName();e(n,2,0,t),e(n,3,0,Il(1,"mission-",n.context.$implicit.id,""));var l=n.context.$implicit.getMissionName();e(n,4,0,l);var i=n.context.$implicit.getStatus(),r=qt(n,6,1,e(n,7,0,Ql(n.parent,0),n.context.$implicit.getDisplayProgress(),"0.0-0"));e(n,6,0,i,r)})}function mO(e){return cs(0,[hi(0,sa,[$i]),(e()(),Kr(1,0,null,null,57,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Kr(2,0,null,null,1,"div",[["id","title"]],null,null,null,null,null)),(e()(),us(-1,null,["Army"])),(e()(),Kr(4,0,null,null,17,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(5,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(6,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),us(7,null,["\xa0"," /"," \xa0\xa0 "])),(e()(),Kr(8,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(9,114688,null,0,Rp,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),us(10,null,["\xa0"," \xa0\xa0\xa0 "])),(e()(),Kr(11,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(12,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),us(13,null,["\xa0"," \xa0\xa0\xa0 "])),(e()(),Kr(14,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(15,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),us(16,null,["\xa0"," \xa0\xa0\xa0 "])),(e()(),Kr(17,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(18,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),us(19,null,["\xa0"," in "," days "])),(e()(),$r(16777216,null,null,1,null,lO)),ci(21,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(22,0,null,null,36,"div",[["id","categories"]],null,null,null,null,null)),(e()(),Kr(23,0,null,null,17,"div",[["class","category"]],null,null,null,null,null)),(e()(),Kr(24,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),us(-1,null,["GARRISON"])),(e()(),Kr(26,0,null,null,12,"div",[["id","numbers"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,iO)),ci(28,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,rO)),ci(30,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,sO)),ci(32,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,uO)),ci(34,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,oO)),ci(36,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,aO)),ci(38,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,cO)),ci(40,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),(e()(),Kr(41,0,null,null,11,"div",[["class","category"]],null,null,null,null,null)),(e()(),Kr(42,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),us(-1,null,["RECRUITS"])),(e()(),$r(16777216,null,null,1,null,hO)),ci(45,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(46,0,null,null,6,"div",[["cdkDropList",""],["class","cdk-drop-list"],["id","recruitsList"]],[[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],[[null,"cdkDropListDropped"]],function(e,n,t){var l=!0;return"cdkDropListDropped"===n&&(l=!1!==e.component.drop(t)&&l),l},null,null)),di(6144,null,oS,null,[mS]),ci(48,1196032,null,1,mS,[rt,uS,yt,[2,wv],[3,gS]],{id:[0,"id"]},{dropped:"cdkDropListDropped"}),Zr(603979776,1,{_draggables:1}),di(256,null,gS,void 0,[]),(e()(),$r(16777216,null,null,1,null,dO)),ci(52,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),(e()(),Kr(53,0,null,null,5,"div",[["class","category"]],null,null,null,null,null)),(e()(),Kr(54,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),us(-1,null,["MISSIONS IN PROGRESS"])),(e()(),Kr(56,0,null,null,2,"div",[["id","missionsScroll"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,pO)),ci(58,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,6,0,"barracks","army","Barracks"),e(n,9,0,"hammer","Workers","0 0 0 2px"),e(n,12,0,"attack","army","Attack strength"),e(n,15,0,"defense","army","Defense strength"),e(n,18,0,"coins","resources","Soldiers pay (collected every 30 days)"),e(n,21,0,!t.checkForTrainingSquare()),e(n,28,0,1!==t.selection),e(n,30,0,1===t.selection),e(n,32,0,5!==t.selection),e(n,34,0,5===t.selection),e(n,36,0,10!==t.selection),e(n,38,0,10===t.selection),e(n,40,0,t.troops),e(n,45,0,t.isDev()),e(n,48,0,"recruitsList"),e(n,52,0,t.getRecruits()),e(n,58,0,t.getMissions())},function(e,n){var t=n.component;e(n,7,0,t.getTroopsSize(),t.getBarracksSize()),e(n,10,0,t.getUnemployed()),e(n,13,0,t.getAttackStrength()),e(n,16,0,t.getDefenseStrength()),e(n,19,0,t.getSoldiersPay(),t.getPaydayCounter()+1),e(n,46,0,Ql(n,48).id,Ql(n,48).disabled,Ql(n,48)._dropListRef.isDragging(),Ql(n,48)._dropListRef.isReceiving())})}function fO(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"app-army",[],null,null,null,mO,tO)),ci(1,114688,null,0,nO,[Mm,Wb,Jm,eO,Fg,yt],null,null)],function(e,n){e(n,1,0)},null)}var SO=Gl("app-army",nO,fO,{},{},[]);class EO{constructor(e,n,t,l,i,r){this.prayer=e,this.cost=n,this.requiredFaithLevel=t,this.religion=l,this.description=i,this.effect=r}}const vO=(()=>{class e{constructor(e,n,t,l){this.servicesService=e,this.modalService=n,this.logService=t,this.resourcesService=l,this.faith=0,this.faithCap=40,this.faithLevel=1,this.faithShield=0,this.religion=yu.NONE,this.prayers=[],e.addService(xu.RELIGION,this),this.initPrayers()}initPrayers(){this.prayers=[],Object.entries(ao.PRAYERS).forEach(e=>{this.prayers.push(new EO(Ru[e[0]],e[1].FAITH,e[1].FAITH_LEVEL,e[1].RELIGION,e[1].DESCRIPTION,e[1].FINISH))})}load(e){this.faith=e.faith,this.faithCap=e.faithCap,this.faithLevel=e.faithLevel,this.religion=e.religion,this.faithShield=e.faithShield,this.prayers.find(e=>e.prayer===Ru.PREACH).cost=e.preachCost}save(){return{faith:this.faith,faithCap:this.faithCap,faithLevel:this.faithLevel,religion:this.religion,faithShield:this.faithShield,preachCost:this.prayers.find(e=>e.prayer===Ru.PREACH).cost}}reset(e,n){this.faith=0,this.faithCap=40,this.faithLevel=1,this.faithShield=0,this.religion=yu.NONE,this.prayers=[],this.initPrayers()}getFaith(){return this.faith}increaseFaith(e){this.faith<this.faithCap&&(this.faith+=e,this.faith===this.faithCap&&this.logService.success("Full faith"),this.faith>this.faithCap&&(this.faith=this.faithCap))}increaseFaithCap(e){this.faithCap+=e}decreaseFaithCap(e){this.faithCap-=e,this.faith>this.faithCap&&(this.faith=this.faithCap)}decreaseFaith(e){return this.faith-e>=0?(this.faith-=e,0):e-this.faith}getFaithCap(){return this.faithCap}getPrayers(){return this.prayers.filter(e=>(e.religion===yu.NONE||e.religion===this.religion)&&e.requiredFaithLevel<=this.faithLevel)}pray(e){e.cost<=this.faith?(this.faith-=e.cost,e.effect(this.servicesService),e.prayer===Ru.PREACH&&(this.prayers.find(e=>e.prayer===Ru.PREACH).cost+=10)):this.modalService.info("Not enough faith for this prayer!")}increaseFaithLevel(e){this.faithLevel+=e}increaseFaithShield(e){this.faithShield+=e}decreaseFaithShield(e){if(this.faithShield>=e)return this.faithShield-=e,0;{const n=e-this.faithShield;return this.faithShield=0,n}}getFaithLevel(){return this.faithLevel}getFaithShield(){return this.faithShield}getCurrentReligion(){return this.religion}getReligionSettings(e){return ao.getReligion(e)}changeReligion(e){this.modalService.open(Lu.CONFIRM),this.modalService.setModalText("Are you sure you want to change religion?");const n=this.modalService.registerForConfirmation().subscribe(t=>{if(n.unsubscribe(),t){const n=this.getReligionSettings(e);if(this.faith<n.FAITH)return void this.modalService.info("Not enough faith");const t=new Map;if(n.OFFERING.forEach(e=>t.set(e.resource,e.amount)),!this.resourcesService.hasResources(t,"Religion",1,!0))return void this.modalService.info("Not enough offering resources");this.faith-=n.FAITH,this.resourcesService.decreaseResources(t,"Religion",!0),this.religion=e}})}}return e.ngInjectableDef=de({factory:function(){return new e(Le(Mm),Le(Vm),Le(Bm),Le(Jm))},token:e,providedIn:"root"}),e})();class bO{constructor(e){this.religionService=e}ngOnInit(){}getPrayerName(){return Pu.preparePrayerName(this.prayer.prayer)}isAvailable(){return this.religionService.getFaith()>=this.prayer.cost}}var OO=Zt({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{display:inline-block;width:47%;padding:3px;margin:3px;text-align:center;border:1px solid #000}#wrapperNotAvailable[_ngcontent-%COMP%]{display:inline-block;width:47%;padding:3px;margin:3px;text-align:center;border:1px solid #646464}#titleGrey[_ngcontent-%COMP%]{display:inline-block;color:#646464}.notMet[_ngcontent-%COMP%]{color:var(--negative-colour)}.title[_ngcontent-%COMP%]{text-align:left}hr[_ngcontent-%COMP%]{border-color:#000}#progress[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background-color:var(--active-colour);z-index:1}#text[_ngcontent-%COMP%]{position:relative;z-index:2}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}"]],data:{}});function RO(e){return cs(0,[(e()(),Kr(0,0,null,null,9,"div",[["appTooltip",""],["class","tooltip"],["id","wrapper"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==Ql(e,1).onmousemove(t)&&l),l},null,null)),ci(1,16384,null,0,Op,[],{elementId:[0,"elementId"]},null),(e()(),Kr(2,0,null,null,1,"div",[["id","title"]],null,null,null,null,null)),(e()(),us(3,null,["",""])),(e()(),Kr(4,0,null,null,5,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),us(5,null,[" "," "])),(e()(),Kr(6,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),us(7,null,[" "," "])),(e()(),Kr(8,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(9,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){e(n,1,0,n.component.id),e(n,9,0,"faith","religion")},function(e,n){var t=n.component;e(n,3,0,t.getPrayerName()),e(n,4,0,Il(1,"",t.id,"")),e(n,5,0,t.prayer.description),e(n,7,0,t.prayer.cost)})}function TO(e){return cs(0,[(e()(),Kr(0,0,null,null,10,"div",[["appTooltip",""],["class","tooltip"],["id","wrapperNotAvailable"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==Ql(e,1).onmousemove(t)&&l),l},null,null)),ci(1,16384,null,0,Op,[],{elementId:[0,"elementId"]},null),(e()(),Kr(2,0,null,null,1,"div",[["id","titleGrey"]],null,null,null,null,null)),(e()(),us(3,null,["",""])),(e()(),Kr(4,0,null,null,6,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),us(5,null,[" "," "])),(e()(),Kr(6,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Kr(7,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),us(8,null,[" "," "])),(e()(),Kr(9,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(10,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){e(n,1,0,n.component.id),e(n,10,0,"faith","religion")},function(e,n){var t=n.component;e(n,3,0,t.getPrayerName()),e(n,4,0,Il(1,"",t.id,"")),e(n,5,0,t.prayer.description),e(n,8,0,t.prayer.cost)})}function CO(e){return cs(0,[(e()(),$r(16777216,null,null,1,null,RO)),ci(1,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,TO)),ci(3,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.isAvailable()),e(n,3,0,!t.isAvailable())},null)}class IO{constructor(e,n){this.religionService=e,this.resourcesService=n}ngOnInit(){}getFaith(){return this.religionService.getFaith()}getFaithCap(){return this.religionService.getFaithCap()}increaseFaith(e){this.religionService.increaseFaith(e)}isDev(){return!zu.production}getPrayers(){return this.religionService.getPrayers()}pray(e){this.religionService.pray(e)}getFaithShield(){return Pu.round(this.religionService.getFaithShield(),2)}getReligions(){return[yu.NONE,yu.FERTILITY,yu.NATURE,yu.TECHNOLOGY,yu.WAR]}getReligionName(e){return Pu.prepareReligionName(e)}getCurrentReligion(){return this.religionService.getCurrentReligion()}getCurrentReligionName(){return yu[this.getCurrentReligion()]}getCurrentReligionDisplayName(){return Pu.prepareReligionName(this.getCurrentReligion())}changeReligion(e){this.religionService.changeReligion(e)}getReligionSettings(e){return ao.getReligion(e)}getResourceString(e){return Su[e]}hasResource(e){return 0===this.resourcesService.hasResource(e.resource,e.amount,"Religion",!0)}}var yO=Zt({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:100%;margin:.5%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#table[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;border:1px solid #000;height:85%}.column[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:auto;border:1px solid #000}#prayers[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 70%;overflow-y:auto}#religions[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1 0 auto;overflow-y:auto}.prayer[_ngcontent-%COMP%]{display:inline}.tableTitle[_ngcontent-%COMP%]{border-bottom:1px solid #000;text-align:center}app-prayer[_ngcontent-%COMP%]{cursor:pointer}.faith[_ngcontent-%COMP%]{margin-right:-2px}.religion[_ngcontent-%COMP%]{border:1px solid #000;text-align:center;margin:3px;cursor:pointer}.active[_ngcontent-%COMP%]{background-color:var(--active-colour);cursor:auto}.tooltip[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:100px}.notMet[_ngcontent-%COMP%]{color:var(--negative-colour)}.inline[_ngcontent-%COMP%]{display:inline}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center}.icon2[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}"]],data:{}});function _O(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.increaseFaith(10)&&l),l},null,null)),(e()(),us(-1,null,["Increase faith"]))],null,null)}function AO(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"div",[["class","prayer"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"app-prayer",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.pray(e.context.$implicit)&&l),l},CO,OO)),ci(2,114688,null,0,bO,[vO],{prayer:[0,"prayer"],id:[1,"id"]},null)],function(e,n){e(n,2,0,n.context.$implicit,n.context.index)},null)}function wO(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"div",[["class","religion active"]],null,null,null,null,null)),(e()(),us(1,null,[" "," "]))],null,function(e,n){e(n,1,0,n.component.getReligionName(n.parent.context.$implicit))})}function NO(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"div",[["class","inline"]],null,null,null,null,null)),(e()(),us(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.getReligionSettings(n.parent.parent.context.$implicit).FAITH)})}function PO(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"div",[["class","inline notMet"]],null,null,null,null,null)),(e()(),us(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.getReligionSettings(n.parent.parent.context.$implicit).FAITH)})}function kO(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),us(-1,null,["offering:"]))],null,null)}function xO(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"div",[["class","inline"]],null,null,null,null,null)),(e()(),us(1,null,[""," "]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.amount)})}function MO(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"div",[["class","inline notMet"]],null,null,null,null,null)),(e()(),us(1,null,[""," "]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.amount)})}function DO(e){return cs(0,[(e()(),Kr(0,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),Kr(1,0,null,null,6,"div",[["class","icon2"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,xO)),ci(3,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,MO)),ci(5,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(6,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(7,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){var t=n.component;e(n,3,0,t.hasResource(n.context.$implicit)),e(n,5,0,!t.hasResource(n.context.$implicit)),e(n,7,0,t.getResourceString(n.context.$implicit.resource),"resources")},null)}function LO(e){return cs(0,[(e()(),Kr(0,0,null,null,16,"div",[["appTooltip",""],["class","religion tooltip"]],null,[[null,"click"],[null,"mousemove"]],function(e,n,t){var l=!0,i=e.component;return"mousemove"===n&&(l=!1!==Ql(e,1).onmousemove(t)&&l),"click"===n&&(l=!1!==i.changeReligion(e.parent.context.$implicit)&&l),l},null,null)),ci(1,16384,null,0,Op,[],{elementId:[0,"elementId"]},null),(e()(),us(2,null,[" "," "])),(e()(),Kr(3,0,null,null,13,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),us(4,null,[" "," "])),(e()(),Kr(5,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Kr(6,0,null,null,6,"div",[["class","icon2"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,NO)),ci(8,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,PO)),ci(10,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(11,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(12,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),$r(16777216,null,null,1,null,kO)),ci(14,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,DO)),ci(16,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,1,0,0-n.parent.context.$implicit),e(n,8,0,t.getFaith()>=t.getReligionSettings(n.parent.context.$implicit).FAITH),e(n,10,0,t.getFaith()<t.getReligionSettings(n.parent.context.$implicit).FAITH),e(n,12,0,"faith","religion"),e(n,14,0,t.getReligionSettings(n.parent.context.$implicit).OFFERING.length>0),e(n,16,0,t.getReligionSettings(n.parent.context.$implicit).OFFERING)},function(e,n){var t=n.component;e(n,2,0,t.getReligionName(n.parent.context.$implicit)),e(n,3,0,Il(1,"",0-n.parent.context.$implicit,"")),e(n,4,0,t.getReligionName(n.parent.context.$implicit))})}function FO(e){return cs(0,[(e()(),Kr(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,wO)),ci(2,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,LO)),ci(4,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,n.context.$implicit===t.getCurrentReligion()),e(n,4,0,n.context.$implicit!==t.getCurrentReligion())},null)}function HO(e){return cs(0,[(e()(),Kr(0,0,null,null,32,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),Kr(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["Religion"])),(e()(),Kr(4,0,null,null,9,"div",[],null,null,null,null,null)),(e()(),Kr(5,0,null,null,1,null,null,null,null,null,null,null)),(e()(),us(-1,null,["Faith"])),(e()(),Kr(7,0,null,null,1,"app-icon",[["class","faith"]],null,null,null,Cp,Tp)),ci(8,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Kr(9,0,null,null,1,null,null,null,null,null,null,null)),(e()(),us(-1,null,[":"])),(e()(),us(11,null,[" ","/"," "])),(e()(),$r(16777216,null,null,1,null,_O)),ci(13,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(14,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),us(-1,null,[" Faith shield "])),(e()(),Kr(16,0,null,null,1,"app-icon",[["class","prayer"]],null,null,null,Cp,Tp)),ci(17,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),us(18,null,[" : "," "])),(e()(),Kr(19,0,null,null,13,"div",[["id","table"]],null,null,null,null,null)),(e()(),Kr(20,0,null,null,7,"div",[["class","column"],["id","prayers"]],null,null,null,null,null)),(e()(),Kr(21,0,null,null,3,"span",[["class","tableTitle"]],null,null,null,null,null)),(e()(),us(-1,null,[" Prayers "])),(e()(),Kr(23,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(24,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),Kr(25,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,AO)),ci(27,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),(e()(),Kr(28,0,null,null,4,"div",[["class","column"],["id","religions"]],null,null,null,null,null)),(e()(),Kr(29,0,null,null,1,"span",[["class","tableTitle"]],null,null,null,null,null)),(e()(),us(-1,null,["Religions"])),(e()(),$r(16777216,null,null,1,null,FO)),ci(32,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,8,0,"faith","religion"),e(n,13,0,t.isDev()),e(n,17,0,"faith_shield","religion","Faith shield"),e(n,24,0,t.getCurrentReligionName(),"religion",t.getCurrentReligionDisplayName()),e(n,27,0,t.getPrayers()),e(n,32,0,t.getReligions())},function(e,n){var t=n.component;e(n,11,0,t.getFaith(),t.getFaithCap()),e(n,18,0,t.getFaithShield())})}function UO(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"app-religion",[],null,null,null,HO,yO)),ci(1,114688,null,0,IO,[vO,Jm],null,null)],function(e,n){e(n,1,0)},null)}var GO=Gl("app-religion",IO,UO,{},{},[]);const BO=(()=>{class e{constructor(e,n,t){this.servicesService=e,this.calendarService=n,this.optionsService=t,this.forecastPeriod=1,this.forecast=[],e.addService(xu.WEATHER,this),this.tick(0)}load(e){this.forecastPeriod=void 0!==e.forecastPeriod?e.forecastPeriod:1,this.forecast=e.forecast}save(){return{forecastPeriod:this.forecastPeriod,forecast:this.forecast}}reset(e,n){this.forecastPeriod=1,this.forecast=[],this.today=null,this.tick(0)}tick(e){const n=this.calendarService.getAbsoluteDay();for(;this.forecast.length>0&&this.forecast[0][0]<n;)this.forecast.shift();for(;this.forecast.length<this.forecastPeriod;){let e=n;0!==this.forecast.length&&(e=this.forecast[this.forecast.length-1][0]+1),this.forecast.push(this.predictDay(e))}this.today=this.forecast[0]}predictDay(e){let n,t;switch(this.calendarService.getSeasonForAbsoluteDay(e)){case Hm.SPRING:n=Fu.randomBetween(10,25),t=Fu.randomElement([{item:Gu.SUN,chance:40},{item:Gu.CLOUDS,chance:25},{item:Gu.WIND,chance:14},{item:Gu.RAIN,chance:20},{item:Gu.STORM,chance:1}]);break;case Hm.SUMMER:n=Fu.randomBetween(15,35),t=Fu.randomElement([{item:Gu.SUN,chance:50},{item:Gu.CLOUDS,chance:10},{item:Gu.WIND,chance:10},{item:Gu.RAIN,chance:20},{item:Gu.STORM,chance:10}]);break;case Hm.AUTUMN:n=Fu.randomBetween(10,25),t=Fu.randomElement([{item:Gu.SUN,chance:20},{item:Gu.CLOUDS,chance:40},{item:Gu.WIND,chance:10},{item:Gu.RAIN,chance:25},{item:Gu.STORM,chance:5}]);break;case Hm.WINTER:n=Fu.randomBetween(-20,5),t=Fu.randomElement([{item:Gu.SUN,chance:30},{item:Gu.CLOUDS,chance:20},{item:Gu.WIND,chance:15},{item:Gu.SNOW,chance:25},{item:Gu.STORM,chance:10}])}return[e,t,n]}getCurrentWeather(){return this.today[1]}getCurrentTemperature(){return this.optionsService.getOption(Dm.METRIC)?this.today[2]:1.8*this.today[2]+32}increaseForecastPeriod(e){this.forecastPeriod+=e}isWeather(...e){return e.includes(this.getCurrentWeather())}getForecast(){return this.forecast}getForecastPeriod(){return this.forecastPeriod}}return e.ngInjectableDef=de({factory:function(){return new e(Le(Mm),Le(Gm),Le(Lm))},token:e,providedIn:"root"}),e})();class WO{constructor(e,n){this.weatherService=e,this.optionsService=n,this.metric=this.optionsService.getOption(Dm.METRIC),this.optionsSubscription||(this.optionsSubscription=this.optionsService.registerForOptionsChange().subscribe(()=>this.metric=this.optionsService.getOption(Dm.METRIC)))}ngOnInit(){}getTodayWeather(){return this.weatherService.getCurrentWeather()}getTodayTemperature(){return this.weatherService.getCurrentTemperature()}getWeatherName(e){return Gu[e].toLowerCase()}getForecast(){return this.weatherService.getForecast()}getForecastPeriod(){return this.weatherService.getForecastPeriod()}calculateTemp(e){return this.optionsService.getOption(Dm.METRIC)?e:1.8*e+32}}var VO=Zt({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{margin:.5%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#forecast[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;border:1px solid #000;text-align:center;overflow-x:auto}.weather[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 0 40px;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;border-right:1px solid #000}.day[_ngcontent-%COMP%]{width:60px;border-bottom:1px solid #000}"]],data:{}});function zO(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["\xb0C"]))],null,null)}function YO(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["\xb0F"]))],null,null)}function $O(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[["class","day"]],null,null,null,null,null)),(e()(),us(-1,null,["today"]))],null,null)}function KO(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[["class","day"]],null,null,null,null,null)),(e()(),us(1,null,["+",""]))],null,function(e,n){e(n,1,0,n.parent.context.index)})}function jO(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["\xb0C"]))],null,null)}function qO(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["\xb0F"]))],null,null)}function XO(e){return cs(0,[(e()(),Kr(0,0,null,null,13,"div",[["class","weather"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,$O)),ci(2,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,KO)),ci(4,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(5,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(6,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Kr(7,0,null,null,6,"span",[["id","temp"]],null,null,null,null,null)),(e()(),us(8,null,["",""])),is(9,2),(e()(),$r(16777216,null,null,1,null,jO)),ci(11,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,qO)),ci(13,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,0===n.context.index),e(n,4,0,0!==n.context.index),e(n,6,0,t.getWeatherName(n.context.$implicit[1]),"weather"),e(n,11,0,t.metric),e(n,13,0,!t.metric)},function(e,n){var t=n.component,l=qt(n,8,0,e(n,9,0,Ql(n.parent.parent,0),t.calculateTemp(n.context.$implicit[2]),"0.0-1"));e(n,8,0,l)})}function QO(e){return cs(0,[(e()(),Kr(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),us(-1,null,["Weather forecast: "])),(e()(),Kr(2,0,null,null,2,"div",[["id","forecast"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,XO)),ci(4,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,4,0,n.component.getForecast())},null)}function ZO(e){return cs(0,[hi(0,sa,[$i]),(e()(),Kr(1,0,null,null,15,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Kr(2,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),Kr(3,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["Weather"])),(e()(),us(5,null,[" Weather: "," "])),(e()(),Kr(6,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(7,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Kr(8,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),us(9,null,[" Temperature: ",""])),is(10,2),(e()(),$r(16777216,null,null,1,null,zO)),ci(12,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,YO)),ci(14,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,QO)),ci(16,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,7,0,t.getWeatherName(t.getTodayWeather()),"weather"),e(n,12,0,t.metric),e(n,14,0,!t.metric),e(n,16,0,t.getForecastPeriod()>1)},function(e,n){var t=n.component;e(n,5,0,t.getWeatherName(t.getTodayWeather()));var l=qt(n,9,0,e(n,10,0,Ql(n,0),t.getTodayTemperature(),"0.0-1"));e(n,9,0,l)})}function JO(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"app-weather",[],null,null,null,ZO,VO)),ci(1,114688,null,0,WO,[BO,Lm],null,null)],function(e,n){e(n,1,0)},null)}var eR=Gl("app-weather",WO,JO,{},{},[]);class nR{constructor(e){this.optionsService=e,this.progress=0,this.text=""}set progressReInput(e){this.progressRef=e,this.ngOnChanges()}set labelRefInput(e){this.labelRef=e,this.ngOnChanges()}set label2RefInput(e){this.label2Ref=e,this.ngOnChanges()}ngOnInit(){}ngOnChanges(){this.progressBarsEnabled()?(this.progressRef&&(this.progressRef.nativeElement.style.width=this.progress+"%"),this.labelRef&&(this.labelRef.nativeElement.innerHTML=this.text&&""!==this.text?this.text:this.progress.toFixed(2)+"%")):this.label2Ref&&(this.label2Ref.nativeElement.innerHTML=this.text,this.label2Ref.nativeElement.innerHTML=this.progress.toFixed(2)+"%")}progressBarsEnabled(){return this.optionsService.getOption(Dm.VISUAL_PROGRESS_BARS)}}var tR=Zt({encapsulation:0,styles:[["#progressBar[_ngcontent-%COMP%]{position:relative;width:95%;height:100%;display:inline-block;text-align:center;background-color:#ddd;border:1px solid #000;margin-top:-1px}#progressBar2[_ngcontent-%COMP%]{position:relative;width:95%;height:100%;display:inline-block;text-align:center;margin-top:-1px}#progress[_ngcontent-%COMP%]{height:100%;background-color:var(--active-colour);text-align:center;color:#fff}#label[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;width:100%;font-size:1.2em;text-align:center}#label2[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;width:100%;font-size:1.2em;text-align:center;font-weight:700}"]],data:{}});function lR(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"div",[["id","progressBar"]],null,null,null,null,null)),(e()(),Kr(1,0,[[1,0],["progress",1]],null,0,"div",[["id","progress"]],null,null,null,null,null)),(e()(),Kr(2,0,[[2,0],["label",1]],null,0,"div",[["id","label"]],null,null,null,null,null))],null,null)}function iR(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"div",[["id","progressBar2"]],null,null,null,null,null)),(e()(),Kr(1,0,[[3,0],["label2",1]],null,0,"div",[["id","label2"]],null,null,null,null,null))],null,null)}function rR(e){return cs(0,[Zr(671088640,1,{progressReInput:0}),Zr(671088640,2,{labelRefInput:0}),Zr(671088640,3,{label2RefInput:0}),(e()(),$r(16777216,null,null,1,null,lR)),ci(4,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,iR)),ci(6,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,4,0,t.progressBarsEnabled()),e(n,6,0,!t.progressBarsEnabled())},null)}class sR{constructor(e,n,t,l,i,r,s){this.data={},this.id=e,this.name=n,this.diplomacy=t,this.colour=l,this.focus=i,this.regions=r,this.data=s}getDiplomacy(){return this.diplomacy<-25?"hostile":this.diplomacy>=-25&&this.diplomacy<25?"neutral":this.diplomacy>=25?"friendly":void 0}decreaseDiplomacy(e){this.diplomacy-=e,this.diplomacy<-100&&(this.diplomacy=-100)}increaseDiplomacy(e){this.diplomacy+=e,this.diplomacy>100&&(this.diplomacy=100)}}class uR{constructor(e,n,t,l,i,r,s,u,o,a,c,h,d,g=0){this.id=e,this.path=n,this.center=t,this.neighbours=l,this.land=i,this.forest=r,this.mountains=s,this.wealth=u,this.economy=o,this.defense=a,this.target=c,this.spy=h,this.army=d,this.lastAttack=g}getSize(){return this.land+this.forest+this.mountains}}class oR{constructor(e,n){this.id=e,this.neighbours=n}}class aR{constructor(e){this.path=e}reversePath(){this.path=this.path.reverse()}}var cR=function(e){return e[e.NONE=0]="NONE",e[e.PEACE=1]="PEACE",e[e.SAVE_WEALTH=2]="SAVE_WEALTH",e[e.ECONOMY_BUILD=3]="ECONOMY_BUILD",e[e.ECONOMY_COLONIZE=4]="ECONOMY_COLONIZE",e[e.DEFENSE_WALL=5]="DEFENSE_WALL",e[e.DEFENSE_ARCHER=6]="DEFENSE_ARCHER",e[e.DEFENSE_GATHER_FORCES=7]="DEFENSE_GATHER_FORCES",e[e.OFFENSE_MILITIA=8]="OFFENSE_MILITIA",e[e.OFFENSE_SPEARMAN=9]="OFFENSE_SPEARMAN",e[e.OFFENSE_SWORDSMAN=10]="OFFENSE_SWORDSMAN",e[e.OFFENSE_LIGHT_CAVALRY=11]="OFFENSE_LIGHT_CAVALRY",e[e.OFFENSE_GATHER_FORCES=12]="OFFENSE_GATHER_FORCES",e[e.OFFENSE_COLONIZE=13]="OFFENSE_COLONIZE",e[e.OFFENSE_PLUNDER=14]="OFFENSE_PLUNDER",e[e.OFFENSE_CONQUER=15]="OFFENSE_CONQUER",e}({});class hR{constructor(e,n,t,l,i,r,s,u,o,a){this.routePaths=[],this.servicesService=e,this.mission=t,this.settings=ro.getMission(t),this.missionTime=this.settings.TIME,this.description=this.settings.DESCRIPTION,this.icon=this.settings.ICON,this.id=n,this.targetIndex=l,this.route=i,this.progress=r,this.status=s,this.ownerCountry=u,this.army=o,this.data=a,e&&(this.armyService=e.getService(xu.ARMY),this.logService=e.getService(xu.LOG),this.worldService=e.getService(xu.WORLD),this.gameService=e.getService(xu.GAME)),this.initRoutePaths(),"{mission}"===this.status?(this.origin=this.routePaths[this.routePaths.length-1].target,this.target=this.routePaths[this.routePaths.length-1].target):(this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target)}toJSON(){const e=[];return this.army.units.forEach(n=>e.push({troop:n.troop,size:n.size})),{type:this.mission,id:this.id,ownerCountryId:this.ownerCountry.id,army:e,route:this.route.path,progress:this.progress,targetIndex:this.targetIndex,status:this.status,data:this.data}}getMissionName(){return Pu.prepareMissionName(this.mission)}initRoutePaths(){this.routePaths=[];for(let e=0;e<this.route.path.length-1;e++){const n=this.worldService.getRegion(this.route.path[e]),t=this.worldService.getRegion(this.route.path[e+1]);this.routePaths.push({origin:{x:n.center.X,y:n.center.Y},target:{x:t.center.X,y:t.center.Y}})}}getTargetRegionId(){return this.route.path[this.targetIndex]}getOriginRegionId(){return this.route.path[this.targetIndex-1]}getOrigin(){return this.origin}getTarget(){return this.target}getDestinationTargetRegion(){return this.worldService.getRegion(this.route.path[this.route.path.length-1])}tick(){let e=1;this.ownerCountry.id===wu.PLAYER&&this.gameService.isEnabled(bu.LOGISTICS)&&(e*=1.1),"traveling"===this.status?this.progress<100?this.progress+=e:(this.targetIndex===this.route.path.length-1?(this.origin=this.target,this.isInstant()?this.calculateMission()?(this.status="returning",this.route.reversePath(),this.targetIndex=1,this.initRoutePaths(),this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target):this.status="finished":this.status="{mission}"):(this.targetIndex+=1,this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target),this.progress=0):"{mission}"===this.status?this.progress<100?this.progress+=1/this.missionTime:(this.calculateMission()?(this.status="returning",this.route.reversePath(),this.targetIndex=1,this.initRoutePaths(),this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target):(this.worldService.clearMission(),this.status="finished"),this.progress=0):"returning"===this.status&&(this.progress<100?this.progress+=e:this.targetIndex===this.route.path.length-1?(this.finish(),this.worldService.clearMission(),this.status="finished"):(this.targetIndex+=1,this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target,this.progress=0))}getDisplayProgress(){return"{mission}"===this.status?this.progress:(100*(this.targetIndex-1)+this.progress)/(this.route.path.length-1)}getProgressPercentage(){return this.progress/100}isFinished(){return"finished"===this.status}getStatus(){return this.status.replace("{mission}",Pu.prepareMissionName(this.mission))}}class dR extends hR{constructor(e,n,t,l,i,r=0,s=1,u="traveling",o=null){super(e,n,Tu.COLONIZE,s,i,r,u,t,l,o),e&&(this.landService=e.getService(xu.LAND))}isInstant(){return!1}calculateMission(){return Fu.chance(5*this.army.getUnit(_u.COLONIST).size/100)?(this.worldService.ownRegion(this.getTargetRegionId(),this.ownerCountry),this.army=new Ub([]),this.ownerCountry.id===wu.PLAYER&&this.logService.success("We colonized new region!")):this.ownerCountry.id===wu.PLAYER&&this.logService.warning("Our colonists lost against the harsh conditions and died during attempt to colonize new region"),!1}finish(){}}class gR extends hR{constructor(e,n,t,l,i,r=0,s=1,u="traveling",o=null){super(e,n,Tu.CONQUER,s,i,r,u,t,l,o),e&&(this.landService=e.getService(xu.LAND))}isInstant(){return!1}calculateMission(){if(this.ownerCountry.id===wu.PLAYER){const e=this.worldService.getRegion(this.getTargetRegionId()),n=this.worldService.getCountryByRegionId(e.id);if(n.id!==this.ownerCountry.id){const t=this.armyService.calculateAttack(this.army,e.army,e.defense,!0,!1);return t.attacker=this.ownerCountry.id,t.defender=n.id,t.result?(t.message="Region conquered",this.logService.fightReport(t),this.armyService.loot(50*e.wealth+200*e.economy),n.diplomacy<25?n.decreaseDiplomacy(30):n.diplomacy=-50,this.worldService.ownRegion(this.getTargetRegionId(),this.ownerCountry),this.getDestinationTargetRegion().army.addArmy(this.army),this.army=new Ub([]),!1):(t.message="Our army has been defeated",this.logService.fightReport(t),n.diplomacy<25?n.decreaseDiplomacy(15):n.diplomacy=30,!1)}return!0}{const e=this.worldService.getRegion(this.getTargetRegionId()),n=this.worldService.getCountryByRegionId(e.id);if(n.id!==this.ownerCountry.id){const t=this.armyService.calculateAttack(this.army,e.army,e.defense,!1,n.id===wu.PLAYER);return t.attacker=this.ownerCountry.id,t.defender=n.id,t.result?0!==e.id?(n.id===wu.PLAYER&&(this.reduceLand(e),t.message="Our region has been conquered by enemy!",this.logService.fightReport(t)),this.worldService.ownRegion(this.getTargetRegionId(),this.ownerCountry),this.getDestinationTargetRegion().army.addArmy(this.army),this.army=new Ub([]),!1):(this.data=this.armyService.lootPlayer(50*this.army.getArmySize()),t.message="Our capital has been plundered!",this.logService.fightReport(t),!0):(n.id===wu.PLAYER&&(t.message="We have defeated enemy conquer party!",this.logService.fightReport(t)),e.target=cR.DEFENSE_ARCHER,!1)}return!0}}finish(){const e=this.getDestinationTargetRegion();e.army.addArmy(this.army),e.wealth+=this.data}reduceLand(e){let n=e.land+e.forest+e.mountains,t=0,l=0,i=0;if(this.landService.getLand()>=e.land?(n-=e.land,t+=e.land,this.landService.removeLand(e.land)):(n-=this.landService.getLand(),t+=this.landService.getLand(),this.landService.removeLand(this.landService.getLand())),this.landService.getForest()>=e.forest?(n-=e.forest,l+=e.forest,this.landService.removeForest(e.forest)):(n-=this.landService.getForest(),l+=this.landService.getForest(),this.landService.removeForest(this.landService.getForest())),this.landService.getMountains()>=e.mountains?(n-=e.mountains,i+=e.mountains,this.landService.removeMountains(e.mountains)):(n-=this.landService.getMountains(),i+=this.landService.getMountains(),this.landService.removeMountains(this.landService.getMountains())),n>0){if(this.landService.getForest()>0){if(this.landService.getForest()>n)return this.landService.removeForest(n),void this.setLands(e,t,l+=n,i);n-=this.landService.getForest(),l+=this.landService.getForest(),this.landService.removeForest(this.landService.getForest())}if(this.landService.getLand()>0){if(this.landService.getLand()>n)return this.landService.removeLand(n),void this.setLands(e,t+=n,l,i);n-=this.landService.getLand(),t+=this.landService.getLand(),this.landService.removeLand(this.landService.getLand())}if(this.landService.getMountains()>0){if(this.landService.getMountains()>n)return this.landService.removeMountains(n),void this.setLands(e,t,l,i+=n);n-=this.landService.getMountains(),i+=this.landService.getMountains(),this.landService.removeMountains(this.landService.getMountains())}}this.setLands(e,t,l,i)}setLands(e,n,t,l){e.land=n,e.forest=t,e.mountains=l}}class pR extends hR{constructor(e,n,t,l,i,r=0,s=1,u="traveling",o=null){super(e,n,Tu.MOVE,s,i,r,u,t,l,o)}isInstant(){return!0}calculateMission(){const e=this.getDestinationTargetRegion();return this.worldService.getCountryByRegionId(e.id).id!==wu.PLAYER||(e.army.addArmy(this.army),this.army=new Ub([]),!1)}finish(){this.getDestinationTargetRegion().army.addArmy(this.army),this.army=new Ub([])}}class mR extends hR{constructor(e,n,t,l,i,r=0,s=1,u="traveling",o=null){super(e,n,Tu.PLUNDER,s,i,r,u,t,l,o)}isInstant(){return!1}calculateMission(){if(this.ownerCountry.id===wu.PLAYER){const e=this.worldService.getRegion(this.getTargetRegionId()),n=this.worldService.getCountryByRegionId(e.id);if(n.id!==this.ownerCountry.id){const t=this.armyService.calculateAttack(this.army,e.army,e.defense,!0,!1);return t.attacker=this.ownerCountry.id,t.defender=n.id,t.result?(n.decreaseDiplomacy(n.diplomacy<25?10:30),this.data=e.wealth,e.wealth=0,t.message="Region plundered",this.logService.fightReport(t),e.target=cR.DEFENSE_ARCHER,!0):(t.message="Our army has been defeated",this.logService.fightReport(t),n.decreaseDiplomacy(n.diplomacy<25?5:15),e.target=cR.DEFENSE_ARCHER,!1)}return!0}{const e=this.worldService.getRegion(this.getTargetRegionId()),n=this.worldService.getCountryByRegionId(e.id);if(n.id!==this.ownerCountry.id){const t=this.armyService.calculateAttack(this.army,e.army,e.defense,!1,n.id===wu.PLAYER);return t.attacker=this.ownerCountry.id,t.defender=n.id,t.result?n.id===wu.PLAYER?(this.data=this.armyService.lootPlayer(50*this.army.getArmySize()),t.message="We have been been plundered!",this.logService.fightReport(t),!0):(this.data=e.wealth,this.data>Math.floor(this.army.getArmySize()/2)?(this.data=Math.floor(this.army.getArmySize()/2),e.wealth-=this.data):e.wealth=0,e.target=cR.DEFENSE_ARCHER,!0):(n.id===wu.PLAYER&&(t.message="We have defeated enemy plunder party!",this.logService.fightReport(t)),!1)}return!0}}finish(){if(this.ownerCountry.id===wu.PLAYER)this.getDestinationTargetRegion().army.addArmy(this.army),this.army=new Ub([]),this.armyService.loot(50*this.data);else{const e=this.getDestinationTargetRegion();e.army.addArmy(this.army),e.wealth+=this.data}}}class fR extends hR{constructor(e,n,t,l,i,r=0,s=1,u="traveling",o=null){super(e,n,Tu.SPY,s,i,r,u,t,l,o)}isInstant(){return!1}calculateMission(){const e=this.getDestinationTargetRegion(),n=this.worldService.getCountryByRegionId(e.id);if(e&&this.army.getUnit(_u.SPY)){if(n.id===wu.PLAYER)return!0;e.spy+=this.army.getUnit(_u.SPY).size,this.army=new Ub([])}return!1}finish(){this.getDestinationTargetRegion().army.addArmy(this.army),this.army=new Ub([])}}class SR extends hR{constructor(e,n,t,l,i,r=0,s=1,u="{mission}",o=null){super(e,n,Tu.BUILD,s,i,r,u,t,l,o)}isInstant(){return!1}calculateMission(){return!0}finish(){this.getDestinationTargetRegion().defense+=1}}const ER=(()=>{class e{constructor(e){this.servicesService=e,e.addService(xu.MISSION_FACTORY,this)}loadMission(e){const n=this.servicesService.getService(xu.WORLD),t=new Ub([]);e.army.forEach(e=>{t.addTroop(e.troop,e.size)});const l=new aR(e.route);switch(e.type){case Tu.COLONIZE:return new dR(this.servicesService,e.id,n.getCountry(e.ownerCountryId),t,l,e.progress,e.targetIndex,e.status,e.data);case Tu.CONQUER:return new gR(this.servicesService,e.id,n.getCountry(e.ownerCountryId),t,l,e.progress,e.targetIndex,e.status,e.data);case Tu.MOVE:return new pR(this.servicesService,e.id,n.getCountry(e.ownerCountryId),t,l,e.progress,e.targetIndex,e.status,e.data);case Tu.PLUNDER:return new mR(this.servicesService,e.id,n.getCountry(e.ownerCountryId),t,l,e.progress,e.targetIndex,e.status,e.data);case Tu.SPY:return new fR(this.servicesService,e.id,n.getCountry(e.ownerCountryId),t,l,e.progress,e.targetIndex,e.status,e.data);case Tu.BUILD:return new SR(this.servicesService,e.id,n.getCountry(e.ownerCountryId),t,l,e.progress,e.targetIndex,e.status,e.data)}}}return e.ngInjectableDef=de({factory:function(){return new e(Le(Mm))},token:e,providedIn:"root"}),e})(),vR=(()=>{class e{constructor(e,n,t,l,i,r,s,u){this.servicesService=e,this.idService=n,this.armyService=t,this.logService=l,this.calendarService=i,this.modalService=r,this.missionFactoryService=s,this.landService=u,this.countries=[],this.regionsNeighbours=[],this.missions=[],this.regions=[],this.defaultOrigin=0,this.x=150,this.y=-220,this.zoom=1.4,this.activeCountriesList=[],this.pathCacheSubject=new _,this.servicesService.addService(xu.WORLD,this),this.init(),this.selectedCountry=this.countries[0],this.selectedRegion=this.selectedCountry.regions[0]}init(e=!0){ho.REGIONS.forEach(e=>{const n=[];e.TROOPS.forEach(e=>n.push(new Hb(e.troop,e.size))),this.regions.push(new uR(e.ID,e.PATH,e.CENTER,e.NEIGHBOURS,e.LAND,e.FOREST,e.MOUNTAINS,e.WEALTH,0,0,null,0,new Ub(n)))}),this.regions[0].army=this.armyService.getArmy(),Object.values(ho.COUNTRIES).forEach(n=>{const t=[];n.REGIONS.forEach(l=>{const i=this.regions[l];n.CAPITAL===l&&(i.capital=n.COUNTRY),t.push(i),e&&n.COUNTRY!==wu.PLAYER&&n.COUNTRY!==wu.NEUTRAL&&this.regions[l].army.addTroop(_u.ARCHER,2)}),this.countries.push(new sR(n.COUNTRY,n.NAME,n.DIPLOMACY,n.COLOUR,n.FOCUS,t,{}))}),this.regionsNeighbours=[],Object.values(ho.REGIONS).forEach(e=>{this.regionsNeighbours.push(new oR(e.ID,e.NEIGHBOURS))}),this.calendarService.registerForDayChange().subscribe(e=>{this.countries.filter(e=>e.id!==wu.PLAYER&&e.id!==wu.NEUTRAL).forEach(e=>{e.regions.forEach(n=>{Fu.chance((n.economy+5)/100)&&(n.wealth+=1),this.AI_dailyRegionAction(e,n)})})}),this.calendarService.registerForYearChange().subscribe(e=>{this.countries.filter(e=>e.id!==wu.PLAYER&&e.id!==wu.NEUTRAL).forEach(e=>{Fu.chance(ho.KING_DEATH_CHANCE)&&(e.focus=Fu.randomElement([{item:Au.OFFENSE,chance:25},{item:Au.DEFENSE,chance:25},{item:Au.PEACE,chance:25},{item:Au.ECONOMY,chance:25}]),this.logService.warning(e.name+" king died. New king is known to focus on "+Pu.prepareFocusName(e.focus)))})}),this.selectedRegion=this.regions[0],this.selectedCountry=this.getPlayerCountry()}AI_dailyRegionAction(e,n){null===n.target?this.AI_chooseTarget(n,e):this.AI_executeTarget(n,e),n.spy>0&&Fu.chance(n.army.getArmySize()/2e4)&&(n.spy-=1,this.logService.warning("Our "+e.name+" spy has been discovered and killed!"),e.decreaseDiplomacy(e.diplomacy<25?5:15))}AI_chooseTarget(e,n){const t=[{item:Au.OFFENSE,chance:10},{item:Au.DEFENSE,chance:10},{item:Au.PEACE,chance:10},{item:Au.ECONOMY,chance:10}],l=t.find(e=>e.item===n.focus);l&&(l.chance=70);const i=Fu.randomElement(t);let r=cR.NONE;switch(i){case Au.ECONOMY:const n=[];let t=70-8*e.economy;t<5&&(t=5),this.getNeutralRegionsNumber()>0&&n.push({item:cR.ECONOMY_COLONIZE,chance:10}),n.push({item:cR.ECONOMY_BUILD,chance:t}),r=Fu.randomElement(n);break;case Au.DEFENSE:const l=[];e.army.getArmySize()<5*e.wealth&&l.push({item:cR.DEFENSE_ARCHER,chance:50});let s=30-4*e.defense;s<5&&(s=5),l.push({item:cR.DEFENSE_WALL,chance:s}),r=Fu.randomElement(l);break;case Au.PEACE:e.target=cR.PEACE;break;case Au.OFFENSE:const u=[{item:cR.OFFENSE_PLUNDER,chance:5},{item:cR.OFFENSE_CONQUER,chance:2}];e.army.getArmySize()<5*e.wealth&&u.push({item:cR.OFFENSE_MILITIA,chance:30},{item:cR.OFFENSE_SPEARMAN,chance:20},{item:cR.OFFENSE_SWORDSMAN,chance:15},{item:cR.OFFENSE_LIGHT_CAVALRY,chance:10}),this.getNeutralRegionsNumber()>0&&u.push({item:cR.OFFENSE_COLONIZE,chance:10}),r=Fu.randomElement(u)}e.target=r||cR.NONE}AI_executeTarget(e,n){switch(e.target){case cR.NONE:e.target=null;break;case cR.PEACE:Fu.chance(.1)&&(e.target=null);break;case cR.SAVE_WEALTH:e.wealth>=5*(e.economy+1)&&(e.target=null);break;case cR.ECONOMY_BUILD:e.wealth>=10*(e.economy+1)&&(e.wealth-=10*(e.economy+1),e.economy+=1,e.target=null);break;case cR.ECONOMY_COLONIZE:if(e.economy>=2){const t=this.findNeighbouringColonizableRegions(e,n);t.length?e.wealth>=40&&(this.missions.push(new dR(this.servicesService,this.idService.getNextId(),n,new Ub([new Hb(_u.COLONIST,15)]),this.findPath(e.id,t[0],n.id))),e.wealth-=40,e.target=null):e.target=null}else e.target=null;break;case cR.DEFENSE_WALL:if(e.economy<=e.defense||e.defense>=7){e.target=null;break}e.wealth>=20*(e.defense+1)&&(e.wealth-=20*(e.defense+1),e.defense+=1,e.target=null);break;case cR.DEFENSE_ARCHER:this.AI_hireTroop(e,_u.ARCHER);break;case cR.OFFENSE_MILITIA:this.AI_hireTroop(e,_u.MILITIA);break;case cR.OFFENSE_SPEARMAN:this.AI_hireTroop(e,_u.SPEARMAN);break;case cR.OFFENSE_SWORDSMAN:this.AI_hireTroop(e,_u.SWORDSMAN);break;case cR.OFFENSE_LIGHT_CAVALRY:this.AI_hireTroop(e,_u.LIGHT_CAVALRY);break;case cR.OFFENSE_COLONIZE:if(e.army.getArmyPower(!0)>=20){const t=this.findNeighbouringColonizableRegions(e,n);t.length?e.wealth>=20&&(this.missions.push(new dR(this.servicesService,this.idService.getNextId(),n,new Ub([new Hb(_u.COLONIST,15)]),this.findPath(e.id,t[0],n.id))),e.wealth-=20,e.target=null):e.target=null}else e.target=null;break;case cR.OFFENSE_PLUNDER:if(e.army.getArmyPower(!0)>20){const t=this.findNeighbouringAttackableRegions(e,n);t.length>0?(this.missions.push(new mR(this.servicesService,this.idService.getNextId(),n,e.army,this.findPath(e.id,t[0],n.id))),this.getRegion(t[0]).lastAttack=this.calendarService.getAbsoluteDay(),this.getCountryByRegionId(t[0]).id===wu.PLAYER&&this.logService.warning("Incoming invasion!"),e.army=new Ub([])):e.target=null}else e.target=null;break;case cR.OFFENSE_CONQUER:if(e.army.getArmyPower(!0)>20){const t=this.findNeighbouringAttackableRegions(e,n).filter(e=>0!==e).filter(n=>this.getRegion(n).army.getArmyPower(!1)<1.5*e.army.getArmyPower(!0));t.length>0?(this.missions.push(new gR(this.servicesService,this.idService.getNextId(),n,e.army,this.findPath(e.id,t[0],n.id))),this.getRegion(t[0]).lastAttack=this.calendarService.getAbsoluteDay(),this.getCountryByRegionId(t[0]).id===wu.PLAYER&&this.logService.warning("Incoming invasion!"),e.army=new Ub([])):e.target=null}else e.target=null;e.target=null}}AI_hireTroop(e,n){const t=ro.getTroop(n).AI_COST;e.wealth>=t&&(e.wealth-=t,e.army.addTroop(n,1),e.target=null)}load(e){e.regions||e.countries?(e.regions.forEach(e=>{const n=this.regions[e.id];n.wealth=e.wealth,n.economy=e.economy,n.defense=e.defense,n.target=e.target,n.land=e.land,n.forest=e.forest,n.mountains=e.mountains,n.spy=e.spy,n.lastAttack=void 0!==e.lastAttack?e.lastAttack:0,n.army=new Ub([]),e.army.forEach(e=>{n.army.addTroop(e.troop,e.size)})}),this.selectedCountry=null===this.selectedCountry?null:this.getCountry(this.selectedCountry.id),e.countries.forEach(e=>{const n=this.getCountry(e.id);n.diplomacy=e.diplomacy,n.focus=e.country,n.regions=[],e.regions.forEach(e=>{n.regions.push(this.regions[e])}),n.data=e.data}),this.missions=[],e.missions.forEach(e=>{this.missions.push(this.missionFactoryService.loadMission(JSON.parse(e)))}),this.defaultOrigin=e.defaultOrigin,this.getPlayerCountry().name=e.playerNationName,this.x=e.x,this.y=e.y,this.zoom=e.zoom,this.regions[0].army=this.armyService.getArmy()):this.reset(!1,!1)}reset(e,n){const t=this.getPlayerCountry().name,l=[];e||n||this.countries.forEach(e=>{l.push([e.id,e.regions.map(e=>e.id)])}),this.countries=[],this.regionsNeighbours=[],this.missions=[],this.regions=[],this.defaultOrigin=0,this.selectedRegion=null,this.selectedCountry=null,this.selectedMission=null,this.x=150,this.y=-220,this.zoom=1.4,this.init(!1),this.regions[0].army=this.armyService.getArmy(),this.getPlayerCountry().name=t,this.countries.forEach(e=>{const n=l.find(n=>n[0]===e.id);n&&(e.regions=[],n[1].forEach(n=>{const t=this.getRegion(n);e.regions.push(t),e.id===wu.PLAYER&&0!==t.id&&(this.landService.increaseLand(t.land,!0),this.landService.increaseForest(t.forest,!1),this.landService.increaseMountains(t.mountains)),e.id!==wu.PLAYER&&e.id!==wu.NEUTRAL&&this.regions[n].army.addTroop(_u.ARCHER,2)}))})}save(){const e=[];this.countries.forEach(n=>{const t=[];n.regions.forEach(e=>{t.push(e.id)}),e.push({id:n.id,diplomacy:n.diplomacy,focus:n.focus,regions:t,data:n.data})});const n=[];this.regions.forEach(e=>{const t=[];0!==e.id&&e.army.units.forEach(e=>{t.push({troop:e.troop,size:e.size})}),n.push({id:e.id,wealth:e.wealth,economy:e.economy,defense:e.defense,target:e.target,land:e.land,forest:e.forest,mountains:e.mountains,spy:e.spy,army:t,lastAttack:e.lastAttack})});const t=[];return this.missions.forEach(e=>{t.push(JSON.stringify(e))}),{countries:e,regions:n,missions:t,defaultOrigin:this.defaultOrigin,playerNationName:this.getPlayerCountry().name,x:this.x,y:this.y,zoom:this.zoom}}getCountries(){return this.countries}getMissions(){return this.missions}getPlayerMissions(){return this.missions.filter(e=>e.ownerCountry.id===wu.PLAYER)}setSelectedCountry(e){this.selectedCountry=e,this.selectedMission=null}getSelectedCountry(){return this.selectedCountry}setSelectedRegion(e){this.selectedRegion=e,this.selectedMission=null}getSelectedRegion(){return this.selectedRegion}setSelectedMission(e){this.selectedCountry=null,this.selectedRegion=null,this.selectedMission=e}getSelectedMission(){return this.selectedMission}registerForCacheInvalidation(){return this.pathCacheSubject.asObservable()}tick(e){this.missions.forEach(e=>{e.tick()}),this.missions=this.missions.filter(e=>!e.isFinished())}getRegionNeighbours(e,n){const t=this.regionsNeighbours.find(n=>n.id===e),l=[];return t&&t.neighbours.forEach(n?e=>{l.push(e)}:n=>{e>=0&&n>=0&&l.push(n)}),l}findPath(e,n,t,l=!1){if(e===n)return new aR([e]);let i=Number.MAX_SAFE_INTEGER;const r=new Array(this.regions.length).fill(Number.MAX_SAFE_INTEGER);let s=[],u=[];const o=[];for(s.push(new aR([e]));s.length>0||u.length>0;){for(const e of s){const s=this.getCountryByRegionId(e.path[e.path.length-1]);if(t===wu.SPECIAL||s.id===t||s.id===wu.NEUTRAL){const t=this.getRegionNeighbours(e.path[e.path.length-1],!1).filter(n=>!e.path.includes(n));for(const s of t){const t=new aR(e.path.slice().concat([s]));if(t.path.length<=r[s]&&(r[s]=t.path.length,t.path.length<=i))if(s===n){if(l)return t;t.path.length<i&&(i=t.path.length),o.push(t)}else u.push(t)}}}s=u,u=[]}return Fu.randomArrayElement(o)}addMission(e){this.missions.push(e)}getCountry(e){return this.countries.find(n=>n.id===e)}getCountryByRegionId(e){let n=null;return this.countries.forEach(t=>{t.regions.find(n=>n.id===e)&&(n=t)}),n}getRegion(e){return this.regions[e]}ownRegion(e,n){const t=this.getCountryByRegionId(e),l=t.regions.findIndex(n=>n.id===e);if(void 0!==l){const e=t.regions.splice(l,1)[0];n.regions.push(e),this.selectedRegion&&this.selectedRegion.id===e.id&&(this.selectedCountry=this.getCountryByRegionId(this.selectedRegion.id)),n.id===wu.PLAYER?(this.landService.increaseLand(e.land,!0),this.landService.increaseForest(e.forest,!1),this.landService.increaseMountains(e.mountains),e.spy=0):e.id===this.defaultOrigin&&(this.defaultOrigin=0),this.activeCountriesList=[],this.pathCacheSubject.next()}}clearMission(){this.selectedMission=null}canColonize(e){return!this.missions.find(n=>n.getDestinationTargetRegion().id===e&&n.mission===Tu.COLONIZE)}getPlayerCountry(){return this.countries[0]}getInitialRegion(){return this.getRegion(this.getDefaultOrigin())}getInitialRegionCountry(){return this.getCountryByRegionId(this.getDefaultOrigin())}getDefaultOrigin(){return this.defaultOrigin}setDefaultOrigin(e){this.defaultOrigin=e}getStationedArmies(){const e=[];return this.countries[0].regions.filter(e=>0!==e.id&&e.army.getArmySize()>0).forEach(n=>e.push(n.army)),this.countries[1].regions.filter(e=>e.army.getArmySize()>0).forEach(n=>e.push(n.army)),e}getDisplayX(){return this.x}getDisplayY(){return this.y}getDisplayZoom(){return this.zoom}setDisplayX(e){this.x=e}setDisplayY(e){this.y=e}setDisplayZoom(e){this.zoom=e}getCountriesList(){return 0===this.activeCountriesList.length&&(this.activeCountriesList.push(wu[wu.NONE]),this.countries.filter(e=>e.id!==wu.PLAYER&&e.id!==wu.NEUTRAL&&e.regions.length>0).forEach(e=>this.activeCountriesList.push(wu[e.id]))),this.activeCountriesList}getNeutralRegionsNumber(){return this.getCountry(wu.NEUTRAL).regions.length}buildDefense(){this.missions.push(new SR(this.servicesService,this.idService.getNextId(),this.getPlayerCountry(),new Ub([]),new aR([this.getSelectedRegion().id,this.getSelectedRegion().id])))}changeName(){this.modalService.open(Lu.INPUT),this.modalService.setModalText("Specify your nation name"),this.modalService.setModalValue(this.getPlayerCountry().name);const e=this.modalService.registerForValueResponse().subscribe(n=>{e.unsubscribe(),null!==n&&(this.getPlayerCountry().name=n)})}findNeighbouringAttackableRegions(e,n){const t=[],l=[];return n.regions.forEach(i=>{i.neighbours.filter(e=>e>=0).forEach(i=>{const r=this.getCountryByRegionId(i);if(n.id!==r.id&&r.id!==wu.NEUTRAL&&(r.id===wu.PLAYER&&n.diplomacy<25||r.id!==wu.PLAYER)&&this.findPath(e.id,i,n.id,!0)){let e=30;r.id===wu.PLAYER&&(e=90),this.calendarService.getAbsoluteDay()-this.getRegion(i).lastAttack>=e&&(r.id===wu.PLAYER&&n.diplomacy<-25?t.includes(i)||t.push(i):l.includes(i)||l.push(i))}})}),this.shuffleArray(t.length>0?t:l)}findNeighbouringColonizableRegions(e,n){const t=[];return n.regions.forEach(l=>{l.neighbours.filter(e=>e>=0).forEach(l=>{this.getCountryByRegionId(l).id===wu.NEUTRAL&&this.canColonize(l)&&this.findPath(e.id,l,n.id,!0)&&(t.includes(l)||t.push(l))})}),this.shuffleArray(t)}shuffleArray(e){let n,t,l;for(l=e.length-1;l>0;l--)n=Math.floor(Math.random()*(l+1)),t=e[l],e[l]=e[n],e[n]=t;return e}DEV_calculateTotalLand(){let e=0,n=0,t=0;this.regions.forEach(l=>{8!==l.id&&9!==l.id&&10!==l.id&&11!==l.id&&12!==l.id&&(e+=l.land,n+=l.forest,t+=l.mountains)}),this.logService.success("Land report<br>Land: "+e+"<br>Forest: "+n+"<br>Mountains: "+t+"<br><br>Total: "+(e+n+t))}}return e.ngInjectableDef=de({factory:function(){return new e(Le(Mm),Le(VE),Le(Wb),Le(Bm),Le(Gm),Le(Vm),Le(ER),Le(lv))},token:e,providedIn:"root"}),e})();class bR{constructor(e,n,t,l,i,r){this.originRegion=e,this.originRegionColour=n,this.targetRegion=t,this.targetRegionColour=l,this.targetRegionCountry=i,this.missionType=r}}class OR{constructor(e,n,t){this.servicesService=e,this.worldService=n,this.modalService=t,this.selecting=!1,this.regionSelected=new Mi,this.dragX=-1,this.dragY=-1,this.clickX=-1,this.clickY=-1,this.moved=!1,this.showArmies=!1,this.showCapitals=!0,this.radio=0,this.pathCache=[],this.countries=wu,this.worldService.registerForCacheInvalidation().subscribe(e=>{this.pathCache=[]})}ngOnInit(){}getX(){return this.worldService.getDisplayX()}getY(){return this.worldService.getDisplayY()}getZoom(){return this.worldService.getDisplayZoom()}getCountries(){return this.worldService.getCountries()}getMissions(){return this.worldService.getMissions()}handleKeyDown(e){"ArrowDown"===e.key&&this.worldService.setDisplayY(this.worldService.getDisplayY()+5)}dragStart(e){this.moved=!1,this.dragX=e.x,this.dragY=e.y,this.clickX=e.x,this.clickY=e.y}mousemove(e){1===e.buttons&&this.dragX>=1&&this.dragY>=1&&(this.moved=!0,this.worldService.setDisplayX(this.worldService.getDisplayX()+e.x-this.dragX),this.worldService.setDisplayY(this.worldService.getDisplayY()+e.y-this.dragY),this.dragX=e.x,this.dragY=e.y)}dragEnd(e){this.moved&&this.dragX>=0&&this.dragY>=0&&(this.worldService.setDisplayX(this.worldService.getDisplayX()+e.x-this.dragX),this.worldService.setDisplayY(this.worldService.getDisplayY()+e.y-this.dragY)),this.dragX=-1,this.dragY=-1}onScroll(e){e.preventDefault(),e.deltaY>0&&this.getZoom()<1.7?this.worldService.setDisplayZoom(this.getZoom()+Math.sign(e.deltaY)/10):e.deltaY<0&&this.getZoom()>.7&&this.worldService.setDisplayZoom(this.getZoom()+Math.sign(e.deltaY)/10),this.getZoom()<.7?this.worldService.setDisplayZoom(.7):this.getZoom()>1.7&&this.worldService.setDisplayZoom(1.7)}prepareViewbox(e){return e.X-65+" "+(e.Y-65)+" 130 130"}resetView(){this.worldService.setDisplayZoom(1.4),this.worldService.setDisplayX(150),this.worldService.setDisplayY(-220)}select(e,n,t){Math.abs(e.x-this.clickX)<2&&Math.abs(e.y-this.clickY)<2&&(this.clickX=-1,this.clickY=-1,this.worldService.setSelectedRegion(t),this.worldService.setSelectedCountry(n))}moveUp(){this.worldService.setDisplayY(this.getY()-20)}moveDown(){this.worldService.setDisplayY(this.getY()+20)}moveRight(){this.worldService.setDisplayX(this.getX()+20)}moveLeft(){this.worldService.setDisplayX(this.getX()-20)}plunder(){this.modalService.open(Lu.MISSION),this.modalService.setMissionData(new bR(this.worldService.getInitialRegion(),this.worldService.getInitialRegionCountry().colour,this.worldService.getSelectedRegion(),this.worldService.getSelectedCountry().colour,this.worldService.getSelectedCountry().id,Tu.PLUNDER))}conquer(){this.modalService.open(Lu.MISSION),this.modalService.setMissionData(new bR(this.worldService.getInitialRegion(),this.worldService.getInitialRegionCountry().colour,this.worldService.getSelectedRegion(),this.worldService.getSelectedCountry().colour,this.worldService.getSelectedCountry().id,Tu.CONQUER))}colonize(){this.modalService.open(Lu.MISSION),this.modalService.setMissionData(new bR(this.worldService.getRegion(0),this.worldService.getPlayerCountry().colour,this.worldService.getSelectedRegion(),this.worldService.getSelectedCountry().colour,this.worldService.getSelectedCountry().id,Tu.COLONIZE))}move(){this.modalService.open(Lu.MISSION),this.modalService.setMissionData(new bR(this.worldService.getSelectedRegion(),this.worldService.getSelectedCountry().colour,null,null,null,Tu.MOVE))}spy(){this.modalService.open(Lu.MISSION),this.modalService.setMissionData(new bR(this.worldService.getInitialRegion(),this.worldService.getInitialRegionCountry().colour,this.worldService.getSelectedRegion(),this.worldService.getSelectedCountry().colour,this.worldService.getSelectedCountry().id,Tu.SPY))}isDev(){return!zu.production}getNeighbours(e){const n=[];return this.getCountries().forEach(t=>{t.regions.forEach(t=>{e.neighbours.includes(t.id)&&n.push(t)})}),n}selectMission(e){this.worldService.setSelectedMission(e)}findPath(e,n,t){const l=this.worldService.findPath(e,n,t,!0);return l?l.path.length-1:-1}hasPath(e,n,t=wu.PLAYER,l=!1){if(l)return this.findPath(e,n,t)>=0;{const l=this.pathCache.find(t=>t[0]===e&&t[1]===n);if(l)return l[2];const i=this.findPath(e,n,t)>=0;return this.pathCache.push([e,n,i]),i}}getIconPath(e){return"assets/army/mission/"+e+".svg"}getSelectedRegion(){return this.worldService.getSelectedRegion()}getSelectedCountry(){return this.worldService.getSelectedCountry()}getSelectedMission(){return this.worldService.getSelectedMission()}getTroopName(e){return Pu.prepareTroopName(e)}getMissionName(){return Pu.prepareMissionName(this.getSelectedMission().mission)}canColonize(){return this.worldService.canColonize(this.getSelectedRegion().id)}zoomIn(){this.getZoom()>.7&&(this.worldService.setDisplayZoom(this.getZoom()-.1),this.getZoom()<.7&&this.worldService.setDisplayZoom(.7))}zoomOut(){this.getZoom()<1.7&&(this.worldService.setDisplayZoom(this.getZoom()+.1),this.getZoom()>1.7&&this.worldService.setDisplayZoom(1.7))}getDefaultOrigin(){return this.worldService.getDefaultOrigin()}setDefaultOrigin(e){this.worldService.setDefaultOrigin(e)}getTarget(e){return cR[e]}build(){this.worldService.getMissions().find(e=>e.mission===Tu.BUILD&&e.getDestinationTargetRegion().id===this.getSelectedRegion().id)?this.modalService.info("Building already in progress"):(this.modalService.open(Lu.WORLD_BUILD),this.modalService.setWorldRegion(this.getSelectedRegion()))}getFirstFourUnits(e){return e.length>4?e.filter(e=>e.troop===_u.MILITIA||e.troop===_u.ARCHER||e.troop===_u.SPEARMAN||e.troop===_u.SWORDSMAN).sort((e,n)=>e.troop-n.troop):e.sort((e,n)=>e.troop-n.troop)}getSecondFourUnits(e){if(e.length>4)return e.filter(e=>e.troop===_u.LIGHT_CAVALRY).sort((e,n)=>e.troop-n.troop)}changeName(){this.worldService.changeName()}calculateTotalLand(){this.worldService.DEV_calculateTotalLand()}}var RR=Zt({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{width:100%;height:100%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#details[_ngcontent-%COMP%]{margin:5px 5px 0;width:98%;height:152px;border:2px solid #000}#details.selecting[_ngcontent-%COMP%]{height:117px}#svg[_ngcontent-%COMP%]{position:relative;margin:5px;width:98%;height:70.5%;border:2px solid #000}#kingdomName[_ngcontent-%COMP%]{font-weight:700}#mainMap[_ngcontent-%COMP%]{background-color:#86c5da}#target[_ngcontent-%COMP%]{position:absolute;width:30px;top:25px;right:30px;cursor:pointer}#arrowUp[_ngcontent-%COMP%]{position:absolute;width:30px;top:0;right:30px;cursor:pointer}#arrowDown[_ngcontent-%COMP%]{position:absolute;width:30px;top:50px;right:30px;cursor:pointer}#arrowRight[_ngcontent-%COMP%]{position:absolute;width:30px;top:25px;right:5px;cursor:pointer}#arrowLeft[_ngcontent-%COMP%]{position:absolute;width:30px;top:25px;right:55px;cursor:pointer}#plus[_ngcontent-%COMP%]{position:absolute;width:25px;top:80px;right:50px;cursor:pointer}#minus[_ngcontent-%COMP%]{position:absolute;width:25px;top:80px;right:15px;cursor:pointer}#options[_ngcontent-%COMP%]{position:absolute;top:5px;right:90px;cursor:pointer}#options[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-block;width:100px;text-align:end}.mission[_ngcontent-%COMP%]{cursor:pointer}svg[_ngcontent-%COMP%]{height:100%;width:100%}.region[_ngcontent-%COMP%]:hover{opacity:.7}#missionStats[_ngcontent-%COMP%], #regionDetails[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}#missionDetails[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], #regionDetails[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-right:20px}#missionDetails[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}#missionTitle[_ngcontent-%COMP%]{font-size:1.1em;font-weight:bolder;text-align:center;padding-bottom:5px}#missionBody[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;margin-left:5px}app-progress-bar[_ngcontent-%COMP%]{margin-top:3px;margin-left:5px;display:inline-block;width:150px;height:15px;font-size:.7em}#missionBody[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 auto}#missionBody[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:120px}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center}hr[_ngcontent-%COMP%]{display:block;height:1px;border:0;border-top:1px solid #000;padding:0;margin:2px 0}button[_ngcontent-%COMP%]{margin:2px;padding:4px}.buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}.buttonIcon[_ngcontent-%COMP%]{height:20px}#changeName[_ngcontent-%COMP%]{margin-left:5px;height:14px;cursor:pointer}#svgBox[_ngcontent-%COMP%]{height:72px;width:72px}"]],data:{}});function TR(e){return cs(0,[(e()(),Kr(0,0,null,null,0,"img",[["id","changeName"],["src","assets/gear.svg"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.changeName()&&l),l},null,null))],null,null)}function CR(e){return cs(0,[(e()(),Kr(0,0,null,null,0,"span",[],null,null,null,null,null))],null,null)}function IR(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(1,null,[" standing: "," (",") "]))],null,function(e,n){var t=n.component;e(n,1,0,t.getSelectedCountry().getDiplomacy(),t.getSelectedCountry().diplomacy)})}function yR(e){return cs(0,[(e()(),Kr(0,0,null,null,3,"span",[],null,null,null,null,null)),(e()(),Kr(1,0,null,null,0,"input",[["id","defaultOrigin"],["type","radio"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==i.setDefaultOrigin(i.getSelectedRegion().id)&&l),l},null,null)),(e()(),Kr(2,0,null,null,1,"label",[["for","defaultOrigin"]],null,null,null,null,null)),(e()(),us(-1,null,["use as default origin"]))],null,function(e,n){var t=n.component;e(n,1,0,t.getDefaultOrigin()===t.getSelectedRegion().id)})}function _R(e){return cs(0,[(e()(),Kr(0,0,null,null,12,"div",[],null,null,null,null,null)),(e()(),Kr(1,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(2,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(3,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),us(4,null,[" "," "])),(e()(),Kr(5,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(6,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(7,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),us(8,null,[" "," "])),(e()(),Kr(9,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(10,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(11,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),us(12,null,[" "," "]))],function(e,n){e(n,3,0,"wealth","world"),e(n,7,0,"economy","world"),e(n,11,0,"defense","world")},function(e,n){var t=n.component;e(n,4,0,t.getSelectedRegion().wealth),e(n,8,0,t.getSelectedRegion().economy),e(n,12,0,t.getSelectedRegion().defense)})}function AR(e){return cs(0,[(e()(),Kr(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),Kr(1,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(2,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(3,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),us(4,null,[" "," "]))],function(e,n){e(n,3,0,"defense","world")},function(e,n){e(n,4,0,n.component.getSelectedRegion().defense)})}function wR(e){return cs(0,[(e()(),Kr(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),Kr(1,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(2,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(3,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),us(4,null,[" "," "]))],function(e,n){e(n,3,0,"spy","army/mission")},function(e,n){e(n,4,0,n.component.getSelectedRegion().spy)})}function NR(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),us(1,null,["",": ",""]))],null,function(e,n){e(n,1,0,n.component.getTroopName(n.context.$implicit.troop),n.context.$implicit.size)})}function PR(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,NR)),ci(2,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.getFirstFourUnits(t.getSelectedRegion().army.units))},null)}function kR(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),us(1,null,["",": ",""]))],null,function(e,n){e(n,1,0,n.component.getTroopName(n.context.$implicit.troop),n.context.$implicit.size)})}function xR(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,kR)),ci(2,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.getSecondFourUnits(t.getSelectedRegion().army.units))},null)}function MR(e){return cs(0,[(e()(),Kr(0,0,null,null,12,"div",[],null,null,null,null,null)),(e()(),Kr(1,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(2,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(3,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),us(-1,null,[" ? "])),(e()(),Kr(5,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(6,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(7,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),us(-1,null,[" ? "])),(e()(),Kr(9,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(10,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(11,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),us(-1,null,[" ? "]))],function(e,n){e(n,3,0,"wealth","world"),e(n,7,0,"economy","world"),e(n,11,0,"defense","world")},null)}function DR(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),us(-1,null,[" troops: ? "]))],null,null)}function LR(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"button",[["class","icon"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.colonize()&&l),l},null,null)),(e()(),us(-1,null,["Colonize "])),(e()(),Kr(2,0,null,null,0,"img",[["class","buttonIcon"],["src","assets/army/mission/colonize.svg"]],null,null,null,null,null))],null,null)}function FR(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"button",[["class","icon"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.move()&&l),l},null,null)),(e()(),us(-1,null,["Move army "])),(e()(),Kr(2,0,null,null,0,"img",[["class","buttonIcon"],["src","assets/army/mission/move.svg"]],null,null,null,null,null))],null,null)}function HR(e){return cs(0,[(e()(),Kr(0,0,null,null,5,"div",[],null,null,null,null,null)),(e()(),Kr(1,0,null,null,4,"div",[["class","buttons"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,LR)),ci(3,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,FR)),ci(5,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,3,0,t.canColonize()&&t.hasPath(0,t.getSelectedRegion().id)),e(n,5,0,t.getSelectedRegion().army.hasAny())},null)}function UR(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"button",[["class","icon"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.plunder()&&l),l},null,null)),(e()(),us(-1,null,["Plunder "])),(e()(),Kr(2,0,null,null,0,"img",[["class","buttonIcon"],["src","assets/army/mission/plunder.svg"]],null,null,null,null,null))],null,null)}function GR(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"button",[["class","icon"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.conquer()&&l),l},null,null)),(e()(),us(-1,null,["Conquer "])),(e()(),Kr(2,0,null,null,0,"img",[["class","buttonIcon"],["src","assets/army/mission/conquer.svg"]],null,null,null,null,null))],null,null)}function BR(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"button",[["class","icon"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.spy()&&l),l},null,null)),(e()(),us(-1,null,["Spy "])),(e()(),Kr(2,0,null,null,0,"img",[["class","buttonIcon"],["src","assets/army/mission/spy.svg"]],null,null,null,null,null))],null,null)}function WR(e){return cs(0,[(e()(),Kr(0,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),Kr(1,0,null,null,6,"div",[["class","buttons"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,UR)),ci(3,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,GR)),ci(5,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,BR)),ci(7,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,3,0,t.hasPath(0,t.getSelectedRegion().id)),e(n,5,0,t.hasPath(0,t.getSelectedRegion().id)),e(n,7,0,0===t.getSelectedRegion().spy&&t.hasPath(0,t.getSelectedRegion().id,t.countries.SPECIAL,!0))},null)}function VR(e){return cs(0,[(e()(),Kr(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,HR)),ci(2,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,WR)),ci(4,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.getSelectedCountry().id===t.countries.NEUTRAL),e(n,4,0,t.getSelectedCountry().id!==t.countries.NEUTRAL)},null)}function zR(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"button",[["class","icon"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.move()&&l),l},null,null)),(e()(),us(-1,null,["Move army "])),(e()(),Kr(2,0,null,null,0,"img",[["class","buttonIcon"],["src","assets/army/mission/move.svg"]],null,null,null,null,null))],null,null)}function YR(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"button",[["class","icon"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.build()&&l),l},null,null)),(e()(),us(-1,null,["Build defense "])),(e()(),Kr(2,0,null,null,0,"img",[["class","buttonIcon"],["src","assets/army/mission/build.svg"]],null,null,null,null,null))],null,null)}function $R(e){return cs(0,[(e()(),Kr(0,0,null,null,5,"div",[],null,null,null,null,null)),(e()(),Kr(1,0,null,null,4,"div",[["class","buttons"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,zR)),ci(3,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,YR)),ci(5,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,3,0,t.getSelectedRegion().army.hasAny()),e(n,5,0,0!==t.getSelectedRegion().id)},null)}function KR(e){return cs(0,[(e()(),Kr(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,VR)),ci(2,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,$R)),ci(4,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.getSelectedCountry().id!==t.countries.PLAYER),e(n,4,0,t.getSelectedCountry().id===t.countries.PLAYER)},null)}function jR(e){return cs(0,[(e()(),Kr(0,0,null,null,46,"div",[],null,null,null,null,null)),(e()(),us(-1,null,[" Kingdom: "])),(e()(),Kr(2,0,null,null,1,"span",[["id","kingdomName"]],null,null,null,null,null)),(e()(),us(3,null,["",""])),(e()(),$r(16777216,null,null,1,null,TR)),ci(5,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,CR)),ci(7,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(8,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,IR)),ci(10,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,yR)),ci(12,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(13,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Kr(14,0,null,null,30,"div",[["id","regionDetails"]],null,null,null,null,null)),(e()(),Kr(15,0,null,null,2,"div",[["id","svgBox"]],null,null,null,null,null)),(e()(),Kr(16,0,null,null,1,":svg:svg",[["class","regionSVG"],["draggable","false"],["ondragstart","return false;"]],[[1,"height",0],[1,"width",0],[1,"viewBox",0]],null,null,null,null)),(e()(),Kr(17,0,null,null,0,":svg:path",[],[[1,"fill",0],[1,"d",0],[1,"stroke",0],[1,"stroke-width",0]],null,null,null,null)),(e()(),Kr(18,0,null,null,12,"div",[],null,null,null,null,null)),(e()(),Kr(19,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(20,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(21,114688,null,0,Rp,[],{name:[0,"name"]},null),(e()(),us(22,null,[" ",""])),(e()(),Kr(23,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(24,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(25,114688,null,0,Rp,[],{name:[0,"name"]},null),(e()(),us(26,null,[" ",""])),(e()(),Kr(27,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(28,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(29,114688,null,0,Rp,[],{name:[0,"name"]},null),(e()(),us(30,null,[" ",""])),(e()(),$r(16777216,null,null,1,null,_R)),ci(32,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,AR)),ci(34,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,wR)),ci(36,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,PR)),ci(38,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,xR)),ci(40,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,MR)),ci(42,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,DR)),ci(44,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,KR)),ci(46,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,5,0,t.getSelectedCountry().id===t.countries.PLAYER),e(n,7,0,t.isDev()),e(n,10,0,t.getSelectedCountry().id!==t.countries.PLAYER&&t.getSelectedCountry().id!==t.countries.NEUTRAL),e(n,12,0,t.getSelectedCountry().id===t.countries.PLAYER||t.getSelectedCountry().id===t.countries.NEUTRAL),e(n,21,0,"land"),e(n,25,0,"forest"),e(n,29,0,"mountains"),e(n,32,0,t.getSelectedRegion().spy>0&&t.getSelectedCountry().id!==t.countries.PLAYER),e(n,34,0,t.getSelectedCountry().id===t.countries.PLAYER),e(n,36,0,t.getSelectedRegion().spy>0&&t.getSelectedCountry().id!==t.countries.PLAYER),e(n,38,0,t.getSelectedRegion().spy>0||t.getSelectedCountry().id===t.countries.PLAYER||t.getSelectedCountry().id===t.countries.NEUTRAL),e(n,40,0,t.getSelectedRegion().spy>0||t.getSelectedCountry().id===t.countries.PLAYER||t.getSelectedCountry().id===t.countries.NEUTRAL),e(n,42,0,0===t.getSelectedRegion().spy&&t.getSelectedCountry().id!==t.countries.PLAYER&&t.getSelectedCountry().id!==t.countries.NEUTRAL),e(n,44,0,0===t.getSelectedRegion().spy&&t.getSelectedCountry().id!==t.countries.PLAYER&&t.getSelectedCountry().id!==t.countries.NEUTRAL),e(n,46,0,!t.selecting)},function(e,n){var t=n.component;e(n,3,0,t.getSelectedCountry().name),e(n,16,0,"72px","72px",t.prepareViewbox(t.getSelectedRegion().center)),e(n,17,0,t.getSelectedCountry().colour,t.getSelectedRegion().path,"black","2"),e(n,22,0,t.getSelectedRegion().land),e(n,26,0,t.getSelectedRegion().forest),e(n,30,0,t.getSelectedRegion().mountains)})}function qR(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),us(1,null,["",": ",""]))],null,function(e,n){e(n,1,0,n.component.getTroopName(n.context.$implicit.troop),n.context.$implicit.size)})}function XR(e){return cs(0,[(e()(),Kr(0,0,null,null,12,"div",[["id","missionDetails"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"div",[["id","missionTitle"]],null,null,null,null,null)),(e()(),us(2,null,["",""])),(e()(),Kr(3,0,null,null,9,"div",[["id","missionBody"]],null,null,null,null,null)),(e()(),Kr(4,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Kr(5,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(e()(),Kr(6,0,null,null,3,"div",[["id","missionStats"]],null,null,null,null,null)),(e()(),us(7,null,[" ",": "])),(e()(),Kr(8,0,null,null,1,"app-progress-bar",[],null,null,null,rR,tR)),ci(9,638976,null,0,nR,[Lm],{progress:[0,"progress"]},null),(e()(),Kr(10,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,qR)),ci(12,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,9,0,t.getSelectedMission().getDisplayProgress()),e(n,12,0,t.getSelectedMission().army.units)},function(e,n){var t=n.component;e(n,2,0,t.getMissionName()),e(n,5,0,Il(1,"",t.getIconPath(t.getSelectedMission().icon),"")),e(n,7,0,t.getSelectedMission().getStatus())})}function QR(e){return cs(0,[(e()(),Kr(0,0,null,null,0,":svg:path",[],[[1,"fill",0],[1,"d",0],[1,"stroke",0],[1,"stroke-width",0]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.select(t,e.parent.parent.context.$implicit,e.parent.context.$implicit)&&l),l},null,null))],null,function(e,n){e(n,0,0,n.parent.parent.context.$implicit.colour,n.parent.context.$implicit.path,"black","2")})}function ZR(e){return cs(0,[(e()(),Kr(0,0,null,null,2,":svg:g",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.select(t,e.parent.parent.context.$implicit,e.parent.context.$implicit)&&l),l},null,null)),(e()(),Kr(1,0,null,null,0,":svg:path",[],[[1,"fill",0],[1,"d",0],[1,"stroke",0],[1,"stroke-width",0]],null,null,null,null)),(e()(),Kr(2,0,null,null,0,":svg:path",[],[[1,"fill",0],[1,"d",0]],null,null,null,null))],null,function(e,n){e(n,1,0,n.parent.parent.context.$implicit.colour,n.parent.context.$implicit.path,"black","2"),e(n,2,0,"url(#diagonalHatch)",n.parent.context.$implicit.path)})}function JR(e){return cs(0,[(e()(),Kr(0,0,null,null,2,":svg:g",[],null,null,null,null,null)),(e()(),Kr(1,0,null,null,0,":svg:circle",[],[[1,"r",0],[1,"cx",0],[1,"cy",0],[1,"fill",0]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.select(t,e.parent.parent.context.$implicit,e.parent.context.$implicit)&&l),l},null,null)),(e()(),Kr(2,0,null,null,0,":svg:image",[],[[1,"height",0],[1,"width",0],[1,"x",0],[1,"y",0],[1,":xlink:href",0]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.select(t,e.parent.parent.context.$implicit,e.parent.context.$implicit)&&l),l},null,null))],null,function(e,n){e(n,1,0,12,n.parent.context.$implicit.center.X,n.parent.context.$implicit.center.Y+1,n.parent.parent.context.$implicit.colour),e(n,2,0,20,20,n.parent.context.$implicit.center.X-10,n.parent.context.$implicit.center.Y-10,"assets/world/capital.svg")})}function eT(e){return cs(0,[(e()(),Kr(0,0,null,null,2,":svg:g",[],null,null,null,null,null)),(e()(),Kr(1,0,null,null,0,":svg:circle",[],[[1,"r",0],[1,"cx",0],[1,"cy",0],[1,"fill",0]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.select(t,e.parent.parent.context.$implicit,e.parent.context.$implicit)&&l),l},null,null)),(e()(),Kr(2,0,null,null,0,":svg:image",[],[[1,"height",0],[1,"width",0],[1,"x",0],[1,"y",0],[1,":xlink:href",0]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.select(t,e.parent.parent.context.$implicit,e.parent.context.$implicit)&&l),l},null,null))],null,function(e,n){e(n,1,0,6,n.parent.context.$implicit.center.X,n.parent.context.$implicit.center.Y,n.parent.parent.context.$implicit.colour),e(n,2,0,10,10,n.parent.context.$implicit.center.X-5,n.parent.context.$implicit.center.Y-5,"assets/army/recruit.svg")})}function nT(e){return cs(0,[(e()(),Kr(0,0,null,null,2,":svg:g",[],null,null,null,null,null)),(e()(),Kr(1,0,null,null,0,":svg:circle",[],[[1,"r",0],[1,"cx",0],[1,"cy",0],[1,"fill",0]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.select(t,e.parent.parent.context.$implicit,e.parent.context.$implicit)&&l),l},null,null)),(e()(),Kr(2,0,null,null,0,":svg:image",[],[[1,"height",0],[1,"width",0],[1,"x",0],[1,"y",0],[1,":xlink:href",0]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.select(t,e.parent.parent.context.$implicit,e.parent.context.$implicit)&&l),l},null,null))],null,function(e,n){e(n,1,0,6,n.parent.context.$implicit.center.X,n.parent.context.$implicit.center.Y,n.parent.parent.context.$implicit.colour),e(n,2,0,10,10,n.parent.context.$implicit.center.X-5,n.parent.context.$implicit.center.Y-5,"assets/army/mission/spy.svg")})}function tT(e){return cs(0,[(e()(),Kr(0,0,null,null,10,":svg:g",[["class","region"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,QR)),ci(2,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,ZR)),ci(4,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,JR)),ci(6,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,eT)),ci(8,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,nT)),ci(10,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,!t.getSelectedRegion()||n.context.$implicit.id!==t.getSelectedRegion().id),e(n,4,0,t.getSelectedRegion()&&n.context.$implicit.id===t.getSelectedRegion().id),e(n,6,0,0===t.radio&&n.context.$implicit.capital===n.parent.context.$implicit.id);var l=1===t.radio&&n.context.$implicit.army.hasAny()&&(n.parent.context.$implicit.id===t.countries.PLAYER||n.parent.context.$implicit.id===t.countries.NEUTRAL||n.context.$implicit.spy>0);e(n,8,0,l),e(n,10,0,2===t.radio&&n.context.$implicit.spy>0)},null)}function lT(e){return cs(0,[(e()(),Kr(0,0,null,null,2,":svg:g",[],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,tT)),ci(2,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,2,0,n.context.$implicit.regions)},null)}function iT(e){return cs(0,[(e()(),Kr(0,0,null,null,1,":svg:g",[],null,null,null,null,null)),(e()(),Kr(1,0,null,null,0,":svg:line",[],[[1,"x1",0],[1,"y1",0],[1,"x2",0],[1,"y2",0],[1,"stroke",0],[1,"stroke-dasharray",0],[1,"stroke-width",0]],null,null,null,null))],null,function(e,n){e(n,1,0,n.context.$implicit.origin.x,n.context.$implicit.origin.y,n.context.$implicit.target.x,n.context.$implicit.target.y,"black","5,5","1")})}function rT(e){return cs(0,[(e()(),Kr(0,0,null,null,2,":svg:g",[],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,iT)),ci(2,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,2,0,n.parent.context.$implicit.routePaths)},null)}function sT(e){return cs(0,[(e()(),Kr(0,0,null,null,2,":svg:g",[["class","mission"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,rT)),ci(2,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.getSelectedMission()&&t.getSelectedMission()===n.context.$implicit&&t.getSelectedMission().ownerCountry.id===t.countries.PLAYER)},null)}function uT(e){return cs(0,[(e()(),Kr(0,0,null,null,2,":svg:g",[["class","mission"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,0,":svg:circle",[],[[1,"r",0],[1,"cx",0],[1,"cy",0],[1,"fill",0],[1,"stroke",0],[1,"stroke-width",0]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.selectMission(e.parent.context.$implicit)&&l),l},null,null)),(e()(),Kr(2,0,null,null,0,":svg:image",[["draggable","false"],["ondragstart","return false;"]],[[1,"height",0],[1,"width",0],[1,"x",0],[1,"y",0],[1,":xlink:href",0]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.selectMission(e.parent.context.$implicit)&&l),l},null,null))],null,function(e,n){var t=n.component,l=n.parent.context.$implicit.getOrigin().x+(n.parent.context.$implicit.getTarget().x-n.parent.context.$implicit.getOrigin().x)*n.parent.context.$implicit.getProgressPercentage(),i=n.parent.context.$implicit.getOrigin().y+(n.parent.context.$implicit.getTarget().y-n.parent.context.$implicit.getOrigin().y)*n.parent.context.$implicit.getProgressPercentage();e(n,1,0,8,l,i,"lightgrey","black","1");var r=n.parent.context.$implicit.getOrigin().x+(n.parent.context.$implicit.getTarget().x-n.parent.context.$implicit.getOrigin().x)*n.parent.context.$implicit.getProgressPercentage()-6,s=n.parent.context.$implicit.getOrigin().y+(n.parent.context.$implicit.getTarget().y-n.parent.context.$implicit.getOrigin().y)*n.parent.context.$implicit.getProgressPercentage()-6;e(n,2,0,12,12,r,s,t.getIconPath(n.parent.context.$implicit.icon))})}function oT(e){return cs(0,[(e()(),Kr(0,0,null,null,3,":svg:g",[["class","computerMission"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,0,":svg:circle",[],[[1,"r",0],[1,"cx",0],[1,"cy",0],[1,"fill",0],[1,"stroke",0],[1,"stroke-width",0]],null,null,null,null)),(e()(),Kr(2,0,null,null,0,":svg:circle",[],[[1,"r",0],[1,"cx",0],[1,"cy",0],[1,"fill",0],[1,"fill-opacity",0],[1,"stroke",0],[1,"stroke-width",0]],null,null,null,null)),(e()(),Kr(3,0,null,null,0,":svg:image",[["draggable","false"],["ondragstart","return false;"]],[[1,"height",0],[1,"width",0],[1,"x",0],[1,"y",0],[1,":xlink:href",0]],null,null,null,null))],null,function(e,n){var t=n.component,l=n.parent.context.$implicit.getOrigin().x+(n.parent.context.$implicit.getTarget().x-n.parent.context.$implicit.getOrigin().x)*n.parent.context.$implicit.getProgressPercentage(),i=n.parent.context.$implicit.getOrigin().y+(n.parent.context.$implicit.getTarget().y-n.parent.context.$implicit.getOrigin().y)*n.parent.context.$implicit.getProgressPercentage();e(n,1,0,8,l,i,"white","black","1");var r=n.parent.context.$implicit.getOrigin().x+(n.parent.context.$implicit.getTarget().x-n.parent.context.$implicit.getOrigin().x)*n.parent.context.$implicit.getProgressPercentage(),s=n.parent.context.$implicit.getOrigin().y+(n.parent.context.$implicit.getTarget().y-n.parent.context.$implicit.getOrigin().y)*n.parent.context.$implicit.getProgressPercentage();e(n,2,0,8,r,s,n.parent.context.$implicit.ownerCountry.colour,.8,"black","1");var u=n.parent.context.$implicit.getOrigin().x+(n.parent.context.$implicit.getTarget().x-n.parent.context.$implicit.getOrigin().x)*n.parent.context.$implicit.getProgressPercentage()-6,o=n.parent.context.$implicit.getOrigin().y+(n.parent.context.$implicit.getTarget().y-n.parent.context.$implicit.getOrigin().y)*n.parent.context.$implicit.getProgressPercentage()-6;e(n,3,0,12,12,u,o,t.getIconPath(n.parent.context.$implicit.icon))})}function aT(e){return cs(0,[(e()(),Kr(0,0,null,null,4,":svg:g",[],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,uT)),ci(2,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,oT)),ci(4,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,n.context.$implicit.ownerCountry.id===t.countries.PLAYER),e(n,4,0,n.context.$implicit.ownerCountry.id!==t.countries.PLAYER)},null)}function cT(e){return cs(0,[Zr(671088640,1,{svgRef:0}),(e()(),Kr(1,0,null,null,59,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Kr(2,0,null,null,1,"div",[["id","title"]],null,null,null,null,null)),(e()(),us(-1,null,["World Map"])),(e()(),Kr(4,0,null,null,7,"div",[["id","details"]],null,null,null,null,null)),di(512,null,Uo,Go,[Ct,It,rt,ct]),ci(6,278528,null,0,Wo,[Uo],{ngClass:[0,"ngClass"]},null),rs(7,{selecting:0}),(e()(),$r(16777216,null,null,1,null,jR)),ci(9,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,XR)),ci(11,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(12,0,[[1,0],["svg",1]],null,48,"div",[["id","svg"]],null,null,null,null,null)),(e()(),Kr(13,0,null,null,0,"img",[["id","target"],["src","assets/world/target.svg"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.resetView()&&l),l},null,null)),(e()(),Kr(14,0,null,null,0,"img",[["id","arrowUp"],["src","assets/world/arrow_up.svg"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.moveDown()&&l),l},null,null)),(e()(),Kr(15,0,null,null,0,"img",[["id","arrowDown"],["src","assets/world/arrow_down.svg"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.moveUp()&&l),l},null,null)),(e()(),Kr(16,0,null,null,0,"img",[["id","arrowRight"],["src","assets/world/arrow_right.svg"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.moveLeft()&&l),l},null,null)),(e()(),Kr(17,0,null,null,0,"img",[["id","arrowLeft"],["src","assets/world/arrow_left.svg"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.moveRight()&&l),l},null,null)),(e()(),Kr(18,0,null,null,0,"img",[["id","plus"],["src","assets/world/plus.svg"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.zoomIn()&&l),l},null,null)),(e()(),Kr(19,0,null,null,0,"img",[["id","minus"],["src","assets/world/minus.svg"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.zoomOut()&&l),l},null,null)),(e()(),Kr(20,0,null,null,29,"div",[["id","options"]],null,null,null,null,null)),(e()(),Kr(21,0,null,null,1,"label",[["for","showCapitals"]],null,null,null,null,null)),(e()(),us(-1,null,["show capitals"])),(e()(),Kr(23,0,null,null,6,"input",[["id","showCapitals"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==Ql(e,24)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,24).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ql(e,24)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ql(e,24)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==Ql(e,25).onChange()&&l),"blur"===n&&(l=!1!==Ql(e,25).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.radio=t)&&l),l},null,null)),ci(24,16384,null,0,wp,[ct,rt,[2,Ap]],null,null),ci(25,212992,null,0,Yp,[ct,rt,zp,We],{value:[0,"value"]},null),di(1024,null,yp,function(e,n){return[e,n]},[wp,Yp]),ci(27,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(29,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(30,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(31,0,null,null,1,"label",[["for","showArmies"]],null,null,null,null,null)),(e()(),us(-1,null,["show armies"])),(e()(),Kr(33,0,null,null,6,"input",[["id","showArmies"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==Ql(e,34)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,34).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ql(e,34)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ql(e,34)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==Ql(e,35).onChange()&&l),"blur"===n&&(l=!1!==Ql(e,35).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.radio=t)&&l),l},null,null)),ci(34,16384,null,0,wp,[ct,rt,[2,Ap]],null,null),ci(35,212992,null,0,Yp,[ct,rt,zp,We],{value:[0,"value"]},null),di(1024,null,yp,function(e,n){return[e,n]},[wp,Yp]),ci(37,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(39,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(40,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(41,0,null,null,1,"label",[["for","showSpies"]],null,null,null,null,null)),(e()(),us(-1,null,["show spies"])),(e()(),Kr(43,0,null,null,6,"input",[["id","showSpies"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==Ql(e,44)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,44).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ql(e,44)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ql(e,44)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==Ql(e,45).onChange()&&l),"blur"===n&&(l=!1!==Ql(e,45).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.radio=t)&&l),l},null,null)),ci(44,16384,null,0,wp,[ct,rt,[2,Ap]],null,null),ci(45,212992,null,0,Yp,[ct,rt,zp,We],{value:[0,"value"]},null),di(1024,null,yp,function(e,n){return[e,n]},[wp,Yp]),ci(47,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(49,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(50,0,null,null,10,":svg:svg",[["id","mainMap"],["xmlns","http://www.w3.org/2000/svg"]],[[1,"viewBox",0]],null,null,null,null)),(e()(),Kr(51,0,null,null,2,":svg:defs",[],null,null,null,null,null)),(e()(),Kr(52,0,null,null,1,":svg:pattern",[["height","4"],["id","diagonalHatch"],["patternUnits","userSpaceOnUse"],["width","4"]],null,null,null,null,null)),(e()(),Kr(53,0,null,null,0,":svg:path",[["d","M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2"],["style","stroke:black; stroke-width:0.5"]],null,null,null,null,null)),(e()(),Kr(54,0,null,null,6,":svg:g",[],[[1,"transform",0]],null,null,null,null)),(e()(),$r(16777216,null,null,1,null,lT)),ci(56,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),(e()(),$r(16777216,null,null,1,null,sT)),ci(58,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),(e()(),$r(16777216,null,null,1,null,aT)),ci(60,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component,l=e(n,7,0,t.selecting);e(n,6,0,l),e(n,9,0,t.getSelectedCountry()&&t.getSelectedRegion()),e(n,11,0,t.getSelectedMission()),e(n,25,0,0),e(n,27,0,t.radio),e(n,35,0,1),e(n,37,0,t.radio),e(n,45,0,2),e(n,47,0,t.radio),e(n,56,0,t.getCountries()),e(n,58,0,t.getMissions()),e(n,60,0,t.getMissions())},function(e,n){var t=n.component;e(n,23,0,Ql(n,29).ngClassUntouched,Ql(n,29).ngClassTouched,Ql(n,29).ngClassPristine,Ql(n,29).ngClassDirty,Ql(n,29).ngClassValid,Ql(n,29).ngClassInvalid,Ql(n,29).ngClassPending),e(n,33,0,Ql(n,39).ngClassUntouched,Ql(n,39).ngClassTouched,Ql(n,39).ngClassPristine,Ql(n,39).ngClassDirty,Ql(n,39).ngClassValid,Ql(n,39).ngClassInvalid,Ql(n,39).ngClassPending),e(n,43,0,Ql(n,49).ngClassUntouched,Ql(n,49).ngClassTouched,Ql(n,49).ngClassPristine,Ql(n,49).ngClassDirty,Ql(n,49).ngClassValid,Ql(n,49).ngClassInvalid,Ql(n,49).ngClassPending),e(n,50,0,(0-674*t.getZoom())/2+" "+(0-674*t.getZoom())/2+" "+674*t.getZoom()+" "+464*t.getZoom()),e(n,54,0,"translate("+t.getX()+" "+t.getY()+")")})}function hT(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"app-world",[],null,[[null,"keydown"],[null,"mousedown"],[null,"mousemove"],[null,"mouseup"],[null,"wheel"]],function(e,n,t){var l=!0;return"keydown"===n&&(l=!1!==Ql(e,1).handleKeyDown(t)&&l),"mousedown"===n&&(l=!1!==Ql(e,1).dragStart(t)&&l),"mousemove"===n&&(l=!1!==Ql(e,1).mousemove(t)&&l),"mouseup"===n&&(l=!1!==Ql(e,1).dragEnd(t)&&l),"wheel"===n&&(l=!1!==Ql(e,1).onScroll(t)&&l),l},cT,RR)),ci(1,114688,null,0,OR,[Mm,vR,Vm],null,null)],function(e,n){e(n,1,0)},null)}var dT=Gl("app-world",OR,hT,{selecting:"selecting"},{regionSelected:"regionSelected"},[]);const gT=(()=>{class e{constructor(e,n,t){this.servicesService=e,this.resourcesService=n,this.gameService=t,this.heritagePoints=0,this.spentHeritagePoints=0,e.addService(xu.HERITAGE,this)}load(e){this.heritagePoints=void 0!==e.heritagePoints?e.heritagePoints:0,this.spentHeritagePoints=void 0!==e.spentHeritagePoints?e.spentHeritagePoints:0,this.heritagePoints>0&&this.gameService.enable(bu.HERITAGE)}reset(e,n){e&&(this.heritagePoints=0),this.heritagePoints>0&&this.gameService.enable(bu.HERITAGE),this.spentHeritagePoints=0}save(){return{heritagePoints:this.heritagePoints,spentHeritagePoints:this.spentHeritagePoints}}increaseHeritagePoints(e){this.gameService.enable(bu.HERITAGE),this.heritagePoints+=e}spendHeritagePoints(e){return e<=this.getAvailableHeritagePoints()&&(this.spentHeritagePoints+=e,!0)}hasHeritagePoints(e){return e<=this.heritagePoints-this.spentHeritagePoints}getHeritagePoints(){return this.heritagePoints}calculateHeritagePoints(){let e=this.resourcesService.getTotalPeople(),n=50,t=0;for(;e>=n;)t+=1,e-=n,n+=n;return t}peopleToNextHeritagePoint(){let e=this.resourcesService.getTotalPeople(),n=50;for(;e>=n;)e-=n,n+=n;return n-e}getAvailableHeritagePoints(){return this.heritagePoints-this.spentHeritagePoints}}return e.ngInjectableDef=de({factory:function(){return new e(Le(Mm),Le(Jm),Le(Ym))},token:e,providedIn:"root"}),e})();class pT{constructor(e,n,t){this.heritageService=e,this.landService=n,this.modalService=t,this.multiplier=1}ngOnInit(){}getHeritagePoints(){return this.heritageService.getHeritagePoints()}getAvailableHeritagePoints(){return this.heritageService.getAvailableHeritagePoints()}buyLand(){this.heritageService.spendHeritagePoints(this.multiplier)?this.landService.increaseLand(20*this.multiplier,!0):this.modalService.info("No enough Heritage Points!")}buyForest(){this.heritageService.spendHeritagePoints(this.multiplier)?this.landService.increaseForest(20*this.multiplier,!1):this.modalService.info("No enough Heritage Points!")}buyMountains(){this.heritageService.spendHeritagePoints(this.multiplier)?this.landService.increaseMountains(10*this.multiplier):this.modalService.info("No enough Heritage Points!")}addHeritagePoints(){this.heritageService.increaseHeritagePoints(10)}isDev(){return!zu.production}}var mT=Zt({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{margin:.5%;height:100%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#multiplier[_ngcontent-%COMP%]{width:5ch}"]],data:{}});function fT(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.addHeritagePoints()&&l),l},null,null)),(e()(),us(-1,null,["add"]))],null,null)}function ST(e){return cs(0,[(e()(),Kr(0,0,null,null,33,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),Kr(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["Heritage"])),(e()(),Kr(4,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),us(5,null,[" Heritage points: ","/"," "])),(e()(),$r(16777216,null,null,1,null,fT)),ci(7,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(8,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(9,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),us(-1,null,[" Heritage points can be used to buy more land or unlock researches. "])),(e()(),Kr(11,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(12,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(13,0,null,null,1,"label",[["for","multiplier"]],null,null,null,null,null)),(e()(),us(-1,null,["Spend "])),(e()(),Kr(15,0,null,null,6,"input",[["id","multiplier"],["min","1"],["type","number"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==Ql(e,16)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,16).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ql(e,16)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ql(e,16)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==Ql(e,17).onChange(t.target.value)&&l),"input"===n&&(l=!1!==Ql(e,17).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,17).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.multiplier=t)&&l),l},null,null)),ci(16,16384,null,0,wp,[ct,rt,[2,Ap]],null,null),ci(17,16384,null,0,Vp,[ct,rt],null,null),di(1024,null,yp,function(e,n){return[e,n]},[wp,Vp]),ci(19,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(21,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(22,0,null,null,1,"label",[["for","multiplier"]],null,null,null,null,null)),(e()(),us(-1,null,[" Heritage Points"])),(e()(),Kr(24,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(25,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.buyLand()&&l),l},null,null)),(e()(),us(26,null,["Buy "," land for "," HP"])),(e()(),Kr(27,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(28,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.buyForest()&&l),l},null,null)),(e()(),us(29,null,["Buy "," forest for "," HP"])),(e()(),Kr(30,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(31,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.buyMountains()&&l),l},null,null)),(e()(),us(32,null,["Buy "," mountains for "," HP"])),(e()(),Kr(33,0,null,null,0,"br",[],null,null,null,null,null))],function(e,n){var t=n.component;e(n,7,0,t.isDev()),e(n,19,0,t.multiplier)},function(e,n){var t=n.component;e(n,5,0,t.getAvailableHeritagePoints(),t.getHeritagePoints()),e(n,15,0,Il(1,"",t.getAvailableHeritagePoints(),""),Ql(n,21).ngClassUntouched,Ql(n,21).ngClassTouched,Ql(n,21).ngClassPristine,Ql(n,21).ngClassDirty,Ql(n,21).ngClassValid,Ql(n,21).ngClassInvalid,Ql(n,21).ngClassPending),e(n,26,0,20*t.multiplier,t.multiplier),e(n,29,0,20*t.multiplier,t.multiplier),e(n,32,0,10*t.multiplier,t.multiplier)})}function ET(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"app-heritage",[],null,null,null,ST,mT)),ci(1,114688,null,0,pT,[gT,lv,Vm],null,null)],function(e,n){e(n,1,0)},null)}var vT=Gl("app-heritage",pT,ET,{},{},[]);class bT{constructor(e){this.royalService=e,this.id=Math.random()}ngOnInit(){}getPerkName(){return Pu.preparePerkName(this.perk.perk)}unlock(){this.royalService.unlock(this.perk)}isAvailable(){return this.royalService.getRoyalPoints()>=this.perk.cost&&(0===this.perk.maxUsages||this.perk.usages<this.perk.maxUsages)}}var OT=Zt({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #000;font-size:1.2em}#wrapperNotAvailable[_ngcontent-%COMP%]{display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #57575a;cursor:initial;font-size:1.2em}#text[_ngcontent-%COMP%]{display:inline-block;position:relative;z-index:2}#titleGrey[_ngcontent-%COMP%]{display:inline-block;color:#57575a}.notMet[_ngcontent-%COMP%]{color:var(--negative-colour)}.title[_ngcontent-%COMP%]{text-align:left}hr[_ngcontent-%COMP%]{border-color:#000}#progress[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background-color:var(--active-colour);z-index:1}app-icon[_ngcontent-%COMP%]{margin-top:-15px;height:17px}"]],data:{}});function RT(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),us(1,null,[" Usages: ","/"," "]))],null,function(e,n){var t=n.component;e(n,1,0,t.perk.usages,t.perk.maxUsages)})}function TT(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),us(-1,null,[" Usages: unlimited "]))],null,null)}function CT(e){return cs(0,[(e()(),Kr(0,0,null,null,14,"div",[["appTooltip",""],["class","tooltip"],["id","wrapper"]],null,[[null,"click"],[null,"mousemove"]],function(e,n,t){var l=!0,i=e.component;return"mousemove"===n&&(l=!1!==Ql(e,1).onmousemove(t)&&l),"click"===n&&(l=!1!==i.unlock()&&l),l},null,null)),ci(1,16384,null,0,Op,[],{elementId:[0,"elementId"]},null),(e()(),Kr(2,0,null,null,2,"div",[["id","text"]],null,null,null,null,null)),(e()(),Kr(3,0,null,null,1,"div",[["class","icon"]],null,null,null,null,null)),(e()(),us(4,null,[" "," "])),(e()(),Kr(5,0,null,null,9,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),us(6,null,[" ",""])),(e()(),Kr(7,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(8,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),us(9,null,[" Cost: "," RP "])),(e()(),Kr(10,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,RT)),ci(12,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,TT)),ci(14,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.id),e(n,12,0,t.perk.maxUsages>0),e(n,14,0,0===t.perk.maxUsages)},function(e,n){var t=n.component;e(n,4,0,t.getPerkName()),e(n,5,0,Il(1,"",t.id,"")),e(n,6,0,t.perk.description),e(n,9,0,t.perk.cost)})}function IT(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(1,114688,null,0,Rp,[],{name:[0,"name"]},null)],function(e,n){e(n,1,0,"tick")},null)}function yT(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),us(1,null,[" Usages: ","/"," "]))],null,function(e,n){var t=n.component;e(n,1,0,t.perk.usages,t.perk.maxUsages)})}function _T(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),us(-1,null,[" Usages: unlimited "]))],null,null)}function AT(e){return cs(0,[(e()(),Kr(0,0,null,null,16,"div",[["appTooltip",""],["class","tooltip"],["id","wrapperNotAvailable"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==Ql(e,1).onmousemove(t)&&l),l},null,null)),ci(1,16384,null,0,Op,[],{elementId:[0,"elementId"]},null),(e()(),Kr(2,0,null,null,4,"div",[["id","titleGrey"]],null,null,null,null,null)),(e()(),Kr(3,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,IT)),ci(5,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),us(6,null,[""," "])),(e()(),Kr(7,0,null,null,9,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),us(8,null,[" ",""])),(e()(),Kr(9,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(10,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),us(11,null,[" Cost: "," RP "])),(e()(),Kr(12,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,yT)),ci(14,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,_T)),ci(16,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.id),e(n,5,0,t.perk.usages===t.perk.maxUsages&&t.perk.maxUsages>0),e(n,14,0,t.perk.maxUsages>0),e(n,16,0,0===t.perk.maxUsages)},function(e,n){var t=n.component;e(n,6,0,t.getPerkName()),e(n,7,0,Il(1,"",t.id,"")),e(n,8,0,t.perk.description),e(n,11,0,t.perk.cost)})}function wT(e){return cs(0,[(e()(),$r(16777216,null,null,1,null,CT)),ci(1,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,AT)),ci(3,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.isAvailable()),e(n,3,0,!t.isAvailable())},null)}class NT{constructor(e,n){this.logService=e,this.royalService=n}ngOnInit(){}buyRoyalPoints(){this.royalService.buyRoyalPoints()}getRoyalPoints(){return this.royalService.getRoyalPoints()}getRoyalPerks(){return this.royalService.getRoyalPerks()}isGoldenFishCaught(){return this.royalService.isGoldenFishCaught()}isGoldenEggFound(){return this.royalService.isGoldenEggLaid()}isGoldenApplePicked(){return this.royalService.isGoldenApplePicked()}getOneTimeUseRoyalPerks(){return this.royalService.getRoyalPerks().filter(e=>e.perk===Eu.MOTIVATION_SPEECH||e.perk===Eu.JESTER||e.perk===Eu.CALL_TO_ARMS)}getPermanentUseRoyalPerks(){return this.royalService.getRoyalPerks().filter(e=>e.perk!==Eu.MOTIVATION_SPEECH&&e.perk!==Eu.JESTER&&e.perk!==Eu.CALL_TO_ARMS)}}var PT=Zt({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{margin:5px;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}.bold[_ngcontent-%COMP%]{font-weight:600}app-royal-perk[_ngcontent-%COMP%]{font-size:1em;display:inline-block;width:30%;margin:4px 8px;cursor:pointer}#goldenItems[_ngcontent-%COMP%]{margin-top:10px}.groupTitle[_ngcontent-%COMP%]{font-weight:700;font-size:1.1em;text-align:center}"]],data:{}});function kT(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"app-royal-perk",[],null,null,null,wT,OT)),ci(1,114688,null,0,bT,[Km],{perk:[0,"perk"]},null)],function(e,n){e(n,1,0,n.context.$implicit)},null)}function xT(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"app-royal-perk",[],null,null,null,wT,OT)),ci(1,114688,null,0,bT,[Km],{perk:[0,"perk"]},null)],function(e,n){e(n,1,0,n.context.$implicit)},null)}function MT(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(2,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null)],function(e,n){e(n,2,0,"fish","resources","golden fish")},null)}function DT(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(2,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null)],function(e,n){e(n,2,0,"egg","resources","golden egg")},null)}function LT(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(2,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null)],function(e,n){e(n,2,0,"apple","resources","golden apple")},null)}function FT(e){return cs(0,[(e()(),Kr(0,0,null,null,33,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),us(-1,null,["Royal perks"])),(e()(),Kr(3,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(4,0,null,null,6,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["You have "])),(e()(),Kr(6,0,null,null,1,"span",[["class","bold"]],null,null,null,null,null)),(e()(),us(7,null,["",""])),(e()(),us(-1,null,[" royal points."])),(e()(),Kr(9,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),us(-1,null,[" You can use them to acquire special upgrades."])),(e()(),Kr(11,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),Kr(12,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.buyRoyalPoints()&&l),l},null,null)),(e()(),us(-1,null,["Buy Royal points"])),(e()(),Kr(14,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),Kr(15,0,null,null,1,"div",[["class","groupTitle"]],null,null,null,null,null)),(e()(),us(-1,null,["One time use perks"])),(e()(),$r(16777216,null,null,1,null,kT)),ci(18,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),(e()(),Kr(19,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Kr(20,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),Kr(21,0,null,null,1,"div",[["class","groupTitle"]],null,null,null,null,null)),(e()(),us(-1,null,["Permanent perks"])),(e()(),$r(16777216,null,null,1,null,xT)),ci(24,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),(e()(),Kr(25,0,null,null,8,"div",[["id","goldenItems"]],null,null,null,null,null)),(e()(),Kr(26,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),us(-1,null,["Golden items found:"])),(e()(),$r(16777216,null,null,1,null,MT)),ci(29,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,DT)),ci(31,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,LT)),ci(33,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,18,0,t.getOneTimeUseRoyalPerks()),e(n,24,0,t.getPermanentUseRoyalPerks()),e(n,29,0,t.isGoldenFishCaught()),e(n,31,0,t.isGoldenEggFound()),e(n,33,0,t.isGoldenApplePicked())},function(e,n){e(n,7,0,n.component.getRoyalPoints())})}function HT(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"app-royal",[],null,null,null,FT,PT)),ci(1,114688,null,0,NT,[Bm,Km],null,null)],function(e,n){e(n,1,0)},null)}var UT=Gl("app-royal",NT,HT,{},{},[]),GT=["#wrapper[_ngcontent-%COMP%]{height:100%;max-height:100%;font-size:1em}#buttons[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{font-size:.9em;padding:7px 10px}#content[_ngcontent-%COMP%]{margin:.5%;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:94%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#side[_ngcontent-%COMP%]{float:right;font-size:.9em;width:30%;text-align:center}#filters[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-pack:end;justify-content:flex-end}#side[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:.8em;margin:0;padding:0;border:none;outline:0}.buildingsWrapper[_ngcontent-%COMP%]{height:84.9%}.buildings[_ngcontent-%COMP%]{display:-webkit-box;display:flex;flex-wrap:wrap;height:100%;border:2px solid #000;overflow-y:auto;align-content:flex-start}.buildings[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}#title[_ngcontent-%COMP%]{text-align:center;border:2px solid #000;border-bottom:none}.title[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;text-align:center;border:2px solid #000;border-bottom:none}.page[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:auto;text-align:center;border-right:2px solid #000;cursor:pointer}.activePage[_ngcontent-%COMP%]{background-color:var(--active-colour)}.page[_ngcontent-%COMP%]:last-of-type{border-right:none}.off[_ngcontent-%COMP%]{background-color:#555}.buildingRegularWrapper[_ngcontent-%COMP%]{display:-webkit-box;display:flex;flex-wrap:wrap;margin:.6%}.buildingDropWrapper[_ngcontent-%COMP%]{display:-webkit-box;display:flex;margin:.6%;cursor:move}.buildingDropWrapper[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center}#allControl[_ngcontent-%COMP%]{margin-left:auto;width:108px;display:inline-block}#allControl[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:4px}"];class BT{constructor(e,n,t,l){this.servicesService=e,this.resourcesService=n,this.effectsService=t,this.gameService=l,this.id=Math.random()}ngOnInit(){this.building.hasBuff()&&(this.buildingBuff=this.building.getBuff())}hasResource(e){return 0===this.resourcesService.hasResource(e.key,e.value,"Building buff",!0)}getResourceName(e){return Pu.prepareResourceName(e)}buff(){const e=this.servicesService.getService(xu.MODAL);if(this.building.hasBuff()&&this.buffsEnabled())if(this.building.isBuffed())e.info("This building is already buffed");else{const e=this.building.getBuff();this.resourcesService.decreaseResources(e.cost,"Building buff",!0)&&this.effectsService.addBuildingEffect(new Du(e.name,this.building.getBuildingType(),e.effect,e.duration,this.building.id))}else e.info("This building cannot be buffed")}buffsEnabled(){return this.gameService.isEnabled(bu.BUFFS)}}var WT=Zt({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{cursor:pointer}img[_ngcontent-%COMP%]{height:24px;width:24px}hr[_ngcontent-%COMP%]{border-color:#000}.notMet[_ngcontent-%COMP%]{color:var(--negative-colour)}"]],data:{}});function VT(e){return cs(0,[(e()(),Kr(0,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),us(1,null,[""," "])),(e()(),Kr(2,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(3,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){e(n,3,0,n.component.getResourceName(n.parent.context.$implicit.key),"resources")},function(e,n){e(n,1,0,n.parent.context.$implicit.value)})}function zT(e){return cs(0,[(e()(),Kr(0,0,null,null,3,"div",[["class","notMet"]],null,null,null,null,null)),(e()(),us(1,null,[""," "])),(e()(),Kr(2,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(3,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){e(n,3,0,n.component.getResourceName(n.parent.context.$implicit.key),"resources")},function(e,n){e(n,1,0,n.parent.context.$implicit.value)})}function YT(e){return cs(0,[(e()(),Kr(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,VT)),ci(2,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,zT)),ci(4,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.hasResource(n.context.$implicit)),e(n,4,0,!t.hasResource(n.context.$implicit))},null)}function $T(e){return cs(0,[(e()(),Kr(0,0,null,null,10,"div",[["appTooltip",""],["class","tooltip"],["id","buff"]],null,[[null,"click"],[null,"mousemove"]],function(e,n,t){var l=!0,i=e.component;return"mousemove"===n&&(l=!1!==Ql(e,1).onmousemove(t)&&l),"click"===n&&(l=!1!==i.buff()&&l),l},null,null)),ci(1,16384,null,0,Op,[],{elementId:[0,"elementId"]},null),(e()(),Kr(2,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/buff.svg"]],null,null,null,null,null)),(e()(),Kr(3,0,null,null,7,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),us(4,null,[" ",""])),(e()(),Kr(5,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),us(6,null,[" ","% buff for "," days "])),(e()(),Kr(7,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),$r(16777216,null,null,2,null,YT)),ci(9,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),hi(0,ra,[It])],function(e,n){var t=n.component;e(n,1,0,0-t.id),e(n,9,0,qt(n,9,0,Ql(n,10).transform(t.buildingBuff.cost)))},function(e,n){var t=n.component;e(n,3,0,Il(1,"",0-t.id,"")),e(n,4,0,t.buildingBuff.name),e(n,6,0,t.buildingBuff.effect,t.buildingBuff.duration)})}function KT(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,$T)),ci(2,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.buffsEnabled()&&t.building.hasBuff()&&!t.building.isBuffed())},null)}class jT{constructor(e,n){this.resourcesService=e,this.servicesService=n,this.id=Math.random()}ngOnInit(){}hasResource(e){return 0===this.resourcesService.hasResource(e.key,e.value,this.building.getName()+" upgrade",!0)}getResourceName(e){return Pu.prepareResourceName(e)}upgrade(){this.parentRegion.upgradeBuilding(this.building.getBuildingId())}}var qT=Zt({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{cursor:pointer}img[_ngcontent-%COMP%]{height:24px;width:24px}hr[_ngcontent-%COMP%]{border-color:#000}.notMet[_ngcontent-%COMP%]{color:var(--negative-colour)}"]],data:{}});function XT(e){return cs(0,[(e()(),Kr(0,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),us(1,null,[""," "])),(e()(),Kr(2,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(3,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){e(n,3,0,n.component.getResourceName(n.parent.context.$implicit.key),"resources")},function(e,n){e(n,1,0,n.parent.context.$implicit.value)})}function QT(e){return cs(0,[(e()(),Kr(0,0,null,null,3,"div",[["class","notMet"]],null,null,null,null,null)),(e()(),us(1,null,[""," "])),(e()(),Kr(2,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(3,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){e(n,3,0,n.component.getResourceName(n.parent.context.$implicit.key),"resources")},function(e,n){e(n,1,0,n.parent.context.$implicit.value)})}function ZT(e){return cs(0,[(e()(),Kr(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,XT)),ci(2,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,QT)),ci(4,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.hasResource(n.context.$implicit)),e(n,4,0,!t.hasResource(n.context.$implicit))},null)}function JT(e){return cs(0,[(e()(),Kr(0,0,null,null,8,"div",[["appTooltip",""],["class","tooltip"],["id","upgrade"]],null,[[null,"click"],[null,"mousemove"]],function(e,n,t){var l=!0,i=e.component;return"mousemove"===n&&(l=!1!==Ql(e,1).onmousemove(t)&&l),"click"===n&&(l=!1!==i.upgrade()&&l),l},null,null)),ci(1,16384,null,0,Op,[],{elementId:[0,"elementId"]},null),(e()(),Kr(2,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/upgrade.svg"]],null,null,null,null,null)),(e()(),Kr(3,0,null,null,5,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),us(4,null,[" Upgrade to level "," "])),(e()(),Kr(5,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),$r(16777216,null,null,2,null,ZT)),ci(7,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),hi(0,ra,[It])],function(e,n){var t=n.component;e(n,1,0,0-t.id),e(n,7,0,qt(n,7,0,Ql(n,8).transform(t.building.getUpgradeCost())))},function(e,n){var t=n.component;e(n,3,0,Il(1,"",0-t.id,"")),e(n,4,0,t.building.getBuildingLevel()+1)})}function eC(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,JT)),ci(2,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,2,0,n.component.building.hasUpgrade())},null)}class nC{constructor(){}ngOnInit(){}isTextValue(e){return e===bS.TEXT}isButtonValue(e){return e===bS.BUTTON}isTwoButtonValue(e){return e===bS.TWO_BUTTON}isProgressValue(e){return e===bS.PROGRESS_BAR}isDropdownValue(e){return e===bS.DROPDOWN}isIconValue(e){return e===bS.ICON}isButtonCheckboxValue(e){return e===bS.BUTTON_CHECKBOX}buildingCallback(e){this.building.callback(e)}}var tC=Zt({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{font-size:1.3em}.iconsLine[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}.iconsLine[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:auto}.line[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:1px 4px}button[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{font-size:.9em}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}.icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:2px;-webkit-box-flex:0;flex:0 0 auto}"]],data:{}});function lC(e){return cs(0,[(e()(),Kr(0,0,null,null,5,"span",[],null,null,null,null,null)),(e()(),Kr(1,0,null,null,4,"span",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(2,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Kr(3,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(4,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Kr(5,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null))],function(e,n){e(n,4,0,n.context.$implicit.name,n.context.$implicit.path)},function(e,n){e(n,2,0,n.context.$implicit.prefix),e(n,5,0,n.context.$implicit.suffix)})}function iC(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"span",[["class","line iconsLine"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,lC)),ci(2,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.building.getLine(t.line).getValue())},null)}function rC(e){return cs(0,[(e()(),Kr(0,0,null,null,0,"span",[["class","line"]],[[8,"innerHTML",1]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,0,0,t.building.getLine(t.line).getValue())})}function sC(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"span",[["class","line"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.buildingCallback(i.building.getLine(i.line).getValue().callbackValue)&&l),l},null,null)),(e()(),us(2,null,[""," "]))],null,function(e,n){var t=n.component;e(n,2,0,t.building.getLine(t.line).getValue().buttonText)})}function uC(e){return cs(0,[(e()(),Kr(0,0,null,null,10,"span",[["class","line"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.buildingCallback(i.building.getLine(i.line).getValue().callbackValue)&&l),l},null,null)),(e()(),us(2,null,[""," "])),(e()(),Kr(3,0,null,null,7,"label",[],null,null,null,null,null)),(e()(),Kr(4,0,null,null,5,"input",[["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"change"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==Ql(e,5).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==Ql(e,5).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.building.getLine(i.line).getValue().checkboxState=t)&&l),"click"===n&&(l=!1!==i.buildingCallback(i.building.getLine(i.line).getValue().checkboxCallbackValue)&&l),l},null,null)),ci(5,16384,null,0,_p,[ct,rt],null,null),di(1024,null,yp,function(e){return[e]},[_p]),ci(7,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(9,16384,null,0,Mp,[[4,xp]],null,null),(e()(),us(10,null,[""," "]))],function(e,n){var t=n.component;e(n,7,0,t.building.getLine(t.line).getValue().checkboxState)},function(e,n){var t=n.component;e(n,2,0,t.building.getLine(t.line).getValue().buttonText),e(n,4,0,Ql(n,9).ngClassUntouched,Ql(n,9).ngClassTouched,Ql(n,9).ngClassPristine,Ql(n,9).ngClassDirty,Ql(n,9).ngClassValid,Ql(n,9).ngClassInvalid,Ql(n,9).ngClassPending),e(n,10,0,t.building.getLine(t.line).getValue().checkboxLabel)})}function oC(e){return cs(0,[(e()(),Kr(0,0,null,null,5,"span",[["class","line"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.buildingCallback(i.building.getLine(i.line).getValue().callback1Value)&&l),l},null,null)),(e()(),us(2,null,["",""])),(e()(),Kr(3,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Kr(4,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.buildingCallback(i.building.getLine(i.line).getValue().callback2Value)&&l),l},null,null)),(e()(),us(5,null,["",""]))],null,function(e,n){var t=n.component;e(n,2,0,t.building.getLine(t.line).getValue().button1Text),e(n,3,0,t.building.getLine(t.line).getValue().textBetween),e(n,5,0,t.building.getLine(t.line).getValue().button2Text)})}function aC(e){return cs(0,[(e()(),Kr(0,0,null,null,3,"option",[],null,null,null,null,null)),ci(1,147456,null,0,Xp,[rt,ct,[2,qp]],{value:[0,"value"]},null),ci(2,147456,null,0,Jp,[rt,ct,[8,null]],{value:[0,"value"]},null),(e()(),us(3,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,3,0,n.context.$implicit)})}function cC(e){return cs(0,[(e()(),Kr(0,0,null,null,8,"span",[["class","line"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,7,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==Ql(e,2).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,2).onTouched()&&l),"change"===n&&(l=!1!==i.buildingCallback(t)&&l),"ngModelChange"===n&&(l=!1!==(i.building.getLine(i.line).getValue().selected=t)&&l),l},null,null)),ci(2,16384,null,0,qp,[ct,rt],null,null),di(1024,null,yp,function(e){return[e]},[qp]),ci(4,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(6,16384,null,0,Mp,[[4,xp]],null,null),(e()(),$r(16777216,null,null,1,null,aC)),ci(8,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,4,0,t.building.getLine(t.line).getValue().selected),e(n,8,0,t.building.getLine(t.line).getValue().values)},function(e,n){e(n,1,0,Ql(n,6).ngClassUntouched,Ql(n,6).ngClassTouched,Ql(n,6).ngClassPristine,Ql(n,6).ngClassDirty,Ql(n,6).ngClassValid,Ql(n,6).ngClassInvalid,Ql(n,6).ngClassPending)})}function hC(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"app-progress-bar",[],null,null,null,rR,tR)),ci(1,638976,null,0,nR,[Lm],{progress:[0,"progress"],text:[1,"text"]},null)],function(e,n){var t=n.component;e(n,1,0,t.building.getLine(t.line).getValue().value,t.building.getLine(t.line).getValue().label)},null)}function dC(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"span",[["class","line"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,hC)),ci(2,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.building.getLine(t.line).getValue().value>=0)},null)}function gC(e){return cs(0,[(e()(),Kr(0,0,null,null,14,"span",[["id","wrapper"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,iC)),ci(2,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,rC)),ci(4,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,sC)),ci(6,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,uC)),ci(8,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,oC)),ci(10,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,cC)),ci(12,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,dC)),ci(14,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.isIconValue(t.building.getLine(t.line).getValueType())),e(n,4,0,t.isTextValue(t.building.getLine(t.line).getValueType())),e(n,6,0,t.isButtonValue(t.building.getLine(t.line).getValueType())),e(n,8,0,t.isButtonCheckboxValue(t.building.getLine(t.line).getValueType())),e(n,10,0,t.isTwoButtonValue(t.building.getLine(t.line).getValueType())),e(n,12,0,t.isDropdownValue(t.building.getLine(t.line).getValueType())),e(n,14,0,t.isProgressValue(t.building.getLine(t.line).getValueType()))},null)}function pC(e){return cs(0,[(e()(),$r(16777216,null,null,1,null,gC)),ci(1,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,null!=t.line&&t.building)},null)}class mC{constructor(e,n,t,l,i,r,s){this.modalService=e,this.servicesService=n,this.resourcesService=t,this.managementService=l,this.villageService=i,this.optionsService=r,this.logService=s,this.demolishMode=!1,this.combineMode=!1,this.splitMode=!1,this.arrangeMode=!1,this.lines=vS,this.id=Math.random(),this.lastEffectsDisplayValue=0,this.hasEffectsDisplayChanged=!1}ngOnInit(){}fitText(){if(this.centerRef){this.hasEffectsDisplayChanged=!1;const e=15,n=this.centerRef.nativeElement;let t=n.clientWidth,l=n.scrollWidth,i=parseInt(window.getComputedStyle(n,null).getPropertyValue("font-size"),10);if(l>t)i=(i=Math.ceil(i*t/l))>e?i=e:i-1,n.style.fontSize=i+"px";else for(;l===t&&i<e;)i=(i=Math.ceil(i)+1)>e?i=e:i,n.style.fontSize=i+"px",(l=n.scrollWidth)>(t=n.clientWidth)&&(n.style.fontSize=i-1+"px")}}stop(){this.building.isWorking()?this.building.stopProduction():this.building.startProduction()||this.modalService.info("Cannot unlock production of "+this.building.getName()+". Number of free workers: "+this.resourcesService.getPeople())}isStoppable(){return this.building.isStoppable()}isWorking(){return this.building.isWorking()}demolish(){if(void 0!==this.building.getMaxSize&&this.villageService.getPopulation()>this.villageService.getPopulationCap()-this.building.getMaxSize()){this.modalService.open(Lu.CONFIRM),this.modalService.setModalText("You don't have enough housing space to move this building occupants.<br> People that won't find new home will leave the village<br>Do you still want to demolish this building?");const e=this.modalService.registerForConfirmation().subscribe(n=>{e.unsubscribe(),n&&this.building.prepareDemolish()&&this.parentRegion.demolish(this.building)})}else if(this.building.isUsedUp())this.building.prepareDemolish()&&this.parentRegion.demolish(this.building);else{this.modalService.setModalText("Are you sure you want to demolish "+this.building.getName()+"?"),this.modalService.open(Lu.CONFIRM);const e=this.modalService.registerForConfirmation().subscribe(n=>{e.unsubscribe(),n&&this.building.prepareDemolish()&&this.parentRegion.demolish(this.building)})}}canCombine(){return this.parentRegion.canCombine(this.building)}combine(){this.parentRegion.combine(this.building)}split(){this.parentRegion.split(this.building)}areComplexWorkersEnabled(){return this.managementService.getComplexWorkers()}openWorkersManagement(e){e.ctrlKey?this.building.getWorkSettings().enabled?(this.building.getWorkSettings().enabled=!1,this.stop()):this.stop():e.shiftKey?this.building.getWorkSettings().enabled=!this.building.getWorkSettings().enabled:(this.modalService.open(Lu.WORK_MANAGEMENT),this.modalService.setBuilding(this.building))}round(e){return e%1!=0?Pu.round(e,2):e}arrange(){this.parentRegion.move(this.building)}canMove(){return this.parentRegion.canMove(this.building)}getDisplayableEffectsValue(){const e=this.building.getDisplayableEffectsValue();return this.lastEffectsDisplayValue!==e&&(this.lastEffectsDisplayValue=e,this.hasEffectsDisplayChanged=!0),e}isTextFittingEnabled(){return this.optionsService.getOption(Dm.AUTO_TEXT_FITTING)}ngAfterViewChecked(){this.hasEffectsDisplayChanged&&this.isTextFittingEnabled()&&this.fitText()}}var fC=Zt({encapsulation:0,styles:[["[_nghost-%COMP%]{height:15%;min-height:125px;width:10%;min-width:206px;border:1px solid #000;overflow:hidden}#wrapper[_ngcontent-%COMP%]{position:relative;height:100%;text-align:center;font-size:.7em;overflow:hidden}.usedUp[_ngcontent-%COMP%]{background-color:rgba(126,122,121,.6)}#arrange[_ngcontent-%COMP%], #combine[_ngcontent-%COMP%], #demolish[_ngcontent-%COMP%], #split[_ngcontent-%COMP%]{position:absolute;font-weight:600;font-size:2em;top:0;left:0;width:100%;height:100%;background-color:rgba(126,122,121,.7);-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;display:-webkit-box;display:flex;cursor:pointer}#demolishText[_ngcontent-%COMP%], .combineText[_ngcontent-%COMP%]{display:block}#nameBar[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;width:100%;height:24px;font-size:1.4em;font-weight:700;border-bottom:1px solid #000;white-space:nowrap}#left[_ngcontent-%COMP%], #right[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1 0 24px}#center[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1 0 152px;font-size:.8em;overflow:hidden;line-height:24px}.control[_ngcontent-%COMP%]{float:right;font-size:.6em;margin-right:2px;cursor:pointer}.control[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px;height:24px}#lines[_ngcontent-%COMP%]{position:relative;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}app-progress-bar[_ngcontent-%COMP%]{display:block;height:18px}app-building-line[_ngcontent-%COMP%]{height:20px;display:block;margin-top:3px;-webkit-box-flex:1;flex:1 0 auto}img[_ngcontent-%COMP%]{height:24px}.details[_ngcontent-%COMP%]{float:left;font-size:.75em;margin-right:2px}.positiveEffects[_ngcontent-%COMP%]{font-size:.7em;color:var(--positive-colour)}.negativeEffects[_ngcontent-%COMP%]{font-size:.7em;color:var(--negative-colour)}.tooltipSpan[_ngcontent-%COMP%]{font-size:1.5em;font-weight:100;text-align:left}.tooltipSpan[_ngcontent-%COMP%]   #title[_ngcontent-%COMP%]{text-align:center}.tooltipSpan[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border-color:#000}app-building-buff[_ngcontent-%COMP%]{position:absolute;right:0;top:0}app-building-upgrade[_ngcontent-%COMP%]{position:absolute;left:-2px;top:0}"]],data:{}});function SC(e){return cs(0,[(e()(),Kr(0,0,null,null,7,"span",[["appTooltip",""],["class","details tooltip"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==Ql(e,1).onmousemove(t)&&l),l},null,null)),ci(1,16384,null,0,Op,[],{elementId:[0,"elementId"]},null),(e()(),Kr(2,0,null,null,0,"img",[["alt","details"],["draggable","false"],["ondragstart","return false;"],["src","assets/details.svg"]],null,null,null,null,null)),(e()(),Kr(3,0,null,null,4,"span",[["class","tooltipSpan"]],[[8,"id",0]],null,null,null,null)),(e()(),Kr(4,0,null,null,1,"div",[["id","title"]],null,null,null,null,null)),(e()(),us(5,null,["",""])),(e()(),Kr(6,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Kr(7,0,null,null,0,"div",[],[[8,"innerHTML",1]],null,null,null,null))],function(e,n){e(n,1,0,n.component.id)},function(e,n){var t=n.component;e(n,3,0,Il(1,"",t.id,"")),e(n,5,0,t.building.getName()),e(n,7,0,t.building.getDetails())})}function EC(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[["class","positiveEffects"]],null,null,null,null,null)),(e()(),us(1,null,["(+","%)"]))],null,function(e,n){var t=n.component;e(n,1,0,t.round(t.getDisplayableEffectsValue()))})}function vC(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[["class","negativeEffects"]],null,null,null,null,null)),(e()(),us(1,null,["(","%)"]))],null,function(e,n){var t=n.component;e(n,1,0,t.round(t.getDisplayableEffectsValue()))})}function bC(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[["class","control"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.stop()&&l),l},null,null)),(e()(),Kr(1,0,null,null,0,"img",[["alt","on"],["draggable","false"],["ondragstart","return false;"],["src","assets/gear.svg"],["title","disable"]],null,null,null,null,null))],null,null)}function OC(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[["class","control"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.stop()&&l),l},null,null)),(e()(),Kr(1,0,null,null,0,"img",[["alt","off"],["draggable","false"],["ondragstart","return false;"],["src","assets/gear_off.svg"],["title","enable"]],null,null,null,null,null))],null,null)}function RC(e){return cs(0,[(e()(),Kr(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,bC)),ci(2,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,OC)),ci(4,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(0,null,null,0))],function(e,n){var t=n.component;e(n,2,0,t.isStoppable()&&t.isWorking()),e(n,4,0,t.isStoppable()&&!t.isWorking())},null)}function TC(e){return cs(0,[(e()(),Kr(0,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/complex_management_on_on.svg"],["title","work settings"]],null,null,null,null,null))],null,null)}function CC(e){return cs(0,[(e()(),Kr(0,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/complex_management_on_off.svg"],["title","work settings"]],null,null,null,null,null))],null,null)}function IC(e){return cs(0,[(e()(),Kr(0,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/complex_management_off_on.svg"],["title","work settings"]],null,null,null,null,null))],null,null)}function yC(e){return cs(0,[(e()(),Kr(0,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/complex_management_off_off.svg"],["title","work settings"]],null,null,null,null,null))],null,null)}function _C(e){return cs(0,[(e()(),Kr(0,0,null,null,8,"span",[["class","control"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.openWorkersManagement(t)&&l),l},null,null)),(e()(),$r(16777216,null,null,1,null,TC)),ci(2,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,CC)),ci(4,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,IC)),ci(6,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,yC)),ci(8,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.building.getWorkSettings().enabled&&t.building.isWorking()),e(n,4,0,t.building.getWorkSettings().enabled&&!t.building.isWorking()),e(n,6,0,!t.building.getWorkSettings().enabled&&t.building.isWorking()),e(n,8,0,!t.building.getWorkSettings().enabled&&!t.building.isWorking())},null)}function AC(e){return cs(0,[(e()(),Kr(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,_C)),ci(2,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(0,null,null,0))],function(e,n){e(n,2,0,n.component.isStoppable())},null)}function wC(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"div",[["id","demolish"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.demolish()&&l),l},null,null)),(e()(),Kr(1,0,null,null,1,"span",[["id","demolishText"]],null,null,null,null,null)),(e()(),us(-1,null,["Demolish"]))],null,null)}function NC(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"div",[["id","combine"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.combine()&&l),l},null,null)),(e()(),Kr(1,0,null,null,1,"span",[["class","combineText"]],null,null,null,null,null)),(e()(),us(-1,null,["Combine"]))],null,null)}function PC(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"div",[["id","split"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.split()&&l),l},null,null)),(e()(),Kr(1,0,null,null,1,"span",[["class","combineText"]],null,null,null,null,null)),(e()(),us(-1,null,["Split"]))],null,null)}function kC(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"div",[["id","arrange"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.arrange()&&l),l},null,null)),(e()(),Kr(1,0,null,null,1,"span",[["class","combineText"]],null,null,null,null,null)),(e()(),us(-1,null,["Move"]))],null,null)}function xC(e){return cs(0,[Zr(671088640,1,{centerRef:0}),(e()(),Kr(1,0,null,null,39,"div",[["id","wrapper"]],null,null,null,null,null)),di(512,null,Uo,Go,[Ct,It,rt,ct]),ci(3,278528,null,0,Wo,[Uo],{ngClass:[0,"ngClass"]},null),rs(4,{usedUp:0}),(e()(),Kr(5,0,null,null,14,"div",[["id","nameBar"]],null,null,null,null,null)),(e()(),Kr(6,0,null,null,2,"div",[["id","left"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,SC)),ci(8,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(9,0,[[1,0],["center",1]],null,5,"div",[["id","center"]],null,null,null,null,null)),(e()(),us(10,null,[""," "])),(e()(),$r(16777216,null,null,1,null,EC)),ci(12,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,vC)),ci(14,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(15,0,null,null,4,"div",[["id","right"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,RC)),ci(17,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,AC)),ci(19,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(20,0,null,null,12,"div",[["id","lines"]],null,null,null,null,null)),(e()(),Kr(21,0,null,null,1,"app-building-buff",[],null,null,null,KT,WT)),ci(22,114688,null,0,BT,[Mm,Jm,nv,Ym],{building:[0,"building"]},null),(e()(),Kr(23,0,null,null,1,"app-building-upgrade",[],null,null,null,eC,qT)),ci(24,114688,null,0,jT,[Jm,Mm],{building:[0,"building"],parentRegion:[1,"parentRegion"]},null),(e()(),Kr(25,0,null,null,1,"app-building-line",[],null,null,null,pC,tC)),ci(26,114688,null,0,nC,[],{line:[0,"line"],building:[1,"building"]},null),(e()(),Kr(27,0,null,null,1,"app-building-line",[],null,null,null,pC,tC)),ci(28,114688,null,0,nC,[],{line:[0,"line"],building:[1,"building"]},null),(e()(),Kr(29,0,null,null,1,"app-building-line",[],null,null,null,pC,tC)),ci(30,114688,null,0,nC,[],{line:[0,"line"],building:[1,"building"]},null),(e()(),Kr(31,0,null,null,1,"app-building-line",[],null,null,null,pC,tC)),ci(32,114688,null,0,nC,[],{line:[0,"line"],building:[1,"building"]},null),(e()(),$r(16777216,null,null,1,null,wC)),ci(34,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,NC)),ci(36,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,PC)),ci(38,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,kC)),ci(40,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component,l=e(n,4,0,t.building.isUsedUp());e(n,3,0,l),e(n,8,0,t.building.hasDetails()),e(n,12,0,t.getDisplayableEffectsValue()>0),e(n,14,0,t.getDisplayableEffectsValue()<0),e(n,17,0,!t.building.isComplexManagement()||t.building.isComplexManagement()&&!t.areComplexWorkersEnabled()),e(n,19,0,t.building.isComplexManagement()&&t.areComplexWorkersEnabled()),e(n,22,0,t.building),e(n,24,0,t.building,t.parentRegion),e(n,26,0,t.lines.FIRST,t.building),e(n,28,0,t.lines.SECOND,t.building),e(n,30,0,t.lines.THIRD,t.building),e(n,32,0,t.lines.FOURTH,t.building),e(n,34,0,t.demolishMode&&t.building.isDemolishable()),e(n,36,0,t.combineMode&&t.building.isCombinable()&&t.canCombine()),e(n,38,0,t.splitMode&&t.building.isSplittable()),e(n,40,0,t.arrangeMode&&t.canMove())},function(e,n){e(n,10,0,n.component.building.getName())})}class MC{constructor(e){this.gameService=e}ngOnInit(){}isFortEnabled(){return this.gameService.isEnabled(bu.FORT)}isFieldEnabled(){return this.gameService.isEnabled(bu.FIELD)}isSeaEnabled(){return this.gameService.isEnabled(bu.SEA)}isMountainsEnabled(){return this.gameService.isEnabled(bu.MOUNTAINS)}isPlateauEnabled(){return this.gameService.isEnabled(bu.PLATEAU)}}var DC=Zt({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{display:-webkit-box;display:flex;height:100%;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}.entry[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:auto;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:100%;text-align:center;border-right:2px solid #000;cursor:pointer;text-decoration:none;color:#000;font-size:1em}.entry[_ngcontent-%COMP%]:last-of-type{border:none}.entry.active[_ngcontent-%COMP%]{background:var(--active-colour)}"]],data:{}});function LC(e){return cs(0,[(e()(),Kr(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/regions/fort"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==Ql(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),ci(1,671744,[[4,4]],0,Ug,[Fg,yd,Eo],{routerLink:[0,"routerLink"]},null),ci(2,1720320,null,2,Bg,[Fg,rt,ct,[2,Hg],[2,Ug]],{routerLinkActive:[0,"routerLinkActive"]},null),Zr(603979776,3,{links:1}),Zr(603979776,4,{linksWithHrefs:1}),(e()(),us(-1,null,["Fort"]))],function(e,n){e(n,1,0,"/regions/fort"),e(n,2,0,"active")},function(e,n){e(n,0,0,Ql(n,1).target,Ql(n,1).href)})}function FC(e){return cs(0,[(e()(),Kr(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/regions/field"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==Ql(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),ci(1,671744,[[8,4]],0,Ug,[Fg,yd,Eo],{routerLink:[0,"routerLink"]},null),ci(2,1720320,null,2,Bg,[Fg,rt,ct,[2,Hg],[2,Ug]],{routerLinkActive:[0,"routerLinkActive"]},null),Zr(603979776,7,{links:1}),Zr(603979776,8,{linksWithHrefs:1}),(e()(),us(-1,null,["Field"]))],function(e,n){e(n,1,0,"/regions/field"),e(n,2,0,"active")},function(e,n){e(n,0,0,Ql(n,1).target,Ql(n,1).href)})}function HC(e){return cs(0,[(e()(),Kr(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/regions/mountains"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==Ql(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),ci(1,671744,[[10,4]],0,Ug,[Fg,yd,Eo],{routerLink:[0,"routerLink"]},null),ci(2,1720320,null,2,Bg,[Fg,rt,ct,[2,Hg],[2,Ug]],{routerLinkActive:[0,"routerLinkActive"]},null),Zr(603979776,9,{links:1}),Zr(603979776,10,{linksWithHrefs:1}),(e()(),us(-1,null,["Mountains"]))],function(e,n){e(n,1,0,"/regions/mountains"),e(n,2,0,"active")},function(e,n){e(n,0,0,Ql(n,1).target,Ql(n,1).href)})}function UC(e){return cs(0,[(e()(),Kr(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/regions/plateau"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==Ql(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),ci(1,671744,[[12,4]],0,Ug,[Fg,yd,Eo],{routerLink:[0,"routerLink"]},null),ci(2,1720320,null,2,Bg,[Fg,rt,ct,[2,Hg],[2,Ug]],{routerLinkActive:[0,"routerLinkActive"]},null),Zr(603979776,11,{links:1}),Zr(603979776,12,{linksWithHrefs:1}),(e()(),us(-1,null,["Plateau"]))],function(e,n){e(n,1,0,"/regions/plateau"),e(n,2,0,"active")},function(e,n){e(n,0,0,Ql(n,1).target,Ql(n,1).href)})}function GC(e){return cs(0,[(e()(),Kr(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/regions/sea"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==Ql(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),ci(1,671744,[[14,4]],0,Ug,[Fg,yd,Eo],{routerLink:[0,"routerLink"]},null),ci(2,1720320,null,2,Bg,[Fg,rt,ct,[2,Hg],[2,Ug]],{routerLinkActive:[0,"routerLinkActive"]},null),Zr(603979776,13,{links:1}),Zr(603979776,14,{linksWithHrefs:1}),(e()(),us(-1,null,["Sea"]))],function(e,n){e(n,1,0,"/regions/sea"),e(n,2,0,"active")},function(e,n){e(n,0,0,Ql(n,1).target,Ql(n,1).href)})}function BC(e){return cs(0,[(e()(),Kr(0,0,null,null,22,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/regions/village"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==Ql(e,2).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),ci(2,671744,[[2,4]],0,Ug,[Fg,yd,Eo],{routerLink:[0,"routerLink"]},null),ci(3,1720320,null,2,Bg,[Fg,rt,ct,[2,Hg],[2,Ug]],{routerLinkActive:[0,"routerLinkActive"]},null),Zr(603979776,1,{links:1}),Zr(603979776,2,{linksWithHrefs:1}),(e()(),us(-1,null,["Village"])),(e()(),$r(16777216,null,null,1,null,LC)),ci(8,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(9,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/regions/forest"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==Ql(e,10).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),ci(10,671744,[[6,4]],0,Ug,[Fg,yd,Eo],{routerLink:[0,"routerLink"]},null),ci(11,1720320,null,2,Bg,[Fg,rt,ct,[2,Hg],[2,Ug]],{routerLinkActive:[0,"routerLinkActive"]},null),Zr(603979776,5,{links:1}),Zr(603979776,6,{linksWithHrefs:1}),(e()(),us(-1,null,["Forest"])),(e()(),$r(16777216,null,null,1,null,FC)),ci(16,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,HC)),ci(18,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,UC)),ci(20,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,GC)),ci(22,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,"/regions/village"),e(n,3,0,"active"),e(n,8,0,t.isFortEnabled()),e(n,10,0,"/regions/forest"),e(n,11,0,"active"),e(n,16,0,t.isFieldEnabled()),e(n,18,0,t.isMountainsEnabled()),e(n,20,0,t.isPlateauEnabled()),e(n,22,0,t.isSeaEnabled())},function(e,n){e(n,1,0,Ql(n,2).target,Ql(n,2).href),e(n,9,0,Ql(n,10).target,Ql(n,10).href)})}class WC{constructor(e){this.happinessService=e}ngOnInit(){}getHappiness(){return Pu.round(this.happinessService.getHappiness(),2)}getHappinessValue(){return this.happinessService.getHappiness()}}var VC=Zt({encapsulation:0,styles:[["[_nghost-%COMP%]{display:inline-block}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center}"]],data:{}});function zC(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(1,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"],margin:[2,"margin"]},null)],function(e,n){e(n,1,0,"angry","happiness","0 0 0 4px")},null)}function YC(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(1,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"],margin:[2,"margin"]},null)],function(e,n){e(n,1,0,"sad","happiness","0 0 0 4px")},null)}function $C(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(1,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"],margin:[2,"margin"]},null)],function(e,n){e(n,1,0,"neutral","happiness","0 0 0 4px")},null)}function KC(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(1,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"],margin:[2,"margin"]},null)],function(e,n){e(n,1,0,"happy","happiness","0 0 0 4px")},null)}function jC(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(1,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"],margin:[2,"margin"]},null)],function(e,n){e(n,1,0,"overjoyed","happiness","0 0 0 4px")},null)}function qC(e){return cs(0,[(e()(),Kr(0,0,null,null,11,"div",[["class","icon"],["id","wrapper"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,zC)),ci(2,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,YC)),ci(4,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,$C)),ci(6,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,KC)),ci(8,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,jC)),ci(10,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),us(11,null,[" ","%\n"]))],function(e,n){var t=n.component;e(n,2,0,t.getHappinessValue()>=0&&t.getHappinessValue()<=10),e(n,4,0,t.getHappinessValue()>10&&t.getHappinessValue()<=40),e(n,6,0,t.getHappinessValue()>40&&t.getHappinessValue()<=60),e(n,8,0,t.getHappinessValue()>60&&t.getHappinessValue()<=90),e(n,10,0,t.getHappinessValue()>90&&t.getHappinessValue()<=100)},function(e,n){e(n,11,0,n.component.getHappiness())})}class XC{constructor(e,n,t,l,i,r,s,u){this.modalService=e,this.landService=n,this.gameService=t,this.regionService=l,this.tutorialService=i,this.optionsService=r,this.changeDetectorRef=s,this.thisRegion=u,this.demolishMode=!1,this.arrangeMode=!1,this.combineMode=!1,this.splitMode=!1,this.filterBuilding=this.regionService.getFilterBuilding(),this.filterWorking=this.regionService.getFilterWorking(),this.currentPage=0,this.allBuildings=Ou.ALL,this.buildingStates=iv}ngOnInit(){this.tutorialService.checkRegionTutorial(this.thisRegion)}getUniqueBuildingsFromCurrentView(){const e=[];return this.regionService.buildings.forEach(n=>{e.includes(n.getBuildingType())||e.push(n.getBuildingType()),n.getBuildingType()!==Ou.CONSTRUCTION||e.includes(n.getConstructing())?n.getBuildingType()!==Ou.DECONSTRUCTION||e.includes(n.getDecontructing())||e.push(n.getDecontructing()):e.push(n.getConstructing())}),e}getBuildings(){const e=this.regionService.getBuildings().filter(e=>this.filterWorking===iv.ALL||this.filterWorking===iv.WORKING&&e.isWorking()||this.filterWorking===iv.IDLE&&!e.isWorking()&&e.isStoppable()).filter(e=>this.filterBuilding===Ou.ALL||e.getBuildingType()===Ou.CONSTRUCTION&&e.getConstructing()===this.filterBuilding||e.getBuildingType()===Ou.DECONSTRUCTION&&e.getDecontructing()===this.filterBuilding||e.getBuildingType()===this.filterBuilding);return 0!==e.length||this.filterBuilding===Ou.ALL||this.getUniqueBuildingsFromCurrentView().includes(this.filterBuilding)||(this.filterBuilding=Ou.ALL,this.regionService.setFilterBuildings(Ou.ALL)),e}getBuildingName(e){return Pu.prepareBuildingName(e)}updateFilter(e){this.filterBuilding=Ou[Ou[e.target.value]],this.regionService.setFilterBuildings(this.filterBuilding),this.currentPage=0}updateFilter2(e){this.filterWorking=Ou[Ou[e.target.value]],this.regionService.setFilterWorking(this.filterWorking),this.currentPage=0}openBuildModal(){this.demolishMode=!1,this.arrangeMode=!1,this.modalService.setRegion(this.thisRegion),this.modalService.open(Lu.BUILD)}getUnemployed(){return this.regionService.getUnemployed()}getFreeLand(){return this.landService.getLand()}toggleDemolishMode(){this.demolishMode=!this.demolishMode,this.arrangeMode=!1,this.splitMode=!1,this.clearCombineMode()}toggleArrangeMode(){this.arrangeMode=!this.arrangeMode,this.demolishMode=!1,this.splitMode=!1,this.clearCombineMode()}toggleCombineMode(){this.combineMode=!this.combineMode,this.splitMode=!1,this.demolishMode=!1,this.arrangeMode=!1}toggleSplitMode(){this.splitMode=!this.splitMode,this.combineMode=!1,this.demolishMode=!1,this.arrangeMode=!1}clearCombineMode(){this.combineMode=!1,this.regionService.clearCombineMode()}isUrbanPlanningEnabled(){return this.gameService.isEnabled(bu.URBAN_PLANNING)}hasCombinableBuildings(){return this.getBuildings().filter(e=>e.isCombinable()).length>1}hasSplittableBuildings(){return this.getBuildings().filter(e=>e.isSplittable()).length>=1}onKeydownHandler(e){this.demolishMode=!1,this.arrangeMode=!1,this.clearCombineMode()}enableAll(){this.getBuildings().filter(e=>e.isStoppable()).forEach(e=>e.startProduction())}disableAll(){this.getBuildings().filter(e=>e.isStoppable()).forEach(e=>e.stopProduction())}isPagedViewEnabled(){return this.optionsService.getOption(Dm.PAGED_VIEW)}getBuildingPerPage(){return this.optionsService.getOption(Dm.BUILDINGS_PER_PAGE)}getPagesNumber(){let e=Math.ceil(this.getBuildings().length/this.getBuildingPerPage());return 0===e&&(e=1),Array.apply(null,Array(e)).map(function(e,n){return n})}setPage(e){this.currentPage=e}getPagedBuildings(){const e=this.getBuildingPerPage();return this.getBuildings().slice(this.currentPage*e,this.currentPage*e+e)}autoSort(){this.modalService.open(Lu.CONFIRM),this.modalService.setModalText("Are you sure you want to <b>auto sort</b> buildings?");const e=this.modalService.registerForConfirmation().subscribe(n=>{e.unsubscribe(),n&&this.regionService.autoSort()})}}class QC extends XC{constructor(e,n,t,l,i,r,s,u,o){super(e,n,t,l,u,r,o,Hu.VILLAGE),this.landService=n,this.villageService=l,this.resourcesService=i,this.managementService=s}getPopulation(){return this.villageService.getPopulation()}getPopulationCap(){return this.villageService.getPopulationCap()}getTakenLand(){return this.landService.getTakenLand()}getSick(){return this.resourcesService.getSick()}getSicknessName(e){return Pu.prepareSicknessName(e)}}var ZC=Zt({encapsulation:0,styles:[GT,[".herbal[_ngcontent-%COMP%]{height:16px}"]],data:{}});function JC(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleDemolishMode()&&l),l},null,null)),(e()(),us(-1,null,["Demolish"]))],null,null)}function eI(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleDemolishMode()&&l),l},null,null)),(e()(),us(-1,null,["Stop"]))],null,null)}function nI(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleArrangeMode()&&l),l},null,null)),(e()(),us(-1,null,["Arrange"]))],null,null)}function tI(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleArrangeMode()&&l),l},null,null)),(e()(),us(-1,null,["Stop"]))],null,null)}function lI(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleCombineMode()&&l),l},null,null)),(e()(),us(-1,null,["Combine"]))],null,null)}function iI(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleCombineMode()&&l),l},null,null)),(e()(),us(-1,null,["Stop"]))],null,null)}function rI(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleSplitMode()&&l),l},null,null)),(e()(),us(-1,null,["Split"]))],null,null)}function sI(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleSplitMode()&&l),l},null,null)),(e()(),us(-1,null,["Stop"]))],null,null)}function uI(e){return cs(0,[(e()(),Kr(0,0,null,null,3,"option",[],null,null,null,null,null)),ci(1,147456,null,0,Xp,[rt,ct,[2,qp]],{value:[0,"value"]},null),ci(2,147456,null,0,Jp,[rt,ct,[8,null]],{value:[0,"value"]},null),(e()(),us(3,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,3,0,n.component.getBuildingName(n.context.$implicit))})}function oI(e){return cs(0,[(e()(),Kr(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),Kr(1,0,null,null,0,"img",[["alt",""],["class","herbal"],["src","assets/resources/herbal_medicine.svg"]],null,null,null,null,null))],null,null)}function aI(e){return cs(0,[(e()(),Kr(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),us(1,null,[" ",". "," ","% "])),is(2,2),(e()(),$r(16777216,null,null,1,null,oI)),ci(4,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,4,0,n.context.$implicit.medicine>0)},function(e,n){var t=n.context.index+1,l=n.component.getSicknessName(n.context.$implicit.sickness),i=qt(n,1,2,e(n,2,0,Ql(n.parent.parent,0),n.context.$implicit.progress,"0.0-0"));e(n,1,0,t,l,i)})}function cI(e){return cs(0,[(e()(),Kr(0,0,null,null,10,"span",[["appTooltip",""],["class","icon tooltip"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==Ql(e,1).onmousemove(t)&&l),l},null,null)),ci(1,16384,null,0,Op,[],{elementId:[0,"elementId"]},null),(e()(),Kr(2,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(3,114688,null,0,Rp,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),us(4,null,[" "," "])),(e()(),Kr(5,0,null,null,4,"span",[["id","sick"]],null,null,null,null,null)),(e()(),us(6,null,[" Sick: "," "])),(e()(),Kr(7,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,aI)),ci(9,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),(e()(),us(-1,null,[" \xa0\xa0\xa0 "]))],function(e,n){var t=n.component;e(n,1,0,"sick"),e(n,3,0,"sick","","0 0 0 2px"),e(n,9,0,t.getSick())},function(e,n){var t=n.component;e(n,4,0,t.getSick().length),e(n,6,0,t.getSick().length)})}function hI(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"app-building",[],null,null,null,xC,fC)),ci(2,8503296,null,0,mC,[Vm,Mm,Jm,Wv,sv,Lm,Bm],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,2,0,t.demolishMode,t.combineMode,t.splitMode,t.arrangeMode,n.context.$implicit,t.villageService)},null)}function dI(e){return cs(0,[(e()(),Kr(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),Kr(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["Buildings"])),(e()(),Kr(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,hI)),ci(6,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,6,0,n.component.getBuildings())},null)}function gI(e){return cs(0,[(e()(),Kr(0,0,null,null,4,"span",[["class","page"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.setPage(e.context.$implicit)&&l),l},null,null)),di(512,null,Uo,Go,[Ct,It,rt,ct]),ci(2,278528,null,0,Wo,[Uo],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),rs(3,{activePage:0}),(e()(),us(4,null,["page ",""]))],function(e,n){var t=e(n,3,0,n.component.currentPage===n.context.$implicit);e(n,2,0,"page",t)},function(e,n){e(n,4,0,n.context.$implicit+1)})}function pI(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"app-building",[],null,null,null,xC,fC)),ci(2,8503296,null,0,mC,[Vm,Mm,Jm,Wv,sv,Lm,Bm],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,2,0,t.demolishMode,t.combineMode,t.splitMode,t.arrangeMode,n.context.$implicit,t.villageService)},null)}function mI(e){return cs(0,[(e()(),Kr(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,gI)),ci(3,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),(e()(),Kr(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,pI)),ci(6,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,3,0,t.getPagesNumber()),e(n,6,0,t.getPagedBuildings())},null)}function fI(e){return cs(0,[hi(0,sa,[$i]),(e()(),Kr(1,0,null,null,85,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Kr(2,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),Kr(3,0,null,null,1,"app-top-menu",[],null,null,null,BC,DC)),ci(4,114688,null,0,MC,[Ym],null,null),(e()(),Kr(5,0,null,null,81,"div",[["id","content"]],null,null,null,null,null)),(e()(),Kr(6,0,null,null,54,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Kr(7,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.openBuildModal()&&l),l},null,null)),(e()(),us(-1,null,["Build"])),(e()(),$r(16777216,null,null,1,null,JC)),ci(10,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,eI)),ci(12,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,nI)),ci(14,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,tI)),ci(16,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(17,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.autoSort()&&l),l},null,null)),(e()(),us(-1,null,["Sort"])),(e()(),$r(16777216,null,null,1,null,lI)),ci(20,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,iI)),ci(22,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,rI)),ci(24,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,sI)),ci(26,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(27,0,null,null,33,"div",[["id","side"]],null,null,null,null,null)),(e()(),us(-1,null,[" Filter:"])),(e()(),Kr(29,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(30,0,null,null,30,"div",[["id","filters"]],null,null,null,null,null)),(e()(),Kr(31,0,null,null,11,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==Ql(e,32).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,32).onTouched()&&l),"change"===n&&(l=!1!==i.updateFilter(t)&&l),"ngModelChange"===n&&(l=!1!==(i.filterBuilding=t)&&l),l},null,null)),ci(32,16384,null,0,qp,[ct,rt],null,null),di(1024,null,yp,function(e){return[e]},[qp]),ci(34,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(36,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(37,0,null,null,3,"option",[],null,null,null,null,null)),ci(38,147456,null,0,Xp,[rt,ct,[2,qp]],{value:[0,"value"]},null),ci(39,147456,null,0,Jp,[rt,ct,[8,null]],{value:[0,"value"]},null),(e()(),us(40,null,["",""])),(e()(),$r(16777216,null,null,1,null,uI)),ci(42,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),(e()(),Kr(43,0,null,null,17,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==Ql(e,44).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,44).onTouched()&&l),"change"===n&&(l=!1!==i.updateFilter2(t)&&l),"ngModelChange"===n&&(l=!1!==(i.filterWorking=t)&&l),l},null,null)),ci(44,16384,null,0,qp,[ct,rt],null,null),di(1024,null,yp,function(e){return[e]},[qp]),ci(46,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(48,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(49,0,null,null,3,"option",[],null,null,null,null,null)),ci(50,147456,null,0,Xp,[rt,ct,[2,qp]],{value:[0,"value"]},null),ci(51,147456,null,0,Jp,[rt,ct,[8,null]],{value:[0,"value"]},null),(e()(),us(-1,null,["All"])),(e()(),Kr(53,0,null,null,3,"option",[],null,null,null,null,null)),ci(54,147456,null,0,Xp,[rt,ct,[2,qp]],{value:[0,"value"]},null),ci(55,147456,null,0,Jp,[rt,ct,[8,null]],{value:[0,"value"]},null),(e()(),us(-1,null,["Working"])),(e()(),Kr(57,0,null,null,3,"option",[],null,null,null,null,null)),ci(58,147456,null,0,Xp,[rt,ct,[2,qp]],{value:[0,"value"]},null),ci(59,147456,null,0,Jp,[rt,ct,[8,null]],{value:[0,"value"]},null),(e()(),us(-1,null,["Idle"])),(e()(),Kr(61,0,null,null,21,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(62,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(63,114688,null,0,Rp,[],{name:[0,"name"]},null),(e()(),us(64,null,[" ","/"," \xa0\xa0 "])),(e()(),Kr(65,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(66,114688,null,0,Rp,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),us(67,null,[" "," \xa0\xa0\xa0 "])),(e()(),$r(16777216,null,null,1,null,cI)),ci(69,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(70,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(71,114688,null,0,Rp,[],{name:[0,"name"]},null),(e()(),us(72,null,[" "," \xa0\xa0\xa0 "])),(e()(),Kr(73,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(74,114688,null,0,Rp,[],{name:[0,"name"],title:[1,"title"]},null),(e()(),us(75,null,["\xa0"," \xa0\xa0\xa0 "])),(e()(),Kr(76,0,null,null,1,"app-happiness",[],null,null,null,qC,VC)),ci(77,114688,null,0,WC,[qm],null,null),(e()(),Kr(78,0,null,null,4,"div",[["id","allControl"]],null,null,null,null,null)),(e()(),Kr(79,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.enableAll()&&l),l},null,null)),(e()(),us(-1,null,["all on"])),(e()(),Kr(81,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.disableAll()&&l),l},null,null)),(e()(),us(-1,null,["all off"])),(e()(),$r(16777216,null,null,1,null,dI)),ci(84,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,mI)),ci(86,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,4,0),e(n,10,0,!t.demolishMode),e(n,12,0,t.demolishMode),e(n,14,0,!t.arrangeMode&&t.getBuildings().length>1),e(n,16,0,t.arrangeMode),e(n,20,0,!t.combineMode&&t.isUrbanPlanningEnabled()&&t.hasCombinableBuildings()),e(n,22,0,t.combineMode),e(n,24,0,!t.splitMode&&t.isUrbanPlanningEnabled()&&t.hasSplittableBuildings()),e(n,26,0,t.splitMode),e(n,34,0,t.filterBuilding),e(n,38,0,t.allBuildings),e(n,39,0,t.allBuildings),e(n,42,0,t.getUniqueBuildingsFromCurrentView()),e(n,46,0,t.filterWorking),e(n,50,0,t.buildingStates.ALL),e(n,51,0,t.buildingStates.ALL),e(n,54,0,t.buildingStates.WORKING),e(n,55,0,t.buildingStates.WORKING),e(n,58,0,t.buildingStates.IDLE),e(n,59,0,t.buildingStates.IDLE),e(n,63,0,"population"),e(n,66,0,"hammer","Workers","0 0 0 2px"),e(n,69,0,t.getSick().length>0),e(n,71,0,"land"),e(n,74,0,"village","Village size"),e(n,77,0),e(n,84,0,!t.isPagedViewEnabled()),e(n,86,0,t.isPagedViewEnabled())},function(e,n){var t=n.component;e(n,31,0,Ql(n,36).ngClassUntouched,Ql(n,36).ngClassTouched,Ql(n,36).ngClassPristine,Ql(n,36).ngClassDirty,Ql(n,36).ngClassValid,Ql(n,36).ngClassInvalid,Ql(n,36).ngClassPending),e(n,40,0,t.getBuildingName(t.allBuildings)),e(n,43,0,Ql(n,48).ngClassUntouched,Ql(n,48).ngClassTouched,Ql(n,48).ngClassPristine,Ql(n,48).ngClassDirty,Ql(n,48).ngClassValid,Ql(n,48).ngClassInvalid,Ql(n,48).ngClassPending),e(n,64,0,t.getPopulation(),t.getPopulationCap()),e(n,67,0,t.getUnemployed()),e(n,72,0,t.getFreeLand()),e(n,75,0,t.getTakenLand())})}function SI(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"app-village",[],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ql(e,1).onKeydownHandler(t)&&l),l},fI,ZC)),ci(1,114688,null,0,QC,[Vm,lv,Ym,sv,Jm,Lm,Wv,zm,yt],null,null)],function(e,n){e(n,1,0)},null)}var EI=Gl("app-village",QC,SI,{},{},[]);class vI extends XC{constructor(e,n,t,l,i,r,s){super(e,n,t,i,l,r,s,Hu.FORT),this.fortService=i}}var bI=Zt({encapsulation:0,styles:[GT,[""]],data:{}});function OI(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleDemolishMode()&&l),l},null,null)),(e()(),us(-1,null,["Demolish"]))],null,null)}function RI(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleDemolishMode()&&l),l},null,null)),(e()(),us(-1,null,["Stop"]))],null,null)}function TI(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleArrangeMode()&&l),l},null,null)),(e()(),us(-1,null,["Arrange"]))],null,null)}function CI(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleArrangeMode()&&l),l},null,null)),(e()(),us(-1,null,["Stop"]))],null,null)}function II(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleCombineMode()&&l),l},null,null)),(e()(),us(-1,null,["Combine"]))],null,null)}function yI(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleCombineMode()&&l),l},null,null)),(e()(),us(-1,null,["Stop"]))],null,null)}function _I(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleSplitMode()&&l),l},null,null)),(e()(),us(-1,null,["Split"]))],null,null)}function AI(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleSplitMode()&&l),l},null,null)),(e()(),us(-1,null,["Stop"]))],null,null)}function wI(e){return cs(0,[(e()(),Kr(0,0,null,null,3,"option",[],null,null,null,null,null)),ci(1,147456,null,0,Xp,[rt,ct,[2,qp]],{value:[0,"value"]},null),ci(2,147456,null,0,Jp,[rt,ct,[8,null]],{value:[0,"value"]},null),(e()(),us(3,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,3,0,n.component.getBuildingName(n.context.$implicit))})}function NI(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"app-building",[],null,null,null,xC,fC)),ci(2,8503296,null,0,mC,[Vm,Mm,Jm,Wv,sv,Lm,Bm],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,2,0,t.demolishMode,t.combineMode,t.splitMode,t.arrangeMode,n.context.$implicit,t.fortService)},null)}function PI(e){return cs(0,[(e()(),Kr(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),Kr(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["Buildings"])),(e()(),Kr(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,NI)),ci(6,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,6,0,n.component.getBuildings())},null)}function kI(e){return cs(0,[(e()(),Kr(0,0,null,null,4,"span",[["class","page"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.setPage(e.context.$implicit)&&l),l},null,null)),di(512,null,Uo,Go,[Ct,It,rt,ct]),ci(2,278528,null,0,Wo,[Uo],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),rs(3,{activePage:0}),(e()(),us(4,null,["page ",""]))],function(e,n){var t=e(n,3,0,n.component.currentPage===n.context.$implicit);e(n,2,0,"page",t)},function(e,n){e(n,4,0,n.context.$implicit+1)})}function xI(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"app-building",[],null,null,null,xC,fC)),ci(2,8503296,null,0,mC,[Vm,Mm,Jm,Wv,sv,Lm,Bm],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,2,0,t.demolishMode,t.combineMode,t.splitMode,t.arrangeMode,n.context.$implicit,t.fortService)},null)}function MI(e){return cs(0,[(e()(),Kr(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,kI)),ci(3,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),(e()(),Kr(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,xI)),ci(6,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,3,0,t.getPagesNumber()),e(n,6,0,t.getPagedBuildings())},null)}function DI(e){return cs(0,[(e()(),Kr(0,0,null,null,75,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),Kr(2,0,null,null,1,"app-top-menu",[],null,null,null,BC,DC)),ci(3,114688,null,0,MC,[Ym],null,null),(e()(),Kr(4,0,null,null,71,"div",[["id","content"]],null,null,null,null,null)),(e()(),Kr(5,0,null,null,54,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Kr(6,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.openBuildModal()&&l),l},null,null)),(e()(),us(-1,null,["Build"])),(e()(),$r(16777216,null,null,1,null,OI)),ci(9,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,RI)),ci(11,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,TI)),ci(13,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,CI)),ci(15,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(16,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.autoSort()&&l),l},null,null)),(e()(),us(-1,null,["Sort"])),(e()(),$r(16777216,null,null,1,null,II)),ci(19,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,yI)),ci(21,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,_I)),ci(23,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,AI)),ci(25,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(26,0,null,null,33,"div",[["id","side"]],null,null,null,null,null)),(e()(),us(-1,null,[" Filter:"])),(e()(),Kr(28,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(29,0,null,null,30,"div",[["id","filters"]],null,null,null,null,null)),(e()(),Kr(30,0,null,null,11,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==Ql(e,31).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,31).onTouched()&&l),"change"===n&&(l=!1!==i.updateFilter(t)&&l),"ngModelChange"===n&&(l=!1!==(i.filterBuilding=t)&&l),l},null,null)),ci(31,16384,null,0,qp,[ct,rt],null,null),di(1024,null,yp,function(e){return[e]},[qp]),ci(33,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(35,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(36,0,null,null,3,"option",[],null,null,null,null,null)),ci(37,147456,null,0,Xp,[rt,ct,[2,qp]],{value:[0,"value"]},null),ci(38,147456,null,0,Jp,[rt,ct,[8,null]],{value:[0,"value"]},null),(e()(),us(39,null,["",""])),(e()(),$r(16777216,null,null,1,null,wI)),ci(41,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),(e()(),Kr(42,0,null,null,17,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==Ql(e,43).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,43).onTouched()&&l),"change"===n&&(l=!1!==i.updateFilter2(t)&&l),"ngModelChange"===n&&(l=!1!==(i.filterWorking=t)&&l),l},null,null)),ci(43,16384,null,0,qp,[ct,rt],null,null),di(1024,null,yp,function(e){return[e]},[qp]),ci(45,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(47,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(48,0,null,null,3,"option",[],null,null,null,null,null)),ci(49,147456,null,0,Xp,[rt,ct,[2,qp]],{value:[0,"value"]},null),ci(50,147456,null,0,Jp,[rt,ct,[8,null]],{value:[0,"value"]},null),(e()(),us(-1,null,["All"])),(e()(),Kr(52,0,null,null,3,"option",[],null,null,null,null,null)),ci(53,147456,null,0,Xp,[rt,ct,[2,qp]],{value:[0,"value"]},null),ci(54,147456,null,0,Jp,[rt,ct,[8,null]],{value:[0,"value"]},null),(e()(),us(-1,null,["Working"])),(e()(),Kr(56,0,null,null,3,"option",[],null,null,null,null,null)),ci(57,147456,null,0,Xp,[rt,ct,[2,qp]],{value:[0,"value"]},null),ci(58,147456,null,0,Jp,[rt,ct,[8,null]],{value:[0,"value"]},null),(e()(),us(-1,null,["Idle"])),(e()(),Kr(60,0,null,null,11,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(61,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(62,114688,null,0,Rp,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),us(63,null,[" "," \xa0\xa0\xa0 "])),(e()(),Kr(64,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(65,114688,null,0,Rp,[],{name:[0,"name"]},null),(e()(),us(66,null,[" "," "])),(e()(),Kr(67,0,null,null,4,"div",[["id","allControl"]],null,null,null,null,null)),(e()(),Kr(68,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.enableAll()&&l),l},null,null)),(e()(),us(-1,null,["all on"])),(e()(),Kr(70,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.disableAll()&&l),l},null,null)),(e()(),us(-1,null,["all off"])),(e()(),$r(16777216,null,null,1,null,PI)),ci(73,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,MI)),ci(75,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,3,0),e(n,9,0,!t.demolishMode),e(n,11,0,t.demolishMode),e(n,13,0,!t.arrangeMode&&t.getBuildings().length>1),e(n,15,0,t.arrangeMode),e(n,19,0,!t.combineMode&&t.isUrbanPlanningEnabled()&&t.hasCombinableBuildings()),e(n,21,0,t.combineMode),e(n,23,0,!t.splitMode&&t.isUrbanPlanningEnabled()&&t.hasSplittableBuildings()),e(n,25,0,t.splitMode),e(n,33,0,t.filterBuilding),e(n,37,0,t.allBuildings),e(n,38,0,t.allBuildings),e(n,41,0,t.getUniqueBuildingsFromCurrentView()),e(n,45,0,t.filterWorking),e(n,49,0,t.buildingStates.ALL),e(n,50,0,t.buildingStates.ALL),e(n,53,0,t.buildingStates.WORKING),e(n,54,0,t.buildingStates.WORKING),e(n,57,0,t.buildingStates.IDLE),e(n,58,0,t.buildingStates.IDLE),e(n,62,0,"hammer","Workers","0 0 0 2px"),e(n,65,0,"land"),e(n,73,0,!t.isPagedViewEnabled()),e(n,75,0,t.isPagedViewEnabled())},function(e,n){var t=n.component;e(n,30,0,Ql(n,35).ngClassUntouched,Ql(n,35).ngClassTouched,Ql(n,35).ngClassPristine,Ql(n,35).ngClassDirty,Ql(n,35).ngClassValid,Ql(n,35).ngClassInvalid,Ql(n,35).ngClassPending),e(n,39,0,t.getBuildingName(t.allBuildings)),e(n,42,0,Ql(n,47).ngClassUntouched,Ql(n,47).ngClassTouched,Ql(n,47).ngClassPristine,Ql(n,47).ngClassDirty,Ql(n,47).ngClassValid,Ql(n,47).ngClassInvalid,Ql(n,47).ngClassPending),e(n,63,0,t.getUnemployed()),e(n,66,0,t.getFreeLand())})}function LI(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"app-fort",[],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ql(e,1).onKeydownHandler(t)&&l),l},DI,bI)),ci(1,114688,null,0,vI,[Vm,lv,Ym,zm,eO,Lm,yt],null,null)],function(e,n){e(n,1,0)},null)}var FI=Gl("app-fort",vI,LI,{},{},[]);const HI=(()=>{class e extends rv{constructor(e,n,t,l,i){super(n,e,t,i,l,Hu.FOREST,xu.FOREST)}init(){this.buildings.push(new AS(this.servicesService,this.idService.getNextId()).build()),this.buildings.push(new US(this.servicesService,this.idService.getNextId()).build()),this.buildings.forEach(e=>this.landService.takeLand(e.getSize()))}}return e.ngInjectableDef=de({factory:function(){return new e(Le(Jm),Le(ev),Le(Mm),Le(VE),Le(lv))},token:e,providedIn:"root"}),e})();class UI extends XC{constructor(e,n,t,l,i,r,s){super(e,n,t,i,l,r,s,Hu.FOREST),this.forestService=i}getForestSize(){return this.landService.getForest()}}var GI=Zt({encapsulation:0,styles:[GT,[".critical[_ngcontent-%COMP%]{color:var(--negative-colour)}"]],data:{}});function BI(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleDemolishMode()&&l),l},null,null)),(e()(),us(-1,null,["Demolish"]))],null,null)}function WI(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleDemolishMode()&&l),l},null,null)),(e()(),us(-1,null,["Stop"]))],null,null)}function VI(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleArrangeMode()&&l),l},null,null)),(e()(),us(-1,null,["Arrange"]))],null,null)}function zI(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleArrangeMode()&&l),l},null,null)),(e()(),us(-1,null,["Stop"]))],null,null)}function YI(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleCombineMode()&&l),l},null,null)),(e()(),us(-1,null,["Combine"]))],null,null)}function $I(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleCombineMode()&&l),l},null,null)),(e()(),us(-1,null,["Stop"]))],null,null)}function KI(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleSplitMode()&&l),l},null,null)),(e()(),us(-1,null,["Split"]))],null,null)}function jI(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleSplitMode()&&l),l},null,null)),(e()(),us(-1,null,["Stop"]))],null,null)}function qI(e){return cs(0,[(e()(),Kr(0,0,null,null,3,"option",[],null,null,null,null,null)),ci(1,147456,null,0,Xp,[rt,ct,[2,qp]],{value:[0,"value"]},null),ci(2,147456,null,0,Jp,[rt,ct,[8,null]],{value:[0,"value"]},null),(e()(),us(3,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,3,0,n.component.getBuildingName(n.context.$implicit))})}function XI(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.getForestSize())})}function QI(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[["class","critical"]],null,null,null,null,null)),(e()(),us(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.getForestSize())})}function ZI(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"app-building",[],null,null,null,xC,fC)),ci(2,8503296,null,0,mC,[Vm,Mm,Jm,Wv,sv,Lm,Bm],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,2,0,t.demolishMode,t.combineMode,t.splitMode,t.arrangeMode,n.context.$implicit,t.forestService)},null)}function JI(e){return cs(0,[(e()(),Kr(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),Kr(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["Buildings"])),(e()(),Kr(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,ZI)),ci(6,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,6,0,n.component.getBuildings())},null)}function ey(e){return cs(0,[(e()(),Kr(0,0,null,null,4,"span",[["class","page"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.setPage(e.context.$implicit)&&l),l},null,null)),di(512,null,Uo,Go,[Ct,It,rt,ct]),ci(2,278528,null,0,Wo,[Uo],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),rs(3,{activePage:0}),(e()(),us(4,null,["page ",""]))],function(e,n){var t=e(n,3,0,n.component.currentPage===n.context.$implicit);e(n,2,0,"page",t)},function(e,n){e(n,4,0,n.context.$implicit+1)})}function ny(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"app-building",[],null,null,null,xC,fC)),ci(2,8503296,null,0,mC,[Vm,Mm,Jm,Wv,sv,Lm,Bm],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,2,0,t.demolishMode,t.combineMode,t.splitMode,t.arrangeMode,n.context.$implicit,t.forestService)},null)}function ty(e){return cs(0,[(e()(),Kr(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,ey)),ci(3,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),(e()(),Kr(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,ny)),ci(6,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,3,0,t.getPagesNumber()),e(n,6,0,t.getPagedBuildings())},null)}function ly(e){return cs(0,[(e()(),Kr(0,0,null,null,82,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),Kr(2,0,null,null,1,"app-top-menu",[],null,null,null,BC,DC)),ci(3,114688,null,0,MC,[Ym],null,null),(e()(),Kr(4,0,null,null,78,"div",[["id","content"]],null,null,null,null,null)),(e()(),Kr(5,0,null,null,54,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Kr(6,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.openBuildModal()&&l),l},null,null)),(e()(),us(-1,null,["Build"])),(e()(),$r(16777216,null,null,1,null,BI)),ci(9,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,WI)),ci(11,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,VI)),ci(13,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,zI)),ci(15,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(16,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.autoSort()&&l),l},null,null)),(e()(),us(-1,null,["Sort"])),(e()(),$r(16777216,null,null,1,null,YI)),ci(19,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,$I)),ci(21,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,KI)),ci(23,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,jI)),ci(25,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(26,0,null,null,33,"div",[["id","side"]],null,null,null,null,null)),(e()(),us(-1,null,[" Filter:"])),(e()(),Kr(28,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(29,0,null,null,30,"div",[["id","filters"]],null,null,null,null,null)),(e()(),Kr(30,0,null,null,11,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==Ql(e,31).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,31).onTouched()&&l),"change"===n&&(l=!1!==i.updateFilter(t)&&l),"ngModelChange"===n&&(l=!1!==(i.filterBuilding=t)&&l),l},null,null)),ci(31,16384,null,0,qp,[ct,rt],null,null),di(1024,null,yp,function(e){return[e]},[qp]),ci(33,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(35,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(36,0,null,null,3,"option",[],null,null,null,null,null)),ci(37,147456,null,0,Xp,[rt,ct,[2,qp]],{value:[0,"value"]},null),ci(38,147456,null,0,Jp,[rt,ct,[8,null]],{value:[0,"value"]},null),(e()(),us(39,null,["",""])),(e()(),$r(16777216,null,null,1,null,qI)),ci(41,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),(e()(),Kr(42,0,null,null,17,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==Ql(e,43).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,43).onTouched()&&l),"change"===n&&(l=!1!==i.updateFilter2(t)&&l),"ngModelChange"===n&&(l=!1!==(i.filterWorking=t)&&l),l},null,null)),ci(43,16384,null,0,qp,[ct,rt],null,null),di(1024,null,yp,function(e){return[e]},[qp]),ci(45,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(47,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(48,0,null,null,3,"option",[],null,null,null,null,null)),ci(49,147456,null,0,Xp,[rt,ct,[2,qp]],{value:[0,"value"]},null),ci(50,147456,null,0,Jp,[rt,ct,[8,null]],{value:[0,"value"]},null),(e()(),us(-1,null,["All"])),(e()(),Kr(52,0,null,null,3,"option",[],null,null,null,null,null)),ci(53,147456,null,0,Xp,[rt,ct,[2,qp]],{value:[0,"value"]},null),ci(54,147456,null,0,Jp,[rt,ct,[8,null]],{value:[0,"value"]},null),(e()(),us(-1,null,["Working"])),(e()(),Kr(56,0,null,null,3,"option",[],null,null,null,null,null)),ci(57,147456,null,0,Xp,[rt,ct,[2,qp]],{value:[0,"value"]},null),ci(58,147456,null,0,Jp,[rt,ct,[8,null]],{value:[0,"value"]},null),(e()(),us(-1,null,["Idle"])),(e()(),Kr(60,0,null,null,18,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(61,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(62,114688,null,0,Rp,[],{name:[0,"name"]},null),(e()(),$r(16777216,null,null,1,null,XI)),ci(64,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,QI)),ci(66,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),us(-1,null,[" \xa0\xa0 "])),(e()(),Kr(68,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(69,114688,null,0,Rp,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),us(70,null,[" "," \xa0\xa0\xa0 "])),(e()(),Kr(71,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(72,114688,null,0,Rp,[],{name:[0,"name"]},null),(e()(),us(73,null,[" "," "])),(e()(),Kr(74,0,null,null,4,"div",[["id","allControl"]],null,null,null,null,null)),(e()(),Kr(75,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.enableAll()&&l),l},null,null)),(e()(),us(-1,null,["all on"])),(e()(),Kr(77,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.disableAll()&&l),l},null,null)),(e()(),us(-1,null,["all off"])),(e()(),$r(16777216,null,null,1,null,JI)),ci(80,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,ty)),ci(82,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,3,0),e(n,9,0,!t.demolishMode),e(n,11,0,t.demolishMode),e(n,13,0,!t.arrangeMode),e(n,15,0,t.arrangeMode),e(n,19,0,!t.combineMode&&t.isUrbanPlanningEnabled()&&t.hasCombinableBuildings()),e(n,21,0,t.combineMode),e(n,23,0,!t.splitMode&&t.isUrbanPlanningEnabled()&&t.hasSplittableBuildings()),e(n,25,0,t.splitMode),e(n,33,0,t.filterBuilding),e(n,37,0,t.allBuildings),e(n,38,0,t.allBuildings),e(n,41,0,t.getUniqueBuildingsFromCurrentView()),e(n,45,0,t.filterWorking),e(n,49,0,t.buildingStates.ALL),e(n,50,0,t.buildingStates.ALL),e(n,53,0,t.buildingStates.WORKING),e(n,54,0,t.buildingStates.WORKING),e(n,57,0,t.buildingStates.IDLE),e(n,58,0,t.buildingStates.IDLE),e(n,62,0,"forest"),e(n,64,0,t.getForestSize()>=400),e(n,66,0,t.getForestSize()<400),e(n,69,0,"hammer","Workers","0 0 0 2px"),e(n,72,0,"land"),e(n,80,0,!t.isPagedViewEnabled()),e(n,82,0,t.isPagedViewEnabled())},function(e,n){var t=n.component;e(n,30,0,Ql(n,35).ngClassUntouched,Ql(n,35).ngClassTouched,Ql(n,35).ngClassPristine,Ql(n,35).ngClassDirty,Ql(n,35).ngClassValid,Ql(n,35).ngClassInvalid,Ql(n,35).ngClassPending),e(n,39,0,t.getBuildingName(t.allBuildings)),e(n,42,0,Ql(n,47).ngClassUntouched,Ql(n,47).ngClassTouched,Ql(n,47).ngClassPristine,Ql(n,47).ngClassDirty,Ql(n,47).ngClassValid,Ql(n,47).ngClassInvalid,Ql(n,47).ngClassPending),e(n,70,0,t.getUnemployed()),e(n,73,0,t.getFreeLand())})}function iy(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"app-forest",[],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ql(e,1).onKeydownHandler(t)&&l),l},ly,GI)),ci(1,114688,null,0,UI,[Vm,lv,Ym,zm,HI,Lm,yt],null,null)],function(e,n){e(n,1,0)},null)}var ry=Gl("app-forest",UI,iy,{},{},[]);const sy=(()=>{class e extends rv{constructor(e,n,t,l,i){super(n,e,t,i,l,Hu.FIELD,xu.FIELD)}}return e.ngInjectableDef=de({factory:function(){return new e(Le(Jm),Le(ev),Le(Mm),Le(VE),Le(lv))},token:e,providedIn:"root"}),e})();class uy extends XC{constructor(e,n,t,l,i,r,s){super(e,n,t,i,l,r,s,Hu.FIELD),this.fieldService=i}}var oy=Zt({encapsulation:0,styles:[GT,[""]],data:{}});function ay(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleDemolishMode()&&l),l},null,null)),(e()(),us(-1,null,["Demolish"]))],null,null)}function cy(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleDemolishMode()&&l),l},null,null)),(e()(),us(-1,null,["Stop"]))],null,null)}function hy(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleArrangeMode()&&l),l},null,null)),(e()(),us(-1,null,["Arrange"]))],null,null)}function dy(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleArrangeMode()&&l),l},null,null)),(e()(),us(-1,null,["Stop"]))],null,null)}function gy(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleCombineMode()&&l),l},null,null)),(e()(),us(-1,null,["Combine"]))],null,null)}function py(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleCombineMode()&&l),l},null,null)),(e()(),us(-1,null,["Stop"]))],null,null)}function my(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleSplitMode()&&l),l},null,null)),(e()(),us(-1,null,["Split"]))],null,null)}function fy(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleSplitMode()&&l),l},null,null)),(e()(),us(-1,null,["Stop"]))],null,null)}function Sy(e){return cs(0,[(e()(),Kr(0,0,null,null,3,"option",[],null,null,null,null,null)),ci(1,147456,null,0,Xp,[rt,ct,[2,qp]],{value:[0,"value"]},null),ci(2,147456,null,0,Jp,[rt,ct,[8,null]],{value:[0,"value"]},null),(e()(),us(3,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,3,0,n.component.getBuildingName(n.context.$implicit))})}function Ey(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"app-building",[],null,null,null,xC,fC)),ci(2,8503296,null,0,mC,[Vm,Mm,Jm,Wv,sv,Lm,Bm],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,2,0,t.demolishMode,t.combineMode,t.splitMode,t.arrangeMode,n.context.$implicit,t.fieldService)},null)}function vy(e){return cs(0,[(e()(),Kr(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),Kr(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["Buildings"])),(e()(),Kr(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,Ey)),ci(6,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,6,0,n.component.getBuildings())},null)}function by(e){return cs(0,[(e()(),Kr(0,0,null,null,4,"span",[["class","page"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.setPage(e.context.$implicit)&&l),l},null,null)),di(512,null,Uo,Go,[Ct,It,rt,ct]),ci(2,278528,null,0,Wo,[Uo],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),rs(3,{activePage:0}),(e()(),us(4,null,["page ",""]))],function(e,n){var t=e(n,3,0,n.component.currentPage===n.context.$implicit);e(n,2,0,"page",t)},function(e,n){e(n,4,0,n.context.$implicit+1)})}function Oy(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"app-building",[],null,null,null,xC,fC)),ci(2,8503296,null,0,mC,[Vm,Mm,Jm,Wv,sv,Lm,Bm],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,2,0,t.demolishMode,t.combineMode,t.splitMode,t.arrangeMode,n.context.$implicit,t.fieldService)},null)}function Ry(e){return cs(0,[(e()(),Kr(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,by)),ci(3,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),(e()(),Kr(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,Oy)),ci(6,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,3,0,t.getPagesNumber()),e(n,6,0,t.getPagedBuildings())},null)}function Ty(e){return cs(0,[(e()(),Kr(0,0,null,null,75,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),Kr(2,0,null,null,1,"app-top-menu",[],null,null,null,BC,DC)),ci(3,114688,null,0,MC,[Ym],null,null),(e()(),Kr(4,0,null,null,71,"div",[["id","content"]],null,null,null,null,null)),(e()(),Kr(5,0,null,null,54,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Kr(6,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.openBuildModal()&&l),l},null,null)),(e()(),us(-1,null,["Build"])),(e()(),$r(16777216,null,null,1,null,ay)),ci(9,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,cy)),ci(11,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,hy)),ci(13,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,dy)),ci(15,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(16,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.autoSort()&&l),l},null,null)),(e()(),us(-1,null,["Sort"])),(e()(),$r(16777216,null,null,1,null,gy)),ci(19,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,py)),ci(21,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,my)),ci(23,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,fy)),ci(25,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(26,0,null,null,33,"div",[["id","side"]],null,null,null,null,null)),(e()(),us(-1,null,[" Filter:"])),(e()(),Kr(28,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(29,0,null,null,30,"div",[["id","filters"]],null,null,null,null,null)),(e()(),Kr(30,0,null,null,11,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==Ql(e,31).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,31).onTouched()&&l),"change"===n&&(l=!1!==i.updateFilter(t)&&l),"ngModelChange"===n&&(l=!1!==(i.filterBuilding=t)&&l),l},null,null)),ci(31,16384,null,0,qp,[ct,rt],null,null),di(1024,null,yp,function(e){return[e]},[qp]),ci(33,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(35,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(36,0,null,null,3,"option",[],null,null,null,null,null)),ci(37,147456,null,0,Xp,[rt,ct,[2,qp]],{value:[0,"value"]},null),ci(38,147456,null,0,Jp,[rt,ct,[8,null]],{value:[0,"value"]},null),(e()(),us(39,null,["",""])),(e()(),$r(16777216,null,null,1,null,Sy)),ci(41,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),(e()(),Kr(42,0,null,null,17,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==Ql(e,43).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,43).onTouched()&&l),"change"===n&&(l=!1!==i.updateFilter2(t)&&l),"ngModelChange"===n&&(l=!1!==(i.filterWorking=t)&&l),l},null,null)),ci(43,16384,null,0,qp,[ct,rt],null,null),di(1024,null,yp,function(e){return[e]},[qp]),ci(45,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(47,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(48,0,null,null,3,"option",[],null,null,null,null,null)),ci(49,147456,null,0,Xp,[rt,ct,[2,qp]],{value:[0,"value"]},null),ci(50,147456,null,0,Jp,[rt,ct,[8,null]],{value:[0,"value"]},null),(e()(),us(-1,null,["All"])),(e()(),Kr(52,0,null,null,3,"option",[],null,null,null,null,null)),ci(53,147456,null,0,Xp,[rt,ct,[2,qp]],{value:[0,"value"]},null),ci(54,147456,null,0,Jp,[rt,ct,[8,null]],{value:[0,"value"]},null),(e()(),us(-1,null,["Working"])),(e()(),Kr(56,0,null,null,3,"option",[],null,null,null,null,null)),ci(57,147456,null,0,Xp,[rt,ct,[2,qp]],{value:[0,"value"]},null),ci(58,147456,null,0,Jp,[rt,ct,[8,null]],{value:[0,"value"]},null),(e()(),us(-1,null,["Idle"])),(e()(),Kr(60,0,null,null,11,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(61,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(62,114688,null,0,Rp,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),us(63,null,[" "," \xa0\xa0\xa0 "])),(e()(),Kr(64,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(65,114688,null,0,Rp,[],{name:[0,"name"]},null),(e()(),us(66,null,[" "," "])),(e()(),Kr(67,0,null,null,4,"div",[["id","allControl"]],null,null,null,null,null)),(e()(),Kr(68,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.enableAll()&&l),l},null,null)),(e()(),us(-1,null,["all on"])),(e()(),Kr(70,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.disableAll()&&l),l},null,null)),(e()(),us(-1,null,["all off"])),(e()(),$r(16777216,null,null,1,null,vy)),ci(73,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,Ry)),ci(75,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,3,0),e(n,9,0,!t.demolishMode),e(n,11,0,t.demolishMode),e(n,13,0,!t.arrangeMode&&t.getBuildings().length>1),e(n,15,0,t.arrangeMode),e(n,19,0,!t.combineMode&&t.isUrbanPlanningEnabled()&&t.hasCombinableBuildings()),e(n,21,0,t.combineMode),e(n,23,0,!t.splitMode&&t.isUrbanPlanningEnabled()&&t.hasSplittableBuildings()),e(n,25,0,t.splitMode),e(n,33,0,t.filterBuilding),e(n,37,0,t.allBuildings),e(n,38,0,t.allBuildings),e(n,41,0,t.getUniqueBuildingsFromCurrentView()),e(n,45,0,t.filterWorking),e(n,49,0,t.buildingStates.ALL),e(n,50,0,t.buildingStates.ALL),e(n,53,0,t.buildingStates.WORKING),e(n,54,0,t.buildingStates.WORKING),e(n,57,0,t.buildingStates.IDLE),e(n,58,0,t.buildingStates.IDLE),e(n,62,0,"hammer","Workers","0 0 0 2px"),e(n,65,0,"land"),e(n,73,0,!t.isPagedViewEnabled()),e(n,75,0,t.isPagedViewEnabled())},function(e,n){var t=n.component;e(n,30,0,Ql(n,35).ngClassUntouched,Ql(n,35).ngClassTouched,Ql(n,35).ngClassPristine,Ql(n,35).ngClassDirty,Ql(n,35).ngClassValid,Ql(n,35).ngClassInvalid,Ql(n,35).ngClassPending),e(n,39,0,t.getBuildingName(t.allBuildings)),e(n,42,0,Ql(n,47).ngClassUntouched,Ql(n,47).ngClassTouched,Ql(n,47).ngClassPristine,Ql(n,47).ngClassDirty,Ql(n,47).ngClassValid,Ql(n,47).ngClassInvalid,Ql(n,47).ngClassPending),e(n,63,0,t.getUnemployed()),e(n,66,0,t.getFreeLand())})}function Cy(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"app-field",[],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ql(e,1).onKeydownHandler(t)&&l),l},Ty,oy)),ci(1,114688,null,0,uy,[Vm,lv,Ym,zm,sy,Lm,yt],null,null)],function(e,n){e(n,1,0)},null)}var Iy=Gl("app-field",uy,Cy,{},{},[]);const yy=(()=>{class e extends rv{constructor(e,n,t,l,i){super(n,e,t,i,l,Hu.MOUNTAINS,xu.MOUNTAINS)}}return e.ngInjectableDef=de({factory:function(){return new e(Le(Jm),Le(ev),Le(Mm),Le(VE),Le(lv))},token:e,providedIn:"root"}),e})();class _y extends XC{constructor(e,n,t,l,i,r,s){super(e,n,t,i,l,r,s,Hu.MOUNTAINS),this.mountainsService=i}getMountains(){return this.landService.getMountains()}getCoal(){return this.landService.getOre(Su.COAL)}getGoldOre(){return this.landService.getOre(Su.GOLD_ORE)}getSilverOre(){return this.landService.getOre(Su.SILVER_ORE)}getCopperOre(){return this.landService.getOre(Su.COPPER_ORE)}getTinOre(){return this.landService.getOre(Su.TIN_ORE)}getIronOre(){return this.landService.getOre(Su.IRON_ORE)}}var Ay=Zt({encapsulation:0,styles:[GT,[".deposit[_ngcontent-%COMP%]{display:-webkit-inline-box;display:inline-flex;font-size:.8em;height:24px;-webkit-box-align:center;align-items:center}"]],data:{}});function wy(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleDemolishMode()&&l),l},null,null)),(e()(),us(-1,null,["Demolish"]))],null,null)}function Ny(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleDemolishMode()&&l),l},null,null)),(e()(),us(-1,null,["Stop"]))],null,null)}function Py(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleArrangeMode()&&l),l},null,null)),(e()(),us(-1,null,["Arrange"]))],null,null)}function ky(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleArrangeMode()&&l),l},null,null)),(e()(),us(-1,null,["Stop"]))],null,null)}function xy(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleCombineMode()&&l),l},null,null)),(e()(),us(-1,null,["Combine"]))],null,null)}function My(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleCombineMode()&&l),l},null,null)),(e()(),us(-1,null,["Stop"]))],null,null)}function Dy(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleSplitMode()&&l),l},null,null)),(e()(),us(-1,null,["Split"]))],null,null)}function Ly(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleSplitMode()&&l),l},null,null)),(e()(),us(-1,null,["Stop"]))],null,null)}function Fy(e){return cs(0,[(e()(),Kr(0,0,null,null,3,"option",[],null,null,null,null,null)),ci(1,147456,null,0,Xp,[rt,ct,[2,qp]],{value:[0,"value"]},null),ci(2,147456,null,0,Jp,[rt,ct,[8,null]],{value:[0,"value"]},null),(e()(),us(3,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,3,0,n.component.getBuildingName(n.context.$implicit))})}function Hy(e){return cs(0,[(e()(),Kr(0,0,null,null,4,"span",[["class","deposit"]],null,null,null,null,null)),(e()(),us(-1,null,[" \xa0\xa0\xa0 "])),(e()(),Kr(2,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(3,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),us(4,null,[": "," "]))],function(e,n){e(n,3,0,"coal","resources","coal deposit")},function(e,n){e(n,4,0,n.component.getCoal())})}function Uy(e){return cs(0,[(e()(),Kr(0,0,null,null,4,"span",[["class","deposit"]],null,null,null,null,null)),(e()(),us(-1,null,[" \xa0\xa0\xa0 "])),(e()(),Kr(2,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(3,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),us(4,null,[": "," "]))],function(e,n){e(n,3,0,"gold_ore","resources","gold deposit")},function(e,n){e(n,4,0,n.component.getGoldOre())})}function Gy(e){return cs(0,[(e()(),Kr(0,0,null,null,4,"span",[["class","deposit"]],null,null,null,null,null)),(e()(),us(-1,null,[" \xa0\xa0\xa0 "])),(e()(),Kr(2,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(3,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),us(4,null,[": "," "]))],function(e,n){e(n,3,0,"silver_ore","resources","silver deposit")},function(e,n){e(n,4,0,n.component.getSilverOre())})}function By(e){return cs(0,[(e()(),Kr(0,0,null,null,4,"span",[["class","deposit"]],null,null,null,null,null)),(e()(),us(-1,null,[" \xa0\xa0\xa0 "])),(e()(),Kr(2,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(3,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),us(4,null,[": "," "]))],function(e,n){e(n,3,0,"copper_ore","resources","copper deposit")},function(e,n){e(n,4,0,n.component.getCopperOre())})}function Wy(e){return cs(0,[(e()(),Kr(0,0,null,null,4,"span",[["class","deposit"]],null,null,null,null,null)),(e()(),us(-1,null,[" \xa0\xa0\xa0 "])),(e()(),Kr(2,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(3,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),us(4,null,[": "," "]))],function(e,n){e(n,3,0,"tin_ore","resources","tin deposit")},function(e,n){e(n,4,0,n.component.getTinOre())})}function Vy(e){return cs(0,[(e()(),Kr(0,0,null,null,4,"span",[["class","deposit"]],null,null,null,null,null)),(e()(),us(-1,null,[" \xa0\xa0\xa0 "])),(e()(),Kr(2,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(3,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),us(4,null,[": "," "]))],function(e,n){e(n,3,0,"iron_ore","resources","iron deposit")},function(e,n){e(n,4,0,n.component.getIronOre())})}function zy(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"app-building",[],null,null,null,xC,fC)),ci(2,8503296,null,0,mC,[Vm,Mm,Jm,Wv,sv,Lm,Bm],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,2,0,t.demolishMode,t.combineMode,t.splitMode,t.arrangeMode,n.context.$implicit,t.mountainsService)},null)}function Yy(e){return cs(0,[(e()(),Kr(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),Kr(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["Buildings"])),(e()(),Kr(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,zy)),ci(6,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,6,0,n.component.getBuildings())},null)}function $y(e){return cs(0,[(e()(),Kr(0,0,null,null,4,"span",[["class","page"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.setPage(e.context.$implicit)&&l),l},null,null)),di(512,null,Uo,Go,[Ct,It,rt,ct]),ci(2,278528,null,0,Wo,[Uo],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),rs(3,{activePage:0}),(e()(),us(4,null,["page ",""]))],function(e,n){var t=e(n,3,0,n.component.currentPage===n.context.$implicit);e(n,2,0,"page",t)},function(e,n){e(n,4,0,n.context.$implicit+1)})}function Ky(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"app-building",[],null,null,null,xC,fC)),ci(2,8503296,null,0,mC,[Vm,Mm,Jm,Wv,sv,Lm,Bm],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,2,0,t.demolishMode,t.combineMode,t.splitMode,t.arrangeMode,n.context.$implicit,t.mountainsService)},null)}function jy(e){return cs(0,[(e()(),Kr(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,$y)),ci(3,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),(e()(),Kr(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,Ky)),ci(6,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,3,0,t.getPagesNumber()),e(n,6,0,t.getPagedBuildings())},null)}function qy(e){return cs(0,[(e()(),Kr(0,0,null,null,90,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),Kr(2,0,null,null,1,"app-top-menu",[],null,null,null,BC,DC)),ci(3,114688,null,0,MC,[Ym],null,null),(e()(),Kr(4,0,null,null,86,"div",[["id","content"]],null,null,null,null,null)),(e()(),Kr(5,0,null,null,54,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Kr(6,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.openBuildModal()&&l),l},null,null)),(e()(),us(-1,null,["Build"])),(e()(),$r(16777216,null,null,1,null,wy)),ci(9,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,Ny)),ci(11,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,Py)),ci(13,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,ky)),ci(15,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(16,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.autoSort()&&l),l},null,null)),(e()(),us(-1,null,["Sort"])),(e()(),$r(16777216,null,null,1,null,xy)),ci(19,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,My)),ci(21,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,Dy)),ci(23,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,Ly)),ci(25,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(26,0,null,null,33,"div",[["id","side"]],null,null,null,null,null)),(e()(),us(-1,null,[" Filter:"])),(e()(),Kr(28,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(29,0,null,null,30,"div",[["id","filters"]],null,null,null,null,null)),(e()(),Kr(30,0,null,null,11,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==Ql(e,31).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,31).onTouched()&&l),"change"===n&&(l=!1!==i.updateFilter(t)&&l),"ngModelChange"===n&&(l=!1!==(i.filterBuilding=t)&&l),l},null,null)),ci(31,16384,null,0,qp,[ct,rt],null,null),di(1024,null,yp,function(e){return[e]},[qp]),ci(33,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(35,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(36,0,null,null,3,"option",[],null,null,null,null,null)),ci(37,147456,null,0,Xp,[rt,ct,[2,qp]],{value:[0,"value"]},null),ci(38,147456,null,0,Jp,[rt,ct,[8,null]],{value:[0,"value"]},null),(e()(),us(39,null,["",""])),(e()(),$r(16777216,null,null,1,null,Fy)),ci(41,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),(e()(),Kr(42,0,null,null,17,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==Ql(e,43).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,43).onTouched()&&l),"change"===n&&(l=!1!==i.updateFilter2(t)&&l),"ngModelChange"===n&&(l=!1!==(i.filterWorking=t)&&l),l},null,null)),ci(43,16384,null,0,qp,[ct,rt],null,null),di(1024,null,yp,function(e){return[e]},[qp]),ci(45,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(47,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(48,0,null,null,3,"option",[],null,null,null,null,null)),ci(49,147456,null,0,Xp,[rt,ct,[2,qp]],{value:[0,"value"]},null),ci(50,147456,null,0,Jp,[rt,ct,[8,null]],{value:[0,"value"]},null),(e()(),us(-1,null,["All"])),(e()(),Kr(52,0,null,null,3,"option",[],null,null,null,null,null)),ci(53,147456,null,0,Xp,[rt,ct,[2,qp]],{value:[0,"value"]},null),ci(54,147456,null,0,Jp,[rt,ct,[8,null]],{value:[0,"value"]},null),(e()(),us(-1,null,["Working"])),(e()(),Kr(56,0,null,null,3,"option",[],null,null,null,null,null)),ci(57,147456,null,0,Xp,[rt,ct,[2,qp]],{value:[0,"value"]},null),ci(58,147456,null,0,Jp,[rt,ct,[8,null]],{value:[0,"value"]},null),(e()(),us(-1,null,["Idle"])),(e()(),Kr(60,0,null,null,26,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(61,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(62,114688,null,0,Rp,[],{name:[0,"name"]},null),(e()(),us(63,null,[" "," \xa0\xa0 "])),(e()(),Kr(64,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(65,114688,null,0,Rp,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),us(66,null,[" "," \xa0\xa0\xa0 "])),(e()(),Kr(67,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(68,114688,null,0,Rp,[],{name:[0,"name"]},null),(e()(),us(69,null,[" "," "])),(e()(),$r(16777216,null,null,1,null,Hy)),ci(71,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,Uy)),ci(73,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,Gy)),ci(75,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,By)),ci(77,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,Wy)),ci(79,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,Vy)),ci(81,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(82,0,null,null,4,"div",[["id","allControl"]],null,null,null,null,null)),(e()(),Kr(83,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.enableAll()&&l),l},null,null)),(e()(),us(-1,null,["all on"])),(e()(),Kr(85,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.disableAll()&&l),l},null,null)),(e()(),us(-1,null,["all off"])),(e()(),$r(16777216,null,null,1,null,Yy)),ci(88,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,jy)),ci(90,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,3,0),e(n,9,0,!t.demolishMode),e(n,11,0,t.demolishMode),e(n,13,0,!t.arrangeMode&&t.getBuildings().length>1),e(n,15,0,t.arrangeMode),e(n,19,0,!t.combineMode&&t.isUrbanPlanningEnabled()&&t.hasCombinableBuildings()),e(n,21,0,t.combineMode),e(n,23,0,!t.splitMode&&t.isUrbanPlanningEnabled()&&t.hasSplittableBuildings()),e(n,25,0,t.splitMode),e(n,33,0,t.filterBuilding),e(n,37,0,t.allBuildings),e(n,38,0,t.allBuildings),e(n,41,0,t.getUniqueBuildingsFromCurrentView()),e(n,45,0,t.filterWorking),e(n,49,0,t.buildingStates.ALL),e(n,50,0,t.buildingStates.ALL),e(n,53,0,t.buildingStates.WORKING),e(n,54,0,t.buildingStates.WORKING),e(n,57,0,t.buildingStates.IDLE),e(n,58,0,t.buildingStates.IDLE),e(n,62,0,"mountains"),e(n,65,0,"hammer","Workers","0 0 0 2px"),e(n,68,0,"land"),e(n,71,0,t.getCoal()>0),e(n,73,0,t.getGoldOre()>0),e(n,75,0,t.getSilverOre()>0),e(n,77,0,t.getCopperOre()>0),e(n,79,0,t.getTinOre()>0),e(n,81,0,t.getIronOre()>0),e(n,88,0,!t.isPagedViewEnabled()),e(n,90,0,t.isPagedViewEnabled())},function(e,n){var t=n.component;e(n,30,0,Ql(n,35).ngClassUntouched,Ql(n,35).ngClassTouched,Ql(n,35).ngClassPristine,Ql(n,35).ngClassDirty,Ql(n,35).ngClassValid,Ql(n,35).ngClassInvalid,Ql(n,35).ngClassPending),e(n,39,0,t.getBuildingName(t.allBuildings)),e(n,42,0,Ql(n,47).ngClassUntouched,Ql(n,47).ngClassTouched,Ql(n,47).ngClassPristine,Ql(n,47).ngClassDirty,Ql(n,47).ngClassValid,Ql(n,47).ngClassInvalid,Ql(n,47).ngClassPending),e(n,63,0,t.getMountains()),e(n,66,0,t.getUnemployed()),e(n,69,0,t.getFreeLand())})}function Xy(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"app-mountains",[],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ql(e,1).onKeydownHandler(t)&&l),l},qy,Ay)),ci(1,114688,null,0,_y,[Vm,lv,Ym,zm,yy,Lm,yt],null,null)],function(e,n){e(n,1,0)},null)}var Qy=Gl("app-mountains",_y,Xy,{},{},[]);const Zy=(()=>{class e extends rv{constructor(e,n,t,l,i,r){super(n,e,t,l,i,Hu.PLATEAU,xu.PLATEAU),this.gameService=r}reset(e,n){e?super.reset(e,n):n?this.buildings=[]:(this.buildings=this.buildings.filter(e=>e.isFinished()),this.buildings.length>0&&this.gameService.enable(bu.PLATEAU),this.getBuildings().forEach(e=>e.verifyWonderEffects()))}}return e.ngInjectableDef=de({factory:function(){return new e(Le(Jm),Le(ev),Le(Mm),Le(lv),Le(VE),Le(Ym))},token:e,providedIn:"root"}),e})();class Jy extends XC{constructor(e,n,t,l,i,r,s,u){super(e,n,t,r,l,s,u,Hu.PLATEAU),this.techService=i,this.plateauService=r}areWonderBuildingsResearched(){return!zu.production||this.techService.isResearched(vu.WONDER_BUILDINGS)}}var e_=Zt({encapsulation:0,styles:[GT,["#allControl[_ngcontent-%COMP%]{margin-left:auto;width:108px;display:inline-block}#allControl[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:4px}"]],data:{}});function n_(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.openBuildModal()&&l),l},null,null)),(e()(),us(-1,null,["Build"]))],null,null)}function t_(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleArrangeMode()&&l),l},null,null)),(e()(),us(-1,null,["Arrange"]))],null,null)}function l_(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleArrangeMode()&&l),l},null,null)),(e()(),us(-1,null,["Stop"]))],null,null)}function i_(e){return cs(0,[(e()(),Kr(0,0,null,null,3,"option",[],null,null,null,null,null)),ci(1,147456,null,0,Xp,[rt,ct,[2,qp]],{value:[0,"value"]},null),ci(2,147456,null,0,Jp,[rt,ct,[8,null]],{value:[0,"value"]},null),(e()(),us(3,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,3,0,n.component.getBuildingName(n.context.$implicit))})}function r_(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"app-building",[],null,null,null,xC,fC)),ci(2,8503296,null,0,mC,[Vm,Mm,Jm,Wv,sv,Lm,Bm],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,2,0,t.demolishMode,t.combineMode,t.splitMode,t.arrangeMode,n.context.$implicit,t.plateauService)},null)}function s_(e){return cs(0,[(e()(),Kr(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),Kr(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["Buildings"])),(e()(),Kr(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,r_)),ci(6,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,6,0,n.component.getBuildings())},null)}function u_(e){return cs(0,[(e()(),Kr(0,0,null,null,4,"span",[["class","page"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.setPage(e.context.$implicit)&&l),l},null,null)),di(512,null,Uo,Go,[Ct,It,rt,ct]),ci(2,278528,null,0,Wo,[Uo],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),rs(3,{activePage:0}),(e()(),us(4,null,["page ",""]))],function(e,n){var t=e(n,3,0,n.component.currentPage===n.context.$implicit);e(n,2,0,"page",t)},function(e,n){e(n,4,0,n.context.$implicit+1)})}function o_(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"app-building",[],null,null,null,xC,fC)),ci(2,8503296,null,0,mC,[Vm,Mm,Jm,Wv,sv,Lm,Bm],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,2,0,t.demolishMode,t.combineMode,t.splitMode,t.arrangeMode,n.context.$implicit,t.plateauService)},null)}function a_(e){return cs(0,[(e()(),Kr(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,u_)),ci(3,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),(e()(),Kr(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,o_)),ci(6,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,3,0,t.getPagesNumber()),e(n,6,0,t.getPagedBuildings())},null)}function c_(e){return cs(0,[(e()(),Kr(0,0,null,null,56,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),Kr(2,0,null,null,1,"app-top-menu",[],null,null,null,BC,DC)),ci(3,114688,null,0,MC,[Ym],null,null),(e()(),Kr(4,0,null,null,52,"div",[["id","content"]],null,null,null,null,null)),(e()(),Kr(5,0,null,null,40,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,n_)),ci(7,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,t_)),ci(9,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,l_)),ci(11,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(12,0,null,null,33,"div",[["id","side"]],null,null,null,null,null)),(e()(),us(-1,null,[" Filter:"])),(e()(),Kr(14,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(15,0,null,null,30,"div",[["id","filters"]],null,null,null,null,null)),(e()(),Kr(16,0,null,null,11,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==Ql(e,17).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,17).onTouched()&&l),"change"===n&&(l=!1!==i.updateFilter(t)&&l),"ngModelChange"===n&&(l=!1!==(i.filterBuilding=t)&&l),l},null,null)),ci(17,16384,null,0,qp,[ct,rt],null,null),di(1024,null,yp,function(e){return[e]},[qp]),ci(19,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(21,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(22,0,null,null,3,"option",[],null,null,null,null,null)),ci(23,147456,null,0,Xp,[rt,ct,[2,qp]],{value:[0,"value"]},null),ci(24,147456,null,0,Jp,[rt,ct,[8,null]],{value:[0,"value"]},null),(e()(),us(25,null,["",""])),(e()(),$r(16777216,null,null,1,null,i_)),ci(27,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),(e()(),Kr(28,0,null,null,17,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==Ql(e,29).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,29).onTouched()&&l),"change"===n&&(l=!1!==i.updateFilter2(t)&&l),"ngModelChange"===n&&(l=!1!==(i.filterWorking=t)&&l),l},null,null)),ci(29,16384,null,0,qp,[ct,rt],null,null),di(1024,null,yp,function(e){return[e]},[qp]),ci(31,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(33,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(34,0,null,null,3,"option",[],null,null,null,null,null)),ci(35,147456,null,0,Xp,[rt,ct,[2,qp]],{value:[0,"value"]},null),ci(36,147456,null,0,Jp,[rt,ct,[8,null]],{value:[0,"value"]},null),(e()(),us(-1,null,["All"])),(e()(),Kr(38,0,null,null,3,"option",[],null,null,null,null,null)),ci(39,147456,null,0,Xp,[rt,ct,[2,qp]],{value:[0,"value"]},null),ci(40,147456,null,0,Jp,[rt,ct,[8,null]],{value:[0,"value"]},null),(e()(),us(-1,null,["Working"])),(e()(),Kr(42,0,null,null,3,"option",[],null,null,null,null,null)),ci(43,147456,null,0,Xp,[rt,ct,[2,qp]],{value:[0,"value"]},null),ci(44,147456,null,0,Jp,[rt,ct,[8,null]],{value:[0,"value"]},null),(e()(),us(-1,null,["Idle"])),(e()(),Kr(46,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(47,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(48,114688,null,0,Rp,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),us(49,null,[" "," \xa0\xa0\xa0 "])),(e()(),Kr(50,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(51,114688,null,0,Rp,[],{name:[0,"name"]},null),(e()(),us(52,null,[" "," "])),(e()(),$r(16777216,null,null,1,null,s_)),ci(54,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,a_)),ci(56,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,3,0),e(n,7,0,t.areWonderBuildingsResearched()),e(n,9,0,!t.arrangeMode&&t.getBuildings().length>1),e(n,11,0,t.arrangeMode),e(n,19,0,t.filterBuilding),e(n,23,0,t.allBuildings),e(n,24,0,t.allBuildings),e(n,27,0,t.getUniqueBuildingsFromCurrentView()),e(n,31,0,t.filterWorking),e(n,35,0,t.buildingStates.ALL),e(n,36,0,t.buildingStates.ALL),e(n,39,0,t.buildingStates.WORKING),e(n,40,0,t.buildingStates.WORKING),e(n,43,0,t.buildingStates.IDLE),e(n,44,0,t.buildingStates.IDLE),e(n,48,0,"hammer","Workers","0 0 0 2px"),e(n,51,0,"land"),e(n,54,0,!t.isPagedViewEnabled()),e(n,56,0,t.isPagedViewEnabled())},function(e,n){var t=n.component;e(n,16,0,Ql(n,21).ngClassUntouched,Ql(n,21).ngClassTouched,Ql(n,21).ngClassPristine,Ql(n,21).ngClassDirty,Ql(n,21).ngClassValid,Ql(n,21).ngClassInvalid,Ql(n,21).ngClassPending),e(n,25,0,t.getBuildingName(t.allBuildings)),e(n,28,0,Ql(n,33).ngClassUntouched,Ql(n,33).ngClassTouched,Ql(n,33).ngClassPristine,Ql(n,33).ngClassDirty,Ql(n,33).ngClassValid,Ql(n,33).ngClassInvalid,Ql(n,33).ngClassPending),e(n,49,0,t.getUnemployed()),e(n,52,0,t.getFreeLand())})}function h_(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"app-field",[],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ql(e,1).onKeydownHandler(t)&&l),l},c_,e_)),ci(1,114688,null,0,Jy,[Vm,lv,Ym,zm,lb,Zy,Lm,yt],null,null)],function(e,n){e(n,1,0)},null)}var d_=Gl("app-field",Jy,h_,{},{},[]);const g_=(()=>{class e extends rv{constructor(e,n,t,l,i){super(n,e,t,i,l,Hu.SEA,xu.SEA),this.seaBuildings=[]}init(){this.seaBuildings.push(new XS(this.servicesService,this.idService.getNextId(),200))}reset(e,n){this.seaBuildings=[],super.reset(e,n)}tick(e){this.seaBuildings.filter(e=>e.getBuildingType()===Ou.SCHOOL_OF_FISH).map(e=>e).filter(e=>e.getFish()>lo.SEA.SCHOOL_OF_FISH.SPLIT_THRESHOLD).forEach(e=>{if(1===Fu.randomBetween(1,lo.SEA.SCHOOL_OF_FISH.SPLIT_CHANCE)){const n=Math.floor(e.getFish()/2);e.reduceFish(n),this.seaBuildings.push(new XS(this.servicesService,this.idService.getNextId(),n))}}),0===this.seaBuildings.filter(e=>e.getBuildingType()===Ou.SCHOOL_OF_FISH).length&&1===Fu.randomBetween(1,lo.SEA.SCHOOL_OF_FISH.NEW_SCHOOL_CHANCE)&&this.seaBuildings.push(new XS(this.servicesService,this.idService.getNextId(),lo.SEA.SCHOOL_OF_FISH.NEW_SCHOOL_SIZE)),0===this.getSharksAmount()&&this.getFishAmount()>lo.SEA.SHARKS.BREED_THRESHOLD&&this.seaBuildings.push(new OE(this.servicesService,this.idService.getNextId(),1)),this.seaBuildings=this.seaBuildings.filter(e=>e.getBuildingType()!==Ou.SHARKS||0!==e.getSharks()),this.buildings.forEach(n=>n.tick(e)),this.seaBuildings.forEach(n=>n.tick(e))}save(){return{buildings:this.buildings,seaBuildings:this.seaBuildings}}load(e){this.buildings=[],this.seaBuildings=[];for(const n of e.buildings)this.buildings.push(this.buildingFactoryService.loadBuilding(n));for(const n of e.seaBuildings)this.seaBuildings.push(this.buildingFactoryService.loadBuilding(n))}addSeaBuilding(e){this.seaBuildings.push(e)}getSeaBuildings(){return this.seaBuildings}reduceFish(e){const n=this.seaBuildings.filter(e=>e.getBuildingType()===Ou.SCHOOL_OF_FISH);return n.length>0&&!!n[0].reduceFish(e)&&(0===n[0].getFish()&&this.seaBuildings.shift(),!0)}getFishAmount(){let e=0;return this.seaBuildings.filter(e=>e.getBuildingType()===Ou.SCHOOL_OF_FISH).map(e=>e).forEach(n=>e+=n.getFish()),e}getSharksAmount(){let e=0;return this.seaBuildings.filter(e=>e.getBuildingType()===Ou.SHARKS).map(e=>e).forEach(n=>e+=n.getSharks()),e}}return e.ngInjectableDef=de({factory:function(){return new e(Le(Jm),Le(ev),Le(Mm),Le(VE),Le(lv))},token:e,providedIn:"root"}),e})();class p_ extends XC{constructor(e,n,t,l,i,r,s){super(e,n,t,i,l,r,s,Hu.SEA),this.seaService=i}getSeaBuildings(){return this.seaService.getSeaBuildings()}}var m_=Zt({encapsulation:0,styles:[GT,[".buildingsWrapper[_ngcontent-%COMP%]{height:21.5%;margin-bottom:30px}#seaWrapper[_ngcontent-%COMP%]{height:58.6%}"]],data:{}});function f_(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleDemolishMode()&&l),l},null,null)),(e()(),us(-1,null,["Demolish"]))],null,null)}function S_(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleDemolishMode()&&l),l},null,null)),(e()(),us(-1,null,["Stop"]))],null,null)}function E_(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleArrangeMode()&&l),l},null,null)),(e()(),us(-1,null,["Arrange"]))],null,null)}function v_(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleArrangeMode()&&l),l},null,null)),(e()(),us(-1,null,["Stop"]))],null,null)}function b_(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleCombineMode()&&l),l},null,null)),(e()(),us(-1,null,["Combine"]))],null,null)}function O_(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleCombineMode()&&l),l},null,null)),(e()(),us(-1,null,["Stop"]))],null,null)}function R_(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleSplitMode()&&l),l},null,null)),(e()(),us(-1,null,["Split"]))],null,null)}function T_(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleSplitMode()&&l),l},null,null)),(e()(),us(-1,null,["Stop"]))],null,null)}function C_(e){return cs(0,[(e()(),Kr(0,0,null,null,3,"option",[],null,null,null,null,null)),ci(1,147456,null,0,Xp,[rt,ct,[2,qp]],{value:[0,"value"]},null),ci(2,147456,null,0,Jp,[rt,ct,[8,null]],{value:[0,"value"]},null),(e()(),us(3,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,3,0,n.component.getBuildingName(n.context.$implicit))})}function I_(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"app-building",[],null,null,null,xC,fC)),ci(2,8503296,null,0,mC,[Vm,Mm,Jm,Wv,sv,Lm,Bm],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,2,0,t.demolishMode,t.combineMode,t.splitMode,t.arrangeMode,n.context.$implicit,t.seaService)},null)}function y_(e){return cs(0,[(e()(),Kr(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),Kr(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["Buildings"])),(e()(),Kr(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,I_)),ci(6,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,6,0,n.component.getBuildings())},null)}function __(e){return cs(0,[(e()(),Kr(0,0,null,null,4,"span",[["class","page"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.setPage(e.context.$implicit)&&l),l},null,null)),di(512,null,Uo,Go,[Ct,It,rt,ct]),ci(2,278528,null,0,Wo,[Uo],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),rs(3,{activePage:0}),(e()(),us(4,null,["page ",""]))],function(e,n){var t=e(n,3,0,n.component.currentPage===n.context.$implicit);e(n,2,0,"page",t)},function(e,n){e(n,4,0,n.context.$implicit+1)})}function A_(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"app-building",[],null,null,null,xC,fC)),ci(2,8503296,null,0,mC,[Vm,Mm,Jm,Wv,sv,Lm,Bm],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,2,0,t.demolishMode,t.combineMode,t.splitMode,t.arrangeMode,n.context.$implicit,t.seaService)},null)}function w_(e){return cs(0,[(e()(),Kr(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,__)),ci(3,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),(e()(),Kr(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,A_)),ci(6,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,3,0,t.getPagesNumber()),e(n,6,0,t.getPagedBuildings())},null)}function N_(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"app-building",[],null,null,null,xC,fC)),ci(2,8503296,null,0,mC,[Vm,Mm,Jm,Wv,sv,Lm,Bm],{building:[0,"building"],parentRegion:[1,"parentRegion"]},null)],function(e,n){e(n,2,0,n.context.$implicit,n.component.seaService)},null)}function P_(e){return cs(0,[(e()(),Kr(0,0,null,null,84,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),Kr(2,0,null,null,1,"app-top-menu",[],null,null,null,BC,DC)),ci(3,114688,null,0,MC,[Ym],null,null),(e()(),Kr(4,0,null,null,80,"div",[["id","content"]],null,null,null,null,null)),(e()(),Kr(5,0,null,null,54,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Kr(6,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.openBuildModal()&&l),l},null,null)),(e()(),us(-1,null,["Build"])),(e()(),$r(16777216,null,null,1,null,f_)),ci(9,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,S_)),ci(11,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,E_)),ci(13,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,v_)),ci(15,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(16,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.autoSort()&&l),l},null,null)),(e()(),us(-1,null,["Sort"])),(e()(),$r(16777216,null,null,1,null,b_)),ci(19,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,O_)),ci(21,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,R_)),ci(23,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,T_)),ci(25,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(26,0,null,null,33,"div",[["id","side"]],null,null,null,null,null)),(e()(),us(-1,null,[" Filter:"])),(e()(),Kr(28,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(29,0,null,null,30,"div",[["id","filters"]],null,null,null,null,null)),(e()(),Kr(30,0,null,null,11,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==Ql(e,31).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,31).onTouched()&&l),"change"===n&&(l=!1!==i.updateFilter(t)&&l),"ngModelChange"===n&&(l=!1!==(i.filterBuilding=t)&&l),l},null,null)),ci(31,16384,null,0,qp,[ct,rt],null,null),di(1024,null,yp,function(e){return[e]},[qp]),ci(33,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(35,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(36,0,null,null,3,"option",[],null,null,null,null,null)),ci(37,147456,null,0,Xp,[rt,ct,[2,qp]],{value:[0,"value"]},null),ci(38,147456,null,0,Jp,[rt,ct,[8,null]],{value:[0,"value"]},null),(e()(),us(39,null,["",""])),(e()(),$r(16777216,null,null,1,null,C_)),ci(41,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),(e()(),Kr(42,0,null,null,17,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==Ql(e,43).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,43).onTouched()&&l),"change"===n&&(l=!1!==i.updateFilter2(t)&&l),"ngModelChange"===n&&(l=!1!==(i.filterWorking=t)&&l),l},null,null)),ci(43,16384,null,0,qp,[ct,rt],null,null),di(1024,null,yp,function(e){return[e]},[qp]),ci(45,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(47,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(48,0,null,null,3,"option",[],null,null,null,null,null)),ci(49,147456,null,0,Xp,[rt,ct,[2,qp]],{value:[0,"value"]},null),ci(50,147456,null,0,Jp,[rt,ct,[8,null]],{value:[0,"value"]},null),(e()(),us(-1,null,["All"])),(e()(),Kr(52,0,null,null,3,"option",[],null,null,null,null,null)),ci(53,147456,null,0,Xp,[rt,ct,[2,qp]],{value:[0,"value"]},null),ci(54,147456,null,0,Jp,[rt,ct,[8,null]],{value:[0,"value"]},null),(e()(),us(-1,null,["Working"])),(e()(),Kr(56,0,null,null,3,"option",[],null,null,null,null,null)),ci(57,147456,null,0,Xp,[rt,ct,[2,qp]],{value:[0,"value"]},null),ci(58,147456,null,0,Jp,[rt,ct,[8,null]],{value:[0,"value"]},null),(e()(),us(-1,null,["Idle"])),(e()(),Kr(60,0,null,null,11,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(61,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(62,114688,null,0,Rp,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),us(63,null,[" "," \xa0\xa0\xa0 "])),(e()(),Kr(64,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(65,114688,null,0,Rp,[],{name:[0,"name"]},null),(e()(),us(66,null,[" "," "])),(e()(),Kr(67,0,null,null,4,"div",[["id","allControl"]],null,null,null,null,null)),(e()(),Kr(68,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.enableAll()&&l),l},null,null)),(e()(),us(-1,null,["all on"])),(e()(),Kr(70,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.disableAll()&&l),l},null,null)),(e()(),us(-1,null,["all off"])),(e()(),$r(16777216,null,null,1,null,y_)),ci(73,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,w_)),ci(75,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(76,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(77,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(78,0,null,null,6,"div",[["id","seaWrapper"]],null,null,null,null,null)),(e()(),Kr(79,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),Kr(80,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["Sea"])),(e()(),Kr(82,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,N_)),ci(84,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,3,0),e(n,9,0,!t.demolishMode),e(n,11,0,t.demolishMode),e(n,13,0,!t.arrangeMode&&t.getBuildings().length>1),e(n,15,0,t.arrangeMode),e(n,19,0,!t.combineMode&&t.isUrbanPlanningEnabled()&&t.hasCombinableBuildings()),e(n,21,0,t.combineMode),e(n,23,0,!t.splitMode&&t.isUrbanPlanningEnabled()&&t.hasSplittableBuildings()),e(n,25,0,t.splitMode),e(n,33,0,t.filterBuilding),e(n,37,0,t.allBuildings),e(n,38,0,t.allBuildings),e(n,41,0,t.getUniqueBuildingsFromCurrentView()),e(n,45,0,t.filterWorking),e(n,49,0,t.buildingStates.ALL),e(n,50,0,t.buildingStates.ALL),e(n,53,0,t.buildingStates.WORKING),e(n,54,0,t.buildingStates.WORKING),e(n,57,0,t.buildingStates.IDLE),e(n,58,0,t.buildingStates.IDLE),e(n,62,0,"hammer","Workers","0 0 0 2px"),e(n,65,0,"land"),e(n,73,0,!t.isPagedViewEnabled()),e(n,75,0,t.isPagedViewEnabled()),e(n,84,0,t.getSeaBuildings())},function(e,n){var t=n.component;e(n,30,0,Ql(n,35).ngClassUntouched,Ql(n,35).ngClassTouched,Ql(n,35).ngClassPristine,Ql(n,35).ngClassDirty,Ql(n,35).ngClassValid,Ql(n,35).ngClassInvalid,Ql(n,35).ngClassPending),e(n,39,0,t.getBuildingName(t.allBuildings)),e(n,42,0,Ql(n,47).ngClassUntouched,Ql(n,47).ngClassTouched,Ql(n,47).ngClassPristine,Ql(n,47).ngClassDirty,Ql(n,47).ngClassValid,Ql(n,47).ngClassInvalid,Ql(n,47).ngClassPending),e(n,63,0,t.getUnemployed()),e(n,66,0,t.getFreeLand())})}function k_(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"app-sea",[],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ql(e,1).onKeydownHandler(t)&&l),l},P_,m_)),ci(1,114688,null,0,p_,[Vm,lv,Ym,zm,g_,Lm,yt],null,null)],function(e,n){e(n,1,0)},null)}var x_=Gl("app-sea",p_,k_,{},{},[]);class M_{constructor(e){this.gameService=e}ngOnInit(){}isForestManagementEnabled(){return this.gameService.isEnabled(bu.FORESTER)}}var D_=Zt({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{display:-webkit-box;display:flex;height:100%;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}.entry[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:auto;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:100%;text-align:center;border-right:2px solid #000;cursor:pointer;text-decoration:none;color:#000;font-size:1em}.entry[_ngcontent-%COMP%]:last-of-type{border:none}.entry.active[_ngcontent-%COMP%]{background:var(--active-colour)}"]],data:{}});function L_(e){return cs(0,[(e()(),Kr(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/management/forestM"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==Ql(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),ci(1,671744,[[6,4]],0,Ug,[Fg,yd,Eo],{routerLink:[0,"routerLink"]},null),ci(2,1720320,null,2,Bg,[Fg,rt,ct,[2,Hg],[2,Ug]],{routerLinkActive:[0,"routerLinkActive"]},null),Zr(603979776,5,{links:1}),Zr(603979776,6,{linksWithHrefs:1}),(e()(),us(-1,null,["Forest"]))],function(e,n){e(n,1,0,"/management/forestM"),e(n,2,0,"active")},function(e,n){e(n,0,0,Ql(n,1).target,Ql(n,1).href)})}function F_(e){return cs(0,[(e()(),Kr(0,0,null,null,14,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/management/general"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==Ql(e,2).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),ci(2,671744,[[2,4]],0,Ug,[Fg,yd,Eo],{routerLink:[0,"routerLink"]},null),ci(3,1720320,null,2,Bg,[Fg,rt,ct,[2,Hg],[2,Ug]],{routerLinkActive:[0,"routerLinkActive"]},null),Zr(603979776,1,{links:1}),Zr(603979776,2,{linksWithHrefs:1}),(e()(),us(-1,null,["General"])),(e()(),Kr(7,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/management/effects"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==Ql(e,8).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),ci(8,671744,[[4,4]],0,Ug,[Fg,yd,Eo],{routerLink:[0,"routerLink"]},null),ci(9,1720320,null,2,Bg,[Fg,rt,ct,[2,Hg],[2,Ug]],{routerLinkActive:[0,"routerLinkActive"]},null),Zr(603979776,3,{links:1}),Zr(603979776,4,{linksWithHrefs:1}),(e()(),us(-1,null,["Effects"])),(e()(),$r(16777216,null,null,1,null,L_)),ci(14,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,"/management/general"),e(n,3,0,"active"),e(n,8,0,"/management/effects"),e(n,9,0,"active"),e(n,14,0,t.isForestManagementEnabled())},function(e,n){e(n,1,0,Ql(n,2).target,Ql(n,2).href),e(n,7,0,Ql(n,8).target,Ql(n,8).href)})}class H_{constructor(e,n,t){this.managementService=e,this.resourcesService=n,this.gameService=t}ngOnInit(){}getRations(){return this.managementService.getRations()}changeFoodValue(e){this.managementService.setRations(e.target.value)}changeClothesValue(e){this.managementService.setClothesRations(e.target.value)}changeAlcoholValue(e){this.managementService.setAlcoholRations(e.target.value)}getClothesRations(){return this.managementService.getClothesRations()}getAlcoholRations(){return this.managementService.getAlcoholRations()}updateFurClothes(){this.managementService.toggleFurClothes()}getFurClothes(){return this.managementService.getFurClothes()}updateFoodNutrition(){this.managementService.toggleFoodNutrition()}getFoodNutrition(){return this.managementService.getFoodNutrition()}updateComplexWorkers(){this.managementService.toggleComplexWorkers()}getComplexWorkers(){return this.managementService.getComplexWorkers()}isHREnabled(){return this.gameService.isEnabled(bu.HUMAN_RESOURCES)}getSecondHeaderRow(){return this.managementService.getSecondHeaderRow()}updateSecondHeaderRow(){this.managementService.toggleSecondHeaderRow()}getShowFreeWorkers(){return this.managementService.getShowFreeWorkers()}updateShowFreeWorkers(){this.managementService.toggleShowFreeWorkers()}getShowPopulation(){return this.managementService.getShowPopulation()}updateShowPopulation(){this.managementService.toggleShowPopulation()}getFoodLines(){return this.managementService.getFoodPriority()}getResourceName(e){return Pu.prepareResourceName(e)}up(e,n){this.managementService.up(e,n)}down(e,n){this.managementService.down(e,n)}getShowResearchProgress(){return this.managementService.getShowResearchProgress()}updateShowResearchProgress(){this.managementService.toggleShowResearchProgress()}getShowFaith(){return this.managementService.getShowFaith()}updateShowFaith(){this.managementService.toggleShowFaith()}isFaithUnlocked(){return this.gameService.isEnabled(bu.RELIGION)}getLogFiredWorkers(){return this.managementService.getLogFiredWorkers()}updateLogFiredWorkers(){this.managementService.toggleLogFiredWorkers()}getDefaultWorkshopResearch(){return this.managementService.getDefaultWorkshopResearch()}updateDefaultWorkshopResearch(){this.managementService.toggleDefaultWorkshopResearch()}getSwitchHunterFromTaming(){return this.managementService.getSwitchHunterFromTaming()}updateSwitchHunterFromTaming(){this.managementService.toggleSwitchHunterFromTaming()}getPlowInSummer(){return this.managementService.getPlowInSummer()}updatePlowInSummer(){this.managementService.togglePlowInSummer()}getLogAutoTrade(){return this.managementService.getLogAutoTrade()}updateLogAutoTrade(){this.managementService.toggleLogAutoTrade()}getShowRaw(){return this.managementService.getShowRaw()}updateShowRaw(){this.managementService.toggleShowRaw()}getShowProcessed(){return this.managementService.getShowProcessed()}updateShowProcessed(){this.managementService.toggleShowProcessed()}getShowFood(){return this.managementService.getShowFood()}updateShowFood(){this.managementService.toggleShowFood()}getShowTools(){return this.managementService.getShowTools()}updateShowTools(){this.managementService.toggleShowTools()}getLogSickness(){return this.managementService.getLogSickness()}updateLogSickness(){this.managementService.toggleLogSickness()}}var U_=Zt({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:99%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#content[_ngcontent-%COMP%]{margin:.5%;height:94%;overflow-y:auto}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}.label[_ngcontent-%COMP%]{display:inline-block;width:80px}.slidecontainer[_ngcontent-%COMP%]{display:inline-block;width:150px}.slider[_ngcontent-%COMP%]{-webkit-appearance:none;width:100%;height:10px;border-radius:5px;background:var(--passive-colour);outline:0;opacity:.7;-webkit-transition:opacity .2s;transition:opacity .2s}.slider[_ngcontent-%COMP%]:hover{opacity:1}.slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:15px;height:15px;border-radius:50%;background:var(--active-colour);cursor:pointer}.slider[_ngcontent-%COMP%]::-moz-range-thumb{width:15px;height:15px;border-radius:50%;background:var(--active-colour);cursor:pointer}app-icon[_ngcontent-%COMP%]{display:inline-block}#arrows[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.arrow[_ngcontent-%COMP%]{font-size:.7em;width:12px;display:inline-block}.priorityLine[_ngcontent-%COMP%]{height:34px}.entry[_ngcontent-%COMP%]{display:inline-block;margin:2px}.item[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}#index[_ngcontent-%COMP%]{display:inline-block;width:10px}"]],data:{}});function G_(e){return cs(0,[(e()(),Kr(0,0,null,null,3,null,null,null,null,null,null,null)),(e()(),Kr(1,0,null,null,0,"input",[["id","workManagement"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.updateComplexWorkers()&&l),l},null,null)),(e()(),Kr(2,0,null,null,1,"label",[["for","workManagement"]],null,null,null,null,null)),(e()(),us(-1,null,["Enable automated work management for some buildings"]))],null,function(e,n){e(n,1,0,n.component.getComplexWorkers())})}function B_(e){return cs(0,[(e()(),Kr(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),Kr(1,0,null,null,0,"input",[["id","showFaith"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.updateShowFaith()&&l),l},null,null)),(e()(),Kr(2,0,null,null,1,"label",[["for","showFaith"]],null,null,null,null,null)),(e()(),us(-1,null,["Show faith in the header"])),(e()(),Kr(4,0,null,null,0,"br",[],null,null,null,null,null))],null,function(e,n){e(n,1,0,n.component.getShowFaith())})}function W_(e){return cs(0,[(e()(),Kr(0,0,null,null,8,"div",[["class","entry"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,7,"span",[["class","item"]],null,null,null,null,null)),(e()(),Kr(2,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(3,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Kr(4,0,null,null,4,"span",[["id","arrows"]],null,null,null,null,null)),(e()(),Kr(5,0,null,null,1,"button",[["class","arrow"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.up(e.context.$implicit,e.parent.context.index)&&l),l},null,null)),(e()(),us(-1,null,["\u2191"])),(e()(),Kr(7,0,null,null,1,"button",[["class","arrow"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.down(e.context.$implicit,e.parent.context.index)&&l),l},null,null)),(e()(),us(-1,null,["\u2193"]))],function(e,n){e(n,3,0,n.component.getResourceName(n.context.$implicit),"resources")},null)}function V_(e){return cs(0,[(e()(),Kr(0,0,null,null,4,"div",[["class","priorityLine"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"span",[["id","index"]],null,null,null,null,null)),(e()(),us(2,null,["",""])),(e()(),$r(16777216,null,null,1,null,W_)),ci(4,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,4,0,n.context.$implicit)},function(e,n){e(n,2,0,n.context.index+1)})}function z_(e){return cs(0,[(e()(),Kr(0,0,null,null,105,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),Kr(2,0,null,null,1,"app-management-top-menu",[],null,null,null,F_,D_)),ci(3,114688,null,0,M_,[Ym],null,null),(e()(),Kr(4,0,null,null,101,"div",[["id","content"]],null,null,null,null,null)),(e()(),Kr(5,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),Kr(6,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["General Management"])),(e()(),Kr(8,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["Rations"])),(e()(),Kr(10,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(11,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),Kr(12,0,null,null,1,"span",[["class","label"]],null,null,null,null,null)),(e()(),us(13,null,["food: ",""])),(e()(),Kr(14,0,null,null,1,"div",[["class","slidecontainer"]],null,null,null,null,null)),(e()(),Kr(15,0,null,null,0,"input",[["class","slider"],["max","4"],["min","1"],["type","range"],["value","2"]],[[8,"value",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.changeFoodValue(t)&&l),l},null,null)),(e()(),Kr(16,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),Kr(17,0,null,null,1,"span",[["class","label"]],null,null,null,null,null)),(e()(),us(18,null,["clothes: ",""])),(e()(),Kr(19,0,null,null,1,"div",[["class","slidecontainer"]],null,null,null,null,null)),(e()(),Kr(20,0,null,null,0,"input",[["class","slider"],["max","4"],["min","1"],["type","range"],["value","2"]],[[8,"value",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.changeClothesValue(t)&&l),l},null,null)),(e()(),Kr(21,0,null,null,1,"span",[["class","label"]],null,null,null,null,null)),(e()(),us(22,null,["alcohol: ",""])),(e()(),Kr(23,0,null,null,1,"div",[["class","slidecontainer"]],null,null,null,null,null)),(e()(),Kr(24,0,null,null,0,"input",[["class","slider"],["max","4"],["min","1"],["type","range"],["value","1"]],[[8,"value",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.changeAlcoholValue(t)&&l),l},null,null)),(e()(),Kr(25,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(26,0,null,null,0,"input",[["id","furClothes"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.updateFurClothes()&&l),l},null,null)),(e()(),Kr(27,0,null,null,1,"label",[["for","furClothes"]],null,null,null,null,null)),(e()(),us(-1,null,["Allow fur when no clothes are available"])),(e()(),Kr(29,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,G_)),ci(31,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(32,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(33,0,null,null,3,null,null,null,null,null,null,null)),(e()(),Kr(34,0,null,null,0,"input",[["id","defaultWorkshopResearch"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.updateDefaultWorkshopResearch()&&l),l},null,null)),(e()(),Kr(35,0,null,null,1,"label",[["for","defaultWorkshopResearch"]],null,null,null,null,null)),(e()(),us(-1,null,["Workshops start with research mode (on) or crafting (off)"])),(e()(),Kr(37,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(38,0,null,null,3,null,null,null,null,null,null,null)),(e()(),Kr(39,0,null,null,0,"input",[["id","switchHunterFromTaming"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.updateSwitchHunterFromTaming()&&l),l},null,null)),(e()(),Kr(40,0,null,null,1,"label",[["for","switchHunterFromTaming"]],null,null,null,null,null)),(e()(),us(-1,null,["If enabled hunters won't stop taming animals even if pastures are full"])),(e()(),Kr(42,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(43,0,null,null,3,null,null,null,null,null,null,null)),(e()(),Kr(44,0,null,null,0,"input",[["id","plowInSummer"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.updatePlowInSummer()&&l),l},null,null)),(e()(),Kr(45,0,null,null,1,"label",[["for","plowInSummer"]],null,null,null,null,null)),(e()(),us(-1,null,["Allow fields to be plowed in summer"])),(e()(),Kr(47,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(48,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),us(-1,null,["Log management"])),(e()(),Kr(50,0,null,null,0,"input",[["id","logFiredWorkers"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.updateLogFiredWorkers()&&l),l},null,null)),(e()(),Kr(51,0,null,null,1,"label",[["for","logFiredWorkers"]],null,null,null,null,null)),(e()(),us(-1,null,["Log message when worker is removed from building"])),(e()(),Kr(53,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(54,0,null,null,0,"input",[["id","logAutoTrade"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.updateLogAutoTrade()&&l),l},null,null)),(e()(),Kr(55,0,null,null,1,"label",[["for","logAutoTrade"]],null,null,null,null,null)),(e()(),us(-1,null,["Log message when auto trade has been performed"])),(e()(),Kr(57,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(58,0,null,null,0,"input",[["id","logSickness"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.updateLogSickness()&&l),l},null,null)),(e()(),Kr(59,0,null,null,1,"label",[["for","logSickness"]],null,null,null,null,null)),(e()(),us(-1,null,["Log sickness related events"])),(e()(),Kr(61,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(62,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),us(-1,null,["Header management"])),(e()(),Kr(64,0,null,null,0,"input",[["id","secondHeaderRow"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.updateSecondHeaderRow()&&l),l},null,null)),(e()(),Kr(65,0,null,null,1,"label",[["for","secondHeaderRow"]],null,null,null,null,null)),(e()(),us(-1,null,["Display two rows in the header (resources will be displayed in second row)"])),(e()(),Kr(67,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(68,0,null,null,0,"input",[["id","foodNutrition"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.updateFoodNutrition()&&l),l},null,null)),(e()(),Kr(69,0,null,null,1,"label",[["for","foodNutrition"]],null,null,null,null,null)),(e()(),us(-1,null,["Show food nutrition in the header"])),(e()(),Kr(71,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(72,0,null,null,0,"input",[["id","showRaw"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.updateShowRaw()&&l),l},null,null)),(e()(),Kr(73,0,null,null,1,"label",[["for","showRaw"]],null,null,null,null,null)),(e()(),us(-1,null,["Show raw resources tooltip in the header"])),(e()(),Kr(75,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(76,0,null,null,0,"input",[["id","showProcessed"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.updateShowProcessed()&&l),l},null,null)),(e()(),Kr(77,0,null,null,1,"label",[["for","showProcessed"]],null,null,null,null,null)),(e()(),us(-1,null,["Show processed resources tooltip in the header"])),(e()(),Kr(79,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(80,0,null,null,0,"input",[["id","showFood"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.updateShowFood()&&l),l},null,null)),(e()(),Kr(81,0,null,null,1,"label",[["for","showFood"]],null,null,null,null,null)),(e()(),us(-1,null,["Show food resources tooltip in the header"])),(e()(),Kr(83,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(84,0,null,null,0,"input",[["id","showTools"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.updateShowTools()&&l),l},null,null)),(e()(),Kr(85,0,null,null,1,"label",[["for","showTools"]],null,null,null,null,null)),(e()(),us(-1,null,["Show tools resources tooltip in the header"])),(e()(),Kr(87,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(88,0,null,null,0,"input",[["id","showPopulation"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.updateShowPopulation()&&l),l},null,null)),(e()(),Kr(89,0,null,null,1,"label",[["for","showPopulation"]],null,null,null,null,null)),(e()(),us(-1,null,["Show population in the header"])),(e()(),Kr(91,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(92,0,null,null,0,"input",[["id","showFreeWorkers"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.updateShowFreeWorkers()&&l),l},null,null)),(e()(),Kr(93,0,null,null,1,"label",[["for","showFreeWorkers"]],null,null,null,null,null)),(e()(),us(-1,null,["Show free workers in the header"])),(e()(),Kr(95,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,B_)),ci(97,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(98,0,null,null,0,"input",[["id","showResearchProgress"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.updateShowResearchProgress()&&l),l},null,null)),(e()(),Kr(99,0,null,null,1,"label",[["for","showResearchProgress"]],null,null,null,null,null)),(e()(),us(-1,null,["Show research progress in the header"])),(e()(),Kr(101,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),us(-1,null,["food priority"])),(e()(),Kr(103,0,null,null,2,"div",[["id","foodPriorityList"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,V_)),ci(105,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,3,0),e(n,31,0,t.isHREnabled()),e(n,97,0,t.isFaithUnlocked()),e(n,105,0,t.getFoodLines())},function(e,n){var t=n.component;e(n,13,0,.5*t.getRations()),e(n,15,0,t.getRations()),e(n,18,0,t.getClothesRations()),e(n,20,0,t.getClothesRations()),e(n,22,0,t.getAlcoholRations()),e(n,24,0,t.getAlcoholRations()),e(n,26,0,t.getFurClothes()),e(n,34,0,t.getDefaultWorkshopResearch()),e(n,39,0,t.getSwitchHunterFromTaming()),e(n,44,0,t.getPlowInSummer()),e(n,50,0,t.getLogFiredWorkers()),e(n,54,0,t.getLogAutoTrade()),e(n,58,0,t.getLogSickness()),e(n,64,0,t.getSecondHeaderRow()),e(n,68,0,t.getFoodNutrition()),e(n,72,0,t.getShowRaw()),e(n,76,0,t.getShowProcessed()),e(n,80,0,t.getShowFood()),e(n,84,0,t.getShowTools()),e(n,88,0,t.getShowPopulation()),e(n,92,0,t.getShowFreeWorkers()),e(n,98,0,t.getShowResearchProgress())})}function Y_(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"app-management",[],null,null,null,z_,U_)),ci(1,114688,null,0,H_,[Wv,Jm,Ym],null,null)],function(e,n){e(n,1,0)},null)}var $_=Gl("app-management",H_,Y_,{},{},[]);class K_{constructor(e){this.effectsService=e}ngOnInit(){}getBuildingsEffects(){return this.effectsService.getBuildingEffects().filter(e=>!e.isBuff()).sort((e,n)=>e.isPermanent()&&!n.isPermanent()?-1:e.isPermanent()&&n.isPermanent()?0:!e.isPermanent()&&n.isPermanent()?1:void 0)}getArmyEffects(){return this.effectsService.getArmyEffects()}getBuildingName(e){return Pu.prepareBuildingName(e)}getTroopName(e){return Pu.prepareTroopName(e)}getNatureEffects(){return this.effectsService.getNatureEffects()}}var j_=Zt({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:99%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#content[_ngcontent-%COMP%]{margin:.5%;height:94%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#buildingEffects[_ngcontent-%COMP%]{height:40%;border:1px solid #000}#armyEffects[_ngcontent-%COMP%]{height:33%;border:1px solid #000}#natureEffects[_ngcontent-%COMP%]{height:15%;border:1px solid #000}.rows[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;text-align:center;height:90.5%;overflow-y:auto}.natureRows[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;text-align:center;height:79%;overflow-y:auto}.row[_ngcontent-%COMP%]{display:-webkit-box;display:flex;border:1px solid #000;margin:3px}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{border-right:none}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){-webkit-box-flex:0;flex:0 0 7%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){-webkit-box-flex:0;flex:0 0 35%}.natureRow[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){-webkit-box-flex:0;flex:0 0 50%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){-webkit-box-flex:0;flex:0 0 30%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(4){-webkit-box-flex:0;flex:0 0 13%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(5){-webkit-box-flex:0;flex:0 0 15%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:auto;border-right:1px solid #000}.headers[_ngcontent-%COMP%]{margin:3px 3px 0;display:-webkit-box;display:flex;width:98.3%;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;text-align:center;font-size:.9em}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border:1px solid #000;border-left:none}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-of-type{border-left:1px solid #000}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){-webkit-box-flex:0;flex:0 0 7%}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){-webkit-box-flex:0;flex:0 0 35%}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){-webkit-box-flex:0;flex:0 0 30%}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(4){-webkit-box-flex:0;flex:0 0 13%}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(5){-webkit-box-flex:0;flex:0 0 15%}.natureHeaders[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){-webkit-box-flex:0;flex:0 0 50%}.positive[_ngcontent-%COMP%]{color:var(--positive-colour)}.negative[_ngcontent-%COMP%]{color:var(--negative-colour)}"]],data:{}});function q_(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[["class","positive"]],null,null,null,null,null)),(e()(),us(1,null,["+","% "]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.effect)})}function X_(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[["class","negative"]],null,null,null,null,null)),(e()(),us(1,null,["","% "]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.effect)})}function Q_(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(1,null,[""," "]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.duration)})}function Z_(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["permanent"]))],null,null)}function J_(e){return cs(0,[(e()(),Kr(0,0,null,null,14,"div",[["class","row"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(2,null,["","."])),(e()(),Kr(3,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(4,null,["",""])),(e()(),Kr(5,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(6,null,["",""])),(e()(),$r(16777216,null,null,1,null,q_)),ci(8,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,X_)),ci(10,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,Q_)),ci(12,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,Z_)),ci(14,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,8,0,n.context.$implicit.effect>=0),e(n,10,0,n.context.$implicit.effect<0),e(n,12,0,n.context.$implicit.duration>0),e(n,14,0,n.context.$implicit.duration<0)},function(e,n){var t=n.component;e(n,2,0,n.context.index+1),e(n,4,0,n.context.$implicit.name),e(n,6,0,t.getBuildingName(n.context.$implicit.building))})}function eA(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[["class","positive"]],null,null,null,null,null)),(e()(),us(1,null,["+","% "]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.effect)})}function nA(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[["class","negative"]],null,null,null,null,null)),(e()(),us(1,null,["","% "]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.effect)})}function tA(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(1,null,[""," "]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.duration)})}function lA(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["permanent"]))],null,null)}function iA(e){return cs(0,[(e()(),Kr(0,0,null,null,14,"div",[["class","row"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(2,null,["","."])),(e()(),Kr(3,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(4,null,["",""])),(e()(),Kr(5,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(6,null,["",""])),(e()(),$r(16777216,null,null,1,null,eA)),ci(8,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,nA)),ci(10,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,tA)),ci(12,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,lA)),ci(14,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,8,0,n.context.$implicit.effect>=0),e(n,10,0,n.context.$implicit.effect<0),e(n,12,0,n.context.$implicit.duration>0),e(n,14,0,n.context.$implicit.duration<0)},function(e,n){var t=n.component;e(n,2,0,n.context.index+1),e(n,4,0,n.context.$implicit.name),e(n,6,0,t.getTroopName(n.context.$implicit.troop))})}function rA(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[["class","positive"]],null,null,null,null,null)),(e()(),us(1,null,["+","% "]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.effect)})}function sA(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[["class","negative"]],null,null,null,null,null)),(e()(),us(1,null,["","% "]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.effect)})}function uA(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(1,null,[""," "]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.duration)})}function oA(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["permanent"]))],null,null)}function aA(e){return cs(0,[(e()(),Kr(0,0,null,null,12,"div",[["class","row natureRow"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(2,null,["","."])),(e()(),Kr(3,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(4,null,["",""])),(e()(),$r(16777216,null,null,1,null,rA)),ci(6,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,sA)),ci(8,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,uA)),ci(10,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,oA)),ci(12,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,6,0,n.context.$implicit.effect>=0),e(n,8,0,n.context.$implicit.effect<0),e(n,10,0,n.context.$implicit.duration>0),e(n,12,0,n.context.$implicit.duration<0)},function(e,n){e(n,2,0,n.context.index+1),e(n,4,0,n.context.$implicit.name)})}function cA(e){return cs(0,[(e()(),Kr(0,0,null,null,56,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),Kr(2,0,null,null,1,"app-management-top-menu",[],null,null,null,F_,D_)),ci(3,114688,null,0,M_,[Ym],null,null),(e()(),Kr(4,0,null,null,52,"div",[["id","content"]],null,null,null,null,null)),(e()(),Kr(5,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),Kr(6,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["Effects Management"])),(e()(),Kr(8,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["Buildings effects"])),(e()(),Kr(10,0,null,null,14,"div",[["id","buildingEffects"]],null,null,null,null,null)),(e()(),Kr(11,0,null,null,10,"div",[["class","headers"]],null,null,null,null,null)),(e()(),Kr(12,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["#"])),(e()(),Kr(14,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["name"])),(e()(),Kr(16,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["building"])),(e()(),Kr(18,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["effect"])),(e()(),Kr(20,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["duration"])),(e()(),Kr(22,0,null,null,2,"div",[["class","rows"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,J_)),ci(24,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),(e()(),Kr(25,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["Army effects"])),(e()(),Kr(27,0,null,null,14,"div",[["id","armyEffects"]],null,null,null,null,null)),(e()(),Kr(28,0,null,null,10,"div",[["class","headers"]],null,null,null,null,null)),(e()(),Kr(29,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["#"])),(e()(),Kr(31,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["name"])),(e()(),Kr(33,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["building"])),(e()(),Kr(35,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["effect"])),(e()(),Kr(37,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["duration"])),(e()(),Kr(39,0,null,null,2,"div",[["class","rows"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,iA)),ci(41,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),(e()(),Kr(42,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["Nature effects"])),(e()(),Kr(44,0,null,null,12,"div",[["id","natureEffects"]],null,null,null,null,null)),(e()(),Kr(45,0,null,null,8,"div",[["class","headers natureHeaders"]],null,null,null,null,null)),(e()(),Kr(46,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["#"])),(e()(),Kr(48,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["name"])),(e()(),Kr(50,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["effect"])),(e()(),Kr(52,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["duration"])),(e()(),Kr(54,0,null,null,2,"div",[["class","natureRows"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,aA)),ci(56,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,3,0),e(n,24,0,t.getBuildingsEffects()),e(n,41,0,t.getArmyEffects()),e(n,56,0,t.getNatureEffects())},null)}function hA(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"app-effects-management",[],null,null,null,cA,j_)),ci(1,114688,null,0,K_,[nv],null,null)],function(e,n){e(n,1,0)},null)}var dA=Gl("app-effects-management",K_,hA,{},{},[]);class gA{constructor(e){this.landService=e}ngOnInit(){}getForestSize(){return this.landService.getForest()}getLandSize(){return this.landService.getLand()}getForestOptions(){return this.landService.getForestOptions()}}var pA=Zt({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:99%}#content[_ngcontent-%COMP%]{margin:.5%;height:94%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}.foresterLabel[_ngcontent-%COMP%]{display:inline-block;width:160px}input[type=number][_ngcontent-%COMP%]{width:6ch}"]],data:{}});function mA(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.getForestSize())})}function fA(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[["class","critical"]],null,null,null,null,null)),(e()(),us(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.getForestSize())})}function SA(e){return cs(0,[(e()(),Kr(0,0,null,null,65,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),Kr(2,0,null,null,1,"app-management-top-menu",[],null,null,null,F_,D_)),ci(3,114688,null,0,M_,[Ym],null,null),(e()(),Kr(4,0,null,null,61,"div",[["id","content"]],null,null,null,null,null)),(e()(),Kr(5,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),Kr(6,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["Forest Management"])),(e()(),Kr(8,0,null,null,10,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(9,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(10,114688,null,0,Rp,[],{name:[0,"name"]},null),(e()(),$r(16777216,null,null,1,null,mA)),ci(12,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,fA)),ci(14,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),us(-1,null,[" \xa0\xa0 "])),(e()(),Kr(16,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(17,114688,null,0,Rp,[],{name:[0,"name"]},null),(e()(),us(18,null,[" "," "])),(e()(),Kr(19,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),us(-1,null,[" Plant trees if:"])),(e()(),Kr(21,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(22,0,null,null,5,"input",[["id","forest"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==Ql(e,23).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==Ql(e,23).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.getForestOptions().forestSizeRuleEnabled=t)&&l),l},null,null)),ci(23,16384,null,0,_p,[ct,rt],null,null),di(1024,null,yp,function(e){return[e]},[_p]),ci(25,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(27,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(28,0,null,null,1,"label",[["class","foresterLabel"],["for","forest"]],null,null,null,null,null)),(e()(),us(-1,null,["forest smaller than"])),(e()(),Kr(30,0,null,null,6,"input",[["id","forestSize"],["min","0"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==Ql(e,31)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,31).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ql(e,31)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ql(e,31)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==Ql(e,32).onChange(t.target.value)&&l),"input"===n&&(l=!1!==Ql(e,32).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,32).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.getForestOptions().forestSizeRule=t)&&l),l},null,null)),ci(31,16384,null,0,wp,[ct,rt,[2,Ap]],null,null),ci(32,16384,null,0,Vp,[ct,rt],null,null),di(1024,null,yp,function(e,n){return[e,n]},[wp,Vp]),ci(34,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(36,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(37,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(38,0,null,null,5,"input",[["id","land"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==Ql(e,39).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==Ql(e,39).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.getForestOptions().landSizeRuleEnabled=t)&&l),l},null,null)),ci(39,16384,null,0,_p,[ct,rt],null,null),di(1024,null,yp,function(e){return[e]},[_p]),ci(41,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(43,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(44,0,null,null,1,"label",[["class","foresterLabel"],["for","land"]],null,null,null,null,null)),(e()(),us(-1,null,["free land bigger than"])),(e()(),Kr(46,0,null,null,6,"input",[["id","landSize"],["min","0"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==Ql(e,47)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,47).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ql(e,47)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ql(e,47)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==Ql(e,48).onChange(t.target.value)&&l),"input"===n&&(l=!1!==Ql(e,48).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,48).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.getForestOptions().landSizeRule=t)&&l),l},null,null)),ci(47,16384,null,0,wp,[ct,rt,[2,Ap]],null,null),ci(48,16384,null,0,Vp,[ct,rt],null,null),di(1024,null,yp,function(e,n){return[e,n]},[wp,Vp]),ci(50,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(52,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(53,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(54,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),us(-1,null,[" Cut trees if:"])),(e()(),Kr(56,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(57,0,null,null,1,"label",[["for","forestSize2"]],null,null,null,null,null)),(e()(),us(-1,null,["Forest bigger than "])),(e()(),Kr(59,0,null,null,6,"input",[["id","forestSize2"],["min","0"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==Ql(e,60)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,60).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ql(e,60)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ql(e,60)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==Ql(e,61).onChange(t.target.value)&&l),"input"===n&&(l=!1!==Ql(e,61).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,61).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.getForestOptions().forestSizeReserved=t)&&l),l},null,null)),ci(60,16384,null,0,wp,[ct,rt,[2,Ap]],null,null),ci(61,16384,null,0,Vp,[ct,rt],null,null),di(1024,null,yp,function(e,n){return[e,n]},[wp,Vp]),ci(63,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(65,16384,null,0,Mp,[[4,xp]],null,null)],function(e,n){var t=n.component;e(n,3,0),e(n,10,0,"forest"),e(n,12,0,t.getForestSize()>=400),e(n,14,0,t.getForestSize()<400),e(n,17,0,"land"),e(n,25,0,t.getForestOptions().forestSizeRuleEnabled),e(n,34,0,t.getForestOptions().forestSizeRule),e(n,41,0,t.getForestOptions().landSizeRuleEnabled),e(n,50,0,t.getForestOptions().landSizeRule),e(n,63,0,t.getForestOptions().forestSizeReserved)},function(e,n){e(n,18,0,n.component.getLandSize()),e(n,22,0,Ql(n,27).ngClassUntouched,Ql(n,27).ngClassTouched,Ql(n,27).ngClassPristine,Ql(n,27).ngClassDirty,Ql(n,27).ngClassValid,Ql(n,27).ngClassInvalid,Ql(n,27).ngClassPending),e(n,30,0,Ql(n,36).ngClassUntouched,Ql(n,36).ngClassTouched,Ql(n,36).ngClassPristine,Ql(n,36).ngClassDirty,Ql(n,36).ngClassValid,Ql(n,36).ngClassInvalid,Ql(n,36).ngClassPending),e(n,38,0,Ql(n,43).ngClassUntouched,Ql(n,43).ngClassTouched,Ql(n,43).ngClassPristine,Ql(n,43).ngClassDirty,Ql(n,43).ngClassValid,Ql(n,43).ngClassInvalid,Ql(n,43).ngClassPending),e(n,46,0,Ql(n,52).ngClassUntouched,Ql(n,52).ngClassTouched,Ql(n,52).ngClassPristine,Ql(n,52).ngClassDirty,Ql(n,52).ngClassValid,Ql(n,52).ngClassInvalid,Ql(n,52).ngClassPending),e(n,59,0,Ql(n,65).ngClassUntouched,Ql(n,65).ngClassTouched,Ql(n,65).ngClassPristine,Ql(n,65).ngClassDirty,Ql(n,65).ngClassValid,Ql(n,65).ngClassInvalid,Ql(n,65).ngClassPending)})}function EA(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"app-forest-management",[],null,null,null,SA,pA)),ci(1,114688,null,0,gA,[lv],null,null)],function(e,n){e(n,1,0)},null)}var vA=Gl("app-forest-management",gA,EA,{},{},[]);class bA{constructor(e,n,t){this.rd=e,this.el=n,this.modalService=t,this.param="",this.element=n.nativeElement}ngOnInit(){}ngAfterViewInit(){const e=this;this.id&&(document.body.appendChild(this.element),this.rd.listen(this.element,"click",n=>{const t=n.target;null===t.closest(".modal-body")&&"BUTTON"!==t.tagName&&"path"!==t.tagName&&"tutorial-modal"!==e.id&&(this.modalService.sendConfirmationResult(!1),this.modalService.sendCloseSignal(Lu.ALL),e.close())}),this.modalService.add(this))}ngOnDestroy(){this.modalService.remove(this.id),this.element.remove()}open(){this.element.style.display="block",document.body.classList.add("modal-open")}openTutorialWindow(e){const n=this.element.querySelector(".modal-body");n.style.position="absolute",n.style.margin="0",n.style.width=e.width,n.style.top=e.top,n.style.left=e.left,this.element.style.display="block",document.body.classList.add("modal-open")}close(){this.element.style.display="none",document.body.classList.remove("modal-open")}onKeydownHandler(e){"tutorial-modal"!==this.id&&(this.modalService.sendConfirmationResult(!1),this.modalService.sendCloseSignal(Lu.ALL),this.close())}}var OA=Zt({encapsulation:2,styles:[],data:{}});function RA(e){return cs(0,[Zr(671088640,1,{body:1}),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:8,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:null,childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:null,ngContent:{index:0}}],null,null)}class TA{constructor(e,n,t,l,i,r,s,u,o,a,c,h,d,g){this.buildingFactoryService=e,this.servicesService=n,this.modalService=t,this.logService=l,this.resourcesService=i,this.landService=r,this.villageService=s,this.fortService=u,this.fieldService=o,this.forestService=a,this.mountainsService=c,this.seaService=h,this.plateauService=d,this.gameService=g,this.filterText="",this.buildings=new Map,this.buildings.set(Hu.VILLAGE,[[new IS,[],0],[new yS,[bu.HOUSE],0],[new $E,[bu.LONGHOUSE],0],[new iE,[bu.BAKERY],0],[new gE,[bu.TAILOR],0],[new zS,[],0],[new YE,[bu.SPECIALISED_PRODUCTION],0],[new YS,[],0],[new kE,[bu.MARKETPLACE],0],[new EE,[bu.TAVERN],1],[new qS,[bu.SHRINE],1],[new ME,[bu.CHURCH],1]]),this.buildings.set(Hu.FOREST,[[new AS,[],0],[new US,[],0],[new JE,[bu.PRODUCTION_ZONES],0],[new jS,[bu.HUNTER],0],[new cE,[bu.TANNERY],0],[new PS,[bu.FORESTER],0],[new DS,[bu.SAWMILL],0],[new jE,[bu.PAPER_MILL],0]]),this.buildings.set(Hu.FORT,[[new uE,[bu.BARRACKS],0],[new aE,[bu.BARRACKS],0],[new KE,[bu.BARRACKS],1],[new hE,[bu.STOCKADE],1],[new mE,[bu.WOODEN_TOWER],1],[new fE,[bu.STONE_TOWER],1],[new WE,[bu.STASH],3]]),this.buildings.set(Hu.FIELD,[[new ZS,[bu.FARM],0],[new lE,[bu.WINDMILL],0],[new eE,[],0],[new tE,[],0],[new IE,[bu.PASTURE],0],[new _E,[bu.BUTCHER],0],[new dE,[bu.COTTON_MILL],0],[new pE,[bu.BREWERY],0],[new SE,[bu.WINERY],0]]),this.buildings.set(Hu.MOUNTAINS,[[new BS,[],0],[new vE,[bu.GEOLOGIST],0],[new bE,[],0],[new TE,[bu.PIT_MINE],0],[new xE,[bu.SMITHY],1],[new AE,[bu.MINT],0],[new XE,[bu.DEEP_MINE],0]]),this.buildings.set(Hu.PLATEAU,[[new PE,[],1],[new DE,[],1],[new LE,[],1],[new FE,[],1],[new UE,[],1],[new GE,[],1],[new BE,[],1],[new HE,[],1]]),this.buildings.set(Hu.SEA,[[new sE,[bu.FISHERS_HUT],0]])}ngOnInit(){this.clearFilterObservable.subscribe(e=>this.filterText="")}build(e){if(e.buildOnMountain()){if(!this.landService.hasMountains(e.getSize()))return this.modalService.info("Not enough mountains to build "+e.getName()+"!<br>"+e.getSize()+" mountains required but "+this.landService.getMountains()+" available"),void this.modalService.close(Lu.BUILD)}else if(!this.landService.hasLand(e.getSize()))return this.modalService.info("Not enough empty land to build "+e.getName()+"!<br>"+e.getSize()+" empty land required but "+this.landService.getLand()+" available"),void this.modalService.close(Lu.BUILD);if(this.resourcesService.decreaseResources(e.getCost(),"Construction",!0)){switch(e.buildOnMountain()?this.landService.decreaseMountains(e.getSize()):this.landService.decreaseLand(e.getSize()),this.region){case Hu.VILLAGE:this.villageService.createConstruction(new wS(this.servicesService,this.servicesService.getService(xu.ID).getNextId(),Hu.VILLAGE,e.getBuildingType(),e.getComplexity(),e.getSize()).build());break;case Hu.FORT:this.fortService.createConstruction(new wS(this.servicesService,this.servicesService.getService(xu.ID).getNextId(),Hu.FORT,e.getBuildingType(),e.getComplexity(),e.getSize()).build());break;case Hu.FOREST:this.forestService.createConstruction(new wS(this.servicesService,this.servicesService.getService(xu.ID).getNextId(),Hu.FOREST,e.getBuildingType(),e.getComplexity(),e.getSize()).build());break;case Hu.FIELD:this.fieldService.createConstruction(new wS(this.servicesService,this.servicesService.getService(xu.ID).getNextId(),Hu.FIELD,e.getBuildingType(),e.getComplexity(),e.getSize()).build());break;case Hu.MOUNTAINS:this.mountainsService.createConstruction(new wS(this.servicesService,this.servicesService.getService(xu.ID).getNextId(),Hu.MOUNTAINS,e.getBuildingType(),e.getComplexity(),e.getSize()).build());break;case Hu.SEA:this.seaService.createConstruction(new wS(this.servicesService,this.servicesService.getService(xu.ID).getNextId(),Hu.SEA,e.getBuildingType(),e.getComplexity(),e.getSize()).build());break;case Hu.PLATEAU:this.plateauService.createConstruction(new wS(this.servicesService,this.servicesService.getService(xu.ID).getNextId(),Hu.PLATEAU,e.getBuildingType(),e.getComplexity(),e.getSize()).build())}this.modalService.close(Lu.BUILD)}else this.modalService.close(Lu.BUILD)}ngOnChanges(e){this.regionString=Hu[this.region]}checkBuilding(e,n){let t=!0;return e[1].forEach(e=>{this.gameService.isEnabled(e)||(t=!1)}),e[2]>0&&e[2]<=this.servicesService.getServiceByRegion(n).getBuildings().filter(n=>n.getBuildingType()===e[0].getBuildingType()||n.getBuildingType()===Ou.CONSTRUCTION&&n.getConstructing()===e[0].getBuildingType()).length&&(t=!1),t}hasResource(e){return 0===this.resourcesService.hasResource(e.key,e.value,"Construction",!0)}getResourceName(e){return Pu.prepareResourceName(e)}getBuildingCostEntries(e){return e.getCost()}getBuildingForRegion(e){if(this.buildings&&this.buildings.get(e)){let n=this.buildings.get(e).filter(n=>this.checkBuilding(n,e)).map(e=>e[0]);if(e===Hu.PLATEAU){if(this.gameService.getAbdicationLevel()<this.servicesService.getServiceByRegion(e).getBuildings().length)return[];this.gameService.getAbdicationLevel()<7&&(n=n.filter(e=>e.getBuildingType()!==Ou.ASCENSION_TEMPLE))}return null!==this.filterText&&this.filterText.length>0?n.filter(e=>e.getName().toLowerCase().includes(this.filterText.toLowerCase())):n}}isCostMet(e){let n=!0;return Array.from(e.getCost().entries()).forEach(e=>{0!==this.resourcesService.hasResource(e[0],e[1],"Construction",!0)&&(n=!1)}),n}hasLand(e){return this.landService.hasLand(e)}hasMountains(e){return this.landService.getMountains()>=e}getLimit(e,n){const t=this.buildings.get(e).find(e=>e[0].getBuildingType()===n);return t?t[2]:0}hasInputOutputDescription(e){return this.getBuildingSettings(e).INPUT_RESOURCES}getBuildingSettings(e){return lo.getBuilding(e)}hasCanProduceDescription(e){return this.getBuildingSettings(e).CAN_PRODUCE}}var CA=Zt({encapsulation:0,styles:[[".notMet[_ngcontent-%COMP%]{color:var(--negative-colour)}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.5em;margin-bottom:10px}#buildings[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:stretch;align-items:stretch}.building[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;text-align:center;border:1px solid #000;margin-bottom:10px}.buildingTitle[_ngcontent-%COMP%]{font-weight:600;background-color:var(--active-colour);border-bottom:1px solid #000}.buildingSecondRow[_ngcontent-%COMP%]{display:-webkit-box;display:flex;width:100%;border-right:1px solid #000;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.buildButton[_ngcontent-%COMP%]{width:30%}.buildButtonNotAvailable[_ngcontent-%COMP%]{width:30%;cursor:not-allowed}.details[_ngcontent-%COMP%]{width:100%;text-align:center}.resourceIcon[_ngcontent-%COMP%]{height:20px;width:20px;vertical-align:middle}#description[_ngcontent-%COMP%]{margin-bottom:10px}.icon[_ngcontent-%COMP%]{display:-webkit-inline-box;display:inline-flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;margin-right:10px}.subTitle[_ngcontent-%COMP%]{font-size:1em;font-weight:700}.productionDescription[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;margin-bottom:5px}.productionDescription[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:5px}#actions[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}"]],data:{}});function IA(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(1,null,["",""]))],null,function(e,n){var t=n.component,l=" (limit: "+t.getLimit(t.region,n.parent.context.$implicit.getBuildingType())+" building)";e(n,1,0,l)})}function yA(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(1,null,["",""]))],null,function(e,n){var t=n.component,l=" (limit: "+t.getLimit(t.region,n.parent.context.$implicit.getBuildingType())+" buildings)";e(n,1,0,l)})}function _A(e){return cs(0,[(e()(),Kr(0,0,null,null,3,"span",[["class","icon"]],null,null,null,null,null)),(e()(),us(1,null,[" "," "])),(e()(),Kr(2,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(3,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){e(n,3,0,n.component.getResourceName(n.context.$implicit.resource),"resources")},function(e,n){e(n,1,0,n.context.$implicit.amount)})}function AA(e){return cs(0,[(e()(),Kr(0,0,null,null,3,"span",[["class","icon"]],null,null,null,null,null)),(e()(),us(1,null,[" "," "])),(e()(),Kr(2,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(3,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){e(n,3,0,n.component.getResourceName(n.context.$implicit.resource),"resources")},function(e,n){e(n,1,0,n.context.$implicit.amount)})}function wA(e){return cs(0,[(e()(),Kr(0,0,null,null,12,"div",[["class","productionDescription"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,5,"span",[],null,null,null,null,null)),(e()(),Kr(2,0,null,null,1,"span",[["class","subTitle"]],null,null,null,null,null)),(e()(),us(-1,null,["production input:"])),(e()(),Kr(4,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,_A)),ci(6,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),(e()(),Kr(7,0,null,null,5,"span",[],null,null,null,null,null)),(e()(),Kr(8,0,null,null,1,"span",[["class","subTitle"]],null,null,null,null,null)),(e()(),us(-1,null,["production output:"])),(e()(),Kr(10,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,AA)),ci(12,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component,l=t.getBuildingSettings(n.parent.context.$implicit.getBuildingType()).INPUT_RESOURCES;e(n,6,0,l);var i=t.getBuildingSettings(n.parent.context.$implicit.getBuildingType()).OUTPUT_RESOURCES;e(n,12,0,i)},null)}function NA(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"span",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(2,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){e(n,2,0,n.component.getResourceName(n.context.$implicit),"resources")},null)}function PA(e){return cs(0,[(e()(),Kr(0,0,null,null,6,"div",[["class","productionDescription"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,5,"span",[],null,null,null,null,null)),(e()(),Kr(2,0,null,null,1,"span",[["class","subTitle"]],null,null,null,null,null)),(e()(),us(-1,null,["can produce:"])),(e()(),Kr(4,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,NA)),ci(6,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component.getBuildingSettings(n.parent.context.$implicit.getBuildingType()).CAN_PRODUCE;e(n,6,0,t)},null)}function kA(e){return cs(0,[(e()(),Kr(0,0,null,null,8,"div",[],null,null,null,null,null)),(e()(),Kr(1,0,null,null,7,"span",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(2,0,null,null,4,"span",[],null,null,null,null,null)),di(512,null,Uo,Go,[Ct,It,rt,ct]),ci(4,278528,null,0,Wo,[Uo],{ngClass:[0,"ngClass"]},null),rs(5,{notMet:0}),(e()(),us(6,null,["",""])),(e()(),Kr(7,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(8,114688,null,0,Rp,[],{name:[0,"name"]},null)],function(e,n){var t=e(n,5,0,!n.component.hasLand(n.parent.context.$implicit.getSize()));e(n,4,0,t),e(n,8,0,"land")},function(e,n){var t=n.parent.context.$implicit.getSize();e(n,6,0,t)})}function xA(e){return cs(0,[(e()(),Kr(0,0,null,null,8,"div",[],null,null,null,null,null)),(e()(),Kr(1,0,null,null,7,"span",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(2,0,null,null,4,"span",[],null,null,null,null,null)),di(512,null,Uo,Go,[Ct,It,rt,ct]),ci(4,278528,null,0,Wo,[Uo],{ngClass:[0,"ngClass"]},null),rs(5,{notMet:0}),(e()(),us(6,null,["",""])),(e()(),Kr(7,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(8,114688,null,0,Rp,[],{name:[0,"name"]},null)],function(e,n){var t=e(n,5,0,!n.component.hasMountains(n.parent.context.$implicit.getSize()));e(n,4,0,t),e(n,8,0,"mountains")},function(e,n){var t=n.parent.context.$implicit.getSize();e(n,6,0,t)})}function MA(e){return cs(0,[(e()(),Kr(0,0,null,null,8,"span",[],null,null,null,null,null)),(e()(),Kr(1,0,null,null,7,"span",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(2,0,null,null,4,"span",[],null,null,null,null,null)),di(512,null,Uo,Go,[Ct,It,rt,ct]),ci(4,278528,null,0,Wo,[Uo],{ngClass:[0,"ngClass"]},null),rs(5,{notMet:0}),(e()(),us(6,null,["",""])),(e()(),Kr(7,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(8,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){var t=n.component,l=e(n,5,0,!t.hasResource(n.context.$implicit));e(n,4,0,l),e(n,8,0,t.getResourceName(n.context.$implicit.key),"resources")},function(e,n){e(n,6,0,n.context.$implicit.value)})}function DA(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[["class","buildButton"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.build(e.parent.context.$implicit)&&l),l},null,null)),(e()(),us(-1,null,["Build"]))],null,null)}function LA(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[["class","buildButtonNotAvailable"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.build(e.parent.context.$implicit)&&l),l},null,null)),(e()(),us(-1,null,["Build"]))],null,null)}function FA(e){return cs(0,[(e()(),Kr(0,0,null,null,26,"div",[["class","building"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,21,"div",[["class","buildingSecondRow"]],null,null,null,null,null)),(e()(),Kr(2,0,null,null,5,"span",[["class","buildingTitle"]],null,null,null,null,null)),(e()(),us(3,null,[""," "])),(e()(),$r(16777216,null,null,1,null,IA)),ci(5,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,yA)),ci(7,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(8,0,null,null,14,"div",[["class","details"]],null,null,null,null,null)),(e()(),Kr(9,0,null,null,0,"div",[["id","description"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),$r(16777216,null,null,1,null,wA)),ci(11,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,PA)),ci(13,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(14,0,null,null,1,"div",[["class","subTitle"]],null,null,null,null,null)),(e()(),us(-1,null,["cost:"])),(e()(),$r(16777216,null,null,1,null,kA)),ci(17,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,xA)),ci(19,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,2,null,MA)),ci(21,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),hi(0,ra,[It]),(e()(),$r(16777216,null,null,1,null,DA)),ci(24,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,LA)),ci(26,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component,l=1===t.getLimit(t.region,n.context.$implicit.getBuildingType());e(n,5,0,l);var i=t.getLimit(t.region,n.context.$implicit.getBuildingType())>1;e(n,7,0,i);var r=t.hasInputOutputDescription(n.context.$implicit.getBuildingType());e(n,11,0,r);var s=t.hasCanProduceDescription(n.context.$implicit.getBuildingType());e(n,13,0,s);var u=!n.context.$implicit.buildOnMountain();e(n,17,0,u);var o=n.context.$implicit.buildOnMountain();e(n,19,0,o),e(n,21,0,qt(n,21,0,Ql(n,22).transform(t.getBuildingCostEntries(n.context.$implicit)))),e(n,24,0,t.isCostMet(n.context.$implicit)),e(n,26,0,!t.isCostMet(n.context.$implicit))},function(e,n){var t=n.context.$implicit.getName();e(n,3,0,t);var l=n.context.$implicit.getDescription();e(n,9,0,l)})}function HA(e){return cs(0,[hi(0,ia,[]),(e()(),Kr(1,0,null,null,13,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Kr(2,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),us(3,null,[" "," buildings "])),is(4,1),(e()(),us(-1,null,[" Search: "])),(e()(),Kr(6,0,null,null,5,"input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==Ql(e,7)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,7).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ql(e,7)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ql(e,7)._compositionEnd(t.target.value)&&l),"ngModelChange"===n&&(l=!1!==(i.filterText=t)&&l),l},null,null)),ci(7,16384,null,0,wp,[ct,rt,[2,Ap]],null,null),di(1024,null,yp,function(e){return[e]},[wp]),ci(9,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(11,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(12,0,null,null,2,"div",[["id","buildings"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,FA)),ci(14,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,9,0,t.filterText),e(n,14,0,t.getBuildingForRegion(t.region))},function(e,n){var t=n.component,l=qt(n,3,0,e(n,4,0,Ql(n,0),t.regionString));e(n,3,0,l),e(n,6,0,Ql(n,11).ngClassUntouched,Ql(n,11).ngClassTouched,Ql(n,11).ngClassPristine,Ql(n,11).ngClassDirty,Ql(n,11).ngClassValid,Ql(n,11).ngClassInvalid,Ql(n,11).ngClassPending)})}class UA{constructor(e){this.modalService=e,this.clearFilterSubject=new _,this.modalService.registerForRegion().subscribe(e=>{this.region=e,this.clearFilterSubject.next()}),this.modalService.registerForOnOpen().subscribe(e=>{e===Lu.BUILD&&(this.bodyRef.nativeElement.scrollTop=0)})}ngOnInit(){}}var GA=Zt({encapsulation:0,styles:[[""]],data:{}});function BA(e){return cs(0,[Zr(671088640,1,{bodyRef:0}),(e()(),Kr(1,0,null,null,6,"app-modal",[["id","build-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ql(e,2).onKeydownHandler(t)&&l),l},RA,OA)),ci(2,4440064,null,0,bA,[ct,rt,Vm],{id:[0,"id"]},null),(e()(),Kr(3,0,null,0,3,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Kr(4,0,[[1,0],["body",1]],null,2,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Kr(5,0,null,null,1,"app-construction",[],null,null,null,HA,CA)),ci(6,638976,null,0,TA,[ev,Mm,Vm,Bm,Jm,lv,sv,eO,sy,HI,yy,g_,Zy,Ym],{region:[0,"region"],clearFilterObservable:[1,"clearFilterObservable"]},null),(e()(),Kr(7,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,2,0,"build-modal"),e(n,6,0,t.region,t.clearFilterSubject.asObservable())},null)}const WA=(()=>{class e{constructor(e,n,t,l,i,r,s,u,o,a,c,h,d,g,p,m,f,S,E){this.logService=e,this.villageService=n,this.fortService=t,this.fieldService=l,this.mountainsService=i,this.plateauService=r,this.seaService=s,this.forestService=u,this.calendarService=o,this.landService=a,this.techService=c,this.weatherService=h,this.resourcesService=d,this.gameService=g,this.effectsService=p,this.armyService=m,this.happinessService=f,this.worldService=S,this.servicesService=E,this.tickerState=0,this.lastTick=0,this.paused=!1,this.ticking=!1,this.resolution=qu,E.addService(xu.TICKER,this),this.tickSubject=new _,this.interval=setInterval(()=>this.tick(),this.resolution)}tick(){if(!this.ticking){this.ticking=!0;const e=Math.floor(Date.now()/this.resolution);this.tickerState>=0&&(this.lastTick=e,this.calendarService.tick(e),this.effectsService.tick(e),this.weatherService.tick(e),this.happinessService.tick(e),this.landService.tick(e),this.resourcesService.tick(e),this.gameService.tick(e),this.villageService.tick(e),this.fortService.tick(e),this.fieldService.tick(e),this.mountainsService.tick(e),this.plateauService.tick(e),this.seaService.tick(e),this.forestService.tick(e),this.armyService.tick(e),this.worldService.tick(e)),this.ticking=!1}}stop(){return this.tickerState-=1,this.lastTick}start(){this.tickerState+=1,this.tickerState>0&&(this.tickerState=0)}forceStart(){this.tickerState=0}clearTicker(){clearInterval(this.interval)}initTicker(){this.interval=setInterval(()=>this.tick(),this.resolution)}pause(){this.stop(),this.paused=!0}resume(){this.forceStart(),this.paused=!1}isPaused(){return this.paused}}return e.ngInjectableDef=de({factory:function(){return new e(Le(Bm),Le(sv),Le(eO),Le(sy),Le(yy),Le(Zy),Le(g_),Le(HI),Le(Gm),Le(lv),Le(lb),Le(BO),Le(Jm),Le(Ym),Le(nv),Le(Wb),Le(qm),Le(vR),Le(Mm))},token:e,providedIn:"root"}),e})(),VA=(()=>{class e{constructor(e,n,t,l,i,r,s,u,o,a,c,h,d,g,p,m,f,S,E,v,b,O,R,T,C,I,y,_,A,w,N,P){this.router=e,this.tickerService=n,this.gameService=t,this.modalService=l,this.optionsService=i,this.logService=r,this.villageService=s,this.forestService=u,this.resourcesService=o,this.landService=a,this.mountainsService=c,this.calendarService=h,this.royalService=d,this.techService=g,this.religionService=p,this.craftingService=m,this.recipeService=f,this.fieldService=S,this.plateauService=E,this.seaService=v,this.fortService=b,this.effectsService=O,this.armyService=R,this.happinessService=T,this.managementService=C,this.marketService=I,this.weatherService=y,this.idService=_,this.heritageService=A,this.tutorialService=w,this.worldService=N,this.saveName=zu.saveName,this.saveVersion=zu.saveVersion,P.addService(xu.SERIALIZER,this),this.autoSaveStatus=this.optionsService.getOption(Dm.AUTO_SAVE_STATUS),this.autoSavePeriod=this.optionsService.getOption(Dm.AUTO_SAVE_PERIOD),this.optionsSubscription||(this.optionsSubscription=this.optionsService.registerForOptionsChange().subscribe(()=>this.changeOptions())),this.saveInterval=setInterval(()=>{this.initSave(),this.logService.autoSave()},this.autoSavePeriod)}changeOptions(){const e=this.optionsService.getOption(Dm.AUTO_SAVE_STATUS),n=this.optionsService.getOption(Dm.AUTO_SAVE_PERIOD);this.autoSaveStatus===e&&this.autoSavePeriod===n||(this.autoSaveStatus=e,this.autoSavePeriod=n,clearInterval(this.saveInterval),this.autoSaveStatus&&(this.saveInterval=setInterval(()=>{this.initSave(),this.logService.autoSave()},1e3*this.autoSavePeriod*60)))}initSave(){this.tickerService.stop(),localStorage.setItem(this.saveName,this.prepareBase64()),this.tickerService.start()}prepareBase64(){this.tickerService.stop();const e=btoa(JSON.stringify({saveVersion:this.saveVersion,id:this.idService,tutorial:this.tutorialService.save(),resources:this.resourcesService.save(),village:this.villageService.save(),fort:this.fortService.save(),forest:this.forestService.save(),field:this.fieldService.save(),mountains:this.mountainsService.save(),plateau:this.plateauService.save(),sea:this.seaService.save(),land:this.landService.save(),calendar:this.calendarService.save(),game:this.gameService.save(),options:this.optionsService.save(),royal:this.royalService.save(),tech:this.techService.save(),religion:this.religionService.save(),crafting:this.craftingService.save(),recipe:this.recipeService.save(),effects:this.effectsService.save(),army:this.armyService.save(),world:this.worldService.save(),happiness:this.happinessService.save(),management:this.managementService.save(),market:this.marketService.save(),weather:this.weatherService.save(),heritage:this.heritageService.save(),logs:this.logService.save()}));return this.tickerService.start(),e}initLoad(){if(this.tickerService.stop(),null===localStorage.getItem(this.saveName))return this.modalService.info("There is no any save file to load."),void this.tickerService.start();let e;try{e=JSON.parse(atob(localStorage.getItem(this.saveName)))}catch(n){return this.modalService.info("Save data is corrupted! Loading failed."),void this.tickerService.start()}this.loadSave(e),this.tickerService.start(),this.logService.log("loaded")}hasSave(){return null!=localStorage.getItem(this.saveName)}import(e){let n;this.tickerService.stop();try{n=JSON.parse(atob(e))}catch(t){return this.modalService.info("Import file is not valid or corrupted! Import failed."),void this.tickerService.start()}this.loadSave(n),localStorage.setItem(this.saveName,e),this.tickerService.start(),this.logService.log("save imported")}hardReset(){this.reset(!0),localStorage.removeItem(this.saveName)}ascensionReset(){this.reset(!1,!0)}reset(e,n=!1){this.tickerService.stop(),this.tickerService.clearTicker(),localStorage.removeItem(this.saveName),this.tutorialService.reset(e,n),this.calendarService.reset(e,n),this.gameService.reset(e,n),this.idService.reset(e,n),this.weatherService.reset(e,n),this.effectsService.reset(e,n),this.resourcesService.reset(e,n),this.landService.reset(e,n),this.villageService.reset(e,n),this.fortService.reset(e,n),this.forestService.reset(e,n),this.fieldService.reset(e,n),this.mountainsService.reset(e,n),this.plateauService.reset(e,n),this.seaService.reset(e,n),this.optionsService.reset(e,n),this.techService.reset(e,n),this.religionService.reset(e,n),this.craftingService.reset(e,n),this.recipeService.reset(e,n),this.armyService.reset(e,n),this.worldService.reset(e,n),this.happinessService.reset(e,n),this.managementService.reset(e,n),this.marketService.reset(e,n),this.heritageService.reset(e,n),this.logService.reset(e,n),this.royalService.reset(e,n),this.initSave(),this.tickerService.initTicker(),this.tickerService.start(),this.router.navigate(["/village"])}loadSave(e){switch(e.saveVersion){case Bu.DEV:case Bu.V1_0_0:this.loadDevVersion(e);break;default:const n="Corrupted save file (unknown save version). Loading is not possible";return this.logService.log(n),void console.error(n)}}loadDevVersion(e){this.saveVersion=e.saveVersion,this.idService.load(e.id),this.logService.load(e.logs),this.effectsService.load(e.effects),this.resourcesService.load(e.resources),this.villageService.load(e.village),this.fortService.load(e.fort),this.forestService.load(e.forest),this.fieldService.load(e.field),this.mountainsService.load(e.mountains),this.plateauService.load(e.plateau),this.seaService.load(e.sea),this.landService.load(e.land),this.calendarService.load(e.calendar),this.optionsService.load(e.options),this.gameService.load(e.game),this.royalService.load(e.royal),this.techService.load(e.tech),this.religionService.load(e.religion),this.craftingService.load(e.crafting),this.recipeService.load(e.recipe),this.armyService.load(e.army),this.worldService.load(void 0!==e.world?e.world:{}),this.happinessService.load(e.happiness),this.managementService.load(e.management),this.marketService.load(e.market),this.weatherService.load(e.weather),this.heritageService.load(void 0!==e.heritage?e.heritage:{}),this.tutorialService.load(void 0!==e.tutorial?e.tutorial:{})}abdicate(e,n){this.reset(!1,!1),this.tickerService.stop(),this.tickerService.clearTicker(),this.worldService.reset(e,!1),this.heritageService.reset(n,!1),this.tickerService.initTicker(),this.tickerService.start()}}return e.ngInjectableDef=de({factory:function(){return new e(Le(Fg),Le(WA),Le(Ym),Le(Vm),Le(Lm),Le(Bm),Le(sv),Le(HI),Le(Jm),Le(lv),Le(yy),Le(Gm),Le(Km),Le(lb),Le(vO),Le(ES),Le(mf),Le(sy),Le(Zy),Le(g_),Le(eO),Le(nv),Le(Wb),Le(qm),Le(Wv),Le(Vv),Le(BO),Le(VE),Le(gT),Le(zm),Le(vR),Le(Mm))},token:e,providedIn:"root"}),e})();class zA{constructor(e,n,t,l){this.modalService=e,this.serializerService=n,this.heritageService=t,this.gameService=l,this.resetWorld=!1,this.resetHeritage=!1,e.registerForOnOpen().subscribe(e=>{e===Lu.ABDICATION&&(this.resetWorld=!1,this.resetHeritage=!1)}),e.registerForCloseModal().subscribe(e=>{e!==Lu.ABDICATION&&e!==Lu.ALL||this.modalService.sendAbdicationResult(!1)})}ngOnInit(){}abdicate(){this.modalService.open(Lu.CONFIRM),this.modalService.setModalText("Are you sure you want to abdicate?");const e=this.modalService.registerForConfirmation().subscribe(n=>{e.unsubscribe(),n&&(this.modalService.sendAbdicationResult(!0),this.serializerService.abdicate(this.resetWorld,this.resetHeritage),this.modalService.close(Lu.ABDICATION))})}cancel(){this.modalService.sendAbdicationResult(!1),this.modalService.close(Lu.ABDICATION)}calculateHeritagePoints(){return this.heritageService.calculateHeritagePoints()}peopleToNextHeritagePoint(){return this.heritageService.peopleToNextHeritagePoint()}getStartYear(){return this.gameService.getGameStartedYear()}}var YA=Zt({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;font-size:1.2em}#buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;width:100%}button[_ngcontent-%COMP%]{border:1px solid #000;color:#000;padding:1% 2%;text-align:center;text-decoration:none;display:inline-block;font-size:1em;margin:.5%}"]],data:{}});function $A(e){return cs(0,[(e()(),Kr(0,0,null,null,50,"app-modal",[["id","abdication-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ql(e,1).onKeydownHandler(t)&&l),l},RA,OA)),ci(1,4440064,null,0,bA,[ct,rt,Vm],{id:[0,"id"]},null),(e()(),Kr(2,0,null,0,47,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Kr(3,0,null,null,46,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Kr(4,0,null,null,1,"h2",[],null,null,null,null,null)),(e()(),us(-1,null,["Abdication"])),(e()(),Kr(6,0,null,null,38,"div",[],null,null,null,null,null)),(e()(),us(-1,null,[" Are you sure you want to soft reset your progress? "])),(e()(),Kr(8,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),us(-1,null,[" You will start from the beginning and all progress except for:"])),(e()(),Kr(10,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(11,0,null,null,6,"ul",[],null,null,null,null,null)),(e()(),Kr(12,0,null,null,1,"li",[],null,null,null,null,null)),(e()(),us(-1,null,["Royal Points"])),(e()(),Kr(14,0,null,null,1,"li",[],null,null,null,null,null)),(e()(),us(-1,null,["Heritage Points"])),(e()(),Kr(16,0,null,null,1,"li",[],null,null,null,null,null)),(e()(),us(-1,null,["Wonder buildings and their effects"])),(e()(),us(-1,null,[" will be deleted."])),(e()(),Kr(19,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(20,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),us(21,null,[" You will be awarded "," Heritage Points ("," more people needed for the next point)"])),(e()(),Kr(22,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(23,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),us(24,null,[" You reign since the start of year "," "])),(e()(),Kr(25,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(26,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(27,0,null,null,5,"input",[["id","resetWorld"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==Ql(e,28).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==Ql(e,28).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.resetWorld=t)&&l),l},null,null)),ci(28,16384,null,0,_p,[ct,rt],null,null),di(1024,null,yp,function(e){return[e]},[_p]),ci(30,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(32,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(33,0,null,null,1,"label",[["for","resetWorld"]],null,null,null,null,null)),(e()(),us(-1,null,["reset world map progress"])),(e()(),Kr(35,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(36,0,null,null,5,"input",[["id","resetHeritage"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==Ql(e,37).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==Ql(e,37).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.resetHeritage=t)&&l),l},null,null)),ci(37,16384,null,0,_p,[ct,rt],null,null),di(1024,null,yp,function(e){return[e]},[_p]),ci(39,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(41,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(42,0,null,null,1,"label",[["for","resetHeritage"]],null,null,null,null,null)),(e()(),us(-1,null,["reset heritage (earned points and everything unlocked with them)"])),(e()(),Kr(44,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(45,0,null,null,4,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Kr(46,0,null,null,1,"button",[["id","hardReset"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.abdicate()&&l),l},null,null)),(e()(),us(-1,null,["ABDICATE"])),(e()(),Kr(48,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.cancel()&&l),l},null,null)),(e()(),us(-1,null,["CANCEL"])),(e()(),Kr(50,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,1,0,"abdication-modal"),e(n,30,0,t.resetWorld),e(n,39,0,t.resetHeritage)},function(e,n){var t=n.component;e(n,21,0,t.calculateHeritagePoints(),t.peopleToNextHeritagePoint()),e(n,24,0,t.getStartYear()),e(n,27,0,Ql(n,32).ngClassUntouched,Ql(n,32).ngClassTouched,Ql(n,32).ngClassPristine,Ql(n,32).ngClassDirty,Ql(n,32).ngClassValid,Ql(n,32).ngClassInvalid,Ql(n,32).ngClassPending),e(n,36,0,Ql(n,41).ngClassUntouched,Ql(n,41).ngClassTouched,Ql(n,41).ngClassPristine,Ql(n,41).ngClassDirty,Ql(n,41).ngClassValid,Ql(n,41).ngClassInvalid,Ql(n,41).ngClassPending)})}class KA{constructor(e,n){this.modalService=e,this.worldService=n,this.modalService.registerForFightReport().subscribe(e=>this.fightReport=e)}ngOnInit(){}ok(){this.fightReport=null,this.modalService.close(Lu.FIGHT_REPORT)}getAttackerName(){return this.fightReport.attacker===wu.PLAYER?this.worldService.getPlayerCountry().name:Pu.prepareCountryName(this.fightReport.attacker)}getDefenderName(){return this.fightReport.defender===wu.PLAYER?this.worldService.getPlayerCountry().name:Pu.prepareCountryName(this.fightReport.defender)}getTroopName(e){return Pu.prepareTroopName(e)}}var jA=Zt({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;font-size:1.2em}#title[_ngcontent-%COMP%]{font-weight:700}#reportBody[_ngcontent-%COMP%]{width:100%;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;overflow-y:auto}.section[_ngcontent-%COMP%]{width:80%;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;text-align:center;border-bottom:2px solid #000}.section[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 50%;-webkit-box-align:center;align-items:center}#skirmishes[_ngcontent-%COMP%]{width:80%;text-align:center}.sectionFull[_ngcontent-%COMP%]{width:100%;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;text-align:center;border-bottom:2px solid #000}.sectionEnd[_ngcontent-%COMP%]{width:80%;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;text-align:center;border-bottom:2px solid #000}.sectionEnd[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 100%}.sectionFull[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(1){-webkit-box-flex:0;flex:0 0 45%;-webkit-box-align:center;align-items:center}.sectionFull[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(2){-webkit-box-flex:0;flex:0 0 10%;-webkit-box-align:center;align-items:center}.sectionFull[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(3){-webkit-box-flex:0;flex:0 0 45%;-webkit-box-align:center;align-items:center}.section[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:first-child{border-right:2px solid #000}.section[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:last-child{padding-bottom:10px}.won[_ngcontent-%COMP%]{color:var(--positive-colour)}.lost[_ngcontent-%COMP%]{color:var(--negative-colour)}.attdefIcon[_ngcontent-%COMP%]{height:15px}"]],data:{}});function qA(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),us(1,null,["army size bonus: ",""]))],null,function(e,n){e(n,1,0,n.component.fightReport.attackerArmySizeBonus)})}function XA(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),us(1,null,["",": ",""]))],null,function(e,n){e(n,1,0,n.component.getTroopName(n.context.$implicit.troop),n.context.$implicit.size)})}function QA(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),us(1,null,["army size bonus: ",""]))],null,function(e,n){e(n,1,0,n.component.fightReport.defenderArmySizeBonus)})}function ZA(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),us(1,null,["",": ",""]))],null,function(e,n){e(n,1,0,n.component.getTroopName(n.context.$implicit.troop),n.context.$implicit.size)})}function JA(e){return cs(0,[(e()(),Kr(0,0,null,null,21,"div",[["id","skirmishes"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),us(2,null,["Skirmish ",""])),(e()(),Kr(3,0,null,null,18,"div",[["class","sectionFull"]],null,null,null,null,null)),(e()(),Kr(4,0,null,null,8,"span",[],null,null,null,null,null)),di(512,null,Uo,Go,[Ct,It,rt,ct]),ci(6,278528,null,0,Wo,[Uo],{ngClass:[0,"ngClass"]},null),rs(7,{won:0,lost:1}),(e()(),us(8,null,[""," "])),(e()(),Kr(9,0,null,null,3,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["("])),(e()(),Kr(11,0,null,null,0,"img",[["class","attdefIcon"],["src","assets/army/attack.svg"]],null,null,null,null,null)),(e()(),us(12,null,["",")"])),(e()(),Kr(13,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["vs"])),(e()(),Kr(15,0,null,null,6,"span",[],null,null,null,null,null)),di(512,null,Uo,Go,[Ct,It,rt,ct]),ci(17,278528,null,0,Wo,[Uo],{ngClass:[0,"ngClass"]},null),rs(18,{won:0,lost:1}),(e()(),us(19,null,[""," ("])),(e()(),Kr(20,0,null,null,0,"img",[["class","attdefIcon"],["src","assets/army/defense.svg"]],null,null,null,null,null)),(e()(),us(21,null,["",")"]))],function(e,n){var t=e(n,7,0,n.context.$implicit.result,!n.context.$implicit.result);e(n,6,0,t);var l=e(n,18,0,!n.context.$implicit.result,n.context.$implicit.result);e(n,17,0,l)},function(e,n){var t=n.component;e(n,2,0,n.context.index+1),e(n,8,0,t.getTroopName(n.context.$implicit.attackerTroop)),e(n,12,0,n.context.$implicit.attack),e(n,19,0,t.getTroopName(n.context.$implicit.defenderTroop)),e(n,21,0,n.context.$implicit.defense)})}function ew(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.getAttackerName())})}function nw(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.getDefenderName())})}function tw(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),us(1,null,["",": ",""]))],null,function(e,n){e(n,1,0,n.component.getTroopName(n.context.$implicit.troop),n.context.$implicit.size)})}function lw(e){return cs(0,[(e()(),Kr(0,0,null,null,50,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"div",[["id","title"]],null,null,null,null,null)),(e()(),us(-1,null,["Fight Report"])),(e()(),Kr(3,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),us(4,null,["",""])),(e()(),Kr(5,0,null,null,14,"div",[["class","section"]],null,null,null,null,null)),(e()(),Kr(6,0,null,null,6,"div",[],null,null,null,null,null)),di(512,null,Uo,Go,[Ct,It,rt,ct]),ci(8,278528,null,0,Wo,[Uo],{ngClass:[0,"ngClass"]},null),rs(9,{won:0,lost:1}),(e()(),us(-1,null,["ATTACKER"])),(e()(),Kr(11,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),us(12,null,[""," "])),(e()(),Kr(13,0,null,null,6,"div",[],null,null,null,null,null)),di(512,null,Uo,Go,[Ct,It,rt,ct]),ci(15,278528,null,0,Wo,[Uo],{ngClass:[0,"ngClass"]},null),rs(16,{won:0,lost:1}),(e()(),us(-1,null,["DEFENDER"])),(e()(),Kr(18,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),us(19,null,[""," "])),(e()(),Kr(20,0,null,null,28,"div",[["id","reportBody"]],null,null,null,null,null)),(e()(),Kr(21,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),us(-1,null,["Armies"])),(e()(),Kr(23,0,null,null,12,"div",[["class","section"]],null,null,null,null,null)),(e()(),Kr(24,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,qA)),ci(26,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,XA)),ci(28,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),(e()(),Kr(29,0,null,null,6,"div",[],null,null,null,null,null)),(e()(),Kr(30,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),us(31,null,["defense: ",""])),(e()(),$r(16777216,null,null,1,null,QA)),ci(33,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,ZA)),ci(35,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),(e()(),$r(16777216,null,null,1,null,JA)),ci(37,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),(e()(),Kr(38,0,null,null,6,"div",[],null,null,null,null,null)),(e()(),us(-1,null,["Winner army ("])),(e()(),$r(16777216,null,null,1,null,ew)),ci(41,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,nw)),ci(43,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),us(-1,null,[") "])),(e()(),Kr(45,0,null,null,3,"div",[["class","sectionEnd"]],null,null,null,null,null)),(e()(),Kr(46,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,tw)),ci(48,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),(e()(),Kr(49,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.ok()&&l),l},null,null)),(e()(),us(-1,null,["close"]))],function(e,n){var t=n.component,l=e(n,9,0,t.fightReport.result,!t.fightReport.result);e(n,8,0,l);var i=e(n,16,0,!t.fightReport.result,t.fightReport.result);e(n,15,0,i),e(n,26,0,t.fightReport.attackerArmySizeBonus>0),e(n,28,0,t.fightReport.attackerArmy.units),e(n,33,0,t.fightReport.defenderArmySizeBonus>0),e(n,35,0,t.fightReport.defenderArmy.units),e(n,37,0,t.fightReport.skirmish),e(n,41,0,t.fightReport.result),e(n,43,0,!t.fightReport.result),e(n,48,0,t.fightReport.armyAfterFight.units)},function(e,n){var t=n.component;e(n,4,0,t.fightReport.message),e(n,12,0,t.getAttackerName()),e(n,19,0,t.getDefenderName()),e(n,31,0,t.fightReport.defense)})}function iw(e){return cs(0,[(e()(),Kr(0,0,null,null,5,"app-modal",[["id","fight-report-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ql(e,1).onKeydownHandler(t)&&l),l},RA,OA)),ci(1,4440064,null,0,bA,[ct,rt,Vm],{id:[0,"id"]},null),(e()(),Kr(2,0,null,0,2,"div",[["class","modal"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,lw)),ci(4,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(5,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,1,0,"fight-report-modal"),e(n,4,0,t.fightReport)},null)}class rw{constructor(e,n){this.serializerService=e,this.modalService=n,this.exportTextArea=null,this.showMessage=!1,this.modalService.registerForOnOpen().subscribe(e=>{e===Lu.EXPORT&&this.export()})}ngOnInit(){}export(){this.exportTextArea=this.serializerService.prepareBase64()}copy(){const e=this.exportTextArea,n=document.createElement("textarea");n.id="txt",n.style.position="fixed",n.style.top="0",n.style.left="0",n.style.opacity="0",n.value=e,document.body.appendChild(n),n.select();try{if(document.execCommand("copy"))return this.showMessage=!0,setTimeout(()=>this.showMessage=!1,1500),!0}catch(t){console.error(Wm.ERROR_1)}finally{document.body.removeChild(n)}return!1}}var sw=Zt({encapsulation:0,styles:[["#export-area[_ngcontent-%COMP%]{width:100%;resize:none}.modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}#buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;width:100%}#title[_ngcontent-%COMP%]{font-weight:800;margin-bottom:10px}"]],data:{}});function uw(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),us(-1,null,["copied..."]))],null,null)}function ow(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Kr(1,0,null,null,0,"br",[],null,null,null,null,null))],null,null)}function aw(e){return cs(0,[(e()(),Kr(0,0,null,null,17,"app-modal",[["id","export-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ql(e,1).onKeydownHandler(t)&&l),l},RA,OA)),ci(1,4440064,null,0,bA,[ct,rt,Vm],{id:[0,"id"]},null),(e()(),Kr(2,0,null,0,14,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Kr(3,0,null,null,13,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Kr(4,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),us(-1,null,["Export save"])),(e()(),Kr(6,0,null,null,1,"textarea",[["id","export-area"],["placeholder","Your save will be generated here..."],["readonly",""],["rows","20"]],null,null,null,null,null)),(e()(),us(7,null,["",""])),(e()(),Kr(8,0,null,null,4,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Kr(9,0,null,null,1,"button",[["id","import-button"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.export()&&l),l},null,null)),(e()(),us(-1,null,["Update"])),(e()(),Kr(11,0,null,null,1,"button",[["id","copy-button"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.copy()&&l),l},null,null)),(e()(),us(-1,null,["Copy to clipboard"])),(e()(),$r(16777216,null,null,1,null,uw)),ci(14,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,ow)),ci(16,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(17,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,1,0,"export-modal"),e(n,14,0,t.showMessage),e(n,16,0,!t.showMessage)},function(e,n){e(n,7,0,n.component.exportTextArea)})}class cw{constructor(e,n){this.serializerService=e,this.modalService=n}ngOnInit(){}import(){this.serializerService.import(this.importTextArea),this.importTextArea="",this.modalService.close(Lu.IMPORT)}}var hw=Zt({encapsulation:0,styles:[["#import-area[_ngcontent-%COMP%]{width:100%;resize:none}.modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}#title[_ngcontent-%COMP%]{font-weight:800;margin-bottom:10px}"]],data:{}});function dw(e){return cs(0,[(e()(),Kr(0,0,null,null,14,"app-modal",[["id","import-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ql(e,1).onKeydownHandler(t)&&l),l},RA,OA)),ci(1,4440064,null,0,bA,[ct,rt,Vm],{id:[0,"id"]},null),(e()(),Kr(2,0,null,0,11,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Kr(3,0,null,null,10,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Kr(4,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),us(-1,null,["Import save"])),(e()(),Kr(6,0,null,null,5,"textarea",[["id","import-area"],["placeholder","Paste your save here..."],["rows","20"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==Ql(e,7)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,7).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ql(e,7)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ql(e,7)._compositionEnd(t.target.value)&&l),"ngModelChange"===n&&(l=!1!==(i.importTextArea=t)&&l),l},null,null)),ci(7,16384,null,0,wp,[ct,rt,[2,Ap]],null,null),di(1024,null,yp,function(e){return[e]},[wp]),ci(9,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(11,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(12,0,null,null,1,"button",[["id","import-button"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.import()&&l),l},null,null)),(e()(),us(-1,null,["Import"])),(e()(),Kr(14,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,1,0,"import-modal"),e(n,9,0,t.importTextArea)},function(e,n){e(n,6,0,Ql(n,11).ngClassUntouched,Ql(n,11).ngClassTouched,Ql(n,11).ngClassPristine,Ql(n,11).ngClassDirty,Ql(n,11).ngClassValid,Ql(n,11).ngClassInvalid,Ql(n,11).ngClassPending)})}class gw{constructor(e,n){this.modalService=e,this.serializerService=n}ngOnInit(){}hardReset(){this.serializerService.hardReset(),this.modalService.close(Lu.HARD_RESET)}cancel(){this.modalService.close(Lu.HARD_RESET)}}var pw=Zt({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;font-size:1.2em}#buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;width:100%}button[_ngcontent-%COMP%]{border:2px solid #000;color:#000;padding:1% 2%;text-align:center;text-decoration:none;display:inline-block;font-size:1em;margin:.5%}#hardReset[_ngcontent-%COMP%]{background-color:#5f0000;color:#fff}"]],data:{}});function mw(e){return cs(0,[(e()(),Kr(0,0,null,null,19,"app-modal",[["id","hard-reset-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ql(e,1).onKeydownHandler(t)&&l),l},RA,OA)),ci(1,4440064,null,0,bA,[ct,rt,Vm],{id:[0,"id"]},null),(e()(),Kr(2,0,null,0,16,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Kr(3,0,null,null,15,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Kr(4,0,null,null,1,"h2",[],null,null,null,null,null)),(e()(),us(-1,null,["Hard Reset"])),(e()(),Kr(6,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),us(-1,null,[" Are you sure you want to hard reset your progress? "])),(e()(),Kr(8,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),us(-1,null,[" This will remove ALL progress and saved game (except settings and tutorial state). "])),(e()(),Kr(10,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),us(-1,null,[" You will still be able to load game from exported save. "])),(e()(),Kr(12,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),us(-1,null,[" This should only be done if you have backup save or want to start from the beginning. "])),(e()(),Kr(14,0,null,null,4,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Kr(15,0,null,null,1,"button",[["id","hardReset"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.hardReset()&&l),l},null,null)),(e()(),us(-1,null,["HARD RESET"])),(e()(),Kr(17,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.cancel()&&l),l},null,null)),(e()(),us(-1,null,["CANCEL"])),(e()(),Kr(19,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){e(n,1,0,"hard-reset-modal")},null)}class fw{constructor(e,n){this.optionsService=e,this.modalService=n,this.positiveColour=this.optionsService.getOption(Dm.POSITIVE_COLOUR),this.negativeColour=this.optionsService.getOption(Dm.NEGATIVE_COLOUR)}ngOnInit(){this.optionsSubscription||(this.optionsSubscription=this.optionsService.registerForOptionsChange().subscribe(()=>this.initOptions())),this.initOptions()}initOptions(){this.autoSaveStatus=this.optionsService.getOption(Dm.AUTO_SAVE_STATUS),this.autoSavePeriod=this.optionsService.getOption(Dm.AUTO_SAVE_PERIOD),this.metricStatus=this.optionsService.getOption(Dm.METRIC),this.saveLogs=this.optionsService.getOption(Dm.SAVE_LOGS),this.pauseOnInit=this.optionsService.getOption(Dm.PAUSE_ON_INIT),this.keepReservationSettingsOnReset=this.optionsService.getOption(Dm.KEEP_RESERVATION_SETTINGS_ON_RESET),this.keepManagementSettingsOnReset=this.optionsService.getOption(Dm.KEEP_MANAGEMENT_SETTINGS_ON_RESET),this.keepAutoTradeOnReset=this.optionsService.getOption(Dm.KEEP_AUTO_TRADE_ON_RESET),this.sound=this.optionsService.getOption(Dm.SOUND),this.soundVolume=this.optionsService.getOption(Dm.SOUND_VOLUME),this.visualProgressBars=this.optionsService.getOption(Dm.VISUAL_PROGRESS_BARS),this.autoTextFitting=this.optionsService.getOption(Dm.AUTO_TEXT_FITTING),this.pagedView=this.optionsService.getOption(Dm.PAGED_VIEW),this.buildingsPerPage=this.optionsService.getOption(Dm.BUILDINGS_PER_PAGE),this.positiveColour=this.optionsService.getOption(Dm.POSITIVE_COLOUR),this.negativeColour=this.optionsService.getOption(Dm.NEGATIVE_COLOUR)}close(){this.modalService.close(Lu.OPTIONS)}updateOptions(){this.optionsService.setOptions([{option:Dm.AUTO_SAVE_STATUS,value:this.autoSaveStatus},{option:Dm.AUTO_SAVE_PERIOD,value:this.autoSavePeriod},{option:Dm.METRIC,value:this.metricStatus},{option:Dm.SAVE_LOGS,value:this.saveLogs},{option:Dm.PAUSE_ON_INIT,value:this.pauseOnInit},{option:Dm.KEEP_RESERVATION_SETTINGS_ON_RESET,value:this.keepReservationSettingsOnReset},{option:Dm.KEEP_MANAGEMENT_SETTINGS_ON_RESET,value:this.keepManagementSettingsOnReset},{option:Dm.KEEP_AUTO_TRADE_ON_RESET,value:this.keepAutoTradeOnReset},{option:Dm.SOUND,value:this.sound},{option:Dm.SOUND_VOLUME,value:this.soundVolume},{option:Dm.VISUAL_PROGRESS_BARS,value:this.visualProgressBars},{option:Dm.AUTO_TEXT_FITTING,value:this.autoTextFitting},{option:Dm.PAGED_VIEW,value:this.pagedView},{option:Dm.BUILDINGS_PER_PAGE,value:this.buildingsPerPage},{option:Dm.POSITIVE_COLOUR,value:this.positiveColour},{option:Dm.NEGATIVE_COLOUR,value:this.negativeColour}])}updateSaveOption(){this.autoSavePeriod=Number(this.autoSavePeriod),this.autoSavePeriod<1&&(this.autoSavePeriod=1),this.autoSavePeriod%1!=0&&(this.autoSavePeriod=Math.floor(this.autoSavePeriod)),this.autoSavePeriod>60&&(this.autoSavePeriod=60),this.updateOptions()}getSoundVolume(){return this.optionsService.getOption(Dm.SOUND_VOLUME)}changeSoundVolume(e){this.soundVolume=e.target.value,this.updateOptions()}setPositiveColour(){this.optionsService.setPositiveColour(this.positiveColour)}setNegativeColour(){this.optionsService.setNegativeColour(this.negativeColour)}resetPositiveColour(){this.positiveColour="#006400",this.setPositiveColour()}resetNegativeColour(){this.negativeColour="#8B0000",this.setNegativeColour()}resetAll(){this.optionsService.init()}}var Sw=Zt({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{text-align:center;font-size:1.2em}#title[_ngcontent-%COMP%]{text-align:center;font-weight:800;display:inline-block}.options[_ngcontent-%COMP%]{text-align:left}#autoSavePeriod[_ngcontent-%COMP%]{width:4ch;text-align:right}.slidecontainer[_ngcontent-%COMP%]{display:inline-block;width:150px}.slider[_ngcontent-%COMP%]{-webkit-appearance:none;width:100%;height:10px;border-radius:5px;background:var(--passive-colour);outline:0;opacity:.7;-webkit-transition:opacity .2s;transition:opacity .2s}.slider[_ngcontent-%COMP%]:hover{opacity:1}.slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:15px;height:15px;border-radius:50%;background:var(--active-colour);cursor:pointer}.slider[_ngcontent-%COMP%]::-moz-range-thumb{width:15px;height:15px;border-radius:50%;background:var(--active-colour);cursor:pointer}#soundVolumeLabel[_ngcontent-%COMP%]{display:inline-block;width:180px}#buildingPerPage[_ngcontent-%COMP%]{width:5ch}"]],data:{}});function Ew(e){return cs(0,[(e()(),Kr(0,0,null,null,170,"app-modal",[["id","options-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ql(e,1).onKeydownHandler(t)&&l),l},RA,OA)),ci(1,4440064,null,0,bA,[ct,rt,Vm],{id:[0,"id"]},null),(e()(),Kr(2,0,null,0,167,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Kr(3,0,null,null,166,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Kr(4,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),us(-1,null,["Options"])),(e()(),Kr(6,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(7,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(8,0,null,null,157,"div",[["class","options"]],null,null,null,null,null)),(e()(),Kr(9,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),us(-1,null,["Game options"])),(e()(),Kr(11,0,null,null,5,"input",[["id","autoSaveStatus"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==Ql(e,12).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==Ql(e,12).onTouched()&&l),"change"===n&&(l=!1!==i.updateOptions()&&l),"ngModelChange"===n&&(l=!1!==(i.autoSaveStatus=t)&&l),l},null,null)),ci(12,16384,null,0,_p,[ct,rt],null,null),di(1024,null,yp,function(e){return[e]},[_p]),ci(14,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(16,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(17,0,null,null,1,"label",[["for","autoSaveStatus"]],null,null,null,null,null)),(e()(),us(-1,null,["auto save on/off "])),(e()(),Kr(19,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(20,0,null,null,6,"input",[["id","autoSavePeriod"],["max","60"],["min","1"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==Ql(e,21)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,21).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ql(e,21)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ql(e,21)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==Ql(e,22).onChange(t.target.value)&&l),"input"===n&&(l=!1!==Ql(e,22).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,22).onTouched()&&l),"change"===n&&(l=!1!==i.updateSaveOption()&&l),"ngModelChange"===n&&(l=!1!==(i.autoSavePeriod=t)&&l),l},null,null)),ci(21,16384,null,0,wp,[ct,rt,[2,Ap]],null,null),ci(22,16384,null,0,Vp,[ct,rt],null,null),di(1024,null,yp,function(e,n){return[e,n]},[wp,Vp]),ci(24,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(26,16384,null,0,Mp,[[4,xp]],null,null),(e()(),us(-1,null,[" minutes "])),(e()(),Kr(28,0,null,null,1,"label",[["for","autoSavePeriod"]],null,null,null,null,null)),(e()(),us(-1,null,["auto save period "])),(e()(),Kr(30,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(31,0,null,null,5,"input",[["id","metricStatus"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==Ql(e,32).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==Ql(e,32).onTouched()&&l),"change"===n&&(l=!1!==i.updateOptions()&&l),"ngModelChange"===n&&(l=!1!==(i.metricStatus=t)&&l),l},null,null)),ci(32,16384,null,0,_p,[ct,rt],null,null),di(1024,null,yp,function(e){return[e]},[_p]),ci(34,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(36,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(37,0,null,null,1,"label",[["for","metricStatus"]],null,null,null,null,null)),(e()(),us(-1,null,["use metric units"])),(e()(),Kr(39,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(40,0,null,null,5,"input",[["id","saveLogsStatus"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==Ql(e,41).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==Ql(e,41).onTouched()&&l),"change"===n&&(l=!1!==i.updateOptions()&&l),"ngModelChange"===n&&(l=!1!==(i.saveLogs=t)&&l),l},null,null)),ci(41,16384,null,0,_p,[ct,rt],null,null),di(1024,null,yp,function(e){return[e]},[_p]),ci(43,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(45,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(46,0,null,null,1,"label",[["for","saveLogsStatus"]],null,null,null,null,null)),(e()(),us(-1,null,["save logs"])),(e()(),Kr(48,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(49,0,null,null,5,"input",[["id","pauseOnInit"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==Ql(e,50).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==Ql(e,50).onTouched()&&l),"change"===n&&(l=!1!==i.updateOptions()&&l),"ngModelChange"===n&&(l=!1!==(i.pauseOnInit=t)&&l),l},null,null)),ci(50,16384,null,0,_p,[ct,rt],null,null),di(1024,null,yp,function(e){return[e]},[_p]),ci(52,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(54,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(55,0,null,null,1,"label",[["for","pauseOnInit"]],null,null,null,null,null)),(e()(),us(-1,null,["pause the game on page refresh"])),(e()(),Kr(57,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(58,0,null,null,5,"input",[["id","keepReservationSettings"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==Ql(e,59).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==Ql(e,59).onTouched()&&l),"change"===n&&(l=!1!==i.updateOptions()&&l),"ngModelChange"===n&&(l=!1!==(i.keepReservationSettingsOnReset=t)&&l),l},null,null)),ci(59,16384,null,0,_p,[ct,rt],null,null),di(1024,null,yp,function(e){return[e]},[_p]),ci(61,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(63,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(64,0,null,null,1,"label",[["for","keepReservationSettings"]],null,null,null,null,null)),(e()(),us(-1,null,["Keep reservation settings active over resets and abdications"])),(e()(),Kr(66,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(67,0,null,null,5,"input",[["id","keepManagementSettings"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==Ql(e,68).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==Ql(e,68).onTouched()&&l),"change"===n&&(l=!1!==i.updateOptions()&&l),"ngModelChange"===n&&(l=!1!==(i.keepManagementSettingsOnReset=t)&&l),l},null,null)),ci(68,16384,null,0,_p,[ct,rt],null,null),di(1024,null,yp,function(e){return[e]},[_p]),ci(70,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(72,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(73,0,null,null,1,"label",[["for","keepManagementSettings"]],null,null,null,null,null)),(e()(),us(-1,null,["Keep management settings over resets and abdications"])),(e()(),Kr(75,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(76,0,null,null,5,"input",[["id","keepAutoTradeOnReset"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==Ql(e,77).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==Ql(e,77).onTouched()&&l),"change"===n&&(l=!1!==i.updateOptions()&&l),"ngModelChange"===n&&(l=!1!==(i.keepAutoTradeOnReset=t)&&l),l},null,null)),ci(77,16384,null,0,_p,[ct,rt],null,null),di(1024,null,yp,function(e){return[e]},[_p]),ci(79,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(81,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(82,0,null,null,1,"label",[["for","keepAutoTradeOnReset"]],null,null,null,null,null)),(e()(),us(-1,null,["Keep auto trade enabled after resets and abdications"])),(e()(),Kr(84,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(85,0,null,null,5,"input",[["id","sound"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==Ql(e,86).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==Ql(e,86).onTouched()&&l),"change"===n&&(l=!1!==i.updateOptions()&&l),"ngModelChange"===n&&(l=!1!==(i.sound=t)&&l),l},null,null)),ci(86,16384,null,0,_p,[ct,rt],null,null),di(1024,null,yp,function(e){return[e]},[_p]),ci(88,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(90,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(91,0,null,null,1,"label",[["for","sound"]],null,null,null,null,null)),(e()(),us(-1,null,["sound on/off"])),(e()(),Kr(93,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(94,0,null,null,1,"label",[["for","soundVolume"],["id","soundVolumeLabel"]],null,null,null,null,null)),(e()(),us(95,null,["sound volume ","% "])),(e()(),Kr(96,0,null,null,1,"div",[["class","slidecontainer"]],null,null,null,null,null)),(e()(),Kr(97,0,null,null,0,"input",[["class","slider"],["id","soundVolume"],["max","100"],["min","0"],["type","range"],["value","100"]],[[8,"value",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.changeSoundVolume(t)&&l),l},null,null)),(e()(),Kr(98,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),us(-1,null,["Performance options"])),(e()(),Kr(100,0,null,null,5,"input",[["id","pagedView"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==Ql(e,101).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==Ql(e,101).onTouched()&&l),"change"===n&&(l=!1!==i.updateOptions()&&l),"ngModelChange"===n&&(l=!1!==(i.pagedView=t)&&l),l},null,null)),ci(101,16384,null,0,_p,[ct,rt],null,null),di(1024,null,yp,function(e){return[e]},[_p]),ci(103,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(105,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(106,0,null,null,1,"label",[["for","pagedView"]],null,null,null,null,null)),(e()(),us(-1,null,["Display buildings in pages instead of all at once"])),(e()(),Kr(108,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(109,0,null,null,6,"input",[["id","buildingPerPage"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==Ql(e,110)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,110).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ql(e,110)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ql(e,110)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==Ql(e,111).onChange(t.target.value)&&l),"input"===n&&(l=!1!==Ql(e,111).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,111).onTouched()&&l),"change"===n&&(l=!1!==i.updateOptions()&&l),"ngModelChange"===n&&(l=!1!==(i.buildingsPerPage=t)&&l),l},null,null)),ci(110,16384,null,0,wp,[ct,rt,[2,Ap]],null,null),ci(111,16384,null,0,Vp,[ct,rt],null,null),di(1024,null,yp,function(e,n){return[e,n]},[wp,Vp]),ci(113,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(115,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(116,0,null,null,1,"label",[["for","buildingPerPage"]],null,null,null,null,null)),(e()(),us(-1,null,["Number of buildings on one page"])),(e()(),Kr(118,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(119,0,null,null,5,"input",[["id","visualProgressBars"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==Ql(e,120).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==Ql(e,120).onTouched()&&l),"change"===n&&(l=!1!==i.updateOptions()&&l),"ngModelChange"===n&&(l=!1!==(i.visualProgressBars=t)&&l),l},null,null)),ci(120,16384,null,0,_p,[ct,rt],null,null),di(1024,null,yp,function(e){return[e]},[_p]),ci(122,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(124,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(125,0,null,null,1,"label",[["for","visualProgressBars"]],null,null,null,null,null)),(e()(),us(-1,null,["Display moving progress bars (on) or just text (off)"])),(e()(),Kr(127,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(128,0,null,null,5,"input",[["id","autoTextFitting"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==Ql(e,129).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==Ql(e,129).onTouched()&&l),"change"===n&&(l=!1!==i.updateOptions()&&l),"ngModelChange"===n&&(l=!1!==(i.autoTextFitting=t)&&l),l},null,null)),ci(129,16384,null,0,_p,[ct,rt],null,null),di(1024,null,yp,function(e){return[e]},[_p]),ci(131,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(133,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(134,0,null,null,1,"label",[["for","autoTextFitting"]],null,null,null,null,null)),(e()(),us(-1,null,["Buildings names and effect font size will be automatically recalculated on change"])),(e()(),Kr(136,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(137,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),us(-1,null,["Display options"])),(e()(),Kr(139,0,null,null,5,"input",[["id","positiveColour"],["type","color"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==Ql(e,140)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,140).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ql(e,140)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ql(e,140)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==i.setPositiveColour()&&l),"ngModelChange"===n&&(l=!1!==(i.positiveColour=t)&&l),l},null,null)),ci(140,16384,null,0,wp,[ct,rt,[2,Ap]],null,null),di(1024,null,yp,function(e){return[e]},[wp]),ci(142,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(144,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(145,0,null,null,1,"label",[["for","positiveColour"]],null,null,null,null,null)),(e()(),us(-1,null,["Font colour for positive effects"])),(e()(),Kr(147,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.resetPositiveColour()&&l),l},null,null)),(e()(),us(-1,null,["reset to default"])),(e()(),Kr(149,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(150,0,null,null,5,"input",[["id","negativeColour"],["type","color"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==Ql(e,151)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,151).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ql(e,151)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ql(e,151)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==i.setNegativeColour()&&l),"ngModelChange"===n&&(l=!1!==(i.negativeColour=t)&&l),l},null,null)),ci(151,16384,null,0,wp,[ct,rt,[2,Ap]],null,null),di(1024,null,yp,function(e){return[e]},[wp]),ci(153,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(155,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(156,0,null,null,1,"label",[["for","negativeColour"]],null,null,null,null,null)),(e()(),us(-1,null,["Font colour for negative effects"])),(e()(),Kr(158,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.resetNegativeColour()&&l),l},null,null)),(e()(),us(-1,null,["reset to default"])),(e()(),Kr(160,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(161,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(162,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(163,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(164,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.resetAll()&&l),l},null,null)),(e()(),us(-1,null,["RESET ALL SETTINGS"])),(e()(),Kr(166,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(167,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(168,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.close()&&l),l},null,null)),(e()(),us(-1,null,["Close"])),(e()(),Kr(170,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,1,0,"options-modal"),e(n,14,0,t.autoSaveStatus),e(n,24,0,t.autoSavePeriod),e(n,34,0,t.metricStatus),e(n,43,0,t.saveLogs),e(n,52,0,t.pauseOnInit),e(n,61,0,t.keepReservationSettingsOnReset),e(n,70,0,t.keepManagementSettingsOnReset),e(n,79,0,t.keepAutoTradeOnReset),e(n,88,0,t.sound),e(n,103,0,t.pagedView),e(n,113,0,t.buildingsPerPage),e(n,122,0,t.visualProgressBars),e(n,131,0,t.autoTextFitting),e(n,142,0,t.positiveColour),e(n,153,0,t.negativeColour)},function(e,n){var t=n.component;e(n,11,0,Ql(n,16).ngClassUntouched,Ql(n,16).ngClassTouched,Ql(n,16).ngClassPristine,Ql(n,16).ngClassDirty,Ql(n,16).ngClassValid,Ql(n,16).ngClassInvalid,Ql(n,16).ngClassPending),e(n,20,0,Ql(n,26).ngClassUntouched,Ql(n,26).ngClassTouched,Ql(n,26).ngClassPristine,Ql(n,26).ngClassDirty,Ql(n,26).ngClassValid,Ql(n,26).ngClassInvalid,Ql(n,26).ngClassPending),e(n,31,0,Ql(n,36).ngClassUntouched,Ql(n,36).ngClassTouched,Ql(n,36).ngClassPristine,Ql(n,36).ngClassDirty,Ql(n,36).ngClassValid,Ql(n,36).ngClassInvalid,Ql(n,36).ngClassPending),e(n,40,0,Ql(n,45).ngClassUntouched,Ql(n,45).ngClassTouched,Ql(n,45).ngClassPristine,Ql(n,45).ngClassDirty,Ql(n,45).ngClassValid,Ql(n,45).ngClassInvalid,Ql(n,45).ngClassPending),e(n,49,0,Ql(n,54).ngClassUntouched,Ql(n,54).ngClassTouched,Ql(n,54).ngClassPristine,Ql(n,54).ngClassDirty,Ql(n,54).ngClassValid,Ql(n,54).ngClassInvalid,Ql(n,54).ngClassPending),e(n,58,0,Ql(n,63).ngClassUntouched,Ql(n,63).ngClassTouched,Ql(n,63).ngClassPristine,Ql(n,63).ngClassDirty,Ql(n,63).ngClassValid,Ql(n,63).ngClassInvalid,Ql(n,63).ngClassPending),e(n,67,0,Ql(n,72).ngClassUntouched,Ql(n,72).ngClassTouched,Ql(n,72).ngClassPristine,Ql(n,72).ngClassDirty,Ql(n,72).ngClassValid,Ql(n,72).ngClassInvalid,Ql(n,72).ngClassPending),e(n,76,0,Ql(n,81).ngClassUntouched,Ql(n,81).ngClassTouched,Ql(n,81).ngClassPristine,Ql(n,81).ngClassDirty,Ql(n,81).ngClassValid,Ql(n,81).ngClassInvalid,Ql(n,81).ngClassPending),e(n,85,0,Ql(n,90).ngClassUntouched,Ql(n,90).ngClassTouched,Ql(n,90).ngClassPristine,Ql(n,90).ngClassDirty,Ql(n,90).ngClassValid,Ql(n,90).ngClassInvalid,Ql(n,90).ngClassPending),e(n,95,0,t.getSoundVolume()),e(n,97,0,t.getSoundVolume()),e(n,100,0,Ql(n,105).ngClassUntouched,Ql(n,105).ngClassTouched,Ql(n,105).ngClassPristine,Ql(n,105).ngClassDirty,Ql(n,105).ngClassValid,Ql(n,105).ngClassInvalid,Ql(n,105).ngClassPending),e(n,109,0,Ql(n,115).ngClassUntouched,Ql(n,115).ngClassTouched,Ql(n,115).ngClassPristine,Ql(n,115).ngClassDirty,Ql(n,115).ngClassValid,Ql(n,115).ngClassInvalid,Ql(n,115).ngClassPending),e(n,119,0,Ql(n,124).ngClassUntouched,Ql(n,124).ngClassTouched,Ql(n,124).ngClassPristine,Ql(n,124).ngClassDirty,Ql(n,124).ngClassValid,Ql(n,124).ngClassInvalid,Ql(n,124).ngClassPending),e(n,128,0,Ql(n,133).ngClassUntouched,Ql(n,133).ngClassTouched,Ql(n,133).ngClassPristine,Ql(n,133).ngClassDirty,Ql(n,133).ngClassValid,Ql(n,133).ngClassInvalid,Ql(n,133).ngClassPending),e(n,139,0,Ql(n,144).ngClassUntouched,Ql(n,144).ngClassTouched,Ql(n,144).ngClassPristine,Ql(n,144).ngClassDirty,Ql(n,144).ngClassValid,Ql(n,144).ngClassInvalid,Ql(n,144).ngClassPending),e(n,150,0,Ql(n,155).ngClassUntouched,Ql(n,155).ngClassTouched,Ql(n,155).ngClassPristine,Ql(n,155).ngClassDirty,Ql(n,155).ngClassValid,Ql(n,155).ngClassInvalid,Ql(n,155).ngClassPending)})}class vw{constructor(e,n,t){this.kongregateService=e,this.royalService=n,this.modalService=t}ngOnInit(){}ok(){this.modalService.close(Lu.ROYAL)}buy(e){zu.production?this.kongregateService.buyItem(e):(this.royalService.increaseRoyalPoints(Number(e.replace("rp_pack",""))),this.modalService.close(Lu.ROYAL))}}var bw=Zt({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}.kred[_ngcontent-%COMP%]{width:30px;height:30px;vertical-align:middle}.value[_ngcontent-%COMP%]{margin-top:5px}.entry[_ngcontent-%COMP%]{width:50%;text-align:center}#close[_ngcontent-%COMP%]{margin-top:15px}"]],data:{}});function Ow(e){return cs(0,[(e()(),Kr(0,0,null,null,33,"app-modal",[["id","royal-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ql(e,1).onKeydownHandler(t)&&l),l},RA,OA)),ci(1,4440064,null,0,bA,[ct,rt,Vm],{id:[0,"id"]},null),(e()(),Kr(2,0,null,0,30,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Kr(3,0,null,null,29,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Kr(4,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["Choose how many Royal Points you would like to buy:"])),(e()(),Kr(6,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(7,0,null,null,5,"div",[["class","entry"]],null,null,null,null,null)),(e()(),Kr(8,0,null,null,2,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.buy("rp_pack10")&&l),l},null,null)),(e()(),us(-1,null,["10 "])),(e()(),Kr(10,0,null,null,0,"img",[["alt","Kreds"],["class","kred"],["src","assets/kred.png"]],null,null,null,null,null)),(e()(),Kr(11,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,[" 10 Royal points"])),(e()(),Kr(13,0,null,null,5,"div",[["class","entry"]],null,null,null,null,null)),(e()(),Kr(14,0,null,null,2,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.buy("rp_pack20")&&l),l},null,null)),(e()(),us(-1,null,["20 "])),(e()(),Kr(16,0,null,null,0,"img",[["alt","Kreds"],["class","kred"],["src","assets/kred.png"]],null,null,null,null,null)),(e()(),Kr(17,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,[" 20 Royal points"])),(e()(),Kr(19,0,null,null,5,"div",[["class","entry"]],null,null,null,null,null)),(e()(),Kr(20,0,null,null,2,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.buy("rp_pack55")&&l),l},null,null)),(e()(),us(-1,null,["50 "])),(e()(),Kr(22,0,null,null,0,"img",[["alt","Kreds"],["class","kred"],["src","assets/kred.png"]],null,null,null,null,null)),(e()(),Kr(23,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,[" 55 Royal points"])),(e()(),Kr(25,0,null,null,5,"div",[["class","entry"]],null,null,null,null,null)),(e()(),Kr(26,0,null,null,2,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.buy("rp_pack125")&&l),l},null,null)),(e()(),us(-1,null,["100 "])),(e()(),Kr(28,0,null,null,0,"img",[["alt","Kreds"],["class","kred"],["src","assets/kred.png"]],null,null,null,null,null)),(e()(),Kr(29,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,[" 125 Royal points"])),(e()(),Kr(31,0,null,null,1,"button",[["id","close"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.ok()&&l),l},null,null)),(e()(),us(-1,null,["CLOSE"])),(e()(),Kr(33,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){e(n,1,0,"royal-modal")},null)}class Rw{constructor(e,n,t,l,i){this.servicesService=e,this.modalService=n,this.idService=t,this.resourcesService=l,this.worldService=i,this.colonistsHolder=0,this.troopsHolder=new Array(Object.values(_u).length).fill(0),this.missions=Tu,n.registerForMissionData().subscribe(e=>{this.missionData=e,this.troopsHolder=new Array(Object.values(_u).length).fill(0),this.colonistsHolder=0})}ngOnInit(){}closeModal(){this.modalService.close(Lu.MISSION),this.missionData=null}conquer(){const e=this.worldService.findPath(this.missionData.originRegion.id,this.missionData.targetRegion.id,wu.PLAYER),n=new Ub([]);this.getTroops(Tu.CONQUER).forEach(e=>{this.troopsHolder[e]>0&&(n.addTroop(e,this.troopsHolder[e]),this.missionData.originRegion.army.removeTroop(e,this.troopsHolder[e]))}),this.worldService.addMission(new gR(this.servicesService,this.idService.getNextId(),this.worldService.getPlayerCountry(),n,e)),this.closeModal()}colonize(){if(this.resourcesService.removeRecruit(this.colonistsHolder)){const e=this.worldService.findPath(0,this.missionData.targetRegion.id,wu.PLAYER);this.worldService.addMission(new dR(this.servicesService,this.idService.getNextId(),this.worldService.getPlayerCountry(),new Ub([new Hb(_u.COLONIST,this.colonistsHolder)]),e)),this.closeModal()}else this.modalService.info("Not enough villagers")}plunder(){const e=this.worldService.findPath(this.missionData.originRegion.id,this.missionData.targetRegion.id,wu.PLAYER),n=new Ub([]);this.getTroops(Tu.PLUNDER).forEach(e=>{this.troopsHolder[e]>0&&(n.addTroop(e,this.troopsHolder[e]),this.missionData.originRegion.army.removeTroop(e,this.troopsHolder[e]))}),this.worldService.addMission(new mR(this.servicesService,this.idService.getNextId(),this.worldService.getPlayerCountry(),n,e)),this.closeModal()}move(){const e=this.worldService.findPath(this.missionData.originRegion.id,this.missionData.targetRegion.id,wu.PLAYER),n=new Ub([]);this.getTroops(Tu.MOVE).forEach(e=>{this.troopsHolder[e]>0&&(n.addTroop(e,this.troopsHolder[e]),this.missionData.originRegion.army.removeTroop(e,this.troopsHolder[e]))}),this.worldService.addMission(new pR(this.servicesService,this.idService.getNextId(),this.worldService.getPlayerCountry(),n,e)),this.closeModal()}spy(){const e=this.worldService.findPath(this.missionData.originRegion.id,this.missionData.targetRegion.id,wu.SPECIAL);this.worldService.addMission(new fR(this.servicesService,this.idService.getNextId(),this.worldService.getPlayerCountry(),new Ub([new Hb(_u.SPY,this.troopsHolder[_u.SPY])]),e)),this.missionData.originRegion.army.removeTroop(_u.SPY,this.troopsHolder[_u.SPY]),this.closeModal()}prepareViewbox(e){return e.X-65+" "+(e.Y-65)+" 130 130"}isMissionAllowed(e){if(this.missionData.targetRegionCountry)if(this.missionData.targetRegionCountry===wu.PLAYER){if(e===Tu.MOVE)return!0}else if(this.missionData.targetRegionCountry===wu.NEUTRAL){if(e===Tu.MOVE||e===Tu.COLONIZE)return!0}else{if(e===Tu.SPY)return!0;if((e===Tu.PLUNDER||e===Tu.CONQUER)&&this.hasPath())return!0}return!1}hasPath(){return!!(this.missionData.originRegion&&this.missionData.targetRegion&&this.worldService.findPath(this.missionData.originRegion.id,this.missionData.targetRegion.id,wu.PLAYER,!0))}changeMission(e){this.missionData.missionType=e,e===Tu.COLONIZE&&(this.missionData.originRegion=this.worldService.getRegion(0),this.missionData.originRegionColour=this.worldService.getPlayerCountry().colour)}start(){if(this.canStart()){switch(this.getMissionCost(this.missionData.missionType).forEach(e=>{this.resourcesService.decreaseResource(e.resource,e.amount*this.getUnitsNumber(),"Mission",!0)}),this.missionData.missionType){case Tu.MOVE:this.move();break;case Tu.PLUNDER:this.plunder();break;case Tu.CONQUER:this.conquer();break;case Tu.COLONIZE:this.colonize();break;case Tu.SPY:this.spy()}this.troopsHolder=new Array(Object.values(_u).length).fill(0),this.colonistsHolder=0}}getTroopName(e){return Pu.prepareTroopName(e)}getTroops(e){return e===Tu.MOVE?[_u.SPY,_u.MILITIA,_u.SPEARMAN,_u.ARCHER,_u.SWORDSMAN,_u.LIGHT_CAVALRY]:[_u.MILITIA,_u.SPEARMAN,_u.ARCHER,_u.SWORDSMAN,_u.LIGHT_CAVALRY]}getSpyUnits(){return[_u.SPY]}getTroop(e){return this.missionData.originRegion.army.units.find(n=>n.troop===e)||new Hb(e,0)}changeOrigin(){if(this.missionData.missionType!==Tu.COLONIZE){this.modalService.open(Lu.WORLD),this.modalService.setRegionSelection(!0);const e=this.modalService.registerForReturnRegion().subscribe(n=>{e.unsubscribe(),null!==n&&(this.missionData.originRegionColour=this.worldService.getCountryByRegionId(n.id).colour,this.missionData.originRegion=n,this.troopsHolder=new Array(Object.values(_u).length).fill(0))})}else this.modalService.info("Cannot change origin region for colonization mission")}changeTarget(){this.modalService.open(Lu.WORLD),this.modalService.setRegionSelection(!1);const e=this.modalService.registerForReturnRegion().subscribe(n=>{if(e.unsubscribe(),null!==n){const e=this.worldService.getCountryByRegionId(n.id);this.missionData.targetRegionColour=e.colour,this.missionData.targetRegionCountry=e.id,this.missionData.targetRegion=n,e.id===wu.PLAYER||e.id===wu.NEUTRAL?this.isMissionAllowed(this.missionData.missionType)||(this.missionData.missionType=Tu.MOVE):this.isMissionAllowed(this.missionData.missionType)||(this.missionData.missionType=Tu.PLUNDER)}})}canStart(){let e=!1;if(this.missionData.originRegion&&this.missionData.targetRegion&&(this.missionData.missionType===Tu.SPY&&this.troopsHolder[_u.SPY]>0?e=!0:this.missionData.missionType===Tu.COLONIZE?e=this.colonistsHolder>0:this.anyTroops()&&(e=!0)),e)for(let n=0;n<this.troopsHolder.length;n++)this.troopsHolder[n]>0&&(void 0===this.missionData.originRegion.army.getUnit(n)||this.missionData.originRegion.army.getUnit(n).size<this.troopsHolder[n])&&(e=!1);return e&&this.getMissionCost(this.missionData.missionType).forEach(n=>{this.hasResource(n.resource,n.amount*this.getUnitsNumber())||(e=!1)}),e}anyTroops(){let e=!1;return this.troopsHolder.forEach(n=>{n>0&&(e=!0)}),e}getFreeWorkers(){return this.resourcesService.getPeople()<20?this.resourcesService.getPeople():20}getMissionCost(e){return ro.getMission(e).COST}getResourceName(e){return Pu.prepareResourceName(e)}getUnitsNumber(){let e=0;return this.missionData.missionType===Tu.COLONIZE?e=this.colonistsHolder:this.troopsHolder.forEach(n=>e+=n),e}hasResource(e,n){return 0===this.resourcesService.hasResource(e,n,"Mission",!0)}getUnitsStrength(){let e=0;for(let n=0;n<this.troopsHolder.length;n++)this.troopsHolder[n]>0&&(e+=ro.getTroop(n).STRENGTH*this.troopsHolder[n]);return e}getUnitsDefense(){let e=0;for(let n=0;n<this.troopsHolder.length;n++)this.troopsHolder[n]>0&&(e+=ro.getTroop(n).DEFENSE*this.troopsHolder[n]);return e}getMissionName(){return void 0!==this.missionData.missionType?Pu.prepareMissionName(this.missionData.missionType):"no mission"}}var Tw=Zt({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;font-size:1.2em}#regions[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}.region[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;padding:10px}.regionSVG[_ngcontent-%COMP%]{border:1px solid #000}.center[_ngcontent-%COMP%]{text-align:center}#missions[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}.mission[_ngcontent-%COMP%]{height:50px;width:50px;border:1px solid #000;padding:5px;margin:10px;opacity:.3;cursor:pointer}.selectedMission[_ngcontent-%COMP%]{opacity:1;cursor:initial}#buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px}.slidecontainer[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;margin-top:3px;width:300px}.slider[_ngcontent-%COMP%]{-webkit-appearance:none;width:100%;height:10px;border-radius:5px;background:var(--passive-colour);outline:0;opacity:.7;-webkit-transition:opacity .2s;transition:opacity .2s}.slider[_ngcontent-%COMP%]:hover{opacity:1}.slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:15px;height:15px;border-radius:50%;background:var(--active-colour);cursor:pointer}.slider[_ngcontent-%COMP%]::-moz-range-thumb{width:15px;height:15px;border-radius:50%;background:var(--active-colour);cursor:pointer}.armyInput[_ngcontent-%COMP%]{width:5ch}.troopLabel[_ngcontent-%COMP%]{display:inline-block;width:150px}.inactive[_ngcontent-%COMP%]{color:#5f5f5f}.inactive[_ngcontent-%COMP%]:hover{cursor:initial}.inactive[_ngcontent-%COMP%]:active{background-color:var(--passive-colour)}#secondHalf[_ngcontent-%COMP%]{font-size:.7em;padding-bottom:10px}#costs[_ngcontent-%COMP%]{text-align:center}#costList[_ngcontent-%COMP%], #totalCostList[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-pack:center;justify-content:center}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;margin-right:3px}.notAvailable[_ngcontent-%COMP%]{color:var(--negative-colour)}#bottomSection[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-pack:center;justify-content:center;margin-top:10px}#bottomSection[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{padding:10px}#stats[_ngcontent-%COMP%]{text-align:center}"]],data:{}});function Cw(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,":svg:svg",[["class","regionSVG"]],[[1,"height",0],[1,"width",0],[1,"viewBox",0]],null,null,null,null)),(e()(),Kr(2,0,null,null,0,":svg:path",[],[[1,"fill",0],[1,"d",0],[1,"stroke",0],[1,"stroke-width",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,1,0,"80px","80px",t.prepareViewbox(t.missionData.originRegion.center)),e(n,2,0,t.missionData.originRegionColour,t.missionData.originRegion.path,"black","2")})}function Iw(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Kr(1,0,null,null,0,":svg:svg",[["class","regionSVG"]],[[1,"height",0],[1,"width",0]],null,null,null,null))],null,function(e,n){e(n,1,0,"80px","80px")})}function yw(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,":svg:svg",[["class","regionSVG"]],[[1,"height",0],[1,"width",0],[1,"viewBox",0]],null,null,null,null)),(e()(),Kr(2,0,null,null,0,":svg:path",[],[[1,"fill",0],[1,"d",0],[1,"stroke",0],[1,"stroke-width",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,1,0,"80px","80px",t.prepareViewbox(t.missionData.targetRegion.center)),e(n,2,0,t.missionData.targetRegionColour,t.missionData.targetRegion.path,"black","2")})}function _w(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Kr(1,0,null,null,0,":svg:svg",[["class","regionSVG"]],[[1,"height",0],[1,"width",0]],null,null,null,null))],null,function(e,n){e(n,1,0,"80px","80px")})}function Aw(e){return cs(0,[(e()(),Kr(0,0,null,null,4,"div",[["class","mission"]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.changeMission(i.missions.COLONIZE)&&l),l},null,null)),di(512,null,Uo,Go,[Ct,It,rt,ct]),ci(2,278528,null,0,Wo,[Uo],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),rs(3,{selectedMission:0}),(e()(),Kr(4,0,null,null,0,"img",[["src","assets/army/mission/colonize.svg"]],null,null,null,null,null))],function(e,n){var t=n.component,l=e(n,3,0,t.missionData.missionType===t.missions.COLONIZE);e(n,2,0,"mission",l)},null)}function ww(e){return cs(0,[(e()(),Kr(0,0,null,null,4,"div",[["class","mission"]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.changeMission(i.missions.MOVE)&&l),l},null,null)),di(512,null,Uo,Go,[Ct,It,rt,ct]),ci(2,278528,null,0,Wo,[Uo],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),rs(3,{selectedMission:0}),(e()(),Kr(4,0,null,null,0,"img",[["src","assets/army/mission/move.svg"]],null,null,null,null,null))],function(e,n){var t=n.component,l=e(n,3,0,t.missionData.missionType===t.missions.MOVE);e(n,2,0,"mission",l)},null)}function Nw(e){return cs(0,[(e()(),Kr(0,0,null,null,4,"div",[["class","mission"]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.changeMission(i.missions.SPY)&&l),l},null,null)),di(512,null,Uo,Go,[Ct,It,rt,ct]),ci(2,278528,null,0,Wo,[Uo],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),rs(3,{selectedMission:0}),(e()(),Kr(4,0,null,null,0,"img",[["src","assets/army/mission/spy.svg"]],null,null,null,null,null))],function(e,n){var t=n.component,l=e(n,3,0,t.missionData.missionType===t.missions.SPY);e(n,2,0,"mission",l)},null)}function Pw(e){return cs(0,[(e()(),Kr(0,0,null,null,4,"div",[["class","mission"]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.changeMission(i.missions.PLUNDER)&&l),l},null,null)),di(512,null,Uo,Go,[Ct,It,rt,ct]),ci(2,278528,null,0,Wo,[Uo],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),rs(3,{selectedMission:0}),(e()(),Kr(4,0,null,null,0,"img",[["src","assets/army/mission/plunder.svg"]],null,null,null,null,null))],function(e,n){var t=n.component,l=e(n,3,0,t.missionData.missionType===t.missions.PLUNDER);e(n,2,0,"mission",l)},null)}function kw(e){return cs(0,[(e()(),Kr(0,0,null,null,4,"div",[["class","mission"]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.changeMission(i.missions.CONQUER)&&l),l},null,null)),di(512,null,Uo,Go,[Ct,It,rt,ct]),ci(2,278528,null,0,Wo,[Uo],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),rs(3,{selectedMission:0}),(e()(),Kr(4,0,null,null,0,"img",[["src","assets/army/mission/conquer.svg"]],null,null,null,null,null))],function(e,n){var t=n.component,l=e(n,3,0,t.missionData.missionType===t.missions.CONQUER);e(n,2,0,"mission",l)},null)}function xw(e){return cs(0,[(e()(),Kr(0,0,null,null,21,"div",[],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"span",[["class","troopLabel"]],null,null,null,null,null)),(e()(),us(2,null,["",":"])),(e()(),Kr(3,0,null,null,6,"input",[["class","armyInput"],["min","0"],["type","number"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==Ql(e,4)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,4).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ql(e,4)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ql(e,4)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==Ql(e,5).onChange(t.target.value)&&l),"input"===n&&(l=!1!==Ql(e,5).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,5).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.troopsHolder[e.context.$implicit]=t)&&l),l},null,null)),ci(4,16384,null,0,wp,[ct,rt,[2,Ap]],null,null),ci(5,16384,null,0,Vp,[ct,rt],null,null),di(1024,null,yp,function(e,n){return[e,n]},[wp,Vp]),ci(7,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(9,16384,null,0,Mp,[[4,xp]],null,null),(e()(),us(10,null,["/",""])),(e()(),Kr(11,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(12,0,null,null,9,"div",[["class","slidecontainer"]],null,null,null,null,null)),(e()(),us(-1,null,[" 0 "])),(e()(),Kr(14,0,null,null,6,"input",[["class","slider"],["min","0"],["type","range"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==Ql(e,15)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,15).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ql(e,15)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ql(e,15)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==Ql(e,16).onChange(t.target.value)&&l),"input"===n&&(l=!1!==Ql(e,16).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,16).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.troopsHolder[e.context.$implicit]=t)&&l),l},null,null)),ci(15,16384,null,0,wp,[ct,rt,[2,Ap]],null,null),ci(16,16384,null,0,$p,[ct,rt],null,null),di(1024,null,yp,function(e,n){return[e,n]},[wp,$p]),ci(18,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(20,16384,null,0,Mp,[[4,xp]],null,null),(e()(),us(21,null,[" "," "]))],function(e,n){var t=n.component;e(n,7,0,t.troopsHolder[n.context.$implicit]),e(n,18,0,t.troopsHolder[n.context.$implicit])},function(e,n){var t=n.component;e(n,2,0,t.getTroopName(n.context.$implicit)),e(n,3,0,Il(1,"",t.getTroop(n.context.$implicit).size,""),Ql(n,9).ngClassUntouched,Ql(n,9).ngClassTouched,Ql(n,9).ngClassPristine,Ql(n,9).ngClassDirty,Ql(n,9).ngClassValid,Ql(n,9).ngClassInvalid,Ql(n,9).ngClassPending),e(n,10,0,t.getTroop(n.context.$implicit).size),e(n,14,0,Il(1,"",t.getTroop(n.context.$implicit).size,""),Ql(n,20).ngClassUntouched,Ql(n,20).ngClassTouched,Ql(n,20).ngClassPristine,Ql(n,20).ngClassDirty,Ql(n,20).ngClassValid,Ql(n,20).ngClassInvalid,Ql(n,20).ngClassPending),e(n,21,0,t.getTroop(n.context.$implicit).size)})}function Mw(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,xw)),ci(2,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.getTroops(t.missionData.missionType))},null)}function Dw(e){return cs(0,[(e()(),Kr(0,0,null,null,21,"div",[],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"span",[["class","troopLabel"]],null,null,null,null,null)),(e()(),us(-1,null,["Colonist:"])),(e()(),Kr(3,0,null,null,6,"input",[["class","armyInput"],["min","0"],["type","number"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==Ql(e,4)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,4).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ql(e,4)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ql(e,4)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==Ql(e,5).onChange(t.target.value)&&l),"input"===n&&(l=!1!==Ql(e,5).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,5).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.colonistsHolder=t)&&l),l},null,null)),ci(4,16384,null,0,wp,[ct,rt,[2,Ap]],null,null),ci(5,16384,null,0,Vp,[ct,rt],null,null),di(1024,null,yp,function(e,n){return[e,n]},[wp,Vp]),ci(7,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(9,16384,null,0,Mp,[[4,xp]],null,null),(e()(),us(10,null,["/",""])),(e()(),Kr(11,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(12,0,null,null,9,"div",[["class","slidecontainer"]],null,null,null,null,null)),(e()(),us(-1,null,[" 0 "])),(e()(),Kr(14,0,null,null,6,"input",[["class","slider"],["min","0"],["type","range"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==Ql(e,15)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,15).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ql(e,15)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ql(e,15)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==Ql(e,16).onChange(t.target.value)&&l),"input"===n&&(l=!1!==Ql(e,16).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,16).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.colonistsHolder=t)&&l),l},null,null)),ci(15,16384,null,0,wp,[ct,rt,[2,Ap]],null,null),ci(16,16384,null,0,$p,[ct,rt],null,null),di(1024,null,yp,function(e,n){return[e,n]},[wp,$p]),ci(18,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(20,16384,null,0,Mp,[[4,xp]],null,null),(e()(),us(21,null,[" "," "]))],function(e,n){var t=n.component;e(n,7,0,t.colonistsHolder),e(n,18,0,t.colonistsHolder)},function(e,n){var t=n.component;e(n,3,0,Il(1,"",t.getFreeWorkers(),""),Ql(n,9).ngClassUntouched,Ql(n,9).ngClassTouched,Ql(n,9).ngClassPristine,Ql(n,9).ngClassDirty,Ql(n,9).ngClassValid,Ql(n,9).ngClassInvalid,Ql(n,9).ngClassPending),e(n,10,0,t.getFreeWorkers()),e(n,14,0,Il(1,"",t.getFreeWorkers(),""),Ql(n,20).ngClassUntouched,Ql(n,20).ngClassTouched,Ql(n,20).ngClassPristine,Ql(n,20).ngClassDirty,Ql(n,20).ngClassValid,Ql(n,20).ngClassInvalid,Ql(n,20).ngClassPending),e(n,21,0,t.getFreeWorkers())})}function Lw(e){return cs(0,[(e()(),Kr(0,0,null,null,21,"div",[],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"span",[["class","troopLabel"]],null,null,null,null,null)),(e()(),us(2,null,["",":"])),(e()(),Kr(3,0,null,null,6,"input",[["class","armyInput"],["min","0"],["type","number"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==Ql(e,4)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,4).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ql(e,4)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ql(e,4)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==Ql(e,5).onChange(t.target.value)&&l),"input"===n&&(l=!1!==Ql(e,5).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,5).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.troopsHolder[e.context.$implicit]=t)&&l),l},null,null)),ci(4,16384,null,0,wp,[ct,rt,[2,Ap]],null,null),ci(5,16384,null,0,Vp,[ct,rt],null,null),di(1024,null,yp,function(e,n){return[e,n]},[wp,Vp]),ci(7,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(9,16384,null,0,Mp,[[4,xp]],null,null),(e()(),us(10,null,["/",""])),(e()(),Kr(11,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(12,0,null,null,9,"div",[["class","slidecontainer"]],null,null,null,null,null)),(e()(),us(-1,null,[" 0 "])),(e()(),Kr(14,0,null,null,6,"input",[["class","slider"],["min","0"],["type","range"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==Ql(e,15)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,15).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ql(e,15)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ql(e,15)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==Ql(e,16).onChange(t.target.value)&&l),"input"===n&&(l=!1!==Ql(e,16).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,16).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.troopsHolder[e.context.$implicit]=t)&&l),l},null,null)),ci(15,16384,null,0,wp,[ct,rt,[2,Ap]],null,null),ci(16,16384,null,0,$p,[ct,rt],null,null),di(1024,null,yp,function(e,n){return[e,n]},[wp,$p]),ci(18,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(20,16384,null,0,Mp,[[4,xp]],null,null),(e()(),us(21,null,[" "," "]))],function(e,n){var t=n.component;e(n,7,0,t.troopsHolder[n.context.$implicit]),e(n,18,0,t.troopsHolder[n.context.$implicit])},function(e,n){var t=n.component;e(n,2,0,t.getTroopName(n.context.$implicit)),e(n,3,0,Il(1,"",t.getTroop(n.context.$implicit).size,""),Ql(n,9).ngClassUntouched,Ql(n,9).ngClassTouched,Ql(n,9).ngClassPristine,Ql(n,9).ngClassDirty,Ql(n,9).ngClassValid,Ql(n,9).ngClassInvalid,Ql(n,9).ngClassPending),e(n,10,0,t.getTroop(n.context.$implicit).size),e(n,14,0,Il(1,"",t.getTroop(n.context.$implicit).size,""),Ql(n,20).ngClassUntouched,Ql(n,20).ngClassTouched,Ql(n,20).ngClassPristine,Ql(n,20).ngClassDirty,Ql(n,20).ngClassValid,Ql(n,20).ngClassInvalid,Ql(n,20).ngClassPending),e(n,21,0,t.getTroop(n.context.$implicit).size)})}function Fw(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,Lw)),ci(2,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,2,0,n.component.getSpyUnits())},null)}function Hw(e){return cs(0,[(e()(),Kr(0,0,null,null,6,"div",[["id","stats"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["Stats"])),(e()(),Kr(3,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(4,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(5,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),us(6,null,[" ","% success chance "]))],function(e,n){e(n,5,0,"colonize","army/mission")},function(e,n){e(n,6,0,5*n.component.colonistsHolder)})}function Uw(e){return cs(0,[(e()(),Kr(0,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(2,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),us(3,null,[" "," "]))],function(e,n){e(n,2,0,n.component.getResourceName(n.context.$implicit.resource),"resources")},function(e,n){e(n,3,0,n.context.$implicit.amount)})}function Gw(e){return cs(0,[(e()(),Kr(0,0,null,null,7,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(2,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Kr(3,0,null,null,4,"span",[],null,null,null,null,null)),di(512,null,Uo,Go,[Ct,It,rt,ct]),ci(5,278528,null,0,Wo,[Uo],{ngClass:[0,"ngClass"]},null),rs(6,{notAvailable:0}),(e()(),us(7,null,[" "," "]))],function(e,n){var t=n.component;e(n,2,0,t.getResourceName(n.context.$implicit.resource),"resources");var l=e(n,6,0,!t.hasResource(n.context.$implicit.resource,n.context.$implicit.amount*t.getUnitsNumber()));e(n,5,0,l)},function(e,n){e(n,7,0,n.context.$implicit.amount*n.component.getUnitsNumber())})}function Bw(e){return cs(0,[(e()(),Kr(0,0,null,null,10,"div",[["id","stats"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["Stats"])),(e()(),Kr(3,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(4,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(5,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),us(6,null,[" "," "])),(e()(),Kr(7,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(8,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(9,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),us(10,null,[" "," "]))],function(e,n){e(n,5,0,"attack","army"),e(n,9,0,"defense","army")},function(e,n){var t=n.component;e(n,6,0,t.getUnitsStrength()),e(n,10,0,t.getUnitsDefense())})}function Ww(e){return cs(0,[(e()(),Kr(0,0,null,null,64,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"div",[["id","title"]],null,null,null,null,null)),(e()(),us(-1,null,["New mission"])),(e()(),Kr(3,0,null,null,18,"div",[["id","regions"]],null,null,null,null,null)),(e()(),Kr(4,0,null,null,8,"div",[["class","region"]],null,null,null,null,null)),(e()(),Kr(5,0,null,null,1,"span",[["class","center"]],null,null,null,null,null)),(e()(),us(-1,null,["origin"])),(e()(),$r(16777216,null,null,1,null,Cw)),ci(8,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,Iw)),ci(10,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(11,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.changeOrigin()&&l),l},null,null)),(e()(),us(-1,null,["change"])),(e()(),Kr(13,0,null,null,8,"div",[["class","region"]],null,null,null,null,null)),(e()(),Kr(14,0,null,null,1,"span",[["class","center"]],null,null,null,null,null)),(e()(),us(-1,null,["target"])),(e()(),$r(16777216,null,null,1,null,yw)),ci(17,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,_w)),ci(19,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(20,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.changeTarget()&&l),l},null,null)),(e()(),us(-1,null,["change"])),(e()(),Kr(22,0,null,null,10,"div",[["id","missions"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,Aw)),ci(24,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,ww)),ci(26,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,Nw)),ci(28,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,Pw)),ci(30,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,kw)),ci(32,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(33,0,null,null,23,"div",[["id","secondHalf"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,Mw)),ci(35,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,Dw)),ci(37,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,Fw)),ci(39,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(40,0,null,null,16,"div",[["id","bottomSection"]],null,null,null,null,null)),(e()(),Kr(41,0,null,null,13,"div",[["id","costs"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,Hw)),ci(43,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(44,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["Cost per person"])),(e()(),Kr(46,0,null,null,3,"div",[["id","costList"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,Uw)),ci(48,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),(e()(),Kr(49,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(50,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["Total cost"])),(e()(),Kr(52,0,null,null,2,"div",[["id","totalCostList"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,Gw)),ci(54,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),(e()(),$r(16777216,null,null,1,null,Bw)),ci(56,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(57,0,null,null,7,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Kr(58,0,null,null,4,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.start()&&l),l},null,null)),di(512,null,Uo,Go,[Ct,It,rt,ct]),ci(60,278528,null,0,Wo,[Uo],{ngClass:[0,"ngClass"]},null),rs(61,{inactive:0}),(e()(),us(62,null,["",""])),(e()(),Kr(63,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.closeModal()&&l),l},null,null)),(e()(),us(-1,null,["Cancel"]))],function(e,n){var t=n.component;e(n,8,0,t.missionData.originRegion),e(n,10,0,!t.missionData.originRegion),e(n,17,0,t.missionData.targetRegion),e(n,19,0,!t.missionData.targetRegion),e(n,24,0,t.isMissionAllowed(t.missions.COLONIZE)),e(n,26,0,t.isMissionAllowed(t.missions.MOVE)),e(n,28,0,t.isMissionAllowed(t.missions.SPY)),e(n,30,0,t.isMissionAllowed(t.missions.PLUNDER)),e(n,32,0,t.isMissionAllowed(t.missions.CONQUER)),e(n,35,0,t.missionData.originRegion&&t.missionData.missionType!==t.missions.SPY&&t.missionData.missionType!==t.missions.COLONIZE),e(n,37,0,t.missionData.originRegion&&t.missionData.missionType===t.missions.COLONIZE),e(n,39,0,t.missionData.originRegion&&t.missionData.missionType===t.missions.SPY),e(n,43,0,t.missionData.missionType===t.missions.COLONIZE),e(n,48,0,t.getMissionCost(t.missionData.missionType)),e(n,54,0,t.getMissionCost(t.missionData.missionType)),e(n,56,0,t.missionData.missionType!==t.missions.COLONIZE);var l=e(n,61,0,!t.canStart());e(n,60,0,l)},function(e,n){e(n,62,0,n.component.getMissionName())})}function Vw(e){return cs(0,[(e()(),Kr(0,0,null,null,5,"app-modal",[["id","mission-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ql(e,1).onKeydownHandler(t)&&l),l},RA,OA)),ci(1,4440064,null,0,bA,[ct,rt,Vm],{id:[0,"id"]},null),(e()(),Kr(2,0,null,0,2,"div",[["class","modal"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,Ww)),ci(4,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(5,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,1,0,"mission-modal"),e(n,4,0,t.missionData)},null)}class zw{constructor(e,n){this.modalService=e,this.resourcesService=n}ngOnInit(){this.modalService.registerForValue().subscribe(e=>{e&&void 0!==e.id&&(this.offer=e,this.value=this.offer.amount,this.inputRef&&(this.inputRef.nativeElement.style.width=this.value.toString().length+1+"ch"))})}ok(){this.checkValue(this.value),this.modalService.sendValueInput(Number(this.value)),this.modalService.close(Lu.MARKET),this.offer=null}cancel(){this.modalService.sendValueInput(null),this.offer=null,this.modalService.close(Lu.MARKET)}onKeydownHandler(e){"none"!==document.getElementById("market-modal").style.display&&(e.preventDefault(),this.ok())}getResourceName(e){return Su[e]}calculatePrice(){let e=this.value;return this.offer.amount<e&&(e=this.offer.amount),this.offer.buy?Math.ceil(e/this.offer.amount*this.offer.price):Math.floor(e/this.offer.amount*this.offer.price)}checkValue(e){if(e&&!isNaN(e)){if(this.offer.amount>=e)return!0;this.inputRef.nativeElement.value=this.offer.amount,this.value=this.offer.amount}return!1}getResourceAmount(){return this.resourcesService.getResource(this.offer.resource).amount}getResourceLimit(){return this.resourcesService.getResource(this.offer.resource).limit}}var Yw=Zt({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;font-size:1.2em}#title[_ngcontent-%COMP%]{font-size:1.5em;margin-bottom:5px}#buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px;padding:5px}#input[_ngcontent-%COMP%]{display:inline-block;width:3ch;font-size:1em}app-icon[_ngcontent-%COMP%]{display:inline-block;margin:0 3px}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center}"]],data:{}});function $w(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["buy"]))],null,null)}function Kw(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["sell"]))],null,null)}function jw(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["BUY"]))],null,null)}function qw(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["SELL"]))],null,null)}function Xw(e){return cs(0,[(e()(),Kr(0,0,null,null,35,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),us(-1,null,["Market offer"])),(e()(),Kr(3,0,null,null,9,"span",[["class","icon"],["id","text"]],null,null,null,null,null)),(e()(),us(-1,null,["How many "])),(e()(),Kr(5,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(6,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),us(7,null,["(","/",") would you like to "])),(e()(),$r(16777216,null,null,1,null,$w)),ci(9,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,Kw)),ci(11,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),us(-1,null,["?"])),(e()(),Kr(13,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(14,0,null,null,12,"span",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(15,0,[[1,0],["input",1]],null,5,"input",[["id","input"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==Ql(e,16)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,16).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ql(e,16)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ql(e,16)._compositionEnd(t.target.value)&&l),"ngModelChange"===n&&(l=!1!==i.checkValue(t)&&l),"ngModelChange"===n&&(l=!1!==(i.value=t)&&l),l},null,null)),ci(16,16384,null,0,wp,[ct,rt,[2,Ap]],null,null),di(1024,null,yp,function(e){return[e]},[wp]),ci(18,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(20,16384,null,0,Mp,[[4,xp]],null,null),(e()(),us(21,null,["/"," "])),(e()(),Kr(22,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(23,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),us(24,null,[" for "," "])),(e()(),Kr(25,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(26,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Kr(27,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(28,0,null,null,7,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Kr(29,0,null,null,4,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.ok()&&l),l},null,null)),(e()(),$r(16777216,null,null,1,null,jw)),ci(31,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,qw)),ci(33,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(34,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.cancel()&&l),l},null,null)),(e()(),us(-1,null,["CANCEL"]))],function(e,n){var t=n.component;e(n,6,0,t.getResourceName(t.offer.resource),"resources"),e(n,9,0,t.offer.buy),e(n,11,0,!t.offer.buy),e(n,18,0,t.value),e(n,23,0,t.getResourceName(t.offer.resource),"resources"),e(n,26,0,"coins","resources"),e(n,31,0,t.offer.buy),e(n,33,0,!t.offer.buy)},function(e,n){var t=n.component;e(n,7,0,t.getResourceAmount(),t.getResourceLimit()),e(n,15,0,Ql(n,20).ngClassUntouched,Ql(n,20).ngClassTouched,Ql(n,20).ngClassPristine,Ql(n,20).ngClassDirty,Ql(n,20).ngClassValid,Ql(n,20).ngClassInvalid,Ql(n,20).ngClassPending),e(n,21,0,t.offer.amount),e(n,24,0,t.calculatePrice())})}function Qw(e){return cs(0,[Zr(671088640,1,{inputRef:0}),(e()(),Kr(1,0,null,null,5,"app-modal",[["id","market-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ql(e,2).onKeydownHandler(t)&&l),l},RA,OA)),ci(2,4440064,null,0,bA,[ct,rt,Vm],{id:[0,"id"]},null),(e()(),Kr(3,0,null,0,2,"div",[["class","modal"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,Xw)),ci(5,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(6,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,2,0,"market-modal"),e(n,5,0,t.offer)},null)}class Zw{constructor(e,n,t){this.servicesService=e,this.modalService=n,this.resourcesService=t,this.modalService.registerForBuilding().subscribe(e=>{this.building=e,setTimeout(function(){window.document.getElementsByClassName("textInput").item(0).select()},10)})}ngOnInit(){}ok(){this.modalService.close(Lu.WORK_MANAGEMENT)}cancel(){this.modalService.close(Lu.WORK_MANAGEMENT)}stop(){this.building.isWorking()?this.building.stopProduction():this.building.startProduction()||this.modalService.info("Cannot unlock production of "+this.building.getName()+". Number of free workers: "+this.resourcesService.getPeople())}getBuildingName(){return Pu.prepareBuildingName(this.building.getBuildingType())}getResourceName(e){return Pu.prepareResourceName(e)}getResource(e){return this.resourcesService.getResource(e)}onKeydownHandler(){"none"!==document.getElementById("work-management-modal").style.display&&(event.preventDefault(),this.ok())}isCoins(e){return e===Su.COINS}applyToAll(){const e=lo.getBuildingRegion(this.building.getBuildingType());this.servicesService.getServiceByRegion(e).getBuildings().filter(e=>e.getBuildingType()===this.building.getBuildingType()).forEach(e=>e.setWorkSettings(kS.clone(this.building.getWorkSettings())))}}var Jw=Zt({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{text-align:center;font-size:1.2em}input[_ngcontent-%COMP%]:not([type]), input[type=text][_ngcontent-%COMP%]{width:5ch}#rules[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center}#input[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 50%;border-right:1px solid #000}#output[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 50%}.seasonalRule[_ngcontent-%COMP%]{margin-right:10px}"]],data:{}});function eN(e){return cs(0,[(e()(),Kr(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),us(-1,null,[" working"]))],null,null)}function nN(e){return cs(0,[(e()(),Kr(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),us(-1,null,[" not working"]))],null,null)}function tN(e){return cs(0,[(e()(),Kr(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.stop()&&l),l},null,null)),(e()(),us(-1,null,["Hire worker"]))],null,null)}function lN(e){return cs(0,[(e()(),Kr(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.stop()&&l),l},null,null)),(e()(),us(-1,null,["Fire worker"]))],null,null)}function iN(e){return cs(0,[(e()(),Kr(0,0,null,null,8,"div",[["id","customRule"]],null,null,null,null,null)),(e()(),us(1,null,[" "," "])),(e()(),Kr(2,0,null,null,5,"input",[["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==Ql(e,3).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==Ql(e,3).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.building.getWorkSettings().customRuleEnabled=t)&&l),l},null,null)),ci(3,16384,null,0,_p,[ct,rt],null,null),di(1024,null,yp,function(e){return[e]},[_p]),ci(5,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(7,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(8,0,null,null,0,"br",[],null,null,null,null,null))],function(e,n){e(n,5,0,n.component.building.getWorkSettings().customRuleEnabled)},function(e,n){e(n,1,0,n.component.building.getWorkSettings().customRuleText),e(n,2,0,Ql(n,7).ngClassUntouched,Ql(n,7).ngClassTouched,Ql(n,7).ngClassPristine,Ql(n,7).ngClassDirty,Ql(n,7).ngClassValid,Ql(n,7).ngClassInvalid,Ql(n,7).ngClassPending)})}function rN(e){return cs(0,[(e()(),Kr(0,0,null,null,10,"div",[],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(2,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),us(-1,null,[" > "])),(e()(),Kr(4,0,null,null,5,"input",[["class","textInput"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var l=!0;return"input"===n&&(l=!1!==Ql(e,5)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,5).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ql(e,5)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ql(e,5)._compositionEnd(t.target.value)&&l),"ngModelChange"===n&&(l=!1!==(e.context.$implicit[1]=t)&&l),l},null,null)),ci(5,16384,null,0,wp,[ct,rt,[2,Ap]],null,null),di(1024,null,yp,function(e){return[e]},[wp]),ci(7,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(9,16384,null,0,Mp,[[4,xp]],null,null),(e()(),us(10,null,[" ( ","/"," ) "]))],function(e,n){e(n,2,0,n.component.getResourceName(n.context.$implicit[0]),"resources"),e(n,7,0,n.context.$implicit[1])},function(e,n){var t=n.component;e(n,4,0,Ql(n,9).ngClassUntouched,Ql(n,9).ngClassTouched,Ql(n,9).ngClassPristine,Ql(n,9).ngClassDirty,Ql(n,9).ngClassValid,Ql(n,9).ngClassInvalid,Ql(n,9).ngClassPending),e(n,10,0,t.getResource(n.context.$implicit[0]).amount,t.getResource(n.context.$implicit[0]).limit)})}function sN(e){return cs(0,[(e()(),Kr(0,0,null,null,3,"div",[["id","input"]],null,null,null,null,null)),(e()(),us(-1,null,[" Input resources: "])),(e()(),$r(16777216,null,null,1,null,rN)),ci(3,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,3,0,n.component.building.getWorkSettings().inputSettings)},null)}function uN(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["\u221e"]))],null,null)}function oN(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.getResource(n.parent.context.$implicit[0]).limit)})}function aN(e){return cs(0,[(e()(),Kr(0,0,null,null,7,"span",[],null,null,null,null,null)),(e()(),Kr(1,0,null,null,5,"input",[["class","textInput"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var l=!0;return"input"===n&&(l=!1!==Ql(e,2)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,2).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ql(e,2)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ql(e,2)._compositionEnd(t.target.value)&&l),"ngModelChange"===n&&(l=!1!==(e.parent.context.$implicit[1]=t)&&l),l},null,null)),ci(2,16384,null,0,wp,[ct,rt,[2,Ap]],null,null),di(1024,null,yp,function(e){return[e]},[wp]),ci(4,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(6,16384,null,0,Mp,[[4,xp]],null,null),(e()(),us(7,null,[" (",""]))],function(e,n){e(n,4,0,n.parent.context.$implicit[1])},function(e,n){var t=n.component;e(n,1,0,Ql(n,6).ngClassUntouched,Ql(n,6).ngClassTouched,Ql(n,6).ngClassPristine,Ql(n,6).ngClassDirty,Ql(n,6).ngClassValid,Ql(n,6).ngClassInvalid,Ql(n,6).ngClassPending),e(n,7,0,t.getResource(n.parent.context.$implicit[0]).amount)})}function cN(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["\u221e"]))],null,null)}function hN(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.getResource(n.parent.context.$implicit[0]).limit)})}function dN(e){return cs(0,[(e()(),Kr(0,0,null,null,23,"div",[],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(2,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),us(-1,null,[" < "])),(e()(),$r(16777216,null,null,1,null,uN)),ci(5,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,oN)),ci(7,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,aN)),ci(9,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),us(-1,null,[" / "])),(e()(),$r(16777216,null,null,1,null,cN)),ci(12,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,hN)),ci(14,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),us(-1,null,[") "])),(e()(),Kr(16,0,null,null,5,"input",[["id","full"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==Ql(e,17).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==Ql(e,17).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(e.context.$implicit[2]=t)&&l),l},null,null)),ci(17,16384,null,0,_p,[ct,rt],null,null),di(1024,null,yp,function(e){return[e]},[_p]),ci(19,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(21,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(22,0,null,null,1,"label",[["for","full"]],null,null,null,null,null)),(e()(),us(-1,null,["full"]))],function(e,n){var t=n.component;e(n,2,0,t.getResourceName(n.context.$implicit[0]),"resources"),e(n,5,0,n.context.$implicit[2]&&t.isCoins(n.context.$implicit[0])),e(n,7,0,n.context.$implicit[2]&&!t.isCoins(n.context.$implicit[0])),e(n,9,0,!n.context.$implicit[2]),e(n,12,0,t.isCoins(n.context.$implicit[0])),e(n,14,0,!t.isCoins(n.context.$implicit[0])),e(n,19,0,n.context.$implicit[2])},function(e,n){e(n,16,0,Ql(n,21).ngClassUntouched,Ql(n,21).ngClassTouched,Ql(n,21).ngClassPristine,Ql(n,21).ngClassDirty,Ql(n,21).ngClassValid,Ql(n,21).ngClassInvalid,Ql(n,21).ngClassPending)})}function gN(e){return cs(0,[(e()(),Kr(0,0,null,null,3,"div",[["id","output"]],null,null,null,null,null)),(e()(),us(-1,null,[" Output resources: "])),(e()(),$r(16777216,null,null,1,null,dN)),ci(3,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,3,0,n.component.building.getWorkSettings().outputSettings)},null)}function pN(e){return cs(0,[(e()(),Kr(0,0,null,null,79,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),us(2,null,[""," work management"])),(e()(),Kr(3,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(4,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),us(-1,null,[" status: "])),(e()(),$r(16777216,null,null,1,null,eN)),ci(7,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,nN)),ci(9,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,tN)),ci(11,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,lN)),ci(13,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(14,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),us(-1,null,[" work management on/off "])),(e()(),Kr(16,0,null,null,5,"input",[["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==Ql(e,17).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==Ql(e,17).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.building.getWorkSettings().enabled=t)&&l),l},null,null)),ci(17,16384,null,0,_p,[ct,rt],null,null),di(1024,null,yp,function(e){return[e]},[_p]),ci(19,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(21,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(22,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(23,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(24,0,null,null,40,"div",[["id","seasonalRules"]],null,null,null,null,null)),(e()(),Kr(25,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),us(-1,null,["Seasonal rules"])),(e()(),Kr(27,0,null,null,8,"span",[["class","seasonalRule"]],null,null,null,null,null)),(e()(),Kr(28,0,null,null,1,"label",[["for","spring"]],null,null,null,null,null)),(e()(),us(-1,null,["Spring"])),(e()(),Kr(30,0,null,null,5,"input",[["id","spring"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==Ql(e,31).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==Ql(e,31).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.building.getWorkSettings().seasons[0]=t)&&l),l},null,null)),ci(31,16384,null,0,_p,[ct,rt],null,null),di(1024,null,yp,function(e){return[e]},[_p]),ci(33,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(35,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(36,0,null,null,8,"span",[["class","seasonalRule"]],null,null,null,null,null)),(e()(),Kr(37,0,null,null,1,"label",[["for","summer"]],null,null,null,null,null)),(e()(),us(-1,null,["Summer"])),(e()(),Kr(39,0,null,null,5,"input",[["id","summer"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==Ql(e,40).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==Ql(e,40).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.building.getWorkSettings().seasons[1]=t)&&l),l},null,null)),ci(40,16384,null,0,_p,[ct,rt],null,null),di(1024,null,yp,function(e){return[e]},[_p]),ci(42,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(44,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(45,0,null,null,8,"span",[["class","seasonalRule"]],null,null,null,null,null)),(e()(),Kr(46,0,null,null,1,"label",[["for","autumn"]],null,null,null,null,null)),(e()(),us(-1,null,["Autumn"])),(e()(),Kr(48,0,null,null,5,"input",[["id","autumn"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==Ql(e,49).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==Ql(e,49).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.building.getWorkSettings().seasons[2]=t)&&l),l},null,null)),ci(49,16384,null,0,_p,[ct,rt],null,null),di(1024,null,yp,function(e){return[e]},[_p]),ci(51,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(53,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(54,0,null,null,8,"span",[["class","seasonalRule"]],null,null,null,null,null)),(e()(),Kr(55,0,null,null,1,"label",[["for","winter"]],null,null,null,null,null)),(e()(),us(-1,null,["Winter"])),(e()(),Kr(57,0,null,null,5,"input",[["id","winter"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==Ql(e,58).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==Ql(e,58).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.building.getWorkSettings().seasons[3]=t)&&l),l},null,null)),ci(58,16384,null,0,_p,[ct,rt],null,null),di(1024,null,yp,function(e){return[e]},[_p]),ci(60,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(62,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(63,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(64,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,iN)),ci(66,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(67,0,null,null,5,"div",[["id","rules"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,sN)),ci(69,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(70,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,gN)),ci(72,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(73,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(74,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(75,0,null,null,4,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Kr(76,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.applyToAll()&&l),l},null,null)),(e()(),us(-1,null,["Apply to all buildings of this type"])),(e()(),Kr(78,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.ok()&&l),l},null,null)),(e()(),us(-1,null,["Close"]))],function(e,n){var t=n.component;e(n,7,0,t.building.isWorking()),e(n,9,0,!t.building.isWorking()),e(n,11,0,!t.building.getWorkSettings().enabled&&!t.building.isWorking()),e(n,13,0,!t.building.getWorkSettings().enabled&&t.building.isWorking()),e(n,19,0,t.building.getWorkSettings().enabled),e(n,33,0,t.building.getWorkSettings().seasons[0]),e(n,42,0,t.building.getWorkSettings().seasons[1]),e(n,51,0,t.building.getWorkSettings().seasons[2]),e(n,60,0,t.building.getWorkSettings().seasons[3]),e(n,66,0,t.building.getWorkSettings().hasCustomRule),e(n,69,0,t.building.getWorkSettings().inputSettings),e(n,72,0,t.building.getWorkSettings().outputSettings)},function(e,n){e(n,2,0,n.component.getBuildingName()),e(n,16,0,Ql(n,21).ngClassUntouched,Ql(n,21).ngClassTouched,Ql(n,21).ngClassPristine,Ql(n,21).ngClassDirty,Ql(n,21).ngClassValid,Ql(n,21).ngClassInvalid,Ql(n,21).ngClassPending),e(n,30,0,Ql(n,35).ngClassUntouched,Ql(n,35).ngClassTouched,Ql(n,35).ngClassPristine,Ql(n,35).ngClassDirty,Ql(n,35).ngClassValid,Ql(n,35).ngClassInvalid,Ql(n,35).ngClassPending),e(n,39,0,Ql(n,44).ngClassUntouched,Ql(n,44).ngClassTouched,Ql(n,44).ngClassPristine,Ql(n,44).ngClassDirty,Ql(n,44).ngClassValid,Ql(n,44).ngClassInvalid,Ql(n,44).ngClassPending),e(n,48,0,Ql(n,53).ngClassUntouched,Ql(n,53).ngClassTouched,Ql(n,53).ngClassPristine,Ql(n,53).ngClassDirty,Ql(n,53).ngClassValid,Ql(n,53).ngClassInvalid,Ql(n,53).ngClassPending),e(n,57,0,Ql(n,62).ngClassUntouched,Ql(n,62).ngClassTouched,Ql(n,62).ngClassPristine,Ql(n,62).ngClassDirty,Ql(n,62).ngClassValid,Ql(n,62).ngClassInvalid,Ql(n,62).ngClassPending)})}function mN(e){return cs(0,[(e()(),Kr(0,0,null,null,5,"app-modal",[["id","work-management-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ql(e,1).onKeydownHandler(t)&&l),l},RA,OA)),ci(1,4440064,null,0,bA,[ct,rt,Vm],{id:[0,"id"]},null),(e()(),Kr(2,0,null,0,2,"div",[["class","modal"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,pN)),ci(4,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(5,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,1,0,"work-management-modal"),e(n,4,0,t.building)},null)}class fN{constructor(e,n,t,l){this.modalService=e,this.tutorialService=n,this.tickerService=t,this.text="",this.tutorialStages=[],this.currentStep=1,this.modalService.registerForTutorial().subscribe(e=>{this.tutorialStages=e,this.currentStep=1,l.destroyed||l.detectChanges()})}ngOnInit(){}ngAfterViewInit(){this.tutorialService.enableTutorials()}ok(){this.currentStep+=1,this.modalService.openTutorialModal(this.tutorialStages[this.currentStep-1].position)}skip(){this.modalService.open(Lu.CONFIRM),this.modalService.setModalText("Are you sure you want to skip tutorial?<br>You can always start it again from the top right settings menu");const e=this.modalService.registerForConfirmation().subscribe(n=>{e.unsubscribe(),n&&(this.modalService.sendTutorialResponse(-1),this.tickerService.start(),this.modalService.close(Lu.TUTORIAL))})}finish(){this.modalService.sendTutorialResponse(1),this.tickerService.start(),this.modalService.close(Lu.TUTORIAL)}}var SN=Zt({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}"]],data:{}});function EN(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.ok()&&l),l},null,null)),(e()(),us(-1,null,["NEXT"]))],null,null)}function vN(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.finish()&&l),l},null,null)),(e()(),us(-1,null,["FINISH"]))],null,null)}function bN(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.skip()&&l),l},null,null)),(e()(),us(-1,null,["SKIP TUTORIAL"]))],null,null)}function ON(e){return cs(0,[(e()(),Kr(0,0,null,null,10,null,null,null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),us(2,null,["Tutorial ",""])),(e()(),Kr(3,0,null,null,0,"span",[["id","text"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Kr(4,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,EN)),ci(6,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,vN)),ci(8,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,bN)),ci(10,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(0,null,null,0))],function(e,n){var t=n.component;e(n,6,0,t.currentStep<t.tutorialStages.length),e(n,8,0,t.currentStep===t.tutorialStages.length),e(n,10,0,t.currentStep!==t.tutorialStages.length)},function(e,n){var t=n.component;e(n,2,0,t.currentStep+"/"+t.tutorialStages.length),e(n,3,0,t.tutorialStages[t.currentStep-1].text)})}function RN(e){return cs(0,[(e()(),Kr(0,0,null,null,6,"app-modal",[["id","tutorial-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ql(e,1).onKeydownHandler(t)&&l),l},RA,OA)),ci(1,4440064,null,0,bA,[ct,rt,Vm],{id:[0,"id"]},null),(e()(),Kr(2,0,null,0,3,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Kr(3,0,null,null,2,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,ON)),ci(5,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(6,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,1,0,"tutorial-modal"),e(n,5,0,t.tutorialStages.length>0)},null)}class TN{constructor(e){this.modalService=e,this.messageNumber=$u.length,this.modalService.registerForCloseModal().subscribe(e=>this.messageNumber=$u.length),this.modalService.registerForOnOpen().subscribe(e=>{e!==Lu.CHANGELOG&&e!==Lu.ALL||(this.textRef.nativeElement.scrollTop=0)})}ngOnInit(){}ok(){this.modalService.close(Lu.CHANGELOG)}hasPrevious(){return this.messageNumber>1}previous(){this.messageNumber>1&&(this.messageNumber-=1)}hasNext(){return this.messageNumber<$u.length}next(){this.messageNumber<$u.length&&(this.messageNumber+=1)}onKeydownHandler(e){"none"!==document.getElementById("changelog-modal").style.display&&(e.preventDefault(),this.ok())}getChange(){return $u[this.messageNumber-1]}}var CN=Zt({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}#buttons[_ngcontent-%COMP%]{width:50%;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 33%}#header[_ngcontent-%COMP%]{font-size:1.5em;font-weight:700;margin-bottom:10px}#text[_ngcontent-%COMP%]{font-size:1.2em;overflow-y:auto}#text[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:0}button[disabled][_ngcontent-%COMP%]{color:#5a5a5a}button[disabled][_ngcontent-%COMP%]:active{background-color:var(--passive-colour);cursor:default}button[disabled][_ngcontent-%COMP%]:hover{cursor:default}"]],data:{}});function IN(e){return cs(0,[Zr(671088640,1,{textRef:0}),(e()(),Kr(1,0,null,null,14,"app-modal",[["id","changelog-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ql(e,2).onKeydownHandler(t)&&l),l},RA,OA)),ci(2,4440064,null,0,bA,[ct,rt,Vm],{id:[0,"id"]},null),(e()(),Kr(3,0,null,0,11,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Kr(4,0,null,null,10,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Kr(5,0,null,null,0,"span",[["id","header"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Kr(6,0,[[1,0],["text",1]],null,0,"div",[["id","text"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Kr(7,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(8,0,null,null,6,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Kr(9,0,null,null,1,"button",[],[[8,"disabled",0]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.previous()&&l),l},null,null)),(e()(),us(-1,null,["PREVIOUS"])),(e()(),Kr(11,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.ok()&&l),l},null,null)),(e()(),us(-1,null,["CLOSE"])),(e()(),Kr(13,0,null,null,1,"button",[],[[8,"disabled",0]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.next()&&l),l},null,null)),(e()(),us(-1,null,["NEXT"])),(e()(),Kr(15,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){e(n,2,0,"changelog-modal")},function(e,n){var t=n.component;e(n,5,0,t.getChange().VERSION),e(n,6,0,t.getChange().MESSAGE),e(n,9,0,!t.hasPrevious()),e(n,13,0,!t.hasNext())})}class yN{constructor(e){this.modalService=e,this.modalService.registerForResourceOptions().subscribe(e=>{this.resourceOptions=Nm.clone(e),setTimeout(function(){window.document.getElementById("reserved").select()},10)}),this.modalService.registerForCloseModal().subscribe(e=>{e!==Lu.RESOURCE_MANAGEMENT&&e!==Lu.ALL||this.modalService.sendResourceOptionsResponse(null)})}ngOnInit(){}ok(){this.modalService.sendResourceOptionsResponse(this.resourceOptions),this.modalService.close(Lu.RESOURCE_MANAGEMENT)}cancel(){this.modalService.sendResourceOptionsResponse(null),this.modalService.close(Lu.RESOURCE_MANAGEMENT)}onKeydownHandler(e){"none"!==document.getElementById("resource-management-modal").style.display&&(e.preventDefault(),this.ok())}getResourceName(){return Pu.prepareResourceName(this.resourceOptions.resource)}}var _N=Zt({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}#title[_ngcontent-%COMP%]{font-size:1.3em;font-weight:700;margin-bottom:20px}input[type=number][_ngcontent-%COMP%]{width:6ch}#exceptions[_ngcontent-%COMP%]{width:100%;text-align:center}.subTitle[_ngcontent-%COMP%]{padding-top:10px;text-align:center}.entry[_ngcontent-%COMP%]{text-align:center}.exceptionEntry[_ngcontent-%COMP%]{display:inline-block;text-align:center;border:1px solid #000;min-width:100px;min-height:50px;padding:4px 4px 0;margin:5px}#buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px;padding:5px}.hidden[_ngcontent-%COMP%]{visibility:hidden}.tradeLabel[_ngcontent-%COMP%]{display:inline-block;width:200px}"]],data:{}});function AN(e){return cs(0,[(e()(),Kr(0,0,null,null,34,"div",[["class","exceptionEntry"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,7,"label",[],[[8,"htmlFor",0]],null,null,null,null)),(e()(),us(2,null,["",""])),(e()(),Kr(3,0,null,null,5,"input",[["type","checkbox"]],[[8,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==Ql(e,4).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==Ql(e,4).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(e.context.$implicit.enabled=t)&&l),l},null,null)),ci(4,16384,null,0,_p,[ct,rt],null,null),di(1024,null,yp,function(e){return[e]},[_p]),ci(6,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(8,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(9,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(10,0,null,null,9,"input",[["min","0"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0;return"input"===n&&(l=!1!==Ql(e,11)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,11).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ql(e,11)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ql(e,11)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==Ql(e,12).onChange(t.target.value)&&l),"input"===n&&(l=!1!==Ql(e,12).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,12).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(e.context.$implicit.reserved=t)&&l),l},null,null)),ci(11,16384,null,0,wp,[ct,rt,[2,Ap]],null,null),ci(12,16384,null,0,Vp,[ct,rt],null,null),di(1024,null,yp,function(e,n){return[e,n]},[wp,Vp]),ci(14,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(16,16384,null,0,Mp,[[4,xp]],null,null),di(512,null,Uo,Go,[Ct,It,rt,ct]),ci(18,278528,null,0,Wo,[Uo],{ngClass:[0,"ngClass"]},null),rs(19,{hidden:0}),(e()(),Kr(20,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(21,0,null,null,4,"label",[["for","percent"]],null,null,null,null,null)),di(512,null,Uo,Go,[Ct,It,rt,ct]),ci(23,278528,null,0,Wo,[Uo],{ngClass:[0,"ngClass"]},null),rs(24,{hidden:0}),(e()(),us(-1,null,["reserve %"])),(e()(),Kr(26,0,null,null,8,"input",[["id","percent"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==Ql(e,27).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==Ql(e,27).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(e.context.$implicit.reservedPercent=t)&&l),l},null,null)),ci(27,16384,null,0,_p,[ct,rt],null,null),di(1024,null,yp,function(e){return[e]},[_p]),ci(29,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(31,16384,null,0,Mp,[[4,xp]],null,null),di(512,null,Uo,Go,[Ct,It,rt,ct]),ci(33,278528,null,0,Wo,[Uo],{ngClass:[0,"ngClass"]},null),rs(34,{hidden:0})],function(e,n){e(n,6,0,n.context.$implicit.enabled),e(n,14,0,n.context.$implicit.reserved);var t=e(n,19,0,!n.context.$implicit.enabled);e(n,18,0,t);var l=e(n,24,0,!n.context.$implicit.enabled);e(n,23,0,l),e(n,29,0,n.context.$implicit.reservedPercent);var i=e(n,34,0,!n.context.$implicit.enabled);e(n,33,0,i)},function(e,n){e(n,1,0,Il(1,"",n.context.$implicit.name,"")),e(n,2,0,n.context.$implicit.name),e(n,3,0,Il(1,"",n.context.$implicit.name,""),Ql(n,8).ngClassUntouched,Ql(n,8).ngClassTouched,Ql(n,8).ngClassPristine,Ql(n,8).ngClassDirty,Ql(n,8).ngClassValid,Ql(n,8).ngClassInvalid,Ql(n,8).ngClassPending),e(n,10,0,Ql(n,16).ngClassUntouched,Ql(n,16).ngClassTouched,Ql(n,16).ngClassPristine,Ql(n,16).ngClassDirty,Ql(n,16).ngClassValid,Ql(n,16).ngClassInvalid,Ql(n,16).ngClassPending),e(n,26,0,Ql(n,31).ngClassUntouched,Ql(n,31).ngClassTouched,Ql(n,31).ngClassPristine,Ql(n,31).ngClassDirty,Ql(n,31).ngClassValid,Ql(n,31).ngClassInvalid,Ql(n,31).ngClassPending)})}function wN(e){return cs(0,[(e()(),Kr(0,0,null,null,121,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),us(2,null,[""," management"])),(e()(),Kr(3,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(4,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(5,0,null,null,19,"span",[["class","entry"]],null,null,null,null,null)),(e()(),Kr(6,0,null,null,1,"label",[["for","reserved"]],null,null,null,null,null)),(e()(),us(-1,null,["reserved amount: "])),(e()(),Kr(8,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(9,0,null,null,6,"input",[["id","reserved"],["min","0"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==Ql(e,10)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,10).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ql(e,10)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ql(e,10)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==Ql(e,11).onChange(t.target.value)&&l),"input"===n&&(l=!1!==Ql(e,11).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,11).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.resourceOptions.reserve=t)&&l),l},null,null)),ci(10,16384,null,0,wp,[ct,rt,[2,Ap]],null,null),ci(11,16384,null,0,Vp,[ct,rt],null,null),di(1024,null,yp,function(e,n){return[e,n]},[wp,Vp]),ci(13,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(15,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(16,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(17,0,null,null,1,"label",[["for","percent"]],null,null,null,null,null)),(e()(),us(-1,null,["reserve %"])),(e()(),Kr(19,0,null,null,5,"input",[["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==Ql(e,20).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==Ql(e,20).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.resourceOptions.reservePercent=t)&&l),l},null,null)),ci(20,16384,null,0,_p,[ct,rt],null,null),di(1024,null,yp,function(e){return[e]},[_p]),ci(22,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(24,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(25,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(26,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(27,0,null,null,3,"span",[["class","subTitle"]],null,null,null,null,null)),(e()(),us(-1,null,["Exceptions:"])),(e()(),Kr(29,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),us(-1,null,[" (will use it's own limit number if enabled)"])),(e()(),Kr(31,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(32,0,null,null,2,"div",[["id","exceptions"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,AN)),ci(34,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),(e()(),Kr(35,0,null,null,3,"div",[["class","subTitle"]],null,null,null,null,null)),(e()(),us(-1,null,["Auto trade settings"])),(e()(),Kr(37,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),us(-1,null,["Auto trade will try to buy/sell until you have the specified amount of resource"])),(e()(),Kr(39,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(40,0,null,null,76,"div",[],null,null,null,null,null)),(e()(),Kr(41,0,null,null,1,"label",[["class","tradeLabel"],["for","autoSellEnabled"]],null,null,null,null,null)),(e()(),us(-1,null,["Auto sell enabled"])),(e()(),Kr(43,0,null,null,5,"input",[["id","autoSellEnabled"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==Ql(e,44).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==Ql(e,44).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.resourceOptions.autoTrade.autoSellEnabled=t)&&l),l},null,null)),ci(44,16384,null,0,_p,[ct,rt],null,null),di(1024,null,yp,function(e){return[e]},[_p]),ci(46,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(48,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(49,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(50,0,null,null,17,"span",[],null,null,null,null,null)),(e()(),Kr(51,0,null,null,1,"label",[["class","tradeLabel"],["for","autoSellAmount"]],null,null,null,null,null)),(e()(),us(-1,null,["continuous sell limit"])),(e()(),Kr(53,0,null,null,6,"input",[["id","autoSellAmount"],["min","0"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==Ql(e,54)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,54).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ql(e,54)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ql(e,54)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==Ql(e,55).onChange(t.target.value)&&l),"input"===n&&(l=!1!==Ql(e,55).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,55).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.resourceOptions.autoTrade.autoSellAmount=t)&&l),l},null,null)),ci(54,16384,null,0,wp,[ct,rt,[2,Ap]],null,null),ci(55,16384,null,0,Vp,[ct,rt],null,null),di(1024,null,yp,function(e,n){return[e,n]},[wp,Vp]),ci(57,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(59,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(60,0,null,null,5,"input",[["id","autoSellPercentage"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==Ql(e,61).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==Ql(e,61).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.resourceOptions.autoTrade.autoSellPercentage=t)&&l),l},null,null)),ci(61,16384,null,0,_p,[ct,rt],null,null),di(1024,null,yp,function(e){return[e]},[_p]),ci(63,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(65,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(66,0,null,null,1,"label",[["for","autoSellPercentage"]],null,null,null,null,null)),(e()(),us(-1,null,["%"])),(e()(),Kr(68,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(69,0,null,null,1,"label",[["class","tradeLabel"],["for","autoSellOrder"]],null,null,null,null,null)),(e()(),us(-1,null,["Fixed one time sell amount"])),(e()(),Kr(71,0,null,null,6,"input",[["id","autoSellOrder"],["min","0"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==Ql(e,72)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,72).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ql(e,72)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ql(e,72)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==Ql(e,73).onChange(t.target.value)&&l),"input"===n&&(l=!1!==Ql(e,73).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,73).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.resourceOptions.autoTrade.autoSellOrder=t)&&l),l},null,null)),ci(72,16384,null,0,wp,[ct,rt,[2,Ap]],null,null),ci(73,16384,null,0,Vp,[ct,rt],null,null),di(1024,null,yp,function(e,n){return[e,n]},[wp,Vp]),ci(75,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(77,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(78,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(79,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(80,0,null,null,1,"label",[["class","tradeLabel"],["for","autoBuyEnabled"]],null,null,null,null,null)),(e()(),us(-1,null,["Auto buy enabled"])),(e()(),Kr(82,0,null,null,5,"input",[["id","autoBuyEnabled"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==Ql(e,83).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==Ql(e,83).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.resourceOptions.autoTrade.autoBuyEnabled=t)&&l),l},null,null)),ci(83,16384,null,0,_p,[ct,rt],null,null),di(1024,null,yp,function(e){return[e]},[_p]),ci(85,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(87,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(88,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(89,0,null,null,17,"span",[],null,null,null,null,null)),(e()(),Kr(90,0,null,null,1,"label",[["class","tradeLabel"],["for","autoBuyAmount"]],null,null,null,null,null)),(e()(),us(-1,null,["continuous buy limit"])),(e()(),Kr(92,0,null,null,6,"input",[["id","autoBuyAmount"],["min","0"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==Ql(e,93)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,93).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ql(e,93)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ql(e,93)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==Ql(e,94).onChange(t.target.value)&&l),"input"===n&&(l=!1!==Ql(e,94).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,94).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.resourceOptions.autoTrade.autoBuyAmount=t)&&l),l},null,null)),ci(93,16384,null,0,wp,[ct,rt,[2,Ap]],null,null),ci(94,16384,null,0,Vp,[ct,rt],null,null),di(1024,null,yp,function(e,n){return[e,n]},[wp,Vp]),ci(96,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(98,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(99,0,null,null,5,"input",[["id","autoBuyPercentage"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==Ql(e,100).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==Ql(e,100).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.resourceOptions.autoTrade.autoBuyPercentage=t)&&l),l},null,null)),ci(100,16384,null,0,_p,[ct,rt],null,null),di(1024,null,yp,function(e){return[e]},[_p]),ci(102,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(104,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(105,0,null,null,1,"label",[["for","autoBuyPercentage"]],null,null,null,null,null)),(e()(),us(-1,null,["%"])),(e()(),Kr(107,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(108,0,null,null,1,"label",[["class","tradeLabel"],["for","autoBuyOrder"]],null,null,null,null,null)),(e()(),us(-1,null,["Fixed one time buy amount"])),(e()(),Kr(110,0,null,null,6,"input",[["id","autoBuyOrder"],["min","0"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==Ql(e,111)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,111).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ql(e,111)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ql(e,111)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==Ql(e,112).onChange(t.target.value)&&l),"input"===n&&(l=!1!==Ql(e,112).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,112).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.resourceOptions.autoTrade.autoBuyOrder=t)&&l),l},null,null)),ci(111,16384,null,0,wp,[ct,rt,[2,Ap]],null,null),ci(112,16384,null,0,Vp,[ct,rt],null,null),di(1024,null,yp,function(e,n){return[e,n]},[wp,Vp]),ci(114,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(116,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(117,0,null,null,4,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Kr(118,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.ok()&&l),l},null,null)),(e()(),us(-1,null,["SAVE"])),(e()(),Kr(120,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.cancel()&&l),l},null,null)),(e()(),us(-1,null,["CANCEL"]))],function(e,n){var t=n.component;e(n,13,0,t.resourceOptions.reserve),e(n,22,0,t.resourceOptions.reservePercent),e(n,34,0,t.resourceOptions.consumers),e(n,46,0,t.resourceOptions.autoTrade.autoSellEnabled),e(n,57,0,t.resourceOptions.autoTrade.autoSellAmount),e(n,63,0,t.resourceOptions.autoTrade.autoSellPercentage),e(n,75,0,t.resourceOptions.autoTrade.autoSellOrder),e(n,85,0,t.resourceOptions.autoTrade.autoBuyEnabled),e(n,96,0,t.resourceOptions.autoTrade.autoBuyAmount),e(n,102,0,t.resourceOptions.autoTrade.autoBuyPercentage),e(n,114,0,t.resourceOptions.autoTrade.autoBuyOrder)},function(e,n){e(n,2,0,n.component.getResourceName()),e(n,9,0,Ql(n,15).ngClassUntouched,Ql(n,15).ngClassTouched,Ql(n,15).ngClassPristine,Ql(n,15).ngClassDirty,Ql(n,15).ngClassValid,Ql(n,15).ngClassInvalid,Ql(n,15).ngClassPending),e(n,19,0,Ql(n,24).ngClassUntouched,Ql(n,24).ngClassTouched,Ql(n,24).ngClassPristine,Ql(n,24).ngClassDirty,Ql(n,24).ngClassValid,Ql(n,24).ngClassInvalid,Ql(n,24).ngClassPending),e(n,43,0,Ql(n,48).ngClassUntouched,Ql(n,48).ngClassTouched,Ql(n,48).ngClassPristine,Ql(n,48).ngClassDirty,Ql(n,48).ngClassValid,Ql(n,48).ngClassInvalid,Ql(n,48).ngClassPending),e(n,53,0,Ql(n,59).ngClassUntouched,Ql(n,59).ngClassTouched,Ql(n,59).ngClassPristine,Ql(n,59).ngClassDirty,Ql(n,59).ngClassValid,Ql(n,59).ngClassInvalid,Ql(n,59).ngClassPending),e(n,60,0,Ql(n,65).ngClassUntouched,Ql(n,65).ngClassTouched,Ql(n,65).ngClassPristine,Ql(n,65).ngClassDirty,Ql(n,65).ngClassValid,Ql(n,65).ngClassInvalid,Ql(n,65).ngClassPending),e(n,71,0,Ql(n,77).ngClassUntouched,Ql(n,77).ngClassTouched,Ql(n,77).ngClassPristine,Ql(n,77).ngClassDirty,Ql(n,77).ngClassValid,Ql(n,77).ngClassInvalid,Ql(n,77).ngClassPending),e(n,82,0,Ql(n,87).ngClassUntouched,Ql(n,87).ngClassTouched,Ql(n,87).ngClassPristine,Ql(n,87).ngClassDirty,Ql(n,87).ngClassValid,Ql(n,87).ngClassInvalid,Ql(n,87).ngClassPending),e(n,92,0,Ql(n,98).ngClassUntouched,Ql(n,98).ngClassTouched,Ql(n,98).ngClassPristine,Ql(n,98).ngClassDirty,Ql(n,98).ngClassValid,Ql(n,98).ngClassInvalid,Ql(n,98).ngClassPending),e(n,99,0,Ql(n,104).ngClassUntouched,Ql(n,104).ngClassTouched,Ql(n,104).ngClassPristine,Ql(n,104).ngClassDirty,Ql(n,104).ngClassValid,Ql(n,104).ngClassInvalid,Ql(n,104).ngClassPending),e(n,110,0,Ql(n,116).ngClassUntouched,Ql(n,116).ngClassTouched,Ql(n,116).ngClassPristine,Ql(n,116).ngClassDirty,Ql(n,116).ngClassValid,Ql(n,116).ngClassInvalid,Ql(n,116).ngClassPending)})}function NN(e){return cs(0,[(e()(),Kr(0,0,null,null,5,"app-modal",[["id","resource-management-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ql(e,1).onKeydownHandler(t)&&l),l},RA,OA)),ci(1,4440064,null,0,bA,[ct,rt,Vm],{id:[0,"id"]},null),(e()(),Kr(2,0,null,0,2,"div",[["class","modal"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,wN)),ci(4,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(5,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,1,0,"resource-management-modal"),e(n,4,0,t.resourceOptions)},null)}class PN{constructor(e,n){this.modalService=e,this.recipeService=n,this.selectedRecipeId=-1,this.modalService.registerForCloseModal().subscribe(e=>{e!==Lu.RECIPE&&e!==Lu.ALL||(this.selectedRecipeId=-1,this.modalService.sendValueInput(null))}),this.modalService.registerForValue().subscribe(e=>{this.selectedRecipeId=e})}ngOnInit(){}ok(){this.modalService.sendValueInput(this.selectedRecipeId),this.modalService.close(Lu.RECIPE)}cancel(){this.modalService.sendValueInput(null),this.modalService.close(Lu.RECIPE)}onKeydownHandler(e){"none"!==document.getElementById("recipe-modal").style.display&&(e.preventDefault(),this.ok())}getRecipes(){return this.recipeService.getRecipes()}choose(e){this.selectedRecipeId=e.id}}var kN=Zt({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}#buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px;padding:5px}app-recipe[_ngcontent-%COMP%]{font-size:.8em;display:inline-block;width:110px;margin:4px 8px;cursor:pointer}.recipe[_ngcontent-%COMP%]{display:inline-block}.selected[_ngcontent-%COMP%]{border:2px solid #000}"]],data:{}});function xN(e){return cs(0,[(e()(),Kr(0,0,null,null,5,"div",[["class","recipe"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,4,"app-recipe",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.choose(e.context.$implicit)&&l),l},_v,ov)),di(512,null,Uo,Go,[Ct,It,rt,ct]),ci(3,278528,null,0,Wo,[Uo],{ngClass:[0,"ngClass"]},null),rs(4,{selected:0}),ci(5,114688,null,0,uv,[ES,Jm,sv],{recipe:[0,"recipe"]},null)],function(e,n){var t=e(n,4,0,n.context.$implicit.id===n.component.selectedRecipeId);e(n,3,0,t),e(n,5,0,n.context.$implicit)},null)}function MN(e){return cs(0,[(e()(),Kr(0,0,null,null,15,"app-modal",[["id","recipe-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ql(e,1).onKeydownHandler(t)&&l),l},RA,OA)),ci(1,4440064,null,0,bA,[ct,rt,Vm],{id:[0,"id"]},null),(e()(),Kr(2,0,null,0,12,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Kr(3,0,null,null,11,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Kr(4,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["Choose recipe"])),(e()(),Kr(6,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(7,0,null,null,2,"div",[["id","recipes"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,xN)),ci(9,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),(e()(),Kr(10,0,null,null,4,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Kr(11,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.ok()&&l),l},null,null)),(e()(),us(-1,null,["CONFIRM"])),(e()(),Kr(13,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.cancel()&&l),l},null,null)),(e()(),us(-1,null,["CANCEL"])),(e()(),Kr(15,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,1,0,"recipe-modal"),e(n,9,0,t.getRecipes())},null)}class DN{constructor(e,n){this.modalService=e,this.worldService=n,this.on=!1,this.selectOrigin=!0,this.modalService.registerForRegionSelectionOrder().subscribe(e=>{this.selectOrigin=e,this.on=!0})}ngOnInit(){}select(){if(this.canSelect()){const e=this.worldService.getSelectedRegion();this.modalService.setReturnRegion(e),this.modalService.close(Lu.WORLD),this.on=!1}else this.modalService.info("Only your and neutral regions can be selected as origin")}cancel(){this.modalService.setReturnRegion(null),this.modalService.close(Lu.WORLD),this.on=!1}canSelect(){if(this.on){const e=this.worldService.getSelectedCountry();return!(this.selectOrigin&&e.id!==wu.PLAYER&&e.id!==wu.NEUTRAL)}return!1}}var LN=Zt({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{height:660px;max-height:660px;margin:20px;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}app-world[_ngcontent-%COMP%]{display:inline-block;height:90%;width:90%}#buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px;margin-right:4px}.inactive[_ngcontent-%COMP%]{color:#5f5f5f}.inactive[_ngcontent-%COMP%]:hover{cursor:initial}"]],data:{}});function FN(e){return cs(0,[(e()(),Kr(0,0,null,null,14,"app-modal",[["id","world-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ql(e,1).onKeydownHandler(t)&&l),l},RA,OA)),ci(1,4440064,null,0,bA,[ct,rt,Vm],{id:[0,"id"]},null),(e()(),Kr(2,0,null,0,11,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Kr(3,0,null,null,10,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Kr(4,0,null,null,1,"app-world",[],null,[[null,"keydown"],[null,"mousedown"],[null,"mousemove"],[null,"mouseup"],[null,"wheel"]],function(e,n,t){var l=!0;return"keydown"===n&&(l=!1!==Ql(e,5).handleKeyDown(t)&&l),"mousedown"===n&&(l=!1!==Ql(e,5).dragStart(t)&&l),"mousemove"===n&&(l=!1!==Ql(e,5).mousemove(t)&&l),"mouseup"===n&&(l=!1!==Ql(e,5).dragEnd(t)&&l),"wheel"===n&&(l=!1!==Ql(e,5).onScroll(t)&&l),l},cT,RR)),ci(5,114688,null,0,OR,[Mm,vR,Vm],{selecting:[0,"selecting"]},null),(e()(),Kr(6,0,null,null,7,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Kr(7,0,null,null,4,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.select()&&l),l},null,null)),di(512,null,Uo,Go,[Ct,It,rt,ct]),ci(9,278528,null,0,Wo,[Uo],{ngClass:[0,"ngClass"]},null),rs(10,{inactive:0}),(e()(),us(-1,null,["Select"])),(e()(),Kr(12,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.cancel()&&l),l},null,null)),(e()(),us(-1,null,["Cancel"])),(e()(),Kr(14,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,1,0,"world-modal"),e(n,5,0,!0);var l=e(n,10,0,!t.canSelect());e(n,9,0,l)},null)}class HN{constructor(e,n,t){this.modalService=e,this.resourcesService=n,this.worldService=t,this.defensesCost=[[{resource:Su.LOG,amount:50}],[{resource:Su.LOG,amount:50},{resource:Su.PLANK,amount:30}],[{resource:Su.LOG,amount:50},{resource:Su.CUT_STONE,amount:30}],[{resource:Su.LOG,amount:80},{resource:Su.CUT_STONE,amount:50}],[{resource:Su.LOG,amount:80},{resource:Su.PLANK,amount:40},{resource:Su.CUT_STONE,amount:40}],[{resource:Su.LOG,amount:100},{resource:Su.PLANK,amount:60},{resource:Su.CUT_STONE,amount:60}],[{resource:Su.LOG,amount:100},{resource:Su.PLANK,amount:80},{resource:Su.CUT_STONE,amount:80}]],this.modalService.registerForWorldRegion().subscribe(e=>{this.region=e})}ngOnInit(){}isWallCostMet(){let e=!0;return this.defensesCost[this.region.defense].forEach(n=>{0!==this.resourcesService.hasResource(n.resource,n.amount,"Region construction",!0)&&(e=!1)}),e}buildWall(){this.defensesCost[this.region.defense].forEach(e=>{this.resourcesService.decreaseResource(e.resource,e.amount,"Region construction",!0)}),this.worldService.buildDefense(),this.region=null,this.modalService.close(Lu.WORLD_BUILD)}getBuildingCostEntries(){return this.defensesCost[this.region.defense]}hasResource(e){return 0===this.resourcesService.hasResource(e.resource,e.amount,"Region construction",!0)}getResourceName(e){return Pu.prepareResourceName(e)}buildWallNotAvailable(){this.modalService.info("Not enough resources")}}var UN=Zt({encapsulation:0,styles:[["#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em}.building[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;text-align:center;border:1px solid #000;margin-bottom:10px}.buildingTitle[_ngcontent-%COMP%]{font-weight:600;background-color:var(--active-colour);border-bottom:1px solid #000}.buildingSecondRow[_ngcontent-%COMP%]{display:-webkit-box;display:flex;width:100%;border-right:1px solid #000;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.details[_ngcontent-%COMP%]{width:100%;text-align:center}.resourceIcon[_ngcontent-%COMP%]{height:20px;width:20px;vertical-align:middle}#description[_ngcontent-%COMP%]{margin-bottom:10px}.icon[_ngcontent-%COMP%]{display:-webkit-inline-box;display:inline-flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;margin-right:10px}.buildButton[_ngcontent-%COMP%]{width:30%}.buildButtonNotAvailable[_ngcontent-%COMP%]{width:30%;cursor:not-allowed}.notMet[_ngcontent-%COMP%]{color:var(--negative-colour)}"]],data:{}});function GN(e){return cs(0,[(e()(),Kr(0,0,null,null,8,"span",[],null,null,null,null,null)),(e()(),Kr(1,0,null,null,7,"span",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(2,0,null,null,4,"span",[],null,null,null,null,null)),di(512,null,Uo,Go,[Ct,It,rt,ct]),ci(4,278528,null,0,Wo,[Uo],{ngClass:[0,"ngClass"]},null),rs(5,{notMet:0}),(e()(),us(6,null,["",""])),(e()(),Kr(7,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(8,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){var t=n.component,l=e(n,5,0,!t.hasResource(n.context.$implicit));e(n,4,0,l),e(n,8,0,t.getResourceName(n.context.$implicit.resource),"resources")},function(e,n){e(n,6,0,n.context.$implicit.amount)})}function BN(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[["class","buildButton"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.buildWall()&&l),l},null,null)),(e()(),us(-1,null,["Build"]))],null,null)}function WN(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"button",[["class","buildButtonNotAvailable"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.buildWallNotAvailable()&&l),l},null,null)),(e()(),us(-1,null,["Build "]))],null,null)}function VN(e){return cs(0,[(e()(),Kr(0,0,null,null,13,"div",[["class","building"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,8,"div",[["class","buildingSecondRow"]],null,null,null,null,null)),(e()(),Kr(2,0,null,null,1,"span",[["class","buildingTitle"]],null,null,null,null,null)),(e()(),us(-1,null,["Defenses "])),(e()(),Kr(4,0,null,null,5,"div",[["class","details"]],null,null,null,null,null)),(e()(),Kr(5,0,null,null,0,"div",[["id","description"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Kr(6,0,null,null,1,"div",[["class","subTitle"]],null,null,null,null,null)),(e()(),us(-1,null,["cost:"])),(e()(),$r(16777216,null,null,1,null,GN)),ci(9,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),(e()(),$r(16777216,null,null,1,null,BN)),ci(11,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,WN)),ci(13,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,9,0,t.getBuildingCostEntries()),e(n,11,0,t.isWallCostMet()),e(n,13,0,!t.isWallCostMet())},function(e,n){e(n,5,0,"Each defense level decreases attacking unit strength by 1 but only up to half of that unit total strength")})}function zN(e){return cs(0,[(e()(),Kr(0,0,null,null,5,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"div",[["id","title"]],null,null,null,null,null)),(e()(),us(-1,null,["Region construction"])),(e()(),Kr(3,0,null,null,2,"div",[["id","buildings"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,VN)),ci(5,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,5,0,n.component.region.defense<7)},null)}function YN(e){return cs(0,[(e()(),Kr(0,0,null,null,5,"app-modal",[["id","world-build-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ql(e,1).onKeydownHandler(t)&&l),l},RA,OA)),ci(1,4440064,null,0,bA,[ct,rt,Vm],{id:[0,"id"]},null),(e()(),Kr(2,0,null,0,2,"div",[["class","modal"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,zN)),ci(4,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(5,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,1,0,"world-build-modal"),e(n,4,0,t.region)},null)}class $N{constructor(e){this.modalService=e,this.text="",this.value=""}ngOnInit(){this.modalService.registerForText().subscribe(e=>{this.text=e,this.inputRef.nativeElement.select()}),this.modalService.registerForValue().subscribe(e=>this.value=e)}ok(){this.modalService.sendValueInput(this.value),this.modalService.close(Lu.INPUT)}cancel(){this.modalService.sendValueInput(null),this.modalService.close(Lu.INPUT)}onKeydownHandler(e){"none"!==document.getElementById("input-modal").style.display&&(e.preventDefault(),this.ok())}}var KN=Zt({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}#buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px;padding:5px}"]],data:{}});function jN(e){return cs(0,[Zr(402653184,1,{inputRef:0}),(e()(),Kr(1,0,null,null,18,"app-modal",[["id","input-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ql(e,2).onKeydownHandler(t)&&l),l},RA,OA)),ci(2,4440064,null,0,bA,[ct,rt,Vm],{id:[0,"id"]},null),(e()(),Kr(3,0,null,0,15,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Kr(4,0,null,null,14,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Kr(5,0,null,null,0,"span",[["id","text"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Kr(6,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(7,0,[[1,0],["input",1]],null,5,"input",[["id","input"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==Ql(e,8)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==Ql(e,8).onTouched()&&l),"compositionstart"===n&&(l=!1!==Ql(e,8)._compositionStart()&&l),"compositionend"===n&&(l=!1!==Ql(e,8)._compositionEnd(t.target.value)&&l),"ngModelChange"===n&&(l=!1!==(i.value=t)&&l),l},null,null)),ci(8,16384,null,0,wp,[ct,rt,[2,Ap]],null,null),di(1024,null,yp,function(e){return[e]},[wp]),ci(10,671744,null,0,Im,[[8,null],[8,null],[8,null],[6,yp]],{model:[0,"model"]},{update:"ngModelChange"}),di(2048,null,xp,null,[Im]),ci(12,16384,null,0,Mp,[[4,xp]],null,null),(e()(),Kr(13,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(14,0,null,null,4,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Kr(15,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.ok()&&l),l},null,null)),(e()(),us(-1,null,["CONFIRM"])),(e()(),Kr(17,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.cancel()&&l),l},null,null)),(e()(),us(-1,null,["CANCEL"])),(e()(),Kr(19,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,2,0,"input-modal"),e(n,10,0,t.value)},function(e,n){e(n,5,0,n.component.text),e(n,7,0,Ql(n,12).ngClassUntouched,Ql(n,12).ngClassTouched,Ql(n,12).ngClassPristine,Ql(n,12).ngClassDirty,Ql(n,12).ngClassValid,Ql(n,12).ngClassInvalid,Ql(n,12).ngClassPending)})}class qN{constructor(e,n,t,l){this.modalService=e,this.heritageService=n,this.gameService=t,this.techService=l,this.modalService.registerForTech().subscribe(e=>{this.tech=e})}ngOnInit(){}ok(){this.modalService.sendConfirmationResult(!0),this.tech=null,this.modalService.close(Lu.RESEARCH_UNLOCK)}cancel(){this.modalService.sendConfirmationResult(!1),this.tech=null,this.modalService.close(Lu.RESEARCH_UNLOCK)}onKeydownHandler(e){"none"!==document.getElementById("research-unlock-modal").style.display&&(e.preventDefault(),this.ok())}hasQueueSpace(){return this.techService.hasQueueSpace()}requiredHeritagePoints(){let e=0,n=10*this.tech.getRequiredResearchPoints();return Array.from(this.tech.getCost()).forEach(e=>{n+=e[0]===Su.FOOD?Math.ceil(e[1]/50):io.getResource(e[0]).TRADE_VALUE*e[1]}),n>0&&(e+=Math.ceil(n/100)),e}hasHeritagePoints(){return this.heritageService.hasHeritagePoints(this.requiredHeritagePoints())}unlockWithHeritage(){this.heritageService.spendHeritagePoints(this.requiredHeritagePoints())?this.meetsPrerequisites()?this.techService.finishTech(this.tech.getTech()):this.modalService.info("Prerequisites not met"):this.modalService.info("Not enough Heritage Points"),this.modalService.sendConfirmationResult(!1),this.tech=null,this.modalService.close(Lu.RESEARCH_UNLOCK)}isHeritageUnlocked(){return this.gameService.isEnabled(bu.HERITAGE)}getHeritagePoints(){return this.heritageService.getAvailableHeritagePoints()}getHeritageCap(){return this.heritageService.getHeritagePoints()}meetsPrerequisites(){let e=!0;const n=this.techService.getTechDone();return this.tech.getPrerequisites().forEach(t=>{e&&(n.includes(t)||(e=!1))}),this.tech.getFlagPrerequisites().forEach(n=>{this.gameService.isEnabled(n)&&e&&(e=!1)}),e}}var XN=Zt({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;max-width:750px;margin:200px auto auto}#buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px;padding:5px}.center[_ngcontent-%COMP%]{text-align:center}.disabled[_ngcontent-%COMP%]{color:#5a5a5a}"]],data:{}});function QN(e){return cs(0,[(e()(),Kr(0,0,null,null,7,"div",[["class","center"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,0,"span",[["id","text"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Kr(2,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(3,0,null,null,4,"div",[["class","buttons"]],null,null,null,null,null)),(e()(),Kr(4,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.ok()&&l),l},null,null)),(e()(),us(-1,null,["YES"])),(e()(),Kr(6,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.cancel()&&l),l},null,null)),(e()(),us(-1,null,["NO"]))],null,function(e,n){e(n,1,0,"Are you sure you want to start researching "+n.component.tech.getTechName()+"?")})}function ZN(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"div",[["class","center"]],null,null,null,null,null)),(e()(),us(-1,null,[" Research queue is full "])),(e()(),Kr(2,0,null,null,0,"br",[],null,null,null,null,null))],null,null)}function JN(e){return cs(0,[(e()(),Kr(0,0,null,null,8,"div",[["class","center"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),us(2,null,[" Unlock with Heritage Points (","/",") "])),(e()(),Kr(3,0,null,null,5,"div",[["class","buttons"]],null,null,null,null,null)),(e()(),Kr(4,0,null,null,4,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.unlockWithHeritage()&&l),l},null,null)),di(512,null,Uo,Go,[Ct,It,rt,ct]),ci(6,278528,null,0,Wo,[Uo],{ngClass:[0,"ngClass"]},null),rs(7,{disabled:0}),(e()(),us(8,null,["unlock for "," HP"]))],function(e,n){var t=n.component,l=e(n,7,0,!t.hasHeritagePoints()||!t.meetsPrerequisites());e(n,6,0,l)},function(e,n){var t=n.component;e(n,2,0,t.getHeritagePoints(),t.getHeritageCap()),e(n,8,0,t.requiredHeritagePoints())})}function eP(e){return cs(0,[(e()(),Kr(0,0,null,null,6,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,QN)),ci(2,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,ZN)),ci(4,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,JN)),ci(6,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.hasQueueSpace()),e(n,4,0,!t.hasQueueSpace()),e(n,6,0,t.isHeritageUnlocked())},null)}function nP(e){return cs(0,[(e()(),Kr(0,0,null,null,5,"app-modal",[["id","research-unlock-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ql(e,1).onKeydownHandler(t)&&l),l},RA,OA)),ci(1,4440064,null,0,bA,[ct,rt,Vm],{id:[0,"id"]},null),(e()(),Kr(2,0,null,0,2,"div",[["class","modal"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,eP)),ci(4,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(5,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,1,0,"research-unlock-modal"),e(n,4,0,t.tech)},null)}class tP{constructor(e){this.modalService=e,this.modalService.registerForText().subscribe(e=>this.text=e)}ngOnInit(){}ok(){this.modalService.sendConfirmationResult(!0),this.modalService.close(Lu.CONFIRM)}cancel(){this.modalService.sendConfirmationResult(!1),this.modalService.close(Lu.CONFIRM)}onKeydownHandler(e){"none"!==document.getElementById("confirm-modal").style.display&&(e.preventDefault(),this.ok())}}var lP=Zt({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;max-width:750px;margin:200px auto auto}#buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px;padding:5px}"]],data:{}});function iP(e){return cs(0,[(e()(),Kr(0,0,null,null,11,"app-modal",[["id","confirm-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ql(e,1).onKeydownHandler(t)&&l),l},RA,OA)),ci(1,4440064,null,0,bA,[ct,rt,Vm],{id:[0,"id"]},null),(e()(),Kr(2,0,null,0,8,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Kr(3,0,null,null,7,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Kr(4,0,null,null,0,"span",[["id","text"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Kr(5,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(6,0,null,null,4,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Kr(7,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.ok()&&l),l},null,null)),(e()(),us(-1,null,["YES"])),(e()(),Kr(9,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.cancel()&&l),l},null,null)),(e()(),us(-1,null,["NO"])),(e()(),Kr(11,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){e(n,1,0,"confirm-modal")},function(e,n){e(n,4,0,n.component.text)})}class rP{constructor(e){this.modalService=e,this.text="",this.modalService.registerForText().subscribe(e=>this.text=e)}ngOnInit(){}ok(){this.modalService.close(Lu.INFO)}onKeydownHandler(e){"none"!==document.getElementById("info-modal").style.display&&(e.preventDefault(),this.ok())}}var sP=Zt({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;font-size:1.2em}"]],data:{}});function uP(e){return cs(0,[(e()(),Kr(0,0,null,null,8,"app-modal",[["id","info-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==Ql(e,1).onKeydownHandler(t)&&l),l},RA,OA)),ci(1,4440064,null,0,bA,[ct,rt,Vm],{id:[0,"id"]},null),(e()(),Kr(2,0,null,0,5,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Kr(3,0,null,null,4,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Kr(4,0,null,null,0,"span",[["id","text"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Kr(5,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(6,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.ok()&&l),l},null,null)),(e()(),us(-1,null,["OK"])),(e()(),Kr(8,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){e(n,1,0,"info-modal")},function(e,n){e(n,4,0,n.component.text)})}class oP{constructor(){}ngOnInit(){}}var aP=Zt({encapsulation:0,styles:[[""]],data:{}});function cP(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"app-build-modal",[],null,null,null,BA,GA)),ci(1,114688,null,0,UA,[Vm],null,null),(e()(),Kr(2,0,null,null,1,"app-abdication-modal",[],null,null,null,$A,YA)),ci(3,114688,null,0,zA,[Vm,VA,gT,Ym],null,null),(e()(),Kr(4,0,null,null,1,"app-fight-report-modal",[],null,null,null,iw,jA)),ci(5,114688,null,0,KA,[Vm,vR],null,null),(e()(),Kr(6,0,null,null,1,"app-export-modal",[],null,null,null,aw,sw)),ci(7,114688,null,0,rw,[VA,Vm],null,null),(e()(),Kr(8,0,null,null,1,"app-import-modal",[],null,null,null,dw,hw)),ci(9,114688,null,0,cw,[VA,Vm],null,null),(e()(),Kr(10,0,null,null,1,"app-hard-reset-modal",[],null,null,null,mw,pw)),ci(11,114688,null,0,gw,[Vm,VA],null,null),(e()(),Kr(12,0,null,null,1,"app-options-modal",[],null,null,null,Ew,Sw)),ci(13,114688,null,0,fw,[Lm,Vm],null,null),(e()(),Kr(14,0,null,null,1,"app-royal-modal",[],null,null,null,Ow,bw)),ci(15,114688,null,0,vw,[jm,Km,Vm],null,null),(e()(),Kr(16,0,null,null,1,"app-mission-modal",[],null,null,null,Vw,Tw)),ci(17,114688,null,0,Rw,[Mm,Vm,VE,Jm,vR],null,null),(e()(),Kr(18,0,null,null,1,"app-market-modal",[],null,[["document","keydown.enter"]],function(e,n,t){var l=!0;return"document:keydown.enter"===n&&(l=!1!==Ql(e,19).onKeydownHandler(t)&&l),l},Qw,Yw)),ci(19,114688,null,0,zw,[Vm,Jm],null,null),(e()(),Kr(20,0,null,null,1,"app-work-management-modal",[],null,[["document","keydown.enter"]],function(e,n,t){var l=!0;return"document:keydown.enter"===n&&(l=!1!==Ql(e,21).onKeydownHandler(t)&&l),l},mN,Jw)),ci(21,114688,null,0,Zw,[Mm,Vm,Jm],null,null),(e()(),Kr(22,0,null,null,1,"app-tutorial-modal",[],null,null,null,RN,SN)),ci(23,4308992,null,0,fN,[Vm,zm,WA,yt],null,null),(e()(),Kr(24,0,null,null,1,"app-changelog-modal",[],null,[["document","keydown.enter"]],function(e,n,t){var l=!0;return"document:keydown.enter"===n&&(l=!1!==Ql(e,25).onKeydownHandler(t)&&l),l},IN,CN)),ci(25,114688,null,0,TN,[Vm],null,null),(e()(),Kr(26,0,null,null,1,"app-resource-management-modal",[],null,[["document","keydown.enter"]],function(e,n,t){var l=!0;return"document:keydown.enter"===n&&(l=!1!==Ql(e,27).onKeydownHandler(t)&&l),l},NN,_N)),ci(27,114688,null,0,yN,[Vm],null,null),(e()(),Kr(28,0,null,null,1,"app-recipe-modal",[],null,[["document","keydown.enter"]],function(e,n,t){var l=!0;return"document:keydown.enter"===n&&(l=!1!==Ql(e,29).onKeydownHandler(t)&&l),l},MN,kN)),ci(29,114688,null,0,PN,[Vm,mf],null,null),(e()(),Kr(30,0,null,null,1,"app-world-modal",[],null,null,null,FN,LN)),ci(31,114688,null,0,DN,[Vm,vR],null,null),(e()(),Kr(32,0,null,null,1,"app-world-build-modal",[],null,null,null,YN,UN)),ci(33,114688,null,0,HN,[Vm,Jm,vR],null,null),(e()(),Kr(34,0,null,null,1,"app-input-modal",[],null,[["document","keydown.enter"]],function(e,n,t){var l=!0;return"document:keydown.enter"===n&&(l=!1!==Ql(e,35).onKeydownHandler(t)&&l),l},jN,KN)),ci(35,114688,null,0,$N,[Vm],null,null),(e()(),Kr(36,0,null,null,1,"app-research-unlock-modal",[],null,[["document","keydown.enter"]],function(e,n,t){var l=!0;return"document:keydown.enter"===n&&(l=!1!==Ql(e,37).onKeydownHandler(t)&&l),l},nP,XN)),ci(37,114688,null,0,qN,[Vm,gT,Ym,lb],null,null),(e()(),Kr(38,0,null,null,1,"app-confirm-modal",[],null,[["document","keydown.enter"]],function(e,n,t){var l=!0;return"document:keydown.enter"===n&&(l=!1!==Ql(e,39).onKeydownHandler(t)&&l),l},iP,lP)),ci(39,114688,null,0,tP,[Vm],null,null),(e()(),Kr(40,0,null,null,1,"app-info-modal",[],null,[["document","keydown.enter"]],function(e,n,t){var l=!0;return"document:keydown.enter"===n&&(l=!1!==Ql(e,41).onKeydownHandler(t)&&l),l},uP,sP)),ci(41,114688,null,0,rP,[Vm],null,null)],function(e,n){e(n,1,0),e(n,3,0),e(n,5,0),e(n,7,0),e(n,9,0),e(n,11,0),e(n,13,0),e(n,15,0),e(n,17,0),e(n,19,0),e(n,21,0),e(n,23,0),e(n,25,0),e(n,27,0),e(n,29,0),e(n,31,0),e(n,33,0),e(n,35,0),e(n,37,0),e(n,39,0),e(n,41,0)},null)}class hP{constructor(e){this.calendarService=e}ngOnInit(){}getDay(){return this.calendarService.getDay()}getYear(){return this.calendarService.getYear()}getSeason(){return Hm[this.calendarService.getSeason()].toLowerCase()}}var dP=Zt({encapsulation:0,styles:[[""]],data:{}});function gP(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),us(1,null,[" day: "," year: "," ","\n"]))],null,function(e,n){var t=n.component;e(n,1,0,t.getDay(),t.getYear(),t.getSeason())})}class pP{constructor(e,n,t,l,i,r,s,u,o,a,c,h,d){this.serializerService=e,this.servicesService=n,this.logService=t,this.modalService=l,this.resourcesService=i,this.weatherService=r,this.optionsService=s,this.gameService=u,this.tickerService=o,this.tutorialService=a,this.techService=c,this.religionService=h,this.managementService=d,this.metric=this.optionsService.getOption(Dm.METRIC),this.optionsSubscription||(this.optionsSubscription=this.optionsService.registerForOptionsChange().subscribe(()=>this.metric=this.optionsService.getOption(Dm.METRIC)))}ngOnInit(){this.resources=this.resourcesService.getResources(),this.resourcesService.registerForResourcesChange().subscribe(e=>{this.resources=e})}getResourcesValues(){return Array.from(this.resources.values())}save(){this.serializerService.initSave(),this.logService.log("saved")}load(){this.serializerService.initLoad()}import(){this.modalService.open(Lu.IMPORT)}export(){this.modalService.open(Lu.EXPORT)}hardReset(){this.modalService.open(Lu.HARD_RESET)}options(){this.modalService.open(Lu.OPTIONS)}getTemperature(){return this.weatherService.getCurrentTemperature()}getWeather(){return this.weatherService.getCurrentWeather()}getWeatherName(){return Gu[this.getWeather()].toLowerCase()}calendarEnabled(){return this.gameService.isEnabled(bu.CALENDAR)}softReset(){this.modalService.open(Lu.ABDICATION)}isNotCoins(e){return e.resource!==Su.COINS}resetTutorials(){this.tutorialService.resetTutorials()}pause(){this.tickerService.pause()}resume(){this.tickerService.resume()}isPaused(){return this.tickerService.isPaused()}getResourceDescription(e){let n="";return e.hasResourceType(Iu.CONSUMABLE)&&(n+="nutrition: "+io.getResource(e.resource).POWER),e.hasResourceType(Iu.FUEL)&&(n+="heating energy: "+io.getResource(e.resource).POWER),""!==n?"<hr>"+n:n}getResourceConsumers(e){let n="",t="<b>used by:</b><br>";const l=this.resourcesService.getResourceUses(e.resource),i=[];l&&(l.slice().forEach(e=>{const n=i.find(n=>n[0]===e.userName);n?n[1]+=e.value:i.push([e.userName,e.value])}),i.sort((e,n)=>e[0].localeCompare(n[0])).forEach(e=>{t+=e[0]+": "+e[1]+"<br>"})),"<b>used by:</b><br>"!==t&&(n+="<hr>"+t),t="<b>produced by:</b><br>";const r=this.resourcesService.getResourceProductions(e.resource),s=[];return r&&(r.slice().forEach(e=>{const n=s.find(n=>n[0]===e.producerName);n?n[1]+=e.value:s.push([e.producerName,e.value])}),s.sort((e,n)=>e[0].localeCompare(n[0])).forEach(e=>{t+=e[0]+": "+e[1]+"<br>"})),"<b>produced by:</b><br>"!==t&&(n+="<hr>"+t),n}showCurrentTutorial(){this.tutorialService.showCurrentViewTutorial()}getFoodValue(){return this.resourcesService.getFoodValue("Village")}isFoodNutritionEnabled(){return this.managementService.getFoodNutrition()}getConsumableResources(){return this.resourcesService.getResourcesByType(Iu.CONSUMABLE).filter(e=>e.isVisible())}getDailyNutritionUsage(){return 5*(this.resourcesService.getTotalPeople()-1)*this.managementService.getRations()}getAverageDailyNutritionProduction(){return this.resourcesService.getAverageNutritionProduction()}getRations(){return.5*this.managementService.getRations()}isHeaderTwoLines(){return this.managementService.getSecondHeaderRow()}showFreeWorkers(){return this.managementService.getShowFreeWorkers()}getFreeWorkers(){return this.resourcesService.getPeople()}showPopulation(){return this.managementService.getShowPopulation()}getPopulation(){return this.resourcesService.getTotalPeople()+"/"+this.resourcesService.getPopulationCap()}isManagementResearched(){return this.gameService.isEnabled(bu.MANAGEMENT)}showResearchProgress(){return this.managementService.getShowResearchProgress()}getResearchProgress(){const e=this.techService.getCurrentResearch();return e?Pu.prepareTechName(e.getTech())+": "+e.getResearchPoints()+"/"+e.getRequiredResearchPoints():"no research"}showFaith(){return this.managementService.getShowFaith()}getFaith(){return this.religionService.getFaith()+"/"+this.religionService.getFaithCap()}isFaithUnlocked(){return this.gameService.isEnabled(bu.RELIGION)}isRawEnabled(){return this.managementService.getShowRaw()}geRawResources(){return this.resourcesService.getResourcesByType(Iu.RAW).filter(e=>e.isVisible())}isProcessedEnabled(){return this.managementService.getShowProcessed()}geProcessedResources(){return this.resourcesService.getResourcesByType(Iu.PROCESSED).filter(e=>e.isVisible())}isFoodEnabled(){return this.managementService.getShowFood()}geFoodResources(){return this.resourcesService.getResourcesByType(Iu.FOOD).filter(e=>e.isVisible())}isToolsEnabled(){return this.managementService.getShowTools()}geToolsResources(){return this.resourcesService.getResourcesByType(Iu.TOOLS).filter(e=>e.isVisible())}}var mP=Zt({encapsulation:0,styles:[["#wrapperTwoLines[_ngcontent-%COMP%]{font-size:1em;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:100%;-webkit-box-align:center;align-items:center}#wrapperOneLine[_ngcontent-%COMP%]{font-size:1em;display:-webkit-box;display:flex;height:100%;-webkit-box-align:center;align-items:center}.line[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;height:50%;width:100%}button[_ngcontent-%COMP%]{width:100%;margin:0;padding:0}.highlighted[_ngcontent-%COMP%], app-calendar[_ngcontent-%COMP%]{display:inline-block}#cog[_ngcontent-%COMP%]{float:right;margin-top:-2px;height:30px;width:30px}#cog[_ngcontent-%COMP%]:hover{cursor:pointer}.dropdown[_ngcontent-%COMP%]{position:absolute;right:4px;display:inline-block}.dropdown-content[_ngcontent-%COMP%]{cursor:pointer;display:none;position:absolute;list-style:none;background-color:#f9f9f9;min-width:150px;right:0;font-size:1.2em;margin-top:25px;padding:0;border:1px solid #000;z-index:1000}.dropdown-content[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:pointer}.dropdown[_ngcontent-%COMP%]:hover   .dropdown-content[_ngcontent-%COMP%]{display:block}.dropdown-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background-color:var(--passive-colour);border:1px solid #000;padding:3px}.dropdown-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:var(--active-colour)}#temp[_ngcontent-%COMP%]{padding-top:2px;padding-left:5px}.full[_ngcontent-%COMP%]{font-weight:600}app-calendar[_ngcontent-%COMP%]{display:inline-block;font-size:1.1em}#right[_ngcontent-%COMP%]{position:absolute;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;font-size:1.1em;margin-top:2px;right:40px}app-icon[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 auto;margin-right:3px}#weather[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 auto}.icon[_ngcontent-%COMP%]{font-size:1.1em;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center}hr[_ngcontent-%COMP%]{border-color:#000}.center[_ngcontent-%COMP%]{text-align:center}"]],data:{}});function fP(e){return cs(0,[(e()(),Kr(0,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(2,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),us(3,null,["","/"," "]))],function(e,n){var t=n.context.$implicit.getName();e(n,2,0,t,"resources")},function(e,n){e(n,3,0,n.context.$implicit.amount,n.context.$implicit.limit)})}function SP(e){return cs(0,[(e()(),Kr(0,0,null,null,18,"div",[["appTooltip",""],["class","highlighted icon tooltip"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==Ql(e,1).onmousemove(t)&&l),l},null,null)),ci(1,16384,null,0,Op,[],{elementId:[0,"elementId"]},null),(e()(),Kr(2,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(3,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),us(4,null,["\xa0"," "])),(e()(),Kr(5,0,null,null,13,"span",[["id","nutTolltip"]],null,null,null,null,null)),(e()(),us(-1,null,[" Total food nutrition"])),(e()(),Kr(7,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(8,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),us(9,null,[" Rations: ",""])),(e()(),Kr(10,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),us(11,null,[" Daily consumption: ",""])),(e()(),Kr(12,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),us(13,null,[" Average daily production: ",""])),is(14,2),(e()(),Kr(15,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(16,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,fP)),ci(18,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,1,0,"nutTolltip"),e(n,3,0,"food","resources",""),e(n,18,0,t.getConsumableResources())},function(e,n){var t=n.component;e(n,4,0,t.getFoodValue()),e(n,9,0,t.getRations()),e(n,11,0,t.getDailyNutritionUsage());var l=qt(n,13,0,e(n,14,0,Ql(n.parent.parent,0),t.getAverageDailyNutritionProduction(),"0.0-0"));e(n,13,0,l)})}function EP(e){return cs(0,[(e()(),Kr(0,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(2,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),us(3,null,["","/"," "]))],function(e,n){var t=n.context.$implicit.getName();e(n,2,0,t,"resources")},function(e,n){e(n,3,0,n.context.$implicit.amount,n.context.$implicit.limit)})}function vP(e){return cs(0,[(e()(),Kr(0,0,null,null,5,"div",[["appTooltip",""],["class","highlighted icon tooltip"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==Ql(e,1).onmousemove(t)&&l),l},null,null)),ci(1,16384,null,0,Op,[],{elementId:[0,"elementId"]},null),(e()(),us(-1,null,[" \xa0RAW "])),(e()(),Kr(3,0,null,null,2,"span",[["id","rawTolltip"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,EP)),ci(5,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,1,0,"rawTolltip"),e(n,5,0,t.geRawResources())},null)}function bP(e){return cs(0,[(e()(),Kr(0,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(2,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),us(3,null,["","/"," "]))],function(e,n){var t=n.parent.context.$implicit.getName();e(n,2,0,t,"resources")},function(e,n){e(n,3,0,n.parent.context.$implicit.amount,n.parent.context.$implicit.limit)})}function OP(e){return cs(0,[(e()(),Kr(0,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(2,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),us(3,null,[""," "]))],function(e,n){var t=n.parent.context.$implicit.getName();e(n,2,0,t,"resources")},function(e,n){e(n,3,0,n.parent.context.$implicit.amount)})}function RP(e){return cs(0,[(e()(),Kr(0,0,null,null,4,"div",[["class","icon"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,bP)),ci(2,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,OP)),ci(4,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.isNotCoins(n.context.$implicit)),e(n,4,0,!t.isNotCoins(n.context.$implicit))},null)}function TP(e){return cs(0,[(e()(),Kr(0,0,null,null,5,"div",[["appTooltip",""],["class","highlighted icon tooltip"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==Ql(e,1).onmousemove(t)&&l),l},null,null)),ci(1,16384,null,0,Op,[],{elementId:[0,"elementId"]},null),(e()(),us(-1,null,[" \xa0PROCESSED "])),(e()(),Kr(3,0,null,null,2,"span",[["id","processedTolltip"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,RP)),ci(5,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,1,0,"processedTolltip"),e(n,5,0,t.geProcessedResources())},null)}function CP(e){return cs(0,[(e()(),Kr(0,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(2,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),us(3,null,["","/"," "]))],function(e,n){var t=n.context.$implicit.getName();e(n,2,0,t,"resources")},function(e,n){e(n,3,0,n.context.$implicit.amount,n.context.$implicit.limit)})}function IP(e){return cs(0,[(e()(),Kr(0,0,null,null,5,"div",[["appTooltip",""],["class","highlighted icon tooltip"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==Ql(e,1).onmousemove(t)&&l),l},null,null)),ci(1,16384,null,0,Op,[],{elementId:[0,"elementId"]},null),(e()(),us(-1,null,[" \xa0FOOD "])),(e()(),Kr(3,0,null,null,2,"span",[["id","foodTolltip"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,CP)),ci(5,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,1,0,"foodTolltip"),e(n,5,0,t.geFoodResources())},null)}function yP(e){return cs(0,[(e()(),Kr(0,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(2,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),us(3,null,["","/"," "]))],function(e,n){var t=n.context.$implicit.getName();e(n,2,0,t,"resources")},function(e,n){e(n,3,0,n.context.$implicit.amount,n.context.$implicit.limit)})}function _P(e){return cs(0,[(e()(),Kr(0,0,null,null,5,"div",[["appTooltip",""],["class","highlighted icon tooltip"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==Ql(e,1).onmousemove(t)&&l),l},null,null)),ci(1,16384,null,0,Op,[],{elementId:[0,"elementId"]},null),(e()(),us(-1,null,[" \xa0TOOLS "])),(e()(),Kr(3,0,null,null,2,"span",[["id","toolsTolltip"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,yP)),ci(5,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,1,0,"toolsTolltip"),e(n,5,0,t.geToolsResources())},null)}function AP(e){return cs(0,[(e()(),Kr(0,0,null,null,6,"div",[["appTooltip",""],["class","highlighted icon tooltip"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==Ql(e,1).onmousemove(t)&&l),l},null,null)),ci(1,16384,null,0,Op,[],{elementId:[0,"elementId"]},null),(e()(),Kr(2,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(3,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),us(4,null,["\xa0"," "])),(e()(),Kr(5,0,null,null,1,"span",[["id","nutTolltip"]],null,null,null,null,null)),(e()(),us(-1,null,[" Total food nutrition "]))],function(e,n){e(n,1,0,"nutTolltip"),e(n,3,0,"food","resources","")},function(e,n){e(n,4,0,n.component.getFoodValue())})}function wP(e){return cs(0,[(e()(),Kr(0,0,null,null,3,"div",[["class","highlighted icon"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(2,114688,null,0,Rp,[],{name:[0,"name"]},null),(e()(),us(3,null,[" "," "]))],function(e,n){e(n,2,0,"population")},function(e,n){e(n,3,0,n.component.getPopulation())})}function NP(e){return cs(0,[(e()(),Kr(0,0,null,null,3,"div",[["class","highlighted icon"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(2,114688,null,0,Rp,[],{name:[0,"name"],title:[1,"title"]},null),(e()(),us(3,null,[" "," "]))],function(e,n){e(n,2,0,"hammer","Workers")},function(e,n){e(n,3,0,n.component.getFreeWorkers())})}function PP(e){return cs(0,[(e()(),Kr(0,0,null,null,3,"div",[["class","highlighted icon"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(2,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),us(3,null,[" "," \xa0 "]))],function(e,n){e(n,2,0,"faith","religion","Faith")},function(e,n){e(n,3,0,n.component.getFaith())})}function kP(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"div",[["class","highlighted icon"]],null,null,null,null,null)),(e()(),us(1,null,[" "," "]))],null,function(e,n){e(n,1,0,n.component.getResearchProgress())})}function xP(e){return cs(0,[(e()(),Kr(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),us(1,null,["","/",""]))],null,function(e,n){var t=n.parent.parent.context.$implicit.getAmount(),l=n.parent.parent.context.$implicit.getLimit();e(n,1,0,t,l)})}function MP(e){return cs(0,[(e()(),Kr(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),us(1,null,["","/",""]))],null,function(e,n){var t=n.parent.parent.context.$implicit.getAmount(),l=n.parent.parent.context.$implicit.getLimit();e(n,1,0,t,l)})}function DP(e){return cs(0,[(e()(),Kr(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),us(1,null,["",""]))],null,function(e,n){var t=n.parent.parent.context.$implicit.getAmount();e(n,1,0,t)})}function LP(e){return cs(0,[(e()(),Kr(0,0,null,null,16,"span",[],null,null,null,null,null)),(e()(),Kr(1,0,null,null,15,"span",[["appTooltip",""],["class","icon tooltip"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==Ql(e,2).onmousemove(t)&&l),l},null,null)),ci(2,16384,null,0,Op,[],{elementId:[0,"elementId"]},null),(e()(),Kr(3,0,null,null,4,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),Kr(4,0,null,null,1,"div",[["class","center"]],null,null,null,null,null)),(e()(),us(5,null,["",""])),(e()(),Kr(6,0,null,null,0,"div",[["class","center"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Kr(7,0,null,null,0,"div",[["class","center"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Kr(8,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(9,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),$r(16777216,null,null,1,null,xP)),ci(11,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,MP)),ci(13,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,DP)),ci(15,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),us(-1,null,[" \xa0"]))],function(e,n){var t=n.component;e(n,2,0,1e5*n.parent.context.$implicit.resource);var l=n.parent.context.$implicit.getName();e(n,9,0,l,"resources","");var i=n.parent.context.$implicit.getAmount()===n.parent.context.$implicit.getLimit();e(n,11,0,i);var r=t.isNotCoins(n.parent.context.$implicit)&&n.parent.context.$implicit.getAmount()!==n.parent.context.$implicit.getLimit();e(n,13,0,r),e(n,15,0,!t.isNotCoins(n.parent.context.$implicit))},function(e,n){var t=n.component;e(n,3,0,Il(1,"",1e5*n.parent.context.$implicit.resource,"")),e(n,5,0,n.parent.context.$implicit.name),e(n,6,0,t.getResourceDescription(n.parent.context.$implicit)),e(n,7,0,t.getResourceConsumers(n.parent.context.$implicit))})}function FP(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"div",[["class","highlighted"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,LP)),ci(2,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,2,0,n.context.$implicit.visible&&n.context.$implicit.highlighted)},null)}function HP(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"app-calendar",[],null,null,null,gP,dP)),ci(1,114688,null,0,hP,[Gm],null,null)],function(e,n){e(n,1,0)},null)}function UP(e){return cs(0,[(e()(),Kr(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),us(-1,null,["\xb0C"]))],null,null)}function GP(e){return cs(0,[(e()(),Kr(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),us(-1,null,["\xb0F"]))],null,null)}function BP(e){return cs(0,[(e()(),Kr(0,0,null,null,0,"img",[["alt","settings"],["draggable","false"],["id","cog"],["src","assets/settings.svg"]],null,null,null,null,null))],null,null)}function WP(e){return cs(0,[(e()(),Kr(0,0,null,null,0,"img",[["alt","settings"],["draggable","false"],["id","cog"],["src","assets/pause.svg"]],null,null,null,null,null))],null,null)}function VP(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.pause()&&l),l},null,null)),(e()(),us(-1,null,["pause game"]))],null,null)}function zP(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.resume()&&l),l},null,null)),(e()(),us(-1,null,["resume game"]))],null,null)}function YP(e){return cs(0,[(e()(),Kr(0,0,null,null,68,"div",[["id","wrapperOneLine"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,SP)),ci(2,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,vP)),ci(4,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,TP)),ci(6,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,IP)),ci(8,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,_P)),ci(10,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,AP)),ci(12,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,wP)),ci(14,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),us(-1,null,[" \xa0 "])),(e()(),$r(16777216,null,null,1,null,NP)),ci(17,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),us(-1,null,[" \xa0 "])),(e()(),$r(16777216,null,null,1,null,PP)),ci(20,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,kP)),ci(22,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),us(-1,null,[" \xa0 "])),(e()(),$r(16777216,null,null,1,null,FP)),ci(25,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null),(e()(),us(-1,null,[" \xa0 "])),(e()(),Kr(27,0,null,null,13,"div",[["id","right"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,HP)),ci(29,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(30,0,null,null,10,"span",[["class","icon"],["id","weather"]],null,null,null,null,null)),(e()(),us(-1,null,[" \xa0 "])),(e()(),Kr(32,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(33,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Kr(34,0,null,null,6,null,null,null,null,null,null,null)),(e()(),us(35,null,[""," "])),is(36,2),(e()(),$r(16777216,null,null,1,null,UP)),ci(38,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,GP)),ci(40,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(41,0,null,null,27,"div",[["class","dropdown"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,BP)),ci(43,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,WP)),ci(45,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(46,0,null,null,22,"ul",[["class","dropdown-content"]],null,null,null,null,null)),(e()(),Kr(47,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.options()&&l),l},null,null)),(e()(),us(-1,null,["options"])),(e()(),Kr(49,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.save()&&l),l},null,null)),(e()(),us(-1,null,["save"])),(e()(),Kr(51,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.load()&&l),l},null,null)),(e()(),us(-1,null,["load"])),(e()(),Kr(53,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.import()&&l),l},null,null)),(e()(),us(-1,null,["import"])),(e()(),Kr(55,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.export()&&l),l},null,null)),(e()(),us(-1,null,["export"])),(e()(),$r(16777216,null,null,1,null,VP)),ci(58,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,zP)),ci(60,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(61,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.showCurrentTutorial()&&l),l},null,null)),(e()(),us(-1,null,["show current tab tutorial"])),(e()(),Kr(63,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.resetTutorials()&&l),l},null,null)),(e()(),us(-1,null,["reset tutorials"])),(e()(),Kr(65,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.softReset()&&l),l},null,null)),(e()(),us(-1,null,["abdicate"])),(e()(),Kr(67,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.hardReset()&&l),l},null,null)),(e()(),us(-1,null,["hard reset"]))],function(e,n){var t=n.component;e(n,2,0,t.isFoodNutritionEnabled()&&t.isManagementResearched()),e(n,4,0,t.isRawEnabled()&&t.isManagementResearched()),e(n,6,0,t.isProcessedEnabled()&&t.isManagementResearched()),e(n,8,0,t.isFoodEnabled()&&t.isManagementResearched()),e(n,10,0,t.isToolsEnabled()&&t.isManagementResearched()),e(n,12,0,t.isFoodNutritionEnabled()&&!t.isManagementResearched()),e(n,14,0,t.showPopulation()),e(n,17,0,t.showFreeWorkers()),e(n,20,0,t.showFaith()&&t.isFaithUnlocked()),e(n,22,0,t.showResearchProgress()),e(n,25,0,t.getResourcesValues()),e(n,29,0,t.calendarEnabled()),e(n,33,0,t.getWeatherName(),"weather"),e(n,38,0,t.metric),e(n,40,0,!t.metric),e(n,43,0,!t.isPaused()),e(n,45,0,t.isPaused()),e(n,58,0,!t.isPaused()),e(n,60,0,t.isPaused())},function(e,n){var t=n.component,l=qt(n,35,0,e(n,36,0,Ql(n.parent,0),t.getTemperature(),"0.0-1"));e(n,35,0,l)})}function $P(e){return cs(0,[(e()(),Kr(0,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(2,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),us(3,null,["","/"," "]))],function(e,n){var t=n.context.$implicit.getName();e(n,2,0,t,"resources")},function(e,n){e(n,3,0,n.context.$implicit.amount,n.context.$implicit.limit)})}function KP(e){return cs(0,[(e()(),Kr(0,0,null,null,18,"div",[["appTooltip",""],["class","highlighted icon tooltip"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==Ql(e,1).onmousemove(t)&&l),l},null,null)),ci(1,16384,null,0,Op,[],{elementId:[0,"elementId"]},null),(e()(),Kr(2,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(3,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),us(4,null,["\xa0"," "])),(e()(),Kr(5,0,null,null,13,"span",[["id","nutTolltip"]],null,null,null,null,null)),(e()(),us(-1,null,[" Nutrition"])),(e()(),Kr(7,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(8,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),us(9,null,[" Rations: ",""])),(e()(),Kr(10,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),us(11,null,[" Daily consumption: ",""])),(e()(),Kr(12,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),us(13,null,[" Average daily production: ",""])),is(14,2),(e()(),Kr(15,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Kr(16,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,$P)),ci(18,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,1,0,"nutTolltip"),e(n,3,0,"food","resources",""),e(n,18,0,t.getConsumableResources())},function(e,n){var t=n.component;e(n,4,0,t.getFoodValue()),e(n,9,0,t.getRations()),e(n,11,0,t.getDailyNutritionUsage());var l=qt(n,13,0,e(n,14,0,Ql(n.parent.parent,0),t.getAverageDailyNutritionProduction(),"0.0-0"));e(n,13,0,l)})}function jP(e){return cs(0,[(e()(),Kr(0,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(2,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),us(3,null,["","/"," "]))],function(e,n){var t=n.context.$implicit.getName();e(n,2,0,t,"resources")},function(e,n){e(n,3,0,n.context.$implicit.amount,n.context.$implicit.limit)})}function qP(e){return cs(0,[(e()(),Kr(0,0,null,null,5,"div",[["appTooltip",""],["class","highlighted icon tooltip"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==Ql(e,1).onmousemove(t)&&l),l},null,null)),ci(1,16384,null,0,Op,[],{elementId:[0,"elementId"]},null),(e()(),us(-1,null,[" \xa0RAW "])),(e()(),Kr(3,0,null,null,2,"span",[["id","rawTolltip"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,jP)),ci(5,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,1,0,"rawTolltip"),e(n,5,0,t.geRawResources())},null)}function XP(e){return cs(0,[(e()(),Kr(0,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(2,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),us(3,null,["","/"," "]))],function(e,n){var t=n.parent.context.$implicit.getName();e(n,2,0,t,"resources")},function(e,n){e(n,3,0,n.parent.context.$implicit.amount,n.parent.context.$implicit.limit)})}function QP(e){return cs(0,[(e()(),Kr(0,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(2,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),us(3,null,[""," "]))],function(e,n){var t=n.parent.context.$implicit.getName();e(n,2,0,t,"resources")},function(e,n){e(n,3,0,n.parent.context.$implicit.amount)})}function ZP(e){return cs(0,[(e()(),Kr(0,0,null,null,4,"div",[["class","icon"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,XP)),ci(2,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,QP)),ci(4,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.isNotCoins(n.context.$implicit)),e(n,4,0,!t.isNotCoins(n.context.$implicit))},null)}function JP(e){return cs(0,[(e()(),Kr(0,0,null,null,5,"div",[["appTooltip",""],["class","highlighted icon tooltip"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==Ql(e,1).onmousemove(t)&&l),l},null,null)),ci(1,16384,null,0,Op,[],{elementId:[0,"elementId"]},null),(e()(),us(-1,null,[" \xa0PROCESSED "])),(e()(),Kr(3,0,null,null,2,"span",[["id","processedTolltip"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,ZP)),ci(5,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,1,0,"processedTolltip"),e(n,5,0,t.geProcessedResources())},null)}function ek(e){return cs(0,[(e()(),Kr(0,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(2,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),us(3,null,["","/"," "]))],function(e,n){var t=n.context.$implicit.getName();e(n,2,0,t,"resources")},function(e,n){e(n,3,0,n.context.$implicit.amount,n.context.$implicit.limit)})}function nk(e){return cs(0,[(e()(),Kr(0,0,null,null,5,"div",[["appTooltip",""],["class","highlighted icon tooltip"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==Ql(e,1).onmousemove(t)&&l),l},null,null)),ci(1,16384,null,0,Op,[],{elementId:[0,"elementId"]},null),(e()(),us(-1,null,[" \xa0FOOD "])),(e()(),Kr(3,0,null,null,2,"span",[["id","foodTolltip"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,ek)),ci(5,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,1,0,"foodTolltip"),e(n,5,0,t.geFoodResources())},null)}function tk(e){return cs(0,[(e()(),Kr(0,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(2,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),us(3,null,["","/"," "]))],function(e,n){var t=n.context.$implicit.getName();e(n,2,0,t,"resources")},function(e,n){e(n,3,0,n.context.$implicit.amount,n.context.$implicit.limit)})}function lk(e){return cs(0,[(e()(),Kr(0,0,null,null,5,"div",[["appTooltip",""],["class","highlighted icon tooltip"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==Ql(e,1).onmousemove(t)&&l),l},null,null)),ci(1,16384,null,0,Op,[],{elementId:[0,"elementId"]},null),(e()(),us(-1,null,[" \xa0TOOLS "])),(e()(),Kr(3,0,null,null,2,"span",[["id","toolsTolltip"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,tk)),ci(5,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,1,0,"toolsTolltip"),e(n,5,0,t.geToolsResources())},null)}function ik(e){return cs(0,[(e()(),Kr(0,0,null,null,6,"div",[["appTooltip",""],["class","highlighted icon tooltip"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==Ql(e,1).onmousemove(t)&&l),l},null,null)),ci(1,16384,null,0,Op,[],{elementId:[0,"elementId"]},null),(e()(),Kr(2,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(3,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),us(4,null,["\xa0"," "])),(e()(),Kr(5,0,null,null,1,"span",[["id","nutTolltip"]],null,null,null,null,null)),(e()(),us(-1,null,[" Total food nutrition "]))],function(e,n){e(n,1,0,"nutTolltip"),e(n,3,0,"food","resources","")},function(e,n){e(n,4,0,n.component.getFoodValue())})}function rk(e){return cs(0,[(e()(),Kr(0,0,null,null,3,"div",[["class","highlighted icon"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(2,114688,null,0,Rp,[],{name:[0,"name"]},null),(e()(),us(3,null,[" "," "]))],function(e,n){e(n,2,0,"population")},function(e,n){e(n,3,0,n.component.getPopulation())})}function sk(e){return cs(0,[(e()(),Kr(0,0,null,null,3,"div",[["class","highlighted icon"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(2,114688,null,0,Rp,[],{name:[0,"name"],title:[1,"title"]},null),(e()(),us(3,null,[" "," "]))],function(e,n){e(n,2,0,"hammer","Workers")},function(e,n){e(n,3,0,n.component.getFreeWorkers())})}function uk(e){return cs(0,[(e()(),Kr(0,0,null,null,3,"div",[["class","highlighted icon"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(2,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),us(3,null,[" "," \xa0 "]))],function(e,n){e(n,2,0,"faith","religion","Faith")},function(e,n){e(n,3,0,n.component.getFaith())})}function ok(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"div",[["class","highlighted icon"]],null,null,null,null,null)),(e()(),us(1,null,[" "," "]))],null,function(e,n){e(n,1,0,n.component.getResearchProgress())})}function ak(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"app-calendar",[],null,null,null,gP,dP)),ci(1,114688,null,0,hP,[Gm],null,null)],function(e,n){e(n,1,0)},null)}function ck(e){return cs(0,[(e()(),Kr(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),us(-1,null,["\xb0C"]))],null,null)}function hk(e){return cs(0,[(e()(),Kr(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),us(-1,null,["\xb0F"]))],null,null)}function dk(e){return cs(0,[(e()(),Kr(0,0,null,null,0,"img",[["alt","settings"],["draggable","false"],["id","cog"],["ondragstart","return false;"],["src","assets/settings.svg"]],null,null,null,null,null))],null,null)}function gk(e){return cs(0,[(e()(),Kr(0,0,null,null,0,"img",[["alt","settings"],["draggable","false"],["id","cog"],["ondragstart","return false;"],["src","assets/pause.svg"]],null,null,null,null,null))],null,null)}function pk(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.pause()&&l),l},null,null)),(e()(),us(-1,null,["pause game"]))],null,null)}function mk(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.resume()&&l),l},null,null)),(e()(),us(-1,null,["resume game"]))],null,null)}function fk(e){return cs(0,[(e()(),Kr(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),us(1,null,["","/",""]))],null,function(e,n){var t=n.parent.parent.context.$implicit.getAmount(),l=n.parent.parent.context.$implicit.getLimit();e(n,1,0,t,l)})}function Sk(e){return cs(0,[(e()(),Kr(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),us(1,null,["","/",""]))],null,function(e,n){var t=n.parent.parent.context.$implicit.getAmount(),l=n.parent.parent.context.$implicit.getLimit();e(n,1,0,t,l)})}function Ek(e){return cs(0,[(e()(),Kr(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),us(1,null,["",""]))],null,function(e,n){var t=n.parent.parent.context.$implicit.getAmount();e(n,1,0,t)})}function vk(e){return cs(0,[(e()(),Kr(0,0,null,null,16,"span",[],null,null,null,null,null)),(e()(),Kr(1,0,null,null,15,"span",[["appTooltip",""],["class","icon tooltip"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==Ql(e,2).onmousemove(t)&&l),l},null,null)),ci(2,16384,null,0,Op,[],{elementId:[0,"elementId"]},null),(e()(),Kr(3,0,null,null,4,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),Kr(4,0,null,null,1,"div",[["class","center"]],null,null,null,null,null)),(e()(),us(5,null,["",""])),(e()(),Kr(6,0,null,null,0,"div",[["class","center"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Kr(7,0,null,null,0,"div",[["class","center"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Kr(8,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(9,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),$r(16777216,null,null,1,null,fk)),ci(11,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,Sk)),ci(13,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,Ek)),ci(15,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),us(-1,null,[" \xa0"]))],function(e,n){var t=n.component;e(n,2,0,1e5*n.parent.context.$implicit.resource);var l=n.parent.context.$implicit.getName();e(n,9,0,l,"resources","");var i=n.parent.context.$implicit.getAmount()===n.parent.context.$implicit.getLimit();e(n,11,0,i);var r=t.isNotCoins(n.parent.context.$implicit)&&n.parent.context.$implicit.getAmount()!==n.parent.context.$implicit.getLimit();e(n,13,0,r),e(n,15,0,!t.isNotCoins(n.parent.context.$implicit))},function(e,n){var t=n.component;e(n,3,0,Il(1,"",1e5*n.parent.context.$implicit.resource,"")),e(n,5,0,n.parent.context.$implicit.name),e(n,6,0,t.getResourceDescription(n.parent.context.$implicit)),e(n,7,0,t.getResourceConsumers(n.parent.context.$implicit))})}function bk(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"div",[["class","highlighted"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,vk)),ci(2,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,2,0,n.context.$implicit.visible&&n.context.$implicit.highlighted)},null)}function Ok(e){return cs(0,[(e()(),Kr(0,0,null,null,69,"div",[["id","wrapperTwoLines"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,65,"div",[["class","line"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,KP)),ci(3,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,qP)),ci(5,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,JP)),ci(7,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,nk)),ci(9,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,lk)),ci(11,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,ik)),ci(13,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,rk)),ci(15,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),us(-1,null,[" \xa0 "])),(e()(),$r(16777216,null,null,1,null,sk)),ci(18,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),us(-1,null,[" \xa0 "])),(e()(),$r(16777216,null,null,1,null,uk)),ci(21,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,ok)),ci(23,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),us(-1,null,[" \xa0 "])),(e()(),Kr(25,0,null,null,13,"div",[["id","right"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,ak)),ci(27,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(28,0,null,null,10,"span",[["class","icon"],["id","weather"]],null,null,null,null,null)),(e()(),us(-1,null,[" \xa0 "])),(e()(),Kr(30,0,null,null,1,"app-icon",[],null,null,null,Cp,Tp)),ci(31,114688,null,0,Rp,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Kr(32,0,null,null,6,null,null,null,null,null,null,null)),(e()(),us(33,null,[""," "])),is(34,2),(e()(),$r(16777216,null,null,1,null,ck)),ci(36,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,hk)),ci(38,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(39,0,null,null,27,"div",[["class","dropdown"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,dk)),ci(41,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,gk)),ci(43,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(44,0,null,null,22,"ul",[["class","dropdown-content"]],null,null,null,null,null)),(e()(),Kr(45,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.options()&&l),l},null,null)),(e()(),us(-1,null,["options"])),(e()(),Kr(47,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.save()&&l),l},null,null)),(e()(),us(-1,null,["save"])),(e()(),Kr(49,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.load()&&l),l},null,null)),(e()(),us(-1,null,["load"])),(e()(),Kr(51,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.import()&&l),l},null,null)),(e()(),us(-1,null,["import"])),(e()(),Kr(53,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.export()&&l),l},null,null)),(e()(),us(-1,null,["export"])),(e()(),$r(16777216,null,null,1,null,pk)),ci(56,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,mk)),ci(58,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(59,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.showCurrentTutorial()&&l),l},null,null)),(e()(),us(-1,null,["show current tab tutorial"])),(e()(),Kr(61,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.resetTutorials()&&l),l},null,null)),(e()(),us(-1,null,["reset tutorials"])),(e()(),Kr(63,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.softReset()&&l),l},null,null)),(e()(),us(-1,null,["abdicate"])),(e()(),Kr(65,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.hardReset()&&l),l},null,null)),(e()(),us(-1,null,["hard reset"])),(e()(),Kr(67,0,null,null,2,"div",[["class","line"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,bk)),ci(69,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,3,0,t.isFoodNutritionEnabled()&&t.isManagementResearched()),e(n,5,0,t.isRawEnabled()&&t.isManagementResearched()),e(n,7,0,t.isProcessedEnabled()&&t.isManagementResearched()),e(n,9,0,t.isFoodEnabled()&&t.isManagementResearched()),e(n,11,0,t.isToolsEnabled()&&t.isManagementResearched()),e(n,13,0,t.isFoodNutritionEnabled()&&!t.isManagementResearched()),e(n,15,0,t.showPopulation()),e(n,18,0,t.showFreeWorkers()),e(n,21,0,t.showFaith()&&t.isFaithUnlocked()),e(n,23,0,t.showResearchProgress()),e(n,27,0,t.calendarEnabled()),e(n,31,0,t.getWeatherName(),"weather"),e(n,36,0,t.metric),e(n,38,0,!t.metric),e(n,41,0,!t.isPaused()),e(n,43,0,t.isPaused()),e(n,56,0,!t.isPaused()),e(n,58,0,t.isPaused()),e(n,69,0,t.getResourcesValues())},function(e,n){var t=n.component,l=qt(n,33,0,e(n,34,0,Ql(n.parent,0),t.getTemperature(),"0.0-1"));e(n,33,0,l)})}function Rk(e){return cs(0,[hi(0,sa,[$i]),Zr(671088640,1,{line1Ref:0}),Zr(671088640,2,{line22Ref:0}),(e()(),$r(16777216,null,null,1,null,YP)),ci(4,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,Ok)),ci(6,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,4,0,!t.isHeaderTwoLines()),e(n,6,0,t.isHeaderTwoLines())},null)}class Tk{constructor(e,n){this.gameService=e,this.router=n}ngOnInit(){}isWeatherEnabled(){return this.gameService.isEnabled(bu.WEATHER)}isMarketEnabled(){return this.gameService.isEnabled(bu.MARKET)}isManagementEnabled(){return this.gameService.isEnabled(bu.MANAGEMENT)}isResearchEnabled(){return this.gameService.isEnabled(bu.RESEARCH)}isArmyEnabled(){return this.gameService.isEnabled(bu.ARMY)}isReligionEnabled(){return this.gameService.isEnabled(bu.RELIGION)}isCraftingEnabled(){return this.gameService.isEnabled(bu.CRAFTING)}isHeritageUnlocked(){return this.gameService.isEnabled(bu.HERITAGE)}isCartographyEnabled(){return this.gameService.isEnabled(bu.CARTOGRAPHY)}isDev(){return!zu.production}isInRegions(){return this.router.url.includes("/regions/")}}var Ck=Zt({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{display:-webkit-box;display:flex;height:100%;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.entry[_ngcontent-%COMP%]{padding:0;margin:0;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:5%;text-align:center;border-bottom:2px solid #000;cursor:pointer;text-decoration:none;color:#000;font-size:1em}.entry2[_ngcontent-%COMP%]{padding:0;margin:0;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:10%;text-align:center;border:none;cursor:pointer;text-decoration:none;color:#000;font-size:1em}.entry3[_ngcontent-%COMP%]{padding:0;margin:0;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:50%;text-align:center;border-top:2px solid #000;cursor:pointer;text-decoration:none;color:#000;font-size:1em}.entry3[_ngcontent-%COMP%]:last-of-type{border-bottom:none}.entry[_ngcontent-%COMP%]:first-of-type{cursor:default}.empty[_ngcontent-%COMP%]{padding:0;margin:0;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:50%;text-align:center;text-decoration:none;color:#000;font-size:1em;cursor:default}.entry.active[_ngcontent-%COMP%], .entry3.active[_ngcontent-%COMP%]{background:var(--active-colour);text-decoration:none}.end[_ngcontent-%COMP%]{margin-top:auto;border:none}"]],data:{}});function Ik(e){return cs(0,[(e()(),Kr(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/regions"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==Ql(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),ci(1,671744,[[2,4]],0,Ug,[Fg,yd,Eo],{routerLink:[0,"routerLink"]},null),ci(2,1720320,null,2,Bg,[Fg,rt,ct,[2,Hg],[2,Ug]],{routerLinkActive:[0,"routerLinkActive"]},null),Zr(603979776,1,{links:1}),Zr(603979776,2,{linksWithHrefs:1}),(e()(),us(-1,null,["Village"]))],function(e,n){e(n,1,0,"/regions"),e(n,2,0,"active")},function(e,n){e(n,0,0,Ql(n,1).target,Ql(n,1).href)})}function yk(e){return cs(0,[(e()(),Kr(0,0,null,null,2,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/regions/village"]],[[2,"active",null],[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==Ql(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),ci(1,671744,null,0,Ug,[Fg,yd,Eo],{routerLink:[0,"routerLink"]},null),(e()(),us(-1,null,["Village"]))],function(e,n){e(n,1,0,"/regions/village")},function(e,n){e(n,0,0,!0,Ql(n,1).target,Ql(n,1).href)})}function _k(e){return cs(0,[(e()(),Kr(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/management"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==Ql(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),ci(1,671744,[[6,4]],0,Ug,[Fg,yd,Eo],{routerLink:[0,"routerLink"]},null),ci(2,1720320,null,2,Bg,[Fg,rt,ct,[2,Hg],[2,Ug]],{routerLinkActive:[0,"routerLinkActive"]},null),Zr(603979776,5,{links:1}),Zr(603979776,6,{linksWithHrefs:1}),(e()(),us(-1,null,["Management"]))],function(e,n){e(n,1,0,"/management"),e(n,2,0,"active")},function(e,n){e(n,0,0,Ql(n,1).target,Ql(n,1).href)})}function Ak(e){return cs(0,[(e()(),Kr(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/crafting"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==Ql(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),ci(1,671744,[[8,4]],0,Ug,[Fg,yd,Eo],{routerLink:[0,"routerLink"]},null),ci(2,1720320,null,2,Bg,[Fg,rt,ct,[2,Hg],[2,Ug]],{routerLinkActive:[0,"routerLinkActive"]},null),Zr(603979776,7,{links:1}),Zr(603979776,8,{linksWithHrefs:1}),(e()(),us(-1,null,["Crafting"]))],function(e,n){e(n,1,0,"/crafting"),e(n,2,0,"active")},function(e,n){e(n,0,0,Ql(n,1).target,Ql(n,1).href)})}function wk(e){return cs(0,[(e()(),Kr(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/research"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==Ql(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),ci(1,671744,[[10,4]],0,Ug,[Fg,yd,Eo],{routerLink:[0,"routerLink"]},null),ci(2,1720320,null,2,Bg,[Fg,rt,ct,[2,Hg],[2,Ug]],{routerLinkActive:[0,"routerLinkActive"]},null),Zr(603979776,9,{links:1}),Zr(603979776,10,{linksWithHrefs:1}),(e()(),us(-1,null,["Research"]))],function(e,n){e(n,1,0,"/research"),e(n,2,0,"active")},function(e,n){e(n,0,0,Ql(n,1).target,Ql(n,1).href)})}function Nk(e){return cs(0,[(e()(),Kr(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/market"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==Ql(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),ci(1,671744,[[12,4]],0,Ug,[Fg,yd,Eo],{routerLink:[0,"routerLink"]},null),ci(2,1720320,null,2,Bg,[Fg,rt,ct,[2,Hg],[2,Ug]],{routerLinkActive:[0,"routerLinkActive"]},null),Zr(603979776,11,{links:1}),Zr(603979776,12,{linksWithHrefs:1}),(e()(),us(-1,null,["Market"]))],function(e,n){e(n,1,0,"/market"),e(n,2,0,"active")},function(e,n){e(n,0,0,Ql(n,1).target,Ql(n,1).href)})}function Pk(e){return cs(0,[(e()(),Kr(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/army"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==Ql(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),ci(1,671744,[[14,4]],0,Ug,[Fg,yd,Eo],{routerLink:[0,"routerLink"]},null),ci(2,1720320,null,2,Bg,[Fg,rt,ct,[2,Hg],[2,Ug]],{routerLinkActive:[0,"routerLinkActive"]},null),Zr(603979776,13,{links:1}),Zr(603979776,14,{linksWithHrefs:1}),(e()(),us(-1,null,["Army"]))],function(e,n){e(n,1,0,"/army"),e(n,2,0,"active")},function(e,n){e(n,0,0,Ql(n,1).target,Ql(n,1).href)})}function kk(e){return cs(0,[(e()(),Kr(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/religion"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==Ql(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),ci(1,671744,[[16,4]],0,Ug,[Fg,yd,Eo],{routerLink:[0,"routerLink"]},null),ci(2,1720320,null,2,Bg,[Fg,rt,ct,[2,Hg],[2,Ug]],{routerLinkActive:[0,"routerLinkActive"]},null),Zr(603979776,15,{links:1}),Zr(603979776,16,{linksWithHrefs:1}),(e()(),us(-1,null,["Religion"]))],function(e,n){e(n,1,0,"/religion"),e(n,2,0,"active")},function(e,n){e(n,0,0,Ql(n,1).target,Ql(n,1).href)})}function xk(e){return cs(0,[(e()(),Kr(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/weather"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==Ql(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),ci(1,671744,[[18,4]],0,Ug,[Fg,yd,Eo],{routerLink:[0,"routerLink"]},null),ci(2,1720320,null,2,Bg,[Fg,rt,ct,[2,Hg],[2,Ug]],{routerLinkActive:[0,"routerLinkActive"]},null),Zr(603979776,17,{links:1}),Zr(603979776,18,{linksWithHrefs:1}),(e()(),us(-1,null,["Weather"]))],function(e,n){e(n,1,0,"/weather"),e(n,2,0,"active")},function(e,n){e(n,0,0,Ql(n,1).target,Ql(n,1).href)})}function Mk(e){return cs(0,[(e()(),Kr(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/world"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==Ql(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),ci(1,671744,[[20,4]],0,Ug,[Fg,yd,Eo],{routerLink:[0,"routerLink"]},null),ci(2,1720320,null,2,Bg,[Fg,rt,ct,[2,Hg],[2,Ug]],{routerLinkActive:[0,"routerLinkActive"]},null),Zr(603979776,19,{links:1}),Zr(603979776,20,{linksWithHrefs:1}),(e()(),us(-1,null,["World Map"]))],function(e,n){e(n,1,0,"/world"),e(n,2,0,"active")},function(e,n){e(n,0,0,Ql(n,1).target,Ql(n,1).href)})}function Dk(e){return cs(0,[(e()(),Kr(0,0,null,null,5,"a",[["class","entry3"],["draggable","false"],["ondragstart","return false;"],["routerLink","/heritage"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==Ql(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),ci(1,671744,[[22,4]],0,Ug,[Fg,yd,Eo],{routerLink:[0,"routerLink"]},null),ci(2,1720320,null,2,Bg,[Fg,rt,ct,[2,Hg],[2,Ug]],{routerLinkActive:[0,"routerLinkActive"]},null),Zr(603979776,21,{links:1}),Zr(603979776,22,{linksWithHrefs:1}),(e()(),us(-1,null,["Heritage"]))],function(e,n){e(n,1,0,"/heritage"),e(n,2,0,"active")},function(e,n){e(n,0,0,Ql(n,1).target,Ql(n,1).href)})}function Lk(e){return cs(0,[(e()(),Kr(0,0,null,null,0,"a",[["class","empty"],["draggable","false"],["ondragstart","return false;"]],null,null,null,null,null))],null,null)}function Fk(e){return cs(0,[(e()(),Kr(0,0,null,null,38,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,0,"a",[["class","entry"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,Ik)),ci(3,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,yk)),ci(5,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(6,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/resources"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==Ql(e,7).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),ci(7,671744,[[4,4]],0,Ug,[Fg,yd,Eo],{routerLink:[0,"routerLink"]},null),ci(8,1720320,null,2,Bg,[Fg,rt,ct,[2,Hg],[2,Ug]],{routerLinkActive:[0,"routerLinkActive"]},null),Zr(603979776,3,{links:1}),Zr(603979776,4,{linksWithHrefs:1}),(e()(),us(-1,null,["Resources"])),(e()(),$r(16777216,null,null,1,null,_k)),ci(13,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,Ak)),ci(15,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,wk)),ci(17,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,Nk)),ci(19,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,Pk)),ci(21,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,kk)),ci(23,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,xk)),ci(25,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,Mk)),ci(27,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(28,0,null,null,10,"div",[["class","entry2 end"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,Dk)),ci(30,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,Lk)),ci(32,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(33,0,null,null,5,"a",[["class","entry3"],["draggable","false"],["ondragstart","return false;"],["routerLink","/royal"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==Ql(e,34).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),ci(34,671744,[[24,4]],0,Ug,[Fg,yd,Eo],{routerLink:[0,"routerLink"]},null),ci(35,1720320,null,2,Bg,[Fg,rt,ct,[2,Hg],[2,Ug]],{routerLinkActive:[0,"routerLinkActive"]},null),Zr(603979776,23,{links:1}),Zr(603979776,24,{linksWithHrefs:1}),(e()(),us(-1,null,["Royal perks"]))],function(e,n){var t=n.component;e(n,3,0,!t.isInRegions()),e(n,5,0,t.isInRegions()),e(n,7,0,"/resources"),e(n,8,0,"active"),e(n,13,0,t.isManagementEnabled()),e(n,15,0,t.isCraftingEnabled()),e(n,17,0,t.isResearchEnabled()),e(n,19,0,t.isMarketEnabled()),e(n,21,0,t.isArmyEnabled()),e(n,23,0,t.isReligionEnabled()),e(n,25,0,t.isWeatherEnabled()),e(n,27,0,t.isCartographyEnabled()),e(n,30,0,t.isHeritageUnlocked()),e(n,32,0,!t.isHeritageUnlocked()),e(n,34,0,"/royal"),e(n,35,0,"active")},function(e,n){e(n,6,0,Ql(n,7).target,Ql(n,7).href),e(n,33,0,Ql(n,34).target,Ql(n,34).href)})}class Hk{constructor(e,n,t){this.logService=e,this.changeDetectorRef=n,this.modalService=t,this.entries=[],this.logEntryTypes=Fm}ngOnInit(){this.logService.registerForLogs().subscribe(()=>{this.entries=this.logService.getEntries(),this.scrollToBottom()}),this.entries=this.logService.getEntries(),this.scrollToBottom()}clearLogs(){this.logService.clearEntries()}scrollToBottom(){const e=this.scrollRef.nativeElement,n=e.scrollHeight-e.clientHeight<=e.scrollTop+25;this.changeDetectorRef.destroyed||this.changeDetectorRef.detectChanges(),n&&(e.scrollTop=e.scrollHeight)}showFightReport(e){this.modalService.open(Lu.FIGHT_REPORT),this.modalService.setFightReport(e)}}var Uk=Zt({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:100%;max-height:100%}#clear-button[_ngcontent-%COMP%]{float:right}#log[_ngcontent-%COMP%]{height:100%;overflow-y:scroll;font-size:.8em}.title[_ngcontent-%COMP%]{border-bottom:1px solid #000;text-align:center;font-weight:700;font-size:1.1em}#title-text[_ngcontent-%COMP%]{display:inline-block;margin-left:20px;margin-top:3px}ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}li[_ngcontent-%COMP%]{padding-left:.5%;padding-bottom:.4%}.date[_ngcontent-%COMP%]{font-weight:bolder}.warning[_ngcontent-%COMP%]{color:var(--negative-colour)}.success[_ngcontent-%COMP%]{color:var(--positive-colour)}.mystical[_ngcontent-%COMP%]{color:#00008b}#log[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:1px;margin-left:2px}"]],data:{}});function Gk(e){return cs(0,[(e()(),Kr(0,0,null,null,3,"span",[],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"span",[["class","date"]],null,null,null,null,null)),(e()(),us(2,null,["day ",":"])),(e()(),Kr(3,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.day),e(n,3,0," "+n.parent.context.$implicit.message)})}function Bk(e){return cs(0,[(e()(),Kr(0,0,null,null,3,"span",[["class","success"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"span",[["class","date"]],null,null,null,null,null)),(e()(),us(2,null,["day ",":"])),(e()(),Kr(3,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.day),e(n,3,0," "+n.parent.context.$implicit.message)})}function Wk(e){return cs(0,[(e()(),Kr(0,0,null,null,3,"span",[["class","warning"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"span",[["class","date"]],null,null,null,null,null)),(e()(),us(2,null,["day ",":"])),(e()(),Kr(3,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.day),e(n,3,0," "+n.parent.context.$implicit.message)})}function Vk(e){return cs(0,[(e()(),Kr(0,0,null,null,3,"span",[["class","mystical"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"span",[["class","date"]],null,null,null,null,null)),(e()(),us(2,null,["day ",":"])),(e()(),Kr(3,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.day),e(n,3,0," "+n.parent.context.$implicit.message)})}function zk(e){return cs(0,[(e()(),Kr(0,0,null,null,5,"span",[],null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"span",[["class","date"]],null,null,null,null,null)),(e()(),us(2,null,["day ",":"])),(e()(),Kr(3,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Kr(4,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.showFightReport(e.parent.context.$implicit.data)&&l),l},null,null)),(e()(),us(-1,null,["report"]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.day),e(n,3,0," "+n.parent.context.$implicit.message)})}function Yk(e){return cs(0,[(e()(),Kr(0,0,null,null,12,"li",[],null,null,null,null,null)),(e()(),Kr(1,0,null,null,11,"div",[],null,null,null,null,null)),ci(2,16384,null,0,Xo,[],{ngSwitch:[0,"ngSwitch"]},null),(e()(),$r(16777216,null,null,1,null,Gk)),ci(4,278528,null,0,Qo,[xt,Pt,Xo],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),$r(16777216,null,null,1,null,Bk)),ci(6,278528,null,0,Qo,[xt,Pt,Xo],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),$r(16777216,null,null,1,null,Wk)),ci(8,278528,null,0,Qo,[xt,Pt,Xo],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),$r(16777216,null,null,1,null,Vk)),ci(10,278528,null,0,Qo,[xt,Pt,Xo],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),$r(16777216,null,null,1,null,zk)),ci(12,278528,null,0,Qo,[xt,Pt,Xo],{ngSwitchCase:[0,"ngSwitchCase"]},null)],function(e,n){var t=n.component;e(n,2,0,n.context.$implicit.type),e(n,4,0,t.logEntryTypes.LOG),e(n,6,0,t.logEntryTypes.SUCCESS),e(n,8,0,t.logEntryTypes.WARNING),e(n,10,0,t.logEntryTypes.MYSTICAL),e(n,12,0,t.logEntryTypes.FIGHT_REPORT)},null)}function $k(e){return cs(0,[Zr(402653184,1,{scrollRef:0}),(e()(),Kr(1,0,null,null,9,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Kr(2,0,null,null,4,"div",[["class","title"]],null,null,null,null,null)),(e()(),Kr(3,0,null,null,1,"span",[["id","title-text"]],null,null,null,null,null)),(e()(),us(-1,null,["Log"])),(e()(),Kr(5,0,null,null,1,"button",[["id","clear-button"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.clearLogs()&&l),l},null,null)),(e()(),us(-1,null,["clear"])),(e()(),Kr(7,0,[[1,0],["scroll",1]],null,3,"div",[["id","log"]],null,null,null,null,null)),(e()(),Kr(8,0,null,null,2,"ul",[],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,Yk)),ci(10,278528,null,0,zo,[xt,Pt,Ct],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,10,0,n.component.entries)},null)}class Kk{constructor(e,n,t){this.gameService=e,this.tickerService=n,this.optionsService=t,this.gameName=zu.gameName,this.version=zu.versionString}ngOnInit(){}showDevNotes(){this.gameService.showDevNotes()}getSound(){return this.optionsService.getOption(Dm.SOUND)}toggleSound(){this.optionsService.setOption(Dm.SOUND,!this.optionsService.getOption(Dm.SOUND))}isPaused(){return this.tickerService.isPaused()}pause(){this.tickerService.pause()}resume(){this.tickerService.resume()}}var jk=Zt({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:100%;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;font-size:1.2em}.first[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 4%;height:30px}.second[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 0 4%;height:30px;-webkit-box-align:center;align-items:center;vertical-align:center}.second[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:24px}#center[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 84%;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center}#wiki[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 0 4%;-webkit-box-pack:end;justify-content:flex-end;margin-top:5px}a[_ngcontent-%COMP%]{text-decoration:none;color:#000}#dev[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 0 4%;height:30px;-webkit-box-pack:end;justify-content:flex-end}img[_ngcontent-%COMP%]{width:30px;cursor:pointer}"]],data:{}});function qk(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[["class","first"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/sound_on.svg"],["title","turn off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleSound()&&l),l},null,null))],null,null)}function Xk(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[["class","first"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/sound_off.svg"],["title","turn on"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleSound()&&l),l},null,null))],null,null)}function Qk(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[["class","second"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/pause2.svg"],["title","pause"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.pause()&&l),l},null,null))],null,null)}function Zk(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"span",[["class","second"]],null,null,null,null,null)),(e()(),Kr(1,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/play.svg"],["title","play"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.resume()&&l),l},null,null))],null,null)}function Jk(e){return cs(0,[(e()(),Kr(0,0,null,null,16,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),$r(16777216,null,null,1,null,qk)),ci(2,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,Xk)),ci(4,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,Qk)),ci(6,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,Zk)),ci(8,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),Kr(9,0,null,null,2,"div",[["id","center"]],null,null,null,null,null)),(e()(),Kr(10,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),us(11,null,[""," v",""])),(e()(),Kr(12,0,null,null,2,"span",[["id","wiki"]],null,null,null,null,null)),(e()(),Kr(13,0,null,null,1,"a",[["href","http://wiki.villagerkings.com"],["rel","noopener noreferrer"],["target","_blank"]],null,null,null,null,null)),(e()(),us(-1,null,["wiki"])),(e()(),Kr(15,0,null,null,1,"span",[["id","dev"]],null,null,null,null,null)),(e()(),Kr(16,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/dev.svg"],["title","dev notes"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.showDevNotes()&&l),l},null,null))],function(e,n){var t=n.component;e(n,2,0,t.getSound()),e(n,4,0,!t.getSound()),e(n,6,0,!t.isPaused()),e(n,8,0,t.isPaused())},function(e,n){var t=n.component;e(n,11,0,t.gameName,t.version)})}class ex{constructor(e,n,t,l,i,r,s,u,o,a,c,h,d,g,p,m){this.gameService=e,this.randomService=n,this.optionsService=t,this.tickerService=l,this.serializerService=i,this.resourceService=r,this.techService=s,this.logService=u,this.seaService=o,this.mountainsService=a,this.fortService=c,this.forestService=h,this.fieldService=d,this.managementService=g,this.villageService=p,this.router=m,e.registerForHeaderRowsChange().subscribe(e=>{e&&this.wrapperRef?this.wrapperRef.nativeElement.style.gridTemplateRows="8% auto 4%":!e&&this.wrapperRef&&(this.wrapperRef.nativeElement.style.gridTemplateRows="4% auto 4%")})}ngOnInit(){this.serializerService.hasSave()?this.serializerService.initLoad():this.initGame(),this.managementService.getSecondHeaderRow()&&this.wrapperRef&&(this.wrapperRef.nativeElement.style.gridTemplateRows="8% auto 4%"),this.tickerService.start(),this.optionsService.getOption(Dm.PAUSE_ON_INIT)&&(this.logService.warning("Game paused on start (settings option)"),this.tickerService.pause())}initGame(){this.gameService.init(),this.optionsService.init(),this.resourceService.init(),this.villageService.init(),this.fortService.init(),this.forestService.init(),this.fieldService.init(),this.mountainsService.init(),this.seaService.init()}exitSave(e){this.serializerService.initSave()}pause(e){if("VillagerKings"===e.target.id)switch(e.key){case"p":"VillagerKings"===e.target.id&&(this.tickerService.isPaused()?this.tickerService.resume():this.tickerService.pause());break;case"m":this.gameService.isEnabled(bu.CARTOGRAPHY)&&this.router.navigate(["/world"])}}}var nx=Zt({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{position:relative;display:grid;height:100%;max-height:100%;grid-template-columns:11% auto 20%;grid-template-rows:4% auto 4%;border:1px solid #000;background:var(--background-clour);background-image:url(old_parchment.85c5af81bf778b941dfc.jpg);background-size:100% 100%}#footer[_ngcontent-%COMP%], #header[_ngcontent-%COMP%]{grid-column-start:1;grid-column-end:4;border:1px solid #000;overflow:hidden}#left-menu[_ngcontent-%COMP%]{grid-column-start:1;grid-column-end:2;border:1px solid #000;overflow:hidden}#center[_ngcontent-%COMP%]{grid-column-start:2;grid-column-end:3;border:1px solid #000;overflow:hidden}#screen[_ngcontent-%COMP%]{height:100%}#right-menu[_ngcontent-%COMP%]{grid-column-start:3;grid-column-end:4;border:1px solid #000;overflow:hidden}.asset[_ngcontent-%COMP%]{display:none}"]],data:{}});function tx(e){return cs(0,[Zr(402653184,1,{wrapperRef:0}),(e()(),Kr(1,0,[[1,0],["wrap",1]],null,129,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Kr(2,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/buff.svg"]],null,null,null,null,null)),(e()(),Kr(3,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/complex_management_off_off.svg"]],null,null,null,null,null)),(e()(),Kr(4,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/complex_management_off_on.svg"]],null,null,null,null,null)),(e()(),Kr(5,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/complex_management_on_off.svg"]],null,null,null,null,null)),(e()(),Kr(6,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/complex_management_on_on.svg"]],null,null,null,null,null)),(e()(),Kr(7,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/details.svg"]],null,null,null,null,null)),(e()(),Kr(8,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/dev.svg"]],null,null,null,null,null)),(e()(),Kr(9,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/eye.svg"]],null,null,null,null,null)),(e()(),Kr(10,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/foresight.svg"]],null,null,null,null,null)),(e()(),Kr(11,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/forest.svg"]],null,null,null,null,null)),(e()(),Kr(12,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/gear.svg"]],null,null,null,null,null)),(e()(),Kr(13,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/gear_off.svg"]],null,null,null,null,null)),(e()(),Kr(14,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/hammer.svg"]],null,null,null,null,null)),(e()(),Kr(15,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/kred.png"]],null,null,null,null,null)),(e()(),Kr(16,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/land.svg"]],null,null,null,null,null)),(e()(),Kr(17,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/manage.svg"]],null,null,null,null,null)),(e()(),Kr(18,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/mountains.svg"]],null,null,null,null,null)),(e()(),Kr(19,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/pause.svg"]],null,null,null,null,null)),(e()(),Kr(20,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/pause2.svg"]],null,null,null,null,null)),(e()(),Kr(21,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/play.svg"]],null,null,null,null,null)),(e()(),Kr(22,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/population.svg"]],null,null,null,null,null)),(e()(),Kr(23,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/question_mark.svg"]],null,null,null,null,null)),(e()(),Kr(24,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/settings.svg"]],null,null,null,null,null)),(e()(),Kr(25,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/sound_off.svg"]],null,null,null,null,null)),(e()(),Kr(26,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/sound_on.svg"]],null,null,null,null,null)),(e()(),Kr(27,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/stop.svg"]],null,null,null,null,null)),(e()(),Kr(28,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/tick.svg"]],null,null,null,null,null)),(e()(),Kr(29,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/time.svg"]],null,null,null,null,null)),(e()(),Kr(30,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/trade.svg"]],null,null,null,null,null)),(e()(),Kr(31,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/upgrade.svg"]],null,null,null,null,null)),(e()(),Kr(32,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/village.svg"]],null,null,null,null,null)),(e()(),Kr(33,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/religion/faith.svg"]],null,null,null,null,null)),(e()(),Kr(34,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/religion/faith_shield.svg"]],null,null,null,null,null)),(e()(),Kr(35,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/weather/clouds.svg"]],null,null,null,null,null)),(e()(),Kr(36,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/weather/rain.svg"]],null,null,null,null,null)),(e()(),Kr(37,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/weather/snow.svg"]],null,null,null,null,null)),(e()(),Kr(38,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/weather/storm.svg"]],null,null,null,null,null)),(e()(),Kr(39,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/weather/sun.svg"]],null,null,null,null,null)),(e()(),Kr(40,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/weather/wind.svg"]],null,null,null,null,null)),(e()(),Kr(41,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/army/attack.svg"]],null,null,null,null,null)),(e()(),Kr(42,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/army/barracks.svg"]],null,null,null,null,null)),(e()(),Kr(43,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/army/defense.svg"]],null,null,null,null,null)),(e()(),Kr(44,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/army/invasion.svg"]],null,null,null,null,null)),(e()(),Kr(45,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/army/recruit.svg"]],null,null,null,null,null)),(e()(),Kr(46,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/happiness/angry.svg"]],null,null,null,null,null)),(e()(),Kr(47,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/happiness/happy.svg"]],null,null,null,null,null)),(e()(),Kr(48,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/happiness/neutral.svg"]],null,null,null,null,null)),(e()(),Kr(49,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/happiness/overjoyed.svg"]],null,null,null,null,null)),(e()(),Kr(50,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/happiness/sad.svg"]],null,null,null,null,null)),(e()(),Kr(51,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/apple.svg"]],null,null,null,null,null)),(e()(),Kr(52,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/barley.svg"]],null,null,null,null,null)),(e()(),Kr(53,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/beer.svg"]],null,null,null,null,null)),(e()(),Kr(54,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/berry.svg"]],null,null,null,null,null)),(e()(),Kr(55,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/bow.svg"]],null,null,null,null,null)),(e()(),Kr(56,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/bread.svg"]],null,null,null,null,null)),(e()(),Kr(57,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/bronze.svg"]],null,null,null,null,null)),(e()(),Kr(58,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/brushwood.svg"]],null,null,null,null,null)),(e()(),Kr(59,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/cheese.svg"]],null,null,null,null,null)),(e()(),Kr(60,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/chicken.svg"]],null,null,null,null,null)),(e()(),Kr(61,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/clothes.svg"]],null,null,null,null,null)),(e()(),Kr(62,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/coal.svg"]],null,null,null,null,null)),(e()(),Kr(63,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/coins.svg"]],null,null,null,null,null)),(e()(),Kr(64,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/cooked_fish.svg"]],null,null,null,null,null)),(e()(),Kr(65,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/cooked_meat.svg"]],null,null,null,null,null)),(e()(),Kr(66,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/copper.svg"]],null,null,null,null,null)),(e()(),Kr(67,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/copper_ore.svg"]],null,null,null,null,null)),(e()(),Kr(68,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/cotton.svg"]],null,null,null,null,null)),(e()(),Kr(69,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/cow.svg"]],null,null,null,null,null)),(e()(),Kr(70,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/cut_stone.svg"]],null,null,null,null,null)),(e()(),Kr(71,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/egg.svg"]],null,null,null,null,null)),(e()(),Kr(72,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/fabric.svg"]],null,null,null,null,null)),(e()(),Kr(73,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/fish.svg"]],null,null,null,null,null)),(e()(),Kr(74,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/flour.svg"]],null,null,null,null,null)),(e()(),Kr(75,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/food.svg"]],null,null,null,null,null)),(e()(),Kr(76,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/fuel.svg"]],null,null,null,null,null)),(e()(),Kr(77,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/fur.svg"]],null,null,null,null,null)),(e()(),Kr(78,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/gold.svg"]],null,null,null,null,null)),(e()(),Kr(79,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/gold_ore.svg"]],null,null,null,null,null)),(e()(),Kr(80,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/grape.svg"]],null,null,null,null,null)),(e()(),Kr(81,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/hay.svg"]],null,null,null,null,null)),(e()(),Kr(82,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/hop.svg"]],null,null,null,null,null)),(e()(),Kr(83,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/horse.svg"]],null,null,null,null,null)),(e()(),Kr(84,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/iron.svg"]],null,null,null,null,null)),(e()(),Kr(85,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/iron_ore.svg"]],null,null,null,null,null)),(e()(),Kr(86,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/leather.svg"]],null,null,null,null,null)),(e()(),Kr(87,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/leather_armor.svg"]],null,null,null,null,null)),(e()(),Kr(88,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/light_armor.svg"]],null,null,null,null,null)),(e()(),Kr(89,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/heavy_armor.svg"]],null,null,null,null,null)),(e()(),Kr(90,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/log.svg"]],null,null,null,null,null)),(e()(),Kr(91,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/meat.svg"]],null,null,null,null,null)),(e()(),Kr(92,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/meat_soup.svg"]],null,null,null,null,null)),(e()(),Kr(93,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/milk.svg"]],null,null,null,null,null)),(e()(),Kr(94,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/mushroom.svg"]],null,null,null,null,null)),(e()(),Kr(95,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/pig.svg"]],null,null,null,null,null)),(e()(),Kr(96,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/plank.svg"]],null,null,null,null,null)),(e()(),Kr(97,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/sheep.svg"]],null,null,null,null,null)),(e()(),Kr(98,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/silver.svg"]],null,null,null,null,null)),(e()(),Kr(99,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/silver_ore.svg"]],null,null,null,null,null)),(e()(),Kr(100,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/steel.svg"]],null,null,null,null,null)),(e()(),Kr(101,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/stone.svg"]],null,null,null,null,null)),(e()(),Kr(102,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/stone_axe.svg"]],null,null,null,null,null)),(e()(),Kr(103,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/stone_hammer.svg"]],null,null,null,null,null)),(e()(),Kr(104,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/stone_pickaxe.svg"]],null,null,null,null,null)),(e()(),Kr(105,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/stone_shovel.svg"]],null,null,null,null,null)),(e()(),Kr(106,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/stone_spear.svg"]],null,null,null,null,null)),(e()(),Kr(107,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/sword.svg"]],null,null,null,null,null)),(e()(),Kr(108,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/tin.svg"]],null,null,null,null,null)),(e()(),Kr(109,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/tin_ore.svg"]],null,null,null,null,null)),(e()(),Kr(110,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/vegetable_soup.svg"]],null,null,null,null,null)),(e()(),Kr(111,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/wheat.svg"]],null,null,null,null,null)),(e()(),Kr(112,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/wine.svg"]],null,null,null,null,null)),(e()(),Kr(113,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/wooden_shield.svg"]],null,null,null,null,null)),(e()(),Kr(114,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/wool.svg"]],null,null,null,null,null)),(e()(),Kr(115,0,null,null,2,"div",[["id","header"]],null,null,null,null,null)),(e()(),Kr(116,0,null,null,1,"app-header",[],null,null,null,Rk,mP)),ci(117,114688,null,0,pP,[VA,Mm,Bm,Vm,Jm,BO,Lm,Ym,WA,zm,lb,vO,Wv],null,null),(e()(),Kr(118,0,null,null,2,"div",[["id","left-menu"]],null,null,null,null,null)),(e()(),Kr(119,0,null,null,1,"app-left-menu",[],null,null,null,Fk,Ck)),ci(120,114688,null,0,Tk,[Ym,Fg],null,null),(e()(),Kr(121,0,null,null,3,"div",[["id","center"]],null,null,null,null,null)),(e()(),Kr(122,0,null,null,2,"div",[["id","screen"]],null,null,null,null,null)),(e()(),Kr(123,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),ci(124,212992,null,0,zg,[Vg,xt,Jn,[8,null],yt],null,null),(e()(),Kr(125,0,null,null,2,"div",[["id","right-menu"]],null,null,null,null,null)),(e()(),Kr(126,0,null,null,1,"app-log",[],null,null,null,$k,Uk)),ci(127,114688,null,0,Hk,[Bm,yt,Vm],null,null),(e()(),Kr(128,0,null,null,2,"div",[["id","footer"]],null,null,null,null,null)),(e()(),Kr(129,0,null,null,1,"app-footer",[],null,null,null,Jk,jk)),ci(130,114688,null,0,Kk,[Ym,WA,Lm],null,null)],function(e,n){e(n,117,0),e(n,120,0),e(n,124,0),e(n,127,0),e(n,130,0)},null)}var lx=Zt({encapsulation:0,styles:[["#IEwrapper[_ngcontent-%COMP%]{border:1px solid #000;background:#919191;font-size:3em;height:100%;max-height:100%;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center}#IEwrapper[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center}"]],data:{}});function ix(e){return cs(0,[(e()(),Kr(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),Kr(1,0,null,null,1,"app-modals",[],null,null,null,cP,aP)),ci(2,114688,null,0,oP,[],null,null),(e()(),Kr(3,0,null,null,1,"app-game",[],null,[["window","beforeunload"],["document","keydown"]],function(e,n,t){var l=!0;return"window:beforeunload"===n&&(l=!1!==Ql(e,4).exitSave(t)&&l),"document:keydown"===n&&(l=!1!==Ql(e,4).pause(t)&&l),l},tx,nx)),ci(4,114688,null,0,ex,[Ym,Fu,Lm,WA,VA,Jm,lb,Bm,g_,yy,eO,HI,sy,Wv,sv,Fg],null,null)],function(e,n){e(n,2,0),e(n,4,0)},null)}function rx(e){return cs(0,[(e()(),Kr(0,0,null,null,7,null,null,null,null,null,null,null)),(e()(),Kr(1,0,null,null,6,"div",[["id","IEwrapper"]],null,null,null,null,null)),(e()(),Kr(2,0,null,null,5,"span",[],null,null,null,null,null)),(e()(),us(-1,null,["Internet Explorer is not supported."])),(e()(),Kr(4,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),us(-1,null,["Please use Firefox, Chrome, Safari"])),(e()(),Kr(6,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),us(-1,null,["or Edge."]))],null,null)}function sx(e){return cs(0,[(e()(),$r(16777216,null,null,1,null,ix)),ci(1,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null),(e()(),$r(16777216,null,null,1,null,rx)),ci(3,16384,null,0,$o,[xt,Pt],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,!t.isIE()),e(n,3,0,t.isIE())},null)}function ux(e){return cs(0,[(e()(),Kr(0,0,null,null,1,"app-root",[],null,[["document","contextmenu"]],function(e,n,t){var l=!0;return"document:contextmenu"===n&&(l=!1!==Ql(e,1).catchContextMenu(t)&&l),l},sx,lx)),ci(1,49152,null,0,mo,[],null,null)],null,null)}var ox=Gl("app-root",mo,ux,{},{},[]);class ax{}class cx{}const hx="*";function dx(e,n=null){return{type:2,steps:e,options:n}}function gx(e){return{type:6,styles:e,offset:null}}function px(e){Promise.resolve(null).then(e)}class mx{constructor(e=0,n=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=e+n}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){px(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){}setPosition(e){}getPosition(){return 0}triggerCallback(e){const n="start"==e?this._onStartFns:this._onDoneFns;n.forEach(e=>e()),n.length=0}}class fx{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let n=0,t=0,l=0;const i=this.players.length;0==i?px(()=>this._onFinish()):this.players.forEach(e=>{e.onDone(()=>{++n==i&&this._onFinish()}),e.onDestroy(()=>{++t==i&&this._onDestroy()}),e.onStart(()=>{++l==i&&this._onStart()})}),this.totalTime=this.players.reduce((e,n)=>Math.max(e,n.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const n=e*this.totalTime;this.players.forEach(e=>{const t=e.totalTime?Math.min(1,n/e.totalTime):1;e.setPosition(t)})}getPosition(){let e=0;return this.players.forEach(n=>{const t=n.getPosition();e=Math.min(t,e)}),e}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const n="start"==e?this._onStartFns:this._onDoneFns;n.forEach(e=>e()),n.length=0}}const Sx="!";function Ex(){return"undefined"!=typeof process}function vx(e){switch(e.length){case 0:return new mx;case 1:return e[0];default:return new fx(e)}}function bx(e,n,t,l,i={},r={}){const s=[],u=[];let o=-1,a=null;if(l.forEach(e=>{const t=e.offset,l=t==o,c=l&&a||{};Object.keys(e).forEach(t=>{let l=t,u=e[t];if("offset"!==t)switch(l=n.normalizePropertyName(l,s),u){case Sx:u=i[t];break;case hx:u=r[t];break;default:u=n.normalizeStyleValue(t,l,u,s)}c[l]=u}),l||u.push(c),a=c,o=t}),s.length){const e="\n - ";throw new Error(`Unable to animate due to the following errors:${e}${s.join(e)}`)}return u}function Ox(e,n,t,l){switch(n){case"start":e.onStart(()=>l(t&&Rx(t,"start",e)));break;case"done":e.onDone(()=>l(t&&Rx(t,"done",e)));break;case"destroy":e.onDestroy(()=>l(t&&Rx(t,"destroy",e)))}}function Rx(e,n,t){const l=t.totalTime,i=Tx(e.element,e.triggerName,e.fromState,e.toState,n||e.phaseName,null==l?e.totalTime:l,!!t.disabled),r=e._data;return null!=r&&(i._data=r),i}function Tx(e,n,t,l,i="",r=0,s){return{element:e,triggerName:n,fromState:t,toState:l,phaseName:i,totalTime:r,disabled:!!s}}function Cx(e,n,t){let l;return e instanceof Map?(l=e.get(n))||e.set(n,l=t):(l=e[n])||(l=e[n]=t),l}function Ix(e){const n=e.indexOf(":");return[e.substring(1,n),e.substr(n+1)]}let yx=(e,n)=>!1,_x=(e,n)=>!1,Ax=(e,n,t)=>[];const wx=Ex();(wx||"undefined"!=typeof Element)&&(yx=(e,n)=>e.contains(n),_x=(()=>{if(wx||Element.prototype.matches)return(e,n)=>e.matches(n);{const e=Element.prototype,n=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;return n?(e,t)=>n.apply(e,[t]):_x}})(),Ax=(e,n,t)=>{let l=[];if(t)l.push(...e.querySelectorAll(n));else{const t=e.querySelector(n);t&&l.push(t)}return l});let Nx=null,Px=!1;const kx=_x,xx=yx,Mx=Ax,Dx=(()=>(class{validateStyleProperty(e){return function(e){Nx||(Nx=("undefined"!=typeof document?document.body:null)||{},Px=!!Nx.style&&"WebkitAppearance"in Nx.style);let n=!0;return Nx.style&&!function(e){return"ebkit"==e.substring(1,6)}(e)&&!(n=e in Nx.style)&&Px&&(n="Webkit"+e.charAt(0).toUpperCase()+e.substr(1)in Nx.style),n}(e)}matchesElement(e,n){return kx(e,n)}containsElement(e,n){return xx(e,n)}query(e,n,t){return Mx(e,n,t)}computeStyle(e,n,t){return t||""}animate(e,n,t,l,i,r=[],s){return new mx(t,l)}}))(),Lx=(()=>{class e{}return e.NOOP=new Dx,e})(),Fx=1e3,Hx="{{",Ux="ng-enter",Gx="ng-leave",Bx="ng-trigger",Wx=".ng-trigger",Vx="ng-animating",zx=".ng-animating";function Yx(e){if("number"==typeof e)return e;const n=e.match(/^(-?[\.\d]+)(m?s)/);return!n||n.length<2?0:$x(parseFloat(n[1]),n[2])}function $x(e,n){switch(n){case"s":return e*Fx;default:return e}}function Kx(e,n,t){return e.hasOwnProperty("duration")?e:function(e,n,t){let l,i=0,r="";if("string"==typeof e){const t=e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===t)return n.push(`The provided timing value "${e}" is invalid.`),{duration:0,delay:0,easing:""};l=$x(parseFloat(t[1]),t[2]);const s=t[3];null!=s&&(i=$x(parseFloat(s),t[4]));const u=t[5];u&&(r=u)}else l=e;if(!t){let t=!1,r=n.length;l<0&&(n.push("Duration values below 0 are not allowed for this animation step."),t=!0),i<0&&(n.push("Delay values below 0 are not allowed for this animation step."),t=!0),t&&n.splice(r,0,`The provided timing value "${e}" is invalid.`)}return{duration:l,delay:i,easing:r}}(e,n,t)}function jx(e,n={}){return Object.keys(e).forEach(t=>{n[t]=e[t]}),n}function qx(e,n,t={}){if(n)for(let l in e)t[l]=e[l];else jx(e,t);return t}function Xx(e,n,t){return t?n+":"+t+";":""}function Qx(e){let n="";for(let t=0;t<e.style.length;t++){const l=e.style.item(t);n+=Xx(0,l,e.style.getPropertyValue(l))}for(const t in e.style)e.style.hasOwnProperty(t)&&!t.startsWith("_")&&(n+=Xx(0,t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),e.style[t]));e.setAttribute("style",n)}function Zx(e,n,t){e.style&&(Object.keys(n).forEach(l=>{const i=sM(l);t&&!t.hasOwnProperty(l)&&(t[l]=e.style[i]),e.style[i]=n[l]}),Ex()&&Qx(e))}function Jx(e,n){e.style&&(Object.keys(n).forEach(n=>{const t=sM(n);e.style[t]=""}),Ex()&&Qx(e))}function eM(e){return Array.isArray(e)?1==e.length?e[0]:dx(e):e}const nM=new RegExp(`${Hx}\\s*(.+?)\\s*}}`,"g");function tM(e){let n=[];if("string"==typeof e){const t=e.toString();let l;for(;l=nM.exec(t);)n.push(l[1]);nM.lastIndex=0}return n}function lM(e,n,t){const l=e.toString(),i=l.replace(nM,(e,l)=>{let i=n[l];return n.hasOwnProperty(l)||(t.push(`Please provide a value for the animation param ${l}`),i=""),i.toString()});return i==l?e:i}function iM(e){const n=[];let t=e.next();for(;!t.done;)n.push(t.value),t=e.next();return n}const rM=/-+([a-z0-9])/g;function sM(e){return e.replace(rM,(...e)=>e[1].toUpperCase())}function uM(e,n,t){switch(n.type){case 7:return e.visitTrigger(n,t);case 0:return e.visitState(n,t);case 1:return e.visitTransition(n,t);case 2:return e.visitSequence(n,t);case 3:return e.visitGroup(n,t);case 4:return e.visitAnimate(n,t);case 5:return e.visitKeyframes(n,t);case 6:return e.visitStyle(n,t);case 8:return e.visitReference(n,t);case 9:return e.visitAnimateChild(n,t);case 10:return e.visitAnimateRef(n,t);case 11:return e.visitQuery(n,t);case 12:return e.visitStagger(n,t);default:throw new Error(`Unable to resolve animation metadata node #${n.type}`)}}const oM="*";function aM(e,n){const t=[];return"string"==typeof e?e.split(/\s*,\s*/).forEach(e=>(function(e,n,t){if(":"==e[0]){const l=function(e,n){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,n)=>parseFloat(n)>parseFloat(e);case":decrement":return(e,n)=>parseFloat(n)<parseFloat(e);default:return n.push(`The transition alias value "${e}" is not supported`),"* => *"}}(e,t);if("function"==typeof l)return void n.push(l);e=l}const l=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==l||l.length<4)return t.push(`The provided transition expression "${e}" is not supported`),n;const i=l[1],r=l[2],s=l[3];n.push(dM(i,s)),"<"!=r[0]||i==oM&&s==oM||n.push(dM(s,i))})(e,t,n)):t.push(e),t}const cM=new Set(["true","1"]),hM=new Set(["false","0"]);function dM(e,n){const t=cM.has(e)||hM.has(e),l=cM.has(n)||hM.has(n);return(i,r)=>{let s=e==oM||e==i,u=n==oM||n==r;return!s&&t&&"boolean"==typeof i&&(s=i?cM.has(e):hM.has(e)),!u&&l&&"boolean"==typeof r&&(u=r?cM.has(n):hM.has(n)),s&&u}}const gM=":self",pM=new RegExp(`s*${gM}s*,?`,"g");function mM(e,n,t){return new SM(e).build(n,t)}const fM="";class SM{constructor(e){this._driver=e}build(e,n){const t=new EM(n);return this._resetContextStyleTimingState(t),uM(this,eM(e),t)}_resetContextStyleTimingState(e){e.currentQuerySelector=fM,e.collectedStyles={},e.collectedStyles[fM]={},e.currentTime=0}visitTrigger(e,n){let t=n.queryCount=0,l=n.depCount=0;const i=[],r=[];return"@"==e.name.charAt(0)&&n.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(e=>{if(this._resetContextStyleTimingState(n),0==e.type){const t=e,l=t.name;l.toString().split(/\s*,\s*/).forEach(e=>{t.name=e,i.push(this.visitState(t,n))}),t.name=l}else if(1==e.type){const i=this.visitTransition(e,n);t+=i.queryCount,l+=i.depCount,r.push(i)}else n.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:i,transitions:r,queryCount:t,depCount:l,options:null}}visitState(e,n){const t=this.visitStyle(e.styles,n),l=e.options&&e.options.params||null;if(t.containsDynamicStyles){const i=new Set,r=l||{};if(t.styles.forEach(e=>{if(vM(e)){const n=e;Object.keys(n).forEach(e=>{tM(n[e]).forEach(e=>{r.hasOwnProperty(e)||i.add(e)})})}}),i.size){const t=iM(i.values());n.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${t.join(", ")}`)}}return{type:0,name:e.name,style:t,options:l?{params:l}:null}}visitTransition(e,n){n.queryCount=0,n.depCount=0;const t=uM(this,eM(e.animation),n);return{type:1,matchers:aM(e.expr,n.errors),animation:t,queryCount:n.queryCount,depCount:n.depCount,options:bM(e.options)}}visitSequence(e,n){return{type:2,steps:e.steps.map(e=>uM(this,e,n)),options:bM(e.options)}}visitGroup(e,n){const t=n.currentTime;let l=0;const i=e.steps.map(e=>{n.currentTime=t;const i=uM(this,e,n);return l=Math.max(l,n.currentTime),i});return n.currentTime=l,{type:3,steps:i,options:bM(e.options)}}visitAnimate(e,n){const t=function(e,n){let t=null;if(e.hasOwnProperty("duration"))t=e;else if("number"==typeof e)return OM(Kx(e,n).duration,0,"");const l=e;if(l.split(/\s+/).some(e=>"{"==e.charAt(0)&&"{"==e.charAt(1))){const e=OM(0,0,"");return e.dynamic=!0,e.strValue=l,e}return OM((t=t||Kx(l,n)).duration,t.delay,t.easing)}(e.timings,n.errors);let l;n.currentAnimateTimings=t;let i=e.styles?e.styles:gx({});if(5==i.type)l=this.visitKeyframes(i,n);else{let i=e.styles,r=!1;if(!i){r=!0;const e={};t.easing&&(e.easing=t.easing),i=gx(e)}n.currentTime+=t.duration+t.delay;const s=this.visitStyle(i,n);s.isEmptyStep=r,l=s}return n.currentAnimateTimings=null,{type:4,timings:t,style:l,options:null}}visitStyle(e,n){const t=this._makeStyleAst(e,n);return this._validateStyleAst(t,n),t}_makeStyleAst(e,n){const t=[];Array.isArray(e.styles)?e.styles.forEach(e=>{"string"==typeof e?e==hx?t.push(e):n.errors.push(`The provided style string value ${e} is not allowed.`):t.push(e)}):t.push(e.styles);let l=!1,i=null;return t.forEach(e=>{if(vM(e)){const n=e,t=n.easing;if(t&&(i=t,delete n.easing),!l)for(let e in n)if(n[e].toString().indexOf(Hx)>=0){l=!0;break}}}),{type:6,styles:t,easing:i,offset:e.offset,containsDynamicStyles:l,options:null}}_validateStyleAst(e,n){const t=n.currentAnimateTimings;let l=n.currentTime,i=n.currentTime;t&&i>0&&(i-=t.duration+t.delay),e.styles.forEach(e=>{"string"!=typeof e&&Object.keys(e).forEach(t=>{if(!this._driver.validateStyleProperty(t))return void n.errors.push(`The provided animation property "${t}" is not a supported CSS property for animations`);const r=n.collectedStyles[n.currentQuerySelector],s=r[t];let u=!0;s&&(i!=l&&i>=s.startTime&&l<=s.endTime&&(n.errors.push(`The CSS property "${t}" that exists between the times of "${s.startTime}ms" and "${s.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${l}ms"`),u=!1),i=s.startTime),u&&(r[t]={startTime:i,endTime:l}),n.options&&function(l,i,r){const s=n.options.params||{},u=tM(e[t]);u.length&&u.forEach(e=>{s.hasOwnProperty(e)||r.push(`Unable to resolve the local animation param ${e} in the given list of values`)})}(0,0,n.errors)})})}visitKeyframes(e,n){const t={type:5,styles:[],options:null};if(!n.currentAnimateTimings)return n.errors.push("keyframes() must be placed inside of a call to animate()"),t;let l=0;const i=[];let r=!1,s=!1,u=0;const o=e.steps.map(e=>{const t=this._makeStyleAst(e,n);let o=null!=t.offset?t.offset:function(e){if("string"==typeof e)return null;let n=null;if(Array.isArray(e))e.forEach(e=>{if(vM(e)&&e.hasOwnProperty("offset")){const t=e;n=parseFloat(t.offset),delete t.offset}});else if(vM(e)&&e.hasOwnProperty("offset")){const t=e;n=parseFloat(t.offset),delete t.offset}return n}(t.styles),a=0;return null!=o&&(l++,a=t.offset=o),s=s||a<0||a>1,r=r||a<u,u=a,i.push(a),t});s&&n.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),r&&n.errors.push("Please ensure that all keyframe offsets are in order");const a=e.steps.length;let c=0;l>0&&l<a?n.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==l&&(c=1/(a-1));const h=a-1,d=n.currentTime,g=n.currentAnimateTimings,p=g.duration;return o.forEach((e,l)=>{const r=c>0?l==h?1:c*l:i[l],s=r*p;n.currentTime=d+g.delay+s,g.duration=s,this._validateStyleAst(e,n),e.offset=r,t.styles.push(e)}),t}visitReference(e,n){return{type:8,animation:uM(this,eM(e.animation),n),options:bM(e.options)}}visitAnimateChild(e,n){return n.depCount++,{type:9,options:bM(e.options)}}visitAnimateRef(e,n){return{type:10,animation:this.visitReference(e.animation,n),options:bM(e.options)}}visitQuery(e,n){const t=n.currentQuerySelector,l=e.options||{};n.queryCount++,n.currentQuery=e;const[i,r]=function(e){const n=!!e.split(/\s*,\s*/).find(e=>e==gM);return n&&(e=e.replace(pM,"")),[e=e.replace(/@\*/g,Wx).replace(/@\w+/g,e=>Wx+"-"+e.substr(1)).replace(/:animating/g,zx),n]}(e.selector);n.currentQuerySelector=t.length?t+" "+i:i,Cx(n.collectedStyles,n.currentQuerySelector,{});const s=uM(this,eM(e.animation),n);return n.currentQuery=null,n.currentQuerySelector=t,{type:11,selector:i,limit:l.limit||0,optional:!!l.optional,includeSelf:r,animation:s,originalSelector:e.selector,options:bM(e.options)}}visitStagger(e,n){n.currentQuery||n.errors.push("stagger() can only be used inside of query()");const t="full"===e.timings?{duration:0,delay:0,easing:"full"}:Kx(e.timings,n.errors,!0);return{type:12,animation:uM(this,eM(e.animation),n),timings:t,options:null}}}class EM{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function vM(e){return!Array.isArray(e)&&"object"==typeof e}function bM(e){var n;return e?(e=jx(e)).params&&(e.params=(n=e.params)?jx(n):null):e={},e}function OM(e,n,t){return{duration:e,delay:n,easing:t}}function RM(e,n,t,l,i,r,s=null,u=!1){return{type:1,element:e,keyframes:n,preStyleProps:t,postStyleProps:l,duration:i,delay:r,totalTime:i+r,easing:s,subTimeline:u}}class TM{constructor(){this._map=new Map}consume(e){let n=this._map.get(e);return n?this._map.delete(e):n=[],n}append(e,n){let t=this._map.get(e);t||this._map.set(e,t=[]),t.push(...n)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const CM=1,IM=new RegExp(":enter","g"),yM=new RegExp(":leave","g");function _M(e,n,t,l,i,r={},s={},u,o,a=[]){return(new AM).buildKeyframes(e,n,t,l,i,r,s,u,o,a)}class AM{buildKeyframes(e,n,t,l,i,r,s,u,o,a=[]){o=o||new TM;const c=new NM(e,n,o,l,i,a,[]);c.options=u,c.currentTimeline.setStyles([r],null,c.errors,u),uM(this,t,c);const h=c.timelines.filter(e=>e.containsAnimation());if(h.length&&Object.keys(s).length){const e=h[h.length-1];e.allowOnlyTimelineStyles()||e.setStyles([s],null,c.errors,u)}return h.length?h.map(e=>e.buildKeyframes()):[RM(n,[],[],[],0,0,"",!1)]}visitTrigger(e,n){}visitState(e,n){}visitTransition(e,n){}visitAnimateChild(e,n){const t=n.subInstructions.consume(n.element);if(t){const l=n.createSubContext(e.options),i=n.currentTimeline.currentTime,r=this._visitSubInstructions(t,l,l.options);i!=r&&n.transformIntoNewTimeline(r)}n.previousNode=e}visitAnimateRef(e,n){const t=n.createSubContext(e.options);t.transformIntoNewTimeline(),this.visitReference(e.animation,t),n.transformIntoNewTimeline(t.currentTimeline.currentTime),n.previousNode=e}_visitSubInstructions(e,n,t){let l=n.currentTimeline.currentTime;const i=null!=t.duration?Yx(t.duration):null,r=null!=t.delay?Yx(t.delay):null;return 0!==i&&e.forEach(e=>{const t=n.appendInstructionToTimeline(e,i,r);l=Math.max(l,t.duration+t.delay)}),l}visitReference(e,n){n.updateOptions(e.options,!0),uM(this,e.animation,n),n.previousNode=e}visitSequence(e,n){const t=n.subContextCount;let l=n;const i=e.options;if(i&&(i.params||i.delay)&&((l=n.createSubContext(i)).transformIntoNewTimeline(),null!=i.delay)){6==l.previousNode.type&&(l.currentTimeline.snapshotCurrentStyles(),l.previousNode=wM);const e=Yx(i.delay);l.delayNextStep(e)}e.steps.length&&(e.steps.forEach(e=>uM(this,e,l)),l.currentTimeline.applyStylesToKeyframe(),l.subContextCount>t&&l.transformIntoNewTimeline()),n.previousNode=e}visitGroup(e,n){const t=[];let l=n.currentTimeline.currentTime;const i=e.options&&e.options.delay?Yx(e.options.delay):0;e.steps.forEach(r=>{const s=n.createSubContext(e.options);i&&s.delayNextStep(i),uM(this,r,s),l=Math.max(l,s.currentTimeline.currentTime),t.push(s.currentTimeline)}),t.forEach(e=>n.currentTimeline.mergeTimelineCollectedStyles(e)),n.transformIntoNewTimeline(l),n.previousNode=e}_visitTiming(e,n){if(e.dynamic){const t=e.strValue;return Kx(n.params?lM(t,n.params,n.errors):t,n.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,n){const t=n.currentAnimateTimings=this._visitTiming(e.timings,n),l=n.currentTimeline;t.delay&&(n.incrementTime(t.delay),l.snapshotCurrentStyles());const i=e.style;5==i.type?this.visitKeyframes(i,n):(n.incrementTime(t.duration),this.visitStyle(i,n),l.applyStylesToKeyframe()),n.currentAnimateTimings=null,n.previousNode=e}visitStyle(e,n){const t=n.currentTimeline,l=n.currentAnimateTimings;!l&&t.getCurrentStyleProperties().length&&t.forwardFrame();const i=l&&l.easing||e.easing;e.isEmptyStep?t.applyEmptyStep(i):t.setStyles(e.styles,i,n.errors,n.options),n.previousNode=e}visitKeyframes(e,n){const t=n.currentAnimateTimings,l=n.currentTimeline.duration,i=t.duration,r=n.createSubContext().currentTimeline;r.easing=t.easing,e.styles.forEach(e=>{r.forwardTime((e.offset||0)*i),r.setStyles(e.styles,e.easing,n.errors,n.options),r.applyStylesToKeyframe()}),n.currentTimeline.mergeTimelineCollectedStyles(r),n.transformIntoNewTimeline(l+i),n.previousNode=e}visitQuery(e,n){const t=n.currentTimeline.currentTime,l=e.options||{},i=l.delay?Yx(l.delay):0;i&&(6===n.previousNode.type||0==t&&n.currentTimeline.getCurrentStyleProperties().length)&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=wM);let r=t;const s=n.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!l.optional,n.errors);n.currentQueryTotal=s.length;let u=null;s.forEach((t,l)=>{n.currentQueryIndex=l;const s=n.createSubContext(e.options,t);i&&s.delayNextStep(i),t===n.element&&(u=s.currentTimeline),uM(this,e.animation,s),s.currentTimeline.applyStylesToKeyframe(),r=Math.max(r,s.currentTimeline.currentTime)}),n.currentQueryIndex=0,n.currentQueryTotal=0,n.transformIntoNewTimeline(r),u&&(n.currentTimeline.mergeTimelineCollectedStyles(u),n.currentTimeline.snapshotCurrentStyles()),n.previousNode=e}visitStagger(e,n){const t=n.parentContext,l=n.currentTimeline,i=e.timings,r=Math.abs(i.duration),s=r*(n.currentQueryTotal-1);let u=r*n.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":u=s-u;break;case"full":u=t.currentStaggerTime}const o=n.currentTimeline;u&&o.delayNextStep(u);const a=o.currentTime;uM(this,e.animation,n),n.previousNode=e,t.currentStaggerTime=l.currentTime-a+(l.startTime-t.currentTimeline.startTime)}}const wM={};class NM{constructor(e,n,t,l,i,r,s,u){this._driver=e,this.element=n,this.subInstructions=t,this._enterClassName=l,this._leaveClassName=i,this.errors=r,this.timelines=s,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=wM,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=u||new PM(this._driver,n,0),s.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,n){if(!e)return;const t=e;let l=this.options;null!=t.duration&&(l.duration=Yx(t.duration)),null!=t.delay&&(l.delay=Yx(t.delay));const i=t.params;if(i){let e=l.params;e||(e=this.options.params={}),Object.keys(i).forEach(t=>{n&&e.hasOwnProperty(t)||(e[t]=lM(i[t],e,this.errors))})}}_copyOptions(){const e={};if(this.options){const n=this.options.params;if(n){const t=e.params={};Object.keys(n).forEach(e=>{t[e]=n[e]})}}return e}createSubContext(e=null,n,t){const l=n||this.element,i=new NM(this._driver,l,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(l,t||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(e),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(e){return this.previousNode=wM,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,n,t){const l={duration:null!=n?n:e.duration,delay:this.currentTimeline.currentTime+(null!=t?t:0)+e.delay,easing:""},i=new kM(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,l,e.stretchStartingKeyframe);return this.timelines.push(i),l}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,n,t,l,i,r){let s=[];if(l&&s.push(this.element),e.length>0){e=(e=e.replace(IM,"."+this._enterClassName)).replace(yM,"."+this._leaveClassName);let n=this._driver.query(this.element,e,1!=t);0!==t&&(n=t<0?n.slice(n.length+t,n.length):n.slice(0,t)),s.push(...n)}return i||0!=s.length||r.push(`\`query("${n}")\` returned zero elements. (Use \`query("${n}", { optional: true })\` if you wish to allow this.)`),s}}class PM{constructor(e,n,t,l){this._driver=e,this.element=n,this.startTime=t,this._elementTimelineStylesLookup=l,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const n=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||n?(this.forwardTime(this.currentTime+e),n&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,n){return this.applyStylesToKeyframe(),new PM(this._driver,e,n||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=CM,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,n){this._localTimelineStyles[e]=n,this._globalTimelineStyles[e]=n,this._styleSummary[e]={time:this.currentTime,value:n}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||hx,this._currentKeyframe[e]=hx}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,n,t,l){n&&(this._previousKeyframe.easing=n);const i=l&&l.params||{},r=function(e,n){const t={};let l;return e.forEach(e=>{"*"===e?(l=l||Object.keys(n)).forEach(e=>{t[e]=hx}):qx(e,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(r).forEach(e=>{const n=lM(r[e],i,t);this._pendingStyles[e]=n,this._localTimelineStyles.hasOwnProperty(e)||(this._backFill[e]=this._globalTimelineStyles.hasOwnProperty(e)?this._globalTimelineStyles[e]:hx),this._updateStyle(e,n)})}applyStylesToKeyframe(){const e=this._pendingStyles,n=Object.keys(e);0!=n.length&&(this._pendingStyles={},n.forEach(n=>{this._currentKeyframe[n]=e[n]}),Object.keys(this._localTimelineStyles).forEach(e=>{this._currentKeyframe.hasOwnProperty(e)||(this._currentKeyframe[e]=this._localTimelineStyles[e])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const n=this._localTimelineStyles[e];this._pendingStyles[e]=n,this._updateStyle(e,n)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let n in this._currentKeyframe)e.push(n);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(n=>{const t=this._styleSummary[n],l=e._styleSummary[n];(!t||l.time>t.time)&&this._updateStyle(n,l.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,n=new Set,t=1===this._keyframes.size&&0===this.duration;let l=[];this._keyframes.forEach((i,r)=>{const s=qx(i,!0);Object.keys(s).forEach(t=>{const l=s[t];l==Sx?e.add(t):l==hx&&n.add(t)}),t||(s.offset=r/this.duration),l.push(s)});const i=e.size?iM(e.values()):[],r=n.size?iM(n.values()):[];if(t){const e=l[0],n=jx(e);e.offset=0,n.offset=1,l=[e,n]}return RM(this.element,l,i,r,this.duration,this.startTime,this.easing,!1)}}class kM extends PM{constructor(e,n,t,l,i,r,s=!1){super(e,n,r.delay),this.element=n,this.keyframes=t,this.preStyleProps=l,this.postStyleProps=i,this._stretchStartingKeyframe=s,this.timings={duration:r.duration,delay:r.delay,easing:r.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:n,duration:t,easing:l}=this.timings;if(this._stretchStartingKeyframe&&n){const i=[],r=t+n,s=n/r,u=qx(e[0],!1);u.offset=0,i.push(u);const o=qx(e[0],!1);o.offset=xM(s),i.push(o);const a=e.length-1;for(let l=1;l<=a;l++){let s=qx(e[l],!1);s.offset=xM((n+s.offset*t)/r),i.push(s)}t=r,n=0,l="",e=i}return RM(this.element,e,this.preStyleProps,this.postStyleProps,t,n,l,!0)}}function xM(e,n=3){const t=Math.pow(10,n-1);return Math.round(e*t)/t}class MM{}class DM extends MM{normalizePropertyName(e,n){return sM(e)}normalizeStyleValue(e,n,t,l){let i="";const r=t.toString().trim();if(LM[n]&&0!==t&&"0"!==t)if("number"==typeof t)i="px";else{const n=t.match(/^[+-]?[\d\.]+([a-z]*)$/);n&&0==n[1].length&&l.push(`Please provide a CSS unit value for ${e}:${t}`)}return r+i}}const LM=(()=>(function(e){const n={};return e.forEach(e=>n[e]=!0),n})("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function FM(e,n,t,l,i,r,s,u,o,a,c,h,d){return{type:0,element:e,triggerName:n,isRemovalTransition:i,fromState:t,fromStyles:r,toState:l,toStyles:s,timelines:u,queriedElements:o,preStyleProps:a,postStyleProps:c,totalTime:h,errors:d}}const HM={};class UM{constructor(e,n,t){this._triggerName=e,this.ast=n,this._stateStyles=t}match(e,n,t,l){return function(e,n,t,l,i){return e.some(e=>e(n,t,l,i))}(this.ast.matchers,e,n,t,l)}buildStyles(e,n,t){const l=this._stateStyles["*"],i=this._stateStyles[e],r=l?l.buildStyles(n,t):{};return i?i.buildStyles(n,t):r}build(e,n,t,l,i,r,s,u,o,a){const c=[],h=this.ast.options&&this.ast.options.params||HM,d=this.buildStyles(t,s&&s.params||HM,c),g=u&&u.params||HM,p=this.buildStyles(l,g,c),m=new Set,f=new Map,S=new Map,E="void"===l,v={params:Object.assign({},h,g)},b=a?[]:_M(e,n,this.ast.animation,i,r,d,p,v,o,c);let O=0;if(b.forEach(e=>{O=Math.max(e.duration+e.delay,O)}),c.length)return FM(n,this._triggerName,t,l,E,d,p,[],[],f,S,O,c);b.forEach(e=>{const t=e.element,l=Cx(f,t,{});e.preStyleProps.forEach(e=>l[e]=!0);const i=Cx(S,t,{});e.postStyleProps.forEach(e=>i[e]=!0),t!==n&&m.add(t)});const R=iM(m.values());return FM(n,this._triggerName,t,l,E,d,p,b,R,f,S,O)}}class GM{constructor(e,n){this.styles=e,this.defaultParams=n}buildStyles(e,n){const t={},l=jx(this.defaultParams);return Object.keys(e).forEach(n=>{const t=e[n];null!=t&&(l[n]=t)}),this.styles.styles.forEach(e=>{if("string"!=typeof e){const i=e;Object.keys(i).forEach(e=>{let r=i[e];r.length>1&&(r=lM(r,l,n)),t[e]=r})}}),t}}class BM{constructor(e,n){this.name=e,this.ast=n,this.transitionFactories=[],this.states={},n.states.forEach(e=>{this.states[e.name]=new GM(e.style,e.options&&e.options.params||{})}),WM(this.states,"true","1"),WM(this.states,"false","0"),n.transitions.forEach(n=>{this.transitionFactories.push(new UM(e,n,this.states))}),this.fallbackTransition=new UM(e,{type:1,animation:{type:2,steps:[],options:null},matchers:[(e,n)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,n,t,l){return this.transitionFactories.find(i=>i.match(e,n,t,l))||null}matchStyles(e,n,t){return this.fallbackTransition.buildStyles(e,n,t)}}function WM(e,n,t){e.hasOwnProperty(n)?e.hasOwnProperty(t)||(e[t]=e[n]):e.hasOwnProperty(t)&&(e[n]=e[t])}const VM=new TM;class zM{constructor(e,n,t){this.bodyNode=e,this._driver=n,this._normalizer=t,this._animations={},this._playersById={},this.players=[]}register(e,n){const t=[],l=mM(this._driver,n,t);if(t.length)throw new Error(`Unable to build the animation due to the following errors: ${t.join("\n")}`);this._animations[e]=l}_buildPlayer(e,n,t){const l=e.element,i=bx(0,this._normalizer,0,e.keyframes,n,t);return this._driver.animate(l,i,e.duration,e.delay,e.easing,[],!0)}create(e,n,t={}){const l=[],i=this._animations[e];let r;const s=new Map;if(i?(r=_M(this._driver,n,i,Ux,Gx,{},{},t,VM,l)).forEach(e=>{const n=Cx(s,e.element,{});e.postStyleProps.forEach(e=>n[e]=null)}):(l.push("The requested animation doesn't exist or has already been destroyed"),r=[]),l.length)throw new Error(`Unable to create the animation due to the following errors: ${l.join("\n")}`);s.forEach((e,n)=>{Object.keys(e).forEach(t=>{e[t]=this._driver.computeStyle(n,t,hx)})});const u=vx(r.map(e=>{const n=s.get(e.element);return this._buildPlayer(e,{},n)}));return this._playersById[e]=u,u.onDestroy(()=>this.destroy(e)),this.players.push(u),u}destroy(e){const n=this._getPlayer(e);n.destroy(),delete this._playersById[e];const t=this.players.indexOf(n);t>=0&&this.players.splice(t,1)}_getPlayer(e){const n=this._playersById[e];if(!n)throw new Error(`Unable to find the timeline player referenced by ${e}`);return n}listen(e,n,t,l){const i=Tx(n,"","","");return Ox(this._getPlayer(e),t,i,l),()=>{}}command(e,n,t,l){if("register"==t)return void this.register(e,l[0]);if("create"==t)return void this.create(e,n,l[0]||{});const i=this._getPlayer(e);switch(t){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(l[0]));break;case"destroy":this.destroy(e)}}}const YM="ng-animate-queued",$M=".ng-animate-queued",KM="ng-animate-disabled",jM=".ng-animate-disabled",qM="ng-star-inserted",XM=".ng-star-inserted",QM=[],ZM={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},JM={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},eD="__ng_removed";class nD{constructor(e,n=""){this.namespaceId=n;const t=e&&e.hasOwnProperty("value");if(this.value=function(e){return null!=e?e:null}(t?e.value:e),t){const n=jx(e);delete n.value,this.options=n}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const n=e.params;if(n){const e=this.options.params;Object.keys(n).forEach(t=>{null==e[t]&&(e[t]=n[t])})}}}const tD="void",lD=new nD(tD);class iD{constructor(e,n,t){this.id=e,this.hostElement=n,this._engine=t,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,dD(n,this._hostClassName)}listen(e,n,t,l){if(!this._triggers.hasOwnProperty(n))throw new Error(`Unable to listen on the animation trigger event "${t}" because the animation trigger "${n}" doesn't exist!`);if(null==t||0==t.length)throw new Error(`Unable to listen on the animation trigger "${n}" because the provided event is undefined!`);if("start"!=(i=t)&&"done"!=i)throw new Error(`The provided animation trigger event "${t}" for the animation trigger "${n}" is not supported!`);var i;const r=Cx(this._elementListeners,e,[]),s={name:n,phase:t,callback:l};r.push(s);const u=Cx(this._engine.statesByElement,e,{});return u.hasOwnProperty(n)||(dD(e,Bx),dD(e,Bx+"-"+n),u[n]=lD),()=>{this._engine.afterFlush(()=>{const e=r.indexOf(s);e>=0&&r.splice(e,1),this._triggers[n]||delete u[n]})}}register(e,n){return!this._triggers[e]&&(this._triggers[e]=n,!0)}_getTrigger(e){const n=this._triggers[e];if(!n)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return n}trigger(e,n,t,l=!0){const i=this._getTrigger(n),r=new sD(this.id,n,e);let s=this._engine.statesByElement.get(e);s||(dD(e,Bx),dD(e,Bx+"-"+n),this._engine.statesByElement.set(e,s={}));let u=s[n];const o=new nD(t,this.id);if(!(t&&t.hasOwnProperty("value"))&&u&&o.absorbOptions(u.options),s[n]=o,u||(u=lD),o.value!==tD&&u.value===o.value){if(!function(e,n){const t=Object.keys(e),l=Object.keys(n);if(t.length!=l.length)return!1;for(let i=0;i<t.length;i++){const l=t[i];if(!n.hasOwnProperty(l)||e[l]!==n[l])return!1}return!0}(u.params,o.params)){const n=[],t=i.matchStyles(u.value,u.params,n),l=i.matchStyles(o.value,o.params,n);n.length?this._engine.reportError(n):this._engine.afterFlush(()=>{Jx(e,t),Zx(e,l)})}return}const a=Cx(this._engine.playersByElement,e,[]);a.forEach(e=>{e.namespaceId==this.id&&e.triggerName==n&&e.queued&&e.destroy()});let c=i.matchTransition(u.value,o.value,e,o.params),h=!1;if(!c){if(!l)return;c=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:n,transition:c,fromState:u,toState:o,player:r,isFallbackTransition:h}),h||(dD(e,YM),r.onStart(()=>{gD(e,YM)})),r.onDone(()=>{let n=this.players.indexOf(r);n>=0&&this.players.splice(n,1);const t=this._engine.playersByElement.get(e);if(t){let e=t.indexOf(r);e>=0&&t.splice(e,1)}}),this.players.push(r),a.push(r),r}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((n,t)=>{delete n[e]}),this._elementListeners.forEach((n,t)=>{this._elementListeners.set(t,n.filter(n=>n.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const n=this._engine.playersByElement.get(e);n&&(n.forEach(e=>e.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,n,t=!1){this._engine.driver.query(e,Wx,!0).forEach(e=>{if(e[eD])return;const t=this._engine.fetchNamespacesByElement(e);t.size?t.forEach(t=>t.triggerLeaveAnimation(e,n,!1,!0)):this.clearElementCache(e)})}triggerLeaveAnimation(e,n,t,l){const i=this._engine.statesByElement.get(e);if(i){const r=[];if(Object.keys(i).forEach(n=>{if(this._triggers[n]){const t=this.trigger(e,n,tD,l);t&&r.push(t)}}),r.length)return this._engine.markElementAsRemoved(this.id,e,!0,n),t&&vx(r).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const n=this._elementListeners.get(e);if(n){const t=new Set;n.forEach(n=>{const l=n.name;if(t.has(l))return;t.add(l);const i=this._triggers[l].fallbackTransition,r=this._engine.statesByElement.get(e)[l]||lD,s=new nD(tD),u=new sD(this.id,l,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:l,transition:i,fromState:r,toState:s,player:u,isFallbackTransition:!0})})}}removeNode(e,n){const t=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,n,!0),this.triggerLeaveAnimation(e,n,!0))return;let l=!1;if(t.totalAnimations){const n=t.players.length?t.playersByQueriedElement.get(e):[];if(n&&n.length)l=!0;else{let n=e;for(;n=n.parentNode;)if(t.statesByElement.get(n)){l=!0;break}}}this.prepareLeaveAnimationListeners(e),l?t.markElementAsRemoved(this.id,e,!1,n):(t.afterFlush(()=>this.clearElementCache(e)),t.destroyInnerAnimations(e),t._onRemovalComplete(e,n))}insertNode(e,n){dD(e,this._hostClassName)}drainQueuedTransitions(e){const n=[];return this._queue.forEach(t=>{const l=t.player;if(l.destroyed)return;const i=t.element,r=this._elementListeners.get(i);r&&r.forEach(n=>{if(n.name==t.triggerName){const l=Tx(i,t.triggerName,t.fromState.value,t.toState.value);l._data=e,Ox(t.player,n.phase,l,n.callback)}}),l.markedForDestroy?this._engine.afterFlush(()=>{l.destroy()}):n.push(t)}),this._queue=[],n.sort((e,n)=>{const t=e.transition.ast.depCount,l=n.transition.ast.depCount;return 0==t||0==l?t-l:this._engine.driver.containsElement(e.element,n.element)?1:-1})}destroy(e){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let n=!1;return this._elementListeners.has(e)&&(n=!0),!!this._queue.find(n=>n.element===e)||n}}class rD{constructor(e,n,t){this.bodyNode=e,this.driver=n,this._normalizer=t,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(e,n)=>{}}_onRemovalComplete(e,n){this.onRemovalComplete(e,n)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(n=>{n.players.forEach(n=>{n.queued&&e.push(n)})}),e}createNamespace(e,n){const t=new iD(e,n,this);return n.parentNode?this._balanceNamespaceList(t,n):(this.newHostElements.set(n,t),this.collectEnterElement(n)),this._namespaceLookup[e]=t}_balanceNamespaceList(e,n){const t=this._namespaceList.length-1;if(t>=0){let l=!1;for(let i=t;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,n)){this._namespaceList.splice(i+1,0,e),l=!0;break}l||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(n,e),e}register(e,n){let t=this._namespaceLookup[e];return t||(t=this.createNamespace(e,n)),t}registerTrigger(e,n,t){let l=this._namespaceLookup[e];l&&l.register(n,t)&&this.totalAnimations++}destroy(e,n){if(!e)return;const t=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(t.hostElement),delete this._namespaceLookup[e];const n=this._namespaceList.indexOf(t);n>=0&&this._namespaceList.splice(n,1)}),this.afterFlushAnimationsDone(()=>t.destroy(n))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const n=new Set,t=this.statesByElement.get(e);if(t){const e=Object.keys(t);for(let l=0;l<e.length;l++){const i=t[e[l]].namespaceId;if(i){const e=this._fetchNamespace(i);e&&n.add(e)}}}return n}trigger(e,n,t,l){if(uD(n)){const i=this._fetchNamespace(e);if(i)return i.trigger(n,t,l),!0}return!1}insertNode(e,n,t,l){if(!uD(n))return;const i=n[eD];if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const e=this.collectedLeaveElements.indexOf(n);e>=0&&this.collectedLeaveElements.splice(e,1)}if(e){const l=this._fetchNamespace(e);l&&l.insertNode(n,t)}l&&this.collectEnterElement(n)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,n){n?this.disabledNodes.has(e)||(this.disabledNodes.add(e),dD(e,KM)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),gD(e,KM))}removeNode(e,n,t,l){if(uD(n)){const i=e?this._fetchNamespace(e):null;if(i?i.removeNode(n,l):this.markElementAsRemoved(e,n,!1,l),t){const t=this.namespacesByHostElement.get(n);t&&t.id!==e&&t.removeNode(n,l)}}else this._onRemovalComplete(n,l)}markElementAsRemoved(e,n,t,l){this.collectedLeaveElements.push(n),n[eD]={namespaceId:e,setForRemoval:l,hasAnimation:t,removedBeforeQueried:!1}}listen(e,n,t,l,i){return uD(n)?this._fetchNamespace(e).listen(n,t,l,i):()=>{}}_buildInstruction(e,n,t,l,i){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,t,l,e.fromState.options,e.toState.options,n,i)}destroyInnerAnimations(e){let n=this.driver.query(e,Wx,!0);n.forEach(e=>this.destroyActiveAnimationsForElement(e)),0!=this.playersByQueriedElement.size&&(n=this.driver.query(e,zx,!0)).forEach(e=>this.finishActiveQueriedAnimationOnElement(e))}destroyActiveAnimationsForElement(e){const n=this.playersByElement.get(e);n&&n.forEach(e=>{e.queued?e.markedForDestroy=!0:e.destroy()})}finishActiveQueriedAnimationOnElement(e){const n=this.playersByQueriedElement.get(e);n&&n.forEach(e=>e.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return vx(this.players).onDone(()=>e());e()})}processLeaveNode(e){const n=e[eD];if(n&&n.setForRemoval){if(e[eD]=ZM,n.namespaceId){this.destroyInnerAnimations(e);const t=this._fetchNamespace(n.namespaceId);t&&t.clearElementCache(e)}this._onRemovalComplete(e,n.setForRemoval)}this.driver.matchesElement(e,jM)&&this.markElementAsDisabled(e,!1),this.driver.query(e,jM,!0).forEach(e=>{this.markElementAsDisabled(e,!1)})}flush(e=-1){let n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((e,n)=>this._balanceNamespaceList(e,n)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let t=0;t<this.collectedEnterElements.length;t++)dD(this.collectedEnterElements[t],qM);if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const t=[];try{n=this._flushAnimations(t,e)}finally{for(let e=0;e<t.length;e++)t[e]()}}else for(let t=0;t<this.collectedLeaveElements.length;t++)this.processLeaveNode(this.collectedLeaveElements[t]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(e=>e()),this._flushFns=[],this._whenQuietFns.length){const e=this._whenQuietFns;this._whenQuietFns=[],n.length?vx(n).onDone(()=>{e.forEach(e=>e())}):e.forEach(e=>e())}}reportError(e){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${e.join("\n")}`)}_flushAnimations(e,n){const t=new TM,l=[],i=new Map,r=[],s=new Map,u=new Map,o=new Map,a=new Set;this.disabledNodes.forEach(e=>{a.add(e);const n=this.driver.query(e,$M,!0);for(let t=0;t<n.length;t++)a.add(n[t])});const c=this.bodyNode,h=Array.from(this.statesByElement.keys()),d=cD(h,this.collectedEnterElements),g=new Map;let p=0;d.forEach((e,n)=>{const t=Ux+p++;g.set(n,t),e.forEach(e=>dD(e,t))});const m=[],f=new Set,S=new Set;for(let N=0;N<this.collectedLeaveElements.length;N++){const e=this.collectedLeaveElements[N],n=e[eD];n&&n.setForRemoval&&(m.push(e),f.add(e),n.hasAnimation?this.driver.query(e,XM,!0).forEach(e=>f.add(e)):S.add(e))}const E=new Map,v=cD(h,Array.from(f));v.forEach((e,n)=>{const t=Gx+p++;E.set(n,t),e.forEach(e=>dD(e,t))}),e.push(()=>{d.forEach((e,n)=>{const t=g.get(n);e.forEach(e=>gD(e,t))}),v.forEach((e,n)=>{const t=E.get(n);e.forEach(e=>gD(e,t))}),m.forEach(e=>{this.processLeaveNode(e)})});const b=[],O=[];for(let N=this._namespaceList.length-1;N>=0;N--)this._namespaceList[N].drainQueuedTransitions(n).forEach(e=>{const n=e.player,i=e.element;if(b.push(n),this.collectedEnterElements.length){const e=i[eD];if(e&&e.setForMove)return void n.destroy()}const a=!c||!this.driver.containsElement(c,i),h=E.get(i),d=g.get(i),p=this._buildInstruction(e,t,d,h,a);if(!p.errors||!p.errors.length)return a?(n.onStart(()=>Jx(i,p.fromStyles)),n.onDestroy(()=>Zx(i,p.toStyles)),void l.push(n)):e.isFallbackTransition?(n.onStart(()=>Jx(i,p.fromStyles)),n.onDestroy(()=>Zx(i,p.toStyles)),void l.push(n)):(p.timelines.forEach(e=>e.stretchStartingKeyframe=!0),t.append(i,p.timelines),r.push({instruction:p,player:n,element:i}),p.queriedElements.forEach(e=>Cx(s,e,[]).push(n)),p.preStyleProps.forEach((e,n)=>{const t=Object.keys(e);if(t.length){let e=u.get(n);e||u.set(n,e=new Set),t.forEach(n=>e.add(n))}}),void p.postStyleProps.forEach((e,n)=>{const t=Object.keys(e);let l=o.get(n);l||o.set(n,l=new Set),t.forEach(e=>l.add(e))}));O.push(p)});if(O.length){const e=[];O.forEach(n=>{e.push(`@${n.triggerName} has failed due to:\n`),n.errors.forEach(n=>e.push(`- ${n}\n`))}),b.forEach(e=>e.destroy()),this.reportError(e)}const R=new Map,T=new Map;r.forEach(e=>{const n=e.element;t.has(n)&&(T.set(n,n),this._beforeAnimationBuild(e.player.namespaceId,e.instruction,R))}),l.forEach(e=>{const n=e.element;this._getPreviousPlayers(n,!1,e.namespaceId,e.triggerName,null).forEach(e=>{Cx(R,n,[]).push(e),e.destroy()})});const C=m.filter(e=>mD(e,u,o)),I=new Map;aD(I,this.driver,S,o,hx).forEach(e=>{mD(e,u,o)&&C.push(e)});const y=new Map;d.forEach((e,n)=>{aD(y,this.driver,new Set(e),u,Sx)}),C.forEach(e=>{const n=I.get(e),t=y.get(e);I.set(e,Object.assign({},n,t))});const _=[],A=[],w={};r.forEach(e=>{const{element:n,player:r,instruction:s}=e;if(t.has(n)){if(a.has(n))return r.onDestroy(()=>Zx(n,s.toStyles)),r.disabled=!0,r.overrideTotalTime(s.totalTime),void l.push(r);let e=w;if(T.size>1){let t=n;const l=[];for(;t=t.parentNode;){const n=T.get(t);if(n){e=n;break}l.push(t)}l.forEach(n=>T.set(n,e))}const t=this._buildAnimation(r.namespaceId,s,R,i,y,I);if(r.setRealPlayer(t),e===w)_.push(r);else{const n=this.playersByElement.get(e);n&&n.length&&(r.parentPlayer=vx(n)),l.push(r)}}else Jx(n,s.fromStyles),r.onDestroy(()=>Zx(n,s.toStyles)),A.push(r),a.has(n)&&l.push(r)}),A.forEach(e=>{const n=i.get(e.element);if(n&&n.length){const t=vx(n);e.setRealPlayer(t)}}),l.forEach(e=>{e.parentPlayer?e.syncPlayerEvents(e.parentPlayer):e.destroy()});for(let N=0;N<m.length;N++){const e=m[N],n=e[eD];if(gD(e,Gx),n&&n.hasAnimation)continue;let t=[];if(s.size){let n=s.get(e);n&&n.length&&t.push(...n);let l=this.driver.query(e,zx,!0);for(let e=0;e<l.length;e++){let n=s.get(l[e]);n&&n.length&&t.push(...n)}}const l=t.filter(e=>!e.destroyed);l.length?pD(this,e,l):this.processLeaveNode(e)}return m.length=0,_.forEach(e=>{this.players.push(e),e.onDone(()=>{e.destroy();const n=this.players.indexOf(e);this.players.splice(n,1)}),e.play()}),_}elementContainsData(e,n){let t=!1;const l=n[eD];return l&&l.setForRemoval&&(t=!0),this.playersByElement.has(n)&&(t=!0),this.playersByQueriedElement.has(n)&&(t=!0),this.statesByElement.has(n)&&(t=!0),this._fetchNamespace(e).elementContainsData(n)||t}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,n,t,l,i){let r=[];if(n){const n=this.playersByQueriedElement.get(e);n&&(r=n)}else{const n=this.playersByElement.get(e);if(n){const e=!i||i==tD;n.forEach(n=>{n.queued||(e||n.triggerName==l)&&r.push(n)})}}return(t||l)&&(r=r.filter(e=>!(t&&t!=e.namespaceId||l&&l!=e.triggerName))),r}_beforeAnimationBuild(e,n,t){const l=n.element,i=n.isRemovalTransition?void 0:e,r=n.isRemovalTransition?void 0:n.triggerName;for(const s of n.timelines){const e=s.element,u=e!==l,o=Cx(t,e,[]);this._getPreviousPlayers(e,u,i,r,n.toState).forEach(e=>{const n=e.getRealPlayer();n.beforeDestroy&&n.beforeDestroy(),e.destroy(),o.push(e)})}Jx(l,n.fromStyles)}_buildAnimation(e,n,t,l,i,r){const s=n.triggerName,u=n.element,o=[],a=new Set,c=new Set,h=n.timelines.map(n=>{const h=n.element;a.add(h);const d=h[eD];if(d&&d.removedBeforeQueried)return new mx(n.duration,n.delay);const g=h!==u,p=function(e){const n=[];return function e(n,t){for(let l=0;l<n.length;l++){const i=n[l];i instanceof fx?e(i.players,t):t.push(i)}}((t.get(h)||QM).map(e=>e.getRealPlayer()),n),n}().filter(e=>!!e.element&&e.element===h),m=i.get(h),f=r.get(h),S=bx(0,this._normalizer,0,n.keyframes,m,f),E=this._buildPlayer(n,S,p);if(n.subTimeline&&l&&c.add(h),g){const n=new sD(e,s,h);n.setRealPlayer(E),o.push(n)}return E});o.forEach(e=>{Cx(this.playersByQueriedElement,e.element,[]).push(e),e.onDone(()=>(function(e,n,t){let l;if(e instanceof Map){if(l=e.get(n)){if(l.length){const e=l.indexOf(t);l.splice(e,1)}0==l.length&&e.delete(n)}}else if(l=e[n]){if(l.length){const e=l.indexOf(t);l.splice(e,1)}0==l.length&&delete e[n]}return l})(this.playersByQueriedElement,e.element,e))}),a.forEach(e=>dD(e,Vx));const d=vx(h);return d.onDestroy(()=>{a.forEach(e=>gD(e,Vx)),Zx(u,n.toStyles)}),c.forEach(e=>{Cx(l,e,[]).push(d)}),d}_buildPlayer(e,n,t){return n.length>0?this.driver.animate(e.element,n,e.duration,e.delay,e.easing,t):new mx(e.duration,e.delay)}}class sD{constructor(e,n,t){this.namespaceId=e,this.triggerName=n,this.element=t,this._player=new mx,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(n=>{this._queuedCallbacks[n].forEach(t=>Ox(e,n,void 0,t))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const n=this._player;n.triggerCallback&&e.onStart(()=>n.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,n){Cx(this._queuedCallbacks,e,[]).push(n)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const n=this._player;n.triggerCallback&&n.triggerCallback(e)}}function uD(e){return e&&1===e.nodeType}function oD(e,n){const t=e.style.display;return e.style.display=null!=n?n:"none",t}function aD(e,n,t,l,i){const r=[];t.forEach(e=>r.push(oD(e)));const s=[];l.forEach((t,l)=>{const r={};t.forEach(e=>{const t=r[e]=n.computeStyle(l,e,i);t&&0!=t.length||(l[eD]=JM,s.push(l))}),e.set(l,r)});let u=0;return t.forEach(e=>oD(e,r[u++])),s}function cD(e,n){const t=new Map;if(e.forEach(e=>t.set(e,[])),0==n.length)return t;const l=new Set(n),i=new Map;return n.forEach(e=>{const n=function e(n){if(!n)return 1;let r=i.get(n);if(r)return r;const s=n.parentNode;return r=t.has(s)?s:l.has(s)?1:e(s),i.set(n,r),r}(e);1!==n&&t.get(n).push(e)}),t}const hD="$$classes";function dD(e,n){if(e.classList)e.classList.add(n);else{let t=e[hD];t||(t=e[hD]={}),t[n]=!0}}function gD(e,n){if(e.classList)e.classList.remove(n);else{let t=e[hD];t&&delete t[n]}}function pD(e,n,t){vx(t).onDone(()=>e.processLeaveNode(n))}function mD(e,n,t){const l=t.get(e);if(!l)return!1;let i=n.get(e);return i?l.forEach(e=>i.add(e)):n.set(e,l),t.delete(e),!0}class fD{constructor(e,n,t){this.bodyNode=e,this._driver=n,this._triggerCache={},this.onRemovalComplete=(e,n)=>{},this._transitionEngine=new rD(e,n,t),this._timelineEngine=new zM(e,n,t),this._transitionEngine.onRemovalComplete=(e,n)=>this.onRemovalComplete(e,n)}registerTrigger(e,n,t,l,i){const r=e+"-"+l;let s=this._triggerCache[r];if(!s){const e=[],n=mM(this._driver,i,e);if(e.length)throw new Error(`The animation trigger "${l}" has failed to build due to the following errors:\n - ${e.join("\n - ")}`);s=function(e,n){return new BM(e,n)}(l,n),this._triggerCache[r]=s}this._transitionEngine.registerTrigger(n,l,s)}register(e,n){this._transitionEngine.register(e,n)}destroy(e,n){this._transitionEngine.destroy(e,n)}onInsert(e,n,t,l){this._transitionEngine.insertNode(e,n,t,l)}onRemove(e,n,t,l){this._transitionEngine.removeNode(e,n,l||!1,t)}disableAnimations(e,n){this._transitionEngine.markElementAsDisabled(e,n)}process(e,n,t,l){if("@"==t.charAt(0)){const[e,i]=Ix(t);this._timelineEngine.command(e,n,i,l)}else this._transitionEngine.trigger(e,n,t,l)}listen(e,n,t,l,i){if("@"==t.charAt(0)){const[e,l]=Ix(t);return this._timelineEngine.listen(e,n,l,i)}return this._transitionEngine.listen(e,n,t,l,i)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}const SD=(()=>(class extends ax{constructor(e,n){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(n.body,{id:"0",encapsulation:nn.None,styles:[],data:{animation:[]}})}build(e){const n=this._nextAnimationId.toString();this._nextAnimationId++;const t=Array.isArray(e)?dx(e):e;return bD(this._renderer,null,n,"register",[t]),new ED(n,this._renderer)}}))();class ED extends cx{constructor(e,n){super(),this._id=e,this._renderer=n}create(e,n){return new vD(this._id,e,n||{},this._renderer)}}class vD{constructor(e,n,t,l){this.id=e,this.element=n,this._renderer=l,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",t)}_listen(e,n){return this._renderer.listen(this.element,`@@${this.id}:${e}`,n)}_command(e,...n){return bD(this._renderer,this.element,this.id,e,n)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(e){this._command("setPosition",e)}getPosition(){return 0}}function bD(e,n,t,l,i){return e.setProperty(n,`@@${t}:${l}`,i)}const OD="@",RD="@.disabled",TD=(()=>(class{constructor(e,n,t){this.delegate=e,this.engine=n,this._zone=t,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),n.onRemovalComplete=(e,n)=>{n&&n.parentNode(e)&&n.removeChild(e.parentNode,e)}}createRenderer(e,n){const t=this.delegate.createRenderer(e,n);if(!(e&&n&&n.data&&n.data.animation)){let e=this._rendererCache.get(t);return e||(e=new CD("",t,this.engine),this._rendererCache.set(t,e)),e}const l=n.id,i=n.id+"-"+this._currentId;return this._currentId++,this.engine.register(i,e),n.data.animation.forEach(n=>this.engine.registerTrigger(l,i,e,n.name,n)),new ID(this,i,t,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,n,t){e>=0&&e<this._microtaskId?this._zone.run(()=>n(t)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(e=>{const[n,t]=e;n(t)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([n,t]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}))();class CD{constructor(e,n,t){this.namespaceId=e,this.delegate=n,this.engine=t,this.destroyNode=this.delegate.destroyNode?e=>n.destroyNode(e):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,n){return this.delegate.createElement(e,n)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,n){this.delegate.appendChild(e,n),this.engine.onInsert(this.namespaceId,n,e,!1)}insertBefore(e,n,t){this.delegate.insertBefore(e,n,t),this.engine.onInsert(this.namespaceId,n,e,!0)}removeChild(e,n,t){this.engine.onRemove(this.namespaceId,n,this.delegate,t)}selectRootElement(e,n){return this.delegate.selectRootElement(e,n)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,n,t,l){this.delegate.setAttribute(e,n,t,l)}removeAttribute(e,n,t){this.delegate.removeAttribute(e,n,t)}addClass(e,n){this.delegate.addClass(e,n)}removeClass(e,n){this.delegate.removeClass(e,n)}setStyle(e,n,t,l){this.delegate.setStyle(e,n,t,l)}removeStyle(e,n,t){this.delegate.removeStyle(e,n,t)}setProperty(e,n,t){n.charAt(0)==OD&&n==RD?this.disableAnimations(e,!!t):this.delegate.setProperty(e,n,t)}setValue(e,n){this.delegate.setValue(e,n)}listen(e,n,t){return this.delegate.listen(e,n,t)}disableAnimations(e,n){this.engine.disableAnimations(e,n)}}class ID extends CD{constructor(e,n,t,l){super(n,t,l),this.factory=e,this.namespaceId=n}setProperty(e,n,t){n.charAt(0)==OD?"."==n.charAt(1)&&n==RD?this.disableAnimations(e,t=void 0===t||!!t):this.engine.process(this.namespaceId,e,n.substr(1),t):this.delegate.setProperty(e,n,t)}listen(e,n,t){if(n.charAt(0)==OD){const l=function(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(e);let i=n.substr(1),r="";return i.charAt(0)!=OD&&([i,r]=function(e){const n=e.indexOf(".");return[e.substring(0,n),e.substr(n+1)]}(i)),this.engine.listen(this.namespaceId,l,i,r,e=>{this.factory.scheduleListenerCallback(e._data||-1,t,e)})}return this.delegate.listen(e,n,t)}}const yD=(()=>(class extends fD{constructor(e,n,t){super(e.body,n,t)}}))();function _D(){return new DM}function AD(e,n,t){return new TD(e,n,t)}const wD=new Ce("AnimationModuleType"),ND=(()=>(class{}))(),PD=(()=>{class e{constructor(e,n){this.gameService=e,this.router=n,this.lastRegion=Hu.VILLAGE}canActivate(e,n){switch(e.routeConfig.path){case"redirect":const n="/regions/"+Hu[this.lastRegion].toLowerCase();return this.router.navigate([n],{skipLocationChange:!1}),!1;case"crafting":return!!this.gameService.isEnabled(bu.CRAFTING)||(this.goToError(),!1);case"market":return!!this.gameService.isEnabled(bu.MARKET)||(this.goToError(),!1);case"research":return!!this.gameService.isEnabled(bu.RESEARCH)||(this.goToError(),!1);case"army":return!!this.gameService.isEnabled(bu.ARMY)||(this.goToError(),!1);case"religion":return!!this.gameService.isEnabled(bu.RELIGION)||(this.goToError(),!1);case"weather":return!!this.gameService.isEnabled(bu.WEATHER)||(this.goToError(),!1);case"world":return!!this.gameService.isEnabled(bu.CARTOGRAPHY)||(this.goToError(),!1);case"village":return this.lastRegion=Hu.VILLAGE,!0;case"forest":return this.lastRegion=Hu.FOREST,!0;case"mountains":return this.gameService.isEnabled(bu.MOUNTAINS)?(this.lastRegion=Hu.MOUNTAINS,!0):(this.goToError(),!1);case"fort":return this.gameService.isEnabled(bu.FORT)?(this.lastRegion=Hu.FORT,!0):(this.goToError(),!1);case"sea":return this.gameService.isEnabled(bu.SEA)?(this.lastRegion=Hu.SEA,!0):(this.goToError(),!1);case"field":return this.gameService.isEnabled(bu.FIELD)?(this.lastRegion=Hu.FIELD,!0):(this.goToError(),!1);case"plateau":return this.gameService.isEnabled(bu.PLATEAU)?(this.lastRegion=Hu.PLATEAU,!0):(this.goToError(),!1);default:return!1}}goToError(){this.router.navigate(["/404"],{skipLocationChange:!0})}}return e.ngInjectableDef=de({factory:function(){return new e(Le(Ym),Le(Fg))},token:e,providedIn:"root"}),e})();class kD{constructor(){this.handlers={}}shouldDetach(e){return e.routeConfig&&("village"===e.routeConfig.path||"fort"===e.routeConfig.path||"forest"===e.routeConfig.path||"field"===e.routeConfig.path||"mountains"===e.routeConfig.path||"plateau"===e.routeConfig.path||"sea"===e.routeConfig.path)}store(e,n){this.handlers[e.routeConfig.path]=n}shouldAttach(e){return!!e.routeConfig&&!!this.handlers[e.routeConfig.path]}retrieve(e){return e.routeConfig?this.handlers[e.routeConfig.path]:null}shouldReuseRoute(e,n){return!1}}class xD{}var MD=mu(po,[mo],function(e){return function(e){const n={},t=[];let l=!1;for(let i=0;i<e.length;i++){const r=e[i];r.token===Ge&&!0===r.value&&(l=!0),1073741824&r.flags&&t.push(r.token),r.index=i,n[jt(r.token)]=r}return{factory:null,providersByKey:n,providers:e,modules:t,isRoot:l}}([Pl(512,Jn,et,[[8,[mp,bp,gf,Uv,eb,Fb,SO,GO,eR,dT,vT,UT,EI,FI,ry,Iy,Qy,d_,x_,$_,dA,vA,ox]],[3,Jn],tt]),Pl(4608,zp,zp,[]),Pl(5120,$i,Vr,[[3,$i]]),Pl(4608,Fo,Ho,[$i,[2,Lo]]),Pl(5120,_i,zr,[or]),Pl(5120,Ui,Gi,[]),Pl(5120,Ct,Br,[]),Pl(5120,It,Wr,[]),Pl(4608,uh,oh,[oa]),Pl(6144,wn,null,[uh]),Pl(4608,eh,th,[]),Pl(5120,_c,function(e,n,t,l,i,r,s,u){return[new Zc(e,n,t),new sh(l),new lh(i,r,s,u)]},[oa,or,Vi,oa,oa,eh,Yi,[2,nh]]),Pl(4608,Ac,Ac,[_c,or]),Pl(135680,Pc,Pc,[oa]),Pl(4608,Hc,Hc,[Ac,Pc,Ui]),Pl(4608,Lx,Dx,[]),Pl(5120,MM,_D,[]),Pl(4608,fD,yD,[oa,Lx,MM]),Pl(5120,ot,AD,[Hc,fD,or]),Pl(6144,Nc,null,[Pc]),Pl(4608,mr,mr,[or]),Pl(5120,yd,up,[Fg]),Pl(4608,jg,jg,[]),Pl(6144,$g,null,[jg]),Pl(135680,qg,qg,[Fg,wr,Zi,We,$g]),Pl(4608,Kg,Kg,[]),Pl(5120,Xg,tp,[Fg,ca,Qg]),Pl(5120,hp,cp,[op]),Pl(5120,zi,function(e){return[e]},[hp]),Pl(4608,ax,SD,[ot,oa]),Pl(4608,uS,uS,[oa,or,Lf,rS]),Pl(4608,Jm,Jm,[Bm,Mm,Ym,Vm,Lm,qm,Gm,jm]),Pl(1073742336,ym,ym,[]),Pl(1073742336,_m,_m,[]),Pl(1073742336,ua,ua,[]),Pl(1024,Dn,fh,[]),Pl(1024,Rr,function(){return[ep()]},[]),Pl(512,op,op,[We]),Pl(1024,Fi,function(e,n){return[(t=e,Cc("probe",yc),Cc("coreTokens",Object.assign({},Ic,(t||[]).reduce((e,n)=>(e[n.name]=n.token,e),{}))),()=>yc),ap(n)];var t},[[2,Rr],op]),Pl(512,Hi,Hi,[[2,Fi]]),Pl(131584,_r,_r,[or,Yi,We,Dn,Jn,Hi]),Pl(1073742336,Yr,Yr,[_r]),Pl(1073742336,Sh,Sh,[[3,Sh]]),Pl(1024,Zg,ip,[[3,Fg]]),Pl(512,id,rd,[]),Pl(512,Vg,Vg,[]),Pl(256,Qg,{},[]),Pl(1024,Eo,lp,[fo,[2,vo],Qg]),Pl(512,bo,bo,[Eo,fo]),Pl(512,Zi,Zi,[]),Pl(512,wr,kr,[Zi,[2,Nr]]),Pl(1024,Ng,function(){return[[{path:"",redirectTo:"regions/redirect",pathMatch:"full"},{path:"404",component:fp,pathMatch:"full"},{path:"resources",component:ef},{path:"crafting",component:Nv,canActivate:[PD]},{path:"market",component:zv,canActivate:[PD]},{path:"research",component:Cb,canActivate:[PD]},{path:"army",component:nO,canActivate:[PD]},{path:"religion",component:IO,canActivate:[PD]},{path:"weather",component:WO,canActivate:[PD]},{path:"world",component:OR,canActivate:[PD]},{path:"heritage",component:pT},{path:"royal",component:NT},{path:"regions",children:[{path:"",redirectTo:"redirect",pathMatch:"full"},{path:"redirect",component:QC,canActivate:[PD]},{path:"village",component:QC,canActivate:[PD]},{path:"fort",component:vI,canActivate:[PD]},{path:"forest",component:UI,canActivate:[PD]},{path:"field",component:uy,canActivate:[PD]},{path:"mountains",component:_y,canActivate:[PD]},{path:"plateau",component:Jy,canActivate:[PD]},{path:"sea",component:p_,canActivate:[PD]}]},{path:"management",children:[{path:"",redirectTo:"general",pathMatch:"full"},{path:"general",component:H_},{path:"effects",component:K_},{path:"forestM",component:gA}]},{path:"**",redirectTo:"regions/village",pathMatch:"full"}]]},[]),Pl(512,Ag,kD,[]),Pl(1024,Fg,sp,[_r,id,Vg,bo,We,wr,Zi,Ng,Qg,[2,kg],[2,Ag]]),Pl(1073742336,np,np,[[2,Zg],[2,Fg]]),Pl(1073742336,xD,xD,[]),Pl(1073742336,ND,ND,[]),Pl(1073742336,fS,fS,[]),Pl(1073742336,po,po,[]),Pl(256,Ge,!0,[]),Pl(256,wD,"NoopAnimations",[])])});zu.production&&function(){if(rn)throw new Error("Cannot enable prod mode after platform setup.");ln=!1}(),mh().bootstrapModuleFactory(MD).catch(e=>console.log(e))}},[[0,0]]]);
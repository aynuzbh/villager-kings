(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,n,t){e.exports=t("zUnb")},crnd:function(e,n){function t(e){return Promise.resolve().then(function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n})}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id="crnd"},zUnb:function(e,n,t){"use strict";t.r(n);var l=function(e,n){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])})(e,n)};function i(e,n){function t(){this.constructor=e}l(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}var r=function(){return(r=Object.assign||function(e){for(var n,t=1,l=arguments.length;t<l;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e}).apply(this,arguments)};function o(e,n,t,l){var i,r=arguments.length,o=r<3?n:null===l?l=Object.getOwnPropertyDescriptor(n,t):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,n,t,l);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(o=(r<3?i(o):r>3?i(n,t,o):i(n,t))||o);return r>3&&o&&Object.defineProperty(n,t,o),o}function u(e,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,n)}function s(e){var n="function"==typeof Symbol&&e[Symbol.iterator],t=0;return n?n.call(e):{next:function(){return e&&t>=e.length&&(e=void 0),{value:e&&e[t++],done:!e}}}}function a(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var l,i,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(l=r.next()).done;)o.push(l.value)}catch(u){i={error:u}}finally{try{l&&!l.done&&(t=r.return)&&t.call(r)}finally{if(i)throw i.error}}return o}function c(){for(var e=[],n=0;n<arguments.length;n++)e=e.concat(a(arguments[n]));return e}var p=Array.isArray||function(e){return e&&"number"==typeof e.length};function h(e){return null!==e&&"object"==typeof e}function d(e){return"function"==typeof e}function g(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,n){return n+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}g.prototype=Object.create(Error.prototype);var f=g,m=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var n;if(!this.closed){var t=this._parentOrParents,l=this._unsubscribe,i=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof e)t.remove(this);else if(null!==t)for(var r=0;r<t.length;++r)t[r].remove(this);if(d(l))try{l.call(this)}catch(s){n=s instanceof f?v(s.errors):[s]}if(p(i)){r=-1;for(var o=i.length;++r<o;){var u=i[r];if(h(u))try{u.unsubscribe()}catch(s){n=n||[],s instanceof f?n=n.concat(v(s.errors)):n.push(s)}}}if(n)throw new f(n)}},e.prototype.add=function(n){var t=n;if(!n)return e.EMPTY;switch(typeof n){case"function":t=new e(n);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof e)){var l=t;(t=new e)._subscriptions=[l]}break;default:throw new Error("unrecognized teardown "+n+" added to Subscription.")}var i=t._parentOrParents;if(null===i)t._parentOrParents=this;else if(i instanceof e){if(i===this)return t;t._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return t;i.push(this)}var r=this._subscriptions;return null===r?this._subscriptions=[t]:r.push(t),t},e.prototype.remove=function(e){var n=this._subscriptions;if(n){var t=n.indexOf(e);-1!==t&&n.splice(t,1)}},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();function v(e){return e.reduce(function(e,n){return e.concat(n instanceof f?n.errors:n)},[])}var S=!1,E={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){S=e},get useDeprecatedSynchronousErrorHandling(){return S}};function y(e){setTimeout(function(){throw e},0)}var R={closed:!0,next:function(e){},error:function(e){if(E.useDeprecatedSynchronousErrorHandling)throw e;y(e)},complete:function(){}},b="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),O=function(e){function n(t,l,i){var r=e.call(this)||this;switch(r.syncErrorValue=null,r.syncErrorThrown=!1,r.syncErrorThrowable=!1,r.isStopped=!1,arguments.length){case 0:r.destination=R;break;case 1:if(!t){r.destination=R;break}if("object"==typeof t){t instanceof n?(r.syncErrorThrowable=t.syncErrorThrowable,r.destination=t,t.add(r)):(r.syncErrorThrowable=!0,r.destination=new T(r,t));break}default:r.syncErrorThrowable=!0,r.destination=new T(r,t,l,i)}return r}return i(n,e),n.prototype[b]=function(){return this},n.create=function(e,t,l){var i=new n(e,t,l);return i.syncErrorThrowable=!1,i},n.prototype.next=function(e){this.isStopped||this._next(e)},n.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},n.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},n.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},n.prototype._next=function(e){this.destination.next(e)},n.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},n.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},n.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},n}(m),T=function(e){function n(n,t,l,i){var r,o=e.call(this)||this;o._parentSubscriber=n;var u=o;return d(t)?r=t:t&&(r=t.next,l=t.error,i=t.complete,t!==R&&(d((u=Object.create(t)).unsubscribe)&&o.add(u.unsubscribe.bind(u)),u.unsubscribe=o.unsubscribe.bind(o))),o._context=u,o._next=r,o._error=l,o._complete=i,o}return i(n,e),n.prototype.next=function(e){if(!this.isStopped&&this._next){var n=this._parentSubscriber;E.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?this.__tryOrSetError(n,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},n.prototype.error=function(e){if(!this.isStopped){var n=this._parentSubscriber,t=E.useDeprecatedSynchronousErrorHandling;if(this._error)t&&n.syncErrorThrowable?(this.__tryOrSetError(n,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(n.syncErrorThrowable)t?(n.syncErrorValue=e,n.syncErrorThrown=!0):y(e),this.unsubscribe();else{if(this.unsubscribe(),t)throw e;y(e)}}},n.prototype.complete=function(){var e=this;if(!this.isStopped){var n=this._parentSubscriber;if(this._complete){var t=function(){return e._complete.call(e._context)};E.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?(this.__tryOrSetError(n,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}},n.prototype.__tryOrUnsub=function(e,n){try{e.call(this._context,n)}catch(t){if(this.unsubscribe(),E.useDeprecatedSynchronousErrorHandling)throw t;y(t)}},n.prototype.__tryOrSetError=function(e,n,t){if(!E.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,t)}catch(l){return E.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=l,e.syncErrorThrown=!0,!0):(y(l),!0)}return!1},n.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},n}(O),C="function"==typeof Symbol&&Symbol.observable||"@@observable";function I(){}function A(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return N(e)}function N(e){return e?1===e.length?e[0]:function(n){return e.reduce(function(e,n){return n(e)},n)}:I}var _=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(n){var t=new e;return t.source=this,t.operator=n,t},e.prototype.subscribe=function(e,n,t){var l=this.operator,i=function(e,n,t){if(e){if(e instanceof O)return e;if(e[b])return e[b]()}return e||n||t?new O(e,n,t):new O(R)}(e,n,t);if(i.add(l?l.call(i,this.source):this.source||E.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),E.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){E.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=n),function(e){for(;e;){var n=e.destination;if(e.closed||e.isStopped)return!1;e=n&&n instanceof O?n:null}return!0}(e)?e.error(n):console.warn(n)}},e.prototype.forEach=function(e,n){var t=this;return new(n=w(n))(function(n,l){var i;i=t.subscribe(function(n){try{e(n)}catch(t){l(t),i&&i.unsubscribe()}},l,n)})},e.prototype._subscribe=function(e){var n=this.source;return n&&n.subscribe(e)},e.prototype[C]=function(){return this},e.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 0===e.length?this:N(e)(this)},e.prototype.toPromise=function(e){var n=this;return new(e=w(e))(function(e,t){var l;n.subscribe(function(e){return l=e},function(e){return t(e)},function(){return e(l)})})},e.create=function(n){return new e(n)},e}();function w(e){if(e||(e=E.Promise||Promise),!e)throw new Error("no Promise impl found");return e}function P(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}P.prototype=Object.create(Error.prototype);var x=P,k=function(e){function n(n,t){var l=e.call(this)||this;return l.subject=n,l.subscriber=t,l.closed=!1,l}return i(n,e),n.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,n=e.observers;if(this.subject=null,n&&0!==n.length&&!e.isStopped&&!e.closed){var t=n.indexOf(this.subscriber);-1!==t&&n.splice(t,1)}}},n}(m),M=function(e){function n(n){var t=e.call(this,n)||this;return t.destination=n,t}return i(n,e),n}(O),D=function(e){function n(){var n=e.call(this)||this;return n.observers=[],n.closed=!1,n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return i(n,e),n.prototype[b]=function(){return new M(this)},n.prototype.lift=function(e){var n=new L(this,this);return n.operator=e,n},n.prototype.next=function(e){if(this.closed)throw new x;if(!this.isStopped)for(var n=this.observers,t=n.length,l=n.slice(),i=0;i<t;i++)l[i].next(e)},n.prototype.error=function(e){if(this.closed)throw new x;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var n=this.observers,t=n.length,l=n.slice(),i=0;i<t;i++)l[i].error(e);this.observers.length=0},n.prototype.complete=function(){if(this.closed)throw new x;this.isStopped=!0;for(var e=this.observers,n=e.length,t=e.slice(),l=0;l<n;l++)t[l].complete();this.observers.length=0},n.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},n.prototype._trySubscribe=function(n){if(this.closed)throw new x;return e.prototype._trySubscribe.call(this,n)},n.prototype._subscribe=function(e){if(this.closed)throw new x;return this.hasError?(e.error(this.thrownError),m.EMPTY):this.isStopped?(e.complete(),m.EMPTY):(this.observers.push(e),new k(this,e))},n.prototype.asObservable=function(){var e=new _;return e.source=this,e},n.create=function(e,n){return new L(e,n)},n}(_),L=function(e){function n(n,t){var l=e.call(this)||this;return l.destination=n,l.source=t,l}return i(n,e),n.prototype.next=function(e){var n=this.destination;n&&n.next&&n.next(e)},n.prototype.error=function(e){var n=this.destination;n&&n.error&&this.destination.error(e)},n.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},n.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):m.EMPTY},n}(D);function F(e){return e&&"function"==typeof e.schedule}var U=function(e){function n(n,t,l){var i=e.call(this)||this;return i.parent=n,i.outerValue=t,i.outerIndex=l,i.index=0,i}return i(n,e),n.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},n.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},n.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},n}(O),H=function(e){return function(n){for(var t=0,l=e.length;t<l&&!n.closed;t++)n.next(e[t]);n.complete()}};function G(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var B=G(),V=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function W(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var z=function(e){if(e&&"function"==typeof e[C])return l=e,function(e){var n=l[C]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)};if(V(e))return H(e);if(W(e))return t=e,function(e){return t.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,y),e};if(e&&"function"==typeof e[B])return n=e,function(e){for(var t=n[B]();;){var l=t.next();if(l.done){e.complete();break}if(e.next(l.value),e.closed)break}return"function"==typeof t.return&&e.add(function(){t.return&&t.return()}),e};var n,t,l,i=h(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+i+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function Y(e,n,t,l,i){if(void 0===i&&(i=new U(e,t,l)),!i.closed)return n instanceof _?n.subscribe(i):z(n)(i)}var K=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return i(n,e),n.prototype.notifyNext=function(e,n,t,l,i){this.destination.next(n)},n.prototype.notifyError=function(e,n){this.destination.error(e)},n.prototype.notifyComplete=function(e){this.destination.complete()},n}(O);function j(e,n){return function(t){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return t.lift(new $(e,n))}}var $=function(){function e(e,n){this.project=e,this.thisArg=n}return e.prototype.call=function(e,n){return n.subscribe(new Q(e,this.project,this.thisArg))},e}(),Q=function(e){function n(n,t,l){var i=e.call(this,n)||this;return i.project=t,i.count=0,i.thisArg=l||i,i}return i(n,e),n.prototype._next=function(e){var n;try{n=this.project.call(this.thisArg,e,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(n)},n}(O);function q(e,n){return new _(function(t){var l=new m,i=0;return l.add(n.schedule(function(){i!==e.length?(t.next(e[i++]),t.closed||l.add(this.schedule())):t.complete()})),l})}function X(e,n){return n?function(e,n){if(null!=e){if(function(e){return e&&"function"==typeof e[C]}(e))return function(e,n){return new _(function(t){var l=new m;return l.add(n.schedule(function(){var i=e[C]();l.add(i.subscribe({next:function(e){l.add(n.schedule(function(){return t.next(e)}))},error:function(e){l.add(n.schedule(function(){return t.error(e)}))},complete:function(){l.add(n.schedule(function(){return t.complete()}))}}))})),l})}(e,n);if(W(e))return function(e,n){return new _(function(t){var l=new m;return l.add(n.schedule(function(){return e.then(function(e){l.add(n.schedule(function(){t.next(e),l.add(n.schedule(function(){return t.complete()}))}))},function(e){l.add(n.schedule(function(){return t.error(e)}))})})),l})}(e,n);if(V(e))return q(e,n);if(function(e){return e&&"function"==typeof e[B]}(e)||"string"==typeof e)return function(e,n){if(!e)throw new Error("Iterable cannot be null");return new _(function(t){var l,i=new m;return i.add(function(){l&&"function"==typeof l.return&&l.return()}),i.add(n.schedule(function(){l=e[B](),i.add(n.schedule(function(){if(!t.closed){var e,n;try{var i=l.next();e=i.value,n=i.done}catch(r){return void t.error(r)}n?t.complete():(t.next(e),this.schedule())}}))})),i})}(e,n)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,n):e instanceof _?e:new _(z(e))}function Z(e,n,t){return void 0===t&&(t=Number.POSITIVE_INFINITY),"function"==typeof n?function(l){return l.pipe(Z(function(t,l){return X(e(t,l)).pipe(j(function(e,i){return n(t,e,l,i)}))},t))}:("number"==typeof n&&(t=n),function(n){return n.lift(new J(e,t))})}var J=function(){function e(e,n){void 0===n&&(n=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=n}return e.prototype.call=function(e,n){return n.subscribe(new ee(e,this.project,this.concurrent))},e}(),ee=function(e){function n(n,t,l){void 0===l&&(l=Number.POSITIVE_INFINITY);var i=e.call(this,n)||this;return i.project=t,i.concurrent=l,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return i(n,e),n.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},n.prototype._tryNext=function(e){var n,t=this.index++;try{n=this.project(e,t)}catch(l){return void this.destination.error(l)}this.active++,this._innerSub(n,e,t)},n.prototype._innerSub=function(e,n,t){var l=new U(this,void 0,void 0);this.destination.add(l),Y(this,e,n,t,l)},n.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},n.prototype.notifyNext=function(e,n,t,l,i){this.destination.next(n)},n.prototype.notifyComplete=function(e){var n=this.buffer;this.remove(e),this.active--,n.length>0?this._next(n.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},n}(K);function ne(e){return e}function te(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),Z(ne,e)}function le(e,n){return n?q(e,n):new _(H(e))}function ie(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=Number.POSITIVE_INFINITY,l=null,i=e[e.length-1];return F(i)?(l=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof i&&(t=e.pop()),null===l&&1===e.length&&e[0]instanceof _?e[0]:te(t)(le(e,l))}function re(){return function(e){return e.lift(new oe(e))}}var oe=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,n){var t=this.connectable;t._refCount++;var l=new ue(e,t),i=n.subscribe(l);return l.closed||(l.connection=t.connect()),i},e}(),ue=function(e){function n(n,t){var l=e.call(this,n)||this;return l.connectable=t,l}return i(n,e),n.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var n=e._refCount;if(n<=0)this.connection=null;else if(e._refCount=n-1,n>1)this.connection=null;else{var t=this.connection,l=e._connection;this.connection=null,!l||t&&l!==t||l.unsubscribe()}}else this.connection=null},n}(O),se=function(e){function n(n,t){var l=e.call(this)||this;return l.source=n,l.subjectFactory=t,l._refCount=0,l._isComplete=!1,l}return i(n,e),n.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},n.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},n.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new m).add(this.source.subscribe(new ce(this.getSubject(),this))),e.closed&&(this._connection=null,e=m.EMPTY)),e},n.prototype.refCount=function(){return re()(this)},n}(_).prototype,ae={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:se._subscribe},_isComplete:{value:se._isComplete,writable:!0},getSubject:{value:se.getSubject},connect:{value:se.connect},refCount:{value:se.refCount}},ce=function(e){function n(n,t){var l=e.call(this,n)||this;return l.connectable=t,l}return i(n,e),n.prototype._error=function(n){this._unsubscribe(),e.prototype._error.call(this,n)},n.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},n.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var n=e._connection;e._refCount=0,e._subject=null,e._connection=null,n&&n.unsubscribe()}},n}(M);function pe(){return new D}var he="__parameters__",de="__prop__metadata__";function ge(e){return function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];if(e){var l=e.apply(void 0,c(n));for(var i in l)this[i]=l[i]}}}function fe(e,n,t){var l=ge(n);function i(){for(var e,n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];if(this instanceof i)return l.apply(this,n),this;var r=new((e=i).bind.apply(e,c([void 0],n)));return o.annotation=r,o;function o(e,n,t){for(var l=e.hasOwnProperty(he)?e[he]:Object.defineProperty(e,he,{value:[]})[he];l.length<=t;)l.push(null);return(l[t]=l[t]||[]).push(r),e}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i}function me(e,n,t,l){var i=ge(n);function r(){for(var e,n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];if(this instanceof r)return i.apply(this,n),this;var o=new((e=r).bind.apply(e,c([void 0],n)));return function(e,t){var i=e.constructor,r=i.hasOwnProperty(de)?i[de]:Object.defineProperty(i,de,{value:{}})[de];r[t]=r.hasOwnProperty(t)&&r[t]||[],r[t].unshift(o),l&&l.apply(void 0,c([e,t],n))}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=e,r.annotationCls=r,r}var ve=fe("Inject",function(e){return{token:e}}),Se=fe("Optional"),Ee=fe("Self"),ye=fe("SkipSelf"),Re=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({});function be(e){for(var n in e)if(e[n]===be)return n;throw Error("Could not find renamed property on target object.")}function Oe(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Te(e){var n=e[Ce];return n&&n.token===e?n:null}var Ce=be({ngInjectableDef:be});function Ie(e){if("string"==typeof e)return e;if(e instanceof Array)return"["+e.map(Ie).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return""+e.overriddenName;if(e.name)return""+e.name;var n=e.toString();if(null==n)return""+n;var t=n.indexOf("\n");return-1===t?n:n.substring(0,t)}var Ae=be({__forward_ref__:be});function Ne(e){return e.__forward_ref__=Ne,e.toString=function(){return Ie(this())},e}function _e(e){var n=e;return"function"==typeof n&&n.hasOwnProperty(Ae)&&n.__forward_ref__===Ne?n():e}var we,Pe="undefined"!=typeof globalThis&&globalThis,xe="undefined"!=typeof window&&window,ke="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Me="undefined"!=typeof global&&global,De=Pe||Me||xe||ke,Le=function(){function e(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.ngInjectableDef=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.ngInjectableDef=Oe({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}return e.prototype.toString=function(){return"InjectionToken "+this._desc},e}(),Fe=new Le("INJECTOR",-1),Ue=new Object,He=/\n/gm,Ge="\u0275",Be="__source",Ve=be({provide:String,useValue:be}),We=void 0;function ze(e){var n=We;return We=e,n}function Ye(e,n){return void 0===n&&(n=Re.Default),(we||function(e,n){if(void 0===n&&(n=Re.Default),void 0===We)throw new Error("inject() must be called from an injection context");return null===We?function(e,n,t){var l=Te(e);if(l&&"root"==l.providedIn)return void 0===l.value?l.value=l.factory():l.value;if(t&Re.Optional)return null;throw new Error("Injector: NOT_FOUND ["+Ie(e)+"]")}(e,0,n):We.get(e,n&Re.Optional?null:void 0,n)})(e,n)}var Ke=Ye,je=function(){function e(){}return e.prototype.get=function(e,n){if(void 0===n&&(n=Ue),n===Ue){var t=new Error("NullInjectorError: No provider for "+Ie(e)+"!");throw t.name="NullInjectorError",t}return n},e}();function $e(e,n,t,l){void 0===l&&(l=null),e=e&&"\n"===e.charAt(0)&&e.charAt(1)==Ge?e.substr(2):e;var i=Ie(n);if(n instanceof Array)i=n.map(Ie).join(" -> ");else if("object"==typeof n){var r=[];for(var o in n)if(n.hasOwnProperty(o)){var u=n[o];r.push(o+":"+("string"==typeof u?JSON.stringify(u):Ie(u)))}i="{"+r.join(", ")+"}"}return t+(l?"("+l+")":"")+"["+i+"]: "+e.replace(He,"\n  ")}var Qe=new Le("The presence of this token marks an injector as being the root injector."),qe=function(e,n,t){return new tn(e,n,t)},Xe=function(){function e(){}return e.create=function(e,n){return Array.isArray(e)?qe(e,n,""):qe(e.providers,e.parent,e.name||"")},e.THROW_IF_NOT_FOUND=Ue,e.NULL=new je,e.ngInjectableDef=Oe({token:e,providedIn:"any",factory:function(){return Ye(Fe)}}),e.__NG_ELEMENT_ID__=-1,e}(),Ze=function(e){return e},Je=[],en=Ze,nn=function(){return Array.prototype.slice.call(arguments)},tn=function(){function e(e,n,t){void 0===n&&(n=Xe.NULL),void 0===t&&(t=null),this.parent=n,this.source=t;var l=this._records=new Map;l.set(Xe,{token:Xe,fn:Ze,deps:Je,value:this,useNew:!1}),l.set(Fe,{token:Fe,fn:Ze,deps:Je,value:this,useNew:!1}),function e(n,t){if(t)if((t=_e(t))instanceof Array)for(var l=0;l<t.length;l++)e(n,t[l]);else{if("function"==typeof t)throw rn("Function/Class not supported",t);if(!t||"object"!=typeof t||!t.provide)throw rn("Unexpected provider",t);var i=_e(t.provide),r=function(e){var n=function(e){var n=Je,t=e.deps;if(t&&t.length){n=[];for(var l=0;l<t.length;l++){var i=6;if((s=_e(t[l]))instanceof Array)for(var r=0,o=s;r<o.length;r++){var u=o[r];u instanceof Se||u==Se?i|=1:u instanceof ye||u==ye?i&=-3:u instanceof Ee||u==Ee?i&=-5:s=u instanceof ve?u.token:_e(u)}n.push({token:s,options:i})}}else if(e.useExisting){var s;n=[{token:s=_e(e.useExisting),options:6}]}else if(!(t||Ve in e))throw rn("'deps' required",e);return n}(e),t=Ze,l=Je,i=!1,r=_e(e.provide);if(Ve in e)l=e.useValue;else if(e.useFactory)t=e.useFactory;else if(e.useExisting);else if(e.useClass)i=!0,t=_e(e.useClass);else{if("function"!=typeof r)throw rn("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",e);i=!0,t=r}return{deps:n,fn:t,useNew:i,value:l}}(t);if(!0===t.multi){var o=n.get(i);if(o){if(o.fn!==nn)throw ln(i)}else n.set(i,o={token:t.provide,deps:[],useNew:!1,fn:nn,value:Je});o.deps.push({token:i=t,options:6})}var u=n.get(i);if(u&&u.fn==nn)throw ln(i);n.set(i,r)}}(l,e)}return e.prototype.get=function(e,n,t){void 0===t&&(t=Re.Default);var l=this._records.get(e);try{return function e(n,t,l,i,r,o){try{return function(n,t,l,i,r,o){var u,s;if(!t||o&Re.SkipSelf)o&Re.Self||(s=i.get(n,r,Re.Default));else{if((s=t.value)==en)throw Error("\u0275Circular dependency");if(s===Je){t.value=en;var a=t.useNew,p=t.fn,h=t.deps,d=Je;if(h.length){d=[];for(var g=0;g<h.length;g++){var f=h[g],m=f.options,v=2&m?l.get(f.token):void 0;d.push(e(f.token,v,l,v||4&m?i:Xe.NULL,1&m?null:Xe.THROW_IF_NOT_FOUND,Re.Default))}}t.value=s=a?new((u=p).bind.apply(u,c([void 0],d))):p.apply(void 0,d)}}return s}(n,t,l,i,r,o)}catch(u){throw u instanceof Error||(u=new Error(u)),(u.ngTempTokenPath=u.ngTempTokenPath||[]).unshift(n),t&&t.value==en&&(t.value=Je),u}}(e,l,this._records,this.parent,n,t)}catch(i){return function(e,n,t,l){var i=e.ngTempTokenPath;throw n[Be]&&i.unshift(n[Be]),e.message=$e("\n"+e.message,i,"StaticInjectorError",l),e.ngTokenPath=i,e.ngTempTokenPath=null,e}(i,e,0,this.source)}},e.prototype.toString=function(){var e=[];return this._records.forEach(function(n,t){return e.push(Ie(t))}),"StaticInjector["+e.join(", ")+"]"},e}();function ln(e){return rn("Cannot mix multi providers and regular providers",e)}function rn(e,n){return new Error($e(e,n,"StaticInjectorError"))}var on="ngDebugContext",un="ngOriginalError",sn="ngErrorLogger",an=new Le("AnalyzeForEntryComponents"),cn=function(e){return e[e.Emulated=0]="Emulated",e[e.Native=1]="Native",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}({}),pn=function(){return("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(De)}(),hn=!0,dn=!1;function gn(){return dn=!0,hn}var fn=function(){function e(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),this.inertBodyElement=this.inertDocument.body,null==this.inertBodyElement){var n=this.inertDocument.createElement("html");this.inertDocument.appendChild(n),this.inertBodyElement=this.inertDocument.createElement("body"),n.appendChild(this.inertBodyElement)}this.inertBodyElement.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.inertBodyElement.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(e){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}return e.prototype.getInertBodyElement_XHR=function(e){e="<body><remove></remove>"+e+"</body>";try{e=encodeURI(e)}catch(l){return null}var n=new XMLHttpRequest;n.responseType="document",n.open("GET","data:text/html;charset=utf-8,"+e,!1),n.send(void 0);var t=n.response.body;return t.removeChild(t.firstChild),t},e.prototype.getInertBodyElement_DOMParser=function(e){e="<body><remove></remove>"+e+"</body>";try{var n=(new window.DOMParser).parseFromString(e,"text/html").body;return n.removeChild(n.firstChild),n}catch(t){return null}},e.prototype.getInertBodyElement_InertDocument=function(e){var n=this.inertDocument.createElement("template");return"content"in n?(n.innerHTML=e,n):(this.inertBodyElement.innerHTML=e,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)},e.prototype.stripCustomNsAttrs=function(e){for(var n=e.attributes,t=n.length-1;0<t;t--){var l=n.item(t).name;"xmlns:ns1"!==l&&0!==l.indexOf("ns1:")||e.removeAttribute(l)}for(var i=e.firstChild;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling},e}(),mn=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:\/?#]*(?:[\/?#]|$))/gi,vn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Sn(e){return(e=String(e)).match(mn)||e.match(vn)?e:(gn()&&console.warn("WARNING: sanitizing unsafe URL value "+e+" (see http://g.co/ng/security#xss)"),"unsafe:"+e)}function En(e){var n,t,l={};try{for(var i=s(e.split(",")),r=i.next();!r.done;r=i.next())l[r.value]=!0}catch(o){n={error:o}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(n)throw n.error}}return l}function yn(){for(var e,n,t=[],l=0;l<arguments.length;l++)t[l]=arguments[l];var i={};try{for(var r=s(t),o=r.next();!o.done;o=r.next()){var u=o.value;for(var a in u)u.hasOwnProperty(a)&&(i[a]=!0)}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return i}var Rn,bn=En("area,br,col,hr,img,wbr"),On=En("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Tn=En("rp,rt"),Cn=yn(Tn,On),In=yn(bn,yn(On,En("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),yn(Tn,En("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Cn),An=En("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Nn=En("srcset"),_n=yn(An,Nn,En("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),En("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),wn=En("script,style,template"),Pn=function(){function e(){this.sanitizedSomething=!1,this.buf=[]}return e.prototype.sanitizeChildren=function(e){for(var n=e.firstChild,t=!0;n;)if(n.nodeType===Node.ELEMENT_NODE?t=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,t&&n.firstChild)n=n.firstChild;else for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);var l=this.checkClobberedElement(n,n.nextSibling);if(l){n=l;break}n=this.checkClobberedElement(n,n.parentNode)}return this.buf.join("")},e.prototype.startElement=function(e){var n,t=e.nodeName.toLowerCase();if(!In.hasOwnProperty(t))return this.sanitizedSomething=!0,!wn.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);for(var l=e.attributes,i=0;i<l.length;i++){var r=l.item(i),o=r.name,u=o.toLowerCase();if(_n.hasOwnProperty(u)){var s=r.value;An[u]&&(s=Sn(s)),Nn[u]&&(n=s,s=(n=String(n)).split(",").map(function(e){return Sn(e.trim())}).join(", ")),this.buf.push(" ",o,'="',Mn(s),'"')}else this.sanitizedSomething=!0}return this.buf.push(">"),!0},e.prototype.endElement=function(e){var n=e.nodeName.toLowerCase();In.hasOwnProperty(n)&&!bn.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))},e.prototype.chars=function(e){this.buf.push(Mn(e))},e.prototype.checkClobberedElement=function(e,n){if(n&&(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+e.outerHTML);return n},e}(),xn=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,kn=/([^\#-~ |!])/g;function Mn(e){return e.replace(/&/g,"&amp;").replace(xn,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(kn,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Dn(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var Ln=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}({}),Fn=function(){return function(){}}(),Un=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),Hn=/^url\(([^)]+)\)$/;function Gn(e){return e[on]}function Bn(e){return e[un]}function Vn(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];e.error.apply(e,c(n))}var Wn=function(){function e(){this._console=console}return e.prototype.handleError=function(e){var n=this._findOriginalError(e),t=this._findContext(e),l=function(e){return e[sn]||Vn}(e);l(this._console,"ERROR",e),n&&l(this._console,"ORIGINAL ERROR",n),t&&l(this._console,"ERROR CONTEXT",t)},e.prototype._findContext=function(e){return e?Gn(e)?Gn(e):this._findContext(Bn(e)):null},e.prototype._findOriginalError=function(e){for(var n=Bn(e);n&&Bn(n);)n=Bn(n);return n},e}(),zn=/([A-Z])/g;function Yn(e){try{return null!=e?e.toString().slice(0,30):e}catch(n){return"[ERROR] Exception while trying to serialize the value"}}var Kn=null;function jn(){if(!Kn){var e=De.Symbol;if(e&&e.iterator)Kn=e.iterator;else for(var n=Object.getOwnPropertyNames(Map.prototype),t=0;t<n.length;++t){var l=n[t];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Kn=l)}}return Kn}function $n(e,n){return e===n||"number"==typeof e&&"number"==typeof n&&isNaN(e)&&isNaN(n)}function Qn(e,n){var t=Xn(e),l=Xn(n);return t&&l?function(e,n,t){for(var l=e[jn()](),i=n[jn()]();;){var r=l.next(),o=i.next();if(r.done&&o.done)return!0;if(r.done||o.done)return!1;if(!t(r.value,o.value))return!1}}(e,n,Qn):!(t||!e||"object"!=typeof e&&"function"!=typeof e||l||!n||"object"!=typeof n&&"function"!=typeof n)||$n(e,n)}var qn=function(){function e(e){this.wrapped=e}return e.wrap=function(n){return new e(n)},e.unwrap=function(n){return e.isWrapped(n)?n.wrapped:n},e.isWrapped=function(n){return n instanceof e},e}();function Xn(e){return!!Zn(e)&&(Array.isArray(e)||!(e instanceof Map)&&jn()in e)}function Zn(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Jn(e){return!!e&&"function"==typeof e.then}function et(e){return!!e&&"function"==typeof e.subscribe}var nt=function(){function e(e,n,t){this.previousValue=e,this.currentValue=n,this.firstChange=t}return e.prototype.isFirstChange=function(){return this.firstChange},e}(),tt=function(){return function(){}}(),lt=function(){return function(){}}();function it(e){var n=Error("No component factory found for "+Ie(e)+". Did you add it to @NgModule.entryComponents?");return n[rt]=e,n}var rt="ngComponent",ot=function(){function e(){}return e.prototype.resolveComponentFactory=function(e){throw it(e)},e}(),ut=function(){function e(){}return e.NULL=new ot,e}(),st=function(){function e(e,n,t){this._parent=n,this._ngModule=t,this._factories=new Map;for(var l=0;l<e.length;l++){var i=e[l];this._factories.set(i.componentType,i)}}return e.prototype.resolveComponentFactory=function(e){var n=this._factories.get(e);if(!n&&this._parent&&(n=this._parent.resolveComponentFactory(e)),!n)throw it(e);return new at(n,this._ngModule)},e}(),at=function(e){function n(n,t){var l=e.call(this)||this;return l.factory=n,l.ngModule=t,l.selector=n.selector,l.componentType=n.componentType,l.ngContentSelectors=n.ngContentSelectors,l.inputs=n.inputs,l.outputs=n.outputs,l}return i(n,e),n.prototype.create=function(e,n,t,l){return this.factory.create(e,n,t,l||this.ngModule)},n}(lt),ct=function(){return function(){}}(),pt=function(){return function(){}}();function ht(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n]}var dt=function(){function e(e){this.nativeElement=e}return e.__NG_ELEMENT_ID__=function(){return gt(e)},e}(),gt=ht,ft=function(){return function(){}}(),mt=function(){return function(){}}(),vt=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}({}),St=function(){function e(){}return e.__NG_ELEMENT_ID__=function(){return Et()},e}(),Et=ht,yt=new(function(){return function(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}())("8.1.0"),Rt=function(){function e(){}return e.prototype.supports=function(e){return Xn(e)},e.prototype.create=function(e){return new Ot(e)},e}(),bt=function(e,n){return n},Ot=function(){function e(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||bt}return e.prototype.forEachItem=function(e){var n;for(n=this._itHead;null!==n;n=n._next)e(n)},e.prototype.forEachOperation=function(e){for(var n=this._itHead,t=this._removalsHead,l=0,i=null;n||t;){var r=!t||n&&n.currentIndex<At(t,l,i)?n:t,o=At(r,l,i),u=r.currentIndex;if(r===t)l--,t=t._nextRemoved;else if(n=n._next,null==r.previousIndex)l++;else{i||(i=[]);var s=o-l,a=u-l;if(s!=a){for(var c=0;c<s;c++){var p=c<i.length?i[c]:i[c]=0,h=p+c;a<=h&&h<s&&(i[c]=p+1)}i[r.previousIndex]=a-s}}o!==u&&e(r,o,u)}},e.prototype.forEachPreviousItem=function(e){var n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)},e.prototype.forEachAddedItem=function(e){var n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)},e.prototype.forEachMovedItem=function(e){var n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)},e.prototype.forEachRemovedItem=function(e){var n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)},e.prototype.forEachIdentityChange=function(e){var n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)},e.prototype.diff=function(e){if(null==e&&(e=[]),!Xn(e))throw new Error("Error trying to diff '"+Ie(e)+"'. Only arrays and iterables are allowed");return this.check(e)?this:null},e.prototype.onDestroy=function(){},e.prototype.check=function(e){var n=this;this._reset();var t,l,i,r=this._itHead,o=!1;if(Array.isArray(e)){this.length=e.length;for(var u=0;u<this.length;u++)i=this._trackByFn(u,l=e[u]),null!==r&&$n(r.trackById,i)?(o&&(r=this._verifyReinsertion(r,l,i,u)),$n(r.item,l)||this._addIdentityChange(r,l)):(r=this._mismatch(r,l,i,u),o=!0),r=r._next}else t=0,function(e,n){if(Array.isArray(e))for(var t=0;t<e.length;t++)n(e[t]);else for(var l=e[jn()](),i=void 0;!(i=l.next()).done;)n(i.value)}(e,function(e){i=n._trackByFn(t,e),null!==r&&$n(r.trackById,i)?(o&&(r=n._verifyReinsertion(r,e,i,t)),$n(r.item,e)||n._addIdentityChange(r,e)):(r=n._mismatch(r,e,i,t),o=!0),r=r._next,t++}),this.length=t;return this._truncate(r),this.collection=e,this.isDirty},Object.defineProperty(e.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead},enumerable:!0,configurable:!0}),e.prototype._reset=function(){if(this.isDirty){var e=void 0,n=void 0;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=n)e.previousIndex=e.currentIndex,n=e._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}},e.prototype._mismatch=function(e,n,t,l){var i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(t,l))?($n(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,i,l)):null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(t,null))?($n(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,i,l)):e=this._addAfter(new Tt(n,t),i,l),e},e.prototype._verifyReinsertion=function(e,n,t,l){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(t,null);return null!==i?e=this._reinsertAfter(i,e._prev,l):e.currentIndex!=l&&(e.currentIndex=l,this._addToMoves(e,l)),e},e.prototype._truncate=function(e){for(;null!==e;){var n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)},e.prototype._reinsertAfter=function(e,n,t){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);var l=e._prevRemoved,i=e._nextRemoved;return null===l?this._removalsHead=i:l._nextRemoved=i,null===i?this._removalsTail=l:i._prevRemoved=l,this._insertAfter(e,n,t),this._addToMoves(e,t),e},e.prototype._moveAfter=function(e,n,t){return this._unlink(e),this._insertAfter(e,n,t),this._addToMoves(e,t),e},e.prototype._addAfter=function(e,n,t){return this._insertAfter(e,n,t),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e},e.prototype._insertAfter=function(e,n,t){var l=null===n?this._itHead:n._next;return e._next=l,e._prev=n,null===l?this._itTail=e:l._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new It),this._linkedRecords.put(e),e.currentIndex=t,e},e.prototype._remove=function(e){return this._addToRemovals(this._unlink(e))},e.prototype._unlink=function(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);var n=e._prev,t=e._next;return null===n?this._itHead=t:n._next=t,null===t?this._itTail=n:t._prev=n,e},e.prototype._addToMoves=function(e,n){return e.previousIndex===n?e:(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e,e)},e.prototype._addToRemovals=function(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new It),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e},e.prototype._addIdentityChange=function(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e},e}(),Tt=function(){return function(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}(),Ct=function(){function e(){this._head=null,this._tail=null}return e.prototype.add=function(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)},e.prototype.get=function(e,n){var t;for(t=this._head;null!==t;t=t._nextDup)if((null===n||n<=t.currentIndex)&&$n(t.trackById,e))return t;return null},e.prototype.remove=function(e){var n=e._prevDup,t=e._nextDup;return null===n?this._head=t:n._nextDup=t,null===t?this._tail=n:t._prevDup=n,null===this._head},e}(),It=function(){function e(){this.map=new Map}return e.prototype.put=function(e){var n=e.trackById,t=this.map.get(n);t||(t=new Ct,this.map.set(n,t)),t.add(e)},e.prototype.get=function(e,n){var t=this.map.get(e);return t?t.get(e,n):null},e.prototype.remove=function(e){var n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e},Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this.map.size},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this.map.clear()},e}();function At(e,n,t){var l=e.previousIndex;if(null===l)return l;var i=0;return t&&l<t.length&&(i=t[l]),l+n+i}var Nt=function(){function e(){}return e.prototype.supports=function(e){return e instanceof Map||Zn(e)},e.prototype.create=function(){return new _t},e}(),_t=function(){function e(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return Object.defineProperty(e.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead},enumerable:!0,configurable:!0}),e.prototype.forEachItem=function(e){var n;for(n=this._mapHead;null!==n;n=n._next)e(n)},e.prototype.forEachPreviousItem=function(e){var n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)e(n)},e.prototype.forEachChangedItem=function(e){var n;for(n=this._changesHead;null!==n;n=n._nextChanged)e(n)},e.prototype.forEachAddedItem=function(e){var n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)},e.prototype.forEachRemovedItem=function(e){var n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)},e.prototype.diff=function(e){if(e){if(!(e instanceof Map||Zn(e)))throw new Error("Error trying to diff '"+Ie(e)+"'. Only maps and objects are allowed")}else e=new Map;return this.check(e)?this:null},e.prototype.onDestroy=function(){},e.prototype.check=function(e){var n=this;this._reset();var t=this._mapHead;if(this._appendAfter=null,this._forEach(e,function(e,l){if(t&&t.key===l)n._maybeAddToChanges(t,e),n._appendAfter=t,t=t._next;else{var i=n._getOrCreateRecordForKey(l,e);t=n._insertBeforeOrAppend(t,i)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(var l=t;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty},e.prototype._insertBeforeOrAppend=function(e,n){if(e){var t=e._prev;return n._next=e,n._prev=t,e._prev=n,t&&(t._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null},e.prototype._getOrCreateRecordForKey=function(e,n){if(this._records.has(e)){var t=this._records.get(e);this._maybeAddToChanges(t,n);var l=t._prev,i=t._next;return l&&(l._next=i),i&&(i._prev=l),t._next=null,t._prev=null,t}var r=new wt(e);return this._records.set(e,r),r.currentValue=n,this._addToAdditions(r),r},e.prototype._reset=function(){if(this.isDirty){var e=void 0;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}},e.prototype._maybeAddToChanges=function(e,n){$n(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))},e.prototype._addToAdditions=function(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)},e.prototype._addToChanges=function(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)},e.prototype._forEach=function(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(function(t){return n(e[t],t)})},e}(),wt=function(){return function(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}(),Pt=function(){function e(e){this.factories=e}return e.create=function(n,t){if(null!=t){var l=t.factories.slice();n=n.concat(l)}return new e(n)},e.extend=function(n){return{provide:e,useFactory:function(t){if(!t)throw new Error("Cannot extend IterableDiffers without a parent injector");return e.create(n,t)},deps:[[e,new ye,new Se]]}},e.prototype.find=function(e){var n,t=this.factories.find(function(n){return n.supports(e)});if(null!=t)return t;throw new Error("Cannot find a differ supporting object '"+e+"' of type '"+((n=e).name||typeof n)+"'")},e.ngInjectableDef=Oe({token:e,providedIn:"root",factory:function(){return new e([new Rt])}}),e}(),xt=function(){function e(e){this.factories=e}return e.create=function(n,t){if(t){var l=t.factories.slice();n=n.concat(l)}return new e(n)},e.extend=function(n){return{provide:e,useFactory:function(t){if(!t)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return e.create(n,t)},deps:[[e,new ye,new Se]]}},e.prototype.find=function(e){var n=this.factories.find(function(n){return n.supports(e)});if(n)return n;throw new Error("Cannot find a differ supporting object '"+e+"'")},e.ngInjectableDef=Oe({token:e,providedIn:"root",factory:function(){return new e([new Nt])}}),e}(),kt=function(){function e(){}return e.__NG_ELEMENT_ID__=function(){return Mt()},e}(),Mt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n]},Dt=[new Nt],Lt=new Pt([new Rt]),Ft=new xt(Dt),Ut=function(){function e(){}return e.__NG_ELEMENT_ID__=function(){return Ht(e,dt)},e}(),Ht=ht,Gt=function(){function e(){}return e.__NG_ELEMENT_ID__=function(){return Bt(e,dt)},e}(),Bt=ht;function Vt(e,n,t,l){var i="ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '"+n+"'. Current value: '"+t+"'.";return l&&(i+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(e,n){var t=new Error(e);return Wt(t,n),t}(i,e)}function Wt(e,n){e[on]=n,e[sn]=n.logError.bind(n)}function zt(e){return new Error("ViewDestroyedError: Attempt to use a destroyed view: "+e)}function Yt(e,n,t){var l=e.state,i=1792&l;return i===n?(e.state=-1793&l|t,e.initIndex=-1,!0):i===t}function Kt(e,n,t){return(1792&e.state)===n&&e.initIndex<=t&&(e.initIndex=t+1,!0)}function jt(e,n){return e.nodes[n]}function $t(e,n){return e.nodes[n]}function Qt(e,n){return e.nodes[n]}function qt(e,n){return e.nodes[n]}function Xt(e,n){return e.nodes[n]}var Zt={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0},Jt=function(){},el=new Map;function nl(e){var n=el.get(e);return n||(n=Ie(e)+"_"+el.size,el.set(e,n)),n}function tl(e,n,t,l){if(qn.isWrapped(l)){l=qn.unwrap(l);var i=e.def.nodes[n].bindingIndex+t,r=qn.unwrap(e.oldValues[i]);e.oldValues[i]=new qn(r)}return l}var ll="$$undefined",il="$$empty";function rl(e){return{id:ll,styles:e.styles,encapsulation:e.encapsulation,data:e.data}}var ol=0;function ul(e,n,t,l){return!(!(2&e.state)&&$n(e.oldValues[n.bindingIndex+t],l))}function sl(e,n,t,l){return!!ul(e,n,t,l)&&(e.oldValues[n.bindingIndex+t]=l,!0)}function al(e,n,t,l){var i=e.oldValues[n.bindingIndex+t];if(1&e.state||!Qn(i,l)){var r=n.bindings[t].name;throw Vt(Zt.createDebugContext(e,n.nodeIndex),r+": "+i,r+": "+l,0!=(1&e.state))}}function cl(e){for(var n=e;n;)2&n.def.flags&&(n.state|=8),n=n.viewContainerParent||n.parent}function pl(e,n){for(var t=e;t&&t!==n;)t.state|=64,t=t.viewContainerParent||t.parent}function hl(e,n,t,l){try{return cl(33554432&e.def.nodes[n].flags?$t(e,n).componentView:e),Zt.handleEvent(e,n,t,l)}catch(i){e.root.errorHandler.handleError(i)}}function dl(e){return e.parent?$t(e.parent,e.parentNodeDef.nodeIndex):null}function gl(e){return e.parent?e.parentNodeDef.parent:null}function fl(e,n){switch(201347067&n.flags){case 1:return $t(e,n.nodeIndex).renderElement;case 2:return jt(e,n.nodeIndex).renderText}}function ml(e){return!!e.parent&&!!(32768&e.parentNodeDef.flags)}function vl(e){return!(!e.parent||32768&e.parentNodeDef.flags)}function Sl(e){return 1<<e%32}function El(e){var n={},t=0,l={};return e&&e.forEach(function(e){var i=a(e,2),r=i[0],o=i[1];"number"==typeof r?(n[r]=o,t|=Sl(r)):l[r]=o}),{matchedQueries:n,references:l,matchedQueryIds:t}}function yl(e,n){return e.map(function(e){var t,l,i;return Array.isArray(e)?(i=(t=a(e,2))[0],l=t[1]):(i=0,l=e),l&&("function"==typeof l||"object"==typeof l)&&n&&Object.defineProperty(l,Be,{value:n,configurable:!0}),{flags:i,token:l,tokenKey:nl(l)}})}function Rl(e,n,t){var l=t.renderParent;return l?0==(1&l.flags)||0==(33554432&l.flags)||l.element.componentRendererType&&l.element.componentRendererType.encapsulation===cn.Native?$t(e,t.renderParent.nodeIndex).renderElement:void 0:n}var bl=new WeakMap;function Ol(e){var n=bl.get(e);return n||((n=e(function(){return Jt})).factory=e,bl.set(e,n)),n}function Tl(e,n,t,l,i){3===n&&(t=e.renderer.parentNode(fl(e,e.def.lastRenderRootNode))),Cl(e,n,0,e.def.nodes.length-1,t,l,i)}function Cl(e,n,t,l,i,r,o){for(var u=t;u<=l;u++){var s=e.def.nodes[u];11&s.flags&&Al(e,s,n,i,r,o),u+=s.childCount}}function Il(e,n,t,l,i,r){for(var o=e;o&&!ml(o);)o=o.parent;for(var u=o.parent,s=gl(o),a=s.nodeIndex+s.childCount,c=s.nodeIndex+1;c<=a;c++){var p=u.def.nodes[c];p.ngContentIndex===n&&Al(u,p,t,l,i,r),c+=p.childCount}if(!u.parent){var h=e.root.projectableNodes[n];if(h)for(c=0;c<h.length;c++)Nl(e,h[c],t,l,i,r)}}function Al(e,n,t,l,i,r){if(8&n.flags)Il(e,n.ngContent.index,t,l,i,r);else{var o=fl(e,n);if(3===t&&33554432&n.flags&&48&n.bindingFlags?(16&n.bindingFlags&&Nl(e,o,t,l,i,r),32&n.bindingFlags&&Nl($t(e,n.nodeIndex).componentView,o,t,l,i,r)):Nl(e,o,t,l,i,r),16777216&n.flags)for(var u=$t(e,n.nodeIndex).viewContainer._embeddedViews,s=0;s<u.length;s++)Tl(u[s],t,l,i,r);1&n.flags&&!n.element.name&&Cl(e,t,n.nodeIndex+1,n.nodeIndex+n.childCount,l,i,r)}}function Nl(e,n,t,l,i,r){var o=e.renderer;switch(t){case 1:o.appendChild(l,n);break;case 2:o.insertBefore(l,n,i);break;case 3:o.removeChild(l,n);break;case 0:r.push(n)}}var _l=/^:([^:]+):(.+)$/;function wl(e){if(":"===e[0]){var n=e.match(_l);return[n[1],n[2]]}return["",e]}function Pl(e){for(var n=0,t=0;t<e.length;t++)n|=e[t].flags;return n}function xl(e,n,t,l,i,r,o,u,s,a,c,p,h,d,g,f,m,v,S,E){switch(e){case 1:return n+kl(t)+l;case 2:return n+kl(t)+l+kl(i)+r;case 3:return n+kl(t)+l+kl(i)+r+kl(o)+u;case 4:return n+kl(t)+l+kl(i)+r+kl(o)+u+kl(s)+a;case 5:return n+kl(t)+l+kl(i)+r+kl(o)+u+kl(s)+a+kl(c)+p;case 6:return n+kl(t)+l+kl(i)+r+kl(o)+u+kl(s)+a+kl(c)+p+kl(h)+d;case 7:return n+kl(t)+l+kl(i)+r+kl(o)+u+kl(s)+a+kl(c)+p+kl(h)+d+kl(g)+f;case 8:return n+kl(t)+l+kl(i)+r+kl(o)+u+kl(s)+a+kl(c)+p+kl(h)+d+kl(g)+f+kl(m)+v;case 9:return n+kl(t)+l+kl(i)+r+kl(o)+u+kl(s)+a+kl(c)+p+kl(h)+d+kl(g)+f+kl(m)+v+kl(S)+E;default:throw new Error("Does not support more than 9 expressions")}}function kl(e){return null!=e?e.toString():""}var Ml=new Object,Dl=nl(Xe),Ll=nl(Fe),Fl=nl(ct);function Ul(e,n,t,l){return t=_e(t),{index:-1,deps:yl(l,Ie(n)),flags:e,token:n,value:t}}function Hl(e,n,t){void 0===t&&(t=Xe.THROW_IF_NOT_FOUND);var l,i,r=ze(e);try{if(8&n.flags)return n.token;if(2&n.flags&&(t=null),1&n.flags)return e._parent.get(n.token,t);var o=n.tokenKey;switch(o){case Dl:case Ll:case Fl:return e}var u,s=e._def.providersByKey[o];if(s){var a=e._providers[s.index];return void 0===a&&(a=e._providers[s.index]=Gl(e,s)),a===Ml?void 0:a}if((u=Te(n.token))&&(l=e,null!=(i=u).providedIn&&(function(e,n){return e._def.modules.indexOf(i.providedIn)>-1}(l)||"root"===i.providedIn&&l._def.isRoot))){var c=e._providers.length;return e._def.providers[c]=e._def.providersByKey[n.tokenKey]={flags:5120,value:u.factory,deps:[],index:c,token:n.token},e._providers[c]=Ml,e._providers[c]=Gl(e,e._def.providersByKey[n.tokenKey])}return 4&n.flags?t:e._parent.get(n.token,t)}finally{ze(r)}}function Gl(e,n){var t;switch(201347067&n.flags){case 512:t=function(e,n,t){var l=t.length;switch(l){case 0:return new n;case 1:return new n(Hl(e,t[0]));case 2:return new n(Hl(e,t[0]),Hl(e,t[1]));case 3:return new n(Hl(e,t[0]),Hl(e,t[1]),Hl(e,t[2]));default:for(var i=new Array(l),r=0;r<l;r++)i[r]=Hl(e,t[r]);return new(n.bind.apply(n,c([void 0],i)))}}(e,n.value,n.deps);break;case 1024:t=function(e,n,t){var l=t.length;switch(l){case 0:return n();case 1:return n(Hl(e,t[0]));case 2:return n(Hl(e,t[0]),Hl(e,t[1]));case 3:return n(Hl(e,t[0]),Hl(e,t[1]),Hl(e,t[2]));default:for(var i=Array(l),r=0;r<l;r++)i[r]=Hl(e,t[r]);return n.apply(void 0,c(i))}}(e,n.value,n.deps);break;case 2048:t=Hl(e,n.deps[0]);break;case 256:t=n.value}return t===Ml||null===t||"object"!=typeof t||131072&n.flags||"function"!=typeof t.ngOnDestroy||(n.flags|=131072),void 0===t?Ml:t}function Bl(e,n){var t=e.viewContainer._embeddedViews;if((null==n||n>=t.length)&&(n=t.length-1),n<0)return null;var l=t[n];return l.viewContainerParent=null,Yl(t,n),Zt.dirtyParentQueries(l),Wl(l),l}function Vl(e,n,t){var l=n?fl(n,n.def.lastRenderRootNode):e.renderElement,i=t.renderer.parentNode(l),r=t.renderer.nextSibling(l);Tl(t,2,i,r,void 0)}function Wl(e){Tl(e,3,null,null,void 0)}function zl(e,n,t){n>=e.length?e.push(t):e.splice(n,0,t)}function Yl(e,n){n>=e.length-1?e.pop():e.splice(n,1)}var Kl=new Object;function jl(e,n,t,l,i,r){return new $l(e,n,t,l,i,r)}var $l=function(e){function n(n,t,l,i,r,o){var u=e.call(this)||this;return u.selector=n,u.componentType=t,u._inputs=i,u._outputs=r,u.ngContentSelectors=o,u.viewDefFactory=l,u}return i(n,e),Object.defineProperty(n.prototype,"inputs",{get:function(){var e=[],n=this._inputs;for(var t in n)e.push({propName:t,templateName:n[t]});return e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"outputs",{get:function(){var e=[];for(var n in this._outputs)e.push({propName:n,templateName:this._outputs[n]});return e},enumerable:!0,configurable:!0}),n.prototype.create=function(e,n,t,l){if(!l)throw new Error("ngModule should be provided");var i=Ol(this.viewDefFactory),r=i.nodes[0].element.componentProvider.nodeIndex,o=Zt.createRootView(e,n||[],t,i,l,Kl),u=Qt(o,r).instance;return t&&o.renderer.setAttribute($t(o,0).renderElement,"ng-version",yt.full),new Ql(o,new Jl(o),u)},n}(lt),Ql=function(e){function n(n,t,l){var i=e.call(this)||this;return i._view=n,i._viewRef=t,i._component=l,i._elDef=i._view.def.nodes[0],i.hostView=t,i.changeDetectorRef=t,i.instance=l,i}return i(n,e),Object.defineProperty(n.prototype,"location",{get:function(){return new dt($t(this._view,this._elDef.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"injector",{get:function(){return new li(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"componentType",{get:function(){return this._component.constructor},enumerable:!0,configurable:!0}),n.prototype.destroy=function(){this._viewRef.destroy()},n.prototype.onDestroy=function(e){this._viewRef.onDestroy(e)},n}(tt);function ql(e,n,t){return new Xl(e,n,t)}var Xl=function(){function e(e,n,t){this._view=e,this._elDef=n,this._data=t,this._embeddedViews=[]}return Object.defineProperty(e.prototype,"element",{get:function(){return new dt(this._data.renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"injector",{get:function(){return new li(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parentInjector",{get:function(){for(var e=this._view,n=this._elDef.parent;!n&&e;)n=gl(e),e=e.parent;return e?new li(e,n):new li(this._view,null)},enumerable:!0,configurable:!0}),e.prototype.clear=function(){for(var e=this._embeddedViews.length-1;e>=0;e--){var n=Bl(this._data,e);Zt.destroyView(n)}},e.prototype.get=function(e){var n=this._embeddedViews[e];if(n){var t=new Jl(n);return t.attachToViewContainerRef(this),t}return null},Object.defineProperty(e.prototype,"length",{get:function(){return this._embeddedViews.length},enumerable:!0,configurable:!0}),e.prototype.createEmbeddedView=function(e,n,t){var l=e.createEmbeddedView(n||{});return this.insert(l,t),l},e.prototype.createComponent=function(e,n,t,l,i){var r=t||this.parentInjector;i||e instanceof at||(i=r.get(ct));var o=e.create(r,l,void 0,i);return this.insert(o.hostView,n),o},e.prototype.insert=function(e,n){if(e.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");var t,l,i,r,o=e;return r=(t=this._data).viewContainer._embeddedViews,null==(l=n)&&(l=r.length),(i=o._view).viewContainerParent=this._view,zl(r,l,i),function(e,n){var t=dl(n);if(t&&t!==e&&!(16&n.state)){n.state|=16;var l=t.template._projectedViews;l||(l=t.template._projectedViews=[]),l.push(n),function(e,t){if(!(4&t.flags)){n.parent.def.nodeFlags|=4,t.flags|=4;for(var l=t.parent;l;)l.childFlags|=4,l=l.parent}}(0,n.parentNodeDef)}}(t,i),Zt.dirtyParentQueries(i),Vl(t,l>0?r[l-1]:null,i),o.attachToViewContainerRef(this),e},e.prototype.move=function(e,n){if(e.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");var t,l,i,r,o,u=this._embeddedViews.indexOf(e._view);return i=n,o=(r=(t=this._data).viewContainer._embeddedViews)[l=u],Yl(r,l),null==i&&(i=r.length),zl(r,i,o),Zt.dirtyParentQueries(o),Wl(o),Vl(t,i>0?r[i-1]:null,o),e},e.prototype.indexOf=function(e){return this._embeddedViews.indexOf(e._view)},e.prototype.remove=function(e){var n=Bl(this._data,e);n&&Zt.destroyView(n)},e.prototype.detach=function(e){var n=Bl(this._data,e);return n?new Jl(n):null},e}();function Zl(e){return new Jl(e)}var Jl=function(){function e(e){this._view=e,this._viewContainerRef=null,this._appRef=null}return Object.defineProperty(e.prototype,"rootNodes",{get:function(){return Tl(this._view,0,void 0,void 0,e=[]),e;var e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this._view.context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"destroyed",{get:function(){return 0!=(128&this._view.state)},enumerable:!0,configurable:!0}),e.prototype.markForCheck=function(){cl(this._view)},e.prototype.detach=function(){this._view.state&=-5},e.prototype.detectChanges=function(){var e=this._view.root.rendererFactory;e.begin&&e.begin();try{Zt.checkAndUpdateView(this._view)}finally{e.end&&e.end()}},e.prototype.checkNoChanges=function(){Zt.checkNoChangesView(this._view)},e.prototype.reattach=function(){this._view.state|=4},e.prototype.onDestroy=function(e){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(e)},e.prototype.destroy=function(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),Zt.destroyView(this._view)},e.prototype.detachFromAppRef=function(){this._appRef=null,Wl(this._view),Zt.dirtyParentQueries(this._view)},e.prototype.attachToAppRef=function(e){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e},e.prototype.attachToViewContainerRef=function(e){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=e},e}();function ei(e,n){return new ni(e,n)}var ni=function(e){function n(n,t){var l=e.call(this)||this;return l._parentView=n,l._def=t,l}return i(n,e),n.prototype.createEmbeddedView=function(e){return new Jl(Zt.createEmbeddedView(this._parentView,this._def,this._def.element.template,e))},Object.defineProperty(n.prototype,"elementRef",{get:function(){return new dt($t(this._parentView,this._def.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),n}(Ut);function ti(e,n){return new li(e,n)}var li=function(){function e(e,n){this.view=e,this.elDef=n}return e.prototype.get=function(e,n){return void 0===n&&(n=Xe.THROW_IF_NOT_FOUND),Zt.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:e,tokenKey:nl(e)},n)},e}();function ii(e,n){var t=e.def.nodes[n];if(1&t.flags){var l=$t(e,t.nodeIndex);return t.element.template?l.template:l.renderElement}if(2&t.flags)return jt(e,t.nodeIndex).renderText;if(20240&t.flags)return Qt(e,t.nodeIndex).instance;throw new Error("Illegal state: read nodeValue for node index "+n)}function ri(e){return new oi(e.renderer)}var oi=function(){function e(e){this.delegate=e}return e.prototype.selectRootElement=function(e){return this.delegate.selectRootElement(e)},e.prototype.createElement=function(e,n){var t=a(wl(n),2),l=this.delegate.createElement(t[1],t[0]);return e&&this.delegate.appendChild(e,l),l},e.prototype.createViewRoot=function(e){return e},e.prototype.createTemplateAnchor=function(e){var n=this.delegate.createComment("");return e&&this.delegate.appendChild(e,n),n},e.prototype.createText=function(e,n){var t=this.delegate.createText(n);return e&&this.delegate.appendChild(e,t),t},e.prototype.projectNodes=function(e,n){for(var t=0;t<n.length;t++)this.delegate.appendChild(e,n[t])},e.prototype.attachViewAfter=function(e,n){for(var t=this.delegate.parentNode(e),l=this.delegate.nextSibling(e),i=0;i<n.length;i++)this.delegate.insertBefore(t,n[i],l)},e.prototype.detachView=function(e){for(var n=0;n<e.length;n++){var t=e[n],l=this.delegate.parentNode(t);this.delegate.removeChild(l,t)}},e.prototype.destroyView=function(e,n){for(var t=0;t<n.length;t++)this.delegate.destroyNode(n[t])},e.prototype.listen=function(e,n,t){return this.delegate.listen(e,n,t)},e.prototype.listenGlobal=function(e,n,t){return this.delegate.listen(e,n,t)},e.prototype.setElementProperty=function(e,n,t){this.delegate.setProperty(e,n,t)},e.prototype.setElementAttribute=function(e,n,t){var l=a(wl(n),2),i=l[0],r=l[1];null!=t?this.delegate.setAttribute(e,r,t,i):this.delegate.removeAttribute(e,r,i)},e.prototype.setBindingDebugInfo=function(e,n,t){},e.prototype.setElementClass=function(e,n,t){t?this.delegate.addClass(e,n):this.delegate.removeClass(e,n)},e.prototype.setElementStyle=function(e,n,t){null!=t?this.delegate.setStyle(e,n,t):this.delegate.removeStyle(e,n)},e.prototype.invokeElementMethod=function(e,n,t){e[n].apply(e,t)},e.prototype.setText=function(e,n){this.delegate.setValue(e,n)},e.prototype.animate=function(){throw new Error("Renderer.animate is no longer supported!")},e}();function ui(e,n,t,l){return new si(e,n,t,l)}var si=function(){function e(e,n,t,l){this._moduleType=e,this._parent=n,this._bootstrapComponents=t,this._def=l,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(e){for(var n=e._def,t=e._providers=new Array(n.providers.length),l=0;l<n.providers.length;l++){var i=n.providers[l];4096&i.flags||void 0===t[l]&&(t[l]=Gl(e,i))}}(this)}return e.prototype.get=function(e,n,t){void 0===n&&(n=Xe.THROW_IF_NOT_FOUND),void 0===t&&(t=Re.Default);var l=0;return t&Re.SkipSelf?l|=1:t&Re.Self&&(l|=4),Hl(this,{token:e,tokenKey:nl(e),flags:l},n)},Object.defineProperty(e.prototype,"instance",{get:function(){return this.get(this._moduleType)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentFactoryResolver",{get:function(){return this.get(ut)},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){if(this._destroyed)throw new Error("The ng module "+Ie(this.instance.constructor)+" has already been destroyed.");this._destroyed=!0,function(e,n){for(var t=e._def,l=new Set,i=0;i<t.providers.length;i++)if(131072&t.providers[i].flags){var r=e._providers[i];if(r&&r!==Ml){var o=r.ngOnDestroy;"function"!=typeof o||l.has(r)||(o.apply(r),l.add(r))}}}(this),this._destroyListeners.forEach(function(e){return e()})},e.prototype.onDestroy=function(e){this._destroyListeners.push(e)},e}(),ai=nl(ft),ci=nl(St),pi=nl(dt),hi=nl(Gt),di=nl(Ut),gi=nl(kt),fi=nl(Xe),mi=nl(Fe);function vi(e,n,t,l,i,r,o,u){var s=[];if(o)for(var c in o){var p=a(o[c],2);s[p[0]]={flags:8,name:c,nonMinifiedName:p[1],ns:null,securityContext:null,suffix:null}}var h=[];if(u)for(var d in u)h.push({type:1,propName:d,target:null,eventName:u[d]});return yi(e,n|=16384,t,l,i,i,r,s,h)}function Si(e,n,t){return yi(-1,e|=16,null,0,n,n,t)}function Ei(e,n,t,l,i){return yi(-1,e,n,0,t,l,i)}function yi(e,n,t,l,i,r,o,u,s){var a=El(t),c=a.matchedQueries,p=a.references,h=a.matchedQueryIds;s||(s=[]),u||(u=[]),r=_e(r);var d=yl(o,Ie(i));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:n,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:c,matchedQueryIds:h,references:p,ngContentIndex:-1,childCount:l,bindings:u,bindingFlags:Pl(u),outputs:s,element:null,provider:{token:i,value:r,deps:d},text:null,query:null,ngContent:null}}function Ri(e,n){return Ci(e,n)}function bi(e,n){for(var t=e;t.parent&&!ml(t);)t=t.parent;return Ii(t.parent,gl(t),!0,n.provider.value,n.provider.deps)}function Oi(e,n){var t=Ii(e,n.parent,(32768&n.flags)>0,n.provider.value,n.provider.deps);if(n.outputs.length)for(var l=0;l<n.outputs.length;l++){var i=n.outputs[l],r=t[i.propName];if(!et(r))throw new Error("@Output "+i.propName+" not initialized in '"+t.constructor.name+"'.");var o=r.subscribe(Ti(e,n.parent.nodeIndex,i.eventName));e.disposables[n.outputIndex+l]=o.unsubscribe.bind(o)}return t}function Ti(e,n,t){return function(l){return hl(e,n,t,l)}}function Ci(e,n){var t=(8192&n.flags)>0,l=n.provider;switch(201347067&n.flags){case 512:return Ii(e,n.parent,t,l.value,l.deps);case 1024:return function(e,n,t,l,i){var r=i.length;switch(r){case 0:return l();case 1:return l(Ni(e,n,t,i[0]));case 2:return l(Ni(e,n,t,i[0]),Ni(e,n,t,i[1]));case 3:return l(Ni(e,n,t,i[0]),Ni(e,n,t,i[1]),Ni(e,n,t,i[2]));default:for(var o=Array(r),u=0;u<r;u++)o[u]=Ni(e,n,t,i[u]);return l.apply(void 0,c(o))}}(e,n.parent,t,l.value,l.deps);case 2048:return Ni(e,n.parent,t,l.deps[0]);case 256:return l.value}}function Ii(e,n,t,l,i){var r=i.length;switch(r){case 0:return new l;case 1:return new l(Ni(e,n,t,i[0]));case 2:return new l(Ni(e,n,t,i[0]),Ni(e,n,t,i[1]));case 3:return new l(Ni(e,n,t,i[0]),Ni(e,n,t,i[1]),Ni(e,n,t,i[2]));default:for(var o=new Array(r),u=0;u<r;u++)o[u]=Ni(e,n,t,i[u]);return new(l.bind.apply(l,c([void 0],o)))}}var Ai={};function Ni(e,n,t,l,i){if(void 0===i&&(i=Xe.THROW_IF_NOT_FOUND),8&l.flags)return l.token;var r=e;2&l.flags&&(i=null);var o=l.tokenKey;o===gi&&(t=!(!n||!n.element.componentView)),n&&1&l.flags&&(t=!1,n=n.parent);for(var u=e;u;){if(n)switch(o){case ai:return ri(_i(u,n,t));case ci:return _i(u,n,t).renderer;case pi:return new dt($t(u,n.nodeIndex).renderElement);case hi:return $t(u,n.nodeIndex).viewContainer;case di:if(n.element.template)return $t(u,n.nodeIndex).template;break;case gi:return Zl(_i(u,n,t));case fi:case mi:return ti(u,n);default:var s=(t?n.element.allProviders:n.element.publicProviders)[o];if(s){var a=Qt(u,s.nodeIndex);return a||(a={instance:Ci(u,s)},u.nodes[s.nodeIndex]=a),a.instance}}t=ml(u),n=gl(u),u=u.parent,4&l.flags&&(u=null)}var c=r.root.injector.get(l.token,Ai);return c!==Ai||i===Ai?c:r.root.ngModule.injector.get(l.token,i)}function _i(e,n,t){var l;if(t)l=$t(e,n.nodeIndex).componentView;else for(l=e;l.parent&&!ml(l);)l=l.parent;return l}function wi(e,n,t,l,i,r){if(32768&t.flags){var o=$t(e,t.parent.nodeIndex).componentView;2&o.def.flags&&(o.state|=8)}if(n.instance[t.bindings[l].name]=i,524288&t.flags){r=r||{};var u=qn.unwrap(e.oldValues[t.bindingIndex+l]);r[t.bindings[l].nonMinifiedName]=new nt(u,i,0!=(2&e.state))}return e.oldValues[t.bindingIndex+l]=i,r}function Pi(e,n){if(e.def.nodeFlags&n)for(var t=e.def.nodes,l=0,i=0;i<t.length;i++){var r=t[i],o=r.parent;for(!o&&r.flags&n&&ki(e,i,r.flags&n,l++),0==(r.childFlags&n)&&(i+=r.childCount);o&&1&o.flags&&i===o.nodeIndex+o.childCount;)o.directChildFlags&n&&(l=xi(e,o,n,l)),o=o.parent}}function xi(e,n,t,l){for(var i=n.nodeIndex+1;i<=n.nodeIndex+n.childCount;i++){var r=e.def.nodes[i];r.flags&t&&ki(e,i,r.flags&t,l++),i+=r.childCount}return l}function ki(e,n,t,l){var i=Qt(e,n);if(i){var r=i.instance;r&&(Zt.setCurrentNode(e,n),1048576&t&&Kt(e,512,l)&&r.ngAfterContentInit(),2097152&t&&r.ngAfterContentChecked(),4194304&t&&Kt(e,768,l)&&r.ngAfterViewInit(),8388608&t&&r.ngAfterViewChecked(),131072&t&&r.ngOnDestroy())}}var Mi=new Le("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return pn}}),Di={},Li=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencySymbol=15]="CurrencySymbol",e[e.CurrencyName=16]="CurrencyName",e[e.Currencies=17]="Currencies",e[e.PluralCase=18]="PluralCase",e[e.ExtraData=19]="ExtraData",e}({}),Fi=void 0,Ui=["en",[["a","p"],["AM","PM"],Fi],[["AM","PM"],Fi,Fi],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Fi,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Fi,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Fi,"{1} 'at' {0}",Fi],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",{},function(e){var n=Math.floor(Math.abs(e)),t=e.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===t?1:5}];function Hi(e){var n=e.toLowerCase().replace(/_/g,"-"),t=Di[n];if(t)return t;var l=n.split("-")[0];if(t=Di[l])return t;if("en"===l)return Ui;throw new Error('Missing locale data for the locale "'+e+'".')}var Gi=function(e){function n(n){void 0===n&&(n=!1);var t=e.call(this)||this;return t.__isAsync=n,t}return i(n,e),n.prototype.emit=function(n){e.prototype.next.call(this,n)},n.prototype.subscribe=function(n,t,l){var i,r=function(e){return null},o=function(){return null};n&&"object"==typeof n?(i=this.__isAsync?function(e){setTimeout(function(){return n.next(e)})}:function(e){n.next(e)},n.error&&(r=this.__isAsync?function(e){setTimeout(function(){return n.error(e)})}:function(e){n.error(e)}),n.complete&&(o=this.__isAsync?function(){setTimeout(function(){return n.complete()})}:function(){n.complete()})):(i=this.__isAsync?function(e){setTimeout(function(){return n(e)})}:function(e){n(e)},t&&(r=this.__isAsync?function(e){setTimeout(function(){return t(e)})}:function(e){t(e)}),l&&(o=this.__isAsync?function(){setTimeout(function(){return l()})}:function(){l()}));var u=e.prototype.subscribe.call(this,i,r,o);return n instanceof m&&n.add(u),u},n}(D);function Bi(){return this._results[jn()]()}var Vi=function(){function e(){this.dirty=!0,this._results=[],this.changes=new Gi,this.length=0;var n=jn(),t=e.prototype;t[n]||(t[n]=Bi)}return e.prototype.map=function(e){return this._results.map(e)},e.prototype.filter=function(e){return this._results.filter(e)},e.prototype.find=function(e){return this._results.find(e)},e.prototype.reduce=function(e,n){return this._results.reduce(e,n)},e.prototype.forEach=function(e){this._results.forEach(e)},e.prototype.some=function(e){return this._results.some(e)},e.prototype.toArray=function(){return this._results.slice()},e.prototype.toString=function(){return this._results.toString()},e.prototype.reset=function(e){this._results=function e(n,t){void 0===t&&(t=n);for(var l=0;l<n.length;l++){var i=n[l];Array.isArray(i)?(t===n&&(t=n.slice(0,l)),e(i,t)):t!==n&&t.push(i)}return t}(e),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]},e.prototype.notifyOnChanges=function(){this.changes.emit(this)},e.prototype.setDirty=function(){this.dirty=!0},e.prototype.destroy=function(){this.changes.complete(),this.changes.unsubscribe()},e}(),Wi=me("Input",function(e){return{bindingPropertyName:e}}),zi=me("HostBinding",function(e){return{hostPropertyName:e}}),Yi=new Le("Application Initializer"),Ki=function(){function e(e){var n=this;this.appInits=e,this.initialized=!1,this.done=!1,this.donePromise=new Promise(function(e,t){n.resolve=e,n.reject=t})}return e.prototype.runInitializers=function(){var e=this;if(!this.initialized){var n=[],t=function(){e.done=!0,e.resolve()};if(this.appInits)for(var l=0;l<this.appInits.length;l++){var i=this.appInits[l]();Jn(i)&&n.push(i)}Promise.all(n).then(function(){t()}).catch(function(n){e.reject(n)}),0===n.length&&t(),this.initialized=!0}},e}(),ji=new Le("AppId");function $i(){return""+Qi()+Qi()+Qi()}function Qi(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var qi=new Le("Platform Initializer"),Xi=new Le("Platform ID"),Zi=new Le("appBootstrapListener"),Ji=function(){function e(){}return e.prototype.log=function(e){console.log(e)},e.prototype.warn=function(e){console.warn(e)},e}(),er=new Le("LocaleId");function nr(){throw new Error("Runtime compiler is not loaded")}var tr,lr,ir=nr,rr=nr,or=nr,ur=nr,sr=function(){function e(){this.compileModuleSync=ir,this.compileModuleAsync=rr,this.compileModuleAndAllComponentsSync=or,this.compileModuleAndAllComponentsAsync=ur}return e.prototype.clearCache=function(){},e.prototype.clearCacheFor=function(e){},e.prototype.getModuleId=function(e){},e}(),ar=function(){return function(){}}();function cr(){var e=De.wtf;return!(!e||!(tr=e.trace)||(lr=tr.events,0))}var pr=cr();function hr(e,n){return null}var dr=pr?function(e,n){return void 0===n&&(n=null),lr.createScope(e,n)}:function(e,n){return hr},gr=pr?function(e,n){return tr.leaveScope(e,n),n}:function(e,n){return n},fr=function(){return Promise.resolve(0)}();function mr(e){"undefined"==typeof Zone?fr.then(function(){e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}var vr=function(){function e(e){var n,t=e.enableLongStackTrace,l=void 0!==t&&t;if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Gi(!1),this.onMicrotaskEmpty=new Gi(!1),this.onStable=new Gi(!1),this.onError=new Gi(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),l&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(n=this)._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(e,t,l,i,r,o){try{return Rr(n),e.invokeTask(l,i,r,o)}finally{br(n)}},onInvoke:function(e,t,l,i,r,o,u){try{return Rr(n),e.invoke(l,i,r,o,u)}finally{br(n)}},onHasTask:function(e,t,l,i){e.hasTask(l,i),t===l&&("microTask"==i.change?(n.hasPendingMicrotasks=i.microTask,yr(n)):"macroTask"==i.change&&(n.hasPendingMacrotasks=i.macroTask))},onHandleError:function(e,t,l,i){return e.handleError(l,i),n.runOutsideAngular(function(){return n.onError.emit(i)}),!1}})}return e.isInAngularZone=function(){return!0===Zone.current.get("isAngularZone")},e.assertInAngularZone=function(){if(!e.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")},e.assertNotInAngularZone=function(){if(e.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")},e.prototype.run=function(e,n,t){return this._inner.run(e,n,t)},e.prototype.runTask=function(e,n,t,l){var i=this._inner,r=i.scheduleEventTask("NgZoneEvent: "+l,e,Er,Sr,Sr);try{return i.runTask(r,n,t)}finally{i.cancelTask(r)}},e.prototype.runGuarded=function(e,n,t){return this._inner.runGuarded(e,n,t)},e.prototype.runOutsideAngular=function(e){return this._outer.run(e)},e}();function Sr(){}var Er={};function yr(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(function(){return e.onStable.emit(null)})}finally{e.isStable=!0}}}function Rr(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function br(e){e._nesting--,yr(e)}var Or,Tr=function(){function e(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Gi,this.onMicrotaskEmpty=new Gi,this.onStable=new Gi,this.onError=new Gi}return e.prototype.run=function(e){return e()},e.prototype.runGuarded=function(e){return e()},e.prototype.runOutsideAngular=function(e){return e()},e.prototype.runTask=function(e){return e()},e}(),Cr=function(){function e(e){var n=this;this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(function(){n.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}return e.prototype._watchAngularEvents=function(){var e=this;this._ngZone.onUnstable.subscribe({next:function(){e._didWork=!0,e._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){e._ngZone.onStable.subscribe({next:function(){vr.assertNotInAngularZone(),mr(function(){e._isZoneStable=!0,e._runCallbacksIfReady()})}})})},e.prototype.increasePendingRequestCount=function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount},e.prototype.decreasePendingRequestCount=function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount},e.prototype.isStable=function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks},e.prototype._runCallbacksIfReady=function(){var e=this;if(this.isStable())mr(function(){for(;0!==e._callbacks.length;){var n=e._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(e._didWork)}e._didWork=!1});else{var n=this.getPendingTasks();this._callbacks=this._callbacks.filter(function(e){return!e.updateCb||!e.updateCb(n)||(clearTimeout(e.timeoutId),!1)}),this._didWork=!0}},e.prototype.getPendingTasks=function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(function(e){return{source:e.source,creationLocation:e.creationLocation,data:e.data}}):[]},e.prototype.addCallback=function(e,n,t){var l=this,i=-1;n&&n>0&&(i=setTimeout(function(){l._callbacks=l._callbacks.filter(function(e){return e.timeoutId!==i}),e(l._didWork,l.getPendingTasks())},n)),this._callbacks.push({doneCb:e,timeoutId:i,updateCb:t})},e.prototype.whenStable=function(e,n,t){if(t&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(e,n,t),this._runCallbacksIfReady()},e.prototype.getPendingRequestCount=function(){return this._pendingCount},e.prototype.findProviders=function(e,n,t){return[]},e}(),Ir=function(){function e(){this._applications=new Map,Ar.addToWindow(this)}return e.prototype.registerApplication=function(e,n){this._applications.set(e,n)},e.prototype.unregisterApplication=function(e){this._applications.delete(e)},e.prototype.unregisterAllApplications=function(){this._applications.clear()},e.prototype.getTestability=function(e){return this._applications.get(e)||null},e.prototype.getAllTestabilities=function(){return Array.from(this._applications.values())},e.prototype.getAllRootElements=function(){return Array.from(this._applications.keys())},e.prototype.findTestabilityInTree=function(e,n){return void 0===n&&(n=!0),Ar.findTestabilityInTree(this,e,n)},o([u("design:paramtypes",[])],e)}(),Ar=new(function(){function e(){}return e.prototype.addToWindow=function(e){},e.prototype.findTestabilityInTree=function(e,n,t){return null},e}()),Nr=new Le("AllowMultipleToken"),_r=function(){return function(e,n){this.name=e,this.token=n}}();function wr(e,n,t){void 0===t&&(t=[]);var l="Platform: "+n,i=new Le(l);return function(n){void 0===n&&(n=[]);var r=Pr();if(!r||r.injector.get(Nr,!1))if(e)e(t.concat(n).concat({provide:i,useValue:!0}));else{var o=t.concat(n).concat({provide:i,useValue:!0});!function(e){if(Or&&!Or.destroyed&&!Or.injector.get(Nr,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Or=e.get(xr);var n=e.get(qi,null);n&&n.forEach(function(e){return e()})}(Xe.create({providers:o,name:l}))}return function(e){var n=Pr();if(!n)throw new Error("No platform exists!");if(!n.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return n}(i)}}function Pr(){return Or&&!Or.destroyed?Or:null}var xr=function(){function e(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return e.prototype.bootstrapModuleFactory=function(e,n){var t,l=this,i="noop"===(t=n?n.ngZone:void 0)?new Tr:("zone.js"===t?void 0:t)||new vr({enableLongStackTrace:gn()}),r=[{provide:vr,useValue:i}];return i.run(function(){var n=Xe.create({providers:r,parent:l.injector,name:e.moduleType.name}),t=e.create(n),o=t.injector.get(Wn,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return t.injector.get(er,"en-US").toLowerCase().replace(/_/g,"-"),t.onDestroy(function(){return Dr(l._modules,t)}),i.runOutsideAngular(function(){return i.onError.subscribe({next:function(e){o.handleError(e)}})}),function(e,n,i){try{var r=((o=t.injector.get(Ki)).runInitializers(),o.donePromise.then(function(){return l._moduleDoBootstrap(t),t}));return Jn(r)?r.catch(function(t){throw n.runOutsideAngular(function(){return e.handleError(t)}),t}):r}catch(u){throw n.runOutsideAngular(function(){return e.handleError(u)}),u}var o}(o,i)})},e.prototype.bootstrapModule=function(e,n){var t=this;void 0===n&&(n=[]);var l=kr({},n);return function(e,n,t){return e.get(ar).createCompiler([n]).compileModuleAsync(t)}(this.injector,l,e).then(function(e){return t.bootstrapModuleFactory(e,l)})},e.prototype._moduleDoBootstrap=function(e){var n=e.injector.get(Mr);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(function(e){return n.bootstrap(e)});else{if(!e.instance.ngDoBootstrap)throw new Error("The module "+Ie(e.instance.constructor)+' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.');e.instance.ngDoBootstrap(n)}this._modules.push(e)},e.prototype.onDestroy=function(e){this._destroyListeners.push(e)},Object.defineProperty(e.prototype,"injector",{get:function(){return this._injector},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(function(e){return e.destroy()}),this._destroyListeners.forEach(function(e){return e()}),this._destroyed=!0},Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!0,configurable:!0}),e}();function kr(e,n){return Array.isArray(n)?n.reduce(kr,e):r({},e,n)}var Mr=function(){function e(e,n,t,l,i,r){var o=this;this._zone=e,this._console=n,this._injector=t,this._exceptionHandler=l,this._componentFactoryResolver=i,this._initStatus=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=gn(),this._zone.onMicrotaskEmpty.subscribe({next:function(){o._zone.run(function(){o.tick()})}});var u=new _(function(e){o._stable=o._zone.isStable&&!o._zone.hasPendingMacrotasks&&!o._zone.hasPendingMicrotasks,o._zone.runOutsideAngular(function(){e.next(o._stable),e.complete()})}),s=new _(function(e){var n;o._zone.runOutsideAngular(function(){n=o._zone.onStable.subscribe(function(){vr.assertNotInAngularZone(),mr(function(){o._stable||o._zone.hasPendingMacrotasks||o._zone.hasPendingMicrotasks||(o._stable=!0,e.next(!0))})})});var t=o._zone.onUnstable.subscribe(function(){vr.assertInAngularZone(),o._stable&&(o._stable=!1,o._zone.runOutsideAngular(function(){e.next(!1)}))});return function(){n.unsubscribe(),t.unsubscribe()}});this.isStable=ie(u,s.pipe(function(e){return re()((n=pe,function(e){var t;t="function"==typeof n?n:function(){return n};var l=Object.create(e,ae);return l.source=e,l.subjectFactory=t,l})(e));var n}))}var n;return n=e,e.prototype.bootstrap=function(e,n){var t,l=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");t=e instanceof lt?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(t.componentType);var i=t instanceof at?null:this._injector.get(ct),r=t.create(Xe.NULL,[],n||t.selector,i);r.onDestroy(function(){l._unloadComponent(r)});var o=r.injector.get(Cr,null);return o&&r.injector.get(Ir).registerApplication(r.location.nativeElement,o),this._loadComponent(r),gn()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),r},e.prototype.tick=function(){var e,t,l,i,r=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");var o=n._tickScope();try{this._runningTick=!0;try{for(var u=s(this._views),a=u.next();!a.done;a=u.next())a.value.detectChanges()}catch(h){e={error:h}}finally{try{a&&!a.done&&(t=u.return)&&t.call(u)}finally{if(e)throw e.error}}if(this._enforceNoNewChanges)try{for(var c=s(this._views),p=c.next();!p.done;p=c.next())p.value.checkNoChanges()}catch(d){l={error:d}}finally{try{p&&!p.done&&(i=c.return)&&i.call(c)}finally{if(l)throw l.error}}}catch(g){this._zone.runOutsideAngular(function(){return r._exceptionHandler.handleError(g)})}finally{this._runningTick=!1,gr(o)}},e.prototype.attachView=function(e){var n=e;this._views.push(n),n.attachToAppRef(this)},e.prototype.detachView=function(e){var n=e;Dr(this._views,n),n.detachFromAppRef()},e.prototype._loadComponent=function(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(Zi,[]).concat(this._bootstrapListeners).forEach(function(n){return n(e)})},e.prototype._unloadComponent=function(e){this.detachView(e.hostView),Dr(this.components,e)},e.prototype.ngOnDestroy=function(){this._views.slice().forEach(function(e){return e.destroy()})},Object.defineProperty(e.prototype,"viewCount",{get:function(){return this._views.length},enumerable:!0,configurable:!0}),e._tickScope=dr("ApplicationRef#tick()"),e}();function Dr(e,n){var t=e.indexOf(n);t>-1&&e.splice(t,1)}var Lr=function(){return function(){}}(),Fr=function(){return function(){}}(),Ur={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},Hr=function(){function e(e,n){this._compiler=e,this._config=n||Ur}return e.prototype.load=function(e){return this._compiler instanceof sr?this.loadFactory(e):this.loadAndCompile(e)},e.prototype.loadAndCompile=function(e){var n=this,l=a(e.split("#"),2),i=l[0],r=l[1];return void 0===r&&(r="default"),t("crnd")(i).then(function(e){return e[r]}).then(function(e){return Gr(e,i,r)}).then(function(e){return n._compiler.compileModuleAsync(e)})},e.prototype.loadFactory=function(e){var n=a(e.split("#"),2),l=n[0],i=n[1],r="NgFactory";return void 0===i&&(i="default",r=""),t("crnd")(this._config.factoryPathPrefix+l+this._config.factoryPathSuffix).then(function(e){return e[i+r]}).then(function(e){return Gr(e,l,i)})},e}();function Gr(e,n,t){if(!e)throw new Error("Cannot find '"+t+"' in '"+n+"'");return e}var Br=function(){return function(e,n){this.name=e,this.callback=n}}(),Vr=function(){function e(e,n,t){this.listeners=[],this.parent=null,this._debugContext=t,this.nativeNode=e,n&&n instanceof Wr&&n.addChild(this)}return Object.defineProperty(e.prototype,"injector",{get:function(){return this._debugContext.injector},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentInstance",{get:function(){return this._debugContext.component},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this._debugContext.context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"references",{get:function(){return this._debugContext.references},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"providerTokens",{get:function(){return this._debugContext.providerTokens},enumerable:!0,configurable:!0}),e}(),Wr=function(e){function n(n,t,l){var i=e.call(this,n,t,l)||this;return i.properties={},i.attributes={},i.classes={},i.styles={},i.childNodes=[],i.nativeElement=n,i}return i(n,e),n.prototype.addChild=function(e){e&&(this.childNodes.push(e),e.parent=this)},n.prototype.removeChild=function(e){var n=this.childNodes.indexOf(e);-1!==n&&(e.parent=null,this.childNodes.splice(n,1))},n.prototype.insertChildrenAfter=function(e,n){var t,l=this,i=this.childNodes.indexOf(e);-1!==i&&((t=this.childNodes).splice.apply(t,c([i+1,0],n)),n.forEach(function(n){n.parent&&n.parent.removeChild(n),e.parent=l}))},n.prototype.insertBefore=function(e,n){var t=this.childNodes.indexOf(e);-1===t?this.addChild(n):(n.parent&&n.parent.removeChild(n),n.parent=this,this.childNodes.splice(t,0,n))},n.prototype.query=function(e){return this.queryAll(e)[0]||null},n.prototype.queryAll=function(e){var n=[];return function e(n,t,l){n.childNodes.forEach(function(n){n instanceof Wr&&(t(n)&&l.push(n),e(n,t,l))})}(this,e,n),n},n.prototype.queryAllNodes=function(e){var n=[];return function e(n,t,l){n instanceof Wr&&n.childNodes.forEach(function(n){t(n)&&l.push(n),n instanceof Wr&&e(n,t,l)})}(this,e,n),n},Object.defineProperty(n.prototype,"children",{get:function(){return this.childNodes.filter(function(e){return e instanceof n})},enumerable:!0,configurable:!0}),n.prototype.triggerEventHandler=function(e,n){this.listeners.forEach(function(t){t.name==e&&t.callback(n)})},n}(Vr),zr=new Map,Yr=function(e){return zr.get(e)||null};function Kr(e){zr.set(e.nativeNode,e)}var jr=wr(null,"core",[{provide:Xi,useValue:"unknown"},{provide:xr,deps:[Xe]},{provide:Ir,deps:[]},{provide:Ji,deps:[]}]);function $r(){return Lt}function Qr(){return Ft}function qr(e){return e||"en-US"}function Xr(e){var n=[];return e.onStable.subscribe(function(){for(;n.length;)n.pop()()}),function(e){n.push(e)}}var Zr=function(){return function(e){}}();function Jr(e,n,t,l,i,r){e|=1;var o=El(n);return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:e,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:o.matchedQueries,matchedQueryIds:o.matchedQueryIds,references:o.references,ngContentIndex:t,childCount:l,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:r?Ol(r):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:i||Jt},provider:null,text:null,query:null,ngContent:null}}function eo(e,n,t,l,i,r,o,u,s,c,p,h){var d;void 0===o&&(o=[]),c||(c=Jt);var g=El(t),f=g.matchedQueries,m=g.references,v=g.matchedQueryIds,S=null,E=null;r&&(S=(d=a(wl(r),2))[0],E=d[1]),u=u||[];for(var y=new Array(u.length),R=0;R<u.length;R++){var b=a(u[R],3),O=b[0],T=b[2],C=a(wl(b[1]),2),I=C[0],A=C[1],N=void 0,_=void 0;switch(15&O){case 4:_=T;break;case 1:case 8:N=T}y[R]={flags:O,ns:I,name:A,nonMinifiedName:A,securityContext:N,suffix:_}}s=s||[];var w=new Array(s.length);for(R=0;R<s.length;R++){var P=a(s[R],2);w[R]={type:0,target:P[0],eventName:P[1],propName:null}}var x=(o=o||[]).map(function(e){var n=a(e,2),t=n[1],l=a(wl(n[0]),2);return[l[0],l[1],t]});return h=function(e){if(e&&e.id===ll){var n=null!=e.encapsulation&&e.encapsulation!==cn.None||e.styles.length||Object.keys(e.data).length;e.id=n?"c"+ol++:il}return e&&e.id===il&&(e=null),e||null}(h),p&&(n|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:n|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:f,matchedQueryIds:v,references:m,ngContentIndex:l,childCount:i,bindings:y,bindingFlags:Pl(y),outputs:w,element:{ns:S,name:E,attrs:x,template:null,componentProvider:null,componentView:p||null,componentRendererType:h,publicProviders:null,allProviders:null,handleEvent:c||Jt},provider:null,text:null,query:null,ngContent:null}}function no(e,n,t){var l,i=t.element,r=e.root.selectorOrNode,o=e.renderer;if(e.parent||!r){l=i.name?o.createElement(i.name,i.ns):o.createComment("");var u=Rl(e,n,t);u&&o.appendChild(u,l)}else l=o.selectRootElement(r,!!i.componentRendererType&&i.componentRendererType.encapsulation===cn.ShadowDom);if(i.attrs)for(var s=0;s<i.attrs.length;s++){var c=a(i.attrs[s],3);o.setAttribute(l,c[1],c[2],c[0])}return l}function to(e,n,t,l){for(var i=0;i<t.outputs.length;i++){var r=t.outputs[i],o=lo(e,t.nodeIndex,(p=r.eventName,(c=r.target)?c+":"+p:p)),u=r.target,s=e;"component"===r.target&&(u=null,s=n);var a=s.renderer.listen(u||l,r.eventName,o);e.disposables[t.outputIndex+i]=a}var c,p}function lo(e,n,t){return function(l){return hl(e,n,t,l)}}function io(e,n,t,l){if(!sl(e,n,t,l))return!1;var i=n.bindings[t],r=$t(e,n.nodeIndex),o=r.renderElement,u=i.name;switch(15&i.flags){case 1:!function(e,n,t,l,i,r){var o=n.securityContext,u=o?e.root.sanitizer.sanitize(o,r):r;u=null!=u?u.toString():null;var s=e.renderer;null!=r?s.setAttribute(t,i,u,l):s.removeAttribute(t,i,l)}(e,i,o,i.ns,u,l);break;case 2:!function(e,n,t,l){var i=e.renderer;l?i.addClass(n,t):i.removeClass(n,t)}(e,o,u,l);break;case 4:!function(e,n,t,l,i){var r=e.root.sanitizer.sanitize(Ln.STYLE,i);if(null!=r){r=r.toString();var o=n.suffix;null!=o&&(r+=o)}else r=null;var u=e.renderer;null!=r?u.setStyle(t,l,r):u.removeStyle(t,l)}(e,i,o,u,l);break;case 8:!function(e,n,t,l,i){var r=n.securityContext,o=r?e.root.sanitizer.sanitize(r,i):i;e.renderer.setProperty(t,l,o)}(33554432&n.flags&&32&i.flags?r.componentView:e,i,o,u,l)}return!0}function ro(e,n,t){var l=[];for(var i in t)l.push({propName:i,bindingType:t[i]});return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,ngContentIndex:-1,matchedQueries:{},matchedQueryIds:0,references:{},childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:{id:n,filterId:Sl(n),bindings:l},ngContent:null}}function oo(e){for(var n=e.def.nodeMatchedQueries;e.parent&&vl(e);){var t=e.parentNodeDef;e=e.parent;for(var l=t.nodeIndex+t.childCount,i=0;i<=l;i++)67108864&(r=e.def.nodes[i]).flags&&536870912&r.flags&&(r.query.filterId&n)===r.query.filterId&&Xt(e,i).setDirty(),!(1&r.flags&&i+r.childCount<t.nodeIndex)&&67108864&r.childFlags&&536870912&r.childFlags||(i+=r.childCount)}if(134217728&e.def.nodeFlags)for(i=0;i<e.def.nodes.length;i++){var r;134217728&(r=e.def.nodes[i]).flags&&536870912&r.flags&&Xt(e,i).setDirty(),i+=r.childCount}}function uo(e,n){var t=Xt(e,n.nodeIndex);if(t.dirty){var l,i=void 0;if(67108864&n.flags){var r=n.parent.parent;i=so(e,r.nodeIndex,r.nodeIndex+r.childCount,n.query,[]),l=Qt(e,n.parent.nodeIndex).instance}else 134217728&n.flags&&(i=so(e,0,e.def.nodes.length-1,n.query,[]),l=e.component);t.reset(i);for(var o=n.query.bindings,u=!1,s=0;s<o.length;s++){var a=o[s],c=void 0;switch(a.bindingType){case 0:c=t.first;break;case 1:c=t,u=!0}l[a.propName]=c}u&&t.notifyOnChanges()}}function so(e,n,t,l,i){for(var r=n;r<=t;r++){var o=e.def.nodes[r],u=o.matchedQueries[l.id];if(null!=u&&i.push(ao(e,o,u)),1&o.flags&&o.element.template&&(o.element.template.nodeMatchedQueries&l.filterId)===l.filterId){var s=$t(e,r);if((o.childMatchedQueries&l.filterId)===l.filterId&&(so(e,r+1,r+o.childCount,l,i),r+=o.childCount),16777216&o.flags)for(var a=s.viewContainer._embeddedViews,c=0;c<a.length;c++){var p=a[c],h=dl(p);h&&h===s&&so(p,0,p.def.nodes.length-1,l,i)}var d=s.template._projectedViews;if(d)for(c=0;c<d.length;c++){var g=d[c];so(g,0,g.def.nodes.length-1,l,i)}}(o.childMatchedQueries&l.filterId)!==l.filterId&&(r+=o.childCount)}return i}function ao(e,n,t){if(null!=t)switch(t){case 1:return $t(e,n.nodeIndex).renderElement;case 0:return new dt($t(e,n.nodeIndex).renderElement);case 2:return $t(e,n.nodeIndex).template;case 3:return $t(e,n.nodeIndex).viewContainer;case 4:return Qt(e,n.nodeIndex).instance}}function co(e,n,t){var l=Rl(e,n,t);l&&Il(e,t.ngContent.index,1,l,null,void 0)}function po(e,n){return go(128,e,new Array(n+1))}function ho(e,n){for(var t=Object.keys(n),l=t.length,i=new Array(l),r=0;r<l;r++){var o=t[r];i[n[o]]=o}return go(64,e,i)}function go(e,n,t){for(var l=new Array(t.length),i=0;i<t.length;i++){var r=t[i];l[i]={flags:8,name:r,ns:null,nonMinifiedName:r,securityContext:null,suffix:null}}return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:n,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:-1,childCount:0,bindings:l,bindingFlags:Pl(l),outputs:[],element:null,provider:null,text:null,query:null,ngContent:null}}function fo(e,n,t){for(var l=new Array(t.length-1),i=1;i<t.length;i++)l[i-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:t[i]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:n,childCount:0,bindings:l,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:t[0]},query:null,ngContent:null}}function mo(e,n,t){var l,i=e.renderer;l=i.createText(t.text.prefix);var r=Rl(e,n,t);return r&&i.appendChild(r,l),{renderText:l}}function vo(e,n){return(null!=e?e.toString():"")+n.suffix}function So(e,n,t,l){for(var i=0,r=0,o=0,u=0,s=0,a=null,c=null,p=!1,h=!1,d=null,g=0;g<n.length;g++){var f=n[g];if(f.nodeIndex=g,f.parent=a,f.bindingIndex=i,f.outputIndex=r,f.renderParent=c,o|=f.flags,s|=f.matchedQueryIds,f.element){var m=f.element;m.publicProviders=a?a.element.publicProviders:Object.create(null),m.allProviders=m.publicProviders,p=!1,h=!1,f.element.template&&(s|=f.element.template.nodeMatchedQueries)}if(yo(a,f,n.length),i+=f.bindings.length,r+=f.outputs.length,!c&&3&f.flags&&(d=f),20224&f.flags){p||(p=!0,a.element.publicProviders=Object.create(a.element.publicProviders),a.element.allProviders=a.element.publicProviders);var v=0!=(32768&f.flags);0==(8192&f.flags)||v?a.element.publicProviders[nl(f.provider.token)]=f:(h||(h=!0,a.element.allProviders=Object.create(a.element.publicProviders)),a.element.allProviders[nl(f.provider.token)]=f),v&&(a.element.componentProvider=f)}if(a?(a.childFlags|=f.flags,a.directChildFlags|=f.flags,a.childMatchedQueries|=f.matchedQueryIds,f.element&&f.element.template&&(a.childMatchedQueries|=f.element.template.nodeMatchedQueries)):u|=f.flags,f.childCount>0)a=f,Eo(f)||(c=f);else for(;a&&g===a.nodeIndex+a.childCount;){var S=a.parent;S&&(S.childFlags|=a.childFlags,S.childMatchedQueries|=a.childMatchedQueries),c=(a=S)&&Eo(a)?a.renderParent:a}}return{factory:null,nodeFlags:o,rootNodeFlags:u,nodeMatchedQueries:s,flags:e,nodes:n,updateDirectives:t||Jt,updateRenderer:l||Jt,handleEvent:function(e,t,l,i){return n[t].element.handleEvent(e,l,i)},bindingCount:i,outputCount:r,lastRenderRootNode:d}}function Eo(e){return 0!=(1&e.flags)&&null===e.element.name}function yo(e,n,t){var l=n.element&&n.element.template;if(l){if(!l.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(l.lastRenderRootNode&&16777216&l.lastRenderRootNode.flags)throw new Error("Illegal State: Last root node of a template can't have embedded views, at index "+n.nodeIndex+"!")}if(20224&n.flags&&0==(1&(e?e.flags:0)))throw new Error("Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index "+n.nodeIndex+"!");if(n.query){if(67108864&n.flags&&(!e||0==(16384&e.flags)))throw new Error("Illegal State: Content Query nodes need to be children of directives, at index "+n.nodeIndex+"!");if(134217728&n.flags&&e)throw new Error("Illegal State: View Query nodes have to be top level nodes, at index "+n.nodeIndex+"!")}if(n.childCount){var i=e?e.nodeIndex+e.childCount:t-1;if(n.nodeIndex<=i&&n.nodeIndex+n.childCount>i)throw new Error("Illegal State: childCount of node leads outside of parent, at index "+n.nodeIndex+"!")}}function Ro(e,n,t,l){var i=To(e.root,e.renderer,e,n,t);return Co(i,e.component,l),Io(i),i}function bo(e,n,t){var l=To(e,e.renderer,null,null,n);return Co(l,t,t),Io(l),l}function Oo(e,n,t,l){var i,r=n.element.componentRendererType;return i=r?e.root.rendererFactory.createRenderer(l,r):e.root.renderer,To(e.root,i,e,n.element.componentProvider,t)}function To(e,n,t,l,i){var r=new Array(i.nodes.length),o=i.outputCount?new Array(i.outputCount):null;return{def:i,parent:t,viewContainerParent:null,parentNodeDef:l,context:null,component:null,nodes:r,state:13,root:e,renderer:n,oldValues:new Array(i.bindingCount),disposables:o,initIndex:-1}}function Co(e,n,t){e.component=n,e.context=t}function Io(e){var n;ml(e)&&(n=$t(e.parent,e.parentNodeDef.parent.nodeIndex).renderElement);for(var t=e.def,l=e.nodes,i=0;i<t.nodes.length;i++){var r=t.nodes[i];Zt.setCurrentNode(e,i);var o=void 0;switch(201347067&r.flags){case 1:var u=no(e,n,r),s=void 0;if(33554432&r.flags){var a=Ol(r.element.componentView);s=Zt.createComponentView(e,r,a,u)}to(e,s,r,u),o={renderElement:u,componentView:s,viewContainer:null,template:r.element.template?ei(e,r):void 0},16777216&r.flags&&(o.viewContainer=ql(e,r,o));break;case 2:o=mo(e,n,r);break;case 512:case 1024:case 2048:case 256:(o=l[i])||4096&r.flags||(o={instance:Ri(e,r)});break;case 16:o={instance:bi(e,r)};break;case 16384:(o=l[i])||(o={instance:Oi(e,r)}),32768&r.flags&&Co($t(e,r.parent.nodeIndex).componentView,o.instance,o.instance);break;case 32:case 64:case 128:o={value:void 0};break;case 67108864:case 134217728:o=new Vi;break;case 8:co(e,n,r),o=void 0}l[i]=o}Do(e,Mo.CreateViewNodes),Ho(e,201326592,268435456,0)}function Ao(e){wo(e),Zt.updateDirectives(e,1),Lo(e,Mo.CheckNoChanges),Zt.updateRenderer(e,1),Do(e,Mo.CheckNoChanges),e.state&=-97}function No(e){1&e.state?(e.state&=-2,e.state|=2):e.state&=-3,Yt(e,0,256),wo(e),Zt.updateDirectives(e,0),Lo(e,Mo.CheckAndUpdate),Ho(e,67108864,536870912,0);var n=Yt(e,256,512);Pi(e,2097152|(n?1048576:0)),Zt.updateRenderer(e,0),Do(e,Mo.CheckAndUpdate),Ho(e,134217728,536870912,0),Pi(e,8388608|((n=Yt(e,512,768))?4194304:0)),2&e.def.flags&&(e.state&=-9),e.state&=-97,Yt(e,768,1024)}function _o(e,n,t,l,i,r,o,u,s,a,p,h,d){return 0===t?function(e,n,t,l,i,r,o,u,s,a,c,p){switch(201347067&n.flags){case 1:return function(e,n,t,l,i,r,o,u,s,a,c,p){var h=n.bindings.length,d=!1;return h>0&&io(e,n,0,t)&&(d=!0),h>1&&io(e,n,1,l)&&(d=!0),h>2&&io(e,n,2,i)&&(d=!0),h>3&&io(e,n,3,r)&&(d=!0),h>4&&io(e,n,4,o)&&(d=!0),h>5&&io(e,n,5,u)&&(d=!0),h>6&&io(e,n,6,s)&&(d=!0),h>7&&io(e,n,7,a)&&(d=!0),h>8&&io(e,n,8,c)&&(d=!0),h>9&&io(e,n,9,p)&&(d=!0),d}(e,n,t,l,i,r,o,u,s,a,c,p);case 2:return function(e,n,t,l,i,r,o,u,s,a,c,p){var h=!1,d=n.bindings,g=d.length;if(g>0&&sl(e,n,0,t)&&(h=!0),g>1&&sl(e,n,1,l)&&(h=!0),g>2&&sl(e,n,2,i)&&(h=!0),g>3&&sl(e,n,3,r)&&(h=!0),g>4&&sl(e,n,4,o)&&(h=!0),g>5&&sl(e,n,5,u)&&(h=!0),g>6&&sl(e,n,6,s)&&(h=!0),g>7&&sl(e,n,7,a)&&(h=!0),g>8&&sl(e,n,8,c)&&(h=!0),g>9&&sl(e,n,9,p)&&(h=!0),h){var f=n.text.prefix;g>0&&(f+=vo(t,d[0])),g>1&&(f+=vo(l,d[1])),g>2&&(f+=vo(i,d[2])),g>3&&(f+=vo(r,d[3])),g>4&&(f+=vo(o,d[4])),g>5&&(f+=vo(u,d[5])),g>6&&(f+=vo(s,d[6])),g>7&&(f+=vo(a,d[7])),g>8&&(f+=vo(c,d[8])),g>9&&(f+=vo(p,d[9]));var m=jt(e,n.nodeIndex).renderText;e.renderer.setValue(m,f)}return h}(e,n,t,l,i,r,o,u,s,a,c,p);case 16384:return function(e,n,t,l,i,r,o,u,s,a,c,p){var h=Qt(e,n.nodeIndex),d=h.instance,g=!1,f=void 0,m=n.bindings.length;return m>0&&ul(e,n,0,t)&&(g=!0,f=wi(e,h,n,0,t,f)),m>1&&ul(e,n,1,l)&&(g=!0,f=wi(e,h,n,1,l,f)),m>2&&ul(e,n,2,i)&&(g=!0,f=wi(e,h,n,2,i,f)),m>3&&ul(e,n,3,r)&&(g=!0,f=wi(e,h,n,3,r,f)),m>4&&ul(e,n,4,o)&&(g=!0,f=wi(e,h,n,4,o,f)),m>5&&ul(e,n,5,u)&&(g=!0,f=wi(e,h,n,5,u,f)),m>6&&ul(e,n,6,s)&&(g=!0,f=wi(e,h,n,6,s,f)),m>7&&ul(e,n,7,a)&&(g=!0,f=wi(e,h,n,7,a,f)),m>8&&ul(e,n,8,c)&&(g=!0,f=wi(e,h,n,8,c,f)),m>9&&ul(e,n,9,p)&&(g=!0,f=wi(e,h,n,9,p,f)),f&&d.ngOnChanges(f),65536&n.flags&&Kt(e,256,n.nodeIndex)&&d.ngOnInit(),262144&n.flags&&d.ngDoCheck(),g}(e,n,t,l,i,r,o,u,s,a,c,p);case 32:case 64:case 128:return function(e,n,t,l,i,r,o,u,s,a,c,p){var h=n.bindings,d=!1,g=h.length;if(g>0&&sl(e,n,0,t)&&(d=!0),g>1&&sl(e,n,1,l)&&(d=!0),g>2&&sl(e,n,2,i)&&(d=!0),g>3&&sl(e,n,3,r)&&(d=!0),g>4&&sl(e,n,4,o)&&(d=!0),g>5&&sl(e,n,5,u)&&(d=!0),g>6&&sl(e,n,6,s)&&(d=!0),g>7&&sl(e,n,7,a)&&(d=!0),g>8&&sl(e,n,8,c)&&(d=!0),g>9&&sl(e,n,9,p)&&(d=!0),d){var f=qt(e,n.nodeIndex),m=void 0;switch(201347067&n.flags){case 32:m=new Array(h.length),g>0&&(m[0]=t),g>1&&(m[1]=l),g>2&&(m[2]=i),g>3&&(m[3]=r),g>4&&(m[4]=o),g>5&&(m[5]=u),g>6&&(m[6]=s),g>7&&(m[7]=a),g>8&&(m[8]=c),g>9&&(m[9]=p);break;case 64:m={},g>0&&(m[h[0].name]=t),g>1&&(m[h[1].name]=l),g>2&&(m[h[2].name]=i),g>3&&(m[h[3].name]=r),g>4&&(m[h[4].name]=o),g>5&&(m[h[5].name]=u),g>6&&(m[h[6].name]=s),g>7&&(m[h[7].name]=a),g>8&&(m[h[8].name]=c),g>9&&(m[h[9].name]=p);break;case 128:var v=t;switch(g){case 1:m=v.transform(t);break;case 2:m=v.transform(l);break;case 3:m=v.transform(l,i);break;case 4:m=v.transform(l,i,r);break;case 5:m=v.transform(l,i,r,o);break;case 6:m=v.transform(l,i,r,o,u);break;case 7:m=v.transform(l,i,r,o,u,s);break;case 8:m=v.transform(l,i,r,o,u,s,a);break;case 9:m=v.transform(l,i,r,o,u,s,a,c);break;case 10:m=v.transform(l,i,r,o,u,s,a,c,p)}}f.value=m}return d}(e,n,t,l,i,r,o,u,s,a,c,p);default:throw"unreachable"}}(e,n,l,i,r,o,u,s,a,p,h,d):function(e,n,t){switch(201347067&n.flags){case 1:return function(e,n,t){for(var l=!1,i=0;i<t.length;i++)io(e,n,i,t[i])&&(l=!0);return l}(e,n,t);case 2:return function(e,n,t){for(var l=n.bindings,i=!1,r=0;r<t.length;r++)sl(e,n,r,t[r])&&(i=!0);if(i){var o="";for(r=0;r<t.length;r++)o+=vo(t[r],l[r]);o=n.text.prefix+o;var u=jt(e,n.nodeIndex).renderText;e.renderer.setValue(u,o)}return i}(e,n,t);case 16384:return function(e,n,t){for(var l=Qt(e,n.nodeIndex),i=l.instance,r=!1,o=void 0,u=0;u<t.length;u++)ul(e,n,u,t[u])&&(r=!0,o=wi(e,l,n,u,t[u],o));return o&&i.ngOnChanges(o),65536&n.flags&&Kt(e,256,n.nodeIndex)&&i.ngOnInit(),262144&n.flags&&i.ngDoCheck(),r}(e,n,t);case 32:case 64:case 128:return function(e,n,t){for(var l=n.bindings,i=!1,r=0;r<t.length;r++)sl(e,n,r,t[r])&&(i=!0);if(i){var o=qt(e,n.nodeIndex),u=void 0;switch(201347067&n.flags){case 32:u=t;break;case 64:for(u={},r=0;r<t.length;r++)u[l[r].name]=t[r];break;case 128:var s=t[0],a=t.slice(1);u=s.transform.apply(s,c(a))}o.value=u}return i}(e,n,t);default:throw"unreachable"}}(e,n,l)}function wo(e){var n=e.def;if(4&n.nodeFlags)for(var t=0;t<n.nodes.length;t++){var l=n.nodes[t];if(4&l.flags){var i=$t(e,t).template._projectedViews;if(i)for(var r=0;r<i.length;r++){var o=i[r];o.state|=32,pl(o,e)}}else 0==(4&l.childFlags)&&(t+=l.childCount)}}function Po(e,n,t,l,i,r,o,u,s,a,c,p,h){return 0===t?function(e,n,t,l,i,r,o,u,s,a,c,p){var h=n.bindings.length;h>0&&al(e,n,0,t),h>1&&al(e,n,1,l),h>2&&al(e,n,2,i),h>3&&al(e,n,3,r),h>4&&al(e,n,4,o),h>5&&al(e,n,5,u),h>6&&al(e,n,6,s),h>7&&al(e,n,7,a),h>8&&al(e,n,8,c),h>9&&al(e,n,9,p)}(e,n,l,i,r,o,u,s,a,c,p,h):function(e,n,t){for(var l=0;l<t.length;l++)al(e,n,l,t[l])}(e,n,l),!1}function xo(e,n){if(Xt(e,n.nodeIndex).dirty)throw Vt(Zt.createDebugContext(e,n.nodeIndex),"Query "+n.query.id+" not dirty","Query "+n.query.id+" dirty",0!=(1&e.state))}function ko(e){if(!(128&e.state)){if(Lo(e,Mo.Destroy),Do(e,Mo.Destroy),Pi(e,131072),e.disposables)for(var n=0;n<e.disposables.length;n++)e.disposables[n]();!function(e){if(16&e.state){var n=dl(e);if(n){var t=n.template._projectedViews;t&&(Yl(t,t.indexOf(e)),Zt.dirtyParentQueries(e))}}}(e),e.renderer.destroyNode&&function(e){for(var n=e.def.nodes.length,t=0;t<n;t++){var l=e.def.nodes[t];1&l.flags?e.renderer.destroyNode($t(e,t).renderElement):2&l.flags?e.renderer.destroyNode(jt(e,t).renderText):(67108864&l.flags||134217728&l.flags)&&Xt(e,t).destroy()}}(e),ml(e)&&e.renderer.destroy(),e.state|=128}}var Mo=function(e){return e[e.CreateViewNodes=0]="CreateViewNodes",e[e.CheckNoChanges=1]="CheckNoChanges",e[e.CheckNoChangesProjectedViews=2]="CheckNoChangesProjectedViews",e[e.CheckAndUpdate=3]="CheckAndUpdate",e[e.CheckAndUpdateProjectedViews=4]="CheckAndUpdateProjectedViews",e[e.Destroy=5]="Destroy",e}({});function Do(e,n){var t=e.def;if(33554432&t.nodeFlags)for(var l=0;l<t.nodes.length;l++){var i=t.nodes[l];33554432&i.flags?Fo($t(e,l).componentView,n):0==(33554432&i.childFlags)&&(l+=i.childCount)}}function Lo(e,n){var t=e.def;if(16777216&t.nodeFlags)for(var l=0;l<t.nodes.length;l++){var i=t.nodes[l];if(16777216&i.flags)for(var r=$t(e,l).viewContainer._embeddedViews,o=0;o<r.length;o++)Fo(r[o],n);else 0==(16777216&i.childFlags)&&(l+=i.childCount)}}function Fo(e,n){var t=e.state;switch(n){case Mo.CheckNoChanges:0==(128&t)&&(12==(12&t)?Ao(e):64&t&&Uo(e,Mo.CheckNoChangesProjectedViews));break;case Mo.CheckNoChangesProjectedViews:0==(128&t)&&(32&t?Ao(e):64&t&&Uo(e,n));break;case Mo.CheckAndUpdate:0==(128&t)&&(12==(12&t)?No(e):64&t&&Uo(e,Mo.CheckAndUpdateProjectedViews));break;case Mo.CheckAndUpdateProjectedViews:0==(128&t)&&(32&t?No(e):64&t&&Uo(e,n));break;case Mo.Destroy:ko(e);break;case Mo.CreateViewNodes:Io(e)}}function Uo(e,n){Lo(e,n),Do(e,n)}function Ho(e,n,t,l){if(e.def.nodeFlags&n&&e.def.nodeFlags&t)for(var i=e.def.nodes.length,r=0;r<i;r++){var o=e.def.nodes[r];if(o.flags&n&&o.flags&t)switch(Zt.setCurrentNode(e,o.nodeIndex),l){case 0:uo(e,o);break;case 1:xo(e,o)}o.childFlags&n&&o.childFlags&t||(r+=o.childCount)}}var Go=!1;function Bo(e,n,t,l,i,r){var o=i.injector.get(mt);return bo(Wo(e,i,o,n,t),l,r)}function Vo(e,n,t,l,i,r){var o=i.injector.get(mt),u=Wo(e,i,new bu(o),n,t),s=Jo(l);return yu(su.create,bo,null,[u,s,r])}function Wo(e,n,t,l,i){var r=n.injector.get(Fn),o=n.injector.get(Wn),u=t.createRenderer(null,null);return{ngModule:n,injector:e,projectableNodes:l,selectorOrNode:i,sanitizer:r,rendererFactory:t,renderer:u,errorHandler:o}}function zo(e,n,t,l){var i=Jo(t);return yu(su.create,Ro,null,[e,n,i,l])}function Yo(e,n,t,l){return t=Qo.get(n.element.componentProvider.provider.token)||Jo(t),yu(su.create,Oo,null,[e,n,t,l])}function Ko(e,n,t,l){return ui(e,n,t,function(e){var n=function(e){var n=!1,t=!1;return 0===jo.size?{hasOverrides:n,hasDeprecatedOverrides:t}:(e.providers.forEach(function(e){var l=jo.get(e.token);3840&e.flags&&l&&(n=!0,t=t||l.deprecatedBehavior)}),e.modules.forEach(function(e){$o.forEach(function(l,i){Te(i).providedIn===e&&(n=!0,t=t||l.deprecatedBehavior)})}),{hasOverrides:n,hasDeprecatedOverrides:t})}(e),t=n.hasDeprecatedOverrides;return n.hasOverrides?(function(e){for(var n=0;n<e.providers.length;n++){var l=e.providers[n];t&&(l.flags|=4096);var i=jo.get(l.token);i&&(l.flags=-3841&l.flags|i.flags,l.deps=yl(i.deps),l.value=i.value)}if($o.size>0){var r=new Set(e.modules);$o.forEach(function(n,l){if(r.has(Te(l).providedIn)){var i={token:l,flags:n.flags|(t?4096:0),deps:yl(n.deps),value:n.value,index:e.providers.length};e.providers.push(i),e.providersByKey[nl(l)]=i}})}}(e=e.factory(function(){return Jt})),e):e}(l))}var jo=new Map,$o=new Map,Qo=new Map;function qo(e){var n;jo.set(e.token,e),"function"==typeof e.token&&(n=Te(e.token))&&"function"==typeof n.providedIn&&$o.set(e.token,e)}function Xo(e,n){var t=Ol(n.viewDefFactory),l=Ol(t.nodes[0].element.componentView);Qo.set(e,l)}function Zo(){jo.clear(),$o.clear(),Qo.clear()}function Jo(e){if(0===jo.size)return e;var n=function(e){for(var n=[],t=null,l=0;l<e.nodes.length;l++){var i=e.nodes[l];1&i.flags&&(t=i),t&&3840&i.flags&&jo.has(i.provider.token)&&(n.push(t.nodeIndex),t=null)}return n}(e);if(0===n.length)return e;e=e.factory(function(){return Jt});for(var t=0;t<n.length;t++)l(e,n[t]);return e;function l(e,n){for(var t=n+1;t<e.nodes.length;t++){var l=e.nodes[t];if(1&l.flags)return;if(3840&l.flags){var i=l.provider,r=jo.get(i.token);r&&(l.flags=-3841&l.flags|r.flags,i.deps=yl(r.deps),i.value=r.value)}}}}function eu(e,n,t,l,i,r,o,u,s,a,c,p,h){var d=e.def.nodes[n];return _o(e,d,t,l,i,r,o,u,s,a,c,p,h),224&d.flags?qt(e,n).value:void 0}function nu(e,n,t,l,i,r,o,u,s,a,c,p,h){var d=e.def.nodes[n];return Po(e,d,t,l,i,r,o,u,s,a,c,p,h),224&d.flags?qt(e,n).value:void 0}function tu(e){return yu(su.detectChanges,No,null,[e])}function lu(e){return yu(su.checkNoChanges,Ao,null,[e])}function iu(e){return yu(su.destroy,ko,null,[e])}var ru,ou,uu,su=function(e){return e[e.create=0]="create",e[e.detectChanges=1]="detectChanges",e[e.checkNoChanges=2]="checkNoChanges",e[e.destroy=3]="destroy",e[e.handleEvent=4]="handleEvent",e}({});function au(e,n){ou=e,uu=n}function cu(e,n,t,l){return au(e,n),yu(su.handleEvent,e.def.handleEvent,null,[e,n,t,l])}function pu(e,n){if(128&e.state)throw zt(su[ru]);return au(e,fu(e,0)),e.def.updateDirectives(function(e,t,l){for(var i=[],r=3;r<arguments.length;r++)i[r-3]=arguments[r];var o=e.def.nodes[t];return 0===n?du(e,o,l,i):gu(e,o,l,i),16384&o.flags&&au(e,fu(e,t)),224&o.flags?qt(e,o.nodeIndex).value:void 0},e)}function hu(e,n){if(128&e.state)throw zt(su[ru]);return au(e,mu(e,0)),e.def.updateRenderer(function(e,t,l){for(var i=[],r=3;r<arguments.length;r++)i[r-3]=arguments[r];var o=e.def.nodes[t];return 0===n?du(e,o,l,i):gu(e,o,l,i),3&o.flags&&au(e,mu(e,t)),224&o.flags?qt(e,o.nodeIndex).value:void 0},e)}function du(e,n,t,l){if(_o.apply(void 0,c([e,n,t],l))){var i=1===t?l[0]:l;if(16384&n.flags){for(var r={},o=0;o<n.bindings.length;o++){var u=n.bindings[o],s=i[o];8&u.flags&&(r[(d=u.nonMinifiedName,"ng-reflect-"+d.replace(/[$@]/g,"_").replace(zn,function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return"-"+e[1].toLowerCase()}))]=Yn(s))}var a=n.parent,p=$t(e,a.nodeIndex).renderElement;if(a.element.name)for(var h in r)null!=(s=r[h])?e.renderer.setAttribute(p,h,s):e.renderer.removeAttribute(p,h);else e.renderer.setValue(p,"bindings="+JSON.stringify(r,null,2))}}var d}function gu(e,n,t,l){Po.apply(void 0,c([e,n,t],l))}function fu(e,n){for(var t=n;t<e.def.nodes.length;t++){var l=e.def.nodes[t];if(16384&l.flags&&l.bindings&&l.bindings.length)return t}return null}function mu(e,n){for(var t=n;t<e.def.nodes.length;t++){var l=e.def.nodes[t];if(3&l.flags&&l.bindings&&l.bindings.length)return t}return null}var vu=function(){function e(e,n){this.view=e,this.nodeIndex=n,null==n&&(this.nodeIndex=n=0),this.nodeDef=e.def.nodes[n];for(var t=this.nodeDef,l=e;t&&0==(1&t.flags);)t=t.parent;if(!t)for(;!t&&l;)t=gl(l),l=l.parent;this.elDef=t,this.elView=l}return Object.defineProperty(e.prototype,"elOrCompView",{get:function(){return $t(this.elView,this.elDef.nodeIndex).componentView||this.view},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"injector",{get:function(){return ti(this.elView,this.elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"component",{get:function(){return this.elOrCompView.component},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this.elOrCompView.context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"providerTokens",{get:function(){var e=[];if(this.elDef)for(var n=this.elDef.nodeIndex+1;n<=this.elDef.nodeIndex+this.elDef.childCount;n++){var t=this.elView.def.nodes[n];20224&t.flags&&e.push(t.provider.token),n+=t.childCount}return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"references",{get:function(){var e={};if(this.elDef){Eu(this.elView,this.elDef,e);for(var n=this.elDef.nodeIndex+1;n<=this.elDef.nodeIndex+this.elDef.childCount;n++){var t=this.elView.def.nodes[n];20224&t.flags&&Eu(this.elView,t,e),n+=t.childCount}}return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentRenderElement",{get:function(){var e=function(e){for(;e&&!ml(e);)e=e.parent;return e.parent?$t(e.parent,gl(e).nodeIndex):null}(this.elOrCompView);return e?e.renderElement:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderNode",{get:function(){return 2&this.nodeDef.flags?fl(this.view,this.nodeDef):fl(this.elView,this.elDef)},enumerable:!0,configurable:!0}),e.prototype.logError=function(e){for(var n,t,l=[],i=1;i<arguments.length;i++)l[i-1]=arguments[i];2&this.nodeDef.flags?(n=this.view.def,t=this.nodeDef.nodeIndex):(n=this.elView.def,t=this.elDef.nodeIndex);var r=Su(n,t),o=-1,u=function(){var n;return++o===r?(n=e.error).bind.apply(n,c([e],l)):Jt};n.factory(u),o<r&&(e.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),e.error.apply(e,c(l)))},e}();function Su(e,n){for(var t=-1,l=0;l<=n;l++)3&e.nodes[l].flags&&t++;return t}function Eu(e,n,t){for(var l in n.references)t[l]=ao(e,n,n.references[l])}function yu(e,n,t,l){var i=ru,r=ou,o=uu;try{ru=e;var u=n.apply(t,l);return ou=r,uu=o,ru=i,u}catch(s){if(Gn(s)||!ou)throw s;throw function(e,n){return e instanceof Error||(e=new Error(e.toString())),Wt(e,n),e}(s,Ru())}}function Ru(){return ou?new vu(ou,uu):null}var bu=function(){function e(e){this.delegate=e}return e.prototype.createRenderer=function(e,n){return new Ou(this.delegate.createRenderer(e,n))},e.prototype.begin=function(){this.delegate.begin&&this.delegate.begin()},e.prototype.end=function(){this.delegate.end&&this.delegate.end()},e.prototype.whenRenderingDone=function(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)},e}(),Ou=function(){function e(e){this.delegate=e,this.debugContextFactory=Ru,this.data=this.delegate.data}return e.prototype.createDebugContext=function(e){return this.debugContextFactory(e)},e.prototype.destroyNode=function(e){!function(e){zr.delete(e.nativeNode)}(Yr(e)),this.delegate.destroyNode&&this.delegate.destroyNode(e)},e.prototype.destroy=function(){this.delegate.destroy()},e.prototype.createElement=function(e,n){var t=this.delegate.createElement(e,n),l=this.createDebugContext(t);if(l){var i=new Wr(t,null,l);i.name=e,Kr(i)}return t},e.prototype.createComment=function(e){var n=this.delegate.createComment(e),t=this.createDebugContext(n);return t&&Kr(new Vr(n,null,t)),n},e.prototype.createText=function(e){var n=this.delegate.createText(e),t=this.createDebugContext(n);return t&&Kr(new Vr(n,null,t)),n},e.prototype.appendChild=function(e,n){var t=Yr(e),l=Yr(n);t&&l&&t instanceof Wr&&t.addChild(l),this.delegate.appendChild(e,n)},e.prototype.insertBefore=function(e,n,t){var l=Yr(e),i=Yr(n),r=Yr(t);l&&i&&l instanceof Wr&&l.insertBefore(r,i),this.delegate.insertBefore(e,n,t)},e.prototype.removeChild=function(e,n){var t=Yr(e),l=Yr(n);t&&l&&t instanceof Wr&&t.removeChild(l),this.delegate.removeChild(e,n)},e.prototype.selectRootElement=function(e,n){var t=this.delegate.selectRootElement(e,n),l=Ru();return l&&Kr(new Wr(t,null,l)),t},e.prototype.setAttribute=function(e,n,t,l){var i=Yr(e);i&&i instanceof Wr&&(i.attributes[l?l+":"+n:n]=t),this.delegate.setAttribute(e,n,t,l)},e.prototype.removeAttribute=function(e,n,t){var l=Yr(e);l&&l instanceof Wr&&(l.attributes[t?t+":"+n:n]=null),this.delegate.removeAttribute(e,n,t)},e.prototype.addClass=function(e,n){var t=Yr(e);t&&t instanceof Wr&&(t.classes[n]=!0),this.delegate.addClass(e,n)},e.prototype.removeClass=function(e,n){var t=Yr(e);t&&t instanceof Wr&&(t.classes[n]=!1),this.delegate.removeClass(e,n)},e.prototype.setStyle=function(e,n,t,l){var i=Yr(e);i&&i instanceof Wr&&(i.styles[n]=t),this.delegate.setStyle(e,n,t,l)},e.prototype.removeStyle=function(e,n,t){var l=Yr(e);l&&l instanceof Wr&&(l.styles[n]=null),this.delegate.removeStyle(e,n,t)},e.prototype.setProperty=function(e,n,t){var l=Yr(e);l&&l instanceof Wr&&(l.properties[n]=t),this.delegate.setProperty(e,n,t)},e.prototype.listen=function(e,n,t){if("string"!=typeof e){var l=Yr(e);l&&l.listeners.push(new Br(n,t))}return this.delegate.listen(e,n,t)},e.prototype.parentNode=function(e){return this.delegate.parentNode(e)},e.prototype.nextSibling=function(e){return this.delegate.nextSibling(e)},e.prototype.setValue=function(e,n){return this.delegate.setValue(e,n)},e}();function Tu(e,n,t){return new Cu(e,n,t)}var Cu=function(e){function n(n,t,l){var i=e.call(this)||this;return i.moduleType=n,i._bootstrapComponents=t,i._ngModuleDefFactory=l,i}return i(n,e),n.prototype.create=function(e){!function(){if(!Go){Go=!0;var e=gn()?{setCurrentNode:au,createRootView:Vo,createEmbeddedView:zo,createComponentView:Yo,createNgModuleRef:Ko,overrideProvider:qo,overrideComponentView:Xo,clearOverrides:Zo,checkAndUpdateView:tu,checkNoChangesView:lu,destroyView:iu,createDebugContext:function(e,n){return new vu(e,n)},handleEvent:cu,updateDirectives:pu,updateRenderer:hu}:{setCurrentNode:function(){},createRootView:Bo,createEmbeddedView:Ro,createComponentView:Oo,createNgModuleRef:ui,overrideProvider:Jt,overrideComponentView:Jt,clearOverrides:Jt,checkAndUpdateView:No,checkNoChangesView:Ao,destroyView:ko,createDebugContext:function(e,n){return new vu(e,n)},handleEvent:function(e,n,t,l){return e.def.handleEvent(e,n,t,l)},updateDirectives:function(e,n){return e.def.updateDirectives(0===n?eu:nu,e)},updateRenderer:function(e,n){return e.def.updateRenderer(0===n?eu:nu,e)}};Zt.setCurrentNode=e.setCurrentNode,Zt.createRootView=e.createRootView,Zt.createEmbeddedView=e.createEmbeddedView,Zt.createComponentView=e.createComponentView,Zt.createNgModuleRef=e.createNgModuleRef,Zt.overrideProvider=e.overrideProvider,Zt.overrideComponentView=e.overrideComponentView,Zt.clearOverrides=e.clearOverrides,Zt.checkAndUpdateView=e.checkAndUpdateView,Zt.checkNoChangesView=e.checkNoChangesView,Zt.destroyView=e.destroyView,Zt.resolveDep=Ni,Zt.createDebugContext=e.createDebugContext,Zt.handleEvent=e.handleEvent,Zt.updateDirectives=e.updateDirectives,Zt.updateRenderer=e.updateRenderer,Zt.dirtyParentQueries=oo}}();var n=function(e){var n=Array.from(e.providers),t=Array.from(e.modules),l={};for(var i in e.providersByKey)l[i]=e.providersByKey[i];return{factory:e.factory,isRoot:e.isRoot,providers:n,modules:t,providersByKey:l}}(Ol(this._ngModuleDefFactory));return Zt.createNgModuleRef(this.moduleType,e||Xe.NULL,this._bootstrapComponents,n)},n}(pt),Iu=function(e){return e[e.NOTHING=0]="NOTHING",e[e.FOOD=1]="FOOD",e[e.LOG=2]="LOG",e[e.BRUSHWOOD=3]="BRUSHWOOD",e[e.STONE=4]="STONE",e[e.FUR=5]="FUR",e[e.WHEAT=6]="WHEAT",e[e.BARLEY=7]="BARLEY",e[e.HOP=8]="HOP",e[e.COTTON=9]="COTTON",e[e.HAY=10]="HAY",e[e.CHICKEN=11]="CHICKEN",e[e.COW=12]="COW",e[e.PIG=13]="PIG",e[e.HORSE=14]="HORSE",e[e.COAL=15]="COAL",e[e.GOLD_ORE=16]="GOLD_ORE",e[e.SILVER_ORE=17]="SILVER_ORE",e[e.COPPER_ORE=18]="COPPER_ORE",e[e.TIN_ORE=19]="TIN_ORE",e[e.IRON_ORE=20]="IRON_ORE",e[e.PLANK=21]="PLANK",e[e.CUT_STONE=22]="CUT_STONE",e[e.FUEL=23]="FUEL",e[e.FLOUR=24]="FLOUR",e[e.FABRIC=25]="FABRIC",e[e.LEATHER=26]="LEATHER",e[e.COINS=27]="COINS",e[e.COPPER=28]="COPPER",e[e.GOLD=29]="GOLD",e[e.SILVER=30]="SILVER",e[e.TIN=31]="TIN",e[e.BRONZE=32]="BRONZE",e[e.IRON=33]="IRON",e[e.STEEL=34]="STEEL",e[e.BERRY=35]="BERRY",e[e.MUSHROOM=36]="MUSHROOM",e[e.FISH=37]="FISH",e[e.APPLE=38]="APPLE",e[e.GRAPE=39]="GRAPE",e[e.BREAD=40]="BREAD",e[e.MEAT=41]="MEAT",e[e.EGG=42]="EGG",e[e.MILK=43]="MILK",e[e.COOKED_MEAT=44]="COOKED_MEAT",e[e.VEGETABLE_SOUP=45]="VEGETABLE_SOUP",e[e.MEAT_SOUP=46]="MEAT_SOUP",e[e.BEER=47]="BEER",e[e.WINE=48]="WINE",e[e.CLOTHES=49]="CLOTHES",e[e.BOW=50]="BOW",e[e.PICKAXE=51]="PICKAXE",e[e.SHOVEL=52]="SHOVEL",e[e.AXE=53]="AXE",e[e.SPEAR=54]="SPEAR",e[e.HAMMER=55]="HAMMER",e[e.SWORD=56]="SWORD",e[e.WOODEN_SHIELD=57]="WOODEN_SHIELD",e[e.LEATHER_ARMOR=58]="LEATHER_ARMOR",e[e.LIGHT_ARMOR=59]="LIGHT_ARMOR",e[e.HEAVY_ARMOR=60]="HEAVY_ARMOR",e[e.FISH_FOOD=61]="FISH_FOOD",e[e.CHEESE=62]="CHEESE",e[e.HERBS=63]="HERBS",e[e.HERBAL_MEDICINE=64]="HERBAL_MEDICINE",e[e.COOKED_FISH=65]="COOKED_FISH",e[e.SHEEP=66]="SHEEP",e[e.WOOL=67]="WOOL",e[e.PAPER=68]="PAPER",e[e.GLASS=69]="GLASS",e[e.CLAY=70]="CLAY",e[e.POTTERY=71]="POTTERY",e[e.BRICKS=72]="BRICKS",e[e.OMELETTE=73]="OMELETTE",e[e.PIE=74]="PIE",e[e.NAILS=75]="NAILS",e[e.MAP=76]="MAP",e[e.CANNON=77]="CANNON",e[e.BOUILLABAISSE=78]="BOUILLABAISSE",e}({});!function(e){e.values=function(){return Object.keys(e).filter(function(e){return isNaN(e)&&"values"!==e})}}(Iu||(Iu={}));var Au=function(e){return e[e.MOTIVATION_SPEECH=0]="MOTIVATION_SPEECH",e[e.ROYAL_PROPHECY=1]="ROYAL_PROPHECY",e[e.HERITAGE=2]="HERITAGE",e[e.FAMILY_JEWELS=3]="FAMILY_JEWELS",e[e.KING_OF_THE_FOREST=4]="KING_OF_THE_FOREST",e[e.KING_OF_THE_SEAS=5]="KING_OF_THE_SEAS",e[e.KING_OF_THE_PEOPLE=6]="KING_OF_THE_PEOPLE",e[e.KING_OF_THE_WAR=7]="KING_OF_THE_WAR",e[e.CALL_TO_ARMS=8]="CALL_TO_ARMS",e[e.UNITE_WITH_THE_PEOPLE=9]="UNITE_WITH_THE_PEOPLE",e[e.JESTER=10]="JESTER",e[e.ROYAL_ORDERS=11]="ROYAL_ORDERS",e[e.ROYAL_ARCHIVES=12]="ROYAL_ARCHIVES",e}({}),Nu=function(e){return e[e.MANAGEMENT=0]="MANAGEMENT",e[e.STONE_AXE=1]="STONE_AXE",e[e.STONE_PICKAXE=2]="STONE_PICKAXE",e[e.STONE_SHOVEL=3]="STONE_SHOVEL",e[e.STONE_HAMMER=4]="STONE_HAMMER",e[e.HUNTING=5]="HUNTING",e[e.FIRE=6]="FIRE",e[e.BIGGER_FIRE=7]="BIGGER_FIRE",e[e.COOKING=8]="COOKING",e[e.TRADE=9]="TRADE",e[e.ALCOHOL=10]="ALCOHOL",e[e.WONDER_BUILDINGS=11]="WONDER_BUILDINGS",e[e.TRADE_ROUTES=12]="TRADE_ROUTES",e[e.BUFF_PRODUCTION=13]="BUFF_PRODUCTION",e[e.STONE_SPEAR=14]="STONE_SPEAR",e[e.BOW=15]="BOW",e[e.BARRACKS=16]="BARRACKS",e[e.WOODEN_DEFENCES=17]="WOODEN_DEFENCES",e[e.STONE_DEFENCES=18]="STONE_DEFENCES",e[e.STASH=19]="STASH",e[e.SCIENTIFIC_METHOD=20]="SCIENTIFIC_METHOD",e[e.FORESIGHT=21]="FORESIGHT",e[e.CALENDAR=22]="CALENDAR",e[e.WEATHER=23]="WEATHER",e[e.HISTORY=24]="HISTORY",e[e.URBAN_PLANNING=25]="URBAN_PLANNING",e[e.MATHEMATICS=26]="MATHEMATICS",e[e.PROSPECTING_FOR_ORE=27]="PROSPECTING_FOR_ORE",e[e.ADVANCED_PROSPECTING=28]="ADVANCED_PROSPECTING",e[e.MASTER_PROSPECTING=29]="MASTER_PROSPECTING",e[e.SAWMILL=30]="SAWMILL",e[e.MINING=31]="MINING",e[e.PIT_MINE=32]="PIT_MINE",e[e.UNDERGROUND_MINE=33]="UNDERGROUND_MINE",e[e.WINDMILL=34]="WINDMILL",e[e.MORTAR=35]="MORTAR",e[e.HOUSE=36]="HOUSE",e[e.TANNERY=37]="TANNERY",e[e.FABRIC=38]="FABRIC",e[e.TAILORING=39]="TAILORING",e[e.ORE_PROCESSING=40]="ORE_PROCESSING",e[e.ADVANCED_ORE_PROCESSING=41]="ADVANCED_ORE_PROCESSING",e[e.MASTER_ORE_PROCESSING=42]="MASTER_ORE_PROCESSING",e[e.COINS_MINTING=43]="COINS_MINTING",e[e.METALLURGY=44]="METALLURGY",e[e.ADVANCED_METALLURGY=45]="ADVANCED_METALLURGY",e[e.PICKAXE_DESIGN=46]="PICKAXE_DESIGN",e[e.AGRICULTURE=47]="AGRICULTURE",e[e.FORESTRY=48]="FORESTRY",e[e.FISHING=49]="FISHING",e[e.ANIMALS=50]="ANIMALS",e[e.COTTON=51]="COTTON",e[e.FERTILIZER=52]="FERTILIZER",e[e.HUMAN_RESOURCES=53]="HUMAN_RESOURCES",e[e.FISH_FOOD=54]="FISH_FOOD",e[e.SPECIALISED_PRODUCTION=55]="SPECIALISED_PRODUCTION",e[e.LONGHOUSE=56]="LONGHOUSE",e[e.HERBAL_MEDICINE=57]="HERBAL_MEDICINE",e[e.HERBALISM=58]="HERBALISM",e[e.CARTOGRAPHY=59]="CARTOGRAPHY",e[e.PARCHMENT=60]="PARCHMENT",e[e.PAPER_MILL=61]="PAPER_MILL",e[e.DEEP_MINE=62]="DEEP_MINE",e[e.ADVANCED_MATHEMATICS=63]="ADVANCED_MATHEMATICS",e[e.IMPROVED_FORESIGHT=64]="IMPROVED_FORESIGHT",e[e.LOGISTICS=65]="LOGISTICS",e[e.PRODUCTION_ZONES=66]="PRODUCTION_ZONES",e[e.CROPS_STORAGE=67]="CROPS_STORAGE",e[e.COPPER_TOOLS=68]="COPPER_TOOLS",e[e.BRONZE_TOOLS=69]="BRONZE_TOOLS",e[e.IRON_TOOLS=70]="IRON_TOOLS",e[e.BAKERY=71]="BAKERY",e[e.KITCHEN=72]="KITCHEN",e[e.DIGGING=73]="DIGGING",e[e.POTTERY=74]="POTTERY",e[e.BRICKS=75]="BRICKS",e[e.TUDOR_HOUSE=76]="TUDOR_HOUSE",e[e.IMPROVED_COOKING=77]="IMPROVED_COOKING",e[e.BOAT_BUILDING=78]="BOAT_BUILDING",e[e.CANNON=79]="CANNON",e[e.GALLEON=80]="GALLEON",e[e.BIGGER_SHIPS=81]="BIGGER_SHIPS",e[e.SEA_NAVIGATION=82]="SEA_NAVIGATION",e[e.SEA_CARTOGRAPHY=83]="SEA_CARTOGRAPHY",e[e.SEA_CUISINE=84]="SEA_CUISINE",e}({}),_u=function(e){return e[e.WEATHER=0]="WEATHER",e[e.MARKET=1]="MARKET",e[e.MANAGEMENT=2]="MANAGEMENT",e[e.CRAFTING=3]="CRAFTING",e[e.RESEARCH=4]="RESEARCH",e[e.ARMY=5]="ARMY",e[e.RELIGION=6]="RELIGION",e[e.FORT=7]="FORT",e[e.SEA=8]="SEA",e[e.FIELD=9]="FIELD",e[e.MOUNTAINS=10]="MOUNTAINS",e[e.PLATEAU=11]="PLATEAU",e[e.HOUSE=12]="HOUSE",e[e.SHRINE=13]="SHRINE",e[e.CHURCH=14]="CHURCH",e[e.TAILOR=15]="TAILOR",e[e.TAVERN=16]="TAVERN",e[e.BAKERY=17]="BAKERY",e[e.MARKETPLACE=18]="MARKETPLACE",e[e.BARRACKS=19]="BARRACKS",e[e.STOCKADE=20]="STOCKADE",e[e.WOODEN_TOWER=21]="WOODEN_TOWER",e[e.STONE_TOWER=22]="STONE_TOWER",e[e.STASH=23]="STASH",e[e.FORESTER=24]="FORESTER",e[e.SAWMILL=25]="SAWMILL",e[e.HUNTER=26]="HUNTER",e[e.TANNERY=27]="TANNERY",e[e.WINDMILL=28]="WINDMILL",e[e.FARM=29]="FARM",e[e.PASTURE=30]="PASTURE",e[e.BUTCHER=31]="BUTCHER",e[e.BREWERY=32]="BREWERY",e[e.WINERY=33]="WINERY",e[e.COTTON_MILL=34]="COTTON_MILL",e[e.PIT_MINE=35]="PIT_MINE",e[e.GEOLOGIST=36]="GEOLOGIST",e[e.SMITHY=37]="SMITHY",e[e.MINT=38]="MINT",e[e.FISHERS_HUT=39]="FISHERS_HUT",e[e.CALENDAR=40]="CALENDAR",e[e.FIRE=41]="FIRE",e[e.URBAN_PLANNING=42]="URBAN_PLANNING",e[e.ALCOHOL=43]="ALCOHOL",e[e.GOLD=44]="GOLD",e[e.SILVER=45]="SILVER",e[e.BRONZE=46]="BRONZE",e[e.IRON=47]="IRON",e[e.STEEL=48]="STEEL",e[e.ADVANCED_ORE_PROCESSING=49]="ADVANCED_ORE_PROCESSING",e[e.BUFFS=50]="BUFFS",e[e.COTTON=51]="COTTON",e[e.BARLEY=52]="BARLEY",e[e.HOPS=53]="HOPS",e[e.BUILT_QUARRY=54]="BUILT_QUARRY",e[e.BUILT_SMITHY=55]="BUILT_SMITHY",e[e.HUMAN_RESOURCES=56]="HUMAN_RESOURCES",e[e.FISH_FOOD=57]="FISH_FOOD",e[e.SPECIALISED_PRODUCTION=58]="SPECIALISED_PRODUCTION",e[e.MANUFACTURE=59]="MANUFACTURE",e[e.STONEMASON=60]="STONEMASON",e[e.LONGHOUSE=61]="LONGHOUSE",e[e.HERITAGE=62]="HERITAGE",e[e.HERBALISM=63]="HERBALISM",e[e.EMBASSY=64]="EMBASSY",e[e.CARTOGRAPHY=65]="CARTOGRAPHY",e[e.PAPER_MILL=66]="PAPER_MILL",e[e.DEEP_MINE=67]="DEEP_MINE",e[e.LOGISTICS=68]="LOGISTICS",e[e.PRODUCTION_ZONES=69]="PRODUCTION_ZONES",e[e.BARN=70]="BARN",e[e.KITCHEN=71]="KITCHEN",e[e.CLAY_PIT=72]="CLAY_PIT",e[e.TUDOR_HOUSE=73]="TUDOR_HOUSE",e[e.NAVY=74]="NAVY",e[e.PIER=75]="PIER",e[e.BOAT_BUILDER=76]="BOAT_BUILDER",e[e.HARBOUR=77]="HARBOUR",e[e.SHIPYARD=78]="SHIPYARD",e[e.BRIGANTINE=79]="BRIGANTINE",e[e.GALLEON=80]="GALLEON",e[e.LIGHTHOUSE=81]="LIGHTHOUSE",e[e.CARTOGRAPHER=82]="CARTOGRAPHER",e}({}),wu=function(e){return e[e.ALL=0]="ALL",e[e.CONSTRUCTION=1]="CONSTRUCTION",e[e.DECONSTRUCTION=2]="DECONSTRUCTION",e[e.HUT=3]="HUT",e[e.HOUSE=4]="HOUSE",e[e.MARKETPLACE=5]="MARKETPLACE",e[e.WAREHOUSE=6]="WAREHOUSE",e[e.SMITHY=7]="SMITHY",e[e.BAKERY=8]="BAKERY",e[e.WORKSHOP=9]="WORKSHOP",e[e.SHRINE=10]="SHRINE",e[e.TAILOR=11]="TAILOR",e[e.BREWERY=12]="BREWERY",e[e.TAVERN=13]="TAVERN",e[e.CHURCH=14]="CHURCH",e[e.STOCKADE=15]="STOCKADE",e[e.BARRACKS=16]="BARRACKS",e[e.TRAINING_SQUARE=17]="TRAINING_SQUARE",e[e.WOODEN_TOWER=18]="WOODEN_TOWER",e[e.STONE_TOWER=19]="STONE_TOWER",e[e.STASH=20]="STASH",e[e.LOGGERS_HUT=21]="LOGGERS_HUT",e[e.SAWMILL=22]="SAWMILL",e[e.FORESTER=23]="FORESTER",e[e.HUNTER_LODGE=24]="HUNTER_LODGE",e[e.GATHERER=25]="GATHERER",e[e.TANNERY=26]="TANNERY",e[e.FARM=27]="FARM",e[e.FIELD=28]="FIELD",e[e.ORCHARD=29]="ORCHARD",e[e.PASTURE=30]="PASTURE",e[e.WINDMILL=31]="WINDMILL",e[e.BUTCHER=32]="BUTCHER",e[e.COTTON_MILL=33]="COTTON_MILL",e[e.WINERY=34]="WINERY",e[e.PIT_MINE=35]="PIT_MINE",e[e.QUARRY=36]="QUARRY",e[e.GEOLOGIST=37]="GEOLOGIST",e[e.STONEMASON=38]="STONEMASON",e[e.MINT=39]="MINT",e[e.FISHERS_HUT=40]="FISHERS_HUT",e[e.SCHOOL_OF_FISH=41]="SCHOOL_OF_FISH",e[e.SHARKS=42]="SHARKS",e[e.STONEHENGE=43]="STONEHENGE",e[e.PYRAMID=44]="PYRAMID",e[e.HANGING_GARDEN=45]="HANGING_GARDEN",e[e.COLOSSUS=46]="COLOSSUS",e[e.UNDERGROUND_CITY=47]="UNDERGROUND_CITY",e[e.GREAT_LIGHTHOUSE=48]="GREAT_LIGHTHOUSE",e[e.SACRED_GROVE=49]="SACRED_GROVE",e[e.ASCENSION_TEMPLE=50]="ASCENSION_TEMPLE",e[e.MANUFACTURE=51]="MANUFACTURE",e[e.LONGHOUSE=52]="LONGHOUSE",e[e.EMBASSY=53]="EMBASSY",e[e.PAPER_MILL=54]="PAPER_MILL",e[e.DEEP_MINE=55]="DEEP_MINE",e[e.GATHERERS_CAMP=56]="GATHERERS_CAMP",e[e.BARN=57]="BARN",e[e.KITCHEN=58]="KITCHEN",e[e.CLAY_PIT=59]="CLAY_PIT",e[e.TUDOR_HOUSE=60]="TUDOR_HOUSE",e[e.LOGGERS_CAMP=61]="LOGGERS_CAMP",e[e.METEORITE=62]="METEORITE",e[e.BOAT_BUILDER=63]="BOAT_BUILDER",e[e.SHIPYARD=64]="SHIPYARD",e[e.PIER=65]="PIER",e[e.HARBOUR=66]="HARBOUR",e[e.LIGHTHOUSE=67]="LIGHTHOUSE",e[e.CARTOGRAPHER=68]="CARTOGRAPHER",e}({}),Pu=function(e){return e[e.BLESSING=0]="BLESSING",e[e.PREACH=1]="PREACH",e[e.FAITH_SHIELD=2]="FAITH_SHIELD",e[e.SOLDIER_PRAYER=3]="SOLDIER_PRAYER",e[e.FAITHFUL_RESEARCH=4]="FAITHFUL_RESEARCH",e[e.BABY_BOOM=5]="BABY_BOOM",e[e.LIFE_CYCLE=6]="LIFE_CYCLE",e[e.HOLY_WAR=7]="HOLY_WAR",e}({}),xu=function(e){return e[e.SPY=0]="SPY",e[e.DIVERSION=1]="DIVERSION",e[e.PLUNDER=2]="PLUNDER",e[e.EXPEDITION=3]="EXPEDITION",e[e.CONQUER=4]="CONQUER",e[e.COLONIZE=5]="COLONIZE",e[e.MOVE=6]="MOVE",e[e.BUILD=7]="BUILD",e[e.FISHING=8]="FISHING",e[e.HUNTING=9]="HUNTING",e[e.TREASURE=10]="TREASURE",e[e.CARTOGRAPHY=11]="CARTOGRAPHY",e[e.SEA_BATTLE=12]="SEA_BATTLE",e[e.SEA_PLUNDER=13]="SEA_PLUNDER",e[e.SEA_CONQUER=14]="SEA_CONQUER",e[e.SEA_MOVE=15]="SEA_MOVE",e}({}),ku=function(e){return e[e.NONE=0]="NONE",e[e.WHEAT=1]="WHEAT",e[e.BARLEY=2]="BARLEY",e[e.HAY=3]="HAY",e[e.HOP=4]="HOP",e[e.COTTON=5]="COTTON",e[e.BERRY=6]="BERRY",e[e.GRAPE=7]="GRAPE",e[e.APPLE=8]="APPLE",e[e.HERBS=9]="HERBS",e[e.MUSHROOM=10]="MUSHROOM",e}({}),Mu=function(e){return e[e.ALL=0]="ALL",e[e.NONE=1]="NONE",e[e.RAW=2]="RAW",e[e.PROCESSED=3]="PROCESSED",e[e.FOOD=4]="FOOD",e[e.TOOLS=5]="TOOLS",e[e.OTHER=6]="OTHER",e[e.WOODEN=7]="WOODEN",e[e.METAL=8]="METAL",e[e.STONE=9]="STONE",e[e.ANIMAL=10]="ANIMAL",e[e.FUEL=11]="FUEL",e[e.CONSUMABLE=12]="CONSUMABLE",e}({}),Du=function(e){return e[e.NONE=0]="NONE",e[e.FERTILITY=1]="FERTILITY",e[e.NATURE=2]="NATURE",e[e.TECHNOLOGY=3]="TECHNOLOGY",e[e.WAR=4]="WAR",e}({}),Lu=function(e){return e[e.ALL=0]="ALL",e[e.MILITIA=1]="MILITIA",e[e.SPEARMAN=2]="SPEARMAN",e[e.ARCHER=3]="ARCHER",e[e.SWORDSMAN=4]="SWORDSMAN",e[e.LIGHT_CAVALRY=5]="LIGHT_CAVALRY",e[e.SPY=6]="SPY",e[e.COLONIST=7]="COLONIST",e[e.HORSE_ARCHER=8]="HORSE_ARCHER",e[e.BOAT=9]="BOAT",e[e.BRIGANTINE=10]="BRIGANTINE",e[e.GALLEON=11]="GALLEON",e}({}),Fu=function(e){return e[e.NONE=0]="NONE",e[e.OFFENSE=1]="OFFENSE",e[e.DEFENSE=2]="DEFENSE",e[e.ECONOMY=3]="ECONOMY",e[e.PEACE=4]="PEACE",e}({}),Uu=function(e){return e[e.SPECIAL=0]="SPECIAL",e[e.PLAYER=1]="PLAYER",e[e.NEUTRAL=2]="NEUTRAL",e[e.EXPEDITION=3]="EXPEDITION",e[e.CLEADAL=4]="CLEADAL",e[e.GRIERIA=5]="GRIERIA",e[e.BOTHIL=6]="BOTHIL",e[e.DOSHOR=7]="DOSHOR",e[e.CREURUS=8]="CREURUS",e[e.ESTRAILA=9]="ESTRAILA",e[e.NONE=10]="NONE",e[e.PIRATES=11]="PIRATES",e}({}),Hu=function(e){return e[e.FLU=0]="FLU",e[e.COLD=1]="COLD",e[e.PNEUMONIA=2]="PNEUMONIA",e}({}),Gu=function(e){return e[e.VILLAGE=0]="VILLAGE",e[e.FORT=1]="FORT",e[e.FOREST=2]="FOREST",e[e.FIELD=3]="FIELD",e[e.MOUNTAINS=4]="MOUNTAINS",e[e.SEA=5]="SEA",e[e.PLATEAU=6]="PLATEAU",e}({}),Bu=function(e){return e[e.FISH=0]="FISH",e[e.SHARK=1]="SHARK",e[e.TREASURE=2]="TREASURE",e[e.PIRATES=3]="PIRATES",e[e.PIRATES_BASE=4]="PIRATES_BASE",e[e.WHIRLPOOL=5]="WHIRLPOOL",e[e.CARTOGRAPHY=6]="CARTOGRAPHY",e}({}),Vu=function(){function e(){}return e.round=function(e,n){return e.toFixed(n)},e.titleCase=function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()},e.prepareResourceName=function(e){return this.titleCase(Iu[e].replace(/_/g," "))},e.prepareRegionName=function(e){return this.titleCase(Gu[e].replace(/_/g," "))},e.prepareResourceTypeName=function(e){return this.titleCase(Mu[e].replace(/_/g," "))},e.preparePerkName=function(e){return this.titleCase(Au[e].replace(/_/g," "))},e.prepareTechName=function(e){return this.titleCase(Nu[e].replace(/_/g," "))},e.prepareFlagName=function(e){return this.titleCase(_u[e].replace(/_/g," "))},e.prepareBuildingName=function(e){return this.titleCase(wu[e].replace(/_/g," "))},e.prepareSeaEventName=function(e){return this.titleCase(Bu[e].replace(/_/g," "))},e.preparePrayerName=function(e){return this.titleCase(Pu[e].replace(/_/g," "))},e.prepareReligionName=function(e){return this.titleCase(Du[e].replace(/_/g," "))},e.prepareTroopName=function(e){return this.titleCase(Lu[e].replace(/_/g," "))},e.prepareMissionName=function(e){return this.titleCase(xu[e].replace(/_/g," "))},e.prepareCropName=function(e){return this.titleCase(ku[e].replace(/_/g," "))},e.prepareFocusName=function(e){return this.titleCase(Fu[e].replace(/_/g," "))},e.prepareCountryName=function(e){return this.titleCase(Uu[e].replace(/_/g," "))},e.prepareSicknessName=function(e){return this.titleCase(Hu[e].replace(/_/g," "))},e.resourcesArraysDiff=function(e,n){return e.filter(function(e){return n.findIndex(function(n){return n.resource===e.resource})<0})},e.prepareResourcesNamesList=function(n){var t="";return n.forEach(function(n){return t+=e.prepareResourceName(n.resource)+", "}),(t=t.substr(0,t.length-2)).toLowerCase()},e.copyResourceArray=function(e){var n=[];return e.forEach(function(e){return n.push({resource:e.resource,amount:e.amount})}),n},e}(),Wu=function(e){return e[e.GENERAL=0]="GENERAL",e[e.MILITARY=1]="MILITARY",e[e.SCIENCE=2]="SCIENCE",e[e.TECHNOLOGY=3]="TECHNOLOGY",e[e.AGRICULTURE=4]="AGRICULTURE",e}({}),zu=function(e){return e[e.GAME=0]="GAME",e[e.LOG=1]="LOG",e[e.MODAL=2]="MODAL",e[e.RESOURCES=3]="RESOURCES",e[e.LAND=4]="LAND",e[e.RESEARCH=5]="RESEARCH",e[e.CRAFTING=6]="CRAFTING",e[e.RECIPE=7]="RECIPE",e[e.RELIGION=8]="RELIGION",e[e.WEATHER=9]="WEATHER",e[e.CALENDAR=10]="CALENDAR",e[e.EFFECTS=11]="EFFECTS",e[e.ARMY=12]="ARMY",e[e.HAPPINESS=13]="HAPPINESS",e[e.MANAGEMENT=14]="MANAGEMENT",e[e.ROYAL=15]="ROYAL",e[e.MARKET=16]="MARKET",e[e.VILLAGE=17]="VILLAGE",e[e.FORT=18]="FORT",e[e.FOREST=19]="FOREST",e[e.FIELD=20]="FIELD",e[e.MOUNTAINS=21]="MOUNTAINS",e[e.SEA=22]="SEA",e[e.PLATEAU=23]="PLATEAU",e[e.BUILDING_FACTORY=24]="BUILDING_FACTORY",e[e.SERIALIZER=25]="SERIALIZER",e[e.KONGREGATE=26]="KONGREGATE",e[e.ID=27]="ID",e[e.TICKER=28]="TICKER",e[e.HERITAGE=29]="HERITAGE",e[e.WORLD=30]="WORLD",e[e.MISSION_FACTORY=31]="MISSION_FACTORY",e[e.SOUND=32]="SOUND",e[e.TUTORIAL=33]="TUTORIAL",e[e.NAVY=34]="NAVY",e}({}),Yu=function(e){return e[e.PLANK=0]="PLANK",e[e.CUT_STONE=1]="CUT_STONE",e[e.FABRIC=2]="FABRIC",e[e.LEATHER=3]="LEATHER",e[e.GOLD=4]="GOLD",e[e.SILVER=5]="SILVER",e[e.COPPER=6]="COPPER",e[e.TIN=7]="TIN",e[e.BRONZE=8]="BRONZE",e[e.IRON=9]="IRON",e[e.STEEL=10]="STEEL",e[e.FUEL_BRUSHWOOD=11]="FUEL_BRUSHWOOD",e[e.FUEL_LOG=12]="FUEL_LOG",e[e.FUEL_COAL=13]="FUEL_COAL",e[e.STONE_AXE=14]="STONE_AXE",e[e.STONE_PICKAXE=15]="STONE_PICKAXE",e[e.STONE_SHOVEL=16]="STONE_SHOVEL",e[e.STONE_SPEAR=17]="STONE_SPEAR",e[e.STONE_HAMMER=18]="STONE_HAMMER",e[e.BOW=19]="BOW",e[e.CLOTHES_FUR=20]="CLOTHES_FUR",e[e.CLOTHES_FABRIC=21]="CLOTHES_FABRIC",e[e.SWORD=22]="SWORD",e[e.WOODEN_SHIELD=23]="WOODEN_SHIELD",e[e.LEATHER_ARMOR=24]="LEATHER_ARMOR",e[e.LIGHT_ARMOR=25]="LIGHT_ARMOR",e[e.HEAVY_ARMOR=26]="HEAVY_ARMOR",e[e.COOKED_MEAT=27]="COOKED_MEAT",e[e.FLOUR=28]="FLOUR",e[e.BREAD=29]="BREAD",e[e.VEGETABLE_SOUP_BERRY=30]="VEGETABLE_SOUP_BERRY",e[e.VEGETABLE_SOUP_MUSHROOM=31]="VEGETABLE_SOUP_MUSHROOM",e[e.MEAT_SOUP=32]="MEAT_SOUP",e[e.CHEESE=33]="CHEESE",e[e.HERBAL_MEDICINE=34]="HERBAL_MEDICINE",e[e.COOKED_FISH=35]="COOKED_FISH",e[e.FABRIC_WOOL=36]="FABRIC_WOOL",e[e.PARCHMENT=37]="PARCHMENT",e[e.VEGETABLE_SOUP_BERRY_MUSHROOM=38]="VEGETABLE_SOUP_BERRY_MUSHROOM",e[e.COPPER_AXE=39]="COPPER_AXE",e[e.COPPER_PICKAXE=40]="COPPER_PICKAXE",e[e.COPPER_SHOVEL=41]="COPPER_SHOVEL",e[e.COPPER_SPEAR=42]="COPPER_SPEAR",e[e.COPPER_HAMMER=43]="COPPER_HAMMER",e[e.BRONZE_AXE=44]="BRONZE_AXE",e[e.BRONZE_PICKAXE=45]="BRONZE_PICKAXE",e[e.BRONZE_SHOVEL=46]="BRONZE_SHOVEL",e[e.BRONZE_SPEAR=47]="BRONZE_SPEAR",e[e.BRONZE_HAMMER=48]="BRONZE_HAMMER",e[e.IRON_AXE=49]="IRON_AXE",e[e.IRON_PICKAXE=50]="IRON_PICKAXE",e[e.IRON_SHOVEL=51]="IRON_SHOVEL",e[e.IRON_SPEAR=52]="IRON_SPEAR",e[e.IRON_HAMMER=53]="IRON_HAMMER",e[e.POTTERY=54]="POTTERY",e[e.BRICKS=55]="BRICKS",e[e.OMELETTE=56]="OMELETTE",e[e.PIE=57]="PIE",e[e.COPPER_NAILS=58]="COPPER_NAILS",e[e.BRONZE_NAILS=59]="BRONZE_NAILS",e[e.IRON_NAILS=60]="IRON_NAILS",e[e.CANNON=61]="CANNON",e[e.BOUILLABAISSE=62]="BOUILLABAISSE",e}({}),Ku=function(){function e(e,n,t,l,i){void 0===i&&(i=0),this.name=e,this.building=n,this.effect=t,this.duration=l,this.buff=i}return e.prototype.isPermanent=function(){return this.duration<0},e.prototype.isRoyal=function(){return-10===this.duration},e.prototype.isWonder=function(){return-9===this.duration},e.prototype.isBuff=function(){return this.buff>0},e}(),ju=function(e){return e.ALL="all",e.BUILD="build-modal",e.IMPORT="import-modal",e.EXPORT="export-modal",e.HARD_RESET="hard-reset-modal",e.INFO="info-modal",e.OPTIONS="options-modal",e.CONFIRM="confirm-modal",e.INPUT="input-modal",e.ROYAL="royal-modal",e.MISSION="mission-modal",e.MARKET="market-modal",e.WORK_MANAGEMENT="work-management-modal",e.TUTORIAL="tutorial-modal",e.CHANGELOG="changelog-modal",e.RESOURCE_MANAGEMENT="resource-management-modal",e.RECIPE="recipe-modal",e.WORLD="world-modal",e.WORLD_BUILD="world-build-modal",e.FIGHT_REPORT="fight-report-modal",e.ABDICATION="abdication-modal",e.ASCENSION="ascension-modal",e.RESEARCH_UNLOCK="research-unlock-modal",e.SHIPYARD="shipyard-modal",e}({}),$u=function(e){var n="function"==typeof Symbol&&e[Symbol.iterator],t=0;return n?n.call(e):{next:function(){return e&&t>=e.length&&(e=void 0),{value:e&&e[t++],done:!e}}}},Qu=function(){function e(){}return e.randomElement=function(e,n,t){var l,i,r,o;void 0===n&&(n=!1),void 0===t&&(t=10);var u=0;if(e.forEach(function(e){return u+=e.chance}),u>100||u<100&&n){var s=100/u;e.forEach(function(e){return e.chance=Math.floor(e.chance*s)})}var a=this.randomBetween(1,100*t),c=0;try{for(var p=$u(e),h=p.next();!h.done;h=p.next()){var d=h.value;if(c+1<=a&&c+d.chance*t>=a)return d.item;c+=d.chance*t}}catch(m){l={error:m}}finally{try{h&&!h.done&&(i=p.return)&&i.call(p)}finally{if(l)throw l.error}}for(;u>100;)try{for(var g=$u(e),f=g.next();!f.done;f=g.next()){if(d=f.value,c+1<=a&&c+d.chance*t>=a)return d.item;c+=d.chance*t}}catch(v){r={error:v}}finally{try{f&&!f.done&&(o=g.return)&&o.call(g)}finally{if(r)throw r.error}}return null},e.chance=function(e){return Math.random()<e},e.randomExcept=function(e,n){var t=e.filter(function(e){return n.indexOf(e)<0});return t[this.randomBetween(0,t.length-1)]},e.randomArrayElement=function(e){return e[this.randomBetween(0,e.length-1)]},e.randomBetween=function(e,n){return Math.floor(Math.random()*(n-e+1))+e},e.randomBetweenFloat=function(e,n){return Math.random()*(n-e+1)+e},e.randomWeightedExcept=function(e,n){var t=e.filter(function(e){return n.indexOf(e.item)<0}),l=0;t.forEach(function(e){return l+=e.chance});for(var i=this.randomBetween(1,l),r=0,o=0;o<t.length;o++){if(r<i&&i<=r+t[o].chance)return t[o].item;r+=t[o].chance}},e.ngInjectableDef=Oe({factory:function(){return new e},token:e,providedIn:"root"}),e}(),qu=function(){function e(e,n,t,l){this.name=e,this.troop=n,this.effect=t,this.duration=l}return e.prototype.isPermanent=function(){return this.duration<0},e.prototype.isRoyal=function(){return-10===this.duration},e.prototype.isWonder=function(){return-9===this.duration},e}(),Xu=function(e){return e[e.SUN=0]="SUN",e[e.CLOUDS=1]="CLOUDS",e[e.RAIN=2]="RAIN",e[e.WIND=3]="WIND",e[e.STORM=4]="STORM",e[e.SNOW=5]="SNOW",e}({}),Zu=function(e){return e[e.DEV=0]="DEV",e[e.V1_0_0=1]="V1_0_0",e}({}),Ju=function(){function e(e,n,t){this.name=e,this.effect=n,this.duration=t}return e.prototype.isPermanent=function(){return this.duration<0},e.prototype.isRoyal=function(){return-10===this.duration},e.prototype.isWonder=function(){return-9===this.duration},e}(),es=function(){function e(){}return e.PERMANENT=-1,e.WONDER=-9,e.ROYAL=-10,e}(),ns=function(e){return e[e.DISABLED=0]="DISABLED",e[e.EASY=1]="EASY",e[e.MEDIUM=2]="MEDIUM",e[e.HARD=3]="HARD",e}({}),ts=function(e){return e[e.LOG=0]="LOG",e[e.WARNING=1]="WARNING",e[e.SUCCESS=2]="SUCCESS",e[e.MYSTICAL=3]="MYSTICAL",e[e.FIGHT_REPORT=4]="FIGHT_REPORT",e}({}),ls=function(e){return e[e.METEORITE=0]="METEORITE",e[e.SMALL_REFUGEE=1]="SMALL_REFUGEE",e[e.MEDIUM_REFUGEE=2]="MEDIUM_REFUGEE",e}({}),is={production:!0,gameName:"Villager Kings",saveName:"VillagerKingsSave",versionString:"1.2.0",saveVersion:Zu.V1_0_0},rs="Welcome to <b>"+is.gameName+"</b><br>You start as a leader of a small village.<br>Will you manage to lead your people to greatness? <br>First thing you need to focus on is to make sure that your people will survive winter.<br>You will need to increase food production and have some wood to heat houses.<br>Remember that winter is not the only threat to your people!<br>Good luck!",os={name:"New King",building:wu.ALL,effect:100,duration:90},us=750,ss={START_HAPPINESS:15,FOOD_HAPPINESS_FLOOR:0,FOOD_HAPPINESS_LIMIT:20,HEAT_HAPPINESS_FLOOR:10,HEAT_HAPPINESS_LIMIT:50,CLOTHES_HAPPINESS_FLOOR:35,CLOTHES_HAPPINESS_LIMIT:75,ALCOHOL_HAPPINESS_FLOOR:75,ALCOHOL_HAPPINESS_LIMIT:100},as={AUTO_SAVE_STATUS:!0,AUTO_SAVE_PERIOD:5,METRIC:!0,SAVE_LOGS:!1,PAUSE_ON_INIT:!1,KEEP_RESERVATION_SETTINGS_ON_RESET:!1,KEEP_MANAGEMENT_SETTINGS_ON_RESET:!1,KEEP_AUTO_TRADE_ON_RESET:!1,SOUND_MASTER:!0,SOUND_MASTER_VOLUME:50,SOUND_MUSIC:!0,SOUND_MUSIC_VOLUME:50,SOUND_EFFECTS:!0,SOUND_EFFECTS_VOLUME:50,SOUND_EFFECT_MARKET:!0,SOUND_EFFECT_RESEARCH:!0,SOUND_EFFECT_INVASION:!0,VISUAL_PROGRESS_BARS:!0,AUTO_TEXT_FITTING:!0,PAGED_VIEW:!1,BUILDINGS_PER_PAGE:12,POSITIVE_COLOUR:"#006400",NEGATIVE_COLOUR:"#8B0000",AI_DIFFICULTY:ns.MEDIUM},cs=[{text:"Welcome to this quick tutorial that will guide you through basic controls of Villager Kings",position:{width:"250px",top:"180px",left:"275px"}},{text:'To the left you can see navigation menu that will allow you to browse tabs representing different aspects of your village<br><div class="tutorialCenter"><img src="assets/pictures/tutorials/village2.png"></div>',position:{width:"400px",top:"50px",left:"110px"}},{text:"Right now we are in the village tab and using top menu you can navigate between village regions",position:{width:"200px",top:"65px",left:"130px"}},{text:'In the middle of the village region you can see your buildings.<div class="tutorialCenter"><img src="assets/pictures/tutorials/village3.png"></div>There are many different types of buildings in this game. <br> Some of them produce items, others consume them to produce more advanced items. <br>Currently in your village there are only Huts which produce workers for your village.<br>Housing buildings cannot be stopped and require constant supply of food, fuel (in winter) and clothes',position:{width:"600px",top:"220px",left:"200px"}},{text:'Above your buildings you can see most important metrics for current region.<div class="tutorialCenter"><img src="assets/pictures/tutorials/village4.png"></div>For village those are:<br>1. Population of your village/max population<br>2. Free workers that can be assigned to work<br>3. Size of your empty land where you can build<br>4. Size of your whole village (all regions)<br>5. Your people happiness, which will influence their productivity<br>',position:{width:"400px",top:"130px",left:"110px"}},{text:"That's all here for now let's move into the Forest region using top menu and continue the tutorial there<br><img src=\"assets/pictures/tutorials/village1.png\">",position:{width:"400px",top:"180px",left:"200px"}}],ps=[{text:"In the forest you have two working buildings<br>Logger's hut that cuts forest trees and produces logs<br>and Gatherer that collects various resources when wandering in the forest.<br><br>Gatherer has two operating modes<br>Worker working here can either focus on looking for food or useful and sometimes rare resources",position:{width:"400px",top:"240px",left:"200px"}},{text:'There are two icons on both sides of building name.<br>To the left there is details icon. If you hover over it, <br>a tooltip with more technical details regarding a building will popup (not active during tutorial).<div class="tutorialCenter"><img src="assets/pictures/tutorials/forest1.png"></div><br>To the right you can see a cog icon which allows you to stop and start production by hiring or firing worker<div class="tutorialCenter"><img src="assets/pictures/tutorials/forest2.png"></div>',position:{width:"450px",top:"200px",left:"150px"}},{text:"Above buildings you can see 'Build' and 'Demolish' buttons.<br>First one opens a window with all buildings you can build in this region.<br>In future you will discover many more types of building to build.<br>Second one allows you to set buildings to be demolished by free worker<br>You will receive small portion of resources used to build demolished building",position:{width:"450px",top:"100px",left:"50px"}},{text:"Now let's order your people to build more gatherers and continue to the 'Resources' tab in the left menu",position:{width:"250px",top:"180px",left:"275px"}}],hs=[{text:"Field region has many buildings with different mechanics than other regions.<br>Field, Orchard and Pasture buildings require Farm with workers <br>who will work on planting, sowing, harvesting and tending to animals.<br><br>Fields yearly cycle starts in spring, after you have selected what type of crops should be planted,<br>your Farm workers will start plowing the land and then sowing selected crop.<br>After sowing is completed your crops will start to grow until Autumn.<br>On autumn all crops will stop growing and will be ready for harvest performed by Farm workers.<br>If there are any crops not harvested by the beginning of winter they will wither and will be lost.<br><br>",position:{width:"400px",top:"150px",left:"200px"}},{text:"Orchards are a bit different. Those also need to be plowed and plants need to be planted,<br>after that they keep growing for several years without any work input.<br>Once they matured they will fruit every year with only harvest work required.<br><br>",position:{width:"400px",top:"150px",left:"200px"}},{text:"Pastures allow animals breeding. They require work input for the whole year (chores)<br>and animals require Hay to eat during winter.<br>If no hay is available animals can starve to death.<br> They eat grass and other natural food during other seasons.<br>Some animals produce animals products like eggs and milk which add to your food supplies.<br>All animals can be butchered for meat when butcher building is built.<br>Once animals are researched Hunters can try to tame animals for which there is empty pasture space.",position:{width:"400px",top:"150px",left:"200px"}}],ds=[{text:"Most mountains buildings require mountains space instead of free land.<br>This mountain area is finite and after the building deplete resources it can be demolished to add empty land instead of back to mountains.<br><br>To gain more mountains areas you will need to run expeditions or conquer enemies (Army).<br><br>After geologist is unlocked and built he will start looking for ores deposits which is very slow process.<br>Once 20 deposits of certain resource has been found Pit Mine can be used to mine it.",position:{width:"400px",top:"150px",left:"200px"}}],gs=[{text:"In this special area Wonder buildings can be constructed.<br>These require much more resources and much more work to be completed.<br>Each Wonder building adds permanent buff corresponding to it's nature.<br>Wonder building also allows you to abdicate what performs soft reset and additionally award you with Royal Points to spend on Royal perks.<br>Wonder building and it's buff persist through soft resets and abdications.",position:{width:"400px",top:"150px",left:"200px"}}],fs=[{text:"By the sea fishers can catch fish from the sea.<br>Each school of fish has certain number of fish that slowly breed.<br>If you catch all fish, new school of fish should appear in some time.<br><br>Fishers can also produce fish food which will boost fish breeding rate.",position:{width:"400px",top:"150px",left:"200px"}}],ms=[{text:"In this tab you can browse all of the resources that you have discovered<br>Next to the resource icon there is current amount that you have and storage limit for that resource.<br><br>Storage can be extended by building warehouses in the village",position:{width:"400px",top:"150px",left:"200px"}},{text:"To the right there are two additional icons present for each resource<br>First one allows you to set amount that will be reserved and no automated action can use them<br>Player initiated action can on the other hand use reserved resources<br>(keep in mind that some actions like for example invasion can still reduce resources below reserved amount!)<br><br>Second icon toggles which resources should be highlighted in the game header",position:{width:"400px",top:"150px",left:"200px"}},{text:"In the header you can highlight resources to know their amounts in any tab of the game",position:{width:"400px",top:"30px",left:"30px"}},{text:"That's all for the basics.<br>To really start progressing you should work towards building Workshop in the village which will open new opportunities<br>",position:{width:"400px",top:"150px",left:"200px"}}],vs=[{text:"<br>Winter is coming!<br>",position:{width:"400px",top:"150px",left:"200px"}},{text:"During winter things get much harder.<br><br>Your people will need to start heating their houses or they will freeze, get sick and die.<br><br> To stop freezing your people will need a good supply of things to burn.<br>To heat houses villagers can use Fuel, coal, logs or brushwood",position:{width:"400px",top:"150px",left:"200px"}},{text:"It may be a good idea to reserve or entirely block your people from burning some important resources that you need for building or cooking food.",position:{width:"400px",top:"30px",left:"30px"}},{text:"If your people get sick you will need medicine to increase their chance for getting better.<br><br>Pasture animals may also die during winter when you do not have enough hay to feed them.",position:{width:"400px",top:"150px",left:"200px"}}],Ss={ALLOW_FUR_CLOTHES:!0,SHOW_FOOD_NUTRITION:!0,FOOD_RATIONS:2,CLOTHES_RATIONS:1,ALCOHOL_RATIONS:1,LOG_FIRED_WORKERS:!0,LOG_AUTO_TRADE:!0,LOG_SICKNESS:!0,LOG_MERCHANT:!0,COMPLEX_WORK_MANAGEMENT:!1,SECOND_HEADER_ROW:!1,SHOW_FREE_WORKERS:!1,SHOW_POPULATION:!1,SHOW_RESEARCH_PROGRESS:!1,SHOW_FAITH:!1,SHOW_RAW:!1,SHOW_PROCESSED:!1,SHOW_FOOD:!1,SHOW_TOOLS:!1,DEFAULT_WORKSHOP_RESEARCH:!0,DEFAULT_GATHERER_FOOD:!0,SWITCH_HUNTER_FROM_TAMING:!0,PLOW_IN_SUMMER:!1},Es={START_LAND:500,START_FOREST:500,START_MOUNTAINS:100,FOREST_GROW_PERCENTAGE:.05,MINIMAL_FOREST_GROWTH:100,FOREST_GROW_TICKS:3600},ys={getBuilding:function(e){var n=this.getBuildings().find(function(n){return n[0]===wu[e]});if(n)return n[1];console.warn("Invalid building: "+Vu.prepareBuildingName(e))},getBuildings:function(){return Object.entries(this.VILLAGE).concat(Object.entries(this.FORT)).concat(Object.entries(this.FOREST)).concat(Object.entries(this.FIELD)).concat(Object.entries(this.MOUNTAINS)).concat(Object.entries(this.PLATEAU)).concat(Object.entries(this.SEA))},getBuildingRegion:function(e){return Object.keys(this.FOREST).includes(wu[e])?Gu.FOREST:Object.keys(this.VILLAGE).includes(wu[e])?Gu.VILLAGE:Object.keys(this.MOUNTAINS).includes(wu[e])?Gu.MOUNTAINS:Object.keys(this.FIELD).includes(wu[e])?Gu.FIELD:Object.keys(this.FORT).includes(wu[e])?Gu.FORT:Object.keys(this.SEA).includes(wu[e])?Gu.SEA:Object.keys(this.PLATEAU).includes(wu[e])?Gu.PLATEAU:void 0},DEMOLITION_RETURN:.3,FOREST:{LOGGERS_HUT:{BASE_POWER:5,SIZE:5,COMPLEXITY:5,DESCRIPTION:"Loggers cut trees in the forest",COST:[{resource:Iu.LOG,amount:10}],WEATHER:[{weather:Xu.RAIN,effect:-50},{weather:Xu.STORM,effect:-100}],BUFF:{name:"New tools",effect:10,duration:360,cost:[{resource:Iu.AXE,amount:5}]},UPGRADES:[{BASE_POWER:7.5,COMPLEXITY:10,PREREQUISITES:[_u.URBAN_PLANNING],COST:[{resource:Iu.PLANK,amount:10},{resource:Iu.CUT_STONE,amount:10},{resource:Iu.HAMMER,amount:5},{resource:Iu.AXE,amount:5}]},{BASE_POWER:10,COMPLEXITY:20,PREREQUISITES:[],COST:[{resource:Iu.PLANK,amount:20},{resource:Iu.CUT_STONE,amount:20},{resource:Iu.COPPER,amount:10},{resource:Iu.AXE,amount:10}]}]},LOGGERS_CAMP:{BASE_POWER:5,SIZE:20,COMPLEXITY:5,DESCRIPTION:"Loggers cut trees in the forest",COST:[{resource:Iu.LOG,amount:30},{resource:Iu.PLANK,amount:10},{resource:Iu.CUT_STONE,amount:10}],WEATHER:[{weather:Xu.RAIN,effect:-50},{weather:Xu.STORM,effect:-100}],BUFF:{name:"New tools",effect:10,duration:360,cost:[{resource:Iu.AXE,amount:20}]},UPGRADES:[{BASE_POWER:7.5,COMPLEXITY:10,PREREQUISITES:[_u.URBAN_PLANNING],COST:[{resource:Iu.PLANK,amount:40},{resource:Iu.CUT_STONE,amount:40},{resource:Iu.HAMMER,amount:20},{resource:Iu.AXE,amount:20}]},{BASE_POWER:10,COMPLEXITY:20,PREREQUISITES:[],COST:[{resource:Iu.PLANK,amount:80},{resource:Iu.BRICKS,amount:40},{resource:Iu.BRONZE,amount:20},{resource:Iu.AXE,amount:40}]}]},FORESTER:{BASE_POWER:10,SIZE:10,COMPLEXITY:10,DESCRIPTION:"Forester can plant new trees and control natural growth of the forest",COST:[{resource:Iu.LOG,amount:10},{resource:Iu.SHOVEL,amount:2}],WEATHER:[{weather:Xu.RAIN,effect:-100},{weather:Xu.STORM,effect:-100}],BUFF:{name:"New tools",effect:10,duration:360,cost:[{resource:Iu.SHOVEL,amount:5}]}},SAWMILL:{BASE_POWER:3,SIZE:20,COMPLEXITY:15,DESCRIPTION:"Sawmill cut logs into planks",COST:[{resource:Iu.LOG,amount:20},{resource:Iu.CUT_STONE,amount:10}],TEXT:"cutting",INPUT_RESOURCES:[{resource:Iu.LOG,amount:3}],OUTPUT_RESOURCES:[{resource:Iu.PLANK,amount:1}]},GATHERER:{BASE_POWER:10,SIZE:5,COMPLEXITY:3,DESCRIPTION:"Gatherer can find all kinds of useful things in the forest.<br>They can look for either food or resources",COST:[{resource:Iu.LOG,amount:10},{resource:Iu.STONE,amount:5}],WEATHER:[{weather:Xu.RAIN,effect:-75},{weather:Xu.STORM,effect:-100}],CAN_PRODUCE:[Iu.BERRY,Iu.MUSHROOM,Iu.WHEAT,Iu.HERBS,Iu.BRUSHWOOD,Iu.STONE,Iu.LOG,Iu.COPPER],BERRY_CHANCE:30,MUSHROOM_CHANCE:30,WHEAT_CHANCE:3,BRUSHWOOD_CHANCE:35,STONE_CHANCE:15,LOG_CHANCE:5,COPPER_CHANCE:.5,HERBS_CHANCE:2},GATHERERS_CAMP:{BASE_POWER:10,SIZE:20,COMPLEXITY:15,DESCRIPTION:"It is more efficient to group gatherers together in one place",COST:[{resource:Iu.LOG,amount:30},{resource:Iu.PLANK,amount:10},{resource:Iu.CUT_STONE,amount:10}],WEATHER:[{weather:Xu.RAIN,effect:-75},{weather:Xu.STORM,effect:-100}],CAN_PRODUCE:[Iu.BERRY,Iu.MUSHROOM,Iu.WHEAT,Iu.HERBS,Iu.BRUSHWOOD,Iu.STONE,Iu.LOG,Iu.COPPER],BERRY_CHANCE:30,MUSHROOM_CHANCE:30,WHEAT_CHANCE:3,BRUSHWOOD_CHANCE:35,STONE_CHANCE:15,LOG_CHANCE:5,COPPER_CHANCE:.5,HERBS_CHANCE:2},HUNTER_LODGE:{BASE_POWER:2,SIZE:5,COMPLEXITY:8,DESCRIPTION:"Hunts animals for meat and fur",COST:[{resource:Iu.LOG,amount:15},{resource:Iu.PLANK,amount:5},{resource:Iu.BOW,amount:1}],WEATHER:[{weather:Xu.RAIN,effect:-100},{weather:Xu.STORM,effect:-100}],CAN_PRODUCE:[Iu.MEAT,Iu.FUR],BUFF:{name:"New tools",effect:10,duration:360,cost:[{resource:Iu.BOW,amount:5}]}},TANNERY:{BASE_POWER:5,SIZE:5,COMPLEXITY:5,DESCRIPTION:"Turns furs into leather",COST:[{resource:Iu.LOG,amount:20},{resource:Iu.PLANK,amount:10}],TEXT:"tanning",INPUT_RESOURCES:[{resource:Iu.FUR,amount:1}],OUTPUT_RESOURCES:[{resource:Iu.LEATHER,amount:1}]},PAPER_MILL:{BASE_POWER:2,SIZE:20,COMPLEXITY:20,DESCRIPTION:"Produces paper from logs",COST:[{resource:Iu.LOG,amount:20},{resource:Iu.CUT_STONE,amount:10},{resource:Iu.PLANK,amount:10}],TEXT:"producing",INPUT_RESOURCES:[{resource:Iu.LOG,amount:3}],OUTPUT_RESOURCES:[{resource:Iu.PAPER,amount:1}]}},MOUNTAINS:{QUARRY:{BASE_POWER:5,SIZE:20,COMPLEXITY:15,DESCRIPTION:"Cuts stone out of mountains",COST:[{resource:Iu.LOG,amount:40},{resource:Iu.PLANK,amount:20}],WEATHER:[{weather:Xu.RAIN,effect:-100},{weather:Xu.STORM,effect:-100}],CAN_PRODUCE:[Iu.STONE],BUFF:{name:"New tools",effect:10,duration:360,cost:[{resource:Iu.PICKAXE,amount:5}]}},GEOLOGIST:{BASE_POWER:1,SIZE:5,COMPLEXITY:10,DESCRIPTION:"Looks for useful rocks",COST:[{resource:Iu.LOG,amount:10},{resource:Iu.STONE,amount:5}],WEATHER:[{weather:Xu.RAIN,effect:-100},{weather:Xu.STORM,effect:-100}],COAL_CHANCE:20,GOLD_CHANCE:4,SILVER_CHANCE:8,COPPER_CHANCE:10,TIN_CHANCE:6,IRON_CHANCE:4},PIT_MINE:{BASE_POWER:2,SIZE:20,COMPLEXITY:15,DESCRIPTION:"Allows workers to mine ores",COST:[{resource:Iu.LOG,amount:60},{resource:Iu.PICKAXE,amount:5}],WEATHER:[{weather:Xu.RAIN,effect:-100},{weather:Xu.STORM,effect:-100}],BUFF:{name:"New tools",effect:10,duration:360,cost:[{resource:Iu.PICKAXE,amount:5},{resource:Iu.SHOVEL,amount:5}]}},METEORITE:{BASE_POWER:3,SIZE:0,COMPLEXITY:0,DESCRIPTION:"Pieces of metal that fell from the sky",COST:[],WEATHER:[{weather:Xu.RAIN,effect:-100},{weather:Xu.STORM,effect:-100}]},DEEP_MINE:{BASE_POWER:1,SIZE:20,COMPLEXITY:30,DESCRIPTION:"Allows workers to mine ores from under the ground",COST:[{resource:Iu.LOG,amount:100},{resource:Iu.PLANK,amount:50},{resource:Iu.CUT_STONE,amount:50},{resource:Iu.PICKAXE,amount:20},{resource:Iu.SHOVEL,amount:20},{resource:Iu.HAMMER,amount:10}],WEATHER:[],BUFF:{name:"New tools",effect:10,duration:360,cost:[{resource:Iu.PICKAXE,amount:10},{resource:Iu.SHOVEL,amount:10}]},UPGRADES:[{BASE_POWER:1,COMPLEXITY:40,PREREQUISITES:[],COST:[{resource:Iu.LOG,amount:20},{resource:Iu.PLANK,amount:20},{resource:Iu.CUT_STONE,amount:10},{resource:Iu.PICKAXE,amount:5},{resource:Iu.HAMMER,amount:5},{resource:Iu.SHOVEL,amount:5}]},{BASE_POWER:1,COMPLEXITY:50,PREREQUISITES:[],COST:[{resource:Iu.LOG,amount:20},{resource:Iu.PLANK,amount:20},{resource:Iu.CUT_STONE,amount:10},{resource:Iu.PICKAXE,amount:5},{resource:Iu.HAMMER,amount:5},{resource:Iu.SHOVEL,amount:5}]},{BASE_POWER:1,COMPLEXITY:60,PREREQUISITES:[],COST:[{resource:Iu.LOG,amount:20},{resource:Iu.PLANK,amount:20},{resource:Iu.CUT_STONE,amount:10},{resource:Iu.PICKAXE,amount:5},{resource:Iu.HAMMER,amount:5},{resource:Iu.SHOVEL,amount:5}]},{BASE_POWER:1,COMPLEXITY:70,PREREQUISITES:[],COST:[{resource:Iu.LOG,amount:20},{resource:Iu.PLANK,amount:20},{resource:Iu.CUT_STONE,amount:10},{resource:Iu.PICKAXE,amount:5},{resource:Iu.HAMMER,amount:5},{resource:Iu.SHOVEL,amount:5}]}]},STONEMASON:{BASE_POWER:3,SIZE:5,COMPLEXITY:10,DESCRIPTION:"Shapes stones for building",COST:[{resource:Iu.LOG,amount:10},{resource:Iu.STONE,amount:10}],TEXT:"cutting",INPUT_RESOURCES:[{resource:Iu.STONE,amount:3}],OUTPUT_RESOURCES:[{resource:Iu.CUT_STONE,amount:1}]},SMITHY:{BASE_POWER:5,SIZE:10,COMPLEXITY:20,DESCRIPTION:"Provides furnace for smelting ore and metal items",COST:[{resource:Iu.LOG,amount:20},{resource:Iu.PLANK,amount:10},{resource:Iu.CUT_STONE,amount:10},{resource:Iu.COPPER,amount:5}],RECIPES:[{recipe:Yu.COPPER,prerequisite:_u.SMITHY},{recipe:Yu.TIN,prerequisite:_u.SMITHY},{recipe:Yu.BRONZE,prerequisite:_u.BRONZE},{recipe:Yu.GOLD,prerequisite:_u.ADVANCED_ORE_PROCESSING},{recipe:Yu.SILVER,prerequisite:_u.ADVANCED_ORE_PROCESSING},{recipe:Yu.IRON,prerequisite:_u.IRON},{recipe:Yu.STEEL,prerequisite:_u.STEEL},{recipe:Yu.SWORD,prerequisite:_u.SMITHY},{recipe:Yu.LIGHT_ARMOR,prerequisite:_u.SMITHY},{recipe:Yu.HEAVY_ARMOR,prerequisite:_u.SMITHY}]},MINT:{BASE_POWER:3,SIZE:40,COMPLEXITY:20,DESCRIPTION:"Produces coins from gold",COST:[{resource:Iu.LOG,amount:20},{resource:Iu.PLANK,amount:10},{resource:Iu.CUT_STONE,amount:10},{resource:Iu.BRONZE,amount:10}],TEXT:"minting",INPUT_RESOURCES:[{resource:Iu.GOLD,amount:1},{resource:Iu.SILVER,amount:1}],OUTPUT_RESOURCES:[{resource:Iu.COINS,amount:150}]}},VILLAGE:{HUT:{BASE_POWER:.5,FUEL_EFFICIENCY:0,SIZE:10,COMPLEXITY:5,STORAGE:100,DESCRIPTION:"Very primitive shelter but keeps rain and cold away. Houses 2 villagers",COST:[{resource:Iu.FOOD,amount:100},{resource:Iu.LOG,amount:10},{resource:Iu.BRUSHWOOD,amount:10}],MAX_OCCUPANTS:2,UPGRADES:[{BASE_POWER:0,SIZE:15,COMPLEXITY:15,NEW_BUILDING:wu.HOUSE,PREREQUISITES:[_u.HOUSE],COST:[{resource:Iu.FOOD,amount:100},{resource:Iu.LOG,amount:15},{resource:Iu.BRUSHWOOD,amount:5},{resource:Iu.PLANK,amount:20}]}]},HOUSE:{BASE_POWER:.7,FUEL_EFFICIENCY:.2,SIZE:25,COMPLEXITY:15,STORAGE:200,DESCRIPTION:"Bigger and more durable shelter. Houses 6 villagers.<br>It's more efficient to heat than multiple huts",COST:[{resource:Iu.FOOD,amount:200},{resource:Iu.LOG,amount:20},{resource:Iu.PLANK,amount:20},{resource:Iu.BRUSHWOOD,amount:10}],MAX_OCCUPANTS:6,UPGRADES:[{BASE_POWER:0,SIZE:20,COMPLEXITY:20,NEW_BUILDING:wu.LONGHOUSE,PREREQUISITES:[_u.LONGHOUSE],COST:[{resource:Iu.FOOD,amount:100},{resource:Iu.LOG,amount:30},{resource:Iu.PLANK,amount:30},{resource:Iu.CUT_STONE,amount:20},{resource:Iu.HAY,amount:10}]}]},LONGHOUSE:{BASE_POWER:.9,FUEL_EFFICIENCY:.3,SIZE:45,COMPLEXITY:20,STORAGE:300,DESCRIPTION:"Long building for multiple families. Houses 15 villagers",COST:[{resource:Iu.FOOD,amount:300},{resource:Iu.LOG,amount:40},{resource:Iu.PLANK,amount:40},{resource:Iu.CUT_STONE,amount:20},{resource:Iu.HAY,amount:10}],MAX_OCCUPANTS:15,UPGRADES:[{BASE_POWER:0,SIZE:55,COMPLEXITY:30,NEW_BUILDING:wu.TUDOR_HOUSE,PREREQUISITES:[_u.TUDOR_HOUSE],COST:[{resource:Iu.FOOD,amount:500},{resource:Iu.LOG,amount:80},{resource:Iu.PLANK,amount:60},{resource:Iu.CUT_STONE,amount:10},{resource:Iu.BRICKS,amount:50}]}]},TUDOR_HOUSE:{BASE_POWER:1.1,FUEL_EFFICIENCY:.35,SIZE:100,COMPLEXITY:30,STORAGE:800,DESCRIPTION:"Very big and durable house. Houses 40 villagers",COST:[{resource:Iu.FOOD,amount:800},{resource:Iu.LOG,amount:100},{resource:Iu.PLANK,amount:80},{resource:Iu.CUT_STONE,amount:20},{resource:Iu.BRICKS,amount:50}],MAX_OCCUPANTS:40},WAREHOUSE:{BASE_POWER:0,SIZE:50,COMPLEXITY:10,DESCRIPTION:"Stores selected type of resources",COST:[{resource:Iu.LOG,amount:20},{resource:Iu.PLANK,amount:10},{resource:Iu.CUT_STONE,amount:5}]},WORKSHOP:{BASE_POWER:5,RESEARCH_POWER:1,CRAFTING_POWER:1.5,SIZE:15,COMPLEXITY:15,DESCRIPTION:"At the workshop workers can do research projects or build complex things",COST:[{resource:Iu.LOG,amount:20},{resource:Iu.BRUSHWOOD,amount:10}]},KITCHEN:{BASE_POWER:12.5,CRAFTING_POWER:1.5,SIZE:5,COMPLEXITY:10,DESCRIPTION:"Kitchen focuses on processing raw food",COST:[{resource:Iu.LOG,amount:10},{resource:Iu.PLANK,amount:5},{resource:Iu.CUT_STONE,amount:5},{resource:Iu.POTTERY,amount:5}]},MANUFACTURE:{BASE_POWER:7,CRAFTING_POWER:1.5,SIZE:5,COMPLEXITY:20,DESCRIPTION:"Manufacture specialises in crafting one recipe and it takes time to change production but it produces slightly faster than workshop",COST:[{resource:Iu.LOG,amount:20},{resource:Iu.PLANK,amount:10},{resource:Iu.CUT_STONE,amount:10},{resource:Iu.HAMMER,amount:5}]},MARKETPLACE:{BASE_POWER:1,SIZE:20,COMPLEXITY:5,DESCRIPTION:"Place for trading with other villages",COST:[{resource:Iu.LOG,amount:10},{resource:Iu.PLANK,amount:10},{resource:Iu.STONE,amount:20}]},TAVERN:{BASE_POWER:1,SIZE:10,COMPLEXITY:20,DESCRIPTION:"Meeting place where villagers can relax and cheer up<br>Consume wine and beer but increase happiness",COST:[{resource:Iu.LOG,amount:10},{resource:Iu.PLANK,amount:20},{resource:Iu.CUT_STONE,amount:20},{resource:Iu.BRUSHWOOD,amount:20}],WEATHER:[{weather:Xu.RAIN,effect:25},{weather:Xu.STORM,effect:25}]},BAKERY:{BASE_POWER:10,SIZE:5,COMPLEXITY:10,DESCRIPTION:"Bakes bread from flour",COST:[{resource:Iu.LOG,amount:10},{resource:Iu.PLANK,amount:10},{resource:Iu.STONE,amount:10},{resource:Iu.CUT_STONE,amount:10}],TEXT:"baking",INPUT_RESOURCES:[{resource:Iu.FLOUR,amount:2},{resource:Iu.FUEL,amount:1}],OUTPUT_RESOURCES:[{resource:Iu.BREAD,amount:1}],BUFF:{name:"Bread oven",effect:10,duration:360,cost:[{resource:Iu.CUT_STONE,amount:20}]}},TAILOR:{BASE_POWER:5,SIZE:5,COMPLEXITY:10,DESCRIPTION:"Produces clothes from fabric",COST:[{resource:Iu.LOG,amount:10},{resource:Iu.PLANK,amount:10}],TEXT:"sewing",INPUT_RESOURCES:[{resource:Iu.FABRIC,amount:3}],OUTPUT_RESOURCES:[{resource:Iu.CLOTHES,amount:1}]},SHRINE:{BASE_POWER:2,POPULATION:8,SIZE:2,COMPLEXITY:8,DESCRIPTION:"Place for prayer and offerings",COST:[{resource:Iu.LOG,amount:5},{resource:Iu.CUT_STONE,amount:5},{resource:Iu.BERRY,amount:10},{resource:Iu.MUSHROOM,amount:10},{resource:Iu.MEAT,amount:10}]},CHURCH:{BASE_POWER:1,POPULATION:20,SIZE:10,COMPLEXITY:10,DESCRIPTION:"Place of prayer and contemplation",COST:[{resource:Iu.LOG,amount:40},{resource:Iu.CUT_STONE,amount:30}],BUFF:{name:"Offering",effect:10,duration:360,cost:[{resource:Iu.COINS,amount:200}]}}},FORT:{BARRACKS:{BASE_POWER:0,SIZE:10,COMPLEXITY:10,DESCRIPTION:"Housing for troops",COST:[{resource:Iu.LOG,amount:20},{resource:Iu.CUT_STONE,amount:10}]},TRAINING_SQUARE:{BASE_POWER:10,SIZE:10,COMPLEXITY:3,DESCRIPTION:"Place for training recruits",COST:[{resource:Iu.STONE,amount:40}],WEATHER:[{weather:Xu.RAIN,effect:-50},{weather:Xu.STORM,effect:-100}]},EMBASSY:{BASE_POWER:1,SIZE:20,COMPLEXITY:10,DESCRIPTION:"Ambassadors work here to improve relations with other kingdoms",COST:[{resource:Iu.PLANK,amount:30},{resource:Iu.CUT_STONE,amount:30}]},STOCKADE:{BASE_POWER:10,SIZE:50,COMPLEXITY:100,DESCRIPTION:"Protective wall around the village to protect against attackers",COST:[{resource:Iu.LOG,amount:100},{resource:Iu.STONE,amount:10}],DEFENSE:2,DURABILITY:50},WOODEN_TOWER:{BASE_POWER:10,SIZE:10,COMPLEXITY:30,DESCRIPTION:" Provide passive defense power",COST:[{resource:Iu.LOG,amount:40},{resource:Iu.PLANK,amount:20}],DEFENSE:3,DURABILITY:50},STONE_TOWER:{BASE_POWER:10,SIZE:10,COMPLEXITY:30,DESCRIPTION:"Provide passive defense power, more durable than wooden tower",COST:[{resource:Iu.CUT_STONE,amount:40},{resource:Iu.PLANK,amount:20}],DEFENSE:3,DURABILITY:100},STASH:{BASE_POWER:1,SIZE:10,COMPLEXITY:30,DESCRIPTION:"Complex hidden tunnels allow us to hide some resources in case of invasion",COST:[{resource:Iu.LOG,amount:30},{resource:Iu.CUT_STONE,amount:10},{resource:Iu.PLANK,amount:10},{resource:Iu.PICKAXE,amount:5}]}},FIELD:{FARM:{BASE_POWER:20,SIZE:15,COMPLEXITY:10,DESCRIPTION:"Farm allows workers to work on fields, orchard and pastures",COST:[{resource:Iu.LOG,amount:40},{resource:Iu.PLANK,amount:20},{resource:Iu.STONE,amount:10}],WEATHER:[{weather:Xu.RAIN,effect:-50},{weather:Xu.STORM,effect:-100}],BUFF:{name:"New tools",effect:10,duration:360,cost:[{resource:Iu.SHOVEL,amount:5}]},UPGRADES:[{BASE_POWER:22,COMPLEXITY:10,PREREQUISITES:[_u.URBAN_PLANNING],COST:[{resource:Iu.LOG,amount:20},{resource:Iu.PLANK,amount:20},{resource:Iu.CUT_STONE,amount:10},{resource:Iu.HAMMER,amount:5},{resource:Iu.SHOVEL,amount:5}]}]},BARN:{BASE_POWER:0,SIZE:50,COMPLEXITY:10,DESCRIPTION:"Stores selected type of crops",COST:[{resource:Iu.LOG,amount:40},{resource:Iu.PLANK,amount:20},{resource:Iu.HAY,amount:20},{resource:Iu.CUT_STONE,amount:10}]},WINDMILL:{BASE_POWER:10,SIZE:20,COMPLEXITY:15,DESCRIPTION:"Windmill turns wheat into flour",COST:[{resource:Iu.LOG,amount:30},{resource:Iu.PLANK,amount:10},{resource:Iu.FABRIC,amount:20}],TEXT:"milling",INPUT_RESOURCES:[{resource:Iu.WHEAT,amount:1}],OUTPUT_RESOURCES:[{resource:Iu.FLOUR,amount:2}],WEATHER:[{weather:Xu.WIND,effect:50},{weather:Xu.STORM,effect:-100}]},COTTON_MILL:{BASE_POWER:5,SIZE:10,COMPLEXITY:10,DESCRIPTION:"Spins cotton into fabric",COST:[{resource:Iu.LOG,amount:10},{resource:Iu.PLANK,amount:10}],TEXT:"spinning",INPUT_RESOURCES:[{resource:Iu.COTTON,amount:2}],OUTPUT_RESOURCES:[{resource:Iu.FABRIC,amount:1}]},BREWERY:{BASE_POWER:1,SIZE:25,COMPLEXITY:20,DESCRIPTION:"Brews delicious beer",COST:[{resource:Iu.LOG,amount:30},{resource:Iu.PLANK,amount:30},{resource:Iu.COPPER,amount:5},{resource:Iu.POTTERY,amount:10}],TEXT:"brewing",INPUT_RESOURCES:[{resource:Iu.BARLEY,amount:10},{resource:Iu.HOP,amount:5},{resource:Iu.FUEL,amount:3}],OUTPUT_RESOURCES:[{resource:Iu.BEER,amount:20}]},FIELD:{BASE_POWER:1,SIZE:50,COMPLEXITY:1,DESCRIPTION:"Various crops can be grown here (Farm required to work on fields)",COST:[{resource:Iu.STONE,amount:4}],WEATHER:[{weather:Xu.RAIN,effect:50},{weather:Xu.SUN,effect:50},{weather:Xu.CLOUDS,effect:-25}]},BUTCHER:{BASE_POWER:5,SIZE:15,COMPLEXITY:10,DESCRIPTION:"Turns animals from pastures into meat",COST:[{resource:Iu.LOG,amount:15},{resource:Iu.PLANK,amount:10},{resource:Iu.CUT_STONE,amount:5}]},ORCHARD:{BASE_POWER:1,SIZE:50,COMPLEXITY:1,DESCRIPTION:"Various fruit trees and bushes can be grown here (Farm required to work on orchards)",COST:[{resource:Iu.LOG,amount:5}],WEATHER:[{weather:Xu.RAIN,effect:50},{weather:Xu.SUN,effect:50},{weather:Xu.CLOUDS,effect:-25}]},PASTURE:{BASE_POWER:1,SIZE:50,COMPLEXITY:3,DESCRIPTION:"Many animals can be grown here (Farm required to work on pastures). <br>After building pasture and selecting animal type it is possible to use hunter lodges to tame animals or buy them from market.<br>Animals start to breed if there are at least two of them in a pasture.",COST:[{resource:Iu.LOG,amount:10},{resource:Iu.PLANK,amount:20}]},CLAY_PIT:{BASE_POWER:5,SIZE:15,COMPLEXITY:15,DESCRIPTION:"We can extract clay here",COST:[{resource:Iu.LOG,amount:15},{resource:Iu.PLANK,amount:5}],WEATHER:[{weather:Xu.RAIN,effect:-100},{weather:Xu.STORM,effect:-100}],CAN_PRODUCE:[Iu.CLAY]},WINERY:{BASE_POWER:1,SIZE:25,COMPLEXITY:10,DESCRIPTION:"Extracts and ferments grape juices",COST:[{resource:Iu.LOG,amount:20},{resource:Iu.PLANK,amount:20},{resource:Iu.COPPER,amount:5},{resource:Iu.POTTERY,amount:10}],TEXT:"fermenting",INPUT_RESOURCES:[{resource:Iu.GRAPE,amount:35}],OUTPUT_RESOURCES:[{resource:Iu.WINE,amount:16}]}},SEA:{FISHERS_HUT:{BASE_POWER:5,SIZE:5,COMPLEXITY:5,DESCRIPTION:"Fishers catch fish in the sea",COST:[{resource:Iu.LOG,amount:10},{resource:Iu.PLANK,amount:5},{resource:Iu.COPPER,amount:1}],WEATHER:[{weather:Xu.RAIN,effect:25},{weather:Xu.STORM,effect:-100},{weather:Xu.WIND,effect:25}]},PIER:{BASE_POWER:0,SIZE:25,HARBOUR_SIZE:80,COMPLEXITY:40,DESCRIPTION:"Pier is where your boats can dock",COST:[{resource:Iu.LOG,amount:30},{resource:Iu.PLANK,amount:20},{resource:Iu.COPPER,amount:10}]},HARBOUR:{BASE_POWER:0,SIZE:200,HARBOUR_SIZE:800,COMPLEXITY:60,DESCRIPTION:"Harbour can dock many more boats and ships than pier",COST:[{resource:Iu.CUT_STONE,amount:50},{resource:Iu.LOG,amount:30},{resource:Iu.PLANK,amount:20},{resource:Iu.BRONZE,amount:20},{resource:Iu.IRON,amount:20}]},LIGHTHOUSE:{BASE_POWER:0,SIZE:20,COMPLEXITY:20,DESCRIPTION:"Sailors can better navigate at sea when lighthouse light guide them",COST:[{resource:Iu.CUT_STONE,amount:20},{resource:Iu.LOG,amount:10},{resource:Iu.BRONZE,amount:5},{resource:Iu.FUEL,amount:5}]},BOAT_BUILDER:{BASE_POWER:1,SIZE:20,COMPLEXITY:30,DESCRIPTION:"Boat builder can craft small boats",COST:[{resource:Iu.LOG,amount:30},{resource:Iu.PLANK,amount:20},{resource:Iu.CUT_STONE,amount:20},{resource:Iu.HAMMER,amount:10}]},SHIPYARD:{BASE_POWER:2,SIZE:50,COMPLEXITY:50,DESCRIPTION:"Shipyards excel in building even the biggest ships",COST:[{resource:Iu.LOG,amount:100},{resource:Iu.PLANK,amount:50},{resource:Iu.BRICKS,amount:50},{resource:Iu.HAMMER,amount:20}]},CARTOGRAPHER:{BASE_POWER:2,SIZE:10,COMPLEXITY:10,DESCRIPTION:"Gathers information produced by sea missions and by creating star maps to help navigating to distant lands",COST:[{resource:Iu.LOG,amount:20},{resource:Iu.PLANK,amount:10},{resource:Iu.PAPER,amount:50}]}},PLATEAU:{STONEHENGE:{BASE_POWER:3,SIZE:50,COMPLEXITY:0,DESCRIPTION:"Huge rocks mark place for old rituals and scientific experiments",COST:[],STAGES:[{cost:[{resource:Iu.SHOVEL,amount:10},{resource:Iu.PICKAXE,amount:10},{resource:Iu.HAMMER,amount:10}],progress:10},{cost:[{resource:Iu.LOG,amount:50},{resource:Iu.PLANK,amount:50}],progress:10},{cost:[{resource:Iu.LOG,amount:50},{resource:Iu.PLANK,amount:50}],progress:10},{cost:[{resource:Iu.STONE,amount:100}],progress:10},{cost:[{resource:Iu.CUT_STONE,amount:100}],progress:10},{cost:[{resource:Iu.STONE,amount:100}],progress:10},{cost:[{resource:Iu.CUT_STONE,amount:100}],progress:10},{cost:[{resource:Iu.LOG,amount:50},{resource:Iu.PLANK,amount:50}],progress:10},{cost:[{resource:Iu.STONE,amount:100}],progress:10},{cost:[{resource:Iu.CUT_STONE,amount:100}],progress:10}],BUILDING_EFFECTS:[{building:wu.WORKSHOP,value:20},{building:wu.KITCHEN,value:10},{building:wu.MANUFACTURE,value:10}],RP:20},PYRAMID:{BASE_POWER:3,SIZE:100,COMPLEXITY:0,DESCRIPTION:"Although it's just \"putting one rock on the other\", our construction worker's skill will be put to the test with this huge project",COST:[],STAGES:[{cost:[{resource:Iu.SHOVEL,amount:10},{resource:Iu.PICKAXE,amount:10},{resource:Iu.HAMMER,amount:10}],progress:10},{cost:[{resource:Iu.CUT_STONE,amount:50}],progress:10},{cost:[{resource:Iu.LOG,amount:50},{resource:Iu.PLANK,amount:50}],progress:10},{cost:[{resource:Iu.CUT_STONE,amount:100}],progress:10},{cost:[{resource:Iu.LOG,amount:50},{resource:Iu.PLANK,amount:50}],progress:10},{cost:[{resource:Iu.CUT_STONE,amount:100}],progress:10},{cost:[{resource:Iu.LOG,amount:50},{resource:Iu.PLANK,amount:50}],progress:10},{cost:[{resource:Iu.CUT_STONE,amount:100}],progress:5},{cost:[{resource:Iu.CUT_STONE,amount:100}],progress:5},{cost:[{resource:Iu.LOG,amount:50},{resource:Iu.PLANK,amount:50}],progress:10},{cost:[{resource:Iu.CUT_STONE,amount:100}],progress:5},{cost:[{resource:Iu.CUT_STONE,amount:100}],progress:5}],BUILDING_EFFECTS:[{building:wu.CONSTRUCTION,value:10},{building:wu.DECONSTRUCTION,value:10}],RP:20},HANGING_GARDEN:{BASE_POWER:3,SIZE:30,COMPLEXITY:0,DESCRIPTION:"With all those plants that cover entire buildings we truly became masters of flora",COST:[],STAGES:[{cost:[{resource:Iu.SHOVEL,amount:10},{resource:Iu.HAMMER,amount:10},{resource:Iu.AXE,amount:10}],progress:10},{cost:[{resource:Iu.LOG,amount:100},{resource:Iu.PLANK,amount:50}],progress:10},{cost:[{resource:Iu.BERRY,amount:75},{resource:Iu.MUSHROOM,amount:75}],progress:10},{cost:[{resource:Iu.SHOVEL,amount:20}],progress:10},{cost:[{resource:Iu.WHEAT,amount:100}],progress:10},{cost:[{resource:Iu.BARLEY,amount:100}],progress:10},{cost:[{resource:Iu.APPLE,amount:100}],progress:10},{cost:[{resource:Iu.HOP,amount:100}],progress:10},{cost:[{resource:Iu.COTTON,amount:100}],progress:10},{cost:[{resource:Iu.GRAPE,amount:100}],progress:10}],BUILDING_EFFECTS:[{building:wu.FARM,value:15}],RP:20},COLOSSUS:{BASE_POWER:3,SIZE:50,COMPLEXITY:0,DESCRIPTION:"This giant statue watches over our troops both during defense and attack",COST:[],STAGES:[{cost:[{resource:Iu.SHOVEL,amount:10},{resource:Iu.PICKAXE,amount:10},{resource:Iu.HAMMER,amount:10}],progress:10},{cost:[{resource:Iu.LOG,amount:100},{resource:Iu.PLANK,amount:50}],progress:10},{cost:[{resource:Iu.STONE,amount:75},{resource:Iu.CUT_STONE,amount:75}],progress:10},{cost:[{resource:Iu.LOG,amount:100},{resource:Iu.PLANK,amount:50}],progress:10},{cost:[{resource:Iu.STONE,amount:75},{resource:Iu.CUT_STONE,amount:75}],progress:10},{cost:[{resource:Iu.LOG,amount:100},{resource:Iu.PLANK,amount:50}],progress:10},{cost:[{resource:Iu.STONE,amount:75},{resource:Iu.CUT_STONE,amount:75}],progress:10},{cost:[{resource:Iu.LOG,amount:100},{resource:Iu.PLANK,amount:50}],progress:10},{cost:[{resource:Iu.STONE,amount:75},{resource:Iu.CUT_STONE,amount:75}],progress:10},{cost:[{resource:Iu.COPPER,amount:100},{resource:Iu.HAMMER,amount:20}],progress:10}],ARMY_EFFECTS:[{troop:Lu.ALL,value:15}],RP:20},UNDERGROUND_CITY:{BASE_POWER:3,SIZE:0,COMPLEXITY:0,DESCRIPTION:"After connecting empty mines tunnels and repurposing them we will create entire underground city",COST:[],STAGES:[{cost:[{resource:Iu.SHOVEL,amount:10},{resource:Iu.HAMMER,amount:10},{resource:Iu.PICKAXE,amount:10}],progress:10},{cost:[{resource:Iu.LOG,amount:100}],progress:10},{cost:[{resource:Iu.SHOVEL,amount:20},{resource:Iu.HAMMER,amount:20},{resource:Iu.PICKAXE,amount:20}],progress:10},{cost:[{resource:Iu.LOG,amount:100}],progress:10},{cost:[{resource:Iu.SHOVEL,amount:20},{resource:Iu.HAMMER,amount:20},{resource:Iu.PICKAXE,amount:20}],progress:10},{cost:[{resource:Iu.LOG,amount:100}],progress:10},{cost:[{resource:Iu.SHOVEL,amount:20},{resource:Iu.HAMMER,amount:20},{resource:Iu.PICKAXE,amount:20}],progress:10},{cost:[{resource:Iu.LOG,amount:100}],progress:10},{cost:[{resource:Iu.SHOVEL,amount:20},{resource:Iu.HAMMER,amount:20},{resource:Iu.PICKAXE,amount:20}],progress:10},{cost:[{resource:Iu.LOG,amount:50},{resource:Iu.CUT_STONE,amount:50}],progress:10}],BUILDING_EFFECTS:[{building:wu.DEEP_MINE,value:15},{building:wu.PIT_MINE,value:15},{building:wu.QUARRY,value:15},{building:wu.GEOLOGIST,value:15}],RP:20},GREAT_LIGHTHOUSE:{BASE_POWER:3,SIZE:50,COMPLEXITY:0,DESCRIPTION:"Light from this building can be seen as far as anyone would like to ever travel",COST:[],STAGES:[{cost:[{resource:Iu.SHOVEL,amount:10},{resource:Iu.HAMMER,amount:10},{resource:Iu.PICKAXE,amount:10}],progress:10},{cost:[{resource:Iu.LOG,amount:100},{resource:Iu.PLANK,amount:50}],progress:10},{cost:[{resource:Iu.CUT_STONE,amount:100}],progress:10},{cost:[{resource:Iu.LOG,amount:100},{resource:Iu.PLANK,amount:50}],progress:10},{cost:[{resource:Iu.CUT_STONE,amount:100}],progress:10},{cost:[{resource:Iu.LOG,amount:100},{resource:Iu.PLANK,amount:50}],progress:10},{cost:[{resource:Iu.CUT_STONE,amount:100}],progress:10},{cost:[{resource:Iu.LOG,amount:100},{resource:Iu.PLANK,amount:50}],progress:10},{cost:[{resource:Iu.CUT_STONE,amount:100}],progress:10},{cost:[{resource:Iu.PLANK,amount:100}],progress:10}],BUILDING_EFFECTS:[{building:wu.BOAT_BUILDER,value:20},{building:wu.SHIPYARD,value:10}],ARMY_EFFECTS:[{troop:Lu.BOAT,value:10},{troop:Lu.BRIGANTINE,value:10},{troop:Lu.GALLEON,value:10}],RP:20},SACRED_GROVE:{BASE_POWER:3,SIZE:50,COMPLEXITY:0,DESCRIPTION:"Collection of the oldest and greatest forest fauna and flora in one place",COST:[],STAGES:[{cost:[{resource:Iu.SHOVEL,amount:10},{resource:Iu.HAMMER,amount:10},{resource:Iu.PICKAXE,amount:10}],progress:10},{cost:[{resource:Iu.BERRY,amount:100},{resource:Iu.MUSHROOM,amount:100}],progress:10},{cost:[{resource:Iu.CHICKEN,amount:20},{resource:Iu.HORSE,amount:10},{resource:Iu.PIG,amount:10}],progress:10},{cost:[{resource:Iu.BERRY,amount:200},{resource:Iu.MUSHROOM,amount:200}],progress:10},{cost:[{resource:Iu.BERRY,amount:100},{resource:Iu.MUSHROOM,amount:100}],progress:10},{cost:[{resource:Iu.CHICKEN,amount:20},{resource:Iu.HORSE,amount:10},{resource:Iu.PIG,amount:10}],progress:10},{cost:[{resource:Iu.BERRY,amount:100},{resource:Iu.MUSHROOM,amount:100}],progress:10},{cost:[{resource:Iu.CHICKEN,amount:20},{resource:Iu.HORSE,amount:10},{resource:Iu.PIG,amount:10}],progress:10},{cost:[{resource:Iu.BERRY,amount:100},{resource:Iu.MUSHROOM,amount:100}],progress:10},{cost:[{resource:Iu.BERRY,amount:200},{resource:Iu.MUSHROOM,amount:200}],progress:10}],BUILDING_EFFECTS:[{building:wu.FORESTER,value:10},{building:wu.LOGGERS_HUT,value:10},{building:wu.LOGGERS_CAMP,value:10},{building:wu.HUNTER_LODGE,value:10},{building:wu.GATHERER,value:10},{building:wu.GATHERERS_CAMP,value:10}],RP:20},ASCENSION_TEMPLE:{BASE_POWER:1.5,SIZE:100,COMPLEXITY:0,DESCRIPTION:"Mystical place where your fate will be determined",COST:[],STAGES:[{cost:[{resource:Iu.SHOVEL,amount:10},{resource:Iu.HAMMER,amount:10},{resource:Iu.PICKAXE,amount:10}],progress:5},{cost:[{resource:Iu.LOG,amount:100},{resource:Iu.PLANK,amount:100}],progress:5},{cost:[{resource:Iu.CUT_STONE,amount:100},{resource:Iu.PLANK,amount:100}],progress:10},{cost:[{resource:Iu.COPPER,amount:50},{resource:Iu.IRON,amount:50},{resource:Iu.STEEL,amount:50}],progress:5},{cost:[{resource:Iu.GOLD,amount:50},{resource:Iu.SILVER,amount:50}],progress:5},{cost:[{resource:Iu.CUT_STONE,amount:100},{resource:Iu.PLANK,amount:100}],progress:10},{cost:[{resource:Iu.COPPER,amount:50},{resource:Iu.IRON,amount:50},{resource:Iu.STEEL,amount:50}],progress:5},{cost:[{resource:Iu.GOLD,amount:50},{resource:Iu.SILVER,amount:50}],progress:5},{cost:[{resource:Iu.CUT_STONE,amount:100},{resource:Iu.PLANK,amount:100}],progress:10},{cost:[{resource:Iu.COPPER,amount:50},{resource:Iu.IRON,amount:50},{resource:Iu.STEEL,amount:50}],progress:5},{cost:[{resource:Iu.GOLD,amount:50},{resource:Iu.SILVER,amount:50}],progress:5},{cost:[{resource:Iu.CUT_STONE,amount:100},{resource:Iu.PLANK,amount:100}],progress:10},{cost:[{resource:Iu.COPPER,amount:50},{resource:Iu.IRON,amount:50},{resource:Iu.STEEL,amount:50}],progress:5},{cost:[{resource:Iu.GOLD,amount:50},{resource:Iu.SILVER,amount:50}],progress:5},{cost:[{resource:Iu.GOLD,amount:100},{resource:Iu.SILVER,amount:100}],progress:10}],RP:50}},CONSTRUCTION_SITE:{BASE_POWER:10,SIZE:0,COMPLEXITY:0,DESCRIPTION:"",COST:[],WEATHER:[{weather:Xu.RAIN,effect:-75},{weather:Xu.STORM,effect:-100}]},DECONSTRUCTION_SITE:{BASE_POWER:10,SIZE:0,COMPLEXITY:0,DESCRIPTION:"",COST:[],WEATHER:[{weather:Xu.RAIN,effect:-75},{weather:Xu.STORM,effect:-100}]}},Rs={getResource:function(e){var n=this.getResources().find(function(n){return n[0]===Iu[e]});if(n)return n[1];console.warn("Invalid resource: "+Vu.prepareResourceName(e))},getResourcesByType:function(e){var n=this.getResources().filter(function(n){return n[1].TYPES.includes(e)});if(n)return n;console.warn("Invalid resource type: "+Vu.prepareResourceTypeName(e))},getResources:function(){return Object.entries(this.RAW).concat(Object.entries(this.PROCESSED)).concat(Object.entries(this.FOOD)).concat(Object.entries(this.TOOLS))},DEFAULT_AMOUNT:0,DEFAULT_LIMIT:50,DEFAULT_VISIBLE:!1,DEFAULT_HIGHLIGHTED:!1,RAW:{LOG:{TYPES:[Mu.RAW,Mu.FUEL],TRADE_VALUE:2,AMOUNT:20,LIMIT:100,VISIBLE:!0,HIGHLIGHTED:!0,FUEL_PRIORITY:3,POWER:10},BRUSHWOOD:{TYPES:[Mu.RAW,Mu.FUEL],TRADE_VALUE:1,AMOUNT:20,LIMIT:100,VISIBLE:!0,HIGHLIGHTED:!0,FUEL_PRIORITY:4,POWER:5.5},STONE:{TYPES:[Mu.RAW],TRADE_VALUE:3,AMOUNT:20,LIMIT:100,VISIBLE:!0},FUR:{TYPES:[Mu.RAW],TRADE_VALUE:3},WHEAT:{TYPES:[Mu.RAW],TRADE_VALUE:2},BARLEY:{TYPES:[Mu.RAW],TRADE_VALUE:3},HOP:{TYPES:[Mu.RAW],TRADE_VALUE:3},COTTON:{TYPES:[Mu.RAW],TRADE_VALUE:3},WOOL:{TYPES:[Mu.RAW],TRADE_VALUE:3},HERBS:{TYPES:[Mu.RAW],TRADE_VALUE:2},HAY:{TYPES:[Mu.RAW],TRADE_VALUE:2},CLAY:{TYPES:[Mu.RAW],TRADE_VALUE:2},CHICKEN:{TYPES:[Mu.RAW,Mu.ANIMAL],LIMIT:0,SIZE:2,MEAT:8,FUR:0,REPRODUCTION_SPEED:6,BUTCHERING_DIFFICULTY:1,TRADE_VALUE:20},SHEEP:{TYPES:[Mu.RAW,Mu.ANIMAL],LIMIT:0,SIZE:3,MEAT:16,FUR:1,REPRODUCTION_SPEED:4,BUTCHERING_DIFFICULTY:1,TRADE_VALUE:25},COW:{TYPES:[Mu.RAW,Mu.ANIMAL],LIMIT:0,SIZE:5,MEAT:60,FUR:3,REPRODUCTION_SPEED:1,BUTCHERING_DIFFICULTY:3,TRADE_VALUE:40},PIG:{TYPES:[Mu.RAW,Mu.ANIMAL],LIMIT:0,SIZE:3,MEAT:30,FUR:2,REPRODUCTION_SPEED:5,BUTCHERING_DIFFICULTY:3,TRADE_VALUE:30},HORSE:{TYPES:[Mu.RAW,Mu.ANIMAL],LIMIT:0,SIZE:5,MEAT:20,FUR:1,REPRODUCTION_SPEED:1,BUTCHERING_DIFFICULTY:5,TRADE_VALUE:50},COAL:{TYPES:[Mu.RAW,Mu.FUEL],TRADE_VALUE:8,FUEL_PRIORITY:2,POWER:50},GOLD_ORE:{TYPES:[Mu.RAW],TRADE_VALUE:40},SILVER_ORE:{TYPES:[Mu.RAW],TRADE_VALUE:20},COPPER_ORE:{TYPES:[Mu.RAW],TRADE_VALUE:13},TIN_ORE:{TYPES:[Mu.RAW],TRADE_VALUE:20},IRON_ORE:{TYPES:[Mu.RAW],TRADE_VALUE:40}},PROCESSED:{PLANK:{TYPES:[Mu.PROCESSED],TRADE_VALUE:3,VISIBLE:!0},CUT_STONE:{TYPES:[Mu.PROCESSED],TRADE_VALUE:5},FUEL:{TYPES:[Mu.PROCESSED,Mu.FUEL],TRADE_VALUE:3,FUEL_PRIORITY:1,POWER:12.5},FLOUR:{TYPES:[Mu.PROCESSED],TRADE_VALUE:3},FABRIC:{TYPES:[Mu.PROCESSED],TRADE_VALUE:7},LEATHER:{TYPES:[Mu.PROCESSED],TRADE_VALUE:4},PAPER:{TYPES:[Mu.PROCESSED],TRADE_VALUE:8},POTTERY:{TYPES:[Mu.PROCESSED],TRADE_VALUE:10},BRICKS:{TYPES:[Mu.PROCESSED],TRADE_VALUE:17},COINS:{TYPES:[Mu.PROCESSED],TRADE_VALUE:1,LIMIT:Number.MAX_SAFE_INTEGER},COPPER:{TYPES:[Mu.PROCESSED],TRADE_VALUE:32},GOLD:{TYPES:[Mu.PROCESSED],TRADE_VALUE:90},SILVER:{TYPES:[Mu.PROCESSED],TRADE_VALUE:45},TIN:{TYPES:[Mu.PROCESSED],TRADE_VALUE:45},BRONZE:{TYPES:[Mu.PROCESSED],TRADE_VALUE:50},IRON:{TYPES:[Mu.PROCESSED],TRADE_VALUE:135},STEEL:{TYPES:[Mu.PROCESSED],TRADE_VALUE:190},FISH_FOOD:{TYPES:[Mu.PROCESSED],TRADE_VALUE:5}},FOOD:{BERRY:{TYPES:[Mu.FOOD,Mu.CONSUMABLE],TRADE_VALUE:2,AMOUNT:50,LIMIT:100,VISIBLE:!0,HIGHLIGHTED:!0,POWER:50},MUSHROOM:{TYPES:[Mu.FOOD,Mu.CONSUMABLE],TRADE_VALUE:2,AMOUNT:50,LIMIT:100,VISIBLE:!0,HIGHLIGHTED:!0,POWER:50},FISH:{TYPES:[Mu.FOOD,Mu.CONSUMABLE],TRADE_VALUE:3,POWER:75},APPLE:{TYPES:[Mu.FOOD,Mu.CONSUMABLE],TRADE_VALUE:1,POWER:25},GRAPE:{TYPES:[Mu.FOOD,Mu.CONSUMABLE],TRADE_VALUE:1,POWER:20},BREAD:{TYPES:[Mu.FOOD,Mu.CONSUMABLE],TRADE_VALUE:10,POWER:300},MEAT:{TYPES:[Mu.FOOD,Mu.CONSUMABLE],TRADE_VALUE:3,POWER:75},EGG:{TYPES:[Mu.FOOD,Mu.CONSUMABLE],TRADE_VALUE:1,POWER:25},MILK:{TYPES:[Mu.FOOD,Mu.CONSUMABLE],TRADE_VALUE:1,POWER:25},CHEESE:{TYPES:[Mu.FOOD,Mu.CONSUMABLE],TRADE_VALUE:9,POWER:200},COOKED_FISH:{TYPES:[Mu.FOOD,Mu.CONSUMABLE],TRADE_VALUE:8,POWER:175},COOKED_MEAT:{TYPES:[Mu.FOOD,Mu.CONSUMABLE],TRADE_VALUE:8,POWER:175},VEGETABLE_SOUP:{TYPES:[Mu.FOOD,Mu.CONSUMABLE],TRADE_VALUE:10,POWER:225},MEAT_SOUP:{TYPES:[Mu.FOOD,Mu.CONSUMABLE],TRADE_VALUE:10,POWER:225},OMELETTE:{TYPES:[Mu.FOOD,Mu.CONSUMABLE],TRADE_VALUE:10,POWER:225},PIE:{TYPES:[Mu.FOOD,Mu.CONSUMABLE],TRADE_VALUE:12,POWER:250},BOUILLABAISSE:{TYPES:[Mu.FOOD,Mu.CONSUMABLE],TRADE_VALUE:32,POWER:900},BEER:{TYPES:[Mu.FOOD],TRADE_VALUE:3},WINE:{TYPES:[Mu.FOOD],TRADE_VALUE:5},HERBAL_MEDICINE:{TYPES:[Mu.FOOD],TRADE_VALUE:15}},TOOLS:{CLOTHES:{TYPES:[Mu.TOOLS],VISIBLE:!0,AMOUNT:10,TRADE_VALUE:25},PICKAXE:{TYPES:[Mu.TOOLS],TRADE_VALUE:35},SHOVEL:{TYPES:[Mu.TOOLS],TRADE_VALUE:35},AXE:{TYPES:[Mu.TOOLS],TRADE_VALUE:35},HAMMER:{TYPES:[Mu.TOOLS],TRADE_VALUE:35},BOW:{TYPES:[Mu.TOOLS],TRADE_VALUE:35},SPEAR:{TYPES:[Mu.TOOLS],TRADE_VALUE:35},NAILS:{TYPES:[Mu.TOOLS],TRADE_VALUE:12},MAP:{TYPES:[Mu.TOOLS],TRADE_VALUE:1e3},SWORD:{TYPES:[Mu.TOOLS],TRADE_VALUE:190},WOODEN_SHIELD:{TYPES:[Mu.TOOLS],TRADE_VALUE:30},LEATHER_ARMOR:{TYPES:[Mu.TOOLS],TRADE_VALUE:50},LIGHT_ARMOR:{TYPES:[Mu.TOOLS],TRADE_VALUE:400},HEAVY_ARMOR:{TYPES:[Mu.TOOLS],TRADE_VALUE:550},CANNON:{TYPES:[Mu.TOOLS],TRADE_VALUE:2e3}}},bs={getTroop:function(e){var n=Object.entries(this.TROOPS).find(function(n){return n[0]===Lu[e]});if(n)return n[1];console.warn("Invalid troop: "+Vu.prepareTroopName(e))},getMission:function(e){var n=Object.entries(this.MISSIONS).find(function(n){return n[0]===xu[e]});if(n)return n[1];console.warn("Invalid mission: "+Vu.prepareMissionName(e))},TROOPS:{COLONIST:{SIZE:1,CARGO:0,SPEED:3},SPY:{SIZE:1,CARGO:0,RECRUIT_TIME:10,STRENGTH:0,DEFENSE:1,PAY:5,SPEED:10,COST:[{resource:Iu.CLOTHES,amount:1},{resource:Iu.COINS,amount:20}]},MILITIA:{SIZE:1,CARGO:0,RECRUIT_TIME:3,STRENGTH:0,DEFENSE:2,PAY:0,SPEED:3,COST:[{resource:Iu.FUR,amount:5}],AI_COST:3},SPEARMAN:{SIZE:1,CARGO:0,RECRUIT_TIME:12,STRENGTH:5,DEFENSE:2,PAY:2,SPEED:6,COST:[{resource:Iu.SPEAR,amount:1},{resource:Iu.LEATHER_ARMOR,amount:1}],AI_COST:6},ARCHER:{SIZE:1,CARGO:0,RECRUIT_TIME:12,STRENGTH:2,DEFENSE:5,PAY:2,SPEED:6,COST:[{resource:Iu.BOW,amount:1},{resource:Iu.LEATHER_ARMOR,amount:1}],AI_COST:6},SWORDSMAN:{SIZE:2,RECRUIT_TIME:22,STRENGTH:9,DEFENSE:4,PAY:5,SPEED:5,COST:[{resource:Iu.SWORD,amount:1},{resource:Iu.WOODEN_SHIELD,amount:1},{resource:Iu.LEATHER_ARMOR,amount:1}],AI_COST:10},LIGHT_CAVALRY:{SIZE:3,CARGO:0,RECRUIT_TIME:30,STRENGTH:15,DEFENSE:6,PAY:10,SPEED:10,COST:[{resource:Iu.HORSE,amount:1},{resource:Iu.SWORD,amount:1},{resource:Iu.LIGHT_ARMOR,amount:1}],AI_COST:15},HORSE_ARCHER:{SIZE:3,CARGO:0,RECRUIT_TIME:30,STRENGTH:6,DEFENSE:15,PAY:10,SPEED:10,COST:[{resource:Iu.HORSE,amount:1},{resource:Iu.BOW,amount:1},{resource:Iu.LIGHT_ARMOR,amount:1}],AI_COST:15},BOAT:{SIZE:5,CARGO:5,COMPLEXITY:5,SPEED:5,STRENGTH:0,DEFENSE:0,COST:[{resource:Iu.PLANK,amount:10},{resource:Iu.LOG,amount:5},{resource:Iu.FABRIC,amount:10},{resource:Iu.HAMMER,amount:5},{resource:Iu.NAILS,amount:10}],PAY:10,CREW:1,AI_COST:0},BRIGANTINE:{SIZE:40,CARGO:40,COMPLEXITY:20,SPEED:15,STRENGTH:6,DEFENSE:6,COST:[{resource:Iu.PLANK,amount:100},{resource:Iu.LOG,amount:50},{resource:Iu.FABRIC,amount:40},{resource:Iu.IRON,amount:20},{resource:Iu.HAMMER,amount:20},{resource:Iu.NAILS,amount:40},{resource:Iu.CANNON,amount:6}],PAY:80,CREW:10,AI_COST:0},GALLEON:{SIZE:150,CARGO:300,COMPLEXITY:50,SPEED:10,STRENGTH:30,DEFENSE:30,COST:[{resource:Iu.PLANK,amount:350},{resource:Iu.LOG,amount:200},{resource:Iu.FABRIC,amount:200},{resource:Iu.IRON,amount:80},{resource:Iu.HAMMER,amount:50},{resource:Iu.NAILS,amount:200},{resource:Iu.CANNON,amount:20}],PAY:300,CREW:25,AI_COST:0}},MISSIONS:{MOVE:{TIME:3,ICON:"move",DESCRIPTION:"Move your troops to another region",COST:[{resource:Iu.FOOD,amount:20}]},BUILD:{TIME:10,ICON:"build",DESCRIPTION:"Improve region defenses",COST:[{resource:Iu.LOG,amount:20},{resource:Iu.CUT_STONE,amount:20}]},COLONIZE:{TIME:3,ICON:"colonize",DESCRIPTION:"Connect this unowned land to your kingdom",COST:[{resource:Iu.FOOD,amount:200},{resource:Iu.LOG,amount:3},{resource:Iu.BRUSHWOOD,amount:2},{resource:Iu.FUEL,amount:1}]},SPY:{TIME:7,ICON:"spy",DESCRIPTION:"Try to find out military strength of the enemy and region wealth",COST:[{resource:Iu.FOOD,amount:100}]},PLUNDER:{TIME:2,ICON:"plunder",DESCRIPTION:"Plunder your enemies",COST:[{resource:Iu.FOOD,amount:100}]},CONQUER:{TIME:3,ICON:"conquer",DESCRIPTION:"Conquer your enemies and claim their land",COST:[{resource:Iu.FOOD,amount:200}]},FISHING:{TIME:3,ICON:"fish",DESCRIPTION:"Catch fish from the sea",COST:[{resource:Iu.FOOD,amount:200}]},HUNTING:{TIME:3,ICON:"hunting",DESCRIPTION:"Hunt the bigger fish",COST:[{resource:Iu.FOOD,amount:200}]},TREASURE:{TIME:2,ICON:"treasure",DESCRIPTION:"Collect treasure",COST:[{resource:Iu.FOOD,amount:200}]},CARTOGRAPHY:{TIME:3,ICON:"cartography",DESCRIPTION:"Gather information about all islands and stars during night",COST:[{resource:Iu.FOOD,amount:200}]},EXPEDITION:{TIME:12,ICON:"expedition",DESCRIPTION:"Discover distant lands",COST:[{resource:Iu.FOOD,amount:20}]},SEA_BATTLE:{TIME:2,ICON:"battle",DESCRIPTION:"Sea battle with other ships",COST:[{resource:Iu.FOOD,amount:200}]},SEA_PLUNDER:{TIME:2,ICON:"plunder",DESCRIPTION:"Plunder your enemies",COST:[{resource:Iu.FOOD,amount:100}]},SEA_CONQUER:{TIME:3,ICON:"conquer",DESCRIPTION:"Conquer your enemies and claim their land",COST:[{resource:Iu.FOOD,amount:200}]},SEA_MOVE:{TIME:3,ICON:"move",DESCRIPTION:"Move your troops to another region",COST:[{resource:Iu.FOOD,amount:20}]}}},Os={getCrop:function(e){var n=this.getCrops().find(function(n){return n[0]===ku[e]});if(n)return n[1];console.warn("Invalid crop: "+Vu.prepareCropName(e))},getCrops:function(){return Object.entries(this.FIELD).concat(Object.entries(this.ORCHARD))},FIELD:{WHEAT:{CROP:ku.WHEAT,GROWTH:20,YIELD_MULTIPLIER:2},BARLEY:{CROP:ku.BARLEY,GROWTH:20,YIELD_MULTIPLIER:2,PREREQUISITE:_u.BARLEY},HAY:{CROP:ku.HAY,GROWTH:10,YIELD_MULTIPLIER:1.5},HOP:{CROP:ku.HOP,GROWTH:20,YIELD_MULTIPLIER:2,PREREQUISITE:_u.HOPS},HERBS:{CROP:ku.HERBS,GROWTH:20,YIELD_MULTIPLIER:4,PREREQUISITE:_u.HERBALISM},MUSHROOM:{CROP:ku.MUSHROOM,GROWTH:10,YIELD_MULTIPLIER:1},COTTON:{CROP:ku.COTTON,GROWTH:20,YIELD_MULTIPLIER:2,PREREQUISITE:_u.COTTON}},ORCHARD:{BERRY:{CROP:ku.BERRY,GROWTH:25,FRUITING:15,YIELD_MULTIPLIER:1},GRAPE:{CROP:ku.GRAPE,GROWTH:50,FRUITING:15,YIELD_MULTIPLIER:1},APPLE:{CROP:ku.APPLE,GROWTH:75,FRUITING:25,YIELD_MULTIPLIER:2}}},Ts={SCIENTIFIC_METHOD:{CATEGORY:Wu.SCIENCE,COST:[],RESEARCH_POINT:5,DESCRIPTION:"Maybe there is something we don't know about yet?",FINISH_DESCRIPTION:"We learned how to research things",PREREQUISITES:[],FINISH:function(e){e.getService(zu.LOG).log("New research projects unlocked")}},FORESIGHT:{CATEGORY:Wu.SCIENCE,COST:[],RESEARCH_POINT:20,DESCRIPTION:"If only we knew what we don't know",FINISH_DESCRIPTION:"We gained insight into what can be researched in close future",PREREQUISITES:[Nu.SCIENTIFIC_METHOD],FINISH:function(e){e.getService(zu.RESEARCH).increaseForesight(1),e.getService(zu.LOG).log("Foresight level increased")}},CARTOGRAPHY:{CATEGORY:Wu.SCIENCE,COST:[],RESEARCH_POINT:50,DESCRIPTION:"What if we combine all the information we get from visitors and scouts?",FINISH_DESCRIPTION:"We unlocked world map and gained insight into what happens in the world",PREREQUISITES:[Nu.FORESIGHT],FINISH:function(e){e.getService(zu.GAME).enable(_u.CARTOGRAPHY),e.getService(zu.LOG).log("World map unlocked")}},MANAGEMENT:{CATEGORY:Wu.GENERAL,COST:[],RESEARCH_POINT:30,DESCRIPTION:"Maybe we could make some hard decisions which could help us survive?",FINISH_DESCRIPTION:"Now we have access to many management options",PREREQUISITES:[Nu.FORESIGHT],FINISH:function(e){e.getService(zu.GAME).enable(_u.MANAGEMENT),e.getService(zu.LOG).log("Management tab unlocked")}},FISHING:{CATEGORY:Wu.AGRICULTURE,COST:[{resource:Iu.BERRY,amount:20}],RESEARCH_POINT:30,DESCRIPTION:"Could there be something edible in the water?",FINISH_DESCRIPTION:"We learned how to get fish out of the sea",PREREQUISITES:[Nu.SCIENTIFIC_METHOD],FINISH:function(e){e.getService(zu.GAME).enable(_u.SEA),e.getService(zu.LOG).log("Sea unlocked"),e.getService(zu.GAME).enable(_u.FISHERS_HUT),e.getService(zu.LOG).log("Fisher's hut invented")}},ANIMALS:{CATEGORY:Wu.AGRICULTURE,COST:[{resource:Iu.HAY,amount:20}],RESEARCH_POINT:70,DESCRIPTION:"Is it possible to breed animals near farms?",FINISH_DESCRIPTION:"Now we know how to breed animals on pastures",PREREQUISITES:[Nu.AGRICULTURE,Nu.HUNTING],FINISH:function(e){e.getService(zu.GAME).enable(_u.PASTURE),e.getService(zu.LOG).log("Pastures invented"),e.getService(zu.GAME).enable(_u.BUTCHER),e.getService(zu.LOG).log("Butcher invented")}},TRADE:{CATEGORY:Wu.GENERAL,COST:[],RESEARCH_POINT:50,DESCRIPTION:"If others have resources we need maybe we could trade with them?",FINISH_DESCRIPTION:"We learned how to trade on marketplace",PREREQUISITES:[Nu.MANAGEMENT,Nu.CARTOGRAPHY],FINISH:function(e){e.getService(zu.GAME).enable(_u.MARKETPLACE),e.getService(zu.LOG).log("Marketplace invented"),e.getService(zu.RESOURCES).makeVisible(Iu.COINS)}},TANNERY:{CATEGORY:Wu.TECHNOLOGY,COST:[{resource:Iu.FUR,amount:20}],RESEARCH_POINT:50,DESCRIPTION:"Could we use dead animals fur in our advantage?",FINISH_DESCRIPTION:"Tanned fur is much better for armour",PREREQUISITES:[Nu.SCIENTIFIC_METHOD,Nu.HUNTING],FINISH:function(e){e.getService(zu.GAME).enable(_u.TANNERY),e.getService(zu.LOG).log("Tannery invented"),e.getService(zu.RECIPE).enable(Yu.LEATHER)}},COTTON:{CATEGORY:Wu.AGRICULTURE,COST:[],RESEARCH_POINT:50,DESCRIPTION:"Maybe we can plant cotton?",FINISH_DESCRIPTION:"Now we can plant cotton on fields",PREREQUISITES:[Nu.AGRICULTURE],FINISH:function(e){e.getService(zu.GAME).enable(_u.COTTON),e.getService(zu.LOG).log("Cotton planting unlocked"),e.getService(zu.RESOURCES).makeVisible(Iu.COTTON)}},PARCHMENT:{CATEGORY:Wu.TECHNOLOGY,COST:[{resource:Iu.FUR,amount:10}],RESEARCH_POINT:50,DESCRIPTION:"What if we make leather even thinner?",FINISH_DESCRIPTION:"We learned how to make parchment (paper) out of fur",PREREQUISITES:[Nu.TANNERY],FINISH:function(e){e.getService(zu.LOG).log("Parchment recipe unlocked"),e.getService(zu.RESOURCES).makeVisible(Iu.PAPER),e.getService(zu.RECIPE).enable(Yu.PARCHMENT)}},PAPER_MILL:{CATEGORY:Wu.TECHNOLOGY,COST:[{resource:Iu.PAPER,amount:5}],RESEARCH_POINT:50,DESCRIPTION:"Maybe we could use trees to make paper?",FINISH_DESCRIPTION:"We invented paper mill where we can produce paper from logs",PREREQUISITES:[Nu.PARCHMENT,Nu.SAWMILL],FINISH:function(e){e.getService(zu.LOG).log("Paper mill invented"),e.getService(zu.GAME).enable(_u.PAPER_MILL)}},HERBALISM:{CATEGORY:Wu.AGRICULTURE,COST:[{resource:Iu.HERBS,amount:10}],RESEARCH_POINT:100,DESCRIPTION:"Is it possible to effectively plant herbs?",FINISH_DESCRIPTION:"We learned to how to plant herbs on fields",PREREQUISITES:[Nu.AGRICULTURE],FINISH:function(e){e.getService(zu.GAME).enable(_u.HERBALISM),e.getService(zu.LOG).log("Herbs planting unlocked"),e.getService(zu.RESOURCES).makeVisible(Iu.HERBS)}},FABRIC:{CATEGORY:Wu.TECHNOLOGY,COST:[{resource:Iu.COTTON,amount:20}],RESEARCH_POINT:50,DESCRIPTION:"Could we make fabric using cotton?",FINISH_DESCRIPTION:"We invented cotton mill and ways to spint cotton into fabric",PREREQUISITES:[Nu.COTTON],FINISH:function(e){e.getService(zu.GAME).enable(_u.COTTON_MILL),e.getService(zu.LOG).log("Cotton mill invented"),e.getService(zu.RECIPE).enable(Yu.FABRIC),e.getService(zu.RECIPE).enable(Yu.FABRIC_WOOL)}},TAILORING:{CATEGORY:Wu.TECHNOLOGY,COST:[{resource:Iu.FABRIC,amount:5},{resource:Iu.FUR,amount:10}],RESEARCH_POINT:100,DESCRIPTION:"How can me make new clothes?",FINISH_DESCRIPTION:"We can now make clothes out of fabric and fur",PREREQUISITES:[Nu.FABRIC],FINISH:function(e){e.getService(zu.GAME).enable(_u.TAILOR),e.getService(zu.LOG).log("Tailor invented"),e.getService(zu.RECIPE).enable(Yu.CLOTHES_FABRIC),e.getService(zu.RECIPE).enable(Yu.CLOTHES_FUR)}},ALCOHOL:{CATEGORY:Wu.GENERAL,COST:[],RESEARCH_POINT:100,DESCRIPTION:"Would it boost our moods if we took some time to have fun??",FINISH_DESCRIPTION:"We learned how to plants hops and barley, how to build buildings that will make alcohol and tavern where we can drink it",PREREQUISITES:[Nu.SCIENTIFIC_METHOD,Nu.COOKING,Nu.AGRICULTURE],FINISH:function(e){e.getService(zu.GAME).enable(_u.ALCOHOL),e.getService(zu.GAME).enable(_u.TAVERN),e.getService(zu.LOG).log("Tavern invented"),e.getService(zu.GAME).enable(_u.BREWERY),e.getService(zu.LOG).log("Brewery invented"),e.getService(zu.GAME).enable(_u.WINERY),e.getService(zu.LOG).log("Winery invented"),e.getService(zu.GAME).enable(_u.BARLEY),e.getService(zu.LOG).log("Barley planting unlocked"),e.getService(zu.RESOURCES).makeVisible(Iu.BARLEY),e.getService(zu.GAME).enable(_u.HOPS),e.getService(zu.LOG).log("Hops planting unlocked"),e.getService(zu.RESOURCES).makeVisible(Iu.HOP),e.getService(zu.RESOURCES).makeVisible(Iu.BEER),e.getService(zu.RESOURCES).makeVisible(Iu.WINE)}},CALENDAR:{CATEGORY:Wu.SCIENCE,COST:[{resource:Iu.LOG,amount:10}],RESEARCH_POINT:30,DESCRIPTION:"Is there some pattern to seasons?",FINISH_DESCRIPTION:"Now we know what day it is today",PREREQUISITES:[Nu.SCIENTIFIC_METHOD],FINISH:function(e){e.getService(zu.GAME).enable(_u.CALENDAR),e.getService(zu.LOG).log("We are now able to track years and seasons")}},WEATHER:{CATEGORY:Wu.SCIENCE,COST:[{resource:Iu.LOG,amount:10},{resource:Iu.STONE,amount:10},{resource:Iu.PLANK,amount:10}],RESEARCH_POINT:50,DESCRIPTION:"Would it be good to know the weather in advance?",FINISH_DESCRIPTION:"We can now predict weather for a few days ahead",PREREQUISITES:[Nu.FORESIGHT],FINISH:function(e){e.getService(zu.GAME).enable(_u.WEATHER),e.getService(zu.LOG).log("We now can predict weather"),e.getService(zu.WEATHER).increaseForecastPeriod(4)}},AGRICULTURE:{CATEGORY:Wu.AGRICULTURE,COST:[{resource:Iu.LOG,amount:10},{resource:Iu.BERRY,amount:20},{resource:Iu.WHEAT,amount:20},{resource:Iu.SHOVEL,amount:5}],RESEARCH_POINT:100,DESCRIPTION:"Why should we risk looking for food in the forest if we can grow it it the open?",FINISH_DESCRIPTION:"We discovered how to build farms and cultivate crops on fields and orchards",PREREQUISITES:[Nu.WEATHER,Nu.CALENDAR,Nu.STONE_SHOVEL],FINISH:function(e){e.getService(zu.GAME).isEnabled(_u.FIELD)||(e.getService(zu.GAME).enable(_u.FIELD),e.getService(zu.LOG).log("Field unlocked")),e.getService(zu.GAME).enable(_u.FARM),e.getService(zu.LOG).log("Farm invented"),e.getService(zu.RESOURCES).makeVisible(Iu.WHEAT),e.getService(zu.RESOURCES).makeVisible(Iu.BARLEY),e.getService(zu.RESOURCES).makeVisible(Iu.HAY),e.getService(zu.RESOURCES).makeVisible(Iu.APPLE),e.getService(zu.RESOURCES).makeVisible(Iu.GRAPE)}},CROPS_STORAGE:{CATEGORY:Wu.AGRICULTURE,COST:[{resource:Iu.FOOD,amount:5e3}],RESEARCH_POINT:50,DESCRIPTION:"Would it be more efficient if we had a storage building for crops closer to the fields?",FINISH_DESCRIPTION:"We found out that it is better to have a special building for storing crops",PREREQUISITES:[Nu.AGRICULTURE],FINISH:function(e){e.getService(zu.GAME).enable(_u.BARN),e.getService(zu.LOG).log("Barn invented")}},BOW:{CATEGORY:Wu.GENERAL,COST:[{resource:Iu.LOG,amount:20},{resource:Iu.BRUSHWOOD,amount:20}],RESEARCH_POINT:25,DESCRIPTION:"Could we kill without coming closer?",FINISH_DESCRIPTION:"We learned how to craft bows",PREREQUISITES:[Nu.SCIENTIFIC_METHOD],FINISH:function(e){e.getService(zu.RECIPE).enable(Yu.BOW)}},HUNTING:{CATEGORY:Wu.GENERAL,COST:[{resource:Iu.LOG,amount:5},{resource:Iu.BRUSHWOOD,amount:5},{resource:Iu.STONE,amount:5},{resource:Iu.BOW,amount:2}],RESEARCH_POINT:50,DESCRIPTION:"What if hunted became the hunter?",FINISH_DESCRIPTION:"We learned how to hunt animals in the forest",PREREQUISITES:[Nu.BOW],FINISH:function(e){e.getService(zu.GAME).enable(_u.HUNTER),e.getService(zu.LOG).log("Hunter invented")}},FIRE:{CATEGORY:Wu.TECHNOLOGY,COST:[{resource:Iu.BRUSHWOOD,amount:20},{resource:Iu.STONE,amount:2}],RESEARCH_POINT:30,DESCRIPTION:"Would it be useful if we could start fire on demand?",FINISH_DESCRIPTION:"We discovered ways to process brushwood into more efficient fuel",PREREQUISITES:[Nu.SCIENTIFIC_METHOD],FINISH:function(e){e.getService(zu.GAME).enable(_u.FIRE),e.getService(zu.RECIPE).enable(Yu.FUEL_BRUSHWOOD)}},BIGGER_FIRE:{CATEGORY:Wu.TECHNOLOGY,COST:[{resource:Iu.LOG,amount:10},{resource:Iu.STONE,amount:2}],RESEARCH_POINT:50,DESCRIPTION:"Could we make our fire bigger and last for longer?",FINISH_DESCRIPTION:"We learned how to turn logs into fuel",PREREQUISITES:[Nu.SCIENTIFIC_METHOD,Nu.FIRE],FINISH:function(e){e.getService(zu.RECIPE).enable(Yu.FUEL_LOG)}},COOKING:{CATEGORY:Wu.GENERAL,COST:[{resource:Iu.FUEL,amount:20},{resource:Iu.BERRY,amount:20},{resource:Iu.MUSHROOM,amount:20}],RESEARCH_POINT:30,DESCRIPTION:"What would happen if we heat up raw food?",FINISH_DESCRIPTION:"We discovered the art of cooking. We can prepare things with more nutrition value",PREREQUISITES:[Nu.SCIENTIFIC_METHOD,Nu.FIRE],FINISH:function(e){e.getService(zu.RECIPE).enable(Yu.COOKED_MEAT),e.getService(zu.RECIPE).enable(Yu.COOKED_FISH),e.getService(zu.RECIPE).enable(Yu.BREAD),e.getService(zu.RECIPE).enable(Yu.VEGETABLE_SOUP_BERRY),e.getService(zu.RECIPE).enable(Yu.VEGETABLE_SOUP_MUSHROOM),e.getService(zu.RECIPE).enable(Yu.VEGETABLE_SOUP_BERRY_MUSHROOM),e.getService(zu.RECIPE).enable(Yu.MEAT_SOUP),e.getService(zu.RECIPE).enable(Yu.CHEESE)}},IMPROVED_COOKING:{CATEGORY:Wu.GENERAL,COST:[{resource:Iu.FUEL,amount:30},{resource:Iu.EGG,amount:20},{resource:Iu.FLOUR,amount:20}],RESEARCH_POINT:70,DESCRIPTION:"Are there any better things to cook?",FINISH_DESCRIPTION:"We invented new cooking recipes",PREREQUISITES:[Nu.COOKING,Nu.BIGGER_FIRE],FINISH:function(e){e.getService(zu.RECIPE).enable(Yu.OMELETTE),e.getService(zu.RECIPE).enable(Yu.PIE)}},KITCHEN:{CATEGORY:Wu.GENERAL,COST:[{resource:Iu.FUEL,amount:20},{resource:Iu.CUT_STONE,amount:5},{resource:Iu.COPPER,amount:2},{resource:Iu.POTTERY,amount:5}],RESEARCH_POINT:70,DESCRIPTION:"Can we improve food production rate?",FINISH_DESCRIPTION:"We realised that specialised building for food making can improve cooking speed",PREREQUISITES:[Nu.COOKING,Nu.POTTERY],FINISH:function(e){e.getService(zu.GAME).enable(_u.KITCHEN),e.getService(zu.LOG).log("Kitchen invented"),e.getService(zu.LOG).log("Kitchen orders can be now placed in it's own submenu of crafting menu")}},BAKERY:{CATEGORY:Wu.GENERAL,COST:[{resource:Iu.FUEL,amount:20},{resource:Iu.FLOUR,amount:20},{resource:Iu.CUT_STONE,amount:10}],RESEARCH_POINT:70,DESCRIPTION:"Could we improve bread making?",FINISH_DESCRIPTION:"We found out that by using special bread ovens we can greatly increase bread production",PREREQUISITES:[Nu.SCIENTIFIC_METHOD,Nu.COOKING],FINISH:function(e){e.getService(zu.GAME).enable(_u.BAKERY),e.getService(zu.LOG).log("Bakery invented")}},MORTAR:{CATEGORY:Wu.TECHNOLOGY,COST:[{resource:Iu.STONE,amount:20}],RESEARCH_POINT:20,DESCRIPTION:"Would it be useful to grind things up?",FINISH_DESCRIPTION:"Now we can grind things up",PREREQUISITES:[Nu.SCIENTIFIC_METHOD],FINISH:function(e){e.getService(zu.RECIPE).enable(Yu.FLOUR)}},STONE_SPEAR:{CATEGORY:Wu.MILITARY,COST:[{resource:Iu.STONE,amount:10},{resource:Iu.LOG,amount:5}],RESEARCH_POINT:25,DESCRIPTION:"We would have better chance of survival if we keep enemy at distance?",FINISH_DESCRIPTION:"We learned how to craft stone spear",PREREQUISITES:[Nu.SCIENTIFIC_METHOD],FINISH:function(e){e.getService(zu.RECIPE).enable(Yu.STONE_SPEAR)}},STONE_AXE:{CATEGORY:Wu.GENERAL,COST:[{resource:Iu.STONE,amount:10},{resource:Iu.LOG,amount:5}],RESEARCH_POINT:25,DESCRIPTION:"It's probably more effective to hit trees with sharp stone?",FINISH_DESCRIPTION:"We learned how to craft stone axe",PREREQUISITES:[Nu.SCIENTIFIC_METHOD],FINISH:function(e){e.getService(zu.RECIPE).enable(Yu.STONE_AXE)}},STONE_PICKAXE:{CATEGORY:Wu.GENERAL,COST:[{resource:Iu.STONE,amount:10},{resource:Iu.LOG,amount:5}],RESEARCH_POINT:25,DESCRIPTION:"Would stone win against stone?",FINISH_DESCRIPTION:"We learned how to craft stone pickaxe",PREREQUISITES:[Nu.SCIENTIFIC_METHOD],FINISH:function(e){e.getService(zu.RECIPE).enable(Yu.STONE_PICKAXE)}},STONE_HAMMER:{CATEGORY:Wu.GENERAL,COST:[{resource:Iu.STONE,amount:10},{resource:Iu.LOG,amount:5}],RESEARCH_POINT:25,DESCRIPTION:"Can hitting with stone be easier?",FINISH_DESCRIPTION:"We learned how to craft stone hammer",PREREQUISITES:[Nu.SCIENTIFIC_METHOD],FINISH:function(e){e.getService(zu.RECIPE).enable(Yu.STONE_HAMMER)}},STONE_SHOVEL:{CATEGORY:Wu.GENERAL,COST:[{resource:Iu.STONE,amount:10},{resource:Iu.LOG,amount:5}],RESEARCH_POINT:25,DESCRIPTION:"It should be better to get your stone dirty and not your hands?",FINISH_DESCRIPTION:"We learned how to craft stone shovel",PREREQUISITES:[Nu.SCIENTIFIC_METHOD],FINISH:function(e){e.getService(zu.RECIPE).enable(Yu.STONE_SHOVEL)}},COPPER_TOOLS:{CATEGORY:Wu.GENERAL,COST:[{resource:Iu.LOG,amount:20},{resource:Iu.COPPER,amount:20},{resource:Iu.HAMMER,amount:2}],RESEARCH_POINT:50,DESCRIPTION:"Could we make better tools with metal instead of stone? ",FINISH_DESCRIPTION:"We learned how to craft copper tools",PREREQUISITES:[Nu.ORE_PROCESSING,Nu.STONE_SHOVEL,Nu.STONE_PICKAXE,Nu.STONE_AXE,Nu.STONE_HAMMER,Nu.STONE_SPEAR],FINISH:function(e){e.getService(zu.RECIPE).enable(Yu.COPPER_AXE),e.getService(zu.RECIPE).enable(Yu.COPPER_PICKAXE),e.getService(zu.RECIPE).enable(Yu.COPPER_SHOVEL),e.getService(zu.RECIPE).enable(Yu.COPPER_SPEAR),e.getService(zu.RECIPE).enable(Yu.COPPER_HAMMER),e.getService(zu.RECIPE).enable(Yu.COPPER_NAILS)}},BRONZE_TOOLS:{CATEGORY:Wu.GENERAL,COST:[{resource:Iu.LOG,amount:20},{resource:Iu.BRONZE,amount:20},{resource:Iu.HAMMER,amount:2}],RESEARCH_POINT:100,DESCRIPTION:"Would bronze tools be even better than copper ones?",FINISH_DESCRIPTION:"We learned how to craft bronze tools",PREREQUISITES:[Nu.COPPER_TOOLS,Nu.METALLURGY],FINISH:function(e){e.getService(zu.RECIPE).enable(Yu.BRONZE_AXE),e.getService(zu.RECIPE).enable(Yu.BRONZE_PICKAXE),e.getService(zu.RECIPE).enable(Yu.BRONZE_SHOVEL),e.getService(zu.RECIPE).enable(Yu.BRONZE_SPEAR),e.getService(zu.RECIPE).enable(Yu.BRONZE_HAMMER),e.getService(zu.RECIPE).enable(Yu.BRONZE_NAILS)}},IRON_TOOLS:{CATEGORY:Wu.GENERAL,COST:[{resource:Iu.LOG,amount:20},{resource:Iu.IRON,amount:20},{resource:Iu.HAMMER,amount:2}],RESEARCH_POINT:200,DESCRIPTION:"Can we craft tools from iron?",FINISH_DESCRIPTION:"We learned how to craft iron tools",PREREQUISITES:[Nu.BRONZE_TOOLS,Nu.MASTER_ORE_PROCESSING],FINISH:function(e){e.getService(zu.RECIPE).enable(Yu.IRON_AXE),e.getService(zu.RECIPE).enable(Yu.IRON_PICKAXE),e.getService(zu.RECIPE).enable(Yu.IRON_SHOVEL),e.getService(zu.RECIPE).enable(Yu.IRON_SPEAR),e.getService(zu.RECIPE).enable(Yu.IRON_HAMMER),e.getService(zu.RECIPE).enable(Yu.IRON_NAILS)}},MINING:{CATEGORY:Wu.TECHNOLOGY,COST:[{resource:Iu.LOG,amount:10},{resource:Iu.STONE,amount:5},{resource:Iu.PICKAXE,amount:1}],RESEARCH_POINT:50,DESCRIPTION:"If we dig deep enough maybe there is something nice?",FINISH_DESCRIPTION:"We discovered that stone can be harvested in the mountains",PREREQUISITES:[Nu.SCIENTIFIC_METHOD,Nu.STONE_PICKAXE],FINISH:function(e){e.getService(zu.GAME).enable(_u.MOUNTAINS),e.getService(zu.LOG).log("Mountains unlocked")}},DIGGING:{CATEGORY:Wu.TECHNOLOGY,COST:[{resource:Iu.LOG,amount:10},{resource:Iu.SHOVEL,amount:1}],RESEARCH_POINT:30,DESCRIPTION:"How can we move soil away efficiently?",FINISH_DESCRIPTION:"We discovered good ways of digging",PREREQUISITES:[Nu.SCIENTIFIC_METHOD,Nu.STONE_SHOVEL],FINISH:function(e){e.getService(zu.GAME).isEnabled(_u.FIELD)||(e.getService(zu.GAME).enable(_u.FIELD),e.getService(zu.LOG).log("Field unlocked")),e.getService(zu.GAME).enable(_u.CLAY_PIT),e.getService(zu.LOG).log("Clay pit unlocked"),e.getService(zu.RESOURCES).makeVisible(Iu.CLAY)}},POTTERY:{CATEGORY:Wu.TECHNOLOGY,COST:[{resource:Iu.LOG,amount:10},{resource:Iu.FUEL,amount:5},{resource:Iu.CLAY,amount:10}],RESEARCH_POINT:50,DESCRIPTION:"Can we do something useful with all that clay?",FINISH_DESCRIPTION:"We invented how to make pottery from clay",PREREQUISITES:[Nu.DIGGING,Nu.FIRE],FINISH:function(e){e.getService(zu.RECIPE).enable(Yu.POTTERY),e.getService(zu.RESOURCES).makeVisible(Iu.POTTERY)}},BRICKS:{CATEGORY:Wu.TECHNOLOGY,COST:[{resource:Iu.LOG,amount:10},{resource:Iu.FUEL,amount:5},{resource:Iu.CLAY,amount:10}],RESEARCH_POINT:100,DESCRIPTION:"Maybe we can use clay for building?",FINISH_DESCRIPTION:"We discovered how to make bricks from clay and hay",PREREQUISITES:[Nu.POTTERY,Nu.BIGGER_FIRE,Nu.LONGHOUSE],FINISH:function(e){e.getService(zu.RECIPE).enable(Yu.BRICKS),e.getService(zu.RESOURCES).makeVisible(Iu.BRICKS)}},PROSPECTING_FOR_ORE:{CATEGORY:Wu.TECHNOLOGY,COST:[{resource:Iu.PICKAXE,amount:10}],RESEARCH_POINT:50,DESCRIPTION:"There must be something useful under all this dirt",FINISH_DESCRIPTION:"We discovered that trained geologist can find ores deposits in the mountains",PREREQUISITES:[Nu.MINING],FINISH:function(e){e.getService(zu.GAME).enable(_u.GEOLOGIST),e.getService(zu.LOG).log("Geologist invented")}},ADVANCED_PROSPECTING:{CATEGORY:Wu.TECHNOLOGY,COST:[{resource:Iu.PICKAXE,amount:20}],RESEARCH_POINT:75,DESCRIPTION:"There must be something even more valuable under the ground?",FINISH_DESCRIPTION:"We learned about more resources that mountains have to offer",PREREQUISITES:[Nu.PROSPECTING_FOR_ORE],FINISH:function(e){e.getService(zu.GAME).enable(_u.GOLD),e.getService(zu.GAME).enable(_u.SILVER)}},MASTER_PROSPECTING:{CATEGORY:Wu.TECHNOLOGY,COST:[{resource:Iu.PICKAXE,amount:40}],RESEARCH_POINT:100,DESCRIPTION:"Is there anything else to find?",FINISH_DESCRIPTION:"We discovered iron",PREREQUISITES:[Nu.ADVANCED_PROSPECTING,Nu.IMPROVED_FORESIGHT],FINISH:function(e){e.getService(zu.GAME).enable(_u.IRON)}},PIT_MINE:{CATEGORY:Wu.TECHNOLOGY,COST:[{resource:Iu.STONE,amount:20},{resource:Iu.LOG,amount:20},{resource:Iu.PICKAXE,amount:10}],RESEARCH_POINT:100,DESCRIPTION:"Could we get precious resources from under the ground?",FINISH_DESCRIPTION:"We invented a way to mine ore deposits from the ground",PREREQUISITES:[Nu.PROSPECTING_FOR_ORE],FLAG_PREREQUISITES:[_u.BUILT_QUARRY],FINISH:function(e){e.getService(zu.GAME).enable(_u.PIT_MINE),e.getService(zu.LOG).log("Pit mine invented"),e.getService(zu.RECIPE).enable(Yu.FUEL_COAL)}},DEEP_MINE:{CATEGORY:Wu.TECHNOLOGY,COST:[{resource:Iu.LOG,amount:40},{resource:Iu.PLANK,amount:40},{resource:Iu.CUT_STONE,amount:20},{resource:Iu.PICKAXE,amount:10}],RESEARCH_POINT:100,DESCRIPTION:"Do we have to move all the dirt or could we just dig tunnels?",FINISH_DESCRIPTION:"It's now possible to build deep mines to mine ore",PREREQUISITES:[Nu.PIT_MINE,Nu.ADVANCED_MATHEMATICS],FLAG_PREREQUISITES:[],FINISH:function(e){e.getService(zu.GAME).enable(_u.DEEP_MINE),e.getService(zu.LOG).log("Deep mine invented")}},ORE_PROCESSING:{CATEGORY:Wu.TECHNOLOGY,COST:[{resource:Iu.CUT_STONE,amount:40},{resource:Iu.STONE,amount:20},{resource:Iu.HAMMER,amount:10},{resource:Iu.COPPER_ORE,amount:20}],RESEARCH_POINT:100,DESCRIPTION:"What happens if we heat ore in fire?",FINISH_DESCRIPTION:"We discovered how to process ore into metal",PREREQUISITES:[Nu.PROSPECTING_FOR_ORE],FINISH:function(e){e.getService(zu.GAME).enable(_u.SMITHY),e.getService(zu.LOG).log("Smithy invented")}},ADVANCED_ORE_PROCESSING:{CATEGORY:Wu.TECHNOLOGY,COST:[{resource:Iu.CUT_STONE,amount:40},{resource:Iu.STONE,amount:20},{resource:Iu.HAMMER,amount:5},{resource:Iu.GOLD_ORE,amount:5},{resource:Iu.SILVER_ORE,amount:5}],RESEARCH_POINT:150,DESCRIPTION:"What about heating other ores?",FINISH_DESCRIPTION:"We discovered how to process gold and silver ore",PREREQUISITES:[Nu.ADVANCED_PROSPECTING,Nu.ORE_PROCESSING],FLAG_PREREQUISITES:[_u.BUILT_SMITHY],FINISH:function(e){e.getService(zu.GAME).enable(_u.ADVANCED_ORE_PROCESSING),e.getService(zu.GAME).isEnabled(_u.BUILT_SMITHY)&&(e.getService(zu.RECIPE).enable(Yu.GOLD),e.getService(zu.RECIPE).enable(Yu.SILVER))}},MASTER_ORE_PROCESSING:{CATEGORY:Wu.TECHNOLOGY,COST:[{resource:Iu.CUT_STONE,amount:40},{resource:Iu.STONE,amount:20},{resource:Iu.HAMMER,amount:5},{resource:Iu.IRON_ORE,amount:10}],RESEARCH_POINT:200,DESCRIPTION:"Can we smelt any ore we want?",FINISH_DESCRIPTION:"We learned to process iron ore",PREREQUISITES:[Nu.MASTER_PROSPECTING,Nu.ADVANCED_ORE_PROCESSING],FLAG_PREREQUISITES:[_u.BUILT_SMITHY],FINISH:function(e){e.getService(zu.GAME).enable(_u.IRON),e.getService(zu.GAME).isEnabled(_u.BUILT_SMITHY)&&e.getService(zu.RECIPE).enable(Yu.IRON)}},METALLURGY:{CATEGORY:Wu.TECHNOLOGY,COST:[{resource:Iu.COPPER,amount:10},{resource:Iu.TIN,amount:10}],RESEARCH_POINT:100,DESCRIPTION:"What would happen if we mix two metals?",FINISH_DESCRIPTION:"We discovered that mixing multiple metals can give better results",PREREQUISITES:[Nu.ORE_PROCESSING],FLAG_PREREQUISITES:[_u.BUILT_SMITHY],FINISH:function(e){e.getService(zu.GAME).enable(_u.BRONZE),e.getService(zu.GAME).isEnabled(_u.BUILT_SMITHY)&&e.getService(zu.RECIPE).enable(Yu.BRONZE)}},ADVANCED_METALLURGY:{CATEGORY:Wu.TECHNOLOGY,COST:[{resource:Iu.IRON,amount:10},{resource:Iu.COAL,amount:50}],RESEARCH_POINT:200,DESCRIPTION:"Could we mix iron with coal to make it stronger?",FINISH_DESCRIPTION:"We invented steel",PREREQUISITES:[Nu.MASTER_ORE_PROCESSING],FLAG_PREREQUISITES:[_u.BUILT_SMITHY,_u.IRON],FINISH:function(e){e.getService(zu.GAME).enable(_u.STEEL),e.getService(zu.GAME).isEnabled(_u.BUILT_SMITHY)&&e.getService(zu.RECIPE).enable(Yu.STEEL)}},COINS_MINTING:{CATEGORY:Wu.TECHNOLOGY,COST:[{resource:Iu.GOLD,amount:10},{resource:Iu.SILVER,amount:20}],RESEARCH_POINT:100,DESCRIPTION:"Maybe we can make our own coins?",FINISH_DESCRIPTION:"We learned how to mint our own coins",PREREQUISITES:[Nu.ADVANCED_ORE_PROCESSING],FLAG_PREREQUISITES:[_u.BUILT_SMITHY],FINISH:function(e){e.getService(zu.GAME).enable(_u.MINT),e.getService(zu.LOG).log("Mint invented")}},HOUSE:{CATEGORY:Wu.TECHNOLOGY,COST:[{resource:Iu.LOG,amount:50},{resource:Iu.PLANK,amount:50}],RESEARCH_POINT:100,DESCRIPTION:"What if huts were bigger?",FINISH_DESCRIPTION:"We learned how to build bigger and more efficient buildings for living",PREREQUISITES:[Nu.SCIENTIFIC_METHOD,Nu.STONE_HAMMER,Nu.STONE_SHOVEL],FINISH:function(e){e.getService(zu.GAME).enable(_u.HOUSE),e.getService(zu.LOG).log("House invented")}},LONGHOUSE:{CATEGORY:Wu.TECHNOLOGY,COST:[{resource:Iu.LOG,amount:50},{resource:Iu.PLANK,amount:50},{resource:Iu.CUT_STONE,amount:20},{resource:Iu.HAY,amount:20},{resource:Iu.HAMMER,amount:5}],RESEARCH_POINT:200,DESCRIPTION:"Could we house multiple families in one building?",FINISH_DESCRIPTION:"Now we can build longhouses that can house multiple families",PREREQUISITES:[Nu.HOUSE,Nu.AGRICULTURE],FINISH:function(e){e.getService(zu.GAME).enable(_u.LONGHOUSE),e.getService(zu.LOG).log("Longhouse invented")}},TUDOR_HOUSE:{CATEGORY:Wu.TECHNOLOGY,COST:[{resource:Iu.LOG,amount:70},{resource:Iu.PLANK,amount:50},{resource:Iu.BRICKS,amount:40},{resource:Iu.HAMMER,amount:10}],RESEARCH_POINT:400,DESCRIPTION:"Can we use better building materials to build bigger houses?",FINISH_DESCRIPTION:"We worked out how to build tudor houses",PREREQUISITES:[Nu.LONGHOUSE,Nu.BRICKS],FINISH:function(e){e.getService(zu.GAME).enable(_u.TUDOR_HOUSE),e.getService(zu.LOG).log("Tudor House invented")}},URBAN_PLANNING:{CATEGORY:Wu.SCIENCE,COST:[],RESEARCH_POINT:50,DESCRIPTION:"Maybe we could rearrange buildings?",FINISH_DESCRIPTION:"Now we can combine and split some buildings like fields, orchards, pastures and warehouses",PREREQUISITES:[Nu.MANAGEMENT,Nu.MATHEMATICS],FINISH:function(e){e.getService(zu.GAME).enable(_u.URBAN_PLANNING)}},WONDER_BUILDINGS:{CATEGORY:Wu.GENERAL,COST:[],RESEARCH_POINT:500,DESCRIPTION:"What if we built something remarkable?",FINISH_DESCRIPTION:"We learned that by building wonders we can boost future generations progress",PREREQUISITES:[Nu.HOUSE,Nu.URBAN_PLANNING,Nu.ADVANCED_MATHEMATICS],FINISH:function(e){e.getService(zu.GAME).enable(_u.PLATEAU),e.getService(zu.LOG).log("Plateau unlocked")}},SAWMILL:{CATEGORY:Wu.TECHNOLOGY,COST:[{resource:Iu.LOG,amount:50},{resource:Iu.PLANK,amount:10},{resource:Iu.COPPER,amount:5}],RESEARCH_POINT:100,DESCRIPTION:"Is it possible to produce planks even faster?",FINISH_DESCRIPTION:"We discovered sawmill that efficiently turns logs into planks",PREREQUISITES:[Nu.SCIENTIFIC_METHOD,Nu.STONE_HAMMER,Nu.STONE_AXE],FINISH:function(e){e.getService(zu.GAME).enable(_u.SAWMILL),e.getService(zu.LOG).log("Sawmill invented")}},WINDMILL:{CATEGORY:Wu.TECHNOLOGY,COST:[{resource:Iu.LOG,amount:50},{resource:Iu.PLANK,amount:10},{resource:Iu.COPPER,amount:5}],RESEARCH_POINT:100,DESCRIPTION:"Could we use wind to do hard work for us?",FINISH_DESCRIPTION:"We invented windmill that can effortlessly turn wheat into flour",PREREQUISITES:[Nu.AGRICULTURE,Nu.MORTAR,Nu.MATHEMATICS],FINISH:function(e){e.getService(zu.GAME).enable(_u.WINDMILL),e.getService(zu.LOG).log("Windmill invented"),e.getService(zu.RESOURCES).makeVisible(Iu.FABRIC)}},FORESTRY:{CATEGORY:Wu.AGRICULTURE,COST:[{resource:Iu.LOG,amount:20},{resource:Iu.BRUSHWOOD,amount:20},{resource:Iu.SHOVEL,amount:2}],RESEARCH_POINT:50,DESCRIPTION:"Is there any reason why trees grow out of dirt?",FINISH_DESCRIPTION:"We now can hire foresters to plant new trees and manage forest better",PREREQUISITES:[Nu.SCIENTIFIC_METHOD,Nu.MANAGEMENT,Nu.STONE_SHOVEL],FINISH:function(e){e.getService(zu.GAME).enable(_u.FORESTER),e.getService(zu.LOG).log("Forester invented"),e.getService(zu.LOG).log("Forest management unlocked")}},BARRACKS:{CATEGORY:Wu.MILITARY,COST:[{resource:Iu.LOG,amount:20},{resource:Iu.PLANK,amount:20},{resource:Iu.SPEAR,amount:5}],RESEARCH_POINT:100,DESCRIPTION:"How can we make those of us more aggressive less of a threat to others?",FINISH_DESCRIPTION:"We found out that we can form army and use it to our advantage",PREREQUISITES:[Nu.SCIENTIFIC_METHOD,Nu.CALENDAR,Nu.STONE_SPEAR],FINISH:function(e){e.getService(zu.GAME).isEnabled(_u.FORT)||(e.getService(zu.GAME).enable(_u.FORT),e.getService(zu.LOG).log("Fort unlocked")),e.getService(zu.RECIPE).enable(Yu.WOODEN_SHIELD),e.getService(zu.RECIPE).enable(Yu.LEATHER_ARMOR),e.getService(zu.GAME).enable(_u.BARRACKS),e.getService(zu.LOG).log("Barracks invented")}},STASH:{CATEGORY:Wu.MILITARY,COST:[{resource:Iu.LOG,amount:20},{resource:Iu.PLANK,amount:10}],RESEARCH_POINT:30,DESCRIPTION:"Can we hide our goods somewhere?",FINISH_DESCRIPTION:"We learned how to hide goods from invaders",PREREQUISITES:[Nu.FORESIGHT],FINISH:function(e){e.getService(zu.GAME).isEnabled(_u.FORT)||(e.getService(zu.GAME).enable(_u.FORT),e.getService(zu.LOG).log("Fort unlocked")),e.getService(zu.GAME).enable(_u.STASH)}},WOODEN_DEFENCES:{CATEGORY:Wu.MILITARY,COST:[{resource:Iu.LOG,amount:50}],RESEARCH_POINT:100,DESCRIPTION:"Maybe we could use logs to defend ourselves?",FINISH_DESCRIPTION:"Now we can build simple wooden defences that will delay invasions",PREREQUISITES:[Nu.BARRACKS],FINISH:function(e){e.getService(zu.GAME).enable(_u.STOCKADE),e.getService(zu.LOG).log("Stockade invented"),e.getService(zu.GAME).enable(_u.WOODEN_TOWER),e.getService(zu.LOG).log("Wooden tower invented")}},STONE_DEFENCES:{CATEGORY:Wu.MILITARY,COST:[{resource:Iu.STONE,amount:50},{resource:Iu.CUT_STONE,amount:50}],RESEARCH_POINT:200,DESCRIPTION:"Maybe we could use stone to defend ourselves?",FINISH_DESCRIPTION:"We learned how to build more durable defences",PREREQUISITES:[Nu.WOODEN_DEFENCES],FINISH:function(e){e.getService(zu.GAME).enable(_u.STONE_TOWER),e.getService(zu.LOG).log("Stone tower invented")}},MATHEMATICS:{CATEGORY:Wu.SCIENCE,COST:[{resource:Iu.FOOD,amount:1e3}],RESEARCH_POINT:50,DESCRIPTION:"What if we calculate things first?",FINISH_DESCRIPTION:"By calculating things we are better at constructing and deconstructing buildings",PREREQUISITES:[Nu.FORESIGHT],FINISH:function(e){e.getService(zu.EFFECTS).addBuildingEffect(new Ku("Mathematics",wu.CONSTRUCTION,10,es.PERMANENT)),e.getService(zu.EFFECTS).addBuildingEffect(new Ku("Mathematics",wu.DECONSTRUCTION,10,es.PERMANENT))}},ADVANCED_MATHEMATICS:{CATEGORY:Wu.SCIENCE,COST:[{resource:Iu.FOOD,amount:4e3},{resource:Iu.PAPER,amount:20}],RESEARCH_POINT:200,DESCRIPTION:"Are there any better ways of calculations?",FINISH_DESCRIPTION:"Our calculations methods improved and we are now able to research more advanced things",PREREQUISITES:[Nu.MATHEMATICS,Nu.PARCHMENT],FINISH:function(e){}},IMPROVED_FORESIGHT:{CATEGORY:Wu.SCIENCE,COST:[{resource:Iu.FOOD,amount:5e3},{resource:Iu.PAPER,amount:50}],RESEARCH_POINT:300,DESCRIPTION:"Can we use our knowledge to foresight what we could learn?",FINISH_DESCRIPTION:"With our knowledge we can look further into the unknown and foresight future researches",PREREQUISITES:[Nu.ADVANCED_MATHEMATICS,Nu.PARCHMENT],FINISH:function(e){e.getService(zu.RESEARCH).increaseForesight(1),e.getService(zu.LOG).log("Foresight level increased")}},LOGISTICS:{CATEGORY:Wu.MILITARY,COST:[{resource:Iu.STONE,amount:100},{resource:Iu.CLOTHES,amount:25}],RESEARCH_POINT:200,DESCRIPTION:"Can we improve travel speed between world regions?",FINISH_DESCRIPTION:"With improved military clothing and roads we can move faster between world regions",PREREQUISITES:[Nu.ADVANCED_MATHEMATICS],FINISH:function(e){e.getService(zu.GAME).enable(_u.LOGISTICS),e.getService(zu.LOG).log("Logistics invented")}},FERTILIZER:{CATEGORY:Wu.AGRICULTURE,COST:[{resource:Iu.FOOD,amount:3e3}],RESEARCH_POINT:100,DESCRIPTION:"Could we reuse what animals produce?",FINISH_DESCRIPTION:"By using animals manure we boost growth on fields and orchards",PREREQUISITES:[Nu.ANIMALS],FINISH:function(e){e.getService(zu.EFFECTS).addBuildingEffect(new Ku("Fertilizer",wu.FIELD,10,es.PERMANENT)),e.getService(zu.EFFECTS).addBuildingEffect(new Ku("Fertilizer",wu.ORCHARD,10,es.PERMANENT))}},PICKAXE_DESIGN:{CATEGORY:Wu.TECHNOLOGY,COST:[{resource:Iu.LOG,amount:10},{resource:Iu.CUT_STONE,amount:10},{resource:Iu.PICKAXE,amount:5}],RESEARCH_POINT:100,DESCRIPTION:"Maybe we could redesign our pickaxes?",FINISH_DESCRIPTION:"We discovered different pickaxe design that improved mining speed",PREREQUISITES:[Nu.MINING],FINISH:function(e){e.getService(zu.EFFECTS).addBuildingEffect(new Ku("Pickaxe Design",wu.QUARRY,10,es.PERMANENT)),e.getService(zu.EFFECTS).addBuildingEffect(new Ku("Pickaxe Design",wu.PIT_MINE,10,es.PERMANENT)),e.getService(zu.EFFECTS).addBuildingEffect(new Ku("Pickaxe Design",wu.GEOLOGIST,10,es.PERMANENT)),e.getService(zu.EFFECTS).addBuildingEffect(new Ku("Pickaxe Design",wu.DEEP_MINE,10,es.PERMANENT))}},TRADE_ROUTES:{CATEGORY:Wu.GENERAL,COST:[{resource:Iu.COINS,amount:400}],RESEARCH_POINT:50,DESCRIPTION:"Is it possible to attract more merchants?",FINISH_DESCRIPTION:"By optimizing roads system we will have more visiting merchants",PREREQUISITES:[Nu.TRADE,Nu.MATHEMATICS],FINISH:function(e){e.getService(zu.EFFECTS).addBuildingEffect(new Ku("Trade Routes",wu.MARKETPLACE,15,es.PERMANENT))}},BUFF_PRODUCTION:{CATEGORY:Wu.GENERAL,COST:[{resource:Iu.AXE,amount:2},{resource:Iu.SHOVEL,amount:2},{resource:Iu.PICKAXE,amount:2},{resource:Iu.HAMMER,amount:2}],RESEARCH_POINT:50,DESCRIPTION:"Would people work better if we give them better tools?",FINISH_DESCRIPTION:"Now we can replace used tools to boost some buildings production",PREREQUISITES:[Nu.MANAGEMENT],FINISH:function(e){e.getService(zu.GAME).enable(_u.BUFFS),e.getService(zu.LOG).log("Production buffs invented")}},HUMAN_RESOURCES:{CATEGORY:Wu.GENERAL,COST:[{resource:Iu.FOOD,amount:5e3}],RESEARCH_POINT:50,DESCRIPTION:"Maybe we can optimize work?",FINISH_DESCRIPTION:"We discovered automated work management for some buildings",PREREQUISITES:[Nu.MANAGEMENT],FINISH:function(e){e.getService(zu.GAME).enable(_u.HUMAN_RESOURCES),e.getService(zu.LOG).log("Automated work management available in management tab")}},SPECIALISED_PRODUCTION:{CATEGORY:Wu.TECHNOLOGY,COST:[{resource:Iu.FOOD,amount:3e3},{resource:Iu.HAMMER,amount:5},{resource:Iu.AXE,amount:5},{resource:Iu.PICKAXE,amount:5},{resource:Iu.SHOVEL,amount:5}],RESEARCH_POINT:50,DESCRIPTION:"Can we specialise in crafting one thing to do it better and faster?",FINISH_DESCRIPTION:"We realized that if we focus on crafting only one thing we can do it more efficiently",PREREQUISITES:[Nu.MATHEMATICS,Nu.STONE_HAMMER,Nu.STONE_AXE,Nu.STONE_PICKAXE,Nu.STONE_SHOVEL],FINISH:function(e){e.getService(zu.GAME).enable(_u.SPECIALISED_PRODUCTION),e.getService(zu.LOG).log("Manufacture invented")}},HERBAL_MEDICINE:{CATEGORY:Wu.SCIENCE,COST:[{resource:Iu.HERBS,amount:20}],RESEARCH_POINT:25,DESCRIPTION:"Would we heal faster if we used herbs?",FINISH_DESCRIPTION:"We learned how to craft medicine from herbs",PREREQUISITES:[Nu.MORTAR],FINISH:function(e){e.getService(zu.RECIPE).enable(Yu.HERBAL_MEDICINE)}},PRODUCTION_ZONES:{CATEGORY:Wu.GENERAL,COST:[{resource:Iu.FOOD,amount:5e3}],RESEARCH_POINT:50,DESCRIPTION:"Would creating production camps help with productivity?",FINISH_DESCRIPTION:"We discovered that groups of production buildings can increase production",PREREQUISITES:[Nu.HUMAN_RESOURCES],FINISH:function(e){e.getService(zu.GAME).enable(_u.PRODUCTION_ZONES),e.getService(zu.LOG).log("Unlocked buildings camps")}},BOAT_BUILDING:{CATEGORY:Wu.TECHNOLOGY,COST:[{resource:Iu.LOG,amount:50},{resource:Iu.PLANK,amount:100},{resource:Iu.NAILS,amount:50},{resource:Iu.FABRIC,amount:20}],RESEARCH_POINT:200,DESCRIPTION:"Could we utilize floating things to find better fishing spots or get from one place to another?",FINISH_DESCRIPTION:"We invented boats and boats builders",PREREQUISITES:[Nu.FISHING,Nu.COPPER_TOOLS],FINISH:function(e){e.getService(zu.GAME).enable(_u.PIER),e.getService(zu.GAME).enable(_u.BOAT_BUILDER),e.getService(zu.LOG).log("Invented boat builder and pier")}},CANNON:{CATEGORY:Wu.MILITARY,COST:[{resource:Iu.IRON,amount:50},{resource:Iu.LOG,amount:50}],RESEARCH_POINT:200,DESCRIPTION:"How can we make our ships perform better in fights?",FINISH_DESCRIPTION:"We invented cannons that we can put on our ships",PREREQUISITES:[Nu.MASTER_ORE_PROCESSING,Nu.BOAT_BUILDING],FINISH:function(e){e.getService(zu.RECIPE).enable(Yu.CANNON),e.getService(zu.LOG).log("Invented cannons crafting")}},BIGGER_SHIPS:{CATEGORY:Wu.TECHNOLOGY,COST:[{resource:Iu.LOG,amount:100},{resource:Iu.PLANK,amount:200},{resource:Iu.NAILS,amount:200},{resource:Iu.HAMMER,amount:40},{resource:Iu.FABRIC,amount:50}],RESEARCH_POINT:400,DESCRIPTION:"Could our ships get bigger?",FINISH_DESCRIPTION:"We invented new ship design and construction methods",PREREQUISITES:[Nu.BOAT_BUILDING,Nu.CANNON],FINISH:function(e){e.getService(zu.GAME).enable(_u.HARBOUR),e.getService(zu.GAME).enable(_u.SHIPYARD),e.getService(zu.GAME).enable(_u.BRIGANTINE),e.getService(zu.LOG).log("Invented Harbour, Shipyard and Brigantine")}},GALLEON:{CATEGORY:Wu.TECHNOLOGY,COST:[{resource:Iu.LOG,amount:100},{resource:Iu.PLANK,amount:200},{resource:Iu.NAILS,amount:200},{resource:Iu.HAMMER,amount:40},{resource:Iu.FABRIC,amount:60}],RESEARCH_POINT:700,DESCRIPTION:"How can we build even bigger ships?",FINISH_DESCRIPTION:"We learned how to build huge ships",PREREQUISITES:[Nu.BIGGER_SHIPS],FINISH:function(e){e.getService(zu.GAME).enable(_u.GALLEON),e.getService(zu.LOG).log("Invented Galleons")}},SEA_NAVIGATION:{CATEGORY:Wu.TECHNOLOGY,COST:[{resource:Iu.CUT_STONE,amount:50},{resource:Iu.BRICKS,amount:50},{resource:Iu.LOG,amount:50},{resource:Iu.PLANK,amount:50}],RESEARCH_POINT:300,DESCRIPTION:"Can we improve sea navigation?",FINISH_DESCRIPTION:"We invented lighthouse to guide our ships at the sea",PREREQUISITES:[Nu.BIGGER_SHIPS],FINISH:function(e){e.getService(zu.GAME).enable(_u.LIGHTHOUSE),e.getService(zu.LOG).log("Invented Lighthouse")}},SEA_CARTOGRAPHY:{CATEGORY:Wu.TECHNOLOGY,COST:[{resource:Iu.FOOD,amount:5e3}],RESEARCH_POINT:300,DESCRIPTION:"Can we discover new lands across the sea?",FINISH_DESCRIPTION:"We discovered what data to gather from the sea to help create maps to distant lands",PREREQUISITES:[Nu.SEA_NAVIGATION],FINISH:function(e){e.getService(zu.GAME).enable(_u.CARTOGRAPHER),e.getService(zu.LOG).log("Invented sea cartographer")}},SEA_CUISINE:{CATEGORY:Wu.GENERAL,COST:[{resource:Iu.FISH,amount:30},{resource:Iu.HERBS,amount:20},{resource:Iu.BREAD,amount:10}],RESEARCH_POINT:300,DESCRIPTION:"Can we make better dishes from what sea offers?",FINISH_DESCRIPTION:"We invented how to craft Bouillabaisse",PREREQUISITES:[Nu.KITCHEN,Nu.FISHING,Nu.BAKERY],FINISH:function(e){e.getService(zu.RECIPE).enable(Yu.BOUILLABAISSE),e.getService(zu.LOG).log("Invented Bouillabaisse")}}},Cs={START_CRAFTING_QUEUE_SIZE:2,START_COOKING_QUEUE_SIZE:2,RECIPES:{PLANK:{RESOURCE:Iu.PLANK,AMOUNT:1,COST:[{resource:Iu.LOG,amount:5}],CRAFTING:5},CUT_STONE:{RESOURCE:Iu.CUT_STONE,AMOUNT:1,COST:[{resource:Iu.STONE,amount:5}],CRAFTING:10},LEATHER:{RESOURCE:Iu.LEATHER,AMOUNT:1,COST:[{resource:Iu.FUR,amount:2}],CRAFTING:10},POTTERY:{RESOURCE:Iu.POTTERY,AMOUNT:1,COST:[{resource:Iu.FUEL,amount:1},{resource:Iu.CLAY,amount:4}],CRAFTING:13},BRICKS:{RESOURCE:Iu.BRICKS,AMOUNT:1,COST:[{resource:Iu.FUEL,amount:1},{resource:Iu.CLAY,amount:5},{resource:Iu.HAY,amount:1}],CRAFTING:15},STONE_AXE:{NAME:"STONE AXE",RESOURCE:Iu.AXE,AMOUNT:1,COST:[{resource:Iu.BRUSHWOOD,amount:1},{resource:Iu.LOG,amount:2},{resource:Iu.STONE,amount:5}],CRAFTING:15},STONE_PICKAXE:{NAME:"STONE PICKAXE",RESOURCE:Iu.PICKAXE,AMOUNT:1,COST:[{resource:Iu.BRUSHWOOD,amount:1},{resource:Iu.LOG,amount:2},{resource:Iu.STONE,amount:5}],CRAFTING:15},STONE_SHOVEL:{NAME:"STONE SHOVEL",RESOURCE:Iu.SHOVEL,AMOUNT:1,COST:[{resource:Iu.BRUSHWOOD,amount:1},{resource:Iu.LOG,amount:2},{resource:Iu.STONE,amount:5}],CRAFTING:15},STONE_SPEAR:{NAME:"STONE SPEAR",RESOURCE:Iu.SPEAR,AMOUNT:1,COST:[{resource:Iu.BRUSHWOOD,amount:1},{resource:Iu.LOG,amount:2},{resource:Iu.STONE,amount:5}],CRAFTING:15},STONE_HAMMER:{NAME:"STONE HAMMER",RESOURCE:Iu.HAMMER,AMOUNT:1,COST:[{resource:Iu.BRUSHWOOD,amount:1},{resource:Iu.LOG,amount:2},{resource:Iu.STONE,amount:5}],CRAFTING:15},COPPER_AXE:{NAME:"COPPER AXE",RESOURCE:Iu.AXE,AMOUNT:2,COST:[{resource:Iu.LOG,amount:2},{resource:Iu.COPPER,amount:1}],CRAFTING:12},COPPER_PICKAXE:{NAME:"COPPER PICKAXE",RESOURCE:Iu.PICKAXE,AMOUNT:2,COST:[{resource:Iu.LOG,amount:2},{resource:Iu.COPPER,amount:1}],CRAFTING:12},COPPER_SHOVEL:{NAME:"COPPER SHOVEL",RESOURCE:Iu.SHOVEL,AMOUNT:2,COST:[{resource:Iu.LOG,amount:2},{resource:Iu.COPPER,amount:1}],CRAFTING:12},COPPER_SPEAR:{NAME:"COPPER SPEAR",RESOURCE:Iu.SPEAR,AMOUNT:2,COST:[{resource:Iu.LOG,amount:2},{resource:Iu.COPPER,amount:1}],CRAFTING:12},COPPER_HAMMER:{NAME:"COPPER HAMMER",RESOURCE:Iu.HAMMER,AMOUNT:2,COST:[{resource:Iu.LOG,amount:2},{resource:Iu.COPPER,amount:1}],CRAFTING:12},COPPER_NAILS:{NAME:"COPPER NAILS",RESOURCE:Iu.NAILS,AMOUNT:4,COST:[{resource:Iu.COPPER,amount:2}],CRAFTING:6},BRONZE_AXE:{NAME:"BRONZE AXE",RESOURCE:Iu.AXE,AMOUNT:4,COST:[{resource:Iu.LOG,amount:2},{resource:Iu.BRONZE,amount:1}],CRAFTING:15},BRONZE_PICKAXE:{NAME:"BRONZE PICKAXE",RESOURCE:Iu.PICKAXE,AMOUNT:4,COST:[{resource:Iu.LOG,amount:2},{resource:Iu.BRONZE,amount:1}],CRAFTING:15},BRONZE_SHOVEL:{NAME:"BRONZE SHOVEL",RESOURCE:Iu.SHOVEL,AMOUNT:4,COST:[{resource:Iu.LOG,amount:2},{resource:Iu.BRONZE,amount:1}],CRAFTING:15},BRONZE_SPEAR:{NAME:"BRONZE SPEAR",RESOURCE:Iu.SPEAR,AMOUNT:4,COST:[{resource:Iu.LOG,amount:2},{resource:Iu.BRONZE,amount:1}],CRAFTING:15},BRONZE_HAMMER:{NAME:"BRONZE HAMMER",RESOURCE:Iu.HAMMER,AMOUNT:4,COST:[{resource:Iu.LOG,amount:2},{resource:Iu.BRONZE,amount:1}],CRAFTING:15},BRONZE_NAILS:{NAME:"BRONZE NAILS",RESOURCE:Iu.NAILS,AMOUNT:5,COST:[{resource:Iu.BRONZE,amount:1}],CRAFTING:8},IRON_AXE:{NAME:"IRON AXE",RESOURCE:Iu.AXE,AMOUNT:8,COST:[{resource:Iu.LOG,amount:2},{resource:Iu.IRON,amount:1}],CRAFTING:12},IRON_PICKAXE:{NAME:"IRON PICKAXE",RESOURCE:Iu.PICKAXE,AMOUNT:8,COST:[{resource:Iu.LOG,amount:2},{resource:Iu.IRON,amount:1}],CRAFTING:12},IRON_SHOVEL:{NAME:"IRON SHOVEL",RESOURCE:Iu.SHOVEL,AMOUNT:8,COST:[{resource:Iu.LOG,amount:2},{resource:Iu.IRON,amount:1}],CRAFTING:12},IRON_SPEAR:{NAME:"IRON SPEAR",RESOURCE:Iu.SPEAR,AMOUNT:8,COST:[{resource:Iu.LOG,amount:2},{resource:Iu.IRON,amount:1}],CRAFTING:12},IRON_HAMMER:{NAME:"IRON HAMMER",RESOURCE:Iu.HAMMER,AMOUNT:8,COST:[{resource:Iu.LOG,amount:2},{resource:Iu.IRON,amount:1}],CRAFTING:12},IRON_NAILS:{NAME:"IRON NAILS",RESOURCE:Iu.NAILS,AMOUNT:15,COST:[{resource:Iu.IRON,amount:1}],CRAFTING:6},BOW:{RESOURCE:Iu.BOW,AMOUNT:1,COST:[{resource:Iu.BRUSHWOOD,amount:5},{resource:Iu.LOG,amount:10}],CRAFTING:15},PARCHMENT:{RESOURCE:Iu.PAPER,AMOUNT:1,COST:[{resource:Iu.FUR,amount:2}],CRAFTING:15},SWORD:{RESOURCE:Iu.SWORD,AMOUNT:1,COST:[{resource:Iu.COPPER,amount:5},{resource:Iu.LOG,amount:1},{resource:Iu.FUEL,amount:5}],CRAFTING:20},WOODEN_SHIELD:{RESOURCE:Iu.WOODEN_SHIELD,AMOUNT:1,COST:[{resource:Iu.PLANK,amount:5},{resource:Iu.LOG,amount:2},{resource:Iu.LEATHER,amount:1}],CRAFTING:20},LEATHER_ARMOR:{RESOURCE:Iu.LEATHER_ARMOR,AMOUNT:1,COST:[{resource:Iu.LEATHER,amount:10}],CRAFTING:20},LIGHT_ARMOR:{RESOURCE:Iu.LIGHT_ARMOR,AMOUNT:1,COST:[{resource:Iu.COPPER,amount:10},{resource:Iu.LEATHER,amount:5},{resource:Iu.FUEL,amount:10}],CRAFTING:25},HEAVY_ARMOR:{RESOURCE:Iu.HEAVY_ARMOR,AMOUNT:1,COST:[{resource:Iu.COPPER,amount:15},{resource:Iu.LEATHER,amount:5},{resource:Iu.FUEL,amount:10}],CRAFTING:30},CANNON:{RESOURCE:Iu.CANNON,AMOUNT:1,COST:[{resource:Iu.IRON,amount:10},{resource:Iu.PLANK,amount:10},{resource:Iu.FUEL,amount:5}],CRAFTING:30},FUEL_BRUSHWOOD:{NAME:"BRUSHWOOD FUEL",RESOURCE:Iu.FUEL,AMOUNT:2,COST:[{resource:Iu.BRUSHWOOD,amount:4}],CRAFTING:2},FUEL_LOG:{NAME:"LOG FUEL",RESOURCE:Iu.FUEL,AMOUNT:4,COST:[{resource:Iu.LOG,amount:4}],CRAFTING:5},FUEL_COAL:{NAME:"COAL FUEL",RESOURCE:Iu.FUEL,AMOUNT:12,COST:[{resource:Iu.COAL,amount:2}],CRAFTING:5},COOKED_FISH:{RESOURCE:Iu.COOKED_FISH,AMOUNT:1,COST:[{resource:Iu.FISH,amount:1},{resource:Iu.FUEL,amount:1}],CRAFTING:5},COOKED_MEAT:{RESOURCE:Iu.COOKED_MEAT,AMOUNT:1,COST:[{resource:Iu.MEAT,amount:1},{resource:Iu.FUEL,amount:1}],CRAFTING:5},CHEESE:{RESOURCE:Iu.CHEESE,AMOUNT:1,COST:[{resource:Iu.MILK,amount:3}],CRAFTING:7},OMELETTE:{RESOURCE:Iu.OMELETTE,AMOUNT:1,COST:[{resource:Iu.EGG,amount:5},{resource:Iu.FUEL,amount:1}],CRAFTING:3},PIE:{RESOURCE:Iu.PIE,AMOUNT:1,COST:[{resource:Iu.APPLE,amount:3},{resource:Iu.FLOUR,amount:1},{resource:Iu.EGG,amount:1},{resource:Iu.FUEL,amount:1}],CRAFTING:5},FLOUR:{RESOURCE:Iu.FLOUR,AMOUNT:1,COST:[{resource:Iu.WHEAT,amount:2}],CRAFTING:3},BREAD:{RESOURCE:Iu.BREAD,AMOUNT:1,COST:[{resource:Iu.FLOUR,amount:2},{resource:Iu.FUEL,amount:1}],CRAFTING:5},BOUILLABAISSE:{RESOURCE:Iu.BOUILLABAISSE,AMOUNT:1,COST:[{resource:Iu.FISH,amount:3},{resource:Iu.BREAD,amount:1},{resource:Iu.HERBS,amount:2},{resource:Iu.FUEL,amount:1}],CRAFTING:5},VEGETABLE_SOUP_BERRY:{RESOURCE:Iu.VEGETABLE_SOUP,AMOUNT:1,COST:[{resource:Iu.BERRY,amount:2},{resource:Iu.HERBS,amount:1},{resource:Iu.FUEL,amount:1}],CRAFTING:5},VEGETABLE_SOUP_MUSHROOM:{RESOURCE:Iu.VEGETABLE_SOUP,AMOUNT:1,COST:[{resource:Iu.MUSHROOM,amount:2},{resource:Iu.HERBS,amount:1},{resource:Iu.FUEL,amount:1}],CRAFTING:5},VEGETABLE_SOUP_BERRY_MUSHROOM:{RESOURCE:Iu.VEGETABLE_SOUP,AMOUNT:1,COST:[{resource:Iu.BERRY,amount:1},{resource:Iu.MUSHROOM,amount:1},{resource:Iu.HERBS,amount:1},{resource:Iu.FUEL,amount:1}],CRAFTING:5},MEAT_SOUP:{RESOURCE:Iu.MEAT_SOUP,AMOUNT:1,COST:[{resource:Iu.MEAT,amount:1},{resource:Iu.HERBS,amount:1},{resource:Iu.FUEL,amount:1}],CRAFTING:5},FABRIC:{NAME:"COTTON FABRIC",RESOURCE:Iu.FABRIC,AMOUNT:1,COST:[{resource:Iu.COTTON,amount:2}],CRAFTING:5},FABRIC_WOOL:{NAME:"WOOL FABRIC",RESOURCE:Iu.FABRIC,AMOUNT:1,COST:[{resource:Iu.WOOL,amount:3}],CRAFTING:5},CLOTHES_FABRIC:{NAME:"FABRIC CLOTHES",RESOURCE:Iu.CLOTHES,AMOUNT:1,COST:[{resource:Iu.FABRIC,amount:10}],CRAFTING:20},CLOTHES_FUR:{NAME:"FUR CLOTHES",RESOURCE:Iu.CLOTHES,AMOUNT:1,COST:[{resource:Iu.FUR,amount:15}],CRAFTING:20},GOLD:{RESOURCE:Iu.GOLD,AMOUNT:1,COST:[{resource:Iu.GOLD_ORE,amount:2},{resource:Iu.FUEL,amount:1}],CRAFTING:10},SILVER:{RESOURCE:Iu.SILVER,AMOUNT:1,COST:[{resource:Iu.SILVER_ORE,amount:2},{resource:Iu.FUEL,amount:1}],CRAFTING:10},COPPER:{RESOURCE:Iu.COPPER,AMOUNT:1,COST:[{resource:Iu.COPPER_ORE,amount:2},{resource:Iu.FUEL,amount:1}],CRAFTING:20},TIN:{RESOURCE:Iu.TIN,AMOUNT:1,COST:[{resource:Iu.TIN_ORE,amount:2},{resource:Iu.FUEL,amount:1}],CRAFTING:20},BRONZE:{RESOURCE:Iu.BRONZE,AMOUNT:2,COST:[{resource:Iu.COPPER,amount:1},{resource:Iu.TIN,amount:1},{resource:Iu.FUEL,amount:1}],CRAFTING:30},IRON:{RESOURCE:Iu.IRON,AMOUNT:1,COST:[{resource:Iu.IRON_ORE,amount:3},{resource:Iu.FUEL,amount:3}],CRAFTING:30},STEEL:{RESOURCE:Iu.STEEL,AMOUNT:1,COST:[{resource:Iu.IRON,amount:1},{resource:Iu.COAL,amount:5},{resource:Iu.FUEL,amount:1}],CRAFTING:40},HERBAL_MEDICINE:{RESOURCE:Iu.HERBAL_MEDICINE,AMOUNT:1,COST:[{resource:Iu.HERBS,amount:5}],CRAFTING:15}}},Is={getReligion:function(e){var n=Object.entries(this.RELIGIONS).find(function(n){return n[0]===Du[e]});if(n)return n[1];console.warn("Invalid religion: "+Vu.prepareReligionName(e))},RELIGIONS:{NONE:{FAITH_LEVEL:0,FAITH:0,TIME:0,OFFERING:[]},NATURE:{FAITH_LEVEL:1,FAITH:20,TIME:10,OFFERING:[{resource:Iu.LOG,amount:40},{resource:Iu.BERRY,amount:20},{resource:Iu.MUSHROOM,amount:20}]},FERTILITY:{FAITH_LEVEL:1,FAITH:30,TIME:10,OFFERING:[{resource:Iu.WHEAT,amount:40},{resource:Iu.BERRY,amount:40},{resource:Iu.APPLE,amount:40}]},TECHNOLOGY:{FAITH_LEVEL:1,FAITH:40,TIME:10,OFFERING:[{resource:Iu.PLANK,amount:20},{resource:Iu.CUT_STONE,amount:20},{resource:Iu.HAMMER,amount:5},{resource:Iu.PICKAXE,amount:5}]},WAR:{FAITH_LEVEL:1,FAITH:50,TIME:10,OFFERING:[{resource:Iu.SPEAR,amount:5},{resource:Iu.LEATHER_ARMOR,amount:5},{resource:Iu.FUR,amount:10},{resource:Iu.LEATHER,amount:10},{resource:Iu.FOOD,amount:1e3}]}},PRAYERS:{BLESSING:{FAITH:50,FAITH_LEVEL:2,RELIGION:Du.NONE,DESCRIPTION:"May everything go according to our plans",FINISH:function(e){var n=[];Object.values(Gu).filter(function(e){return!isNaN(e)}).forEach(function(t){e.getServiceByRegion(t).getBuildings().forEach(function(e){n.includes(e.getBuildingType())||n.push(e.getBuildingType())})});var t=Qu.randomExcept(n,[wu.ALL,wu.CONSTRUCTION,wu.DECONSTRUCTION,wu.BARN,wu.FIELD,wu.ORCHARD,wu.PASTURE,wu.WAREHOUSE,wu.SMITHY,wu.ASCENSION_TEMPLE,wu.COLOSSUS,wu.GREAT_LIGHTHOUSE,wu.HANGING_GARDEN,wu.PYRAMID,wu.SACRED_GROVE,wu.STONEHENGE,wu.UNDERGROUND_CITY,wu.PIER,wu.HARBOUR,wu.LIGHTHOUSE,wu.STASH,wu.WOODEN_TOWER,wu.BARRACKS,wu.STONE_TOWER,wu.STOCKADE]);e.getService(zu.LOG).log(Vu.prepareBuildingName(t)+" blessed"),e.getService(zu.EFFECTS).addBuildingEffect(new Ku("Blessing",t,25,180))}},PREACH:{FAITH:20,FAITH_LEVEL:1,RELIGION:Du.NONE,DESCRIPTION:"We shall spread our beliefs to others",FINISH:function(e){e.getService(zu.RELIGION).increaseFaithLevel(1)}},FAITH_SHIELD:{FAITH:50,FAITH_LEVEL:3,RELIGION:Du.NONE,DESCRIPTION:"Our faith will protect us from harm",FINISH:function(e){var n=25;n+=e.getService(zu.RELIGION).getFaithLevel(),e.getService(zu.RELIGION).increaseFaithShield(n)}},SOLDIER_PRAYER:{FAITH:50,FAITH_LEVEL:5,RELIGION:Du.NONE,DESCRIPTION:"We shall win any enemy with our faith. All troops buffed 20% for one year",FINISH:function(e){e.getService(zu.EFFECTS).addArmyEffect(new qu("Soldier prayer",Lu.ALL,20,360))}},FAITHFUL_RESEARCH:{FAITH:100,FAITH_LEVEL:5,RELIGION:Du.TECHNOLOGY,DESCRIPTION:"We live to improve our knowledge. Gain 100 research points spent only on current research",FINISH:function(e){e.getService(zu.RESEARCH).progressTech(100)}},BABY_BOOM:{FAITH:100,FAITH_LEVEL:5,RELIGION:Du.FERTILITY,DESCRIPTION:"May we have a lot of children",FINISH:function(e){e.getService(zu.EFFECTS).addBuildingEffect(new Ku("Baby boom",wu.HUT,100,180)),e.getService(zu.EFFECTS).addBuildingEffect(new Ku("Baby boom",wu.HOUSE,100,180)),e.getService(zu.EFFECTS).addBuildingEffect(new Ku("Baby boom",wu.LONGHOUSE,100,180)),e.getService(zu.EFFECTS).addBuildingEffect(new Ku("Baby boom",wu.TUDOR_HOUSE,100,180))}},LIFE_CYCLE:{FAITH:100,FAITH_LEVEL:5,RELIGION:Du.NATURE,DESCRIPTION:"We pray for all live to thrive. 10% buff to natural sources for 5 years",FINISH:function(e){e.getService(zu.EFFECTS).addNatureEffect(new Ju("Life cycle",10,1800))}},HOLY_WAR:{FAITH:100,FAITH_LEVEL:5,RELIGION:Du.WAR,DESCRIPTION:"The only true faith must be spread at all cost. All troops buffed 10% for 5 years",FINISH:function(e){e.getService(zu.EFFECTS).addArmyEffect(new qu("Holy War",Lu.ALL,10,1800))}}}},As={GOLDEN_ITEMS:{GOLDEN_FISH_CHANCE:3e-4,GOLDEN_EGG_CHANCE:3e-4,GOLDEN_APPLE_CHANCE:3e-4,GOLDEN_FLEECE_CHANCE:3e-4},PERKS:{MOTIVATION_SPEECH:{DESCRIPTION:"Use your royal position to motivate people to harder work. 25% production upgrade for all buildings for 100 years or until reset (single use)",USAGES:0,MAX_USAGES:0,COST:20,RESET:function(e,n){},EFFECT:function(e,n){e.getService(zu.EFFECTS).addBuildingEffect(new Ku("Motivation speech",wu.ALL,25,36e3)),e.getService(zu.ROYAL).unlockCallback(n)}},ROYAL_PROPHECY:{DESCRIPTION:"Your royal blood allows prophets to look into the future. Unlocks certain research for each perk level (awarded immediately and after any soft reset or abdication)",USAGES:0,MAX_USAGES:3,COST:50,RESET:function(e,n){n.usages>=1&&e.getService(zu.RESEARCH).finishTech(Nu.FIRE),n.usages>=2&&e.getService(zu.RESEARCH).finishTech(Nu.COOKING),3===n.usages&&(e.getService(zu.RESEARCH).finishTech(Nu.BOW),e.getService(zu.RESEARCH).finishTech(Nu.HUNTING))},EFFECT:function(e,n){switch(n.usages){case 0:e.getService(zu.RESEARCH).finishTech(Nu.FIRE);break;case 1:e.getService(zu.RESEARCH).finishTech(Nu.COOKING);break;case 2:e.getService(zu.RESEARCH).finishTech(Nu.BOW),e.getService(zu.RESEARCH).finishTech(Nu.HUNTING)}e.getService(zu.ROYAL).unlockCallback(n)}},HERITAGE:{DESCRIPTION:"Your predecessors ruled better. You start with extra building (awarded after any soft reset or abdication)",USAGES:0,MAX_USAGES:2,COST:20,RESET:function(e,n){n.usages>=1&&e.getService(zu.FOREST).addBuilding(wu.GATHERER),2===n.usages&&e.getService(zu.VILLAGE).addBuilding(wu.WORKSHOP)},EFFECT:function(e,n){e.getService(zu.ROYAL).unlockCallback(n)}},ROYAL_ARCHIVES:{DESCRIPTION:"With archives unlocked we can schedule one more research to be worked on.",USAGES:0,MAX_USAGES:1,COST:50,RESET:function(e,n){e.getService(zu.RESEARCH).increaseTechQueueSize()},EFFECT:function(e,n){e.getService(zu.RESEARCH).increaseTechQueueSize(),e.getService(zu.ROYAL).unlockCallback(n)}},FAMILY_JEWELS:{DESCRIPTION:"Your predecessors left you with more riches. You start with extra resources (awarded after any soft reset or abdication)",USAGES:0,MAX_USAGES:3,COST:20,RESET:function(e,n){n.usages>=1&&(e.getService(zu.RESOURCES).increaseResource(Iu.LOG,20,"Royal",!0),e.getService(zu.RESOURCES).increaseResource(Iu.BRUSHWOOD,10,"Royal",!0),e.getService(zu.RESOURCES).increaseResource(Iu.BERRY,20,"Royal",!0),e.getService(zu.RESOURCES).increaseResource(Iu.MUSHROOM,20,"Royal",!0)),n.usages>=2&&(e.getService(zu.RESOURCES).increaseResource(Iu.STONE,30,"Royal",!0),e.getService(zu.RESOURCES).increaseResource(Iu.PLANK,20,"Royal",!0),e.getService(zu.RESOURCES).increaseResource(Iu.FUEL,5,"Royal",!0),e.getService(zu.RESOURCES).increaseResource(Iu.LEATHER,5,"Royal",!0)),3===n.usages&&e.getService(zu.RESOURCES).increaseResource(Iu.COINS,300,"Royal",!0)},EFFECT:function(e,n){e.getService(zu.ROYAL).unlockCallback(n)}},KING_OF_THE_FOREST:{DESCRIPTION:"You rule everything in the forests. You start with a few forest buildings unlocked (awarded after any soft reset or abdication)",USAGES:0,MAX_USAGES:1,COST:50,RESET:function(e,n){1===n.usages&&(e.getService(zu.FOREST).addBuilding(wu.GATHERER),e.getService(zu.FOREST).addBuilding(wu.FORESTER),e.getService(zu.FOREST).addBuilding(wu.HUNTER_LODGE),e.getService(zu.LAND).takeLand(2*ys.FOREST.GATHERER.SIZE+ys.FOREST.HUNTER_LODGE.SIZE))},EFFECT:function(e,n){e.getService(zu.ROYAL).unlockCallback(n)}},KING_OF_THE_PEOPLE:{DESCRIPTION:"People love you unconditionally. You start with House unlocked and built instead of huts (awarded after any soft reset or abdication)",USAGES:0,MAX_USAGES:1,COST:50,RESET:function(e,n){1===n.usages&&(e.getService(zu.RESEARCH).finishTech(Nu.HOUSE),e.getService(zu.VILLAGE).replaceWithHouses())},EFFECT:function(e,n){e.getService(zu.ROYAL).unlockCallback(n)}},KING_OF_THE_SEAS:{DESCRIPTION:"Seas obey your will. You start with sea unlocked, pier building built, one boat and 120 coins",USAGES:0,MAX_USAGES:1,COST:100,RESET:function(e,n){e.getService(zu.GAME).enable(_u.SEA),e.getService(zu.GAME).enable(_u.NAVY),e.getService(zu.SEA).addBuilding(wu.PIER),e.getService(zu.NAVY).addShip(Lu.BOAT),e.getService(zu.RESOURCES).increaseResource(Iu.COINS,120,"Royal",!0)},EFFECT:function(e,n){e.getService(zu.ROYAL).unlockCallback(n)}},KING_OF_THE_WAR:{DESCRIPTION:"War is your game. You start with military unlocked and small army (awarded after any soft reset or abdication)",USAGES:0,MAX_USAGES:1,COST:50,RESET:function(e,n){e.getService(zu.GAME).enable(_u.ARMY),e.getService(zu.GAME).enable(_u.FORT);var t=e.getService(zu.ARMY);e.getService(zu.FORT).addBuilding(wu.BARRACKS),e.getService(zu.FORT).addBuilding(wu.BARRACKS),e.getService(zu.LAND).takeLand(2*ys.FORT.BARRACKS.SIZE),t.addMilitia(20)},EFFECT:function(e,n){e.getService(zu.ROYAL).unlockCallback(n)}},CALL_TO_ARMS:{DESCRIPTION:"We will fight till the last of us drops dead. You can convert up to 10 villagers to militia (single use)",USAGES:0,MAX_USAGES:0,COST:10,RESET:function(e,n){},EFFECT:function(e,n){var t=e.getService(zu.RESOURCES),l=e.getService(zu.MODAL),i=e.getService(zu.ARMY),r=e.getService(zu.ROYAL);l.open(ju.INPUT),l.setModalText("How many villagers would you like to convert to militia?<br>"+t.getPeople()+" recruits available");var o=l.registerForValueResponse().subscribe(function(e){if(o.unsubscribe(),null!==e&&!isNaN(e)){var u=t.getPeople();if(u>10)return void l.info("You can only convert up to 10 villagers");if(i.getFreeBarracks()<e)return void l.info("Not enough barracks space for so many militia");if(e>u)return void l.info("Not enough recruits");if(e<=0)return void l.info("Invalid amount of recruits");if(r.getRoyalPoints()<n.cost)return void l.info("Not enough royal points");t.removeRecruit(Number(e)),i.addMilitia(Number(e)),r.unlockCallback(n)}})}},UNITE_WITH_THE_PEOPLE:{DESCRIPTION:"You step down from your throne and live with others. Permanent 20% upgrade to all buildings (persists through soft resets and abdications)",USAGES:0,MAX_USAGES:0,COST:100,RESET:function(e,n){},EFFECT:function(e,n){e.getService(zu.EFFECTS).addBuildingEffect(new Ku("Unite with the people",wu.ALL,20,es.ROYAL)),e.getService(zu.ROYAL).unlockCallback(n)}},JESTER:{DESCRIPTION:"You hired jester to entertain you but who knows what can you expect from him? Jester will pick random unlocked resource (except coins) and fill it to max storage. Each time he fills resource or picks already full resource he has 50% chance to pick another one (single use)",USAGES:0,MAX_USAGES:0,COST:25,RESET:function(e,n){},EFFECT:function(e,n){for(var t=Array.from(e.getService(zu.RESOURCES).getResources().values()).filter(function(e){return e.isVisible()&&e.resource!==Iu.COINS});;){var l=t[Qu.randomBetween(0,t.length-1)];if(l.amount<l.limit?(l.amount=l.limit,e.getService(zu.LOG).success("Jester filled "+Vu.prepareResourceName(l.resource)+" storage!")):e.getService(zu.LOG).warning("Jester couldn't fill "+Vu.prepareResourceName(l.resource)+" storage!"),Qu.chance(.5))break}e.getService(zu.ROYAL).unlockCallback(n)}},ROYAL_ORDERS:{DESCRIPTION:"Your people work harder when you give them orders. Your initial crafting queue is increased by 1 for each perk level",USAGES:0,MAX_USAGES:5,COST:10,RESET:function(e,n){n.usages>0&&e.getService(zu.CRAFTING).increaseCraftingQueueSize(n.usages)},EFFECT:function(e,n){e.getService(zu.CRAFTING).increaseCraftingQueueSize(1),e.getService(zu.ROYAL).unlockCallback(n)}}}},Ns={getSeaEvent:function(e){var n=Object.entries(this.SEA_EVENTS).find(function(n){return n[0]===Bu[e]});if(n)return n[1];console.warn("Invalid sea event: "+e)},KING_DEATH_CHANCE:.02,REGIONS:[{ID:0,PATH:"m 126.49907,133.07398 7.34991,7.88445 11.67185,8.93323 4.23333,15.875 11.37709,2.64584 7.14375,8.46666 0.26458,8.59896 13.89063,3.96875 15.08125,-9.525 -1.19063,-16.40417 9.78958,-4.36562 11.2448,5.68854 11.77395,-5.42396 17.33021,3.83646 3.57188,-11.50937 -7.80521,-10.58334 0.66146,-10.45104 7.40833,-7.14375 0.79375,-5.15937 -6.48229,-1.32292 -2.24896,-7.40833 -10.05417,-5.29167 -9.12812,3.96875 -1.71979,-6.21771 1.45521,-8.069789 0.66145,-5.89643 -6.04761,-5.858629 -11.90625,-0.944941 -15.11905,5.669645 -13.08608,0.871196 -12.96258,5.345393 -10.28987,7.617185 -5.07812,-7.750818 -10.55715,5.211754 -6.5481,6.681744 8.68626,10.15624 -7.75082,0.53454 z",LAND:500,FOREST:500,MOUNTAINS:100,CENTER:{x:187,y:127},NEIGHBOURS:[-1,1,2,13],WEALTH:0,HARBOUR:!0,TROOPS:[]},{ID:1,PATH:"m 126.49907,133.07398 -24.13484,-2.04836 -6.013569,-14.96709 -11.49259,-7.61718 4.677217,-1.33635 5.479026,-16.971615 -3.608139,-3.073598 3.741775,-19.510677 -2.405428,-3.340867 13.497118,-6.414468 11.22531,10.15624 11.09169,-3.073598 5.21176,5.211754 10.55714,-4.409945 2.53906,1.336347 4.00905,5.211754 -7.61719,5.479026 21.19488,15.545464 -10.28987,7.617183 -5.07812,-7.750816 -10.55715,5.211754 -6.5481,6.681742 8.68626,10.15624 -7.75082,0.53454 -6.41447,17.37252",LAND:80,FOREST:100,MOUNTAINS:0,CENTER:{x:116,y:97},NEIGHBOURS:[-1,0,2,3,4,7,13,15],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:2,PATH:"m 126.49907,133.07398 -24.13484,-2.04836 0.4009,8.01809 -21.782464,-3.60814 -12.828937,12.96257 v 8.95353 l -11.893494,18.04069 -0.80181,16.83798 19.510677,-3.20723 14.03165,-4.67722 2.138156,-10.28988 9.488072,2.40543 6.949,-8.15172 5.61266,-0.80181 1.46999,12.82894 0.13363,11.49259 3.87541,0.53454 3.87541,-3.34087 3.20723,-9.75534 -0.53454,-8.81989 9.62171,2.13815 -6.28084,-10.28987 6.5481,-11.75986 -1.25576,-9.57787 z",LAND:80,FOREST:100,MOUNTAINS:0,CENTER:{x:100,y:155},NEIGHBOURS:[-1,0,1,3,5],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:3,PATH:"m 56.260235,175.39236 -5.233451,-16.73165 -9.827379,-12.28422 11.433778,-11.43378 1.039435,-11.2448 4.346725,-8.59895 0.566965,-9.92188 6.803573,-0.56696 V 92.703868 l 15.119045,1.700893 10.897249,-7.344976 3.608138,3.073598 -5.479026,16.971617 -4.677217,1.33635 11.49259,7.61718 6.01357,14.96709 0.4009,8.01809 -21.782464,-3.60814 -12.828937,12.96257 v 8.95353 z",LAND:20,FOREST:60,MOUNTAINS:0,CENTER:{x:71,y:125},NEIGHBOURS:[1,2,4,5],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:4,PATH:"m 41.199405,146.37649 -10.997948,-3.99191 -13.363477,-1.33635 4.577637,-11.0537 -3.508559,-16.87597 10.429075,-11.27348 6.676174,-23.33792 1.469982,-7.483546 14.83346,3.741772 2.405425,-8.285356 -1.202711,-5.879928 12.160763,-1.603618 7.617179,8.151722 8.953529,6.548102 13.898015,-6.1472 -3.741774,19.510677 -10.897251,7.344976 -15.119043,-1.700895 v 11.906254 l -6.803573,0.56696 -0.566965,9.92188 -4.346725,8.59895 -1.039435,11.2448 z",LAND:30,FOREST:60,MOUNTAINS:0,CENTER:{x:48,y:98},NEIGHBOURS:[1,3,5,6,7],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:5,PATH:"m 6.2808339,146.92816 -14.9670935,3.74177 6.2808339,12.02713 2.00452142,12.6953 -10.82441572,8.28536 0.534539,6.68174 8.9535291,6.949 12.1607629,0.66818 5.479026,8.01808 7.082642,5.07812 h 7.082642 l 0.400905,-10.0226 10.958049,-1.87089 6.013566,3.47451 7.082642,-2.93997 0.935442,-7.48355 0.80181,-16.83798 -5.233451,-16.73165 -9.827379,-12.28422 -10.997948,-3.99191 -13.363477,-1.33635 z",LAND:40,FOREST:70,MOUNTAINS:0,CENTER:{x:25,y:175},NEIGHBOURS:[-1,2,3,4,6,25],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:6,PATH:"M 16.83798,141.04823 6.2808339,146.92816 -0.13363471,129.0211 -12.828937,117.39488 l 4.0090427,-7.88446 -9.3544327,-9.48806 9.0871631,-4.810855 -4.2763121,-4.276313 0.133635,-15.234361 10.2898762,-5.746295 10.9580504,-0.935445 1.0690783,-7.349911 3.7417731,-6.414468 8.819894,3.207234 2.939965,4.009044 1.603617,-2.939966 7.483547,-1.603618 2.806329,13.096208 -1.469982,7.483544 -6.676174,23.337922 -10.429075,11.27348 3.508559,16.87597 z",LAND:30,FOREST:60,MOUNTAINS:0,CENTER:{x:10,y:92},NEIGHBOURS:[-1,4,5,7,25,106],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:7,PATH:"M 36.482289,71.023614 33.67596,57.927406 26.192413,59.531024 24.588796,62.47099 21.648831,58.461946 12.828937,55.254712 10.824416,52.314747 7.4835466,48.706608 6.8153729,34.674958 19.91158,32.002264 l 9.888972,1.603616 4.81085,-10.289877 4.409948,3.474504 5.746295,1.469982 14.03165,-4.543581 10.423512,5.879928 16.169806,0.133636 4.276313,9.220798 7.082641,-2.405425 3.474503,2.80633 1.20271,6.815372 -7.349906,5.746295 -1.336353,12.294399 2.405428,3.340867 -13.898017,6.1472 -8.953527,-6.548102 -7.617179,-8.151722 -12.160763,1.603618 1.202711,5.879928 -2.405425,8.285356 z",LAND:30,FOREST:60,MOUNTAINS:0,CENTER:{x:56,y:44},NEIGHBOURS:[-1,1,4,6,15,18,106],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:8,PATH:"m 130.40178,245.02827 -7.37053,9.26042 -11.33929,2.07887 -2.26785,7.18154 1.32291,11.15031 6.61459,6.42559 -3.96875,9.82737 -6.23661,1.13395 0.94494,2.64583 3.59077,1.70087 6.61459,-2.64583 1.13392,-3.77976 6.23661,-1.7009 7.55953,-0.94493 3.59077,-5.48066 1.88988,-1.13392 6.61458,1.13392 10.01637,-4.72469 6.99256,6.99257 5.85863,-8.12649 -5.10268,-6.04764 v -10.01636 l 2.26786,-7.9375 -7.37053,-6.23661 -11.1503,-1.88988 -5.29167,6.23661 -2.83482,-5.85863 -6.61458,-6.04762 z",LAND:40,FOREST:50,MOUNTAINS:0,CENTER:{x:138,y:265},NEIGHBOURS:[-1,9,10,11],WEALTH:0,HARBOUR:!0,TROOPS:[]},{ID:9,PATH:"m 165.36458,252.02083 6.22245,-3.26298 4.94449,-4.94449 8.41899,0.66817 5.61266,-5.21175 1.46998,-3.87541 1.73726,0.80181 -0.13364,2.80633 2.27179,4.27631 4.54358,0.66817 2.13816,4.54359 4.54358,0.4009 2.13816,4.94449 1.33635,7.61718 -0.66818,6.1472 -3.87541,4.67722 2.40543,0.93544 2.67269,-0.93544 2.6727,1.33633 -0.13364,2.80633 -4.94448,1.20272 -4.54358,-1.33633 -3.34087,-3.60815 -3.0736,-1.20272 -3.60814,2.53908 -0.53454,5.07812 3.20723,3.74176 3.87541,0.93544 -0.13363,3.8754 -4.14268,1.0691 -6.94901,1.46997 -7.21627,-1.73725 -5.47903,-3.8754 -5.61266,0.66817 -8.84536,-1.09132 5.85863,-8.12649 -5.10268,-6.04764 v -10.01636 z",LAND:40,FOREST:40,MOUNTAINS:10,CENTER:{x:186,y:263},NEIGHBOURS:[-1,8,11],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:10,PATH:"m 111.69196,296.43302 -4.51688,2.97241 -4.94449,1.60362 -1.87088,4.40994 v 6.68173 l 3.4745,-1.06907 -0.26727,4.81084 1.06908,4.9445 5.47902,2.93995 -0.8018,5.07812 5.34539,-1.46997 -1.06908,9.75534 -5.07812,4.6772 0.4009,3.47451 3.34087,0.13364 1.46998,-2.93997 5.87993,-1.20272 2.93997,4.40995 5.61266,2.00453 0.66817,5.21177 6.5481,2.53904 2.40543,-2.67269 5.87993,-2.00453 -0.40091,-4.40994 6.54811,-1.60362 -2.00452,-4.40994 1.87088,-3.34087 4.14268,-4.67722 2.13816,-5.87992 -8.01809,-3.47451 -1.73725,-6.28083 1.87089,-7.88445 -0.26727,-5.47902 0.4009,-6.94902 5.07812,-3.60815 -1.33635,-6.01355 -6.61088,-4.82918 -6.61458,-1.13392 -1.88988,1.13392 -3.59077,5.48066 -7.55953,0.94493 -6.23661,1.7009 -1.13392,3.77976 z",LAND:20,FOREST:50,MOUNTAINS:20,CENTER:{x:130,y:316},NEIGHBOURS:[-1,8,11],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:11,PATH:"m 200.58578,287.64555 3.20723,4.67723 6.41447,5.47901 0.13363,5.47905 4.54359,1.06907 1.06908,7.88445 3.60814,8.95353 -3.60814,5.61266 -4.40995,-1.60361 -4.00904,-0.53454 -0.80181,4.00905 -3.47451,4.14266 -11.89349,-0.4009 -0.13363,-4.54358 2.80633,-1.73726 v -4.00904 l -5.7463,-0.4009 -1.60362,3.60815 -2.53906,4.94448 -6.01356,2.4054 -4.14268,-5.34537 1.73725,-5.21176 5.47903,-5.74631 0.13363,-5.34537 -4.54358,-3.74177 -5.47903,4.94448 -0.53453,7.34992 -2.13816,7.88445 -6.94901,-2.80633 -5.74629,1.73725 -8.01809,-3.47451 -1.73725,-6.28083 1.87089,-7.88445 -0.26727,-5.47902 0.4009,-6.94902 5.07812,-3.60815 -1.33635,-6.01355 -6.61088,-4.82918 10.01637,-4.72469 6.99256,6.99257 8.84536,1.09132 5.61266,-0.66817 5.47903,3.8754 7.21627,1.73725 z",LAND:70,FOREST:20,MOUNTAINS:0,CENTER:{x:188,y:303},NEIGHBOURS:[-1,8,9,10],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:12,PATH:"m 263.52775,322.65786 0.26727,9.62171 -7.48355,5.3454 -1.06907,5.87992 3.74177,4.27632 h 7.7508 l 8.0181,6.94899 1.33635,6.68174 8.81989,2.40543 4.27633,-1.60361 10.4235,1.60361 1.33635,-4.2763 -6.94901,-5.87994 -0.53454,-5.87992 4.81084,2.40541 6.94901,0.53454 3.74177,-5.87992 -4.00902,-5.87994 -6.68176,-2.67269 4.54358,-5.07812 -1.87087,-7.75081 -9.08716,-2.67269 -5.07813,3.20723 -6.41447,-6.1472 -8.0181,0.8018 z",LAND:30,FOREST:60,MOUNTAINS:0,CENTER:{x:282,y:340},NEIGHBOURS:[-1],WEALTH:0,HARBOUR:!0,TROOPS:[]},{ID:13,PATH:"M 177.41392,87.905422 190.5,87.034226 l 15.11905,-5.669645 11.90625,0.944941 6.04761,5.858631 c -1.13392,0.377976 4.15774,-1.511905 4.15774,-1.511905 v -3.401785 l -6.99256,-7.9375 2.64583,-9.449403 h 6.04763 l -1.32292,-6.425597 -15.11905,-2.456844 -12.09524,-6.614583 -13.79613,3.023809 -7.18155,-8.882441 -9.82738,-4.157739 0.37798,-10.016368 -3.59077,-8.126488 -15.49703,-3.590774 -17.76488,13.040178 -0.37797,14.363097 1.32291,13.229166 9.76602,6.42525 2.53906,1.336347 4.00905,5.211752 -7.61719,5.479026 21.19488,15.545464 z",LAND:80,FOREST:40,MOUNTAINS:50,CENTER:{x:169,y:61},NEIGHBOURS:[-1,0,1,15,14],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:14,PATH:"m 228.10863,59.441963 7.18154,-1.700892 5.10268,2.834822 6.4256,-2.456847 -5.10268,-6.236607 -6.99256,-4.535712 10.20536,-1.133931 7.55952,3.590775 2.07887,-6.047619 5.10268,-6.236607 -0.18899,-7.559524 -8.12649,-8.126488 -12.28422,-2.834821 0.56696,-7.181548 -16.06399,1.322917 -26.45833,-2.456846 -6.42559,-5.6696423 -15.875,3.2127975 -7.9375,13.9851188 3.59077,8.126488 -0.37798,10.016368 9.82738,4.157739 7.18155,8.882441 13.79613,-3.023809 12.09524,6.614583 z",LAND:50,FOREST:80,MOUNTAINS:0,CENTER:{x:210,y:32},NEIGHBOURS:[-1,13,15,16],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:15,PATH:"m 85.392611,29.730472 -0.536956,-8.275115 13.985118,-2.267858 9.449407,-5.291666 4.91369,-7.7485118 12.47321,0.9449405 V -4.0580357 l 12.6622,-2.0788691 12.85119,4.7247023 -0.94494,5.6696428 3.96875,2.8348214 6.80358,-3.779762 8.12648,2.2678572 5.66965,2.6458333 -7.9375,13.9851188 -15.49703,-3.590774 -17.76488,13.040178 -0.37797,14.363097 1.32291,13.229166 9.76602,6.42525 -10.55714,4.409943 -5.21176,-5.211752 -11.09169,3.073596 -11.22531,-10.156237 -13.497121,6.414465 1.336355,-12.294399 7.349906,-5.746295 -1.20271,-6.815372 -3.474505,-2.80633 -7.082639,2.405425 z",LAND:50,FOREST:60,MOUNTAINS:50,CENTER:{x:119,y:32},NEIGHBOURS:[1,7,13,14,16,17,18],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:16,PATH:"m 138.33928,-6.1369048 -1.13392,-15.6860122 14.93005,-5.102678 3.2128,5.291667 15.30804,-5.858632 5.29166,-7.9375 12.09524,5.10268 15.30804,-12.662204 13.79613,0.566965 5.10268,10.772322 4.34672,-0.377975 4.34673,-5.291667 4.7247,3.023809 -2.07887,8.315475 1.88988,10.583334 7.9375,12.0952374 -12.47321,9.4494048 -7.37054,6.9925598 -26.45833,-2.456846 -6.42559,-5.6696423 -15.875,3.2127975 -5.66965,-2.6458333 -8.12648,-2.2678572 -6.80358,3.779762 -3.96875,-2.8348214 0.94494,-5.6696428 z",LAND:30,FOREST:30,MOUNTAINS:10,CENTER:{x:194,y:-12},NEIGHBOURS:[-1,14,15,17,108],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:17,PATH:"m 121.38705,-45.729911 -13.47485,-20.883184 -10.016368,9.827382 -14.174107,2.078868 0.755951,8.882441 6.803573,3.96875 3.96875,11.339285 -5.669643,6.047619 0.755952,9.449405 6.614581,7.9374999 0.188989,8.8824402 6.236612,3.0238094 6.04762,-2.6458332 3.77976,3.9687499 12.47321,0.9449405 V -4.0580357 l 12.6622,-2.0788691 -1.13392,-15.6860122 1.96547,-11.320386 z",LAND:20,FOREST:60,MOUNTAINS:50,CENTER:{x:114,y:-21},NEIGHBOURS:[15,16,18,19,20,108],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:18,PATH:"M 0.75595238,29.581845 -3.7797618,20.888392 -13.418155,15.029762 -9.8273808,6.5252975 0.56696427,3.8794642 6.8035714,8.9821426 5.6696427,-1.6011906 l 5.6696433,-2.6458333 4.157738,3.40178565 11.339285,-7.55952375 4.157739,-7.181547 13.229166,-1.133929 7.181546,9.8273808 5.858632,-4.9136908 -2.456844,-5.291666 10.583333,2.267857 5.102677,6.9925592 6.614584,-10.3943452 13.229166,3.212798 6.614583,7.9374997 0.188989,8.8824404 6.23661,3.0238094 6.04762,-2.6458332 3.77976,3.9687499 -4.91369,7.7485118 -9.449407,5.291666 -13.985118,2.267858 0.536956,8.275115 L 69.222807,29.596836 58.799295,23.716908 44.767645,28.260489 39.02135,26.790507 34.611402,23.316003 29.800552,33.60588 19.91158,32.002264 6.8153729,34.674958 Z",LAND:20,FOREST:80,MOUNTAINS:30,CENTER:{x:48,y:7},NEIGHBOURS:[7,15,17,19,22,106],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:19,PATH:"m 30.994048,-15.586309 -9.638393,-5.858632 -3.02381,-8.598956 -5.386161,-0.472472 2.173363,-3.590774 4.724703,-1.228421 0.377976,-6.331103 4.252232,-7.559522 5.669642,1.41741 7.087055,-1.795388 7.654018,-4.346726 4.630208,3.779763 7.559524,-1.417412 4.157737,-3.779761 3.685267,3.496281 1.228424,5.38616 3.401784,-0.850448 3.02381,-5.008184 4.535715,-2.267857 6.614583,-0.09449 0.755949,8.882441 6.803575,3.96875 3.96875,11.339285 -5.669645,6.047619 0.755954,9.449405 -13.229166,-3.212798 -6.614584,10.3943452 -5.102677,-6.9925592 -10.583333,-2.267857 2.456844,5.291666 -5.858632,4.9136908 -7.181546,-9.8273808 z",LAND:20,FOREST:60,MOUNTAINS:40,CENTER:{x:54,y:-32},NEIGHBOURS:[17,18,20,21,22],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:20,PATH:"m 109.80208,-78.519342 -8.23966,-5.473369 -4.543584,-9.354434 -10.557144,-1.469982 -10.557148,5.078121 -3.340867,6.68174 -11.49259,-0.668176 -4.276312,-7.082642 -13.096208,-0.400904 -7.082642,7.349913 -3.608139,6.681737 -13.363476,-5.078122 -8.018086,8.819896 -2.5390601,9.755339 -10.02260723,6.280832 3.47450383,7.082642 8.8198945,3.207234 8.862771,5.44285 4.252232,-7.559522 5.669642,1.41741 7.087055,-1.795388 7.654018,-4.346726 4.630208,3.779763 7.559524,-1.417412 4.157737,-3.779761 3.685267,3.496281 1.228424,5.38616 3.401784,-0.850448 3.02381,-5.008184 4.535715,-2.267857 6.614583,-0.09449 14.174104,-2.078874 10.016371,-9.827382 z",LAND:20,FOREST:40,MOUNTAINS:20,CENTER:{x:53,y:-68},NEIGHBOURS:[-1,17,19,21,33,108],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:21,PATH:"m -12.428033,-35.483294 -4.944486,-3.340867 -7.216277,0.400904 -4.409947,-4.142676 -1.603618,-7.082645 3.207234,-4.81085 7.884452,-2.672696 8.953529,3.608139 3.8754078,-4.81085 5.74629489,0.935442 3.47450381,7.082642 8.8198945,3.207234 8.862771,5.44285 -0.377976,6.331103 -4.724703,1.228421 -2.173363,3.590774 -8.1348325,-0.02244 -7.884451,5.61266 -4.8108512,-3.60814 0.5345388,-5.211754 z",LAND:10,FOREST:10,MOUNTAINS:20,CENTER:{x:-4,y:-42},NEIGHBOURS:[19,20,22,31,32,33],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:22,PATH:"m 12.945684,-30.516369 -8.1348325,-0.02244 -7.884451,5.61266 -4.8108514,-3.60814 0.534539,-5.211754 -5.0781211,-1.737252 -3.340869,5.61266 0.400904,6.280834 -13.22984,0.133635 -5.345391,5.34539 -9.621702,0.400904 -12.160766,5.345391 -3.741772,6.5481032 0.668174,7.7508163 -4.009044,5.2117558 -7.082641,2.0045214 3.608138,2.9399643 11.091685,6.548104 3.608139,9.888971 8.285356,-0.534537 6.414468,3.608138 6.815373,-0.53454 -0.400905,8.285356 9.354434,3.207234 3.727387,7.811127 6.425596,-6.236608 6.8035709,-3.212798 -0.7559524,-7.9375 5.66964288,-3.401785 -4.53571418,-8.693453 -9.6383932,-5.85863 3.5907742,-8.5044645 10.39434507,-2.6458333 6.23660713,5.1026782 -1.1339287,-10.583333 5.6696433,-2.6458333 4.157738,3.40178565 11.339285,-7.55952375 4.157739,-7.181547 -9.638393,-5.858632 -3.02381,-8.598956 z",LAND:30,FOREST:50,MOUNTAINS:20,CENTER:{x:-25,y:2},NEIGHBOURS:[18,19,21,23,30,31,106],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:23,PATH:"m -17.386905,50.370536 -3.727387,-7.811127 -9.354434,-3.207234 0.400905,-8.285356 -6.815373,0.53454 -6.414468,-3.608138 -8.285356,0.534537 -3.608139,-9.888971 -11.091685,-6.548104 -12.828936,3.34087 -8.151723,7.617181 -0.801806,10.690781 -8.285356,2.405425 1.069078,6.013564 -11.893495,6.414468 2.27179,2.672697 6.414471,-0.801809 -2.672701,8.953529 -5.21175,6.548104 8.819893,9.087164 3.059332,6.331924 6.614581,-0.755954 5.858634,-10.961307 3.779758,-11.150298 10.016371,2.645833 14.174108,-0.566962 8.504462,8.126487 14.363096,-1.700893 13.418154,-7.181548 z",LAND:30,FOREST:80,MOUNTAINS:0,CENTER:{x:-62,y:44},NEIGHBOURS:[22,24,28,29,30,106],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:24,PATH:"m -91.848214,135.22619 -10.016366,-6.80357 -2.26786,-8.50447 -10.58333,-7.9375 6.2366,-7.9375 12.851195,2.64584 8.504465,-10.583337 -6.992561,-7.74851 -0.377976,-6.992562 6.614583,-0.755952 5.858632,-10.961309 3.77976,-11.150298 10.016371,2.645833 14.174108,-0.566962 8.504462,8.126487 14.363096,-1.700893 -7.181548,7.748511 -2.267857,12.662204 1.889881,10.77232 -9.449405,5.858628 -4.157737,8.50447 5.669642,7.37053 -7.937499,7.18155 -3.212799,6.23661 -4.724701,3.40178 -13.607143,-3.59077 -9.07143,3.59077 z",LAND:40,FOREST:90,MOUNTAINS:40,CENTER:{x:-68,y:97},NEIGHBOURS:[23,25,26,28,106,109],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:25,PATH:"m -11.22532,183.67772 -14.855037,-2.33844 -17.197917,2.26786 -3.023809,-6.04762 5.669643,-3.96875 -7.370535,-6.61458 -12.851191,-1.51191 -1.889882,-10.39434 5.858632,-4.34673 4.157739,-11.52827 -5.10268,-5.85863 3.212799,-6.23661 7.937499,-7.18155 9.827382,-1.70089 0.755952,-7.37053 10.016368,-1.7009 7.90603,-9.12347 9.3544327,9.48806 -4.0090427,7.88446 12.69530229,11.62622 6.41446861,17.90706 -14.9670935,3.74177 6.2808339,12.02713 2.00452142,12.6953 z",LAND:30,FOREST:80,MOUNTAINS:20,CENTER:{x:-29,y:146},NEIGHBOURS:[-1,5,6,24,26,106],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:26,PATH:"m -60.854166,165.46428 -11.528274,8.31548 -4.913691,12.47321 -4.724701,13.04018 -16.063989,0.75595 -14.174109,4.72471 -9.63839,-5.85863 -2.83482,-9.6384 -8.50447,-11.52827 1.32292,-5.85863 0.56697,-10.96131 10.01636,-8.12649 16.63096,-3.40178 -1.13393,-8.12649 4.34672,1.13393 2.834826,4.53571 3.96875,2.83482 3.590774,-6.61458 -0.755954,-7.9375 6.614583,1.5119 9.07143,-3.59077 13.607143,3.59077 4.724701,-3.40178 5.10268,5.85863 -4.157739,11.52827 -5.858632,4.34673 z",LAND:30,FOREST:60,MOUNTAINS:30,CENTER:{x:-96,y:170},NEIGHBOURS:[-1,24,25,27,109],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:27,PATH:"m -133.23661,177.74851 -6.14445,7.53282 0.93545,7.75082 1.87088,10.15624 -4.54358,9.75534 -8.95353,-3.60814 0.26727,-6.1472 -3.87541,-5.74629 2.13816,-5.61266 -5.34539,0.4009 -5.07812,6.41447 -0.13364,6.54811 -8.68626,-2.53906 -8.01808,1.60361 -4.14268,-6.28083 2.6727,-5.61266 -6.28084,-0.93545 -3.87541,-7.88445 6.1472,-4.27631 4.00905,-9.2208 h 7.08264 l 2.40542,-7.61718 -1.73725,-4.27631 7.48355,-0.80181 3.60814,4.40995 1.73725,5.34539 6.41447,-8.95353 11.22532,-0.53454 2.93996,5.21176 7.76707,-1.90213 -0.56697,10.96131 z",LAND:20,FOREST:60,MOUNTAINS:0,CENTER:{x:-158,y:180},NEIGHBOURS:[-1,26,39,40,109],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:28,PATH:"m -180.86161,118.40625 0.75596,-10.20536 10.20535,-6.99256 -4.53571,-5.480652 10.96131,1.511903 5.48065,-0.944938 3.59078,-11.150299 16.81994,2.456844 5.29167,-8.693451 -3.96875,-3.96875 1.5119,-3.401785 8.12649,3.401785 6.42559,-1.700893 -0.18899,-8.88244 5.29167,4.157739 8.72048,-2.5679 8.819893,9.087162 3.059332,6.331926 0.377976,6.992562 6.992559,7.748508 -8.504465,10.583339 -12.851195,-2.64584 -6.2366,7.9375 10.58333,7.9375 -9.54722,7.96695 -7.27652,2.27925 -4.4037,-4.96972 -0.28353,-14.18749 -10.61059,6.01356 -1.6838,7.64391 -6.21548,5.63935 -11.19493,3.03235 -8.12649,-7.74851 -11.33929,4.15773 z",LAND:10,FOREST:60,MOUNTAINS:50,CENTER:{x:-130,y:100},NEIGHBOURS:[23,24,29,38,39,109],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:29,PATH:"m -154.40327,85.144342 -7.18155,-7.748511 2.26786,-8.315476 -10.96131,-9.449403 -1.88988,-13.04018 3.77976,-9.071427 6.61458,-8.693452 -2.07887,-9.071429 11.33929,6.236607 11.71726,0.377976 6.99256,-7.9375 -2.64583,-7.370536 10.58333,3.212798 6.23661,11.90625 10.77232,3.401786 10.205356,-5.669643 11.388283,-0.863468 -0.801804,10.690781 -8.285358,2.405425 1.069078,6.013564 -11.893495,6.414468 2.27179,2.672697 6.414471,-0.801809 -2.672701,8.953529 -5.21175,6.548104 -8.72048,2.5679 -5.29167,-4.157739 0.18899,8.882438 -6.42559,1.700895 -8.12649,-3.401785 -1.5119,3.401785 3.96875,3.96875 -5.29167,8.693449 z",LAND:30,FOREST:80,MOUNTAINS:20,CENTER:{x:-140,y:51},NEIGHBOURS:[-1,23,28,30,37,38,107],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:30,PATH:"m -59.467469,-5.8163777 -9.220798,-5.8799263 -12.294399,1.603617 -1.603618,-9.087164 4.009043,-4.009043 -6.147199,-2.939964 -7.750815,7.216276 -12.027135,-3.474503 -3.20723,-8.285357 -13.63075,7.483548 -3.20723,8.552625 -15.7689,4.8108514 1.60362,11.7598591 6.94901,4.0090428 -4.68553,5.1175267 10.58333,3.212798 6.23661,11.90625 10.77232,3.401786 10.205356,-5.669643 11.388283,-0.863468 8.151723,-7.617181 12.828936,-3.34087 -3.608138,-2.9399675 7.082641,-2.0045214 4.009044,-5.2117556 z",LAND:30,FOREST:50,MOUNTAINS:0,CENTER:{x:-104,y:-2},NEIGHBOURS:[22,23,29,31,32,36,37],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:31,PATH:"m -84.72444,-26.128858 13.630746,-4.276312 4.276312,-8.285356 -1.603616,-4.810852 5.34539,-1.870887 0.80181,8.018086 4.543581,0.267269 4.810852,-9.354434 22.317004,-3.207234 1.603618,7.082645 4.409947,4.142676 7.216277,-0.400904 4.944486,3.340867 -3.340869,5.612659 0.400904,6.280834 -13.22984,0.133635 -5.345391,5.34539 -9.621702,0.400904 -12.160766,5.345391 -3.741772,6.5481033 -9.220798,-5.8799263 -12.294399,1.603617 -1.603618,-9.087164 4.009043,-4.009043 z",LAND:20,FOREST:60,MOUNTAINS:50,CENTER:{x:-50,y:-28},NEIGHBOURS:[21,22,30,32],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:32,PATH:"m -64.946495,-102.83521 -1.069078,10.42351 -9.888971,5.879928 -5.34539,11.49259 -9.621705,1.336347 -2.138157,8.552627 6.414471,-0.801809 5.879928,3.474503 -2.939965,8.285355 -2.939963,12.561668 -10.156242,-1.870887 -3.207235,8.552624 -7.750818,4.276312 3.20723,8.285357 12.027137,3.474503 7.750813,-7.216276 13.630746,-4.276312 4.276312,-8.285356 -1.603616,-4.810852 5.34539,-1.870887 0.80181,8.018086 4.543581,0.267269 4.810852,-9.354434 22.317004,-3.207234 3.207234,-4.81085 7.884452,-2.672696 8.953529,3.608139 -3.427973,-6.663516 4.1577382,-10.583333 4.5357142,-7.559521 -6.9925594,-6.614581 -5.102679,-1.322919 -9.072777,-2.402073 -15.234365,0.267269 -12.561667,-1.603616 z",LAND:20,FOREST:40,MOUNTAINS:90,CENTER:{x:-57,y:-64},NEIGHBOURS:[21,30,31,33,34,35,36,52],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:33,PATH:"m 56.794775,-90.808084 0.846593,-10.200846 11.339287,-10.01637 -9.092728,-8.51199 -10.075318,-5.00147 -5.635252,-10.79329 -7.313215,1.72579 -1.716291,5.14658 -4.468898,3.86557 -14.384054,0.56892 -4.199661,-7.69708 -6.5002804,4.10109 -3.9743132,9.24176 -7.6666341,4.15346 0.6681736,7.75293 -7.1898919,3.9522 -4.819197,16.252975 5.102679,1.322917 6.9925594,6.614583 -4.5357142,7.559521 -4.1577382,10.583333 3.427973,6.663516 3.8754078,-4.81085 5.74629489,0.935442 10.02260701,-6.280832 2.5390603,-9.755339 8.018086,-8.819896 13.363476,5.078122 3.608139,-6.681737 7.082642,-7.349911 z",LAND:30,FOREST:50,MOUNTAINS:70,CENTER:{x:20,y:-101},NEIGHBOURS:[-1,20,21,32,34],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:34,PATH:"m 5.5949574,-127.62118 -12.8112346,-9.42453 -4.8108518,-9.6217 -10.95805,-2.6727 -5.879928,-10.42351 -9.354434,5.34539 -9.087165,9.88897 -16.83798,-4.00904 -5.612659,7.75082 9.888972,14.43255 2.672696,14.96709 -7.750818,8.55263 10.690781,12.828935 12.561667,1.603616 15.234365,-0.267269 9.072777,2.402073 4.819197,-16.252975 7.189892,-3.9522 -0.6681737,-7.75293 7.6666341,-4.15346 z",LAND:30,FOREST:60,MOUNTAINS:50,CENTER:{x:-34,y:-117},NEIGHBOURS:[-1,32,33,35],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:35,PATH:"m -69.757345,-140.78748 -4.276315,-2.53906 -8.819893,1.46998 -4.142676,8.68626 -7.216278,0.53454 -2.004523,4.94448 -9.88897,1.87089 1.06908,6.28083 7.349908,7.34992 -1.870885,8.81989 7.349911,6.280834 3.741774,8.552624 6.414468,3.207234 0.801812,10.289876 5.345388,-11.49259 9.888971,-5.879928 1.069078,-10.42351 7.750818,-8.55263 -2.672696,-14.96709 z",LAND:20,FOREST:10,MOUNTAINS:20,CENTER:{x:-81,y:-112},NEIGHBOURS:[-1,32,34,52,53],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:36,PATH:"m -121.34037,-23.188894 -6.949,-5.879929 -1.06908,-12.561668 -8.28535,-0.267269 -4.54359,5.34539 -5.61266,-10.423511 5.34539,-10.156243 12.2944,-4.81085 -4.27631,-8.285355 0.53454,-16.570712 4.27631,4.009044 1.87089,5.879928 6.68174,5.078121 9.35443,-4.81085 6.94901,4.009041 3.20723,-7.483546 10.690783,6.414468 -2.138159,8.552627 6.414471,-0.801809 5.879928,3.474503 -2.939965,8.285355 -2.939963,12.561668 -10.15624,-1.870887 -3.207237,8.552624 -7.750818,4.276312 z",LAND:20,FOREST:60,MOUNTAINS:10,CENTER:{x:-114,y:-52},NEIGHBOURS:[30,32,37,50,51,52],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:37,PATH:"m -192.57887,9.1711303 7.37054,2e-7 4.53571,-4.9136905 7.9375,2.8348215 5.29167,3.5907735 5.85863,-3.4017854 5.48066,0.9449403 3.96875,-7.37053545 -6.23661,-5.66964285 -2.07887,-5.2916666 6.42559,0.3779764 4.91369,-3.7797624 -0.18898,-6.236607 h 7.55952 l 6.23661,-3.212797 1.70089,-5.480656 5.5142,-0.631322 6.949,5.879929 -3.20723,8.552625 -15.7689,4.8108514 1.60362,11.7598591 6.94901,4.0090428 -4.68553,5.1175267 2.64583,7.370536 -6.99256,7.9375 -11.71726,-0.377976 -11.33929,-6.236607 -16.28698,1.423383 -20.31248,-8.552624 7.30631,-0.241295 z",LAND:10,FOREST:30,MOUNTAINS:10,CENTER:{x:-146,y:10},NEIGHBOURS:[29,30,36,49,50,107],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:38,PATH:"m -210.91071,87.979162 -16.80293,-8.536559 5.3454,-13.898015 17.35916,-9.795427 17.53764,3.566014 15.30329,-12.724403 1.88988,13.04018 10.96131,9.449403 -2.26786,8.315476 7.18155,7.748511 -3.59078,11.150301 -5.48065,0.944938 -10.96131,-1.511903 4.53571,5.480652 -10.20535,6.99256 -12.66221,-5.85863 -3.0238,-12.095238 -10.20536,-10.961309 z",LAND:30,FOREST:60,MOUNTAINS:0,CENTER:{x:-183,y:80},NEIGHBOURS:[-2,28,29,47,107],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:39,PATH:"m -249.46428,177.74851 0.75595,-13.41816 16.06399,-11.33928 -5.10268,-10.01637 -5.85863,-12.09524 17.19791,-4.53571 2.64584,-7.74851 -6.4256,-8.12649 6.23661,-2.26786 6.99256,7.9375 -1.51191,12.47321 13.41816,-6.42559 7.55952,-10.58333 16.63095,6.80357 6.04762,11.33928 11.33929,-4.15773 8.12649,7.74851 -3.02381,14.74107 5.09295,10.0761 -6.41447,8.95353 -1.73725,-5.34539 -3.60814,-4.40995 -7.48355,0.80181 1.73725,4.27631 -2.40542,7.61718 h -7.08264 l -4.00905,9.2208 -6.1472,4.27631 -13.29962,-11.84314 -0.18899,8.50441 -14.74107,1.32297 -12.66221,-7.18155 0.56697,9.82733 -13.60714,7.9375 z",LAND:20,FOREST:100,MOUNTAINS:50,CENTER:{x:-202,y:151},NEIGHBOURS:[-2,27,28,40,41,109],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:40,PATH:"m -182.94599,197.97664 -6.23109,10.57693 5.85863,10.20536 -14.93006,0.18898 -2.91317,-7.67206 -6.15826,-0.0764 -4.7247,6.4256 5.48065,10.20535 -3.21279,10.39435 -8.88244,6.99256 -5.66965,2.45684 -4.34672,-3.59077 -9.82738,-4.53571 1.13392,-13.60715 6.61459,-9.26041 -0.94494,-6.61459 -6.12787,-0.5266 -9.93612,6.76321 -4.15774,10.96131 -7.35164,10.34705 -1.33945,-7.70599 0.5646,-10.76755 -2.06955,-10.52743 6.53439,-10.09117 11.22118,-6.4067 13.60714,-7.9375 -0.56697,-9.82738 12.66221,7.18155 14.74107,-1.32292 0.18899,-8.50446 13.29962,11.84314 3.87541,7.8845 6.28084,0.93545 z",LAND:30,FOREST:60,MOUNTAINS:0,CENTER:{x:-220,y:202},NEIGHBOURS:[-1,27,39,41],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:41,PATH:"m -260.61222,229.9045 -16.25534,-4.53099 0.56697,9.63839 -25.13541,3.40179 -11.71726,-3.02381 -4.72472,-13.98512 4.91371,-13.79613 -8.31548,-13.98512 6.61458,-10.39435 14.1741,4.91369 7.9375,-11.33928 12.28423,-7.55953 2.07886,-11.33928 13.60715,5.10268 0.18899,11.1503 14.93006,3.59077 5.10268,14.36309 -11.22118,6.40675 -6.53439,10.09117 2.06955,10.52738 z",LAND:20,FOREST:60,MOUNTAINS:10,CENTER:{x:-283,y:201},NEIGHBOURS:[-1,-2,39,40,42,43],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:42,PATH:"m -317.87798,221.40476 -5.25087,-3.51654 -10.15624,5.07812 1.60361,10.15624 -5.3454,5.61266 -12.56165,3.74177 -10.42352,-6.949 2.67268,-9.88898 -8.28534,-6.41447 1.33635,-8.28535 7.48356,-9.6217 -3.47451,-8.01809 11.75986,-2.93996 10.15624,-2.13816 6.41445,-8.01809 5.3454,4.00905 11.93819,-0.9831 -6.61458,10.39435 8.31548,13.98512 z",LAND:10,FOREST:60,MOUNTAINS:20,CENTER:{x:-340,y:210},NEIGHBOURS:[-1,41,43,44,65],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:43,PATH:"m -314.66517,183.22916 -11.93819,0.9831 -5.3454,-4.00905 -8.5526,-0.8018 1.60361,-12.02713 -4.27633,-10.15625 7.48356,0.26728 8.28534,8.81989 -1.33633,-10.15624 -7.48355,-9.35444 5.61266,-6.68173 5.87994,1.33634 -4.54358,-11.75986 14.79986,-0.88868 4.15774,12.47322 19.65476,3.77976 12.4732,12.85119 -2.07886,11.33928 -12.28423,7.55953 -7.9375,11.33928 z",LAND:20,FOREST:60,MOUNTAINS:0,CENTER:{x:-308,y:163},NEIGHBOURS:[-2,41,42,44,45],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:44,PATH:"m -339.69957,130.22381 -10.4235,1.60362 -3.74179,7.75082 -8.01806,5.07812 -5.87994,15.50163 8.28534,7.75082 -4.54358,12.56166 -11.49257,7.75082 2.4054,12.2944 8.81991,10.42351 7.48356,-9.6217 -3.47451,-8.01809 21.9161,-5.07812 6.41445,-8.01809 -8.5526,-0.8018 1.60361,-12.02713 -4.27633,-10.15625 7.48356,0.26728 8.28534,8.81989 -1.33633,-10.15624 -7.48355,-9.35444 5.61266,-6.68173 5.87994,1.33634 -4.54358,-11.75986 -4.27633,4.00905 z",LAND:20,FOREST:40,MOUNTAINS:10,CENTER:{x:-351,y:162},NEIGHBOURS:[42,43,45,63,64,65],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:45,PATH:"m -320.45616,56.190154 -13.89801,2.405425 -12.82895,-2.672693 -0.53454,10.958049 -10.4235,12.561668 11.75986,3.207234 -2.40544,13.630746 8.0181,15.768897 8.55263,1.87089 -7.48356,16.30344 6.1472,3.47451 4.27633,-4.00905 14.79986,-0.88868 8.31546,-15.11904 -14.36309,-25.324407 12.85121,-1.13393 -14.11992,-9.116957 -4.00904,-12.561668 z",LAND:20,FOREST:50,MOUNTAINS:0,CENTER:{x:-330,y:97},NEIGHBOURS:[-2,43,44,46,62,63],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:46,PATH:"m -307.6726,87.223213 -14.11992,-9.116957 -4.00904,-12.561668 5.3454,-9.354434 -1.33636,-14.699823 -10.69078,-1.336347 -2.67269,-8.552625 6.41448,-2.138156 19.24341,-3.207235 8.81989,4.810851 13.63075,-10.69078 17.37251,-4.810852 14.16529,4.009043 9.35443,-0.534539 11.75986,-5.61266 10.95805,7.750816 -8.55263,15.501634 -7.21627,-1.870888 -8.8199,-6.147199 -6.41447,9.087165 1.60362,9.888971 -12.56167,0.267269 -10.95804,-4.009043 -8.01809,2.405427 1.60361,11.225318 7.75081,13.898018 -17.90705,7.483546 0.75181,9.827051 z",LAND:30,FOREST:60,MOUNTAINS:80,CENTER:{x:-286,y:38},NEIGHBOURS:[-2,45,47,48,60,61,62],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:47,PATH:"m -292.17559,88.735116 -0.75181,-9.827051 17.90705,-7.483546 -7.75081,-13.898018 -1.60361,-11.225318 8.01809,-2.405427 10.95804,4.009043 12.56167,-0.267269 -1.60362,-9.888971 6.41447,-9.087165 8.8199,6.147199 7.21627,1.870888 8.55263,9.621702 1.06908,19.243405 -5.3454,13.898015 16.80293,8.536559 -21.92262,5.291669 h -15.875 l -9.07143,17.008929 -19.65475,-1.88988 -10.96132,-9.071428 z",LAND:10,FOREST:60,MOUNTAINS:50,CENTER:{x:-254,y:73},NEIGHBOURS:[-2,38,46,107],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:48,PATH:"m -234.39537,13.427031 1.18406,-11.2484599 -5.66964,-8.5044643 3.77976,-9.4494048 4.15774,2.834822 3.2128,-7.9375 -6.23661,-6.99256 2.83482,-9.071427 13.41816,-4.535715 11.52827,7.9375 2.07887,12.473214 8.50446,0.755952 3.02381,6.992559 -0.37797,12.47321459 -5.48066,2.45684521 5.85863,7.5595237 -0.56696,3.2127975 -7.30631,0.241295 -22.98518,8.552624 z",LAND:20,FOREST:60,MOUNTAINS:0,CENTER:{x:-216,y:-3},NEIGHBOURS:[-3,37,46,49,60,107],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:49,PATH:"m -149.11161,-13.507441 -8.69345,-3.96875 1.32292,-8.504464 -9.07143,-3.968749 -7.37054,4.157737 -2.64583,-5.85863 -7.18155,-5.669642 -7.74851,0.377976 -5.66964,-6.425597 -7.37054,3.023809 -2.64583,6.803573 2.07887,12.473214 8.50446,0.755952 3.02381,6.992559 -0.37797,12.47321459 -5.48066,2.45684521 5.85863,7.5595235 h 7.37054 l 4.53571,-4.9136903 7.9375,2.8348215 5.29167,3.5907735 5.85863,-3.4017854 5.48066,0.9449401 3.96875,-7.37053525 -6.23661,-5.66964285 -2.07887,-5.2916666 6.42559,0.3779766 z",LAND:20,FOREST:40,MOUNTAINS:0,CENTER:{x:-177,y:-11},NEIGHBOURS:[-3,37,48,50],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:50,PATH:"m -178.02678,-53.572917 8.12648,-2.078869 3.2128,-7.181548 -5.10268,-9.260416 6.99256,0.94494 4.34673,3.590775 3.40178,-5.858632 -3.77976,-4.724702 7.9375,-2.078868 9.6384,0.944941 1.70089,7.370535 7.11551,1.676434 4.27631,8.285353 -12.2944,4.81085 -5.34539,10.156243 5.61266,10.423511 4.54359,-5.34539 8.28535,0.267269 1.06908,12.561668 -5.5142,0.631322 -1.70089,5.480656 -6.23661,3.212797 h -7.55952 l 0.18898,6.236607 -8.69345,-3.96875 1.32292,-8.504464 -9.07143,-3.968749 -0.56696,-6.425597 -10.39435,-1.322917 1.32292,-7.370534 z",LAND:30,FOREST:60,MOUNTAINS:0,CENTER:{x:-159,y:-47},NEIGHBOURS:[-3,36,37,49,51],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:51,PATH:"m -188.23214,-70.581845 4.61798,-8.199109 7.75081,-0.801809 -3.4745,-8.018087 9.88897,-3.474503 -7.21627,-6.147199 3.20723,-2.405425 2.67269,2.405425 5.87993,-1.069078 -0.53454,-6.1472 5.87993,-1.33635 3.47451,-3.74177 8.81989,1.46998 6.28084,4.54359 -3.74178,2.67269 4.54358,5.07812 8.8199,-2.806326 6.81537,1.336346 1.60362,4.27631 4.00904,-1.603616 5.07812,4.409948 -3.34087,3.073601 5.7463,5.612659 -0.26727,4.81085 -9.35443,4.81085 -6.68174,-5.078121 -1.87089,-5.879928 -4.27631,-4.009044 -0.53454,16.570714 -7.11551,-1.676434 -1.70089,-7.370535 -9.6384,-0.944941 -7.9375,2.078868 3.77976,4.724702 -3.40178,5.858632 -4.34673,-3.590775 -6.99256,-0.944938 5.10268,9.260414 -3.2128,7.181548 -8.12648,2.078869 -8.12649,-9.638393 z",LAND:10,FOREST:30,MOUNTAINS:50,CENTER:{x:-153,y:-90},NEIGHBOURS:[-3,36,50,52,55,56],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:52,PATH:"m -111.71866,-76.642798 0.26727,-4.810852 -5.7463,-5.612659 3.34087,-3.073601 -5.07812,-4.409946 -4.00904,1.603616 -1.60362,-4.276312 2.93997,-5.879928 -2.53906,-4.40995 4.67721,-2.13815 1.60362,-5.21176 4.40995,-4.81085 8.41899,0.13363 7.34991,7.34992 -1.870887,8.81989 7.349913,6.280836 3.741772,8.552622 6.414468,3.207234 0.801812,10.289876 -9.621705,1.336347 -10.690783,-6.414466 -3.20723,7.483544 z",LAND:10,FOREST:20,MOUNTAINS:10,CENTER:{x:-107,y:-93},NEIGHBOURS:[35,36,51,53,55],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:53,PATH:"m -82.853553,-141.85656 -4.810852,-2.27179 -0.400902,-7.48355 -4.409948,-3.20723 -10.824415,-0.13364 -4.00904,4.94449 -6.01357,-1.20271 0.53454,-7.88446 -4.94449,0.40091 -9.88897,2.27179 -0.4009,7.21628 -4.67722,5.74629 3.60814,5.34539 7.34991,3.20723 -0.26727,7.88446 2.00452,6.28083 -2.00452,5.7463 4.14268,0.13363 4.40995,-4.81085 8.41899,0.13363 -1.06908,-6.28083 9.88897,-1.87089 2.004523,-4.94448 7.216278,-0.53454 z",LAND:10,FOREST:10,MOUNTAINS:10,CENTER:{x:-111,y:-137},NEIGHBOURS:[-1,35,52,54,55],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:54,PATH:"m -158.08992,-140.25295 -6.94901,-1.60361 -3.20724,-3.34087 -6.68173,-1.06908 -2.00453,-3.87541 -0.26727,-2.27179 2.53907,-5.74629 11.35895,-3.20724 6.5481,4.67722 7.34992,-3.74178 5.34539,3.07361 2.53906,3.74177 6.5481,-4.27631 7.34991,1.46998 -0.4009,7.21628 -4.67722,5.74629 -0.80181,4.81085 -4.14267,0.93545 -7.61719,-0.80181 -4.54358,-4.67722 z",LAND:10,FOREST:10,MOUNTAINS:0,CENTER:{x:-153,y:-150},NEIGHBOURS:[-1,53,55,56],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:55,PATH:"m -124.5476,-97.22255 -6.81537,-1.336349 -8.8199,2.806329 -4.54358,-5.07812 3.74178,-2.67269 -6.28084,-4.54359 -0.53454,-6.949 -8.28535,-2.13816 -4.00904,-5.47903 3.8754,-5.21175 -4.40994,-5.21176 2.53906,-7.21628 8.28535,-2.93996 4.54358,4.67722 7.61719,0.80181 4.14267,-0.93545 0.80181,-4.81085 3.60814,5.34539 7.34991,3.20723 -0.26727,7.88446 2.00452,6.28083 -2.00452,5.7463 4.14268,0.13363 -1.60362,5.21176 -4.67721,2.13815 2.53906,4.40995 z",LAND:10,FOREST:20,MOUNTAINS:0,CENTER:{x:-136,y:-119},NEIGHBOURS:[51,52,53,54,56],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:56,PATH:"m -174.9279,-146.26651 -8.57954,-0.28855 -7.37053,-6.80357 2.64583,-6.04762 -12.47321,0.37798 -7.37054,8.69345 -9.44941,3.40179 -8.12648,7.37053 6.2366,8.12649 8.12649,1.32292 -2.45684,6.61458 -11.52828,2.64583 1.13393,7.37054 -1.88988,10.96131 2.64583,10.016367 4.91369,1.511904 1.88989,10.205357 6.99255,1.511906 -2.07886,3.212798 6.42559,5.669643 17.00893,-0.18899 4.61798,-8.199109 7.75081,-0.801809 -3.4745,-8.018087 9.88897,-3.474503 -7.21627,-6.147197 3.20723,-2.405424 2.67269,2.405424 5.87993,-1.069078 -0.53454,-6.147202 5.87993,-1.33635 3.47451,-3.74177 8.81989,1.46998 -0.53454,-6.949 -8.28535,-2.13816 -4.00904,-5.47903 3.8754,-5.21175 -4.40994,-5.21176 2.53906,-7.21628 -6.94901,-1.60361 -3.20724,-3.34087 z",LAND:10,FOREST:80,MOUNTAINS:40,CENTER:{x:-192,y:-118},NEIGHBOURS:[-1,-3,51,54,55,57,58],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:57,PATH:"m -225.65178,-139.5625 -6.99256,0.94494 -4.15774,-5.29167 1.13393,-5.10267 -4.34673,-7.9375 -8.50446,-0.75596 -10.96131,3.96875 -6.80358,6.04762 3.40179,13.04018 -5.66964,4.7247 -4.53573,10.01637 7.55955,9.6384 9.26041,-1.32292 4.53571,8.69345 7.74851,4.15774 7.74851,-1.32292 5.10268,6.236611 3.2128,3.779761 4.53571,-2.456845 -2.64583,-10.016367 1.88988,-10.96131 -1.13393,-7.37054 11.52828,-2.64583 2.45684,-6.61458 -8.12649,-1.32292 z",LAND:30,FOREST:60,MOUNTAINS:50,CENTER:{x:-248,y:-125},NEIGHBOURS:[-1,56,58,75,76],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:58,PATH:"m -251.73214,-102.89881 -4.15774,4.535716 2.45685,4.913691 -2.26786,7.74851 -4.7247,4.724702 2.26785,6.614583 -4.34672,5.480656 -4.7247,0.755952 0.56697,3.212798 3.21279,2.456847 4.91369,0.566962 -1.32292,4.913691 6.23661,5.480656 6.42559,-4.724705 -4.7247,-7.74851 7.74851,-6.992559 17.76488,0.94494 14.74108,-6.047618 2.07886,-3.212798 -6.99255,-1.511906 -1.88989,-10.205355 -4.91369,-1.511906 -4.53571,2.456847 -8.31548,-10.016374 -7.74851,1.32292 z",LAND:30,FOREST:60,MOUNTAINS:20,CENTER:{x:-241,y:-84},NEIGHBOURS:[-3,56,57,59,75],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:59,PATH:"m -295.86737,-44.035916 0.66797,-5.568251 4.72471,-5.102678 0.37796,-7.181548 7.37055,0.377976 4.5357,-5.858629 0.94496,-6.425597 5.85861,-1.322917 5.66966,-4.346725 7.55951,5.102677 -4.34672,5.480656 -4.7247,0.755954 0.56697,3.212796 3.21279,2.456847 4.91369,0.566962 -1.32292,4.913691 6.23661,5.480656 6.42559,-4.724705 8.31548,1.511906 1.70089,3.96875 -11.15029,3.212799 -4.53572,7.74851 1.51191,7.559524 -7.9375,1.133928 -7.55952,5.291667 -13.98513,-1.322917 -0.86577,-5.963283 9.08716,2.405425 2.40544,-9.087162 -8.55263,-7.216277 -6.68174,-4.276312 z",LAND:10,FOREST:60,MOUNTAINS:0,CENTER:{x:-267,y:-50},NEIGHBOURS:[-3,58,60,61,74,75],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:60,PATH:"m -287.04746,20.376039 -7.77396,-7.614135 3.02382,-10.5833329 -6.23663,-1.1339286 -2.07886,-4.5357142 4.5357,-3.0238094 h 6.42562 l 6.2366,1.3229166 3.49628,-3.9687502 -7.27604,-6.6145833 -1.7009,-6.614583 7.55952,-4.724703 13.98513,1.322917 7.55952,-5.291667 7.9375,-1.133928 3.96875,2.456844 8.31547,-3.77976 h 2.83482 l 2.26786,5.669642 6.23661,6.99256 -3.2128,7.9375 -4.15774,-2.834822 -3.77976,9.4494048 5.66964,8.5044643 -1.18406,11.2484599 -11.75986,5.61266 -9.35443,0.534539 -14.16529,-4.009043 z",LAND:20,FOREST:60,MOUNTAINS:0,CENTER:{x:-262,y:-5},NEIGHBOURS:[-3,46,48,59,61],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:61,PATH:"m -336.22506,9.9525269 1.87089,-6.4144683 -6.14719,-7.216277 2.93994,-9.3544336 6.41448,-6.681738 -5.61266,-9.621702 2.40543,-10.156243 10.15625,-5.078121 10.69078,5.34539 7.21627,-9.087162 10.4235,4.276312 10.42352,-7.216277 6.68174,4.276312 8.55263,7.216277 -2.40544,9.087162 -9.08716,-2.405425 0.86577,5.963283 -7.55952,4.724703 1.7009,6.614583 7.27604,6.6145833 -3.49628,3.9687502 -6.2366,-1.3229166 h -6.42562 l -4.5357,3.0238094 2.07886,4.5357142 6.23663,1.1339286 -3.02382,10.5833329 7.77396,7.614135 -13.63075,10.69078 -8.81989,-4.810851 -6.41448,-9.354433 -12.56167,0.801808 z",LAND:30,FOREST:60,MOUNTAINS:0,CENTER:{x:-313,y:-14},NEIGHBOURS:[46,59,60,62,72,73,74],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:62,PATH:"m -395.36309,71.726189 -0.46307,-6.716139 9.08717,-6.949008 -2.13818,-9.087165 -9.35442,-8.285356 7.48355,-4.00904 8.01809,2.405425 8.28535,-0.534541 2.40543,-6.147196 5.34538,-8.819896 7.48355,-5.61266 7.75081,3.741773 4.27631,-4.276312 2.67271,-9.621703 8.28535,2.1381561 7.75081,7.7508159 12.56167,-0.801808 6.41448,9.354433 -19.24341,3.207235 -6.41448,2.138156 2.67269,8.552625 10.69078,1.336347 1.33636,14.699823 -13.89801,2.405425 -12.82895,-2.672693 -0.53454,10.958049 -15.51744,4.467278 -8.69347,5.291664 z",LAND:40,FOREST:50,MOUNTAINS:50,CENTER:{x:-355,y:44},NEIGHBOURS:[45,46,61,63,70,71,72],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:63,PATH:"m -361.88292,144.65637 -14.95933,1.53113 -10.20535,-6.80357 -6.80358,-11.33929 -19.65476,5.29167 -3.4018,-19.65476 9.44941,-6.4256 4.53573,4.91369 13.60712,-3.02381 2.26788,-10.205354 -9.44941,-15.119048 -11.3393,-4.535715 12.47322,-7.559524 23.43452,4.91369 8.69347,-5.291666 15.51744,-4.467278 -10.4235,12.561668 11.75986,3.207234 -2.40544,13.630746 8.0181,15.768897 8.55263,1.87089 -7.48356,16.30344 -10.4235,1.60362 -3.74179,7.75082 z",LAND:30,FOREST:100,MOUNTAINS:10,CENTER:{x:-370,y:112},NEIGHBOURS:[44,45,62,64,68,69],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:64,PATH:"m -408.65509,185.5486 -2.40543,-5.07812 7.48355,-5.34539 -2.67272,-6.68174 8.81992,-1.06907 3.20722,4.81085 5.34538,-2.6727 -3.20723,-6.41447 -5.07812,-2.13815 0.53454,-6.41447 5.61266,-2.6727 2.67271,-6.68173 1.29501,-5.80698 10.20535,6.80357 14.95933,-1.53113 -5.87994,15.50163 8.28534,7.75082 -4.54358,12.56166 -11.49257,7.75082 2.4054,12.2944 -15.7689,3.74177 -8.5526,-5.61266 -1.33636,-12.02713 z",LAND:10,FOREST:10,MOUNTAINS:40,CENTER:{x:-380,y:174},NEIGHBOURS:[44,63,65,67,68],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:65,PATH:"m -373.10827,200.5157 -15.7689,3.74177 -8.5526,-5.61266 -6.41448,-8.28535 -8.81989,12.56166 -9.6217,6.68174 -0.80182,13.63075 6.68173,10.95805 7.75084,4.54358 1.87087,-6.41447 -4.2763,-4.81085 9.35442,-0.80181 8.01809,4.81085 5.87994,-3.74177 3.74177,9.35443 6.14719,-5.34539 8.01809,-1.06908 12.56165,-5.07812 -8.28534,-6.41447 1.33635,-8.28535 z",LAND:10,FOREST:70,MOUNTAINS:0,CENTER:{x:-392,y:217},NEIGHBOURS:[-1,42,44,64,66,67],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:66,PATH:"m -408.65509,238.73524 -11.75988,4.81085 -2.40541,9.6217 -9.35445,9.35444 2.40543,11.22531 -4.81084,6.68174 -6.68176,2.40543 -11.22532,1.33636 -6.41445,-2.93997 1.33633,-4.54359 7.48356,-0.80182 6.94901,-2.67268 1.06908,-6.1472 -1.8709,-7.48355 -13.09621,1.06908 -6.94899,-4.27631 -5.87994,-14.16529 4.54358,-9.08716 5.07812,-8.55262 7.48356,4.81085 11.75985,0.80181 7.21628,-4.00905 10.69078,-2.93996 6.68173,10.95805 z",LAND:10,FOREST:50,MOUNTAINS:20,CENTER:{x:-444,y:246},NEIGHBOURS:[-1,65,67,90],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:67,PATH:"m -476.80882,228.31173 4.2763,-8.28536 -2.93997,-9.35443 9.35445,-4.00904 v -5.61266 l 4.54358,-8.55263 3.47449,2.6727 -2.13816,6.68174 1.60362,4.00904 9.08717,-4.81085 0.53453,-8.28536 8.81991,-6.949 10.69079,0.8018 6.68173,5.07812 6.41445,-5.61266 7.75084,-0.53454 9.88896,1.06908 1.33636,12.02713 -6.41448,-8.28535 -8.81989,12.56166 -9.6217,6.68174 -0.80182,13.63075 -10.69078,2.93996 -7.21628,4.00905 -11.75985,-0.80181 -7.48356,-4.81085 -5.07812,8.55262 z",LAND:20,FOREST:60,MOUNTAINS:20,CENTER:{x:-443,y:211},NEIGHBOURS:[64,65,66,68,89,90,91],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:68,PATH:"m -449.01281,192.76488 -4.36962,-7.07887 5.48066,-5.48066 -11.52829,-7.55952 -3.77976,-10.39434 16.06399,-4.15774 8.12649,-6.99256 3.40178,-8.88244 -2.45684,-6.99256 6.2366,-6.99256 8.50447,0.37797 -0.18899,-9.07142 -4.72469,-4.91369 5.29167,-1.13393 6.0476,0.18899 3.4018,19.65476 19.65476,-5.29167 6.80358,11.33929 -1.29501,5.80698 -2.67271,6.68173 -5.61266,2.6727 -0.53454,6.41447 5.07812,2.13815 3.20723,6.41447 -5.34538,2.6727 -3.20722,-4.81085 -8.81992,1.06907 2.67272,6.68174 -7.48355,5.34539 2.40543,5.07812 -7.75084,0.53454 -6.41445,5.61266 -6.68173,-5.07812 -10.69079,-0.8018 z",LAND:30,FOREST:50,MOUNTAINS:30,CENTER:{x:-423,y:160},NEIGHBOURS:[63,64,67,69,87,88,89],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:69,PATH:"m -430.78607,119.90506 -6.73414,-7.05377 2.13815,-8.55262 6.41448,-6.949009 -11.22532,-2.672694 -10.15624,5.345393 -1.60364,-7.750818 6.41448,-4.810853 -6.41448,-5.612659 7.2163,-7.483549 10.69078,-2.405425 -4.27633,-4.276312 5.07812,-9.621702 14.16529,4.009043 4.81087,10.423512 6.43144,6.792116 11.3393,4.535715 9.44941,15.119048 -2.26788,10.205354 -13.60712,3.02381 -4.53573,-4.91369 -9.44941,6.4256 -6.0476,-0.18899 -5.29167,1.13393 z",LAND:30,FOREST:50,MOUNTAINS:0,CENTER:{x:-420,y:91},NEIGHBOURS:[63,68,70,87,88],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:70,PATH:"m -407.83631,79.285713 -6.43144,-6.792116 -4.81087,-10.423512 -14.16529,-4.009043 -11.22531,3.474503 -0.53454,-13.096206 8.55263,-7.750818 0.26725,-8.285352 5.34541,-8.285357 -4.54359,-4.810852 15.76891,-0.534539 9.08716,8.819895 10.69078,-5.345391 10.95804,2.405426 6.14722,14.432555 -8.01809,-2.405425 -7.48355,4.00904 9.35442,8.285356 2.13818,9.087165 -9.08717,6.949008 0.46307,6.716139 z",LAND:20,FOREST:60,MOUNTAINS:50,CENTER:{x:-417,y:47},NEIGHBOURS:[62,63,69,71,85,87],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:71,PATH:"m -366.69379,23.583273 -3.72287,-9.876428 -9.82739,-5.1026787 -7.74851,-0.3779764 -1.13393,-6.2366069 0.37799,-6.047619 -6.99257,-0.1889881 -3.40177,4.34672617 -7.74851,-1.88988097 -6.23663,-6.8035713 -4.15774,3.5907736 -5.48063,5.85863105 -10.20538,-4.72470225 -3.21278,-6.4255952 -5.85864,2.6458331 0.37798,6.0476191 6.2366,4.1577381 0.94493,7.3705356 -5.29166,5.1026781 -0.37796,5.858631 -2.45684,6.614585 6.42622,4.900192 5.34541,-8.285357 -4.54359,-4.810852 15.76891,-0.534539 9.08716,8.819895 10.69078,-5.345391 10.95804,2.405426 6.14722,14.432555 8.28535,-0.534541 2.40543,-6.147196 z",LAND:10,FOREST:40,MOUNTAINS:20,CENTER:{x:-405,y:10},NEIGHBOURS:[62,70,72,84,85],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:72,PATH:"m -395.74107,-4.2470241 -2.45684,-6.8035709 4.34673,-4.724703 -3.21281,-6.425595 -7.37052,-2.456845 5.29167,-4.157739 -0.189,-4.157736 4.15775,-2.834823 0.75594,-6.80357 -5.85862,-3.401787 3.77976,-1.511903 3.02379,1.889879 5.48066,-1.133928 2.64583,-4.346726 11.15031,9.638393 6.2366,-1.322917 -1.13393,6.992559 -6.80357,0.755952 -1.32292,3.779763 11.15031,1.511903 3.40178,5.10268 -1.13393,5.858631 7.37053,5.291666 9.07145,-3.023809 9.79868,3.498598 -2.93994,9.3544336 6.14719,7.216277 -1.87089,6.4144683 -8.28535,-2.1381559 -2.67271,9.621703 -4.27631,4.276312 -7.75081,-3.741773 -7.48355,5.61266 -3.72287,-9.876428 -9.82739,-5.1026787 -7.74851,-0.3779766 -1.13393,-6.2366067 0.37799,-6.047619 z",LAND:20,FOREST:60,MOUNTAINS:0,CENTER:{x:-373,y:-5},NEIGHBOURS:[61,62,71,73,83,84],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:73,PATH:"m -337.56142,-13.032652 -9.79868,-3.498598 -9.07145,3.023809 -7.37053,-5.291666 1.13393,-5.858631 -3.40178,-5.10268 -11.15031,-1.511903 1.32292,-3.779763 6.80357,-0.755952 1.13393,-6.992559 -6.42559,-4.346726 7.37052,-7.748513 3.96875,5.669645 9.26042,-1.13393 1.7009,-5.858632 8.88243,-6.992559 7.9375,3.212799 11.3393,-1.889882 6.42559,7.559524 4.72469,6.992559 6.48444,-0.975918 -7.21627,9.087162 -10.69078,-5.34539 -10.15625,5.078121 -2.40543,10.156243 5.61266,9.621702 z",LAND:10,FOREST:60,MOUNTAINS:0,CENTER:{x:-348,y:-39},NEIGHBOURS:[61,72,74,82,83],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:74,PATH:"m -343.20239,-63.21131 -2.10984,-6.883386 3.87541,-3.608139 8.95352,-2.00452 -3.34086,-5.345391 3.8754,-2.138156 5.07812,0.400905 5.21176,-3.34087 2.53908,-4.944486 5.87991,-1.469982 5.47902,-4.944486 3.11206,-1.251249 3.4018,10.583333 -11.3393,5.10268 1.51191,9.449403 9.82739,8.882441 8.50445,-2.267857 2.64583,5.102677 -0.37796,7.181548 -4.72471,5.102678 -0.66797,5.568251 -10.4235,-4.276312 -6.48444,0.975918 -4.72469,-6.992559 -6.42559,-7.559524 -11.3393,1.889882 z",LAND:10,FOREST:60,MOUNTAINS:50,CENTER:{x:-319,y:-67},NEIGHBOURS:[59,61,73,75,77,82],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:75,PATH:"m -273.08781,-119.90774 h -6.99254 l -13.04017,4.15774 -4.53573,-6.04762 -10.01635,3.59078 -2.07889,4.7247 -1.51191,6.80357 5.85865,-2.26786 3.96875,4.15774 -3.21281,6.04762 3.4018,10.583333 -11.3393,5.102678 1.51191,9.449405 9.82739,8.882441 8.50445,-2.267857 2.64583,5.102677 7.37055,0.377976 4.5357,-5.858629 0.94496,-6.425597 5.85861,-1.322917 5.66966,-4.346725 7.55951,5.102677 -2.26785,-6.614583 4.7247,-4.724702 2.26786,-7.748508 -2.45685,-4.913691 4.15774,-4.535718 -4.53571,-8.69345 -9.26041,1.32292 z",LAND:30,FOREST:60,MOUNTAINS:50,CENTER:{x:-282,y:-93},NEIGHBOURS:[57,58,59,74,76,77],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:76,PATH:"m -336.96576,-143.15327 -3.21281,-2.83482 7.37055,-3.40179 v -6.04762 l 4.72469,-5.48065 -3.96875,-6.61459 -7.74851,2.45685 -3.21281,-4.53572 0.56698,-5.85863 3.02382,-6.04762 16.44195,0.37798 9.26041,8.12649 7.37055,-3.59078 7.18154,3.40179 6.80357,9.4494 9.26042,-6.2366 5.29166,4.15774 8.50448,-2.83483 6.23659,-5.48065 6.4256,7.74851 -2.64583,8.31548 -0.18899,4.34672 -6.80358,6.04762 3.40179,13.04018 -5.66964,4.7247 -4.53573,10.01637 h -6.99254 l -13.04017,4.15774 1.88987,-6.80357 -0.56695,-7.9375 -2.26788,-7.9375 -7.37052,3.2128 -9.07143,-1.32292 -7.74851,-5.66964 -6.61458,3.02381 -3.02382,-3.59078 z",LAND:30,FOREST:60,MOUNTAINS:0,CENTER:{x:-300,y:-150},NEIGHBOURS:[-1,57,75,77,78],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:77,PATH:"m -335.82416,-81.052746 -7.18924,-0.301421 -11.33927,0.755954 -5.29167,-6.803572 3.77976,-9.260417 -6.42559,-6.047618 -9.44941,-1.51191 5.85864,-8.69345 12.09522,-2.26785 1.32292,-8.88245 13.22916,-8.31547 2.26788,-10.77232 9.07142,0.37797 3.02382,3.59078 6.61458,-3.02381 7.74851,5.66964 9.07143,1.32292 7.37052,-3.2128 2.26788,7.9375 0.56695,7.9375 -1.88987,6.80357 -4.53573,-6.04762 -10.01635,3.59078 -2.07889,4.7247 -1.51191,6.80357 5.85865,-2.26786 3.96875,4.15774 -3.21281,6.04762 -3.11206,1.251249 -5.47902,4.944488 -5.87991,1.46998 -2.53908,4.944486 -5.21176,3.34087 -5.07812,-0.400905 z",LAND:30,FOREST:60,MOUNTAINS:50,CENTER:{x:-334,y:-112},NEIGHBOURS:[74,75,76,78,81,82],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:78,PATH:"m -343.0134,-169.61161 -4.72469,3.59078 -8.31548,-5.48066 -2.83483,-5.10268 -7.37052,-2.07886 -6.42559,5.29166 -3.77976,-5.48065 -6.23663,8.50446 3.96875,9.63839 6.99257,1.7009 2.83483,6.99256 -4.91369,4.34672 -3.4018,10.01637 -7.18153,3.40179 2.64583,3.96875 6.2366,6.04762 7.9375,-5.85863 5.66965,2.07886 6.80355,-0.56696 2.64584,4.53571 13.22916,-8.31547 2.26788,-10.77232 -3.21281,-2.83482 7.37055,-3.40179 v -6.04762 l 4.72469,-5.48065 -3.96875,-6.61459 -7.74851,2.45685 z",LAND:30,FOREST:60,MOUNTAINS:50,CENTER:{x:-357,y:-147},NEIGHBOURS:[-1,76,77,79,81],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:79,PATH:"m -395.17409,-137.48363 -8.50448,-4.34673 -3.40177,-6.04762 2.83482,-8.88244 -6.42562,-4.7247 0.18899,-9.63839 5.29167,-5.48066 -3.77976,-6.04761 7.18156,-2.64584 5.48066,2.45685 7.37052,-2.64584 6.04761,6.23661 4.72472,-6.04762 7.9375,-3.2128 7.18153,4.34673 4.15774,7.55952 -7.37052,-2.07886 -6.42559,5.29166 -3.77976,-5.48065 -6.23663,8.50446 3.96875,9.63839 6.99257,1.7009 2.83483,6.99256 -4.91369,4.34672 -3.4018,10.01637 -5.29166,-2.83482 -6.04761,-1.32292 z",LAND:20,FOREST:60,MOUNTAINS:0,CENTER:{x:-394,y:-160},NEIGHBOURS:[-1,78,80,81],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:80,PATH:"m -408.97024,-182.65178 -6.42559,-3.77976 0.18899,-4.9137 -3.59076,-7.37053 -10.20538,2.45684 -2.45684,6.04762 -0.75594,9.07143 -9.44941,2.83482 -6.2366,7.18155 -1.7009,6.04762 3.96875,4.91369 -2.64583,8.31547 10.39434,2.26786 -2.64583,5.48066 7.37052,2.07887 5.48066,4.53571 6.99257,-0.18899 4.15774,5.85863 8.69344,-2.26785 8.12649,1.88988 4.53573,-5.29167 -8.50448,-4.34673 -3.40177,-6.04762 2.83482,-8.88244 -6.42562,-4.7247 0.18899,-9.63839 5.29167,-5.48066 z",LAND:30,FOREST:60,MOUNTAINS:0,CENTER:{x:-427,y:-161},NEIGHBOURS:[-1,79,81,105],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:81,PATH:"m -393.66219,-108.00149 -7.18155,-0.37797 -3.21281,-3.59078 -9.26042,-4.53571 0.94496,-5.66964 -1.88989,-4.72471 6.42559,-7.18154 8.12649,1.88988 4.53573,-5.29167 6.61458,-4.34673 6.04761,1.32292 5.29166,2.83482 -7.18153,3.40179 2.64583,3.96875 6.2366,6.04762 7.9375,-5.85863 5.66965,2.07886 6.80355,-0.56696 2.64584,4.53571 -1.32292,8.88245 -12.09522,2.26785 -9.26041,-4.34672 -3.02382,4.91369 -6.04763,3.96875 z",LAND:10,FOREST:60,MOUNTAINS:40,CENTER:{x:-395,y:-121},NEIGHBOURS:[77,78,79,80,82,105],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:82,PATH:"m -405.37947,-74.550592 -3.02379,-2.338731 5.33359,-4.84282 -1.64554,-6.324385 -5.19996,-0.290198 3.314,-5.734492 6.70236,-0.880091 1.7009,-6.803571 4.53572,-6.23661 9.44939,-0.37797 6.04763,-3.96875 3.02382,-4.91369 9.26041,4.34672 -5.85864,8.69345 9.44941,1.51191 6.42559,6.047618 -3.77976,9.260417 5.29167,6.803572 11.33927,-0.755954 7.18924,0.301421 3.34086,5.345393 -8.95352,2.004518 -3.87541,3.608139 2.10984,6.883386 -8.88243,6.992559 -1.7009,5.858632 -9.26042,1.13393 1.32292,-7.9375 -6.99254,-6.236607 -2.64583,-7.748514 -3.96875,-5.102677 -6.4256,4.535712 -8.69346,-4.346723 -8.29649,2.953056 z",LAND:30,FOREST:60,MOUNTAINS:50,CENTER:{x:-378,y:-89},NEIGHBOURS:[74,77,81,83,103,105],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:83,PATH:"m -393.47322,-45.635417 0.18899,-4.913689 -9.63837,-1.322916 -8.50448,-5.291667 0.37799,-6.803572 5.66962,-10.583333 6.63358,1.441152 8.29649,-2.953058 8.69346,4.346725 6.4256,-4.535712 3.96875,5.102677 2.64583,7.748514 6.99254,6.236607 -1.32292,7.9375 -3.96875,-5.669645 -7.37052,7.748513 6.42559,4.346726 -6.2366,1.322917 -11.15031,-9.638393 -2.64583,4.346726 z",LAND:10,FOREST:60,MOUNTAINS:0,CENTER:{x:-388,y:-61},NEIGHBOURS:[72,73,82,84,103],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:84,PATH:"m -411.42708,-57.163689 -4.91368,5.480653 1.32292,4.913691 -4.72472,6.425594 -8.50445,2.078871 -4.72472,6.614583 h -7.9375 l -8.12649,3.779761 -0.37796,-6.047618 -4.34673,-2.267858 -6.2366,10.205357 -0.75597,6.614583 3.4018,6.52009 7.74851,-2.078869 5.00819,-5.197173 7.55952,2.834821 8.59896,-1.984375 3.59076,5.953125 7.55952,8.3154764 4.15774,-3.5907736 6.23663,6.8035713 7.74851,1.88988097 3.40177,-4.34672617 -2.45684,-6.8035709 4.34673,-4.724703 -3.21281,-6.425595 -7.37052,-2.456845 5.29167,-4.157739 -0.189,-4.157736 4.15775,-2.834823 0.75594,-6.80357 -5.85862,-3.401787 3.77976,-1.511903 3.02379,1.889879 0.18899,-4.913689 -9.63837,-1.322916 z",LAND:20,FOREST:40,MOUNTAINS:0,CENTER:{x:-418,y:-28},NEIGHBOURS:[71,72,83,85,102,103],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:85,PATH:"m -480.40774,26.180059 -5.85861,-0.377977 -0.18899,-7.559523 5.57514,-3.212798 1.51191,-7.0870533 3.21278,-6.1421129 9.54392,0.188988 -1.51191,-7.9374999 6.04761,-1.8898809 4.72471,-5.008184 7.74851,-2.078869 5.00819,-5.197173 7.55952,2.834821 8.59896,-1.984375 3.59076,5.953125 7.55952,8.3154764 -5.48063,5.85863105 -10.20538,-4.72470225 -3.21278,-6.4255952 -5.85864,2.6458331 0.37798,6.0476191 6.2366,4.1577381 0.94493,7.3705354 -5.29166,5.1026783 -0.37796,5.858631 -2.45684,6.614585 6.42622,4.900192 -0.26725,8.285352 -5.97001,-5.815009 -7.55951,-2.078869 -9.26042,-2.834822 -8.69344,-0.755952 -9.07143,2.456844 z",LAND:30,FOREST:60,MOUNTAINS:0,CENTER:{x:-457,y:11},NEIGHBOURS:[70,71,84,87,98,99,102],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:86,PATH:"",LAND:0,FOREST:0,MOUNTAINS:0,CENTER:{x:0,y:0},NEIGHBOURS:[],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:87,PATH:"m -450.34914,100.02236 -1.60364,-7.750818 6.41448,-4.810855 -6.41448,-5.612657 7.2163,-7.483549 10.69078,-2.405425 -4.27633,-4.276312 5.07812,-9.621702 -11.22531,3.474503 -0.53454,-13.096206 8.55263,-7.750818 -5.97001,-5.815009 -7.55951,-2.078869 -1.32292,5.102678 1.7009,4.724701 -5.85864,5.480656 -7.9375,-7.9375 -7.37053,2.078869 -3.2128,4.157739 2.64583,4.346725 9.44941,4.157737 0.94493,8.315478 -6.42559,4.535713 -0.18899,5.669642 -1.90236,2.808288 -4.27633,1.870887 -1.46997,3.34087 -3.47451,2.138156 1.33636,8.018084 -3.87543,0.400902 0.13364,6.280838 7.48356,2.138154 3.34086,6.68174 -3.74176,1.87089 -1.47,2.93996 7.08266,-0.13363 2.80633,3.74177 5.74627,-0.93544 5.3454,-0.13364 -2.53907,2.93996 1.47,3.60814 6.94902,-3.60814 6.68173,-0.13363 4.40994,-4.40995 2.13815,-8.55262 6.41448,-6.949009 -11.22532,-2.672694 z",LAND:30,FOREST:50,MOUNTAINS:0,CENTER:{x:-459,y:82},NEIGHBOURS:[69,70,85,88,95,98],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:88,PATH:"m -437.52021,112.85129 -4.40994,4.40995 -6.68173,0.13363 -6.94902,3.60814 -1.47,-3.60814 2.53907,-2.93996 -5.3454,0.13364 -2.80633,3.74177 -7.34991,3.0736 2.13818,3.0736 -7.34992,4.00904 -7.08265,-3.34087 -2.40541,5.34539 -1.47,8.68626 2.40543,4.14268 2.80633,2.13816 -1.46997,7.75081 6.68173,-7.21627 6.68174,0.53453 5.34538,-9.35443 6.94901,1.87089 9.08717,-0.26727 12.05889,3.44231 -2.45684,-6.99256 6.2366,-6.99256 8.50447,0.37797 -0.18899,-9.07142 -4.72469,-4.91369 -2.53905,5.27857 z",LAND:30,FOREST:30,MOUNTAINS:0,CENTER:{x:-456,y:130},NEIGHBOURS:[68,69,87,89,95],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:89,PATH:"m -466.11804,206.6629 -12.02714,-5.61266 2.40543,-5.87993 -9.6217,-5.34539 -1.8709,-13.89802 3.20723,-9.6217 -7.75081,-6.41447 1.8709,-8.01809 7.48355,1.33635 6.68173,-7.21627 6.68174,0.53453 5.34538,-9.35443 6.94901,1.87089 9.08717,-0.26727 12.05889,3.44231 -3.40178,8.88244 -8.12649,6.99256 -16.06399,4.15774 3.77976,10.39434 11.52829,7.55952 -5.48066,5.48066 4.36962,7.07887 -0.53453,8.28536 -9.08717,4.81085 -1.60362,-4.00904 2.13816,-6.68174 -3.47449,-2.6727 -4.54358,8.55263 z",LAND:10,FOREST:30,MOUNTAINS:40,CENTER:{x:-474,y:170},NEIGHBOURS:[67,68,91,94,95],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:90,PATH:"m -463.97989,256.37503 -7.75081,4.81085 -12.64187,1.22944 -1.7907,-9.24753 -2.6326,-1.87088 -4.75739,0.66817 -3.47451,2.28516 -1.80407,4.07586 -5.5993,4.34313 -10.98477,-4.58367 -0.14701,-8.65954 -3.47448,-9.08716 3.74176,-8.8199 9.35442,-8.01808 9.08717,-3.20724 10.69078,8.01809 h 9.35445 l 11.49257,4.81085 -4.54358,9.08716 z",LAND:20,FOREST:60,MOUNTAINS:20,CENTER:{x:-493,y:237},NEIGHBOURS:[-1,66,67,91],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:91,PATH:"m -519.0374,240.33886 -8.80634,4.50042 -11.71726,-0.18899 -2.07889,-15.30803 2.45687,-8.88244 7.9375,-3.96875 7.9375,-0.94494 5.48063,-6.61459 5.10271,-4.53571 8.69344,0.75595 10.01635,2.83482 9.6384,-2.83482 1.32292,-4.34672 7.31382,-5.63475 -2.40543,5.87993 12.02714,5.61266 -9.35445,4.00904 2.93997,9.35443 -4.2763,8.28536 h -9.35445 l -10.69078,-8.01809 -9.08717,3.20724 -9.35442,8.01808 z",LAND:10,FOREST:50,MOUNTAINS:10,CENTER:{x:-509,y:216},NEIGHBOURS:[-1,67,89,90,92,94],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:92,PATH:"m -539.18302,220.45982 1.43674,-6.84792 -1.06907,-8.28535 -6.68174,1.33635 -10.42352,0.53454 -7.21627,-6.94901 -1.33636,-8.01809 9.6217,-4.27631 8.28535,-7.48355 9.35445,3.20724 8.81989,-5.07812 5.87994,-9.88898 7.75081,3.47451 5.34537,9.6217 2.67272,10.15624 6.41445,7.48355 6.31367,8.53998 -10.01635,-2.83482 -8.69344,-0.75595 -5.10271,4.53571 -5.48063,6.61459 -7.9375,0.94494 z",LAND:20,FOREST:60,MOUNTAINS:0,CENTER:{x:-529,y:196},NEIGHBOURS:[-1,91,93,94],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:93,PATH:"m -517.96833,134.23285 -3.20725,-6.949 -12.02711,-4.00904 -7.75084,3.74177 -3.74176,-7.48355 -8.81989,-2.13816 -5.61266,11.49259 8.01809,8.28536 -0.80182,8.28536 -7.21627,-4.00905 -5.07812,-6.68173 -8.81991,-2.40543 -2.93995,3.74177 2.40541,9.88898 -4.2763,13.0962 5.34538,8.28536 -5.07813,11.49259 -10.15621,3.74177 4.2763,5.34539 6.1472,9.88897 6.68173,-4.27631 7.48356,6.68174 -1.33636,-8.01809 9.6217,-4.27631 8.28535,-7.48355 9.35445,3.20724 8.81989,-5.07812 5.87994,-9.88898 -0.80182,-7.75081 -4.2763,-8.01809 6.14719,-6.949 z",LAND:20,FOREST:60,MOUNTAINS:20,CENTER:{x:-550,y:161},NEIGHBOURS:[-1,92,94,95,96],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:94,PATH:"m -522.51191,168.71062 -0.80182,-7.75081 -4.2763,-8.01809 6.14719,-6.949 3.47451,-11.75987 7.75081,-1.33634 2.13815,8.55262 6.41448,5.07812 1.60361,10.15625 10.15625,-4.81086 -1.8709,8.01809 7.75081,6.41447 -3.20723,9.6217 1.8709,13.89802 9.6217,5.34539 -7.31382,5.63475 -1.32292,4.34672 -9.6384,2.83482 -6.31367,-8.53998 -6.41445,-7.48355 -2.67272,-10.15624 -5.34537,-9.6217 z",LAND:10,FOREST:20,MOUNTAINS:40,CENTER:{x:-504,y:168},NEIGHBOURS:[89,91,92,93,95],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:95,PATH:"m -521.17558,127.28385 3.34819,-4.90885 10.20538,-0.56697 2.83483,-7.9375 -1.70091,-6.2366 6.4256,0.37797 0.56697,2.83483 6.2366,-2.64584 1.32292,-5.85863 8.31548,0.37798 1.88987,7.18154 7.72816,-0.92589 -1.47,2.93996 7.08266,-0.13363 2.80633,3.74177 5.74627,-0.93544 -2.80633,3.74177 -7.34991,3.0736 2.13818,3.0736 -7.34992,4.00904 -7.08265,-3.34087 -2.40541,5.34539 -1.47,8.68626 2.40543,4.14268 2.80633,2.13816 -1.46997,7.75081 -7.48355,-1.33635 -10.15625,4.81086 -1.60361,-10.15625 -6.41448,-5.07812 -2.13815,-8.55262 -7.75081,1.33634 z",LAND:30,FOREST:40,MOUNTAINS:0,CENTER:{x:-495,y:127},NEIGHBOURS:[87,88,89,93,94,96,98],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:96,PATH:"m -544.69529,119.53303 3.43339,-6.04047 -5.29167,-6.61458 -2.07886,-9.638399 -6.61458,-3.779761 3.59077,-3.401785 4.15774,2.645833 7.55951,-1.322916 h 8.31549 l 6.2366,-4.535715 7.9375,5.291666 3.59076,-3.590774 1.7009,-3.96875 6.99257,3.023809 8.12649,-0.566962 -0.75596,7.181546 5.10267,2.834822 0.75597,5.291666 -1.32292,5.85863 -6.2366,2.64584 -0.56697,-2.83483 -6.4256,-0.37797 1.70091,6.2366 -2.83483,7.9375 -10.20538,0.56697 -3.34819,4.90885 -12.02711,-4.00904 -7.75084,3.74177 z",LAND:20,FOREST:30,MOUNTAINS:10,CENTER:{x:-523,y:107},NEIGHBOURS:[-1,93,95,97,98],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:97,PATH:"m -539.93899,91.380952 -2.26784,-5.669643 -4.26125,-5.654448 1.71228,-5.871928 -2.26978,-6.225209 -0.18896,-10.919524 8.65927,-2.642033 5.31982,5.061077 3.69081,-2.096149 0.93544,-3.320824 -0.36278,-5.33464 4.5566,-4.339129 7.15497,5.813044 0.37798,8.504465 8.69344,2.83482 7.18156,10.583331 -8.12649,5.480658 -3.02382,6.992557 -1.7009,3.96875 -3.59076,3.590774 -7.9375,-5.291664 -6.2366,4.535715 z",LAND:20,FOREST:20,MOUNTAINS:20,CENTER:{x:-523,y:74},NEIGHBOURS:[-1,96,98],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:98,PATH:"m -512.15774,84.577377 3.02382,-6.992557 8.12649,-5.480656 -7.18156,-10.583333 -8.69344,-2.83482 -0.37798,-8.504465 7.18156,-9.827381 -0.94496,-8.126487 10.39434,-2.078868 12.09524,5.102677 8.12649,-9.071428 3.4018,5.480654 9.07143,-2.456844 8.69344,0.755952 9.26042,2.834822 -1.32292,5.102678 1.7009,4.724701 -5.85864,5.480656 -7.9375,-7.9375 -7.37053,2.078869 -3.2128,4.157739 2.64583,4.346725 9.44941,4.157737 0.94493,8.315478 -6.42559,4.535713 -0.18899,5.669642 -1.90236,2.808288 -4.27633,1.870887 -1.46997,3.34087 -3.47451,2.138156 1.33636,8.018084 -3.87543,0.400902 0.13364,6.280838 7.48356,2.138154 3.34086,6.68174 -3.74176,1.87089 -7.72816,0.92589 -1.88987,-7.18154 -8.31548,-0.37798 -0.75597,-5.291668 -5.10267,-2.83482 0.75596,-7.181546 -8.12649,0.56696 z",LAND:30,FOREST:60,MOUNTAINS:30,CENTER:{x:-488,y:62},NEIGHBOURS:[-1,85,87,95,96,97,99],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:99,PATH:"m -500.62947,30.14881 -3.02379,-4.724703 -9.07142,0.377976 -10.01639,-1.700893 -5.48066,-5.480655 -0.18899,-8.315476 3.59079,-5.6696427 -7.18156,-2.6458333 -6.80357,1.7008928 -0.94493,-6.0476189 7.37052,-4.7247022 3.21281,-8.3154767 7.9375,3.401786 7.37052,-3.023809 12.47323,0.94494 3.40177,6.4255951 13.79615,-4.9136901 3.59076,7.3705355 4.44122,6.9925593 -3.21278,6.1421129 -1.51191,7.0870533 -5.57514,3.212798 0.18899,7.559523 5.85861,0.377977 -8.12649,9.071428 z",LAND:30,FOREST:50,MOUNTAINS:0,CENTER:{x:-507,y:8},NEIGHBOURS:[-1,85,98,100,102],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:100,PATH:"m -497.03868,-59.431546 -8.31548,0.944941 -6.04761,4.724701 -5.1027,-4.157739 -0.94493,-4.913691 -7.37053,1.13393 -7.55954,5.102678 -5.48063,-3.96875 -4.91371,1.700892 v 3.779763 l 4.34673,2.456845 2.26785,5.858631 4.15774,3.401785 5.66966,-0.377976 3.40177,2.645834 -0.18899,2.078868 -3.40178,0.188989 -6.42559,-0.944941 -7.55951,2.456847 -8.1265,-0.377979 -3.77975,6.047621 3.40177,4.535713 5.48066,2.267858 4.5357,1.889881 -0.18897,6.992559 3.96875,3.96875 6.04761,-3.401786 7.9375,3.401786 7.37052,-3.023809 12.47323,0.94494 3.77976,-3.023809 -6.04761,-6.425596 -1.32292,-8.504462 6.04761,-4.346729 1.13393,-7.9375 -2.26785,-6.047618 z",LAND:20,FOREST:50,MOUNTAINS:0,CENTER:{x:-517,y:-32},NEIGHBOURS:[-1,99,101,102],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:101,PATH:"m -478.13989,-71.526785 -4.91368,-2.078869 -2.26785,-4.157739 -5.48066,-3.401785 -8.50447,1.700893 -3.96875,-5.480656 -6.04761,1.700895 -5.66965,-1.700895 -1.88987,-5.102677 -5.10267,-1.511906 -12.09524,3.590774 0.37795,4.535715 5.10271,2.456844 1.70087,5.858631 -3.40177,3.212799 2.45684,4.913691 3.02381,5.291666 7.37053,-1.13393 0.94493,4.913691 5.1027,4.157739 6.04761,-4.724701 8.31548,-0.944941 5.85862,-5.858632 7.37055,-1.133927 z",LAND:20,FOREST:20,MOUNTAINS:0,CENTER:{x:-509,y:-69},NEIGHBOURS:[-1,100,102,104],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:102,PATH:"m -457.35118,-12.845982 -3.4018,-6.52009 0.75597,-6.614583 6.2366,-10.205357 -1.51191,-6.614583 4.91368,-3.212798 0.189,-7.559524 -3.40178,-4.157737 -2.26785,-8.504465 6.2366,-4.157736 -0.18899,-3.968753 -6.04761,0.188989 -5.48066,3.212799 -5.66965,1.133927 -3.40177,-5.669642 -6.23663,0.377975 -1.51191,3.590775 -5.66962,5.10268 -7.37055,1.133927 -5.85862,5.858632 -3.02381,9.071427 2.26785,6.047618 -1.13393,7.9375 -6.04761,4.346729 1.32292,8.504462 6.04761,6.425596 -3.77976,3.023809 3.40177,6.4255951 13.79615,-4.9136901 3.59076,7.3705355 4.44122,6.9925593 9.54392,0.188988 -1.51191,-7.9374999 6.04761,-1.8898809 z",LAND:50,FOREST:60,MOUNTAINS:0,CENTER:{x:-480,y:-37},NEIGHBOURS:[84,85,99,100,101,103,104],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:103,PATH:"m -409.91517,-88.346726 -6.04763,-1.700892 -5.29167,4.346725 -1.32292,5.480656 -5.66962,2.078868 -6.80358,3.401785 -0.56697,5.669645 -3.96875,8.126487 -6.61458,1.322916 -3.21279,-4.157736 -6.42559,-2.456847 2.26785,8.504465 3.40178,4.157737 -0.189,7.559524 -4.91368,3.212798 1.51191,6.614583 4.34673,2.267858 0.37796,6.047618 8.12649,-3.779761 h 7.9375 l 4.72472,-6.614583 8.50445,-2.078871 4.72472,-6.425594 -1.32292,-4.913691 4.91368,-5.480653 0.37799,-6.803572 5.66962,-10.583331 -3.02379,-2.338731 5.3336,-4.84282 -1.64555,-6.324383 z",LAND:10,FOREST:30,MOUNTAINS:0,CENTER:{x:-429,y:-54},NEIGHBOURS:[82,83,84,102,104,105],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:104,PATH:"m -485.32142,-77.763393 2.07886,-5.480653 6.04763,-1.889882 6.42559,-3.023809 2.07886,-3.779763 4.91371,-4.157737 5.85862,-0.188989 5.66965,-0.755952 6.61458,4.157737 5.29167,3.590774 5.48066,-3.401785 7.18153,1.700893 -0.75594,-5.102678 -2.64584,-3.023809 3.96875,-0.944944 4.5357,2.645837 0.56698,3.77976 6.99257,-0.377975 -0.94496,3.968752 -5.29167,4.346723 -1.32292,5.480656 -5.66962,2.078868 -6.80358,3.401785 -0.56697,5.669645 -3.96875,8.126487 -6.61458,1.322916 -3.21279,-4.157736 -6.42559,-2.456847 6.2366,-4.157736 -0.18899,-3.968753 -6.04761,0.188989 -5.48066,3.212799 -5.66965,1.133927 -3.40177,-5.669642 -6.23663,0.377975 -1.51191,3.590775 -4.91368,-2.078869 z",LAND:20,FOREST:30,MOUNTAINS:30,CENTER:{x:-449,y:-82},NEIGHBOURS:[-1,101,102,103,105],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:105,PATH:"m -452.2485,-97.040178 2.26785,-6.236602 -2.64584,-6.04762 6.04764,-4.34673 0.37796,-4.7247 -4.91369,-7.55953 3.21281,-6.04762 -2.45687,-5.29166 0.94496,-6.23661 8.88244,-0.56696 7.37052,2.07887 5.48066,4.53571 6.99257,-0.18899 4.15774,5.85863 8.69344,-2.26785 -6.42559,7.18154 1.88989,4.72471 -0.94496,5.66964 9.26042,4.53571 3.21281,3.59078 7.18155,0.37797 -4.53572,6.23661 -1.7009,6.803573 -6.70235,0.880089 -3.31401,5.734492 -6.04763,-1.70089 0.94496,-3.96875 -6.99257,0.377973 -0.56698,-3.779758 -4.5357,-2.645839 -3.96875,0.944944 2.64584,3.023809 0.75594,5.10268 -7.18153,-1.700895 -5.48066,3.401785 z",LAND:30,FOREST:60,MOUNTAINS:0,CENTER:{x:-429,y:-115},NEIGHBOURS:[-1,80,81,82,103,104],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:106,PATH:"m -46.680059,119.91815 -5.669642,-7.37053 4.157737,-8.50447 9.449405,-5.858628 -1.889881,-10.77232 2.267857,-12.662204 7.181548,-7.748511 13.418154,-7.181548 0.377976,-9.449403 6.425596,-6.236608 6.8035709,-3.212798 -0.7559524,-7.9375 5.66964288,-3.401785 6.05942052,5.093113 0.6681737,14.03165 3.3408694,3.608139 2.004521,2.939965 -3.7417733,6.414468 -1.0690783,7.349911 -10.9580502,0.935445 -10.2898762,5.746295 -0.133635,15.234359 4.2763123,4.276315 -9.0871633,4.810855 -7.90603,9.12347 -10.016368,1.7009 -0.755952,7.37053 z",LAND:20,FOREST:60,MOUNTAINS:0,CENTER:{x:-20,y:75},NEIGHBOURS:[6,7,18,22,23,24,25],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:107,PATH:"m -231.98995,36.679481 8.55263,9.621702 1.06908,19.243405 17.35916,-9.795428 17.53764,3.566015 15.30329,-12.724403 3.77976,-9.071427 6.61458,-8.693452 -2.07887,-9.071429 -16.28698,1.423383 -20.31248,-8.552624 -22.98518,8.552624 z",LAND:20,FOREST:50,MOUNTAINS:0,CENTER:{x:-200,y:36},NEIGHBOURS:[29,37,38,46,47,48],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:108,PATH:"m 175.94791,-35.43006 4.49792,-4.781399 9.12813,-5.423958 -3.3073,-6.746875 -6.35,-0.132292 -6.61458,-3.307292 -1.45521,-5.688541 5.95313,-5.291667 -0.66146,-4.630208 -5.15938,-6.35 -1.5875,4.7625 0.66146,3.96875 -3.57187,4.233333 -6.21771,-0.132292 -9.12813,-3.968749 0.66146,-7.672917 -4.63021,-5.688542 -11.64166,-4.365625 -4.49792,2.778125 -10.31875,3.836459 -5.29166,-1.719792 -6.61459,3.2317 -1.88988,11.906247 13.47485,20.883184 17.78378,12.586608 -1.96547,11.320386 14.93005,-5.102678 3.2128,5.291667 15.30804,-5.858632 z",LAND:20,FOREST:60,MOUNTAINS:0,CENTER:{x:150,y:-48},NEIGHBOURS:[-1,16,17,20],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:109,PATH:"m -155.34821,133.33631 -3.02381,14.74107 5.09295,10.0761 11.22532,-0.53454 2.93996,5.21176 7.76707,-1.90213 10.01636,-8.12649 16.63096,-3.40178 -1.13393,-8.12649 4.34672,1.13393 2.834826,4.53571 3.96875,2.83482 3.590774,-6.61458 -0.755954,-7.9375 -10.016366,-6.80357 -2.26786,-8.50447 -9.54722,7.96695 -7.27652,2.27925 -4.4037,-4.96972 -0.28353,-14.18749 -10.61059,6.01356 -1.6838,7.64391 -6.21548,5.63935 z",LAND:20,FOREST:30,MOUNTAINS:0,CENTER:{x:-129,y:140},NEIGHBOURS:[24,26,27,28,39],WEALTH:0,HARBOUR:!1,TROOPS:[]}],COUNTRIES:[{COUNTRY:Uu.PLAYER,NAME:"Player nation",DIPLOMACY:0,POTENTIAL:0,COLOUR:"darkgreen",FOCUS:Fu.NONE,REGIONS:[0],CAPITAL:0},{COUNTRY:Uu.NEUTRAL,NAME:"none",DIPLOMACY:0,COLOUR:"gray",FOCUS:Fu.NONE,REGIONS:[1,2,3,4,5,7,13,14,15,16,17,18,22,27,30,31,37,38,39,40,41,42,43,44,45,47,48,49,50,51,53,54,55,56,58,59,63,64,69,73,74,82,83,87,88,93,95,96,97,98,99,100,101,102,103,104,107,108],CAPITAL:-1},{COUNTRY:Uu.CLEADAL,NAME:"Cleadal",DIPLOMACY:0,COLOUR:"darkred",FOCUS:Fu.ECONOMY,REGIONS:[6,23,24,25,26,28,29,106,109],CAPITAL:24},{COUNTRY:Uu.GRIERIA,NAME:"Grieria",DIPLOMACY:0,COLOUR:"#bcaa4f",FOCUS:Fu.PEACE,REGIONS:[8,9,10,11,12],CAPITAL:10},{COUNTRY:Uu.BOTHIL,NAME:"Bothil",DIPLOMACY:0,COLOUR:"#286fbc",FOCUS:Fu.DEFENSE,REGIONS:[19,20,21,32,33,34,35,36,52],CAPITAL:34},{COUNTRY:Uu.DOSHOR,NAME:"Doshor",DIPLOMACY:0,COLOUR:"#a163bc",FOCUS:Fu.OFFENSE,REGIONS:[57,75,76,77,78,79,80,81,105],CAPITAL:80},{COUNTRY:Uu.CREURUS,NAME:"Creurus",DIPLOMACY:0,COLOUR:"#bc6935",FOCUS:Fu.OFFENSE,REGIONS:[65,66,67,68,89,90,91,92,94],CAPITAL:90},{COUNTRY:Uu.ESTRAILA,NAME:"Estraila",DIPLOMACY:0,COLOUR:"#49a37e",FOCUS:Fu.ECONOMY,REGIONS:[46,60,61,62,70,71,72,84,85],CAPITAL:71}],SEA_AREAS:[{ID:-1,CENTER:{x:226,y:203},R:15,NEIGHBOURS:[-2,-46,-55,0,9]},{ID:-2,CENTER:{x:273,y:172},R:15,NEIGHBOURS:[-1,-3,-55,-57,-58]},{ID:-3,CENTER:{x:275,y:110},R:15,NEIGHBOURS:[-2,-4,-58,13]},{ID:-4,CENTER:{x:286,y:66},R:15,NEIGHBOURS:[-3,-5,-58,-59,14,13]},{ID:-5,CENTER:{x:280,y:9},R:15,NEIGHBOURS:[-4,-6,-59,14]},{ID:-6,CENTER:{x:256,y:-49},R:15,NEIGHBOURS:[-5,-7,-59,-60,16]},{ID:-7,CENTER:{x:210,y:-89},R:15,NEIGHBOURS:[-6,-8,-60,16]},{ID:-8,CENTER:{x:149,y:-118},R:15,NEIGHBOURS:[-7,-9,-60,-61,20,108]},{ID:-9,CENTER:{x:94,y:-137},R:15,NEIGHBOURS:[-8,-10,-61,20]},{ID:-10,CENTER:{x:33,y:-161},R:15,NEIGHBOURS:[-9,-11,-61,-62,33]},{ID:-11,CENTER:{x:-17,y:-182},R:15,NEIGHBOURS:[-10,-12,-62,35,34]},{ID:-12,CENTER:{x:-76,y:-176},R:15,NEIGHBOURS:[-11,-13,-62,-63,54,53,35,34]},{ID:-13,CENTER:{x:-131,y:-187},R:15,NEIGHBOURS:[-12,-14,-63,56,54]},{ID:-14,CENTER:{x:-185,y:-189},R:15,NEIGHBOURS:[-13,-15,-63,56,54]},{ID:-15,CENTER:{x:-224,y:-170},R:15,NEIGHBOURS:[-14,-16,57,56,54]},{ID:-16,CENTER:{x:-262,y:-190},R:15,NEIGHBOURS:[-15,-17,-64,76]},{ID:-17,CENTER:{x:-318,y:-196},R:15,NEIGHBOURS:[-16,-18,-64,78,76]},{ID:-18,CENTER:{x:-367,y:-209},R:15,NEIGHBOURS:[-17,-19,-64,79,78]},{ID:-19,CENTER:{x:-417,y:-214},R:15,NEIGHBOURS:[-18,-20,-65,80,79]},{ID:-20,CENTER:{x:-460,y:-202},R:15,NEIGHBOURS:[-19,-21,-65,-66,80]},{ID:-21,CENTER:{x:-469,y:-161},R:15,NEIGHBOURS:[-20,-22,-66,80]},{ID:-22,CENTER:{x:-471,y:-121},R:15,NEIGHBOURS:[-21,-23,104,105,80]},{ID:-23,CENTER:{x:-507,y:-105},R:15,NEIGHBOURS:[-22,-24,-66,104]},{ID:-24,CENTER:{x:-544,y:-102},R:15,NEIGHBOURS:[-23,-25,-66,-67]},{ID:-25,CENTER:{x:-563,y:-63},R:15,NEIGHBOURS:[-24,-26,-67,101]},{ID:-26,CENTER:{x:-570,y:-15},R:15,NEIGHBOURS:[-25,-27,-67,100]},{ID:-27,CENTER:{x:-553,y:20},R:15,NEIGHBOURS:[-26,-28,97,98,99]},{ID:-28,CENTER:{x:-563,y:60},R:15,NEIGHBOURS:[-27,-29,-68,97,98]},{ID:-29,CENTER:{x:-582,y:105},R:15,NEIGHBOURS:[-28,-30,-68,96]},{ID:-30,CENTER:{x:-597,y:154},R:15,NEIGHBOURS:[-29,-31,-69,93,96]},{ID:-31,CENTER:{x:-599,y:204},R:15,NEIGHBOURS:[-30,-32,-69,91]},{ID:-32,CENTER:{x:-570,y:242},R:15,NEIGHBOURS:[-31,-33,-70,91,92]},{ID:-33,CENTER:{x:-527,y:280},R:15,NEIGHBOURS:[-32,-34,-70,66,90,91]},{ID:-34,CENTER:{x:-476,y:294},R:15,NEIGHBOURS:[-33,-35,-71,66,90]},{ID:-35,CENTER:{x:-424,y:296},R:15,NEIGHBOURS:[-34,-36,-71,-72]},{ID:-36,CENTER:{x:-395,y:259},R:15,NEIGHBOURS:[-35,-37,42,65]},{ID:-37,CENTER:{x:-338,y:259},R:15,NEIGHBOURS:[-36,-38,-72,41,42]},{ID:-38,CENTER:{x:-279,y:261},R:15,NEIGHBOURS:[-37,-39,-72,40,41]},{ID:-39,CENTER:{x:-234,y:265},R:15,NEIGHBOURS:[-38,-40,-73]},{ID:-40,CENTER:{x:-174,y:250},R:15,NEIGHBOURS:[-39,-41,-73,27]},{ID:-41,CENTER:{x:-126,y:232},R:15,NEIGHBOURS:[-40,-42,26]},{ID:-42,CENTER:{x:-67,y:224},R:15,NEIGHBOURS:[-41,-43,-74,25,26]},{ID:-43,CENTER:{x:-10,y:223},R:15,NEIGHBOURS:[-42,-44,-74]},{ID:-44,CENTER:{x:48,y:233},R:15,NEIGHBOURS:[-43,-45,-47,2,5]},{ID:-45,CENTER:{x:103,y:229},R:15,NEIGHBOURS:[-44,-46,-47,2,5]},{ID:-46,CENTER:{x:167,y:215},R:15,NEIGHBOURS:[-45,-1]},{ID:-47,CENTER:{x:75,y:280},R:15,NEIGHBOURS:[-44,-45,-48,-74,8]},{ID:-48,CENTER:{x:76,y:338},R:15,NEIGHBOURS:[-47,-49,-74,-75]},{ID:-49,CENTER:{x:124,y:381},R:15,NEIGHBOURS:[-48,-50,-75,10]},{ID:-50,CENTER:{x:192,y:367},R:15,NEIGHBOURS:[-49,-51,-56,-76,11]},{ID:-51,CENTER:{x:250,y:381},R:15,NEIGHBOURS:[-50,-52,-56,-76]},{ID:-52,CENTER:{x:316,y:384},R:15,NEIGHBOURS:[-51,-53,-77]},{ID:-53,CENTER:{x:330,y:331},R:15,NEIGHBOURS:[-52,-54,-78]},{ID:-54,CENTER:{x:287,y:293},R:15,NEIGHBOURS:[-53,-55,-56,-57,12]},{ID:-55,CENTER:{x:243,y:253},R:15,NEIGHBOURS:[-54,-1,-2,-56,-57,9]},{ID:-56,CENTER:{x:237,y:334},R:15,NEIGHBOURS:[-50,-54,-55,-51,11]},{ID:-57,CENTER:{x:350,y:229},R:58,NEIGHBOURS:[-78,-58,-79,-54,-55,-2]},{ID:-58,CENTER:{x:366,y:97},R:58,NEIGHBOURS:[-57,-58,-59,-79,-80,-2,-3,-4]},{ID:-59,CENTER:{x:361,y:-30},R:58,NEIGHBOURS:[-58,-60,-80,-4,-5,-6]},{ID:-60,CENTER:{x:271,y:-144},R:58,NEIGHBOURS:[-59,-61,-81,-6,-7,-8]},{ID:-61,CENTER:{x:147,y:-212},R:58,NEIGHBOURS:[-60,-62,-81,-82,-8,-9,-10]},{ID:-62,CENTER:{x:4,y:-256},R:58,NEIGHBOURS:[-61,-63,-82,-83,-10,-11,-12]},{ID:-63,CENTER:{x:-146,y:-265},R:58,NEIGHBOURS:[-62,-64,-83,-12,-13,-14]},{ID:-64,CENTER:{x:-289,y:-271},R:58,NEIGHBOURS:[-63,-65,-83,-84,-16,-17,-18]},{ID:-65,CENTER:{x:-433,y:-291},R:58,NEIGHBOURS:[-64,-66,-84,-85,-19,-20]},{ID:-66,CENTER:{x:-556,y:-189},R:58,NEIGHBOURS:[-65,-67,-85,-86,-20,-21,-23,-24]},{ID:-67,CENTER:{x:-648,y:-80},R:58,NEIGHBOURS:[-66,-68,-86,-87,-24,-25,-26]},{ID:-68,CENTER:{x:-663,y:58},R:58,NEIGHBOURS:[-67,-69,-87,-28,-29]},{ID:-69,CENTER:{x:-688,y:195},R:58,NEIGHBOURS:[-68,-70,-87,-88,-30,-31]},{ID:-70,CENTER:{x:-609,y:320},R:58,NEIGHBOURS:[-69,-71,-88,-89,-32,-33]},{ID:-71,CENTER:{x:-476,y:370},R:58,NEIGHBOURS:[-70,-72,-89,-90,-35,-34]},{ID:-72,CENTER:{x:-336,y:341},R:58,NEIGHBOURS:[-71,-73,-90,-91,-35,-37,-38]},{ID:-73,CENTER:{x:-185,y:332},R:58,NEIGHBOURS:[-72,-74,-90,-91,-39,-40]},{ID:-74,CENTER:{x:-37,y:307},R:58,NEIGHBOURS:[-73,-75,-91,-42,-43,-47,-48]},{ID:-75,CENTER:{x:52,y:423},R:58,NEIGHBOURS:[-74,-76,-91,-92,-48,-49]},{ID:-76,CENTER:{x:202,y:456},R:58,NEIGHBOURS:[-75,-77,-92,-50,-51]},{ID:-77,CENTER:{x:348,y:455},R:58,NEIGHBOURS:[-76,-78,-92,-93,-94,-52]},{ID:-78,CENTER:{x:421,y:339},R:58,NEIGHBOURS:[-77,-79,-94,-53,-57]},{ID:-79,CENTER:{x:575,y:187},R:120,NEIGHBOURS:[-80,-94,-57,-58,-78,-9999]},{ID:-80,CENTER:{x:552,y:-76},R:120,NEIGHBOURS:[-79,-81,-58,-59]},{ID:-81,CENTER:{x:401,y:-296},R:120,NEIGHBOURS:[-80,-82,-60,-61]},{ID:-82,CENTER:{x:165,y:-412},R:120,NEIGHBOURS:[-81,-83,-61,-62]},{ID:-83,CENTER:{x:-97,y:-460},R:120,NEIGHBOURS:[-82,-84,-62,-63,-64]},{ID:-84,CENTER:{x:-358,y:-479},R:120,NEIGHBOURS:[-83,-85,-64,-65]},{ID:-85,CENTER:{x:-614,y:-397},R:120,NEIGHBOURS:[-84,-86,-65,-66]},{ID:-86,CENTER:{x:-809,y:-216},R:120,NEIGHBOURS:[-85,-87,-66,-67]},{ID:-87,CENTER:{x:-873,y:47},R:120,NEIGHBOURS:[-86,-88,-67,-68,-69]},{ID:-88,CENTER:{x:-863,y:312},R:120,NEIGHBOURS:[-87,-89,-69,-70]},{ID:-89,CENTER:{x:-654,y:515},R:120,NEIGHBOURS:[-88,-90,-70,-71]},{ID:-90,CENTER:{x:-379,y:552},R:120,NEIGHBOURS:[-89,-91,-71,-72,-73]},{ID:-91,CENTER:{x:-111,y:534},R:120,NEIGHBOURS:[-90,-92,-72,-73,-74,-75]},{ID:-92,CENTER:{x:150,y:643},R:120,NEIGHBOURS:[-91,-93,-75,-76,-77]},{ID:-93,CENTER:{x:420,y:654},R:120,NEIGHBOURS:[-92,-94,-77]},{ID:-94,CENTER:{x:598,y:456},R:120,NEIGHBOURS:[-93,-79,-77,-78]},{ID:0,CENTER:{x:203,y:161},R:0,NEIGHBOURS:[-1]},{ID:2,CENTER:{x:112,y:169},R:0,NEIGHBOURS:[-45,-44]},{ID:5,CENTER:{x:31,y:202},R:0,NEIGHBOURS:[-44,-45]},{ID:25,CENTER:{x:-48,y:168},R:0,NEIGHBOURS:[-42]},{ID:26,CENTER:{x:-98,y:201},R:0,NEIGHBOURS:[-41,-42]},{ID:27,CENTER:{x:-156,y:193},R:0,NEIGHBOURS:[-40]},{ID:40,CENTER:{x:-233,y:211},R:0,NEIGHBOURS:[-38]},{ID:41,CENTER:{x:-305,y:238},R:0,NEIGHBOURS:[-38,-37]},{ID:42,CENTER:{x:-350,y:243},R:0,NEIGHBOURS:[-37,-36]},{ID:65,CENTER:{x:-388,y:229},R:0,NEIGHBOURS:[-36]},{ID:66,CENTER:{x:-445,y:260},R:0,NEIGHBOURS:[-34,-33]},{ID:90,CENTER:{x:-489,y:252},R:0,NEIGHBOURS:[-34,-33]},{ID:91,CENTER:{x:-540,y:245},R:0,NEIGHBOURS:[-33,-32,-31]},{ID:92,CENTER:{x:-539,y:206},R:0,NEIGHBOURS:[-32]},{ID:93,CENTER:{x:-574,y:167},R:0,NEIGHBOURS:[-30]},{ID:96,CENTER:{x:-549,y:98},R:0,NEIGHBOURS:[-29,-30]},{ID:97,CENTER:{x:-530,y:48},R:0,NEIGHBOURS:[-28,-27]},{ID:98,CENTER:{x:-511,y:36},R:0,NEIGHBOURS:[-28,-27]},{ID:99,CENTER:{x:-526,y:5},R:0,NEIGHBOURS:[-27]},{ID:100,CENTER:{x:-540,y:-22},R:0,NEIGHBOURS:[-26]},{ID:101,CENTER:{x:-528,y:-76},R:0,NEIGHBOURS:[-25]},{ID:104,CENTER:{x:-472,y:-89},R:0,NEIGHBOURS:[-23,-22]},{ID:105,CENTER:{x:-447,y:-115},R:0,NEIGHBOURS:[-22]},{ID:80,CENTER:{x:-449,y:-171},R:0,NEIGHBOURS:[-21,-20,-19,-22]},{ID:79,CENTER:{x:-396,y:-184},R:0,NEIGHBOURS:[-19,-18]},{ID:78,CENTER:{x:-355,y:-172},R:0,NEIGHBOURS:[-17,-18]},{ID:76,CENTER:{x:-270,y:-169},R:0,NEIGHBOURS:[-16,-17]},{ID:57,CENTER:{x:-232,y:-140},R:0,NEIGHBOURS:[-15]},{ID:56,CENTER:{x:-195,y:-160},R:0,NEIGHBOURS:[-15,-14,-13]},{ID:54,CENTER:{x:-149,y:-161},R:0,NEIGHBOURS:[-15,-14,-13,-12]},{ID:53,CENTER:{x:-112,y:-152},R:0,NEIGHBOURS:[-12]},{ID:35,CENTER:{x:-80,y:-143},R:0,NEIGHBOURS:[-12,-11]},{ID:34,CENTER:{x:-48,y:-146},R:0,NEIGHBOURS:[-12,-11]},{ID:33,CENTER:{x:17,y:-125},R:0,NEIGHBOURS:[-10]},{ID:20,CENTER:{x:86,y:-96},R:0,NEIGHBOURS:[-9,-8]},{ID:108,CENTER:{x:167,y:-66},R:0,NEIGHBOURS:[-8]},{ID:16,CENTER:{x:221,y:-35},R:0,NEIGHBOURS:[-7,-6]},{ID:14,CENTER:{x:256,y:44},R:0,NEIGHBOURS:[-5,-4]},{ID:13,CENTER:{x:222,y:75},R:0,NEIGHBOURS:[-4,-3]},{ID:8,CENTER:{x:115,y:281},R:0,NEIGHBOURS:[-47]},{ID:9,CENTER:{x:203,y:247},R:0,NEIGHBOURS:[-1,-55]},{ID:10,CENTER:{x:128,y:348},R:0,NEIGHBOURS:[-49]},{ID:11,CENTER:{x:209,y:326},R:0,NEIGHBOURS:[-50,-56]},{ID:12,CENTER:{x:287,y:323},R:0,NEIGHBOURS:[-54]},{ID:-9999,CENTER:{x:1204,y:149},R:0,NEIGHBOURS:[-79]}],SEA_EVENTS:{FISH:{FOR_RADIUS:0,NUMBER_INIT:5,SPAWN_CHANCE:.01,SPAWN_DECREASE:5e-4,NUMBER_MIN:1,NUMBER_MAX:15,POWER_MIN:500,POWER_MAX:1e3,TIME_MIN:10,TIME_MAX:0},SHARK:{FOR_RADIUS:0,NUMBER_INIT:4,SPAWN_CHANCE:.005,SPAWN_DECREASE:4e-4,NUMBER_MIN:0,NUMBER_MAX:10,POWER_MIN:250,POWER_MAX:750,TIME_MIN:0,TIME_MAX:0},TREASURE:{FOR_RADIUS:0,NUMBER_INIT:2,SPAWN_CHANCE:.001,SPAWN_DECREASE:3e-4,NUMBER_MIN:1,NUMBER_MAX:3,POWER_MIN:500,POWER_MAX:2e3,TIME_MIN:0,TIME_MAX:0},PIRATES:{FOR_RADIUS:0,NUMBER_INIT:3,SPAWN_CHANCE:.002,SPAWN_DECREASE:2e-4,NUMBER_MIN:1,NUMBER_MAX:7,POWER_MIN:100,POWER_MAX:1e3,TIME_MIN:0,TIME_MAX:0},PIRATES_BASE:{FOR_RADIUS:100,NUMBER_INIT:0,SPAWN_CHANCE:5e-4,SPAWN_DECREASE:4e-4,NUMBER_MIN:0,NUMBER_MAX:1,POWER_MIN:2e3,POWER_MAX:3e3,TIME_MIN:100,TIME_MAX:300},WHIRLPOOL:{FOR_RADIUS:0,NUMBER_INIT:2,SPAWN_CHANCE:.012,SPAWN_DECREASE:.002,NUMBER_MIN:0,NUMBER_MAX:5,POWER_MIN:1,POWER_MAX:1,TIME_MIN:100,TIME_MAX:360},CARTOGRAPHY:{FOR_RADIUS:20,NUMBER_INIT:1,SPAWN_CHANCE:.1,SPAWN_DECREASE:.03,NUMBER_MIN:1,NUMBER_MAX:3,POWER_MIN:50,POWER_MAX:300,TIME_MIN:0,TIME_MAX:0}}},_s={getSickness:function(e){var n=Object.entries(this.SICKNESS).find(function(n){return n[0]===Hu[e]});if(n)return n[1];console.warn("Invalid sickness: "+Vu.prepareSicknessName(e))},SICKNESS:{COLD:{CHANCE:20,DURATION:20,LETHALITY:20},FLU:{CHANCE:10,DURATION:30,LETHALITY:40},PNEUMONIA:{CHANCE:5,DURATION:60,LETHALITY:70}}},ws={SMALL_REFUGEE:{EVENT:ls.SMALL_REFUGEE,CHANCE:.0033,MIN_POWER:3,MAX_POWER:7,PREREQUISITES:[],LOG:{MESSAGE:"Small group of refugees came to your village",LOG_TYPE:ts.LOG}},MEDIUM_REFUGEE:{EVENT:ls.MEDIUM_REFUGEE,CHANCE:55e-5,MIN_POWER:10,MAX_POWER:20,PREREQUISITES:[_u.LONGHOUSE],LOG:{MESSAGE:"Medium group of refugees came to your village",LOG_TYPE:ts.LOG}},METEORITE:{EVENT:ls.METEORITE,CHANCE:18e-5,MIN_POWER:100,MAX_POWER:200,PREREQUISITES:[_u.MOUNTAINS],LOG:{MESSAGE:"A meteoroid has fallen somewhere in the mountains",LOG_TYPE:ts.SUCCESS}}},Ps=function(){return function(){}}(),xs=function(){function e(){this.title="app"}return e.prototype.isIE=function(){return-1!==navigator.userAgent.indexOf("MSIE")||1==!!document.documentMode},e.prototype.catchContextMenu=function(e){return!1},e}(),ks=function(){return function(){}}(),Ms=new Le("Location Initialized"),Ds=function(){return function(){}}(),Ls=new Le("appBaseHref"),Fs=function(){function e(e,t){var l=this;this._subject=new Gi,this._urlChangeListeners=[],this._platformStrategy=e;var i=this._platformStrategy.getBaseHref();this._platformLocation=t,this._baseHref=n.stripTrailingSlash(Us(i)),this._platformStrategy.onPopState(function(e){l._subject.emit({url:l.path(!0),pop:!0,state:e.state,type:e.type})})}var n;return n=e,e.prototype.path=function(e){return void 0===e&&(e=!1),this.normalize(this._platformStrategy.path(e))},e.prototype.getState=function(){return this._platformLocation.getState()},e.prototype.isCurrentPathEqualTo=function(e,t){return void 0===t&&(t=""),this.path()==this.normalize(e+n.normalizeQueryParams(t))},e.prototype.normalize=function(e){return n.stripTrailingSlash(function(e,n){return e&&n.startsWith(e)?n.substring(e.length):n}(this._baseHref,Us(e)))},e.prototype.prepareExternalUrl=function(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)},e.prototype.go=function(e,t,l){void 0===t&&(t=""),void 0===l&&(l=null),this._platformStrategy.pushState(l,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+n.normalizeQueryParams(t)),l)},e.prototype.replaceState=function(e,t,l){void 0===t&&(t=""),void 0===l&&(l=null),this._platformStrategy.replaceState(l,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+n.normalizeQueryParams(t)),l)},e.prototype.forward=function(){this._platformStrategy.forward()},e.prototype.back=function(){this._platformStrategy.back()},e.prototype.onUrlChange=function(e){var n=this;this._urlChangeListeners.push(e),this.subscribe(function(e){n._notifyUrlChangeListeners(e.url,e.state)})},e.prototype._notifyUrlChangeListeners=function(e,n){void 0===e&&(e=""),this._urlChangeListeners.forEach(function(t){return t(e,n)})},e.prototype.subscribe=function(e,n,t){return this._subject.subscribe({next:e,error:n,complete:t})},e.normalizeQueryParams=function(e){return e&&"?"!==e[0]?"?"+e:e},e.joinWithSlash=function(e,n){if(0==e.length)return n;if(0==n.length)return e;var t=0;return e.endsWith("/")&&t++,n.startsWith("/")&&t++,2==t?e+n.substring(1):1==t?e+n:e+"/"+n},e.stripTrailingSlash=function(e){var n=e.match(/#|\?|$/),t=n&&n.index||e.length;return e.slice(0,t-("/"===e[t-1]?1:0))+e.slice(t)},e}();function Us(e){return e.replace(/\/index.html$/,"")}var Hs=function(e){function n(n,t){var l=e.call(this)||this;return l._platformLocation=n,l._baseHref="",null!=t&&(l._baseHref=t),l}return i(n,e),n.prototype.onPopState=function(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)},n.prototype.getBaseHref=function(){return this._baseHref},n.prototype.path=function(e){void 0===e&&(e=!1);var n=this._platformLocation.hash;return null==n&&(n="#"),n.length>0?n.substring(1):n},n.prototype.prepareExternalUrl=function(e){var n=Fs.joinWithSlash(this._baseHref,e);return n.length>0?"#"+n:n},n.prototype.pushState=function(e,n,t,l){var i=this.prepareExternalUrl(t+Fs.normalizeQueryParams(l));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(e,n,i)},n.prototype.replaceState=function(e,n,t,l){var i=this.prepareExternalUrl(t+Fs.normalizeQueryParams(l));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(e,n,i)},n.prototype.forward=function(){this._platformLocation.forward()},n.prototype.back=function(){this._platformLocation.back()},n}(Ds),Gs=function(e){function n(n,t){var l=e.call(this)||this;if(l._platformLocation=n,null==t&&(t=l._platformLocation.getBaseHrefFromDOM()),null==t)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return l._baseHref=t,l}return i(n,e),n.prototype.onPopState=function(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)},n.prototype.getBaseHref=function(){return this._baseHref},n.prototype.prepareExternalUrl=function(e){return Fs.joinWithSlash(this._baseHref,e)},n.prototype.path=function(e){void 0===e&&(e=!1);var n=this._platformLocation.pathname+Fs.normalizeQueryParams(this._platformLocation.search),t=this._platformLocation.hash;return t&&e?""+n+t:n},n.prototype.pushState=function(e,n,t,l){var i=this.prepareExternalUrl(t+Fs.normalizeQueryParams(l));this._platformLocation.pushState(e,n,i)},n.prototype.replaceState=function(e,n,t,l){var i=this.prepareExternalUrl(t+Fs.normalizeQueryParams(l));this._platformLocation.replaceState(e,n,i)},n.prototype.forward=function(){this._platformLocation.forward()},n.prototype.back=function(){this._platformLocation.back()},n}(Ds),Bs=function(e){return e[e.Decimal=0]="Decimal",e[e.Percent=1]="Percent",e[e.Currency=2]="Currency",e[e.Scientific=3]="Scientific",e}({}),Vs=function(e){return e[e.Zero=0]="Zero",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Few=3]="Few",e[e.Many=4]="Many",e[e.Other=5]="Other",e}({}),Ws=function(e){return e[e.Decimal=0]="Decimal",e[e.Group=1]="Group",e[e.List=2]="List",e[e.PercentSign=3]="PercentSign",e[e.PlusSign=4]="PlusSign",e[e.MinusSign=5]="MinusSign",e[e.Exponential=6]="Exponential",e[e.SuperscriptingExponent=7]="SuperscriptingExponent",e[e.PerMille=8]="PerMille",e[e[1/0]=9]="Infinity",e[e.NaN=10]="NaN",e[e.TimeSeparator=11]="TimeSeparator",e[e.CurrencyDecimal=12]="CurrencyDecimal",e[e.CurrencyGroup=13]="CurrencyGroup",e}({});function zs(e,n){var t=Hi(e),l=t[Li.NumberSymbols][n];if(void 0===l){if(n===Ws.CurrencyDecimal)return t[Li.NumberSymbols][Ws.Decimal];if(n===Ws.CurrencyGroup)return t[Li.NumberSymbols][Ws.Group]}return l}var Ys=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function Ks(e){var n=parseInt(e);if(isNaN(n))throw new Error("Invalid integer literal when parsing "+e);return n}var js=new Le("UseV4Plurals"),$s=function(){return function(){}}(),Qs=function(e){function n(n,t){var l=e.call(this)||this;return l.locale=n,l.deprecatedPluralFn=t,l}return i(n,e),n.prototype.getPluralCategory=function(e,n){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(n||this.locale,e):function(e){return Hi(e)[Li.PluralCase]}(n||this.locale)(e)){case Vs.Zero:return"zero";case Vs.One:return"one";case Vs.Two:return"two";case Vs.Few:return"few";case Vs.Many:return"many";default:return"other"}},n}($s);function qs(e,n){var t,l;n=encodeURIComponent(n);try{for(var i=s(e.split(";")),r=i.next();!r.done;r=i.next()){var o=r.value,u=o.indexOf("="),c=a(-1==u?[o,""]:[o.slice(0,u),o.slice(u+1)],2),p=c[1];if(c[0].trim()===n)return decodeURIComponent(p)}}catch(h){t={error:h}}finally{try{r&&!r.done&&(l=i.return)&&l.call(i)}finally{if(t)throw t.error}}return null}var Xs=function(){return function(){}}(),Zs=function(){function e(e,n,t,l){this._iterableDiffers=e,this._keyValueDiffers=n,this._ngEl=t,this._renderer=l,this._initialClasses=[]}return e.prototype.getValue=function(){return null},e.prototype.setClass=function(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)},e.prototype.setNgClass=function(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(Xn(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())},e.prototype.applyChanges=function(){if(this._iterableDiffer){var e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){var n=this._keyValueDiffer.diff(this._rawClass);n&&this._applyKeyValueChanges(n)}},e.prototype._applyKeyValueChanges=function(e){var n=this;e.forEachAddedItem(function(e){return n._toggleClass(e.key,e.currentValue)}),e.forEachChangedItem(function(e){return n._toggleClass(e.key,e.currentValue)}),e.forEachRemovedItem(function(e){e.previousValue&&n._toggleClass(e.key,!1)})},e.prototype._applyIterableChanges=function(e){var n=this;e.forEachAddedItem(function(e){if("string"!=typeof e.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got "+Ie(e.item));n._toggleClass(e.item,!0)}),e.forEachRemovedItem(function(e){return n._toggleClass(e.item,!1)})},e.prototype._applyClasses=function(e){var n=this;e&&(Array.isArray(e)||e instanceof Set?e.forEach(function(e){return n._toggleClass(e,!0)}):Object.keys(e).forEach(function(t){return n._toggleClass(t,!!e[t])}))},e.prototype._removeClasses=function(e){var n=this;e&&(Array.isArray(e)||e instanceof Set?e.forEach(function(e){return n._toggleClass(e,!1)}):Object.keys(e).forEach(function(e){return n._toggleClass(e,!1)}))},e.prototype._toggleClass=function(e,n){var t=this;(e=e.trim())&&e.split(/\s+/g).forEach(function(e){n?t._renderer.addClass(t._ngEl.nativeElement,e):t._renderer.removeClass(t._ngEl.nativeElement,e)})},e}(),Js=function(e){function n(n){return e.call(this,n)||this}return i(n,e),Object.defineProperty(n.prototype,"klass",{set:function(e){this._delegate.setClass(e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"ngClass",{set:function(e){this._delegate.setNgClass(e)},enumerable:!0,configurable:!0}),n.prototype.ngDoCheck=function(){this._delegate.applyChanges()},n}(function(){function e(e){this._delegate=e}return e.prototype.getValue=function(){return this._delegate.getValue()},e.ngDirectiveDef=void 0,e}()),ea=function(){function e(e,n,t,l){this.$implicit=e,this.ngForOf=n,this.index=t,this.count=l}return Object.defineProperty(e.prototype,"first",{get:function(){return 0===this.index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"last",{get:function(){return this.index===this.count-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"even",{get:function(){return this.index%2==0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"odd",{get:function(){return!this.even},enumerable:!0,configurable:!0}),e}(),na=function(){function e(e,n,t){this._viewContainer=e,this._template=n,this._differs=t,this._ngForOfDirty=!0,this._differ=null}return Object.defineProperty(e.prototype,"ngForOf",{set:function(e){this._ngForOf=e,this._ngForOfDirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngForTrackBy",{get:function(){return this._trackByFn},set:function(e){gn()&&null!=e&&"function"!=typeof e&&console&&console.warn&&console.warn("trackBy must be a function, but received "+JSON.stringify(e)+". See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."),this._trackByFn=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngForTemplate",{set:function(e){e&&(this._template=e)},enumerable:!0,configurable:!0}),e.prototype.ngDoCheck=function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(l){throw new Error("Cannot find a differ supporting object '"+e+"' of type '"+((n=e).name||typeof n)+"'. NgFor only supports binding to Iterables such as Arrays.")}}var n;if(this._differ){var t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}},e.prototype._applyChanges=function(e){var n=this,t=[];e.forEachOperation(function(e,l,i){if(null==e.previousIndex){var r=n._viewContainer.createEmbeddedView(n._template,new ea(null,n._ngForOf,-1,-1),i),o=new ta(e,r);t.push(o)}else null==i?n._viewContainer.remove(l):(r=n._viewContainer.get(l),n._viewContainer.move(r,i),o=new ta(e,r),t.push(o))});for(var l=0;l<t.length;l++)this._perViewChange(t[l].view,t[l].record);l=0;for(var i=this._viewContainer.length;l<i;l++){var r=this._viewContainer.get(l);r.context.index=l,r.context.count=i,r.context.ngForOf=this._ngForOf}e.forEachIdentityChange(function(e){n._viewContainer.get(e.currentIndex).context.$implicit=e.item})},e.prototype._perViewChange=function(e,n){e.context.$implicit=n.item},e.ngTemplateContextGuard=function(e,n){return!0},e}(),ta=function(){return function(e,n){this.record=e,this.view=n}}(),la=function(){function e(e,n){this._viewContainer=e,this._context=new ia,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}return Object.defineProperty(e.prototype,"ngIf",{set:function(e){this._context.$implicit=this._context.ngIf=e,this._updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngIfThen",{set:function(e){ra("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngIfElse",{set:function(e){ra("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()},enumerable:!0,configurable:!0}),e.prototype._updateView=function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))},e}(),ia=function(){return function(){this.$implicit=null,this.ngIf=null}}();function ra(e,n){if(n&&!n.createEmbeddedView)throw new Error(e+" must be a TemplateRef, but received '"+Ie(n)+"'.")}var oa=function(){function e(e,n){this._viewContainerRef=e,this._templateRef=n,this._created=!1}return e.prototype.create=function(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)},e.prototype.destroy=function(){this._created=!1,this._viewContainerRef.clear()},e.prototype.enforceState=function(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()},e}(),ua=function(){function e(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}return Object.defineProperty(e.prototype,"ngSwitch",{set:function(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)},enumerable:!0,configurable:!0}),e.prototype._addCase=function(){return this._caseCount++},e.prototype._addDefault=function(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)},e.prototype._matchCase=function(e){var n=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||n,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),n},e.prototype._updateDefaultCases=function(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(var n=0;n<this._defaultViews.length;n++)this._defaultViews[n].enforceState(e)}},e}(),sa=function(){function e(e,n,t){this.ngSwitch=t,t._addCase(),this._view=new oa(e,n)}return e.prototype.ngDoCheck=function(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))},e}(),aa=function(){return function(){}}(),ca=function(){function e(e,n,t){this._ngEl=e,this._differs=n,this._renderer=t}return e.prototype.getValue=function(){return null},e.prototype.setNgStyle=function(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())},e.prototype.applyChanges=function(){if(this._differ){var e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}},e.prototype._applyChanges=function(e){var n=this;e.forEachRemovedItem(function(e){return n._setStyle(e.key,null)}),e.forEachAddedItem(function(e){return n._setStyle(e.key,e.currentValue)}),e.forEachChangedItem(function(e){return n._setStyle(e.key,e.currentValue)})},e.prototype._setStyle=function(e,n){var t=a(e.split("."),2),l=t[0],i=t[1];null!=(n=null!=n&&i?""+n+i:n)?this._renderer.setStyle(this._ngEl.nativeElement,l,n):this._renderer.removeStyle(this._ngEl.nativeElement,l)},e}(),pa=function(e){function n(n){return e.call(this,n)||this}return i(n,e),Object.defineProperty(n.prototype,"ngStyle",{set:function(e){this._delegate.setNgStyle(e)},enumerable:!0,configurable:!0}),n.prototype.ngDoCheck=function(){this._delegate.applyChanges()},n}(function(){function e(e){this._delegate=e}return e.prototype.getValue=function(){return this._delegate.getValue()},e.ngDirectiveDef=void 0,e}());function ha(e,n){return Error("InvalidPipeArgument: '"+n+"' for pipe '"+Ie(e)+"'")}var da=/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D])\S*/g,ga=function(){function e(){}var n;return n=e,e.prototype.transform=function(e){if(!e)return e;if("string"!=typeof e)throw ha(n,e);return e.replace(da,function(e){return e[0].toUpperCase()+e.substr(1).toLowerCase()})},e}(),fa=function(){function e(e){this.differs=e,this.keyValues=[]}return e.prototype.transform=function(e,n){var t=this;if(void 0===n&&(n=ma),!e||!(e instanceof Map)&&"object"!=typeof e)return null;this.differ||(this.differ=this.differs.find(e).create());var l=this.differ.diff(e);return l&&(this.keyValues=[],l.forEachItem(function(e){t.keyValues.push({key:e.key,value:e.currentValue})}),this.keyValues.sort(n)),this.keyValues},e}();function ma(e,n){var t=e.key,l=n.key;if(t===l)return 0;if(void 0===t)return 1;if(void 0===l)return-1;if(null===t)return 1;if(null===l)return-1;if("string"==typeof t&&"string"==typeof l)return t<l?-1:1;if("number"==typeof t&&"number"==typeof l)return t-l;if("boolean"==typeof t&&"boolean"==typeof l)return t<l?-1:1;var i=String(t),r=String(l);return i==r?0:i<r?-1:1}var va=function(){function e(e){this._locale=e}var n;return n=e,e.prototype.transform=function(e,t,l){if(function(e){return null==e||""===e||e!=e}(e))return null;l=l||this._locale;try{return function(e,n,t){return function(e,n,t,l,i,r,o){void 0===o&&(o=!1);var u="",s=!1;if(isFinite(e)){var a=function(n){var t,l,i,r,o,u=Math.abs(e)+"",s=0;for((l=u.indexOf("."))>-1&&(u=u.replace(".","")),(i=u.search(/e/i))>0?(l<0&&(l=i),l+=+u.slice(i+1),u=u.substring(0,i)):l<0&&(l=u.length),i=0;"0"===u.charAt(i);i++);if(i===(o=u.length))t=[0],l=1;else{for(o--;"0"===u.charAt(o);)o--;for(l-=i,t=[],r=0;i<=o;i++,r++)t[r]=Number(u.charAt(i))}return l>22&&(t=t.splice(0,21),s=l-1,l=1),{digits:t,exponent:s,integerLen:l}}();o&&(a=function(e){if(0===e.digits[0])return e;var n=e.digits.length-e.integerLen;return e.exponent?e.exponent+=2:(0===n?e.digits.push(0,0):1===n&&e.digits.push(0),e.integerLen+=2),e}(a));var c=n.minInt,p=n.minFrac,h=n.maxFrac;if(r){var d=r.match(Ys);if(null===d)throw new Error(r+" is not a valid digit info");var g=d[1],f=d[3],m=d[5];null!=g&&(c=Ks(g)),null!=f&&(p=Ks(f)),null!=m?h=Ks(m):null!=f&&p>h&&(h=p)}!function(e,n,t){if(n>t)throw new Error("The minimum number of digits after fraction ("+n+") is higher than the maximum ("+t+").");var l=e.digits,i=l.length-e.integerLen,r=Math.min(Math.max(n,i),t),o=r+e.integerLen,u=l[o];if(o>0){l.splice(Math.max(e.integerLen,o));for(var s=o;s<l.length;s++)l[s]=0}else{i=Math.max(0,i),e.integerLen=1,l.length=Math.max(1,o=r+1),l[0]=0;for(var a=1;a<o;a++)l[a]=0}if(u>=5)if(o-1<0){for(var c=0;c>o;c--)l.unshift(0),e.integerLen++;l.unshift(1),e.integerLen++}else l[o-1]++;for(;i<Math.max(0,r);i++)l.push(0);var p=0!==r,h=n+e.integerLen,d=l.reduceRight(function(e,n,t,l){return l[t]=(n+=e)<10?n:n-10,p&&(0===l[t]&&t>=h?l.pop():p=!1),n>=10?1:0},0);d&&(l.unshift(d),e.integerLen++)}(a,p,h);var v=a.digits,S=a.integerLen,E=a.exponent,y=[];for(s=v.every(function(e){return!e});S<c;S++)v.unshift(0);for(;S<0;S++)v.unshift(0);S>0?y=v.splice(S,v.length):(y=v,v=[0]);var R=[];for(v.length>=n.lgSize&&R.unshift(v.splice(-n.lgSize,v.length).join(""));v.length>n.gSize;)R.unshift(v.splice(-n.gSize,v.length).join(""));v.length&&R.unshift(v.join("")),u=R.join(zs(t,l)),y.length&&(u+=zs(t,i)+y.join("")),E&&(u+=zs(t,Ws.Exponential)+"+"+E)}else u=zs(t,Ws.Infinity);return e<0&&!s?n.negPre+u+n.negSuf:n.posPre+u+n.posSuf}(e,function(e,n){void 0===n&&(n="-");var t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},l=e.split(";"),i=l[0],r=l[1],o=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],u=o[0],s=o[1]||"";t.posPre=u.substr(0,u.indexOf("#"));for(var a=0;a<s.length;a++){var c=s.charAt(a);"0"===c?t.minFrac=t.maxFrac=a+1:"#"===c?t.maxFrac=a+1:t.posSuf+=c}var p=u.split(",");if(t.gSize=p[1]?p[1].length:0,t.lgSize=p[2]||p[1]?(p[2]||p[1]).length:0,r){var h=i.length-t.posPre.length-t.posSuf.length,d=r.indexOf("#");t.negPre=r.substr(0,d).replace(/'/g,""),t.negSuf=r.substr(d+h).replace(/'/g,"")}else t.negPre=n+t.posPre,t.negSuf=t.posSuf;return t}(function(e,n){return Hi(e)[Li.NumberFormats][n]}(n,Bs.Decimal),zs(n,Ws.MinusSign)),n,Ws.Group,Ws.Decimal,t)}(function(e){if("string"==typeof e&&!isNaN(Number(e)-parseFloat(e)))return Number(e);if("number"!=typeof e)throw new Error(e+" is not a number");return e}(e),l,t)}catch(i){throw ha(n,i.message)}},e}(),Sa=function(){return function(){}}(),Ea=new Le("DocumentToken"),ya="browser",Ra="server",ba=function(){function e(){}return e.ngInjectableDef=Oe({token:e,providedIn:"root",factory:function(){return new Oa(Ye(Ea),window,Ye(Wn))}}),e}(),Oa=function(){function e(e,n,t){this.document=e,this.window=n,this.errorHandler=t,this.offset=function(){return[0,0]}}return e.prototype.setOffset=function(e){this.offset=Array.isArray(e)?function(){return e}:e},e.prototype.getScrollPosition=function(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]},e.prototype.scrollToPosition=function(e){this.supportScrollRestoration()&&this.window.scrollTo(e[0],e[1])},e.prototype.scrollToAnchor=function(e){if(this.supportScrollRestoration()){e=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(e):e.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{var n=this.document.querySelector("#"+e);if(n)return void this.scrollToElement(n);var t=this.document.querySelector("[name='"+e+"']");if(t)return void this.scrollToElement(t)}catch(l){this.errorHandler.handleError(l)}}},e.prototype.setHistoryScrollRestoration=function(e){if(this.supportScrollRestoration()){var n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=e)}},e.prototype.scrollToElement=function(e){var n=e.getBoundingClientRect(),t=n.left+this.window.pageXOffset,l=n.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(t-i[0],l-i[1])},e.prototype.supportScrollRestoration=function(){try{return!!this.window&&!!this.window.scrollTo}catch(e){return!1}},e}();function Ta(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=e[e.length-1];return F(t)?(e.pop(),q(e,t)):le(e)}var Ca=function(e){function n(n){var t=e.call(this)||this;return t._value=n,t}return i(n,e),Object.defineProperty(n.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),n.prototype._subscribe=function(n){var t=e.prototype._subscribe.call(this,n);return t&&!t.closed&&n.next(this._value),t},n.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new x;return this._value},n.prototype.next=function(n){e.prototype.next.call(this,this._value=n)},n}(D);function Ia(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}Ia.prototype=Object.create(Error.prototype);var Aa=Ia,Na={},_a=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,n){return n.subscribe(new wa(e,this.resultSelector))},e}(),wa=function(e){function n(n,t){var l=e.call(this,n)||this;return l.resultSelector=t,l.active=0,l.values=[],l.observables=[],l}return i(n,e),n.prototype._next=function(e){this.values.push(Na),this.observables.push(e)},n.prototype._complete=function(){var e=this.observables,n=e.length;if(0===n)this.destination.complete();else{this.active=n,this.toRespond=n;for(var t=0;t<n;t++){var l=e[t];this.add(Y(this,l,l,t))}}},n.prototype.notifyComplete=function(e){0==(this.active-=1)&&this.destination.complete()},n.prototype.notifyNext=function(e,n,t,l,i){var r=this.values,o=this.toRespond?r[t]===Na?--this.toRespond:this.toRespond:0;r[t]=n,0===o&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))},n.prototype._tryResultSelector=function(e){var n;try{n=this.resultSelector.apply(this,e)}catch(t){return void this.destination.error(t)}this.destination.next(n)},n}(K),Pa=new _(function(e){return e.complete()});function xa(e){return e?function(e){return new _(function(n){return e.schedule(function(){return n.complete()})})}(e):Pa}function ka(e){return new _(function(n){var t;try{t=e()}catch(l){return void n.error(l)}return(t?X(t):xa()).subscribe(n)})}function Ma(){return te(1)}function Da(e,n){return function(t){return t.lift(new La(e,n))}}var La=function(){function e(e,n){this.predicate=e,this.thisArg=n}return e.prototype.call=function(e,n){return n.subscribe(new Fa(e,this.predicate,this.thisArg))},e}(),Fa=function(e){function n(n,t,l){var i=e.call(this,n)||this;return i.predicate=t,i.thisArg=l,i.count=0,i}return i(n,e),n.prototype._next=function(e){var n;try{n=this.predicate.call(this.thisArg,e,this.count++)}catch(t){return void this.destination.error(t)}n&&this.destination.next(e)},n}(O);function Ua(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}Ua.prototype=Object.create(Error.prototype);var Ha=Ua;function Ga(e){return function(n){return 0===e?xa():n.lift(new Ba(e))}}var Ba=function(){function e(e){if(this.total=e,this.total<0)throw new Ha}return e.prototype.call=function(e,n){return n.subscribe(new Va(e,this.total))},e}(),Va=function(e){function n(n,t){var l=e.call(this,n)||this;return l.total=t,l.ring=new Array,l.count=0,l}return i(n,e),n.prototype._next=function(e){var n=this.ring,t=this.total,l=this.count++;n.length<t?n.push(e):n[l%t]=e},n.prototype._complete=function(){var e=this.destination,n=this.count;if(n>0)for(var t=this.count>=this.total?this.total:this.count,l=this.ring,i=0;i<t;i++){var r=n++%t;e.next(l[r])}e.complete()},n}(O);function Wa(e){return void 0===e&&(e=Ka),function(n){return n.lift(new za(e))}}var za=function(){function e(e){this.errorFactory=e}return e.prototype.call=function(e,n){return n.subscribe(new Ya(e,this.errorFactory))},e}(),Ya=function(e){function n(n,t){var l=e.call(this,n)||this;return l.errorFactory=t,l.hasValue=!1,l}return i(n,e),n.prototype._next=function(e){this.hasValue=!0,this.destination.next(e)},n.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var e=void 0;try{e=this.errorFactory()}catch(n){e=n}this.destination.error(e)},n}(O);function Ka(){return new Aa}function ja(e){return void 0===e&&(e=null),function(n){return n.lift(new $a(e))}}var $a=function(){function e(e){this.defaultValue=e}return e.prototype.call=function(e,n){return n.subscribe(new Qa(e,this.defaultValue))},e}(),Qa=function(e){function n(n,t){var l=e.call(this,n)||this;return l.defaultValue=t,l.isEmpty=!0,l}return i(n,e),n.prototype._next=function(e){this.isEmpty=!1,this.destination.next(e)},n.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},n}(O);function qa(e,n){var t=arguments.length>=2;return function(l){return l.pipe(e?Da(function(n,t){return e(n,t,l)}):ne,Ga(1),t?ja(n):Wa(function(){return new Aa}))}}function Xa(e){return function(n){var t=new Za(e),l=n.lift(t);return t.caught=l}}var Za=function(){function e(e){this.selector=e}return e.prototype.call=function(e,n){return n.subscribe(new Ja(e,this.selector,this.caught))},e}(),Ja=function(e){function n(n,t,l){var i=e.call(this,n)||this;return i.selector=t,i.caught=l,i}return i(n,e),n.prototype.error=function(n){if(!this.isStopped){var t=void 0;try{t=this.selector(n,this.caught)}catch(i){return void e.prototype.error.call(this,i)}this._unsubscribeAndRecycle();var l=new U(this,void 0,void 0);this.add(l),Y(this,t,void 0,void 0,l)}},n}(K);function ec(e){return function(n){return 0===e?xa():n.lift(new nc(e))}}var nc=function(){function e(e){if(this.total=e,this.total<0)throw new Ha}return e.prototype.call=function(e,n){return n.subscribe(new tc(e,this.total))},e}(),tc=function(e){function n(n,t){var l=e.call(this,n)||this;return l.total=t,l.count=0,l}return i(n,e),n.prototype._next=function(e){var n=this.total,t=++this.count;t<=n&&(this.destination.next(e),t===n&&(this.destination.complete(),this.unsubscribe()))},n}(O);function lc(e,n){var t=arguments.length>=2;return function(l){return l.pipe(e?Da(function(n,t){return e(n,t,l)}):ne,ec(1),t?ja(n):Wa(function(){return new Aa}))}}var ic=function(){function e(e,n,t){this.predicate=e,this.thisArg=n,this.source=t}return e.prototype.call=function(e,n){return n.subscribe(new rc(e,this.predicate,this.thisArg,this.source))},e}(),rc=function(e){function n(n,t,l,i){var r=e.call(this,n)||this;return r.predicate=t,r.thisArg=l,r.source=i,r.index=0,r.thisArg=l||r,r}return i(n,e),n.prototype.notifyComplete=function(e){this.destination.next(e),this.destination.complete()},n.prototype._next=function(e){var n=!1;try{n=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(t){return void this.destination.error(t)}n||this.notifyComplete(!1)},n.prototype._complete=function(){this.notifyComplete(!0)},n}(O);function oc(e,n){return"function"==typeof n?function(t){return t.pipe(oc(function(t,l){return X(e(t,l)).pipe(j(function(e,i){return n(t,e,l,i)}))}))}:function(n){return n.lift(new uc(e))}}var uc=function(){function e(e){this.project=e}return e.prototype.call=function(e,n){return n.subscribe(new sc(e,this.project))},e}(),sc=function(e){function n(n,t){var l=e.call(this,n)||this;return l.project=t,l.index=0,l}return i(n,e),n.prototype._next=function(e){var n,t=this.index++;try{n=this.project(e,t)}catch(l){return void this.destination.error(l)}this._innerSub(n,e,t)},n.prototype._innerSub=function(e,n,t){var l=this.innerSubscription;l&&l.unsubscribe();var i=new U(this,void 0,void 0);this.destination.add(i),this.innerSubscription=Y(this,e,n,t,i)},n.prototype._complete=function(){var n=this.innerSubscription;n&&!n.closed||e.prototype._complete.call(this),this.unsubscribe()},n.prototype._unsubscribe=function(){this.innerSubscription=null},n.prototype.notifyComplete=function(n){this.destination.remove(n),this.innerSubscription=null,this.isStopped&&e.prototype._complete.call(this)},n.prototype.notifyNext=function(e,n,t,l,i){this.destination.next(n)},n}(K);function ac(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return Ma()(Ta.apply(void 0,e))}function cc(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=e[e.length-1];return F(t)?(e.pop(),function(n){return ac(e,n,t)}):function(n){return ac(e,n)}}function pc(e,n){var t=!1;return arguments.length>=2&&(t=!0),function(l){return l.lift(new hc(e,n,t))}}var hc=function(){function e(e,n,t){void 0===t&&(t=!1),this.accumulator=e,this.seed=n,this.hasSeed=t}return e.prototype.call=function(e,n){return n.subscribe(new dc(e,this.accumulator,this.seed,this.hasSeed))},e}(),dc=function(e){function n(n,t,l,i){var r=e.call(this,n)||this;return r.accumulator=t,r._seed=l,r.hasSeed=i,r.index=0,r}return i(n,e),Object.defineProperty(n.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e},enumerable:!0,configurable:!0}),n.prototype._next=function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)},n.prototype._tryNext=function(e){var n,t=this.index++;try{n=this.accumulator(this.seed,e,t)}catch(l){this.destination.error(l)}this.seed=n,this.destination.next(n)},n}(O);function gc(e,n){return Z(e,n,1)}function fc(e,n,t){return function(l){return l.lift(new mc(e,n,t))}}var mc=function(){function e(e,n,t){this.nextOrObserver=e,this.error=n,this.complete=t}return e.prototype.call=function(e,n){return n.subscribe(new vc(e,this.nextOrObserver,this.error,this.complete))},e}(),vc=function(e){function n(n,t,l,i){var r=e.call(this,n)||this;return r._tapNext=I,r._tapError=I,r._tapComplete=I,r._tapError=l||I,r._tapComplete=i||I,d(t)?(r._context=r,r._tapNext=t):t&&(r._context=t,r._tapNext=t.next||I,r._tapError=t.error||I,r._tapComplete=t.complete||I),r}return i(n,e),n.prototype._next=function(e){try{this._tapNext.call(this._context,e)}catch(n){return void this.destination.error(n)}this.destination.next(e)},n.prototype._error=function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)},n.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()},n}(O),Sc=function(){function e(e){this.callback=e}return e.prototype.call=function(e,n){return n.subscribe(new Ec(e,this.callback))},e}(),Ec=function(e){function n(n,t){var l=e.call(this,n)||this;return l.add(new m(t)),l}return i(n,e),n}(O),yc=null;function Rc(){return yc}var bc,Oc=function(e){function n(){var n=e.call(this)||this;n._animationPrefix=null,n._transitionEnd=null;try{var t=n.createElement("div",document);if(null!=n.getStyle(t,"animationName"))n._animationPrefix="";else for(var l=["Webkit","Moz","O","ms"],i=0;i<l.length;i++)if(null!=n.getStyle(t,l[i]+"AnimationName")){n._animationPrefix="-"+l[i].toLowerCase()+"-";break}var r={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(r).forEach(function(e){null!=n.getStyle(t,e)&&(n._transitionEnd=r[e])})}catch(o){n._animationPrefix=null,n._transitionEnd=null}return n}return i(n,e),n.prototype.getDistributedNodes=function(e){return e.getDistributedNodes()},n.prototype.resolveAndSetHref=function(e,n,t){e.href=null==t?n:n+"/../"+t},n.prototype.supportsDOMEvents=function(){return!0},n.prototype.supportsNativeShadowDOM=function(){return"function"==typeof document.body.createShadowRoot},n.prototype.getAnimationPrefix=function(){return this._animationPrefix?this._animationPrefix:""},n.prototype.getTransitionEnd=function(){return this._transitionEnd?this._transitionEnd:""},n.prototype.supportsAnimation=function(){return null!=this._animationPrefix&&null!=this._transitionEnd},n}(function(){function e(){this.resourceLoaderType=null}return Object.defineProperty(e.prototype,"attrToPropMap",{get:function(){return this._attrToPropMap},set:function(e){this._attrToPropMap=e},enumerable:!0,configurable:!0}),e}()),Tc={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},Cc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ic={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ac=function(){if(De.Node)return De.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))}}(),Nc=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return i(n,e),n.prototype.parse=function(e){throw new Error("parse not implemented")},n.makeCurrent=function(){var e;e=new n,yc||(yc=e)},n.prototype.hasProperty=function(e,n){return n in e},n.prototype.setProperty=function(e,n,t){e[n]=t},n.prototype.getProperty=function(e,n){return e[n]},n.prototype.invoke=function(e,n,t){var l;(l=e)[n].apply(l,c(t))},n.prototype.logError=function(e){window.console&&(console.error?console.error(e):console.log(e))},n.prototype.log=function(e){window.console&&window.console.log&&window.console.log(e)},n.prototype.logGroup=function(e){window.console&&window.console.group&&window.console.group(e)},n.prototype.logGroupEnd=function(){window.console&&window.console.groupEnd&&window.console.groupEnd()},Object.defineProperty(n.prototype,"attrToPropMap",{get:function(){return Tc},enumerable:!0,configurable:!0}),n.prototype.contains=function(e,n){return Ac.call(e,n)},n.prototype.querySelector=function(e,n){return e.querySelector(n)},n.prototype.querySelectorAll=function(e,n){return e.querySelectorAll(n)},n.prototype.on=function(e,n,t){e.addEventListener(n,t,!1)},n.prototype.onAndCancel=function(e,n,t){return e.addEventListener(n,t,!1),function(){e.removeEventListener(n,t,!1)}},n.prototype.dispatchEvent=function(e,n){e.dispatchEvent(n)},n.prototype.createMouseEvent=function(e){var n=this.getDefaultDocument().createEvent("MouseEvent");return n.initEvent(e,!0,!0),n},n.prototype.createEvent=function(e){var n=this.getDefaultDocument().createEvent("Event");return n.initEvent(e,!0,!0),n},n.prototype.preventDefault=function(e){e.preventDefault(),e.returnValue=!1},n.prototype.isPrevented=function(e){return e.defaultPrevented||null!=e.returnValue&&!e.returnValue},n.prototype.getInnerHTML=function(e){return e.innerHTML},n.prototype.getTemplateContent=function(e){return"content"in e&&this.isTemplateElement(e)?e.content:null},n.prototype.getOuterHTML=function(e){return e.outerHTML},n.prototype.nodeName=function(e){return e.nodeName},n.prototype.nodeValue=function(e){return e.nodeValue},n.prototype.type=function(e){return e.type},n.prototype.content=function(e){return this.hasProperty(e,"content")?e.content:e},n.prototype.firstChild=function(e){return e.firstChild},n.prototype.nextSibling=function(e){return e.nextSibling},n.prototype.parentElement=function(e){return e.parentNode},n.prototype.childNodes=function(e){return e.childNodes},n.prototype.childNodesAsList=function(e){for(var n=e.childNodes,t=new Array(n.length),l=0;l<n.length;l++)t[l]=n[l];return t},n.prototype.clearNodes=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},n.prototype.appendChild=function(e,n){e.appendChild(n)},n.prototype.removeChild=function(e,n){e.removeChild(n)},n.prototype.replaceChild=function(e,n,t){e.replaceChild(n,t)},n.prototype.remove=function(e){return e.parentNode&&e.parentNode.removeChild(e),e},n.prototype.insertBefore=function(e,n,t){e.insertBefore(t,n)},n.prototype.insertAllBefore=function(e,n,t){t.forEach(function(t){return e.insertBefore(t,n)})},n.prototype.insertAfter=function(e,n,t){e.insertBefore(t,n.nextSibling)},n.prototype.setInnerHTML=function(e,n){e.innerHTML=n},n.prototype.getText=function(e){return e.textContent},n.prototype.setText=function(e,n){e.textContent=n},n.prototype.getValue=function(e){return e.value},n.prototype.setValue=function(e,n){e.value=n},n.prototype.getChecked=function(e){return e.checked},n.prototype.setChecked=function(e,n){e.checked=n},n.prototype.createComment=function(e){return this.getDefaultDocument().createComment(e)},n.prototype.createTemplate=function(e){var n=this.getDefaultDocument().createElement("template");return n.innerHTML=e,n},n.prototype.createElement=function(e,n){return(n=n||this.getDefaultDocument()).createElement(e)},n.prototype.createElementNS=function(e,n,t){return(t=t||this.getDefaultDocument()).createElementNS(e,n)},n.prototype.createTextNode=function(e,n){return(n=n||this.getDefaultDocument()).createTextNode(e)},n.prototype.createScriptTag=function(e,n,t){var l=(t=t||this.getDefaultDocument()).createElement("SCRIPT");return l.setAttribute(e,n),l},n.prototype.createStyleElement=function(e,n){var t=(n=n||this.getDefaultDocument()).createElement("style");return this.appendChild(t,this.createTextNode(e,n)),t},n.prototype.createShadowRoot=function(e){return e.createShadowRoot()},n.prototype.getShadowRoot=function(e){return e.shadowRoot},n.prototype.getHost=function(e){return e.host},n.prototype.clone=function(e){return e.cloneNode(!0)},n.prototype.getElementsByClassName=function(e,n){return e.getElementsByClassName(n)},n.prototype.getElementsByTagName=function(e,n){return e.getElementsByTagName(n)},n.prototype.classList=function(e){return Array.prototype.slice.call(e.classList,0)},n.prototype.addClass=function(e,n){e.classList.add(n)},n.prototype.removeClass=function(e,n){e.classList.remove(n)},n.prototype.hasClass=function(e,n){return e.classList.contains(n)},n.prototype.setStyle=function(e,n,t){e.style[n]=t},n.prototype.removeStyle=function(e,n){e.style[n]=""},n.prototype.getStyle=function(e,n){return e.style[n]},n.prototype.hasStyle=function(e,n,t){var l=this.getStyle(e,n)||"";return t?l==t:l.length>0},n.prototype.tagName=function(e){return e.tagName},n.prototype.attributeMap=function(e){for(var n=new Map,t=e.attributes,l=0;l<t.length;l++){var i=t.item(l);n.set(i.name,i.value)}return n},n.prototype.hasAttribute=function(e,n){return e.hasAttribute(n)},n.prototype.hasAttributeNS=function(e,n,t){return e.hasAttributeNS(n,t)},n.prototype.getAttribute=function(e,n){return e.getAttribute(n)},n.prototype.getAttributeNS=function(e,n,t){return e.getAttributeNS(n,t)},n.prototype.setAttribute=function(e,n,t){e.setAttribute(n,t)},n.prototype.setAttributeNS=function(e,n,t,l){e.setAttributeNS(n,t,l)},n.prototype.removeAttribute=function(e,n){e.removeAttribute(n)},n.prototype.removeAttributeNS=function(e,n,t){e.removeAttributeNS(n,t)},n.prototype.templateAwareRoot=function(e){return this.isTemplateElement(e)?this.content(e):e},n.prototype.createHtmlDocument=function(){return document.implementation.createHTMLDocument("fakeTitle")},n.prototype.getDefaultDocument=function(){return document},n.prototype.getBoundingClientRect=function(e){try{return e.getBoundingClientRect()}catch(n){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}},n.prototype.getTitle=function(e){return e.title},n.prototype.setTitle=function(e,n){e.title=n||""},n.prototype.elementMatches=function(e,n){return!!this.isElementNode(e)&&(e.matches&&e.matches(n)||e.msMatchesSelector&&e.msMatchesSelector(n)||e.webkitMatchesSelector&&e.webkitMatchesSelector(n))},n.prototype.isTemplateElement=function(e){return this.isElementNode(e)&&"TEMPLATE"===e.nodeName},n.prototype.isTextNode=function(e){return e.nodeType===Node.TEXT_NODE},n.prototype.isCommentNode=function(e){return e.nodeType===Node.COMMENT_NODE},n.prototype.isElementNode=function(e){return e.nodeType===Node.ELEMENT_NODE},n.prototype.hasShadowRoot=function(e){return null!=e.shadowRoot&&e instanceof HTMLElement},n.prototype.isShadowRoot=function(e){return e instanceof DocumentFragment},n.prototype.importIntoDoc=function(e){return document.importNode(this.templateAwareRoot(e),!0)},n.prototype.adoptNode=function(e){return document.adoptNode(e)},n.prototype.getHref=function(e){return e.getAttribute("href")},n.prototype.getEventKey=function(e){var n=e.key;if(null==n){if(null==(n=e.keyIdentifier))return"Unidentified";n.startsWith("U+")&&(n=String.fromCharCode(parseInt(n.substring(2),16)),3===e.location&&Ic.hasOwnProperty(n)&&(n=Ic[n]))}return Cc[n]||n},n.prototype.getGlobalEventTarget=function(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null},n.prototype.getHistory=function(){return window.history},n.prototype.getLocation=function(){return window.location},n.prototype.getBaseHref=function(e){var n,t=_c||(_c=document.querySelector("base"))?_c.getAttribute("href"):null;return null==t?null:(n=t,bc||(bc=document.createElement("a")),bc.setAttribute("href",n),"/"===bc.pathname.charAt(0)?bc.pathname:"/"+bc.pathname)},n.prototype.resetBaseElement=function(){_c=null},n.prototype.getUserAgent=function(){return window.navigator.userAgent},n.prototype.setData=function(e,n,t){this.setAttribute(e,"data-"+n,t)},n.prototype.getData=function(e,n){return this.getAttribute(e,"data-"+n)},n.prototype.getComputedStyle=function(e){return getComputedStyle(e)},n.prototype.supportsWebAnimation=function(){return"function"==typeof Element.prototype.animate},n.prototype.performanceNow=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},n.prototype.supportsCookies=function(){return!0},n.prototype.getCookie=function(e){return qs(document.cookie,e)},n.prototype.setCookie=function(e,n){document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(n)},n}(Oc),_c=null;function wc(){return!!window.history.pushState}var Pc=function(e){function n(n){var t=e.call(this)||this;return t._doc=n,t._init(),t}var t;return i(n,e),n.prototype._init=function(){this.location=Rc().getLocation(),this._history=Rc().getHistory()},n.prototype.getBaseHrefFromDOM=function(){return Rc().getBaseHref(this._doc)},n.prototype.onPopState=function(e){Rc().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)},n.prototype.onHashChange=function(e){Rc().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)},Object.defineProperty(n.prototype,"href",{get:function(){return this.location.href},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"protocol",{get:function(){return this.location.protocol},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hostname",{get:function(){return this.location.hostname},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"port",{get:function(){return this.location.port},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"pathname",{get:function(){return this.location.pathname},set:function(e){this.location.pathname=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"search",{get:function(){return this.location.search},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hash",{get:function(){return this.location.hash},enumerable:!0,configurable:!0}),n.prototype.pushState=function(e,n,t){wc()?this._history.pushState(e,n,t):this.location.hash=t},n.prototype.replaceState=function(e,n,t){wc()?this._history.replaceState(e,n,t):this.location.hash=t},n.prototype.forward=function(){this._history.forward()},n.prototype.back=function(){this._history.back()},n.prototype.getState=function(){return this._history.state},o([(t=ve(Ea),function(e,n){t(e,n,0)}),u("design:paramtypes",[Object])],n)}(ks),xc=new Le("TRANSITION_ID"),kc=[{provide:Yi,useFactory:function(e,n,t){return function(){t.get(Ki).donePromise.then(function(){var t=Rc();Array.prototype.slice.apply(t.querySelectorAll(n,"style[ng-transition]")).filter(function(n){return t.getAttribute(n,"ng-transition")===e}).forEach(function(e){return t.remove(e)})})}},deps:[xc,Ea,Xe],multi:!0}],Mc=function(){function e(){}return e.init=function(){var n;n=new e,Ar=n},e.prototype.addToWindow=function(e){De.getAngularTestability=function(n,t){void 0===t&&(t=!0);var l=e.findTestabilityInTree(n,t);if(null==l)throw new Error("Could not find testability for element.");return l},De.getAllAngularTestabilities=function(){return e.getAllTestabilities()},De.getAllAngularRootElements=function(){return e.getAllRootElements()},De.frameworkStabilizers||(De.frameworkStabilizers=[]),De.frameworkStabilizers.push(function(e){var n=De.getAllAngularTestabilities(),t=n.length,l=!1,i=function(n){l=l||n,0==--t&&e(l)};n.forEach(function(e){e.whenStable(i)})})},e.prototype.findTestabilityInTree=function(e,n,t){if(null==n)return null;var l=e.getTestability(n);return null!=l?l:t?Rc().isShadowRoot(n)?this.findTestabilityInTree(e,Rc().getHost(n),!0):this.findTestabilityInTree(e,Rc().parentElement(n),!0):null},e}();function Dc(e,n){"undefined"!=typeof COMPILED&&COMPILED||((De.ng=De.ng||{})[e]=n)}var Lc=function(){return{ApplicationRef:Mr,NgZone:vr}}();function Fc(e){return Yr(e)}var Uc=new Le("EventManagerPlugins"),Hc=function(){function e(e,n){var t=this;this._zone=n,this._eventNameToPlugin=new Map,e.forEach(function(e){return e.manager=t}),this._plugins=e.slice().reverse()}return e.prototype.addEventListener=function(e,n,t){return this._findPluginFor(n).addEventListener(e,n,t)},e.prototype.addGlobalEventListener=function(e,n,t){return this._findPluginFor(n).addGlobalEventListener(e,n,t)},e.prototype.getZone=function(){return this._zone},e.prototype._findPluginFor=function(e){var n=this._eventNameToPlugin.get(e);if(n)return n;for(var t=this._plugins,l=0;l<t.length;l++){var i=t[l];if(i.supports(e))return this._eventNameToPlugin.set(e,i),i}throw new Error("No event manager plugin found for event "+e)},e}(),Gc=function(){function e(e){this._doc=e}return e.prototype.addGlobalEventListener=function(e,n,t){var l=Rc().getGlobalEventTarget(this._doc,e);if(!l)throw new Error("Unsupported event target "+l+" for event "+n);return this.addEventListener(l,n,t)},e}(),Bc=function(){function e(){this._stylesSet=new Set}return e.prototype.addStyles=function(e){var n=this,t=new Set;e.forEach(function(e){n._stylesSet.has(e)||(n._stylesSet.add(e),t.add(e))}),this.onStylesAdded(t)},e.prototype.onStylesAdded=function(e){},e.prototype.getAllStyles=function(){return Array.from(this._stylesSet)},e}(),Vc=function(e){function n(n){var t=e.call(this)||this;return t._doc=n,t._hostNodes=new Set,t._styleNodes=new Set,t._hostNodes.add(n.head),t}return i(n,e),n.prototype._addStylesToHost=function(e,n){var t=this;e.forEach(function(e){var l=t._doc.createElement("style");l.textContent=e,t._styleNodes.add(n.appendChild(l))})},n.prototype.addHost=function(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)},n.prototype.removeHost=function(e){this._hostNodes.delete(e)},n.prototype.onStylesAdded=function(e){var n=this;this._hostNodes.forEach(function(t){return n._addStylesToHost(e,t)})},n.prototype.ngOnDestroy=function(){this._styleNodes.forEach(function(e){return Rc().remove(e)})},n}(Bc),Wc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},zc=/%COMP%/g,Yc="_nghost-%COMP%",Kc="_ngcontent-%COMP%";function jc(e,n,t){for(var l=0;l<n.length;l++){var i=n[l];Array.isArray(i)?jc(e,i,t):(i=i.replace(zc,e),t.push(i))}return t}function $c(e){return function(n){!1===e(n)&&(n.preventDefault(),n.returnValue=!1)}}var Qc=function(){function e(e,n,t){this.eventManager=e,this.sharedStylesHost=n,this.appId=t,this.rendererByCompId=new Map,this.defaultRenderer=new qc(e)}return e.prototype.createRenderer=function(e,n){if(!e||!n)return this.defaultRenderer;switch(n.encapsulation){case cn.Emulated:var t=this.rendererByCompId.get(n.id);return t||(t=new Jc(this.eventManager,this.sharedStylesHost,n,this.appId),this.rendererByCompId.set(n.id,t)),t.applyToHost(e),t;case cn.Native:case cn.ShadowDom:return new ep(this.eventManager,this.sharedStylesHost,e,n);default:if(!this.rendererByCompId.has(n.id)){var l=jc(n.id,n.styles,[]);this.sharedStylesHost.addStyles(l),this.rendererByCompId.set(n.id,this.defaultRenderer)}return this.defaultRenderer}},e.prototype.begin=function(){},e.prototype.end=function(){},e}(),qc=function(){function e(e){this.eventManager=e,this.data=Object.create(null)}return e.prototype.destroy=function(){},e.prototype.createElement=function(e,n){return n?document.createElementNS(Wc[n]||n,e):document.createElement(e)},e.prototype.createComment=function(e){return document.createComment(e)},e.prototype.createText=function(e){return document.createTextNode(e)},e.prototype.appendChild=function(e,n){e.appendChild(n)},e.prototype.insertBefore=function(e,n,t){e&&e.insertBefore(n,t)},e.prototype.removeChild=function(e,n){e&&e.removeChild(n)},e.prototype.selectRootElement=function(e,n){var t="string"==typeof e?document.querySelector(e):e;if(!t)throw new Error('The selector "'+e+'" did not match any elements');return n||(t.textContent=""),t},e.prototype.parentNode=function(e){return e.parentNode},e.prototype.nextSibling=function(e){return e.nextSibling},e.prototype.setAttribute=function(e,n,t,l){if(l){n=l+":"+n;var i=Wc[l];i?e.setAttributeNS(i,n,t):e.setAttribute(n,t)}else e.setAttribute(n,t)},e.prototype.removeAttribute=function(e,n,t){if(t){var l=Wc[t];l?e.removeAttributeNS(l,n):e.removeAttribute(t+":"+n)}else e.removeAttribute(n)},e.prototype.addClass=function(e,n){e.classList.add(n)},e.prototype.removeClass=function(e,n){e.classList.remove(n)},e.prototype.setStyle=function(e,n,t,l){l&vt.DashCase?e.style.setProperty(n,t,l&vt.Important?"important":""):e.style[n]=t},e.prototype.removeStyle=function(e,n,t){t&vt.DashCase?e.style.removeProperty(n):e.style[n]=""},e.prototype.setProperty=function(e,n,t){Zc(n,"property"),e[n]=t},e.prototype.setValue=function(e,n){e.nodeValue=n},e.prototype.listen=function(e,n,t){return Zc(n,"listener"),"string"==typeof e?this.eventManager.addGlobalEventListener(e,n,$c(t)):this.eventManager.addEventListener(e,n,$c(t))},e}(),Xc=function(){return"@".charCodeAt(0)}();function Zc(e,n){if(e.charCodeAt(0)===Xc)throw new Error("Found the synthetic "+n+" "+e+'. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.')}var Jc=function(e){function n(n,t,l,i){var r=e.call(this,n)||this;r.component=l;var o=jc(i+"-"+l.id,l.styles,[]);return t.addStyles(o),r.contentAttr=Kc.replace(zc,i+"-"+l.id),r.hostAttr=Yc.replace(zc,i+"-"+l.id),r}return i(n,e),n.prototype.applyToHost=function(n){e.prototype.setAttribute.call(this,n,this.hostAttr,"")},n.prototype.createElement=function(n,t){var l=e.prototype.createElement.call(this,n,t);return e.prototype.setAttribute.call(this,l,this.contentAttr,""),l},n}(qc),ep=function(e){function n(n,t,l,i){var r=e.call(this,n)||this;r.sharedStylesHost=t,r.hostEl=l,r.component=i,r.shadowRoot=i.encapsulation===cn.ShadowDom?l.attachShadow({mode:"open"}):l.createShadowRoot(),r.sharedStylesHost.addHost(r.shadowRoot);for(var o=jc(i.id,i.styles,[]),u=0;u<o.length;u++){var s=document.createElement("style");s.textContent=o[u],r.shadowRoot.appendChild(s)}return r}return i(n,e),n.prototype.nodeOrShadowRoot=function(e){return e===this.hostEl?this.shadowRoot:e},n.prototype.destroy=function(){this.sharedStylesHost.removeHost(this.shadowRoot)},n.prototype.appendChild=function(n,t){return e.prototype.appendChild.call(this,this.nodeOrShadowRoot(n),t)},n.prototype.insertBefore=function(n,t,l){return e.prototype.insertBefore.call(this,this.nodeOrShadowRoot(n),t,l)},n.prototype.removeChild=function(n,t){return e.prototype.removeChild.call(this,this.nodeOrShadowRoot(n),t)},n.prototype.parentNode=function(n){return this.nodeOrShadowRoot(e.prototype.parentNode.call(this,this.nodeOrShadowRoot(n)))},n}(qc),np=function(){return"undefined"!=typeof Zone&&Zone.__symbol__||function(e){return"__zone_symbol__"+e}}(),tp=np("addEventListener"),lp=np("removeEventListener"),ip={},rp="__zone_symbol__propagationStopped",op=function(){var e="undefined"!=typeof Zone&&Zone[np("BLACK_LISTED_EVENTS")];if(e){var n={};return e.forEach(function(e){n[e]=e}),n}}(),up=function(e){return!!op&&op.hasOwnProperty(e)},sp=function(e){var n=ip[e.type];if(n){var t=this[n];if(t){var l=[e];if(1===t.length)return(o=t[0]).zone!==Zone.current?o.zone.run(o.handler,this,l):o.handler.apply(this,l);for(var i=t.slice(),r=0;r<i.length&&!0!==e[rp];r++){var o;(o=i[r]).zone!==Zone.current?o.zone.run(o.handler,this,l):o.handler.apply(this,l)}}}},ap=function(e){function n(n,t,l){var i=e.call(this,n)||this;return i.ngZone=t,l&&function(e){return e===Ra}(l)||i.patchEvent(),i}return i(n,e),n.prototype.patchEvent=function(){if("undefined"!=typeof Event&&Event&&Event.prototype&&!Event.prototype.__zone_symbol__stopImmediatePropagation){var e=Event.prototype.__zone_symbol__stopImmediatePropagation=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[rp]=!0),e&&e.apply(this,arguments)}}},n.prototype.supports=function(e){return!0},n.prototype.addEventListener=function(e,n,t){var l=this,i=t;if(!e[tp]||vr.isInAngularZone()&&!up(n))e.addEventListener(n,i,!1);else{var r=ip[n];r||(r=ip[n]=np("ANGULAR"+n+"FALSE"));var o=e[r],u=o&&o.length>0;o||(o=e[r]=[]);var s=up(n)?Zone.root:Zone.current;if(0===o.length)o.push({zone:s,handler:i});else{for(var a=!1,c=0;c<o.length;c++)if(o[c].handler===i){a=!0;break}a||o.push({zone:s,handler:i})}u||e[tp](n,sp,!1)}return function(){return l.removeEventListener(e,n,i)}},n.prototype.removeEventListener=function(e,n,t){var l=e[lp];if(!l)return e.removeEventListener.apply(e,[n,t,!1]);var i=ip[n],r=i&&e[i];if(!r)return e.removeEventListener.apply(e,[n,t,!1]);for(var o=!1,u=0;u<r.length;u++)if(r[u].handler===t){o=!0,r.splice(u,1);break}o?0===r.length&&l.apply(e,[n,sp,!1]):e.removeEventListener.apply(e,[n,t,!1])},n}(Gc),cp={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},pp=new Le("HammerGestureConfig"),hp=new Le("HammerLoader"),dp=function(){function e(){this.events=[],this.overrides={}}return e.prototype.buildHammer=function(e){var n=new Hammer(e,this.options);for(var t in n.get("pinch").set({enable:!0}),n.get("rotate").set({enable:!0}),this.overrides)n.get(t).set(this.overrides[t]);return n},e}(),gp=function(e){function n(n,t,l,i){var r=e.call(this,n)||this;return r._config=t,r.console=l,r.loader=i,r}return i(n,e),n.prototype.supports=function(e){return!(!cp.hasOwnProperty(e.toLowerCase())&&!this.isCustomEvent(e)||!window.Hammer&&!this.loader&&(this.console.warn('The "'+e+'" event cannot be bound because Hammer.JS is not loaded and no custom loader has been specified.'),1))},n.prototype.addEventListener=function(e,n,t){var l=this,i=this.manager.getZone();if(n=n.toLowerCase(),!window.Hammer&&this.loader){var r=!1,o=function(){r=!0};return this.loader().then(function(){if(!window.Hammer)return l.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(o=function(){});r||(o=l.addEventListener(e,n,t))}).catch(function(){l.console.warn('The "'+n+'" event cannot be bound because the custom Hammer.JS loader failed.'),o=function(){}}),function(){o()}}return i.runOutsideAngular(function(){var r=l._config.buildHammer(e),o=function(e){i.runGuarded(function(){t(e)})};return r.on(n,o),function(){r.off(n,o),"function"==typeof r.destroy&&r.destroy()}})},n.prototype.isCustomEvent=function(e){return this._config.events.indexOf(e)>-1},n}(Gc),fp=["alt","control","meta","shift"],mp={alt:function(e){return e.altKey},control:function(e){return e.ctrlKey},meta:function(e){return e.metaKey},shift:function(e){return e.shiftKey}},vp=function(e){function n(n){return e.call(this,n)||this}var t;return i(n,e),t=n,n.prototype.supports=function(e){return null!=t.parseEventName(e)},n.prototype.addEventListener=function(e,n,l){var i=t.parseEventName(n),r=t.eventCallback(i.fullKey,l,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return Rc().onAndCancel(e,i.domEventName,r)})},n.parseEventName=function(e){var n=e.toLowerCase().split("."),l=n.shift();if(0===n.length||"keydown"!==l&&"keyup"!==l)return null;var i=t._normalizeKey(n.pop()),r="";if(fp.forEach(function(e){var t=n.indexOf(e);t>-1&&(n.splice(t,1),r+=e+".")}),r+=i,0!=n.length||0===i.length)return null;var o={};return o.domEventName=l,o.fullKey=r,o},n.getEventFullKey=function(e){var n="",t=Rc().getEventKey(e);return" "===(t=t.toLowerCase())?t="space":"."===t&&(t="dot"),fp.forEach(function(l){l!=t&&(0,mp[l])(e)&&(n+=l+".")}),n+=t},n.eventCallback=function(e,n,l){return function(i){t.getEventFullKey(i)===e&&l.runGuarded(function(){return n(i)})}},n._normalizeKey=function(e){switch(e){case"esc":return"escape";default:return e}},n}(Gc),Sp=function(){return function(){}}(),Ep=function(e){function n(n){var t=e.call(this)||this;return t._doc=n,t}return i(n,e),n.prototype.sanitize=function(e,n){if(null==n)return null;switch(e){case Ln.NONE:return n;case Ln.HTML:return n instanceof Rp?n.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(n,"HTML"),function(e,n){var t=null;try{Rn=Rn||new fn(e);var l=n?String(n):"";t=Rn.getInertBodyElement(l);var i=5,r=l;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,l=r,r=t.innerHTML,t=Rn.getInertBodyElement(l)}while(l!==r);var o=new Pn,u=o.sanitizeChildren(Dn(t)||t);return gn()&&o.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),u}finally{if(t)for(var s=Dn(t)||t;s.firstChild;)s.removeChild(s.firstChild)}}(this._doc,String(n)));case Ln.STYLE:return n instanceof bp?n.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(n,"Style"),function(e){if(!(e=String(e).trim()))return"";var n=e.match(Hn);return n&&Sn(n[1])===n[1]||e.match(Un)&&function(e){for(var n=!0,t=!0,l=0;l<e.length;l++){var i=e.charAt(l);"'"===i&&t?n=!n:'"'===i&&n&&(t=!t)}return n&&t}(e)?e:(gn()&&console.warn("WARNING: sanitizing unsafe style value "+e+" (see http://g.co/ng/security#xss)."),"unsafe")}(n));case Ln.SCRIPT:if(n instanceof Op)return n.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(n,"Script"),new Error("unsafe value used in a script context");case Ln.URL:return n instanceof Cp||n instanceof Tp?n.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(n,"URL"),Sn(String(n)));case Ln.RESOURCE_URL:if(n instanceof Cp)return n.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(n,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext "+e+" (see http://g.co/ng/security#xss)")}},n.prototype.checkNotSafeValue=function(e,n){if(e instanceof yp)throw new Error("Required a safe "+n+", got a "+e.getTypeName()+" (see http://g.co/ng/security#xss)")},n.prototype.bypassSecurityTrustHtml=function(e){return new Rp(e)},n.prototype.bypassSecurityTrustStyle=function(e){return new bp(e)},n.prototype.bypassSecurityTrustScript=function(e){return new Op(e)},n.prototype.bypassSecurityTrustUrl=function(e){return new Tp(e)},n.prototype.bypassSecurityTrustResourceUrl=function(e){return new Cp(e)},n}(Sp),yp=function(){function e(e){this.changingThisBreaksApplicationSecurity=e}return e.prototype.toString=function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"},e}(),Rp=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return i(n,e),n.prototype.getTypeName=function(){return"HTML"},n}(yp),bp=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return i(n,e),n.prototype.getTypeName=function(){return"Style"},n}(yp),Op=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return i(n,e),n.prototype.getTypeName=function(){return"Script"},n}(yp),Tp=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return i(n,e),n.prototype.getTypeName=function(){return"URL"},n}(yp),Cp=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return i(n,e),n.prototype.getTypeName=function(){return"ResourceURL"},n}(yp),Ip=wr(jr,"browser",[{provide:Xi,useValue:ya},{provide:qi,useValue:function(){Nc.makeCurrent(),Mc.init()},multi:!0},{provide:ks,useClass:Pc,deps:[Ea]},{provide:Ea,useFactory:function(){return document},deps:[]}]);function Ap(){return new Wn}var Np=function(){function e(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}var n;return n=e,e.withServerTransition=function(e){return{ngModule:n,providers:[{provide:ji,useValue:e.appId},{provide:xc,useExisting:ji},kc]}},e}();"undefined"!=typeof window&&window;var _p=function(){return function(e,n){this.id=e,this.url=n}}(),wp=function(e){function n(n,t,l,i){void 0===l&&(l="imperative"),void 0===i&&(i=null);var r=e.call(this,n,t)||this;return r.navigationTrigger=l,r.restoredState=i,r}return i(n,e),n.prototype.toString=function(){return"NavigationStart(id: "+this.id+", url: '"+this.url+"')"},n}(_p),Pp=function(e){function n(n,t,l){var i=e.call(this,n,t)||this;return i.urlAfterRedirects=l,i}return i(n,e),n.prototype.toString=function(){return"NavigationEnd(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"')"},n}(_p),xp=function(e){function n(n,t,l){var i=e.call(this,n,t)||this;return i.reason=l,i}return i(n,e),n.prototype.toString=function(){return"NavigationCancel(id: "+this.id+", url: '"+this.url+"')"},n}(_p),kp=function(e){function n(n,t,l){var i=e.call(this,n,t)||this;return i.error=l,i}return i(n,e),n.prototype.toString=function(){return"NavigationError(id: "+this.id+", url: '"+this.url+"', error: "+this.error+")"},n}(_p),Mp=function(e){function n(n,t,l,i){var r=e.call(this,n,t)||this;return r.urlAfterRedirects=l,r.state=i,r}return i(n,e),n.prototype.toString=function(){return"RoutesRecognized(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},n}(_p),Dp=function(e){function n(n,t,l,i){var r=e.call(this,n,t)||this;return r.urlAfterRedirects=l,r.state=i,r}return i(n,e),n.prototype.toString=function(){return"GuardsCheckStart(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},n}(_p),Lp=function(e){function n(n,t,l,i,r){var o=e.call(this,n,t)||this;return o.urlAfterRedirects=l,o.state=i,o.shouldActivate=r,o}return i(n,e),n.prototype.toString=function(){return"GuardsCheckEnd(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+", shouldActivate: "+this.shouldActivate+")"},n}(_p),Fp=function(e){function n(n,t,l,i){var r=e.call(this,n,t)||this;return r.urlAfterRedirects=l,r.state=i,r}return i(n,e),n.prototype.toString=function(){return"ResolveStart(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},n}(_p),Up=function(e){function n(n,t,l,i){var r=e.call(this,n,t)||this;return r.urlAfterRedirects=l,r.state=i,r}return i(n,e),n.prototype.toString=function(){return"ResolveEnd(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},n}(_p),Hp=function(){function e(e){this.route=e}return e.prototype.toString=function(){return"RouteConfigLoadStart(path: "+this.route.path+")"},e}(),Gp=function(){function e(e){this.route=e}return e.prototype.toString=function(){return"RouteConfigLoadEnd(path: "+this.route.path+")"},e}(),Bp=function(){function e(e){this.snapshot=e}return e.prototype.toString=function(){return"ChildActivationStart(path: '"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"")+"')"},e}(),Vp=function(){function e(e){this.snapshot=e}return e.prototype.toString=function(){return"ChildActivationEnd(path: '"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"")+"')"},e}(),Wp=function(){function e(e){this.snapshot=e}return e.prototype.toString=function(){return"ActivationStart(path: '"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"")+"')"},e}(),zp=function(){function e(e){this.snapshot=e}return e.prototype.toString=function(){return"ActivationEnd(path: '"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"")+"')"},e}(),Yp=function(){function e(e,n,t){this.routerEvent=e,this.position=n,this.anchor=t}return e.prototype.toString=function(){return"Scroll(anchor: '"+this.anchor+"', position: '"+(this.position?this.position[0]+", "+this.position[1]:null)+"')"},e}(),Kp=function(){return function(){}}(),jp="primary",$p=function(){function e(e){this.params=e||{}}return e.prototype.has=function(e){return this.params.hasOwnProperty(e)},e.prototype.get=function(e){if(this.has(e)){var n=this.params[e];return Array.isArray(n)?n[0]:n}return null},e.prototype.getAll=function(e){if(this.has(e)){var n=this.params[e];return Array.isArray(n)?n:[n]}return[]},Object.defineProperty(e.prototype,"keys",{get:function(){return Object.keys(this.params)},enumerable:!0,configurable:!0}),e}();function Qp(e){return new $p(e)}var qp="ngNavigationCancelingError";function Xp(e){var n=Error("NavigationCancelingError: "+e);return n[qp]=!0,n}function Zp(e,n,t){var l=t.path.split("/");if(l.length>e.length)return null;if("full"===t.pathMatch&&(n.hasChildren()||l.length<e.length))return null;for(var i={},r=0;r<l.length;r++){var o=l[r],u=e[r];if(o.startsWith(":"))i[o.substring(1)]=u;else if(o!==u.path)return null}return{consumed:e.slice(0,l.length),posParams:i}}var Jp=function(){return function(e,n){this.routes=e,this.module=n}}();function eh(e,n){void 0===n&&(n="");for(var t=0;t<e.length;t++){var l=e[t];nh(l,th(n,l))}}function nh(e,n){if(!e)throw new Error("\n      Invalid configuration of route '"+n+"': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    ");if(Array.isArray(e))throw new Error("Invalid configuration of route '"+n+"': Array cannot be specified");if(!e.component&&!e.children&&!e.loadChildren&&e.outlet&&e.outlet!==jp)throw new Error("Invalid configuration of route '"+n+"': a componentless route without children or loadChildren cannot have a named outlet set");if(e.redirectTo&&e.children)throw new Error("Invalid configuration of route '"+n+"': redirectTo and children cannot be used together");if(e.redirectTo&&e.loadChildren)throw new Error("Invalid configuration of route '"+n+"': redirectTo and loadChildren cannot be used together");if(e.children&&e.loadChildren)throw new Error("Invalid configuration of route '"+n+"': children and loadChildren cannot be used together");if(e.redirectTo&&e.component)throw new Error("Invalid configuration of route '"+n+"': redirectTo and component cannot be used together");if(e.path&&e.matcher)throw new Error("Invalid configuration of route '"+n+"': path and matcher cannot be used together");if(void 0===e.redirectTo&&!e.component&&!e.children&&!e.loadChildren)throw new Error("Invalid configuration of route '"+n+"'. One of the following must be provided: component, redirectTo, children or loadChildren");if(void 0===e.path&&void 0===e.matcher)throw new Error("Invalid configuration of route '"+n+"': routes must have either a path or a matcher specified");if("string"==typeof e.path&&"/"===e.path.charAt(0))throw new Error("Invalid configuration of route '"+n+"': path cannot start with a slash");if(""===e.path&&void 0!==e.redirectTo&&void 0===e.pathMatch)throw new Error("Invalid configuration of route '{path: \""+n+'", redirectTo: "'+e.redirectTo+"\"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.");if(void 0!==e.pathMatch&&"full"!==e.pathMatch&&"prefix"!==e.pathMatch)throw new Error("Invalid configuration of route '"+n+"': pathMatch can only be set to 'prefix' or 'full'");e.children&&eh(e.children,n)}function th(e,n){return n?e||n.path?e&&!n.path?e+"/":!e&&n.path?n.path:e+"/"+n.path:"":e}function lh(e){var n=e.children&&e.children.map(lh),t=n?r({},e,{children:n}):r({},e);return!t.component&&(n||t.loadChildren)&&t.outlet&&t.outlet!==jp&&(t.component=Kp),t}function ih(e,n){var t,l=Object.keys(e),i=Object.keys(n);if(!l||!i||l.length!=i.length)return!1;for(var r=0;r<l.length;r++)if(e[t=l[r]]!==n[t])return!1;return!0}function rh(e){return Array.prototype.concat.apply([],e)}function oh(e){return e.length>0?e[e.length-1]:null}function uh(e,n){for(var t in e)e.hasOwnProperty(t)&&n(e[t],t)}function sh(e){return et(e)?e:Jn(e)?X(Promise.resolve(e)):Ta(e)}function ah(e,n,t){return t?function(e,n){return ih(e,n)}(e.queryParams,n.queryParams)&&function e(n,t){if(!dh(n.segments,t.segments))return!1;if(n.numberOfChildren!==t.numberOfChildren)return!1;for(var l in t.children){if(!n.children[l])return!1;if(!e(n.children[l],t.children[l]))return!1}return!0}(e.root,n.root):function(e,n){return Object.keys(n).length<=Object.keys(e).length&&Object.keys(n).every(function(t){return n[t]===e[t]})}(e.queryParams,n.queryParams)&&function e(n,t){return function n(t,l,i){if(t.segments.length>i.length)return!!dh(o=t.segments.slice(0,i.length),i)&&!l.hasChildren();if(t.segments.length===i.length){if(!dh(t.segments,i))return!1;for(var r in l.children){if(!t.children[r])return!1;if(!e(t.children[r],l.children[r]))return!1}return!0}var o=i.slice(0,t.segments.length),u=i.slice(t.segments.length);return!!dh(t.segments,o)&&!!t.children[jp]&&n(t.children[jp],l,u)}(n,t,t.segments)}(e.root,n.root)}var ch=function(){function e(e,n,t){this.root=e,this.queryParams=n,this.fragment=t}return Object.defineProperty(e.prototype,"queryParamMap",{get:function(){return this._queryParamMap||(this._queryParamMap=Qp(this.queryParams)),this._queryParamMap},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return vh.serialize(this)},e}(),ph=function(){function e(e,n){var t=this;this.segments=e,this.children=n,this.parent=null,uh(n,function(e,n){return e.parent=t})}return e.prototype.hasChildren=function(){return this.numberOfChildren>0},Object.defineProperty(e.prototype,"numberOfChildren",{get:function(){return Object.keys(this.children).length},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return Sh(this)},e}(),hh=function(){function e(e,n){this.path=e,this.parameters=n}return Object.defineProperty(e.prototype,"parameterMap",{get:function(){return this._parameterMap||(this._parameterMap=Qp(this.parameters)),this._parameterMap},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return Th(this)},e}();function dh(e,n){return e.length===n.length&&e.every(function(e,t){return e.path===n[t].path})}function gh(e,n){var t=[];return uh(e.children,function(e,l){l===jp&&(t=t.concat(n(e,l)))}),uh(e.children,function(e,l){l!==jp&&(t=t.concat(n(e,l)))}),t}var fh=function(){return function(){}}(),mh=function(){function e(){}return e.prototype.parse=function(e){var n=new _h(e);return new ch(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())},e.prototype.serialize=function(e){var n,t;return"/"+function e(n,t){if(!n.hasChildren())return Sh(n);if(t){var l=n.children[jp]?e(n.children[jp],!1):"",i=[];return uh(n.children,function(n,t){t!==jp&&i.push(t+":"+e(n,!1))}),i.length>0?l+"("+i.join("//")+")":l}var r=gh(n,function(t,l){return l===jp?[e(n.children[jp],!1)]:[l+":"+e(t,!1)]});return Sh(n)+"/("+r.join("//")+")"}(e.root,!0)+(n=e.queryParams,(t=Object.keys(n).map(function(e){var t=n[e];return Array.isArray(t)?t.map(function(n){return yh(e)+"="+yh(n)}).join("&"):yh(e)+"="+yh(t)})).length?"?"+t.join("&"):"")+("string"==typeof e.fragment?"#"+encodeURI(e.fragment):"")},e}(),vh=new mh;function Sh(e){return e.segments.map(function(e){return Th(e)}).join("/")}function Eh(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function yh(e){return Eh(e).replace(/%3B/gi,";")}function Rh(e){return Eh(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function bh(e){return decodeURIComponent(e)}function Oh(e){return bh(e.replace(/\+/g,"%20"))}function Th(e){return""+Rh(e.path)+(n=e.parameters,Object.keys(n).map(function(e){return";"+Rh(e)+"="+Rh(n[e])}).join(""));var n}var Ch=/^[^\/()?;=#]+/;function Ih(e){var n=e.match(Ch);return n?n[0]:""}var Ah=/^[^=?&#]+/,Nh=/^[^?&#]+/,_h=function(){function e(e){this.url=e,this.remaining=e}return e.prototype.parseRootSegment=function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ph([],{}):new ph([],this.parseChildren())},e.prototype.parseQueryParams=function(){var e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e},e.prototype.parseFragment=function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null},e.prototype.parseChildren=function(){if(""===this.remaining)return{};this.consumeOptional("/");var e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());var n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));var t={};return this.peekStartsWith("(")&&(t=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(t[jp]=new ph(e,n)),t},e.prototype.parseSegment=function(){var e=Ih(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '"+this.remaining+"'.");return this.capture(e),new hh(bh(e),this.parseMatrixParams())},e.prototype.parseMatrixParams=function(){for(var e={};this.consumeOptional(";");)this.parseParam(e);return e},e.prototype.parseParam=function(e){var n=Ih(this.remaining);if(n){this.capture(n);var t="";if(this.consumeOptional("=")){var l=Ih(this.remaining);l&&this.capture(t=l)}e[bh(n)]=bh(t)}},e.prototype.parseQueryParam=function(e){var n,t=(n=this.remaining.match(Ah))?n[0]:"";if(t){this.capture(t);var l="";if(this.consumeOptional("=")){var i=function(e){var n=e.match(Nh);return n?n[0]:""}(this.remaining);i&&this.capture(l=i)}var r=Oh(t),o=Oh(l);if(e.hasOwnProperty(r)){var u=e[r];Array.isArray(u)||(e[r]=u=[u]),u.push(o)}else e[r]=o}},e.prototype.parseParens=function(e){var n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var t=Ih(this.remaining),l=this.remaining[t.length];if("/"!==l&&")"!==l&&";"!==l)throw new Error("Cannot parse url '"+this.url+"'");var i=void 0;t.indexOf(":")>-1?(i=t.substr(0,t.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=jp);var r=this.parseChildren();n[i]=1===Object.keys(r).length?r[jp]:new ph([],r),this.consumeOptional("//")}return n},e.prototype.peekStartsWith=function(e){return this.remaining.startsWith(e)},e.prototype.consumeOptional=function(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)},e.prototype.capture=function(e){if(!this.consumeOptional(e))throw new Error('Expected "'+e+'".')},e}(),wh=function(){function e(e){this._root=e}return Object.defineProperty(e.prototype,"root",{get:function(){return this._root.value},enumerable:!0,configurable:!0}),e.prototype.parent=function(e){var n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null},e.prototype.children=function(e){var n=Ph(e,this._root);return n?n.children.map(function(e){return e.value}):[]},e.prototype.firstChild=function(e){var n=Ph(e,this._root);return n&&n.children.length>0?n.children[0].value:null},e.prototype.siblings=function(e){var n=xh(e,this._root);return n.length<2?[]:n[n.length-2].children.map(function(e){return e.value}).filter(function(n){return n!==e})},e.prototype.pathFromRoot=function(e){return xh(e,this._root).map(function(e){return e.value})},e}();function Ph(e,n){var t,l;if(e===n.value)return n;try{for(var i=s(n.children),r=i.next();!r.done;r=i.next()){var o=Ph(e,r.value);if(o)return o}}catch(u){t={error:u}}finally{try{r&&!r.done&&(l=i.return)&&l.call(i)}finally{if(t)throw t.error}}return null}function xh(e,n){var t,l;if(e===n.value)return[n];try{for(var i=s(n.children),r=i.next();!r.done;r=i.next()){var o=xh(e,r.value);if(o.length)return o.unshift(n),o}}catch(u){t={error:u}}finally{try{r&&!r.done&&(l=i.return)&&l.call(i)}finally{if(t)throw t.error}}return[]}var kh=function(){function e(e,n){this.value=e,this.children=n}return e.prototype.toString=function(){return"TreeNode("+this.value+")"},e}();function Mh(e){var n={};return e&&e.children.forEach(function(e){return n[e.value.outlet]=e}),n}var Dh=function(e){function n(n,t){var l=e.call(this,n)||this;return l.snapshot=t,Bh(l,n),l}return i(n,e),n.prototype.toString=function(){return this.snapshot.toString()},n}(wh);function Lh(e,n){var t=function(e,n){var t=new Hh([],{},{},"",{},jp,n,null,e.root,-1,{});return new Gh("",new kh(t,[]))}(e,n),l=new Ca([new hh("",{})]),i=new Ca({}),r=new Ca({}),o=new Ca({}),u=new Ca(""),s=new Fh(l,i,o,u,r,jp,n,t.root);return s.snapshot=t.root,new Dh(new kh(s,[]),t)}var Fh=function(){function e(e,n,t,l,i,r,o,u){this.url=e,this.params=n,this.queryParams=t,this.fragment=l,this.data=i,this.outlet=r,this.component=o,this._futureSnapshot=u}return Object.defineProperty(e.prototype,"routeConfig",{get:function(){return this._futureSnapshot.routeConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._routerState.root},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._routerState.parent(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstChild",{get:function(){return this._routerState.firstChild(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this._routerState.children(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pathFromRoot",{get:function(){return this._routerState.pathFromRoot(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paramMap",{get:function(){return this._paramMap||(this._paramMap=this.params.pipe(j(function(e){return Qp(e)}))),this._paramMap},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"queryParamMap",{get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(j(function(e){return Qp(e)}))),this._queryParamMap},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return this.snapshot?this.snapshot.toString():"Future("+this._futureSnapshot+")"},e}();function Uh(e,n){void 0===n&&(n="emptyOnly");var t=e.pathFromRoot,l=0;if("always"!==n)for(l=t.length-1;l>=1;){var i=t[l],o=t[l-1];if(i.routeConfig&&""===i.routeConfig.path)l--;else{if(o.component)break;l--}}return function(e){return e.reduce(function(e,n){return{params:r({},e.params,n.params),data:r({},e.data,n.data),resolve:r({},e.resolve,n._resolvedData)}},{params:{},data:{},resolve:{}})}(t.slice(l))}var Hh=function(){function e(e,n,t,l,i,r,o,u,s,a,c){this.url=e,this.params=n,this.queryParams=t,this.fragment=l,this.data=i,this.outlet=r,this.component=o,this.routeConfig=u,this._urlSegment=s,this._lastPathIndex=a,this._resolve=c}return Object.defineProperty(e.prototype,"root",{get:function(){return this._routerState.root},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._routerState.parent(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstChild",{get:function(){return this._routerState.firstChild(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this._routerState.children(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pathFromRoot",{get:function(){return this._routerState.pathFromRoot(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paramMap",{get:function(){return this._paramMap||(this._paramMap=Qp(this.params)),this._paramMap},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"queryParamMap",{get:function(){return this._queryParamMap||(this._queryParamMap=Qp(this.queryParams)),this._queryParamMap},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return"Route(url:'"+this.url.map(function(e){return e.toString()}).join("/")+"', path:'"+(this.routeConfig?this.routeConfig.path:"")+"')"},e}(),Gh=function(e){function n(n,t){var l=e.call(this,t)||this;return l.url=n,Bh(l,t),l}return i(n,e),n.prototype.toString=function(){return Vh(this._root)},n}(wh);function Bh(e,n){n.value._routerState=e,n.children.forEach(function(n){return Bh(e,n)})}function Vh(e){var n=e.children.length>0?" { "+e.children.map(Vh).join(", ")+" } ":"";return""+e.value+n}function Wh(e){if(e.snapshot){var n=e.snapshot,t=e._futureSnapshot;e.snapshot=t,ih(n.queryParams,t.queryParams)||e.queryParams.next(t.queryParams),n.fragment!==t.fragment&&e.fragment.next(t.fragment),ih(n.params,t.params)||e.params.next(t.params),function(e,n){if(e.length!==n.length)return!1;for(var t=0;t<e.length;++t)if(!ih(e[t],n[t]))return!1;return!0}(n.url,t.url)||e.url.next(t.url),ih(n.data,t.data)||e.data.next(t.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function zh(e,n){var t,l;return ih(e.params,n.params)&&dh(t=e.url,l=n.url)&&t.every(function(e,n){return ih(e.parameters,l[n].parameters)})&&!(!e.parent!=!n.parent)&&(!e.parent||zh(e.parent,n.parent))}function Yh(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Kh(e,n,t,l,i){var r={};return l&&uh(l,function(e,n){r[n]=Array.isArray(e)?e.map(function(e){return""+e}):""+e}),new ch(t.root===e?n:function e(n,t,l){var i={};return uh(n.children,function(n,r){i[r]=n===t?l:e(n,t,l)}),new ph(n.segments,i)}(t.root,e,n),r,i)}var jh=function(){function e(e,n,t){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=t,e&&t.length>0&&Yh(t[0]))throw new Error("Root segment cannot have matrix parameters");var l=t.find(function(e){return"object"==typeof e&&null!=e&&e.outlets});if(l&&l!==oh(t))throw new Error("{outlets:{}} has to be the last command")}return e.prototype.toRoot=function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]},e}(),$h=function(){return function(e,n,t){this.segmentGroup=e,this.processChildren=n,this.index=t}}();function Qh(e){return"object"==typeof e&&null!=e&&e.outlets?e.outlets[jp]:""+e}function qh(e,n,t){if(e||(e=new ph([],{})),0===e.segments.length&&e.hasChildren())return Xh(e,n,t);var l=function(e,n,t){for(var l=0,i=n,r={match:!1,pathIndex:0,commandIndex:0};i<e.segments.length;){if(l>=t.length)return r;var o=e.segments[i],u=Qh(t[l]),s=l<t.length-1?t[l+1]:null;if(i>0&&void 0===u)break;if(u&&s&&"object"==typeof s&&void 0===s.outlets){if(!nd(u,s,o))return r;l+=2}else{if(!nd(u,{},o))return r;l++}i++}return{match:!0,pathIndex:i,commandIndex:l}}(e,n,t),i=t.slice(l.commandIndex);if(l.match&&l.pathIndex<e.segments.length){var r=new ph(e.segments.slice(0,l.pathIndex),{});return r.children[jp]=new ph(e.segments.slice(l.pathIndex),e.children),Xh(r,0,i)}return l.match&&0===i.length?new ph(e.segments,{}):l.match&&!e.hasChildren()?Zh(e,n,t):l.match?Xh(e,0,i):Zh(e,n,t)}function Xh(e,n,t){if(0===t.length)return new ph(e.segments,{});var l=function(e){var n,t;return"object"!=typeof e[0]?((n={})[jp]=e,n):void 0===e[0].outlets?((t={})[jp]=e,t):e[0].outlets}(t),i={};return uh(l,function(t,l){null!==t&&(i[l]=qh(e.children[l],n,t))}),uh(e.children,function(e,n){void 0===l[n]&&(i[n]=e)}),new ph(e.segments,i)}function Zh(e,n,t){for(var l=e.segments.slice(0,n),i=0;i<t.length;){if("object"==typeof t[i]&&void 0!==t[i].outlets){var r=Jh(t[i].outlets);return new ph(l,r)}if(0===i&&Yh(t[0]))l.push(new hh(e.segments[n].path,t[0])),i++;else{var o=Qh(t[i]),u=i<t.length-1?t[i+1]:null;o&&u&&Yh(u)?(l.push(new hh(o,ed(u))),i+=2):(l.push(new hh(o,{})),i++)}}return new ph(l,{})}function Jh(e){var n={};return uh(e,function(e,t){null!==e&&(n[t]=Zh(new ph([],{}),0,e))}),n}function ed(e){var n={};return uh(e,function(e,t){return n[t]=""+e}),n}function nd(e,n,t){return e==t.path&&ih(n,t.parameters)}var td=function(){function e(e,n,t,l){this.routeReuseStrategy=e,this.futureState=n,this.currState=t,this.forwardEvent=l}return e.prototype.activate=function(e){var n=this.futureState._root,t=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,t,e),Wh(this.futureState.root),this.activateChildRoutes(n,t,e)},e.prototype.deactivateChildRoutes=function(e,n,t){var l=this,i=Mh(n);e.children.forEach(function(e){var n=e.value.outlet;l.deactivateRoutes(e,i[n],t),delete i[n]}),uh(i,function(e,n){l.deactivateRouteAndItsChildren(e,t)})},e.prototype.deactivateRoutes=function(e,n,t){var l=e.value,i=n?n.value:null;if(l===i)if(l.component){var r=t.getContext(l.outlet);r&&this.deactivateChildRoutes(e,n,r.children)}else this.deactivateChildRoutes(e,n,t);else i&&this.deactivateRouteAndItsChildren(n,t)},e.prototype.deactivateRouteAndItsChildren=function(e,n){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)},e.prototype.detachAndStoreRouteSubtree=function(e,n){var t=n.getContext(e.value.outlet);if(t&&t.outlet){var l=t.outlet.detach(),i=t.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:i})}},e.prototype.deactivateRouteAndOutlet=function(e,n){var t=this,l=n.getContext(e.value.outlet);if(l){var i=Mh(e),r=e.value.component?l.children:n;uh(i,function(e,n){return t.deactivateRouteAndItsChildren(e,r)}),l.outlet&&(l.outlet.deactivate(),l.children.onOutletDeactivated())}},e.prototype.activateChildRoutes=function(e,n,t){var l=this,i=Mh(n);e.children.forEach(function(e){l.activateRoutes(e,i[e.value.outlet],t),l.forwardEvent(new zp(e.value.snapshot))}),e.children.length&&this.forwardEvent(new Vp(e.value.snapshot))},e.prototype.activateRoutes=function(e,n,t){var l=e.value,i=n?n.value:null;if(Wh(l),l===i)if(l.component){var r=t.getOrCreateContext(l.outlet);this.activateChildRoutes(e,n,r.children)}else this.activateChildRoutes(e,n,t);else if(l.component)if(r=t.getOrCreateContext(l.outlet),this.routeReuseStrategy.shouldAttach(l.snapshot)){var o=this.routeReuseStrategy.retrieve(l.snapshot);this.routeReuseStrategy.store(l.snapshot,null),r.children.onOutletReAttached(o.contexts),r.attachRef=o.componentRef,r.route=o.route.value,r.outlet&&r.outlet.attach(o.componentRef,o.route.value),ld(o.route)}else{var u=function(e){for(var n=l.snapshot.parent;n;n=n.parent){var t=n.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(),s=u?u.module.componentFactoryResolver:null;r.attachRef=null,r.route=l,r.resolver=s,r.outlet&&r.outlet.activateWith(l,s),this.activateChildRoutes(e,null,r.children)}else this.activateChildRoutes(e,null,t)},e}();function ld(e){Wh(e.value),e.children.forEach(ld)}function id(e){return"function"==typeof e}function rd(e){return e instanceof ch}var od=function(){return function(e){this.segmentGroup=e||null}}(),ud=function(){return function(e){this.urlTree=e}}();function sd(e){return new _(function(n){return n.error(new od(e))})}function ad(e){return new _(function(n){return n.error(new ud(e))})}function cd(e){return new _(function(n){return n.error(new Error("Only absolute redirects can have named outlets. redirectTo: '"+e+"'"))})}var pd=function(){function e(e,n,t,l,i){this.configLoader=n,this.urlSerializer=t,this.urlTree=l,this.config=i,this.allowRedirects=!0,this.ngModule=e.get(ct)}return e.prototype.apply=function(){var e=this;return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,jp).pipe(j(function(n){return e.createUrlTree(n,e.urlTree.queryParams,e.urlTree.fragment)})).pipe(Xa(function(n){if(n instanceof ud)return e.allowRedirects=!1,e.match(n.urlTree);if(n instanceof od)throw e.noMatchError(n);throw n}))},e.prototype.match=function(e){var n=this;return this.expandSegmentGroup(this.ngModule,this.config,e.root,jp).pipe(j(function(t){return n.createUrlTree(t,e.queryParams,e.fragment)})).pipe(Xa(function(e){if(e instanceof od)throw n.noMatchError(e);throw e}))},e.prototype.noMatchError=function(e){return new Error("Cannot match any routes. URL Segment: '"+e.segmentGroup+"'")},e.prototype.createUrlTree=function(e,n,t){var l,i=e.segments.length>0?new ph([],((l={})[jp]=e,l)):e;return new ch(i,n,t)},e.prototype.expandSegmentGroup=function(e,n,t,l){return 0===t.segments.length&&t.hasChildren()?this.expandChildren(e,n,t).pipe(j(function(e){return new ph([],e)})):this.expandSegment(e,t,n,t.segments,l,!0)},e.prototype.expandChildren=function(e,n,t){var l=this;return function(t,i){if(0===Object.keys(t).length)return Ta({});var r=[],o=[],u={};return uh(t,function(t,i){var s,a,c=(s=i,a=t,l.expandSegmentGroup(e,n,a,s)).pipe(j(function(e){return u[i]=e}));i===jp?r.push(c):o.push(c)}),Ta.apply(null,r.concat(o)).pipe(Ma(),qa(),j(function(){return u}))}(t.children)},e.prototype.expandSegment=function(e,n,t,l,i,r){var o=this;return Ta.apply(void 0,c(t)).pipe(j(function(u){return o.expandSegmentAgainstRoute(e,n,t,u,l,i,r).pipe(Xa(function(e){if(e instanceof od)return Ta(null);throw e}))}),Ma(),lc(function(e){return!!e}),Xa(function(e,t){if(e instanceof Aa||"EmptyError"===e.name){if(o.noLeftoversInUrl(n,l,i))return Ta(new ph([],{}));throw new od(n)}throw e}))},e.prototype.noLeftoversInUrl=function(e,n,t){return 0===n.length&&!e.children[t]},e.prototype.expandSegmentAgainstRoute=function(e,n,t,l,i,r,o){return fd(l)!==r?sd(n):void 0===l.redirectTo?this.matchSegmentAgainstRoute(e,n,l,i):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,n,t,l,i,r):sd(n)},e.prototype.expandSegmentAgainstRouteUsingRedirect=function(e,n,t,l,i,r){return"**"===l.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,l,r):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,t,l,i,r)},e.prototype.expandWildCardWithParamsAgainstRouteUsingRedirect=function(e,n,t,l){var i=this,r=this.applyRedirectCommands([],t.redirectTo,{});return t.redirectTo.startsWith("/")?ad(r):this.lineralizeSegments(t,r).pipe(Z(function(t){var r=new ph(t,{});return i.expandSegment(e,r,n,t,l,!1)}))},e.prototype.expandRegularSegmentAgainstRouteUsingRedirect=function(e,n,t,l,i,r){var o=this,u=hd(n,l,i),s=u.consumedSegments,a=u.lastChild,c=u.positionalParamSegments;if(!u.matched)return sd(n);var p=this.applyRedirectCommands(s,l.redirectTo,c);return l.redirectTo.startsWith("/")?ad(p):this.lineralizeSegments(l,p).pipe(Z(function(l){return o.expandSegment(e,n,t,l.concat(i.slice(a)),r,!1)}))},e.prototype.matchSegmentAgainstRoute=function(e,n,t,l){var i=this;if("**"===t.path)return t.loadChildren?this.configLoader.load(e.injector,t).pipe(j(function(e){return t._loadedConfig=e,new ph(l,{})})):Ta(new ph(l,{}));var o=hd(n,t,l),u=o.consumedSegments,a=o.lastChild;if(!o.matched)return sd(n);var c=l.slice(a);return this.getChildConfig(e,t,l).pipe(Z(function(e){var t=e.module,l=e.routes,o=function(e,n,t,l){return t.length>0&&function(e,n,t){return l.some(function(t){return gd(e,n,t)&&fd(t)!==jp})}(e,t)?{segmentGroup:dd(new ph(n,function(e,n){var t,l,i={};i[jp]=n;try{for(var r=s(e),o=r.next();!o.done;o=r.next()){var u=o.value;""===u.path&&fd(u)!==jp&&(i[fd(u)]=new ph([],{}))}}catch(a){t={error:a}}finally{try{o&&!o.done&&(l=r.return)&&l.call(r)}finally{if(t)throw t.error}}return i}(l,new ph(t,e.children)))),slicedSegments:[]}:0===t.length&&function(e,n,t){return l.some(function(t){return gd(e,n,t)})}(e,t)?{segmentGroup:dd(new ph(e.segments,function(e,n,t,l){var i,o,u={};try{for(var a=s(t),c=a.next();!c.done;c=a.next()){var p=c.value;gd(e,n,p)&&!l[fd(p)]&&(u[fd(p)]=new ph([],{}))}}catch(h){i={error:h}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}return r({},l,u)}(e,t,l,e.children))),slicedSegments:t}:{segmentGroup:e,slicedSegments:t}}(n,u,c,l),a=o.segmentGroup,p=o.slicedSegments;return 0===p.length&&a.hasChildren()?i.expandChildren(t,l,a).pipe(j(function(e){return new ph(u,e)})):0===l.length&&0===p.length?Ta(new ph(u,{})):i.expandSegment(t,a,l,p,jp,!0).pipe(j(function(e){return new ph(u.concat(e.segments),e.children)}))}))},e.prototype.getChildConfig=function(e,n,t){var l=this;return n.children?Ta(new Jp(n.children,e)):n.loadChildren?void 0!==n._loadedConfig?Ta(n._loadedConfig):function(e,n,t){var l,i=n.canLoad;return i&&0!==i.length?X(i).pipe(j(function(l){var i,r=e.get(l);if(function(e){return e&&id(e.canLoad)}(r))i=r.canLoad(n,t);else{if(!id(r))throw new Error("Invalid CanLoad guard");i=r(n,t)}return sh(i)})).pipe(Ma(),(l=function(e){return!0===e},function(e){return e.lift(new ic(l,void 0,e))})):Ta(!0)}(e.injector,n,t).pipe(Z(function(t){return t?l.configLoader.load(e.injector,n).pipe(j(function(e){return n._loadedConfig=e,e})):function(e){return new _(function(n){return n.error(Xp("Cannot load children because the guard of the route \"path: '"+e.path+"'\" returned false"))})}(n)})):Ta(new Jp([],e))},e.prototype.lineralizeSegments=function(e,n){for(var t=[],l=n.root;;){if(t=t.concat(l.segments),0===l.numberOfChildren)return Ta(t);if(l.numberOfChildren>1||!l.children[jp])return cd(e.redirectTo);l=l.children[jp]}},e.prototype.applyRedirectCommands=function(e,n,t){return this.applyRedirectCreatreUrlTree(n,this.urlSerializer.parse(n),e,t)},e.prototype.applyRedirectCreatreUrlTree=function(e,n,t,l){var i=this.createSegmentGroup(e,n.root,t,l);return new ch(i,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)},e.prototype.createQueryParams=function(e,n){var t={};return uh(e,function(e,l){if("string"==typeof e&&e.startsWith(":")){var i=e.substring(1);t[l]=n[i]}else t[l]=e}),t},e.prototype.createSegmentGroup=function(e,n,t,l){var i=this,r=this.createSegments(e,n.segments,t,l),o={};return uh(n.children,function(n,r){o[r]=i.createSegmentGroup(e,n,t,l)}),new ph(r,o)},e.prototype.createSegments=function(e,n,t,l){var i=this;return n.map(function(n){return n.path.startsWith(":")?i.findPosParam(e,n,l):i.findOrReturn(n,t)})},e.prototype.findPosParam=function(e,n,t){var l=t[n.path.substring(1)];if(!l)throw new Error("Cannot redirect to '"+e+"'. Cannot find '"+n.path+"'.");return l},e.prototype.findOrReturn=function(e,n){var t,l,i=0;try{for(var r=s(n),o=r.next();!o.done;o=r.next()){var u=o.value;if(u.path===e.path)return n.splice(i),u;i++}}catch(a){t={error:a}}finally{try{o&&!o.done&&(l=r.return)&&l.call(r)}finally{if(t)throw t.error}}return e},e}();function hd(e,n,t){if(""===n.path)return"full"===n.pathMatch&&(e.hasChildren()||t.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};var l=(n.matcher||Zp)(t,e,n);return l?{matched:!0,consumedSegments:l.consumed,lastChild:l.consumed.length,positionalParamSegments:l.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function dd(e){if(1===e.numberOfChildren&&e.children[jp]){var n=e.children[jp];return new ph(e.segments.concat(n.segments),n.children)}return e}function gd(e,n,t){return(!(e.hasChildren()||n.length>0)||"full"!==t.pathMatch)&&""===t.path&&void 0!==t.redirectTo}function fd(e){return e.outlet||jp}var md=function(){return function(e){this.path=e,this.route=this.path[this.path.length-1]}}(),vd=function(){return function(e,n){this.component=e,this.route=n}}();function Sd(e,n,t){var l=function(e){if(!e)return null;for(var n=e.parent;n;n=n.parent){var t=n.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(n);return(l?l.module.injector:t).get(e)}function Ed(e,n,t,l,i){void 0===i&&(i={canDeactivateChecks:[],canActivateChecks:[]});var r=Mh(n);return e.children.forEach(function(e){!function(e,n,t,l,i){void 0===i&&(i={canDeactivateChecks:[],canActivateChecks:[]});var r=e.value,o=n?n.value:null,u=t?t.getContext(e.value.outlet):null;if(o&&r.routeConfig===o.routeConfig){var s=function(e,n,t){if("function"==typeof t)return t(e,n);switch(t){case"pathParamsChange":return!dh(e.url,n.url);case"pathParamsOrQueryParamsChange":return!dh(e.url,n.url)||!ih(e.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!zh(e,n)||!ih(e.queryParams,n.queryParams);case"paramsChange":default:return!zh(e,n)}}(o,r,r.routeConfig.runGuardsAndResolvers);s?i.canActivateChecks.push(new md(l)):(r.data=o.data,r._resolvedData=o._resolvedData),Ed(e,n,r.component?u?u.children:null:t,l,i),s&&i.canDeactivateChecks.push(new vd(u&&u.outlet&&u.outlet.component||null,o))}else o&&yd(n,u,i),i.canActivateChecks.push(new md(l)),Ed(e,null,r.component?u?u.children:null:t,l,i)}(e,r[e.value.outlet],t,l.concat([e.value]),i),delete r[e.value.outlet]}),uh(r,function(e,n){return yd(e,t.getContext(n),i)}),i}function yd(e,n,t){var l=Mh(e),i=e.value;uh(l,function(e,l){yd(e,i.component?n?n.children.getContext(l):null:n,t)}),t.canDeactivateChecks.push(new vd(i.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,i))}var Rd=Symbol("INITIAL_VALUE");function bd(){return oc(function(e){return(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=null,l=null;return F(e[e.length-1])&&(l=e.pop()),"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&p(e[0])&&(e=e[0]),le(e,l).lift(new _a(t))}).apply(void 0,c(e.map(function(e){return e.pipe(ec(1),cc(Rd))}))).pipe(pc(function(e,n){var t=!1;return n.reduce(function(e,l,i){if(e!==Rd)return e;if(l===Rd&&(t=!0),!t){if(!1===l)return l;if(i===n.length-1||rd(l))return l}return e},e)},Rd),Da(function(e){return e!==Rd}),j(function(e){return rd(e)?e:!0===e}),ec(1))})}function Od(e,n){return null!==e&&n&&n(new Wp(e)),Ta(!0)}function Td(e,n){return null!==e&&n&&n(new Bp(e)),Ta(!0)}function Cd(e,n,t){var l=n.routeConfig?n.routeConfig.canActivate:null;return l&&0!==l.length?Ta(l.map(function(l){return ka(function(){var i,r=Sd(l,n,t);if(function(e){return e&&id(e.canActivate)}(r))i=sh(r.canActivate(n,e));else{if(!id(r))throw new Error("Invalid CanActivate guard");i=sh(r(n,e))}return i.pipe(lc())})})).pipe(bd()):Ta(!0)}function Id(e,n,t){var l=n[n.length-1],i=n.slice(0,n.length-1).reverse().map(function(e){return function(e){var n=e.routeConfig?e.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:e,guards:n}:null}(e)}).filter(function(e){return null!==e}).map(function(n){return ka(function(){return Ta(n.guards.map(function(i){var r,o=Sd(i,n.node,t);if(function(e){return e&&id(e.canActivateChild)}(o))r=sh(o.canActivateChild(l,e));else{if(!id(o))throw new Error("Invalid CanActivateChild guard");r=sh(o(l,e))}return r.pipe(lc())})).pipe(bd())})});return Ta(i).pipe(bd())}var Ad=function(){return function(){}}(),Nd=function(){function e(e,n,t,l,i,r){this.rootComponentType=e,this.config=n,this.urlTree=t,this.url=l,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=r}return e.prototype.recognize=function(){try{var e=Pd(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,n=this.processSegmentGroup(this.config,e,jp),t=new Hh([],Object.freeze({}),Object.freeze(r({},this.urlTree.queryParams)),this.urlTree.fragment,{},jp,this.rootComponentType,null,this.urlTree.root,-1,{}),l=new kh(t,n),i=new Gh(this.url,l);return this.inheritParamsAndData(i._root),Ta(i)}catch(o){return new _(function(e){return e.error(o)})}},e.prototype.inheritParamsAndData=function(e){var n=this,t=e.value,l=Uh(t,this.paramsInheritanceStrategy);t.params=Object.freeze(l.params),t.data=Object.freeze(l.data),e.children.forEach(function(e){return n.inheritParamsAndData(e)})},e.prototype.processSegmentGroup=function(e,n,t){return 0===n.segments.length&&n.hasChildren()?this.processChildren(e,n):this.processSegment(e,n,n.segments,t)},e.prototype.processChildren=function(e,n){var t,l=this,i=gh(n,function(n,t){return l.processSegmentGroup(e,n,t)});return t={},i.forEach(function(e){var n=t[e.value.outlet];if(n){var l=n.url.map(function(e){return e.toString()}).join("/"),i=e.value.url.map(function(e){return e.toString()}).join("/");throw new Error("Two segments cannot have the same outlet name: '"+l+"' and '"+i+"'.")}t[e.value.outlet]=e.value}),i.sort(function(e,n){return e.value.outlet===jp?-1:n.value.outlet===jp?1:e.value.outlet.localeCompare(n.value.outlet)}),i},e.prototype.processSegment=function(e,n,t,l){var i,r;try{for(var o=s(e),u=o.next();!u.done;u=o.next()){var a=u.value;try{return this.processSegmentAgainstRoute(a,n,t,l)}catch(c){if(!(c instanceof Ad))throw c}}}catch(p){i={error:p}}finally{try{u&&!u.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}if(this.noLeftoversInUrl(n,t,l))return[];throw new Ad},e.prototype.noLeftoversInUrl=function(e,n,t){return 0===n.length&&!e.children[t]},e.prototype.processSegmentAgainstRoute=function(e,n,t,l){if(e.redirectTo)throw new Ad;if((e.outlet||jp)!==l)throw new Ad;var i,o=[],u=[];if("**"===e.path){var s=t.length>0?oh(t).parameters:{};i=new Hh(t,s,Object.freeze(r({},this.urlTree.queryParams)),this.urlTree.fragment,Md(e),l,e.component,e,_d(n),wd(n)+t.length,Dd(e))}else{var a=function(e,n,t){if(""===n.path){if("full"===n.pathMatch&&(e.hasChildren()||t.length>0))throw new Ad;return{consumedSegments:[],lastChild:0,parameters:{}}}var l=(n.matcher||Zp)(t,e,n);if(!l)throw new Ad;var i={};uh(l.posParams,function(e,n){i[n]=e.path});var o=l.consumed.length>0?r({},i,l.consumed[l.consumed.length-1].parameters):i;return{consumedSegments:l.consumed,lastChild:l.consumed.length,parameters:o}}(n,e,t);o=a.consumedSegments,u=t.slice(a.lastChild),i=new Hh(o,a.parameters,Object.freeze(r({},this.urlTree.queryParams)),this.urlTree.fragment,Md(e),l,e.component,e,_d(n),wd(n)+o.length,Dd(e))}var c=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),p=Pd(n,o,u,c,this.relativeLinkResolution),h=p.segmentGroup,d=p.slicedSegments;if(0===d.length&&h.hasChildren()){var g=this.processChildren(c,h);return[new kh(i,g)]}if(0===c.length&&0===d.length)return[new kh(i,[])];var f=this.processSegment(c,h,d,jp);return[new kh(i,f)]},e}();function _d(e){for(var n=e;n._sourceSegment;)n=n._sourceSegment;return n}function wd(e){for(var n=e,t=n._segmentIndexShift?n._segmentIndexShift:0;n._sourceSegment;)t+=(n=n._sourceSegment)._segmentIndexShift?n._segmentIndexShift:0;return t-1}function Pd(e,n,t,l,i){if(t.length>0&&function(e,n,t){return l.some(function(t){return xd(e,n,t)&&kd(t)!==jp})}(e,t)){var o=new ph(n,function(e,n,t,l){var i,r,o={};o[jp]=l,l._sourceSegment=e,l._segmentIndexShift=n.length;try{for(var u=s(t),a=u.next();!a.done;a=u.next()){var c=a.value;if(""===c.path&&kd(c)!==jp){var p=new ph([],{});p._sourceSegment=e,p._segmentIndexShift=n.length,o[kd(c)]=p}}}catch(h){i={error:h}}finally{try{a&&!a.done&&(r=u.return)&&r.call(u)}finally{if(i)throw i.error}}return o}(e,n,l,new ph(t,e.children)));return o._sourceSegment=e,o._segmentIndexShift=n.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function(e,n,t){return l.some(function(t){return xd(e,n,t)})}(e,t)){var u=new ph(e.segments,function(e,n,t,l,i,o){var u,a,c={};try{for(var p=s(l),h=p.next();!h.done;h=p.next()){var d=h.value;if(xd(e,t,d)&&!i[kd(d)]){var g=new ph([],{});g._sourceSegment=e,g._segmentIndexShift="legacy"===o?e.segments.length:n.length,c[kd(d)]=g}}}catch(f){u={error:f}}finally{try{h&&!h.done&&(a=p.return)&&a.call(p)}finally{if(u)throw u.error}}return r({},i,c)}(e,n,t,l,e.children,i));return u._sourceSegment=e,u._segmentIndexShift=n.length,{segmentGroup:u,slicedSegments:t}}var a=new ph(e.segments,e.children);return a._sourceSegment=e,a._segmentIndexShift=n.length,{segmentGroup:a,slicedSegments:t}}function xd(e,n,t){return(!(e.hasChildren()||n.length>0)||"full"!==t.pathMatch)&&""===t.path&&void 0===t.redirectTo}function kd(e){return e.outlet||jp}function Md(e){return e.data||{}}function Dd(e){return e.resolve||{}}function Ld(e,n,t,l){var i=Sd(e,n,l);return sh(i.resolve?i.resolve(n,t):i(n,t))}function Fd(e){return function(n){return n.pipe(oc(function(n){var t=e(n);return t?X(t).pipe(j(function(){return n})):X([n])}))}}var Ud=function(){return function(){}}(),Hd=function(){function e(){}return e.prototype.shouldDetach=function(e){return!1},e.prototype.store=function(e,n){},e.prototype.shouldAttach=function(e){return!1},e.prototype.retrieve=function(e){return null},e.prototype.shouldReuseRoute=function(e,n){return e.routeConfig===n.routeConfig},e}(),Gd=new Le("ROUTES"),Bd=function(){function e(e,n,t,l){this.loader=e,this.compiler=n,this.onLoadStartListener=t,this.onLoadEndListener=l}return e.prototype.load=function(e,n){var t=this;return this.onLoadStartListener&&this.onLoadStartListener(n),this.loadModuleFactory(n.loadChildren).pipe(j(function(l){t.onLoadEndListener&&t.onLoadEndListener(n);var i=l.create(e);return new Jp(rh(i.injector.get(Gd)).map(lh),i)}))},e.prototype.loadModuleFactory=function(e){var n=this;return"string"==typeof e?X(this.loader.load(e)):sh(e()).pipe(Z(function(e){return e instanceof pt?Ta(e):X(n.compiler.compileModuleAsync(e))}))},e}(),Vd=function(){return function(){}}(),Wd=function(){function e(){}return e.prototype.shouldProcessUrl=function(e){return!0},e.prototype.extract=function(e){return e},e.prototype.merge=function(e,n){return e},e}();function zd(e){throw e}function Yd(e,n,t){return n.parse("/")}function Kd(e,n){return Ta(null)}var jd=function(){function e(e,n,t,l,i,r,o,u){var s=this;this.rootComponentType=e,this.urlSerializer=n,this.rootContexts=t,this.location=l,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new D,this.errorHandler=zd,this.malformedUriErrorHandler=Yd,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Kd,afterPreactivation:Kd},this.urlHandlingStrategy=new Wd,this.routeReuseStrategy=new Hd,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=i.get(ct),this.console=i.get(Ji);var a=i.get(vr);this.isNgZoneEnabled=a instanceof vr,this.resetConfig(u),this.currentUrlTree=new ch(new ph([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Bd(r,o,function(e){return s.triggerEvent(new Hp(e))},function(e){return s.triggerEvent(new Gp(e))}),this.routerState=Lh(this.currentUrlTree,this.rootComponentType),this.transitions=new Ca({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}return e.prototype.setupNavigations=function(e){var n=this,t=this.events;return e.pipe(Da(function(e){return 0!==e.id}),j(function(e){return r({},e,{extractedUrl:n.urlHandlingStrategy.extract(e.rawUrl)})}),oc(function(e){var l,i,o,u,a=!1,c=!1;return Ta(e).pipe(fc(function(e){n.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:n.lastSuccessfulNavigation?r({},n.lastSuccessfulNavigation,{previousNavigation:null}):null}}),oc(function(e){var l,i,o,u,s=!n.navigated||e.extractedUrl.toString()!==n.browserUrlTree.toString();if(("reload"===n.onSameUrlNavigation||s)&&n.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return Ta(e).pipe(oc(function(e){var l=n.transitions.getValue();return t.next(new wp(e.id,n.serializeUrl(e.extractedUrl),e.source,e.restoredState)),l!==n.transitions.getValue()?Pa:[e]}),oc(function(e){return Promise.resolve(e)}),(l=n.ngModule.injector,i=n.configLoader,o=n.urlSerializer,u=n.config,function(e){return e.pipe(oc(function(e){return function(n,t,l,i,r){return new pd(n,t,l,e.extractedUrl,r).apply()}(l,i,o,0,u).pipe(j(function(n){return r({},e,{urlAfterRedirects:n})}))}))}),fc(function(e){n.currentNavigation=r({},n.currentNavigation,{finalUrl:e.urlAfterRedirects})}),function(e,t,l,i,o){return function(l){return l.pipe(Z(function(l){return function(e,n,t,l,i,r){return void 0===i&&(i="emptyOnly"),void 0===r&&(r="legacy"),new Nd(e,n,t,l,i,r).recognize()}(e,t,l.urlAfterRedirects,(u=l.urlAfterRedirects,n.serializeUrl(u)),i,o).pipe(j(function(e){return r({},l,{targetSnapshot:e})}));var u}))}}(n.rootComponentType,n.config,0,n.paramsInheritanceStrategy,n.relativeLinkResolution),fc(function(e){"eager"===n.urlUpdateStrategy&&(e.extras.skipLocationChange||n.setBrowserUrl(e.urlAfterRedirects,!!e.extras.replaceUrl,e.id,e.extras.state),n.browserUrlTree=e.urlAfterRedirects)}),fc(function(e){var l=new Mp(e.id,n.serializeUrl(e.extractedUrl),n.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.next(l)}));if(s&&n.rawUrlTree&&n.urlHandlingStrategy.shouldProcessUrl(n.rawUrlTree)){var a=e.extractedUrl,c=e.source,p=e.restoredState,h=e.extras,d=new wp(e.id,n.serializeUrl(a),c,p);t.next(d);var g=Lh(a,n.rootComponentType).snapshot;return Ta(r({},e,{targetSnapshot:g,urlAfterRedirects:a,extras:r({},h,{skipLocationChange:!1,replaceUrl:!1})}))}return n.rawUrlTree=e.rawUrl,n.browserUrlTree=e.urlAfterRedirects,e.resolve(null),Pa}),Fd(function(e){var t=e.extras;return n.hooks.beforePreactivation(e.targetSnapshot,{navigationId:e.id,appliedUrlTree:e.extractedUrl,rawUrlTree:e.rawUrl,skipLocationChange:!!t.skipLocationChange,replaceUrl:!!t.replaceUrl})}),fc(function(e){var t=new Dp(e.id,n.serializeUrl(e.extractedUrl),n.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);n.triggerEvent(t)}),j(function(e){return r({},e,{guards:(t=e.targetSnapshot,l=e.currentSnapshot,i=n.rootContexts,o=t._root,Ed(o,l?l._root:null,i,[o.value]))});var t,l,i,o}),function(e,n){return function(t){return t.pipe(Z(function(t){var l=t.targetSnapshot,i=t.currentSnapshot,o=t.guards,u=o.canActivateChecks,s=o.canDeactivateChecks;return 0===s.length&&0===u.length?Ta(r({},t,{guardsResult:!0})):function(e,n,t,l){return X(s).pipe(Z(function(e){return function(e,n,t,l,i){var r=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return r&&0!==r.length?Ta(r.map(function(r){var o,u=Sd(r,n,i);if(function(e){return e&&id(e.canDeactivate)}(u))o=sh(u.canDeactivate(e,n,t,l));else{if(!id(u))throw new Error("Invalid CanDeactivate guard");o=sh(u(e,n,t,l))}return o.pipe(lc())})).pipe(bd()):Ta(!0)}(e.component,e.route,t,n,l)}),lc(function(e){return!0!==e},!0))}(0,l,i,e).pipe(Z(function(t){return t&&"boolean"==typeof t?function(e,n,t,l){return X(u).pipe(gc(function(n){return X([Td(n.route.parent,l),Od(n.route,l),Id(e,n.path,t),Cd(e,n.route,t)]).pipe(Ma(),lc(function(e){return!0!==e},!0))}),lc(function(e){return!0!==e},!0))}(l,0,e,n):Ta(t)}),j(function(e){return r({},t,{guardsResult:e})}))}))}}(n.ngModule.injector,function(e){return n.triggerEvent(e)}),fc(function(e){if(rd(e.guardsResult)){var t=Xp('Redirecting to "'+n.serializeUrl(e.guardsResult)+'"');throw t.url=e.guardsResult,t}}),fc(function(e){var t=new Lp(e.id,n.serializeUrl(e.extractedUrl),n.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);n.triggerEvent(t)}),Da(function(e){if(!e.guardsResult){n.resetUrlToCurrentUrlTree();var l=new xp(e.id,n.serializeUrl(e.extractedUrl),"");return t.next(l),e.resolve(!1),!1}return!0}),Fd(function(e){if(e.guards.canActivateChecks.length)return Ta(e).pipe(fc(function(e){var t=new Fp(e.id,n.serializeUrl(e.extractedUrl),n.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);n.triggerEvent(t)}),(t=n.paramsInheritanceStrategy,l=n.ngModule.injector,function(e){return e.pipe(Z(function(e){var n=e.targetSnapshot,i=e.guards.canActivateChecks;return i.length?X(i).pipe(gc(function(e){return function(e,t,l,i){return function(e,n,t,l){var i=Object.keys(e);if(0===i.length)return Ta({});if(1===i.length){var r=i[0];return Ld(e[r],n,t,l).pipe(j(function(e){var n;return(n={})[r]=e,n}))}var o={};return X(i).pipe(Z(function(i){return Ld(e[i],n,t,l).pipe(j(function(e){return o[i]=e,e}))})).pipe(qa(),j(function(){return o}))}(e._resolve,e,n,i).pipe(j(function(n){return e._resolvedData=n,e.data=r({},e.data,Uh(e,l).resolve),null}))}(e.route,0,t,l)}),function(e,n){return arguments.length>=2?function(t){return A(pc(e,n),Ga(1),ja(n))(t)}:function(n){return A(pc(function(n,t,l){return e(n,t,l+1)}),Ga(1))(n)}}(function(e,n){return e}),j(function(n){return e})):Ta(e)}))}),fc(function(e){var t=new Up(e.id,n.serializeUrl(e.extractedUrl),n.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);n.triggerEvent(t)}));var t,l}),Fd(function(e){var t=e.extras;return n.hooks.afterPreactivation(e.targetSnapshot,{navigationId:e.id,appliedUrlTree:e.extractedUrl,rawUrlTree:e.rawUrl,skipLocationChange:!!t.skipLocationChange,replaceUrl:!!t.replaceUrl})}),j(function(e){var t,l,i,o=(i=function e(n,t,l){if(l&&n.shouldReuseRoute(t.value,l.value.snapshot)){(a=l.value)._futureSnapshot=t.value;var i=function(n,t,l){return t.children.map(function(t){var i,r;try{for(var o=s(l.children),u=o.next();!u.done;u=o.next()){var a=u.value;if(n.shouldReuseRoute(a.value.snapshot,t.value))return e(n,t,a)}}catch(c){i={error:c}}finally{try{u&&!u.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return e(n,t)})}(n,t,l);return new kh(a,i)}var r=n.retrieve(t.value);if(r){var o=r.route;return function e(n,t){if(n.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=n.value;for(var l=0;l<n.children.length;++l)e(n.children[l],t.children[l])}(t,o),o}var u,a=new Fh(new Ca((u=t.value).url),new Ca(u.params),new Ca(u.queryParams),new Ca(u.fragment),new Ca(u.data),u.outlet,u.component,u);return i=t.children.map(function(t){return e(n,t)}),new kh(a,i)}(n.routeReuseStrategy,(t=e.targetSnapshot)._root,(l=e.currentRouterState)?l._root:void 0),new Dh(i,t));return r({},e,{targetRouterState:o})}),fc(function(e){n.currentUrlTree=e.urlAfterRedirects,n.rawUrlTree=n.urlHandlingStrategy.merge(n.currentUrlTree,e.rawUrl),n.routerState=e.targetRouterState,"deferred"===n.urlUpdateStrategy&&(e.extras.skipLocationChange||n.setBrowserUrl(n.rawUrlTree,!!e.extras.replaceUrl,e.id,e.extras.state),n.browserUrlTree=e.urlAfterRedirects)}),(i=n.rootContexts,o=n.routeReuseStrategy,u=function(e){return n.triggerEvent(e)},j(function(e){return new td(o,e.targetRouterState,e.currentRouterState,u).activate(i),e})),fc({next:function(){a=!0},complete:function(){a=!0}}),(l=function(){if(!a&&!c){n.resetUrlToCurrentUrlTree();var l=new xp(e.id,n.serializeUrl(e.extractedUrl),"Navigation ID "+e.id+" is not equal to the current navigation id "+n.navigationId);t.next(l),e.resolve(!1)}n.currentNavigation=null},function(e){return e.lift(new Sc(l))}),Xa(function(l){if(c=!0,(u=l)&&u[qp]){var i=rd(l.url);i||(n.navigated=!0,n.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl));var r=new xp(e.id,n.serializeUrl(e.extractedUrl),l.message);t.next(r),e.resolve(!1),i&&n.navigateByUrl(l.url)}else{n.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl);var o=new kp(e.id,n.serializeUrl(e.extractedUrl),l);t.next(o);try{e.resolve(n.errorHandler(l))}catch(s){e.reject(s)}}var u;return Pa}))}))},e.prototype.resetRootComponentType=function(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType},e.prototype.getTransition=function(){var e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e},e.prototype.setTransition=function(e){this.transitions.next(r({},this.getTransition(),e))},e.prototype.initialNavigation=function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})},e.prototype.setUpLocationChangeListener=function(){var e=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe(function(n){var t=e.parseUrl(n.url),l="popstate"===n.type?"popstate":"hashchange",i=n.state&&n.state.navigationId?n.state:null;setTimeout(function(){e.scheduleNavigation(t,l,i,{replaceUrl:!0})},0)}))},Object.defineProperty(e.prototype,"url",{get:function(){return this.serializeUrl(this.currentUrlTree)},enumerable:!0,configurable:!0}),e.prototype.getCurrentNavigation=function(){return this.currentNavigation},e.prototype.triggerEvent=function(e){this.events.next(e)},e.prototype.resetConfig=function(e){eh(e),this.config=e.map(lh),this.navigated=!1,this.lastSuccessfulId=-1},e.prototype.ngOnDestroy=function(){this.dispose()},e.prototype.dispose=function(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)},e.prototype.createUrlTree=function(e,n){void 0===n&&(n={});var t=n.relativeTo,l=n.queryParams,i=n.fragment,o=n.preserveQueryParams,u=n.queryParamsHandling,s=n.preserveFragment;gn()&&o&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");var a=t||this.routerState.root,p=s?this.currentUrlTree.fragment:i,h=null;if(u)switch(u){case"merge":h=r({},this.currentUrlTree.queryParams,l);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=l||null}else h=o?this.currentUrlTree.queryParams:l||null;return null!==h&&(h=this.removeEmptyProps(h)),function(e,n,t,l,i){if(0===t.length)return Kh(n.root,n.root,n,l,i);var r=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new jh(!0,0,e);var n=0,t=!1,l=e.reduce(function(e,l,i){if("object"==typeof l&&null!=l){if(l.outlets){var r={};return uh(l.outlets,function(e,n){r[n]="string"==typeof e?e.split("/"):e}),c(e,[{outlets:r}])}if(l.segmentPath)return c(e,[l.segmentPath])}return"string"!=typeof l?c(e,[l]):0===i?(l.split("/").forEach(function(l,i){0==i&&"."===l||(0==i&&""===l?t=!0:".."===l?n++:""!=l&&e.push(l))}),e):c(e,[l])},[]);return new jh(t,n,l)}(t);if(r.toRoot())return Kh(n.root,new ph([],{}),n,l,i);var o=function(e,t,l){if(e.isAbsolute)return new $h(n.root,!0,0);if(-1===l.snapshot._lastPathIndex)return new $h(l.snapshot._urlSegment,!0,0);var i=Yh(e.commands[0])?0:1;return function(n,t,r){for(var o=l.snapshot._urlSegment,u=l.snapshot._lastPathIndex+i,s=e.numberOfDoubleDots;s>u;){if(s-=u,!(o=o.parent))throw new Error("Invalid number of '../'");u=o.segments.length}return new $h(o,!1,u-s)}()}(r,0,e),u=o.processChildren?Xh(o.segmentGroup,o.index,r.commands):qh(o.segmentGroup,o.index,r.commands);return Kh(o.segmentGroup,u,n,l,i)}(a,this.currentUrlTree,e,h,p)},e.prototype.navigateByUrl=function(e,n){void 0===n&&(n={skipLocationChange:!1}),gn()&&this.isNgZoneEnabled&&!vr.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");var t=rd(e)?e:this.parseUrl(e),l=this.urlHandlingStrategy.merge(t,this.rawUrlTree);return this.scheduleNavigation(l,"imperative",null,n)},e.prototype.navigate=function(e,n){return void 0===n&&(n={skipLocationChange:!1}),function(e){for(var n=0;n<e.length;n++){var t=e[n];if(null==t)throw new Error("The requested path contains "+t+" segment at index "+n)}}(e),this.navigateByUrl(this.createUrlTree(e,n),n)},e.prototype.serializeUrl=function(e){return this.urlSerializer.serialize(e)},e.prototype.parseUrl=function(e){var n;try{n=this.urlSerializer.parse(e)}catch(t){n=this.malformedUriErrorHandler(t,this.urlSerializer,e)}return n},e.prototype.isActive=function(e,n){if(rd(e))return ah(this.currentUrlTree,e,n);var t=this.parseUrl(e);return ah(this.currentUrlTree,t,n)},e.prototype.removeEmptyProps=function(e){return Object.keys(e).reduce(function(n,t){var l=e[t];return null!=l&&(n[t]=l),n},{})},e.prototype.processNavigations=function(){var e=this;this.navigations.subscribe(function(n){e.navigated=!0,e.lastSuccessfulId=n.id,e.events.next(new Pp(n.id,e.serializeUrl(n.extractedUrl),e.serializeUrl(e.currentUrlTree))),e.lastSuccessfulNavigation=e.currentNavigation,e.currentNavigation=null,n.resolve(!0)},function(n){e.console.warn("Unhandled Navigation Error: ")})},e.prototype.scheduleNavigation=function(e,n,t,l){var i=this.getTransition();if(i&&"imperative"!==n&&"imperative"===i.source&&i.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(i&&"hashchange"==n&&"popstate"===i.source&&i.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(i&&"popstate"==n&&"hashchange"===i.source&&i.rawUrl.toString()===e.toString())return Promise.resolve(!0);var r=null,o=null,u=new Promise(function(e,n){r=e,o=n}),s=++this.navigationId;return this.setTransition({id:s,source:n,restoredState:t,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:l,resolve:r,reject:o,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(function(e){return Promise.reject(e)})},e.prototype.setBrowserUrl=function(e,n,t,l){var i=this.urlSerializer.serialize(e);l=l||{},this.location.isCurrentPathEqualTo(i)||n?this.location.replaceState(i,"",r({},l,{navigationId:t})):this.location.go(i,"",r({},l,{navigationId:t}))},e.prototype.resetStateAndUrl=function(e,n,t){this.routerState=e,this.currentUrlTree=n,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t),this.resetUrlToCurrentUrlTree()},e.prototype.resetUrlToCurrentUrlTree=function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})},e}(),$d=function(){function e(e,n,t,l,i){this.router=e,this.route=n,this.commands=[],null==t&&l.setAttribute(i.nativeElement,"tabindex","0")}return Object.defineProperty(e.prototype,"routerLink",{set:function(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"preserveQueryParams",{set:function(e){gn()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated!, use queryParamsHandling instead."),this.preserve=e},enumerable:!0,configurable:!0}),e.prototype.onClick=function(){var e={skipLocationChange:qd(this.skipLocationChange),replaceUrl:qd(this.replaceUrl)};return this.router.navigateByUrl(this.urlTree,e),!0},Object.defineProperty(e.prototype,"urlTree",{get:function(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:qd(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:qd(this.preserveFragment)})},enumerable:!0,configurable:!0}),e}(),Qd=function(){function e(e,n,t){var l=this;this.router=e,this.route=n,this.locationStrategy=t,this.commands=[],this.subscription=e.events.subscribe(function(e){e instanceof Pp&&l.updateTargetUrlAndHref()})}return Object.defineProperty(e.prototype,"routerLink",{set:function(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"preserveQueryParams",{set:function(e){gn()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=e},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(e){this.updateTargetUrlAndHref()},e.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},e.prototype.onClick=function(e,n,t,l){if(0!==e||n||t||l)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;var i={skipLocationChange:qd(this.skipLocationChange),replaceUrl:qd(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,i),!1},e.prototype.updateTargetUrlAndHref=function(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))},Object.defineProperty(e.prototype,"urlTree",{get:function(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:qd(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:qd(this.preserveFragment)})},enumerable:!0,configurable:!0}),o([zi("attr.target"),Wi(),u("design:type",String)],e.prototype,"target",void 0),e}();function qd(e){return""===e||!!e}var Xd=function(){function e(e,n,t,l,i){var r=this;this.router=e,this.element=n,this.renderer=t,this.link=l,this.linkWithHref=i,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.subscription=e.events.subscribe(function(e){e instanceof Pp&&r.update()})}return e.prototype.ngAfterContentInit=function(){var e=this;this.links.changes.subscribe(function(n){return e.update()}),this.linksWithHrefs.changes.subscribe(function(n){return e.update()}),this.update()},Object.defineProperty(e.prototype,"routerLinkActive",{set:function(e){var n=Array.isArray(e)?e:e.split(" ");this.classes=n.filter(function(e){return!!e})},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(e){this.update()},e.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},e.prototype.update=function(){var e=this;this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(function(){var n=e.hasActiveLinks();e.isActive!==n&&(e.isActive=n,e.classes.forEach(function(t){n?e.renderer.addClass(e.element.nativeElement,t):e.renderer.removeClass(e.element.nativeElement,t)}))})},e.prototype.isLinkActive=function(e){var n=this;return function(t){return e.isActive(t.urlTree,n.routerLinkActiveOptions.exact)}},e.prototype.hasActiveLinks=function(){var e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.linkWithHref&&e(this.linkWithHref)||this.links.some(e)||this.linksWithHrefs.some(e)},e}(),Zd=function(){return function(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Jd,this.attachRef=null}}(),Jd=function(){function e(){this.contexts=new Map}return e.prototype.onChildOutletCreated=function(e,n){var t=this.getOrCreateContext(e);t.outlet=n,this.contexts.set(e,t)},e.prototype.onChildOutletDestroyed=function(e){var n=this.getContext(e);n&&(n.outlet=null)},e.prototype.onOutletDeactivated=function(){var e=this.contexts;return this.contexts=new Map,e},e.prototype.onOutletReAttached=function(e){this.contexts=e},e.prototype.getOrCreateContext=function(e){var n=this.getContext(e);return n||(n=new Zd,this.contexts.set(e,n)),n},e.prototype.getContext=function(e){return this.contexts.get(e)||null},e}(),eg=function(){function e(e,n,t,l,i){this.parentContexts=e,this.location=n,this.resolver=t,this.changeDetector=i,this.activated=null,this._activatedRoute=null,this.activateEvents=new Gi,this.deactivateEvents=new Gi,this.name=l||jp,e.onChildOutletCreated(this.name,this)}return e.prototype.ngOnDestroy=function(){this.parentContexts.onChildOutletDestroyed(this.name)},e.prototype.ngOnInit=function(){if(!this.activated){var e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}},Object.defineProperty(e.prototype,"isActivated",{get:function(){return!!this.activated},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"component",{get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activatedRoute",{get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activatedRouteData",{get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}},enumerable:!0,configurable:!0}),e.prototype.detach=function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var e=this.activated;return this.activated=null,this._activatedRoute=null,e},e.prototype.attach=function(e,n){this.activated=e,this._activatedRoute=n,this.location.insert(e.hostView)},e.prototype.deactivate=function(){if(this.activated){var e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}},e.prototype.activateWith=function(e,n){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;var t=(n=n||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),l=this.parentContexts.getOrCreateContext(this.name).children,i=new ng(e,l,this.location.injector);this.activated=this.location.createComponent(t,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)},e}(),ng=function(){function e(e,n,t){this.route=e,this.childContexts=n,this.parent=t}return e.prototype.get=function(e,n){return e===Fh?this.route:e===Jd?this.childContexts:this.parent.get(e,n)},e}(),tg=function(){return function(){}}(),lg=function(){function e(){}return e.prototype.preload=function(e,n){return n().pipe(Xa(function(){return Ta(null)}))},e}(),ig=function(){function e(){}return e.prototype.preload=function(e,n){return Ta(null)},e}(),rg=function(){function e(e,n,t,l,i){this.router=e,this.injector=l,this.preloadingStrategy=i,this.loader=new Bd(n,t,function(n){return e.triggerEvent(new Hp(n))},function(n){return e.triggerEvent(new Gp(n))})}return e.prototype.setUpPreloading=function(){var e=this;this.subscription=this.router.events.pipe(Da(function(e){return e instanceof Pp}),gc(function(){return e.preload()})).subscribe(function(){})},e.prototype.preload=function(){var e=this.injector.get(ct);return this.processRoutes(e,this.router.config)},e.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},e.prototype.processRoutes=function(e,n){var t,l,i=[];try{for(var r=s(n),o=r.next();!o.done;o=r.next()){var u=o.value;if(u.loadChildren&&!u.canLoad&&u._loadedConfig){var a=u._loadedConfig;i.push(this.processRoutes(a.module,a.routes))}else u.loadChildren&&!u.canLoad?i.push(this.preloadConfig(e,u)):u.children&&i.push(this.processRoutes(e,u.children))}}catch(c){t={error:c}}finally{try{o&&!o.done&&(l=r.return)&&l.call(r)}finally{if(t)throw t.error}}return X(i).pipe(te(),j(function(e){}))},e.prototype.preloadConfig=function(e,n){var t=this;return this.preloadingStrategy.preload(n,function(){return t.loader.load(e.injector,n).pipe(Z(function(e){return n._loadedConfig=e,t.processRoutes(e.module,e.routes)}))})},e}(),og=function(){function e(e,n,t){void 0===t&&(t={}),this.router=e,this.viewportScroller=n,this.options=t,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},t.scrollPositionRestoration=t.scrollPositionRestoration||"disabled",t.anchorScrolling=t.anchorScrolling||"disabled"}return e.prototype.init=function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()},e.prototype.createScrollEvents=function(){var e=this;return this.router.events.subscribe(function(n){n instanceof wp?(e.store[e.lastId]=e.viewportScroller.getScrollPosition(),e.lastSource=n.navigationTrigger,e.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Pp&&(e.lastId=n.id,e.scheduleScrollEvent(n,e.router.parseUrl(n.urlAfterRedirects).fragment))})},e.prototype.consumeScrollEvents=function(){var e=this;return this.router.events.subscribe(function(n){n instanceof Yp&&(n.position?"top"===e.options.scrollPositionRestoration?e.viewportScroller.scrollToPosition([0,0]):"enabled"===e.options.scrollPositionRestoration&&e.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===e.options.anchorScrolling?e.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==e.options.scrollPositionRestoration&&e.viewportScroller.scrollToPosition([0,0]))})},e.prototype.scheduleScrollEvent=function(e,n){this.router.triggerEvent(new Yp(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,n))},e.prototype.ngOnDestroy=function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()},e}(),ug=new Le("ROUTER_CONFIGURATION"),sg=new Le("ROUTER_FORROOT_GUARD"),ag=[Fs,{provide:fh,useClass:mh},{provide:jd,useFactory:mg,deps:[Mr,fh,Jd,Fs,Xe,Lr,sr,Gd,ug,[Vd,new Se],[Ud,new Se]]},Jd,{provide:Fh,useFactory:vg,deps:[jd]},{provide:Lr,useClass:Hr},rg,ig,lg,{provide:ug,useValue:{enableTracing:!1}}];function cg(){return new _r("Router",jd)}var pg=function(){function e(e,n){}var n;return n=e,e.forRoot=function(e,t){return{ngModule:n,providers:[ag,fg(e),{provide:sg,useFactory:gg,deps:[[jd,new Se,new ye]]},{provide:ug,useValue:t||{}},{provide:Ds,useFactory:dg,deps:[ks,[new ve(Ls),new Se],ug]},{provide:og,useFactory:hg,deps:[jd,ba,ug]},{provide:tg,useExisting:t&&t.preloadingStrategy?t.preloadingStrategy:ig},{provide:_r,multi:!0,useFactory:cg},[Sg,{provide:Yi,multi:!0,useFactory:Eg,deps:[Sg]},{provide:Rg,useFactory:yg,deps:[Sg]},{provide:Zi,multi:!0,useExisting:Rg}]]}},e.forChild=function(e){return{ngModule:n,providers:[fg(e)]}},e}();function hg(e,n,t){return t.scrollOffset&&n.setOffset(t.scrollOffset),new og(e,n,t)}function dg(e,n,t){return void 0===t&&(t={}),t.useHash?new Hs(e,n):new Gs(e,n)}function gg(e){if(e)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function fg(e){return[{provide:an,multi:!0,useValue:e},{provide:Gd,multi:!0,useValue:e}]}function mg(e,n,t,l,i,r,o,u,s,a,c){void 0===s&&(s={});var p=new jd(null,n,t,l,i,r,o,rh(u));if(a&&(p.urlHandlingStrategy=a),c&&(p.routeReuseStrategy=c),s.errorHandler&&(p.errorHandler=s.errorHandler),s.malformedUriErrorHandler&&(p.malformedUriErrorHandler=s.malformedUriErrorHandler),s.enableTracing){var h=Rc();p.events.subscribe(function(e){h.logGroup("Router Event: "+e.constructor.name),h.log(e.toString()),h.log(e),h.logGroupEnd()})}return s.onSameUrlNavigation&&(p.onSameUrlNavigation=s.onSameUrlNavigation),s.paramsInheritanceStrategy&&(p.paramsInheritanceStrategy=s.paramsInheritanceStrategy),s.urlUpdateStrategy&&(p.urlUpdateStrategy=s.urlUpdateStrategy),s.relativeLinkResolution&&(p.relativeLinkResolution=s.relativeLinkResolution),p}function vg(e){return e.routerState.root}var Sg=function(){function e(e){this.injector=e,this.initNavigation=!1,this.resultOfPreactivationDone=new D}return e.prototype.appInitializer=function(){var e=this;return this.injector.get(Ms,Promise.resolve(null)).then(function(){var n=null,t=new Promise(function(e){return n=e}),l=e.injector.get(jd),i=e.injector.get(ug);if(e.isLegacyDisabled(i)||e.isLegacyEnabled(i))n(!0);else if("disabled"===i.initialNavigation)l.setUpLocationChangeListener(),n(!0);else{if("enabled"!==i.initialNavigation)throw new Error("Invalid initialNavigation options: '"+i.initialNavigation+"'");l.hooks.afterPreactivation=function(){return e.initNavigation?Ta(null):(e.initNavigation=!0,n(!0),e.resultOfPreactivationDone)},l.initialNavigation()}return t})},e.prototype.bootstrapListener=function(e){var n=this.injector.get(ug),t=this.injector.get(rg),l=this.injector.get(og),i=this.injector.get(jd),r=this.injector.get(Mr);e===r.components[0]&&(this.isLegacyEnabled(n)?i.initialNavigation():this.isLegacyDisabled(n)&&i.setUpLocationChangeListener(),t.setUpPreloading(),l.init(),i.resetRootComponentType(r.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())},e.prototype.isLegacyEnabled=function(e){return"legacy_enabled"===e.initialNavigation||!0===e.initialNavigation||void 0===e.initialNavigation},e.prototype.isLegacyDisabled=function(e){return"legacy_disabled"===e.initialNavigation||!1===e.initialNavigation},e}();function Eg(e){return e.appInitializer.bind(e)}function yg(e){return e.bootstrapListener.bind(e)}var Rg=new Le("Router Initializer"),bg=rl({encapsulation:2,styles:[],data:{}});function Og(e){return So(0,[(e()(),eo(0,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),vi(1,212992,null,0,eg,[Jd,Gt,ut,[8,null],kt],null,null)],function(e,n){e(n,1,0)},null)}function Tg(e){return So(0,[(e()(),eo(0,0,null,null,1,"ng-component",[],null,null,null,Og,bg)),vi(1,49152,null,0,Kp,[],null,null)],null,null)}var Cg=jl("ng-component",Kp,Tg,{},{},[]),Ig=function(){function e(e){this.router=e}return e.prototype.ngOnInit=function(){},e.prototype.goToVillage=function(){this.router.navigate(["/village"])},e}(),Ag=rl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{margin:10px;font-size:4vw;text-align:center}button[_ngcontent-%COMP%]{font-size:1.5vw}"]],data:{}});function Ng(e){return So(0,[(e()(),eo(0,0,null,null,4,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),fo(-1,null,[" Page not found "])),(e()(),eo(2,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(3,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.goToVillage()&&l),l},null,null)),(e()(),fo(-1,null,["Village"]))],null,null)}function _g(e){return So(0,[(e()(),eo(0,0,null,null,1,"app-not-found",[],null,null,null,Ng,Ag)),vi(1,114688,null,0,Ig,[jd],null,null)],function(e,n){e(n,1,0)},null)}var wg=jl("app-not-found",Ig,_g,{},{},[]),Pg=function(){function e(){this.xMargin=20,this.yMargin=20}return e.prototype.onmousemove=function(e){var n=document.getElementById(this.elementId);if(n){var t=e.clientX+this.xMargin,l=e.clientY+this.yMargin;l+n.offsetHeight>740&&(l-=n.offsetHeight+2*this.yMargin),n.style.top=l+"px",n.style.left=t+"px"}},e}(),xg=function(){function e(){this.margin="0"}return e.prototype.ngOnInit=function(){},e.prototype.getTitle=function(){return""===this.title?"":this.title?this.title:"Food"===this.name?"Food nutrition":Vu.titleCase(this.name).replace("_"," ")},e.prototype.getPath=function(){var e="assets/";return this.path&&(e+=this.path+"/"),e},e}(),kg=rl({encapsulation:0,styles:[["[_nghost-%COMP%]{display:inline-block;vertical-align:middle;height:24px}#wrapper[_ngcontent-%COMP%]{display:inline-block;height:24px;margin:0;padding:0}img[_ngcontent-%COMP%]{display:inline-block;margin:0;padding:0;height:24px;width:24px}"]],data:{}});function Mg(e){return So(0,[(e()(),eo(0,0,null,null,4,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,3,"img",[["class","resourceIcon"],["draggable","false"],["ondragstart","return false;"],["onerror","if (this.src !== 'assets/question_mark.svg') this.src = 'assets/question_mark.svg';"]],[[8,"src",4],[8,"title",0],[8,"alt",0]],null,null,null,null)),Ei(512,null,aa,ca,[dt,xt,St]),vi(3,278528,null,0,pa,[aa],{ngStyle:[0,"ngStyle"]},null),ho(4,{margin:0})],function(e,n){var t=e(n,4,0,n.component.margin);e(n,3,0,t)},function(e,n){var t=n.component;e(n,1,0,xl(1,"",t.getPath()+t.name.replace(" ","_").toLowerCase(),".svg"),xl(1,"",t.getTitle(),""),xl(1,"",t.name,""))})}function Dg(e,n){return new _(function(t){var l=e.length;if(0!==l)for(var i=new Array(l),r=0,o=0,u=function(u){var s=X(e[u]),a=!1;t.add(s.subscribe({next:function(e){a||(a=!0,o++),i[u]=e},error:function(e){return t.error(e)},complete:function(){++r!==l&&a||(o===l&&t.next(n?n.reduce(function(e,n,t){return e[n]=i[t],e},{}):i),t.complete())}}))},s=0;s<l;s++)u(s);else t.complete()})}var Lg=new Le("NgValueAccessor"),Fg=function(){function e(e,n){this._renderer=e,this._elementRef=n,this.onChange=function(e){},this.onTouched=function(){}}return e.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e}(),Ug=new Le("CompositionEventMode"),Hg=function(){function e(e,n,t){var l;this._renderer=e,this._elementRef=n,this._compositionMode=t,this.onChange=function(e){},this.onTouched=function(){},this._composing=!1,null==this._compositionMode&&(this._compositionMode=(l=Rc()?Rc().getUserAgent():"",!/android (\d+)/.test(l.toLowerCase())))}return e.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e.prototype._handleInput=function(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)},e.prototype._compositionStart=function(){this._composing=!0},e.prototype._compositionEnd=function(e){this._composing=!1,this._compositionMode&&this.onChange(e)},e}(),Gg=function(){function e(){}return Object.defineProperty(e.prototype,"value",{get:function(){return this.control?this.control.value:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valid",{get:function(){return this.control?this.control.valid:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"invalid",{get:function(){return this.control?this.control.invalid:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pending",{get:function(){return this.control?this.control.pending:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this.control?this.control.disabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this.control?this.control.enabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errors",{get:function(){return this.control?this.control.errors:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pristine",{get:function(){return this.control?this.control.pristine:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dirty",{get:function(){return this.control?this.control.dirty:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"touched",{get:function(){return this.control?this.control.touched:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){return this.control?this.control.status:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"untouched",{get:function(){return this.control?this.control.untouched:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"statusChanges",{get:function(){return this.control?this.control.statusChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueChanges",{get:function(){return this.control?this.control.valueChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),e.prototype.reset=function(e){void 0===e&&(e=void 0),this.control&&this.control.reset(e)},e.prototype.hasError=function(e,n){return!!this.control&&this.control.hasError(e,n)},e.prototype.getError=function(e,n){return this.control?this.control.getError(e,n):null},e}(),Bg=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return i(n,e),Object.defineProperty(n.prototype,"formDirective",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),n}(Gg);function Vg(){throw new Error("unimplemented")}var Wg=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n._parent=null,n.name=null,n.valueAccessor=null,n._rawValidators=[],n._rawAsyncValidators=[],n}return i(n,e),Object.defineProperty(n.prototype,"validator",{get:function(){return Vg()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"asyncValidator",{get:function(){return Vg()},enumerable:!0,configurable:!0}),n}(Gg),zg=function(e){function n(n){return e.call(this,n)||this}return i(n,e),n}(function(){function e(e){this._cd=e}return Object.defineProperty(e.prototype,"ngClassUntouched",{get:function(){return!!this._cd.control&&this._cd.control.untouched},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassTouched",{get:function(){return!!this._cd.control&&this._cd.control.touched},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassPristine",{get:function(){return!!this._cd.control&&this._cd.control.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassDirty",{get:function(){return!!this._cd.control&&this._cd.control.dirty},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassValid",{get:function(){return!!this._cd.control&&this._cd.control.valid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassInvalid",{get:function(){return!!this._cd.control&&this._cd.control.invalid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassPending",{get:function(){return!!this._cd.control&&this._cd.control.pending},enumerable:!0,configurable:!0}),e}());function Yg(e){return null==e||0===e.length}var Kg=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,jg=function(){function e(){}return e.min=function(e){return function(n){if(Yg(n.value)||Yg(e))return null;var t=parseFloat(n.value);return!isNaN(t)&&t<e?{min:{min:e,actual:n.value}}:null}},e.max=function(e){return function(n){if(Yg(n.value)||Yg(e))return null;var t=parseFloat(n.value);return!isNaN(t)&&t>e?{max:{max:e,actual:n.value}}:null}},e.required=function(e){return Yg(e.value)?{required:!0}:null},e.requiredTrue=function(e){return!0===e.value?null:{required:!0}},e.email=function(e){return Yg(e.value)?null:Kg.test(e.value)?null:{email:!0}},e.minLength=function(e){return function(n){if(Yg(n.value))return null;var t=n.value?n.value.length:0;return t<e?{minlength:{requiredLength:e,actualLength:t}}:null}},e.maxLength=function(e){return function(n){var t=n.value?n.value.length:0;return t>e?{maxlength:{requiredLength:e,actualLength:t}}:null}},e.pattern=function(n){return n?("string"==typeof n?(l="","^"!==n.charAt(0)&&(l+="^"),l+=n,"$"!==n.charAt(n.length-1)&&(l+="$"),t=new RegExp(l)):(l=n.toString(),t=n),function(e){if(Yg(e.value))return null;var n=e.value;return t.test(n)?null:{pattern:{requiredPattern:l,actualValue:n}}}):e.nullValidator;var t,l},e.nullValidator=function(e){return null},e.compose=function(e){if(!e)return null;var n=e.filter($g);return 0==n.length?null:function(e){return qg(function(e,t){return n.map(function(n){return n(e)})}(e))}},e.composeAsync=function(e){if(!e)return null;var n=e.filter($g);return 0==n.length?null:function(e){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(1===e.length){var t=e[0];if(p(t))return Dg(t,null);if(h(t)&&Object.getPrototypeOf(t)===Object.prototype){var l=Object.keys(t);return Dg(l.map(function(e){return t[e]}),l)}}if("function"==typeof e[e.length-1]){var i=e.pop();return Dg(e=1===e.length&&p(e[0])?e[0]:e,null).pipe(j(function(e){return i.apply(void 0,e)}))}return Dg(e,null)}(function(e,t){return n.map(function(n){return n(e)})}(e).map(Qg)).pipe(j(qg))}},e}();function $g(e){return null!=e}function Qg(e){var n=Jn(e)?X(e):e;if(!et(n))throw new Error("Expected validator to return Promise or Observable.");return n}function qg(e){var n=e.reduce(function(e,n){return null!=n?r({},e,n):e},{});return 0===Object.keys(n).length?null:n}function Xg(e){return e.validate?function(n){return e.validate(n)}:e}function Zg(e){return e.validate?function(n){return e.validate(n)}:e}var Jg=function(){function e(e,n){this._renderer=e,this._elementRef=n,this.onChange=function(e){},this.onTouched=function(){}}return e.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)},e.prototype.registerOnChange=function(e){this.onChange=function(n){e(""==n?null:parseFloat(n))}},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e}(),ef=function(){function e(){this._accessors=[]}return e.prototype.add=function(e,n){this._accessors.push([e,n])},e.prototype.remove=function(e){for(var n=this._accessors.length-1;n>=0;--n)if(this._accessors[n][1]===e)return void this._accessors.splice(n,1)},e.prototype.select=function(e){var n=this;this._accessors.forEach(function(t){n._isSameGroup(t,e)&&t[1]!==e&&t[1].fireUncheck(e.value)})},e.prototype._isSameGroup=function(e,n){return!!e[0].control&&e[0]._parent===n._control._parent&&e[1].name===n.name},e}(),nf=function(){function e(e,n,t,l){this._renderer=e,this._elementRef=n,this._registry=t,this._injector=l,this.onChange=function(){},this.onTouched=function(){}}return e.prototype.ngOnInit=function(){this._control=this._injector.get(Wg),this._checkName(),this._registry.add(this._control,this)},e.prototype.ngOnDestroy=function(){this._registry.remove(this)},e.prototype.writeValue=function(e){this._state=e===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)},e.prototype.registerOnChange=function(e){var n=this;this._fn=e,this.onChange=function(){e(n.value),n._registry.select(n)}},e.prototype.fireUncheck=function(e){this.writeValue(e)},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e.prototype._checkName=function(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)},e.prototype._throwNameError=function(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')},e}(),tf=function(){function e(e,n){this._renderer=e,this._elementRef=n,this.onChange=function(e){},this.onTouched=function(){}}return e.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(e))},e.prototype.registerOnChange=function(e){this.onChange=function(n){e(""==n?null:parseFloat(n))}},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e}(),lf='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',rf='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>';function of(e,n){return null==e?""+n:(n&&"object"==typeof n&&(n="Object"),(e+": "+n).slice(0,50))}var uf=function(){function e(e,n){this._renderer=e,this._elementRef=n,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=$n}return Object.defineProperty(e.prototype,"compareWith",{set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e},enumerable:!0,configurable:!0}),e.prototype.writeValue=function(e){this.value=e;var n=this._getOptionId(e);null==n&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);var t=of(n,e);this._renderer.setProperty(this._elementRef.nativeElement,"value",t)},e.prototype.registerOnChange=function(e){var n=this;this.onChange=function(t){n.value=n._getOptionValue(t),e(n.value)}},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e.prototype._registerOption=function(){return(this._idCounter++).toString()},e.prototype._getOptionId=function(e){var n,t;try{for(var l=s(Array.from(this._optionMap.keys())),i=l.next();!i.done;i=l.next()){var r=i.value;if(this._compareWith(this._optionMap.get(r),e))return r}}catch(o){n={error:o}}finally{try{i&&!i.done&&(t=l.return)&&t.call(l)}finally{if(n)throw n.error}}return null},e.prototype._getOptionValue=function(e){var n=function(e){return e.split(":")[0]}(e);return this._optionMap.has(n)?this._optionMap.get(n):e},e}(),sf=function(){function e(e,n,t){this._element=e,this._renderer=n,this._select=t,this._select&&(this.id=this._select._registerOption())}return Object.defineProperty(e.prototype,"ngValue",{set:function(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(of(this.id,e)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{set:function(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)},enumerable:!0,configurable:!0}),e.prototype._setElementValue=function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)},e.prototype.ngOnDestroy=function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},e}();function af(e,n){return null==e?""+n:("string"==typeof n&&(n="'"+n+"'"),n&&"object"==typeof n&&(n="Object"),(e+": "+n).slice(0,50))}var cf=function(){function e(e,n){this._renderer=e,this._elementRef=n,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=$n}return Object.defineProperty(e.prototype,"compareWith",{set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e},enumerable:!0,configurable:!0}),e.prototype.writeValue=function(e){var n,t=this;if(this.value=e,Array.isArray(e)){var l=e.map(function(e){return t._getOptionId(e)});n=function(e,n){e._setSelected(l.indexOf(n.toString())>-1)}}else n=function(e,n){e._setSelected(!1)};this._optionMap.forEach(n)},e.prototype.registerOnChange=function(e){var n=this;this.onChange=function(t){var l=[];if(t.hasOwnProperty("selectedOptions"))for(var i=t.selectedOptions,r=0;r<i.length;r++){var o=i.item(r),u=n._getOptionValue(o.value);l.push(u)}else for(i=t.options,r=0;r<i.length;r++)(o=i.item(r)).selected&&(u=n._getOptionValue(o.value),l.push(u));n.value=l,e(l)}},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e.prototype._registerOption=function(e){var n=(this._idCounter++).toString();return this._optionMap.set(n,e),n},e.prototype._getOptionId=function(e){var n,t;try{for(var l=s(Array.from(this._optionMap.keys())),i=l.next();!i.done;i=l.next()){var r=i.value;if(this._compareWith(this._optionMap.get(r)._value,e))return r}}catch(o){n={error:o}}finally{try{i&&!i.done&&(t=l.return)&&t.call(l)}finally{if(n)throw n.error}}return null},e.prototype._getOptionValue=function(e){var n=function(e){return e.split(":")[0]}(e);return this._optionMap.has(n)?this._optionMap.get(n)._value:e},e}(),pf=function(){function e(e,n,t){this._element=e,this._renderer=n,this._select=t,this._select&&(this.id=this._select._registerOption(this))}return Object.defineProperty(e.prototype,"ngValue",{set:function(e){null!=this._select&&(this._value=e,this._setElementValue(af(this.id,e)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{set:function(e){this._select?(this._value=e,this._setElementValue(af(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)},enumerable:!0,configurable:!0}),e.prototype._setElementValue=function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)},e.prototype._setSelected=function(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)},e.prototype.ngOnDestroy=function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},e}();function hf(e,n){return c(n.path,[e])}function df(e,n){e||ff(n,"Cannot find control with"),n.valueAccessor||ff(n,"No value accessor for form control with"),e.validator=jg.compose([e.validator,n.validator]),e.asyncValidator=jg.composeAsync([e.asyncValidator,n.asyncValidator]),n.valueAccessor.writeValue(e.value),function(e,n){n.valueAccessor.registerOnChange(function(t){e._pendingValue=t,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&gf(e,n)})}(e,n),function(e,n){e.registerOnChange(function(e,t){n.valueAccessor.writeValue(e),t&&n.viewToModelUpdate(e)})}(e,n),function(e,n){n.valueAccessor.registerOnTouched(function(){e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&gf(e,n),"submit"!==e.updateOn&&e.markAsTouched()})}(e,n),n.valueAccessor.setDisabledState&&e.registerOnDisabledChange(function(e){n.valueAccessor.setDisabledState(e)}),n._rawValidators.forEach(function(n){n.registerOnValidatorChange&&n.registerOnValidatorChange(function(){return e.updateValueAndValidity()})}),n._rawAsyncValidators.forEach(function(n){n.registerOnValidatorChange&&n.registerOnValidatorChange(function(){return e.updateValueAndValidity()})})}function gf(e,n){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function ff(e,n){var t;throw t=e.path.length>1?"path: '"+e.path.join(" -> ")+"'":e.path[0]?"name: '"+e.path+"'":"unspecified name attribute",new Error(n+" "+t)}function mf(e){return null!=e?jg.compose(e.map(Xg)):null}function vf(e){return null!=e?jg.composeAsync(e.map(Zg)):null}var Sf=[Fg,tf,Jg,uf,cf,nf];function Ef(e){var n=Rf(e)?e.validators:e;return Array.isArray(n)?mf(n):n||null}function yf(e,n){var t=Rf(n)?n.asyncValidators:e;return Array.isArray(t)?vf(t):t||null}function Rf(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}var bf=function(){function e(e,n){this.validator=e,this.asyncValidator=n,this._onCollectionChange=function(){},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}return Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valid",{get:function(){return"VALID"===this.status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"invalid",{get:function(){return"INVALID"===this.status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pending",{get:function(){return"PENDING"==this.status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return"DISABLED"===this.status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return"DISABLED"!==this.status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dirty",{get:function(){return!this.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"untouched",{get:function(){return!this.touched},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"updateOn",{get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"},enumerable:!0,configurable:!0}),e.prototype.setValidators=function(e){this.validator=Ef(e)},e.prototype.setAsyncValidators=function(e){this.asyncValidator=yf(e)},e.prototype.clearValidators=function(){this.validator=null},e.prototype.clearAsyncValidators=function(){this.asyncValidator=null},e.prototype.markAsTouched=function(e){void 0===e&&(e={}),this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)},e.prototype.markAllAsTouched=function(){this.markAsTouched({onlySelf:!0}),this._forEachChild(function(e){return e.markAllAsTouched()})},e.prototype.markAsUntouched=function(e){void 0===e&&(e={}),this.touched=!1,this._pendingTouched=!1,this._forEachChild(function(e){e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)},e.prototype.markAsDirty=function(e){void 0===e&&(e={}),this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)},e.prototype.markAsPristine=function(e){void 0===e&&(e={}),this.pristine=!0,this._pendingDirty=!1,this._forEachChild(function(e){e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)},e.prototype.markAsPending=function(e){void 0===e&&(e={}),this.status="PENDING",!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)},e.prototype.disable=function(e){void 0===e&&(e={});var n=this._parentMarkedDirty(e.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild(function(n){n.disable(r({},e,{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(r({},e,{skipPristineCheck:n})),this._onDisabledChange.forEach(function(e){return e(!0)})},e.prototype.enable=function(e){void 0===e&&(e={});var n=this._parentMarkedDirty(e.onlySelf);this.status="VALID",this._forEachChild(function(n){n.enable(r({},e,{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(r({},e,{skipPristineCheck:n})),this._onDisabledChange.forEach(function(e){return e(!1)})},e.prototype._updateAncestors=function(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())},e.prototype.setParent=function(e){this._parent=e},e.prototype.updateValueAndValidity=function(e){void 0===e&&(e={}),this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)},e.prototype._updateTreeValidity=function(e){void 0===e&&(e={emitEvent:!0}),this._forEachChild(function(n){return n._updateTreeValidity(e)}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})},e.prototype._setInitialStatus=function(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"},e.prototype._runValidator=function(){return this.validator?this.validator(this):null},e.prototype._runAsyncValidator=function(e){var n=this;if(this.asyncValidator){this.status="PENDING";var t=Qg(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(function(t){return n.setErrors(t,{emitEvent:e})})}},e.prototype._cancelExistingSubscription=function(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()},e.prototype.setErrors=function(e,n){void 0===n&&(n={}),this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)},e.prototype.get=function(e){return function(e,n,t){return null==n?null:(n instanceof Array||(n=n.split(".")),n instanceof Array&&0===n.length?null:n.reduce(function(e,n){return e instanceof Tf?e.controls.hasOwnProperty(n)?e.controls[n]:null:e instanceof Cf&&e.at(n)||null},e))}(this,e)},e.prototype.getError=function(e,n){var t=n?this.get(n):this;return t&&t.errors?t.errors[e]:null},e.prototype.hasError=function(e,n){return!!this.getError(e,n)},Object.defineProperty(e.prototype,"root",{get:function(){for(var e=this;e._parent;)e=e._parent;return e},enumerable:!0,configurable:!0}),e.prototype._updateControlsErrors=function(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)},e.prototype._initObservables=function(){this.valueChanges=new Gi,this.statusChanges=new Gi},e.prototype._calculateStatus=function(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"},e.prototype._anyControlsHaveStatus=function(e){return this._anyControls(function(n){return n.status===e})},e.prototype._anyControlsDirty=function(){return this._anyControls(function(e){return e.dirty})},e.prototype._anyControlsTouched=function(){return this._anyControls(function(e){return e.touched})},e.prototype._updatePristine=function(e){void 0===e&&(e={}),this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)},e.prototype._updateTouched=function(e){void 0===e&&(e={}),this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)},e.prototype._isBoxedValue=function(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e},e.prototype._registerOnCollectionChange=function(e){this._onCollectionChange=e},e.prototype._setUpdateStrategy=function(e){Rf(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)},e.prototype._parentMarkedDirty=function(e){return!e&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()},e}(),Of=function(e){function n(n,t,l){void 0===n&&(n=null);var i=e.call(this,Ef(t),yf(l,t))||this;return i._onChange=[],i._applyFormState(n),i._setUpdateStrategy(t),i.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),i._initObservables(),i}return i(n,e),n.prototype.setValue=function(e,n){var t=this;void 0===n&&(n={}),this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(function(e){return e(t.value,!1!==n.emitViewToModelChange)}),this.updateValueAndValidity(n)},n.prototype.patchValue=function(e,n){void 0===n&&(n={}),this.setValue(e,n)},n.prototype.reset=function(e,n){void 0===e&&(e=null),void 0===n&&(n={}),this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1},n.prototype._updateValue=function(){},n.prototype._anyControls=function(e){return!1},n.prototype._allControlsDisabled=function(){return this.disabled},n.prototype.registerOnChange=function(e){this._onChange.push(e)},n.prototype._clearChangeFns=function(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=function(){}},n.prototype.registerOnDisabledChange=function(e){this._onDisabledChange.push(e)},n.prototype._forEachChild=function(e){},n.prototype._syncPendingControls=function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))},n.prototype._applyFormState=function(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e},n}(bf),Tf=function(e){function n(n,t,l){var i=e.call(this,Ef(t),yf(l,t))||this;return i.controls=n,i._initObservables(),i._setUpdateStrategy(t),i._setUpControls(),i.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),i}return i(n,e),n.prototype.registerControl=function(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)},n.prototype.addControl=function(e,n){this.registerControl(e,n),this.updateValueAndValidity(),this._onCollectionChange()},n.prototype.removeControl=function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()},n.prototype.setControl=function(e,n){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity(),this._onCollectionChange()},n.prototype.contains=function(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled},n.prototype.setValue=function(e,n){var t=this;void 0===n&&(n={}),this._checkAllValuesPresent(e),Object.keys(e).forEach(function(l){t._throwIfControlMissing(l),t.controls[l].setValue(e[l],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},n.prototype.patchValue=function(e,n){var t=this;void 0===n&&(n={}),Object.keys(e).forEach(function(l){t.controls[l]&&t.controls[l].patchValue(e[l],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},n.prototype.reset=function(e,n){void 0===e&&(e={}),void 0===n&&(n={}),this._forEachChild(function(t,l){t.reset(e[l],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)},n.prototype.getRawValue=function(){return this._reduceChildren({},function(e,n,t){return e[t]=n instanceof Of?n.value:n.getRawValue(),e})},n.prototype._syncPendingControls=function(){var e=this._reduceChildren(!1,function(e,n){return!!n._syncPendingControls()||e});return e&&this.updateValueAndValidity({onlySelf:!0}),e},n.prototype._throwIfControlMissing=function(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error("Cannot find form control with name: "+e+".")},n.prototype._forEachChild=function(e){var n=this;Object.keys(this.controls).forEach(function(t){return e(n.controls[t],t)})},n.prototype._setUpControls=function(){var e=this;this._forEachChild(function(n){n.setParent(e),n._registerOnCollectionChange(e._onCollectionChange)})},n.prototype._updateValue=function(){this.value=this._reduceValue()},n.prototype._anyControls=function(e){var n=this,t=!1;return this._forEachChild(function(l,i){t=t||n.contains(i)&&e(l)}),t},n.prototype._reduceValue=function(){var e=this;return this._reduceChildren({},function(n,t,l){return(t.enabled||e.disabled)&&(n[l]=t.value),n})},n.prototype._reduceChildren=function(e,n){var t=e;return this._forEachChild(function(e,l){t=n(t,e,l)}),t},n.prototype._allControlsDisabled=function(){var e,n;try{for(var t=s(Object.keys(this.controls)),l=t.next();!l.done;l=t.next())if(this.controls[l.value].enabled)return!1}catch(i){e={error:i}}finally{try{l&&!l.done&&(n=t.return)&&n.call(t)}finally{if(e)throw e.error}}return Object.keys(this.controls).length>0||this.disabled},n.prototype._checkAllValuesPresent=function(e){this._forEachChild(function(n,t){if(void 0===e[t])throw new Error("Must supply a value for form control with name: '"+t+"'.")})},n}(bf),Cf=function(e){function n(n,t,l){var i=e.call(this,Ef(t),yf(l,t))||this;return i.controls=n,i._initObservables(),i._setUpdateStrategy(t),i._setUpControls(),i.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),i}return i(n,e),n.prototype.at=function(e){return this.controls[e]},n.prototype.push=function(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()},n.prototype.insert=function(e,n){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity()},n.prototype.removeAt=function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),this.updateValueAndValidity()},n.prototype.setControl=function(e,n){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),n&&(this.controls.splice(e,0,n),this._registerControl(n)),this.updateValueAndValidity(),this._onCollectionChange()},Object.defineProperty(n.prototype,"length",{get:function(){return this.controls.length},enumerable:!0,configurable:!0}),n.prototype.setValue=function(e,n){var t=this;void 0===n&&(n={}),this._checkAllValuesPresent(e),e.forEach(function(e,l){t._throwIfControlMissing(l),t.at(l).setValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},n.prototype.patchValue=function(e,n){var t=this;void 0===n&&(n={}),e.forEach(function(e,l){t.at(l)&&t.at(l).patchValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},n.prototype.reset=function(e,n){void 0===e&&(e=[]),void 0===n&&(n={}),this._forEachChild(function(t,l){t.reset(e[l],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)},n.prototype.getRawValue=function(){return this.controls.map(function(e){return e instanceof Of?e.value:e.getRawValue()})},n.prototype.clear=function(){this.controls.length<1||(this._forEachChild(function(e){return e._registerOnCollectionChange(function(){})}),this.controls.splice(0),this.updateValueAndValidity())},n.prototype._syncPendingControls=function(){var e=this.controls.reduce(function(e,n){return!!n._syncPendingControls()||e},!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e},n.prototype._throwIfControlMissing=function(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error("Cannot find form control at index "+e)},n.prototype._forEachChild=function(e){this.controls.forEach(function(n,t){e(n,t)})},n.prototype._updateValue=function(){var e=this;this.value=this.controls.filter(function(n){return n.enabled||e.disabled}).map(function(e){return e.value})},n.prototype._anyControls=function(e){return this.controls.some(function(n){return n.enabled&&e(n)})},n.prototype._setUpControls=function(){var e=this;this._forEachChild(function(n){return e._registerControl(n)})},n.prototype._checkAllValuesPresent=function(e){this._forEachChild(function(n,t){if(void 0===e[t])throw new Error("Must supply a value for form control at index: "+t+".")})},n.prototype._allControlsDisabled=function(){var e,n;try{for(var t=s(this.controls),l=t.next();!l.done;l=t.next())if(l.value.enabled)return!1}catch(i){e={error:i}}finally{try{l&&!l.done&&(n=t.return)&&n.call(t)}finally{if(e)throw e.error}}return this.controls.length>0||this.disabled},n.prototype._registerControl=function(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)},n}(bf),If=function(){return Promise.resolve(null)}(),Af=function(e){function n(n,t){var l=e.call(this)||this;return l.submitted=!1,l._directives=[],l.ngSubmit=new Gi,l.form=new Tf({},mf(n),vf(t)),l}return i(n,e),n.prototype.ngAfterViewInit=function(){this._setUpdateStrategy()},Object.defineProperty(n.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"controls",{get:function(){return this.form.controls},enumerable:!0,configurable:!0}),n.prototype.addControl=function(e){var n=this;If.then(function(){var t=n._findContainer(e.path);e.control=t.registerControl(e.name,e.control),df(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),n._directives.push(e)})},n.prototype.getControl=function(e){return this.form.get(e.path)},n.prototype.removeControl=function(e){var n=this;If.then(function(){var t,l,i=n._findContainer(e.path);i&&i.removeControl(e.name),(l=(t=n._directives).indexOf(e))>-1&&t.splice(l,1)})},n.prototype.addFormGroup=function(e){var n=this;If.then(function(){var t=n._findContainer(e.path),l=new Tf({});(function(e,n){null==e&&ff(n,"Cannot find control with"),e.validator=jg.compose([e.validator,n.validator]),e.asyncValidator=jg.composeAsync([e.asyncValidator,n.asyncValidator])})(l,e),t.registerControl(e.name,l),l.updateValueAndValidity({emitEvent:!1})})},n.prototype.removeFormGroup=function(e){var n=this;If.then(function(){var t=n._findContainer(e.path);t&&t.removeControl(e.name)})},n.prototype.getFormGroup=function(e){return this.form.get(e.path)},n.prototype.updateModel=function(e,n){var t=this;If.then(function(){t.form.get(e.path).setValue(n)})},n.prototype.setValue=function(e){this.control.setValue(e)},n.prototype.onSubmit=function(e){return this.submitted=!0,n=this._directives,this.form._syncPendingControls(),n.forEach(function(e){var n=e.control;"submit"===n.updateOn&&n._pendingChange&&(e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)}),this.ngSubmit.emit(e),!1;var n},n.prototype.onReset=function(){this.resetForm()},n.prototype.resetForm=function(e){void 0===e&&(e=void 0),this.form.reset(e),this.submitted=!1},n.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)},n.prototype._findContainer=function(e){return e.pop(),e.length?this.form.get(e):this.form},n}(Bg),Nf=function(){function e(){}return e.modelParentException=function(){throw new Error('\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup\'s partner directive "formControlName" instead.  Example:\n\n      \n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });\n\n      Or, if you\'d like to avoid registering this form control, indicate that it\'s standalone in ngModelOptions:\n\n      Example:\n\n      \n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  ')},e.formGroupNameException=function(){throw new Error("\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      "+lf+"\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      "+rf)},e.missingNameException=function(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')},e.modelGroupParentException=function(){throw new Error("\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      "+lf+"\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      "+rf)},e.ngFormWarning=function(){console.warn("\n    It looks like you're using 'ngForm'.\n\n    Support for using the 'ngForm' element selector has been deprecated in Angular v6 and will be removed\n    in Angular v9.\n\n    Use 'ng-form' instead.\n\n    Before:\n    <ngForm #myForm=\"ngForm\">\n\n    After:\n    <ng-form #myForm=\"ngForm\">\n    ")},e}(),_f=new Le("NgFormSelectorWarning"),wf=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return i(n,e),n.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormGroup(this)},n.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeFormGroup(this)},Object.defineProperty(n.prototype,"control",{get:function(){return this.formDirective.getFormGroup(this)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"path",{get:function(){return hf(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"validator",{get:function(){return mf(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"asyncValidator",{get:function(){return vf(this._asyncValidators)},enumerable:!0,configurable:!0}),n.prototype._checkParentType=function(){},n}(Bg),Pf=function(e){function n(n,t,l){var i=e.call(this)||this;return i._parent=n,i._validators=t,i._asyncValidators=l,i}var t;return i(n,e),t=n,n.prototype._checkParentType=function(){this._parent instanceof t||this._parent instanceof Af||Nf.modelGroupParentException()},n}(wf),xf=function(){return Promise.resolve(null)}(),kf=function(e){function n(n,t,l,i){var r=e.call(this)||this;return r.control=new Of,r._registered=!1,r.update=new Gi,r._parent=n,r._rawValidators=t||[],r._rawAsyncValidators=l||[],r.valueAccessor=function(e,n){if(!n)return null;Array.isArray(n)||ff(e,"Value accessor was not provided as an array for form control with");var t=void 0,l=void 0,i=void 0;return n.forEach(function(n){var r;n.constructor===Hg?t=n:(r=n,Sf.some(function(e){return r.constructor===e})?(l&&ff(e,"More than one built-in value accessor matches form control with"),l=n):(i&&ff(e,"More than one custom value accessor matches form control with"),i=n))}),i||l||t||(ff(e,"No valid value accessor for form control with"),null)}(r,i),r}return i(n,e),n.prototype.ngOnChanges=function(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),function(e,n){if(!e.hasOwnProperty("model"))return!1;var t=e.model;return!!t.isFirstChange()||!$n(n,t.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)},n.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeControl(this)},Object.defineProperty(n.prototype,"path",{get:function(){return this._parent?hf(this.name,this._parent):[this.name]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"validator",{get:function(){return mf(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"asyncValidator",{get:function(){return vf(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),n.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},n.prototype._setUpControl=function(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0},n.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)},n.prototype._isStandalone=function(){return!this._parent||!(!this.options||!this.options.standalone)},n.prototype._setUpStandalone=function(){df(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})},n.prototype._checkForErrors=function(){this._isStandalone()||this._checkParentType(),this._checkName()},n.prototype._checkParentType=function(){!(this._parent instanceof Pf)&&this._parent instanceof wf?Nf.formGroupNameException():this._parent instanceof Pf||this._parent instanceof Af||Nf.modelParentException()},n.prototype._checkName=function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||Nf.missingNameException()},n.prototype._updateValue=function(e){var n=this;xf.then(function(){n.control.setValue(e,{emitViewToModelChange:!1})})},n.prototype._updateDisabled=function(e){var n=this,t=e.isDisabled.currentValue,l=""===t||t&&"false"!==t;xf.then(function(){l&&!n.control.disabled?n.control.disable():!l&&n.control.disabled&&n.control.enable()})},n}(Wg),Mf=function(){return function(){}}(),Df=function(){function e(){}var n;return n=e,e.withConfig=function(e){return{ngModule:n,providers:[{provide:_f,useValue:e.warnOnDeprecatedNgFormSelector}]}},e}(),Lf=function(){return function(e,n,t,l){void 0===n&&(n=!1),void 0===t&&(t=0),void 0===l&&(l=!1),this.name=e,this.enabled=n,this.reserved=t,this.reservedPercent=l}}(),Ff=function(){function e(e,n,t,l,i,r,o,u){void 0===e&&(e=!1),void 0===n&&(n=0),void 0===t&&(t=!1),void 0===l&&(l=0),void 0===i&&(i=!1),void 0===r&&(r=0),void 0===o&&(o=!1),void 0===u&&(u=0),this.autoSellEnabled=e,this.autoSellAmount=n,this.autoSellPercentage=t,this.autoSellOrder=l,this.autoBuyEnabled=i,this.autoBuyAmount=r,this.autoBuyPercentage=o,this.autoBuyOrder=u}return e.clone=function(n){return new e(n.autoSellEnabled,n.autoSellAmount,n.autoSellPercentage,n.autoSellOrder,n.autoBuyEnabled,n.autoBuyAmount,n.autoBuyPercentage,n.autoBuyOrder)},e}(),Uf=function(){function e(e,n,t,l,i){void 0===n&&(n=0),void 0===t&&(t=[new Lf("Crafting"),new Lf("Kitchen"),new Lf("Manufacture"),new Lf("Hut"),new Lf("House"),new Lf("Longhouse"),new Lf("Tudor house"),new Lf("Bakery"),new Lf("Tailor"),new Lf("Tavern"),new Lf("Tannery"),new Lf("Sawmill"),new Lf("Windmill"),new Lf("Cotton mill"),new Lf("Brewery"),new Lf("Winery"),new Lf("Stonemason"),new Lf("Mint"),new Lf("Fishers hut"),new Lf("Paper mill")].sort(function(e,n){return e.name.localeCompare(n.name)})),void 0===l&&(l=!1),void 0===i&&(i=null),this.resource=e,this.reserve=n,this.reservePercent=l,this.consumers=t,this.autoTrade=null===i?new Ff:i}return e.clone=function(n){var t=[];return n.consumers.forEach(function(e){return t.push(new Lf(e.name,e.enabled,e.reserved,e.reservedPercent))}),new e(n.resource,n.reserve,t,n.reservePercent,Ff.clone(n.autoTrade))},e.prototype.getReservedAmountBySource=function(e,n,t){var l=0,i=!1;return t?0:(l=this.reserve,i=this.reservePercent,this.consumers.forEach(function(n){n.enabled&&n.name===e&&(l=n.reserved,i=n.reservedPercent)}),i?Math.floor(l/100*n.getLimit()):l)},e.prototype.isUsed=function(){var e=!1;return 0!==this.reserve||(this.consumers.forEach(function(n){n.enabled&&(e=!0)}),(this.autoTrade.autoSellEnabled||this.autoTrade.autoBuyEnabled)&&(e=!0),e)},e}(),Hf=function(){function e(e,n,t,l,i,r,o,u,s){this.resource=e,this.name=n,this.amount=t,this.limit=l,this.reserved=i,this.resourceTypes=r,this.visible=o,this.highlighted=u,this.prioritise=s,this.options=new Uf(e)}return e.prototype.toJSON=function(){return{amount:this.amount,limit:this.limit,visible:this.visible,highlighted:this.highlighted,prioritise:this.prioritise,options:this.options}},e.prototype.addResource=function(e){return this.amount+e>this.limit?(this.amount=this.limit,this.amount):(this.amount+=e,this.amount)},e.prototype.removeResource=function(e){return this.amount-e>0&&(this.amount-=e,!0)},e.prototype.getResource=function(){return this.resource},e.prototype.getName=function(){return this.name},e.prototype.getAmount=function(){return this.amount},e.prototype.getLimit=function(){return this.limit},e.prototype.getResourceTypes=function(){return this.resourceTypes},e.prototype.hasResourceType=function(e){return this.resourceTypes.indexOf(e)>-1},e.prototype.isVisible=function(){return this.visible},e.prototype.toggleVisible=function(){return this.visible=!this.visible,this.visible},e.prototype.isHighlighted=function(){return this.highlighted},e.prototype.toggleHighlighted=function(){return this.highlighted=!this.highlighted,this.highlighted},e.prototype.getFreeSpace=function(){return this.limit-this.amount},e}(),Gf=function(){function e(){this.amount=0,this.limit=0,this.reserved=0,this.resourceTypes=[],this.visible=!1,this.highlighted=!1,this.prioritise=!1}return e.prototype.forResource=function(e){return this.resource=e,this},e.prototype.withName=function(e){return this.name=e,this},e.prototype.withAmount=function(e){return this.amount=e,this},e.prototype.withLimit=function(e){return this.limit=e,this},e.prototype.withReserved=function(e){return this.reserved=e,this},e.prototype.withResourceTypes=function(e){var n=this;return e.forEach(function(e){return n.resourceTypes.push(e)}),this},e.prototype.withResourceType=function(e){return this.resourceTypes.push(e),this},e.prototype.withVisible=function(e){return this.visible=e,this},e.prototype.withHighlighted=function(e){return this.highlighted=e,this},e.prototype.withPrioritise=function(e){return this.prioritise=e,this},e.prototype.build=function(){var e=new Hf(this.resource,this.name,this.amount,this.limit,this.reserved,this.resourceTypes,this.visible,this.highlighted,this.prioritise);return this.resource=void 0,this.name=void 0,this.amount=0,this.limit=0,this.reserved=0,this.resourceTypes=[],this.visible=!1,this.highlighted=!1,this.prioritise=!1,e},e}(),Bf=function(){return function(e,n,t,l){void 0===l&&(l=null),this.type=n,this.day=t,this.message=e,this.data=l}}(),Vf=function(){function e(){this.services=new Map}return e.prototype.addService=function(e,n){this.services.set(e,n)},e.prototype.getService=function(e){return this.services.get(e)},e.prototype.getServiceByRegion=function(e){switch(e){case Gu.VILLAGE:return this.services.get(zu.VILLAGE);case Gu.FORT:return this.services.get(zu.FORT);case Gu.FIELD:return this.services.get(zu.FIELD);case Gu.FOREST:return this.services.get(zu.FOREST);case Gu.MOUNTAINS:return this.services.get(zu.MOUNTAINS);case Gu.SEA:return this.services.get(zu.SEA);case Gu.PLATEAU:return this.services.get(zu.PLATEAU);default:console.error("Region service not found for ["+Gu[e]+"]")}},e.ngInjectableDef=Oe({factory:function(){return new e},token:e,providedIn:"root"}),e}(),Wf=function(e){return e[e.AUTO_SAVE_STATUS=0]="AUTO_SAVE_STATUS",e[e.AUTO_SAVE_PERIOD=1]="AUTO_SAVE_PERIOD",e[e.METRIC=2]="METRIC",e[e.SAVE_LOGS=3]="SAVE_LOGS",e[e.SOUND_MASTER=4]="SOUND_MASTER",e[e.SOUND_MASTER_VOLUME=5]="SOUND_MASTER_VOLUME",e[e.VISUAL_PROGRESS_BARS=6]="VISUAL_PROGRESS_BARS",e[e.AUTO_TEXT_FITTING=7]="AUTO_TEXT_FITTING",e[e.POSITIVE_COLOUR=8]="POSITIVE_COLOUR",e[e.NEGATIVE_COLOUR=9]="NEGATIVE_COLOUR",e[e.PAGED_VIEW=10]="PAGED_VIEW",e[e.BUILDINGS_PER_PAGE=11]="BUILDINGS_PER_PAGE",e[e.KEEP_RESERVATION_SETTINGS_ON_RESET=12]="KEEP_RESERVATION_SETTINGS_ON_RESET",e[e.KEEP_MANAGEMENT_SETTINGS_ON_RESET=13]="KEEP_MANAGEMENT_SETTINGS_ON_RESET",e[e.PAUSE_ON_INIT=14]="PAUSE_ON_INIT",e[e.KEEP_AUTO_TRADE_ON_RESET=15]="KEEP_AUTO_TRADE_ON_RESET",e[e.AI_DIFFICULTY=16]="AI_DIFFICULTY",e[e.SOUND_MUSIC=17]="SOUND_MUSIC",e[e.SOUND_MUSIC_VOLUME=18]="SOUND_MUSIC_VOLUME",e[e.SOUND_EFFECTS=19]="SOUND_EFFECTS",e[e.SOUND_EFFECTS_VOLUME=20]="SOUND_EFFECTS_VOLUME",e[e.SOUND_EFFECT_MARKET=21]="SOUND_EFFECT_MARKET",e[e.SOUND_EFFECT_RESEARCH=22]="SOUND_EFFECT_RESEARCH",e[e.SOUND_EFFECT_INVASION=23]="SOUND_EFFECT_INVASION",e}({}),zf=function(){function e(){this.optionsSubject=new D,this.options=new Map}return e.prototype.init=function(){this.options.set(Wf.AUTO_SAVE_STATUS,as.AUTO_SAVE_STATUS),this.options.set(Wf.AUTO_SAVE_PERIOD,as.AUTO_SAVE_PERIOD),this.options.set(Wf.METRIC,as.METRIC),this.options.set(Wf.SAVE_LOGS,as.SAVE_LOGS),this.options.set(Wf.PAUSE_ON_INIT,as.PAUSE_ON_INIT),this.options.set(Wf.KEEP_RESERVATION_SETTINGS_ON_RESET,as.KEEP_RESERVATION_SETTINGS_ON_RESET),this.options.set(Wf.KEEP_MANAGEMENT_SETTINGS_ON_RESET,as.KEEP_MANAGEMENT_SETTINGS_ON_RESET),this.options.set(Wf.KEEP_AUTO_TRADE_ON_RESET,as.KEEP_AUTO_TRADE_ON_RESET),this.options.set(Wf.SOUND_MASTER,as.SOUND_MASTER),this.options.set(Wf.SOUND_MASTER_VOLUME,as.SOUND_MASTER_VOLUME),this.options.set(Wf.SOUND_MUSIC,as.SOUND_MUSIC),this.options.set(Wf.SOUND_MUSIC_VOLUME,as.SOUND_MUSIC_VOLUME),this.options.set(Wf.SOUND_EFFECTS,as.SOUND_EFFECTS),this.options.set(Wf.SOUND_EFFECTS_VOLUME,as.SOUND_EFFECTS_VOLUME),this.options.set(Wf.SOUND_EFFECT_MARKET,as.SOUND_EFFECT_MARKET),this.options.set(Wf.SOUND_EFFECT_RESEARCH,as.SOUND_EFFECT_RESEARCH),this.options.set(Wf.SOUND_EFFECT_INVASION,as.SOUND_EFFECT_INVASION),this.options.set(Wf.VISUAL_PROGRESS_BARS,as.VISUAL_PROGRESS_BARS),this.options.set(Wf.AUTO_TEXT_FITTING,as.AUTO_TEXT_FITTING),this.options.set(Wf.PAGED_VIEW,as.PAGED_VIEW),this.options.set(Wf.BUILDINGS_PER_PAGE,as.BUILDINGS_PER_PAGE),this.options.set(Wf.POSITIVE_COLOUR,as.POSITIVE_COLOUR),this.options.set(Wf.NEGATIVE_COLOUR,as.NEGATIVE_COLOUR),this.options.set(Wf.AI_DIFFICULTY,as.AI_DIFFICULTY),this.changePositiveColour(),this.changeNegativeColour(),this.optionsSubject.next()},e.prototype.load=function(e){this.options=new Map(JSON.parse(e.options)),this.options.has(Wf.KEEP_RESERVATION_SETTINGS_ON_RESET)||this.options.set(Wf.KEEP_RESERVATION_SETTINGS_ON_RESET,as.KEEP_RESERVATION_SETTINGS_ON_RESET),this.options.has(Wf.KEEP_MANAGEMENT_SETTINGS_ON_RESET)||this.options.set(Wf.KEEP_MANAGEMENT_SETTINGS_ON_RESET,as.KEEP_MANAGEMENT_SETTINGS_ON_RESET),this.options.has(Wf.KEEP_AUTO_TRADE_ON_RESET)||this.options.set(Wf.KEEP_AUTO_TRADE_ON_RESET,as.KEEP_AUTO_TRADE_ON_RESET),this.options.has(Wf.VISUAL_PROGRESS_BARS)||this.options.set(Wf.VISUAL_PROGRESS_BARS,as.VISUAL_PROGRESS_BARS),this.options.has(Wf.SOUND_MASTER)||this.options.set(Wf.SOUND_MASTER,as.SOUND_MASTER),this.options.has(Wf.SOUND_MASTER_VOLUME)||this.options.set(Wf.SOUND_MASTER_VOLUME,as.SOUND_MASTER_VOLUME),this.options.has(Wf.SOUND_MUSIC)||this.options.set(Wf.SOUND_MUSIC,as.SOUND_MUSIC),this.options.has(Wf.SOUND_MUSIC_VOLUME)||this.options.set(Wf.SOUND_MUSIC_VOLUME,as.SOUND_MUSIC_VOLUME),this.options.has(Wf.SOUND_EFFECTS)||this.options.set(Wf.SOUND_EFFECTS,as.SOUND_EFFECTS),this.options.has(Wf.SOUND_EFFECTS_VOLUME)||this.options.set(Wf.SOUND_EFFECTS_VOLUME,as.SOUND_EFFECTS_VOLUME),this.options.has(Wf.SOUND_EFFECT_MARKET)||this.options.set(Wf.SOUND_EFFECT_MARKET,as.SOUND_EFFECT_MARKET),this.options.has(Wf.SOUND_EFFECT_RESEARCH)||this.options.set(Wf.SOUND_EFFECT_RESEARCH,as.SOUND_EFFECT_RESEARCH),this.options.has(Wf.SOUND_EFFECT_INVASION)||this.options.set(Wf.SOUND_EFFECT_INVASION,as.SOUND_EFFECT_INVASION),this.options.has(Wf.AUTO_TEXT_FITTING)||this.options.set(Wf.AUTO_TEXT_FITTING,as.AUTO_TEXT_FITTING),this.options.has(Wf.PAGED_VIEW)||this.options.set(Wf.PAGED_VIEW,as.PAGED_VIEW),this.options.has(Wf.BUILDINGS_PER_PAGE)||this.options.set(Wf.BUILDINGS_PER_PAGE,as.BUILDINGS_PER_PAGE),this.options.has(Wf.POSITIVE_COLOUR)||this.options.set(Wf.POSITIVE_COLOUR,as.POSITIVE_COLOUR),this.options.has(Wf.NEGATIVE_COLOUR)||this.options.set(Wf.NEGATIVE_COLOUR,as.NEGATIVE_COLOUR),this.options.has(Wf.PAUSE_ON_INIT)||this.options.set(Wf.PAUSE_ON_INIT,as.PAUSE_ON_INIT),this.options.has(Wf.AI_DIFFICULTY)||this.options.set(Wf.AI_DIFFICULTY,as.AI_DIFFICULTY),this.changePositiveColour(),this.changeNegativeColour(),this.optionsSubject.next()},e.prototype.save=function(){return{options:JSON.stringify(Array.from(this.options.entries()))}},e.prototype.reset=function(e,n){},e.prototype.registerForOptionsChange=function(){return this.optionsSubject.asObservable()},e.prototype.setOption=function(e,n){this.options.set(e,n),this.optionsSubject.next()},e.prototype.setOptions=function(e){var n,t;try{for(var l=function(e){var n="function"==typeof Symbol&&e[Symbol.iterator],t=0;return n?n.call(e):{next:function(){return e&&t>=e.length&&(e=void 0),{value:e&&e[t++],done:!e}}}}(e),i=l.next();!i.done;i=l.next()){var r=i.value;this.options.set(r.option,r.value)}}catch(o){n={error:o}}finally{try{i&&!i.done&&(t=l.return)&&t.call(l)}finally{if(n)throw n.error}}this.optionsSubject.next()},e.prototype.getOption=function(e){return this.options.get(e)},e.prototype.setPositiveColour=function(e){this.options.set(Wf.POSITIVE_COLOUR,e),this.changePositiveColour()},e.prototype.setNegativeColour=function(e){this.options.set(Wf.NEGATIVE_COLOUR,e),this.changeNegativeColour()},e.prototype.changePositiveColour=function(){document.getElementById("VillagerKings").style.setProperty("--positive-colour",this.options.get(Wf.POSITIVE_COLOUR))},e.prototype.changeNegativeColour=function(){document.getElementById("VillagerKings").style.setProperty("--negative-colour",this.options.get(Wf.NEGATIVE_COLOUR))},e.ngInjectableDef=Oe({factory:function(){return new e},token:e,providedIn:"root"}),e}(),Yf=function(e){return e[e.SPRING=0]="SPRING",e[e.SUMMER=1]="SUMMER",e[e.AUTUMN=2]="AUTUMN",e[e.WINTER=3]="WINTER",e}({}),Kf=function(){return function(e,n){this.day=e,this.year=n}}(),jf=function(){function e(e){this.servicesService=e,this.daySubject=new D,this.monthSubject=new D,this.yearSubject=new D,this.year=1,this.day=1,this.tickInDay=1,this.season=Yf.SPRING,e.addService(zu.CALENDAR,this)}return e.prototype.load=function(e){this.day=e.day,this.year=e.year,this.season=e.season,this.tickInDay=e.tickInDay},e.prototype.save=function(){return{day:this.day,year:this.year,season:this.season,tickInDay:this.tickInDay}},e.prototype.reset=function(e,n){this.day=1,this.tickInDay=1,this.season=Yf.SPRING,e?this.year=1:this.year+=1},e.prototype.tick=function(e){this.tickInDay+=1,11===this.tickInDay&&(this.tickInDay=1,this.day+=1,361===this.day&&(this.day=1,this.year+=1,this.servicesService.getService(zu.GAME).isEnabled(_u.CALENDAR)&&(this.servicesService.getService(zu.LOG).success("New Year!"),this.monthSubject.next(Math.floor(this.day/30+1))),this.yearSubject.next(this.year)),this.daySubject.next(this.day),this.day%30==1&&0!==Math.floor(this.day/30)&&this.monthSubject.next(Math.floor(this.day/30+1))),this.day>=1&&this.day<=90?this.season=Yf.SPRING:this.day>90&&this.day<=180?this.season=Yf.SUMMER:this.day>180&&this.day<=270?(this.season!==Yf.AUTUMN&&(this.servicesService.getService(zu.RESOURCES).checkResourcesBeforeWinter(),this.servicesService.getService(zu.TUTORIAL).checkWinterTutorial()),this.season=Yf.AUTUMN):this.day>270&&this.day<=360&&(this.season=Yf.WINTER)},e.prototype.getDay=function(){return this.day},e.prototype.getYear=function(){return this.year},e.prototype.getSeason=function(){return this.season},e.prototype.getAbsoluteDay=function(){return 360*(this.year-1)+this.day},e.prototype.getSeasonForAbsoluteDay=function(e){var n=(e-1)%360+1;return n>=1&&n<=90?Yf.SPRING:n>90&&n<=180?Yf.SUMMER:n>180&&n<=270?Yf.AUTUMN:n>270&&n<=360?Yf.WINTER:void 0},e.prototype.registerForDayChange=function(){return this.daySubject.asObservable()},e.prototype.registerForMonthChange=function(){return this.monthSubject.asObservable()},e.prototype.registerForYearChange=function(){return this.yearSubject.asObservable()},e.prototype.getDate=function(){return new Kf(this.day,this.year)},e.prototype.progressDays=function(e){this.day+=10},e.ngInjectableDef=Oe({factory:function(){return new e(Ye(Vf))},token:e,providedIn:"root"}),e}(),$f=function(){function e(e,n,t){this.servicesService=e,this.calendarService=n,this.optionsService=t,this.entries=[],this.servicesService.addService(zu.LOG,this),this.logSubject=new D}return e.prototype.customLog=function(e,n){this.entries.push(new Bf(e,n,this.calendarService.getDay())),this.logSubject.next()},e.prototype.log=function(e){this.entries.push(new Bf(e,ts.LOG,this.calendarService.getDay())),this.logSubject.next()},e.prototype.warning=function(e){this.entries.push(new Bf(e,ts.WARNING,this.calendarService.getDay())),this.logSubject.next()},e.prototype.success=function(e){this.entries.push(new Bf(e,ts.SUCCESS,this.calendarService.getDay())),this.logSubject.next()},e.prototype.mystical=function(e){this.entries.push(new Bf(e,ts.MYSTICAL,this.calendarService.getDay())),this.logSubject.next()},e.prototype.fightReport=function(e){this.entries.push(new Bf(e.message,ts.FIGHT_REPORT,this.calendarService.getDay(),e)),this.logSubject.next()},e.prototype.autoSave=function(){if(this.entries.length>0){var e=this.entries[this.entries.length-1];if(e.message&&e.message.includes("Auto saved")){var n=2,t=e.message.replace("Auto saved","").replace(" ","");t.length>0&&(n=Number(t)+1),e.message="Auto saved "+n,this.logSubject.next()}else this.log("Auto saved")}else this.log("Auto saved")},e.prototype.registerForLogs=function(){return this.logSubject.asObservable()},e.prototype.getEntries=function(){return this.entries},e.prototype.clearEntries=function(){this.entries=[],this.logSubject.next()},e.prototype.load=function(e){this.entries=e.logs},e.prototype.reset=function(e,n){this.entries=e?[]:this.entries.slice(-5).filter(function(e){return e.type===ts.MYSTICAL})},e.prototype.save=function(){return this.optionsService.getOption(Wf.SAVE_LOGS)?{logs:this.entries}:{logs:[]}},e.ngInjectableDef=Oe({factory:function(){return new e(Ye(Vf),Ye(jf),Ye(zf))},token:e,providedIn:"root"}),e}(),Qf=function(e){return e.ERROR_1="ERROR_1: Copying failed",e.ERROR_2="ERROR_2: Resource limit below 0",e.ERROR_3="ERROR_3: Workers below 0",e.ERROR_4="ERROR_4: Population Cap below 0",e.ERROR_5="ERROR_5: ",e.ERROR_6="ERROR_6: ",e.ERROR_7="ERROR_7: ",e.ERROR_8="ERROR_8: ",e}({}),qf=function(){function e(e){this.servicesService=e,this.textSubject=new D,this.missionDataSubject=new D,this.returnRegionSubject=new D,this.regionSelectionSubject=new D,this.shipyardLimitBoat=new D,this.buildingSubject=new D,this.tutorialSubject=new D,this.tutorialResponseSubject=new D,this.valueSubject=new D,this.onOpenSubject=new D,this.confirmationSubject=new D,this.abdicationSubject=new D,this.closeSubject=new D,this.valueResponseSubject=new D,this.regionSubject=new D,this.worldRegionSubject=new D,this.fightReportSubject=new D,this.techSubject=new D,this.resourceOptionsSubject=new D,this.resourceOptionsResponseSubject=new D,this.modals=[],this.servicesService.addService(zu.MODAL,this)}return e.prototype.add=function(e){this.modals.push(e)},e.prototype.remove=function(e){this.modals=this.modals.filter(function(n){return n.id!==e})},e.prototype.open=function(e){this.modals.find(function(n){return n.id===e}).open(),this.onOpenSubject.next(e)},e.prototype.close=function(e){this.modals.find(function(n){return n.id===e}).close(),this.closeSubject.next(e)},e.prototype.registerForText=function(){return this.textSubject.asObservable()},e.prototype.registerForOnOpen=function(){return this.onOpenSubject.asObservable()},e.prototype.registerForConfirmation=function(){return this.confirmationSubject.asObservable()},e.prototype.sendConfirmationResult=function(e){this.confirmationSubject.next(e)},e.prototype.registerForAbdication=function(){return this.abdicationSubject.asObservable()},e.prototype.sendAbdicationResult=function(e){this.abdicationSubject.next(e)},e.prototype.setModalText=function(e){this.textSubject.next(e)},e.prototype.registerForRegion=function(){return this.regionSubject.asObservable()},e.prototype.setRegion=function(e){this.regionSubject.next(e)},e.prototype.registerForCloseModal=function(){return this.closeSubject.asObservable()},e.prototype.sendCloseSignal=function(e){this.closeSubject.next(e)},e.prototype.registerForValue=function(){return this.valueSubject.asObservable()},e.prototype.setModalValue=function(e){this.valueSubject.next(e)},e.prototype.sendValueInput=function(e){this.valueResponseSubject.next(e)},e.prototype.registerForValueResponse=function(){return this.valueResponseSubject.asObservable()},e.prototype.registerForMissionData=function(){return this.missionDataSubject.asObservable()},e.prototype.registerForBuilding=function(){return this.buildingSubject.asObservable()},e.prototype.setMissionData=function(e){this.missionDataSubject.next(e)},e.prototype.setBuilding=function(e){this.buildingSubject.next(e)},e.prototype.info=function(e){this.open(ju.INFO),this.setModalText(e)},e.prototype.openTutorialModal=function(e){var n=this.modals.find(function(e){return e.id===ju.TUTORIAL});n.close(),n.openTutorialWindow(e)},e.prototype.registerForTutorial=function(){return this.tutorialSubject.asObservable()},e.prototype.setTutorial=function(e){this.tutorialSubject.next(e)},e.prototype.registerForTutorialResponse=function(){return this.tutorialResponseSubject.asObservable()},e.prototype.sendTutorialResponse=function(e){this.tutorialResponseSubject.next(e)},e.prototype.registerForResourceOptions=function(){return this.resourceOptionsSubject.asObservable()},e.prototype.setResourceOptions=function(e){this.resourceOptionsSubject.next(e)},e.prototype.registerForResourceOptionsResponse=function(){return this.resourceOptionsResponseSubject.asObservable()},e.prototype.sendResourceOptionsResponse=function(e){return this.resourceOptionsResponseSubject.next(e)},e.prototype.registerForReturnRegion=function(){return this.returnRegionSubject.asObservable()},e.prototype.setReturnRegion=function(e){this.returnRegionSubject.next(e)},e.prototype.registerForRegionSelectionOrder=function(){return this.regionSelectionSubject.asObservable()},e.prototype.setRegionSelection=function(e){this.regionSelectionSubject.next(e)},e.prototype.registerForShipyardLimitBoat=function(){return this.shipyardLimitBoat.asObservable()},e.prototype.setShipyardLimitBoat=function(e){this.shipyardLimitBoat.next(e)},e.prototype.registerForWorldRegion=function(){return this.worldRegionSubject.asObservable()},e.prototype.setWorldRegion=function(e){this.worldRegionSubject.next(e)},e.prototype.registerForFightReport=function(){return this.fightReportSubject.asObservable()},e.prototype.setFightReport=function(e){this.fightReportSubject.next(e)},e.prototype.registerForTech=function(){return this.techSubject.asObservable()},e.prototype.setTech=function(e){this.techSubject.next(e)},e.ngInjectableDef=Oe({factory:function(){return new e(Ye(Vf))},token:e,providedIn:"root"}),e}(),Xf=function(){function e(e,n,t){this.modalService=e,this.servicesService=n,this.router=t,this.tutorialsEnabled=!1,this.villageTutorialState=0,this.forestTutorialState=0,this.fieldTutorialState=0,this.mountainsTutorialState=0,this.plateauTutorialState=0,this.seaTutorialState=0,this.resourcesTutorialState=0,this.winterTutorialState=0,n.addService(zu.TUTORIAL,this)}return e.prototype.load=function(e){this.villageTutorialState=void 0!==e.villageTutorialState?e.villageTutorialState:0,this.forestTutorialState=void 0!==e.forestTutorialState?e.forestTutorialState:0,this.resourcesTutorialState=void 0!==e.resourcesTutorialState?e.resourcesTutorialState:0,this.fieldTutorialState=void 0!==e.fieldTutorialState?e.fieldTutorialState:0,this.mountainsTutorialState=void 0!==e.mountainsTutorialState?e.mountainsTutorialState:0,this.plateauTutorialState=void 0!==e.plateauTutorialState?e.plateauTutorialState:0,this.seaTutorialState=void 0!==e.seaTutorialState?e.seaTutorialState:0,this.winterTutorialState=void 0!==e.winterTutorialState?e.winterTutorialState:0},e.prototype.save=function(){return{villageTutorialState:this.villageTutorialState,forestTutorialState:this.forestTutorialState,resourcesTutorialState:this.resourcesTutorialState,fieldTutorialState:this.fieldTutorialState,mountainsTutorialState:this.mountainsTutorialState,plateauTutorialState:this.plateauTutorialState,seaTutorialState:this.seaTutorialState,winterTutorialState:this.winterTutorialState}},e.prototype.reset=function(e,n){},e.prototype.checkRegionTutorial=function(e){var n=this;if(this.tutorialsEnabled)switch(e){case Gu.VILLAGE:if(0===this.villageTutorialState){this.startTutorial(cs);var t=this.modalService.registerForTutorialResponse().subscribe(function(e){t.unsubscribe(),n.villageTutorialState=e})}break;case Gu.FOREST:if(0===this.forestTutorialState){this.startTutorial(ps);var l=this.modalService.registerForTutorialResponse().subscribe(function(e){l.unsubscribe(),n.forestTutorialState=e})}break;case Gu.FIELD:if(0===this.fieldTutorialState){this.startTutorial(hs);var i=this.modalService.registerForTutorialResponse().subscribe(function(e){i.unsubscribe(),n.fieldTutorialState=e})}break;case Gu.MOUNTAINS:if(0===this.mountainsTutorialState){this.startTutorial(ds);var r=this.modalService.registerForTutorialResponse().subscribe(function(e){r.unsubscribe(),n.mountainsTutorialState=e})}break;case Gu.PLATEAU:if(0===this.plateauTutorialState){this.startTutorial(gs);var o=this.modalService.registerForTutorialResponse().subscribe(function(e){o.unsubscribe(),n.plateauTutorialState=e})}break;case Gu.SEA:if(0===this.seaTutorialState){this.startTutorial(fs);var u=this.modalService.registerForTutorialResponse().subscribe(function(e){u.unsubscribe(),n.seaTutorialState=e})}}},e.prototype.checkResourcesTutorial=function(){var e=this;if(0===this.resourcesTutorialState){this.startTutorial(ms);var n=this.modalService.registerForTutorialResponse().subscribe(function(t){n.unsubscribe(),e.resourcesTutorialState=t})}},e.prototype.enableTutorials=function(){this.tutorialsEnabled=!0},e.prototype.resetTutorials=function(){this.villageTutorialState=0,this.forestTutorialState=0,this.fieldTutorialState=0,this.mountainsTutorialState=0,this.plateauTutorialState=0,this.seaTutorialState=0,this.resourcesTutorialState=0,this.winterTutorialState=0,this.router.url.endsWith("village")?this.checkRegionTutorial(Gu.VILLAGE):this.router.url.endsWith("forest")?this.checkRegionTutorial(Gu.FOREST):this.router.url.endsWith("field")?this.checkRegionTutorial(Gu.FIELD):this.router.url.endsWith("mountains")?this.checkRegionTutorial(Gu.MOUNTAINS):this.router.url.endsWith("plateau")?this.checkRegionTutorial(Gu.PLATEAU):this.router.url.endsWith("sea")?this.checkRegionTutorial(Gu.SEA):this.router.url.endsWith("resources")?this.checkResourcesTutorial():this.modalService.info("Tutorials have been enabled")},e.prototype.startTutorial=function(e){this.modalService.setTutorial(e),this.servicesService.getService(zu.TICKER).stop(),this.modalService.openTutorialModal(e[0].position)},e.prototype.showCurrentViewTutorial=function(){this.router.url.endsWith("village")?this.startTutorial(cs):this.router.url.endsWith("forest")?this.startTutorial(ps):this.router.url.endsWith("field")?this.startTutorial(hs):this.router.url.endsWith("mountains")?this.startTutorial(ds):this.router.url.endsWith("plateau")?this.startTutorial(gs):this.router.url.endsWith("sea")?this.startTutorial(fs):this.router.url.endsWith("resources")?this.startTutorial(ms):this.modalService.info("There is no tutorial for this tab")},e.prototype.checkWinterTutorial=function(){var e=this;if(0===this.winterTutorialState){this.startTutorial(vs);var n=this.modalService.registerForTutorialResponse().subscribe(function(t){n.unsubscribe(),e.winterTutorialState=t})}},e.ngInjectableDef=Oe({factory:function(){return new e(Ye(qf),Ye(Vf),Ye(jd))},token:e,providedIn:"root"}),e}(),Zf=[{VERSION:"v1.0.1",MESSAGE:['<ul><li>Fixed barracks not unlocking after being researched</li><li>Fixed weather research description</li><li>Shrine and Church will be available earlier</li><li>"New year!" message will appear on day 1 and only after researching calendar</li><li>Shrine and Church will now log when they become available</li><li>Fixed wrapper boxes sizes</li><li>Pit mine research description changed</li><li>Reduced building button and dropdown font size to prevent overflow</li><li>Aligned building icon and text</li><li>Reduced amount of fur produced by hunter</li><li>Fixed merchant buying items for 0 coins</li><li>Reduced required research points for forestry</li><li>Last tutorial step no longer has "skip tutorial" button</li><li>Available nutrition metric doesn\'t include reserved food</li><li>Researching animals require hay</li><li>Fixed geologist last find description</li></ul>']},{VERSION:"v1.0.2",MESSAGE:["<ul><li>Fixed building line icons alignment</li><li>Refactored dev message window into changelog</li><li>Reduced low happiness severity</li><li>Doubled starting food amount</li><li>Buffed berry and mushroom find chance</li></ul>"]},{VERSION:"v1.0.3",MESSAGE:["<ul><li><b>Famine is now satisfied with 50% less food</b></li><li><b>Refactored happiness so that multiple things combined cannot bring it down to 0</b></li><li>It is now possible to pause the game through settings dropdown menu</li><li>The game is now paused during tutorials</li><li>Reduced brushwood cost of stone tools and bow.</li><li>Buildings are now taking action in random order instead of left to right top to bottom</li><li>Tavern decrease happiness over 75% when no alcohol is available</li><li>Changed Tavern building lines to show amount of alcohols</li><li>Added option to produce fish food for fishers</li><li>Added option to boost school of fish with fish food</li><li>Fixed new school of fish not spawning</li><li>Fixed new sharks not spawning</li><li>Added new Research for Fish Food</li><li>Added tutorials for Field, Mountains, Sea and Plateau regions</li><li>Added close button for royal points modal</li><li>Greatly increased animal taming chance <br>(Taming is supposed to be slow, as this only to be used to kick-start pastures. Another method is to buy animals on the market)</li><li>Fixed animal amount calculation errors resulting in negative, doubled<br> or over the limit amount of animals</li><li>Added notification to market tab if there is no marketplace</li><li>Changed marketplace bribe button text</li></ul>"]},{VERSION:"v1.0.4",MESSAGE:["<ul><li><b>Fixed demolishing huts and houses</b></li><li>Fixed Crafting tab display for Chrome and Edge</li><li>Increased gatherer chance for finding stone and brushwood</li><li>Added several warning for low forest size</li><li>Increased minimal yearly forest growth</li></ul>"]},{VERSION:"v1.0.5",MESSAGE:['<ul><li><b>Fixed wrong army mission being started</b></li><li><b>Fixed Food nutrition value displaying NaN and blocking anything that requires FOOD nutrition as cost</b></li><li>Fixed "Spy" mission not displaying enemy power</li><li>Church will now unlock Religion tab when built</li><li>Urban Planning no longer require house to be researched</li></ul>']},{VERSION:"v1.0.6",MESSAGE:["Bug fixes:<ul><li><b>Fixed King of the People royal perk not allowing to build houses</b></li><li><b>Fixed royal perks not processing unlocked research correctly</b></li><li><b>Fixed research permanent effects not to persist through soft reset and abdication</b></li><li><b>Fixed geologist not finding gold, silver and iron</b></li><li><b>Fixed Tavern not appearing after being researched</b></li><li><b>Fixed fields, orchards and pastures splitting value</b></li><li><b>Fixed 'Blessing' prayer and excluded a lot of buildings that would not benefit from it</b></li><li><b>Fixed changing religion to be player action</b></li></ul>Performance:<ul><li>Improved performance for reloading region<br>It will still take regular time on the first visit but after that I got about 3 times better loading time for region with 36 buildings</li></ul>Other:<ul><li>Improved butcher meat transporting. It no longer requires whole warehouse space to be available at once</li><li>Increased geologist deposits find chances</li><li>Renamed 'Entertainment' research to 'Alcohol'</li><li>Housing buildings show when they are using fuel</li><li>Added research tab warning when no workshop is set to research</li><li>Added button to show finished research projects</li><li>Increased average meat production for hunter lodge</li><li>Improved scrolling in modals</li><li>Urban planning research points requirement greatly reduced</li><li>Improved some prayers descriptions</li><li>Nature effects are now logged when added</li><li>Decreased recruitment times for all troops</li><li>Fishers huts will now work during rain (apparently fish can catch even better during rain due to more oxygen in the water)</li></ul>"]},{VERSION:"v1.0.7",MESSAGE:["Bug fixes:<ul><li><b>Fixed forecast period saving. It will no longer go back to one day after researching weather and reloading game</b></li><li><b>Fixed pastures filling only one butcher. Pasture will now give animal to butcher with shortest queue</b></li><li><b>Fixed demolishing buildings other than housing buildings</b></li><li><b>Fixed work management output to start with maxed output resources</b></li><li><b>Fixed mission not returning troops</b></li><li><b>Fixed possibility to build next wonder without researching</b></li><li><b>Lost wonder effects will be restored on abdication or soft reset</b></li><li><b>Fixed harvesting from field in summer</b></li><li><b>Fixed buying animal filling entire pasture</b></li><li><b>Fixed animals produce filling warehouse when chores went over 50</b></li></ul>Other:<ul><li><b>Changed expedition to take longer and cost more but give more land and kill less troops</b></li><li><b>Improved building filtering and made it persistent</b></li><li><b>Increased game size by about 25%</b></li><li><b>Arrange doesn't require to be researched anymore</b></li><li><b>New option to change visual progress bars to text progress value</b></li><li>Workshops show what is being researched</li><li>Geologist is no longer limited by mountains size</li><li>Slightly improved Royal perks descriptions</li><li>Added special warning for demolishing housing building when there is no enough free space to move all occupants to</li><li>Increased amount of fuel crafted from coal and heating power of coal</li><li>Pit mine now warn that it requires 20 deposits</li><li>Slightly corrected research display</li><li>Changes for Royal Points granting events</li><li>Disabled Ascension temple until it will be fixed</li></ul>Information:<ul><li>Drag and drop arrange seems to work on some computers and not on others. I have tested on a PC and laptop with the same operating system and browser version and it does work on PC and not on laptop.</li></ul>"]},{VERSION:"v1.0.8",MESSAGE:['Bug fixes:<ul><li><b>Fixed workshop display that caused buildings to display in two columns</b></li><li><b>Changes regarding workshop logic that might fix locking issue</b></li><li><b>Fixed "R Quarry" and "R Smithy" prerequisites display</b></li><li><b>Fixed incorrect animals moving when splitting or demolishing pasture</b></li><li><b>Gatherers won\'t lock on warehouse. Locking resource will be removed</b></li><li><b>Fixed field and orchard harvest scale display</b></li><li><b>Fixed bread recipe wheat cost to 2 instead of 1</b></li><li><b>Work management will fire worker after finishing work cycle if rules are not satisfied</b></li><li><b>Fixed and enabled Ascension Temple (requires conditions to be met to become available)</b></li><li><b>Fixed Missions again</b></li><li><b>Fixed some metals recipes not adding after research and smithy built</b></li><li><b>Fixed smithy demolishing</b></li></ul>Other:<ul><li><b>Added tooltips to resources in resource tab.<br>Consumable resources display nutrition<br>Fuel resources display heating power</b></li><li><b>Resources tooltip will now show what building/action used each resource in previous 30 days.</b></li><li>Increased hay consumption of animals by 30%</li><li>Increased apples nutrition value</li><li>Increased apples harvest multiplier</li><li>Increased great lighthouse royal points temporary (to make up for no effects)</li></ul>']},{VERSION:"v1.0.9",MESSAGE:["New features<ul><li><b>Implemented new extended reserver that can define different limit for most of the consumers</b></li></ul>Bug fixes:<ul><li><b>Fixed building Smithy required to research tech allowing to build it</b></li><li><b>Fixed limited buildings allowed to build over the limit</b></li><li><b>Fixed missions finishing without calculating outcome</b></li><li><b>Most probably fixed overscrolling from game to kongregate window</b></li></ul>Other:<ul><li>Doubled iron deposit find chance</li><li>Ore deposits found limited at 50 each</li><li>Troops multiplier now shows multiplied required resources in tooltip. If you cannot afford - troop turns grey</li><li>Slightly increased happiness reduction from half food rations</li><li>Buildings number limit is now added to build window</li><li>Decreased brushwood fuel cost and increased brushwood energy</li></ul>"]},{VERSION:"v1.0.10",MESSAGE:["New features<ul><li><b>Added more production details to buildings in build window</b></li><li><b>Added Manufacture building for specialised crafting</b></li><li><b>Added Specialised production research to unlock manufacture</b></li></ul>Bug fixes:<ul><li><b>Fixed and improved building power modifier display to include permanent effects and correctly use weather multiplier</b></li><li><b>Fixed pastures limits updating to resources tab</b></li><li><b>Fixed wooden tower starting with decreased health</b></li><li><b>Fixed metallurgy to add bronze recipe</b></li><li><b>Fixed orchard harvest calculation when in autumn</b></li><li><b>Fixed bug with New King buff lasting 0 days after reset or abdication</b></li></ul>Other:<ul><li>Changed work management option description (management tab) and added description message after researching Human Resources</li><li>Extended some buildings descriptions</li><li>Increased fur production from hunters</li></ul>"]},{VERSION:"v1.0.11",MESSAGE:["New features<ul><li><b>Forest management improved and moved into management tab</b></li></ul>Bug fixes:<ul><li><b>Fixed some wonders add effects after each reset</b></li><li><b>Fixed Forester not returning land when demolished</b></li></ul>Other:<ul><li>Added option to show only current view tutorial</li><li>Added buttons to hire/fire workers in all currently viewed buildings</li><li>Removed autofill '1' for crafting amount input</li><li>Increased expeditions cost</li><li>Decreased chicken and pigs breeding speed </li><li>Forestry research now requires management to be researched</li><li>Added Stonehenge effect for manufacture</li><li>Changed wonders to reapply missing effects on soft reset or abdication</li><li>Changed some missions times</li><li>Added troops list to mission in progress</li></ul>"]},{VERSION:"v1.0.12",MESSAGE:["New features<ul><li><b>Added new housing building</b></li><li><b>Added crafting cheese from milk (might require new run)</b></li><li><b>Added new army troop</b></li></ul>Bug fixes:<ul><li><b>Fixed huts and houses ignoring fuel items reserved amounts</b></li><li><b>Smithy can no longer be blessed</b></li><li><b>Fixed manufacture producing even when there are no required resources</b></li><li><b>Fixed pastures not producing when there is more than 1000 animals</b></li><li><b>Fixed some imperfections on the background image</b></li><li><b>Fixed orchard resources not available in resources and market before discovered via harvest</b></li></ul>Other:<ul><li><b>Warehouses can be combined and split</b></li><li>Warehouse building size increased (resource storage stays the same)</li><li>Nutrition display has been moved to header (might cause highlighted items to overflow)</li><li>Increased hay required by animals during winter</li><li>Animals now require food for the whole year ( less food required during spring, summer and autumn than in winter )</li><li>Added tooltip to market offers to show more information regarding the offer</li><li>Removed horse cost from expeditions</li><li>Manufacture moved closer in the research tree and has cost decreased</li><li>Mint now requires gold and silver to make coins</li><li>Added nutrition usage to header nutrition tooltip</li><li>Forest low size warnings will now display only when forestry is not researched</li><li>Crafting tab orders will now display how many workshops are crafting particular item</li></ul>"]},{VERSION:"v1.0.13",MESSAGE:["New features<ul><li><b>Added new health resources (no use yet)</b></li><li><b>It's now possible to switch reserved value to be interpreted as reserve % of total limit</b></li><li><b>Added possibility to add second row to header through management menu</b></li><li><b>Added Heritage system that awards points based on population size on reset</b></li></ul>Performance<ul><li><b>Big performance improvement</b></li><li><b>New performance option in settings (give current default performance a try before changing options)</b></li></ul>Bug fixes:<ul><li><b>Fixed wonder construction not benefiting from construction effects</b></li><li><b>Church will employ worker when finished building</b></li></ul>Other:<ul><li><b>Changed arrange drag and drop to click and click</b></li><li>Researching windmill will now make fabric visible and tradeable</li><li>Upgrade arrow will now have green outline</li><li>Farm can now be upgraded to level 2</li><li>Shrine and Church now have diminishing return from population size</li><li>Apples growth time reduced by 25%</li><li>Greatly reduced alcohol consumption rate</li><li>Invasions will now only happen when village reach certain size</li><li>Invasions will now have a recharge period when invasion threat will not grow</li><li>Workers and population can now be added to header</li><li>Nutrition value will show in the header from the start</li></ul>"]},{VERSION:"v1.0.14",MESSAGE:["New features<ul><li><b>Army troops will now require soldiers pay every 30 days.<br>If there is no enough coins to pay soldier has 25% chance to desert</b></li><li><b>Added new buildings filter for all/working/idle buildings</b></li></ul>Bug fixes:<ul><li><b>Fixed iron recipe not added after researching</b></li></ul>Other:<ul><li>Renamed 'Leather' research to 'Tannery' and removed it from tailor prerequisites</li><li>Added warning about low heating resources on start of autumn</li><li>Added herbs to gatherer building description</li><li>Vegetable and meat soups now require herbs</li><li>Increased high (90-100) happiness effect from 35% to 50%</li><li>Prioritized resources have higher chance to appear on market</li><li>Added new royal perk</li><li>Added a window for nature effects in effects management</li><li>Increased workshops building size</li><li>Decreased animals reproduction rate</li><li>Farm upgrade increases farm power</li></ul>"]},{VERSION:"v1.0.15",MESSAGE:["New features<ul><li><b>Added 'Herbalism' research that allows to plant herbs at fields</b></li></ul>Bug fixes:<ul><li><b>Fixed field harvest display and yield calculation</b></li><li><b>Fixed House building awarded with King of the People perk. It now starts with 3 occupants</b></li><li><b>Fixed game freeze when coins were reserved</b></li></ul>Other:<ul><li>Manufacture no longer stops production during storm</li><li>Mint building size increased, power decreased, output coins increased to be worth more than input resources</li><li>Initial housing buildings start equipped with clothes</li><li>Mathematics research will now also buff deconstructions</li><li>Added pause/resume button in the footer</li><li>Added options to change positive and negative colours to user defined</li></ul>"]},{VERSION:"v1.0.16",MESSAGE:["New features<ul><li><b>Added food priority to management</b></li></ul>Performance<ul><li><b>Added settings option that allows to paginate buildings in regions.<br>Number of buildings per page can be also defined in settings</b></li></ul>Bug fixes:<ul><li><b>Fixed king of the people House building having too much population from start (6 instead of 3)</b></li><li><b>Fixed selling animals removing more than it should</b></li><li><b>Fixed pit mine mining only 199 resources</b></li></ul>Other:<ul><li>Pit mine base power reduced</li><li>Workshops now show what resource they are waiting to deposit</li><li>Workshops won't start crafting if there is no space in warehouse or if warehouse will be filled to full by other workshops</li></ul>"]},{VERSION:"v1.0.17",MESSAGE:["New features<ul><li><b>Resources tooltips will now show who produced that item in the last 30 days</b></li></ul>Bug fixes:<ul><li><b>Fixed mountains tab deposits causing scroll bar to go below the screen</b></li><li><b>Tooltips should no longer go under the screen</b></li><li><b>Probably fixed tavern bug</b></li><li><b>Fixed army payday countdown stuck and invasions being tied to this countdown</b></li><li><b>Fixed day being 11 ticks instead of 10</b></li><li><b>Fixed golden items not resetting correctly</b></li></ul>Other:<ul><li>Changed 'Royal prophecy' 3rd perk to grant 'Bow' and 'Hunting' research instead of 'Mortar'</li><li>Added display of what golden items have been found during current run</li><li>Farms will now work on pastures during rain</li><li>Pastures details now show how much meat current animals will yield</li><li>Alcohol unlocks beer and wine resources</li><li>Windmill power and flour amount doubled, flour recipe cost reduced</li><li>Longhouse require hay instead of fabric (for roof), House require brushwood (also for roof)</li><li>Limited tavern to 1 (having more might be bad if they lack alcohol as negative/positive effects would be applied multiple times)</li></ul>"]},{VERSION:"v1.0.18",MESSAGE:["Bug fixes:<ul><li><b>Fixed huts not arranging correctly</b></li><li><b>Fixed importing showing researches blocked and as done</b></li><li><b>Fixed temperature in weather tab not showing in fahrenheit</b></li><li><b>Fixed workshop waiting for warehouse text breaking buildings order</b></li></ul>Other:<ul><li>Added description to finished research projects describing what has been learned</li></ul>"]},{VERSION:"v1.0.19",MESSAGE:["New features<ul><li><b>Added cooked fish. Researching 'cooking' required to get recipe</b></li><li><b>Added sheep and wool. Wool can be used to craft fabric</b></li></ul>Bug fixes:<ul></ul>Other:<ul><li><b>Reservation settings carry over soft resets/abdications but are deactivated. Added settings option to carry over activated reservations.</b></li><li><b>Management menu options carry over soft resets/abdications if settings option is enabled. Some options require research to become available so until they are researched default values will be used.</b></li><li>Mushrooms can now be planted on farms</li><li>Increased shrine building power</li><li>Increased single buildings buffs power from 5% to 10%. Added more buff information to buff tooltip</li><li>Added agriculture as prerequisite for alcohol</li><li>Unlocking shrine or church will log in green</li><li>Leather recipe no longer available from start</li><li>Removed 'waiting for trees' from loggers hut if forest is available</li><li>Added management option to display research progress in the header</li><li>Quarry and pit mine will log when resources finished</li><li>Increased bigger housing buildings food and fuel storage. Changed their cost to that value.</li></ul>"]},{VERSION:"v1.0.20",MESSAGE:["Bug fixes:<ul><li><b>Produced/used by data will no longer persist through resets</b></li></ul>Other:<ul><li>Added pasture description to hint where to find first animals</li><li>Added management option to display faith in the header</li><li>Added new royal perk to increase initial crafting queue size</li><li>Increased 'Motivation Speech' perk to last 5 years instead of just 1 year</li><li>Soft reset and abdication now shows how many people are needed for the next heritage point</li><li>Chores cap now scale with pasture size</li><li>Hay nutrition for animals reduced from 25 to 10</li><li>'Auto save' messages will now combine into one with number of total saves</li><li>Added log message when worker is removed from the building. This can be disabled in management</li><li>Used up building (quarry, pit mine) will now have greyed out background</li><li>Greatly increased fruiting rate for all orchard crops. Orchards can now fruit also in summer</li></ul>"]},{VERSION:"v1.1.0",MESSAGE:["New Features:<ul><li><b>Introduced world map tab with new mechanics and reworked army missions</b></li><li><b>New buildings: Embassy, Paper mill, Deep mine</b></li><li><b>A few new researches</b></li><li><b>Added average daily nutrition production display to nutrition tooltip</b></li></ul>Bug fixes:<ul><li>Lack of alcohol now reduces happiness again down to 75%</li><li>Added better verification to auto save period input</li><li>Fixed stuck payday counter when no pay is due</li></ul>Other:<ul><li><b>New level of 'Family jewels' that add coins to starting resources</b></li><li>'Motivation speech' duration increased to 100 years</li><li>Reduced alcohol consumption and happiness increase/decrease</li><li>Used up buildings (quarry, pit mine) will not require demolish confirmation anymore</li><li>Wiki link added to footer</li><li>Pit mine base power decreased</li></ul>"]},{VERSION:"v1.1.1",MESSAGE:["Bug fixes:<ul><li><b>Fixed deep mine not working after upgrade</b></li><li><b>Underground City will now also buff deep mine</b></li><li><b>Player plunder and conquer no longer will fight player region when conquered</b></li><li><b>Fixed issue with region selection moving map instead</b></li></ul>Other:<ul><li><b>Increased cost for AI colonization (so that it happens less frequently)</b></li><li><b>Increased cost for AI troops</b></li><li>Deep mine will take longer to find new ores and longer to upgrade</li><li>Royal perks split into permanent and one time use groups</li><li>When demolishing housing buildings villagers will take their share of food, fuel and clothes to the new building</li><li>There are reports about golden apples in the orchards!</li><li>Removed stone from colonization cost</li></ul>"]},{VERSION:"v1.1.2",MESSAGE:["New Features:<ul><li><b>Auto trade options in resource settings window</b></li></ul>Bug fixes:<ul><li><b>Fixed pasture chores to use farm power bonus</b></li><li><b>Fixed player regions being attacked even with friendly standing</b></li></ul>Other:<ul><li>Reduced troops training time</li><li>Reduced AI attacks chance</li><li>Removed fabric from paper mill cost</li><li>Pit mine require only 20 mountains again</li><li>Added confirm window when trying to buy resource over the limit</li></ul>"]},{VERSION:"v1.1.3",MESSAGE:["New Features:<ul><li><b>Work management has now a season rule</b></li><li><b>Work management can be set to craft always to max</b></li><li><b>Work management for training square added</b></li><li><b>Work management can be set to all buildings of the same type</b></li><li><b>Work management for farm added</b></li></ul>Bug fixes:<ul><li><b>Added Paper mill to resource settings</b></li><li><b>Fixed spy mission</b></li><li><b>'Move' mission troops will return if target region has been conquered</b></li></ul>Other:<ul><li><b>Reduced AI income</b></li><li>Reduced number of AI starting regions</li><li>Changed shrine cost to raw resources</li><li>Deep mine ore finding rate per ore increase with each building level</li><li>Added logs when player region is conquered</li></ul>"]},{VERSION:"v1.1.4",MESSAGE:["New Features:<ul><li><b>Added fight reports</b></li></ul>Other:<ul><li>Diplomacy will be decreased much more after hostile actions towards friendly kingdoms</li><li>AI regions will start with 2 archers to slow down early rush</li><li>Added settings option that will pause the game on page open/refresh</li></ul>"]},{VERSION:"v1.1.5",MESSAGE:["Bug fixes:<ul><li><b>Added missing fight reports on won defense</b></li><li><b>Fixed missing path connection from one of the regions</b></li><li><b>Fixed farm work management not saving</b></li><li><b>Added scroll bar to general management tab to prevent food priority hiding</b></li><li><b>Fixed player kingdom name changing</b></li><li><b>Loot message will combine the same resources</b></li><li><b>'Pickaxe design' will now add bonus to deep mine</b></li></ul>Other:<ul><li>Max colonists set to 20 (as there is no point in sending more)</li><li>Reduced hay yield multiplier from 2 to 1.5</li><li>Reduced the cost of 'specialised production' research</li><li>Increased pit mine base power</li><li>Reduced wine fermenting time from 1 year to 30 days</li><li>Recruits can be 'drag and drop' arranged</li><li>Soft reset/abdication message will now say on what year current run has started</li></ul>"]},{VERSION:"v1.1.6",MESSAGE:["New Features:<ul><li><b>Added research crafting queue</b></li><li><b>Added Buildings auto-sort.<br>Order of buildings will be the same as the order of appearance.</b></li></ul>Bug fixes:<ul><li><b>Chrome map bugs should be fixed now</b></li><li><b>Fixed building confirmation (triggered by button) to work incorrectly when confirmed with enter</b></li></ul>Other:<ul><li>Village region will be now remembered and redirected on reentry</li><li>Added management switch to change default workshop mode</li><li>Added management switch to prevent hunters stop taming</li></ul>"]},{VERSION:"v1.1.7",MESSAGE:["New Features:<ul><li><b>Added percentage auto trade</b></li></ul>Bug fixes:<ul><li><b>Fixed research progress resetting on load. Might not work for research already in the queue (finish or cancel and add again)</b></li></ul>Other:<ul><li>Added queue size display to research tab</li><li>Added pause 'p' and world map 'm' hotkeys</li><li>Improved pasture, field and orchard splitting and combining</li><li>Added management option to allow summer plowing</li><li>Added focus on input to some popup windows</li><li>Added settings option to keep auto trade on after reset</li><li>Added management option to disable auto trade logs</li><li>Changed skirmish win chance calculation</li><li>Added army bonus to each skirmish if army is at least twice the size of the enemy army</li><li>Reduce attack/defense of troop that won skirmish by 1 (tiredness)</li></ul>"]},{VERSION:"v1.1.8",MESSAGE:["Bug fixes:<ul><li><b>Fixed winter happiness from clothes not being applied</b></li></ul>Other:<ul><li>Soft reset renamed to abdication</li><li>World map regions ownership won't reset on abdications unless ordered to</li><li>Added map switch to show capitals, armies and spies</li></ul>"]},{VERSION:"v1.1.9",MESSAGE:["New Features:<ul><li><b>Added Gatherers camp (upgrades will come in future patches)</b></li><li><b>Added sickness mechanic. Freezing villagers will get sick.<br>Each sickness has a chance that sick villager will die.<br>Sick villagers cannot work<br>Herbal medicine reduces sickness time (and indirectly lethality)</b></li><li><b>Added research unlocking with Heritage Points</b></li></ul>Bug fixes:<ul><li><b>Fixed research queue entry canceling when selecting 'no' in confirmation window</b></li><li><b>Fixed header size when importing save with 2-line header on 1-line header state</b></li><li><b>Added Gatherers camp (upgrades will come in future patches)</b></li></ul>Other:<ul><li>Added heating efficiency descriptions to house building</li><li>Auto sort should now also consider manufacture recipe while sorting</li><li>Added log message when faith is full</li><li>Added header entries that list all resources of each category</li><li>Slightly changed buildings sizes</li></ul>"]},{VERSION:"v1.1.10",MESSAGE:["Bug fixes:<ul><li><b>Added Gatherers camp effect from sacred grove</b></li><li><b>Removed 'reset heritage' from abdication</b></li><li><b>Fixed auto sort buildings disappearing when sorting with manufacture without recipe</b></li><li><b>Gatherers camp local storage cleared when mode is changed</b></li><li><b>Fixed colonizing player owned regions would gain extra land</b></li><li><b>Fixed tavern not applying negative alcohol happiness when disabled</b></li><li><b>Fixed research unlocking blocked by buildings prerequisites even if those are fulfilled</b></li></ul>Other:<ul><li>Moved food priority section of management tab higher</li><li>Doubled amount of alcohol added to tavern (1 beer adds 2 beer in tavern, same for wine)</li><li>Increased amount of hay consumed by animals during winter by 50%</li></ul>"]},{VERSION:"v1.1.11",MESSAGE:["New Features:<ul><li><b>Added cloud(server) saving to settings window. Can only be triggered manually during testing period</b></li></ul>Bug fixes:<ul><li><b>QUICKFIX: fixed critical population related bug that could cause game being stuck in infinite loop</b></li><li><b>Fixed research spending HPs when prerequisites are not met</b></li><li><b>More fixes to auto sort function (for manufactures)</b></li></ul>Other:<ul><li>Loot will be sorted alphabetically</li></ul>"]},{VERSION:"v1.1.12",MESSAGE:["New Features:<ul><li><b>Added AI difficulty settings to options menu</b></li></ul>Bug fixes:<ul><li><b>QUICKFIX: Fixed report of defeated units showing for enemy colonisation</b></li><li><b>Fixed AI bug that caused AI daily code to be executed multiple times a day after abdication</b></li><li><b>Fixed server related popups</b></li><li><b>Fixed move army mission not to return from neutral regions</b></li><li><b>Fixed land, forest and mountains not being reset correctly on abdication</b></li><li><b>Fixed gatherers camps, their local storage can now store 1 of each item they can find in current mode.<br>Workers assigned here will work until local storage has all of the resources they can find</b></li></ul>Other:<ul><li>Slightly changed Troops stats</li><li>Militia can no longer be used to attack enemy</li><li>Reduced Spy troop gold cost</li><li>Work management buildings will start with output resources 'full' enabled</li><li>Reduced troops training time</li><li>Removed 50% progress start from gatherer when no resource is found</li></ul>"]},{VERSION:"v1.1.13",MESSAGE:["New Features:<ul><li><b>Added option to build multiple buildings at once</b></li></ul>Bug fixes:<ul><li><b>King of kingdom that has been conquered will no longer die</b></li><li><b>Fixed army effects not applying correctly to troops</b></li><li><b>Pasture will now add 'produced by' and 'used by' data to resources</b></li><li><b>Fixed some of the world map army sending bugs</b></li></ul>Other:<ul><li>World map display option will now be saved</li><li>Changed troops skirmish win calculation to linear function to benefit from army effects</li><li>Changed pig icon to one that looks more like a pig</li><li>Added new vegetable soup recipe that takes 1 berry and 1 mushroom (abdication required to enable)</li><li>Deep mine can now also mine stone</li></ul>"]},{VERSION:"v1.1.14",MESSAGE:["New Features:<ul><li><b>Added 'Royal Archives' royal perk</b></li><li><b>Added 'Barn' building for specialised storage of some crops<br>and a research project to unlock it</b></li><li><b>Added 'Golden fleece'</b></li><li><b>Tools can now be crafted also from copper, bronze and iron</b></li></ul>Other:<ul><li>'Stone' removed from tools names</li><li>Improved crafting recipe naming for some recipes</li></ul>"]},{VERSION:"v1.1.15",MESSAGE:["New Features:<ul><li><b>Added background music and new settings to control sound volume</b></li><li><b>Added different sound effect for invasion</b></li></ul>Bug fixes:<ul><li><b>Fixed one of the regions not being connected to the other one (Creurus land)</b></li></ul>Other:<ul><li>Each sound effect can be enabled/disabled in settings</li></ul>"]},{VERSION:"v1.1.16",MESSAGE:["New Features:<ul><li><b>Added Kitchen building and separate cooking order list in Crafting menu</b></li><li><b>Added Clay pit building</b></li><li><b>Added Tudor House building</b></li><li><b>Added clay, pottery and bricks resources</b></li></ul>Bug fixes:<ul><li><b>Research projects unlocked by royal perks will now correctly show as finished</b></li><li><b>Fixed adding research to queue over queue size</b></li></ul>Other:<ul><li>Reduced brushwood fuel crafting difficulty</li><li>Added Herbs and Berries to Barn storage options</li><li>Increased amount of alcohol added to tavern by 25%</li><li>Winery and Brewery now require pottery to build</li><li>Heating fuel used by housing building will now be affected by building size and heating efficiency</li><li>Bakery now needs to be researched separately after researching cooking</li><li>Increased food rations can now increase happiness more than regular rations <br>(1.5 rations up to 30 happiness and double rations up to 40 happiness)</li></ul>"]},{VERSION:"v1.1.17",MESSAGE:["Bug fixes:<ul><li><b>Digging will now unlock field region</b></li></ul>Other:<ul><li>Changed heritage points calculation to make it harder to acquire the more HPs player has</li><li>Abdicating through top right menu will now add RPs for wonder buildings</li><li>Pasture can breed animals into another pasture of the same type with free space for animals</li><li>Iron prospecting and processing technologies have been moved higher in the tech tree</li><li>Butchers will now acquire fur from animals</li><li>Planks can no longer be burned to heat houses</li><li>Added first winter tutorial</li><li>Improved village and forest tutorials</li></ul>"]},{VERSION:"v1.1.18",MESSAGE:["New Features:<ul><li><b>Added new food recipes: omelette and pie</b></li><li><b>Added new research for cooking recipes</b></li><li><b>Housing buildings can be disabled when there is no occupants inside</b></li></ul>Bug fixes:<ul><li><b>Fixed animals transforming to another animals when switching pasture type</b></li></ul>Other:<ul><li>Changed heritage points algorithm to allows for partial progress carry over</li><li>Decreased heritage points acquiring difficulty</li><li>Decreased land amount from heritage</li><li>Deep mine require ore deposits to recharge</li><li>Kitchen is now faster</li><li>Added resources list filter for empty and non active resources</li></ul>"]},{VERSION:"v1.1.19",MESSAGE:["New Features:<ul><li><b>Added troops speed stat that influence travel speed</b></li><li><b>It's now possible to cancel move, plunder and conquer missions before they reach their target</b></li><li><b>New troop: Horse archer</b></li></ul>Bug fixes:<ul><li><b>Ascension is no longer possible through abdication menu</b></li><li><b>Fixed heritage points xp calculation</b></li></ul>Other:<ul><li>Unite with the people now shows how much times it has been acquired</li><li>Added 'clear all' and 'select all' buttons to troops selection in mission window</li><li>AI will not attack player troops in neutral regions if diplomacy standing allows to</li><li>AI won't send militia to attack</li><li>AI returning army will try to conquer it's origin region if it has been conquered while army was on mission</li><li>AI capitals will keep being displayed after conquered <br>(this can prevent capitals from displaying at all before reset/abdication)</li><li>AI will try to reclaim their capital with high priority</li><li>AI and player missions can now evaluate paths to find shorter path during mission</li><li>AI and player missions will need to fight enemy if passing through enemy region</li></ul>"]},{VERSION:"v1.1.20",MESSAGE:["New Features:<ul><li><b>Housing buildings can be upgraded to the next tier building once it is unlocked</b></li></ul>Bug fixes:<ul><li><b>Added missing resource reservation entry for 'Tudor house' and moved kitchen reservation <br>to separate entry instead of included in crafting</b></li><li><b>Fixed headers entry text in effects management</b></li><li><b>Fixed strength calculation not including defender \"defense\" stat for first attacker troop</b></li><li><b>Fixed defense building mission from freezing the game</b></li></ul>Other:<ul><li>Doubled production output of brewery and winery</li><li>Reduced coins value of beer and wine</li></ul>"]},{VERSION:"v1.1.21",MESSAGE:["New Features:<ul><li><b>Added loggers camps building</b></li><li><b>Added simple summary page for buildings (management menu)</b></li><li><b>Added events engine with a few initial events (more to come in the future)</b></li></ul>Bug fixes:<ul><li><b>Fixed gatherer camps not to get stuck on resources</b></li><li><b>Fixed and improved win chance calculation</b></li></ul>Other:<ul><li>Gatherer camps will get small bonus chance to find resources that are not in the local storage already</li><li>Added log message after researching kitchen that says where to place orders</li><li>Improved butcher resources transport logic and  status reporting</li></ul>"]},{VERSION:"v1.1.22",MESSAGE:['New Features:<ul><li><b>Crafting to % percent of total storage</b></li></ul>Bug fixes:<ul><li><b>Added missing buff for loggers camp from Sacred grove</b></li><li><b>Fixed meteorite not to allow mining below 0</b></li><li><b>Fixed Unite with the people perk not displaying usages when RPs 100 or more</b></li></ul>Other:<ul><li>Added management option to disable "merchant arrived" logging</li></ul>']},{VERSION:"v1.1.23",MESSAGE:["Bug fixes:<ul><li><b>Blessing won't target Barn building anymore</b></li><li><b>'all on' button will now fill up partially staffed multi workers buildings</b></li></ul>Other:<ul><li>Changed basic tools icons (hammer, pickaxe, axe and shovel)</li><li>Bakery research now requires Scientific Method to be researched</li><li>Technical changes regarding buildings with multiple workers</li><li>Added 'reset' button to resource management window</li><li>Changed heritage menu display</li></ul>"]},{VERSION:"v1.1.24",MESSAGE:["New Features:<ul><li><b>It's now possible to dismiss army and recruits</b></li></ul>Bug fixes:<ul><li><b>Fixed Cooking % crafting order showing warnings for missing resources</b></li><li><b>Fixed gatherer camps not being able to collect more than 1 of each resource in each cycle</b></li><li><b>Changed ascension temple stages cost (and number of stages) to avoid icons overflow building box.<br>Total cost remains unchanged</b></li></ul>Other:<ul><li>Added management option to switch default gatherers mode</li><li>Changed Orchard status text to avoid confusion</li><li>Improved Butcher status reporting and added local storage to details list</li><li>Doubled pasture animals produce progress each tick</li><li>Nation name in world map will include Kongregate username by default</li></ul>"]},{VERSION:"v1.1.25",MESSAGE:["Bug fixes:<ul><li><b>Baby boom prayer will now also affect Tudor house</b></li></ul>Other:<ul><li>It's now possible to add crafting and cooking orders to the top of the list by shift clicking on the recipe</li><li>Added help tooltips to crafting and cooking tabs</li><li>Fixed text align to icons for food priority</li><li>Added upgrades to loggers camp</li><li>Added local storage display to loggers camp details</li><li>In build window header with filters and number of buildings will follow when buildings are scrolled</li></ul>"]},{VERSION:"v1.2.0",MESSAGE:["The Sea Update!New Features:<ul><li><b>Reworked sea region with many new buildings</b></li><li><b>New sea based events and missions</b></li><li><b>New tools resources</b></li><li><b>New Royal perk to unlock</b></li></ul>Bug fixes:<ul><li><b>Fixed deep mine mining below 0 resources</b></li><li><b>Changed recipes filters to also match recipe name</b></li></ul>Other:<ul><li>Changed missions to follow shortest path in terms of real distance and not number of regions 'hops'</li><li>Great Lighthouse RP bonus reduced but bonus effects added that affect some sea buildings and ships</li></ul>"]}],Jf=function(){function e(e,n,t,l,i){this.servicesService=e,this.modalService=n,this.logService=t,this.calendarService=l,this.tutorialsService=i,this.flags=[],this.gameState=0,this.abdicationLevel=0,this.gameStartedYear=1,this.devMessage=Number.MAX_SAFE_INTEGER,this.headerRowsSubject=new D,this.demolishReturn=ys.DEMOLITION_RETURN,this.servicesService.addService(zu.GAME,this)}return e.prototype.init=function(){var e=this;is.production?this.flags=[]:(this.flags=[],Object.values(_u).filter(function(e){return!isNaN(e)}).forEach(function(n){return e.flags.push(n)}))},e.prototype.load=function(e){this.flags=e.flags,this.gameState=e.gameState,this.demolishReturn=e.demolishReturn,this.devMessage=e.devMessage,this.abdicationLevel=9,this.gameStartedYear=void 0!==e.gameStartedYear?e.gameStartedYear:1},e.prototype.save=function(){return{flags:this.flags,gameState:this.gameState,demolishReturn:this.demolishReturn,devMessage:this.devMessage,abdicationLevel:this.abdicationLevel,gameStartedYear:this.gameStartedYear}},e.prototype.reset=function(e,n){this.flags=[],this.gameState=0,this.gameStartedYear=this.calendarService.getYear(),this.demolishReturn=ys.DEMOLITION_RETURN,this.init(),e&&(this.devMessage=Number.MAX_SAFE_INTEGER,this.abdicationLevel=0,this.gameStartedYear=1),n&&(this.abdicationLevel=0)},e.prototype.isEnabled=function(e){return this.flags.includes(e)},e.prototype.enable=function(e){this.flags.includes(e)||this.flags.push(e)},e.prototype.disable=function(e){this.flags.includes(e)&&this.flags.splice(this.flags.indexOf(e),1)},e.prototype.setGameState=function(e){this.gameState=e},e.prototype.getGameState=function(){return this.gameState},e.prototype.tick=function(e){0===this.getGameState()&&(this.displayWelcomeModal(),this.addStartBoost(),this.tutorialsService.checkRegionTutorial(Gu.VILLAGE),this.setGameState(1)),this.displayDevMessage()},e.prototype.displayWelcomeModal=function(){var e=this;this.modalService.info(rs);var n=this.modalService.registerForCloseModal().subscribe(function(){e.devMessage===Number.MAX_SAFE_INTEGER&&(e.devMessage=0),n.unsubscribe()})},e.prototype.displayDevMessage=function(){var e=Zf.length;this.devMessage<e&&(this.showDevNotes(),this.devMessage=e)},e.prototype.showDevNotes=function(){this.modalService.open(ju.CHANGELOG)},e.prototype.addStartBoost=function(){os&&this.servicesService.getService(zu.EFFECTS).addBuildingEffect(new Ku(os.name,os.building,os.effect,os.duration))},e.prototype.getAbdicationLevel=function(){return this.abdicationLevel},e.prototype.incrementAbdicationLevel=function(){this.abdicationLevel+=1,this.abdicationLevel>=7&&this.logService.mystical("As you finish last wonder building strange thoughts of ancient structures appear in your head. Who knows what purpose this building serve")},e.prototype.updateHeader=function(e){this.headerRowsSubject.next(e)},e.prototype.registerForHeaderRowsChange=function(){return this.headerRowsSubject.asObservable()},e.prototype.getGameStartedYear=function(){return this.gameStartedYear},e.ngInjectableDef=Oe({factory:function(){return new e(Ye(Vf),Ye(qf),Ye($f),Ye(jf),Ye(Xf))},token:e,providedIn:"root"}),e}(),em=function(){return function(e,n,t,l,i,r,o){this.perk=e,this.usages=n,this.maxUsages=t,this.description=l,this.cost=i,this.reset=r,this.effect=o}}(),nm=function(){function e(e,n,t){this.modalService=e,this.logService=n,this.servicesService=t,this.royalPoints=0,this.perks=[],this.goldenFish=!1,this.goldenEgg=!1,this.goldenApple=!1,this.goldenFleece=!1,this.servicesService.addService(zu.ROYAL,this),this.initPerks()}return e.prototype.initPerks=function(){var e=this;this.perks=[],Object.entries(As.PERKS).forEach(function(n){e.perks.push(new em(Au[n[0]],n[1].USAGES,n[1].MAX_USAGES,n[1].DESCRIPTION,n[1].COST,n[1].RESET,n[1].EFFECT))})},e.prototype.load=function(e){var n=this;this.royalPoints=e.royalPoints,this.goldenFish=void 0!==e.goldenFish&&e.goldenFish,this.goldenEgg=void 0!==e.goldenEgg&&e.goldenEgg,this.goldenApple=void 0!==e.goldenApple&&e.goldenApple,this.goldenFleece=void 0!==e.goldenFleece&&e.goldenFleece,e.progress.forEach(function(e){var t=n.perks.find(function(n){return n.perk===e[0]});t&&(t.usages=e[1])})},e.prototype.save=function(){var e=[];return this.perks.forEach(function(n){return e.push([n.perk,n.usages])}),{royalPoints:this.royalPoints,progress:e,goldenFish:this.goldenFish,goldenEgg:this.goldenEgg,goldenApple:this.goldenApple,goldenFleece:this.goldenFleece}},e.prototype.reset=function(e,n){var t=this;e?(this.royalPoints=0,this.initPerks()):this.perks.forEach(function(e){e.reset&&e.usages>0&&e.reset(t.servicesService,e)}),this.goldenFish=!1,this.goldenEgg=!1,this.goldenApple=!1,this.goldenFleece=!1},e.prototype.getRoyalPoints=function(){return this.royalPoints},e.prototype.buyRoyalPoints=function(){this.modalService.open(ju.ROYAL)},e.prototype.increaseRoyalPoints=function(e){this.royalPoints+=e},e.prototype.getRoyalPerks=function(){return this.perks},e.prototype.unlock=function(e){(0===e.maxUsages||e.usages<e.maxUsages)&&(this.royalPoints>=e.cost?this.perks.find(function(n){return e===n}).effect(this.servicesService,e):this.modalService.info("Not enough Royal Points!<br>"+e.cost+" RP required but only "+this.royalPoints+" available"))},e.prototype.unlockCallback=function(e){this.royalPoints-=Number(e.cost),e.usages+=1},e.prototype.isGoldenFishCaught=function(){return this.goldenFish},e.prototype.isGoldenEggLaid=function(){return this.goldenEgg},e.prototype.isGoldenApplePicked=function(){return this.goldenApple},e.prototype.isGoldenFleeceFound=function(){return this.goldenFleece},e.prototype.catchGoldenFish=function(){return!(this.goldenFish||!Qu.chance(As.GOLDEN_ITEMS.GOLDEN_FISH_CHANCE)||(this.increaseRoyalPoints(5),this.logService.mystical("You have caught a golden fish. You let it go and it granted you 5 Royal Points"),this.goldenFish=!0,0))},e.prototype.layGoldenEgg=function(){return!(this.goldenEgg||!Qu.chance(As.GOLDEN_ITEMS.GOLDEN_EGG_CHANCE)||(this.increaseRoyalPoints(5),this.logService.mystical("Your chicken laid golden egg. You decided to keep it and was granted 5 Royal Points"),this.goldenEgg=!0,0))},e.prototype.pickGoldenApple=function(){return!(this.goldenApple||!Qu.chance(As.GOLDEN_ITEMS.GOLDEN_APPLE_CHANCE)||(this.increaseRoyalPoints(5),this.logService.mystical("You picked golden apple in the orchard. You decided to keep it and was granted 5 Royal Points"),this.goldenApple=!0,0))},e.prototype.getGoldenFleece=function(){return!(this.goldenFleece||!Qu.chance(As.GOLDEN_ITEMS.GOLDEN_FLEECE_CHANCE)||(this.increaseRoyalPoints(5),this.logService.mystical("You got a golden fleece from one of your sheep. You decided to keep it and was granted 5 Royal Points"),this.goldenFleece=!0,0))},e.ngInjectableDef=Oe({factory:function(){return new e(Ye(qf),Ye($f),Ye(Vf))},token:e,providedIn:"root"}),e}(),tm=function(){function e(e,n,t,l){this.servicesService=e,this.modalService=n,this.royalService=t,this.logService=l,e.addService(zu.KONGREGATE,this);try{kongregateAPI.loadAPI(function(){window.kongregate=kongregateAPI.getAPI();var e=[],n=function(n){if(n.success){var l=e.find(function(e){return e[0]===n.id});l&&t.increaseRoyalPoints(l[1])}};window.kongregate.mtx.requestUserItemList(null,function(t){if(t.success)for(var l=0;l<t.data.length;l++){var i=t.data[l];e.push([i.id,Number(i.identifier.replace("rp_pack",""))]),window.kongregate.mtx.useItemInstance(i.id,n)}})})}catch(i){console.error(i)}}return e.prototype.isSet=function(){return!!window.kongregate},e.prototype.isAvailable=function(){return window.kongregate&&0!==this.getUserId()},e.prototype.submitStat=function(e,n){window.kongregate.stats.submit(e,n)},e.prototype.getUsername=function(){if(this.isSet())return window.kongregate.services.getUsername()},e.prototype.isGuest=function(){return!this.isSet()||window.kongregate.services.isGuest()},e.prototype.getUserId=function(){if(this.isSet())return window.kongregate.services.getUserId()},e.prototype.getGameAuthToken=function(){if(this.isSet())return window.kongregate.services.getGameAuthToken()},e.prototype.buyItem=function(e){var n=this.modalService,t=this.royalService,l=this.logService,i=[],r=function(e){if(e.success){var n=i.find(function(n){return n[0]===e.id});n&&(t.increaseRoyalPoints(n[1]),l.log("Added "+n[1]+" Royal Points"))}},o=function(e){if(e.success)for(var n=0;n<e.data.length;n++){var t=e.data[n];i.push([t.id,Number(t.identifier.replace("rp_pack",""))]),window.kongregate.mtx.useItemInstance(t.id,r)}};window.kongregate.mtx.purchaseItems([e],function(e){e.success&&(n.close(ju.ROYAL),window.kongregate.mtx.requestUserItemList(null,o))})},e.ngInjectableDef=Oe({factory:function(){return new e(Ye(Vf),Ye(qf),Ye(nm),Ye($f))},token:e,providedIn:"root"}),e}(),lm=function(){function e(e){this.happiness=ss.START_HAPPINESS,e.addService(zu.HAPPINESS,this)}return e.prototype.load=function(e){this.happiness=e.happiness},e.prototype.save=function(){return{happiness:this.happiness}},e.prototype.reset=function(e,n){this.happiness=ss.START_HAPPINESS},e.prototype.tick=function(e){},e.prototype.getHappiness=function(){return this.happiness},e.prototype.getHappinessEffect=function(){return this.happiness>=0&&this.happiness<=10?-10:this.happiness>10&&this.happiness<=40?5:this.happiness>40&&this.happiness<=60?10:this.happiness>60&&this.happiness<=90?20:this.happiness>90&&this.happiness<=100?50:void 0},e.prototype.increaseHappiness=function(e,n){void 0===n&&(n=100),this.happiness<n&&(this.happiness+=e,this.happiness>100&&(this.happiness=100))},e.prototype.decreaseHappiness=function(e,n){void 0===n&&(n=0),this.happiness>n&&(this.happiness-=e,this.happiness<0&&(this.happiness=0))},e.prototype.resetHappiness=function(){this.happiness=ss.START_HAPPINESS},e.ngInjectableDef=Oe({factory:function(){return new e(Ye(Vf))},token:e,providedIn:"root"}),e}(),im=function(){function e(e,n,t){void 0===t&&(t=0),this.userName=e,this.value=n,this.daysAgo=t}return e.prototype.incrementDaysAgo=function(){this.daysAgo+=1},e}(),rm=function(){function e(e,n,t){void 0===t&&(t=0),this.producerName=e,this.value=n,this.daysAgo=t}return e.prototype.incrementDaysAgo=function(){this.daysAgo+=1},e}(),om=function(){return function(e,n,t){void 0===n&&(n=0),void 0===t&&(t=0),this.sickness=e,this.progress=n,this.medicine=t}}(),um=function(e){var n="function"==typeof Symbol&&e[Symbol.iterator],t=0;return n?n.call(e):{next:function(){return e&&t>=e.length&&(e=void 0),{value:e&&e[t++],done:!e}}}},sm=function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var l,i,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(l=r.next()).done;)o.push(l.value)}catch(u){i={error:u}}finally{try{l&&!l.done&&(t=r.return)&&t.call(r)}finally{if(i)throw i.error}}return o},am=function(){function e(e,n,t,l,i,r,o,u){var s=this;this.logService=e,this.servicesService=n,this.gameService=t,this.modalService=l,this.optionsService=i,this.happinessService=r,this.calendarService=o,this.kongregateService=u,this.resources=new Map,this.resourcesUse=new Map,this.resourcesProduction=new Map,this.sick=[],this.populationScore=0,this.resourcesSubject=new D,this.callbacks=new Map,this.hideEmpty=!1,n.addService(zu.RESOURCES,this),this.init(),n.getService(zu.CALENDAR).registerForDayChange().subscribe(function(e){Array.from(s.resourcesUse.keys()).forEach(function(e){s.resourcesUse.set(e,s.resourcesUse.get(e).filter(function(e){return e.daysAgo<30})),s.resourcesUse.get(e).forEach(function(e){return e.incrementDaysAgo()}),0===s.resourcesUse.get(e).length&&s.resourcesUse.delete(e)}),Array.from(s.resourcesProduction.keys()).forEach(function(e){s.resourcesProduction.set(e,s.resourcesProduction.get(e).filter(function(e){return e.daysAgo<30})),s.resourcesProduction.get(e).forEach(function(e){return e.incrementDaysAgo()}),0===s.resourcesProduction.get(e).length&&s.resourcesProduction.delete(e)})})}return e.prototype.init=function(){var e=this,n=new Gf;Rs.getResources().forEach(function(t){e.resources.set(Iu[t[0]],n.forResource(Iu[t[0]]).withName(Vu.prepareResourceName(Iu[t[0]])).withAmount(void 0!==t[1].AMOUNT?t[1].AMOUNT:Rs.DEFAULT_AMOUNT).withLimit(void 0!==t[1].LIMIT?t[1].LIMIT:Rs.DEFAULT_LIMIT).withResourceTypes(t[1].TYPES).withResourceType(Mu.ALL).withVisible(void 0!==t[1].VISIBLE?t[1].VISIBLE:Rs.DEFAULT_VISIBLE).withHighlighted(void 0!==t[1].HIGHLIGHTED?t[1].HIGHLIGHTED:Rs.DEFAULT_HIGHLIGHTED).build())}),this.people=1,this.workers=0,this.populationCap=1,is.production||this.resources.forEach(function(e){return e.visible=!0})},e.prototype.getResource=function(e){return this.resources.get(e)},e.prototype.makeVisible=function(e){this.resources.get(e).visible=!0},e.prototype.increaseResource=function(e,n,t,l){var i,r;if(void 0===l&&(l=!1),e===Iu.FOOD||e===Iu.NOTHING)return!0;var o=this.resources.get(e);if(o.getResourceTypes().includes(Mu.ANIMAL)){var u=this.servicesService.getServiceByRegion(Gu.FIELD).getBuildings().filter(function(e){return e.getBuildingType()===wu.PASTURE}).map(function(e){return e}).filter(function(n){return n.getResourceType()===e}),s=0;if(u.forEach(function(e){return s+=e.getMaxAnimals()-e.getAnimals()}),n>s&&!l)return!1;for(l&&n>s&&(n=s);n>0&&s>0;)try{for(var a=um(u),c=a.next();!c.done;c=a.next()){for(var p=c.value;p.getAnimals()<p.getMaxAnimals()&&n>0;)p.increaseAnimal(1),n-=1,this.addResourceProduction(e,t,1),s-=1;if(0===n)return!0}}catch(h){i={error:h}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return!0}return!(!l&&o.amount+n>o.limit||(o.amount+=n,this.addResourceProduction(e,t,n),o.amount>o.limit&&(o.amount=o.limit),this.resourcesSubject.next(this.resources),o.isVisible()||(o.toggleVisible(),this.logService.log("New resource discovered: "+Vu.prepareResourceName(e))),0))},e.prototype.decreaseResource=function(e,n,t,l){var i,r;if(void 0===l&&(l=!1),e===Iu.FOOD)return this.getFoodValue(t,l)>=n&&(this.getFood(n,t,l),!0);var o=this.resources.get(e);if(o.getResourceTypes().includes(Mu.ANIMAL)){var u=this.servicesService.getServiceByRegion(Gu.FIELD).getBuildings().filter(function(e){return e.getBuildingType()===wu.PASTURE}).map(function(e){return e}).filter(function(n){return n.getResourceType()===e&&n.getAnimals()>0}),s=0;if(u.forEach(function(e){return s+=e.getAnimals()}),s>=n){try{for(var a=um(u),c=a.next();!c.done;c=a.next()){for(var p=c.value;n>0&&p.getAnimals()>0;)p.decreaseAnimal(1),this.addResourceUse(e,t,1),n-=1;if(0===n)return!0}}catch(h){i={error:h}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return!0}return!1}return 0!==this.hasResource(e,n,t,l)?(this.resourcesSubject.next(this.resources),!1):(o.amount-=n,this.addResourceUse(e,t,n),this.resourcesSubject.next(this.resources),!0)},e.prototype.hasResource=function(e,n,t,l){if(void 0===l&&(l=!1),e===Iu.FOOD)return this.getFoodValue(t,l)>=n?0:n-this.getFoodValue(t,l);var i=this.resources.get(e);return l?i.amount>=n?0:n-this.resources.get(e).amount:i.amount-i.options.getReservedAmountBySource(t,i,l)>=n?0:n-(i.amount-i.options.getReservedAmountBySource(t,i,l))},e.prototype.hasLimit=function(e){return this.resources.get(e).amount<this.resources.get(e).limit},e.prototype.decreaseResources=function(e,n,t,l,i){var r,o,u,s;void 0===t&&(t=!1),void 0===l&&(l=1),void 0===i&&(i=!1);var a="",c=!0;try{for(var p=um(Array.from(e)),h=p.next();!h.done;h=p.next()){var d=sm(h.value,2),g=this.hasResource(v=d[0],d[1]*l,n,t);0!==g&&(a+="Missing "+g+" "+Vu.prepareResourceName(v)+"<br>",c=!1)}}catch(E){r={error:E}}finally{try{h&&!h.done&&(o=p.return)&&o.call(p)}finally{if(r)throw r.error}}if(!c)return!i&&(this.modalService.info(a),!1);try{for(var f=um(Array.from(e)),m=f.next();!m.done;m=f.next()){var v,S=sm(m.value,2);this.decreaseResource(v=S[0],S[1]*l,n,t)}}catch(y){u={error:y}}finally{try{m&&!m.done&&(s=f.return)&&s.call(f)}finally{if(u)throw u.error}}return!0},e.prototype.hasResources=function(e,n,t,l){var i,r;void 0===t&&(t=1),void 0===l&&(l=!1);var o=!0;try{for(var u=um(Array.from(e)),s=u.next();!s.done;s=u.next()){var a=sm(s.value,2);0!==this.hasResource(a[0],a[1]*t,n,l)&&(o=!1)}}catch(c){i={error:c}}finally{try{s&&!s.done&&(r=u.return)&&r.call(u)}finally{if(i)throw i.error}}return o},e.prototype.increaseLimit=function(e,n){this.resources.forEach(function(t){t.getResourceTypes().includes(e)&&!t.getResourceTypes().includes(Mu.ANIMAL)&&(t.limit+=n)})},e.prototype.increaseResourceLimit=function(e,n){this.resources.get(e).limit+=n},e.prototype.decreaseLimit=function(e,n){this.resources.forEach(function(t){t.getResourceTypes().includes(e)&&!t.getResourceTypes().includes(Mu.ANIMAL)&&(t.limit-=n,t.limit<0&&(t.limit=0,console.error(Qf.ERROR_2,t.getResource(),t.limit)),t.amount>t.limit&&(t.amount=t.limit))})},e.prototype.decreaseResourceLimit=function(e,n){var t=this.resources.get(e);t.limit-=n,t.limit<0&&(t.limit=0,console.error(Qf.ERROR_2,t.getResource(),t.limit)),t.amount>t.limit&&(t.amount=t.limit)},e.prototype.getResources=function(){return this.resources},e.prototype.save=function(){var e="[";return this.resources.forEach(function(n){e+="["+n.resource+","+JSON.stringify(n)+"],"}),{resources:e=e.slice(0,-1)+"]",people:this.people,workers:this.workers,sick:this.sick,populationCap:this.populationCap}},e.prototype.load=function(e){var n=this;JSON.parse(e.resources).forEach(function(e){if(n.resources.get(e[0]).amount=e[1].amount,n.resources.get(e[0]).limit=e[1].limit,n.resources.get(e[0]).visible=e[1].visible,n.resources.get(e[0]).highlighted=e[1].highlighted,n.resources.get(e[0]).prioritise=e[1].prioritise,e[1].reserved)n.resources.get(e[0]).options=new Uf(n.resources.get(e[0]).resource,e[1].reserved);else if(e[1].options){var t=[],l=new Ff;e[1].options.consumers.forEach(function(e){t.push(new Lf(e.name,e.enabled,e.reserved,void 0!==e.reservedPercent&&e.reservedPercent))}),t.find(function(e){return"Paper mill"===e.name})||t.push(new Lf("Paper mill")),t.find(function(e){return"Tudor house"===e.name})||t.push(new Lf("Tudor house")),t.find(function(e){return"Kitchen"===e.name})||t.push(new Lf("Kitchen")),e[1].options.autoTrade&&(l.autoSellEnabled=e[1].options.autoTrade.autoSellEnabled,l.autoSellAmount=e[1].options.autoTrade.autoSellAmount,l.autoSellOrder=e[1].options.autoTrade.autoSellOrder,l.autoBuyEnabled=e[1].options.autoTrade.autoBuyEnabled,l.autoBuyAmount=e[1].options.autoTrade.autoBuyAmount,l.autoBuyOrder=e[1].options.autoTrade.autoBuyOrder,void 0!==e[1].options.autoTrade.autoSellPercentage?(l.autoSellPercentage=e[1].options.autoTrade.autoSellPercentage,l.autoBuyPercentage=e[1].options.autoTrade.autoBuyPercentage):(l.autoSellPercentage=!1,l.autoBuyPercentage=!1)),t=t.sort(function(e,n){return e.name.localeCompare(n.name)}),n.resources.get(e[0]).options=new Uf(e[1].options.resource,e[1].options.reserve,t,void 0!==e[1].options.reservePercent&&e[1].options.reservePercent,l)}else n.resources.get(e[0]).options=new Uf(n.resources.get(e[0]).resource)}),this.sick=void 0!==e.sick?e.sick:[],this.people=e.people,this.workers=e.workers,this.populationCap=e.populationCap,this.resourcesSubject.next(this.resources)},e.prototype.reset=function(e,n){var t=this;if(!e){var l=this.servicesService.getService(zu.HERITAGE).calculateHeritagePoints(!0);l.hp>0&&this.servicesService.getService(zu.HERITAGE).increaseHeritagePoints(l.hp),l.xp>0&&this.servicesService.getService(zu.HERITAGE).increaseXP(l.xp)}var i=this.resources;this.resources=new Map,this.people=1,this.workers=0,this.populationCap=1,this.sick=[],this.populationScore=0,this.resourcesUse=new Map,this.resourcesProduction=new Map,this.init(),e||Array.from(this.resources.values()).forEach(function(e){t.optionsService.getOption(Wf.KEEP_RESERVATION_SETTINGS_ON_RESET)?e.options=i.get(e.resource).options:(e.options=i.get(e.resource).options,e.options.reservePercent=!1,e.options.reserve=0,e.options.consumers.forEach(function(e){return e.enabled=!1})),t.optionsService.getOption(Wf.KEEP_AUTO_TRADE_ON_RESET)||(e.options.autoTrade.autoSellEnabled=!1,e.options.autoTrade.autoBuyEnabled=!1)}),this.resourcesSubject.next(this.resources)},e.prototype.registerForResourcesChange=function(){return this.resourcesSubject.asObservable()},e.prototype.createPeople=function(e){this.people+=e},e.prototype.removePeople=function(e){if(this.people-=e,this.people-e<0)for(;this.people<0;)if(this.sick.length>0)this.sick.shift(),this.people+=1;else{var n=Math.floor(Math.random()*this.callbacks.size);Array.from(this.callbacks.values())[n].fireRandomWorker()}},e.prototype.hireWorker=function(){return this.people>0&&(this.people-=1,this.workers+=1,!0)},e.prototype.fireWorker=function(e){void 0===e&&(e=1),0===this.workers&&console.error(Qf.ERROR_3),this.workers-=e,this.people+=e},e.prototype.getPeople=function(){return this.people},e.prototype.getWorkers=function(){return this.workers},e.prototype.getPopulationCap=function(){return this.populationCap},e.prototype.increasePopulationCap=function(e){return this.populationCap+=e},e.prototype.decreasePopulationCap=function(e){return this.populationCap-e<0&&console.error(Qf.ERROR_4),this.populationCap-=e},e.prototype.addCallback=function(e,n){this.callbacks.set(n,e)},e.prototype.tick=function(e){var n=this;this.kongregateService.isAvailable()&&this.getTotalPeople()>this.populationScore&&(this.populationScore=this.getTotalPeople(),this.kongregateService.submitStat("Population",this.populationScore)),1===this.getTotalPeople()&&this.happinessService.resetHappiness(),this.people+this.workers>=ys.VILLAGE.SHRINE.POPULATION&&(this.gameService.isEnabled(_u.SHRINE)||(this.gameService.enable(_u.SHRINE),this.logService.success("Shrine unlocked"))),this.people+this.workers>=ys.VILLAGE.CHURCH.POPULATION&&(this.gameService.isEnabled(_u.CHURCH)||(this.gameService.enable(_u.CHURCH),this.logService.success("Church unlocked"))),this.sick=this.sick.filter(function(e){return!Qu.chance(_s.getSickness(e.sickness).LETHALITY/100/(10*_s.getSickness(e.sickness).DURATION))||(n.callbacks.get(Gu.VILLAGE).removeRecruit(1,!1),n.servicesService.getService(zu.MANAGEMENT).getLogSickness()&&n.logService.warning("Villager died from "+Vu.prepareSicknessName(e.sickness)),!1)}),this.sick.forEach(function(e){0===e.medicine&&n.decreaseResource(Iu.HERBAL_MEDICINE,1,"Sickness")&&(e.medicine=1),e.progress+=e.medicine>0?100/(10*_s.getSickness(e.sickness).DURATION)*2:100/(10*_s.getSickness(e.sickness).DURATION)}),this.sick.forEach(function(e){e.progress>=100&&(n.people+=1)}),this.sick=this.sick.filter(function(e){return e.progress<100})},e.prototype.getPriorityFood=function(e,n){var t=this;void 0===n&&(n=!1);var l=this.servicesService.getService(zu.MANAGEMENT).getFoodPriority();for(var i in l){var r=l[i].filter(function(l){return t.getAvailableAmount(l,e,n)>0});if(r.length>0&&r.length>0){var o=r[Math.floor(Math.random()*r.length)];return this.decreaseResource(o,1,e),Rs.getResource(o).POWER}}return 0},e.prototype.getFood=function(e,n,t){for(void 0===t&&(t=!1);e>0;)e-=this.getPriorityFood(n,t)},e.prototype.getFoodValue=function(e,n){void 0===n&&(n=!1);var t=0;return n?Array.from(this.resources.entries()).filter(function(e){return e[1].resourceTypes.includes(Mu.CONSUMABLE)&&e[1].amount>0}).forEach(function(e){return t+=Rs.getResource(e[0]).POWER*e[1].amount}):Array.from(this.resources.entries()).filter(function(t){return t[1].resourceTypes.includes(Mu.CONSUMABLE)&&t[1].amount-t[1].options.getReservedAmountBySource(e,t[1],n)>0}).forEach(function(e){return t+=Rs.getResource(e[0]).POWER*(e[1].amount-e[1].reserved)}),t},e.prototype.getResourceTypes=function(e){return this.resources.get(e).getResourceTypes()},e.prototype.increaseResources=function(e,n,t){var l,i;void 0===t&&(t=!1);try{for(var r=um(Array.from(e)),o=r.next();!o.done;o=r.next()){var u=sm(o.value,2);this.increaseResource(u[0],u[1],n,t)}}catch(s){l={error:s}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(l)throw l.error}}},e.prototype.removeRecruit=function(e){return this.people>=e&&this.callbacks.get(Gu.VILLAGE).removeRecruit(e)},e.prototype.getFuel=function(e){var n,t,l=Rs.getResourcesByType(Mu.FUEL).sort(function(e,n){return e[1].FUEL_PRIORITY-n[1].FUEL_PRIORITY});try{for(var i=um(l),r=i.next();!r.done;r=i.next()){var o=r.value;if(this.decreaseResource(Iu[String(o[0])],1,e))return o[1].POWER}}catch(u){n={error:u}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(n)throw n.error}}return 0},e.prototype.getTotalPeople=function(){return this.people+this.workers+this.sick.length},e.prototype.getResourcesValue=function(){var e=0;return this.resources.forEach(function(n){n.amount>0&&(e+=Rs.getResource(n.resource).TRADE_VALUE*n.getAmount())}),e},e.prototype.getAvailableAmount=function(e,n,t){void 0===t&&(t=!1);var l=this.resources.get(e),i=l.amount-l.options.getReservedAmountBySource(n,l,t);return i<0&&(i=0),i},e.prototype.updateAnimals=function(){var e=Array.from(this.getResources().values()).filter(function(e){return e.getResourceTypes().includes(Mu.ANIMAL)}),n=this.servicesService.getServiceByRegion(Gu.FIELD).getBuildings().filter(function(e){return e.getBuildingType()===wu.PASTURE}).map(function(e){return e});e.forEach(function(e){var t=0,l=0;n.filter(function(n){return n.getResourceType()===e.resource}).forEach(function(e){t+=e.getAnimals(),l+=e.getMaxAnimals()}),e.amount=t,e.limit=l})},e.prototype.getLimit=function(e){var n=this.resources.get(e);return n.limit-n.amount},e.prototype.addResourceUse=function(e,n,t){this.resourcesUse.has(e)?this.resourcesUse.get(e).push(new im(n,t)):this.resourcesUse.set(e,[new im(n,t)])},e.prototype.addResourceProduction=function(e,n,t){this.resourcesProduction.has(e)?this.resourcesProduction.get(e).push(new rm(n,t)):this.resourcesProduction.set(e,[new rm(n,t)])},e.prototype.getResourceUses=function(e){return this.resourcesUse.get(e)},e.prototype.getResourceProductions=function(e){return this.resourcesProduction.get(e)},e.prototype.getResourcesByType=function(e){return Array.from(this.resources.values()).filter(function(n){return n.getResourceTypes().includes(e)})},e.prototype.getFuelValue=function(){var e=0;return Array.from(this.resources.values()).filter(function(e){return e.getResourceTypes().includes(Mu.FUEL)}).forEach(function(n){return e+=n.amount*Rs.getResource(n.resource).POWER}),e},e.prototype.checkResourcesBeforeWinter=function(){160*this.servicesService.getService(zu.VILLAGE).getHousingBuildings().length>this.getFuelValue()&&this.logService.warning("We might not have enough available resources to heat our homes during winter!")},e.prototype.getAverageNutritionProduction=function(){var e=this,n=0,t=1;return this.getResourcesByType(Mu.CONSUMABLE).forEach(function(l){var i=e.getResourceProductions(l.resource);i&&i.forEach(function(e){e.daysAgo>t&&(t=e.daysAgo),n+=e.value*Rs.getResource(l.resource).POWER})}),n/t},e.prototype.addSick=function(e){if(this.people-=1,this.sick.push(new om(e)),this.people-1<0)for(;this.people<0;){var n=Math.floor(Math.random()*this.callbacks.size);Array.from(this.callbacks.values())[n].fireRandomWorker()}},e.prototype.getSick=function(){return this.sick},e.prototype.addAnimalProducedData=function(e,n,t){this.addResourceProduction(e,n,t)},e.prototype.addAnimalUsedData=function(e,n,t){this.addResourceUse(e,n,t)},e.prototype.getHideEmpty=function(){return this.hideEmpty},e.prototype.toggleHideEmpty=function(){this.hideEmpty=!this.hideEmpty},e.ngInjectableDef=Oe({factory:function(){return new e(Ye($f),Ye(Vf),Ye(Jf),Ye(qf),Ye(zf),Ye(lm),Ye(jf),Ye(tm))},token:e,providedIn:"root"}),e}(),cm=function(){function e(e,n,t,l){this.resourcesService=e,this.modalService=n,this.tutorialService=t,this.gameService=l,this.filterText=""}return e.prototype.ngOnInit=function(){var e=this;this.categories=Object.keys(Mu),this.categories=[Mu[Mu.RAW],Mu[Mu.PROCESSED],Mu[Mu.FOOD],Mu[Mu.TOOLS]],this.resources=this.resourcesService.getResources(),this.resourcesService.registerForResourcesChange().subscribe(function(n){e.resources=n}),this.tutorialService.checkResourcesTutorial()},e.prototype.getResourcesList=function(e){var n=this;return Array.from(this.resourcesService.getResources().entries()).filter(function(t){return t[1].getResourceTypes().includes(Mu[e])&&Vu.prepareResourceName(t[1].getResource()).toLowerCase().includes(n.filterText)}).filter(function(e){return!n.resourcesService.getHideEmpty()||0!==e[1].amount||!!n.resourcesService.getResourceProductions(e[0])&&!!n.resourcesService.getResourceUses(e[0])}).map(function(e){return e[1]})},e.prototype.openManageModal=function(e){this.modalService.open(ju.RESOURCE_MANAGEMENT),this.modalService.setResourceOptions(e.options);var n=this.modalService.registerForResourceOptionsResponse().subscribe(function(t){n.unsubscribe(),t&&(e.options=t)})},e.prototype.isMarketEnabled=function(){return this.gameService.isEnabled(_u.MARKET)},e.prototype.highlightResource=function(e){e.highlighted?e.highlighted=!1:(Array.from(this.resourcesService.getResources().values()).filter(function(e){return e.highlighted}),e.highlighted=!0)},e.prototype.isNotCoins=function(e){return e.resource!==Iu.COINS},e.prototype.isDev=function(){return!is.production},e.prototype.addDevRes=function(e){this.resourcesService.increaseResource(e,e===Iu.COINS?100:5,"Dev",!0)},e.prototype.getResourceDescription=function(e){var n="";return e.hasResourceType(Mu.CONSUMABLE)&&(n+="nutrition: "+Rs.getResource(e.resource).POWER),e.hasResourceType(Mu.FUEL)&&(n+="heating energy: "+Rs.getResource(e.resource).POWER),""!==n?"<hr>"+n:n},e.prototype.getResourceConsumers=function(e){var n="",t="<b>used by:</b><br>",l=this.resourcesService.getResourceUses(e.resource),i=[];l&&(l.slice().forEach(function(e){var n=i.find(function(n){return n[0]===e.userName});n?n[1]+=e.value:i.push([e.userName,e.value])}),i.sort(function(e,n){return e[0].localeCompare(n[0])}).forEach(function(e){t+=e[0]+": "+e[1]+"<br>"})),"<b>used by:</b><br>"!==t&&(n+="<hr>"+t),t="<b>produced by:</b><br>";var r=this.resourcesService.getResourceProductions(e.resource),o=[];return r&&(r.slice().forEach(function(e){var n=o.find(function(n){return n[0]===e.producerName});n?n[1]+=e.value:o.push([e.producerName,e.value])}),o.sort(function(e,n){return e[0].localeCompare(n[0])}).forEach(function(e){t+=e[0]+": "+e[1]+"<br>"})),"<b>produced by:</b><br>"!==t&&(n+="<hr>"+t),n},e}(),pm=rl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:100%;max-height:100%;font-size:1em;margin:.7%;text-align:center}#resourcesTitle[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;font-size:1.3em;font-weight:bolder;vertical-align:middle}#center[_ngcontent-%COMP%]{-webkit-box-flex:10;flex:10 0 auto}.side[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 36%;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;font-size:.6em;width:15%;margin:3px;display:inline-block}#categories[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;border:1px solid #000;height:94.8%;text-align:center}.category[_ngcontent-%COMP%]{text-align:left;-webkit-box-flex:1;flex:1 0 0;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;border:1px solid #000}.resource[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;margin-left:3px;width:100%;vertical-align:middle}.title[_ngcontent-%COMP%]{text-align:center;padding:2px 0;width:100%;font-weight:bolder;font-size:1em;margin-bottom:5px;display:block;border-bottom:1px solid #000}.highlight[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1 0 auto;text-align:right;margin-right:3px}.highlight[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}app-icon[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 auto;margin-right:3px}.manage[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:22px;width:22px}.greyout[_ngcontent-%COMP%]{opacity:.3}.prioritise[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:22px;width:22px}.full[_ngcontent-%COMP%]{font-weight:600}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center}hr[_ngcontent-%COMP%]{border-color:#000}.center[_ngcontent-%COMP%]{text-align:center}"]],data:{}});function hm(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.addDevRes(e.parent.parent.context.$implicit.resource)&&l),l},null,null)),(e()(),fo(-1,null,["+"]))],null,null)}function dm(e){return So(0,[(e()(),eo(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),fo(1,null,["","/",""]))],null,function(e,n){var t=n.parent.parent.context.$implicit.getAmount(),l=n.parent.parent.context.$implicit.getLimit();e(n,1,0,t,l)})}function gm(e){return So(0,[(e()(),eo(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),fo(1,null,["","/",""]))],null,function(e,n){var t=n.parent.parent.context.$implicit.getAmount(),l=n.parent.parent.context.$implicit.getLimit();e(n,1,0,t,l)})}function fm(e){return So(0,[(e()(),eo(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),fo(1,null,["",""]))],null,function(e,n){var t=n.parent.parent.context.$implicit.getAmount();e(n,1,0,t)})}function mm(e){return So(0,[(e()(),eo(0,0,null,null,5,"span",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,4,"span",[["class","prioritise"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=0!=(e.parent.parent.context.$implicit.prioritise=!e.parent.parent.context.$implicit.prioritise)&&l),l},null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(3,278528,null,0,Js,[Xs],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),ho(4,{greyout:0}),(e()(),eo(5,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/trade.svg"],["title","prioritise on market"]],null,null,null,null,null))],function(e,n){var t=e(n,4,0,!n.parent.parent.context.$implicit.prioritise);e(n,3,0,"prioritise",t)},null)}function vm(e){return So(0,[(e()(),eo(0,0,null,null,31,"div",[["class","resource"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,17,"span",[["class","icon"]],null,null,null,null,null)),(e()(),eo(2,0,null,null,8,"span",[["appTooltip",""],["class","tooltip"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==ii(e,3).onmousemove(t)&&l),l},null,null)),vi(3,16384,null,0,Pg,[],{elementId:[0,"elementId"]},null),(e()(),eo(4,0,null,null,4,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),eo(5,0,null,null,1,"div",[["class","center"]],null,null,null,null,null)),(e()(),fo(6,null,["",""])),(e()(),eo(7,0,null,null,0,"div",[["class","center"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),eo(8,0,null,null,0,"div",[["class","center"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),eo(9,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(10,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),Jr(16777216,null,null,1,null,hm)),vi(12,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,dm)),vi(14,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,gm)),vi(16,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,fm)),vi(18,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(19,0,null,null,12,"span",[["class","highlight"]],null,null,null,null,null)),(e()(),eo(20,0,null,null,4,"span",[["class","manage"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.openManageModal(e.parent.context.$implicit)&&l),l},null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(22,278528,null,0,Js,[Xs],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),ho(23,{greyout:0}),(e()(),eo(24,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/manage.svg"],["title","management"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,mm)),vi(26,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(27,0,null,null,4,"span",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.highlightResource(e.parent.context.$implicit)&&l),l},null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(29,278528,null,0,Js,[Xs],{ngClass:[0,"ngClass"]},null),ho(30,{greyout:0}),(e()(),eo(31,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/eye.svg"],["title","add to header"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,3,0,n.parent.context.$implicit.resource);var l=n.parent.context.$implicit.getName();e(n,10,0,l,"resources",""),e(n,12,0,t.isDev());var i=n.parent.context.$implicit.getAmount()===n.parent.context.$implicit.getLimit();e(n,14,0,i);var r=t.isNotCoins(n.parent.context.$implicit)&&n.parent.context.$implicit.getAmount()!==n.parent.context.$implicit.getLimit();e(n,16,0,r),e(n,18,0,!t.isNotCoins(n.parent.context.$implicit));var o=e(n,23,0,!n.parent.context.$implicit.options.isUsed());e(n,22,0,"manage",o),e(n,26,0,t.isMarketEnabled());var u=e(n,30,0,!n.parent.context.$implicit.highlighted);e(n,29,0,u)},function(e,n){var t=n.component;e(n,4,0,xl(1,"",n.parent.context.$implicit.resource,"")),e(n,6,0,n.parent.context.$implicit.name),e(n,7,0,t.getResourceDescription(n.parent.context.$implicit)),e(n,8,0,t.getResourceConsumers(n.parent.context.$implicit))})}function Sm(e){return So(0,[(e()(),eo(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,vm)),vi(2,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,2,0,n.context.$implicit.visible)},null)}function Em(e){return So(0,[(e()(),eo(0,0,null,null,4,"div",[["class","category"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),fo(2,null,["",""])),(e()(),Jr(16777216,null,null,1,null,Sm)),vi(4,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,4,0,n.component.getResourcesList(n.context.$implicit))},function(e,n){e(n,2,0,n.context.$implicit)})}function ym(e){return So(0,[(e()(),eo(0,0,null,null,19,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,15,"span",[["id","resourcesTitle"]],null,null,null,null,null)),(e()(),eo(2,0,null,null,0,"span",[["class","side"]],null,null,null,null,null)),(e()(),eo(3,0,null,null,1,"span",[["id","center"]],null,null,null,null,null)),(e()(),fo(-1,null,["Resources"])),(e()(),eo(5,0,null,null,11,"span",[["class","side"]],null,null,null,null,null)),(e()(),eo(6,0,null,null,3,"span",[["class","inline"]],null,null,null,null,null)),(e()(),eo(7,0,null,null,1,"label",[["for","hideEmpty"]],null,null,null,null,null)),(e()(),fo(-1,null,["hide empty"])),(e()(),eo(9,0,null,null,0,"input",[["id","hideEmpty"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.resourcesService.toggleHideEmpty()&&l),l},null,null)),(e()(),eo(10,0,null,null,6,"span",[["class","inline"]],null,null,null,null,null)),(e()(),eo(11,0,null,null,5,"input",[["placeholder","filter"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,12)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,12).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,12)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,12)._compositionEnd(t.target.value)&&l),"ngModelChange"===n&&(l=!1!==(i.filterText=t)&&l),l},null,null)),vi(12,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),Ei(1024,null,Lg,function(e){return[e]},[Hg]),vi(14,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(16,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(17,0,null,null,2,"div",[["id","categories"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,Em)),vi(19,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,14,0,t.filterText),e(n,19,0,t.categories)},function(e,n){e(n,9,0,n.component.resourcesService.getHideEmpty()),e(n,11,0,ii(n,16).ngClassUntouched,ii(n,16).ngClassTouched,ii(n,16).ngClassPristine,ii(n,16).ngClassDirty,ii(n,16).ngClassValid,ii(n,16).ngClassInvalid,ii(n,16).ngClassPending)})}function Rm(e){return So(0,[(e()(),eo(0,0,null,null,1,"app-resources",[],null,null,null,ym,pm)),vi(1,114688,null,0,cm,[am,qf,Xf,Jf],null,null)],function(e,n){e(n,1,0)},null)}var bm,Om=jl("app-resources",cm,Rm,{},{},[]),Tm=function(){function e(e,n,t,l,i,r,o){void 0===o&&(o=!1),this.canceled=!1,this.id=e,this.title=n,this.resource=t,this.amount=l,this.cost=i,this.craftingDifficulty=r,this.available=o}return e.prototype.getResource=function(){return this.resource},e}(),Cm=function(){function e(e,n){this.servicesService=e,this.resourcesService=n,this.recipes=[],e.addService(zu.RECIPE,this),this.initRecipes()}return e.prototype.initRecipes=function(){var e=this;this.recipes=[],Object.entries(Cs.RECIPES).forEach(function(n){var t=new Map;n[1].COST.forEach(function(e){return t.set(e.resource,e.amount)}),e.recipes.push(new Tm(Yu[n[0]],void 0!==n[1].NAME?n[1].NAME:Vu.prepareResourceName(n[1].RESOURCE),n[1].RESOURCE,n[1].AMOUNT?n[1].AMOUNT:1,t,n[1].CRAFTING,!1))}),this.recipes.find(function(e){return e.id===Yu.PLANK}).available=!0,this.recipes.find(function(e){return e.id===Yu.CUT_STONE}).available=!0,is.production||Object.values(Yu).filter(function(e){return!isNaN(e)}).forEach(function(n){return e.enable(n)})},e.prototype.getRecipes=function(){return this.recipes.filter(function(e){return e.available})},e.prototype.getCookingRecipes=function(){var e=this;return this.recipes.filter(function(n){return n.available&&e.resourcesService.getResource(n.resource).getResourceTypes().includes(Mu.CONSUMABLE)})},e.prototype.getRecipeById=function(e){return this.recipes.find(function(n){return n.id===e})},e.prototype.enable=function(e){var n=this,t=this.recipes.find(function(n){return n.id===e});this.resourcesService.makeVisible(t.getResource()),Array.from(t.cost.keys()).forEach(function(e){return n.resourcesService.makeVisible(e)}),t.available=!0},e.prototype.disable=function(e){var n=this.recipes.find(function(n){return n.id===e});this.resourcesService.makeVisible(n.getResource()),n.available=!1},e.prototype.load=function(e){var n=this;this.initRecipes(),e.recipes.forEach(function(e){var t=n.recipes.find(function(n){return n.id===e});t&&(t.available=!0)})},e.prototype.save=function(){return{recipes:this.recipes.filter(function(e){return e.available}).map(function(e){return e.id})}},e.prototype.reset=function(e,n){this.initRecipes()},e.ngInjectableDef=Oe({factory:function(){return new e(Ye(Vf),Ye(am))},token:e,providedIn:"root"}),e}();try{bm="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(ZU){bm=!1}var Im,Am=function(){function e(e){this._platformId=e,this.isBrowser=this._platformId?this._platformId===ya:"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!bm)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}return e.ngInjectableDef=Oe({factory:function(){return new e(Ye(Xi,8))},token:e,providedIn:"root"}),e}();function Nm(e){return function(){if(null==Im&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){return Im=!0}}))}finally{Im=Im||!1}return Im}()?e:!!e.capture}function _m(e){return null!=e&&""+e!="false"}function wm(e){return e instanceof dt?e.nativeElement:e}function Pm(e,n,t,l){return d(t)&&(l=t,t=void 0),l?Pm(e,n,t).pipe(j(function(e){return p(e)?l.apply(void 0,e):l(e)})):new _(function(l){!function e(n,t,l,i,r){var o;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(n)){var u=n;n.addEventListener(t,l,r),o=function(){return u.removeEventListener(t,l,r)}}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(n)){var s=n;n.on(t,l),o=function(){return s.off(t,l)}}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(n)){var a=n;n.addListener(t,l),o=function(){return a.removeListener(t,l)}}else{if(!n||!n.length)throw new TypeError("Invalid event target");for(var c=0,p=n.length;c<p;c++)e(n[c],t,l,i,r)}i.add(o)}(e,n,function(e){l.next(arguments.length>1?Array.prototype.slice.call(arguments):e)},l,t)})}var xm=function(e){function n(n,t){var l=e.call(this,n,t)||this;return l.scheduler=n,l.work=t,l.pending=!1,l}return i(n,e),n.prototype.schedule=function(e,n){if(void 0===n&&(n=0),this.closed)return this;this.state=e;var t=this.id,l=this.scheduler;return null!=t&&(this.id=this.recycleAsyncId(l,t,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(l,this.id,n),this},n.prototype.requestAsyncId=function(e,n,t){return void 0===t&&(t=0),setInterval(e.flush.bind(e,this),t)},n.prototype.recycleAsyncId=function(e,n,t){if(void 0===t&&(t=0),null!==t&&this.delay===t&&!1===this.pending)return n;clearInterval(n)},n.prototype.execute=function(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var t=this._execute(e,n);if(t)return t;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},n.prototype._execute=function(e,n){var t=!1,l=void 0;try{this.work(e)}catch(i){t=!0,l=!!i&&i||new Error(i)}if(t)return this.unsubscribe(),l},n.prototype._unsubscribe=function(){var e=this.id,n=this.scheduler,t=n.actions,l=t.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==l&&t.splice(l,1),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null},n}(function(e){function n(n,t){return e.call(this)||this}return i(n,e),n.prototype.schedule=function(e,n){return void 0===n&&(n=0),this},n}(m)),km=function(){function e(n,t){void 0===t&&(t=e.now),this.SchedulerAction=n,this.now=t}return e.prototype.schedule=function(e,n,t){return void 0===n&&(n=0),new this.SchedulerAction(this,e).schedule(t,n)},e.now=function(){return Date.now()},e}(),Mm=new(function(e){function n(t,l){void 0===l&&(l=km.now);var i=e.call(this,t,function(){return n.delegate&&n.delegate!==i?n.delegate.now():l()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return i(n,e),n.prototype.schedule=function(t,l,i){return void 0===l&&(l=0),n.delegate&&n.delegate!==this?n.delegate.schedule(t,l,i):e.prototype.schedule.call(this,t,l,i)},n.prototype.flush=function(e){var n=this.actions;if(this.active)n.push(e);else{var t;this.active=!0;do{if(t=e.execute(e.state,e.delay))break}while(e=n.shift());if(this.active=!1,t){for(;e=n.shift();)e.unsubscribe();throw t}}},n}(km))(xm),Dm=function(){function e(e){this.durationSelector=e}return e.prototype.call=function(e,n){return n.subscribe(new Lm(e,this.durationSelector))},e}(),Lm=function(e){function n(n,t){var l=e.call(this,n)||this;return l.durationSelector=t,l.hasValue=!1,l}return i(n,e),n.prototype._next=function(e){if(this.value=e,this.hasValue=!0,!this.throttled){var n=void 0;try{n=(0,this.durationSelector)(e)}catch(l){return this.destination.error(l)}var t=Y(this,n);!t||t.closed?this.clearThrottle():this.add(this.throttled=t)}},n.prototype.clearThrottle=function(){var e=this.value,n=this.hasValue,t=this.throttled;t&&(this.remove(t),this.throttled=null,t.unsubscribe()),n&&(this.value=null,this.hasValue=!1,this.destination.next(e))},n.prototype.notifyNext=function(e,n,t,l){this.clearThrottle()},n.prototype.notifyComplete=function(){this.clearThrottle()},n}(K);function Fm(e){return!p(e)&&e-parseFloat(e)+1>=0}function Um(e){var n=e.index,t=e.period,l=e.subscriber;if(l.next(n),!l.closed){if(-1===t)return l.complete();e.index=n+1,this.schedule(e,t)}}function Hm(e){return function(n){return n.lift(new Gm(e))}}var Gm=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,n){var t=new Bm(e),l=Y(t,this.notifier);return l&&!t.seenValue?(t.add(l),n.subscribe(t)):t},e}(),Bm=function(e){function n(n){var t=e.call(this,n)||this;return t.seenValue=!1,t}return i(n,e),n.prototype.notifyNext=function(e,n,t,l,i){this.seenValue=!0,this.complete()},n.prototype.notifyComplete=function(){},n}(K);function Vm(e,n){return new _(n?function(t){return n.schedule(Wm,0,{error:e,subscriber:t})}:function(n){return n.error(e)})}function Wm(e){e.subscriber.error(e.error)}var zm=function(){function e(e,n){var t=this;this._platform=e,n.runOutsideAngular(function(){t._change=e.isBrowser?ie(Pm(window,"resize"),Pm(window,"orientationchange")):Ta(),t._invalidateCache=t.change().subscribe(function(){return t._updateViewportSize()})})}return e.prototype.ngOnDestroy=function(){this._invalidateCache.unsubscribe()},e.prototype.getViewportSize=function(){this._viewportSize||this._updateViewportSize();var e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e},e.prototype.getViewportRect=function(){var e=this.getViewportScrollPosition(),n=this.getViewportSize(),t=n.width,l=n.height;return{top:e.top,left:e.left,bottom:e.top+l,right:e.left+t,height:l,width:t}},e.prototype.getViewportScrollPosition=function(){if(!this._platform.isBrowser)return{top:0,left:0};var e=document.documentElement,n=e.getBoundingClientRect();return{top:-n.top||document.body.scrollTop||window.scrollY||e.scrollTop||0,left:-n.left||document.body.scrollLeft||window.scrollX||e.scrollLeft||0}},e.prototype.change=function(e){return void 0===e&&(e=20),e>0?this._change.pipe((n=e,void 0===t&&(t=Mm),l=function(){return function(e,n,t){void 0===e&&(e=0);var l=-1;return Fm(n)?l=Number(n)<1?1:Number(n):F(n)&&(t=n),F(t)||(t=Mm),new _(function(n){var i=Fm(e)?e:+e-t.now();return t.schedule(Um,i,{index:0,period:l,subscriber:n})})}(n,t)},function(e){return e.lift(new Dm(l))})):this._change;var n,t,l},e.prototype._updateViewportSize=function(){this._viewportSize=this._platform.isBrowser?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0}},e.ngInjectableDef=Oe({factory:function(){return new e(Ye(Am),Ye(vr))},token:e,providedIn:"root"}),e}();function Ym(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e}function Km(e,n){var t=n?"":"none";Ym(e.style,{touchAction:n?"":"none",webkitUserDrag:n?"":"none",webkitTapHighlightColor:n?"":"transparent",userSelect:t,msUserSelect:t,webkitUserSelect:t,MozUserSelect:t})}function jm(e){var n=e.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(e)*n}function $m(e,n){return e.getPropertyValue(n).split(",").map(function(e){return e.trim()})}var Qm=Nm({passive:!0}),qm=Nm({passive:!1}),Xm=function(){function e(e,n,t,l,i,r){var o=this;this._config=n,this._document=t,this._ngZone=l,this._viewportRuler=i,this._dragDropRegistry=r,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._moveEvents=new D,this._pointerMoveSubscription=m.EMPTY,this._pointerUpSubscription=m.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new D,this.started=new D,this.released=new D,this.ended=new D,this.entered=new D,this.exited=new D,this.dropped=new D,this.moved=this._moveEvents.asObservable(),this._pointerDown=function(e){if(o.beforeStarted.next(),o._handles.length){var n=o._handles.find(function(n){var t=e.target;return!!t&&(t===n||n.contains(t))});!n||o._disabledHandles.has(n)||o.disabled||o._initializeDragSequence(n,e)}else o.disabled||o._initializeDragSequence(o._rootElement,e)},this._pointerMove=function(e){if(o._hasStartedDragging){o._boundaryElement&&(o._previewRect&&(o._previewRect.width||o._previewRect.height)||(o._previewRect=(o._preview||o._rootElement).getBoundingClientRect()));var n=o._getConstrainedPointerPosition(e);if(o._hasMoved=!0,e.preventDefault(),o._updatePointerDirectionDelta(n),o._dropContainer)o._updateActiveDropContainer(n);else{var t=o._activeTransform;t.x=n.x-o._pickupPositionOnPage.x+o._passiveTransform.x,t.y=n.y-o._pickupPositionOnPage.y+o._passiveTransform.y,o._applyRootElementTransform(t.x,t.y),"undefined"!=typeof SVGElement&&o._rootElement instanceof SVGElement&&o._rootElement.setAttribute("transform","translate("+t.x+" "+t.y+")")}o._moveEvents.observers.length&&o._ngZone.run(function(){o._moveEvents.next({source:o,pointerPosition:n,event:e,distance:o._getDragDistance(n),delta:o._pointerDirectionDelta})})}else{var l=o._getPointerPositionOnPage(e);Math.abs(l.x-o._pickupPositionOnPage.x)+Math.abs(l.y-o._pickupPositionOnPage.y)>=o._config.dragStartThreshold&&Date.now()>=o._dragStartTime+(o.dragStartDelay||0)&&(o._dropContainer&&o._dropContainer.isDragging()||(o._hasStartedDragging=!0,o._ngZone.run(function(){return o._startDragSequence(e)})))}},this._pointerUp=function(e){if(o._dragDropRegistry.isDragging(o)&&(o._removeSubscriptions(),o._dragDropRegistry.stopDragging(o),o._handles&&(o._rootElement.style.webkitTapHighlightColor=o._rootElementTapHighlight),o._hasStartedDragging)){if(o.released.next({source:o}),!o._dropContainer)return o._passiveTransform.x=o._activeTransform.x,o._passiveTransform.y=o._activeTransform.y,o._ngZone.run(function(){o.ended.next({source:o,distance:o._getDragDistance(o._getPointerPositionOnPage(e))})}),void o._dragDropRegistry.stopDragging(o);o._animatePreviewToPlaceholder().then(function(){o._cleanupDragArtifacts(e),o._dragDropRegistry.stopDragging(o)})}},this.withRootElement(e),r.registerDragItem(this)}return Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)},set:function(e){var n=_m(e);n!==this._disabled&&(this._disabled=n,this._toggleNativeDragInteractions())},enumerable:!0,configurable:!0}),e.prototype.getPlaceholderElement=function(){return this._placeholder},e.prototype.getRootElement=function(){return this._rootElement},e.prototype.withHandles=function(e){return this._handles=e.map(function(e){return wm(e)}),this._handles.forEach(function(e){return Km(e,!1)}),this._toggleNativeDragInteractions(),this},e.prototype.withPreviewTemplate=function(e){return this._previewTemplate=e,this},e.prototype.withPlaceholderTemplate=function(e){return this._placeholderTemplate=e,this},e.prototype.withRootElement=function(e){var n=wm(e);return n!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),n.addEventListener("mousedown",this._pointerDown,qm),n.addEventListener("touchstart",this._pointerDown,Qm),this._initialTransform=void 0,this._rootElement=n),this},e.prototype.withBoundaryElement=function(e){return this._boundaryElement=e?wm(e):null,this},e.prototype.dispose=function(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&nv(this._rootElement),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._boundaryElement=this._rootElement=this._placeholderTemplate=this._previewTemplate=this._nextSibling=null},e.prototype.isDragging=function(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)},e.prototype.reset=function(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}},e.prototype.disableHandle=function(e){this._handles.indexOf(e)>-1&&this._disabledHandles.add(e)},e.prototype.enableHandle=function(e){this._disabledHandles.delete(e)},e.prototype.withDirection=function(e){return this._direction=e,this},e.prototype._withDropContainer=function(e){this._dropContainer=e},e.prototype.getFreeDragPosition=function(){return{x:this._passiveTransform.x,y:this._passiveTransform.y}},e.prototype.setFreeDragPosition=function(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this},e.prototype._removeSubscriptions=function(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe()},e.prototype._destroyPreview=function(){this._preview&&nv(this._preview),this._previewRef&&this._previewRef.destroy(),this._preview=this._previewRef=null},e.prototype._destroyPlaceholder=function(){this._placeholder&&nv(this._placeholder),this._placeholderRef&&this._placeholderRef.destroy(),this._placeholder=this._placeholderRef=null},e.prototype._startDragSequence=function(e){if(this.started.next({source:this}),tv(e)&&(this._lastTouchEventTime=Date.now()),this._dropContainer){var n=this._rootElement;this._nextSibling=n.nextSibling;var t=this._preview=this._createPreviewElement(),l=this._placeholder=this._createPlaceholderElement();n.style.display="none",this._document.body.appendChild(n.parentNode.replaceChild(l,n)),(i=this._document,i.fullscreenElement||i.webkitFullscreenElement||i.mozFullScreenElement||i.msFullscreenElement||i.body).appendChild(t),this._dropContainer.start()}var i},e.prototype._initializeDragSequence=function(e,n){n.stopPropagation();var t=this.isDragging(),l=tv(n),i=!l&&0!==n.button,r=this._rootElement,o=!l&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now();if(n.target&&n.target.draggable&&"mousedown"===n.type&&n.preventDefault(),!(t||i||o)){this._handles.length&&(this._rootElementTapHighlight=r.style.webkitTapHighlightColor,r.style.webkitTapHighlightColor="transparent"),this._toggleNativeDragInteractions(),this._hasStartedDragging=this._hasMoved=!1,this._initialContainer=this._dropContainer,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollPosition=this._viewportRuler.getViewportScrollPosition(),this._boundaryElement&&(this._boundaryRect=this._boundaryElement.getBoundingClientRect()),this._pickupPositionInElement=this._previewTemplate&&this._previewTemplate.template?{x:0,y:0}:this._getPointerPositionInElement(e,n);var u=this._pickupPositionOnPage=this._getPointerPositionOnPage(n);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:u.x,y:u.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,n)}},e.prototype._cleanupDragArtifacts=function(e){var n=this;this._rootElement.style.display="",this._nextSibling?this._nextSibling.parentNode.insertBefore(this._rootElement,this._nextSibling):wm(this._initialContainer.element).appendChild(this._rootElement),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=void 0,this._ngZone.run(function(){var t=n._dropContainer,l=t.getItemIndex(n),i=n._getPointerPositionOnPage(e),r=n._getDragDistance(n._getPointerPositionOnPage(e)),o=t._isOverContainer(i.x,i.y);n.ended.next({source:n,distance:r}),n.dropped.next({item:n,currentIndex:l,previousIndex:n._initialContainer.getItemIndex(n),container:t,previousContainer:n._initialContainer,isPointerOverContainer:o,distance:r}),t.drop(n,l,n._initialContainer,o,r),n._dropContainer=n._initialContainer})},e.prototype._updateActiveDropContainer=function(e){var n=this,t=e.x,l=e.y,i=this._initialContainer._getSiblingContainerFromPosition(this,t,l);!i&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(t,l)&&(i=this._initialContainer),i&&i!==this._dropContainer&&this._ngZone.run(function(){n.exited.next({item:n,container:n._dropContainer}),n._dropContainer.exit(n),n._dropContainer=i,n._dropContainer.enter(n,t,l),n.entered.next({item:n,container:i,currentIndex:i.getItemIndex(n)})}),this._dropContainer._sortItem(this,t,l,this._pointerDirectionDelta),this._preview.style.transform=Zm(t-this._pickupPositionInElement.x,l-this._pickupPositionInElement.y)},e.prototype._createPreviewElement=function(){var e,n=this._previewTemplate,t=n?n.template:null;if(t){var l=n.viewContainer.createEmbeddedView(t,n.context);e=l.rootNodes[0],this._previewRef=l,e.style.transform=Zm(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{var i=this._rootElement,r=i.getBoundingClientRect();(e=Jm(i)).style.width=r.width+"px",e.style.height=r.height+"px",e.style.transform=Zm(r.left,r.top)}return Ym(e.style,{pointerEvents:"none",position:"fixed",top:"0",left:"0",zIndex:"1000"}),Km(e,!1),e.classList.add("cdk-drag-preview"),e.setAttribute("dir",this._direction),e},e.prototype._animatePreviewToPlaceholder=function(){var e=this;if(!this._hasMoved)return Promise.resolve();var n=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._preview.style.transform=Zm(n.left,n.top);var t=function(e){var n=getComputedStyle(e),t=$m(n,"transition-property"),l=t.find(function(e){return"transform"===e||"all"===e});if(!l)return 0;var i=t.indexOf(l),r=$m(n,"transition-duration"),o=$m(n,"transition-delay");return jm(r[i])+jm(o[i])}(this._preview);return 0===t?Promise.resolve():this._ngZone.runOutsideAngular(function(){return new Promise(function(n){var l=function(t){(!t||t.target===e._preview&&"transform"===t.propertyName)&&(e._preview.removeEventListener("transitionend",l),n(),clearTimeout(i))},i=setTimeout(l,1.5*t);e._preview.addEventListener("transitionend",l)})})},e.prototype._createPlaceholderElement=function(){var e,n=this._placeholderTemplate,t=n?n.template:null;return t?(this._placeholderRef=n.viewContainer.createEmbeddedView(t,n.context),e=this._placeholderRef.rootNodes[0]):e=Jm(this._rootElement),e.classList.add("cdk-drag-placeholder"),e},e.prototype._getPointerPositionInElement=function(e,n){var t=this._rootElement.getBoundingClientRect(),l=e===this._rootElement?null:e,i=l?l.getBoundingClientRect():t,r=tv(n)?n.targetTouches[0]:n;return{x:i.left-t.left+(r.pageX-i.left-this._scrollPosition.left),y:i.top-t.top+(r.pageY-i.top-this._scrollPosition.top)}},e.prototype._getPointerPositionOnPage=function(e){var n=tv(e)?e.touches[0]||e.changedTouches[0]:e;return{x:n.pageX-this._scrollPosition.left,y:n.pageY-this._scrollPosition.top}},e.prototype._getConstrainedPointerPosition=function(e){var n=this._getPointerPositionOnPage(e),t=this.constrainPosition?this.constrainPosition(n):n,l=this._dropContainer?this._dropContainer.lockAxis:null;if("x"===this.lockAxis||"x"===l?t.y=this._pickupPositionOnPage.y:"y"!==this.lockAxis&&"y"!==l||(t.x=this._pickupPositionOnPage.x),this._boundaryRect){var i=this._pickupPositionInElement,r=i.x,o=i.y,u=this._boundaryRect,s=this._previewRect,a=u.top+o,c=u.bottom-(s.height-o);t.x=ev(t.x,u.left+r,u.right-(s.width-r)),t.y=ev(t.y,a,c)}return t},e.prototype._updatePointerDirectionDelta=function(e){var n=e.x,t=e.y,l=this._pointerDirectionDelta,i=this._pointerPositionAtLastDirectionChange,r=Math.abs(n-i.x),o=Math.abs(t-i.y);return r>this._config.pointerDirectionChangeThreshold&&(l.x=n>i.x?1:-1,i.x=n),o>this._config.pointerDirectionChangeThreshold&&(l.y=t>i.y?1:-1,i.y=t),l},e.prototype._toggleNativeDragInteractions=function(){if(this._rootElement&&this._handles){var e=this.disabled||this._handles.length>0;e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,Km(this._rootElement,e))}},e.prototype._removeRootElementListeners=function(e){e.removeEventListener("mousedown",this._pointerDown,qm),e.removeEventListener("touchstart",this._pointerDown,Qm)},e.prototype._applyRootElementTransform=function(e,n){var t=Zm(e,n);null==this._initialTransform&&(this._initialTransform=this._rootElement.style.transform||""),this._rootElement.style.transform=this._initialTransform?t+" "+this._initialTransform:t},e.prototype._getDragDistance=function(e){var n=this._pickupPositionOnPage;return n?{x:e.x-n.x,y:e.y-n.y}:{x:0,y:0}},e}();function Zm(e,n){return"translate3d("+Math.round(e)+"px, "+Math.round(n)+"px, 0)"}function Jm(e){var n=e.cloneNode(!0),t=n.querySelectorAll("[id]"),l=e.querySelectorAll("canvas");n.removeAttribute("id");for(var i=0;i<t.length;i++)t[i].removeAttribute("id");if(l.length){var r=n.querySelectorAll("canvas");for(i=0;i<l.length;i++){var o=r[i].getContext("2d");o&&o.drawImage(l[i],0,0)}}return n}function ev(e,n,t){return Math.max(n,Math.min(t,e))}function nv(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function tv(e){return"t"===e.type[0]}function lv(e,n,t){var l=iv(n,e.length-1),i=iv(t,e.length-1);if(l!==i){for(var r=e[l],o=i<l?-1:1,u=l;u!==i;u+=o)e[u]=e[u+o];e[i]=r}}function iv(e,n){return Math.max(0,Math.min(n,e))}var rv=0,ov=function(){function e(e,n,t){this._dragDropRegistry=n,this.id="cdk-drop-list-ref-"+rv++,this.disabled=!1,this.sortingDisabled=!0,this.enterPredicate=function(){return!0},this.beforeStarted=new D,this.entered=new D,this.exited=new D,this.dropped=new D,this.sorted=new D,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0},this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",n.registerDropContainer(this),this._document=t,this.element=e instanceof dt?e.nativeElement:e}return e.prototype.dispose=function(){this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._dragDropRegistry.removeDropContainer(this)},e.prototype.isDragging=function(){return this._isDragging},e.prototype.start=function(){var e=this;this.beforeStarted.next(),this._isDragging=!0,this._cacheItems(),this._siblings.forEach(function(n){return n._startReceiving(e)})},e.prototype.enter=function(e,n,t){this.start();var l=this.sortingDisabled?this._draggables.indexOf(e):-1;-1===l&&(l=this._getItemIndexFromPointerPosition(e,n,t));var i=this._activeDraggables,r=i.indexOf(e),o=e.getPlaceholderElement(),u=i[l];if(u===e&&(u=i[l+1]),r>-1&&i.splice(r,1),u&&!this._dragDropRegistry.isDragging(u)){var s=u.getRootElement();s.parentElement.insertBefore(o,s),i.splice(l,0,e)}else wm(this.element).appendChild(o),i.push(e);o.style.transform="",this._cacheItemPositions(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})},e.prototype.exit=function(e){this._reset(),this.exited.next({item:e,container:this})},e.prototype.drop=function(e,n,t,l,i){void 0===i&&(i={x:0,y:0}),this._reset(),this.dropped.next({item:e,currentIndex:n,previousIndex:t.getItemIndex(e),container:this,previousContainer:t,isPointerOverContainer:l,distance:i})},e.prototype.withItems=function(e){var n=this;return this._draggables=e,e.forEach(function(e){return e._withDropContainer(n)}),this.isDragging()&&this._cacheItems(),this},e.prototype.withDirection=function(e){return this._direction=e,this},e.prototype.connectedTo=function(e){return this._siblings=e.slice(),this},e.prototype.withOrientation=function(e){return this._orientation=e,this},e.prototype.getItemIndex=function(e){return this._isDragging?sv("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions,function(n){return n.drag===e}):this._draggables.indexOf(e)},e.prototype.isReceiving=function(){return this._activeSiblings.size>0},e.prototype._sortItem=function(e,n,t,l){if(!this.sortingDisabled&&this._isPointerNearDropContainer(n,t)){var i=this._itemPositions,r=this._getItemIndexFromPointerPosition(e,n,t,l);if(!(-1===r&&i.length>0)){var o="horizontal"===this._orientation,u=sv(i,function(n){return n.drag===e}),s=i[r],a=i[u].clientRect,c=s.clientRect,p=u>r?1:-1;this._previousSwap.drag=s.drag,this._previousSwap.delta=o?l.x:l.y;var h=this._getItemOffsetPx(a,c,p),d=this._getSiblingOffsetPx(u,i,p),g=i.slice();lv(i,u,r),this.sorted.next({previousIndex:u,currentIndex:r,container:this,item:e}),i.forEach(function(n,t){if(g[t]!==n){var l=n.drag===e,i=l?h:d,r=l?e.getPlaceholderElement():n.drag.getRootElement();n.offset+=i,o?(r.style.transform="translate3d("+Math.round(n.offset)+"px, 0, 0)",uv(n.clientRect,0,i)):(r.style.transform="translate3d(0, "+Math.round(n.offset)+"px, 0)",uv(n.clientRect,i,0))}})}}},e.prototype._cacheOwnPosition=function(){this._clientRect=wm(this.element).getBoundingClientRect()},e.prototype._cacheItemPositions=function(){var e=this,n="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(function(n){var t=(e._dragDropRegistry.isDragging(n)?n.getPlaceholderElement():n.getRootElement()).getBoundingClientRect();return{drag:n,offset:0,clientRect:{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}}}).sort(function(e,t){return n?e.clientRect.left-t.clientRect.left:e.clientRect.top-t.clientRect.top})},e.prototype._reset=function(){var e=this;this._isDragging=!1,this._activeDraggables.forEach(function(e){return e.getRootElement().style.transform=""}),this._siblings.forEach(function(n){return n._stopReceiving(e)}),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0},e.prototype._getSiblingOffsetPx=function(e,n,t){var l="horizontal"===this._orientation,i=n[e].clientRect,r=n[e+-1*t],o=i[l?"width":"height"]*t;if(r){var u=l?"left":"top",s=l?"right":"bottom";-1===t?o-=r.clientRect[u]-i[s]:o+=i[u]-r.clientRect[s]}return o},e.prototype._isPointerNearDropContainer=function(e,n){var t=this._clientRect,l=.05*t.width,i=.05*t.height;return n>t.top-i&&n<t.bottom+i&&e>t.left-l&&e<t.right+l},e.prototype._getItemOffsetPx=function(e,n,t){var l="horizontal"===this._orientation,i=l?n.left-e.left:n.top-e.top;return-1===t&&(i+=l?n.width-e.width:n.height-e.height),i},e.prototype._getItemIndexFromPointerPosition=function(e,n,t,l){var i=this,r="horizontal"===this._orientation;return sv(this._itemPositions,function(o,u,s){var a=o.drag,c=o.clientRect;return a===e?s.length<2:(!l||a!==i._previousSwap.drag||(r?l.x:l.y)!==i._previousSwap.delta)&&(r?n>=Math.floor(c.left)&&n<=Math.floor(c.right):t>=Math.floor(c.top)&&t<=Math.floor(c.bottom))})},e.prototype._cacheItems=function(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheOwnPosition()},e.prototype._isOverContainer=function(e,n){return av(this._clientRect,e,n)},e.prototype._getSiblingContainerFromPosition=function(e,n,t){return this._siblings.find(function(l){return l._canReceive(e,n,t)})},e.prototype._canReceive=function(e,n,t){if(!this.enterPredicate(e,this)||!av(this._clientRect,n,t))return!1;var l=this._document.elementFromPoint(n,t);if(!l)return!1;var i=wm(this.element);return l===i||i.contains(l)},e.prototype._startReceiving=function(e){var n=this._activeSiblings;n.has(e)||(n.add(e),this._cacheOwnPosition())},e.prototype._stopReceiving=function(e){this._activeSiblings.delete(e)},e}();function uv(e,n,t){e.top+=n,e.bottom=e.top+e.height,e.left+=t,e.right=e.left+e.width}function sv(e,n){for(var t=0;t<e.length;t++)if(n(e[t],t,e))return t;return-1}function av(e,n,t){return t>=e.top&&t<=e.bottom&&n>=e.left&&n<=e.right}var cv=Nm({passive:!1,capture:!0}),pv=function(){function e(e,n){var t=this;this._ngZone=e,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=new Set,this._globalListeners=new Map,this.pointerMove=new D,this.pointerUp=new D,this._preventDefaultWhileDragging=function(e){t._activeDragInstances.size&&e.preventDefault()},this._document=n}return e.prototype.registerDropContainer=function(e){if(!this._dropInstances.has(e)){if(this.getDropContainer(e.id))throw Error('Drop instance with id "'+e.id+'" has already been registered.');this._dropInstances.add(e)}},e.prototype.registerDragItem=function(e){var n=this;this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(function(){n._document.addEventListener("touchmove",n._preventDefaultWhileDragging,cv)})},e.prototype.removeDropContainer=function(e){this._dropInstances.delete(e)},e.prototype.removeDragItem=function(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._preventDefaultWhileDragging,cv)},e.prototype.startDragging=function(e,n){var t=this;if(!this._activeDragInstances.has(e)&&(this._activeDragInstances.add(e),1===this._activeDragInstances.size)){var l=n.type.startsWith("touch"),i=l?"touchend":"mouseup";this._globalListeners.set(l?"touchmove":"mousemove",{handler:function(e){return t.pointerMove.next(e)},options:cv}).set(i,{handler:function(e){return t.pointerUp.next(e)},options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:cv}),l||this._globalListeners.set("wheel",{handler:this._preventDefaultWhileDragging,options:cv}),this._ngZone.runOutsideAngular(function(){t._globalListeners.forEach(function(e,n){t._document.addEventListener(n,e.handler,e.options)})})}},e.prototype.stopDragging=function(e){this._activeDragInstances.delete(e),0===this._activeDragInstances.size&&this._clearGlobalListeners()},e.prototype.isDragging=function(e){return this._activeDragInstances.has(e)},e.prototype.getDropContainer=function(e){return Array.from(this._dropInstances).find(function(n){return n.id===e})},e.prototype.ngOnDestroy=function(){var e=this;this._dragInstances.forEach(function(n){return e.removeDragItem(n)}),this._dropInstances.forEach(function(n){return e.removeDropContainer(n)}),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()},e.prototype._clearGlobalListeners=function(){var e=this;this._globalListeners.forEach(function(n,t){e._document.removeEventListener(t,n.handler,n.options)}),this._globalListeners.clear()},e.ngInjectableDef=Oe({factory:function(){return new e(Ye(vr),Ye(Ea))},token:e,providedIn:"root"}),e}(),hv={dragStartThreshold:5,pointerDirectionChangeThreshold:5},dv=function(){function e(e,n,t,l){this._document=e,this._ngZone=n,this._viewportRuler=t,this._dragDropRegistry=l}return e.prototype.createDrag=function(e,n){return void 0===n&&(n=hv),new Xm(e,n,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)},e.prototype.createDropList=function(e){return new ov(e,this._dragDropRegistry,this._document)},e.ngInjectableDef=Oe({factory:function(){return new e(Ye(Ea),Ye(vr),Ye(zm),Ye(pv))},token:e,providedIn:"root"}),e}(),gv=new Le("CDK_DROP_LIST"),fv=new Le("CDK_DRAG_PARENT"),mv=new Le("CDK_DRAG_CONFIG",{providedIn:"root",factory:function(){return{dragStartThreshold:5,pointerDirectionChangeThreshold:5}}}),vv=function(){function e(e,n,t,l,i,r,o,u,s){var a=this;this.element=e,this.dropContainer=n,this._document=t,this._ngZone=l,this._viewContainerRef=i,this._dir=o,this._changeDetectorRef=s,this._destroyed=new D,this.dragStartDelay=0,this._disabled=!1,this.started=new Gi,this.released=new Gi,this.ended=new Gi,this.entered=new Gi,this.exited=new Gi,this.dropped=new Gi,this.moved=new _(function(e){var n=a._dragRef.moved.pipe(j(function(e){return{source:a,pointerPosition:e.pointerPosition,event:e.event,delta:e.delta,distance:e.distance}})).subscribe(e);return function(){n.unsubscribe()}}),this._dragRef=u.createDrag(e,r),this._dragRef.data=this,this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}return Object.defineProperty(e.prototype,"boundaryElementSelector",{get:function(){return"string"==typeof this.boundaryElement?this.boundaryElement:void 0},set:function(e){this.boundaryElement=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled||this.dropContainer&&this.dropContainer.disabled},set:function(e){this._disabled=_m(e),this._dragRef.disabled=this._disabled},enumerable:!0,configurable:!0}),e.prototype.getPlaceholderElement=function(){return this._dragRef.getPlaceholderElement()},e.prototype.getRootElement=function(){return this._dragRef.getRootElement()},e.prototype.reset=function(){this._dragRef.reset()},e.prototype.getFreeDragPosition=function(){return this._dragRef.getFreeDragPosition()},e.prototype.ngAfterViewInit=function(){var e=this;this._ngZone.onStable.asObservable().pipe(ec(1),Hm(this._destroyed)).subscribe(function(){e._updateRootElement(),e._handles.changes.pipe(cc(e._handles),fc(function(n){var t=n.filter(function(n){return n._parentDrag===e}).map(function(e){return e.element});e._dragRef.withHandles(t)}),oc(function(e){return ie.apply(void 0,e.map(function(e){return e._stateChanges}))}),Hm(e._destroyed)).subscribe(function(n){var t=e._dragRef,l=n.element.nativeElement;n.disabled?t.disableHandle(l):t.enableHandle(l)}),e.freeDragPosition&&e._dragRef.setFreeDragPosition(e.freeDragPosition)})},e.prototype.ngOnChanges=function(e){var n=e.rootElementSelector,t=e.freeDragPosition;n&&!n.firstChange&&this._updateRootElement(),t&&!t.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)},e.prototype.ngOnDestroy=function(){this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()},e.prototype._updateRootElement=function(){var e=this.element.nativeElement,n=this.rootElementSelector?Sv(e,this.rootElementSelector):e;if(n&&n.nodeType!==this._document.ELEMENT_NODE)throw Error('cdkDrag must be attached to an element node. Currently attached to "'+n.nodeName+'".');this._dragRef.withRootElement(n||e)},e.prototype._getBoundaryElement=function(){var e=this.boundaryElement;if(!e)return null;if("string"==typeof e)return Sv(this.element.nativeElement,e);var n=wm(e);if(gn()&&!n.contains(this.element.nativeElement))throw Error("Draggable element is not inside of the node passed into cdkDragBoundary.");return n},e.prototype._syncInputs=function(e){var n=this;e.beforeStarted.subscribe(function(){if(!e.isDragging()){var t=n._dir,l=n._placeholderTemplate?{template:n._placeholderTemplate.templateRef,context:n._placeholderTemplate.data,viewContainer:n._viewContainerRef}:null,i=n._previewTemplate?{template:n._previewTemplate.templateRef,context:n._previewTemplate.data,viewContainer:n._viewContainerRef}:null;e.disabled=n.disabled,e.lockAxis=n.lockAxis,e.dragStartDelay=(void 0===o&&(o=0),function(e){return!isNaN(parseFloat(e))&&!isNaN(Number(e))}(r=n.dragStartDelay)?Number(r):o),e.constrainPosition=n.constrainPosition,e.withBoundaryElement(n._getBoundaryElement()).withPlaceholderTemplate(l).withPreviewTemplate(i),t&&e.withDirection(t.value)}var r,o})},e.prototype._handleEvents=function(e){var n=this;e.started.subscribe(function(){n.started.emit({source:n}),n._changeDetectorRef.markForCheck()}),e.released.subscribe(function(){n.released.emit({source:n})}),e.ended.subscribe(function(e){n.ended.emit({source:n,distance:e.distance}),n._changeDetectorRef.markForCheck()}),e.entered.subscribe(function(e){n.entered.emit({container:e.container.data,item:n,currentIndex:e.currentIndex})}),e.exited.subscribe(function(e){n.exited.emit({container:e.container.data,item:n})}),e.dropped.subscribe(function(e){n.dropped.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,previousContainer:e.previousContainer.data,container:e.container.data,isPointerOverContainer:e.isPointerOverContainer,item:n,distance:e.distance})})},e}();function Sv(e,n){for(var t=e.parentElement;t;){if(t.matches?t.matches(n):t.msMatchesSelector(n))return t;t=t.parentElement}return null}var Ev=function(){function e(){this._items=new Set,this._disabled=!1}return Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled},set:function(e){this._disabled=_m(e)},enumerable:!0,configurable:!0}),e.prototype.ngOnDestroy=function(){this._items.clear()},e}(),yv=0,Rv=function(){function e(n,t,l,i,r){var o=this;this.element=n,this._changeDetectorRef=l,this._dir=i,this._group=r,this._destroyed=new D,this.connectedTo=[],this.orientation="vertical",this.id="cdk-drop-list-"+yv++,this._disabled=!1,this._sortingDisabled=!1,this.enterPredicate=function(){return!0},this.dropped=new Gi,this.entered=new Gi,this.exited=new Gi,this.sorted=new Gi,this._dropListRef=t.createDropList(n),this._dropListRef.data=this,this._dropListRef.enterPredicate=function(e,n){return o.enterPredicate(e.data,n.data)},this._syncInputs(this._dropListRef),this._handleEvents(this._dropListRef),e._dropLists.push(this),r&&r._items.add(this)}return Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled||!!this._group&&this._group.disabled},set:function(e){this._disabled=_m(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sortingDisabled",{get:function(){return this._sortingDisabled},set:function(e){this._sortingDisabled=_m(e)},enumerable:!0,configurable:!0}),e.prototype.ngAfterContentInit=function(){var e=this;this._draggables.changes.pipe(cc(this._draggables),Hm(this._destroyed)).subscribe(function(n){e._dropListRef.withItems(n.map(function(e){return e._dragRef}))})},e.prototype.ngOnDestroy=function(){var n=e._dropLists.indexOf(this);n>-1&&e._dropLists.splice(n,1),this._group&&this._group._items.delete(this),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()},e.prototype.start=function(){this._dropListRef.start()},e.prototype.drop=function(e,n,t,l){this._dropListRef.drop(e._dragRef,n,t._dropListRef,l)},e.prototype.enter=function(e,n,t){this._dropListRef.enter(e._dragRef,n,t)},e.prototype.exit=function(e){this._dropListRef.exit(e._dragRef)},e.prototype.getItemIndex=function(e){return this._dropListRef.getItemIndex(e._dragRef)},e.prototype._sortItem=function(e,n,t,l){return this._dropListRef._sortItem(e._dragRef,n,t,l)},e.prototype._getSiblingContainerFromPosition=function(e,n,t){var l=this._dropListRef._getSiblingContainerFromPosition(e._dragRef,n,t);return l?l.data:null},e.prototype._isOverContainer=function(e,n){return this._dropListRef._isOverContainer(e,n)},e.prototype._syncInputs=function(n){var t=this;this._dir&&this._dir.change.pipe(cc(this._dir.value),Hm(this._destroyed)).subscribe(function(e){return n.withDirection(e)}),n.beforeStarted.subscribe(function(){var l,i=(l=t.connectedTo,Array.isArray(l)?l:[l]).map(function(n){return"string"==typeof n?e._dropLists.find(function(e){return e.id===n}):n});t._group&&t._group._items.forEach(function(e){-1===i.indexOf(e)&&i.push(e)}),n.disabled=t.disabled,n.lockAxis=t.lockAxis,n.sortingDisabled=t.sortingDisabled,n.connectedTo(i.filter(function(e){return e&&e!==t}).map(function(e){return e._dropListRef})).withOrientation(t.orientation)})},e.prototype._handleEvents=function(e){var n=this;e.beforeStarted.subscribe(function(){n._changeDetectorRef.markForCheck()}),e.entered.subscribe(function(e){n.entered.emit({container:n,item:e.item.data,currentIndex:e.currentIndex})}),e.exited.subscribe(function(e){n.exited.emit({container:n,item:e.item.data}),n._changeDetectorRef.markForCheck()}),e.sorted.subscribe(function(e){n.sorted.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,container:n,item:e.item.data})}),e.dropped.subscribe(function(e){n.dropped.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,previousContainer:e.previousContainer.data,container:e.container.data,item:e.item.data,isPointerOverContainer:e.isPointerOverContainer,distance:e.distance}),n._changeDetectorRef.markForCheck()})},e._dropLists=[],e}(),bv=function(){return function(){}}(),Ov=function(e){return e[e.NONE=0]="NONE",e[e.SELECTED=1]="SELECTED",e[e.UNTIL_X=2]="UNTIL_X",e[e.CONTINUOUS=3]="CONTINUOUS",e[e.UNTIL_PERCENT=4]="UNTIL_PERCENT",e}({}),Tv=function(){function e(e,n,t,l){this.resourcesService=e,this.servicesService=n,this.recipeService=t,this.modalService=l,this.recipeUpdate=new D,this.craftingQueue=[],this.cookingQueue=[],this.id=1,this.craftingQueueSize=Cs.START_CRAFTING_QUEUE_SIZE,this.cookingQueueSize=Cs.START_COOKING_QUEUE_SIZE,n.addService(zu.CRAFTING,this)}return e.prototype.craft=function(e,n,t,l){this.craftingQueue.length>=this.craftingQueueSize?this.modalService.info("Crafting order queue is full"):e.shiftKey?this.craftingQueue.unshift({id:this.nextId(),recipe:n,amount:t,type:l}):this.craftingQueue.push({id:this.nextId(),recipe:n,amount:t,type:l})},e.prototype.cook=function(e,n,t,l){this.cookingQueue.length>=this.cookingQueueSize?this.modalService.info("Cooking order queue is full"):e.shiftKey?this.cookingQueue.unshift({id:this.nextId(),recipe:n,amount:t,type:l}):this.cookingQueue.push({id:this.nextId(),recipe:n,amount:t,type:l})},e.prototype.getCraftingQueue=function(){return this.craftingQueue},e.prototype.getCookingQueue=function(){return this.cookingQueue},e.prototype.getCraftingOrder=function(){var e=this,n=this.craftingQueue.find(function(n){if(n.type===Ov.SELECTED&&n.amount>0&&e.resourcesService.hasResources(n.recipe.cost,"Crafting")){var t=0;return e.servicesService.getService(zu.VILLAGE).buildings.filter(function(e){return e.getBuildingType()===wu.WORKSHOP}).forEach(function(e){e.getRecipe()&&e.getRecipe().id===n.recipe.id&&(t+=n.recipe.amount)}),(r=e.resourcesService.getResource(n.recipe.resource)).amount+t<r.limit}if(n.type===Ov.UNTIL_X&&e.resourcesService.hasResources(n.recipe.cost,"Crafting")){var l=0;return e.servicesService.getService(zu.VILLAGE).buildings.filter(function(e){return e.getBuildingType()===wu.WORKSHOP}).forEach(function(e){e.getRecipe()&&e.getRecipe().id===n.recipe.id&&(l+=n.recipe.amount)}),(r=e.resourcesService.getResource(n.recipe.resource)).limit<n.amount?r.amount+l<r.limit:r.amount+l<n.amount}if(n.type===Ov.UNTIL_PERCENT&&e.resourcesService.hasResources(n.recipe.cost,"Crafting")){var i=0;return e.servicesService.getService(zu.VILLAGE).buildings.filter(function(e){return e.getBuildingType()===wu.WORKSHOP}).forEach(function(e){e.getRecipe()&&e.getRecipe().id===n.recipe.id&&(i+=n.recipe.amount)}),(r=e.resourcesService.getResource(n.recipe.resource)).limit<Math.ceil(n.amount/100*r.limit)?r.amount+i<r.limit:r.amount+i<Math.ceil(n.amount/100*r.limit)}if(n.type===Ov.CONTINUOUS&&e.resourcesService.hasResources(n.recipe.cost,"Crafting")){var r,o=0;return e.servicesService.getService(zu.VILLAGE).buildings.filter(function(e){return e.getBuildingType()===wu.WORKSHOP}).forEach(function(e){e.getRecipe()&&e.getRecipe().id===n.recipe.id&&(o+=n.recipe.amount)}),(r=e.resourcesService.getResource(n.recipe.resource)).amount+o<r.limit}});return n?(this.resourcesService.decreaseResources(n.recipe.cost,"Crafting"),n.type===Ov.SELECTED&&(n.amount-=1),this.craftingQueue=this.craftingQueue.filter(function(e){return e.type!==Ov.SELECTED||e.amount>0}),n.recipe):null},e.prototype.getCookingOrder=function(){var e=this,n=this.cookingQueue.find(function(n){if(n.type===Ov.SELECTED&&n.amount>0&&e.resourcesService.hasResources(n.recipe.cost,"Kitchen")){var t=0;return e.servicesService.getService(zu.VILLAGE).buildings.filter(function(e){return e.getBuildingType()===wu.KITCHEN}).forEach(function(e){e.getRecipe()&&e.getRecipe().id===n.recipe.id&&(t+=n.recipe.amount)}),(r=e.resourcesService.getResource(n.recipe.resource)).amount+t<r.limit}if(n.type===Ov.UNTIL_X&&e.resourcesService.hasResources(n.recipe.cost,"Kitchen")){var l=0;return e.servicesService.getService(zu.VILLAGE).buildings.filter(function(e){return e.getBuildingType()===wu.KITCHEN}).forEach(function(e){e.getRecipe()&&e.getRecipe().id===n.recipe.id&&(l+=n.recipe.amount)}),(r=e.resourcesService.getResource(n.recipe.resource)).limit<n.amount?r.amount+l<r.limit:r.amount+l<n.amount}if(n.type===Ov.UNTIL_PERCENT&&e.resourcesService.hasResources(n.recipe.cost,"Kitchen")){var i=0;return e.servicesService.getService(zu.VILLAGE).buildings.filter(function(e){return e.getBuildingType()===wu.KITCHEN}).forEach(function(e){e.getRecipe()&&e.getRecipe().id===n.recipe.id&&(i+=n.recipe.amount)}),(r=e.resourcesService.getResource(n.recipe.resource)).limit<Math.ceil(n.amount/100*r.limit)?r.amount+i<r.limit:r.amount+i<Math.ceil(n.amount/100*r.limit)}if(n.type===Ov.CONTINUOUS&&e.resourcesService.hasResources(n.recipe.cost,"Kitchen")){var r,o=0;return e.servicesService.getService(zu.VILLAGE).buildings.filter(function(e){return e.getBuildingType()===wu.KITCHEN}).forEach(function(e){e.getRecipe()&&e.getRecipe().id===n.recipe.id&&(o+=n.recipe.amount)}),(r=e.resourcesService.getResource(n.recipe.resource)).amount+o<r.limit}});return n?(this.resourcesService.decreaseResources(n.recipe.cost,"Kitchen"),n.type===Ov.SELECTED&&(n.amount-=1),this.cookingQueue=this.cookingQueue.filter(function(e){return e.type!==Ov.SELECTED||e.amount>0}),n.recipe):null},e.prototype.load=function(e){var n=this;this.craftingQueue=[],this.cookingQueue=[],Array.from(e.queue).forEach(function(e){n.craftingQueue.push({id:n.nextId(),recipe:n.recipeService.getRecipeById(e.recipeId),amount:e.amount,type:e.type})}),void 0!==e.cookingQueue&&Array.from(e.cookingQueue).forEach(function(e){n.cookingQueue.push({id:n.nextId(),recipe:n.recipeService.getRecipeById(e.recipeId),amount:e.amount,type:e.type})}),this.craftingQueueSize=e.queueSize,this.cookingQueueSize=void 0!==e.cookingQueueSize?e.cookingQueueSize:Cs.START_COOKING_QUEUE_SIZE},e.prototype.save=function(){return{queue:this.craftingQueue.map(function(e){return{recipeId:e.recipe.id,amount:e.amount,type:e.type}}),cookingQueue:this.cookingQueue.map(function(e){return{recipeId:e.recipe.id,amount:e.amount,type:e.type}}),queueSize:this.craftingQueueSize,cookingQueueSize:this.cookingQueueSize}},e.prototype.reset=function(e,n){this.craftingQueue=[],this.cookingQueue=[],this.id=1,this.craftingQueueSize=Cs.START_CRAFTING_QUEUE_SIZE,this.cookingQueueSize=Cs.START_COOKING_QUEUE_SIZE},e.prototype.registerForUpdate=function(){return this.recipeUpdate.asObservable()},e.prototype.cancel=function(e,n){var t=this;void 0===n&&(n=!1);var l=this.craftingQueue.find(function(n){return n.id===e});if(l)if(n)this.craftingQueue=this.craftingQueue.filter(function(n){return n.id!==e}),this.recipeUpdate.next();else{this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to cancel crafting "+Vu.prepareResourceName(l.recipe.resource)+"?");var i=this.modalService.registerForConfirmation().subscribe(function(n){n&&(t.craftingQueue=t.craftingQueue.filter(function(n){return n.id!==e}),t.recipeUpdate.next()),i.unsubscribe()})}else if(l=this.cookingQueue.find(function(n){return n.id===e}))if(n)this.cookingQueue=this.cookingQueue.filter(function(n){return n.id!==e}),this.recipeUpdate.next();else{this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to cancel cooking "+Vu.prepareResourceName(l.recipe.resource)+"?");var r=this.modalService.registerForConfirmation().subscribe(function(n){n&&(t.cookingQueue=t.cookingQueue.filter(function(n){return n.id!==e}),t.recipeUpdate.next()),r.unsubscribe()})}},e.prototype.nextId=function(){var e=this.id;return this.id++,e},e.prototype.moveRecipeInCraftingQueue=function(e){lv(this.craftingQueue,e.previousIndex,e.currentIndex)},e.prototype.moveRecipeInCookingQueue=function(e){lv(this.cookingQueue,e.previousIndex,e.currentIndex)},e.prototype.getCraftingQueueMaxSize=function(){return this.craftingQueueSize},e.prototype.getCookingQueueMaxSize=function(){return this.cookingQueueSize},e.prototype.increaseCraftingQueueSize=function(e){this.craftingQueueSize+=e},e.prototype.decreaseCraftingQueueSize=function(e){this.craftingQueueSize-=e},e.prototype.increaseCookingQueueSize=function(e){this.cookingQueueSize+=e},e.prototype.decreaseCookingQueueSize=function(e){this.cookingQueueSize-=e},e.prototype.filterCraftingQueue=function(e){var n=this;this.craftingQueue.forEach(function(t){e.includes(t.recipe.id)&&n.cancel(t.id,!0)})},e.ngInjectableDef=Oe({factory:function(){return new e(Ye(am),Ye(Vf),Ye(Cm),Ye(qf))},token:e,providedIn:"root"}),e}(),Cv=function(e){return e[e.FIRST=0]="FIRST",e[e.SECOND=1]="SECOND",e[e.THIRD=2]="THIRD",e[e.FOURTH=3]="FOURTH",e}({}),Iv=function(e){return e[e.TEXT=0]="TEXT",e[e.PROGRESS_BAR=1]="PROGRESS_BAR",e[e.BUTTON=2]="BUTTON",e[e.CHECKBOX=3]="CHECKBOX",e[e.BUTTON_CHECKBOX=4]="BUTTON_CHECKBOX",e[e.TWO_BUTTON=5]="TWO_BUTTON",e[e.DROPDOWN=6]="DROPDOWN",e[e.ICON=7]="ICON",e}({}),Av=function(){function e(e,n){this.valueType=e,this.value=n}return e.emptyValue=function(){return new e(Iv.TEXT,"")},e.textValue=function(n){return new e(Iv.TEXT,n)},e.progressValue=function(n,t){return void 0===t&&(t=""),new e(Iv.PROGRESS_BAR,{value:n,label:t})},e.buttonValue=function(n,t){return new e(Iv.BUTTON,{buttonText:n,callbackValue:t})},e.buttonCheckboxValue=function(n,t,l,i,r){return new e(Iv.BUTTON_CHECKBOX,{buttonText:n,callbackValue:t,checkboxState:i,checkboxLabel:l,checkboxCallbackValue:r})},e.checkboxValue=function(n,t,l){return new e(Iv.CHECKBOX,{checkboxState:t,checkboxLabel:n,checkboxCallbackValue:l})},e.twoButtonValue=function(n,t,l,i,r){return new e(Iv.TWO_BUTTON,{button1Text:n,callback1Value:t,textBetween:l,button2Text:i,callback2Value:r})},e.dropdownValue=function(n,t){return new e(Iv.DROPDOWN,{values:n,selected:t})},e.iconValue=function(n){return new e(Iv.ICON,n)},e.prototype.getValueType=function(){return this.valueType},e.prototype.getValue=function(){return this.value},e}(),Nv=function(){return function(e,n,t,l){this.name=e,this.effect=n,this.duration=t,this.cost=l}}(),_v=function(){function e(e,n,t,l,i,r,o,u){this.servicesService=t,this.id=e,this.buildingType=n,this.demolishable=r,this.settings=l,this.stoppable=o,this.working=i,this.level=u,this.size=l.SIZE,this.complexity=l.COMPLEXITY,t&&(this.resourcesService=t.getService(zu.RESOURCES),this.effectsService=t.getService(zu.EFFECTS),this.happinessService=t.getService(zu.HAPPINESS),this.gameService=t.getService(zu.GAME),this.logService=t.getService(zu.LOG),this.modalService=t.getService(zu.MODAL),this.weatherService=t.getService(zu.WEATHER))}return e.prototype.build=function(){return this.startProduction(),this},e.prototype.getBuildingId=function(){return this.id},e.prototype.callback=function(e){},e.prototype.finishDemolish=function(){var e=this;Array.from(this.getCost().entries()).forEach(function(n){return e.resourcesService.increaseResource(n[0],Math.floor(.3*n[1]),"Demolition")})},e.prototype.fireWorker=function(){return!!this.working&&(this.resourcesService.fireWorker(),this.working=!1,!0)},e.prototype.getBuildingType=function(){return this.buildingType},e.prototype.getComplexity=function(){return this.complexity},e.prototype.getCost=function(){var e=new Map;return this.settings.COST.forEach(function(n){return e.set(n.resource,n.amount)}),e},e.prototype.getDescription=function(){return this.settings.DESCRIPTION},e.prototype.hasDetails=function(){return!0},e.prototype.getDetails=function(){var e="";(this.getBuildingLevel()>1||this.hasUpgrade())&&(e+="building level: "+this.level+"<br>");var n=0;return 1===this.level||this.buildingType===wu.CONSTRUCTION?n=this.settings.BASE_POWER:this.settings.UPGRADES&&(n=this.settings.UPGRADES[this.level-2].BASE_POWER),e+="building base power: "+n+"<br>",this.getPower()%1==0?e+="building power: "+this.getPower()+"<br>":e+="building power: "+Vu.round(this.getPower(),2)+"<br>",0!==this.getPermanentEffects()&&(e+="permanent effects: "+this.getPermanentEffects()+"%<br>"),0!==this.getEffects()&&(e+="temporary effects: "+this.getEffects()+"%<br>"),0!==this.getHappinessEffect()&&(e+="happiness effects: "+this.getHappinessEffect()+"%<br>"),0!==this.getWeatherMultiplier()&&(e+="weather multiplier: "+this.getWeatherMultiplier()+"%<br>"),e},e.prototype.getEffects=function(){return this.effectsService.getBuildingEffectsValue(this.buildingType,!1,this.id)},e.prototype.getPermanentEffects=function(){return this.effectsService.getBuildingEffectsValue(this.buildingType,!0)},e.prototype.getHappinessEffect=function(){return this.happinessService.getHappinessEffect()},e.prototype.getWeatherMultiplier=function(){var e=this,n=(this.settings.WEATHER?this.settings.WEATHER:[]).find(function(n){return e.weatherService.isWeather(n.weather)});return n?n.effect:0},e.prototype.getDisplayableEffectsValue=function(){var e=0;return 1===this.level||this.buildingType===wu.CONSTRUCTION?e=this.settings.BASE_POWER:this.settings.UPGRADES&&(e=this.settings.UPGRADES[this.level-2].BASE_POWER),Number(Vu.round(100*(this.getPower()/e-1),2))},e.prototype.getPower=function(){var e=0;return 1===this.level||this.buildingType===wu.CONSTRUCTION?e=this.settings.BASE_POWER:this.settings.UPGRADES&&(e=this.settings.UPGRADES[this.level-2].BASE_POWER),e*(1+(this.getPermanentEffects()+this.getEffects()+this.getHappinessEffect())/100)*(1+this.getWeatherMultiplier()/100)},e.prototype.isUsedUp=function(){return!1},e.prototype.getLine=function(e){switch(e){case Cv.FIRST:case Cv.SECOND:case Cv.THIRD:case Cv.FOURTH:return Av.emptyValue()}},e.prototype.getName=function(){return Vu.titleCase(Vu.prepareBuildingName(this.buildingType))},e.prototype.getSize=function(){return this.size},e.prototype.buildOnMountain=function(){return!1},e.prototype.getWorkers=function(){return this.working?1:0},e.prototype.hireWorker=function(){return!(this.working||!this.resourcesService.hireWorker()||(this.working=!0,0))},e.prototype.isDemolishable=function(){return this.demolishable},e.prototype.isStoppable=function(){return this.stoppable},e.prototype.isComplexManagement=function(){return!1},e.prototype.getWorkSettings=function(){return null},e.prototype.setWorkSettings=function(e){},e.prototype.isWorking=function(){return this.working},e.prototype.prepareDemolish=function(){return this.stopProduction(),!0},e.prototype.startProduction=function(){return!(this.working||!this.resourcesService.hireWorker()||(this.working=!0,0))},e.prototype.stopProduction=function(){this.working&&(this.resourcesService.fireWorker(),this.working=!1)},e.prototype.tick=function(e){},e.prototype.isCombinable=function(){return!1},e.prototype.isSplittable=function(){return!1},e.prototype.hasBuff=function(){return this.settings.BUFF},e.prototype.isBuffed=function(){var e=this;return!!this.hasBuff()&&this.effectsService.getBuildingEffects(this.buildingType).filter(function(n){return n.buff===e.id}).length>0},e.prototype.getBuff=function(){if(this.settings.BUFF){var e=new Map;return this.settings.BUFF.cost.forEach(function(n){return e.set(n.resource,n.amount)}),new Nv(this.settings.BUFF.name,this.settings.BUFF.effect,this.settings.BUFF.duration,e)}return null},e.prototype.hasUpgrade=function(){var e=this;if(this.settings.UPGRADES&&this.settings.UPGRADES.length>=this.getBuildingLevel()){if(this.settings.UPGRADES[this.getBuildingLevel()-1].PREREQUISITES){var n=!0;return this.settings.UPGRADES[this.getBuildingLevel()-1].PREREQUISITES.forEach(function(t){e.gameService.isEnabled(t)||(n=!1)}),n}return!0}return!1},e.prototype.getUpgradeSettings=function(){return this.settings.UPGRADES&&this.settings.UPGRADES.length>=this.getBuildingLevel()?this.settings.UPGRADES[this.getBuildingLevel()-1]:null},e.prototype.getUpgradeCost=function(){var e=new Map;return this.hasUpgrade()&&this.settings.UPGRADES[this.level-1].COST.forEach(function(n){return e.set(n.resource,n.amount)}),e},e.prototype.setBuildingLevel=function(e){this.level=e},e.prototype.getBuildingLevel=function(){return this.level},e.prototype.getBuildingData=function(){return null},e.prototype.setBuildingData=function(e){},e}(),wv=function(e){function n(n,t,l,i,r,o,u,s,a,c,p){void 0===n&&(n=null);var h=e.call(this,t,l,n,i,!1,!0,!1,c)||this;return h.occupants=r,h.progress=o,h.food=u,h.fuel=s,h.clothes=a,h.enabled=p,h.maxSize=i.MAX_OCCUPANTS,h.servicesService&&(h.villageService=n.getService(zu.VILLAGE),h.weatherService=n.getService(zu.WEATHER),h.religionService=n.getService(zu.RELIGION),h.managementService=n.getService(zu.MANAGEMENT)),h}return i(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,occupants:this.occupants,maxSize:this.maxSize,progress:this.progress,food:this.food,fuel:this.fuel,clothes:this.clothes,enabled:this.enabled}},n.prototype.getLine=function(e){switch(e){case Cv.FIRST:return Av.textValue("occupants: "+this.occupants+"/"+this.maxSize);case Cv.SECOND:return Av.progressValue(this.occupants<this.maxSize?this.progress:-1);case Cv.THIRD:return this.food>0?Av.emptyValue():Av.progressValue(Math.abs(this.food),"famine");case Cv.FOURTH:return this.fuel>=0?this.weatherService.getCurrentTemperature()<10&&this.occupants>0?Av.textValue("heating"):Av.emptyValue():Av.progressValue(Math.abs(this.fuel),"freezing")}},n.prototype.tick=function(){if(this.enabled){if(this.clothes<50&&(this.resourcesService.decreaseResource(Iu.CLOTHES,1,this.getName()+" clothing")?this.clothes+=50:this.managementService.getFurClothes()&&this.resourcesService.decreaseResource(Iu.FUR,1,this.getName()+" clothing")&&(this.clothes+=2)),this.food<=this.settings.STORAGE-50){var e=this.resourcesService.getPriorityFood(this.getName());if(this.food<0){var n=Math.abs(this.food)/2;e>=n?(e-=n,this.food=0):(this.food-=2*e,e=0)}this.food+=e}for(var t=Number(this.managementService.getRations()),l=0;l<this.occupants;l++)this.food>0?(this.food-=.5*t,1===t?this.happinessService.decreaseHappiness(.003,ss.FOOD_HAPPINESS_FLOOR):this.happinessService.getHappiness()<75&&(2===t?this.happinessService.increaseHappiness(.001,ss.FOOD_HAPPINESS_LIMIT):3===t?this.happinessService.increaseHappiness(.0025,1.5*ss.FOOD_HAPPINESS_LIMIT):4===t&&this.happinessService.increaseHappiness(.005,2*ss.FOOD_HAPPINESS_LIMIT))):(this.food-=.5,this.happinessService.decreaseHappiness(.005,ss.FOOD_HAPPINESS_FLOOR));this.food<0&&0===this.occupants&&(this.food=0),this.food<-100&&this.occupants>0&&(this.occupants-=1,this.food=-1,this.resourcesService.removePeople(1)),this.food<0&&this.occupants>0&&this.religionService.getFaithShield()>0&&(this.food=100*this.religionService.decreaseFaithShield(Math.abs(this.food)/100)),this.fuel<=this.settings.STORAGE-50&&(this.fuel+=this.resourcesService.getFuel(this.getName()));var i=this.weatherService.getCurrentTemperature(),r=this.managementService.getClothesRations();if(i<10&&this.occupants>0){var o=.2*(10-i)/10*(this.settings.SIZE/10*(1-this.settings.FUEL_EFFICIENCY));if(this.clothes>0?(this.clothes-=.01*this.occupants*r,o/=r+1,this.clothes<0&&(this.clothes=0),this.happinessService.increaseHappiness(.01*this.occupants,ss.CLOTHES_HAPPINESS_LIMIT)):this.happinessService.decreaseHappiness(.01*this.occupants,ss.CLOTHES_HAPPINESS_FLOOR),this.fuel-o<-100&&this.resourcesService.getPeople()+this.resourcesService.getWorkers()>0){var u=[{item:Hu.COLD,chance:_s.getSickness(Hu.COLD).CHANCE},{item:Hu.FLU,chance:_s.getSickness(Hu.FLU).CHANCE},{item:Hu.PNEUMONIA,chance:_s.getSickness(Hu.PNEUMONIA).CHANCE}],s=Qu.randomElement(u,!0);null!=s&&(this.managementService.getLogSickness()&&this.logService.warning(s===Hu.PNEUMONIA?"Villager developed "+Vu.prepareSicknessName(s):"Villager caught a "+Vu.prepareSicknessName(s)),this.resourcesService.addSick(s)),this.fuel=0}else this.fuel-=o;if(this.fuel<0&&this.occupants>0&&this.religionService.getFaithShield()>0)return void(this.fuel=200*this.religionService.decreaseFaithShield(Math.abs(this.food)/200));this.fuel<0?this.happinessService.decreaseHappiness(.01,ss.HEAT_HAPPINESS_FLOOR):this.happinessService.increaseHappiness(.005,ss.HEAT_HAPPINESS_LIMIT)}else this.fuel<0&&(this.fuel=0),i>10&&(this.clothes>0?(this.clothes-=.005*this.occupants*r,this.clothes<0&&(this.clothes=0),this.happinessService.increaseHappiness(.01*this.occupants,ss.CLOTHES_HAPPINESS_LIMIT)):this.happinessService.decreaseHappiness(.01*this.occupants,ss.CLOTHES_HAPPINESS_FLOOR));this.progress<100&&this.occupants<this.maxSize&&this.food>0?(this.progress+=this.getPower(),this.progress>100&&(this.progress=100)):this.occupants<this.maxSize&&100===this.progress?(this.occupants+=1,this.resourcesService.createPeople(1),this.progress=0):this.progress>0&&this.food<=0&&(this.progress-=this.getPower())}},n.prototype.build=function(){return this.resourcesService.increasePopulationCap(this.maxSize),this},n.prototype.prepareDemolish=function(){if(this.occupants>0){var e=this.villageService.moveOccupants(this,this.occupants,this.food,this.fuel,this.clothes);this.resourcesService.removePeople(e)}return this.resourcesService.decreasePopulationCap(this.maxSize),!0},n.prototype.getDetails=function(){return"occupants: "+this.occupants+"/"+this.maxSize+"<br>food nutrition: "+Vu.round(this.food,2)+"<br>heating fuel: "+Vu.round(this.fuel,2)+"<br>clothes: "+Vu.round(this.clothes,2)+"<br>"+e.prototype.getDetails.call(this)},n.prototype.hasDetails=function(){return!0},n.prototype.stopProduction=function(){this.enabled=!1},n.prototype.startProduction=function(){return this.enabled=!0,!0},n.prototype.isStoppable=function(){return 0===this.occupants||!this.enabled},n.prototype.isWorking=function(){return this.enabled},n.prototype.getMaxSize=function(){return this.maxSize},n.prototype.getOccupants=function(){return this.occupants},n.prototype.addOccupant=function(){return this.occupants<this.maxSize&&(this.occupants+=1,this.occupants===this.maxSize&&(this.progress=0),!0)},n.prototype.removeOccupant=function(){return this.occupants>0&&(this.occupants-=1,!0)},n.prototype.addFood=function(e){this.food+=e},n.prototype.addFuel=function(e){this.fuel+=e},n.prototype.addClothes=function(e){this.clothes+=e},n.prototype.fireWorker=function(){return!1},n.prototype.hireWorker=function(){return!1},n.prototype.getWorkers=function(){return 0},n.prototype.setBuildingLevel=function(e){},n.prototype.getBuildingData=function(){return{food:this.food,fuel:this.fuel,clothes:this.clothes,enabled:this.enabled}},n.prototype.setBuildingData=function(e){this.food=e.food,this.fuel=e.fuel,this.clothes=e.clothes,this.enabled=e.enabled},n}(_v),Pv=function(e){function n(n,t,l,i,r,o,u,s,a){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===i&&(i=0),void 0===r&&(r=100),void 0===o&&(o=100),void 0===u&&(u=0),void 0===s&&(s=1),void 0===a&&(a=!0),e.call(this,n,t,wu.HUT,ys.VILLAGE.HUT,l,i,r,o,u,s,a)||this}return i(n,e),n}(wv),xv=function(e){function n(n,t,l,i,r,o,u,s,a){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===i&&(i=0),void 0===r&&(r=100),void 0===o&&(o=100),void 0===u&&(u=0),void 0===s&&(s=1),void 0===a&&(a=!0),e.call(this,n,t,wu.HOUSE,ys.VILLAGE.HOUSE,l,i,r,o,u,s,a)||this}return i(n,e),n}(wv),kv=function(e){return e.CHOPPING_TREES="chopping trees",e.WAITING_FOR_TREES="waiting for trees",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.TRANSPORTING_LOG="transporting log",e}({}),Mv=function(e){function n(n,t,l,i,r,o,u){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===i&&(i=0),void 0===r&&(r=kv.WAITING_FOR_TREES),void 0===o&&(o=!1),void 0===u&&(u=1);var s=e.call(this,t,wu.LOGGERS_HUT,n,ys.FOREST.LOGGERS_HUT,o,!0,!0,u)||this;return s.progress=l,s.reservedTrees=i,s.status=r,s.servicesService&&(s.landService=n.getService(zu.LAND)),s}return i(n,e),n.prototype.getLine=function(e){switch(e){case Cv.FIRST:return Av.emptyValue();case Cv.SECOND:return Av.textValue(this.status);case Cv.THIRD:return Av.progressValue(this.progress);case Cv.FOURTH:return Av.emptyValue()}},n.prototype.tick=function(){this.working&&(this.status===kv.WAITING_FOR_TREES?this.landService.reduceForest(1)&&(this.status=kv.CHOPPING_TREES):this.status===kv.CHOPPING_TREES?this.progress<100&&(this.progress+=this.getPower(),this.progress>=100&&(this.progress=0,this.status=kv.TRANSPORTING_LOG)):this.status!==kv.TRANSPORTING_LOG&&this.status!==kv.WAITING_FOR_WAREHOUSE_SPACE||(this.resourcesService.increaseResource(Iu.LOG,1,this.getName())?(this.landService.increaseLand(1,!0),this.status=this.landService.reduceForest(1)?kv.CHOPPING_TREES:kv.WAITING_FOR_TREES):this.status=kv.WAITING_FOR_WAREHOUSE_SPACE))},n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,working:this.working,reservedTrees:this.reservedTrees}},n}(_v),Dv=function(e){function n(n,t,l,i,r,o,u,s,a,c){void 0===n&&(n=null),void 0===r&&(r=1),void 0===o&&(o=1),void 0===u&&(u=1),void 0===s&&(s=0),void 0===a&&(a=!1),void 0===c&&(c=null);var p=e.call(this,t,wu.CONSTRUCTION,n,ys.CONSTRUCTION_SITE,a,1===u,!0,u)||this;return p.region=l,p.constructing=i,p.buildingComplexity=r,p.buildingSize=o,p.upgradeLevel=u,p.progress=s,p.data=c,p.servicesService&&(p.resourcesService=p.servicesService.getService(zu.RESOURCES),p.buildingFactoryService=p.servicesService.getService(zu.BUILDING_FACTORY),p.regionService=p.servicesService.getServiceByRegion(l)),p}return i(n,e),n.prototype.isUpgrade=function(){return 1!==this.upgradeLevel},n.prototype.getLine=function(e){switch(e){case Cv.FIRST:return Av.emptyValue();case Cv.SECOND:return this.isUpgrade()?Av.textValue("upgrading "+Vu.prepareBuildingName(this.constructing)):Av.textValue("constructing "+Vu.prepareBuildingName(this.constructing));case Cv.THIRD:return Av.progressValue(this.progress);case Cv.FOURTH:return Av.emptyValue()}},n.prototype.tick=function(){0===this.buildingComplexity&&(this.isUpgrade()?this.regionService.finishUpgrade(this,this.constructing):this.regionService.finishConstruction(this,this.constructing)),this.working&&(this.progress<100?(this.progress+=this.getPower()/this.buildingComplexity,this.progress>100&&(this.progress=100)):this.isUpgrade()?this.regionService.finishUpgrade(this,this.constructing):this.regionService.finishConstruction(this,this.constructing))},n.prototype.build=function(){return this.startProduction()||0===this.buildingComplexity||this.servicesService.getService(zu.MODAL).info("Couldn't unlock construction. Not enough free workers."),this},n.prototype.toJSON=function(){return{id:this.id,upgradeLevel:this.upgradeLevel,buildingType:this.buildingType,region:this.region,constructing:this.constructing,buildingComplexity:this.buildingComplexity,progress:this.progress,working:this.working,buildingSize:this.buildingSize,data:this.data}},n.prototype.getComplexity=function(){return 0},n.prototype.getSize=function(){return this.buildingSize},n.prototype.finishDemolish=function(){var e=this;Array.from(this.buildingFactoryService.createBuildingShell(this.constructing).getCost().entries()).forEach(function(n){return e.resourcesService.increaseResource(n[0],Math.floor(n[1]*(1-e.progress/100)+n[1]*(e.progress/100*.3)),"Cancel construction")})},n.prototype.getConstructing=function(){return this.constructing},n.prototype.getBuildingData=function(){return this.data},n}(_v),Lv=function(e){return e.PLANTING_TREES="planting trees",e.WAITING_FOR_LAND="waiting for land",e.NO_ENOUGH_LAND="no enough free land",e.FOREST_TOO_BIG="forest too big",e}({}),Fv=function(e){function n(n,t,l,i,r,o,u,s){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===i&&(i=0),void 0===r&&(r=Lv.WAITING_FOR_LAND),void 0===o&&(o=1),void 0===u&&(u=!1),void 0===s&&(s=1);var a=e.call(this,t,wu.FORESTER,n,ys.FOREST.FORESTER,u,!0,!0,s)||this;return a.progress=l,a.localStorage=i,a.status=r,a.effectiveness=o,a.servicesService&&(a.landService=n.getService(zu.LAND),a.modalService=n.getService(zu.MODAL)),a}return i(n,e),n.prototype.getLine=function(e){switch(e){case Cv.FIRST:return Av.emptyValue();case Cv.SECOND:return Av.textValue(this.status);case Cv.THIRD:return Av.progressValue(this.progress);case Cv.FOURTH:return Av.emptyValue()}},n.prototype.tick=function(){if(this.working){if(0===this.localStorage){var e=this.landService.getForestOptions();if(e.forestSizeRuleEnabled&&this.landService.getForest()>=e.forestSizeRule)return void(this.status=Lv.FOREST_TOO_BIG);if(e.landSizeRuleEnabled&&this.landService.getLand()<=e.landSizeRule)return void(this.status=Lv.NO_ENOUGH_LAND);this.landService.reduceLand(this.effectiveness)?(this.localStorage=this.effectiveness,this.status=Lv.PLANTING_TREES):this.status=Lv.WAITING_FOR_LAND}this.localStorage>0&&(this.progress<100?(this.progress+=this.getPower(),this.progress>100&&(this.progress=100)):(this.landService.increaseForest(this.localStorage,!1),this.progress=0,this.localStorage=0))}},n.prototype.prepareDemolish=function(){return this.localStorage>0&&this.landService.increaseLand(this.localStorage,!0),e.prototype.prepareDemolish.call(this)},n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,localStorage:this.localStorage,status:this.status,effectiveness:this.effectiveness,working:this.working}},n}(_v),Uv=function(){function e(e,n,t,l,i,r,o,u){void 0===r&&(r=!1),void 0===o&&(o=!1),void 0===u&&(u=""),this.enabled=e,this.buildingType=n,this.seasons=t,this.inputSettings=l,this.outputSettings=i,this.customRuleEnabled=o,this.hasCustomRule=r,this.customRuleText=u}return e.clone=function(n){var t=null,l=null;return n.inputSettings&&(t=[],n.inputSettings.forEach(function(e){t.push([e[0],e[1]])})),n.outputSettings&&(l=[],n.outputSettings.forEach(function(e){l.push([e[0],e[1],e[2]])})),new e(n.enabled,n.buildingType,[n.seasons[0],n.seasons[1],n.seasons[2],n.seasons[3]],t,l,n.hasCustomRule,n.customRuleEnabled,n.customRuleText)},e}(),Hv=function(e){return e.FETCHING_INPUT="fetching {in}",e.WAITING_FOR_INPUT="waiting for {wait}",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.PREPARING="preparing {out}",e.PRODUCING_OUTPUT="{prod} {out}",e.TRANSPORTING_OUTPUT="transporting {out}",e}({}),Gv=function(e){function n(n,t,l,i,r,o,u,s,a,c,p){void 0===n&&(n=null),void 0===o&&(o=0),void 0===u&&(u=[]),void 0===s&&(s=[]),void 0===a&&(a=!1),void 0===c&&(c=null);var h=e.call(this,t,l,n,i,a,!0,!0,p)||this;if(h.status=r,h.progress=o,h.inputStorage=u,h.outputStorage=s,h.workSettings=c,h.productionText=i.TEXT,n)if(h.managementService=n.getService(zu.MANAGEMENT),h.calendarService=n.getService(zu.CALENDAR),null===h.workSettings){var d=i.INPUT_RESOURCES.map(function(e){return[e.resource,0]}),g=i.OUTPUT_RESOURCES.map(function(e){return e.resource===Iu.COINS?[e.resource,0,!0]:[e.resource,h.resourcesService.getResource(e.resource).getLimit(),!0]});h.workSettings=new Uv(!0,l,f=[!0,!0,!0,!0],d,g)}else if(!h.workSettings.seasons){var f=[!0,!0,!0,!0],m=[];c.outputSettings.forEach(function(e){return m.push([e[0],e[1],void 0===e[2]||e[2]])}),h.workSettings=new Uv(!0,l,f,c.inputSettings,m)}return h}return i(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,workSettings:this.workSettings,buildingType:this.buildingType,progress:this.progress,status:this.status,inputStorage:this.inputStorage,outputStorage:this.outputStorage,working:this.working}},n.prototype.getLine=function(e){switch(e){case Cv.FIRST:return Av.emptyValue();case Cv.SECOND:var n=Vu.resourcesArraysDiff(this.settings.INPUT_RESOURCES,this.inputStorage),t=String(this.status);return n.length>0&&(t=t.replace("{wait}",Vu.prepareResourcesNamesList(n))),t=(t=(t=t.replace("{in}",Vu.prepareResourcesNamesList(this.settings.INPUT_RESOURCES))).replace("{out}",Vu.prepareResourcesNamesList(this.settings.OUTPUT_RESOURCES))).replace("{prod}",this.productionText+" "),Av.textValue(t);case Cv.THIRD:return Av.progressValue(this.progress);case Cv.FOURTH:return Av.emptyValue()}},n.prototype.isMet=function(){var e=this,n=!0;return this.workSettings.seasons[this.calendarService.getSeason()]||n&&(n=!1),this.workSettings.inputSettings.forEach(function(t){n&&(n=e.resourcesService.getResource(t[0]).amount>t[1])}),this.workSettings.outputSettings.forEach(function(t){n&&(n=t[2]?e.resourcesService.getResource(t[0]).amount<e.resourcesService.getResource(t[0]).limit:e.resourcesService.getResource(t[0]).amount<t[1])}),n},n.prototype.tick=function(){this.managementService.getComplexWorkers()&&this.workSettings&&this.workSettings.enabled&&(this.isMet()?this.isWorking()||this.hireWorker():this.isWorking()&&this.status!==Hv.PRODUCING_OUTPUT&&this.status!==Hv.TRANSPORTING_OUTPUT&&this.fireWorker()),this.isWorking()&&(this.outputStorage.length>0?this.collectOutputResources():this.inputStorage.length<this.settings.INPUT_RESOURCES.length&&0===this.outputStorage.length?this.collectInputResources():this.progress<100?(this.status=Hv.PRODUCING_OUTPUT,this.progress+=this.getPower(),this.progress>100&&(this.progress=100)):100===this.progress&&(this.progress=0,this.inputStorage=[],this.outputStorage=Vu.copyResourceArray(this.settings.OUTPUT_RESOURCES),this.status=Hv.TRANSPORTING_OUTPUT))},n.prototype.collectInputResources=function(){var e=this,n=!0;return this.settings.INPUT_RESOURCES.forEach(function(t){e.inputStorage.find(function(e){return e.resource===t.resource})||(e.resourcesService.decreaseResource(t.resource,t.amount,e.getName())?e.inputStorage.push({resource:t.resource,amount:t.amount}):n=!1)}),n?(this.status=Hv.FETCHING_INPUT,!0):(this.status=Hv.WAITING_FOR_INPUT,!1)},n.prototype.collectOutputResources=function(){var e=this,n=!0;return this.outputStorage.forEach(function(t){e.resourcesService.increaseResource(t.resource,t.amount,e.getName())?t.amount=0:n=!1}),this.outputStorage=this.outputStorage.filter(function(e){return e.amount>0}),n?0===this.outputStorage.length?(this.status=Hv.FETCHING_INPUT,!0):void 0:(this.status=Hv.WAITING_FOR_WAREHOUSE_SPACE,!1)},n.prototype.isComplexManagement=function(){return!0},n.prototype.getWorkSettings=function(){return this.workSettings},n.prototype.setWorkSettings=function(e){this.workSettings=e},n}(_v),Bv=function(e){function n(n,t,l,i,r,o,u,s,a){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===i&&(i=Hv.FETCHING_INPUT),void 0===r&&(r=[]),void 0===o&&(o=[]),void 0===u&&(u=!1),void 0===s&&(s=null),void 0===a&&(a=1),e.call(this,n,t,wu.SAWMILL,ys.FOREST.SAWMILL,i,l,r,o,u,s,a)||this}return i(n,e),n}(Gv),Vv=function(e){function n(n,t,l,i,r,o,u,s){void 0===n&&(n=null),void 0===r&&(r=1),void 0===o&&(o=1),void 0===u&&(u=0),void 0===s&&(s=!1);var a=e.call(this,t,wu.DECONSTRUCTION,n,ys.DECONSTRUCTION_SITE,s,!1,!0,1)||this;return a.region=l,a.deconstructing=i,a.buildingComplexity=r,a.buildingSize=o,a.progress=u,a.servicesService&&(a.regionService=n.getServiceByRegion(l)),a}return i(n,e),n.prototype.getLine=function(e){switch(e){case Cv.FIRST:return Av.emptyValue();case Cv.SECOND:return Av.textValue("deconstructing "+Vu.prepareBuildingName(this.deconstructing));case Cv.THIRD:return Av.progressValue(this.progress);case Cv.FOURTH:return Av.emptyValue()}},n.prototype.tick=function(){this.working&&(this.progress<100?(this.progress+=this.getPower()/this.buildingComplexity,this.progress>100&&(this.progress=100)):this.regionService.finishDeconstruction(this))},n.prototype.toJSON=function(){return{id:this.id,buildingType:this.buildingType,region:this.region,deconstructing:this.deconstructing,buildingComplexity:this.buildingComplexity,progress:this.progress,working:this.working,buildingSize:this.buildingSize}},n.prototype.getComplexity=function(){return 0},n.prototype.getSize=function(){return this.buildingSize},n.prototype.prepareDemolish=function(){return!1},n.prototype.finishDemolish=function(){},n.prototype.getBuildingBeingDemolished=function(){return this.deconstructing},n.prototype.getDecontructing=function(){return this.deconstructing},n}(_v),Wv=function(e){return e.GATHERING_FOOD="gathering food",e.GATHERING_RESOURCES="gathering resources",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.TRANSPORTING="transporting",e}({}),zv=function(e){return e[e.FOOD=0]="FOOD",e[e.RESOURCES=1]="RESOURCES",e}({}),Yv=function(e){function n(n,t,l,i,r,o,u,s){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===i&&(i=Wv.GATHERING_FOOD),void 0===r&&(r=!1),void 0===o&&(o=zv.FOOD),void 0===u&&(u=[null,0]),void 0===s&&(s=1);var a=e.call(this,t,wu.GATHERER,n,ys.FOREST.GATHERER,r,!0,!0,s)||this;return a.progress=l,a.status=i,a.mode=o,a.storage=u,a.lastFind=null,a.servicesService&&(a.weatherService=n.getService(zu.WEATHER)),a}return i(n,e),n.prototype.rollForFind=function(){var e=null;return this.mode===zv.FOOD?e=Qu.randomElement([{item:Iu.BERRY,chance:this.settings.BERRY_CHANCE},{item:Iu.MUSHROOM,chance:this.settings.MUSHROOM_CHANCE},{item:Iu.WHEAT,chance:this.settings.WHEAT_CHANCE},{item:Iu.HERBS,chance:this.settings.HERBS_CHANCE}]):this.mode===zv.RESOURCES&&(e=Qu.randomElement([{item:Iu.BRUSHWOOD,chance:this.settings.BRUSHWOOD_CHANCE},{item:Iu.STONE,chance:this.settings.STONE_CHANCE},{item:Iu.LOG,chance:this.settings.LOG_CHANCE},{item:Iu.COPPER,chance:this.settings.COPPER_CHANCE},{item:Iu.HERBS,chance:this.settings.HERBS_CHANCE}])),e},n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,working:this.working,storage:this.storage,mode:this.mode}},n.prototype.build=function(){return this.servicesService.getService(zu.MANAGEMENT).getDefaultGathererFood()||(this.mode=zv.RESOURCES,this.status=Wv.GATHERING_RESOURCES),e.prototype.build.call(this)},n.prototype.callback=function(e){e===zv.FOOD?(this.mode=zv.FOOD,this.progress=0,this.status=Wv.GATHERING_FOOD):e===zv.RESOURCES&&(this.mode=zv.RESOURCES,this.progress=0,this.status=Wv.GATHERING_RESOURCES)},n.prototype.getLine=function(e){switch(e){case Cv.FIRST:return this.mode===zv.FOOD?Av.buttonValue("gather resources",zv.RESOURCES):Av.buttonValue("gather food",zv.FOOD);case Cv.SECOND:return Av.textValue(this.status);case Cv.THIRD:return Av.progressValue(this.progress);case Cv.FOURTH:return null!=this.lastFind?Av.textValue("last find: "+Vu.prepareResourceName(this.lastFind)):Av.emptyValue()}},n.prototype.tick=function(e){if(this.working)if(this.storage[1]>0)this.resourcesService.increaseResource(this.storage[0],this.storage[1],this.getName()),this.storage=[null,0],this.setStatus();else if(this.progress<100)this.progress+=this.getPower(),this.progress>100&&(this.progress=100);else if(100===this.progress){this.progress=0;var n=this.rollForFind();if(null!==n&&!this.resourcesService.hasLimit(n))return void(n=null);n?(this.lastFind=n,this.storage=[n,1],this.status=Wv.TRANSPORTING):(this.lastFind=Iu.NOTHING,this.progress=0)}},n.prototype.setStatus=function(){this.status=this.mode===zv.FOOD?Wv.GATHERING_FOOD:Wv.GATHERING_RESOURCES},n}(_v),Kv=function(e){return e.MINING_STONE="mining stone",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.NO_MORE_RESOURCES="no more resources",e.TRANSPORTING="transporting",e}({}),jv=function(e){function n(n,t,l,i,r,o,u,s){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===i&&(i=Kv.MINING_STONE),void 0===r&&(r=!1),void 0===o&&(o=0),void 0===u&&(u=200),void 0===s&&(s=1);var a=e.call(this,t,wu.QUARRY,n,ys.MOUNTAINS.QUARRY,r,!0,!0,s)||this;return a.progress=l,a.status=i,a.storage=o,a.resources=u,a.servicesService&&(a.gameService=n.getService(zu.GAME)),a}return i(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,working:this.working,storage:this.storage,resources:this.resources}},n.prototype.build=function(){return this.startProduction(),this.gameService.enable(_u.BUILT_QUARRY),this},n.prototype.buildOnMountain=function(){return!0},n.prototype.getLine=function(e){switch(e){case Cv.FIRST:return Av.textValue("stone: "+this.resources);case Cv.SECOND:return Av.textValue(this.status);case Cv.THIRD:return Av.progressValue(this.progress);case Cv.FOURTH:return Av.emptyValue()}},n.prototype.isStoppable=function(){return this.resources>0},n.prototype.isUsedUp=function(){return this.status===Kv.NO_MORE_RESOURCES},n.prototype.hasBuff=function(){return!this.isUsedUp()&&e.prototype.hasBuff.call(this)},n.prototype.tick=function(e){this.resources<=0&&(this.status!==Kv.NO_MORE_RESOURCES&&this.servicesService.getService(zu.LOG).warning("Quarry mined all stone"),this.status=Kv.NO_MORE_RESOURCES,this.stopProduction()),this.working&&(this.storage>0?this.resourcesService.increaseResource(Iu.STONE,this.storage,this.getName())?(this.storage=0,this.status=Kv.MINING_STONE):this.status=Kv.WAITING_FOR_WAREHOUSE_SPACE:this.progress<100?(this.status=Kv.MINING_STONE,this.progress+=this.getPower(),this.progress>100&&(this.progress=100)):100===this.progress&&(this.progress=0,this.resources-=1,this.storage=1,this.status=Kv.TRANSPORTING))},n}(_v),$v=function(e){return e.RESEARCHING="researching",e.CRAFTING="crafting {craft}",e.WAITING_FOR_WAREHOUSE="waiting for {craft} space",e.NO_RESEARCH="nothing to research",e.NO_CRAFTING="nothing to craft",e}({}),Qv=function(e){return e[e.RESEARCH=0]="RESEARCH",e[e.CRAFT=1]="CRAFT",e[e.SWITCH_TO_RESEARCH=2]="SWITCH_TO_RESEARCH",e}({}),qv=function(e){function n(n,t,l,i,r,o,u,s,a,c){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===i&&(i=$v.NO_RESEARCH),void 0===r&&(r=Qv.RESEARCH),void 0===o&&(o=!1),void 0===u&&(u=-1),void 0===s&&(s=null),void 0===a&&(a=1),void 0===c&&(c=0);var p=e.call(this,t,wu.WORKSHOP,n,ys.VILLAGE.WORKSHOP,o,!0,!0,a)||this;return p.progress=l,p.status=i,p.mode=r,p.storage=c,p.recipe=null,p.icon=null,p.servicesService&&(s?p.recipe=s:u>=0&&(p.recipe=p.servicesService.getService(zu.RECIPE).getRecipeById(u)),p.craftingService=n.getService(zu.CRAFTING),p.techService=n.getService(zu.RESEARCH),p.gameService=n.getService(zu.GAME)),p}return i(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,mode:this.mode,working:this.working,recipeId:null!==this.recipe?this.recipe.id:-1,storage:this.storage}},n.prototype.build=function(){this.servicesService.getService(zu.MANAGEMENT).getDefaultWorkshopResearch()||(this.mode=Qv.CRAFT),this.startProduction();var e=this.servicesService.getService(zu.LOG);return this.gameService.isEnabled(_u.RESEARCH)||(this.gameService.enable(_u.RESEARCH),e.log("Researching unlocked")),this.gameService.isEnabled(_u.CRAFTING)||(this.gameService.enable(_u.CRAFTING),e.log("Crafting unlocked")),this.craftingService.increaseCraftingQueueSize(1),this},n.prototype.prepareDemolish=function(){return this.craftingService.decreaseCraftingQueueSize(1),e.prototype.prepareDemolish.call(this)},n.prototype.callback=function(e){var n=this;if("switch"===e){if(this.mode===Qv.RESEARCH)this.progress=0,this.mode=Qv.CRAFT,this.recipe=this.craftingService.getCraftingOrder(),this.icon=null,this.status=null!==this.recipe?$v.CRAFTING:$v.NO_CRAFTING;else if(this.mode===Qv.SWITCH_TO_RESEARCH)this.mode=Qv.CRAFT,this.status=null!==this.recipe?$v.CRAFTING:$v.NO_CRAFTING;else if(this.mode===Qv.CRAFT)if(this.recipe){this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Workshop will switch to research after finishing current craft.");var t=this.modalService.registerForConfirmation().subscribe(function(e){t.unsubscribe(),e&&(n.mode=Qv.SWITCH_TO_RESEARCH)})}else this.progress=0,this.mode=Qv.RESEARCH,this.status=this.techService.isResearchStarted()?$v.RESEARCHING:$v.NO_RESEARCH}else"cancel"===e&&(this.recipe=null,this.progress=0,this.mode===Qv.SWITCH_TO_RESEARCH?(this.mode=Qv.RESEARCH,this.status=this.techService.isResearchStarted()?$v.RESEARCHING:$v.NO_RESEARCH):this.status=$v.NO_CRAFTING)},n.prototype.getLine=function(e){switch(e){case Cv.FIRST:return this.firstLine();case Cv.SECOND:return this.recipe?(this.icon||(this.prepareIcon(),this.status===$v.CRAFTING?this.icon[0].prefix="crafting ":this.status===$v.WAITING_FOR_WAREHOUSE&&(this.icon[0].prefix="waiting for ",this.icon[0].suffix=" space")),Av.iconValue(this.icon)):Av.textValue(this.status.replace("{craft}","warehouse"));case Cv.THIRD:if(this.recipe)return Av.buttonValue("cancel crafting","cancel");var n="";return this.techService.getCurrentResearch()&&(n=Vu.prepareTechName(this.techService.getCurrentResearch().getTech())),Av.textValue(n);case Cv.FOURTH:return Av.progressValue(this.progress)}},n.prototype.firstLine=function(){return Av.buttonValue(this.mode===Qv.RESEARCH||this.mode===Qv.SWITCH_TO_RESEARCH?"craft":"research","switch")},n.prototype.tick=function(e){if(this.working)if(this.mode===Qv.RESEARCH)this.techService.isResearchStarted()?(this.status!==$v.RESEARCHING&&(this.progress=0),this.status=$v.RESEARCHING,this.progress+=this.getPower(),this.progress>=100&&(this.progress=0,this.techService.progressTech(ys.VILLAGE.WORKSHOP.RESEARCH_POWER))):(this.status=$v.NO_RESEARCH,this.progress=0);else if(this.mode===Qv.CRAFT||this.mode===Qv.SWITCH_TO_RESEARCH)if(null===this.recipe&&(this.recipe=this.craftingService.getCraftingOrder(),this.icon=null,this.progress=0),null===this.recipe)this.status=$v.NO_CRAFTING;else if(this.status===$v.WAITING_FOR_WAREHOUSE){var n=this.resourcesService.getLimit(this.recipe.resource);this.storage>n?(this.storage-=n,this.resourcesService.increaseResource(this.recipe.resource,n,this.getName())):(this.resourcesService.increaseResource(this.recipe.resource,this.storage,this.getName()),this.status=$v.CRAFTING,this.progress=0,this.recipe=null)}else this.status=$v.CRAFTING,this.progress<100&&(this.progress+=this.getPower()/this.recipe.craftingDifficulty*ys.VILLAGE.WORKSHOP.CRAFTING_POWER),this.progress>=100&&(this.progress=100,this.storage=this.recipe.amount,n=this.resourcesService.getLimit(this.recipe.resource),this.storage>n?(this.storage-=n,this.resourcesService.increaseResource(this.recipe.resource,n,this.getName()),this.status=$v.WAITING_FOR_WAREHOUSE,this.icon=null):this.resourcesService.increaseResource(this.recipe.resource,this.storage,this.getName())?(this.progress=0,this.storage=0,this.recipe=null,this.mode===Qv.SWITCH_TO_RESEARCH&&(this.mode=Qv.RESEARCH,this.status=this.techService.isResearchStarted()?$v.RESEARCHING:$v.NO_RESEARCH)):(this.status=$v.WAITING_FOR_WAREHOUSE,this.icon=null))},n.prototype.getRecipe=function(){return this.recipe},n.prototype.cancelCrafting=function(){this.recipe=null},n.prototype.willResearch=function(){return this.mode===Qv.RESEARCH||this.mode===Qv.SWITCH_TO_RESEARCH},n.prototype.prepareIcon=function(){this.recipe&&(this.icon=[{name:Vu.prepareResourceName(this.recipe.resource),path:"resources",prefix:"",suffix:""}])},n}(_v),Xv=function(e){function n(n,t,l,i,r){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=Mu.NONE),void 0===i&&(i=50),void 0===r&&(r=1);var o=e.call(this,t,wu.WAREHOUSE,n,ys.VILLAGE.WAREHOUSE,!1,!0,!1,r)||this;return o.resource=l,o.storage=i,o.servicesService&&(o.modalService=n.getService(zu.MODAL)),o}return i(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,resource:this.resource,storage:this.storage}},n.prototype.callback=function(e){var n=this;if(this.resource===Mu.NONE)this.resource=Mu[String(e.target.value)],this.resourcesService.increaseLimit(this.resource,this.storage);else{this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to switch warehouse storage type?<br>All excess resources will be lost");var t=this.modalService.registerForConfirmation().subscribe(function(l){l?(n.resourcesService.decreaseLimit(n.resource,n.storage),n.resource=Mu[String(e.target.value)],n.resourcesService.increaseLimit(n.resource,n.storage)):e.target.selectedIndex=n.resource-1,t.unsubscribe()})}},n.prototype.getComplexity=function(){return e.prototype.getComplexity.call(this)*(this.storage/this.settings.SIZE)},n.prototype.getSize=function(){return this.storage},n.prototype.getLine=function(e){switch(e){case Cv.FIRST:return this.firstLine();case Cv.SECOND:return Av.textValue("storage: "+this.storage);case Cv.THIRD:case Cv.FOURTH:return Av.emptyValue()}},n.prototype.firstLine=function(){var e=[];return e.push(Mu[Mu.NONE]),e.push(Mu[Mu.RAW]),e.push(Mu[Mu.PROCESSED]),e.push(Mu[Mu.FOOD]),e.push(Mu[Mu.TOOLS]),Av.dropdownValue(e,Mu[this.resource])},n.prototype.prepareDemolish=function(){return this.resourcesService.decreaseLimit(this.resource,this.storage),!0},n.prototype.startProduction=function(){return!1},n.prototype.stopProduction=function(){},n.prototype.fireWorker=function(){return!1},n.prototype.hireWorker=function(){return!1},n.prototype.getWorkers=function(){return 0},n.prototype.getHappinessEffect=function(){return 0},n.prototype.isCombinable=function(){return!0},n.prototype.isSplittable=function(){return!0},n.prototype.combine=function(e,n){var t=this;if(this.getBuildingType()===e.getBuildingType()){this.modalService.open(ju.CONFIRM),this.modalService.setModalText(" Are you sure you want to combine "+this.getName()+" of size "+this.getSize()+" with "+e.getName()+" of size "+e.getSize()+"?<br>Resulting "+this.getName()+" of size "+(this.getSize()+e.getSize())+" will store <b>"+Vu.prepareResourceTypeName(this.resource)+" resources</b><br>All resources exceeding decreased limit of <b>"+Vu.prepareResourceTypeName(e.resource)+"</b> will be lost");var l=this.modalService.registerForConfirmation().subscribe(function(i){l.unsubscribe(),i?(t.storage+=e.getSize(),t.resource!==Mu.NONE&&t.resourcesService.increaseLimit(t.resource,e.getSize()),n.finaliseCombine(!0)):n.finaliseCombine(!1)})}},n.prototype.split=function(e){var t=this;this.modalService.open(ju.INPUT),this.modalService.setModalText("Set split size (1-"+(this.getSize()-1)+")"),this.modalService.setModalValue("");var l=this.modalService.registerForValueResponse().subscribe(function(i){l.unsubscribe(),null!==i&&(isNaN(i)||0===i||(i>=1&&i<t.getSize()?(t.storage-=Number(i),e.finaliseSplit(new n(t.servicesService,t.servicesService.getService(zu.ID).getNextId(),t.resource,Number(i)).build())):t.modalService.info("Invalid size value!")))})},n}(_v),Zv=function(e){return e.HUNTING="hunting",e.TAME="taming animals",e.WAITING_FOR_PASTURE_SPACE="waiting for pasture space",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.TRANSPORTING="transporting",e}({}),Jv=function(e){return e[e.HUNTING=0]="HUNTING",e[e.TAMING=1]="TAMING",e}({}),eS=function(e){function n(n,t,l,i,r,o,u,s,a,c){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===i&&(i=Zv.HUNTING),void 0===r&&(r=Jv.HUNTING),void 0===o&&(o=!1),void 0===u&&(u=0),void 0===s&&(s=0),void 0===a&&(a=null),void 0===c&&(c=1);var p=e.call(this,t,wu.HUNTER_LODGE,n,ys.FOREST.HUNTER_LODGE,o,!0,!0,c)||this;return p.progress=l,p.status=i,p.mode=r,p.storage=u,p.storage2=s,p.animal=a,p.lastFind=null,p.servicesService&&(p.weatherService=n.getService(zu.WEATHER),p.gameService=n.getService(zu.GAME)),p}return i(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,mode:this.mode,working:this.working,storage:this.storage,storage2:this.storage2,animal:this.animal}},n.prototype.callback=function(e){"tame"===e?(this.mode=Jv.TAMING,this.progress=0,this.storage=0,this.storage2=0,this.status=Zv.TAME):(this.mode=Jv.HUNTING,this.progress=0,this.storage=0,this.storage2=0,this.lastFind=null,this.status=Zv.HUNTING)},n.prototype.getLine=function(e){switch(e){case Cv.FIRST:return this.gameService.isEnabled(_u.PASTURE)?this.mode===Jv.HUNTING?Av.buttonValue("tame animals","tame"):Av.buttonValue("hunt","hunt"):Av.emptyValue();case Cv.SECOND:return Av.textValue(this.status);case Cv.THIRD:return Av.progressValue(this.progress);case Cv.FOURTH:return null!==this.lastFind?Av.textValue("last tamed: "+Vu.prepareResourceName(this.lastFind)):Av.emptyValue()}},n.prototype.tick=function(e){if(this.working)if(this.mode===Jv.HUNTING)this.status=0!==this.storage&&0!==this.storage2?Zv.TRANSPORTING:Zv.HUNTING,this.status===Zv.HUNTING?this.progress<100&&(this.progress+=this.getPower(),this.progress>=100&&(this.progress=0,this.storage<5&&(this.storage+=Qu.randomBetween(1,3),this.storage>5&&(this.storage=5)),this.storage2<5&&(this.storage2+=Qu.randomBetween(0,2),this.storage2>5&&(this.storage2=5)),this.status=Zv.TRANSPORTING)):this.status!==Zv.TRANSPORTING&&this.status!==Zv.WAITING_FOR_WAREHOUSE_SPACE||(0!==this.storage&&this.resourcesService.increaseResource(Iu.MEAT,this.storage,this.getName())&&(this.storage=0),0!==this.storage2&&this.resourcesService.increaseResource(Iu.FUR,this.storage2,this.getName())&&(this.storage2=0),0!==this.storage&&0!==this.storage2&&(this.status=Zv.WAITING_FOR_WAREHOUSE_SPACE));else if(this.mode===Jv.TAMING)if(this.status===Zv.TAME){if(this.progress<100&&(this.progress+=this.getPower(),this.progress>=100)){this.progress=0;var n=[];this.resourcesService.hasLimit(Iu.CHICKEN)&&n.push({item:Iu.CHICKEN,chance:6}),this.resourcesService.hasLimit(Iu.SHEEP)&&n.push({item:Iu.SHEEP,chance:5}),this.resourcesService.hasLimit(Iu.PIG)&&n.push({item:Iu.PIG,chance:5}),this.resourcesService.hasLimit(Iu.COW)&&n.push({item:Iu.COW,chance:4}),this.resourcesService.hasLimit(Iu.HORSE)&&n.push({item:Iu.HORSE,chance:3}),0!==n.length||this.servicesService.getService(zu.MANAGEMENT).getSwitchHunterFromTaming()||(this.logService.log("No more space for animals. Hunter switched to hunting"),this.callback("hunt"));var t=Qu.randomElement(n);null!=t?(this.lastFind=t,this.animal=t,this.status=Zv.TRANSPORTING):(this.lastFind=Iu.NOTHING,this.animal=null)}}else this.status!==Zv.TRANSPORTING&&this.status!==Zv.WAITING_FOR_PASTURE_SPACE||this.animal&&(this.resourcesService.increaseResource(this.animal,1,this.getName())?(this.animal=null,this.status=Zv.TAME):this.status=Zv.WAITING_FOR_PASTURE_SPACE)},n}(_v),nS=function(e){function n(n,t,l,i){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===i&&(i=1);var r=e.call(this,t,wu.SHRINE,n,ys.VILLAGE.SHRINE,!1,!0,!1,i)||this;return r.progress=l,r.servicesService&&(r.religionService=n.getService(zu.RELIGION)),r}return i(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress}},n.prototype.build=function(){return this.religionService.increaseFaithCap(10),this.servicesService.getService(zu.GAME).enable(_u.RELIGION),this},n.prototype.getLine=function(e){switch(e){case Cv.FIRST:case Cv.SECOND:return Av.emptyValue();case Cv.THIRD:return Av.progressValue(this.progress,"prayers");case Cv.FOURTH:return Av.emptyValue()}},n.prototype.prepareDemolish=function(){return this.religionService.decreaseFaithCap(10),!0},n.prototype.startProduction=function(){return!0},n.prototype.stopProduction=function(){},n.prototype.tick=function(e){var n=this.servicesService.getService(zu.VILLAGE).getPopulation();this.progress+=.01*(Math.pow(Math.log(n),2)+1)*this.getPower(),this.progress>100&&(this.progress=0,this.religionService.increaseFaith(1))},n.prototype.fireWorker=function(){return!1},n.prototype.hireWorker=function(){return!1},n.prototype.getWorkers=function(){return 0},n}(_v),tS=function(e){return e.WORKING="working",e.BAD_WEATHER="bad weather",e.STOPPED="stopped",e}({}),lS=function(e){function n(n,t,l,i,r,o,u){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===i&&(i=4),void 0===r&&(r=1),void 0===o&&(o=tS.WORKING),void 0===u&&(u=null);var s=e.call(this,t,wu.FARM,n,ys.FIELD.FARM,l>0,!0,!0,r)||this;return s.workers=l,s.maxWorkers=i,s.status=o,s.workSettings=u,s.servicesService&&(s.weatherService=n.getService(zu.WEATHER),s.calendarService=n.getService(zu.CALENDAR),s.managementService=n.getService(zu.MANAGEMENT),s.fieldService=n.getServiceByRegion(Gu.FIELD),null===u&&(s.workSettings=new Uv(!0,s.getBuildingType(),[!0,!0,!0,!0],null,null))),s}return i(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,workers:this.workers,maxWorkers:this.maxWorkers,workSettings:this.workSettings}},n.prototype.callback=function(e){"hire"===e&&this.workers<this.maxWorkers&&this.resourcesService.hireWorker()?this.workers+=1:"fire"===e&&this.workers>0&&(this.resourcesService.fireWorker(),this.workers-=1)},n.prototype.getLine=function(e){switch(e){case Cv.FIRST:return Av.textValue("workers: "+this.workers+"/"+this.maxWorkers);case Cv.SECOND:return Av.textValue(this.status);case Cv.THIRD:return Av.twoButtonValue("hire worker","hire","","fire worker","fire");case Cv.FOURTH:return Av.emptyValue()}},n.prototype.isWorking=function(){return this.workers>0},n.prototype.startProduction=function(){if(0===this.workers){for(;this.workers<this.maxWorkers&&this.resourcesService.hireWorker();)this.workers+=1;if(this.workers>0)return!0}return!1},n.prototype.stopProduction=function(){this.workers>0&&(this.resourcesService.fireWorker(this.workers),this.workers=0)},n.prototype.isMet=function(){var e=!0;return this.workSettings.seasons[this.calendarService.getSeason()]||e&&(e=!1),e},n.prototype.tick=function(e){var n=this;if(this.managementService.getComplexWorkers()&&this.workSettings&&this.workSettings.enabled&&(this.isMet()?this.workers<this.maxWorkers&&this.hireWorker():this.isWorking()&&this.stopProduction()),this.workers>0)if(this.weatherService.isWeather(Xu.RAIN,Xu.STORM))if(this.weatherService.isWeather(Xu.STORM))this.status=tS.BAD_WEATHER;else{this.status=tS.WORKING;for(var t=this.workers;t>0;){var l=this.fieldService.getBuildings().filter(function(e){return e.getBuildingType()===wu.PASTURE&&e.hasWork()});if(0===l.length){this.status=tS.BAD_WEATHER;break}l.forEach(function(e){t>0&&e.work(n.getPower())&&(t-=1)})}}else{this.status=tS.WORKING;for(var i=this.workers;i>0;){var r=this.fieldService.getBuildings().filter(function(e){return(e.getBuildingType()===wu.FIELD||e.getBuildingType()===wu.ORCHARD||e.getBuildingType()===wu.PASTURE)&&e.hasWork()});if(0===r.length)break;r.forEach(function(e){i>0&&e.work(n.getPower())&&(i-=1)})}}else this.status=tS.STOPPED},n.prototype.fireWorker=function(){return this.workers>0&&(this.resourcesService.fireWorker(1),this.workers-=1,!0)},n.prototype.hireWorker=function(){return!!(this.workers<this.maxWorkers&&this.resourcesService.hireWorker())&&(this.workers+=1,!0)},n.prototype.getWorkers=function(){return this.workers},n.prototype.setBuildingLevel=function(n){e.prototype.setBuildingLevel.call(this,n),this.maxWorkers=2+2*n},n.prototype.isComplexManagement=function(){return!0},n.prototype.getWorkSettings=function(){return this.workSettings},n.prototype.setWorkSettings=function(e){this.workSettings=e},n}(_v),iS=function(e){return e.PLOW_FIELD="plowing {crop} field",e.SOWING="sowing {crop}",e.GROWING="{crop} growing",e.HARVEST="harvesting {crop}",e.FALLOW="fallow",e}({}),rS=function(e){function n(n,t,l,i,r,o,u,s,a){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=ys.FIELD.FIELD.SIZE),void 0===i&&(i=ku.NONE),void 0===r&&(r=iS.FALLOW),void 0===o&&(o=0),void 0===u&&(u=!0),void 0===s&&(s=0),void 0===a&&(a=1);var c=e.call(this,t,wu.FIELD,n,ys.FIELD.FIELD,u,!0,!0,a)||this;return c.currentSize=l,c.crop=i,c.status=r,c.progress=o,c.growth=s,c.servicesService&&(c.gameService=n.getService(zu.GAME),c.modalService=n.getService(zu.MODAL),c.weatherService=n.getService(zu.WEATHER),c.calendarService=n.getService(zu.CALENDAR)),c}return i(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,size:this.currentSize,crop:this.crop,status:this.status,progress:this.progress,working:this.working,growth:this.growth}},n.prototype.getSize=function(){return this.currentSize},n.prototype.getComplexity=function(){return e.prototype.getComplexity.call(this)*(this.getSize()/this.settings.SIZE)},n.prototype.callback=function(e){var n=this;if(this.crop===ku.NONE||this.status===iS.FALLOW)this.crop=ku[String(e.target.value)],this.status=iS.FALLOW,this.progress=0;else{this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to switch field crop type?<br>All field progress will be lost");var t=this.modalService.registerForConfirmation().subscribe(function(l){l?(n.crop=ku[String(e.target.value)],n.status=iS.FALLOW,n.progress=0):e.target.selectedIndex=n.crop,t.unsubscribe()})}},n.prototype.finishDemolish=function(){},n.prototype.getLine=function(e){var n=this;switch(e){case Cv.FIRST:return Av.textValue("size: "+this.getSize());case Cv.SECOND:var t=[];return t.push(ku[ku.NONE]),Object.entries(Object(Os.FIELD)).forEach(function(e){Os.getCrop(ku[e[0]]).PREREQUISITE?n.gameService.isEnabled(Os.getCrop(ku[e[0]]).PREREQUISITE)&&t.push(e[0]):t.push(e[0])}),Av.dropdownValue(t,ku[this.crop]);case Cv.THIRD:return Av.textValue(this.status.replace("{crop}",ku[this.crop].toLowerCase()));case Cv.FOURTH:return this.status===iS.HARVEST?Av.progressValue(Math.floor(this.growth/(Os.getCrop(this.crop).YIELD_MULTIPLIER*this.getSize())*100),"harvest: "+this.growth):Av.progressValue(this.progress)}},n.prototype.getName=function(){return this.crop===ku.NONE?"Field":ku[this.crop].charAt(0).toUpperCase()+ku[this.crop].slice(1).toLowerCase()+" field"},n.prototype.startProduction=function(){return this.working=!0,!0},n.prototype.stopProduction=function(){this.working=!1},n.prototype.tick=function(e){if(this.calendarService.getSeason()===Yf.WINTER&&(this.status=iS.FALLOW,this.growth=0,this.progress=0),this.status===iS.GROWING)if(this.calendarService.getSeason()===Yf.AUTUMN)this.status=iS.HARVEST,this.growth=Math.floor(this.progress*Os.getCrop(this.crop).YIELD_MULTIPLIER*this.getSize()/100),this.progress=0;else if(this.progress<100){var n=this.getPower()*(1+this.effectsService.getNatureEffectsValue()/100)/Os.getCrop(this.crop).GROWTH;this.weatherService.getCurrentTemperature()<=5?n*=0:this.weatherService.getCurrentTemperature()<=10?n*=.2:this.weatherService.getCurrentTemperature()<=15?n*=.5:this.weatherService.getCurrentTemperature()<=20?n*=.8:this.weatherService.getCurrentTemperature()<=25?n*=1:this.weatherService.getCurrentTemperature()<=27?n*=.8:this.weatherService.getCurrentTemperature()<=29?n*=.6:this.weatherService.getCurrentTemperature()<=31?n*=.4:this.weatherService.getCurrentTemperature()<=33?n*=.2:this.weatherService.getCurrentTemperature()<=35&&(n*=0),this.progress+=n,this.progress>100&&(this.progress=100)}else 100===this.progress&&(this.growth=this.getSize()*Os.getCrop(this.crop).YIELD_MULTIPLIER,this.progress=0,this.status=iS.HARVEST)},n.prototype.work=function(e){if(this.isWorking()&&this.status!==iS.GROWING&&this.crop!==ku.NONE){if(this.status===iS.FALLOW&&this.calendarService.getSeason()===Yf.SPRING)return this.status=iS.PLOW_FIELD,!0;if(this.status===iS.PLOW_FIELD&&(this.calendarService.getSeason()===Yf.SPRING||this.calendarService.getSeason()===Yf.SUMMER&&this.servicesService.getService(zu.MANAGEMENT).getPlowInSummer()))return this.progress<100&&(this.progress+=e/this.getSize(),this.progress>=100&&(this.progress=0,this.status=iS.SOWING)),!0;if(this.status===iS.SOWING&&(this.calendarService.getSeason()===Yf.SPRING||this.calendarService.getSeason()===Yf.SUMMER))return this.progress+=e/this.getSize(),this.progress>=100&&(this.progress=0,this.status=iS.GROWING),!0;if(this.status===iS.HARVEST){var n=Iu[ku[this.crop]];if(this.resourcesService.hasLimit(n))return this.resourcesService.increaseResource(n,1,this.getName()),this.growth-=1,this.growth<=0&&(this.status=iS.FALLOW),!0}}return!1},n.prototype.fireWorker=function(){return!1},n.prototype.hireWorker=function(){return!1},n.prototype.getWorkers=function(){return 0},n.prototype.hasWork=function(){return this.isWorking()&&this.status!==iS.GROWING&&this.crop!==ku.NONE&&(this.status===iS.FALLOW&&this.calendarService.getSeason()===Yf.SPRING||this.status===iS.PLOW_FIELD&&(this.calendarService.getSeason()===Yf.SPRING||this.calendarService.getSeason()===Yf.SUMMER&&this.servicesService.getService(zu.MANAGEMENT).getPlowInSummer())||this.status===iS.SOWING&&(this.calendarService.getSeason()===Yf.SPRING||this.calendarService.getSeason()===Yf.SUMMER)||this.status===iS.HARVEST&&this.resourcesService.hasLimit(Iu[ku[this.crop]]))},n.prototype.getDetails=function(){return this.crop!==ku.NONE?"growing difficulty: "+Os.getCrop(this.crop).GROWTH+"<br>yield multiplier: "+Os.getCrop(this.crop).YIELD_MULTIPLIER+"<br>"+e.prototype.getDetails.call(this):e.prototype.getDetails.call(this)},n.prototype.getHappinessEffect=function(){return 0},n.prototype.isCombinable=function(){return!0},n.prototype.isSplittable=function(){return!0},n.prototype.combine=function(e,n){var t=this;if(this.getBuildingType()===e.getBuildingType()){this.modalService.open(ju.CONFIRM),this.modalService.setModalText(this.crop===e.crop?" Are you sure you want to combine "+this.getName()+" of size "+this.getSize()+" with "+e.getName()+" of size "+e.getSize()+"?<br>Resulting "+this.getName()+" of size "+(this.getSize()+e.getSize())+" will be changed to fallow if both are in different stages":" Are you sure you want to combine "+this.getName()+" of size "+this.getSize()+" with "+e.getName()+" of size "+e.getSize()+"?<br>Resulting "+this.getName()+" of size "+(this.getSize()+e.getSize())+" will be changed to fallow");var l=this.modalService.registerForConfirmation().subscribe(function(i){if(l.unsubscribe(),i){if(t.crop===e.crop)if(t.status===e.status)if(t.status===iS.HARVEST)t.growth+=e.growth;else{var r=t.progress*t.getSize();r+=e.progress*e.getSize(),t.progress=r/(t.getSize()+e.getSize())}else t.status=iS.FALLOW,t.progress=0,t.growth=0;else t.status=iS.FALLOW,t.progress=0,t.growth=0;t.currentSize+=e.getSize(),n.finaliseCombine(!0)}else n.finaliseCombine(!1)})}},n.prototype.split=function(e){var t=this;this.modalService.open(ju.INPUT),this.modalService.setModalText("Set split size (1-"+(this.getSize()-1)+")"),this.modalService.setModalValue("");var l=this.modalService.registerForValueResponse().subscribe(function(i){if(l.unsubscribe(),null!==i&&!isNaN(i)&&0!==i)if(i>=1&&i<t.getSize()){var r=Math.floor(t.growth*i/t.currentSize);t.growth-=r,t.currentSize-=Number(i),e.finaliseSplit(new n(t.servicesService,t.servicesService.getService(zu.ID).getNextId(),Number(i),t.crop,t.status,t.progress,!0,r,t.level).build())}else t.modalService.info("Invalid size value!")})},n}(_v),oS=function(e){return e.FALLOW="fallow",e.PLANTING="planting {crop}",e.GROWING="{crop} growing",e.FRUITING="{crop} fruiting",e.HARVEST="picking {crop}",e.NO_FRUITS="no fruits",e.CLEAR="clear old plants",e}({}),uS=function(e){function n(n,t,l,i,r,o,u,s,a){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=ys.FIELD.ORCHARD.SIZE),void 0===i&&(i=ku.NONE),void 0===r&&(r=oS.FALLOW),void 0===o&&(o=0),void 0===u&&(u=!0),void 0===s&&(s=0),void 0===a&&(a=1);var c=e.call(this,t,wu.ORCHARD,n,ys.FIELD.ORCHARD,u,!0,!0,a)||this;return c.currentSize=l,c.crop=i,c.status=r,c.progress=o,c.growth=s,c.servicesService&&(c.modalService=n.getService(zu.MODAL),c.weatherService=n.getService(zu.WEATHER),c.calendarService=n.getService(zu.CALENDAR),c.royalService=n.getService(zu.ROYAL)),c}return i(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,size:this.currentSize,crop:this.crop,status:this.status,progress:this.progress,working:this.working,growth:this.growth}},n.prototype.getSize=function(){return this.currentSize},n.prototype.getComplexity=function(){return e.prototype.getComplexity.call(this)*(this.getSize()/this.settings.SIZE)},n.prototype.callback=function(e){var n=this;if(this.crop===ku.NONE||this.status===oS.FALLOW)this.crop=ku[String(e.target.value)],this.status=oS.FALLOW,this.progress=0;else{this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to switch orchard plant type?<br>All orchard progress will be lost");var t=this.modalService.registerForConfirmation().subscribe(function(l){l?(n.crop=ku[String(e.target.value)],n.status=n.status===oS.FALLOW||n.status===oS.PLANTING?oS.FALLOW:oS.CLEAR,n.progress=0):e.target.selectedIndex=n.crop-Object.entries(Os.FIELD).length,t.unsubscribe()})}},n.prototype.finishDemolish=function(){},n.prototype.getLine=function(e){var n=this;switch(e){case Cv.FIRST:return Av.textValue("size: "+this.getSize());case Cv.SECOND:var t=[];return t.push(ku[ku.NONE]),Object.entries(Object(Os.ORCHARD)).forEach(function(e){Os.getCrop(ku[e[0]]).PREREQUISITE?n.gameService.isEnabled(Os.getCrop(ku[e[0]]).PREREQUISITE)&&t.push(e[0]):t.push(e[0])}),Av.dropdownValue(t,ku[this.crop]);case Cv.THIRD:return Av.textValue(this.status.replace("{crop}",ku[this.crop].toLowerCase()));case Cv.FOURTH:return this.status===oS.HARVEST?Av.progressValue(Math.floor(this.growth/(Os.getCrop(this.crop).YIELD_MULTIPLIER*this.getSize())*100),"harvest: "+this.growth):this.status===oS.NO_FRUITS?Av.emptyValue():Av.progressValue(this.progress)}},n.prototype.getName=function(){return this.crop===ku.NONE?"Orchard":ku[this.crop].charAt(0).toUpperCase()+ku[this.crop].slice(1).toLowerCase()+" orchard"},n.prototype.startProduction=function(){return this.working=!0,!0},n.prototype.stopProduction=function(){this.working=!1},n.prototype.tick=function(e){if(this.crop!==ku.NONE){if(this.status!==oS.FALLOW&&this.calendarService.getSeason()===Yf.WINTER){if(this.status===oS.GROWING)return;this.status=oS.NO_FRUITS,this.growth=0,this.progress=0}else this.status!==oS.NO_FRUITS||this.calendarService.getSeason()!==Yf.SPRING&&this.calendarService.getSeason()!==Yf.SUMMER||(this.status=oS.FRUITING);if(this.status===oS.GROWING||this.status===oS.FRUITING)if(this.calendarService.getSeason()===Yf.AUTUMN&&this.status===oS.FRUITING)this.status=oS.HARVEST,this.growth=Math.floor(this.progress*Os.getCrop(this.crop).YIELD_MULTIPLIER*this.getSize()/100),this.progress=0;else if(this.progress<100){var n=this.getPower()*(1+this.effectsService.getNatureEffectsValue()/100);this.status===oS.GROWING?n/=Os.getCrop(this.crop).GROWTH:this.status===oS.FRUITING&&(n/=Os.getCrop(this.crop).FRUITING),this.weatherService.getCurrentTemperature()<=5?n*=0:this.weatherService.getCurrentTemperature()<=10?n*=.2:this.weatherService.getCurrentTemperature()<=15?n*=.5:this.weatherService.getCurrentTemperature()<=20?n*=.8:this.weatherService.getCurrentTemperature()<=25?n*=1:this.weatherService.getCurrentTemperature()<=27?n*=.8:this.weatherService.getCurrentTemperature()<=29?n*=.6:this.weatherService.getCurrentTemperature()<=31?n*=.4:this.weatherService.getCurrentTemperature()<=33?n*=.2:this.weatherService.getCurrentTemperature()<=35&&(n*=0),this.progress+=n,this.progress>100&&(this.progress=100)}else 100===this.progress&&(this.status===oS.GROWING?this.status=oS.FRUITING:this.status===oS.FRUITING&&(this.growth=Os.getCrop(this.crop).YIELD_MULTIPLIER*this.getSize(),this.status=oS.HARVEST),this.progress=0)}},n.prototype.work=function(e){if(this.isWorking()&&this.status!==oS.GROWING&&this.crop!==ku.NONE)if(this.status===oS.FALLOW){if(this.calendarService.getSeason()===Yf.SPRING)return this.status=oS.PLANTING,!0}else{if(this.status===oS.PLANTING)return this.progress<100&&(this.progress+=e/this.getSize(),this.progress>=100&&(this.progress=0,this.status=oS.GROWING)),!0;if(this.status===oS.HARVEST){var n=Iu[ku[this.crop]];if(this.resourcesService.hasLimit(n))return!(n!==Iu.APPLE||!this.royalService.pickGoldenApple())||(this.resourcesService.increaseResource(n,1,this.getName()),this.growth-=1,this.growth<=0&&(this.status=oS.NO_FRUITS),!0)}else if(this.status===oS.CLEAR)return this.progress<100&&(this.progress+=e/this.getSize(),this.progress>=100&&(this.progress=0,this.status=oS.FALLOW)),!0}return!1},n.prototype.fireWorker=function(){return!1},n.prototype.hireWorker=function(){return!1},n.prototype.getWorkers=function(){return 0},n.prototype.hasWork=function(){return this.isWorking()&&this.status!==oS.GROWING&&this.crop!==ku.NONE&&(this.status===oS.FALLOW&&this.calendarService.getSeason()===Yf.SPRING||this.status===oS.PLANTING||this.status===oS.CLEAR||this.status===oS.HARVEST&&this.resourcesService.hasLimit(Iu[ku[this.crop]]))},n.prototype.getDetails=function(){return this.crop!==ku.NONE?"growing difficulty: "+Os.getCrop(this.crop).GROWTH+"<br>fruiting difficulty: "+Os.getCrop(this.crop).FRUITING+"<br>yield multiplier: "+Os.getCrop(this.crop).YIELD_MULTIPLIER+"<br>"+e.prototype.getDetails.call(this):e.prototype.getDetails.call(this)},n.prototype.getHappinessEffect=function(){return 0},n.prototype.isCombinable=function(){return!0},n.prototype.isSplittable=function(){return!0},n.prototype.combine=function(e,n){var t=this;if(this.getBuildingType()===e.getBuildingType()){this.modalService.open(ju.CONFIRM),this.modalService.setModalText(this.crop===e.crop?" Are you sure you want to combine "+this.getName()+" of size "+this.getSize()+" with "+e.getName()+" of size "+e.getSize()+"?<br>Resulting "+this.getName()+" of size "+(this.getSize()+e.getSize())+" will be changed to fallow if both are in different stages":" Are you sure you want to combine "+this.getName()+" of size "+this.getSize()+" with "+e.getName()+" of size "+e.getSize()+"?<br>Resulting "+this.getName()+" of size "+(this.getSize()+e.getSize())+" will be changed to fallow");var l=this.modalService.registerForConfirmation().subscribe(function(i){if(l.unsubscribe(),i){if(t.crop===e.crop)if(t.status===e.status)if(t.status===oS.HARVEST)t.growth+=e.growth;else{var r=t.progress*t.getSize();r+=e.progress*e.getSize(),t.progress=r/(t.getSize()+e.getSize())}else t.status=oS.FALLOW,t.progress=0,t.growth=0;else t.status=oS.FALLOW,t.progress=0,t.growth=0;t.currentSize+=e.getSize(),n.finaliseCombine(!0)}else n.finaliseCombine(!1)})}},n.prototype.split=function(e){var t=this;this.modalService.open(ju.INPUT),this.modalService.setModalText("Set split size (1-"+(this.getSize()-1)+")"),this.modalService.setModalValue("");var l=this.modalService.registerForValueResponse().subscribe(function(i){if(l.unsubscribe(),null!==i&&!isNaN(i)&&0!==i)if(i>=1&&i<t.getSize()){var r=Math.floor(t.growth*i/t.currentSize);t.growth-=r,t.currentSize-=Number(i),e.finaliseSplit(new n(t.servicesService,t.servicesService.getService(zu.ID).getNextId(),Number(i),t.crop,t.status,t.progress,!0,r,t.level).build())}else t.modalService.info("Invalid size value!")})},n}(_v),sS=function(e){function n(n,t,l,i,r,o,u,s,a){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===i&&(i=Hv.FETCHING_INPUT),void 0===r&&(r=[]),void 0===o&&(o=[]),void 0===u&&(u=!1),void 0===s&&(s=null),void 0===a&&(a=1),e.call(this,n,t,wu.WINDMILL,ys.FIELD.WINDMILL,i,l,r,o,u,s,a)||this}return i(n,e),n}(Gv),aS=function(e){function n(n,t,l,i,r,o,u,s,a){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===i&&(i=Hv.FETCHING_INPUT),void 0===r&&(r=[]),void 0===o&&(o=[]),void 0===u&&(u=!1),void 0===s&&(s=null),void 0===a&&(a=1),e.call(this,n,t,wu.BAKERY,ys.VILLAGE.BAKERY,i,l,r,o,u,s,a)||this}return i(n,e),n}(Gv),cS=function(e){return e.FISHING="fishing",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.TRANSPORTING_FISH="transporting fish",e}({}),pS=function(e){function n(n,t,l,i,r,o){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===i&&(i=cS.FISHING),void 0===r&&(r=!1),void 0===o&&(o=1);var u=e.call(this,t,wu.FISHERS_HUT,n,ys.SEA.FISHERS_HUT,r,!0,!0,o)||this;return u.progress=l,u.status=i,u}return i(n,e),n.prototype.getLine=function(e){switch(e){case Cv.FIRST:return Av.textValue(this.status);case Cv.SECOND:return Av.progressValue(this.progress);case Cv.THIRD:case Cv.FOURTH:return Av.emptyValue()}},n.prototype.tick=function(){if(this.working)if(this.status===cS.FISHING){if(this.progress<100&&(this.progress+=this.getPower(),this.progress>=100)){if(this.progress=0,this.servicesService.getService(zu.ROYAL).catchGoldenFish())return;this.status=cS.TRANSPORTING_FISH}}else if(this.status===cS.TRANSPORTING_FISH||this.status===cS.WAITING_FOR_WAREHOUSE_SPACE){var e=this.resourcesService.increaseResource(Iu.FISH,1,this.getName());this.status=e?cS.FISHING:cS.WAITING_FOR_WAREHOUSE_SPACE}},n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,working:this.working}},n}(_v),hS=function(e){function n(n,t,l,i){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=ys.FORT.BARRACKS.SIZE),void 0===i&&(i=1);var r=e.call(this,t,wu.BARRACKS,n,ys.FORT.BARRACKS,!1,!0,!1,i)||this;return r.barracksSize=l,r.servicesService&&(r.armyService=n.getService(zu.ARMY),r.modalService=n.getService(zu.MODAL)),r}return i(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,barracksSize:this.barracksSize}},n.prototype.build=function(){return this.servicesService.getService(zu.GAME).isEnabled(_u.ARMY)||this.servicesService.getService(zu.GAME).enable(_u.ARMY),this.armyService.increaseBarracks(this.barracksSize),this},n.prototype.prepareDemolish=function(){return this.armyService.getFreeBarracks()>=this.barracksSize?(this.armyService.decreaseBarracks(this.barracksSize),!0):(this.modalService.info("Your troops would have nowhere to sleep!<br>You cannot demolish barracks right now!"),!1)},n.prototype.getLine=function(e){switch(e){case Cv.FIRST:return Av.textValue("capacity: "+this.barracksSize);case Cv.SECOND:case Cv.THIRD:case Cv.FOURTH:return Av.emptyValue()}},n.prototype.getHappinessEffect=function(){return 0},n.prototype.getEffects=function(){return 0},n.prototype.getPermanentEffects=function(){return 0},n}(_v),dS=function(e){return e.TRAINING="training",e.NO_RECRUITS="no recruits",e}({}),gS=function(e){function n(n,t,l,i,r,o,u){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===i&&(i=!1),void 0===r&&(r=dS.NO_RECRUITS),void 0===o&&(o=1),void 0===u&&(u=null);var s=e.call(this,t,wu.TRAINING_SQUARE,n,ys.FORT.TRAINING_SQUARE,i,!0,!0,o)||this;return s.progress=l,s.status=r,s.workSettings=u,s.servicesService&&(s.armyService=n.getService(zu.ARMY),s.managementService=n.getService(zu.MANAGEMENT),s.calendarService=n.getService(zu.CALENDAR),null===s.workSettings)&&(s.workSettings=new Uv(!0,s.buildingType,[!0,!0,!0,!0],null,null,!0,!0,"work when there are troops to train")),s}return i(n,e),n.prototype.customWorkRule=function(){return this.armyService.hasRecruits()},n.prototype.getWorkSettings=function(){return this.workSettings},n.prototype.setWorkSettings=function(e){this.workSettings=e},n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,working:this.working,workSettings:this.workSettings}},n.prototype.getLine=function(e){switch(e){case Cv.FIRST:return Av.emptyValue();case Cv.SECOND:return Av.textValue(this.status);case Cv.THIRD:return this.status===dS.TRAINING?Av.progressValue(this.progress):Av.emptyValue();case Cv.FOURTH:return Av.emptyValue()}},n.prototype.tick=function(e){this.managementService.getComplexWorkers()&&this.workSettings&&this.workSettings.enabled&&(this.isMet()?this.isWorking()||this.hireWorker():!this.isWorking()||this.status===dS.TRAINING&&0!==this.progress||this.fireWorker()),this.working&&(this.armyService.hasRecruits()?(this.status=dS.TRAINING,this.progress<100&&(this.progress+=this.getPower()),this.progress>=100&&(this.progress=0,this.armyService.progressRecruitment(1))):(this.status=dS.NO_RECRUITS,this.progress=0))},n.prototype.isMet=function(){var e=!0;return this.workSettings.seasons[this.calendarService.getSeason()]||e&&(e=!1),this.workSettings.customRuleEnabled&&e&&(e=this.customWorkRule()),e},n.prototype.isComplexManagement=function(){return!0},n}(_v),fS=function(e){function n(n,t,l,i,r,o,u,s,a){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===i&&(i=Hv.FETCHING_INPUT),void 0===r&&(r=[]),void 0===o&&(o=[]),void 0===u&&(u=!1),void 0===s&&(s=null),void 0===a&&(a=1),e.call(this,n,t,wu.TANNERY,ys.FOREST.TANNERY,i,l,r,o,u,s,a)||this}return i(n,e),n}(Gv),mS=function(e){function n(n,t,l,i,r,o,u){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=ys.FORT.STOCKADE.DURABILITY),void 0===i&&(i=ys.FORT.STOCKADE.DURABILITY),void 0===r&&(r=0),void 0===o&&(o=!1),void 0===u&&(u=1);var s=e.call(this,t,wu.STOCKADE,n,ys.FORT.STOCKADE,o,!0,!1,u)||this;return s.health=l,s.durability=i,s.progress=r,s.servicesService&&(s.armyService=n.getService(zu.ARMY),s.modalService=n.getService(zu.MODAL),s.worldService=n.getService(zu.WORLD)),s}return i(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,health:this.health,durability:this.durability,progress:this.progress,working:this.working}},n.prototype.build=function(){return this.worldService.getRegion(0).defense+=ys.FORT.STOCKADE.DEFENSE,this},n.prototype.prepareDemolish=function(){return this.worldService.getRegion(0).defense-=ys.FORT.STOCKADE.DEFENSE,!0},n.prototype.callback=function(e){var n=this;if("repair"===e){this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to repair "+this.getName()+" for 1 log for each durability point missing?");var t=this.modalService.registerForConfirmation().subscribe(function(e){e&&(n.startProduction()||n.modalService.info("No free worker to repair stockade!")),t.unsubscribe()})}else"stop"===e&&this.fireWorker()},n.prototype.getLine=function(e){switch(e){case Cv.FIRST:return Av.textValue("durability: "+this.health+"/"+this.durability);case Cv.SECOND:return Av.textValue("defense: "+ys.FORT.STOCKADE.DEFENSE);case Cv.THIRD:return this.health<this.durability&&!this.working?Av.buttonValue("repair","repair"):this.health<this.durability&&this.working?Av.buttonValue("stop repair","stop"):Av.emptyValue();case Cv.FOURTH:return this.working?Av.progressValue(this.progress):Av.emptyValue()}},n.prototype.tick=function(e){this.working&&(this.progress<100&&(0===this.progress&&this.resourcesService.decreaseResource(Iu.LOG,1,this.getName())?this.progress+=this.getPower():this.progress>0&&(this.progress+=this.getPower())),this.progress>=100&&(this.progress=0,this.health+=1),this.health===this.durability&&this.fireWorker())},n.prototype.getHappinessEffect=function(){return 0},n}(_v),vS=function(e){function n(n,t,l,i,r,o,u,s,a){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===i&&(i=Hv.FETCHING_INPUT),void 0===r&&(r=[]),void 0===o&&(o=[]),void 0===u&&(u=!1),void 0===s&&(s=null),void 0===a&&(a=1),e.call(this,n,t,wu.COTTON_MILL,ys.FIELD.COTTON_MILL,i,l,r,o,u,s,a)||this}return i(n,e),n}(Gv),SS=function(e){function n(n,t,l,i,r,o,u,s,a){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===i&&(i=Hv.FETCHING_INPUT),void 0===r&&(r=[]),void 0===o&&(o=[]),void 0===u&&(u=!1),void 0===s&&(s=null),void 0===a&&(a=1),e.call(this,n,t,wu.TAILOR,ys.VILLAGE.TAILOR,i,l,r,o,u,s,a)||this}return i(n,e),n}(Gv),ES=function(e){function n(n,t,l,i,r,o,u,s,a){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===i&&(i=Hv.FETCHING_INPUT),void 0===r&&(r=[]),void 0===o&&(o=[]),void 0===u&&(u=!1),void 0===s&&(s=null),void 0===a&&(a=1),e.call(this,n,t,wu.BREWERY,ys.FIELD.BREWERY,i,l,r,o,u,s,a)||this}return i(n,e),n}(Gv),yS=function(e){function n(n,t,l,i,r,o,u){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=ys.FORT.WOODEN_TOWER.DURABILITY),void 0===i&&(i=ys.FORT.WOODEN_TOWER.DURABILITY),void 0===r&&(r=0),void 0===o&&(o=!1),void 0===u&&(u=1);var s=e.call(this,t,wu.WOODEN_TOWER,n,ys.FORT.WOODEN_TOWER,o,!0,!1,u)||this;return s.health=l,s.durability=i,s.progress=r,s.servicesService&&(s.armyService=n.getService(zu.ARMY),s.modalService=n.getService(zu.MODAL),s.worldService=n.getService(zu.WORLD)),s}return i(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,health:this.health,durability:this.durability,progress:this.progress,working:this.working}},n.prototype.build=function(){return this.worldService.getRegion(0).defense+=ys.FORT.STOCKADE.DEFENSE,this},n.prototype.prepareDemolish=function(){return this.worldService.getRegion(0).defense-=ys.FORT.STOCKADE.DEFENSE,!0},n.prototype.callback=function(e){var n=this;if("repair"===e){this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to repair "+this.getName()+" for 1 log for each durability point missing?");var t=this.modalService.registerForConfirmation().subscribe(function(e){e&&(n.startProduction()||n.modalService.info("No free worker to repair wooden tower!")),t.unsubscribe()})}else"stop"===e&&this.fireWorker()},n.prototype.getLine=function(e){switch(e){case Cv.FIRST:return Av.textValue("durability: "+this.health+"/"+this.durability);case Cv.SECOND:return Av.textValue("defense: "+ys.FORT.WOODEN_TOWER.DEFENSE);case Cv.THIRD:return this.health<this.durability&&!this.working?Av.buttonValue("repair","repair"):this.health<this.durability&&this.working?Av.buttonValue("stop repair","stop"):Av.emptyValue();case Cv.FOURTH:return this.working?Av.progressValue(this.progress):Av.emptyValue()}},n.prototype.tick=function(e){this.working&&(this.progress<100&&(0===this.progress&&this.resourcesService.decreaseResource(Iu.LOG,1,this.getName())?this.progress+=this.getPower():this.progress>0&&(this.progress+=this.getPower())),this.progress>=100&&(this.progress=0,this.health+=1),this.health===this.durability&&this.fireWorker())},n.prototype.getHappinessEffect=function(){return 0},n}(_v),RS=function(e){function n(n,t,l,i,r,o,u){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=ys.FORT.STONE_TOWER.DURABILITY),void 0===i&&(i=ys.FORT.STONE_TOWER.DURABILITY),void 0===r&&(r=0),void 0===o&&(o=!1),void 0===u&&(u=1);var s=e.call(this,t,wu.STONE_TOWER,n,ys.FORT.STONE_TOWER,o,!0,!1,u)||this;return s.health=l,s.durability=i,s.progress=r,s.servicesService&&(s.armyService=n.getService(zu.ARMY),s.modalService=n.getService(zu.MODAL),s.worldService=n.getService(zu.WORLD)),s}return i(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,health:this.health,durability:this.durability,progress:this.progress,working:this.working}},n.prototype.build=function(){return this.worldService.getRegion(0).defense+=ys.FORT.STOCKADE.DEFENSE,this},n.prototype.prepareDemolish=function(){return this.worldService.getRegion(0).defense-=ys.FORT.STOCKADE.DEFENSE,!0},n.prototype.callback=function(e){var n=this;if("repair"===e){this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to repair "+this.getName()+" for 1 stone for each durability point missing?");var t=this.modalService.registerForConfirmation().subscribe(function(e){e&&(n.startProduction()||n.modalService.info("No free worker to repair stone tower!")),t.unsubscribe()})}else"stop"===e&&this.fireWorker()},n.prototype.getLine=function(e){switch(e){case Cv.FIRST:return Av.textValue("durability: "+this.health+"/"+this.durability);case Cv.SECOND:return Av.textValue("defense: "+ys.FORT.STONE_TOWER.DEFENSE);case Cv.THIRD:return this.health<this.durability&&!this.working?Av.buttonValue("repair","repair"):this.health<this.durability&&this.working?Av.buttonValue("stop repair","stop"):Av.emptyValue();case Cv.FOURTH:return this.working?Av.progressValue(this.progress):Av.emptyValue()}},n.prototype.tick=function(e){this.working&&(this.progress<100&&(0===this.progress&&this.resourcesService.decreaseResource(Iu.STONE,1,this.getName())?this.progress+=this.getPower():this.progress>0&&(this.progress+=this.getPower())),this.progress>=100&&(this.progress=0,this.health+=1),this.health===this.durability&&this.fireWorker())},n.prototype.getHappinessEffect=function(){return 0},n}(_v),bS=function(e){function n(n,t,l,i,r,o,u,s,a){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===i&&(i=Hv.FETCHING_INPUT),void 0===r&&(r=[]),void 0===o&&(o=[]),void 0===u&&(u=!1),void 0===s&&(s=null),void 0===a&&(a=1);var c=e.call(this,n,t,wu.WINERY,ys.FIELD.WINERY,i,l,r,o,u,s,a)||this;return n&&(c.managementService=n.getService(zu.MANAGEMENT)),c}return i(n,e),n.prototype.tick=function(){this.managementService.getComplexWorkers()&&this.workSettings&&this.workSettings.enabled&&(this.isMet()?this.isWorking()||this.hireWorker():this.isWorking()&&this.fireWorker()),this.working&&(this.outputStorage.length>0?this.collectOutputResources():this.inputStorage.length<this.settings.INPUT_RESOURCES.length&&0===this.outputStorage.length?this.collectInputResources()&&(this.status=Hv.PREPARING):this.progress<100&&this.status===Hv.PREPARING?(this.progress+=this.getPower(),this.progress>100&&(this.progress=100)):100===this.progress&&this.status===Hv.PREPARING?(this.progress=0,this.status=Hv.PRODUCING_OUTPUT):this.progress<100&&this.status===Hv.PRODUCING_OUTPUT?(this.progress+=100/300,this.progress>=100&&(this.progress=100)):100===this.progress&&this.status===Hv.PRODUCING_OUTPUT&&(this.progress=0,this.inputStorage=[],this.outputStorage=Vu.copyResourceArray(this.settings.OUTPUT_RESOURCES),this.status=Hv.TRANSPORTING_OUTPUT))},n}(Gv),OS=function(e){function n(n,t,l,i,r,o,u){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=!1),void 0===u&&(u=1);var s=e.call(this,t,wu.TAVERN,n,ys.VILLAGE.TAVERN,o,!0,!0,u)||this;return s.progress=l,s.beer=i,s.wine=r,s.servicesService&&(s.resourcesService=n.getService(zu.RESOURCES),s.happinessService=n.getService(zu.HAPPINESS),s.managementService=n.getService(zu.MANAGEMENT)),s}return i(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,beer:this.beer,wine:this.wine,working:this.working}},n.prototype.getLine=function(e){switch(e){case Cv.FIRST:return Av.textValue(this.beer<.001&&this.wine<.001?"waiting for alcohol":this.working?"open":"closed");case Cv.SECOND:return Av.emptyValue();case Cv.THIRD:return Av.textValue("beer: "+Vu.round(this.beer,2));case Cv.FOURTH:return Av.textValue("wine: "+Vu.round(this.wine,2))}},n.prototype.tick=function(e){var n=this.resourcesService.getTotalPeople(),t=this.managementService.getAlcoholRations();if(this.working&&this.happinessService.getHappiness()<=100&&n>1&&(this.beer>.002||this.wine>.002)){for(var l=n;l>0;l--){var i=Qu.randomBetween(0,1);(0===i||this.wine<.002)&&this.beer>=.002*t?(this.beer-=.005*t,this.happinessService.increaseHappiness(.01*t/n*this.getPower(),ss.ALCOHOL_HAPPINESS_LIMIT)):(1===i||this.beer<.002)&&this.wine>=.002*t&&(this.wine-=.005*t,this.happinessService.increaseHappiness(.01*t/n*this.getPower(),ss.ALCOHOL_HAPPINESS_LIMIT))}this.beer<0&&(this.beer=0),this.wine<0&&(this.wine=0)}else this.happinessService.getHappiness()>75&&n>1&&this.happinessService.decreaseHappiness(.01,ss.ALCOHOL_HAPPINESS_FLOOR);if(this.working){for(;this.beer<10*Math.ceil(n/100)&&this.resourcesService.decreaseResource(Iu.BEER,1,this.getName());)this.beer+=2.5;for(;this.wine<10*Math.ceil(n/100)&&this.resourcesService.decreaseResource(Iu.WINE,1,this.getName());)this.wine+=2.5}},n}(_v),TS=function(e){function n(n,t,l,i,r){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===i&&(i=!1),void 0===r&&(r=1);var o=e.call(this,t,wu.GEOLOGIST,n,ys.MOUNTAINS.GEOLOGIST,i,!0,!0,r)||this;return o.progress=l,o.servicesService&&(o.gameService=n.getService(zu.GAME),o.resourcesService=n.getService(zu.RESOURCES),o.landService=n.getService(zu.LAND)),o}return i(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,working:this.working}},n.prototype.getLine=function(e){switch(e){case Cv.FIRST:return Av.textValue("looking for ores");case Cv.SECOND:return Av.progressValue(this.progress);case Cv.THIRD:return Av.textValue(this.lastFind?"last find: "+Vu.prepareResourceName(this.lastFind)+" deposit":"last find: nothing");case Cv.FOURTH:return Av.emptyValue()}},n.prototype.tick=function(e){if(this.working)if(this.progress<100)this.progress+=this.getPower(),this.progress>100&&(this.progress=100);else{var n=[];if(this.landService.getOre(Iu.COAL)<50&&n.push({item:Iu.COAL,chance:this.settings.COAL_CHANCE}),this.landService.getOre(Iu.COPPER_ORE)<50&&n.push({item:Iu.COPPER_ORE,chance:this.settings.COPPER_CHANCE}),this.landService.getOre(Iu.TIN_ORE)<50&&n.push({item:Iu.TIN_ORE,chance:this.settings.TIN_CHANCE}),this.gameService.isEnabled(_u.GOLD)&&this.landService.getOre(Iu.GOLD_ORE)<50&&n.push({item:Iu.GOLD_ORE,chance:this.settings.GOLD_CHANCE}),this.gameService.isEnabled(_u.SILVER)&&this.landService.getOre(Iu.SILVER_ORE)<50&&n.push({item:Iu.SILVER_ORE,chance:this.settings.SILVER_CHANCE}),this.gameService.isEnabled(_u.IRON)&&this.landService.getOre(Iu.IRON_ORE)<50&&n.push({item:Iu.IRON_ORE,chance:this.settings.IRON_CHANCE}),n.length>0){this.progress=0;var t=Qu.randomElement(n);t?(this.landService.increaseOre(t,1),this.lastFind=t):this.lastFind=null}}},n}(_v),CS=function(e){function n(n,t,l,i,r,o,u,s,a){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===i&&(i=Hv.FETCHING_INPUT),void 0===r&&(r=[]),void 0===o&&(o=[]),void 0===u&&(u=!1),void 0===s&&(s=null),void 0===a&&(a=1),e.call(this,n,t,wu.STONEMASON,ys.MOUNTAINS.STONEMASON,i,l,r,o,u,s,a)||this}return i(n,e),n}(Gv),IS=function(e){return e.MINING="mining {res}",e.WAITING_FOR_SELECTION="waiting for ore selection",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.NO_MORE_RESOURCES="no more {res}",e.TRANSPORTING="transporting {res}",e}({}),AS=function(e){function n(n,t,l,i,r,o,u,s,a){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===i&&(i=IS.WAITING_FOR_SELECTION),void 0===r&&(r=!1),void 0===o&&(o=0),void 0===u&&(u=200),void 0===s&&(s=Iu.NOTHING),void 0===a&&(a=1);var c=e.call(this,t,wu.PIT_MINE,n,ys.MOUNTAINS.PIT_MINE,r,!0,!0,a)||this;return c.progress=l,c.status=i,c.storage=o,c.resources=u,c.ore=s,c.servicesService&&(c.modalService=n.getService(zu.MODAL),c.landService=n.getService(zu.LAND)),c}return i(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,working:this.working,storage:this.storage,resources:this.resources,ore:this.ore}},n.prototype.callback=function(e){var n=this;if(this.ore===Iu.NOTHING)if(this.landService.hasOre(Iu[String(e.target.value).replace(" ","_")],20)){this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to mine "+Vu.prepareResourceName(Iu[String(e.target.value).replace(" ","_")])+" in this mine?");var t=this.modalService.registerForConfirmation().subscribe(function(l){l?(n.landService.decreaseOre(Iu[String(e.target.value).replace(" ","_")],20),n.ore=Iu[String(e.target.value).replace(" ","_")],n.status=IS.MINING,n.progress=0):e.target.selectedIndex=n.ore,t.unsubscribe()})}else this.modalService.info("Not enough "+Vu.prepareResourceName(Iu[String(e.target.value).replace(" ","_")])+" deposits available<br>20 "+Vu.prepareResourceName(Iu[String(e.target.value).replace(" ","_")])+" deposits required to start mining."),e.target.selectedIndex=this.ore},n.prototype.buildOnMountain=function(){return!0},n.prototype.isUsedUp=function(){return this.status===IS.NO_MORE_RESOURCES},n.prototype.hasBuff=function(){return!this.isUsedUp()&&e.prototype.hasBuff.call(this)},n.prototype.getLine=function(e){switch(e){case Cv.FIRST:return this.ore!==Iu.NOTHING?Av.textValue(Vu.prepareResourceName(this.ore).toLowerCase()+": "+this.resources):Av.emptyValue();case Cv.SECOND:return Av.textValue(this.status.replace("{res}",Vu.prepareResourceName(this.ore).toLowerCase()));case Cv.THIRD:return Av.progressValue(this.progress);case Cv.FOURTH:if(this.ore===Iu.NOTHING){var n=[];return n.push(Iu[Iu.NOTHING].replace("_"," ")),n.push(Iu[Iu.COAL].replace("_"," ")),n.push(Iu[Iu.GOLD_ORE].replace("_"," ")),n.push(Iu[Iu.SILVER_ORE].replace("_"," ")),n.push(Iu[Iu.COPPER_ORE].replace("_"," ")),n.push(Iu[Iu.TIN_ORE].replace("_"," ")),n.push(Iu[Iu.IRON_ORE].replace("_"," ")),Av.dropdownValue(n,Iu[this.ore])}return Av.emptyValue()}},n.prototype.isStoppable=function(){return this.resources>0},n.prototype.tick=function(e){if(this.ore!==Iu.NOTHING){if(this.resources<=0&&0===this.storage&&(this.status!==IS.NO_MORE_RESOURCES&&this.servicesService.getService(zu.LOG).warning("Pit mine mined all "+Vu.prepareResourceName(this.ore)),this.status=IS.NO_MORE_RESOURCES,this.stopProduction()),!this.working)return;this.storage>0?this.resourcesService.increaseResource(this.ore,this.storage,this.getName())?(this.storage=0,this.status=IS.MINING):this.status=IS.WAITING_FOR_WAREHOUSE_SPACE:this.progress<100?(this.status=IS.MINING,this.progress+=this.getPower(),this.progress>100&&(this.progress=100)):100===this.progress&&(this.progress=0,this.resources-=1,this.storage=1,this.status=IS.TRANSPORTING)}},n}(_v),NS=function(e){return e[e.NONE=0]="NONE",e[e.COW=1]="COW",e[e.CHICKEN=2]="CHICKEN",e[e.PIG=3]="PIG",e[e.HORSE=4]="HORSE",e[e.SHEEP=5]="SHEEP",e}({}),_S=function(e){function n(n,t,l,i,r,o,u,s,a,c,p,h){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=ys.FIELD.PASTURE.SIZE),void 0===i&&(i=NS.NONE),void 0===r&&(r=0),void 0===o&&(o=0),void 0===u&&(u=!0),void 0===s&&(s=0),void 0===a&&(a=0),void 0===c&&(c=0),void 0===p&&(p=!1),void 0===h&&(h=1);var d=e.call(this,t,wu.PASTURE,n,ys.FIELD.PASTURE,u,!0,!0,h)||this;return d.currentSize=l,d.animal=i,d.progress=r,d.produceProgress=o,d.animals=s,d.food=a,d.chores=c,d.autoButcher=p,d.servicesService&&(d.modalService=n.getService(zu.MODAL),d.weatherService=n.getService(zu.WEATHER),d.calendarService=n.getService(zu.CALENDAR),d.fieldService=n.getService(zu.FIELD)),d}return i(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,size:this.currentSize,animal:this.animal,progress:this.progress,produceProgress:this.produceProgress,working:this.working,animals:this.animals,food:this.food,chores:this.chores,autoButcher:this.autoButcher}},n.prototype.build=function(){return this.resourcesService.getResource(Iu.CHICKEN).isVisible()||(this.resourcesService.makeVisible(Iu.CHICKEN),this.logService.log("New resource discovered: "+Vu.prepareResourceName(Iu.CHICKEN)),this.resourcesService.makeVisible(Iu.SHEEP),this.logService.log("New resource discovered: "+Vu.prepareResourceName(Iu.SHEEP)),this.resourcesService.makeVisible(Iu.COW),this.logService.log("New resource discovered: "+Vu.prepareResourceName(Iu.COW)),this.resourcesService.makeVisible(Iu.PIG),this.logService.log("New resource discovered: "+Vu.prepareResourceName(Iu.PIG)),this.resourcesService.makeVisible(Iu.HORSE),this.logService.log("New resource discovered: "+Vu.prepareResourceName(Iu.HORSE))),this.resourcesService.updateAnimals(),e.prototype.build.call(this)},n.prototype.getSize=function(){return this.currentSize},n.prototype.getComplexity=function(){return e.prototype.getComplexity.call(this)*(this.getSize()/this.settings.SIZE)},n.prototype.findButcher=function(){return this.fieldService.getBuildings().filter(function(e){return e.getBuildingType()===wu.BUTCHER}).map(function(e){return e}).sort(function(e,n){return e.getAnimalsNumber()-n.getAnimalsNumber()})[0]},n.prototype.butcher=function(e){void 0===e&&(e=!0);var n=this.findButcher();n?n.addAnimalToButcher(this.getResourceType())&&(this.resourcesService.addAnimalUsedData(this.getResourceType(),"Butcher",1),this.decreaseAnimal(1)):e||this.modalService.info("No butcher available or their work queue is full")},n.prototype.callback=function(e){var n=this;if("butcher"===e&&this.animals>0)this.butcher(!1);else if("x"===e)this.autoButcher=!this.autoButcher;else if(this.animal===NS.NONE||0===this.animals)this.animal!==NS.NONE&&this.resourcesService.decreaseResourceLimit(this.getResourceType(),this.getMaxAnimals()),this.animal=NS[String(e.target.value)],this.progress=0,this.animal!==NS.NONE&&this.resourcesService.increaseResourceLimit(this.getResourceType(),this.getMaxAnimals()),this.resourcesService.updateAnimals();else{this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to change animals?<br>All current animals will be moved to other pastures and if there is no enough space they will be lost");var t=this.modalService.registerForConfirmation().subscribe(function(l){l?(n.resourcesService.decreaseResourceLimit(n.getResourceType(),n.getMaxAnimals()),n.moveAnimals(n.animals),n.animal=NS[String(e.target.value)],n.progress=0,n.animals=0,n.animal!==NS.NONE&&n.resourcesService.increaseResourceLimit(n.getResourceType(),n.getMaxAnimals()),n.resourcesService.updateAnimals()):e.target.selectedIndex=n.animal-1,t.unsubscribe()})}},n.prototype.finishDemolish=function(){},n.prototype.prepareDemolish=function(){return this.stopProduction(),this.animal!==NS.NONE&&(this.moveAnimals(this.animals),this.resourcesService.decreaseResourceLimit(this.getResourceType(),this.getMaxAnimals())),!0},n.prototype.getLine=function(e){switch(e){case Cv.FIRST:return this.animal!==NS.NONE?Av.textValue(NS[this.animal].toLowerCase()+": "+this.animals+"/"+this.getMaxAnimals()):Av.emptyValue();case Cv.SECOND:if(this.animals>0&&this.food<0)return Av.progressValue(Math.abs(this.food),"famine");var n=[];return n.push(NS[NS.NONE]),n.push(NS[NS.CHICKEN]),n.push(NS[NS.SHEEP]),n.push(NS[NS.COW]),n.push(NS[NS.PIG]),n.push(NS[NS.HORSE]),Av.dropdownValue(n,NS[this.animal]);case Cv.THIRD:return this.animals>0&&this.findButcher()?Av.buttonCheckboxValue("butcher","butcher","auto butcher",this.autoButcher,"x"):Av.emptyValue();case Cv.FOURTH:return Av.emptyValue()}},n.prototype.getName=function(){return this.animal===NS.NONE?"Pasture":NS[this.animal].charAt(0).toUpperCase()+NS[this.animal].slice(1).toLowerCase()+" pasture"},n.prototype.startProduction=function(){return this.working=!0,!0},n.prototype.stopProduction=function(){this.working=!1},n.prototype.tick=function(e){if(this.food<0&&this.calendarService.getSeason()!==Yf.WINTER&&(this.food=0),this.autoButcher&&this.animals>0&&this.animals===this.getMaxAnimals()&&this.butcher(),this.animals>0?this.calendarService.getSeason()===Yf.WINTER?(this.food-=.0015*this.getAnimalSettings().SIZE*this.animals,this.food<=-100&&(this.food=0,this.decreaseAnimal(1))):(this.food-=2e-4*this.getAnimalSettings().SIZE*this.animals,this.food<=-100&&(this.food=0,this.decreaseAnimal(1))):this.food<0&&(this.food=0),this.food>=0&&this.animals>1&&this.chores<this.getSize()&&(this.animals<this.getMaxAnimals()||this.resourcesService.hasLimit(this.getResourceType()))&&this.progress<100&&(this.progress+=.05/(10/this.getAnimalSettings().REPRODUCTION_SPEED)*this.animals*(1+this.effectsService.getNatureEffectsValue()/100),this.progress>=100&&(this.animals<this.getMaxAnimals()||this.resourcesService.hasLimit(this.getResourceType()))&&(this.progress=0,this.animals<this.getMaxAnimals()?(this.resourcesService.addAnimalProducedData(this.getResourceType(),"Pasture",1),this.increaseAnimal(1)):this.resourcesService.hasLimit(this.getResourceType())&&this.resourcesService.increaseResource(this.getResourceType(),1,"Pasture",!0))),(this.animal===NS.CHICKEN||this.animal===NS.COW||this.animal===NS.SHEEP)&&(0===this.animals&&(this.produceProgress=0),this.produceProgress<100&&this.chores<this.getSize()&&(this.produceProgress+=.2*this.animals*(1+this.effectsService.getNatureEffectsValue()/100),this.produceProgress>=100)))if(this.produceProgress=0,this.animal===NS.CHICKEN){if(this.servicesService.getService(zu.ROYAL).layGoldenEgg())return;this.resourcesService.increaseResource(Iu.EGG,1,this.getName())}else if(this.animal===NS.COW)this.resourcesService.increaseResource(Iu.MILK,1,this.getName());else if(this.animal===NS.SHEEP){if(this.servicesService.getService(zu.ROYAL).getGoldenFleece())return;this.resourcesService.increaseResource(Iu.WOOL,1,this.getName())}this.chores+=.05*this.animals,this.chores>2*this.getSize()&&(this.chores=2*this.getSize())},n.prototype.work=function(e){return this.food<100&&0===this.resourcesService.hasResource(Iu.HAY,1,this.getName())?(this.resourcesService.decreaseResource(Iu.HAY,1,this.getName())&&(this.food+=10),!0):this.chores>=1&&(this.chores-=e/ys.FIELD.FARM.BASE_POWER,this.chores<0&&(this.chores=0),!0)},n.prototype.fireWorker=function(){return!1},n.prototype.hireWorker=function(){return!1},n.prototype.getWorkers=function(){return 0},n.prototype.hasWork=function(){return!!this.isWorking()&&(this.food<50&&0===this.resourcesService.hasResource(Iu.HAY,1,this.getName())||this.chores>=1)},n.prototype.getDetails=function(){return this.animal!==NS.NONE?"pasture size: "+Vu.round(this.getSize(),0)+"<br>progress: "+Vu.round(this.progress,2)+"%<br>produce progress: "+Vu.round(this.produceProgress,2)+"%<br>food: "+Vu.round(this.food,2)+"<br>chores: "+Vu.round(this.chores,2)+"<br>"+Vu.prepareResourceName(this.getResourceType())+" meat: "+this.getAnimalSettings().MEAT+"<br>"+Vu.prepareResourceName(this.getResourceType())+" fur: "+this.getAnimalSettings().FUR+"<br>"+Vu.prepareResourceName(this.getResourceType()).toLowerCase()+" size: "+this.getAnimalSettings().SIZE+"<br>"+e.prototype.getDetails.call(this):e.prototype.getDetails.call(this)},n.prototype.getHappinessEffect=function(){return 0},n.prototype.isCombinable=function(){return!0},n.prototype.isSplittable=function(){return!0},n.prototype.moveAnimals=function(e){var n,t,l=this,i=this.fieldService.getBuildings().filter(function(e){return e.getBuildingType()===wu.PASTURE&&e!==l&&e.getAnimals()<e.getMaxAnimals()}).map(function(e){return e}).filter(function(e){return e.getResourceType()===l.getResourceType()});try{for(var r=function(e){var n="function"==typeof Symbol&&e[Symbol.iterator],t=0;return n?n.call(e):{next:function(){return e&&t>=e.length&&(e=void 0),{value:e&&e[t++],done:!e}}}}(i),o=r.next();!o.done;o=r.next()){for(var u=o.value;e>0&&u.getAnimals()<u.getMaxAnimals();)u.increaseAnimal(1),e-=1,this.decreaseAnimal(1);if(0===e)return}}catch(s){n={error:s}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(n)throw n.error}}},n.prototype.getResourceType=function(){return this.animal!==NS.NONE?Iu[NS[this.animal]]:Iu.NOTHING},n.prototype.getAnimals=function(){return this.animals},n.prototype.getAnimalSettings=function(){return Rs.getResource(this.getResourceType())},n.prototype.getMaxAnimals=function(){return this.getResourceType()!==Iu.NOTHING?Math.floor(this.currentSize/this.getAnimalSettings().SIZE):0},n.prototype.increaseAnimal=function(e){this.animals+=e,this.resourcesService.updateAnimals()},n.prototype.decreaseAnimal=function(e){this.animals-=e,this.resourcesService.updateAnimals()},n.prototype.combine=function(e,n){var t=this;if(this.getBuildingType()===e.getBuildingType()){this.modalService.open(ju.CONFIRM),this.modalService.setModalText(" Are you sure you want to combine "+this.getName()+" of size "+this.getSize()+" with "+e.getName()+" of size "+e.getSize()+"?<br>Resulting "+this.getName()+" of size "+(this.getSize()+e.getSize())+" will keep animals");var l=this.modalService.registerForConfirmation().subscribe(function(i){l.unsubscribe(),i?(t.currentSize+=e.getSize(),e.animal===t.animal?t.increaseAnimal(e.getAnimals()):t.animal===NS.NONE&&e.animal!==NS.NONE?(t.animal=e.animal,t.increaseAnimal(e.getAnimals())):e.moveAnimals(e.getAnimals()),e.animals=0,n.finaliseCombine(!0)):n.finaliseCombine(!1),t.resourcesService.updateAnimals()})}},n.prototype.split=function(e){var t=this;this.modalService.open(ju.INPUT),this.modalService.setModalText("Set new pasture size (1-"+(this.getSize()-1)+")"),this.modalService.setModalValue("");var l=this.modalService.registerForValueResponse().subscribe(function(i){if(l.unsubscribe(),null!==i){if(!isNaN(i)&&0!==i)if(i>=1&&i<t.getSize()){t.currentSize-=Number(i);var r=new n(t.servicesService,t.servicesService.getService(zu.ID).getNextId(),Number(i)).build();e.finaliseSplit(r),r.animal=t.animal,t.animals>t.getMaxAnimals()&&(t.moveAnimals(t.animals-t.getMaxAnimals()),t.animals>t.getMaxAnimals()&&t.decreaseAnimal(t.animals-t.getMaxAnimals()))}else t.modalService.info("Invalid size value!");t.resourcesService.updateAnimals()}})},n}(_v),wS=function(e){return e.BUTCHERING="butchering {animal}",e.WAITING_FOR_ANIMALS="waiting for animals",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.TRANSPORTING="transporting goods",e}({}),PS=function(e){function n(n,t,l,i,r,o,u,s,a,c){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=wS.WAITING_FOR_ANIMALS),void 0===i&&(i=0),void 0===r&&(r=!0),void 0===o&&(o=0),void 0===u&&(u=0),void 0===s&&(s=[]),void 0===a&&(a=!0),void 0===c&&(c=1);var p=e.call(this,t,wu.BUTCHER,n,ys.FIELD.BUTCHER,r,!0,!0,c)||this;return p.status=l,p.progress=i,p.outputStorage=o,p.outputFurStorage=u,p.animals=s,p.discardExcessFur=a,p}return i(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,status:this.status,progress:this.progress,working:this.working,outputStorage:this.outputStorage,animals:this.animals,discardExcessFur:this.discardExcessFur,outputFurStorage:this.outputFurStorage}},n.prototype.callback=function(e){"toggleDiscard"===e&&(this.discardExcessFur=!this.discardExcessFur)},n.prototype.getLine=function(e){switch(e){case Cv.FIRST:return Av.textValue(this.animals.length>0?this.status.replace("{animal}",Vu.prepareResourceName(this.animals[0])):this.status);case Cv.SECOND:return Av.progressValue(this.progress);case Cv.THIRD:return Av.textValue("queue: "+this.animals.length+"/10");case Cv.FOURTH:return Av.checkboxValue("discard excess fur",this.discardExcessFur,"toggleDiscard")}},n.prototype.getAnimalsNumber=function(){return this.animals.length},n.prototype.addAnimalToButcher=function(e){return this.animals.length<10&&(this.animals.push(e),!0)},n.prototype.tick=function(e){if(this.working)if(this.animals.length>0&&0===this.outputStorage&&0===this.outputFurStorage)if(this.status=wS.BUTCHERING,this.progress<100)this.progress+=this.getPower()/Rs.getResource(this.animals[0]).BUTCHERING_DIFFICULTY,this.progress>100&&(this.progress=100);else{this.status=wS.TRANSPORTING,this.progress=0;var n=this.animals.shift();this.outputStorage=Rs.getResource(n).MEAT,this.resourcesService.increaseResource(Iu.MEAT,this.outputStorage,this.getName())?this.outputStorage=0:this.status=wS.WAITING_FOR_WAREHOUSE_SPACE,this.outputFurStorage=Rs.getResource(n).FUR,this.resourcesService.increaseResource(Iu.FUR,this.outputFurStorage,this.getName())?this.outputFurStorage=0:this.discardExcessFur?this.outputFurStorage=0:this.status=wS.WAITING_FOR_WAREHOUSE_SPACE}else{if(0!==this.outputStorage){var t=this.resourcesService.getResource(Iu.MEAT).getFreeSpace(),l=Math.min(t,this.outputStorage);this.resourcesService.increaseResource(Iu.MEAT,l,this.getName())&&(this.outputStorage-=l,0===this.outputFurStorage&&0===this.outputStorage&&(this.status=wS.WAITING_FOR_ANIMALS))}if(0!==this.outputFurStorage){t=this.resourcesService.getResource(Iu.FUR).getFreeSpace();var i=Math.min(t,this.outputStorage);this.resourcesService.increaseResource(Iu.FUR,i,this.getName())&&(this.outputFurStorage-=i,0===this.outputFurStorage&&0===this.outputStorage&&(this.status=wS.WAITING_FOR_ANIMALS)),this.discardExcessFur&&(this.outputFurStorage=0,this.status=wS.WAITING_FOR_ANIMALS)}0===this.outputStorage&&0===this.outputFurStorage&&(this.status=wS.WAITING_FOR_ANIMALS)}},n.prototype.getDetails=function(){return e.prototype.getDetails.call(this)+"local storage:<br>&nbsp;&nbsp;meat: "+this.outputStorage+"<br>&nbsp;&nbsp;fur: "+this.outputFurStorage},n}(_v),xS=function(e){function n(n,t,l,i,r,o,u,s,a){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===i&&(i=Hv.FETCHING_INPUT),void 0===r&&(r=[]),void 0===o&&(o=[]),void 0===u&&(u=!1),void 0===s&&(s=null),void 0===a&&(a=1),e.call(this,n,t,wu.MINT,ys.MOUNTAINS.MINT,i,l,r,o,u,s,a)||this}return i(n,e),n}(Gv),kS=function(e){function n(n,t,l,i,r,o,u,s,a){var c=e.call(this,n,t,l,i,r>0,u,s,a)||this;return c.servicesService=l,c.workers=r,c.maxWorkers=o,c}return i(n,e),n.prototype.fireWorker=function(){return this.workers>0&&(this.resourcesService.fireWorker(1),this.workers-=1,!0)},n.prototype.hireWorker=function(){return!!(this.workers<this.maxWorkers&&this.resourcesService.hireWorker())&&(this.workers+=1,!0)},n.prototype.getWorkers=function(){return this.workers},n.prototype.isWorking=function(){return this.workers>0},n.prototype.startProduction=function(){if(0===this.workers){for(;this.workers<this.maxWorkers&&this.resourcesService.hireWorker();)this.workers+=1;if(this.workers>0)return!0}return!1},n.prototype.stopProduction=function(){this.workers>0&&(this.resourcesService.fireWorker(this.workers),this.workers=0)},n}(_v),MS=function(e){return e[e.CONSTRUCTION=0]="CONSTRUCTION",e[e.BUILT=1]="BUILT",e[e.ABDICATED=2]="ABDICATED",e[e.USED=3]="USED",e}({}),DS=function(e){function n(t,l,i,r,o,u,s,a,c,p){var h=e.call(this,t,l,i,r,p,n.maxWorkers,!1,!0,1)||this;return h.progress=o,h.maxProgress=u,h.stage=s,h.state=a,h.year=c,h.prepareIcons(),h}return i(n,e),n.prototype.toJSON=function(){return{id:this.id,buildingType:this.buildingType,progress:this.progress,maxProgress:this.maxProgress,stage:this.stage,state:this.state,year:this.year,workers:this.workers}},n.prototype.prepareIcons=function(){var e=this;this.iconsValue=[],this.settings.STAGES[this.stage]&&this.settings.STAGES[this.stage].cost.forEach(function(n){return e.iconsValue.push({name:Iu[n.resource],path:"resources",prefix:n.amount,suffix:""})})},n.prototype.callback=function(e){var n=this;if("add"===e){var t=this.settings.STAGES[this.stage];if(void 0===this.settings.STAGES[this.stage]&&this.maxProgress<100)return void(this.maxProgress=100);var l=new Map;t.cost.forEach(function(e){return l.set(e.resource,e.amount)}),this.resourcesService.decreaseResources(l,this.getName(),!0)&&(this.stage+=1,this.maxProgress+=t.progress,this.maxProgress>100&&(this.maxProgress=100),this.prepareIcons())}else if("abdicate"===e){this.modalService.open(ju.ABDICATION);var i=this.modalService.registerForAbdication().subscribe(function(e){i.unsubscribe(),e&&(n.state=MS.ABDICATED,n.servicesService.getService(zu.GAME).incrementAbdicationLevel())})}else"hire"===e?this.hireWorker():"fire"===e&&this.fireWorker()},n.prototype.forceAbdicate=function(){this.state===MS.BUILT&&(this.state=MS.ABDICATED,this.servicesService.getService(zu.GAME).incrementAbdicationLevel())},n.prototype.getName=function(){return this.progress>=100?e.prototype.getName.call(this):e.prototype.getName.call(this)+" construction"},n.prototype.getLine=function(e){switch(e){case Cv.FIRST:return this.state===MS.CONSTRUCTION?Av.progressValue(this.progress,Vu.round(this.progress,2)+"% / "+this.maxProgress+"%"):Av.textValue("built in year "+this.year);case Cv.SECOND:return this.state===MS.CONSTRUCTION?Av.iconValue(this.iconsValue):this.state===MS.BUILT?Av.buttonValue(this.getAbdicationText(),"abdicate"):Av.emptyValue();case Cv.THIRD:return this.maxProgress<100?Av.buttonValue("add materials","add"):Av.emptyValue();case Cv.FOURTH:return this.state===MS.CONSTRUCTION?Av.twoButtonValue("hire worker","hire",this.workers+"/"+this.maxWorkers,"fire worker","fire"):Av.emptyValue()}},n.prototype.getAbdicationText=function(){return"abdicate"},n.prototype.tick=function(e){this.isWorking()&&(this.progress>=100&&(this.stopProduction(),this.addPermanentEffect(),this.progress=100,this.state=MS.BUILT,this.year=this.servicesService.getService(zu.CALENDAR).getYear(),this.getBuildingType()===wu.ASCENSION_TEMPLE&&this.servicesService.getService(zu.LOG).mystical("As you enter the temple you have strange feeling of many eyes watching you, <br>however there is nobody there. At the end of a big hall you find a golden altar.<br>This is it, your whole life lead you here. You feel safe.")),this.progress<this.maxProgress&&(this.progress+=.001*this.getPower()*this.workers))},n.prototype.getEffects=function(){return this.state===MS.CONSTRUCTION?this.effectsService.getBuildingEffectsValue(wu.CONSTRUCTION,!1):e.prototype.getEffects.call(this)},n.prototype.getPermanentEffects=function(){return this.state===MS.CONSTRUCTION?this.effectsService.getBuildingEffectsValue(wu.CONSTRUCTION,!0):e.prototype.getPermanentEffects.call(this)},n.prototype.getHappinessEffect=function(){return this.state===MS.CONSTRUCTION?e.prototype.getHappinessEffect.call(this):0},n.prototype.isStoppable=function(){return this.state===MS.CONSTRUCTION},n.prototype.isFinished=function(){return this.state!==MS.CONSTRUCTION},n.prototype.addPermanentEffect=function(){this.addBuildingEffects(),this.addArmyEffects()},n.prototype.addBuildingEffects=function(){var e=this;if(this.settings.BUILDING_EFFECTS&&this.settings.BUILDING_EFFECTS.length>0){var n=this.servicesService.getService(zu.EFFECTS);this.settings.BUILDING_EFFECTS.forEach(function(t){n.addBuildingEffect(new Ku(e.getName(),t.building,Number(t.value),es.WONDER))})}},n.prototype.addArmyEffects=function(){var e=this;if(this.settings.ARMY_EFFECTS&&this.settings.ARMY_EFFECTS.length>0){var n=this.servicesService.getService(zu.EFFECTS);this.settings.ARMY_EFFECTS.forEach(function(t){n.addArmyEffect(new qu(e.getName(),t.troop,Number(t.value),es.WONDER))})}},n.prototype.verifyWonderEffects=function(){var e=this;if(this.isFinished()){if(this.settings.BUILDING_EFFECTS){var n=this.servicesService.getService(zu.EFFECTS);this.settings.BUILDING_EFFECTS.forEach(function(t){e.effectsService.hasBuildingEffect(e.getName(),t.building)||n.addBuildingEffect(new Ku(e.getName(),t.building,Number(t.value),es.WONDER))})}if(this.settings.ARMY_EFFECTS){var t=this.servicesService.getService(zu.EFFECTS);this.settings.ARMY_EFFECTS.forEach(function(n){e.effectsService.hasArmyEffect(e.getName(),n.troop)||t.addArmyEffect(new qu(e.getName(),n.troop,Number(n.value),es.WONDER))})}}},n.maxWorkers=5,n}(kS),LS=function(e){function n(n,t,l,i,r,o,u,s){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=MS.CONSTRUCTION),void 0===u&&(u=-1),void 0===s&&(s=0),e.call(this,t,wu.STONEHENGE,n,ys.PLATEAU.STONEHENGE,l,i,r,o,u,s)||this}return i(n,e),n.prototype.tick=function(n){if(e.prototype.tick.call(this,n),this.state===MS.ABDICATED){this.state=MS.USED,this.servicesService.getService(zu.GAME).enable(_u.PLATEAU),this.servicesService.getService(zu.ROYAL).increaseRoyalPoints(this.settings.RP),this.logService.log("Your abdication granted you "+this.settings.RP+" royal points");var t=this.servicesService.getService(zu.KONGREGATE);t.isAvailable()&&t.submitStat("Stonehenge",!0)}},n}(DS),FS=function(e){function n(n,t,l,i){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===i&&(i=1);var r=e.call(this,t,wu.MARKETPLACE,n,ys.VILLAGE.MARKETPLACE,!0,!0,!1,i)||this;return r.progress=l,r.callMerchantPrice=[{name:"coins",path:"resources",prefix:"",suffix:"25"}],r}return i(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress}},n.prototype.build=function(){return this.servicesService.getService(zu.GAME).enable(_u.MARKET),e.prototype.build.call(this)},n.prototype.callback=function(e){"bribe"===e&&(this.resourcesService.decreaseResource(Iu.COINS,25,this.getName(),!0)?1===Qu.randomBetween(1,2)&&(this.progress+=50,this.progress>=100&&(this.progress=0,this.servicesService.getService(zu.MARKET).callMerchant())):this.modalService.info("Not enough coins for a bribe"))},n.prototype.getLine=function(e){switch(e){case Cv.FIRST:return Av.progressValue(this.progress,"merchant arrival");case Cv.SECOND:return Av.emptyValue();case Cv.THIRD:return Av.iconValue(this.callMerchantPrice);case Cv.FOURTH:return Av.buttonValue("bribe merchant (50% chance)","bribe")}},n.prototype.tick=function(e){1===Qu.randomBetween(1,10)&&(this.progress+=this.getPower()),this.progress>=100&&(this.servicesService.getService(zu.MARKET).callMerchant(),this.progress=0)},n}(_v),US=function(e){function n(n,t,l){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=1);var i=e.call(this,t,wu.SMITHY,n,ys.MOUNTAINS.SMITHY,!1,!0,!1,l)||this;return n&&(i.gameService=n.getService(zu.GAME)),i}return i(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType}},n.prototype.build=function(){var e=this;return this.settings.RECIPES.forEach(function(n){e.gameService.isEnabled(n.prerequisite)&&e.servicesService.getService(zu.RECIPE).enable(n.recipe)}),this.gameService.enable(_u.BUILT_SMITHY),this},n.prototype.prepareDemolish=function(){var e=this;return this.settings.RECIPES.forEach(function(n){return e.servicesService.getService(zu.RECIPE).disable(n.recipe)}),this.gameService.disable(_u.BUILT_SMITHY),this.servicesService.getService(zu.CRAFTING).filterCraftingQueue(this.settings.RECIPES),this.servicesService.getService(zu.VILLAGE).buildings.filter(function(e){return e.getBuildingType()===wu.WORKSHOP}).map(function(e){return e}).forEach(function(n){n.getRecipe()&&e.settings.RECIPES.includes(n.getRecipe().id)&&n.cancelCrafting()}),this.servicesService.getService(zu.VILLAGE).buildings.filter(function(e){return e.getBuildingType()===wu.MANUFACTURE}).map(function(e){return e}).forEach(function(n){n.getRecipe()&&e.settings.RECIPES.includes(n.getRecipe().id)&&n.cancelCrafting()}),!0},n.prototype.getLine=function(e){switch(e){case Cv.FIRST:return Av.textValue("Allows workshops");case Cv.SECOND:return Av.textValue("to smelt ore");case Cv.THIRD:case Cv.FOURTH:return Av.emptyValue()}},n.prototype.getEffects=function(){return 0},n.prototype.getHappinessEffect=function(){return 0},n.prototype.getPermanentEffects=function(){return 0},n}(_v),HS=function(e){function n(n,t,l,i,r){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=!1),void 0===i&&(i=0),void 0===r&&(r=1);var o=e.call(this,t,wu.CHURCH,n,ys.VILLAGE.CHURCH,l,!0,!0,r)||this;return o.progress=i,o.servicesService&&(o.religionService=n.getService(zu.RELIGION)),o}return i(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,working:this.working,progress:this.progress}},n.prototype.build=function(){return this.religionService.increaseFaithCap(50),this.servicesService.getService(zu.GAME).enable(_u.RELIGION),this.startProduction(),this},n.prototype.getLine=function(e){switch(e){case Cv.FIRST:case Cv.SECOND:return Av.emptyValue();case Cv.THIRD:return Av.progressValue(this.progress,"prayers");case Cv.FOURTH:return Av.emptyValue()}},n.prototype.prepareDemolish=function(){return this.religionService.decreaseFaithCap(50),!0},n.prototype.tick=function(e){if(this.working){var n=this.servicesService.getService(zu.VILLAGE).getPopulation();this.progress+=.1*(Math.pow(Math.log(n),2)+1)*this.getPower(),this.progress>100&&(this.progress=0,this.religionService.increaseFaith(1))}},n}(_v),GS=function(e){function n(n,t,l,i,r,o,u,s){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=MS.CONSTRUCTION),void 0===u&&(u=-1),void 0===s&&(s=0),e.call(this,t,wu.PYRAMID,n,ys.PLATEAU.PYRAMID,l,i,r,o,u,s)||this}return i(n,e),n.prototype.tick=function(n){if(e.prototype.tick.call(this,n),this.state===MS.ABDICATED){this.state=MS.USED,this.servicesService.getService(zu.GAME).enable(_u.PLATEAU),this.servicesService.getService(zu.ROYAL).increaseRoyalPoints(this.settings.RP),this.logService.log("Your abdication granted you "+this.settings.RP+" royal points");var t=this.servicesService.getService(zu.KONGREGATE);t.isAvailable()&&t.submitStat("Pyramid",!0)}},n}(DS),BS=function(e){function n(n,t,l,i,r,o,u,s){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=MS.CONSTRUCTION),void 0===u&&(u=-1),void 0===s&&(s=0),e.call(this,t,wu.HANGING_GARDEN,n,ys.PLATEAU.HANGING_GARDEN,l,i,r,o,u,s)||this}return i(n,e),n.prototype.tick=function(n){if(e.prototype.tick.call(this,n),this.state===MS.ABDICATED){this.state=MS.USED,this.servicesService.getService(zu.GAME).enable(_u.PLATEAU),this.servicesService.getService(zu.ROYAL).increaseRoyalPoints(this.settings.RP),this.logService.log("Your abdication granted you "+this.settings.RP+" royal points");var t=this.servicesService.getService(zu.KONGREGATE);t.isAvailable()&&t.submitStat("Hanging Garden",!0)}},n}(DS),VS=function(e){function n(n,t,l,i,r,o,u,s){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=MS.CONSTRUCTION),void 0===u&&(u=-1),void 0===s&&(s=0),e.call(this,t,wu.COLOSSUS,n,ys.PLATEAU.COLOSSUS,l,i,r,o,u,s)||this}return i(n,e),n.prototype.tick=function(n){if(e.prototype.tick.call(this,n),this.state===MS.ABDICATED){this.state=MS.USED,this.servicesService.getService(zu.GAME).enable(_u.PLATEAU),this.servicesService.getService(zu.ROYAL).increaseRoyalPoints(this.settings.RP),this.logService.log("Your abdication granted you "+this.settings.RP+" royal points");var t=this.servicesService.getService(zu.KONGREGATE);t.isAvailable()&&t.submitStat("Colossus",!0)}},n}(DS),WS=function(e){function n(n,t,l,i,r,o,u,s){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=MS.CONSTRUCTION),void 0===u&&(u=-1),void 0===s&&(s=0),e.call(this,t,wu.ASCENSION_TEMPLE,n,ys.PLATEAU.ASCENSION_TEMPLE,l,i,r,o,u,s)||this}return i(n,e),n.prototype.callback=function(n){var t=this;if("abdicate"===n){this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to ascend?<br><br>You will start from the beginning and all progress except for</br>royal points, heritage points and permanent royal upgrades will be deleted.");var l=this.modalService.registerForConfirmation().subscribe(function(e){if(l.unsubscribe(),e){t.state=MS.ABDICATED,t.servicesService.getService(zu.ROYAL).increaseRoyalPoints(t.settings.RP),t.logService.mystical("Your ascension granted you "+t.settings.RP+" royal points");var n=t.servicesService.getService(zu.KONGREGATE);n.isAvailable()&&n.submitStat("Ascension Temple",!0),t.servicesService.getService(zu.SERIALIZER).ascensionReset()}})}else e.prototype.callback.call(this,n)},n.prototype.getAbdicationText=function(){return"ascend"},n.prototype.forceAbdicate=function(){},n}(DS),zS=function(e){function n(n,t,l,i,r,o,u,s){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=MS.CONSTRUCTION),void 0===u&&(u=-1),void 0===s&&(s=0),e.call(this,t,wu.UNDERGROUND_CITY,n,ys.PLATEAU.UNDERGROUND_CITY,l,i,r,o,u,s)||this}return i(n,e),n.prototype.tick=function(n){if(e.prototype.tick.call(this,n),this.state===MS.ABDICATED){this.state=MS.USED,this.servicesService.getService(zu.GAME).enable(_u.PLATEAU),this.servicesService.getService(zu.ROYAL).increaseRoyalPoints(this.settings.RP),this.logService.log("Your abdication granted you "+this.settings.RP+" royal points");var t=this.servicesService.getService(zu.KONGREGATE);t.isAvailable()&&t.submitStat("Underground City",!0)}},n}(DS),YS=function(e){function n(n,t,l,i,r,o,u,s){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=MS.CONSTRUCTION),void 0===u&&(u=-1),void 0===s&&(s=0),e.call(this,t,wu.GREAT_LIGHTHOUSE,n,ys.PLATEAU.GREAT_LIGHTHOUSE,l,i,r,o,u,s)||this}return i(n,e),n.prototype.tick=function(n){if(e.prototype.tick.call(this,n),this.state===MS.ABDICATED){this.state=MS.USED,this.servicesService.getService(zu.GAME).enable(_u.PLATEAU),this.servicesService.getService(zu.ROYAL).increaseRoyalPoints(this.settings.RP),this.logService.log("Your abdication granted you "+this.settings.RP+" royal points");var t=this.servicesService.getService(zu.KONGREGATE);t.isAvailable()&&t.submitStat("Great Lighthouse",!0)}},n}(DS),KS=function(e){function n(n,t,l,i,r,o,u,s){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=MS.CONSTRUCTION),void 0===u&&(u=-1),void 0===s&&(s=0),e.call(this,t,wu.SACRED_GROVE,n,ys.PLATEAU.SACRED_GROVE,l,i,r,o,u,s)||this}return i(n,e),n.prototype.tick=function(n){if(e.prototype.tick.call(this,n),this.state===MS.ABDICATED){this.state=MS.USED,this.servicesService.getService(zu.GAME).enable(_u.PLATEAU),this.servicesService.getService(zu.ROYAL).increaseRoyalPoints(this.settings.RP),this.logService.log("Your abdication granted you "+this.settings.RP+" royal points");var t=this.servicesService.getService(zu.KONGREGATE);t.isAvailable()&&t.submitStat("Sacred Grove",!0)}},n}(DS),jS=function(e){function n(n,t,l){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=1);var i=e.call(this,t,wu.STASH,n,ys.FORT.STASH,!1,!0,!1,l)||this;return i.servicesService&&(i.armyService=n.getService(zu.ARMY)),i}return i(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType}},n.prototype.build=function(){return this.armyService.increaseStash(ys.FORT.STASH.SIZE),this},n.prototype.prepareDemolish=function(){return this.armyService.decreaseStash(ys.FORT.STASH.SIZE),!0},n.prototype.getLine=function(e){switch(e){case Cv.FIRST:return Av.textValue("stash size: "+ys.FORT.STASH.SIZE);case Cv.SECOND:case Cv.THIRD:case Cv.FOURTH:return Av.emptyValue()}},n}(_v),$S=function(){function e(e){this.servicesService=e,this.nextId=1,e.addService(zu.ID,this)}return e.prototype.getNextId=function(){var e=this.nextId;return this.nextId+=1,e},e.prototype.load=function(e){this.nextId=e.nextId},e.prototype.reset=function(e,n){e&&(this.nextId=1)},e.prototype.save=function(){return{nextId:this.nextId}},e.ngInjectableDef=Oe({factory:function(){return new e(Ye(Vf))},token:e,providedIn:"root"}),e}(),QS=function(e){return e.CRAFTING="crafting {craft}",e.WAITING_FOR_RESOURCES="waiting for resources",e.WAITING_FOR_WAREHOUSE="waiting for warehouse space",e.NO_CRAFTING="no crafting recipe",e.PRODUCTION_SETUP="production setup",e.FETCHING_MATERIALS="fetching materials",e.TRANSPORTING="transporting goods",e}({}),qS=function(e){function n(n,t,l,i,r,o,u,s){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===i&&(i=QS.NO_CRAFTING),void 0===r&&(r=!1),void 0===o&&(o=-1),void 0===u&&(u=1),void 0===s&&(s=0);var a=e.call(this,t,wu.MANUFACTURE,n,ys.VILLAGE.MANUFACTURE,r,!0,!0,u)||this;return a.progress=l,a.status=i,a.storage=s,a.recipe=null,a.iconsValue=[],n&&(a.resourcesService=n.getService(zu.RESOURCES),a.modalService=n.getService(zu.MODAL),a.recipeService=n.getService(zu.RECIPE),o>=0&&(a.recipe=a.recipeService.getRecipeById(o),a.prepareIcons())),a}return i(n,e),n.prototype.prepareIcons=function(){var e=this;this.iconsValue=[],this.recipe&&Array.from(this.recipe.cost.entries()).forEach(function(n){e.iconsValue.push({name:Iu[n[0]],path:"resources",prefix:n[1],suffix:""})})},n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,working:this.working,recipe:null!==this.recipe?this.recipe.id:-1,storage:this.storage}},n.prototype.build=function(){return this.startProduction(),this},n.prototype.prepareDemolish=function(){return e.prototype.prepareDemolish.call(this)},n.prototype.callback=function(e){var n=this;if("select"===e){this.modalService.open(ju.RECIPE);var t=this.modalService.registerForValueResponse().subscribe(function(e){t.unsubscribe(),null!==e&&(n.recipe=n.recipeService.getRecipeById(e),n.prepareIcons(),n.status=QS.PRODUCTION_SETUP)})}else if("change"===e){this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to change production recipe?");var l=this.modalService.registerForConfirmation().subscribe(function(e){if(l.unsubscribe(),e){n.modalService.open(ju.RECIPE),n.modalService.setModalValue(n.recipe.id);var t=n.modalService.registerForValueResponse().subscribe(function(e){t.unsubscribe(),null!==e&&(n.progress=0,n.recipe=n.recipeService.getRecipeById(e),n.prepareIcons(),n.status=QS.PRODUCTION_SETUP)})}})}},n.prototype.getLine=function(e){switch(e){case Cv.FIRST:return Av.textValue(this.recipe?this.status.replace("{craft}",Vu.prepareResourceName(this.recipe.resource)):this.status);case Cv.SECOND:return Av.progressValue(this.progress);case Cv.THIRD:return this.recipe?Av.iconValue(this.iconsValue):Av.emptyValue();case Cv.FOURTH:return null===this.recipe?Av.buttonValue("select recipe","select"):Av.buttonValue(Vu.prepareResourceName(this.recipe.resource),"change")}},n.prototype.tick=function(e){if(this.working)if(this.status===QS.PRODUCTION_SETUP)this.progress<100?(this.progress+=.5*this.getPower()/this.recipe.craftingDifficulty,this.progress>100&&(this.progress=100)):(this.progress=0,this.status=QS.FETCHING_MATERIALS);else if(this.status===QS.CRAFTING)this.progress<100?(this.progress+=this.getPower()/this.recipe.craftingDifficulty*ys.VILLAGE.MANUFACTURE.CRAFTING_POWER,this.progress>100&&(this.progress=100)):(this.progress=0,this.storage=this.recipe.amount,this.status=QS.TRANSPORTING);else if(this.status===QS.FETCHING_MATERIALS||this.status===QS.WAITING_FOR_RESOURCES)this.status=this.resourcesService.decreaseResources(this.recipe.cost,this.getName(),!1,1,!0)?QS.CRAFTING:QS.WAITING_FOR_RESOURCES;else if(this.status===QS.TRANSPORTING||this.status===QS.WAITING_FOR_WAREHOUSE){var n=this.resourcesService.getLimit(this.recipe.resource);this.storage>n?(this.storage-=n,this.resourcesService.increaseResource(this.recipe.resource,n,this.getName()),this.status=QS.WAITING_FOR_WAREHOUSE):this.resourcesService.increaseResource(this.recipe.resource,this.storage,this.getName())&&(this.status=QS.FETCHING_MATERIALS)}},n.prototype.getRecipe=function(){return this.recipe},n.prototype.cancelCrafting=function(){this.recipe=null,this.progress=0,this.status=QS.NO_CRAFTING},n}(_v),XS=function(e){function n(n,t,l,i,r,o,u,s,a){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===i&&(i=0),void 0===r&&(r=100),void 0===o&&(o=100),void 0===u&&(u=0),void 0===s&&(s=1),void 0===a&&(a=!0),e.call(this,n,t,wu.LONGHOUSE,ys.VILLAGE.LONGHOUSE,l,i,r,o,u,s,a)||this}return i(n,e),n}(wv),ZS=function(e){function n(n,t,l,i,r,o,u){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===i&&(i=!1),void 0===r&&(r=Uu.NONE),void 0===o&&(o=0),void 0===u&&(u=1);var s=e.call(this,t,wu.EMBASSY,n,ys.FORT.EMBASSY,i,!0,!0,u)||this;return s.progress=l,s.country=r,s.paper=o,s.servicesService&&(s.worldService=n.getService(zu.WORLD)),s}return i(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,working:this.working,progress:this.progress,country:this.country,paper:this.paper,buildingType:this.buildingType}},n.prototype.callback=function(e){this.country=Uu[String(e.target.value)],this.progress=0},n.prototype.getLine=function(e){switch(e){case Cv.FIRST:var n=this.worldService.getCountriesList();return n.includes(Uu[this.country])||(this.country=Uu.NONE),Av.dropdownValue(n,Uu[this.country]);case Cv.SECOND:return this.country===Uu.NONE?Av.emptyValue():Av.textValue("current standing: "+this.worldService.getCountry(this.country).diplomacy);case Cv.THIRD:return this.country===Uu.NONE?Av.emptyValue():Av.progressValue(this.progress);case Cv.FOURTH:return this.paper<.5?Av.textValue("No enough paper"):Av.emptyValue()}},n.prototype.tick=function(e){this.working&&(this.paper<5&&this.resourcesService.decreaseResource(Iu.PAPER,1,this.getName())&&(this.paper+=1),this.country!==Uu.NONE&&this.paper>=1&&this.worldService.getCountry(this.country).diplomacy<100&&(this.progress<100?(this.progress+=this.getPower(),this.progress>100&&(this.progress=100)):(this.progress=0,this.paper-=.5,this.worldService.getCountry(this.country).increaseDiplomacy(1))))},n.prototype.getDetails=function(){return e.prototype.getDetails.call(this)+"paper: "+this.paper},n}(_v),JS=function(e){function n(n,t,l,i,r,o,u,s,a){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===i&&(i=Hv.FETCHING_INPUT),void 0===r&&(r=[]),void 0===o&&(o=[]),void 0===u&&(u=!1),void 0===s&&(s=null),void 0===a&&(a=1),e.call(this,n,t,wu.PAPER_MILL,ys.FOREST.PAPER_MILL,i,l,r,o,u,s,a)||this}return i(n,e),n}(Gv),eE=function(e){return e.MINING="mining {res}",e.WAITING_FOR_SELECTION="waiting for ore selection",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.LOOKING_FOR_NEW_ORE_VEIN="looking for new ore vein",e.WAITING_FOR_ORE_DEPOSIT="waiting for ore deposit",e.TRANSPORTING="transporting {res}",e}({}),nE=function(e){function n(t,l,i,r,o,u,s,a,c,p){void 0===t&&(t=null),void 0===l&&(l=-1),void 0===i&&(i=0),void 0===r&&(r=eE.WAITING_FOR_SELECTION),void 0===o&&(o=0),void 0===u&&(u=0),void 0===s&&(s=20),void 0===a&&(a=0),void 0===c&&(c=Iu.NOTHING),void 0===p&&(p=1);var h=e.call(this,l,wu.DEEP_MINE,t,ys.MOUNTAINS.DEEP_MINE,u,n.maxWorkers,!0,!0,p)||this;return h.progress=i,h.status=r,h.storage=o,h.resources=s,h.oreToFind=a,h.ore=c,h.maxResources=20*p,h.servicesService&&(h.modalService=t.getService(zu.MODAL),h.landService=t.getService(zu.LAND)),h}return i(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,storage:this.storage,workers:this.workers,resources:this.resources,oreToFind:this.oreToFind,ore:this.ore}},n.prototype.callback=function(e){var n=this;if(this.ore===Iu.NOTHING)if(Iu[String(e.target.value).replace(" ","_")]===Iu.STONE){this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to mine "+Vu.prepareResourceName(Iu[String(e.target.value).replace(" ","_")])+" in this mine?");var t=this.modalService.registerForConfirmation().subscribe(function(l){l?(n.ore=Iu[String(e.target.value).replace(" ","_")],n.status=eE.MINING,n.progress=0):e.target.selectedIndex=n.ore,t.unsubscribe()})}else if(this.landService.hasOre(Iu[String(e.target.value).replace(" ","_")],20)){this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to mine "+Vu.prepareResourceName(Iu[String(e.target.value).replace(" ","_")])+" in this mine?");var l=this.modalService.registerForConfirmation().subscribe(function(t){t?(n.landService.decreaseOre(Iu[String(e.target.value).replace(" ","_")],20),n.ore=Iu[String(e.target.value).replace(" ","_")],n.status=eE.MINING,n.progress=0,n.startProduction()):e.target.selectedIndex=n.ore,l.unsubscribe()})}else this.modalService.info("Not enough "+Vu.prepareResourceName(Iu[String(e.target.value).replace(" ","_")])+" deposits available<br>20 "+Vu.prepareResourceName(Iu[String(e.target.value).replace(" ","_")])+" deposits required to start mining."),e.target.selectedIndex=this.ore;else"hire"===e?this.hireWorker():"fire"===e&&this.fireWorker()},n.prototype.hasBuff=function(){return!this.isUsedUp()&&e.prototype.hasBuff.call(this)},n.prototype.getLine=function(e){switch(e){case Cv.FIRST:if(this.ore!==Iu.NOTHING)return Av.textValue(Vu.prepareResourceName(this.ore).toLowerCase()+": "+this.resources+"/"+this.maxResources);var n=[];return n.push(Iu[Iu.NOTHING].replace("_"," ")),n.push(Iu[Iu.STONE].replace("_"," ")),n.push(Iu[Iu.COAL].replace("_"," ")),n.push(Iu[Iu.GOLD_ORE].replace("_"," ")),n.push(Iu[Iu.SILVER_ORE].replace("_"," ")),n.push(Iu[Iu.COPPER_ORE].replace("_"," ")),n.push(Iu[Iu.TIN_ORE].replace("_"," ")),n.push(Iu[Iu.IRON_ORE].replace("_"," ")),Av.dropdownValue(n,Iu[this.ore]);case Cv.SECOND:return Av.textValue(this.status.replace("{res}",Vu.prepareResourceName(this.ore).toLowerCase()));case Cv.THIRD:return this.ore!==Iu.NOTHING?Av.progressValue(this.progress):Av.emptyValue();case Cv.FOURTH:return this.ore!==Iu.NOTHING?Av.twoButtonValue("hire worker","hire",this.workers+"/"+this.maxWorkers,"fire worker","fire"):Av.emptyValue()}},n.prototype.tick=function(e){if(this.ore!==Iu.NOTHING){if(!this.isWorking())return;if(this.status===eE.LOOKING_FOR_NEW_ORE_VEIN||this.status===eE.WAITING_FOR_ORE_DEPOSIT){if(0===this.oreToFind)if(this.ore===Iu.STONE)this.oreToFind=this.maxResources;else{var n=this.landService.getOre(this.ore);if(!(n>0))return void(this.status=eE.WAITING_FOR_ORE_DEPOSIT);10*n>this.maxResources?(this.landService.decreaseOre(this.ore,this.maxResources/10),this.oreToFind=this.maxResources):(this.landService.decreaseOre(this.ore,n),this.oreToFind=10*n)}this.progress<100?(this.progress+=this.getPower()*this.workers/(this.oreToFind/this.getBuildingLevel()),this.progress>100&&(this.progress=100)):100===this.progress&&(this.progress=0,this.resources=this.oreToFind,this.oreToFind=0,this.status=eE.MINING)}else this.storage>0?this.resourcesService.increaseResource(this.ore,this.storage,this.getName())?(this.storage=0,this.status=this.resources<=0?eE.LOOKING_FOR_NEW_ORE_VEIN:eE.MINING):this.status=eE.WAITING_FOR_WAREHOUSE_SPACE:this.progress<100?(this.status=eE.MINING,this.progress+=this.getPower()*this.workers,this.progress>100&&(this.progress=100)):100===this.progress&&(this.progress=0,this.resources-=1,this.storage=1,this.status=eE.TRANSPORTING)}},n.prototype.build=function(){return this},n.prototype.isStoppable=function(){return this.status!==eE.WAITING_FOR_SELECTION},n.prototype.setBuildingLevel=function(n){e.prototype.setBuildingLevel.call(this,n),this.maxResources=20*this.getBuildingLevel()},n.prototype.getBuildingData=function(){return[this.ore,this.resources,this.status]},n.prototype.setBuildingData=function(e){this.ore=e[0],this.resources=e[1],this.status=e[2],this.resources>0&&(this.status=eE.MINING)},n.maxWorkers=4,n}(kS),tE=function(e){return e.GATHERING_FOOD="gathering food",e.GATHERING_RESOURCES="gathering resources",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.TRANSPORTING="transporting",e}({}),lE=function(e){return e[e.FOOD=0]="FOOD",e[e.RESOURCES=1]="RESOURCES",e}({}),iE=function(e){function n(t,l,i,r,o,u,s,a){void 0===t&&(t=null),void 0===l&&(l=-1),void 0===i&&(i=0),void 0===r&&(r=tE.GATHERING_FOOD),void 0===o&&(o=0),void 0===u&&(u=lE.FOOD),void 0===s&&(s=[]),void 0===a&&(a=1);var c=e.call(this,l,wu.GATHERERS_CAMP,t,ys.FOREST.GATHERERS_CAMP,o,n.maxWorkers,!0,!0,a)||this;return c.progress=i,c.status=r,c.mode=u,c.storage=s,c.lastFind=[],c.servicesService&&(c.weatherService=t.getService(zu.WEATHER)),c}return i(n,e),n.prototype.rollForFind=function(){var e=[],n=1+this.storage.length/20;return this.mode===lE.FOOD?(this.storage.find(function(e){return e[0]===Iu.BERRY})||e.push({item:Iu.BERRY,chance:this.settings.BERRY_CHANCE*n}),this.storage.find(function(e){return e[0]===Iu.MUSHROOM})||e.push({item:Iu.MUSHROOM,chance:this.settings.MUSHROOM_CHANCE*n}),this.storage.find(function(e){return e[0]===Iu.WHEAT})||e.push({item:Iu.WHEAT,chance:this.settings.WHEAT_CHANCE*n}),this.storage.find(function(e){return e[0]===Iu.HERBS})||e.push({item:Iu.HERBS,chance:this.settings.HERBS_CHANCE*n})):this.mode===lE.RESOURCES&&(this.storage.find(function(e){return e[0]===Iu.BRUSHWOOD})||e.push({item:Iu.BRUSHWOOD,chance:this.settings.BRUSHWOOD_CHANCE*n}),this.storage.find(function(e){return e[0]===Iu.STONE})||e.push({item:Iu.STONE,chance:this.settings.STONE_CHANCE*n}),this.storage.find(function(e){return e[0]===Iu.LOG})||e.push({item:Iu.LOG,chance:this.settings.LOG_CHANCE*n}),this.storage.find(function(e){return e[0]===Iu.COPPER})||e.push({item:Iu.COPPER,chance:this.settings.COPPER_CHANCE*n}),this.storage.find(function(e){return e[0]===Iu.HERBS})||e.push({item:Iu.HERBS,chance:this.settings.HERBS_CHANCE*n})),Qu.randomElement(e)},n.prototype.build=function(){return this.servicesService.getService(zu.MANAGEMENT).getDefaultGathererFood()||(this.mode=lE.RESOURCES,this.status=tE.GATHERING_RESOURCES),e.prototype.build.call(this)},n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,workers:this.workers,storage:this.storage,mode:this.mode}},n.prototype.callback=function(e){e===lE.FOOD?(this.mode=lE.FOOD,this.progress=0,this.storage=[],this.lastFind=[],this.status=tE.GATHERING_FOOD):e===lE.RESOURCES?(this.mode=lE.RESOURCES,this.progress=0,this.storage=[],this.lastFind=[],this.status=tE.GATHERING_RESOURCES):"hire"===e?this.hireWorker():"fire"===e&&this.fireWorker()},n.prototype.getLine=function(e){switch(e){case Cv.FIRST:return this.mode===lE.FOOD?Av.buttonValue("gather resources",lE.RESOURCES):Av.buttonValue("gather food",lE.FOOD);case Cv.SECOND:return Av.textValue(this.status);case Cv.THIRD:return Av.progressValue(this.progress);case Cv.FOURTH:return Av.twoButtonValue("hire worker","hire",this.workers+"/"+this.maxWorkers,"fire worker","fire")}},n.prototype.tick=function(e){var n=this;if(this.isWorking())if(this.status===tE.TRANSPORTING||this.status===tE.WAITING_FOR_WAREHOUSE_SPACE)this.storage.forEach(function(e){n.resourcesService.increaseResource(e[0],1,n.getName())&&(e[1]-=1)}),this.storage=this.storage.filter(function(e){return e[1]>0}),this.storage.length>=this.canFindN()?this.status=tE.WAITING_FOR_WAREHOUSE_SPACE:this.setStatus();else if(this.storage.length<this.canFindN()){if(this.progress<100)this.setStatus(),this.progress+=this.getPower(),this.progress>100&&(this.progress=100);else if(100===this.progress){this.progress=0,this.lastFind=[];for(var t=function(e){var n=l.rollForFind();null!==n&&l.resourcesService.increaseResource(n,1,l.getName())?l.lastFind.push(n):null===n||l.storage.find(function(e){return e[0]===n})?n=null:(l.storage.push([n,1]),l.status=tE.TRANSPORTING),l.storage.length>0&&(l.status=tE.TRANSPORTING),l.progress=0},l=this,i=0;i<this.workers;i++)t()}}else this.progress=0,this.status=tE.WAITING_FOR_WAREHOUSE_SPACE},n.prototype.canFindN=function(){return this.mode===lE.FOOD?4:5},n.prototype.getDetails=function(){var n="last find:<br>";this.lastFind&&this.lastFind.length>0?this.lastFind.forEach(function(e){n+=Vu.prepareResourceName(e)+"<br>"}):n+="nothing<br>";var t="";return n.length>"last find:<br>".length&&(t=n),t+="local storage:<br>",this.storage.forEach(function(e){t+=Vu.prepareResourceName(e[0])+": "+e[1]+"<br>"}),e.prototype.getDetails.call(this)+t},n.prototype.setStatus=function(){this.status=this.mode===lE.FOOD?tE.GATHERING_FOOD:tE.GATHERING_RESOURCES},n.maxWorkers=5,n}(kS),rE=function(e){function n(n,t,l,i,r){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=ku.NONE),void 0===i&&(i=50),void 0===r&&(r=1);var o=e.call(this,t,wu.BARN,n,ys.FIELD.BARN,!1,!0,!1,r)||this;return o.crop=l,o.storage=i,o.servicesService&&(o.modalService=n.getService(zu.MODAL)),o}return i(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,crop:this.crop,storage:this.storage}},n.prototype.callback=function(e){var n=this;if(this.crop===ku.NONE)this.crop=ku[String(e.target.value)],this.resourcesService.increaseResourceLimit(Iu[ku[this.crop]],6*this.storage);else{this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to switch barn storage type?<br>All excess resources will be lost");var t=this.modalService.registerForConfirmation().subscribe(function(l){l?(n.resourcesService.decreaseResourceLimit(Iu[ku[n.crop]],6*n.storage),n.crop=ku[String(e.target.value)],n.resourcesService.increaseResourceLimit(Iu[ku[n.crop]],6*n.storage)):e.target.selectedIndex=n.crop-1,t.unsubscribe()})}},n.prototype.getComplexity=function(){return e.prototype.getComplexity.call(this)*(this.storage/this.settings.SIZE)},n.prototype.getSize=function(){return this.storage},n.prototype.getLine=function(e){switch(e){case Cv.FIRST:return this.firstLine();case Cv.SECOND:return Av.textValue("storage: "+6*this.storage);case Cv.THIRD:case Cv.FOURTH:return Av.emptyValue()}},n.prototype.firstLine=function(){var e=[];return e.push(ku[ku.NONE]),e.push(ku[ku.WHEAT]),e.push(ku[ku.HAY]),e.push(ku[ku.BERRY]),e.push(ku[ku.MUSHROOM]),this.resourcesService.getResource(Iu.BARLEY).isVisible()&&e.push(ku[ku.BARLEY]),this.resourcesService.getResource(Iu.HOP).isVisible()&&e.push(ku[ku.HOP]),this.resourcesService.getResource(Iu.COTTON).isVisible()&&e.push(ku[ku.COTTON]),this.resourcesService.getResource(Iu.HERBS).isVisible()&&e.push(ku[ku.HERBS]),Av.dropdownValue(e,ku[this.crop])},n.prototype.prepareDemolish=function(){return this.crop!==ku.NONE&&this.resourcesService.decreaseResourceLimit(Iu[ku[this.crop]],6*this.storage),!0},n.prototype.startProduction=function(){return!1},n.prototype.stopProduction=function(){},n.prototype.fireWorker=function(){return!1},n.prototype.hireWorker=function(){return!1},n.prototype.getWorkers=function(){return 0},n.prototype.getHappinessEffect=function(){return 0},n.prototype.isCombinable=function(){return!0},n.prototype.isSplittable=function(){return!0},n.prototype.combine=function(e,n){var t=this;if(this.getBuildingType()===e.getBuildingType()){this.modalService.open(ju.CONFIRM),this.modalService.setModalText(" Are you sure you want to combine "+this.getName()+" of size "+this.getSize()+" with "+e.getName()+" of size "+e.getSize()+"?<br>Resulting "+this.getName()+" of size "+(this.getSize()+e.getSize())+" will store <b>"+Vu.prepareCropName(this.crop)+"</b><br>All resources exceeding decreased limit of <b>"+Vu.prepareCropName(e.crop)+"</b> will be lost");var l=this.modalService.registerForConfirmation().subscribe(function(i){l.unsubscribe(),i?(t.storage+=e.getSize(),t.crop!==ku.NONE&&t.resourcesService.increaseResourceLimit(Iu[ku[t.crop]],6*e.getSize()),n.finaliseCombine(!0)):n.finaliseCombine(!1)})}},n.prototype.split=function(e){var t=this;this.modalService.open(ju.INPUT),this.modalService.setModalText("Set split size (1-"+(this.getSize()-1)+")"),this.modalService.setModalValue("");var l=this.modalService.registerForValueResponse().subscribe(function(i){l.unsubscribe(),null!==i&&(isNaN(i)||0===i||(i>=1&&i<t.getSize()?(t.storage-=Number(i),e.finaliseSplit(new n(t.servicesService,t.servicesService.getService(zu.ID).getNextId(),t.crop,Number(i)).build())):t.modalService.info("Invalid size value!")))})},n}(_v),oE=function(e){return e.COOKING="cooking {craft}",e.WAITING_FOR_WAREHOUSE="waiting for {craft} space",e.NO_COOKING="nothing to cook",e}({}),uE=function(e){function n(n,t,l,i,r,o,u,s,a){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===i&&(i=oE.NO_COOKING),void 0===r&&(r=!1),void 0===o&&(o=-1),void 0===u&&(u=null),void 0===s&&(s=1),void 0===a&&(a=0);var c=e.call(this,t,wu.KITCHEN,n,ys.VILLAGE.KITCHEN,r,!0,!0,s)||this;return c.progress=l,c.status=i,c.storage=a,c.recipe=null,c.icon=null,c.servicesService&&(u?c.recipe=u:o>=0&&(c.recipe=c.servicesService.getService(zu.RECIPE).getRecipeById(o)),c.craftingService=n.getService(zu.CRAFTING),c.gameService=n.getService(zu.GAME)),c}return i(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,working:this.working,recipeId:null!==this.recipe?this.recipe.id:-1,storage:this.storage}},n.prototype.build=function(){return this.startProduction(),this.craftingService.increaseCookingQueueSize(1),this},n.prototype.prepareDemolish=function(){return this.craftingService.decreaseCookingQueueSize(1),e.prototype.prepareDemolish.call(this)},n.prototype.callback=function(e){"cancel"===e&&(this.recipe=null,this.progress=0,this.status=oE.NO_COOKING)},n.prototype.getLine=function(e){switch(e){case Cv.FIRST:return Av.emptyValue();case Cv.SECOND:return this.recipe?(this.icon||(this.prepareIcon(),this.status===oE.COOKING?this.icon[0].prefix="cooking ":this.status===oE.WAITING_FOR_WAREHOUSE&&(this.icon[0].prefix="waiting for ",this.icon[0].suffix=" space")),Av.iconValue(this.icon)):Av.textValue(this.status.replace("{craft}","warehouse"));case Cv.THIRD:return this.recipe?Av.buttonValue("cancel cooking","cancel"):Av.emptyValue();case Cv.FOURTH:return Av.progressValue(this.progress)}},n.prototype.tick=function(e){if(this.working)if(null===this.recipe&&(this.recipe=this.craftingService.getCookingOrder(),this.icon=null,this.progress=0),null===this.recipe)this.status=oE.NO_COOKING;else if(this.status===oE.WAITING_FOR_WAREHOUSE){var n=this.resourcesService.getLimit(this.recipe.resource);this.storage>n?(this.storage-=n,this.resourcesService.increaseResource(this.recipe.resource,n,this.getName())):(this.resourcesService.increaseResource(this.recipe.resource,this.storage,this.getName()),this.status=oE.COOKING,this.progress=0,this.recipe=null)}else this.status=oE.COOKING,this.progress<100&&(this.progress+=this.getPower()/this.recipe.craftingDifficulty*ys.VILLAGE.KITCHEN.CRAFTING_POWER),this.progress>=100&&(this.progress=100,this.storage=this.recipe.amount,n=this.resourcesService.getLimit(this.recipe.resource),this.storage>n?(this.storage-=n,this.resourcesService.increaseResource(this.recipe.resource,n,this.getName()),this.status=oE.WAITING_FOR_WAREHOUSE,this.icon=null):this.resourcesService.increaseResource(this.recipe.resource,this.storage,this.getName())?(this.progress=0,this.storage=0,this.recipe=null):(this.status=oE.WAITING_FOR_WAREHOUSE,this.icon=null))},n.prototype.getRecipe=function(){return this.recipe},n.prototype.cancelCooking=function(){this.recipe=null},n.prototype.prepareIcon=function(){this.recipe&&(this.icon=[{name:Vu.prepareResourceName(this.recipe.resource),path:"resources",prefix:"",suffix:""}])},n}(_v),sE=function(e){return e.DIGGING_CLAY="digging clay",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.NO_MORE_RESOURCES="no more resources",e.TRANSPORTING="transporting",e}({}),aE=function(e){function n(n,t,l,i,r,o,u,s){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===i&&(i=sE.DIGGING_CLAY),void 0===r&&(r=!1),void 0===o&&(o=0),void 0===u&&(u=400),void 0===s&&(s=1);var a=e.call(this,t,wu.CLAY_PIT,n,ys.FIELD.CLAY_PIT,r,!0,!0,s)||this;return a.progress=l,a.status=i,a.storage=o,a.resources=u,a}return i(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,working:this.working,storage:this.storage,resources:this.resources}},n.prototype.getLine=function(e){switch(e){case Cv.FIRST:return Av.textValue("clay: "+this.resources);case Cv.SECOND:return Av.textValue(this.status);case Cv.THIRD:return Av.progressValue(this.progress);case Cv.FOURTH:return Av.emptyValue()}},n.prototype.isStoppable=function(){return this.resources>0},n.prototype.isUsedUp=function(){return this.status===sE.NO_MORE_RESOURCES},n.prototype.hasBuff=function(){return!this.isUsedUp()&&e.prototype.hasBuff.call(this)},n.prototype.tick=function(e){this.resources<=0&&(this.status!==sE.NO_MORE_RESOURCES&&this.servicesService.getService(zu.LOG).warning("Clay pit has no more clay"),this.status=sE.NO_MORE_RESOURCES,this.stopProduction()),this.working&&(this.storage>0?this.resourcesService.increaseResource(Iu.CLAY,this.storage,this.getName())?(this.storage=0,this.status=sE.DIGGING_CLAY):this.status=sE.WAITING_FOR_WAREHOUSE_SPACE:this.progress<100?(this.status=sE.DIGGING_CLAY,this.progress+=this.getPower(),this.progress>100&&(this.progress=100)):100===this.progress&&(this.progress=0,this.resources-=1,this.storage=1,this.status=sE.TRANSPORTING))},n}(_v),cE=function(e){function n(n,t,l,i,r,o,u,s,a){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===i&&(i=0),void 0===r&&(r=100),void 0===o&&(o=100),void 0===u&&(u=0),void 0===s&&(s=1),void 0===a&&(a=!0),e.call(this,n,t,wu.TUDOR_HOUSE,ys.VILLAGE.TUDOR_HOUSE,l,i,r,o,u,s,a)||this}return i(n,e),n}(wv),pE=function(e){return e.CHOPPING_TREES="chopping {amount} tree{plural}",e.WAITING_FOR_TREES="waiting for trees",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.TRANSPORTING_LOG="transporting log",e}({}),hE=function(e){function n(t,l,i,r,o,u,s){void 0===t&&(t=null),void 0===l&&(l=-1),void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=pE.WAITING_FOR_TREES),void 0===u&&(u=0),void 0===s&&(s=1);var a=e.call(this,l,wu.LOGGERS_CAMP,t,ys.FOREST.LOGGERS_CAMP,u,n.maxWorkers,!0,!0,s)||this;return a.progress=i,a.reservedTrees=r,a.status=o,a.servicesService&&(a.landService=t.getService(zu.LAND)),a}return i(n,e),n.prototype.getLine=function(e){switch(e){case Cv.FIRST:return Av.emptyValue();case Cv.SECOND:var n=this.status.replace("{amount}",""+this.reservedTrees);return n=n.replace("{plural}",1===this.reservedTrees?"":"s"),Av.textValue(n);case Cv.THIRD:return Av.progressValue(this.progress);case Cv.FOURTH:return Av.twoButtonValue("hire worker","hire",this.workers+"/"+this.maxWorkers,"fire worker","fire")}},n.prototype.callback=function(e){"hire"===e?this.hireWorker():"fire"===e&&this.fireWorker()},n.prototype.tick=function(){if(this.isWorking())if(this.status===pE.WAITING_FOR_TREES){var e=Math.min(this.workers,this.landService.getForest(),this.landService.getForest());console.log("trees to reserve",e),this.landService.reduceForest(e)&&(this.reservedTrees=e,this.status=pE.CHOPPING_TREES)}else if(this.status===pE.CHOPPING_TREES)this.progress<100?(this.progress+=this.getPower()*(this.getWorkers()/this.reservedTrees),this.progress>=100&&(this.progress=100)):(this.progress=0,this.status=pE.TRANSPORTING_LOG);else if(this.status===pE.TRANSPORTING_LOG||this.status===pE.WAITING_FOR_WAREHOUSE_SPACE)if(this.resourcesService.increaseResource(Iu.LOG,this.reservedTrees,this.getName()))this.landService.increaseLand(this.reservedTrees,!0),e=Math.min(this.workers,this.landService.getForest(),this.landService.getForest()),this.landService.reduceForest(e)?(this.reservedTrees=e,this.status=pE.CHOPPING_TREES):this.status=pE.WAITING_FOR_TREES;else{var n=this.resourcesService.getLimit(Iu.LOG),t=Math.min(n,this.reservedTrees);this.reservedTrees-=t,this.landService.increaseLand(t,!0),this.resourcesService.increaseResource(Iu.LOG,t,this.getName()),this.status=pE.WAITING_FOR_WAREHOUSE_SPACE}},n.prototype.prepareDemolish=function(){return this.landService.increaseForest(this.reservedTrees),this.stopProduction(),!0},n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,workers:this.workers,reservedTrees:this.reservedTrees}},n.prototype.getDetails=function(){return this.status===pE.WAITING_FOR_WAREHOUSE_SPACE?e.prototype.getDetails.call(this)+"local storage:<br>&nbsp;&nbsp;logs: "+this.reservedTrees:e.prototype.getDetails.call(this)},n.maxWorkers=5,n}(kS),dE=function(e){return e.MINING="mining {res}",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.NO_MORE_RESOURCES="no more {res}",e.TRANSPORTING="transporting {res}",e}({}),gE=function(e){function n(t,l,i,r,o,u,s,a,c){void 0===t&&(t=null),void 0===l&&(l=-1),void 0===i&&(i=20),void 0===r&&(r=Iu.NOTHING),void 0===o&&(o=0),void 0===u&&(u=dE.MINING),void 0===s&&(s=0),void 0===a&&(a=0),void 0===c&&(c=1);var p=e.call(this,l,wu.METEORITE,t,ys.MOUNTAINS.METEORITE,a,n.maxWorkers,!0,!0,c)||this;return p.resources=i,p.ore=r,p.progress=o,p.status=u,p.storage=s,p}return i(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,storage:this.storage,workers:this.workers,resources:this.resources,ore:this.ore}},n.prototype.isUsedUp=function(){return this.status===dE.NO_MORE_RESOURCES},n.prototype.callback=function(e){"hire"===e?this.hireWorker():"fire"===e&&this.fireWorker()},n.prototype.getLine=function(e){switch(e){case Cv.FIRST:return Av.textValue(Vu.prepareResourceName(this.ore).toLowerCase()+": "+this.resources);case Cv.SECOND:return Av.textValue(this.status.replace("{res}",Vu.prepareResourceName(this.ore).toLowerCase()));case Cv.THIRD:return this.resources>0?Av.progressValue(this.progress):Av.emptyValue();case Cv.FOURTH:return this.resources>0?Av.twoButtonValue("hire worker","hire",this.workers+"/"+this.maxWorkers,"fire worker","fire"):Av.emptyValue()}},n.prototype.tick=function(e){this.resources<=0&&0===this.storage&&(this.status!==dE.NO_MORE_RESOURCES&&this.servicesService.getService(zu.LOG).warning("Meteorite fully mined "+Vu.prepareResourceName(this.ore)),this.status=dE.NO_MORE_RESOURCES,this.stopProduction()),this.isWorking()&&(this.storage>0?this.resourcesService.increaseResource(this.ore,this.storage,this.getName())?(this.storage=0,this.status=dE.MINING):this.status=dE.WAITING_FOR_WAREHOUSE_SPACE:this.resources>0&&this.progress<100?(this.status=dE.MINING,this.progress+=this.getPower()*this.workers,this.progress>100&&(this.progress=100)):100===this.progress&&(this.progress=0,this.resources-=1,this.storage=1,this.status=dE.TRANSPORTING))},n.prototype.build=function(){return this},n.prototype.isStoppable=function(){return this.resources>0},n.maxWorkers=4,n}(kS),fE=function(e){function n(n,t,l){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=1),e.call(this,t,wu.PIER,n,ys.SEA.PIER,!1,!0,!1,l)||this}return i(n,e),n.prototype.getLine=function(e){switch(e){case Cv.FIRST:return Av.textValue("size: "+this.getSize());case Cv.SECOND:return Av.textValue("space for ships: "+this.settings.HARBOUR_SIZE);case Cv.THIRD:case Cv.FOURTH:return Av.emptyValue()}},n.prototype.toJSON=function(){return{buildingType:this.buildingType,id:this.id,level:this.level}},n.prototype.build=function(){return this.servicesService.getService(zu.NAVY).increaseHarbourSize(this.settings.HARBOUR_SIZE),this},n.prototype.prepareDemolish=function(){return this.servicesService.getService(zu.NAVY).decreaseHarbourSize(this.settings.HARBOUR_SIZE),e.prototype.prepareDemolish.call(this)},n}(_v),mE=function(e){function n(n,t,l){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=1),e.call(this,t,wu.HARBOUR,n,ys.SEA.HARBOUR,!1,!0,!1,l)||this}return i(n,e),n.prototype.getLine=function(e){switch(e){case Cv.FIRST:return Av.textValue("size: "+this.getSize());case Cv.SECOND:return Av.textValue("space for ships: "+this.settings.HARBOUR_SIZE);case Cv.THIRD:case Cv.FOURTH:return Av.emptyValue()}},n.prototype.toJSON=function(){return{buildingType:this.buildingType,id:this.id,level:this.level}},n.prototype.build=function(){return this.servicesService.getService(zu.NAVY).increaseHarbourSize(this.settings.HARBOUR_SIZE),this},n.prototype.prepareDemolish=function(){return this.servicesService.getService(zu.NAVY).decreaseHarbourSize(this.settings.HARBOUR_SIZE),e.prototype.prepareDemolish.call(this)},n}(_v),vE=function(e){return e.LIGHT_BURNING="light burning",e.WAITING_FOR_FUEL="waiting for fuel",e}({}),SE=function(e){function n(n,t,l,i,r,o){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=vE.LIGHT_BURNING),void 0===i&&(i=0),void 0===r&&(r=!1),void 0===o&&(o=1);var u=e.call(this,t,wu.LIGHTHOUSE,n,ys.SEA.LIGHTHOUSE,r,!0,!0,o)||this;return u.status=l,u.fuel=i,n&&(u.worldService=n.getService(zu.WORLD)),u}return i(n,e),n.prototype.getLine=function(e){switch(e){case Cv.FIRST:return Av.textValue("size: "+this.getSize());case Cv.SECOND:return Av.textValue(this.status);case Cv.THIRD:return Av.textValue("fuel: "+Vu.round(this.fuel,2));case Cv.FOURTH:return Av.emptyValue()}},n.prototype.tick=function(e){this.working&&(this.fuel<5?this.resourcesService.decreaseResource(Iu.FUEL,1,this.getName())&&(this.fuel+=1):this.fuel<=0&&(this.status=vE.WAITING_FOR_FUEL),this.worldService.getPlayerSeaMissions().length>0&&this.fuel>=.005&&(this.fuel-=.005))},n.prototype.isBurning=function(){return this.status===vE.LIGHT_BURNING&&this.isWorking()},n.prototype.toJSON=function(){return{buildingType:this.buildingType,id:this.id,status:this.status,working:this.working,fuel:this.fuel,level:this.level}},n}(_v),EE=function(e){return e.BUILDING_SHIP="building {ship}",e.WAITING_FOR_ORDER="waiting for order",e}({}),yE=function(e){function n(n,t,l,i,r,o,u){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===i&&(i=EE.WAITING_FOR_ORDER),void 0===r&&(r=!1),void 0===o&&(o=null),void 0===u&&(u=1);var s=e.call(this,t,wu.BOAT_BUILDER,n,ys.SEA.BOAT_BUILDER,r,!0,!0,u)||this;return s.progress=l,s.status=i,s.ship=o,n&&(s.resourcesService=n.getService(zu.RESOURCES),s.modalService=n.getService(zu.MODAL),s.navyService=n.getService(zu.NAVY)),s}return i(n,e),n.prototype.toJSON=function(){return{buildingType:this.buildingType,id:this.id,progress:this.progress,status:this.status,working:this.working,ship:this.ship,level:this.level}},n.prototype.build=function(){return this.startProduction(),this.gameService.isEnabled(_u.NAVY)||(this.gameService.enable(_u.NAVY),this.logService.log("Navy tab unlocked")),this},n.prototype.callback=function(e){var n=this;if("select"===e){this.modalService.open(ju.SHIPYARD),this.modalService.setShipyardLimitBoat(!0);var t=this.modalService.registerForValueResponse().subscribe(function(e){t.unsubscribe(),null!==e&&(n.ship=e,n.status=EE.BUILDING_SHIP)})}else if("cancel"===e){this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to cancel building "+Vu.prepareTroopName(this.ship)+"?");var l=this.modalService.registerForConfirmation().subscribe(function(e){l.unsubscribe(),e&&(n.ship=null,n.status=EE.WAITING_FOR_ORDER)})}},n.prototype.getLine=function(e){switch(e){case Cv.FIRST:return Av.textValue(this.ship?this.status.replace("{ship}",Vu.prepareTroopName(this.ship)):this.status);case Cv.SECOND:return this.ship?Av.progressValue(this.progress):Av.emptyValue();case Cv.THIRD:return null===this.ship?Av.buttonValue("select ship","select"):Av.buttonValue("cancel "+Vu.prepareTroopName(this.ship),"cancel");case Cv.FOURTH:return Av.emptyValue()}},n.prototype.tick=function(e){this.working&&this.status===EE.BUILDING_SHIP&&(this.progress<100?(this.progress+=this.getPower()/bs.getTroop(this.ship).SIZE,this.progress>100&&(this.progress=100)):(this.progress=0,this.navyService.addShip(this.ship),this.ship=null,this.status=EE.WAITING_FOR_ORDER))},n}(_v),RE=function(e){return e.BUILDING_SHIP="building {ship}",e.WAITING_FOR_ORDER="waiting for order",e}({}),bE=function(e){function n(t,l,i,r,o,u,s){void 0===t&&(t=null),void 0===l&&(l=-1),void 0===i&&(i=0),void 0===r&&(r=RE.WAITING_FOR_ORDER),void 0===o&&(o=0),void 0===u&&(u=null),void 0===s&&(s=1);var a=e.call(this,l,wu.SHIPYARD,t,ys.SEA.SHIPYARD,o,n.maxWorkers,!0,!0,s)||this;return a.progress=i,a.status=r,a.ship=u,t&&(a.resourcesService=t.getService(zu.RESOURCES),a.modalService=t.getService(zu.MODAL),a.navyService=t.getService(zu.NAVY)),a}return i(n,e),n.prototype.toJSON=function(){return{buildingType:this.buildingType,id:this.id,progress:this.progress,status:this.status,working:this.working,ship:this.ship,level:this.level}},n.prototype.build=function(){return this.startProduction(),this.gameService.isEnabled(_u.NAVY)||(this.gameService.enable(_u.NAVY),this.logService.log("Navy tab unlocked")),this},n.prototype.callback=function(e){var n=this;if("select"===e){this.modalService.open(ju.SHIPYARD),this.modalService.setShipyardLimitBoat(!1);var t=this.modalService.registerForValueResponse().subscribe(function(e){t.unsubscribe(),null!==e&&(n.ship=e,n.status=RE.BUILDING_SHIP)})}else if("cancel"===e){this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to cancel building "+Vu.prepareTroopName(this.ship)+"?");var l=this.modalService.registerForConfirmation().subscribe(function(e){l.unsubscribe(),e&&(n.ship=null,n.status=RE.WAITING_FOR_ORDER)})}else"hire"===e?this.hireWorker():"fire"===e&&this.fireWorker()},n.prototype.getLine=function(e){switch(e){case Cv.FIRST:return Av.textValue(this.ship?this.status.replace("{ship}",Vu.prepareTroopName(this.ship)):this.status);case Cv.SECOND:return this.ship?Av.progressValue(this.progress):Av.emptyValue();case Cv.THIRD:return null===this.ship?Av.buttonValue("select ship","select"):Av.buttonValue("cancel "+Vu.prepareTroopName(this.ship),"cancel");case Cv.FOURTH:return Av.twoButtonValue("hire worker","hire",this.workers+"/"+this.maxWorkers,"fire worker","fire")}},n.prototype.tick=function(e){this.isWorking()&&this.status===RE.BUILDING_SHIP&&(this.progress<100?(this.progress+=this.getPower()/bs.getTroop(this.ship).SIZE*this.workers,this.progress>100&&(this.progress=100)):(this.progress=0,this.navyService.addShip(this.ship),this.ship=null,this.status=RE.WAITING_FOR_ORDER))},n.maxWorkers=10,n}(kS),OE=function(e){return e.DRAWING_MAP="drawing map",e.WAITING_FOR_CARTOGRAPHY_DATA="waiting for cartography data",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e}({}),TE=function(e){function n(n,t,l,i,r,o){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===l&&(l=0),void 0===i&&(i=OE.WAITING_FOR_CARTOGRAPHY_DATA),void 0===r&&(r=!1),void 0===o&&(o=1);var u=e.call(this,t,wu.CARTOGRAPHER,n,ys.SEA.CARTOGRAPHER,r,!0,!0,o)||this;return u.progress=l,u.status=i,u.servicesService&&(u.resourcesService=n.getService(zu.RESOURCES),u.navyService=n.getService(zu.NAVY)),u}return i(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,working:this.working,status:this.status}},n.prototype.getLine=function(e){switch(e){case Cv.FIRST:return Av.textValue(this.status);case Cv.SECOND:return Av.progressValue(this.progress);case Cv.THIRD:return Av.progressValue(this.navyService.getMapProgress(),"map progress");case Cv.FOURTH:return Av.emptyValue()}},n.prototype.tick=function(e){this.working&&(this.status===OE.WAITING_FOR_CARTOGRAPHY_DATA?this.navyService.decreaseCartographyData(1)&&(this.status=OE.DRAWING_MAP):this.status===OE.DRAWING_MAP?this.progress<100?(this.progress+=this.getPower(),this.progress>100&&(this.progress=100)):this.navyService.getMapProgress()<100?(this.navyService.addMapProgress(),this.progress=0,this.status=OE.WAITING_FOR_CARTOGRAPHY_DATA):this.status=OE.WAITING_FOR_WAREHOUSE_SPACE:this.status===OE.WAITING_FOR_WAREHOUSE_SPACE&&(this.navyService.getMapProgress()>=100?this.navyService.createMap()&&(this.status=OE.WAITING_FOR_CARTOGRAPHY_DATA):this.status=OE.WAITING_FOR_CARTOGRAPHY_DATA))},n}(_v),CE=function(){function e(e,n){this.servicesService=e,this.idService=n,e.addService(zu.BUILDING_FACTORY,this)}return e.prototype.loadBuilding=function(e){return e.buildingType===wu.HUT?new Pv(this.servicesService,e.id,e.occupants,e.progress,e.food,e.fuel,e.clothes,e.level,void 0===e.enabled||e.enabled):e.buildingType===wu.HOUSE?new xv(this.servicesService,e.id,e.occupants,e.progress,e.food,e.fuel,e.clothes,e.level,void 0===e.enabled||e.enabled):e.buildingType===wu.LONGHOUSE?new XS(this.servicesService,e.id,e.occupants,e.progress,e.food,e.fuel,e.clothes,e.level,void 0===e.enabled||e.enabled):e.buildingType===wu.TUDOR_HOUSE?new cE(this.servicesService,e.id,e.occupants,e.progress,e.food,e.fuel,e.clothes,e.level,void 0===e.enabled||e.enabled):e.buildingType===wu.BAKERY?new aS(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===wu.TAILOR?new SS(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===wu.WORKSHOP?new qv(this.servicesService,e.id,e.progress,e.status,e.mode,e.working,void 0!==e.recipeId?e.recipeId:-1,e.recipe,e.level,void 0!==e.storage?e.storage:0):e.buildingType===wu.KITCHEN?new uE(this.servicesService,e.id,e.progress,e.status,e.working,e.recipeId,e.recipe,e.level,e.storage):e.buildingType===wu.MANUFACTURE?new qS(this.servicesService,e.id,e.progress,e.status,e.working,e.recipe,e.level,e.storage):e.buildingType===wu.WAREHOUSE?new Xv(this.servicesService,e.id,e.resource,void 0!==e.storage?e.storage:50,e.level):e.buildingType===wu.MARKETPLACE?new FS(this.servicesService,e.id,e.progress,e.level):e.buildingType===wu.TAVERN?new OS(this.servicesService,e.id,e.progress,e.beer,e.wine,e.working,e.level):e.buildingType===wu.SHRINE?new nS(this.servicesService,e.id,e.progress,e.level):e.buildingType===wu.CHURCH?new HS(this.servicesService,e.id,e.working,e.progress,e.level):e.buildingType===wu.BARRACKS?new hS(this.servicesService,e.id,e.barracksSize,e.level):e.buildingType===wu.EMBASSY?new ZS(this.servicesService,e.id,e.progress,e.working,e.country,e.paper,e.level):e.buildingType===wu.TRAINING_SQUARE?new gS(this.servicesService,e.id,e.progress,e.working,e.status,e.level,void 0!==e.workSettings?e.workSettings:null):e.buildingType===wu.STOCKADE?new mS(this.servicesService,e.id,e.health,e.durability,e.progress,e.working,e.level):e.buildingType===wu.WOODEN_TOWER?new yS(this.servicesService,e.id,e.health,e.durability,e.progress,e.working,e.level):e.buildingType===wu.STONE_TOWER?new RS(this.servicesService,e.id,e.health,e.durability,e.progress,e.working,e.level):e.buildingType===wu.STASH?new jS(this.servicesService,e.id,e.level):e.buildingType===wu.LOGGERS_HUT?new Mv(this.servicesService,e.id,e.progress,void 0!==e.reservedTrees?e.reservedTrees:0,e.status,e.working,e.level):e.buildingType===wu.LOGGERS_CAMP?new hE(this.servicesService,e.id,e.progress,e.reservedTrees,e.status,e.workers,e.level):e.buildingType===wu.GATHERER?new Yv(this.servicesService,e.id,e.progress,e.status,e.working,e.mode,e.storage,e.level):e.buildingType===wu.GATHERERS_CAMP?new iE(this.servicesService,e.id,e.progress,e.status,e.workers,e.mode,e.storage,e.level):e.buildingType===wu.HUNTER_LODGE?new eS(this.servicesService,e.id,e.progress,e.status,e.mode,e.working,e.storage,e.storage2,e.animal,e.level):e.buildingType===wu.TANNERY?new fS(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===wu.PAPER_MILL?new JS(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===wu.FORESTER?new Fv(this.servicesService,e.id,e.progress,e.localStorage,e.status,e.effectiveness,e.working,e.level):e.buildingType===wu.SAWMILL?new Bv(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===wu.FARM?new lS(this.servicesService,e.id,e.workers,e.maxWorkers,e.level,e.status,void 0!==e.workSettings?e.workSettings:null):e.buildingType===wu.WINDMILL?new sS(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===wu.BUTCHER?new PS(this.servicesService,e.id,e.status,e.progress,e.working,e.outputStorage,null!==e.outputFurStorage?e.outputFurStorage:0,e.animals,void 0===e.discardExcessFur||e.discardExcessFur,e.level):e.buildingType===wu.COTTON_MILL?new vS(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===wu.BREWERY?new ES(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===wu.CLAY_PIT?new aE(this.servicesService,e.id,e.progress,e.status,e.working,e.storage,e.resources,e.level):e.buildingType===wu.WINERY?new bS(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===wu.BARN?new rE(this.servicesService,e.id,e.crop,e.storage,e.level):e.buildingType===wu.FIELD?new rS(this.servicesService,e.id,e.size,e.crop,e.status,e.progress,e.working,e.growth,e.level):e.buildingType===wu.ORCHARD?new uS(this.servicesService,e.id,e.size,e.crop,e.status,e.progress,e.working,e.growth,e.level):e.buildingType===wu.PASTURE?new _S(this.servicesService,e.id,e.size,e.animal,e.progress,e.produceProgress,e.working,e.animals,e.food,e.chores,e.autoButcher,e.level):e.buildingType===wu.QUARRY?new jv(this.servicesService,e.id,e.progress,e.status,e.working,e.storage,e.resources,e.level):e.buildingType===wu.GEOLOGIST?new TS(this.servicesService,e.id,e.progress,e.working,e.level):e.buildingType===wu.STONEMASON?new CS(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===wu.MINT?new xS(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===wu.SMITHY?new US(this.servicesService,e.id,e.level):e.buildingType===wu.PIT_MINE?new AS(this.servicesService,e.id,e.progress,e.status,e.working,e.storage,e.resources,e.ore,e.level):e.buildingType===wu.METEORITE?new gE(this.servicesService,e.id,e.resources,e.ore,e.progress,e.status,e.storage,e.workers,e.level):e.buildingType===wu.DEEP_MINE?new nE(this.servicesService,e.id,e.progress,e.status,e.storage,e.workers,e.resources,void 0!==e.oreToFind?e.oreToFind:0,e.ore,e.level):e.buildingType===wu.STONEHENGE?new LS(this.servicesService,e.id,e.progress,e.maxProgress,e.stage,e.state,e.year,e.workers):e.buildingType===wu.PYRAMID?new GS(this.servicesService,e.id,e.progress,e.maxProgress,e.stage,e.state,e.year,e.workers):e.buildingType===wu.HANGING_GARDEN?new BS(this.servicesService,e.id,e.progress,e.maxProgress,e.stage,e.state,e.year,e.workers):e.buildingType===wu.COLOSSUS?new VS(this.servicesService,e.id,e.progress,e.maxProgress,e.stage,e.state,e.year,e.workers):e.buildingType===wu.UNDERGROUND_CITY?new zS(this.servicesService,e.id,e.progress,e.maxProgress,e.stage,e.state,e.year,e.workers):e.buildingType===wu.GREAT_LIGHTHOUSE?new YS(this.servicesService,e.id,e.progress,e.maxProgress,e.stage,e.state,e.year,e.workers):e.buildingType===wu.BOAT_BUILDER?new yE(this.servicesService,e.id,e.progress,e.status,e.working,e.ship,e.level):e.buildingType===wu.SHIPYARD?new bE(this.servicesService,e.id,e.progress,e.status,e.workers,e.ship,e.level):e.buildingType===wu.CARTOGRAPHER?new TE(this.servicesService,e.id,e.progress,e.status,e.working,e.level):e.buildingType===wu.SACRED_GROVE?new KS(this.servicesService,e.id,e.progress,e.maxProgress,e.stage,e.state,e.year,e.workers):e.buildingType===wu.ASCENSION_TEMPLE?new WS(this.servicesService,e.id,e.progress,e.maxProgress,e.stage,e.state,e.year,e.workers):e.buildingType===wu.FISHERS_HUT?new pS(this.servicesService,e.id,e.progress,e.status,e.working,e.level):e.buildingType===wu.PIER?new fE(this.servicesService,e.id,e.level):e.buildingType===wu.HARBOUR?new mE(this.servicesService,e.id,e.level):e.buildingType===wu.LIGHTHOUSE?new SE(this.servicesService,e.id,e.status,e.fuel,e.working,e.level):e.buildingType===wu.CONSTRUCTION?new Dv(this.servicesService,e.id,e.region,e.constructing,e.buildingComplexity,e.buildingSize,e.upgradeLevel,e.progress,e.working,void 0!==e.data?e.data:null):e.buildingType===wu.DECONSTRUCTION?new Vv(this.servicesService,e.id,e.region,e.deconstructing,e.buildingComplexity,e.buildingSize,e.progress,e.working):void console.error("Couldn't load building of type ["+e.buildingType+"]")},e.prototype.createBuilding=function(e,n){return void 0===n&&(n=this.idService.getNextId()),this.createBuildingShell(e,n).build()},e.prototype.createBuildingShell=function(e,n){switch(void 0===n&&(n=this.idService.getNextId()),e){case wu.HUT:return new Pv(this.servicesService,n);case wu.HOUSE:return new xv(this.servicesService,n);case wu.LONGHOUSE:return new XS(this.servicesService,n);case wu.TUDOR_HOUSE:return new cE(this.servicesService,n);case wu.BAKERY:return new aS(this.servicesService,n);case wu.TAILOR:return new SS(this.servicesService,n);case wu.WORKSHOP:return new qv(this.servicesService,n);case wu.KITCHEN:return new uE(this.servicesService,n);case wu.MANUFACTURE:return new qS(this.servicesService,n);case wu.WAREHOUSE:return new Xv(this.servicesService,n);case wu.MARKETPLACE:return new FS(this.servicesService,n);case wu.TAVERN:return new OS(this.servicesService,n);case wu.SHRINE:return new nS(this.servicesService,n);case wu.CHURCH:return new HS(this.servicesService,n);case wu.BARRACKS:return new hS(this.servicesService,n);case wu.EMBASSY:return new ZS(this.servicesService,n);case wu.TRAINING_SQUARE:return new gS(this.servicesService,n);case wu.STOCKADE:return new mS(this.servicesService,n);case wu.WOODEN_TOWER:return new yS(this.servicesService,n);case wu.STONE_TOWER:return new RS(this.servicesService,n);case wu.STASH:return new jS(this.servicesService,n);case wu.LOGGERS_HUT:return new Mv(this.servicesService,n);case wu.LOGGERS_CAMP:return new hE(this.servicesService,n);case wu.GATHERER:return new Yv(this.servicesService,n);case wu.GATHERERS_CAMP:return new iE(this.servicesService,n);case wu.HUNTER_LODGE:return new eS(this.servicesService,n);case wu.TANNERY:return new fS(this.servicesService,n);case wu.PAPER_MILL:return new JS(this.servicesService,n);case wu.FORESTER:return new Fv(this.servicesService,n);case wu.SAWMILL:return new Bv(this.servicesService,n);case wu.FARM:return new lS(this.servicesService,n);case wu.WINDMILL:return new sS(this.servicesService,n);case wu.BUTCHER:return new PS(this.servicesService,n);case wu.COTTON_MILL:return new vS(this.servicesService,n);case wu.BREWERY:return new ES(this.servicesService,n);case wu.WINERY:return new bS(this.servicesService,n);case wu.CLAY_PIT:return new aE(this.servicesService,n);case wu.BARN:return new rE(this.servicesService,n);case wu.FIELD:return new rS(this.servicesService,n);case wu.ORCHARD:return new uS(this.servicesService,n);case wu.PASTURE:return new _S(this.servicesService,n);case wu.QUARRY:return new jv(this.servicesService,n);case wu.GEOLOGIST:return new TS(this.servicesService,n);case wu.STONEMASON:return new CS(this.servicesService,n);case wu.MINT:return new xS(this.servicesService,n);case wu.SMITHY:return new US(this.servicesService,n);case wu.PIT_MINE:return new AS(this.servicesService,n);case wu.METEORITE:return new gE(this.servicesService,n);case wu.DEEP_MINE:return new nE(this.servicesService,n);case wu.STONEHENGE:return new LS(this.servicesService,n);case wu.PYRAMID:return new GS(this.servicesService,n);case wu.HANGING_GARDEN:return new BS(this.servicesService,n);case wu.COLOSSUS:return new VS(this.servicesService,n);case wu.UNDERGROUND_CITY:return new zS(this.servicesService,n);case wu.GREAT_LIGHTHOUSE:return new YS(this.servicesService,n);case wu.SACRED_GROVE:return new KS(this.servicesService,n);case wu.ASCENSION_TEMPLE:return new WS(this.servicesService,n);case wu.FISHERS_HUT:return new pS(this.servicesService,n);case wu.PIER:return new fE(this.servicesService,n);case wu.HARBOUR:return new mE(this.servicesService,n);case wu.LIGHTHOUSE:return new SE(this.servicesService,n);case wu.BOAT_BUILDER:return new yE(this.servicesService,n);case wu.SHIPYARD:return new bE(this.servicesService,n);case wu.CARTOGRAPHER:return new TE(this.servicesService,n);case wu.CONSTRUCTION:console.error("Building factory cannot create construction sites!");break;case wu.DECONSTRUCTION:console.error("Building factory cannot create deconstruction sites!");break;default:console.error("Couldn't construct building of type ["+wu[e]+"]!")}},e.ngInjectableDef=Oe({factory:function(){return new e(Ye(Vf),Ye($S))},token:e,providedIn:"root"}),e}(),IE=function(){function e(e,n,t){var l=this;this.servicesService=e,this.calendarService=n,this.logService=t,this.buildingEffects=[],this.natureEffects=[],this.armyEffects=[],e.addService(zu.EFFECTS,this),this.daySubscription=n.registerForDayChange().subscribe(function(e){l.buildingEffects.forEach(function(e){e.duration>0&&(e.duration-=1)}),l.armyEffects.forEach(function(e){e.duration>0&&(e.duration-=1)}),l.natureEffects.forEach(function(e){e.duration>0&&(e.duration-=1)})})}return e.prototype.load=function(e){var n=this;this.buildingEffects=[],e.buildingEffects.forEach(function(e){n.buildingEffects.push(new Ku(e.name,e.building,e.effect,e.duration))}),this.armyEffects=[],e.armyEffects.forEach(function(e){n.armyEffects.push(new qu(e.name,e.troop,e.effect,e.duration))}),this.natureEffects=[],e.natureEffects.forEach(function(e){n.natureEffects.push(new Ju(e.name,e.effect,e.duration))})},e.prototype.save=function(){return{buildingEffects:this.buildingEffects,armyEffects:this.armyEffects,natureEffects:this.natureEffects}},e.prototype.reset=function(e,n){e?(this.buildingEffects=[],this.armyEffects=[],this.natureEffects=[]):n?(this.buildingEffects=this.buildingEffects.filter(function(e){return e.isRoyal()}),this.armyEffects=this.armyEffects.filter(function(e){return e.isRoyal()}),this.natureEffects=this.natureEffects.filter(function(e){return e.isRoyal()})):(this.buildingEffects=this.buildingEffects.filter(function(e){return e.isRoyal()||e.isWonder()}),this.armyEffects=this.armyEffects.filter(function(e){return e.isRoyal()||e.isWonder()}),this.natureEffects=this.natureEffects.filter(function(e){return e.isRoyal()||e.isWonder()}))},e.prototype.tick=function(e){this.buildingEffects=this.buildingEffects.filter(function(e){return 0!==e.duration}),this.armyEffects=this.armyEffects.filter(function(e){return 0!==e.duration}),this.natureEffects=this.natureEffects.filter(function(e){return 0!==e.duration})},e.prototype.getBuildingEffectsValue=function(e,n,t){void 0===n&&(n=!1),void 0===t&&(t=-1);var l=0;return t>0?this.buildingEffects.filter(function(n){return n.building===e||n.building===wu.ALL}).filter(function(e){return e.isPermanent()===n}).filter(function(e){return!e.isBuff()||e.isBuff()&&e.buff===t}).forEach(function(e){return l+=e.effect}):this.buildingEffects.filter(function(n){return n.building===e||n.building===wu.ALL}).filter(function(e){return e.isPermanent()===n}).forEach(function(e){return l+=e.effect}),l},e.prototype.getBuildingEffects=function(e,n){return void 0===n&&(n=-1),e?n>0?this.buildingEffects.filter(function(n){return n.building===e||n.building===wu.ALL}).filter(function(e){return e.buff===n}):this.buildingEffects.filter(function(n){return n.building===e||n.building===wu.ALL}):this.buildingEffects},e.prototype.hasWonderEffects=function(e){return this.buildingEffects.filter(function(n){return n.name===e}).length>0||this.armyEffects.filter(function(n){return n.name===e}).length>0||this.natureEffects.filter(function(n){return n.name===e}).length>0},e.prototype.getNatureEffectsValue=function(){var e=0;return this.natureEffects.forEach(function(n){return e+=n.effect}),e},e.prototype.getNatureEffects=function(){return this.natureEffects},e.prototype.addNatureEffect=function(e,n){if(void 0===n&&(n=!0),this.natureEffects.push(e),n){var t=e.name;e.isPermanent()?t+=" will permanently affect ":t+=" will affect ",t+="most natural sources with ",t+=e.effect>0?"+"+e.effect+"%":e.effect+"%",t+=" of their base power",e.isPermanent()||(t+=" for "+e.duration+" days"),this.logService.log(t)}},e.prototype.addBuildingEffect=function(e,n){if(void 0===n&&(n=!0),this.buildingEffects.push(e),n){var t=e.name;e.isPermanent()?t+=" will permanently affect ":t+=" will affect ",t+=e.building===wu.ALL?"all buildings with ":Vu.prepareBuildingName(e.building)+" with ",t+=e.effect>0?"+"+e.effect+"%":e.effect+"%",t+=e.building===wu.ALL?" of their base power":" of its base power",e.isPermanent()||(t+=e.duration%360==0?360===e.duration?" for "+e.duration/360+" year":" for "+e.duration/360+" years":" for "+e.duration+" days"),this.logService.log(t)}},e.prototype.addArmyEffect=function(e,n){if(void 0===n&&(n=!0),this.armyEffects.push(e),n){var t=e.name;e.isPermanent()?t+=" will permanently affect ":t+=" will affect ",t+=e.troop===Lu.ALL?"all troops with ":Vu.prepareTroopName(e.troop)+" with ",t+=e.effect>0?"+"+e.effect+"%":e.effect+"%",t+=" of their base strength and defense",e.isPermanent()||(t+=" for "+e.duration+" days"),this.logService.log(t)}},e.prototype.getArmyEffects=function(){return this.armyEffects},e.prototype.hasBuildingEffect=function(e,n){return void 0!==this.buildingEffects.find(function(t){return t.name===e&&t.building===n})},e.prototype.hasArmyEffect=function(e,n){return void 0!==this.armyEffects.find(function(t){return t.name===e&&t.troop===n})},e.ngInjectableDef=Oe({factory:function(){return new e(Ye(Vf),Ye(jf),Ye($f))},token:e,providedIn:"root"}),e}(),AE=function(){return function(e,n,t,l,i){this.forestSizeRule=e,this.forestSizeRuleEnabled=n,this.landSizeRule=t,this.landSizeRuleEnabled=l,this.forestSizeReserved=i}}(),NE=function(){function e(e,n,t,l,i){this.servicesService=e,this.effectsService=n,this.gameService=t,this.optionsService=l,this.logService=i,this.land=Es.START_LAND,this.forest=Es.START_FOREST,this.mountains=Es.START_MOUNTAINS,this.takenLand=0,this.ores=[[Iu.COAL,0],[Iu.GOLD_ORE,0],[Iu.SILVER_ORE,0],[Iu.COPPER_ORE,0],[Iu.TIN_ORE,0],[Iu.IRON_ORE,0]],this.forestGrowTick=0,this.forestGrowTicks=Es.FOREST_GROW_TICKS,this.forestGrowPercentage=Es.FOREST_GROW_PERCENTAGE,this.defaultForestOptions=new AE(0,!1,25,!0,0),this.forestOptions=new AE(0,!1,25,!0,0),this.servicesService.addService(zu.LAND,this)}return e.prototype.load=function(e){this.land=e.land,this.forest=e.forest,this.mountains=e.mountains,this.forestGrowTick=e.forestGrowTick,this.takenLand=e.takenLand,e.forestLandLimit&&(this.forestOptions=new AE(0,!1,e.forestLandLimit,!0,0)),e.forestOptions&&(this.forestOptions=e.forestOptions),this.ores=e.ores},e.prototype.save=function(){return{land:this.land,forest:this.forest,mountains:this.mountains,forestGrowTick:this.forestGrowTick,takenLand:this.takenLand,forestOptions:this.forestOptions,ores:this.ores}},e.prototype.reset=function(e,n){this.land=Es.START_LAND,this.forest=Es.START_FOREST,this.mountains=Es.START_MOUNTAINS,this.takenLand=0,this.optionsService.getOption(Wf.KEEP_MANAGEMENT_SETTINGS_ON_RESET)&&!e||(this.forestOptions=new AE(0,!1,25,!0,0)),this.ores=[[Iu.COAL,0],[Iu.GOLD_ORE,0],[Iu.SILVER_ORE,0],[Iu.COPPER_ORE,0],[Iu.TIN_ORE,0],[Iu.IRON_ORE,0]]},e.prototype.tick=function(e){this.growForest()},e.prototype.growForest=function(){if(this.forestGrowTick<this.forestGrowTicks&&(this.forestGrowTick+=1),this.forestGrowTick===this.forestGrowTicks){var e=Math.floor(this.forestGrowPercentage*this.forest*(1+this.effectsService.getNatureEffectsValue()/100));e<Es.MINIMAL_FOREST_GROWTH&&(e=Es.MINIMAL_FOREST_GROWTH),this.increaseForest(e),this.forestGrowTick=0}},e.prototype.removeForest=function(e){this.forest>=e&&(this.forest-=e)},e.prototype.reduceForest=function(e){var n=this.forest;return this.forest-e>=this.forestOptions.forestSizeReserved&&(this.forest-=e,this.gameService.isEnabled(_u.FORESTER)||(n>=400&&this.forest<400&&this.logService.warning("There are less than 400 trees in the forest!"),n>=250&&this.forest<250&&this.logService.warning("There are less than 250 trees in the forest!"),n>=100&&this.forest<100&&(this.logService.warning("Critical forest size!"),this.logService.warning("There are less than 100 trees in the forest!"))),!0)},e.prototype.increaseForest=function(e,n){if(void 0===n&&(n=!0),n){var t=0;this.forestOptions.landSizeRuleEnabled&&(t=this.forestOptions.landSizeRule),t<0&&(t=0);var l=this.land-t;return l<0&&(l=0),l-e>=0?(this.forest+=e,this.land-=e,0):(this.forest+=l,this.land-=l,e-l)}return this.forest+=e,0},e.prototype.removeLand=function(e){this.land>=e&&(this.land-=e)},e.prototype.reduceLand=function(e){var n=0;return this.forestOptions.landSizeRuleEnabled&&(n=this.forestOptions.landSizeRule),n<0&&(n=0),this.land-n-e>=0&&(this.land-=e,!0)},e.prototype.increaseLand=function(e,n){return void 0===n&&(n=!1),this.land+=e,n||(this.takenLand-=e),!0},e.prototype.increaseMountains=function(e){return this.mountains+=e,!0},e.prototype.getForest=function(){return this.forest},e.prototype.decreaseLand=function(e){if(!(this.land-e>=0))return e-this.land;this.takenLand+=e,this.land-=e},e.prototype.hasLand=function(e){return this.land-e>=0},e.prototype.getLand=function(){return this.land},e.prototype.getMountains=function(){return this.mountains},e.prototype.hasMountains=function(e){return this.mountains-e>=0},e.prototype.removeMountains=function(e){this.mountains>=e&&(this.mountains-=e)},e.prototype.decreaseMountains=function(e){if(!(this.mountains-e>=0))return e-this.mountains;this.mountains-=e,this.takenLand+=e},e.prototype.getOre=function(e){return this.ores.find(function(n){return n[0]===e})[1]},e.prototype.hasOre=function(e,n){return this.ores.find(function(n){return n[0]===e})[1]>=n},e.prototype.increaseOre=function(e,n){this.ores.find(function(n){return n[0]===e})[1]+=n},e.prototype.decreaseOre=function(e,n){var t=this.ores.find(function(n){return n[0]===e});if(t[1]>=n)return t[1]-=n,0;var l=n-t[1];return t[1]=0,l},e.prototype.getTakenLand=function(){return this.takenLand},e.prototype.takeLand=function(e){this.land-=e,this.takenLand+=e},e.prototype.getForestOptions=function(){return this.gameService.isEnabled(_u.FORESTER)?this.forestOptions:this.defaultForestOptions},e.ngInjectableDef=Oe({factory:function(){return new e(Ye(Vf),Ye(IE),Ye(Jf),Ye(zf),Ye($f))},token:e,providedIn:"root"}),e}(),_E=function(e){return e[e.ALL=0]="ALL",e[e.WORKING=1]="WORKING",e[e.IDLE=2]="IDLE",e[e.PASSIVE=3]="PASSIVE",e}({}),wE=function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var l,i,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(l=r.next()).done;)o.push(l.value)}catch(u){i={error:u}}finally{try{l&&!l.done&&(t=r.return)&&t.call(r)}finally{if(i)throw i.error}}return o},PE=function(){function e(e,n,t,l,i,r,o){this.buildings=[],this.filterBuilding=wu.ALL,this.filterWorking=_E.ALL,this.thisRegion=r,this.buildingFactoryService=e,this.resourcesService=n,this.servicesService=t,this.landService=l,this.idService=i,n.addCallback(this,r),t.addService(o,this)}return e.prototype.init=function(){},e.prototype.getBuildings=function(){return this.buildings},e.prototype.tick=function(e){this.shuffleArray(this.buildings).forEach(function(n){return n.tick(e)})},e.prototype.shuffleArray=function(e){for(var n,t=e.slice(),l=t.length-1;l>0;l--){var i=Math.floor(Math.random()*(l+1));n=wE([t[i],t[l]],2),t[l]=n[0],t[i]=n[1]}return t},e.prototype.save=function(){return{buildings:this.buildings,filterBuilding:this.filterBuilding,filterWorking:this.filterWorking}},e.prototype.reset=function(e,n){this.buildings=[],this.filterBuilding=wu.ALL,this.filterWorking=_E.ALL,this.init()},e.prototype.load=function(e){var n,t;this.buildings=[],this.filterBuilding=void 0!==e.filterBuilding?e.filterBuilding:wu.ALL,this.filterWorking=void 0!==e.filterWorking?e.filterWorking:_E.ALL;try{for(var l=function(e){var n="function"==typeof Symbol&&e[Symbol.iterator],t=0;return n?n.call(e):{next:function(){return e&&t>=e.length&&(e=void 0),{value:e&&e[t++],done:!e}}}}(e.buildings),i=l.next();!i.done;i=l.next()){var r=i.value;-1===r.id&&(r.id=this.idService.getNextId()),this.buildings.push(this.buildingFactoryService.loadBuilding(r))}}catch(o){n={error:o}}finally{try{i&&!i.done&&(t=l.return)&&t.call(l)}finally{if(n)throw n.error}}},e.prototype.getFilterBuilding=function(){return this.filterBuilding},e.prototype.setFilterBuildings=function(e){this.filterBuilding=e},e.prototype.setFilterWorking=function(e){this.filterWorking=e},e.prototype.getFilterWorking=function(){return this.filterWorking},e.prototype.getUnemployed=function(){return this.resourcesService.getPeople()},e.prototype.finishConstruction=function(e,n){var t=this.buildings.indexOf(e);-1!==t&&(this.buildings[t].stopProduction(),this.buildings[t]=this.buildingFactoryService.createBuilding(n,this.buildings[t].getBuildingId()))},e.prototype.createConstruction=function(e){this.buildings.push(e)},e.prototype.demolish=function(e){var n=this.buildings.indexOf(e);-1!==n&&(this.buildings[n].getBuildingType()===wu.CONSTRUCTION?(this.buildings[n].stopProduction(),this.buildings[n].finishDemolish(),this.landService.increaseLand(this.buildings[n].getSize()),this.buildings.splice(n,1)):this.buildings[n]=new Vv(this.servicesService,this.buildings[n].getBuildingId(),this.thisRegion,this.buildings[n].getBuildingType(),this.buildings[n].getComplexity(),this.buildings[n].getSize()).build())},e.prototype.finishDeconstruction=function(e){var n=this.buildings.indexOf(e);-1!==n&&(this.buildings[n].stopProduction(),this.buildingFactoryService.createBuildingShell(this.buildings[n].getBuildingBeingDemolished()).finishDemolish(),this.landService.increaseLand(this.buildings[n].getSize()),this.buildings.splice(n,1))},e.prototype.finishUpgrade=function(e,n){var t=this.buildings.indexOf(e);if(-1!==t){this.buildings[t].stopProduction();var l=this.buildingFactoryService.createBuildingShell(n,this.buildings[t].getBuildingId());l.getUpgradeSettings().NEW_BUILDING&&(l=this.buildingFactoryService.createBuildingShell(l.getUpgradeSettings().NEW_BUILDING,this.buildings[t].getBuildingId())),l.setBuildingData(this.buildings[t].getBuildingData()),l.setBuildingLevel(this.buildings[t].getBuildingLevel()),l.build(),this.buildings[t]=l}},e.prototype.fireRandomWorker=function(){var e=this.buildings.filter(function(e){return void 0===e.getOccupants&&e.isWorking()&&e.getWorkers()>0});return e.length>0&&(e[Math.floor(Math.random()*e.length)].fireWorker(),this.servicesService.getService(zu.MANAGEMENT).getLogFiredWorkers()&&this.servicesService.getService(zu.LOG).warning("Worker removed from "+e[Math.floor(Math.random()*e.length)].getName()),!0)},e.prototype.moveBuildingInList=function(e,n){lv(this.buildings,e,n)},e.prototype.moveBuildingInListByBuildingId=function(e,n){var t=this.buildings.findIndex(function(n){return e===n.getBuildingId()}),l=this.buildings.findIndex(function(e){return n===e.getBuildingId()});lv(this.buildings,t,l)},e.prototype.canCombine=function(e){if(this.buildings.filter(function(e){return e.isCombinable()}).length>1)return this.toCombine?this.toCombine!==e&&this.toCombine.getBuildingType()===e.getBuildingType():!!this.buildings.find(function(n){return n!==e&&n.getBuildingType()===e.getBuildingType()})},e.prototype.combine=function(e){if(!this.toCombine)return this.toCombine=e,!1;e.combine(this.toCombine,this)},e.prototype.finaliseCombine=function(e){if(e){var n=this.buildings.indexOf(this.toCombine);if(n>=0)return this.buildings[n].prepareDemolish()?(this.toCombine=null,this.buildings.splice(n,1),!0):(this.toCombine=null,!1)}else this.toCombine=null},e.prototype.clearCombineMode=function(){this.toCombine=null},e.prototype.split=function(e){e.isSplittable()&&e.split(this)},e.prototype.finaliseSplit=function(e){this.buildings.push(e)},e.prototype.addBuilding=function(e){this.buildings.push(this.buildingFactoryService.createBuilding(e))},e.prototype.upgradeBuilding=function(e){var n=this,t=this.buildings.find(function(n){return n.getBuildingId()===e}),l=this.servicesService.getService(zu.MODAL),i=this.servicesService.getService(zu.VILLAGE);if(t)if(t.hasUpgrade())if(t.getOccupants)if(void 0!==t.getMaxSize&&i.getPopulation()>i.getPopulationCap()-t.getMaxSize()){l.open(ju.CONFIRM),l.setModalText("You don't have enough housing space to move this building occupants.<br> People that won't find new home will leave the village<br>Do you still want to upgrade this building?");var r=l.registerForConfirmation().subscribe(function(e){r.unsubscribe(),e&&n.upgrade(t,l)})}else this.upgrade(t,l);else this.upgrade(t,l);else l.info("This building cannot be upgraded");else l.info("Error! Building not found")},e.prototype.upgrade=function(e,n){if(!e.getUpgradeSettings().SIZE||this.landService.hasLand(e.getUpgradeSettings().SIZE))if(this.resourcesService.hasResources(e.getUpgradeCost(),"Upgrade",1,!0)){this.landService.reduceLand(e.getUpgradeSettings().SIZE),this.resourcesService.decreaseResources(e.getUpgradeCost(),"Upgrade",!0);var t=this.buildings.indexOf(e),l=ys.getBuilding(e.getBuildingType()),i=new Dv(this.servicesService,e.getBuildingId(),this.thisRegion,e.getBuildingType(),l.UPGRADES[e.getBuildingLevel()-1].COMPLEXITY,e.getSize(),e.getBuildingLevel()+1,0,!1,e.getBuildingData()).build();e.stopProduction(),e.prepareDemolish(),this.buildings[t]=i}else n.info("Not enough resources to upgrade!");else n.info("Not enough empty land to upgrade!")},e.prototype.move=function(e){if(!this.toArrange)return this.toArrange=e,!1;this.moveBuildingInListByBuildingId(this.toArrange.getBuildingId(),e.getBuildingId()),this.toArrange=null},e.prototype.canMove=function(e){return!(this.toArrange&&e.getBuildingId()===this.toArrange.getBuildingId())},e.prototype.autoSort=function(){for(var e=[],n=this.buildings,t=function(){var n=l.buildings[0].getBuildingType();if(n===wu.MANUFACTURE){var t=l.buildings.filter(function(e){return e.getBuildingType()===n||e.getBuildingType()===wu.CONSTRUCTION&&e.getConstructing()===n}).map(function(e){return e});l.buildings=l.buildings.filter(function(e){return!(e.getBuildingType()===n||e.getBuildingType()===wu.CONSTRUCTION&&e.getConstructing()===n)});for(var i=function(){var n=t[0].getRecipe&&null!==t[0].getRecipe()?t[0].getRecipe().id:null;e=e.concat(t.filter(function(e){return e.getBuildingType()===wu.CONSTRUCTION||null===e.getRecipe()?null===n:e.getRecipe().id===n})),t=t.filter(function(e){return e.getBuildingType()===wu.CONSTRUCTION||null===e.getRecipe()?!(null===n):!(e.getRecipe().id===n)})};t.length>0;)i()}else e=e.concat(l.buildings.filter(function(e){return e.getBuildingType()===n||e.getBuildingType()===wu.CONSTRUCTION&&e.getConstructing()===n})),l.buildings=l.buildings.filter(function(e){return!(e.getBuildingType()===n||e.getBuildingType()===wu.CONSTRUCTION&&e.getConstructing()===n)})},l=this;this.buildings.length>0;)t();this.buildings=n.length===e.length?e:n},e}(),xE=function(e){var n="function"==typeof Symbol&&e[Symbol.iterator],t=0;return n?n.call(e):{next:function(){return e&&t>=e.length&&(e=void 0),{value:e&&e[t++],done:!e}}}},kE=function(e){function n(n,t,l,i,r){return e.call(this,t,n,l,r,i,Gu.VILLAGE,zu.VILLAGE)||this}return i(n,e),n.prototype.init=function(){var e=this;this.buildings.push(new Pv(this.servicesService,this.idService.getNextId(),2,0,100,100,100).build()),this.buildings.push(new Pv(this.servicesService,this.idService.getNextId(),1,0,100,100,100).build()),this.resourcesService.createPeople(3),this.buildings.forEach(function(n){return e.landService.takeLand(n.getSize())})},n.prototype.getPopulation=function(){return this.resourcesService.getTotalPeople()},n.prototype.getPopulationCap=function(){return this.resourcesService.getPopulationCap()},n.prototype.moveOccupants=function(e,n,t,l,i){for(var r=n,o=0;n>0&&o<this.buildings.length;){var u=this.buildings[o];if(this.buildings[o]!==e&&void 0!==u.getOccupants)for(;u.getOccupants()<u.getMaxSize()&&n>0;)u.addOccupant()&&(u.addFood(t/r),u.addFuel(l/r),u.addClothes(i/r),n-=1);o+=1}return n},n.prototype.removeRecruit=function(e,n){var t,l;void 0===n&&(n=!0);var i=this.buildings.filter(function(e){return void 0!==e.getOccupants}).map(function(e){return e}).sort(function(e,n){return e.getOccupants()===e.getMaxSize()&&n.getOccupants()===n.getMaxSize()?e.getMaxSize()>n.getMaxSize()?-1:1:e.getOccupants()===e.getMaxSize()&&n.getOccupants()<n.getMaxSize()?-1:e.getOccupants()<e.getMaxSize()&&n.getOccupants()===n.getMaxSize()?1:void 0}),r=0;if(i.forEach(function(e){return r+=e.getOccupants()}),r>=e){for(;e>0;)try{for(var o=xE(i),u=o.next();!u.done;u=o.next()){if(!(e>0))return!0;u.value.removeOccupant()&&(n&&this.resourcesService.removePeople(1),e-=1)}}catch(s){t={error:s}}finally{try{u&&!u.done&&(l=o.return)&&l.call(o)}finally{if(t)throw t.error}}if(0===e)return!0}return!1},n.prototype.replaceWithHouses=function(){var e=this;this.buildings.push(new xv(this.servicesService,this.idService.getNextId(),0,0,100,100,200).build()),this.buildings.filter(function(e){return e.getBuildingType()===wu.HUT}).forEach(function(n){n.prepareDemolish(),e.demolish(n)}),this.buildings.filter(function(e){return e.getBuildingType()===wu.DECONSTRUCTION}).forEach(function(n){return e.finishDeconstruction(n)})},n.prototype.getHousingBuildings=function(){return this.buildings.filter(function(e){return e.getBuildingType()===wu.HUT||e.getBuildingType()===wu.HOUSE||e.getBuildingType()===wu.LONGHOUSE||e.getBuildingType()===wu.TUDOR_HOUSE})},n.prototype.addVillagers=function(e){for(var n=this,t=this.getHousingBuildings().map(function(e){return e}).filter(function(e){return e.getOccupants()<e.getMaxSize()}),l=e;l>0&&t.length>0;)t.forEach(function(e){e.addOccupant()&&(n.resourcesService.createPeople(1),l-=1)}),t=t.filter(function(e){return e.getOccupants()<e.getMaxSize()})},n.ngInjectableDef=Oe({factory:function(){return new n(Ye(am),Ye(CE),Ye(Vf),Ye($S),Ye(NE))},token:n,providedIn:"root"}),n}(PE),ME=function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var l,i,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(l=r.next()).done;)o.push(l.value)}catch(u){i={error:u}}finally{try{l&&!l.done&&(t=r.return)&&t.call(r)}finally{if(i)throw i.error}}return o},DE=function(){function e(e,n,t){this.craftingService=e,this.resourcesService=n,this.villageService=t,this.id=Math.random(),this.amount=1,this.type=Ov.NONE,this.craftingTypes=Ov}return e.prototype.getResourceName=function(e){return Vu.prepareResourceName(e)},e.prototype.ngOnInit=function(){},e.prototype.cancel=function(){null!==this.id&&this.craftingService.cancel(this.id)},e.prototype.getCost=function(){return this.recipe.cost},e.prototype.isAvailable=function(){var e,n;try{for(var t=function(e){var n="function"==typeof Symbol&&e[Symbol.iterator],t=0;return n?n.call(e):{next:function(){return e&&t>=e.length&&(e=void 0),{value:e&&e[t++],done:!e}}}}(Array.from(this.recipe.cost)),l=t.next();!l.done;l=t.next()){var i=ME(l.value,2);if(0!==this.resourcesService.hasResource(i[0],i[1],"Crafting"))return!1}}catch(r){e={error:r}}finally{try{l&&!l.done&&(n=t.return)&&n.call(t)}finally{if(e)throw e.error}}return!0},e.prototype.checkResource=function(e){return 0===this.resourcesService.hasResource(e.key,e.value,"Crafting")},e.prototype.getResourceAmount=function(){return this.resourcesService.getResource(this.recipe.resource).amount},e.prototype.getCurrentlyCrafted=function(){var e=this;return this.villageService.getBuildings().filter(function(e){return e.getBuildingType()===wu.WORKSHOP&&e.isWorking()}).map(function(e){return e}).filter(function(n){return n.getRecipe()&&n.getRecipe().id===e.recipe.id}).length},e.prototype.isStarted=function(){return this.id>=1&&this.getCurrentlyCrafted()>0},e.prototype.getResourceAmountPercentage=function(){var e=this.resourcesService.getResource(this.recipe.resource);return Math.floor(e.amount/e.limit*100)},e}(),LE=rl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{width:100%;display:inline-block}#available[_ngcontent-%COMP%]{position:relative;padding:3px;text-align:center;font-weight:100;font-size:1.1em;border:1px solid #000}#notAvailable[_ngcontent-%COMP%]{padding:3px;text-align:center;font-size:1.1em;border:1px solid #57575a}#titleGrey[_ngcontent-%COMP%]{display:inline-block;color:#57575a}.notMet[_ngcontent-%COMP%]{color:var(--negative-colour)}.title[_ngcontent-%COMP%]{text-align:left}hr[_ngcontent-%COMP%]{border-color:#000}#progressId[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background-color:var(--active-colour);z-index:1}#text[_ngcontent-%COMP%]{position:relative;z-index:2}.costTitle[_ngcontent-%COMP%]{text-align:left}.missing[_ngcontent-%COMP%]{color:var(--negative-colour)}.tooltip[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{min-width:200px}.craftingTitle[_ngcontent-%COMP%]{text-align:left}.type[_ngcontent-%COMP%]{display:inline-block}app-icon[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 auto;margin-left:3px}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}"]],data:{}});function FE(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[["class","type"]],null,null,null,null,null)),(e()(),fo(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.amount)})}function UE(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[["class","type"]],null,null,null,null,null)),(e()(),fo(1,null,["","/",""]))],null,function(e,n){var t=n.component;e(n,1,0,t.getResourceAmount(),t.amount)})}function HE(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[["class","type"]],null,null,null,null,null)),(e()(),fo(1,null,["","%/","%"]))],null,function(e,n){var t=n.component;e(n,1,0,t.getResourceAmountPercentage(),t.amount)})}function GE(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[["class","type"]],null,null,null,null,null)),(e()(),fo(-1,null,["\u221e"]))],null,null)}function BE(e){return So(0,[(e()(),eo(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),fo(1,null,[" (",") "]))],null,function(e,n){e(n,1,0,n.component.getCurrentlyCrafted())})}function VE(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[["class","craftingTitle"]],null,null,null,null,null)),(e()(),fo(1,null,["Crafted: ",""]))],null,function(e,n){e(n,1,0,n.component.recipe.amount)})}function WE(e){return So(0,[(e()(),eo(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.value)})}function zE(e){return So(0,[(e()(),eo(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"div",[["class","missing"]],null,null,null,null,null)),(e()(),fo(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.value)})}function YE(e){return So(0,[(e()(),eo(0,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,WE)),vi(2,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,zE)),vi(4,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(5,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(6,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){var t=n.component;e(n,2,0,t.checkResource(n.context.$implicit)),e(n,4,0,!t.checkResource(n.context.$implicit)),e(n,6,0,t.getResourceName(n.context.$implicit.key),"resources")},null)}function KE(e){return So(0,[(e()(),eo(0,0,null,null,27,"div",[["appTooltip",""],["class","tooltip"],["id","available"]],null,[[null,"click"],[null,"mousemove"]],function(e,n,t){var l=!0,i=e.component;return"mousemove"===n&&(l=!1!==ii(e,1).onmousemove(t)&&l),"click"===n&&(l=!1!==i.cancel()&&l),l},null,null)),vi(1,16384,null,0,Pg,[],{elementId:[0,"elementId"]},null),(e()(),eo(2,0,null,null,12,"div",[["id","text"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,FE)),vi(4,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,UE)),vi(6,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,HE)),vi(8,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,GE)),vi(10,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),fo(11,null,[" "," "])),po(12,1),(e()(),Jr(16777216,null,null,1,null,BE)),vi(14,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(15,0,null,null,12,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),fo(16,null,[" "," "])),po(17,1),(e()(),eo(18,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),eo(19,0,null,null,1,"div",[["class","craftingTitle"]],null,null,null,null,null)),(e()(),fo(20,null,["Difficulty: ",""])),(e()(),Jr(16777216,null,null,1,null,VE)),vi(22,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(23,0,null,null,1,"div",[["class","costTitle"]],null,null,null,null,null)),(e()(),fo(-1,null,["Cost:"])),(e()(),Jr(16777216,null,null,2,null,YE)),vi(26,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),Si(0,fa,[xt])],function(e,n){var t=n.component;e(n,1,0,t.id),e(n,4,0,t.type===t.craftingTypes.SELECTED),e(n,6,0,t.type===t.craftingTypes.UNTIL_X),e(n,8,0,t.type===t.craftingTypes.UNTIL_PERCENT),e(n,10,0,t.type===t.craftingTypes.CONTINUOUS),e(n,14,0,t.isStarted()),e(n,22,0,t.recipe.amount>1),e(n,26,0,tl(n,26,0,ii(n,27).transform(t.getCost())))},function(e,n){var t=n.component,l=tl(n,11,0,e(n,12,0,ii(n.parent,0),t.recipe.title));e(n,11,0,l),e(n,15,0,xl(1,"",t.id,""));var i=tl(n,16,0,e(n,17,0,ii(n.parent,0),t.getResourceName(t.recipe.resource)));e(n,16,0,i),e(n,20,0,t.recipe.craftingDifficulty)})}function jE(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[["class","type"]],null,null,null,null,null)),(e()(),fo(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.amount)})}function $E(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[["class","type"]],null,null,null,null,null)),(e()(),fo(1,null,["","/",""]))],null,function(e,n){var t=n.component;e(n,1,0,t.getResourceAmount(),t.amount)})}function QE(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[["class","type"]],null,null,null,null,null)),(e()(),fo(1,null,["","%/","%"]))],null,function(e,n){var t=n.component;e(n,1,0,t.getResourceAmountPercentage(),t.amount)})}function qE(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[["class","type"]],null,null,null,null,null)),(e()(),fo(-1,null,["\u221e"]))],null,null)}function XE(e){return So(0,[(e()(),eo(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),fo(1,null,[" (",") "]))],null,function(e,n){e(n,1,0,n.component.getCurrentlyCrafted())})}function ZE(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[["class","craftingTitle"]],null,null,null,null,null)),(e()(),fo(1,null,["Crafted: ",""]))],null,function(e,n){e(n,1,0,n.component.recipe.amount)})}function JE(e){return So(0,[(e()(),eo(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.value)})}function ey(e){return So(0,[(e()(),eo(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"div",[["class","missing"]],null,null,null,null,null)),(e()(),fo(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.value)})}function ny(e){return So(0,[(e()(),eo(0,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,JE)),vi(2,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,ey)),vi(4,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(5,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(6,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){var t=n.component;e(n,2,0,t.checkResource(n.context.$implicit)),e(n,4,0,!t.checkResource(n.context.$implicit)),e(n,6,0,t.getResourceName(n.context.$implicit.key),"resources")},null)}function ty(e){return So(0,[(e()(),eo(0,0,null,null,27,"div",[["appTooltip",""],["class","tooltip"],["id","notAvailable"]],null,[[null,"click"],[null,"mousemove"]],function(e,n,t){var l=!0,i=e.component;return"mousemove"===n&&(l=!1!==ii(e,1).onmousemove(t)&&l),"click"===n&&(l=!1!==i.cancel()&&l),l},null,null)),vi(1,16384,null,0,Pg,[],{elementId:[0,"elementId"]},null),(e()(),eo(2,0,null,null,12,"div",[["id","titleGrey"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,jE)),vi(4,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,$E)),vi(6,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,QE)),vi(8,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,qE)),vi(10,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),fo(11,null,[" "," "])),po(12,1),(e()(),Jr(16777216,null,null,1,null,XE)),vi(14,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(15,0,null,null,12,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),fo(16,null,[" "," "])),po(17,1),(e()(),eo(18,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),eo(19,0,null,null,1,"div",[["class","craftingTitle"]],null,null,null,null,null)),(e()(),fo(20,null,["Difficulty: ",""])),(e()(),Jr(16777216,null,null,1,null,ZE)),vi(22,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(23,0,null,null,1,"div",[["class","costTitle"]],null,null,null,null,null)),(e()(),fo(-1,null,["Cost:"])),(e()(),Jr(16777216,null,null,2,null,ny)),vi(26,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),Si(0,fa,[xt])],function(e,n){var t=n.component;e(n,1,0,t.id),e(n,4,0,t.type===t.craftingTypes.SELECTED),e(n,6,0,t.type===t.craftingTypes.UNTIL_X),e(n,8,0,t.type===t.craftingTypes.UNTIL_PERCENT),e(n,10,0,t.type===t.craftingTypes.CONTINUOUS),e(n,14,0,t.isStarted()),e(n,22,0,t.recipe.amount>1),e(n,26,0,tl(n,26,0,ii(n,27).transform(t.getCost())))},function(e,n){var t=n.component,l=tl(n,11,0,e(n,12,0,ii(n.parent,0),t.recipe.title));e(n,11,0,l),e(n,15,0,xl(1,"",t.id,""));var i=tl(n,16,0,e(n,17,0,ii(n.parent,0),t.getResourceName(t.recipe.resource)));e(n,16,0,i),e(n,20,0,t.recipe.craftingDifficulty)})}function ly(e){return So(0,[Si(0,ga,[]),(e()(),eo(1,0,null,null,4,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,KE)),vi(3,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,ty)),vi(5,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,3,0,t.isAvailable()),e(n,5,0,!t.isAvailable())},null)}var iy=new Le("cdk-dir-doc",{providedIn:"root",factory:function(){return Ke(Ea)}}),ry=function(){function e(e){if(this.value="ltr",this.change=new Gi,e){var n=(e.body?e.body.dir:null)||(e.documentElement?e.documentElement.dir:null);this.value="ltr"===n||"rtl"===n?n:"ltr"}}return e.prototype.ngOnDestroy=function(){this.change.complete()},e.ngInjectableDef=Oe({factory:function(){return new e(Ye(iy,8))},token:e,providedIn:"root"}),e}(),oy=function(){function e(e){this.gameService=e}return e.prototype.ngOnInit=function(){},e.prototype.isCookingEnabled=function(){return this.gameService.isEnabled(_u.KITCHEN)},e}(),uy=rl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{display:-webkit-box;display:flex;height:100%;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}.entry[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:auto;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:100%;text-align:center;border-right:2px solid #000;border-bottom:1px solid #000;cursor:pointer;text-decoration:none;color:#000;font-size:1em}.entry[_ngcontent-%COMP%]:last-of-type{border:none;border-bottom:1px solid #000}.entry.active[_ngcontent-%COMP%]{background:var(--active-colour)}"]],data:{}});function sy(e){return So(0,[(e()(),eo(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/crafting/cooking"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==ii(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),vi(1,671744,[[4,4]],0,Qd,[jd,Fh,Ds],{routerLink:[0,"routerLink"]},null),vi(2,1720320,null,2,Xd,[jd,dt,St,[2,$d],[2,Qd]],{routerLinkActive:[0,"routerLinkActive"]},null),ro(603979776,3,{links:1}),ro(603979776,4,{linksWithHrefs:1}),(e()(),fo(-1,null,["Cooking"]))],function(e,n){e(n,1,0,"/crafting/cooking"),e(n,2,0,"active")},function(e,n){e(n,0,0,ii(n,1).target,ii(n,1).href)})}function ay(e){return So(0,[(e()(),eo(0,0,null,null,8,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/crafting/crafting"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==ii(e,2).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),vi(2,671744,[[2,4]],0,Qd,[jd,Fh,Ds],{routerLink:[0,"routerLink"]},null),vi(3,1720320,null,2,Xd,[jd,dt,St,[2,$d],[2,Qd]],{routerLinkActive:[0,"routerLinkActive"]},null),ro(603979776,1,{links:1}),ro(603979776,2,{linksWithHrefs:1}),(e()(),fo(-1,null,["Crafting"])),(e()(),Jr(16777216,null,null,1,null,sy)),vi(8,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,"/crafting/crafting"),e(n,3,0,"active"),e(n,8,0,t.isCookingEnabled())},function(e,n){e(n,1,0,ii(n,2).target,ii(n,2).href)})}var cy=function(){function e(e,n,t,l,i){this.recipeService=e,this.resourcesService=n,this.craftingService=t,this.modalService=l,this.changeDetectorRef=i,this.craftingTypes=Ov,this.filterText="",this.amount=1,this.craftingType=this.craftingTypes.SELECTED,this.bookPage=Mu[Mu.ALL]}return e.prototype.ngOnInit=function(){var e=this;this.craftingService.registerForUpdate().subscribe(function(){e.changeDetectorRef.destroyed||e.changeDetectorRef.detectChanges()})},e.prototype.getRecipes=function(){var e=this;return this.filterText&&this.filterText.length>0?this.recipeService.getRecipes().filter(function(n){return n.available&&(e.resourcesService.getResourceTypes(n.getResource()).includes(Mu[e.bookPage])&&n.title.toLowerCase().includes(e.filterText.toLowerCase())||e.resourcesService.getResourceTypes(n.getResource()).includes(Mu[e.bookPage])&&Vu.prepareResourceName(n.getResource()).toLowerCase().includes(e.filterText.toLowerCase()))}):this.recipeService.getRecipes().filter(function(n){return n.available&&e.resourcesService.getResourceTypes(n.getResource()).includes(Mu[e.bookPage])})},e.prototype.getEntries=function(){var e=[];return e.push(Mu[Mu.ALL]),e.push(Mu[Mu.PROCESSED]),e.push(Mu[Mu.TOOLS]),e.push(Mu[Mu.FOOD]),e.push(Mu[Mu.OTHER]),e},e.prototype.select=function(e){this.bookPage=e},e.prototype.craft=function(e,n){this.validateAmountInput()&&this.craftingService.craft(e,n,this.amount,this.craftingType)},e.prototype.getQueue=function(){return this.craftingService.getCraftingQueue()},e.prototype.drop=function(e){this.craftingService.moveRecipeInCraftingQueue(e)},e.prototype.getQueueMaxSize=function(){return this.craftingService.getCraftingQueueMaxSize()},e.prototype.validateAmountInput=function(){return!(isNaN(this.amount)||Number(this.amount)<1)||(this.modalService.info("Invalid craft amount"),this.amount=1,!1)},e}(),py=rl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:100%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#boxes[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;border:1px solid #000;height:95%;margin:.5%;text-align:center}#recipes[_ngcontent-%COMP%]{text-align:center;-webkit-box-flex:0;flex:0 0 74.3%;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;border:1px solid #000;-webkit-box-align:center;align-items:center}.queue[_ngcontent-%COMP%]{text-align:center;-webkit-box-flex:0;flex:0 0 25%;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;border:1px solid #000;-webkit-box-align:center;align-items:center}#queueRecipes[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}.title[_ngcontent-%COMP%]{width:100.5%;font-weight:bolder;font-size:1.1em;display:inline-block;border-bottom:1px solid #000}#modes[_ngcontent-%COMP%]{margin-top:-1px;padding:0;margin-bottom:5px}#recipesBook[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;height:100%;width:100%}#menu[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;border-right:1px solid #000;-webkit-box-flex:0;flex:0 0 10%}.entry[_ngcontent-%COMP%]{display:-webkit-box;display:flex;border-bottom:1px solid #000;-webkit-box-flex:1;flex:1 0 0;height:100%;width:100%;margin-right:-30px;font-size:.8em;font-weight:600;cursor:pointer}.entry[_ngcontent-%COMP%]:last-of-type{border-bottom:none}.entryText[_ngcontent-%COMP%]{-webkit-transform:rotate(-90deg);-moz-transform:rotate(-90deg);-ms-transform:rotate(-90deg);-o-transform:rotate(-90deg)}.inactiveEntry[_ngcontent-%COMP%]{height:100%;width:100%;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center}.activeEntry[_ngcontent-%COMP%]{height:100%;width:100%;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;background-color:var(--active-colour)}#book[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 90%;width:100%}#bookRecipes[_ngcontent-%COMP%]{overflow-y:auto;border-top:1px solid #000;height:87%}app-recipe[_ngcontent-%COMP%]{font-size:.8em;display:inline-block;width:130px;margin:4px 8px;cursor:pointer}#side[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;font-size:.8em;margin:1%;vertical-align:bottom}#amount[_ngcontent-%COMP%], #filter[_ngcontent-%COMP%]{font-size:1em;width:20%;margin:1%;display:block;vertical-align:bottom}#filter[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:1.05em;margin-left:0;padding:0;border:none;outline:0}#amount[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:65%;font-size:1.15em;margin-left:0;padding:0;border:none;outline:0}.radios[_ngcontent-%COMP%]{text-align:left;font-size:.9em}#progressButton[_ngcontent-%COMP%]{font-size:.6em}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;width:85px;margin:auto}#help1[_ngcontent-%COMP%]{font-size:.7em;font-weight:400;text-align:left}"]],data:{}});function hy(e){return So(0,[(e()(),eo(0,0,null,null,2,"div",[["class","activeEntry"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"div",[["class","entryText"]],null,null,null,null,null)),(e()(),fo(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit)})}function dy(e){return So(0,[(e()(),eo(0,0,null,null,2,"div",[["class","inactiveEntry"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"div",[["class","entryText"]],null,null,null,null,null)),(e()(),fo(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit)})}function gy(e){return So(0,[(e()(),eo(0,0,null,null,4,"div",[["class","entry"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.select(e.context.$implicit)&&l),l},null,null)),(e()(),Jr(16777216,null,null,1,null,hy)),vi(2,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,dy)),vi(4,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.bookPage===n.context.$implicit),e(n,4,0,t.bookPage!==n.context.$implicit)},null)}function fy(e){return So(0,[(e()(),eo(0,0,null,null,1,"app-recipe",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.craft(t,e.context.$implicit)&&l),l},ly,LE)),vi(1,114688,null,0,DE,[Tv,am,kE],{recipe:[0,"recipe"]},null)],function(e,n){e(n,1,0,n.context.$implicit)},null)}function my(e){return So(0,[(e()(),eo(0,16777216,null,null,6,"app-recipe",[["cdkDrag",""],["class","cdk-drag"]],[[2,"cdk-drag-disabled",null],[2,"cdk-drag-dragging",null]],null,null,ly,LE)),Ei(6144,null,fv,null,[vv]),vi(2,4866048,[[1,4]],3,vv,[dt,[3,gv],Ea,vr,Gt,mv,[2,ry],dv,kt],null,null),ro(603979776,2,{_handles:1}),ro(603979776,3,{_previewTemplate:0}),ro(603979776,4,{_placeholderTemplate:0}),vi(6,114688,null,0,DE,[Tv,am,kE],{id:[0,"id"],recipe:[1,"recipe"],amount:[2,"amount"],type:[3,"type"]},null),(e()(),Jr(0,null,null,0))],function(e,n){e(n,6,0,n.context.$implicit.id,n.context.$implicit.recipe,n.context.$implicit.amount,n.context.$implicit.type)},function(e,n){e(n,0,0,ii(n,2).disabled,ii(n,2)._dragRef.isDragging())})}function vy(e){return So(0,[(e()(),eo(0,0,null,null,102,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),eo(2,0,null,null,1,"app-crafting-top-menu",[],null,null,null,ay,uy)),vi(3,114688,null,0,oy,[Jf],null,null),(e()(),eo(4,0,null,null,98,"div",[["id","boxes"]],null,null,null,null,null)),(e()(),eo(5,0,null,null,86,"div",[["id","recipes"]],null,null,null,null,null)),(e()(),eo(6,0,null,null,17,"span",[["class","title"]],null,null,null,null,null)),(e()(),eo(7,0,null,null,16,"span",[["class","icon"]],null,null,null,null,null)),(e()(),fo(-1,null,["Recipes "])),(e()(),eo(9,0,null,null,14,"div",[["appTooltip",""],["class","tooltip"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==ii(e,10).onmousemove(t)&&l),l},null,null)),vi(10,16384,null,0,Pg,[],{elementId:[0,"elementId"]},null),(e()(),eo(11,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(12,114688,null,0,xg,[],{name:[0,"name"],title:[1,"title"]},null),(e()(),eo(13,0,null,null,10,"span",[["id","help1"]],null,null,null,null,null)),(e()(),fo(-1,null,[" In this menu you can define orders for your workshops."])),(e()(),eo(15,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(16,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),fo(-1,null,[" Each workshop will try to take order from the orders lists starting from top."])),(e()(),eo(18,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(19,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),fo(-1,null,[" Only orders that meet requirements will be taken by workshops."])),(e()(),eo(21,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(22,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),fo(-1,null,[" You can add order to the top of the list by holding shift while clicking on a recipe. "])),(e()(),eo(24,0,null,null,67,"div",[["id","recipesBook"]],null,null,null,null,null)),(e()(),eo(25,0,null,null,2,"div",[["id","menu"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,gy)),vi(27,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),eo(28,0,null,null,63,"div",[["id","book"]],null,null,null,null,null)),(e()(),eo(29,0,null,null,59,"div",[["id","side"]],null,null,null,null,null)),(e()(),eo(30,0,null,null,8,"div",[["id","filter"]],null,null,null,null,null)),(e()(),fo(-1,null,[" Filter:"])),(e()(),eo(32,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(33,0,null,null,5,"input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,34)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,34).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,34)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,34)._compositionEnd(t.target.value)&&l),"ngModelChange"===n&&(l=!1!==(i.filterText=t)&&l),l},null,null)),vi(34,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),Ei(1024,null,Lg,function(e){return[e]},[Hg]),vi(36,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(38,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(39,0,null,null,9,"div",[["id","amount"]],null,null,null,null,null)),(e()(),fo(-1,null,[" amount:"])),(e()(),eo(41,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(42,0,null,null,6,"input",[["min","1"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,43)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,43).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,43)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,43)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==ii(e,44).onChange(t.target.value)&&l),"input"===n&&(l=!1!==ii(e,44).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,44).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.amount=t)&&l),l},null,null)),vi(43,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),vi(44,16384,null,0,Jg,[St,dt],null,null),Ei(1024,null,Lg,function(e,n){return[e,n]},[Hg,Jg]),vi(46,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(48,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(49,0,null,null,29,"div",[["class","radios"]],null,null,null,null,null)),(e()(),eo(50,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),eo(51,0,null,null,6,"input",[["name","type"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,52)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,52).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,52)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,52)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==ii(e,53).onChange()&&l),"blur"===n&&(l=!1!==ii(e,53).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.craftingType=t)&&l),l},null,null)),vi(52,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),vi(53,212992,null,0,nf,[St,dt,ef,Xe],{name:[0,"name"],value:[1,"value"]},null),Ei(1024,null,Lg,function(e,n){return[e,n]},[Hg,nf]),vi(55,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(57,16384,null,0,zg,[[4,Wg]],null,null),(e()(),fo(-1,null,[" selected amount "])),(e()(),eo(59,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(60,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),eo(61,0,null,null,6,"input",[["name","type"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,62)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,62).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,62)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,62)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==ii(e,63).onChange()&&l),"blur"===n&&(l=!1!==ii(e,63).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.craftingType=t)&&l),l},null,null)),vi(62,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),vi(63,212992,null,0,nf,[St,dt,ef,Xe],{name:[0,"name"],value:[1,"value"]},null),Ei(1024,null,Lg,function(e,n){return[e,n]},[Hg,nf]),vi(65,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(67,16384,null,0,zg,[[4,Wg]],null,null),(e()(),fo(-1,null,[" until X available "])),(e()(),eo(69,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(70,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),eo(71,0,null,null,6,"input",[["name","type"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,72)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,72).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,72)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,72)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==ii(e,73).onChange()&&l),"blur"===n&&(l=!1!==ii(e,73).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.craftingType=t)&&l),l},null,null)),vi(72,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),vi(73,212992,null,0,nf,[St,dt,ef,Xe],{name:[0,"name"],value:[1,"value"]},null),Ei(1024,null,Lg,function(e,n){return[e,n]},[Hg,nf]),vi(75,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(77,16384,null,0,zg,[[4,Wg]],null,null),(e()(),fo(-1,null,[" until % available "])),(e()(),eo(79,0,null,null,9,"div",[["class","radios"]],null,null,null,null,null)),(e()(),eo(80,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),eo(81,0,null,null,6,"input",[["name","type"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,82)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,82).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,82)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,82)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==ii(e,83).onChange()&&l),"blur"===n&&(l=!1!==ii(e,83).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.craftingType=t)&&l),l},null,null)),vi(82,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),vi(83,212992,null,0,nf,[St,dt,ef,Xe],{name:[0,"name"],value:[1,"value"]},null),Ei(1024,null,Lg,function(e,n){return[e,n]},[Hg,nf]),vi(85,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(87,16384,null,0,zg,[[4,Wg]],null,null),(e()(),fo(-1,null,[" continuous "])),(e()(),eo(89,0,null,null,2,"div",[["id","bookRecipes"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,fy)),vi(91,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),eo(92,0,null,null,10,"div",[["class","queue"]],null,null,null,null,null)),(e()(),eo(93,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),fo(-1,null,["Orders"])),(e()(),fo(95,null,[" ","/"," "])),(e()(),eo(96,0,null,null,6,"div",[["cdkDropList",""],["class","cdk-drop-list"],["id","queueRecipes"]],[[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],[[null,"cdkDropListDropped"]],function(e,n,t){var l=!0;return"cdkDropListDropped"===n&&(l=!1!==e.component.drop(t)&&l),l},null,null)),Ei(6144,null,gv,null,[Rv]),vi(98,1196032,null,1,Rv,[dt,dv,kt,[2,ry],[3,Ev]],{id:[0,"id"]},{dropped:"cdkDropListDropped"}),ro(603979776,1,{_draggables:1}),Ei(256,null,Ev,void 0,[]),(e()(),Jr(16777216,null,null,1,null,my)),vi(102,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,3,0),e(n,10,0,"help1"),e(n,12,0,"question",""),e(n,27,0,t.getEntries()),e(n,36,0,t.filterText),e(n,46,0,t.amount),e(n,53,0,"type",t.craftingTypes.SELECTED),e(n,55,0,"type",t.craftingType),e(n,63,0,"type",t.craftingTypes.UNTIL_X),e(n,65,0,"type",t.craftingType),e(n,73,0,"type",t.craftingTypes.UNTIL_PERCENT),e(n,75,0,"type",t.craftingType),e(n,83,0,"type",t.craftingTypes.CONTINUOUS),e(n,85,0,"type",t.craftingType),e(n,91,0,t.getRecipes()),e(n,98,0,"queueRecipes"),e(n,102,0,t.getQueue())},function(e,n){var t=n.component;e(n,33,0,ii(n,38).ngClassUntouched,ii(n,38).ngClassTouched,ii(n,38).ngClassPristine,ii(n,38).ngClassDirty,ii(n,38).ngClassValid,ii(n,38).ngClassInvalid,ii(n,38).ngClassPending),e(n,42,0,ii(n,48).ngClassUntouched,ii(n,48).ngClassTouched,ii(n,48).ngClassPristine,ii(n,48).ngClassDirty,ii(n,48).ngClassValid,ii(n,48).ngClassInvalid,ii(n,48).ngClassPending),e(n,51,0,ii(n,57).ngClassUntouched,ii(n,57).ngClassTouched,ii(n,57).ngClassPristine,ii(n,57).ngClassDirty,ii(n,57).ngClassValid,ii(n,57).ngClassInvalid,ii(n,57).ngClassPending),e(n,61,0,ii(n,67).ngClassUntouched,ii(n,67).ngClassTouched,ii(n,67).ngClassPristine,ii(n,67).ngClassDirty,ii(n,67).ngClassValid,ii(n,67).ngClassInvalid,ii(n,67).ngClassPending),e(n,71,0,ii(n,77).ngClassUntouched,ii(n,77).ngClassTouched,ii(n,77).ngClassPristine,ii(n,77).ngClassDirty,ii(n,77).ngClassValid,ii(n,77).ngClassInvalid,ii(n,77).ngClassPending),e(n,81,0,ii(n,87).ngClassUntouched,ii(n,87).ngClassTouched,ii(n,87).ngClassPristine,ii(n,87).ngClassDirty,ii(n,87).ngClassValid,ii(n,87).ngClassInvalid,ii(n,87).ngClassPending),e(n,95,0,t.getQueue().length,t.getQueueMaxSize()),e(n,96,0,ii(n,98).id,ii(n,98).disabled,ii(n,98)._dropListRef.isDragging(),ii(n,98)._dropListRef.isReceiving())})}function Sy(e){return So(0,[(e()(),eo(0,0,null,null,1,"app-crafting",[],null,null,null,vy,py)),vi(1,114688,null,0,cy,[Cm,am,Tv,qf,kt],null,null)],function(e,n){e(n,1,0)},null)}var Ey=jl("app-crafting",cy,Sy,{},{},[]),yy=function(){function e(e,n,t,l,i){this.recipeService=e,this.resourcesService=n,this.craftingService=t,this.modalService=l,this.changeDetectorRef=i,this.craftingTypes=Ov,this.filterText="",this.amount=1,this.craftingType=this.craftingTypes.SELECTED,this.bookPage=Mu[Mu.ALL]}return e.prototype.ngOnInit=function(){var e=this;this.craftingService.registerForUpdate().subscribe(function(){e.changeDetectorRef.destroyed||e.changeDetectorRef.detectChanges()})},e.prototype.getRecipes=function(){var e=this;return this.filterText&&this.filterText.length>0?this.recipeService.getCookingRecipes().filter(function(n){return n.available&&(e.resourcesService.getResourceTypes(n.getResource()).includes(Mu[e.bookPage])&&n.title.toLowerCase().includes(e.filterText.toLowerCase())||e.resourcesService.getResourceTypes(n.getResource()).includes(Mu[e.bookPage])&&Vu.prepareResourceName(n.getResource()).toLowerCase().includes(e.filterText.toLowerCase()))}):this.recipeService.getCookingRecipes().filter(function(n){return n.available&&e.resourcesService.getResourceTypes(n.getResource()).includes(Mu[e.bookPage])})},e.prototype.getEntries=function(){var e=[];return e.push(Mu[Mu.FOOD]),e},e.prototype.select=function(e){this.bookPage=e},e.prototype.craft=function(e,n){this.validateAmountInput()&&this.craftingService.cook(e,n,this.amount,this.craftingType)},e.prototype.getQueue=function(){return this.craftingService.getCookingQueue()},e.prototype.drop=function(e){this.craftingService.moveRecipeInCookingQueue(e)},e.prototype.getQueueMaxSize=function(){return this.craftingService.getCookingQueueMaxSize()},e.prototype.validateAmountInput=function(){return!(isNaN(this.amount)||Number(this.amount)<1)||(this.modalService.info("Invalid cook amount"),this.amount=1,!1)},e}(),Ry=rl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:100%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#boxes[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;border:1px solid #000;height:95%;margin:.5%;text-align:center}#recipes[_ngcontent-%COMP%]{text-align:center;-webkit-box-flex:0;flex:0 0 74.3%;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;border:1px solid #000;-webkit-box-align:center;align-items:center}.queue[_ngcontent-%COMP%]{text-align:center;-webkit-box-flex:0;flex:0 0 25%;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;border:1px solid #000;-webkit-box-align:center;align-items:center}#queueRecipes[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}.title[_ngcontent-%COMP%]{width:100.5%;font-weight:bolder;font-size:1.1em;display:inline-block;border-bottom:1px solid #000}#modes[_ngcontent-%COMP%]{margin-top:-1px;padding:0;margin-bottom:5px}#recipesBook[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;height:100%;width:100%}#menu[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;border-right:1px solid #000;-webkit-box-flex:0;flex:0 0 10%}.entry[_ngcontent-%COMP%]{display:-webkit-box;display:flex;border-bottom:1px solid #000;-webkit-box-flex:1;flex:1 0 0;height:100%;width:100%;margin-right:-30px;font-size:.8em;font-weight:600;cursor:pointer}.entry[_ngcontent-%COMP%]:last-of-type{border-bottom:none}.entryText[_ngcontent-%COMP%]{-webkit-transform:rotate(-90deg);-moz-transform:rotate(-90deg);-ms-transform:rotate(-90deg);-o-transform:rotate(-90deg)}.inactiveEntry[_ngcontent-%COMP%]{height:100%;width:100%;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center}.activeEntry[_ngcontent-%COMP%]{height:100%;width:100%;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;background-color:var(--active-colour)}#book[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 90%;width:100%}#bookRecipes[_ngcontent-%COMP%]{overflow-y:auto;border-top:1px solid #000}app-recipe[_ngcontent-%COMP%]{font-size:.8em;display:inline-block;width:130px;margin:4px 8px;cursor:pointer}#side[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;font-size:.8em;margin:1%;vertical-align:bottom}#amount[_ngcontent-%COMP%], #filter[_ngcontent-%COMP%]{font-size:1em;width:20%;margin:1%;display:block;vertical-align:bottom}#filter[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:1.05em;margin-left:0;padding:0;border:none;outline:0}#amount[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:65%;font-size:1.15em;margin-left:0;padding:0;border:none;outline:0}.radios[_ngcontent-%COMP%]{text-align:left;font-size:.9em}#progressButton[_ngcontent-%COMP%]{font-size:.6em}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;width:85px;margin:auto}#help1[_ngcontent-%COMP%]{font-size:.7em;font-weight:400;text-align:left}"]],data:{}});function by(e){return So(0,[(e()(),eo(0,0,null,null,2,"div",[["class","activeEntry"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"div",[["class","entryText"]],null,null,null,null,null)),(e()(),fo(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit)})}function Oy(e){return So(0,[(e()(),eo(0,0,null,null,2,"div",[["class","inactiveEntry"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"div",[["class","entryText"]],null,null,null,null,null)),(e()(),fo(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit)})}function Ty(e){return So(0,[(e()(),eo(0,0,null,null,4,"div",[["class","entry"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.select(e.context.$implicit)&&l),l},null,null)),(e()(),Jr(16777216,null,null,1,null,by)),vi(2,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,Oy)),vi(4,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.bookPage===n.context.$implicit),e(n,4,0,t.bookPage!==n.context.$implicit)},null)}function Cy(e){return So(0,[(e()(),eo(0,0,null,null,1,"app-recipe",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.craft(t,e.context.$implicit)&&l),l},ly,LE)),vi(1,114688,null,0,DE,[Tv,am,kE],{recipe:[0,"recipe"]},null)],function(e,n){e(n,1,0,n.context.$implicit)},null)}function Iy(e){return So(0,[(e()(),eo(0,16777216,null,null,6,"app-recipe",[["cdkDrag",""],["class","cdk-drag"]],[[2,"cdk-drag-disabled",null],[2,"cdk-drag-dragging",null]],null,null,ly,LE)),Ei(6144,null,fv,null,[vv]),vi(2,4866048,[[1,4]],3,vv,[dt,[3,gv],Ea,vr,Gt,mv,[2,ry],dv,kt],null,null),ro(603979776,2,{_handles:1}),ro(603979776,3,{_previewTemplate:0}),ro(603979776,4,{_placeholderTemplate:0}),vi(6,114688,null,0,DE,[Tv,am,kE],{id:[0,"id"],recipe:[1,"recipe"],amount:[2,"amount"],type:[3,"type"]},null),(e()(),Jr(0,null,null,0))],function(e,n){e(n,6,0,n.context.$implicit.id,n.context.$implicit.recipe,n.context.$implicit.amount,n.context.$implicit.type)},function(e,n){e(n,0,0,ii(n,2).disabled,ii(n,2)._dragRef.isDragging())})}function Ay(e){return So(0,[(e()(),eo(0,0,null,null,102,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),eo(2,0,null,null,1,"app-crafting-top-menu",[],null,null,null,ay,uy)),vi(3,114688,null,0,oy,[Jf],null,null),(e()(),eo(4,0,null,null,98,"div",[["id","boxes"]],null,null,null,null,null)),(e()(),eo(5,0,null,null,86,"div",[["id","recipes"]],null,null,null,null,null)),(e()(),eo(6,0,null,null,17,"span",[["class","title"]],null,null,null,null,null)),(e()(),eo(7,0,null,null,16,"span",[["class","icon"]],null,null,null,null,null)),(e()(),fo(-1,null,["Recipes "])),(e()(),eo(9,0,null,null,14,"div",[["appTooltip",""],["class","tooltip"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==ii(e,10).onmousemove(t)&&l),l},null,null)),vi(10,16384,null,0,Pg,[],{elementId:[0,"elementId"]},null),(e()(),eo(11,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(12,114688,null,0,xg,[],{name:[0,"name"],title:[1,"title"]},null),(e()(),eo(13,0,null,null,10,"span",[["id","help1"]],null,null,null,null,null)),(e()(),fo(-1,null,[" In this menu you can define orders for your kitchens."])),(e()(),eo(15,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(16,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),fo(-1,null,[" Each kitchen will try to take order from the orders lists starting from top."])),(e()(),eo(18,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(19,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),fo(-1,null,[" Only orders that meet requirements will be taken by kitchen."])),(e()(),eo(21,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(22,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),fo(-1,null,[" You can add order to the top of the list by holding shift while clicking on a recipe. "])),(e()(),eo(24,0,null,null,67,"div",[["id","recipesBook"]],null,null,null,null,null)),(e()(),eo(25,0,null,null,2,"div",[["id","menu"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,Ty)),vi(27,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),eo(28,0,null,null,63,"div",[["id","book"]],null,null,null,null,null)),(e()(),eo(29,0,null,null,59,"div",[["id","side"]],null,null,null,null,null)),(e()(),eo(30,0,null,null,8,"div",[["id","filter"]],null,null,null,null,null)),(e()(),fo(-1,null,[" Filter:"])),(e()(),eo(32,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(33,0,null,null,5,"input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,34)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,34).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,34)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,34)._compositionEnd(t.target.value)&&l),"ngModelChange"===n&&(l=!1!==(i.filterText=t)&&l),l},null,null)),vi(34,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),Ei(1024,null,Lg,function(e){return[e]},[Hg]),vi(36,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(38,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(39,0,null,null,9,"div",[["id","amount"]],null,null,null,null,null)),(e()(),fo(-1,null,[" amount:"])),(e()(),eo(41,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(42,0,null,null,6,"input",[["min","1"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,43)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,43).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,43)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,43)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==ii(e,44).onChange(t.target.value)&&l),"input"===n&&(l=!1!==ii(e,44).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,44).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.amount=t)&&l),l},null,null)),vi(43,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),vi(44,16384,null,0,Jg,[St,dt],null,null),Ei(1024,null,Lg,function(e,n){return[e,n]},[Hg,Jg]),vi(46,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(48,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(49,0,null,null,29,"div",[["class","radios"]],null,null,null,null,null)),(e()(),eo(50,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),eo(51,0,null,null,6,"input",[["name","type"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,52)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,52).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,52)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,52)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==ii(e,53).onChange()&&l),"blur"===n&&(l=!1!==ii(e,53).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.craftingType=t)&&l),l},null,null)),vi(52,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),vi(53,212992,null,0,nf,[St,dt,ef,Xe],{name:[0,"name"],value:[1,"value"]},null),Ei(1024,null,Lg,function(e,n){return[e,n]},[Hg,nf]),vi(55,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(57,16384,null,0,zg,[[4,Wg]],null,null),(e()(),fo(-1,null,[" selected amount "])),(e()(),eo(59,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(60,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),eo(61,0,null,null,6,"input",[["name","type"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,62)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,62).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,62)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,62)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==ii(e,63).onChange()&&l),"blur"===n&&(l=!1!==ii(e,63).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.craftingType=t)&&l),l},null,null)),vi(62,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),vi(63,212992,null,0,nf,[St,dt,ef,Xe],{name:[0,"name"],value:[1,"value"]},null),Ei(1024,null,Lg,function(e,n){return[e,n]},[Hg,nf]),vi(65,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(67,16384,null,0,zg,[[4,Wg]],null,null),(e()(),fo(-1,null,[" until X available "])),(e()(),eo(69,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(70,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),eo(71,0,null,null,6,"input",[["name","type"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,72)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,72).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,72)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,72)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==ii(e,73).onChange()&&l),"blur"===n&&(l=!1!==ii(e,73).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.craftingType=t)&&l),l},null,null)),vi(72,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),vi(73,212992,null,0,nf,[St,dt,ef,Xe],{name:[0,"name"],value:[1,"value"]},null),Ei(1024,null,Lg,function(e,n){return[e,n]},[Hg,nf]),vi(75,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(77,16384,null,0,zg,[[4,Wg]],null,null),(e()(),fo(-1,null,[" until % available "])),(e()(),eo(79,0,null,null,9,"div",[["class","radios"]],null,null,null,null,null)),(e()(),eo(80,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),eo(81,0,null,null,6,"input",[["name","type"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,82)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,82).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,82)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,82)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==ii(e,83).onChange()&&l),"blur"===n&&(l=!1!==ii(e,83).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.craftingType=t)&&l),l},null,null)),vi(82,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),vi(83,212992,null,0,nf,[St,dt,ef,Xe],{name:[0,"name"],value:[1,"value"]},null),Ei(1024,null,Lg,function(e,n){return[e,n]},[Hg,nf]),vi(85,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(87,16384,null,0,zg,[[4,Wg]],null,null),(e()(),fo(-1,null,[" continuous "])),(e()(),eo(89,0,null,null,2,"div",[["id","bookRecipes"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,Cy)),vi(91,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),eo(92,0,null,null,10,"div",[["class","queue"]],null,null,null,null,null)),(e()(),eo(93,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),fo(-1,null,["Orders"])),(e()(),fo(95,null,[" ","/"," "])),(e()(),eo(96,0,null,null,6,"div",[["cdkDropList",""],["class","cdk-drop-list"],["id","queueRecipes"]],[[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],[[null,"cdkDropListDropped"]],function(e,n,t){var l=!0;return"cdkDropListDropped"===n&&(l=!1!==e.component.drop(t)&&l),l},null,null)),Ei(6144,null,gv,null,[Rv]),vi(98,1196032,null,1,Rv,[dt,dv,kt,[2,ry],[3,Ev]],{id:[0,"id"]},{dropped:"cdkDropListDropped"}),ro(603979776,1,{_draggables:1}),Ei(256,null,Ev,void 0,[]),(e()(),Jr(16777216,null,null,1,null,Iy)),vi(102,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,3,0),e(n,10,0,"help1"),e(n,12,0,"question",""),e(n,27,0,t.getEntries()),e(n,36,0,t.filterText),e(n,46,0,t.amount),e(n,53,0,"type",t.craftingTypes.SELECTED),e(n,55,0,"type",t.craftingType),e(n,63,0,"type",t.craftingTypes.UNTIL_X),e(n,65,0,"type",t.craftingType),e(n,73,0,"type",t.craftingTypes.UNTIL_PERCENT),e(n,75,0,"type",t.craftingType),e(n,83,0,"type",t.craftingTypes.CONTINUOUS),e(n,85,0,"type",t.craftingType),e(n,91,0,t.getRecipes()),e(n,98,0,"queueRecipes"),e(n,102,0,t.getQueue())},function(e,n){var t=n.component;e(n,33,0,ii(n,38).ngClassUntouched,ii(n,38).ngClassTouched,ii(n,38).ngClassPristine,ii(n,38).ngClassDirty,ii(n,38).ngClassValid,ii(n,38).ngClassInvalid,ii(n,38).ngClassPending),e(n,42,0,ii(n,48).ngClassUntouched,ii(n,48).ngClassTouched,ii(n,48).ngClassPristine,ii(n,48).ngClassDirty,ii(n,48).ngClassValid,ii(n,48).ngClassInvalid,ii(n,48).ngClassPending),e(n,51,0,ii(n,57).ngClassUntouched,ii(n,57).ngClassTouched,ii(n,57).ngClassPristine,ii(n,57).ngClassDirty,ii(n,57).ngClassValid,ii(n,57).ngClassInvalid,ii(n,57).ngClassPending),e(n,61,0,ii(n,67).ngClassUntouched,ii(n,67).ngClassTouched,ii(n,67).ngClassPristine,ii(n,67).ngClassDirty,ii(n,67).ngClassValid,ii(n,67).ngClassInvalid,ii(n,67).ngClassPending),e(n,71,0,ii(n,77).ngClassUntouched,ii(n,77).ngClassTouched,ii(n,77).ngClassPristine,ii(n,77).ngClassDirty,ii(n,77).ngClassValid,ii(n,77).ngClassInvalid,ii(n,77).ngClassPending),e(n,81,0,ii(n,87).ngClassUntouched,ii(n,87).ngClassTouched,ii(n,87).ngClassPristine,ii(n,87).ngClassDirty,ii(n,87).ngClassValid,ii(n,87).ngClassInvalid,ii(n,87).ngClassPending),e(n,95,0,t.getQueue().length,t.getQueueMaxSize()),e(n,96,0,ii(n,98).id,ii(n,98).disabled,ii(n,98)._dropListRef.isDragging(),ii(n,98)._dropListRef.isReceiving())})}function Ny(e){return So(0,[(e()(),eo(0,0,null,null,1,"app-cooking",[],null,null,null,Ay,Ry)),vi(1,114688,null,0,yy,[Cm,am,Tv,qf,kt],null,null)],function(e,n){e(n,1,0)},null)}var _y=jl("app-cooking",yy,Ny,{},{},[]),wy=function(){return function(e,n,t,l,i,r){this.id=e,this.resource=n,this.amount=t,this.buy=l,this.price=i,this.duration=r}}(),Py=function(){function e(e,n){var t=this;this.servicesService=e,this.optionsService=n,this.audios=[],this.musicFiles=["assets/sounds/medieval_life.mp3","assets/sounds/medieval_village.mp3"],e.addService(zu.SOUND,this),this.optionsService.registerForOptionsChange().subscribe(function(){var e=t.optionsService.getOption(Wf.SOUND_MASTER)&&t.optionsService.getOption(Wf.SOUND_MUSIC),n=t.optionsService.getOption(Wf.SOUND_MASTER)&&t.optionsService.getOption(Wf.SOUND_EFFECTS);t.audios.forEach(function(l){l.audio.volume=l.effect?n?t.optionsService.getOption(Wf.SOUND_MASTER_VOLUME)/100*(t.optionsService.getOption(Wf.SOUND_EFFECTS_VOLUME)/100):0:e?t.optionsService.getOption(Wf.SOUND_MASTER_VOLUME)/100*(t.optionsService.getOption(Wf.SOUND_MUSIC_VOLUME)/100):0})})}return e.prototype.playAudio=function(e,n){void 0===n&&(n=!0),this.audios=this.audios.filter(function(e){return!e.audio.ended}),e.load();var t=this.optionsService.getOption(Wf.SOUND_MASTER)&&this.optionsService.getOption(Wf.SOUND_MUSIC),l=this.optionsService.getOption(Wf.SOUND_MASTER)&&this.optionsService.getOption(Wf.SOUND_EFFECTS);return e.volume=n?l?this.optionsService.getOption(Wf.SOUND_MASTER_VOLUME)/100*(this.optionsService.getOption(Wf.SOUND_EFFECTS_VOLUME)/100):0:t?this.optionsService.getOption(Wf.SOUND_MASTER_VOLUME)/100*(this.optionsService.getOption(Wf.SOUND_MUSIC_VOLUME)/100):0,e.play(),this.audios.push({audio:e,effect:n}),e},e.prototype.playMarket=function(){this.optionsService.getOption(Wf.SOUND_EFFECT_MARKET)&&this.playAudio(new Audio("assets/sounds/village_bells.mp3"))},e.prototype.playResearch=function(){this.optionsService.getOption(Wf.SOUND_EFFECT_RESEARCH)&&this.playAudio(new Audio("assets/sounds/village_bells.mp3"))},e.prototype.playBattle=function(){this.optionsService.getOption(Wf.SOUND_EFFECT_INVASION)&&this.playAudio(new Audio("assets/sounds/battle.mp3"))},e.prototype.playMusic=function(){var e=this.servicesService;this.playAudio(new Audio(Qu.randomArrayElement(this.musicFiles)),!1).addEventListener("ended",function(){e.getService(zu.SOUND).checkForMusic()})},e.prototype.checkForMusic=function(){this.audios=this.audios.filter(function(e){return!e.audio.ended}),this.audios.find(function(e){return!e.effect})||this.playMusic()},e.ngInjectableDef=Oe({factory:function(){return new e(Ye(Vf),Ye(zf))},token:e,providedIn:"root"}),e}(),xy=function(){function e(e,n,t){this.servicesService=e,this.optionsService=n,this.gameService=t,this.rations=Ss.FOOD_RATIONS,this.clothes=Ss.CLOTHES_RATIONS,this.alcohol=Ss.ALCOHOL_RATIONS,this.logFiredWorkers=Ss.LOG_FIRED_WORKERS,this.logAutoTrade=Ss.LOG_AUTO_TRADE,this.logSickness=Ss.LOG_SICKNESS,this.logMerchant=Ss.LOG_MERCHANT,this.furClothes=Ss.ALLOW_FUR_CLOTHES,this.foodNutrition=Ss.SHOW_FOOD_NUTRITION,this.complexWorkers=Ss.COMPLEX_WORK_MANAGEMENT,this.secondHeaderRow=Ss.SECOND_HEADER_ROW,this.showFreeWorkers=Ss.SHOW_FREE_WORKERS,this.showPopulation=Ss.SHOW_POPULATION,this.showResearchProgress=Ss.SHOW_RESEARCH_PROGRESS,this.showFaith=Ss.SHOW_FAITH,this.showRaw=Ss.SHOW_RAW,this.showProcessed=Ss.SHOW_PROCESSED,this.showFood=Ss.SHOW_FOOD,this.showTools=Ss.SHOW_TOOLS,this.defaultWorkshopResearch=Ss.DEFAULT_WORKSHOP_RESEARCH,this.defaultGathererFood=Ss.DEFAULT_GATHERER_FOOD,this.switchHunterFromTaming=Ss.DEFAULT_WORKSHOP_RESEARCH,this.plowInSummer=Ss.PLOW_IN_SUMMER,e.addService(zu.MANAGEMENT,this),this.initFoodPriority()}return e.prototype.initFoodPriority=function(){var e=this;return this.foodPriority=[[]],this.servicesService.getService(zu.RESOURCES).getResourcesByType(Mu.CONSUMABLE).forEach(function(n){return e.foodPriority[0].push(n.resource)}),this.foodPriority},e.prototype.load=function(e){this.rations=e.rations,this.clothes=e.clothes,this.alcohol=e.alcohol,this.furClothes=e.furClothes,this.foodNutrition=e.foodNutrition,this.showRaw=void 0!==e.showRaw?e.showRaw:Ss.SHOW_RAW,this.showProcessed=void 0!==e.showProcessed?e.showProcessed:Ss.SHOW_PROCESSED,this.showFood=void 0!==e.showFood?e.showFood:Ss.SHOW_FOOD,this.showTools=void 0!==e.showTools?e.showTools:Ss.SHOW_TOOLS,this.complexWorkers=e.complexWorkers,this.logFiredWorkers=void 0!==e.logFiredWorkers?e.logFiredWorkers:Ss.LOG_FIRED_WORKERS,this.logAutoTrade=void 0!==e.logAutoTrade?e.logAutoTrade:Ss.LOG_AUTO_TRADE,this.logSickness=void 0!==e.logSickness?e.logSickness:Ss.LOG_SICKNESS,this.logMerchant=void 0!==e.logMerchant?e.logMerchant:Ss.LOG_MERCHANT,this.secondHeaderRow=void 0!==e.secondHeaderRow?e.secondHeaderRow:Ss.SECOND_HEADER_ROW,this.showFreeWorkers=void 0!==e.showFreeWorkers?e.showFreeWorkers:Ss.SHOW_FREE_WORKERS,this.showPopulation=void 0!==e.showPopulation?e.showPopulation:Ss.SHOW_POPULATION,this.foodPriority=void 0!==e.foodPriority?e.foodPriority:this.initFoodPriority(),this.showResearchProgress=void 0!==e.showResearchProgress?e.showResearchProgress:Ss.SHOW_RESEARCH_PROGRESS,this.showFaith=void 0!==e.showFaith?e.showFaith:Ss.SHOW_FAITH,this.defaultWorkshopResearch=void 0!==e.defaultWorkshopResearch?e.defaultWorkshopResearch:Ss.DEFAULT_WORKSHOP_RESEARCH,this.defaultGathererFood=void 0!==e.defaultGathererFood?e.defaultGathererFood:Ss.DEFAULT_GATHERER_FOOD,this.switchHunterFromTaming=void 0!==e.switchHunterFromTaming?e.switchHunterFromTaming:Ss.SWITCH_HUNTER_FROM_TAMING,this.plowInSummer=void 0!==e.plowInSummer?e.plowInSummer:Ss.PLOW_IN_SUMMER,this.validateFoodPriority(),this.gameService.updateHeader(this.secondHeaderRow)},e.prototype.save=function(){return{rations:this.rations,clothes:this.clothes,alcohol:this.alcohol,furClothes:this.furClothes,foodNutrition:this.foodNutrition,showRaw:this.showRaw,showProcessed:this.showProcessed,showFood:this.showFood,showTools:this.showTools,complexWorkers:this.complexWorkers,logFiredWorkers:this.logFiredWorkers,logAutoTrade:this.logAutoTrade,logSickness:this.logSickness,logMerchant:this.logMerchant,secondHeaderRow:this.secondHeaderRow,showFreeWorkers:this.showFreeWorkers,showPopulation:this.showPopulation,foodPriority:this.foodPriority,showResearchProgress:this.showResearchProgress,showFaith:this.showFaith,defaultWorkshopResearch:this.defaultWorkshopResearch,defaultGathererFood:this.defaultGathererFood,switchHunterFromTaming:this.switchHunterFromTaming,plowInSummer:this.plowInSummer}},e.prototype.reset=function(e,n){!this.optionsService.getOption(Wf.KEEP_MANAGEMENT_SETTINGS_ON_RESET)||e?(this.rations=Ss.FOOD_RATIONS,this.clothes=Ss.CLOTHES_RATIONS,this.alcohol=Ss.ALCOHOL_RATIONS,this.furClothes=Ss.ALLOW_FUR_CLOTHES,this.foodNutrition=Ss.SHOW_FOOD_NUTRITION,this.showRaw=Ss.SHOW_RAW,this.showProcessed=Ss.SHOW_PROCESSED,this.showFood=Ss.SHOW_FOOD,this.showTools=Ss.SHOW_TOOLS,this.complexWorkers=Ss.COMPLEX_WORK_MANAGEMENT,this.logFiredWorkers=Ss.LOG_FIRED_WORKERS,this.logAutoTrade=Ss.LOG_AUTO_TRADE,this.logSickness=Ss.LOG_SICKNESS,this.secondHeaderRow=Ss.SECOND_HEADER_ROW,this.showFreeWorkers=Ss.SHOW_FREE_WORKERS,this.showPopulation=Ss.SHOW_POPULATION,this.showResearchProgress=Ss.SHOW_RESEARCH_PROGRESS,this.showFaith=Ss.SHOW_FAITH,this.defaultWorkshopResearch=Ss.DEFAULT_WORKSHOP_RESEARCH,this.defaultGathererFood=Ss.DEFAULT_GATHERER_FOOD,this.switchHunterFromTaming=Ss.SWITCH_HUNTER_FROM_TAMING,this.plowInSummer=Ss.PLOW_IN_SUMMER,this.initFoodPriority()):(this.complexWorkers=Ss.COMPLEX_WORK_MANAGEMENT,this.validateFoodPriority()),e&&(this.complexWorkers=Ss.COMPLEX_WORK_MANAGEMENT,this.initFoodPriority()),this.gameService.updateHeader(this.secondHeaderRow)},e.prototype.getRations=function(){return this.rations},e.prototype.getClothesRations=function(){return this.clothes},e.prototype.getAlcoholRations=function(){return this.alcohol},e.prototype.setRations=function(e){this.rations=e},e.prototype.setClothesRations=function(e){this.clothes=e},e.prototype.setAlcoholRations=function(e){this.alcohol=e},e.prototype.toggleFurClothes=function(){this.furClothes=!this.furClothes},e.prototype.getFurClothes=function(){return this.furClothes},e.prototype.toggleFoodNutrition=function(){this.foodNutrition=!this.foodNutrition},e.prototype.getFoodNutrition=function(){return this.foodNutrition},e.prototype.toggleComplexWorkers=function(){this.complexWorkers=!this.complexWorkers},e.prototype.getComplexWorkers=function(){return this.complexWorkers},e.prototype.getSecondHeaderRow=function(){return this.secondHeaderRow},e.prototype.toggleSecondHeaderRow=function(){this.secondHeaderRow=!this.secondHeaderRow,this.gameService.updateHeader(this.secondHeaderRow)},e.prototype.getShowFreeWorkers=function(){return this.showFreeWorkers},e.prototype.toggleShowFreeWorkers=function(){this.showFreeWorkers=!this.showFreeWorkers},e.prototype.getShowPopulation=function(){return this.showPopulation},e.prototype.toggleShowPopulation=function(){this.showPopulation=!this.showPopulation},e.prototype.getShowResearchProgress=function(){return this.showResearchProgress},e.prototype.toggleShowResearchProgress=function(){this.showResearchProgress=!this.showResearchProgress},e.prototype.getFoodPriority=function(){if(this.gameService.isEnabled(_u.MANAGEMENT))return this.foodPriority;var e=[[]];return this.servicesService.getService(zu.RESOURCES).getResourcesByType(Mu.CONSUMABLE).forEach(function(n){return e[0].push(n.resource)}),e},e.prototype.up=function(e,n){var t=this.foodPriority[n].findIndex(function(n){return n===e});n>0?(t>=0&&(this.foodPriority[n-1].push(this.foodPriority[n][t]),this.foodPriority[n].splice(t,1)),this.clearList(this.foodPriority)):(this.foodPriority.unshift([]),this.foodPriority[0].push(this.foodPriority[1][t]),this.foodPriority[1].splice(t,1))},e.prototype.down=function(e,n){var t=this.foodPriority[n].findIndex(function(n){return n===e});t>=0&&n+1<9&&(this.foodPriority.length<n+2&&this.foodPriority.push([]),this.foodPriority[n+1].push(this.foodPriority[n][t]),this.foodPriority[n].splice(t,1)),this.clearList(this.foodPriority)},e.prototype.clearList=function(e){for(;e.length>0&&0===e[e.length-1].length;)e.splice(e.length-1,1);for(;e.length>0&&0===e[0].length;)e.splice(0,1)},e.prototype.validateFoodPriority=function(){var e=this,n=[];this.foodPriority.forEach(function(e){return e.forEach(function(e){return n.push(e)})}),Rs.getResourcesByType(Mu.CONSUMABLE).forEach(function(t){n.find(function(e){return e===Iu[t[0]]})||e.foodPriority[0].push(Iu[t[0]])})},e.prototype.getShowFaith=function(){return this.showFaith},e.prototype.toggleShowFaith=function(){this.showFaith=!this.showFaith},e.prototype.getLogFiredWorkers=function(){return this.logFiredWorkers},e.prototype.toggleLogFiredWorkers=function(){this.logFiredWorkers=!this.logFiredWorkers},e.prototype.getDefaultWorkshopResearch=function(){return this.defaultWorkshopResearch},e.prototype.toggleDefaultWorkshopResearch=function(){this.defaultWorkshopResearch=!this.defaultWorkshopResearch},e.prototype.getDefaultGathererFood=function(){return this.defaultGathererFood},e.prototype.toggleDefaultGathererFood=function(){this.defaultGathererFood=!this.defaultGathererFood},e.prototype.getSwitchHunterFromTaming=function(){return this.switchHunterFromTaming},e.prototype.toggleSwitchHunterFromTaming=function(){this.switchHunterFromTaming=!this.switchHunterFromTaming},e.prototype.getPlowInSummer=function(){return this.plowInSummer},e.prototype.togglePlowInSummer=function(){this.plowInSummer=!this.plowInSummer},e.prototype.getLogAutoTrade=function(){return this.logAutoTrade},e.prototype.toggleLogAutoTrade=function(){this.logAutoTrade=!this.logAutoTrade},e.prototype.getShowRaw=function(){return this.showRaw},e.prototype.toggleShowRaw=function(){this.showRaw=!this.showRaw},e.prototype.getShowProcessed=function(){return this.showProcessed},e.prototype.toggleShowProcessed=function(){this.showProcessed=!this.showProcessed},e.prototype.getShowFood=function(){return this.showFood},e.prototype.toggleShowFood=function(){this.showFood=!this.showFood},e.prototype.getShowTools=function(){return this.showTools},e.prototype.toggleShowTools=function(){this.showTools=!this.showTools},e.prototype.getLogSickness=function(){return this.logSickness},e.prototype.toggleLogSickness=function(){this.logSickness=!this.logSickness},e.prototype.getLogMerchant=function(){return this.logMerchant},e.prototype.toggleLogMerchant=function(){this.logMerchant=!this.logMerchant},e.ngInjectableDef=Oe({factory:function(){return new e(Ye(Vf),Ye(zf),Ye(Jf))},token:e,providedIn:"root"}),e}(),ky=function(){function e(e,n,t,l,i,r,o){var u=this;this.servicesService=e,this.calendarService=n,this.managementService=t,this.resourcesService=l,this.logService=i,this.soundService=r,this.modalService=o,this.offers=[],this.id=10,this.servicesService.addService(zu.MARKET,this),this.calendarService.registerForDayChange().subscribe(function(e){u.offers.forEach(function(e){e.duration-=1,0===e.duration&&u.autoBuy([e])}),u.offers=u.offers.filter(function(e){return e.duration>0})})}return e.prototype.autoBuy=function(e){var n=this;e.forEach(function(e){var t=e.amount,l=n.resourcesService.getResource(e.resource);if(e.buy&&l.options.autoTrade.autoBuyEnabled){var i=l.options.autoTrade.autoBuyAmount;l.options.autoTrade.autoBuyPercentage&&(i=Math.floor(l.limit*l.options.autoTrade.autoBuyAmount/100)),l.amount+(o=l.options.autoTrade.autoBuyOrder)<i&&i-l.amount>o&&(o=i-l.amount),t>o&&(t=o);var r=n.resourcesService.getLimit(e.resource);t>r&&(t=r),t>0&&n.resourcesService.decreaseResource(Iu.COINS,n.calculatePrice(e,t),"Auto trade",!0)&&(n.resourcesService.increaseResource(e.resource,t,"Auto trade",!0),l.options.autoTrade.autoBuyOrder>0&&(l.options.autoTrade.autoBuyOrder-=t,l.options.autoTrade.autoBuyOrder<0&&(l.options.autoTrade.autoBuyOrder=0)),n.managementService.getLogAutoTrade()&&n.logService.log("auto bought "+t+" "+Vu.prepareResourceName(e.resource))),e.amount===Number(t)?n.offers.splice(n.offers.indexOf(e),1):(e.price=n.calculatePrice(e,e.amount-t),e.amount-=t)}else if(!e.buy&&l.options.autoTrade.autoSellEnabled){var o,u=l.options.autoTrade.autoSellAmount;l.options.autoTrade.autoSellPercentage&&(u=Math.floor(l.limit*l.options.autoTrade.autoSellAmount/100)),u<l.amount-(o=l.options.autoTrade.autoSellOrder)&&(o=l.amount-u),t>o&&(t=o),t>0&&n.resourcesService.decreaseResource(e.resource,t,"Auto trade",!0)&&(n.resourcesService.increaseResource(Iu.COINS,n.calculatePrice(e,t),"Auto trade",!0),l.options.autoTrade.autoSellOrder>0&&(l.options.autoTrade.autoSellOrder-=t,l.options.autoTrade.autoSellOrder<0&&(l.options.autoTrade.autoSellOrder=0)),n.managementService.getLogAutoTrade()&&n.logService.log("auto sold "+t+" "+Vu.prepareResourceName(e.resource))),e.amount===Number(t)?n.offers.splice(n.offers.indexOf(e),1):(e.price=n.calculatePrice(e,e.amount-t),e.amount-=t)}})},e.prototype.nextId=function(){return this.id+=1,this.id-1},e.prototype.load=function(e){this.offers=e.offers,this.id=e.id},e.prototype.save=function(){return{offers:this.offers,id:this.id}},e.prototype.reset=function(e,n){this.offers=[],this.id=10},e.prototype.getOffers=function(){return this.offers},e.prototype.accept=function(e){var n=this,t=this.offers.find(function(n){return n.id===e}),l=!1;if(t){this.modalService.open(ju.MARKET),this.modalService.setModalValue(t);var i=this.modalService.registerForValueResponse().subscribe(function(e){if(i.unsubscribe(),null!==e&&!isNaN(e)){if(e>t.amount&&(e=t.amount),t.buy)if(e>n.resourcesService.getLimit(t.resource)){n.modalService.open(ju.CONFIRM),n.modalService.setModalText("Selected amount exceeds available warehouse space.<br>Would you like to buy anyway?");var r=n.modalService.registerForConfirmation().subscribe(function(l){if(r.unsubscribe(),l){if(!n.resourcesService.decreaseResource(Iu.COINS,n.calculatePrice(t,e),"Market",!0))return void n.modalService.info("Not enough coins to buy "+e+" "+Vu.prepareResourceName(t.resource));n.resourcesService.increaseResource(t.resource,e,"Market",!0),t.amount===Number(e)?n.offers.splice(n.offers.indexOf(t),1):(t.price=n.calculatePrice(t,t.amount-e),t.amount-=e)}})}else{if(!n.resourcesService.decreaseResource(Iu.COINS,n.calculatePrice(t,e),"Market",!0))return void n.modalService.info("Not enough coins to buy "+e+" "+Vu.prepareResourceName(t.resource));n.resourcesService.increaseResource(t.resource,e,"Market",!0),l=!0}else{if(!n.resourcesService.decreaseResource(t.resource,e,"Market",!0))return void n.modalService.info("Not enough resources to sell");n.resourcesService.increaseResource(Iu.COINS,n.calculatePrice(t,e),"Market",!0),l=!0}l&&(t.amount===Number(e)?n.offers.splice(n.offers.indexOf(t),1):(t.price=n.calculatePrice(t,t.amount-e),t.amount-=e))}})}else this.modalService.info("Market offer not found")},e.prototype.callMerchant=function(){for(var e=Array.from(this.resourcesService.getResources().values()).filter(function(e){return e.isVisible()}).map(function(e){return{item:e.resource,chance:e.prioritise?15:1}}),n=Qu.randomBetween(3,8),t=Qu.randomBetween(50,180),l=0;l<n;l++){var i=Qu.randomWeightedExcept(e,[Iu.COINS]),r=Qu.randomBetween(5,20),o=Qu.randomBetween(0,1),u=Qu.randomBetween(-5,25),s=Rs.getResource(i).TRADE_VALUE*r;0===(s=o?Math.floor(s*(1+u/100)):Math.floor(s*(1-u/100)))?l--:this.offers.push(new wy(this.nextId(),i,r,!!o,s,t))}this.managementService.getLogMerchant()&&this.logService.log("Merchant arrived"),this.soundService.playMarket(),this.autoBuy(this.offers)},e.prototype.calculatePrice=function(e,n){return e.buy?Math.ceil(n/e.amount*e.price):Math.floor(n/e.amount*e.price)},e.ngInjectableDef=Oe({factory:function(){return new e(Ye(Vf),Ye(jf),Ye(xy),Ye(am),Ye($f),Ye(Py),Ye(qf))},token:e,providedIn:"root"}),e}(),My=function(){function e(e,n,t){this.marketService=e,this.villageService=n,this.resourcesService=t,this.filterText="",this.typeRadio="all"}return e.prototype.ngOnInit=function(){},e.prototype.getOffers=function(){var e,n=this;return e=null!==this.filterText&&this.filterText.length>0?this.marketService.getOffers().filter(function(e){return Vu.prepareResourceName(e.resource).toLowerCase().includes(n.filterText)}):this.marketService.getOffers(),"buy"===this.typeRadio?e=e.filter(function(e){return e.buy}):"sell"===this.typeRadio&&(e=e.filter(function(e){return!e.buy})),e},e.prototype.getCoins=function(){return this.resourcesService.getResource(Iu.COINS).amount},e.prototype.accept=function(e){this.marketService.accept(e)},e.prototype.isMarketBuilt=function(){return void 0!==this.villageService.getBuildings().find(function(e){return e.getBuildingType()===wu.MARKETPLACE})},e.prototype.getResourceName=function(e){return Vu.prepareResourceName(e)},e.prototype.calculatePiecePrice=function(e){return this.marketService.calculatePrice(e,1)},e.prototype.getResourceAmount=function(e){return this.resourcesService.getResource(e.resource).amount},e.prototype.getResourceLimit=function(e){return this.resourcesService.getResource(e.resource).limit},e}(),Dy=rl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{margin:.5%;height:100%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}.boxTitle[_ngcontent-%COMP%]{text-align:center;border-bottom:2px solid #000}#side[_ngcontent-%COMP%]{float:right;font-size:1em;width:25%;margin:.5%;display:inline-block;vertical-align:bottom}#side[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:.8em;margin:0;padding:0;border:none;outline:0}#headers[_ngcontent-%COMP%]{margin:3px 3px 0;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;width:96.5%;text-align:center;font-size:1em;font-weight:700}#headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 24%;padding:2px;border:1px solid #000;border-left:none}#headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-of-type{border-left:1px solid #000}#market[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;border:2px solid #000;height:91.5%}#offersBox[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 0 85%;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;border-right:2px solid #000;height:100%;font-size:1.2em}#filterBox[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 0 15%;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:100%;font-size:1.2em}#offers[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;text-align:center;height:100%;overflow-y:auto}.offer[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 auto;width:98%;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;border:1px solid #000;margin:3px}.offer[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 24%;padding:2px}.offer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:.8em}#filters[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center}#filter[_ngcontent-%COMP%]{width:90%}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center}.icon2[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}#noMarket[_ngcontent-%COMP%]{margin-left:112px;color:var(--negative-colour)}"]],data:{}});function Ly(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[["id","noMarket"]],null,null,null,null,null)),(e()(),fo(-1,null,["No Marketplace available. No merchant will visit."]))],null,null)}function Fy(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(1,null,[""," buy offer"]))],null,function(e,n){e(n,1,0,n.component.getResourceName(n.parent.context.$implicit.resource))})}function Uy(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(1,null,[""," sell offer"]))],null,function(e,n){e(n,1,0,n.component.getResourceName(n.parent.context.$implicit.resource))})}function Hy(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.accept(e.parent.context.$implicit.id)&&l),l},null,null)),(e()(),fo(-1,null,["Buy"]))],null,null)}function Gy(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.accept(e.parent.context.$implicit.id)&&l),l},null,null)),(e()(),fo(-1,null,["Sell"]))],null,null)}function By(e){return So(0,[(e()(),eo(0,0,null,null,28,"div",[["appTooltip",""],["class","offer tooltip"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==ii(e,1).onmousemove(t)&&l),l},null,null)),vi(1,16384,null,0,Pg,[],{elementId:[0,"elementId"]},null),(e()(),eo(2,0,null,null,11,"span",[["class","tooltipOffer"]],[[8,"id",0]],null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,Fy)),vi(4,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,Uy)),vi(6,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(7,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),fo(8,null,[" total price: ",""])),(e()(),eo(9,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),fo(10,null,[" piece price: ",""])),(e()(),eo(11,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(12,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),fo(13,null,[" storage: ","/"," "])),(e()(),eo(14,0,null,null,3,"div",[["class","icon2 "]],null,null,null,null,null)),(e()(),fo(15,null,[" "," "])),(e()(),eo(16,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(17,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),eo(18,0,null,null,3,"div",[["class","icon2"]],null,null,null,null,null)),(e()(),fo(19,null,[" "," "])),(e()(),eo(20,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(21,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),eo(22,0,null,null,1,"div",[["class","icon2"]],null,null,null,null,null)),(e()(),fo(23,null,[" "," days "])),(e()(),eo(24,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,Hy)),vi(26,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,Gy)),vi(28,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,n.context.$implicit.id),e(n,4,0,n.context.$implicit.buy),e(n,6,0,!n.context.$implicit.buy),e(n,17,0,t.getResourceName(n.context.$implicit.resource),"resources"),e(n,21,0,"coins","resources"),e(n,26,0,n.context.$implicit.buy),e(n,28,0,!n.context.$implicit.buy)},function(e,n){var t=n.component;e(n,2,0,xl(1,"",n.context.$implicit.id,"")),e(n,8,0,n.context.$implicit.price),e(n,10,0,t.calculatePiecePrice(n.context.$implicit)),e(n,13,0,t.getResourceAmount(n.context.$implicit),t.getResourceLimit(n.context.$implicit)),e(n,15,0,n.context.$implicit.amount),e(n,19,0,n.context.$implicit.price),e(n,23,0,n.context.$implicit.duration)})}function Vy(e){return So(0,[(e()(),eo(0,0,null,null,67,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),eo(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["Market"])),(e()(),eo(4,0,null,null,5,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(5,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(6,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),fo(7,null,[" "," "])),(e()(),Jr(16777216,null,null,1,null,Ly)),vi(9,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(10,0,null,null,57,"div",[["id","market"]],null,null,null,null,null)),(e()(),eo(11,0,null,null,15,"div",[["id","offersBox"]],null,null,null,null,null)),(e()(),eo(12,0,null,null,2,"div",[["class","boxTitle"]],null,null,null,null,null)),(e()(),eo(13,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["Offers"])),(e()(),eo(15,0,null,null,8,"div",[["id","headers"]],null,null,null,null,null)),(e()(),eo(16,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["offer"])),(e()(),eo(18,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["price"])),(e()(),eo(20,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["duration"])),(e()(),eo(22,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["buy/sell"])),(e()(),eo(24,0,null,null,2,"div",[["id","offers"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,By)),vi(26,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),eo(27,0,null,null,40,"div",[["id","filterBox"]],null,null,null,null,null)),(e()(),eo(28,0,null,null,2,"div",[["class","boxTitle"]],null,null,null,null,null)),(e()(),eo(29,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["Filters"])),(e()(),eo(31,0,null,null,36,"div",[["id","filters"]],null,null,null,null,null)),(e()(),eo(32,0,null,null,5,"input",[["id","filter"],["placeholder","search"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,33)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,33).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,33)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,33)._compositionEnd(t.target.value)&&l),"ngModelChange"===n&&(l=!1!==(i.filterText=t)&&l),l},null,null)),vi(33,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),Ei(1024,null,Lg,function(e){return[e]},[Hg]),vi(35,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(37,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(38,0,null,null,29,"div",[],null,null,null,null,null)),(e()(),eo(39,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),eo(40,0,null,null,6,"input",[["name","type"],["type","radio"],["value","all"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,41)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,41).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,41)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,41)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==ii(e,42).onChange()&&l),"blur"===n&&(l=!1!==ii(e,42).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.typeRadio=t)&&l),l},null,null)),vi(41,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),vi(42,212992,null,0,nf,[St,dt,ef,Xe],{name:[0,"name"],value:[1,"value"]},null),Ei(1024,null,Lg,function(e,n){return[e,n]},[Hg,nf]),vi(44,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(46,16384,null,0,zg,[[4,Wg]],null,null),(e()(),fo(-1,null,[" All "])),(e()(),eo(48,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(49,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),eo(50,0,null,null,6,"input",[["name","type"],["type","radio"],["value","buy"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,51)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,51).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,51)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,51)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==ii(e,52).onChange()&&l),"blur"===n&&(l=!1!==ii(e,52).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.typeRadio=t)&&l),l},null,null)),vi(51,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),vi(52,212992,null,0,nf,[St,dt,ef,Xe],{name:[0,"name"],value:[1,"value"]},null),Ei(1024,null,Lg,function(e,n){return[e,n]},[Hg,nf]),vi(54,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(56,16384,null,0,zg,[[4,Wg]],null,null),(e()(),fo(-1,null,[" Buy "])),(e()(),eo(58,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(59,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),eo(60,0,null,null,6,"input",[["name","type"],["type","radio"],["value","sell"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,61)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,61).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,61)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,61)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==ii(e,62).onChange()&&l),"blur"===n&&(l=!1!==ii(e,62).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.typeRadio=t)&&l),l},null,null)),vi(61,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),vi(62,212992,null,0,nf,[St,dt,ef,Xe],{name:[0,"name"],value:[1,"value"]},null),Ei(1024,null,Lg,function(e,n){return[e,n]},[Hg,nf]),vi(64,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(66,16384,null,0,zg,[[4,Wg]],null,null),(e()(),fo(-1,null,[" Sell "]))],function(e,n){var t=n.component;e(n,6,0,"coins","resources"),e(n,9,0,!t.isMarketBuilt()),e(n,26,0,t.getOffers()),e(n,35,0,t.filterText),e(n,42,0,"type","all"),e(n,44,0,"type",t.typeRadio),e(n,52,0,"type","buy"),e(n,54,0,"type",t.typeRadio),e(n,62,0,"type","sell"),e(n,64,0,"type",t.typeRadio)},function(e,n){e(n,7,0,n.component.getCoins()),e(n,32,0,ii(n,37).ngClassUntouched,ii(n,37).ngClassTouched,ii(n,37).ngClassPristine,ii(n,37).ngClassDirty,ii(n,37).ngClassValid,ii(n,37).ngClassInvalid,ii(n,37).ngClassPending),e(n,40,0,ii(n,46).ngClassUntouched,ii(n,46).ngClassTouched,ii(n,46).ngClassPristine,ii(n,46).ngClassDirty,ii(n,46).ngClassValid,ii(n,46).ngClassInvalid,ii(n,46).ngClassPending),e(n,50,0,ii(n,56).ngClassUntouched,ii(n,56).ngClassTouched,ii(n,56).ngClassPristine,ii(n,56).ngClassDirty,ii(n,56).ngClassValid,ii(n,56).ngClassInvalid,ii(n,56).ngClassPending),e(n,60,0,ii(n,66).ngClassUntouched,ii(n,66).ngClassTouched,ii(n,66).ngClassPristine,ii(n,66).ngClassDirty,ii(n,66).ngClassValid,ii(n,66).ngClassInvalid,ii(n,66).ngClassPending)})}function Wy(e){return So(0,[(e()(),eo(0,0,null,null,1,"app-market",[],null,null,null,Vy,Dy)),vi(1,114688,null,0,My,[ky,kE,am],null,null)],function(e,n){e(n,1,0)},null)}var zy=jl("app-market",My,Wy,{},{},[]),Yy=function(){function e(e,n,t,l,i,r,o,u,s,a){void 0===s&&(s=function(){}),void 0===a&&(a=0),this.tech=e,this.category=n,this.prerequisites=t,this.flagPrerequisites=l,this.cost=i,this.requiredResearchPoints=r,this.description=o,this.finishDescription=u,this.researchPoints=a,this.finishFunction=s}return e.prototype.getTech=function(){return this.tech},e.prototype.getTechName=function(){return Vu.prepareTechName(this.tech)},e.prototype.isResearched=function(){return this.researchPoints>=this.requiredResearchPoints&&(this.researchPoints=this.requiredResearchPoints),this.researchPoints===this.requiredResearchPoints},e.prototype.getCategory=function(){return this.category},e.prototype.getDescription=function(){return this.description},e.prototype.getResearchPointsDue=function(){return this.requiredResearchPoints-this.researchPoints},e.prototype.addResearchPoints=function(e){this.researchPoints+=e,this.researchPoints>this.requiredResearchPoints&&(this.researchPoints=this.requiredResearchPoints)},e.prototype.getResearchPoints=function(){return this.researchPoints},e.prototype.setResearchPoints=function(e){this.researchPoints=e},e.prototype.setResearched=function(){this.researchPoints=this.requiredResearchPoints},e.prototype.getCost=function(){return this.cost},e.prototype.clearCost=function(){this.cost=new Map},e.prototype.getPrerequisites=function(){return this.prerequisites},e.prototype.getFlagPrerequisites=function(){return this.flagPrerequisites},e.prototype.getFinishFunction=function(){return this.finishFunction},e.prototype.getRequiredResearchPoints=function(){return this.requiredResearchPoints},e.prototype.getFinishDescription=function(){return this.finishDescription},e}(),Ky=function(){function e(){this.prerequisites=[],this.flagPrerequisites=[],this.cost=new Map,this.researchPoints=0,this.finishFunction=function(){}}return e.prototype.forTech=function(e){return this.tech=e,this},e.prototype.withCategory=function(e){return this.category=e,this},e.prototype.withPrerequisite=function(e){return this.prerequisites.push(e),this},e.prototype.withPrerequisites=function(e){var n=this;return e.forEach(function(e){return n.prerequisites.push(e)}),this},e.prototype.withFlagPrerequisite=function(e){return this.flagPrerequisites.push(e),this},e.prototype.withFlagPrerequisites=function(e){var n=this;return e.forEach(function(e){return n.flagPrerequisites.push(e)}),this},e.prototype.withCost=function(e,n){return this.cost.set(e,n),this},e.prototype.withCosts=function(e){var n=this;return e.forEach(function(e,t){return n.cost.set(t,e)}),this},e.prototype.withResearchPoints=function(e){return this.researchPoints=e,this},e.prototype.withDescription=function(e){return this.description=e,this},e.prototype.withFinishDescription=function(e){return this.finishDescription=e,this},e.prototype.withFinishFunction=function(e){return this.finishFunction=e,this},e.prototype.build=function(){var e=new Yy(this.tech,this.category,this.prerequisites,this.flagPrerequisites,this.cost,this.researchPoints,this.description,this.finishDescription,this.finishFunction);return this.tech=void 0,this.category=void 0,this.prerequisites=[],this.flagPrerequisites=[],this.cost=new Map,this.researchPoints=0,this.description=void 0,this.finishDescription=void 0,this.finishFunction=function(){},e},e}(),jy=function(){function e(e,n,t,l,i,r){this.servicesService=e,this.modalService=n,this.resourcesService=t,this.logService=l,this.soundService=i,this.gameService=r,this.techUpdate=new D,this.techList=[],this.techDone=[],this.techQueue=[],this.techStarted=[],this.techQueueSize=1,this.foresight=0,this.showDone=!1,this.servicesService.addService(zu.RESEARCH,this),this.init()}return e.prototype.init=function(){var e=this;this.techList=[];var n=new Ky;Object.entries(Ts).forEach(function(t){n.forTech(Nu[t[0]]).withCategory(t[1].CATEGORY).withFinishFunction(t[1].FINISH).withResearchPoints(t[1].RESEARCH_POINT).withPrerequisites(t[1].PREREQUISITES).withFlagPrerequisites(t[1].FLAG_PREREQUISITES?t[1].FLAG_PREREQUISITES:[]).withDescription(t[1].DESCRIPTION).withFinishDescription(t[1].FINISH_DESCRIPTION),t[1].COST.forEach(function(e){return n.withCost(e.resource,e.amount)}),e.techList.push(n.build())})},e.prototype.isResearched=function(e){return null!=this.techDone.find(function(n){return n===e})},e.prototype.startResearch=function(e){var n=this;if(!this.techQueue.find(function(n){return n.getTech()===e})){var t=this.techList.find(function(n){return n.getTech()===e}),l=!0,i="";if(t.getPrerequisites().forEach(function(e){n.techDone.includes(e)||n.techQueue.find(function(n){return n.getTech()===e})||(l=!1,i+=Vu.prepareTechName(e)+" not researched!<br>")}),t.getFlagPrerequisites().forEach(function(e){n.gameService.isEnabled(e)||(l=!1,i+=Vu.prepareFlagName(e)+" not unlocked!<br>")}),l){this.modalService.open(ju.RESEARCH_UNLOCK),this.modalService.setTech(this.techList.find(function(n){return n.getTech()===e}));var r=this.modalService.registerForConfirmation().subscribe(function(t){if(r.unsubscribe(),t){var l=n.techList.find(function(n){return n.getTech()===e});if(!n.techStarted.find(function(n){return n[0]===e})){var i=!0,o="";if(Array.from(l.getCost().entries()).forEach(function(e){var t=n.resourcesService.hasResource(e[0],e[1],"Research",!0);0!==t&&(o+="Missing "+t+" "+Vu.prepareResourceName(e[0])+"!<br>",i=!1)}),!i)return void n.modalService.info(o)}var u=!0,s="";if(Array.from(l.getCost().entries()).forEach(function(e){var t=n.resourcesService.hasResource(e[0],e[1],"Research",!0);0!==t&&(s+="Missing "+t+" "+Vu.prepareResourceName(e[0])+"!<br>",u=!1)}),!u)return void n.modalService.info(s);n.resourcesService.decreaseResources(l.getCost(),"Research",!0);var a=n.techList.find(function(n){return n.getTech()===e});a.clearCost(),n.techStarted.find(function(e){return e[0]===a.getTech()})||n.techStarted.push([a.getTech(),a.getResearchPoints()]),n.techQueue.push(a)}})}else this.modalService.info(i)}},e.prototype.progressTech=function(e){var n=this;this.techQueue.length>0&&(this.techQueue[0].addResearchPoints(e),this.techQueue[0].isResearched()&&(this.logService.log(this.techQueue[0].getTechName()+" researched"),this.soundService.playResearch(),this.techQueue[0].getFinishFunction()(this.servicesService),this.techDone.push(this.techQueue[0].getTech()),this.techStarted=this.techStarted.filter(function(e){return e[0]!==n.techQueue[0].getTech()}),this.techQueue.shift()),this.techUpdate.next())},e.prototype.save=function(){var e=this,n=[];return this.techQueue.forEach(function(t){n.push(t.getTech());var l=e.techStarted.find(function(e){return e[0]===t.getTech()});l&&(l[1]=t.getResearchPoints())}),{foresight:this.foresight,showDone:this.showDone,techDone:this.techDone,techStarted:this.techStarted,techQueue:n,techQueueSize:this.techQueueSize}},e.prototype.load=function(e){var n=this;this.init(),this.foresight=e.foresight,this.showDone=void 0!==e.showDone&&e.showDone,this.techDone=e.techDone,this.techStarted=e.techStarted,this.techQueueSize=void 0!==e.techQueueSize?e.techQueueSize:1,this.techDone.forEach(function(e){return n.techList.find(function(n){return n.getTech()===e}).setResearched()}),this.techStarted.forEach(function(e){var t=n.techList.find(function(n){return n.getTech()===e[0]});t&&(t.clearCost(),t.setResearchPoints(e[1]))}),this.techQueue=[],e.techQueue?e.techQueue.forEach(function(e){n.techQueue.push(n.techList.find(function(n){return n.getTech()===e}))}):e.currentResearchTech&&this.techQueue.push(this.techList.find(function(n){return n.getTech()===e.currentResearchTech})),this.techDone.includes(Nu.BARRACKS)&&!this.gameService.isEnabled(_u.BARRACKS)&&(this.gameService.enable(_u.BARRACKS),this.logService.log("Barracks invented")),this.techDone.includes(Nu.COPPER_TOOLS)&&this.servicesService.getService(zu.RECIPE).enable(Yu.COPPER_NAILS),this.techDone.includes(Nu.BRONZE_TOOLS)&&this.servicesService.getService(zu.RECIPE).enable(Yu.BRONZE_NAILS),this.techDone.includes(Nu.IRON_TOOLS)&&this.servicesService.getService(zu.RECIPE).enable(Yu.IRON_NAILS)},e.prototype.reset=function(e,n){this.techList=[],this.techDone=[],this.techStarted=[],this.techQueue=[],this.techQueueSize=1,this.foresight=0,this.showDone=!1,this.init()},e.prototype.getTech=function(){var e=this;return this.techList.filter(function(n){if(e.techDone.includes(n.getTech()))return e.showDone;var t=!0;return n.getPrerequisites().forEach(function(n){e.checkPrerequisite(n,e.foresight)||(t=!1)}),t})},e.prototype.checkPrerequisite=function(e,n){var t=this;if(this.techDone.includes(e))return!0;if(n>0){var l=!0;return this.techList.find(function(n){return n.getTech()===e}).getPrerequisites().forEach(function(e){t.checkPrerequisite(e,n-1)||(l=!1)}),l}return!1},e.prototype.getCurrentResearch=function(){return this.techQueue.length>0?this.techQueue[0]:null},e.prototype.increaseForesight=function(e){this.foresight+=1},e.prototype.isResearchStarted=function(){return this.techQueue.length>0},e.prototype.getTechPrerequisites=function(e){var n=this,t=[];return e.getPrerequisites().forEach(function(e){n.techDone.includes(e)||t.push(e)}),t},e.prototype.registerForUpdate=function(){return this.techUpdate.asObservable()},e.prototype.getForesight=function(){return this.foresight},e.prototype.getTechFlagPrerequisites=function(e){var n=this,t=[];return e.getFlagPrerequisites().forEach(function(e){n.gameService.isEnabled(e)||t.push(e)}),t},e.prototype.finishTech=function(e){this.techDone.push(e);var n=this.techList.find(function(n){return n.getTech()===e});n&&(this.logService.log(n.getTechName()+" researched"),n.setResearchPoints(n.getRequiredResearchPoints()),n.getFinishFunction()(this.servicesService)),this.techQueue=this.techQueue.filter(function(n){return n.getTech()!==e}),this.techUpdate.next()},e.prototype.toggleShowDone=function(){this.showDone=!this.showDone},e.prototype.shouldShowDone=function(){return this.showDone},e.prototype.getTechQueue=function(){return this.techQueue},e.prototype.removeFromQueue=function(e){var n=this;this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Remove research from the queue?");var t=this.modalService.registerForConfirmation().subscribe(function(l){if(t.unsubscribe(),l){var i=n.techStarted.find(function(n){return n[0]===e.getTech()});i?i[1]=e.getResearchPoints():n.techStarted.push([e.getTech(),e.getResearchPoints()]),n.techQueue.splice(n.techQueue.indexOf(e),1);var r=null;do{r&&(n.techQueue.splice(n.techQueue.indexOf(r),1),r=null),n.techQueue.forEach(function(e){if(null===r){var t=n.techList.find(function(n){return n.getTech()===e.getTech()}),l=!0;t.getPrerequisites().forEach(function(e){n.techDone.includes(e)||n.techQueue.find(function(n){return n.getTech()===e})||(l=!1)}),t.getFlagPrerequisites().forEach(function(e){n.gameService.isEnabled(e)||(l=!1)}),l||(r=e)}})}while(null!==r)}})},e.prototype.increaseTechQueueSize=function(){this.techQueueSize+=1},e.prototype.getTechQueueSize=function(){return this.techQueueSize},e.prototype.hasQueueSpace=function(){return this.getTechQueue().length<this.techQueueSize+this.foresight},e.prototype.getTechDone=function(){return this.techDone},e.ngInjectableDef=Oe({factory:function(){return new e(Ye(Vf),Ye(qf),Ye(am),Ye($f),Ye(Py),Ye(Jf))},token:e,providedIn:"root"}),e}(),$y=function(){function e(n,t){this.techService=n,this.resourcesService=t,this.id=e.randomId()}return e.randomId=function(){return Math.random()},e.prototype.ngOnDestroy=function(){this.updateSubscription&&this.updateSubscription.unsubscribe()},e.prototype.ngOnInit=function(){var e=this;this.updateSubscription=this.techService.registerForUpdate().subscribe(function(){e.progressRef&&(e.progressRef.nativeElement.style.width=e.tech.getResearchPoints()/e.tech.getRequiredResearchPoints()*100+"%")})},e.prototype.ngAfterViewInit=function(){this.progressRef&&(this.progressRef.nativeElement.style.width=this.tech.getResearchPoints()/this.tech.getRequiredResearchPoints()*100+"%")},e.prototype.ngOnChanges=function(){this.progressRef&&(this.progressRef.nativeElement.style.width=this.tech.getResearchPoints()/this.tech.getRequiredResearchPoints()*100+"%")},e.prototype.getResourceName=function(e){return Vu.prepareResourceName(e)},e.prototype.start=function(){this.techService.startResearch(this.tech.getTech())},e.prototype.getPrerequisiteName=function(e){return Vu.prepareTechName(e)},e.prototype.getMissingPrerequisites=function(){return this.techService.getTechPrerequisites(this.tech)},e.prototype.hasResource=function(e){return 0===this.resourcesService.hasResource(e.key,e.value,"Research",!0)},e.prototype.getMissingFlagPrerequisites=function(){return this.techService.getTechFlagPrerequisites(this.tech)},e.prototype.getFlagPrerequisiteName=function(e){return Vu.prepareFlagName(e)},e}(),Qy=rl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #000}#researched[_ngcontent-%COMP%]{display:inline-block;width:100%;padding:3px;text-align:center;cursor:initial;border:1px solid #000}#wrapperNotAvailable[_ngcontent-%COMP%]{display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #57575a}#titleGrey[_ngcontent-%COMP%]{display:inline-block;color:#57575a}.notMet[_ngcontent-%COMP%]{color:var(--negative-colour)}.title[_ngcontent-%COMP%]{text-align:left}hr[_ngcontent-%COMP%]{border-color:#000}#progress[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background-color:var(--active-colour);z-index:1}#finished[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;width:100%;background-color:var(--active-colour);z-index:1}#text[_ngcontent-%COMP%]{position:relative;z-index:2}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}"]],data:{}});function qy(e){return So(0,[(e()(),eo(0,0,null,null,7,"div",[["appTooltip",""],["class","tooltip"],["id","researched"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==ii(e,1).onmousemove(t)&&l),l},null,null)),vi(1,16384,null,0,Pg,[],{elementId:[0,"elementId"]},null),(e()(),eo(2,0,[[1,0],["progress",1]],null,0,"div",[["id","finished"]],null,null,null,null,null)),(e()(),eo(3,0,null,null,1,"div",[["id","text"]],null,null,null,null,null)),(e()(),fo(4,null,["",""])),(e()(),eo(5,0,null,null,2,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),fo(6,null,[" ",""])),(e()(),eo(7,0,null,null,0,"br",[],null,null,null,null,null))],function(e,n){e(n,1,0,n.component.id)},function(e,n){var t=n.component;e(n,4,0,t.tech.getTechName()),e(n,5,0,xl(1,"",t.id,"")),e(n,6,0,t.tech.getFinishDescription())})}function Xy(e){return So(0,[(e()(),eo(0,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),fo(-1,null,["Cost:"])),(e()(),eo(2,0,null,null,0,"br",[],null,null,null,null,null))],null,null)}function Zy(e){return So(0,[(e()(),eo(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.value)})}function Jy(e){return So(0,[(e()(),eo(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"div",[["class","notMet"]],null,null,null,null,null)),(e()(),fo(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.value)})}function eR(e){return So(0,[(e()(),eo(0,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,Zy)),vi(2,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,Jy)),vi(4,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(5,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(6,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){var t=n.component;e(n,2,0,t.hasResource(n.context.$implicit)),e(n,4,0,!t.hasResource(n.context.$implicit)),e(n,6,0,t.getResourceName(n.context.$implicit.key),"resources")},null)}function nR(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(1,null,[" "," "]))],null,function(e,n){e(n,1,0,n.component.getPrerequisiteName(n.context.$implicit))})}function tR(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(1,null,[" "," "]))],null,function(e,n){e(n,1,0,n.component.getFlagPrerequisiteName(n.context.$implicit))})}function lR(e){return So(0,[(e()(),eo(0,0,null,null,7,"div",[["class","prerequisites"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),fo(-1,null,["Prerequisites:"])),(e()(),eo(3,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,nR)),vi(5,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),Jr(16777216,null,null,1,null,tR)),vi(7,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,5,0,t.getMissingPrerequisites()),e(n,7,0,t.getMissingFlagPrerequisites())},null)}function iR(e){return So(0,[(e()(),eo(0,0,null,null,17,"div",[["appTooltip",""],["class","tooltip"],["id","wrapper"]],null,[[null,"click"],[null,"mousemove"]],function(e,n,t){var l=!0,i=e.component;return"mousemove"===n&&(l=!1!==ii(e,1).onmousemove(t)&&l),"click"===n&&(l=!1!==i.start()&&l),l},null,null)),vi(1,16384,null,0,Pg,[],{elementId:[0,"elementId"]},null),(e()(),eo(2,0,[[1,0],["progress",1]],null,0,"div",[["id","progress"]],null,null,null,null,null)),(e()(),eo(3,0,null,null,1,"div",[["id","text"]],null,null,null,null,null)),(e()(),fo(4,null,["",""])),(e()(),eo(5,0,null,null,12,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),fo(6,null,[" ",""])),(e()(),eo(7,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(8,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),eo(9,0,null,null,1,"div",[["class","title"]],null,null,null,null,null)),(e()(),fo(10,null,["Research points: ","/",""])),(e()(),Jr(16777216,null,null,1,null,Xy)),vi(12,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,2,null,eR)),vi(14,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),Si(0,fa,[xt]),(e()(),Jr(16777216,null,null,1,null,lR)),vi(17,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.id),e(n,12,0,t.tech.getCost().size>0),e(n,14,0,tl(n,14,0,ii(n,15).transform(t.tech.getCost()))),e(n,17,0,t.getMissingPrerequisites().length>0||t.getMissingFlagPrerequisites().length>0)},function(e,n){var t=n.component;e(n,4,0,t.tech.getTechName()),e(n,5,0,xl(1,"",t.id,"")),e(n,6,0,t.tech.getDescription()),e(n,10,0,t.tech.getResearchPoints(),t.tech.getRequiredResearchPoints())})}function rR(e){return So(0,[(e()(),eo(0,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),fo(-1,null,["Cost:"])),(e()(),eo(2,0,null,null,0,"br",[],null,null,null,null,null))],null,null)}function oR(e){return So(0,[(e()(),eo(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.value)})}function uR(e){return So(0,[(e()(),eo(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"div",[["class","notMet"]],null,null,null,null,null)),(e()(),fo(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.value)})}function sR(e){return So(0,[(e()(),eo(0,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,oR)),vi(2,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,uR)),vi(4,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(5,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(6,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){var t=n.component;e(n,2,0,t.hasResource(n.context.$implicit)),e(n,4,0,!t.hasResource(n.context.$implicit)),e(n,6,0,t.getResourceName(n.context.$implicit.key),"resources")},null)}function aR(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(1,null,[" "," "]))],null,function(e,n){e(n,1,0,n.component.getPrerequisiteName(n.context.$implicit))})}function cR(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(1,null,[" "," "]))],null,function(e,n){e(n,1,0,n.component.getFlagPrerequisiteName(n.context.$implicit))})}function pR(e){return So(0,[(e()(),eo(0,0,null,null,7,"div",[["class","prerequisites"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),fo(-1,null,["Prerequisites:"])),(e()(),eo(3,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,aR)),vi(5,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),Jr(16777216,null,null,1,null,cR)),vi(7,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,5,0,t.getMissingPrerequisites()),e(n,7,0,t.getMissingFlagPrerequisites())},null)}function hR(e){return So(0,[(e()(),eo(0,0,null,null,16,"div",[["appTooltip",""],["class","tooltip"],["id","wrapperNotAvailable"]],null,[[null,"click"],[null,"mousemove"]],function(e,n,t){var l=!0,i=e.component;return"mousemove"===n&&(l=!1!==ii(e,1).onmousemove(t)&&l),"click"===n&&(l=!1!==i.start()&&l),l},null,null)),vi(1,16384,null,0,Pg,[],{elementId:[0,"elementId"]},null),(e()(),eo(2,0,null,null,1,"div",[["id","titleGrey"]],null,null,null,null,null)),(e()(),fo(3,null,["",""])),(e()(),eo(4,0,null,null,12,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),fo(5,null,[" ",""])),(e()(),eo(6,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(7,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),eo(8,0,null,null,1,"div",[["class","title"]],null,null,null,null,null)),(e()(),fo(9,null,["Research points: ","/",""])),(e()(),Jr(16777216,null,null,1,null,rR)),vi(11,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,2,null,sR)),vi(13,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),Si(0,fa,[xt]),(e()(),Jr(16777216,null,null,1,null,pR)),vi(16,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.id),e(n,11,0,t.tech.getCost().size>0),e(n,13,0,tl(n,13,0,ii(n,14).transform(t.tech.getCost()))),e(n,16,0,t.getMissingPrerequisites().length>0||t.getMissingFlagPrerequisites().length>0)},function(e,n){var t=n.component;e(n,3,0,t.tech.getTechName()),e(n,4,0,xl(1,"",t.id,"")),e(n,5,0,t.tech.getDescription()),e(n,9,0,t.tech.getResearchPoints(),t.tech.getRequiredResearchPoints())})}function dR(e){return So(0,[ro(671088640,1,{progressRef:0}),(e()(),Jr(16777216,null,null,1,null,qy)),vi(2,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,iR)),vi(4,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,hR)),vi(6,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.tech.isResearched()),e(n,4,0,0===t.getMissingPrerequisites().length&&!t.tech.isResearched()),e(n,6,0,t.getMissingPrerequisites().length>0&&!t.tech.isResearched())},null)}var gR=function(){function e(e,n){this.techService=e,this.villageService=n}return e.prototype.ngOnInit=function(){this.categories=Object.keys(Wu),this.categories=this.categories.slice(this.categories.length/2)},e.prototype.getTechList=function(e){return this.techService.getTech().filter(function(n){return n.getCategory()===Wu[e]})},e.prototype.getCurrentResearch=function(){return this.techService.getCurrentResearch()},e.prototype.research=function(e){this.techService.progressTech(e)},e.prototype.isDev=function(){return!is.production},e.prototype.getForesight=function(){return this.techService.getForesight()},e.prototype.isResearcher=function(){return this.villageService.getBuildings().filter(function(e){return e.getBuildingType()===wu.WORKSHOP}).map(function(e){return e}).filter(function(e){return e.willResearch()}).length>0},e.prototype.shouldShowDone=function(){return this.techService.shouldShowDone()},e.prototype.showDone=function(){this.techService.toggleShowDone()},e.prototype.getTechQueue=function(){return this.techService.getTechQueue()},e.prototype.removeFromQueue=function(e){this.techService.removeFromQueue(e)},e.prototype.getTechQueueSize=function(){return this.techService.getTechQueueSize()},e}(),fR=rl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{margin:.7%;height:100%}#categories[_ngcontent-%COMP%]{display:-webkit-inline-box;display:inline-flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;border:1px solid #000;height:86%;width:100%;text-align:center}.category[_ngcontent-%COMP%]{text-align:center;-webkit-box-flex:0;flex:0 0 19.75%;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;border:1px solid #000;-webkit-box-align:center;align-items:center}#categoryBody[_ngcontent-%COMP%]{height:100%;width:100%;overflow-y:auto;overflow-x:hidden}.title[_ngcontent-%COMP%]{padding:2px;width:100%;font-weight:bolder;font-size:1em;margin-bottom:5px;display:block;border-bottom:1px solid #000}app-tech[_ngcontent-%COMP%]{display:inline-block;margin-bottom:4px;margin-top:4px;margin-left:-4px;width:75%;font-size:.7em}#researching[_ngcontent-%COMP%]{margin-bottom:8px}#currentTech[_ngcontent-%COMP%]{display:inline-block;width:auto;margin-right:10px}.tech[_ngcontent-%COMP%]{cursor:pointer}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center}#noResearchers[_ngcontent-%COMP%]{margin-left:175px;color:var(--negative-colour)}.showHiddenButton[_ngcontent-%COMP%]{font-size:.8em;padding:4px;margin-left:auto}#techQueue[_ngcontent-%COMP%]{display:-webkit-inline-box;display:inline-flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}.techQueueEntry[_ngcontent-%COMP%]{width:110px;margin-right:20px;cursor:pointer}"]],data:{}});function mR(e){return So(0,[(e()(),eo(0,0,null,null,1,"app-tech",[["class","techQueueEntry"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.removeFromQueue(e.context.$implicit)&&l),l},dR,Qy)),vi(1,4964352,null,0,$y,[jy,am],{tech:[0,"tech"]},null)],function(e,n){e(n,1,0,n.context.$implicit)},null)}function vR(e){return So(0,[(e()(),eo(0,0,null,null,3,"span",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,2,"div",[["id","techQueue"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,mR)),vi(3,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,3,0,n.component.getTechQueue())},null)}function SR(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["nothing"]))],null,null)}function ER(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.research(10)&&l),l},null,null)),(e()(),fo(-1,null,["Research"]))],null,null)}function yR(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[["id","noResearchers"]],null,null,null,null,null)),(e()(),fo(-1,null,["No workshop set to research."]))],null,null)}function RR(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[["class","showHiddenButton"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.showDone()&&l),l},null,null)),(e()(),fo(-1,null,["show finished"]))],null,null)}function bR(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[["class","showHiddenButton"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.showDone()&&l),l},null,null)),(e()(),fo(-1,null,["hide finished"]))],null,null)}function OR(e){return So(0,[(e()(),eo(0,0,null,null,1,"app-tech",[["class","tech"]],null,null,null,dR,Qy)),vi(1,4964352,null,0,$y,[jy,am],{tech:[0,"tech"]},null)],function(e,n){e(n,1,0,n.context.$implicit)},null)}function TR(e){return So(0,[(e()(),eo(0,0,null,null,5,"div",[["class","category"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),fo(2,null,["",""])),(e()(),eo(3,0,null,null,2,"span",[["id","categoryBody"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,OR)),vi(5,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,5,0,n.component.getTechList(n.context.$implicit))},function(e,n){e(n,2,0,n.context.$implicit)})}function CR(e){return So(0,[(e()(),eo(0,0,null,null,21,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,7,"div",[["id","researching"]],null,null,null,null,null)),(e()(),fo(2,null,[" Research queue (","/","): \xa0 "])),(e()(),Jr(16777216,null,null,1,null,vR)),vi(4,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,SR)),vi(6,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,ER)),vi(8,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(9,0,null,null,9,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(10,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(11,114688,null,0,xg,[],{name:[0,"name"]},null),(e()(),fo(12,null,["\xa0"," "])),(e()(),Jr(16777216,null,null,1,null,yR)),vi(14,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,RR)),vi(16,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,bR)),vi(18,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(19,0,null,null,2,"div",[["id","categories"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,TR)),vi(21,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,4,0,t.getCurrentResearch()),e(n,6,0,!t.getCurrentResearch()),e(n,8,0,t.isDev()),e(n,11,0,"foresight"),e(n,14,0,!t.isResearcher()),e(n,16,0,!t.shouldShowDone()),e(n,18,0,t.shouldShowDone()),e(n,21,0,t.categories)},function(e,n){var t=n.component;e(n,2,0,t.getTechQueue().length,t.getTechQueueSize()+t.getForesight()),e(n,12,0,t.getForesight())})}function IR(e){return So(0,[(e()(),eo(0,0,null,null,1,"app-research",[],null,null,null,CR,fR)),vi(1,114688,null,0,gR,[jy,kE],null,null)],function(e,n){e(n,1,0)},null)}var AR=jl("app-research",gR,IR,{},{},[]),NR=function(){function e(e,n){this.troop=e,this.size=n}return e.prototype.getTroopStrength=function(){return bs.getTroop(this.troop).STRENGTH},e.prototype.getTroopDefense=function(){return bs.getTroop(this.troop).DEFENSE},e.prototype.getTroopSpeed=function(){return bs.getTroop(this.troop).SPEED},e.prototype.getTroopPay=function(){return bs.getTroop(this.troop).PAY},e.prototype.getRecruitTime=function(){return bs.getTroop(this.troop).RECRUIT_TIME},e.prototype.getTroopSize=function(){return bs.getTroop(this.troop).SIZE},e.prototype.getTroopCargo=function(){return bs.getTroop(this.troop).CARGO},e.prototype.isNavy=function(){return this.troop===Lu.BOAT||this.troop===Lu.BRIGANTINE||this.troop===Lu.GALLEON},e}(),_R=function(){function e(e){this.units=e}return e.clone=function(n){var t=new e([]);return n.units.forEach(function(e){return t.addTroop(e.troop,e.size)}),t},e.prototype.toJSON=function(){this.removeEmptyUnits();var e=[];return this.units.forEach(function(n){e.push([n.troop,n.size])}),{units:e}},e.prototype.getLandUnits=function(n){var t=new e([]);return this.units.forEach(function(e){e.isNavy()||(t.addTroop(e.troop,e.size),n&&(e.size=0))}),this.removeEmptyUnits(),t},e.prototype.getNavy=function(n){var t=new e([]);return this.units.forEach(function(e){e.isNavy()&&(t.addTroop(e.troop,e.size),n&&(e.size=0))}),t},e.prototype.getRandomUnit=function(){return Qu.randomArrayElement(this.units.filter(function(e){return e.size>=0}))},e.prototype.getUnit=function(e){return this.units.find(function(n){return n.troop===e})},e.prototype.removeEmptyUnits=function(){this.units=this.units.filter(function(e){return e.size>0})},e.prototype.hasAny=function(){return this.removeEmptyUnits(),this.units.length>0},e.prototype.addTroop=function(e,n){var t=this.units.find(function(n){return n.troop===e});t?t.size+=n:this.units.push(new NR(e,n))},e.prototype.getArmySize=function(){var e=0;return this.removeEmptyUnits(),this.units.filter(function(e){return e.troop!==Lu.COLONIST}).forEach(function(n){return e+=n.size}),e},e.prototype.getArmyPower=function(e){var n=0;return this.units.forEach(function(t){n+=e?t.size*t.getTroopStrength():t.size*t.getTroopDefense()}),n},e.prototype.removeTroop=function(e,n){var t=this.units.find(function(n){return n.troop===e});t&&(t.size-=n),this.removeEmptyUnits()},e.prototype.addArmy=function(e){var n=this;e.units.forEach(function(e){return n.addTroop(e.troop,e.size)})},e.prototype.getArmyPay=function(){var e=0;return this.units.filter(function(e){return e.troop!==Lu.COLONIST}).forEach(function(n){return e+=n.getTroopPay()*n.size}),e},e.prototype.clearArmy=function(){this.units=[]},e.prototype.getArmySpeed=function(){this.removeEmptyUnits();var e=0;return this.units.forEach(function(n){0===e&&(e=n.getTroopSpeed()),n.getTroopSpeed()<e&&(e=n.getTroopSpeed())}),e},e.prototype.getArmyCargo=function(){var e=0;return this.units.forEach(function(n){return e+=n.getTroopCargo()*n.size}),e},e.prototype.hasTroop=function(e){return this.removeEmptyUnits(),void 0!==this.units.find(function(n){return n.troop===e})},e}(),wR=function(){return function(){this.skirmish=[]}}(),PR=function(){return function(e,n,t,l,i){this.attackerTroop=e,this.defenderTroop=n,this.attack=t,this.defense=l,this.result=i}}(),xR=function(){function e(e,n,t,l,i,r,o,u){var s=this;this.resourcesService=e,this.modalService=n,this.logService=t,this.landService=l,this.soundService=i,this.calendarService=r,this.effectsService=o,this.servicesService=u,this.barracksSize=0,this.defense=0,this.stashSize=0,this.paydayCounter=30,this.army=new _R([]),this.recruits=[],this.recruitsUpdate=new D,u.addService(zu.ARMY,this),this.calendarService.registerForDayChange().subscribe(function(e){s.calculatePayday()})}return e.prototype.tick=function(e){},e.prototype.load=function(e){var n=this;this.barracksSize=e.barracksSize,this.defense=e.defense,this.paydayCounter=void 0!==e.paydayCounter?e.paydayCounter:30,this.stashSize=e.stashSize,this.army.units=[],void 0!==e.troops?e.troops.forEach(function(e){n.army.addTroop(e[0],e[1])}):void 0!==e.army&&e.army.forEach(function(e){n.army.addTroop(e[0],e[1])}),this.recruits=[],e.recruits.forEach(function(e){n.recruits.push([new NR(e[0],e[1]),e[2]])}),void 0!==e.missionsInProgress&&e.missionsInProgress.forEach(function(e){e[4].forEach(function(e){n.army.addTroop(e[0],e[1])})})},e.prototype.save=function(){var e=[];this.army.units.forEach(function(n){return e.push([n.troop,n.size])});var n=[];return this.recruits.forEach(function(e){return n.push([e[0].troop,e[0].size,e[1]])}),{barracksSize:this.barracksSize,army:e,recruits:n,defense:this.defense,stashSize:this.stashSize,paydayCounter:this.paydayCounter}},e.prototype.reset=function(e,n){this.recruits=[],this.barracksSize=0,this.defense=0,this.stashSize=0,this.paydayCounter=30,this.army.units=[]},e.prototype.progressRecruitment=function(e){this.recruits.length>0&&(this.recruits[0][1]+=e,this.recruits[0][1]>=this.recruits[0][0].getRecruitTime()&&(this.army.addTroop(this.recruits[0][0].troop,1),this.recruits[0][0].size-=1,this.recruits[0][1]=0,this.recruits[0][0].size<=0&&this.recruits.shift()),this.recruitsUpdate.next())},e.prototype.recruit=function(e,n){if(this.getFreeBarracks()>=n)if(this.resourcesService.getPeople()>=n){var t=new Map;bs.getTroop(e).COST.forEach(function(e){return t.set(e.resource,e.amount)}),this.resourcesService.decreaseResources(t,"Army",!0,n)&&(this.resourcesService.removeRecruit(n),this.recruits.push([new NR(e,n),0]))}else this.modalService.info("Not enough unemployed people to recruit!");else this.modalService.info("Not enough space in barracks for so many recruits")},e.prototype.dismiss=function(e,n){var t=this.resourcesService.getPopulationCap()-this.resourcesService.getTotalPeople(),l=void 0!==this.army.getUnit(e)?this.army.getUnit(e).size:0;0!==l?n>l?this.modalService.info("There are not enough troops to dismiss"):t>=n?(this.army.removeTroop(e,n),this.servicesService.getService(zu.VILLAGE).addVillagers(n)):this.modalService.info("There are not enough housing space for dismissed troops!"):this.modalService.info("No troops to dismiss")},e.prototype.dismissRecruit=function(e,n){var t=this.resourcesService.getPopulationCap()-this.resourcesService.getTotalPeople();n>this.recruits[e][0].size?this.modalService.info("There are not enough recruits to dismiss"):t>=n?(this.recruits[e][0].size-=n,this.recruits[e][0].size<=0&&this.recruits.splice(e,1),this.servicesService.getService(zu.VILLAGE).addVillagers(n)):this.modalService.info("There are not enough housing space for dismissed troops!")},e.prototype.getRecruits=function(){return this.recruits},e.prototype.getUnits=function(){return this.army.units},e.prototype.getWorldService=function(){return this.servicesService.getService(zu.WORLD)},e.prototype.getArmySize=function(){var e=this.army.getArmySize();return this.recruits.forEach(function(n){return e+=n[0].size}),this.getWorldService().getPlayerLandMissions().forEach(function(n){e+=n.army.getArmySize()}),this.getWorldService().getPlayerSeaMissions().forEach(function(n){e+=n.army.getLandUnits(!1).getArmySize()}),this.getWorldService().getStationedArmies().forEach(function(n){e+=n.getArmySize()}),e},e.prototype.getFreeBarracks=function(){return this.barracksSize-this.getArmySize()},e.prototype.increaseBarracks=function(e){this.barracksSize+=e},e.prototype.decreaseBarracks=function(e){this.barracksSize-=e},e.prototype.getBarracksSize=function(){return this.barracksSize},e.prototype.getDefenseStrength=function(){var e=this.defense;return this.army.units.forEach(function(n){return e+=n.getTroopDefense()*n.size}),e},e.prototype.increaseDefense=function(e){this.defense+=e},e.prototype.decreaseDefense=function(e){this.defense-=e},e.prototype.hasRecruits=function(){return this.recruits.length>0},e.prototype.registerForRecruitsUpdate=function(){return this.recruitsUpdate.asObservable()},e.prototype.getAttackStrength=function(){var e=0;return this.army.units.forEach(function(n){return e+=n.getTroopStrength()*n.size}),e},e.prototype.increaseStash=function(e){this.stashSize+=e},e.prototype.decreaseStash=function(e){this.stashSize-=e},e.prototype.calculateSoldiersPay=function(){var e=0;return e+=this.army.getArmyPay(),this.getWorldService().getPlayerLandMissions().forEach(function(n){e+=n.army.getArmyPay()}),this.getWorldService().getPlayerSeaMissions().forEach(function(n){e+=n.army.getLandUnits(!1).getArmyPay()}),this.getWorldService().getStationedArmies().forEach(function(n){e+=n.getArmyPay()}),e},e.prototype.getPaydayCounter=function(){return this.paydayCounter},e.prototype.calculatePayday=function(){if(this.paydayCounter<=0){var e=this.calculateSoldiersPay();if(e>0){var n=this.resourcesService.hasResource(Iu.COINS,e,"Army");if(n>e&&(n=e),n>0){this.resourcesService.decreaseResource(Iu.COINS,e-n,"Army");for(var t=[],l=function(){if(i.army.units.forEach(function(e){if(n>0&&e.getTroopPay()>0&&e.size>0&&(n-=e.getTroopPay(),Qu.chance(.25))){e.size-=1;var l=t.find(function(n){return n[0]===e.troop});l?l[1]+=1:t.push([e.troop,1])}}),n<=0)return"break";var e=[];i.getWorldService().getPlayerLandMissions().forEach(function(n){n.army.getArmySize()>0&&e.push(n.army)}),i.getWorldService().getPlayerSeaMissions().forEach(function(n){n.army.getLandUnits(!1).getArmySize()>0&&e.push(n.army.getLandUnits(!1))}),i.getWorldService().getStationedArmies().forEach(function(n){n.getArmySize()>0&&e.push(n)}),e.forEach(function(e){n>0&&e.units.forEach(function(e){if(n>0&&e.getTroopPay()>0&&e.size>0&&(n-=e.getTroopPay(),Qu.chance(.25))){e.size-=1;var l=t.find(function(n){return n[0]===e.troop});l?l[1]+=1:t.push([e.troop,1])}})})},i=this;n>0&&"break"!==l(););if(t.length>0){var r="Deserters:<br>";t.forEach(function(e){return r+="&emsp;"+e[1]+" "+Vu.prepareTroopName(e[0])+"<br>"}),this.logService.warning(r)}}else this.resourcesService.decreaseResource(Iu.COINS,e,"Army")}this.paydayCounter=30}else this.paydayCounter-=1},e.prototype.getTroopEffectsMultiplier=function(e){return 1+this.getTroopEffectsValue(e)/100},e.prototype.getTroopEffectsValue=function(e){var n=0;return this.effectsService.getArmyEffects().filter(function(n){return n.troop===Lu.ALL||n.troop===e}).forEach(function(e){return n+=e.effect}),n},e.prototype.addMilitia=function(e){this.army.addTroop(Lu.MILITIA,e)},e.prototype.calculateAttack=function(e,n,t,l,i){var r=new wR;r.attackerArmy=_R.clone(e),r.defenderArmy=_R.clone(n),r.defense=t;var o=0,u=0;if(e.getArmySize()>n.getArmySize()?(o=Math.floor(e.getArmySize()/n.getArmySize())-1)>3&&(o=3):n.getArmySize()>e.getArmySize()&&(u=Math.floor(n.getArmySize()/e.getArmySize())-1)>3&&(u=3),r.attackerArmySizeBonus=o,r.defenderArmySizeBonus=u,e.units.length>0&&n.units.length>0){var s=n.getRandomUnit(),a=s.getTroopDefense(),c=e.getRandomUnit(),p=c.getTroopStrength(),h=Math.floor(p/2);for(p-=h<t?h:t;e.units.length>0&&n.units.length>0;){if(null===c){p=(c=e.getRandomUnit()).getTroopStrength();var d=Math.floor(p/2);p-=d<t?d:t}null===s&&(a=(s=n.getRandomUnit()).getTroopDefense());var g=0,f=0,m=0;if(l)f=g=p*this.getTroopEffectsMultiplier(c.troop)+o,m=a+u,g-=a+u;else if(i){var v=a*this.getTroopEffectsMultiplier(s.troop)+u;m=v,f=p+o,g=-v+p+o}else f=g=p+o,m=a+u,g-=a+u;var S=this.calculateWinChance(g);Qu.chance(S/100)?(r.skirmish.push(new PR(c.troop,s.troop,f,m,!0)),s.size-=1,n.removeEmptyUnits(),s=null,p-=1):(r.skirmish.push(new PR(c.troop,s.troop,f,m,!1)),c.size-=1,e.removeEmptyUnits(),c=null,a-=1)}}return e.units.length>0?(r.result=!0,r.armyAfterFight=_R.clone(e)):(r.result=!1,r.armyAfterFight=_R.clone(n)),r},e.prototype.calculateWinChance=function(e){var n=50;if(e>0){var t=e;e>1&&(t=1),e-=t,n+=10*t}return Math.min(95,Math.max(5,5*e+n))},e.prototype.getArmy=function(){return this.army},e.prototype.loot=function(e){for(var n=this,t=new Map,l="Loot:<br>",i=Array.from(this.resourcesService.getResources().values()).filter(function(e){return e.isVisible()}).map(function(e){return{item:e.resource,chance:e.prioritise?10:1}});e>5;){var r=Qu.randomWeightedExcept(i,[]),o=Rs.getResource(r),u=0;for(u=Qu.randomBetween(1,o.TRADE_VALUE<10?20:o.TRADE_VALUE<50?10:o.TRADE_VALUE<300?5:2);o.TRADE_VALUE*u>e;)u-=1;u>0&&(t.has(r)?t.set(r,t.get(r)+u):t.set(r,u),e-=u*o.TRADE_VALUE)}Array.from(t.keys()).sort(function(e,t){var l=n.resourcesService.getResource(e).name.toLowerCase(),i=n.resourcesService.getResource(t).name.toLowerCase();return l<i?-1:l>i?1:0}).forEach(function(e){l+="&emsp;"+t.get(e)+" "+Vu.prepareResourceName(e)+"<br>"}),this.logService.success(l),this.resourcesService.increaseResources(t,"Plunder",!0)},e.prototype.lootPlayer=function(e){for(var n=this,t="<br>",l=[],i=function(){var t=Array.from(r.resourcesService.getResources().values()).filter(function(e){return e.amount>n.stashSize}),i=Qu.randomExcept(t,[]);if(void 0===i)return e=0,"break";var o=Rs.getResource(i.resource),u=0;u=Qu.randomBetween(1,o.TRADE_VALUE<10?20:o.TRADE_VALUE<50?10:o.TRADE_VALUE<300?5:2),i.amount-r.stashSize<u&&(u=i.amount-r.stashSize),e-=o.TRADE_VALUE*u;var s=l.find(function(e){return e.resource===i.resource});s?s.amount+=u:l.push({resource:i.resource,amount:u}),r.resourcesService.decreaseResource(i.resource,u,"Invasion",!0)},r=this;e>0&&"break"!==i(););var o=0;return l.sort(function(e,t){var l=n.resourcesService.getResource(e.resource).name.toLowerCase(),i=n.resourcesService.getResource(t.resource).name.toLowerCase();return l<i?-1:l>i?1:0}).forEach(function(e){t+="&emsp;"+e.amount+" "+Vu.prepareResourceName(e.resource)+"<br>",o+=e.amount*Rs.getResource(e.resource).TRADE_VALUE}),this.logService.warning(l.length>0?"Plundered: "+t:"Nothing has been stolen"),Math.floor(o/100)},e.prototype.moveRecipeInQueue=function(e){lv(this.recruits,e.previousIndex,e.currentIndex)},e.ngInjectableDef=Oe({factory:function(){return new e(Ye(am),Ye(qf),Ye($f),Ye(NE),Ye(Py),Ye(jf),Ye(IE),Ye(Vf))},token:e,providedIn:"root"}),e}(),kR=function(){function e(e,n){this.armyService=e,this.resourcesService=n,this.id=Math.random(),this.recruit=!1,this.progress=0,this.multiplier=0,this.recruitIndex=-1,this.dismiss=!1}return e.prototype.ngOnInit=function(){var e=this;this.updateSubscription=this.armyService.registerForRecruitsUpdate().subscribe(function(){e.progressRef&&(e.progressRef.nativeElement.style.width=e.progress/e.getRecruitTime()*100+"%")})},e.prototype.ngAfterViewInit=function(){this.progressRef&&(this.progressRef.nativeElement.style.width=this.progress/this.getRecruitTime()*100+"%")},e.prototype.getTroopName=function(){return Vu.prepareTroopName(this.troop)},e.prototype.getResourceName=function(e){return Vu.prepareResourceName(e)},e.prototype.checkResource=function(e){return 0===this.resourcesService.hasResource(e.resource,e.amount*this.multiplier,"Army",!0)},e.prototype.isAvailable=function(){if(this.dismiss&&this.count>this.multiplier)return!0;if(this.recruit)return!0;var e=new Map;return this.getRecruitCost().forEach(function(n){return e.set(n.resource,n.amount)}),this.resourcesService.hasResources(e,"Army",this.multiplier,!0)},e.prototype.getRecruitTime=function(){return bs.getTroop(this.troop).RECRUIT_TIME},e.prototype.getRecruitCost=function(){return bs.getTroop(this.troop).COST},e.prototype.getTroopStrength=function(){return bs.getTroop(this.troop).STRENGTH},e.prototype.getTroopDefense=function(){return bs.getTroop(this.troop).DEFENSE},e.prototype.getTroopPay=function(){return bs.getTroop(this.troop).PAY},e.prototype.getTroopSpeed=function(){return bs.getTroop(this.troop).SPEED},e.prototype.dismissRecruit=function(){this.recruit&&this.dismiss&&this.armyService.dismissRecruit(this.recruitIndex,this.multiplier)},e}(),MR=rl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{position:relative;display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #000;font-size:1.2em}#wrapperNotAvailable[_ngcontent-%COMP%]{position:relative;display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #57575a;font-size:1.2em}.dismiss[_ngcontent-%COMP%]{border:var(--negative-colour) solid 1px!important}#text[_ngcontent-%COMP%]{position:relative;z-index:2}#textNotAvailable[_ngcontent-%COMP%]{position:relative;z-index:2;color:#57575a}#progressId[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background-color:var(--active-colour);z-index:1}hr[_ngcontent-%COMP%]{border-color:#000}.costTitle[_ngcontent-%COMP%], .statsTitle[_ngcontent-%COMP%]{text-align:left}.tooltipSpan[_ngcontent-%COMP%]{min-width:125px}.missing[_ngcontent-%COMP%]{color:var(--negative-colour)}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}.inline[_ngcontent-%COMP%]{display:inline-block}"]],data:{}});function DR(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[["class","inline"]],null,null,null,null,null)),(e()(),fo(-1,null,["dismiss "]))],null,null)}function LR(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[["class","inline"]],null,null,null,null,null)),(e()(),fo(-1,null,["recruit "]))],null,null)}function FR(e){return So(0,[(e()(),eo(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),fo(1,null,["",""]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.amount*n.component.multiplier)})}function UR(e){return So(0,[(e()(),eo(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"div",[["class","missing"]],null,null,null,null,null)),(e()(),fo(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.amount*n.component.multiplier)})}function HR(e){return So(0,[(e()(),eo(0,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,FR)),vi(3,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,UR)),vi(5,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(6,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(7,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){var t=n.component;e(n,3,0,t.checkResource(n.context.$implicit)),e(n,5,0,!t.checkResource(n.context.$implicit)),e(n,7,0,t.getResourceName(n.context.$implicit.resource),"resources")},null)}function GR(e){return So(0,[(e()(),eo(0,0,null,null,37,"div",[["appTooltip",""],["class","tooltip"],["id","wrapper"]],null,[[null,"click"],[null,"mousemove"]],function(e,n,t){var l=!0,i=e.component;return"mousemove"===n&&(l=!1!==ii(e,4).onmousemove(t)&&l),"click"===n&&(l=!1!==i.dismissRecruit()&&l),l},null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(2,278528,null,0,Js,[Xs],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),ho(3,{dismiss:0}),vi(4,16384,null,0,Pg,[],{elementId:[0,"elementId"]},null),(e()(),eo(5,0,[[1,0],["progressId",1]],null,0,"div",[["id","progressId"]],null,null,null,null,null)),(e()(),eo(6,0,null,null,29,"span",[["class","tooltipSpan"]],[[8,"id",0]],null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,DR)),vi(8,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,LR)),vi(10,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),fo(11,null,[" "," x "," "])),po(12,1),(e()(),eo(13,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),eo(14,0,null,null,1,"div",[["class","statsTitle"]],null,null,null,null,null)),(e()(),fo(-1,null,["Stats (per soldier):"])),(e()(),eo(16,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(17,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(18,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),fo(19,null,[": ",""])),(e()(),eo(20,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(21,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(22,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),fo(23,null,[": ",""])),(e()(),eo(24,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(25,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(26,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),fo(27,null,[": ",""])),(e()(),eo(28,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(29,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(30,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),fo(31,null,[": ",""])),(e()(),eo(32,0,null,null,1,"div",[["class","costTitle"]],null,null,null,null,null)),(e()(),fo(-1,null,["Cost:"])),(e()(),Jr(16777216,null,null,1,null,HR)),vi(35,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),eo(36,0,null,null,1,"div",[["id","text"]],null,null,null,null,null)),(e()(),fo(37,null,[""," - ",""]))],function(e,n){var t=n.component,l=e(n,3,0,t.dismiss&&t.count>0);e(n,2,0,"tooltip",l),e(n,4,0,t.id),e(n,8,0,t.dismiss),e(n,10,0,!t.dismiss&&!t.recruit),e(n,18,0,"attack","army"),e(n,22,0,"defense","army"),e(n,26,0,"speed","army"),e(n,30,0,"coins","resources"),e(n,35,0,t.getRecruitCost())},function(e,n){var t=n.component;e(n,6,0,xl(1,"",t.id,""));var l=t.multiplier,i=tl(n,11,1,e(n,12,0,ii(n.parent,0),t.getTroopName()));e(n,11,0,l,i),e(n,19,0,t.getTroopStrength()),e(n,23,0,t.getTroopDefense()),e(n,27,0,t.getTroopSpeed()),e(n,31,0,t.getTroopPay()),e(n,37,0,t.getTroopName(),t.count)})}function BR(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[["class","inline"]],null,null,null,null,null)),(e()(),fo(-1,null,["dismiss "]))],null,null)}function VR(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[["class","inline"]],null,null,null,null,null)),(e()(),fo(-1,null,["recruit "]))],null,null)}function WR(e){return So(0,[(e()(),eo(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),fo(1,null,["",""]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.amount*n.component.multiplier)})}function zR(e){return So(0,[(e()(),eo(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"div",[["class","missing"]],null,null,null,null,null)),(e()(),fo(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.amount*n.component.multiplier)})}function YR(e){return So(0,[(e()(),eo(0,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,WR)),vi(3,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,zR)),vi(5,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(6,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(7,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){var t=n.component;e(n,3,0,t.checkResource(n.context.$implicit)),e(n,5,0,!t.checkResource(n.context.$implicit)),e(n,7,0,t.getResourceName(n.context.$implicit.resource),"resources")},null)}function KR(e){return So(0,[(e()(),eo(0,0,null,null,37,"div",[["appTooltip",""],["class","tooltip"],["id","wrapperNotAvailable"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==ii(e,4).onmousemove(t)&&l),l},null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(2,278528,null,0,Js,[Xs],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),ho(3,{dismiss:0}),vi(4,16384,null,0,Pg,[],{elementId:[0,"elementId"]},null),(e()(),eo(5,0,[[1,0],["progressId",1]],null,0,"div",[["id","progressId"]],null,null,null,null,null)),(e()(),eo(6,0,null,null,29,"span",[["class","tooltipSpan"]],[[8,"id",0]],null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,BR)),vi(8,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,VR)),vi(10,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),fo(11,null,[" "," x "," "])),po(12,1),(e()(),eo(13,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),eo(14,0,null,null,1,"div",[["class","statsTitle"]],null,null,null,null,null)),(e()(),fo(-1,null,["Stats (per soldier):"])),(e()(),eo(16,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(17,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(18,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),fo(19,null,[": ",""])),(e()(),eo(20,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(21,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(22,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),fo(23,null,[": ",""])),(e()(),eo(24,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(25,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(26,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),fo(27,null,[": ",""])),(e()(),eo(28,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(29,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(30,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),fo(31,null,[": ",""])),(e()(),eo(32,0,null,null,1,"div",[["class","costTitle"]],null,null,null,null,null)),(e()(),fo(-1,null,["Cost:"])),(e()(),Jr(16777216,null,null,1,null,YR)),vi(35,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),eo(36,0,null,null,1,"div",[["id","textNotAvailable"]],null,null,null,null,null)),(e()(),fo(37,null,[""," - ",""]))],function(e,n){var t=n.component,l=e(n,3,0,t.dismiss&&t.count>0);e(n,2,0,"tooltip",l),e(n,4,0,t.id),e(n,8,0,t.dismiss),e(n,10,0,!t.dismiss&&!t.recruit),e(n,18,0,"attack","army"),e(n,22,0,"defense","army"),e(n,26,0,"speed","army"),e(n,30,0,"coins","resources"),e(n,35,0,t.getRecruitCost())},function(e,n){var t=n.component;e(n,6,0,xl(1,"",t.id,""));var l=t.multiplier,i=tl(n,11,1,e(n,12,0,ii(n.parent,0),t.getTroopName()));e(n,11,0,l,i),e(n,19,0,t.getTroopStrength()),e(n,23,0,t.getTroopDefense()),e(n,27,0,t.getTroopSpeed()),e(n,31,0,t.getTroopPay()),e(n,37,0,t.getTroopName(),t.count)})}function jR(e){return So(0,[Si(0,ga,[]),ro(671088640,1,{progressRef:0}),(e()(),Jr(16777216,null,null,1,null,GR)),vi(3,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,KR)),vi(5,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,3,0,t.isAvailable()),e(n,5,0,!t.isAvailable())},null)}var $R=function(e){function n(n,t,l,i,r){return e.call(this,t,n,l,r,i,Gu.FORT,zu.FORT)||this}return i(n,e),n.ngInjectableDef=Oe({factory:function(){return new n(Ye(am),Ye(CE),Ye(Vf),Ye($S),Ye(NE))},token:n,providedIn:"root"}),n}(PE),QR=function(){function e(e,n,t,l,i,r){this.servicesService=e,this.armyService=n,this.resourcesService=t,this.fortService=l,this.router=i,this.changeDetectorRef=r,this.selection=1,this.dismiss=!1,this.troops=[Lu.MILITIA,Lu.SPY,Lu.SPEARMAN,Lu.ARCHER,Lu.SWORDSMAN,Lu.LIGHT_CAVALRY,Lu.HORSE_ARCHER]}return e.prototype.ngOnInit=function(){var e=this;this.armyService.registerForRecruitsUpdate().subscribe(function(){e.changeDetectorRef.destroyed||e.changeDetectorRef.detectChanges()})},e.prototype.changeSelection=function(e){this.selection=e},e.prototype.changeDismiss=function(e){this.dismiss=e},e.prototype.getTroops=function(){return this.armyService.getUnits()},e.prototype.getRecruits=function(){return this.armyService.getRecruits()},e.prototype.recruit=function(e){this.dismiss?this.armyService.dismiss(e,this.selection):this.armyService.recruit(e,this.selection)},e.prototype.isDev=function(){return!is.production},e.prototype.progress=function(){this.armyService.progressRecruitment(10)},e.prototype.getBarracksSize=function(){return this.armyService.getBarracksSize()},e.prototype.getTroopsSize=function(){return this.armyService.getArmySize()},e.prototype.getUnemployed=function(){return this.resourcesService.getPeople()},e.prototype.getDefenseStrength=function(){return this.armyService.getDefenseStrength()},e.prototype.getAttackStrength=function(){return this.armyService.getAttackStrength()},e.prototype.checkForTrainingSquare=function(){return void 0!==this.fortService.getBuildings().find(function(e){return e.getBuildingType()===wu.TRAINING_SQUARE})},e.prototype.getSoldiersPay=function(){return this.armyService.calculateSoldiersPay()},e.prototype.getPaydayCounter=function(){return this.armyService.getPaydayCounter()},e.prototype.getMissions=function(){return this.servicesService.getService(zu.WORLD).getPlayerLandMissions().concat(this.servicesService.getService(zu.WORLD).getPlayerSeaMissions().filter(function(e){return e.army&&e.army.getLandUnits(!1).getArmySize()>0}))},e.prototype.selectMission=function(e){this.servicesService.getService(zu.WORLD).setSelectedMission(e),this.router.navigate(["/world"])},e.prototype.getTroopSize=function(e){var n=this.armyService.getArmy().getUnit(e);return n?n.size:0},e.prototype.getTroopName=function(e){return Vu.prepareTroopName(e)},e.prototype.drop=function(e){this.armyService.moveRecipeInQueue(e)},e}(),qR=rl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{margin:.7%;height:100%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#categories[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;border:1px solid #000;height:91.5%;text-align:center}.category[_ngcontent-%COMP%]{text-align:center;-webkit-box-flex:0;flex:0 0 33%;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;border:1px solid #000;-webkit-box-align:center;align-items:center}.recruits[_ngcontent-%COMP%]{text-align:center;-webkit-box-flex:0;flex:0 0 50%;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;overflow-y:auto;overflow-x:hidden;border-bottom:1px solid #000}.title[_ngcontent-%COMP%]{padding:2px;width:100%;font-weight:bolder;font-size:.9em;margin-bottom:5px;display:block;border-bottom:1px solid #000}#numbers[_ngcontent-%COMP%]{margin-top:-6px;padding:0;margin-bottom:5px}.number[_ngcontent-%COMP%]{border:1px solid #000;padding:2px 4px;background-color:var(--passive-colour);font-size:.75em;cursor:pointer}.active[_ngcontent-%COMP%], .number[_ngcontent-%COMP%]:hover{background-color:var(--active-colour)}app-troop[_ngcontent-%COMP%]{display:inline-block;margin:4px;width:75%;font-size:.7em;cursor:pointer}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center}#noTrainingSquare[_ngcontent-%COMP%]{margin-left:4px;color:var(--negative-colour)}#missionsScroll[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;width:100%;overflow-y:auto;-webkit-box-align:center;align-items:center}.mission[_ngcontent-%COMP%]{padding:4px;border:1px solid #000;width:80%;cursor:pointer;margin:3px}#recruitsList[_ngcontent-%COMP%]{height:100%;width:100%}"]],data:{}});function XR(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[["id","noTrainingSquare"]],null,null,null,null,null)),(e()(),fo(-1,null,["No Training square available"]))],null,null)}function ZR(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[["class","number"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.changeSelection(1)&&l),l},null,null)),(e()(),fo(-1,null,["1x"]))],null,null)}function JR(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[["class","number active"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.changeSelection(1)&&l),l},null,null)),(e()(),fo(-1,null,["1x"]))],null,null)}function eb(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[["class","number"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.changeSelection(5)&&l),l},null,null)),(e()(),fo(-1,null,["5x"]))],null,null)}function nb(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[["class","number active"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.changeSelection(5)&&l),l},null,null)),(e()(),fo(-1,null,["5x"]))],null,null)}function tb(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[["class","number"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.changeSelection(10)&&l),l},null,null)),(e()(),fo(-1,null,["10x"]))],null,null)}function lb(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[["class","number active"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.changeSelection(10)&&l),l},null,null)),(e()(),fo(-1,null,["10x"]))],null,null)}function ib(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[["class","number"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.changeDismiss(!0)&&l),l},null,null)),(e()(),fo(-1,null,["dismiss"]))],null,null)}function rb(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[["class","number active"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.changeDismiss(!1)&&l),l},null,null)),(e()(),fo(-1,null,["dismiss"]))],null,null)}function ob(e){return So(0,[(e()(),eo(0,0,null,null,1,"app-troop",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.recruit(e.context.$implicit)&&l),l},jR,MR)),vi(1,4308992,null,0,kR,[xR,am],{troop:[0,"troop"],count:[1,"count"],multiplier:[2,"multiplier"],dismiss:[3,"dismiss"]},null)],function(e,n){var t=n.component;e(n,1,0,n.context.$implicit,t.getTroopSize(n.context.$implicit),t.selection,t.dismiss)},null)}function ub(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.progress()&&l),l},null,null)),(e()(),fo(-1,null,["recruit"]))],null,null)}function sb(e){return So(0,[(e()(),eo(0,16777216,null,null,6,"app-troop",[["cdkDrag",""],["class","cdk-drag"]],[[2,"cdk-drag-disabled",null],[2,"cdk-drag-dragging",null]],null,null,jR,MR)),Ei(6144,null,fv,null,[vv]),vi(2,4866048,[[1,4]],3,vv,[dt,[3,gv],Ea,vr,Gt,mv,[2,ry],dv,kt],null,null),ro(603979776,2,{_handles:1}),ro(603979776,3,{_previewTemplate:0}),ro(603979776,4,{_placeholderTemplate:0}),vi(6,4308992,null,0,kR,[xR,am],{troop:[0,"troop"],count:[1,"count"],recruit:[2,"recruit"],progress:[3,"progress"],multiplier:[4,"multiplier"],recruitIndex:[5,"recruitIndex"],dismiss:[6,"dismiss"]},null),(e()(),Jr(0,null,null,0))],function(e,n){var t=n.component;e(n,6,0,n.context.$implicit[0].troop,n.context.$implicit[0].size,!0,n.context.$implicit[1],t.selection,n.context.index,t.dismiss)},function(e,n){e(n,0,0,ii(n,2).disabled,ii(n,2)._dragRef.isDragging())})}function ab(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(1,null,[" ",": "," "]))],null,function(e,n){e(n,1,0,n.component.getTroopName(n.context.$implicit.troop),n.context.$implicit.size)})}function cb(e){return So(0,[(e()(),eo(0,0,null,null,9,"div",[["appTooltip",""],["class","mission tooltip"]],null,[[null,"click"],[null,"mousemove"]],function(e,n,t){var l=!0,i=e.component;return"mousemove"===n&&(l=!1!==ii(e,1).onmousemove(t)&&l),"click"===n&&(l=!1!==i.selectMission(e.context.$implicit)&&l),l},null,null)),vi(1,16384,null,0,Pg,[],{elementId:[0,"elementId"]},null),(e()(),fo(2,null,[" "," "])),(e()(),eo(3,0,null,null,6,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),fo(4,null,[" "," "])),(e()(),eo(5,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),fo(6,null,[" "," : ","% "])),po(7,2),(e()(),Jr(16777216,null,null,1,null,ab)),vi(9,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,1,0,"mission-"+n.context.$implicit.id),e(n,9,0,n.context.$implicit.army.units)},function(e,n){var t=n.context.$implicit.getMissionName();e(n,2,0,t),e(n,3,0,xl(1,"mission-",n.context.$implicit.id,""));var l=n.context.$implicit.getMissionName();e(n,4,0,l);var i=n.context.$implicit.getStatus(),r=tl(n,6,1,e(n,7,0,ii(n.parent,0),n.context.$implicit.getDisplayProgress(),"0.0-0"));e(n,6,0,i,r)})}function pb(e){return So(0,[Si(0,va,[er]),(e()(),eo(1,0,null,null,61,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),eo(2,0,null,null,1,"div",[["id","title"]],null,null,null,null,null)),(e()(),fo(-1,null,["Army"])),(e()(),eo(4,0,null,null,17,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(5,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(6,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),fo(7,null,["\xa0"," /"," \xa0\xa0 "])),(e()(),eo(8,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(9,114688,null,0,xg,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),fo(10,null,["\xa0"," \xa0\xa0\xa0 "])),(e()(),eo(11,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(12,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),fo(13,null,["\xa0"," \xa0\xa0\xa0 "])),(e()(),eo(14,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(15,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),fo(16,null,["\xa0"," \xa0\xa0\xa0 "])),(e()(),eo(17,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(18,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),fo(19,null,["\xa0"," in "," days "])),(e()(),Jr(16777216,null,null,1,null,XR)),vi(21,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(22,0,null,null,40,"div",[["id","categories"]],null,null,null,null,null)),(e()(),eo(23,0,null,null,21,"div",[["class","category"]],null,null,null,null,null)),(e()(),eo(24,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),fo(-1,null,["GARRISON"])),(e()(),eo(26,0,null,null,16,"div",[["id","numbers"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,ZR)),vi(28,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,JR)),vi(30,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,eb)),vi(32,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,nb)),vi(34,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,tb)),vi(36,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,lb)),vi(38,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,ib)),vi(40,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,rb)),vi(42,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,ob)),vi(44,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),eo(45,0,null,null,11,"div",[["class","category"]],null,null,null,null,null)),(e()(),eo(46,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),fo(-1,null,["RECRUITS"])),(e()(),Jr(16777216,null,null,1,null,ub)),vi(49,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(50,0,null,null,6,"div",[["cdkDropList",""],["class","cdk-drop-list"],["id","recruitsList"]],[[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],[[null,"cdkDropListDropped"]],function(e,n,t){var l=!0;return"cdkDropListDropped"===n&&(l=!1!==e.component.drop(t)&&l),l},null,null)),Ei(6144,null,gv,null,[Rv]),vi(52,1196032,null,1,Rv,[dt,dv,kt,[2,ry],[3,Ev]],{id:[0,"id"]},{dropped:"cdkDropListDropped"}),ro(603979776,1,{_draggables:1}),Ei(256,null,Ev,void 0,[]),(e()(),Jr(16777216,null,null,1,null,sb)),vi(56,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),eo(57,0,null,null,5,"div",[["class","category"]],null,null,null,null,null)),(e()(),eo(58,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),fo(-1,null,["MISSIONS IN PROGRESS"])),(e()(),eo(60,0,null,null,2,"div",[["id","missionsScroll"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,cb)),vi(62,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,6,0,"barracks","army","Barracks"),e(n,9,0,"hammer","Workers","0 0 0 2px"),e(n,12,0,"attack","army","Attack strength"),e(n,15,0,"defense","army","Defense strength"),e(n,18,0,"coins","resources","Soldiers pay (collected every 30 days)"),e(n,21,0,!t.checkForTrainingSquare()),e(n,28,0,1!==t.selection),e(n,30,0,1===t.selection),e(n,32,0,5!==t.selection),e(n,34,0,5===t.selection),e(n,36,0,10!==t.selection),e(n,38,0,10===t.selection),e(n,40,0,!t.dismiss),e(n,42,0,t.dismiss),e(n,44,0,t.troops),e(n,49,0,t.isDev()),e(n,52,0,"recruitsList"),e(n,56,0,t.getRecruits()),e(n,62,0,t.getMissions())},function(e,n){var t=n.component;e(n,7,0,t.getTroopsSize(),t.getBarracksSize()),e(n,10,0,t.getUnemployed()),e(n,13,0,t.getAttackStrength()),e(n,16,0,t.getDefenseStrength()),e(n,19,0,t.getSoldiersPay(),t.getPaydayCounter()+1),e(n,50,0,ii(n,52).id,ii(n,52).disabled,ii(n,52)._dropListRef.isDragging(),ii(n,52)._dropListRef.isReceiving())})}function hb(e){return So(0,[(e()(),eo(0,0,null,null,1,"app-army",[],null,null,null,pb,qR)),vi(1,114688,null,0,QR,[Vf,xR,am,$R,jd,kt],null,null)],function(e,n){e(n,1,0)},null)}var db=jl("app-army",QR,hb,{},{},[]),gb=function(){return function(e,n,t,l,i,r){this.prayer=e,this.cost=n,this.requiredFaithLevel=t,this.religion=l,this.description=i,this.effect=r}}(),fb=function(){function e(e,n,t,l){this.servicesService=e,this.modalService=n,this.logService=t,this.resourcesService=l,this.faith=0,this.faithCap=40,this.faithLevel=1,this.faithShield=0,this.religion=Du.NONE,this.prayers=[],e.addService(zu.RELIGION,this),this.initPrayers()}return e.prototype.initPrayers=function(){var e=this;this.prayers=[],Object.entries(Is.PRAYERS).forEach(function(n){e.prayers.push(new gb(Pu[n[0]],n[1].FAITH,n[1].FAITH_LEVEL,n[1].RELIGION,n[1].DESCRIPTION,n[1].FINISH))})},e.prototype.load=function(e){this.faith=e.faith,this.faithCap=e.faithCap,this.faithLevel=e.faithLevel,this.religion=e.religion,this.faithShield=e.faithShield,this.prayers.find(function(e){return e.prayer===Pu.PREACH}).cost=e.preachCost},e.prototype.save=function(){return{faith:this.faith,faithCap:this.faithCap,faithLevel:this.faithLevel,religion:this.religion,faithShield:this.faithShield,preachCost:this.prayers.find(function(e){return e.prayer===Pu.PREACH}).cost}},e.prototype.reset=function(e,n){this.faith=0,this.faithCap=40,this.faithLevel=1,this.faithShield=0,this.religion=Du.NONE,this.prayers=[],this.initPrayers()},e.prototype.getFaith=function(){return this.faith},e.prototype.increaseFaith=function(e){this.faith<this.faithCap&&(this.faith+=e,this.faith===this.faithCap&&this.logService.success("Full faith"),this.faith>this.faithCap&&(this.faith=this.faithCap))},e.prototype.increaseFaithCap=function(e){this.faithCap+=e},e.prototype.decreaseFaithCap=function(e){this.faithCap-=e,this.faith>this.faithCap&&(this.faith=this.faithCap)},e.prototype.decreaseFaith=function(e){return this.faith-e>=0?(this.faith-=e,0):e-this.faith},e.prototype.getFaithCap=function(){return this.faithCap},e.prototype.getPrayers=function(){var e=this;return this.prayers.filter(function(n){return(n.religion===Du.NONE||n.religion===e.religion)&&n.requiredFaithLevel<=e.faithLevel})},e.prototype.pray=function(e){e.cost<=this.faith?(this.faith-=e.cost,e.effect(this.servicesService),e.prayer===Pu.PREACH&&(this.prayers.find(function(e){return e.prayer===Pu.PREACH}).cost+=10)):this.modalService.info("Not enough faith for this prayer!")},e.prototype.increaseFaithLevel=function(e){this.faithLevel+=e},e.prototype.increaseFaithShield=function(e){this.faithShield+=e},e.prototype.decreaseFaithShield=function(e){if(this.faithShield>=e)return this.faithShield-=e,0;var n=e-this.faithShield;return this.faithShield=0,n},e.prototype.getFaithLevel=function(){return this.faithLevel},e.prototype.getFaithShield=function(){return this.faithShield},e.prototype.getCurrentReligion=function(){return this.religion},e.prototype.getReligionSettings=function(e){return Is.getReligion(e)},e.prototype.changeReligion=function(e){var n=this;this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to change religion?");var t=this.modalService.registerForConfirmation().subscribe(function(l){if(t.unsubscribe(),l){var i=n.getReligionSettings(e);if(n.faith<i.FAITH)return void n.modalService.info("Not enough faith");var r=new Map;if(i.OFFERING.forEach(function(e){return r.set(e.resource,e.amount)}),!n.resourcesService.hasResources(r,"Religion",1,!0))return void n.modalService.info("Not enough offering resources");n.faith-=i.FAITH,n.resourcesService.decreaseResources(r,"Religion",!0),n.religion=e}})},e.ngInjectableDef=Oe({factory:function(){return new e(Ye(Vf),Ye(qf),Ye($f),Ye(am))},token:e,providedIn:"root"}),e}(),mb=function(){function e(e){this.religionService=e}return e.prototype.ngOnInit=function(){},e.prototype.getPrayerName=function(){return Vu.preparePrayerName(this.prayer.prayer)},e.prototype.isAvailable=function(){return this.religionService.getFaith()>=this.prayer.cost},e}(),vb=rl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{display:inline-block;width:47%;padding:3px;margin:3px;text-align:center;border:1px solid #000}#wrapperNotAvailable[_ngcontent-%COMP%]{display:inline-block;width:47%;padding:3px;margin:3px;text-align:center;border:1px solid #646464}#titleGrey[_ngcontent-%COMP%]{display:inline-block;color:#646464}.notMet[_ngcontent-%COMP%]{color:var(--negative-colour)}.title[_ngcontent-%COMP%]{text-align:left}hr[_ngcontent-%COMP%]{border-color:#000}#progress[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background-color:var(--active-colour);z-index:1}#text[_ngcontent-%COMP%]{position:relative;z-index:2}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}"]],data:{}});function Sb(e){return So(0,[(e()(),eo(0,0,null,null,9,"div",[["appTooltip",""],["class","tooltip"],["id","wrapper"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==ii(e,1).onmousemove(t)&&l),l},null,null)),vi(1,16384,null,0,Pg,[],{elementId:[0,"elementId"]},null),(e()(),eo(2,0,null,null,1,"div",[["id","title"]],null,null,null,null,null)),(e()(),fo(3,null,["",""])),(e()(),eo(4,0,null,null,5,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),fo(5,null,[" "," "])),(e()(),eo(6,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),fo(7,null,[" "," "])),(e()(),eo(8,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(9,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){e(n,1,0,n.component.id),e(n,9,0,"faith","religion")},function(e,n){var t=n.component;e(n,3,0,t.getPrayerName()),e(n,4,0,xl(1,"",t.id,"")),e(n,5,0,t.prayer.description),e(n,7,0,t.prayer.cost)})}function Eb(e){return So(0,[(e()(),eo(0,0,null,null,10,"div",[["appTooltip",""],["class","tooltip"],["id","wrapperNotAvailable"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==ii(e,1).onmousemove(t)&&l),l},null,null)),vi(1,16384,null,0,Pg,[],{elementId:[0,"elementId"]},null),(e()(),eo(2,0,null,null,1,"div",[["id","titleGrey"]],null,null,null,null,null)),(e()(),fo(3,null,["",""])),(e()(),eo(4,0,null,null,6,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),fo(5,null,[" "," "])),(e()(),eo(6,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),eo(7,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),fo(8,null,[" "," "])),(e()(),eo(9,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(10,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){e(n,1,0,n.component.id),e(n,10,0,"faith","religion")},function(e,n){var t=n.component;e(n,3,0,t.getPrayerName()),e(n,4,0,xl(1,"",t.id,"")),e(n,5,0,t.prayer.description),e(n,8,0,t.prayer.cost)})}function yb(e){return So(0,[(e()(),Jr(16777216,null,null,1,null,Sb)),vi(1,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,Eb)),vi(3,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.isAvailable()),e(n,3,0,!t.isAvailable())},null)}var Rb=function(){function e(e,n){this.religionService=e,this.resourcesService=n}return e.prototype.ngOnInit=function(){},e.prototype.getFaith=function(){return this.religionService.getFaith()},e.prototype.getFaithCap=function(){return this.religionService.getFaithCap()},e.prototype.increaseFaith=function(e){this.religionService.increaseFaith(e)},e.prototype.isDev=function(){return!is.production},e.prototype.getPrayers=function(){return this.religionService.getPrayers()},e.prototype.pray=function(e){this.religionService.pray(e)},e.prototype.getFaithShield=function(){return Vu.round(this.religionService.getFaithShield(),2)},e.prototype.getReligions=function(){return[Du.NONE,Du.FERTILITY,Du.NATURE,Du.TECHNOLOGY,Du.WAR]},e.prototype.getReligionName=function(e){return Vu.prepareReligionName(e)},e.prototype.getCurrentReligion=function(){return this.religionService.getCurrentReligion()},e.prototype.getCurrentReligionName=function(){return Du[this.getCurrentReligion()]},e.prototype.getCurrentReligionDisplayName=function(){return Vu.prepareReligionName(this.getCurrentReligion())},e.prototype.changeReligion=function(e){this.religionService.changeReligion(e)},e.prototype.getReligionSettings=function(e){return Is.getReligion(e)},e.prototype.getResourceString=function(e){return Iu[e]},e.prototype.hasResource=function(e){return 0===this.resourcesService.hasResource(e.resource,e.amount,"Religion",!0)},e}(),bb=rl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:100%;margin:.5%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#table[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;border:1px solid #000;height:85%}.column[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:auto;border:1px solid #000}#prayers[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 70%;overflow-y:auto}#religions[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1 0 auto;overflow-y:auto}.prayer[_ngcontent-%COMP%]{display:inline}.tableTitle[_ngcontent-%COMP%]{border-bottom:1px solid #000;text-align:center}app-prayer[_ngcontent-%COMP%]{cursor:pointer}.faith[_ngcontent-%COMP%]{margin-right:-2px}.religion[_ngcontent-%COMP%]{border:1px solid #000;text-align:center;margin:3px;cursor:pointer}.active[_ngcontent-%COMP%]{background-color:var(--active-colour);cursor:auto}.tooltip[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:100px}.notMet[_ngcontent-%COMP%]{color:var(--negative-colour)}.inline[_ngcontent-%COMP%]{display:inline}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center}.icon2[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}"]],data:{}});function Ob(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.increaseFaith(10)&&l),l},null,null)),(e()(),fo(-1,null,["Increase faith"]))],null,null)}function Tb(e){return So(0,[(e()(),eo(0,0,null,null,2,"div",[["class","prayer"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"app-prayer",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.pray(e.context.$implicit)&&l),l},yb,vb)),vi(2,114688,null,0,mb,[fb],{prayer:[0,"prayer"],id:[1,"id"]},null)],function(e,n){e(n,2,0,n.context.$implicit,n.context.index)},null)}function Cb(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[["class","religion active"]],null,null,null,null,null)),(e()(),fo(1,null,[" "," "]))],null,function(e,n){e(n,1,0,n.component.getReligionName(n.parent.context.$implicit))})}function Ib(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[["class","inline"]],null,null,null,null,null)),(e()(),fo(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.getReligionSettings(n.parent.parent.context.$implicit).FAITH)})}function Ab(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[["class","inline notMet"]],null,null,null,null,null)),(e()(),fo(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.getReligionSettings(n.parent.parent.context.$implicit).FAITH)})}function Nb(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(-1,null,["offering:"]))],null,null)}function _b(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[["class","inline"]],null,null,null,null,null)),(e()(),fo(1,null,[""," "]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.amount)})}function wb(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[["class","inline notMet"]],null,null,null,null,null)),(e()(),fo(1,null,[""," "]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.amount)})}function Pb(e){return So(0,[(e()(),eo(0,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,6,"div",[["class","icon2"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,_b)),vi(3,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,wb)),vi(5,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(6,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(7,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){var t=n.component;e(n,3,0,t.hasResource(n.context.$implicit)),e(n,5,0,!t.hasResource(n.context.$implicit)),e(n,7,0,t.getResourceString(n.context.$implicit.resource),"resources")},null)}function xb(e){return So(0,[(e()(),eo(0,0,null,null,16,"div",[["appTooltip",""],["class","religion tooltip"]],null,[[null,"click"],[null,"mousemove"]],function(e,n,t){var l=!0,i=e.component;return"mousemove"===n&&(l=!1!==ii(e,1).onmousemove(t)&&l),"click"===n&&(l=!1!==i.changeReligion(e.parent.context.$implicit)&&l),l},null,null)),vi(1,16384,null,0,Pg,[],{elementId:[0,"elementId"]},null),(e()(),fo(2,null,[" "," "])),(e()(),eo(3,0,null,null,13,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),fo(4,null,[" "," "])),(e()(),eo(5,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),eo(6,0,null,null,6,"div",[["class","icon2"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,Ib)),vi(8,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,Ab)),vi(10,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(11,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(12,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Jr(16777216,null,null,1,null,Nb)),vi(14,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,Pb)),vi(16,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,1,0,0-n.parent.context.$implicit),e(n,8,0,t.getFaith()>=t.getReligionSettings(n.parent.context.$implicit).FAITH),e(n,10,0,t.getFaith()<t.getReligionSettings(n.parent.context.$implicit).FAITH),e(n,12,0,"faith","religion"),e(n,14,0,t.getReligionSettings(n.parent.context.$implicit).OFFERING.length>0),e(n,16,0,t.getReligionSettings(n.parent.context.$implicit).OFFERING)},function(e,n){var t=n.component;e(n,2,0,t.getReligionName(n.parent.context.$implicit)),e(n,3,0,xl(1,"",0-n.parent.context.$implicit,"")),e(n,4,0,t.getReligionName(n.parent.context.$implicit))})}function kb(e){return So(0,[(e()(),eo(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,Cb)),vi(2,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,xb)),vi(4,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,n.context.$implicit===t.getCurrentReligion()),e(n,4,0,n.context.$implicit!==t.getCurrentReligion())},null)}function Mb(e){return So(0,[(e()(),eo(0,0,null,null,32,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),eo(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["Religion"])),(e()(),eo(4,0,null,null,9,"div",[],null,null,null,null,null)),(e()(),eo(5,0,null,null,1,null,null,null,null,null,null,null)),(e()(),fo(-1,null,["Faith"])),(e()(),eo(7,0,null,null,1,"app-icon",[["class","faith"]],null,null,null,Mg,kg)),vi(8,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),eo(9,0,null,null,1,null,null,null,null,null,null,null)),(e()(),fo(-1,null,[":"])),(e()(),fo(11,null,[" ","/"," "])),(e()(),Jr(16777216,null,null,1,null,Ob)),vi(13,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(14,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),fo(-1,null,[" Faith shield "])),(e()(),eo(16,0,null,null,1,"app-icon",[["class","prayer"]],null,null,null,Mg,kg)),vi(17,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),fo(18,null,[" : "," "])),(e()(),eo(19,0,null,null,13,"div",[["id","table"]],null,null,null,null,null)),(e()(),eo(20,0,null,null,7,"div",[["class","column"],["id","prayers"]],null,null,null,null,null)),(e()(),eo(21,0,null,null,3,"span",[["class","tableTitle"]],null,null,null,null,null)),(e()(),fo(-1,null,[" Prayers "])),(e()(),eo(23,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(24,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),eo(25,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,Tb)),vi(27,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),eo(28,0,null,null,4,"div",[["class","column"],["id","religions"]],null,null,null,null,null)),(e()(),eo(29,0,null,null,1,"span",[["class","tableTitle"]],null,null,null,null,null)),(e()(),fo(-1,null,["Religions"])),(e()(),Jr(16777216,null,null,1,null,kb)),vi(32,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,8,0,"faith","religion"),e(n,13,0,t.isDev()),e(n,17,0,"faith_shield","religion","Faith shield"),e(n,24,0,t.getCurrentReligionName(),"religion",t.getCurrentReligionDisplayName()),e(n,27,0,t.getPrayers()),e(n,32,0,t.getReligions())},function(e,n){var t=n.component;e(n,11,0,t.getFaith(),t.getFaithCap()),e(n,18,0,t.getFaithShield())})}function Db(e){return So(0,[(e()(),eo(0,0,null,null,1,"app-religion",[],null,null,null,Mb,bb)),vi(1,114688,null,0,Rb,[fb,am],null,null)],function(e,n){e(n,1,0)},null)}var Lb=jl("app-religion",Rb,Db,{},{},[]),Fb=function(){function e(e,n,t){this.servicesService=e,this.calendarService=n,this.optionsService=t,this.forecastPeriod=1,this.forecast=[],e.addService(zu.WEATHER,this),this.tick(0)}return e.prototype.load=function(e){this.forecastPeriod=void 0!==e.forecastPeriod?e.forecastPeriod:1,this.forecast=e.forecast},e.prototype.save=function(){return{forecastPeriod:this.forecastPeriod,forecast:this.forecast}},e.prototype.reset=function(e,n){this.forecastPeriod=1,this.forecast=[],this.today=null,this.tick(0)},e.prototype.tick=function(e){for(var n=this.calendarService.getAbsoluteDay();this.forecast.length>0&&this.forecast[0][0]<n;)this.forecast.shift();for(;this.forecast.length<this.forecastPeriod;){var t=n;0!==this.forecast.length&&(t=this.forecast[this.forecast.length-1][0]+1),this.forecast.push(this.predictDay(t))}this.today=this.forecast[0]},e.prototype.predictDay=function(e){var n,t;switch(this.calendarService.getSeasonForAbsoluteDay(e)){case Yf.SPRING:n=Qu.randomBetween(10,25),t=Qu.randomElement([{item:Xu.SUN,chance:40},{item:Xu.CLOUDS,chance:25},{item:Xu.WIND,chance:14},{item:Xu.RAIN,chance:20},{item:Xu.STORM,chance:1}]);break;case Yf.SUMMER:n=Qu.randomBetween(15,35),t=Qu.randomElement([{item:Xu.SUN,chance:50},{item:Xu.CLOUDS,chance:10},{item:Xu.WIND,chance:10},{item:Xu.RAIN,chance:20},{item:Xu.STORM,chance:10}]);break;case Yf.AUTUMN:n=Qu.randomBetween(10,25),t=Qu.randomElement([{item:Xu.SUN,chance:20},{item:Xu.CLOUDS,chance:40},{item:Xu.WIND,chance:10},{item:Xu.RAIN,chance:25},{item:Xu.STORM,chance:5}]);break;case Yf.WINTER:n=Qu.randomBetween(-20,5),t=Qu.randomElement([{item:Xu.SUN,chance:30},{item:Xu.CLOUDS,chance:20},{item:Xu.WIND,chance:15},{item:Xu.SNOW,chance:25},{item:Xu.STORM,chance:10}])}return[e,t,n]},e.prototype.getCurrentWeather=function(){return this.today[1]},e.prototype.getCurrentTemperature=function(){return this.optionsService.getOption(Wf.METRIC)?this.today[2]:1.8*this.today[2]+32},e.prototype.increaseForecastPeriod=function(e){this.forecastPeriod+=e},e.prototype.isWeather=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.includes(this.getCurrentWeather())},e.prototype.getForecast=function(){return this.forecast},e.prototype.getForecastPeriod=function(){return this.forecastPeriod},e.ngInjectableDef=Oe({factory:function(){return new e(Ye(Vf),Ye(jf),Ye(zf))},token:e,providedIn:"root"}),e}(),Ub=function(){function e(e,n,t){var l=this;this.weatherService=e,this.calendarService=n,this.optionsService=t,this.metric=this.optionsService.getOption(Wf.METRIC),this.optionsSubscription||(this.optionsSubscription=this.optionsService.registerForOptionsChange().subscribe(function(){return l.metric=l.optionsService.getOption(Wf.METRIC)}))}return e.prototype.ngOnInit=function(){},e.prototype.getTodayWeather=function(){return this.weatherService.getCurrentWeather()},e.prototype.getTodayTemperature=function(){return this.weatherService.getCurrentTemperature()},e.prototype.getWeatherName=function(e){return Xu[e].toLowerCase()},e.prototype.getForecast=function(){return this.weatherService.getForecast()},e.prototype.getForecastPeriod=function(){return this.weatherService.getForecastPeriod()},e.prototype.calculateTemp=function(e){return this.optionsService.getOption(Wf.METRIC)?e:1.8*e+32},e.prototype.isDev=function(){return!is.production},e.prototype.progress10Days=function(){this.calendarService.progressDays(10)},e}(),Hb=rl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{margin:.5%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#forecast[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;border:1px solid #000;text-align:center;overflow-x:auto}.weather[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 0 40px;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;border-right:1px solid #000}.day[_ngcontent-%COMP%]{width:60px;border-bottom:1px solid #000}"]],data:{}});function Gb(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.progress10Days()&&l),l},null,null)),(e()(),fo(-1,null,["Progress 10 days"]))],null,null)}function Bb(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["\xb0C"]))],null,null)}function Vb(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["\xb0F"]))],null,null)}function Wb(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[["class","day"]],null,null,null,null,null)),(e()(),fo(-1,null,["today"]))],null,null)}function zb(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[["class","day"]],null,null,null,null,null)),(e()(),fo(1,null,["+",""]))],null,function(e,n){e(n,1,0,n.parent.context.index)})}function Yb(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["\xb0C"]))],null,null)}function Kb(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["\xb0F"]))],null,null)}function jb(e){return So(0,[(e()(),eo(0,0,null,null,13,"div",[["class","weather"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,Wb)),vi(2,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,zb)),vi(4,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(5,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(6,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),eo(7,0,null,null,6,"span",[["id","temp"]],null,null,null,null,null)),(e()(),fo(8,null,["",""])),po(9,2),(e()(),Jr(16777216,null,null,1,null,Yb)),vi(11,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,Kb)),vi(13,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,0===n.context.index),e(n,4,0,0!==n.context.index),e(n,6,0,t.getWeatherName(n.context.$implicit[1]),"weather"),e(n,11,0,t.metric),e(n,13,0,!t.metric)},function(e,n){var t=n.component,l=tl(n,8,0,e(n,9,0,ii(n.parent.parent,0),t.calculateTemp(n.context.$implicit[2]),"0.0-1"));e(n,8,0,l)})}function $b(e){return So(0,[(e()(),eo(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),fo(-1,null,["Weather forecast: "])),(e()(),eo(2,0,null,null,2,"div",[["id","forecast"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,jb)),vi(4,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,4,0,n.component.getForecast())},null)}function Qb(e){return So(0,[Si(0,va,[er]),(e()(),eo(1,0,null,null,17,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),eo(2,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),eo(3,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["Weather"])),(e()(),Jr(16777216,null,null,1,null,Gb)),vi(6,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),fo(7,null,[" Weather: "," "])),(e()(),eo(8,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(9,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),eo(10,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),fo(11,null,[" Temperature: ",""])),po(12,2),(e()(),Jr(16777216,null,null,1,null,Bb)),vi(14,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,Vb)),vi(16,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,$b)),vi(18,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,6,0,t.isDev()),e(n,9,0,t.getWeatherName(t.getTodayWeather()),"weather"),e(n,14,0,t.metric),e(n,16,0,!t.metric),e(n,18,0,t.getForecastPeriod()>1)},function(e,n){var t=n.component;e(n,7,0,t.getWeatherName(t.getTodayWeather()));var l=tl(n,11,0,e(n,12,0,ii(n,0),t.getTodayTemperature(),"0.0-1"));e(n,11,0,l)})}function qb(e){return So(0,[(e()(),eo(0,0,null,null,1,"app-weather",[],null,null,null,Qb,Hb)),vi(1,114688,null,0,Ub,[Fb,jf,zf],null,null)],function(e,n){e(n,1,0)},null)}var Xb=jl("app-weather",Ub,qb,{},{},[]),Zb=function(){function e(e){this.optionsService=e,this.progress=0,this.text=""}return Object.defineProperty(e.prototype,"progressReInput",{set:function(e){this.progressRef=e,this.ngOnChanges()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labelRefInput",{set:function(e){this.labelRef=e,this.ngOnChanges()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"label2RefInput",{set:function(e){this.label2Ref=e,this.ngOnChanges()},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.ngOnChanges=function(){this.progressBarsEnabled()?(this.progressRef&&(this.progressRef.nativeElement.style.width=this.progress+"%"),this.labelRef&&(this.labelRef.nativeElement.innerHTML=this.text&&""!==this.text?this.text:this.progress.toFixed(2)+"%")):this.label2Ref&&(this.label2Ref.nativeElement.innerHTML=this.text,this.label2Ref.nativeElement.innerHTML=this.progress.toFixed(2)+"%")},e.prototype.progressBarsEnabled=function(){return this.optionsService.getOption(Wf.VISUAL_PROGRESS_BARS)},e}(),Jb=rl({encapsulation:0,styles:[["#progressBar[_ngcontent-%COMP%]{position:relative;width:95%;height:100%;display:inline-block;text-align:center;background-color:#ddd;border:1px solid #000;margin-top:-1px}#progressBar2[_ngcontent-%COMP%]{position:relative;width:95%;height:100%;display:inline-block;text-align:center;margin-top:-1px}#progress[_ngcontent-%COMP%]{height:100%;background-color:var(--active-colour);text-align:center;color:#fff}#label[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;width:100%;font-size:1.2em;text-align:center}#label2[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;width:100%;font-size:1.2em;text-align:center;font-weight:700}"]],data:{}});function eO(e){return So(0,[(e()(),eo(0,0,null,null,2,"div",[["id","progressBar"]],null,null,null,null,null)),(e()(),eo(1,0,[[1,0],["progress",1]],null,0,"div",[["id","progress"]],null,null,null,null,null)),(e()(),eo(2,0,[[2,0],["label",1]],null,0,"div",[["id","label"]],null,null,null,null,null))],null,null)}function nO(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[["id","progressBar2"]],null,null,null,null,null)),(e()(),eo(1,0,[[3,0],["label2",1]],null,0,"div",[["id","label2"]],null,null,null,null,null))],null,null)}function tO(e){return So(0,[ro(671088640,1,{progressReInput:0}),ro(671088640,2,{labelRefInput:0}),ro(671088640,3,{label2RefInput:0}),(e()(),Jr(16777216,null,null,1,null,eO)),vi(4,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,nO)),vi(6,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,4,0,t.progressBarsEnabled()),e(n,6,0,!t.progressBarsEnabled())},null)}var lO=function(){function e(e,n,t,l,i,r,o,u){this.data={},this.id=e,this.name=n,this.diplomacy=t,this.colour=l,this.focus=i,this.regions=r,this.data=o,this.capital=u}return e.prototype.getDiplomacy=function(){return this.diplomacy<-25?"hostile":this.diplomacy>=-25&&this.diplomacy<25?"neutral":this.diplomacy>=25?"friendly":void 0},e.prototype.decreaseDiplomacy=function(e){this.diplomacy-=e,this.diplomacy<-100&&(this.diplomacy=-100)},e.prototype.increaseDiplomacy=function(e){this.diplomacy+=e,this.diplomacy>100&&(this.diplomacy=100)},e}(),iO=function(){function e(e,n,t,l,i,r,o,u,s,a,c,p,h,d,g){void 0===g&&(g=0),this.id=e,this.path=n,this.center=t,this.neighbours=l,this.land=i,this.forest=r,this.mountains=o,this.wealth=u,this.economy=s,this.defense=a,this.harbour=c,this.target=p,this.spy=h,this.army=d,this.navy=new _R([]),this.lastAttack=g}return e.prototype.getSize=function(){return this.land+this.forest+this.mountains},e}(),rO=function(){return function(e,n){this.id=e,this.neighbours=n}}(),oO=function(e){return e[e.NONE=0]="NONE",e[e.PEACE=1]="PEACE",e[e.SAVE_WEALTH=2]="SAVE_WEALTH",e[e.ECONOMY_BUILD=3]="ECONOMY_BUILD",e[e.ECONOMY_COLONIZE=4]="ECONOMY_COLONIZE",e[e.DEFENSE_WALL=5]="DEFENSE_WALL",e[e.DEFENSE_ARCHER=6]="DEFENSE_ARCHER",e[e.DEFENSE_GATHER_FORCES=7]="DEFENSE_GATHER_FORCES",e[e.OFFENSE_MILITIA=8]="OFFENSE_MILITIA",e[e.OFFENSE_SPEARMAN=9]="OFFENSE_SPEARMAN",e[e.OFFENSE_SWORDSMAN=10]="OFFENSE_SWORDSMAN",e[e.OFFENSE_LIGHT_CAVALRY=11]="OFFENSE_LIGHT_CAVALRY",e[e.OFFENSE_GATHER_FORCES=12]="OFFENSE_GATHER_FORCES",e[e.OFFENSE_COLONIZE=13]="OFFENSE_COLONIZE",e[e.OFFENSE_PLUNDER=14]="OFFENSE_PLUNDER",e[e.OFFENSE_CONQUER=15]="OFFENSE_CONQUER",e[e.OFFENSE_RECLAIM_CAPITAL=16]="OFFENSE_RECLAIM_CAPITAL",e}({}),uO=function(){function e(e,n,t,l,i,r,o,u,s,a){this.speed=3,this.routePaths=[],this.servicesService=e,this.mission=t,this.settings=bs.getMission(t),this.missionTime=this.settings.TIME,this.description=this.settings.DESCRIPTION,this.icon=this.settings.ICON,this.id=n,this.targetIndex=l,this.route=i,this.progress=r,this.status=o,this.ownerCountry=u,this.army=s,this.data=a,e&&(this.armyService=e.getService(zu.ARMY),this.logService=e.getService(zu.LOG),this.worldService=e.getService(zu.WORLD),this.gameService=e.getService(zu.GAME)),this.initRoutePaths(),"{mission}"===this.status?(this.origin=this.routePaths[this.routePaths.length-1].target,this.target=this.routePaths[this.routePaths.length-1].target):(this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target),this.speed=0===this.getMissionType()?s.getArmySpeed():s.getNavy(!1).getArmySpeed()}return e.prototype.getMissionName=function(){return Vu.prepareMissionName(this.mission)},e.prototype.getTargetRegionId=function(){return this.route.path[this.targetIndex]},e.prototype.getOrigin=function(){return this.origin},e.prototype.getTarget=function(){return this.target},e.prototype.getTravelSpeed=function(){return 60*this.speed/3/this.getDistance()},e.prototype.tick=function(){if("traveling"===this.status)this.progress<100?(this.progress+=this.getTravelSpeed(),this.progress>100&&(this.progress=100)):(this.evaluateRegion(),this.targetIndex===this.route.path.length-1?(this.origin=this.target,this.isInstant()?this.calculateMission()?(this.status="returning",this.route.reversePath(),this.targetIndex=1,this.initRoutePaths(),this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target):this.status="finished":this.status="{mission}"):(this.targetIndex+=1,this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target),this.progress=0);else if("{mission}"===this.status)if(this.progress<100)this.progress+=1/this.missionTime;else{if(this.calculateMission()){this.status="returning",this.speed=this.army.getArmySpeed();var e=this.worldService.findPath(this.getTargetRegionId(),this.route.path[0],this.ownerCountry.id,!1);this.route.reversePath(),this.targetIndex=1,this.initRoutePaths(),this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target,e&&(e.path.length<this.route.path.length||!this.validateRoute())&&(this.route=e,this.targetIndex=1,this.initRoutePaths(),this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target)}else this.worldService.clearMission(),this.status="finished";this.progress=0}else"returning"!==this.status&&"canceled"!==this.status||(this.progress<100?(this.progress+=this.getTravelSpeed(),this.progress>100&&(this.progress=100)):(this.evaluateRegion(),this.targetIndex===this.route.path.length-1?(this.finish("canceled"===this.status),this.worldService.getSelectedMission()&&this.worldService.getSelectedMission().id===this.id&&this.worldService.clearMission(),this.status="finished"):(this.targetIndex+=1,this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target,this.progress=0)))},e.prototype.getDisplayProgress=function(){return"{mission}"===this.status?this.progress:(100*(this.targetIndex-1)+this.progress)/(this.route.path.length-1)},e.prototype.getProgressPercentage=function(){return this.progress/100},e.prototype.isFinished=function(){return"finished"===this.status},e.prototype.getStatus=function(){return this.status.replace("{mission}",Vu.prepareMissionName(this.mission))},e.prototype.getDistance=function(){return this.calculatePointsDistance(this.origin,this.target)},e.prototype.calculatePointsDistance=function(e,n){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))},e}(),sO=function(){function e(e){this.distance=0,this.path=e}return e.prototype.reversePath=function(){this.path=this.path.reverse()},e.prototype.calculatePathDistance=function(e){if(0!==this.distance)return this.distance;for(var n=0,t=0;t<this.path.length-1;t++)n+=this.calculatePointsDistance(e.getRegion(this.path[t]).center,e.getRegion(this.path[t+1]).center);return this.distance=n,n},e.prototype.calculateSeaPathDistance=function(e){if(0!==this.distance)return this.distance;for(var n=0,t=0;t<this.path.length-1;t++)n+=this.calculatePointsDistance(e.getSeaArea(this.path[t]).center,e.getSeaArea(this.path[t+1]).center);return this.distance=n,n},e.prototype.calculatePointsDistance=function(e,n){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))},e}(),aO=function(e){function n(n,t,l,i,r,o,u,s,a,c){return e.call(this,n,t,l,i,r,o,u,s,a,c)||this}return i(n,e),n.prototype.toJSON=function(){var e=[];return this.army.units.forEach(function(n){return e.push({troop:n.troop,size:n.size})}),{type:this.mission,id:this.id,ownerCountryId:this.ownerCountry.id,army:e,route:this.route.path,progress:this.progress,targetIndex:this.targetIndex,status:this.status,data:this.data}},n.prototype.getDestinationTargetRegion=function(){return this.worldService.getRegion(this.route.path[this.route.path.length-1])},n.prototype.getMissionType=function(){return 0},n.prototype.getTravelSpeed=function(){var n=e.prototype.getTravelSpeed.call(this);return this.ownerCountry.id===Uu.PLAYER&&this.gameService.isEnabled(_u.LOGISTICS)&&(n*=1.1),n},n.prototype.evaluateRegion=function(){var e=this.worldService.getRegion(this.getTargetRegionId()),n=this.worldService.getCountryByRegionId(this.getTargetRegionId());if(!this.validateRoute()){var t=this.worldService.findPath(e.id,this.getDestinationTargetRegion().id,this.ownerCountry.id,!1);if(t&&t.path.length>1){var l=new sO(this.route.path.splice(0,this.targetIndex));l.path=l.path.concat(t.path),this.route=l,this.initRoutePaths(),this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target}}if(e.id!==this.getDestinationTargetRegion().id&&(n.id===Uu.NEUTRAL&&e.army.hasAny()||this.ownerCountry.id!==n.id)&&e.army.hasAny()){var i=this.armyService.calculateAttack(this.army,e.army,e.defense,this.ownerCountry.id===Uu.PLAYER,this.ownerCountry.id!==Uu.PLAYER);i.attacker=this.ownerCountry.id,i.defender=n.id,this.ownerCountry.id!==Uu.PLAYER&&n.id!==Uu.PLAYER||(i.result?i.message=this.ownerCountry.id===Uu.PLAYER?"We managed to pass through enemy region":"Enemy managed to pass through our region":(this.data&&(this.ownerCountry.id===Uu.PLAYER?(i.message="We failed passing through enemy region",e.wealth+=this.data):(i.message="We defeated enemy armies passing through our region",this.armyService.loot(this.data))),this.worldService.getSelectedMission()&&this.worldService.getSelectedMission().id===this.id&&this.worldService.clearMission(),this.status="finished"),this.logService.fightReport(i))}},n.prototype.validateRoute=function(){for(var e=this.targetIndex;e<this.route.path.length-1;e++){var n=this.worldService.getCountryByRegionId(this.route.path[e]),t=this.worldService.getRegion(this.route.path[e]);if(n.id===Uu.NEUTRAL&&t.army.hasAny())return!1;if(n.id===Uu.NEUTRAL)return!0;if(n.id!==this.ownerCountry.id)return!1}return!0},n.prototype.initRoutePaths=function(){this.routePaths=[];for(var e=0;e<this.route.path.length-1;e++){var n=this.worldService.getRegion(this.route.path[e]),t=this.worldService.getRegion(this.route.path[e+1]);this.routePaths.push({origin:{x:n.center.x,y:n.center.y},target:{x:t.center.x,y:t.center.y}})}},n.prototype.cancel=function(){this.mission!==xu.PLUNDER&&this.mission!==xu.CONQUER&&this.mission!==xu.MOVE||(this.progress=100-this.progress,this.status="returning",this.route.reversePath(),this.targetIndex=this.route.path.length-this.targetIndex,this.initRoutePaths(),this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target)},n.prototype.getIconPath=function(){return"assets/army/mission/"+this.icon+".svg"},n}(uO),cO=function(e){function n(n,t,l,i,r,o,u,s,a){void 0===o&&(o=0),void 0===u&&(u=1),void 0===s&&(s="traveling"),void 0===a&&(a=null);var c=e.call(this,n,t,xu.COLONIZE,u,r,o,s,l,i,a)||this;return n&&(c.landService=n.getService(zu.LAND)),c}return i(n,e),n.prototype.isInstant=function(){return!1},n.prototype.calculateMission=function(){var e=this.worldService.getRegion(this.getTargetRegionId());if(this.worldService.getCountryByRegionId(e.id).id!==Uu.PLAYER){if(this.ownerCountry.id!==Uu.PLAYER&&e.army.hasAny()&&e.army.getArmyPower(!1)<10)this.logService.success("Our troops lost against enemy colonists"),e.army=new _R([]);else if(this.ownerCountry.id!==Uu.PLAYER&&e.army.hasAny())return!1;Qu.chance(5*this.army.getUnit(Lu.COLONIST).size/100)?(this.worldService.ownRegion(this.getTargetRegionId(),this.ownerCountry),this.army=new _R([]),this.ownerCountry.id===Uu.PLAYER&&this.logService.success("We colonized new region!")):this.ownerCountry.id===Uu.PLAYER&&this.logService.warning("Our colonists lost against the harsh conditions and died during attempt to colonize new region")}else this.ownerCountry.id===Uu.PLAYER&&this.logService.warning("Our colonists died in a bandits ambush");return!1},n.prototype.finish=function(e){},n}(aO),pO=function(e){function n(n,t,l,i,r,o,u,s,a){void 0===o&&(o=0),void 0===u&&(u=1),void 0===s&&(s="traveling"),void 0===a&&(a=null);var c=e.call(this,n,t,xu.CONQUER,u,r,o,s,l,i,a)||this;return n&&(c.landService=n.getService(zu.LAND)),c}return i(n,e),n.prototype.isInstant=function(){return!1},n.prototype.calculateMission=function(){if(this.ownerCountry.id===Uu.PLAYER){var e=this.worldService.getRegion(this.getTargetRegionId());return(n=this.worldService.getCountryByRegionId(e.id)).id===this.ownerCountry.id||((t=this.armyService.calculateAttack(this.army,e.army,e.defense,!0,!1)).attacker=this.ownerCountry.id,t.defender=n.id,t.result?(t.message="Region conquered",this.logService.fightReport(t),this.armyService.loot(50*e.wealth+200*e.economy),n.diplomacy<25?n.decreaseDiplomacy(30):n.diplomacy=-50,n.capital===e.id&&(n.diplomacy=-100),this.worldService.ownRegion(this.getTargetRegionId(),this.ownerCountry),this.getDestinationTargetRegion().army.addArmy(this.army),this.army=new _R([]),!1):(t.message="Our army has been defeated",this.logService.fightReport(t),n.diplomacy<25?n.decreaseDiplomacy(15):n.diplomacy=30,!1))}var n,t;return e=this.worldService.getRegion(this.getTargetRegionId()),(n=this.worldService.getCountryByRegionId(e.id)).id===this.ownerCountry.id||((t=this.armyService.calculateAttack(this.army,e.army,e.defense,!1,n.id===Uu.PLAYER)).attacker=this.ownerCountry.id,t.defender=n.id,t.result?0!==e.id?(n.id===Uu.PLAYER&&(this.reduceLand(e),t.message="Our region has been conquered by enemy!",this.logService.fightReport(t)),this.worldService.ownRegion(this.getTargetRegionId(),this.ownerCountry),this.getDestinationTargetRegion().army.addArmy(this.army),this.army=new _R([]),!1):(this.data=this.armyService.lootPlayer(50*this.army.getArmySize()),t.message="Our capital has been plundered!",this.logService.fightReport(t),!0):(n.id===Uu.PLAYER&&(t.message="We have defeated enemy conquer party!",this.logService.fightReport(t)),e.target=oO.DEFENSE_ARCHER,!1))},n.prototype.finish=function(e){var n=this.getDestinationTargetRegion();n.army.addArmy(this.army),e||(n.wealth+=this.data)},n.prototype.reduceLand=function(e){var n=e.land+e.forest+e.mountains,t=0,l=0,i=0;if(this.landService.getLand()>=e.land?(n-=e.land,t+=e.land,this.landService.removeLand(e.land)):(n-=this.landService.getLand(),t+=this.landService.getLand(),this.landService.removeLand(this.landService.getLand())),this.landService.getForest()>=e.forest?(n-=e.forest,l+=e.forest,this.landService.removeForest(e.forest)):(n-=this.landService.getForest(),l+=this.landService.getForest(),this.landService.removeForest(this.landService.getForest())),this.landService.getMountains()>=e.mountains?(n-=e.mountains,i+=e.mountains,this.landService.removeMountains(e.mountains)):(n-=this.landService.getMountains(),i+=this.landService.getMountains(),this.landService.removeMountains(this.landService.getMountains())),n>0){if(this.landService.getForest()>0){if(this.landService.getForest()>n)return this.landService.removeForest(n),void this.setLands(e,t,l+=n,i);n-=this.landService.getForest(),l+=this.landService.getForest(),this.landService.removeForest(this.landService.getForest())}if(this.landService.getLand()>0){if(this.landService.getLand()>n)return this.landService.removeLand(n),void this.setLands(e,t+=n,l,i);n-=this.landService.getLand(),t+=this.landService.getLand(),this.landService.removeLand(this.landService.getLand())}if(this.landService.getMountains()>0){if(this.landService.getMountains()>n)return this.landService.removeMountains(n),void this.setLands(e,t,l,i+=n);n-=this.landService.getMountains(),i+=this.landService.getMountains(),this.landService.removeMountains(this.landService.getMountains())}}this.setLands(e,t,l,i)},n.prototype.setLands=function(e,n,t,l){e.land=n,e.forest=t,e.mountains=l},n}(aO),hO=function(e){function n(n,t,l,i,r,o,u,s,a){return void 0===o&&(o=0),void 0===u&&(u=1),void 0===s&&(s="traveling"),void 0===a&&(a=null),e.call(this,n,t,xu.MOVE,u,r,o,s,l,i,a)||this}return i(n,e),n.prototype.isInstant=function(){return!0},n.prototype.calculateMission=function(){var e=this.getDestinationTargetRegion(),n=this.worldService.getCountryByRegionId(e.id);return n.id!==Uu.PLAYER&&n.id!==Uu.NEUTRAL||(e.army.addArmy(this.army),this.army=new _R([]),!1)},n.prototype.finish=function(e){this.getDestinationTargetRegion().army.addArmy(this.army),this.army=new _R([])},n}(aO),dO=function(e){function n(n,t,l,i,r,o,u,s,a){return void 0===o&&(o=0),void 0===u&&(u=1),void 0===s&&(s="traveling"),void 0===a&&(a=null),e.call(this,n,t,xu.PLUNDER,u,r,o,s,l,i,a)||this}return i(n,e),n.prototype.isInstant=function(){return!1},n.prototype.calculateMission=function(){if(this.ownerCountry.id===Uu.PLAYER){var e=this.worldService.getRegion(this.getTargetRegionId());return(n=this.worldService.getCountryByRegionId(e.id)).id===this.ownerCountry.id||((t=this.armyService.calculateAttack(this.army,e.army,e.defense,!0,!1)).attacker=this.ownerCountry.id,t.defender=n.id,t.result?(n.decreaseDiplomacy(n.diplomacy<25?10:30),this.data=e.wealth,e.wealth=0,t.message="Region plundered",this.logService.fightReport(t),e.target=oO.DEFENSE_ARCHER,!0):(t.message="Our army has been defeated",this.logService.fightReport(t),n.decreaseDiplomacy(n.diplomacy<25?5:15),e.target=oO.DEFENSE_ARCHER,!1))}var n,t;return e=this.worldService.getRegion(this.getTargetRegionId()),(n=this.worldService.getCountryByRegionId(e.id)).id===this.ownerCountry.id||((t=this.armyService.calculateAttack(this.army,e.army,e.defense,!1,n.id===Uu.PLAYER)).attacker=this.ownerCountry.id,t.defender=n.id,t.result?n.id===Uu.PLAYER||n.id===Uu.NEUTRAL?(this.data=this.armyService.lootPlayer(50*this.army.getArmySize()),t.message=n.id===Uu.NEUTRAL?"Our troops stationed in neutral region have been defeated":"We have been been plundered!",this.logService.fightReport(t),!0):(this.data=e.wealth,this.data>Math.floor(this.army.getArmySize()/2)?(this.data=Math.floor(this.army.getArmySize()/2),e.wealth-=this.data):e.wealth=0,e.target=oO.DEFENSE_ARCHER,!0):(n.id===Uu.PLAYER&&(t.message="We have defeated enemy plunder party!",this.logService.fightReport(t)),!1))},n.prototype.finish=function(e){if(this.ownerCountry.id===Uu.PLAYER)this.getDestinationTargetRegion().army.addArmy(this.army),this.army=new _R([]),e||this.armyService.loot(50*this.data);else{var n=this.getDestinationTargetRegion();this.worldService.getCountryByRegionId(n.id)!==this.ownerCountry?this.worldService.addMission(new pO(this.servicesService,this.id,this.ownerCountry,this.army,this.route,0,this.targetIndex,"{mission}",this.data)):(n.army.addArmy(this.army),n.wealth+=this.data)}},n}(aO),gO=function(e){function n(n,t,l,i,r,o,u,s,a){return void 0===o&&(o=0),void 0===u&&(u=1),void 0===s&&(s="traveling"),void 0===a&&(a=null),e.call(this,n,t,xu.SPY,u,r,o,s,l,i,a)||this}return i(n,e),n.prototype.isInstant=function(){return!1},n.prototype.calculateMission=function(){var e=this.getDestinationTargetRegion(),n=this.worldService.getCountryByRegionId(e.id);if(e&&this.army.getUnit(Lu.SPY)){if(n.id===Uu.PLAYER)return!0;e.spy+=this.army.getUnit(Lu.SPY).size,this.army=new _R([])}return!1},n.prototype.finish=function(e){this.getDestinationTargetRegion().army.addArmy(this.army),this.army=new _R([])},n}(aO),fO=function(e){function n(n,t,l,i,r,o,u,s,a){return void 0===o&&(o=0),void 0===u&&(u=1),void 0===s&&(s="{mission}"),void 0===a&&(a=null),e.call(this,n,t,xu.BUILD,u,r,o,s,l,i,a)||this}return i(n,e),n.prototype.isInstant=function(){return!1},n.prototype.calculateMission=function(){return this.getDestinationTargetRegion().defense+=1,!1},n.prototype.finish=function(e){},n}(aO),mO=function(e){function n(n,t,l,i,r,o,u,s,a,c){return e.call(this,n,t,l,i,r,o,u,s,a,c)||this}return i(n,e),n.prototype.toJSON=function(){var e=[];return this.army.units.forEach(function(n){return e.push({troop:n.troop,size:n.size})}),{type:this.mission,id:this.id,ownerCountryId:this.ownerCountry.id,army:e,route:this.route.path,progress:this.progress,targetIndex:this.targetIndex,status:this.status,data:this.data}},n.prototype.initRoutePaths=function(){this.routePaths=[];var e=this.worldService.getSeaArea(this.route.path[0]),n=this.worldService.getSeaArea(this.route.path[1]);this.routePaths.push({origin:{x:e.center.x,y:e.center.y},target:{x:n.center.x,y:n.center.y}});for(var t=1;t<this.route.path.length-1;t++){var l=this.worldService.getSeaArea(this.route.path[t]),i=this.worldService.getSeaArea(this.route.path[t+1]);this.routePaths.push({origin:{x:l.center.x,y:l.center.y},target:{x:i.center.x,y:i.center.y}})}this.mission!==xu.FISHING&&this.mission!==xu.HUNTING&&this.mission!==xu.TREASURE&&this.mission!==xu.CARTOGRAPHY&&this.mission!==xu.SEA_BATTLE||("traveling"===this.status?this.routePaths[this.routePaths.length-1].target=this.getDestinationTargetSeaEvent().center:"returning"===this.status&&(this.routePaths[0].origin=this.worldService.getSeaArea(this.route.path[0]).events[0].center))},n.prototype.getTravelSpeed=function(){var n=e.prototype.getTravelSpeed.call(this);return this.ownerCountry.id===Uu.PLAYER&&(this.gameService.isEnabled(_u.LOGISTICS)&&(n*=1.1),this.servicesService.getService(zu.SEA).getBuildings().find(function(e){return e.getBuildingType()===wu.LIGHTHOUSE&&e.isWorking()})&&(n*=1.1)),n},n.prototype.getDestinationTargetRegion=function(){return this.route.path[this.route.path.length-1]>=0?this.worldService.getRegion(this.route.path[this.route.path.length-1]):null},n.prototype.getDestinationTargetSeaEvent=function(){return this.worldService.getSeaArea(this.route.path[this.route.path.length-1]).events[0]},n.prototype.getMissionType=function(){return 1},n.prototype.tick=function(){var e=60*this.speed/3/this.getDistance();if(this.ownerCountry.id===Uu.PLAYER&&this.gameService.isEnabled(_u.LOGISTICS)&&(e*=1.1),"traveling"===this.status)this.progress<100?(this.progress+=e,this.progress>100&&(this.progress=100)):(this.evaluateRegion(),this.targetIndex===this.route.path.length-1?(this.origin=this.target,this.isInstant()?this.calculateMission()?(this.status="returning",this.route.reversePath(),this.targetIndex=1,this.initRoutePaths(),this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target):this.status="finished":this.status="{mission}"):(this.targetIndex+=1,this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target),this.progress=0);else if("{mission}"===this.status)if(this.progress<100)this.progress+=1/this.missionTime;else{if(this.calculateMission()){this.status="returning";var n=this.worldService.findSeaPath(this.getTargetRegionId(),this.route.path[0],!1);this.route.reversePath(),this.targetIndex=1,this.initRoutePaths(),this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target,n&&(n.path.length<this.route.path.length||!this.validateRoute())&&(this.route=n,this.targetIndex=1,this.initRoutePaths(),this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target)}else this.worldService.clearMission(),this.status="finished";this.progress=0}else"returning"!==this.status&&"canceled"!==this.status||(this.progress<100?(this.progress+=e,this.progress>100&&(this.progress=100)):(this.evaluateRegion(),this.targetIndex===this.route.path.length-1?(this.finish("canceled"===this.status),this.worldService.getSelectedMission()&&this.worldService.getSelectedMission().id===this.id&&this.worldService.clearMission(),this.status="finished"):(this.targetIndex+=1,this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target,this.progress=0)))},n.prototype.cancel=function(){this.mission!==xu.FISHING&&this.mission!==xu.HUNTING&&this.mission!==xu.MOVE||(this.progress=100-this.progress,this.status="returning",this.route.reversePath(),this.targetIndex=this.route.path.length-this.targetIndex,this.initRoutePaths(),this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target)},n.prototype.evaluateRegion=function(){var e,n=this.worldService.getSeaArea(this.getTargetRegionId());if(!this.validateRoute()&&((e=this.getDestinationTargetSeaEvent()?this.worldService.findSeaPath(n.id,this.getDestinationTargetSeaEvent().parentId,!1):this.worldService.findSeaPath(n.id,this.getDestinationTargetRegion().id,!1))&&e.path.length>1)){var t=new sO(this.route.path.splice(0,this.targetIndex));t.path=t.path.concat(e.path),this.route=t,this.initRoutePaths(),this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target}if((this.getDestinationTargetSeaEvent()&&n.id!==this.getDestinationTargetSeaEvent().parentId||this.getDestinationTargetRegion()&&n.id!==this.getDestinationTargetRegion().id)&&n.events.length>0&&(n.events[0].type===Bu.PIRATES||n.events[0].type===Bu.PIRATES_BASE)&&(n.events[0].type===Bu.PIRATES||n.events[0].type===Bu.PIRATES_BASE)){var l=this.army.getNavy(!0),i=this.armyService.calculateAttack(l,n.events[0].data,n.events[0].type===Bu.PIRATES?0:3,!0,!1);if(i.attacker=this.ownerCountry.id,i.defender=Uu.PIRATES,i.result){i.message=n.events[0].type===Bu.PIRATES?"Pirates defeated":"Pirates base destroyed",this.army.addArmy(l);for(var r=this.army.getLandUnits(!0);r.getArmySize()>0&&this.getTroopsSize(r)>this.getNavyCapacity(l);)r.units[Qu.randomBetween(0,r.units.length-1)].size-=1,r.removeEmptyUnits();return this.army.addArmy(r),this.data=Math.min(10*this.army.getArmyCargo(),n.events[0].amount),n.events[0].amount-=this.data,n.events[0].amount>=50?n.events[0].type=Bu.TREASURE:(n.events[0].amount=0,n.events[0].time=-1),this.logService.fightReport(i),!0}return i.message="Pirates won against our navy",this.status="finished",this.army.clearArmy(),this.logService.fightReport(i),!1}},n.prototype.validateRoute=function(){for(var e=this.targetIndex;e<this.route.path.length-1;e++){var n=this.worldService.getSeaArea(this.route.path[e]);if(n.events.length>0&&(n.events[0].type===Bu.PIRATES||n.events[0].type===Bu.PIRATES_BASE))return!1}return!0},n.prototype.getIconPath=function(){return this.army.hasTroop(Lu.GALLEON)?"assets/sea/galleon.svg":this.army.hasTroop(Lu.BRIGANTINE)?"assets/sea/brigantine.svg":this.army.hasTroop(Lu.BOAT)?"assets/sea/boat.svg":void 0},n.prototype.getTroopsSize=function(e){var n=0;return e.units.forEach(function(e){e.troop!==Lu.ALL&&e.troop!==Lu.BOAT&&e.troop!==Lu.BRIGANTINE&&e.troop!==Lu.GALLEON&&e.size>0&&(n+=e.getTroopSize())}),n},n.prototype.getNavyCapacity=function(e){var n=0;return e.units.forEach(function(e){e.troop!==Lu.BOAT&&e.troop!==Lu.BRIGANTINE&&e.troop!==Lu.GALLEON||e.size>0&&(n+=e.getTroopCargo())}),n},n}(uO),vO=function(e){function n(n,t,l,i,r,o,u,s,a){return void 0===o&&(o=0),void 0===u&&(u=1),void 0===s&&(s="traveling"),void 0===a&&(a=null),e.call(this,n,t,xu.FISHING,u,r,o,s,l,i,a)||this}return i(n,e),n.prototype.isInstant=function(){return!1},n.prototype.calculateMission=function(){var e=5*this.army.getArmyCargo(),n=Math.min(e,this.getDestinationTargetSeaEvent().amount);return this.getDestinationTargetSeaEvent().amount-=n,this.data=n,!0},n.prototype.finish=function(e){this.data&&this.data>0&&this.servicesService.getService(zu.RESOURCES).increaseResource(Iu.FISH,this.data,"Fishing",!0),this.getDestinationTargetRegion().army.addArmy(this.army.getLandUnits(!0)),this.getDestinationTargetRegion().navy.addArmy(this.army.getNavy(!0)),this.army=new _R([])},n}(mO),SO=function(e){function n(n,t,l,i,r,o,u,s,a){return void 0===o&&(o=0),void 0===u&&(u=1),void 0===s&&(s="traveling"),void 0===a&&(a=null),e.call(this,n,t,xu.HUNTING,u,r,o,s,l,i,a)||this}return i(n,e),n.prototype.isInstant=function(){return!1},n.prototype.calculateMission=function(){var e=5*this.army.getArmyCargo(),n=Math.min(e,this.getDestinationTargetSeaEvent().amount),t=Math.ceil(.7*n),l=n-t;return this.getDestinationTargetSeaEvent().amount-=n,this.data={meat:t,fur:l},!0},n.prototype.finish=function(e){this.data&&this.data.meat>0&&(this.servicesService.getService(zu.RESOURCES).increaseResource(Iu.MEAT,this.data.meat,"Sea hunting",!0),this.servicesService.getService(zu.RESOURCES).increaseResource(Iu.FUR,this.data.fur,"Sea hunting",!0)),this.getDestinationTargetRegion().army.addArmy(this.army.getLandUnits(!0)),this.getDestinationTargetRegion().navy.addArmy(this.army.getNavy(!0)),this.army=new _R([])},n}(mO),EO=function(e){function n(n,t,l,i,r,o,u,s,a){return void 0===o&&(o=0),void 0===u&&(u=1),void 0===s&&(s="traveling"),void 0===a&&(a=null),e.call(this,n,t,xu.TREASURE,u,r,o,s,l,i,a)||this}return i(n,e),n.prototype.isInstant=function(){return!1},n.prototype.calculateMission=function(){var e=10*this.army.getArmyCargo(),n=Math.min(e,this.getDestinationTargetSeaEvent().amount);return this.getDestinationTargetSeaEvent().amount-=n,this.data=n,!0},n.prototype.finish=function(e){this.data&&this.data>0&&this.servicesService.getService(zu.RESOURCES).increaseResource(Iu.COINS,this.data,"Treasure",!0),this.getDestinationTargetRegion().army.addArmy(this.army.getLandUnits(!0)),this.getDestinationTargetRegion().navy.addArmy(this.army.getNavy(!0)),this.army=new _R([])},n}(mO),yO=function(e){function n(n,t,l,i,r,o,u,s,a){return void 0===o&&(o=0),void 0===u&&(u=1),void 0===s&&(s="traveling"),void 0===a&&(a=null),e.call(this,n,t,xu.EXPEDITION,u,r,o,s,l,i,a)||this}return i(n,e),n.prototype.isInstant=function(){return!1},n.prototype.calculateMission=function(){void 0!==this.data&&(Qu.chance(this.data/100)||this.logService.warning("Our expedition didn't find any new land, perhaps we need to go farther"));var e=0,n=0,t=0,l=0;return this.army.getLandUnits(!1).units.forEach(function(e){l+=e.getTroopStrength()*e.size,l+=e.getTroopDefense()*e.size}),Qu.chance(.5)&&(e+=Math.ceil(.6*l),l-=e,n+=Math.ceil(.6*l),t+=l-=n),Qu.chance(.35)&&(n+=Math.ceil(.6*l),l-=n,e+=Math.ceil(.6*l),t+=l-=e),Qu.chance(.15)&&(t+=Math.ceil(.6*l),l-=t,e+=Math.ceil(.6*l),n+=l-=e),this.data={land:e,forest:n,mountains:t},!0},n.prototype.finish=function(e){var n=this.servicesService.getService(zu.LAND);this.getDestinationTargetRegion().army.addArmy(this.army.getLandUnits(!0)),this.getDestinationTargetRegion().navy.addArmy(this.army.getNavy(!0)),this.army=new _R([]);var t=0;this.data&&(this.data.land&&(n.increaseLand(this.data.land,!0),t+=this.data.land),this.data.forest&&(n.increaseForest(this.data.forest,!0),t+=this.data.forest),this.data.mountains&&(n.increaseMountains(this.data.mountains),t+=this.data.mountains)),this.worldService.setDiscoveredLand(t),this.logService.success("We found a new land:<br> Land:"+this.data.land+"<br> Forest:"+this.data.forest+"<br> Mountains:"+this.data.mountains+"<br>")},n}(mO),RO=function(e){function n(n,t,l,i,r,o,u,s,a){return void 0===o&&(o=0),void 0===u&&(u=1),void 0===s&&(s="traveling"),void 0===a&&(a=null),e.call(this,n,t,xu.CARTOGRAPHY,u,r,o,s,l,i,a)||this}return i(n,e),n.prototype.isInstant=function(){return!1},n.prototype.calculateMission=function(){var e=this.army.getArmyCargo(),n=Math.min(e,this.getDestinationTargetSeaEvent().amount);return this.getDestinationTargetSeaEvent().amount-=n,this.data=n,!0},n.prototype.finish=function(e){this.data&&this.data>0&&this.servicesService.getService(zu.NAVY).increaseCartographyData(this.data),this.getDestinationTargetRegion().army.addArmy(this.army.getLandUnits(!0)),this.getDestinationTargetRegion().navy.addArmy(this.army.getNavy(!0)),this.army=new _R([])},n}(mO),bO=function(e){function n(n,t,l,i,r,o,u,s,a){return void 0===o&&(o=0),void 0===u&&(u=1),void 0===s&&(s="traveling"),void 0===a&&(a=null),e.call(this,n,t,xu.SEA_BATTLE,u,r,o,s,l,i,a)||this}return i(n,e),n.prototype.isInstant=function(){return!1},n.prototype.calculateMission=function(){var e=this.army.getNavy(!0),n=this.getDestinationTargetSeaEvent().type===Bu.PIRATES?0:3,t=this.armyService.calculateAttack(e,this.getDestinationTargetSeaEvent().data,n,!0,!1);if(t.attacker=this.ownerCountry.id,t.defender=Uu.PIRATES,t.result){t.message=this.getDestinationTargetSeaEvent().type===Bu.PIRATES?"Pirates defeated":"Pirates base destroyed",this.army.addArmy(e);for(var l=this.army.getLandUnits(!0);l.getArmySize()>0&&this.getTroopsSize(l)>this.getNavyCapacity(e);)l.units[Qu.randomBetween(0,l.units.length-1)].size-=1,l.removeEmptyUnits();return this.army.addArmy(l),this.data=Math.min(10*this.army.getArmyCargo(),this.getDestinationTargetSeaEvent().amount),this.getDestinationTargetSeaEvent().amount-=this.data,this.getDestinationTargetSeaEvent().amount>=50?this.getDestinationTargetSeaEvent().type=Bu.TREASURE:(this.getDestinationTargetSeaEvent().amount=0,this.getDestinationTargetSeaEvent().time=-1),this.logService.fightReport(t),!0}return t.message="Pirates won against our navy",this.army.clearArmy(),this.status="finished",this.logService.fightReport(t),!1},n.prototype.finish=function(e){this.getDestinationTargetRegion().army.addArmy(this.army.getLandUnits(!0)),this.getDestinationTargetRegion().navy.addArmy(this.army.getNavy(!0)),this.army=new _R([])},n.prototype.getTroopsSize=function(e){var n=0;return e.units.forEach(function(e){e.troop!==Lu.ALL&&e.troop!==Lu.BOAT&&e.troop!==Lu.BRIGANTINE&&e.troop!==Lu.GALLEON&&e.size>0&&(n+=e.getTroopSize())}),n},n.prototype.getNavyCapacity=function(e){var n=0;return e.units.forEach(function(e){e.troop!==Lu.BOAT&&e.troop!==Lu.BRIGANTINE&&e.troop!==Lu.GALLEON||e.size>0&&(n+=e.getTroopCargo())}),n},n}(mO),OO=function(e){function n(n,t,l,i,r,o,u,s,a){return void 0===o&&(o=0),void 0===u&&(u=1),void 0===s&&(s="traveling"),void 0===a&&(a=null),e.call(this,n,t,xu.SEA_CONQUER,u,r,o,s,l,i,a)||this}return i(n,e),n.prototype.isInstant=function(){return!1},n.prototype.calculateMission=function(){var e=this.worldService.getRegion(this.getTargetRegionId()),n=this.worldService.getCountryByRegionId(e.id);if(n.id!==this.ownerCountry.id){var t=this.army.getLandUnits(!0),l=this.armyService.calculateAttack(t,e.army,e.defense,!0,!1);return l.attacker=this.ownerCountry.id,l.defender=n.id,l.result?(l.message="Region conquered",this.logService.fightReport(l),this.armyService.loot(50*e.wealth+200*e.economy),n.diplomacy<25?n.decreaseDiplomacy(30):n.diplomacy=-50,n.capital===e.id&&(n.diplomacy=-100),this.worldService.ownRegion(this.getTargetRegionId(),this.ownerCountry),this.getDestinationTargetRegion().army.addArmy(t),this.logService.fightReport(l),!0):(l.message="Our army has been defeated",this.logService.fightReport(l),n.diplomacy<25?n.decreaseDiplomacy(15):n.diplomacy=30,this.logService.fightReport(l),!0)}return!0},n.prototype.finish=function(e){return this.getDestinationTargetRegion().army.addArmy(this.army.getLandUnits(!0)),this.getDestinationTargetRegion().navy.addArmy(this.army.getNavy(!0)),this.army=new _R([]),!1},n}(mO),TO=function(e){function n(n,t,l,i,r,o,u,s,a){return void 0===o&&(o=0),void 0===u&&(u=1),void 0===s&&(s="traveling"),void 0===a&&(a=null),e.call(this,n,t,xu.SEA_PLUNDER,u,r,o,s,l,i,a)||this}return i(n,e),n.prototype.isInstant=function(){return!1},n.prototype.calculateMission=function(){var e=this.worldService.getRegion(this.getTargetRegionId()),n=this.worldService.getCountryByRegionId(e.id);if(n.id!==this.ownerCountry.id){var t=this.army.getLandUnits(!0),l=this.armyService.calculateAttack(t,e.army,e.defense,!0,!1);return l.attacker=this.ownerCountry.id,l.defender=n.id,l.result?(n.decreaseDiplomacy(n.diplomacy<25?10:30),this.data=e.wealth,e.wealth=0,l.message="Region plundered",e.target=oO.DEFENSE_ARCHER,this.army.addArmy(t),this.logService.fightReport(l),!0):(l.message="Our army has been defeated",n.decreaseDiplomacy(n.diplomacy<25?5:15),e.target=oO.DEFENSE_ARCHER,this.logService.fightReport(l),!0)}},n.prototype.finish=function(e){return this.getDestinationTargetRegion().army.addArmy(this.army.getLandUnits(!0)),this.getDestinationTargetRegion().navy.addArmy(this.army.getNavy(!0)),this.army=new _R([]),!1},n}(mO),CO=function(e){function n(n,t,l,i,r,o,u,s,a){return void 0===o&&(o=0),void 0===u&&(u=1),void 0===s&&(s="traveling"),void 0===a&&(a=null),e.call(this,n,t,xu.SEA_MOVE,u,r,o,s,l,i,a)||this}return i(n,e),n.prototype.isInstant=function(){return!0},n.prototype.calculateMission=function(){var e=this.getDestinationTargetRegion(),n=this.worldService.getCountryByRegionId(e.id);return n.id!==Uu.PLAYER&&n.id!==Uu.NEUTRAL||(e.army.addArmy(this.army.getLandUnits(!0)),!e.harbour)||(e.navy.addArmy(this.army.getNavy(!0)),!1)},n.prototype.finish=function(e){return this.getDestinationTargetRegion().army.addArmy(this.army.getLandUnits(!0)),this.getDestinationTargetRegion().navy.addArmy(this.army.getNavy(!0)),this.army=new _R([]),!1},n}(mO),IO=function(){function e(e){this.servicesService=e,e.addService(zu.MISSION_FACTORY,this)}return e.prototype.loadMission=function(e){var n=this.servicesService.getService(zu.WORLD),t=new _R([]);e.army.forEach(function(e){t.addTroop(e.troop,e.size)});var l=new sO(e.route);switch(e.type){case xu.COLONIZE:return new cO(this.servicesService,e.id,n.getCountry(e.ownerCountryId),t,l,e.progress,e.targetIndex,e.status,e.data);case xu.CONQUER:return new pO(this.servicesService,e.id,n.getCountry(e.ownerCountryId),t,l,e.progress,e.targetIndex,e.status,e.data);case xu.MOVE:return new hO(this.servicesService,e.id,n.getCountry(e.ownerCountryId),t,l,e.progress,e.targetIndex,e.status,e.data);case xu.PLUNDER:return new dO(this.servicesService,e.id,n.getCountry(e.ownerCountryId),t,l,e.progress,e.targetIndex,e.status,e.data);case xu.SPY:return new gO(this.servicesService,e.id,n.getCountry(e.ownerCountryId),t,l,e.progress,e.targetIndex,e.status,e.data);case xu.BUILD:return new fO(this.servicesService,e.id,n.getCountry(e.ownerCountryId),t,l,e.progress,e.targetIndex,e.status,e.data);case xu.FISHING:return new vO(this.servicesService,e.id,n.getCountry(e.ownerCountryId),t,l,e.progress,e.targetIndex,e.status,e.data);case xu.HUNTING:return new SO(this.servicesService,e.id,n.getCountry(e.ownerCountryId),t,l,e.progress,e.targetIndex,e.status,e.data);case xu.TREASURE:return new EO(this.servicesService,e.id,n.getCountry(e.ownerCountryId),t,l,e.progress,e.targetIndex,e.status,e.data);case xu.EXPEDITION:return new yO(this.servicesService,e.id,n.getCountry(e.ownerCountryId),t,l,e.progress,e.targetIndex,e.status,e.data);case xu.CARTOGRAPHY:return new RO(this.servicesService,e.id,n.getCountry(e.ownerCountryId),t,l,e.progress,e.targetIndex,e.status,e.data);case xu.SEA_BATTLE:return new bO(this.servicesService,e.id,n.getCountry(e.ownerCountryId),t,l,e.progress,e.targetIndex,e.status,e.data);case xu.SEA_MOVE:return new CO(this.servicesService,e.id,n.getCountry(e.ownerCountryId),t,l,e.progress,e.targetIndex,e.status,e.data);case xu.SEA_PLUNDER:return new TO(this.servicesService,e.id,n.getCountry(e.ownerCountryId),t,l,e.progress,e.targetIndex,e.status,e.data);case xu.SEA_CONQUER:return new OO(this.servicesService,e.id,n.getCountry(e.ownerCountryId),t,l,e.progress,e.targetIndex,e.status,e.data)}},e.ngInjectableDef=Oe({factory:function(){return new e(Ye(Vf))},token:e,providedIn:"root"}),e}(),AO=function(){return function(e,n,t,l,i){this.id=e,this.center=n,this.r=t,this.events=l,this.neighbours=i}}(),NO=function(){function e(e,n,t,l,i,r,o){var u=this;if(this.parentId=e,this.id=n,this.type=t,this.center=l,this.amount=i,this.time=r,this.data=o,t===Bu.PIRATES||t===Bu.PIRATES_BASE)if(null===o)for(this.data=new _R([]);this.amount>=80;)this.amount>=bs.getTroop(Lu.GALLEON).PAY&&(this.amount-=bs.getTroop(Lu.GALLEON).PAY,this.data.addTroop(Lu.GALLEON,1),this.amount>=bs.getTroop(Lu.BRIGANTINE).PAY&&(this.amount-=bs.getTroop(Lu.BRIGANTINE).PAY,this.data.addTroop(Lu.BRIGANTINE,1))),this.amount>=bs.getTroop(Lu.BRIGANTINE).PAY&&(this.amount-=bs.getTroop(Lu.BRIGANTINE).PAY,this.data.addTroop(Lu.BRIGANTINE,1));else this.data=new _R([]),o.units.forEach(function(e){u.data.addTroop(e[0],e[1])});this.amount=i}return e.prototype.toJSON=function(){return{parentId:this.parentId,id:this.id,type:this.type,center:this.center,amount:this.amount,time:this.time,data:this.data}},e.prototype.tick=function(n,t,l){if(this.type===Bu.WHIRLPOOL&&(this.time-=1),this.type===Bu.PIRATES_BASE&&(this.time-=1,this.time<=10)){var i=0;if(n.getSeaAreas().forEach(function(e){e.events.length>0&&e.events[0].type===Bu.PIRATES&&(i+=1)}),this.time=Qu.randomBetween(Ns.SEA_EVENTS.PIRATES_BASE.TIME_MIN+50*i,Ns.SEA_EVENTS.PIRATES_BASE.TIME_MAX+50*i),i<2*Ns.SEA_EVENTS.PIRATES.NUMBER_MAX){var r=n.getSeaAreas().filter(function(e){return-1!==e.id&&0===e.events.length&&e.r>0}),o=r[Qu.randomBetween(0,r.length-1)];o.events.push(new e(o.id,t.getNextId(),Bu.PIRATES,n.getRandomPointInCircle(o.center,o.r),Qu.randomBetween(Ns.SEA_EVENTS.PIRATES.POWER_MIN,Ns.SEA_EVENTS.PIRATES.POWER_MAX),Qu.randomBetween(Ns.SEA_EVENTS.PIRATES.TIME_MIN,Ns.SEA_EVENTS.PIRATES.TIME_MAX),null)),l.warning("Pirates base sent a new pirates group")}}},e}(),_O=function(){function e(e,n,t,l){var i=this;this.servicesService=e,this.resourcesService=n,this.logService=t,this.calendarService=l,this.maxHarbourSpace=0,this.cartographyData=0,this.mapProgress=0,this.paydayCounter=30,this.navy=new _R([]),e.addService(zu.NAVY,this),this.calendarService.registerForDayChange().subscribe(function(e){i.calculatePayday()})}return e.prototype.load=function(e){var n=this;this.maxHarbourSpace=e.maxHarbourSpace,this.cartographyData=e.cartographyData,this.mapProgress=e.mapProgress,this.paydayCounter=void 0!==e.paydayCounter?e.paydayCounter:30,this.navy.units=[],void 0!==e.navy&&e.navy.forEach(function(e){n.navy.addTroop(e[0],e[1])})},e.prototype.reset=function(e,n){this.maxHarbourSpace=0,this.cartographyData=0,this.mapProgress=0,this.navy=new _R([]),this.paydayCounter=30},e.prototype.save=function(){var e=[];return this.navy.units.forEach(function(n){return e.push([n.troop,n.size])}),{maxHarbourSpace:this.maxHarbourSpace,cartographyData:this.cartographyData,mapProgress:this.mapProgress,navy:e,paydayCounter:this.paydayCounter}},e.prototype.getWorldService=function(){return this.servicesService.getService(zu.WORLD)},e.prototype.tick=function(e){},e.prototype.increaseHarbourSize=function(e){this.maxHarbourSpace+=e},e.prototype.decreaseHarbourSize=function(e){this.maxHarbourSpace-=e,this.maxHarbourSpace<0&&(this.maxHarbourSpace=0)},e.prototype.getHarbourSpace=function(){var e=this,n=0;return[Lu.BOAT,Lu.BRIGANTINE,Lu.GALLEON].forEach(function(t){n+=e.getTotalShips(t)*bs.getTroop(t).SIZE}),n},e.prototype.getFreeHarbourSpace=function(){return this.maxHarbourSpace-this.getHarbourSpace()},e.prototype.getMaxHarbourSpace=function(){return this.maxHarbourSpace},e.prototype.addShip=function(e){this.navy.addTroop(e,1)},e.prototype.getAvailableShips=function(e){var n=this.navy.getUnit(e);return void 0!==n?n.size:0},e.prototype.getTotalShips=function(e){var n=0,t=this.navy.getUnit(e);return n+=void 0!==t?t.size:0,this.getWorldService().getPlayerSeaMissions().forEach(function(t){var l=t.army.getUnit(e);n+=void 0!==l?l.size:0}),this.getWorldService().getStationedNavy().forEach(function(t){var l=t.getUnit(e);l&&(n+=l.size)}),n},e.prototype.getCartographyData=function(){return this.cartographyData},e.prototype.increaseCartographyData=function(e){this.cartographyData+=e},e.prototype.decreaseCartographyData=function(e){return this.cartographyData>=e&&(this.cartographyData-=e,!0)},e.prototype.addMapProgress=function(){this.mapProgress+=1},e.prototype.getMapProgress=function(){return this.mapProgress},e.prototype.createMap=function(){return!!(this.mapProgress>=100&&this.resourcesService.increaseResource(Iu.MAP,1,"Cartographer"))&&(this.mapProgress-=100,!0)},e.prototype.calculateNavyPay=function(){var e=this,n=0;return[Lu.BOAT,Lu.BRIGANTINE,Lu.GALLEON].forEach(function(t){n+=e.getTotalShips(t)*bs.getTroop(t).PAY}),n},e.prototype.getNavy=function(){return this.navy},e.prototype.getPaydayCounter=function(){return this.paydayCounter},e.prototype.calculatePayday=function(){if(this.getPaydayCounter()<=0){var e=this.calculateNavyPay();if(e>0){var n=this.resourcesService.hasResource(Iu.COINS,e,"Navy");if(n>e&&(n=e),n>0){this.resourcesService.decreaseResource(Iu.COINS,e-n,"Navy");for(var t=[],l=function(){if(i.navy.units.forEach(function(e){if(n>0&&e.getTroopPay()>0&&e.size>0&&(n-=e.getTroopPay(),Qu.chance(.25))){e.size-=1;var l=t.find(function(n){return n[0]===e.troop});l?l[1]+=1:t.push([e.troop,1])}}),n<=0)return"break";var e=[];i.getWorldService().getPlayerSeaMissions().forEach(function(n){n.army.getNavy(!1).getArmySize()>0&&e.push(n.army.getNavy(!1))}),i.getWorldService().getStationedNavy().forEach(function(n){n.getArmySize()>0&&e.push(n)}),e.forEach(function(e){n>0&&e.units.forEach(function(e){if(n>0&&e.getTroopPay()>0&&e.size>0&&(n-=e.getTroopPay(),Qu.chance(.25))){e.size-=1;var l=t.find(function(n){return n[0]===e.troop});l?l[1]+=1:t.push([e.troop,1])}}),e.removeEmptyUnits()})},i=this;n>0&&"break"!==l(););if(t.length>0){var r="Deserters:<br>";t.forEach(function(e){return r+="&emsp;"+e[1]+" "+Vu.prepareTroopName(e[0])+"<br>"}),this.logService.warning(r)}}else this.resourcesService.decreaseResource(Iu.COINS,e,"Navy")}this.paydayCounter=30}else this.paydayCounter-=1},e.ngInjectableDef=Oe({factory:function(){return new e(Ye(Vf),Ye(am),Ye($f),Ye(jf))},token:e,providedIn:"root"}),e}(),wO=function(e){var n="function"==typeof Symbol&&e[Symbol.iterator],t=0;return n?n.call(e):{next:function(){return e&&t>=e.length&&(e=void 0),{value:e&&e[t++],done:!e}}}},PO=function(){function e(e,n,t,l,i,r,o,u,s,a,c,p){var h=this;this.servicesService=e,this.idService=n,this.armyService=t,this.navyService=l,this.logService=i,this.calendarService=r,this.modalService=o,this.missionFactoryService=u,this.optionsService=s,this.soundService=a,this.landService=c,this.kongregateService=p,this.countries=[],this.regionsNeighbours=[],this.missions=[],this.regions=[],this.seaAreas=[],this.defaultOrigin=0,this.discoveredLand=0,this.x=150,this.y=-220,this.zoom=1.4,this.mapDisplayOption=0,this.showHarbours=!0,this.activeCountriesList=[],this.pathCacheSubject=new D,this.servicesService.addService(zu.WORLD,this),this.init(),this.selectedCountry=this.countries[0],this.selectedRegion=this.selectedCountry.regions[0],this.calendarService.registerForDayChange().subscribe(function(e){h.countries.filter(function(e){return e.id!==Uu.PLAYER&&e.id!==Uu.NEUTRAL}).forEach(function(e){e.regions.forEach(function(n){Qu.chance((n.economy+5)*h.AI_getDifficultyMultiplier()/100)&&(n.wealth+=1),h.AI_dailyRegionAction(e,n)})}),h.seaAreas.filter(function(e){return e.events.length>0}).map(function(e){return e.events[0]}).forEach(function(e){return e.tick(h,h.idService,h.logService)}),h.seaAreas.forEach(function(e){e.events.length>0&&(e.events[0].time<0||e.events[0].amount<=0)&&(e.events[0]===h.selectedSeaEvent&&(h.selectedSeaEvent=null),e.events.shift())}),h.spawnSeaEvents()})}return e.prototype.init=function(e){var n=this;void 0===e&&(e=!0),Ns.REGIONS.forEach(function(e){var t=[];e.TROOPS.forEach(function(e){return t.push(new NR(e.troop,e.size))}),n.regions.push(new iO(e.ID,e.PATH,e.CENTER,e.NEIGHBOURS,e.LAND,e.FOREST,e.MOUNTAINS,e.WEALTH,0,0,e.HARBOUR,null,0,new _R(t)))}),this.regions[0].army=this.armyService.getArmy(),this.regions[0].navy=this.navyService.getNavy(),Object.values(Ns.COUNTRIES).forEach(function(t){var l=[];t.REGIONS.forEach(function(i){var r=n.regions[i];t.CAPITAL===i&&(r.capital=t.COUNTRY),l.push(r),e&&t.COUNTRY!==Uu.PLAYER&&t.COUNTRY!==Uu.NEUTRAL&&n.regions[i].army.addTroop(Lu.ARCHER,Math.ceil(2*n.AI_getDifficultyMultiplier()))}),n.countries.push(new lO(t.COUNTRY,t.NAME,t.DIPLOMACY,t.COLOUR,t.FOCUS,l,{},t.CAPITAL))}),this.regionsNeighbours=[],Object.values(Ns.REGIONS).forEach(function(e){n.regionsNeighbours.push(new rO(e.ID,e.NEIGHBOURS))}),this.calendarService.registerForYearChange().subscribe(function(e){n.countries.filter(function(e){return e.id!==Uu.PLAYER&&e.id!==Uu.NEUTRAL}).forEach(function(e){e.regions.length>0&&Qu.chance(Ns.KING_DEATH_CHANCE)&&(e.focus=Qu.randomElement([{item:Fu.OFFENSE,chance:25},{item:Fu.DEFENSE,chance:25},{item:Fu.PEACE,chance:25},{item:Fu.ECONOMY,chance:25}]),n.logService.warning(e.name+" king died. New king is known to focus on "+Vu.prepareFocusName(e.focus)))})}),this.initSeaAreas(),this.selectedRegion=this.regions[0],this.selectedCountry=this.getPlayerCountry(),this.initPlayerKingdomName()},e.prototype.initSeaAreas=function(){var e=this;Ns.SEA_AREAS.forEach(function(n){e.seaAreas.push(new AO(n.ID,{x:n.CENTER.x,y:n.CENTER.y},n.R,[],n.NEIGHBOURS))});var n=this.seaAreas.filter(function(e){return-1!==e.id});Object.keys(Bu).slice(Object.keys(Bu).length/2).map(function(e){return Bu[e]}).forEach(function(t){for(var l=Ns.getSeaEvent(t),i=0;i<l.NUMBER_INIT;i++)if(n.length>0){var r=n.filter(function(e){return e.r>l.FOR_RADIUS}),o=r[Qu.randomBetween(0,r.length-1)];0===o.events.length&&o.events.push(new NO(o.id,e.idService.getNextId(),t,e.getRandomPointInCircle(o.center,o.r),Qu.randomBetween(l.POWER_MIN,l.POWER_MAX),Qu.randomBetween(l.TIME_MIN,l.TIME_MAX),null)),n=n.filter(function(e){return 0===e.events.length})}})},e.prototype.AI_dailyRegionAction=function(e,n){null===n.target?this.AI_chooseTarget(n,e):this.AI_executeTarget(n,e),n.spy>0&&Qu.chance(n.army.getArmySize()/2e4)&&(n.spy-=1,this.logService.warning("Our "+e.name+" spy has been discovered and killed!"),e.decreaseDiplomacy(e.diplomacy<25?5:15))},e.prototype.AI_chooseTarget=function(e,n){var t=10;n.regions.find(function(e){return e.id===n.capital})||(t=75);var l=[{item:Fu.OFFENSE,chance:t},{item:Fu.DEFENSE,chance:10},{item:Fu.PEACE,chance:10},{item:Fu.ECONOMY,chance:10}],i=l.find(function(e){return e.item===n.focus});i&&(i.chance=70);var r=Qu.randomElement(l),o=oO.NONE;switch(r){case Fu.ECONOMY:var u=[],s=70-8*e.economy;s<5&&(s=5),this.getNeutralRegionsNumber()>0&&u.push({item:oO.ECONOMY_COLONIZE,chance:10}),u.push({item:oO.ECONOMY_BUILD,chance:s}),o=Qu.randomElement(u);break;case Fu.DEFENSE:var a=[];e.army.getArmySize()<5*e.wealth&&a.push({item:oO.DEFENSE_ARCHER,chance:50});var c=30-4*e.defense;c<5&&(c=5),a.push({item:oO.DEFENSE_WALL,chance:c}),o=Qu.randomElement(a);break;case Fu.PEACE:e.target=oO.PEACE;break;case Fu.OFFENSE:var p=[{item:oO.OFFENSE_PLUNDER,chance:5},{item:oO.OFFENSE_CONQUER,chance:2}];if(e.army.getArmySize()<5*e.wealth&&p.push({item:oO.OFFENSE_MILITIA,chance:30},{item:oO.OFFENSE_SPEARMAN,chance:20},{item:oO.OFFENSE_SWORDSMAN,chance:15},{item:oO.OFFENSE_LIGHT_CAVALRY,chance:10}),this.getNeutralRegionsNumber()>0&&p.push({item:oO.OFFENSE_COLONIZE,chance:10}),!n.regions.find(function(e){return e.id===n.capital})&&e.army.getArmyPower(!0)>5){var h=this.findPath(e.id,n.capital,n.id,!0),d=this.missions.find(function(e){return e.ownerCountry===n&&e.getTargetRegionId()===n.capital});h&&!d&&p.push({item:oO.OFFENSE_RECLAIM_CAPITAL,chance:50})}o=Qu.randomElement(p)}e.target=o||oO.NONE},e.prototype.AI_executeTarget=function(e,n){var t=this;switch(e.target){case oO.NONE:e.target=null;break;case oO.PEACE:Qu.chance(.1)&&(e.target=null);break;case oO.SAVE_WEALTH:e.wealth>=5*(e.economy+1)&&(e.target=null);break;case oO.ECONOMY_BUILD:e.wealth>=10*(e.economy+1)&&(e.wealth-=10*(e.economy+1),e.economy+=1,e.target=null);break;case oO.ECONOMY_COLONIZE:e.economy>=2&&(l=this.findNeighbouringColonizableRegions(e,n)).length?e.wealth>=40&&(this.missions.push(new cO(this.servicesService,this.idService.getNextId(),n,new _R([new NR(Lu.COLONIST,15)]),this.findPath(e.id,l[0],n.id))),e.wealth-=40,e.target=null):e.target=null;break;case oO.DEFENSE_WALL:if(e.economy<=e.defense||e.defense>=7){e.target=null;break}e.wealth>=20*(e.defense+1)&&(e.wealth-=20*(e.defense+1),e.defense+=1,e.target=null);break;case oO.DEFENSE_ARCHER:this.AI_hireTroop(e,Lu.ARCHER);break;case oO.OFFENSE_MILITIA:this.AI_hireTroop(e,Lu.MILITIA);break;case oO.OFFENSE_SPEARMAN:this.AI_hireTroop(e,Lu.SPEARMAN);break;case oO.OFFENSE_SWORDSMAN:this.AI_hireTroop(e,Lu.SWORDSMAN);break;case oO.OFFENSE_LIGHT_CAVALRY:this.AI_hireTroop(e,Lu.LIGHT_CAVALRY);break;case oO.OFFENSE_COLONIZE:var l;e.army.getArmyPower(!0)>=20&&(l=this.findNeighbouringColonizableRegions(e,n)).length?e.wealth>=20&&(this.missions.push(new cO(this.servicesService,this.idService.getNextId(),n,new _R([new NR(Lu.COLONIST,15)]),this.findPath(e.id,l[0],n.id))),e.wealth-=20,e.target=null):e.target=null;break;case oO.OFFENSE_PLUNDER:e.army.getArmyPower(!0)>20&&(i=this.findNeighbouringAttackableRegions(e,n,!0)).length>0?(this.missions.push(new dO(this.servicesService,this.idService.getNextId(),n,this.AI_prepareArmy(e.army),this.findPath(e.id,i[0],n.id))),this.getRegion(i[0]).lastAttack=this.calendarService.getAbsoluteDay(),this.getCountryByRegionId(i[0]).id===Uu.PLAYER&&(this.logService.warning("Incoming invasion!"),this.soundService.playBattle())):e.target=null;break;case oO.OFFENSE_CONQUER:var i;e.army.getArmyPower(!0)>20&&(i=this.findNeighbouringAttackableRegions(e,n,!1).filter(function(e){return 0!==e}).filter(function(n){return t.getRegion(n).army.getArmyPower(!1)<1.5*e.army.getArmyPower(!0)})).length>0?(this.missions.push(new pO(this.servicesService,this.idService.getNextId(),n,this.AI_prepareArmy(e.army),this.findPath(e.id,i[0],n.id))),this.getRegion(i[0]).lastAttack=this.calendarService.getAbsoluteDay(),this.getCountryByRegionId(i[0]).id===Uu.PLAYER&&(this.logService.warning("Incoming invasion!"),this.soundService.playBattle())):e.target=null,e.target=null;break;case oO.OFFENSE_RECLAIM_CAPITAL:if(n.regions.find(function(t){return t.id===n.capital&&e.army.getArmyPower(!0)>5}))e.target=null;else{var r=this.findPath(e.id,n.capital,n.id,!1),o=this.missions.find(function(e){return e.ownerCountry===n&&e.getTargetRegionId()===n.capital});r&&!o?this.missions.push(new pO(this.servicesService,this.idService.getNextId(),n,this.AI_prepareArmy(e.army),r)):e.target=null}e.target=null}},e.prototype.AI_hireTroop=function(e,n){var t=bs.getTroop(n).AI_COST;e.wealth>=t&&(e.wealth-=t,e.army.addTroop(n,1),e.target=null)},e.prototype.AI_getDifficultyMultiplier=function(){var e=1;switch(this.optionsService.getOption(Wf.AI_DIFFICULTY)){case ns.EASY:e=.5;break;case ns.MEDIUM:e=1;break;case ns.HARD:e=2}return e},e.prototype.load=function(e){var n=this;e.regions||e.countries?(e.regions.forEach(function(e){var t=n.regions[e.id];t.wealth=e.wealth,t.economy=e.economy,t.defense=e.defense,t.defense=null!==e.defense&&e.defense,t.target=e.target,t.land=e.land,t.forest=e.forest,t.mountains=e.mountains,t.spy=e.spy,t.capital=e.capital,t.lastAttack=void 0!==e.lastAttack?e.lastAttack:0,t.army=new _R([]),t.navy=new _R([]),e.army.forEach(function(e){t.army.addTroop(e.troop,e.size)}),e.navy&&e.navy.forEach(function(e){t.navy.addTroop(e.troop,e.size)})}),this.seaAreas.forEach(function(e){e.events=[]}),void 0!==e.seaEvents&&e.seaEvents.forEach(function(e){var t=n.seaAreas.find(function(n){return n.id===e.parentId});t&&(t.events=[],t.events.push(new NO(t.id,e.id,e.type,e.center,e.amount,e.time,e.data)))}),this.selectedCountry=null===this.selectedCountry?null:this.getCountry(this.selectedCountry.id),e.countries.forEach(function(e){var t=n.getCountry(e.id);t.diplomacy=e.diplomacy,t.focus=e.country,t.capital=void 0!==e.capital?e.capital:Ns.COUNTRIES.find(function(e){return e.COUNTRY===t.id}).CAPITAL,t.regions=[],e.regions.forEach(function(e){t.regions.push(n.regions[e])}),t.data=e.data}),this.missions=[],e.missions.forEach(function(e){n.missions.push(n.missionFactoryService.loadMission(JSON.parse(e)))}),this.defaultOrigin=e.defaultOrigin,this.discoveredLand=void 0!==e.discoveredLand?e.discoveredLand:0,this.getPlayerCountry().name=e.playerNationName,this.x=e.x,this.y=e.y,this.zoom=e.zoom,this.mapDisplayOption=void 0!==e.mapDisplayOption?e.mapDisplayOption:0,this.regions[0].army=this.armyService.getArmy(),this.regions[0].navy=this.navyService.getNavy()):this.reset(!1,!1)},e.prototype.reset=function(e,n){var t=this,l=this.getPlayerCountry().name,i=[],r=this.seaAreas;e||n||this.countries.forEach(function(e){i.push([e.id,e.regions.map(function(e){return e.id})])}),this.countries=[],this.regionsNeighbours=[],this.missions=[],this.regions=[],this.seaAreas=[],this.defaultOrigin=0,this.selectedRegion=null,this.selectedCountry=null,this.selectedMission=null,this.selectedSeaEvent=null,this.x=150,this.y=-220,this.zoom=1.4,this.mapDisplayOption=0,this.init(!1),e||n||this.seaAreas.forEach(function(e){var n=r.find(function(n){return n.id===e.id});n&&(e.events=n.events)}),this.regions[0].army=this.armyService.getArmy(),this.regions[0].navy=this.navyService.getNavy(),e?this.initPlayerKingdomName():this.getPlayerCountry().name=l,this.countries.forEach(function(e){var n=i.find(function(n){return n[0]===e.id});n&&(e.regions=[],n[1].forEach(function(n){var l=t.getRegion(n);e.regions.push(l),e.id===Uu.PLAYER&&0!==l.id&&(t.landService.increaseLand(l.land,!0),t.landService.increaseForest(l.forest,!1),t.landService.increaseMountains(l.mountains)),e.id!==Uu.PLAYER&&e.id!==Uu.NEUTRAL&&t.regions[n].army.addTroop(Lu.ARCHER,Math.ceil(2*t.AI_getDifficultyMultiplier()))}))})},e.prototype.save=function(){var e=[];this.countries.forEach(function(n){var t=[];n.regions.forEach(function(e){t.push(e.id)}),e.push({id:n.id,diplomacy:n.diplomacy,focus:n.focus,regions:t,data:n.data,capital:n.capital})});var n=[];this.regions.forEach(function(e){var t=[],l=[];0!==e.id&&e.army.units.forEach(function(e){t.push({troop:e.troop,size:e.size})}),0!==e.id&&e.navy.units.forEach(function(e){l.push({troop:e.troop,size:e.size})}),n.push({id:e.id,wealth:e.wealth,economy:e.economy,defense:e.defense,harbour:e.harbour,target:e.target,land:e.land,forest:e.forest,mountains:e.mountains,spy:e.spy,capital:e.capital,army:t,navy:l,lastAttack:e.lastAttack})});var t=[];this.missions.forEach(function(e){t.push(JSON.stringify(e))});var l=[];return this.seaAreas.forEach(function(e){e.events.length>0&&l.push(e.events[0])}),{countries:e,regions:n,seaEvents:l,missions:t,defaultOrigin:this.defaultOrigin,discoveredLand:this.discoveredLand,playerNationName:this.getPlayerCountry().name,x:this.x,y:this.y,zoom:this.zoom,mapDisplayOption:this.mapDisplayOption}},e.prototype.getCountries=function(){return this.countries},e.prototype.getMissions=function(){return this.missions},e.prototype.getPlayerLandMissions=function(){return this.missions.filter(function(e){return 0===e.getMissionType()&&e.ownerCountry.id===Uu.PLAYER})},e.prototype.getPlayerSeaMissions=function(){return this.missions.filter(function(e){return 1===e.getMissionType()&&e.ownerCountry.id===Uu.PLAYER})},e.prototype.setSelectedCountry=function(e){this.selectedCountry=e,this.selectedMission=null,this.selectedSeaEvent=null},e.prototype.getSelectedCountry=function(){return this.selectedCountry},e.prototype.setSelectedRegion=function(e){this.selectedRegion=e,this.selectedMission=null,this.selectedSeaEvent=null},e.prototype.getSelectedRegion=function(){return this.selectedRegion},e.prototype.setSelectedMission=function(e){this.selectedCountry=null,this.selectedRegion=null,this.selectedSeaEvent=null,this.selectedMission=e},e.prototype.getSelectedMission=function(){return this.selectedMission},e.prototype.registerForCacheInvalidation=function(){return this.pathCacheSubject.asObservable()},e.prototype.tick=function(e){this.missions.forEach(function(e){e.tick()}),this.missions=this.missions.filter(function(e){return!e.isFinished()})},e.prototype.getRegionNeighbours=function(e,n){var t=this.regionsNeighbours.find(function(n){return n.id===e}),l=[];return t&&t.neighbours.forEach(n?function(e){l.push(e)}:function(n){e>=0&&n>=0&&l.push(n)}),l},e.prototype.findPath=function(e,n,t,l){var i,r;void 0===l&&(l=!1);var o=!0;if(e===n)return new sO([e]);var u=Number.MAX_SAFE_INTEGER,s=new Array(this.regions.length).fill(Number.MAX_SAFE_INTEGER),a=[],c=[],p=[];for(a.push(new sO([e]));a.length>0||c.length>0;){var h=function(e){var i,r,a=d.getCountryByRegionId(e.path[e.path.length-1]);if(t===Uu.SPECIAL||a.id===t||a.id===Uu.NEUTRAL||o){var h=d.getRegionNeighbours(e.path[e.path.length-1],!1).filter(function(n){return!e.path.includes(n)});try{for(var g=wO(h),f=g.next();!f.done;f=g.next()){var m=f.value,v=new sO(e.path.slice().concat([m]));if(v.calculatePathDistance(d)<=s[m]&&(s[m]=v.calculatePathDistance(d),s[m]<=u))if(m===n){if(l)return{value:v};s[m]<u&&(u=s[m]),p.push(v)}else c.push(v)}}catch(S){i={error:S}}finally{try{f&&!f.done&&(r=g.return)&&r.call(g)}finally{if(i)throw i.error}}}},d=this;try{for(var g=wO(a),f=g.next();!f.done;f=g.next()){var m=h(f.value);if("object"==typeof m)return m.value}}catch(v){i={error:v}}finally{try{f&&!f.done&&(r=g.return)&&r.call(g)}finally{if(i)throw i.error}}o=!1,a=c,c=[]}return 0===p.length?null:p.sort(function(e,n){return e.distance-n.distance})[0]},e.prototype.addMission=function(e){this.missions.push(e)},e.prototype.getCountry=function(e){return this.countries.find(function(n){return n.id===e})},e.prototype.getCountryByRegionId=function(e){var n=null;return this.countries.forEach(function(t){t.regions.find(function(n){return n.id===e})&&(n=t)}),n},e.prototype.getRegion=function(e){return this.regions[e]},e.prototype.ownRegion=function(e,n){var t=this.getCountryByRegionId(e);if(t.id!==n.id){var l=t.regions.findIndex(function(n){return n.id===e});if(void 0!==l){var i=t.regions.splice(l,1)[0];n.regions.push(i),this.selectedRegion&&this.selectedRegion.id===i.id&&(this.selectedCountry=this.getCountryByRegionId(this.selectedRegion.id)),n.id===Uu.PLAYER?(this.landService.increaseLand(i.land,!0),this.landService.increaseForest(i.forest,!1),this.landService.increaseMountains(i.mountains),i.spy=0):i.id===this.defaultOrigin&&(this.defaultOrigin=0),this.activeCountriesList=[],this.pathCacheSubject.next()}}},e.prototype.findSeaPath=function(e,n,t){var l,i;if(void 0===t&&(t=!1),e===n)return new sO([e]);if(void 0===this.getSeaArea(e)||void 0===n)return null;var r=Number.MAX_SAFE_INTEGER,o=[];this.seaAreas.forEach(function(e){return o.push({id:e.id,cost:Number.MAX_SAFE_INTEGER})});var u=[],s=[],a=[];for(u.push(new sO([e]));u.length>0||s.length>0;){var c=function(e){var l,i,u=p.getSeaArea(e.path[e.path.length-1]);if(0===u.events.length||u.events[0].type!==Bu.PIRATES&&u.events[0].type!==Bu.PIRATES_BASE&&u.events[0].type!==Bu.WHIRLPOOL){var c=p.getSeaArea(e.path[e.path.length-1]).neighbours.filter(function(n){return!e.path.includes(n)}),h=function(l){var i=new sO(e.path.slice().concat([l]));if(i.calculateSeaPathDistance(p)<=o.find(function(e){return e.id===l}).cost&&(o.find(function(e){return e.id===l}).cost=i.calculateSeaPathDistance(p),o.find(function(e){return e.id===l}).cost<=r))if(l===n){if(t)return{value:i};o.find(function(e){return e.id===l}).cost<r&&(r=o.find(function(e){return e.id===l}).cost),a.push(i)}else s.push(i)};try{for(var d=wO(c),g=d.next();!g.done;g=d.next()){var f=h(g.value);if("object"==typeof f)return f}}catch(m){l={error:m}}finally{try{g&&!g.done&&(i=d.return)&&i.call(d)}finally{if(l)throw l.error}}}},p=this;try{for(var h=wO(u),d=h.next();!d.done;d=h.next()){var g=c(d.value);if("object"==typeof g)return g.value}}catch(f){l={error:f}}finally{try{d&&!d.done&&(i=h.return)&&i.call(h)}finally{if(l)throw l.error}}u=s,s=[]}return 0===a.length?null:a.sort(function(e,n){return e.distance-n.distance})[0]},e.prototype.clearMission=function(){this.selectedMission=null},e.prototype.canColonize=function(e){return!this.missions.find(function(n){return 0===n.getMissionType()&&n.getDestinationTargetRegion().id===e&&n.mission===xu.COLONIZE})},e.prototype.getPlayerCountry=function(){return this.countries[0]},e.prototype.getDefaultOriginRegion=function(){return this.getRegion(this.getDefaultOrigin())},e.prototype.getDefaultOriginRegionCountry=function(){return this.getCountryByRegionId(this.getDefaultOrigin())},e.prototype.getDefaultOrigin=function(){return this.defaultOrigin},e.prototype.setDefaultOrigin=function(e){this.defaultOrigin=e},e.prototype.getStationedArmies=function(){var e=[];return this.countries[0].regions.filter(function(e){return 0!==e.id&&e.army.getArmySize()>0}).forEach(function(n){return e.push(n.army)}),this.countries[1].regions.filter(function(e){return e.army.getArmySize()>0}).forEach(function(n){return e.push(n.army)}),e},e.prototype.getStationedNavy=function(){var e=[];return this.countries[0].regions.filter(function(e){return 0!==e.id&&e.navy.getArmySize()>0}).forEach(function(n){return e.push(n.navy)}),this.countries[1].regions.filter(function(e){return e.navy.getArmySize()>0}).forEach(function(n){return e.push(n.navy)}),e},e.prototype.getDisplayX=function(){return this.x},e.prototype.getDisplayY=function(){return this.y},e.prototype.getDisplayZoom=function(){return this.zoom},e.prototype.setDisplayX=function(e){this.x=e},e.prototype.setDisplayY=function(e){this.y=e},e.prototype.setDisplayZoom=function(e){this.zoom=e},e.prototype.getCountriesList=function(){var e=this;return 0===this.activeCountriesList.length&&(this.activeCountriesList.push(Uu[Uu.NONE]),this.countries.filter(function(e){return e.id!==Uu.PLAYER&&e.id!==Uu.NEUTRAL&&e.regions.length>0}).forEach(function(n){return e.activeCountriesList.push(Uu[n.id])})),this.activeCountriesList},e.prototype.getNeutralRegionsNumber=function(){return this.getCountry(Uu.NEUTRAL).regions.length},e.prototype.buildDefense=function(){this.missions.push(new fO(this.servicesService,this.idService.getNextId(),this.getPlayerCountry(),new _R([]),new sO([this.getSelectedRegion().id,this.getSelectedRegion().id])))},e.prototype.changeName=function(){var e=this;this.modalService.open(ju.INPUT),this.modalService.setModalText("Specify your nation name"),this.modalService.setModalValue(this.getPlayerCountry().name);var n=this.modalService.registerForValueResponse().subscribe(function(t){n.unsubscribe(),null!==t&&(e.getPlayerCountry().name=t)})},e.prototype.findNeighbouringAttackableRegions=function(e,n,t){var l=this,i=[],r=[];return n.regions.forEach(function(o){o.neighbours.filter(function(e){return e>=0}).forEach(function(o){var u=l.getCountryByRegionId(o);if(n.id!==u.id&&u.id!==Uu.NEUTRAL){if((u.id===Uu.PLAYER&&n.diplomacy<25||u.id!==Uu.PLAYER)&&l.findPath(e.id,o,n.id,!0)){var s=30;u.id===Uu.PLAYER&&(s=90/l.AI_getDifficultyMultiplier()),l.calendarService.getAbsoluteDay()-l.getRegion(o).lastAttack>=s&&(u.id===Uu.PLAYER&&n.diplomacy<-25?i.includes(o)||i.push(o):r.includes(o)||r.push(o))}}else t&&u.id===Uu.NEUTRAL&&l.getRegion(o).army.hasAny()&&n.diplomacy<25&&l.findPath(e.id,o,n.id,!0)&&(s=30,l.calendarService.getAbsoluteDay()-l.getRegion(o).lastAttack>=s&&(i.includes(o)||i.push(o)))})}),this.shuffleArray(i.length>0?i:r)},e.prototype.findNeighbouringColonizableRegions=function(e,n){var t=this,l=[];return n.regions.forEach(function(i){i.neighbours.filter(function(e){return e>=0}).forEach(function(i){t.getCountryByRegionId(i).id===Uu.NEUTRAL&&!t.getRegion(i).army.hasAny()&&t.canColonize(i)&&t.findPath(e.id,i,n.id,!0)&&(l.includes(i)||l.push(i))})}),this.shuffleArray(l)},e.prototype.shuffleArray=function(e){var n,t,l;for(l=e.length-1;l>0;l--)n=Math.floor(Math.random()*(l+1)),t=e[l],e[l]=e[n],e[n]=t;return e},e.prototype.getMapDisplayOption=function(){return this.mapDisplayOption},e.prototype.setMapDisplayoption=function(e){this.mapDisplayOption=e},e.prototype.DEV_calculateTotalLand=function(){var e=0,n=0,t=0;this.regions.forEach(function(l){8!==l.id&&9!==l.id&&10!==l.id&&11!==l.id&&12!==l.id&&(e+=l.land,n+=l.forest,t+=l.mountains)}),this.logService.success("Land report<br>Land: "+e+"<br>Forest: "+n+"<br>Mountains: "+t+"<br><br>Total: "+(e+n+t))},e.prototype.AI_prepareArmy=function(e){var n=new _R([]);return e.units.forEach(function(t){t.troop!==Lu.MILITIA&&(n.addTroop(t.troop,t.size),e.removeTroop(t.troop,t.size))}),e.removeEmptyUnits(),n},e.prototype.initPlayerKingdomName=function(){this.kongregateService.isAvailable()&&!this.kongregateService.isGuest()&&(this.getPlayerCountry().name=this.kongregateService.getUsername()+"'s nation")},e.prototype.setSelectedSeaEvent=function(e){this.selectedSeaEvent=e,this.selectedRegion=null,this.selectedCountry=null,this.selectedMission=null},e.prototype.getSelectedSeaEvent=function(){return this.selectedSeaEvent},e.prototype.getRandomPointInCircle=function(e,n){if(n<10)return e;var t=(n-10)*Math.sqrt(Math.random()),l=Math.random()*Math.PI*2;return{x:t*Math.cos(l)+e.x,y:t*Math.sin(l)+e.y}},e.prototype.getShowHarbours=function(){return this.showHarbours},e.prototype.setShowHarbours=function(e){this.showHarbours=e},e.prototype.calculatePointsDistance=function(e,n){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))},e.prototype.getSeaAreas=function(){return this.seaAreas},e.prototype.getSeaArea=function(e){return this.seaAreas.find(function(n){return n.id===e})},e.prototype.spawnSeaEvents=function(){var e=this,n=this.seaAreas.filter(function(e){return-1!==e.id});Object.keys(Bu).slice(Object.keys(Bu).length/2).map(function(e){return Bu[e]}).forEach(function(t){var l=Ns.getSeaEvent(t),i=0;e.getSeaAreas().forEach(function(e){e.events.length>0&&e.events[0].type===t&&(i+=1)});var r=n.filter(function(e){return e.r>l.FOR_RADIUS});if(r.length>0){var o=!1;if(i<l.NUMBER_MIN?o=!0:i<l.NUMBER_MAX&&Qu.chance(l.SPAWN_CHANCE-i*l.SPAWN_DECREASE)&&(o=!0),o){var u=r[Qu.randomBetween(0,r.length-1)];0===u.events.length&&u.events.push(new NO(u.id,e.idService.getNextId(),t,e.getRandomPointInCircle(u.center,u.r),Qu.randomBetween(l.POWER_MIN,l.POWER_MAX),Qu.randomBetween(l.TIME_MIN,l.TIME_MAX),null))}}})},e.prototype.getDiscoveredLand=function(){return this.discoveredLand},e.prototype.setDiscoveredLand=function(e){this.discoveredLand=e},e.ngInjectableDef=Oe({factory:function(){return new e(Ye(Vf),Ye($S),Ye(xR),Ye(_O),Ye($f),Ye(jf),Ye(qf),Ye(IO),Ye(zf),Ye(Py),Ye(NE),Ye(tm))},token:e,providedIn:"root"}),e}(),xO=function(){return function(e,n,t,l,i,r,o){this.originRegion=e,this.originRegionColour=n,this.targetRegion=t,this.targetRegionColour=l,this.targetRegionCountry=i,this.targetSeaEvent=r,this.missionType=o}}(),kO=function(){function e(e,n,t,l,i){var r=this;this.servicesService=e,this.worldService=n,this.gameService=t,this.resourcesService=l,this.modalService=i,this.selecting=!1,this.regionSelected=new Gi,this.dragX=-1,this.dragY=-1,this.clickX=-1,this.clickY=-1,this.moved=!1,this.selectedSeaRegion=null,this.radio=0,this.showHarbours=!0,this.pathCache=[],this.countries=Uu,this.seaEvents=Bu,this.missions=xu,this.worldService.registerForCacheInvalidation().subscribe(function(e){r.pathCache=[]}),this.radio=this.worldService.getMapDisplayOption()}return e.prototype.ngOnInit=function(){},e.prototype.getX=function(){return this.worldService.getDisplayX()},e.prototype.getY=function(){return this.worldService.getDisplayY()},e.prototype.getZoom=function(){return this.worldService.getDisplayZoom()},e.prototype.getCountries=function(){return this.worldService.getCountries()},e.prototype.getMissions=function(){return this.worldService.getMissions()},e.prototype.handleKeyDown=function(e){"ArrowDown"===e.key&&this.worldService.setDisplayY(this.worldService.getDisplayY()+5)},e.prototype.dragStart=function(e){this.moved=!1,this.dragX=e.x,this.dragY=e.y,this.clickX=e.x,this.clickY=e.y},e.prototype.mousemove=function(e){1===e.buttons&&this.dragX>=1&&this.dragY>=1&&(this.moved=!0,this.worldService.setDisplayX(this.worldService.getDisplayX()+e.x-this.dragX),this.worldService.setDisplayY(this.worldService.getDisplayY()+e.y-this.dragY),this.dragX=e.x,this.dragY=e.y)},e.prototype.dragEnd=function(e){this.moved&&this.dragX>=0&&this.dragY>=0&&(this.worldService.setDisplayX(this.worldService.getDisplayX()+e.x-this.dragX),this.worldService.setDisplayY(this.worldService.getDisplayY()+e.y-this.dragY)),this.dragX=-1,this.dragY=-1},e.prototype.onScroll=function(e){e.preventDefault(),e.deltaY>0&&this.getZoom()<2.5?this.worldService.setDisplayZoom(this.getZoom()+Math.sign(e.deltaY)/10):e.deltaY<0&&this.getZoom()>.7&&this.worldService.setDisplayZoom(this.getZoom()+Math.sign(e.deltaY)/10),this.getZoom()<.7?this.worldService.setDisplayZoom(.7):this.getZoom()>2.5&&this.worldService.setDisplayZoom(2.5)},e.prototype.prepareViewbox=function(e){return e.x-65+" "+(e.y-65)+" 130 130"},e.prototype.resetView=function(){this.worldService.setDisplayZoom(1.4),this.worldService.setDisplayX(150),this.worldService.setDisplayY(-220)},e.prototype.select=function(e,n,t){Math.abs(e.x-this.clickX)<2&&Math.abs(e.y-this.clickY)<2&&(this.clickX=-1,this.clickY=-1,this.worldService.setSelectedRegion(t),this.worldService.setSelectedCountry(n))},e.prototype.moveUp=function(){this.worldService.setDisplayY(this.getY()-20)},e.prototype.moveDown=function(){this.worldService.setDisplayY(this.getY()+20)},e.prototype.moveRight=function(){this.worldService.setDisplayX(this.getX()+20)},e.prototype.moveLeft=function(){this.worldService.setDisplayX(this.getX()-20)},e.prototype.plunder=function(){this.modalService.open(ju.MISSION),this.modalService.setMissionData(new xO(this.worldService.getDefaultOriginRegion(),this.worldService.getDefaultOriginRegionCountry().colour,this.worldService.getSelectedRegion(),this.worldService.getSelectedCountry().colour,this.worldService.getSelectedCountry().id,null,xu.PLUNDER))},e.prototype.conquer=function(){this.modalService.open(ju.MISSION),this.modalService.setMissionData(new xO(this.worldService.getDefaultOriginRegion(),this.worldService.getDefaultOriginRegionCountry().colour,this.worldService.getSelectedRegion(),this.worldService.getSelectedCountry().colour,this.worldService.getSelectedCountry().id,null,xu.CONQUER))},e.prototype.colonize=function(){this.modalService.open(ju.MISSION),this.modalService.setMissionData(new xO(this.worldService.getRegion(0),this.worldService.getPlayerCountry().colour,this.worldService.getSelectedRegion(),this.worldService.getSelectedCountry().colour,this.worldService.getSelectedCountry().id,null,xu.COLONIZE))},e.prototype.move=function(){this.modalService.open(ju.MISSION),this.modalService.setMissionData(new xO(this.worldService.getSelectedRegion(),this.worldService.getSelectedCountry().colour,null,null,null,null,xu.MOVE))},e.prototype.spy=function(){this.modalService.open(ju.MISSION),this.modalService.setMissionData(new xO(this.worldService.getDefaultOriginRegion(),this.worldService.getDefaultOriginRegionCountry().colour,this.worldService.getSelectedRegion(),this.worldService.getSelectedCountry().colour,this.worldService.getSelectedCountry().id,null,xu.SPY))},e.prototype.seaMove=function(){this.modalService.open(ju.MISSION),this.modalService.setMissionData(new xO(this.worldService.getSelectedRegion(),this.worldService.getSelectedCountry().colour,null,null,null,null,xu.SEA_MOVE))},e.prototype.seaPlunder=function(){this.modalService.open(ju.MISSION),this.modalService.setMissionData(new xO(this.worldService.getDefaultOriginRegion(),this.worldService.getDefaultOriginRegionCountry().colour,this.worldService.getSelectedRegion(),this.worldService.getSelectedCountry().colour,this.worldService.getSelectedCountry().id,null,xu.SEA_PLUNDER))},e.prototype.seaConquer=function(){this.modalService.open(ju.MISSION),this.modalService.setMissionData(new xO(this.worldService.getDefaultOriginRegion(),this.worldService.getDefaultOriginRegionCountry().colour,this.worldService.getSelectedRegion(),this.worldService.getSelectedCountry().colour,this.worldService.getSelectedCountry().id,null,xu.SEA_CONQUER))},e.prototype.fishing=function(){this.modalService.open(ju.MISSION),this.modalService.setMissionData(new xO(this.worldService.getDefaultOriginRegion(),this.worldService.getDefaultOriginRegionCountry().colour,null,null,null,this.worldService.getSelectedSeaEvent(),xu.FISHING))},e.prototype.hunting=function(){this.modalService.open(ju.MISSION),this.modalService.setMissionData(new xO(this.worldService.getDefaultOriginRegion(),this.worldService.getDefaultOriginRegionCountry().colour,null,null,null,this.worldService.getSelectedSeaEvent(),xu.HUNTING))},e.prototype.treasure=function(){this.modalService.open(ju.MISSION),this.modalService.setMissionData(new xO(this.worldService.getDefaultOriginRegion(),this.worldService.getDefaultOriginRegionCountry().colour,null,null,null,this.worldService.getSelectedSeaEvent(),xu.TREASURE))},e.prototype.cartography=function(){this.modalService.open(ju.MISSION),this.modalService.setMissionData(new xO(this.worldService.getDefaultOriginRegion(),this.worldService.getDefaultOriginRegionCountry().colour,null,null,null,this.worldService.getSelectedSeaEvent(),xu.CARTOGRAPHY))},e.prototype.seaBattle=function(){this.modalService.open(ju.MISSION),this.modalService.setMissionData(new xO(this.worldService.getDefaultOriginRegion(),this.worldService.getDefaultOriginRegionCountry().colour,null,null,null,this.worldService.getSelectedSeaEvent(),xu.SEA_BATTLE))},e.prototype.expedition=function(){this.modalService.open(ju.MISSION),this.modalService.setMissionData(new xO(this.worldService.getDefaultOriginRegion(),this.worldService.getDefaultOriginRegionCountry().colour,null,null,null,null,xu.EXPEDITION))},e.prototype.isDev=function(){return!is.production},e.prototype.getNeighbours=function(e){var n=[];return this.getCountries().forEach(function(t){t.regions.forEach(function(t){e.neighbours.includes(t.id)&&n.push(t)})}),n},e.prototype.selectMission=function(e){this.worldService.setSelectedMission(e)},e.prototype.findPath=function(e,n,t){var l=this.worldService.findPath(e,n,t,!0);return l?l.path.length-1:-1},e.prototype.hasPath=function(e,n,t,l){if(void 0===t&&(t=Uu.PLAYER),void 0===l&&(l=!1),l)return this.findPath(e,n,t)>=0;var i=this.pathCache.find(function(t){return t[0]===e&&t[1]===n});if(i)return i[2];var r=this.findPath(e,n,t)>=0;return this.pathCache.push([e,n,r]),r},e.prototype.getSelectedRegion=function(){return this.worldService.getSelectedRegion()},e.prototype.getSelectedCountry=function(){return this.worldService.getSelectedCountry()},e.prototype.getSelectedMission=function(){return this.worldService.getSelectedMission()},e.prototype.getTroopName=function(e){return Vu.prepareTroopName(e)},e.prototype.getMissionName=function(){return Vu.prepareMissionName(this.getSelectedMission().mission)},e.prototype.canColonize=function(){return this.worldService.canColonize(this.getSelectedRegion().id)},e.prototype.zoomIn=function(){this.getZoom()>.7&&(this.worldService.setDisplayZoom(this.getZoom()-.1),this.getZoom()<.7&&this.worldService.setDisplayZoom(.7))},e.prototype.zoomOut=function(){this.getZoom()<2.5&&(this.worldService.setDisplayZoom(this.getZoom()+.1),this.getZoom()>2.5&&this.worldService.setDisplayZoom(2.5))},e.prototype.getDefaultOrigin=function(){return this.worldService.getDefaultOrigin()},e.prototype.setDefaultOrigin=function(e){this.worldService.setDefaultOrigin(e)},e.prototype.getTarget=function(e){return oO[e]},e.prototype.build=function(){var e=this;this.worldService.getMissions().find(function(n){return n.mission===xu.BUILD&&n.getDestinationTargetRegion().id===e.getSelectedRegion().id})?this.modalService.info("Building already in progress"):(this.modalService.open(ju.WORLD_BUILD),this.modalService.setWorldRegion(this.getSelectedRegion()))},e.prototype.getFirstFourUnits=function(e){return e.length>4?e.filter(function(e){return e.troop===Lu.MILITIA||e.troop===Lu.ARCHER||e.troop===Lu.SPEARMAN||e.troop===Lu.SWORDSMAN}).sort(function(e,n){return e.troop-n.troop}):e.sort(function(e,n){return e.troop-n.troop})},e.prototype.getSecondFourUnits=function(e){if(e.length>4)return e.filter(function(e){return e.troop===Lu.LIGHT_CAVALRY}).sort(function(e,n){return e.troop-n.troop})},e.prototype.changeName=function(){this.worldService.changeName()},e.prototype.calculateTotalLand=function(){this.worldService.DEV_calculateTotalLand()},e.prototype.updateMapDisplayOption=function(){this.worldService.setMapDisplayoption(this.radio),this.worldService.setShowHarbours(this.showHarbours)},e.prototype.cancel=function(){var e=this;this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to cancel this mission?");var n=this.modalService.registerForConfirmation().subscribe(function(t){n.unsubscribe(),t&&e.getSelectedMission().cancel()})},e.prototype.canCancel=function(){var e=this.getSelectedMission().mission;return(e===xu.PLUNDER||e===xu.CONQUER||e===xu.MOVE)&&"traveling"===this.getSelectedMission().status},e.prototype.getSeaAreas=function(){return this.worldService.getSeaAreas()},e.prototype.getSeaArea=function(e){return this.worldService.getSeaAreas().find(function(n){return n.id===e})},e.prototype.selectArea=function(e){this.selectedSeaRegion=e},e.prototype.getSeaEventIconPath=function(e){var n;switch(e){case Bu.FISH:n="fish";break;case Bu.SHARK:n="shark";break;case Bu.TREASURE:n="treasure";break;case Bu.PIRATES:n="pirate_flag";break;case Bu.PIRATES_BASE:n="pirates_base";break;case Bu.WHIRLPOOL:n="whirlpool";break;case Bu.CARTOGRAPHY:n="sextant"}return"assets/sea/"+n+".svg"},e.prototype.selectSeaEvent=function(e){this.worldService.setSelectedSeaEvent(e)},e.prototype.getSelectedSeaEvent=function(){return this.worldService.getSelectedSeaEvent()},e.prototype.getSeaEventName=function(){return Vu.prepareSeaEventName(this.getSelectedSeaEvent().type)},e.prototype.getShowHarbours=function(){return this.worldService.getShowHarbours()},e.prototype.getHarbour=function(e){return Ns.SEA_AREAS.find(function(n){return n.ID===e})},e.prototype.hasSeaPath=function(e,n){return!!this.worldService.findSeaPath(e,n,!0)},e.prototype.DEV_changeToPirate=function(){this.getSelectedSeaEvent().type=Bu.PIRATES,this.getSelectedSeaEvent().data=new _R([new NR(Lu.BOAT,1)])},e.prototype.hasMap=function(){return 0===this.resourcesService.hasResource(Iu.MAP,1,"Expedition",!0)},e.prototype.isSeaEnabled=function(){return this.gameService.isEnabled(_u.NAVY)},e.prototype.isSeaCartographyEnabled=function(){return this.gameService.isEnabled(_u.CARTOGRAPHER)},e}(),MO=rl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{width:100%;height:100%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#details[_ngcontent-%COMP%]{margin:5px 5px 0;width:98%;height:152px;border:2px solid #000}#details.selecting[_ngcontent-%COMP%]{height:117px}#svg[_ngcontent-%COMP%]{position:relative;margin:5px;width:98%;height:70.5%;border:2px solid #000}#kingdomName[_ngcontent-%COMP%]{font-weight:700}#mainMap[_ngcontent-%COMP%]{background-color:#86c5da}#target[_ngcontent-%COMP%]{position:absolute;width:30px;top:25px;right:30px;cursor:pointer}#arrowUp[_ngcontent-%COMP%]{position:absolute;width:30px;top:0;right:30px;cursor:pointer}#arrowDown[_ngcontent-%COMP%]{position:absolute;width:30px;top:50px;right:30px;cursor:pointer}#arrowRight[_ngcontent-%COMP%]{position:absolute;width:30px;top:25px;right:5px;cursor:pointer}#arrowLeft[_ngcontent-%COMP%]{position:absolute;width:30px;top:25px;right:55px;cursor:pointer}#plus[_ngcontent-%COMP%]{position:absolute;width:25px;top:80px;right:50px;cursor:pointer}#minus[_ngcontent-%COMP%]{position:absolute;width:25px;top:80px;right:15px;cursor:pointer}#options[_ngcontent-%COMP%]{position:absolute;top:5px;right:90px;cursor:pointer}#options[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-block;width:100px;text-align:end;cursor:pointer}#options2[_ngcontent-%COMP%]{position:absolute;top:5px;right:210px;cursor:pointer}#options2[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-block;width:120px;text-align:end;cursor:pointer}.mission[_ngcontent-%COMP%]{cursor:pointer}svg[_ngcontent-%COMP%]{height:100%;width:100%}.region[_ngcontent-%COMP%]:hover{opacity:.7}#regionDetails[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}#missionDetails[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], #regionDetails[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-right:20px}#missionDetails[_ngcontent-%COMP%], #missionStats[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}#missionTitle[_ngcontent-%COMP%]{font-size:1.1em;font-weight:bolder;text-align:center;padding-bottom:5px}#missionBody[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;margin-left:5px}app-progress-bar[_ngcontent-%COMP%]{margin-top:3px;margin-left:5px;display:inline-block;width:150px;height:15px;font-size:.7em}#missionStatus[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;margin-bottom:2px}#missionBody[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 auto}#missionBody[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:120px}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center}hr[_ngcontent-%COMP%]{display:block;height:1px;border:0;border-top:1px solid #000;padding:0;margin:2px 0}button[_ngcontent-%COMP%]{margin:2px;padding:4px}.buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}.buttonIcon[_ngcontent-%COMP%]{height:20px}#changeName[_ngcontent-%COMP%]{margin-left:5px;height:14px;cursor:pointer}#svgBox[_ngcontent-%COMP%]{height:72px;width:72px}.seaEvent[_ngcontent-%COMP%]{cursor:pointer}#seaEventBody[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}#seaEventTitle[_ngcontent-%COMP%]{margin-left:10px;font-weight:bolder}#sizeDiv[_ngcontent-%COMP%]{padding-right:15px}"]],data:{}});function DO(e){return So(0,[(e()(),eo(0,0,null,null,0,"img",[["id","changeName"],["src","assets/gear.svg"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.changeName()&&l),l},null,null))],null,null)}function LO(e){return So(0,[(e()(),eo(0,0,null,null,0,"span",[],null,null,null,null,null))],null,null)}function FO(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(1,null,[" standing: "," (",") "]))],null,function(e,n){var t=n.component;e(n,1,0,t.getSelectedCountry().getDiplomacy(),t.getSelectedCountry().diplomacy)})}function UO(e){return So(0,[(e()(),eo(0,0,null,null,3,"span",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,0,"input",[["id","defaultOrigin"],["type","radio"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==i.setDefaultOrigin(i.getSelectedRegion().id)&&l),l},null,null)),(e()(),eo(2,0,null,null,1,"label",[["for","defaultOrigin"]],null,null,null,null,null)),(e()(),fo(-1,null,["use as default origin"]))],null,function(e,n){var t=n.component;e(n,1,0,t.getDefaultOrigin()===t.getSelectedRegion().id)})}function HO(e){return So(0,[(e()(),eo(0,0,null,null,12,"div",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(2,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(3,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),fo(4,null,[" "," "])),(e()(),eo(5,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(6,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(7,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),fo(8,null,[" "," "])),(e()(),eo(9,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(10,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(11,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),fo(12,null,[" "," "]))],function(e,n){e(n,3,0,"wealth","world"),e(n,7,0,"economy","world"),e(n,11,0,"defense","world")},function(e,n){var t=n.component;e(n,4,0,t.getSelectedRegion().wealth),e(n,8,0,t.getSelectedRegion().economy),e(n,12,0,t.getSelectedRegion().defense)})}function GO(e){return So(0,[(e()(),eo(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(2,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(3,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),fo(4,null,[" "," "]))],function(e,n){e(n,3,0,"defense","world")},function(e,n){e(n,4,0,n.component.getSelectedRegion().defense)})}function BO(e){return So(0,[(e()(),eo(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(2,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(3,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),fo(4,null,[" "," "]))],function(e,n){e(n,3,0,"spy","army/mission")},function(e,n){e(n,4,0,n.component.getSelectedRegion().spy)})}function VO(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(1,null,[""," : ",""]))],null,function(e,n){e(n,1,0,n.component.getTroopName(n.context.$implicit.troop),n.context.$implicit.size)})}function WO(e){return So(0,[(e()(),eo(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,VO)),vi(2,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.getFirstFourUnits(t.getSelectedRegion().army.units))},null)}function zO(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(1,null,[""," : ",""]))],null,function(e,n){e(n,1,0,n.component.getTroopName(n.context.$implicit.troop),n.context.$implicit.size)})}function YO(e){return So(0,[(e()(),eo(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,zO)),vi(2,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.getSecondFourUnits(t.getSelectedRegion().army.units))},null)}function KO(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(1,null,[""," : ",""]))],null,function(e,n){e(n,1,0,n.component.getTroopName(n.context.$implicit.troop),n.context.$implicit.size)})}function jO(e){return So(0,[(e()(),eo(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,KO)),vi(2,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,2,0,n.component.getSelectedRegion().navy.units)},null)}function $O(e){return So(0,[(e()(),eo(0,0,null,null,12,"div",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(2,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(3,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),fo(-1,null,[" ? "])),(e()(),eo(5,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(6,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(7,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),fo(-1,null,[" ? "])),(e()(),eo(9,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(10,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(11,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),fo(-1,null,[" ? "]))],function(e,n){e(n,3,0,"wealth","world"),e(n,7,0,"economy","world"),e(n,11,0,"defense","world")},null)}function QO(e){return So(0,[(e()(),eo(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(-1,null,[" troops: ? "]))],null,null)}function qO(e){return So(0,[(e()(),eo(0,0,null,null,2,"button",[["class","icon"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.colonize()&&l),l},null,null)),(e()(),fo(-1,null,["Colonize "])),(e()(),eo(2,0,null,null,0,"img",[["class","buttonIcon"],["src","assets/army/mission/colonize.svg"]],null,null,null,null,null))],null,null)}function XO(e){return So(0,[(e()(),eo(0,0,null,null,2,"button",[["class","icon"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.move()&&l),l},null,null)),(e()(),fo(-1,null,["Move army "])),(e()(),eo(2,0,null,null,0,"img",[["class","buttonIcon"],["src","assets/army/mission/move.svg"]],null,null,null,null,null))],null,null)}function ZO(e){return So(0,[(e()(),eo(0,0,null,null,2,"button",[["class","icon"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.seaMove()&&l),l},null,null)),(e()(),fo(-1,null,["Sea move "])),(e()(),eo(2,0,null,null,0,"img",[["class","buttonIcon"],["src","assets/army/mission/sea_move.svg"]],null,null,null,null,null))],null,null)}function JO(e){return So(0,[(e()(),eo(0,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,6,"div",[["class","buttons"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,qO)),vi(3,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,XO)),vi(5,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,ZO)),vi(7,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,3,0,t.canColonize()&&t.hasPath(0,t.getSelectedRegion().id)),e(n,5,0,t.getSelectedRegion().army.hasAny()),e(n,7,0,t.isSeaEnabled()&&t.getSelectedRegion().army.hasAny()&&t.hasSeaPath(t.getDefaultOrigin(),t.getSelectedRegion().id))},null)}function eT(e){return So(0,[(e()(),eo(0,0,null,null,2,"button",[["class","icon"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.plunder()&&l),l},null,null)),(e()(),fo(-1,null,["Plunder "])),(e()(),eo(2,0,null,null,0,"img",[["class","buttonIcon"],["src","assets/army/mission/plunder.svg"]],null,null,null,null,null))],null,null)}function nT(e){return So(0,[(e()(),eo(0,0,null,null,2,"button",[["class","icon"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.conquer()&&l),l},null,null)),(e()(),fo(-1,null,["Conquer "])),(e()(),eo(2,0,null,null,0,"img",[["class","buttonIcon"],["src","assets/army/mission/conquer.svg"]],null,null,null,null,null))],null,null)}function tT(e){return So(0,[(e()(),eo(0,0,null,null,2,"button",[["class","icon"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.spy()&&l),l},null,null)),(e()(),fo(-1,null,["Spy "])),(e()(),eo(2,0,null,null,0,"img",[["class","buttonIcon"],["src","assets/army/mission/spy.svg"]],null,null,null,null,null))],null,null)}function lT(e){return So(0,[(e()(),eo(0,0,null,null,2,"button",[["class","icon"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.seaPlunder()&&l),l},null,null)),(e()(),fo(-1,null,["Sea plunder "])),(e()(),eo(2,0,null,null,0,"img",[["class","buttonIcon"],["src","assets/army/mission/plunder.svg"]],null,null,null,null,null))],null,null)}function iT(e){return So(0,[(e()(),eo(0,0,null,null,2,"button",[["class","icon"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.seaConquer()&&l),l},null,null)),(e()(),fo(-1,null,["Sea conquer "])),(e()(),eo(2,0,null,null,0,"img",[["class","buttonIcon"],["src","assets/army/mission/conquer.svg"]],null,null,null,null,null))],null,null)}function rT(e){return So(0,[(e()(),eo(0,0,null,null,11,"div",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,10,"div",[["class","buttons"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,eT)),vi(3,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,nT)),vi(5,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,tT)),vi(7,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,lT)),vi(9,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,iT)),vi(11,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,3,0,t.hasPath(t.getDefaultOrigin(),t.getSelectedRegion().id)),e(n,5,0,t.hasPath(t.getDefaultOrigin(),t.getSelectedRegion().id)),e(n,7,0,0===t.getSelectedRegion().spy&&t.hasPath(t.getDefaultOrigin(),t.getSelectedRegion().id,t.countries.SPECIAL,!0)),e(n,9,0,t.isSeaEnabled()&&t.hasSeaPath(0,t.getSelectedRegion().id)),e(n,11,0,t.isSeaEnabled()&&t.hasSeaPath(0,t.getSelectedRegion().id))},null)}function oT(e){return So(0,[(e()(),eo(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,JO)),vi(2,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,rT)),vi(4,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.getSelectedCountry().id===t.countries.NEUTRAL),e(n,4,0,t.getSelectedCountry().id!==t.countries.NEUTRAL)},null)}function uT(e){return So(0,[(e()(),eo(0,0,null,null,2,"button",[["class","icon"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.move()&&l),l},null,null)),(e()(),fo(-1,null,["Move army "])),(e()(),eo(2,0,null,null,0,"img",[["class","buttonIcon"],["src","assets/army/mission/move.svg"]],null,null,null,null,null))],null,null)}function sT(e){return So(0,[(e()(),eo(0,0,null,null,2,"button",[["class","icon"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.build()&&l),l},null,null)),(e()(),fo(-1,null,["Build defense "])),(e()(),eo(2,0,null,null,0,"img",[["class","buttonIcon"],["src","assets/army/mission/build.svg"]],null,null,null,null,null))],null,null)}function aT(e){return So(0,[(e()(),eo(0,0,null,null,2,"button",[["class","icon"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.seaMove()&&l),l},null,null)),(e()(),fo(-1,null,["Sea move "])),(e()(),eo(2,0,null,null,0,"img",[["class","buttonIcon"],["src","assets/army/mission/sea_move.svg"]],null,null,null,null,null))],null,null)}function cT(e){return So(0,[(e()(),eo(0,0,null,null,2,"button",[["class","icon"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.expedition()&&l),l},null,null)),(e()(),fo(-1,null,["Send expedition"])),(e()(),eo(2,0,null,null,0,"img",[["class","buttonIcon"],["src","assets/resources/map.svg"]],null,null,null,null,null))],null,null)}function pT(e){return So(0,[(e()(),eo(0,0,null,null,9,"div",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,8,"div",[["class","buttons"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,uT)),vi(3,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,sT)),vi(5,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,aT)),vi(7,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,cT)),vi(9,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,3,0,t.getSelectedRegion().army.hasAny()),e(n,5,0,0!==t.getSelectedRegion().id),e(n,7,0,t.isSeaEnabled()&&t.getSelectedRegion().army.hasAny()&&t.hasSeaPath(t.getDefaultOrigin(),t.getSelectedRegion().id)),e(n,9,0,0===t.getSelectedRegion().id&&t.hasMap())},null)}function hT(e){return So(0,[(e()(),eo(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,oT)),vi(2,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,pT)),vi(4,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.getSelectedCountry().id!==t.countries.PLAYER),e(n,4,0,t.getSelectedCountry().id===t.countries.PLAYER)},null)}function dT(e){return So(0,[(e()(),eo(0,0,null,null,48,"div",[],null,null,null,null,null)),(e()(),fo(-1,null,[" Kingdom: "])),(e()(),eo(2,0,null,null,1,"span",[["id","kingdomName"]],null,null,null,null,null)),(e()(),fo(3,null,["",""])),(e()(),Jr(16777216,null,null,1,null,DO)),vi(5,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,LO)),vi(7,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(8,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,FO)),vi(10,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,UO)),vi(12,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(13,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),eo(14,0,null,null,32,"div",[["id","regionDetails"]],null,null,null,null,null)),(e()(),eo(15,0,null,null,2,"div",[["id","svgBox"]],null,null,null,null,null)),(e()(),eo(16,0,null,null,1,":svg:svg",[["class","regionSVG"],["draggable","false"],["ondragstart","return false;"]],[[1,"height",0],[1,"width",0],[1,"viewBox",0]],null,null,null,null)),(e()(),eo(17,0,null,null,0,":svg:path",[],[[1,"fill",0],[1,"d",0],[1,"stroke",0],[1,"stroke-width",0]],null,null,null,null)),(e()(),eo(18,0,null,null,12,"div",[],null,null,null,null,null)),(e()(),eo(19,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(20,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(21,114688,null,0,xg,[],{name:[0,"name"]},null),(e()(),fo(22,null,[" ",""])),(e()(),eo(23,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(24,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(25,114688,null,0,xg,[],{name:[0,"name"]},null),(e()(),fo(26,null,[" ",""])),(e()(),eo(27,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(28,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(29,114688,null,0,xg,[],{name:[0,"name"]},null),(e()(),fo(30,null,[" ",""])),(e()(),Jr(16777216,null,null,1,null,HO)),vi(32,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,GO)),vi(34,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,BO)),vi(36,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,WO)),vi(38,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,YO)),vi(40,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,jO)),vi(42,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,$O)),vi(44,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,QO)),vi(46,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,hT)),vi(48,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,5,0,t.getSelectedCountry().id===t.countries.PLAYER),e(n,7,0,t.isDev()),e(n,10,0,t.getSelectedCountry().id!==t.countries.PLAYER&&t.getSelectedCountry().id!==t.countries.NEUTRAL),e(n,12,0,t.getSelectedCountry().id===t.countries.PLAYER||t.getSelectedCountry().id===t.countries.NEUTRAL),e(n,21,0,"land"),e(n,25,0,"forest"),e(n,29,0,"mountains"),e(n,32,0,t.getSelectedRegion().spy>0&&t.getSelectedCountry().id!==t.countries.PLAYER),e(n,34,0,t.getSelectedCountry().id===t.countries.PLAYER),e(n,36,0,t.getSelectedRegion().spy>0&&t.getSelectedCountry().id!==t.countries.PLAYER),e(n,38,0,t.getSelectedRegion().spy>0||t.getSelectedCountry().id===t.countries.PLAYER||t.getSelectedCountry().id===t.countries.NEUTRAL),e(n,40,0,t.getSelectedRegion().spy>0||t.getSelectedCountry().id===t.countries.PLAYER||t.getSelectedCountry().id===t.countries.NEUTRAL),e(n,42,0,t.getSelectedRegion().spy>0||t.getSelectedCountry().id===t.countries.PLAYER||t.getSelectedCountry().id===t.countries.NEUTRAL),e(n,44,0,0===t.getSelectedRegion().spy&&t.getSelectedCountry().id!==t.countries.PLAYER&&t.getSelectedCountry().id!==t.countries.NEUTRAL),e(n,46,0,0===t.getSelectedRegion().spy&&t.getSelectedCountry().id!==t.countries.PLAYER&&t.getSelectedCountry().id!==t.countries.NEUTRAL),e(n,48,0,!t.selecting)},function(e,n){var t=n.component;e(n,3,0,t.getSelectedCountry().name),e(n,16,0,"72px","72px",t.prepareViewbox(t.getSelectedRegion().center)),e(n,17,0,t.getSelectedCountry().colour,t.getSelectedRegion().path,"black","2"),e(n,22,0,t.getSelectedRegion().land),e(n,26,0,t.getSelectedRegion().forest),e(n,30,0,t.getSelectedRegion().mountains)})}function gT(e){return So(0,[(e()(),eo(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.cancel()&&l),l},null,null)),(e()(),fo(-1,null,["cancel mission"]))],null,null)}function fT(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(1,null,["",": ",""]))],null,function(e,n){e(n,1,0,n.component.getTroopName(n.context.$implicit.troop),n.context.$implicit.size)})}function mT(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(1,null,[""," fish"]))],null,function(e,n){e(n,1,0,n.component.getSelectedMission().data)})}function vT(e){return So(0,[(e()(),eo(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(2,null,[""," meat"])),(e()(),eo(3,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(4,null,[""," fur"]))],null,function(e,n){var t=n.component;e(n,2,0,t.getSelectedMission().data.meat),e(n,4,0,t.getSelectedMission().data.fur)})}function ST(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(1,null,[""," coins"]))],null,function(e,n){e(n,1,0,n.component.getSelectedMission().data)})}function ET(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(1,null,[""," coins"]))],null,function(e,n){e(n,1,0,n.component.getSelectedMission().data)})}function yT(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(1,null,[""," cartography data"]))],null,function(e,n){e(n,1,0,n.component.getSelectedMission().data)})}function RT(e){return So(0,[(e()(),eo(0,0,null,null,10,"div",[],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,mT)),vi(2,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,vT)),vi(4,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,ST)),vi(6,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,ET)),vi(8,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,yT)),vi(10,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.getSelectedMission().mission===t.missions.FISHING),e(n,4,0,t.getSelectedMission().mission===t.missions.HUNTING),e(n,6,0,t.getSelectedMission().mission===t.missions.TREASURE),e(n,8,0,t.getSelectedMission().mission===t.missions.SEA_BATTLE),e(n,10,0,t.getSelectedMission().mission===t.missions.CARTOGRAPHY)},null)}function bT(e){return So(0,[(e()(),eo(0,0,null,null,19,"div",[["id","missionDetails"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"div",[["id","missionTitle"]],null,null,null,null,null)),(e()(),fo(2,null,["",""])),(e()(),eo(3,0,null,null,16,"div",[["id","missionBody"]],null,null,null,null,null)),(e()(),eo(4,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),eo(5,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(e()(),eo(6,0,null,null,8,"div",[["id","missionStats"]],null,null,null,null,null)),(e()(),eo(7,0,null,null,3,"div",[["id","missionStatus"]],null,null,null,null,null)),(e()(),fo(8,null,[" ",": "])),(e()(),eo(9,0,null,null,1,"app-progress-bar",[],null,null,null,tO,Jb)),vi(10,638976,null,0,Zb,[zf],{progress:[0,"progress"]},null),(e()(),eo(11,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(12,null,["travel speed: ",""])),(e()(),Jr(16777216,null,null,1,null,gT)),vi(14,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(15,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,fT)),vi(17,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),Jr(16777216,null,null,1,null,RT)),vi(19,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,10,0,t.getSelectedMission().getDisplayProgress()),e(n,14,0,t.canCancel()),e(n,17,0,t.getSelectedMission().army.units),e(n,19,0,null!==t.getSelectedMission().data)},function(e,n){var t=n.component;e(n,2,0,t.getMissionName()),e(n,5,0,xl(1,"",t.getSelectedMission().getIconPath(),"")),e(n,8,0,t.getSelectedMission().getStatus()),e(n,12,0,t.getSelectedMission().army.getArmySpeed())})}function OT(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.fishing()&&l),l},null,null)),(e()(),fo(-1,null,["Start fishing"]))],null,null)}function TT(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.hunting()&&l),l},null,null)),(e()(),fo(-1,null,["Start hunting"]))],null,null)}function CT(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.treasure()&&l),l},null,null)),(e()(),fo(-1,null,["Look for treasure"]))],null,null)}function IT(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.cartography()&&l),l},null,null)),(e()(),fo(-1,null,["Gather cartography data"]))],null,null)}function AT(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.seaBattle()&&l),l},null,null)),(e()(),fo(-1,null,["Attack pirates"]))],null,null)}function NT(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.seaBattle()&&l),l},null,null)),(e()(),fo(-1,null,["Attack pirates base"]))],null,null)}function _T(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[["id","sizeDiv"]],null,null,null,null,null)),(e()(),fo(1,null,[" size: "," "]))],null,function(e,n){e(n,1,0,n.component.getSelectedSeaEvent().amount)})}function wT(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(1,null,[""," : ",""]))],null,function(e,n){e(n,1,0,n.component.getTroopName(n.context.$implicit.troop),n.context.$implicit.size)})}function PT(e){return So(0,[(e()(),eo(0,0,null,null,2,"div",[["id","seaEventRight"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,wT)),vi(2,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,2,0,n.component.getSelectedSeaEvent().data.units)},null)}function xT(e){return So(0,[(e()(),eo(0,0,null,null,22,"div",[["id","seaEventDetails"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"div",[["id","seaEventTitle"]],null,null,null,null,null)),(e()(),fo(2,null,["",""])),(e()(),eo(3,0,null,null,19,"div",[["id","seaEventBody"]],null,null,null,null,null)),(e()(),eo(4,0,null,null,14,"div",[["id","seaEventLeft"]],null,null,null,null,null)),(e()(),eo(5,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),eo(6,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,OT)),vi(8,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,TT)),vi(10,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,CT)),vi(12,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,IT)),vi(14,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,AT)),vi(16,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,NT)),vi(18,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,_T)),vi(20,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,PT)),vi(22,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,8,0,t.isSeaEnabled()&&t.hasSeaPath(0,t.getSelectedSeaEvent().parentId)&&t.getSelectedSeaEvent().type===t.seaEvents.FISH),e(n,10,0,t.isSeaEnabled()&&t.hasSeaPath(0,t.getSelectedSeaEvent().parentId)&&t.getSelectedSeaEvent().type===t.seaEvents.SHARK),e(n,12,0,t.isSeaEnabled()&&t.hasSeaPath(0,t.getSelectedSeaEvent().parentId)&&t.getSelectedSeaEvent().type===t.seaEvents.TREASURE),e(n,14,0,t.isSeaCartographyEnabled()&&t.hasSeaPath(0,t.getSelectedSeaEvent().parentId)&&t.getSelectedSeaEvent().type===t.seaEvents.CARTOGRAPHY),e(n,16,0,t.isSeaEnabled()&&t.hasSeaPath(0,t.getSelectedSeaEvent().parentId)&&t.getSelectedSeaEvent().type===t.seaEvents.PIRATES),e(n,18,0,t.isSeaEnabled()&&t.hasSeaPath(0,t.getSelectedSeaEvent().parentId)&&t.getSelectedSeaEvent().type===t.seaEvents.PIRATES_BASE),e(n,20,0,t.getSelectedSeaEvent().type!==t.seaEvents.WHIRLPOOL),e(n,22,0,t.getSelectedSeaEvent().data)},function(e,n){var t=n.component;e(n,2,0,t.getSeaEventName()),e(n,6,0,xl(1,"",t.getSeaEventIconPath(t.getSelectedSeaEvent().type),""))})}function kT(e){return So(0,[(e()(),eo(0,0,null,null,0,":svg:path",[],[[1,"fill",0],[1,"d",0],[1,"stroke",0],[1,"stroke-width",0]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.select(t,e.parent.parent.context.$implicit,e.parent.context.$implicit)&&l),l},null,null))],null,function(e,n){e(n,0,0,n.parent.parent.context.$implicit.colour,n.parent.context.$implicit.path,"black","2")})}function MT(e){return So(0,[(e()(),eo(0,0,null,null,2,":svg:g",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.select(t,e.parent.parent.context.$implicit,e.parent.context.$implicit)&&l),l},null,null)),(e()(),eo(1,0,null,null,0,":svg:path",[],[[1,"fill",0],[1,"d",0],[1,"stroke",0],[1,"stroke-width",0]],null,null,null,null)),(e()(),eo(2,0,null,null,0,":svg:path",[],[[1,"fill",0],[1,"d",0]],null,null,null,null))],null,function(e,n){e(n,1,0,n.parent.parent.context.$implicit.colour,n.parent.context.$implicit.path,"black","2"),e(n,2,0,"url(#diagonalHatch)",n.parent.context.$implicit.path)})}function DT(e){return So(0,[(e()(),eo(0,0,null,null,2,":svg:g",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,0,":svg:circle",[],[[1,"r",0],[1,"cx",0],[1,"cy",0],[1,"fill",0]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.select(t,e.parent.parent.context.$implicit,e.parent.context.$implicit)&&l),l},null,null)),(e()(),eo(2,0,null,null,0,":svg:image",[],[[1,"height",0],[1,"width",0],[1,"x",0],[1,"y",0],[1,":xlink:href",0]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.select(t,e.parent.parent.context.$implicit,e.parent.context.$implicit)&&l),l},null,null))],null,function(e,n){e(n,1,0,12,n.parent.context.$implicit.center.x,n.parent.context.$implicit.center.y+1,n.component.worldService.getCountry(n.parent.context.$implicit.capital).colour),e(n,2,0,20,20,n.parent.context.$implicit.center.x-10,n.parent.context.$implicit.center.y-10,"assets/world/capital.svg")})}function LT(e){return So(0,[(e()(),eo(0,0,null,null,2,":svg:g",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,0,":svg:circle",[],[[1,"r",0],[1,"cx",0],[1,"cy",0],[1,"fill",0]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.select(t,e.parent.parent.context.$implicit,e.parent.context.$implicit)&&l),l},null,null)),(e()(),eo(2,0,null,null,0,":svg:image",[],[[1,"height",0],[1,"width",0],[1,"x",0],[1,"y",0],[1,":xlink:href",0]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.select(t,e.parent.parent.context.$implicit,e.parent.context.$implicit)&&l),l},null,null))],null,function(e,n){e(n,1,0,6,n.parent.context.$implicit.center.x,n.parent.context.$implicit.center.y,n.parent.parent.context.$implicit.colour),e(n,2,0,10,10,n.parent.context.$implicit.center.x-5,n.parent.context.$implicit.center.y-5,"assets/army/recruit.svg")})}function FT(e){return So(0,[(e()(),eo(0,0,null,null,2,":svg:g",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,0,":svg:circle",[],[[1,"r",0],[1,"cx",0],[1,"cy",0],[1,"fill",0]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.select(t,e.parent.parent.context.$implicit,e.parent.context.$implicit)&&l),l},null,null)),(e()(),eo(2,0,null,null,0,":svg:image",[],[[1,"height",0],[1,"width",0],[1,"x",0],[1,"y",0],[1,":xlink:href",0]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.select(t,e.parent.parent.context.$implicit,e.parent.context.$implicit)&&l),l},null,null))],null,function(e,n){e(n,1,0,6,n.parent.context.$implicit.center.x,n.parent.context.$implicit.center.y,n.parent.parent.context.$implicit.colour),e(n,2,0,10,10,n.parent.context.$implicit.center.x-5,n.parent.context.$implicit.center.y-5,"assets/army/mission/spy.svg")})}function UT(e){return So(0,[(e()(),eo(0,0,null,null,0,":svg:image",[["draggable","false"],["ondragstart","return false;"]],[[1,"height",0],[1,"width",0],[1,"x",0],[1,"y",0],[1,":xlink:href",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,0,0,20,20,t.getHarbour(n.parent.context.$implicit.id).CENTER.x-10,t.getHarbour(n.parent.context.$implicit.id).CENTER.y-10,"assets/sea/port.svg")})}function HT(e){return So(0,[(e()(),eo(0,0,null,null,12,":svg:g",[["class","region"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,kT)),vi(2,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,MT)),vi(4,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,DT)),vi(6,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,LT)),vi(8,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,FT)),vi(10,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,UT)),vi(12,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,!t.getSelectedRegion()||n.context.$implicit.id!==t.getSelectedRegion().id),e(n,4,0,t.getSelectedRegion()&&n.context.$implicit.id===t.getSelectedRegion().id),e(n,6,0,0===t.radio&&void 0!==n.context.$implicit.capital);var l=1===t.radio&&n.context.$implicit.army.hasAny()&&(n.parent.context.$implicit.id===t.countries.PLAYER||n.parent.context.$implicit.id===t.countries.NEUTRAL||n.context.$implicit.spy>0);e(n,8,0,l),e(n,10,0,2===t.radio&&n.context.$implicit.spy>0),e(n,12,0,t.showHarbours&&n.context.$implicit.harbour)},null)}function GT(e){return So(0,[(e()(),eo(0,0,null,null,2,":svg:g",[],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,HT)),vi(2,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,2,0,n.context.$implicit.regions)},null)}function BT(e){return So(0,[(e()(),eo(0,0,null,null,0,":svg:circle",[],[[1,"cx",0],[1,"cy",0],[1,"r",0],[1,"fill",0],[1,"opacity",0],[1,"stroke-width",0]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.selectArea(e.parent.context.$implicit.id)&&l),l},null,null))],null,function(e,n){e(n,0,0,n.parent.context.$implicit.center.x,n.parent.context.$implicit.center.y,n.parent.context.$implicit.r,"red",.1,"1")})}function VT(e){return So(0,[(e()(),eo(0,0,null,null,1,":svg:g",[["class","seaEvent"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.selectSeaEvent(e.context.$implicit)&&l),l},null,null)),(e()(),eo(1,0,null,null,0,":svg:image",[["draggable","false"],["ondragstart","return false;"]],[[1,"height",0],[1,"width",0],[1,"x",0],[1,"y",0],[1,":xlink:href",0]],null,null,null,null))],null,function(e,n){e(n,1,0,20,20,n.context.$implicit.center.x-10,n.context.$implicit.center.y-10,n.component.getSeaEventIconPath(n.context.$implicit.type))})}function WT(e){return So(0,[(e()(),eo(0,0,null,null,4,":svg:g",[],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,BT)),vi(2,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,VT)),vi(4,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,2,0,n.context.$implicit.events.length>0&&(n.context.$implicit.events[0].type===t.seaEvents.PIRATES||n.context.$implicit.events[0].type===t.seaEvents.PIRATES_BASE)),e(n,4,0,n.context.$implicit.events)},null)}function zT(e){return So(0,[(e()(),eo(0,0,null,null,1,":svg:g",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,0,":svg:line",[],[[1,"x1",0],[1,"y1",0],[1,"x2",0],[1,"y2",0],[1,"stroke",0],[1,"stroke-dasharray",0],[1,"stroke-width",0]],null,null,null,null))],null,function(e,n){e(n,1,0,n.context.$implicit.origin.x,n.context.$implicit.origin.y,n.context.$implicit.target.x,n.context.$implicit.target.y,"black","5,5","1")})}function YT(e){return So(0,[(e()(),eo(0,0,null,null,2,":svg:g",[],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,zT)),vi(2,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,2,0,n.parent.context.$implicit.routePaths)},null)}function KT(e){return So(0,[(e()(),eo(0,0,null,null,2,":svg:g",[["class","mission"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,YT)),vi(2,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.getSelectedMission()&&t.getSelectedMission()===n.context.$implicit&&t.getSelectedMission().ownerCountry.id===t.countries.PLAYER)},null)}function jT(e){return So(0,[(e()(),eo(0,0,null,null,2,":svg:g",[["class","mission"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,0,":svg:circle",[],[[1,"r",0],[1,"cx",0],[1,"cy",0],[1,"fill",0],[1,"stroke",0],[1,"stroke-width",0]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.selectMission(e.parent.context.$implicit)&&l),l},null,null)),(e()(),eo(2,0,null,null,0,":svg:image",[["draggable","false"],["ondragstart","return false;"]],[[1,"height",0],[1,"width",0],[1,"x",0],[1,"y",0],[1,":xlink:href",0]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.selectMission(e.parent.context.$implicit)&&l),l},null,null))],null,function(e,n){var t=n.parent.context.$implicit.getOrigin().x+(n.parent.context.$implicit.getTarget().x-n.parent.context.$implicit.getOrigin().x)*n.parent.context.$implicit.getProgressPercentage(),l=n.parent.context.$implicit.getOrigin().y+(n.parent.context.$implicit.getTarget().y-n.parent.context.$implicit.getOrigin().y)*n.parent.context.$implicit.getProgressPercentage();e(n,1,0,8,t,l,"lightgrey","black","1");var i=n.parent.context.$implicit.getOrigin().x+(n.parent.context.$implicit.getTarget().x-n.parent.context.$implicit.getOrigin().x)*n.parent.context.$implicit.getProgressPercentage()-6,r=n.parent.context.$implicit.getOrigin().y+(n.parent.context.$implicit.getTarget().y-n.parent.context.$implicit.getOrigin().y)*n.parent.context.$implicit.getProgressPercentage()-6,o=n.parent.context.$implicit.getIconPath();e(n,2,0,12,12,i,r,o)})}function $T(e){return So(0,[(e()(),eo(0,0,null,null,3,":svg:g",[["class","computerMission"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,0,":svg:circle",[],[[1,"r",0],[1,"cx",0],[1,"cy",0],[1,"fill",0],[1,"stroke",0],[1,"stroke-width",0]],null,null,null,null)),(e()(),eo(2,0,null,null,0,":svg:circle",[],[[1,"r",0],[1,"cx",0],[1,"cy",0],[1,"fill",0],[1,"fill-opacity",0],[1,"stroke",0],[1,"stroke-width",0]],null,null,null,null)),(e()(),eo(3,0,null,null,0,":svg:image",[["draggable","false"],["ondragstart","return false;"]],[[1,"height",0],[1,"width",0],[1,"x",0],[1,"y",0],[1,":xlink:href",0]],null,null,null,null))],null,function(e,n){var t=n.parent.context.$implicit.getOrigin().x+(n.parent.context.$implicit.getTarget().x-n.parent.context.$implicit.getOrigin().x)*n.parent.context.$implicit.getProgressPercentage(),l=n.parent.context.$implicit.getOrigin().y+(n.parent.context.$implicit.getTarget().y-n.parent.context.$implicit.getOrigin().y)*n.parent.context.$implicit.getProgressPercentage();e(n,1,0,8,t,l,"white","black","1");var i=n.parent.context.$implicit.getOrigin().x+(n.parent.context.$implicit.getTarget().x-n.parent.context.$implicit.getOrigin().x)*n.parent.context.$implicit.getProgressPercentage(),r=n.parent.context.$implicit.getOrigin().y+(n.parent.context.$implicit.getTarget().y-n.parent.context.$implicit.getOrigin().y)*n.parent.context.$implicit.getProgressPercentage();e(n,2,0,8,i,r,n.parent.context.$implicit.ownerCountry.colour,.8,"black","1");var o=n.parent.context.$implicit.getOrigin().x+(n.parent.context.$implicit.getTarget().x-n.parent.context.$implicit.getOrigin().x)*n.parent.context.$implicit.getProgressPercentage()-6,u=n.parent.context.$implicit.getOrigin().y+(n.parent.context.$implicit.getTarget().y-n.parent.context.$implicit.getOrigin().y)*n.parent.context.$implicit.getProgressPercentage()-6,s=n.parent.context.$implicit.getIconPath();e(n,3,0,12,12,o,u,s)})}function QT(e){return So(0,[(e()(),eo(0,0,null,null,4,":svg:g",[],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,jT)),vi(2,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,$T)),vi(4,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,n.context.$implicit.ownerCountry.id===t.countries.PLAYER),e(n,4,0,n.context.$implicit.ownerCountry.id!==t.countries.PLAYER)},null)}function qT(e){return So(0,[ro(671088640,1,{svgRef:0}),(e()(),eo(1,0,null,null,72,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),eo(2,0,null,null,1,"div",[["id","title"]],null,null,null,null,null)),(e()(),fo(-1,null,["World Map"])),(e()(),eo(4,0,null,null,9,"div",[["id","details"]],null,null,null,null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(6,278528,null,0,Js,[Xs],{ngClass:[0,"ngClass"]},null),ho(7,{selecting:0}),(e()(),Jr(16777216,null,null,1,null,dT)),vi(9,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,bT)),vi(11,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,xT)),vi(13,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(14,0,[[1,0],["svg",1]],null,59,"div",[["id","svg"]],null,null,null,null,null)),(e()(),eo(15,0,null,null,0,"img",[["id","target"],["src","assets/world/target.svg"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.resetView()&&l),l},null,null)),(e()(),eo(16,0,null,null,0,"img",[["id","arrowUp"],["src","assets/world/arrow_up.svg"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.moveDown()&&l),l},null,null)),(e()(),eo(17,0,null,null,0,"img",[["id","arrowDown"],["src","assets/world/arrow_down.svg"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.moveUp()&&l),l},null,null)),(e()(),eo(18,0,null,null,0,"img",[["id","arrowRight"],["src","assets/world/arrow_right.svg"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.moveLeft()&&l),l},null,null)),(e()(),eo(19,0,null,null,0,"img",[["id","arrowLeft"],["src","assets/world/arrow_left.svg"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.moveRight()&&l),l},null,null)),(e()(),eo(20,0,null,null,0,"img",[["id","plus"],["src","assets/world/plus.svg"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.zoomIn()&&l),l},null,null)),(e()(),eo(21,0,null,null,0,"img",[["id","minus"],["src","assets/world/minus.svg"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.zoomOut()&&l),l},null,null)),(e()(),eo(22,0,null,null,8,"div",[["id","options2"]],null,null,null,null,null)),(e()(),eo(23,0,null,null,1,"label",[["for","showHarbours"]],null,null,null,null,null)),(e()(),fo(-1,null,["show harbours"])),(e()(),eo(25,0,null,null,5,"input",[["id","showHarbours"],["type","checkbox"]],[[8,"checked",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,26).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==ii(e,26).onTouched()&&l),"change"===n&&(l=!1!==i.updateMapDisplayOption()&&l),"ngModelChange"===n&&(l=!1!==(i.showHarbours=t)&&l),l},null,null)),vi(26,16384,null,0,Fg,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[Fg]),vi(28,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(30,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(31,0,null,null,29,"div",[["id","options"]],null,null,null,null,null)),(e()(),eo(32,0,null,null,1,"label",[["for","showCapitals"]],null,null,null,null,null)),(e()(),fo(-1,null,["show capitals"])),(e()(),eo(34,0,null,null,6,"input",[["id","showCapitals"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,35)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,35).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,35)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,35)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==ii(e,36).onChange()&&l),"blur"===n&&(l=!1!==ii(e,36).onTouched()&&l),"change"===n&&(l=!1!==i.updateMapDisplayOption()&&l),"ngModelChange"===n&&(l=!1!==(i.radio=t)&&l),l},null,null)),vi(35,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),vi(36,212992,null,0,nf,[St,dt,ef,Xe],{value:[0,"value"]},null),Ei(1024,null,Lg,function(e,n){return[e,n]},[Hg,nf]),vi(38,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(40,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(41,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(42,0,null,null,1,"label",[["for","showArmies"]],null,null,null,null,null)),(e()(),fo(-1,null,["show armies"])),(e()(),eo(44,0,null,null,6,"input",[["id","showArmies"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,45)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,45).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,45)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,45)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==ii(e,46).onChange()&&l),"blur"===n&&(l=!1!==ii(e,46).onTouched()&&l),"change"===n&&(l=!1!==i.updateMapDisplayOption()&&l),"ngModelChange"===n&&(l=!1!==(i.radio=t)&&l),l},null,null)),vi(45,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),vi(46,212992,null,0,nf,[St,dt,ef,Xe],{value:[0,"value"]},null),Ei(1024,null,Lg,function(e,n){return[e,n]},[Hg,nf]),vi(48,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(50,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(51,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(52,0,null,null,1,"label",[["for","showSpies"]],null,null,null,null,null)),(e()(),fo(-1,null,["show spies"])),(e()(),eo(54,0,null,null,6,"input",[["id","showSpies"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,55)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,55).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,55)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,55)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==ii(e,56).onChange()&&l),"blur"===n&&(l=!1!==ii(e,56).onTouched()&&l),"change"===n&&(l=!1!==i.updateMapDisplayOption()&&l),"ngModelChange"===n&&(l=!1!==(i.radio=t)&&l),l},null,null)),vi(55,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),vi(56,212992,null,0,nf,[St,dt,ef,Xe],{value:[0,"value"]},null),Ei(1024,null,Lg,function(e,n){return[e,n]},[Hg,nf]),vi(58,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(60,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(61,0,null,null,12,":svg:svg",[["id","mainMap"],["xmlns","http://www.w3.org/2000/svg"]],[[1,"viewBox",0]],null,null,null,null)),(e()(),eo(62,0,null,null,2,":svg:defs",[],null,null,null,null,null)),(e()(),eo(63,0,null,null,1,":svg:pattern",[["height","4"],["id","diagonalHatch"],["patternUnits","userSpaceOnUse"],["width","4"]],null,null,null,null,null)),(e()(),eo(64,0,null,null,0,":svg:path",[["d","M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2"],["style","stroke:black; stroke-width:0.5"]],null,null,null,null,null)),(e()(),eo(65,0,null,null,8,":svg:g",[],[[1,"transform",0]],null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,GT)),vi(67,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),Jr(16777216,null,null,1,null,WT)),vi(69,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),Jr(16777216,null,null,1,null,KT)),vi(71,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),Jr(16777216,null,null,1,null,QT)),vi(73,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component,l=e(n,7,0,t.selecting);e(n,6,0,l),e(n,9,0,t.getSelectedCountry()&&t.getSelectedRegion()),e(n,11,0,t.getSelectedMission()),e(n,13,0,t.getSelectedSeaEvent()),e(n,28,0,t.showHarbours),e(n,36,0,0),e(n,38,0,t.radio),e(n,46,0,1),e(n,48,0,t.radio),e(n,56,0,2),e(n,58,0,t.radio),e(n,67,0,t.getCountries()),e(n,69,0,t.getSeaAreas()),e(n,71,0,t.getMissions()),e(n,73,0,t.getMissions())},function(e,n){var t=n.component;e(n,25,0,t.getShowHarbours(),ii(n,30).ngClassUntouched,ii(n,30).ngClassTouched,ii(n,30).ngClassPristine,ii(n,30).ngClassDirty,ii(n,30).ngClassValid,ii(n,30).ngClassInvalid,ii(n,30).ngClassPending),e(n,34,0,ii(n,40).ngClassUntouched,ii(n,40).ngClassTouched,ii(n,40).ngClassPristine,ii(n,40).ngClassDirty,ii(n,40).ngClassValid,ii(n,40).ngClassInvalid,ii(n,40).ngClassPending),e(n,44,0,ii(n,50).ngClassUntouched,ii(n,50).ngClassTouched,ii(n,50).ngClassPristine,ii(n,50).ngClassDirty,ii(n,50).ngClassValid,ii(n,50).ngClassInvalid,ii(n,50).ngClassPending),e(n,54,0,ii(n,60).ngClassUntouched,ii(n,60).ngClassTouched,ii(n,60).ngClassPristine,ii(n,60).ngClassDirty,ii(n,60).ngClassValid,ii(n,60).ngClassInvalid,ii(n,60).ngClassPending),e(n,61,0,(0-674*t.getZoom())/2+" "+(0-674*t.getZoom())/2+" "+674*t.getZoom()+" "+464*t.getZoom()),e(n,65,0,"translate("+t.getX()+" "+t.getY()+")")})}function XT(e){return So(0,[(e()(),eo(0,0,null,null,1,"app-world",[],null,[[null,"keydown"],[null,"mousedown"],[null,"mousemove"],[null,"mouseup"],[null,"wheel"]],function(e,n,t){var l=!0;return"keydown"===n&&(l=!1!==ii(e,1).handleKeyDown(t)&&l),"mousedown"===n&&(l=!1!==ii(e,1).dragStart(t)&&l),"mousemove"===n&&(l=!1!==ii(e,1).mousemove(t)&&l),"mouseup"===n&&(l=!1!==ii(e,1).dragEnd(t)&&l),"wheel"===n&&(l=!1!==ii(e,1).onScroll(t)&&l),l},qT,MO)),vi(1,114688,null,0,kO,[Vf,PO,Jf,am,qf],null,null)],function(e,n){e(n,1,0)},null)}var ZT=jl("app-world",kO,XT,{selecting:"selecting"},{regionSelected:"regionSelected"},[]),JT=function(){function e(e,n,t,l,i,r){this.navyService=e,this.worldService=n,this.armyService=t,this.modalService=l,this.gameService=i,this.router=r,this.troops=Lu}return e.prototype.ngOnInit=function(){},e.prototype.getHarbourSpace=function(){return this.navyService.getHarbourSpace()},e.prototype.getMaxHarbourSpace=function(){return this.navyService.getMaxHarbourSpace()},e.prototype.getAvailableShips=function(e){return this.navyService.getAvailableShips(e)},e.prototype.getTotalShips=function(e){return this.navyService.getTotalShips(e)},e.prototype.getMissions=function(){return this.worldService.getPlayerSeaMissions()},e.prototype.selectMission=function(e){this.worldService.setSelectedMission(e),this.router.navigate(["/world"])},e.prototype.getTroopName=function(e){return Vu.prepareTroopName(e)},e.prototype.getCartographyData=function(){return this.navyService.getCartographyData()},e.prototype.getNavyPay=function(){return this.navyService.calculateNavyPay()},e.prototype.getPaydayCounter=function(){return this.navyService.getPaydayCounter()},e.prototype.startExpedition=function(){this.modalService.open(ju.MISSION),this.modalService.setMissionData(new xO(this.worldService.getDefaultOriginRegion(),this.worldService.getDefaultOriginRegionCountry().colour,null,null,null,null,xu.EXPEDITION))},e.prototype.isCartographerResearched=function(){return this.gameService.isEnabled(_u.CARTOGRAPHER)},e}(),eC=rl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{margin:.7%;height:100%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#categories[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;border:1px solid #000;height:91.5%;text-align:center}.category[_ngcontent-%COMP%]{text-align:center;-webkit-box-flex:0;flex:0 0 33%;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;border:1px solid #000;-webkit-box-align:center;align-items:center}.title[_ngcontent-%COMP%]{padding:2px;width:100%;font-weight:bolder;font-size:.9em;margin-bottom:5px;display:block;border-bottom:1px solid #000}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center}#missionsScroll[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;width:100%;overflow-y:auto;-webkit-box-align:center;align-items:center}.mission[_ngcontent-%COMP%]{padding:4px;border:1px solid #000;width:80%;cursor:pointer;margin:3px}"]],data:{}});function nC(e){return So(0,[(e()(),eo(0,0,null,null,3,"span",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(2,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),fo(3,null,[" "," \xa0\xa0\xa0 "]))],function(e,n){e(n,2,0,"sextant","sea","cartography data")},function(e,n){e(n,3,0,n.component.getCartographyData())})}function tC(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(1,null,[" ",": "," "]))],null,function(e,n){e(n,1,0,n.component.getTroopName(n.context.$implicit.troop),n.context.$implicit.size)})}function lC(e){return So(0,[(e()(),eo(0,0,null,null,9,"div",[["appTooltip",""],["class","mission tooltip"]],null,[[null,"click"],[null,"mousemove"]],function(e,n,t){var l=!0,i=e.component;return"mousemove"===n&&(l=!1!==ii(e,1).onmousemove(t)&&l),"click"===n&&(l=!1!==i.selectMission(e.context.$implicit)&&l),l},null,null)),vi(1,16384,null,0,Pg,[],{elementId:[0,"elementId"]},null),(e()(),fo(2,null,[" "," "])),(e()(),eo(3,0,null,null,6,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),fo(4,null,[" "," "])),(e()(),eo(5,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),fo(6,null,[" "," : ","% "])),po(7,2),(e()(),Jr(16777216,null,null,1,null,tC)),vi(9,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,1,0,"mission-"+n.context.$implicit.id),e(n,9,0,n.context.$implicit.army.units)},function(e,n){var t=n.context.$implicit.getMissionName();e(n,2,0,t),e(n,3,0,xl(1,"mission-",n.context.$implicit.id,""));var l=n.context.$implicit.getMissionName();e(n,4,0,l);var i=n.context.$implicit.getStatus(),r=tl(n,6,1,e(n,7,0,ii(n.parent,0),n.context.$implicit.getDisplayProgress(),"0.0-0"));e(n,6,0,i,r)})}function iC(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.startExpedition()&&l),l},null,null)),(e()(),fo(-1,null,["EXPEDITION"]))],null,null)}function rC(e){return So(0,[Si(0,va,[er]),(e()(),eo(1,0,null,null,35,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),eo(2,0,null,null,1,"div",[["id","title"]],null,null,null,null,null)),(e()(),fo(-1,null,["Navy"])),(e()(),eo(4,0,null,null,8,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(5,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(6,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),fo(7,null,[" ","/"," \xa0\xa0 "])),(e()(),Jr(16777216,null,null,1,null,nC)),vi(9,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(10,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(11,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),fo(12,null,["\xa0"," in "," days "])),(e()(),eo(13,0,null,null,23,"div",[["id","categories"]],null,null,null,null,null)),(e()(),eo(14,0,null,null,11,"div",[["class","category"]],null,null,null,null,null)),(e()(),eo(15,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),fo(-1,null,["NAVY"])),(e()(),eo(17,0,null,null,2,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(18,0,null,null,0,"img",[["src","assets/sea/boat.svg"]],null,null,null,null,null)),(e()(),fo(19,null,[" ","/"," "])),(e()(),eo(20,0,null,null,2,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(21,0,null,null,0,"img",[["alt","brigantine"],["src","assets/sea/brigantine.svg"]],null,null,null,null,null)),(e()(),fo(22,null,[" ","/",""])),(e()(),eo(23,0,null,null,2,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(24,0,null,null,0,"img",[["alt","galleon"],["src","assets/sea/galleon.svg"]],null,null,null,null,null)),(e()(),fo(25,null,[" ","/",""])),(e()(),eo(26,0,null,null,5,"div",[["class","category"]],null,null,null,null,null)),(e()(),eo(27,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),fo(-1,null,["MISSIONS IN PROGRESS"])),(e()(),eo(29,0,null,null,2,"div",[["id","missionsScroll"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,lC)),vi(31,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),eo(32,0,null,null,4,"div",[["class","category"]],null,null,null,null,null)),(e()(),eo(33,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),fo(-1,null,["OTHER"])),(e()(),Jr(16777216,null,null,1,null,iC)),vi(36,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,6,0,"port","sea","Ships space"),e(n,9,0,t.isCartographerResearched()),e(n,11,0,"coins","resources","Navy upkeep (collected every 30 days)"),e(n,31,0,t.getMissions()),e(n,36,0,t.isCartographerResearched())},function(e,n){var t=n.component;e(n,7,0,t.getHarbourSpace(),t.getMaxHarbourSpace()),e(n,12,0,t.getNavyPay(),t.getPaydayCounter()+1),e(n,19,0,t.getAvailableShips(t.troops.BOAT),t.getTotalShips(t.troops.BOAT)),e(n,22,0,t.getAvailableShips(t.troops.BRIGANTINE),t.getTotalShips(t.troops.BRIGANTINE)),e(n,25,0,t.getAvailableShips(t.troops.GALLEON),t.getTotalShips(t.troops.GALLEON))})}function oC(e){return So(0,[(e()(),eo(0,0,null,null,1,"app-navy",[],null,null,null,rC,eC)),vi(1,114688,null,0,JT,[_O,PO,xR,qf,Jf,jd],null,null)],function(e,n){e(n,1,0)},null)}var uC=jl("app-navy",JT,oC,{},{},[]),sC=function(){function e(e,n,t){this.servicesService=e,this.resourcesService=n,this.gameService=t,this.heritagePoints=0,this.spentHeritagePoints=0,this.xp=0,e.addService(zu.HERITAGE,this)}return e.prototype.load=function(e){this.heritagePoints=void 0!==e.heritagePoints?e.heritagePoints:0,this.spentHeritagePoints=void 0!==e.spentHeritagePoints?e.spentHeritagePoints:0,this.xp=void 0!==e.xp?e.xp:0,this.heritagePoints>0&&this.gameService.enable(_u.HERITAGE)},e.prototype.reset=function(e,n){e&&(this.heritagePoints=0,this.xp=0),this.heritagePoints>0&&this.gameService.enable(_u.HERITAGE),this.spentHeritagePoints=0},e.prototype.save=function(){return{heritagePoints:this.heritagePoints,spentHeritagePoints:this.spentHeritagePoints,xp:this.xp}},e.prototype.increaseHeritagePoints=function(e){this.gameService.enable(_u.HERITAGE),this.heritagePoints+=e},e.prototype.increaseXP=function(e){this.xp+=e},e.prototype.spendHeritagePoints=function(e){return e<=this.getAvailableHeritagePoints()&&(this.spentHeritagePoints+=e,!0)},e.prototype.hasHeritagePoints=function(e){return e<=this.heritagePoints-this.spentHeritagePoints},e.prototype.getHeritagePoints=function(){return this.heritagePoints},e.prototype.calculateHeritagePoints=function(e){void 0===e&&(e=!1);for(var n=this.resourcesService.getTotalPeople(),t=this.xp,l=20+2*this.heritagePoints,i=0;n>=l;)i+=1,n-=l,l+=2;for(;n+t>=l;)i+=1,(n-=l)<0&&(t+=n),l+=2;return e&&(this.xp=t),(n-=50)<0&&(n=0),{hp:i,xp:n}},e.prototype.peopleToNextHeritagePoint=function(){for(var e=this.resourcesService.getTotalPeople()+this.xp,n=20+2*this.heritagePoints;e>=n;)e-=n,n+=2;return n-e},e.prototype.getAvailableHeritagePoints=function(){return this.heritagePoints-this.spentHeritagePoints},e.prototype.getXP=function(){return this.xp},e.ngInjectableDef=Oe({factory:function(){return new e(Ye(Vf),Ye(am),Ye(Jf))},token:e,providedIn:"root"}),e}(),aC=function(){function e(e,n,t){this.heritageService=e,this.landService=n,this.modalService=t,this.multiplier=1,this.selectedMode=0}return e.prototype.ngOnInit=function(){},e.prototype.getHeritagePoints=function(){return this.heritageService.getHeritagePoints()},e.prototype.getAvailableHeritagePoints=function(){return this.heritageService.getAvailableHeritagePoints()},e.prototype.buyLand=function(){this.heritageService.spendHeritagePoints(this.multiplier)?this.landService.increaseLand(10*this.multiplier,!0):this.modalService.info("No enough Heritage Points!")},e.prototype.buyForest=function(){this.heritageService.spendHeritagePoints(this.multiplier)?this.landService.increaseForest(10*this.multiplier,!1):this.modalService.info("No enough Heritage Points!")},e.prototype.buyMountains=function(){this.heritageService.spendHeritagePoints(this.multiplier)?this.landService.increaseMountains(5*this.multiplier):this.modalService.info("No enough Heritage Points!")},e.prototype.addHeritagePoints=function(){this.heritageService.increaseHeritagePoints(10)},e.prototype.isDev=function(){return!is.production},e.prototype.getXP=function(){return this.heritageService.getXP()},e.prototype.getBuyButtonText=function(){return 0===this.selectedMode?"Buy "+10*this.multiplier+" land":1===this.selectedMode?"Buy "+10*this.multiplier+" forest":2===this.selectedMode?"Buy "+5*this.multiplier+" mountains":void 0},e.prototype.buy=function(){0===this.selectedMode?this.buyLand():1===this.selectedMode?this.buyForest():2===this.selectedMode&&this.buyMountains()},e}(),cC=rl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{margin:.5%;height:100%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#multiplier[_ngcontent-%COMP%]{width:5ch}#modes[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-pack:center;justify-content:center}.mode[_ngcontent-%COMP%]{display:-webkit-box;display:flex;cursor:pointer;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:150px;width:200px;border:1px solid #000;-webkit-box-align:center;align-items:center;margin-right:5px;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box}.mode[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100px}.mode[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700}.mode[_ngcontent-%COMP%]   .effect[_ngcontent-%COMP%]{margin-top:4px;font-size:.8em}.selected[_ngcontent-%COMP%]{border:3px solid #000}"]],data:{}});function pC(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.addHeritagePoints()&&l),l},null,null)),(e()(),fo(-1,null,["add"]))],null,null)}function hC(e){return So(0,[(e()(),eo(0,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),fo(1,null,["XP towards next heritage point: ",""])),(e()(),eo(2,0,null,null,0,"br",[],null,null,null,null,null))],null,function(e,n){e(n,1,0,n.component.getXP())})}function dC(e){return So(0,[(e()(),eo(0,0,null,null,3,"span",[],null,null,null,null,null)),(e()(),fo(1,null,["XP towards next heritage point: ",""])),(e()(),eo(2,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(3,0,null,null,0,"br",[],null,null,null,null,null))],null,function(e,n){e(n,1,0,n.component.getXP())})}function gC(e){return So(0,[(e()(),eo(0,0,null,null,61,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),eo(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["Heritage"])),(e()(),eo(4,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),fo(5,null,[" Heritage points: ","/"," "])),(e()(),Jr(16777216,null,null,1,null,pC)),vi(7,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(8,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,hC)),vi(10,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(11,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),fo(-1,null,[" Heritage points can be used to buy more land or unlock researches. "])),(e()(),eo(13,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,dC)),vi(15,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),fo(-1,null,[" Heritage points can be used to buy more land or unlock research projects "])),(e()(),eo(17,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(18,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(19,0,null,null,1,"label",[["for","multiplier"]],null,null,null,null,null)),(e()(),fo(-1,null,["Spend "])),(e()(),eo(21,0,null,null,6,"input",[["id","multiplier"],["min","1"],["type","number"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,22)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,22).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,22)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,22)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==ii(e,23).onChange(t.target.value)&&l),"input"===n&&(l=!1!==ii(e,23).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,23).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.multiplier=t)&&l),l},null,null)),vi(22,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),vi(23,16384,null,0,Jg,[St,dt],null,null),Ei(1024,null,Lg,function(e,n){return[e,n]},[Hg,Jg]),vi(25,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(27,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(28,0,null,null,1,"label",[["for","multiplier"]],null,null,null,null,null)),(e()(),fo(-1,null,[" Heritage Points to"])),(e()(),eo(30,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.buy()&&l),l},null,null)),(e()(),fo(31,null,["",""])),(e()(),eo(32,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(33,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(34,0,null,null,27,"div",[["id","modes"]],null,null,null,null,null)),(e()(),eo(35,0,null,null,8,"div",[["class","mode"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==(e.component.selectedMode=0)&&l),l},null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(37,278528,null,0,Js,[Xs],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),ho(38,{selected:0}),(e()(),eo(39,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),fo(-1,null,["Land"])),(e()(),eo(41,0,null,null,0,"img",[["src","assets/land.svg"]],null,null,null,null,null)),(e()(),eo(42,0,null,null,1,"span",[["class","effect"]],null,null,null,null,null)),(e()(),fo(43,null,[""," land for "," HP"])),(e()(),eo(44,0,null,null,8,"div",[["class","mode"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==(e.component.selectedMode=1)&&l),l},null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(46,278528,null,0,Js,[Xs],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),ho(47,{selected:0}),(e()(),eo(48,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),fo(-1,null,["Forest"])),(e()(),eo(50,0,null,null,0,"img",[["src","assets/forest.svg"]],null,null,null,null,null)),(e()(),eo(51,0,null,null,1,"span",[["class","effect"]],null,null,null,null,null)),(e()(),fo(52,null,[""," forest for "," HP"])),(e()(),eo(53,0,null,null,8,"div",[["class","mode"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==(e.component.selectedMode=2)&&l),l},null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(55,278528,null,0,Js,[Xs],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),ho(56,{selected:0}),(e()(),eo(57,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),fo(-1,null,["Mountains"])),(e()(),eo(59,0,null,null,0,"img",[["src","assets/mountains.svg"]],null,null,null,null,null)),(e()(),eo(60,0,null,null,1,"span",[["class","effect"]],null,null,null,null,null)),(e()(),fo(61,null,[""," mountains for "," HP"]))],function(e,n){var t=n.component;e(n,7,0,t.isDev()),e(n,10,0,t.getXP()>0),e(n,15,0,t.getXP()>0),e(n,25,0,t.multiplier);var l=e(n,38,0,0===t.selectedMode);e(n,37,0,"mode",l);var i=e(n,47,0,1===t.selectedMode);e(n,46,0,"mode",i);var r=e(n,56,0,2===t.selectedMode);e(n,55,0,"mode",r)},function(e,n){var t=n.component;e(n,5,0,t.getAvailableHeritagePoints(),t.getHeritagePoints()),e(n,21,0,xl(1,"",t.getAvailableHeritagePoints(),""),ii(n,27).ngClassUntouched,ii(n,27).ngClassTouched,ii(n,27).ngClassPristine,ii(n,27).ngClassDirty,ii(n,27).ngClassValid,ii(n,27).ngClassInvalid,ii(n,27).ngClassPending),e(n,31,0,t.getBuyButtonText()),e(n,43,0,10*t.multiplier,t.multiplier),e(n,52,0,10*t.multiplier,t.multiplier),e(n,61,0,5*t.multiplier,t.multiplier)})}function fC(e){return So(0,[(e()(),eo(0,0,null,null,1,"app-heritage",[],null,null,null,gC,cC)),vi(1,114688,null,0,aC,[sC,NE,qf],null,null)],function(e,n){e(n,1,0)},null)}var mC=jl("app-heritage",aC,fC,{},{},[]),vC=function(){function e(e){this.royalService=e,this.id=Math.random()}return e.prototype.ngOnInit=function(){},e.prototype.getPerkName=function(){return Vu.preparePerkName(this.perk.perk)},e.prototype.unlock=function(){this.royalService.unlock(this.perk)},e.prototype.isAvailable=function(){return this.royalService.getRoyalPoints()>=this.perk.cost&&(0===this.perk.maxUsages||this.perk.usages<this.perk.maxUsages)},e}(),SC=rl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #000;font-size:1.2em}#wrapperNotAvailable[_ngcontent-%COMP%]{display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #57575a;cursor:initial;font-size:1.2em}#text[_ngcontent-%COMP%]{display:inline-block;position:relative;z-index:2}#titleGrey[_ngcontent-%COMP%]{display:inline-block;color:#57575a}.notMet[_ngcontent-%COMP%]{color:var(--negative-colour)}.title[_ngcontent-%COMP%]{text-align:left}hr[_ngcontent-%COMP%]{border-color:#000}#progress[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background-color:var(--active-colour);z-index:1}app-icon[_ngcontent-%COMP%]{margin-top:-15px;height:17px}"]],data:{}});function EC(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(1,null,[" Usages: ","/"," "]))],null,function(e,n){var t=n.component;e(n,1,0,t.perk.usages,t.perk.maxUsages)})}function yC(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(1,null,[" Usages: ","/unlimited "]))],null,function(e,n){e(n,1,0,n.component.perk.usages)})}function RC(e){return So(0,[(e()(),eo(0,0,null,null,14,"div",[["appTooltip",""],["class","tooltip"],["id","wrapper"]],null,[[null,"click"],[null,"mousemove"]],function(e,n,t){var l=!0,i=e.component;return"mousemove"===n&&(l=!1!==ii(e,1).onmousemove(t)&&l),"click"===n&&(l=!1!==i.unlock()&&l),l},null,null)),vi(1,16384,null,0,Pg,[],{elementId:[0,"elementId"]},null),(e()(),eo(2,0,null,null,2,"div",[["id","text"]],null,null,null,null,null)),(e()(),eo(3,0,null,null,1,"div",[["class","icon"]],null,null,null,null,null)),(e()(),fo(4,null,[" "," "])),(e()(),eo(5,0,null,null,9,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),fo(6,null,[" ",""])),(e()(),eo(7,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(8,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),fo(9,null,[" Cost: "," RP "])),(e()(),eo(10,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,EC)),vi(12,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,yC)),vi(14,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.id),e(n,12,0,t.perk.maxUsages>0),e(n,14,0,0===t.perk.maxUsages)},function(e,n){var t=n.component;e(n,4,0,t.getPerkName()),e(n,5,0,xl(1,"",t.id,"")),e(n,6,0,t.perk.description),e(n,9,0,t.perk.cost)})}function bC(e){return So(0,[(e()(),eo(0,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(1,114688,null,0,xg,[],{name:[0,"name"]},null)],function(e,n){e(n,1,0,"tick")},null)}function OC(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(1,null,[" Usages: ","/"," "]))],null,function(e,n){var t=n.component;e(n,1,0,t.perk.usages,t.perk.maxUsages)})}function TC(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(1,null,[" Usages: ","/unlimited "]))],null,function(e,n){e(n,1,0,n.component.perk.usages)})}function CC(e){return So(0,[(e()(),eo(0,0,null,null,16,"div",[["appTooltip",""],["class","tooltip"],["id","wrapperNotAvailable"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==ii(e,1).onmousemove(t)&&l),l},null,null)),vi(1,16384,null,0,Pg,[],{elementId:[0,"elementId"]},null),(e()(),eo(2,0,null,null,4,"div",[["id","titleGrey"]],null,null,null,null,null)),(e()(),eo(3,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,bC)),vi(5,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),fo(6,null,[""," "])),(e()(),eo(7,0,null,null,9,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),fo(8,null,[" ",""])),(e()(),eo(9,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(10,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),fo(11,null,[" Cost: "," RP "])),(e()(),eo(12,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,OC)),vi(14,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,TC)),vi(16,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.id),e(n,5,0,t.perk.usages===t.perk.maxUsages&&t.perk.maxUsages>0),e(n,14,0,t.perk.maxUsages>0),e(n,16,0,0===t.perk.maxUsages)},function(e,n){var t=n.component;e(n,6,0,t.getPerkName()),e(n,7,0,xl(1,"",t.id,"")),e(n,8,0,t.perk.description),e(n,11,0,t.perk.cost)})}function IC(e){return So(0,[(e()(),Jr(16777216,null,null,1,null,RC)),vi(1,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,CC)),vi(3,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.isAvailable()),e(n,3,0,!t.isAvailable())},null)}var AC=function(){function e(e,n){this.logService=e,this.royalService=n}return e.prototype.ngOnInit=function(){},e.prototype.buyRoyalPoints=function(){this.royalService.buyRoyalPoints()},e.prototype.getRoyalPoints=function(){return this.royalService.getRoyalPoints()},e.prototype.getRoyalPerks=function(){return this.royalService.getRoyalPerks()},e.prototype.isGoldenFishCaught=function(){return this.royalService.isGoldenFishCaught()},e.prototype.isGoldenEggFound=function(){return this.royalService.isGoldenEggLaid()},e.prototype.isGoldenApplePicked=function(){return this.royalService.isGoldenApplePicked()},e.prototype.isGoldenFleeceFound=function(){return this.royalService.isGoldenFleeceFound()},e.prototype.getOneTimeUseRoyalPerks=function(){return this.royalService.getRoyalPerks().filter(function(e){return e.perk===Au.MOTIVATION_SPEECH||e.perk===Au.JESTER||e.perk===Au.CALL_TO_ARMS})},e.prototype.getPermanentUseRoyalPerks=function(){return this.royalService.getRoyalPerks().filter(function(e){return e.perk!==Au.MOTIVATION_SPEECH&&e.perk!==Au.JESTER&&e.perk!==Au.CALL_TO_ARMS})},e}(),NC=rl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{margin:5px;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}.bold[_ngcontent-%COMP%]{font-weight:600}app-royal-perk[_ngcontent-%COMP%]{font-size:1em;display:inline-block;width:30%;margin:4px 8px;cursor:pointer}#goldenItems[_ngcontent-%COMP%]{margin-top:10px}.groupTitle[_ngcontent-%COMP%]{font-weight:700;font-size:1.1em;text-align:center}"]],data:{}});function _C(e){return So(0,[(e()(),eo(0,0,null,null,1,"app-royal-perk",[],null,null,null,IC,SC)),vi(1,114688,null,0,vC,[nm],{perk:[0,"perk"]},null)],function(e,n){e(n,1,0,n.context.$implicit)},null)}function wC(e){return So(0,[(e()(),eo(0,0,null,null,1,"app-royal-perk",[],null,null,null,IC,SC)),vi(1,114688,null,0,vC,[nm],{perk:[0,"perk"]},null)],function(e,n){e(n,1,0,n.context.$implicit)},null)}function PC(e){return So(0,[(e()(),eo(0,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(2,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null)],function(e,n){e(n,2,0,"fish","resources","golden fish")},null)}function xC(e){return So(0,[(e()(),eo(0,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(2,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null)],function(e,n){e(n,2,0,"egg","resources","golden egg")},null)}function kC(e){return So(0,[(e()(),eo(0,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(2,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null)],function(e,n){e(n,2,0,"apple","resources","golden apple")},null)}function MC(e){return So(0,[(e()(),eo(0,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(2,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null)],function(e,n){e(n,2,0,"wool","resources","golden fleece")},null)}function DC(e){return So(0,[(e()(),eo(0,0,null,null,35,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),fo(-1,null,["Royal perks"])),(e()(),eo(3,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(4,0,null,null,6,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["You have "])),(e()(),eo(6,0,null,null,1,"span",[["class","bold"]],null,null,null,null,null)),(e()(),fo(7,null,["",""])),(e()(),fo(-1,null,[" royal points."])),(e()(),eo(9,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),fo(-1,null,[" You can use them to acquire special upgrades."])),(e()(),eo(11,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),eo(12,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.buyRoyalPoints()&&l),l},null,null)),(e()(),fo(-1,null,["Buy Royal points"])),(e()(),eo(14,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),eo(15,0,null,null,1,"div",[["class","groupTitle"]],null,null,null,null,null)),(e()(),fo(-1,null,["One time use perks"])),(e()(),Jr(16777216,null,null,1,null,_C)),vi(18,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),eo(19,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),eo(20,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),eo(21,0,null,null,1,"div",[["class","groupTitle"]],null,null,null,null,null)),(e()(),fo(-1,null,["Permanent perks"])),(e()(),Jr(16777216,null,null,1,null,wC)),vi(24,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),eo(25,0,null,null,10,"div",[["id","goldenItems"]],null,null,null,null,null)),(e()(),eo(26,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),fo(-1,null,["Golden items found:"])),(e()(),Jr(16777216,null,null,1,null,PC)),vi(29,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,xC)),vi(31,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,kC)),vi(33,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,MC)),vi(35,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,18,0,t.getOneTimeUseRoyalPerks()),e(n,24,0,t.getPermanentUseRoyalPerks()),e(n,29,0,t.isGoldenFishCaught()),e(n,31,0,t.isGoldenEggFound()),e(n,33,0,t.isGoldenApplePicked()),e(n,35,0,t.isGoldenFleeceFound())},function(e,n){e(n,7,0,n.component.getRoyalPoints())})}function LC(e){return So(0,[(e()(),eo(0,0,null,null,1,"app-royal",[],null,null,null,DC,NC)),vi(1,114688,null,0,AC,[$f,nm],null,null)],function(e,n){e(n,1,0)},null)}var FC=jl("app-royal",AC,LC,{},{},[]),UC=["#wrapper[_ngcontent-%COMP%]{height:100%;max-height:100%;font-size:1em}#buttons[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{font-size:.9em;padding:7px 10px}#content[_ngcontent-%COMP%]{margin:.5%;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:94%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#side[_ngcontent-%COMP%]{float:right;font-size:.9em;width:30%;text-align:center}#filters[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-pack:end;justify-content:flex-end}#side[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:.8em;margin:0;padding:0;border:none;outline:0}.buildingsWrapper[_ngcontent-%COMP%]{height:84.9%}.buildings[_ngcontent-%COMP%]{display:-webkit-box;display:flex;flex-wrap:wrap;height:100%;border:2px solid #000;overflow-y:auto;align-content:flex-start}.buildings[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}#title[_ngcontent-%COMP%]{text-align:center;border:2px solid #000;border-bottom:none}.title[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;text-align:center;border:2px solid #000;border-bottom:none}.page[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:auto;text-align:center;border-right:2px solid #000;cursor:pointer}.activePage[_ngcontent-%COMP%]{background-color:var(--active-colour)}.page[_ngcontent-%COMP%]:last-of-type{border-right:none}.off[_ngcontent-%COMP%]{background-color:#555}.buildingRegularWrapper[_ngcontent-%COMP%]{display:-webkit-box;display:flex;flex-wrap:wrap;margin:.6%}.buildingDropWrapper[_ngcontent-%COMP%]{display:-webkit-box;display:flex;margin:.6%;cursor:move}.buildingDropWrapper[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center}#allControl[_ngcontent-%COMP%]{margin-left:auto;width:108px;display:inline-block}#allControl[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:4px}"],HC=function(){function e(e,n,t,l){this.servicesService=e,this.resourcesService=n,this.effectsService=t,this.gameService=l,this.id=Math.random()}return e.prototype.ngOnInit=function(){this.building.hasBuff()&&(this.buildingBuff=this.building.getBuff())},e.prototype.hasResource=function(e){return 0===this.resourcesService.hasResource(e.key,e.value,"Building buff",!0)},e.prototype.getResourceName=function(e){return Vu.prepareResourceName(e)},e.prototype.buff=function(){var e=this.servicesService.getService(zu.MODAL);if(this.building.hasBuff()&&this.buffsEnabled())if(this.building.isBuffed())e.info("This building is already buffed");else{var n=this.building.getBuff();this.resourcesService.decreaseResources(n.cost,"Building buff",!0)&&this.effectsService.addBuildingEffect(new Ku(n.name,this.building.getBuildingType(),n.effect,n.duration,this.building.id))}else e.info("This building cannot be buffed")},e.prototype.buffsEnabled=function(){return this.gameService.isEnabled(_u.BUFFS)},e}(),GC=rl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{cursor:pointer}img[_ngcontent-%COMP%]{height:24px;width:24px}hr[_ngcontent-%COMP%]{border-color:#000}.notMet[_ngcontent-%COMP%]{color:var(--negative-colour)}"]],data:{}});function BC(e){return So(0,[(e()(),eo(0,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),fo(1,null,[""," "])),(e()(),eo(2,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(3,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){e(n,3,0,n.component.getResourceName(n.parent.context.$implicit.key),"resources")},function(e,n){e(n,1,0,n.parent.context.$implicit.value)})}function VC(e){return So(0,[(e()(),eo(0,0,null,null,3,"div",[["class","notMet"]],null,null,null,null,null)),(e()(),fo(1,null,[""," "])),(e()(),eo(2,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(3,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){e(n,3,0,n.component.getResourceName(n.parent.context.$implicit.key),"resources")},function(e,n){e(n,1,0,n.parent.context.$implicit.value)})}function WC(e){return So(0,[(e()(),eo(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,BC)),vi(2,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,VC)),vi(4,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.hasResource(n.context.$implicit)),e(n,4,0,!t.hasResource(n.context.$implicit))},null)}function zC(e){return So(0,[(e()(),eo(0,0,null,null,10,"div",[["appTooltip",""],["class","tooltip"],["id","buff"]],null,[[null,"click"],[null,"mousemove"]],function(e,n,t){var l=!0,i=e.component;return"mousemove"===n&&(l=!1!==ii(e,1).onmousemove(t)&&l),"click"===n&&(l=!1!==i.buff()&&l),l},null,null)),vi(1,16384,null,0,Pg,[],{elementId:[0,"elementId"]},null),(e()(),eo(2,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/buff.svg"]],null,null,null,null,null)),(e()(),eo(3,0,null,null,7,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),fo(4,null,[" ",""])),(e()(),eo(5,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),fo(6,null,[" ","% buff for "," days "])),(e()(),eo(7,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Jr(16777216,null,null,2,null,WC)),vi(9,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),Si(0,fa,[xt])],function(e,n){var t=n.component;e(n,1,0,0-t.id),e(n,9,0,tl(n,9,0,ii(n,10).transform(t.buildingBuff.cost)))},function(e,n){var t=n.component;e(n,3,0,xl(1,"",0-t.id,"")),e(n,4,0,t.buildingBuff.name),e(n,6,0,t.buildingBuff.effect,t.buildingBuff.duration)})}function YC(e){return So(0,[(e()(),eo(0,0,null,null,2,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,zC)),vi(2,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.buffsEnabled()&&t.building.hasBuff()&&!t.building.isBuffed())},null)}var KC=function(){function e(e,n,t){this.resourcesService=e,this.landService=n,this.servicesService=t,this.id=Math.random()}return e.prototype.ngOnInit=function(){},e.prototype.hasResource=function(e){return 0===this.resourcesService.hasResource(e.key,e.value,this.building.getName()+" upgrade",!0)},e.prototype.getResourceName=function(e){return Vu.prepareResourceName(e)},e.prototype.upgrade=function(){this.parentRegion.upgradeBuilding(this.building.getBuildingId())},e.prototype.getBuildingName=function(e){return Vu.prepareBuildingName(e)},e}(),jC=rl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{cursor:pointer}img[_ngcontent-%COMP%]{height:24px;width:24px}hr[_ngcontent-%COMP%]{border-color:#000}.notMet[_ngcontent-%COMP%]{color:var(--negative-colour)}"]],data:{}});function $C(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(1,null,["Upgrade to ",""]))],null,function(e,n){var t=n.component;e(n,1,0,t.getBuildingName(t.building.getUpgradeSettings().NEW_BUILDING))})}function QC(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(1,null,["Upgrade to level ",""]))],null,function(e,n){e(n,1,0,n.component.building.getBuildingLevel()+1)})}function qC(e){return So(0,[(e()(),eo(0,0,null,null,6,"div",[],null,null,null,null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(2,278528,null,0,Js,[Xs],{ngClass:[0,"ngClass"]},null),ho(3,{notMet:0}),(e()(),fo(4,null,[" ",""])),(e()(),eo(5,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(6,114688,null,0,xg,[],{name:[0,"name"]},null)],function(e,n){var t=n.component,l=e(n,3,0,!t.landService.hasLand(t.building.getUpgradeSettings().SIZE));e(n,2,0,l),e(n,6,0,"land")},function(e,n){e(n,4,0,n.component.building.getUpgradeSettings().SIZE)})}function XC(e){return So(0,[(e()(),eo(0,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),fo(1,null,[""," "])),(e()(),eo(2,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(3,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){e(n,3,0,n.component.getResourceName(n.parent.context.$implicit.key),"resources")},function(e,n){e(n,1,0,n.parent.context.$implicit.value)})}function ZC(e){return So(0,[(e()(),eo(0,0,null,null,3,"div",[["class","notMet"]],null,null,null,null,null)),(e()(),fo(1,null,[""," "])),(e()(),eo(2,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(3,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){e(n,3,0,n.component.getResourceName(n.parent.context.$implicit.key),"resources")},function(e,n){e(n,1,0,n.parent.context.$implicit.value)})}function JC(e){return So(0,[(e()(),eo(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,XC)),vi(2,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,ZC)),vi(4,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.hasResource(n.context.$implicit)),e(n,4,0,!t.hasResource(n.context.$implicit))},null)}function eI(e){return So(0,[(e()(),eo(0,0,null,null,13,"div",[["appTooltip",""],["class","tooltip"],["id","upgrade"]],null,[[null,"click"],[null,"mousemove"]],function(e,n,t){var l=!0,i=e.component;return"mousemove"===n&&(l=!1!==ii(e,1).onmousemove(t)&&l),"click"===n&&(l=!1!==i.upgrade()&&l),l},null,null)),vi(1,16384,null,0,Pg,[],{elementId:[0,"elementId"]},null),(e()(),eo(2,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/upgrade.svg"]],null,null,null,null,null)),(e()(),eo(3,0,null,null,10,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,$C)),vi(5,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,QC)),vi(7,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(8,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,qC)),vi(10,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,2,null,JC)),vi(12,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),Si(0,fa,[xt])],function(e,n){var t=n.component;e(n,1,0,0-t.id),e(n,5,0,t.building.getUpgradeSettings()&&t.building.getUpgradeSettings().NEW_BUILDING),e(n,7,0,t.building.getUpgradeSettings()&&void 0===t.building.getUpgradeSettings().NEW_BUILDING),e(n,10,0,t.building.getUpgradeSettings()&&t.building.getUpgradeSettings().SIZE),e(n,12,0,tl(n,12,0,ii(n,13).transform(t.building.getUpgradeCost())))},function(e,n){e(n,3,0,xl(1,"",0-n.component.id,""))})}function nI(e){return So(0,[(e()(),eo(0,0,null,null,2,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,eI)),vi(2,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,2,0,n.component.building.hasUpgrade())},null)}var tI=function(){function e(){}return e.prototype.ngOnInit=function(){},e.prototype.isTextValue=function(e){return e===Iv.TEXT},e.prototype.isButtonValue=function(e){return e===Iv.BUTTON},e.prototype.isTwoButtonValue=function(e){return e===Iv.TWO_BUTTON},e.prototype.isProgressValue=function(e){return e===Iv.PROGRESS_BAR},e.prototype.isDropdownValue=function(e){return e===Iv.DROPDOWN},e.prototype.isIconValue=function(e){return e===Iv.ICON},e.prototype.isButtonCheckboxValue=function(e){return e===Iv.BUTTON_CHECKBOX},e.prototype.isCheckboxValue=function(e){return e===Iv.CHECKBOX},e.prototype.buildingCallback=function(e){this.building.callback(e)},e}(),lI=rl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{font-size:1.3em}.iconsLine[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}.iconsLine[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:auto}.line[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:1px 4px}button[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{font-size:.9em}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}.icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:2px;-webkit-box-flex:0;flex:0 0 auto}"]],data:{}});function iI(e){return So(0,[(e()(),eo(0,0,null,null,5,"span",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,4,"span",[["class","icon"]],null,null,null,null,null)),(e()(),eo(2,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null)),(e()(),eo(3,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(4,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),eo(5,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null))],function(e,n){e(n,4,0,n.context.$implicit.name,n.context.$implicit.path)},function(e,n){e(n,2,0,n.context.$implicit.prefix),e(n,5,0,n.context.$implicit.suffix)})}function rI(e){return So(0,[(e()(),eo(0,0,null,null,2,"span",[["class","line iconsLine"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,iI)),vi(2,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.building.getLine(t.line).getValue())},null)}function oI(e){return So(0,[(e()(),eo(0,0,null,null,0,"span",[["class","line"]],[[8,"innerHTML",1]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,0,0,t.building.getLine(t.line).getValue())})}function uI(e){return So(0,[(e()(),eo(0,0,null,null,2,"span",[["class","line"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.buildingCallback(i.building.getLine(i.line).getValue().callbackValue)&&l),l},null,null)),(e()(),fo(2,null,[""," "]))],null,function(e,n){var t=n.component;e(n,2,0,t.building.getLine(t.line).getValue().buttonText)})}function sI(e){return So(0,[(e()(),eo(0,0,null,null,10,"span",[["class","line"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.buildingCallback(i.building.getLine(i.line).getValue().callbackValue)&&l),l},null,null)),(e()(),fo(2,null,[""," "])),(e()(),eo(3,0,null,null,7,"label",[],null,null,null,null,null)),(e()(),eo(4,0,null,null,5,"input",[["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"change"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,5).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==ii(e,5).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.building.getLine(i.line).getValue().checkboxState=t)&&l),"click"===n&&(l=!1!==i.buildingCallback(i.building.getLine(i.line).getValue().checkboxCallbackValue)&&l),l},null,null)),vi(5,16384,null,0,Fg,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[Fg]),vi(7,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(9,16384,null,0,zg,[[4,Wg]],null,null),(e()(),fo(10,null,[""," "]))],function(e,n){var t=n.component;e(n,7,0,t.building.getLine(t.line).getValue().checkboxState)},function(e,n){var t=n.component;e(n,2,0,t.building.getLine(t.line).getValue().buttonText),e(n,4,0,ii(n,9).ngClassUntouched,ii(n,9).ngClassTouched,ii(n,9).ngClassPristine,ii(n,9).ngClassDirty,ii(n,9).ngClassValid,ii(n,9).ngClassInvalid,ii(n,9).ngClassPending),e(n,10,0,t.building.getLine(t.line).getValue().checkboxLabel)})}function aI(e){return So(0,[(e()(),eo(0,0,null,null,8,"span",[["class","line"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,7,"label",[],null,null,null,null,null)),(e()(),eo(2,0,null,null,5,"input",[["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"change"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,3).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==ii(e,3).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.building.getLine(i.line).getValue().checkboxState=t)&&l),"click"===n&&(l=!1!==i.buildingCallback(i.building.getLine(i.line).getValue().checkboxCallbackValue)&&l),l},null,null)),vi(3,16384,null,0,Fg,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[Fg]),vi(5,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(7,16384,null,0,zg,[[4,Wg]],null,null),(e()(),fo(8,null,[""," "]))],function(e,n){var t=n.component;e(n,5,0,t.building.getLine(t.line).getValue().checkboxState)},function(e,n){var t=n.component;e(n,2,0,ii(n,7).ngClassUntouched,ii(n,7).ngClassTouched,ii(n,7).ngClassPristine,ii(n,7).ngClassDirty,ii(n,7).ngClassValid,ii(n,7).ngClassInvalid,ii(n,7).ngClassPending),e(n,8,0,t.building.getLine(t.line).getValue().checkboxLabel)})}function cI(e){return So(0,[(e()(),eo(0,0,null,null,5,"span",[["class","line"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.buildingCallback(i.building.getLine(i.line).getValue().callback1Value)&&l),l},null,null)),(e()(),fo(2,null,["",""])),(e()(),eo(3,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null)),(e()(),eo(4,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.buildingCallback(i.building.getLine(i.line).getValue().callback2Value)&&l),l},null,null)),(e()(),fo(5,null,["",""]))],null,function(e,n){var t=n.component;e(n,2,0,t.building.getLine(t.line).getValue().button1Text),e(n,3,0,t.building.getLine(t.line).getValue().textBetween),e(n,5,0,t.building.getLine(t.line).getValue().button2Text)})}function pI(e){return So(0,[(e()(),eo(0,0,null,null,3,"option",[],null,null,null,null,null)),vi(1,147456,null,0,sf,[dt,St,[2,uf]],{value:[0,"value"]},null),vi(2,147456,null,0,pf,[dt,St,[8,null]],{value:[0,"value"]},null),(e()(),fo(3,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,3,0,n.context.$implicit)})}function hI(e){return So(0,[(e()(),eo(0,0,null,null,8,"span",[["class","line"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,7,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,2).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,2).onTouched()&&l),"change"===n&&(l=!1!==i.buildingCallback(t)&&l),"ngModelChange"===n&&(l=!1!==(i.building.getLine(i.line).getValue().selected=t)&&l),l},null,null)),vi(2,16384,null,0,uf,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[uf]),vi(4,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(6,16384,null,0,zg,[[4,Wg]],null,null),(e()(),Jr(16777216,null,null,1,null,pI)),vi(8,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,4,0,t.building.getLine(t.line).getValue().selected),e(n,8,0,t.building.getLine(t.line).getValue().values)},function(e,n){e(n,1,0,ii(n,6).ngClassUntouched,ii(n,6).ngClassTouched,ii(n,6).ngClassPristine,ii(n,6).ngClassDirty,ii(n,6).ngClassValid,ii(n,6).ngClassInvalid,ii(n,6).ngClassPending)})}function dI(e){return So(0,[(e()(),eo(0,0,null,null,1,"app-progress-bar",[],null,null,null,tO,Jb)),vi(1,638976,null,0,Zb,[zf],{progress:[0,"progress"],text:[1,"text"]},null)],function(e,n){var t=n.component;e(n,1,0,t.building.getLine(t.line).getValue().value,t.building.getLine(t.line).getValue().label)},null)}function gI(e){return So(0,[(e()(),eo(0,0,null,null,2,"span",[["class","line"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,dI)),vi(2,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.building.getLine(t.line).getValue().value>=0)},null)}function fI(e){return So(0,[(e()(),eo(0,0,null,null,16,"span",[["id","wrapper"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,rI)),vi(2,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,oI)),vi(4,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,uI)),vi(6,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,sI)),vi(8,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,aI)),vi(10,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,cI)),vi(12,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,hI)),vi(14,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,gI)),vi(16,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.isIconValue(t.building.getLine(t.line).getValueType())),e(n,4,0,t.isTextValue(t.building.getLine(t.line).getValueType())),e(n,6,0,t.isButtonValue(t.building.getLine(t.line).getValueType())),e(n,8,0,t.isButtonCheckboxValue(t.building.getLine(t.line).getValueType())),e(n,10,0,t.isCheckboxValue(t.building.getLine(t.line).getValueType())),e(n,12,0,t.isTwoButtonValue(t.building.getLine(t.line).getValueType())),e(n,14,0,t.isDropdownValue(t.building.getLine(t.line).getValueType())),e(n,16,0,t.isProgressValue(t.building.getLine(t.line).getValueType()))},null)}function mI(e){return So(0,[(e()(),Jr(16777216,null,null,1,null,fI)),vi(1,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,null!=t.line&&t.building)},null)}var vI=function(){function e(e,n,t,l,i,r,o){this.modalService=e,this.servicesService=n,this.resourcesService=t,this.managementService=l,this.villageService=i,this.optionsService=r,this.logService=o,this.demolishMode=!1,this.combineMode=!1,this.splitMode=!1,this.arrangeMode=!1,this.lines=Cv,this.id=Math.random(),this.lastEffectsDisplayValue=0,this.hasEffectsDisplayChanged=!1}return e.prototype.ngOnInit=function(){},e.prototype.fitText=function(){if(this.centerRef){this.hasEffectsDisplayChanged=!1;var e=this.centerRef.nativeElement,n=e.clientWidth,t=e.scrollWidth,l=parseInt(window.getComputedStyle(e,null).getPropertyValue("font-size"),10);if(t>n)l=(l=Math.ceil(l*n/t))>15?l=15:l-1,e.style.fontSize=l+"px";else for(;t===n&&l<15;)l=(l=Math.ceil(l)+1)>15?l=15:l,e.style.fontSize=l+"px",(t=e.scrollWidth)>(n=e.clientWidth)&&(e.style.fontSize=l-1+"px")}},e.prototype.stop=function(){this.building.isWorking()?this.building.stopProduction():this.building.startProduction()||this.modalService.info("Cannot unlock production of "+this.building.getName()+". Number of free workers: "+this.resourcesService.getPeople())},e.prototype.isStoppable=function(){return this.building.isStoppable()},e.prototype.isWorking=function(){return this.building.isWorking()},e.prototype.demolish=function(){var e=this;if(void 0!==this.building.getMaxSize&&this.villageService.getPopulation()>this.villageService.getPopulationCap()-this.building.getMaxSize()){this.modalService.open(ju.CONFIRM),this.modalService.setModalText("You don't have enough housing space to move this building occupants.<br> People that won't find new home will leave the village<br>Do you still want to demolish this building?");var n=this.modalService.registerForConfirmation().subscribe(function(t){n.unsubscribe(),t&&e.building.prepareDemolish()&&e.parentRegion.demolish(e.building)})}else if(this.building.isUsedUp())this.building.prepareDemolish()&&this.parentRegion.demolish(this.building);else{this.modalService.setModalText("Are you sure you want to demolish "+this.building.getName()+"?"),this.modalService.open(ju.CONFIRM);var t=this.modalService.registerForConfirmation().subscribe(function(n){t.unsubscribe(),n&&e.building.prepareDemolish()&&e.parentRegion.demolish(e.building)})}},e.prototype.canCombine=function(){return this.parentRegion.canCombine(this.building)},e.prototype.combine=function(){this.parentRegion.combine(this.building)},e.prototype.split=function(){this.parentRegion.split(this.building)},e.prototype.areComplexWorkersEnabled=function(){return this.managementService.getComplexWorkers()},e.prototype.openWorkersManagement=function(e){e.ctrlKey?this.building.getWorkSettings().enabled?(this.building.getWorkSettings().enabled=!1,this.stop()):this.stop():e.shiftKey?this.building.getWorkSettings().enabled=!this.building.getWorkSettings().enabled:(this.modalService.open(ju.WORK_MANAGEMENT),this.modalService.setBuilding(this.building))},e.prototype.round=function(e){return e%1!=0?Vu.round(e,2):e},e.prototype.arrange=function(){this.parentRegion.move(this.building)},e.prototype.canMove=function(){return this.parentRegion.canMove(this.building)},e.prototype.getDisplayableEffectsValue=function(){var e=this.building.getDisplayableEffectsValue();return this.lastEffectsDisplayValue!==e&&(this.lastEffectsDisplayValue=e,this.hasEffectsDisplayChanged=!0),e},e.prototype.isTextFittingEnabled=function(){return this.optionsService.getOption(Wf.AUTO_TEXT_FITTING)},e.prototype.ngAfterViewChecked=function(){this.hasEffectsDisplayChanged&&this.isTextFittingEnabled()&&this.fitText()},e}(),SI=rl({encapsulation:0,styles:[["[_nghost-%COMP%]{height:15%;min-height:125px;width:10%;min-width:206px;border:1px solid #000;overflow:hidden}#wrapper[_ngcontent-%COMP%]{position:relative;height:100%;text-align:center;font-size:.7em;overflow:hidden}.usedUp[_ngcontent-%COMP%]{background-color:rgba(126,122,121,.6)}#arrange[_ngcontent-%COMP%], #combine[_ngcontent-%COMP%], #demolish[_ngcontent-%COMP%], #split[_ngcontent-%COMP%]{position:absolute;font-weight:600;font-size:2em;top:0;left:0;width:100%;height:100%;background-color:rgba(126,122,121,.7);-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;display:-webkit-box;display:flex;cursor:pointer}#demolishText[_ngcontent-%COMP%], .combineText[_ngcontent-%COMP%]{display:block}#nameBar[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;width:100%;height:24px;font-size:1.4em;font-weight:700;border-bottom:1px solid #000;white-space:nowrap}#left[_ngcontent-%COMP%], #right[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1 0 24px}#center[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1 0 152px;font-size:.8em;overflow:hidden;line-height:24px}.control[_ngcontent-%COMP%]{float:right;font-size:.6em;margin-right:2px;cursor:pointer}.control[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px;height:24px}#lines[_ngcontent-%COMP%]{position:relative;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}app-progress-bar[_ngcontent-%COMP%]{display:block;height:18px}app-building-line[_ngcontent-%COMP%]{height:20px;display:block;margin-top:3px;-webkit-box-flex:1;flex:1 0 auto}img[_ngcontent-%COMP%]{height:24px}.details[_ngcontent-%COMP%]{float:left;font-size:.75em;margin-right:2px}.positiveEffects[_ngcontent-%COMP%]{font-size:.7em;color:var(--positive-colour)}.negativeEffects[_ngcontent-%COMP%]{font-size:.7em;color:var(--negative-colour)}.tooltipSpan[_ngcontent-%COMP%]{font-size:1.5em;font-weight:100;text-align:left}.tooltipSpan[_ngcontent-%COMP%]   #title[_ngcontent-%COMP%]{text-align:center}.tooltipSpan[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border-color:#000}app-building-buff[_ngcontent-%COMP%]{position:absolute;right:0;top:0}app-building-upgrade[_ngcontent-%COMP%]{position:absolute;left:-2px;top:0}"]],data:{}});function EI(e){return So(0,[(e()(),eo(0,0,null,null,7,"span",[["appTooltip",""],["class","details tooltip"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==ii(e,1).onmousemove(t)&&l),l},null,null)),vi(1,16384,null,0,Pg,[],{elementId:[0,"elementId"]},null),(e()(),eo(2,0,null,null,0,"img",[["alt","details"],["draggable","false"],["ondragstart","return false;"],["src","assets/details.svg"]],null,null,null,null,null)),(e()(),eo(3,0,null,null,4,"span",[["class","tooltipSpan"]],[[8,"id",0]],null,null,null,null)),(e()(),eo(4,0,null,null,1,"div",[["id","title"]],null,null,null,null,null)),(e()(),fo(5,null,["",""])),(e()(),eo(6,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),eo(7,0,null,null,0,"div",[],[[8,"innerHTML",1]],null,null,null,null))],function(e,n){e(n,1,0,n.component.id)},function(e,n){var t=n.component;e(n,3,0,xl(1,"",t.id,"")),e(n,5,0,t.building.getName()),e(n,7,0,t.building.getDetails())})}function yI(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[["class","positiveEffects"]],null,null,null,null,null)),(e()(),fo(1,null,["(+","%)"]))],null,function(e,n){var t=n.component;e(n,1,0,t.round(t.getDisplayableEffectsValue()))})}function RI(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[["class","negativeEffects"]],null,null,null,null,null)),(e()(),fo(1,null,["(","%)"]))],null,function(e,n){var t=n.component;e(n,1,0,t.round(t.getDisplayableEffectsValue()))})}function bI(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[["class","control"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.stop()&&l),l},null,null)),(e()(),eo(1,0,null,null,0,"img",[["alt","on"],["draggable","false"],["ondragstart","return false;"],["src","assets/gear.svg"],["title","disable"]],null,null,null,null,null))],null,null)}function OI(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[["class","control"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.stop()&&l),l},null,null)),(e()(),eo(1,0,null,null,0,"img",[["alt","off"],["draggable","false"],["ondragstart","return false;"],["src","assets/gear_off.svg"],["title","enable"]],null,null,null,null,null))],null,null)}function TI(e){return So(0,[(e()(),eo(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,bI)),vi(2,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,OI)),vi(4,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(0,null,null,0))],function(e,n){var t=n.component;e(n,2,0,t.isStoppable()&&t.isWorking()),e(n,4,0,t.isStoppable()&&!t.isWorking())},null)}function CI(e){return So(0,[(e()(),eo(0,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/complex_management_on_on.svg"],["title","work settings"]],null,null,null,null,null))],null,null)}function II(e){return So(0,[(e()(),eo(0,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/complex_management_on_off.svg"],["title","work settings"]],null,null,null,null,null))],null,null)}function AI(e){return So(0,[(e()(),eo(0,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/complex_management_off_on.svg"],["title","work settings"]],null,null,null,null,null))],null,null)}function NI(e){return So(0,[(e()(),eo(0,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/complex_management_off_off.svg"],["title","work settings"]],null,null,null,null,null))],null,null)}function _I(e){return So(0,[(e()(),eo(0,0,null,null,8,"span",[["class","control"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.openWorkersManagement(t)&&l),l},null,null)),(e()(),Jr(16777216,null,null,1,null,CI)),vi(2,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,II)),vi(4,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,AI)),vi(6,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,NI)),vi(8,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.building.getWorkSettings().enabled&&t.building.isWorking()),e(n,4,0,t.building.getWorkSettings().enabled&&!t.building.isWorking()),e(n,6,0,!t.building.getWorkSettings().enabled&&t.building.isWorking()),e(n,8,0,!t.building.getWorkSettings().enabled&&!t.building.isWorking())},null)}function wI(e){return So(0,[(e()(),eo(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,_I)),vi(2,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(0,null,null,0))],function(e,n){e(n,2,0,n.component.isStoppable())},null)}function PI(e){return So(0,[(e()(),eo(0,0,null,null,2,"div",[["id","demolish"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.demolish()&&l),l},null,null)),(e()(),eo(1,0,null,null,1,"span",[["id","demolishText"]],null,null,null,null,null)),(e()(),fo(-1,null,["Demolish"]))],null,null)}function xI(e){return So(0,[(e()(),eo(0,0,null,null,2,"div",[["id","combine"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.combine()&&l),l},null,null)),(e()(),eo(1,0,null,null,1,"span",[["class","combineText"]],null,null,null,null,null)),(e()(),fo(-1,null,["Combine"]))],null,null)}function kI(e){return So(0,[(e()(),eo(0,0,null,null,2,"div",[["id","split"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.split()&&l),l},null,null)),(e()(),eo(1,0,null,null,1,"span",[["class","combineText"]],null,null,null,null,null)),(e()(),fo(-1,null,["Split"]))],null,null)}function MI(e){return So(0,[(e()(),eo(0,0,null,null,2,"div",[["id","arrange"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.arrange()&&l),l},null,null)),(e()(),eo(1,0,null,null,1,"span",[["class","combineText"]],null,null,null,null,null)),(e()(),fo(-1,null,["Move"]))],null,null)}function DI(e){return So(0,[ro(671088640,1,{centerRef:0}),(e()(),eo(1,0,null,null,39,"div",[["id","wrapper"]],null,null,null,null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(3,278528,null,0,Js,[Xs],{ngClass:[0,"ngClass"]},null),ho(4,{usedUp:0}),(e()(),eo(5,0,null,null,14,"div",[["id","nameBar"]],null,null,null,null,null)),(e()(),eo(6,0,null,null,2,"div",[["id","left"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,EI)),vi(8,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(9,0,[[1,0],["center",1]],null,5,"div",[["id","center"]],null,null,null,null,null)),(e()(),fo(10,null,[""," "])),(e()(),Jr(16777216,null,null,1,null,yI)),vi(12,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,RI)),vi(14,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(15,0,null,null,4,"div",[["id","right"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,TI)),vi(17,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,wI)),vi(19,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(20,0,null,null,12,"div",[["id","lines"]],null,null,null,null,null)),(e()(),eo(21,0,null,null,1,"app-building-buff",[],null,null,null,YC,GC)),vi(22,114688,null,0,HC,[Vf,am,IE,Jf],{building:[0,"building"]},null),(e()(),eo(23,0,null,null,1,"app-building-upgrade",[],null,null,null,nI,jC)),vi(24,114688,null,0,KC,[am,NE,Vf],{building:[0,"building"],parentRegion:[1,"parentRegion"]},null),(e()(),eo(25,0,null,null,1,"app-building-line",[],null,null,null,mI,lI)),vi(26,114688,null,0,tI,[],{line:[0,"line"],building:[1,"building"]},null),(e()(),eo(27,0,null,null,1,"app-building-line",[],null,null,null,mI,lI)),vi(28,114688,null,0,tI,[],{line:[0,"line"],building:[1,"building"]},null),(e()(),eo(29,0,null,null,1,"app-building-line",[],null,null,null,mI,lI)),vi(30,114688,null,0,tI,[],{line:[0,"line"],building:[1,"building"]},null),(e()(),eo(31,0,null,null,1,"app-building-line",[],null,null,null,mI,lI)),vi(32,114688,null,0,tI,[],{line:[0,"line"],building:[1,"building"]},null),(e()(),Jr(16777216,null,null,1,null,PI)),vi(34,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,xI)),vi(36,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,kI)),vi(38,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,MI)),vi(40,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component,l=e(n,4,0,t.building.isUsedUp());e(n,3,0,l),e(n,8,0,t.building.hasDetails()),e(n,12,0,t.getDisplayableEffectsValue()>0),e(n,14,0,t.getDisplayableEffectsValue()<0),e(n,17,0,!t.building.isComplexManagement()||t.building.isComplexManagement()&&!t.areComplexWorkersEnabled()),e(n,19,0,t.building.isComplexManagement()&&t.areComplexWorkersEnabled()),e(n,22,0,t.building),e(n,24,0,t.building,t.parentRegion),e(n,26,0,t.lines.FIRST,t.building),e(n,28,0,t.lines.SECOND,t.building),e(n,30,0,t.lines.THIRD,t.building),e(n,32,0,t.lines.FOURTH,t.building),e(n,34,0,t.demolishMode&&t.building.isDemolishable()),e(n,36,0,t.combineMode&&t.building.isCombinable()&&t.canCombine()),e(n,38,0,t.splitMode&&t.building.isSplittable()),e(n,40,0,t.arrangeMode&&t.canMove())},function(e,n){e(n,10,0,n.component.building.getName())})}var LI=function(){function e(e){this.gameService=e}return e.prototype.ngOnInit=function(){},e.prototype.isFortEnabled=function(){return this.gameService.isEnabled(_u.FORT)},e.prototype.isFieldEnabled=function(){return this.gameService.isEnabled(_u.FIELD)},e.prototype.isSeaEnabled=function(){return this.gameService.isEnabled(_u.SEA)},e.prototype.isMountainsEnabled=function(){return this.gameService.isEnabled(_u.MOUNTAINS)},e.prototype.isPlateauEnabled=function(){return this.gameService.isEnabled(_u.PLATEAU)},e}(),FI=rl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{display:-webkit-box;display:flex;height:100%;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}.entry[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:auto;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:100%;text-align:center;border-right:2px solid #000;cursor:pointer;text-decoration:none;color:#000;font-size:1em}.entry[_ngcontent-%COMP%]:last-of-type{border:none}.entry.active[_ngcontent-%COMP%]{background:var(--active-colour)}"]],data:{}});function UI(e){return So(0,[(e()(),eo(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/regions/fort"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==ii(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),vi(1,671744,[[4,4]],0,Qd,[jd,Fh,Ds],{routerLink:[0,"routerLink"]},null),vi(2,1720320,null,2,Xd,[jd,dt,St,[2,$d],[2,Qd]],{routerLinkActive:[0,"routerLinkActive"]},null),ro(603979776,3,{links:1}),ro(603979776,4,{linksWithHrefs:1}),(e()(),fo(-1,null,["Fort"]))],function(e,n){e(n,1,0,"/regions/fort"),e(n,2,0,"active")},function(e,n){e(n,0,0,ii(n,1).target,ii(n,1).href)})}function HI(e){return So(0,[(e()(),eo(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/regions/field"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==ii(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),vi(1,671744,[[8,4]],0,Qd,[jd,Fh,Ds],{routerLink:[0,"routerLink"]},null),vi(2,1720320,null,2,Xd,[jd,dt,St,[2,$d],[2,Qd]],{routerLinkActive:[0,"routerLinkActive"]},null),ro(603979776,7,{links:1}),ro(603979776,8,{linksWithHrefs:1}),(e()(),fo(-1,null,["Field"]))],function(e,n){e(n,1,0,"/regions/field"),e(n,2,0,"active")},function(e,n){e(n,0,0,ii(n,1).target,ii(n,1).href)})}function GI(e){return So(0,[(e()(),eo(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/regions/mountains"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==ii(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),vi(1,671744,[[10,4]],0,Qd,[jd,Fh,Ds],{routerLink:[0,"routerLink"]},null),vi(2,1720320,null,2,Xd,[jd,dt,St,[2,$d],[2,Qd]],{routerLinkActive:[0,"routerLinkActive"]},null),ro(603979776,9,{links:1}),ro(603979776,10,{linksWithHrefs:1}),(e()(),fo(-1,null,["Mountains"]))],function(e,n){e(n,1,0,"/regions/mountains"),e(n,2,0,"active")},function(e,n){e(n,0,0,ii(n,1).target,ii(n,1).href)})}function BI(e){return So(0,[(e()(),eo(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/regions/plateau"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==ii(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),vi(1,671744,[[12,4]],0,Qd,[jd,Fh,Ds],{routerLink:[0,"routerLink"]},null),vi(2,1720320,null,2,Xd,[jd,dt,St,[2,$d],[2,Qd]],{routerLinkActive:[0,"routerLinkActive"]},null),ro(603979776,11,{links:1}),ro(603979776,12,{linksWithHrefs:1}),(e()(),fo(-1,null,["Plateau"]))],function(e,n){e(n,1,0,"/regions/plateau"),e(n,2,0,"active")},function(e,n){e(n,0,0,ii(n,1).target,ii(n,1).href)})}function VI(e){return So(0,[(e()(),eo(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/regions/sea"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==ii(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),vi(1,671744,[[14,4]],0,Qd,[jd,Fh,Ds],{routerLink:[0,"routerLink"]},null),vi(2,1720320,null,2,Xd,[jd,dt,St,[2,$d],[2,Qd]],{routerLinkActive:[0,"routerLinkActive"]},null),ro(603979776,13,{links:1}),ro(603979776,14,{linksWithHrefs:1}),(e()(),fo(-1,null,["Sea"]))],function(e,n){e(n,1,0,"/regions/sea"),e(n,2,0,"active")},function(e,n){e(n,0,0,ii(n,1).target,ii(n,1).href)})}function WI(e){return So(0,[(e()(),eo(0,0,null,null,22,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/regions/village"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==ii(e,2).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),vi(2,671744,[[2,4]],0,Qd,[jd,Fh,Ds],{routerLink:[0,"routerLink"]},null),vi(3,1720320,null,2,Xd,[jd,dt,St,[2,$d],[2,Qd]],{routerLinkActive:[0,"routerLinkActive"]},null),ro(603979776,1,{links:1}),ro(603979776,2,{linksWithHrefs:1}),(e()(),fo(-1,null,["Village"])),(e()(),Jr(16777216,null,null,1,null,UI)),vi(8,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(9,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/regions/forest"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==ii(e,10).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),vi(10,671744,[[6,4]],0,Qd,[jd,Fh,Ds],{routerLink:[0,"routerLink"]},null),vi(11,1720320,null,2,Xd,[jd,dt,St,[2,$d],[2,Qd]],{routerLinkActive:[0,"routerLinkActive"]},null),ro(603979776,5,{links:1}),ro(603979776,6,{linksWithHrefs:1}),(e()(),fo(-1,null,["Forest"])),(e()(),Jr(16777216,null,null,1,null,HI)),vi(16,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,GI)),vi(18,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,BI)),vi(20,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,VI)),vi(22,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,"/regions/village"),e(n,3,0,"active"),e(n,8,0,t.isFortEnabled()),e(n,10,0,"/regions/forest"),e(n,11,0,"active"),e(n,16,0,t.isFieldEnabled()),e(n,18,0,t.isMountainsEnabled()),e(n,20,0,t.isPlateauEnabled()),e(n,22,0,t.isSeaEnabled())},function(e,n){e(n,1,0,ii(n,2).target,ii(n,2).href),e(n,9,0,ii(n,10).target,ii(n,10).href)})}var zI=function(){function e(e){this.happinessService=e}return e.prototype.ngOnInit=function(){},e.prototype.getHappiness=function(){return Vu.round(this.happinessService.getHappiness(),2)},e.prototype.getHappinessValue=function(){return this.happinessService.getHappiness()},e}(),YI=rl({encapsulation:0,styles:[["[_nghost-%COMP%]{display:inline-block}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center}"]],data:{}});function KI(e){return So(0,[(e()(),eo(0,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(1,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"],margin:[3,"margin"]},null)],function(e,n){e(n,1,0,"angry","happiness","happiness: angry","0 0 0 4px")},null)}function jI(e){return So(0,[(e()(),eo(0,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(1,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"],margin:[3,"margin"]},null)],function(e,n){e(n,1,0,"sad","happiness","happiness: sad","0 0 0 4px")},null)}function $I(e){return So(0,[(e()(),eo(0,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(1,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"],margin:[3,"margin"]},null)],function(e,n){e(n,1,0,"neutral","happiness","happiness: neutral","0 0 0 4px")},null)}function QI(e){return So(0,[(e()(),eo(0,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(1,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"],margin:[3,"margin"]},null)],function(e,n){e(n,1,0,"happy","happiness","happiness: happy","0 0 0 4px")},null)}function qI(e){return So(0,[(e()(),eo(0,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(1,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"],margin:[3,"margin"]},null)],function(e,n){e(n,1,0,"overjoyed","happiness","happiness: overjoyed","0 0 0 4px")},null)}function XI(e){return So(0,[(e()(),eo(0,0,null,null,11,"div",[["class","icon"],["id","wrapper"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,KI)),vi(2,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,jI)),vi(4,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,$I)),vi(6,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,QI)),vi(8,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,qI)),vi(10,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),fo(11,null,[" ","%\n"]))],function(e,n){var t=n.component;e(n,2,0,t.getHappinessValue()>=0&&t.getHappinessValue()<=10),e(n,4,0,t.getHappinessValue()>10&&t.getHappinessValue()<=40),e(n,6,0,t.getHappinessValue()>40&&t.getHappinessValue()<=60),e(n,8,0,t.getHappinessValue()>60&&t.getHappinessValue()<=90),e(n,10,0,t.getHappinessValue()>90&&t.getHappinessValue()<=100)},function(e,n){e(n,11,0,n.component.getHappiness())})}var ZI=function(){function e(e,n,t,l,i,r,o,u){this.modalService=e,this.landService=n,this.gameService=t,this.regionService=l,this.tutorialService=i,this.optionsService=r,this.changeDetectorRef=o,this.thisRegion=u,this.demolishMode=!1,this.arrangeMode=!1,this.combineMode=!1,this.splitMode=!1,this.filterBuilding=this.regionService.getFilterBuilding(),this.filterWorking=this.regionService.getFilterWorking(),this.currentPage=0,this.allBuildings=wu.ALL,this.buildingStates=_E}return e.prototype.ngOnInit=function(){this.tutorialService.checkRegionTutorial(this.thisRegion)},e.prototype.getUniqueBuildingsFromCurrentView=function(){var e=[];return this.regionService.buildings.forEach(function(n){e.includes(n.getBuildingType())||e.push(n.getBuildingType()),n.getBuildingType()!==wu.CONSTRUCTION||e.includes(n.getConstructing())?n.getBuildingType()!==wu.DECONSTRUCTION||e.includes(n.getDecontructing())||e.push(n.getDecontructing()):e.push(n.getConstructing())}),e},e.prototype.getBuildings=function(){var e=this,n=this.regionService.getBuildings().filter(function(n){return e.filterWorking===_E.ALL||e.filterWorking===_E.WORKING&&n.isWorking()||e.filterWorking===_E.IDLE&&!n.isWorking()&&n.isStoppable()}).filter(function(n){return e.filterBuilding===wu.ALL||n.getBuildingType()===wu.CONSTRUCTION&&n.getConstructing()===e.filterBuilding||n.getBuildingType()===wu.DECONSTRUCTION&&n.getDecontructing()===e.filterBuilding||n.getBuildingType()===e.filterBuilding});return 0!==n.length||this.filterBuilding===wu.ALL||this.getUniqueBuildingsFromCurrentView().includes(this.filterBuilding)||(this.filterBuilding=wu.ALL,this.regionService.setFilterBuildings(wu.ALL)),n},e.prototype.getBuildingName=function(e){return Vu.prepareBuildingName(e)},e.prototype.updateFilter=function(e){this.filterBuilding=wu[wu[e.target.value]],this.regionService.setFilterBuildings(this.filterBuilding),this.currentPage=0},e.prototype.updateFilter2=function(e){this.filterWorking=wu[wu[e.target.value]],this.regionService.setFilterWorking(this.filterWorking),this.currentPage=0},e.prototype.openBuildModal=function(){this.demolishMode=!1,this.arrangeMode=!1,this.modalService.setRegion(this.thisRegion),this.modalService.open(ju.BUILD)},e.prototype.getUnemployed=function(){return this.regionService.getUnemployed()},e.prototype.getFreeLand=function(){return this.landService.getLand()},e.prototype.toggleDemolishMode=function(){this.demolishMode=!this.demolishMode,this.arrangeMode=!1,this.splitMode=!1,this.clearCombineMode()},e.prototype.toggleArrangeMode=function(){this.arrangeMode=!this.arrangeMode,this.demolishMode=!1,this.splitMode=!1,this.clearCombineMode()},e.prototype.toggleCombineMode=function(){this.combineMode=!this.combineMode,this.splitMode=!1,this.demolishMode=!1,this.arrangeMode=!1},e.prototype.toggleSplitMode=function(){this.splitMode=!this.splitMode,this.combineMode=!1,this.demolishMode=!1,this.arrangeMode=!1},e.prototype.clearCombineMode=function(){this.combineMode=!1,this.regionService.clearCombineMode()},e.prototype.isUrbanPlanningEnabled=function(){return this.gameService.isEnabled(_u.URBAN_PLANNING)},e.prototype.hasCombinableBuildings=function(){return this.getBuildings().filter(function(e){return e.isCombinable()}).length>1},e.prototype.hasSplittableBuildings=function(){return this.getBuildings().filter(function(e){return e.isSplittable()}).length>=1},e.prototype.onKeydownHandler=function(e){this.demolishMode=!1,this.arrangeMode=!1,this.clearCombineMode()},e.prototype.enableAll=function(){this.getBuildings().filter(function(e){return e.isStoppable()}).forEach(function(e){e.stopProduction(),e.startProduction()})},e.prototype.disableAll=function(){this.getBuildings().filter(function(e){return e.isStoppable()}).forEach(function(e){return e.stopProduction()})},e.prototype.isPagedViewEnabled=function(){return this.optionsService.getOption(Wf.PAGED_VIEW)},e.prototype.getBuildingPerPage=function(){return this.optionsService.getOption(Wf.BUILDINGS_PER_PAGE)},e.prototype.getPagesNumber=function(){var e=Math.ceil(this.getBuildings().length/this.getBuildingPerPage());return 0===e&&(e=1),Array.apply(null,Array(e)).map(function(e,n){return n})},e.prototype.setPage=function(e){this.currentPage=e},e.prototype.getPagedBuildings=function(){var e=this.getBuildingPerPage();return this.getBuildings().slice(this.currentPage*e,this.currentPage*e+e)},e.prototype.autoSort=function(){var e=this;this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to <b>auto sort</b> buildings?");var n=this.modalService.registerForConfirmation().subscribe(function(t){n.unsubscribe(),t&&e.regionService.autoSort()})},e}(),JI=function(e){function n(n,t,l,i,r,o,u,s,a){var c=e.call(this,n,t,l,i,s,o,a,Gu.VILLAGE)||this;return c.landService=t,c.villageService=i,c.resourcesService=r,c.managementService=u,c}return i(n,e),n.prototype.getPopulation=function(){return this.villageService.getPopulation()},n.prototype.getPopulationCap=function(){return this.villageService.getPopulationCap()},n.prototype.getTakenLand=function(){return this.landService.getTakenLand()},n.prototype.getSick=function(){return this.resourcesService.getSick()},n.prototype.getSicknessName=function(e){return Vu.prepareSicknessName(e)},n}(ZI),eA=rl({encapsulation:0,styles:[UC,[".herbal[_ngcontent-%COMP%]{height:16px}"]],data:{}});function nA(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleDemolishMode()&&l),l},null,null)),(e()(),fo(-1,null,["Demolish"]))],null,null)}function tA(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleDemolishMode()&&l),l},null,null)),(e()(),fo(-1,null,["Stop"]))],null,null)}function lA(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleArrangeMode()&&l),l},null,null)),(e()(),fo(-1,null,["Arrange"]))],null,null)}function iA(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleArrangeMode()&&l),l},null,null)),(e()(),fo(-1,null,["Stop"]))],null,null)}function rA(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleCombineMode()&&l),l},null,null)),(e()(),fo(-1,null,["Combine"]))],null,null)}function oA(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleCombineMode()&&l),l},null,null)),(e()(),fo(-1,null,["Stop"]))],null,null)}function uA(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleSplitMode()&&l),l},null,null)),(e()(),fo(-1,null,["Split"]))],null,null)}function sA(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleSplitMode()&&l),l},null,null)),(e()(),fo(-1,null,["Stop"]))],null,null)}function aA(e){return So(0,[(e()(),eo(0,0,null,null,3,"option",[],null,null,null,null,null)),vi(1,147456,null,0,sf,[dt,St,[2,uf]],{value:[0,"value"]},null),vi(2,147456,null,0,pf,[dt,St,[8,null]],{value:[0,"value"]},null),(e()(),fo(3,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,3,0,n.component.getBuildingName(n.context.$implicit))})}function cA(e){return So(0,[(e()(),eo(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),eo(1,0,null,null,0,"img",[["alt",""],["class","herbal"],["src","assets/resources/herbal_medicine.svg"]],null,null,null,null,null))],null,null)}function pA(e){return So(0,[(e()(),eo(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),fo(1,null,[" ",". "," ","% "])),po(2,2),(e()(),Jr(16777216,null,null,1,null,cA)),vi(4,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,4,0,n.context.$implicit.medicine>0)},function(e,n){var t=n.context.index+1,l=n.component.getSicknessName(n.context.$implicit.sickness),i=tl(n,1,2,e(n,2,0,ii(n.parent.parent,0),n.context.$implicit.progress,"0.0-0"));e(n,1,0,t,l,i)})}function hA(e){return So(0,[(e()(),eo(0,0,null,null,10,"span",[["appTooltip",""],["class","icon tooltip"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==ii(e,1).onmousemove(t)&&l),l},null,null)),vi(1,16384,null,0,Pg,[],{elementId:[0,"elementId"]},null),(e()(),eo(2,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(3,114688,null,0,xg,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),fo(4,null,[" "," "])),(e()(),eo(5,0,null,null,4,"span",[["id","sick"]],null,null,null,null,null)),(e()(),fo(6,null,[" Sick: "," "])),(e()(),eo(7,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,pA)),vi(9,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),fo(-1,null,[" \xa0\xa0\xa0 "]))],function(e,n){var t=n.component;e(n,1,0,"sick"),e(n,3,0,"sick","","0 0 0 2px"),e(n,9,0,t.getSick())},function(e,n){var t=n.component;e(n,4,0,t.getSick().length),e(n,6,0,t.getSick().length)})}function dA(e){return So(0,[(e()(),eo(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"app-building",[],null,null,null,DI,SI)),vi(2,8503296,null,0,vI,[qf,Vf,am,xy,kE,zf,$f],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,2,0,t.demolishMode,t.combineMode,t.splitMode,t.arrangeMode,n.context.$implicit,t.villageService)},null)}function gA(e){return So(0,[(e()(),eo(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),eo(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["Buildings"])),(e()(),eo(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,dA)),vi(6,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,6,0,n.component.getBuildings())},null)}function fA(e){return So(0,[(e()(),eo(0,0,null,null,4,"span",[["class","page"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.setPage(e.context.$implicit)&&l),l},null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(2,278528,null,0,Js,[Xs],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),ho(3,{activePage:0}),(e()(),fo(4,null,["page ",""]))],function(e,n){var t=e(n,3,0,n.component.currentPage===n.context.$implicit);e(n,2,0,"page",t)},function(e,n){e(n,4,0,n.context.$implicit+1)})}function mA(e){return So(0,[(e()(),eo(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"app-building",[],null,null,null,DI,SI)),vi(2,8503296,null,0,vI,[qf,Vf,am,xy,kE,zf,$f],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,2,0,t.demolishMode,t.combineMode,t.splitMode,t.arrangeMode,n.context.$implicit,t.villageService)},null)}function vA(e){return So(0,[(e()(),eo(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,fA)),vi(3,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),eo(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,mA)),vi(6,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,3,0,t.getPagesNumber()),e(n,6,0,t.getPagedBuildings())},null)}function SA(e){return So(0,[Si(0,va,[er]),(e()(),eo(1,0,null,null,85,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),eo(2,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),eo(3,0,null,null,1,"app-top-menu",[],null,null,null,WI,FI)),vi(4,114688,null,0,LI,[Jf],null,null),(e()(),eo(5,0,null,null,81,"div",[["id","content"]],null,null,null,null,null)),(e()(),eo(6,0,null,null,54,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),eo(7,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.openBuildModal()&&l),l},null,null)),(e()(),fo(-1,null,["Build"])),(e()(),Jr(16777216,null,null,1,null,nA)),vi(10,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,tA)),vi(12,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,lA)),vi(14,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,iA)),vi(16,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(17,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.autoSort()&&l),l},null,null)),(e()(),fo(-1,null,["Sort"])),(e()(),Jr(16777216,null,null,1,null,rA)),vi(20,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,oA)),vi(22,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,uA)),vi(24,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,sA)),vi(26,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(27,0,null,null,33,"div",[["id","side"]],null,null,null,null,null)),(e()(),fo(-1,null,[" Filter:"])),(e()(),eo(29,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(30,0,null,null,30,"div",[["id","filters"]],null,null,null,null,null)),(e()(),eo(31,0,null,null,11,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,32).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,32).onTouched()&&l),"change"===n&&(l=!1!==i.updateFilter(t)&&l),"ngModelChange"===n&&(l=!1!==(i.filterBuilding=t)&&l),l},null,null)),vi(32,16384,null,0,uf,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[uf]),vi(34,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(36,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(37,0,null,null,3,"option",[],null,null,null,null,null)),vi(38,147456,null,0,sf,[dt,St,[2,uf]],{value:[0,"value"]},null),vi(39,147456,null,0,pf,[dt,St,[8,null]],{value:[0,"value"]},null),(e()(),fo(40,null,["",""])),(e()(),Jr(16777216,null,null,1,null,aA)),vi(42,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),eo(43,0,null,null,17,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,44).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,44).onTouched()&&l),"change"===n&&(l=!1!==i.updateFilter2(t)&&l),"ngModelChange"===n&&(l=!1!==(i.filterWorking=t)&&l),l},null,null)),vi(44,16384,null,0,uf,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[uf]),vi(46,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(48,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(49,0,null,null,3,"option",[],null,null,null,null,null)),vi(50,147456,null,0,sf,[dt,St,[2,uf]],{value:[0,"value"]},null),vi(51,147456,null,0,pf,[dt,St,[8,null]],{value:[0,"value"]},null),(e()(),fo(-1,null,["All"])),(e()(),eo(53,0,null,null,3,"option",[],null,null,null,null,null)),vi(54,147456,null,0,sf,[dt,St,[2,uf]],{value:[0,"value"]},null),vi(55,147456,null,0,pf,[dt,St,[8,null]],{value:[0,"value"]},null),(e()(),fo(-1,null,["Working"])),(e()(),eo(57,0,null,null,3,"option",[],null,null,null,null,null)),vi(58,147456,null,0,sf,[dt,St,[2,uf]],{value:[0,"value"]},null),vi(59,147456,null,0,pf,[dt,St,[8,null]],{value:[0,"value"]},null),(e()(),fo(-1,null,["Idle"])),(e()(),eo(61,0,null,null,21,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(62,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(63,114688,null,0,xg,[],{name:[0,"name"]},null),(e()(),fo(64,null,[" ","/"," \xa0\xa0 "])),(e()(),eo(65,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(66,114688,null,0,xg,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),fo(67,null,[" "," \xa0\xa0\xa0 "])),(e()(),Jr(16777216,null,null,1,null,hA)),vi(69,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(70,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(71,114688,null,0,xg,[],{name:[0,"name"]},null),(e()(),fo(72,null,[" "," \xa0\xa0\xa0 "])),(e()(),eo(73,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(74,114688,null,0,xg,[],{name:[0,"name"],title:[1,"title"]},null),(e()(),fo(75,null,["\xa0"," \xa0\xa0\xa0 "])),(e()(),eo(76,0,null,null,1,"app-happiness",[],null,null,null,XI,YI)),vi(77,114688,null,0,zI,[lm],null,null),(e()(),eo(78,0,null,null,4,"div",[["id","allControl"]],null,null,null,null,null)),(e()(),eo(79,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.enableAll()&&l),l},null,null)),(e()(),fo(-1,null,["all on"])),(e()(),eo(81,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.disableAll()&&l),l},null,null)),(e()(),fo(-1,null,["all off"])),(e()(),Jr(16777216,null,null,1,null,gA)),vi(84,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,vA)),vi(86,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,4,0),e(n,10,0,!t.demolishMode),e(n,12,0,t.demolishMode),e(n,14,0,!t.arrangeMode&&t.getBuildings().length>1),e(n,16,0,t.arrangeMode),e(n,20,0,!t.combineMode&&t.isUrbanPlanningEnabled()&&t.hasCombinableBuildings()),e(n,22,0,t.combineMode),e(n,24,0,!t.splitMode&&t.isUrbanPlanningEnabled()&&t.hasSplittableBuildings()),e(n,26,0,t.splitMode),e(n,34,0,t.filterBuilding),e(n,38,0,t.allBuildings),e(n,39,0,t.allBuildings),e(n,42,0,t.getUniqueBuildingsFromCurrentView()),e(n,46,0,t.filterWorking),e(n,50,0,t.buildingStates.ALL),e(n,51,0,t.buildingStates.ALL),e(n,54,0,t.buildingStates.WORKING),e(n,55,0,t.buildingStates.WORKING),e(n,58,0,t.buildingStates.IDLE),e(n,59,0,t.buildingStates.IDLE),e(n,63,0,"population"),e(n,66,0,"hammer","Workers","0 0 0 2px"),e(n,69,0,t.getSick().length>0),e(n,71,0,"land"),e(n,74,0,"village","Village size"),e(n,77,0),e(n,84,0,!t.isPagedViewEnabled()),e(n,86,0,t.isPagedViewEnabled())},function(e,n){var t=n.component;e(n,31,0,ii(n,36).ngClassUntouched,ii(n,36).ngClassTouched,ii(n,36).ngClassPristine,ii(n,36).ngClassDirty,ii(n,36).ngClassValid,ii(n,36).ngClassInvalid,ii(n,36).ngClassPending),e(n,40,0,t.getBuildingName(t.allBuildings)),e(n,43,0,ii(n,48).ngClassUntouched,ii(n,48).ngClassTouched,ii(n,48).ngClassPristine,ii(n,48).ngClassDirty,ii(n,48).ngClassValid,ii(n,48).ngClassInvalid,ii(n,48).ngClassPending),e(n,64,0,t.getPopulation(),t.getPopulationCap()),e(n,67,0,t.getUnemployed()),e(n,72,0,t.getFreeLand()),e(n,75,0,t.getTakenLand())})}function EA(e){return So(0,[(e()(),eo(0,0,null,null,1,"app-village",[],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==ii(e,1).onKeydownHandler(t)&&l),l},SA,eA)),vi(1,114688,null,0,JI,[qf,NE,Jf,kE,am,zf,xy,Xf,kt],null,null)],function(e,n){e(n,1,0)},null)}var yA=jl("app-village",JI,EA,{},{},[]),RA=function(e){function n(n,t,l,i,r,o,u){var s=e.call(this,n,t,l,r,i,o,u,Gu.FORT)||this;return s.fortService=r,s}return i(n,e),n}(ZI),bA=rl({encapsulation:0,styles:[UC,[""]],data:{}});function OA(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleDemolishMode()&&l),l},null,null)),(e()(),fo(-1,null,["Demolish"]))],null,null)}function TA(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleDemolishMode()&&l),l},null,null)),(e()(),fo(-1,null,["Stop"]))],null,null)}function CA(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleArrangeMode()&&l),l},null,null)),(e()(),fo(-1,null,["Arrange"]))],null,null)}function IA(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleArrangeMode()&&l),l},null,null)),(e()(),fo(-1,null,["Stop"]))],null,null)}function AA(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleCombineMode()&&l),l},null,null)),(e()(),fo(-1,null,["Combine"]))],null,null)}function NA(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleCombineMode()&&l),l},null,null)),(e()(),fo(-1,null,["Stop"]))],null,null)}function _A(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleSplitMode()&&l),l},null,null)),(e()(),fo(-1,null,["Split"]))],null,null)}function wA(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleSplitMode()&&l),l},null,null)),(e()(),fo(-1,null,["Stop"]))],null,null)}function PA(e){return So(0,[(e()(),eo(0,0,null,null,3,"option",[],null,null,null,null,null)),vi(1,147456,null,0,sf,[dt,St,[2,uf]],{value:[0,"value"]},null),vi(2,147456,null,0,pf,[dt,St,[8,null]],{value:[0,"value"]},null),(e()(),fo(3,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,3,0,n.component.getBuildingName(n.context.$implicit))})}function xA(e){return So(0,[(e()(),eo(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"app-building",[],null,null,null,DI,SI)),vi(2,8503296,null,0,vI,[qf,Vf,am,xy,kE,zf,$f],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,2,0,t.demolishMode,t.combineMode,t.splitMode,t.arrangeMode,n.context.$implicit,t.fortService)},null)}function kA(e){return So(0,[(e()(),eo(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),eo(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["Buildings"])),(e()(),eo(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,xA)),vi(6,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,6,0,n.component.getBuildings())},null)}function MA(e){return So(0,[(e()(),eo(0,0,null,null,4,"span",[["class","page"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.setPage(e.context.$implicit)&&l),l},null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(2,278528,null,0,Js,[Xs],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),ho(3,{activePage:0}),(e()(),fo(4,null,["page ",""]))],function(e,n){var t=e(n,3,0,n.component.currentPage===n.context.$implicit);e(n,2,0,"page",t)},function(e,n){e(n,4,0,n.context.$implicit+1)})}function DA(e){return So(0,[(e()(),eo(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"app-building",[],null,null,null,DI,SI)),vi(2,8503296,null,0,vI,[qf,Vf,am,xy,kE,zf,$f],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,2,0,t.demolishMode,t.combineMode,t.splitMode,t.arrangeMode,n.context.$implicit,t.fortService)},null)}function LA(e){return So(0,[(e()(),eo(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,MA)),vi(3,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),eo(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,DA)),vi(6,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,3,0,t.getPagesNumber()),e(n,6,0,t.getPagedBuildings())},null)}function FA(e){return So(0,[(e()(),eo(0,0,null,null,75,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),eo(2,0,null,null,1,"app-top-menu",[],null,null,null,WI,FI)),vi(3,114688,null,0,LI,[Jf],null,null),(e()(),eo(4,0,null,null,71,"div",[["id","content"]],null,null,null,null,null)),(e()(),eo(5,0,null,null,54,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),eo(6,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.openBuildModal()&&l),l},null,null)),(e()(),fo(-1,null,["Build"])),(e()(),Jr(16777216,null,null,1,null,OA)),vi(9,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,TA)),vi(11,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,CA)),vi(13,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,IA)),vi(15,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(16,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.autoSort()&&l),l},null,null)),(e()(),fo(-1,null,["Sort"])),(e()(),Jr(16777216,null,null,1,null,AA)),vi(19,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,NA)),vi(21,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,_A)),vi(23,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,wA)),vi(25,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(26,0,null,null,33,"div",[["id","side"]],null,null,null,null,null)),(e()(),fo(-1,null,[" Filter:"])),(e()(),eo(28,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(29,0,null,null,30,"div",[["id","filters"]],null,null,null,null,null)),(e()(),eo(30,0,null,null,11,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,31).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,31).onTouched()&&l),"change"===n&&(l=!1!==i.updateFilter(t)&&l),"ngModelChange"===n&&(l=!1!==(i.filterBuilding=t)&&l),l},null,null)),vi(31,16384,null,0,uf,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[uf]),vi(33,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(35,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(36,0,null,null,3,"option",[],null,null,null,null,null)),vi(37,147456,null,0,sf,[dt,St,[2,uf]],{value:[0,"value"]},null),vi(38,147456,null,0,pf,[dt,St,[8,null]],{value:[0,"value"]},null),(e()(),fo(39,null,["",""])),(e()(),Jr(16777216,null,null,1,null,PA)),vi(41,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),eo(42,0,null,null,17,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,43).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,43).onTouched()&&l),"change"===n&&(l=!1!==i.updateFilter2(t)&&l),"ngModelChange"===n&&(l=!1!==(i.filterWorking=t)&&l),l},null,null)),vi(43,16384,null,0,uf,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[uf]),vi(45,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(47,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(48,0,null,null,3,"option",[],null,null,null,null,null)),vi(49,147456,null,0,sf,[dt,St,[2,uf]],{value:[0,"value"]},null),vi(50,147456,null,0,pf,[dt,St,[8,null]],{value:[0,"value"]},null),(e()(),fo(-1,null,["All"])),(e()(),eo(52,0,null,null,3,"option",[],null,null,null,null,null)),vi(53,147456,null,0,sf,[dt,St,[2,uf]],{value:[0,"value"]},null),vi(54,147456,null,0,pf,[dt,St,[8,null]],{value:[0,"value"]},null),(e()(),fo(-1,null,["Working"])),(e()(),eo(56,0,null,null,3,"option",[],null,null,null,null,null)),vi(57,147456,null,0,sf,[dt,St,[2,uf]],{value:[0,"value"]},null),vi(58,147456,null,0,pf,[dt,St,[8,null]],{value:[0,"value"]},null),(e()(),fo(-1,null,["Idle"])),(e()(),eo(60,0,null,null,11,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(61,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(62,114688,null,0,xg,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),fo(63,null,[" "," \xa0\xa0\xa0 "])),(e()(),eo(64,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(65,114688,null,0,xg,[],{name:[0,"name"]},null),(e()(),fo(66,null,[" "," "])),(e()(),eo(67,0,null,null,4,"div",[["id","allControl"]],null,null,null,null,null)),(e()(),eo(68,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.enableAll()&&l),l},null,null)),(e()(),fo(-1,null,["all on"])),(e()(),eo(70,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.disableAll()&&l),l},null,null)),(e()(),fo(-1,null,["all off"])),(e()(),Jr(16777216,null,null,1,null,kA)),vi(73,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,LA)),vi(75,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,3,0),e(n,9,0,!t.demolishMode),e(n,11,0,t.demolishMode),e(n,13,0,!t.arrangeMode&&t.getBuildings().length>1),e(n,15,0,t.arrangeMode),e(n,19,0,!t.combineMode&&t.isUrbanPlanningEnabled()&&t.hasCombinableBuildings()),e(n,21,0,t.combineMode),e(n,23,0,!t.splitMode&&t.isUrbanPlanningEnabled()&&t.hasSplittableBuildings()),e(n,25,0,t.splitMode),e(n,33,0,t.filterBuilding),e(n,37,0,t.allBuildings),e(n,38,0,t.allBuildings),e(n,41,0,t.getUniqueBuildingsFromCurrentView()),e(n,45,0,t.filterWorking),e(n,49,0,t.buildingStates.ALL),e(n,50,0,t.buildingStates.ALL),e(n,53,0,t.buildingStates.WORKING),e(n,54,0,t.buildingStates.WORKING),e(n,57,0,t.buildingStates.IDLE),e(n,58,0,t.buildingStates.IDLE),e(n,62,0,"hammer","Workers","0 0 0 2px"),e(n,65,0,"land"),e(n,73,0,!t.isPagedViewEnabled()),e(n,75,0,t.isPagedViewEnabled())},function(e,n){var t=n.component;e(n,30,0,ii(n,35).ngClassUntouched,ii(n,35).ngClassTouched,ii(n,35).ngClassPristine,ii(n,35).ngClassDirty,ii(n,35).ngClassValid,ii(n,35).ngClassInvalid,ii(n,35).ngClassPending),e(n,39,0,t.getBuildingName(t.allBuildings)),e(n,42,0,ii(n,47).ngClassUntouched,ii(n,47).ngClassTouched,ii(n,47).ngClassPristine,ii(n,47).ngClassDirty,ii(n,47).ngClassValid,ii(n,47).ngClassInvalid,ii(n,47).ngClassPending),e(n,63,0,t.getUnemployed()),e(n,66,0,t.getFreeLand())})}function UA(e){return So(0,[(e()(),eo(0,0,null,null,1,"app-fort",[],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==ii(e,1).onKeydownHandler(t)&&l),l},FA,bA)),vi(1,114688,null,0,RA,[qf,NE,Jf,Xf,$R,zf,kt],null,null)],function(e,n){e(n,1,0)},null)}var HA=jl("app-fort",RA,UA,{},{},[]),GA=function(e){function n(n,t,l,i,r){return e.call(this,t,n,l,r,i,Gu.FOREST,zu.FOREST)||this}return i(n,e),n.prototype.init=function(){var e=this;this.buildings.push(new Mv(this.servicesService,this.idService.getNextId()).build()),this.buildings.push(new Yv(this.servicesService,this.idService.getNextId()).build()),this.buildings.forEach(function(n){return e.landService.takeLand(n.getSize())})},n.ngInjectableDef=Oe({factory:function(){return new n(Ye(am),Ye(CE),Ye(Vf),Ye($S),Ye(NE))},token:n,providedIn:"root"}),n}(PE),BA=function(e){function n(n,t,l,i,r,o,u){var s=e.call(this,n,t,l,r,i,o,u,Gu.FOREST)||this;return s.forestService=r,s}return i(n,e),n.prototype.getForestSize=function(){return this.landService.getForest()},n}(ZI),VA=rl({encapsulation:0,styles:[UC,[".critical[_ngcontent-%COMP%]{color:var(--negative-colour)}"]],data:{}});function WA(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleDemolishMode()&&l),l},null,null)),(e()(),fo(-1,null,["Demolish"]))],null,null)}function zA(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleDemolishMode()&&l),l},null,null)),(e()(),fo(-1,null,["Stop"]))],null,null)}function YA(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleArrangeMode()&&l),l},null,null)),(e()(),fo(-1,null,["Arrange"]))],null,null)}function KA(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleArrangeMode()&&l),l},null,null)),(e()(),fo(-1,null,["Stop"]))],null,null)}function jA(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleCombineMode()&&l),l},null,null)),(e()(),fo(-1,null,["Combine"]))],null,null)}function $A(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleCombineMode()&&l),l},null,null)),(e()(),fo(-1,null,["Stop"]))],null,null)}function QA(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleSplitMode()&&l),l},null,null)),(e()(),fo(-1,null,["Split"]))],null,null)}function qA(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleSplitMode()&&l),l},null,null)),(e()(),fo(-1,null,["Stop"]))],null,null)}function XA(e){return So(0,[(e()(),eo(0,0,null,null,3,"option",[],null,null,null,null,null)),vi(1,147456,null,0,sf,[dt,St,[2,uf]],{value:[0,"value"]},null),vi(2,147456,null,0,pf,[dt,St,[8,null]],{value:[0,"value"]},null),(e()(),fo(3,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,3,0,n.component.getBuildingName(n.context.$implicit))})}function ZA(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.getForestSize())})}function JA(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[["class","critical"]],null,null,null,null,null)),(e()(),fo(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.getForestSize())})}function eN(e){return So(0,[(e()(),eo(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"app-building",[],null,null,null,DI,SI)),vi(2,8503296,null,0,vI,[qf,Vf,am,xy,kE,zf,$f],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,2,0,t.demolishMode,t.combineMode,t.splitMode,t.arrangeMode,n.context.$implicit,t.forestService)},null)}function nN(e){return So(0,[(e()(),eo(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),eo(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["Buildings"])),(e()(),eo(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,eN)),vi(6,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,6,0,n.component.getBuildings())},null)}function tN(e){return So(0,[(e()(),eo(0,0,null,null,4,"span",[["class","page"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.setPage(e.context.$implicit)&&l),l},null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(2,278528,null,0,Js,[Xs],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),ho(3,{activePage:0}),(e()(),fo(4,null,["page ",""]))],function(e,n){var t=e(n,3,0,n.component.currentPage===n.context.$implicit);e(n,2,0,"page",t)},function(e,n){e(n,4,0,n.context.$implicit+1)})}function lN(e){return So(0,[(e()(),eo(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"app-building",[],null,null,null,DI,SI)),vi(2,8503296,null,0,vI,[qf,Vf,am,xy,kE,zf,$f],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,2,0,t.demolishMode,t.combineMode,t.splitMode,t.arrangeMode,n.context.$implicit,t.forestService)},null)}function iN(e){return So(0,[(e()(),eo(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,tN)),vi(3,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),eo(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,lN)),vi(6,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,3,0,t.getPagesNumber()),e(n,6,0,t.getPagedBuildings())},null)}function rN(e){return So(0,[(e()(),eo(0,0,null,null,82,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),eo(2,0,null,null,1,"app-top-menu",[],null,null,null,WI,FI)),vi(3,114688,null,0,LI,[Jf],null,null),(e()(),eo(4,0,null,null,78,"div",[["id","content"]],null,null,null,null,null)),(e()(),eo(5,0,null,null,54,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),eo(6,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.openBuildModal()&&l),l},null,null)),(e()(),fo(-1,null,["Build"])),(e()(),Jr(16777216,null,null,1,null,WA)),vi(9,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,zA)),vi(11,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,YA)),vi(13,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,KA)),vi(15,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(16,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.autoSort()&&l),l},null,null)),(e()(),fo(-1,null,["Sort"])),(e()(),Jr(16777216,null,null,1,null,jA)),vi(19,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,$A)),vi(21,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,QA)),vi(23,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,qA)),vi(25,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(26,0,null,null,33,"div",[["id","side"]],null,null,null,null,null)),(e()(),fo(-1,null,[" Filter:"])),(e()(),eo(28,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(29,0,null,null,30,"div",[["id","filters"]],null,null,null,null,null)),(e()(),eo(30,0,null,null,11,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,31).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,31).onTouched()&&l),"change"===n&&(l=!1!==i.updateFilter(t)&&l),"ngModelChange"===n&&(l=!1!==(i.filterBuilding=t)&&l),l},null,null)),vi(31,16384,null,0,uf,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[uf]),vi(33,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(35,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(36,0,null,null,3,"option",[],null,null,null,null,null)),vi(37,147456,null,0,sf,[dt,St,[2,uf]],{value:[0,"value"]},null),vi(38,147456,null,0,pf,[dt,St,[8,null]],{value:[0,"value"]},null),(e()(),fo(39,null,["",""])),(e()(),Jr(16777216,null,null,1,null,XA)),vi(41,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),eo(42,0,null,null,17,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,43).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,43).onTouched()&&l),"change"===n&&(l=!1!==i.updateFilter2(t)&&l),"ngModelChange"===n&&(l=!1!==(i.filterWorking=t)&&l),l},null,null)),vi(43,16384,null,0,uf,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[uf]),vi(45,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(47,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(48,0,null,null,3,"option",[],null,null,null,null,null)),vi(49,147456,null,0,sf,[dt,St,[2,uf]],{value:[0,"value"]},null),vi(50,147456,null,0,pf,[dt,St,[8,null]],{value:[0,"value"]},null),(e()(),fo(-1,null,["All"])),(e()(),eo(52,0,null,null,3,"option",[],null,null,null,null,null)),vi(53,147456,null,0,sf,[dt,St,[2,uf]],{value:[0,"value"]},null),vi(54,147456,null,0,pf,[dt,St,[8,null]],{value:[0,"value"]},null),(e()(),fo(-1,null,["Working"])),(e()(),eo(56,0,null,null,3,"option",[],null,null,null,null,null)),vi(57,147456,null,0,sf,[dt,St,[2,uf]],{value:[0,"value"]},null),vi(58,147456,null,0,pf,[dt,St,[8,null]],{value:[0,"value"]},null),(e()(),fo(-1,null,["Idle"])),(e()(),eo(60,0,null,null,18,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(61,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(62,114688,null,0,xg,[],{name:[0,"name"]},null),(e()(),Jr(16777216,null,null,1,null,ZA)),vi(64,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,JA)),vi(66,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),fo(-1,null,[" \xa0\xa0 "])),(e()(),eo(68,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(69,114688,null,0,xg,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),fo(70,null,[" "," \xa0\xa0\xa0 "])),(e()(),eo(71,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(72,114688,null,0,xg,[],{name:[0,"name"]},null),(e()(),fo(73,null,[" "," "])),(e()(),eo(74,0,null,null,4,"div",[["id","allControl"]],null,null,null,null,null)),(e()(),eo(75,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.enableAll()&&l),l},null,null)),(e()(),fo(-1,null,["all on"])),(e()(),eo(77,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.disableAll()&&l),l},null,null)),(e()(),fo(-1,null,["all off"])),(e()(),Jr(16777216,null,null,1,null,nN)),vi(80,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,iN)),vi(82,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,3,0),e(n,9,0,!t.demolishMode),e(n,11,0,t.demolishMode),e(n,13,0,!t.arrangeMode),e(n,15,0,t.arrangeMode),e(n,19,0,!t.combineMode&&t.isUrbanPlanningEnabled()&&t.hasCombinableBuildings()),e(n,21,0,t.combineMode),e(n,23,0,!t.splitMode&&t.isUrbanPlanningEnabled()&&t.hasSplittableBuildings()),e(n,25,0,t.splitMode),e(n,33,0,t.filterBuilding),e(n,37,0,t.allBuildings),e(n,38,0,t.allBuildings),e(n,41,0,t.getUniqueBuildingsFromCurrentView()),e(n,45,0,t.filterWorking),e(n,49,0,t.buildingStates.ALL),e(n,50,0,t.buildingStates.ALL),e(n,53,0,t.buildingStates.WORKING),e(n,54,0,t.buildingStates.WORKING),e(n,57,0,t.buildingStates.IDLE),e(n,58,0,t.buildingStates.IDLE),e(n,62,0,"forest"),e(n,64,0,t.getForestSize()>=400),e(n,66,0,t.getForestSize()<400),e(n,69,0,"hammer","Workers","0 0 0 2px"),e(n,72,0,"land"),e(n,80,0,!t.isPagedViewEnabled()),e(n,82,0,t.isPagedViewEnabled())},function(e,n){var t=n.component;e(n,30,0,ii(n,35).ngClassUntouched,ii(n,35).ngClassTouched,ii(n,35).ngClassPristine,ii(n,35).ngClassDirty,ii(n,35).ngClassValid,ii(n,35).ngClassInvalid,ii(n,35).ngClassPending),e(n,39,0,t.getBuildingName(t.allBuildings)),e(n,42,0,ii(n,47).ngClassUntouched,ii(n,47).ngClassTouched,ii(n,47).ngClassPristine,ii(n,47).ngClassDirty,ii(n,47).ngClassValid,ii(n,47).ngClassInvalid,ii(n,47).ngClassPending),e(n,70,0,t.getUnemployed()),e(n,73,0,t.getFreeLand())})}function oN(e){return So(0,[(e()(),eo(0,0,null,null,1,"app-forest",[],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==ii(e,1).onKeydownHandler(t)&&l),l},rN,VA)),vi(1,114688,null,0,BA,[qf,NE,Jf,Xf,GA,zf,kt],null,null)],function(e,n){e(n,1,0)},null)}var uN=jl("app-forest",BA,oN,{},{},[]),sN=function(e){function n(n,t,l,i,r){return e.call(this,t,n,l,r,i,Gu.FIELD,zu.FIELD)||this}return i(n,e),n.ngInjectableDef=Oe({factory:function(){return new n(Ye(am),Ye(CE),Ye(Vf),Ye($S),Ye(NE))},token:n,providedIn:"root"}),n}(PE),aN=function(e){function n(n,t,l,i,r,o,u){var s=e.call(this,n,t,l,r,i,o,u,Gu.FIELD)||this;return s.fieldService=r,s}return i(n,e),n}(ZI),cN=rl({encapsulation:0,styles:[UC,[""]],data:{}});function pN(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleDemolishMode()&&l),l},null,null)),(e()(),fo(-1,null,["Demolish"]))],null,null)}function hN(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleDemolishMode()&&l),l},null,null)),(e()(),fo(-1,null,["Stop"]))],null,null)}function dN(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleArrangeMode()&&l),l},null,null)),(e()(),fo(-1,null,["Arrange"]))],null,null)}function gN(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleArrangeMode()&&l),l},null,null)),(e()(),fo(-1,null,["Stop"]))],null,null)}function fN(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleCombineMode()&&l),l},null,null)),(e()(),fo(-1,null,["Combine"]))],null,null)}function mN(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleCombineMode()&&l),l},null,null)),(e()(),fo(-1,null,["Stop"]))],null,null)}function vN(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleSplitMode()&&l),l},null,null)),(e()(),fo(-1,null,["Split"]))],null,null)}function SN(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleSplitMode()&&l),l},null,null)),(e()(),fo(-1,null,["Stop"]))],null,null)}function EN(e){return So(0,[(e()(),eo(0,0,null,null,3,"option",[],null,null,null,null,null)),vi(1,147456,null,0,sf,[dt,St,[2,uf]],{value:[0,"value"]},null),vi(2,147456,null,0,pf,[dt,St,[8,null]],{value:[0,"value"]},null),(e()(),fo(3,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,3,0,n.component.getBuildingName(n.context.$implicit))})}function yN(e){return So(0,[(e()(),eo(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"app-building",[],null,null,null,DI,SI)),vi(2,8503296,null,0,vI,[qf,Vf,am,xy,kE,zf,$f],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,2,0,t.demolishMode,t.combineMode,t.splitMode,t.arrangeMode,n.context.$implicit,t.fieldService)},null)}function RN(e){return So(0,[(e()(),eo(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),eo(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["Buildings"])),(e()(),eo(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,yN)),vi(6,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,6,0,n.component.getBuildings())},null)}function bN(e){return So(0,[(e()(),eo(0,0,null,null,4,"span",[["class","page"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.setPage(e.context.$implicit)&&l),l},null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(2,278528,null,0,Js,[Xs],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),ho(3,{activePage:0}),(e()(),fo(4,null,["page ",""]))],function(e,n){var t=e(n,3,0,n.component.currentPage===n.context.$implicit);e(n,2,0,"page",t)},function(e,n){e(n,4,0,n.context.$implicit+1)})}function ON(e){return So(0,[(e()(),eo(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"app-building",[],null,null,null,DI,SI)),vi(2,8503296,null,0,vI,[qf,Vf,am,xy,kE,zf,$f],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,2,0,t.demolishMode,t.combineMode,t.splitMode,t.arrangeMode,n.context.$implicit,t.fieldService)},null)}function TN(e){return So(0,[(e()(),eo(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,bN)),vi(3,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),eo(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,ON)),vi(6,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,3,0,t.getPagesNumber()),e(n,6,0,t.getPagedBuildings())},null)}function CN(e){return So(0,[(e()(),eo(0,0,null,null,75,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),eo(2,0,null,null,1,"app-top-menu",[],null,null,null,WI,FI)),vi(3,114688,null,0,LI,[Jf],null,null),(e()(),eo(4,0,null,null,71,"div",[["id","content"]],null,null,null,null,null)),(e()(),eo(5,0,null,null,54,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),eo(6,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.openBuildModal()&&l),l},null,null)),(e()(),fo(-1,null,["Build"])),(e()(),Jr(16777216,null,null,1,null,pN)),vi(9,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,hN)),vi(11,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,dN)),vi(13,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,gN)),vi(15,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(16,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.autoSort()&&l),l},null,null)),(e()(),fo(-1,null,["Sort"])),(e()(),Jr(16777216,null,null,1,null,fN)),vi(19,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,mN)),vi(21,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,vN)),vi(23,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,SN)),vi(25,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(26,0,null,null,33,"div",[["id","side"]],null,null,null,null,null)),(e()(),fo(-1,null,[" Filter:"])),(e()(),eo(28,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(29,0,null,null,30,"div",[["id","filters"]],null,null,null,null,null)),(e()(),eo(30,0,null,null,11,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,31).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,31).onTouched()&&l),"change"===n&&(l=!1!==i.updateFilter(t)&&l),"ngModelChange"===n&&(l=!1!==(i.filterBuilding=t)&&l),l},null,null)),vi(31,16384,null,0,uf,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[uf]),vi(33,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(35,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(36,0,null,null,3,"option",[],null,null,null,null,null)),vi(37,147456,null,0,sf,[dt,St,[2,uf]],{value:[0,"value"]},null),vi(38,147456,null,0,pf,[dt,St,[8,null]],{value:[0,"value"]},null),(e()(),fo(39,null,["",""])),(e()(),Jr(16777216,null,null,1,null,EN)),vi(41,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),eo(42,0,null,null,17,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,43).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,43).onTouched()&&l),"change"===n&&(l=!1!==i.updateFilter2(t)&&l),"ngModelChange"===n&&(l=!1!==(i.filterWorking=t)&&l),l},null,null)),vi(43,16384,null,0,uf,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[uf]),vi(45,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(47,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(48,0,null,null,3,"option",[],null,null,null,null,null)),vi(49,147456,null,0,sf,[dt,St,[2,uf]],{value:[0,"value"]},null),vi(50,147456,null,0,pf,[dt,St,[8,null]],{value:[0,"value"]},null),(e()(),fo(-1,null,["All"])),(e()(),eo(52,0,null,null,3,"option",[],null,null,null,null,null)),vi(53,147456,null,0,sf,[dt,St,[2,uf]],{value:[0,"value"]},null),vi(54,147456,null,0,pf,[dt,St,[8,null]],{value:[0,"value"]},null),(e()(),fo(-1,null,["Working"])),(e()(),eo(56,0,null,null,3,"option",[],null,null,null,null,null)),vi(57,147456,null,0,sf,[dt,St,[2,uf]],{value:[0,"value"]},null),vi(58,147456,null,0,pf,[dt,St,[8,null]],{value:[0,"value"]},null),(e()(),fo(-1,null,["Idle"])),(e()(),eo(60,0,null,null,11,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(61,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(62,114688,null,0,xg,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),fo(63,null,[" "," \xa0\xa0\xa0 "])),(e()(),eo(64,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(65,114688,null,0,xg,[],{name:[0,"name"]},null),(e()(),fo(66,null,[" "," "])),(e()(),eo(67,0,null,null,4,"div",[["id","allControl"]],null,null,null,null,null)),(e()(),eo(68,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.enableAll()&&l),l},null,null)),(e()(),fo(-1,null,["all on"])),(e()(),eo(70,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.disableAll()&&l),l},null,null)),(e()(),fo(-1,null,["all off"])),(e()(),Jr(16777216,null,null,1,null,RN)),vi(73,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,TN)),vi(75,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,3,0),e(n,9,0,!t.demolishMode),e(n,11,0,t.demolishMode),e(n,13,0,!t.arrangeMode&&t.getBuildings().length>1),e(n,15,0,t.arrangeMode),e(n,19,0,!t.combineMode&&t.isUrbanPlanningEnabled()&&t.hasCombinableBuildings()),e(n,21,0,t.combineMode),e(n,23,0,!t.splitMode&&t.isUrbanPlanningEnabled()&&t.hasSplittableBuildings()),e(n,25,0,t.splitMode),e(n,33,0,t.filterBuilding),e(n,37,0,t.allBuildings),e(n,38,0,t.allBuildings),e(n,41,0,t.getUniqueBuildingsFromCurrentView()),e(n,45,0,t.filterWorking),e(n,49,0,t.buildingStates.ALL),e(n,50,0,t.buildingStates.ALL),e(n,53,0,t.buildingStates.WORKING),e(n,54,0,t.buildingStates.WORKING),e(n,57,0,t.buildingStates.IDLE),e(n,58,0,t.buildingStates.IDLE),e(n,62,0,"hammer","Workers","0 0 0 2px"),e(n,65,0,"land"),e(n,73,0,!t.isPagedViewEnabled()),e(n,75,0,t.isPagedViewEnabled())},function(e,n){var t=n.component;e(n,30,0,ii(n,35).ngClassUntouched,ii(n,35).ngClassTouched,ii(n,35).ngClassPristine,ii(n,35).ngClassDirty,ii(n,35).ngClassValid,ii(n,35).ngClassInvalid,ii(n,35).ngClassPending),e(n,39,0,t.getBuildingName(t.allBuildings)),e(n,42,0,ii(n,47).ngClassUntouched,ii(n,47).ngClassTouched,ii(n,47).ngClassPristine,ii(n,47).ngClassDirty,ii(n,47).ngClassValid,ii(n,47).ngClassInvalid,ii(n,47).ngClassPending),e(n,63,0,t.getUnemployed()),e(n,66,0,t.getFreeLand())})}function IN(e){return So(0,[(e()(),eo(0,0,null,null,1,"app-field",[],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==ii(e,1).onKeydownHandler(t)&&l),l},CN,cN)),vi(1,114688,null,0,aN,[qf,NE,Jf,Xf,sN,zf,kt],null,null)],function(e,n){e(n,1,0)},null)}var AN=jl("app-field",aN,IN,{},{},[]),NN=function(e){function n(n,t,l,i,r){return e.call(this,t,n,l,r,i,Gu.MOUNTAINS,zu.MOUNTAINS)||this}return i(n,e),n.ngInjectableDef=Oe({factory:function(){return new n(Ye(am),Ye(CE),Ye(Vf),Ye($S),Ye(NE))},token:n,providedIn:"root"}),n}(PE),_N=function(e){function n(n,t,l,i,r,o,u){var s=e.call(this,n,t,l,r,i,o,u,Gu.MOUNTAINS)||this;return s.mountainsService=r,s}return i(n,e),n.prototype.getMountains=function(){return this.landService.getMountains()},n.prototype.getCoal=function(){return this.landService.getOre(Iu.COAL)},n.prototype.getGoldOre=function(){return this.landService.getOre(Iu.GOLD_ORE)},n.prototype.getSilverOre=function(){return this.landService.getOre(Iu.SILVER_ORE)},n.prototype.getCopperOre=function(){return this.landService.getOre(Iu.COPPER_ORE)},n.prototype.getTinOre=function(){return this.landService.getOre(Iu.TIN_ORE)},n.prototype.getIronOre=function(){return this.landService.getOre(Iu.IRON_ORE)},n}(ZI),wN=rl({encapsulation:0,styles:[UC,[".deposit[_ngcontent-%COMP%]{display:-webkit-inline-box;display:inline-flex;font-size:.8em;height:24px;-webkit-box-align:center;align-items:center}"]],data:{}});function PN(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleDemolishMode()&&l),l},null,null)),(e()(),fo(-1,null,["Demolish"]))],null,null)}function xN(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleDemolishMode()&&l),l},null,null)),(e()(),fo(-1,null,["Stop"]))],null,null)}function kN(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleArrangeMode()&&l),l},null,null)),(e()(),fo(-1,null,["Arrange"]))],null,null)}function MN(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleArrangeMode()&&l),l},null,null)),(e()(),fo(-1,null,["Stop"]))],null,null)}function DN(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleCombineMode()&&l),l},null,null)),(e()(),fo(-1,null,["Combine"]))],null,null)}function LN(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleCombineMode()&&l),l},null,null)),(e()(),fo(-1,null,["Stop"]))],null,null)}function FN(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleSplitMode()&&l),l},null,null)),(e()(),fo(-1,null,["Split"]))],null,null)}function UN(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleSplitMode()&&l),l},null,null)),(e()(),fo(-1,null,["Stop"]))],null,null)}function HN(e){return So(0,[(e()(),eo(0,0,null,null,3,"option",[],null,null,null,null,null)),vi(1,147456,null,0,sf,[dt,St,[2,uf]],{value:[0,"value"]},null),vi(2,147456,null,0,pf,[dt,St,[8,null]],{value:[0,"value"]},null),(e()(),fo(3,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,3,0,n.component.getBuildingName(n.context.$implicit))})}function GN(e){return So(0,[(e()(),eo(0,0,null,null,4,"span",[["class","deposit"]],null,null,null,null,null)),(e()(),fo(-1,null,[" \xa0\xa0\xa0 "])),(e()(),eo(2,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(3,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),fo(4,null,[": "," "]))],function(e,n){e(n,3,0,"coal","resources","coal deposit")},function(e,n){e(n,4,0,n.component.getCoal())})}function BN(e){return So(0,[(e()(),eo(0,0,null,null,4,"span",[["class","deposit"]],null,null,null,null,null)),(e()(),fo(-1,null,[" \xa0\xa0\xa0 "])),(e()(),eo(2,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(3,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),fo(4,null,[": "," "]))],function(e,n){e(n,3,0,"gold_ore","resources","gold deposit")},function(e,n){e(n,4,0,n.component.getGoldOre())})}function VN(e){return So(0,[(e()(),eo(0,0,null,null,4,"span",[["class","deposit"]],null,null,null,null,null)),(e()(),fo(-1,null,[" \xa0\xa0\xa0 "])),(e()(),eo(2,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(3,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),fo(4,null,[": "," "]))],function(e,n){e(n,3,0,"silver_ore","resources","silver deposit")},function(e,n){e(n,4,0,n.component.getSilverOre())})}function WN(e){return So(0,[(e()(),eo(0,0,null,null,4,"span",[["class","deposit"]],null,null,null,null,null)),(e()(),fo(-1,null,[" \xa0\xa0\xa0 "])),(e()(),eo(2,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(3,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),fo(4,null,[": "," "]))],function(e,n){e(n,3,0,"copper_ore","resources","copper deposit")},function(e,n){e(n,4,0,n.component.getCopperOre())})}function zN(e){return So(0,[(e()(),eo(0,0,null,null,4,"span",[["class","deposit"]],null,null,null,null,null)),(e()(),fo(-1,null,[" \xa0\xa0\xa0 "])),(e()(),eo(2,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(3,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),fo(4,null,[": "," "]))],function(e,n){e(n,3,0,"tin_ore","resources","tin deposit")},function(e,n){e(n,4,0,n.component.getTinOre())})}function YN(e){return So(0,[(e()(),eo(0,0,null,null,4,"span",[["class","deposit"]],null,null,null,null,null)),(e()(),fo(-1,null,[" \xa0\xa0\xa0 "])),(e()(),eo(2,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(3,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),fo(4,null,[": "," "]))],function(e,n){e(n,3,0,"iron_ore","resources","iron deposit")},function(e,n){e(n,4,0,n.component.getIronOre())})}function KN(e){return So(0,[(e()(),eo(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"app-building",[],null,null,null,DI,SI)),vi(2,8503296,null,0,vI,[qf,Vf,am,xy,kE,zf,$f],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,2,0,t.demolishMode,t.combineMode,t.splitMode,t.arrangeMode,n.context.$implicit,t.mountainsService)},null)}function jN(e){return So(0,[(e()(),eo(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),eo(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["Buildings"])),(e()(),eo(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,KN)),vi(6,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,6,0,n.component.getBuildings())},null)}function $N(e){return So(0,[(e()(),eo(0,0,null,null,4,"span",[["class","page"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.setPage(e.context.$implicit)&&l),l},null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(2,278528,null,0,Js,[Xs],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),ho(3,{activePage:0}),(e()(),fo(4,null,["page ",""]))],function(e,n){var t=e(n,3,0,n.component.currentPage===n.context.$implicit);e(n,2,0,"page",t)},function(e,n){e(n,4,0,n.context.$implicit+1)})}function QN(e){return So(0,[(e()(),eo(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"app-building",[],null,null,null,DI,SI)),vi(2,8503296,null,0,vI,[qf,Vf,am,xy,kE,zf,$f],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,2,0,t.demolishMode,t.combineMode,t.splitMode,t.arrangeMode,n.context.$implicit,t.mountainsService)},null)}function qN(e){return So(0,[(e()(),eo(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,$N)),vi(3,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),eo(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,QN)),vi(6,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,3,0,t.getPagesNumber()),e(n,6,0,t.getPagedBuildings())},null)}function XN(e){return So(0,[(e()(),eo(0,0,null,null,90,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),eo(2,0,null,null,1,"app-top-menu",[],null,null,null,WI,FI)),vi(3,114688,null,0,LI,[Jf],null,null),(e()(),eo(4,0,null,null,86,"div",[["id","content"]],null,null,null,null,null)),(e()(),eo(5,0,null,null,54,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),eo(6,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.openBuildModal()&&l),l},null,null)),(e()(),fo(-1,null,["Build"])),(e()(),Jr(16777216,null,null,1,null,PN)),vi(9,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,xN)),vi(11,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,kN)),vi(13,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,MN)),vi(15,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(16,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.autoSort()&&l),l},null,null)),(e()(),fo(-1,null,["Sort"])),(e()(),Jr(16777216,null,null,1,null,DN)),vi(19,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,LN)),vi(21,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,FN)),vi(23,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,UN)),vi(25,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(26,0,null,null,33,"div",[["id","side"]],null,null,null,null,null)),(e()(),fo(-1,null,[" Filter:"])),(e()(),eo(28,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(29,0,null,null,30,"div",[["id","filters"]],null,null,null,null,null)),(e()(),eo(30,0,null,null,11,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,31).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,31).onTouched()&&l),"change"===n&&(l=!1!==i.updateFilter(t)&&l),"ngModelChange"===n&&(l=!1!==(i.filterBuilding=t)&&l),l},null,null)),vi(31,16384,null,0,uf,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[uf]),vi(33,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(35,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(36,0,null,null,3,"option",[],null,null,null,null,null)),vi(37,147456,null,0,sf,[dt,St,[2,uf]],{value:[0,"value"]},null),vi(38,147456,null,0,pf,[dt,St,[8,null]],{value:[0,"value"]},null),(e()(),fo(39,null,["",""])),(e()(),Jr(16777216,null,null,1,null,HN)),vi(41,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),eo(42,0,null,null,17,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,43).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,43).onTouched()&&l),"change"===n&&(l=!1!==i.updateFilter2(t)&&l),"ngModelChange"===n&&(l=!1!==(i.filterWorking=t)&&l),l},null,null)),vi(43,16384,null,0,uf,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[uf]),vi(45,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(47,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(48,0,null,null,3,"option",[],null,null,null,null,null)),vi(49,147456,null,0,sf,[dt,St,[2,uf]],{value:[0,"value"]},null),vi(50,147456,null,0,pf,[dt,St,[8,null]],{value:[0,"value"]},null),(e()(),fo(-1,null,["All"])),(e()(),eo(52,0,null,null,3,"option",[],null,null,null,null,null)),vi(53,147456,null,0,sf,[dt,St,[2,uf]],{value:[0,"value"]},null),vi(54,147456,null,0,pf,[dt,St,[8,null]],{value:[0,"value"]},null),(e()(),fo(-1,null,["Working"])),(e()(),eo(56,0,null,null,3,"option",[],null,null,null,null,null)),vi(57,147456,null,0,sf,[dt,St,[2,uf]],{value:[0,"value"]},null),vi(58,147456,null,0,pf,[dt,St,[8,null]],{value:[0,"value"]},null),(e()(),fo(-1,null,["Idle"])),(e()(),eo(60,0,null,null,26,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(61,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(62,114688,null,0,xg,[],{name:[0,"name"]},null),(e()(),fo(63,null,[" "," \xa0\xa0 "])),(e()(),eo(64,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(65,114688,null,0,xg,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),fo(66,null,[" "," \xa0\xa0\xa0 "])),(e()(),eo(67,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(68,114688,null,0,xg,[],{name:[0,"name"]},null),(e()(),fo(69,null,[" "," "])),(e()(),Jr(16777216,null,null,1,null,GN)),vi(71,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,BN)),vi(73,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,VN)),vi(75,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,WN)),vi(77,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,zN)),vi(79,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,YN)),vi(81,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(82,0,null,null,4,"div",[["id","allControl"]],null,null,null,null,null)),(e()(),eo(83,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.enableAll()&&l),l},null,null)),(e()(),fo(-1,null,["all on"])),(e()(),eo(85,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.disableAll()&&l),l},null,null)),(e()(),fo(-1,null,["all off"])),(e()(),Jr(16777216,null,null,1,null,jN)),vi(88,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,qN)),vi(90,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,3,0),e(n,9,0,!t.demolishMode),e(n,11,0,t.demolishMode),e(n,13,0,!t.arrangeMode&&t.getBuildings().length>1),e(n,15,0,t.arrangeMode),e(n,19,0,!t.combineMode&&t.isUrbanPlanningEnabled()&&t.hasCombinableBuildings()),e(n,21,0,t.combineMode),e(n,23,0,!t.splitMode&&t.isUrbanPlanningEnabled()&&t.hasSplittableBuildings()),e(n,25,0,t.splitMode),e(n,33,0,t.filterBuilding),e(n,37,0,t.allBuildings),e(n,38,0,t.allBuildings),e(n,41,0,t.getUniqueBuildingsFromCurrentView()),e(n,45,0,t.filterWorking),e(n,49,0,t.buildingStates.ALL),e(n,50,0,t.buildingStates.ALL),e(n,53,0,t.buildingStates.WORKING),e(n,54,0,t.buildingStates.WORKING),e(n,57,0,t.buildingStates.IDLE),e(n,58,0,t.buildingStates.IDLE),e(n,62,0,"mountains"),e(n,65,0,"hammer","Workers","0 0 0 2px"),e(n,68,0,"land"),e(n,71,0,t.getCoal()>0),e(n,73,0,t.getGoldOre()>0),e(n,75,0,t.getSilverOre()>0),e(n,77,0,t.getCopperOre()>0),e(n,79,0,t.getTinOre()>0),e(n,81,0,t.getIronOre()>0),e(n,88,0,!t.isPagedViewEnabled()),e(n,90,0,t.isPagedViewEnabled())},function(e,n){var t=n.component;e(n,30,0,ii(n,35).ngClassUntouched,ii(n,35).ngClassTouched,ii(n,35).ngClassPristine,ii(n,35).ngClassDirty,ii(n,35).ngClassValid,ii(n,35).ngClassInvalid,ii(n,35).ngClassPending),e(n,39,0,t.getBuildingName(t.allBuildings)),e(n,42,0,ii(n,47).ngClassUntouched,ii(n,47).ngClassTouched,ii(n,47).ngClassPristine,ii(n,47).ngClassDirty,ii(n,47).ngClassValid,ii(n,47).ngClassInvalid,ii(n,47).ngClassPending),e(n,63,0,t.getMountains()),e(n,66,0,t.getUnemployed()),e(n,69,0,t.getFreeLand())})}function ZN(e){return So(0,[(e()(),eo(0,0,null,null,1,"app-mountains",[],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==ii(e,1).onKeydownHandler(t)&&l),l},XN,wN)),vi(1,114688,null,0,_N,[qf,NE,Jf,Xf,NN,zf,kt],null,null)],function(e,n){e(n,1,0)},null)}var JN=jl("app-mountains",_N,ZN,{},{},[]),e_=function(e){function n(n,t,l,i,r,o){var u=e.call(this,t,n,l,i,r,Gu.PLATEAU,zu.PLATEAU)||this;return u.gameService=o,u}return i(n,e),n.prototype.reset=function(n,t){n?e.prototype.reset.call(this,n,t):t?this.buildings=[]:(this.buildings=this.buildings.filter(function(e){return e.isFinished()}),this.buildings.length>0&&this.gameService.enable(_u.PLATEAU),this.getBuildings().forEach(function(e){return e.verifyWonderEffects()}))},n.ngInjectableDef=Oe({factory:function(){return new n(Ye(am),Ye(CE),Ye(Vf),Ye(NE),Ye($S),Ye(Jf))},token:n,providedIn:"root"}),n}(PE),n_=function(e){function n(n,t,l,i,r,o,u,s){var a=e.call(this,n,t,l,o,i,u,s,Gu.PLATEAU)||this;return a.techService=r,a.plateauService=o,a}return i(n,e),n.prototype.areWonderBuildingsResearched=function(){return!is.production||this.techService.isResearched(Nu.WONDER_BUILDINGS)},n}(ZI),t_=rl({encapsulation:0,styles:[UC,["#allControl[_ngcontent-%COMP%]{margin-left:auto;width:108px;display:inline-block}#allControl[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:4px}"]],data:{}});function l_(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.openBuildModal()&&l),l},null,null)),(e()(),fo(-1,null,["Build"]))],null,null)}function i_(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleArrangeMode()&&l),l},null,null)),(e()(),fo(-1,null,["Arrange"]))],null,null)}function r_(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleArrangeMode()&&l),l},null,null)),(e()(),fo(-1,null,["Stop"]))],null,null)}function o_(e){return So(0,[(e()(),eo(0,0,null,null,3,"option",[],null,null,null,null,null)),vi(1,147456,null,0,sf,[dt,St,[2,uf]],{value:[0,"value"]},null),vi(2,147456,null,0,pf,[dt,St,[8,null]],{value:[0,"value"]},null),(e()(),fo(3,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,3,0,n.component.getBuildingName(n.context.$implicit))})}function u_(e){return So(0,[(e()(),eo(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"app-building",[],null,null,null,DI,SI)),vi(2,8503296,null,0,vI,[qf,Vf,am,xy,kE,zf,$f],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,2,0,t.demolishMode,t.combineMode,t.splitMode,t.arrangeMode,n.context.$implicit,t.plateauService)},null)}function s_(e){return So(0,[(e()(),eo(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),eo(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["Buildings"])),(e()(),eo(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,u_)),vi(6,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,6,0,n.component.getBuildings())},null)}function a_(e){return So(0,[(e()(),eo(0,0,null,null,4,"span",[["class","page"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.setPage(e.context.$implicit)&&l),l},null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(2,278528,null,0,Js,[Xs],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),ho(3,{activePage:0}),(e()(),fo(4,null,["page ",""]))],function(e,n){var t=e(n,3,0,n.component.currentPage===n.context.$implicit);e(n,2,0,"page",t)},function(e,n){e(n,4,0,n.context.$implicit+1)})}function c_(e){return So(0,[(e()(),eo(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"app-building",[],null,null,null,DI,SI)),vi(2,8503296,null,0,vI,[qf,Vf,am,xy,kE,zf,$f],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,2,0,t.demolishMode,t.combineMode,t.splitMode,t.arrangeMode,n.context.$implicit,t.plateauService)},null)}function p_(e){return So(0,[(e()(),eo(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,a_)),vi(3,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),eo(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,c_)),vi(6,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,3,0,t.getPagesNumber()),e(n,6,0,t.getPagedBuildings())},null)}function h_(e){return So(0,[(e()(),eo(0,0,null,null,56,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),eo(2,0,null,null,1,"app-top-menu",[],null,null,null,WI,FI)),vi(3,114688,null,0,LI,[Jf],null,null),(e()(),eo(4,0,null,null,52,"div",[["id","content"]],null,null,null,null,null)),(e()(),eo(5,0,null,null,40,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,l_)),vi(7,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,i_)),vi(9,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,r_)),vi(11,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(12,0,null,null,33,"div",[["id","side"]],null,null,null,null,null)),(e()(),fo(-1,null,[" Filter:"])),(e()(),eo(14,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(15,0,null,null,30,"div",[["id","filters"]],null,null,null,null,null)),(e()(),eo(16,0,null,null,11,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,17).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,17).onTouched()&&l),"change"===n&&(l=!1!==i.updateFilter(t)&&l),"ngModelChange"===n&&(l=!1!==(i.filterBuilding=t)&&l),l},null,null)),vi(17,16384,null,0,uf,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[uf]),vi(19,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(21,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(22,0,null,null,3,"option",[],null,null,null,null,null)),vi(23,147456,null,0,sf,[dt,St,[2,uf]],{value:[0,"value"]},null),vi(24,147456,null,0,pf,[dt,St,[8,null]],{value:[0,"value"]},null),(e()(),fo(25,null,["",""])),(e()(),Jr(16777216,null,null,1,null,o_)),vi(27,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),eo(28,0,null,null,17,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,29).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,29).onTouched()&&l),"change"===n&&(l=!1!==i.updateFilter2(t)&&l),"ngModelChange"===n&&(l=!1!==(i.filterWorking=t)&&l),l},null,null)),vi(29,16384,null,0,uf,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[uf]),vi(31,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(33,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(34,0,null,null,3,"option",[],null,null,null,null,null)),vi(35,147456,null,0,sf,[dt,St,[2,uf]],{value:[0,"value"]},null),vi(36,147456,null,0,pf,[dt,St,[8,null]],{value:[0,"value"]},null),(e()(),fo(-1,null,["All"])),(e()(),eo(38,0,null,null,3,"option",[],null,null,null,null,null)),vi(39,147456,null,0,sf,[dt,St,[2,uf]],{value:[0,"value"]},null),vi(40,147456,null,0,pf,[dt,St,[8,null]],{value:[0,"value"]},null),(e()(),fo(-1,null,["Working"])),(e()(),eo(42,0,null,null,3,"option",[],null,null,null,null,null)),vi(43,147456,null,0,sf,[dt,St,[2,uf]],{value:[0,"value"]},null),vi(44,147456,null,0,pf,[dt,St,[8,null]],{value:[0,"value"]},null),(e()(),fo(-1,null,["Idle"])),(e()(),eo(46,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(47,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(48,114688,null,0,xg,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),fo(49,null,[" "," \xa0\xa0\xa0 "])),(e()(),eo(50,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(51,114688,null,0,xg,[],{name:[0,"name"]},null),(e()(),fo(52,null,[" "," "])),(e()(),Jr(16777216,null,null,1,null,s_)),vi(54,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,p_)),vi(56,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,3,0),e(n,7,0,t.areWonderBuildingsResearched()),e(n,9,0,!t.arrangeMode&&t.getBuildings().length>1),e(n,11,0,t.arrangeMode),e(n,19,0,t.filterBuilding),e(n,23,0,t.allBuildings),e(n,24,0,t.allBuildings),e(n,27,0,t.getUniqueBuildingsFromCurrentView()),e(n,31,0,t.filterWorking),e(n,35,0,t.buildingStates.ALL),e(n,36,0,t.buildingStates.ALL),e(n,39,0,t.buildingStates.WORKING),e(n,40,0,t.buildingStates.WORKING),e(n,43,0,t.buildingStates.IDLE),e(n,44,0,t.buildingStates.IDLE),e(n,48,0,"hammer","Workers","0 0 0 2px"),e(n,51,0,"land"),e(n,54,0,!t.isPagedViewEnabled()),e(n,56,0,t.isPagedViewEnabled())},function(e,n){var t=n.component;e(n,16,0,ii(n,21).ngClassUntouched,ii(n,21).ngClassTouched,ii(n,21).ngClassPristine,ii(n,21).ngClassDirty,ii(n,21).ngClassValid,ii(n,21).ngClassInvalid,ii(n,21).ngClassPending),e(n,25,0,t.getBuildingName(t.allBuildings)),e(n,28,0,ii(n,33).ngClassUntouched,ii(n,33).ngClassTouched,ii(n,33).ngClassPristine,ii(n,33).ngClassDirty,ii(n,33).ngClassValid,ii(n,33).ngClassInvalid,ii(n,33).ngClassPending),e(n,49,0,t.getUnemployed()),e(n,52,0,t.getFreeLand())})}function d_(e){return So(0,[(e()(),eo(0,0,null,null,1,"app-field",[],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==ii(e,1).onKeydownHandler(t)&&l),l},h_,t_)),vi(1,114688,null,0,n_,[qf,NE,Jf,Xf,jy,e_,zf,kt],null,null)],function(e,n){e(n,1,0)},null)}var g_=jl("app-field",n_,d_,{},{},[]),f_=function(e){function n(n,t,l,i,r){return e.call(this,t,n,l,r,i,Gu.SEA,zu.SEA)||this}return i(n,e),n.ngInjectableDef=Oe({factory:function(){return new n(Ye(am),Ye(CE),Ye(Vf),Ye($S),Ye(NE))},token:n,providedIn:"root"}),n}(PE),m_=function(e){function n(n,t,l,i,r,o,u,s){var a=e.call(this,n,t,l,r,i,o,u,Gu.SEA)||this;return a.seaService=r,a.navyService=s,a}return i(n,e),n.prototype.getHarbourSpace=function(){return this.navyService.getHarbourSpace()},n.prototype.getMaxHarbourSpace=function(){return this.navyService.getMaxHarbourSpace()},n}(ZI),v_=rl({encapsulation:0,styles:[UC,[""]],data:{}});function S_(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleDemolishMode()&&l),l},null,null)),(e()(),fo(-1,null,["Demolish"]))],null,null)}function E_(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleDemolishMode()&&l),l},null,null)),(e()(),fo(-1,null,["Stop"]))],null,null)}function y_(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleArrangeMode()&&l),l},null,null)),(e()(),fo(-1,null,["Arrange"]))],null,null)}function R_(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleArrangeMode()&&l),l},null,null)),(e()(),fo(-1,null,["Stop"]))],null,null)}function b_(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleCombineMode()&&l),l},null,null)),(e()(),fo(-1,null,["Combine"]))],null,null)}function O_(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleCombineMode()&&l),l},null,null)),(e()(),fo(-1,null,["Stop"]))],null,null)}function T_(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleSplitMode()&&l),l},null,null)),(e()(),fo(-1,null,["Split"]))],null,null)}function C_(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleSplitMode()&&l),l},null,null)),(e()(),fo(-1,null,["Stop"]))],null,null)}function I_(e){return So(0,[(e()(),eo(0,0,null,null,3,"option",[],null,null,null,null,null)),vi(1,147456,null,0,sf,[dt,St,[2,uf]],{value:[0,"value"]},null),vi(2,147456,null,0,pf,[dt,St,[8,null]],{value:[0,"value"]},null),(e()(),fo(3,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,3,0,n.component.getBuildingName(n.context.$implicit))})}function A_(e){return So(0,[(e()(),eo(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"app-building",[],null,null,null,DI,SI)),vi(2,8503296,null,0,vI,[qf,Vf,am,xy,kE,zf,$f],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,2,0,t.demolishMode,t.combineMode,t.splitMode,t.arrangeMode,n.context.$implicit,t.seaService)},null)}function N_(e){return So(0,[(e()(),eo(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),eo(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["Buildings"])),(e()(),eo(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,A_)),vi(6,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,6,0,n.component.getBuildings())},null)}function __(e){return So(0,[(e()(),eo(0,0,null,null,4,"span",[["class","page"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.setPage(e.context.$implicit)&&l),l},null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(2,278528,null,0,Js,[Xs],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),ho(3,{activePage:0}),(e()(),fo(4,null,["page ",""]))],function(e,n){var t=e(n,3,0,n.component.currentPage===n.context.$implicit);e(n,2,0,"page",t)},function(e,n){e(n,4,0,n.context.$implicit+1)})}function w_(e){return So(0,[(e()(),eo(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"app-building",[],null,null,null,DI,SI)),vi(2,8503296,null,0,vI,[qf,Vf,am,xy,kE,zf,$f],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,2,0,t.demolishMode,t.combineMode,t.splitMode,t.arrangeMode,n.context.$implicit,t.seaService)},null)}function P_(e){return So(0,[(e()(),eo(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,__)),vi(3,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),eo(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,w_)),vi(6,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,3,0,t.getPagesNumber()),e(n,6,0,t.getPagedBuildings())},null)}function x_(e){return So(0,[(e()(),eo(0,0,null,null,78,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),eo(2,0,null,null,1,"app-top-menu",[],null,null,null,WI,FI)),vi(3,114688,null,0,LI,[Jf],null,null),(e()(),eo(4,0,null,null,74,"div",[["id","content"]],null,null,null,null,null)),(e()(),eo(5,0,null,null,54,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),eo(6,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.openBuildModal()&&l),l},null,null)),(e()(),fo(-1,null,["Build"])),(e()(),Jr(16777216,null,null,1,null,S_)),vi(9,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,E_)),vi(11,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,y_)),vi(13,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,R_)),vi(15,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(16,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.autoSort()&&l),l},null,null)),(e()(),fo(-1,null,["Sort"])),(e()(),Jr(16777216,null,null,1,null,b_)),vi(19,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,O_)),vi(21,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,T_)),vi(23,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,C_)),vi(25,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(26,0,null,null,33,"div",[["id","side"]],null,null,null,null,null)),(e()(),fo(-1,null,[" Filter:"])),(e()(),eo(28,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(29,0,null,null,30,"div",[["id","filters"]],null,null,null,null,null)),(e()(),eo(30,0,null,null,11,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,31).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,31).onTouched()&&l),"change"===n&&(l=!1!==i.updateFilter(t)&&l),"ngModelChange"===n&&(l=!1!==(i.filterBuilding=t)&&l),l},null,null)),vi(31,16384,null,0,uf,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[uf]),vi(33,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(35,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(36,0,null,null,3,"option",[],null,null,null,null,null)),vi(37,147456,null,0,sf,[dt,St,[2,uf]],{value:[0,"value"]},null),vi(38,147456,null,0,pf,[dt,St,[8,null]],{value:[0,"value"]},null),(e()(),fo(39,null,["",""])),(e()(),Jr(16777216,null,null,1,null,I_)),vi(41,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),eo(42,0,null,null,17,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,43).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,43).onTouched()&&l),"change"===n&&(l=!1!==i.updateFilter2(t)&&l),"ngModelChange"===n&&(l=!1!==(i.filterWorking=t)&&l),l},null,null)),vi(43,16384,null,0,uf,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[uf]),vi(45,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(47,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(48,0,null,null,3,"option",[],null,null,null,null,null)),vi(49,147456,null,0,sf,[dt,St,[2,uf]],{value:[0,"value"]},null),vi(50,147456,null,0,pf,[dt,St,[8,null]],{value:[0,"value"]},null),(e()(),fo(-1,null,["All"])),(e()(),eo(52,0,null,null,3,"option",[],null,null,null,null,null)),vi(53,147456,null,0,sf,[dt,St,[2,uf]],{value:[0,"value"]},null),vi(54,147456,null,0,pf,[dt,St,[8,null]],{value:[0,"value"]},null),(e()(),fo(-1,null,["Working"])),(e()(),eo(56,0,null,null,3,"option",[],null,null,null,null,null)),vi(57,147456,null,0,sf,[dt,St,[2,uf]],{value:[0,"value"]},null),vi(58,147456,null,0,pf,[dt,St,[8,null]],{value:[0,"value"]},null),(e()(),fo(-1,null,["Idle"])),(e()(),eo(60,0,null,null,14,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(61,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(62,114688,null,0,xg,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),fo(63,null,[" "," \xa0\xa0\xa0 "])),(e()(),eo(64,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(65,114688,null,0,xg,[],{name:[0,"name"]},null),(e()(),fo(66,null,[" "," \xa0\xa0\xa0 "])),(e()(),eo(67,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(68,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),fo(69,null,[" ","/"," "])),(e()(),eo(70,0,null,null,4,"div",[["id","allControl"]],null,null,null,null,null)),(e()(),eo(71,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.enableAll()&&l),l},null,null)),(e()(),fo(-1,null,["all on"])),(e()(),eo(73,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.disableAll()&&l),l},null,null)),(e()(),fo(-1,null,["all off"])),(e()(),Jr(16777216,null,null,1,null,N_)),vi(76,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,P_)),vi(78,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,3,0),e(n,9,0,!t.demolishMode),e(n,11,0,t.demolishMode),e(n,13,0,!t.arrangeMode&&t.getBuildings().length>1),e(n,15,0,t.arrangeMode),e(n,19,0,!t.combineMode&&t.isUrbanPlanningEnabled()&&t.hasCombinableBuildings()),e(n,21,0,t.combineMode),e(n,23,0,!t.splitMode&&t.isUrbanPlanningEnabled()&&t.hasSplittableBuildings()),e(n,25,0,t.splitMode),e(n,33,0,t.filterBuilding),e(n,37,0,t.allBuildings),e(n,38,0,t.allBuildings),e(n,41,0,t.getUniqueBuildingsFromCurrentView()),e(n,45,0,t.filterWorking),e(n,49,0,t.buildingStates.ALL),e(n,50,0,t.buildingStates.ALL),e(n,53,0,t.buildingStates.WORKING),e(n,54,0,t.buildingStates.WORKING),e(n,57,0,t.buildingStates.IDLE),e(n,58,0,t.buildingStates.IDLE),e(n,62,0,"hammer","Workers","0 0 0 2px"),e(n,65,0,"land"),e(n,68,0,"port","sea"),e(n,76,0,!t.isPagedViewEnabled()),e(n,78,0,t.isPagedViewEnabled())},function(e,n){var t=n.component;e(n,30,0,ii(n,35).ngClassUntouched,ii(n,35).ngClassTouched,ii(n,35).ngClassPristine,ii(n,35).ngClassDirty,ii(n,35).ngClassValid,ii(n,35).ngClassInvalid,ii(n,35).ngClassPending),e(n,39,0,t.getBuildingName(t.allBuildings)),e(n,42,0,ii(n,47).ngClassUntouched,ii(n,47).ngClassTouched,ii(n,47).ngClassPristine,ii(n,47).ngClassDirty,ii(n,47).ngClassValid,ii(n,47).ngClassInvalid,ii(n,47).ngClassPending),e(n,63,0,t.getUnemployed()),e(n,66,0,t.getFreeLand()),e(n,69,0,t.getHarbourSpace(),t.getMaxHarbourSpace())})}function k_(e){return So(0,[(e()(),eo(0,0,null,null,1,"app-sea",[],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==ii(e,1).onKeydownHandler(t)&&l),l},x_,v_)),vi(1,114688,null,0,m_,[qf,NE,Jf,Xf,f_,zf,kt,_O],null,null)],function(e,n){e(n,1,0)},null)}var M_=jl("app-sea",m_,k_,{},{},[]),D_=function(){function e(e){this.gameService=e}return e.prototype.ngOnInit=function(){},e.prototype.isForestManagementEnabled=function(){return this.gameService.isEnabled(_u.FORESTER)},e}(),L_=rl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{display:-webkit-box;display:flex;height:100%;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}.entry[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:auto;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:100%;text-align:center;border-right:2px solid #000;cursor:pointer;text-decoration:none;color:#000;font-size:1em}.entry[_ngcontent-%COMP%]:last-of-type{border:none}.entry.active[_ngcontent-%COMP%]{background:var(--active-colour)}"]],data:{}});function F_(e){return So(0,[(e()(),eo(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/management/forestM"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==ii(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),vi(1,671744,[[6,4]],0,Qd,[jd,Fh,Ds],{routerLink:[0,"routerLink"]},null),vi(2,1720320,null,2,Xd,[jd,dt,St,[2,$d],[2,Qd]],{routerLinkActive:[0,"routerLinkActive"]},null),ro(603979776,5,{links:1}),ro(603979776,6,{linksWithHrefs:1}),(e()(),fo(-1,null,["Forest"]))],function(e,n){e(n,1,0,"/management/forestM"),e(n,2,0,"active")},function(e,n){e(n,0,0,ii(n,1).target,ii(n,1).href)})}function U_(e){return So(0,[(e()(),eo(0,0,null,null,20,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/management/general"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==ii(e,2).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),vi(2,671744,[[2,4]],0,Qd,[jd,Fh,Ds],{routerLink:[0,"routerLink"]},null),vi(3,1720320,null,2,Xd,[jd,dt,St,[2,$d],[2,Qd]],{routerLinkActive:[0,"routerLinkActive"]},null),ro(603979776,1,{links:1}),ro(603979776,2,{linksWithHrefs:1}),(e()(),fo(-1,null,["General"])),(e()(),eo(7,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/management/effects"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==ii(e,8).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),vi(8,671744,[[4,4]],0,Qd,[jd,Fh,Ds],{routerLink:[0,"routerLink"]},null),vi(9,1720320,null,2,Xd,[jd,dt,St,[2,$d],[2,Qd]],{routerLinkActive:[0,"routerLinkActive"]},null),ro(603979776,3,{links:1}),ro(603979776,4,{linksWithHrefs:1}),(e()(),fo(-1,null,["Effects"])),(e()(),Jr(16777216,null,null,1,null,F_)),vi(14,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(15,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/management/summary"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==ii(e,16).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),vi(16,671744,[[8,4]],0,Qd,[jd,Fh,Ds],{routerLink:[0,"routerLink"]},null),vi(17,1720320,null,2,Xd,[jd,dt,St,[2,$d],[2,Qd]],{routerLinkActive:[0,"routerLinkActive"]},null),ro(603979776,7,{links:1}),ro(603979776,8,{linksWithHrefs:1}),(e()(),fo(-1,null,["Summary"]))],function(e,n){var t=n.component;e(n,2,0,"/management/general"),e(n,3,0,"active"),e(n,8,0,"/management/effects"),e(n,9,0,"active"),e(n,14,0,t.isForestManagementEnabled()),e(n,16,0,"/management/summary"),e(n,17,0,"active")},function(e,n){e(n,1,0,ii(n,2).target,ii(n,2).href),e(n,7,0,ii(n,8).target,ii(n,8).href),e(n,15,0,ii(n,16).target,ii(n,16).href)})}var H_=function(){function e(e,n,t){this.managementService=e,this.resourcesService=n,this.gameService=t}return e.prototype.ngOnInit=function(){},e.prototype.getRations=function(){return this.managementService.getRations()},e.prototype.changeFoodValue=function(e){this.managementService.setRations(e.target.value)},e.prototype.changeClothesValue=function(e){this.managementService.setClothesRations(e.target.value)},e.prototype.changeAlcoholValue=function(e){this.managementService.setAlcoholRations(e.target.value)},e.prototype.getClothesRations=function(){return this.managementService.getClothesRations()},e.prototype.getAlcoholRations=function(){return this.managementService.getAlcoholRations()},e.prototype.updateFurClothes=function(){this.managementService.toggleFurClothes()},e.prototype.getFurClothes=function(){return this.managementService.getFurClothes()},e.prototype.updateFoodNutrition=function(){this.managementService.toggleFoodNutrition()},e.prototype.getFoodNutrition=function(){return this.managementService.getFoodNutrition()},e.prototype.updateComplexWorkers=function(){this.managementService.toggleComplexWorkers()},e.prototype.getComplexWorkers=function(){return this.managementService.getComplexWorkers()},e.prototype.isHREnabled=function(){return this.gameService.isEnabled(_u.HUMAN_RESOURCES)},e.prototype.getSecondHeaderRow=function(){return this.managementService.getSecondHeaderRow()},e.prototype.updateSecondHeaderRow=function(){this.managementService.toggleSecondHeaderRow()},e.prototype.getShowFreeWorkers=function(){return this.managementService.getShowFreeWorkers()},e.prototype.updateShowFreeWorkers=function(){this.managementService.toggleShowFreeWorkers()},e.prototype.getShowPopulation=function(){return this.managementService.getShowPopulation()},e.prototype.updateShowPopulation=function(){this.managementService.toggleShowPopulation()},e.prototype.getFoodLines=function(){return this.managementService.getFoodPriority()},e.prototype.getResourceName=function(e){return Vu.prepareResourceName(e)},e.prototype.up=function(e,n){this.managementService.up(e,n)},e.prototype.down=function(e,n){this.managementService.down(e,n)},e.prototype.getShowResearchProgress=function(){return this.managementService.getShowResearchProgress()},e.prototype.updateShowResearchProgress=function(){this.managementService.toggleShowResearchProgress()},e.prototype.getShowFaith=function(){return this.managementService.getShowFaith()},e.prototype.updateShowFaith=function(){this.managementService.toggleShowFaith()},e.prototype.isFaithUnlocked=function(){return this.gameService.isEnabled(_u.RELIGION)},e.prototype.getLogFiredWorkers=function(){return this.managementService.getLogFiredWorkers()},e.prototype.updateLogFiredWorkers=function(){this.managementService.toggleLogFiredWorkers()},e.prototype.getDefaultWorkshopResearch=function(){return this.managementService.getDefaultWorkshopResearch()},e.prototype.updateDefaultWorkshopResearch=function(){this.managementService.toggleDefaultWorkshopResearch()},e.prototype.getDefaultGathererFood=function(){return this.managementService.getDefaultGathererFood()},e.prototype.updateDefaultGathererFood=function(){this.managementService.toggleDefaultGathererFood()},e.prototype.getSwitchHunterFromTaming=function(){return this.managementService.getSwitchHunterFromTaming()},e.prototype.updateSwitchHunterFromTaming=function(){this.managementService.toggleSwitchHunterFromTaming()},e.prototype.getPlowInSummer=function(){return this.managementService.getPlowInSummer()},e.prototype.updatePlowInSummer=function(){this.managementService.togglePlowInSummer()},e.prototype.getLogAutoTrade=function(){return this.managementService.getLogAutoTrade()},e.prototype.updateLogAutoTrade=function(){this.managementService.toggleLogAutoTrade()},e.prototype.getShowRaw=function(){return this.managementService.getShowRaw()},e.prototype.updateShowRaw=function(){this.managementService.toggleShowRaw()},e.prototype.getShowProcessed=function(){return this.managementService.getShowProcessed()},e.prototype.updateShowProcessed=function(){this.managementService.toggleShowProcessed()},e.prototype.getShowFood=function(){return this.managementService.getShowFood()},e.prototype.updateShowFood=function(){this.managementService.toggleShowFood()},e.prototype.getShowTools=function(){return this.managementService.getShowTools()},e.prototype.updateShowTools=function(){this.managementService.toggleShowTools()},e.prototype.getLogSickness=function(){return this.managementService.getLogSickness()},e.prototype.updateLogSickness=function(){this.managementService.toggleLogSickness()},e.prototype.getLogMerchant=function(){return this.managementService.getLogMerchant()},e.prototype.updateLogMerchant=function(){this.managementService.toggleLogMerchant()},e}(),G_=rl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:99%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#content[_ngcontent-%COMP%]{margin:.5%;height:94%;overflow-y:auto}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}.label[_ngcontent-%COMP%]{display:inline-block;width:80px}.slidecontainer[_ngcontent-%COMP%]{display:inline-block;width:150px}.slider[_ngcontent-%COMP%]{-webkit-appearance:none;width:100%;height:10px;border-radius:5px;background:var(--passive-colour);outline:0;opacity:.7;-webkit-transition:opacity .2s;transition:opacity .2s}.slider[_ngcontent-%COMP%]:hover{opacity:1}.slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:15px;height:15px;border-radius:50%;background:var(--active-colour);cursor:pointer}.slider[_ngcontent-%COMP%]::-moz-range-thumb{width:15px;height:15px;border-radius:50%;background:var(--active-colour);cursor:pointer}app-icon[_ngcontent-%COMP%]{display:inline-block}#arrows[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.arrow[_ngcontent-%COMP%]{font-size:.7em;width:12px;display:inline-block}.priorityLine[_ngcontent-%COMP%]{height:34px}.entry[_ngcontent-%COMP%]{display:inline-block;margin:2px}.item[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}#index[_ngcontent-%COMP%]{display:inline-block;width:10px}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center}"]],data:{}});function B_(e){return So(0,[(e()(),eo(0,0,null,null,3,null,null,null,null,null,null,null)),(e()(),eo(1,0,null,null,0,"input",[["id","workManagement"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.updateComplexWorkers()&&l),l},null,null)),(e()(),eo(2,0,null,null,1,"label",[["for","workManagement"]],null,null,null,null,null)),(e()(),fo(-1,null,["Enable automated work management for some buildings"]))],null,function(e,n){e(n,1,0,n.component.getComplexWorkers())})}function V_(e){return So(0,[(e()(),eo(0,0,null,null,8,"div",[["class","entry"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,7,"span",[["class","item"]],null,null,null,null,null)),(e()(),eo(2,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(3,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),eo(4,0,null,null,4,"span",[["id","arrows"]],null,null,null,null,null)),(e()(),eo(5,0,null,null,1,"button",[["class","arrow"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.up(e.context.$implicit,e.parent.context.index)&&l),l},null,null)),(e()(),fo(-1,null,["\u2191"])),(e()(),eo(7,0,null,null,1,"button",[["class","arrow"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.down(e.context.$implicit,e.parent.context.index)&&l),l},null,null)),(e()(),fo(-1,null,["\u2193"]))],function(e,n){e(n,3,0,n.component.getResourceName(n.context.$implicit),"resources")},null)}function W_(e){return So(0,[(e()(),eo(0,0,null,null,4,"div",[["class","priorityLine icon"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"span",[["id","index"]],null,null,null,null,null)),(e()(),fo(2,null,["",""])),(e()(),Jr(16777216,null,null,1,null,V_)),vi(4,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,4,0,n.context.$implicit)},function(e,n){e(n,2,0,n.context.index+1)})}function z_(e){return So(0,[(e()(),eo(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,0,"input",[["id","showFaith"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.updateShowFaith()&&l),l},null,null)),(e()(),eo(2,0,null,null,1,"label",[["for","showFaith"]],null,null,null,null,null)),(e()(),fo(-1,null,["Show faith in the header"])),(e()(),eo(4,0,null,null,0,"br",[],null,null,null,null,null))],null,function(e,n){e(n,1,0,n.component.getShowFaith())})}function Y_(e){return So(0,[(e()(),eo(0,0,null,null,113,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),eo(2,0,null,null,1,"app-management-top-menu",[],null,null,null,U_,L_)),vi(3,114688,null,0,D_,[Jf],null,null),(e()(),eo(4,0,null,null,109,"div",[["id","content"]],null,null,null,null,null)),(e()(),eo(5,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),eo(6,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["General Management"])),(e()(),eo(8,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["Rations"])),(e()(),eo(10,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(11,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),eo(12,0,null,null,1,"span",[["class","label"]],null,null,null,null,null)),(e()(),fo(13,null,["food: ",""])),(e()(),eo(14,0,null,null,1,"div",[["class","slidecontainer"]],null,null,null,null,null)),(e()(),eo(15,0,null,null,0,"input",[["class","slider"],["max","4"],["min","1"],["type","range"],["value","2"]],[[8,"value",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.changeFoodValue(t)&&l),l},null,null)),(e()(),eo(16,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),eo(17,0,null,null,1,"span",[["class","label"]],null,null,null,null,null)),(e()(),fo(18,null,["clothes: ",""])),(e()(),eo(19,0,null,null,1,"div",[["class","slidecontainer"]],null,null,null,null,null)),(e()(),eo(20,0,null,null,0,"input",[["class","slider"],["max","4"],["min","1"],["type","range"],["value","2"]],[[8,"value",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.changeClothesValue(t)&&l),l},null,null)),(e()(),eo(21,0,null,null,1,"span",[["class","label"]],null,null,null,null,null)),(e()(),fo(22,null,["alcohol: ",""])),(e()(),eo(23,0,null,null,1,"div",[["class","slidecontainer"]],null,null,null,null,null)),(e()(),eo(24,0,null,null,0,"input",[["class","slider"],["max","4"],["min","1"],["type","range"],["value","1"]],[[8,"value",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.changeAlcoholValue(t)&&l),l},null,null)),(e()(),eo(25,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(26,0,null,null,0,"input",[["id","furClothes"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.updateFurClothes()&&l),l},null,null)),(e()(),eo(27,0,null,null,1,"label",[["for","furClothes"]],null,null,null,null,null)),(e()(),fo(-1,null,["Allow fur when no clothes are available"])),(e()(),eo(29,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,B_)),vi(31,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(32,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(33,0,null,null,3,null,null,null,null,null,null,null)),(e()(),eo(34,0,null,null,0,"input",[["id","defaultWorkshopResearch"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.updateDefaultWorkshopResearch()&&l),l},null,null)),(e()(),eo(35,0,null,null,1,"label",[["for","defaultWorkshopResearch"]],null,null,null,null,null)),(e()(),fo(-1,null,["Workshops start with research mode (on) or crafting (off)"])),(e()(),eo(37,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(38,0,null,null,3,null,null,null,null,null,null,null)),(e()(),eo(39,0,null,null,0,"input",[["id","defaultGathererFood"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.updateDefaultGathererFood()&&l),l},null,null)),(e()(),eo(40,0,null,null,1,"label",[["for","defaultGathererFood"]],null,null,null,null,null)),(e()(),fo(-1,null,["Gatherers start with food mode (on) or resources (off)"])),(e()(),eo(42,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(43,0,null,null,3,null,null,null,null,null,null,null)),(e()(),eo(44,0,null,null,0,"input",[["id","switchHunterFromTaming"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.updateSwitchHunterFromTaming()&&l),l},null,null)),(e()(),eo(45,0,null,null,1,"label",[["for","switchHunterFromTaming"]],null,null,null,null,null)),(e()(),fo(-1,null,["If enabled hunters won't stop taming animals even if pastures are full"])),(e()(),eo(47,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(48,0,null,null,3,null,null,null,null,null,null,null)),(e()(),eo(49,0,null,null,0,"input",[["id","plowInSummer"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.updatePlowInSummer()&&l),l},null,null)),(e()(),eo(50,0,null,null,1,"label",[["for","plowInSummer"]],null,null,null,null,null)),(e()(),fo(-1,null,["Allow fields to be plowed in summer"])),(e()(),eo(52,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),fo(-1,null,["food priority"])),(e()(),eo(54,0,null,null,2,"div",[["id","foodPriorityList"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,W_)),vi(56,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),eo(57,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),fo(-1,null,["Log management"])),(e()(),eo(59,0,null,null,0,"input",[["id","logMerchant"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.updateLogMerchant()&&l),l},null,null)),(e()(),eo(60,0,null,null,1,"label",[["for","logMerchant"]],null,null,null,null,null)),(e()(),fo(-1,null,["Log message when a new merchant has arrived"])),(e()(),eo(62,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(63,0,null,null,0,"input",[["id","logFiredWorkers"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.updateLogFiredWorkers()&&l),l},null,null)),(e()(),eo(64,0,null,null,1,"label",[["for","logFiredWorkers"]],null,null,null,null,null)),(e()(),fo(-1,null,["Log message when worker is removed from building"])),(e()(),eo(66,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(67,0,null,null,0,"input",[["id","logAutoTrade"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.updateLogAutoTrade()&&l),l},null,null)),(e()(),eo(68,0,null,null,1,"label",[["for","logAutoTrade"]],null,null,null,null,null)),(e()(),fo(-1,null,["Log message when auto trade has been performed"])),(e()(),eo(70,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(71,0,null,null,0,"input",[["id","logSickness"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.updateLogSickness()&&l),l},null,null)),(e()(),eo(72,0,null,null,1,"label",[["for","logSickness"]],null,null,null,null,null)),(e()(),fo(-1,null,["Log sickness related events"])),(e()(),eo(74,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(75,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),fo(-1,null,["Header management"])),(e()(),eo(77,0,null,null,0,"input",[["id","secondHeaderRow"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.updateSecondHeaderRow()&&l),l},null,null)),(e()(),eo(78,0,null,null,1,"label",[["for","secondHeaderRow"]],null,null,null,null,null)),(e()(),fo(-1,null,["Display two rows in the header (resources will be displayed in second row)"])),(e()(),eo(80,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(81,0,null,null,0,"input",[["id","foodNutrition"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.updateFoodNutrition()&&l),l},null,null)),(e()(),eo(82,0,null,null,1,"label",[["for","foodNutrition"]],null,null,null,null,null)),(e()(),fo(-1,null,["Show food nutrition in the header"])),(e()(),eo(84,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(85,0,null,null,0,"input",[["id","showRaw"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.updateShowRaw()&&l),l},null,null)),(e()(),eo(86,0,null,null,1,"label",[["for","showRaw"]],null,null,null,null,null)),(e()(),fo(-1,null,["Show raw resources tooltip in the header"])),(e()(),eo(88,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(89,0,null,null,0,"input",[["id","showProcessed"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.updateShowProcessed()&&l),l},null,null)),(e()(),eo(90,0,null,null,1,"label",[["for","showProcessed"]],null,null,null,null,null)),(e()(),fo(-1,null,["Show processed resources tooltip in the header"])),(e()(),eo(92,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(93,0,null,null,0,"input",[["id","showFood"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.updateShowFood()&&l),l},null,null)),(e()(),eo(94,0,null,null,1,"label",[["for","showFood"]],null,null,null,null,null)),(e()(),fo(-1,null,["Show food resources tooltip in the header"])),(e()(),eo(96,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(97,0,null,null,0,"input",[["id","showTools"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.updateShowTools()&&l),l},null,null)),(e()(),eo(98,0,null,null,1,"label",[["for","showTools"]],null,null,null,null,null)),(e()(),fo(-1,null,["Show tools resources tooltip in the header"])),(e()(),eo(100,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(101,0,null,null,0,"input",[["id","showPopulation"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.updateShowPopulation()&&l),l},null,null)),(e()(),eo(102,0,null,null,1,"label",[["for","showPopulation"]],null,null,null,null,null)),(e()(),fo(-1,null,["Show population in the header"])),(e()(),eo(104,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(105,0,null,null,0,"input",[["id","showFreeWorkers"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.updateShowFreeWorkers()&&l),l},null,null)),(e()(),eo(106,0,null,null,1,"label",[["for","showFreeWorkers"]],null,null,null,null,null)),(e()(),fo(-1,null,["Show free workers in the header"])),(e()(),eo(108,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,z_)),vi(110,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(111,0,null,null,0,"input",[["id","showResearchProgress"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.updateShowResearchProgress()&&l),l},null,null)),(e()(),eo(112,0,null,null,1,"label",[["for","showResearchProgress"]],null,null,null,null,null)),(e()(),fo(-1,null,["Show research progress in the header"]))],function(e,n){var t=n.component;e(n,3,0),e(n,31,0,t.isHREnabled()),e(n,56,0,t.getFoodLines()),e(n,110,0,t.isFaithUnlocked())},function(e,n){var t=n.component;e(n,13,0,.5*t.getRations()),e(n,15,0,t.getRations()),e(n,18,0,t.getClothesRations()),e(n,20,0,t.getClothesRations()),e(n,22,0,t.getAlcoholRations()),e(n,24,0,t.getAlcoholRations()),e(n,26,0,t.getFurClothes()),e(n,34,0,t.getDefaultWorkshopResearch()),e(n,39,0,t.getDefaultGathererFood()),e(n,44,0,t.getSwitchHunterFromTaming()),e(n,49,0,t.getPlowInSummer()),e(n,59,0,t.getLogMerchant()),e(n,63,0,t.getLogFiredWorkers()),e(n,67,0,t.getLogAutoTrade()),e(n,71,0,t.getLogSickness()),e(n,77,0,t.getSecondHeaderRow()),e(n,81,0,t.getFoodNutrition()),e(n,85,0,t.getShowRaw()),e(n,89,0,t.getShowProcessed()),e(n,93,0,t.getShowFood()),e(n,97,0,t.getShowTools()),e(n,101,0,t.getShowPopulation()),e(n,105,0,t.getShowFreeWorkers()),e(n,111,0,t.getShowResearchProgress())})}function K_(e){return So(0,[(e()(),eo(0,0,null,null,1,"app-management",[],null,null,null,Y_,G_)),vi(1,114688,null,0,H_,[xy,am,Jf],null,null)],function(e,n){e(n,1,0)},null)}var j_=jl("app-management",H_,K_,{},{},[]),$_=function(){function e(e){this.effectsService=e}return e.prototype.ngOnInit=function(){},e.prototype.getBuildingsEffects=function(){return this.effectsService.getBuildingEffects().filter(function(e){return!e.isBuff()}).sort(function(e,n){return e.isPermanent()&&!n.isPermanent()?-1:e.isPermanent()&&n.isPermanent()?0:!e.isPermanent()&&n.isPermanent()?1:void 0})},e.prototype.getArmyEffects=function(){return this.effectsService.getArmyEffects()},e.prototype.getBuildingName=function(e){return Vu.prepareBuildingName(e)},e.prototype.getTroopName=function(e){return Vu.prepareTroopName(e)},e.prototype.getNatureEffects=function(){return this.effectsService.getNatureEffects()},e}(),Q_=rl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:99%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#content[_ngcontent-%COMP%]{margin:.5%;height:94%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#buildingEffects[_ngcontent-%COMP%]{height:40%;border:1px solid #000}#armyEffects[_ngcontent-%COMP%]{height:33%;border:1px solid #000}#natureEffects[_ngcontent-%COMP%]{height:15%;border:1px solid #000}.rows[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;text-align:center;height:90.5%;overflow-y:auto}.natureRows[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;text-align:center;height:79%;overflow-y:auto}.row[_ngcontent-%COMP%]{display:-webkit-box;display:flex;border:1px solid #000;margin:3px}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{border-right:none}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){-webkit-box-flex:0;flex:0 0 7%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){-webkit-box-flex:0;flex:0 0 35%}.natureRow[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){-webkit-box-flex:0;flex:0 0 50%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){-webkit-box-flex:0;flex:0 0 30%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(4){-webkit-box-flex:0;flex:0 0 13%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(5){-webkit-box-flex:0;flex:0 0 15%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:auto;border-right:1px solid #000}.headers[_ngcontent-%COMP%]{margin:3px 3px 0;display:-webkit-box;display:flex;width:98.3%;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;text-align:center;font-size:.9em}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border:1px solid #000;border-left:none}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-of-type{border-left:1px solid #000}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){-webkit-box-flex:0;flex:0 0 7%}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){-webkit-box-flex:0;flex:0 0 35%}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){-webkit-box-flex:0;flex:0 0 30%}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(4){-webkit-box-flex:0;flex:0 0 13%}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(5){-webkit-box-flex:0;flex:0 0 15%}.natureHeaders[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){-webkit-box-flex:0;flex:0 0 50%}.positive[_ngcontent-%COMP%]{color:var(--positive-colour)}.negative[_ngcontent-%COMP%]{color:var(--negative-colour)}"]],data:{}});function q_(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[["class","positive"]],null,null,null,null,null)),(e()(),fo(1,null,["+","% "]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.effect)})}function X_(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[["class","negative"]],null,null,null,null,null)),(e()(),fo(1,null,["","% "]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.effect)})}function Z_(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(1,null,[""," "]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.duration)})}function J_(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["permanent"]))],null,null)}function ew(e){return So(0,[(e()(),eo(0,0,null,null,14,"div",[["class","row"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(2,null,["","."])),(e()(),eo(3,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(4,null,["",""])),(e()(),eo(5,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(6,null,["",""])),(e()(),Jr(16777216,null,null,1,null,q_)),vi(8,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,X_)),vi(10,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,Z_)),vi(12,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,J_)),vi(14,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,8,0,n.context.$implicit.effect>=0),e(n,10,0,n.context.$implicit.effect<0),e(n,12,0,n.context.$implicit.duration>0),e(n,14,0,n.context.$implicit.duration<0)},function(e,n){var t=n.component;e(n,2,0,n.context.index+1),e(n,4,0,n.context.$implicit.name),e(n,6,0,t.getBuildingName(n.context.$implicit.building))})}function nw(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[["class","positive"]],null,null,null,null,null)),(e()(),fo(1,null,["+","% "]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.effect)})}function tw(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[["class","negative"]],null,null,null,null,null)),(e()(),fo(1,null,["","% "]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.effect)})}function lw(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(1,null,[""," "]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.duration)})}function iw(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["permanent"]))],null,null)}function rw(e){return So(0,[(e()(),eo(0,0,null,null,14,"div",[["class","row"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(2,null,["","."])),(e()(),eo(3,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(4,null,["",""])),(e()(),eo(5,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(6,null,["",""])),(e()(),Jr(16777216,null,null,1,null,nw)),vi(8,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,tw)),vi(10,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,lw)),vi(12,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,iw)),vi(14,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,8,0,n.context.$implicit.effect>=0),e(n,10,0,n.context.$implicit.effect<0),e(n,12,0,n.context.$implicit.duration>0),e(n,14,0,n.context.$implicit.duration<0)},function(e,n){var t=n.component;e(n,2,0,n.context.index+1),e(n,4,0,n.context.$implicit.name),e(n,6,0,t.getTroopName(n.context.$implicit.troop))})}function ow(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[["class","positive"]],null,null,null,null,null)),(e()(),fo(1,null,["+","% "]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.effect)})}function uw(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[["class","negative"]],null,null,null,null,null)),(e()(),fo(1,null,["","% "]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.effect)})}function sw(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(1,null,[""," "]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.duration)})}function aw(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["permanent"]))],null,null)}function cw(e){return So(0,[(e()(),eo(0,0,null,null,12,"div",[["class","row natureRow"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(2,null,["","."])),(e()(),eo(3,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(4,null,["",""])),(e()(),Jr(16777216,null,null,1,null,ow)),vi(6,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,uw)),vi(8,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,sw)),vi(10,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,aw)),vi(12,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,6,0,n.context.$implicit.effect>=0),e(n,8,0,n.context.$implicit.effect<0),e(n,10,0,n.context.$implicit.duration>0),e(n,12,0,n.context.$implicit.duration<0)},function(e,n){e(n,2,0,n.context.index+1),e(n,4,0,n.context.$implicit.name)})}function pw(e){return So(0,[(e()(),eo(0,0,null,null,56,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),eo(2,0,null,null,1,"app-management-top-menu",[],null,null,null,U_,L_)),vi(3,114688,null,0,D_,[Jf],null,null),(e()(),eo(4,0,null,null,52,"div",[["id","content"]],null,null,null,null,null)),(e()(),eo(5,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),eo(6,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["Effects Management"])),(e()(),eo(8,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["Buildings effects"])),(e()(),eo(10,0,null,null,14,"div",[["id","buildingEffects"]],null,null,null,null,null)),(e()(),eo(11,0,null,null,10,"div",[["class","headers"]],null,null,null,null,null)),(e()(),eo(12,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["#"])),(e()(),eo(14,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["name"])),(e()(),eo(16,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["building"])),(e()(),eo(18,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["effect"])),(e()(),eo(20,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["duration"])),(e()(),eo(22,0,null,null,2,"div",[["class","rows"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,ew)),vi(24,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),eo(25,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["Army effects"])),(e()(),eo(27,0,null,null,14,"div",[["id","armyEffects"]],null,null,null,null,null)),(e()(),eo(28,0,null,null,10,"div",[["class","headers"]],null,null,null,null,null)),(e()(),eo(29,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["#"])),(e()(),eo(31,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["name"])),(e()(),eo(33,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["troop"])),(e()(),eo(35,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["effect"])),(e()(),eo(37,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["duration"])),(e()(),eo(39,0,null,null,2,"div",[["class","rows"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,rw)),vi(41,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),eo(42,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["Nature effects"])),(e()(),eo(44,0,null,null,12,"div",[["id","natureEffects"]],null,null,null,null,null)),(e()(),eo(45,0,null,null,8,"div",[["class","headers natureHeaders"]],null,null,null,null,null)),(e()(),eo(46,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["#"])),(e()(),eo(48,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["name"])),(e()(),eo(50,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["effect"])),(e()(),eo(52,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["duration"])),(e()(),eo(54,0,null,null,2,"div",[["class","natureRows"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,cw)),vi(56,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,3,0),e(n,24,0,t.getBuildingsEffects()),e(n,41,0,t.getArmyEffects()),e(n,56,0,t.getNatureEffects())},null)}function hw(e){return So(0,[(e()(),eo(0,0,null,null,1,"app-effects-management",[],null,null,null,pw,Q_)),vi(1,114688,null,0,$_,[IE],null,null)],function(e,n){e(n,1,0)},null)}var dw=jl("app-effects-management",$_,hw,{},{},[]),gw=function(){function e(e){this.landService=e}return e.prototype.ngOnInit=function(){},e.prototype.getForestSize=function(){return this.landService.getForest()},e.prototype.getLandSize=function(){return this.landService.getLand()},e.prototype.getForestOptions=function(){return this.landService.getForestOptions()},e}(),fw=rl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:99%}#content[_ngcontent-%COMP%]{margin:.5%;height:94%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}.foresterLabel[_ngcontent-%COMP%]{display:inline-block;width:160px}input[type=number][_ngcontent-%COMP%]{width:6ch}"]],data:{}});function mw(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.getForestSize())})}function vw(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[["class","critical"]],null,null,null,null,null)),(e()(),fo(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.getForestSize())})}function Sw(e){return So(0,[(e()(),eo(0,0,null,null,65,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),eo(2,0,null,null,1,"app-management-top-menu",[],null,null,null,U_,L_)),vi(3,114688,null,0,D_,[Jf],null,null),(e()(),eo(4,0,null,null,61,"div",[["id","content"]],null,null,null,null,null)),(e()(),eo(5,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),eo(6,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["Forest Management"])),(e()(),eo(8,0,null,null,10,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(9,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(10,114688,null,0,xg,[],{name:[0,"name"]},null),(e()(),Jr(16777216,null,null,1,null,mw)),vi(12,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,vw)),vi(14,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),fo(-1,null,[" \xa0\xa0 "])),(e()(),eo(16,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(17,114688,null,0,xg,[],{name:[0,"name"]},null),(e()(),fo(18,null,[" "," "])),(e()(),eo(19,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),fo(-1,null,[" Plant trees if:"])),(e()(),eo(21,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(22,0,null,null,5,"input",[["id","forest"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,23).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==ii(e,23).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.getForestOptions().forestSizeRuleEnabled=t)&&l),l},null,null)),vi(23,16384,null,0,Fg,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[Fg]),vi(25,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(27,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(28,0,null,null,1,"label",[["class","foresterLabel"],["for","forest"]],null,null,null,null,null)),(e()(),fo(-1,null,["forest smaller than"])),(e()(),eo(30,0,null,null,6,"input",[["id","forestSize"],["min","0"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,31)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,31).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,31)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,31)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==ii(e,32).onChange(t.target.value)&&l),"input"===n&&(l=!1!==ii(e,32).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,32).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.getForestOptions().forestSizeRule=t)&&l),l},null,null)),vi(31,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),vi(32,16384,null,0,Jg,[St,dt],null,null),Ei(1024,null,Lg,function(e,n){return[e,n]},[Hg,Jg]),vi(34,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(36,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(37,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(38,0,null,null,5,"input",[["id","land"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,39).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==ii(e,39).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.getForestOptions().landSizeRuleEnabled=t)&&l),l},null,null)),vi(39,16384,null,0,Fg,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[Fg]),vi(41,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(43,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(44,0,null,null,1,"label",[["class","foresterLabel"],["for","land"]],null,null,null,null,null)),(e()(),fo(-1,null,["free land bigger than"])),(e()(),eo(46,0,null,null,6,"input",[["id","landSize"],["min","0"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,47)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,47).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,47)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,47)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==ii(e,48).onChange(t.target.value)&&l),"input"===n&&(l=!1!==ii(e,48).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,48).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.getForestOptions().landSizeRule=t)&&l),l},null,null)),vi(47,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),vi(48,16384,null,0,Jg,[St,dt],null,null),Ei(1024,null,Lg,function(e,n){return[e,n]},[Hg,Jg]),vi(50,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(52,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(53,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(54,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),fo(-1,null,[" Cut trees if:"])),(e()(),eo(56,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(57,0,null,null,1,"label",[["for","forestSize2"]],null,null,null,null,null)),(e()(),fo(-1,null,["Forest bigger than "])),(e()(),eo(59,0,null,null,6,"input",[["id","forestSize2"],["min","0"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,60)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,60).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,60)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,60)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==ii(e,61).onChange(t.target.value)&&l),"input"===n&&(l=!1!==ii(e,61).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,61).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.getForestOptions().forestSizeReserved=t)&&l),l},null,null)),vi(60,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),vi(61,16384,null,0,Jg,[St,dt],null,null),Ei(1024,null,Lg,function(e,n){return[e,n]},[Hg,Jg]),vi(63,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(65,16384,null,0,zg,[[4,Wg]],null,null)],function(e,n){var t=n.component;e(n,3,0),e(n,10,0,"forest"),e(n,12,0,t.getForestSize()>=400),e(n,14,0,t.getForestSize()<400),e(n,17,0,"land"),e(n,25,0,t.getForestOptions().forestSizeRuleEnabled),e(n,34,0,t.getForestOptions().forestSizeRule),e(n,41,0,t.getForestOptions().landSizeRuleEnabled),e(n,50,0,t.getForestOptions().landSizeRule),e(n,63,0,t.getForestOptions().forestSizeReserved)},function(e,n){e(n,18,0,n.component.getLandSize()),e(n,22,0,ii(n,27).ngClassUntouched,ii(n,27).ngClassTouched,ii(n,27).ngClassPristine,ii(n,27).ngClassDirty,ii(n,27).ngClassValid,ii(n,27).ngClassInvalid,ii(n,27).ngClassPending),e(n,30,0,ii(n,36).ngClassUntouched,ii(n,36).ngClassTouched,ii(n,36).ngClassPristine,ii(n,36).ngClassDirty,ii(n,36).ngClassValid,ii(n,36).ngClassInvalid,ii(n,36).ngClassPending),e(n,38,0,ii(n,43).ngClassUntouched,ii(n,43).ngClassTouched,ii(n,43).ngClassPristine,ii(n,43).ngClassDirty,ii(n,43).ngClassValid,ii(n,43).ngClassInvalid,ii(n,43).ngClassPending),e(n,46,0,ii(n,52).ngClassUntouched,ii(n,52).ngClassTouched,ii(n,52).ngClassPristine,ii(n,52).ngClassDirty,ii(n,52).ngClassValid,ii(n,52).ngClassInvalid,ii(n,52).ngClassPending),e(n,59,0,ii(n,65).ngClassUntouched,ii(n,65).ngClassTouched,ii(n,65).ngClassPristine,ii(n,65).ngClassDirty,ii(n,65).ngClassValid,ii(n,65).ngClassInvalid,ii(n,65).ngClassPending)})}function Ew(e){return So(0,[(e()(),eo(0,0,null,null,1,"app-forest-management",[],null,null,null,Sw,fw)),vi(1,114688,null,0,gw,[NE],null,null)],function(e,n){e(n,1,0)},null)}var yw=jl("app-forest-management",gw,Ew,{},{},[]),Rw=function(){function e(e,n){this.servicesService=e,this.gameService=n,this.region=Gu.VILLAGE,this.sorting=0}return e.prototype.ngOnInit=function(){},e.prototype.getBuildings=function(e){var n=[];return this.servicesService.getServiceByRegion(e).getBuildings().forEach(function(e){var t=n.find(function(n){return n.building===e.getBuildingType()});t?(t.count+=1,t.size+=e.getSize(),e.isWorking()&&(t.working+=1)):n.push({building:e.getBuildingType(),count:1,size:e.getSize(),working:e.isWorking()?1:0})}),n.sort(0===this.sorting?function(e,n){return e.building-n.building}:1===this.sorting?function(e,n){return n.count-e.count}:function(e,n){return e.count-n.count})},e.prototype.getBuildingName=function(e){return Vu.prepareBuildingName(e)},e.prototype.getRegions=function(){var e=[Gu.VILLAGE];return this.gameService.isEnabled(_u.FORT)&&e.push(Gu.FORT),e.push(Gu.FOREST),this.gameService.isEnabled(_u.FIELD)&&e.push(Gu.FIELD),this.gameService.isEnabled(_u.MOUNTAINS)&&e.push(Gu.MOUNTAINS),this.gameService.isEnabled(_u.PLATEAU)&&e.push(Gu.PLATEAU),this.gameService.isEnabled(_u.SEA)&&e.push(Gu.SEA),e},e.prototype.getRegionName=function(e){return Vu.prepareRegionName(e)},e}(),bw=rl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:99%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#content[_ngcontent-%COMP%]{margin:.5%;height:94%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}.headers[_ngcontent-%COMP%]{margin:3px 3px 0;display:-webkit-box;display:flex;width:98.3%;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;text-align:center;font-size:.9em;font-weight:700}.rows[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;text-align:center;height:90.5%;overflow-y:auto}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border:1px solid #000;border-left:none}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-of-type{border-left:1px solid #000}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){-webkit-box-flex:0;flex:0 0 7%}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){-webkit-box-flex:0;flex:0 0 30%}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){-webkit-box-flex:0;flex:0 0 15%}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(4){-webkit-box-flex:0;flex:0 0 18%}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(5), .headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(6){-webkit-box-flex:0;flex:0 0 15%}.row[_ngcontent-%COMP%]{display:-webkit-box;display:flex;border:1px solid #000;margin:3px}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{border-right:none}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){-webkit-box-flex:0;flex:0 0 7%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){-webkit-box-flex:0;flex:0 0 30%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){-webkit-box-flex:0;flex:0 0 15%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(4){-webkit-box-flex:0;flex:0 0 18%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(5), .row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(6){-webkit-box-flex:0;flex:0 0 15%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:auto;border-right:1px solid #000}"]],data:{}});function Ow(e){return So(0,[(e()(),eo(0,0,null,null,3,"option",[],null,null,null,null,null)),vi(1,147456,null,0,sf,[dt,St,[2,uf]],{ngValue:[0,"ngValue"]},null),vi(2,147456,null,0,pf,[dt,St,[8,null]],{ngValue:[0,"ngValue"]},null),(e()(),fo(3,null,[" "," "]))],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,3,0,n.component.getRegionName(n.context.$implicit))})}function Tw(e){return So(0,[(e()(),eo(0,0,null,null,12,"div",[["class","row"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(2,null,["","."])),(e()(),eo(3,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(4,null,["",""])),(e()(),eo(5,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(6,null,["",""])),(e()(),eo(7,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(8,null,["",""])),(e()(),eo(9,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(10,null,["",""])),(e()(),eo(11,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(12,null,["",""]))],null,function(e,n){var t=n.component;e(n,2,0,n.context.index+1),e(n,4,0,t.getBuildingName(n.context.$implicit.building)),e(n,6,0,n.context.$implicit.count),e(n,8,0,n.context.$implicit.size),e(n,10,0,n.context.$implicit.working),e(n,12,0,n.context.$implicit.count-n.context.$implicit.working)})}function Cw(e){return So(0,[(e()(),eo(0,0,null,null,64,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),eo(2,0,null,null,1,"app-management-top-menu",[],null,null,null,U_,L_)),vi(3,114688,null,0,D_,[Jf],null,null),(e()(),eo(4,0,null,null,60,"div",[["id","content"]],null,null,null,null,null)),(e()(),eo(5,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),eo(6,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["Summary page"])),(e()(),eo(8,0,null,null,6,"input",[["id","sortAlphabetically"],["name","sorting"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,9)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,9).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,9)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,9)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==ii(e,10).onChange()&&l),"blur"===n&&(l=!1!==ii(e,10).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.sorting=t)&&l),l},null,null)),vi(9,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),vi(10,212992,null,0,nf,[St,dt,ef,Xe],{name:[0,"name"],value:[1,"value"]},null),Ei(1024,null,Lg,function(e,n){return[e,n]},[Hg,nf]),vi(12,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(14,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(15,0,null,null,1,"label",[["for","sortAlphabetically"]],null,null,null,null,null)),(e()(),fo(-1,null,["sort alphabetically"])),(e()(),eo(17,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(18,0,null,null,6,"input",[["id","sortByBiggest"],["name","sorting"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,19)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,19).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,19)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,19)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==ii(e,20).onChange()&&l),"blur"===n&&(l=!1!==ii(e,20).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.sorting=t)&&l),l},null,null)),vi(19,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),vi(20,212992,null,0,nf,[St,dt,ef,Xe],{name:[0,"name"],value:[1,"value"]},null),Ei(1024,null,Lg,function(e,n){return[e,n]},[Hg,nf]),vi(22,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(24,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(25,0,null,null,1,"label",[["for","sortByBiggest"]],null,null,null,null,null)),(e()(),fo(-1,null,["sort by most buildings"])),(e()(),eo(27,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(28,0,null,null,6,"input",[["id","sortBySmallest"],["name","sorting"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,29)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,29).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,29)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,29)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==ii(e,30).onChange()&&l),"blur"===n&&(l=!1!==ii(e,30).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.sorting=t)&&l),l},null,null)),vi(29,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),vi(30,212992,null,0,nf,[St,dt,ef,Xe],{name:[0,"name"],value:[1,"value"]},null),Ei(1024,null,Lg,function(e,n){return[e,n]},[Hg,nf]),vi(32,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(34,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(35,0,null,null,1,"label",[["for","sortBySmallest"]],null,null,null,null,null)),(e()(),fo(-1,null,["sort by least buildings"])),(e()(),eo(37,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(38,0,null,null,9,"h3",[],null,null,null,null,null)),(e()(),eo(39,0,null,null,7,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,40).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,40).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.region=t)&&l),l},null,null)),vi(40,16384,null,0,uf,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[uf]),vi(42,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(44,16384,null,0,zg,[[4,Wg]],null,null),(e()(),Jr(16777216,null,null,1,null,Ow)),vi(46,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),fo(-1,null,[" Buildings "])),(e()(),eo(48,0,null,null,16,"div",[["id","buildingEffects"]],null,null,null,null,null)),(e()(),eo(49,0,null,null,12,"div",[["class","headers"]],null,null,null,null,null)),(e()(),eo(50,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["#"])),(e()(),eo(52,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["building"])),(e()(),eo(54,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["count"])),(e()(),eo(56,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["total land"])),(e()(),eo(58,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["working"])),(e()(),eo(60,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["idle"])),(e()(),eo(62,0,null,null,2,"div",[["class","rows"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,Tw)),vi(64,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,3,0),e(n,10,0,"sorting",0),e(n,12,0,"sorting",t.sorting),e(n,20,0,"sorting",1),e(n,22,0,"sorting",t.sorting),e(n,30,0,"sorting",2),e(n,32,0,"sorting",t.sorting),e(n,42,0,t.region),e(n,46,0,t.getRegions()),e(n,64,0,t.getBuildings(t.region))},function(e,n){e(n,8,0,ii(n,14).ngClassUntouched,ii(n,14).ngClassTouched,ii(n,14).ngClassPristine,ii(n,14).ngClassDirty,ii(n,14).ngClassValid,ii(n,14).ngClassInvalid,ii(n,14).ngClassPending),e(n,18,0,ii(n,24).ngClassUntouched,ii(n,24).ngClassTouched,ii(n,24).ngClassPristine,ii(n,24).ngClassDirty,ii(n,24).ngClassValid,ii(n,24).ngClassInvalid,ii(n,24).ngClassPending),e(n,28,0,ii(n,34).ngClassUntouched,ii(n,34).ngClassTouched,ii(n,34).ngClassPristine,ii(n,34).ngClassDirty,ii(n,34).ngClassValid,ii(n,34).ngClassInvalid,ii(n,34).ngClassPending),e(n,39,0,ii(n,44).ngClassUntouched,ii(n,44).ngClassTouched,ii(n,44).ngClassPristine,ii(n,44).ngClassDirty,ii(n,44).ngClassValid,ii(n,44).ngClassInvalid,ii(n,44).ngClassPending)})}function Iw(e){return So(0,[(e()(),eo(0,0,null,null,1,"app-summary",[],null,null,null,Cw,bw)),vi(1,114688,null,0,Rw,[Vf,Jf],null,null)],function(e,n){e(n,1,0)},null)}var Aw=jl("app-summary",Rw,Iw,{},{},[]),Nw=function(){function e(e,n,t){this.rd=e,this.el=n,this.modalService=t,this.param="",this.element=n.nativeElement}return e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){var e=this,n=this;this.id&&(document.body.appendChild(this.element),this.rd.listen(this.element,"click",function(t){var l=t.target;null===l.closest(".modal-body")&&"BUTTON"!==l.tagName&&"path"!==l.tagName&&"IMG"!==l.tagName&&"tutorial-modal"!==n.id&&(e.modalService.sendConfirmationResult(!1),e.modalService.sendCloseSignal(ju.ALL),n.close())}),this.modalService.add(this))},e.prototype.ngOnDestroy=function(){this.modalService.remove(this.id),this.element.remove()},e.prototype.open=function(){this.element.style.display="block",document.body.classList.add("modal-open")},e.prototype.openTutorialWindow=function(e){var n=this.element.querySelector(".modal-body");n.style.position="absolute",n.style.margin="0",n.style.width=e.width,n.style.top=e.top,n.style.left=e.left,this.element.style.display="block",document.body.classList.add("modal-open")},e.prototype.close=function(){this.element.style.display="none",document.body.classList.remove("modal-open")},e.prototype.onKeydownHandler=function(e){"tutorial-modal"!==this.id&&(this.modalService.sendConfirmationResult(!1),this.modalService.sendCloseSignal(ju.ALL),this.close())},e}(),_w=rl({encapsulation:2,styles:[],data:{}});function ww(e){return So(0,[ro(671088640,1,{body:1}),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:8,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:null,childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:null,ngContent:{index:0}}],null,null)}var Pw=function(){function e(e,n,t,l,i,r,o,u,s,a,c,p,h,d){this.buildingFactoryService=e,this.servicesService=n,this.modalService=t,this.logService=l,this.resourcesService=i,this.landService=r,this.villageService=o,this.fortService=u,this.fieldService=s,this.forestService=a,this.mountainsService=c,this.seaService=p,this.plateauService=h,this.gameService=d,this.filterText="",this.multiplier=1,this.buildings=new Map,this.regions=Gu,this.buildings.set(Gu.VILLAGE,[[new Pv,[],0],[new xv,[_u.HOUSE],0],[new XS,[_u.LONGHOUSE],0],[new cE,[_u.TUDOR_HOUSE],0],[new aS,[_u.BAKERY],0],[new SS,[_u.TAILOR],0],[new qv,[],0],[new uE,[_u.KITCHEN],0],[new qS,[_u.SPECIALISED_PRODUCTION],0],[new Xv,[],0],[new FS,[_u.MARKETPLACE],0],[new OS,[_u.TAVERN],1],[new nS,[_u.SHRINE],1],[new HS,[_u.CHURCH],1]]),this.buildings.set(Gu.FOREST,[[new Mv,[],0],[new hE,[_u.PRODUCTION_ZONES],0],[new Yv,[],0],[new iE,[_u.PRODUCTION_ZONES],0],[new eS,[_u.HUNTER],0],[new fS,[_u.TANNERY],0],[new Fv,[_u.FORESTER],0],[new Bv,[_u.SAWMILL],0],[new JS,[_u.PAPER_MILL],0]]),this.buildings.set(Gu.FORT,[[new hS,[_u.BARRACKS],0],[new gS,[_u.BARRACKS],0],[new ZS,[_u.BARRACKS],1],[new mS,[_u.STOCKADE],1],[new yS,[_u.WOODEN_TOWER],1],[new RS,[_u.STONE_TOWER],1],[new jS,[_u.STASH],3]]),this.buildings.set(Gu.FIELD,[[new lS,[_u.FARM],0],[new sS,[_u.WINDMILL],0],[new rS,[_u.FARM],0],[new uS,[_u.FARM],0],[new _S,[_u.PASTURE],0],[new PS,[_u.BUTCHER],0],[new vS,[_u.COTTON_MILL],0],[new ES,[_u.BREWERY],0],[new aE,[_u.CLAY_PIT],0],[new bS,[_u.WINERY],0],[new rE,[_u.BARN],0]]),this.buildings.set(Gu.MOUNTAINS,[[new jv,[],0],[new TS,[_u.GEOLOGIST],0],[new CS,[],0],[new AS,[_u.PIT_MINE],0],[new US,[_u.SMITHY],1],[new xS,[_u.MINT],0],[new nE,[_u.DEEP_MINE],0]]),this.buildings.set(Gu.PLATEAU,[[new LS,[],1],[new GS,[],1],[new BS,[],1],[new VS,[],1],[new zS,[],1],[new YS,[],1],[new KS,[],1],[new WS,[],1]]),this.buildings.set(Gu.SEA,[[new pS,[_u.FISHERS_HUT],0],[new fE,[_u.BOAT_BUILDER],0],[new yE,[_u.BOAT_BUILDER],0],[new mE,[_u.HARBOUR],0],[new bE,[_u.SHIPYARD],0],[new SE,[_u.LIGHTHOUSE],1],[new TE,[_u.CARTOGRAPHER],0]])}return e.prototype.ngOnInit=function(){var e=this;this.clearFilterObservable.subscribe(function(n){e.filterText="",e.multiplier=1})},e.prototype.build=function(e){var n=this.getNumberToBuild(e);if(e.buildOnMountain()){if(!this.landService.hasMountains(e.getSize()*n))return this.modalService.info("Not enough mountains to build "+n+" "+e.getName()+"!<br>"+e.getSize()*n+" mountains required but only "+this.landService.getMountains()+" available"),void this.modalService.close(ju.BUILD)}else if(!this.landService.hasLand(e.getSize()*n))return this.modalService.info("Not enough empty land to build "+n+" "+e.getName()+"!<br>"+e.getSize()*n+" empty land required but only "+this.landService.getLand()+" available"),void this.modalService.close(ju.BUILD);if(this.resourcesService.decreaseResources(e.getCost(),"Construction",!0,n)){e.buildOnMountain()?this.landService.decreaseMountains(e.getSize()*n):this.landService.decreaseLand(e.getSize()*n);for(var t=0;t<n;t++)switch(this.region){case Gu.VILLAGE:this.villageService.createConstruction(new Dv(this.servicesService,this.servicesService.getService(zu.ID).getNextId(),Gu.VILLAGE,e.getBuildingType(),e.getComplexity(),e.getSize()).build());break;case Gu.FORT:this.fortService.createConstruction(new Dv(this.servicesService,this.servicesService.getService(zu.ID).getNextId(),Gu.FORT,e.getBuildingType(),e.getComplexity(),e.getSize()).build());break;case Gu.FOREST:this.forestService.createConstruction(new Dv(this.servicesService,this.servicesService.getService(zu.ID).getNextId(),Gu.FOREST,e.getBuildingType(),e.getComplexity(),e.getSize()).build());break;case Gu.FIELD:this.fieldService.createConstruction(new Dv(this.servicesService,this.servicesService.getService(zu.ID).getNextId(),Gu.FIELD,e.getBuildingType(),e.getComplexity(),e.getSize()).build());break;case Gu.MOUNTAINS:this.mountainsService.createConstruction(new Dv(this.servicesService,this.servicesService.getService(zu.ID).getNextId(),Gu.MOUNTAINS,e.getBuildingType(),e.getComplexity(),e.getSize()).build());break;case Gu.SEA:this.seaService.createConstruction(new Dv(this.servicesService,this.servicesService.getService(zu.ID).getNextId(),Gu.SEA,e.getBuildingType(),e.getComplexity(),e.getSize()).build());break;case Gu.PLATEAU:this.plateauService.createConstruction(new Dv(this.servicesService,this.servicesService.getService(zu.ID).getNextId(),Gu.PLATEAU,e.getBuildingType(),e.getComplexity(),e.getSize()).build())}this.modalService.close(ju.BUILD)}else this.modalService.close(ju.BUILD)},e.prototype.ngOnChanges=function(e){this.regionString=Gu[this.region]},e.prototype.checkBuilding=function(e,n){var t=this,l=!0;return e[1].forEach(function(e){t.gameService.isEnabled(e)||(l=!1)}),e[2]>0&&e[2]<=this.servicesService.getServiceByRegion(n).getBuildings().filter(function(n){return n.getBuildingType()===e[0].getBuildingType()||n.getBuildingType()===wu.CONSTRUCTION&&n.getConstructing()===e[0].getBuildingType()}).length&&(l=!1),l},e.prototype.hasResource=function(e,n){return void 0===n&&(n=1),0===this.resourcesService.hasResource(e.key,e.value*n,"Construction",!0)},e.prototype.getResourceName=function(e){return Vu.prepareResourceName(e)},e.prototype.getBuildingCostEntries=function(e){return e.getCost()},e.prototype.getBuildingForRegion=function(e){var n=this;if(this.buildings&&this.buildings.get(e)){var t=this.buildings.get(e).filter(function(t){return n.checkBuilding(t,e)}).map(function(e){return e[0]});if(e===Gu.PLATEAU){if(this.gameService.getAbdicationLevel()<this.servicesService.getServiceByRegion(e).getBuildings().length)return[];this.gameService.getAbdicationLevel()<7&&(t=t.filter(function(e){return e.getBuildingType()!==wu.ASCENSION_TEMPLE}))}return null!==this.filterText&&this.filterText.length>0?t.filter(function(e){return e.getName().toLowerCase().includes(n.filterText.toLowerCase())}):t}},e.prototype.isCostMet=function(e){var n=this,t=!0,l=this.getNumberToBuild(e);return Array.from(e.getCost().entries()).forEach(function(e){0!==n.resourcesService.hasResource(e[0],e[1]*l,"Construction",!0)&&(t=!1)}),t&&(t=e.buildOnMountain()?this.hasMountains(e.getSize()*l):this.hasLand(e.getSize()*l)),t},e.prototype.hasLand=function(e){return this.landService.hasLand(e)},e.prototype.hasMountains=function(e){return this.landService.getMountains()>=e},e.prototype.getLimit=function(e,n){var t=this.buildings.get(e).find(function(e){return e[0].getBuildingType()===n});return t?t[2]:0},e.prototype.hasInputOutputDescription=function(e){return this.getBuildingSettings(e).INPUT_RESOURCES},e.prototype.getBuildingSettings=function(e){return ys.getBuilding(e)},e.prototype.hasCanProduceDescription=function(e){return this.getBuildingSettings(e).CAN_PRODUCE},e.prototype.getNumberToBuild=function(e){var n=this.buildings.get(this.region).find(function(n){return n[0].getBuildingType()===e.getBuildingType()});if(0===n[2])return this.multiplier;var t=this.servicesService.getServiceByRegion(this.region).getBuildings().filter(function(e){return e.getBuildingType()===n[0].getBuildingType()||e.getBuildingType()===wu.CONSTRUCTION&&e.getConstructing()===n[0].getBuildingType()}).length;return n[2]-t<this.multiplier?n[2]-t:this.multiplier},e}(),xw=rl({encapsulation:0,styles:[[".notMet[_ngcontent-%COMP%]{color:var(--negative-colour)}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.5em;margin-bottom:10px}#filters[_ngcontent-%COMP%]{display:inline-block;width:100%;margin-bottom:5px;border-bottom:2px solid #000}#filters[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:inline-block}#buildings[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:stretch;align-items:stretch;overflow-y:scroll;height:540px}.building[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;text-align:center;border:1px solid #000;margin-bottom:10px}.buildingTitle[_ngcontent-%COMP%]{font-weight:600;background-color:var(--active-colour);border-bottom:1px solid #000}.buildingSecondRow[_ngcontent-%COMP%]{display:-webkit-box;display:flex;width:100%;border-right:1px solid #000;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.buildButton[_ngcontent-%COMP%]{width:30%}.buildButtonNotAvailable[_ngcontent-%COMP%]{width:30%;cursor:not-allowed}.details[_ngcontent-%COMP%]{width:100%;text-align:center}.resourceIcon[_ngcontent-%COMP%]{height:20px;width:20px;vertical-align:middle}#description[_ngcontent-%COMP%]{margin-bottom:10px}.icon[_ngcontent-%COMP%]{display:-webkit-inline-box;display:inline-flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;margin-right:10px}.subTitle[_ngcontent-%COMP%]{font-size:1em;font-weight:700}.productionDescription[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;margin-bottom:5px}.productionDescription[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:5px}#actions[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}#multiplierInput[_ngcontent-%COMP%]{width:5ch}#multiplierReset[_ngcontent-%COMP%]{padding:2px}"]],data:{}});function kw(e){return So(0,[(e()(),eo(0,0,null,null,10,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["\xa0Number of buildings: "])),(e()(),eo(2,0,null,null,6,"input",[["id","multiplierInput"],["min","1"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,3)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,3).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,3)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,3)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==ii(e,4).onChange(t.target.value)&&l),"input"===n&&(l=!1!==ii(e,4).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,4).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.multiplier=t)&&l),l},null,null)),vi(3,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),vi(4,16384,null,0,Jg,[St,dt],null,null),Ei(1024,null,Lg,function(e,n){return[e,n]},[Hg,Jg]),vi(6,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(8,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(9,0,null,null,1,"button",[["id","multiplierReset"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==(e.component.multiplier=1)&&l),l},null,null)),(e()(),fo(-1,null,["reset"]))],function(e,n){e(n,6,0,n.component.multiplier)},function(e,n){e(n,2,0,ii(n,8).ngClassUntouched,ii(n,8).ngClassTouched,ii(n,8).ngClassPristine,ii(n,8).ngClassDirty,ii(n,8).ngClassValid,ii(n,8).ngClassInvalid,ii(n,8).ngClassPending)})}function Mw(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(1,null,["",""]))],null,function(e,n){var t=n.component,l=" (limit: "+t.getLimit(t.region,n.parent.context.$implicit.getBuildingType())+" building)";e(n,1,0,l)})}function Dw(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(1,null,["",""]))],null,function(e,n){var t=n.component,l=" (limit: "+t.getLimit(t.region,n.parent.context.$implicit.getBuildingType())+" buildings)";e(n,1,0,l)})}function Lw(e){return So(0,[(e()(),eo(0,0,null,null,3,"span",[["class","icon"]],null,null,null,null,null)),(e()(),fo(1,null,[" "," "])),(e()(),eo(2,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(3,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){e(n,3,0,n.component.getResourceName(n.context.$implicit.resource),"resources")},function(e,n){e(n,1,0,n.context.$implicit.amount)})}function Fw(e){return So(0,[(e()(),eo(0,0,null,null,3,"span",[["class","icon"]],null,null,null,null,null)),(e()(),fo(1,null,[" "," "])),(e()(),eo(2,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(3,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){e(n,3,0,n.component.getResourceName(n.context.$implicit.resource),"resources")},function(e,n){e(n,1,0,n.context.$implicit.amount)})}function Uw(e){return So(0,[(e()(),eo(0,0,null,null,12,"div",[["class","productionDescription"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,5,"span",[],null,null,null,null,null)),(e()(),eo(2,0,null,null,1,"span",[["class","subTitle"]],null,null,null,null,null)),(e()(),fo(-1,null,["production input:"])),(e()(),eo(4,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,Lw)),vi(6,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),eo(7,0,null,null,5,"span",[],null,null,null,null,null)),(e()(),eo(8,0,null,null,1,"span",[["class","subTitle"]],null,null,null,null,null)),(e()(),fo(-1,null,["production output:"])),(e()(),eo(10,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,Fw)),vi(12,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component,l=t.getBuildingSettings(n.parent.context.$implicit.getBuildingType()).INPUT_RESOURCES;e(n,6,0,l);var i=t.getBuildingSettings(n.parent.context.$implicit.getBuildingType()).OUTPUT_RESOURCES;e(n,12,0,i)},null)}function Hw(e){return So(0,[(e()(),eo(0,0,null,null,2,"span",[["class","icon"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(2,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){e(n,2,0,n.component.getResourceName(n.context.$implicit),"resources")},null)}function Gw(e){return So(0,[(e()(),eo(0,0,null,null,6,"div",[["class","productionDescription"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,5,"span",[],null,null,null,null,null)),(e()(),eo(2,0,null,null,1,"span",[["class","subTitle"]],null,null,null,null,null)),(e()(),fo(-1,null,["can produce:"])),(e()(),eo(4,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,Hw)),vi(6,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component.getBuildingSettings(n.parent.context.$implicit.getBuildingType()).CAN_PRODUCE;e(n,6,0,t)},null)}function Bw(e){return So(0,[(e()(),eo(0,0,null,null,8,"div",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,7,"span",[["class","icon"]],null,null,null,null,null)),(e()(),eo(2,0,null,null,4,"span",[],null,null,null,null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(4,278528,null,0,Js,[Xs],{ngClass:[0,"ngClass"]},null),ho(5,{notMet:0}),(e()(),fo(6,null,["",""])),(e()(),eo(7,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(8,114688,null,0,xg,[],{name:[0,"name"]},null)],function(e,n){var t=n.component,l=e(n,5,0,!t.hasLand(n.parent.context.$implicit.getSize()*t.getNumberToBuild(n.parent.context.$implicit)));e(n,4,0,l),e(n,8,0,"land")},function(e,n){var t=n.component,l=n.parent.context.$implicit.getSize()*t.getNumberToBuild(n.parent.context.$implicit);e(n,6,0,l)})}function Vw(e){return So(0,[(e()(),eo(0,0,null,null,8,"div",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,7,"span",[["class","icon"]],null,null,null,null,null)),(e()(),eo(2,0,null,null,4,"span",[],null,null,null,null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(4,278528,null,0,Js,[Xs],{ngClass:[0,"ngClass"]},null),ho(5,{notMet:0}),(e()(),fo(6,null,["",""])),(e()(),eo(7,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(8,114688,null,0,xg,[],{name:[0,"name"]},null)],function(e,n){var t=n.component,l=e(n,5,0,!t.hasMountains(n.parent.context.$implicit.getSize()*t.getNumberToBuild(n.parent.context.$implicit)));e(n,4,0,l),e(n,8,0,"mountains")},function(e,n){var t=n.component,l=n.parent.context.$implicit.getSize()*t.getNumberToBuild(n.parent.context.$implicit);e(n,6,0,l)})}function Ww(e){return So(0,[(e()(),eo(0,0,null,null,8,"span",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,7,"span",[["class","icon"]],null,null,null,null,null)),(e()(),eo(2,0,null,null,4,"span",[],null,null,null,null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(4,278528,null,0,Js,[Xs],{ngClass:[0,"ngClass"]},null),ho(5,{notMet:0}),(e()(),fo(6,null,["",""])),(e()(),eo(7,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(8,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){var t=n.component,l=e(n,5,0,!t.hasResource(n.context.$implicit,t.getNumberToBuild(n.parent.context.$implicit)));e(n,4,0,l),e(n,8,0,t.getResourceName(n.context.$implicit.key),"resources")},function(e,n){e(n,6,0,n.context.$implicit.value*n.component.getNumberToBuild(n.parent.context.$implicit))})}function zw(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[["class","buildButton"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.build(e.parent.context.$implicit)&&l),l},null,null)),(e()(),fo(1,null,["Build ",""]))],null,function(e,n){e(n,1,0,n.component.getNumberToBuild(n.parent.context.$implicit))})}function Yw(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[["class","buildButtonNotAvailable"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.build(e.parent.context.$implicit)&&l),l},null,null)),(e()(),fo(1,null,["Build ",""]))],null,function(e,n){e(n,1,0,n.component.getNumberToBuild(n.parent.context.$implicit))})}function Kw(e){return So(0,[(e()(),eo(0,0,null,null,26,"div",[["class","building"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,21,"div",[["class","buildingSecondRow"]],null,null,null,null,null)),(e()(),eo(2,0,null,null,5,"span",[["class","buildingTitle"]],null,null,null,null,null)),(e()(),fo(3,null,[""," "])),(e()(),Jr(16777216,null,null,1,null,Mw)),vi(5,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,Dw)),vi(7,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(8,0,null,null,14,"div",[["class","details"]],null,null,null,null,null)),(e()(),eo(9,0,null,null,0,"div",[["id","description"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,Uw)),vi(11,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,Gw)),vi(13,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(14,0,null,null,1,"div",[["class","subTitle"]],null,null,null,null,null)),(e()(),fo(-1,null,["cost:"])),(e()(),Jr(16777216,null,null,1,null,Bw)),vi(17,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,Vw)),vi(19,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,2,null,Ww)),vi(21,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),Si(0,fa,[xt]),(e()(),Jr(16777216,null,null,1,null,zw)),vi(24,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,Yw)),vi(26,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component,l=1===t.getLimit(t.region,n.context.$implicit.getBuildingType());e(n,5,0,l);var i=t.getLimit(t.region,n.context.$implicit.getBuildingType())>1;e(n,7,0,i);var r=t.hasInputOutputDescription(n.context.$implicit.getBuildingType());e(n,11,0,r);var o=t.hasCanProduceDescription(n.context.$implicit.getBuildingType());e(n,13,0,o);var u=!n.context.$implicit.buildOnMountain();e(n,17,0,u);var s=n.context.$implicit.buildOnMountain();e(n,19,0,s),e(n,21,0,tl(n,21,0,ii(n,22).transform(t.getBuildingCostEntries(n.context.$implicit)))),e(n,24,0,t.isCostMet(n.context.$implicit)),e(n,26,0,!t.isCostMet(n.context.$implicit))},function(e,n){var t=n.context.$implicit.getName();e(n,3,0,t);var l=n.context.$implicit.getDescription();e(n,9,0,l)})}function jw(e){return So(0,[Si(0,ga,[]),(e()(),eo(1,0,null,null,16,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),eo(2,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),fo(3,null,[" "," buildings "])),po(4,1),(e()(),eo(5,0,null,null,9,"span",[["id","filters"]],null,null,null,null,null)),(e()(),fo(-1,null,["Search: "])),(e()(),eo(7,0,null,null,5,"input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,8)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,8).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,8)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,8)._compositionEnd(t.target.value)&&l),"ngModelChange"===n&&(l=!1!==(i.filterText=t)&&l),l},null,null)),vi(8,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),Ei(1024,null,Lg,function(e){return[e]},[Hg]),vi(10,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(12,16384,null,0,zg,[[4,Wg]],null,null),(e()(),Jr(16777216,null,null,1,null,kw)),vi(14,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(15,0,null,null,2,"div",[["id","buildings"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,Kw)),vi(17,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,10,0,t.filterText),e(n,14,0,t.region!==t.regions.PLATEAU),e(n,17,0,t.getBuildingForRegion(t.region))},function(e,n){var t=n.component,l=tl(n,3,0,e(n,4,0,ii(n,0),t.regionString));e(n,3,0,l),e(n,7,0,ii(n,12).ngClassUntouched,ii(n,12).ngClassTouched,ii(n,12).ngClassPristine,ii(n,12).ngClassDirty,ii(n,12).ngClassValid,ii(n,12).ngClassInvalid,ii(n,12).ngClassPending)})}var $w=function(){function e(e){var n=this;this.modalService=e,this.clearFilterSubject=new D,this.modalService.registerForRegion().subscribe(function(e){n.region=e,n.clearFilterSubject.next()}),this.modalService.registerForOnOpen().subscribe(function(e){e===ju.BUILD&&(n.bodyRef.nativeElement.scrollTop=0)})}return e.prototype.ngOnInit=function(){},e}(),Qw=rl({encapsulation:0,styles:[[""]],data:{}});function qw(e){return So(0,[ro(671088640,1,{bodyRef:0}),(e()(),eo(1,0,null,null,6,"app-modal",[["id","build-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==ii(e,2).onKeydownHandler(t)&&l),l},ww,_w)),vi(2,4440064,null,0,Nw,[St,dt,qf],{id:[0,"id"]},null),(e()(),eo(3,0,null,0,3,"div",[["class","modal"]],null,null,null,null,null)),(e()(),eo(4,0,[[1,0],["body",1]],null,2,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),eo(5,0,null,null,1,"app-construction",[],null,null,null,jw,xw)),vi(6,638976,null,0,Pw,[CE,Vf,qf,$f,am,NE,kE,$R,sN,GA,NN,f_,e_,Jf],{region:[0,"region"],clearFilterObservable:[1,"clearFilterObservable"]},null),(e()(),eo(7,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,2,0,"build-modal"),e(n,6,0,t.region,t.clearFilterSubject.asObservable())},null)}var Xw=function(){function e(e,n,t,l,i,r,o){var u=this;this.servicesService=e,this.calendarService=n,this.logService=t,this.idService=l,this.mountainService=i,this.resourcesService=r,this.villageService=o,this.gameService=null,this.gameService=e.getService(zu.GAME),n.registerForDayChange().subscribe(function(e){u.checkEvents()})}return e.prototype.checkEvents=function(){var e=this;Object.values(ws).forEach(function(n){var t=!0;if(n.PREREQUISITES.forEach(function(n){e.gameService.isEnabled(n)||(t=!1)}),t&&Qu.chance(n.CHANCE)){e.logService.customLog(n.LOG.MESSAGE,n.LOG.LOG_TYPE);var l=Qu.randomBetween(n.MIN_POWER,n.MAX_POWER);switch(n.EVENT){case ls.METEORITE:var i=Qu.randomElement([{item:Iu.STONE,chance:35},{item:Iu.COPPER_ORE,chance:30},{item:Iu.TIN_ORE,chance:20},{item:Iu.GOLD_ORE,chance:5},{item:Iu.SILVER_ORE,chance:5},{item:Iu.IRON_ORE,chance:5}]);null===i&&(i=Iu.STONE),e.mountainService.buildings.push(new gE(e.servicesService,e.idService.getNextId(),l,i));break;case ls.SMALL_REFUGEE:case ls.MEDIUM_REFUGEE:e.addVillagers(l)}}})},e.prototype.addVillagers=function(e){this.servicesService.getService(zu.VILLAGE).addVillagers(e)},e.ngInjectableDef=Oe({factory:function(){return new e(Ye(Vf),Ye(jf),Ye($f),Ye($S),Ye(NN),Ye(am),Ye(kE))},token:e,providedIn:"root"}),e}(),Zw=function(){function e(e,n,t,l,i,r,o,u,s,a,c,p,h,d,g,f,m,v,S,E,y){var R=this;this.logService=e,this.villageService=n,this.fortService=t,this.fieldService=l,this.mountainsService=i,this.plateauService=r,this.seaService=o,this.forestService=u,this.calendarService=s,this.landService=a,this.techService=c,this.weatherService=p,this.resourcesService=h,this.gameService=d,this.effectsService=g,this.armyService=f,this.happinessService=m,this.worldService=v,this.servicesService=S,this.navyService=E,this.eventService=y,this.tickerState=0,this.lastTick=0,this.paused=!1,this.ticking=!1,this.resolution=us,S.addService(zu.TICKER,this),this.tickSubject=new D,this.interval=setInterval(function(){return R.tick()},this.resolution)}return e.prototype.tick=function(){if(!this.ticking){this.ticking=!0;var e=Math.floor(Date.now()/this.resolution);this.tickerState>=0&&(this.lastTick=e,this.calendarService.tick(e),this.effectsService.tick(e),this.weatherService.tick(e),this.happinessService.tick(e),this.landService.tick(e),this.resourcesService.tick(e),this.gameService.tick(e),this.villageService.tick(e),this.fortService.tick(e),this.fieldService.tick(e),this.mountainsService.tick(e),this.plateauService.tick(e),this.seaService.tick(e),this.forestService.tick(e),this.armyService.tick(e),this.navyService.tick(e),this.worldService.tick(e)),this.ticking=!1}},e.prototype.stop=function(){return this.tickerState-=1,this.lastTick},e.prototype.start=function(){this.tickerState+=1,this.tickerState>0&&(this.tickerState=0)},e.prototype.forceStart=function(){this.tickerState=0},e.prototype.clearTicker=function(){clearInterval(this.interval)},e.prototype.initTicker=function(){var e=this;this.interval=setInterval(function(){return e.tick()},this.resolution)},e.prototype.pause=function(){this.stop(),this.paused=!0},e.prototype.resume=function(){this.forceStart(),this.paused=!1},e.prototype.isPaused=function(){return this.paused},e.ngInjectableDef=Oe({factory:function(){return new e(Ye($f),Ye(kE),Ye($R),Ye(sN),Ye(NN),Ye(e_),Ye(f_),Ye(GA),Ye(jf),Ye(NE),Ye(jy),Ye(Fb),Ye(am),Ye(Jf),Ye(IE),Ye(xR),Ye(lm),Ye(PO),Ye(Vf),Ye(_O),Ye(Xw))},token:e,providedIn:"root"}),e}(),Jw=function(){return function(){}}(),eP=function(){return function(){}}(),nP=function(){function e(e){var n=this;this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?function(){n.headers=new Map,e.split("\n").forEach(function(e){var t=e.indexOf(":");if(t>0){var l=e.slice(0,t),i=l.toLowerCase(),r=e.slice(t+1).trim();n.maybeSetNormalizedName(l,i),n.headers.has(i)?n.headers.get(i).push(r):n.headers.set(i,[r])}})}:function(){n.headers=new Map,Object.keys(e).forEach(function(t){var l=e[t],i=t.toLowerCase();"string"==typeof l&&(l=[l]),l.length>0&&(n.headers.set(i,l),n.maybeSetNormalizedName(t,i))})}:this.headers=new Map}return e.prototype.has=function(e){return this.init(),this.headers.has(e.toLowerCase())},e.prototype.get=function(e){this.init();var n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null},e.prototype.keys=function(){return this.init(),Array.from(this.normalizedNames.values())},e.prototype.getAll=function(e){return this.init(),this.headers.get(e.toLowerCase())||null},e.prototype.append=function(e,n){return this.clone({name:e,value:n,op:"a"})},e.prototype.set=function(e,n){return this.clone({name:e,value:n,op:"s"})},e.prototype.delete=function(e,n){return this.clone({name:e,value:n,op:"d"})},e.prototype.maybeSetNormalizedName=function(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)},e.prototype.init=function(){var n=this;this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(function(e){return n.applyUpdate(e)}),this.lazyUpdate=null))},e.prototype.copyFrom=function(e){var n=this;e.init(),Array.from(e.headers.keys()).forEach(function(t){n.headers.set(t,e.headers.get(t)),n.normalizedNames.set(t,e.normalizedNames.get(t))})},e.prototype.clone=function(n){var t=new e;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([n]),t},e.prototype.applyUpdate=function(e){var n=e.name.toLowerCase();switch(e.op){case"a":case"s":var t=e.value;if("string"==typeof t&&(t=[t]),0===t.length)return;this.maybeSetNormalizedName(e.name,n);var l=("a"===e.op?this.headers.get(n):void 0)||[];l.push.apply(l,c(t)),this.headers.set(n,l);break;case"d":var i=e.value;if(i){var r=this.headers.get(n);if(!r)return;0===(r=r.filter(function(e){return-1===i.indexOf(e)})).length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,r)}else this.headers.delete(n),this.normalizedNames.delete(n)}},e.prototype.forEach=function(e){var n=this;this.init(),Array.from(this.normalizedNames.keys()).forEach(function(t){return e(n.normalizedNames.get(t),n.headers.get(t))})},e}(),tP=function(){function e(){}return e.prototype.encodeKey=function(e){return lP(e)},e.prototype.encodeValue=function(e){return lP(e)},e.prototype.decodeKey=function(e){return decodeURIComponent(e)},e.prototype.decodeValue=function(e){return decodeURIComponent(e)},e}();function lP(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}var iP=function(){function e(e){var n,t,l,i=this;if(void 0===e&&(e={}),this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new tP,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=(n=e.fromString,t=this.encoder,l=new Map,n.length>0&&n.split("&").forEach(function(e){var n=e.indexOf("="),i=a(-1==n?[t.decodeKey(e),""]:[t.decodeKey(e.slice(0,n)),t.decodeValue(e.slice(n+1))],2),r=i[0],o=i[1],u=l.get(r)||[];u.push(o),l.set(r,u)}),l)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(function(n){var t=e.fromObject[n];i.map.set(n,Array.isArray(t)?t:[t])})):this.map=null}return e.prototype.has=function(e){return this.init(),this.map.has(e)},e.prototype.get=function(e){this.init();var n=this.map.get(e);return n?n[0]:null},e.prototype.getAll=function(e){return this.init(),this.map.get(e)||null},e.prototype.keys=function(){return this.init(),Array.from(this.map.keys())},e.prototype.append=function(e,n){return this.clone({param:e,value:n,op:"a"})},e.prototype.set=function(e,n){return this.clone({param:e,value:n,op:"s"})},e.prototype.delete=function(e,n){return this.clone({param:e,value:n,op:"d"})},e.prototype.toString=function(){var e=this;return this.init(),this.keys().map(function(n){var t=e.encoder.encodeKey(n);return e.map.get(n).map(function(n){return t+"="+e.encoder.encodeValue(n)}).join("&")}).join("&")},e.prototype.clone=function(n){var t=new e({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat([n]),t},e.prototype.init=function(){var e=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(function(n){return e.map.set(n,e.cloneFrom.map.get(n))}),this.updates.forEach(function(n){switch(n.op){case"a":case"s":var t=("a"===n.op?e.map.get(n.param):void 0)||[];t.push(n.value),e.map.set(n.param,t);break;case"d":if(void 0===n.value){e.map.delete(n.param);break}var l=e.map.get(n.param)||[],i=l.indexOf(n.value);-1!==i&&l.splice(i,1),l.length>0?e.map.set(n.param,l):e.map.delete(n.param)}}),this.cloneFrom=this.updates=null)},e}();function rP(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}function oP(e){return"undefined"!=typeof Blob&&e instanceof Blob}function uP(e){return"undefined"!=typeof FormData&&e instanceof FormData}var sP=function(){function e(e,n,t,l){var i;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||l?(this.body=void 0!==t?t:null,i=l):i=t,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new nP),this.params){var r=this.params.toString();if(0===r.length)this.urlWithParams=n;else{var o=n.indexOf("?");this.urlWithParams=n+(-1===o?"?":o<n.length-1?"&":"")+r}}else this.params=new iP,this.urlWithParams=n}return e.prototype.serializeBody=function(){return null===this.body?null:rP(this.body)||oP(this.body)||uP(this.body)||"string"==typeof this.body?this.body:this.body instanceof iP?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()},e.prototype.detectContentTypeHeader=function(){return null===this.body?null:uP(this.body)?null:oP(this.body)?this.body.type||null:rP(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof iP?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null},e.prototype.clone=function(n){void 0===n&&(n={});var t=n.method||this.method,l=n.url||this.url,i=n.responseType||this.responseType,r=void 0!==n.body?n.body:this.body,o=void 0!==n.withCredentials?n.withCredentials:this.withCredentials,u=void 0!==n.reportProgress?n.reportProgress:this.reportProgress,s=n.headers||this.headers,a=n.params||this.params;return void 0!==n.setHeaders&&(s=Object.keys(n.setHeaders).reduce(function(e,t){return e.set(t,n.setHeaders[t])},s)),n.setParams&&(a=Object.keys(n.setParams).reduce(function(e,t){return e.set(t,n.setParams[t])},a)),new e(t,l,r,{params:a,headers:s,reportProgress:u,responseType:i,withCredentials:o})},e}(),aP=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}({}),cP=function(){return function(e,n,t){void 0===n&&(n=200),void 0===t&&(t="OK"),this.headers=e.headers||new nP,this.status=void 0!==e.status?e.status:n,this.statusText=e.statusText||t,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}(),pP=function(e){function n(n){void 0===n&&(n={});var t=e.call(this,n)||this;return t.type=aP.ResponseHeader,t}return i(n,e),n.prototype.clone=function(e){return void 0===e&&(e={}),new n({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})},n}(cP),hP=function(e){function n(n){void 0===n&&(n={});var t=e.call(this,n)||this;return t.type=aP.Response,t.body=void 0!==n.body?n.body:null,t}return i(n,e),n.prototype.clone=function(e){return void 0===e&&(e={}),new n({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})},n}(cP),dP=function(e){function n(n){var t=e.call(this,n,0,"Unknown Error")||this;return t.name="HttpErrorResponse",t.ok=!1,t.message=t.status>=200&&t.status<300?"Http failure during parsing for "+(n.url||"(unknown url)"):"Http failure response for "+(n.url||"(unknown url)")+": "+n.status+" "+n.statusText,t.error=n.error||null,t}return i(n,e),n}(cP);function gP(e,n){return{body:n,headers:e.headers,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}var fP=function(){function e(e){this.handler=e}return e.prototype.request=function(e,n,t){var l,i=this;if(void 0===t&&(t={}),e instanceof sP)l=e;else{var r;r=t.headers instanceof nP?t.headers:new nP(t.headers);var o=void 0;t.params&&(o=t.params instanceof iP?t.params:new iP({fromObject:t.params})),l=new sP(e,n,void 0!==t.body?t.body:null,{headers:r,params:o,reportProgress:t.reportProgress,responseType:t.responseType||"json",withCredentials:t.withCredentials})}var u=Ta(l).pipe(gc(function(e){return i.handler.handle(e)}));if(e instanceof sP||"events"===t.observe)return u;var s=u.pipe(Da(function(e){return e instanceof hP}));switch(t.observe||"body"){case"body":switch(l.responseType){case"arraybuffer":return s.pipe(j(function(e){if(null!==e.body&&!(e.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return e.body}));case"blob":return s.pipe(j(function(e){if(null!==e.body&&!(e.body instanceof Blob))throw new Error("Response is not a Blob.");return e.body}));case"text":return s.pipe(j(function(e){if(null!==e.body&&"string"!=typeof e.body)throw new Error("Response is not a string.");return e.body}));case"json":default:return s.pipe(j(function(e){return e.body}))}case"response":return s;default:throw new Error("Unreachable: unhandled observe type "+t.observe+"}")}},e.prototype.delete=function(e,n){return void 0===n&&(n={}),this.request("DELETE",e,n)},e.prototype.get=function(e,n){return void 0===n&&(n={}),this.request("GET",e,n)},e.prototype.head=function(e,n){return void 0===n&&(n={}),this.request("HEAD",e,n)},e.prototype.jsonp=function(e,n){return this.request("JSONP",e,{params:(new iP).append(n,"JSONP_CALLBACK"),observe:"body",responseType:"json"})},e.prototype.options=function(e,n){return void 0===n&&(n={}),this.request("OPTIONS",e,n)},e.prototype.patch=function(e,n,t){return void 0===t&&(t={}),this.request("PATCH",e,gP(t,n))},e.prototype.post=function(e,n,t){return void 0===t&&(t={}),this.request("POST",e,gP(t,n))},e.prototype.put=function(e,n,t){return void 0===t&&(t={}),this.request("PUT",e,gP(t,n))},e}(),mP=function(){function e(e,n){this.next=e,this.interceptor=n}return e.prototype.handle=function(e){return this.interceptor.intercept(e,this.next)},e}(),vP=new Le("HTTP_INTERCEPTORS"),SP=function(){function e(){}return e.prototype.intercept=function(e,n){return n.handle(e)},e}(),EP=/^\)\]\}',?\n/,yP=function(){return function(){}}(),RP=function(){function e(){}return e.prototype.build=function(){return new XMLHttpRequest},e}(),bP=function(){function e(e){this.xhrFactory=e}return e.prototype.handle=function(e){var n=this;if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new _(function(t){var l=n.xhrFactory.build();if(l.open(e.method,e.urlWithParams),e.withCredentials&&(l.withCredentials=!0),e.headers.forEach(function(e,n){return l.setRequestHeader(e,n.join(","))}),e.headers.has("Accept")||l.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){var i=e.detectContentTypeHeader();null!==i&&l.setRequestHeader("Content-Type",i)}if(e.responseType){var r=e.responseType.toLowerCase();l.responseType="json"!==r?r:"text"}var o=e.serializeBody(),u=null,s=function(){if(null!==u)return u;var n=1223===l.status?204:l.status,t=l.statusText||"OK",i=new nP(l.getAllResponseHeaders()),r=function(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(l)||e.url;return u=new pP({headers:i,status:n,statusText:t,url:r})},a=function(){var n=s(),i=n.headers,r=n.status,o=n.statusText,u=n.url,a=null;204!==r&&(a=void 0===l.response?l.responseText:l.response),0===r&&(r=a?200:0);var c=r>=200&&r<300;if("json"===e.responseType&&"string"==typeof a){var p=a;a=a.replace(EP,"");try{a=""!==a?JSON.parse(a):null}catch(h){a=p,c&&(c=!1,a={error:h,text:a})}}c?(t.next(new hP({body:a,headers:i,status:r,statusText:o,url:u||void 0})),t.complete()):t.error(new dP({error:a,headers:i,status:r,statusText:o,url:u||void 0}))},c=function(e){var n=s().url,i=new dP({error:e,status:l.status||0,statusText:l.statusText||"Unknown Error",url:n||void 0});t.error(i)},p=!1,h=function(n){p||(t.next(s()),p=!0);var i={type:aP.DownloadProgress,loaded:n.loaded};n.lengthComputable&&(i.total=n.total),"text"===e.responseType&&l.responseText&&(i.partialText=l.responseText),t.next(i)},d=function(e){var n={type:aP.UploadProgress,loaded:e.loaded};e.lengthComputable&&(n.total=e.total),t.next(n)};return l.addEventListener("load",a),l.addEventListener("error",c),e.reportProgress&&(l.addEventListener("progress",h),null!==o&&l.upload&&l.upload.addEventListener("progress",d)),l.send(o),t.next({type:aP.Sent}),function(){l.removeEventListener("error",c),l.removeEventListener("load",a),e.reportProgress&&(l.removeEventListener("progress",h),null!==o&&l.upload&&l.upload.removeEventListener("progress",d)),l.abort()}})},e}(),OP=new Le("XSRF_COOKIE_NAME"),TP=new Le("XSRF_HEADER_NAME"),CP=function(){return function(){}}(),IP=function(){function e(e,n,t){this.doc=e,this.platform=n,this.cookieName=t,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return e.prototype.getToken=function(){if("server"===this.platform)return null;var e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=qs(e,this.cookieName),this.lastCookieString=e),this.lastToken},e}(),AP=function(){function e(e,n){this.tokenService=e,this.headerName=n}return e.prototype.intercept=function(e,n){var t=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||t.startsWith("http://")||t.startsWith("https://"))return n.handle(e);var l=this.tokenService.getToken();return null===l||e.headers.has(this.headerName)||(e=e.clone({headers:e.headers.set(this.headerName,l)})),n.handle(e)},e}(),NP=function(){function e(e,n){this.backend=e,this.injector=n,this.chain=null}return e.prototype.handle=function(e){if(null===this.chain){var n=this.injector.get(vP,[]);this.chain=n.reduceRight(function(e,n){return new mP(e,n)},this.backend)}return this.chain.handle(e)},e}(),_P=function(){function e(){}var n;return n=e,e.disable=function(){return{ngModule:n,providers:[{provide:AP,useClass:SP}]}},e.withOptions=function(e){return void 0===e&&(e={}),{ngModule:n,providers:[e.cookieName?{provide:OP,useValue:e.cookieName}:[],e.headerName?{provide:TP,useValue:e.headerName}:[]]}},e}(),wP=function(){return function(){}}();function PP(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}PP.prototype=Object.create(Error.prototype);var xP=PP,kP=function(){function e(e,n,t,l){this.waitFor=e,this.absoluteTimeout=n,this.withObservable=t,this.scheduler=l}return e.prototype.call=function(e,n){return n.subscribe(new MP(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},e}(),MP=function(e){function n(n,t,l,i,r){var o=e.call(this,n)||this;return o.absoluteTimeout=t,o.waitFor=l,o.withObservable=i,o.scheduler=r,o.action=null,o.scheduleTimeout(),o}return i(n,e),n.dispatchTimeout=function(e){var n=e.withObservable;e._unsubscribeAndRecycle(),e.add(Y(e,n))},n.prototype.scheduleTimeout=function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(n.dispatchTimeout,this.waitFor,this))},n.prototype._next=function(n){this.absoluteTimeout||this.scheduleTimeout(),e.prototype._next.call(this,n)},n.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.withObservable=null},n}(K);function DP(e,n){return void 0===n&&(n=Mm),function(e,n,t){return void 0===t&&(t=Mm),function(l){var i,r=(i=e)instanceof Date&&!isNaN(+i),o=r?+e-t.now():Math.abs(e);return l.lift(new kP(o,r,n,t))}}(e,Vm(new xP),n)}var LP=function(){function e(e,n,t){this.http=e,this.logService=n,this.modalService=t,this.serverUrl="https://villagerkings.com/api/"}return e.prototype.cloudSave=function(e,n,t,l,i){var r=this,o={headers:(new nP).append("Content-Type","application/json").append("Access-Control-Allow-Origin","*")},u={};return u.userId=e,u.gameAuthToken=n,u.save=t,u.day=l,u.year=i,this.http.post(this.serverUrl+"save",u,o).pipe(DP(15e3),Xa(function(e){return r.handleError(e)}))},e.prototype.cloudLoad=function(e,n){var t=this,l={headers:(new nP).append("Content-Type","application/json").append("Access-Control-Allow-Origin","*"),observe:"response",responseType:"text"},i={};return i.userId=e,i.gameAuthToken=n,this.http.post(this.serverUrl+"load",i,l).pipe(DP(15e3),Xa(function(e){return t.handleError(e)}))},e.prototype.cloudCheck=function(e,n,t){var l=this;void 0===e&&(e=!1);var i={headers:(new nP).append("Content-Type","application/json").append("Access-Control-Allow-Origin","*"),observe:"response"},r={};return r.userId=n,r.gameAuthToken=t,this.http.post(this.serverUrl+"hasSave",r,i).pipe(DP(5e3),Xa(function(n){return l.handleError(n,!e)}))},e.prototype.handleError=function(e,n){return void 0===n&&(n=!0),e instanceof dP?401===e.status?(n?this.modalService.info("Couldn't authorize server call via Kongregate API"):this.logService.warning("Couldn't authorize server call via Kongregate API"),Pa):(console.log("error",e),e.error instanceof ErrorEvent?console.error("An error occurred:",e.error.message):console.error("Backend returned code "+e.status),n&&this.modalService.info("Something bad happened; please try again later."),Vm("Something bad happened; please try again later.")):e instanceof xP?(n?this.modalService.info("Server request has timed out"):this.logService.warning("Server request has timed out"),Pa):void 0},e.ngInjectableDef=Oe({factory:function(){return new e(Ye(fP),Ye($f),Ye(qf))},token:e,providedIn:"root"}),e}(),FP=function(){function e(e,n,t,l,i,r,o,u,s,a,c,p,h,d,g,f,m,v,S,E,y,R,b,O,T,C,I,A,N,_,w,P,x,k,M){var D=this;this.router=e,this.tickerService=n,this.gameService=t,this.modalService=l,this.optionsService=i,this.logService=r,this.villageService=o,this.forestService=u,this.resourcesService=s,this.landService=a,this.mountainsService=c,this.calendarService=p,this.royalService=h,this.techService=d,this.religionService=g,this.craftingService=f,this.recipeService=m,this.fieldService=v,this.plateauService=S,this.seaService=E,this.fortService=y,this.effectsService=R,this.armyService=b,this.happinessService=O,this.managementService=T,this.marketService=C,this.weatherService=I,this.idService=A,this.heritageService=N,this.tutorialService=_,this.worldService=w,this.kongregateService=P,this.serverService=x,this.navyService=k,this.saveName=is.saveName,this.saveVersion=is.saveVersion,M.addService(zu.SERIALIZER,this),this.autoSaveStatus=this.optionsService.getOption(Wf.AUTO_SAVE_STATUS),this.autoSavePeriod=this.optionsService.getOption(Wf.AUTO_SAVE_PERIOD),this.optionsSubscription||(this.optionsSubscription=this.optionsService.registerForOptionsChange().subscribe(function(){return D.changeOptions()})),this.saveInterval=setInterval(function(){D.initSave(),D.logService.autoSave()},this.autoSavePeriod)}return e.prototype.changeOptions=function(){var e=this,n=this.optionsService.getOption(Wf.AUTO_SAVE_STATUS),t=this.optionsService.getOption(Wf.AUTO_SAVE_PERIOD);this.autoSaveStatus===n&&this.autoSavePeriod===t||(this.autoSaveStatus=n,this.autoSavePeriod=t,clearInterval(this.saveInterval),this.autoSaveStatus&&(this.saveInterval=setInterval(function(){e.initSave(),e.logService.autoSave()},1e3*this.autoSavePeriod*60)))},e.prototype.initSave=function(){this.tickerService.stop(),localStorage.setItem(this.saveName,this.prepareBase64()),this.tickerService.start()},e.prototype.prepareBase64=function(){this.tickerService.stop();var e=btoa(JSON.stringify({saveVersion:this.saveVersion,heritage:this.heritageService.save(),id:this.idService,options:this.optionsService.save(),tutorial:this.tutorialService.save(),resources:this.resourcesService.save(),village:this.villageService.save(),fort:this.fortService.save(),forest:this.forestService.save(),field:this.fieldService.save(),mountains:this.mountainsService.save(),plateau:this.plateauService.save(),sea:this.seaService.save(),land:this.landService.save(),calendar:this.calendarService.save(),game:this.gameService.save(),royal:this.royalService.save(),tech:this.techService.save(),religion:this.religionService.save(),crafting:this.craftingService.save(),recipe:this.recipeService.save(),effects:this.effectsService.save(),army:this.armyService.save(),world:this.worldService.save(),happiness:this.happinessService.save(),management:this.managementService.save(),market:this.marketService.save(),navy:this.navyService.save(),weather:this.weatherService.save(),logs:this.logService.save()}));return this.tickerService.start(),e},e.prototype.initLoad=function(){if(this.tickerService.stop(),null===localStorage.getItem(this.saveName))return this.modalService.info("There is no any save file to load."),void this.tickerService.start();var e;try{e=JSON.parse(atob(localStorage.getItem(this.saveName)))}catch(n){return this.modalService.info("Save data is corrupted! Loading failed."),void this.tickerService.start()}this.loadSave(e),this.tickerService.start(),this.logService.log("loaded")},e.prototype.hasSave=function(){return null!=localStorage.getItem(this.saveName)},e.prototype.import=function(e){var n;this.tickerService.stop();try{n=JSON.parse(atob(e))}catch(t){return this.modalService.info("Import file is not valid or corrupted! Import failed."),void this.tickerService.start()}this.loadSave(n),localStorage.setItem(this.saveName,e),this.tickerService.start(),this.logService.log("save imported")},e.prototype.hardReset=function(){this.reset(!0),localStorage.removeItem(this.saveName)},e.prototype.ascensionReset=function(){this.reset(!1,!0)},e.prototype.reset=function(e,n){void 0===n&&(n=!1),this.tickerService.stop(),this.tickerService.clearTicker(),localStorage.removeItem(this.saveName),this.tutorialService.reset(e,n),this.calendarService.reset(e,n),this.gameService.reset(e,n),this.idService.reset(e,n),this.weatherService.reset(e,n),this.effectsService.reset(e,n),this.resourcesService.reset(e,n),this.landService.reset(e,n),this.navyService.reset(e,n),this.villageService.reset(e,n),this.fortService.reset(e,n),this.forestService.reset(e,n),this.fieldService.reset(e,n),this.mountainsService.reset(e,n),this.plateauService.reset(e,n),this.seaService.reset(e,n),this.optionsService.reset(e,n),this.techService.reset(e,n),this.religionService.reset(e,n),this.craftingService.reset(e,n),this.recipeService.reset(e,n),this.armyService.reset(e,n),this.worldService.reset(e,n),this.happinessService.reset(e,n),this.managementService.reset(e,n),this.marketService.reset(e,n),this.heritageService.reset(e,n),this.logService.reset(e,n),this.royalService.reset(e,n),this.initSave(),this.tickerService.initTicker(),this.tickerService.start(),this.router.navigate(["/village"])},e.prototype.loadSave=function(e){switch(e.saveVersion){case Zu.DEV:case Zu.V1_0_0:this.loadDevVersion(e);break;default:var n="Corrupted save file (unknown save version). Loading is not possible";return this.logService.log(n),void console.error(n)}},e.prototype.loadDevVersion=function(e){this.saveVersion=e.saveVersion,this.idService.load(e.id),this.optionsService.load(e.options),this.logService.load(e.logs),this.effectsService.load(e.effects),this.resourcesService.load(e.resources),this.villageService.load(e.village),this.fortService.load(e.fort),this.forestService.load(e.forest),this.fieldService.load(e.field),this.mountainsService.load(e.mountains),this.plateauService.load(e.plateau),this.seaService.load(e.sea),this.landService.load(e.land),this.calendarService.load(e.calendar),this.gameService.load(e.game),this.royalService.load(e.royal),this.recipeService.load(e.recipe),this.techService.load(e.tech),this.religionService.load(e.religion),this.craftingService.load(e.crafting),this.armyService.load(e.army),this.worldService.load(void 0!==e.world?e.world:{}),this.navyService.load(void 0!==e.navy?e.navy:{}),this.happinessService.load(e.happiness),this.managementService.load(e.management),this.marketService.load(e.market),this.weatherService.load(e.weather),this.heritageService.load(void 0!==e.heritage?e.heritage:{}),this.tutorialService.load(void 0!==e.tutorial?e.tutorial:{})},e.prototype.abdicate=function(e,n){this.reset(!1,!1),this.tickerService.stop(),this.tickerService.clearTicker(),e&&(this.landService.reset(!1,!1),this.worldService.reset(!0,!1)),this.tickerService.initTicker(),this.tickerService.start()},e.prototype.getTimestamp=function(){return(new Date).getTime()},e.prototype.cloudSave=function(e,n,t){var l=this;if(this.kongregateService.isGuest()&&!gn())this.modalService.info("You must be logged into kongregate to use cloud save");else{this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to upload save to cloud? Current cloud save will be overridden");var i=this.modalService.registerForConfirmation().subscribe(function(r){if(i.unsubscribe(),r){t.timestamp=l.getTimestamp(),e.status=!0,l.tickerService.stop();var o=l.prepareBase64(),u=l.calendarService.getDay(),s=l.calendarService.getYear();l.tickerService.start(),gn()?l.serverService.cloudSave(392444,"93ba2bd2f335d13f4c9a66447ae22d3db04670c596fd87b6e6424f870d9504b1",o,u,s).subscribe(function(e){l.logService.success("saved to cloud"),l.modalService.info("Saved to cloud!"),n.day=u,n.year=s}).add(function(){e.status=!1}):l.serverService.cloudSave(l.kongregateService.getUserId(),l.kongregateService.getGameAuthToken(),o,u,s).subscribe(function(e){l.logService.success("saved to cloud"),l.modalService.info("Saved to cloud!"),n.day=u,n.year=s}).add(function(){e.status=!1})}})}},e.prototype.cloudLoad=function(e,n){var t=this;if(this.kongregateService.isGuest()&&!gn())this.modalService.info("You must be logged into kongregate to use cloud save");else{this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to download cloud save? Current game progress will be overridden");var l=this.modalService.registerForConfirmation().subscribe(function(i){l.unsubscribe(),i&&(n.timestamp=t.getTimestamp(),e.status=!0,gn()?t.serverService.cloudLoad(392444,"93ba2bd2f335d13f4c9a66447ae22d3db04670c596fd87b6e6424f870d9504b1").subscribe(function(e){204===e.status?t.modalService.info("There is no save file available on the server"):(t.import(e.body),t.modalService.info("Loaded save file from cloud"))}).add(function(){e.status=!1}):t.serverService.cloudLoad(t.kongregateService.getUserId(),t.kongregateService.getGameAuthToken()).subscribe(function(e){204===e.status?t.modalService.info("There is no save file available on the server"):(t.import(e.body),t.modalService.info("Loaded save file from cloud"))}).add(function(){e.status=!1}))})}},e.prototype.cloudCheck=function(e,n,t,l){void 0===e&&(e=!1),this.kongregateService.isGuest()&&!gn()?e||this.modalService.info("You must be logged into kongregate to use cloud save"):(l.timestamp=this.getTimestamp(),n.status=!0,gn()?this.serverService.cloudCheck(e,392444,"93ba2bd2f335d13f4c9a66447ae22d3db04670c596fd87b6e6424f870d9504b1").subscribe(function(e){204===e.status?t.day=-1:(t.day=e.body.day,t.year=e.body.year)},function(){t.day=-1}).add(function(){n.status=!1}):this.serverService.cloudCheck(e,this.kongregateService.getUserId(),this.kongregateService.getGameAuthToken()).subscribe(function(e){204===e.status?t.day=-1:(t.day=e.body.day,t.year=e.body.year)},function(){t.day=-1}).add(function(){n.status=!1}))},e.ngInjectableDef=Oe({factory:function(){return new e(Ye(jd),Ye(Zw),Ye(Jf),Ye(qf),Ye(zf),Ye($f),Ye(kE),Ye(GA),Ye(am),Ye(NE),Ye(NN),Ye(jf),Ye(nm),Ye(jy),Ye(fb),Ye(Tv),Ye(Cm),Ye(sN),Ye(e_),Ye(f_),Ye($R),Ye(IE),Ye(xR),Ye(lm),Ye(xy),Ye(ky),Ye(Fb),Ye($S),Ye(sC),Ye(Xf),Ye(PO),Ye(tm),Ye(LP),Ye(_O),Ye(Vf))},token:e,providedIn:"root"}),e}(),UP=function(){function e(e,n,t,l,i){var r=this;this.modalService=e,this.serializerService=n,this.heritageService=t,this.servicesService=l,this.gameService=i,this.resetWorld=!1,this.resetHeritage=!1,e.registerForOnOpen().subscribe(function(e){e===ju.ABDICATION&&(r.resetWorld=!1,r.resetHeritage=!1)}),e.registerForCloseModal().subscribe(function(e){e!==ju.ABDICATION&&e!==ju.ALL||r.modalService.sendAbdicationResult(!1)})}return e.prototype.ngOnInit=function(){},e.prototype.abdicate=function(){var e=this;this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to abdicate?");var n=this.modalService.registerForConfirmation().subscribe(function(t){n.unsubscribe(),t&&(e.modalService.sendAbdicationResult(!0),e.servicesService.getService(zu.PLATEAU).getBuildings().forEach(function(e){e.forceAbdicate()}),e.serializerService.abdicate(e.resetWorld,e.resetHeritage),e.modalService.close(ju.ABDICATION))})},e.prototype.cancel=function(){this.modalService.sendAbdicationResult(!1),this.modalService.close(ju.ABDICATION)},e.prototype.calculateHeritagePoints=function(){return this.heritageService.calculateHeritagePoints()},e.prototype.peopleToNextHeritagePoint=function(){return this.heritageService.peopleToNextHeritagePoint()},e.prototype.getStartYear=function(){return this.gameService.getGameStartedYear()},e}(),HP=rl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;font-size:1.2em}#buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;width:100%}button[_ngcontent-%COMP%]{border:1px solid #000;color:#000;padding:1% 2%;text-align:center;text-decoration:none;display:inline-block;font-size:1em;margin:.5%}"]],data:{}});function GP(e){return So(0,[(e()(),eo(0,0,null,null,43,"app-modal",[["id","abdication-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==ii(e,1).onKeydownHandler(t)&&l),l},ww,_w)),vi(1,4440064,null,0,Nw,[St,dt,qf],{id:[0,"id"]},null),(e()(),eo(2,0,null,0,40,"div",[["class","modal"]],null,null,null,null,null)),(e()(),eo(3,0,null,null,39,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),eo(4,0,null,null,1,"h2",[],null,null,null,null,null)),(e()(),fo(-1,null,["Abdication"])),(e()(),eo(6,0,null,null,31,"div",[],null,null,null,null,null)),(e()(),fo(-1,null,[" Are you sure you want to soft reset your progress? "])),(e()(),eo(8,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),fo(-1,null,[" You will start from the beginning and all progress except for:"])),(e()(),eo(10,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(11,0,null,null,6,"ul",[],null,null,null,null,null)),(e()(),eo(12,0,null,null,1,"li",[],null,null,null,null,null)),(e()(),fo(-1,null,["Royal Points"])),(e()(),eo(14,0,null,null,1,"li",[],null,null,null,null,null)),(e()(),fo(-1,null,["Heritage Points"])),(e()(),eo(16,0,null,null,1,"li",[],null,null,null,null,null)),(e()(),fo(-1,null,["Wonder buildings and their effects"])),(e()(),fo(-1,null,[" will be deleted."])),(e()(),eo(19,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(20,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),fo(21,null,[" You will be awarded "," Heritage Points and "," xp towards next point "])),(e()(),eo(22,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),fo(23,null,[" ("," more people/xp needed for the next point)"])),(e()(),eo(24,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(25,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),fo(26,null,[" You reign since the start of year "," "])),(e()(),eo(27,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(28,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(29,0,null,null,5,"input",[["id","resetWorld"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,30).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==ii(e,30).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.resetWorld=t)&&l),l},null,null)),vi(30,16384,null,0,Fg,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[Fg]),vi(32,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(34,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(35,0,null,null,1,"label",[["for","resetWorld"]],null,null,null,null,null)),(e()(),fo(-1,null,["reset world map progress"])),(e()(),eo(37,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(38,0,null,null,4,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),eo(39,0,null,null,1,"button",[["id","hardReset"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.abdicate()&&l),l},null,null)),(e()(),fo(-1,null,["ABDICATE"])),(e()(),eo(41,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.cancel()&&l),l},null,null)),(e()(),fo(-1,null,["CANCEL"])),(e()(),eo(43,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,1,0,"abdication-modal"),e(n,32,0,t.resetWorld)},function(e,n){var t=n.component;e(n,21,0,t.calculateHeritagePoints().hp,t.calculateHeritagePoints().xp),e(n,23,0,t.peopleToNextHeritagePoint()),e(n,26,0,t.getStartYear()),e(n,29,0,ii(n,34).ngClassUntouched,ii(n,34).ngClassTouched,ii(n,34).ngClassPristine,ii(n,34).ngClassDirty,ii(n,34).ngClassValid,ii(n,34).ngClassInvalid,ii(n,34).ngClassPending)})}var BP=function(){function e(e){this.modalService=e,this.selectedMode=0}return e.prototype.ngOnInit=function(){},e.prototype.ok=function(){this.modalService.close(ju.ASCENSION)},e.prototype.canAscend=function(){return!0},e.prototype.ascend=function(){this.canAscend()&&this.modalService.close(ju.ASCENSION)},e.prototype.onKeydownHandler=function(e){"none"!==document.getElementById("ascension-modal").style.display&&(e.preventDefault(),this.ok())},e}(),VP=rl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;font-size:1.2em;max-width:750px;margin:100px auto auto}.lineBreak[_ngcontent-%COMP%]{display:block}#modes[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;margin-bottom:10px}.mode[_ngcontent-%COMP%]{display:-webkit-box;display:flex;cursor:pointer;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:150px;width:200px;border:1px solid #000;-webkit-box-align:center;align-items:center;margin-right:5px;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box}.mode[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100px}.mode[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700}.mode[_ngcontent-%COMP%]   .effect[_ngcontent-%COMP%]{font-size:.8em}#buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px;white-space:nowrap}.disabled[_ngcontent-%COMP%]{color:#5a5a5a}.selected[_ngcontent-%COMP%]{border:3px solid #000}"]],data:{}});function WP(e){return So(0,[(e()(),eo(0,0,null,null,55,"app-modal",[["id","ascension-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==ii(e,1).onKeydownHandler(t)&&l),l},ww,_w)),vi(1,4440064,null,0,Nw,[St,dt,qf],{id:[0,"id"]},null),(e()(),eo(2,0,null,0,52,"div",[["class","modal"]],null,null,null,null,null)),(e()(),eo(3,0,null,null,51,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),eo(4,0,null,null,1,"h2",[],null,null,null,null,null)),(e()(),fo(-1,null,["Ascension"])),(e()(),eo(6,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),fo(-1,null,[" Are you sure you want to ascend into a new world? "])),(e()(),eo(8,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(9,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(10,0,null,null,5,"div",[],null,null,null,null,null)),(e()(),fo(-1,null,[" You will start from the beginning and all progress except for"])),(e()(),eo(12,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),fo(-1,null,[" royal points, heritage points and permanent royal upgrades will be deleted "])),(e()(),eo(14,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(15,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(16,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(-1,null,["What world do you choose:"])),(e()(),eo(18,0,null,null,27,"div",[["id","modes"]],null,null,null,null,null)),(e()(),eo(19,0,null,null,8,"div",[["class","mode"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==(e.component.selectedMode=0)&&l),l},null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(21,278528,null,0,Js,[Xs],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),ho(22,{selected:0}),(e()(),eo(23,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),fo(-1,null,["Winter"])),(e()(),eo(25,0,null,null,0,"img",[["src","assets/weather/snow.svg"]],null,null,null,null,null)),(e()(),eo(26,0,null,null,1,"span",[["class","effect"]],null,null,null,null,null)),(e()(),fo(-1,null,["cold severity +5%"])),(e()(),eo(28,0,null,null,8,"div",[["class","mode"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==(e.component.selectedMode=1)&&l),l},null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(30,278528,null,0,Js,[Xs],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),ho(31,{selected:0}),(e()(),eo(32,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),fo(-1,null,["War"])),(e()(),eo(34,0,null,null,0,"img",[["src","assets/army/recruit.svg"]],null,null,null,null,null)),(e()(),eo(35,0,null,null,1,"span",[["class","effect"]],null,null,null,null,null)),(e()(),fo(-1,null,["enemy difficulty +5%"])),(e()(),eo(37,0,null,null,8,"div",[["class","mode"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==(e.component.selectedMode=2)&&l),l},null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(39,278528,null,0,Js,[Xs],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),ho(40,{selected:0}),(e()(),eo(41,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),fo(-1,null,["Hunger"])),(e()(),eo(43,0,null,null,0,"img",[["src","assets/resources/food.svg"]],null,null,null,null,null)),(e()(),eo(44,0,null,null,1,"span",[["class","effect"]],null,null,null,null,null)),(e()(),fo(-1,null,["food consumption +5%"])),(e()(),eo(46,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(47,0,null,null,7,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),eo(48,0,null,null,4,"button",[],null,null,null,null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(50,278528,null,0,Js,[Xs],{ngClass:[0,"ngClass"]},null),ho(51,{disabled:0}),(e()(),fo(-1,null,["ASCEND"])),(e()(),eo(53,0,null,null,1,"button",[],null,null,null,null,null)),(e()(),fo(-1,null,["TURN BACK"])),(e()(),eo(55,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,1,0,"ascension-modal");var l=e(n,22,0,0===t.selectedMode);e(n,21,0,"mode",l);var i=e(n,31,0,1===t.selectedMode);e(n,30,0,"mode",i);var r=e(n,40,0,2===t.selectedMode);e(n,39,0,"mode",r);var o=e(n,51,0,!t.canAscend());e(n,50,0,o)},null)}var zP=function(){function e(e,n){var t=this;this.modalService=e,this.worldService=n,this.modalService.registerForFightReport().subscribe(function(e){return t.fightReport=e})}return e.prototype.ngOnInit=function(){},e.prototype.ok=function(){this.fightReport=null,this.modalService.close(ju.FIGHT_REPORT)},e.prototype.getAttackerName=function(){return this.fightReport.attacker===Uu.PLAYER?this.worldService.getPlayerCountry().name:Vu.prepareCountryName(this.fightReport.attacker)},e.prototype.getDefenderName=function(){return this.fightReport.defender===Uu.PLAYER?this.worldService.getPlayerCountry().name:Vu.prepareCountryName(this.fightReport.defender)},e.prototype.getTroopName=function(e){return Vu.prepareTroopName(e)},e.prototype.round=function(e){return Vu.round(e,1)},e}(),YP=rl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;font-size:1.2em}#title[_ngcontent-%COMP%]{font-weight:700}#reportBody[_ngcontent-%COMP%]{width:100%;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;overflow-y:auto}.section[_ngcontent-%COMP%]{width:80%;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;text-align:center;border-bottom:2px solid #000}.section[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 50%;-webkit-box-align:center;align-items:center}#skirmishes[_ngcontent-%COMP%]{width:80%;text-align:center}.sectionFull[_ngcontent-%COMP%]{width:100%;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;text-align:center;border-bottom:2px solid #000}.sectionEnd[_ngcontent-%COMP%]{width:80%;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;text-align:center;border-bottom:2px solid #000}.sectionEnd[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 100%}.sectionFull[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(1){-webkit-box-flex:0;flex:0 0 45%;-webkit-box-align:center;align-items:center}.sectionFull[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(2){-webkit-box-flex:0;flex:0 0 10%;-webkit-box-align:center;align-items:center}.sectionFull[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(3){-webkit-box-flex:0;flex:0 0 45%;-webkit-box-align:center;align-items:center}.section[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:first-child{border-right:2px solid #000}.section[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:last-child{padding-bottom:10px}.won[_ngcontent-%COMP%]{color:var(--positive-colour)}.lost[_ngcontent-%COMP%]{color:var(--negative-colour)}.attdefIcon[_ngcontent-%COMP%]{height:15px}"]],data:{}});function KP(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(1,null,["army size bonus: ",""]))],null,function(e,n){e(n,1,0,n.component.fightReport.attackerArmySizeBonus)})}function jP(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(1,null,["",": ",""]))],null,function(e,n){e(n,1,0,n.component.getTroopName(n.context.$implicit.troop),n.context.$implicit.size)})}function $P(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(1,null,["army size bonus: ",""]))],null,function(e,n){e(n,1,0,n.component.fightReport.defenderArmySizeBonus)})}function QP(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(1,null,["",": ",""]))],null,function(e,n){e(n,1,0,n.component.getTroopName(n.context.$implicit.troop),n.context.$implicit.size)})}function qP(e){return So(0,[(e()(),eo(0,0,null,null,21,"div",[["id","skirmishes"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(2,null,["Skirmish ",""])),(e()(),eo(3,0,null,null,18,"div",[["class","sectionFull"]],null,null,null,null,null)),(e()(),eo(4,0,null,null,8,"span",[],null,null,null,null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(6,278528,null,0,Js,[Xs],{ngClass:[0,"ngClass"]},null),ho(7,{won:0,lost:1}),(e()(),fo(8,null,[""," "])),(e()(),eo(9,0,null,null,3,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["("])),(e()(),eo(11,0,null,null,0,"img",[["class","attdefIcon"],["src","assets/army/attack.svg"]],null,null,null,null,null)),(e()(),fo(12,null,["",")"])),(e()(),eo(13,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["vs"])),(e()(),eo(15,0,null,null,6,"span",[],null,null,null,null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(17,278528,null,0,Js,[Xs],{ngClass:[0,"ngClass"]},null),ho(18,{won:0,lost:1}),(e()(),fo(19,null,[""," ("])),(e()(),eo(20,0,null,null,0,"img",[["class","attdefIcon"],["src","assets/army/defense.svg"]],null,null,null,null,null)),(e()(),fo(21,null,["",")"]))],function(e,n){var t=e(n,7,0,n.context.$implicit.result,!n.context.$implicit.result);e(n,6,0,t);var l=e(n,18,0,!n.context.$implicit.result,n.context.$implicit.result);e(n,17,0,l)},function(e,n){var t=n.component;e(n,2,0,n.context.index+1),e(n,8,0,t.getTroopName(n.context.$implicit.attackerTroop)),e(n,12,0,t.round(n.context.$implicit.attack)),e(n,19,0,t.getTroopName(n.context.$implicit.defenderTroop)),e(n,21,0,t.round(n.context.$implicit.defense))})}function XP(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.getAttackerName())})}function ZP(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.getDefenderName())})}function JP(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(1,null,["",": ",""]))],null,function(e,n){e(n,1,0,n.component.getTroopName(n.context.$implicit.troop),n.context.$implicit.size)})}function ex(e){return So(0,[(e()(),eo(0,0,null,null,50,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"div",[["id","title"]],null,null,null,null,null)),(e()(),fo(-1,null,["Fight Report"])),(e()(),eo(3,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(4,null,["",""])),(e()(),eo(5,0,null,null,14,"div",[["class","section"]],null,null,null,null,null)),(e()(),eo(6,0,null,null,6,"div",[],null,null,null,null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(8,278528,null,0,Js,[Xs],{ngClass:[0,"ngClass"]},null),ho(9,{won:0,lost:1}),(e()(),fo(-1,null,["ATTACKER"])),(e()(),eo(11,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),fo(12,null,[""," "])),(e()(),eo(13,0,null,null,6,"div",[],null,null,null,null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(15,278528,null,0,Js,[Xs],{ngClass:[0,"ngClass"]},null),ho(16,{won:0,lost:1}),(e()(),fo(-1,null,["DEFENDER"])),(e()(),eo(18,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),fo(19,null,[""," "])),(e()(),eo(20,0,null,null,28,"div",[["id","reportBody"]],null,null,null,null,null)),(e()(),eo(21,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(-1,null,["Armies"])),(e()(),eo(23,0,null,null,12,"div",[["class","section"]],null,null,null,null,null)),(e()(),eo(24,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,KP)),vi(26,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,jP)),vi(28,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),eo(29,0,null,null,6,"div",[],null,null,null,null,null)),(e()(),eo(30,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(31,null,["defense: ",""])),(e()(),Jr(16777216,null,null,1,null,$P)),vi(33,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,QP)),vi(35,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),Jr(16777216,null,null,1,null,qP)),vi(37,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),eo(38,0,null,null,6,"div",[],null,null,null,null,null)),(e()(),fo(-1,null,["Winner army ("])),(e()(),Jr(16777216,null,null,1,null,XP)),vi(41,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,ZP)),vi(43,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),fo(-1,null,[") "])),(e()(),eo(45,0,null,null,3,"div",[["class","sectionEnd"]],null,null,null,null,null)),(e()(),eo(46,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,JP)),vi(48,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),eo(49,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.ok()&&l),l},null,null)),(e()(),fo(-1,null,["close"]))],function(e,n){var t=n.component,l=e(n,9,0,t.fightReport.result,!t.fightReport.result);e(n,8,0,l);var i=e(n,16,0,!t.fightReport.result,t.fightReport.result);e(n,15,0,i),e(n,26,0,t.fightReport.attackerArmySizeBonus>0),e(n,28,0,t.fightReport.attackerArmy.units),e(n,33,0,t.fightReport.defenderArmySizeBonus>0),e(n,35,0,t.fightReport.defenderArmy.units),e(n,37,0,t.fightReport.skirmish),e(n,41,0,t.fightReport.result),e(n,43,0,!t.fightReport.result),e(n,48,0,t.fightReport.armyAfterFight.units)},function(e,n){var t=n.component;e(n,4,0,t.fightReport.message),e(n,12,0,t.getAttackerName()),e(n,19,0,t.getDefenderName()),e(n,31,0,t.fightReport.defense)})}function nx(e){return So(0,[(e()(),eo(0,0,null,null,5,"app-modal",[["id","fight-report-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==ii(e,1).onKeydownHandler(t)&&l),l},ww,_w)),vi(1,4440064,null,0,Nw,[St,dt,qf],{id:[0,"id"]},null),(e()(),eo(2,0,null,0,2,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,ex)),vi(4,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(5,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,1,0,"fight-report-modal"),e(n,4,0,t.fightReport)},null)}var tx=function(){function e(e,n){var t=this;this.serializerService=e,this.modalService=n,this.exportTextArea=null,this.showMessage=!1,this.modalService.registerForOnOpen().subscribe(function(e){e===ju.EXPORT&&t.export()})}return e.prototype.ngOnInit=function(){},e.prototype.export=function(){this.exportTextArea=this.serializerService.prepareBase64()},e.prototype.copy=function(){var e=this,n=this.exportTextArea,t=document.createElement("textarea");t.id="txt",t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.opacity="0",t.value=n,document.body.appendChild(t),t.select();try{if(document.execCommand("copy"))return this.showMessage=!0,setTimeout(function(){return e.showMessage=!1},1500),!0}catch(l){console.error(Qf.ERROR_1)}finally{document.body.removeChild(t)}return!1},e}(),lx=rl({encapsulation:0,styles:[["#export-area[_ngcontent-%COMP%]{width:100%;resize:none}.modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}#buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;width:100%}#title[_ngcontent-%COMP%]{font-weight:800;margin-bottom:10px}"]],data:{}});function ix(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(-1,null,["copied..."]))],null,null)}function rx(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,0,"br",[],null,null,null,null,null))],null,null)}function ox(e){return So(0,[(e()(),eo(0,0,null,null,17,"app-modal",[["id","export-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==ii(e,1).onKeydownHandler(t)&&l),l},ww,_w)),vi(1,4440064,null,0,Nw,[St,dt,qf],{id:[0,"id"]},null),(e()(),eo(2,0,null,0,14,"div",[["class","modal"]],null,null,null,null,null)),(e()(),eo(3,0,null,null,13,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),eo(4,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),fo(-1,null,["Export save"])),(e()(),eo(6,0,null,null,1,"textarea",[["id","export-area"],["placeholder","Your save will be generated here..."],["readonly",""],["rows","20"]],null,null,null,null,null)),(e()(),fo(7,null,["",""])),(e()(),eo(8,0,null,null,4,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),eo(9,0,null,null,1,"button",[["id","import-button"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.export()&&l),l},null,null)),(e()(),fo(-1,null,["Update"])),(e()(),eo(11,0,null,null,1,"button",[["id","copy-button"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.copy()&&l),l},null,null)),(e()(),fo(-1,null,["Copy to clipboard"])),(e()(),Jr(16777216,null,null,1,null,ix)),vi(14,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,rx)),vi(16,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(17,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,1,0,"export-modal"),e(n,14,0,t.showMessage),e(n,16,0,!t.showMessage)},function(e,n){e(n,7,0,n.component.exportTextArea)})}var ux=function(){function e(e,n){this.serializerService=e,this.modalService=n}return e.prototype.ngOnInit=function(){},e.prototype.import=function(){this.serializerService.import(this.importTextArea),this.importTextArea="",this.modalService.close(ju.IMPORT)},e}(),sx=rl({encapsulation:0,styles:[["#import-area[_ngcontent-%COMP%]{width:100%;resize:none}.modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}#title[_ngcontent-%COMP%]{font-weight:800;margin-bottom:10px}"]],data:{}});function ax(e){return So(0,[(e()(),eo(0,0,null,null,14,"app-modal",[["id","import-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==ii(e,1).onKeydownHandler(t)&&l),l},ww,_w)),vi(1,4440064,null,0,Nw,[St,dt,qf],{id:[0,"id"]},null),(e()(),eo(2,0,null,0,11,"div",[["class","modal"]],null,null,null,null,null)),(e()(),eo(3,0,null,null,10,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),eo(4,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),fo(-1,null,["Import save"])),(e()(),eo(6,0,null,null,5,"textarea",[["id","import-area"],["placeholder","Paste your save here..."],["rows","20"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,7)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,7).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,7)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,7)._compositionEnd(t.target.value)&&l),"ngModelChange"===n&&(l=!1!==(i.importTextArea=t)&&l),l},null,null)),vi(7,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),Ei(1024,null,Lg,function(e){return[e]},[Hg]),vi(9,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(11,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(12,0,null,null,1,"button",[["id","import-button"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.import()&&l),l},null,null)),(e()(),fo(-1,null,["Import"])),(e()(),eo(14,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,1,0,"import-modal"),e(n,9,0,t.importTextArea)},function(e,n){e(n,6,0,ii(n,11).ngClassUntouched,ii(n,11).ngClassTouched,ii(n,11).ngClassPristine,ii(n,11).ngClassDirty,ii(n,11).ngClassValid,ii(n,11).ngClassInvalid,ii(n,11).ngClassPending)})}var cx=function(){function e(e,n){this.modalService=e,this.serializerService=n}return e.prototype.ngOnInit=function(){},e.prototype.hardReset=function(){this.serializerService.hardReset(),this.modalService.close(ju.HARD_RESET)},e.prototype.cancel=function(){this.modalService.close(ju.HARD_RESET)},e}(),px=rl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;font-size:1.2em}#buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;width:100%}button[_ngcontent-%COMP%]{border:2px solid #000;color:#000;padding:1% 2%;text-align:center;text-decoration:none;display:inline-block;font-size:1em;margin:.5%}#hardReset[_ngcontent-%COMP%]{background-color:#5f0000;color:#fff}"]],data:{}});function hx(e){return So(0,[(e()(),eo(0,0,null,null,19,"app-modal",[["id","hard-reset-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==ii(e,1).onKeydownHandler(t)&&l),l},ww,_w)),vi(1,4440064,null,0,Nw,[St,dt,qf],{id:[0,"id"]},null),(e()(),eo(2,0,null,0,16,"div",[["class","modal"]],null,null,null,null,null)),(e()(),eo(3,0,null,null,15,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),eo(4,0,null,null,1,"h2",[],null,null,null,null,null)),(e()(),fo(-1,null,["Hard Reset"])),(e()(),eo(6,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),fo(-1,null,[" Are you sure you want to hard reset your progress? "])),(e()(),eo(8,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),fo(-1,null,[" This will remove ALL progress and saved game (except settings and tutorial state). "])),(e()(),eo(10,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),fo(-1,null,[" You will still be able to load game from exported save. "])),(e()(),eo(12,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),fo(-1,null,[" This should only be done if you have backup save or want to start from the beginning. "])),(e()(),eo(14,0,null,null,4,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),eo(15,0,null,null,1,"button",[["id","hardReset"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.hardReset()&&l),l},null,null)),(e()(),fo(-1,null,["HARD RESET"])),(e()(),eo(17,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.cancel()&&l),l},null,null)),(e()(),fo(-1,null,["CANCEL"])),(e()(),eo(19,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){e(n,1,0,"hard-reset-modal")},null)}var dx=function(){function e(e,n,t){var l=this;this.optionsService=e,this.servicesService=n,this.modalService=t,this.selection=0,this.lastServerAction={timestamp:0},this.saveFileMetadata={day:-1,year:-1},this.savingLoader={status:!1},this.loadingLoader={status:!1},this.checkLoader={status:!1},this.positiveColour=this.optionsService.getOption(Wf.POSITIVE_COLOUR),this.negativeColour=this.optionsService.getOption(Wf.NEGATIVE_COLOUR),this.AIDiffs=ns,t.registerForOnOpen().subscribe(function(e){e===ju.OPTIONS&&(l.checkSave(!0),l.lastServerAction.timestamp=0)})}return e.prototype.ngOnInit=function(){var e=this;this.optionsSubscription||(this.optionsSubscription=this.optionsService.registerForOptionsChange().subscribe(function(){return e.initOptions()})),this.initOptions()},e.prototype.initOptions=function(){this.autoSaveStatus=this.optionsService.getOption(Wf.AUTO_SAVE_STATUS),this.autoSavePeriod=this.optionsService.getOption(Wf.AUTO_SAVE_PERIOD),this.metricStatus=this.optionsService.getOption(Wf.METRIC),this.saveLogs=this.optionsService.getOption(Wf.SAVE_LOGS),this.pauseOnInit=this.optionsService.getOption(Wf.PAUSE_ON_INIT),this.keepReservationSettingsOnReset=this.optionsService.getOption(Wf.KEEP_RESERVATION_SETTINGS_ON_RESET),this.keepManagementSettingsOnReset=this.optionsService.getOption(Wf.KEEP_MANAGEMENT_SETTINGS_ON_RESET),this.keepAutoTradeOnReset=this.optionsService.getOption(Wf.KEEP_AUTO_TRADE_ON_RESET),this.soundMaster=this.optionsService.getOption(Wf.SOUND_MASTER),this.soundMasterVolume=this.optionsService.getOption(Wf.SOUND_MASTER_VOLUME),this.soundMusic=this.optionsService.getOption(Wf.SOUND_MUSIC),this.soundMusicVolume=this.optionsService.getOption(Wf.SOUND_MUSIC_VOLUME),this.soundEffects=this.optionsService.getOption(Wf.SOUND_EFFECTS),this.soundEffectsVolume=this.optionsService.getOption(Wf.SOUND_EFFECTS_VOLUME),this.soundEffectMarket=this.optionsService.getOption(Wf.SOUND_EFFECT_MARKET),this.soundEffectResearch=this.optionsService.getOption(Wf.SOUND_EFFECT_RESEARCH),this.soundEffectInvasion=this.optionsService.getOption(Wf.SOUND_EFFECT_INVASION),this.visualProgressBars=this.optionsService.getOption(Wf.VISUAL_PROGRESS_BARS),this.autoTextFitting=this.optionsService.getOption(Wf.AUTO_TEXT_FITTING),this.pagedView=this.optionsService.getOption(Wf.PAGED_VIEW),this.buildingsPerPage=this.optionsService.getOption(Wf.BUILDINGS_PER_PAGE),this.positiveColour=this.optionsService.getOption(Wf.POSITIVE_COLOUR),this.negativeColour=this.optionsService.getOption(Wf.NEGATIVE_COLOUR),this.AIDifficulty=this.optionsService.getOption(Wf.AI_DIFFICULTY)},e.prototype.close=function(){this.modalService.close(ju.OPTIONS)},e.prototype.updateOptions=function(){this.optionsService.setOptions([{option:Wf.AUTO_SAVE_STATUS,value:this.autoSaveStatus},{option:Wf.AUTO_SAVE_PERIOD,value:this.autoSavePeriod},{option:Wf.METRIC,value:this.metricStatus},{option:Wf.SAVE_LOGS,value:this.saveLogs},{option:Wf.PAUSE_ON_INIT,value:this.pauseOnInit},{option:Wf.KEEP_RESERVATION_SETTINGS_ON_RESET,value:this.keepReservationSettingsOnReset},{option:Wf.KEEP_MANAGEMENT_SETTINGS_ON_RESET,value:this.keepManagementSettingsOnReset},{option:Wf.KEEP_AUTO_TRADE_ON_RESET,value:this.keepAutoTradeOnReset},{option:Wf.SOUND_MASTER,value:this.soundMaster},{option:Wf.SOUND_MASTER_VOLUME,value:this.soundMasterVolume},{option:Wf.SOUND_MUSIC,value:this.soundMusic},{option:Wf.SOUND_MUSIC_VOLUME,value:this.soundMusicVolume},{option:Wf.SOUND_EFFECTS,value:this.soundEffects},{option:Wf.SOUND_EFFECTS_VOLUME,value:this.soundEffectsVolume},{option:Wf.SOUND_EFFECT_MARKET,value:this.soundEffectMarket},{option:Wf.SOUND_EFFECT_RESEARCH,value:this.soundEffectResearch},{option:Wf.SOUND_EFFECT_INVASION,value:this.soundEffectInvasion},{option:Wf.VISUAL_PROGRESS_BARS,value:this.visualProgressBars},{option:Wf.AUTO_TEXT_FITTING,value:this.autoTextFitting},{option:Wf.PAGED_VIEW,value:this.pagedView},{option:Wf.BUILDINGS_PER_PAGE,value:this.buildingsPerPage},{option:Wf.POSITIVE_COLOUR,value:this.positiveColour},{option:Wf.NEGATIVE_COLOUR,value:this.negativeColour},{option:Wf.AI_DIFFICULTY,value:this.AIDifficulty}])},e.prototype.updateSaveOption=function(){this.autoSavePeriod=Number(this.autoSavePeriod),this.autoSavePeriod<1&&(this.autoSavePeriod=1),this.autoSavePeriod%1!=0&&(this.autoSavePeriod=Math.floor(this.autoSavePeriod)),this.autoSavePeriod>60&&(this.autoSavePeriod=60),this.updateOptions()},e.prototype.setPositiveColour=function(){this.optionsService.setPositiveColour(this.positiveColour)},e.prototype.setNegativeColour=function(){this.optionsService.setNegativeColour(this.negativeColour)},e.prototype.resetPositiveColour=function(){this.positiveColour="#006400",this.setPositiveColour()},e.prototype.resetNegativeColour=function(){this.negativeColour="#8B0000",this.setNegativeColour()},e.prototype.resetAll=function(){var e=this;this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to reset all settings (in all tabs) to default values?");var n=this.modalService.registerForConfirmation().subscribe(function(t){n.unsubscribe(),t&&e.optionsService.init()})},e.prototype.getTimestamp=function(){return(new Date).getTime()},e.prototype.cloudSave=function(){this.getTimestamp()-this.lastServerAction.timestamp>15e3?this.servicesService.getService(zu.SERIALIZER).cloudSave(this.savingLoader,this.saveFileMetadata,this.lastServerAction):this.modalService.info("You must wait for "+(15-Math.ceil((this.getTimestamp()-this.lastServerAction.timestamp)/1e3))+"s before next cloud save")},e.prototype.cloudLoad=function(){this.getTimestamp()-this.lastServerAction.timestamp>15e3?this.servicesService.getService(zu.SERIALIZER).cloudLoad(this.loadingLoader,this.lastServerAction):this.modalService.info("You must wait for "+(15-Math.ceil((this.getTimestamp()-this.lastServerAction.timestamp)/1e3))+"s before next cloud load")},e.prototype.checkSave=function(e){void 0===e&&(e=!1),e||this.getTimestamp()-this.lastServerAction.timestamp>5e3?this.servicesService.getService(zu.SERIALIZER).cloudCheck(e,this.checkLoader,this.saveFileMetadata,this.lastServerAction):this.modalService.info("You must wait for "+(5-Math.ceil((this.getTimestamp()-this.lastServerAction.timestamp)/1e3))+"s before next save lookup")},e.prototype.getSoundMasterVolume=function(){return this.optionsService.getOption(Wf.SOUND_MASTER_VOLUME)},e.prototype.changeSoundMasterVolume=function(e){this.soundMasterVolume=e.target.value,this.updateOptions()},e.prototype.getSoundMusicVolume=function(){return this.optionsService.getOption(Wf.SOUND_MUSIC_VOLUME)},e.prototype.changeSoundMusicVolume=function(e){this.soundMusicVolume=e.target.value,this.updateOptions()},e.prototype.getSoundEffectsVolume=function(){return this.optionsService.getOption(Wf.SOUND_EFFECTS_VOLUME)},e.prototype.changeSoundEffectsVolume=function(e){this.soundEffectsVolume=e.target.value,this.updateOptions()},e}(),gx=rl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{text-align:center;font-size:1.2em}#title[_ngcontent-%COMP%]{text-align:center;font-weight:800;display:inline-block}.options[_ngcontent-%COMP%]{text-align:left}#autoSavePeriod[_ngcontent-%COMP%]{width:4ch;text-align:right}.slidecontainer[_ngcontent-%COMP%]{display:inline-block;width:150px}.slider[_ngcontent-%COMP%]{-webkit-appearance:none;width:100%;height:10px;border-radius:5px;background:var(--passive-colour);outline:0;opacity:.7;-webkit-transition:opacity .2s;transition:opacity .2s}.slider[_ngcontent-%COMP%]:hover{opacity:1}.slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:15px;height:15px;border-radius:50%;background:var(--active-colour);cursor:pointer}.slider[_ngcontent-%COMP%]::-moz-range-thumb{width:15px;height:15px;border-radius:50%;background:var(--active-colour);cursor:pointer}.soundVolumeLabel[_ngcontent-%COMP%]{display:inline-block;width:180px}#buildingPerPage[_ngcontent-%COMP%]{width:5ch}#sections[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;width:100%}#sections[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:10px;font-size:1.2em;background-color:var(--passive-colour);border:1px solid #000;cursor:pointer}#sections[_ngcontent-%COMP%] > div.x[_ngcontent-%COMP%]{background-color:var(--active-colour)}#refresh[_ngcontent-%COMP%]{padding:4px 4px 0;-webkit-box-align:center;align-items:center}#refreshIMG[_ngcontent-%COMP%]{height:20px}"]],data:{}});function fx(e){return So(0,[(e()(),eo(0,0,null,null,0,"div",[["class","loader"]],null,null,null,null,null))],null,null)}function mx(e){return So(0,[(e()(),eo(0,0,null,null,0,"div",[["class","loader"]],null,null,null,null,null))],null,null)}function vx(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["No save file on the server"]))],null,null)}function Sx(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(1,null,["save for day: ",", year: ",""]))],null,function(e,n){var t=n.component;e(n,1,0,t.saveFileMetadata.day,t.saveFileMetadata.year)})}function Ex(e){return So(0,[(e()(),eo(0,0,null,null,0,"img",[["id","refreshIMG"],["src","assets/refresh.svg"]],null,null,null,null,null))],null,null)}function yx(e){return So(0,[(e()(),eo(0,0,null,null,0,"div",[["class","loader"]],null,null,null,null,null))],null,null)}function Rx(e){return So(0,[(e()(),eo(0,0,null,null,100,"div",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),fo(-1,null,["Game options"])),(e()(),eo(3,0,null,null,21,"div",[],null,null,null,null,null)),(e()(),eo(4,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(-1,null,["Cloud saving (beta)"])),(e()(),eo(6,0,null,null,3,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.cloudSave()&&l),l},null,null)),(e()(),fo(-1,null,[" Cloud save "])),(e()(),Jr(16777216,null,null,1,null,fx)),vi(9,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(10,0,null,null,3,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.cloudLoad()&&l),l},null,null)),(e()(),fo(-1,null,[" Cloud load "])),(e()(),Jr(16777216,null,null,1,null,mx)),vi(13,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(14,0,null,null,10,"div",[],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,vx)),vi(16,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,Sx)),vi(18,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(19,0,null,null,4,"button",[["id","refresh"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.checkSave()&&l),l},null,null)),(e()(),Jr(16777216,null,null,1,null,Ex)),vi(21,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,yx)),vi(23,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(24,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(25,0,null,null,75,"div",[["class","options"]],null,null,null,null,null)),(e()(),eo(26,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),fo(-1,null,["Game options"])),(e()(),eo(28,0,null,null,5,"input",[["id","autoSaveStatus"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,29).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==ii(e,29).onTouched()&&l),"change"===n&&(l=!1!==i.updateOptions()&&l),"ngModelChange"===n&&(l=!1!==(i.autoSaveStatus=t)&&l),l},null,null)),vi(29,16384,null,0,Fg,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[Fg]),vi(31,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(33,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(34,0,null,null,1,"label",[["for","autoSaveStatus"]],null,null,null,null,null)),(e()(),fo(-1,null,["auto save on/off "])),(e()(),eo(36,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(37,0,null,null,6,"input",[["id","autoSavePeriod"],["max","60"],["min","1"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,38)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,38).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,38)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,38)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==ii(e,39).onChange(t.target.value)&&l),"input"===n&&(l=!1!==ii(e,39).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,39).onTouched()&&l),"change"===n&&(l=!1!==i.updateSaveOption()&&l),"ngModelChange"===n&&(l=!1!==(i.autoSavePeriod=t)&&l),l},null,null)),vi(38,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),vi(39,16384,null,0,Jg,[St,dt],null,null),Ei(1024,null,Lg,function(e,n){return[e,n]},[Hg,Jg]),vi(41,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(43,16384,null,0,zg,[[4,Wg]],null,null),(e()(),fo(-1,null,[" minutes "])),(e()(),eo(45,0,null,null,1,"label",[["for","autoSavePeriod"]],null,null,null,null,null)),(e()(),fo(-1,null,["auto save period "])),(e()(),eo(47,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(48,0,null,null,5,"input",[["id","metricStatus"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,49).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==ii(e,49).onTouched()&&l),"change"===n&&(l=!1!==i.updateOptions()&&l),"ngModelChange"===n&&(l=!1!==(i.metricStatus=t)&&l),l},null,null)),vi(49,16384,null,0,Fg,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[Fg]),vi(51,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(53,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(54,0,null,null,1,"label",[["for","metricStatus"]],null,null,null,null,null)),(e()(),fo(-1,null,["use metric units"])),(e()(),eo(56,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(57,0,null,null,5,"input",[["id","saveLogsStatus"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,58).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==ii(e,58).onTouched()&&l),"change"===n&&(l=!1!==i.updateOptions()&&l),"ngModelChange"===n&&(l=!1!==(i.saveLogs=t)&&l),l},null,null)),vi(58,16384,null,0,Fg,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[Fg]),vi(60,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(62,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(63,0,null,null,1,"label",[["for","saveLogsStatus"]],null,null,null,null,null)),(e()(),fo(-1,null,["save logs"])),(e()(),eo(65,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(66,0,null,null,5,"input",[["id","pauseOnInit"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,67).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==ii(e,67).onTouched()&&l),"change"===n&&(l=!1!==i.updateOptions()&&l),"ngModelChange"===n&&(l=!1!==(i.pauseOnInit=t)&&l),l},null,null)),vi(67,16384,null,0,Fg,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[Fg]),vi(69,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(71,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(72,0,null,null,1,"label",[["for","pauseOnInit"]],null,null,null,null,null)),(e()(),fo(-1,null,["pause the game on page refresh"])),(e()(),eo(74,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(75,0,null,null,5,"input",[["id","keepReservationSettings"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,76).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==ii(e,76).onTouched()&&l),"change"===n&&(l=!1!==i.updateOptions()&&l),"ngModelChange"===n&&(l=!1!==(i.keepReservationSettingsOnReset=t)&&l),l},null,null)),vi(76,16384,null,0,Fg,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[Fg]),vi(78,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(80,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(81,0,null,null,1,"label",[["for","keepReservationSettings"]],null,null,null,null,null)),(e()(),fo(-1,null,["Keep reservation settings active over resets and abdications"])),(e()(),eo(83,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(84,0,null,null,5,"input",[["id","keepManagementSettings"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,85).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==ii(e,85).onTouched()&&l),"change"===n&&(l=!1!==i.updateOptions()&&l),"ngModelChange"===n&&(l=!1!==(i.keepManagementSettingsOnReset=t)&&l),l},null,null)),vi(85,16384,null,0,Fg,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[Fg]),vi(87,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(89,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(90,0,null,null,1,"label",[["for","keepManagementSettings"]],null,null,null,null,null)),(e()(),fo(-1,null,["Keep management settings over resets and abdications"])),(e()(),eo(92,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(93,0,null,null,5,"input",[["id","keepAutoTradeOnReset"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,94).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==ii(e,94).onTouched()&&l),"change"===n&&(l=!1!==i.updateOptions()&&l),"ngModelChange"===n&&(l=!1!==(i.keepAutoTradeOnReset=t)&&l),l},null,null)),vi(94,16384,null,0,Fg,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[Fg]),vi(96,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(98,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(99,0,null,null,1,"label",[["for","keepAutoTradeOnReset"]],null,null,null,null,null)),(e()(),fo(-1,null,["Keep auto trade enabled after resets and abdications"]))],function(e,n){var t=n.component;e(n,9,0,t.savingLoader.status),e(n,13,0,t.loadingLoader.status),e(n,16,0,t.saveFileMetadata.day<0),e(n,18,0,t.saveFileMetadata.day>0),e(n,21,0,!t.checkLoader.status),e(n,23,0,t.checkLoader.status),e(n,31,0,t.autoSaveStatus),e(n,41,0,t.autoSavePeriod),e(n,51,0,t.metricStatus),e(n,60,0,t.saveLogs),e(n,69,0,t.pauseOnInit),e(n,78,0,t.keepReservationSettingsOnReset),e(n,87,0,t.keepManagementSettingsOnReset),e(n,96,0,t.keepAutoTradeOnReset)},function(e,n){e(n,28,0,ii(n,33).ngClassUntouched,ii(n,33).ngClassTouched,ii(n,33).ngClassPristine,ii(n,33).ngClassDirty,ii(n,33).ngClassValid,ii(n,33).ngClassInvalid,ii(n,33).ngClassPending),e(n,37,0,ii(n,43).ngClassUntouched,ii(n,43).ngClassTouched,ii(n,43).ngClassPristine,ii(n,43).ngClassDirty,ii(n,43).ngClassValid,ii(n,43).ngClassInvalid,ii(n,43).ngClassPending),e(n,48,0,ii(n,53).ngClassUntouched,ii(n,53).ngClassTouched,ii(n,53).ngClassPristine,ii(n,53).ngClassDirty,ii(n,53).ngClassValid,ii(n,53).ngClassInvalid,ii(n,53).ngClassPending),e(n,57,0,ii(n,62).ngClassUntouched,ii(n,62).ngClassTouched,ii(n,62).ngClassPristine,ii(n,62).ngClassDirty,ii(n,62).ngClassValid,ii(n,62).ngClassInvalid,ii(n,62).ngClassPending),e(n,66,0,ii(n,71).ngClassUntouched,ii(n,71).ngClassTouched,ii(n,71).ngClassPristine,ii(n,71).ngClassDirty,ii(n,71).ngClassValid,ii(n,71).ngClassInvalid,ii(n,71).ngClassPending),e(n,75,0,ii(n,80).ngClassUntouched,ii(n,80).ngClassTouched,ii(n,80).ngClassPristine,ii(n,80).ngClassDirty,ii(n,80).ngClassValid,ii(n,80).ngClassInvalid,ii(n,80).ngClassPending),e(n,84,0,ii(n,89).ngClassUntouched,ii(n,89).ngClassTouched,ii(n,89).ngClassPristine,ii(n,89).ngClassDirty,ii(n,89).ngClassValid,ii(n,89).ngClassInvalid,ii(n,89).ngClassPending),e(n,93,0,ii(n,98).ngClassUntouched,ii(n,98).ngClassTouched,ii(n,98).ngClassPristine,ii(n,98).ngClassDirty,ii(n,98).ngClassValid,ii(n,98).ngClassInvalid,ii(n,98).ngClassPending)})}function bx(e){return So(0,[(e()(),eo(0,0,null,null,76,"div",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),fo(-1,null,["Sound"])),(e()(),eo(3,0,null,null,73,"div",[["class","options"]],null,null,null,null,null)),(e()(),eo(4,0,null,null,1,"h5",[],null,null,null,null,null)),(e()(),fo(-1,null,["Master"])),(e()(),eo(6,0,null,null,5,"input",[["id","soundMaster"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,7).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==ii(e,7).onTouched()&&l),"change"===n&&(l=!1!==i.updateOptions()&&l),"ngModelChange"===n&&(l=!1!==(i.soundMaster=t)&&l),l},null,null)),vi(7,16384,null,0,Fg,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[Fg]),vi(9,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(11,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(12,0,null,null,1,"label",[["for","soundMaster"]],null,null,null,null,null)),(e()(),fo(-1,null,["master sound on/off"])),(e()(),eo(14,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(15,0,null,null,1,"label",[["class","soundVolumeLabel"],["for","soundMasterVolume"]],null,null,null,null,null)),(e()(),fo(16,null,["master sound volume ","% "])),(e()(),eo(17,0,null,null,1,"div",[["class","slidecontainer"]],null,null,null,null,null)),(e()(),eo(18,0,null,null,0,"input",[["class","slider"],["id","soundMasterVolume"],["max","100"],["min","0"],["type","range"],["value","100"]],[[8,"value",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.changeSoundMasterVolume(t)&&l),l},null,null)),(e()(),eo(19,0,null,null,1,"h5",[],null,null,null,null,null)),(e()(),fo(-1,null,["Music"])),(e()(),eo(21,0,null,null,5,"input",[["id","soundMusic"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,22).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==ii(e,22).onTouched()&&l),"change"===n&&(l=!1!==i.updateOptions()&&l),"ngModelChange"===n&&(l=!1!==(i.soundMusic=t)&&l),l},null,null)),vi(22,16384,null,0,Fg,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[Fg]),vi(24,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(26,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(27,0,null,null,1,"label",[["for","soundMusic"]],null,null,null,null,null)),(e()(),fo(-1,null,["music on/off"])),(e()(),eo(29,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(30,0,null,null,1,"label",[["class","soundVolumeLabel"],["for","soundMusicVolume"]],null,null,null,null,null)),(e()(),fo(31,null,["master sound volume ","% "])),(e()(),eo(32,0,null,null,1,"div",[["class","slidecontainer"]],null,null,null,null,null)),(e()(),eo(33,0,null,null,0,"input",[["class","slider"],["id","soundMusicVolume"],["max","100"],["min","0"],["type","range"],["value","100"]],[[8,"value",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.changeSoundMusicVolume(t)&&l),l},null,null)),(e()(),eo(34,0,null,null,1,"h5",[],null,null,null,null,null)),(e()(),fo(-1,null,["Effects"])),(e()(),eo(36,0,null,null,5,"input",[["id","soundEffects"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,37).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==ii(e,37).onTouched()&&l),"change"===n&&(l=!1!==i.updateOptions()&&l),"ngModelChange"===n&&(l=!1!==(i.soundEffects=t)&&l),l},null,null)),vi(37,16384,null,0,Fg,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[Fg]),vi(39,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(41,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(42,0,null,null,1,"label",[["for","soundEffects"]],null,null,null,null,null)),(e()(),fo(-1,null,["effects on/off"])),(e()(),eo(44,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(45,0,null,null,1,"label",[["class","soundVolumeLabel"],["for","soundEffectsVolume"]],null,null,null,null,null)),(e()(),fo(46,null,["master sound volume ","% "])),(e()(),eo(47,0,null,null,1,"div",[["class","slidecontainer"]],null,null,null,null,null)),(e()(),eo(48,0,null,null,0,"input",[["class","slider"],["id","soundEffectsVolume"],["max","100"],["min","0"],["type","range"],["value","100"]],[[8,"value",0]],[[null,"change"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.changeSoundEffectsVolume(t)&&l),l},null,null)),(e()(),eo(49,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(50,0,null,null,5,"input",[["id","soundEffectMarket"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,51).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==ii(e,51).onTouched()&&l),"change"===n&&(l=!1!==i.updateOptions()&&l),"ngModelChange"===n&&(l=!1!==(i.soundEffectMarket=t)&&l),l},null,null)),vi(51,16384,null,0,Fg,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[Fg]),vi(53,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(55,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(56,0,null,null,1,"label",[["for","soundEffectMarket"]],null,null,null,null,null)),(e()(),fo(-1,null,["Play sound when merchant arrives"])),(e()(),eo(58,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(59,0,null,null,5,"input",[["id","soundEffectResearch"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,60).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==ii(e,60).onTouched()&&l),"change"===n&&(l=!1!==i.updateOptions()&&l),"ngModelChange"===n&&(l=!1!==(i.soundEffectResearch=t)&&l),l},null,null)),vi(60,16384,null,0,Fg,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[Fg]),vi(62,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(64,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(65,0,null,null,1,"label",[["for","soundEffectResearch"]],null,null,null,null,null)),(e()(),fo(-1,null,["Play sound when research is finished"])),(e()(),eo(67,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(68,0,null,null,5,"input",[["id","soundEffectInvasion"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,69).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==ii(e,69).onTouched()&&l),"change"===n&&(l=!1!==i.updateOptions()&&l),"ngModelChange"===n&&(l=!1!==(i.soundEffectInvasion=t)&&l),l},null,null)),vi(69,16384,null,0,Fg,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[Fg]),vi(71,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(73,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(74,0,null,null,1,"label",[["for","soundEffectInvasion"]],null,null,null,null,null)),(e()(),fo(-1,null,["Play sound when invasion is coming"])),(e()(),eo(76,0,null,null,0,"br",[],null,null,null,null,null))],function(e,n){var t=n.component;e(n,9,0,t.soundMaster),e(n,24,0,t.soundMusic),e(n,39,0,t.soundEffects),e(n,53,0,t.soundEffectMarket),e(n,62,0,t.soundEffectResearch),e(n,71,0,t.soundEffectInvasion)},function(e,n){var t=n.component;e(n,6,0,ii(n,11).ngClassUntouched,ii(n,11).ngClassTouched,ii(n,11).ngClassPristine,ii(n,11).ngClassDirty,ii(n,11).ngClassValid,ii(n,11).ngClassInvalid,ii(n,11).ngClassPending),e(n,16,0,t.getSoundMasterVolume()),e(n,18,0,t.getSoundMasterVolume()),e(n,21,0,ii(n,26).ngClassUntouched,ii(n,26).ngClassTouched,ii(n,26).ngClassPristine,ii(n,26).ngClassDirty,ii(n,26).ngClassValid,ii(n,26).ngClassInvalid,ii(n,26).ngClassPending),e(n,31,0,t.getSoundMusicVolume()),e(n,33,0,t.getSoundMusicVolume()),e(n,36,0,ii(n,41).ngClassUntouched,ii(n,41).ngClassTouched,ii(n,41).ngClassPristine,ii(n,41).ngClassDirty,ii(n,41).ngClassValid,ii(n,41).ngClassInvalid,ii(n,41).ngClassPending),e(n,46,0,t.getSoundEffectsVolume()),e(n,48,0,t.getSoundEffectsVolume()),e(n,50,0,ii(n,55).ngClassUntouched,ii(n,55).ngClassTouched,ii(n,55).ngClassPristine,ii(n,55).ngClassDirty,ii(n,55).ngClassValid,ii(n,55).ngClassInvalid,ii(n,55).ngClassPending),e(n,59,0,ii(n,64).ngClassUntouched,ii(n,64).ngClassTouched,ii(n,64).ngClassPristine,ii(n,64).ngClassDirty,ii(n,64).ngClassValid,ii(n,64).ngClassInvalid,ii(n,64).ngClassPending),e(n,68,0,ii(n,73).ngClassUntouched,ii(n,73).ngClassTouched,ii(n,73).ngClassPristine,ii(n,73).ngClassDirty,ii(n,73).ngClassValid,ii(n,73).ngClassInvalid,ii(n,73).ngClassPending)})}function Ox(e){return So(0,[(e()(),eo(0,0,null,null,34,"div",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),fo(-1,null,["Game difficulty"])),(e()(),eo(3,0,null,null,31,"div",[["class","options"]],null,null,null,null,null)),(e()(),eo(4,0,null,null,1,"h5",[],null,null,null,null,null)),(e()(),fo(-1,null,["AI strength"])),(e()(),eo(6,0,null,null,6,"input",[["id","AIeasy"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,7)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,7).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,7)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,7)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==ii(e,8).onChange()&&l),"blur"===n&&(l=!1!==ii(e,8).onTouched()&&l),"change"===n&&(l=!1!==i.updateOptions()&&l),"ngModelChange"===n&&(l=!1!==(i.AIDifficulty=t)&&l),l},null,null)),vi(7,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),vi(8,212992,null,0,nf,[St,dt,ef,Xe],{value:[0,"value"]},null),Ei(1024,null,Lg,function(e,n){return[e,n]},[Hg,nf]),vi(10,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(12,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(13,0,null,null,1,"label",[["for","AIeasy"]],null,null,null,null,null)),(e()(),fo(-1,null,["Easy"])),(e()(),eo(15,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(16,0,null,null,6,"input",[["id","AImedium"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,17)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,17).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,17)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,17)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==ii(e,18).onChange()&&l),"blur"===n&&(l=!1!==ii(e,18).onTouched()&&l),"change"===n&&(l=!1!==i.updateOptions()&&l),"ngModelChange"===n&&(l=!1!==(i.AIDifficulty=t)&&l),l},null,null)),vi(17,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),vi(18,212992,null,0,nf,[St,dt,ef,Xe],{value:[0,"value"]},null),Ei(1024,null,Lg,function(e,n){return[e,n]},[Hg,nf]),vi(20,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(22,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(23,0,null,null,1,"label",[["for","AImedium"]],null,null,null,null,null)),(e()(),fo(-1,null,["Medium"])),(e()(),eo(25,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(26,0,null,null,6,"input",[["id","AIhard"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,27)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,27).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,27)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,27)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==ii(e,28).onChange()&&l),"blur"===n&&(l=!1!==ii(e,28).onTouched()&&l),"change"===n&&(l=!1!==i.updateOptions()&&l),"ngModelChange"===n&&(l=!1!==(i.AIDifficulty=t)&&l),l},null,null)),vi(27,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),vi(28,212992,null,0,nf,[St,dt,ef,Xe],{value:[0,"value"]},null),Ei(1024,null,Lg,function(e,n){return[e,n]},[Hg,nf]),vi(30,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(32,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(33,0,null,null,1,"label",[["for","AIhard"]],null,null,null,null,null)),(e()(),fo(-1,null,["Hard"]))],function(e,n){var t=n.component;e(n,8,0,t.AIDiffs.EASY),e(n,10,0,t.AIDifficulty),e(n,18,0,t.AIDiffs.MEDIUM),e(n,20,0,t.AIDifficulty),e(n,28,0,t.AIDiffs.HARD),e(n,30,0,t.AIDifficulty)},function(e,n){e(n,6,0,ii(n,12).ngClassUntouched,ii(n,12).ngClassTouched,ii(n,12).ngClassPristine,ii(n,12).ngClassDirty,ii(n,12).ngClassValid,ii(n,12).ngClassInvalid,ii(n,12).ngClassPending),e(n,16,0,ii(n,22).ngClassUntouched,ii(n,22).ngClassTouched,ii(n,22).ngClassPristine,ii(n,22).ngClassDirty,ii(n,22).ngClassValid,ii(n,22).ngClassInvalid,ii(n,22).ngClassPending),e(n,26,0,ii(n,32).ngClassUntouched,ii(n,32).ngClassTouched,ii(n,32).ngClassPristine,ii(n,32).ngClassDirty,ii(n,32).ngClassValid,ii(n,32).ngClassInvalid,ii(n,32).ngClassPending)})}function Tx(e){return So(0,[(e()(),eo(0,0,null,null,40,"div",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),fo(-1,null,["Performance options"])),(e()(),eo(3,0,null,null,37,"div",[["class","options"]],null,null,null,null,null)),(e()(),eo(4,0,null,null,5,"input",[["id","pagedView"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,5).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==ii(e,5).onTouched()&&l),"change"===n&&(l=!1!==i.updateOptions()&&l),"ngModelChange"===n&&(l=!1!==(i.pagedView=t)&&l),l},null,null)),vi(5,16384,null,0,Fg,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[Fg]),vi(7,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(9,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(10,0,null,null,1,"label",[["for","pagedView"]],null,null,null,null,null)),(e()(),fo(-1,null,["Display buildings in pages instead of all at once"])),(e()(),eo(12,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(13,0,null,null,6,"input",[["id","buildingPerPage"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,14)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,14).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,14)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,14)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==ii(e,15).onChange(t.target.value)&&l),"input"===n&&(l=!1!==ii(e,15).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,15).onTouched()&&l),"change"===n&&(l=!1!==i.updateOptions()&&l),"ngModelChange"===n&&(l=!1!==(i.buildingsPerPage=t)&&l),l},null,null)),vi(14,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),vi(15,16384,null,0,Jg,[St,dt],null,null),Ei(1024,null,Lg,function(e,n){return[e,n]},[Hg,Jg]),vi(17,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(19,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(20,0,null,null,1,"label",[["for","buildingPerPage"]],null,null,null,null,null)),(e()(),fo(-1,null,["Number of buildings on one page"])),(e()(),eo(22,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(23,0,null,null,5,"input",[["id","visualProgressBars"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,24).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==ii(e,24).onTouched()&&l),"change"===n&&(l=!1!==i.updateOptions()&&l),"ngModelChange"===n&&(l=!1!==(i.visualProgressBars=t)&&l),l},null,null)),vi(24,16384,null,0,Fg,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[Fg]),vi(26,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(28,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(29,0,null,null,1,"label",[["for","visualProgressBars"]],null,null,null,null,null)),(e()(),fo(-1,null,["Display moving progress bars (on) or just text (off)"])),(e()(),eo(31,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(32,0,null,null,5,"input",[["id","autoTextFitting"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,33).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==ii(e,33).onTouched()&&l),"change"===n&&(l=!1!==i.updateOptions()&&l),"ngModelChange"===n&&(l=!1!==(i.autoTextFitting=t)&&l),l},null,null)),vi(33,16384,null,0,Fg,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[Fg]),vi(35,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(37,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(38,0,null,null,1,"label",[["for","autoTextFitting"]],null,null,null,null,null)),(e()(),fo(-1,null,["Buildings names and effect font size will be automatically recalculated on change"])),(e()(),eo(40,0,null,null,0,"br",[],null,null,null,null,null))],function(e,n){var t=n.component;e(n,7,0,t.pagedView),e(n,17,0,t.buildingsPerPage),e(n,26,0,t.visualProgressBars),e(n,35,0,t.autoTextFitting)},function(e,n){e(n,4,0,ii(n,9).ngClassUntouched,ii(n,9).ngClassTouched,ii(n,9).ngClassPristine,ii(n,9).ngClassDirty,ii(n,9).ngClassValid,ii(n,9).ngClassInvalid,ii(n,9).ngClassPending),e(n,13,0,ii(n,19).ngClassUntouched,ii(n,19).ngClassTouched,ii(n,19).ngClassPristine,ii(n,19).ngClassDirty,ii(n,19).ngClassValid,ii(n,19).ngClassInvalid,ii(n,19).ngClassPending),e(n,23,0,ii(n,28).ngClassUntouched,ii(n,28).ngClassTouched,ii(n,28).ngClassPristine,ii(n,28).ngClassDirty,ii(n,28).ngClassValid,ii(n,28).ngClassInvalid,ii(n,28).ngClassPending),e(n,32,0,ii(n,37).ngClassUntouched,ii(n,37).ngClassTouched,ii(n,37).ngClassPristine,ii(n,37).ngClassDirty,ii(n,37).ngClassValid,ii(n,37).ngClassInvalid,ii(n,37).ngClassPending)})}function Cx(e){return So(0,[(e()(),eo(0,0,null,null,25,"div",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),fo(-1,null,["Display options"])),(e()(),eo(3,0,null,null,22,"div",[["class","options"]],null,null,null,null,null)),(e()(),eo(4,0,null,null,5,"input",[["id","positiveColour"],["type","color"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,5)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,5).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,5)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,5)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==i.setPositiveColour()&&l),"ngModelChange"===n&&(l=!1!==(i.positiveColour=t)&&l),l},null,null)),vi(5,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),Ei(1024,null,Lg,function(e){return[e]},[Hg]),vi(7,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(9,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(10,0,null,null,1,"label",[["for","positiveColour"]],null,null,null,null,null)),(e()(),fo(-1,null,["Font colour for positive effects"])),(e()(),eo(12,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.resetPositiveColour()&&l),l},null,null)),(e()(),fo(-1,null,["reset to default"])),(e()(),eo(14,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(15,0,null,null,5,"input",[["id","negativeColour"],["type","color"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,16)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,16).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,16)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,16)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==i.setNegativeColour()&&l),"ngModelChange"===n&&(l=!1!==(i.negativeColour=t)&&l),l},null,null)),vi(16,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),Ei(1024,null,Lg,function(e){return[e]},[Hg]),vi(18,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(20,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(21,0,null,null,1,"label",[["for","negativeColour"]],null,null,null,null,null)),(e()(),fo(-1,null,["Font colour for negative effects"])),(e()(),eo(23,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.resetNegativeColour()&&l),l},null,null)),(e()(),fo(-1,null,["reset to default"])),(e()(),eo(25,0,null,null,0,"br",[],null,null,null,null,null))],function(e,n){var t=n.component;e(n,7,0,t.positiveColour),e(n,18,0,t.negativeColour)},function(e,n){e(n,4,0,ii(n,9).ngClassUntouched,ii(n,9).ngClassTouched,ii(n,9).ngClassPristine,ii(n,9).ngClassDirty,ii(n,9).ngClassValid,ii(n,9).ngClassInvalid,ii(n,9).ngClassPending),e(n,15,0,ii(n,20).ngClassUntouched,ii(n,20).ngClassTouched,ii(n,20).ngClassPristine,ii(n,20).ngClassDirty,ii(n,20).ngClassValid,ii(n,20).ngClassInvalid,ii(n,20).ngClassPending)})}function Ix(e){return So(0,[(e()(),eo(0,0,null,null,49,"app-modal",[["id","options-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==ii(e,1).onKeydownHandler(t)&&l),l},ww,_w)),vi(1,4440064,null,0,Nw,[St,dt,qf],{id:[0,"id"]},null),(e()(),eo(2,0,null,0,46,"div",[["class","modal"]],null,null,null,null,null)),(e()(),eo(3,0,null,null,45,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),eo(4,0,null,null,25,"div",[["id","sections"]],null,null,null,null,null)),(e()(),eo(5,0,null,null,4,"div",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==(e.component.selection=0)&&l),l},null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(7,278528,null,0,Js,[Xs],{ngClass:[0,"ngClass"]},null),ho(8,{x:0}),(e()(),fo(-1,null,["General"])),(e()(),eo(10,0,null,null,4,"div",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==(e.component.selection=1)&&l),l},null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(12,278528,null,0,Js,[Xs],{ngClass:[0,"ngClass"]},null),ho(13,{x:0}),(e()(),fo(-1,null,["Sound"])),(e()(),eo(15,0,null,null,4,"div",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==(e.component.selection=2)&&l),l},null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(17,278528,null,0,Js,[Xs],{ngClass:[0,"ngClass"]},null),ho(18,{x:0}),(e()(),fo(-1,null,["Difficulty"])),(e()(),eo(20,0,null,null,4,"div",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==(e.component.selection=3)&&l),l},null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(22,278528,null,0,Js,[Xs],{ngClass:[0,"ngClass"]},null),ho(23,{x:0}),(e()(),fo(-1,null,["Performance"])),(e()(),eo(25,0,null,null,4,"div",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==(e.component.selection=4)&&l),l},null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(27,278528,null,0,Js,[Xs],{ngClass:[0,"ngClass"]},null),ho(28,{x:0}),(e()(),fo(-1,null,["Display"])),(e()(),Jr(16777216,null,null,1,null,Rx)),vi(31,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,bx)),vi(33,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,Ox)),vi(35,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,Tx)),vi(37,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,Cx)),vi(39,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(40,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(41,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(42,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(43,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.resetAll()&&l),l},null,null)),(e()(),fo(-1,null,["RESET ALL SETTINGS"])),(e()(),eo(45,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(46,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(47,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.close()&&l),l},null,null)),(e()(),fo(-1,null,["Close"])),(e()(),eo(49,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,1,0,"options-modal");var l=e(n,8,0,0===t.selection);e(n,7,0,l);var i=e(n,13,0,1===t.selection);e(n,12,0,i);var r=e(n,18,0,2===t.selection);e(n,17,0,r);var o=e(n,23,0,3===t.selection);e(n,22,0,o);var u=e(n,28,0,4===t.selection);e(n,27,0,u),e(n,31,0,0===t.selection),e(n,33,0,1===t.selection),e(n,35,0,2===t.selection),e(n,37,0,3===t.selection),e(n,39,0,4===t.selection)},null)}var Ax=function(){function e(e,n,t){this.kongregateService=e,this.royalService=n,this.modalService=t}return e.prototype.ngOnInit=function(){},e.prototype.ok=function(){this.modalService.close(ju.ROYAL)},e.prototype.buy=function(e){is.production?this.kongregateService.buyItem(e):(this.royalService.increaseRoyalPoints(Number(e.replace("rp_pack",""))),this.modalService.close(ju.ROYAL))},e}(),Nx=rl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}.kred[_ngcontent-%COMP%]{width:30px;height:30px;vertical-align:middle}.value[_ngcontent-%COMP%]{margin-top:5px}.entry[_ngcontent-%COMP%]{width:50%;text-align:center}#close[_ngcontent-%COMP%]{margin-top:15px}"]],data:{}});function _x(e){return So(0,[(e()(),eo(0,0,null,null,33,"app-modal",[["id","royal-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==ii(e,1).onKeydownHandler(t)&&l),l},ww,_w)),vi(1,4440064,null,0,Nw,[St,dt,qf],{id:[0,"id"]},null),(e()(),eo(2,0,null,0,30,"div",[["class","modal"]],null,null,null,null,null)),(e()(),eo(3,0,null,null,29,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),eo(4,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["Choose how many Royal Points you would like to buy:"])),(e()(),eo(6,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(7,0,null,null,5,"div",[["class","entry"]],null,null,null,null,null)),(e()(),eo(8,0,null,null,2,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.buy("rp_pack10")&&l),l},null,null)),(e()(),fo(-1,null,["10 "])),(e()(),eo(10,0,null,null,0,"img",[["alt","Kreds"],["class","kred"],["src","assets/kred.png"]],null,null,null,null,null)),(e()(),eo(11,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,[" 10 Royal points"])),(e()(),eo(13,0,null,null,5,"div",[["class","entry"]],null,null,null,null,null)),(e()(),eo(14,0,null,null,2,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.buy("rp_pack20")&&l),l},null,null)),(e()(),fo(-1,null,["20 "])),(e()(),eo(16,0,null,null,0,"img",[["alt","Kreds"],["class","kred"],["src","assets/kred.png"]],null,null,null,null,null)),(e()(),eo(17,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,[" 20 Royal points"])),(e()(),eo(19,0,null,null,5,"div",[["class","entry"]],null,null,null,null,null)),(e()(),eo(20,0,null,null,2,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.buy("rp_pack55")&&l),l},null,null)),(e()(),fo(-1,null,["50 "])),(e()(),eo(22,0,null,null,0,"img",[["alt","Kreds"],["class","kred"],["src","assets/kred.png"]],null,null,null,null,null)),(e()(),eo(23,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,[" 55 Royal points"])),(e()(),eo(25,0,null,null,5,"div",[["class","entry"]],null,null,null,null,null)),(e()(),eo(26,0,null,null,2,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.buy("rp_pack125")&&l),l},null,null)),(e()(),fo(-1,null,["100 "])),(e()(),eo(28,0,null,null,0,"img",[["alt","Kreds"],["class","kred"],["src","assets/kred.png"]],null,null,null,null,null)),(e()(),eo(29,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,[" 125 Royal points"])),(e()(),eo(31,0,null,null,1,"button",[["id","close"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.ok()&&l),l},null,null)),(e()(),fo(-1,null,["CLOSE"])),(e()(),eo(33,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){e(n,1,0,"royal-modal")},null)}var wx=function(){function e(e,n,t,l,i){var r=this;this.servicesService=e,this.modalService=n,this.idService=t,this.resourcesService=l,this.worldService=i,this.colonistsHolder=0,this.troopsHolder=new Array(Object.values(Lu).length).fill(0),this.expeditionDistance=1,this.discoveredLand=0,this.missions=xu,this.resources=Iu,n.registerForMissionData().subscribe(function(e){r.missionData=e,r.troopsHolder=new Array(Object.values(Lu).length).fill(0),r.colonistsHolder=0,r.discoveredLand=r.worldService.getDiscoveredLand(),r.expeditionDistance=r.calculateMaxDistance()})}return e.prototype.ngOnInit=function(){},e.prototype.closeModal=function(){this.modalService.close(ju.MISSION),this.missionData=null},e.prototype.conquer=function(){var e=this,n=this.worldService.findPath(this.missionData.originRegion.id,this.missionData.targetRegion.id,Uu.PLAYER),t=new _R([]);this.getTroops(xu.CONQUER).forEach(function(n){e.troopsHolder[n]>0&&(t.addTroop(n,e.troopsHolder[n]),e.missionData.originRegion.army.removeTroop(n,e.troopsHolder[n]))}),this.worldService.addMission(new pO(this.servicesService,this.idService.getNextId(),this.worldService.getPlayerCountry(),t,n)),this.closeModal()},e.prototype.colonize=function(){if(this.resourcesService.removeRecruit(this.colonistsHolder)){var e=this.worldService.findPath(0,this.missionData.targetRegion.id,Uu.PLAYER);this.worldService.addMission(new cO(this.servicesService,this.idService.getNextId(),this.worldService.getPlayerCountry(),new _R([new NR(Lu.COLONIST,this.colonistsHolder)]),e)),this.closeModal()}else this.modalService.info("Not enough villagers")},e.prototype.plunder=function(){var e=this,n=this.worldService.findPath(this.missionData.originRegion.id,this.missionData.targetRegion.id,Uu.PLAYER),t=new _R([]);this.getTroops(xu.PLUNDER).forEach(function(n){e.troopsHolder[n]>0&&(t.addTroop(n,e.troopsHolder[n]),e.missionData.originRegion.army.removeTroop(n,e.troopsHolder[n]))}),this.worldService.addMission(new dO(this.servicesService,this.idService.getNextId(),this.worldService.getPlayerCountry(),t,n)),this.closeModal()},e.prototype.move=function(){var e=this,n=this.worldService.findPath(this.missionData.originRegion.id,this.missionData.targetRegion.id,Uu.PLAYER),t=new _R([]);this.getTroops(xu.MOVE).forEach(function(n){e.troopsHolder[n]>0&&(t.addTroop(n,e.troopsHolder[n]),e.missionData.originRegion.army.removeTroop(n,e.troopsHolder[n]))}),this.worldService.addMission(new hO(this.servicesService,this.idService.getNextId(),this.worldService.getPlayerCountry(),t,n)),this.closeModal()},e.prototype.spy=function(){var e=this.worldService.findPath(this.missionData.originRegion.id,this.missionData.targetRegion.id,Uu.SPECIAL);this.worldService.addMission(new gO(this.servicesService,this.idService.getNextId(),this.worldService.getPlayerCountry(),new _R([new NR(Lu.SPY,this.troopsHolder[Lu.SPY])]),e)),this.missionData.originRegion.army.removeTroop(Lu.SPY,this.troopsHolder[Lu.SPY]),this.closeModal()},e.prototype.seaMove=function(){var e=this,n=this.worldService.findSeaPath(this.missionData.originRegion.id,this.missionData.targetRegion.id),t=new _R([]);this.getTroops(xu.SEA_MOVE).forEach(function(n){e.troopsHolder[n]>0&&(t.addTroop(n,e.troopsHolder[n]),n===Lu.BOAT||n===Lu.BRIGANTINE||n===Lu.GALLEON?e.missionData.originRegion.navy.removeTroop(n,e.troopsHolder[n]):e.missionData.originRegion.army.removeTroop(n,e.troopsHolder[n]))}),this.worldService.addMission(new CO(this.servicesService,this.idService.getNextId(),this.worldService.getPlayerCountry(),t,n)),this.closeModal()},e.prototype.seaPlunder=function(){var e=this,n=this.worldService.findSeaPath(this.missionData.originRegion.id,this.missionData.targetRegion.id),t=new _R([]);this.getTroops(xu.SEA_PLUNDER).forEach(function(n){e.troopsHolder[n]>0&&(t.addTroop(n,e.troopsHolder[n]),n===Lu.BOAT||n===Lu.BRIGANTINE||n===Lu.GALLEON?e.missionData.originRegion.navy.removeTroop(n,e.troopsHolder[n]):e.missionData.originRegion.army.removeTroop(n,e.troopsHolder[n]))}),this.worldService.addMission(new TO(this.servicesService,this.idService.getNextId(),this.worldService.getPlayerCountry(),t,n)),this.closeModal()},e.prototype.seaConquer=function(){var e=this,n=this.worldService.findSeaPath(this.missionData.originRegion.id,this.missionData.targetRegion.id),t=new _R([]);this.getTroops(xu.SEA_CONQUER).forEach(function(n){e.troopsHolder[n]>0&&(t.addTroop(n,e.troopsHolder[n]),n===Lu.BOAT||n===Lu.BRIGANTINE||n===Lu.GALLEON?e.missionData.originRegion.navy.removeTroop(n,e.troopsHolder[n]):e.missionData.originRegion.army.removeTroop(n,e.troopsHolder[n]))}),this.worldService.addMission(new OO(this.servicesService,this.idService.getNextId(),this.worldService.getPlayerCountry(),t,n)),this.closeModal()},e.prototype.fishing=function(){var e=this,n=this.worldService.findSeaPath(this.missionData.originRegion.id,this.missionData.targetSeaEvent.parentId),t=new _R([]);this.getTroops(xu.FISHING).forEach(function(n){e.troopsHolder[n]>0&&(t.addTroop(n,e.troopsHolder[n]),n!==Lu.BOAT&&n!==Lu.BRIGANTINE&&n!==Lu.GALLEON||e.missionData.originRegion.navy.removeTroop(n,e.troopsHolder[n]))}),this.worldService.addMission(new vO(this.servicesService,this.idService.getNextId(),this.worldService.getPlayerCountry(),t,n)),this.closeModal()},e.prototype.hunting=function(){var e=this,n=this.worldService.findSeaPath(this.missionData.originRegion.id,this.missionData.targetSeaEvent.parentId),t=new _R([]);this.getTroops(xu.HUNTING).forEach(function(n){e.troopsHolder[n]>0&&(t.addTroop(n,e.troopsHolder[n]),n!==Lu.BOAT&&n!==Lu.BRIGANTINE&&n!==Lu.GALLEON||e.missionData.originRegion.navy.removeTroop(n,e.troopsHolder[n]))}),this.worldService.addMission(new SO(this.servicesService,this.idService.getNextId(),this.worldService.getPlayerCountry(),t,n)),this.closeModal()},e.prototype.treasure=function(){var e=this,n=this.worldService.findSeaPath(this.missionData.originRegion.id,this.missionData.targetSeaEvent.parentId),t=new _R([]);this.getTroops(xu.TREASURE).forEach(function(n){e.troopsHolder[n]>0&&(t.addTroop(n,e.troopsHolder[n]),n!==Lu.BOAT&&n!==Lu.BRIGANTINE&&n!==Lu.GALLEON||e.missionData.originRegion.navy.removeTroop(n,e.troopsHolder[n]))}),this.worldService.addMission(new EO(this.servicesService,this.idService.getNextId(),this.worldService.getPlayerCountry(),t,n)),this.closeModal()},e.prototype.cartography=function(){var e=this,n=this.worldService.findSeaPath(this.missionData.originRegion.id,this.missionData.targetSeaEvent.parentId),t=new _R([]);this.getTroops(xu.CARTOGRAPHY).forEach(function(n){e.troopsHolder[n]>0&&(t.addTroop(n,e.troopsHolder[n]),n!==Lu.BOAT&&n!==Lu.BRIGANTINE&&n!==Lu.GALLEON||e.missionData.originRegion.navy.removeTroop(n,e.troopsHolder[n]))}),this.worldService.addMission(new RO(this.servicesService,this.idService.getNextId(),this.worldService.getPlayerCountry(),t,n)),this.closeModal()},e.prototype.seaBattle=function(){var e=this,n=this.worldService.findSeaPath(this.missionData.originRegion.id,this.missionData.targetSeaEvent.parentId),t=new _R([]);this.getTroops(xu.SEA_BATTLE).forEach(function(n){e.troopsHolder[n]>0&&(t.addTroop(n,e.troopsHolder[n]),n!==Lu.BOAT&&n!==Lu.BRIGANTINE&&n!==Lu.GALLEON||e.missionData.originRegion.navy.removeTroop(n,e.troopsHolder[n]))}),this.worldService.addMission(new bO(this.servicesService,this.idService.getNextId(),this.worldService.getPlayerCountry(),t,n)),this.closeModal()},e.prototype.expedition=function(){var e=this,n=this.worldService.findSeaPath(this.missionData.originRegion.id,-9999),t=new _R([]);this.getTroops(xu.EXPEDITION).forEach(function(n){e.troopsHolder[n]>0&&(t.addTroop(n,e.troopsHolder[n]),n===Lu.BOAT||n===Lu.BRIGANTINE||n===Lu.GALLEON?e.missionData.originRegion.navy.removeTroop(n,e.troopsHolder[n]):e.missionData.originRegion.army.removeTroop(n,e.troopsHolder[n]))});var l=new yO(this.servicesService,this.idService.getNextId(),this.worldService.getPlayerCountry(),t,n);l.data=this.calculateExpeditionChance(),this.worldService.addMission(l),this.closeModal()},e.prototype.prepareViewbox=function(e){return e.x-65+" "+(e.y-65)+" 130 130"},e.prototype.isMissionAllowed=function(e){if(this.missionData.missionType===xu.EXPEDITION&&e===xu.EXPEDITION)return!0;if(this.missionData.targetRegionCountry)if(this.missionData.targetRegionCountry===Uu.PLAYER){if(e===xu.MOVE||e===xu.SEA_MOVE&&this.isSeaAvailable())return!0}else if(this.missionData.targetRegionCountry===Uu.NEUTRAL){if(e===xu.MOVE||e===xu.COLONIZE||e===xu.SEA_MOVE&&this.isSeaAvailable())return!0}else{if(e===xu.SPY)return!0;if((e===xu.PLUNDER||e===xu.CONQUER)&&this.hasPath())return!0;if((e===xu.SEA_PLUNDER||e===xu.SEA_CONQUER)&&this.hasSeaPath())return!0}else if(this.missionData.targetSeaEvent&&(this.missionData.targetSeaEvent.type===Bu.FISH&&e===xu.FISHING||this.missionData.targetSeaEvent.type===Bu.SHARK&&e===xu.HUNTING||this.missionData.targetSeaEvent.type===Bu.TREASURE&&e===xu.TREASURE||this.missionData.targetSeaEvent.type===Bu.CARTOGRAPHY&&e===xu.CARTOGRAPHY||this.missionData.targetSeaEvent.type===Bu.PIRATES&&e===xu.SEA_BATTLE||this.missionData.targetSeaEvent.type===Bu.PIRATES_BASE&&e===xu.SEA_BATTLE))return!0;return!1},e.prototype.hasPath=function(){return!!(this.missionData.originRegion&&this.missionData.targetRegion&&this.worldService.findPath(this.missionData.originRegion.id,this.missionData.targetRegion.id,Uu.PLAYER,!0))},e.prototype.hasSeaPath=function(){return!!(this.missionData.originRegion&&this.missionData.targetRegion&&this.worldService.findSeaPath(this.missionData.originRegion.id,this.missionData.targetRegion.id,!0))},e.prototype.changeMission=function(e){this.missionData.missionType=e,e===xu.COLONIZE&&(this.missionData.originRegion=this.worldService.getRegion(0),this.missionData.originRegionColour=this.worldService.getPlayerCountry().colour)},e.prototype.start=function(){var e=this;if(this.canStart()){switch(this.getMissionCost(this.missionData.missionType).forEach(function(n){e.resourcesService.decreaseResource(n.resource,n.amount*e.getUnitsNumber(),"Mission",!0)}),this.missionData.missionType===xu.EXPEDITION&&this.resourcesService.decreaseResource(Iu.MAP,1,"Mission",!0),this.missionData.missionType){case xu.MOVE:this.move();break;case xu.PLUNDER:this.plunder();break;case xu.CONQUER:this.conquer();break;case xu.COLONIZE:this.colonize();break;case xu.SPY:this.spy();break;case xu.SEA_MOVE:this.seaMove();break;case xu.SEA_PLUNDER:this.seaPlunder();break;case xu.SEA_CONQUER:this.seaConquer();break;case xu.FISHING:this.fishing();break;case xu.HUNTING:this.hunting();break;case xu.TREASURE:this.treasure();break;case xu.CARTOGRAPHY:this.cartography();break;case xu.SEA_BATTLE:this.seaBattle();break;case xu.EXPEDITION:this.expedition()}this.troopsHolder=new Array(Object.values(Lu).length).fill(0),this.colonistsHolder=0}},e.prototype.getTroopName=function(e){return Vu.prepareTroopName(e)},e.prototype.getTroops=function(e){return e===xu.MOVE?[Lu.SPY,Lu.MILITIA,Lu.SPEARMAN,Lu.ARCHER,Lu.SWORDSMAN,Lu.LIGHT_CAVALRY,Lu.HORSE_ARCHER]:e===xu.SEA_MOVE?[Lu.MILITIA,Lu.SPEARMAN,Lu.ARCHER,Lu.SWORDSMAN,Lu.LIGHT_CAVALRY,Lu.HORSE_ARCHER,Lu.BOAT,Lu.BRIGANTINE,Lu.GALLEON]:e===xu.SEA_PLUNDER||e===xu.SEA_CONQUER||e===xu.EXPEDITION?[Lu.SPEARMAN,Lu.ARCHER,Lu.SWORDSMAN,Lu.LIGHT_CAVALRY,Lu.HORSE_ARCHER,Lu.BOAT,Lu.BRIGANTINE,Lu.GALLEON]:e===xu.FISHING||e===xu.HUNTING||e===xu.TREASURE||e===xu.CARTOGRAPHY||e===xu.SEA_BATTLE?[Lu.BOAT,Lu.BRIGANTINE,Lu.GALLEON]:[Lu.SPEARMAN,Lu.ARCHER,Lu.SWORDSMAN,Lu.LIGHT_CAVALRY,Lu.HORSE_ARCHER]},e.prototype.getSpyUnits=function(){return[Lu.SPY]},e.prototype.getTroop=function(e){return e!==Lu.BOAT&&e!==Lu.BRIGANTINE&&e!==Lu.GALLEON?this.missionData.originRegion.army.units.find(function(n){return n.troop===e})||new NR(e,0):this.missionData.originRegion.navy.units.find(function(n){return n.troop===e})||new NR(e,0)},e.prototype.changeOrigin=function(){var e=this;if(this.missionData.missionType!==xu.COLONIZE){this.modalService.open(ju.WORLD),this.modalService.setRegionSelection(!0);var n=this.modalService.registerForReturnRegion().subscribe(function(t){n.unsubscribe(),null!==t&&(e.missionData.originRegionColour=e.worldService.getCountryByRegionId(t.id).colour,e.missionData.originRegion=t,e.troopsHolder=new Array(Object.values(Lu).length).fill(0))})}else this.modalService.info("Cannot change origin region for colonization mission")},e.prototype.changeTarget=function(){var e=this;this.modalService.open(ju.WORLD),this.modalService.setRegionSelection(!1);var n=this.modalService.registerForReturnRegion().subscribe(function(t){if(n.unsubscribe(),null!==t){var l=e.worldService.getCountryByRegionId(t.id);e.missionData.targetRegionColour=l.colour,e.missionData.targetRegionCountry=l.id,e.missionData.targetRegion=t,l.id===Uu.PLAYER||l.id===Uu.NEUTRAL?e.isMissionAllowed(e.missionData.missionType)||(e.missionData.missionType=xu.MOVE):e.isMissionAllowed(e.missionData.missionType)||(e.missionData.missionType=xu.PLUNDER,e.troopsHolder[Lu.MILITIA]=0)}})},e.prototype.canStart=function(){var e=this,n=!1;if(this.missionData.originRegion&&this.missionData.targetRegion&&this.missionData.originRegion!==this.missionData.targetRegion?this.missionData.missionType===xu.SPY&&this.troopsHolder[Lu.SPY]>0?n=!0:this.missionData.missionType===xu.COLONIZE?n=this.colonistsHolder>0:this.anyTroops()&&(n=!0):this.missionData.originRegion&&this.missionData.targetSeaEvent?this.anyTroops()&&(n=!0):this.missionData.originRegion&&this.missionData.missionType===xu.EXPEDITION&&this.anyTroops()&&(n=!0),this.missionData.missionType===xu.FISHING||this.missionData.missionType===xu.HUNTING||this.missionData.missionType===xu.TREASURE||this.missionData.missionType===xu.CARTOGRAPHY||this.missionData.missionType===xu.SEA_BATTLE)this.worldService.findSeaPath(this.missionData.originRegion.id,this.missionData.targetSeaEvent.parentId,!0)||(n=!1);else if(this.missionData.originRegion&&this.missionData.targetRegion&&this.missionData.originRegion!==this.missionData.targetRegion&&this.missionData.missionType===xu.SEA_MOVE||this.missionData.missionType===xu.SEA_PLUNDER||this.missionData.missionType===xu.SEA_CONQUER||this.missionData.missionType===xu.EXPEDITION)this.missionData.missionType===xu.EXPEDITION?(this.worldService.findSeaPath(this.missionData.originRegion.id,-9999,!0)||(n=!1),this.hasResource(Iu.MAP,1)||(n=!1),this.calculateExpeditionChance()<=0&&(n=!1),this.calculateExpeditionLand()<=0&&(n=!1)):this.worldService.findSeaPath(this.missionData.originRegion.id,this.missionData.targetRegion.id,!0)||(n=!1),n&&0===this.getNavyCapacity()&&(n=!1),n&&this.getTroopsSize()>this.getNavyCapacity()&&(n=!1);else if(n&&(this.worldService.findPath(this.missionData.originRegion.id,this.missionData.targetRegion.id,Uu.PLAYER,!0)||(n=!1)),n)for(var t=0;t<this.troopsHolder.length;t++)this.troopsHolder[t]>0&&(void 0===this.missionData.originRegion.army.getUnit(t)||this.missionData.originRegion.army.getUnit(t).size<this.troopsHolder[t])&&(n=!1);return n&&this.getMissionCost(this.missionData.missionType).forEach(function(t){e.hasResource(t.resource,t.amount*e.getUnitsNumber())||(n=!1)}),n},e.prototype.anyTroops=function(){var e=!1;return this.troopsHolder.forEach(function(n){n>0&&(e=!0)}),e},e.prototype.getFreeWorkers=function(){return this.resourcesService.getPeople()<20?this.resourcesService.getPeople():20},e.prototype.getMissionCost=function(e){return bs.getMission(e).COST},e.prototype.getResourceName=function(e){return Vu.prepareResourceName(e)},e.prototype.getUnitsNumber=function(){var e=0;return this.missionData.missionType===xu.COLONIZE?e=this.colonistsHolder:this.troopsHolder.forEach(function(n){return e+=n}),e},e.prototype.hasResource=function(e,n){return 0===this.resourcesService.hasResource(e,n,"Mission",!0)},e.prototype.getUnitsStrength=function(){for(var e=0,n=0;n<this.troopsHolder.length;n++)this.troopsHolder[n]>0&&(this.missionData.missionType===xu.SEA_MOVE||this.missionData.missionType===xu.SEA_PLUNDER||this.missionData.missionType===xu.SEA_CONQUER?n!==Lu.BOAT&&n!==Lu.BRIGANTINE&&n!==Lu.GALLEON&&(e+=bs.getTroop(n).STRENGTH*this.troopsHolder[n]):e+=bs.getTroop(n).STRENGTH*this.troopsHolder[n]);return e},e.prototype.getUnitsDefense=function(){for(var e=0,n=0;n<this.troopsHolder.length;n++)this.troopsHolder[n]>0&&(this.missionData.missionType===xu.SEA_MOVE||this.missionData.missionType===xu.SEA_PLUNDER||this.missionData.missionType===xu.SEA_CONQUER?n!==Lu.BOAT&&n!==Lu.BRIGANTINE&&n!==Lu.GALLEON&&(e+=bs.getTroop(n).DEFENSE*this.troopsHolder[n]):e+=bs.getTroop(n).DEFENSE*this.troopsHolder[n]);return e},e.prototype.getMissionName=function(){return void 0!==this.missionData.missionType?Vu.prepareMissionName(this.missionData.missionType):"no mission"},e.prototype.getUnitsSpeed=function(){for(var e=0,n=0;n<this.troopsHolder.length;n++)this.troopsHolder[n]>0&&(0===e&&(e=bs.getTroop(n).SPEED),bs.getTroop(n).SPEED<e&&(e=bs.getTroop(n).SPEED));return e},e.prototype.getSeaUnitsSpeed=function(){for(var e=0,n=0;n<this.troopsHolder.length;n++)this.troopsHolder[n]>0&&(n===Lu.BOAT||n===Lu.BRIGANTINE||n===Lu.GALLEON)&&(0===e&&(e=bs.getTroop(n).SPEED),bs.getTroop(n).SPEED<e&&(e=bs.getTroop(n).SPEED));return e},e.prototype.selectAll=function(){var e=this;this.getTroops(this.missionData.missionType).forEach(function(n){e.troopsHolder[n]=e.getTroop(n).size})},e.prototype.clearAll=function(){for(var e=0;e<this.troopsHolder.length;e++)this.troopsHolder[e]=0},e.prototype.isSeaAvailable=function(){return this.missionData.originRegion.neighbours.includes(-1)&&this.missionData.targetRegion.neighbours.includes(-1)},e.prototype.isSeaLandMission=function(){return this.missionData.missionType===xu.SEA_MOVE||this.missionData.missionType===xu.SEA_PLUNDER||this.missionData.missionType===xu.SEA_CONQUER||this.missionData.missionType===xu.EXPEDITION},e.prototype.getTroopsSize=function(){for(var e=0,n=0;n<this.troopsHolder.length-1;n++)n!==Lu.ALL&&n!==Lu.BOAT&&n!==Lu.BRIGANTINE&&n!==Lu.GALLEON&&this.troopsHolder[n]>0&&(e+=this.troopsHolder[n]*bs.getTroop(n).SIZE);return e},e.prototype.getNavyCapacity=function(){for(var e=0,n=0;n<this.troopsHolder.length-1;n++)n!==Lu.BOAT&&n!==Lu.BRIGANTINE&&n!==Lu.GALLEON||this.troopsHolder[n]>0&&(e+=this.troopsHolder[n]*bs.getTroop(n).CARGO);return e},e.prototype.calculateExpeditionChance=function(){return this.discoveredLand=this.worldService.getDiscoveredLand(),Math.max(this.expeditionDistance-this.discoveredLand,0)},e.prototype.calculateMaxDistance=function(){return this.discoveredLand=this.worldService.getDiscoveredLand(),this.discoveredLand+100},e.prototype.calculateExpeditionLand=function(){for(var e=0,n=0;n<this.troopsHolder.length-1;n++)n!==Lu.ALL&&n!==Lu.BOAT&&n!==Lu.BRIGANTINE&&n!==Lu.GALLEON&&this.troopsHolder[n]>0&&(e+=this.troopsHolder[n]*(bs.getTroop(n).STRENGTH+bs.getTroop(n).DEFENSE));return e},e}(),Px=rl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;font-size:1.2em}#regions[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}.region[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;padding:10px}.regionSVG[_ngcontent-%COMP%]{border:1px solid #000}.center[_ngcontent-%COMP%]{text-align:center}#missions[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}.mission[_ngcontent-%COMP%]{height:50px;width:50px;border:1px solid #000;padding:5px;margin:10px;opacity:.3;cursor:pointer}.selectedMission[_ngcontent-%COMP%]{opacity:1;cursor:initial}#buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px}.slidecontainer[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;margin-top:3px;width:300px}.slider[_ngcontent-%COMP%]{-webkit-appearance:none;width:100%;height:10px;border-radius:5px;background:var(--passive-colour);outline:0;opacity:.7;-webkit-transition:opacity .2s;transition:opacity .2s}.slider[_ngcontent-%COMP%]:hover{opacity:1}.slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:15px;height:15px;border-radius:50%;background:var(--active-colour);cursor:pointer}.slider[_ngcontent-%COMP%]::-moz-range-thumb{width:15px;height:15px;border-radius:50%;background:var(--active-colour);cursor:pointer}.armyInput[_ngcontent-%COMP%]{width:5ch}#distanceInput[_ngcontent-%COMP%]{width:8ch}.troopLabel[_ngcontent-%COMP%]{display:inline-block;width:150px}.inactive[_ngcontent-%COMP%]{color:#5f5f5f}.inactive[_ngcontent-%COMP%]:hover{cursor:initial}.inactive[_ngcontent-%COMP%]:active{background-color:var(--passive-colour)}#secondHalf[_ngcontent-%COMP%]{font-size:.7em;padding-bottom:10px}#costs[_ngcontent-%COMP%]{text-align:center}#costList[_ngcontent-%COMP%], #totalCostList[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-pack:center;justify-content:center}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;margin-right:3px}.notAvailable[_ngcontent-%COMP%]{color:var(--negative-colour)}#bottomSection[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-pack:center;justify-content:center;margin-top:10px}#bottomSection[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{padding:10px}.stats[_ngcontent-%COMP%]{text-align:center}#startButton[_ngcontent-%COMP%]{white-space:nowrap}.seaIcon[_ngcontent-%COMP%]{height:50px;width:50px}"]],data:{}});function xx(e){return So(0,[(e()(),eo(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,":svg:svg",[["class","regionSVG"]],[[1,"height",0],[1,"width",0],[1,"viewBox",0]],null,null,null,null)),(e()(),eo(2,0,null,null,0,":svg:path",[],[[1,"fill",0],[1,"d",0],[1,"stroke",0],[1,"stroke-width",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,1,0,"80px","80px",t.prepareViewbox(t.missionData.originRegion.center)),e(n,2,0,t.missionData.originRegionColour,t.missionData.originRegion.path,"black","2")})}function kx(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,0,":svg:svg",[["class","regionSVG"]],[[1,"height",0],[1,"width",0]],null,null,null,null))],null,function(e,n){e(n,1,0,"80px","80px")})}function Mx(e){return So(0,[(e()(),eo(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,":svg:svg",[["class","regionSVG"]],[[1,"height",0],[1,"width",0],[1,"viewBox",0]],null,null,null,null)),(e()(),eo(2,0,null,null,0,":svg:path",[],[[1,"fill",0],[1,"d",0],[1,"stroke",0],[1,"stroke-width",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,1,0,"80px","80px",t.prepareViewbox(t.missionData.targetRegion.center)),e(n,2,0,t.missionData.targetRegionColour,t.missionData.targetRegion.path,"black","2")})}function Dx(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,0,":svg:svg",[["class","regionSVG"]],[[1,"height",0],[1,"width",0]],null,null,null,null))],null,function(e,n){e(n,1,0,"80px","80px")})}function Lx(e){return So(0,[(e()(),eo(0,0,null,null,8,"div",[["class","region"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"span",[["class","center"]],null,null,null,null,null)),(e()(),fo(-1,null,["target"])),(e()(),Jr(16777216,null,null,1,null,Mx)),vi(4,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,Dx)),vi(6,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(7,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.changeTarget()&&l),l},null,null)),(e()(),fo(-1,null,["change"]))],function(e,n){var t=n.component;e(n,4,0,t.missionData.targetRegion),e(n,6,0,!t.missionData.targetRegion)},null)}function Fx(e){return So(0,[(e()(),eo(0,0,null,null,4,"div",[["class","mission"]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.changeMission(i.missions.COLONIZE)&&l),l},null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(2,278528,null,0,Js,[Xs],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),ho(3,{selectedMission:0}),(e()(),eo(4,0,null,null,0,"img",[["src","assets/army/mission/colonize.svg"]],null,null,null,null,null))],function(e,n){var t=n.component,l=e(n,3,0,t.missionData.missionType===t.missions.COLONIZE);e(n,2,0,"mission",l)},null)}function Ux(e){return So(0,[(e()(),eo(0,0,null,null,4,"div",[["class","mission"]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.changeMission(i.missions.MOVE)&&l),l},null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(2,278528,null,0,Js,[Xs],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),ho(3,{selectedMission:0}),(e()(),eo(4,0,null,null,0,"img",[["src","assets/army/mission/move.svg"]],null,null,null,null,null))],function(e,n){var t=n.component,l=e(n,3,0,t.missionData.missionType===t.missions.MOVE);e(n,2,0,"mission",l)},null)}function Hx(e){return So(0,[(e()(),eo(0,0,null,null,4,"div",[["class","mission"]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.changeMission(i.missions.SPY)&&l),l},null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(2,278528,null,0,Js,[Xs],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),ho(3,{selectedMission:0}),(e()(),eo(4,0,null,null,0,"img",[["src","assets/army/mission/spy.svg"]],null,null,null,null,null))],function(e,n){var t=n.component,l=e(n,3,0,t.missionData.missionType===t.missions.SPY);e(n,2,0,"mission",l)},null)}function Gx(e){return So(0,[(e()(),eo(0,0,null,null,4,"div",[["class","mission"]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.changeMission(i.missions.PLUNDER)&&l),l},null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(2,278528,null,0,Js,[Xs],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),ho(3,{selectedMission:0}),(e()(),eo(4,0,null,null,0,"img",[["src","assets/army/mission/plunder.svg"]],null,null,null,null,null))],function(e,n){var t=n.component,l=e(n,3,0,t.missionData.missionType===t.missions.PLUNDER);e(n,2,0,"mission",l)},null)}function Bx(e){return So(0,[(e()(),eo(0,0,null,null,4,"div",[["class","mission"]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.changeMission(i.missions.CONQUER)&&l),l},null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(2,278528,null,0,Js,[Xs],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),ho(3,{selectedMission:0}),(e()(),eo(4,0,null,null,0,"img",[["src","assets/army/mission/conquer.svg"]],null,null,null,null,null))],function(e,n){var t=n.component,l=e(n,3,0,t.missionData.missionType===t.missions.CONQUER);e(n,2,0,"mission",l)},null)}function Vx(e){return So(0,[(e()(),eo(0,0,null,null,4,"div",[["class","mission"]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.changeMission(i.missions.SEA_MOVE)&&l),l},null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(2,278528,null,0,Js,[Xs],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),ho(3,{selectedMission:0}),(e()(),eo(4,0,null,null,0,"img",[["src","assets/army/mission/sea_move.svg"]],null,null,null,null,null))],function(e,n){var t=n.component,l=e(n,3,0,t.missionData.missionType===t.missions.SEA_MOVE);e(n,2,0,"mission",l)},null)}function Wx(e){return So(0,[(e()(),eo(0,0,null,null,4,"div",[["class","mission"]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.changeMission(i.missions.SEA_PLUNDER)&&l),l},null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(2,278528,null,0,Js,[Xs],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),ho(3,{selectedMission:0}),(e()(),eo(4,0,null,null,0,"img",[["src","assets/army/mission/sea_plunder.svg"]],null,null,null,null,null))],function(e,n){var t=n.component,l=e(n,3,0,t.missionData.missionType===t.missions.SEA_PLUNDER);e(n,2,0,"mission",l)},null)}function zx(e){return So(0,[(e()(),eo(0,0,null,null,4,"div",[["class","mission"]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.changeMission(i.missions.SEA_CONQUER)&&l),l},null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(2,278528,null,0,Js,[Xs],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),ho(3,{selectedMission:0}),(e()(),eo(4,0,null,null,0,"img",[["src","assets/army/mission/sea_conquer.svg"]],null,null,null,null,null))],function(e,n){var t=n.component,l=e(n,3,0,t.missionData.missionType===t.missions.SEA_CONQUER);e(n,2,0,"mission",l)},null)}function Yx(e){return So(0,[(e()(),eo(0,0,null,null,4,"div",[["class","mission"]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.changeMission(i.missions.FISHING)&&l),l},null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(2,278528,null,0,Js,[Xs],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),ho(3,{selectedMission:0}),(e()(),eo(4,0,null,null,0,"img",[["class","seaIcon"],["src","assets/sea/fish.svg"]],null,null,null,null,null))],function(e,n){var t=n.component,l=e(n,3,0,t.missionData.missionType===t.missions.FISHING);e(n,2,0,"mission",l)},null)}function Kx(e){return So(0,[(e()(),eo(0,0,null,null,4,"div",[["class","mission"]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.changeMission(i.missions.HUNTING)&&l),l},null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(2,278528,null,0,Js,[Xs],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),ho(3,{selectedMission:0}),(e()(),eo(4,0,null,null,0,"img",[["class","seaIcon"],["src","assets/sea/shark.svg"]],null,null,null,null,null))],function(e,n){var t=n.component,l=e(n,3,0,t.missionData.missionType===t.missions.HUNTING);e(n,2,0,"mission",l)},null)}function jx(e){return So(0,[(e()(),eo(0,0,null,null,4,"div",[["class","mission"]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.changeMission(i.missions.TREASURE)&&l),l},null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(2,278528,null,0,Js,[Xs],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),ho(3,{selectedMission:0}),(e()(),eo(4,0,null,null,0,"img",[["class","seaIcon"],["src","assets/sea/treasure.svg"]],null,null,null,null,null))],function(e,n){var t=n.component,l=e(n,3,0,t.missionData.missionType===t.missions.TREASURE);e(n,2,0,"mission",l)},null)}function $x(e){return So(0,[(e()(),eo(0,0,null,null,4,"div",[["class","mission"]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.changeMission(i.missions.CARTOGRAPHY)&&l),l},null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(2,278528,null,0,Js,[Xs],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),ho(3,{selectedMission:0}),(e()(),eo(4,0,null,null,0,"img",[["class","seaIcon"],["src","assets/sea/sextant.svg"]],null,null,null,null,null))],function(e,n){var t=n.component,l=e(n,3,0,t.missionData.missionType===t.missions.CARTOGRAPHY);e(n,2,0,"mission",l)},null)}function Qx(e){return So(0,[(e()(),eo(0,0,null,null,4,"div",[["class","mission"]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.changeMission(i.missions.SEA_BATTLE)&&l),l},null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(2,278528,null,0,Js,[Xs],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),ho(3,{selectedMission:0}),(e()(),eo(4,0,null,null,0,"img",[["class","seaIcon"],["src","assets/sea/pirate_flag.svg"]],null,null,null,null,null))],function(e,n){var t=n.component,l=e(n,3,0,t.missionData.missionType===t.missions.SEA_BATTLE);e(n,2,0,"mission",l)},null)}function qx(e){return So(0,[(e()(),eo(0,0,null,null,4,"div",[["class","mission"]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.changeMission(i.missions.EXPEDITION)&&l),l},null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(2,278528,null,0,Js,[Xs],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),ho(3,{selectedMission:0}),(e()(),eo(4,0,null,null,0,"img",[["class","seaIcon"],["src","assets/resources/map.svg"]],null,null,null,null,null))],function(e,n){var t=n.component,l=e(n,3,0,t.missionData.missionType===t.missions.EXPEDITION);e(n,2,0,"mission",l)},null)}function Xx(e){return So(0,[(e()(),eo(0,0,null,null,21,"span",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"span",[["class","troopLabel"]],null,null,null,null,null)),(e()(),fo(2,null,["",":"])),(e()(),eo(3,0,null,null,6,"input",[["class","armyInput"],["min","0"],["type","number"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,4)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,4).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,4)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,4)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==ii(e,5).onChange(t.target.value)&&l),"input"===n&&(l=!1!==ii(e,5).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,5).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.troopsHolder[e.parent.context.$implicit]=t)&&l),l},null,null)),vi(4,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),vi(5,16384,null,0,Jg,[St,dt],null,null),Ei(1024,null,Lg,function(e,n){return[e,n]},[Hg,Jg]),vi(7,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(9,16384,null,0,zg,[[4,Wg]],null,null),(e()(),fo(10,null,["/"," "])),(e()(),eo(11,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(12,0,null,null,9,"div",[["class","slidecontainer"]],null,null,null,null,null)),(e()(),fo(-1,null,[" 0 "])),(e()(),eo(14,0,null,null,6,"input",[["class","slider"],["min","0"],["type","range"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,15)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,15).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,15)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,15)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==ii(e,16).onChange(t.target.value)&&l),"input"===n&&(l=!1!==ii(e,16).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,16).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.troopsHolder[e.parent.context.$implicit]=t)&&l),l},null,null)),vi(15,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),vi(16,16384,null,0,tf,[St,dt],null,null),Ei(1024,null,Lg,function(e,n){return[e,n]},[Hg,tf]),vi(18,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(20,16384,null,0,zg,[[4,Wg]],null,null),(e()(),fo(21,null,[" "," "]))],function(e,n){var t=n.component;e(n,7,0,t.troopsHolder[n.parent.context.$implicit]),e(n,18,0,t.troopsHolder[n.parent.context.$implicit])},function(e,n){var t=n.component;e(n,2,0,t.getTroopName(n.parent.context.$implicit)),e(n,3,0,xl(1,"",t.getTroop(n.parent.context.$implicit).size,""),ii(n,9).ngClassUntouched,ii(n,9).ngClassTouched,ii(n,9).ngClassPristine,ii(n,9).ngClassDirty,ii(n,9).ngClassValid,ii(n,9).ngClassInvalid,ii(n,9).ngClassPending),e(n,10,0,t.getTroop(n.parent.context.$implicit).size),e(n,14,0,xl(1,"",t.getTroop(n.parent.context.$implicit).size,""),ii(n,20).ngClassUntouched,ii(n,20).ngClassTouched,ii(n,20).ngClassPristine,ii(n,20).ngClassDirty,ii(n,20).ngClassValid,ii(n,20).ngClassInvalid,ii(n,20).ngClassPending),e(n,21,0,t.getTroop(n.parent.context.$implicit).size)})}function Zx(e){return So(0,[(e()(),eo(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,Xx)),vi(2,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,2,0,n.component.getTroop(n.context.$implicit).size>0)},null)}function Jx(e){return So(0,[(e()(),eo(0,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),eo(2,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.clearAll()&&l),l},null,null)),(e()(),fo(-1,null,["clear all"])),(e()(),eo(4,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.selectAll()&&l),l},null,null)),(e()(),fo(-1,null,["select all"])),(e()(),Jr(16777216,null,null,1,null,Zx)),vi(7,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,7,0,t.getTroops(t.missionData.missionType))},null)}function ek(e){return So(0,[(e()(),eo(0,0,null,null,21,"span",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"span",[["class","troopLabel"]],null,null,null,null,null)),(e()(),fo(2,null,["",":"])),(e()(),eo(3,0,null,null,6,"input",[["class","armyInput"],["min","0"],["type","number"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,4)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,4).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,4)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,4)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==ii(e,5).onChange(t.target.value)&&l),"input"===n&&(l=!1!==ii(e,5).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,5).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.troopsHolder[e.parent.context.$implicit]=t)&&l),l},null,null)),vi(4,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),vi(5,16384,null,0,Jg,[St,dt],null,null),Ei(1024,null,Lg,function(e,n){return[e,n]},[Hg,Jg]),vi(7,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(9,16384,null,0,zg,[[4,Wg]],null,null),(e()(),fo(10,null,["/"," "])),(e()(),eo(11,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(12,0,null,null,9,"div",[["class","slidecontainer"]],null,null,null,null,null)),(e()(),fo(-1,null,[" 0 "])),(e()(),eo(14,0,null,null,6,"input",[["class","slider"],["min","0"],["type","range"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,15)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,15).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,15)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,15)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==ii(e,16).onChange(t.target.value)&&l),"input"===n&&(l=!1!==ii(e,16).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,16).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.troopsHolder[e.parent.context.$implicit]=t)&&l),l},null,null)),vi(15,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),vi(16,16384,null,0,tf,[St,dt],null,null),Ei(1024,null,Lg,function(e,n){return[e,n]},[Hg,tf]),vi(18,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(20,16384,null,0,zg,[[4,Wg]],null,null),(e()(),fo(21,null,[" "," "]))],function(e,n){var t=n.component;e(n,7,0,t.troopsHolder[n.parent.context.$implicit]),e(n,18,0,t.troopsHolder[n.parent.context.$implicit])},function(e,n){var t=n.component;e(n,2,0,t.getTroopName(n.parent.context.$implicit)),e(n,3,0,xl(1,"",t.getTroop(n.parent.context.$implicit).size,""),ii(n,9).ngClassUntouched,ii(n,9).ngClassTouched,ii(n,9).ngClassPristine,ii(n,9).ngClassDirty,ii(n,9).ngClassValid,ii(n,9).ngClassInvalid,ii(n,9).ngClassPending),e(n,10,0,t.getTroop(n.parent.context.$implicit).size),e(n,14,0,xl(1,"",t.getTroop(n.parent.context.$implicit).size,""),ii(n,20).ngClassUntouched,ii(n,20).ngClassTouched,ii(n,20).ngClassPristine,ii(n,20).ngClassDirty,ii(n,20).ngClassValid,ii(n,20).ngClassInvalid,ii(n,20).ngClassPending),e(n,21,0,t.getTroop(n.parent.context.$implicit).size)})}function nk(e){return So(0,[(e()(),eo(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,ek)),vi(2,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,2,0,n.component.getTroop(n.context.$implicit).size>0)},null)}function tk(e){return So(0,[(e()(),eo(0,0,null,null,17,"div",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),eo(2,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.clearAll()&&l),l},null,null)),(e()(),fo(-1,null,["clear all"])),(e()(),eo(4,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.selectAll()&&l),l},null,null)),(e()(),fo(-1,null,["select all"])),(e()(),Jr(16777216,null,null,1,null,nk)),vi(7,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),eo(8,0,null,null,9,"div",[],null,null,null,null,null)),(e()(),eo(9,0,null,null,1,"label",[["for","distanceInput"]],null,null,null,null,null)),(e()(),fo(-1,null,["distance: "])),(e()(),eo(11,0,null,null,6,"input",[["id","distanceInput"],["type","number"]],[[8,"min",0],[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,12)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,12).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,12)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,12)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==ii(e,13).onChange(t.target.value)&&l),"input"===n&&(l=!1!==ii(e,13).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,13).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.expeditionDistance=t)&&l),l},null,null)),vi(12,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),vi(13,16384,null,0,Jg,[St,dt],null,null),Ei(1024,null,Lg,function(e,n){return[e,n]},[Hg,Jg]),vi(15,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(17,16384,null,0,zg,[[4,Wg]],null,null)],function(e,n){var t=n.component;e(n,7,0,t.getTroops(t.missionData.missionType)),e(n,15,0,t.expeditionDistance)},function(e,n){var t=n.component;e(n,11,0,xl(1,"",t.discoveredLand+10,""),xl(1,"",t.calculateMaxDistance(),""),ii(n,17).ngClassUntouched,ii(n,17).ngClassTouched,ii(n,17).ngClassPristine,ii(n,17).ngClassDirty,ii(n,17).ngClassValid,ii(n,17).ngClassInvalid,ii(n,17).ngClassPending)})}function lk(e){return So(0,[(e()(),eo(0,0,null,null,21,"div",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"span",[["class","troopLabel"]],null,null,null,null,null)),(e()(),fo(-1,null,["Colonist:"])),(e()(),eo(3,0,null,null,6,"input",[["class","armyInput"],["min","0"],["type","number"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,4)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,4).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,4)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,4)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==ii(e,5).onChange(t.target.value)&&l),"input"===n&&(l=!1!==ii(e,5).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,5).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.colonistsHolder=t)&&l),l},null,null)),vi(4,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),vi(5,16384,null,0,Jg,[St,dt],null,null),Ei(1024,null,Lg,function(e,n){return[e,n]},[Hg,Jg]),vi(7,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(9,16384,null,0,zg,[[4,Wg]],null,null),(e()(),fo(10,null,["/",""])),(e()(),eo(11,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(12,0,null,null,9,"div",[["class","slidecontainer"]],null,null,null,null,null)),(e()(),fo(-1,null,[" 0 "])),(e()(),eo(14,0,null,null,6,"input",[["class","slider"],["min","0"],["type","range"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,15)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,15).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,15)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,15)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==ii(e,16).onChange(t.target.value)&&l),"input"===n&&(l=!1!==ii(e,16).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,16).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.colonistsHolder=t)&&l),l},null,null)),vi(15,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),vi(16,16384,null,0,tf,[St,dt],null,null),Ei(1024,null,Lg,function(e,n){return[e,n]},[Hg,tf]),vi(18,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(20,16384,null,0,zg,[[4,Wg]],null,null),(e()(),fo(21,null,[" "," "]))],function(e,n){var t=n.component;e(n,7,0,t.colonistsHolder),e(n,18,0,t.colonistsHolder)},function(e,n){var t=n.component;e(n,3,0,xl(1,"",t.getFreeWorkers(),""),ii(n,9).ngClassUntouched,ii(n,9).ngClassTouched,ii(n,9).ngClassPristine,ii(n,9).ngClassDirty,ii(n,9).ngClassValid,ii(n,9).ngClassInvalid,ii(n,9).ngClassPending),e(n,10,0,t.getFreeWorkers()),e(n,14,0,xl(1,"",t.getFreeWorkers(),""),ii(n,20).ngClassUntouched,ii(n,20).ngClassTouched,ii(n,20).ngClassPristine,ii(n,20).ngClassDirty,ii(n,20).ngClassValid,ii(n,20).ngClassInvalid,ii(n,20).ngClassPending),e(n,21,0,t.getFreeWorkers())})}function ik(e){return So(0,[(e()(),eo(0,0,null,null,21,"div",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"span",[["class","troopLabel"]],null,null,null,null,null)),(e()(),fo(2,null,["",":"])),(e()(),eo(3,0,null,null,6,"input",[["class","armyInput"],["min","0"],["type","number"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,4)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,4).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,4)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,4)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==ii(e,5).onChange(t.target.value)&&l),"input"===n&&(l=!1!==ii(e,5).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,5).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.troopsHolder[e.context.$implicit]=t)&&l),l},null,null)),vi(4,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),vi(5,16384,null,0,Jg,[St,dt],null,null),Ei(1024,null,Lg,function(e,n){return[e,n]},[Hg,Jg]),vi(7,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(9,16384,null,0,zg,[[4,Wg]],null,null),(e()(),fo(10,null,["/"," "])),(e()(),eo(11,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(12,0,null,null,9,"div",[["class","slidecontainer"]],null,null,null,null,null)),(e()(),fo(-1,null,[" 0 "])),(e()(),eo(14,0,null,null,6,"input",[["class","slider"],["min","0"],["type","range"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,15)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,15).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,15)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,15)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==ii(e,16).onChange(t.target.value)&&l),"input"===n&&(l=!1!==ii(e,16).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,16).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.troopsHolder[e.context.$implicit]=t)&&l),l},null,null)),vi(15,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),vi(16,16384,null,0,tf,[St,dt],null,null),Ei(1024,null,Lg,function(e,n){return[e,n]},[Hg,tf]),vi(18,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(20,16384,null,0,zg,[[4,Wg]],null,null),(e()(),fo(21,null,[" "," "]))],function(e,n){var t=n.component;e(n,7,0,t.troopsHolder[n.context.$implicit]),e(n,18,0,t.troopsHolder[n.context.$implicit])},function(e,n){var t=n.component;e(n,2,0,t.getTroopName(n.context.$implicit)),e(n,3,0,xl(1,"",t.getTroop(n.context.$implicit).size,""),ii(n,9).ngClassUntouched,ii(n,9).ngClassTouched,ii(n,9).ngClassPristine,ii(n,9).ngClassDirty,ii(n,9).ngClassValid,ii(n,9).ngClassInvalid,ii(n,9).ngClassPending),e(n,10,0,t.getTroop(n.context.$implicit).size),e(n,14,0,xl(1,"",t.getTroop(n.context.$implicit).size,""),ii(n,20).ngClassUntouched,ii(n,20).ngClassTouched,ii(n,20).ngClassPristine,ii(n,20).ngClassDirty,ii(n,20).ngClassValid,ii(n,20).ngClassInvalid,ii(n,20).ngClassPending),e(n,21,0,t.getTroop(n.context.$implicit).size)})}function rk(e){return So(0,[(e()(),eo(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,ik)),vi(2,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,2,0,n.component.getSpyUnits())},null)}function ok(e){return So(0,[(e()(),eo(0,0,null,null,6,"div",[["class","stats"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["Stats"])),(e()(),eo(3,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(4,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(5,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),fo(6,null,[" ","% success chance "]))],function(e,n){e(n,5,0,"colonize","army/mission")},function(e,n){e(n,6,0,5*n.component.colonistsHolder)})}function uk(e){return So(0,[(e()(),eo(0,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(2,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),fo(3,null,[" "," "]))],function(e,n){e(n,2,0,n.component.getResourceName(n.context.$implicit.resource),"resources")},function(e,n){e(n,3,0,n.context.$implicit.amount)})}function sk(e){return So(0,[(e()(),eo(0,0,null,null,7,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(2,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),eo(3,0,null,null,4,"span",[],null,null,null,null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(5,278528,null,0,Js,[Xs],{ngClass:[0,"ngClass"]},null),ho(6,{notAvailable:0}),(e()(),fo(7,null,[" "," "]))],function(e,n){var t=n.component;e(n,2,0,t.getResourceName(n.context.$implicit.resource),"resources");var l=e(n,6,0,!t.hasResource(n.context.$implicit.resource,n.context.$implicit.amount*t.getUnitsNumber()));e(n,5,0,l)},function(e,n){e(n,7,0,n.context.$implicit.amount*n.component.getUnitsNumber())})}function ak(e){return So(0,[(e()(),eo(0,0,null,null,11,"div",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["Cost per person"])),(e()(),eo(3,0,null,null,3,"div",[["id","costList"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,uk)),vi(5,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),eo(6,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(7,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["Total cost"])),(e()(),eo(9,0,null,null,2,"div",[["id","totalCostList"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,sk)),vi(11,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,5,0,t.getMissionCost(t.missionData.missionType)),e(n,11,0,t.getMissionCost(t.missionData.missionType))},null)}function ck(e){return So(0,[(e()(),eo(0,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(2,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),fo(3,null,[" "," "]))],function(e,n){e(n,2,0,n.component.getResourceName(n.context.$implicit.resource),"resources")},function(e,n){e(n,3,0,n.context.$implicit.amount*n.component.expeditionDistance)})}function pk(e){return So(0,[(e()(),eo(0,0,null,null,7,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(2,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),eo(3,0,null,null,4,"span",[],null,null,null,null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(5,278528,null,0,Js,[Xs],{ngClass:[0,"ngClass"]},null),ho(6,{notAvailable:0}),(e()(),fo(7,null,[" "," "]))],function(e,n){var t=n.component;e(n,2,0,t.getResourceName(n.context.$implicit.resource),"resources");var l=e(n,6,0,!t.hasResource(n.context.$implicit.resource,n.context.$implicit.amount*t.getUnitsNumber()));e(n,5,0,l)},function(e,n){var t=n.component;e(n,7,0,n.context.$implicit.amount*t.getUnitsNumber()*t.expeditionDistance)})}function hk(e){return So(0,[(e()(),eo(0,0,null,null,19,"div",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["Cost per person"])),(e()(),eo(3,0,null,null,3,"div",[["id","costList"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,ck)),vi(5,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),eo(6,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(7,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["Total cost"])),(e()(),eo(9,0,null,null,10,"div",[["id","totalCostList"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,pk)),vi(11,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),eo(12,0,null,null,7,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(13,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(14,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),eo(15,0,null,null,4,"span",[],null,null,null,null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(17,278528,null,0,Js,[Xs],{ngClass:[0,"ngClass"]},null),ho(18,{notAvailable:0}),(e()(),fo(-1,null,[" 1 "]))],function(e,n){var t=n.component;e(n,5,0,t.getMissionCost(t.missionData.missionType)),e(n,11,0,t.getMissionCost(t.missionData.missionType)),e(n,14,0,"map","resources");var l=e(n,18,0,!t.hasResource(t.resources.MAP,1));e(n,17,0,l)},null)}function dk(e){return So(0,[(e()(),eo(0,0,null,null,7,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(2,114688,null,0,xg,[],{name:[0,"name"]},null),(e()(),eo(3,0,null,null,4,"span",[],null,null,null,null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(5,278528,null,0,Js,[Xs],{ngClass:[0,"ngClass"]},null),ho(6,{notAvailable:0}),(e()(),fo(7,null,[""," /",""]))],function(e,n){var t=n.component;e(n,2,0,"cargo");var l=e(n,6,0,t.getTroopsSize()>t.getNavyCapacity());e(n,5,0,l)},function(e,n){var t=n.component;e(n,7,0,t.getTroopsSize(),t.getNavyCapacity())})}function gk(e){return So(0,[(e()(),eo(0,0,null,null,24,"div",[["class","stats"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["Stats"])),(e()(),eo(3,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(4,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(5,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),fo(6,null,[" ","% success chance "])),(e()(),eo(7,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(8,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(9,114688,null,0,xg,[],{name:[0,"name"]},null),(e()(),fo(10,null,[" ~"," estimated land "])),(e()(),eo(11,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(12,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(13,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),fo(14,null,[" "," "])),(e()(),eo(15,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(16,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(17,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),fo(18,null,[" "," "])),(e()(),eo(19,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(20,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(21,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),fo(22,null,[" "," "])),(e()(),Jr(16777216,null,null,1,null,dk)),vi(24,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,5,0,"map","resources"),e(n,9,0,"land"),e(n,13,0,"attack","army"),e(n,17,0,"defense","army"),e(n,21,0,"speed","army"),e(n,24,0,t.isSeaLandMission())},function(e,n){var t=n.component;e(n,6,0,t.calculateExpeditionChance()),e(n,10,0,t.calculateExpeditionLand()),e(n,14,0,t.getUnitsStrength()),e(n,18,0,t.getUnitsDefense()),e(n,22,0,t.getSeaUnitsSpeed())})}function fk(e){return So(0,[(e()(),eo(0,0,null,null,7,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(2,114688,null,0,xg,[],{name:[0,"name"]},null),(e()(),eo(3,0,null,null,4,"span",[],null,null,null,null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(5,278528,null,0,Js,[Xs],{ngClass:[0,"ngClass"]},null),ho(6,{notAvailable:0}),(e()(),fo(7,null,[""," /",""]))],function(e,n){var t=n.component;e(n,2,0,"cargo");var l=e(n,6,0,t.getTroopsSize()>t.getNavyCapacity());e(n,5,0,l)},function(e,n){var t=n.component;e(n,7,0,t.getTroopsSize(),t.getNavyCapacity())})}function mk(e){return So(0,[(e()(),eo(0,0,null,null,16,"div",[["class","stats"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["Stats"])),(e()(),eo(3,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(4,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(5,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),fo(6,null,[" "," "])),(e()(),eo(7,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(8,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(9,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),fo(10,null,[" "," "])),(e()(),eo(11,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(12,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(13,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),fo(14,null,[" "," "])),(e()(),Jr(16777216,null,null,1,null,fk)),vi(16,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,5,0,"attack","army"),e(n,9,0,"defense","army"),e(n,13,0,"speed","army"),e(n,16,0,t.isSeaLandMission())},function(e,n){var t=n.component;e(n,6,0,t.getUnitsStrength()),e(n,10,0,t.getUnitsDefense()),e(n,14,0,t.getUnitsSpeed())})}function vk(e){return So(0,[(e()(),eo(0,0,null,null,72,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"div",[["id","title"]],null,null,null,null,null)),(e()(),fo(-1,null,["New mission"])),(e()(),eo(3,0,null,null,11,"div",[["id","regions"]],null,null,null,null,null)),(e()(),eo(4,0,null,null,8,"div",[["class","region"]],null,null,null,null,null)),(e()(),eo(5,0,null,null,1,"span",[["class","center"]],null,null,null,null,null)),(e()(),fo(-1,null,["origin"])),(e()(),Jr(16777216,null,null,1,null,xx)),vi(8,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,kx)),vi(10,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(11,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.changeOrigin()&&l),l},null,null)),(e()(),fo(-1,null,["change"])),(e()(),Jr(16777216,null,null,1,null,Lx)),vi(14,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(15,0,null,null,28,"div",[["id","missions"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,Fx)),vi(17,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,Ux)),vi(19,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,Hx)),vi(21,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,Gx)),vi(23,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,Bx)),vi(25,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,Vx)),vi(27,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,Wx)),vi(29,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,zx)),vi(31,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,Yx)),vi(33,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,Kx)),vi(35,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,jx)),vi(37,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,$x)),vi(39,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,Qx)),vi(41,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,qx)),vi(43,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(44,0,null,null,20,"div",[["id","secondHalf"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,Jx)),vi(46,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,tk)),vi(48,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,lk)),vi(50,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,rk)),vi(52,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(53,0,null,null,11,"div",[["id","bottomSection"]],null,null,null,null,null)),(e()(),eo(54,0,null,null,6,"div",[["id","costs"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,ok)),vi(56,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,ak)),vi(58,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,hk)),vi(60,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,gk)),vi(62,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,mk)),vi(64,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(65,0,null,null,7,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),eo(66,0,null,null,4,"button",[["id","startButton"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.start()&&l),l},null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(68,278528,null,0,Js,[Xs],{ngClass:[0,"ngClass"]},null),ho(69,{inactive:0}),(e()(),fo(70,null,["",""])),(e()(),eo(71,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.closeModal()&&l),l},null,null)),(e()(),fo(-1,null,["Cancel"]))],function(e,n){var t=n.component;e(n,8,0,t.missionData.originRegion),e(n,10,0,!t.missionData.originRegion),e(n,14,0,!t.missionData.targetSeaEvent&&t.missionData.missionType!==t.missions.EXPEDITION),e(n,17,0,t.isMissionAllowed(t.missions.COLONIZE)),e(n,19,0,t.isMissionAllowed(t.missions.MOVE)),e(n,21,0,t.isMissionAllowed(t.missions.SPY)),e(n,23,0,t.isMissionAllowed(t.missions.PLUNDER)),e(n,25,0,t.isMissionAllowed(t.missions.CONQUER)),e(n,27,0,t.isMissionAllowed(t.missions.SEA_MOVE)),e(n,29,0,t.isMissionAllowed(t.missions.SEA_PLUNDER)),e(n,31,0,t.isMissionAllowed(t.missions.SEA_CONQUER)),e(n,33,0,t.isMissionAllowed(t.missions.FISHING)),e(n,35,0,t.isMissionAllowed(t.missions.HUNTING)),e(n,37,0,t.isMissionAllowed(t.missions.TREASURE)),e(n,39,0,t.isMissionAllowed(t.missions.CARTOGRAPHY)),e(n,41,0,t.isMissionAllowed(t.missions.SEA_BATTLE)),e(n,43,0,t.isMissionAllowed(t.missions.EXPEDITION)),e(n,46,0,t.missionData.originRegion&&t.missionData.missionType!==t.missions.SPY&&t.missionData.missionType!==t.missions.COLONIZE&&t.missionData.missionType!==t.missions.EXPEDITION),e(n,48,0,t.missionData.originRegion&&t.missionData.missionType===t.missions.EXPEDITION),e(n,50,0,t.missionData.originRegion&&t.missionData.missionType===t.missions.COLONIZE),e(n,52,0,t.missionData.originRegion&&t.missionData.missionType===t.missions.SPY),e(n,56,0,t.missionData.missionType===t.missions.COLONIZE),e(n,58,0,t.missionData.missionType!==t.missions.EXPEDITION),e(n,60,0,t.missionData.missionType===t.missions.EXPEDITION),e(n,62,0,t.missionData.missionType===t.missions.EXPEDITION),e(n,64,0,t.missionData.missionType!==t.missions.COLONIZE&&t.missionData.missionType!==t.missions.EXPEDITION);var l=e(n,69,0,!t.canStart());e(n,68,0,l)},function(e,n){e(n,70,0,n.component.getMissionName())})}function Sk(e){return So(0,[(e()(),eo(0,0,null,null,5,"app-modal",[["id","mission-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==ii(e,1).onKeydownHandler(t)&&l),l},ww,_w)),vi(1,4440064,null,0,Nw,[St,dt,qf],{id:[0,"id"]},null),(e()(),eo(2,0,null,0,2,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,vk)),vi(4,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(5,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,1,0,"mission-modal"),e(n,4,0,t.missionData)},null)}var Ek=function(){function e(e,n){this.modalService=e,this.resourcesService=n}return e.prototype.ngOnInit=function(){var e=this;this.modalService.registerForValue().subscribe(function(n){n&&void 0!==n.id&&(e.offer=n,e.value=e.offer.amount,e.inputRef&&(e.inputRef.nativeElement.style.width=e.value.toString().length+1+"ch"))})},e.prototype.ok=function(){this.checkValue(this.value),this.modalService.sendValueInput(Number(this.value)),this.modalService.close(ju.MARKET),this.offer=null},e.prototype.cancel=function(){this.modalService.sendValueInput(null),this.offer=null,this.modalService.close(ju.MARKET)},e.prototype.onKeydownHandler=function(e){"none"!==document.getElementById("market-modal").style.display&&(e.preventDefault(),this.ok())},e.prototype.getResourceName=function(e){return Iu[e]},e.prototype.calculatePrice=function(){var e=this.value;return this.offer.amount<e&&(e=this.offer.amount),this.offer.buy?Math.ceil(e/this.offer.amount*this.offer.price):Math.floor(e/this.offer.amount*this.offer.price)},e.prototype.checkValue=function(e){if(e&&!isNaN(e)){if(this.offer.amount>=e)return!0;this.inputRef.nativeElement.value=this.offer.amount,this.value=this.offer.amount}return!1},e.prototype.getResourceAmount=function(){return this.resourcesService.getResource(this.offer.resource).amount},e.prototype.getResourceLimit=function(){return this.resourcesService.getResource(this.offer.resource).limit},e}(),yk=rl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;font-size:1.2em}#title[_ngcontent-%COMP%]{font-size:1.5em;margin-bottom:5px}#buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px;padding:5px}#input[_ngcontent-%COMP%]{display:inline-block;width:3ch;font-size:1em}app-icon[_ngcontent-%COMP%]{display:inline-block;margin:0 3px}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center}"]],data:{}});function Rk(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["buy"]))],null,null)}function bk(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["sell"]))],null,null)}function Ok(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["BUY"]))],null,null)}function Tk(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["SELL"]))],null,null)}function Ck(e){return So(0,[(e()(),eo(0,0,null,null,35,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),fo(-1,null,["Market offer"])),(e()(),eo(3,0,null,null,9,"span",[["class","icon"],["id","text"]],null,null,null,null,null)),(e()(),fo(-1,null,["How many "])),(e()(),eo(5,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(6,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),fo(7,null,["(","/",") would you like to "])),(e()(),Jr(16777216,null,null,1,null,Rk)),vi(9,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,bk)),vi(11,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),fo(-1,null,["?"])),(e()(),eo(13,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(14,0,null,null,12,"span",[["class","icon"]],null,null,null,null,null)),(e()(),eo(15,0,[[1,0],["input",1]],null,5,"input",[["id","input"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,16)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,16).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,16)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,16)._compositionEnd(t.target.value)&&l),"ngModelChange"===n&&(l=!1!==i.checkValue(t)&&l),"ngModelChange"===n&&(l=!1!==(i.value=t)&&l),l},null,null)),vi(16,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),Ei(1024,null,Lg,function(e){return[e]},[Hg]),vi(18,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(20,16384,null,0,zg,[[4,Wg]],null,null),(e()(),fo(21,null,["/"," "])),(e()(),eo(22,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(23,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),fo(24,null,[" for "," "])),(e()(),eo(25,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(26,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),eo(27,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(28,0,null,null,7,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),eo(29,0,null,null,4,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.ok()&&l),l},null,null)),(e()(),Jr(16777216,null,null,1,null,Ok)),vi(31,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,Tk)),vi(33,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(34,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.cancel()&&l),l},null,null)),(e()(),fo(-1,null,["CANCEL"]))],function(e,n){var t=n.component;e(n,6,0,t.getResourceName(t.offer.resource),"resources"),e(n,9,0,t.offer.buy),e(n,11,0,!t.offer.buy),e(n,18,0,t.value),e(n,23,0,t.getResourceName(t.offer.resource),"resources"),e(n,26,0,"coins","resources"),e(n,31,0,t.offer.buy),e(n,33,0,!t.offer.buy)},function(e,n){var t=n.component;e(n,7,0,t.getResourceAmount(),t.getResourceLimit()),e(n,15,0,ii(n,20).ngClassUntouched,ii(n,20).ngClassTouched,ii(n,20).ngClassPristine,ii(n,20).ngClassDirty,ii(n,20).ngClassValid,ii(n,20).ngClassInvalid,ii(n,20).ngClassPending),e(n,21,0,t.offer.amount),e(n,24,0,t.calculatePrice())})}function Ik(e){return So(0,[ro(671088640,1,{inputRef:0}),(e()(),eo(1,0,null,null,5,"app-modal",[["id","market-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==ii(e,2).onKeydownHandler(t)&&l),l},ww,_w)),vi(2,4440064,null,0,Nw,[St,dt,qf],{id:[0,"id"]},null),(e()(),eo(3,0,null,0,2,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,Ck)),vi(5,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(6,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,2,0,"market-modal"),e(n,5,0,t.offer)},null)}var Ak=function(){function e(e,n,t){var l=this;this.servicesService=e,this.modalService=n,this.resourcesService=t,this.modalService.registerForBuilding().subscribe(function(e){l.building=e,setTimeout(function(){var e=window.document.getElementsByClassName("textInput").item(0);e&&e.select()},10)})}return e.prototype.ngOnInit=function(){},e.prototype.ok=function(){this.modalService.close(ju.WORK_MANAGEMENT)},e.prototype.cancel=function(){this.modalService.close(ju.WORK_MANAGEMENT)},e.prototype.stop=function(){this.building.isWorking()?this.building.stopProduction():this.building.startProduction()||this.modalService.info("Cannot unlock production of "+this.building.getName()+". Number of free workers: "+this.resourcesService.getPeople())},e.prototype.getBuildingName=function(){return Vu.prepareBuildingName(this.building.getBuildingType())},e.prototype.getResourceName=function(e){return Vu.prepareResourceName(e)},e.prototype.getResource=function(e){return this.resourcesService.getResource(e)},e.prototype.onKeydownHandler=function(){"none"!==document.getElementById("work-management-modal").style.display&&(event.preventDefault(),this.ok())},e.prototype.isCoins=function(e){return e===Iu.COINS},e.prototype.applyToAll=function(){var e=this,n=ys.getBuildingRegion(this.building.getBuildingType());this.servicesService.getServiceByRegion(n).getBuildings().filter(function(n){return n.getBuildingType()===e.building.getBuildingType()}).forEach(function(n){return n.setWorkSettings(Uv.clone(e.building.getWorkSettings()))})},e}(),Nk=rl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{text-align:center;font-size:1.2em}input[_ngcontent-%COMP%]:not([type]), input[type=text][_ngcontent-%COMP%]{width:5ch}#rules[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center}#input[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 50%;border-right:1px solid #000}#output[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 50%}.seasonalRule[_ngcontent-%COMP%]{margin-right:10px}"]],data:{}});function _k(e){return So(0,[(e()(),eo(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),fo(-1,null,[" working"]))],null,null)}function wk(e){return So(0,[(e()(),eo(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),fo(-1,null,[" not working"]))],null,null)}function Pk(e){return So(0,[(e()(),eo(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.stop()&&l),l},null,null)),(e()(),fo(-1,null,["Hire worker"]))],null,null)}function xk(e){return So(0,[(e()(),eo(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.stop()&&l),l},null,null)),(e()(),fo(-1,null,["Fire worker"]))],null,null)}function kk(e){return So(0,[(e()(),eo(0,0,null,null,8,"div",[["id","customRule"]],null,null,null,null,null)),(e()(),fo(1,null,[" "," "])),(e()(),eo(2,0,null,null,5,"input",[["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,3).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==ii(e,3).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.building.getWorkSettings().customRuleEnabled=t)&&l),l},null,null)),vi(3,16384,null,0,Fg,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[Fg]),vi(5,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(7,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(8,0,null,null,0,"br",[],null,null,null,null,null))],function(e,n){e(n,5,0,n.component.building.getWorkSettings().customRuleEnabled)},function(e,n){e(n,1,0,n.component.building.getWorkSettings().customRuleText),e(n,2,0,ii(n,7).ngClassUntouched,ii(n,7).ngClassTouched,ii(n,7).ngClassPristine,ii(n,7).ngClassDirty,ii(n,7).ngClassValid,ii(n,7).ngClassInvalid,ii(n,7).ngClassPending)})}function Mk(e){return So(0,[(e()(),eo(0,0,null,null,10,"div",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(2,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),fo(-1,null,[" > "])),(e()(),eo(4,0,null,null,5,"input",[["class","textInput"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var l=!0;return"input"===n&&(l=!1!==ii(e,5)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,5).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,5)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,5)._compositionEnd(t.target.value)&&l),"ngModelChange"===n&&(l=!1!==(e.context.$implicit[1]=t)&&l),l},null,null)),vi(5,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),Ei(1024,null,Lg,function(e){return[e]},[Hg]),vi(7,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(9,16384,null,0,zg,[[4,Wg]],null,null),(e()(),fo(10,null,[" ( ","/"," ) "]))],function(e,n){e(n,2,0,n.component.getResourceName(n.context.$implicit[0]),"resources"),e(n,7,0,n.context.$implicit[1])},function(e,n){var t=n.component;e(n,4,0,ii(n,9).ngClassUntouched,ii(n,9).ngClassTouched,ii(n,9).ngClassPristine,ii(n,9).ngClassDirty,ii(n,9).ngClassValid,ii(n,9).ngClassInvalid,ii(n,9).ngClassPending),e(n,10,0,t.getResource(n.context.$implicit[0]).amount,t.getResource(n.context.$implicit[0]).limit)})}function Dk(e){return So(0,[(e()(),eo(0,0,null,null,3,"div",[["id","input"]],null,null,null,null,null)),(e()(),fo(-1,null,[" Input resources: "])),(e()(),Jr(16777216,null,null,1,null,Mk)),vi(3,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,3,0,n.component.building.getWorkSettings().inputSettings)},null)}function Lk(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["\u221e"]))],null,null)}function Fk(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.getResource(n.parent.context.$implicit[0]).limit)})}function Uk(e){return So(0,[(e()(),eo(0,0,null,null,7,"span",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,5,"input",[["class","textInput"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var l=!0;return"input"===n&&(l=!1!==ii(e,2)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,2).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,2)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,2)._compositionEnd(t.target.value)&&l),"ngModelChange"===n&&(l=!1!==(e.parent.context.$implicit[1]=t)&&l),l},null,null)),vi(2,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),Ei(1024,null,Lg,function(e){return[e]},[Hg]),vi(4,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(6,16384,null,0,zg,[[4,Wg]],null,null),(e()(),fo(7,null,[" (",""]))],function(e,n){e(n,4,0,n.parent.context.$implicit[1])},function(e,n){var t=n.component;e(n,1,0,ii(n,6).ngClassUntouched,ii(n,6).ngClassTouched,ii(n,6).ngClassPristine,ii(n,6).ngClassDirty,ii(n,6).ngClassValid,ii(n,6).ngClassInvalid,ii(n,6).ngClassPending),e(n,7,0,t.getResource(n.parent.context.$implicit[0]).amount)})}function Hk(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["\u221e"]))],null,null)}function Gk(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.getResource(n.parent.context.$implicit[0]).limit)})}function Bk(e){return So(0,[(e()(),eo(0,0,null,null,23,"div",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(2,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),fo(-1,null,[" < "])),(e()(),Jr(16777216,null,null,1,null,Lk)),vi(5,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,Fk)),vi(7,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,Uk)),vi(9,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),fo(-1,null,[" / "])),(e()(),Jr(16777216,null,null,1,null,Hk)),vi(12,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,Gk)),vi(14,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),fo(-1,null,[") "])),(e()(),eo(16,0,null,null,5,"input",[["id","full"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==ii(e,17).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==ii(e,17).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(e.context.$implicit[2]=t)&&l),l},null,null)),vi(17,16384,null,0,Fg,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[Fg]),vi(19,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(21,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(22,0,null,null,1,"label",[["for","full"]],null,null,null,null,null)),(e()(),fo(-1,null,["full"]))],function(e,n){var t=n.component;e(n,2,0,t.getResourceName(n.context.$implicit[0]),"resources"),e(n,5,0,n.context.$implicit[2]&&t.isCoins(n.context.$implicit[0])),e(n,7,0,n.context.$implicit[2]&&!t.isCoins(n.context.$implicit[0])),e(n,9,0,!n.context.$implicit[2]),e(n,12,0,t.isCoins(n.context.$implicit[0])),e(n,14,0,!t.isCoins(n.context.$implicit[0])),e(n,19,0,n.context.$implicit[2])},function(e,n){e(n,16,0,ii(n,21).ngClassUntouched,ii(n,21).ngClassTouched,ii(n,21).ngClassPristine,ii(n,21).ngClassDirty,ii(n,21).ngClassValid,ii(n,21).ngClassInvalid,ii(n,21).ngClassPending)})}function Vk(e){return So(0,[(e()(),eo(0,0,null,null,3,"div",[["id","output"]],null,null,null,null,null)),(e()(),fo(-1,null,[" Output resources: "])),(e()(),Jr(16777216,null,null,1,null,Bk)),vi(3,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,3,0,n.component.building.getWorkSettings().outputSettings)},null)}function Wk(e){return So(0,[(e()(),eo(0,0,null,null,79,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),fo(2,null,[""," work management"])),(e()(),eo(3,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(4,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),fo(-1,null,[" status: "])),(e()(),Jr(16777216,null,null,1,null,_k)),vi(7,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,wk)),vi(9,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,Pk)),vi(11,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,xk)),vi(13,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(14,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),fo(-1,null,[" work management on/off "])),(e()(),eo(16,0,null,null,5,"input",[["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,17).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==ii(e,17).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.building.getWorkSettings().enabled=t)&&l),l},null,null)),vi(17,16384,null,0,Fg,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[Fg]),vi(19,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(21,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(22,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(23,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(24,0,null,null,40,"div",[["id","seasonalRules"]],null,null,null,null,null)),(e()(),eo(25,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),fo(-1,null,["Seasonal rules"])),(e()(),eo(27,0,null,null,8,"span",[["class","seasonalRule"]],null,null,null,null,null)),(e()(),eo(28,0,null,null,1,"label",[["for","spring"]],null,null,null,null,null)),(e()(),fo(-1,null,["Spring"])),(e()(),eo(30,0,null,null,5,"input",[["id","spring"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,31).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==ii(e,31).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.building.getWorkSettings().seasons[0]=t)&&l),l},null,null)),vi(31,16384,null,0,Fg,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[Fg]),vi(33,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(35,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(36,0,null,null,8,"span",[["class","seasonalRule"]],null,null,null,null,null)),(e()(),eo(37,0,null,null,1,"label",[["for","summer"]],null,null,null,null,null)),(e()(),fo(-1,null,["Summer"])),(e()(),eo(39,0,null,null,5,"input",[["id","summer"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,40).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==ii(e,40).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.building.getWorkSettings().seasons[1]=t)&&l),l},null,null)),vi(40,16384,null,0,Fg,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[Fg]),vi(42,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(44,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(45,0,null,null,8,"span",[["class","seasonalRule"]],null,null,null,null,null)),(e()(),eo(46,0,null,null,1,"label",[["for","autumn"]],null,null,null,null,null)),(e()(),fo(-1,null,["Autumn"])),(e()(),eo(48,0,null,null,5,"input",[["id","autumn"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,49).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==ii(e,49).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.building.getWorkSettings().seasons[2]=t)&&l),l},null,null)),vi(49,16384,null,0,Fg,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[Fg]),vi(51,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(53,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(54,0,null,null,8,"span",[["class","seasonalRule"]],null,null,null,null,null)),(e()(),eo(55,0,null,null,1,"label",[["for","winter"]],null,null,null,null,null)),(e()(),fo(-1,null,["Winter"])),(e()(),eo(57,0,null,null,5,"input",[["id","winter"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,58).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==ii(e,58).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.building.getWorkSettings().seasons[3]=t)&&l),l},null,null)),vi(58,16384,null,0,Fg,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[Fg]),vi(60,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(62,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(63,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(64,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,kk)),vi(66,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(67,0,null,null,5,"div",[["id","rules"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,Dk)),vi(69,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(70,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,Vk)),vi(72,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(73,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(74,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(75,0,null,null,4,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),eo(76,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.applyToAll()&&l),l},null,null)),(e()(),fo(-1,null,["Apply to all buildings of this type"])),(e()(),eo(78,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.ok()&&l),l},null,null)),(e()(),fo(-1,null,["Close"]))],function(e,n){var t=n.component;e(n,7,0,t.building.isWorking()),e(n,9,0,!t.building.isWorking()),e(n,11,0,!t.building.getWorkSettings().enabled&&!t.building.isWorking()),e(n,13,0,!t.building.getWorkSettings().enabled&&t.building.isWorking()),e(n,19,0,t.building.getWorkSettings().enabled),e(n,33,0,t.building.getWorkSettings().seasons[0]),e(n,42,0,t.building.getWorkSettings().seasons[1]),e(n,51,0,t.building.getWorkSettings().seasons[2]),e(n,60,0,t.building.getWorkSettings().seasons[3]),e(n,66,0,t.building.getWorkSettings().hasCustomRule),e(n,69,0,t.building.getWorkSettings().inputSettings),e(n,72,0,t.building.getWorkSettings().outputSettings)},function(e,n){e(n,2,0,n.component.getBuildingName()),e(n,16,0,ii(n,21).ngClassUntouched,ii(n,21).ngClassTouched,ii(n,21).ngClassPristine,ii(n,21).ngClassDirty,ii(n,21).ngClassValid,ii(n,21).ngClassInvalid,ii(n,21).ngClassPending),e(n,30,0,ii(n,35).ngClassUntouched,ii(n,35).ngClassTouched,ii(n,35).ngClassPristine,ii(n,35).ngClassDirty,ii(n,35).ngClassValid,ii(n,35).ngClassInvalid,ii(n,35).ngClassPending),e(n,39,0,ii(n,44).ngClassUntouched,ii(n,44).ngClassTouched,ii(n,44).ngClassPristine,ii(n,44).ngClassDirty,ii(n,44).ngClassValid,ii(n,44).ngClassInvalid,ii(n,44).ngClassPending),e(n,48,0,ii(n,53).ngClassUntouched,ii(n,53).ngClassTouched,ii(n,53).ngClassPristine,ii(n,53).ngClassDirty,ii(n,53).ngClassValid,ii(n,53).ngClassInvalid,ii(n,53).ngClassPending),e(n,57,0,ii(n,62).ngClassUntouched,ii(n,62).ngClassTouched,ii(n,62).ngClassPristine,ii(n,62).ngClassDirty,ii(n,62).ngClassValid,ii(n,62).ngClassInvalid,ii(n,62).ngClassPending)})}function zk(e){return So(0,[(e()(),eo(0,0,null,null,5,"app-modal",[["id","work-management-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==ii(e,1).onKeydownHandler(t)&&l),l},ww,_w)),vi(1,4440064,null,0,Nw,[St,dt,qf],{id:[0,"id"]},null),(e()(),eo(2,0,null,0,2,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,Wk)),vi(4,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(5,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,1,0,"work-management-modal"),e(n,4,0,t.building)},null)}var Yk=function(){function e(e,n,t,l){var i=this;this.modalService=e,this.tutorialService=n,this.tickerService=t,this.text="",this.tutorialStages=[],this.currentStep=1,this.modalService.registerForTutorial().subscribe(function(e){i.tutorialStages=e,i.currentStep=1,l.destroyed||l.detectChanges()})}return e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.tutorialService.enableTutorials()},e.prototype.ok=function(){this.currentStep+=1,this.modalService.openTutorialModal(this.tutorialStages[this.currentStep-1].position)},e.prototype.skip=function(){var e=this;this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to skip tutorial?<br>You can always start it again from the top right settings menu");var n=this.modalService.registerForConfirmation().subscribe(function(t){n.unsubscribe(),t&&(e.modalService.sendTutorialResponse(-1),e.tickerService.start(),e.modalService.close(ju.TUTORIAL))})},e.prototype.finish=function(){this.modalService.sendTutorialResponse(1),this.tickerService.start(),this.modalService.close(ju.TUTORIAL)},e}(),Kk=rl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}.space[_ngcontent-%COMP%]{height:20px}"]],data:{}});function jk(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.ok()&&l),l},null,null)),(e()(),fo(-1,null,["NEXT"]))],null,null)}function $k(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.finish()&&l),l},null,null)),(e()(),fo(-1,null,["FINISH"]))],null,null)}function Qk(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.skip()&&l),l},null,null)),(e()(),fo(-1,null,["SKIP TUTORIAL"]))],null,null)}function qk(e){return So(0,[(e()(),eo(0,0,null,null,12,null,null,null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),fo(2,null,["Tutorial ",""])),(e()(),eo(3,0,null,null,0,"div",[["class","space"]],null,null,null,null,null)),(e()(),eo(4,0,null,null,0,"span",[["id","text"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),eo(5,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(6,0,null,null,0,"div",[["class","space"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,jk)),vi(8,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,$k)),vi(10,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,Qk)),vi(12,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(0,null,null,0))],function(e,n){var t=n.component;e(n,8,0,t.currentStep<t.tutorialStages.length),e(n,10,0,t.currentStep===t.tutorialStages.length),e(n,12,0,t.currentStep!==t.tutorialStages.length)},function(e,n){var t=n.component;e(n,2,0,t.currentStep+"/"+t.tutorialStages.length),e(n,4,0,t.tutorialStages[t.currentStep-1].text)})}function Xk(e){return So(0,[(e()(),eo(0,0,null,null,6,"app-modal",[["id","tutorial-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==ii(e,1).onKeydownHandler(t)&&l),l},ww,_w)),vi(1,4440064,null,0,Nw,[St,dt,qf],{id:[0,"id"]},null),(e()(),eo(2,0,null,0,3,"div",[["class","modal"]],null,null,null,null,null)),(e()(),eo(3,0,null,null,2,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,qk)),vi(5,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(6,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,1,0,"tutorial-modal"),e(n,5,0,t.tutorialStages.length>0)},null)}var Zk=function(){function e(e){var n=this;this.modalService=e,this.messageNumber=Zf.length,this.modalService.registerForCloseModal().subscribe(function(e){return n.messageNumber=Zf.length}),this.modalService.registerForOnOpen().subscribe(function(e){e!==ju.CHANGELOG&&e!==ju.ALL||(n.textRef.nativeElement.scrollTop=0)})}return e.prototype.ngOnInit=function(){},e.prototype.ok=function(){this.modalService.close(ju.CHANGELOG)},e.prototype.hasPrevious=function(){return this.messageNumber>1},e.prototype.previous=function(){this.messageNumber>1&&(this.messageNumber-=1)},e.prototype.hasNext=function(){return this.messageNumber<Zf.length},e.prototype.next=function(){this.messageNumber<Zf.length&&(this.messageNumber+=1)},e.prototype.onKeydownHandler=function(e){"none"!==document.getElementById("changelog-modal").style.display&&(e.preventDefault(),this.ok())},e.prototype.getChange=function(){return Zf[this.messageNumber-1]},e}(),Jk=rl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}#buttons[_ngcontent-%COMP%]{width:50%;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 33%}#header[_ngcontent-%COMP%]{font-size:1.5em;font-weight:700;margin-bottom:10px}#text[_ngcontent-%COMP%]{font-size:1.2em;overflow-y:auto}#text[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:0}button[disabled][_ngcontent-%COMP%]{color:#5a5a5a}button[disabled][_ngcontent-%COMP%]:active{background-color:var(--passive-colour);cursor:default}button[disabled][_ngcontent-%COMP%]:hover{cursor:default}"]],data:{}});function eM(e){return So(0,[ro(671088640,1,{textRef:0}),(e()(),eo(1,0,null,null,14,"app-modal",[["id","changelog-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==ii(e,2).onKeydownHandler(t)&&l),l},ww,_w)),vi(2,4440064,null,0,Nw,[St,dt,qf],{id:[0,"id"]},null),(e()(),eo(3,0,null,0,11,"div",[["class","modal"]],null,null,null,null,null)),(e()(),eo(4,0,null,null,10,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),eo(5,0,null,null,0,"span",[["id","header"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),eo(6,0,[[1,0],["text",1]],null,0,"div",[["id","text"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),eo(7,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(8,0,null,null,6,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),eo(9,0,null,null,1,"button",[],[[8,"disabled",0]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.previous()&&l),l},null,null)),(e()(),fo(-1,null,["PREVIOUS"])),(e()(),eo(11,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.ok()&&l),l},null,null)),(e()(),fo(-1,null,["CLOSE"])),(e()(),eo(13,0,null,null,1,"button",[],[[8,"disabled",0]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.next()&&l),l},null,null)),(e()(),fo(-1,null,["NEXT"])),(e()(),eo(15,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){e(n,2,0,"changelog-modal")},function(e,n){var t=n.component;e(n,5,0,t.getChange().VERSION),e(n,6,0,t.getChange().MESSAGE),e(n,9,0,!t.hasPrevious()),e(n,13,0,!t.hasNext())})}var nM=function(){function e(e){var n=this;this.modalService=e,this.modalService.registerForResourceOptions().subscribe(function(e){n.resourceOptions=Uf.clone(e),setTimeout(function(){window.document.getElementById("reserved").select()},10)}),this.modalService.registerForCloseModal().subscribe(function(e){e!==ju.RESOURCE_MANAGEMENT&&e!==ju.ALL||n.modalService.sendResourceOptionsResponse(null)})}return e.prototype.ngOnInit=function(){},e.prototype.ok=function(){this.modalService.sendResourceOptionsResponse(this.resourceOptions),this.modalService.close(ju.RESOURCE_MANAGEMENT)},e.prototype.cancel=function(){this.modalService.sendResourceOptionsResponse(null),this.modalService.close(ju.RESOURCE_MANAGEMENT)},e.prototype.onKeydownHandler=function(e){"none"!==document.getElementById("resource-management-modal").style.display&&(e.preventDefault(),this.ok())},e.prototype.getResourceName=function(){return Vu.prepareResourceName(this.resourceOptions.resource)},e.prototype.reset=function(){this.resourceOptions=new Uf(this.resourceOptions.resource)},e}(),tM=rl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}#title[_ngcontent-%COMP%]{font-size:1.3em;font-weight:700;margin-bottom:20px}input[type=number][_ngcontent-%COMP%]{width:6ch}#exceptions[_ngcontent-%COMP%]{width:100%;text-align:center}.subTitle[_ngcontent-%COMP%]{padding-top:10px;text-align:center}.entry[_ngcontent-%COMP%]{text-align:center}.exceptionEntry[_ngcontent-%COMP%]{display:inline-block;text-align:center;border:1px solid #000;min-width:100px;min-height:50px;padding:4px 4px 0;margin:5px}#buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px;padding:5px}.hidden[_ngcontent-%COMP%]{visibility:hidden}.tradeLabel[_ngcontent-%COMP%]{display:inline-block;width:200px}"]],data:{}});function lM(e){return So(0,[(e()(),eo(0,0,null,null,34,"div",[["class","exceptionEntry"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,7,"label",[],[[8,"htmlFor",0]],null,null,null,null)),(e()(),fo(2,null,["",""])),(e()(),eo(3,0,null,null,5,"input",[["type","checkbox"]],[[8,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==ii(e,4).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==ii(e,4).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(e.context.$implicit.enabled=t)&&l),l},null,null)),vi(4,16384,null,0,Fg,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[Fg]),vi(6,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(8,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(9,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(10,0,null,null,9,"input",[["min","0"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0;return"input"===n&&(l=!1!==ii(e,11)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,11).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,11)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,11)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==ii(e,12).onChange(t.target.value)&&l),"input"===n&&(l=!1!==ii(e,12).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,12).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(e.context.$implicit.reserved=t)&&l),l},null,null)),vi(11,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),vi(12,16384,null,0,Jg,[St,dt],null,null),Ei(1024,null,Lg,function(e,n){return[e,n]},[Hg,Jg]),vi(14,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(16,16384,null,0,zg,[[4,Wg]],null,null),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(18,278528,null,0,Js,[Xs],{ngClass:[0,"ngClass"]},null),ho(19,{hidden:0}),(e()(),eo(20,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(21,0,null,null,4,"label",[["for","percent"]],null,null,null,null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(23,278528,null,0,Js,[Xs],{ngClass:[0,"ngClass"]},null),ho(24,{hidden:0}),(e()(),fo(-1,null,["reserve %"])),(e()(),eo(26,0,null,null,8,"input",[["id","percent"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var l=!0;return"change"===n&&(l=!1!==ii(e,27).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==ii(e,27).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(e.context.$implicit.reservedPercent=t)&&l),l},null,null)),vi(27,16384,null,0,Fg,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[Fg]),vi(29,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(31,16384,null,0,zg,[[4,Wg]],null,null),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(33,278528,null,0,Js,[Xs],{ngClass:[0,"ngClass"]},null),ho(34,{hidden:0})],function(e,n){e(n,6,0,n.context.$implicit.enabled),e(n,14,0,n.context.$implicit.reserved);var t=e(n,19,0,!n.context.$implicit.enabled);e(n,18,0,t);var l=e(n,24,0,!n.context.$implicit.enabled);e(n,23,0,l),e(n,29,0,n.context.$implicit.reservedPercent);var i=e(n,34,0,!n.context.$implicit.enabled);e(n,33,0,i)},function(e,n){e(n,1,0,xl(1,"",n.context.$implicit.name,"")),e(n,2,0,n.context.$implicit.name),e(n,3,0,xl(1,"",n.context.$implicit.name,""),ii(n,8).ngClassUntouched,ii(n,8).ngClassTouched,ii(n,8).ngClassPristine,ii(n,8).ngClassDirty,ii(n,8).ngClassValid,ii(n,8).ngClassInvalid,ii(n,8).ngClassPending),e(n,10,0,ii(n,16).ngClassUntouched,ii(n,16).ngClassTouched,ii(n,16).ngClassPristine,ii(n,16).ngClassDirty,ii(n,16).ngClassValid,ii(n,16).ngClassInvalid,ii(n,16).ngClassPending),e(n,26,0,ii(n,31).ngClassUntouched,ii(n,31).ngClassTouched,ii(n,31).ngClassPristine,ii(n,31).ngClassDirty,ii(n,31).ngClassValid,ii(n,31).ngClassInvalid,ii(n,31).ngClassPending)})}function iM(e){return So(0,[(e()(),eo(0,0,null,null,123,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),fo(2,null,[""," management"])),(e()(),eo(3,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(4,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(5,0,null,null,19,"span",[["class","entry"]],null,null,null,null,null)),(e()(),eo(6,0,null,null,1,"label",[["for","reserved"]],null,null,null,null,null)),(e()(),fo(-1,null,["reserved amount: "])),(e()(),eo(8,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(9,0,null,null,6,"input",[["id","reserved"],["min","0"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,10)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,10).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,10)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,10)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==ii(e,11).onChange(t.target.value)&&l),"input"===n&&(l=!1!==ii(e,11).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,11).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.resourceOptions.reserve=t)&&l),l},null,null)),vi(10,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),vi(11,16384,null,0,Jg,[St,dt],null,null),Ei(1024,null,Lg,function(e,n){return[e,n]},[Hg,Jg]),vi(13,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(15,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(16,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(17,0,null,null,1,"label",[["for","mainPercent"]],null,null,null,null,null)),(e()(),fo(-1,null,["reserve %"])),(e()(),eo(19,0,null,null,5,"input",[["id","mainPercent"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,20).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==ii(e,20).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.resourceOptions.reservePercent=t)&&l),l},null,null)),vi(20,16384,null,0,Fg,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[Fg]),vi(22,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(24,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(25,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(26,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(27,0,null,null,3,"span",[["class","subTitle"]],null,null,null,null,null)),(e()(),fo(-1,null,["Exceptions:"])),(e()(),eo(29,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),fo(-1,null,[" (will use it's own limit number if enabled)"])),(e()(),eo(31,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(32,0,null,null,2,"div",[["id","exceptions"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,lM)),vi(34,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),eo(35,0,null,null,3,"div",[["class","subTitle"]],null,null,null,null,null)),(e()(),fo(-1,null,["Auto trade settings"])),(e()(),eo(37,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),fo(-1,null,["Auto trade will try to buy/sell until you have the specified amount of resource"])),(e()(),eo(39,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(40,0,null,null,76,"div",[],null,null,null,null,null)),(e()(),eo(41,0,null,null,1,"label",[["class","tradeLabel"],["for","autoSellEnabled"]],null,null,null,null,null)),(e()(),fo(-1,null,["Auto sell enabled"])),(e()(),eo(43,0,null,null,5,"input",[["id","autoSellEnabled"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,44).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==ii(e,44).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.resourceOptions.autoTrade.autoSellEnabled=t)&&l),l},null,null)),vi(44,16384,null,0,Fg,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[Fg]),vi(46,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(48,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(49,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(50,0,null,null,17,"span",[],null,null,null,null,null)),(e()(),eo(51,0,null,null,1,"label",[["class","tradeLabel"],["for","autoSellAmount"]],null,null,null,null,null)),(e()(),fo(-1,null,["continuous sell limit"])),(e()(),eo(53,0,null,null,6,"input",[["id","autoSellAmount"],["min","0"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,54)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,54).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,54)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,54)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==ii(e,55).onChange(t.target.value)&&l),"input"===n&&(l=!1!==ii(e,55).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,55).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.resourceOptions.autoTrade.autoSellAmount=t)&&l),l},null,null)),vi(54,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),vi(55,16384,null,0,Jg,[St,dt],null,null),Ei(1024,null,Lg,function(e,n){return[e,n]},[Hg,Jg]),vi(57,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(59,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(60,0,null,null,5,"input",[["id","autoSellPercentage"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,61).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==ii(e,61).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.resourceOptions.autoTrade.autoSellPercentage=t)&&l),l},null,null)),vi(61,16384,null,0,Fg,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[Fg]),vi(63,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(65,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(66,0,null,null,1,"label",[["for","autoSellPercentage"]],null,null,null,null,null)),(e()(),fo(-1,null,["%"])),(e()(),eo(68,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(69,0,null,null,1,"label",[["class","tradeLabel"],["for","autoSellOrder"]],null,null,null,null,null)),(e()(),fo(-1,null,["Fixed one time sell amount"])),(e()(),eo(71,0,null,null,6,"input",[["id","autoSellOrder"],["min","0"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,72)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,72).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,72)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,72)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==ii(e,73).onChange(t.target.value)&&l),"input"===n&&(l=!1!==ii(e,73).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,73).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.resourceOptions.autoTrade.autoSellOrder=t)&&l),l},null,null)),vi(72,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),vi(73,16384,null,0,Jg,[St,dt],null,null),Ei(1024,null,Lg,function(e,n){return[e,n]},[Hg,Jg]),vi(75,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(77,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(78,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(79,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(80,0,null,null,1,"label",[["class","tradeLabel"],["for","autoBuyEnabled"]],null,null,null,null,null)),(e()(),fo(-1,null,["Auto buy enabled"])),(e()(),eo(82,0,null,null,5,"input",[["id","autoBuyEnabled"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,83).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==ii(e,83).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.resourceOptions.autoTrade.autoBuyEnabled=t)&&l),l},null,null)),vi(83,16384,null,0,Fg,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[Fg]),vi(85,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(87,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(88,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(89,0,null,null,17,"span",[],null,null,null,null,null)),(e()(),eo(90,0,null,null,1,"label",[["class","tradeLabel"],["for","autoBuyAmount"]],null,null,null,null,null)),(e()(),fo(-1,null,["continuous buy limit"])),(e()(),eo(92,0,null,null,6,"input",[["id","autoBuyAmount"],["min","0"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,93)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,93).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,93)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,93)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==ii(e,94).onChange(t.target.value)&&l),"input"===n&&(l=!1!==ii(e,94).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,94).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.resourceOptions.autoTrade.autoBuyAmount=t)&&l),l},null,null)),vi(93,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),vi(94,16384,null,0,Jg,[St,dt],null,null),Ei(1024,null,Lg,function(e,n){return[e,n]},[Hg,Jg]),vi(96,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(98,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(99,0,null,null,5,"input",[["id","autoBuyPercentage"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==ii(e,100).onChange(t.target.checked)&&l),"blur"===n&&(l=!1!==ii(e,100).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.resourceOptions.autoTrade.autoBuyPercentage=t)&&l),l},null,null)),vi(100,16384,null,0,Fg,[St,dt],null,null),Ei(1024,null,Lg,function(e){return[e]},[Fg]),vi(102,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(104,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(105,0,null,null,1,"label",[["for","autoBuyPercentage"]],null,null,null,null,null)),(e()(),fo(-1,null,["%"])),(e()(),eo(107,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(108,0,null,null,1,"label",[["class","tradeLabel"],["for","autoBuyOrder"]],null,null,null,null,null)),(e()(),fo(-1,null,["Fixed one time buy amount"])),(e()(),eo(110,0,null,null,6,"input",[["id","autoBuyOrder"],["min","0"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,111)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,111).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,111)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,111)._compositionEnd(t.target.value)&&l),"change"===n&&(l=!1!==ii(e,112).onChange(t.target.value)&&l),"input"===n&&(l=!1!==ii(e,112).onChange(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,112).onTouched()&&l),"ngModelChange"===n&&(l=!1!==(i.resourceOptions.autoTrade.autoBuyOrder=t)&&l),l},null,null)),vi(111,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),vi(112,16384,null,0,Jg,[St,dt],null,null),Ei(1024,null,Lg,function(e,n){return[e,n]},[Hg,Jg]),vi(114,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(116,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(117,0,null,null,6,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),eo(118,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.ok()&&l),l},null,null)),(e()(),fo(-1,null,["SAVE"])),(e()(),eo(120,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.cancel()&&l),l},null,null)),(e()(),fo(-1,null,["CANCEL"])),(e()(),eo(122,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.reset()&&l),l},null,null)),(e()(),fo(-1,null,["RESET"]))],function(e,n){var t=n.component;e(n,13,0,t.resourceOptions.reserve),e(n,22,0,t.resourceOptions.reservePercent),e(n,34,0,t.resourceOptions.consumers),e(n,46,0,t.resourceOptions.autoTrade.autoSellEnabled),e(n,57,0,t.resourceOptions.autoTrade.autoSellAmount),e(n,63,0,t.resourceOptions.autoTrade.autoSellPercentage),e(n,75,0,t.resourceOptions.autoTrade.autoSellOrder),e(n,85,0,t.resourceOptions.autoTrade.autoBuyEnabled),e(n,96,0,t.resourceOptions.autoTrade.autoBuyAmount),e(n,102,0,t.resourceOptions.autoTrade.autoBuyPercentage),e(n,114,0,t.resourceOptions.autoTrade.autoBuyOrder)},function(e,n){e(n,2,0,n.component.getResourceName()),e(n,9,0,ii(n,15).ngClassUntouched,ii(n,15).ngClassTouched,ii(n,15).ngClassPristine,ii(n,15).ngClassDirty,ii(n,15).ngClassValid,ii(n,15).ngClassInvalid,ii(n,15).ngClassPending),e(n,19,0,ii(n,24).ngClassUntouched,ii(n,24).ngClassTouched,ii(n,24).ngClassPristine,ii(n,24).ngClassDirty,ii(n,24).ngClassValid,ii(n,24).ngClassInvalid,ii(n,24).ngClassPending),e(n,43,0,ii(n,48).ngClassUntouched,ii(n,48).ngClassTouched,ii(n,48).ngClassPristine,ii(n,48).ngClassDirty,ii(n,48).ngClassValid,ii(n,48).ngClassInvalid,ii(n,48).ngClassPending),e(n,53,0,ii(n,59).ngClassUntouched,ii(n,59).ngClassTouched,ii(n,59).ngClassPristine,ii(n,59).ngClassDirty,ii(n,59).ngClassValid,ii(n,59).ngClassInvalid,ii(n,59).ngClassPending),e(n,60,0,ii(n,65).ngClassUntouched,ii(n,65).ngClassTouched,ii(n,65).ngClassPristine,ii(n,65).ngClassDirty,ii(n,65).ngClassValid,ii(n,65).ngClassInvalid,ii(n,65).ngClassPending),e(n,71,0,ii(n,77).ngClassUntouched,ii(n,77).ngClassTouched,ii(n,77).ngClassPristine,ii(n,77).ngClassDirty,ii(n,77).ngClassValid,ii(n,77).ngClassInvalid,ii(n,77).ngClassPending),e(n,82,0,ii(n,87).ngClassUntouched,ii(n,87).ngClassTouched,ii(n,87).ngClassPristine,ii(n,87).ngClassDirty,ii(n,87).ngClassValid,ii(n,87).ngClassInvalid,ii(n,87).ngClassPending),e(n,92,0,ii(n,98).ngClassUntouched,ii(n,98).ngClassTouched,ii(n,98).ngClassPristine,ii(n,98).ngClassDirty,ii(n,98).ngClassValid,ii(n,98).ngClassInvalid,ii(n,98).ngClassPending),e(n,99,0,ii(n,104).ngClassUntouched,ii(n,104).ngClassTouched,ii(n,104).ngClassPristine,ii(n,104).ngClassDirty,ii(n,104).ngClassValid,ii(n,104).ngClassInvalid,ii(n,104).ngClassPending),e(n,110,0,ii(n,116).ngClassUntouched,ii(n,116).ngClassTouched,ii(n,116).ngClassPristine,ii(n,116).ngClassDirty,ii(n,116).ngClassValid,ii(n,116).ngClassInvalid,ii(n,116).ngClassPending)})}function rM(e){return So(0,[(e()(),eo(0,0,null,null,5,"app-modal",[["id","resource-management-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==ii(e,1).onKeydownHandler(t)&&l),l},ww,_w)),vi(1,4440064,null,0,Nw,[St,dt,qf],{id:[0,"id"]},null),(e()(),eo(2,0,null,0,2,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,iM)),vi(4,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(5,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,1,0,"resource-management-modal"),e(n,4,0,t.resourceOptions)},null)}var oM=function(){function e(e,n){var t=this;this.modalService=e,this.recipeService=n,this.selectedRecipeId=-1,this.modalService.registerForCloseModal().subscribe(function(e){e!==ju.RECIPE&&e!==ju.ALL||(t.selectedRecipeId=-1,t.modalService.sendValueInput(null))}),this.modalService.registerForValue().subscribe(function(e){t.selectedRecipeId=e})}return e.prototype.ngOnInit=function(){},e.prototype.ok=function(){this.modalService.sendValueInput(this.selectedRecipeId),this.modalService.close(ju.RECIPE)},e.prototype.cancel=function(){this.modalService.sendValueInput(null),this.modalService.close(ju.RECIPE)},e.prototype.onKeydownHandler=function(e){"none"!==document.getElementById("recipe-modal").style.display&&(e.preventDefault(),this.ok())},e.prototype.getRecipes=function(){return this.recipeService.getRecipes()},e.prototype.choose=function(e){this.selectedRecipeId=e.id},e}(),uM=rl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}#buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px;padding:5px}app-recipe[_ngcontent-%COMP%]{font-size:.8em;display:inline-block;width:110px;margin:4px 8px;cursor:pointer}.recipe[_ngcontent-%COMP%]{display:inline-block}.selected[_ngcontent-%COMP%]{border:2px solid #000}"]],data:{}});function sM(e){return So(0,[(e()(),eo(0,0,null,null,5,"div",[["class","recipe"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,4,"app-recipe",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.choose(e.context.$implicit)&&l),l},ly,LE)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(3,278528,null,0,Js,[Xs],{ngClass:[0,"ngClass"]},null),ho(4,{selected:0}),vi(5,114688,null,0,DE,[Tv,am,kE],{recipe:[0,"recipe"]},null)],function(e,n){var t=e(n,4,0,n.context.$implicit.id===n.component.selectedRecipeId);e(n,3,0,t),e(n,5,0,n.context.$implicit)},null)}function aM(e){return So(0,[(e()(),eo(0,0,null,null,15,"app-modal",[["id","recipe-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==ii(e,1).onKeydownHandler(t)&&l),l},ww,_w)),vi(1,4440064,null,0,Nw,[St,dt,qf],{id:[0,"id"]},null),(e()(),eo(2,0,null,0,12,"div",[["class","modal"]],null,null,null,null,null)),(e()(),eo(3,0,null,null,11,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),eo(4,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["Choose recipe"])),(e()(),eo(6,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(7,0,null,null,2,"div",[["id","recipes"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,sM)),vi(9,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),eo(10,0,null,null,4,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),eo(11,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.ok()&&l),l},null,null)),(e()(),fo(-1,null,["CONFIRM"])),(e()(),eo(13,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.cancel()&&l),l},null,null)),(e()(),fo(-1,null,["CANCEL"])),(e()(),eo(15,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,1,0,"recipe-modal"),e(n,9,0,t.getRecipes())},null)}var cM=function(){function e(e,n){var t=this;this.modalService=e,this.worldService=n,this.on=!1,this.selectOrigin=!0,this.modalService.registerForRegionSelectionOrder().subscribe(function(e){t.selectOrigin=e,t.on=!0})}return e.prototype.ngOnInit=function(){},e.prototype.select=function(){if(this.canSelect()){var e=this.worldService.getSelectedRegion();this.modalService.setReturnRegion(e),this.modalService.close(ju.WORLD),this.on=!1}else this.modalService.info("Only your and neutral regions can be selected as origin")},e.prototype.cancel=function(){this.modalService.setReturnRegion(null),this.modalService.close(ju.WORLD),this.on=!1},e.prototype.canSelect=function(){if(!this.on)return!1;var e=this.worldService.getSelectedCountry();return e?!(this.selectOrigin&&e.id!==Uu.PLAYER&&e.id!==Uu.NEUTRAL):void 0},e}(),pM=rl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{height:660px;max-height:660px;margin:20px;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}app-world[_ngcontent-%COMP%]{display:inline-block;height:90%;width:90%}#buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px;margin-right:4px}.inactive[_ngcontent-%COMP%]{color:#5f5f5f}.inactive[_ngcontent-%COMP%]:hover{cursor:initial}"]],data:{}});function hM(e){return So(0,[(e()(),eo(0,0,null,null,14,"app-modal",[["id","world-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==ii(e,1).onKeydownHandler(t)&&l),l},ww,_w)),vi(1,4440064,null,0,Nw,[St,dt,qf],{id:[0,"id"]},null),(e()(),eo(2,0,null,0,11,"div",[["class","modal"]],null,null,null,null,null)),(e()(),eo(3,0,null,null,10,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),eo(4,0,null,null,1,"app-world",[],null,[[null,"keydown"],[null,"mousedown"],[null,"mousemove"],[null,"mouseup"],[null,"wheel"]],function(e,n,t){var l=!0;return"keydown"===n&&(l=!1!==ii(e,5).handleKeyDown(t)&&l),"mousedown"===n&&(l=!1!==ii(e,5).dragStart(t)&&l),"mousemove"===n&&(l=!1!==ii(e,5).mousemove(t)&&l),"mouseup"===n&&(l=!1!==ii(e,5).dragEnd(t)&&l),"wheel"===n&&(l=!1!==ii(e,5).onScroll(t)&&l),l},qT,MO)),vi(5,114688,null,0,kO,[Vf,PO,Jf,am,qf],{selecting:[0,"selecting"]},null),(e()(),eo(6,0,null,null,7,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),eo(7,0,null,null,4,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.select()&&l),l},null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(9,278528,null,0,Js,[Xs],{ngClass:[0,"ngClass"]},null),ho(10,{inactive:0}),(e()(),fo(-1,null,["Select"])),(e()(),eo(12,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.cancel()&&l),l},null,null)),(e()(),fo(-1,null,["Cancel"])),(e()(),eo(14,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,1,0,"world-modal"),e(n,5,0,!0);var l=e(n,10,0,!t.canSelect());e(n,9,0,l)},null)}var dM=function(){function e(e,n,t){var l=this;this.modalService=e,this.resourcesService=n,this.worldService=t,this.defensesCost=[[{resource:Iu.LOG,amount:50}],[{resource:Iu.LOG,amount:50},{resource:Iu.PLANK,amount:30}],[{resource:Iu.LOG,amount:50},{resource:Iu.CUT_STONE,amount:30}],[{resource:Iu.LOG,amount:80},{resource:Iu.CUT_STONE,amount:50}],[{resource:Iu.LOG,amount:80},{resource:Iu.PLANK,amount:40},{resource:Iu.CUT_STONE,amount:40}],[{resource:Iu.LOG,amount:100},{resource:Iu.PLANK,amount:60},{resource:Iu.CUT_STONE,amount:60}],[{resource:Iu.LOG,amount:100},{resource:Iu.PLANK,amount:80},{resource:Iu.CUT_STONE,amount:80}]],this.modalService.registerForWorldRegion().subscribe(function(e){l.region=e})}return e.prototype.ngOnInit=function(){},e.prototype.isWallCostMet=function(){var e=this,n=!0;return this.defensesCost[this.region.defense].forEach(function(t){0!==e.resourcesService.hasResource(t.resource,t.amount,"Region construction",!0)&&(n=!1)}),n},e.prototype.buildWall=function(){var e=this;this.defensesCost[this.region.defense].forEach(function(n){e.resourcesService.decreaseResource(n.resource,n.amount,"Region construction",!0)}),this.worldService.buildDefense(),this.region=null,this.modalService.close(ju.WORLD_BUILD)},e.prototype.getBuildingCostEntries=function(){return this.defensesCost[this.region.defense]},e.prototype.hasResource=function(e){return 0===this.resourcesService.hasResource(e.resource,e.amount,"Region construction",!0)},e.prototype.getResourceName=function(e){return Vu.prepareResourceName(e)},e.prototype.buildWallNotAvailable=function(){this.modalService.info("Not enough resources")},e}(),gM=rl({encapsulation:0,styles:[["#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em}.building[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;text-align:center;border:1px solid #000;margin-bottom:10px}.buildingTitle[_ngcontent-%COMP%]{font-weight:600;background-color:var(--active-colour);border-bottom:1px solid #000}.buildingSecondRow[_ngcontent-%COMP%]{display:-webkit-box;display:flex;width:100%;border-right:1px solid #000;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.details[_ngcontent-%COMP%]{width:100%;text-align:center}.resourceIcon[_ngcontent-%COMP%]{height:20px;width:20px;vertical-align:middle}#description[_ngcontent-%COMP%]{margin-bottom:10px}.icon[_ngcontent-%COMP%]{display:-webkit-inline-box;display:inline-flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;margin-right:10px}.buildButton[_ngcontent-%COMP%]{width:30%}.buildButtonNotAvailable[_ngcontent-%COMP%]{width:30%;cursor:not-allowed}.notMet[_ngcontent-%COMP%]{color:var(--negative-colour)}"]],data:{}});function fM(e){return So(0,[(e()(),eo(0,0,null,null,8,"span",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,7,"span",[["class","icon"]],null,null,null,null,null)),(e()(),eo(2,0,null,null,4,"span",[],null,null,null,null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(4,278528,null,0,Js,[Xs],{ngClass:[0,"ngClass"]},null),ho(5,{notMet:0}),(e()(),fo(6,null,["",""])),(e()(),eo(7,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(8,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){var t=n.component,l=e(n,5,0,!t.hasResource(n.context.$implicit));e(n,4,0,l),e(n,8,0,t.getResourceName(n.context.$implicit.resource),"resources")},function(e,n){e(n,6,0,n.context.$implicit.amount)})}function mM(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[["class","buildButton"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.buildWall()&&l),l},null,null)),(e()(),fo(-1,null,["Build"]))],null,null)}function vM(e){return So(0,[(e()(),eo(0,0,null,null,1,"button",[["class","buildButtonNotAvailable"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.buildWallNotAvailable()&&l),l},null,null)),(e()(),fo(-1,null,["Build "]))],null,null)}function SM(e){return So(0,[(e()(),eo(0,0,null,null,13,"div",[["class","building"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,8,"div",[["class","buildingSecondRow"]],null,null,null,null,null)),(e()(),eo(2,0,null,null,1,"span",[["class","buildingTitle"]],null,null,null,null,null)),(e()(),fo(-1,null,["Defenses "])),(e()(),eo(4,0,null,null,5,"div",[["class","details"]],null,null,null,null,null)),(e()(),eo(5,0,null,null,0,"div",[["id","description"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),eo(6,0,null,null,1,"div",[["class","subTitle"]],null,null,null,null,null)),(e()(),fo(-1,null,["cost:"])),(e()(),Jr(16777216,null,null,1,null,fM)),vi(9,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),Jr(16777216,null,null,1,null,mM)),vi(11,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,vM)),vi(13,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,9,0,t.getBuildingCostEntries()),e(n,11,0,t.isWallCostMet()),e(n,13,0,!t.isWallCostMet())},function(e,n){e(n,5,0,"Each defense level decreases attacking unit strength by 1 but only up to half of that unit total strength")})}function EM(e){return So(0,[(e()(),eo(0,0,null,null,5,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"div",[["id","title"]],null,null,null,null,null)),(e()(),fo(-1,null,["Region construction"])),(e()(),eo(3,0,null,null,2,"div",[["id","buildings"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,SM)),vi(5,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,5,0,n.component.region.defense<7)},null)}function yM(e){return So(0,[(e()(),eo(0,0,null,null,5,"app-modal",[["id","world-build-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==ii(e,1).onKeydownHandler(t)&&l),l},ww,_w)),vi(1,4440064,null,0,Nw,[St,dt,qf],{id:[0,"id"]},null),(e()(),eo(2,0,null,0,2,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,EM)),vi(4,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(5,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,1,0,"world-build-modal"),e(n,4,0,t.region)},null)}var RM=function(){function e(e){this.modalService=e,this.text="",this.value=""}return e.prototype.ngOnInit=function(){var e=this;this.modalService.registerForText().subscribe(function(n){e.text=n,e.inputRef.nativeElement.select()}),this.modalService.registerForValue().subscribe(function(n){return e.value=n})},e.prototype.ok=function(){this.modalService.sendValueInput(this.value),this.modalService.close(ju.INPUT)},e.prototype.cancel=function(){this.modalService.sendValueInput(null),this.modalService.close(ju.INPUT)},e.prototype.onKeydownHandler=function(e){"none"!==document.getElementById("input-modal").style.display&&(e.preventDefault(),this.ok())},e}(),bM=rl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}#buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px;padding:5px}"]],data:{}});function OM(e){return So(0,[ro(402653184,1,{inputRef:0}),(e()(),eo(1,0,null,null,18,"app-modal",[["id","input-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==ii(e,2).onKeydownHandler(t)&&l),l},ww,_w)),vi(2,4440064,null,0,Nw,[St,dt,qf],{id:[0,"id"]},null),(e()(),eo(3,0,null,0,15,"div",[["class","modal"]],null,null,null,null,null)),(e()(),eo(4,0,null,null,14,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),eo(5,0,null,null,0,"span",[["id","text"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),eo(6,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(7,0,[[1,0],["input",1]],null,5,"input",[["id","input"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var l=!0,i=e.component;return"input"===n&&(l=!1!==ii(e,8)._handleInput(t.target.value)&&l),"blur"===n&&(l=!1!==ii(e,8).onTouched()&&l),"compositionstart"===n&&(l=!1!==ii(e,8)._compositionStart()&&l),"compositionend"===n&&(l=!1!==ii(e,8)._compositionEnd(t.target.value)&&l),"ngModelChange"===n&&(l=!1!==(i.value=t)&&l),l},null,null)),vi(8,16384,null,0,Hg,[St,dt,[2,Ug]],null,null),Ei(1024,null,Lg,function(e){return[e]},[Hg]),vi(10,671744,null,0,kf,[[8,null],[8,null],[8,null],[6,Lg]],{model:[0,"model"]},{update:"ngModelChange"}),Ei(2048,null,Wg,null,[kf]),vi(12,16384,null,0,zg,[[4,Wg]],null,null),(e()(),eo(13,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(14,0,null,null,4,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),eo(15,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.ok()&&l),l},null,null)),(e()(),fo(-1,null,["CONFIRM"])),(e()(),eo(17,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.cancel()&&l),l},null,null)),(e()(),fo(-1,null,["CANCEL"])),(e()(),eo(19,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,2,0,"input-modal"),e(n,10,0,t.value)},function(e,n){e(n,5,0,n.component.text),e(n,7,0,ii(n,12).ngClassUntouched,ii(n,12).ngClassTouched,ii(n,12).ngClassPristine,ii(n,12).ngClassDirty,ii(n,12).ngClassValid,ii(n,12).ngClassInvalid,ii(n,12).ngClassPending)})}var TM=function(){function e(e,n,t,l){var i=this;this.modalService=e,this.heritageService=n,this.gameService=t,this.techService=l,this.modalService.registerForTech().subscribe(function(e){i.tech=e})}return e.prototype.ngOnInit=function(){},e.prototype.ok=function(){this.hasQueueSpace()?this.modalService.sendConfirmationResult(!0):this.modalService.sendConfirmationResult(!1),this.tech=null,this.modalService.close(ju.RESEARCH_UNLOCK)},e.prototype.cancel=function(){this.modalService.sendConfirmationResult(!1),this.tech=null,this.modalService.close(ju.RESEARCH_UNLOCK)},e.prototype.onKeydownHandler=function(e){"none"!==document.getElementById("research-unlock-modal").style.display&&(e.preventDefault(),this.ok())},e.prototype.hasQueueSpace=function(){return this.techService.hasQueueSpace()},e.prototype.requiredHeritagePoints=function(){var e=0,n=10*this.tech.getRequiredResearchPoints();return Array.from(this.tech.getCost()).forEach(function(e){n+=e[0]===Iu.FOOD?Math.ceil(e[1]/50):Rs.getResource(e[0]).TRADE_VALUE*e[1]}),n>0&&(e+=Math.ceil(n/100)),e},e.prototype.hasHeritagePoints=function(){return this.heritageService.hasHeritagePoints(this.requiredHeritagePoints())},e.prototype.unlockWithHeritage=function(){this.meetsPrerequisites()?this.heritageService.spendHeritagePoints(this.requiredHeritagePoints())?this.techService.finishTech(this.tech.getTech()):this.modalService.info("Not enough Heritage Points"):this.modalService.info("Prerequisites not met"),this.modalService.sendConfirmationResult(!1),this.tech=null,this.modalService.close(ju.RESEARCH_UNLOCK)},e.prototype.isHeritageUnlocked=function(){return this.gameService.isEnabled(_u.HERITAGE)},e.prototype.getHeritagePoints=function(){return this.heritageService.getAvailableHeritagePoints()},e.prototype.getHeritageCap=function(){return this.heritageService.getHeritagePoints()},e.prototype.meetsPrerequisites=function(){var e=this,n=!0,t=this.techService.getTechDone();return this.tech.getPrerequisites().forEach(function(e){n&&(t.includes(e)||(n=!1))}),this.tech.getFlagPrerequisites().forEach(function(t){e.gameService.isEnabled(t)||n&&(n=!1)}),n},e}(),CM=rl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;max-width:750px;margin:200px auto auto}#buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px;padding:5px}.center[_ngcontent-%COMP%]{text-align:center}.disabled[_ngcontent-%COMP%]{color:#5a5a5a}"]],data:{}});function IM(e){return So(0,[(e()(),eo(0,0,null,null,7,"div",[["class","center"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,0,"span",[["id","text"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),eo(2,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(3,0,null,null,4,"div",[["class","buttons"]],null,null,null,null,null)),(e()(),eo(4,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.ok()&&l),l},null,null)),(e()(),fo(-1,null,["YES"])),(e()(),eo(6,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.cancel()&&l),l},null,null)),(e()(),fo(-1,null,["NO"]))],null,function(e,n){e(n,1,0,"Are you sure you want to start researching "+n.component.tech.getTechName()+"?")})}function AM(e){return So(0,[(e()(),eo(0,0,null,null,2,"div",[["class","center"]],null,null,null,null,null)),(e()(),fo(-1,null,[" Research queue is full "])),(e()(),eo(2,0,null,null,0,"br",[],null,null,null,null,null))],null,null)}function NM(e){return So(0,[(e()(),eo(0,0,null,null,8,"div",[["class","center"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),fo(2,null,[" Unlock with Heritage Points (","/",") "])),(e()(),eo(3,0,null,null,5,"div",[["class","buttons"]],null,null,null,null,null)),(e()(),eo(4,0,null,null,4,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.unlockWithHeritage()&&l),l},null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(6,278528,null,0,Js,[Xs],{ngClass:[0,"ngClass"]},null),ho(7,{disabled:0}),(e()(),fo(8,null,["unlock for "," HP"]))],function(e,n){var t=n.component,l=e(n,7,0,!t.hasHeritagePoints()||!t.meetsPrerequisites());e(n,6,0,l)},function(e,n){var t=n.component;e(n,2,0,t.getHeritagePoints(),t.getHeritageCap()),e(n,8,0,t.requiredHeritagePoints())})}function _M(e){return So(0,[(e()(),eo(0,0,null,null,6,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,IM)),vi(2,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,AM)),vi(4,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,NM)),vi(6,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.hasQueueSpace()),e(n,4,0,!t.hasQueueSpace()),e(n,6,0,t.isHeritageUnlocked())},null)}function wM(e){return So(0,[(e()(),eo(0,0,null,null,5,"app-modal",[["id","research-unlock-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==ii(e,1).onKeydownHandler(t)&&l),l},ww,_w)),vi(1,4440064,null,0,Nw,[St,dt,qf],{id:[0,"id"]},null),(e()(),eo(2,0,null,0,2,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,_M)),vi(4,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(5,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,1,0,"research-unlock-modal"),e(n,4,0,t.tech)},null)}var PM=function(){function e(e,n,t,l){var i=this;this.modalService=e,this.resourcesService=n,this.gameService=t,this.navyService=l,this.selectedShip=Lu.BOAT,this.troops=Lu,this.limitToBoat=!1,e.registerForShipyardLimitBoat().subscribe(function(e){i.limitToBoat=e,i.selectedShip=Lu.BOAT})}return e.prototype.ngOnInit=function(){},e.prototype.onKeydownHandler=function(e){"none"!==document.getElementById("shipyard-modal").style.display&&(e.preventDefault(),this.cancel())},e.prototype.build=function(){var e=this;if(this.hasResources()){if(!(this.resourcesService.getPeople()>=this.getShipStats().CREW))return void this.modalService.info("Not enough sailors!");this.resourcesService.removeRecruit(this.getShipStats().CREW),this.getCost().forEach(function(n){e.resourcesService.decreaseResource(n.resource,n.amount,"ship construction",!0)}),this.modalService.sendValueInput(this.selectedShip),this.modalService.close(ju.SHIPYARD)}else this.modalService.info("Not enough resources!")},e.prototype.cancel=function(){this.modalService.close(ju.SHIPYARD)},e.prototype.hasResources=function(){var e=this,n=!0;return this.getCost().forEach(function(t){n&&(n=e.hasResource(t.resource,t.amount))}),n},e.prototype.hasResource=function(e,n){return 0===this.resourcesService.hasResource(e,n,"ship construction",!0)},e.prototype.getCost=function(){return bs.getTroop(this.selectedShip).COST},e.prototype.getResourceName=function(e){return Vu.prepareResourceName(e)},e.prototype.getShipStats=function(){return bs.getTroop(this.selectedShip)},e.prototype.hasPort=function(){return this.navyService.getFreeHarbourSpace()>=this.getShipStats().SIZE},e.prototype.hasPeople=function(){return this.resourcesService.getPeople()>=this.getShipStats().CREW},e.prototype.isBrigantineUnlocked=function(){return this.gameService.isEnabled(_u.BRIGANTINE)},e.prototype.isGalleonUnlocked=function(){return this.gameService.isEnabled(_u.GALLEON)},e}(),xM=rl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;font-size:1.2em;max-width:750px;margin:100px auto auto}.lineBreak[_ngcontent-%COMP%]{display:block}#modes[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;margin-bottom:10px}.mode[_ngcontent-%COMP%]{display:-webkit-box;display:flex;cursor:pointer;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:150px;width:200px;border:1px solid #000;-webkit-box-align:center;align-items:center;margin-right:5px;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box}.mode[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100px}.mode[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700}.mode[_ngcontent-%COMP%]   .effect[_ngcontent-%COMP%]{font-size:.8em}#buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;margin-top:10px}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px;white-space:nowrap}.disabled[_ngcontent-%COMP%]{color:#5a5a5a}.selected[_ngcontent-%COMP%]{border:3px solid #000}.notMet[_ngcontent-%COMP%]{color:var(--negative-colour)}#costList[_ngcontent-%COMP%], #stats[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-pack:center;justify-content:center}.center[_ngcontent-%COMP%]{text-align:center}h5[_ngcontent-%COMP%]{margin-bottom:5px}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;margin-right:10px}"]],data:{}});function kM(e){return So(0,[(e()(),eo(0,0,null,null,6,"div",[["class","mode"]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==(i.selectedShip=i.troops.BRIGANTINE)&&l),l},null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(2,278528,null,0,Js,[Xs],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),ho(3,{selected:0}),(e()(),eo(4,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),fo(-1,null,["Brigantine"])),(e()(),eo(6,0,null,null,0,"img",[["src","assets/sea/brigantine.svg"]],null,null,null,null,null))],function(e,n){var t=n.component,l=e(n,3,0,t.selectedShip===t.troops.BRIGANTINE);e(n,2,0,"mode",l)},null)}function MM(e){return So(0,[(e()(),eo(0,0,null,null,6,"div",[["class","mode"]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==(i.selectedShip=i.troops.GALLEON)&&l),l},null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(2,278528,null,0,Js,[Xs],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),ho(3,{selected:0}),(e()(),eo(4,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),fo(-1,null,["Galleon"])),(e()(),eo(6,0,null,null,0,"img",[["src","assets/sea/galleon.svg"]],null,null,null,null,null))],function(e,n){var t=n.component,l=e(n,3,0,t.selectedShip===t.troops.GALLEON);e(n,2,0,"mode",l)},null)}function DM(e){return So(0,[(e()(),eo(0,0,null,null,7,"div",[],null,null,null,null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(2,278528,null,0,Js,[Xs],{ngClass:[0,"ngClass"]},null),ho(3,{notMet:0}),(e()(),eo(4,0,null,null,3,"span",[["class","icon"]],null,null,null,null,null)),(e()(),fo(5,null,[""," "])),(e()(),eo(6,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(7,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){var t=n.component,l=e(n,3,0,!t.hasResource(n.context.$implicit.resource,n.context.$implicit.amount));e(n,2,0,l),e(n,7,0,t.getResourceName(n.context.$implicit.resource),"resources")},function(e,n){e(n,5,0,n.context.$implicit.amount)})}function LM(e){return So(0,[(e()(),eo(0,0,null,null,42,"div",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"h5",[["class","center"]],null,null,null,null,null)),(e()(),fo(-1,null,["Cost"])),(e()(),eo(3,0,null,null,16,"div",[["id","costList"]],null,null,null,null,null)),(e()(),eo(4,0,null,null,6,"span",[["class","icon"]],null,null,null,null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(6,278528,null,0,Js,[Xs],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),ho(7,{notMet:0}),(e()(),fo(8,null,[""," "])),(e()(),eo(9,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(10,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),eo(11,0,null,null,6,"span",[["class","icon"]],null,null,null,null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(13,278528,null,0,Js,[Xs],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),ho(14,{notMet:0}),(e()(),fo(15,null,[""," "])),(e()(),eo(16,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(17,114688,null,0,xg,[],{name:[0,"name"],title:[1,"title"]},null),(e()(),Jr(16777216,null,null,1,null,DM)),vi(19,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),eo(20,0,null,null,1,"h5",[["class","center"]],null,null,null,null,null)),(e()(),fo(-1,null,["Stats"])),(e()(),eo(22,0,null,null,20,"div",[["id","stats"]],null,null,null,null,null)),(e()(),eo(23,0,null,null,3,"span",[["class","icon"]],null,null,null,null,null)),(e()(),fo(24,null,[""," "])),(e()(),eo(25,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(26,114688,null,0,xg,[],{name:[0,"name"]},null),(e()(),eo(27,0,null,null,3,"span",[["class","icon"]],null,null,null,null,null)),(e()(),fo(28,null,[""," "])),(e()(),eo(29,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(30,114688,null,0,xg,[],{name:[0,"name"]},null),(e()(),eo(31,0,null,null,3,"span",[["class","icon"]],null,null,null,null,null)),(e()(),fo(32,null,[""," "])),(e()(),eo(33,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(34,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),eo(35,0,null,null,3,"span",[["class","icon"]],null,null,null,null,null)),(e()(),fo(36,null,[""," "])),(e()(),eo(37,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(38,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),eo(39,0,null,null,3,"span",[["class","icon"]],null,null,null,null,null)),(e()(),fo(40,null,[""," "])),(e()(),eo(41,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(42,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){var t=n.component,l=e(n,7,0,!t.hasPort());e(n,6,0,"icon",l),e(n,10,0,"port","sea","port space");var i=e(n,14,0,!t.hasPeople());e(n,13,0,"icon",i),e(n,17,0,"hammer","sailors"),e(n,19,0,t.getCost()),e(n,26,0,"size"),e(n,30,0,"cargo"),e(n,34,0,"speed","army"),e(n,38,0,"attack","army"),e(n,42,0,"defense","army")},function(e,n){var t=n.component;e(n,8,0,t.getShipStats().SIZE),e(n,15,0,t.getShipStats().CREW),e(n,24,0,t.getShipStats().SIZE),e(n,28,0,t.getShipStats().CARGO),e(n,32,0,t.getShipStats().SPEED),e(n,36,0,t.getShipStats().STRENGTH),e(n,40,0,t.getShipStats().DEFENSE)})}function FM(e){return So(0,[(e()(),eo(0,0,null,null,29,"app-modal",[["id","shipyard-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==ii(e,1).onKeydownHandler(t)&&l),l},ww,_w)),vi(1,4440064,null,0,Nw,[St,dt,qf],{id:[0,"id"]},null),(e()(),eo(2,0,null,0,26,"div",[["class","modal"]],null,null,null,null,null)),(e()(),eo(3,0,null,null,25,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),eo(4,0,null,null,1,"h2",[],null,null,null,null,null)),(e()(),fo(-1,null,["Select ship to build"])),(e()(),eo(6,0,null,null,11,"div",[["id","modes"]],null,null,null,null,null)),(e()(),eo(7,0,null,null,6,"div",[["class","mode"]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==(i.selectedShip=i.troops.BOAT)&&l),l},null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(9,278528,null,0,Js,[Xs],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),ho(10,{selected:0}),(e()(),eo(11,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),fo(-1,null,["Boat"])),(e()(),eo(13,0,null,null,0,"img",[["src","assets/sea/boat.svg"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,kM)),vi(15,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,MM)),vi(17,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(18,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,LM)),vi(20,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(21,0,null,null,7,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),eo(22,0,null,null,4,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.build()&&l),l},null,null)),Ei(512,null,Xs,Zs,[Pt,xt,dt,St]),vi(24,278528,null,0,Js,[Xs],{ngClass:[0,"ngClass"]},null),ho(25,{disabled:0}),(e()(),fo(-1,null,["BUILD"])),(e()(),eo(27,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.cancel()&&l),l},null,null)),(e()(),fo(-1,null,["CANCEL"])),(e()(),eo(29,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,1,0,"shipyard-modal");var l=e(n,10,0,t.selectedShip===t.troops.BOAT);e(n,9,0,"mode",l),e(n,15,0,!t.limitToBoat&&t.isBrigantineUnlocked()),e(n,17,0,!t.limitToBoat&&t.isGalleonUnlocked()),e(n,20,0,t.selectedShip);var i=e(n,25,0,!t.hasPort()||!t.hasPeople()||!t.hasResources());e(n,24,0,i)},null)}var UM=function(){function e(e){var n=this;this.modalService=e,this.modalService.registerForText().subscribe(function(e){return n.text=e})}return e.prototype.ngOnInit=function(){},e.prototype.ok=function(){this.modalService.sendConfirmationResult(!0),this.modalService.close(ju.CONFIRM)},e.prototype.cancel=function(){this.modalService.sendConfirmationResult(!1),this.modalService.close(ju.CONFIRM)},e.prototype.onKeydownHandler=function(e){"none"!==document.getElementById("confirm-modal").style.display&&(e.preventDefault(),this.ok())},e}(),HM=rl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;max-width:750px;margin:200px auto auto}#buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px;padding:5px}"]],data:{}});function GM(e){return So(0,[(e()(),eo(0,0,null,null,11,"app-modal",[["id","confirm-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==ii(e,1).onKeydownHandler(t)&&l),l},ww,_w)),vi(1,4440064,null,0,Nw,[St,dt,qf],{id:[0,"id"]},null),(e()(),eo(2,0,null,0,8,"div",[["class","modal"]],null,null,null,null,null)),(e()(),eo(3,0,null,null,7,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),eo(4,0,null,null,0,"span",[["id","text"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),eo(5,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(6,0,null,null,4,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),eo(7,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.ok()&&l),l},null,null)),(e()(),fo(-1,null,["YES"])),(e()(),eo(9,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.cancel()&&l),l},null,null)),(e()(),fo(-1,null,["NO"])),(e()(),eo(11,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){e(n,1,0,"confirm-modal")},function(e,n){e(n,4,0,n.component.text)})}var BM=function(){function e(e){var n=this;this.modalService=e,this.text="",this.modalService.registerForText().subscribe(function(e){return n.text=e})}return e.prototype.ngOnInit=function(){},e.prototype.ok=function(){this.modalService.close(ju.INFO)},e.prototype.onKeydownHandler=function(e){"none"!==document.getElementById("info-modal").style.display&&(e.preventDefault(),this.ok())},e}(),VM=rl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;font-size:1.2em;max-width:750px;margin:200px auto auto}"]],data:{}});function WM(e){return So(0,[(e()(),eo(0,0,null,null,8,"app-modal",[["id","info-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var l=!0;return"document:keydown.escape"===n&&(l=!1!==ii(e,1).onKeydownHandler(t)&&l),l},ww,_w)),vi(1,4440064,null,0,Nw,[St,dt,qf],{id:[0,"id"]},null),(e()(),eo(2,0,null,0,5,"div",[["class","modal"]],null,null,null,null,null)),(e()(),eo(3,0,null,null,4,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),eo(4,0,null,null,0,"span",[["id","text"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),eo(5,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(6,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.ok()&&l),l},null,null)),(e()(),fo(-1,null,["OK"])),(e()(),eo(8,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){e(n,1,0,"info-modal")},function(e,n){e(n,4,0,n.component.text)})}var zM=function(){function e(){}return e.prototype.ngOnInit=function(){},e}(),YM=rl({encapsulation:0,styles:[[""]],data:{}});function KM(e){return So(0,[(e()(),eo(0,0,null,null,1,"app-build-modal",[],null,null,null,qw,Qw)),vi(1,114688,null,0,$w,[qf],null,null),(e()(),eo(2,0,null,null,1,"app-abdication-modal",[],null,null,null,GP,HP)),vi(3,114688,null,0,UP,[qf,FP,sC,Vf,Jf],null,null),(e()(),eo(4,0,null,null,1,"app-ascension-modal",[],null,[["document","keydown.enter"]],function(e,n,t){var l=!0;return"document:keydown.enter"===n&&(l=!1!==ii(e,5).onKeydownHandler(t)&&l),l},WP,VP)),vi(5,114688,null,0,BP,[qf],null,null),(e()(),eo(6,0,null,null,1,"app-fight-report-modal",[],null,null,null,nx,YP)),vi(7,114688,null,0,zP,[qf,PO],null,null),(e()(),eo(8,0,null,null,1,"app-export-modal",[],null,null,null,ox,lx)),vi(9,114688,null,0,tx,[FP,qf],null,null),(e()(),eo(10,0,null,null,1,"app-import-modal",[],null,null,null,ax,sx)),vi(11,114688,null,0,ux,[FP,qf],null,null),(e()(),eo(12,0,null,null,1,"app-hard-reset-modal",[],null,null,null,hx,px)),vi(13,114688,null,0,cx,[qf,FP],null,null),(e()(),eo(14,0,null,null,1,"app-options-modal",[],null,null,null,Ix,gx)),vi(15,114688,null,0,dx,[zf,Vf,qf],null,null),(e()(),eo(16,0,null,null,1,"app-royal-modal",[],null,null,null,_x,Nx)),vi(17,114688,null,0,Ax,[tm,nm,qf],null,null),(e()(),eo(18,0,null,null,1,"app-mission-modal",[],null,null,null,Sk,Px)),vi(19,114688,null,0,wx,[Vf,qf,$S,am,PO],null,null),(e()(),eo(20,0,null,null,1,"app-market-modal",[],null,[["document","keydown.enter"]],function(e,n,t){var l=!0;return"document:keydown.enter"===n&&(l=!1!==ii(e,21).onKeydownHandler(t)&&l),l},Ik,yk)),vi(21,114688,null,0,Ek,[qf,am],null,null),(e()(),eo(22,0,null,null,1,"app-work-management-modal",[],null,[["document","keydown.enter"]],function(e,n,t){var l=!0;return"document:keydown.enter"===n&&(l=!1!==ii(e,23).onKeydownHandler(t)&&l),l},zk,Nk)),vi(23,114688,null,0,Ak,[Vf,qf,am],null,null),(e()(),eo(24,0,null,null,1,"app-tutorial-modal",[],null,null,null,Xk,Kk)),vi(25,4308992,null,0,Yk,[qf,Xf,Zw,kt],null,null),(e()(),eo(26,0,null,null,1,"app-changelog-modal",[],null,[["document","keydown.enter"]],function(e,n,t){var l=!0;return"document:keydown.enter"===n&&(l=!1!==ii(e,27).onKeydownHandler(t)&&l),l},eM,Jk)),vi(27,114688,null,0,Zk,[qf],null,null),(e()(),eo(28,0,null,null,1,"app-resource-management-modal",[],null,[["document","keydown.enter"]],function(e,n,t){var l=!0;return"document:keydown.enter"===n&&(l=!1!==ii(e,29).onKeydownHandler(t)&&l),l},rM,tM)),vi(29,114688,null,0,nM,[qf],null,null),(e()(),eo(30,0,null,null,1,"app-recipe-modal",[],null,[["document","keydown.enter"]],function(e,n,t){var l=!0;return"document:keydown.enter"===n&&(l=!1!==ii(e,31).onKeydownHandler(t)&&l),l},aM,uM)),vi(31,114688,null,0,oM,[qf,Cm],null,null),(e()(),eo(32,0,null,null,1,"app-world-modal",[],null,null,null,hM,pM)),vi(33,114688,null,0,cM,[qf,PO],null,null),(e()(),eo(34,0,null,null,1,"app-world-build-modal",[],null,null,null,yM,gM)),vi(35,114688,null,0,dM,[qf,am,PO],null,null),(e()(),eo(36,0,null,null,1,"app-input-modal",[],null,[["document","keydown.enter"]],function(e,n,t){var l=!0;return"document:keydown.enter"===n&&(l=!1!==ii(e,37).onKeydownHandler(t)&&l),l},OM,bM)),vi(37,114688,null,0,RM,[qf],null,null),(e()(),eo(38,0,null,null,1,"app-research-unlock-modal",[],null,[["document","keydown.enter"]],function(e,n,t){var l=!0;return"document:keydown.enter"===n&&(l=!1!==ii(e,39).onKeydownHandler(t)&&l),l},wM,CM)),vi(39,114688,null,0,TM,[qf,sC,Jf,jy],null,null),(e()(),eo(40,0,null,null,1,"app-shipyard-modal",[],null,[["document","keydown.enter"]],function(e,n,t){var l=!0;return"document:keydown.enter"===n&&(l=!1!==ii(e,41).onKeydownHandler(t)&&l),l},FM,xM)),vi(41,114688,null,0,PM,[qf,am,Jf,_O],null,null),(e()(),eo(42,0,null,null,1,"app-confirm-modal",[],null,[["document","keydown.enter"]],function(e,n,t){var l=!0;return"document:keydown.enter"===n&&(l=!1!==ii(e,43).onKeydownHandler(t)&&l),l},GM,HM)),vi(43,114688,null,0,UM,[qf],null,null),(e()(),eo(44,0,null,null,1,"app-info-modal",[],null,[["document","keydown.enter"]],function(e,n,t){var l=!0;return"document:keydown.enter"===n&&(l=!1!==ii(e,45).onKeydownHandler(t)&&l),l},WM,VM)),vi(45,114688,null,0,BM,[qf],null,null)],function(e,n){e(n,1,0),e(n,3,0),e(n,5,0),e(n,7,0),e(n,9,0),e(n,11,0),e(n,13,0),e(n,15,0),e(n,17,0),e(n,19,0),e(n,21,0),e(n,23,0),e(n,25,0),e(n,27,0),e(n,29,0),e(n,31,0),e(n,33,0),e(n,35,0),e(n,37,0),e(n,39,0),e(n,41,0),e(n,43,0),e(n,45,0)},null)}var jM=function(){function e(e){this.calendarService=e}return e.prototype.ngOnInit=function(){},e.prototype.getDay=function(){return this.calendarService.getDay()},e.prototype.getYear=function(){return this.calendarService.getYear()},e.prototype.getSeason=function(){return Yf[this.calendarService.getSeason()].toLowerCase()},e}(),$M=rl({encapsulation:0,styles:[[""]],data:{}});function QM(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),fo(1,null,[" day: "," year: "," ","\n"]))],null,function(e,n){var t=n.component;e(n,1,0,t.getDay(),t.getYear(),t.getSeason())})}var qM=function(){function e(e,n,t,l,i,r,o,u,s,a,c,p,h){var d=this;this.serializerService=e,this.servicesService=n,this.logService=t,this.modalService=l,this.resourcesService=i,this.weatherService=r,this.optionsService=o,this.gameService=u,this.tickerService=s,this.tutorialService=a,this.techService=c,this.religionService=p,this.managementService=h,this.metric=this.optionsService.getOption(Wf.METRIC),this.optionsSubscription||(this.optionsSubscription=this.optionsService.registerForOptionsChange().subscribe(function(){return d.metric=d.optionsService.getOption(Wf.METRIC)}))}return e.prototype.ngOnInit=function(){var e=this;this.resources=this.resourcesService.getResources(),this.resourcesService.registerForResourcesChange().subscribe(function(n){e.resources=n})},e.prototype.getResourcesValues=function(){return Array.from(this.resources.values())},e.prototype.save=function(){this.serializerService.initSave(),this.logService.log("saved")},e.prototype.load=function(){this.serializerService.initLoad()},e.prototype.import=function(){this.modalService.open(ju.IMPORT)},e.prototype.export=function(){this.modalService.open(ju.EXPORT)},e.prototype.hardReset=function(){this.modalService.open(ju.HARD_RESET)},e.prototype.options=function(){this.modalService.open(ju.OPTIONS)},e.prototype.getTemperature=function(){return this.weatherService.getCurrentTemperature()},e.prototype.getWeather=function(){return this.weatherService.getCurrentWeather()},e.prototype.getWeatherName=function(){return Xu[this.getWeather()].toLowerCase()},e.prototype.calendarEnabled=function(){return this.gameService.isEnabled(_u.CALENDAR)},e.prototype.softReset=function(){this.modalService.open(ju.ABDICATION)},e.prototype.isNotCoins=function(e){return e.resource!==Iu.COINS},e.prototype.resetTutorials=function(){this.tutorialService.resetTutorials()},e.prototype.pause=function(){this.tickerService.pause()},e.prototype.resume=function(){this.tickerService.resume()},e.prototype.isPaused=function(){return this.tickerService.isPaused()},e.prototype.getResourceDescription=function(e){var n="";return e.hasResourceType(Mu.CONSUMABLE)&&(n+="nutrition: "+Rs.getResource(e.resource).POWER),e.hasResourceType(Mu.FUEL)&&(n+="heating energy: "+Rs.getResource(e.resource).POWER),""!==n?"<hr>"+n:n},e.prototype.getResourceConsumers=function(e){var n="",t="<b>used by:</b><br>",l=this.resourcesService.getResourceUses(e.resource),i=[];l&&(l.slice().forEach(function(e){var n=i.find(function(n){return n[0]===e.userName});n?n[1]+=e.value:i.push([e.userName,e.value])}),i.sort(function(e,n){return e[0].localeCompare(n[0])}).forEach(function(e){t+=e[0]+": "+e[1]+"<br>"})),"<b>used by:</b><br>"!==t&&(n+="<hr>"+t),t="<b>produced by:</b><br>";var r=this.resourcesService.getResourceProductions(e.resource),o=[];return r&&(r.slice().forEach(function(e){var n=o.find(function(n){return n[0]===e.producerName});n?n[1]+=e.value:o.push([e.producerName,e.value])}),o.sort(function(e,n){return e[0].localeCompare(n[0])}).forEach(function(e){t+=e[0]+": "+e[1]+"<br>"})),"<b>produced by:</b><br>"!==t&&(n+="<hr>"+t),n},e.prototype.showCurrentTutorial=function(){this.tutorialService.showCurrentViewTutorial()},e.prototype.getFoodValue=function(){return this.resourcesService.getFoodValue("Village")},e.prototype.isFoodNutritionEnabled=function(){return this.managementService.getFoodNutrition()},e.prototype.getConsumableResources=function(){return this.resourcesService.getResourcesByType(Mu.CONSUMABLE).filter(function(e){return e.isVisible()})},e.prototype.getDailyNutritionUsage=function(){return 5*(this.resourcesService.getTotalPeople()-1)*this.managementService.getRations()},e.prototype.getAverageDailyNutritionProduction=function(){return this.resourcesService.getAverageNutritionProduction()},e.prototype.getRations=function(){return.5*this.managementService.getRations()},e.prototype.isHeaderTwoLines=function(){return this.managementService.getSecondHeaderRow()},e.prototype.showFreeWorkers=function(){return this.managementService.getShowFreeWorkers()},e.prototype.getFreeWorkers=function(){return this.resourcesService.getPeople()},e.prototype.showPopulation=function(){return this.managementService.getShowPopulation()},e.prototype.getPopulation=function(){return this.resourcesService.getTotalPeople()+"/"+this.resourcesService.getPopulationCap()},e.prototype.isManagementResearched=function(){return this.gameService.isEnabled(_u.MANAGEMENT)},e.prototype.showResearchProgress=function(){return this.managementService.getShowResearchProgress()},e.prototype.getResearchProgress=function(){var e=this.techService.getCurrentResearch();return e?Vu.prepareTechName(e.getTech())+": "+e.getResearchPoints()+"/"+e.getRequiredResearchPoints():"no research"},e.prototype.showFaith=function(){return this.managementService.getShowFaith()},e.prototype.getFaith=function(){return this.religionService.getFaith()+"/"+this.religionService.getFaithCap()},e.prototype.isFaithUnlocked=function(){return this.gameService.isEnabled(_u.RELIGION)},e.prototype.isRawEnabled=function(){return this.managementService.getShowRaw()},e.prototype.geRawResources=function(){return this.resourcesService.getResourcesByType(Mu.RAW).filter(function(e){return e.isVisible()})},e.prototype.isProcessedEnabled=function(){return this.managementService.getShowProcessed()},e.prototype.geProcessedResources=function(){return this.resourcesService.getResourcesByType(Mu.PROCESSED).filter(function(e){return e.isVisible()})},e.prototype.isFoodEnabled=function(){return this.managementService.getShowFood()},e.prototype.geFoodResources=function(){return this.resourcesService.getResourcesByType(Mu.FOOD).filter(function(e){return e.isVisible()})},e.prototype.isToolsEnabled=function(){return this.managementService.getShowTools()},e.prototype.geToolsResources=function(){return this.resourcesService.getResourcesByType(Mu.TOOLS).filter(function(e){return e.isVisible()})},e}(),XM=rl({encapsulation:0,styles:[["#wrapperTwoLines[_ngcontent-%COMP%]{font-size:1em;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:100%;-webkit-box-align:center;align-items:center}#wrapperOneLine[_ngcontent-%COMP%]{font-size:1em;display:-webkit-box;display:flex;height:100%;-webkit-box-align:center;align-items:center}.line[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;height:50%;width:100%}button[_ngcontent-%COMP%]{width:100%;margin:0;padding:0}.highlighted[_ngcontent-%COMP%], app-calendar[_ngcontent-%COMP%]{display:inline-block}#cog[_ngcontent-%COMP%]{float:right;margin-top:-2px;height:30px;width:30px}#cog[_ngcontent-%COMP%]:hover{cursor:pointer}.dropdown[_ngcontent-%COMP%]{position:absolute;right:4px;display:inline-block}.dropdown-content[_ngcontent-%COMP%]{cursor:pointer;display:none;position:absolute;list-style:none;background-color:#f9f9f9;min-width:150px;right:0;font-size:1.2em;margin-top:25px;padding:0;border:1px solid #000;z-index:1000}.dropdown-content[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:pointer}.dropdown[_ngcontent-%COMP%]:hover   .dropdown-content[_ngcontent-%COMP%]{display:block}.dropdown-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background-color:var(--passive-colour);border:1px solid #000;padding:3px}.dropdown-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:var(--active-colour)}#temp[_ngcontent-%COMP%]{padding-top:2px;padding-left:5px}.full[_ngcontent-%COMP%]{font-weight:600}app-calendar[_ngcontent-%COMP%]{display:inline-block;font-size:1.1em}#right[_ngcontent-%COMP%]{position:absolute;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;font-size:1.1em;margin-top:2px;right:40px}app-icon[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 auto;margin-right:3px}#weather[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 auto}.icon[_ngcontent-%COMP%]{font-size:1.1em;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center}hr[_ngcontent-%COMP%]{border-color:#000}.center[_ngcontent-%COMP%]{text-align:center}"]],data:{}});function ZM(e){return So(0,[(e()(),eo(0,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(2,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),fo(3,null,["","/"," "]))],function(e,n){var t=n.context.$implicit.getName();e(n,2,0,t,"resources")},function(e,n){e(n,3,0,n.context.$implicit.amount,n.context.$implicit.limit)})}function JM(e){return So(0,[(e()(),eo(0,0,null,null,18,"div",[["appTooltip",""],["class","highlighted icon tooltip"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==ii(e,1).onmousemove(t)&&l),l},null,null)),vi(1,16384,null,0,Pg,[],{elementId:[0,"elementId"]},null),(e()(),eo(2,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(3,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),fo(4,null,["\xa0"," "])),(e()(),eo(5,0,null,null,13,"span",[["id","nutTolltip"]],null,null,null,null,null)),(e()(),fo(-1,null,[" Total food nutrition"])),(e()(),eo(7,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(8,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),fo(9,null,[" Rations: ",""])),(e()(),eo(10,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),fo(11,null,[" Daily consumption: ",""])),(e()(),eo(12,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),fo(13,null,[" Average daily production: ",""])),po(14,2),(e()(),eo(15,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(16,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,ZM)),vi(18,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,1,0,"nutTolltip"),e(n,3,0,"food","resources",""),e(n,18,0,t.getConsumableResources())},function(e,n){var t=n.component;e(n,4,0,t.getFoodValue()),e(n,9,0,t.getRations()),e(n,11,0,t.getDailyNutritionUsage());var l=tl(n,13,0,e(n,14,0,ii(n.parent.parent,0),t.getAverageDailyNutritionProduction(),"0.0-0"));e(n,13,0,l)})}function eD(e){return So(0,[(e()(),eo(0,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(2,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),fo(3,null,["","/"," "]))],function(e,n){var t=n.context.$implicit.getName();e(n,2,0,t,"resources")},function(e,n){e(n,3,0,n.context.$implicit.amount,n.context.$implicit.limit)})}function nD(e){return So(0,[(e()(),eo(0,0,null,null,5,"div",[["appTooltip",""],["class","highlighted icon tooltip"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==ii(e,1).onmousemove(t)&&l),l},null,null)),vi(1,16384,null,0,Pg,[],{elementId:[0,"elementId"]},null),(e()(),fo(-1,null,[" \xa0RAW "])),(e()(),eo(3,0,null,null,2,"span",[["id","rawTolltip"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,eD)),vi(5,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,1,0,"rawTolltip"),e(n,5,0,t.geRawResources())},null)}function tD(e){return So(0,[(e()(),eo(0,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(2,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),fo(3,null,["","/"," "]))],function(e,n){var t=n.parent.context.$implicit.getName();e(n,2,0,t,"resources")},function(e,n){e(n,3,0,n.parent.context.$implicit.amount,n.parent.context.$implicit.limit)})}function lD(e){return So(0,[(e()(),eo(0,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(2,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),fo(3,null,[""," "]))],function(e,n){var t=n.parent.context.$implicit.getName();e(n,2,0,t,"resources")},function(e,n){e(n,3,0,n.parent.context.$implicit.amount)})}function iD(e){return So(0,[(e()(),eo(0,0,null,null,4,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,tD)),vi(2,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,lD)),vi(4,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.isNotCoins(n.context.$implicit)),e(n,4,0,!t.isNotCoins(n.context.$implicit))},null)}function rD(e){return So(0,[(e()(),eo(0,0,null,null,5,"div",[["appTooltip",""],["class","highlighted icon tooltip"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==ii(e,1).onmousemove(t)&&l),l},null,null)),vi(1,16384,null,0,Pg,[],{elementId:[0,"elementId"]},null),(e()(),fo(-1,null,[" \xa0PROCESSED "])),(e()(),eo(3,0,null,null,2,"span",[["id","processedTolltip"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,iD)),vi(5,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,1,0,"processedTolltip"),e(n,5,0,t.geProcessedResources())},null)}function oD(e){return So(0,[(e()(),eo(0,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(2,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),fo(3,null,["","/"," "]))],function(e,n){var t=n.context.$implicit.getName();e(n,2,0,t,"resources")},function(e,n){e(n,3,0,n.context.$implicit.amount,n.context.$implicit.limit)})}function uD(e){return So(0,[(e()(),eo(0,0,null,null,5,"div",[["appTooltip",""],["class","highlighted icon tooltip"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==ii(e,1).onmousemove(t)&&l),l},null,null)),vi(1,16384,null,0,Pg,[],{elementId:[0,"elementId"]},null),(e()(),fo(-1,null,[" \xa0FOOD "])),(e()(),eo(3,0,null,null,2,"span",[["id","foodTolltip"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,oD)),vi(5,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,1,0,"foodTolltip"),e(n,5,0,t.geFoodResources())},null)}function sD(e){return So(0,[(e()(),eo(0,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(2,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),fo(3,null,["","/"," "]))],function(e,n){var t=n.context.$implicit.getName();e(n,2,0,t,"resources")},function(e,n){e(n,3,0,n.context.$implicit.amount,n.context.$implicit.limit)})}function aD(e){return So(0,[(e()(),eo(0,0,null,null,5,"div",[["appTooltip",""],["class","highlighted icon tooltip"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==ii(e,1).onmousemove(t)&&l),l},null,null)),vi(1,16384,null,0,Pg,[],{elementId:[0,"elementId"]},null),(e()(),fo(-1,null,[" \xa0TOOLS "])),(e()(),eo(3,0,null,null,2,"span",[["id","toolsTolltip"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,sD)),vi(5,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,1,0,"toolsTolltip"),e(n,5,0,t.geToolsResources())},null)}function cD(e){return So(0,[(e()(),eo(0,0,null,null,6,"div",[["appTooltip",""],["class","highlighted icon tooltip"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==ii(e,1).onmousemove(t)&&l),l},null,null)),vi(1,16384,null,0,Pg,[],{elementId:[0,"elementId"]},null),(e()(),eo(2,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(3,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),fo(4,null,["\xa0"," "])),(e()(),eo(5,0,null,null,1,"span",[["id","nutTolltip"]],null,null,null,null,null)),(e()(),fo(-1,null,[" Total food nutrition "]))],function(e,n){e(n,1,0,"nutTolltip"),e(n,3,0,"food","resources","")},function(e,n){e(n,4,0,n.component.getFoodValue())})}function pD(e){return So(0,[(e()(),eo(0,0,null,null,3,"div",[["class","highlighted icon"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(2,114688,null,0,xg,[],{name:[0,"name"]},null),(e()(),fo(3,null,[" "," "]))],function(e,n){e(n,2,0,"population")},function(e,n){e(n,3,0,n.component.getPopulation())})}function hD(e){return So(0,[(e()(),eo(0,0,null,null,3,"div",[["class","highlighted icon"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(2,114688,null,0,xg,[],{name:[0,"name"],title:[1,"title"]},null),(e()(),fo(3,null,[" "," "]))],function(e,n){e(n,2,0,"hammer","Workers")},function(e,n){e(n,3,0,n.component.getFreeWorkers())})}function dD(e){return So(0,[(e()(),eo(0,0,null,null,3,"div",[["class","highlighted icon"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(2,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),fo(3,null,[" "," \xa0 "]))],function(e,n){e(n,2,0,"faith","religion","Faith")},function(e,n){e(n,3,0,n.component.getFaith())})}function gD(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[["class","highlighted icon"]],null,null,null,null,null)),(e()(),fo(1,null,[" "," "]))],null,function(e,n){e(n,1,0,n.component.getResearchProgress())})}function fD(e){return So(0,[(e()(),eo(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),fo(1,null,["","/",""]))],null,function(e,n){var t=n.parent.parent.context.$implicit.getAmount(),l=n.parent.parent.context.$implicit.getLimit();e(n,1,0,t,l)})}function mD(e){return So(0,[(e()(),eo(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),fo(1,null,["","/",""]))],null,function(e,n){var t=n.parent.parent.context.$implicit.getAmount(),l=n.parent.parent.context.$implicit.getLimit();e(n,1,0,t,l)})}function vD(e){return So(0,[(e()(),eo(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),fo(1,null,["",""]))],null,function(e,n){var t=n.parent.parent.context.$implicit.getAmount();e(n,1,0,t)})}function SD(e){return So(0,[(e()(),eo(0,0,null,null,16,"span",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,15,"span",[["appTooltip",""],["class","icon tooltip"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==ii(e,2).onmousemove(t)&&l),l},null,null)),vi(2,16384,null,0,Pg,[],{elementId:[0,"elementId"]},null),(e()(),eo(3,0,null,null,4,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),eo(4,0,null,null,1,"div",[["class","center"]],null,null,null,null,null)),(e()(),fo(5,null,["",""])),(e()(),eo(6,0,null,null,0,"div",[["class","center"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),eo(7,0,null,null,0,"div",[["class","center"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),eo(8,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(9,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),Jr(16777216,null,null,1,null,fD)),vi(11,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,mD)),vi(13,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,vD)),vi(15,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),fo(-1,null,[" \xa0"]))],function(e,n){var t=n.component;e(n,2,0,1e5*n.parent.context.$implicit.resource);var l=n.parent.context.$implicit.getName();e(n,9,0,l,"resources","");var i=n.parent.context.$implicit.getAmount()===n.parent.context.$implicit.getLimit();e(n,11,0,i);var r=t.isNotCoins(n.parent.context.$implicit)&&n.parent.context.$implicit.getAmount()!==n.parent.context.$implicit.getLimit();e(n,13,0,r),e(n,15,0,!t.isNotCoins(n.parent.context.$implicit))},function(e,n){var t=n.component;e(n,3,0,xl(1,"",1e5*n.parent.context.$implicit.resource,"")),e(n,5,0,n.parent.context.$implicit.name),e(n,6,0,t.getResourceDescription(n.parent.context.$implicit)),e(n,7,0,t.getResourceConsumers(n.parent.context.$implicit))})}function ED(e){return So(0,[(e()(),eo(0,0,null,null,2,"div",[["class","highlighted"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,SD)),vi(2,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,2,0,n.context.$implicit.visible&&n.context.$implicit.highlighted)},null)}function yD(e){return So(0,[(e()(),eo(0,0,null,null,1,"app-calendar",[],null,null,null,QM,$M)),vi(1,114688,null,0,jM,[jf],null,null)],function(e,n){e(n,1,0)},null)}function RD(e){return So(0,[(e()(),eo(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),fo(-1,null,["\xb0C"]))],null,null)}function bD(e){return So(0,[(e()(),eo(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),fo(-1,null,["\xb0F"]))],null,null)}function OD(e){return So(0,[(e()(),eo(0,0,null,null,0,"img",[["alt","settings"],["draggable","false"],["id","cog"],["src","assets/settings.svg"]],null,null,null,null,null))],null,null)}function TD(e){return So(0,[(e()(),eo(0,0,null,null,0,"img",[["alt","settings"],["draggable","false"],["id","cog"],["src","assets/pause.svg"]],null,null,null,null,null))],null,null)}function CD(e){return So(0,[(e()(),eo(0,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.pause()&&l),l},null,null)),(e()(),fo(-1,null,["pause game"]))],null,null)}function ID(e){return So(0,[(e()(),eo(0,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.resume()&&l),l},null,null)),(e()(),fo(-1,null,["resume game"]))],null,null)}function AD(e){return So(0,[(e()(),eo(0,0,null,null,68,"div",[["id","wrapperOneLine"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,JM)),vi(2,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,nD)),vi(4,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,rD)),vi(6,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,uD)),vi(8,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,aD)),vi(10,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,cD)),vi(12,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,pD)),vi(14,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),fo(-1,null,[" \xa0 "])),(e()(),Jr(16777216,null,null,1,null,hD)),vi(17,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),fo(-1,null,[" \xa0 "])),(e()(),Jr(16777216,null,null,1,null,dD)),vi(20,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,gD)),vi(22,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),fo(-1,null,[" \xa0 "])),(e()(),Jr(16777216,null,null,1,null,ED)),vi(25,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null),(e()(),fo(-1,null,[" \xa0 "])),(e()(),eo(27,0,null,null,13,"div",[["id","right"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,yD)),vi(29,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(30,0,null,null,10,"span",[["class","icon"],["id","weather"]],null,null,null,null,null)),(e()(),fo(-1,null,[" \xa0 "])),(e()(),eo(32,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(33,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),eo(34,0,null,null,6,null,null,null,null,null,null,null)),(e()(),fo(35,null,[""," "])),po(36,2),(e()(),Jr(16777216,null,null,1,null,RD)),vi(38,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,bD)),vi(40,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(41,0,null,null,27,"div",[["class","dropdown"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,OD)),vi(43,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,TD)),vi(45,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(46,0,null,null,22,"ul",[["class","dropdown-content"]],null,null,null,null,null)),(e()(),eo(47,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.options()&&l),l},null,null)),(e()(),fo(-1,null,["options"])),(e()(),eo(49,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.save()&&l),l},null,null)),(e()(),fo(-1,null,["save"])),(e()(),eo(51,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.load()&&l),l},null,null)),(e()(),fo(-1,null,["load"])),(e()(),eo(53,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.import()&&l),l},null,null)),(e()(),fo(-1,null,["import"])),(e()(),eo(55,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.export()&&l),l},null,null)),(e()(),fo(-1,null,["export"])),(e()(),Jr(16777216,null,null,1,null,CD)),vi(58,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,ID)),vi(60,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(61,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.showCurrentTutorial()&&l),l},null,null)),(e()(),fo(-1,null,["show current tab tutorial"])),(e()(),eo(63,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.resetTutorials()&&l),l},null,null)),(e()(),fo(-1,null,["reset tutorials"])),(e()(),eo(65,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.softReset()&&l),l},null,null)),(e()(),fo(-1,null,["abdicate"])),(e()(),eo(67,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.hardReset()&&l),l},null,null)),(e()(),fo(-1,null,["hard reset"]))],function(e,n){var t=n.component;e(n,2,0,t.isFoodNutritionEnabled()&&t.isManagementResearched()),e(n,4,0,t.isRawEnabled()&&t.isManagementResearched()),e(n,6,0,t.isProcessedEnabled()&&t.isManagementResearched()),e(n,8,0,t.isFoodEnabled()&&t.isManagementResearched()),e(n,10,0,t.isToolsEnabled()&&t.isManagementResearched()),e(n,12,0,t.isFoodNutritionEnabled()&&!t.isManagementResearched()),e(n,14,0,t.showPopulation()),e(n,17,0,t.showFreeWorkers()),e(n,20,0,t.showFaith()&&t.isFaithUnlocked()),e(n,22,0,t.showResearchProgress()),e(n,25,0,t.getResourcesValues()),e(n,29,0,t.calendarEnabled()),e(n,33,0,t.getWeatherName(),"weather"),e(n,38,0,t.metric),e(n,40,0,!t.metric),e(n,43,0,!t.isPaused()),e(n,45,0,t.isPaused()),e(n,58,0,!t.isPaused()),e(n,60,0,t.isPaused())},function(e,n){var t=n.component,l=tl(n,35,0,e(n,36,0,ii(n.parent,0),t.getTemperature(),"0.0-1"));e(n,35,0,l)})}function ND(e){return So(0,[(e()(),eo(0,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(2,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),fo(3,null,["","/"," "]))],function(e,n){var t=n.context.$implicit.getName();e(n,2,0,t,"resources")},function(e,n){e(n,3,0,n.context.$implicit.amount,n.context.$implicit.limit)})}function _D(e){return So(0,[(e()(),eo(0,0,null,null,18,"div",[["appTooltip",""],["class","highlighted icon tooltip"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==ii(e,1).onmousemove(t)&&l),l},null,null)),vi(1,16384,null,0,Pg,[],{elementId:[0,"elementId"]},null),(e()(),eo(2,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(3,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),fo(4,null,["\xa0"," "])),(e()(),eo(5,0,null,null,13,"span",[["id","nutTolltip"]],null,null,null,null,null)),(e()(),fo(-1,null,[" Nutrition"])),(e()(),eo(7,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(8,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),fo(9,null,[" Rations: ",""])),(e()(),eo(10,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),fo(11,null,[" Daily consumption: ",""])),(e()(),eo(12,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),fo(13,null,[" Average daily production: ",""])),po(14,2),(e()(),eo(15,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),eo(16,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,ND)),vi(18,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,1,0,"nutTolltip"),e(n,3,0,"food","resources",""),e(n,18,0,t.getConsumableResources())},function(e,n){var t=n.component;e(n,4,0,t.getFoodValue()),e(n,9,0,t.getRations()),e(n,11,0,t.getDailyNutritionUsage());var l=tl(n,13,0,e(n,14,0,ii(n.parent.parent,0),t.getAverageDailyNutritionProduction(),"0.0-0"));e(n,13,0,l)})}function wD(e){return So(0,[(e()(),eo(0,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(2,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),fo(3,null,["","/"," "]))],function(e,n){var t=n.context.$implicit.getName();e(n,2,0,t,"resources")},function(e,n){e(n,3,0,n.context.$implicit.amount,n.context.$implicit.limit)})}function PD(e){return So(0,[(e()(),eo(0,0,null,null,5,"div",[["appTooltip",""],["class","highlighted icon tooltip"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==ii(e,1).onmousemove(t)&&l),l},null,null)),vi(1,16384,null,0,Pg,[],{elementId:[0,"elementId"]},null),(e()(),fo(-1,null,[" \xa0RAW "])),(e()(),eo(3,0,null,null,2,"span",[["id","rawTolltip"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,wD)),vi(5,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,1,0,"rawTolltip"),e(n,5,0,t.geRawResources())},null)}function xD(e){return So(0,[(e()(),eo(0,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(2,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),fo(3,null,["","/"," "]))],function(e,n){var t=n.parent.context.$implicit.getName();e(n,2,0,t,"resources")},function(e,n){e(n,3,0,n.parent.context.$implicit.amount,n.parent.context.$implicit.limit)})}function kD(e){return So(0,[(e()(),eo(0,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(2,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),fo(3,null,[""," "]))],function(e,n){var t=n.parent.context.$implicit.getName();e(n,2,0,t,"resources")},function(e,n){e(n,3,0,n.parent.context.$implicit.amount)})}function MD(e){return So(0,[(e()(),eo(0,0,null,null,4,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,xD)),vi(2,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,kD)),vi(4,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.isNotCoins(n.context.$implicit)),e(n,4,0,!t.isNotCoins(n.context.$implicit))},null)}function DD(e){return So(0,[(e()(),eo(0,0,null,null,5,"div",[["appTooltip",""],["class","highlighted icon tooltip"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==ii(e,1).onmousemove(t)&&l),l},null,null)),vi(1,16384,null,0,Pg,[],{elementId:[0,"elementId"]},null),(e()(),fo(-1,null,[" \xa0PROCESSED "])),(e()(),eo(3,0,null,null,2,"span",[["id","processedTolltip"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,MD)),vi(5,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,1,0,"processedTolltip"),e(n,5,0,t.geProcessedResources())},null)}function LD(e){return So(0,[(e()(),eo(0,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(2,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),fo(3,null,["","/"," "]))],function(e,n){var t=n.context.$implicit.getName();e(n,2,0,t,"resources")},function(e,n){e(n,3,0,n.context.$implicit.amount,n.context.$implicit.limit)})}function FD(e){return So(0,[(e()(),eo(0,0,null,null,5,"div",[["appTooltip",""],["class","highlighted icon tooltip"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==ii(e,1).onmousemove(t)&&l),l},null,null)),vi(1,16384,null,0,Pg,[],{elementId:[0,"elementId"]},null),(e()(),fo(-1,null,[" \xa0FOOD "])),(e()(),eo(3,0,null,null,2,"span",[["id","foodTolltip"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,LD)),vi(5,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,1,0,"foodTolltip"),e(n,5,0,t.geFoodResources())},null)}function UD(e){return So(0,[(e()(),eo(0,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(2,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),fo(3,null,["","/"," "]))],function(e,n){var t=n.context.$implicit.getName();e(n,2,0,t,"resources")},function(e,n){e(n,3,0,n.context.$implicit.amount,n.context.$implicit.limit)})}function HD(e){return So(0,[(e()(),eo(0,0,null,null,5,"div",[["appTooltip",""],["class","highlighted icon tooltip"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==ii(e,1).onmousemove(t)&&l),l},null,null)),vi(1,16384,null,0,Pg,[],{elementId:[0,"elementId"]},null),(e()(),fo(-1,null,[" \xa0TOOLS "])),(e()(),eo(3,0,null,null,2,"span",[["id","toolsTolltip"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,UD)),vi(5,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,1,0,"toolsTolltip"),e(n,5,0,t.geToolsResources())},null)}function GD(e){return So(0,[(e()(),eo(0,0,null,null,6,"div",[["appTooltip",""],["class","highlighted icon tooltip"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==ii(e,1).onmousemove(t)&&l),l},null,null)),vi(1,16384,null,0,Pg,[],{elementId:[0,"elementId"]},null),(e()(),eo(2,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(3,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),fo(4,null,["\xa0"," "])),(e()(),eo(5,0,null,null,1,"span",[["id","nutTolltip"]],null,null,null,null,null)),(e()(),fo(-1,null,[" Total food nutrition "]))],function(e,n){e(n,1,0,"nutTolltip"),e(n,3,0,"food","resources","")},function(e,n){e(n,4,0,n.component.getFoodValue())})}function BD(e){return So(0,[(e()(),eo(0,0,null,null,3,"div",[["class","highlighted icon"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(2,114688,null,0,xg,[],{name:[0,"name"]},null),(e()(),fo(3,null,[" "," "]))],function(e,n){e(n,2,0,"population")},function(e,n){e(n,3,0,n.component.getPopulation())})}function VD(e){return So(0,[(e()(),eo(0,0,null,null,3,"div",[["class","highlighted icon"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(2,114688,null,0,xg,[],{name:[0,"name"],title:[1,"title"]},null),(e()(),fo(3,null,[" "," "]))],function(e,n){e(n,2,0,"hammer","Workers")},function(e,n){e(n,3,0,n.component.getFreeWorkers())})}function WD(e){return So(0,[(e()(),eo(0,0,null,null,3,"div",[["class","highlighted icon"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(2,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),fo(3,null,[" "," \xa0 "]))],function(e,n){e(n,2,0,"faith","religion","Faith")},function(e,n){e(n,3,0,n.component.getFaith())})}function zD(e){return So(0,[(e()(),eo(0,0,null,null,1,"div",[["class","highlighted icon"]],null,null,null,null,null)),(e()(),fo(1,null,[" "," "]))],null,function(e,n){e(n,1,0,n.component.getResearchProgress())})}function YD(e){return So(0,[(e()(),eo(0,0,null,null,1,"app-calendar",[],null,null,null,QM,$M)),vi(1,114688,null,0,jM,[jf],null,null)],function(e,n){e(n,1,0)},null)}function KD(e){return So(0,[(e()(),eo(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),fo(-1,null,["\xb0C"]))],null,null)}function jD(e){return So(0,[(e()(),eo(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),fo(-1,null,["\xb0F"]))],null,null)}function $D(e){return So(0,[(e()(),eo(0,0,null,null,0,"img",[["alt","settings"],["draggable","false"],["id","cog"],["ondragstart","return false;"],["src","assets/settings.svg"]],null,null,null,null,null))],null,null)}function QD(e){return So(0,[(e()(),eo(0,0,null,null,0,"img",[["alt","settings"],["draggable","false"],["id","cog"],["ondragstart","return false;"],["src","assets/pause.svg"]],null,null,null,null,null))],null,null)}function qD(e){return So(0,[(e()(),eo(0,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.pause()&&l),l},null,null)),(e()(),fo(-1,null,["pause game"]))],null,null)}function XD(e){return So(0,[(e()(),eo(0,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.resume()&&l),l},null,null)),(e()(),fo(-1,null,["resume game"]))],null,null)}function ZD(e){return So(0,[(e()(),eo(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),fo(1,null,["","/",""]))],null,function(e,n){var t=n.parent.parent.context.$implicit.getAmount(),l=n.parent.parent.context.$implicit.getLimit();e(n,1,0,t,l)})}function JD(e){return So(0,[(e()(),eo(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),fo(1,null,["","/",""]))],null,function(e,n){var t=n.parent.parent.context.$implicit.getAmount(),l=n.parent.parent.context.$implicit.getLimit();e(n,1,0,t,l)})}function eL(e){return So(0,[(e()(),eo(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),fo(1,null,["",""]))],null,function(e,n){var t=n.parent.parent.context.$implicit.getAmount();e(n,1,0,t)})}function nL(e){return So(0,[(e()(),eo(0,0,null,null,16,"span",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,15,"span",[["appTooltip",""],["class","icon tooltip"]],null,[[null,"mousemove"]],function(e,n,t){var l=!0;return"mousemove"===n&&(l=!1!==ii(e,2).onmousemove(t)&&l),l},null,null)),vi(2,16384,null,0,Pg,[],{elementId:[0,"elementId"]},null),(e()(),eo(3,0,null,null,4,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),eo(4,0,null,null,1,"div",[["class","center"]],null,null,null,null,null)),(e()(),fo(5,null,["",""])),(e()(),eo(6,0,null,null,0,"div",[["class","center"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),eo(7,0,null,null,0,"div",[["class","center"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),eo(8,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(9,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),Jr(16777216,null,null,1,null,ZD)),vi(11,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,JD)),vi(13,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,eL)),vi(15,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),fo(-1,null,[" \xa0"]))],function(e,n){var t=n.component;e(n,2,0,1e5*n.parent.context.$implicit.resource);var l=n.parent.context.$implicit.getName();e(n,9,0,l,"resources","");var i=n.parent.context.$implicit.getAmount()===n.parent.context.$implicit.getLimit();e(n,11,0,i);var r=t.isNotCoins(n.parent.context.$implicit)&&n.parent.context.$implicit.getAmount()!==n.parent.context.$implicit.getLimit();e(n,13,0,r),e(n,15,0,!t.isNotCoins(n.parent.context.$implicit))},function(e,n){var t=n.component;e(n,3,0,xl(1,"",1e5*n.parent.context.$implicit.resource,"")),e(n,5,0,n.parent.context.$implicit.name),e(n,6,0,t.getResourceDescription(n.parent.context.$implicit)),e(n,7,0,t.getResourceConsumers(n.parent.context.$implicit))})}function tL(e){return So(0,[(e()(),eo(0,0,null,null,2,"div",[["class","highlighted"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,nL)),vi(2,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,2,0,n.context.$implicit.visible&&n.context.$implicit.highlighted)},null)}function lL(e){return So(0,[(e()(),eo(0,0,null,null,69,"div",[["id","wrapperTwoLines"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,65,"div",[["class","line"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,_D)),vi(3,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,PD)),vi(5,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,DD)),vi(7,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,FD)),vi(9,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,HD)),vi(11,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,GD)),vi(13,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,BD)),vi(15,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),fo(-1,null,[" \xa0 "])),(e()(),Jr(16777216,null,null,1,null,VD)),vi(18,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),fo(-1,null,[" \xa0 "])),(e()(),Jr(16777216,null,null,1,null,WD)),vi(21,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,zD)),vi(23,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),fo(-1,null,[" \xa0 "])),(e()(),eo(25,0,null,null,13,"div",[["id","right"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,YD)),vi(27,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(28,0,null,null,10,"span",[["class","icon"],["id","weather"]],null,null,null,null,null)),(e()(),fo(-1,null,[" \xa0 "])),(e()(),eo(30,0,null,null,1,"app-icon",[],null,null,null,Mg,kg)),vi(31,114688,null,0,xg,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),eo(32,0,null,null,6,null,null,null,null,null,null,null)),(e()(),fo(33,null,[""," "])),po(34,2),(e()(),Jr(16777216,null,null,1,null,KD)),vi(36,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,jD)),vi(38,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(39,0,null,null,27,"div",[["class","dropdown"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,$D)),vi(41,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,QD)),vi(43,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(44,0,null,null,22,"ul",[["class","dropdown-content"]],null,null,null,null,null)),(e()(),eo(45,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.options()&&l),l},null,null)),(e()(),fo(-1,null,["options"])),(e()(),eo(47,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.save()&&l),l},null,null)),(e()(),fo(-1,null,["save"])),(e()(),eo(49,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.load()&&l),l},null,null)),(e()(),fo(-1,null,["load"])),(e()(),eo(51,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.import()&&l),l},null,null)),(e()(),fo(-1,null,["import"])),(e()(),eo(53,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.export()&&l),l},null,null)),(e()(),fo(-1,null,["export"])),(e()(),Jr(16777216,null,null,1,null,qD)),vi(56,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,XD)),vi(58,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(59,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.showCurrentTutorial()&&l),l},null,null)),(e()(),fo(-1,null,["show current tab tutorial"])),(e()(),eo(61,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.resetTutorials()&&l),l},null,null)),(e()(),fo(-1,null,["reset tutorials"])),(e()(),eo(63,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.softReset()&&l),l},null,null)),(e()(),fo(-1,null,["abdicate"])),(e()(),eo(65,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.hardReset()&&l),l},null,null)),(e()(),fo(-1,null,["hard reset"])),(e()(),eo(67,0,null,null,2,"div",[["class","line"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,tL)),vi(69,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,3,0,t.isFoodNutritionEnabled()&&t.isManagementResearched()),e(n,5,0,t.isRawEnabled()&&t.isManagementResearched()),e(n,7,0,t.isProcessedEnabled()&&t.isManagementResearched()),e(n,9,0,t.isFoodEnabled()&&t.isManagementResearched()),e(n,11,0,t.isToolsEnabled()&&t.isManagementResearched()),e(n,13,0,t.isFoodNutritionEnabled()&&!t.isManagementResearched()),e(n,15,0,t.showPopulation()),e(n,18,0,t.showFreeWorkers()),e(n,21,0,t.showFaith()&&t.isFaithUnlocked()),e(n,23,0,t.showResearchProgress()),e(n,27,0,t.calendarEnabled()),e(n,31,0,t.getWeatherName(),"weather"),e(n,36,0,t.metric),e(n,38,0,!t.metric),e(n,41,0,!t.isPaused()),e(n,43,0,t.isPaused()),e(n,56,0,!t.isPaused()),e(n,58,0,t.isPaused()),e(n,69,0,t.getResourcesValues())},function(e,n){var t=n.component,l=tl(n,33,0,e(n,34,0,ii(n.parent,0),t.getTemperature(),"0.0-1"));e(n,33,0,l)})}function iL(e){return So(0,[Si(0,va,[er]),ro(671088640,1,{line1Ref:0}),ro(671088640,2,{line22Ref:0}),(e()(),Jr(16777216,null,null,1,null,AD)),vi(4,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,lL)),vi(6,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,4,0,!t.isHeaderTwoLines()),e(n,6,0,t.isHeaderTwoLines())},null)}var rL=function(){function e(e,n){this.gameService=e,this.router=n}return e.prototype.ngOnInit=function(){},e.prototype.isWeatherEnabled=function(){return this.gameService.isEnabled(_u.WEATHER)},e.prototype.isMarketEnabled=function(){return this.gameService.isEnabled(_u.MARKET)},e.prototype.isManagementEnabled=function(){return this.gameService.isEnabled(_u.MANAGEMENT)},e.prototype.isResearchEnabled=function(){return this.gameService.isEnabled(_u.RESEARCH)},e.prototype.isArmyEnabled=function(){return this.gameService.isEnabled(_u.ARMY)},e.prototype.isReligionEnabled=function(){return this.gameService.isEnabled(_u.RELIGION)},e.prototype.isCraftingEnabled=function(){return this.gameService.isEnabled(_u.CRAFTING)},e.prototype.isHeritageUnlocked=function(){return this.gameService.isEnabled(_u.HERITAGE)},e.prototype.isCartographyEnabled=function(){return this.gameService.isEnabled(_u.CARTOGRAPHY)},e.prototype.isDev=function(){return!is.production},e.prototype.isInRegions=function(){return this.router.url.includes("/regions/")},e.prototype.isNavyEnabled=function(){return this.gameService.isEnabled(_u.NAVY)},e}(),oL=rl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{display:-webkit-box;display:flex;height:100%;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.entry[_ngcontent-%COMP%]{padding:0;margin:0;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:5%;text-align:center;border-bottom:2px solid #000;cursor:pointer;text-decoration:none;color:#000;font-size:1em}.entry2[_ngcontent-%COMP%]{padding:0;margin:0;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:10%;text-align:center;border:none;cursor:pointer;text-decoration:none;color:#000;font-size:1em}.entry3[_ngcontent-%COMP%]{padding:0;margin:0;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:50%;text-align:center;border-top:2px solid #000;cursor:pointer;text-decoration:none;color:#000;font-size:1em}.entry3[_ngcontent-%COMP%]:last-of-type{border-bottom:none}.entry[_ngcontent-%COMP%]:first-of-type{cursor:default}.empty[_ngcontent-%COMP%]{padding:0;margin:0;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:50%;text-align:center;text-decoration:none;color:#000;font-size:1em;cursor:default}.entry.active[_ngcontent-%COMP%], .entry3.active[_ngcontent-%COMP%]{background:var(--active-colour);text-decoration:none}.end[_ngcontent-%COMP%]{margin-top:auto;border:none}"]],data:{}});function uL(e){return So(0,[(e()(),eo(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/regions"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==ii(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),vi(1,671744,[[2,4]],0,Qd,[jd,Fh,Ds],{routerLink:[0,"routerLink"]},null),vi(2,1720320,null,2,Xd,[jd,dt,St,[2,$d],[2,Qd]],{routerLinkActive:[0,"routerLinkActive"]},null),ro(603979776,1,{links:1}),ro(603979776,2,{linksWithHrefs:1}),(e()(),fo(-1,null,["Village"]))],function(e,n){e(n,1,0,"/regions"),e(n,2,0,"active")},function(e,n){e(n,0,0,ii(n,1).target,ii(n,1).href)})}function sL(e){return So(0,[(e()(),eo(0,0,null,null,2,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/regions/village"]],[[2,"active",null],[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==ii(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),vi(1,671744,null,0,Qd,[jd,Fh,Ds],{routerLink:[0,"routerLink"]},null),(e()(),fo(-1,null,["Village"]))],function(e,n){e(n,1,0,"/regions/village")},function(e,n){e(n,0,0,!0,ii(n,1).target,ii(n,1).href)})}function aL(e){return So(0,[(e()(),eo(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/management"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==ii(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),vi(1,671744,[[6,4]],0,Qd,[jd,Fh,Ds],{routerLink:[0,"routerLink"]},null),vi(2,1720320,null,2,Xd,[jd,dt,St,[2,$d],[2,Qd]],{routerLinkActive:[0,"routerLinkActive"]},null),ro(603979776,5,{links:1}),ro(603979776,6,{linksWithHrefs:1}),(e()(),fo(-1,null,["Management"]))],function(e,n){e(n,1,0,"/management"),e(n,2,0,"active")},function(e,n){e(n,0,0,ii(n,1).target,ii(n,1).href)})}function cL(e){return So(0,[(e()(),eo(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/crafting"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==ii(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),vi(1,671744,[[8,4]],0,Qd,[jd,Fh,Ds],{routerLink:[0,"routerLink"]},null),vi(2,1720320,null,2,Xd,[jd,dt,St,[2,$d],[2,Qd]],{routerLinkActive:[0,"routerLinkActive"]},null),ro(603979776,7,{links:1}),ro(603979776,8,{linksWithHrefs:1}),(e()(),fo(-1,null,["Crafting"]))],function(e,n){e(n,1,0,"/crafting"),e(n,2,0,"active")},function(e,n){e(n,0,0,ii(n,1).target,ii(n,1).href)})}function pL(e){return So(0,[(e()(),eo(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/research"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==ii(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),vi(1,671744,[[10,4]],0,Qd,[jd,Fh,Ds],{routerLink:[0,"routerLink"]},null),vi(2,1720320,null,2,Xd,[jd,dt,St,[2,$d],[2,Qd]],{routerLinkActive:[0,"routerLinkActive"]},null),ro(603979776,9,{links:1}),ro(603979776,10,{linksWithHrefs:1}),(e()(),fo(-1,null,["Research"]))],function(e,n){e(n,1,0,"/research"),e(n,2,0,"active")},function(e,n){e(n,0,0,ii(n,1).target,ii(n,1).href)})}function hL(e){return So(0,[(e()(),eo(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/market"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==ii(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),vi(1,671744,[[12,4]],0,Qd,[jd,Fh,Ds],{routerLink:[0,"routerLink"]},null),vi(2,1720320,null,2,Xd,[jd,dt,St,[2,$d],[2,Qd]],{routerLinkActive:[0,"routerLinkActive"]},null),ro(603979776,11,{links:1}),ro(603979776,12,{linksWithHrefs:1}),(e()(),fo(-1,null,["Market"]))],function(e,n){e(n,1,0,"/market"),e(n,2,0,"active")},function(e,n){e(n,0,0,ii(n,1).target,ii(n,1).href)})}function dL(e){return So(0,[(e()(),eo(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/army"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==ii(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),vi(1,671744,[[14,4]],0,Qd,[jd,Fh,Ds],{routerLink:[0,"routerLink"]},null),vi(2,1720320,null,2,Xd,[jd,dt,St,[2,$d],[2,Qd]],{routerLinkActive:[0,"routerLinkActive"]},null),ro(603979776,13,{links:1}),ro(603979776,14,{linksWithHrefs:1}),(e()(),fo(-1,null,["Army"]))],function(e,n){e(n,1,0,"/army"),e(n,2,0,"active")},function(e,n){e(n,0,0,ii(n,1).target,ii(n,1).href)})}function gL(e){return So(0,[(e()(),eo(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/religion"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==ii(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),vi(1,671744,[[16,4]],0,Qd,[jd,Fh,Ds],{routerLink:[0,"routerLink"]},null),vi(2,1720320,null,2,Xd,[jd,dt,St,[2,$d],[2,Qd]],{routerLinkActive:[0,"routerLinkActive"]},null),ro(603979776,15,{links:1}),ro(603979776,16,{linksWithHrefs:1}),(e()(),fo(-1,null,["Religion"]))],function(e,n){e(n,1,0,"/religion"),e(n,2,0,"active")},function(e,n){e(n,0,0,ii(n,1).target,ii(n,1).href)})}function fL(e){return So(0,[(e()(),eo(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/weather"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==ii(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),vi(1,671744,[[18,4]],0,Qd,[jd,Fh,Ds],{routerLink:[0,"routerLink"]},null),vi(2,1720320,null,2,Xd,[jd,dt,St,[2,$d],[2,Qd]],{routerLinkActive:[0,"routerLinkActive"]},null),ro(603979776,17,{links:1}),ro(603979776,18,{linksWithHrefs:1}),(e()(),fo(-1,null,["Weather"]))],function(e,n){e(n,1,0,"/weather"),e(n,2,0,"active")},function(e,n){e(n,0,0,ii(n,1).target,ii(n,1).href)})}function mL(e){return So(0,[(e()(),eo(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/world"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==ii(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),vi(1,671744,[[20,4]],0,Qd,[jd,Fh,Ds],{routerLink:[0,"routerLink"]},null),vi(2,1720320,null,2,Xd,[jd,dt,St,[2,$d],[2,Qd]],{routerLinkActive:[0,"routerLinkActive"]},null),ro(603979776,19,{links:1}),ro(603979776,20,{linksWithHrefs:1}),(e()(),fo(-1,null,["World Map"]))],function(e,n){e(n,1,0,"/world"),e(n,2,0,"active")},function(e,n){e(n,0,0,ii(n,1).target,ii(n,1).href)})}function vL(e){return So(0,[(e()(),eo(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/navy"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==ii(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),vi(1,671744,[[22,4]],0,Qd,[jd,Fh,Ds],{routerLink:[0,"routerLink"]},null),vi(2,1720320,null,2,Xd,[jd,dt,St,[2,$d],[2,Qd]],{routerLinkActive:[0,"routerLinkActive"]},null),ro(603979776,21,{links:1}),ro(603979776,22,{linksWithHrefs:1}),(e()(),fo(-1,null,["Navy"]))],function(e,n){e(n,1,0,"/navy"),e(n,2,0,"active")},function(e,n){e(n,0,0,ii(n,1).target,ii(n,1).href)})}function SL(e){return So(0,[(e()(),eo(0,0,null,null,5,"a",[["class","entry3"],["draggable","false"],["ondragstart","return false;"],["routerLink","/heritage"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==ii(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),vi(1,671744,[[24,4]],0,Qd,[jd,Fh,Ds],{routerLink:[0,"routerLink"]},null),vi(2,1720320,null,2,Xd,[jd,dt,St,[2,$d],[2,Qd]],{routerLinkActive:[0,"routerLinkActive"]},null),ro(603979776,23,{links:1}),ro(603979776,24,{linksWithHrefs:1}),(e()(),fo(-1,null,["Heritage"]))],function(e,n){e(n,1,0,"/heritage"),e(n,2,0,"active")},function(e,n){e(n,0,0,ii(n,1).target,ii(n,1).href)})}function EL(e){return So(0,[(e()(),eo(0,0,null,null,0,"a",[["class","empty"],["draggable","false"],["ondragstart","return false;"]],null,null,null,null,null))],null,null)}function yL(e){return So(0,[(e()(),eo(0,0,null,null,40,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,0,"a",[["class","entry"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,uL)),vi(3,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,sL)),vi(5,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(6,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/resources"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==ii(e,7).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),vi(7,671744,[[4,4]],0,Qd,[jd,Fh,Ds],{routerLink:[0,"routerLink"]},null),vi(8,1720320,null,2,Xd,[jd,dt,St,[2,$d],[2,Qd]],{routerLinkActive:[0,"routerLinkActive"]},null),ro(603979776,3,{links:1}),ro(603979776,4,{linksWithHrefs:1}),(e()(),fo(-1,null,["Resources"])),(e()(),Jr(16777216,null,null,1,null,aL)),vi(13,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,cL)),vi(15,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,pL)),vi(17,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,hL)),vi(19,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,dL)),vi(21,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,gL)),vi(23,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,fL)),vi(25,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,mL)),vi(27,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,vL)),vi(29,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(30,0,null,null,10,"div",[["class","entry2 end"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,SL)),vi(32,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,EL)),vi(34,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(35,0,null,null,5,"a",[["class","entry3"],["draggable","false"],["ondragstart","return false;"],["routerLink","/royal"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==ii(e,36).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&l),l},null,null)),vi(36,671744,[[26,4]],0,Qd,[jd,Fh,Ds],{routerLink:[0,"routerLink"]},null),vi(37,1720320,null,2,Xd,[jd,dt,St,[2,$d],[2,Qd]],{routerLinkActive:[0,"routerLinkActive"]},null),ro(603979776,25,{links:1}),ro(603979776,26,{linksWithHrefs:1}),(e()(),fo(-1,null,["Royal perks"]))],function(e,n){var t=n.component;e(n,3,0,!t.isInRegions()),e(n,5,0,t.isInRegions()),e(n,7,0,"/resources"),e(n,8,0,"active"),e(n,13,0,t.isManagementEnabled()),e(n,15,0,t.isCraftingEnabled()),e(n,17,0,t.isResearchEnabled()),e(n,19,0,t.isMarketEnabled()),e(n,21,0,t.isArmyEnabled()),e(n,23,0,t.isReligionEnabled()),e(n,25,0,t.isWeatherEnabled()),e(n,27,0,t.isCartographyEnabled()),e(n,29,0,t.isNavyEnabled()),e(n,32,0,t.isHeritageUnlocked()),e(n,34,0,!t.isHeritageUnlocked()),e(n,36,0,"/royal"),e(n,37,0,"active")},function(e,n){e(n,6,0,ii(n,7).target,ii(n,7).href),e(n,35,0,ii(n,36).target,ii(n,36).href)})}var RL=function(){function e(e,n,t){this.logService=e,this.changeDetectorRef=n,this.modalService=t,this.entries=[],this.logEntryTypes=ts}return e.prototype.ngOnInit=function(){var e=this;this.logService.registerForLogs().subscribe(function(){e.entries=e.logService.getEntries(),e.scrollToBottom()}),this.entries=this.logService.getEntries(),this.scrollToBottom()},e.prototype.clearLogs=function(){this.logService.clearEntries()},e.prototype.scrollToBottom=function(){var e=this.scrollRef.nativeElement,n=e.scrollHeight-e.clientHeight<=e.scrollTop+25;this.changeDetectorRef.destroyed||this.changeDetectorRef.detectChanges(),n&&(e.scrollTop=e.scrollHeight)},e.prototype.showFightReport=function(e){this.modalService.open(ju.FIGHT_REPORT),this.modalService.setFightReport(e)},e}(),bL=rl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:100%;max-height:100%}#clear-button[_ngcontent-%COMP%]{float:right}#log[_ngcontent-%COMP%]{height:100%;overflow-y:scroll;font-size:.8em}.title[_ngcontent-%COMP%]{border-bottom:1px solid #000;text-align:center;font-weight:700;font-size:1.1em}#title-text[_ngcontent-%COMP%]{display:inline-block;margin-left:20px;margin-top:3px}ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}li[_ngcontent-%COMP%]{padding-left:.5%;padding-bottom:.4%}.date[_ngcontent-%COMP%]{font-weight:bolder}.warning[_ngcontent-%COMP%]{color:var(--negative-colour)}.success[_ngcontent-%COMP%]{color:var(--positive-colour)}.mystical[_ngcontent-%COMP%]{color:#00008b}#log[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:1px;margin-left:2px}"]],data:{}});function OL(e){return So(0,[(e()(),eo(0,0,null,null,3,"span",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"span",[["class","date"]],null,null,null,null,null)),(e()(),fo(2,null,["day ",":"])),(e()(),eo(3,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.day),e(n,3,0," "+n.parent.context.$implicit.message)})}function TL(e){return So(0,[(e()(),eo(0,0,null,null,3,"span",[["class","success"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"span",[["class","date"]],null,null,null,null,null)),(e()(),fo(2,null,["day ",":"])),(e()(),eo(3,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.day),e(n,3,0," "+n.parent.context.$implicit.message)})}function CL(e){return So(0,[(e()(),eo(0,0,null,null,3,"span",[["class","warning"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"span",[["class","date"]],null,null,null,null,null)),(e()(),fo(2,null,["day ",":"])),(e()(),eo(3,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.day),e(n,3,0," "+n.parent.context.$implicit.message)})}function IL(e){return So(0,[(e()(),eo(0,0,null,null,3,"span",[["class","mystical"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"span",[["class","date"]],null,null,null,null,null)),(e()(),fo(2,null,["day ",":"])),(e()(),eo(3,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.day),e(n,3,0," "+n.parent.context.$implicit.message)})}function AL(e){return So(0,[(e()(),eo(0,0,null,null,5,"span",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"span",[["class","date"]],null,null,null,null,null)),(e()(),fo(2,null,["day ",":"])),(e()(),eo(3,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null)),(e()(),eo(4,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.showFightReport(e.parent.context.$implicit.data)&&l),l},null,null)),(e()(),fo(-1,null,["report"]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.day),e(n,3,0," "+n.parent.context.$implicit.message)})}function NL(e){return So(0,[(e()(),eo(0,0,null,null,12,"li",[],null,null,null,null,null)),(e()(),eo(1,0,null,null,11,"div",[],null,null,null,null,null)),vi(2,16384,null,0,ua,[],{ngSwitch:[0,"ngSwitch"]},null),(e()(),Jr(16777216,null,null,1,null,OL)),vi(4,278528,null,0,sa,[Gt,Ut,ua],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),Jr(16777216,null,null,1,null,TL)),vi(6,278528,null,0,sa,[Gt,Ut,ua],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),Jr(16777216,null,null,1,null,CL)),vi(8,278528,null,0,sa,[Gt,Ut,ua],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),Jr(16777216,null,null,1,null,IL)),vi(10,278528,null,0,sa,[Gt,Ut,ua],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),Jr(16777216,null,null,1,null,AL)),vi(12,278528,null,0,sa,[Gt,Ut,ua],{ngSwitchCase:[0,"ngSwitchCase"]},null)],function(e,n){var t=n.component;e(n,2,0,n.context.$implicit.type),e(n,4,0,t.logEntryTypes.LOG),e(n,6,0,t.logEntryTypes.SUCCESS),e(n,8,0,t.logEntryTypes.WARNING),e(n,10,0,t.logEntryTypes.MYSTICAL),e(n,12,0,t.logEntryTypes.FIGHT_REPORT)},null)}function _L(e){return So(0,[ro(402653184,1,{scrollRef:0}),(e()(),eo(1,0,null,null,9,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),eo(2,0,null,null,4,"div",[["class","title"]],null,null,null,null,null)),(e()(),eo(3,0,null,null,1,"span",[["id","title-text"]],null,null,null,null,null)),(e()(),fo(-1,null,["Log"])),(e()(),eo(5,0,null,null,1,"button",[["id","clear-button"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.clearLogs()&&l),l},null,null)),(e()(),fo(-1,null,["clear"])),(e()(),eo(7,0,[[1,0],["scroll",1]],null,3,"div",[["id","log"]],null,null,null,null,null)),(e()(),eo(8,0,null,null,2,"ul",[],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,NL)),vi(10,278528,null,0,na,[Gt,Ut,Pt],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,10,0,n.component.entries)},null)}var wL=function(){function e(e,n,t){this.gameService=e,this.tickerService=n,this.optionsService=t,this.gameName=is.gameName,this.version=is.versionString}return e.prototype.ngOnInit=function(){},e.prototype.showDevNotes=function(){this.gameService.showDevNotes()},e.prototype.getSound=function(){return this.optionsService.getOption(Wf.SOUND_MASTER)},e.prototype.toggleSound=function(){this.optionsService.setOption(Wf.SOUND_MASTER,!this.optionsService.getOption(Wf.SOUND_MASTER))},e.prototype.isPaused=function(){return this.tickerService.isPaused()},e.prototype.pause=function(){this.tickerService.pause()},e.prototype.resume=function(){this.tickerService.resume()},e}(),PL=rl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:100%;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;font-size:1.2em}.first[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 4%;height:30px}.second[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 0 4%;height:30px;-webkit-box-align:center;align-items:center;vertical-align:center}.second[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:24px}#center[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 84%;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center}#wiki[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 0 4%;-webkit-box-pack:end;justify-content:flex-end;margin-top:5px}a[_ngcontent-%COMP%]{text-decoration:none;color:#000}#dev[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 0 4%;height:30px;-webkit-box-pack:end;justify-content:flex-end}img[_ngcontent-%COMP%]{width:30px;cursor:pointer}"]],data:{}});function xL(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[["class","first"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/sound_on.svg"],["title","turn off"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleSound()&&l),l},null,null))],null,null)}function kL(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[["class","first"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/sound_off.svg"],["title","turn on"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.toggleSound()&&l),l},null,null))],null,null)}function ML(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[["class","second"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/pause2.svg"],["title","pause"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.pause()&&l),l},null,null))],null,null)}function DL(e){return So(0,[(e()(),eo(0,0,null,null,1,"span",[["class","second"]],null,null,null,null,null)),(e()(),eo(1,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/play.svg"],["title","play"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.resume()&&l),l},null,null))],null,null)}function LL(e){return So(0,[(e()(),eo(0,0,null,null,16,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Jr(16777216,null,null,1,null,xL)),vi(2,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,kL)),vi(4,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,ML)),vi(6,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,DL)),vi(8,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),eo(9,0,null,null,2,"div",[["id","center"]],null,null,null,null,null)),(e()(),eo(10,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),fo(11,null,[""," v",""])),(e()(),eo(12,0,null,null,2,"span",[["id","wiki"]],null,null,null,null,null)),(e()(),eo(13,0,null,null,1,"a",[["href","http://wiki.villagerkings.com"],["rel","noopener noreferrer"],["target","_blank"]],null,null,null,null,null)),(e()(),fo(-1,null,["wiki"])),(e()(),eo(15,0,null,null,1,"span",[["id","dev"]],null,null,null,null,null)),(e()(),eo(16,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/dev.svg"],["title","dev notes"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.showDevNotes()&&l),l},null,null))],function(e,n){var t=n.component;e(n,2,0,t.getSound()),e(n,4,0,!t.getSound()),e(n,6,0,!t.isPaused()),e(n,8,0,t.isPaused())},function(e,n){var t=n.component;e(n,11,0,t.gameName,t.version)})}var FL=function(){function e(e,n,t,l,i,r,o,u,s,a,c,p,h,d,g,f,m){var v=this;this.gameService=e,this.randomService=n,this.optionsService=t,this.tickerService=l,this.serializerService=i,this.resourceService=r,this.techService=o,this.logService=u,this.seaService=s,this.mountainsService=a,this.fortService=c,this.forestService=p,this.fieldService=h,this.managementService=d,this.villageService=g,this.soundService=f,this.router=m,e.registerForHeaderRowsChange().subscribe(function(e){e&&v.wrapperRef?v.wrapperRef.nativeElement.style.gridTemplateRows="8% auto 4%":!e&&v.wrapperRef&&(v.wrapperRef.nativeElement.style.gridTemplateRows="4% auto 4%")})}return e.prototype.ngOnInit=function(){this.serializerService.hasSave()?this.serializerService.initLoad():this.initGame(),this.managementService.getSecondHeaderRow()&&this.wrapperRef&&(this.wrapperRef.nativeElement.style.gridTemplateRows="8% auto 4%"),this.tickerService.start(),this.optionsService.getOption(Wf.PAUSE_ON_INIT)&&(this.logService.warning("Game paused on start (settings option)"),this.tickerService.pause()),this.soundService.playMusic()},e.prototype.initGame=function(){this.gameService.init(),this.optionsService.init(),this.resourceService.init(),this.villageService.init(),this.fortService.init(),this.forestService.init(),this.fieldService.init(),this.mountainsService.init(),this.seaService.init()},e.prototype.exitSave=function(e){this.serializerService.initSave()},e.prototype.pause=function(e){if("VillagerKings"===e.target.id)switch(e.key){case"p":"VillagerKings"===e.target.id&&(this.tickerService.isPaused()?this.tickerService.resume():this.tickerService.pause());break;case"m":this.gameService.isEnabled(_u.CARTOGRAPHY)&&this.router.navigate(["/world"])}},e}(),UL=rl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{position:relative;display:grid;height:100%;max-height:100%;grid-template-columns:11% auto 20%;grid-template-rows:4% auto 4%;border:1px solid #000;background:var(--background-clour);background-image:url(old_parchment.85c5af81bf778b941dfc.jpg);background-size:100% 100%}#footer[_ngcontent-%COMP%], #header[_ngcontent-%COMP%]{grid-column-start:1;grid-column-end:4;border:1px solid #000;overflow:hidden}#left-menu[_ngcontent-%COMP%]{grid-column-start:1;grid-column-end:2;border:1px solid #000;overflow:hidden}#center[_ngcontent-%COMP%]{grid-column-start:2;grid-column-end:3;border:1px solid #000;overflow:hidden}#screen[_ngcontent-%COMP%]{height:100%}#right-menu[_ngcontent-%COMP%]{grid-column-start:3;grid-column-end:4;border:1px solid #000;overflow:hidden}.asset[_ngcontent-%COMP%]{display:none}"]],data:{}});function HL(e){return So(0,[ro(402653184,1,{wrapperRef:0}),(e()(),eo(1,0,[[1,0],["wrap",1]],null,135,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),eo(2,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/buff.svg"]],null,null,null,null,null)),(e()(),eo(3,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/complex_management_off_off.svg"]],null,null,null,null,null)),(e()(),eo(4,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/complex_management_off_on.svg"]],null,null,null,null,null)),(e()(),eo(5,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/complex_management_on_off.svg"]],null,null,null,null,null)),(e()(),eo(6,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/complex_management_on_on.svg"]],null,null,null,null,null)),(e()(),eo(7,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/details.svg"]],null,null,null,null,null)),(e()(),eo(8,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/dev.svg"]],null,null,null,null,null)),(e()(),eo(9,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/eye.svg"]],null,null,null,null,null)),(e()(),eo(10,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/foresight.svg"]],null,null,null,null,null)),(e()(),eo(11,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/forest.svg"]],null,null,null,null,null)),(e()(),eo(12,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/gear.svg"]],null,null,null,null,null)),(e()(),eo(13,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/gear_off.svg"]],null,null,null,null,null)),(e()(),eo(14,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/hammer.svg"]],null,null,null,null,null)),(e()(),eo(15,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/kred.png"]],null,null,null,null,null)),(e()(),eo(16,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/land.svg"]],null,null,null,null,null)),(e()(),eo(17,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/manage.svg"]],null,null,null,null,null)),(e()(),eo(18,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/mountains.svg"]],null,null,null,null,null)),(e()(),eo(19,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/pause.svg"]],null,null,null,null,null)),(e()(),eo(20,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/pause2.svg"]],null,null,null,null,null)),(e()(),eo(21,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/play.svg"]],null,null,null,null,null)),(e()(),eo(22,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/population.svg"]],null,null,null,null,null)),(e()(),eo(23,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/question_mark.svg"]],null,null,null,null,null)),(e()(),eo(24,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/settings.svg"]],null,null,null,null,null)),(e()(),eo(25,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/sound_off.svg"]],null,null,null,null,null)),(e()(),eo(26,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/sound_on.svg"]],null,null,null,null,null)),(e()(),eo(27,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/stop.svg"]],null,null,null,null,null)),(e()(),eo(28,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/tick.svg"]],null,null,null,null,null)),(e()(),eo(29,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/time.svg"]],null,null,null,null,null)),(e()(),eo(30,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/trade.svg"]],null,null,null,null,null)),(e()(),eo(31,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/upgrade.svg"]],null,null,null,null,null)),(e()(),eo(32,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/village.svg"]],null,null,null,null,null)),(e()(),eo(33,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/religion/faith.svg"]],null,null,null,null,null)),(e()(),eo(34,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/religion/faith_shield.svg"]],null,null,null,null,null)),(e()(),eo(35,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/weather/clouds.svg"]],null,null,null,null,null)),(e()(),eo(36,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/weather/rain.svg"]],null,null,null,null,null)),(e()(),eo(37,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/weather/snow.svg"]],null,null,null,null,null)),(e()(),eo(38,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/weather/storm.svg"]],null,null,null,null,null)),(e()(),eo(39,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/weather/sun.svg"]],null,null,null,null,null)),(e()(),eo(40,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/weather/wind.svg"]],null,null,null,null,null)),(e()(),eo(41,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/army/attack.svg"]],null,null,null,null,null)),(e()(),eo(42,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/army/barracks.svg"]],null,null,null,null,null)),(e()(),eo(43,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/army/defense.svg"]],null,null,null,null,null)),(e()(),eo(44,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/army/invasion.svg"]],null,null,null,null,null)),(e()(),eo(45,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/army/recruit.svg"]],null,null,null,null,null)),(e()(),eo(46,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/happiness/angry.svg"]],null,null,null,null,null)),(e()(),eo(47,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/happiness/happy.svg"]],null,null,null,null,null)),(e()(),eo(48,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/happiness/neutral.svg"]],null,null,null,null,null)),(e()(),eo(49,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/happiness/overjoyed.svg"]],null,null,null,null,null)),(e()(),eo(50,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/happiness/sad.svg"]],null,null,null,null,null)),(e()(),eo(51,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/apple.svg"]],null,null,null,null,null)),(e()(),eo(52,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/barley.svg"]],null,null,null,null,null)),(e()(),eo(53,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/beer.svg"]],null,null,null,null,null)),(e()(),eo(54,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/berry.svg"]],null,null,null,null,null)),(e()(),eo(55,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/bow.svg"]],null,null,null,null,null)),(e()(),eo(56,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/bread.svg"]],null,null,null,null,null)),(e()(),eo(57,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/brick.svg"]],null,null,null,null,null)),(e()(),eo(58,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/bronze.svg"]],null,null,null,null,null)),(e()(),eo(59,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/brushwood.svg"]],null,null,null,null,null)),(e()(),eo(60,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/cheese.svg"]],null,null,null,null,null)),(e()(),eo(61,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/chicken.svg"]],null,null,null,null,null)),(e()(),eo(62,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/clay.svg"]],null,null,null,null,null)),(e()(),eo(63,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/clothes.svg"]],null,null,null,null,null)),(e()(),eo(64,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/coal.svg"]],null,null,null,null,null)),(e()(),eo(65,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/coins.svg"]],null,null,null,null,null)),(e()(),eo(66,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/cooked_fish.svg"]],null,null,null,null,null)),(e()(),eo(67,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/cooked_meat.svg"]],null,null,null,null,null)),(e()(),eo(68,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/copper.svg"]],null,null,null,null,null)),(e()(),eo(69,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/copper_ore.svg"]],null,null,null,null,null)),(e()(),eo(70,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/cotton.svg"]],null,null,null,null,null)),(e()(),eo(71,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/cow.svg"]],null,null,null,null,null)),(e()(),eo(72,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/cut_stone.svg"]],null,null,null,null,null)),(e()(),eo(73,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/egg.svg"]],null,null,null,null,null)),(e()(),eo(74,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/fabric.svg"]],null,null,null,null,null)),(e()(),eo(75,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/fish.svg"]],null,null,null,null,null)),(e()(),eo(76,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/flour.svg"]],null,null,null,null,null)),(e()(),eo(77,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/food.svg"]],null,null,null,null,null)),(e()(),eo(78,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/fuel.svg"]],null,null,null,null,null)),(e()(),eo(79,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/fur.svg"]],null,null,null,null,null)),(e()(),eo(80,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/gold.svg"]],null,null,null,null,null)),(e()(),eo(81,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/gold_ore.svg"]],null,null,null,null,null)),(e()(),eo(82,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/grape.svg"]],null,null,null,null,null)),(e()(),eo(83,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/hay.svg"]],null,null,null,null,null)),(e()(),eo(84,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/hop.svg"]],null,null,null,null,null)),(e()(),eo(85,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/horse.svg"]],null,null,null,null,null)),(e()(),eo(86,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/iron.svg"]],null,null,null,null,null)),(e()(),eo(87,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/iron_ore.svg"]],null,null,null,null,null)),(e()(),eo(88,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/leather.svg"]],null,null,null,null,null)),(e()(),eo(89,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/leather_armor.svg"]],null,null,null,null,null)),(e()(),eo(90,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/light_armor.svg"]],null,null,null,null,null)),(e()(),eo(91,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/heavy_armor.svg"]],null,null,null,null,null)),(e()(),eo(92,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/log.svg"]],null,null,null,null,null)),(e()(),eo(93,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/meat.svg"]],null,null,null,null,null)),(e()(),eo(94,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/meat_soup.svg"]],null,null,null,null,null)),(e()(),eo(95,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/milk.svg"]],null,null,null,null,null)),(e()(),eo(96,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/mushroom.svg"]],null,null,null,null,null)),(e()(),eo(97,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/nails.svg"]],null,null,null,null,null)),(e()(),eo(98,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/omelette.svg"]],null,null,null,null,null)),(e()(),eo(99,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/pig.svg"]],null,null,null,null,null)),(e()(),eo(100,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/plank.svg"]],null,null,null,null,null)),(e()(),eo(101,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/pottery.svg"]],null,null,null,null,null)),(e()(),eo(102,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/sheep.svg"]],null,null,null,null,null)),(e()(),eo(103,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/silver.svg"]],null,null,null,null,null)),(e()(),eo(104,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/silver_ore.svg"]],null,null,null,null,null)),(e()(),eo(105,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/steel.svg"]],null,null,null,null,null)),(e()(),eo(106,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/stone.svg"]],null,null,null,null,null)),(e()(),eo(107,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/axe.svg"]],null,null,null,null,null)),(e()(),eo(108,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/hammer.svg"]],null,null,null,null,null)),(e()(),eo(109,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/pickaxe.svg"]],null,null,null,null,null)),(e()(),eo(110,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/pie.svg"]],null,null,null,null,null)),(e()(),eo(111,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/shovel.svg"]],null,null,null,null,null)),(e()(),eo(112,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/spear.svg"]],null,null,null,null,null)),(e()(),eo(113,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/sword.svg"]],null,null,null,null,null)),(e()(),eo(114,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/tin.svg"]],null,null,null,null,null)),(e()(),eo(115,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/tin_ore.svg"]],null,null,null,null,null)),(e()(),eo(116,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/vegetable_soup.svg"]],null,null,null,null,null)),(e()(),eo(117,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/wheat.svg"]],null,null,null,null,null)),(e()(),eo(118,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/wine.svg"]],null,null,null,null,null)),(e()(),eo(119,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/wooden_shield.svg"]],null,null,null,null,null)),(e()(),eo(120,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/wool.svg"]],null,null,null,null,null)),(e()(),eo(121,0,null,null,2,"div",[["id","header"]],null,null,null,null,null)),(e()(),eo(122,0,null,null,1,"app-header",[],null,null,null,iL,XM)),vi(123,114688,null,0,qM,[FP,Vf,$f,qf,am,Fb,zf,Jf,Zw,Xf,jy,fb,xy],null,null),(e()(),eo(124,0,null,null,2,"div",[["id","left-menu"]],null,null,null,null,null)),(e()(),eo(125,0,null,null,1,"app-left-menu",[],null,null,null,yL,oL)),vi(126,114688,null,0,rL,[Jf,jd],null,null),(e()(),eo(127,0,null,null,3,"div",[["id","center"]],null,null,null,null,null)),(e()(),eo(128,0,null,null,2,"div",[["id","screen"]],null,null,null,null,null)),(e()(),eo(129,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),vi(130,212992,null,0,eg,[Jd,Gt,ut,[8,null],kt],null,null),(e()(),eo(131,0,null,null,2,"div",[["id","right-menu"]],null,null,null,null,null)),(e()(),eo(132,0,null,null,1,"app-log",[],null,null,null,_L,bL)),vi(133,114688,null,0,RL,[$f,kt,qf],null,null),(e()(),eo(134,0,null,null,2,"div",[["id","footer"]],null,null,null,null,null)),(e()(),eo(135,0,null,null,1,"app-footer",[],null,null,null,LL,PL)),vi(136,114688,null,0,wL,[Jf,Zw,zf],null,null)],function(e,n){e(n,123,0),e(n,126,0),e(n,130,0),e(n,133,0),e(n,136,0)},null)}var GL=rl({encapsulation:0,styles:[["#IEwrapper[_ngcontent-%COMP%]{border:1px solid #000;background:#919191;font-size:3em;height:100%;max-height:100%;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center}#IEwrapper[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center}"]],data:{}});function BL(e){return So(0,[(e()(),eo(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),eo(1,0,null,null,1,"app-modals",[],null,null,null,KM,YM)),vi(2,114688,null,0,zM,[],null,null),(e()(),eo(3,0,null,null,1,"app-game",[],null,[["window","beforeunload"],["document","keydown"]],function(e,n,t){var l=!0;return"window:beforeunload"===n&&(l=!1!==ii(e,4).exitSave(t)&&l),"document:keydown"===n&&(l=!1!==ii(e,4).pause(t)&&l),l},HL,UL)),vi(4,114688,null,0,FL,[Jf,Qu,zf,Zw,FP,am,jy,$f,f_,NN,$R,GA,sN,xy,kE,Py,jd],null,null)],function(e,n){e(n,2,0),e(n,4,0)},null)}function VL(e){return So(0,[(e()(),eo(0,0,null,null,7,null,null,null,null,null,null,null)),(e()(),eo(1,0,null,null,6,"div",[["id","IEwrapper"]],null,null,null,null,null)),(e()(),eo(2,0,null,null,5,"span",[],null,null,null,null,null)),(e()(),fo(-1,null,["Internet Explorer is not supported."])),(e()(),eo(4,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),fo(-1,null,["Please use Firefox, Chrome, Safari"])),(e()(),eo(6,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),fo(-1,null,["or Edge."]))],null,null)}function WL(e){return So(0,[(e()(),Jr(16777216,null,null,1,null,BL)),vi(1,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null),(e()(),Jr(16777216,null,null,1,null,VL)),vi(3,16384,null,0,la,[Gt,Ut],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,!t.isIE()),e(n,3,0,t.isIE())},null)}function zL(e){return So(0,[(e()(),eo(0,0,null,null,1,"app-root",[],null,[["document","contextmenu"]],function(e,n,t){var l=!0;return"document:contextmenu"===n&&(l=!1!==ii(e,1).catchContextMenu(t)&&l),l},WL,GL)),vi(1,49152,null,0,xs,[],null,null)],null,null)}var YL=jl("app-root",xs,zL,{},{},[]),KL=function(){return function(){}}(),jL=function(){return function(){}}(),$L="*";function QL(e,n){return void 0===n&&(n=null),{type:2,steps:e,options:n}}function qL(e){return{type:6,styles:e,offset:null}}function XL(e){Promise.resolve(null).then(e)}var ZL=function(){function e(e,n){void 0===e&&(e=0),void 0===n&&(n=0),this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=e+n}return e.prototype._onFinish=function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(e){return e()}),this._onDoneFns=[])},e.prototype.onStart=function(e){this._onStartFns.push(e)},e.prototype.onDone=function(e){this._onDoneFns.push(e)},e.prototype.onDestroy=function(e){this._onDestroyFns.push(e)},e.prototype.hasStarted=function(){return this._started},e.prototype.init=function(){},e.prototype.play=function(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0},e.prototype.triggerMicrotask=function(){var e=this;XL(function(){return e._onFinish()})},e.prototype._onStart=function(){this._onStartFns.forEach(function(e){return e()}),this._onStartFns=[]},e.prototype.pause=function(){},e.prototype.restart=function(){},e.prototype.finish=function(){this._onFinish()},e.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(function(e){return e()}),this._onDestroyFns=[])},e.prototype.reset=function(){},e.prototype.setPosition=function(e){},e.prototype.getPosition=function(){return 0},e.prototype.triggerCallback=function(e){var n="start"==e?this._onStartFns:this._onDoneFns;n.forEach(function(e){return e()}),n.length=0},e}(),JL=function(){function e(e){var n=this;this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;var t=0,l=0,i=0,r=this.players.length;0==r?XL(function(){return n._onFinish()}):this.players.forEach(function(e){e.onDone(function(){++t==r&&n._onFinish()}),e.onDestroy(function(){++l==r&&n._onDestroy()}),e.onStart(function(){++i==r&&n._onStart()})}),this.totalTime=this.players.reduce(function(e,n){return Math.max(e,n.totalTime)},0)}return e.prototype._onFinish=function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(e){return e()}),this._onDoneFns=[])},e.prototype.init=function(){this.players.forEach(function(e){return e.init()})},e.prototype.onStart=function(e){this._onStartFns.push(e)},e.prototype._onStart=function(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(function(e){return e()}),this._onStartFns=[])},e.prototype.onDone=function(e){this._onDoneFns.push(e)},e.prototype.onDestroy=function(e){this._onDestroyFns.push(e)},e.prototype.hasStarted=function(){return this._started},e.prototype.play=function(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(function(e){return e.play()})},e.prototype.pause=function(){this.players.forEach(function(e){return e.pause()})},e.prototype.restart=function(){this.players.forEach(function(e){return e.restart()})},e.prototype.finish=function(){this._onFinish(),this.players.forEach(function(e){return e.finish()})},e.prototype.destroy=function(){this._onDestroy()},e.prototype._onDestroy=function(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(function(e){return e.destroy()}),this._onDestroyFns.forEach(function(e){return e()}),this._onDestroyFns=[])},e.prototype.reset=function(){this.players.forEach(function(e){return e.reset()}),this._destroyed=!1,this._finished=!1,this._started=!1},e.prototype.setPosition=function(e){var n=e*this.totalTime;this.players.forEach(function(e){var t=e.totalTime?Math.min(1,n/e.totalTime):1;e.setPosition(t)})},e.prototype.getPosition=function(){var e=0;return this.players.forEach(function(n){var t=n.getPosition();e=Math.min(t,e)}),e},e.prototype.beforeDestroy=function(){this.players.forEach(function(e){e.beforeDestroy&&e.beforeDestroy()})},e.prototype.triggerCallback=function(e){var n="start"==e?this._onStartFns:this._onDoneFns;n.forEach(function(e){return e()}),n.length=0},e}(),eF="!";function nF(){return"undefined"!=typeof process}function tF(e){switch(e.length){case 0:return new ZL;case 1:return e[0];default:return new JL(e)}}function lF(e,n,t,l,i,r){void 0===i&&(i={}),void 0===r&&(r={});var o=[],u=[],s=-1,a=null;if(l.forEach(function(e){var t=e.offset,l=t==s,c=l&&a||{};Object.keys(e).forEach(function(t){var l=t,u=e[t];if("offset"!==t)switch(l=n.normalizePropertyName(l,o),u){case eF:u=i[t];break;case $L:u=r[t];break;default:u=n.normalizeStyleValue(t,l,u,o)}c[l]=u}),l||u.push(c),a=c,s=t}),o.length)throw new Error("Unable to animate due to the following errors:\n - "+o.join("\n - "));return u}function iF(e,n,t,l){switch(n){case"start":e.onStart(function(){return l(t&&rF(t,"start",e))});break;case"done":e.onDone(function(){return l(t&&rF(t,"done",e))});break;case"destroy":e.onDestroy(function(){return l(t&&rF(t,"destroy",e))})}}function rF(e,n,t){var l=t.totalTime,i=oF(e.element,e.triggerName,e.fromState,e.toState,n||e.phaseName,null==l?e.totalTime:l,!!t.disabled),r=e._data;return null!=r&&(i._data=r),i}function oF(e,n,t,l,i,r,o){return void 0===i&&(i=""),void 0===r&&(r=0),{element:e,triggerName:n,fromState:t,toState:l,phaseName:i,totalTime:r,disabled:!!o}}function uF(e,n,t){var l;return e instanceof Map?(l=e.get(n))||e.set(n,l=t):(l=e[n])||(l=e[n]=t),l}function sF(e){var n=e.indexOf(":");return[e.substring(1,n),e.substr(n+1)]}var aF=function(e,n){return!1},cF=function(e,n){return!1},pF=function(e,n,t){return[]},hF=nF();(hF||"undefined"!=typeof Element)&&(aF=function(e,n){return e.contains(n)},cF=function(){if(hF||Element.prototype.matches)return function(e,n){return e.matches(n)};var e=Element.prototype,n=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;return n?function(e,t){return n.apply(e,[t])}:cF}(),pF=function(e,n,t){var l=[];if(t)l.push.apply(l,c(e.querySelectorAll(n)));else{var i=e.querySelector(n);i&&l.push(i)}return l});var dF=null,gF=!1,fF=cF,mF=aF,vF=pF,SF=function(){function e(){}return e.prototype.validateStyleProperty=function(e){return function(e){dF||(dF=("undefined"!=typeof document?document.body:null)||{},gF=!!dF.style&&"WebkitAppearance"in dF.style);var n=!0;return dF.style&&!function(e){return"ebkit"==e.substring(1,6)}(e)&&!(n=e in dF.style)&&gF&&(n="Webkit"+e.charAt(0).toUpperCase()+e.substr(1)in dF.style),n}(e)},e.prototype.matchesElement=function(e,n){return fF(e,n)},e.prototype.containsElement=function(e,n){return mF(e,n)},e.prototype.query=function(e,n,t){return vF(e,n,t)},e.prototype.computeStyle=function(e,n,t){return t||""},e.prototype.animate=function(e,n,t,l,i,r,o){return void 0===r&&(r=[]),new ZL(t,l)},e}(),EF=function(){function e(){}return e.NOOP=new SF,e}(),yF=1e3;function RF(e){if("number"==typeof e)return e;var n=e.match(/^(-?[\.\d]+)(m?s)/);return!n||n.length<2?0:bF(parseFloat(n[1]),n[2])}function bF(e,n){switch(n){case"s":return e*yF;default:return e}}function OF(e,n,t){return e.hasOwnProperty("duration")?e:function(e,n,t){var l,i=0,r="";if("string"==typeof e){var o=e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===o)return n.push('The provided timing value "'+e+'" is invalid.'),{duration:0,delay:0,easing:""};l=bF(parseFloat(o[1]),o[2]);var u=o[3];null!=u&&(i=bF(parseFloat(u),o[4]));var s=o[5];s&&(r=s)}else l=e;if(!t){var a=!1,c=n.length;l<0&&(n.push("Duration values below 0 are not allowed for this animation step."),a=!0),i<0&&(n.push("Delay values below 0 are not allowed for this animation step."),a=!0),a&&n.splice(c,0,'The provided timing value "'+e+'" is invalid.')}return{duration:l,delay:i,easing:r}}(e,n,t)}function TF(e,n){return void 0===n&&(n={}),Object.keys(e).forEach(function(t){n[t]=e[t]}),n}function CF(e,n,t){if(void 0===t&&(t={}),n)for(var l in e)t[l]=e[l];else TF(e,t);return t}function IF(e,n,t){return t?n+":"+t+";":""}function AF(e){for(var n="",t=0;t<e.style.length;t++)n+=IF(0,l=e.style.item(t),e.style.getPropertyValue(l));for(var l in e.style)e.style.hasOwnProperty(l)&&!l.startsWith("_")&&(n+=IF(0,l.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),e.style[l]));e.setAttribute("style",n)}function NF(e,n,t){e.style&&(Object.keys(n).forEach(function(l){var i=LF(l);t&&!t.hasOwnProperty(l)&&(t[l]=e.style[i]),e.style[i]=n[l]}),nF()&&AF(e))}function _F(e,n){e.style&&(Object.keys(n).forEach(function(n){var t=LF(n);e.style[t]=""}),nF()&&AF(e))}function wF(e){return Array.isArray(e)?1==e.length?e[0]:QL(e):e}var PF=new RegExp("{{\\s*(.+?)\\s*}}","g");function xF(e){var n=[];if("string"==typeof e){for(var t=e.toString(),l=void 0;l=PF.exec(t);)n.push(l[1]);PF.lastIndex=0}return n}function kF(e,n,t){var l=e.toString(),i=l.replace(PF,function(e,l){var i=n[l];return n.hasOwnProperty(l)||(t.push("Please provide a value for the animation param "+l),i=""),i.toString()});return i==l?e:i}function MF(e){for(var n=[],t=e.next();!t.done;)n.push(t.value),t=e.next();return n}var DF=/-+([a-z0-9])/g;function LF(e){return e.replace(DF,function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e[1].toUpperCase()})}function FF(e,n,t){switch(n.type){case 7:return e.visitTrigger(n,t);case 0:return e.visitState(n,t);case 1:return e.visitTransition(n,t);case 2:return e.visitSequence(n,t);case 3:return e.visitGroup(n,t);case 4:return e.visitAnimate(n,t);case 5:return e.visitKeyframes(n,t);case 6:return e.visitStyle(n,t);case 8:return e.visitReference(n,t);case 9:return e.visitAnimateChild(n,t);case 10:return e.visitAnimateRef(n,t);case 11:return e.visitQuery(n,t);case 12:return e.visitStagger(n,t);default:throw new Error("Unable to resolve animation metadata node #"+n.type)}}var UF="*",HF=new Set(["true","1"]),GF=new Set(["false","0"]);function BF(e,n){var t=HF.has(e)||GF.has(e),l=HF.has(n)||GF.has(n);return function(i,r){var o=e==UF||e==i,u=n==UF||n==r;return!o&&t&&"boolean"==typeof i&&(o=i?HF.has(e):GF.has(e)),!u&&l&&"boolean"==typeof r&&(u=r?HF.has(n):GF.has(n)),o&&u}}var VF=new RegExp("s*:selfs*,?","g");function WF(e,n,t){return new zF(e).build(n,t)}var zF=function(){function e(e){this._driver=e}return e.prototype.build=function(e,n){var t=new YF(n);return this._resetContextStyleTimingState(t),FF(this,wF(e),t)},e.prototype._resetContextStyleTimingState=function(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0},e.prototype.visitTrigger=function(e,n){var t=this,l=n.queryCount=0,i=n.depCount=0,r=[],o=[];return"@"==e.name.charAt(0)&&n.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(function(e){if(t._resetContextStyleTimingState(n),0==e.type){var u=e,s=u.name;s.toString().split(/\s*,\s*/).forEach(function(e){u.name=e,r.push(t.visitState(u,n))}),u.name=s}else if(1==e.type){var a=t.visitTransition(e,n);l+=a.queryCount,i+=a.depCount,o.push(a)}else n.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:r,transitions:o,queryCount:l,depCount:i,options:null}},e.prototype.visitState=function(e,n){var t=this.visitStyle(e.styles,n),l=e.options&&e.options.params||null;if(t.containsDynamicStyles){var i=new Set,r=l||{};if(t.styles.forEach(function(e){if(KF(e)){var n=e;Object.keys(n).forEach(function(e){xF(n[e]).forEach(function(e){r.hasOwnProperty(e)||i.add(e)})})}}),i.size){var o=MF(i.values());n.errors.push('state("'+e.name+'", ...) must define default values for all the following style substitutions: '+o.join(", "))}}return{type:0,name:e.name,style:t,options:l?{params:l}:null}},e.prototype.visitTransition=function(e,n){n.queryCount=0,n.depCount=0;var t,l,i,r=FF(this,wF(e.animation),n);return{type:1,matchers:(t=e.expr,l=n.errors,i=[],"string"==typeof t?t.split(/\s*,\s*/).forEach(function(e){return function(e,n,t){if(":"==e[0]){var l=function(e,n){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return function(e,n){return parseFloat(n)>parseFloat(e)};case":decrement":return function(e,n){return parseFloat(n)<parseFloat(e)};default:return n.push('The transition alias value "'+e+'" is not supported'),"* => *"}}(e,t);if("function"==typeof l)return void n.push(l);e=l}var i=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push('The provided transition expression "'+e+'" is not supported'),n;var r=i[1],o=i[2],u=i[3];n.push(BF(r,u)),"<"!=o[0]||r==UF&&u==UF||n.push(BF(u,r))}(e,i,l)}):i.push(t),i),animation:r,queryCount:n.queryCount,depCount:n.depCount,options:jF(e.options)}},e.prototype.visitSequence=function(e,n){var t=this;return{type:2,steps:e.steps.map(function(e){return FF(t,e,n)}),options:jF(e.options)}},e.prototype.visitGroup=function(e,n){var t=this,l=n.currentTime,i=0,r=e.steps.map(function(e){n.currentTime=l;var r=FF(t,e,n);return i=Math.max(i,n.currentTime),r});return n.currentTime=i,{type:3,steps:r,options:jF(e.options)}},e.prototype.visitAnimate=function(e,n){var t,l=function(e,n){var t=null;if(e.hasOwnProperty("duration"))t=e;else if("number"==typeof e)return $F(OF(e,n).duration,0,"");var l=e;if(l.split(/\s+/).some(function(e){return"{"==e.charAt(0)&&"{"==e.charAt(1)})){var i=$F(0,0,"");return i.dynamic=!0,i.strValue=l,i}return $F((t=t||OF(l,n)).duration,t.delay,t.easing)}(e.timings,n.errors);n.currentAnimateTimings=l;var i=e.styles?e.styles:qL({});if(5==i.type)t=this.visitKeyframes(i,n);else{var r=e.styles,o=!1;if(!r){o=!0;var u={};l.easing&&(u.easing=l.easing),r=qL(u)}n.currentTime+=l.duration+l.delay;var s=this.visitStyle(r,n);s.isEmptyStep=o,t=s}return n.currentAnimateTimings=null,{type:4,timings:l,style:t,options:null}},e.prototype.visitStyle=function(e,n){var t=this._makeStyleAst(e,n);return this._validateStyleAst(t,n),t},e.prototype._makeStyleAst=function(e,n){var t=[];Array.isArray(e.styles)?e.styles.forEach(function(e){"string"==typeof e?e==$L?t.push(e):n.errors.push("The provided style string value "+e+" is not allowed."):t.push(e)}):t.push(e.styles);var l=!1,i=null;return t.forEach(function(e){if(KF(e)){var n=e,t=n.easing;if(t&&(i=t,delete n.easing),!l)for(var r in n)if(n[r].toString().indexOf("{{")>=0){l=!0;break}}}),{type:6,styles:t,easing:i,offset:e.offset,containsDynamicStyles:l,options:null}},e.prototype._validateStyleAst=function(e,n){var t=this,l=n.currentAnimateTimings,i=n.currentTime,r=n.currentTime;l&&r>0&&(r-=l.duration+l.delay),e.styles.forEach(function(e){"string"!=typeof e&&Object.keys(e).forEach(function(l){if(t._driver.validateStyleProperty(l)){var o,u,s,a=n.collectedStyles[n.currentQuerySelector],c=a[l],p=!0;c&&(r!=i&&r>=c.startTime&&i<=c.endTime&&(n.errors.push('The CSS property "'+l+'" that exists between the times of "'+c.startTime+'ms" and "'+c.endTime+'ms" is also being animated in a parallel animation between the times of "'+r+'ms" and "'+i+'ms"'),p=!1),r=c.startTime),p&&(a[l]={startTime:r,endTime:i}),n.options&&(o=n.errors,u=n.options.params||{},(s=xF(e[l])).length&&s.forEach(function(e){u.hasOwnProperty(e)||o.push("Unable to resolve the local animation param "+e+" in the given list of values")}))}else n.errors.push('The provided animation property "'+l+'" is not a supported CSS property for animations')})})},e.prototype.visitKeyframes=function(e,n){var t=this,l={type:5,styles:[],options:null};if(!n.currentAnimateTimings)return n.errors.push("keyframes() must be placed inside of a call to animate()"),l;var i=0,r=[],o=!1,u=!1,s=0,a=e.steps.map(function(e){var l=t._makeStyleAst(e,n),a=null!=l.offset?l.offset:function(e){if("string"==typeof e)return null;var n=null;if(Array.isArray(e))e.forEach(function(e){if(KF(e)&&e.hasOwnProperty("offset")){var t=e;n=parseFloat(t.offset),delete t.offset}});else if(KF(e)&&e.hasOwnProperty("offset")){var t=e;n=parseFloat(t.offset),delete t.offset}return n}(l.styles),c=0;return null!=a&&(i++,c=l.offset=a),u=u||c<0||c>1,o=o||c<s,s=c,r.push(c),l});u&&n.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),o&&n.errors.push("Please ensure that all keyframe offsets are in order");var c=e.steps.length,p=0;i>0&&i<c?n.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==i&&(p=1/(c-1));var h=c-1,d=n.currentTime,g=n.currentAnimateTimings,f=g.duration;return a.forEach(function(e,i){var o=p>0?i==h?1:p*i:r[i],u=o*f;n.currentTime=d+g.delay+u,g.duration=u,t._validateStyleAst(e,n),e.offset=o,l.styles.push(e)}),l},e.prototype.visitReference=function(e,n){return{type:8,animation:FF(this,wF(e.animation),n),options:jF(e.options)}},e.prototype.visitAnimateChild=function(e,n){return n.depCount++,{type:9,options:jF(e.options)}},e.prototype.visitAnimateRef=function(e,n){return{type:10,animation:this.visitReference(e.animation,n),options:jF(e.options)}},e.prototype.visitQuery=function(e,n){var t=n.currentQuerySelector,l=e.options||{};n.queryCount++,n.currentQuery=e;var i=a(function(e){var n=!!e.split(/\s*,\s*/).find(function(e){return":self"==e});return n&&(e=e.replace(VF,"")),[e=e.replace(/@\*/g,".ng-trigger").replace(/@\w+/g,function(e){return".ng-trigger-"+e.substr(1)}).replace(/:animating/g,".ng-animating"),n]}(e.selector),2),r=i[0],o=i[1];n.currentQuerySelector=t.length?t+" "+r:r,uF(n.collectedStyles,n.currentQuerySelector,{});var u=FF(this,wF(e.animation),n);return n.currentQuery=null,n.currentQuerySelector=t,{type:11,selector:r,limit:l.limit||0,optional:!!l.optional,includeSelf:o,animation:u,originalSelector:e.selector,options:jF(e.options)}},e.prototype.visitStagger=function(e,n){n.currentQuery||n.errors.push("stagger() can only be used inside of query()");var t="full"===e.timings?{duration:0,delay:0,easing:"full"}:OF(e.timings,n.errors,!0);return{type:12,animation:FF(this,wF(e.animation),n),timings:t,options:null}},e}(),YF=function(){return function(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}();function KF(e){return!Array.isArray(e)&&"object"==typeof e}function jF(e){var n;return e?(e=TF(e)).params&&(e.params=(n=e.params)?TF(n):null):e={},e}function $F(e,n,t){return{duration:e,delay:n,easing:t}}function QF(e,n,t,l,i,r,o,u){return void 0===o&&(o=null),void 0===u&&(u=!1),{type:1,element:e,keyframes:n,preStyleProps:t,postStyleProps:l,duration:i,delay:r,totalTime:i+r,easing:o,subTimeline:u}}var qF=function(){function e(){this._map=new Map}return e.prototype.consume=function(e){var n=this._map.get(e);return n?this._map.delete(e):n=[],n},e.prototype.append=function(e,n){var t=this._map.get(e);t||this._map.set(e,t=[]),t.push.apply(t,c(n))},e.prototype.has=function(e){return this._map.has(e)},e.prototype.clear=function(){this._map.clear()},e}(),XF=new RegExp(":enter","g"),ZF=new RegExp(":leave","g");function JF(e,n,t,l,i,r,o,u,s,a){return void 0===r&&(r={}),void 0===o&&(o={}),void 0===a&&(a=[]),(new eU).buildKeyframes(e,n,t,l,i,r,o,u,s,a)}var eU=function(){function e(){}return e.prototype.buildKeyframes=function(e,n,t,l,i,r,o,u,s,a){void 0===a&&(a=[]),s=s||new qF;var c=new tU(e,n,s,l,i,a,[]);c.options=u,c.currentTimeline.setStyles([r],null,c.errors,u),FF(this,t,c);var p=c.timelines.filter(function(e){return e.containsAnimation()});if(p.length&&Object.keys(o).length){var h=p[p.length-1];h.allowOnlyTimelineStyles()||h.setStyles([o],null,c.errors,u)}return p.length?p.map(function(e){return e.buildKeyframes()}):[QF(n,[],[],[],0,0,"",!1)]},e.prototype.visitTrigger=function(e,n){},e.prototype.visitState=function(e,n){},e.prototype.visitTransition=function(e,n){},e.prototype.visitAnimateChild=function(e,n){var t=n.subInstructions.consume(n.element);if(t){var l=n.createSubContext(e.options),i=n.currentTimeline.currentTime,r=this._visitSubInstructions(t,l,l.options);i!=r&&n.transformIntoNewTimeline(r)}n.previousNode=e},e.prototype.visitAnimateRef=function(e,n){var t=n.createSubContext(e.options);t.transformIntoNewTimeline(),this.visitReference(e.animation,t),n.transformIntoNewTimeline(t.currentTimeline.currentTime),n.previousNode=e},e.prototype._visitSubInstructions=function(e,n,t){var l=n.currentTimeline.currentTime,i=null!=t.duration?RF(t.duration):null,r=null!=t.delay?RF(t.delay):null;return 0!==i&&e.forEach(function(e){var t=n.appendInstructionToTimeline(e,i,r);l=Math.max(l,t.duration+t.delay)}),l},e.prototype.visitReference=function(e,n){n.updateOptions(e.options,!0),FF(this,e.animation,n),n.previousNode=e},e.prototype.visitSequence=function(e,n){var t=this,l=n.subContextCount,i=n,r=e.options;if(r&&(r.params||r.delay)&&((i=n.createSubContext(r)).transformIntoNewTimeline(),null!=r.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=nU);var o=RF(r.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(function(e){return FF(t,e,i)}),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>l&&i.transformIntoNewTimeline()),n.previousNode=e},e.prototype.visitGroup=function(e,n){var t=this,l=[],i=n.currentTimeline.currentTime,r=e.options&&e.options.delay?RF(e.options.delay):0;e.steps.forEach(function(o){var u=n.createSubContext(e.options);r&&u.delayNextStep(r),FF(t,o,u),i=Math.max(i,u.currentTimeline.currentTime),l.push(u.currentTimeline)}),l.forEach(function(e){return n.currentTimeline.mergeTimelineCollectedStyles(e)}),n.transformIntoNewTimeline(i),n.previousNode=e},e.prototype._visitTiming=function(e,n){if(e.dynamic){var t=e.strValue;return OF(n.params?kF(t,n.params,n.errors):t,n.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}},e.prototype.visitAnimate=function(e,n){var t=n.currentAnimateTimings=this._visitTiming(e.timings,n),l=n.currentTimeline;t.delay&&(n.incrementTime(t.delay),l.snapshotCurrentStyles());var i=e.style;5==i.type?this.visitKeyframes(i,n):(n.incrementTime(t.duration),this.visitStyle(i,n),l.applyStylesToKeyframe()),n.currentAnimateTimings=null,n.previousNode=e},e.prototype.visitStyle=function(e,n){var t=n.currentTimeline,l=n.currentAnimateTimings;!l&&t.getCurrentStyleProperties().length&&t.forwardFrame();var i=l&&l.easing||e.easing;e.isEmptyStep?t.applyEmptyStep(i):t.setStyles(e.styles,i,n.errors,n.options),n.previousNode=e},e.prototype.visitKeyframes=function(e,n){var t=n.currentAnimateTimings,l=n.currentTimeline.duration,i=t.duration,r=n.createSubContext().currentTimeline;r.easing=t.easing,e.styles.forEach(function(e){r.forwardTime((e.offset||0)*i),r.setStyles(e.styles,e.easing,n.errors,n.options),r.applyStylesToKeyframe()}),n.currentTimeline.mergeTimelineCollectedStyles(r),n.transformIntoNewTimeline(l+i),n.previousNode=e},e.prototype.visitQuery=function(e,n){var t=this,l=n.currentTimeline.currentTime,i=e.options||{},r=i.delay?RF(i.delay):0;r&&(6===n.previousNode.type||0==l&&n.currentTimeline.getCurrentStyleProperties().length)&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=nU);var o=l,u=n.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,n.errors);n.currentQueryTotal=u.length;var s=null;u.forEach(function(l,i){n.currentQueryIndex=i;var u=n.createSubContext(e.options,l);r&&u.delayNextStep(r),l===n.element&&(s=u.currentTimeline),FF(t,e.animation,u),u.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,u.currentTimeline.currentTime)}),n.currentQueryIndex=0,n.currentQueryTotal=0,n.transformIntoNewTimeline(o),s&&(n.currentTimeline.mergeTimelineCollectedStyles(s),n.currentTimeline.snapshotCurrentStyles()),n.previousNode=e},e.prototype.visitStagger=function(e,n){var t=n.parentContext,l=n.currentTimeline,i=e.timings,r=Math.abs(i.duration),o=r*(n.currentQueryTotal-1),u=r*n.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":u=o-u;break;case"full":u=t.currentStaggerTime}var s=n.currentTimeline;u&&s.delayNextStep(u);var a=s.currentTime;FF(this,e.animation,n),n.previousNode=e,t.currentStaggerTime=l.currentTime-a+(l.startTime-t.currentTimeline.startTime)},e}(),nU={},tU=function(){function e(e,n,t,l,i,r,o,u){this._driver=e,this.element=n,this.subInstructions=t,this._enterClassName=l,this._leaveClassName=i,this.errors=r,this.timelines=o,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=nU,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=u||new lU(this._driver,n,0),o.push(this.currentTimeline)}return Object.defineProperty(e.prototype,"params",{get:function(){return this.options.params},enumerable:!0,configurable:!0}),e.prototype.updateOptions=function(e,n){var t=this;if(e){var l=e,i=this.options;null!=l.duration&&(i.duration=RF(l.duration)),null!=l.delay&&(i.delay=RF(l.delay));var r=l.params;if(r){var o=i.params;o||(o=this.options.params={}),Object.keys(r).forEach(function(e){n&&o.hasOwnProperty(e)||(o[e]=kF(r[e],o,t.errors))})}}},e.prototype._copyOptions=function(){var e={};if(this.options){var n=this.options.params;if(n){var t=e.params={};Object.keys(n).forEach(function(e){t[e]=n[e]})}}return e},e.prototype.createSubContext=function(n,t,l){void 0===n&&(n=null);var i=t||this.element,r=new e(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,l||0));return r.previousNode=this.previousNode,r.currentAnimateTimings=this.currentAnimateTimings,r.options=this._copyOptions(),r.updateOptions(n),r.currentQueryIndex=this.currentQueryIndex,r.currentQueryTotal=this.currentQueryTotal,r.parentContext=this,this.subContextCount++,r},e.prototype.transformIntoNewTimeline=function(e){return this.previousNode=nU,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline},e.prototype.appendInstructionToTimeline=function(e,n,t){var l={duration:null!=n?n:e.duration,delay:this.currentTimeline.currentTime+(null!=t?t:0)+e.delay,easing:""},i=new iU(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,l,e.stretchStartingKeyframe);return this.timelines.push(i),l},e.prototype.incrementTime=function(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)},e.prototype.delayNextStep=function(e){e>0&&this.currentTimeline.delayNextStep(e)},e.prototype.invokeQuery=function(e,n,t,l,i,r){var o=[];if(l&&o.push(this.element),e.length>0){e=(e=e.replace(XF,"."+this._enterClassName)).replace(ZF,"."+this._leaveClassName);var u=this._driver.query(this.element,e,1!=t);0!==t&&(u=t<0?u.slice(u.length+t,u.length):u.slice(0,t)),o.push.apply(o,c(u))}return i||0!=o.length||r.push('`query("'+n+'")` returned zero elements. (Use `query("'+n+'", { optional: true })` if you wish to allow this.)'),o},e}(),lU=function(){function e(e,n,t,l){this._driver=e,this.element=n,this.startTime=t,this._elementTimelineStylesLookup=l,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}return e.prototype.containsAnimation=function(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}},e.prototype.getCurrentStyleProperties=function(){return Object.keys(this._currentKeyframe)},Object.defineProperty(e.prototype,"currentTime",{get:function(){return this.startTime+this.duration},enumerable:!0,configurable:!0}),e.prototype.delayNextStep=function(e){var n=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||n?(this.forwardTime(this.currentTime+e),n&&this.snapshotCurrentStyles()):this.startTime+=e},e.prototype.fork=function(n,t){return this.applyStylesToKeyframe(),new e(this._driver,n,t||this.currentTime,this._elementTimelineStylesLookup)},e.prototype._loadKeyframe=function(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))},e.prototype.forwardFrame=function(){this.duration+=1,this._loadKeyframe()},e.prototype.forwardTime=function(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()},e.prototype._updateStyle=function(e,n){this._localTimelineStyles[e]=n,this._globalTimelineStyles[e]=n,this._styleSummary[e]={time:this.currentTime,value:n}},e.prototype.allowOnlyTimelineStyles=function(){return this._currentEmptyStepKeyframe!==this._currentKeyframe},e.prototype.applyEmptyStep=function(e){var n=this;e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(function(e){n._backFill[e]=n._globalTimelineStyles[e]||$L,n._currentKeyframe[e]=$L}),this._currentEmptyStepKeyframe=this._currentKeyframe},e.prototype.setStyles=function(e,n,t,l){var i=this;n&&(this._previousKeyframe.easing=n);var r=l&&l.params||{},o=function(e,n){var t,l={};return e.forEach(function(e){"*"===e?(t=t||Object.keys(n)).forEach(function(e){l[e]=$L}):CF(e,!1,l)}),l}(e,this._globalTimelineStyles);Object.keys(o).forEach(function(e){var n=kF(o[e],r,t);i._pendingStyles[e]=n,i._localTimelineStyles.hasOwnProperty(e)||(i._backFill[e]=i._globalTimelineStyles.hasOwnProperty(e)?i._globalTimelineStyles[e]:$L),i._updateStyle(e,n)})},e.prototype.applyStylesToKeyframe=function(){var e=this,n=this._pendingStyles,t=Object.keys(n);0!=t.length&&(this._pendingStyles={},t.forEach(function(t){e._currentKeyframe[t]=n[t]}),Object.keys(this._localTimelineStyles).forEach(function(n){e._currentKeyframe.hasOwnProperty(n)||(e._currentKeyframe[n]=e._localTimelineStyles[n])}))},e.prototype.snapshotCurrentStyles=function(){var e=this;Object.keys(this._localTimelineStyles).forEach(function(n){var t=e._localTimelineStyles[n];e._pendingStyles[n]=t,e._updateStyle(n,t)})},e.prototype.getFinalKeyframe=function(){return this._keyframes.get(this.duration)},Object.defineProperty(e.prototype,"properties",{get:function(){var e=[];for(var n in this._currentKeyframe)e.push(n);return e},enumerable:!0,configurable:!0}),e.prototype.mergeTimelineCollectedStyles=function(e){var n=this;Object.keys(e._styleSummary).forEach(function(t){var l=n._styleSummary[t],i=e._styleSummary[t];(!l||i.time>l.time)&&n._updateStyle(t,i.value)})},e.prototype.buildKeyframes=function(){var e=this;this.applyStylesToKeyframe();var n=new Set,t=new Set,l=1===this._keyframes.size&&0===this.duration,i=[];this._keyframes.forEach(function(r,o){var u=CF(r,!0);Object.keys(u).forEach(function(e){var l=u[e];l==eF?n.add(e):l==$L&&t.add(e)}),l||(u.offset=o/e.duration),i.push(u)});var r=n.size?MF(n.values()):[],o=t.size?MF(t.values()):[];if(l){var u=i[0],s=TF(u);u.offset=0,s.offset=1,i=[u,s]}return QF(this.element,i,r,o,this.duration,this.startTime,this.easing,!1)},e}(),iU=function(e){function n(n,t,l,i,r,o,u){void 0===u&&(u=!1);var s=e.call(this,n,t,o.delay)||this;return s.element=t,s.keyframes=l,s.preStyleProps=i,s.postStyleProps=r,s._stretchStartingKeyframe=u,s.timings={duration:o.duration,delay:o.delay,easing:o.easing},s}return i(n,e),n.prototype.containsAnimation=function(){return this.keyframes.length>1},n.prototype.buildKeyframes=function(){var e=this.keyframes,n=this.timings,t=n.delay,l=n.duration,i=n.easing;if(this._stretchStartingKeyframe&&t){var r=[],o=l+t,u=t/o,s=CF(e[0],!1);s.offset=0,r.push(s);var a=CF(e[0],!1);a.offset=rU(u),r.push(a);for(var c=e.length-1,p=1;p<=c;p++){var h=CF(e[p],!1);h.offset=rU((t+h.offset*l)/o),r.push(h)}l=o,t=0,i="",e=r}return QF(this.element,e,this.preStyleProps,this.postStyleProps,l,t,i,!0)},n}(lU);function rU(e,n){void 0===n&&(n=3);var t=Math.pow(10,n-1);return Math.round(e*t)/t}var oU=function(){return function(){}}(),uU=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return i(n,e),n.prototype.normalizePropertyName=function(e,n){return LF(e)},n.prototype.normalizeStyleValue=function(e,n,t,l){var i="",r=t.toString().trim();if(sU[n]&&0!==t&&"0"!==t)if("number"==typeof t)i="px";else{var o=t.match(/^[+-]?[\d\.]+([a-z]*)$/);o&&0==o[1].length&&l.push("Please provide a CSS unit value for "+e+":"+t)}return r+i},n}(oU),sU=function(){return e="width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(","),n={},e.forEach(function(e){return n[e]=!0}),n;var e,n}();function aU(e,n,t,l,i,r,o,u,s,a,c,p,h){return{type:0,element:e,triggerName:n,isRemovalTransition:i,fromState:t,fromStyles:r,toState:l,toStyles:o,timelines:u,queriedElements:s,preStyleProps:a,postStyleProps:c,totalTime:p,errors:h}}var cU={},pU=function(){function e(e,n,t){this._triggerName=e,this.ast=n,this._stateStyles=t}return e.prototype.match=function(e,n,t,l){return function(e,n,t,l,i){return e.some(function(e){return e(n,t,l,i)})}(this.ast.matchers,e,n,t,l)},e.prototype.buildStyles=function(e,n,t){var l=this._stateStyles["*"],i=this._stateStyles[e],r=l?l.buildStyles(n,t):{};return i?i.buildStyles(n,t):r},e.prototype.build=function(e,n,t,l,i,o,u,s,a,c){var p=[],h=this.ast.options&&this.ast.options.params||cU,d=this.buildStyles(t,u&&u.params||cU,p),g=s&&s.params||cU,f=this.buildStyles(l,g,p),m=new Set,v=new Map,S=new Map,E="void"===l,y={params:r({},h,g)},R=c?[]:JF(e,n,this.ast.animation,i,o,d,f,y,a,p),b=0;if(R.forEach(function(e){b=Math.max(e.duration+e.delay,b)}),p.length)return aU(n,this._triggerName,t,l,E,d,f,[],[],v,S,b,p);R.forEach(function(e){var t=e.element,l=uF(v,t,{});e.preStyleProps.forEach(function(e){return l[e]=!0});var i=uF(S,t,{});e.postStyleProps.forEach(function(e){return i[e]=!0}),t!==n&&m.add(t)});var O=MF(m.values());return aU(n,this._triggerName,t,l,E,d,f,R,O,v,S,b)},e}(),hU=function(){function e(e,n){this.styles=e,this.defaultParams=n}return e.prototype.buildStyles=function(e,n){var t={},l=TF(this.defaultParams);return Object.keys(e).forEach(function(n){var t=e[n];null!=t&&(l[n]=t)}),this.styles.styles.forEach(function(e){if("string"!=typeof e){var i=e;Object.keys(i).forEach(function(e){var r=i[e];r.length>1&&(r=kF(r,l,n)),t[e]=r})}}),t},e}(),dU=function(){function e(e,n){var t=this;this.name=e,this.ast=n,this.transitionFactories=[],this.states={},n.states.forEach(function(e){t.states[e.name]=new hU(e.style,e.options&&e.options.params||{})}),gU(this.states,"true","1"),gU(this.states,"false","0"),n.transitions.forEach(function(n){t.transitionFactories.push(new pU(e,n,t.states))}),this.fallbackTransition=new pU(e,{type:1,animation:{type:2,steps:[],options:null},matchers:[function(e,n){return!0}],options:null,queryCount:0,depCount:0},this.states)}return Object.defineProperty(e.prototype,"containsQueries",{get:function(){return this.ast.queryCount>0},enumerable:!0,configurable:!0}),e.prototype.matchTransition=function(e,n,t,l){return this.transitionFactories.find(function(i){return i.match(e,n,t,l)})||null},e.prototype.matchStyles=function(e,n,t){return this.fallbackTransition.buildStyles(e,n,t)},e}();function gU(e,n,t){e.hasOwnProperty(n)?e.hasOwnProperty(t)||(e[t]=e[n]):e.hasOwnProperty(t)&&(e[n]=e[t])}var fU=new qF,mU=function(){function e(e,n,t){this.bodyNode=e,this._driver=n,this._normalizer=t,this._animations={},this._playersById={},this.players=[]}return e.prototype.register=function(e,n){var t=[],l=WF(this._driver,n,t);if(t.length)throw new Error("Unable to build the animation due to the following errors: "+t.join("\n"));this._animations[e]=l},e.prototype._buildPlayer=function(e,n,t){var l=e.element,i=lF(0,this._normalizer,0,e.keyframes,n,t);return this._driver.animate(l,i,e.duration,e.delay,e.easing,[],!0)},e.prototype.create=function(e,n,t){var l=this;void 0===t&&(t={});var i,r=[],o=this._animations[e],u=new Map;if(o?(i=JF(this._driver,n,o,"ng-enter","ng-leave",{},{},t,fU,r)).forEach(function(e){var n=uF(u,e.element,{});e.postStyleProps.forEach(function(e){return n[e]=null})}):(r.push("The requested animation doesn't exist or has already been destroyed"),i=[]),r.length)throw new Error("Unable to create the animation due to the following errors: "+r.join("\n"));u.forEach(function(e,n){Object.keys(e).forEach(function(t){e[t]=l._driver.computeStyle(n,t,$L)})});var s=tF(i.map(function(e){var n=u.get(e.element);return l._buildPlayer(e,{},n)}));return this._playersById[e]=s,s.onDestroy(function(){return l.destroy(e)}),this.players.push(s),s},e.prototype.destroy=function(e){var n=this._getPlayer(e);n.destroy(),delete this._playersById[e];var t=this.players.indexOf(n);t>=0&&this.players.splice(t,1)},e.prototype._getPlayer=function(e){var n=this._playersById[e];if(!n)throw new Error("Unable to find the timeline player referenced by "+e);return n},e.prototype.listen=function(e,n,t,l){var i=oF(n,"","","");return iF(this._getPlayer(e),t,i,l),function(){}},e.prototype.command=function(e,n,t,l){if("register"!=t)if("create"!=t){var i=this._getPlayer(e);switch(t){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(l[0]));break;case"destroy":this.destroy(e)}}else this.create(e,n,l[0]||{});else this.register(e,l[0])},e}(),vU=[],SU={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},EU={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},yU="__ng_removed",RU=function(){function e(e,n){void 0===n&&(n=""),this.namespaceId=n;var t=e&&e.hasOwnProperty("value");if(this.value=function(e){return null!=e?e:null}(t?e.value:e),t){var l=TF(e);delete l.value,this.options=l}else this.options={};this.options.params||(this.options.params={})}return Object.defineProperty(e.prototype,"params",{get:function(){return this.options.params},enumerable:!0,configurable:!0}),e.prototype.absorbOptions=function(e){var n=e.params;if(n){var t=this.options.params;Object.keys(n).forEach(function(e){null==t[e]&&(t[e]=n[e])})}},e}(),bU=new RU("void"),OU=function(){function e(e,n,t){this.id=e,this.hostElement=n,this._engine=t,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,PU(n,this._hostClassName)}return e.prototype.listen=function(e,n,t,l){var i,r=this;if(!this._triggers.hasOwnProperty(n))throw new Error('Unable to listen on the animation trigger event "'+t+'" because the animation trigger "'+n+"\" doesn't exist!");if(null==t||0==t.length)throw new Error('Unable to listen on the animation trigger "'+n+'" because the provided event is undefined!');if("start"!=(i=t)&&"done"!=i)throw new Error('The provided animation trigger event "'+t+'" for the animation trigger "'+n+'" is not supported!');var o=uF(this._elementListeners,e,[]),u={name:n,phase:t,callback:l};o.push(u);var s=uF(this._engine.statesByElement,e,{});return s.hasOwnProperty(n)||(PU(e,"ng-trigger"),PU(e,"ng-trigger-"+n),s[n]=bU),function(){r._engine.afterFlush(function(){var e=o.indexOf(u);e>=0&&o.splice(e,1),r._triggers[n]||delete s[n]})}},e.prototype.register=function(e,n){return!this._triggers[e]&&(this._triggers[e]=n,!0)},e.prototype._getTrigger=function(e){var n=this._triggers[e];if(!n)throw new Error('The provided animation trigger "'+e+'" has not been registered!');return n},e.prototype.trigger=function(e,n,t,l){var i=this;void 0===l&&(l=!0);var r=this._getTrigger(n),o=new CU(this.id,n,e),u=this._engine.statesByElement.get(e);u||(PU(e,"ng-trigger"),PU(e,"ng-trigger-"+n),this._engine.statesByElement.set(e,u={}));var s=u[n],a=new RU(t,this.id);if(!(t&&t.hasOwnProperty("value"))&&s&&a.absorbOptions(s.options),u[n]=a,s||(s=bU),"void"===a.value||s.value!==a.value){var c=uF(this._engine.playersByElement,e,[]);c.forEach(function(e){e.namespaceId==i.id&&e.triggerName==n&&e.queued&&e.destroy()});var p=r.matchTransition(s.value,a.value,e,a.params),h=!1;if(!p){if(!l)return;p=r.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:n,transition:p,fromState:s,toState:a,player:o,isFallbackTransition:h}),h||(PU(e,"ng-animate-queued"),o.onStart(function(){xU(e,"ng-animate-queued")})),o.onDone(function(){var n=i.players.indexOf(o);n>=0&&i.players.splice(n,1);var t=i._engine.playersByElement.get(e);if(t){var l=t.indexOf(o);l>=0&&t.splice(l,1)}}),this.players.push(o),c.push(o),o}if(!function(e,n){var t=Object.keys(e),l=Object.keys(n);if(t.length!=l.length)return!1;for(var i=0;i<t.length;i++){var r=t[i];if(!n.hasOwnProperty(r)||e[r]!==n[r])return!1}return!0}(s.params,a.params)){var d=[],g=r.matchStyles(s.value,s.params,d),f=r.matchStyles(a.value,a.params,d);d.length?this._engine.reportError(d):this._engine.afterFlush(function(){_F(e,g),NF(e,f)})}},e.prototype.deregister=function(e){var n=this;delete this._triggers[e],this._engine.statesByElement.forEach(function(n,t){delete n[e]}),this._elementListeners.forEach(function(t,l){n._elementListeners.set(l,t.filter(function(n){return n.name!=e}))})},e.prototype.clearElementCache=function(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);var n=this._engine.playersByElement.get(e);n&&(n.forEach(function(e){return e.destroy()}),this._engine.playersByElement.delete(e))},e.prototype._signalRemovalForInnerTriggers=function(e,n,t){var l=this;void 0===t&&(t=!1),this._engine.driver.query(e,".ng-trigger",!0).forEach(function(e){if(!e[yU]){var t=l._engine.fetchNamespacesByElement(e);t.size?t.forEach(function(t){return t.triggerLeaveAnimation(e,n,!1,!0)}):l.clearElementCache(e)}})},e.prototype.triggerLeaveAnimation=function(e,n,t,l){var i=this,r=this._engine.statesByElement.get(e);if(r){var o=[];if(Object.keys(r).forEach(function(n){if(i._triggers[n]){var t=i.trigger(e,n,"void",l);t&&o.push(t)}}),o.length)return this._engine.markElementAsRemoved(this.id,e,!0,n),t&&tF(o).onDone(function(){return i._engine.processLeaveNode(e)}),!0}return!1},e.prototype.prepareLeaveAnimationListeners=function(e){var n=this,t=this._elementListeners.get(e);if(t){var l=new Set;t.forEach(function(t){var i=t.name;if(!l.has(i)){l.add(i);var r=n._triggers[i].fallbackTransition,o=n._engine.statesByElement.get(e)[i]||bU,u=new RU("void"),s=new CU(n.id,i,e);n._engine.totalQueuedPlayers++,n._queue.push({element:e,triggerName:i,transition:r,fromState:o,toState:u,player:s,isFallbackTransition:!0})}})}},e.prototype.removeNode=function(e,n){var t=this,l=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,n,!0),!this.triggerLeaveAnimation(e,n,!0)){var i=!1;if(l.totalAnimations){var r=l.players.length?l.playersByQueriedElement.get(e):[];if(r&&r.length)i=!0;else for(var o=e;o=o.parentNode;)if(l.statesByElement.get(o)){i=!0;break}}this.prepareLeaveAnimationListeners(e),i?l.markElementAsRemoved(this.id,e,!1,n):(l.afterFlush(function(){return t.clearElementCache(e)}),l.destroyInnerAnimations(e),l._onRemovalComplete(e,n))}},e.prototype.insertNode=function(e,n){PU(e,this._hostClassName)},e.prototype.drainQueuedTransitions=function(e){var n=this,t=[];return this._queue.forEach(function(l){var i=l.player;if(!i.destroyed){var r=l.element,o=n._elementListeners.get(r);o&&o.forEach(function(n){if(n.name==l.triggerName){var t=oF(r,l.triggerName,l.fromState.value,l.toState.value);t._data=e,iF(l.player,n.phase,t,n.callback)}}),i.markedForDestroy?n._engine.afterFlush(function(){i.destroy()}):t.push(l)}}),this._queue=[],t.sort(function(e,t){var l=e.transition.ast.depCount,i=t.transition.ast.depCount;return 0==l||0==i?l-i:n._engine.driver.containsElement(e.element,t.element)?1:-1})},e.prototype.destroy=function(e){this.players.forEach(function(e){return e.destroy()}),this._signalRemovalForInnerTriggers(this.hostElement,e)},e.prototype.elementContainsData=function(e){var n=!1;return this._elementListeners.has(e)&&(n=!0),!!this._queue.find(function(n){return n.element===e})||n},e}(),TU=function(){function e(e,n,t){this.bodyNode=e,this.driver=n,this._normalizer=t,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=function(e,n){}}return e.prototype._onRemovalComplete=function(e,n){this.onRemovalComplete(e,n)},Object.defineProperty(e.prototype,"queuedPlayers",{get:function(){var e=[];return this._namespaceList.forEach(function(n){n.players.forEach(function(n){n.queued&&e.push(n)})}),e},enumerable:!0,configurable:!0}),e.prototype.createNamespace=function(e,n){var t=new OU(e,n,this);return n.parentNode?this._balanceNamespaceList(t,n):(this.newHostElements.set(n,t),this.collectEnterElement(n)),this._namespaceLookup[e]=t},e.prototype._balanceNamespaceList=function(e,n){var t=this._namespaceList.length-1;if(t>=0){for(var l=!1,i=t;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,n)){this._namespaceList.splice(i+1,0,e),l=!0;break}l||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(n,e),e},e.prototype.register=function(e,n){var t=this._namespaceLookup[e];return t||(t=this.createNamespace(e,n)),t},e.prototype.registerTrigger=function(e,n,t){var l=this._namespaceLookup[e];l&&l.register(n,t)&&this.totalAnimations++},e.prototype.destroy=function(e,n){var t=this;if(e){var l=this._fetchNamespace(e);this.afterFlush(function(){t.namespacesByHostElement.delete(l.hostElement),delete t._namespaceLookup[e];var n=t._namespaceList.indexOf(l);n>=0&&t._namespaceList.splice(n,1)}),this.afterFlushAnimationsDone(function(){return l.destroy(n)})}},e.prototype._fetchNamespace=function(e){return this._namespaceLookup[e]},e.prototype.fetchNamespacesByElement=function(e){var n=new Set,t=this.statesByElement.get(e);if(t)for(var l=Object.keys(t),i=0;i<l.length;i++){var r=t[l[i]].namespaceId;if(r){var o=this._fetchNamespace(r);o&&n.add(o)}}return n},e.prototype.trigger=function(e,n,t,l){if(IU(n)){var i=this._fetchNamespace(e);if(i)return i.trigger(n,t,l),!0}return!1},e.prototype.insertNode=function(e,n,t,l){if(IU(n)){var i=n[yU];if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;var r=this.collectedLeaveElements.indexOf(n);r>=0&&this.collectedLeaveElements.splice(r,1)}if(e){var o=this._fetchNamespace(e);o&&o.insertNode(n,t)}l&&this.collectEnterElement(n)}},e.prototype.collectEnterElement=function(e){this.collectedEnterElements.push(e)},e.prototype.markElementAsDisabled=function(e,n){n?this.disabledNodes.has(e)||(this.disabledNodes.add(e),PU(e,"ng-animate-disabled")):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),xU(e,"ng-animate-disabled"))},e.prototype.removeNode=function(e,n,t,l){if(IU(n)){var i=e?this._fetchNamespace(e):null;if(i?i.removeNode(n,l):this.markElementAsRemoved(e,n,!1,l),t){var r=this.namespacesByHostElement.get(n);r&&r.id!==e&&r.removeNode(n,l)}}else this._onRemovalComplete(n,l)},e.prototype.markElementAsRemoved=function(e,n,t,l){this.collectedLeaveElements.push(n),n[yU]={namespaceId:e,setForRemoval:l,hasAnimation:t,removedBeforeQueried:!1}},e.prototype.listen=function(e,n,t,l,i){return IU(n)?this._fetchNamespace(e).listen(n,t,l,i):function(){}},e.prototype._buildInstruction=function(e,n,t,l,i){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,t,l,e.fromState.options,e.toState.options,n,i)},e.prototype.destroyInnerAnimations=function(e){var n=this,t=this.driver.query(e,".ng-trigger",!0);t.forEach(function(e){return n.destroyActiveAnimationsForElement(e)}),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,".ng-animating",!0)).forEach(function(e){return n.finishActiveQueriedAnimationOnElement(e)})},e.prototype.destroyActiveAnimationsForElement=function(e){var n=this.playersByElement.get(e);n&&n.forEach(function(e){e.queued?e.markedForDestroy=!0:e.destroy()})},e.prototype.finishActiveQueriedAnimationOnElement=function(e){var n=this.playersByQueriedElement.get(e);n&&n.forEach(function(e){return e.finish()})},e.prototype.whenRenderingDone=function(){var e=this;return new Promise(function(n){if(e.players.length)return tF(e.players).onDone(function(){return n()});n()})},e.prototype.processLeaveNode=function(e){var n=this,t=e[yU];if(t&&t.setForRemoval){if(e[yU]=SU,t.namespaceId){this.destroyInnerAnimations(e);var l=this._fetchNamespace(t.namespaceId);l&&l.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}this.driver.matchesElement(e,".ng-animate-disabled")&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(function(e){n.markElementAsDisabled(e,!1)})},e.prototype.flush=function(e){var n=this;void 0===e&&(e=-1);var t=[];if(this.newHostElements.size&&(this.newHostElements.forEach(function(e,t){return n._balanceNamespaceList(e,t)}),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(var l=0;l<this.collectedEnterElements.length;l++)PU(this.collectedEnterElements[l],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){var i=[];try{t=this._flushAnimations(i,e)}finally{for(l=0;l<i.length;l++)i[l]()}}else for(l=0;l<this.collectedLeaveElements.length;l++)this.processLeaveNode(this.collectedLeaveElements[l]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(function(e){return e()}),this._flushFns=[],this._whenQuietFns.length){var r=this._whenQuietFns;this._whenQuietFns=[],t.length?tF(t).onDone(function(){r.forEach(function(e){return e()})}):r.forEach(function(e){return e()})}},e.prototype.reportError=function(e){throw new Error("Unable to process animations due to the following failed trigger transitions\n "+e.join("\n"))},e.prototype._flushAnimations=function(e,n){var t=this,l=new qF,i=[],o=new Map,u=[],s=new Map,a=new Map,p=new Map,h=new Set;this.disabledNodes.forEach(function(e){h.add(e);for(var n=t.driver.query(e,".ng-animate-queued",!0),l=0;l<n.length;l++)h.add(n[l])});var d=this.bodyNode,g=Array.from(this.statesByElement.keys()),f=_U(g,this.collectedEnterElements),m=new Map,v=0;f.forEach(function(e,n){var t="ng-enter"+v++;m.set(n,t),e.forEach(function(e){return PU(e,t)})});for(var S=[],E=new Set,y=new Set,R=0;R<this.collectedLeaveElements.length;R++)(U=(F=this.collectedLeaveElements[R])[yU])&&U.setForRemoval&&(S.push(F),E.add(F),U.hasAnimation?this.driver.query(F,".ng-star-inserted",!0).forEach(function(e){return E.add(e)}):y.add(F));var b=new Map,O=_U(g,Array.from(E));O.forEach(function(e,n){var t="ng-leave"+v++;b.set(n,t),e.forEach(function(e){return PU(e,t)})}),e.push(function(){f.forEach(function(e,n){var t=m.get(n);e.forEach(function(e){return xU(e,t)})}),O.forEach(function(e,n){var t=b.get(n);e.forEach(function(e){return xU(e,t)})}),S.forEach(function(e){t.processLeaveNode(e)})});for(var T=[],C=[],I=this._namespaceList.length-1;I>=0;I--)this._namespaceList[I].drainQueuedTransitions(n).forEach(function(e){var n=e.player,r=e.element;if(T.push(n),t.collectedEnterElements.length){var o=r[yU];if(o&&o.setForMove)return void n.destroy()}var c=!d||!t.driver.containsElement(d,r),h=b.get(r),g=m.get(r),f=t._buildInstruction(e,l,g,h,c);if(f.errors&&f.errors.length)C.push(f);else{if(c)return n.onStart(function(){return _F(r,f.fromStyles)}),n.onDestroy(function(){return NF(r,f.toStyles)}),void i.push(n);if(e.isFallbackTransition)return n.onStart(function(){return _F(r,f.fromStyles)}),n.onDestroy(function(){return NF(r,f.toStyles)}),void i.push(n);f.timelines.forEach(function(e){return e.stretchStartingKeyframe=!0}),l.append(r,f.timelines),u.push({instruction:f,player:n,element:r}),f.queriedElements.forEach(function(e){return uF(s,e,[]).push(n)}),f.preStyleProps.forEach(function(e,n){var t=Object.keys(e);if(t.length){var l=a.get(n);l||a.set(n,l=new Set),t.forEach(function(e){return l.add(e)})}}),f.postStyleProps.forEach(function(e,n){var t=Object.keys(e),l=p.get(n);l||p.set(n,l=new Set),t.forEach(function(e){return l.add(e)})})}});if(C.length){var A=[];C.forEach(function(e){A.push("@"+e.triggerName+" has failed due to:\n"),e.errors.forEach(function(e){return A.push("- "+e+"\n")})}),T.forEach(function(e){return e.destroy()}),this.reportError(A)}var N=new Map,_=new Map;u.forEach(function(e){var n=e.element;l.has(n)&&(_.set(n,n),t._beforeAnimationBuild(e.player.namespaceId,e.instruction,N))}),i.forEach(function(e){var n=e.element;t._getPreviousPlayers(n,!1,e.namespaceId,e.triggerName,null).forEach(function(e){uF(N,n,[]).push(e),e.destroy()})});var w=S.filter(function(e){return MU(e,a,p)}),P=new Map;NU(P,this.driver,y,p,$L).forEach(function(e){MU(e,a,p)&&w.push(e)});var x=new Map;f.forEach(function(e,n){NU(x,t.driver,new Set(e),a,eF)}),w.forEach(function(e){var n=P.get(e),t=x.get(e);P.set(e,r({},n,t))});var k=[],M=[],D={};u.forEach(function(e){var n=e.element,r=e.player,u=e.instruction;if(l.has(n)){if(h.has(n))return r.onDestroy(function(){return NF(n,u.toStyles)}),r.disabled=!0,r.overrideTotalTime(u.totalTime),void i.push(r);var s=D;if(_.size>1){for(var a=n,c=[];a=a.parentNode;){var p=_.get(a);if(p){s=p;break}c.push(a)}c.forEach(function(e){return _.set(e,s)})}var d=t._buildAnimation(r.namespaceId,u,N,o,x,P);if(r.setRealPlayer(d),s===D)k.push(r);else{var g=t.playersByElement.get(s);g&&g.length&&(r.parentPlayer=tF(g)),i.push(r)}}else _F(n,u.fromStyles),r.onDestroy(function(){return NF(n,u.toStyles)}),M.push(r),h.has(n)&&i.push(r)}),M.forEach(function(e){var n=o.get(e.element);if(n&&n.length){var t=tF(n);e.setRealPlayer(t)}}),i.forEach(function(e){e.parentPlayer?e.syncPlayerEvents(e.parentPlayer):e.destroy()});for(var L=0;L<S.length;L++){var F,U=(F=S[L])[yU];if(xU(F,"ng-leave"),!U||!U.hasAnimation){var H=[];if(s.size){var G=s.get(F);G&&G.length&&H.push.apply(H,c(G));for(var B=this.driver.query(F,".ng-animating",!0),V=0;V<B.length;V++){var W=s.get(B[V]);W&&W.length&&H.push.apply(H,c(W))}}var z=H.filter(function(e){return!e.destroyed});z.length?kU(this,F,z):this.processLeaveNode(F)}}return S.length=0,k.forEach(function(e){t.players.push(e),e.onDone(function(){e.destroy();var n=t.players.indexOf(e);t.players.splice(n,1)}),e.play()}),k},e.prototype.elementContainsData=function(e,n){var t=!1,l=n[yU];return l&&l.setForRemoval&&(t=!0),this.playersByElement.has(n)&&(t=!0),this.playersByQueriedElement.has(n)&&(t=!0),this.statesByElement.has(n)&&(t=!0),this._fetchNamespace(e).elementContainsData(n)||t},e.prototype.afterFlush=function(e){this._flushFns.push(e)},e.prototype.afterFlushAnimationsDone=function(e){this._whenQuietFns.push(e)},e.prototype._getPreviousPlayers=function(e,n,t,l,i){var r=[];if(n){var o=this.playersByQueriedElement.get(e);o&&(r=o)}else{var u=this.playersByElement.get(e);if(u){var s=!i||"void"==i;u.forEach(function(e){e.queued||(s||e.triggerName==l)&&r.push(e)})}}return(t||l)&&(r=r.filter(function(e){return!(t&&t!=e.namespaceId||l&&l!=e.triggerName)})),r},e.prototype._beforeAnimationBuild=function(e,n,t){var l,i,r=n.element,o=n.isRemovalTransition?void 0:e,u=n.isRemovalTransition?void 0:n.triggerName,a=function(e){var l=e.element,i=l!==r,s=uF(t,l,[]);c._getPreviousPlayers(l,i,o,u,n.toState).forEach(function(e){var n=e.getRealPlayer();n.beforeDestroy&&n.beforeDestroy(),e.destroy(),s.push(e)})},c=this;try{for(var p=s(n.timelines),h=p.next();!h.done;h=p.next())a(h.value)}catch(d){l={error:d}}finally{try{h&&!h.done&&(i=p.return)&&i.call(p)}finally{if(l)throw l.error}}_F(r,n.fromStyles)},e.prototype._buildAnimation=function(e,n,t,l,i,r){var o=this,u=n.triggerName,s=n.element,a=[],c=new Set,p=new Set,h=n.timelines.map(function(n){var h=n.element;c.add(h);var d=h[yU];if(d&&d.removedBeforeQueried)return new ZL(n.duration,n.delay);var g,f,m=h!==s,v=(g=(t.get(h)||vU).map(function(e){return e.getRealPlayer()}),f=[],function e(n,t){for(var l=0;l<n.length;l++){var i=n[l];i instanceof JL?e(i.players,t):t.push(i)}}(g,f),f).filter(function(e){return!!e.element&&e.element===h}),S=i.get(h),E=r.get(h),y=lF(0,o._normalizer,0,n.keyframes,S,E),R=o._buildPlayer(n,y,v);if(n.subTimeline&&l&&p.add(h),m){var b=new CU(e,u,h);b.setRealPlayer(R),a.push(b)}return R});a.forEach(function(e){uF(o.playersByQueriedElement,e.element,[]).push(e),e.onDone(function(){return function(e,n,t){var l;if(e instanceof Map){if(l=e.get(n)){if(l.length){var i=l.indexOf(t);l.splice(i,1)}0==l.length&&e.delete(n)}}else(l=e[n])&&(l.length&&(i=l.indexOf(t),l.splice(i,1)),0==l.length&&delete e[n]);return l}(o.playersByQueriedElement,e.element,e)})}),c.forEach(function(e){return PU(e,"ng-animating")});var d=tF(h);return d.onDestroy(function(){c.forEach(function(e){return xU(e,"ng-animating")}),NF(s,n.toStyles)}),p.forEach(function(e){uF(l,e,[]).push(d)}),d},e.prototype._buildPlayer=function(e,n,t){return n.length>0?this.driver.animate(e.element,n,e.duration,e.delay,e.easing,t):new ZL(e.duration,e.delay)},e}(),CU=function(){function e(e,n,t){this.namespaceId=e,this.triggerName=n,this.element=t,this._player=new ZL,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}return e.prototype.setRealPlayer=function(e){var n=this;this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(function(t){n._queuedCallbacks[t].forEach(function(n){return iF(e,t,void 0,n)})}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)},e.prototype.getRealPlayer=function(){return this._player},e.prototype.overrideTotalTime=function(e){this.totalTime=e},e.prototype.syncPlayerEvents=function(e){var n=this,t=this._player;t.triggerCallback&&e.onStart(function(){return t.triggerCallback("start")}),e.onDone(function(){return n.finish()}),e.onDestroy(function(){return n.destroy()})},e.prototype._queueEvent=function(e,n){uF(this._queuedCallbacks,e,[]).push(n)},e.prototype.onDone=function(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)},e.prototype.onStart=function(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)},e.prototype.onDestroy=function(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)},e.prototype.init=function(){this._player.init()},e.prototype.hasStarted=function(){return!this.queued&&this._player.hasStarted()},e.prototype.play=function(){!this.queued&&this._player.play()},e.prototype.pause=function(){!this.queued&&this._player.pause()},e.prototype.restart=function(){!this.queued&&this._player.restart()},e.prototype.finish=function(){this._player.finish()},e.prototype.destroy=function(){this.destroyed=!0,this._player.destroy()},e.prototype.reset=function(){!this.queued&&this._player.reset()},e.prototype.setPosition=function(e){this.queued||this._player.setPosition(e)},e.prototype.getPosition=function(){return this.queued?0:this._player.getPosition()},e.prototype.triggerCallback=function(e){var n=this._player;n.triggerCallback&&n.triggerCallback(e)},e}();function IU(e){return e&&1===e.nodeType}function AU(e,n){var t=e.style.display;return e.style.display=null!=n?n:"none",t}function NU(e,n,t,l,i){var r=[];t.forEach(function(e){return r.push(AU(e))});var o=[];l.forEach(function(t,l){var r={};t.forEach(function(e){var t=r[e]=n.computeStyle(l,e,i);t&&0!=t.length||(l[yU]=EU,o.push(l))}),e.set(l,r)});var u=0;return t.forEach(function(e){return AU(e,r[u++])}),o}function _U(e,n){var t=new Map;if(e.forEach(function(e){return t.set(e,[])}),0==n.length)return t;var l=new Set(n),i=new Map;return n.forEach(function(e){var n=function e(n){if(!n)return 1;var r=i.get(n);if(r)return r;var o=n.parentNode;return r=t.has(o)?o:l.has(o)?1:e(o),i.set(n,r),r}(e);1!==n&&t.get(n).push(e)}),t}var wU="$$classes";function PU(e,n){if(e.classList)e.classList.add(n);else{var t=e[wU];t||(t=e[wU]={}),t[n]=!0}}function xU(e,n){if(e.classList)e.classList.remove(n);else{var t=e[wU];t&&delete t[n]}}function kU(e,n,t){tF(t).onDone(function(){return e.processLeaveNode(n)})}function MU(e,n,t){var l=t.get(e);if(!l)return!1;var i=n.get(e);return i?l.forEach(function(e){return i.add(e)}):n.set(e,l),t.delete(e),!0}var DU=function(){function e(e,n,t){var l=this;this.bodyNode=e,this._driver=n,this._triggerCache={},this.onRemovalComplete=function(e,n){},this._transitionEngine=new TU(e,n,t),this._timelineEngine=new mU(e,n,t),this._transitionEngine.onRemovalComplete=function(e,n){return l.onRemovalComplete(e,n)}}return e.prototype.registerTrigger=function(e,n,t,l,i){var r=e+"-"+l,o=this._triggerCache[r];if(!o){var u=[],s=WF(this._driver,i,u);if(u.length)throw new Error('The animation trigger "'+l+'" has failed to build due to the following errors:\n - '+u.join("\n - "));o=function(e,n){return new dU(e,n)}(l,s),this._triggerCache[r]=o}this._transitionEngine.registerTrigger(n,l,o)},e.prototype.register=function(e,n){this._transitionEngine.register(e,n)},e.prototype.destroy=function(e,n){this._transitionEngine.destroy(e,n)},e.prototype.onInsert=function(e,n,t,l){this._transitionEngine.insertNode(e,n,t,l)},e.prototype.onRemove=function(e,n,t,l){this._transitionEngine.removeNode(e,n,l||!1,t)},e.prototype.disableAnimations=function(e,n){this._transitionEngine.markElementAsDisabled(e,n)},e.prototype.process=function(e,n,t,l){if("@"==t.charAt(0)){var i=a(sF(t),2);this._timelineEngine.command(i[0],n,i[1],l)}else this._transitionEngine.trigger(e,n,t,l)},e.prototype.listen=function(e,n,t,l,i){if("@"==t.charAt(0)){var r=a(sF(t),2);return this._timelineEngine.listen(r[0],n,r[1],i)}return this._transitionEngine.listen(e,n,t,l,i)},e.prototype.flush=function(e){void 0===e&&(e=-1),this._transitionEngine.flush(e)},Object.defineProperty(e.prototype,"players",{get:function(){return this._transitionEngine.players.concat(this._timelineEngine.players)},enumerable:!0,configurable:!0}),e.prototype.whenRenderingDone=function(){return this._transitionEngine.whenRenderingDone()},e}(),LU=function(e){function n(n,t){var l=e.call(this)||this;return l._nextAnimationId=0,l._renderer=n.createRenderer(t.body,{id:"0",encapsulation:cn.None,styles:[],data:{animation:[]}}),l}return i(n,e),n.prototype.build=function(e){var n=this._nextAnimationId.toString();this._nextAnimationId++;var t=Array.isArray(e)?QL(e):e;return HU(this._renderer,null,n,"register",[t]),new FU(n,this._renderer)},n}(KL),FU=function(e){function n(n,t){var l=e.call(this)||this;return l._id=n,l._renderer=t,l}return i(n,e),n.prototype.create=function(e,n){return new UU(this._id,e,n||{},this._renderer)},n}(jL),UU=function(){function e(e,n,t,l){this.id=e,this.element=n,this._renderer=l,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",t)}return e.prototype._listen=function(e,n){return this._renderer.listen(this.element,"@@"+this.id+":"+e,n)},e.prototype._command=function(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];return HU(this._renderer,this.element,this.id,e,n)},e.prototype.onDone=function(e){this._listen("done",e)},e.prototype.onStart=function(e){this._listen("start",e)},e.prototype.onDestroy=function(e){this._listen("destroy",e)},e.prototype.init=function(){this._command("init")},e.prototype.hasStarted=function(){return this._started},e.prototype.play=function(){this._command("play"),this._started=!0},e.prototype.pause=function(){this._command("pause")},e.prototype.restart=function(){this._command("restart")},e.prototype.finish=function(){this._command("finish")},e.prototype.destroy=function(){this._command("destroy")},e.prototype.reset=function(){this._command("reset")},e.prototype.setPosition=function(e){this._command("setPosition",e)},e.prototype.getPosition=function(){return 0},e}();function HU(e,n,t,l,i){return e.setProperty(n,"@@"+t+":"+l,i)}var GU=function(){function e(e,n,t){this.delegate=e,this.engine=n,this._zone=t,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),n.onRemovalComplete=function(e,n){n&&n.parentNode(e)&&n.removeChild(e.parentNode,e)}}return e.prototype.createRenderer=function(e,n){var t=this,l=this.delegate.createRenderer(e,n);if(!(e&&n&&n.data&&n.data.animation)){var i=this._rendererCache.get(l);return i||(i=new BU("",l,this.engine),this._rendererCache.set(l,i)),i}var r=n.id,o=n.id+"-"+this._currentId;return this._currentId++,this.engine.register(o,e),n.data.animation.forEach(function(n){return t.engine.registerTrigger(r,o,e,n.name,n)}),new VU(this,o,l,this.engine)},e.prototype.begin=function(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()},e.prototype._scheduleCountTask=function(){var e=this;this.promise.then(function(){e._microtaskId++})},e.prototype.scheduleListenerCallback=function(e,n,t){var l=this;e>=0&&e<this._microtaskId?this._zone.run(function(){return n(t)}):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(function(){l._zone.run(function(){l._animationCallbacksBuffer.forEach(function(e){var n=a(e,2);(0,n[0])(n[1])}),l._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([n,t]))},e.prototype.end=function(){var e=this;this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(function(){e._scheduleCountTask(),e.engine.flush(e._microtaskId)}),this.delegate.end&&this.delegate.end()},e.prototype.whenRenderingDone=function(){return this.engine.whenRenderingDone()},e}(),BU=function(){function e(e,n,t){this.namespaceId=e,this.delegate=n,this.engine=t,this.destroyNode=this.delegate.destroyNode?function(e){return n.destroyNode(e)}:null}return Object.defineProperty(e.prototype,"data",{get:function(){return this.delegate.data},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()},e.prototype.createElement=function(e,n){return this.delegate.createElement(e,n)},e.prototype.createComment=function(e){return this.delegate.createComment(e)},e.prototype.createText=function(e){return this.delegate.createText(e)},e.prototype.appendChild=function(e,n){this.delegate.appendChild(e,n),this.engine.onInsert(this.namespaceId,n,e,!1)},e.prototype.insertBefore=function(e,n,t){this.delegate.insertBefore(e,n,t),this.engine.onInsert(this.namespaceId,n,e,!0)},e.prototype.removeChild=function(e,n,t){this.engine.onRemove(this.namespaceId,n,this.delegate,t)},e.prototype.selectRootElement=function(e,n){return this.delegate.selectRootElement(e,n)},e.prototype.parentNode=function(e){return this.delegate.parentNode(e)},e.prototype.nextSibling=function(e){return this.delegate.nextSibling(e)},e.prototype.setAttribute=function(e,n,t,l){this.delegate.setAttribute(e,n,t,l)},e.prototype.removeAttribute=function(e,n,t){this.delegate.removeAttribute(e,n,t)},e.prototype.addClass=function(e,n){this.delegate.addClass(e,n)},e.prototype.removeClass=function(e,n){this.delegate.removeClass(e,n)},e.prototype.setStyle=function(e,n,t,l){this.delegate.setStyle(e,n,t,l)},e.prototype.removeStyle=function(e,n,t){this.delegate.removeStyle(e,n,t)},e.prototype.setProperty=function(e,n,t){"@"==n.charAt(0)&&"@.disabled"==n?this.disableAnimations(e,!!t):this.delegate.setProperty(e,n,t)},e.prototype.setValue=function(e,n){this.delegate.setValue(e,n)},e.prototype.listen=function(e,n,t){return this.delegate.listen(e,n,t)},e.prototype.disableAnimations=function(e,n){this.engine.disableAnimations(e,n)},e}(),VU=function(e){function n(n,t,l,i){var r=e.call(this,t,l,i)||this;return r.factory=n,r.namespaceId=t,r}return i(n,e),n.prototype.setProperty=function(e,n,t){"@"==n.charAt(0)?"."==n.charAt(1)&&"@.disabled"==n?this.disableAnimations(e,t=void 0===t||!!t):this.engine.process(this.namespaceId,e,n.substr(1),t):this.delegate.setProperty(e,n,t)},n.prototype.listen=function(e,n,t){var l,i,r,o=this;if("@"==n.charAt(0)){var u=function(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(e),s=n.substr(1),c="";return"@"!=s.charAt(0)&&(s=(l=a((i=s,r=i.indexOf("."),[i.substring(0,r),i.substr(r+1)]),2))[0],c=l[1]),this.engine.listen(this.namespaceId,u,s,c,function(e){o.factory.scheduleListenerCallback(e._data||-1,t,e)})}return this.delegate.listen(e,n,t)},n}(BU),WU=function(e){function n(n,t,l){return e.call(this,n.body,t,l)||this}return i(n,e),n}(DU);function zU(){return new uU}function YU(e,n,t){return new GU(e,n,t)}var KU=new Le("AnimationModuleType"),jU=function(){return function(){}}(),$U=function(){function e(e,n){this.gameService=e,this.router=n,this.lastRegion=Gu.VILLAGE}return e.prototype.canActivate=function(e,n){switch(e.routeConfig.path){case"redirect":var t="/regions/"+Gu[this.lastRegion].toLowerCase();return this.router.navigate([t],{skipLocationChange:!1}),!1;case"crafting":return!!this.gameService.isEnabled(_u.CRAFTING)||(this.goToError(),!1);case"market":return!!this.gameService.isEnabled(_u.MARKET)||(this.goToError(),!1);case"research":return!!this.gameService.isEnabled(_u.RESEARCH)||(this.goToError(),!1);case"army":return!!this.gameService.isEnabled(_u.ARMY)||(this.goToError(),!1);case"religion":return!!this.gameService.isEnabled(_u.RELIGION)||(this.goToError(),!1);case"weather":return!!this.gameService.isEnabled(_u.WEATHER)||(this.goToError(),!1);case"world":return!!this.gameService.isEnabled(_u.CARTOGRAPHY)||(this.goToError(),!1);case"navy":return!!this.gameService.isEnabled(_u.NAVY)||(this.goToError(),!1);case"heritage":return!!this.gameService.isEnabled(_u.HERITAGE)||(this.goToError(),!1);case"village":return this.lastRegion=Gu.VILLAGE,!0;case"forest":return this.lastRegion=Gu.FOREST,!0;case"mountains":return this.gameService.isEnabled(_u.MOUNTAINS)?(this.lastRegion=Gu.MOUNTAINS,!0):(this.goToError(),!1);case"fort":return this.gameService.isEnabled(_u.FORT)?(this.lastRegion=Gu.FORT,!0):(this.goToError(),!1);case"sea":return this.gameService.isEnabled(_u.SEA)?(this.lastRegion=Gu.SEA,!0):(this.goToError(),!1);case"field":return this.gameService.isEnabled(_u.FIELD)?(this.lastRegion=Gu.FIELD,!0):(this.goToError(),!1);case"plateau":return this.gameService.isEnabled(_u.PLATEAU)?(this.lastRegion=Gu.PLATEAU,!0):(this.goToError(),!1);default:return!1}},e.prototype.goToError=function(){this.router.navigate(["/404"],{skipLocationChange:!0})},e.ngInjectableDef=Oe({factory:function(){return new e(Ye(Jf),Ye(jd))},token:e,providedIn:"root"}),e}(),QU=function(){function e(){this.handlers={}}return e.prototype.shouldDetach=function(e){return e.routeConfig&&("village"===e.routeConfig.path||"fort"===e.routeConfig.path||"forest"===e.routeConfig.path||"field"===e.routeConfig.path||"mountains"===e.routeConfig.path||"plateau"===e.routeConfig.path||"sea"===e.routeConfig.path)},e.prototype.store=function(e,n){this.handlers[e.routeConfig.path]=n},e.prototype.shouldAttach=function(e){return!!e.routeConfig&&!!this.handlers[e.routeConfig.path]},e.prototype.retrieve=function(e){return e.routeConfig?this.handlers[e.routeConfig.path]:null},e.prototype.shouldReuseRoute=function(e,n){return!1},e}(),qU=function(){return function(){}}(),XU=Tu(Ps,[xs],function(e){return function(e){for(var n={},t=[],l=!1,i=0;i<e.length;i++){var r=e[i];r.token===Qe&&!0===r.value&&(l=!0),1073741824&r.flags&&t.push(r.token),r.index=i,n[nl(r.token)]=r}return{factory:null,providersByKey:n,providers:e,modules:t,isRoot:l}}([Ul(512,ut,st,[[8,[Cg,wg,Om,Ey,_y,zy,AR,db,Lb,Xb,ZT,uC,mC,FC,yA,HA,uN,AN,JN,g_,M_,j_,dw,yw,Aw,YL]],[3,ut],ct]),Ul(4608,ef,ef,[]),Ul(5120,er,qr,[[3,er]]),Ul(4608,$s,Qs,[er,[2,js]]),Ul(5120,Mi,Xr,[vr]),Ul(5120,ji,$i,[]),Ul(5120,Pt,$r,[]),Ul(5120,xt,Qr,[]),Ul(4608,Sp,Ep,[Ea]),Ul(6144,Fn,null,[Sp]),Ul(4608,pp,dp,[]),Ul(5120,Uc,function(e,n,t,l,i,r,o,u){return[new ap(e,n,t),new vp(l),new gp(i,r,o,u)]},[Ea,vr,Xi,Ea,Ea,pp,Ji,[2,hp]]),Ul(4608,Hc,Hc,[Uc,vr]),Ul(135680,Vc,Vc,[Ea]),Ul(4608,Qc,Qc,[Hc,Vc,ji]),Ul(4608,EF,SF,[]),Ul(5120,oU,zU,[]),Ul(4608,DU,WU,[Ea,EF,oU]),Ul(5120,mt,YU,[Qc,DU,vr]),Ul(6144,Bc,null,[Vc]),Ul(4608,Cr,Cr,[vr]),Ul(5120,Fh,vg,[jd]),Ul(4608,ig,ig,[]),Ul(6144,tg,null,[ig]),Ul(135680,rg,rg,[jd,Lr,sr,Xe,tg]),Ul(4608,lg,lg,[]),Ul(5120,og,hg,[jd,ba,ug]),Ul(5120,Rg,yg,[Sg]),Ul(5120,Zi,function(e){return[e]},[Rg]),Ul(4608,KL,LU,[mt,Ea]),Ul(4608,dv,dv,[Ea,vr,zm,pv]),Ul(4608,CP,IP,[Ea,Xi,OP]),Ul(4608,AP,AP,[CP,TP]),Ul(5120,vP,function(e){return[e]},[AP]),Ul(4608,RP,RP,[]),Ul(6144,yP,null,[RP]),Ul(4608,bP,bP,[yP]),Ul(6144,eP,null,[bP]),Ul(4608,Jw,NP,[eP,Xe]),Ul(4608,fP,fP,[Jw]),Ul(4608,am,am,[$f,Vf,Jf,qf,zf,lm,jf,tm]),Ul(1073742336,Mf,Mf,[]),Ul(1073742336,Df,Df,[]),Ul(1073742336,Sa,Sa,[]),Ul(1024,Wn,Ap,[]),Ul(1024,_r,function(){return[cg()]},[]),Ul(512,Sg,Sg,[Xe]),Ul(1024,Yi,function(e,n){return[(t=e,Dc("probe",Fc),Dc("coreTokens",r({},Lc,(t||[]).reduce(function(e,n){return e[n.name]=n.token,e},{}))),function(){return Fc}),Eg(n)];var t},[[2,_r],Sg]),Ul(512,Ki,Ki,[[2,Yi]]),Ul(131584,Mr,Mr,[vr,Ji,Xe,Wn,ut,Ki]),Ul(1073742336,Zr,Zr,[Mr]),Ul(1073742336,Np,Np,[[3,Np]]),Ul(1024,sg,gg,[[3,jd]]),Ul(512,fh,mh,[]),Ul(512,Jd,Jd,[]),Ul(256,ug,{},[]),Ul(1024,Ds,dg,[ks,[2,Ls],ug]),Ul(512,Fs,Fs,[Ds,ks]),Ul(512,sr,sr,[]),Ul(512,Lr,Hr,[sr,[2,Fr]]),Ul(1024,Gd,function(){return[[{path:"",redirectTo:"regions/redirect",pathMatch:"full"},{path:"404",component:Ig,pathMatch:"full"},{path:"resources",component:cm},{path:"crafting",children:[{path:"",redirectTo:"crafting",pathMatch:"full"},{path:"crafting",component:cy,canActivate:[$U]},{path:"cooking",component:yy}]},{path:"market",component:My,canActivate:[$U]},{path:"research",component:gR,canActivate:[$U]},{path:"army",component:QR,canActivate:[$U]},{path:"religion",component:Rb,canActivate:[$U]},{path:"weather",component:Ub,canActivate:[$U]},{path:"world",component:kO,canActivate:[$U]},{path:"navy",component:JT,canActivate:[$U]},{path:"heritage",component:aC,canActivate:[$U]},{path:"royal",component:AC},{path:"regions",children:[{path:"",redirectTo:"redirect",pathMatch:"full"},{path:"redirect",component:JI,canActivate:[$U]},{path:"village",component:JI,canActivate:[$U]},{path:"fort",component:RA,canActivate:[$U]},{path:"forest",component:BA,canActivate:[$U]},{path:"field",component:aN,canActivate:[$U]},{path:"mountains",component:_N,canActivate:[$U]},{path:"plateau",component:n_,canActivate:[$U]},{path:"sea",component:m_,canActivate:[$U]}]},{path:"management",children:[{path:"",redirectTo:"general",pathMatch:"full"},{path:"general",component:H_},{path:"effects",component:$_},{path:"forestM",component:gw},{path:"summary",component:Rw}]},{path:"**",redirectTo:"regions/village",pathMatch:"full"}]]},[]),Ul(512,Ud,QU,[]),Ul(1024,jd,mg,[Mr,fh,Jd,Fs,Xe,Lr,sr,Gd,ug,[2,Vd],[2,Ud]]),Ul(1073742336,pg,pg,[[2,sg],[2,jd]]),Ul(1073742336,qU,qU,[]),Ul(1073742336,jU,jU,[]),Ul(1073742336,bv,bv,[]),Ul(1073742336,_P,_P,[]),Ul(1073742336,wP,wP,[]),Ul(1073742336,Ps,Ps,[]),Ul(256,Qe,!0,[]),Ul(256,KU,"NoopAnimations",[]),Ul(256,OP,"XSRF-TOKEN",[]),Ul(256,TP,"X-XSRF-TOKEN",[])])});is.production&&function(){if(dn)throw new Error("Cannot enable prod mode after platform setup.");hn=!1}(),Ip().bootstrapModuleFactory(XU).catch(function(e){return console.log(e)})}},[[0,0]]]);
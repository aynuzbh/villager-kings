(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,n,t){e.exports=t("zUnb")},crnd:function(e,n){function t(e){return Promise.resolve().then(function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n})}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id="crnd"},zUnb:function(e,n,t){"use strict";t.r(n);var r=function(e,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])})(e,n)};function l(e,n){function t(){this.constructor=e}r(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}var i=function(){return(i=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var l in n=arguments[t])Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l]);return e}).apply(this,arguments)};function o(e,n,t,r){var l,i=arguments.length,o=i<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,n,t,r);else for(var u=e.length-1;u>=0;u--)(l=e[u])&&(o=(i<3?l(o):i>3?l(n,t,o):l(n,t))||o);return i>3&&o&&Object.defineProperty(n,t,o),o}function u(e,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,n)}function s(e){var n="function"==typeof Symbol&&e[Symbol.iterator],t=0;return n?n.call(e):{next:function(){return e&&t>=e.length&&(e=void 0),{value:e&&e[t++],done:!e}}}}function a(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var r,l,i=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(u){l={error:u}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(l)throw l.error}}return o}function c(){for(var e=[],n=0;n<arguments.length;n++)e=e.concat(a(arguments[n]));return e}var p=Array.isArray||function(e){return e&&"number"==typeof e.length};function h(e){return null!==e&&"object"==typeof e}function d(e){return"function"==typeof e}function f(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,n){return n+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}f.prototype=Object.create(Error.prototype);var g=f,v=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}var n;return e.prototype.unsubscribe=function(){var n;if(!this.closed){var t=this._parentOrParents,r=this._unsubscribe,l=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof e)t.remove(this);else if(null!==t)for(var i=0;i<t.length;++i)t[i].remove(this);if(d(r))try{r.call(this)}catch(s){n=s instanceof g?m(s.errors):[s]}if(p(l)){i=-1;for(var o=l.length;++i<o;){var u=l[i];if(h(u))try{u.unsubscribe()}catch(s){n=n||[],s instanceof g?n=n.concat(m(s.errors)):n.push(s)}}}if(n)throw new g(n)}},e.prototype.add=function(n){var t=n;if(!n)return e.EMPTY;switch(typeof n){case"function":t=new e(n);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof e)){var r=t;(t=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+n+" added to Subscription.")}var l=t._parentOrParents;if(null===l)t._parentOrParents=this;else if(l instanceof e){if(l===this)return t;t._parentOrParents=[l,this]}else{if(-1!==l.indexOf(this))return t;l.push(this)}var i=this._subscriptions;return null===i?this._subscriptions=[t]:i.push(t),t},e.prototype.remove=function(e){var n=this._subscriptions;if(n){var t=n.indexOf(e);-1!==t&&n.splice(t,1)}},e.EMPTY=((n=new e).closed=!0,n),e}();function m(e){return e.reduce(function(e,n){return e.concat(n instanceof g?n.errors:n)},[])}var y=!1,S={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){y=e},get useDeprecatedSynchronousErrorHandling(){return y}};function E(e){setTimeout(function(){throw e},0)}var b={closed:!0,next:function(e){},error:function(e){if(S.useDeprecatedSynchronousErrorHandling)throw e;E(e)},complete:function(){}},O="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),R=function(e){function n(t,r,l){var i=e.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=b;break;case 1:if(!t){i.destination=b;break}if("object"==typeof t){t instanceof n?(i.syncErrorThrowable=t.syncErrorThrowable,i.destination=t,t.add(i)):(i.syncErrorThrowable=!0,i.destination=new T(i,t));break}default:i.syncErrorThrowable=!0,i.destination=new T(i,t,r,l)}return i}return l(n,e),n.prototype[O]=function(){return this},n.create=function(e,t,r){var l=new n(e,t,r);return l.syncErrorThrowable=!1,l},n.prototype.next=function(e){this.isStopped||this._next(e)},n.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},n.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},n.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},n.prototype._next=function(e){this.destination.next(e)},n.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},n.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},n.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},n}(v),T=function(e){function n(n,t,r,l){var i,o=e.call(this)||this;o._parentSubscriber=n;var u=o;return d(t)?i=t:t&&(i=t.next,r=t.error,l=t.complete,t!==b&&(d((u=Object.create(t)).unsubscribe)&&o.add(u.unsubscribe.bind(u)),u.unsubscribe=o.unsubscribe.bind(o))),o._context=u,o._next=i,o._error=r,o._complete=l,o}return l(n,e),n.prototype.next=function(e){if(!this.isStopped&&this._next){var n=this._parentSubscriber;S.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?this.__tryOrSetError(n,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},n.prototype.error=function(e){if(!this.isStopped){var n=this._parentSubscriber,t=S.useDeprecatedSynchronousErrorHandling;if(this._error)t&&n.syncErrorThrowable?(this.__tryOrSetError(n,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(n.syncErrorThrowable)t?(n.syncErrorValue=e,n.syncErrorThrown=!0):E(e),this.unsubscribe();else{if(this.unsubscribe(),t)throw e;E(e)}}},n.prototype.complete=function(){var e=this;if(!this.isStopped){var n=this._parentSubscriber;if(this._complete){var t=function(){return e._complete.call(e._context)};S.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?(this.__tryOrSetError(n,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}},n.prototype.__tryOrUnsub=function(e,n){try{e.call(this._context,n)}catch(t){if(this.unsubscribe(),S.useDeprecatedSynchronousErrorHandling)throw t;E(t)}},n.prototype.__tryOrSetError=function(e,n,t){if(!S.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,t)}catch(r){return S.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(E(r),!0)}return!1},n.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},n}(R),C="function"==typeof Symbol&&Symbol.observable||"@@observable";function _(){}function I(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return A(e)}function A(e){return e?1===e.length?e[0]:function(n){return e.reduce(function(e,n){return n(e)},n)}:_}var w=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(n){var t=new e;return t.source=this,t.operator=n,t},e.prototype.subscribe=function(e,n,t){var r=this.operator,l=function(e,n,t){if(e){if(e instanceof R)return e;if(e[O])return e[O]()}return e||n||t?new R(e,n,t):new R(b)}(e,n,t);if(l.add(r?r.call(l,this.source):this.source||S.useDeprecatedSynchronousErrorHandling&&!l.syncErrorThrowable?this._subscribe(l):this._trySubscribe(l)),S.useDeprecatedSynchronousErrorHandling&&l.syncErrorThrowable&&(l.syncErrorThrowable=!1,l.syncErrorThrown))throw l.syncErrorValue;return l},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){S.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=n),function(e){for(;e;){var n=e.destination;if(e.closed||e.isStopped)return!1;e=n&&n instanceof R?n:null}return!0}(e)?e.error(n):console.warn(n)}},e.prototype.forEach=function(e,n){var t=this;return new(n=N(n))(function(n,r){var l;l=t.subscribe(function(n){try{e(n)}catch(t){r(t),l&&l.unsubscribe()}},r,n)})},e.prototype._subscribe=function(e){var n=this.source;return n&&n.subscribe(e)},e.prototype[C]=function(){return this},e.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 0===e.length?this:A(e)(this)},e.prototype.toPromise=function(e){var n=this;return new(e=N(e))(function(e,t){var r;n.subscribe(function(e){return r=e},function(e){return t(e)},function(){return e(r)})})},e.create=function(n){return new e(n)},e}();function N(e){if(e||(e=S.Promise||Promise),!e)throw new Error("no Promise impl found");return e}function P(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}P.prototype=Object.create(Error.prototype);var D=P,M=function(e){function n(n,t){var r=e.call(this)||this;return r.subject=n,r.subscriber=t,r.closed=!1,r}return l(n,e),n.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,n=e.observers;if(this.subject=null,n&&0!==n.length&&!e.isStopped&&!e.closed){var t=n.indexOf(this.subscriber);-1!==t&&n.splice(t,1)}}},n}(v),k=function(e){function n(n){var t=e.call(this,n)||this;return t.destination=n,t}return l(n,e),n}(R),L=function(e){function n(){var n=e.call(this)||this;return n.observers=[],n.closed=!1,n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return l(n,e),n.prototype[O]=function(){return new k(this)},n.prototype.lift=function(e){var n=new x(this,this);return n.operator=e,n},n.prototype.next=function(e){if(this.closed)throw new D;if(!this.isStopped)for(var n=this.observers,t=n.length,r=n.slice(),l=0;l<t;l++)r[l].next(e)},n.prototype.error=function(e){if(this.closed)throw new D;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var n=this.observers,t=n.length,r=n.slice(),l=0;l<t;l++)r[l].error(e);this.observers.length=0},n.prototype.complete=function(){if(this.closed)throw new D;this.isStopped=!0;for(var e=this.observers,n=e.length,t=e.slice(),r=0;r<n;r++)t[r].complete();this.observers.length=0},n.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},n.prototype._trySubscribe=function(n){if(this.closed)throw new D;return e.prototype._trySubscribe.call(this,n)},n.prototype._subscribe=function(e){if(this.closed)throw new D;return this.hasError?(e.error(this.thrownError),v.EMPTY):this.isStopped?(e.complete(),v.EMPTY):(this.observers.push(e),new M(this,e))},n.prototype.asObservable=function(){var e=new w;return e.source=this,e},n.create=function(e,n){return new x(e,n)},n}(w),x=function(e){function n(n,t){var r=e.call(this)||this;return r.destination=n,r.source=t,r}return l(n,e),n.prototype.next=function(e){var n=this.destination;n&&n.next&&n.next(e)},n.prototype.error=function(e){var n=this.destination;n&&n.error&&this.destination.error(e)},n.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},n.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):v.EMPTY},n}(L);function F(e){return e&&"function"==typeof e.schedule}var U=function(e){function n(n,t,r){var l=e.call(this)||this;return l.parent=n,l.outerValue=t,l.outerIndex=r,l.index=0,l}return l(n,e),n.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},n.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},n.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},n}(R),H=function(e){return function(n){for(var t=0,r=e.length;t<r&&!n.closed;t++)n.next(e[t]);n.complete()}};function G(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var B=G(),V=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function W(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var j=function(e){if(e&&"function"==typeof e[C])return r=e,function(e){var n=r[C]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)};if(V(e))return H(e);if(W(e))return t=e,function(e){return t.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,E),e};if(e&&"function"==typeof e[B])return n=e,function(e){for(var t=n[B]();;){var r=t.next();if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof t.return&&e.add(function(){t.return&&t.return()}),e};var n,t,r,l=h(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+l+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function Y(e,n,t,r,l){if(void 0===l&&(l=new U(e,t,r)),!l.closed)return n instanceof w?n.subscribe(l):j(n)(l)}var z=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n.prototype.notifyNext=function(e,n,t,r,l){this.destination.next(n)},n.prototype.notifyError=function(e,n){this.destination.error(e)},n.prototype.notifyComplete=function(e){this.destination.complete()},n}(R);function K(e,n){return function(t){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return t.lift(new q(e,n))}}var q=function(){function e(e,n){this.project=e,this.thisArg=n}return e.prototype.call=function(e,n){return n.subscribe(new $(e,this.project,this.thisArg))},e}(),$=function(e){function n(n,t,r){var l=e.call(this,n)||this;return l.project=t,l.count=0,l.thisArg=r||l,l}return l(n,e),n.prototype._next=function(e){var n;try{n=this.project.call(this.thisArg,e,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(n)},n}(R);function Q(e,n){return new w(function(t){var r=new v,l=0;return r.add(n.schedule(function(){l!==e.length?(t.next(e[l++]),t.closed||r.add(this.schedule())):t.complete()})),r})}function Z(e,n){return n?function(e,n){if(null!=e){if(function(e){return e&&"function"==typeof e[C]}(e))return function(e,n){return new w(function(t){var r=new v;return r.add(n.schedule(function(){var l=e[C]();r.add(l.subscribe({next:function(e){r.add(n.schedule(function(){return t.next(e)}))},error:function(e){r.add(n.schedule(function(){return t.error(e)}))},complete:function(){r.add(n.schedule(function(){return t.complete()}))}}))})),r})}(e,n);if(W(e))return function(e,n){return new w(function(t){var r=new v;return r.add(n.schedule(function(){return e.then(function(e){r.add(n.schedule(function(){t.next(e),r.add(n.schedule(function(){return t.complete()}))}))},function(e){r.add(n.schedule(function(){return t.error(e)}))})})),r})}(e,n);if(V(e))return Q(e,n);if(function(e){return e&&"function"==typeof e[B]}(e)||"string"==typeof e)return function(e,n){if(!e)throw new Error("Iterable cannot be null");return new w(function(t){var r,l=new v;return l.add(function(){r&&"function"==typeof r.return&&r.return()}),l.add(n.schedule(function(){r=e[B](),l.add(n.schedule(function(){if(!t.closed){var e,n;try{var l=r.next();e=l.value,n=l.done}catch(i){return void t.error(i)}n?t.complete():(t.next(e),this.schedule())}}))})),l})}(e,n)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,n):e instanceof w?e:new w(j(e))}function X(e,n,t){return void 0===t&&(t=Number.POSITIVE_INFINITY),"function"==typeof n?function(r){return r.pipe(X(function(t,r){return Z(e(t,r)).pipe(K(function(e,l){return n(t,e,r,l)}))},t))}:("number"==typeof n&&(t=n),function(n){return n.lift(new J(e,t))})}var J=function(){function e(e,n){void 0===n&&(n=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=n}return e.prototype.call=function(e,n){return n.subscribe(new ee(e,this.project,this.concurrent))},e}(),ee=function(e){function n(n,t,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var l=e.call(this,n)||this;return l.project=t,l.concurrent=r,l.hasCompleted=!1,l.buffer=[],l.active=0,l.index=0,l}return l(n,e),n.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},n.prototype._tryNext=function(e){var n,t=this.index++;try{n=this.project(e,t)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(n,e,t)},n.prototype._innerSub=function(e,n,t){var r=new U(this,void 0,void 0);this.destination.add(r),Y(this,e,n,t,r)},n.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},n.prototype.notifyNext=function(e,n,t,r,l){this.destination.next(n)},n.prototype.notifyComplete=function(e){var n=this.buffer;this.remove(e),this.active--,n.length>0?this._next(n.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},n}(z);function ne(e){return e}function te(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),X(ne,e)}function re(e,n){return n?Q(e,n):new w(H(e))}function le(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=Number.POSITIVE_INFINITY,r=null,l=e[e.length-1];return F(l)?(r=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof l&&(t=e.pop()),null===r&&1===e.length&&e[0]instanceof w?e[0]:te(t)(re(e,r))}function ie(){return function(e){return e.lift(new oe(e))}}var oe=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,n){var t=this.connectable;t._refCount++;var r=new ue(e,t),l=n.subscribe(r);return r.closed||(r.connection=t.connect()),l},e}(),ue=function(e){function n(n,t){var r=e.call(this,n)||this;return r.connectable=t,r}return l(n,e),n.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var n=e._refCount;if(n<=0)this.connection=null;else if(e._refCount=n-1,n>1)this.connection=null;else{var t=this.connection,r=e._connection;this.connection=null,!r||t&&r!==t||r.unsubscribe()}}else this.connection=null},n}(R),se=function(e){function n(n,t){var r=e.call(this)||this;return r.source=n,r.subjectFactory=t,r._refCount=0,r._isComplete=!1,r}return l(n,e),n.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},n.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},n.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new v).add(this.source.subscribe(new ce(this.getSubject(),this))),e.closed&&(this._connection=null,e=v.EMPTY)),e},n.prototype.refCount=function(){return ie()(this)},n}(w).prototype,ae={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:se._subscribe},_isComplete:{value:se._isComplete,writable:!0},getSubject:{value:se.getSubject},connect:{value:se.connect},refCount:{value:se.refCount}},ce=function(e){function n(n,t){var r=e.call(this,n)||this;return r.connectable=t,r}return l(n,e),n.prototype._error=function(n){this._unsubscribe(),e.prototype._error.call(this,n)},n.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},n.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var n=e._connection;e._refCount=0,e._subject=null,e._connection=null,n&&n.unsubscribe()}},n}(k);function pe(){return new L}function he(e){for(var n in e)if(e[n]===he)return n;throw Error("Could not find renamed property on target object.")}function de(e,n){for(var t in n)n.hasOwnProperty(t)&&!e.hasOwnProperty(t)&&(e[t]=n[t])}var fe=he({ngInjectableDef:he}),ge=he({ngBaseDef:he});function ve(e){return{providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function me(e){return e&&e.hasOwnProperty(fe)?e[fe]:null}var ye=function(){function e(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.ngInjectableDef=void 0!==n?ve({providedIn:n.providedIn||"root",factory:n.factory}):void 0}return e.prototype.toString=function(){return"InjectionToken "+this._desc},e}(),Se="__parameters__",Ee="__prop__metadata__";function be(e){return function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];if(e){var r=e.apply(void 0,c(n));for(var l in r)this[l]=r[l]}}}function Oe(e,n,t){var r=be(n);function l(){for(var e,n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];if(this instanceof l)return r.apply(this,n),this;var i=new((e=l).bind.apply(e,c([void 0],n)));return o.annotation=i,o;function o(e,n,t){for(var r=e.hasOwnProperty(Se)?e[Se]:Object.defineProperty(e,Se,{value:[]})[Se];r.length<=t;)r.push(null);return(r[t]=r[t]||[]).push(i),e}}return t&&(l.prototype=Object.create(t.prototype)),l.prototype.ngMetadataName=e,l.annotationCls=l,l}function Re(e,n,t,r){var l=be(n);function i(){for(var e,n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];if(this instanceof i)return l.apply(this,n),this;var o=new((e=i).bind.apply(e,c([void 0],n)));return function(e,t){var l=e.constructor,i=l.hasOwnProperty(Ee)?l[Ee]:Object.defineProperty(l,Ee,{value:{}})[Ee];i[t]=i.hasOwnProperty(t)&&i[t]||[],i[t].unshift(o),r&&r.apply(void 0,c([e,t],n))}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i}var Te=new ye("AnalyzeForEntryComponents"),Ce="undefined"!=typeof window&&window,_e="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ie="undefined"!=typeof global&&global||Ce||_e,Ae=Promise.resolve(0),we=null;function Ne(){if(!we){var e=Ie.Symbol;if(e&&e.iterator)we=e.iterator;else for(var n=Object.getOwnPropertyNames(Map.prototype),t=0;t<n.length;++t){var r=n[t];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(we=r)}}return we}function Pe(e){"undefined"==typeof Zone?Ae.then(function(){e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}function De(e,n){return e===n||"number"==typeof e&&"number"==typeof n&&isNaN(e)&&isNaN(n)}function Me(e){if("string"==typeof e)return e;if(e instanceof Array)return"["+e.map(Me).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return""+e.overriddenName;if(e.name)return""+e.name;var n=e.toString();if(null==n)return""+n;var t=n.indexOf("\n");return-1===t?n:n.substring(0,t)}var ke=he({__forward_ref__:he});function Le(e){return e.__forward_ref__=Le,e.toString=function(){return Me(this())},e}function xe(e){var n=e;return"function"==typeof n&&n.hasOwnProperty(ke)&&n.__forward_ref__===Le?n():e}var Fe,Ue=function(e){return e[e.Emulated=0]="Emulated",e[e.Native=1]="Native",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}({}),He=Oe("Inject",function(e){return{token:e}}),Ge=Oe("Optional"),Be=Oe("Self"),Ve=Oe("SkipSelf"),We=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({}),je=void 0;function Ye(e){var n=je;return je=e,n}function ze(e,n){return void 0===n&&(n=We.Default),(Fe||function(e,n){if(void 0===n&&(n=We.Default),void 0===je)throw new Error("inject() must be called from an injection context");return null===je?function(e,n,t){var r=me(e);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(t&We.Optional)return null;throw new Error("Injector: NOT_FOUND ["+Me(e)+"]")}(e,0,n):je.get(e,n&We.Optional?null:void 0,n)})(e,n)}var Ke=/([A-Z])/g;function qe(e){try{return null!=e?e.toString().slice(0,30):e}catch(n){return"[ERROR] Exception while trying to serialize the value"}}function $e(e,n){var t=Xe(e),r=Xe(n);return t&&r?function(e,n,t){for(var r=e[Ne()](),l=n[Ne()]();;){var i=r.next(),o=l.next();if(i.done&&o.done)return!0;if(i.done||o.done)return!1;if(!t(i.value,o.value))return!1}}(e,n,$e):!(t||!e||"object"!=typeof e&&"function"!=typeof e||r||!n||"object"!=typeof n&&"function"!=typeof n)||De(e,n)}var Qe=function(){function e(e){this.wrapped=e}return e.wrap=function(n){return new e(n)},e.unwrap=function(n){return e.isWrapped(n)?n.wrapped:n},e.isWrapped=function(n){return n instanceof e},e}(),Ze=function(){function e(e,n,t){this.previousValue=e,this.currentValue=n,this.firstChange=t}return e.prototype.isFirstChange=function(){return this.firstChange},e}();function Xe(e){return!!Je(e)&&(Array.isArray(e)||!(e instanceof Map)&&Ne()in e)}function Je(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function en(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n]}var nn="__source",tn=new Object,rn=new ye("INJECTOR"),ln=function(){function e(){}return e.prototype.get=function(e,n){if(void 0===n&&(n=tn),n===tn)throw new Error("NullInjectorError: No provider for "+Me(e)+"!");return n},e}(),on=function(){function e(){}return e.create=function(e,n){return Array.isArray(e)?new vn(e,n):new vn(e.providers,e.parent,e.name||null)},e.THROW_IF_NOT_FOUND=tn,e.NULL=new ln,e.ngInjectableDef=ve({providedIn:"any",factory:function(){return ze(rn)}}),e.__NG_ELEMENT_ID__=function(){return un()},e}(),un=en,sn=function(e){return e},an=[],cn=sn,pn=function(){return Array.prototype.slice.call(arguments)},hn=he({provide:String,useValue:he}),dn=on.NULL,fn=/\n/gm,gn="\u0275",vn=function(){function e(e,n,t){void 0===n&&(n=dn),void 0===t&&(t=null),this.parent=n,this.source=t;var r=this._records=new Map;r.set(on,{token:on,fn:sn,deps:an,value:this,useNew:!1}),r.set(rn,{token:rn,fn:sn,deps:an,value:this,useNew:!1}),function e(n,t){if(t)if((t=xe(t))instanceof Array)for(var r=0;r<t.length;r++)e(n,t[r]);else{if("function"==typeof t)throw Sn("Function/Class not supported",t);if(!t||"object"!=typeof t||!t.provide)throw Sn("Unexpected provider",t);var l=xe(t.provide),i=function(e){var n=function(e){var n=an,t=e.deps;if(t&&t.length){n=[];for(var r=0;r<t.length;r++){var l=6;if((s=xe(t[r]))instanceof Array)for(var i=0,o=s;i<o.length;i++){var u=o[i];u instanceof Ge||u==Ge?l|=1:u instanceof Ve||u==Ve?l&=-3:u instanceof Be||u==Be?l&=-5:s=u instanceof He?u.token:xe(u)}n.push({token:s,options:l})}}else if(e.useExisting){var s;n=[{token:s=xe(e.useExisting),options:6}]}else if(!(t||hn in e))throw Sn("'deps' required",e);return n}(e),t=sn,r=an,l=!1,i=xe(e.provide);if(hn in e)r=e.useValue;else if(e.useFactory)t=e.useFactory;else if(e.useExisting);else if(e.useClass)l=!0,t=xe(e.useClass);else{if("function"!=typeof i)throw Sn("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",e);l=!0,t=i}return{deps:n,fn:t,useNew:l,value:r}}(t);if(!0===t.multi){var o=n.get(l);if(o){if(o.fn!==pn)throw mn(l)}else n.set(l,o={token:t.provide,deps:[],useNew:!1,fn:pn,value:an});o.deps.push({token:l=t,options:6})}var u=n.get(l);if(u&&u.fn==pn)throw mn(l);n.set(l,i)}}(r,e)}return e.prototype.get=function(e,n,t){void 0===t&&(t=We.Default);var r=this._records.get(e);try{return function e(n,t,r,l,i,o){try{return function(n,t,r,l,i,o){var u,s;if(!t||o&We.SkipSelf)o&We.Self||(s=l.get(n,i,We.Default));else{if((s=t.value)==cn)throw Error(gn+"Circular dependency");if(s===an){t.value=cn;var a=t.useNew,p=t.fn,h=t.deps,d=an;if(h.length){d=[];for(var f=0;f<h.length;f++){var g=h[f],v=g.options,m=2&v?r.get(g.token):void 0;d.push(e(g.token,m,r,m||4&v?l:dn,1&v?null:on.THROW_IF_NOT_FOUND,We.Default))}}t.value=s=a?new((u=p).bind.apply(u,c([void 0],d))):p.apply(void 0,d)}}return s}(n,t,r,l,i,o)}catch(u){throw u instanceof Error||(u=new Error(u)),(u.ngTempTokenPath=u.ngTempTokenPath||[]).unshift(n),t&&t.value==cn&&(t.value=an),u}}(e,r,this._records,this.parent,n,t)}catch(i){var l=i.ngTempTokenPath;throw e[nn]&&l.unshift(e[nn]),i.message=yn("\n"+i.message,l,this.source),i.ngTokenPath=l,i.ngTempTokenPath=null,i}},e.prototype.toString=function(){var e=[];return this._records.forEach(function(n,t){return e.push(Me(t))}),"StaticInjector["+e.join(", ")+"]"},e}();function mn(e){return Sn("Cannot mix multi providers and regular providers",e)}function yn(e,n,t){void 0===t&&(t=null),e=e&&"\n"===e.charAt(0)&&e.charAt(1)==gn?e.substr(2):e;var r=Me(n);if(n instanceof Array)r=n.map(Me).join(" -> ");else if("object"==typeof n){var l=[];for(var i in n)if(n.hasOwnProperty(i)){var o=n[i];l.push(i+":"+("string"==typeof o?JSON.stringify(o):Me(o)))}r="{"+l.join(", ")+"}"}return"StaticInjectorError"+(t?"("+t+")":"")+"["+r+"]: "+e.replace(fn,"\n  ")}function Sn(e,n){return new Error(yn(e,n))}var En=new ye("The presence of this token marks an injector as being the root injector."),bn=function(){return function(){}}(),On=function(){return function(){}}();function Rn(e){var n=Error("No component factory found for "+Me(e)+". Did you add it to @NgModule.entryComponents?");return n[Tn]=e,n}var Tn="ngComponent",Cn=function(){function e(){}return e.prototype.resolveComponentFactory=function(e){throw Rn(e)},e}(),_n=function(){function e(){}return e.NULL=new Cn,e}(),In=function(){function e(e,n,t){this._parent=n,this._ngModule=t,this._factories=new Map;for(var r=0;r<e.length;r++){var l=e[r];this._factories.set(l.componentType,l)}}return e.prototype.resolveComponentFactory=function(e){var n=this._factories.get(e);if(!n&&this._parent&&(n=this._parent.resolveComponentFactory(e)),!n)throw Rn(e);return new An(n,this._ngModule)},e}(),An=function(e){function n(n,t){var r=e.call(this)||this;return r.factory=n,r.ngModule=t,r.selector=n.selector,r.componentType=n.componentType,r.ngContentSelectors=n.ngContentSelectors,r.inputs=n.inputs,r.outputs=n.outputs,r}return l(n,e),n.prototype.create=function(e,n,t,r){return this.factory.create(e,n,t,r||this.ngModule)},n}(On),wn=function(){return function(){}}(),Nn=function(){return function(){}}(),Pn=function(){function e(e){this.nativeElement=e}return e.__NG_ELEMENT_ID__=function(){return Dn(e)},e}(),Dn=en,Mn=function(){return function(){}}(),kn=function(){return function(){}}(),Ln=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}({}),xn=function(){function e(){}return e.__NG_ELEMENT_ID__=function(){return Fn()},e}(),Fn=en,Un=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}({}),Hn=function(){return function(){}}(),Gn=new(function(){return function(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}())("7.2.15"),Bn=!0,Vn=!1;function Wn(){return Vn=!0,Bn}var jn=function(){function e(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),this.inertBodyElement=this.inertDocument.body,null==this.inertBodyElement){var n=this.inertDocument.createElement("html");this.inertDocument.appendChild(n),this.inertBodyElement=this.inertDocument.createElement("body"),n.appendChild(this.inertBodyElement)}this.inertBodyElement.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.inertBodyElement.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(e){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}return e.prototype.getInertBodyElement_XHR=function(e){e="<body><remove></remove>"+e+"</body>";try{e=encodeURI(e)}catch(r){return null}var n=new XMLHttpRequest;n.responseType="document",n.open("GET","data:text/html;charset=utf-8,"+e,!1),n.send(void 0);var t=n.response.body;return t.removeChild(t.firstChild),t},e.prototype.getInertBodyElement_DOMParser=function(e){e="<body><remove></remove>"+e+"</body>";try{var n=(new window.DOMParser).parseFromString(e,"text/html").body;return n.removeChild(n.firstChild),n}catch(t){return null}},e.prototype.getInertBodyElement_InertDocument=function(e){var n=this.inertDocument.createElement("template");return"content"in n?(n.innerHTML=e,n):(this.inertBodyElement.innerHTML=e,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)},e.prototype.stripCustomNsAttrs=function(e){for(var n=e.attributes,t=n.length-1;0<t;t--){var r=n.item(t).name;"xmlns:ns1"!==r&&0!==r.indexOf("ns1:")||e.removeAttribute(r)}for(var l=e.firstChild;l;)l.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(l),l=l.nextSibling},e}(),Yn=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:\/?#]*(?:[\/?#]|$))/gi,zn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Kn(e){return(e=String(e)).match(Yn)||e.match(zn)?e:(Wn()&&console.warn("WARNING: sanitizing unsafe URL value "+e+" (see http://g.co/ng/security#xss)"),"unsafe:"+e)}function qn(e){var n,t,r={};try{for(var l=s(e.split(",")),i=l.next();!i.done;i=l.next())r[i.value]=!0}catch(o){n={error:o}}finally{try{i&&!i.done&&(t=l.return)&&t.call(l)}finally{if(n)throw n.error}}return r}function $n(){for(var e,n,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var l={};try{for(var i=s(t),o=i.next();!o.done;o=i.next()){var u=o.value;for(var a in u)u.hasOwnProperty(a)&&(l[a]=!0)}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return l}var Qn,Zn=qn("area,br,col,hr,img,wbr"),Xn=qn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Jn=qn("rp,rt"),et=$n(Jn,Xn),nt=$n(Zn,$n(Xn,qn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),$n(Jn,qn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),et),tt=qn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),rt=qn("srcset"),lt=$n(tt,rt,qn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width")),it=qn("script,style,template"),ot=function(){function e(){this.sanitizedSomething=!1,this.buf=[]}return e.prototype.sanitizeChildren=function(e){for(var n=e.firstChild,t=!0;n;)if(n.nodeType===Node.ELEMENT_NODE?t=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,t&&n.firstChild)n=n.firstChild;else for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);var r=this.checkClobberedElement(n,n.nextSibling);if(r){n=r;break}n=this.checkClobberedElement(n,n.parentNode)}return this.buf.join("")},e.prototype.startElement=function(e){var n,t=e.nodeName.toLowerCase();if(!nt.hasOwnProperty(t))return this.sanitizedSomething=!0,!it.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);for(var r=e.attributes,l=0;l<r.length;l++){var i=r.item(l),o=i.name,u=o.toLowerCase();if(lt.hasOwnProperty(u)){var s=i.value;tt[u]&&(s=Kn(s)),rt[u]&&(n=s,s=(n=String(n)).split(",").map(function(e){return Kn(e.trim())}).join(", ")),this.buf.push(" ",o,'="',at(s),'"')}else this.sanitizedSomething=!0}return this.buf.push(">"),!0},e.prototype.endElement=function(e){var n=e.nodeName.toLowerCase();nt.hasOwnProperty(n)&&!Zn.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))},e.prototype.chars=function(e){this.buf.push(at(e))},e.prototype.checkClobberedElement=function(e,n){if(n&&(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+e.outerHTML);return n},e}(),ut=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,st=/([^\#-~ |!])/g;function at(e){return e.replace(/&/g,"&amp;").replace(ut,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(st,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function ct(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var pt=function(e){function n(n){void 0===n&&(n=!1);var t=e.call(this)||this;return t.__isAsync=n,t}return l(n,e),n.prototype.emit=function(n){e.prototype.next.call(this,n)},n.prototype.subscribe=function(n,t,r){var l,i=function(e){return null},o=function(){return null};n&&"object"==typeof n?(l=this.__isAsync?function(e){setTimeout(function(){return n.next(e)})}:function(e){n.next(e)},n.error&&(i=this.__isAsync?function(e){setTimeout(function(){return n.error(e)})}:function(e){n.error(e)}),n.complete&&(o=this.__isAsync?function(){setTimeout(function(){return n.complete()})}:function(){n.complete()})):(l=this.__isAsync?function(e){setTimeout(function(){return n(e)})}:function(e){n(e)},t&&(i=this.__isAsync?function(e){setTimeout(function(){return t(e)})}:function(e){t(e)}),r&&(o=this.__isAsync?function(){setTimeout(function(){return r()})}:function(){r()}));var u=e.prototype.subscribe.call(this,l,i,o);return n instanceof v&&n.add(u),u},n}(L),ht=function(){function e(){}return e.__NG_ELEMENT_ID__=function(){return dt(e,Pn)},e}(),dt=en,ft=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),gt=/^url\(([^)]+)\)$/,vt=function(){return function(){}}(),mt=Re("Input",function(e){return{bindingPropertyName:e}},void 0,function(e){return function(e,n){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];var l=e.constructor;l.hasOwnProperty(ge)||function(e){var n=e.constructor,t=n.ngBaseDef,r=n.ngBaseDef={inputs:{},outputs:{},declaredInputs:{}};t&&(de(r.inputs,t.inputs),de(r.outputs,t.outputs),de(r.declaredInputs,t.declaredInputs))}(e),(function(e){return e.inputs||{}}(l.ngBaseDef))[n]=t[0]}}()),yt=Re("HostBinding",function(e){return{hostPropertyName:e}}),St="ngDebugContext",Et="ngOriginalError",bt="ngErrorLogger";function Ot(e){return e[St]}function Rt(e){return e[Et]}function Tt(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];e.error.apply(e,c(n))}var Ct=function(){function e(){this._console=console}return e.prototype.handleError=function(e){var n=this._findOriginalError(e),t=this._findContext(e),r=function(e){return e[bt]||Tt}(e);r(this._console,"ERROR",e),n&&r(this._console,"ORIGINAL ERROR",n),t&&r(this._console,"ERROR CONTEXT",t)},e.prototype._findContext=function(e){return e?Ot(e)?Ot(e):this._findContext(Rt(e)):null},e.prototype._findOriginalError=function(e){for(var n=Rt(e);n&&Rt(n);)n=Rt(n);return n},e}();function _t(e){return!!e&&"function"==typeof e.then}function It(e){return!!e&&"function"==typeof e.subscribe}var At=new ye("Application Initializer"),wt=function(){function e(e){var n=this;this.appInits=e,this.initialized=!1,this.done=!1,this.donePromise=new Promise(function(e,t){n.resolve=e,n.reject=t})}return e.prototype.runInitializers=function(){var e=this;if(!this.initialized){var n=[],t=function(){e.done=!0,e.resolve()};if(this.appInits)for(var r=0;r<this.appInits.length;r++){var l=this.appInits[r]();_t(l)&&n.push(l)}Promise.all(n).then(function(){t()}).catch(function(n){e.reject(n)}),0===n.length&&t(),this.initialized=!0}},e}(),Nt=new ye("AppId");function Pt(){return""+Dt()+Dt()+Dt()}function Dt(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var Mt=new ye("Platform Initializer"),kt=new ye("Platform ID"),Lt=new ye("appBootstrapListener"),xt=function(){function e(){}return e.prototype.log=function(e){console.log(e)},e.prototype.warn=function(e){console.warn(e)},e}();function Ft(){throw new Error("Runtime compiler is not loaded")}var Ut,Ht,Gt=Ft,Bt=Ft,Vt=Ft,Wt=Ft,jt=function(){function e(){this.compileModuleSync=Gt,this.compileModuleAsync=Bt,this.compileModuleAndAllComponentsSync=Vt,this.compileModuleAndAllComponentsAsync=Wt}return e.prototype.clearCache=function(){},e.prototype.clearCacheFor=function(e){},e.prototype.getModuleId=function(e){},e}(),Yt=function(){return function(){}}();function zt(){var e=Ie.wtf;return!(!e||!(Ut=e.trace)||(Ht=Ut.events,0))}var Kt=zt();function qt(e,n){return null}var $t=Kt?function(e,n){return void 0===n&&(n=null),Ht.createScope(e,n)}:function(e,n){return qt},Qt=Kt?function(e,n){return Ut.leaveScope(e,n),n}:function(e,n){return n},Zt=function(){function e(e){var n,t=e.enableLongStackTrace,r=void 0!==t&&t;if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new pt(!1),this.onMicrotaskEmpty=new pt(!1),this.onStable=new pt(!1),this.onError=new pt(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(n=this)._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(e,t,r,l,i,o){try{return nr(n),e.invokeTask(r,l,i,o)}finally{tr(n)}},onInvoke:function(e,t,r,l,i,o,u){try{return nr(n),e.invoke(r,l,i,o,u)}finally{tr(n)}},onHasTask:function(e,t,r,l){e.hasTask(r,l),t===r&&("microTask"==l.change?(n.hasPendingMicrotasks=l.microTask,er(n)):"macroTask"==l.change&&(n.hasPendingMacrotasks=l.macroTask))},onHandleError:function(e,t,r,l){return e.handleError(r,l),n.runOutsideAngular(function(){return n.onError.emit(l)}),!1}})}return e.isInAngularZone=function(){return!0===Zone.current.get("isAngularZone")},e.assertInAngularZone=function(){if(!e.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")},e.assertNotInAngularZone=function(){if(e.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")},e.prototype.run=function(e,n,t){return this._inner.run(e,n,t)},e.prototype.runTask=function(e,n,t,r){var l=this._inner,i=l.scheduleEventTask("NgZoneEvent: "+r,e,Jt,Xt,Xt);try{return l.runTask(i,n,t)}finally{l.cancelTask(i)}},e.prototype.runGuarded=function(e,n,t){return this._inner.runGuarded(e,n,t)},e.prototype.runOutsideAngular=function(e){return this._outer.run(e)},e}();function Xt(){}var Jt={};function er(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(function(){return e.onStable.emit(null)})}finally{e.isStable=!0}}}function nr(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function tr(e){e._nesting--,er(e)}var rr,lr=function(){function e(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new pt,this.onMicrotaskEmpty=new pt,this.onStable=new pt,this.onError=new pt}return e.prototype.run=function(e){return e()},e.prototype.runGuarded=function(e){return e()},e.prototype.runOutsideAngular=function(e){return e()},e.prototype.runTask=function(e){return e()},e}(),ir=function(){function e(e){var n=this;this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(function(){n.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}return e.prototype._watchAngularEvents=function(){var e=this;this._ngZone.onUnstable.subscribe({next:function(){e._didWork=!0,e._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){e._ngZone.onStable.subscribe({next:function(){Zt.assertNotInAngularZone(),Pe(function(){e._isZoneStable=!0,e._runCallbacksIfReady()})}})})},e.prototype.increasePendingRequestCount=function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount},e.prototype.decreasePendingRequestCount=function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount},e.prototype.isStable=function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks},e.prototype._runCallbacksIfReady=function(){var e=this;if(this.isStable())Pe(function(){for(;0!==e._callbacks.length;){var n=e._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(e._didWork)}e._didWork=!1});else{var n=this.getPendingTasks();this._callbacks=this._callbacks.filter(function(e){return!e.updateCb||!e.updateCb(n)||(clearTimeout(e.timeoutId),!1)}),this._didWork=!0}},e.prototype.getPendingTasks=function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(function(e){return{source:e.source,creationLocation:e.creationLocation,data:e.data}}):[]},e.prototype.addCallback=function(e,n,t){var r=this,l=-1;n&&n>0&&(l=setTimeout(function(){r._callbacks=r._callbacks.filter(function(e){return e.timeoutId!==l}),e(r._didWork,r.getPendingTasks())},n)),this._callbacks.push({doneCb:e,timeoutId:l,updateCb:t})},e.prototype.whenStable=function(e,n,t){if(t&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(e,n,t),this._runCallbacksIfReady()},e.prototype.getPendingRequestCount=function(){return this._pendingCount},e.prototype.findProviders=function(e,n,t){return[]},e}(),or=function(){function e(){this._applications=new Map,ur.addToWindow(this)}return e.prototype.registerApplication=function(e,n){this._applications.set(e,n)},e.prototype.unregisterApplication=function(e){this._applications.delete(e)},e.prototype.unregisterAllApplications=function(){this._applications.clear()},e.prototype.getTestability=function(e){return this._applications.get(e)||null},e.prototype.getAllTestabilities=function(){return Array.from(this._applications.values())},e.prototype.getAllRootElements=function(){return Array.from(this._applications.keys())},e.prototype.findTestabilityInTree=function(e,n){return void 0===n&&(n=!0),ur.findTestabilityInTree(this,e,n)},o([u("design:paramtypes",[])],e)}(),ur=new(function(){function e(){}return e.prototype.addToWindow=function(e){},e.prototype.findTestabilityInTree=function(e,n,t){return null},e}()),sr=new ye("AllowMultipleToken"),ar=function(){return function(e,n){this.name=e,this.token=n}}();function cr(e,n,t){void 0===t&&(t=[]);var r="Platform: "+n,l=new ye(r);return function(n){void 0===n&&(n=[]);var i=pr();if(!i||i.injector.get(sr,!1))if(e)e(t.concat(n).concat({provide:l,useValue:!0}));else{var o=t.concat(n).concat({provide:l,useValue:!0});!function(e){if(rr&&!rr.destroyed&&!rr.injector.get(sr,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");rr=e.get(hr);var n=e.get(Mt,null);n&&n.forEach(function(e){return e()})}(on.create({providers:o,name:r}))}return function(e){var n=pr();if(!n)throw new Error("No platform exists!");if(!n.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return n}(l)}}function pr(){return rr&&!rr.destroyed?rr:null}var hr=function(){function e(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return e.prototype.bootstrapModuleFactory=function(e,n){var t,r=this,l="noop"===(t=n?n.ngZone:void 0)?new lr:("zone.js"===t?void 0:t)||new Zt({enableLongStackTrace:Wn()}),i=[{provide:Zt,useValue:l}];return l.run(function(){var n=on.create({providers:i,parent:r.injector,name:e.moduleType.name}),t=e.create(n),o=t.injector.get(Ct,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return t.onDestroy(function(){return gr(r._modules,t)}),l.runOutsideAngular(function(){return l.onError.subscribe({next:function(e){o.handleError(e)}})}),function(e,n,l){try{var i=((o=t.injector.get(wt)).runInitializers(),o.donePromise.then(function(){return r._moduleDoBootstrap(t),t}));return _t(i)?i.catch(function(t){throw n.runOutsideAngular(function(){return e.handleError(t)}),t}):i}catch(u){throw n.runOutsideAngular(function(){return e.handleError(u)}),u}var o}(o,l)})},e.prototype.bootstrapModule=function(e,n){var t=this;void 0===n&&(n=[]);var r=dr({},n);return function(e,n,t){return e.get(Yt).createCompiler([n]).compileModuleAsync(t)}(this.injector,r,e).then(function(e){return t.bootstrapModuleFactory(e,r)})},e.prototype._moduleDoBootstrap=function(e){var n=e.injector.get(fr);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(function(e){return n.bootstrap(e)});else{if(!e.instance.ngDoBootstrap)throw new Error("The module "+Me(e.instance.constructor)+' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.');e.instance.ngDoBootstrap(n)}this._modules.push(e)},e.prototype.onDestroy=function(e){this._destroyListeners.push(e)},Object.defineProperty(e.prototype,"injector",{get:function(){return this._injector},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(function(e){return e.destroy()}),this._destroyListeners.forEach(function(e){return e()}),this._destroyed=!0},Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!0,configurable:!0}),e}();function dr(e,n){return Array.isArray(n)?n.reduce(dr,e):i({},e,n)}var fr=function(){function e(e,n,t,r,l,i){var o=this;this._zone=e,this._console=n,this._injector=t,this._exceptionHandler=r,this._componentFactoryResolver=l,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=Wn(),this._zone.onMicrotaskEmpty.subscribe({next:function(){o._zone.run(function(){o.tick()})}});var u=new w(function(e){o._stable=o._zone.isStable&&!o._zone.hasPendingMacrotasks&&!o._zone.hasPendingMicrotasks,o._zone.runOutsideAngular(function(){e.next(o._stable),e.complete()})}),s=new w(function(e){var n;o._zone.runOutsideAngular(function(){n=o._zone.onStable.subscribe(function(){Zt.assertNotInAngularZone(),Pe(function(){o._stable||o._zone.hasPendingMacrotasks||o._zone.hasPendingMicrotasks||(o._stable=!0,e.next(!0))})})});var t=o._zone.onUnstable.subscribe(function(){Zt.assertInAngularZone(),o._stable&&(o._stable=!1,o._zone.runOutsideAngular(function(){e.next(!1)}))});return function(){n.unsubscribe(),t.unsubscribe()}});this.isStable=le(u,s.pipe(function(e){return ie()((n=pe,function(e){var t;t="function"==typeof n?n:function(){return n};var r=Object.create(e,ae);return r.source=e,r.subjectFactory=t,r})(e));var n}))}var n;return n=e,e.prototype.bootstrap=function(e,n){var t,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");t=e instanceof On?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(t.componentType);var l=t instanceof An?null:this._injector.get(wn),i=t.create(on.NULL,[],n||t.selector,l);i.onDestroy(function(){r._unloadComponent(i)});var o=i.injector.get(ir,null);return o&&i.injector.get(or).registerApplication(i.location.nativeElement,o),this._loadComponent(i),Wn()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),i},e.prototype.tick=function(){var e=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");var t=n._tickScope();try{this._runningTick=!0,this._views.forEach(function(e){return e.detectChanges()}),this._enforceNoNewChanges&&this._views.forEach(function(e){return e.checkNoChanges()})}catch(r){this._zone.runOutsideAngular(function(){return e._exceptionHandler.handleError(r)})}finally{this._runningTick=!1,Qt(t)}},e.prototype.attachView=function(e){var n=e;this._views.push(n),n.attachToAppRef(this)},e.prototype.detachView=function(e){var n=e;gr(this._views,n),n.detachFromAppRef()},e.prototype._loadComponent=function(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(Lt,[]).concat(this._bootstrapListeners).forEach(function(n){return n(e)})},e.prototype._unloadComponent=function(e){this.detachView(e.hostView),gr(this.components,e)},e.prototype.ngOnDestroy=function(){this._views.slice().forEach(function(e){return e.destroy()})},Object.defineProperty(e.prototype,"viewCount",{get:function(){return this._views.length},enumerable:!0,configurable:!0}),e._tickScope=$t("ApplicationRef#tick()"),e}();function gr(e,n){var t=e.indexOf(n);t>-1&&e.splice(t,1)}var vr=function(){function e(){this.dirty=!0,this._results=[],this.changes=new pt,this.length=0}return e.prototype.map=function(e){return this._results.map(e)},e.prototype.filter=function(e){return this._results.filter(e)},e.prototype.find=function(e){return this._results.find(e)},e.prototype.reduce=function(e,n){return this._results.reduce(e,n)},e.prototype.forEach=function(e){this._results.forEach(e)},e.prototype.some=function(e){return this._results.some(e)},e.prototype.toArray=function(){return this._results.slice()},e.prototype[Ne()]=function(){return this._results[Ne()]()},e.prototype.toString=function(){return this._results.toString()},e.prototype.reset=function(e){this._results=function e(n){return n.reduce(function(n,t){var r=Array.isArray(t)?e(t):t;return n.concat(r)},[])}(e),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]},e.prototype.notifyOnChanges=function(){this.changes.emit(this)},e.prototype.setDirty=function(){this.dirty=!0},e.prototype.destroy=function(){this.changes.complete(),this.changes.unsubscribe()},e}(),mr=function(){return function(){}}(),yr={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},Sr=function(){function e(e,n){this._compiler=e,this._config=n||yr}return e.prototype.load=function(e){return this._compiler instanceof jt?this.loadFactory(e):this.loadAndCompile(e)},e.prototype.loadAndCompile=function(e){var n=this,r=a(e.split("#"),2),l=r[0],i=r[1];return void 0===i&&(i="default"),t("crnd")(l).then(function(e){return e[i]}).then(function(e){return Er(e,l,i)}).then(function(e){return n._compiler.compileModuleAsync(e)})},e.prototype.loadFactory=function(e){var n=a(e.split("#"),2),r=n[0],l=n[1],i="NgFactory";return void 0===l&&(l="default",i=""),t("crnd")(this._config.factoryPathPrefix+r+this._config.factoryPathSuffix).then(function(e){return e[l+i]}).then(function(e){return Er(e,r,l)})},e}();function Er(e,n,t){if(!e)throw new Error("Cannot find '"+t+"' in '"+n+"'");return e}var br=function(){function e(){}return e.__NG_ELEMENT_ID__=function(){return Or(e,Pn)},e}(),Or=en,Rr=function(){function e(){}return e.__NG_ELEMENT_ID__=function(){return Tr()},e}(),Tr=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n]},Cr=function(){return function(e,n){this.name=e,this.callback=n}}(),_r=function(){function e(e,n,t){this.listeners=[],this.parent=null,this._debugContext=t,this.nativeNode=e,n&&n instanceof Ir&&n.addChild(this)}return Object.defineProperty(e.prototype,"injector",{get:function(){return this._debugContext.injector},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentInstance",{get:function(){return this._debugContext.component},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this._debugContext.context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"references",{get:function(){return this._debugContext.references},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"providerTokens",{get:function(){return this._debugContext.providerTokens},enumerable:!0,configurable:!0}),e}(),Ir=function(e){function n(n,t,r){var l=e.call(this,n,t,r)||this;return l.properties={},l.attributes={},l.classes={},l.styles={},l.childNodes=[],l.nativeElement=n,l}return l(n,e),n.prototype.addChild=function(e){e&&(this.childNodes.push(e),e.parent=this)},n.prototype.removeChild=function(e){var n=this.childNodes.indexOf(e);-1!==n&&(e.parent=null,this.childNodes.splice(n,1))},n.prototype.insertChildrenAfter=function(e,n){var t,r=this,l=this.childNodes.indexOf(e);-1!==l&&((t=this.childNodes).splice.apply(t,c([l+1,0],n)),n.forEach(function(n){n.parent&&n.parent.removeChild(n),e.parent=r}))},n.prototype.insertBefore=function(e,n){var t=this.childNodes.indexOf(e);-1===t?this.addChild(n):(n.parent&&n.parent.removeChild(n),n.parent=this,this.childNodes.splice(t,0,n))},n.prototype.query=function(e){return this.queryAll(e)[0]||null},n.prototype.queryAll=function(e){var n=[];return function e(n,t,r){n.childNodes.forEach(function(n){n instanceof Ir&&(t(n)&&r.push(n),e(n,t,r))})}(this,e,n),n},n.prototype.queryAllNodes=function(e){var n=[];return function e(n,t,r){n instanceof Ir&&n.childNodes.forEach(function(n){t(n)&&r.push(n),n instanceof Ir&&e(n,t,r)})}(this,e,n),n},Object.defineProperty(n.prototype,"children",{get:function(){return this.childNodes.filter(function(e){return e instanceof n})},enumerable:!0,configurable:!0}),n.prototype.triggerEventHandler=function(e,n){this.listeners.forEach(function(t){t.name==e&&t.callback(n)})},n}(_r),Ar=new Map,wr=function(e){return Ar.get(e)||null};function Nr(e){Ar.set(e.nativeNode,e)}var Pr=function(){function e(){}return e.prototype.supports=function(e){return Xe(e)},e.prototype.create=function(e){return new Mr(e)},e}(),Dr=function(e,n){return n},Mr=function(){function e(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Dr}return e.prototype.forEachItem=function(e){var n;for(n=this._itHead;null!==n;n=n._next)e(n)},e.prototype.forEachOperation=function(e){for(var n=this._itHead,t=this._removalsHead,r=0,l=null;n||t;){var i=!t||n&&n.currentIndex<Fr(t,r,l)?n:t,o=Fr(i,r,l),u=i.currentIndex;if(i===t)r--,t=t._nextRemoved;else if(n=n._next,null==i.previousIndex)r++;else{l||(l=[]);var s=o-r,a=u-r;if(s!=a){for(var c=0;c<s;c++){var p=c<l.length?l[c]:l[c]=0,h=p+c;a<=h&&h<s&&(l[c]=p+1)}l[i.previousIndex]=a-s}}o!==u&&e(i,o,u)}},e.prototype.forEachPreviousItem=function(e){var n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)},e.prototype.forEachAddedItem=function(e){var n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)},e.prototype.forEachMovedItem=function(e){var n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)},e.prototype.forEachRemovedItem=function(e){var n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)},e.prototype.forEachIdentityChange=function(e){var n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)},e.prototype.diff=function(e){if(null==e&&(e=[]),!Xe(e))throw new Error("Error trying to diff '"+Me(e)+"'. Only arrays and iterables are allowed");return this.check(e)?this:null},e.prototype.onDestroy=function(){},e.prototype.check=function(e){var n=this;this._reset();var t,r,l,i=this._itHead,o=!1;if(Array.isArray(e)){this.length=e.length;for(var u=0;u<this.length;u++)l=this._trackByFn(u,r=e[u]),null!==i&&De(i.trackById,l)?(o&&(i=this._verifyReinsertion(i,r,l,u)),De(i.item,r)||this._addIdentityChange(i,r)):(i=this._mismatch(i,r,l,u),o=!0),i=i._next}else t=0,function(e,n){if(Array.isArray(e))for(var t=0;t<e.length;t++)n(e[t]);else for(var r=e[Ne()](),l=void 0;!(l=r.next()).done;)n(l.value)}(e,function(e){l=n._trackByFn(t,e),null!==i&&De(i.trackById,l)?(o&&(i=n._verifyReinsertion(i,e,l,t)),De(i.item,e)||n._addIdentityChange(i,e)):(i=n._mismatch(i,e,l,t),o=!0),i=i._next,t++}),this.length=t;return this._truncate(i),this.collection=e,this.isDirty},Object.defineProperty(e.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead},enumerable:!0,configurable:!0}),e.prototype._reset=function(){if(this.isDirty){var e=void 0,n=void 0;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=n)e.previousIndex=e.currentIndex,n=e._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}},e.prototype._mismatch=function(e,n,t,r){var l;return null===e?l=this._itTail:(l=e._prev,this._remove(e)),null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(t,r))?(De(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,l,r)):null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(t,null))?(De(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,l,r)):e=this._addAfter(new kr(n,t),l,r),e},e.prototype._verifyReinsertion=function(e,n,t,r){var l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(t,null);return null!==l?e=this._reinsertAfter(l,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e},e.prototype._truncate=function(e){for(;null!==e;){var n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)},e.prototype._reinsertAfter=function(e,n,t){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);var r=e._prevRemoved,l=e._nextRemoved;return null===r?this._removalsHead=l:r._nextRemoved=l,null===l?this._removalsTail=r:l._prevRemoved=r,this._insertAfter(e,n,t),this._addToMoves(e,t),e},e.prototype._moveAfter=function(e,n,t){return this._unlink(e),this._insertAfter(e,n,t),this._addToMoves(e,t),e},e.prototype._addAfter=function(e,n,t){return this._insertAfter(e,n,t),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e},e.prototype._insertAfter=function(e,n,t){var r=null===n?this._itHead:n._next;return e._next=r,e._prev=n,null===r?this._itTail=e:r._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new xr),this._linkedRecords.put(e),e.currentIndex=t,e},e.prototype._remove=function(e){return this._addToRemovals(this._unlink(e))},e.prototype._unlink=function(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);var n=e._prev,t=e._next;return null===n?this._itHead=t:n._next=t,null===t?this._itTail=n:t._prev=n,e},e.prototype._addToMoves=function(e,n){return e.previousIndex===n?e:(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e,e)},e.prototype._addToRemovals=function(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new xr),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e},e.prototype._addIdentityChange=function(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e},e}(),kr=function(){return function(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}(),Lr=function(){function e(){this._head=null,this._tail=null}return e.prototype.add=function(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)},e.prototype.get=function(e,n){var t;for(t=this._head;null!==t;t=t._nextDup)if((null===n||n<=t.currentIndex)&&De(t.trackById,e))return t;return null},e.prototype.remove=function(e){var n=e._prevDup,t=e._nextDup;return null===n?this._head=t:n._nextDup=t,null===t?this._tail=n:t._prevDup=n,null===this._head},e}(),xr=function(){function e(){this.map=new Map}return e.prototype.put=function(e){var n=e.trackById,t=this.map.get(n);t||(t=new Lr,this.map.set(n,t)),t.add(e)},e.prototype.get=function(e,n){var t=this.map.get(e);return t?t.get(e,n):null},e.prototype.remove=function(e){var n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e},Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this.map.size},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this.map.clear()},e}();function Fr(e,n,t){var r=e.previousIndex;if(null===r)return r;var l=0;return t&&r<t.length&&(l=t[r]),r+n+l}var Ur=function(){function e(){}return e.prototype.supports=function(e){return e instanceof Map||Je(e)},e.prototype.create=function(){return new Hr},e}(),Hr=function(){function e(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return Object.defineProperty(e.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead},enumerable:!0,configurable:!0}),e.prototype.forEachItem=function(e){var n;for(n=this._mapHead;null!==n;n=n._next)e(n)},e.prototype.forEachPreviousItem=function(e){var n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)e(n)},e.prototype.forEachChangedItem=function(e){var n;for(n=this._changesHead;null!==n;n=n._nextChanged)e(n)},e.prototype.forEachAddedItem=function(e){var n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)},e.prototype.forEachRemovedItem=function(e){var n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)},e.prototype.diff=function(e){if(e){if(!(e instanceof Map||Je(e)))throw new Error("Error trying to diff '"+Me(e)+"'. Only maps and objects are allowed")}else e=new Map;return this.check(e)?this:null},e.prototype.onDestroy=function(){},e.prototype.check=function(e){var n=this;this._reset();var t=this._mapHead;if(this._appendAfter=null,this._forEach(e,function(e,r){if(t&&t.key===r)n._maybeAddToChanges(t,e),n._appendAfter=t,t=t._next;else{var l=n._getOrCreateRecordForKey(r,e);t=n._insertBeforeOrAppend(t,l)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(var r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty},e.prototype._insertBeforeOrAppend=function(e,n){if(e){var t=e._prev;return n._next=e,n._prev=t,e._prev=n,t&&(t._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null},e.prototype._getOrCreateRecordForKey=function(e,n){if(this._records.has(e)){var t=this._records.get(e);this._maybeAddToChanges(t,n);var r=t._prev,l=t._next;return r&&(r._next=l),l&&(l._prev=r),t._next=null,t._prev=null,t}var i=new Gr(e);return this._records.set(e,i),i.currentValue=n,this._addToAdditions(i),i},e.prototype._reset=function(){if(this.isDirty){var e=void 0;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}},e.prototype._maybeAddToChanges=function(e,n){De(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))},e.prototype._addToAdditions=function(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)},e.prototype._addToChanges=function(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)},e.prototype._forEach=function(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(function(t){return n(e[t],t)})},e}(),Gr=function(){return function(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}(),Br=function(){function e(e){this.factories=e}return e.create=function(n,t){if(null!=t){var r=t.factories.slice();n=n.concat(r)}return new e(n)},e.extend=function(n){return{provide:e,useFactory:function(t){if(!t)throw new Error("Cannot extend IterableDiffers without a parent injector");return e.create(n,t)},deps:[[e,new Ve,new Ge]]}},e.prototype.find=function(e){var n,t=this.factories.find(function(n){return n.supports(e)});if(null!=t)return t;throw new Error("Cannot find a differ supporting object '"+e+"' of type '"+((n=e).name||typeof n)+"'")},e.ngInjectableDef=ve({providedIn:"root",factory:function(){return new e([new Pr])}}),e}(),Vr=function(){function e(e){this.factories=e}return e.create=function(n,t){if(t){var r=t.factories.slice();n=n.concat(r)}return new e(n)},e.extend=function(n){return{provide:e,useFactory:function(t){if(!t)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return e.create(n,t)},deps:[[e,new Ve,new Ge]]}},e.prototype.find=function(e){var n=this.factories.find(function(n){return n.supports(e)});if(n)return n;throw new Error("Cannot find a differ supporting object '"+e+"'")},e.ngInjectableDef=ve({providedIn:"root",factory:function(){return new e([new Ur])}}),e}(),Wr=[new Ur],jr=new Br([new Pr]),Yr=new Vr(Wr),zr=cr(null,"core",[{provide:kt,useValue:"unknown"},{provide:hr,deps:[on]},{provide:or,deps:[]},{provide:xt,deps:[]}]),Kr=new ye("LocaleId");function qr(){return jr}function $r(){return Yr}function Qr(e){return e||"en-US"}var Zr=function(){return function(e){}}();function Xr(e,n,t){var r=e.state,l=1792&r;return l===n?(e.state=-1793&r|t,e.initIndex=-1,!0):l===t}function Jr(e,n,t){return(1792&e.state)===n&&e.initIndex<=t&&(e.initIndex=t+1,!0)}function el(e,n){return e.nodes[n]}function nl(e,n){return e.nodes[n]}function tl(e,n){return e.nodes[n]}function rl(e,n){return e.nodes[n]}function ll(e,n){return e.nodes[n]}var il={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0};function ol(e,n,t,r){var l="ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '"+n+"'. Current value: '"+t+"'.";return r&&(l+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(e,n){var t=new Error(e);return ul(t,n),t}(l,e)}function ul(e,n){e[St]=n,e[bt]=n.logError.bind(n)}function sl(e){return new Error("ViewDestroyedError: Attempt to use a destroyed view: "+e)}var al=function(){},cl=new Map;function pl(e){var n=cl.get(e);return n||(n=Me(e)+"_"+cl.size,cl.set(e,n)),n}function hl(e,n,t,r){if(Qe.isWrapped(r)){r=Qe.unwrap(r);var l=e.def.nodes[n].bindingIndex+t,i=Qe.unwrap(e.oldValues[l]);e.oldValues[l]=new Qe(i)}return r}var dl="$$undefined",fl="$$empty";function gl(e){return{id:dl,styles:e.styles,encapsulation:e.encapsulation,data:e.data}}var vl=0;function ml(e,n,t,r){return!(!(2&e.state)&&De(e.oldValues[n.bindingIndex+t],r))}function yl(e,n,t,r){return!!ml(e,n,t,r)&&(e.oldValues[n.bindingIndex+t]=r,!0)}function Sl(e,n,t,r){var l=e.oldValues[n.bindingIndex+t];if(1&e.state||!$e(l,r)){var i=n.bindings[t].name;throw ol(il.createDebugContext(e,n.nodeIndex),i+": "+l,i+": "+r,0!=(1&e.state))}}function El(e){for(var n=e;n;)2&n.def.flags&&(n.state|=8),n=n.viewContainerParent||n.parent}function bl(e,n){for(var t=e;t&&t!==n;)t.state|=64,t=t.viewContainerParent||t.parent}function Ol(e,n,t,r){try{return El(33554432&e.def.nodes[n].flags?nl(e,n).componentView:e),il.handleEvent(e,n,t,r)}catch(l){e.root.errorHandler.handleError(l)}}function Rl(e){return e.parent?nl(e.parent,e.parentNodeDef.nodeIndex):null}function Tl(e){return e.parent?e.parentNodeDef.parent:null}function Cl(e,n){switch(201347067&n.flags){case 1:return nl(e,n.nodeIndex).renderElement;case 2:return el(e,n.nodeIndex).renderText}}function _l(e){return!!e.parent&&!!(32768&e.parentNodeDef.flags)}function Il(e){return!(!e.parent||32768&e.parentNodeDef.flags)}function Al(e){return 1<<e%32}function wl(e){var n={},t=0,r={};return e&&e.forEach(function(e){var l=a(e,2),i=l[0],o=l[1];"number"==typeof i?(n[i]=o,t|=Al(i)):r[i]=o}),{matchedQueries:n,references:r,matchedQueryIds:t}}function Nl(e,n){return e.map(function(e){var t,r,l;return Array.isArray(e)?(l=(t=a(e,2))[0],r=t[1]):(l=0,r=e),r&&("function"==typeof r||"object"==typeof r)&&n&&Object.defineProperty(r,nn,{value:n,configurable:!0}),{flags:l,token:r,tokenKey:pl(r)}})}function Pl(e,n,t){var r=t.renderParent;return r?0==(1&r.flags)||0==(33554432&r.flags)||r.element.componentRendererType&&r.element.componentRendererType.encapsulation===Ue.Native?nl(e,t.renderParent.nodeIndex).renderElement:void 0:n}var Dl=new WeakMap;function Ml(e){var n=Dl.get(e);return n||((n=e(function(){return al})).factory=e,Dl.set(e,n)),n}function kl(e,n,t,r,l){3===n&&(t=e.renderer.parentNode(Cl(e,e.def.lastRenderRootNode))),Ll(e,n,0,e.def.nodes.length-1,t,r,l)}function Ll(e,n,t,r,l,i,o){for(var u=t;u<=r;u++){var s=e.def.nodes[u];11&s.flags&&Fl(e,s,n,l,i,o),u+=s.childCount}}function xl(e,n,t,r,l,i){for(var o=e;o&&!_l(o);)o=o.parent;for(var u=o.parent,s=Tl(o),a=s.nodeIndex+s.childCount,c=s.nodeIndex+1;c<=a;c++){var p=u.def.nodes[c];p.ngContentIndex===n&&Fl(u,p,t,r,l,i),c+=p.childCount}if(!u.parent){var h=e.root.projectableNodes[n];if(h)for(c=0;c<h.length;c++)Ul(e,h[c],t,r,l,i)}}function Fl(e,n,t,r,l,i){if(8&n.flags)xl(e,n.ngContent.index,t,r,l,i);else{var o=Cl(e,n);if(3===t&&33554432&n.flags&&48&n.bindingFlags?(16&n.bindingFlags&&Ul(e,o,t,r,l,i),32&n.bindingFlags&&Ul(nl(e,n.nodeIndex).componentView,o,t,r,l,i)):Ul(e,o,t,r,l,i),16777216&n.flags)for(var u=nl(e,n.nodeIndex).viewContainer._embeddedViews,s=0;s<u.length;s++)kl(u[s],t,r,l,i);1&n.flags&&!n.element.name&&Ll(e,t,n.nodeIndex+1,n.nodeIndex+n.childCount,r,l,i)}}function Ul(e,n,t,r,l,i){var o=e.renderer;switch(t){case 1:o.appendChild(r,n);break;case 2:o.insertBefore(r,n,l);break;case 3:o.removeChild(r,n);break;case 0:i.push(n)}}var Hl=/^:([^:]+):(.+)$/;function Gl(e){if(":"===e[0]){var n=e.match(Hl);return[n[1],n[2]]}return["",e]}function Bl(e){for(var n=0,t=0;t<e.length;t++)n|=e[t].flags;return n}function Vl(e,n,t,r,l,i,o,u,s,a,c,p,h,d,f,g,v,m,y,S){switch(e){case 1:return n+Wl(t)+r;case 2:return n+Wl(t)+r+Wl(l)+i;case 3:return n+Wl(t)+r+Wl(l)+i+Wl(o)+u;case 4:return n+Wl(t)+r+Wl(l)+i+Wl(o)+u+Wl(s)+a;case 5:return n+Wl(t)+r+Wl(l)+i+Wl(o)+u+Wl(s)+a+Wl(c)+p;case 6:return n+Wl(t)+r+Wl(l)+i+Wl(o)+u+Wl(s)+a+Wl(c)+p+Wl(h)+d;case 7:return n+Wl(t)+r+Wl(l)+i+Wl(o)+u+Wl(s)+a+Wl(c)+p+Wl(h)+d+Wl(f)+g;case 8:return n+Wl(t)+r+Wl(l)+i+Wl(o)+u+Wl(s)+a+Wl(c)+p+Wl(h)+d+Wl(f)+g+Wl(v)+m;case 9:return n+Wl(t)+r+Wl(l)+i+Wl(o)+u+Wl(s)+a+Wl(c)+p+Wl(h)+d+Wl(f)+g+Wl(v)+m+Wl(y)+S;default:throw new Error("Does not support more than 9 expressions")}}function Wl(e){return null!=e?e.toString():""}function jl(e,n,t,r,l,i){e|=1;var o=wl(n);return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:e,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:o.matchedQueries,matchedQueryIds:o.matchedQueryIds,references:o.references,ngContentIndex:t,childCount:r,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:i?Ml(i):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:l||al},provider:null,text:null,query:null,ngContent:null}}function Yl(e,n,t,r,l,i,o,u,s,c,p,h){var d;void 0===o&&(o=[]),c||(c=al);var f=wl(t),g=f.matchedQueries,v=f.references,m=f.matchedQueryIds,y=null,S=null;i&&(y=(d=a(Gl(i),2))[0],S=d[1]),u=u||[];for(var E=new Array(u.length),b=0;b<u.length;b++){var O=a(u[b],3),R=O[0],T=O[2],C=a(Gl(O[1]),2),_=C[0],I=C[1],A=void 0,w=void 0;switch(15&R){case 4:w=T;break;case 1:case 8:A=T}E[b]={flags:R,ns:_,name:I,nonMinifiedName:I,securityContext:A,suffix:w}}s=s||[];var N=new Array(s.length);for(b=0;b<s.length;b++){var P=a(s[b],2);N[b]={type:0,target:P[0],eventName:P[1],propName:null}}var D=(o=o||[]).map(function(e){var n=a(e,2),t=n[1],r=a(Gl(n[0]),2);return[r[0],r[1],t]});return h=function(e){if(e&&e.id===dl){var n=null!=e.encapsulation&&e.encapsulation!==Ue.None||e.styles.length||Object.keys(e.data).length;e.id=n?"c"+vl++:fl}return e&&e.id===fl&&(e=null),e||null}(h),p&&(n|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:n|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:g,matchedQueryIds:m,references:v,ngContentIndex:r,childCount:l,bindings:E,bindingFlags:Bl(E),outputs:N,element:{ns:y,name:S,attrs:D,template:null,componentProvider:null,componentView:p||null,componentRendererType:h,publicProviders:null,allProviders:null,handleEvent:c||al},provider:null,text:null,query:null,ngContent:null}}function zl(e,n,t){var r,l=t.element,i=e.root.selectorOrNode,o=e.renderer;if(e.parent||!i){r=l.name?o.createElement(l.name,l.ns):o.createComment("");var u=Pl(e,n,t);u&&o.appendChild(u,r)}else r=o.selectRootElement(i,!!l.componentRendererType&&l.componentRendererType.encapsulation===Ue.ShadowDom);if(l.attrs)for(var s=0;s<l.attrs.length;s++){var c=a(l.attrs[s],3);o.setAttribute(r,c[1],c[2],c[0])}return r}function Kl(e,n,t,r){for(var l=0;l<t.outputs.length;l++){var i=t.outputs[l],o=ql(e,t.nodeIndex,(p=i.eventName,(c=i.target)?c+":"+p:p)),u=i.target,s=e;"component"===i.target&&(u=null,s=n);var a=s.renderer.listen(u||r,i.eventName,o);e.disposables[t.outputIndex+l]=a}var c,p}function ql(e,n,t){return function(r){return Ol(e,n,t,r)}}function $l(e,n,t,r){if(!yl(e,n,t,r))return!1;var l=n.bindings[t],i=nl(e,n.nodeIndex),o=i.renderElement,u=l.name;switch(15&l.flags){case 1:!function(e,n,t,r,l,i){var o=n.securityContext,u=o?e.root.sanitizer.sanitize(o,i):i;u=null!=u?u.toString():null;var s=e.renderer;null!=i?s.setAttribute(t,l,u,r):s.removeAttribute(t,l,r)}(e,l,o,l.ns,u,r);break;case 2:!function(e,n,t,r){var l=e.renderer;r?l.addClass(n,t):l.removeClass(n,t)}(e,o,u,r);break;case 4:!function(e,n,t,r,l){var i=e.root.sanitizer.sanitize(Un.STYLE,l);if(null!=i){i=i.toString();var o=n.suffix;null!=o&&(i+=o)}else i=null;var u=e.renderer;null!=i?u.setStyle(t,r,i):u.removeStyle(t,r)}(e,l,o,u,r);break;case 8:!function(e,n,t,r,l){var i=n.securityContext,o=i?e.root.sanitizer.sanitize(i,l):l;e.renderer.setProperty(t,r,o)}(33554432&n.flags&&32&l.flags?i.componentView:e,l,o,u,r)}return!0}var Ql=new Object,Zl=pl(on),Xl=pl(rn),Jl=pl(wn);function ei(e,n,t,r){return t=xe(t),{index:-1,deps:Nl(r,Me(n)),flags:e,token:n,value:t}}function ni(e,n,t){void 0===t&&(t=on.THROW_IF_NOT_FOUND);var r,l,i=Ye(e);try{if(8&n.flags)return n.token;if(2&n.flags&&(t=null),1&n.flags)return e._parent.get(n.token,t);var o=n.tokenKey;switch(o){case Zl:case Xl:case Jl:return e}var u,s=e._def.providersByKey[o];if(s){var a=e._providers[s.index];return void 0===a&&(a=e._providers[s.index]=ti(e,s)),a===Ql?void 0:a}if((u=me(n.token))&&(r=e,null!=(l=u).providedIn&&(function(e,n){return e._def.modules.indexOf(l.providedIn)>-1}(r)||"root"===l.providedIn&&r._def.isRoot))){var c=e._providers.length;return e._def.providersByKey[n.tokenKey]={flags:5120,value:u.factory,deps:[],index:c,token:n.token},e._providers[c]=Ql,e._providers[c]=ti(e,e._def.providersByKey[n.tokenKey])}return 4&n.flags?t:e._parent.get(n.token,t)}finally{Ye(i)}}function ti(e,n){var t;switch(201347067&n.flags){case 512:t=function(e,n,t){var r=t.length;switch(r){case 0:return new n;case 1:return new n(ni(e,t[0]));case 2:return new n(ni(e,t[0]),ni(e,t[1]));case 3:return new n(ni(e,t[0]),ni(e,t[1]),ni(e,t[2]));default:for(var l=new Array(r),i=0;i<r;i++)l[i]=ni(e,t[i]);return new(n.bind.apply(n,c([void 0],l)))}}(e,n.value,n.deps);break;case 1024:t=function(e,n,t){var r=t.length;switch(r){case 0:return n();case 1:return n(ni(e,t[0]));case 2:return n(ni(e,t[0]),ni(e,t[1]));case 3:return n(ni(e,t[0]),ni(e,t[1]),ni(e,t[2]));default:for(var l=Array(r),i=0;i<r;i++)l[i]=ni(e,t[i]);return n.apply(void 0,c(l))}}(e,n.value,n.deps);break;case 2048:t=ni(e,n.deps[0]);break;case 256:t=n.value}return t===Ql||null==t||"object"!=typeof t||131072&n.flags||"function"!=typeof t.ngOnDestroy||(n.flags|=131072),void 0===t?Ql:t}function ri(e,n){var t=e.viewContainer._embeddedViews;if((null==n||n>=t.length)&&(n=t.length-1),n<0)return null;var r=t[n];return r.viewContainerParent=null,ui(t,n),il.dirtyParentQueries(r),ii(r),r}function li(e,n,t){var r=n?Cl(n,n.def.lastRenderRootNode):e.renderElement,l=t.renderer.parentNode(r),i=t.renderer.nextSibling(r);kl(t,2,l,i,void 0)}function ii(e){kl(e,3,null,null,void 0)}function oi(e,n,t){n>=e.length?e.push(t):e.splice(n,0,t)}function ui(e,n){n>=e.length-1?e.pop():e.splice(n,1)}var si=new Object;function ai(e,n,t,r,l,i){return new ci(e,n,t,r,l,i)}var ci=function(e){function n(n,t,r,l,i,o){var u=e.call(this)||this;return u.selector=n,u.componentType=t,u._inputs=l,u._outputs=i,u.ngContentSelectors=o,u.viewDefFactory=r,u}return l(n,e),Object.defineProperty(n.prototype,"inputs",{get:function(){var e=[],n=this._inputs;for(var t in n)e.push({propName:t,templateName:n[t]});return e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"outputs",{get:function(){var e=[];for(var n in this._outputs)e.push({propName:n,templateName:this._outputs[n]});return e},enumerable:!0,configurable:!0}),n.prototype.create=function(e,n,t,r){if(!r)throw new Error("ngModule should be provided");var l=Ml(this.viewDefFactory),i=l.nodes[0].element.componentProvider.nodeIndex,o=il.createRootView(e,n||[],t,l,r,si),u=tl(o,i).instance;return t&&o.renderer.setAttribute(nl(o,0).renderElement,"ng-version",Gn.full),new pi(o,new gi(o),u)},n}(On),pi=function(e){function n(n,t,r){var l=e.call(this)||this;return l._view=n,l._viewRef=t,l._component=r,l._elDef=l._view.def.nodes[0],l.hostView=t,l.changeDetectorRef=t,l.instance=r,l}return l(n,e),Object.defineProperty(n.prototype,"location",{get:function(){return new Pn(nl(this._view,this._elDef.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"injector",{get:function(){return new Si(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"componentType",{get:function(){return this._component.constructor},enumerable:!0,configurable:!0}),n.prototype.destroy=function(){this._viewRef.destroy()},n.prototype.onDestroy=function(e){this._viewRef.onDestroy(e)},n}(bn);function hi(e,n,t){return new di(e,n,t)}var di=function(){function e(e,n,t){this._view=e,this._elDef=n,this._data=t,this._embeddedViews=[]}return Object.defineProperty(e.prototype,"element",{get:function(){return new Pn(this._data.renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"injector",{get:function(){return new Si(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parentInjector",{get:function(){for(var e=this._view,n=this._elDef.parent;!n&&e;)n=Tl(e),e=e.parent;return e?new Si(e,n):new Si(this._view,null)},enumerable:!0,configurable:!0}),e.prototype.clear=function(){for(var e=this._embeddedViews.length-1;e>=0;e--){var n=ri(this._data,e);il.destroyView(n)}},e.prototype.get=function(e){var n=this._embeddedViews[e];if(n){var t=new gi(n);return t.attachToViewContainerRef(this),t}return null},Object.defineProperty(e.prototype,"length",{get:function(){return this._embeddedViews.length},enumerable:!0,configurable:!0}),e.prototype.createEmbeddedView=function(e,n,t){var r=e.createEmbeddedView(n||{});return this.insert(r,t),r},e.prototype.createComponent=function(e,n,t,r,l){var i=t||this.parentInjector;l||e instanceof An||(l=i.get(wn));var o=e.create(i,r,void 0,l);return this.insert(o.hostView,n),o},e.prototype.insert=function(e,n){if(e.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");var t,r,l,i,o=e;return i=(t=this._data).viewContainer._embeddedViews,null==(r=n)&&(r=i.length),(l=o._view).viewContainerParent=this._view,oi(i,r,l),function(e,n){var t=Rl(n);if(t&&t!==e&&!(16&n.state)){n.state|=16;var r=t.template._projectedViews;r||(r=t.template._projectedViews=[]),r.push(n),function(e,t){if(!(4&t.flags)){n.parent.def.nodeFlags|=4,t.flags|=4;for(var r=t.parent;r;)r.childFlags|=4,r=r.parent}}(0,n.parentNodeDef)}}(t,l),il.dirtyParentQueries(l),li(t,r>0?i[r-1]:null,l),o.attachToViewContainerRef(this),e},e.prototype.move=function(e,n){if(e.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");var t,r,l,i,o,u=this._embeddedViews.indexOf(e._view);return l=n,o=(i=(t=this._data).viewContainer._embeddedViews)[r=u],ui(i,r),null==l&&(l=i.length),oi(i,l,o),il.dirtyParentQueries(o),ii(o),li(t,l>0?i[l-1]:null,o),e},e.prototype.indexOf=function(e){return this._embeddedViews.indexOf(e._view)},e.prototype.remove=function(e){var n=ri(this._data,e);n&&il.destroyView(n)},e.prototype.detach=function(e){var n=ri(this._data,e);return n?new gi(n):null},e}();function fi(e){return new gi(e)}var gi=function(){function e(e){this._view=e,this._viewContainerRef=null,this._appRef=null}return Object.defineProperty(e.prototype,"rootNodes",{get:function(){return kl(this._view,0,void 0,void 0,e=[]),e;var e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this._view.context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"destroyed",{get:function(){return 0!=(128&this._view.state)},enumerable:!0,configurable:!0}),e.prototype.markForCheck=function(){El(this._view)},e.prototype.detach=function(){this._view.state&=-5},e.prototype.detectChanges=function(){var e=this._view.root.rendererFactory;e.begin&&e.begin();try{il.checkAndUpdateView(this._view)}finally{e.end&&e.end()}},e.prototype.checkNoChanges=function(){il.checkNoChangesView(this._view)},e.prototype.reattach=function(){this._view.state|=4},e.prototype.onDestroy=function(e){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(e)},e.prototype.destroy=function(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),il.destroyView(this._view)},e.prototype.detachFromAppRef=function(){this._appRef=null,ii(this._view),il.dirtyParentQueries(this._view)},e.prototype.attachToAppRef=function(e){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e},e.prototype.attachToViewContainerRef=function(e){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=e},e}();function vi(e,n){return new mi(e,n)}var mi=function(e){function n(n,t){var r=e.call(this)||this;return r._parentView=n,r._def=t,r}return l(n,e),n.prototype.createEmbeddedView=function(e){return new gi(il.createEmbeddedView(this._parentView,this._def,this._def.element.template,e))},Object.defineProperty(n.prototype,"elementRef",{get:function(){return new Pn(nl(this._parentView,this._def.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),n}(ht);function yi(e,n){return new Si(e,n)}var Si=function(){function e(e,n){this.view=e,this.elDef=n}return e.prototype.get=function(e,n){return void 0===n&&(n=on.THROW_IF_NOT_FOUND),il.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:e,tokenKey:pl(e)},n)},e}();function Ei(e,n){var t=e.def.nodes[n];if(1&t.flags){var r=nl(e,t.nodeIndex);return t.element.template?r.template:r.renderElement}if(2&t.flags)return el(e,t.nodeIndex).renderText;if(20240&t.flags)return tl(e,t.nodeIndex).instance;throw new Error("Illegal state: read nodeValue for node index "+n)}function bi(e){return new Oi(e.renderer)}var Oi=function(){function e(e){this.delegate=e}return e.prototype.selectRootElement=function(e){return this.delegate.selectRootElement(e)},e.prototype.createElement=function(e,n){var t=a(Gl(n),2),r=this.delegate.createElement(t[1],t[0]);return e&&this.delegate.appendChild(e,r),r},e.prototype.createViewRoot=function(e){return e},e.prototype.createTemplateAnchor=function(e){var n=this.delegate.createComment("");return e&&this.delegate.appendChild(e,n),n},e.prototype.createText=function(e,n){var t=this.delegate.createText(n);return e&&this.delegate.appendChild(e,t),t},e.prototype.projectNodes=function(e,n){for(var t=0;t<n.length;t++)this.delegate.appendChild(e,n[t])},e.prototype.attachViewAfter=function(e,n){for(var t=this.delegate.parentNode(e),r=this.delegate.nextSibling(e),l=0;l<n.length;l++)this.delegate.insertBefore(t,n[l],r)},e.prototype.detachView=function(e){for(var n=0;n<e.length;n++){var t=e[n],r=this.delegate.parentNode(t);this.delegate.removeChild(r,t)}},e.prototype.destroyView=function(e,n){for(var t=0;t<n.length;t++)this.delegate.destroyNode(n[t])},e.prototype.listen=function(e,n,t){return this.delegate.listen(e,n,t)},e.prototype.listenGlobal=function(e,n,t){return this.delegate.listen(e,n,t)},e.prototype.setElementProperty=function(e,n,t){this.delegate.setProperty(e,n,t)},e.prototype.setElementAttribute=function(e,n,t){var r=a(Gl(n),2),l=r[0],i=r[1];null!=t?this.delegate.setAttribute(e,i,t,l):this.delegate.removeAttribute(e,i,l)},e.prototype.setBindingDebugInfo=function(e,n,t){},e.prototype.setElementClass=function(e,n,t){t?this.delegate.addClass(e,n):this.delegate.removeClass(e,n)},e.prototype.setElementStyle=function(e,n,t){null!=t?this.delegate.setStyle(e,n,t):this.delegate.removeStyle(e,n)},e.prototype.invokeElementMethod=function(e,n,t){e[n].apply(e,t)},e.prototype.setText=function(e,n){this.delegate.setValue(e,n)},e.prototype.animate=function(){throw new Error("Renderer.animate is no longer supported!")},e}();function Ri(e,n,t,r){return new Ti(e,n,t,r)}var Ti=function(){function e(e,n,t,r){this._moduleType=e,this._parent=n,this._bootstrapComponents=t,this._def=r,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(e){for(var n=e._def,t=e._providers=new Array(n.providers.length),r=0;r<n.providers.length;r++){var l=n.providers[r];4096&l.flags||void 0===t[r]&&(t[r]=ti(e,l))}}(this)}return e.prototype.get=function(e,n,t){void 0===n&&(n=on.THROW_IF_NOT_FOUND),void 0===t&&(t=We.Default);var r=0;return t&We.SkipSelf?r|=1:t&We.Self&&(r|=4),ni(this,{token:e,tokenKey:pl(e),flags:r},n)},Object.defineProperty(e.prototype,"instance",{get:function(){return this.get(this._moduleType)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentFactoryResolver",{get:function(){return this.get(_n)},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){if(this._destroyed)throw new Error("The ng module "+Me(this.instance.constructor)+" has already been destroyed.");this._destroyed=!0,function(e,n){for(var t=e._def,r=new Set,l=0;l<t.providers.length;l++)if(131072&t.providers[l].flags){var i=e._providers[l];if(i&&i!==Ql){var o=i.ngOnDestroy;"function"!=typeof o||r.has(i)||(o.apply(i),r.add(i))}}}(this),this._destroyListeners.forEach(function(e){return e()})},e.prototype.onDestroy=function(e){this._destroyListeners.push(e)},e}(),Ci=pl(Mn),_i=pl(xn),Ii=pl(Pn),Ai=pl(br),wi=pl(ht),Ni=pl(Rr),Pi=pl(on),Di=pl(rn);function Mi(e,n,t,r,l,i,o,u){var s=[];if(o)for(var c in o){var p=a(o[c],2);s[p[0]]={flags:8,name:c,nonMinifiedName:p[1],ns:null,securityContext:null,suffix:null}}var h=[];if(u)for(var d in u)h.push({type:1,propName:d,target:null,eventName:u[d]});return xi(e,n|=16384,t,r,l,l,i,s,h)}function ki(e,n,t){return xi(-1,e|=16,null,0,n,n,t)}function Li(e,n,t,r,l){return xi(-1,e,n,0,t,r,l)}function xi(e,n,t,r,l,i,o,u,s){var a=wl(t),c=a.matchedQueries,p=a.references,h=a.matchedQueryIds;s||(s=[]),u||(u=[]),i=xe(i);var d=Nl(o,Me(l));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:n,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:c,matchedQueryIds:h,references:p,ngContentIndex:-1,childCount:r,bindings:u,bindingFlags:Bl(u),outputs:s,element:null,provider:{token:l,value:i,deps:d},text:null,query:null,ngContent:null}}function Fi(e,n){return Bi(e,n)}function Ui(e,n){for(var t=e;t.parent&&!_l(t);)t=t.parent;return Vi(t.parent,Tl(t),!0,n.provider.value,n.provider.deps)}function Hi(e,n){var t=Vi(e,n.parent,(32768&n.flags)>0,n.provider.value,n.provider.deps);if(n.outputs.length)for(var r=0;r<n.outputs.length;r++){var l=n.outputs[r],i=t[l.propName];if(!It(i))throw new Error("@Output "+l.propName+" not initialized in '"+t.constructor.name+"'.");var o=i.subscribe(Gi(e,n.parent.nodeIndex,l.eventName));e.disposables[n.outputIndex+r]=o.unsubscribe.bind(o)}return t}function Gi(e,n,t){return function(r){return Ol(e,n,t,r)}}function Bi(e,n){var t=(8192&n.flags)>0,r=n.provider;switch(201347067&n.flags){case 512:return Vi(e,n.parent,t,r.value,r.deps);case 1024:return function(e,n,t,r,l){var i=l.length;switch(i){case 0:return r();case 1:return r(ji(e,n,t,l[0]));case 2:return r(ji(e,n,t,l[0]),ji(e,n,t,l[1]));case 3:return r(ji(e,n,t,l[0]),ji(e,n,t,l[1]),ji(e,n,t,l[2]));default:for(var o=Array(i),u=0;u<i;u++)o[u]=ji(e,n,t,l[u]);return r.apply(void 0,c(o))}}(e,n.parent,t,r.value,r.deps);case 2048:return ji(e,n.parent,t,r.deps[0]);case 256:return r.value}}function Vi(e,n,t,r,l){var i=l.length;switch(i){case 0:return new r;case 1:return new r(ji(e,n,t,l[0]));case 2:return new r(ji(e,n,t,l[0]),ji(e,n,t,l[1]));case 3:return new r(ji(e,n,t,l[0]),ji(e,n,t,l[1]),ji(e,n,t,l[2]));default:for(var o=new Array(i),u=0;u<i;u++)o[u]=ji(e,n,t,l[u]);return new(r.bind.apply(r,c([void 0],o)))}}var Wi={};function ji(e,n,t,r,l){if(void 0===l&&(l=on.THROW_IF_NOT_FOUND),8&r.flags)return r.token;var i=e;2&r.flags&&(l=null);var o=r.tokenKey;o===Ni&&(t=!(!n||!n.element.componentView)),n&&1&r.flags&&(t=!1,n=n.parent);for(var u=e;u;){if(n)switch(o){case Ci:return bi(Yi(u,n,t));case _i:return Yi(u,n,t).renderer;case Ii:return new Pn(nl(u,n.nodeIndex).renderElement);case Ai:return nl(u,n.nodeIndex).viewContainer;case wi:if(n.element.template)return nl(u,n.nodeIndex).template;break;case Ni:return fi(Yi(u,n,t));case Pi:case Di:return yi(u,n);default:var s=(t?n.element.allProviders:n.element.publicProviders)[o];if(s){var a=tl(u,s.nodeIndex);return a||(a={instance:Bi(u,s)},u.nodes[s.nodeIndex]=a),a.instance}}t=_l(u),n=Tl(u),u=u.parent,4&r.flags&&(u=null)}var c=i.root.injector.get(r.token,Wi);return c!==Wi||l===Wi?c:i.root.ngModule.injector.get(r.token,l)}function Yi(e,n,t){var r;if(t)r=nl(e,n.nodeIndex).componentView;else for(r=e;r.parent&&!_l(r);)r=r.parent;return r}function zi(e,n,t,r,l,i){if(32768&t.flags){var o=nl(e,t.parent.nodeIndex).componentView;2&o.def.flags&&(o.state|=8)}if(n.instance[t.bindings[r].name]=l,524288&t.flags){i=i||{};var u=Qe.unwrap(e.oldValues[t.bindingIndex+r]);i[t.bindings[r].nonMinifiedName]=new Ze(u,l,0!=(2&e.state))}return e.oldValues[t.bindingIndex+r]=l,i}function Ki(e,n){if(e.def.nodeFlags&n)for(var t=e.def.nodes,r=0,l=0;l<t.length;l++){var i=t[l],o=i.parent;for(!o&&i.flags&n&&$i(e,l,i.flags&n,r++),0==(i.childFlags&n)&&(l+=i.childCount);o&&1&o.flags&&l===o.nodeIndex+o.childCount;)o.directChildFlags&n&&(r=qi(e,o,n,r)),o=o.parent}}function qi(e,n,t,r){for(var l=n.nodeIndex+1;l<=n.nodeIndex+n.childCount;l++){var i=e.def.nodes[l];i.flags&t&&$i(e,l,i.flags&t,r++),l+=i.childCount}return r}function $i(e,n,t,r){var l=tl(e,n);if(l){var i=l.instance;i&&(il.setCurrentNode(e,n),1048576&t&&Jr(e,512,r)&&i.ngAfterContentInit(),2097152&t&&i.ngAfterContentChecked(),4194304&t&&Jr(e,768,r)&&i.ngAfterViewInit(),8388608&t&&i.ngAfterViewChecked(),131072&t&&i.ngOnDestroy())}}function Qi(e,n,t){var r=[];for(var l in t)r.push({propName:l,bindingType:t[l]});return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,ngContentIndex:-1,matchedQueries:{},matchedQueryIds:0,references:{},childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:{id:n,filterId:Al(n),bindings:r},ngContent:null}}function Zi(e){for(var n=e.def.nodeMatchedQueries;e.parent&&Il(e);){var t=e.parentNodeDef;e=e.parent;for(var r=t.nodeIndex+t.childCount,l=0;l<=r;l++)67108864&(i=e.def.nodes[l]).flags&&536870912&i.flags&&(i.query.filterId&n)===i.query.filterId&&ll(e,l).setDirty(),!(1&i.flags&&l+i.childCount<t.nodeIndex)&&67108864&i.childFlags&&536870912&i.childFlags||(l+=i.childCount)}if(134217728&e.def.nodeFlags)for(l=0;l<e.def.nodes.length;l++){var i;134217728&(i=e.def.nodes[l]).flags&&536870912&i.flags&&ll(e,l).setDirty(),l+=i.childCount}}function Xi(e,n){var t=ll(e,n.nodeIndex);if(t.dirty){var r,l=void 0;if(67108864&n.flags){var i=n.parent.parent;l=Ji(e,i.nodeIndex,i.nodeIndex+i.childCount,n.query,[]),r=tl(e,n.parent.nodeIndex).instance}else 134217728&n.flags&&(l=Ji(e,0,e.def.nodes.length-1,n.query,[]),r=e.component);t.reset(l);for(var o=n.query.bindings,u=!1,s=0;s<o.length;s++){var a=o[s],c=void 0;switch(a.bindingType){case 0:c=t.first;break;case 1:c=t,u=!0}r[a.propName]=c}u&&t.notifyOnChanges()}}function Ji(e,n,t,r,l){for(var i=n;i<=t;i++){var o=e.def.nodes[i],u=o.matchedQueries[r.id];if(null!=u&&l.push(eo(e,o,u)),1&o.flags&&o.element.template&&(o.element.template.nodeMatchedQueries&r.filterId)===r.filterId){var s=nl(e,i);if((o.childMatchedQueries&r.filterId)===r.filterId&&(Ji(e,i+1,i+o.childCount,r,l),i+=o.childCount),16777216&o.flags)for(var a=s.viewContainer._embeddedViews,c=0;c<a.length;c++){var p=a[c],h=Rl(p);h&&h===s&&Ji(p,0,p.def.nodes.length-1,r,l)}var d=s.template._projectedViews;if(d)for(c=0;c<d.length;c++){var f=d[c];Ji(f,0,f.def.nodes.length-1,r,l)}}(o.childMatchedQueries&r.filterId)!==r.filterId&&(i+=o.childCount)}return l}function eo(e,n,t){if(null!=t)switch(t){case 1:return nl(e,n.nodeIndex).renderElement;case 0:return new Pn(nl(e,n.nodeIndex).renderElement);case 2:return nl(e,n.nodeIndex).template;case 3:return nl(e,n.nodeIndex).viewContainer;case 4:return tl(e,n.nodeIndex).instance}}function no(e,n,t){var r=Pl(e,n,t);r&&xl(e,t.ngContent.index,1,r,null,void 0)}function to(e,n){return lo(128,e,new Array(n+1))}function ro(e,n){for(var t=Object.keys(n),r=t.length,l=new Array(r),i=0;i<r;i++){var o=t[i];l[n[o]]=o}return lo(64,e,l)}function lo(e,n,t){for(var r=new Array(t.length),l=0;l<t.length;l++){var i=t[l];r[l]={flags:8,name:i,ns:null,nonMinifiedName:i,securityContext:null,suffix:null}}return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:n,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:-1,childCount:0,bindings:r,bindingFlags:Bl(r),outputs:[],element:null,provider:null,text:null,query:null,ngContent:null}}function io(e,n,t){for(var r=new Array(t.length-1),l=1;l<t.length;l++)r[l-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:t[l]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:n,childCount:0,bindings:r,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:t[0]},query:null,ngContent:null}}function oo(e,n,t){var r,l=e.renderer;r=l.createText(t.text.prefix);var i=Pl(e,n,t);return i&&l.appendChild(i,r),{renderText:r}}function uo(e,n){return(null!=e?e.toString():"")+n.suffix}function so(e,n,t,r){for(var l=0,i=0,o=0,u=0,s=0,a=null,c=null,p=!1,h=!1,d=null,f=0;f<n.length;f++){var g=n[f];if(g.nodeIndex=f,g.parent=a,g.bindingIndex=l,g.outputIndex=i,g.renderParent=c,o|=g.flags,s|=g.matchedQueryIds,g.element){var v=g.element;v.publicProviders=a?a.element.publicProviders:Object.create(null),v.allProviders=v.publicProviders,p=!1,h=!1,g.element.template&&(s|=g.element.template.nodeMatchedQueries)}if(co(a,g,n.length),l+=g.bindings.length,i+=g.outputs.length,!c&&3&g.flags&&(d=g),20224&g.flags){p||(p=!0,a.element.publicProviders=Object.create(a.element.publicProviders),a.element.allProviders=a.element.publicProviders);var m=0!=(32768&g.flags);0==(8192&g.flags)||m?a.element.publicProviders[pl(g.provider.token)]=g:(h||(h=!0,a.element.allProviders=Object.create(a.element.publicProviders)),a.element.allProviders[pl(g.provider.token)]=g),m&&(a.element.componentProvider=g)}if(a?(a.childFlags|=g.flags,a.directChildFlags|=g.flags,a.childMatchedQueries|=g.matchedQueryIds,g.element&&g.element.template&&(a.childMatchedQueries|=g.element.template.nodeMatchedQueries)):u|=g.flags,g.childCount>0)a=g,ao(g)||(c=g);else for(;a&&f===a.nodeIndex+a.childCount;){var y=a.parent;y&&(y.childFlags|=a.childFlags,y.childMatchedQueries|=a.childMatchedQueries),c=(a=y)&&ao(a)?a.renderParent:a}}return{factory:null,nodeFlags:o,rootNodeFlags:u,nodeMatchedQueries:s,flags:e,nodes:n,updateDirectives:t||al,updateRenderer:r||al,handleEvent:function(e,t,r,l){return n[t].element.handleEvent(e,r,l)},bindingCount:l,outputCount:i,lastRenderRootNode:d}}function ao(e){return 0!=(1&e.flags)&&null===e.element.name}function co(e,n,t){var r=n.element&&n.element.template;if(r){if(!r.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(r.lastRenderRootNode&&16777216&r.lastRenderRootNode.flags)throw new Error("Illegal State: Last root node of a template can't have embedded views, at index "+n.nodeIndex+"!")}if(20224&n.flags&&0==(1&(e?e.flags:0)))throw new Error("Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index "+n.nodeIndex+"!");if(n.query){if(67108864&n.flags&&(!e||0==(16384&e.flags)))throw new Error("Illegal State: Content Query nodes need to be children of directives, at index "+n.nodeIndex+"!");if(134217728&n.flags&&e)throw new Error("Illegal State: View Query nodes have to be top level nodes, at index "+n.nodeIndex+"!")}if(n.childCount){var l=e?e.nodeIndex+e.childCount:t-1;if(n.nodeIndex<=l&&n.nodeIndex+n.childCount>l)throw new Error("Illegal State: childCount of node leads outside of parent, at index "+n.nodeIndex+"!")}}function po(e,n,t,r){var l=go(e.root,e.renderer,e,n,t);return vo(l,e.component,r),mo(l),l}function ho(e,n,t){var r=go(e,e.renderer,null,null,n);return vo(r,t,t),mo(r),r}function fo(e,n,t,r){var l,i=n.element.componentRendererType;return l=i?e.root.rendererFactory.createRenderer(r,i):e.root.renderer,go(e.root,l,e,n.element.componentProvider,t)}function go(e,n,t,r,l){var i=new Array(l.nodes.length),o=l.outputCount?new Array(l.outputCount):null;return{def:l,parent:t,viewContainerParent:null,parentNodeDef:r,context:null,component:null,nodes:i,state:13,root:e,renderer:n,oldValues:new Array(l.bindingCount),disposables:o,initIndex:-1}}function vo(e,n,t){e.component=n,e.context=t}function mo(e){var n;_l(e)&&(n=nl(e.parent,e.parentNodeDef.parent.nodeIndex).renderElement);for(var t=e.def,r=e.nodes,l=0;l<t.nodes.length;l++){var i=t.nodes[l];il.setCurrentNode(e,l);var o=void 0;switch(201347067&i.flags){case 1:var u=zl(e,n,i),s=void 0;if(33554432&i.flags){var a=Ml(i.element.componentView);s=il.createComponentView(e,i,a,u)}Kl(e,s,i,u),o={renderElement:u,componentView:s,viewContainer:null,template:i.element.template?vi(e,i):void 0},16777216&i.flags&&(o.viewContainer=hi(e,i,o));break;case 2:o=oo(e,n,i);break;case 512:case 1024:case 2048:case 256:(o=r[l])||4096&i.flags||(o={instance:Fi(e,i)});break;case 16:o={instance:Ui(e,i)};break;case 16384:(o=r[l])||(o={instance:Hi(e,i)}),32768&i.flags&&vo(nl(e,i.parent.nodeIndex).componentView,o.instance,o.instance);break;case 32:case 64:case 128:o={value:void 0};break;case 67108864:case 134217728:o=new vr;break;case 8:no(e,n,i),o=void 0}r[l]=o}_o(e,Co.CreateViewNodes),No(e,201326592,268435456,0)}function yo(e){bo(e),il.updateDirectives(e,1),Io(e,Co.CheckNoChanges),il.updateRenderer(e,1),_o(e,Co.CheckNoChanges),e.state&=-97}function So(e){1&e.state?(e.state&=-2,e.state|=2):e.state&=-3,Xr(e,0,256),bo(e),il.updateDirectives(e,0),Io(e,Co.CheckAndUpdate),No(e,67108864,536870912,0);var n=Xr(e,256,512);Ki(e,2097152|(n?1048576:0)),il.updateRenderer(e,0),_o(e,Co.CheckAndUpdate),No(e,134217728,536870912,0),Ki(e,8388608|((n=Xr(e,512,768))?4194304:0)),2&e.def.flags&&(e.state&=-9),e.state&=-97,Xr(e,768,1024)}function Eo(e,n,t,r,l,i,o,u,s,a,p,h,d){return 0===t?function(e,n,t,r,l,i,o,u,s,a,c,p){switch(201347067&n.flags){case 1:return function(e,n,t,r,l,i,o,u,s,a,c,p){var h=n.bindings.length,d=!1;return h>0&&$l(e,n,0,t)&&(d=!0),h>1&&$l(e,n,1,r)&&(d=!0),h>2&&$l(e,n,2,l)&&(d=!0),h>3&&$l(e,n,3,i)&&(d=!0),h>4&&$l(e,n,4,o)&&(d=!0),h>5&&$l(e,n,5,u)&&(d=!0),h>6&&$l(e,n,6,s)&&(d=!0),h>7&&$l(e,n,7,a)&&(d=!0),h>8&&$l(e,n,8,c)&&(d=!0),h>9&&$l(e,n,9,p)&&(d=!0),d}(e,n,t,r,l,i,o,u,s,a,c,p);case 2:return function(e,n,t,r,l,i,o,u,s,a,c,p){var h=!1,d=n.bindings,f=d.length;if(f>0&&yl(e,n,0,t)&&(h=!0),f>1&&yl(e,n,1,r)&&(h=!0),f>2&&yl(e,n,2,l)&&(h=!0),f>3&&yl(e,n,3,i)&&(h=!0),f>4&&yl(e,n,4,o)&&(h=!0),f>5&&yl(e,n,5,u)&&(h=!0),f>6&&yl(e,n,6,s)&&(h=!0),f>7&&yl(e,n,7,a)&&(h=!0),f>8&&yl(e,n,8,c)&&(h=!0),f>9&&yl(e,n,9,p)&&(h=!0),h){var g=n.text.prefix;f>0&&(g+=uo(t,d[0])),f>1&&(g+=uo(r,d[1])),f>2&&(g+=uo(l,d[2])),f>3&&(g+=uo(i,d[3])),f>4&&(g+=uo(o,d[4])),f>5&&(g+=uo(u,d[5])),f>6&&(g+=uo(s,d[6])),f>7&&(g+=uo(a,d[7])),f>8&&(g+=uo(c,d[8])),f>9&&(g+=uo(p,d[9]));var v=el(e,n.nodeIndex).renderText;e.renderer.setValue(v,g)}return h}(e,n,t,r,l,i,o,u,s,a,c,p);case 16384:return function(e,n,t,r,l,i,o,u,s,a,c,p){var h=tl(e,n.nodeIndex),d=h.instance,f=!1,g=void 0,v=n.bindings.length;return v>0&&ml(e,n,0,t)&&(f=!0,g=zi(e,h,n,0,t,g)),v>1&&ml(e,n,1,r)&&(f=!0,g=zi(e,h,n,1,r,g)),v>2&&ml(e,n,2,l)&&(f=!0,g=zi(e,h,n,2,l,g)),v>3&&ml(e,n,3,i)&&(f=!0,g=zi(e,h,n,3,i,g)),v>4&&ml(e,n,4,o)&&(f=!0,g=zi(e,h,n,4,o,g)),v>5&&ml(e,n,5,u)&&(f=!0,g=zi(e,h,n,5,u,g)),v>6&&ml(e,n,6,s)&&(f=!0,g=zi(e,h,n,6,s,g)),v>7&&ml(e,n,7,a)&&(f=!0,g=zi(e,h,n,7,a,g)),v>8&&ml(e,n,8,c)&&(f=!0,g=zi(e,h,n,8,c,g)),v>9&&ml(e,n,9,p)&&(f=!0,g=zi(e,h,n,9,p,g)),g&&d.ngOnChanges(g),65536&n.flags&&Jr(e,256,n.nodeIndex)&&d.ngOnInit(),262144&n.flags&&d.ngDoCheck(),f}(e,n,t,r,l,i,o,u,s,a,c,p);case 32:case 64:case 128:return function(e,n,t,r,l,i,o,u,s,a,c,p){var h=n.bindings,d=!1,f=h.length;if(f>0&&yl(e,n,0,t)&&(d=!0),f>1&&yl(e,n,1,r)&&(d=!0),f>2&&yl(e,n,2,l)&&(d=!0),f>3&&yl(e,n,3,i)&&(d=!0),f>4&&yl(e,n,4,o)&&(d=!0),f>5&&yl(e,n,5,u)&&(d=!0),f>6&&yl(e,n,6,s)&&(d=!0),f>7&&yl(e,n,7,a)&&(d=!0),f>8&&yl(e,n,8,c)&&(d=!0),f>9&&yl(e,n,9,p)&&(d=!0),d){var g=rl(e,n.nodeIndex),v=void 0;switch(201347067&n.flags){case 32:v=new Array(h.length),f>0&&(v[0]=t),f>1&&(v[1]=r),f>2&&(v[2]=l),f>3&&(v[3]=i),f>4&&(v[4]=o),f>5&&(v[5]=u),f>6&&(v[6]=s),f>7&&(v[7]=a),f>8&&(v[8]=c),f>9&&(v[9]=p);break;case 64:v={},f>0&&(v[h[0].name]=t),f>1&&(v[h[1].name]=r),f>2&&(v[h[2].name]=l),f>3&&(v[h[3].name]=i),f>4&&(v[h[4].name]=o),f>5&&(v[h[5].name]=u),f>6&&(v[h[6].name]=s),f>7&&(v[h[7].name]=a),f>8&&(v[h[8].name]=c),f>9&&(v[h[9].name]=p);break;case 128:var m=t;switch(f){case 1:v=m.transform(t);break;case 2:v=m.transform(r);break;case 3:v=m.transform(r,l);break;case 4:v=m.transform(r,l,i);break;case 5:v=m.transform(r,l,i,o);break;case 6:v=m.transform(r,l,i,o,u);break;case 7:v=m.transform(r,l,i,o,u,s);break;case 8:v=m.transform(r,l,i,o,u,s,a);break;case 9:v=m.transform(r,l,i,o,u,s,a,c);break;case 10:v=m.transform(r,l,i,o,u,s,a,c,p)}}g.value=v}return d}(e,n,t,r,l,i,o,u,s,a,c,p);default:throw"unreachable"}}(e,n,r,l,i,o,u,s,a,p,h,d):function(e,n,t){switch(201347067&n.flags){case 1:return function(e,n,t){for(var r=!1,l=0;l<t.length;l++)$l(e,n,l,t[l])&&(r=!0);return r}(e,n,t);case 2:return function(e,n,t){for(var r=n.bindings,l=!1,i=0;i<t.length;i++)yl(e,n,i,t[i])&&(l=!0);if(l){var o="";for(i=0;i<t.length;i++)o+=uo(t[i],r[i]);o=n.text.prefix+o;var u=el(e,n.nodeIndex).renderText;e.renderer.setValue(u,o)}return l}(e,n,t);case 16384:return function(e,n,t){for(var r=tl(e,n.nodeIndex),l=r.instance,i=!1,o=void 0,u=0;u<t.length;u++)ml(e,n,u,t[u])&&(i=!0,o=zi(e,r,n,u,t[u],o));return o&&l.ngOnChanges(o),65536&n.flags&&Jr(e,256,n.nodeIndex)&&l.ngOnInit(),262144&n.flags&&l.ngDoCheck(),i}(e,n,t);case 32:case 64:case 128:return function(e,n,t){for(var r=n.bindings,l=!1,i=0;i<t.length;i++)yl(e,n,i,t[i])&&(l=!0);if(l){var o=rl(e,n.nodeIndex),u=void 0;switch(201347067&n.flags){case 32:u=t;break;case 64:for(u={},i=0;i<t.length;i++)u[r[i].name]=t[i];break;case 128:var s=t[0],a=t.slice(1);u=s.transform.apply(s,c(a))}o.value=u}return l}(e,n,t);default:throw"unreachable"}}(e,n,r)}function bo(e){var n=e.def;if(4&n.nodeFlags)for(var t=0;t<n.nodes.length;t++){var r=n.nodes[t];if(4&r.flags){var l=nl(e,t).template._projectedViews;if(l)for(var i=0;i<l.length;i++){var o=l[i];o.state|=32,bl(o,e)}}else 0==(4&r.childFlags)&&(t+=r.childCount)}}function Oo(e,n,t,r,l,i,o,u,s,a,c,p,h){return 0===t?function(e,n,t,r,l,i,o,u,s,a,c,p){var h=n.bindings.length;h>0&&Sl(e,n,0,t),h>1&&Sl(e,n,1,r),h>2&&Sl(e,n,2,l),h>3&&Sl(e,n,3,i),h>4&&Sl(e,n,4,o),h>5&&Sl(e,n,5,u),h>6&&Sl(e,n,6,s),h>7&&Sl(e,n,7,a),h>8&&Sl(e,n,8,c),h>9&&Sl(e,n,9,p)}(e,n,r,l,i,o,u,s,a,c,p,h):function(e,n,t){for(var r=0;r<t.length;r++)Sl(e,n,r,t[r])}(e,n,r),!1}function Ro(e,n){if(ll(e,n.nodeIndex).dirty)throw ol(il.createDebugContext(e,n.nodeIndex),"Query "+n.query.id+" not dirty","Query "+n.query.id+" dirty",0!=(1&e.state))}function To(e){if(!(128&e.state)){if(Io(e,Co.Destroy),_o(e,Co.Destroy),Ki(e,131072),e.disposables)for(var n=0;n<e.disposables.length;n++)e.disposables[n]();!function(e){if(16&e.state){var n=Rl(e);if(n){var t=n.template._projectedViews;t&&(ui(t,t.indexOf(e)),il.dirtyParentQueries(e))}}}(e),e.renderer.destroyNode&&function(e){for(var n=e.def.nodes.length,t=0;t<n;t++){var r=e.def.nodes[t];1&r.flags?e.renderer.destroyNode(nl(e,t).renderElement):2&r.flags?e.renderer.destroyNode(el(e,t).renderText):(67108864&r.flags||134217728&r.flags)&&ll(e,t).destroy()}}(e),_l(e)&&e.renderer.destroy(),e.state|=128}}var Co=function(e){return e[e.CreateViewNodes=0]="CreateViewNodes",e[e.CheckNoChanges=1]="CheckNoChanges",e[e.CheckNoChangesProjectedViews=2]="CheckNoChangesProjectedViews",e[e.CheckAndUpdate=3]="CheckAndUpdate",e[e.CheckAndUpdateProjectedViews=4]="CheckAndUpdateProjectedViews",e[e.Destroy=5]="Destroy",e}({});function _o(e,n){var t=e.def;if(33554432&t.nodeFlags)for(var r=0;r<t.nodes.length;r++){var l=t.nodes[r];33554432&l.flags?Ao(nl(e,r).componentView,n):0==(33554432&l.childFlags)&&(r+=l.childCount)}}function Io(e,n){var t=e.def;if(16777216&t.nodeFlags)for(var r=0;r<t.nodes.length;r++){var l=t.nodes[r];if(16777216&l.flags)for(var i=nl(e,r).viewContainer._embeddedViews,o=0;o<i.length;o++)Ao(i[o],n);else 0==(16777216&l.childFlags)&&(r+=l.childCount)}}function Ao(e,n){var t=e.state;switch(n){case Co.CheckNoChanges:0==(128&t)&&(12==(12&t)?yo(e):64&t&&wo(e,Co.CheckNoChangesProjectedViews));break;case Co.CheckNoChangesProjectedViews:0==(128&t)&&(32&t?yo(e):64&t&&wo(e,n));break;case Co.CheckAndUpdate:0==(128&t)&&(12==(12&t)?So(e):64&t&&wo(e,Co.CheckAndUpdateProjectedViews));break;case Co.CheckAndUpdateProjectedViews:0==(128&t)&&(32&t?So(e):64&t&&wo(e,n));break;case Co.Destroy:To(e);break;case Co.CreateViewNodes:mo(e)}}function wo(e,n){Io(e,n),_o(e,n)}function No(e,n,t,r){if(e.def.nodeFlags&n&&e.def.nodeFlags&t)for(var l=e.def.nodes.length,i=0;i<l;i++){var o=e.def.nodes[i];if(o.flags&n&&o.flags&t)switch(il.setCurrentNode(e,o.nodeIndex),r){case 0:Xi(e,o);break;case 1:Ro(e,o)}o.childFlags&n&&o.childFlags&t||(i+=o.childCount)}}var Po=!1;function Do(e,n,t,r,l,i){var o=l.injector.get(kn);return ho(ko(e,l,o,n,t),r,i)}function Mo(e,n,t,r,l,i){var o=l.injector.get(kn),u=ko(e,l,new hu(o),n,t),s=jo(r);return cu(Jo.create,ho,null,[u,s,i])}function ko(e,n,t,r,l){var i=n.injector.get(Hn),o=n.injector.get(Ct),u=t.createRenderer(null,null);return{ngModule:n,injector:e,projectableNodes:r,selectorOrNode:l,sanitizer:i,rendererFactory:t,renderer:u,errorHandler:o}}function Lo(e,n,t,r){var l=jo(t);return cu(Jo.create,po,null,[e,n,l,r])}function xo(e,n,t,r){return t=Go.get(n.element.componentProvider.provider.token)||jo(t),cu(Jo.create,fo,null,[e,n,t,r])}function Fo(e,n,t,r){return Ri(e,n,t,function(e){var n=function(e){var n=!1,t=!1;return 0===Uo.size?{hasOverrides:n,hasDeprecatedOverrides:t}:(e.providers.forEach(function(e){var r=Uo.get(e.token);3840&e.flags&&r&&(n=!0,t=t||r.deprecatedBehavior)}),e.modules.forEach(function(e){Ho.forEach(function(r,l){me(l).providedIn===e&&(n=!0,t=t||r.deprecatedBehavior)})}),{hasOverrides:n,hasDeprecatedOverrides:t})}(e),t=n.hasDeprecatedOverrides;return n.hasOverrides?(function(e){for(var n=0;n<e.providers.length;n++){var r=e.providers[n];t&&(r.flags|=4096);var l=Uo.get(r.token);l&&(r.flags=-3841&r.flags|l.flags,r.deps=Nl(l.deps),r.value=l.value)}if(Ho.size>0){var i=new Set(e.modules);Ho.forEach(function(n,r){if(i.has(me(r).providedIn)){var l={token:r,flags:n.flags|(t?4096:0),deps:Nl(n.deps),value:n.value,index:e.providers.length};e.providers.push(l),e.providersByKey[pl(r)]=l}})}}(e=e.factory(function(){return al})),e):e}(r))}var Uo=new Map,Ho=new Map,Go=new Map;function Bo(e){var n;Uo.set(e.token,e),"function"==typeof e.token&&(n=me(e.token))&&"function"==typeof n.providedIn&&Ho.set(e.token,e)}function Vo(e,n){var t=Ml(n.viewDefFactory),r=Ml(t.nodes[0].element.componentView);Go.set(e,r)}function Wo(){Uo.clear(),Ho.clear(),Go.clear()}function jo(e){if(0===Uo.size)return e;var n=function(e){for(var n=[],t=null,r=0;r<e.nodes.length;r++){var l=e.nodes[r];1&l.flags&&(t=l),t&&3840&l.flags&&Uo.has(l.provider.token)&&(n.push(t.nodeIndex),t=null)}return n}(e);if(0===n.length)return e;e=e.factory(function(){return al});for(var t=0;t<n.length;t++)r(e,n[t]);return e;function r(e,n){for(var t=n+1;t<e.nodes.length;t++){var r=e.nodes[t];if(1&r.flags)return;if(3840&r.flags){var l=r.provider,i=Uo.get(l.token);i&&(r.flags=-3841&r.flags|i.flags,l.deps=Nl(i.deps),l.value=i.value)}}}}function Yo(e,n,t,r,l,i,o,u,s,a,c,p,h){var d=e.def.nodes[n];return Eo(e,d,t,r,l,i,o,u,s,a,c,p,h),224&d.flags?rl(e,n).value:void 0}function zo(e,n,t,r,l,i,o,u,s,a,c,p,h){var d=e.def.nodes[n];return Oo(e,d,t,r,l,i,o,u,s,a,c,p,h),224&d.flags?rl(e,n).value:void 0}function Ko(e){return cu(Jo.detectChanges,So,null,[e])}function qo(e){return cu(Jo.checkNoChanges,yo,null,[e])}function $o(e){return cu(Jo.destroy,To,null,[e])}var Qo,Zo,Xo,Jo=function(e){return e[e.create=0]="create",e[e.detectChanges=1]="detectChanges",e[e.checkNoChanges=2]="checkNoChanges",e[e.destroy=3]="destroy",e[e.handleEvent=4]="handleEvent",e}({});function eu(e,n){Zo=e,Xo=n}function nu(e,n,t,r){return eu(e,n),cu(Jo.handleEvent,e.def.handleEvent,null,[e,n,t,r])}function tu(e,n){if(128&e.state)throw sl(Jo[Qo]);return eu(e,ou(e,0)),e.def.updateDirectives(function(e,t,r){for(var l=[],i=3;i<arguments.length;i++)l[i-3]=arguments[i];var o=e.def.nodes[t];return 0===n?lu(e,o,r,l):iu(e,o,r,l),16384&o.flags&&eu(e,ou(e,t)),224&o.flags?rl(e,o.nodeIndex).value:void 0},e)}function ru(e,n){if(128&e.state)throw sl(Jo[Qo]);return eu(e,uu(e,0)),e.def.updateRenderer(function(e,t,r){for(var l=[],i=3;i<arguments.length;i++)l[i-3]=arguments[i];var o=e.def.nodes[t];return 0===n?lu(e,o,r,l):iu(e,o,r,l),3&o.flags&&eu(e,uu(e,t)),224&o.flags?rl(e,o.nodeIndex).value:void 0},e)}function lu(e,n,t,r){if(Eo.apply(void 0,c([e,n,t],r))){var l=1===t?r[0]:r;if(16384&n.flags){for(var i={},o=0;o<n.bindings.length;o++){var u=n.bindings[o],s=l[o];8&u.flags&&(i[(d=u.nonMinifiedName,"ng-reflect-"+d.replace(/[$@]/g,"_").replace(Ke,function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return"-"+e[1].toLowerCase()}))]=qe(s))}var a=n.parent,p=nl(e,a.nodeIndex).renderElement;if(a.element.name)for(var h in i)null!=(s=i[h])?e.renderer.setAttribute(p,h,s):e.renderer.removeAttribute(p,h);else e.renderer.setValue(p,"bindings="+JSON.stringify(i,null,2))}}var d}function iu(e,n,t,r){Oo.apply(void 0,c([e,n,t],r))}function ou(e,n){for(var t=n;t<e.def.nodes.length;t++){var r=e.def.nodes[t];if(16384&r.flags&&r.bindings&&r.bindings.length)return t}return null}function uu(e,n){for(var t=n;t<e.def.nodes.length;t++){var r=e.def.nodes[t];if(3&r.flags&&r.bindings&&r.bindings.length)return t}return null}var su=function(){function e(e,n){this.view=e,this.nodeIndex=n,null==n&&(this.nodeIndex=n=0),this.nodeDef=e.def.nodes[n];for(var t=this.nodeDef,r=e;t&&0==(1&t.flags);)t=t.parent;if(!t)for(;!t&&r;)t=Tl(r),r=r.parent;this.elDef=t,this.elView=r}return Object.defineProperty(e.prototype,"elOrCompView",{get:function(){return nl(this.elView,this.elDef.nodeIndex).componentView||this.view},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"injector",{get:function(){return yi(this.elView,this.elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"component",{get:function(){return this.elOrCompView.component},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this.elOrCompView.context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"providerTokens",{get:function(){var e=[];if(this.elDef)for(var n=this.elDef.nodeIndex+1;n<=this.elDef.nodeIndex+this.elDef.childCount;n++){var t=this.elView.def.nodes[n];20224&t.flags&&e.push(t.provider.token),n+=t.childCount}return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"references",{get:function(){var e={};if(this.elDef){au(this.elView,this.elDef,e);for(var n=this.elDef.nodeIndex+1;n<=this.elDef.nodeIndex+this.elDef.childCount;n++){var t=this.elView.def.nodes[n];20224&t.flags&&au(this.elView,t,e),n+=t.childCount}}return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentRenderElement",{get:function(){var e=function(e){for(;e&&!_l(e);)e=e.parent;return e.parent?nl(e.parent,Tl(e).nodeIndex):null}(this.elOrCompView);return e?e.renderElement:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderNode",{get:function(){return 2&this.nodeDef.flags?Cl(this.view,this.nodeDef):Cl(this.elView,this.elDef)},enumerable:!0,configurable:!0}),e.prototype.logError=function(e){for(var n,t,r=[],l=1;l<arguments.length;l++)r[l-1]=arguments[l];2&this.nodeDef.flags?(n=this.view.def,t=this.nodeDef.nodeIndex):(n=this.elView.def,t=this.elDef.nodeIndex);var i=function(e,n){for(var t=-1,r=0;r<=n;r++)3&e.nodes[r].flags&&t++;return t}(n,t),o=-1;n.factory(function(){var n;return++o===i?(n=e.error).bind.apply(n,c([e],r)):al}),o<i&&(e.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),e.error.apply(e,c(r)))},e}();function au(e,n,t){for(var r in n.references)t[r]=eo(e,n,n.references[r])}function cu(e,n,t,r){var l=Qo,i=Zo,o=Xo;try{Qo=e;var u=n.apply(t,r);return Zo=i,Xo=o,Qo=l,u}catch(s){if(Ot(s)||!Zo)throw s;throw function(e,n){return e instanceof Error||(e=new Error(e.toString())),ul(e,n),e}(s,pu())}}function pu(){return Zo?new su(Zo,Xo):null}var hu=function(){function e(e){this.delegate=e}return e.prototype.createRenderer=function(e,n){return new du(this.delegate.createRenderer(e,n))},e.prototype.begin=function(){this.delegate.begin&&this.delegate.begin()},e.prototype.end=function(){this.delegate.end&&this.delegate.end()},e.prototype.whenRenderingDone=function(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)},e}(),du=function(){function e(e){this.delegate=e,this.debugContextFactory=pu,this.data=this.delegate.data}return e.prototype.createDebugContext=function(e){return this.debugContextFactory(e)},e.prototype.destroyNode=function(e){!function(e){Ar.delete(e.nativeNode)}(wr(e)),this.delegate.destroyNode&&this.delegate.destroyNode(e)},e.prototype.destroy=function(){this.delegate.destroy()},e.prototype.createElement=function(e,n){var t=this.delegate.createElement(e,n),r=this.createDebugContext(t);if(r){var l=new Ir(t,null,r);l.name=e,Nr(l)}return t},e.prototype.createComment=function(e){var n=this.delegate.createComment(e),t=this.createDebugContext(n);return t&&Nr(new _r(n,null,t)),n},e.prototype.createText=function(e){var n=this.delegate.createText(e),t=this.createDebugContext(n);return t&&Nr(new _r(n,null,t)),n},e.prototype.appendChild=function(e,n){var t=wr(e),r=wr(n);t&&r&&t instanceof Ir&&t.addChild(r),this.delegate.appendChild(e,n)},e.prototype.insertBefore=function(e,n,t){var r=wr(e),l=wr(n),i=wr(t);r&&l&&r instanceof Ir&&r.insertBefore(i,l),this.delegate.insertBefore(e,n,t)},e.prototype.removeChild=function(e,n){var t=wr(e),r=wr(n);t&&r&&t instanceof Ir&&t.removeChild(r),this.delegate.removeChild(e,n)},e.prototype.selectRootElement=function(e,n){var t=this.delegate.selectRootElement(e,n),r=pu();return r&&Nr(new Ir(t,null,r)),t},e.prototype.setAttribute=function(e,n,t,r){var l=wr(e);l&&l instanceof Ir&&(l.attributes[r?r+":"+n:n]=t),this.delegate.setAttribute(e,n,t,r)},e.prototype.removeAttribute=function(e,n,t){var r=wr(e);r&&r instanceof Ir&&(r.attributes[t?t+":"+n:n]=null),this.delegate.removeAttribute(e,n,t)},e.prototype.addClass=function(e,n){var t=wr(e);t&&t instanceof Ir&&(t.classes[n]=!0),this.delegate.addClass(e,n)},e.prototype.removeClass=function(e,n){var t=wr(e);t&&t instanceof Ir&&(t.classes[n]=!1),this.delegate.removeClass(e,n)},e.prototype.setStyle=function(e,n,t,r){var l=wr(e);l&&l instanceof Ir&&(l.styles[n]=t),this.delegate.setStyle(e,n,t,r)},e.prototype.removeStyle=function(e,n,t){var r=wr(e);r&&r instanceof Ir&&(r.styles[n]=null),this.delegate.removeStyle(e,n,t)},e.prototype.setProperty=function(e,n,t){var r=wr(e);r&&r instanceof Ir&&(r.properties[n]=t),this.delegate.setProperty(e,n,t)},e.prototype.listen=function(e,n,t){if("string"!=typeof e){var r=wr(e);r&&r.listeners.push(new Cr(n,t))}return this.delegate.listen(e,n,t)},e.prototype.parentNode=function(e){return this.delegate.parentNode(e)},e.prototype.nextSibling=function(e){return this.delegate.nextSibling(e)},e.prototype.setValue=function(e,n){return this.delegate.setValue(e,n)},e}();function fu(e,n,t){return new gu(e,n,t)}var gu=function(e){function n(n,t,r){var l=e.call(this)||this;return l.moduleType=n,l._bootstrapComponents=t,l._ngModuleDefFactory=r,l}return l(n,e),n.prototype.create=function(e){!function(){if(!Po){Po=!0;var e=Wn()?{setCurrentNode:eu,createRootView:Mo,createEmbeddedView:Lo,createComponentView:xo,createNgModuleRef:Fo,overrideProvider:Bo,overrideComponentView:Vo,clearOverrides:Wo,checkAndUpdateView:Ko,checkNoChangesView:qo,destroyView:$o,createDebugContext:function(e,n){return new su(e,n)},handleEvent:nu,updateDirectives:tu,updateRenderer:ru}:{setCurrentNode:function(){},createRootView:Do,createEmbeddedView:po,createComponentView:fo,createNgModuleRef:Ri,overrideProvider:al,overrideComponentView:al,clearOverrides:al,checkAndUpdateView:So,checkNoChangesView:yo,destroyView:To,createDebugContext:function(e,n){return new su(e,n)},handleEvent:function(e,n,t,r){return e.def.handleEvent(e,n,t,r)},updateDirectives:function(e,n){return e.def.updateDirectives(0===n?Yo:zo,e)},updateRenderer:function(e,n){return e.def.updateRenderer(0===n?Yo:zo,e)}};il.setCurrentNode=e.setCurrentNode,il.createRootView=e.createRootView,il.createEmbeddedView=e.createEmbeddedView,il.createComponentView=e.createComponentView,il.createNgModuleRef=e.createNgModuleRef,il.overrideProvider=e.overrideProvider,il.overrideComponentView=e.overrideComponentView,il.clearOverrides=e.clearOverrides,il.checkAndUpdateView=e.checkAndUpdateView,il.checkNoChangesView=e.checkNoChangesView,il.destroyView=e.destroyView,il.resolveDep=ji,il.createDebugContext=e.createDebugContext,il.handleEvent=e.handleEvent,il.updateDirectives=e.updateDirectives,il.updateRenderer=e.updateRenderer,il.dirtyParentQueries=Zi}}();var n=function(e){var n=Array.from(e.providers),t=Array.from(e.modules),r={};for(var l in e.providersByKey)r[l]=e.providersByKey[l];return{factory:e.factory,isRoot:e.isRoot,providers:n,modules:t,providersByKey:r}}(Ml(this._ngModuleDefFactory));return il.createNgModuleRef(this.moduleType,e||on.NULL,this._bootstrapComponents,n)},n}(Nn),vu=function(e){return e[e.NOTHING=0]="NOTHING",e[e.FOOD=1]="FOOD",e[e.LOG=2]="LOG",e[e.BRUSHWOOD=3]="BRUSHWOOD",e[e.STONE=4]="STONE",e[e.FUR=5]="FUR",e[e.WHEAT=6]="WHEAT",e[e.BARLEY=7]="BARLEY",e[e.HOP=8]="HOP",e[e.COTTON=9]="COTTON",e[e.HAY=10]="HAY",e[e.CHICKEN=11]="CHICKEN",e[e.COW=12]="COW",e[e.PIG=13]="PIG",e[e.HORSE=14]="HORSE",e[e.COAL=15]="COAL",e[e.GOLD_ORE=16]="GOLD_ORE",e[e.SILVER_ORE=17]="SILVER_ORE",e[e.COPPER_ORE=18]="COPPER_ORE",e[e.TIN_ORE=19]="TIN_ORE",e[e.IRON_ORE=20]="IRON_ORE",e[e.PLANK=21]="PLANK",e[e.CUT_STONE=22]="CUT_STONE",e[e.FUEL=23]="FUEL",e[e.FLOUR=24]="FLOUR",e[e.FABRIC=25]="FABRIC",e[e.LEATHER=26]="LEATHER",e[e.COINS=27]="COINS",e[e.COPPER=28]="COPPER",e[e.GOLD=29]="GOLD",e[e.SILVER=30]="SILVER",e[e.TIN=31]="TIN",e[e.BRONZE=32]="BRONZE",e[e.IRON=33]="IRON",e[e.STEEL=34]="STEEL",e[e.BERRY=35]="BERRY",e[e.MUSHROOM=36]="MUSHROOM",e[e.FISH=37]="FISH",e[e.APPLE=38]="APPLE",e[e.GRAPE=39]="GRAPE",e[e.BREAD=40]="BREAD",e[e.MEAT=41]="MEAT",e[e.EGG=42]="EGG",e[e.MILK=43]="MILK",e[e.COOKED_MEAT=44]="COOKED_MEAT",e[e.VEGETABLE_SOUP=45]="VEGETABLE_SOUP",e[e.MEAT_SOUP=46]="MEAT_SOUP",e[e.BEER=47]="BEER",e[e.WINE=48]="WINE",e[e.CLOTHES=49]="CLOTHES",e[e.BOW=50]="BOW",e[e.STONE_PICKAXE=51]="STONE_PICKAXE",e[e.STONE_SHOVEL=52]="STONE_SHOVEL",e[e.STONE_AXE=53]="STONE_AXE",e[e.STONE_SPEAR=54]="STONE_SPEAR",e[e.STONE_HAMMER=55]="STONE_HAMMER",e[e.SWORD=56]="SWORD",e[e.WOODEN_SHIELD=57]="WOODEN_SHIELD",e[e.LEATHER_ARMOR=58]="LEATHER_ARMOR",e[e.LIGHT_ARMOR=59]="LIGHT_ARMOR",e[e.HEAVY_ARMOR=60]="HEAVY_ARMOR",e[e.FISH_FOOD=61]="FISH_FOOD",e}({});!function(e){e.values=function(){return Object.keys(e).filter(function(e){return isNaN(e)&&"values"!==e})}}(vu||(vu={}));var mu,yu=function(e){return e[e.MOTIVATION_SPEECH=0]="MOTIVATION_SPEECH",e[e.ROYAL_PROPHECY=1]="ROYAL_PROPHECY",e[e.HERITAGE=2]="HERITAGE",e[e.FAMILY_JEWELS=3]="FAMILY_JEWELS",e[e.KING_OF_THE_FOREST=4]="KING_OF_THE_FOREST",e[e.KING_OF_THE_SEAS=5]="KING_OF_THE_SEAS",e[e.KING_OF_THE_PEOPLE=6]="KING_OF_THE_PEOPLE",e[e.KING_OF_THE_WAR=7]="KING_OF_THE_WAR",e[e.CALL_TO_ARMS=8]="CALL_TO_ARMS",e[e.UNITE_WITH_THE_PEOPLE=9]="UNITE_WITH_THE_PEOPLE",e}({}),Su=function(e){return e[e.MANAGEMENT=0]="MANAGEMENT",e[e.STONE_AXE=1]="STONE_AXE",e[e.STONE_PICKAXE=2]="STONE_PICKAXE",e[e.STONE_SHOVEL=3]="STONE_SHOVEL",e[e.STONE_HAMMER=4]="STONE_HAMMER",e[e.HUNTING=5]="HUNTING",e[e.FIRE=6]="FIRE",e[e.BIGGER_FIRE=7]="BIGGER_FIRE",e[e.COOKING=8]="COOKING",e[e.TRADE=9]="TRADE",e[e.ALCOHOL=10]="ALCOHOL",e[e.WONDER_BUILDINGS=11]="WONDER_BUILDINGS",e[e.TRADE_ROUTES=12]="TRADE_ROUTES",e[e.BUFF_PRODUCTION=13]="BUFF_PRODUCTION",e[e.STONE_SPEAR=14]="STONE_SPEAR",e[e.BOW=15]="BOW",e[e.BARRACKS=16]="BARRACKS",e[e.WOODEN_DEFENCES=17]="WOODEN_DEFENCES",e[e.STONE_DEFENCES=18]="STONE_DEFENCES",e[e.STASH=19]="STASH",e[e.SCIENTIFIC_METHOD=20]="SCIENTIFIC_METHOD",e[e.FORESIGHT=21]="FORESIGHT",e[e.CALENDAR=22]="CALENDAR",e[e.WEATHER=23]="WEATHER",e[e.HISTORY=24]="HISTORY",e[e.URBAN_PLANNING=25]="URBAN_PLANNING",e[e.MATHEMATICS=26]="MATHEMATICS",e[e.PROSPECTING_FOR_ORE=27]="PROSPECTING_FOR_ORE",e[e.ADVANCED_PROSPECTING=28]="ADVANCED_PROSPECTING",e[e.MASTER_PROSPECTING=29]="MASTER_PROSPECTING",e[e.SAWMILL=30]="SAWMILL",e[e.MINING=31]="MINING",e[e.PIT_MINE=32]="PIT_MINE",e[e.UNDERGROUND_MINE=33]="UNDERGROUND_MINE",e[e.WINDMILL=34]="WINDMILL",e[e.MORTAR=35]="MORTAR",e[e.HOUSE=36]="HOUSE",e[e.LEATHER=37]="LEATHER",e[e.FABRIC=38]="FABRIC",e[e.TAILORING=39]="TAILORING",e[e.ORE_PROCESSING=40]="ORE_PROCESSING",e[e.ADVANCED_ORE_PROCESSING=41]="ADVANCED_ORE_PROCESSING",e[e.MASTER_ORE_PROCESSING=42]="MASTER_ORE_PROCESSING",e[e.COINS_MINTING=43]="COINS_MINTING",e[e.METALLURGY=44]="METALLURGY",e[e.ADVANCED_METALLURGY=45]="ADVANCED_METALLURGY",e[e.PICKAXE_DESIGN=46]="PICKAXE_DESIGN",e[e.AGRICULTURE=47]="AGRICULTURE",e[e.FORESTRY=48]="FORESTRY",e[e.FISHING=49]="FISHING",e[e.ANIMALS=50]="ANIMALS",e[e.COTTON=51]="COTTON",e[e.FERTILIZER=52]="FERTILIZER",e[e.HUMAN_RESOURCES=53]="HUMAN_RESOURCES",e[e.FISH_FOOD=54]="FISH_FOOD",e}({}),Eu=function(e){return e[e.WEATHER=0]="WEATHER",e[e.MARKET=1]="MARKET",e[e.MANAGEMENT=2]="MANAGEMENT",e[e.CRAFTING=3]="CRAFTING",e[e.RESEARCH=4]="RESEARCH",e[e.ARMY=5]="ARMY",e[e.RELIGION=6]="RELIGION",e[e.FORT=7]="FORT",e[e.SEA=8]="SEA",e[e.FIELD=9]="FIELD",e[e.MOUNTAINS=10]="MOUNTAINS",e[e.PLATEAU=11]="PLATEAU",e[e.HOUSE=12]="HOUSE",e[e.SHRINE=13]="SHRINE",e[e.CHURCH=14]="CHURCH",e[e.TAILOR=15]="TAILOR",e[e.TAVERN=16]="TAVERN",e[e.BAKERY=17]="BAKERY",e[e.MARKETPLACE=18]="MARKETPLACE",e[e.BARRACKS=19]="BARRACKS",e[e.STOCKADE=20]="STOCKADE",e[e.WOODEN_TOWER=21]="WOODEN_TOWER",e[e.STONE_TOWER=22]="STONE_TOWER",e[e.STASH=23]="STASH",e[e.FORESTER=24]="FORESTER",e[e.SAWMILL=25]="SAWMILL",e[e.HUNTER=26]="HUNTER",e[e.TANNERY=27]="TANNERY",e[e.WINDMILL=28]="WINDMILL",e[e.FARM=29]="FARM",e[e.PASTURE=30]="PASTURE",e[e.BUTCHER=31]="BUTCHER",e[e.BREWERY=32]="BREWERY",e[e.WINERY=33]="WINERY",e[e.COTTON_MILL=34]="COTTON_MILL",e[e.PIT_MINE=35]="PIT_MINE",e[e.GEOLOGIST=36]="GEOLOGIST",e[e.SMITHY=37]="SMITHY",e[e.MINT=38]="MINT",e[e.FISHERS_HUT=39]="FISHERS_HUT",e[e.CALENDAR=40]="CALENDAR",e[e.FIRE=41]="FIRE",e[e.URBAN_PLANNING=42]="URBAN_PLANNING",e[e.ALCOHOL=43]="ALCOHOL",e[e.GOLD=44]="GOLD",e[e.SILVER=45]="SILVER",e[e.BRONZE=46]="BRONZE",e[e.IRON=47]="IRON",e[e.STEEL=48]="STEEL",e[e.ADVANCED_ORE_PROCESSING=49]="ADVANCED_ORE_PROCESSING",e[e.BUFFS=50]="BUFFS",e[e.COTTON=51]="COTTON",e[e.BARLEY=52]="BARLEY",e[e.HOPS=53]="HOPS",e[e.BUILT_QUARRY=54]="BUILT_QUARRY",e[e.BUILT_SMITHY=55]="BUILT_SMITHY",e[e.HUMAN_RESOURCES=56]="HUMAN_RESOURCES",e[e.FISH_FOOD=57]="FISH_FOOD",e}({}),bu=function(e){return e[e.ALL=0]="ALL",e[e.CONSTRUCTION=1]="CONSTRUCTION",e[e.DECONSTRUCTION=2]="DECONSTRUCTION",e[e.HUT=3]="HUT",e[e.HOUSE=4]="HOUSE",e[e.MARKETPLACE=5]="MARKETPLACE",e[e.WAREHOUSE=6]="WAREHOUSE",e[e.SMITHY=7]="SMITHY",e[e.BAKERY=8]="BAKERY",e[e.WORKSHOP=9]="WORKSHOP",e[e.SHRINE=10]="SHRINE",e[e.TAILOR=11]="TAILOR",e[e.BREWERY=12]="BREWERY",e[e.TAVERN=13]="TAVERN",e[e.CHURCH=14]="CHURCH",e[e.STOCKADE=15]="STOCKADE",e[e.BARRACKS=16]="BARRACKS",e[e.TRAINING_SQUARE=17]="TRAINING_SQUARE",e[e.WOODEN_TOWER=18]="WOODEN_TOWER",e[e.STONE_TOWER=19]="STONE_TOWER",e[e.STASH=20]="STASH",e[e.LOGGERS_HUT=21]="LOGGERS_HUT",e[e.SAWMILL=22]="SAWMILL",e[e.FORESTER=23]="FORESTER",e[e.HUNTER_LODGE=24]="HUNTER_LODGE",e[e.GATHERER=25]="GATHERER",e[e.TANNERY=26]="TANNERY",e[e.FARM=27]="FARM",e[e.FIELD=28]="FIELD",e[e.ORCHARD=29]="ORCHARD",e[e.PASTURE=30]="PASTURE",e[e.WINDMILL=31]="WINDMILL",e[e.BUTCHER=32]="BUTCHER",e[e.COTTON_MILL=33]="COTTON_MILL",e[e.WINERY=34]="WINERY",e[e.PIT_MINE=35]="PIT_MINE",e[e.QUARRY=36]="QUARRY",e[e.GEOLOGIST=37]="GEOLOGIST",e[e.STONEMASON=38]="STONEMASON",e[e.MINT=39]="MINT",e[e.FISHERS_HUT=40]="FISHERS_HUT",e[e.SCHOOL_OF_FISH=41]="SCHOOL_OF_FISH",e[e.SHARKS=42]="SHARKS",e[e.STONEHENGE=43]="STONEHENGE",e[e.PYRAMID=44]="PYRAMID",e[e.HANGING_GARDEN=45]="HANGING_GARDEN",e[e.COLOSSUS=46]="COLOSSUS",e[e.UNDERGROUND_CITY=47]="UNDERGROUND_CITY",e[e.GREAT_LIGHTHOUSE=48]="GREAT_LIGHTHOUSE",e[e.SACRED_GROVE=49]="SACRED_GROVE",e[e.ASCENSION_TEMPLE=50]="ASCENSION_TEMPLE",e}({}),Ou=function(e){return e[e.BLESSING=0]="BLESSING",e[e.PREACH=1]="PREACH",e[e.FAITH_SHIELD=2]="FAITH_SHIELD",e[e.SOLDIER_PRAYER=3]="SOLDIER_PRAYER",e[e.FAITHFUL_RESEARCH=4]="FAITHFUL_RESEARCH",e[e.BABY_BOOM=5]="BABY_BOOM",e[e.LIFE_CYCLE=6]="LIFE_CYCLE",e[e.HOLY_WAR=7]="HOLY_WAR",e}({}),Ru=function(e){return e[e.TRAIN=0]="TRAIN",e[e.DEFEND=1]="DEFEND",e[e.SPY=2]="SPY",e[e.DIVERSION=3]="DIVERSION",e[e.PLUNDER=4]="PLUNDER",e[e.EXPEDITION=5]="EXPEDITION",e[e.CONQUER=6]="CONQUER",e}({}),Tu=function(e){return e[e.NONE=0]="NONE",e[e.WHEAT=1]="WHEAT",e[e.BARLEY=2]="BARLEY",e[e.HAY=3]="HAY",e[e.HOP=4]="HOP",e[e.COTTON=5]="COTTON",e[e.BERRY=6]="BERRY",e[e.GRAPE=7]="GRAPE",e[e.APPLE=8]="APPLE",e}({}),Cu=function(e){return e[e.ALL=0]="ALL",e[e.NONE=1]="NONE",e[e.RAW=2]="RAW",e[e.PROCESSED=3]="PROCESSED",e[e.FOOD=4]="FOOD",e[e.TOOLS=5]="TOOLS",e[e.OTHER=6]="OTHER",e[e.WOODEN=7]="WOODEN",e[e.METAL=8]="METAL",e[e.STONE=9]="STONE",e[e.ANIMAL=10]="ANIMAL",e[e.FUEL=11]="FUEL",e[e.CONSUMABLE=12]="CONSUMABLE",e}({}),_u=function(e){return e[e.NONE=0]="NONE",e[e.FERTILITY=1]="FERTILITY",e[e.NATURE=2]="NATURE",e[e.TECHNOLOGY=3]="TECHNOLOGY",e[e.WAR=4]="WAR",e}({}),Iu=function(e){return e[e.ALL=0]="ALL",e[e.MILITIA=1]="MILITIA",e[e.SPEARMAN=2]="SPEARMAN",e[e.ARCHER=3]="ARCHER",e[e.SWORDSMAN=4]="SWORDSMAN",e}({}),Au=function(){function e(){}return e.round=function(e,n){return e.toFixed(n)},e.titleCase=function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()},e.prepareResourceName=function(e){return this.titleCase(vu[e].replace(/_/g," "))},e.prepareResourceTypeName=function(e){return this.titleCase(Cu[e].replace(/_/g," "))},e.preparePerkName=function(e){return this.titleCase(yu[e].replace(/_/g," "))},e.prepareTechName=function(e){return this.titleCase(Su[e].replace(/_/g," "))},e.prepareFlagName=function(e){return this.titleCase(Eu[e].replace(/_/g," "))},e.prepareBuildingName=function(e){return this.titleCase(bu[e].replace(/_/g," "))},e.preparePrayerName=function(e){return this.titleCase(Ou[e].replace(/_/g," "))},e.prepareReligionName=function(e){return this.titleCase(_u[e].replace(/_/g," "))},e.prepareTroopName=function(e){return this.titleCase(Iu[e].replace(/_/g," "))},e.prepareMissionName=function(e){return this.titleCase(Ru[e].replace(/_/g," "))},e.prepareCropName=function(e){return this.titleCase(Tu[e].replace(/_/g," "))},e.resourcesArraysDiff=function(e,n){return e.filter(function(e){return n.findIndex(function(n){return n.resource===e.resource})<0})},e.prepareResourcesNamesList=function(n){var t="";return n.forEach(function(n){return t+=e.prepareResourceName(n.resource)+", "}),(t=t.substr(0,t.length-2)).toLowerCase()},e.copyResourceArray=function(e){var n=[];return e.forEach(function(e){return n.push({resource:e.resource,amount:e.amount})}),n},e}(),wu=function(e){return e[e.GENERAL=0]="GENERAL",e[e.MILITARY=1]="MILITARY",e[e.SCIENCE=2]="SCIENCE",e[e.TECHNOLOGY=3]="TECHNOLOGY",e[e.AGRICULTURE=4]="AGRICULTURE",e}({}),Nu=function(e){return e[e.GAME=0]="GAME",e[e.LOG=1]="LOG",e[e.MODAL=2]="MODAL",e[e.RESOURCES=3]="RESOURCES",e[e.LAND=4]="LAND",e[e.RESEARCH=5]="RESEARCH",e[e.CRAFTING=6]="CRAFTING",e[e.RECIPE=7]="RECIPE",e[e.RELIGION=8]="RELIGION",e[e.WEATHER=9]="WEATHER",e[e.CALENDAR=10]="CALENDAR",e[e.EFFECTS=11]="EFFECTS",e[e.ARMY=12]="ARMY",e[e.HAPPINESS=13]="HAPPINESS",e[e.MANAGEMENT=14]="MANAGEMENT",e[e.ROYAL=15]="ROYAL",e[e.MARKET=16]="MARKET",e[e.VILLAGE=17]="VILLAGE",e[e.FORT=18]="FORT",e[e.FOREST=19]="FOREST",e[e.FIELD=20]="FIELD",e[e.MOUNTAINS=21]="MOUNTAINS",e[e.SEA=22]="SEA",e[e.PLATEAU=23]="PLATEAU",e[e.BUILDING_FACTORY=24]="BUILDING_FACTORY",e[e.SERIALIZER=25]="SERIALIZER",e[e.KONGREGATE=26]="KONGREGATE",e[e.ID=27]="ID",e[e.TICKER=28]="TICKER",e}({}),Pu=function(e){return e[e.PLANK=0]="PLANK",e[e.CUT_STONE=1]="CUT_STONE",e[e.FABRIC=2]="FABRIC",e[e.LEATHER=3]="LEATHER",e[e.GOLD=4]="GOLD",e[e.SILVER=5]="SILVER",e[e.COPPER=6]="COPPER",e[e.TIN=7]="TIN",e[e.BRONZE=8]="BRONZE",e[e.IRON=9]="IRON",e[e.STEEL=10]="STEEL",e[e.FUEL_BRUSHWOOD=11]="FUEL_BRUSHWOOD",e[e.FUEL_LOG=12]="FUEL_LOG",e[e.FUEL_COAL=13]="FUEL_COAL",e[e.STONE_AXE=14]="STONE_AXE",e[e.STONE_PICKAXE=15]="STONE_PICKAXE",e[e.STONE_SHOVEL=16]="STONE_SHOVEL",e[e.STONE_SPEAR=17]="STONE_SPEAR",e[e.STONE_HAMMER=18]="STONE_HAMMER",e[e.BOW=19]="BOW",e[e.CLOTHES_FUR=20]="CLOTHES_FUR",e[e.CLOTHES_FABRIC=21]="CLOTHES_FABRIC",e[e.SWORD=22]="SWORD",e[e.WOODEN_SHIELD=23]="WOODEN_SHIELD",e[e.LEATHER_ARMOR=24]="LEATHER_ARMOR",e[e.LIGHT_ARMOR=25]="LIGHT_ARMOR",e[e.HEAVY_ARMOR=26]="HEAVY_ARMOR",e[e.COOKED_MEAT=27]="COOKED_MEAT",e[e.FLOUR=28]="FLOUR",e[e.BREAD=29]="BREAD",e[e.VEGETABLE_SOUP_BERRY=30]="VEGETABLE_SOUP_BERRY",e[e.VEGETABLE_SOUP_MUSHROOM=31]="VEGETABLE_SOUP_MUSHROOM",e[e.MEAT_SOUP=32]="MEAT_SOUP",e}({}),Du=function(){function e(e,n,t,r,l){void 0===l&&(l=0),this.name=e,this.building=n,this.effect=t,this.duration=r,this.buff=l}return e.prototype.isPermanent=function(){return this.duration<0},e.prototype.isRoyal=function(){return-10===this.duration},e.prototype.isWonder=function(){return-9===this.duration},e.prototype.isBuff=function(){return this.buff>0},e}();!function(e){e.ALL="all",e.BUILD="build-modal",e.IMPORT="import-modal",e.EXPORT="export-modal",e.HARD_RESET="hard-reset-modal",e.INFO="info-modal",e.OPTIONS="options-modal",e.CONFIRM="confirm-modal",e.INPUT="input-modal",e.ROYAL="royal-modal",e.MISSION="mission-modal",e.MARKET="market-modal",e.WORK_MANAGEMENT="work-management-modal",e.TUTORIAL="tutorial-modal",e.CHANGELOG="changelog-modal",e.RESOURCE_MANAGEMENT="resource-management-modal"}(mu||(mu={}));var Mu=function(){function e(){}return e.randomElement=function(e,n){void 0===n&&(n=10);var t=0;if(e.forEach(function(e){return t+=e.chance}),t>100){console.warn("Random roll for params with sum of chances over 100");var r=100/t;e.forEach(function(e){return e.chance=Math.floor(e.chance*r)})}for(var l=this.randomBetween(1,100*n),i=0,o=0,u=e;o<u.length;o++){var s=u[o];if(i+1<=l&&i+s.chance*n>=l)return s.item;i+=s.chance*n}for(;t>100;)for(var a=0,c=e;a<c.length;a++){if(s=c[a],i+1<=l&&i+s.chance*n>=l)return s.item;i+=s.chance*n}return null},e.chance=function(e){return Math.random()<e},e.randomExcept=function(e,n){var t=e.filter(function(e){return n.indexOf(e)<0});return t[this.randomBetween(0,t.length-1)]},e.randomBetween=function(e,n){return Math.floor(Math.random()*(n-e+1))+e},e.randomWeightedExcept=function(e,n){var t=e.filter(function(e){return n.indexOf(e.item)<0}),r=0;t.forEach(function(e){return r+=e.chance});for(var l=this.randomBetween(1,r),i=0,o=0;o<t.length;o++){if(i<l&&l<=i+t[o].chance)return t[o].item;i+=t[o].chance}},e.ngInjectableDef=ve({factory:function(){return new e},token:e,providedIn:"root"}),e}(),ku=function(e){return e[e.VILLAGE=0]="VILLAGE",e[e.FORT=1]="FORT",e[e.FOREST=2]="FOREST",e[e.FIELD=3]="FIELD",e[e.MOUNTAINS=4]="MOUNTAINS",e[e.SEA=5]="SEA",e[e.PLATEAU=6]="PLATEAU",e}({}),Lu=function(){function e(e,n,t,r){this.name=e,this.troop=n,this.effect=t,this.duration=r}return e.prototype.isPermanent=function(){return this.duration<0},e.prototype.isRoyal=function(){return-10===this.duration},e.prototype.isWonder=function(){return-9===this.duration},e}(),xu=function(e){return e[e.SUN=0]="SUN",e[e.CLOUDS=1]="CLOUDS",e[e.RAIN=2]="RAIN",e[e.WIND=3]="WIND",e[e.STORM=4]="STORM",e[e.SNOW=5]="SNOW",e}({}),Fu=function(e){return e[e.DEV=0]="DEV",e[e.V1_0_0=1]="V1_0_0",e}({}),Uu=function(){function e(e,n,t){this.name=e,this.effect=n,this.duration=t}return e.prototype.isPermanent=function(){return this.duration<0},e.prototype.isRoyal=function(){return-10===this.duration},e.prototype.isWonder=function(){return-9===this.duration},e}(),Hu=function(){function e(){}return e.PERMANENT=-1,e.WONDER=-9,e.ROYAL=-10,e}(),Gu={production:!0,gameName:"Villager Kings",saveName:"VillagerKingsSave",versionString:"1.0.9",saveVersion:Fu.V1_0_0},Bu="Welcome to <b>"+Gu.gameName+"</b><br>You start as a leader of a small village.<br>Will you manage to lead your people to greatness? <br>First thing you need to focus on is to make sure that your people will survive winter.<br>You will need to increase food production and have some wood to heat houses.<br>Remember that winter is not the only threat to your people!<br>Good luck!",Vu=[{VERSION:"v1.0.1",MESSAGE:['<ul><li>Fixed barracks not unlocking after being researched</li><li>Fixed weather research description</li><li>Shrine and Church will be available earlier</li><li>"New year!" message will appear on day 1 and only after researching calendar</li><li>Shrine and Church will now log when they become available</li><li>Fixed wrapper boxes sizes</li><li>Pit mine research description changed</li><li>Reduced building button and dropdown font size to prevent overflow</li><li>Aligned building icon and text</li><li>Reduced amount of fur produced by hunter</li><li>Fixed merchant buying items for 0 coins</li><li>Reduced required research points for forestry</li><li>Last tutorial step no longer has "skip tutorial" button</li><li>Available nutrition metric doesn\'t include reserved food</li><li>Researching animals require hay</li><li>Fixed geologist last find description</li></ul>']},{VERSION:"v1.0.2",MESSAGE:["<ul><li>Fixed building line icons alignment</li><li>Refactored dev message window into changelog</li><li>Reduced low happiness severity</li><li>Doubled starting food amount</li><li>Buffed berry and mushroom find chance</li></ul>"]},{VERSION:"v1.0.3",MESSAGE:["<ul><li><b>Famine is now satisfied with 50% less food</b></li><li><b>Refactored happiness so that multiple things combined cannot bring it down to 0</b></li><li>It is now possible to pause the game through settings dropdown menu</li><li>The game is now paused during tutorials</li><li>Reduced brushwood cost of stone tools and bow.</li><li>Buildings are now taking action in random order instead of left to right top to bottom</li><li>Tavern decrease happiness over 75% when no alcohol is available</li><li>Changed Tavern building lines to show amount of alcohols</li><li>Added option to produce fish food for fishers</li><li>Added option to boost school of fish with fish food</li><li>Fixed new school of fish not spawning</li><li>Fixed new sharks not spawning</li><li>Added new Research for Fish Food</li><li>Added tutorials for Field, Mountains, Sea and Plateau regions</li><li>Added close button for royal points modal</li><li>Greatly increased animal taming chance <br>(Taming is supposed to be slow, as this only to be used to kick-start pastures. Another method is to buy animals on the market)</li><li>Fixed animal amount calculation errors resulting in negative, doubled<br> or over the limit amount of animals</li><li>Added notification to market tab if there is no marketplace</li><li>Changed marketplace bribe button text</li></ul>"]},{VERSION:"v1.0.4",MESSAGE:["<ul><li><b>Fixed demolishing huts and houses</b></li><li>Fixed Crafting tab display for Chrome and Edge</li><li>Increased gatherer chance for finding stone and brushwood</li><li>Added several warning for low forest size</li><li>Increased minimal yearly forest growth</li></ul>"]},{VERSION:"v1.0.5",MESSAGE:['<ul><li><b>Fixed wrong army mission being started</b></li><li><b>Fixed Food nutrition value displaying NaN and blocking anything that requires FOOD nutrition as cost</b></li><li>Fixed "Spy" mission not displaying enemy power</li><li>Church will now unlock Religion tab when built</li><li>Urban Planning no longer require house to be researched</li></ul>']},{VERSION:"v1.0.6",MESSAGE:["Bug fixes:<ul><li><b>Fixed King of the People royal perk not allowing to build houses</b></li><li><b>Fixed royal perks not processing unlocked research correctly</b></li><li><b>Fixed research permanent effects not to persist through soft reset and abdication</b></li><li><b>Fixed geologist not finding gold, silver and iron</b></li><li><b>Fixed Tavern not appearing after being researched</b></li><li><b>Fixed fields, orchards and pastures splitting value</b></li><li><b>Fixed 'Blessing' prayer and excluded a lot of buildings that would not benefit from it</b></li><li><b>Fixed changing religion to be player action</b></li></ul>Performance:<ul><li>Improved performance for reloading region<br>It will still take regular time on the first visit but after that I got about 3 times better loading time for region with 36 buildings</li></ul>Other:<ul><li>Improved butcher meat transporting. It no longer requires whole warehouse space to be available at once</li><li>Increased geologist deposits find chances</li><li>Renamed 'Entertainment' research to 'Alcohol'</li><li>Housing buildings show when they are using fuel</li><li>Added research tab warning when no workshop is set to research</li><li>Added button to show finished research projects</li><li>Increased average meat production for hunter lodge</li><li>Improved scrolling in modals</li><li>Urban planning research points requirement greatly reduced</li><li>Improved some prayers descriptions</li><li>Nature effects are now logged when added</li><li>Decreased recruitment times for all troops</li><li>Fishers huts will now work during rain (apparently fish can catch even better during rain due to more oxygen in the water)</li></ul>"]},{VERSION:"v1.0.7",MESSAGE:["Bug fixes:<ul><li><b>Fixed forecast period saving. It will no longer go back to one day after researching weather and reloading game</b></li><li><b>Fixed pastures filling only one butcher. Pasture will now give animal to butcher with shortest queue</b></li><li><b>Fixed demolishing buildings other than housing buildings</b></li><li><b>Fixed work management output to start with maxed output resources</b></li><li><b>Fixed mission not returning troops</b></li><li><b>Fixed possibility to build next wonder without researching</b></li><li><b>Lost wonder effects will be restored on abdication or soft reset</b></li><li><b>Fixed harvesting from field in summer</b></li><li><b>Fixed buying animal filling entire pasture</b></li><li><b>Fixed animals produce filling warehouse when chores went over 50</b></li></ul>Other:<ul><li><b>Changed expedition to take longer and cost more but give more land and kill less troops</b></li><li><b>Improved building filtering and made it persistent</b></li><li><b>Increased game size by about 25%</b></li><li><b>Arrange doesn't require to be researched anymore</b></li><li><b>New option to change visual progress bars to text progress value</b></li><li>Workshops show what is being researched</li><li>Geologist is no longer limited by mountains size</li><li>Slightly improved Royal perks descriptions</li><li>Added special warning for demolishing housing building when there is no enough free space to move all occupants to</li><li>Increased amount of fuel crafted from coal and heating power of coal</li><li>Pit mine now warn that it requires 20 deposits</li><li>Slightly corrected research display</li><li>Changes for Royal Points granting events</li><li>Disabled Ascension temple until it will be fixed</li></ul>Information:<ul><li>Drag and drop arrange seems to work on some computers and not on others. I have tested on a PC and laptop with the same operating system and browser version and it does work on PC and not on laptop.</li></ul>"]},{VERSION:"v1.0.8",MESSAGE:['Bug fixes:<ul><li><b>Fixed workshop display that caused buildings to display in two columns</b></li><li><b>Changes regarding workshop logic that might fix locking issue</b></li><li><b>Fixed "R Quarry" and "R Smithy" prerequisites display</b></li><li><b>Fixed incorrect animals moving when splitting or demolishing pasture</b></li><li><b>Gatherers won\'t lock on warehouse. Locking resource will be removed</b></li><li><b>Fixed field and orchard harvest scale display</b></li><li><b>Fixed bread recipe wheat cost to 2 instead of 1</b></li><li><b>Work management will fire worker after finishing work cycle if rules are not satisfied</b></li><li><b>Fixed and enabled Ascension Temple (requires conditions to be met to become available)</b></li><li><b>Fixed Missions again</b></li><li><b>Fixed some metals recipes not adding after research and smithy built</b></li><li><b>Fixed smithy demolishing</b></li></ul>Other:<ul><li><b>Added tooltips to resources in resource tab.<br>Consumable resources display nutrition<br>Fuel resources display heating power</b></li><li><b>Resources tooltip will now show what building/action used each resource in previous 30 days.</b></li><li>Increased hay consumption of animals by 30%</li><li>Increased apples nutrition value</li><li>Increased apples harvest multiplier</li><li>Increased great lighthouse royal points temporary (to make up for no effects)</li></ul>']},{VERSION:"v1.0.9",MESSAGE:["New features<ul><li><b>Implemented new extended reserver that can define different limit for most of the consumers</b></li></ul>Bug fixes:<ul><li><b>Fixed building Smithy required to research tech allowing to build it</b></li><li><b>Fixed limited buildings allowed to build over the limit</b></li><li><b>Fixed missions finishing without calculating outcome</b></li><li><b>Most probably fixed overscrolling from game to kongregate window</b></li></ul>Other:<ul><li>Doubled iron deposit find chance</li><li>Ore deposits found limited at 50 each</li><li>Troops multiplier now shows multiplied required resources in tooltip. If you cannot afford - troop turns grey</li><li>Slightly increased happiness reduction from half food rations</li><li>Buildings number limit is now added to build window</li><li>Decreased brushwood fuel cost and increased brushwood energy</li></ul>"]}],Wu=new Du("New King",bu.ALL,100,90),ju=750,Yu=360,zu={START_HAPPINESS:15,FOOD_HAPPINESS_FLOOR:0,FOOD_HAPPINESS_LIMIT:20,HEAT_HAPPINESS_FLOOR:10,HEAT_HAPPINESS_LIMIT:50,CLOTHES_HAPPINESS_FLOOR:35,CLOTHES_HAPPINESS_LIMIT:75,ALCOHOL_HAPPINESS_FLOOR:75,ALCOHOL_HAPPINESS_LIMIT:100},Ku=[{text:"Welcome to this quick tutorial that will guide you through basic controls of Villager Kings",position:{width:"250px",top:"180px",left:"275px"}},{text:"To the left you can see navigation menu that will allow you to browse tabs representing different aspects of your village",position:{width:"200px",top:"50px",left:"100px"}},{text:"Right now we are in the village tab and using top menu you can navigate between village regions",position:{width:"200px",top:"65px",left:"130px"}},{text:"In the middle of the village region you can see your buildings. There are many different types of buildings. <br> Some of them produce items, others consume them to produce more advanced items. <br>Currently in your village there are only Huts which produce workers for your village.<br>Housing buildings cannot be stopped and require constant supply of food, fuel (in winter) and clothes",position:{width:"400px",top:"180px",left:"200px"}},{text:"Above your buildings you can see most important metrics for current region.<br>For village those are:<br>1. Population of your village/max population<br>2. Free workers that can be assigned to work<br>3. Size of your empty land where you can build<br>4. Size of your whole village (all regions)<br>5. Your people happiness, which will influence their productivity<br>",position:{width:"400px",top:"115px",left:"100px"}},{text:"That's all here for now let's move into the Forest region<br> using top menu and continue the tutorial there",position:{width:"400px",top:"180px",left:"200px"}}],qu=[{text:"In the forest you have two working buildings<br>Logger's hut that cuts forest trees and produces logs<br>and Gatherer that collects various resources when wandering in the forest. Gatherer has two operating modes<br>Worker working here can either focus on looking for food or useful and sometimes rare resources",position:{width:"400px",top:"240px",left:"200px"}},{text:"There are two icons on both sides of building name.<br>To the left there is details icon. If you hover over it, <br>a tooltip with more technical details regarding a building will popup (not active during tutorial),<br>To the right you can see a cog icon which allows you to stop and start production by hiring or firing worker",position:{width:"450px",top:"160px",left:"150px"}},{text:"Above buildings you can see 'Build' and 'Demolish' buttons.<br>First one opens a window with all buildings you can build in this region.<br>In future you will discover many more types of building to build.<br>Second one allows you to set buildings to be demolished by free worker<br>You will receive small portion of resources used to build demolished building",position:{width:"450px",top:"100px",left:"50px"}},{text:"Now let's order your people to build more gatherers and continue to the 'Resources' tab in the left menu",position:{width:"250px",top:"180px",left:"275px"}}],$u=[{text:"Field region has many buildings with different mechanics than other regions.<br>Field, Orchard and Pasture buildings require Farm with workers <br>who will work on planting, sowing, harvesting and tending to animals.<br><br>Fields yearly cycle starts in spring, after you have selected what type of crops should be planted,<br>your Farm workers will start plowing the land and then sowing selected crop.<br>After sowing is completed your crops will start to grow until Autumn.<br>On autumn all crops will stop growing and will be ready for harvest performed by Farm workers.<br>If there are any crops not harvested by the beginning of winter they will wither and will be lost.<br><br>",position:{width:"400px",top:"150px",left:"200px"}},{text:"Orchards are a bit different. Those also need to be plowed and plants need to be planted,<br>after that they keep growing for several years without any work input.<br>Once they matured they will fruit every year with only harvest work required.<br><br>",position:{width:"400px",top:"150px",left:"200px"}},{text:"Pastures allow animals breeding. They require work input for the whole year (chores)<br>and animals require Hay to eat during winter.<br>If no hay is available animals can starve to death.<br> They eat grass and other natural food during other seasons.<br>Some animals produce animals products like eggs and milk which add to your food supplies.<br>All animals can be butchered for meat when butcher building is built.<br>Once animals are researched Hunters can try to tame animals for which there is empty pasture space.",position:{width:"400px",top:"150px",left:"200px"}}],Qu=[{text:"Most mountains buildings require mountains space instead of free land.<br>This mountain area is finite and after the building deplete resources it can be demolished to add empty land instead of back to mountains.<br><br>To gain more mountains areas you will need to run expeditions or conquer enemies (Army).<br><br>After geologist is unlocked and built he will start looking for ores deposits which is very slow process.<br>Once 20 deposits of certain resource has been found Pit Mine can be used to mine it.",position:{width:"400px",top:"150px",left:"200px"}}],Zu=[{text:"In this special area Wonder buildings can be constructed.<br>These require much more resources and much more work to be completed.<br>Each Wonder building adds permanent buff corresponding to it's nature.<br>Wonder building also allows you to abdicate what performs soft reset and additionally award you with Royal Points to spend on Royal perks.<br>Wonder building and it's buff persist through soft resets and abdications.",position:{width:"400px",top:"150px",left:"200px"}}],Xu=[{text:"By the sea fishers can catch fish from the sea.<br>Each school of fish has certain number of fish that slowly breed.<br>If you catch all fish, new school of fish should appear in some time.<br><br>Fishers can also produce fish food which will boost fish breeding rate.",position:{width:"400px",top:"150px",left:"200px"}}],Ju=[{text:"In this tab you can browse all of the resources that you have discovered<br>Next to the resource icon there is current amount that you have and storage limit for that resource.<br><br>Storage can be extended by building warehouses in the village",position:{width:"400px",top:"150px",left:"200px"}},{text:"To the right there are two additional icons present for each resource<br>First one allows you to set amount that will be reserved and no automated action can use them<br>Player initiated action can on the other hand use reserved resources<br>(keep in mind that some actions like for example invasion can still reduce resources below reserved amount!)<br><br>Second icon toggles which resources should be highlighted in the game header",position:{width:"400px",top:"150px",left:"200px"}},{text:"In the header you can highlight up to 7 resources to know their amounts in any tab of the game",position:{width:"400px",top:"30px",left:"30px"}},{text:"That's all for the basics.<br>To really start progressing you should work towards building Workshop in the village which will open new opportunities<br>",position:{width:"400px",top:"150px",left:"200px"}}],es={ALLOW_FUR_CLOTHES:!0,SHOW_FOOD_NUTRITION:!1,FOOD_RATIONS:2,CLOTHES_RATIONS:1,ALCOHOL_RATIONS:1},ns={START_LAND:1e3,START_FOREST:1500,START_MOUNTAINS:200,START_FOREST_LIMIT:100,FOREST_GROW_PERCENTAGE:.05,MINIMAL_FOREST_GROWTH:100,FOREST_GROW_TICKS:10*Yu},ts={getBuilding:function(e){var n=this.getBuildings().find(function(n){return n[0]===bu[e]});if(n)return n[1];console.warn("Invalid building: "+Au.prepareBuildingName(e))},getBuildings:function(){return Object.entries(this.VILLAGE).concat(Object.entries(this.FORT)).concat(Object.entries(this.FOREST)).concat(Object.entries(this.FIELD)).concat(Object.entries(this.MOUNTAINS)).concat(Object.entries(this.PLATEAU)).concat(Object.entries(this.SEA))},DEMOLITION_RETURN:.3,FOREST:{LOGGERS_HUT:{BASE_POWER:5,SIZE:2,COMPLEXITY:5,DESCRIPTION:"Loggers cut trees in the forest",COST:[{resource:vu.LOG,amount:10}],WEATHER:[{weather:xu.RAIN,effect:-50},{weather:xu.STORM,effect:-100}],BUFF:{name:"New tools",effect:5,duration:360,cost:[{resource:vu.STONE_AXE,amount:5}]},UPGRADES:[{BASE_POWER:7.5,COMPLEXITY:10,PREREQUISITES:[Eu.URBAN_PLANNING],COST:[{resource:vu.PLANK,amount:10},{resource:vu.CUT_STONE,amount:10},{resource:vu.STONE_HAMMER,amount:5},{resource:vu.STONE_AXE,amount:5}]},{BASE_POWER:10,COMPLEXITY:20,PREREQUISITES:[],COST:[{resource:vu.PLANK,amount:20},{resource:vu.CUT_STONE,amount:20},{resource:vu.COPPER,amount:10},{resource:vu.STONE_AXE,amount:10}]}]},FORESTER:{BASE_POWER:10,SIZE:5,COMPLEXITY:10,DESCRIPTION:"Forester can plant new trees and control natural growth of the forest",COST:[{resource:vu.LOG,amount:10},{resource:vu.STONE_SHOVEL,amount:2}],WEATHER:[{weather:xu.RAIN,effect:-100},{weather:xu.STORM,effect:-100}],BUFF:{name:"New tools",effect:5,duration:360,cost:[{resource:vu.STONE_SHOVEL,amount:5}]}},SAWMILL:{BASE_POWER:3,SIZE:5,COMPLEXITY:15,DESCRIPTION:"Sawmill cut logs into planks",COST:[{resource:vu.LOG,amount:20},{resource:vu.CUT_STONE,amount:10}],TEXT:"cutting",INPUT_RESOURCES:[{resource:vu.LOG,amount:3}],OUTPUT_RESOURCES:[{resource:vu.PLANK,amount:1}]},GATHERER:{BASE_POWER:10,SIZE:5,COMPLEXITY:3,DESCRIPTION:"Gatherer can find all kinds of useful things in the forest",COST:[{resource:vu.LOG,amount:10},{resource:vu.STONE,amount:5}],WEATHER:[{weather:xu.RAIN,effect:-75},{weather:xu.STORM,effect:-100}],BERRY_CHANCE:30,MUSHROOM_CHANCE:30,WHEAT_CHANCE:3,BRUSHWOOD_CHANCE:35,STONE_CHANCE:15,LOG_CHANCE:5,COPPER_CHANCE:.5},HUNTER_LODGE:{BASE_POWER:2,SIZE:5,COMPLEXITY:8,DESCRIPTION:"Hunts animals for meat and fur",COST:[{resource:vu.LOG,amount:15},{resource:vu.PLANK,amount:5},{resource:vu.BOW,amount:1}],WEATHER:[{weather:xu.RAIN,effect:-100},{weather:xu.STORM,effect:-100}],BUFF:{name:"New tools",effect:5,duration:360,cost:[{resource:vu.BOW,amount:5}]}},TANNERY:{BASE_POWER:5,SIZE:5,COMPLEXITY:5,DESCRIPTION:"Turns furs into leather",COST:[{resource:vu.LOG,amount:20},{resource:vu.PLANK,amount:10}],TEXT:"tanning",INPUT_RESOURCES:[{resource:vu.FUR,amount:1}],OUTPUT_RESOURCES:[{resource:vu.LEATHER,amount:1}]}},MOUNTAINS:{QUARRY:{BASE_POWER:5,SIZE:20,COMPLEXITY:15,DESCRIPTION:"Cuts stone out of mountains",COST:[{resource:vu.LOG,amount:40},{resource:vu.PLANK,amount:20}],WEATHER:[{weather:xu.RAIN,effect:-100},{weather:xu.STORM,effect:-100}],BUFF:{name:"New tools",effect:5,duration:360,cost:[{resource:vu.STONE_PICKAXE,amount:5}]}},GEOLOGIST:{BASE_POWER:1,SIZE:5,COMPLEXITY:10,DESCRIPTION:"Looks for useful rocks",COST:[{resource:vu.LOG,amount:10},{resource:vu.STONE,amount:5}],WEATHER:[{weather:xu.RAIN,effect:-100},{weather:xu.STORM,effect:-100}],COAL_CHANCE:20,GOLD_CHANCE:4,SILVER_CHANCE:8,COPPER_CHANCE:10,TIN_CHANCE:6,IRON_CHANCE:4},PIT_MINE:{BASE_POWER:10,SIZE:20,COMPLEXITY:15,DESCRIPTION:"Allows workers to mine ores",COST:[{resource:vu.LOG,amount:60},{resource:vu.STONE_PICKAXE,amount:5}],WEATHER:[{weather:xu.RAIN,effect:-100},{weather:xu.STORM,effect:-100}],BUFF:{name:"New tools",effect:5,duration:360,cost:[{resource:vu.STONE_PICKAXE,amount:5},{resource:vu.STONE_SHOVEL,amount:5}]}},STONEMASON:{BASE_POWER:3,SIZE:5,COMPLEXITY:10,DESCRIPTION:"Shapes stones for building",COST:[{resource:vu.LOG,amount:10},{resource:vu.STONE,amount:10}],TEXT:"cutting",INPUT_RESOURCES:[{resource:vu.STONE,amount:3}],OUTPUT_RESOURCES:[{resource:vu.CUT_STONE,amount:1}]},SMITHY:{BASE_POWER:5,SIZE:10,COMPLEXITY:20,DESCRIPTION:"Provides furnace for smelting ore and metal items",COST:[{resource:vu.LOG,amount:20},{resource:vu.PLANK,amount:10},{resource:vu.CUT_STONE,amount:10},{resource:vu.COPPER,amount:5}],RECIPES:[{recipe:Pu.COPPER,prerequisite:Eu.SMITHY},{recipe:Pu.TIN,prerequisite:Eu.SMITHY},{recipe:Pu.BRONZE,prerequisite:Eu.BRONZE},{recipe:Pu.GOLD,prerequisite:Eu.ADVANCED_ORE_PROCESSING},{recipe:Pu.SILVER,prerequisite:Eu.ADVANCED_ORE_PROCESSING},{recipe:Pu.IRON,prerequisite:Eu.IRON},{recipe:Pu.STEEL,prerequisite:Eu.STEEL},{recipe:Pu.SWORD,prerequisite:Eu.SMITHY},{recipe:Pu.LIGHT_ARMOR,prerequisite:Eu.SMITHY},{recipe:Pu.HEAVY_ARMOR,prerequisite:Eu.SMITHY}]},MINT:{BASE_POWER:5,SIZE:5,COMPLEXITY:10,DESCRIPTION:"Produces coins from gold",COST:[{resource:vu.LOG,amount:20},{resource:vu.PLANK,amount:10},{resource:vu.CUT_STONE,amount:10},{resource:vu.BRONZE,amount:10}],TEXT:"minting",INPUT_RESOURCES:[{resource:vu.GOLD,amount:1}],OUTPUT_RESOURCES:[{resource:vu.COINS,amount:100}]}},VILLAGE:{HUT:{BASE_POWER:.5,SIZE:2,COMPLEXITY:5,DESCRIPTION:"Very primitive shelter but keeps rain and cold away",COST:[{resource:vu.FOOD,amount:100},{resource:vu.LOG,amount:10},{resource:vu.BRUSHWOOD,amount:10}],MAX_OCCUPANTS:2},HOUSE:{BASE_POWER:.7,SIZE:2,COMPLEXITY:15,DESCRIPTION:"Bigger and more durable shelter",COST:[{resource:vu.FOOD,amount:100},{resource:vu.LOG,amount:20},{resource:vu.PLANK,amount:20}],MAX_OCCUPANTS:6},WAREHOUSE:{BASE_POWER:0,SIZE:20,COMPLEXITY:10,DESCRIPTION:"Stores selected type of resources",COST:[{resource:vu.LOG,amount:20},{resource:vu.PLANK,amount:10},{resource:vu.CUT_STONE,amount:5}]},WORKSHOP:{BASE_POWER:5,RESEARCH_POWER:1,CRAFTING_POWER:1.5,SIZE:5,COMPLEXITY:15,DESCRIPTION:"At the workshop workers can research new things or build complex things",COST:[{resource:vu.LOG,amount:20},{resource:vu.BRUSHWOOD,amount:10}]},MARKETPLACE:{BASE_POWER:1,SIZE:20,COMPLEXITY:5,DESCRIPTION:"Place for trading with other villages",COST:[{resource:vu.LOG,amount:10},{resource:vu.PLANK,amount:10},{resource:vu.STONE,amount:20}]},TAVERN:{BASE_POWER:1,SIZE:10,COMPLEXITY:20,DESCRIPTION:"Meeting place",COST:[{resource:vu.LOG,amount:10},{resource:vu.PLANK,amount:20},{resource:vu.CUT_STONE,amount:20},{resource:vu.BRUSHWOOD,amount:20}],WEATHER:[{weather:xu.RAIN,effect:25},{weather:xu.STORM,effect:25}]},BAKERY:{BASE_POWER:10,SIZE:5,COMPLEXITY:10,DESCRIPTION:"Bakes bread from flour",COST:[{resource:vu.LOG,amount:10},{resource:vu.PLANK,amount:10},{resource:vu.STONE,amount:10},{resource:vu.CUT_STONE,amount:10}],TEXT:"baking",INPUT_RESOURCES:[{resource:vu.FLOUR,amount:2},{resource:vu.FUEL,amount:1}],OUTPUT_RESOURCES:[{resource:vu.BREAD,amount:1}],BUFF:{name:"Bread oven",effect:5,duration:360,cost:[{resource:vu.CUT_STONE,amount:20}]}},TAILOR:{BASE_POWER:5,SIZE:5,COMPLEXITY:10,DESCRIPTION:"Produces clothes from fabric",COST:[{resource:vu.LOG,amount:10},{resource:vu.PLANK,amount:10}],TEXT:"sewing",INPUT_RESOURCES:[{resource:vu.FABRIC,amount:3}],OUTPUT_RESOURCES:[{resource:vu.CLOTHES,amount:1}]},SHRINE:{BASE_POWER:1,POPULATION:8,SIZE:2,COMPLEXITY:8,DESCRIPTION:"Place for prayer and offerings",COST:[{resource:vu.LOG,amount:5},{resource:vu.CUT_STONE,amount:5},{resource:vu.VEGETABLE_SOUP,amount:5},{resource:vu.MEAT_SOUP,amount:5}]},CHURCH:{BASE_POWER:1,POPULATION:20,SIZE:10,COMPLEXITY:10,DESCRIPTION:"Place of prayer and contemplation",COST:[{resource:vu.LOG,amount:40},{resource:vu.CUT_STONE,amount:30}],BUFF:{name:"Offering",effect:5,duration:360,cost:[{resource:vu.COINS,amount:200}]}}},FORT:{BARRACKS:{BASE_POWER:0,SIZE:10,COMPLEXITY:10,DESCRIPTION:"Housing for troops",COST:[{resource:vu.LOG,amount:20},{resource:vu.CUT_STONE,amount:10}]},TRAINING_SQUARE:{BASE_POWER:10,SIZE:10,COMPLEXITY:3,DESCRIPTION:"Place for training recruits",COST:[{resource:vu.STONE,amount:40}],WEATHER:[{weather:xu.RAIN,effect:-50},{weather:xu.STORM,effect:-100}]},STOCKADE:{BASE_POWER:10,SIZE:50,COMPLEXITY:100,DESCRIPTION:"Protective wall around the village to protect against attackers",COST:[{resource:vu.LOG,amount:100},{resource:vu.STONE,amount:10}],DEFENSE:50,DURABILITY:50},WOODEN_TOWER:{BASE_POWER:10,SIZE:10,COMPLEXITY:30,DESCRIPTION:" Provide passive defense power",COST:[{resource:vu.LOG,amount:40},{resource:vu.PLANK,amount:20}],DEFENSE:10,DURABILITY:50},STONE_TOWER:{BASE_POWER:10,SIZE:10,COMPLEXITY:30,DESCRIPTION:"Provide passive defense power, more durable than wooden tower",COST:[{resource:vu.CUT_STONE,amount:40},{resource:vu.PLANK,amount:20}],DEFENSE:20,DURABILITY:100},STASH:{BASE_POWER:1,SIZE:10,COMPLEXITY:30,DESCRIPTION:"Complex hidden tunnels allow us to hide some resources in case of invasion",COST:[{resource:vu.LOG,amount:30},{resource:vu.CUT_STONE,amount:10},{resource:vu.PLANK,amount:10},{resource:vu.STONE_PICKAXE,amount:5}]}},FIELD:{FARM:{BASE_POWER:20,SIZE:15,COMPLEXITY:10,DESCRIPTION:"Farm allows workers to work on fields, orchard and pastures",COST:[{resource:vu.LOG,amount:40},{resource:vu.PLANK,amount:20},{resource:vu.STONE,amount:10}],WEATHER:[{weather:xu.RAIN,effect:-50},{weather:xu.STORM,effect:-100}],BUFF:{name:"New tools",effect:5,duration:360,cost:[{resource:vu.STONE_SHOVEL,amount:5}]}},WINDMILL:{BASE_POWER:5,SIZE:10,COMPLEXITY:15,DESCRIPTION:"Windmill turns wheat into flour",COST:[{resource:vu.LOG,amount:30},{resource:vu.PLANK,amount:10},{resource:vu.FABRIC,amount:20}],TEXT:"milling",INPUT_RESOURCES:[{resource:vu.WHEAT,amount:1}],OUTPUT_RESOURCES:[{resource:vu.FLOUR,amount:1}],WEATHER:[{weather:xu.WIND,effect:50},{weather:xu.STORM,effect:-100}]},COTTON_MILL:{BASE_POWER:5,SIZE:5,COMPLEXITY:10,DESCRIPTION:"Spins cotton into fabric",COST:[{resource:vu.LOG,amount:10},{resource:vu.PLANK,amount:10}],TEXT:"spinning",INPUT_RESOURCES:[{resource:vu.COTTON,amount:2}],OUTPUT_RESOURCES:[{resource:vu.FABRIC,amount:1}]},BREWERY:{BASE_POWER:1,SIZE:15,COMPLEXITY:20,DESCRIPTION:"Brews delicious beer",COST:[{resource:vu.LOG,amount:30},{resource:vu.PLANK,amount:30},{resource:vu.COPPER,amount:10}],TEXT:"brewing",INPUT_RESOURCES:[{resource:vu.BARLEY,amount:10},{resource:vu.HOP,amount:5},{resource:vu.FUEL,amount:3}],OUTPUT_RESOURCES:[{resource:vu.BEER,amount:10}]},FIELD:{BASE_POWER:1,SIZE:50,COMPLEXITY:1,DESCRIPTION:"Various crops can be grown here",COST:[{resource:vu.STONE,amount:4}],WEATHER:[{weather:xu.RAIN,effect:50},{weather:xu.SUN,effect:50},{weather:xu.CLOUDS,effect:-25}]},BUTCHER:{BASE_POWER:5,SIZE:15,COMPLEXITY:10,DESCRIPTION:"Turns animals into meat",COST:[{resource:vu.LOG,amount:15},{resource:vu.PLANK,amount:10},{resource:vu.CUT_STONE,amount:5}]},ORCHARD:{BASE_POWER:1,SIZE:50,COMPLEXITY:1,DESCRIPTION:"Various fruit trees and bushes can be grown here",COST:[{resource:vu.LOG,amount:5}],WEATHER:[{weather:xu.RAIN,effect:50},{weather:xu.SUN,effect:50},{weather:xu.CLOUDS,effect:-25}]},PASTURE:{BASE_POWER:1,SIZE:50,COMPLEXITY:3,DESCRIPTION:"Many animals can be grown here",COST:[{resource:vu.LOG,amount:10},{resource:vu.PLANK,amount:20}]},WINERY:{BASE_POWER:1,SIZE:30,COMPLEXITY:10,DESCRIPTION:"Extracts and ferments grape juices",COST:[{resource:vu.LOG,amount:20},{resource:vu.PLANK,amount:20},{resource:vu.COPPER,amount:10}],TEXT:"fermenting",INPUT_RESOURCES:[{resource:vu.GRAPE,amount:35}],OUTPUT_RESOURCES:[{resource:vu.WINE,amount:8}]}},SEA:{FISHERS_HUT:{BASE_POWER:5,SIZE:2,COMPLEXITY:5,DESCRIPTION:"Fishers catch fish in the sea",COST:[{resource:vu.LOG,amount:10},{resource:vu.PLANK,amount:5},{resource:vu.COPPER,amount:1}],WEATHER:[{weather:xu.RAIN,effect:25},{weather:xu.STORM,effect:-100},{weather:xu.WIND,effect:25}]},SCHOOL_OF_FISH:{FISH_FOOD_DAYS:60,BREED_CHANCE:400,BREED_AMOUNT:10,SPLIT_THRESHOLD:400,SPLIT_CHANCE:100,NEW_SCHOOL_CHANCE:100,NEW_SCHOOL_SIZE:50},SHARKS:{FEED_CHANCE:15,FEED_AMOUNT:1,BREED_THRESHOLD:500,BREED_CHANCE:100,DIE_THRESHOLD:300,DIE_CHANCE:100}},PLATEAU:{STONEHENGE:{BASE_POWER:3,SIZE:50,COMPLEXITY:0,DESCRIPTION:"Huge rocks mark place for old rituals and scientific experiments",COST:[],STAGES:[{cost:[{resource:vu.STONE_SHOVEL,amount:10},{resource:vu.STONE_PICKAXE,amount:10},{resource:vu.STONE_HAMMER,amount:10}],progress:10},{cost:[{resource:vu.LOG,amount:50},{resource:vu.PLANK,amount:50}],progress:10},{cost:[{resource:vu.LOG,amount:50},{resource:vu.PLANK,amount:50}],progress:10},{cost:[{resource:vu.STONE,amount:100}],progress:10},{cost:[{resource:vu.CUT_STONE,amount:100}],progress:10},{cost:[{resource:vu.STONE,amount:100}],progress:10},{cost:[{resource:vu.CUT_STONE,amount:100}],progress:10},{cost:[{resource:vu.LOG,amount:50},{resource:vu.PLANK,amount:50}],progress:10},{cost:[{resource:vu.STONE,amount:100}],progress:10},{cost:[{resource:vu.CUT_STONE,amount:100}],progress:10}],BUILDING_EFFECTS:[{building:bu.WORKSHOP,value:20}],RP:20},PYRAMID:{BASE_POWER:3,SIZE:100,COMPLEXITY:0,DESCRIPTION:"Although it's just \"putting one rock on the other\", our construction worker's skill will be put to the test with this huge project",COST:[],STAGES:[{cost:[{resource:vu.STONE_SHOVEL,amount:10},{resource:vu.STONE_PICKAXE,amount:10},{resource:vu.STONE_HAMMER,amount:10}],progress:10},{cost:[{resource:vu.CUT_STONE,amount:50}],progress:10},{cost:[{resource:vu.LOG,amount:50},{resource:vu.PLANK,amount:50}],progress:10},{cost:[{resource:vu.CUT_STONE,amount:100}],progress:10},{cost:[{resource:vu.LOG,amount:50},{resource:vu.PLANK,amount:50}],progress:10},{cost:[{resource:vu.CUT_STONE,amount:100}],progress:10},{cost:[{resource:vu.LOG,amount:50},{resource:vu.PLANK,amount:50}],progress:10},{cost:[{resource:vu.CUT_STONE,amount:100}],progress:5},{cost:[{resource:vu.CUT_STONE,amount:100}],progress:5},{cost:[{resource:vu.LOG,amount:50},{resource:vu.PLANK,amount:50}],progress:10},{cost:[{resource:vu.CUT_STONE,amount:100}],progress:5},{cost:[{resource:vu.CUT_STONE,amount:100}],progress:5}],BUILDING_EFFECTS:[{building:bu.CONSTRUCTION,value:10},{building:bu.DECONSTRUCTION,value:10}],RP:20},HANGING_GARDEN:{BASE_POWER:3,SIZE:30,COMPLEXITY:0,DESCRIPTION:"With all those plants that cover entire buildings we truly became masters of flora",COST:[],STAGES:[{cost:[{resource:vu.STONE_SHOVEL,amount:10},{resource:vu.STONE_HAMMER,amount:10},{resource:vu.STONE_AXE,amount:10}],progress:10},{cost:[{resource:vu.LOG,amount:100},{resource:vu.PLANK,amount:50}],progress:10},{cost:[{resource:vu.BERRY,amount:75},{resource:vu.MUSHROOM,amount:75}],progress:10},{cost:[{resource:vu.STONE_SHOVEL,amount:20}],progress:10},{cost:[{resource:vu.WHEAT,amount:100}],progress:10},{cost:[{resource:vu.BARLEY,amount:100}],progress:10},{cost:[{resource:vu.APPLE,amount:100}],progress:10},{cost:[{resource:vu.HOP,amount:100}],progress:10},{cost:[{resource:vu.COTTON,amount:100}],progress:10},{cost:[{resource:vu.GRAPE,amount:100}],progress:10}],BUILDING_EFFECTS:[{building:bu.FARM,value:15}],RP:20},COLOSSUS:{BASE_POWER:3,SIZE:50,COMPLEXITY:0,DESCRIPTION:"This giant statue watches over our troops both during defense and attack",COST:[],STAGES:[{cost:[{resource:vu.STONE_SHOVEL,amount:10},{resource:vu.STONE_PICKAXE,amount:10},{resource:vu.STONE_HAMMER,amount:10}],progress:10},{cost:[{resource:vu.LOG,amount:100},{resource:vu.PLANK,amount:50}],progress:10},{cost:[{resource:vu.STONE,amount:75},{resource:vu.CUT_STONE,amount:75}],progress:10},{cost:[{resource:vu.LOG,amount:100},{resource:vu.PLANK,amount:50}],progress:10},{cost:[{resource:vu.STONE,amount:75},{resource:vu.CUT_STONE,amount:75}],progress:10},{cost:[{resource:vu.LOG,amount:100},{resource:vu.PLANK,amount:50}],progress:10},{cost:[{resource:vu.STONE,amount:75},{resource:vu.CUT_STONE,amount:75}],progress:10},{cost:[{resource:vu.LOG,amount:100},{resource:vu.PLANK,amount:50}],progress:10},{cost:[{resource:vu.STONE,amount:75},{resource:vu.CUT_STONE,amount:75}],progress:10},{cost:[{resource:vu.COPPER,amount:100},{resource:vu.STONE_HAMMER,amount:20}],progress:10}],ARMY_EFFECTS:[{troop:Iu.ALL,value:15}],RP:20},UNDERGROUND_CITY:{BASE_POWER:3,SIZE:0,COMPLEXITY:0,DESCRIPTION:"After connecting empty mines tunnels and repurposing them we will create entire underground city",COST:[],STAGES:[{cost:[{resource:vu.STONE_SHOVEL,amount:10},{resource:vu.STONE_HAMMER,amount:10},{resource:vu.STONE_PICKAXE,amount:10}],progress:10},{cost:[{resource:vu.LOG,amount:100}],progress:10},{cost:[{resource:vu.STONE_SHOVEL,amount:20},{resource:vu.STONE_HAMMER,amount:20},{resource:vu.STONE_PICKAXE,amount:20}],progress:10},{cost:[{resource:vu.LOG,amount:100}],progress:10},{cost:[{resource:vu.STONE_SHOVEL,amount:20},{resource:vu.STONE_HAMMER,amount:20},{resource:vu.STONE_PICKAXE,amount:20}],progress:10},{cost:[{resource:vu.LOG,amount:100}],progress:10},{cost:[{resource:vu.STONE_SHOVEL,amount:20},{resource:vu.STONE_HAMMER,amount:20},{resource:vu.STONE_PICKAXE,amount:20}],progress:10},{cost:[{resource:vu.LOG,amount:100}],progress:10},{cost:[{resource:vu.STONE_SHOVEL,amount:20},{resource:vu.STONE_HAMMER,amount:20},{resource:vu.STONE_PICKAXE,amount:20}],progress:10},{cost:[{resource:vu.LOG,amount:50},{resource:vu.CUT_STONE,amount:50}],progress:10}],BUILDING_EFFECTS:[{building:bu.PIT_MINE,value:15},{building:bu.QUARRY,value:15},{building:bu.GEOLOGIST,value:15}],RP:20},GREAT_LIGHTHOUSE:{BASE_POWER:3,SIZE:50,COMPLEXITY:0,DESCRIPTION:"Light from this building can be seen as far as anyone would like to ever travel",COST:[],STAGES:[{cost:[{resource:vu.STONE_SHOVEL,amount:10},{resource:vu.STONE_HAMMER,amount:10},{resource:vu.STONE_PICKAXE,amount:10}],progress:10},{cost:[{resource:vu.LOG,amount:100},{resource:vu.PLANK,amount:50}],progress:10},{cost:[{resource:vu.CUT_STONE,amount:100}],progress:10},{cost:[{resource:vu.LOG,amount:100},{resource:vu.PLANK,amount:50}],progress:10},{cost:[{resource:vu.CUT_STONE,amount:100}],progress:10},{cost:[{resource:vu.LOG,amount:100},{resource:vu.PLANK,amount:50}],progress:10},{cost:[{resource:vu.CUT_STONE,amount:100}],progress:10},{cost:[{resource:vu.LOG,amount:100},{resource:vu.PLANK,amount:50}],progress:10},{cost:[{resource:vu.CUT_STONE,amount:100}],progress:10},{cost:[{resource:vu.PLANK,amount:100}],progress:10}],BUILDING_EFFECTS:[],RP:30},SACRED_GROVE:{BASE_POWER:3,SIZE:50,COMPLEXITY:0,DESCRIPTION:"Collection of the oldest and greatest forest fauna and flora in one place",COST:[],STAGES:[{cost:[{resource:vu.STONE_SHOVEL,amount:10},{resource:vu.STONE_HAMMER,amount:10},{resource:vu.STONE_PICKAXE,amount:10}],progress:10},{cost:[{resource:vu.BERRY,amount:100},{resource:vu.MUSHROOM,amount:100}],progress:10},{cost:[{resource:vu.CHICKEN,amount:20},{resource:vu.HORSE,amount:10},{resource:vu.PIG,amount:10}],progress:10},{cost:[{resource:vu.BERRY,amount:200},{resource:vu.MUSHROOM,amount:200}],progress:10},{cost:[{resource:vu.BERRY,amount:100},{resource:vu.MUSHROOM,amount:100}],progress:10},{cost:[{resource:vu.CHICKEN,amount:20},{resource:vu.HORSE,amount:10},{resource:vu.PIG,amount:10}],progress:10},{cost:[{resource:vu.BERRY,amount:100},{resource:vu.MUSHROOM,amount:100}],progress:10},{cost:[{resource:vu.CHICKEN,amount:20},{resource:vu.HORSE,amount:10},{resource:vu.PIG,amount:10}],progress:10},{cost:[{resource:vu.BERRY,amount:100},{resource:vu.MUSHROOM,amount:100}],progress:10},{cost:[{resource:vu.BERRY,amount:200},{resource:vu.MUSHROOM,amount:200}],progress:10}],BUILDING_EFFECTS:[{building:bu.FORESTER,value:10},{building:bu.LOGGERS_HUT,value:10},{building:bu.HUNTER_LODGE,value:10},{building:bu.GATHERER,value:10}],RP:20},ASCENSION_TEMPLE:{BASE_POWER:1.5,SIZE:100,COMPLEXITY:0,DESCRIPTION:"Mystical place where your fate will be determined",COST:[],STAGES:[{cost:[{resource:vu.STONE_SHOVEL,amount:10},{resource:vu.STONE_HAMMER,amount:10},{resource:vu.STONE_PICKAXE,amount:10}],progress:5},{cost:[{resource:vu.LOG,amount:100},{resource:vu.PLANK,amount:100}],progress:5},{cost:[{resource:vu.CUT_STONE,amount:100},{resource:vu.PLANK,amount:100}],progress:10},{cost:[{resource:vu.COPPER,amount:50},{resource:vu.IRON,amount:50},{resource:vu.STEEL,amount:50},{resource:vu.GOLD,amount:50},{resource:vu.SILVER,amount:50}],progress:10},{cost:[{resource:vu.CUT_STONE,amount:100},{resource:vu.PLANK,amount:100}],progress:10},{cost:[{resource:vu.COPPER,amount:50},{resource:vu.IRON,amount:50},{resource:vu.STEEL,amount:50},{resource:vu.GOLD,amount:50},{resource:vu.SILVER,amount:50}],progress:10},{cost:[{resource:vu.CUT_STONE,amount:100},{resource:vu.PLANK,amount:100}],progress:10},{cost:[{resource:vu.COPPER,amount:50},{resource:vu.IRON,amount:50},{resource:vu.STEEL,amount:50},{resource:vu.GOLD,amount:50},{resource:vu.SILVER,amount:50}],progress:10},{cost:[{resource:vu.CUT_STONE,amount:100},{resource:vu.PLANK,amount:100}],progress:10},{cost:[{resource:vu.COPPER,amount:50},{resource:vu.IRON,amount:50},{resource:vu.STEEL,amount:50},{resource:vu.GOLD,amount:50},{resource:vu.SILVER,amount:50}],progress:10},{cost:[{resource:vu.GOLD,amount:100},{resource:vu.SILVER,amount:100}],progress:10}],RP:50}},CONSTRUCTION_SITE:{BASE_POWER:10,SIZE:0,COMPLEXITY:0,DESCRIPTION:"",COST:[],WEATHER:[{weather:xu.RAIN,effect:-75},{weather:xu.STORM,effect:-100}]},DECONSTRUCTION_SITE:{BASE_POWER:10,SIZE:0,COMPLEXITY:0,DESCRIPTION:"",COST:[],WEATHER:[{weather:xu.RAIN,effect:-75},{weather:xu.STORM,effect:-100}]}},rs={getResource:function(e){var n=this.getResources().find(function(n){return n[0]===vu[e]});if(n)return n[1];console.warn("Invalid resource: "+Au.prepareResourceName(e))},getResourcesByType:function(e){var n=this.getResources().filter(function(n){return n[1].TYPES.includes(e)});if(n)return n;console.warn("Invalid resource type: "+Au.prepareResourceTypeName(e))},getResources:function(){return Object.entries(this.RAW).concat(Object.entries(this.PROCESSED)).concat(Object.entries(this.FOOD)).concat(Object.entries(this.TOOLS))},DEFAULT_AMOUNT:0,DEFAULT_LIMIT:50,DEFAULT_VISIBLE:!1,DEFAULT_HIGHLIGHTED:!1,RAW:{LOG:{TYPES:[Cu.RAW,Cu.FUEL],TRADE_VALUE:2,AMOUNT:20,LIMIT:100,VISIBLE:!0,HIGHLIGHTED:!0,FUEL_PRIORITY:3,POWER:10},BRUSHWOOD:{TYPES:[Cu.RAW,Cu.FUEL],TRADE_VALUE:1,AMOUNT:20,LIMIT:100,VISIBLE:!0,HIGHLIGHTED:!0,FUEL_PRIORITY:4,POWER:5.5},STONE:{TYPES:[Cu.RAW],TRADE_VALUE:2,AMOUNT:20,LIMIT:100,VISIBLE:!0},FUR:{TYPES:[Cu.RAW],TRADE_VALUE:3},WHEAT:{TYPES:[Cu.RAW],TRADE_VALUE:2},BARLEY:{TYPES:[Cu.RAW],TRADE_VALUE:3},HOP:{TYPES:[Cu.RAW],TRADE_VALUE:3},COTTON:{TYPES:[Cu.RAW],TRADE_VALUE:3},HAY:{TYPES:[Cu.RAW],TRADE_VALUE:2},CHICKEN:{TYPES:[Cu.RAW,Cu.ANIMAL],LIMIT:0,SIZE:2,MEAT:4,REPRODUCTION_SPEED:10,BUTCHERING_DIFFICULTY:1,TRADE_VALUE:20},COW:{TYPES:[Cu.RAW,Cu.ANIMAL],LIMIT:0,SIZE:5,MEAT:30,REPRODUCTION_SPEED:1,BUTCHERING_DIFFICULTY:5,TRADE_VALUE:40},PIG:{TYPES:[Cu.RAW,Cu.ANIMAL],LIMIT:0,SIZE:3,MEAT:15,REPRODUCTION_SPEED:5,BUTCHERING_DIFFICULTY:3,TRADE_VALUE:30},HORSE:{TYPES:[Cu.RAW,Cu.ANIMAL],LIMIT:0,SIZE:5,MEAT:10,REPRODUCTION_SPEED:1,BUTCHERING_DIFFICULTY:5,TRADE_VALUE:50},COAL:{TYPES:[Cu.RAW,Cu.FUEL],TRADE_VALUE:8,FUEL_PRIORITY:2,POWER:50},GOLD_ORE:{TYPES:[Cu.RAW],TRADE_VALUE:40},SILVER_ORE:{TYPES:[Cu.RAW],TRADE_VALUE:20},COPPER_ORE:{TYPES:[Cu.RAW],TRADE_VALUE:13},TIN_ORE:{TYPES:[Cu.RAW],TRADE_VALUE:20},IRON_ORE:{TYPES:[Cu.RAW],TRADE_VALUE:40}},PROCESSED:{PLANK:{TYPES:[Cu.PROCESSED,Cu.FUEL],TRADE_VALUE:3,VISIBLE:!0,FUEL_PRIORITY:5,POWER:20},CUT_STONE:{TYPES:[Cu.PROCESSED],TRADE_VALUE:3},FUEL:{TYPES:[Cu.PROCESSED,Cu.FUEL],TRADE_VALUE:3,FUEL_PRIORITY:1,POWER:12.5},FLOUR:{TYPES:[Cu.PROCESSED],TRADE_VALUE:3},FABRIC:{TYPES:[Cu.PROCESSED],TRADE_VALUE:7},LEATHER:{TYPES:[Cu.PROCESSED],TRADE_VALUE:4},COINS:{TYPES:[Cu.PROCESSED],TRADE_VALUE:1,LIMIT:Number.MAX_SAFE_INTEGER},COPPER:{TYPES:[Cu.PROCESSED],TRADE_VALUE:32},GOLD:{TYPES:[Cu.PROCESSED],TRADE_VALUE:90},SILVER:{TYPES:[Cu.PROCESSED],TRADE_VALUE:45},TIN:{TYPES:[Cu.PROCESSED],TRADE_VALUE:45},BRONZE:{TYPES:[Cu.PROCESSED],TRADE_VALUE:50},IRON:{TYPES:[Cu.PROCESSED],TRADE_VALUE:135},STEEL:{TYPES:[Cu.PROCESSED],TRADE_VALUE:190},FISH_FOOD:{TYPES:[Cu.PROCESSED],TRADE_VALUE:5}},FOOD:{BERRY:{TYPES:[Cu.FOOD,Cu.CONSUMABLE],TRADE_VALUE:2,AMOUNT:50,LIMIT:100,VISIBLE:!0,HIGHLIGHTED:!0,POWER:50},MUSHROOM:{TYPES:[Cu.FOOD,Cu.CONSUMABLE],TRADE_VALUE:2,AMOUNT:50,LIMIT:100,VISIBLE:!0,HIGHLIGHTED:!0,POWER:50},FISH:{TYPES:[Cu.FOOD,Cu.CONSUMABLE],TRADE_VALUE:3,POWER:75},APPLE:{TYPES:[Cu.FOOD,Cu.CONSUMABLE],TRADE_VALUE:1,POWER:25},GRAPE:{TYPES:[Cu.FOOD,Cu.CONSUMABLE],TRADE_VALUE:1,POWER:20},BREAD:{TYPES:[Cu.FOOD,Cu.CONSUMABLE],TRADE_VALUE:10,POWER:300},MEAT:{TYPES:[Cu.FOOD,Cu.CONSUMABLE],TRADE_VALUE:3,POWER:75},EGG:{TYPES:[Cu.FOOD,Cu.CONSUMABLE],TRADE_VALUE:1,POWER:25},MILK:{TYPES:[Cu.FOOD,Cu.CONSUMABLE],TRADE_VALUE:1,POWER:25},COOKED_MEAT:{TYPES:[Cu.FOOD,Cu.CONSUMABLE],TRADE_VALUE:7,POWER:175},VEGETABLE_SOUP:{TYPES:[Cu.FOOD,Cu.CONSUMABLE],TRADE_VALUE:8,POWER:225},MEAT_SOUP:{TYPES:[Cu.FOOD,Cu.CONSUMABLE],TRADE_VALUE:8,POWER:225},BEER:{TYPES:[Cu.FOOD],TRADE_VALUE:5},WINE:{TYPES:[Cu.FOOD],TRADE_VALUE:5}},TOOLS:{CLOTHES:{TYPES:[Cu.TOOLS],VISIBLE:!0,AMOUNT:10,TRADE_VALUE:25},BOW:{TYPES:[Cu.TOOLS],TRADE_VALUE:35},STONE_PICKAXE:{TYPES:[Cu.TOOLS],TRADE_VALUE:35},STONE_SHOVEL:{TYPES:[Cu.TOOLS],TRADE_VALUE:35},STONE_AXE:{TYPES:[Cu.TOOLS],TRADE_VALUE:35},STONE_SPEAR:{TYPES:[Cu.TOOLS],TRADE_VALUE:35},STONE_HAMMER:{TYPES:[Cu.TOOLS],TRADE_VALUE:35},SWORD:{TYPES:[Cu.TOOLS],TRADE_VALUE:190},WOODEN_SHIELD:{TYPES:[Cu.TOOLS],TRADE_VALUE:30},LEATHER_ARMOR:{TYPES:[Cu.TOOLS],TRADE_VALUE:50},LIGHT_ARMOR:{TYPES:[Cu.TOOLS],TRADE_VALUE:400},HEAVY_ARMOR:{TYPES:[Cu.TOOLS],TRADE_VALUE:550}}},ls={getTroop:function(e){var n=Object.entries(this.TROOPS).find(function(n){return n[0]===Iu[e]});if(n)return n[1];console.warn("Invalid troop: "+Au.prepareTroopName(e))},TROOPS:{MILITIA:{RECRUIT_TIME:15,STRENGTH:1,DEFENSE:2,COST:[{resource:vu.FUR,amount:5}]},SPEARMAN:{RECRUIT_TIME:25,STRENGTH:5,DEFENSE:2,COST:[{resource:vu.STONE_SPEAR,amount:1},{resource:vu.LEATHER_ARMOR,amount:1}]},ARCHER:{RECRUIT_TIME:25,STRENGTH:3,DEFENSE:4,COST:[{resource:vu.BOW,amount:1},{resource:vu.LEATHER_ARMOR,amount:1}]},SWORDSMAN:{RECRUIT_TIME:35,STRENGTH:10,DEFENSE:4,COST:[{resource:vu.SWORD,amount:1},{resource:vu.WOODEN_SHIELD,amount:1},{resource:vu.LEATHER_ARMOR,amount:1}]}},MISSIONS:{TRAIN:{TIME:10,DESCRIPTION:"Train your troops to temporary increase their power",REQUIRED_STRENGTH:0,REQUIRED_DEFENSE:0,COST:[{resource:vu.FOOD,amount:100}],FINISH:function(e,n,t){n.troops.forEach(function(n){e.getService(Nu.EFFECTS).addArmyEffect(new Lu("Training",n[0].troop,5,10*n[1]),!0)})}},DEFEND:{TIME:20,DESCRIPTION:"Protect your land and reduce chance for being invaded",REQUIRED_STRENGTH:0,REQUIRED_DEFENSE:20,COST:[{resource:vu.FOOD,amount:100},{resource:vu.LOG,amount:10}],FINISH:function(e,n,t){e.getService(Nu.ARMY).decreaseInvasionThreat(n.squadDefense)}},SPY:{TIME:20,DESCRIPTION:"Try to find out military strength of the enemy",REQUIRED_STRENGTH:20,REQUIRED_DEFENSE:0,COST:[{resource:vu.FOOD,amount:100},{resource:vu.CLOTHES,amount:1}],FINISH:function(e,n,t){for(var r=e.getService(Nu.ARMY).generateArmyOfPower(t/10),l=function(){var t=e.getService(Nu.ARMY).getRandomTroop(r),l=e.getService(Nu.ARMY).getRandomTroop(n.troops),i=l.strength*e.getService(Nu.ARMY).getTroopEffectsMultiplier(l.troop)-t.defense,o=50;i>0?(o+=2*i)>90&&(o=90):(o-=2*i)<10&&(o=10),Mu.chance(o/100)?(r.find(function(e){return e[0].troop===t.troop})[1]-=1,r=r.filter(function(e){return e[1]>0})):n.troops.find(function(e){return e[0].troop===l.troop})[1]-=1};r.length>0&&e.getService(Nu.ARMY).hasTroops(n.troops);)l();r.length>0?e.getService(Nu.LOG).log("Our spies have been discovered and killed"):e.getService(Nu.LOG).log("Our spies discovered that enemy power is: "+Math.floor(e.getService(Nu.ARMY).getEnemyPower()))}},DIVERSION:{TIME:30,DESCRIPTION:"We need to bring enemy power down",REQUIRED_STRENGTH:40,REQUIRED_DEFENSE:20,COST:[{resource:vu.FOOD,amount:100},{resource:vu.CLOTHES,amount:1},{resource:vu.FUEL,amount:2}],FINISH:function(e,n,t){for(var r=e.getService(Nu.ARMY).generateArmyOfPower(t/5),l=function(){var t=e.getService(Nu.ARMY).getRandomTroop(r),l=e.getService(Nu.ARMY).getRandomTroop(n.troops),i=l.strength*e.getService(Nu.ARMY).getTroopEffectsMultiplier(l.troop)-t.defense,o=50;i>0?(o+=2*i)>90&&(o=90):(o-=2*i)<10&&(o=10),Mu.chance(o/100)?(r.find(function(e){return e[0].troop===t.troop})[1]-=1,r=r.filter(function(e){return e[1]>0})):n.troops.find(function(e){return e[0].troop===l.troop})[1]-=1};r.length>0&&e.getService(Nu.ARMY).hasTroops(n.troops);)l();r.length>0?e.getService(Nu.LOG).log("Our diversion party has been discovered and killed"):(e.getService(Nu.LOG).log("Our diversion worked"),e.getService(Nu.ARMY).reduceEnemyPower(t/10))}},PLUNDER:{TIME:30,DESCRIPTION:"Plunder your enemies",REQUIRED_STRENGTH:50,REQUIRED_DEFENSE:0,COST:[{resource:vu.FOOD,amount:100}],FINISH:function(e,n,t){for(var r=e.getService(Nu.ARMY).generateArmyOfPower(t/2),l=function(){var t=e.getService(Nu.ARMY).getRandomTroop(r),l=e.getService(Nu.ARMY).getRandomTroop(n.troops),i=l.strength*e.getService(Nu.ARMY).getTroopEffectsMultiplier(l.troop)-t.defense,o=50;i>0?(o+=2*i)>90&&(o=90):(o-=2*i)<10&&(o=10),Mu.chance(o/100)?(r.find(function(e){return e[0].troop===t.troop})[1]-=1,r=r.filter(function(e){return e[1]>0})):n.troops.find(function(e){return e[0].troop===l.troop})[1]-=1};r.length>0&&e.getService(Nu.ARMY).hasTroops(n.troops);)l();if(r.length>0)e.getService(Nu.LOG).log("Our plunder party has been defeated");else{n.squadStrength=0,n.squadDefense=0,n.troops.forEach(function(t){n.squadStrength+=t[0].strength*t[1]*e.getService(Nu.ARMY).getTroopEffectsMultiplier(t[0].troop),n.squadDefense+=t[0].defense*t[1]*e.getService(Nu.ARMY).getTroopEffectsMultiplier(t[0].troop)});for(var i=e.getService(Nu.RESOURCES),o=20*n.squadStrength,u=new Map,s="Loot:<br>",a=Array.from(i.getResources().values()).filter(function(e){return e.isVisible()}).map(function(e){return{item:e.resource,chance:e.prioritise?10:1}});o>0;){var c,p=Mu.randomWeightedExcept(a,[]),h=rs.getResource(p);c=Mu.randomBetween(1,h.TRADE_VALUE<10?20:h.TRADE_VALUE<50?10:h.TRADE_VALUE<300?5:2),u.has(p)?u.set(p,u.get(p)+c):u.set(p,c),s+="&emsp;"+c+" "+Au.prepareResourceName(p)+"<br>",o-=c*h.TRADE_VALUE}e.getService(Nu.LOG).log(s),i.increaseResources(u,!0),e.getService(Nu.ARMY).reduceEnemyPower(n.squadStrength/4)}}},EXPEDITION:{TIME:180,DESCRIPTION:"Look for new land, other villages and treasures",REQUIRED_STRENGTH:25,REQUIRED_DEFENSE:25,COST:[{resource:vu.FOOD,amount:400}],FINISH:function(e,n,t){for(var r=3*(n.squadStrength+n.squadDefense),l=0,i=0,o=0;r>0;){var u=Mu.randomBetween(1,3);1===u?l+=1:2===u?i+=1:3===u&&(o+=1),r-=1}var s="Discovered:<br>";l>0&&(e.getService(Nu.LAND).increaseLand(l,!0),s+="&emsp;"+l+" empty land<br>"),i>0&&(e.getService(Nu.LAND).increaseForest(i,!1),s+="&emsp;"+i+" forest<br>"),o>0&&(e.getService(Nu.LAND).increaseMountains(o),s+="&emsp;"+o+" mountains<br>"),e.getService(Nu.LOG).success(s),n.troops.forEach(function(e){return e[1]=Math.floor(.9*e[1])})}},CONQUER:{TIME:100,DESCRIPTION:"Conquer your enemies and claim their land",REQUIRED_STRENGTH:200,REQUIRED_DEFENSE:100,COST:[{resource:vu.FOOD,amount:200}],FINISH:function(e,n,t){for(var r=e.getService(Nu.ARMY).generateArmyOfPower(t),l=function(){var t=e.getService(Nu.ARMY).getRandomTroop(r),l=e.getService(Nu.ARMY).getRandomTroop(n.troops),i=l.strength*e.getService(Nu.ARMY).getTroopEffectsMultiplier(l.troop)-t.defense,o=50;i>0?(o+=2*i)>90&&(o=90):(o-=2*i)<10&&(o=10),Mu.chance(o/100)?(r.find(function(e){return e[0].troop===t.troop})[1]-=1,r=r.filter(function(e){return e[1]>0})):n.troops.find(function(e){return e[0].troop===l.troop})[1]-=1};r.length>0&&e.getService(Nu.ARMY).hasTroops(n.troops);)l();if(r.length>0)e.getService(Nu.LOG).log("Our plunder party has been defeated");else{n.squadStrength=0,n.squadDefense=0,n.troops.forEach(function(t){n.squadStrength+=t[0].strength*t[1]*e.getService(Nu.ARMY).getTroopEffectsMultiplier(t[0].troop),n.squadDefense+=t[0].defense*t[1]*e.getService(Nu.ARMY).getTroopEffectsMultiplier(t[0].troop)});for(var i=n.squadStrength,o=0,u=0,s=0;i>0;){var a=Mu.randomBetween(1,3);1===a?o+=1:2===a?u+=1:3===a&&(s+=1),i-=1}var c="Conquered:<br>";o>0&&(e.getService(Nu.LAND).increaseLand(o,!0),c+="&emsp;"+o+" empty land"),u>0&&(e.getService(Nu.LAND).increaseForest(u,!1),c+="&emsp;"+u+" forest"),s>0&&(e.getService(Nu.LAND).increaseMountains(s),c+="&emsp;"+s+" mountains"),e.getService(Nu.LOG).log(c),e.getService(Nu.ARMY).reduceEnemyPower(n.squadStrength)}}}}},is={getCrop:function(e){var n=this.getCrops().find(function(n){return n[0]===Tu[e]});if(n)return n[1];console.warn("Invalid crop: "+Au.prepareCropName(e))},getCrops:function(){return Object.entries(this.FIELD).concat(Object.entries(this.ORCHARD))},FIELD:{WHEAT:{CROP:Tu.WHEAT,GROWTH:20,YIELD_MULTIPLIER:2},BARLEY:{CROP:Tu.BARLEY,GROWTH:20,YIELD_MULTIPLIER:2,PREREQUISITE:Eu.BARLEY},HAY:{CROP:Tu.HAY,GROWTH:10,YIELD_MULTIPLIER:2},HOP:{CROP:Tu.HOP,GROWTH:20,YIELD_MULTIPLIER:2,PREREQUISITE:Eu.HOPS},COTTON:{CROP:Tu.COTTON,GROWTH:20,YIELD_MULTIPLIER:2,PREREQUISITE:Eu.COTTON}},ORCHARD:{BERRY:{CROP:Tu.BERRY,GROWTH:25,FRUITING:50,YIELD_MULTIPLIER:1},GRAPE:{CROP:Tu.GRAPE,GROWTH:50,FRUITING:50,YIELD_MULTIPLIER:1},APPLE:{CROP:Tu.APPLE,GROWTH:100,FRUITING:100,YIELD_MULTIPLIER:2}}},os={SCIENTIFIC_METHOD:{CATEGORY:wu.SCIENCE,COST:[],RESEARCH_POINT:5,DESCRIPTION:"Maybe there is something we don't know about yet?",PREREQUISITES:[],FINISH:function(e){e.getService(Nu.LOG).log("New research projects unlocked")}},FORESIGHT:{CATEGORY:wu.SCIENCE,COST:[],RESEARCH_POINT:20,DESCRIPTION:"If only we knew what we don't know",PREREQUISITES:[Su.SCIENTIFIC_METHOD],FINISH:function(e){e.getService(Nu.RESEARCH).increaseForesight(1),e.getService(Nu.LOG).log("Foresight level increased")}},MANAGEMENT:{CATEGORY:wu.GENERAL,COST:[],RESEARCH_POINT:30,DESCRIPTION:"Maybe we could make some hard decisions which could help us survive?",PREREQUISITES:[Su.FORESIGHT],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.MANAGEMENT),e.getService(Nu.LOG).log("Management tab unlocked")}},FISHING:{CATEGORY:wu.AGRICULTURE,COST:[{resource:vu.BERRY,amount:20}],RESEARCH_POINT:30,DESCRIPTION:"Could there be something edible in the water?",PREREQUISITES:[Su.SCIENTIFIC_METHOD],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.SEA),e.getService(Nu.LOG).log("Sea unlocked"),e.getService(Nu.GAME).enable(Eu.FISHERS_HUT),e.getService(Nu.LOG).log("Fisher's hut invented")}},FISH_FOOD:{CATEGORY:wu.AGRICULTURE,COST:[{resource:vu.WHEAT,amount:20}],RESEARCH_POINT:30,DESCRIPTION:"Is it possible to lure more fish?",PREREQUISITES:[Su.FISHING],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.FISH_FOOD),e.getService(Nu.RESOURCES).increaseResource(vu.FISH_FOOD,2,!0)}},ANIMALS:{CATEGORY:wu.AGRICULTURE,COST:[{resource:vu.HAY,amount:20}],RESEARCH_POINT:70,DESCRIPTION:"Is it possible to breed animals near farms?",PREREQUISITES:[Su.AGRICULTURE,Su.HUNTING],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.PASTURE),e.getService(Nu.LOG).log("Pastures invented"),e.getService(Nu.GAME).enable(Eu.BUTCHER),e.getService(Nu.LOG).log("Butcher invented")}},TRADE:{CATEGORY:wu.GENERAL,COST:[],RESEARCH_POINT:50,DESCRIPTION:"If others have resources we need maybe we could trade with them?",PREREQUISITES:[Su.MANAGEMENT],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.MARKETPLACE),e.getService(Nu.LOG).log("Marketplace invented"),e.getService(Nu.RESOURCES).makeVisible(vu.COINS)}},LEATHER:{CATEGORY:wu.TECHNOLOGY,COST:[{resource:vu.FUR,amount:20}],RESEARCH_POINT:50,DESCRIPTION:"Could we use dead animals fur in our advantage?",PREREQUISITES:[Su.HUNTING],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.TANNERY),e.getService(Nu.LOG).log("Tannery invented"),e.getService(Nu.RECIPE).enable(Pu.LEATHER)}},COTTON:{CATEGORY:wu.AGRICULTURE,COST:[],RESEARCH_POINT:50,DESCRIPTION:"Maybe we can plant cotton?",PREREQUISITES:[Su.AGRICULTURE],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.COTTON),e.getService(Nu.LOG).log("Cotton planting unlocked"),e.getService(Nu.RESOURCES).makeVisible(vu.COTTON)}},FABRIC:{CATEGORY:wu.TECHNOLOGY,COST:[{resource:vu.COTTON,amount:20}],RESEARCH_POINT:50,DESCRIPTION:"Could we make fabric using cotton?",PREREQUISITES:[Su.COTTON],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.COTTON_MILL),e.getService(Nu.LOG).log("Cotton mill invented"),e.getService(Nu.RECIPE).enable(Pu.FABRIC)}},TAILORING:{CATEGORY:wu.TECHNOLOGY,COST:[{resource:vu.FABRIC,amount:5},{resource:vu.FUR,amount:10}],RESEARCH_POINT:100,DESCRIPTION:"How can me make new clothes?",PREREQUISITES:[Su.FABRIC,Su.LEATHER],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.TAILOR),e.getService(Nu.LOG).log("Tailor invented"),e.getService(Nu.RECIPE).enable(Pu.CLOTHES_FABRIC),e.getService(Nu.RECIPE).enable(Pu.CLOTHES_FUR)}},ALCOHOL:{CATEGORY:wu.GENERAL,COST:[],RESEARCH_POINT:100,DESCRIPTION:"Would it boost our moods if we took some time to have fun??",PREREQUISITES:[Su.SCIENTIFIC_METHOD,Su.COOKING],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.ALCOHOL),e.getService(Nu.GAME).enable(Eu.TAVERN),e.getService(Nu.LOG).log("Tavern invented"),e.getService(Nu.GAME).enable(Eu.BREWERY),e.getService(Nu.LOG).log("Brewery invented"),e.getService(Nu.GAME).enable(Eu.WINERY),e.getService(Nu.LOG).log("Winery invented"),e.getService(Nu.GAME).enable(Eu.BARLEY),e.getService(Nu.LOG).log("Barley planting unlocked"),e.getService(Nu.GAME).enable(Eu.HOPS),e.getService(Nu.LOG).log("Hops planting unlocked")}},CALENDAR:{CATEGORY:wu.SCIENCE,COST:[{resource:vu.LOG,amount:10}],RESEARCH_POINT:30,DESCRIPTION:"Is there some pattern to seasons?",PREREQUISITES:[Su.SCIENTIFIC_METHOD],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.CALENDAR),e.getService(Nu.LOG).log("We are now able to track years and seasons")}},WEATHER:{CATEGORY:wu.SCIENCE,COST:[{resource:vu.LOG,amount:10},{resource:vu.STONE,amount:10},{resource:vu.PLANK,amount:10}],RESEARCH_POINT:50,DESCRIPTION:"Would it be good to know the weather in advance?",PREREQUISITES:[Su.FORESIGHT],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.WEATHER),e.getService(Nu.LOG).log("We now can predict weather"),e.getService(Nu.WEATHER).increaseForecastPeriod(4)}},AGRICULTURE:{CATEGORY:wu.AGRICULTURE,COST:[{resource:vu.LOG,amount:10},{resource:vu.BERRY,amount:20},{resource:vu.WHEAT,amount:20},{resource:vu.STONE_SHOVEL,amount:5}],RESEARCH_POINT:100,DESCRIPTION:"Why should we risk looking for food in the forest if we can grow it it the open?",PREREQUISITES:[Su.WEATHER,Su.CALENDAR,Su.STONE_SHOVEL],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.FIELD),e.getService(Nu.LOG).log("Field unlocked"),e.getService(Nu.GAME).enable(Eu.FARM),e.getService(Nu.LOG).log("Farm invented"),e.getService(Nu.RESOURCES).makeVisible(vu.WHEAT),e.getService(Nu.RESOURCES).makeVisible(vu.BARLEY),e.getService(Nu.RESOURCES).makeVisible(vu.HAY)}},BOW:{CATEGORY:wu.GENERAL,COST:[{resource:vu.LOG,amount:20},{resource:vu.BRUSHWOOD,amount:20}],RESEARCH_POINT:25,DESCRIPTION:"Could we kill without coming closer?",PREREQUISITES:[Su.SCIENTIFIC_METHOD],FINISH:function(e){e.getService(Nu.RECIPE).enable(Pu.BOW)}},HUNTING:{CATEGORY:wu.GENERAL,COST:[{resource:vu.LOG,amount:5},{resource:vu.BRUSHWOOD,amount:5},{resource:vu.STONE,amount:5},{resource:vu.BOW,amount:2}],RESEARCH_POINT:50,DESCRIPTION:"What if hunted became the hunter?",PREREQUISITES:[Su.BOW],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.HUNTER),e.getService(Nu.LOG).log("Hunter invented")}},FIRE:{CATEGORY:wu.TECHNOLOGY,COST:[{resource:vu.BRUSHWOOD,amount:20},{resource:vu.STONE,amount:2}],RESEARCH_POINT:30,DESCRIPTION:"Would it be useful if we could start fire on demand?",PREREQUISITES:[Su.SCIENTIFIC_METHOD],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.FIRE),e.getService(Nu.RECIPE).enable(Pu.FUEL_BRUSHWOOD)}},BIGGER_FIRE:{CATEGORY:wu.TECHNOLOGY,COST:[{resource:vu.LOG,amount:10},{resource:vu.STONE,amount:2}],RESEARCH_POINT:50,DESCRIPTION:"Could we make our fire bigger and last for longer?",PREREQUISITES:[Su.SCIENTIFIC_METHOD,Su.FIRE],FINISH:function(e){e.getService(Nu.RECIPE).enable(Pu.FUEL_LOG)}},COOKING:{CATEGORY:wu.GENERAL,COST:[{resource:vu.FUEL,amount:20},{resource:vu.BERRY,amount:20},{resource:vu.MUSHROOM,amount:20}],RESEARCH_POINT:30,DESCRIPTION:"What would happen if we heat up raw food?",PREREQUISITES:[Su.FIRE],FINISH:function(e){e.getService(Nu.RECIPE).enable(Pu.COOKED_MEAT),e.getService(Nu.RECIPE).enable(Pu.BREAD),e.getService(Nu.GAME).enable(Eu.BAKERY),e.getService(Nu.LOG).log("Bakery invented"),e.getService(Nu.RECIPE).enable(Pu.VEGETABLE_SOUP_BERRY),e.getService(Nu.RECIPE).enable(Pu.VEGETABLE_SOUP_MUSHROOM),e.getService(Nu.RECIPE).enable(Pu.MEAT_SOUP)}},MORTAR:{CATEGORY:wu.TECHNOLOGY,COST:[{resource:vu.STONE,amount:20}],RESEARCH_POINT:20,DESCRIPTION:"Would it be useful to ground things up?",PREREQUISITES:[Su.SCIENTIFIC_METHOD],FINISH:function(e){e.getService(Nu.RECIPE).enable(Pu.FLOUR)}},STONE_SPEAR:{CATEGORY:wu.MILITARY,COST:[{resource:vu.STONE,amount:10},{resource:vu.LOG,amount:5}],RESEARCH_POINT:25,DESCRIPTION:"We would have better chance of survival if we keep enemy at distance?",PREREQUISITES:[Su.SCIENTIFIC_METHOD],FINISH:function(e){e.getService(Nu.RECIPE).enable(Pu.STONE_SPEAR)}},STONE_AXE:{CATEGORY:wu.GENERAL,COST:[{resource:vu.STONE,amount:10},{resource:vu.LOG,amount:5}],RESEARCH_POINT:25,DESCRIPTION:"It's probably more effective to hit trees with sharp stone?",PREREQUISITES:[Su.SCIENTIFIC_METHOD],FINISH:function(e){e.getService(Nu.RECIPE).enable(Pu.STONE_AXE)}},STONE_PICKAXE:{CATEGORY:wu.GENERAL,COST:[{resource:vu.STONE,amount:10},{resource:vu.LOG,amount:5}],RESEARCH_POINT:25,DESCRIPTION:"Would stone win against stone?",PREREQUISITES:[Su.SCIENTIFIC_METHOD],FINISH:function(e){e.getService(Nu.RECIPE).enable(Pu.STONE_PICKAXE)}},STONE_HAMMER:{CATEGORY:wu.GENERAL,COST:[{resource:vu.STONE,amount:10},{resource:vu.LOG,amount:5}],RESEARCH_POINT:25,DESCRIPTION:"Can hitting with stone be easier?",PREREQUISITES:[Su.SCIENTIFIC_METHOD],FINISH:function(e){e.getService(Nu.RECIPE).enable(Pu.STONE_HAMMER)}},STONE_SHOVEL:{CATEGORY:wu.GENERAL,COST:[{resource:vu.STONE,amount:10},{resource:vu.LOG,amount:5}],RESEARCH_POINT:25,DESCRIPTION:"It should be better to get your stone dirty and not your hands?",PREREQUISITES:[Su.SCIENTIFIC_METHOD],FINISH:function(e){e.getService(Nu.RECIPE).enable(Pu.STONE_SHOVEL)}},MINING:{CATEGORY:wu.TECHNOLOGY,COST:[{resource:vu.LOG,amount:10},{resource:vu.STONE,amount:5},{resource:vu.STONE_PICKAXE,amount:1}],RESEARCH_POINT:50,DESCRIPTION:"If we dig deep enough maybe there is something nice?",PREREQUISITES:[Su.SCIENTIFIC_METHOD,Su.STONE_PICKAXE],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.MOUNTAINS),e.getService(Nu.LOG).log("Mountains unlocked")}},PROSPECTING_FOR_ORE:{CATEGORY:wu.TECHNOLOGY,COST:[{resource:vu.STONE_PICKAXE,amount:10}],RESEARCH_POINT:50,DESCRIPTION:"There must be something useful under all this dirt",PREREQUISITES:[Su.MINING],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.GEOLOGIST),e.getService(Nu.LOG).log("Geologist invented")}},ADVANCED_PROSPECTING:{CATEGORY:wu.TECHNOLOGY,COST:[{resource:vu.STONE_PICKAXE,amount:20}],RESEARCH_POINT:75,DESCRIPTION:"There must be something even more valuable under the ground?",PREREQUISITES:[Su.PROSPECTING_FOR_ORE],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.GOLD),e.getService(Nu.GAME).enable(Eu.SILVER)}},MASTER_PROSPECTING:{CATEGORY:wu.TECHNOLOGY,COST:[{resource:vu.STONE_PICKAXE,amount:40}],RESEARCH_POINT:100,DESCRIPTION:"Is there anything else to find?",PREREQUISITES:[Su.ADVANCED_PROSPECTING],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.IRON)}},PIT_MINE:{CATEGORY:wu.TECHNOLOGY,COST:[{resource:vu.STONE,amount:20},{resource:vu.LOG,amount:20},{resource:vu.STONE_PICKAXE,amount:10}],RESEARCH_POINT:100,DESCRIPTION:"Could we get precious resources from under the ground?",PREREQUISITES:[Su.PROSPECTING_FOR_ORE],FLAG_PREREQUISITES:[Eu.BUILT_QUARRY],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.PIT_MINE),e.getService(Nu.LOG).log("Pit mine invented"),e.getService(Nu.RECIPE).enable(Pu.FUEL_COAL)}},ORE_PROCESSING:{CATEGORY:wu.TECHNOLOGY,COST:[{resource:vu.CUT_STONE,amount:40},{resource:vu.STONE,amount:20},{resource:vu.STONE_HAMMER,amount:10},{resource:vu.COPPER_ORE,amount:20}],RESEARCH_POINT:100,DESCRIPTION:"What happens if we heat ore in fire?",PREREQUISITES:[Su.PROSPECTING_FOR_ORE],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.SMITHY),e.getService(Nu.LOG).log("Smithy invented")}},ADVANCED_ORE_PROCESSING:{CATEGORY:wu.TECHNOLOGY,COST:[{resource:vu.CUT_STONE,amount:40},{resource:vu.STONE,amount:20},{resource:vu.STONE_HAMMER,amount:5},{resource:vu.GOLD_ORE,amount:5},{resource:vu.SILVER_ORE,amount:5}],RESEARCH_POINT:150,DESCRIPTION:"What about heating other ores?",PREREQUISITES:[Su.ADVANCED_PROSPECTING,Su.ORE_PROCESSING],FLAG_PREREQUISITES:[Eu.BUILT_SMITHY],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.ADVANCED_ORE_PROCESSING),e.getService(Nu.GAME).isEnabled(Eu.BUILT_SMITHY)&&(e.getService(Nu.RECIPE).enable(Pu.GOLD),e.getService(Nu.RECIPE).enable(Pu.SILVER))}},MASTER_ORE_PROCESSING:{CATEGORY:wu.TECHNOLOGY,COST:[{resource:vu.CUT_STONE,amount:40},{resource:vu.STONE,amount:20},{resource:vu.STONE_HAMMER,amount:5},{resource:vu.IRON_ORE,amount:10}],RESEARCH_POINT:200,DESCRIPTION:"Can we smelt any ore we want?",PREREQUISITES:[Su.MASTER_PROSPECTING,Su.ADVANCED_ORE_PROCESSING],FLAG_PREREQUISITES:[Eu.BUILT_SMITHY],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.IRON),e.getService(Nu.GAME).isEnabled(Eu.BUILT_SMITHY)&&e.getService(Nu.RECIPE).enable(Pu.SILVER)}},METALLURGY:{CATEGORY:wu.TECHNOLOGY,COST:[{resource:vu.COPPER,amount:10},{resource:vu.TIN,amount:10}],RESEARCH_POINT:100,DESCRIPTION:"What would happen if we mix two metals?",PREREQUISITES:[Su.ORE_PROCESSING],FLAG_PREREQUISITES:[Eu.BUILT_SMITHY],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.BRONZE)}},ADVANCED_METALLURGY:{CATEGORY:wu.TECHNOLOGY,COST:[{resource:vu.IRON,amount:10},{resource:vu.COAL,amount:50}],RESEARCH_POINT:200,DESCRIPTION:"Could we mix iron with coal to make it stronger?",PREREQUISITES:[Su.MASTER_ORE_PROCESSING],FLAG_PREREQUISITES:[Eu.BUILT_SMITHY,Eu.IRON],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.STEEL),e.getService(Nu.GAME).isEnabled(Eu.BUILT_SMITHY)&&e.getService(Nu.RECIPE).enable(Pu.STEEL)}},COINS_MINTING:{CATEGORY:wu.TECHNOLOGY,COST:[{resource:vu.GOLD,amount:10},{resource:vu.SILVER,amount:20}],RESEARCH_POINT:100,DESCRIPTION:"Maybe we can make our own coins?",PREREQUISITES:[Su.ADVANCED_ORE_PROCESSING],FLAG_PREREQUISITES:[Eu.BUILT_SMITHY],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.MINT),e.getService(Nu.LOG).log("Mint invented")}},HOUSE:{CATEGORY:wu.TECHNOLOGY,COST:[{resource:vu.LOG,amount:50},{resource:vu.PLANK,amount:50}],RESEARCH_POINT:100,DESCRIPTION:"What if huts were bigger?",PREREQUISITES:[Su.SCIENTIFIC_METHOD,Su.STONE_HAMMER,Su.STONE_SHOVEL],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.HOUSE),e.getService(Nu.LOG).log("House invented")}},URBAN_PLANNING:{CATEGORY:wu.SCIENCE,COST:[],RESEARCH_POINT:50,DESCRIPTION:"Maybe we could rearrange buildings?",PREREQUISITES:[Su.MANAGEMENT,Su.MATHEMATICS],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.URBAN_PLANNING)}},WONDER_BUILDINGS:{CATEGORY:wu.GENERAL,COST:[],RESEARCH_POINT:300,DESCRIPTION:"What if we built something remarkable?",PREREQUISITES:[Su.HOUSE,Su.URBAN_PLANNING,Su.MATHEMATICS],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.PLATEAU),e.getService(Nu.LOG).log("Plateau unlocked")}},SAWMILL:{CATEGORY:wu.TECHNOLOGY,COST:[{resource:vu.LOG,amount:50},{resource:vu.PLANK,amount:10},{resource:vu.COPPER,amount:5}],RESEARCH_POINT:100,DESCRIPTION:"Is it possible to produce planks even faster?",PREREQUISITES:[Su.SCIENTIFIC_METHOD,Su.STONE_HAMMER,Su.STONE_AXE],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.SAWMILL),e.getService(Nu.LOG).log("Sawmill invented")}},WINDMILL:{CATEGORY:wu.TECHNOLOGY,COST:[{resource:vu.LOG,amount:50},{resource:vu.PLANK,amount:10},{resource:vu.COPPER,amount:5}],RESEARCH_POINT:100,DESCRIPTION:"Could we use wind to do hard work for us?",PREREQUISITES:[Su.AGRICULTURE,Su.MORTAR,Su.MATHEMATICS],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.WINDMILL),e.getService(Nu.LOG).log("Windmill invented")}},FORESTRY:{CATEGORY:wu.AGRICULTURE,COST:[{resource:vu.LOG,amount:20},{resource:vu.BRUSHWOOD,amount:20},{resource:vu.STONE_SHOVEL,amount:2}],RESEARCH_POINT:50,DESCRIPTION:"Is there any reason why trees grow out of dirt?",PREREQUISITES:[Su.SCIENTIFIC_METHOD,Su.STONE_SHOVEL],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.FORESTER),e.getService(Nu.LOG).log("Forester invented")}},BARRACKS:{CATEGORY:wu.MILITARY,COST:[{resource:vu.LOG,amount:20},{resource:vu.PLANK,amount:20},{resource:vu.STONE_SPEAR,amount:5}],RESEARCH_POINT:100,DESCRIPTION:"How can we make those of us more aggressive less of a threat to others?",PREREQUISITES:[Su.SCIENTIFIC_METHOD,Su.CALENDAR,Su.STONE_SPEAR],FINISH:function(e){e.getService(Nu.GAME).isEnabled(Eu.FORT)||(e.getService(Nu.GAME).enable(Eu.FORT),e.getService(Nu.LOG).log("Fort unlocked")),e.getService(Nu.RECIPE).enable(Pu.WOODEN_SHIELD),e.getService(Nu.RECIPE).enable(Pu.LEATHER_ARMOR),e.getService(Nu.GAME).enable(Eu.BARRACKS),e.getService(Nu.LOG).log("Barracks invented")}},STASH:{CATEGORY:wu.MILITARY,COST:[{resource:vu.LOG,amount:20},{resource:vu.PLANK,amount:10}],RESEARCH_POINT:30,DESCRIPTION:"Can we hide our goods somewhere?",PREREQUISITES:[Su.FORESIGHT],FINISH:function(e){e.getService(Nu.GAME).isEnabled(Eu.FORT)||(e.getService(Nu.GAME).enable(Eu.FORT),e.getService(Nu.LOG).log("Fort unlocked")),e.getService(Nu.GAME).enable(Eu.STASH)}},WOODEN_DEFENCES:{CATEGORY:wu.MILITARY,COST:[{resource:vu.LOG,amount:50}],RESEARCH_POINT:100,DESCRIPTION:"Maybe we could use logs to defend ourselves?",PREREQUISITES:[Su.BARRACKS],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.STOCKADE),e.getService(Nu.LOG).log("Stockade invented"),e.getService(Nu.GAME).enable(Eu.WOODEN_TOWER),e.getService(Nu.LOG).log("Wooden tower invented")}},STONE_DEFENCES:{CATEGORY:wu.MILITARY,COST:[{resource:vu.STONE,amount:50},{resource:vu.CUT_STONE,amount:50}],RESEARCH_POINT:200,DESCRIPTION:"Maybe we could use stone to defend ourselves?",PREREQUISITES:[Su.WOODEN_DEFENCES],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.STONE_TOWER),e.getService(Nu.LOG).log("Stone tower invented")}},MATHEMATICS:{CATEGORY:wu.SCIENCE,COST:[{resource:vu.FOOD,amount:1e3}],RESEARCH_POINT:50,DESCRIPTION:"What if we calculate things first?",PREREQUISITES:[Su.FORESIGHT],FINISH:function(e){e.getService(Nu.EFFECTS).addBuildingEffect(new Du("Mathematics",bu.CONSTRUCTION,10,Hu.PERMANENT))}},FERTILIZER:{CATEGORY:wu.AGRICULTURE,COST:[{resource:vu.FOOD,amount:3e3}],RESEARCH_POINT:100,DESCRIPTION:"Could we reuse what animals produce?",PREREQUISITES:[Su.ANIMALS],FINISH:function(e){e.getService(Nu.EFFECTS).addBuildingEffect(new Du("Fertilizer",bu.FIELD,10,Hu.PERMANENT)),e.getService(Nu.EFFECTS).addBuildingEffect(new Du("Fertilizer",bu.ORCHARD,10,Hu.PERMANENT))}},PICKAXE_DESIGN:{CATEGORY:wu.TECHNOLOGY,COST:[{resource:vu.LOG,amount:10},{resource:vu.CUT_STONE,amount:10},{resource:vu.STONE_PICKAXE,amount:5}],RESEARCH_POINT:100,DESCRIPTION:"Maybe we could redesign our pickaxes?",PREREQUISITES:[Su.MINING],FINISH:function(e){e.getService(Nu.EFFECTS).addBuildingEffect(new Du("Pickaxe Design",bu.QUARRY,10,Hu.PERMANENT)),e.getService(Nu.EFFECTS).addBuildingEffect(new Du("Pickaxe Design",bu.PIT_MINE,10,Hu.PERMANENT)),e.getService(Nu.EFFECTS).addBuildingEffect(new Du("Pickaxe Design",bu.GEOLOGIST,10,Hu.PERMANENT))}},TRADE_ROUTES:{CATEGORY:wu.GENERAL,COST:[{resource:vu.COINS,amount:400}],RESEARCH_POINT:50,DESCRIPTION:"Is it possible to attract more merchants?",PREREQUISITES:[Su.TRADE,Su.MATHEMATICS],FINISH:function(e){e.getService(Nu.EFFECTS).addBuildingEffect(new Du("Trade Routes",bu.MARKETPLACE,15,Hu.PERMANENT))}},BUFF_PRODUCTION:{CATEGORY:wu.GENERAL,COST:[{resource:vu.STONE_AXE,amount:2},{resource:vu.STONE_SHOVEL,amount:2},{resource:vu.STONE_PICKAXE,amount:2},{resource:vu.STONE_HAMMER,amount:2}],RESEARCH_POINT:50,DESCRIPTION:"Would people work better if we give them better tools?",PREREQUISITES:[Su.MANAGEMENT],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.BUFFS),e.getService(Nu.LOG).log("Production buffs invented")}},HUMAN_RESOURCES:{CATEGORY:wu.GENERAL,COST:[{resource:vu.FOOD,amount:5e3}],RESEARCH_POINT:50,DESCRIPTION:"Maybe we can optimize work?",PREREQUISITES:[Su.MANAGEMENT],FINISH:function(e){e.getService(Nu.GAME).enable(Eu.HUMAN_RESOURCES),e.getService(Nu.LOG).log("Human resources invented")}}},us={START_QUEUE_SIZE:2,RECIPES:{PLANK:{RESOURCE:vu.PLANK,AMOUNT:1,COST:[{resource:vu.LOG,amount:5}],CRAFTING:5},CUT_STONE:{RESOURCE:vu.CUT_STONE,AMOUNT:1,COST:[{resource:vu.STONE,amount:5}],CRAFTING:10},LEATHER:{RESOURCE:vu.LEATHER,AMOUNT:1,COST:[{resource:vu.FUR,amount:2}],CRAFTING:10},STONE_AXE:{RESOURCE:vu.STONE_AXE,AMOUNT:1,COST:[{resource:vu.BRUSHWOOD,amount:1},{resource:vu.LOG,amount:2},{resource:vu.STONE,amount:5}],CRAFTING:15},STONE_PICKAXE:{RESOURCE:vu.STONE_PICKAXE,AMOUNT:1,COST:[{resource:vu.BRUSHWOOD,amount:1},{resource:vu.LOG,amount:2},{resource:vu.STONE,amount:5}],CRAFTING:15},STONE_SHOVEL:{RESOURCE:vu.STONE_SHOVEL,AMOUNT:1,COST:[{resource:vu.BRUSHWOOD,amount:1},{resource:vu.LOG,amount:2},{resource:vu.STONE,amount:5}],CRAFTING:15},STONE_SPEAR:{RESOURCE:vu.STONE_SPEAR,AMOUNT:1,COST:[{resource:vu.BRUSHWOOD,amount:1},{resource:vu.LOG,amount:2},{resource:vu.STONE,amount:5}],CRAFTING:15},STONE_HAMMER:{RESOURCE:vu.STONE_HAMMER,AMOUNT:1,COST:[{resource:vu.BRUSHWOOD,amount:1},{resource:vu.LOG,amount:2},{resource:vu.STONE,amount:5}],CRAFTING:15},BOW:{RESOURCE:vu.BOW,AMOUNT:1,COST:[{resource:vu.BRUSHWOOD,amount:5},{resource:vu.LOG,amount:10}],CRAFTING:15},SWORD:{RESOURCE:vu.SWORD,AMOUNT:1,COST:[{resource:vu.COPPER,amount:5},{resource:vu.LOG,amount:1},{resource:vu.FUEL,amount:5}],CRAFTING:20},WOODEN_SHIELD:{RESOURCE:vu.WOODEN_SHIELD,AMOUNT:1,COST:[{resource:vu.PLANK,amount:5},{resource:vu.LOG,amount:2},{resource:vu.LEATHER,amount:1}],CRAFTING:20},LEATHER_ARMOR:{RESOURCE:vu.LEATHER_ARMOR,AMOUNT:1,COST:[{resource:vu.LEATHER,amount:10}],CRAFTING:20},LIGHT_ARMOR:{RESOURCE:vu.LIGHT_ARMOR,AMOUNT:1,COST:[{resource:vu.COPPER,amount:10},{resource:vu.LEATHER,amount:5},{resource:vu.FUEL,amount:10}],CRAFTING:25},HEAVY_ARMOR:{RESOURCE:vu.HEAVY_ARMOR,AMOUNT:1,COST:[{resource:vu.COPPER,amount:15},{resource:vu.LEATHER,amount:5},{resource:vu.FUEL,amount:10}],CRAFTING:30},FUEL_BRUSHWOOD:{RESOURCE:vu.FUEL,AMOUNT:2,COST:[{resource:vu.BRUSHWOOD,amount:4}],CRAFTING:3},FUEL_LOG:{RESOURCE:vu.FUEL,AMOUNT:4,COST:[{resource:vu.LOG,amount:4}],CRAFTING:5},FUEL_COAL:{RESOURCE:vu.FUEL,AMOUNT:12,COST:[{resource:vu.COAL,amount:2}],CRAFTING:5},COOKED_MEAT:{RESOURCE:vu.COOKED_MEAT,AMOUNT:1,COST:[{resource:vu.MEAT,amount:1},{resource:vu.FUEL,amount:1}],CRAFTING:5},FLOUR:{RESOURCE:vu.FLOUR,AMOUNT:1,COST:[{resource:vu.WHEAT,amount:3}],CRAFTING:3},BREAD:{RESOURCE:vu.BREAD,AMOUNT:1,COST:[{resource:vu.FLOUR,amount:2},{resource:vu.FUEL,amount:1}],CRAFTING:5},VEGETABLE_SOUP_BERRY:{RESOURCE:vu.VEGETABLE_SOUP,AMOUNT:1,COST:[{resource:vu.BERRY,amount:2},{resource:vu.FUEL,amount:1}],CRAFTING:5},VEGETABLE_SOUP_MUSHROOM:{RESOURCE:vu.VEGETABLE_SOUP,AMOUNT:1,COST:[{resource:vu.MUSHROOM,amount:2},{resource:vu.FUEL,amount:1}],CRAFTING:5},MEAT_SOUP:{RESOURCE:vu.MEAT_SOUP,AMOUNT:1,COST:[{resource:vu.MEAT,amount:1},{resource:vu.FUEL,amount:1}],CRAFTING:5},FABRIC:{RESOURCE:vu.FABRIC,AMOUNT:1,COST:[{resource:vu.COTTON,amount:2}],CRAFTING:5},CLOTHES_FABRIC:{RESOURCE:vu.CLOTHES,AMOUNT:1,COST:[{resource:vu.FABRIC,amount:10}],CRAFTING:20},CLOTHES_FUR:{RESOURCE:vu.CLOTHES,AMOUNT:1,COST:[{resource:vu.FUR,amount:15}],CRAFTING:20},GOLD:{RESOURCE:vu.GOLD,AMOUNT:1,COST:[{resource:vu.GOLD_ORE,amount:2},{resource:vu.FUEL,amount:1}],CRAFTING:10},SILVER:{RESOURCE:vu.SILVER,AMOUNT:1,COST:[{resource:vu.SILVER_ORE,amount:2},{resource:vu.FUEL,amount:1}],CRAFTING:10},COPPER:{RESOURCE:vu.COPPER,AMOUNT:1,COST:[{resource:vu.COPPER_ORE,amount:2},{resource:vu.FUEL,amount:1}],CRAFTING:20},TIN:{RESOURCE:vu.TIN,AMOUNT:1,COST:[{resource:vu.TIN_ORE,amount:2},{resource:vu.FUEL,amount:1}],CRAFTING:20},BRONZE:{RESOURCE:vu.BRONZE,AMOUNT:2,COST:[{resource:vu.COPPER,amount:1},{resource:vu.TIN,amount:1},{resource:vu.FUEL,amount:1}],CRAFTING:30},IRON:{RESOURCE:vu.IRON,AMOUNT:1,COST:[{resource:vu.IRON_ORE,amount:3},{resource:vu.FUEL,amount:3}],CRAFTING:30},STEEL:{RESOURCE:vu.STEEL,AMOUNT:1,COST:[{resource:vu.IRON,amount:1},{resource:vu.COAL,amount:5},{resource:vu.FUEL,amount:1}],CRAFTING:40}}},ss={getReligion:function(e){var n=Object.entries(this.RELIGIONS).find(function(n){return n[0]===_u[e]});if(n)return n[1];console.warn("Invalid religion: "+Au.prepareReligionName(e))},RELIGIONS:{NONE:{FAITH_LEVEL:0,FAITH:0,TIME:0,OFFERING:[]},NATURE:{FAITH_LEVEL:1,FAITH:20,TIME:10,OFFERING:[{resource:vu.LOG,amount:40},{resource:vu.BERRY,amount:20},{resource:vu.MUSHROOM,amount:20}]},FERTILITY:{FAITH_LEVEL:1,FAITH:30,TIME:10,OFFERING:[{resource:vu.WHEAT,amount:40},{resource:vu.BERRY,amount:40},{resource:vu.APPLE,amount:40}]},TECHNOLOGY:{FAITH_LEVEL:1,FAITH:40,TIME:10,OFFERING:[{resource:vu.PLANK,amount:20},{resource:vu.CUT_STONE,amount:20},{resource:vu.STONE_HAMMER,amount:5},{resource:vu.STONE_PICKAXE,amount:5}]},WAR:{FAITH_LEVEL:1,FAITH:50,TIME:10,OFFERING:[{resource:vu.STONE_SPEAR,amount:5},{resource:vu.LEATHER_ARMOR,amount:5},{resource:vu.FUR,amount:10},{resource:vu.LEATHER,amount:10},{resource:vu.FOOD,amount:1e3}]}},PRAYERS:{BLESSING:{FAITH:50,FAITH_LEVEL:2,RELIGION:_u.NONE,DESCRIPTION:"May everything go according to our plans",FINISH:function(e){var n=[];Object.values(ku).filter(function(e){return!isNaN(e)}).forEach(function(t){e.getServiceByRegion(t).getBuildings().forEach(function(e){n.includes(e.getBuildingType())||n.push(e.getBuildingType())})});var t=Mu.randomExcept(n,[bu.ALL,bu.CONSTRUCTION,bu.DECONSTRUCTION,bu.FIELD,bu.ORCHARD,bu.PASTURE,bu.WAREHOUSE,bu.ASCENSION_TEMPLE,bu.COLOSSUS,bu.GREAT_LIGHTHOUSE,bu.HANGING_GARDEN,bu.PYRAMID,bu.SACRED_GROVE,bu.STONEHENGE,bu.UNDERGROUND_CITY,bu.STASH,bu.WOODEN_TOWER,bu.BARRACKS,bu.STONE_TOWER,bu.STOCKADE]);e.getService(Nu.LOG).log(Au.prepareBuildingName(t)+" blessed"),e.getService(Nu.EFFECTS).addBuildingEffect(new Du("Blessing",t,25,Yu/2))}},PREACH:{FAITH:20,FAITH_LEVEL:1,RELIGION:_u.NONE,DESCRIPTION:"We shall spread our beliefs to others",FINISH:function(e){e.getService(Nu.RELIGION).increaseFaithLevel(1)}},FAITH_SHIELD:{FAITH:50,FAITH_LEVEL:3,RELIGION:_u.NONE,DESCRIPTION:"Our faith will protect us from harm",FINISH:function(e){var n=25;n+=e.getService(Nu.RELIGION).getFaithLevel(),e.getService(Nu.RELIGION).increaseFaithShield(n)}},SOLDIER_PRAYER:{FAITH:50,FAITH_LEVEL:5,RELIGION:_u.NONE,DESCRIPTION:"We shall win any enemy with our faith. All troops buffed 20% for one year",FINISH:function(e){e.getService(Nu.EFFECTS).addArmyEffect(new Lu("Soldier prayer",Iu.ALL,20,Yu))}},FAITHFUL_RESEARCH:{FAITH:100,FAITH_LEVEL:5,RELIGION:_u.TECHNOLOGY,DESCRIPTION:"We live to improve our knowledge. Gain 100 research points spent only on current research",FINISH:function(e){e.getService(Nu.RESEARCH).progressTech(100)}},BABY_BOOM:{FAITH:100,FAITH_LEVEL:5,RELIGION:_u.FERTILITY,DESCRIPTION:"May we have a lot of children",FINISH:function(e){e.getService(Nu.EFFECTS).addBuildingEffect(new Du("Baby boom",bu.HUT,100,Yu/2)),e.getService(Nu.EFFECTS).addBuildingEffect(new Du("Baby boom",bu.HOUSE,100,Yu/2))}},LIFE_CYCLE:{FAITH:100,FAITH_LEVEL:5,RELIGION:_u.NATURE,DESCRIPTION:"We pray for all live to thrive. 10% buff to natural sources for 5 years",FINISH:function(e){e.getService(Nu.EFFECTS).addNatureEffect(new Uu("Life cycle",10,5*Yu))}},HOLY_WAR:{FAITH:100,FAITH_LEVEL:5,RELIGION:_u.WAR,DESCRIPTION:"The only true faith must be spread at all cost. All troops buffed 10% for 5 years",FINISH:function(e){e.getService(Nu.EFFECTS).addArmyEffect(new Lu("Holy War",Iu.ALL,10,5*Yu))}}}},as={GOLDEN_ITEMS:{GOLDEN_FISH_CHANCE:5e-4,GOLDEN_EGG_CHANCE:5e-4},PERKS:{MOTIVATION_SPEECH:{DESCRIPTION:"Use your royal position to motivate people to harder work. 25% production upgrade for all buildings for 1 year (single use)",USAGES:0,MAX_USAGES:0,COST:20,RESET:function(e,n){},EFFECT:function(e,n){e.getService(Nu.EFFECTS).addBuildingEffect(new Du("Motivation speech",bu.ALL,25,Yu)),e.getService(Nu.ROYAL).unlockCallback(n)}},ROYAL_PROPHECY:{DESCRIPTION:"Your royal blood allows prophets to look into the future. Unlocks certain research for each perk level (awarded immediately and after any soft reset or abdication)",USAGES:0,MAX_USAGES:3,COST:50,RESET:function(e,n){n.usages>=1&&e.getService(Nu.RESEARCH).finishTech(Su.FIRE),n.usages>=2&&e.getService(Nu.RESEARCH).finishTech(Su.COOKING),3===n.usages&&e.getService(Nu.RESEARCH).finishTech(Su.MORTAR)},EFFECT:function(e,n){switch(n.usages){case 0:e.getService(Nu.RESEARCH).finishTech(Su.FIRE);break;case 1:e.getService(Nu.RESEARCH).finishTech(Su.COOKING);break;case 2:e.getService(Nu.RESEARCH).finishTech(Su.MORTAR)}e.getService(Nu.ROYAL).unlockCallback(n)}},HERITAGE:{DESCRIPTION:"Your predecessors ruled better. You start with extra building (awarded after any soft reset or abdication)",USAGES:0,MAX_USAGES:2,COST:20,RESET:function(e,n){n.usages>=1&&e.getService(Nu.FOREST).addBuilding(bu.GATHERER),2===n.usages&&e.getService(Nu.VILLAGE).addBuilding(bu.WORKSHOP)},EFFECT:function(e,n){e.getService(Nu.ROYAL).unlockCallback(n)}},FAMILY_JEWELS:{DESCRIPTION:"Your predecessors left you with more riches. You start with extra resources (awarded after any soft reset or abdication)",USAGES:0,MAX_USAGES:2,COST:20,RESET:function(e,n){n.usages>=1&&(e.getService(Nu.RESOURCES).increaseResource(vu.LOG,20,!0),e.getService(Nu.RESOURCES).increaseResource(vu.BRUSHWOOD,10,!0),e.getService(Nu.RESOURCES).increaseResource(vu.BERRY,20,!0),e.getService(Nu.RESOURCES).increaseResource(vu.MUSHROOM,20,!0)),2===n.usages&&(e.getService(Nu.RESOURCES).increaseResource(vu.STONE,30,!0),e.getService(Nu.RESOURCES).increaseResource(vu.PLANK,20,!0),e.getService(Nu.RESOURCES).increaseResource(vu.FUEL,5,!0),e.getService(Nu.RESOURCES).increaseResource(vu.LEATHER,5,!0))},EFFECT:function(e,n){e.getService(Nu.ROYAL).unlockCallback(n)}},KING_OF_THE_FOREST:{DESCRIPTION:"You rule everything in the forests. You start with a few forest buildings unlocked (awarded after any soft reset or abdication)",USAGES:0,MAX_USAGES:1,COST:50,RESET:function(e,n){1===n.usages&&(e.getService(Nu.FOREST).addBuilding(bu.GATHERER),e.getService(Nu.FOREST).addBuilding(bu.FORESTER),e.getService(Nu.FOREST).addBuilding(bu.HUNTER_LODGE),e.getService(Nu.LAND).takeLand(2*ts.FOREST.GATHERER.SIZE+ts.FOREST.HUNTER_LODGE.SIZE))},EFFECT:function(e,n){e.getService(Nu.ROYAL).unlockCallback(n)}},KING_OF_THE_PEOPLE:{DESCRIPTION:"People love you unconditionally. You start with House unlocked and built instead of huts (awarded after any soft reset or abdication)",USAGES:0,MAX_USAGES:1,COST:50,RESET:function(e,n){1===n.usages&&(e.getService(Nu.RESEARCH).finishTech(Su.HOUSE),e.getService(Nu.VILLAGE).replaceWithHouses())},EFFECT:function(e,n){e.getService(Nu.ROYAL).unlockCallback(n)}},KING_OF_THE_WAR:{DESCRIPTION:"War is your game. You start with military unlocked and small army (awarded after any soft reset or abdication)",USAGES:0,MAX_USAGES:1,COST:50,RESET:function(e,n){e.getService(Nu.GAME).enable(Eu.ARMY),e.getService(Nu.GAME).enable(Eu.FORT);var t=e.getService(Nu.ARMY);e.getService(Nu.FORT).addBuilding(bu.BARRACKS),e.getService(Nu.FORT).addBuilding(bu.BARRACKS),e.getService(Nu.LAND).takeLand(2*ts.FORT.BARRACKS.SIZE),t.addMilitia(20)},EFFECT:function(e,n){e.getService(Nu.ROYAL).unlockCallback(n)}},CALL_TO_ARMS:{DESCRIPTION:"We will fight till the last of us drops dead. You can convert up to 10 villagers to militia (single use)",USAGES:0,MAX_USAGES:0,COST:10,RESET:function(e,n){},EFFECT:function(e,n){var t=e.getService(Nu.RESOURCES),r=e.getService(Nu.MODAL),l=e.getService(Nu.ARMY),i=e.getService(Nu.ROYAL);r.open(mu.INPUT),r.setModalText("How many villagers would you like to convert to militia?<br>"+t.getPeople()+" recruits available");var o=r.registerForValueResponse().subscribe(function(e){if(o.unsubscribe(),null!==e&&!isNaN(e)){var u=t.getPeople();if(u>10)return void r.info("You can only convert up to 10 villagers");if(l.getFreeBarracks()<e)return void r.info("Not enough barracks space for so many militia");if(e>u)return void r.info("Not enough recruits");if(e<=0)return void r.info("Invalid amount of recruits");if(i.getRoyalPoints()<n.cost)return void r.info("Not enough royal points");t.removeRecruit(Number(e)),l.addMilitia(Number(e)),i.unlockCallback(n)}})}},UNITE_WITH_THE_PEOPLE:{DESCRIPTION:"You step down from your throne and live with others. Permanent 20% upgrade to all buildings (persists through soft resets and abdications)",USAGES:0,MAX_USAGES:0,COST:100,RESET:function(e,n){},EFFECT:function(e,n){e.getService(Nu.EFFECTS).addBuildingEffect(new Du("Unite with the people",bu.ALL,20,Hu.ROYAL)),e.getService(Nu.ROYAL).unlockCallback(n)}}}},cs=function(){return function(){}}(),ps=function(){function e(){this.title="app"}return e.prototype.isIE=function(){return-1!==navigator.userAgent.indexOf("MSIE")||1==!!document.documentMode},e.prototype.catchContextMenu=function(e){return!1},e}(),hs=function(){return function(){}}(),ds=new ye("Location Initialized"),fs=function(){return function(){}}(),gs=new ye("appBaseHref"),vs=function(){function e(e){var t=this;this._subject=new pt,this._platformStrategy=e;var r=this._platformStrategy.getBaseHref();this._baseHref=n.stripTrailingSlash(ms(r)),this._platformStrategy.onPopState(function(e){t._subject.emit({url:t.path(!0),pop:!0,state:e.state,type:e.type})})}var n;return n=e,e.prototype.path=function(e){return void 0===e&&(e=!1),this.normalize(this._platformStrategy.path(e))},e.prototype.isCurrentPathEqualTo=function(e,t){return void 0===t&&(t=""),this.path()==this.normalize(e+n.normalizeQueryParams(t))},e.prototype.normalize=function(e){return n.stripTrailingSlash(function(e,n){return e&&n.startsWith(e)?n.substring(e.length):n}(this._baseHref,ms(e)))},e.prototype.prepareExternalUrl=function(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)},e.prototype.go=function(e,n,t){void 0===n&&(n=""),void 0===t&&(t=null),this._platformStrategy.pushState(t,"",e,n)},e.prototype.replaceState=function(e,n,t){void 0===n&&(n=""),void 0===t&&(t=null),this._platformStrategy.replaceState(t,"",e,n)},e.prototype.forward=function(){this._platformStrategy.forward()},e.prototype.back=function(){this._platformStrategy.back()},e.prototype.subscribe=function(e,n,t){return this._subject.subscribe({next:e,error:n,complete:t})},e.normalizeQueryParams=function(e){return e&&"?"!==e[0]?"?"+e:e},e.joinWithSlash=function(e,n){if(0==e.length)return n;if(0==n.length)return e;var t=0;return e.endsWith("/")&&t++,n.startsWith("/")&&t++,2==t?e+n.substring(1):1==t?e+n:e+"/"+n},e.stripTrailingSlash=function(e){var n=e.match(/#|\?|$/),t=n&&n.index||e.length;return e.slice(0,t-("/"===e[t-1]?1:0))+e.slice(t)},e}();function ms(e){return e.replace(/\/index.html$/,"")}var ys=function(e){function n(n,t){var r=e.call(this)||this;return r._platformLocation=n,r._baseHref="",null!=t&&(r._baseHref=t),r}return l(n,e),n.prototype.onPopState=function(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)},n.prototype.getBaseHref=function(){return this._baseHref},n.prototype.path=function(e){void 0===e&&(e=!1);var n=this._platformLocation.hash;return null==n&&(n="#"),n.length>0?n.substring(1):n},n.prototype.prepareExternalUrl=function(e){var n=vs.joinWithSlash(this._baseHref,e);return n.length>0?"#"+n:n},n.prototype.pushState=function(e,n,t,r){var l=this.prepareExternalUrl(t+vs.normalizeQueryParams(r));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(e,n,l)},n.prototype.replaceState=function(e,n,t,r){var l=this.prepareExternalUrl(t+vs.normalizeQueryParams(r));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(e,n,l)},n.prototype.forward=function(){this._platformLocation.forward()},n.prototype.back=function(){this._platformLocation.back()},n}(fs),Ss=function(e){function n(n,t){var r=e.call(this)||this;if(r._platformLocation=n,null==t&&(t=r._platformLocation.getBaseHrefFromDOM()),null==t)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return r._baseHref=t,r}return l(n,e),n.prototype.onPopState=function(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)},n.prototype.getBaseHref=function(){return this._baseHref},n.prototype.prepareExternalUrl=function(e){return vs.joinWithSlash(this._baseHref,e)},n.prototype.path=function(e){void 0===e&&(e=!1);var n=this._platformLocation.pathname+vs.normalizeQueryParams(this._platformLocation.search),t=this._platformLocation.hash;return t&&e?""+n+t:n},n.prototype.pushState=function(e,n,t,r){var l=this.prepareExternalUrl(t+vs.normalizeQueryParams(r));this._platformLocation.pushState(e,n,l)},n.prototype.replaceState=function(e,n,t,r){var l=this.prepareExternalUrl(t+vs.normalizeQueryParams(r));this._platformLocation.replaceState(e,n,l)},n.prototype.forward=function(){this._platformLocation.forward()},n.prototype.back=function(){this._platformLocation.back()},n}(fs),Es=void 0,bs=["en",[["a","p"],["AM","PM"],Es],[["AM","PM"],Es,Es],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Es,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Es,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Es,"{1} 'at' {0}",Es],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",{},function(e){var n=Math.floor(Math.abs(e)),t=e.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===t?1:5}],Os={},Rs=function(e){return e[e.Decimal=0]="Decimal",e[e.Percent=1]="Percent",e[e.Currency=2]="Currency",e[e.Scientific=3]="Scientific",e}({}),Ts=function(e){return e[e.Zero=0]="Zero",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Few=3]="Few",e[e.Many=4]="Many",e[e.Other=5]="Other",e}({}),Cs=function(e){return e[e.Decimal=0]="Decimal",e[e.Group=1]="Group",e[e.List=2]="List",e[e.PercentSign=3]="PercentSign",e[e.PlusSign=4]="PlusSign",e[e.MinusSign=5]="MinusSign",e[e.Exponential=6]="Exponential",e[e.SuperscriptingExponent=7]="SuperscriptingExponent",e[e.PerMille=8]="PerMille",e[e[1/0]=9]="Infinity",e[e.NaN=10]="NaN",e[e.TimeSeparator=11]="TimeSeparator",e[e.CurrencyDecimal=12]="CurrencyDecimal",e[e.CurrencyGroup=13]="CurrencyGroup",e}({});function _s(e,n){var t=Is(e),r=t[13][n];if(void 0===r){if(n===Cs.CurrencyDecimal)return t[13][Cs.Decimal];if(n===Cs.CurrencyGroup)return t[13][Cs.Group]}return r}function Is(e){var n=e.toLowerCase().replace(/_/g,"-"),t=Os[n];if(t)return t;var r=n.split("-")[0];if(t=Os[r])return t;if("en"===r)return bs;throw new Error('Missing locale data for the locale "'+e+'".')}var As=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function ws(e){var n=parseInt(e);if(isNaN(n))throw new Error("Invalid integer literal when parsing "+e);return n}var Ns=new ye("UseV4Plurals"),Ps=function(){return function(){}}(),Ds=function(e){function n(n,t){var r=e.call(this)||this;return r.locale=n,r.deprecatedPluralFn=t,r}return l(n,e),n.prototype.getPluralCategory=function(e,n){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(n||this.locale,e):function(e){return Is(e)[18]}(n||this.locale)(e)){case Ts.Zero:return"zero";case Ts.One:return"one";case Ts.Two:return"two";case Ts.Few:return"few";case Ts.Many:return"many";default:return"other"}},n}(Ps),Ms=function(){function e(e,n,t,r){this._iterableDiffers=e,this._keyValueDiffers=n,this._ngEl=t,this._renderer=r,this._initialClasses=[]}return Object.defineProperty(e.prototype,"klass",{set:function(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClass",{set:function(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(Xe(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())},enumerable:!0,configurable:!0}),e.prototype.ngDoCheck=function(){if(this._iterableDiffer){var e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){var n=this._keyValueDiffer.diff(this._rawClass);n&&this._applyKeyValueChanges(n)}},e.prototype._applyKeyValueChanges=function(e){var n=this;e.forEachAddedItem(function(e){return n._toggleClass(e.key,e.currentValue)}),e.forEachChangedItem(function(e){return n._toggleClass(e.key,e.currentValue)}),e.forEachRemovedItem(function(e){e.previousValue&&n._toggleClass(e.key,!1)})},e.prototype._applyIterableChanges=function(e){var n=this;e.forEachAddedItem(function(e){if("string"!=typeof e.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got "+Me(e.item));n._toggleClass(e.item,!0)}),e.forEachRemovedItem(function(e){return n._toggleClass(e.item,!1)})},e.prototype._applyClasses=function(e){var n=this;e&&(Array.isArray(e)||e instanceof Set?e.forEach(function(e){return n._toggleClass(e,!0)}):Object.keys(e).forEach(function(t){return n._toggleClass(t,!!e[t])}))},e.prototype._removeClasses=function(e){var n=this;e&&(Array.isArray(e)||e instanceof Set?e.forEach(function(e){return n._toggleClass(e,!1)}):Object.keys(e).forEach(function(e){return n._toggleClass(e,!1)}))},e.prototype._toggleClass=function(e,n){var t=this;(e=e.trim())&&e.split(/\s+/g).forEach(function(e){n?t._renderer.addClass(t._ngEl.nativeElement,e):t._renderer.removeClass(t._ngEl.nativeElement,e)})},e}(),ks=function(){function e(e,n,t,r){this.$implicit=e,this.ngForOf=n,this.index=t,this.count=r}return Object.defineProperty(e.prototype,"first",{get:function(){return 0===this.index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"last",{get:function(){return this.index===this.count-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"even",{get:function(){return this.index%2==0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"odd",{get:function(){return!this.even},enumerable:!0,configurable:!0}),e}(),Ls=function(){function e(e,n,t){this._viewContainer=e,this._template=n,this._differs=t,this._ngForOfDirty=!0,this._differ=null}return Object.defineProperty(e.prototype,"ngForOf",{set:function(e){this._ngForOf=e,this._ngForOfDirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngForTrackBy",{get:function(){return this._trackByFn},set:function(e){Wn()&&null!=e&&"function"!=typeof e&&console&&console.warn&&console.warn("trackBy must be a function, but received "+JSON.stringify(e)+". See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."),this._trackByFn=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngForTemplate",{set:function(e){e&&(this._template=e)},enumerable:!0,configurable:!0}),e.prototype.ngDoCheck=function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(r){throw new Error("Cannot find a differ supporting object '"+e+"' of type '"+((n=e).name||typeof n)+"'. NgFor only supports binding to Iterables such as Arrays.")}}var n;if(this._differ){var t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}},e.prototype._applyChanges=function(e){var n=this,t=[];e.forEachOperation(function(e,r,l){if(null==e.previousIndex){var i=n._viewContainer.createEmbeddedView(n._template,new ks(null,n._ngForOf,-1,-1),l),o=new xs(e,i);t.push(o)}else null==l?n._viewContainer.remove(r):(i=n._viewContainer.get(r),n._viewContainer.move(i,l),o=new xs(e,i),t.push(o))});for(var r=0;r<t.length;r++)this._perViewChange(t[r].view,t[r].record);r=0;for(var l=this._viewContainer.length;r<l;r++){var i=this._viewContainer.get(r);i.context.index=r,i.context.count=l,i.context.ngForOf=this._ngForOf}e.forEachIdentityChange(function(e){n._viewContainer.get(e.currentIndex).context.$implicit=e.item})},e.prototype._perViewChange=function(e,n){e.context.$implicit=n.item},e.ngTemplateContextGuard=function(e,n){return!0},e}(),xs=function(){return function(e,n){this.record=e,this.view=n}}(),Fs=function(){function e(e,n){this._viewContainer=e,this._context=new Us,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}return Object.defineProperty(e.prototype,"ngIf",{set:function(e){this._context.$implicit=this._context.ngIf=e,this._updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngIfThen",{set:function(e){Hs("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngIfElse",{set:function(e){Hs("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()},enumerable:!0,configurable:!0}),e.prototype._updateView=function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))},e.ngTemplateGuard_ngIf=function(e,n){return!0},e}(),Us=function(){return function(){this.$implicit=null,this.ngIf=null}}();function Hs(e,n){if(n&&!n.createEmbeddedView)throw new Error(e+" must be a TemplateRef, but received '"+Me(n)+"'.")}var Gs=function(){function e(e,n){this._viewContainerRef=e,this._templateRef=n,this._created=!1}return e.prototype.create=function(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)},e.prototype.destroy=function(){this._created=!1,this._viewContainerRef.clear()},e.prototype.enforceState=function(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()},e}(),Bs=function(){function e(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}return Object.defineProperty(e.prototype,"ngSwitch",{set:function(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)},enumerable:!0,configurable:!0}),e.prototype._addCase=function(){return this._caseCount++},e.prototype._addDefault=function(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)},e.prototype._matchCase=function(e){var n=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||n,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),n},e.prototype._updateDefaultCases=function(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(var n=0;n<this._defaultViews.length;n++)this._defaultViews[n].enforceState(e)}},e}(),Vs=function(){function e(e,n,t){this.ngSwitch=t,t._addCase(),this._view=new Gs(e,n)}return e.prototype.ngDoCheck=function(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))},e}(),Ws=function(){function e(e,n,t){this._differs=e,this._ngEl=n,this._renderer=t}return Object.defineProperty(e.prototype,"ngStyle",{set:function(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())},enumerable:!0,configurable:!0}),e.prototype.ngDoCheck=function(){if(this._differ){var e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}},e.prototype._applyChanges=function(e){var n=this;e.forEachRemovedItem(function(e){return n._setStyle(e.key,null)}),e.forEachAddedItem(function(e){return n._setStyle(e.key,e.currentValue)}),e.forEachChangedItem(function(e){return n._setStyle(e.key,e.currentValue)})},e.prototype._setStyle=function(e,n){var t=a(e.split("."),2),r=t[0],l=t[1];null!=(n=null!=n&&l?""+n+l:n)?this._renderer.setStyle(this._ngEl.nativeElement,r,n):this._renderer.removeStyle(this._ngEl.nativeElement,r)},e}();function js(e,n){return Error("InvalidPipeArgument: '"+n+"' for pipe '"+Me(e)+"'")}var Ys=/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D])\S*/g,zs=function(){function e(){}var n;return n=e,e.prototype.transform=function(e){if(!e)return e;if("string"!=typeof e)throw js(n,e);return e.replace(Ys,function(e){return e[0].toUpperCase()+e.substr(1).toLowerCase()})},e}(),Ks=function(){function e(e){this.differs=e,this.keyValues=[]}return e.prototype.transform=function(e,n){var t=this;if(void 0===n&&(n=qs),!e||!(e instanceof Map)&&"object"!=typeof e)return null;this.differ||(this.differ=this.differs.find(e).create());var r=this.differ.diff(e);return r&&(this.keyValues=[],r.forEachItem(function(e){t.keyValues.push({key:e.key,value:e.currentValue})}),this.keyValues.sort(n)),this.keyValues},e}();function qs(e,n){var t=e.key,r=n.key;if(t===r)return 0;if(void 0===t)return 1;if(void 0===r)return-1;if(null===t)return 1;if(null===r)return-1;if("string"==typeof t&&"string"==typeof r)return t<r?-1:1;if("number"==typeof t&&"number"==typeof r)return t-r;if("boolean"==typeof t&&"boolean"==typeof r)return t<r?-1:1;var l=String(t),i=String(r);return l==i?0:l<i?-1:1}var $s=function(){function e(e){this._locale=e}var n;return n=e,e.prototype.transform=function(e,t,r){if(function(e){return null==e||""===e||e!=e}(e))return null;r=r||this._locale;try{return function(e,n,t){return function(e,n,t,r,l,i,o){void 0===o&&(o=!1);var u="",s=!1;if(isFinite(e)){var a=function(n){var t,r,l,i,o,u=Math.abs(e)+"",s=0;for((r=u.indexOf("."))>-1&&(u=u.replace(".","")),(l=u.search(/e/i))>0?(r<0&&(r=l),r+=+u.slice(l+1),u=u.substring(0,l)):r<0&&(r=u.length),l=0;"0"===u.charAt(l);l++);if(l===(o=u.length))t=[0],r=1;else{for(o--;"0"===u.charAt(o);)o--;for(r-=l,t=[],i=0;l<=o;l++,i++)t[i]=Number(u.charAt(l))}return r>22&&(t=t.splice(0,21),s=r-1,r=1),{digits:t,exponent:s,integerLen:r}}();o&&(a=function(e){if(0===e.digits[0])return e;var n=e.digits.length-e.integerLen;return e.exponent?e.exponent+=2:(0===n?e.digits.push(0,0):1===n&&e.digits.push(0),e.integerLen+=2),e}(a));var c=n.minInt,p=n.minFrac,h=n.maxFrac;if(i){var d=i.match(As);if(null===d)throw new Error(i+" is not a valid digit info");var f=d[1],g=d[3],v=d[5];null!=f&&(c=ws(f)),null!=g&&(p=ws(g)),null!=v?h=ws(v):null!=g&&p>h&&(h=p)}!function(e,n,t){if(n>t)throw new Error("The minimum number of digits after fraction ("+n+") is higher than the maximum ("+t+").");var r=e.digits,l=r.length-e.integerLen,i=Math.min(Math.max(n,l),t),o=i+e.integerLen,u=r[o];if(o>0){r.splice(Math.max(e.integerLen,o));for(var s=o;s<r.length;s++)r[s]=0}else{l=Math.max(0,l),e.integerLen=1,r.length=Math.max(1,o=i+1),r[0]=0;for(var a=1;a<o;a++)r[a]=0}if(u>=5)if(o-1<0){for(var c=0;c>o;c--)r.unshift(0),e.integerLen++;r.unshift(1),e.integerLen++}else r[o-1]++;for(;l<Math.max(0,i);l++)r.push(0);var p=0!==i,h=n+e.integerLen,d=r.reduceRight(function(e,n,t,r){return r[t]=(n+=e)<10?n:n-10,p&&(0===r[t]&&t>=h?r.pop():p=!1),n>=10?1:0},0);d&&(r.unshift(d),e.integerLen++)}(a,p,h);var m=a.digits,y=a.integerLen,S=a.exponent,E=[];for(s=m.every(function(e){return!e});y<c;y++)m.unshift(0);for(;y<0;y++)m.unshift(0);y>0?E=m.splice(y,m.length):(E=m,m=[0]);var b=[];for(m.length>=n.lgSize&&b.unshift(m.splice(-n.lgSize,m.length).join(""));m.length>n.gSize;)b.unshift(m.splice(-n.gSize,m.length).join(""));m.length&&b.unshift(m.join("")),u=b.join(_s(t,r)),E.length&&(u+=_s(t,l)+E.join("")),S&&(u+=_s(t,Cs.Exponential)+"+"+S)}else u=_s(t,Cs.Infinity);return e<0&&!s?n.negPre+u+n.negSuf:n.posPre+u+n.posSuf}(e,function(e,n){void 0===n&&(n="-");var t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=e.split(";"),l=r[0],i=r[1],o=-1!==l.indexOf(".")?l.split("."):[l.substring(0,l.lastIndexOf("0")+1),l.substring(l.lastIndexOf("0")+1)],u=o[0],s=o[1]||"";t.posPre=u.substr(0,u.indexOf("#"));for(var a=0;a<s.length;a++){var c=s.charAt(a);"0"===c?t.minFrac=t.maxFrac=a+1:"#"===c?t.maxFrac=a+1:t.posSuf+=c}var p=u.split(",");if(t.gSize=p[1]?p[1].length:0,t.lgSize=p[2]||p[1]?(p[2]||p[1]).length:0,i){var h=l.length-t.posPre.length-t.posSuf.length,d=i.indexOf("#");t.negPre=i.substr(0,d).replace(/'/g,""),t.negSuf=i.substr(d+h).replace(/'/g,"")}else t.negPre=n+t.posPre,t.negSuf=t.posSuf;return t}(function(e,n){return Is(e)[14][n]}(n,Rs.Decimal),_s(n,Cs.MinusSign)),n,Cs.Group,Cs.Decimal,t)}(function(e){if("string"==typeof e&&!isNaN(Number(e)-parseFloat(e)))return Number(e);if("number"!=typeof e)throw new Error(e+" is not a number");return e}(e),r,t)}catch(l){throw js(n,l.message)}},e}(),Qs=function(){return function(){}}(),Zs=new ye("DocumentToken"),Xs="browser",Js="server",ea=function(){function e(){}return e.ngInjectableDef=ve({providedIn:"root",factory:function(){return new na(ze(Zs),window,ze(Ct))}}),e}(),na=function(){function e(e,n,t){this.document=e,this.window=n,this.errorHandler=t,this.offset=function(){return[0,0]}}return e.prototype.setOffset=function(e){this.offset=Array.isArray(e)?function(){return e}:e},e.prototype.getScrollPosition=function(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]},e.prototype.scrollToPosition=function(e){this.supportScrollRestoration()&&this.window.scrollTo(e[0],e[1])},e.prototype.scrollToAnchor=function(e){if(this.supportScrollRestoration()){e=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(e):e.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{var n=this.document.querySelector("#"+e);if(n)return void this.scrollToElement(n);var t=this.document.querySelector("[name='"+e+"']");if(t)return void this.scrollToElement(t)}catch(r){this.errorHandler.handleError(r)}}},e.prototype.setHistoryScrollRestoration=function(e){if(this.supportScrollRestoration()){var n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=e)}},e.prototype.scrollToElement=function(e){var n=e.getBoundingClientRect(),t=n.left+this.window.pageXOffset,r=n.top+this.window.pageYOffset,l=this.offset();this.window.scrollTo(t-l[0],r-l[1])},e.prototype.supportScrollRestoration=function(){try{return!!this.window&&!!this.window.scrollTo}catch(e){return!1}},e}();function ta(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=e[e.length-1];return F(t)?(e.pop(),Q(e,t)):re(e)}var ra=function(e){function n(n){var t=e.call(this)||this;return t._value=n,t}return l(n,e),Object.defineProperty(n.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),n.prototype._subscribe=function(n){var t=e.prototype._subscribe.call(this,n);return t&&!t.closed&&n.next(this._value),t},n.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new D;return this._value},n.prototype.next=function(n){e.prototype.next.call(this,this._value=n)},n}(L);function la(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}la.prototype=Object.create(Error.prototype);var ia=la,oa={},ua=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,n){return n.subscribe(new sa(e,this.resultSelector))},e}(),sa=function(e){function n(n,t){var r=e.call(this,n)||this;return r.resultSelector=t,r.active=0,r.values=[],r.observables=[],r}return l(n,e),n.prototype._next=function(e){this.values.push(oa),this.observables.push(e)},n.prototype._complete=function(){var e=this.observables,n=e.length;if(0===n)this.destination.complete();else{this.active=n,this.toRespond=n;for(var t=0;t<n;t++){var r=e[t];this.add(Y(this,r,r,t))}}},n.prototype.notifyComplete=function(e){0==(this.active-=1)&&this.destination.complete()},n.prototype.notifyNext=function(e,n,t,r,l){var i=this.values,o=this.toRespond?i[t]===oa?--this.toRespond:this.toRespond:0;i[t]=n,0===o&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))},n.prototype._tryResultSelector=function(e){var n;try{n=this.resultSelector.apply(this,e)}catch(t){return void this.destination.error(t)}this.destination.next(n)},n}(z),aa=new w(function(e){return e.complete()});function ca(e){return e?function(e){return new w(function(n){return e.schedule(function(){return n.complete()})})}(e):aa}function pa(e){return new w(function(n){var t;try{t=e()}catch(r){return void n.error(r)}return(t?Z(t):ca()).subscribe(n)})}function ha(){return te(1)}function da(e,n){return function(t){return t.lift(new fa(e,n))}}var fa=function(){function e(e,n){this.predicate=e,this.thisArg=n}return e.prototype.call=function(e,n){return n.subscribe(new ga(e,this.predicate,this.thisArg))},e}(),ga=function(e){function n(n,t,r){var l=e.call(this,n)||this;return l.predicate=t,l.thisArg=r,l.count=0,l}return l(n,e),n.prototype._next=function(e){var n;try{n=this.predicate.call(this.thisArg,e,this.count++)}catch(t){return void this.destination.error(t)}n&&this.destination.next(e)},n}(R);function va(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}va.prototype=Object.create(Error.prototype);var ma=va;function ya(e){return function(n){return 0===e?ca():n.lift(new Sa(e))}}var Sa=function(){function e(e){if(this.total=e,this.total<0)throw new ma}return e.prototype.call=function(e,n){return n.subscribe(new Ea(e,this.total))},e}(),Ea=function(e){function n(n,t){var r=e.call(this,n)||this;return r.total=t,r.ring=new Array,r.count=0,r}return l(n,e),n.prototype._next=function(e){var n=this.ring,t=this.total,r=this.count++;n.length<t?n.push(e):n[r%t]=e},n.prototype._complete=function(){var e=this.destination,n=this.count;if(n>0)for(var t=this.count>=this.total?this.total:this.count,r=this.ring,l=0;l<t;l++){var i=n++%t;e.next(r[i])}e.complete()},n}(R);function ba(e){return void 0===e&&(e=Ta),function(n){return n.lift(new Oa(e))}}var Oa=function(){function e(e){this.errorFactory=e}return e.prototype.call=function(e,n){return n.subscribe(new Ra(e,this.errorFactory))},e}(),Ra=function(e){function n(n,t){var r=e.call(this,n)||this;return r.errorFactory=t,r.hasValue=!1,r}return l(n,e),n.prototype._next=function(e){this.hasValue=!0,this.destination.next(e)},n.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var e=void 0;try{e=this.errorFactory()}catch(n){e=n}this.destination.error(e)},n}(R);function Ta(){return new ia}function Ca(e){return void 0===e&&(e=null),function(n){return n.lift(new _a(e))}}var _a=function(){function e(e){this.defaultValue=e}return e.prototype.call=function(e,n){return n.subscribe(new Ia(e,this.defaultValue))},e}(),Ia=function(e){function n(n,t){var r=e.call(this,n)||this;return r.defaultValue=t,r.isEmpty=!0,r}return l(n,e),n.prototype._next=function(e){this.isEmpty=!1,this.destination.next(e)},n.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},n}(R);function Aa(e,n){var t=arguments.length>=2;return function(r){return r.pipe(e?da(function(n,t){return e(n,t,r)}):ne,ya(1),t?Ca(n):ba(function(){return new ia}))}}function wa(e){return function(n){var t=new Na(e),r=n.lift(t);return t.caught=r}}var Na=function(){function e(e){this.selector=e}return e.prototype.call=function(e,n){return n.subscribe(new Pa(e,this.selector,this.caught))},e}(),Pa=function(e){function n(n,t,r){var l=e.call(this,n)||this;return l.selector=t,l.caught=r,l}return l(n,e),n.prototype.error=function(n){if(!this.isStopped){var t=void 0;try{t=this.selector(n,this.caught)}catch(l){return void e.prototype.error.call(this,l)}this._unsubscribeAndRecycle();var r=new U(this,void 0,void 0);this.add(r),Y(this,t,void 0,void 0,r)}},n}(z);function Da(e){return function(n){return 0===e?ca():n.lift(new Ma(e))}}var Ma=function(){function e(e){if(this.total=e,this.total<0)throw new ma}return e.prototype.call=function(e,n){return n.subscribe(new ka(e,this.total))},e}(),ka=function(e){function n(n,t){var r=e.call(this,n)||this;return r.total=t,r.count=0,r}return l(n,e),n.prototype._next=function(e){var n=this.total,t=++this.count;t<=n&&(this.destination.next(e),t===n&&(this.destination.complete(),this.unsubscribe()))},n}(R);function La(e,n){var t=arguments.length>=2;return function(r){return r.pipe(e?da(function(n,t){return e(n,t,r)}):ne,Da(1),t?Ca(n):ba(function(){return new ia}))}}var xa=function(){function e(e,n,t){this.predicate=e,this.thisArg=n,this.source=t}return e.prototype.call=function(e,n){return n.subscribe(new Fa(e,this.predicate,this.thisArg,this.source))},e}(),Fa=function(e){function n(n,t,r,l){var i=e.call(this,n)||this;return i.predicate=t,i.thisArg=r,i.source=l,i.index=0,i.thisArg=r||i,i}return l(n,e),n.prototype.notifyComplete=function(e){this.destination.next(e),this.destination.complete()},n.prototype._next=function(e){var n=!1;try{n=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(t){return void this.destination.error(t)}n||this.notifyComplete(!1)},n.prototype._complete=function(){this.notifyComplete(!0)},n}(R);function Ua(e,n){return"function"==typeof n?function(t){return t.pipe(Ua(function(t,r){return Z(e(t,r)).pipe(K(function(e,l){return n(t,e,r,l)}))}))}:function(n){return n.lift(new Ha(e))}}var Ha=function(){function e(e){this.project=e}return e.prototype.call=function(e,n){return n.subscribe(new Ga(e,this.project))},e}(),Ga=function(e){function n(n,t){var r=e.call(this,n)||this;return r.project=t,r.index=0,r}return l(n,e),n.prototype._next=function(e){var n,t=this.index++;try{n=this.project(e,t)}catch(r){return void this.destination.error(r)}this._innerSub(n,e,t)},n.prototype._innerSub=function(e,n,t){var r=this.innerSubscription;r&&r.unsubscribe();var l=new U(this,void 0,void 0);this.destination.add(l),this.innerSubscription=Y(this,e,n,t,l)},n.prototype._complete=function(){var n=this.innerSubscription;n&&!n.closed||e.prototype._complete.call(this),this.unsubscribe()},n.prototype._unsubscribe=function(){this.innerSubscription=null},n.prototype.notifyComplete=function(n){this.destination.remove(n),this.innerSubscription=null,this.isStopped&&e.prototype._complete.call(this)},n.prototype.notifyNext=function(e,n,t,r,l){this.destination.next(n)},n}(z);function Ba(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return ha()(ta.apply(void 0,e))}function Va(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=e[e.length-1];return F(t)?(e.pop(),function(n){return Ba(e,n,t)}):function(n){return Ba(e,n)}}function Wa(e,n){var t=!1;return arguments.length>=2&&(t=!0),function(r){return r.lift(new ja(e,n,t))}}var ja=function(){function e(e,n,t){void 0===t&&(t=!1),this.accumulator=e,this.seed=n,this.hasSeed=t}return e.prototype.call=function(e,n){return n.subscribe(new Ya(e,this.accumulator,this.seed,this.hasSeed))},e}(),Ya=function(e){function n(n,t,r,l){var i=e.call(this,n)||this;return i.accumulator=t,i._seed=r,i.hasSeed=l,i.index=0,i}return l(n,e),Object.defineProperty(n.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e},enumerable:!0,configurable:!0}),n.prototype._next=function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)},n.prototype._tryNext=function(e){var n,t=this.index++;try{n=this.accumulator(this.seed,e,t)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)},n}(R);function za(e,n){return X(e,n,1)}function Ka(e,n,t){return function(r){return r.lift(new qa(e,n,t))}}var qa=function(){function e(e,n,t){this.nextOrObserver=e,this.error=n,this.complete=t}return e.prototype.call=function(e,n){return n.subscribe(new $a(e,this.nextOrObserver,this.error,this.complete))},e}(),$a=function(e){function n(n,t,r,l){var i=e.call(this,n)||this;return i._tapNext=_,i._tapError=_,i._tapComplete=_,i._tapError=r||_,i._tapComplete=l||_,d(t)?(i._context=i,i._tapNext=t):t&&(i._context=t,i._tapNext=t.next||_,i._tapError=t.error||_,i._tapComplete=t.complete||_),i}return l(n,e),n.prototype._next=function(e){try{this._tapNext.call(this._context,e)}catch(n){return void this.destination.error(n)}this.destination.next(e)},n.prototype._error=function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)},n.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()},n}(R),Qa=function(){function e(e){this.callback=e}return e.prototype.call=function(e,n){return n.subscribe(new Za(e,this.callback))},e}(),Za=function(e){function n(n,t){var r=e.call(this,n)||this;return r.add(new v(t)),r}return l(n,e),n}(R),Xa=null;function Ja(){return Xa}var ec,nc={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},tc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},rc={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"};Ie.Node&&(ec=Ie.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))});var lc,ic=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n.prototype.parse=function(e){throw new Error("parse not implemented")},n.makeCurrent=function(){var e;e=new n,Xa||(Xa=e)},n.prototype.hasProperty=function(e,n){return n in e},n.prototype.setProperty=function(e,n,t){e[n]=t},n.prototype.getProperty=function(e,n){return e[n]},n.prototype.invoke=function(e,n,t){var r;(r=e)[n].apply(r,c(t))},n.prototype.logError=function(e){window.console&&(console.error?console.error(e):console.log(e))},n.prototype.log=function(e){window.console&&window.console.log&&window.console.log(e)},n.prototype.logGroup=function(e){window.console&&window.console.group&&window.console.group(e)},n.prototype.logGroupEnd=function(){window.console&&window.console.groupEnd&&window.console.groupEnd()},Object.defineProperty(n.prototype,"attrToPropMap",{get:function(){return nc},enumerable:!0,configurable:!0}),n.prototype.contains=function(e,n){return ec.call(e,n)},n.prototype.querySelector=function(e,n){return e.querySelector(n)},n.prototype.querySelectorAll=function(e,n){return e.querySelectorAll(n)},n.prototype.on=function(e,n,t){e.addEventListener(n,t,!1)},n.prototype.onAndCancel=function(e,n,t){return e.addEventListener(n,t,!1),function(){e.removeEventListener(n,t,!1)}},n.prototype.dispatchEvent=function(e,n){e.dispatchEvent(n)},n.prototype.createMouseEvent=function(e){var n=this.getDefaultDocument().createEvent("MouseEvent");return n.initEvent(e,!0,!0),n},n.prototype.createEvent=function(e){var n=this.getDefaultDocument().createEvent("Event");return n.initEvent(e,!0,!0),n},n.prototype.preventDefault=function(e){e.preventDefault(),e.returnValue=!1},n.prototype.isPrevented=function(e){return e.defaultPrevented||null!=e.returnValue&&!e.returnValue},n.prototype.getInnerHTML=function(e){return e.innerHTML},n.prototype.getTemplateContent=function(e){return"content"in e&&this.isTemplateElement(e)?e.content:null},n.prototype.getOuterHTML=function(e){return e.outerHTML},n.prototype.nodeName=function(e){return e.nodeName},n.prototype.nodeValue=function(e){return e.nodeValue},n.prototype.type=function(e){return e.type},n.prototype.content=function(e){return this.hasProperty(e,"content")?e.content:e},n.prototype.firstChild=function(e){return e.firstChild},n.prototype.nextSibling=function(e){return e.nextSibling},n.prototype.parentElement=function(e){return e.parentNode},n.prototype.childNodes=function(e){return e.childNodes},n.prototype.childNodesAsList=function(e){for(var n=e.childNodes,t=new Array(n.length),r=0;r<n.length;r++)t[r]=n[r];return t},n.prototype.clearNodes=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},n.prototype.appendChild=function(e,n){e.appendChild(n)},n.prototype.removeChild=function(e,n){e.removeChild(n)},n.prototype.replaceChild=function(e,n,t){e.replaceChild(n,t)},n.prototype.remove=function(e){return e.parentNode&&e.parentNode.removeChild(e),e},n.prototype.insertBefore=function(e,n,t){e.insertBefore(t,n)},n.prototype.insertAllBefore=function(e,n,t){t.forEach(function(t){return e.insertBefore(t,n)})},n.prototype.insertAfter=function(e,n,t){e.insertBefore(t,n.nextSibling)},n.prototype.setInnerHTML=function(e,n){e.innerHTML=n},n.prototype.getText=function(e){return e.textContent},n.prototype.setText=function(e,n){e.textContent=n},n.prototype.getValue=function(e){return e.value},n.prototype.setValue=function(e,n){e.value=n},n.prototype.getChecked=function(e){return e.checked},n.prototype.setChecked=function(e,n){e.checked=n},n.prototype.createComment=function(e){return this.getDefaultDocument().createComment(e)},n.prototype.createTemplate=function(e){var n=this.getDefaultDocument().createElement("template");return n.innerHTML=e,n},n.prototype.createElement=function(e,n){return(n=n||this.getDefaultDocument()).createElement(e)},n.prototype.createElementNS=function(e,n,t){return(t=t||this.getDefaultDocument()).createElementNS(e,n)},n.prototype.createTextNode=function(e,n){return(n=n||this.getDefaultDocument()).createTextNode(e)},n.prototype.createScriptTag=function(e,n,t){var r=(t=t||this.getDefaultDocument()).createElement("SCRIPT");return r.setAttribute(e,n),r},n.prototype.createStyleElement=function(e,n){var t=(n=n||this.getDefaultDocument()).createElement("style");return this.appendChild(t,this.createTextNode(e,n)),t},n.prototype.createShadowRoot=function(e){return e.createShadowRoot()},n.prototype.getShadowRoot=function(e){return e.shadowRoot},n.prototype.getHost=function(e){return e.host},n.prototype.clone=function(e){return e.cloneNode(!0)},n.prototype.getElementsByClassName=function(e,n){return e.getElementsByClassName(n)},n.prototype.getElementsByTagName=function(e,n){return e.getElementsByTagName(n)},n.prototype.classList=function(e){return Array.prototype.slice.call(e.classList,0)},n.prototype.addClass=function(e,n){e.classList.add(n)},n.prototype.removeClass=function(e,n){e.classList.remove(n)},n.prototype.hasClass=function(e,n){return e.classList.contains(n)},n.prototype.setStyle=function(e,n,t){e.style[n]=t},n.prototype.removeStyle=function(e,n){e.style[n]=""},n.prototype.getStyle=function(e,n){return e.style[n]},n.prototype.hasStyle=function(e,n,t){var r=this.getStyle(e,n)||"";return t?r==t:r.length>0},n.prototype.tagName=function(e){return e.tagName},n.prototype.attributeMap=function(e){for(var n=new Map,t=e.attributes,r=0;r<t.length;r++){var l=t.item(r);n.set(l.name,l.value)}return n},n.prototype.hasAttribute=function(e,n){return e.hasAttribute(n)},n.prototype.hasAttributeNS=function(e,n,t){return e.hasAttributeNS(n,t)},n.prototype.getAttribute=function(e,n){return e.getAttribute(n)},n.prototype.getAttributeNS=function(e,n,t){return e.getAttributeNS(n,t)},n.prototype.setAttribute=function(e,n,t){e.setAttribute(n,t)},n.prototype.setAttributeNS=function(e,n,t,r){e.setAttributeNS(n,t,r)},n.prototype.removeAttribute=function(e,n){e.removeAttribute(n)},n.prototype.removeAttributeNS=function(e,n,t){e.removeAttributeNS(n,t)},n.prototype.templateAwareRoot=function(e){return this.isTemplateElement(e)?this.content(e):e},n.prototype.createHtmlDocument=function(){return document.implementation.createHTMLDocument("fakeTitle")},n.prototype.getDefaultDocument=function(){return document},n.prototype.getBoundingClientRect=function(e){try{return e.getBoundingClientRect()}catch(n){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}},n.prototype.getTitle=function(e){return e.title},n.prototype.setTitle=function(e,n){e.title=n||""},n.prototype.elementMatches=function(e,n){return!!this.isElementNode(e)&&(e.matches&&e.matches(n)||e.msMatchesSelector&&e.msMatchesSelector(n)||e.webkitMatchesSelector&&e.webkitMatchesSelector(n))},n.prototype.isTemplateElement=function(e){return this.isElementNode(e)&&"TEMPLATE"===e.nodeName},n.prototype.isTextNode=function(e){return e.nodeType===Node.TEXT_NODE},n.prototype.isCommentNode=function(e){return e.nodeType===Node.COMMENT_NODE},n.prototype.isElementNode=function(e){return e.nodeType===Node.ELEMENT_NODE},n.prototype.hasShadowRoot=function(e){return null!=e.shadowRoot&&e instanceof HTMLElement},n.prototype.isShadowRoot=function(e){return e instanceof DocumentFragment},n.prototype.importIntoDoc=function(e){return document.importNode(this.templateAwareRoot(e),!0)},n.prototype.adoptNode=function(e){return document.adoptNode(e)},n.prototype.getHref=function(e){return e.getAttribute("href")},n.prototype.getEventKey=function(e){var n=e.key;if(null==n){if(null==(n=e.keyIdentifier))return"Unidentified";n.startsWith("U+")&&(n=String.fromCharCode(parseInt(n.substring(2),16)),3===e.location&&rc.hasOwnProperty(n)&&(n=rc[n]))}return tc[n]||n},n.prototype.getGlobalEventTarget=function(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null},n.prototype.getHistory=function(){return window.history},n.prototype.getLocation=function(){return window.location},n.prototype.getBaseHref=function(e){var n,t=oc||(oc=document.querySelector("base"))?oc.getAttribute("href"):null;return null==t?null:(n=t,lc||(lc=document.createElement("a")),lc.setAttribute("href",n),"/"===lc.pathname.charAt(0)?lc.pathname:"/"+lc.pathname)},n.prototype.resetBaseElement=function(){oc=null},n.prototype.getUserAgent=function(){return window.navigator.userAgent},n.prototype.setData=function(e,n,t){this.setAttribute(e,"data-"+n,t)},n.prototype.getData=function(e,n){return this.getAttribute(e,"data-"+n)},n.prototype.getComputedStyle=function(e){return getComputedStyle(e)},n.prototype.supportsWebAnimation=function(){return"function"==typeof Element.prototype.animate},n.prototype.performanceNow=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},n.prototype.supportsCookies=function(){return!0},n.prototype.getCookie=function(e){return function(e,n){var t,r;n=encodeURIComponent(n);try{for(var l=s(e.split(";")),i=l.next();!i.done;i=l.next()){var o=i.value,u=o.indexOf("="),c=a(-1==u?[o,""]:[o.slice(0,u),o.slice(u+1)],2),p=c[1];if(c[0].trim()===n)return decodeURIComponent(p)}}catch(h){t={error:h}}finally{try{i&&!i.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}return null}(document.cookie,e)},n.prototype.setCookie=function(e,n){document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(n)},n}(function(e){function n(){var n=e.call(this)||this;n._animationPrefix=null,n._transitionEnd=null;try{var t=n.createElement("div",document);if(null!=n.getStyle(t,"animationName"))n._animationPrefix="";else for(var r=["Webkit","Moz","O","ms"],l=0;l<r.length;l++)if(null!=n.getStyle(t,r[l]+"AnimationName")){n._animationPrefix="-"+r[l].toLowerCase()+"-";break}var i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(i).forEach(function(e){null!=n.getStyle(t,e)&&(n._transitionEnd=i[e])})}catch(o){n._animationPrefix=null,n._transitionEnd=null}return n}return l(n,e),n.prototype.getDistributedNodes=function(e){return e.getDistributedNodes()},n.prototype.resolveAndSetHref=function(e,n,t){e.href=null==t?n:n+"/../"+t},n.prototype.supportsDOMEvents=function(){return!0},n.prototype.supportsNativeShadowDOM=function(){return"function"==typeof document.body.createShadowRoot},n.prototype.getAnimationPrefix=function(){return this._animationPrefix?this._animationPrefix:""},n.prototype.getTransitionEnd=function(){return this._transitionEnd?this._transitionEnd:""},n.prototype.supportsAnimation=function(){return null!=this._animationPrefix&&null!=this._transitionEnd},n}(function(){function e(){this.resourceLoaderType=null}return Object.defineProperty(e.prototype,"attrToPropMap",{get:function(){return this._attrToPropMap},set:function(e){this._attrToPropMap=e},enumerable:!0,configurable:!0}),e}())),oc=null,uc=Zs;function sc(){return!!window.history.pushState}var ac=function(e){function n(n){var t=e.call(this)||this;return t._doc=n,t._init(),t}var t;return l(n,e),n.prototype._init=function(){this.location=Ja().getLocation(),this._history=Ja().getHistory()},n.prototype.getBaseHrefFromDOM=function(){return Ja().getBaseHref(this._doc)},n.prototype.onPopState=function(e){Ja().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)},n.prototype.onHashChange=function(e){Ja().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)},Object.defineProperty(n.prototype,"pathname",{get:function(){return this.location.pathname},set:function(e){this.location.pathname=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"search",{get:function(){return this.location.search},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hash",{get:function(){return this.location.hash},enumerable:!0,configurable:!0}),n.prototype.pushState=function(e,n,t){sc()?this._history.pushState(e,n,t):this.location.hash=t},n.prototype.replaceState=function(e,n,t){sc()?this._history.replaceState(e,n,t):this.location.hash=t},n.prototype.forward=function(){this._history.forward()},n.prototype.back=function(){this._history.back()},o([(t=He(uc),function(e,n){t(e,n,0)}),u("design:paramtypes",[Object])],n)}(hs),cc=new ye("TRANSITION_ID"),pc=[{provide:At,useFactory:function(e,n,t){return function(){t.get(wt).donePromise.then(function(){var t=Ja();Array.prototype.slice.apply(t.querySelectorAll(n,"style[ng-transition]")).filter(function(n){return t.getAttribute(n,"ng-transition")===e}).forEach(function(e){return t.remove(e)})})}},deps:[cc,uc,on],multi:!0}],hc=function(){function e(){}return e.init=function(){var n;n=new e,ur=n},e.prototype.addToWindow=function(e){Ie.getAngularTestability=function(n,t){void 0===t&&(t=!0);var r=e.findTestabilityInTree(n,t);if(null==r)throw new Error("Could not find testability for element.");return r},Ie.getAllAngularTestabilities=function(){return e.getAllTestabilities()},Ie.getAllAngularRootElements=function(){return e.getAllRootElements()},Ie.frameworkStabilizers||(Ie.frameworkStabilizers=[]),Ie.frameworkStabilizers.push(function(e){var n=Ie.getAllAngularTestabilities(),t=n.length,r=!1,l=function(n){r=r||n,0==--t&&e(r)};n.forEach(function(e){e.whenStable(l)})})},e.prototype.findTestabilityInTree=function(e,n,t){if(null==n)return null;var r=e.getTestability(n);return null!=r?r:t?Ja().isShadowRoot(n)?this.findTestabilityInTree(e,Ja().getHost(n),!0):this.findTestabilityInTree(e,Ja().parentElement(n),!0):null},e}();function dc(e,n){"undefined"!=typeof COMPILED&&COMPILED||((Ie.ng=Ie.ng||{})[e]=n)}var fc={ApplicationRef:fr,NgZone:Zt};function gc(e){return wr(e)}var vc=new ye("EventManagerPlugins"),mc=function(){function e(e,n){var t=this;this._zone=n,this._eventNameToPlugin=new Map,e.forEach(function(e){return e.manager=t}),this._plugins=e.slice().reverse()}return e.prototype.addEventListener=function(e,n,t){return this._findPluginFor(n).addEventListener(e,n,t)},e.prototype.addGlobalEventListener=function(e,n,t){return this._findPluginFor(n).addGlobalEventListener(e,n,t)},e.prototype.getZone=function(){return this._zone},e.prototype._findPluginFor=function(e){var n=this._eventNameToPlugin.get(e);if(n)return n;for(var t=this._plugins,r=0;r<t.length;r++){var l=t[r];if(l.supports(e))return this._eventNameToPlugin.set(e,l),l}throw new Error("No event manager plugin found for event "+e)},e}(),yc=function(){function e(e){this._doc=e}return e.prototype.addGlobalEventListener=function(e,n,t){var r=Ja().getGlobalEventTarget(this._doc,e);if(!r)throw new Error("Unsupported event target "+r+" for event "+n);return this.addEventListener(r,n,t)},e}(),Sc=function(){function e(){this._stylesSet=new Set}return e.prototype.addStyles=function(e){var n=this,t=new Set;e.forEach(function(e){n._stylesSet.has(e)||(n._stylesSet.add(e),t.add(e))}),this.onStylesAdded(t)},e.prototype.onStylesAdded=function(e){},e.prototype.getAllStyles=function(){return Array.from(this._stylesSet)},e}(),Ec=function(e){function n(n){var t=e.call(this)||this;return t._doc=n,t._hostNodes=new Set,t._styleNodes=new Set,t._hostNodes.add(n.head),t}return l(n,e),n.prototype._addStylesToHost=function(e,n){var t=this;e.forEach(function(e){var r=t._doc.createElement("style");r.textContent=e,t._styleNodes.add(n.appendChild(r))})},n.prototype.addHost=function(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)},n.prototype.removeHost=function(e){this._hostNodes.delete(e)},n.prototype.onStylesAdded=function(e){var n=this;this._hostNodes.forEach(function(t){return n._addStylesToHost(e,t)})},n.prototype.ngOnDestroy=function(){this._styleNodes.forEach(function(e){return Ja().remove(e)})},n}(Sc),bc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Oc=/%COMP%/g,Rc="_nghost-%COMP%",Tc="_ngcontent-%COMP%";function Cc(e,n,t){for(var r=0;r<n.length;r++){var l=n[r];Array.isArray(l)?Cc(e,l,t):(l=l.replace(Oc,e),t.push(l))}return t}function _c(e){return function(n){!1===e(n)&&(n.preventDefault(),n.returnValue=!1)}}var Ic=function(){function e(e,n,t){this.eventManager=e,this.sharedStylesHost=n,this.appId=t,this.rendererByCompId=new Map,this.defaultRenderer=new Ac(e)}return e.prototype.createRenderer=function(e,n){if(!e||!n)return this.defaultRenderer;switch(n.encapsulation){case Ue.Emulated:var t=this.rendererByCompId.get(n.id);return t||(t=new Dc(this.eventManager,this.sharedStylesHost,n,this.appId),this.rendererByCompId.set(n.id,t)),t.applyToHost(e),t;case Ue.Native:case Ue.ShadowDom:return new Mc(this.eventManager,this.sharedStylesHost,e,n);default:if(!this.rendererByCompId.has(n.id)){var r=Cc(n.id,n.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(n.id,this.defaultRenderer)}return this.defaultRenderer}},e.prototype.begin=function(){},e.prototype.end=function(){},e}(),Ac=function(){function e(e){this.eventManager=e,this.data=Object.create(null)}return e.prototype.destroy=function(){},e.prototype.createElement=function(e,n){return n?document.createElementNS(bc[n],e):document.createElement(e)},e.prototype.createComment=function(e){return document.createComment(e)},e.prototype.createText=function(e){return document.createTextNode(e)},e.prototype.appendChild=function(e,n){e.appendChild(n)},e.prototype.insertBefore=function(e,n,t){e&&e.insertBefore(n,t)},e.prototype.removeChild=function(e,n){e&&e.removeChild(n)},e.prototype.selectRootElement=function(e,n){var t="string"==typeof e?document.querySelector(e):e;if(!t)throw new Error('The selector "'+e+'" did not match any elements');return n||(t.textContent=""),t},e.prototype.parentNode=function(e){return e.parentNode},e.prototype.nextSibling=function(e){return e.nextSibling},e.prototype.setAttribute=function(e,n,t,r){if(r){n=r+":"+n;var l=bc[r];l?e.setAttributeNS(l,n,t):e.setAttribute(n,t)}else e.setAttribute(n,t)},e.prototype.removeAttribute=function(e,n,t){if(t){var r=bc[t];r?e.removeAttributeNS(r,n):e.removeAttribute(t+":"+n)}else e.removeAttribute(n)},e.prototype.addClass=function(e,n){e.classList.add(n)},e.prototype.removeClass=function(e,n){e.classList.remove(n)},e.prototype.setStyle=function(e,n,t,r){r&Ln.DashCase?e.style.setProperty(n,t,r&Ln.Important?"important":""):e.style[n]=t},e.prototype.removeStyle=function(e,n,t){t&Ln.DashCase?e.style.removeProperty(n):e.style[n]=""},e.prototype.setProperty=function(e,n,t){Nc(n,"property"),e[n]=t},e.prototype.setValue=function(e,n){e.nodeValue=n},e.prototype.listen=function(e,n,t){return Nc(n,"listener"),"string"==typeof e?this.eventManager.addGlobalEventListener(e,n,_c(t)):this.eventManager.addEventListener(e,n,_c(t))},e}(),wc="@".charCodeAt(0);function Nc(e,n){if(e.charCodeAt(0)===wc)throw new Error("Found the synthetic "+n+" "+e+'. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.')}var Pc,Dc=function(e){function n(n,t,r,l){var i=e.call(this,n)||this;i.component=r;var o=Cc(l+"-"+r.id,r.styles,[]);return t.addStyles(o),i.contentAttr=Tc.replace(Oc,l+"-"+r.id),i.hostAttr=Rc.replace(Oc,l+"-"+r.id),i}return l(n,e),n.prototype.applyToHost=function(n){e.prototype.setAttribute.call(this,n,this.hostAttr,"")},n.prototype.createElement=function(n,t){var r=e.prototype.createElement.call(this,n,t);return e.prototype.setAttribute.call(this,r,this.contentAttr,""),r},n}(Ac),Mc=function(e){function n(n,t,r,l){var i=e.call(this,n)||this;i.sharedStylesHost=t,i.hostEl=r,i.component=l,i.shadowRoot=l.encapsulation===Ue.ShadowDom?r.attachShadow({mode:"open"}):r.createShadowRoot(),i.sharedStylesHost.addHost(i.shadowRoot);for(var o=Cc(l.id,l.styles,[]),u=0;u<o.length;u++){var s=document.createElement("style");s.textContent=o[u],i.shadowRoot.appendChild(s)}return i}return l(n,e),n.prototype.nodeOrShadowRoot=function(e){return e===this.hostEl?this.shadowRoot:e},n.prototype.destroy=function(){this.sharedStylesHost.removeHost(this.shadowRoot)},n.prototype.appendChild=function(n,t){return e.prototype.appendChild.call(this,this.nodeOrShadowRoot(n),t)},n.prototype.insertBefore=function(n,t,r){return e.prototype.insertBefore.call(this,this.nodeOrShadowRoot(n),t,r)},n.prototype.removeChild=function(n,t){return e.prototype.removeChild.call(this,this.nodeOrShadowRoot(n),t)},n.prototype.parentNode=function(n){return this.nodeOrShadowRoot(e.prototype.parentNode.call(this,this.nodeOrShadowRoot(n)))},n}(Ac),kc="undefined"!=typeof Zone&&Zone.__symbol__||function(e){return"__zone_symbol__"+e},Lc=kc("addEventListener"),xc=kc("removeEventListener"),Fc={},Uc="__zone_symbol__propagationStopped";"undefined"!=typeof Zone&&Zone[kc("BLACK_LISTED_EVENTS")]&&(Pc={});var Hc=function(e){return!!Pc&&Pc.hasOwnProperty(e)},Gc=function(e){var n=Fc[e.type];if(n){var t=this[n];if(t){var r=[e];if(1===t.length)return(o=t[0]).zone!==Zone.current?o.zone.run(o.handler,this,r):o.handler.apply(this,r);for(var l=t.slice(),i=0;i<l.length&&!0!==e[Uc];i++){var o;(o=l[i]).zone!==Zone.current?o.zone.run(o.handler,this,r):o.handler.apply(this,r)}}}},Bc=function(e){function n(n,t,r){var l=e.call(this,n)||this;return l.ngZone=t,r&&function(e){return e===Js}(r)||l.patchEvent(),l}return l(n,e),n.prototype.patchEvent=function(){if("undefined"!=typeof Event&&Event&&Event.prototype&&!Event.prototype.__zone_symbol__stopImmediatePropagation){var e=Event.prototype.__zone_symbol__stopImmediatePropagation=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[Uc]=!0),e&&e.apply(this,arguments)}}},n.prototype.supports=function(e){return!0},n.prototype.addEventListener=function(e,n,t){var r=this,l=t;if(!e[Lc]||Zt.isInAngularZone()&&!Hc(n))e.addEventListener(n,l,!1);else{var i=Fc[n];i||(i=Fc[n]=kc("ANGULAR"+n+"FALSE"));var o=e[i],u=o&&o.length>0;o||(o=e[i]=[]);var s=Hc(n)?Zone.root:Zone.current;if(0===o.length)o.push({zone:s,handler:l});else{for(var a=!1,c=0;c<o.length;c++)if(o[c].handler===l){a=!0;break}a||o.push({zone:s,handler:l})}u||e[Lc](n,Gc,!1)}return function(){return r.removeEventListener(e,n,l)}},n.prototype.removeEventListener=function(e,n,t){var r=e[xc];if(!r)return e.removeEventListener.apply(e,[n,t,!1]);var l=Fc[n],i=l&&e[l];if(!i)return e.removeEventListener.apply(e,[n,t,!1]);for(var o=!1,u=0;u<i.length;u++)if(i[u].handler===t){o=!0,i.splice(u,1);break}o?0===i.length&&r.apply(e,[n,Gc,!1]):e.removeEventListener.apply(e,[n,t,!1])},n}(yc),Vc={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},Wc=new ye("HammerGestureConfig"),jc=new ye("HammerLoader"),Yc=function(){function e(){this.events=[],this.overrides={}}return e.prototype.buildHammer=function(e){var n=new Hammer(e,this.options);for(var t in n.get("pinch").set({enable:!0}),n.get("rotate").set({enable:!0}),this.overrides)n.get(t).set(this.overrides[t]);return n},e}(),zc=function(e){function n(n,t,r,l){var i=e.call(this,n)||this;return i._config=t,i.console=r,i.loader=l,i}return l(n,e),n.prototype.supports=function(e){return!(!Vc.hasOwnProperty(e.toLowerCase())&&!this.isCustomEvent(e)||!window.Hammer&&!this.loader&&(this.console.warn('The "'+e+'" event cannot be bound because Hammer.JS is not loaded and no custom loader has been specified.'),1))},n.prototype.addEventListener=function(e,n,t){var r=this,l=this.manager.getZone();if(n=n.toLowerCase(),!window.Hammer&&this.loader){var i=!1,o=function(){i=!0};return this.loader().then(function(){if(!window.Hammer)return r.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(o=function(){});i||(o=r.addEventListener(e,n,t))}).catch(function(){r.console.warn('The "'+n+'" event cannot be bound because the custom Hammer.JS loader failed.'),o=function(){}}),function(){o()}}return l.runOutsideAngular(function(){var i=r._config.buildHammer(e),o=function(e){l.runGuarded(function(){t(e)})};return i.on(n,o),function(){i.off(n,o),"function"==typeof i.destroy&&i.destroy()}})},n.prototype.isCustomEvent=function(e){return this._config.events.indexOf(e)>-1},n}(yc),Kc=["alt","control","meta","shift"],qc={alt:function(e){return e.altKey},control:function(e){return e.ctrlKey},meta:function(e){return e.metaKey},shift:function(e){return e.shiftKey}},$c=function(e){function n(n){return e.call(this,n)||this}var t;return l(n,e),t=n,n.prototype.supports=function(e){return null!=t.parseEventName(e)},n.prototype.addEventListener=function(e,n,r){var l=t.parseEventName(n),i=t.eventCallback(l.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return Ja().onAndCancel(e,l.domEventName,i)})},n.parseEventName=function(e){var n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;var l=t._normalizeKey(n.pop()),i="";if(Kc.forEach(function(e){var t=n.indexOf(e);t>-1&&(n.splice(t,1),i+=e+".")}),i+=l,0!=n.length||0===l.length)return null;var o={};return o.domEventName=r,o.fullKey=i,o},n.getEventFullKey=function(e){var n="",t=Ja().getEventKey(e);return" "===(t=t.toLowerCase())?t="space":"."===t&&(t="dot"),Kc.forEach(function(r){r!=t&&(0,qc[r])(e)&&(n+=r+".")}),n+=t},n.eventCallback=function(e,n,r){return function(l){t.getEventFullKey(l)===e&&r.runGuarded(function(){return n(l)})}},n._normalizeKey=function(e){switch(e){case"esc":return"escape";default:return e}},n}(yc),Qc=function(){return function(){}}(),Zc=function(e){function n(n){var t=e.call(this)||this;return t._doc=n,t}return l(n,e),n.prototype.sanitize=function(e,n){if(null==n)return null;switch(e){case Un.NONE:return n;case Un.HTML:return n instanceof Jc?n.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(n,"HTML"),function(e,n){var t=null;try{Qn=Qn||new jn(e);var r=n?String(n):"";t=Qn.getInertBodyElement(r);var l=5,i=r;do{if(0===l)throw new Error("Failed to sanitize html because the input is unstable");l--,r=i,i=t.innerHTML,t=Qn.getInertBodyElement(r)}while(r!==i);var o=new ot,u=o.sanitizeChildren(ct(t)||t);return Wn()&&o.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),u}finally{if(t)for(var s=ct(t)||t;s.firstChild;)s.removeChild(s.firstChild)}}(this._doc,String(n)));case Un.STYLE:return n instanceof ep?n.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(n,"Style"),function(e){if(!(e=String(e).trim()))return"";var n=e.match(gt);return n&&Kn(n[1])===n[1]||e.match(ft)&&function(e){for(var n=!0,t=!0,r=0;r<e.length;r++){var l=e.charAt(r);"'"===l&&t?n=!n:'"'===l&&n&&(t=!t)}return n&&t}(e)?e:(Wn()&&console.warn("WARNING: sanitizing unsafe style value "+e+" (see http://g.co/ng/security#xss)."),"unsafe")}(n));case Un.SCRIPT:if(n instanceof np)return n.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(n,"Script"),new Error("unsafe value used in a script context");case Un.URL:return n instanceof rp||n instanceof tp?n.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(n,"URL"),Kn(String(n)));case Un.RESOURCE_URL:if(n instanceof rp)return n.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(n,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext "+e+" (see http://g.co/ng/security#xss)")}},n.prototype.checkNotSafeValue=function(e,n){if(e instanceof Xc)throw new Error("Required a safe "+n+", got a "+e.getTypeName()+" (see http://g.co/ng/security#xss)")},n.prototype.bypassSecurityTrustHtml=function(e){return new Jc(e)},n.prototype.bypassSecurityTrustStyle=function(e){return new ep(e)},n.prototype.bypassSecurityTrustScript=function(e){return new np(e)},n.prototype.bypassSecurityTrustUrl=function(e){return new tp(e)},n.prototype.bypassSecurityTrustResourceUrl=function(e){return new rp(e)},n}(Qc),Xc=function(){function e(e){this.changingThisBreaksApplicationSecurity=e}return e.prototype.toString=function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"},e}(),Jc=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n.prototype.getTypeName=function(){return"HTML"},n}(Xc),ep=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n.prototype.getTypeName=function(){return"Style"},n}(Xc),np=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n.prototype.getTypeName=function(){return"Script"},n}(Xc),tp=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n.prototype.getTypeName=function(){return"URL"},n}(Xc),rp=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n.prototype.getTypeName=function(){return"ResourceURL"},n}(Xc),lp=cr(zr,"browser",[{provide:kt,useValue:Xs},{provide:Mt,useValue:function(){ic.makeCurrent(),hc.init()},multi:!0},{provide:hs,useClass:ac,deps:[uc]},{provide:uc,useFactory:function(){return document},deps:[]}]);function ip(){return new Ct}var op=function(){function e(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}var n;return n=e,e.withServerTransition=function(e){return{ngModule:n,providers:[{provide:Nt,useValue:e.appId},{provide:cc,useExisting:Nt},pc]}},e}();"undefined"!=typeof window&&window;var up=function(){return function(e,n){this.id=e,this.url=n}}(),sp=function(e){function n(n,t,r,l){void 0===r&&(r="imperative"),void 0===l&&(l=null);var i=e.call(this,n,t)||this;return i.navigationTrigger=r,i.restoredState=l,i}return l(n,e),n.prototype.toString=function(){return"NavigationStart(id: "+this.id+", url: '"+this.url+"')"},n}(up),ap=function(e){function n(n,t,r){var l=e.call(this,n,t)||this;return l.urlAfterRedirects=r,l}return l(n,e),n.prototype.toString=function(){return"NavigationEnd(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"')"},n}(up),cp=function(e){function n(n,t,r){var l=e.call(this,n,t)||this;return l.reason=r,l}return l(n,e),n.prototype.toString=function(){return"NavigationCancel(id: "+this.id+", url: '"+this.url+"')"},n}(up),pp=function(e){function n(n,t,r){var l=e.call(this,n,t)||this;return l.error=r,l}return l(n,e),n.prototype.toString=function(){return"NavigationError(id: "+this.id+", url: '"+this.url+"', error: "+this.error+")"},n}(up),hp=function(e){function n(n,t,r,l){var i=e.call(this,n,t)||this;return i.urlAfterRedirects=r,i.state=l,i}return l(n,e),n.prototype.toString=function(){return"RoutesRecognized(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},n}(up),dp=function(e){function n(n,t,r,l){var i=e.call(this,n,t)||this;return i.urlAfterRedirects=r,i.state=l,i}return l(n,e),n.prototype.toString=function(){return"GuardsCheckStart(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},n}(up),fp=function(e){function n(n,t,r,l,i){var o=e.call(this,n,t)||this;return o.urlAfterRedirects=r,o.state=l,o.shouldActivate=i,o}return l(n,e),n.prototype.toString=function(){return"GuardsCheckEnd(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+", shouldActivate: "+this.shouldActivate+")"},n}(up),gp=function(e){function n(n,t,r,l){var i=e.call(this,n,t)||this;return i.urlAfterRedirects=r,i.state=l,i}return l(n,e),n.prototype.toString=function(){return"ResolveStart(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},n}(up),vp=function(e){function n(n,t,r,l){var i=e.call(this,n,t)||this;return i.urlAfterRedirects=r,i.state=l,i}return l(n,e),n.prototype.toString=function(){return"ResolveEnd(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},n}(up),mp=function(){function e(e){this.route=e}return e.prototype.toString=function(){return"RouteConfigLoadStart(path: "+this.route.path+")"},e}(),yp=function(){function e(e){this.route=e}return e.prototype.toString=function(){return"RouteConfigLoadEnd(path: "+this.route.path+")"},e}(),Sp=function(){function e(e){this.snapshot=e}return e.prototype.toString=function(){return"ChildActivationStart(path: '"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"")+"')"},e}(),Ep=function(){function e(e){this.snapshot=e}return e.prototype.toString=function(){return"ChildActivationEnd(path: '"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"")+"')"},e}(),bp=function(){function e(e){this.snapshot=e}return e.prototype.toString=function(){return"ActivationStart(path: '"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"")+"')"},e}(),Op=function(){function e(e){this.snapshot=e}return e.prototype.toString=function(){return"ActivationEnd(path: '"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"")+"')"},e}(),Rp=function(){function e(e,n,t){this.routerEvent=e,this.position=n,this.anchor=t}return e.prototype.toString=function(){return"Scroll(anchor: '"+this.anchor+"', position: '"+(this.position?this.position[0]+", "+this.position[1]:null)+"')"},e}(),Tp=function(){return function(){}}(),Cp="primary",_p=function(){function e(e){this.params=e||{}}return e.prototype.has=function(e){return this.params.hasOwnProperty(e)},e.prototype.get=function(e){if(this.has(e)){var n=this.params[e];return Array.isArray(n)?n[0]:n}return null},e.prototype.getAll=function(e){if(this.has(e)){var n=this.params[e];return Array.isArray(n)?n:[n]}return[]},Object.defineProperty(e.prototype,"keys",{get:function(){return Object.keys(this.params)},enumerable:!0,configurable:!0}),e}();function Ip(e){return new _p(e)}var Ap="ngNavigationCancelingError";function wp(e){var n=Error("NavigationCancelingError: "+e);return n[Ap]=!0,n}function Np(e,n,t){var r=t.path.split("/");if(r.length>e.length)return null;if("full"===t.pathMatch&&(n.hasChildren()||r.length<e.length))return null;for(var l={},i=0;i<r.length;i++){var o=r[i],u=e[i];if(o.startsWith(":"))l[o.substring(1)]=u;else if(o!==u.path)return null}return{consumed:e.slice(0,r.length),posParams:l}}var Pp=function(){return function(e,n){this.routes=e,this.module=n}}();function Dp(e,n){void 0===n&&(n="");for(var t=0;t<e.length;t++){var r=e[t];Mp(r,kp(n,r))}}function Mp(e,n){if(!e)throw new Error("\n      Invalid configuration of route '"+n+"': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    ");if(Array.isArray(e))throw new Error("Invalid configuration of route '"+n+"': Array cannot be specified");if(!e.component&&!e.children&&!e.loadChildren&&e.outlet&&e.outlet!==Cp)throw new Error("Invalid configuration of route '"+n+"': a componentless route without children or loadChildren cannot have a named outlet set");if(e.redirectTo&&e.children)throw new Error("Invalid configuration of route '"+n+"': redirectTo and children cannot be used together");if(e.redirectTo&&e.loadChildren)throw new Error("Invalid configuration of route '"+n+"': redirectTo and loadChildren cannot be used together");if(e.children&&e.loadChildren)throw new Error("Invalid configuration of route '"+n+"': children and loadChildren cannot be used together");if(e.redirectTo&&e.component)throw new Error("Invalid configuration of route '"+n+"': redirectTo and component cannot be used together");if(e.path&&e.matcher)throw new Error("Invalid configuration of route '"+n+"': path and matcher cannot be used together");if(void 0===e.redirectTo&&!e.component&&!e.children&&!e.loadChildren)throw new Error("Invalid configuration of route '"+n+"'. One of the following must be provided: component, redirectTo, children or loadChildren");if(void 0===e.path&&void 0===e.matcher)throw new Error("Invalid configuration of route '"+n+"': routes must have either a path or a matcher specified");if("string"==typeof e.path&&"/"===e.path.charAt(0))throw new Error("Invalid configuration of route '"+n+"': path cannot start with a slash");if(""===e.path&&void 0!==e.redirectTo&&void 0===e.pathMatch)throw new Error("Invalid configuration of route '{path: \""+n+'", redirectTo: "'+e.redirectTo+"\"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.");if(void 0!==e.pathMatch&&"full"!==e.pathMatch&&"prefix"!==e.pathMatch)throw new Error("Invalid configuration of route '"+n+"': pathMatch can only be set to 'prefix' or 'full'");e.children&&Dp(e.children,n)}function kp(e,n){return n?e||n.path?e&&!n.path?e+"/":!e&&n.path?n.path:e+"/"+n.path:"":e}function Lp(e){var n=e.children&&e.children.map(Lp),t=n?i({},e,{children:n}):i({},e);return!t.component&&(n||t.loadChildren)&&t.outlet&&t.outlet!==Cp&&(t.component=Tp),t}function xp(e,n){var t,r=Object.keys(e),l=Object.keys(n);if(r.length!=l.length)return!1;for(var i=0;i<r.length;i++)if(e[t=r[i]]!==n[t])return!1;return!0}function Fp(e){return Array.prototype.concat.apply([],e)}function Up(e){return e.length>0?e[e.length-1]:null}function Hp(e,n){for(var t in e)e.hasOwnProperty(t)&&n(e[t],t)}function Gp(e){return It(e)?e:_t(e)?Z(Promise.resolve(e)):ta(e)}function Bp(e,n,t){return t?function(e,n){return xp(e,n)}(e.queryParams,n.queryParams)&&function e(n,t){if(!Yp(n.segments,t.segments))return!1;if(n.numberOfChildren!==t.numberOfChildren)return!1;for(var r in t.children){if(!n.children[r])return!1;if(!e(n.children[r],t.children[r]))return!1}return!0}(e.root,n.root):function(e,n){return Object.keys(n).length<=Object.keys(e).length&&Object.keys(n).every(function(t){return n[t]===e[t]})}(e.queryParams,n.queryParams)&&function e(n,t){return function n(t,r,l){if(t.segments.length>l.length)return!!Yp(o=t.segments.slice(0,l.length),l)&&!r.hasChildren();if(t.segments.length===l.length){if(!Yp(t.segments,l))return!1;for(var i in r.children){if(!t.children[i])return!1;if(!e(t.children[i],r.children[i]))return!1}return!0}var o=l.slice(0,t.segments.length),u=l.slice(t.segments.length);return!!Yp(t.segments,o)&&!!t.children[Cp]&&n(t.children[Cp],r,u)}(n,t,t.segments)}(e.root,n.root)}var Vp=function(){function e(e,n,t){this.root=e,this.queryParams=n,this.fragment=t}return Object.defineProperty(e.prototype,"queryParamMap",{get:function(){return this._queryParamMap||(this._queryParamMap=Ip(this.queryParams)),this._queryParamMap},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return $p.serialize(this)},e}(),Wp=function(){function e(e,n){var t=this;this.segments=e,this.children=n,this.parent=null,Hp(n,function(e,n){return e.parent=t})}return e.prototype.hasChildren=function(){return this.numberOfChildren>0},Object.defineProperty(e.prototype,"numberOfChildren",{get:function(){return Object.keys(this.children).length},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return Qp(this)},e}(),jp=function(){function e(e,n){this.path=e,this.parameters=n}return Object.defineProperty(e.prototype,"parameterMap",{get:function(){return this._parameterMap||(this._parameterMap=Ip(this.parameters)),this._parameterMap},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return th(this)},e}();function Yp(e,n){return e.length===n.length&&e.every(function(e,t){return e.path===n[t].path})}function zp(e,n){var t=[];return Hp(e.children,function(e,r){r===Cp&&(t=t.concat(n(e,r)))}),Hp(e.children,function(e,r){r!==Cp&&(t=t.concat(n(e,r)))}),t}var Kp=function(){return function(){}}(),qp=function(){function e(){}return e.prototype.parse=function(e){var n=new uh(e);return new Vp(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())},e.prototype.serialize=function(e){var n,t;return"/"+function e(n,t){if(!n.hasChildren())return Qp(n);if(t){var r=n.children[Cp]?e(n.children[Cp],!1):"",l=[];return Hp(n.children,function(n,t){t!==Cp&&l.push(t+":"+e(n,!1))}),l.length>0?r+"("+l.join("//")+")":r}var i=zp(n,function(t,r){return r===Cp?[e(n.children[Cp],!1)]:[r+":"+e(t,!1)]});return Qp(n)+"/("+i.join("//")+")"}(e.root,!0)+(n=e.queryParams,(t=Object.keys(n).map(function(e){var t=n[e];return Array.isArray(t)?t.map(function(n){return Xp(e)+"="+Xp(n)}).join("&"):Xp(e)+"="+Xp(t)})).length?"?"+t.join("&"):"")+("string"==typeof e.fragment?"#"+encodeURI(e.fragment):"")},e}(),$p=new qp;function Qp(e){return e.segments.map(function(e){return th(e)}).join("/")}function Zp(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Xp(e){return Zp(e).replace(/%3B/gi,";")}function Jp(e){return Zp(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function eh(e){return decodeURIComponent(e)}function nh(e){return eh(e.replace(/\+/g,"%20"))}function th(e){return""+Jp(e.path)+(n=e.parameters,Object.keys(n).map(function(e){return";"+Jp(e)+"="+Jp(n[e])}).join(""));var n}var rh=/^[^\/()?;=#]+/;function lh(e){var n=e.match(rh);return n?n[0]:""}var ih=/^[^=?&#]+/,oh=/^[^?&#]+/,uh=function(){function e(e){this.url=e,this.remaining=e}return e.prototype.parseRootSegment=function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Wp([],{}):new Wp([],this.parseChildren())},e.prototype.parseQueryParams=function(){var e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e},e.prototype.parseFragment=function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null},e.prototype.parseChildren=function(){if(""===this.remaining)return{};this.consumeOptional("/");var e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());var n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));var t={};return this.peekStartsWith("(")&&(t=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(t[Cp]=new Wp(e,n)),t},e.prototype.parseSegment=function(){var e=lh(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '"+this.remaining+"'.");return this.capture(e),new jp(eh(e),this.parseMatrixParams())},e.prototype.parseMatrixParams=function(){for(var e={};this.consumeOptional(";");)this.parseParam(e);return e},e.prototype.parseParam=function(e){var n=lh(this.remaining);if(n){this.capture(n);var t="";if(this.consumeOptional("=")){var r=lh(this.remaining);r&&this.capture(t=r)}e[eh(n)]=eh(t)}},e.prototype.parseQueryParam=function(e){var n,t=(n=this.remaining.match(ih))?n[0]:"";if(t){this.capture(t);var r="";if(this.consumeOptional("=")){var l=function(e){var n=e.match(oh);return n?n[0]:""}(this.remaining);l&&this.capture(r=l)}var i=nh(t),o=nh(r);if(e.hasOwnProperty(i)){var u=e[i];Array.isArray(u)||(e[i]=u=[u]),u.push(o)}else e[i]=o}},e.prototype.parseParens=function(e){var n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var t=lh(this.remaining),r=this.remaining[t.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error("Cannot parse url '"+this.url+"'");var l=void 0;t.indexOf(":")>-1?(l=t.substr(0,t.indexOf(":")),this.capture(l),this.capture(":")):e&&(l=Cp);var i=this.parseChildren();n[l]=1===Object.keys(i).length?i[Cp]:new Wp([],i),this.consumeOptional("//")}return n},e.prototype.peekStartsWith=function(e){return this.remaining.startsWith(e)},e.prototype.consumeOptional=function(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)},e.prototype.capture=function(e){if(!this.consumeOptional(e))throw new Error('Expected "'+e+'".')},e}(),sh=function(){function e(e){this._root=e}return Object.defineProperty(e.prototype,"root",{get:function(){return this._root.value},enumerable:!0,configurable:!0}),e.prototype.parent=function(e){var n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null},e.prototype.children=function(e){var n=ah(e,this._root);return n?n.children.map(function(e){return e.value}):[]},e.prototype.firstChild=function(e){var n=ah(e,this._root);return n&&n.children.length>0?n.children[0].value:null},e.prototype.siblings=function(e){var n=ch(e,this._root);return n.length<2?[]:n[n.length-2].children.map(function(e){return e.value}).filter(function(n){return n!==e})},e.prototype.pathFromRoot=function(e){return ch(e,this._root).map(function(e){return e.value})},e}();function ah(e,n){var t,r;if(e===n.value)return n;try{for(var l=s(n.children),i=l.next();!i.done;i=l.next()){var o=ah(e,i.value);if(o)return o}}catch(u){t={error:u}}finally{try{i&&!i.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}return null}function ch(e,n){var t,r;if(e===n.value)return[n];try{for(var l=s(n.children),i=l.next();!i.done;i=l.next()){var o=ch(e,i.value);if(o.length)return o.unshift(n),o}}catch(u){t={error:u}}finally{try{i&&!i.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}return[]}var ph=function(){function e(e,n){this.value=e,this.children=n}return e.prototype.toString=function(){return"TreeNode("+this.value+")"},e}();function hh(e){var n={};return e&&e.children.forEach(function(e){return n[e.value.outlet]=e}),n}var dh=function(e){function n(n,t){var r=e.call(this,n)||this;return r.snapshot=t,Sh(r,n),r}return l(n,e),n.prototype.toString=function(){return this.snapshot.toString()},n}(sh);function fh(e,n){var t=function(e,n){var t=new mh([],{},{},"",{},Cp,n,null,e.root,-1,{});return new yh("",new ph(t,[]))}(e,n),r=new ra([new jp("",{})]),l=new ra({}),i=new ra({}),o=new ra({}),u=new ra(""),s=new gh(r,l,o,u,i,Cp,n,t.root);return s.snapshot=t.root,new dh(new ph(s,[]),t)}var gh=function(){function e(e,n,t,r,l,i,o,u){this.url=e,this.params=n,this.queryParams=t,this.fragment=r,this.data=l,this.outlet=i,this.component=o,this._futureSnapshot=u}return Object.defineProperty(e.prototype,"routeConfig",{get:function(){return this._futureSnapshot.routeConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._routerState.root},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._routerState.parent(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstChild",{get:function(){return this._routerState.firstChild(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this._routerState.children(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pathFromRoot",{get:function(){return this._routerState.pathFromRoot(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paramMap",{get:function(){return this._paramMap||(this._paramMap=this.params.pipe(K(function(e){return Ip(e)}))),this._paramMap},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"queryParamMap",{get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(K(function(e){return Ip(e)}))),this._queryParamMap},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return this.snapshot?this.snapshot.toString():"Future("+this._futureSnapshot+")"},e}();function vh(e,n){void 0===n&&(n="emptyOnly");var t=e.pathFromRoot,r=0;if("always"!==n)for(r=t.length-1;r>=1;){var l=t[r],o=t[r-1];if(l.routeConfig&&""===l.routeConfig.path)r--;else{if(o.component)break;r--}}return function(e){return e.reduce(function(e,n){return{params:i({},e.params,n.params),data:i({},e.data,n.data),resolve:i({},e.resolve,n._resolvedData)}},{params:{},data:{},resolve:{}})}(t.slice(r))}var mh=function(){function e(e,n,t,r,l,i,o,u,s,a,c){this.url=e,this.params=n,this.queryParams=t,this.fragment=r,this.data=l,this.outlet=i,this.component=o,this.routeConfig=u,this._urlSegment=s,this._lastPathIndex=a,this._resolve=c}return Object.defineProperty(e.prototype,"root",{get:function(){return this._routerState.root},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._routerState.parent(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstChild",{get:function(){return this._routerState.firstChild(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this._routerState.children(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pathFromRoot",{get:function(){return this._routerState.pathFromRoot(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paramMap",{get:function(){return this._paramMap||(this._paramMap=Ip(this.params)),this._paramMap},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"queryParamMap",{get:function(){return this._queryParamMap||(this._queryParamMap=Ip(this.queryParams)),this._queryParamMap},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return"Route(url:'"+this.url.map(function(e){return e.toString()}).join("/")+"', path:'"+(this.routeConfig?this.routeConfig.path:"")+"')"},e}(),yh=function(e){function n(n,t){var r=e.call(this,t)||this;return r.url=n,Sh(r,t),r}return l(n,e),n.prototype.toString=function(){return Eh(this._root)},n}(sh);function Sh(e,n){n.value._routerState=e,n.children.forEach(function(n){return Sh(e,n)})}function Eh(e){var n=e.children.length>0?" { "+e.children.map(Eh).join(", ")+" } ":"";return""+e.value+n}function bh(e){if(e.snapshot){var n=e.snapshot,t=e._futureSnapshot;e.snapshot=t,xp(n.queryParams,t.queryParams)||e.queryParams.next(t.queryParams),n.fragment!==t.fragment&&e.fragment.next(t.fragment),xp(n.params,t.params)||e.params.next(t.params),function(e,n){if(e.length!==n.length)return!1;for(var t=0;t<e.length;++t)if(!xp(e[t],n[t]))return!1;return!0}(n.url,t.url)||e.url.next(t.url),xp(n.data,t.data)||e.data.next(t.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function Oh(e,n){var t,r;return xp(e.params,n.params)&&Yp(t=e.url,r=n.url)&&t.every(function(e,n){return xp(e.parameters,r[n].parameters)})&&!(!e.parent!=!n.parent)&&(!e.parent||Oh(e.parent,n.parent))}function Rh(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Th(e,n,t,r,l){var i={};return r&&Hp(r,function(e,n){i[n]=Array.isArray(e)?e.map(function(e){return""+e}):""+e}),new Vp(t.root===e?n:function e(n,t,r){var l={};return Hp(n.children,function(n,i){l[i]=n===t?r:e(n,t,r)}),new Wp(n.segments,l)}(t.root,e,n),i,l)}var Ch=function(){function e(e,n,t){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=t,e&&t.length>0&&Rh(t[0]))throw new Error("Root segment cannot have matrix parameters");var r=t.find(function(e){return"object"==typeof e&&null!=e&&e.outlets});if(r&&r!==Up(t))throw new Error("{outlets:{}} has to be the last command")}return e.prototype.toRoot=function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]},e}(),_h=function(){return function(e,n,t){this.segmentGroup=e,this.processChildren=n,this.index=t}}();function Ih(e){return"object"==typeof e&&null!=e&&e.outlets?e.outlets[Cp]:""+e}function Ah(e,n,t){if(e||(e=new Wp([],{})),0===e.segments.length&&e.hasChildren())return wh(e,n,t);var r=function(e,n,t){for(var r=0,l=n,i={match:!1,pathIndex:0,commandIndex:0};l<e.segments.length;){if(r>=t.length)return i;var o=e.segments[l],u=Ih(t[r]),s=r<t.length-1?t[r+1]:null;if(l>0&&void 0===u)break;if(u&&s&&"object"==typeof s&&void 0===s.outlets){if(!Mh(u,s,o))return i;r+=2}else{if(!Mh(u,{},o))return i;r++}l++}return{match:!0,pathIndex:l,commandIndex:r}}(e,n,t),l=t.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){var i=new Wp(e.segments.slice(0,r.pathIndex),{});return i.children[Cp]=new Wp(e.segments.slice(r.pathIndex),e.children),wh(i,0,l)}return r.match&&0===l.length?new Wp(e.segments,{}):r.match&&!e.hasChildren()?Nh(e,n,t):r.match?wh(e,0,l):Nh(e,n,t)}function wh(e,n,t){if(0===t.length)return new Wp(e.segments,{});var r=function(e){var n,t;return"object"!=typeof e[0]?((n={})[Cp]=e,n):void 0===e[0].outlets?((t={})[Cp]=e,t):e[0].outlets}(t),l={};return Hp(r,function(t,r){null!==t&&(l[r]=Ah(e.children[r],n,t))}),Hp(e.children,function(e,n){void 0===r[n]&&(l[n]=e)}),new Wp(e.segments,l)}function Nh(e,n,t){for(var r=e.segments.slice(0,n),l=0;l<t.length;){if("object"==typeof t[l]&&void 0!==t[l].outlets){var i=Ph(t[l].outlets);return new Wp(r,i)}if(0===l&&Rh(t[0]))r.push(new jp(e.segments[n].path,t[0])),l++;else{var o=Ih(t[l]),u=l<t.length-1?t[l+1]:null;o&&u&&Rh(u)?(r.push(new jp(o,Dh(u))),l+=2):(r.push(new jp(o,{})),l++)}}return new Wp(r,{})}function Ph(e){var n={};return Hp(e,function(e,t){null!==e&&(n[t]=Nh(new Wp([],{}),0,e))}),n}function Dh(e){var n={};return Hp(e,function(e,t){return n[t]=""+e}),n}function Mh(e,n,t){return e==t.path&&xp(n,t.parameters)}var kh=function(){function e(e,n,t,r){this.routeReuseStrategy=e,this.futureState=n,this.currState=t,this.forwardEvent=r}return e.prototype.activate=function(e){var n=this.futureState._root,t=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,t,e),bh(this.futureState.root),this.activateChildRoutes(n,t,e)},e.prototype.deactivateChildRoutes=function(e,n,t){var r=this,l=hh(n);e.children.forEach(function(e){var n=e.value.outlet;r.deactivateRoutes(e,l[n],t),delete l[n]}),Hp(l,function(e,n){r.deactivateRouteAndItsChildren(e,t)})},e.prototype.deactivateRoutes=function(e,n,t){var r=e.value,l=n?n.value:null;if(r===l)if(r.component){var i=t.getContext(r.outlet);i&&this.deactivateChildRoutes(e,n,i.children)}else this.deactivateChildRoutes(e,n,t);else l&&this.deactivateRouteAndItsChildren(n,t)},e.prototype.deactivateRouteAndItsChildren=function(e,n){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)},e.prototype.detachAndStoreRouteSubtree=function(e,n){var t=n.getContext(e.value.outlet);if(t&&t.outlet){var r=t.outlet.detach(),l=t.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:r,route:e,contexts:l})}},e.prototype.deactivateRouteAndOutlet=function(e,n){var t=this,r=n.getContext(e.value.outlet);if(r){var l=hh(e),i=e.value.component?r.children:n;Hp(l,function(e,n){return t.deactivateRouteAndItsChildren(e,i)}),r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated())}},e.prototype.activateChildRoutes=function(e,n,t){var r=this,l=hh(n);e.children.forEach(function(e){r.activateRoutes(e,l[e.value.outlet],t),r.forwardEvent(new Op(e.value.snapshot))}),e.children.length&&this.forwardEvent(new Ep(e.value.snapshot))},e.prototype.activateRoutes=function(e,n,t){var r=e.value,l=n?n.value:null;if(bh(r),r===l)if(r.component){var i=t.getOrCreateContext(r.outlet);this.activateChildRoutes(e,n,i.children)}else this.activateChildRoutes(e,n,t);else if(r.component)if(i=t.getOrCreateContext(r.outlet),this.routeReuseStrategy.shouldAttach(r.snapshot)){var o=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),i.children.onOutletReAttached(o.contexts),i.attachRef=o.componentRef,i.route=o.route.value,i.outlet&&i.outlet.attach(o.componentRef,o.route.value),Lh(o.route)}else{var u=function(e){for(var n=r.snapshot.parent;n;n=n.parent){var t=n.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(),s=u?u.module.componentFactoryResolver:null;i.attachRef=null,i.route=r,i.resolver=s,i.outlet&&i.outlet.activateWith(r,s),this.activateChildRoutes(e,null,i.children)}else this.activateChildRoutes(e,null,t)},e}();function Lh(e){bh(e.value),e.children.forEach(Lh)}function xh(e){return"function"==typeof e}function Fh(e){return e instanceof Vp}var Uh=function(){return function(e){this.segmentGroup=e||null}}(),Hh=function(){return function(e){this.urlTree=e}}();function Gh(e){return new w(function(n){return n.error(new Uh(e))})}function Bh(e){return new w(function(n){return n.error(new Hh(e))})}function Vh(e){return new w(function(n){return n.error(new Error("Only absolute redirects can have named outlets. redirectTo: '"+e+"'"))})}var Wh=function(){function e(e,n,t,r,l){this.configLoader=n,this.urlSerializer=t,this.urlTree=r,this.config=l,this.allowRedirects=!0,this.ngModule=e.get(wn)}return e.prototype.apply=function(){var e=this;return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,Cp).pipe(K(function(n){return e.createUrlTree(n,e.urlTree.queryParams,e.urlTree.fragment)})).pipe(wa(function(n){if(n instanceof Hh)return e.allowRedirects=!1,e.match(n.urlTree);if(n instanceof Uh)throw e.noMatchError(n);throw n}))},e.prototype.match=function(e){var n=this;return this.expandSegmentGroup(this.ngModule,this.config,e.root,Cp).pipe(K(function(t){return n.createUrlTree(t,e.queryParams,e.fragment)})).pipe(wa(function(e){if(e instanceof Uh)throw n.noMatchError(e);throw e}))},e.prototype.noMatchError=function(e){return new Error("Cannot match any routes. URL Segment: '"+e.segmentGroup+"'")},e.prototype.createUrlTree=function(e,n,t){var r,l=e.segments.length>0?new Wp([],((r={})[Cp]=e,r)):e;return new Vp(l,n,t)},e.prototype.expandSegmentGroup=function(e,n,t,r){return 0===t.segments.length&&t.hasChildren()?this.expandChildren(e,n,t).pipe(K(function(e){return new Wp([],e)})):this.expandSegment(e,t,n,t.segments,r,!0)},e.prototype.expandChildren=function(e,n,t){var r=this;return function(t,l){if(0===Object.keys(t).length)return ta({});var i=[],o=[],u={};return Hp(t,function(t,l){var s,a,c=(s=l,a=t,r.expandSegmentGroup(e,n,a,s)).pipe(K(function(e){return u[l]=e}));l===Cp?i.push(c):o.push(c)}),ta.apply(null,i.concat(o)).pipe(ha(),Aa(),K(function(){return u}))}(t.children)},e.prototype.expandSegment=function(e,n,t,r,l,i){var o=this;return ta.apply(void 0,c(t)).pipe(K(function(u){return o.expandSegmentAgainstRoute(e,n,t,u,r,l,i).pipe(wa(function(e){if(e instanceof Uh)return ta(null);throw e}))}),ha(),La(function(e){return!!e}),wa(function(e,t){if(e instanceof ia||"EmptyError"===e.name){if(o.noLeftoversInUrl(n,r,l))return ta(new Wp([],{}));throw new Uh(n)}throw e}))},e.prototype.noLeftoversInUrl=function(e,n,t){return 0===n.length&&!e.children[t]},e.prototype.expandSegmentAgainstRoute=function(e,n,t,r,l,i,o){return Kh(r)!==i?Gh(n):void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,n,r,l):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,n,t,r,l,i):Gh(n)},e.prototype.expandSegmentAgainstRouteUsingRedirect=function(e,n,t,r,l,i){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,t,r,l,i)},e.prototype.expandWildCardWithParamsAgainstRouteUsingRedirect=function(e,n,t,r){var l=this,i=this.applyRedirectCommands([],t.redirectTo,{});return t.redirectTo.startsWith("/")?Bh(i):this.lineralizeSegments(t,i).pipe(X(function(t){var i=new Wp(t,{});return l.expandSegment(e,i,n,t,r,!1)}))},e.prototype.expandRegularSegmentAgainstRouteUsingRedirect=function(e,n,t,r,l,i){var o=this,u=jh(n,r,l),s=u.consumedSegments,a=u.lastChild,c=u.positionalParamSegments;if(!u.matched)return Gh(n);var p=this.applyRedirectCommands(s,r.redirectTo,c);return r.redirectTo.startsWith("/")?Bh(p):this.lineralizeSegments(r,p).pipe(X(function(r){return o.expandSegment(e,n,t,r.concat(l.slice(a)),i,!1)}))},e.prototype.matchSegmentAgainstRoute=function(e,n,t,r){var l=this;if("**"===t.path)return t.loadChildren?this.configLoader.load(e.injector,t).pipe(K(function(e){return t._loadedConfig=e,new Wp(r,{})})):ta(new Wp(r,{}));var o=jh(n,t,r),u=o.consumedSegments,a=o.lastChild;if(!o.matched)return Gh(n);var c=r.slice(a);return this.getChildConfig(e,t,r).pipe(X(function(e){var t=e.module,r=e.routes,o=function(e,n,t,r){return t.length>0&&function(e,n,t){return r.some(function(t){return zh(e,n,t)&&Kh(t)!==Cp})}(e,t)?{segmentGroup:Yh(new Wp(n,function(e,n){var t,r,l={};l[Cp]=n;try{for(var i=s(e),o=i.next();!o.done;o=i.next()){var u=o.value;""===u.path&&Kh(u)!==Cp&&(l[Kh(u)]=new Wp([],{}))}}catch(a){t={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return l}(r,new Wp(t,e.children)))),slicedSegments:[]}:0===t.length&&function(e,n,t){return r.some(function(t){return zh(e,n,t)})}(e,t)?{segmentGroup:Yh(new Wp(e.segments,function(e,n,t,r){var l,o,u={};try{for(var a=s(t),c=a.next();!c.done;c=a.next()){var p=c.value;zh(e,n,p)&&!r[Kh(p)]&&(u[Kh(p)]=new Wp([],{}))}}catch(h){l={error:h}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(l)throw l.error}}return i({},r,u)}(e,t,r,e.children))),slicedSegments:t}:{segmentGroup:e,slicedSegments:t}}(n,u,c,r),a=o.segmentGroup,p=o.slicedSegments;return 0===p.length&&a.hasChildren()?l.expandChildren(t,r,a).pipe(K(function(e){return new Wp(u,e)})):0===r.length&&0===p.length?ta(new Wp(u,{})):l.expandSegment(t,a,r,p,Cp,!0).pipe(K(function(e){return new Wp(u.concat(e.segments),e.children)}))}))},e.prototype.getChildConfig=function(e,n,t){var r=this;return n.children?ta(new Pp(n.children,e)):n.loadChildren?void 0!==n._loadedConfig?ta(n._loadedConfig):function(e,n,t){var r,l=n.canLoad;return l&&0!==l.length?Z(l).pipe(K(function(r){var l,i=e.get(r);if(function(e){return e&&xh(e.canLoad)}(i))l=i.canLoad(n,t);else{if(!xh(i))throw new Error("Invalid CanLoad guard");l=i(n,t)}return Gp(l)})).pipe(ha(),(r=function(e){return!0===e},function(e){return e.lift(new xa(r,void 0,e))})):ta(!0)}(e.injector,n,t).pipe(X(function(t){return t?r.configLoader.load(e.injector,n).pipe(K(function(e){return n._loadedConfig=e,e})):function(e){return new w(function(n){return n.error(wp("Cannot load children because the guard of the route \"path: '"+e.path+"'\" returned false"))})}(n)})):ta(new Pp([],e))},e.prototype.lineralizeSegments=function(e,n){for(var t=[],r=n.root;;){if(t=t.concat(r.segments),0===r.numberOfChildren)return ta(t);if(r.numberOfChildren>1||!r.children[Cp])return Vh(e.redirectTo);r=r.children[Cp]}},e.prototype.applyRedirectCommands=function(e,n,t){return this.applyRedirectCreatreUrlTree(n,this.urlSerializer.parse(n),e,t)},e.prototype.applyRedirectCreatreUrlTree=function(e,n,t,r){var l=this.createSegmentGroup(e,n.root,t,r);return new Vp(l,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)},e.prototype.createQueryParams=function(e,n){var t={};return Hp(e,function(e,r){if("string"==typeof e&&e.startsWith(":")){var l=e.substring(1);t[r]=n[l]}else t[r]=e}),t},e.prototype.createSegmentGroup=function(e,n,t,r){var l=this,i=this.createSegments(e,n.segments,t,r),o={};return Hp(n.children,function(n,i){o[i]=l.createSegmentGroup(e,n,t,r)}),new Wp(i,o)},e.prototype.createSegments=function(e,n,t,r){var l=this;return n.map(function(n){return n.path.startsWith(":")?l.findPosParam(e,n,r):l.findOrReturn(n,t)})},e.prototype.findPosParam=function(e,n,t){var r=t[n.path.substring(1)];if(!r)throw new Error("Cannot redirect to '"+e+"'. Cannot find '"+n.path+"'.");return r},e.prototype.findOrReturn=function(e,n){var t,r,l=0;try{for(var i=s(n),o=i.next();!o.done;o=i.next()){var u=o.value;if(u.path===e.path)return n.splice(l),u;l++}}catch(a){t={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return e},e}();function jh(e,n,t){if(""===n.path)return"full"===n.pathMatch&&(e.hasChildren()||t.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};var r=(n.matcher||Np)(t,e,n);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function Yh(e){if(1===e.numberOfChildren&&e.children[Cp]){var n=e.children[Cp];return new Wp(e.segments.concat(n.segments),n.children)}return e}function zh(e,n,t){return(!(e.hasChildren()||n.length>0)||"full"!==t.pathMatch)&&""===t.path&&void 0!==t.redirectTo}function Kh(e){return e.outlet||Cp}var qh=function(){return function(e){this.path=e,this.route=this.path[this.path.length-1]}}(),$h=function(){return function(e,n){this.component=e,this.route=n}}();function Qh(e,n,t){var r=function(e){if(!e)return null;for(var n=e.parent;n;n=n.parent){var t=n.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(n);return(r?r.module.injector:t).get(e)}function Zh(e,n,t,r,l){void 0===l&&(l={canDeactivateChecks:[],canActivateChecks:[]});var i=hh(n);return e.children.forEach(function(e){!function(e,n,t,r,l){void 0===l&&(l={canDeactivateChecks:[],canActivateChecks:[]});var i=e.value,o=n?n.value:null,u=t?t.getContext(e.value.outlet):null;if(o&&i.routeConfig===o.routeConfig){var s=function(e,n,t){if("function"==typeof t)return t(e,n);switch(t){case"pathParamsChange":return!Yp(e.url,n.url);case"pathParamsOrQueryParamsChange":return!Yp(e.url,n.url)||!xp(e.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Oh(e,n)||!xp(e.queryParams,n.queryParams);case"paramsChange":default:return!Oh(e,n)}}(o,i,i.routeConfig.runGuardsAndResolvers);s?l.canActivateChecks.push(new qh(r)):(i.data=o.data,i._resolvedData=o._resolvedData),Zh(e,n,i.component?u?u.children:null:t,r,l),s&&l.canDeactivateChecks.push(new $h(u&&u.outlet&&u.outlet.component||null,o))}else o&&Xh(n,u,l),l.canActivateChecks.push(new qh(r)),Zh(e,null,i.component?u?u.children:null:t,r,l)}(e,i[e.value.outlet],t,r.concat([e.value]),l),delete i[e.value.outlet]}),Hp(i,function(e,n){return Xh(e,t.getContext(n),l)}),l}function Xh(e,n,t){var r=hh(e),l=e.value;Hp(r,function(e,r){Xh(e,l.component?n?n.children.getContext(r):null:n,t)}),t.canDeactivateChecks.push(new $h(l.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,l))}var Jh=Symbol("INITIAL_VALUE");function ed(){return Ua(function(e){return(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=null,r=null;return F(e[e.length-1])&&(r=e.pop()),"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&p(e[0])&&(e=e[0]),re(e,r).lift(new ua(t))}).apply(void 0,c(e.map(function(e){return e.pipe(Da(1),Va(Jh))}))).pipe(Wa(function(e,n){var t=!1;return n.reduce(function(e,r,l){if(e!==Jh)return e;if(r===Jh&&(t=!0),!t){if(!1===r)return r;if(l===n.length-1||Fh(r))return r}return e},e)},Jh),da(function(e){return e!==Jh}),K(function(e){return Fh(e)?e:!0===e}),Da(1))})}function nd(e,n){return null!==e&&n&&n(new bp(e)),ta(!0)}function td(e,n){return null!==e&&n&&n(new Sp(e)),ta(!0)}function rd(e,n,t){var r=n.routeConfig?n.routeConfig.canActivate:null;return r&&0!==r.length?ta(r.map(function(r){return pa(function(){var l,i=Qh(r,n,t);if(function(e){return e&&xh(e.canActivate)}(i))l=Gp(i.canActivate(n,e));else{if(!xh(i))throw new Error("Invalid CanActivate guard");l=Gp(i(n,e))}return l.pipe(La())})})).pipe(ed()):ta(!0)}function ld(e,n,t){var r=n[n.length-1],l=n.slice(0,n.length-1).reverse().map(function(e){return function(e){var n=e.routeConfig?e.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:e,guards:n}:null}(e)}).filter(function(e){return null!==e}).map(function(n){return pa(function(){return ta(n.guards.map(function(l){var i,o=Qh(l,n.node,t);if(function(e){return e&&xh(e.canActivateChild)}(o))i=Gp(o.canActivateChild(r,e));else{if(!xh(o))throw new Error("Invalid CanActivateChild guard");i=Gp(o(r,e))}return i.pipe(La())})).pipe(ed())})});return ta(l).pipe(ed())}var id=function(){return function(){}}(),od=function(){function e(e,n,t,r,l,i){this.rootComponentType=e,this.config=n,this.urlTree=t,this.url=r,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=i}return e.prototype.recognize=function(){try{var e=ad(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,n=this.processSegmentGroup(this.config,e,Cp),t=new mh([],Object.freeze({}),Object.freeze(i({},this.urlTree.queryParams)),this.urlTree.fragment,{},Cp,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new ph(t,n),l=new yh(this.url,r);return this.inheritParamsAndData(l._root),ta(l)}catch(o){return new w(function(e){return e.error(o)})}},e.prototype.inheritParamsAndData=function(e){var n=this,t=e.value,r=vh(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(function(e){return n.inheritParamsAndData(e)})},e.prototype.processSegmentGroup=function(e,n,t){return 0===n.segments.length&&n.hasChildren()?this.processChildren(e,n):this.processSegment(e,n,n.segments,t)},e.prototype.processChildren=function(e,n){var t,r=this,l=zp(n,function(n,t){return r.processSegmentGroup(e,n,t)});return t={},l.forEach(function(e){var n=t[e.value.outlet];if(n){var r=n.url.map(function(e){return e.toString()}).join("/"),l=e.value.url.map(function(e){return e.toString()}).join("/");throw new Error("Two segments cannot have the same outlet name: '"+r+"' and '"+l+"'.")}t[e.value.outlet]=e.value}),l.sort(function(e,n){return e.value.outlet===Cp?-1:n.value.outlet===Cp?1:e.value.outlet.localeCompare(n.value.outlet)}),l},e.prototype.processSegment=function(e,n,t,r){var l,i;try{for(var o=s(e),u=o.next();!u.done;u=o.next()){var a=u.value;try{return this.processSegmentAgainstRoute(a,n,t,r)}catch(c){if(!(c instanceof id))throw c}}}catch(p){l={error:p}}finally{try{u&&!u.done&&(i=o.return)&&i.call(o)}finally{if(l)throw l.error}}if(this.noLeftoversInUrl(n,t,r))return[];throw new id},e.prototype.noLeftoversInUrl=function(e,n,t){return 0===n.length&&!e.children[t]},e.prototype.processSegmentAgainstRoute=function(e,n,t,r){if(e.redirectTo)throw new id;if((e.outlet||Cp)!==r)throw new id;var l,o=[],u=[];if("**"===e.path){var s=t.length>0?Up(t).parameters:{};l=new mh(t,s,Object.freeze(i({},this.urlTree.queryParams)),this.urlTree.fragment,hd(e),r,e.component,e,ud(n),sd(n)+t.length,dd(e))}else{var a=function(e,n,t){if(""===n.path){if("full"===n.pathMatch&&(e.hasChildren()||t.length>0))throw new id;return{consumedSegments:[],lastChild:0,parameters:{}}}var r=(n.matcher||Np)(t,e,n);if(!r)throw new id;var l={};Hp(r.posParams,function(e,n){l[n]=e.path});var o=r.consumed.length>0?i({},l,r.consumed[r.consumed.length-1].parameters):l;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:o}}(n,e,t);o=a.consumedSegments,u=t.slice(a.lastChild),l=new mh(o,a.parameters,Object.freeze(i({},this.urlTree.queryParams)),this.urlTree.fragment,hd(e),r,e.component,e,ud(n),sd(n)+o.length,dd(e))}var c=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),p=ad(n,o,u,c,this.relativeLinkResolution),h=p.segmentGroup,d=p.slicedSegments;if(0===d.length&&h.hasChildren()){var f=this.processChildren(c,h);return[new ph(l,f)]}if(0===c.length&&0===d.length)return[new ph(l,[])];var g=this.processSegment(c,h,d,Cp);return[new ph(l,g)]},e}();function ud(e){for(var n=e;n._sourceSegment;)n=n._sourceSegment;return n}function sd(e){for(var n=e,t=n._segmentIndexShift?n._segmentIndexShift:0;n._sourceSegment;)t+=(n=n._sourceSegment)._segmentIndexShift?n._segmentIndexShift:0;return t-1}function ad(e,n,t,r,l){if(t.length>0&&function(e,n,t){return r.some(function(t){return cd(e,n,t)&&pd(t)!==Cp})}(e,t)){var o=new Wp(n,function(e,n,t,r){var l,i,o={};o[Cp]=r,r._sourceSegment=e,r._segmentIndexShift=n.length;try{for(var u=s(t),a=u.next();!a.done;a=u.next()){var c=a.value;if(""===c.path&&pd(c)!==Cp){var p=new Wp([],{});p._sourceSegment=e,p._segmentIndexShift=n.length,o[pd(c)]=p}}}catch(h){l={error:h}}finally{try{a&&!a.done&&(i=u.return)&&i.call(u)}finally{if(l)throw l.error}}return o}(e,n,r,new Wp(t,e.children)));return o._sourceSegment=e,o._segmentIndexShift=n.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function(e,n,t){return r.some(function(t){return cd(e,n,t)})}(e,t)){var u=new Wp(e.segments,function(e,n,t,r,l,o){var u,a,c={};try{for(var p=s(r),h=p.next();!h.done;h=p.next()){var d=h.value;if(cd(e,t,d)&&!l[pd(d)]){var f=new Wp([],{});f._sourceSegment=e,f._segmentIndexShift="legacy"===o?e.segments.length:n.length,c[pd(d)]=f}}}catch(g){u={error:g}}finally{try{h&&!h.done&&(a=p.return)&&a.call(p)}finally{if(u)throw u.error}}return i({},l,c)}(e,n,t,r,e.children,l));return u._sourceSegment=e,u._segmentIndexShift=n.length,{segmentGroup:u,slicedSegments:t}}var a=new Wp(e.segments,e.children);return a._sourceSegment=e,a._segmentIndexShift=n.length,{segmentGroup:a,slicedSegments:t}}function cd(e,n,t){return(!(e.hasChildren()||n.length>0)||"full"!==t.pathMatch)&&""===t.path&&void 0===t.redirectTo}function pd(e){return e.outlet||Cp}function hd(e){return e.data||{}}function dd(e){return e.resolve||{}}function fd(e,n,t,r){var l=Qh(e,n,r);return Gp(l.resolve?l.resolve(n,t):l(n,t))}function gd(e){return function(n){return n.pipe(Ua(function(n){var t=e(n);return t?Z(t).pipe(K(function(){return n})):Z([n])}))}}var vd=function(){return function(){}}(),md=function(){function e(){}return e.prototype.shouldDetach=function(e){return!1},e.prototype.store=function(e,n){},e.prototype.shouldAttach=function(e){return!1},e.prototype.retrieve=function(e){return null},e.prototype.shouldReuseRoute=function(e,n){return e.routeConfig===n.routeConfig},e}(),yd=new ye("ROUTES"),Sd=function(){function e(e,n,t,r){this.loader=e,this.compiler=n,this.onLoadStartListener=t,this.onLoadEndListener=r}return e.prototype.load=function(e,n){var t=this;return this.onLoadStartListener&&this.onLoadStartListener(n),this.loadModuleFactory(n.loadChildren).pipe(K(function(r){t.onLoadEndListener&&t.onLoadEndListener(n);var l=r.create(e);return new Pp(Fp(l.injector.get(yd)).map(Lp),l)}))},e.prototype.loadModuleFactory=function(e){var n=this;return"string"==typeof e?Z(this.loader.load(e)):Gp(e()).pipe(X(function(e){return e instanceof Nn?ta(e):Z(n.compiler.compileModuleAsync(e))}))},e}(),Ed=function(){return function(){}}(),bd=function(){function e(){}return e.prototype.shouldProcessUrl=function(e){return!0},e.prototype.extract=function(e){return e},e.prototype.merge=function(e,n){return e},e}();function Od(e){throw e}function Rd(e,n,t){return n.parse("/")}function Td(e,n){return ta(null)}var Cd=function(){function e(e,n,t,r,l,i,o,u){var s=this;this.rootComponentType=e,this.urlSerializer=n,this.rootContexts=t,this.location=r,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new L,this.errorHandler=Od,this.malformedUriErrorHandler=Rd,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Td,afterPreactivation:Td},this.urlHandlingStrategy=new bd,this.routeReuseStrategy=new md,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=l.get(wn),this.console=l.get(xt);var a=l.get(Zt);this.isNgZoneEnabled=a instanceof Zt,this.resetConfig(u),this.currentUrlTree=new Vp(new Wp([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Sd(i,o,function(e){return s.triggerEvent(new mp(e))},function(e){return s.triggerEvent(new yp(e))}),this.routerState=fh(this.currentUrlTree,this.rootComponentType),this.transitions=new ra({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}return e.prototype.setupNavigations=function(e){var n=this,t=this.events;return e.pipe(da(function(e){return 0!==e.id}),K(function(e){return i({},e,{extractedUrl:n.urlHandlingStrategy.extract(e.rawUrl)})}),Ua(function(e){var r,l,o,u,a=!1,c=!1;return ta(e).pipe(Ka(function(e){n.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:n.lastSuccessfulNavigation?i({},n.lastSuccessfulNavigation,{previousNavigation:null}):null}}),Ua(function(e){var r,l,o,u,s=!n.navigated||e.extractedUrl.toString()!==n.browserUrlTree.toString();if(("reload"===n.onSameUrlNavigation||s)&&n.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return ta(e).pipe(Ua(function(e){var r=n.transitions.getValue();return t.next(new sp(e.id,n.serializeUrl(e.extractedUrl),e.source,e.restoredState)),r!==n.transitions.getValue()?aa:[e]}),Ua(function(e){return Promise.resolve(e)}),(r=n.ngModule.injector,l=n.configLoader,o=n.urlSerializer,u=n.config,function(e){return e.pipe(Ua(function(e){return function(n,t,r,l,i){return new Wh(n,t,r,e.extractedUrl,i).apply()}(r,l,o,0,u).pipe(K(function(n){return i({},e,{urlAfterRedirects:n})}))}))}),Ka(function(e){n.currentNavigation=i({},n.currentNavigation,{finalUrl:e.urlAfterRedirects})}),function(e,t,r,l,o){return function(r){return r.pipe(X(function(r){return function(e,n,t,r,l,i){return void 0===l&&(l="emptyOnly"),void 0===i&&(i="legacy"),new od(e,n,t,r,l,i).recognize()}(e,t,r.urlAfterRedirects,(u=r.urlAfterRedirects,n.serializeUrl(u)),l,o).pipe(K(function(e){return i({},r,{targetSnapshot:e})}));var u}))}}(n.rootComponentType,n.config,0,n.paramsInheritanceStrategy,n.relativeLinkResolution),Ka(function(e){"eager"===n.urlUpdateStrategy&&(e.extras.skipLocationChange||n.setBrowserUrl(e.urlAfterRedirects,!!e.extras.replaceUrl,e.id),n.browserUrlTree=e.urlAfterRedirects)}),Ka(function(e){var r=new hp(e.id,n.serializeUrl(e.extractedUrl),n.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.next(r)}));if(s&&n.rawUrlTree&&n.urlHandlingStrategy.shouldProcessUrl(n.rawUrlTree)){var a=e.extractedUrl,c=e.source,p=e.restoredState,h=e.extras,d=new sp(e.id,n.serializeUrl(a),c,p);t.next(d);var f=fh(a,n.rootComponentType).snapshot;return ta(i({},e,{targetSnapshot:f,urlAfterRedirects:a,extras:i({},h,{skipLocationChange:!1,replaceUrl:!1})}))}return n.rawUrlTree=e.rawUrl,e.resolve(null),aa}),gd(function(e){var t=e.extras;return n.hooks.beforePreactivation(e.targetSnapshot,{navigationId:e.id,appliedUrlTree:e.extractedUrl,rawUrlTree:e.rawUrl,skipLocationChange:!!t.skipLocationChange,replaceUrl:!!t.replaceUrl})}),Ka(function(e){var t=new dp(e.id,n.serializeUrl(e.extractedUrl),n.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);n.triggerEvent(t)}),K(function(e){return i({},e,{guards:(t=e.targetSnapshot,r=e.currentSnapshot,l=n.rootContexts,o=t._root,Zh(o,r?r._root:null,l,[o.value]))});var t,r,l,o}),function(e,n){return function(t){return t.pipe(X(function(t){var r=t.targetSnapshot,l=t.currentSnapshot,o=t.guards,u=o.canActivateChecks,s=o.canDeactivateChecks;return 0===s.length&&0===u.length?ta(i({},t,{guardsResult:!0})):function(e,n,t,r){return Z(s).pipe(X(function(e){return function(e,n,t,r,l){var i=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return i&&0!==i.length?ta(i.map(function(i){var o,u=Qh(i,n,l);if(function(e){return e&&xh(e.canDeactivate)}(u))o=Gp(u.canDeactivate(e,n,t,r));else{if(!xh(u))throw new Error("Invalid CanDeactivate guard");o=Gp(u(e,n,t,r))}return o.pipe(La())})).pipe(ed()):ta(!0)}(e.component,e.route,t,n,r)}),La(function(e){return!0!==e},!0))}(0,r,l,e).pipe(X(function(t){return t&&"boolean"==typeof t?function(e,n,t,r){return Z(u).pipe(za(function(n){return Z([td(n.route.parent,r),nd(n.route,r),ld(e,n.path,t),rd(e,n.route,t)]).pipe(ha(),La(function(e){return!0!==e},!0))}),La(function(e){return!0!==e},!0))}(r,0,e,n):ta(t)}),K(function(e){return i({},t,{guardsResult:e})}))}))}}(n.ngModule.injector,function(e){return n.triggerEvent(e)}),Ka(function(e){if(Fh(e.guardsResult)){var t=wp('Redirecting to "'+n.serializeUrl(e.guardsResult)+'"');throw t.url=e.guardsResult,t}}),Ka(function(e){var t=new fp(e.id,n.serializeUrl(e.extractedUrl),n.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);n.triggerEvent(t)}),da(function(e){if(!e.guardsResult){n.resetUrlToCurrentUrlTree();var r=new cp(e.id,n.serializeUrl(e.extractedUrl),"");return t.next(r),e.resolve(!1),!1}return!0}),gd(function(e){if(e.guards.canActivateChecks.length)return ta(e).pipe(Ka(function(e){var t=new gp(e.id,n.serializeUrl(e.extractedUrl),n.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);n.triggerEvent(t)}),(t=n.paramsInheritanceStrategy,r=n.ngModule.injector,function(e){return e.pipe(X(function(e){var n=e.targetSnapshot,l=e.guards.canActivateChecks;return l.length?Z(l).pipe(za(function(e){return function(e,t,r,l){return function(e,n,t,r){var l=Object.keys(e);if(0===l.length)return ta({});if(1===l.length){var i=l[0];return fd(e[i],n,t,r).pipe(K(function(e){var n;return(n={})[i]=e,n}))}var o={};return Z(l).pipe(X(function(l){return fd(e[l],n,t,r).pipe(K(function(e){return o[l]=e,e}))})).pipe(Aa(),K(function(){return o}))}(e._resolve,e,n,l).pipe(K(function(n){return e._resolvedData=n,e.data=i({},e.data,vh(e,r).resolve),null}))}(e.route,0,t,r)}),function(e,n){return arguments.length>=2?function(n){return I(Wa(e,void 0),ya(1),Ca(void 0))(n)}:function(n){return I(Wa(function(n,t,r){return e(n)}),ya(1))(n)}}(function(e,n){return e}),K(function(n){return e})):ta(e)}))}),Ka(function(e){var t=new vp(e.id,n.serializeUrl(e.extractedUrl),n.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);n.triggerEvent(t)}));var t,r}),gd(function(e){var t=e.extras;return n.hooks.afterPreactivation(e.targetSnapshot,{navigationId:e.id,appliedUrlTree:e.extractedUrl,rawUrlTree:e.rawUrl,skipLocationChange:!!t.skipLocationChange,replaceUrl:!!t.replaceUrl})}),K(function(e){var t,r,l,o=(l=function e(n,t,r){if(r&&n.shouldReuseRoute(t.value,r.value.snapshot)){(a=r.value)._futureSnapshot=t.value;var l=function(n,t,r){return t.children.map(function(t){var l,i;try{for(var o=s(r.children),u=o.next();!u.done;u=o.next()){var a=u.value;if(n.shouldReuseRoute(a.value.snapshot,t.value))return e(n,t,a)}}catch(c){l={error:c}}finally{try{u&&!u.done&&(i=o.return)&&i.call(o)}finally{if(l)throw l.error}}return e(n,t)})}(n,t,r);return new ph(a,l)}var i=n.retrieve(t.value);if(i){var o=i.route;return function e(n,t){if(n.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=n.value;for(var r=0;r<n.children.length;++r)e(n.children[r],t.children[r])}(t,o),o}var u,a=new gh(new ra((u=t.value).url),new ra(u.params),new ra(u.queryParams),new ra(u.fragment),new ra(u.data),u.outlet,u.component,u);return l=t.children.map(function(t){return e(n,t)}),new ph(a,l)}(n.routeReuseStrategy,(t=e.targetSnapshot)._root,(r=e.currentRouterState)?r._root:void 0),new dh(l,t));return i({},e,{targetRouterState:o})}),Ka(function(e){n.currentUrlTree=e.urlAfterRedirects,n.rawUrlTree=n.urlHandlingStrategy.merge(n.currentUrlTree,e.rawUrl),n.routerState=e.targetRouterState,"deferred"===n.urlUpdateStrategy&&(e.extras.skipLocationChange||n.setBrowserUrl(n.rawUrlTree,!!e.extras.replaceUrl,e.id,e.extras.state),n.browserUrlTree=e.urlAfterRedirects)}),(l=n.rootContexts,o=n.routeReuseStrategy,u=function(e){return n.triggerEvent(e)},K(function(e){return new kh(o,e.targetRouterState,e.currentRouterState,u).activate(l),e})),Ka({next:function(){a=!0},complete:function(){a=!0}}),(r=function(){if(!a&&!c){n.resetUrlToCurrentUrlTree();var r=new cp(e.id,n.serializeUrl(e.extractedUrl),"Navigation ID "+e.id+" is not equal to the current navigation id "+n.navigationId);t.next(r),e.resolve(!1)}n.currentNavigation=null},function(e){return e.lift(new Qa(r))}),wa(function(r){if(c=!0,(u=r)&&u[Ap]){var l=Fh(r.url);l||(n.navigated=!0,n.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl));var i=new cp(e.id,n.serializeUrl(e.extractedUrl),r.message);t.next(i),e.resolve(!1),l&&n.navigateByUrl(r.url)}else{n.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl);var o=new pp(e.id,n.serializeUrl(e.extractedUrl),r);t.next(o);try{e.resolve(n.errorHandler(r))}catch(s){e.reject(s)}}var u;return aa}))}))},e.prototype.resetRootComponentType=function(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType},e.prototype.getTransition=function(){return this.transitions.value},e.prototype.setTransition=function(e){this.transitions.next(i({},this.getTransition(),e))},e.prototype.initialNavigation=function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})},e.prototype.setUpLocationChangeListener=function(){var e=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe(function(n){var t=e.parseUrl(n.url),r="popstate"===n.type?"popstate":"hashchange",l=n.state&&n.state.navigationId?n.state:null;setTimeout(function(){e.scheduleNavigation(t,r,l,{replaceUrl:!0})},0)}))},Object.defineProperty(e.prototype,"url",{get:function(){return this.serializeUrl(this.currentUrlTree)},enumerable:!0,configurable:!0}),e.prototype.getCurrentNavigation=function(){return this.currentNavigation},e.prototype.triggerEvent=function(e){this.events.next(e)},e.prototype.resetConfig=function(e){Dp(e),this.config=e.map(Lp),this.navigated=!1,this.lastSuccessfulId=-1},e.prototype.ngOnDestroy=function(){this.dispose()},e.prototype.dispose=function(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)},e.prototype.createUrlTree=function(e,n){void 0===n&&(n={});var t=n.relativeTo,r=n.queryParams,l=n.fragment,o=n.preserveQueryParams,u=n.queryParamsHandling,s=n.preserveFragment;Wn()&&o&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");var a=t||this.routerState.root,p=s?this.currentUrlTree.fragment:l,h=null;if(u)switch(u){case"merge":h=i({},this.currentUrlTree.queryParams,r);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=r||null}else h=o?this.currentUrlTree.queryParams:r||null;return null!==h&&(h=this.removeEmptyProps(h)),function(e,n,t,r,l){if(0===t.length)return Th(n.root,n.root,n,r,l);var i=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new Ch(!0,0,e);var n=0,t=!1,r=e.reduce(function(e,r,l){if("object"==typeof r&&null!=r){if(r.outlets){var i={};return Hp(r.outlets,function(e,n){i[n]="string"==typeof e?e.split("/"):e}),c(e,[{outlets:i}])}if(r.segmentPath)return c(e,[r.segmentPath])}return"string"!=typeof r?c(e,[r]):0===l?(r.split("/").forEach(function(r,l){0==l&&"."===r||(0==l&&""===r?t=!0:".."===r?n++:""!=r&&e.push(r))}),e):c(e,[r])},[]);return new Ch(t,n,r)}(t);if(i.toRoot())return Th(n.root,new Wp([],{}),n,r,l);var o=function(e,t,r){if(e.isAbsolute)return new _h(n.root,!0,0);if(-1===r.snapshot._lastPathIndex)return new _h(r.snapshot._urlSegment,!0,0);var l=Rh(e.commands[0])?0:1;return function(n,t,i){for(var o=r.snapshot._urlSegment,u=r.snapshot._lastPathIndex+l,s=e.numberOfDoubleDots;s>u;){if(s-=u,!(o=o.parent))throw new Error("Invalid number of '../'");u=o.segments.length}return new _h(o,!1,u-s)}()}(i,0,e),u=o.processChildren?wh(o.segmentGroup,o.index,i.commands):Ah(o.segmentGroup,o.index,i.commands);return Th(o.segmentGroup,u,n,r,l)}(a,this.currentUrlTree,e,h,p)},e.prototype.navigateByUrl=function(e,n){void 0===n&&(n={skipLocationChange:!1}),Wn()&&this.isNgZoneEnabled&&!Zt.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");var t=Fh(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(t,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,n)},e.prototype.navigate=function(e,n){return void 0===n&&(n={skipLocationChange:!1}),function(e){for(var n=0;n<e.length;n++){var t=e[n];if(null==t)throw new Error("The requested path contains "+t+" segment at index "+n)}}(e),this.navigateByUrl(this.createUrlTree(e,n),n)},e.prototype.serializeUrl=function(e){return this.urlSerializer.serialize(e)},e.prototype.parseUrl=function(e){var n;try{n=this.urlSerializer.parse(e)}catch(t){n=this.malformedUriErrorHandler(t,this.urlSerializer,e)}return n},e.prototype.isActive=function(e,n){if(Fh(e))return Bp(this.currentUrlTree,e,n);var t=this.parseUrl(e);return Bp(this.currentUrlTree,t,n)},e.prototype.removeEmptyProps=function(e){return Object.keys(e).reduce(function(n,t){var r=e[t];return null!=r&&(n[t]=r),n},{})},e.prototype.processNavigations=function(){var e=this;this.navigations.subscribe(function(n){e.navigated=!0,e.lastSuccessfulId=n.id,e.events.next(new ap(n.id,e.serializeUrl(n.extractedUrl),e.serializeUrl(e.currentUrlTree))),e.lastSuccessfulNavigation=e.currentNavigation,e.currentNavigation=null,n.resolve(!0)},function(n){e.console.warn("Unhandled Navigation Error: ")})},e.prototype.scheduleNavigation=function(e,n,t,r){var l=this.getTransition();if(l&&"imperative"!==n&&"imperative"===l.source&&l.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(l&&"hashchange"==n&&"popstate"===l.source&&l.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(l&&"popstate"==n&&"hashchange"===l.source&&l.rawUrl.toString()===e.toString())return Promise.resolve(!0);var i=null,o=null,u=new Promise(function(e,n){i=e,o=n}),s=++this.navigationId;return this.setTransition({id:s,source:n,restoredState:t,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:r,resolve:i,reject:o,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(function(e){return Promise.reject(e)})},e.prototype.setBrowserUrl=function(e,n,t,r){var l=this.urlSerializer.serialize(e);r=r||{},this.location.isCurrentPathEqualTo(l)||n?this.location.replaceState(l,"",i({},r,{navigationId:t})):this.location.go(l,"",i({},r,{navigationId:t}))},e.prototype.resetStateAndUrl=function(e,n,t){this.routerState=e,this.currentUrlTree=n,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t),this.resetUrlToCurrentUrlTree()},e.prototype.resetUrlToCurrentUrlTree=function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})},e}(),_d=function(){function e(e,n,t){var r=this;this.router=e,this.route=n,this.locationStrategy=t,this.commands=[],this.subscription=e.events.subscribe(function(e){e instanceof ap&&r.updateTargetUrlAndHref()})}return Object.defineProperty(e.prototype,"routerLink",{set:function(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"preserveQueryParams",{set:function(e){Wn()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=e},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(e){this.updateTargetUrlAndHref()},e.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},e.prototype.onClick=function(e,n,t,r){if(0!==e||n||t||r)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;var l={skipLocationChange:Id(this.skipLocationChange),replaceUrl:Id(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,l),!1},e.prototype.updateTargetUrlAndHref=function(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))},Object.defineProperty(e.prototype,"urlTree",{get:function(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:Id(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:Id(this.preserveFragment)})},enumerable:!0,configurable:!0}),o([yt("attr.target"),mt(),u("design:type",String)],e.prototype,"target",void 0),e}();function Id(e){return""===e||!!e}var Ad=function(){function e(e,n,t,r){var l=this;this.router=e,this.element=n,this.renderer=t,this.cdr=r,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.subscription=e.events.subscribe(function(e){e instanceof ap&&l.update()})}return e.prototype.ngAfterContentInit=function(){var e=this;this.links.changes.subscribe(function(n){return e.update()}),this.linksWithHrefs.changes.subscribe(function(n){return e.update()}),this.update()},Object.defineProperty(e.prototype,"routerLinkActive",{set:function(e){var n=Array.isArray(e)?e:e.split(" ");this.classes=n.filter(function(e){return!!e})},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(e){this.update()},e.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},e.prototype.update=function(){var e=this;this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(function(){var n=e.hasActiveLinks();e.isActive!==n&&(e.isActive=n,e.classes.forEach(function(t){n?e.renderer.addClass(e.element.nativeElement,t):e.renderer.removeClass(e.element.nativeElement,t)}))})},e.prototype.isLinkActive=function(e){var n=this;return function(t){return e.isActive(t.urlTree,n.routerLinkActiveOptions.exact)}},e.prototype.hasActiveLinks=function(){return this.links.some(this.isLinkActive(this.router))||this.linksWithHrefs.some(this.isLinkActive(this.router))},e}(),wd=function(){return function(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Nd,this.attachRef=null}}(),Nd=function(){function e(){this.contexts=new Map}return e.prototype.onChildOutletCreated=function(e,n){var t=this.getOrCreateContext(e);t.outlet=n,this.contexts.set(e,t)},e.prototype.onChildOutletDestroyed=function(e){var n=this.getContext(e);n&&(n.outlet=null)},e.prototype.onOutletDeactivated=function(){var e=this.contexts;return this.contexts=new Map,e},e.prototype.onOutletReAttached=function(e){this.contexts=e},e.prototype.getOrCreateContext=function(e){var n=this.getContext(e);return n||(n=new wd,this.contexts.set(e,n)),n},e.prototype.getContext=function(e){return this.contexts.get(e)||null},e}(),Pd=function(){function e(e,n,t,r,l){this.parentContexts=e,this.location=n,this.resolver=t,this.changeDetector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new pt,this.deactivateEvents=new pt,this.name=r||Cp,e.onChildOutletCreated(this.name,this)}return e.prototype.ngOnDestroy=function(){this.parentContexts.onChildOutletDestroyed(this.name)},e.prototype.ngOnInit=function(){if(!this.activated){var e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}},Object.defineProperty(e.prototype,"isActivated",{get:function(){return!!this.activated},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"component",{get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activatedRoute",{get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activatedRouteData",{get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}},enumerable:!0,configurable:!0}),e.prototype.detach=function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var e=this.activated;return this.activated=null,this._activatedRoute=null,e},e.prototype.attach=function(e,n){this.activated=e,this._activatedRoute=n,this.location.insert(e.hostView)},e.prototype.deactivate=function(){if(this.activated){var e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}},e.prototype.activateWith=function(e,n){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;var t=(n=n||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,l=new Dd(e,r,this.location.injector);this.activated=this.location.createComponent(t,this.location.length,l),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)},e}(),Dd=function(){function e(e,n,t){this.route=e,this.childContexts=n,this.parent=t}return e.prototype.get=function(e,n){return e===gh?this.route:e===Nd?this.childContexts:this.parent.get(e,n)},e}(),Md=function(){return function(){}}(),kd=function(){function e(){}return e.prototype.preload=function(e,n){return n().pipe(wa(function(){return ta(null)}))},e}(),Ld=function(){function e(){}return e.prototype.preload=function(e,n){return ta(null)},e}(),xd=function(){function e(e,n,t,r,l){this.router=e,this.injector=r,this.preloadingStrategy=l,this.loader=new Sd(n,t,function(n){return e.triggerEvent(new mp(n))},function(n){return e.triggerEvent(new yp(n))})}return e.prototype.setUpPreloading=function(){var e=this;this.subscription=this.router.events.pipe(da(function(e){return e instanceof ap}),za(function(){return e.preload()})).subscribe(function(){})},e.prototype.preload=function(){var e=this.injector.get(wn);return this.processRoutes(e,this.router.config)},e.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},e.prototype.processRoutes=function(e,n){var t,r,l=[];try{for(var i=s(n),o=i.next();!o.done;o=i.next()){var u=o.value;if(u.loadChildren&&!u.canLoad&&u._loadedConfig){var a=u._loadedConfig;l.push(this.processRoutes(a.module,a.routes))}else u.loadChildren&&!u.canLoad?l.push(this.preloadConfig(e,u)):u.children&&l.push(this.processRoutes(e,u.children))}}catch(c){t={error:c}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return Z(l).pipe(te(),K(function(e){}))},e.prototype.preloadConfig=function(e,n){var t=this;return this.preloadingStrategy.preload(n,function(){return t.loader.load(e.injector,n).pipe(X(function(e){return n._loadedConfig=e,t.processRoutes(e.module,e.routes)}))})},e}(),Fd=function(){function e(e,n,t){void 0===t&&(t={}),this.router=e,this.viewportScroller=n,this.options=t,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},t.scrollPositionRestoration=t.scrollPositionRestoration||"disabled",t.anchorScrolling=t.anchorScrolling||"disabled"}return e.prototype.init=function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()},e.prototype.createScrollEvents=function(){var e=this;return this.router.events.subscribe(function(n){n instanceof sp?(e.store[e.lastId]=e.viewportScroller.getScrollPosition(),e.lastSource=n.navigationTrigger,e.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof ap&&(e.lastId=n.id,e.scheduleScrollEvent(n,e.router.parseUrl(n.urlAfterRedirects).fragment))})},e.prototype.consumeScrollEvents=function(){var e=this;return this.router.events.subscribe(function(n){n instanceof Rp&&(n.position?"top"===e.options.scrollPositionRestoration?e.viewportScroller.scrollToPosition([0,0]):"enabled"===e.options.scrollPositionRestoration&&e.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===e.options.anchorScrolling?e.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==e.options.scrollPositionRestoration&&e.viewportScroller.scrollToPosition([0,0]))})},e.prototype.scheduleScrollEvent=function(e,n){this.router.triggerEvent(new Rp(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,n))},e.prototype.ngOnDestroy=function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()},e}(),Ud=new ye("ROUTER_CONFIGURATION"),Hd=new ye("ROUTER_FORROOT_GUARD"),Gd=[vs,{provide:Kp,useClass:qp},{provide:Cd,useFactory:Kd,deps:[fr,Kp,Nd,vs,on,vt,jt,yd,Ud,[Ed,new Ge],[vd,new Ge]]},Nd,{provide:gh,useFactory:qd,deps:[Cd]},{provide:vt,useClass:Sr},xd,Ld,kd,{provide:Ud,useValue:{enableTracing:!1}}];function Bd(){return new ar("Router",Cd)}var Vd=function(){function e(e,n){}var n;return n=e,e.forRoot=function(e,t){return{ngModule:n,providers:[Gd,zd(e),{provide:Hd,useFactory:Yd,deps:[[Cd,new Ge,new Ve]]},{provide:Ud,useValue:t||{}},{provide:fs,useFactory:jd,deps:[hs,[new He(gs),new Ge],Ud]},{provide:Fd,useFactory:Wd,deps:[Cd,ea,Ud]},{provide:Md,useExisting:t&&t.preloadingStrategy?t.preloadingStrategy:Ld},{provide:ar,multi:!0,useFactory:Bd},[$d,{provide:At,multi:!0,useFactory:Qd,deps:[$d]},{provide:Xd,useFactory:Zd,deps:[$d]},{provide:Lt,multi:!0,useExisting:Xd}]]}},e.forChild=function(e){return{ngModule:n,providers:[zd(e)]}},e}();function Wd(e,n,t){return t.scrollOffset&&n.setOffset(t.scrollOffset),new Fd(e,n,t)}function jd(e,n,t){return void 0===t&&(t={}),t.useHash?new ys(e,n):new Ss(e,n)}function Yd(e){if(e)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function zd(e){return[{provide:Te,multi:!0,useValue:e},{provide:yd,multi:!0,useValue:e}]}function Kd(e,n,t,r,l,i,o,u,s,a,c){void 0===s&&(s={});var p=new Cd(null,n,t,r,l,i,o,Fp(u));if(a&&(p.urlHandlingStrategy=a),c&&(p.routeReuseStrategy=c),s.errorHandler&&(p.errorHandler=s.errorHandler),s.malformedUriErrorHandler&&(p.malformedUriErrorHandler=s.malformedUriErrorHandler),s.enableTracing){var h=Ja();p.events.subscribe(function(e){h.logGroup("Router Event: "+e.constructor.name),h.log(e.toString()),h.log(e),h.logGroupEnd()})}return s.onSameUrlNavigation&&(p.onSameUrlNavigation=s.onSameUrlNavigation),s.paramsInheritanceStrategy&&(p.paramsInheritanceStrategy=s.paramsInheritanceStrategy),s.urlUpdateStrategy&&(p.urlUpdateStrategy=s.urlUpdateStrategy),s.relativeLinkResolution&&(p.relativeLinkResolution=s.relativeLinkResolution),p}function qd(e){return e.routerState.root}var $d=function(){function e(e){this.injector=e,this.initNavigation=!1,this.resultOfPreactivationDone=new L}return e.prototype.appInitializer=function(){var e=this;return this.injector.get(ds,Promise.resolve(null)).then(function(){var n=null,t=new Promise(function(e){return n=e}),r=e.injector.get(Cd),l=e.injector.get(Ud);if(e.isLegacyDisabled(l)||e.isLegacyEnabled(l))n(!0);else if("disabled"===l.initialNavigation)r.setUpLocationChangeListener(),n(!0);else{if("enabled"!==l.initialNavigation)throw new Error("Invalid initialNavigation options: '"+l.initialNavigation+"'");r.hooks.afterPreactivation=function(){return e.initNavigation?ta(null):(e.initNavigation=!0,n(!0),e.resultOfPreactivationDone)},r.initialNavigation()}return t})},e.prototype.bootstrapListener=function(e){var n=this.injector.get(Ud),t=this.injector.get(xd),r=this.injector.get(Fd),l=this.injector.get(Cd),i=this.injector.get(fr);e===i.components[0]&&(this.isLegacyEnabled(n)?l.initialNavigation():this.isLegacyDisabled(n)&&l.setUpLocationChangeListener(),t.setUpPreloading(),r.init(),l.resetRootComponentType(i.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())},e.prototype.isLegacyEnabled=function(e){return"legacy_enabled"===e.initialNavigation||!0===e.initialNavigation||void 0===e.initialNavigation},e.prototype.isLegacyDisabled=function(e){return"legacy_disabled"===e.initialNavigation||!1===e.initialNavigation},e}();function Qd(e){return e.appInitializer.bind(e)}function Zd(e){return e.bootstrapListener.bind(e)}var Xd=new ye("Router Initializer"),Jd=gl({encapsulation:2,styles:[],data:{}});function ef(e){return so(0,[(e()(),Yl(0,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),Mi(1,212992,null,0,Pd,[Nd,br,_n,[8,null],Rr],null,null)],function(e,n){e(n,1,0)},null)}function nf(e){return so(0,[(e()(),Yl(0,0,null,null,1,"ng-component",[],null,null,null,ef,Jd)),Mi(1,49152,null,0,Tp,[],null,null)],null,null)}var tf=ai("ng-component",Tp,nf,{},{},[]),rf=function(){function e(e){this.router=e}return e.prototype.ngOnInit=function(){},e.prototype.goToVillage=function(){this.router.navigate(["/village"])},e}(),lf=gl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{margin:10px;font-size:4vw;text-align:center}button[_ngcontent-%COMP%]{font-size:1.5vw}"]],data:{}});function of(e){return so(0,[(e()(),Yl(0,0,null,null,4,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),io(-1,null,[" Page not found "])),(e()(),Yl(2,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(3,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.goToVillage()&&r),r},null,null)),(e()(),io(-1,null,["Village"]))],null,null)}function uf(e){return so(0,[(e()(),Yl(0,0,null,null,1,"app-not-found",[],null,null,null,of,lf)),Mi(1,114688,null,0,rf,[Cd],null,null)],function(e,n){e(n,1,0)},null)}var sf=ai("app-not-found",rf,uf,{},{},[]),af=function(){function e(){}return e.prototype.onmousemove=function(e){var n=document.getElementById(this.elementId);if(n){var t=e.clientX;n.style.top=e.clientY+20+"px",n.style.left=t+20+"px"}},e}(),cf=function(){function e(){this.margin="0"}return e.prototype.ngOnInit=function(){},e.prototype.getTitle=function(){return""===this.title?"":this.title?this.title:"Food"===this.name?"Food nutrition":Au.titleCase(this.name).replace("_"," ")},e.prototype.getPath=function(){var e="assets/";return this.path&&(e+=this.path+"/"),e},e}(),pf=gl({encapsulation:0,styles:[["[_nghost-%COMP%]{display:inline-block;vertical-align:middle;height:24px}#wrapper[_ngcontent-%COMP%]{display:inline-block;height:24px;margin:0;padding:0}img[_ngcontent-%COMP%]{display:inline-block;margin:0;padding:0;height:24px;width:24px}"]],data:{}});function hf(e){return so(0,[(e()(),Yl(0,0,null,null,3,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Yl(1,0,null,null,2,"img",[["class","resourceIcon"],["draggable","false"],["onerror","if (this.src !== 'assets/question_mark.svg') this.src = 'assets/question_mark.svg';"]],[[8,"src",4],[8,"title",0],[8,"alt",0]],null,null,null,null)),Mi(2,278528,null,0,Ws,[Vr,Pn,xn],{ngStyle:[0,"ngStyle"]},null),ro(3,{margin:0})],function(e,n){var t=e(n,3,0,n.component.margin);e(n,2,0,t)},function(e,n){var t=n.component;e(n,1,0,Vl(1,"",t.getPath()+t.name.replace(" ","_").toLowerCase(),".svg"),Vl(1,"",t.getTitle(),""),Vl(1,"",t.name,""))})}function df(e,n){return new w(function(t){var r=e.length;if(0!==r)for(var l=new Array(r),i=0,o=0,u=function(u){var s=Z(e[u]),a=!1;t.add(s.subscribe({next:function(e){a||(a=!0,o++),l[u]=e},error:function(e){return t.error(e)},complete:function(){++i!==r&&a||(o===r&&t.next(n?n.reduce(function(e,n,t){return e[n]=l[t],e},{}):l),t.complete())}}))},s=0;s<r;s++)u(s);else t.complete()})}var ff=function(){function e(){}return Object.defineProperty(e.prototype,"value",{get:function(){return this.control?this.control.value:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valid",{get:function(){return this.control?this.control.valid:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"invalid",{get:function(){return this.control?this.control.invalid:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pending",{get:function(){return this.control?this.control.pending:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this.control?this.control.disabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this.control?this.control.enabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errors",{get:function(){return this.control?this.control.errors:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pristine",{get:function(){return this.control?this.control.pristine:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dirty",{get:function(){return this.control?this.control.dirty:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"touched",{get:function(){return this.control?this.control.touched:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){return this.control?this.control.status:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"untouched",{get:function(){return this.control?this.control.untouched:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"statusChanges",{get:function(){return this.control?this.control.statusChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueChanges",{get:function(){return this.control?this.control.valueChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),e.prototype.reset=function(e){void 0===e&&(e=void 0),this.control&&this.control.reset(e)},e.prototype.hasError=function(e,n){return!!this.control&&this.control.hasError(e,n)},e.prototype.getError=function(e,n){return this.control?this.control.getError(e,n):null},e}(),gf=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),Object.defineProperty(n.prototype,"formDirective",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),n}(ff);function vf(e){return null==e||0===e.length}var mf=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,yf=function(){function e(){}return e.min=function(e){return function(n){if(vf(n.value)||vf(e))return null;var t=parseFloat(n.value);return!isNaN(t)&&t<e?{min:{min:e,actual:n.value}}:null}},e.max=function(e){return function(n){if(vf(n.value)||vf(e))return null;var t=parseFloat(n.value);return!isNaN(t)&&t>e?{max:{max:e,actual:n.value}}:null}},e.required=function(e){return vf(e.value)?{required:!0}:null},e.requiredTrue=function(e){return!0===e.value?null:{required:!0}},e.email=function(e){return vf(e.value)?null:mf.test(e.value)?null:{email:!0}},e.minLength=function(e){return function(n){if(vf(n.value))return null;var t=n.value?n.value.length:0;return t<e?{minlength:{requiredLength:e,actualLength:t}}:null}},e.maxLength=function(e){return function(n){var t=n.value?n.value.length:0;return t>e?{maxlength:{requiredLength:e,actualLength:t}}:null}},e.pattern=function(n){return n?("string"==typeof n?(r="","^"!==n.charAt(0)&&(r+="^"),r+=n,"$"!==n.charAt(n.length-1)&&(r+="$"),t=new RegExp(r)):(r=n.toString(),t=n),function(e){if(vf(e.value))return null;var n=e.value;return t.test(n)?null:{pattern:{requiredPattern:r,actualValue:n}}}):e.nullValidator;var t,r},e.nullValidator=function(e){return null},e.compose=function(e){if(!e)return null;var n=e.filter(Sf);return 0==n.length?null:function(e){return bf(function(e,t){return n.map(function(n){return n(e)})}(e))}},e.composeAsync=function(e){if(!e)return null;var n=e.filter(Sf);return 0==n.length?null:function(e){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(1===e.length){var t=e[0];if(p(t))return df(t,null);if(h(t)&&Object.getPrototypeOf(t)===Object.prototype){var r=Object.keys(t);return df(r.map(function(e){return t[e]}),r)}}if("function"==typeof e[e.length-1]){var l=e.pop();return df(e=1===e.length&&p(e[0])?e[0]:e,null).pipe(K(function(e){return l.apply(void 0,e)}))}return df(e,null)}(function(e,t){return n.map(function(n){return n(e)})}(e).map(Ef)).pipe(K(bf))}},e}();function Sf(e){return null!=e}function Ef(e){var n=_t(e)?Z(e):e;if(!It(n))throw new Error("Expected validator to return Promise or Observable.");return n}function bf(e){var n=e.reduce(function(e,n){return null!=n?i({},e,n):e},{});return 0===Object.keys(n).length?null:n}var Of=new ye("NgValueAccessor"),Rf=function(){function e(e,n){this._renderer=e,this._elementRef=n,this.onChange=function(e){},this.onTouched=function(){}}return e.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e}(),Tf=new ye("CompositionEventMode"),Cf=function(){function e(e,n,t){var r;this._renderer=e,this._elementRef=n,this._compositionMode=t,this.onChange=function(e){},this.onTouched=function(){},this._composing=!1,null==this._compositionMode&&(this._compositionMode=(r=Ja()?Ja().getUserAgent():"",!/android (\d+)/.test(r.toLowerCase())))}return e.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e.prototype._handleInput=function(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)},e.prototype._compositionStart=function(){this._composing=!0},e.prototype._compositionEnd=function(e){this._composing=!1,this._compositionMode&&this.onChange(e)},e}();function _f(e){return e.validate?function(n){return e.validate(n)}:e}function If(e){return e.validate?function(n){return e.validate(n)}:e}var Af=function(){function e(e,n){this._renderer=e,this._elementRef=n,this.onChange=function(e){},this.onTouched=function(){}}return e.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)},e.prototype.registerOnChange=function(e){this.onChange=function(n){e(""==n?null:parseFloat(n))}},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e}();function wf(){throw new Error("unimplemented")}var Nf=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n._parent=null,n.name=null,n.valueAccessor=null,n._rawValidators=[],n._rawAsyncValidators=[],n}return l(n,e),Object.defineProperty(n.prototype,"validator",{get:function(){return wf()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"asyncValidator",{get:function(){return wf()},enumerable:!0,configurable:!0}),n}(ff),Pf=function(){function e(){this._accessors=[]}return e.prototype.add=function(e,n){this._accessors.push([e,n])},e.prototype.remove=function(e){for(var n=this._accessors.length-1;n>=0;--n)if(this._accessors[n][1]===e)return void this._accessors.splice(n,1)},e.prototype.select=function(e){var n=this;this._accessors.forEach(function(t){n._isSameGroup(t,e)&&t[1]!==e&&t[1].fireUncheck(e.value)})},e.prototype._isSameGroup=function(e,n){return!!e[0].control&&e[0]._parent===n._control._parent&&e[1].name===n.name},e}(),Df=function(){function e(e,n,t,r){this._renderer=e,this._elementRef=n,this._registry=t,this._injector=r,this.onChange=function(){},this.onTouched=function(){}}return e.prototype.ngOnInit=function(){this._control=this._injector.get(Nf),this._checkName(),this._registry.add(this._control,this)},e.prototype.ngOnDestroy=function(){this._registry.remove(this)},e.prototype.writeValue=function(e){this._state=e===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)},e.prototype.registerOnChange=function(e){var n=this;this._fn=e,this.onChange=function(){e(n.value),n._registry.select(n)}},e.prototype.fireUncheck=function(e){this.writeValue(e)},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e.prototype._checkName=function(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)},e.prototype._throwNameError=function(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')},e}(),Mf=function(){function e(e,n){this._renderer=e,this._elementRef=n,this.onChange=function(e){},this.onTouched=function(){}}return e.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(e))},e.prototype.registerOnChange=function(e){this.onChange=function(n){e(""==n?null:parseFloat(n))}},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e}(),kf='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',Lf='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>';function xf(e,n){return null==e?""+n:(n&&"object"==typeof n&&(n="Object"),(e+": "+n).slice(0,50))}var Ff=function(){function e(e,n){this._renderer=e,this._elementRef=n,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=De}return Object.defineProperty(e.prototype,"compareWith",{set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e},enumerable:!0,configurable:!0}),e.prototype.writeValue=function(e){this.value=e;var n=this._getOptionId(e);null==n&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);var t=xf(n,e);this._renderer.setProperty(this._elementRef.nativeElement,"value",t)},e.prototype.registerOnChange=function(e){var n=this;this.onChange=function(t){n.value=n._getOptionValue(t),e(n.value)}},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e.prototype._registerOption=function(){return(this._idCounter++).toString()},e.prototype._getOptionId=function(e){var n,t;try{for(var r=s(Array.from(this._optionMap.keys())),l=r.next();!l.done;l=r.next()){var i=l.value;if(this._compareWith(this._optionMap.get(i),e))return i}}catch(o){n={error:o}}finally{try{l&&!l.done&&(t=r.return)&&t.call(r)}finally{if(n)throw n.error}}return null},e.prototype._getOptionValue=function(e){var n=function(e){return e.split(":")[0]}(e);return this._optionMap.has(n)?this._optionMap.get(n):e},e}(),Uf=function(){function e(e,n,t){this._element=e,this._renderer=n,this._select=t,this._select&&(this.id=this._select._registerOption())}return Object.defineProperty(e.prototype,"ngValue",{set:function(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(xf(this.id,e)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{set:function(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)},enumerable:!0,configurable:!0}),e.prototype._setElementValue=function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)},e.prototype.ngOnDestroy=function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},e}();function Hf(e,n){return null==e?""+n:("string"==typeof n&&(n="'"+n+"'"),n&&"object"==typeof n&&(n="Object"),(e+": "+n).slice(0,50))}var Gf=function(){function e(e,n){this._renderer=e,this._elementRef=n,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=De}return Object.defineProperty(e.prototype,"compareWith",{set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e},enumerable:!0,configurable:!0}),e.prototype.writeValue=function(e){var n,t=this;if(this.value=e,Array.isArray(e)){var r=e.map(function(e){return t._getOptionId(e)});n=function(e,n){e._setSelected(r.indexOf(n.toString())>-1)}}else n=function(e,n){e._setSelected(!1)};this._optionMap.forEach(n)},e.prototype.registerOnChange=function(e){var n=this;this.onChange=function(t){var r=[];if(t.hasOwnProperty("selectedOptions"))for(var l=t.selectedOptions,i=0;i<l.length;i++){var o=l.item(i),u=n._getOptionValue(o.value);r.push(u)}else for(l=t.options,i=0;i<l.length;i++)(o=l.item(i)).selected&&(u=n._getOptionValue(o.value),r.push(u));n.value=r,e(r)}},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e.prototype._registerOption=function(e){var n=(this._idCounter++).toString();return this._optionMap.set(n,e),n},e.prototype._getOptionId=function(e){var n,t;try{for(var r=s(Array.from(this._optionMap.keys())),l=r.next();!l.done;l=r.next()){var i=l.value;if(this._compareWith(this._optionMap.get(i)._value,e))return i}}catch(o){n={error:o}}finally{try{l&&!l.done&&(t=r.return)&&t.call(r)}finally{if(n)throw n.error}}return null},e.prototype._getOptionValue=function(e){var n=function(e){return e.split(":")[0]}(e);return this._optionMap.has(n)?this._optionMap.get(n)._value:e},e}(),Bf=function(){function e(e,n,t){this._element=e,this._renderer=n,this._select=t,this._select&&(this.id=this._select._registerOption(this))}return Object.defineProperty(e.prototype,"ngValue",{set:function(e){null!=this._select&&(this._value=e,this._setElementValue(Hf(this.id,e)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{set:function(e){this._select?(this._value=e,this._setElementValue(Hf(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)},enumerable:!0,configurable:!0}),e.prototype._setElementValue=function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)},e.prototype._setSelected=function(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)},e.prototype.ngOnDestroy=function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},e}();function Vf(e,n){return c(n.path,[e])}function Wf(e,n){e||Yf(n,"Cannot find control with"),n.valueAccessor||Yf(n,"No value accessor for form control with"),e.validator=yf.compose([e.validator,n.validator]),e.asyncValidator=yf.composeAsync([e.asyncValidator,n.asyncValidator]),n.valueAccessor.writeValue(e.value),function(e,n){n.valueAccessor.registerOnChange(function(t){e._pendingValue=t,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&jf(e,n)})}(e,n),function(e,n){e.registerOnChange(function(e,t){n.valueAccessor.writeValue(e),t&&n.viewToModelUpdate(e)})}(e,n),function(e,n){n.valueAccessor.registerOnTouched(function(){e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&jf(e,n),"submit"!==e.updateOn&&e.markAsTouched()})}(e,n),n.valueAccessor.setDisabledState&&e.registerOnDisabledChange(function(e){n.valueAccessor.setDisabledState(e)}),n._rawValidators.forEach(function(n){n.registerOnValidatorChange&&n.registerOnValidatorChange(function(){return e.updateValueAndValidity()})}),n._rawAsyncValidators.forEach(function(n){n.registerOnValidatorChange&&n.registerOnValidatorChange(function(){return e.updateValueAndValidity()})})}function jf(e,n){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function Yf(e,n){var t;throw t=e.path.length>1?"path: '"+e.path.join(" -> ")+"'":e.path[0]?"name: '"+e.path+"'":"unspecified name attribute",new Error(n+" "+t)}function zf(e){return null!=e?yf.compose(e.map(_f)):null}function Kf(e){return null!=e?yf.composeAsync(e.map(If)):null}var qf=[Rf,Mf,Af,Ff,Gf,Df],$f=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormGroup(this)},n.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeFormGroup(this)},Object.defineProperty(n.prototype,"control",{get:function(){return this.formDirective.getFormGroup(this)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"path",{get:function(){return Vf(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"validator",{get:function(){return zf(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"asyncValidator",{get:function(){return Kf(this._asyncValidators)},enumerable:!0,configurable:!0}),n.prototype._checkParentType=function(){},n}(gf),Qf=function(e){function n(n){return e.call(this,n)||this}return l(n,e),n}(function(){function e(e){this._cd=e}return Object.defineProperty(e.prototype,"ngClassUntouched",{get:function(){return!!this._cd.control&&this._cd.control.untouched},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassTouched",{get:function(){return!!this._cd.control&&this._cd.control.touched},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassPristine",{get:function(){return!!this._cd.control&&this._cd.control.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassDirty",{get:function(){return!!this._cd.control&&this._cd.control.dirty},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassValid",{get:function(){return!!this._cd.control&&this._cd.control.valid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassInvalid",{get:function(){return!!this._cd.control&&this._cd.control.invalid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassPending",{get:function(){return!!this._cd.control&&this._cd.control.pending},enumerable:!0,configurable:!0}),e}());function Zf(e){var n=Jf(e)?e.validators:e;return Array.isArray(n)?zf(n):n||null}function Xf(e,n){var t=Jf(n)?n.asyncValidators:e;return Array.isArray(t)?Kf(t):t||null}function Jf(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}var eg,ng=function(){function e(e,n){this.validator=e,this.asyncValidator=n,this._onCollectionChange=function(){},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}return Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valid",{get:function(){return"VALID"===this.status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"invalid",{get:function(){return"INVALID"===this.status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pending",{get:function(){return"PENDING"==this.status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return"DISABLED"===this.status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return"DISABLED"!==this.status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dirty",{get:function(){return!this.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"untouched",{get:function(){return!this.touched},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"updateOn",{get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"},enumerable:!0,configurable:!0}),e.prototype.setValidators=function(e){this.validator=Zf(e)},e.prototype.setAsyncValidators=function(e){this.asyncValidator=Xf(e)},e.prototype.clearValidators=function(){this.validator=null},e.prototype.clearAsyncValidators=function(){this.asyncValidator=null},e.prototype.markAsTouched=function(e){void 0===e&&(e={}),this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)},e.prototype.markAsUntouched=function(e){void 0===e&&(e={}),this.touched=!1,this._pendingTouched=!1,this._forEachChild(function(e){e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)},e.prototype.markAsDirty=function(e){void 0===e&&(e={}),this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)},e.prototype.markAsPristine=function(e){void 0===e&&(e={}),this.pristine=!0,this._pendingDirty=!1,this._forEachChild(function(e){e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)},e.prototype.markAsPending=function(e){void 0===e&&(e={}),this.status="PENDING",!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)},e.prototype.disable=function(e){void 0===e&&(e={}),this.status="DISABLED",this.errors=null,this._forEachChild(function(n){n.disable(i({},e,{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(e),this._onDisabledChange.forEach(function(e){return e(!0)})},e.prototype.enable=function(e){void 0===e&&(e={}),this.status="VALID",this._forEachChild(function(n){n.enable(i({},e,{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(e),this._onDisabledChange.forEach(function(e){return e(!1)})},e.prototype._updateAncestors=function(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),this._parent._updatePristine(),this._parent._updateTouched())},e.prototype.setParent=function(e){this._parent=e},e.prototype.updateValueAndValidity=function(e){void 0===e&&(e={}),this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)},e.prototype._updateTreeValidity=function(e){void 0===e&&(e={emitEvent:!0}),this._forEachChild(function(n){return n._updateTreeValidity(e)}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})},e.prototype._setInitialStatus=function(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"},e.prototype._runValidator=function(){return this.validator?this.validator(this):null},e.prototype._runAsyncValidator=function(e){var n=this;if(this.asyncValidator){this.status="PENDING";var t=Ef(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(function(t){return n.setErrors(t,{emitEvent:e})})}},e.prototype._cancelExistingSubscription=function(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()},e.prototype.setErrors=function(e,n){void 0===n&&(n={}),this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)},e.prototype.get=function(e){return function(e,n,t){return null==n?null:(n instanceof Array||(n=n.split(".")),n instanceof Array&&0===n.length?null:n.reduce(function(e,n){return e instanceof rg?e.controls.hasOwnProperty(n)?e.controls[n]:null:e instanceof lg&&e.at(n)||null},e))}(this,e)},e.prototype.getError=function(e,n){var t=n?this.get(n):this;return t&&t.errors?t.errors[e]:null},e.prototype.hasError=function(e,n){return!!this.getError(e,n)},Object.defineProperty(e.prototype,"root",{get:function(){for(var e=this;e._parent;)e=e._parent;return e},enumerable:!0,configurable:!0}),e.prototype._updateControlsErrors=function(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)},e.prototype._initObservables=function(){this.valueChanges=new pt,this.statusChanges=new pt},e.prototype._calculateStatus=function(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"},e.prototype._anyControlsHaveStatus=function(e){return this._anyControls(function(n){return n.status===e})},e.prototype._anyControlsDirty=function(){return this._anyControls(function(e){return e.dirty})},e.prototype._anyControlsTouched=function(){return this._anyControls(function(e){return e.touched})},e.prototype._updatePristine=function(e){void 0===e&&(e={}),this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)},e.prototype._updateTouched=function(e){void 0===e&&(e={}),this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)},e.prototype._isBoxedValue=function(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e},e.prototype._registerOnCollectionChange=function(e){this._onCollectionChange=e},e.prototype._setUpdateStrategy=function(e){Jf(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)},e}(),tg=function(e){function n(n,t,r){void 0===n&&(n=null);var l=e.call(this,Zf(t),Xf(r,t))||this;return l._onChange=[],l._applyFormState(n),l._setUpdateStrategy(t),l.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),l._initObservables(),l}return l(n,e),n.prototype.setValue=function(e,n){var t=this;void 0===n&&(n={}),this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(function(e){return e(t.value,!1!==n.emitViewToModelChange)}),this.updateValueAndValidity(n)},n.prototype.patchValue=function(e,n){void 0===n&&(n={}),this.setValue(e,n)},n.prototype.reset=function(e,n){void 0===e&&(e=null),void 0===n&&(n={}),this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1},n.prototype._updateValue=function(){},n.prototype._anyControls=function(e){return!1},n.prototype._allControlsDisabled=function(){return this.disabled},n.prototype.registerOnChange=function(e){this._onChange.push(e)},n.prototype._clearChangeFns=function(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=function(){}},n.prototype.registerOnDisabledChange=function(e){this._onDisabledChange.push(e)},n.prototype._forEachChild=function(e){},n.prototype._syncPendingControls=function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))},n.prototype._applyFormState=function(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e},n}(ng),rg=function(e){function n(n,t,r){var l=e.call(this,Zf(t),Xf(r,t))||this;return l.controls=n,l._initObservables(),l._setUpdateStrategy(t),l._setUpControls(),l.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),l}return l(n,e),n.prototype.registerControl=function(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)},n.prototype.addControl=function(e,n){this.registerControl(e,n),this.updateValueAndValidity(),this._onCollectionChange()},n.prototype.removeControl=function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()},n.prototype.setControl=function(e,n){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity(),this._onCollectionChange()},n.prototype.contains=function(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled},n.prototype.setValue=function(e,n){var t=this;void 0===n&&(n={}),this._checkAllValuesPresent(e),Object.keys(e).forEach(function(r){t._throwIfControlMissing(r),t.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},n.prototype.patchValue=function(e,n){var t=this;void 0===n&&(n={}),Object.keys(e).forEach(function(r){t.controls[r]&&t.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},n.prototype.reset=function(e,n){void 0===e&&(e={}),void 0===n&&(n={}),this._forEachChild(function(t,r){t.reset(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n),this._updatePristine(n),this._updateTouched(n)},n.prototype.getRawValue=function(){return this._reduceChildren({},function(e,n,t){return e[t]=n instanceof tg?n.value:n.getRawValue(),e})},n.prototype._syncPendingControls=function(){var e=this._reduceChildren(!1,function(e,n){return!!n._syncPendingControls()||e});return e&&this.updateValueAndValidity({onlySelf:!0}),e},n.prototype._throwIfControlMissing=function(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error("Cannot find form control with name: "+e+".")},n.prototype._forEachChild=function(e){var n=this;Object.keys(this.controls).forEach(function(t){return e(n.controls[t],t)})},n.prototype._setUpControls=function(){var e=this;this._forEachChild(function(n){n.setParent(e),n._registerOnCollectionChange(e._onCollectionChange)})},n.prototype._updateValue=function(){this.value=this._reduceValue()},n.prototype._anyControls=function(e){var n=this,t=!1;return this._forEachChild(function(r,l){t=t||n.contains(l)&&e(r)}),t},n.prototype._reduceValue=function(){var e=this;return this._reduceChildren({},function(n,t,r){return(t.enabled||e.disabled)&&(n[r]=t.value),n})},n.prototype._reduceChildren=function(e,n){var t=e;return this._forEachChild(function(e,r){t=n(t,e,r)}),t},n.prototype._allControlsDisabled=function(){var e,n;try{for(var t=s(Object.keys(this.controls)),r=t.next();!r.done;r=t.next())if(this.controls[r.value].enabled)return!1}catch(l){e={error:l}}finally{try{r&&!r.done&&(n=t.return)&&n.call(t)}finally{if(e)throw e.error}}return Object.keys(this.controls).length>0||this.disabled},n.prototype._checkAllValuesPresent=function(e){this._forEachChild(function(n,t){if(void 0===e[t])throw new Error("Must supply a value for form control with name: '"+t+"'.")})},n}(ng),lg=function(e){function n(n,t,r){var l=e.call(this,Zf(t),Xf(r,t))||this;return l.controls=n,l._initObservables(),l._setUpdateStrategy(t),l._setUpControls(),l.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),l}return l(n,e),n.prototype.at=function(e){return this.controls[e]},n.prototype.push=function(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()},n.prototype.insert=function(e,n){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity()},n.prototype.removeAt=function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),this.updateValueAndValidity()},n.prototype.setControl=function(e,n){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),n&&(this.controls.splice(e,0,n),this._registerControl(n)),this.updateValueAndValidity(),this._onCollectionChange()},Object.defineProperty(n.prototype,"length",{get:function(){return this.controls.length},enumerable:!0,configurable:!0}),n.prototype.setValue=function(e,n){var t=this;void 0===n&&(n={}),this._checkAllValuesPresent(e),e.forEach(function(e,r){t._throwIfControlMissing(r),t.at(r).setValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},n.prototype.patchValue=function(e,n){var t=this;void 0===n&&(n={}),e.forEach(function(e,r){t.at(r)&&t.at(r).patchValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},n.prototype.reset=function(e,n){void 0===e&&(e=[]),void 0===n&&(n={}),this._forEachChild(function(t,r){t.reset(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n),this._updatePristine(n),this._updateTouched(n)},n.prototype.getRawValue=function(){return this.controls.map(function(e){return e instanceof tg?e.value:e.getRawValue()})},n.prototype._syncPendingControls=function(){var e=this.controls.reduce(function(e,n){return!!n._syncPendingControls()||e},!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e},n.prototype._throwIfControlMissing=function(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error("Cannot find form control at index "+e)},n.prototype._forEachChild=function(e){this.controls.forEach(function(n,t){e(n,t)})},n.prototype._updateValue=function(){var e=this;this.value=this.controls.filter(function(n){return n.enabled||e.disabled}).map(function(e){return e.value})},n.prototype._anyControls=function(e){return this.controls.some(function(n){return n.enabled&&e(n)})},n.prototype._setUpControls=function(){var e=this;this._forEachChild(function(n){return e._registerControl(n)})},n.prototype._checkAllValuesPresent=function(e){this._forEachChild(function(n,t){if(void 0===e[t])throw new Error("Must supply a value for form control at index: "+t+".")})},n.prototype._allControlsDisabled=function(){var e,n;try{for(var t=s(this.controls),r=t.next();!r.done;r=t.next())if(r.value.enabled)return!1}catch(l){e={error:l}}finally{try{r&&!r.done&&(n=t.return)&&n.call(t)}finally{if(e)throw e.error}}return this.controls.length>0||this.disabled},n.prototype._registerControl=function(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)},n}(ng),ig=Promise.resolve(null),og=function(e){function n(n,t){var r=e.call(this)||this;return r.submitted=!1,r._directives=[],r.ngSubmit=new pt,r.form=new rg({},zf(n),Kf(t)),r}return l(n,e),n.prototype.ngAfterViewInit=function(){this._setUpdateStrategy()},Object.defineProperty(n.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"controls",{get:function(){return this.form.controls},enumerable:!0,configurable:!0}),n.prototype.addControl=function(e){var n=this;ig.then(function(){var t=n._findContainer(e.path);e.control=t.registerControl(e.name,e.control),Wf(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),n._directives.push(e)})},n.prototype.getControl=function(e){return this.form.get(e.path)},n.prototype.removeControl=function(e){var n=this;ig.then(function(){var t,r,l=n._findContainer(e.path);l&&l.removeControl(e.name),(r=(t=n._directives).indexOf(e))>-1&&t.splice(r,1)})},n.prototype.addFormGroup=function(e){var n=this;ig.then(function(){var t=n._findContainer(e.path),r=new rg({});(function(e,n){null==e&&Yf(n,"Cannot find control with"),e.validator=yf.compose([e.validator,n.validator]),e.asyncValidator=yf.composeAsync([e.asyncValidator,n.asyncValidator])})(r,e),t.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})},n.prototype.removeFormGroup=function(e){var n=this;ig.then(function(){var t=n._findContainer(e.path);t&&t.removeControl(e.name)})},n.prototype.getFormGroup=function(e){return this.form.get(e.path)},n.prototype.updateModel=function(e,n){var t=this;ig.then(function(){t.form.get(e.path).setValue(n)})},n.prototype.setValue=function(e){this.control.setValue(e)},n.prototype.onSubmit=function(e){return this.submitted=!0,n=this._directives,this.form._syncPendingControls(),n.forEach(function(e){var n=e.control;"submit"===n.updateOn&&n._pendingChange&&(e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)}),this.ngSubmit.emit(e),!1;var n},n.prototype.onReset=function(){this.resetForm()},n.prototype.resetForm=function(e){void 0===e&&(e=void 0),this.form.reset(e),this.submitted=!1},n.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)},n.prototype._findContainer=function(e){return e.pop(),e.length?this.form.get(e):this.form},n}(gf),ug=function(){function e(){}return e.modelParentException=function(){throw new Error('\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup\'s partner directive "formControlName" instead.  Example:\n\n      \n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });\n\n      Or, if you\'d like to avoid registering this form control, indicate that it\'s standalone in ngModelOptions:\n\n      Example:\n\n      \n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  ')},e.formGroupNameException=function(){throw new Error("\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      "+kf+"\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      "+Lf)},e.missingNameException=function(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')},e.modelGroupParentException=function(){throw new Error("\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      "+kf+"\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      "+Lf)},e.ngFormWarning=function(){console.warn("\n    It looks like you're using 'ngForm'.\n\n    Support for using the 'ngForm' element selector has been deprecated in Angular v6 and will be removed\n    in Angular v9.\n\n    Use 'ng-form' instead.\n\n    Before:\n    <ngForm #myForm=\"ngForm\">\n\n    After:\n    <ng-form #myForm=\"ngForm\">\n    ")},e}(),sg=new ye("NgFormSelectorWarning"),ag=function(e){function n(n,t,r){var l=e.call(this)||this;return l._parent=n,l._validators=t,l._asyncValidators=r,l}var t;return l(n,e),t=n,n.prototype._checkParentType=function(){this._parent instanceof t||this._parent instanceof og||ug.modelGroupParentException()},n}($f),cg=Promise.resolve(null),pg=function(e){function n(n,t,r,l){var i=e.call(this)||this;return i.control=new tg,i._registered=!1,i.update=new pt,i._parent=n,i._rawValidators=t||[],i._rawAsyncValidators=r||[],i.valueAccessor=function(e,n){if(!n)return null;Array.isArray(n)||Yf(e,"Value accessor was not provided as an array for form control with");var t=void 0,r=void 0,l=void 0;return n.forEach(function(n){var i;n.constructor===Cf?t=n:(i=n,qf.some(function(e){return i.constructor===e})?(r&&Yf(e,"More than one built-in value accessor matches form control with"),r=n):(l&&Yf(e,"More than one custom value accessor matches form control with"),l=n))}),l||r||t||(Yf(e,"No valid value accessor for form control with"),null)}(i,l),i}return l(n,e),n.prototype.ngOnChanges=function(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),function(e,n){if(!e.hasOwnProperty("model"))return!1;var t=e.model;return!!t.isFirstChange()||!De(n,t.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)},n.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeControl(this)},Object.defineProperty(n.prototype,"path",{get:function(){return this._parent?Vf(this.name,this._parent):[this.name]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"validator",{get:function(){return zf(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"asyncValidator",{get:function(){return Kf(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),n.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},n.prototype._setUpControl=function(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0},n.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)},n.prototype._isStandalone=function(){return!this._parent||!(!this.options||!this.options.standalone)},n.prototype._setUpStandalone=function(){Wf(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})},n.prototype._checkForErrors=function(){this._isStandalone()||this._checkParentType(),this._checkName()},n.prototype._checkParentType=function(){!(this._parent instanceof ag)&&this._parent instanceof $f?ug.formGroupNameException():this._parent instanceof ag||this._parent instanceof og||ug.modelParentException()},n.prototype._checkName=function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||ug.missingNameException()},n.prototype._updateValue=function(e){var n=this;cg.then(function(){n.control.setValue(e,{emitViewToModelChange:!1})})},n.prototype._updateDisabled=function(e){var n=this,t=e.isDisabled.currentValue,r=""===t||t&&"false"!==t;cg.then(function(){r&&!n.control.disabled?n.control.disable():!r&&n.control.disabled&&n.control.enable()})},n}(Nf),hg=function(){return function(){}}(),dg=function(){function e(){}var n;return n=e,e.withConfig=function(e){return{ngModule:n,providers:[{provide:sg,useValue:e.warnOnDeprecatedNgFormSelector}]}},e}(),fg=function(){return function(e,n,t){this.name=e,this.enabled=n,this.reserved=t}}(),gg=function(){function e(e,n,t){void 0===n&&(n=0),void 0===t&&(t=[new fg("Crafting",!1,0),new fg("Hut",!1,0),new fg("House",!1,0),new fg("Bakery",!1,0),new fg("Tailor",!1,0),new fg("Tavern",!1,0),new fg("Tannery",!1,0),new fg("Sawmill",!1,0),new fg("Windmill",!1,0),new fg("Cotton mill",!1,0),new fg("Brewery",!1,0),new fg("Winery",!1,0),new fg("Stonemason",!1,0),new fg("Mint",!1,0),new fg("Fishers hut",!1,0)]),this.resource=e,this.reserve=n,this.consumers=t}return e.clone=function(n){var t=[];return n.consumers.forEach(function(e){return t.push(new fg(e.name,e.enabled,e.reserved))}),new e(n.resource,n.reserve,t)},e.prototype.getReservedAmountBySource=function(e,n){var t=0;return n?0:(t=this.reserve,this.consumers.forEach(function(n){n.enabled&&n.name===e&&(t=n.reserved)}),t)},e.prototype.isUsed=function(){var e=!1;return 0!==this.reserve||(this.consumers.forEach(function(n){n.enabled&&(e=!0)}),e)},e}(),vg=function(){function e(e,n,t,r,l,i,o,u,s){this.resource=e,this.name=n,this.amount=t,this.limit=r,this.reserved=l,this.resourceTypes=i,this.visible=o,this.highlighted=u,this.prioritise=s,this.options=new gg(e)}return e.prototype.toJSON=function(){return{amount:this.amount,limit:this.limit,visible:this.visible,highlighted:this.highlighted,prioritise:this.prioritise,options:this.options}},e.prototype.addResource=function(e){return this.amount+e>this.limit?(this.amount=this.limit,this.amount):(this.amount+=e,this.amount)},e.prototype.removeResource=function(e){return this.amount-e>0&&(this.amount-=e,!0)},e.prototype.getResource=function(){return this.resource},e.prototype.getName=function(){return this.name},e.prototype.getAmount=function(){return this.amount},e.prototype.getLimit=function(){return this.limit},e.prototype.getResourceTypes=function(){return this.resourceTypes},e.prototype.hasResourceType=function(e){return this.resourceTypes.indexOf(e)>-1},e.prototype.isVisible=function(){return this.visible},e.prototype.toggleVisible=function(){return this.visible=!this.visible,this.visible},e.prototype.isHighlighted=function(){return this.highlighted},e.prototype.toggleHighlighted=function(){return this.highlighted=!this.highlighted,this.highlighted},e.prototype.getFreeSpace=function(){return this.limit-this.amount},e}(),mg=function(){function e(){this.amount=0,this.limit=0,this.reserved=0,this.resourceTypes=[],this.visible=!1,this.highlighted=!1,this.prioritise=!1}return e.prototype.forResource=function(e){return this.resource=e,this},e.prototype.withName=function(e){return this.name=e,this},e.prototype.withAmount=function(e){return this.amount=e,this},e.prototype.withLimit=function(e){return this.limit=e,this},e.prototype.withReserved=function(e){return this.reserved=e,this},e.prototype.withResourceTypes=function(e){var n=this;return e.forEach(function(e){return n.resourceTypes.push(e)}),this},e.prototype.withResourceType=function(e){return this.resourceTypes.push(e),this},e.prototype.withVisible=function(e){return this.visible=e,this},e.prototype.withHighlighted=function(e){return this.highlighted=e,this},e.prototype.withPrioritise=function(e){return this.prioritise=e,this},e.prototype.build=function(){var e=new vg(this.resource,this.name,this.amount,this.limit,this.reserved,this.resourceTypes,this.visible,this.highlighted,this.prioritise);return this.resource=void 0,this.name=void 0,this.amount=0,this.limit=0,this.reserved=0,this.resourceTypes=[],this.visible=!1,this.highlighted=!1,this.prioritise=!1,e},e}(),yg=function(){return function(e,n,t){this.message=e,this.day=t,this.type=n}}(),Sg=function(){function e(){this.services=new Map}return e.prototype.addService=function(e,n){this.services.set(e,n)},e.prototype.getService=function(e){return this.services.get(e)},e.prototype.getServiceByRegion=function(e){switch(e){case ku.VILLAGE:return this.services.get(Nu.VILLAGE);case ku.FORT:return this.services.get(Nu.FORT);case ku.FIELD:return this.services.get(Nu.FIELD);case ku.FOREST:return this.services.get(Nu.FOREST);case ku.MOUNTAINS:return this.services.get(Nu.MOUNTAINS);case ku.SEA:return this.services.get(Nu.SEA);case ku.PLATEAU:return this.services.get(Nu.PLATEAU);default:console.error("Region service not found for ["+ku[e]+"]")}},e.ngInjectableDef=ve({factory:function(){return new e},token:e,providedIn:"root"}),e}(),Eg=function(e){return e[e.AUTO_SAVE_STATUS=0]="AUTO_SAVE_STATUS",e[e.AUTO_SAVE_PERIOD=1]="AUTO_SAVE_PERIOD",e[e.METRIC=2]="METRIC",e[e.SAVE_LOGS=3]="SAVE_LOGS",e[e.SOUND=4]="SOUND",e[e.SOUND_VOLUME=5]="SOUND_VOLUME",e[e.VISUAL_PROGRESS_BARS=6]="VISUAL_PROGRESS_BARS",e}({}),bg=function(){function e(){this.optionsSubject=new L,this.options=new Map}return e.prototype.init=function(){this.options.set(Eg.AUTO_SAVE_STATUS,!0),this.options.set(Eg.AUTO_SAVE_PERIOD,5),this.options.set(Eg.METRIC,!0),this.options.set(Eg.SAVE_LOGS,!1),this.options.set(Eg.SOUND,!0),this.options.set(Eg.SOUND_VOLUME,100),this.options.set(Eg.VISUAL_PROGRESS_BARS,!0),this.optionsSubject.next()},e.prototype.load=function(e){this.options=new Map(JSON.parse(e.options)),this.options.has(Eg.VISUAL_PROGRESS_BARS)||this.options.set(Eg.VISUAL_PROGRESS_BARS,!0),this.optionsSubject.next()},e.prototype.save=function(){return{options:JSON.stringify(Array.from(this.options.entries()))}},e.prototype.reset=function(e,n){e&&this.init()},e.prototype.registerForOptionsChange=function(){return this.optionsSubject.asObservable()},e.prototype.setOption=function(e,n){this.options.set(e,n),this.optionsSubject.next()},e.prototype.setOptions=function(e){for(var n=0,t=e;n<t.length;n++){var r=t[n];this.options.set(r.option,r.value)}this.optionsSubject.next()},e.prototype.getOption=function(e){return this.options.get(e)},e.ngInjectableDef=ve({factory:function(){return new e},token:e,providedIn:"root"}),e}(),Og=function(e){return e[e.LOG=0]="LOG",e[e.WARNING=1]="WARNING",e[e.SUCCESS=2]="SUCCESS",e[e.MYSTICAL=3]="MYSTICAL",e}({}),Rg=function(e){return e[e.SPRING=0]="SPRING",e[e.SUMMER=1]="SUMMER",e[e.AUTUMN=2]="AUTUMN",e[e.WINTER=3]="WINTER",e}({}),Tg=function(){return function(e,n){this.day=e,this.year=n}}(),Cg=function(){function e(e){this.servicesService=e,this.daySubject=new L,this.year=1,this.day=1,this.tickInDay=0,this.season=Rg.SPRING,e.addService(Nu.CALENDAR,this)}return e.prototype.load=function(e){this.day=e.day,this.year=e.year,this.season=e.season,this.tickInDay=e.tickInDay},e.prototype.save=function(){return{day:this.day,year:this.year,season:this.season,tickInDay:this.tickInDay}},e.prototype.reset=function(e,n){this.day=1,this.tickInDay=0,this.season=Rg.SPRING,e?this.year=1:this.year+=1},e.prototype.tick=function(e){this.tickInDay+=1,11===this.tickInDay&&(this.tickInDay=0,this.day+=1,this.day===Yu+1&&(this.day=1,this.year+=1,this.servicesService.getService(Nu.GAME).isEnabled(Eu.CALENDAR)&&this.servicesService.getService(Nu.LOG).success("New Year!")),this.daySubject.next(this.day)),this.day>=1&&this.day<=Yu/4?this.season=Rg.SPRING:this.day>Yu/4&&this.day<=Yu/2?this.season=Rg.SUMMER:this.day>Yu/2&&this.day<=Yu/4*3?this.season=Rg.AUTUMN:this.day>Yu/4*3&&this.day<=Yu&&(this.season=Rg.WINTER)},e.prototype.getDay=function(){return this.day},e.prototype.getYear=function(){return this.year},e.prototype.getSeason=function(){return this.season},e.prototype.getAbsoluteDay=function(){return(this.year-1)*Yu+this.day},e.prototype.getSeasonForAbsoluteDay=function(e){var n=(e-1)%Yu+1;return n>=1&&n<=Yu/4?Rg.SPRING:n>Yu/4&&n<=Yu/2?Rg.SUMMER:n>Yu/2&&n<=Yu/4*3?Rg.AUTUMN:n>Yu/4*3&&n<=Yu?Rg.WINTER:void 0},e.prototype.registerForDayChange=function(){return this.daySubject.asObservable()},e.prototype.getDate=function(){return new Tg(this.day,this.year)},e.ngInjectableDef=ve({factory:function(){return new e(ze(Sg))},token:e,providedIn:"root"}),e}(),_g=function(){function e(e,n,t){this.servicesService=e,this.calendarService=n,this.optionsService=t,this.entries=[],this.servicesService.addService(Nu.LOG,this),this.logSubject=new L}return e.prototype.log=function(e){this.entries.push(new yg(e,Og.LOG,this.calendarService.getDay())),this.logSubject.next()},e.prototype.warning=function(e){this.entries.push(new yg(e,Og.WARNING,this.calendarService.getDay())),this.logSubject.next()},e.prototype.success=function(e){this.entries.push(new yg(e,Og.SUCCESS,this.calendarService.getDay())),this.logSubject.next()},e.prototype.mystical=function(e){this.entries.push(new yg(e,Og.MYSTICAL,this.calendarService.getDay())),this.logSubject.next()},e.prototype.registerForLogs=function(){return this.logSubject.asObservable()},e.prototype.getEntries=function(){return this.entries},e.prototype.clearEntries=function(){this.entries=[],this.logSubject.next()},e.prototype.load=function(e){this.entries=e.logs},e.prototype.reset=function(e,n){this.entries=this.entries.slice(-5).filter(function(e){return e.type===Og.MYSTICAL})},e.prototype.save=function(){return this.optionsService.getOption(Eg.SAVE_LOGS)?{logs:this.entries}:{logs:[]}},e.ngInjectableDef=ve({factory:function(){return new e(ze(Sg),ze(Cg),ze(bg))},token:e,providedIn:"root"}),e}();!function(e){e.ERROR_1="ERROR_1: Copying failed",e.ERROR_2="ERROR_2: Resource limit below 0",e.ERROR_3="ERROR_3: Workers below 0",e.ERROR_4="ERROR_4: Population Cap below 0",e.ERROR_5="ERROR_5: ",e.ERROR_6="ERROR_6: ",e.ERROR_7="ERROR_7: ",e.ERROR_8="ERROR_8: "}(eg||(eg={}));var Ig=function(){function e(e){this.servicesService=e,this.textSubject=new L,this.missionSubject=new L,this.missionResponseSubject=new L,this.buildingSubject=new L,this.tutorialSubject=new L,this.tutorialResponseSubject=new L,this.valueSubject=new L,this.onOpenSubject=new L,this.confirmationSubject=new L,this.closeSubject=new L,this.valueResponseSubject=new L,this.regionSubject=new L,this.resourceOptionsSubject=new L,this.resourceOptionsResponseSubject=new L,this.modals=[],this.servicesService.addService(Nu.MODAL,this)}return e.prototype.add=function(e){this.modals.push(e)},e.prototype.remove=function(e){this.modals=this.modals.filter(function(n){return n.id!==e})},e.prototype.open=function(e){this.modals.find(function(n){return n.id===e}).open(),this.onOpenSubject.next(e)},e.prototype.close=function(e){this.modals.find(function(n){return n.id===e}).close(),this.closeSubject.next(e)},e.prototype.registerForText=function(){return this.textSubject.asObservable()},e.prototype.registerForOnOpen=function(){return this.onOpenSubject.asObservable()},e.prototype.registerForConfirmation=function(){return this.confirmationSubject.asObservable()},e.prototype.sendConfirmationResult=function(e){this.confirmationSubject.next(e)},e.prototype.setModalText=function(e){this.textSubject.next(e)},e.prototype.registerForRegion=function(){return this.regionSubject.asObservable()},e.prototype.setRegion=function(e){this.regionSubject.next(e)},e.prototype.registerForCloseModal=function(){return this.closeSubject.asObservable()},e.prototype.sendCloseSignal=function(e){this.closeSubject.next(e)},e.prototype.registerForValue=function(){return this.valueSubject.asObservable()},e.prototype.setModalValue=function(e){this.valueSubject.next(e)},e.prototype.sendValueInput=function(e){this.valueResponseSubject.next(e)},e.prototype.registerForValueResponse=function(){return this.valueResponseSubject.asObservable()},e.prototype.registerForMission=function(){return this.missionSubject.asObservable()},e.prototype.registerForMissionResponse=function(){return this.missionResponseSubject.asObservable()},e.prototype.registerForBuilding=function(){return this.buildingSubject.asObservable()},e.prototype.setMission=function(e){this.missionSubject.next(e)},e.prototype.sendMissionResponse=function(e){this.missionResponseSubject.next(e)},e.prototype.setBuilding=function(e){this.buildingSubject.next(e)},e.prototype.info=function(e){this.open(mu.INFO),this.setModalText(e)},e.prototype.openTutorialModal=function(e){var n=this.modals.find(function(e){return e.id===mu.TUTORIAL});n.close(),n.openTutorialWindow(e)},e.prototype.registerForTutorial=function(){return this.tutorialSubject.asObservable()},e.prototype.setTutorial=function(e){this.tutorialSubject.next(e)},e.prototype.registerForTutorialResponse=function(){return this.tutorialResponseSubject.asObservable()},e.prototype.sendTutorialResponse=function(e){this.tutorialResponseSubject.next(e)},e.prototype.registerForResourceOptions=function(){return this.resourceOptionsSubject.asObservable()},e.prototype.setResourceOptions=function(e){this.resourceOptionsSubject.next(e)},e.prototype.registerForResourceOptionsResponse=function(){return this.resourceOptionsResponseSubject.asObservable()},e.prototype.sendResourceOptionsResponse=function(e){return this.resourceOptionsResponseSubject.next(e)},e.ngInjectableDef=ve({factory:function(){return new e(ze(Sg))},token:e,providedIn:"root"}),e}(),Ag=function(){function e(e,n,t){this.modalService=e,this.servicesService=n,this.router=t,this.tutorialsEnabled=!1,this.villageTutorialState=0,this.forestTutorialState=0,this.fieldTutorialState=0,this.mountainsTutorialState=0,this.plateauTutorialState=0,this.seaTutorialState=0,this.resourcesTutorialState=0}return e.prototype.load=function(e){this.villageTutorialState=void 0!==e.villageTutorialState?e.villageTutorialState:0,this.forestTutorialState=void 0!==e.forestTutorialState?e.forestTutorialState:0,this.resourcesTutorialState=void 0!==e.resourcesTutorialState?e.resourcesTutorialState:0,this.fieldTutorialState=void 0!==e.fieldTutorialState?e.fieldTutorialState:0,this.mountainsTutorialState=void 0!==e.mountainsTutorialState?e.mountainsTutorialState:0,this.plateauTutorialState=void 0!==e.plateauTutorialState?e.plateauTutorialState:0,this.seaTutorialState=void 0!==e.seaTutorialState?e.seaTutorialState:0},e.prototype.save=function(){return{villageTutorialState:this.villageTutorialState,forestTutorialState:this.forestTutorialState,resourcesTutorialState:this.resourcesTutorialState,fieldTutorialState:this.fieldTutorialState,mountainsTutorialState:this.mountainsTutorialState,plateauTutorialState:this.plateauTutorialState,seaTutorialState:this.seaTutorialState}},e.prototype.reset=function(e,n){},e.prototype.checkRegionTutorial=function(e){var n=this;if(this.tutorialsEnabled)switch(e){case ku.VILLAGE:if(0===this.villageTutorialState){this.startTutorial(Ku);var t=this.modalService.registerForTutorialResponse().subscribe(function(e){t.unsubscribe(),n.villageTutorialState=e})}break;case ku.FOREST:if(0===this.forestTutorialState){this.startTutorial(qu);var r=this.modalService.registerForTutorialResponse().subscribe(function(e){r.unsubscribe(),n.forestTutorialState=e})}break;case ku.FIELD:if(0===this.fieldTutorialState){this.startTutorial($u);var l=this.modalService.registerForTutorialResponse().subscribe(function(e){l.unsubscribe(),n.fieldTutorialState=e})}break;case ku.MOUNTAINS:if(0===this.mountainsTutorialState){this.startTutorial(Qu);var i=this.modalService.registerForTutorialResponse().subscribe(function(e){i.unsubscribe(),n.mountainsTutorialState=e})}break;case ku.PLATEAU:if(0===this.plateauTutorialState){this.startTutorial(Zu);var o=this.modalService.registerForTutorialResponse().subscribe(function(e){o.unsubscribe(),n.plateauTutorialState=e})}break;case ku.SEA:if(0===this.seaTutorialState){this.startTutorial(Xu);var u=this.modalService.registerForTutorialResponse().subscribe(function(e){u.unsubscribe(),n.seaTutorialState=e})}}},e.prototype.checkResourcesTutorial=function(){var e=this;if(0===this.resourcesTutorialState){this.startTutorial(Ju);var n=this.modalService.registerForTutorialResponse().subscribe(function(t){n.unsubscribe(),e.resourcesTutorialState=t})}},e.prototype.enableTutorials=function(){this.tutorialsEnabled=!0},e.prototype.resetTutorials=function(){this.villageTutorialState=0,this.forestTutorialState=0,this.fieldTutorialState=0,this.mountainsTutorialState=0,this.plateauTutorialState=0,this.seaTutorialState=0,this.resourcesTutorialState=0,this.router.url.endsWith("village")?this.checkRegionTutorial(ku.VILLAGE):this.router.url.endsWith("forest")?this.checkRegionTutorial(ku.FOREST):this.router.url.endsWith("field")?this.checkRegionTutorial(ku.FIELD):this.router.url.endsWith("mountains")?this.checkRegionTutorial(ku.MOUNTAINS):this.router.url.endsWith("plateau")?this.checkRegionTutorial(ku.PLATEAU):this.router.url.endsWith("sea")?this.checkRegionTutorial(ku.SEA):this.router.url.endsWith("resources")?this.checkResourcesTutorial():this.modalService.info("Tutorials have been enabled")},e.prototype.startTutorial=function(e){this.modalService.setTutorial(e),this.servicesService.getService(Nu.TICKER).stop(),this.modalService.openTutorialModal(e[0].position)},e.ngInjectableDef=ve({factory:function(){return new e(ze(Ig),ze(Sg),ze(Cd))},token:e,providedIn:"root"}),e}(),wg=function(){function e(e,n,t,r){this.servicesService=e,this.modalService=n,this.logService=t,this.tutorialsService=r,this.flags=[],this.gameState=0,this.abdicationLevel=0,this.devMessage=Number.MAX_SAFE_INTEGER,this.demolishReturn=ts.DEMOLITION_RETURN,this.servicesService.addService(Nu.GAME,this)}return e.prototype.init=function(){var e=this;Gu.production?this.flags=[]:(this.flags=[],Object.values(Eu).filter(function(e){return!isNaN(e)}).forEach(function(n){return e.flags.push(n)}))},e.prototype.load=function(e){this.flags=e.flags,this.gameState=e.gameState,this.demolishReturn=e.demolishReturn,this.devMessage=e.devMessage,this.abdicationLevel=e.abdicationLevel},e.prototype.save=function(){return{flags:this.flags,gameState:this.gameState,demolishReturn:this.demolishReturn,devMessage:this.devMessage,abdicationLevel:this.abdicationLevel}},e.prototype.reset=function(e,n){this.flags=[],this.gameState=0,this.demolishReturn=ts.DEMOLITION_RETURN,this.init(),e&&(this.devMessage=Number.MAX_SAFE_INTEGER,this.abdicationLevel=0),n&&(this.abdicationLevel=0)},e.prototype.isEnabled=function(e){return this.flags.includes(e)},e.prototype.enable=function(e){this.flags.includes(e)||this.flags.push(e)},e.prototype.disable=function(e){this.flags.includes(e)&&this.flags.splice(this.flags.indexOf(e),1)},e.prototype.setGameState=function(e){this.gameState=e},e.prototype.getGameState=function(){return this.gameState},e.prototype.tick=function(e){0===this.getGameState()&&(this.displayWelcomeModal(),this.addStartBoost(),this.tutorialsService.checkRegionTutorial(ku.VILLAGE),this.setGameState(1)),this.displayDevMessage()},e.prototype.displayWelcomeModal=function(){var e=this;this.modalService.info(Bu);var n=this.modalService.registerForCloseModal().subscribe(function(){e.devMessage===Number.MAX_SAFE_INTEGER&&(e.devMessage=0),n.unsubscribe()})},e.prototype.displayDevMessage=function(){var e=Vu.length;this.devMessage<e&&(this.showDevNotes(),this.devMessage=e)},e.prototype.showDevNotes=function(){this.modalService.open(mu.CHANGELOG)},e.prototype.addStartBoost=function(){Wu&&this.servicesService.getService(Nu.EFFECTS).addBuildingEffect(Wu)},e.prototype.getAbdicationLevel=function(){return this.abdicationLevel},e.prototype.incrementAbdicationLevel=function(){this.abdicationLevel+=1,this.abdicationLevel>=7&&this.logService.mystical("As you finish last wonder building strange thoughts of ancient structures appear in your head. Who knows what purpose this building serve")},e.ngInjectableDef=ve({factory:function(){return new e(ze(Sg),ze(Ig),ze(_g),ze(Ag))},token:e,providedIn:"root"}),e}(),Ng=function(){return function(e,n,t,r,l,i,o){this.perk=e,this.usages=n,this.maxUsages=t,this.description=r,this.cost=l,this.reset=i,this.effect=o}}(),Pg=function(){function e(e,n,t){this.modalService=e,this.logService=n,this.servicesService=t,this.royalPoints=0,this.perks=[],this.goldenFish=!1,this.goldenEgg=!1,this.servicesService.addService(Nu.ROYAL,this),this.initPerks()}return e.prototype.initPerks=function(){var e=this;this.perks=[],Object.entries(as.PERKS).forEach(function(n){e.perks.push(new Ng(yu[n[0]],n[1].USAGES,n[1].MAX_USAGES,n[1].DESCRIPTION,n[1].COST,n[1].RESET,n[1].EFFECT))})},e.prototype.load=function(e){var n=this;this.royalPoints=e.royalPoints,this.goldenFish=void 0!==e.goldenFish&&e.goldenFish,this.goldenEgg=void 0!==e.goldenEgg&&e.goldenEgg,e.progress.forEach(function(e){var t=n.perks.find(function(n){return n.perk===e[0]});t&&(t.usages=e[1])})},e.prototype.save=function(){var e=[];return this.perks.forEach(function(n){return e.push([n.perk,n.usages])}),{royalPoints:this.royalPoints,progress:e,goldenFish:this.goldenFish,goldenEgg:this.goldenEgg}},e.prototype.reset=function(e,n){var t=this;e?(this.royalPoints=0,this.goldenFish=!1,this.goldenEgg=!1,this.initPerks()):this.perks.forEach(function(e){e.reset&&e.usages>0&&e.reset(t.servicesService,e)})},e.prototype.getRoyalPoints=function(){return this.royalPoints},e.prototype.buyRoyalPoints=function(){this.modalService.open(mu.ROYAL)},e.prototype.increaseRoyalPoints=function(e){this.royalPoints+=e},e.prototype.getRoyalPerks=function(){return this.perks},e.prototype.unlock=function(e){(0===e.maxUsages||e.usages<e.maxUsages)&&(this.royalPoints>=e.cost?this.perks.find(function(n){return e===n}).effect(this.servicesService,e):this.modalService.info("Not enough Royal Points!<br>"+e.cost+" RP required but only "+this.royalPoints+" available"))},e.prototype.unlockCallback=function(e){this.royalPoints-=Number(e.cost),e.usages+=1},e.prototype.isGoldenFishCaught=function(){return this.goldenFish},e.prototype.catchGoldenFish=function(){return!(this.goldenFish||!Mu.chance(as.GOLDEN_ITEMS.GOLDEN_FISH_CHANCE)||(this.increaseRoyalPoints(5),this.logService.mystical("You have caught a golden fish. You let it go and it granted you 5 Royal Points"),this.goldenFish=!0,0))},e.prototype.layGoldenEgg=function(){return!(this.goldenEgg||!Mu.chance(as.GOLDEN_ITEMS.GOLDEN_EGG_CHANCE)||(this.increaseRoyalPoints(5),this.logService.mystical("Your chicken laid golden egg. You decided to keep it and was granted 5 Royal Points"),this.goldenEgg=!0,0))},e.ngInjectableDef=ve({factory:function(){return new e(ze(Ig),ze(_g),ze(Sg))},token:e,providedIn:"root"}),e}(),Dg=function(){function e(e,n,t,r){this.servicesService=e,this.modalService=n,this.royalService=t,this.logService=r,e.addService(Nu.KONGREGATE,this);try{kongregateAPI.loadAPI(function(){window.kongregate=kongregateAPI.getAPI();var e=[],n=function(n){if(n.success){var r=e.find(function(e){return e[0]===n.id});r&&t.increaseRoyalPoints(r[1])}};window.kongregate.mtx.requestUserItemList(null,function(t){if(t.success)for(var r=0;r<t.data.length;r++){var l=t.data[r];e.push([l.id,Number(l.identifier.replace("rp_pack",""))]),window.kongregate.mtx.useItemInstance(l.id,n)}})})}catch(l){console.error(l)}}return e.prototype.isSet=function(){return!!window.kongregate},e.prototype.isAvailable=function(){return window.kongregate&&0!==this.getUserId()},e.prototype.submitStat=function(e,n){window.kongregate.stats.submit(e,n)},e.prototype.getUsername=function(){if(this.isSet())return window.kongregate.services.getUsername()},e.prototype.getUserId=function(){if(this.isSet())return window.kongregate.services.getUserId()},e.prototype.buyItem=function(e){var n=this.modalService,t=this.royalService,r=this.logService,l=[],i=function(e){if(e.success){var n=l.find(function(n){return n[0]===e.id});n&&(t.increaseRoyalPoints(n[1]),r.log("Added "+n[1]+" Royal Points"))}},o=function(e){if(e.success)for(var n=0;n<e.data.length;n++){var t=e.data[n];l.push([t.id,Number(t.identifier.replace("rp_pack",""))]),window.kongregate.mtx.useItemInstance(t.id,i)}};window.kongregate.mtx.purchaseItems([e],function(e){e.success&&(n.close(mu.ROYAL),window.kongregate.mtx.requestUserItemList(null,o))})},e.ngInjectableDef=ve({factory:function(){return new e(ze(Sg),ze(Ig),ze(Pg),ze(_g))},token:e,providedIn:"root"}),e}(),Mg=function(){function e(e){this.happiness=zu.START_HAPPINESS,e.addService(Nu.HAPPINESS,this)}return e.prototype.load=function(e){this.happiness=e.happiness},e.prototype.save=function(){return{happiness:this.happiness}},e.prototype.reset=function(e,n){this.happiness=zu.START_HAPPINESS},e.prototype.tick=function(e){},e.prototype.getHappiness=function(){return this.happiness},e.prototype.getHappinessEffect=function(){return this.happiness>=0&&this.happiness<=10?-10:this.happiness>10&&this.happiness<=40?5:this.happiness>40&&this.happiness<=60?10:this.happiness>60&&this.happiness<=90?20:this.happiness>90&&this.happiness<=100?35:void 0},e.prototype.increaseHappiness=function(e,n){void 0===n&&(n=100),this.happiness<n&&(this.happiness+=e,this.happiness>100&&(this.happiness=100))},e.prototype.decreaseHappiness=function(e,n){void 0===n&&(n=0),this.happiness>n&&(this.happiness-=e,this.happiness<0&&(this.happiness=0))},e.prototype.resetHappiness=function(){this.happiness=zu.START_HAPPINESS},e.ngInjectableDef=ve({factory:function(){return new e(ze(Sg))},token:e,providedIn:"root"}),e}(),kg=function(){function e(e,n,t){void 0===t&&(t=0),this.userName=e,this.value=n,this.daysAgo=t}return e.prototype.incrementDaysAgo=function(){this.daysAgo+=1},e}(),Lg=function(){function e(e,n,t,r,l,i){var o=this;this.logService=e,this.servicesService=n,this.gameService=t,this.modalService=r,this.happinessService=l,this.kongregateService=i,this.resources=new Map,this.resourcesUse=new Map,this.populationScore=0,this.resourcesSubject=new L,this.callbacks=new Map,n.addService(Nu.RESOURCES,this),this.init(),n.getService(Nu.CALENDAR).registerForDayChange().subscribe(function(e){Array.from(o.resourcesUse.keys()).forEach(function(e){o.resourcesUse.set(e,o.resourcesUse.get(e).filter(function(e){return e.daysAgo<30})),o.resourcesUse.get(e).forEach(function(e){return e.incrementDaysAgo()}),0===o.resourcesUse.get(e).length&&o.resourcesUse.delete(e)})})}return e.prototype.init=function(){var e=this,n=new mg;rs.getResources().forEach(function(t){e.resources.set(vu[t[0]],n.forResource(vu[t[0]]).withName(Au.prepareResourceName(vu[t[0]])).withAmount(void 0!==t[1].AMOUNT?t[1].AMOUNT:rs.DEFAULT_AMOUNT).withLimit(void 0!==t[1].LIMIT?t[1].LIMIT:rs.DEFAULT_LIMIT).withResourceTypes(t[1].TYPES).withResourceType(Cu.ALL).withVisible(void 0!==t[1].VISIBLE?t[1].VISIBLE:rs.DEFAULT_VISIBLE).withHighlighted(void 0!==t[1].HIGHLIGHTED?t[1].HIGHLIGHTED:rs.DEFAULT_HIGHLIGHTED).build())}),this.people=1,this.workers=0,this.populationCap=1,Gu.production||this.resources.forEach(function(e){return e.visible=!0})},e.prototype.getResource=function(e){return this.resources.get(e)},e.prototype.makeVisible=function(e){this.resources.get(e).visible=!0},e.prototype.increaseResource=function(e,n,t){if(void 0===t&&(t=!1),e===vu.FOOD||e===vu.NOTHING)return!0;var r=this.resources.get(e);if(r.getResourceTypes().includes(Cu.ANIMAL)){var l=this.servicesService.getServiceByRegion(ku.FIELD).getBuildings().filter(function(e){return e.getBuildingType()===bu.PASTURE}).map(function(e){return e}).filter(function(n){return n.getResourceType()===e}),i=0;if(l.forEach(function(e){return i+=e.getMaxAnimals()-e.getAnimals()}),n>i&&!t)return!1;for(t&&n>i&&(n=i);n>0&&i>0;)for(var o=0,u=l;o<u.length;o++){for(var s=u[o];s.getAnimals()<s.getMaxAnimals()&&n>0;)s.increaseAnimal(1),n-=1,i-=1;if(0===n)return!0}return!0}return!(!t&&r.amount+n>r.limit||(r.amount+=n,r.amount>r.limit&&(r.amount=r.limit),this.resourcesSubject.next(this.resources),r.isVisible()||(r.toggleVisible(),this.logService.log("New resource discovered: "+Au.prepareResourceName(e))),0))},e.prototype.decreaseResource=function(e,n,t,r){if(void 0===r&&(r=!1),e===vu.FOOD)return this.getFoodValue(t,r)>=n&&(this.getFood(n,t,r),!0);var l=this.resources.get(e);if(l.getResourceTypes().includes(Cu.ANIMAL)){var i=this.servicesService.getServiceByRegion(ku.FIELD).getBuildings().filter(function(e){return e.getBuildingType()===bu.PASTURE}).map(function(e){return e}).filter(function(n){return n.getResourceType()===e&&n.getAnimals()>0}),o=0;if(i.forEach(function(e){return o+=e.getAnimals()}),o>=n){for(var u=0,s=i;u<s.length;u++){for(var a=s[u];n>0&&a.getAnimals()>0;)a.decreaseAnimal(1),l.amount-=1,this.addResourceUse(e,t,1),n-=1;if(0===n)return!0}return!0}return!1}return 0!==this.hasResource(e,n,t,r)?(this.resourcesSubject.next(this.resources),!1):(l.amount-=n,this.addResourceUse(e,t,n),this.resourcesSubject.next(this.resources),!0)},e.prototype.hasResource=function(e,n,t,r){if(void 0===r&&(r=!1),e===vu.FOOD)return this.getFoodValue(t,r)>=n?0:n-this.getFoodValue(t,r);var l=this.resources.get(e);return r?l.amount>=n?0:n-this.resources.get(e).amount:l.amount-l.options.getReservedAmountBySource(t,r)>=n?0:n-(l.amount-l.options.getReservedAmountBySource(t,r))},e.prototype.hasLimit=function(e){return this.resources.get(e).amount<this.resources.get(e).limit},e.prototype.decreaseResources=function(e,n,t,r){void 0===t&&(t=!1),void 0===r&&(r=1);for(var l="",i=!0,o=0,u=Array.from(e);o<u.length;o++){var s=u[o],a=this.hasResource(h=s[0],s[1]*r,n,t);0!==a&&(l+="Missing "+a+" "+Au.prepareResourceName(h)+"<br>",i=!1)}if(!i)return this.modalService.info(l),!1;for(var c=0,p=Array.from(e);c<p.length;c++){var h,d=p[c];this.decreaseResource(h=d[0],d[1]*r,n,t)}return!0},e.prototype.hasResources=function(e,n,t,r){void 0===t&&(t=1),void 0===r&&(r=!1);for(var l=!0,i=0,o=Array.from(e);i<o.length;i++){var u=o[i];0!==this.hasResource(u[0],u[1]*t,n,r)&&(l=!1)}return l},e.prototype.increaseLimit=function(e,n){this.resources.forEach(function(t){t.getResourceTypes().includes(e)&&!t.getResourceTypes().includes(Cu.ANIMAL)&&(t.limit+=n)})},e.prototype.increaseResourceLimit=function(e,n){this.resources.get(e).limit+=n},e.prototype.decreaseLimit=function(e,n){this.resources.forEach(function(t){t.getResourceTypes().includes(e)&&!t.getResourceTypes().includes(Cu.ANIMAL)&&(t.limit-=n,t.limit<0&&(t.limit=0,console.error(eg.ERROR_2,t.getResource(),t.limit)),t.amount>t.limit&&(t.amount=t.limit))})},e.prototype.decreaseResourceLimit=function(e,n){var t=this.resources.get(e);t.limit-=n,t.limit<0&&(t.limit=0,console.error(eg.ERROR_2,t.getResource(),t.limit)),t.amount>t.limit&&(t.amount=t.limit)},e.prototype.getResources=function(){return this.resources},e.prototype.save=function(){var e="[";return this.resources.forEach(function(n){e+="["+n.resource+","+JSON.stringify(n)+"],"}),{resources:e=e.slice(0,-1)+"]",people:this.people,workers:this.workers,populationCap:this.populationCap}},e.prototype.load=function(e){var n=this;JSON.parse(e.resources).forEach(function(e){if(n.resources.get(e[0]).amount=e[1].amount,n.resources.get(e[0]).limit=e[1].limit,n.resources.get(e[0]).visible=e[1].visible,n.resources.get(e[0]).highlighted=e[1].highlighted,n.resources.get(e[0]).prioritise=e[1].prioritise,e[1].reserved)n.resources.get(e[0]).options=new gg(n.resources.get(e[0]).resource,e[1].reserved);else if(e[1].options){var t=[];e[1].options.consumers.forEach(function(e){t.push(new fg(e.name,e.enabled,e.reserved))}),n.resources.get(e[0]).options=new gg(e[1].options.resource,e[1].options.reserve,t)}else n.resources.get(e[0]).options=new gg(n.resources.get(e[0]).resource)}),this.people=e.people,this.workers=e.workers,this.populationCap=e.populationCap,this.resourcesSubject.next(this.resources)},e.prototype.reset=function(e,n){this.resources=new Map,this.people=1,this.workers=0,this.populationCap=1,this.populationScore=0,this.init(),this.resourcesSubject.next(this.resources)},e.prototype.registerForResourcesChange=function(){return this.resourcesSubject.asObservable()},e.prototype.createPeople=function(e){this.people+=e},e.prototype.removePeople=function(e){if(this.people-=e,this.people-e<0)for(;this.people<0;){var n=Math.floor(Math.random()*this.callbacks.size);Array.from(this.callbacks.values())[n].fireRandomWorker()}},e.prototype.hireWorker=function(){return this.people>0&&(this.people-=1,this.workers+=1,!0)},e.prototype.fireWorker=function(e){void 0===e&&(e=1),0===this.workers&&console.error(eg.ERROR_3),this.workers-=e,this.people+=e},e.prototype.getPeople=function(){return this.people},e.prototype.getWorkers=function(){return this.workers},e.prototype.getPopulationCap=function(){return this.populationCap},e.prototype.increasePopulationCap=function(e){return this.populationCap+=e},e.prototype.decreasePopulationCap=function(e){return this.populationCap-e<0&&console.error(eg.ERROR_4),this.populationCap-=e},e.prototype.addCallback=function(e,n){this.callbacks.set(n,e)},e.prototype.tick=function(e){this.kongregateService.isAvailable()&&this.getTotalPeople()>this.populationScore&&(this.populationScore=this.getTotalPeople(),this.kongregateService.submitStat("Population",this.populationScore)),1===this.getTotalPeople()&&this.happinessService.resetHappiness(),this.people+this.workers>=ts.VILLAGE.SHRINE.POPULATION&&(this.gameService.isEnabled(Eu.SHRINE)||(this.gameService.enable(Eu.SHRINE),this.logService.log("Shrine unlocked"))),this.people+this.workers>=ts.VILLAGE.CHURCH.POPULATION&&(this.gameService.isEnabled(Eu.CHURCH)||(this.gameService.enable(Eu.CHURCH),this.logService.log("Church unlocked")))},e.prototype.getRandomFood=function(e,n){var t;if(void 0===n&&(n=!1),(t=n?Array.from(this.resources.entries()).filter(function(e){return e[1].resourceTypes.includes(Cu.CONSUMABLE)&&e[1].amount>0}):Array.from(this.resources.entries()).filter(function(t){return t[1].resourceTypes.includes(Cu.CONSUMABLE)&&t[1].amount-t[1].options.getReservedAmountBySource(e,n)>0})).length>0){var r=t[Math.floor(Math.random()*t.length)];return this.decreaseResource(r[0],1,e),rs.getResource(r[0]).POWER}return 0},e.prototype.getFood=function(e,n,t){for(void 0===t&&(t=!1);e>0;)e-=this.getRandomFood(n,t)},e.prototype.getFoodValue=function(e,n){void 0===n&&(n=!1);var t=0;return n?Array.from(this.resources.entries()).filter(function(e){return e[1].resourceTypes.includes(Cu.CONSUMABLE)&&e[1].amount>0}).forEach(function(e){return t+=rs.getResource(e[0]).POWER*e[1].amount}):Array.from(this.resources.entries()).filter(function(t){return t[1].resourceTypes.includes(Cu.CONSUMABLE)&&t[1].amount-t[1].options.getReservedAmountBySource(e,n)>0}).forEach(function(e){return t+=rs.getResource(e[0]).POWER*(e[1].amount-e[1].reserved)}),t},e.prototype.getResourceTypes=function(e){return this.resources.get(e).getResourceTypes()},e.prototype.increaseResources=function(e,n){void 0===n&&(n=!1);for(var t=0,r=Array.from(e);t<r.length;t++){var l=r[t];this.increaseResource(l[0],l[1],n)}},e.prototype.removeRecruit=function(e){return this.people>=e&&this.callbacks.get(ku.VILLAGE).removeRecruit(e)},e.prototype.getFuel=function(e){for(var n=0,t=rs.getResourcesByType(Cu.FUEL).sort(function(e,n){return e[1].FUEL_PRIORITY-n[1].FUEL_PRIORITY});n<t.length;n++){var r=t[n];if(this.decreaseResource(vu[String(r[0])],1,e))return r[1].POWER}return 0},e.prototype.getTotalPeople=function(){return this.people+this.workers},e.prototype.getResourcesValue=function(){var e=0;return this.resources.forEach(function(n){n.amount>0&&(e+=rs.getResource(n.resource).TRADE_VALUE*n.getAmount())}),e},e.prototype.updateAnimals=function(){var e=Array.from(this.getResources().values()).filter(function(e){return e.getResourceTypes().includes(Cu.ANIMAL)}),n=this.servicesService.getServiceByRegion(ku.FIELD).getBuildings().filter(function(e){return e.getBuildingType()===bu.PASTURE}).map(function(e){return e});e.forEach(function(e){var t=0;n.filter(function(n){return n.getResourceType()===e.resource&&n.getAnimals()>0}).forEach(function(e){return t+=e.getAnimals()}),e.amount=t})},e.prototype.getLimit=function(e){var n=this.resources.get(e);return n.limit-n.amount},e.prototype.addResourceUse=function(e,n,t){this.resourcesUse.has(e)?this.resourcesUse.get(e).push(new kg(n,t)):this.resourcesUse.set(e,[new kg(n,t)])},e.prototype.getResourceUses=function(e){return this.resourcesUse.get(e)},e.ngInjectableDef=ve({factory:function(){return new e(ze(_g),ze(Sg),ze(wg),ze(Ig),ze(Mg),ze(Dg))},token:e,providedIn:"root"}),e}(),xg=function(){function e(e,n,t,r){this.resourcesService=e,this.modalService=n,this.tutorialService=t,this.gameService=r,this.filterText=""}return e.prototype.ngOnInit=function(){var e=this;this.categories=Object.keys(Cu),this.categories=[Cu[Cu.RAW],Cu[Cu.PROCESSED],Cu[Cu.FOOD],Cu[Cu.TOOLS]],this.resources=this.resourcesService.getResources(),this.resourcesService.registerForResourcesChange().subscribe(function(n){e.resources=n}),this.tutorialService.checkResourcesTutorial()},e.prototype.getResourcesList=function(e){var n=this;return Array.from(this.resourcesService.getResources().entries()).filter(function(t){return t[1].getResourceTypes().includes(Cu[e])&&Au.prepareResourceName(t[1].getResource()).toLowerCase().includes(n.filterText)}).map(function(e){return e[1]})},e.prototype.openManageModal=function(e){this.modalService.open(mu.RESOURCE_MANAGEMENT),this.modalService.setResourceOptions(e.options);var n=this.modalService.registerForResourceOptionsResponse().subscribe(function(t){n.unsubscribe(),t&&(e.options=t)})},e.prototype.isMarketEnabled=function(){return this.gameService.isEnabled(Eu.MARKET)},e.prototype.highlightResource=function(e){e.highlighted?e.highlighted=!1:Array.from(this.resourcesService.getResources().values()).filter(function(e){return e.highlighted}).length<7?e.highlighted=!0:this.modalService.info("Too many highlighted resources")},e.prototype.isNotCoins=function(e){return e.resource!==vu.COINS},e.prototype.isDev=function(){return!Gu.production},e.prototype.addDevRes=function(e){this.resourcesService.increaseResource(e,5,!0)},e.prototype.getResourceDescription=function(e){var n="";return e.hasResourceType(Cu.CONSUMABLE)&&(n+="nutrition: "+rs.getResource(e.resource).POWER),e.hasResourceType(Cu.FUEL)&&(n+="heating energy: "+rs.getResource(e.resource).POWER),""!==n?"<hr>"+n:n},e.prototype.getResourceConsumers=function(e){var n="<b>used by:</b><br>",t=this.resourcesService.getResourceUses(e.resource),r=[];return t&&(t.slice().forEach(function(e){var n=r.find(function(n){return n[0]===e.userName});n?n[1]+=e.value:r.push([e.userName,e.value])}),r.sort(function(e,n){return e[0].localeCompare(n[0])}).forEach(function(e){n+=e[0]+": "+e[1]+"<br>"})),"<b>used by:</b><br>"!==n?"<hr>"+n:""},e}(),Fg=gl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:100%;max-height:100%;font-size:1em;margin:.7%;text-align:center}#resourcesTitle[_ngcontent-%COMP%]{display:flex;flex-direction:row;font-size:1.3em;font-weight:bolder;vertical-align:middle}#center[_ngcontent-%COMP%]{flex:10 0 auto}.side[_ngcontent-%COMP%]{flex:0 0 25%;font-size:.6em;width:15%;margin:3px;display:inline-block}#categories[_ngcontent-%COMP%]{display:flex;flex-direction:row;border:1px solid #000;height:94%;text-align:center}.category[_ngcontent-%COMP%]{text-align:left;flex:1 0 0;display:flex;flex-direction:column;border:1px solid #000}.resource[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-left:3px;width:100%;vertical-align:middle}.title[_ngcontent-%COMP%]{text-align:center;padding:2px 0;width:100%;font-weight:bolder;font-size:1em;margin-bottom:5px;display:block;border-bottom:1px solid #000}.highlight[_ngcontent-%COMP%]{flex:1 0 auto;text-align:right;margin-right:3px}.highlight[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}app-icon[_ngcontent-%COMP%]{flex:0 0 auto;margin-right:3px}.manage[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:22px;width:22px}.greyout[_ngcontent-%COMP%]{opacity:.3}.prioritise[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:22px;width:22px}.full[_ngcontent-%COMP%]{font-weight:600}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}hr[_ngcontent-%COMP%]{border-color:#000}.center[_ngcontent-%COMP%]{text-align:center}"]],data:{}});function Ug(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.addDevRes(e.parent.parent.context.$implicit.resource)&&r),r},null,null)),(e()(),io(-1,null,["+"]))],null,null)}function Hg(e){return so(0,[(e()(),Yl(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),io(1,null,["","/",""]))],null,function(e,n){var t=n.parent.parent.context.$implicit.getAmount(),r=n.parent.parent.context.$implicit.getLimit();e(n,1,0,t,r)})}function Gg(e){return so(0,[(e()(),Yl(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),io(1,null,["","/",""]))],null,function(e,n){var t=n.parent.parent.context.$implicit.getAmount(),r=n.parent.parent.context.$implicit.getLimit();e(n,1,0,t,r)})}function Bg(e){return so(0,[(e()(),Yl(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),io(1,null,["",""]))],null,function(e,n){var t=n.parent.parent.context.$implicit.getAmount();e(n,1,0,t)})}function Vg(e){return so(0,[(e()(),Yl(0,0,null,null,4,"span",[],null,null,null,null,null)),(e()(),Yl(1,0,null,null,3,"span",[["class","prioritise"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=0!=(e.parent.parent.context.$implicit.prioritise=!e.parent.parent.context.$implicit.prioritise)&&r),r},null,null)),Mi(2,278528,null,0,Ms,[Br,Vr,Pn,xn],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),ro(3,{greyout:0}),(e()(),Yl(4,0,null,null,0,"img",[["draggable","false"],["src","assets/trade.svg"],["title","prioritise on market"]],null,null,null,null,null))],function(e,n){var t=e(n,3,0,!n.parent.parent.context.$implicit.prioritise);e(n,2,0,"prioritise",t)},null)}function Wg(e){return so(0,[(e()(),Yl(0,0,null,null,29,"div",[["class","resource"]],null,null,null,null,null)),(e()(),Yl(1,0,null,null,17,"span",[["class","icon"]],null,null,null,null,null)),(e()(),Yl(2,0,null,null,8,"span",[["appTooltip",""],["class","tooltip"]],null,[[null,"mousemove"]],function(e,n,t){var r=!0;return"mousemove"===n&&(r=!1!==Ei(e,3).onmousemove(t)&&r),r},null,null)),Mi(3,16384,null,0,af,[],{elementId:[0,"elementId"]},null),(e()(),Yl(4,0,null,null,4,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),Yl(5,0,null,null,1,"div",[["class","center"]],null,null,null,null,null)),(e()(),io(6,null,["",""])),(e()(),Yl(7,0,null,null,0,"div",[["class","center"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Yl(8,0,null,null,0,"div",[["class","center"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Yl(9,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(10,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),jl(16777216,null,null,1,null,Ug)),Mi(12,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,Hg)),Mi(14,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,Gg)),Mi(16,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,Bg)),Mi(18,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(19,0,null,null,10,"span",[["class","highlight"]],null,null,null,null,null)),(e()(),Yl(20,0,null,null,3,"span",[["class","manage"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.openManageModal(e.parent.context.$implicit)&&r),r},null,null)),Mi(21,278528,null,0,Ms,[Br,Vr,Pn,xn],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),ro(22,{greyout:0}),(e()(),Yl(23,0,null,null,0,"img",[["draggable","false"],["src","assets/manage.svg"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,Vg)),Mi(25,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(26,0,null,null,3,"span",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.highlightResource(e.parent.context.$implicit)&&r),r},null,null)),Mi(27,278528,null,0,Ms,[Br,Vr,Pn,xn],{ngClass:[0,"ngClass"]},null),ro(28,{greyout:0}),(e()(),Yl(29,0,null,null,0,"img",[["draggable","false"],["src","assets/eye.svg"],["title","add to header"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,3,0,n.parent.context.$implicit.resource);var r=n.parent.context.$implicit.getName();e(n,10,0,r,"resources",""),e(n,12,0,t.isDev());var l=n.parent.context.$implicit.getAmount()===n.parent.context.$implicit.getLimit();e(n,14,0,l);var i=t.isNotCoins(n.parent.context.$implicit)&&n.parent.context.$implicit.getAmount()!==n.parent.context.$implicit.getLimit();e(n,16,0,i),e(n,18,0,!t.isNotCoins(n.parent.context.$implicit));var o=e(n,22,0,!n.parent.context.$implicit.options.isUsed());e(n,21,0,"manage",o),e(n,25,0,t.isMarketEnabled());var u=e(n,28,0,!n.parent.context.$implicit.highlighted);e(n,27,0,u)},function(e,n){var t=n.component;e(n,4,0,Vl(1,"",n.parent.context.$implicit.resource,"")),e(n,6,0,n.parent.context.$implicit.name),e(n,7,0,t.getResourceDescription(n.parent.context.$implicit)),e(n,8,0,t.getResourceConsumers(n.parent.context.$implicit))})}function jg(e){return so(0,[(e()(),Yl(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,Wg)),Mi(2,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,2,0,n.context.$implicit.visible)},null)}function Yg(e){return so(0,[(e()(),Yl(0,0,null,null,4,"div",[["class","category"]],null,null,null,null,null)),(e()(),Yl(1,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),io(2,null,["",""])),(e()(),jl(16777216,null,null,1,null,jg)),Mi(4,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,4,0,n.component.getResourcesList(n.context.$implicit))},function(e,n){e(n,2,0,n.context.$implicit)})}function zg(e){return so(0,[(e()(),Yl(0,0,null,null,13,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Yl(1,0,null,null,9,"span",[["id","resourcesTitle"]],null,null,null,null,null)),(e()(),Yl(2,0,null,null,0,"span",[["class","side"]],null,null,null,null,null)),(e()(),Yl(3,0,null,null,1,"span",[["id","center"]],null,null,null,null,null)),(e()(),io(-1,null,["Resources"])),(e()(),Yl(5,0,null,null,5,"input",[["class","side"],["placeholder","filter"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var r=!0,l=e.component;return"input"===n&&(r=!1!==Ei(e,6)._handleInput(t.target.value)&&r),"blur"===n&&(r=!1!==Ei(e,6).onTouched()&&r),"compositionstart"===n&&(r=!1!==Ei(e,6)._compositionStart()&&r),"compositionend"===n&&(r=!1!==Ei(e,6)._compositionEnd(t.target.value)&&r),"ngModelChange"===n&&(r=!1!==(l.filterText=t)&&r),r},null,null)),Mi(6,16384,null,0,Cf,[xn,Pn,[2,Tf]],null,null),Li(1024,null,Of,function(e){return[e]},[Cf]),Mi(8,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),Li(2048,null,Nf,null,[pg]),Mi(10,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),Yl(11,0,null,null,2,"div",[["id","categories"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,Yg)),Mi(13,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,8,0,t.filterText),e(n,13,0,t.categories)},function(e,n){e(n,5,0,Ei(n,10).ngClassUntouched,Ei(n,10).ngClassTouched,Ei(n,10).ngClassPristine,Ei(n,10).ngClassDirty,Ei(n,10).ngClassValid,Ei(n,10).ngClassInvalid,Ei(n,10).ngClassPending)})}function Kg(e){return so(0,[(e()(),Yl(0,0,null,null,1,"app-resources",[],null,null,null,zg,Fg)),Mi(1,114688,null,0,xg,[Lg,Ig,Ag,wg],null,null)],function(e,n){e(n,1,0)},null)}var qg=ai("app-resources",xg,Kg,{},{},[]),$g=function(){function e(e){this.servicesService=e,this.rations=es.FOOD_RATIONS,this.clothes=es.CLOTHES_RATIONS,this.alcohol=es.ALCOHOL_RATIONS,this.furClothes=es.ALLOW_FUR_CLOTHES,this.foodNutrition=es.SHOW_FOOD_NUTRITION,this.complexWorkers=!1,e.addService(Nu.MANAGEMENT,this)}return e.prototype.load=function(e){this.rations=e.rations,this.clothes=e.clothes,this.alcohol=e.alcohol,this.furClothes=e.furClothes,this.foodNutrition=e.foodNutrition,this.complexWorkers=e.complexWorkers},e.prototype.save=function(){return{rations:this.rations,clothes:this.clothes,alcohol:this.alcohol,furClothes:this.furClothes,foodNutrition:this.foodNutrition,complexWorkers:this.complexWorkers}},e.prototype.reset=function(e,n){this.rations=es.FOOD_RATIONS,this.clothes=es.CLOTHES_RATIONS,this.alcohol=es.ALCOHOL_RATIONS,this.furClothes=es.ALLOW_FUR_CLOTHES,this.foodNutrition=es.SHOW_FOOD_NUTRITION,this.complexWorkers=!1},e.prototype.getRations=function(){return this.rations},e.prototype.getClothesRations=function(){return this.clothes},e.prototype.getAlcoholRations=function(){return this.alcohol},e.prototype.setRations=function(e){this.rations=e},e.prototype.setClothesRations=function(e){this.clothes=e},e.prototype.setAlcoholRations=function(e){this.alcohol=e},e.prototype.toggleFurClothes=function(){this.furClothes=!this.furClothes},e.prototype.getFurClothes=function(){return this.furClothes},e.prototype.toggleFoodNutrition=function(){this.foodNutrition=!this.foodNutrition},e.prototype.getFoodNutrition=function(){return this.foodNutrition},e.prototype.toggleComplexWorkers=function(){this.complexWorkers=!this.complexWorkers},e.prototype.getComplexWorkers=function(){return this.complexWorkers},e.ngInjectableDef=ve({factory:function(){return new e(ze(Sg))},token:e,providedIn:"root"}),e}(),Qg=function(){function e(e,n,t){var r=this;this.servicesService=e,this.calendarService=n,this.logService=t,this.buildingEffects=[],this.natureEffects=[],this.armyEffects=[],e.addService(Nu.EFFECTS,this),this.daySubscription=n.registerForDayChange().subscribe(function(e){r.buildingEffects.forEach(function(e){e.duration>0&&(e.duration-=1)}),r.armyEffects.forEach(function(e){e.duration>0&&(e.duration-=1)}),r.natureEffects.forEach(function(e){e.duration>0&&(e.duration-=1)})})}return e.prototype.load=function(e){var n=this;this.buildingEffects=[],e.buildingEffects.forEach(function(e){n.buildingEffects.push(new Du(e.name,e.building,e.effect,e.duration))}),this.armyEffects=[],e.armyEffects.forEach(function(e){n.armyEffects.push(new Lu(e.name,e.troop,e.effect,e.duration))}),this.natureEffects=[],e.natureEffects.forEach(function(e){n.natureEffects.push(new Uu(e.name,e.effect,e.duration))})},e.prototype.save=function(){return{buildingEffects:this.buildingEffects,armyEffects:this.armyEffects,natureEffects:this.natureEffects}},e.prototype.reset=function(e,n){e?(this.buildingEffects=[],this.armyEffects=[],this.natureEffects=[]):n?(this.buildingEffects=this.buildingEffects.filter(function(e){return e.isRoyal()}),this.armyEffects=this.armyEffects.filter(function(e){return e.isRoyal()}),this.natureEffects=this.natureEffects.filter(function(e){return e.isRoyal()})):(this.buildingEffects=this.buildingEffects.filter(function(e){return e.isRoyal()||e.isWonder()}),this.armyEffects=this.armyEffects.filter(function(e){return e.isRoyal()||e.isWonder()}),this.natureEffects=this.natureEffects.filter(function(e){return e.isRoyal()||e.isWonder()}))},e.prototype.tick=function(e){this.buildingEffects=this.buildingEffects.filter(function(e){return 0!==e.duration}),this.armyEffects=this.armyEffects.filter(function(e){return 0!==e.duration}),this.natureEffects=this.natureEffects.filter(function(e){return 0!==e.duration})},e.prototype.getBuildingEffectsValue=function(e,n,t){void 0===n&&(n=!1),void 0===t&&(t=-1);var r=0;return t>0?this.buildingEffects.filter(function(n){return n.building===e||n.building===bu.ALL}).filter(function(e){return e.isPermanent()===n}).filter(function(e){return!e.isBuff()||e.isBuff()&&e.buff===t}).forEach(function(e){return r+=e.effect}):this.buildingEffects.filter(function(n){return n.building===e||n.building===bu.ALL}).filter(function(e){return e.isPermanent()===n}).forEach(function(e){return r+=e.effect}),r},e.prototype.getBuildingEffects=function(e,n){return void 0===n&&(n=-1),e?n>0?this.buildingEffects.filter(function(n){return n.building===e||n.building===bu.ALL}).filter(function(e){return e.buff===n}):this.buildingEffects.filter(function(n){return n.building===e||n.building===bu.ALL}):this.buildingEffects},e.prototype.hasWonderEffects=function(e){return this.buildingEffects.filter(function(n){return n.name===e}).length>0},e.prototype.getNatureEffectsValue=function(){var e=0;return this.natureEffects.forEach(function(n){return e+=n.effect}),e},e.prototype.getNatureEffects=function(){return this.natureEffects},e.prototype.addNatureEffect=function(e,n){if(void 0===n&&(n=!0),this.natureEffects.push(e),n){var t=e.name;e.isPermanent()?t+=" will permanently affect ":t+=" will affect ",t+="most natural sources with ",t+=e.effect>0?"+"+e.effect+"%":e.effect+"%",t+=" of their base power",e.isPermanent()||(t+=" for "+e.duration+" days"),this.logService.log(t)}},e.prototype.addBuildingEffect=function(e,n){if(void 0===n&&(n=!0),this.buildingEffects.push(e),n){var t=e.name;e.isPermanent()?t+=" will permanently affect ":t+=" will affect ",t+=e.building===bu.ALL?"all buildings with ":Au.prepareBuildingName(e.building)+" with ",t+=e.effect>0?"+"+e.effect+"%":e.effect+"%",t+=e.building===bu.ALL?" of their base power":" of its base power",e.isPermanent()||(t+=" for "+e.duration+" days"),this.logService.log(t)}},e.prototype.addArmyEffect=function(e,n){if(void 0===n&&(n=!0),this.armyEffects.push(e),n){var t=e.name;e.isPermanent()?t+=" will permanently affect ":t+=" will affect ",t+=e.troop===Iu.ALL?"all troops with ":Au.prepareTroopName(e.troop)+" with ",t+=e.effect>0?"+"+e.effect+"%":e.effect+"%",t+=" of their base strength and defense",e.isPermanent()||(t+=" for "+e.duration+" days"),this.logService.log(t)}},e.prototype.getArmyEffects=function(){return this.armyEffects},e.ngInjectableDef=ve({factory:function(){return new e(ze(Sg),ze(Cg),ze(_g))},token:e,providedIn:"root"}),e}(),Zg=function(){function e(e,n,t){this.managementService=e,this.effectsService=n,this.gameService=t}return e.prototype.ngOnInit=function(){},e.prototype.getRations=function(){return this.managementService.getRations()},e.prototype.changeFoodValue=function(e){this.managementService.setRations(e.target.value)},e.prototype.changeClothesValue=function(e){this.managementService.setClothesRations(e.target.value)},e.prototype.changeAlcoholValue=function(e){this.managementService.setAlcoholRations(e.target.value)},e.prototype.getClothesRations=function(){return this.managementService.getClothesRations()},e.prototype.getAlcoholRations=function(){return this.managementService.getAlcoholRations()},e.prototype.getBuildingsEffects=function(){return this.effectsService.getBuildingEffects().filter(function(e){return!e.isBuff()}).sort(function(e,n){return e.isPermanent()&&!n.isPermanent()?-1:e.isPermanent()&&n.isPermanent()?0:!e.isPermanent()&&n.isPermanent()?1:void 0})},e.prototype.getArmyEffects=function(){return this.effectsService.getArmyEffects()},e.prototype.getBuildingName=function(e){return Au.prepareBuildingName(e)},e.prototype.getTroopName=function(e){return Au.prepareTroopName(e)},e.prototype.updateFurClothes=function(){this.managementService.toggleFurClothes()},e.prototype.getFurClothes=function(){return this.managementService.getFurClothes()},e.prototype.updateFoodNutrition=function(){this.managementService.toggleFoodNutrition()},e.prototype.getFoodNutrition=function(){return this.managementService.getFoodNutrition()},e.prototype.updateComplexWorkers=function(){this.managementService.toggleComplexWorkers()},e.prototype.getComplexWorkers=function(){return this.managementService.getComplexWorkers()},e.prototype.isHREnabled=function(){return this.gameService.isEnabled(Eu.HUMAN_RESOURCES)},e}(),Xg=gl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{margin:.5%;height:99%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}.label[_ngcontent-%COMP%]{display:inline-block;width:80px}.slidecontainer[_ngcontent-%COMP%]{display:inline-block;width:150px}.slider[_ngcontent-%COMP%]{-webkit-appearance:none;width:100%;height:10px;border-radius:5px;background:var(--passive-colour);outline:0;opacity:.7;transition:opacity .2s}.slider[_ngcontent-%COMP%]:hover{opacity:1}.slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:15px;height:15px;border-radius:50%;background:var(--active-colour);cursor:pointer}.slider[_ngcontent-%COMP%]::-moz-range-thumb{width:15px;height:15px;border-radius:50%;background:var(--active-colour);cursor:pointer}#buildingEffects[_ngcontent-%COMP%]{height:45%;border:1px solid #000}#armyEffects[_ngcontent-%COMP%]{height:29%;border:1px solid #000}.rows[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:center;height:90.5%;overflow-y:auto}.row[_ngcontent-%COMP%]{display:flex;border:1px solid #000;margin:3px}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{border-right:none}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){flex:0 0 7%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){flex:0 0 35%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){flex:0 0 30%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(4){flex:0 0 13%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(5){flex:0 0 15%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:auto;border-right:1px solid #000}.headers[_ngcontent-%COMP%]{margin:3px 3px 0;display:flex;width:98.3%;flex-direction:row;text-align:center;font-size:.9em}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border:1px solid #000;border-left:none}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-of-type{border-left:1px solid #000}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){flex:0 0 7%}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){flex:0 0 35%}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){flex:0 0 30%}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(4){flex:0 0 13%}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(5){flex:0 0 15%}.positive[_ngcontent-%COMP%]{color:#006400}.negative[_ngcontent-%COMP%]{color:#8b0000}"]],data:{}});function Jg(e){return so(0,[(e()(),Yl(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),Yl(1,0,null,null,0,"input",[["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var r=!0;return"change"===n&&(r=!1!==e.component.updateComplexWorkers()&&r),r},null,null)),(e()(),io(-1,null,[" change simple building worker hiring of some buildings to rule based settings "]))],null,function(e,n){e(n,1,0,n.component.getComplexWorkers())})}function ev(e){return so(0,[(e()(),Yl(0,0,null,null,1,"span",[["class","positive"]],null,null,null,null,null)),(e()(),io(1,null,["+","% "]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.effect)})}function nv(e){return so(0,[(e()(),Yl(0,0,null,null,1,"span",[["class","negative"]],null,null,null,null,null)),(e()(),io(1,null,["","% "]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.effect)})}function tv(e){return so(0,[(e()(),Yl(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(1,null,[""," "]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.duration)})}function rv(e){return so(0,[(e()(),Yl(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["permanent"]))],null,null)}function lv(e){return so(0,[(e()(),Yl(0,0,null,null,14,"div",[["class","row"]],null,null,null,null,null)),(e()(),Yl(1,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(2,null,["","."])),(e()(),Yl(3,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(4,null,["",""])),(e()(),Yl(5,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(6,null,["",""])),(e()(),jl(16777216,null,null,1,null,ev)),Mi(8,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,nv)),Mi(10,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,tv)),Mi(12,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,rv)),Mi(14,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,8,0,n.context.$implicit.effect>=0),e(n,10,0,n.context.$implicit.effect<0),e(n,12,0,n.context.$implicit.duration>0),e(n,14,0,n.context.$implicit.duration<0)},function(e,n){var t=n.component;e(n,2,0,n.context.index+1),e(n,4,0,n.context.$implicit.name),e(n,6,0,t.getBuildingName(n.context.$implicit.building))})}function iv(e){return so(0,[(e()(),Yl(0,0,null,null,1,"span",[["class","positive"]],null,null,null,null,null)),(e()(),io(1,null,["+","% "]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.effect)})}function ov(e){return so(0,[(e()(),Yl(0,0,null,null,1,"span",[["class","negative"]],null,null,null,null,null)),(e()(),io(1,null,["","% "]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.effect)})}function uv(e){return so(0,[(e()(),Yl(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(1,null,[""," "]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.duration)})}function sv(e){return so(0,[(e()(),Yl(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["permanent"]))],null,null)}function av(e){return so(0,[(e()(),Yl(0,0,null,null,14,"div",[["class","row"]],null,null,null,null,null)),(e()(),Yl(1,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(2,null,["","."])),(e()(),Yl(3,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(4,null,["",""])),(e()(),Yl(5,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(6,null,["",""])),(e()(),jl(16777216,null,null,1,null,iv)),Mi(8,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,ov)),Mi(10,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,uv)),Mi(12,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,sv)),Mi(14,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,8,0,n.context.$implicit.effect>=0),e(n,10,0,n.context.$implicit.effect<0),e(n,12,0,n.context.$implicit.duration>0),e(n,14,0,n.context.$implicit.duration<0)},function(e,n){var t=n.component;e(n,2,0,n.context.index+1),e(n,4,0,n.context.$implicit.name),e(n,6,0,t.getTroopName(n.context.$implicit.troop))})}function cv(e){return so(0,[(e()(),Yl(0,0,null,null,62,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Yl(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),Yl(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["Management"])),(e()(),Yl(4,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["Rations"])),(e()(),Yl(6,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(7,0,null,null,6,"div",[],null,null,null,null,null)),(e()(),Yl(8,0,null,null,1,"span",[["class","label"]],null,null,null,null,null)),(e()(),io(9,null,["food: ",""])),(e()(),Yl(10,0,null,null,1,"div",[["class","slidecontainer"]],null,null,null,null,null)),(e()(),Yl(11,0,null,null,0,"input",[["class","slider"],["max","4"],["min","1"],["type","range"],["value","2"]],[[8,"value",0]],[[null,"change"]],function(e,n,t){var r=!0;return"change"===n&&(r=!1!==e.component.changeFoodValue(t)&&r),r},null,null)),(e()(),Yl(12,0,null,null,0,"input",[["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var r=!0;return"change"===n&&(r=!1!==e.component.updateFoodNutrition()&&r),r},null,null)),(e()(),io(-1,null,[" show total food nutrition in village tab "])),(e()(),Yl(14,0,null,null,6,"div",[],null,null,null,null,null)),(e()(),Yl(15,0,null,null,1,"span",[["class","label"]],null,null,null,null,null)),(e()(),io(16,null,["clothes: ",""])),(e()(),Yl(17,0,null,null,1,"div",[["class","slidecontainer"]],null,null,null,null,null)),(e()(),Yl(18,0,null,null,0,"input",[["class","slider"],["max","4"],["min","1"],["type","range"],["value","2"]],[[8,"value",0]],[[null,"change"]],function(e,n,t){var r=!0;return"change"===n&&(r=!1!==e.component.changeClothesValue(t)&&r),r},null,null)),(e()(),Yl(19,0,null,null,0,"input",[["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var r=!0;return"change"===n&&(r=!1!==e.component.updateFurClothes()&&r),r},null,null)),(e()(),io(-1,null,[" allow fur when no clothes available "])),(e()(),Yl(21,0,null,null,1,"span",[["class","label"]],null,null,null,null,null)),(e()(),io(22,null,["alcohol: ",""])),(e()(),Yl(23,0,null,null,1,"div",[["class","slidecontainer"]],null,null,null,null,null)),(e()(),Yl(24,0,null,null,0,"input",[["class","slider"],["max","4"],["min","1"],["type","range"],["value","1"]],[[8,"value",0]],[[null,"change"]],function(e,n,t){var r=!0;return"change"===n&&(r=!1!==e.component.changeAlcoholValue(t)&&r),r},null,null)),(e()(),Yl(25,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,Jg)),Mi(27,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(28,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(29,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["Buildings effects"])),(e()(),Yl(31,0,null,null,14,"div",[["id","buildingEffects"]],null,null,null,null,null)),(e()(),Yl(32,0,null,null,10,"div",[["class","headers"]],null,null,null,null,null)),(e()(),Yl(33,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["#"])),(e()(),Yl(35,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["name"])),(e()(),Yl(37,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["building"])),(e()(),Yl(39,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["effect"])),(e()(),Yl(41,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["duration"])),(e()(),Yl(43,0,null,null,2,"div",[["class","rows"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,lv)),Mi(45,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null),(e()(),Yl(46,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["Army effects"])),(e()(),Yl(48,0,null,null,14,"div",[["id","armyEffects"]],null,null,null,null,null)),(e()(),Yl(49,0,null,null,10,"div",[["class","headers"]],null,null,null,null,null)),(e()(),Yl(50,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["#"])),(e()(),Yl(52,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["name"])),(e()(),Yl(54,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["building"])),(e()(),Yl(56,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["effect"])),(e()(),Yl(58,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["duration"])),(e()(),Yl(60,0,null,null,2,"div",[["class","rows"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,av)),Mi(62,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,27,0,t.isHREnabled()),e(n,45,0,t.getBuildingsEffects()),e(n,62,0,t.getArmyEffects())},function(e,n){var t=n.component;e(n,9,0,.5*t.getRations()),e(n,11,0,t.getRations()),e(n,12,0,t.getFoodNutrition()),e(n,16,0,t.getClothesRations()),e(n,18,0,t.getClothesRations()),e(n,19,0,t.getFurClothes()),e(n,22,0,t.getAlcoholRations()),e(n,24,0,t.getAlcoholRations())})}function pv(e){return so(0,[(e()(),Yl(0,0,null,null,1,"app-management",[],null,null,null,cv,Xg)),Mi(1,114688,null,0,Zg,[$g,Qg,wg],null,null)],function(e,n){e(n,1,0)},null)}var hv,dv=ai("app-management",Zg,pv,{},{},[]),fv=function(){function e(e,n,t,r,l,i){void 0===i&&(i=!1),this.canceled=!1,this.id=e,this.resource=n,this.amount=t,this.cost=r,this.craftingDifficulty=l,this.available=i}return e.prototype.getResource=function(){return this.resource},e}(),gv=function(){function e(e,n){this.servicesService=e,this.resourcesService=n,this.recipes=[],e.addService(Nu.RECIPE,this),this.initRecipes()}return e.prototype.initRecipes=function(){var e=this;this.recipes=[],Object.entries(us.RECIPES).forEach(function(n){var t=new Map;n[1].COST.forEach(function(e){return t.set(e.resource,e.amount)}),e.recipes.push(new fv(Pu[n[0]],n[1].RESOURCE,n[1].AMOUNT?n[1].AMOUNT:1,t,n[1].CRAFTING,!1))}),this.recipes.find(function(e){return e.id===Pu.PLANK}).available=!0,this.recipes.find(function(e){return e.id===Pu.CUT_STONE}).available=!0,this.recipes.find(function(e){return e.id===Pu.LEATHER}).available=!0,Gu.production||Object.values(Pu).filter(function(e){return!isNaN(e)}).forEach(function(n){return e.enable(n)})},e.prototype.getRecipes=function(){return this.recipes.filter(function(e){return e.available})},e.prototype.getRecipeById=function(e){return this.recipes.find(function(n){return n.id===e})},e.prototype.enable=function(e){var n=this,t=this.recipes.find(function(n){return n.id===e});this.resourcesService.makeVisible(t.getResource()),Array.from(t.cost.keys()).forEach(function(e){return n.resourcesService.makeVisible(e)}),t.available=!0},e.prototype.disable=function(e){var n=this.recipes.find(function(n){return n.id===e});this.resourcesService.makeVisible(n.getResource()),n.available=!1},e.prototype.load=function(e){var n=this;this.initRecipes(),e.recipes.forEach(function(e){var t=n.recipes.find(function(n){return n.id===e});t&&(t.available=!0)})},e.prototype.save=function(){return{recipes:this.recipes.filter(function(e){return e.available}).map(function(e){return e.id})}},e.prototype.reset=function(e,n){this.initRecipes()},e.ngInjectableDef=ve({factory:function(){return new e(ze(Sg),ze(Lg))},token:e,providedIn:"root"}),e}(),vv="undefined"!=typeof Intl&&Intl.v8BreakIterator,mv=function(){function e(e){this._platformId=e,this.isBrowser=this._platformId?this._platformId===Xs:"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!vv)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}return e.ngInjectableDef=ve({factory:function(){return new e(ze(kt,8))},token:e,providedIn:"root"}),e}();function yv(e){return function(){if(null==hv&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){return hv=!0}}))}finally{hv=hv||!1}return hv}()?e:!!e.capture}function Sv(e){return null!=e&&""+e!="false"}var Ev=yv({passive:!1,capture:!0}),bv=function(){function e(e,n){var t=this;this._ngZone=e,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=new Set,this._globalListeners=new Map,this.pointerMove=new L,this.pointerUp=new L,this._preventScrollListener=function(e){t._activeDragInstances.size&&e.preventDefault()},this._document=n}return e.prototype.registerDropContainer=function(e){if(!this._dropInstances.has(e)){if(this.getDropContainer(e.id))throw Error('Drop instance with id "'+e.id+'" has already been registered.');this._dropInstances.add(e)}},e.prototype.registerDragItem=function(e){var n=this;this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(function(){n._document.addEventListener("touchmove",n._preventScrollListener,Ev)})},e.prototype.removeDropContainer=function(e){this._dropInstances.delete(e)},e.prototype.removeDragItem=function(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._preventScrollListener,Ev)},e.prototype.startDragging=function(e,n){var t=this;if(this._activeDragInstances.add(e),1===this._activeDragInstances.size){var r=n.type.startsWith("touch"),l=r?"touchend":"mouseup";this._globalListeners.set(r?"touchmove":"mousemove",{handler:function(e){return t.pointerMove.next(e)},options:Ev}).set(l,{handler:function(e){return t.pointerUp.next(e)},options:!0}),r||this._globalListeners.set("wheel",{handler:this._preventScrollListener,options:Ev}),this._ngZone.runOutsideAngular(function(){t._globalListeners.forEach(function(e,n){t._document.addEventListener(n,e.handler,e.options)})})}},e.prototype.stopDragging=function(e){this._activeDragInstances.delete(e),0===this._activeDragInstances.size&&this._clearGlobalListeners()},e.prototype.isDragging=function(e){return this._activeDragInstances.has(e)},e.prototype.getDropContainer=function(e){return Array.from(this._dropInstances).find(function(n){return n.id===e})},e.prototype.ngOnDestroy=function(){var e=this;this._dragInstances.forEach(function(n){return e.removeDragItem(n)}),this._dropInstances.forEach(function(n){return e.removeDropContainer(n)}),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()},e.prototype._clearGlobalListeners=function(){var e=this;this._globalListeners.forEach(function(n,t){e._document.removeEventListener(t,n.handler,n.options)}),this._globalListeners.clear()},e.ngInjectableDef=ve({factory:function(){return new e(ze(Zt),ze(Zs))},token:e,providedIn:"root"}),e}(),Ov=new ye("CDK_DRAG_PARENT");function Rv(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e}var Tv=new ye("CDK_DROP_LIST_CONTAINER");function Cv(e){var n=e.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(e)*n}function _v(e,n){return e.getPropertyValue(n).split(",").map(function(e){return e.trim()})}var Iv=new ye("CDK_DRAG_CONFIG",{providedIn:"root",factory:function(){return{dragStartThreshold:5,pointerDirectionChangeThreshold:5}}}),Av=yv({passive:!0}),wv=yv({passive:!1}),Nv=function(){function e(e,n,t,r,l,i,o,u,s){var a=this;this.element=e,this.dropContainer=n,this._ngZone=r,this._viewContainerRef=l,this._viewportRuler=i,this._dragDropRegistry=o,this._config=u,this._dir=s,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._moveEvents=new L,this._moveEventSubscriptions=0,this._pointerMoveSubscription=v.EMPTY,this._pointerUpSubscription=v.EMPTY,this._rootElementInitSubscription=v.EMPTY,this._disabled=!1,this.started=new pt,this.ended=new pt,this.entered=new pt,this.exited=new pt,this.dropped=new pt,this.moved=w.create(function(e){var n=a._moveEvents.subscribe(e);return a._moveEventSubscriptions++,function(){n.unsubscribe(),a._moveEventSubscriptions--}}),this._pointerDown=function(e){var n=a.getChildHandles();if(n.length){var t=n.find(function(n){var t=n.element.nativeElement,r=e.target;return!!r&&(r===t||t.contains(r))});!t||t.disabled||a.disabled||a._initializeDragSequence(t.element.nativeElement,e)}else a.disabled||a._initializeDragSequence(a._rootElement,e)},this._pointerMove=function(e){var n=a._getConstrainedPointerPosition(e);if(a._hasStartedDragging){if(a._hasMoved=!0,e.preventDefault(),a._updatePointerDirectionDelta(n),a.dropContainer)a._updateActiveDropContainer(n);else{var t=a._activeTransform;t.x=n.x-a._pickupPositionOnPage.x+a._passiveTransform.x,t.y=n.y-a._pickupPositionOnPage.y+a._passiveTransform.y;var r=Pv(t.x,t.y);a._rootElement.style.transform=a._initialTransform?a._initialTransform+" "+r:r,"undefined"!=typeof SVGElement&&a._rootElement instanceof SVGElement&&a._rootElement.setAttribute("transform","translate("+t.x+" "+t.y+")")}a._moveEventSubscriptions>0&&a._ngZone.run(function(){a._moveEvents.next({source:a,pointerPosition:n,event:e,delta:a._pointerDirectionDelta})})}else Math.abs(n.x-a._pickupPositionOnPage.x)+Math.abs(n.y-a._pickupPositionOnPage.y)>=a._config.dragStartThreshold&&(a._hasStartedDragging=!0,a._ngZone.run(function(){return a._startDragSequence(e)}))},this._pointerUp=function(){if(a._isDragging()&&(a._removeSubscriptions(),a._dragDropRegistry.stopDragging(a),a._hasStartedDragging))return a.dropContainer?void a._animatePreviewToPlaceholder().then(function(){a._cleanupDragArtifacts(),a._dragDropRegistry.stopDragging(a)}):(a._passiveTransform.x=a._activeTransform.x,a._passiveTransform.y=a._activeTransform.y,a._ngZone.run(function(){return a.ended.emit({source:a})}),void a._dragDropRegistry.stopDragging(a))},this._document=t,o.registerDragItem(this)}return Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled||this.dropContainer&&this.dropContainer.disabled},set:function(e){this._disabled=Sv(e)},enumerable:!0,configurable:!0}),e.prototype.getPlaceholderElement=function(){return this._placeholder},e.prototype.getRootElement=function(){return this._rootElement},e.prototype.reset=function(){this._rootElement.style.transform="",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}},e.prototype.ngAfterViewInit=function(){var e=this;this._rootElementInitSubscription=this._ngZone.onStable.asObservable().pipe(Da(1)).subscribe(function(){var n=e._rootElement=e._getRootElement();n.addEventListener("mousedown",e._pointerDown,wv),n.addEventListener("touchstart",e._pointerDown,Av),e._handles.changes.pipe(Va(null)).subscribe(function(){return t=n,r=e.getChildHandles().length>0,void Rv(t.style,{touchAction:r?"":"none",webkitUserDrag:r?"":"none",webkitTapHighlightColor:r?"":"transparent",userSelect:l=r?"":"none",msUserSelect:l,webkitUserSelect:l,MozUserSelect:l});var t,r,l})})},e.prototype.ngOnDestroy=function(){this._rootElement&&(this._rootElement.removeEventListener("mousedown",this._pointerDown,wv),this._rootElement.removeEventListener("touchstart",this._pointerDown,Av),this._isDragging()&&this._removeElement(this._rootElement)),this._rootElementInitSubscription.unsubscribe(),this._destroyPreview(),this._destroyPlaceholder(),this._nextSibling=null,this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this._moveEvents.complete()},e.prototype._isDragging=function(){return this._dragDropRegistry.isDragging(this)},e.prototype.getChildHandles=function(){var e=this;return this._handles.filter(function(n){return n._parentDrag===e})},e.prototype._initializeDragSequence=function(e,n){n.stopPropagation();var t=this._isDragging(),r=this._isTouchEvent(n),l=!r&&0!==n.button,i=!r&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now();if(n.target&&n.target.draggable&&"mousedown"===n.type&&n.preventDefault(),!(t||l||i)){null==this._initialTransform&&(this._initialTransform=this._rootElement.style.transform||""),this._hasStartedDragging=this._hasMoved=!1,this._initialContainer=this.dropContainer,this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollPosition=this._viewportRuler.getViewportScrollPosition(),this._pickupPositionInElement=this._previewTemplate?{x:0,y:0}:this._getPointerPositionInElement(e,n);var o=this._pickupPositionOnPage=this._getPointerPositionOnPage(n);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:o.x,y:o.y},this._dragDropRegistry.startDragging(this,n)}},e.prototype._startDragSequence=function(e){if(this.started.emit({source:this}),this._isTouchEvent(e)&&(this._lastTouchEventTime=Date.now()),this.dropContainer){var n=this._rootElement;this._nextSibling=n.nextSibling;var t=this._preview=this._createPreviewElement(),r=this._placeholder=this._createPlaceholderElement();n.style.display="none",this._document.body.appendChild(n.parentNode.replaceChild(r,n)),this._document.body.appendChild(t),this.dropContainer.start()}},e.prototype._cleanupDragArtifacts=function(){var e=this;this._rootElement.style.display="",this._nextSibling?this._nextSibling.parentNode.insertBefore(this._rootElement,this._nextSibling):this._initialContainer.element.nativeElement.appendChild(this._rootElement),this._destroyPreview(),this._destroyPlaceholder(),this._ngZone.run(function(){var n=e.dropContainer.getItemIndex(e);e.ended.emit({source:e}),e.dropped.emit({item:e,currentIndex:n,previousIndex:e._initialContainer.getItemIndex(e),container:e.dropContainer,previousContainer:e._initialContainer}),e.dropContainer.drop(e,n,e._initialContainer),e.dropContainer=e._initialContainer})},e.prototype._updateActiveDropContainer=function(e){var n=this,t=e.x,r=e.y,l=this.dropContainer._getSiblingContainerFromPosition(this,t,r);!l&&this.dropContainer!==this._initialContainer&&this._initialContainer._canReturnItem(t,r)&&(l=this._initialContainer),l&&this._ngZone.run(function(){n.exited.emit({item:n,container:n.dropContainer}),n.dropContainer.exit(n),n.entered.emit({item:n,container:l}),n.dropContainer=l,n.dropContainer.enter(n,t,r)}),this.dropContainer._sortItem(this,t,r,this._pointerDirectionDelta),this._preview.style.transform=Pv(t-this._pickupPositionInElement.x,r-this._pickupPositionInElement.y)},e.prototype._createPreviewElement=function(){var e;if(this._previewTemplate){var n=this._viewContainerRef.createEmbeddedView(this._previewTemplate.templateRef,this._previewTemplate.data);e=n.rootNodes[0],this._previewRef=n,e.style.transform=Pv(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{var t=this._rootElement,r=t.getBoundingClientRect();(e=Dv(t)).style.width=r.width+"px",e.style.height=r.height+"px",e.style.transform=Pv(r.left,r.top)}return Rv(e.style,{position:"fixed",top:"0",left:"0",zIndex:"1000"}),e.classList.add("cdk-drag-preview"),e.setAttribute("dir",this._dir?this._dir.value:"ltr"),e},e.prototype._createPlaceholderElement=function(){var e;return this._placeholderTemplate?(this._placeholderRef=this._viewContainerRef.createEmbeddedView(this._placeholderTemplate.templateRef,this._placeholderTemplate.data),e=this._placeholderRef.rootNodes[0]):e=Dv(this._rootElement),e.classList.add("cdk-drag-placeholder"),e},e.prototype._getPointerPositionInElement=function(e,n){var t=this._rootElement.getBoundingClientRect(),r=e===this._rootElement?null:e,l=r?r.getBoundingClientRect():t,i=this._isTouchEvent(n)?n.targetTouches[0]:n;return{x:l.left-t.left+(i.pageX-l.left-this._scrollPosition.left),y:l.top-t.top+(i.pageY-l.top-this._scrollPosition.top)}},e.prototype._animatePreviewToPlaceholder=function(){var e=this;if(!this._hasMoved)return Promise.resolve();var n=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._preview.style.transform=Pv(n.left,n.top);var t=function(e){var n=getComputedStyle(e),t=_v(n,"transition-property"),r=t.find(function(e){return"transform"===e||"all"===e});if(!r)return 0;var l=t.indexOf(r),i=_v(n,"transition-duration"),o=_v(n,"transition-delay");return Cv(i[l])+Cv(o[l])}(this._preview);return 0===t?Promise.resolve():this._ngZone.runOutsideAngular(function(){return new Promise(function(n){var r=function(t){(!t||t.target===e._preview&&"transform"===t.propertyName)&&(e._preview.removeEventListener("transitionend",r),n(),clearTimeout(l))},l=setTimeout(r,1.5*t);e._preview.addEventListener("transitionend",r)})})},e.prototype._removeElement=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},e.prototype._getPointerPositionOnPage=function(e){var n=this._isTouchEvent(e)?e.touches[0]:e;return{x:n.pageX-this._scrollPosition.left,y:n.pageY-this._scrollPosition.top}},e.prototype._getConstrainedPointerPosition=function(e){var n=this._getPointerPositionOnPage(e),t=this.dropContainer?this.dropContainer.lockAxis:null;return"x"===this.lockAxis||"x"===t?n.y=this._pickupPositionOnPage.y:"y"!==this.lockAxis&&"y"!==t||(n.x=this._pickupPositionOnPage.x),n},e.prototype._isTouchEvent=function(e){return e.type.startsWith("touch")},e.prototype._destroyPreview=function(){this._preview&&this._removeElement(this._preview),this._previewRef&&this._previewRef.destroy(),this._preview=this._previewRef=null},e.prototype._destroyPlaceholder=function(){this._placeholder&&this._removeElement(this._placeholder),this._placeholderRef&&this._placeholderRef.destroy(),this._placeholder=this._placeholderRef=null},e.prototype._updatePointerDirectionDelta=function(e){var n=e.x,t=e.y,r=this._pointerDirectionDelta,l=this._pointerPositionAtLastDirectionChange,i=Math.abs(n-l.x),o=Math.abs(t-l.y);return i>this._config.pointerDirectionChangeThreshold&&(r.x=n>l.x?1:-1,l.x=n),o>this._config.pointerDirectionChangeThreshold&&(r.y=t>l.y?1:-1,l.y=t),r},e.prototype._getRootElement=function(){if(this.rootElementSelector)for(var e=this.rootElementSelector,n=this.element.nativeElement.parentElement;n;){if(n.matches?n.matches(e):n.msMatchesSelector(e))return n;n=n.parentElement}return this.element.nativeElement},e.prototype._removeSubscriptions=function(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe()},e}();function Pv(e,n){return"translate3d("+Math.round(e)+"px, "+Math.round(n)+"px, 0)"}function Dv(e){var n=e.cloneNode(!0);return n.removeAttribute("id"),n}function Mv(e,n,t){var r=kv(n,e.length-1),l=kv(t,e.length-1);if(r!==l){for(var i=e[r],o=l<r?-1:1,u=r;u!==l;u+=o)e[u]=e[u+o];e[l]=i}}function kv(e,n){return Math.max(0,Math.min(n,e))}var Lv=function(){function e(){this._items=new Set}return e.prototype.ngOnDestroy=function(){this._items.clear()},e}(),xv=0,Fv=function(){function e(e,n,t,r,l){this.element=e,this._dragDropRegistry=n,this._changeDetectorRef=t,this._dir=r,this._group=l,this.connectedTo=[],this.orientation="vertical",this.id="cdk-drop-list-"+xv++,this._disabled=!1,this.enterPredicate=function(){return!0},this.dropped=new pt,this.entered=new pt,this.exited=new pt,this.sorted=new pt,this._dragging=!1,this._positionCache={items:[],siblings:[],self:{}},this._previousSwap={drag:null,delta:0}}return Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled},set:function(e){this._disabled=Sv(e)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this._dragDropRegistry.registerDropContainer(this),this._group&&this._group._items.add(this)},e.prototype.ngOnDestroy=function(){this._dragDropRegistry.removeDropContainer(this),this._group&&this._group._items.delete(this)},e.prototype.start=function(){this._dragging=!0,this._activeDraggables=this._draggables.toArray(),this._cachePositions(),this._changeDetectorRef.markForCheck()},e.prototype.drop=function(e,n,t){this._reset(),this.dropped.emit({item:e,currentIndex:n,previousIndex:t.getItemIndex(e),container:this,previousContainer:t})},e.prototype.enter=function(e,n,t){this.entered.emit({item:e,container:this}),this.start();var r=this._getItemIndexFromPointerPosition(e,n,t),l=this._activeDraggables.indexOf(e),i=this._activeDraggables[r],o=e.getPlaceholderElement();if(l>-1&&this._activeDraggables.splice(l,1),i&&!this._dragDropRegistry.isDragging(i)){var u=i.getRootElement();u.parentElement.insertBefore(o,u),this._activeDraggables.splice(r,0,e)}else this.element.nativeElement.appendChild(o),this._activeDraggables.push(e);o.style.transform="",this._cachePositions()},e.prototype.exit=function(e){this._reset(),this.exited.emit({item:e,container:this})},e.prototype.getItemIndex=function(e){return this._dragging?Uv("horizontal"===this.orientation&&this._dir&&"rtl"===this._dir.value?this._positionCache.items.slice().reverse():this._positionCache.items,function(n){return n.drag===e}):this._draggables.toArray().indexOf(e)},e.prototype._sortItem=function(e,n,t,r){var l=this;if(this._isPointerNearDropContainer(n,t)){var i=this._positionCache.items,o=this._getItemIndexFromPointerPosition(e,n,t,r);if(!(-1===o&&i.length>0)){var u="horizontal"===this.orientation,s=Uv(i,function(n){return n.drag===e}),a=i[o],c=i[s].clientRect,p=a.clientRect,h=s>o?1:-1;this._previousSwap.drag=a.drag,this._previousSwap.delta=u?r.x:r.y;var d=this._getItemOffsetPx(c,p,h),f=this._getSiblingOffsetPx(s,i,h),g=i.slice();Mv(i,s,o),this.sorted.emit({previousIndex:s,currentIndex:o,container:this,item:e}),i.forEach(function(n,t){if(g[t]!==n){var r=n.drag===e,i=r?d:f,o=r?e.getPlaceholderElement():n.drag.getRootElement();n.offset+=i,u?(o.style.transform="translate3d("+Math.round(n.offset)+"px, 0, 0)",l._adjustClientRect(n.clientRect,0,i)):(o.style.transform="translate3d(0, "+Math.round(n.offset)+"px, 0)",l._adjustClientRect(n.clientRect,i,0))}})}}},e.prototype._getSiblingContainerFromPosition=function(e,n,t){var r=this._positionCache.siblings.find(function(e){return Hv(e.clientRect,n,t)});return r&&r.drop.enterPredicate(e,r.drop)?r.drop:null},e.prototype._canReturnItem=function(e,n){return Hv(this._positionCache.self,e,n)},e.prototype._cachePositions=function(){var e=this,n="horizontal"===this.orientation;this._positionCache.self=this.element.nativeElement.getBoundingClientRect(),this._positionCache.items=this._activeDraggables.map(function(n){var t=(e._dragDropRegistry.isDragging(n)?n.getPlaceholderElement():n.getRootElement()).getBoundingClientRect();return{drag:n,offset:0,clientRect:{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}}}).sort(function(e,t){return n?e.clientRect.left-t.clientRect.left:e.clientRect.top-t.clientRect.top}),this._positionCache.siblings=this._getConnectedLists().map(function(e){return{drop:e,clientRect:e.element.nativeElement.getBoundingClientRect()}})},e.prototype._reset=function(){this._dragging=!1,this._activeDraggables.forEach(function(e){return e.getRootElement().style.transform=""}),this._activeDraggables=[],this._positionCache.items=[],this._positionCache.siblings=[],this._previousSwap.drag=null,this._previousSwap.delta=0},e.prototype._adjustClientRect=function(e,n,t){e.top+=n,e.bottom=e.top+e.height,e.left+=t,e.right=e.left+e.width},e.prototype._getItemIndexFromPointerPosition=function(e,n,t,r){var l=this,i="horizontal"===this.orientation;return Uv(this._positionCache.items,function(o,u,s){var a=o.drag,c=o.clientRect;return a===e?s.length<2:(!r||a!==l._previousSwap.drag||(i?r.x:r.y)!==l._previousSwap.delta)&&(i?n>=Math.floor(c.left)&&n<=Math.floor(c.right):t>=Math.floor(c.top)&&t<=Math.floor(c.bottom))})},e.prototype._isPointerNearDropContainer=function(e,n){var t=this._positionCache.self,r=.05*t.width,l=.05*t.height;return n>t.top-l&&n<t.bottom+l&&e>t.left-r&&e<t.right+r},e.prototype._getItemOffsetPx=function(e,n,t){var r="horizontal"===this.orientation,l=r?n.left-e.left:n.top-e.top;return-1===t&&(l+=r?n.width-e.width:n.height-e.height),l},e.prototype._getSiblingOffsetPx=function(e,n,t){var r="horizontal"===this.orientation,l=n[e].clientRect,i=n[e+-1*t],o=l[r?"width":"height"]*t;if(i){var u=r?"left":"top",s=r?"right":"bottom";-1===t?o-=i.clientRect[u]-l[s]:o+=l[u]-i.clientRect[s]}return o},e.prototype._getConnectedLists=function(){var e,n=this,t=(e=this.connectedTo,Array.isArray(e)?e:[e]).map(function(e){return"string"==typeof e?n._dragDropRegistry.getDropContainer(e):e});return this._group&&this._group._items.forEach(function(e){-1===t.indexOf(e)&&t.push(e)}),t.filter(function(e){return e&&e!==n})},e}();function Uv(e,n){for(var t=0;t<e.length;t++)if(n(e[t],t,e))return t;return-1}function Hv(e,n,t){return t>=e.top&&t<=e.bottom&&n>=e.left&&n<=e.right}var Gv=function(){return function(){}}(),Bv=function(e){return e[e.NONE=0]="NONE",e[e.SELECTED=1]="SELECTED",e[e.UNTIL_X=2]="UNTIL_X",e[e.CONTINUOUS=3]="CONTINUOUS",e}({}),Vv=function(){function e(e,n,t,r){this.resourcesService=e,this.servicesService=n,this.recipeService=t,this.modalService=r,this.recipeUpdate=new L,this.queue=[],this.id=1,this.queueSize=us.START_QUEUE_SIZE,n.addService(Nu.CRAFTING,this)}return e.prototype.craft=function(e,n,t){this.queue.length>=this.queueSize?this.modalService.info("Order queue is full"):this.queue.push({id:this.nextId(),recipe:e,amount:n,type:t})},e.prototype.getQueue=function(){return this.queue},e.prototype.getOrder=function(){var e=this,n=this.queue.find(function(n){if(n.type===Bv.SELECTED&&n.amount>0&&e.resourcesService.hasResources(n.recipe.cost,"Crafting"))return!0;if(n.type===Bv.UNTIL_X&&e.resourcesService.hasResources(n.recipe.cost,"Crafting")){var t=0;return e.servicesService.getService(Nu.VILLAGE).buildings.filter(function(e){return e.getBuildingType()===bu.WORKSHOP}).forEach(function(e){e.getRecipe()&&e.getRecipe().id===n.recipe.id&&(t+=n.recipe.amount)}),e.resourcesService.getResource(n.recipe.resource).amount+t<n.amount}if(n.type===Bv.CONTINUOUS&&e.resourcesService.hasResources(n.recipe.cost,"Crafting")){var r=0;e.servicesService.getService(Nu.VILLAGE).buildings.filter(function(e){return e.getBuildingType()===bu.WORKSHOP}).forEach(function(e){e.getRecipe()&&e.getRecipe().id===n.recipe.id&&(r+=n.recipe.amount)});var l=e.resourcesService.getResource(n.recipe.resource);return l.amount+r<l.limit}});return n?(this.resourcesService.decreaseResources(n.recipe.cost,"Crafting"),n.type===Bv.SELECTED&&(n.amount-=1),this.queue=this.queue.filter(function(e){return e.type!==Bv.SELECTED||e.amount>0}),n.recipe):null},e.prototype.load=function(e){var n=this;this.queue=[],Array.from(e.queue).forEach(function(e){n.queue.push({id:n.nextId(),recipe:n.recipeService.getRecipeById(e.recipeId),amount:e.amount,type:e.type})}),this.queueSize=e.queueSize},e.prototype.save=function(){return{queue:this.queue.map(function(e){return{recipeId:e.recipe.id,amount:e.amount,type:e.type}}),queueSize:this.queueSize}},e.prototype.reset=function(e,n){this.queue=[],this.id=1,this.queueSize=us.START_QUEUE_SIZE},e.prototype.registerForUpdate=function(){return this.recipeUpdate.asObservable()},e.prototype.cancel=function(e,n){var t=this;void 0===n&&(n=!1);var r=this.queue.find(function(n){return n.id===e});if(r&&!n){this.modalService.open(mu.CONFIRM),this.modalService.setModalText("Are you sure you want to cancel crafting "+Au.prepareResourceName(r.recipe.resource)+"?");var l=this.modalService.registerForConfirmation().subscribe(function(n){n&&(t.queue=t.queue.filter(function(n){return n.id!==e}),t.recipeUpdate.next()),l.unsubscribe()})}else r&&n&&(this.queue=this.queue.filter(function(n){return n.id!==e}),this.recipeUpdate.next())},e.prototype.nextId=function(){var e=this.id;return this.id++,e},e.prototype.moveRecipeInQueue=function(e){Mv(this.queue,e.previousIndex,e.currentIndex)},e.prototype.getQueueMaxSize=function(){return this.queueSize},e.prototype.increaseQueueSize=function(e){this.queueSize+=e},e.prototype.filterQueue=function(e){var n=this;this.queue.forEach(function(t){e.includes(t.recipe.id)&&n.cancel(t.id,!0)})},e.prototype.decreaseQueueSize=function(e){this.queueSize-=e},e.ngInjectableDef=ve({factory:function(){return new e(ze(Lg),ze(Sg),ze(gv),ze(Ig))},token:e,providedIn:"root"}),e}(),Wv=function(){function e(e,n){this.craftingService=e,this.resourcesService=n,this.id=Math.random(),this.progress=0,this.amount=1,this.type=Bv.NONE,this.paid=!1,this.craftingTypes=Bv}return e.prototype.ngOnInit=function(){var e=this;this.updateSubscription=this.craftingService.registerForUpdate().subscribe(function(){e.progressRef&&(e.progressRef.nativeElement.style.width=e.progress/e.recipe.craftingDifficulty*100+"%")})},e.prototype.getResourceName=function(e){return Au.prepareResourceName(e)},e.prototype.ngAfterViewInit=function(){this.progressRef&&(this.progressRef.nativeElement.style.width=this.progress/this.recipe.craftingDifficulty*100+"%")},e.prototype.cancel=function(){null!==this.id&&this.craftingService.cancel(this.id)},e.prototype.getCost=function(){return this.recipe.cost},e.prototype.isAvailable=function(){for(var e=0,n=Array.from(this.recipe.cost);e<n.length;e++){var t=n[e];if(0!==this.resourcesService.hasResource(t[0],t[1],"Crafting"))return!1}return!0},e.prototype.checkResource=function(e){return 0===this.resourcesService.hasResource(e.key,e.value,"Crafting")},e.prototype.getResourceAmount=function(){return this.resourcesService.getResource(this.recipe.resource).amount},e}(),jv=gl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{position:relative;display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #000;font-weight:100;font-size:1.1em}#wrapperNotAvailable[_ngcontent-%COMP%]{display:inline-block;width:100%;padding:3px;text-align:center;font-size:1.1em;border:1px solid #57575a}#titleGrey[_ngcontent-%COMP%]{display:inline-block;color:#57575a}.notMet[_ngcontent-%COMP%]{color:#8b0000}.title[_ngcontent-%COMP%]{text-align:left}hr[_ngcontent-%COMP%]{border-color:#000}#progressId[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background-color:var(--active-colour);z-index:1}#text[_ngcontent-%COMP%]{position:relative;z-index:2}.costTitle[_ngcontent-%COMP%]{text-align:left}.missing[_ngcontent-%COMP%]{color:#8b0000}.tooltip[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{min-width:200px}.craftingTitle[_ngcontent-%COMP%]{text-align:left}.type[_ngcontent-%COMP%]{display:inline-block}app-icon[_ngcontent-%COMP%]{flex:0 0 auto;margin-left:3px}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center}"]],data:{}});function Yv(e){return so(0,[(e()(),Yl(0,0,null,null,1,"div",[["class","type"]],null,null,null,null,null)),(e()(),io(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.amount)})}function zv(e){return so(0,[(e()(),Yl(0,0,null,null,1,"div",[["class","type"]],null,null,null,null,null)),(e()(),io(1,null,["","/",""]))],null,function(e,n){var t=n.component;e(n,1,0,t.getResourceAmount(),t.amount)})}function Kv(e){return so(0,[(e()(),Yl(0,0,null,null,1,"div",[["class","type"]],null,null,null,null,null)),(e()(),io(-1,null,["\u221e"]))],null,null)}function qv(e){return so(0,[(e()(),Yl(0,0,null,null,1,"div",[["class","craftingTitle"]],null,null,null,null,null)),(e()(),io(1,null,["Crafted: ",""]))],null,function(e,n){e(n,1,0,n.component.recipe.amount)})}function $v(e){return so(0,[(e()(),Yl(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),Yl(1,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),io(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.value)})}function Qv(e){return so(0,[(e()(),Yl(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),Yl(1,0,null,null,1,"div",[["class","missing"]],null,null,null,null,null)),(e()(),io(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.value)})}function Zv(e){return so(0,[(e()(),Yl(0,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,$v)),Mi(2,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,Qv)),Mi(4,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(5,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(6,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){var t=n.component;e(n,2,0,t.checkResource(n.context.$implicit)),e(n,4,0,!t.checkResource(n.context.$implicit)),e(n,6,0,t.getResourceName(n.context.$implicit.key),"resources")},null)}function Xv(e){return so(0,[(e()(),Yl(0,0,null,null,24,"div",[["appTooltip",""],["class","tooltip"],["id","wrapper"]],null,[[null,"click"],[null,"mousemove"]],function(e,n,t){var r=!0,l=e.component;return"mousemove"===n&&(r=!1!==Ei(e,1).onmousemove(t)&&r),"click"===n&&(r=!1!==l.cancel()&&r),r},null,null)),Mi(1,16384,null,0,af,[],{elementId:[0,"elementId"]},null),(e()(),Yl(2,0,[[1,0],["progressId",1]],null,0,"div",[["id","progressId"]],null,null,null,null,null)),(e()(),Yl(3,0,null,null,8,"div",[["id","text"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,Yv)),Mi(5,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,zv)),Mi(7,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,Kv)),Mi(9,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),io(10,null,[" "," "])),to(11,1),(e()(),Yl(12,0,null,null,12,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),io(13,null,[" "," "])),to(14,1),(e()(),Yl(15,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Yl(16,0,null,null,1,"div",[["class","craftingTitle"]],null,null,null,null,null)),(e()(),io(17,null,["Difficulty: ",""])),(e()(),jl(16777216,null,null,1,null,qv)),Mi(19,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(20,0,null,null,1,"div",[["class","costTitle"]],null,null,null,null,null)),(e()(),io(-1,null,["Cost:"])),(e()(),jl(16777216,null,null,2,null,Zv)),Mi(23,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null),ki(0,Ks,[Vr])],function(e,n){var t=n.component;e(n,1,0,t.id),e(n,5,0,t.type===t.craftingTypes.SELECTED),e(n,7,0,t.type===t.craftingTypes.UNTIL_X),e(n,9,0,t.type===t.craftingTypes.CONTINUOUS),e(n,19,0,t.recipe.amount>1),e(n,23,0,hl(n,23,0,Ei(n,24).transform(t.getCost())))},function(e,n){var t=n.component,r=hl(n,10,0,e(n,11,0,Ei(n.parent,0),t.getResourceName(t.recipe.getResource())));e(n,10,0,r),e(n,12,0,Vl(1,"",t.id,""));var l=hl(n,13,0,e(n,14,0,Ei(n.parent,0),t.getResourceName(t.recipe.resource)));e(n,13,0,l),e(n,17,0,t.recipe.craftingDifficulty)})}function Jv(e){return so(0,[(e()(),Yl(0,0,null,null,1,"div",[["class","type"]],null,null,null,null,null)),(e()(),io(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.amount)})}function em(e){return so(0,[(e()(),Yl(0,0,null,null,1,"div",[["class","type"]],null,null,null,null,null)),(e()(),io(1,null,["","/",""]))],null,function(e,n){var t=n.component;e(n,1,0,t.getResourceAmount(),t.amount)})}function nm(e){return so(0,[(e()(),Yl(0,0,null,null,1,"div",[["class","type"]],null,null,null,null,null)),(e()(),io(-1,null,["\u221e"]))],null,null)}function tm(e){return so(0,[(e()(),Yl(0,0,null,null,1,"div",[["class","craftingTitle"]],null,null,null,null,null)),(e()(),io(1,null,["Crafted: ",""]))],null,function(e,n){e(n,1,0,n.component.recipe.amount)})}function rm(e){return so(0,[(e()(),Yl(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),Yl(1,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),io(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.value)})}function lm(e){return so(0,[(e()(),Yl(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),Yl(1,0,null,null,1,"div",[["class","missing"]],null,null,null,null,null)),(e()(),io(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.value)})}function im(e){return so(0,[(e()(),Yl(0,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,rm)),Mi(2,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,lm)),Mi(4,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(5,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(6,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){var t=n.component;e(n,2,0,t.checkResource(n.context.$implicit)),e(n,4,0,!t.checkResource(n.context.$implicit)),e(n,6,0,t.getResourceName(n.context.$implicit.key),"resources")},null)}function om(e){return so(0,[(e()(),Yl(0,0,null,null,23,"div",[["appTooltip",""],["class","tooltip"],["id","wrapperNotAvailable"]],null,[[null,"click"],[null,"mousemove"]],function(e,n,t){var r=!0,l=e.component;return"mousemove"===n&&(r=!1!==Ei(e,1).onmousemove(t)&&r),"click"===n&&(r=!1!==l.cancel()&&r),r},null,null)),Mi(1,16384,null,0,af,[],{elementId:[0,"elementId"]},null),(e()(),Yl(2,0,null,null,8,"div",[["id","titleGrey"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,Jv)),Mi(4,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,em)),Mi(6,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,nm)),Mi(8,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),io(9,null,[" "," "])),to(10,1),(e()(),Yl(11,0,null,null,12,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),io(12,null,[" "," "])),to(13,1),(e()(),Yl(14,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Yl(15,0,null,null,1,"div",[["class","craftingTitle"]],null,null,null,null,null)),(e()(),io(16,null,["Difficulty: ",""])),(e()(),jl(16777216,null,null,1,null,tm)),Mi(18,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(19,0,null,null,1,"div",[["class","costTitle"]],null,null,null,null,null)),(e()(),io(-1,null,["Cost:"])),(e()(),jl(16777216,null,null,2,null,im)),Mi(22,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null),ki(0,Ks,[Vr])],function(e,n){var t=n.component;e(n,1,0,t.id),e(n,4,0,t.type===t.craftingTypes.SELECTED),e(n,6,0,t.type===t.craftingTypes.UNTIL_X),e(n,8,0,t.type===t.craftingTypes.CONTINUOUS),e(n,18,0,t.recipe.amount>1),e(n,22,0,hl(n,22,0,Ei(n,23).transform(t.getCost())))},function(e,n){var t=n.component,r=hl(n,9,0,e(n,10,0,Ei(n.parent,0),t.getResourceName(t.recipe.getResource())));e(n,9,0,r),e(n,11,0,Vl(1,"",t.id,""));var l=hl(n,12,0,e(n,13,0,Ei(n.parent,0),t.getResourceName(t.recipe.resource)));e(n,12,0,l),e(n,16,0,t.recipe.craftingDifficulty)})}function um(e){return so(0,[ki(0,zs,[]),Qi(671088640,1,{progressRef:0}),(e()(),jl(16777216,null,null,1,null,Xv)),Mi(3,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,om)),Mi(5,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,3,0,t.isAvailable()),e(n,5,0,!t.isAvailable())},null)}function sm(e,n,t,r){return d(t)&&(r=t,t=void 0),r?sm(e,n,t).pipe(K(function(e){return p(e)?r.apply(void 0,e):r(e)})):new w(function(r){!function e(n,t,r,l,i){var o;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(n)){var u=n;n.addEventListener(t,r,i),o=function(){return u.removeEventListener(t,r,i)}}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(n)){var s=n;n.on(t,r),o=function(){return s.off(t,r)}}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(n)){var a=n;n.addListener(t,r),o=function(){return a.removeListener(t,r)}}else{if(!n||!n.length)throw new TypeError("Invalid event target");for(var c=0,p=n.length;c<p;c++)e(n[c],t,r,l,i)}l.add(o)}(e,n,function(e){r.next(arguments.length>1?Array.prototype.slice.call(arguments):e)},r,t)})}var am,cm=function(e){function n(n,t){var r=e.call(this,n,t)||this;return r.scheduler=n,r.work=t,r.pending=!1,r}return l(n,e),n.prototype.schedule=function(e,n){if(void 0===n&&(n=0),this.closed)return this;this.state=e;var t=this.id,r=this.scheduler;return null!=t&&(this.id=this.recycleAsyncId(r,t,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(r,this.id,n),this},n.prototype.requestAsyncId=function(e,n,t){return void 0===t&&(t=0),setInterval(e.flush.bind(e,this),t)},n.prototype.recycleAsyncId=function(e,n,t){if(void 0===t&&(t=0),null!==t&&this.delay===t&&!1===this.pending)return n;clearInterval(n)},n.prototype.execute=function(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var t=this._execute(e,n);if(t)return t;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},n.prototype._execute=function(e,n){var t=!1,r=void 0;try{this.work(e)}catch(l){t=!0,r=!!l&&l||new Error(l)}if(t)return this.unsubscribe(),r},n.prototype._unsubscribe=function(){var e=this.id,n=this.scheduler,t=n.actions,r=t.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&t.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null},n}(function(e){function n(n,t){return e.call(this)||this}return l(n,e),n.prototype.schedule=function(e,n){return void 0===n&&(n=0),this},n}(v)),pm=function(){function e(n,t){void 0===t&&(t=e.now),this.SchedulerAction=n,this.now=t}return e.prototype.schedule=function(e,n,t){return void 0===n&&(n=0),new this.SchedulerAction(this,e).schedule(t,n)},e.now=function(){return Date.now()},e}(),hm=new(function(e){function n(t,r){void 0===r&&(r=pm.now);var l=e.call(this,t,function(){return n.delegate&&n.delegate!==l?n.delegate.now():r()})||this;return l.actions=[],l.active=!1,l.scheduled=void 0,l}return l(n,e),n.prototype.schedule=function(t,r,l){return void 0===r&&(r=0),n.delegate&&n.delegate!==this?n.delegate.schedule(t,r,l):e.prototype.schedule.call(this,t,r,l)},n.prototype.flush=function(e){var n=this.actions;if(this.active)n.push(e);else{var t;this.active=!0;do{if(t=e.execute(e.state,e.delay))break}while(e=n.shift());if(this.active=!1,t){for(;e=n.shift();)e.unsubscribe();throw t}}},n}(pm))(cm),dm=function(){function e(e){this.durationSelector=e}return e.prototype.call=function(e,n){return n.subscribe(new fm(e,this.durationSelector))},e}(),fm=function(e){function n(n,t){var r=e.call(this,n)||this;return r.durationSelector=t,r.hasValue=!1,r}return l(n,e),n.prototype._next=function(e){if(this.value=e,this.hasValue=!0,!this.throttled){var n=void 0;try{n=(0,this.durationSelector)(e)}catch(r){return this.destination.error(r)}var t=Y(this,n);!t||t.closed?this.clearThrottle():this.add(this.throttled=t)}},n.prototype.clearThrottle=function(){var e=this.value,n=this.hasValue,t=this.throttled;t&&(this.remove(t),this.throttled=null,t.unsubscribe()),n&&(this.value=null,this.hasValue=!1,this.destination.next(e))},n.prototype.notifyNext=function(e,n,t,r){this.clearThrottle()},n.prototype.notifyComplete=function(){this.clearThrottle()},n}(z);function gm(e){return!p(e)&&e-parseFloat(e)+1>=0}function vm(e){var n=e.index,t=e.period,r=e.subscriber;if(r.next(n),!r.closed){if(-1===t)return r.complete();e.index=n+1,this.schedule(e,t)}}am||(am={});var mm=function(){function e(e,n){var t=this;this._platform=e,n.runOutsideAngular(function(){t._change=e.isBrowser?le(sm(window,"resize"),sm(window,"orientationchange")):ta(),t._invalidateCache=t.change().subscribe(function(){return t._updateViewportSize()})})}return e.prototype.ngOnDestroy=function(){this._invalidateCache.unsubscribe()},e.prototype.getViewportSize=function(){this._viewportSize||this._updateViewportSize();var e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e},e.prototype.getViewportRect=function(){var e=this.getViewportScrollPosition(),n=this.getViewportSize(),t=n.width,r=n.height;return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+t,height:r,width:t}},e.prototype.getViewportScrollPosition=function(){if(!this._platform.isBrowser)return{top:0,left:0};var e=document.documentElement,n=e.getBoundingClientRect();return{top:-n.top||document.body.scrollTop||window.scrollY||e.scrollTop||0,left:-n.left||document.body.scrollLeft||window.scrollX||e.scrollLeft||0}},e.prototype.change=function(e){return void 0===e&&(e=20),e>0?this._change.pipe((n=e,void 0===t&&(t=hm),r=function(){return function(e,n,t){void 0===e&&(e=0);var r=-1;return gm(n)?r=Number(n)<1?1:Number(n):F(n)&&(t=n),F(t)||(t=hm),new w(function(n){var l=gm(e)?e:+e-t.now();return t.schedule(vm,l,{index:0,period:r,subscriber:n})})}(n,t)},function(e){return e.lift(new dm(r))})):this._change;var n,t,r},e.prototype._updateViewportSize=function(){this._viewportSize=this._platform.isBrowser?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0}},e.ngInjectableDef=ve({factory:function(){return new e(ze(mv),ze(Zt))},token:e,providedIn:"root"}),e}(),ym=new ye("cdk-dir-doc",{providedIn:"root",factory:function(){return ze(Zs)}}),Sm=function(){function e(e){if(this.value="ltr",this.change=new pt,e){var n=(e.body?e.body.dir:null)||(e.documentElement?e.documentElement.dir:null);this.value="ltr"===n||"rtl"===n?n:"ltr"}}return e.prototype.ngOnDestroy=function(){this.change.complete()},e.ngInjectableDef=ve({factory:function(){return new e(ze(ym,8))},token:e,providedIn:"root"}),e}(),Em=function(){function e(e,n,t,r){this.recipeService=e,this.resourcesService=n,this.craftingService=t,this.changeDetectorRef=r,this.craftingTypes=Bv,this.filterText="",this.amount=1,this.craftingType=this.craftingTypes.SELECTED,this.bookPage=Cu[Cu.ALL]}return e.prototype.ngOnInit=function(){var e=this;this.craftingService.registerForUpdate().subscribe(function(){e.changeDetectorRef.destroyed||e.changeDetectorRef.detectChanges()})},e.prototype.getRecipes=function(){var e=this;return this.filterText&&this.filterText.length>0?this.recipeService.getRecipes().filter(function(n){return n.available&&e.resourcesService.getResourceTypes(n.getResource()).includes(Cu[e.bookPage])&&Au.prepareResourceName(n.getResource()).toLowerCase().includes(e.filterText.toLowerCase())}):this.recipeService.getRecipes().filter(function(n){return n.available&&e.resourcesService.getResourceTypes(n.getResource()).includes(Cu[e.bookPage])})},e.prototype.getEntries=function(){var e=[];return e.push(Cu[Cu.ALL]),e.push(Cu[Cu.PROCESSED]),e.push(Cu[Cu.TOOLS]),e.push(Cu[Cu.FOOD]),e.push(Cu[Cu.OTHER]),e},e.prototype.select=function(e){this.bookPage=e},e.prototype.craft=function(e){this.craftingService.craft(e,this.amount,this.craftingType)},e.prototype.getQueue=function(){return this.craftingService.getQueue()},e.prototype.drop=function(e){this.craftingService.moveRecipeInQueue(e)},e.prototype.getQueueMaxSize=function(){return this.craftingService.getQueueMaxSize()},e.prototype.validateAmountInput=function(){var e=Number(String(this.amount).replace(/[^0-9]/g,""));e<1&&(e=1),this.amount=e},e}(),bm=gl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{margin:.7%;height:100%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#boxes[_ngcontent-%COMP%]{display:flex;flex-direction:row;border:1px solid #000;height:94.5%;text-align:center}#recipes[_ngcontent-%COMP%]{text-align:center;flex:0 0 74.3%;display:flex;flex-direction:column;border:1px solid #000;align-items:center}.queue[_ngcontent-%COMP%]{text-align:center;flex:0 0 25%;display:flex;flex-direction:column;border:1px solid #000;align-items:center}#queueRecipes[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}.title[_ngcontent-%COMP%]{width:100.5%;font-weight:bolder;font-size:1.1em;display:inline-block;border-bottom:1px solid #000}#modes[_ngcontent-%COMP%]{margin-top:-1px;padding:0;margin-bottom:5px}#recipesBook[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:100%;width:100%}#menu[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-right:1px solid #000;flex:0 0 10%}.entry[_ngcontent-%COMP%]{display:flex;border-bottom:1px solid #000;flex:1 0 0;height:100%;width:100%;margin-right:-30px;font-size:.8em;font-weight:600;cursor:pointer}.entry[_ngcontent-%COMP%]:last-of-type{border-bottom:none}.entryText[_ngcontent-%COMP%]{-webkit-transform:rotate(-90deg);-moz-transform:rotate(-90deg);-ms-transform:rotate(-90deg);-o-transform:rotate(-90deg)}.inactiveEntry[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;justify-content:center;align-items:center}.activeEntry[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;justify-content:center;align-items:center;background-color:var(--active-colour)}#book[_ngcontent-%COMP%]{flex:0 0 90%;width:100%}#bookRecipes[_ngcontent-%COMP%]{overflow-y:auto;border-top:1px solid #000}app-recipe[_ngcontent-%COMP%]{font-size:.8em;display:inline-block;width:100px;margin:4px 8px;cursor:pointer}#side[_ngcontent-%COMP%]{display:flex;flex-direction:row;font-size:.8em;margin:1%;vertical-align:bottom}#amount[_ngcontent-%COMP%], #filter[_ngcontent-%COMP%]{font-size:1em;width:20%;margin:1%;display:block;vertical-align:bottom}#filter[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:1.05em;margin-left:0;padding:0;border:none;outline:0}#amount[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:65%;font-size:1.15em;margin-left:0;padding:0;border:none;outline:0}#radios[_ngcontent-%COMP%]{text-align:left;font-size:.9em}#progressButton[_ngcontent-%COMP%]{font-size:.6em}"]],data:{}});function Om(e){return so(0,[(e()(),Yl(0,0,null,null,2,"div",[["class","activeEntry"]],null,null,null,null,null)),(e()(),Yl(1,0,null,null,1,"div",[["class","entryText"]],null,null,null,null,null)),(e()(),io(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit)})}function Rm(e){return so(0,[(e()(),Yl(0,0,null,null,2,"div",[["class","inactiveEntry"]],null,null,null,null,null)),(e()(),Yl(1,0,null,null,1,"div",[["class","entryText"]],null,null,null,null,null)),(e()(),io(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit)})}function Tm(e){return so(0,[(e()(),Yl(0,0,null,null,4,"div",[["class","entry"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.select(e.context.$implicit)&&r),r},null,null)),(e()(),jl(16777216,null,null,1,null,Om)),Mi(2,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,Rm)),Mi(4,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.bookPage===n.context.$implicit),e(n,4,0,t.bookPage!==n.context.$implicit)},null)}function Cm(e){return so(0,[(e()(),Yl(0,0,null,null,1,"app-recipe",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.craft(e.context.$implicit)&&r),r},um,jv)),Mi(1,4308992,null,0,Wv,[Vv,Lg],{recipe:[0,"recipe"]},null)],function(e,n){e(n,1,0,n.context.$implicit)},null)}function _m(e){return so(0,[(e()(),Yl(0,16777216,null,null,6,"app-recipe",[["cdkDrag",""],["class","cdk-drag"]],[[2,"cdk-drag-dragging",null]],null,null,um,jv)),Li(6144,null,Ov,null,[Nv]),Mi(2,4341760,[[1,4]],3,Nv,[Pn,[3,Tv],Zs,Zt,br,mm,bv,Iv,[2,Sm]],null,null),Qi(603979776,2,{_handles:1}),Qi(335544320,3,{_previewTemplate:0}),Qi(335544320,4,{_placeholderTemplate:0}),Mi(6,4308992,null,0,Wv,[Vv,Lg],{id:[0,"id"],recipe:[1,"recipe"],amount:[2,"amount"],type:[3,"type"]},null),(e()(),jl(0,null,null,0))],function(e,n){e(n,6,0,n.context.$implicit.id,n.context.$implicit.recipe,n.context.$implicit.amount,n.context.$implicit.type)},function(e,n){e(n,0,0,Ei(n,2)._hasStartedDragging&&Ei(n,2)._isDragging())})}function Im(e){return so(0,[(e()(),Yl(0,0,null,null,76,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Yl(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),Yl(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["Crafting"])),(e()(),Yl(4,0,null,null,72,"div",[["id","boxes"]],null,null,null,null,null)),(e()(),Yl(5,0,null,null,60,"div",[["id","recipes"]],null,null,null,null,null)),(e()(),Yl(6,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),io(-1,null,[" Recipes "])),(e()(),Yl(8,0,null,null,57,"div",[["id","recipesBook"]],null,null,null,null,null)),(e()(),Yl(9,0,null,null,2,"div",[["id","menu"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,Tm)),Mi(11,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null),(e()(),Yl(12,0,null,null,53,"div",[["id","book"]],null,null,null,null,null)),(e()(),Yl(13,0,null,null,49,"div",[["id","side"]],null,null,null,null,null)),(e()(),Yl(14,0,null,null,8,"div",[["id","filter"]],null,null,null,null,null)),(e()(),io(-1,null,[" Filter:"])),(e()(),Yl(16,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(17,0,null,null,5,"input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var r=!0,l=e.component;return"input"===n&&(r=!1!==Ei(e,18)._handleInput(t.target.value)&&r),"blur"===n&&(r=!1!==Ei(e,18).onTouched()&&r),"compositionstart"===n&&(r=!1!==Ei(e,18)._compositionStart()&&r),"compositionend"===n&&(r=!1!==Ei(e,18)._compositionEnd(t.target.value)&&r),"ngModelChange"===n&&(r=!1!==(l.filterText=t)&&r),r},null,null)),Mi(18,16384,null,0,Cf,[xn,Pn,[2,Tf]],null,null),Li(1024,null,Of,function(e){return[e]},[Cf]),Mi(20,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),Li(2048,null,Nf,null,[pg]),Mi(22,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),Yl(23,0,null,null,9,"div",[["id","amount"]],null,null,null,null,null)),(e()(),io(-1,null,[" amount:"])),(e()(),Yl(25,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(26,0,null,null,6,"input",[["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"keyup"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var r=!0,l=e.component;return"input"===n&&(r=!1!==Ei(e,27)._handleInput(t.target.value)&&r),"blur"===n&&(r=!1!==Ei(e,27).onTouched()&&r),"compositionstart"===n&&(r=!1!==Ei(e,27)._compositionStart()&&r),"compositionend"===n&&(r=!1!==Ei(e,27)._compositionEnd(t.target.value)&&r),"change"===n&&(r=!1!==Ei(e,28).onChange(t.target.value)&&r),"input"===n&&(r=!1!==Ei(e,28).onChange(t.target.value)&&r),"blur"===n&&(r=!1!==Ei(e,28).onTouched()&&r),"ngModelChange"===n&&(r=!1!==(l.amount=t)&&r),"change"===n&&(r=!1!==l.validateAmountInput()&&r),"keyup"===n&&(r=!1!==l.validateAmountInput()&&r),r},null,null)),Mi(27,16384,null,0,Cf,[xn,Pn,[2,Tf]],null,null),Mi(28,16384,null,0,Af,[xn,Pn],null,null),Li(1024,null,Of,function(e,n){return[e,n]},[Cf,Af]),Mi(30,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),Li(2048,null,Nf,null,[pg]),Mi(32,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),Yl(33,0,null,null,29,"div",[["id","radios"]],null,null,null,null,null)),(e()(),Yl(34,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),Yl(35,0,null,null,6,"input",[["name","type"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var r=!0,l=e.component;return"input"===n&&(r=!1!==Ei(e,36)._handleInput(t.target.value)&&r),"blur"===n&&(r=!1!==Ei(e,36).onTouched()&&r),"compositionstart"===n&&(r=!1!==Ei(e,36)._compositionStart()&&r),"compositionend"===n&&(r=!1!==Ei(e,36)._compositionEnd(t.target.value)&&r),"change"===n&&(r=!1!==Ei(e,37).onChange()&&r),"blur"===n&&(r=!1!==Ei(e,37).onTouched()&&r),"ngModelChange"===n&&(r=!1!==(l.craftingType=t)&&r),r},null,null)),Mi(36,16384,null,0,Cf,[xn,Pn,[2,Tf]],null,null),Mi(37,212992,null,0,Df,[xn,Pn,Pf,on],{name:[0,"name"],value:[1,"value"]},null),Li(1024,null,Of,function(e,n){return[e,n]},[Cf,Df]),Mi(39,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),Li(2048,null,Nf,null,[pg]),Mi(41,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),io(-1,null,[" selected amount "])),(e()(),Yl(43,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(44,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),Yl(45,0,null,null,6,"input",[["name","type"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var r=!0,l=e.component;return"input"===n&&(r=!1!==Ei(e,46)._handleInput(t.target.value)&&r),"blur"===n&&(r=!1!==Ei(e,46).onTouched()&&r),"compositionstart"===n&&(r=!1!==Ei(e,46)._compositionStart()&&r),"compositionend"===n&&(r=!1!==Ei(e,46)._compositionEnd(t.target.value)&&r),"change"===n&&(r=!1!==Ei(e,47).onChange()&&r),"blur"===n&&(r=!1!==Ei(e,47).onTouched()&&r),"ngModelChange"===n&&(r=!1!==(l.craftingType=t)&&r),r},null,null)),Mi(46,16384,null,0,Cf,[xn,Pn,[2,Tf]],null,null),Mi(47,212992,null,0,Df,[xn,Pn,Pf,on],{name:[0,"name"],value:[1,"value"]},null),Li(1024,null,Of,function(e,n){return[e,n]},[Cf,Df]),Mi(49,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),Li(2048,null,Nf,null,[pg]),Mi(51,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),io(-1,null,[" until X available "])),(e()(),Yl(53,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(54,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),Yl(55,0,null,null,6,"input",[["name","type"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var r=!0,l=e.component;return"input"===n&&(r=!1!==Ei(e,56)._handleInput(t.target.value)&&r),"blur"===n&&(r=!1!==Ei(e,56).onTouched()&&r),"compositionstart"===n&&(r=!1!==Ei(e,56)._compositionStart()&&r),"compositionend"===n&&(r=!1!==Ei(e,56)._compositionEnd(t.target.value)&&r),"change"===n&&(r=!1!==Ei(e,57).onChange()&&r),"blur"===n&&(r=!1!==Ei(e,57).onTouched()&&r),"ngModelChange"===n&&(r=!1!==(l.craftingType=t)&&r),r},null,null)),Mi(56,16384,null,0,Cf,[xn,Pn,[2,Tf]],null,null),Mi(57,212992,null,0,Df,[xn,Pn,Pf,on],{name:[0,"name"],value:[1,"value"]},null),Li(1024,null,Of,function(e,n){return[e,n]},[Cf,Df]),Mi(59,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),Li(2048,null,Nf,null,[pg]),Mi(61,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),io(-1,null,[" continuous "])),(e()(),Yl(63,0,null,null,2,"div",[["id","bookRecipes"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,Cm)),Mi(65,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null),(e()(),Yl(66,0,null,null,10,"div",[["class","queue"]],null,null,null,null,null)),(e()(),Yl(67,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),io(-1,null,["Orders"])),(e()(),io(69,null,[" ","/"," "])),(e()(),Yl(70,0,null,null,6,"div",[["cdkDropList",""],["class","cdk-drop-list"],["id","queueRecipes"]],[[8,"id",0],[2,"cdk-drop-list-dragging",null]],[[null,"cdkDropListDropped"]],function(e,n,t){var r=!0;return"cdkDropListDropped"===n&&(r=!1!==e.component.drop(t)&&r),r},null,null)),Li(6144,null,Tv,null,[Fv]),Mi(72,212992,null,1,Fv,[Pn,bv,Rr,[2,Sm],[3,Lv]],{id:[0,"id"]},{dropped:"cdkDropListDropped"}),Qi(603979776,1,{_draggables:1}),Li(256,null,Lv,void 0,[]),(e()(),jl(16777216,null,null,1,null,_m)),Mi(76,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,11,0,t.getEntries()),e(n,20,0,t.filterText),e(n,30,0,t.amount),e(n,37,0,"type",t.craftingTypes.SELECTED),e(n,39,0,"type",t.craftingType),e(n,47,0,"type",t.craftingTypes.UNTIL_X),e(n,49,0,"type",t.craftingType),e(n,57,0,"type",t.craftingTypes.CONTINUOUS),e(n,59,0,"type",t.craftingType),e(n,65,0,t.getRecipes()),e(n,72,0,"queueRecipes"),e(n,76,0,t.getQueue())},function(e,n){var t=n.component;e(n,17,0,Ei(n,22).ngClassUntouched,Ei(n,22).ngClassTouched,Ei(n,22).ngClassPristine,Ei(n,22).ngClassDirty,Ei(n,22).ngClassValid,Ei(n,22).ngClassInvalid,Ei(n,22).ngClassPending),e(n,26,0,Ei(n,32).ngClassUntouched,Ei(n,32).ngClassTouched,Ei(n,32).ngClassPristine,Ei(n,32).ngClassDirty,Ei(n,32).ngClassValid,Ei(n,32).ngClassInvalid,Ei(n,32).ngClassPending),e(n,35,0,Ei(n,41).ngClassUntouched,Ei(n,41).ngClassTouched,Ei(n,41).ngClassPristine,Ei(n,41).ngClassDirty,Ei(n,41).ngClassValid,Ei(n,41).ngClassInvalid,Ei(n,41).ngClassPending),e(n,45,0,Ei(n,51).ngClassUntouched,Ei(n,51).ngClassTouched,Ei(n,51).ngClassPristine,Ei(n,51).ngClassDirty,Ei(n,51).ngClassValid,Ei(n,51).ngClassInvalid,Ei(n,51).ngClassPending),e(n,55,0,Ei(n,61).ngClassUntouched,Ei(n,61).ngClassTouched,Ei(n,61).ngClassPristine,Ei(n,61).ngClassDirty,Ei(n,61).ngClassValid,Ei(n,61).ngClassInvalid,Ei(n,61).ngClassPending),e(n,69,0,t.getQueue().length,t.getQueueMaxSize()),e(n,70,0,Ei(n,72).id,Ei(n,72)._dragging)})}function Am(e){return so(0,[(e()(),Yl(0,0,null,null,1,"app-crafting",[],null,null,null,Im,bm)),Mi(1,114688,null,0,Em,[gv,Lg,Vv,Rr],null,null)],function(e,n){e(n,1,0)},null)}var wm,Nm=ai("app-crafting",Em,Am,{},{},[]),Pm=function(){return function(e,n,t,r,l,i){this.id=e,this.resource=n,this.amount=t,this.buy=r,this.price=l,this.duration=i}}(),Dm=function(){function e(e){var n=this;this.optionsService=e,this.audios=[],this.optionsService.registerForOptionsChange().subscribe(function(){n.optionsService.getOption(Eg.SOUND)?n.audios.forEach(function(e){return e.volume=n.optionsService.getOption(Eg.SOUND_VOLUME)/100}):n.audios.forEach(function(e){return e.volume=0})})}return e.prototype.playAudio=function(e){this.audios=this.audios.filter(function(e){return!e.ended}),e.load(),e.volume=this.optionsService.getOption(Eg.SOUND)?this.optionsService.getOption(Eg.SOUND_VOLUME)/100:0,e.play(),this.audios.push(e)},e.prototype.playTownBells=function(){this.playAudio(new Audio("assets/sounds/village_bells.wav"))},e.ngInjectableDef=ve({factory:function(){return new e(ze(bg))},token:e,providedIn:"root"}),e}(),Mm=function(){function e(e,n,t,r,l,i){var o=this;this.servicesService=e,this.calendarService=n,this.resourcesService=t,this.logService=r,this.soundService=l,this.modalService=i,this.offers=[],this.id=10,this.servicesService.addService(Nu.MARKET,this),this.calendarService.registerForDayChange().subscribe(function(e){o.offers.forEach(function(e){return e.duration-=1}),o.offers=o.offers.filter(function(e){return e.duration>0})})}return e.prototype.nextId=function(){return this.id+=1,this.id-1},e.prototype.load=function(e){this.offers=e.offers,this.id=e.id},e.prototype.save=function(){return{offers:this.offers,id:this.id}},e.prototype.reset=function(e,n){this.offers=[],this.id=10},e.prototype.getOffers=function(){return this.offers},e.prototype.accept=function(e){var n=this,t=this.offers.find(function(n){return n.id===e});if(t){this.modalService.open(mu.MARKET),this.modalService.setModalValue(t);var r=this.modalService.registerForValueResponse().subscribe(function(e){if(r.unsubscribe(),null!==e&&!isNaN(e)){if(e>t.amount&&(e=t.amount),t.buy){if(!n.resourcesService.decreaseResource(vu.COINS,n.calculatePrice(t,e),"Market",!0))return void n.modalService.info("Not enough coins to buy "+e+" "+Au.prepareResourceName(t.resource));n.resourcesService.increaseResource(t.resource,e,!0)}else{if(!n.resourcesService.decreaseResource(t.resource,e,"Market",!0))return void n.modalService.info("Not enough resources to sell");n.resourcesService.increaseResource(vu.COINS,n.calculatePrice(t,e),!0)}t.amount===Number(e)?n.offers.splice(n.offers.indexOf(t),1):(t.price=n.calculatePrice(t,t.amount-e),t.amount-=e)}})}else this.modalService.info("Market offer not found")},e.prototype.callMerchant=function(){for(var e=Array.from(this.resourcesService.getResources().values()).filter(function(e){return e.isVisible()}).map(function(e){return{item:e.resource,chance:e.prioritise?10:1}}),n=Mu.randomBetween(3,8),t=Mu.randomBetween(50,180),r=0;r<n;r++){var l=Mu.randomWeightedExcept(e,[vu.COINS]),i=Mu.randomBetween(5,20),o=Mu.randomBetween(0,1),u=Mu.randomBetween(-5,25),s=rs.getResource(l).TRADE_VALUE*i;0===(s=o?Math.floor(s*(1+u/100)):Math.floor(s*(1-u/100)))?r--:this.offers.push(new Pm(this.nextId(),l,i,!!o,s,t))}this.logService.log("Merchant arrived"),this.soundService.playTownBells()},e.prototype.calculatePrice=function(e,n){return e.buy?Math.ceil(n/e.amount*e.price):Math.floor(n/e.amount*e.price)},e.ngInjectableDef=ve({factory:function(){return new e(ze(Sg),ze(Cg),ze(Lg),ze(_g),ze(Dm),ze(Ig))},token:e,providedIn:"root"}),e}(),km=function(e){return e[e.FIRST=0]="FIRST",e[e.SECOND=1]="SECOND",e[e.THIRD=2]="THIRD",e[e.FOURTH=3]="FOURTH",e}({}),Lm=function(e){return e[e.TEXT=0]="TEXT",e[e.PROGRESS_BAR=1]="PROGRESS_BAR",e[e.BUTTON=2]="BUTTON",e[e.BUTTON_CHECKBOX=3]="BUTTON_CHECKBOX",e[e.TWO_BUTTON=4]="TWO_BUTTON",e[e.DROPDOWN=5]="DROPDOWN",e[e.ICON=6]="ICON",e}({}),xm=function(){function e(e,n){this.valueType=e,this.value=n}return e.emptyValue=function(){return new e(Lm.TEXT,"")},e.textValue=function(n){return new e(Lm.TEXT,n)},e.progressValue=function(n,t){return void 0===t&&(t=""),new e(Lm.PROGRESS_BAR,{value:n,label:t})},e.buttonValue=function(n,t){return new e(Lm.BUTTON,{buttonText:n,callbackValue:t})},e.buttonCheckboxValue=function(n,t,r,l,i){return new e(Lm.BUTTON_CHECKBOX,{buttonText:n,callbackValue:t,checkboxState:l,checkboxLabel:r,checkboxCallbackValue:i})},e.twoButtonValue=function(n,t,r,l,i){return new e(Lm.TWO_BUTTON,{button1Text:n,callback1Value:t,textBetween:r,button2Text:l,callback2Value:i})},e.dropdownValue=function(n,t){return new e(Lm.DROPDOWN,{values:n,selected:t})},e.iconValue=function(n){return new e(Lm.ICON,n)},e.prototype.getValueType=function(){return this.valueType},e.prototype.getValue=function(){return this.value},e}(),Fm=function(){return function(e,n,t,r){this.name=e,this.effect=n,this.duration=t,this.cost=r}}(),Um=function(){function e(e,n,t,r,l,i,o,u){this.servicesService=t,this.id=e,this.buildingType=n,this.demolishable=i,this.settings=r,this.stoppable=o,this.working=l,this.level=u,this.size=r.SIZE,this.complexity=r.COMPLEXITY,t&&(this.resourcesService=t.getService(Nu.RESOURCES),this.effectsService=t.getService(Nu.EFFECTS),this.happinessService=t.getService(Nu.HAPPINESS),this.gameService=t.getService(Nu.GAME),this.logService=t.getService(Nu.LOG),this.modalService=t.getService(Nu.MODAL),this.weatherService=t.getService(Nu.WEATHER))}return e.prototype.build=function(){return this.startProduction(),this},e.prototype.getBuildingId=function(){return this.id},e.prototype.callback=function(e){},e.prototype.finishDemolish=function(){var e=this;Array.from(this.getCost().entries()).forEach(function(n){return e.resourcesService.increaseResource(n[0],Math.floor(.3*n[1]))})},e.prototype.fireWorker=function(){return!!this.working&&(this.resourcesService.fireWorker(),this.working=!1,!0)},e.prototype.getBuildingType=function(){return this.buildingType},e.prototype.getComplexity=function(){return this.complexity},e.prototype.getCost=function(){var e=new Map;return this.settings.COST.forEach(function(n){return e.set(n.resource,n.amount)}),e},e.prototype.getDescription=function(){return this.settings.DESCRIPTION},e.prototype.hasDetails=function(){return!0},e.prototype.getDetails=function(){var e="";return(this.getBuildingLevel()>1||this.hasUpgrade())&&(e+="building level: "+this.level+"<br>"),this.getPower()%1==0?e+="building power: "+this.getPower()+"<br>":e+="building power: "+Au.round(this.getPower(),2)+"<br>",0!==this.getPermanentEffects()&&(e+="permanent effects: "+this.getPermanentEffects()+"%<br>"),0!==this.getEffects()&&(e+="temporary effects: "+this.getEffects()+"%<br>"),0!==this.getHappinessEffect()&&(e+="happiness effects: "+this.getHappinessEffect()+"%<br>"),0!==this.getWeatherMultiplier()&&(e+="weather multiplier: "+this.getWeatherMultiplier()+"%<br>"),e},e.prototype.getEffects=function(){return this.effectsService.getBuildingEffectsValue(this.buildingType,!1,this.id)},e.prototype.getPermanentEffects=function(){return this.effectsService.getBuildingEffectsValue(this.buildingType,!0)},e.prototype.getHappinessEffect=function(){return this.happinessService.getHappinessEffect()},e.prototype.getWeatherMultiplier=function(){var e=this,n=(this.settings.WEATHER?this.settings.WEATHER:[]).find(function(n){return e.weatherService.isWeather(n.weather)});return n?n.effect:0},e.prototype.getDisplayableEffectsValue=function(){var e=this.getWeatherMultiplier();if(e<=-100)return-100;var n=(this.getHappinessEffect()+this.getEffects())*(1+e/100);return n<=-100?-100:n},e.prototype.getPower=function(){var e=0;return 1===this.level||this.buildingType===bu.CONSTRUCTION?e=this.settings.BASE_POWER:this.settings.UPGRADES&&(e=this.settings.UPGRADES[this.level-2].BASE_POWER),e*(1+(this.getPermanentEffects()+this.getEffects()+this.getHappinessEffect())/100)*(1+this.getWeatherMultiplier()/100)},e.prototype.getLine=function(e){switch(e){case km.FIRST:case km.SECOND:case km.THIRD:case km.FOURTH:return xm.emptyValue()}},e.prototype.getName=function(){return Au.titleCase(Au.prepareBuildingName(this.buildingType))},e.prototype.getSize=function(){return this.size},e.prototype.buildOnMountain=function(){return!1},e.prototype.getWorkers=function(){return this.working?1:0},e.prototype.hireWorker=function(){return!(this.working||!this.resourcesService.hireWorker()||(this.working=!0,0))},e.prototype.isDemolishable=function(){return this.demolishable},e.prototype.isStoppable=function(){return this.stoppable},e.prototype.isComplexManagement=function(){return!1},e.prototype.getWorkSettings=function(){return null},e.prototype.isWorking=function(){return this.working},e.prototype.prepareDemolish=function(){return this.stopProduction(),!0},e.prototype.startProduction=function(){return!(this.working||!this.resourcesService.hireWorker()||(this.working=!0,0))},e.prototype.stopProduction=function(){this.working&&(this.resourcesService.fireWorker(),this.working=!1)},e.prototype.tick=function(e){},e.prototype.isCombinable=function(){return!1},e.prototype.isSplittable=function(){return!1},e.prototype.hasBuff=function(){return this.settings.BUFF},e.prototype.isBuffed=function(){var e=this;return!!this.hasBuff()&&this.effectsService.getBuildingEffects(this.buildingType).filter(function(n){return n.buff===e.id}).length>0},e.prototype.getBuff=function(){if(this.settings.BUFF){var e=new Map;return this.settings.BUFF.cost.forEach(function(n){return e.set(n.resource,n.amount)}),new Fm(this.settings.BUFF.name,this.settings.BUFF.effect,this.settings.BUFF.duration,e)}return null},e.prototype.hasUpgrade=function(){var e=this;if(this.settings.UPGRADES&&this.settings.UPGRADES.length>=this.getBuildingLevel()){if(this.settings.UPGRADES[this.getBuildingLevel()-1].PREREQUISITES){var n=!0;return this.settings.UPGRADES[this.getBuildingLevel()-1].PREREQUISITES.forEach(function(t){e.gameService.isEnabled(t)||(n=!1)}),n}return!0}return!1},e.prototype.getUpgradeCost=function(){var e=new Map;return this.hasUpgrade()&&this.settings.UPGRADES[this.level-1].COST.forEach(function(n){return e.set(n.resource,n.amount)}),e},e.prototype.setBuildingLevel=function(e){this.level=e},e.prototype.getBuildingLevel=function(){return this.level},e}(),Hm=function(e){function n(n,t,r,l,i,o,u,s,a,c){void 0===n&&(n=null);var p=e.call(this,t,r,n,l,!1,!0,!1,c)||this;return p.occupants=i,p.progress=o,p.food=u,p.fuel=s,p.clothes=a,p.maxSize=l.MAX_OCCUPANTS,p.servicesService&&(p.villageService=n.getService(Nu.VILLAGE),p.weatherService=n.getService(Nu.WEATHER),p.religionService=n.getService(Nu.RELIGION),p.managementService=n.getService(Nu.MANAGEMENT)),p}return l(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,occupants:this.occupants,maxSize:this.maxSize,progress:this.progress,food:this.food,fuel:this.fuel,clothes:this.clothes}},n.prototype.getLine=function(e){switch(e){case km.FIRST:return xm.textValue("occupants: "+this.occupants+"/"+this.maxSize);case km.SECOND:return xm.progressValue(this.occupants<this.maxSize?this.progress:-1);case km.THIRD:return this.food>0?xm.emptyValue():xm.progressValue(Math.abs(this.food),"famine");case km.FOURTH:return this.fuel>=0?this.weatherService.getCurrentTemperature()<10&&this.occupants>0?xm.textValue("heating required"):xm.emptyValue():xm.progressValue(Math.abs(this.fuel),"freezing")}},n.prototype.tick=function(){if(this.clothes<50&&(this.resourcesService.decreaseResource(vu.CLOTHES,1,this.getName()+" clothing")?this.clothes+=50:this.managementService.getFurClothes()&&this.resourcesService.decreaseResource(vu.FUR,1,this.getName()+" clothing")&&(this.clothes+=2)),this.food<=50){var e=this.resourcesService.getRandomFood(this.getName());if(this.food<0){var n=Math.abs(this.food)/2;e>=n?(e-=n,this.food=0):(this.food-=2*e,e=0)}this.food+=e}for(var t=Number(this.managementService.getRations()),r=0;r<this.occupants;r++)this.food>0?(this.food-=.5*t,1===t?this.happinessService.decreaseHappiness(.003,zu.FOOD_HAPPINESS_FLOOR):this.happinessService.getHappiness()<75&&(2===t?this.happinessService.increaseHappiness(.001,zu.FOOD_HAPPINESS_LIMIT):3===t?this.happinessService.increaseHappiness(.0025,zu.FOOD_HAPPINESS_LIMIT):4===t&&this.happinessService.increaseHappiness(.005,zu.FOOD_HAPPINESS_LIMIT))):(this.food-=.5,this.happinessService.decreaseHappiness(.005,zu.FOOD_HAPPINESS_FLOOR));this.food<0&&0===this.occupants&&(this.food=0),this.food<-100&&this.occupants>0&&(this.occupants-=1,this.food=-1,this.resourcesService.removePeople(1)),this.food<0&&this.occupants>0&&this.religionService.getFaithShield()>0&&(this.food=100*this.religionService.decreaseFaithShield(Math.abs(this.food)/100)),this.fuel<=50&&(this.fuel+=this.resourcesService.getFuel(this.getName()+" heating"));var l=this.weatherService.getCurrentTemperature(),i=this.managementService.getClothesRations();if(l<10&&this.occupants>0){var o=.2*(10-l)/10;if(this.clothes>0&&(this.clothes-=.01*this.occupants*i,o/=i+1,this.clothes<0&&(this.clothes=0)),this.fuel-o<-100?this.fuel=-100:this.fuel-=o,this.fuel<0&&this.occupants>0&&this.religionService.getFaithShield()>0)return void(this.fuel=200*this.religionService.decreaseFaithShield(Math.abs(this.food)/200));this.fuel<0?this.happinessService.decreaseHappiness(.01,zu.HEAT_HAPPINESS_FLOOR):this.happinessService.increaseHappiness(.005,zu.HEAT_HAPPINESS_LIMIT)}else this.fuel<0&&(this.fuel=0),l>10&&(this.clothes>0?(this.clothes-=.005*this.occupants,this.clothes<0&&(this.clothes=0),this.happinessService.increaseHappiness(.01*this.occupants,zu.CLOTHES_HAPPINESS_LIMIT)):this.happinessService.decreaseHappiness(.01*this.occupants,zu.CLOTHES_HAPPINESS_FLOOR));this.progress<100&&this.occupants<this.maxSize&&this.food>0?(this.progress+=this.getPower(),this.progress>100&&(this.progress=100)):this.occupants<this.maxSize&&100===this.progress?(this.occupants+=1,this.resourcesService.createPeople(1),this.progress=0):this.progress>0&&this.food<=0&&(this.progress-=this.getPower())},n.prototype.build=function(){return this.resourcesService.increasePopulationCap(this.maxSize),this},n.prototype.prepareDemolish=function(){if(this.occupants>0){var e=this.villageService.moveOccupants(this,this.occupants);this.resourcesService.removePeople(e)}return this.resourcesService.decreasePopulationCap(this.maxSize),!0},n.prototype.getDetails=function(){return"occupants: "+this.occupants+"/"+this.maxSize+"<br>food nutrition: "+Au.round(this.food,2)+"<br>heating fuel: "+Au.round(this.fuel,2)+"<br>clothes: "+Au.round(this.clothes,2)+"<br>"+e.prototype.getDetails.call(this)},n.prototype.hasDetails=function(){return!0},n.prototype.stopProduction=function(){},n.prototype.startProduction=function(){return!0},n.prototype.getMaxSize=function(){return this.maxSize},n.prototype.getOccupants=function(){return this.occupants},n.prototype.addOccupant=function(){return this.occupants<this.maxSize&&(this.occupants+=1,this.occupants===this.maxSize&&(this.progress=0),!0)},n.prototype.removeOccupant=function(){return this.occupants>0&&(this.occupants-=1,!0)},n.prototype.fireWorker=function(){return!1},n.prototype.hireWorker=function(){return!1},n.prototype.getWorkers=function(){return 0},n}(Um),Gm=function(e){function n(n,t,r,l,i,o,u,s){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===r&&(r=0),void 0===l&&(l=0),void 0===i&&(i=100),void 0===o&&(o=100),void 0===u&&(u=0),void 0===s&&(s=1),e.call(this,n,t,bu.HUT,ts.VILLAGE.HUT,r,l,i,o,u,s)||this}return l(n,e),n}(Hm),Bm=function(e){function n(n,t,r,l,i,o,u,s){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===r&&(r=0),void 0===l&&(l=0),void 0===i&&(i=100),void 0===o&&(o=100),void 0===u&&(u=0),void 0===s&&(s=1),e.call(this,n,t,bu.HOUSE,ts.VILLAGE.HOUSE,r,l,i,o,u,s)||this}return l(n,e),n}(Hm);!function(e){e.CHOPPING_TREES="chopping trees",e.WAITING_FOR_TREES="waiting for trees",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.TRANSPORTING_LOG="transporting log"}(wm||(wm={}));var Vm,Wm=function(e){function n(n,t,r,l,i,o,u){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===r&&(r=0),void 0===l&&(l=0),void 0===i&&(i=wm.WAITING_FOR_TREES),void 0===o&&(o=!1),void 0===u&&(u=1);var s=e.call(this,t,bu.LOGGERS_HUT,n,ts.FOREST.LOGGERS_HUT,o,!0,!0,u)||this;return s.progress=r,s.localStorage=l,s.status=i,s.servicesService&&(s.landService=n.getService(Nu.LAND)),s}return l(n,e),n.prototype.getLine=function(e){switch(e){case km.FIRST:return xm.emptyValue();case km.SECOND:return xm.textValue(this.status);case km.THIRD:return xm.progressValue(this.progress);case km.FOURTH:return xm.emptyValue()}},n.prototype.tick=function(){if(this.working)if(this.status===wm.WAITING_FOR_TREES)this.landService.reduceForest(1)&&(this.status=wm.CHOPPING_TREES);else if(this.status===wm.CHOPPING_TREES)this.progress<100&&(this.progress+=this.getPower(),this.progress>=100&&(this.progress=0,this.status=wm.TRANSPORTING_LOG));else if(this.status===wm.TRANSPORTING_LOG||this.status===wm.WAITING_FOR_WAREHOUSE_SPACE){var e=this.resourcesService.increaseResource(vu.LOG,1);this.status=e?wm.WAITING_FOR_TREES:wm.WAITING_FOR_WAREHOUSE_SPACE}},n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,localStorage:this.localStorage,status:this.status,working:this.working}},n}(Um),jm=function(e){function n(n,t,r,l,i,o,u,s,a){void 0===n&&(n=null),void 0===i&&(i=1),void 0===o&&(o=1),void 0===u&&(u=1),void 0===s&&(s=0),void 0===a&&(a=!1);var c=e.call(this,t,bu.CONSTRUCTION,n,ts.CONSTRUCTION_SITE,a,1===u,!0,u)||this;return c.region=r,c.constructing=l,c.buildingComplexity=i,c.buildingSize=o,c.upgradeLevel=u,c.progress=s,c.servicesService&&(c.resourcesService=c.servicesService.getService(Nu.RESOURCES),c.buildingFactoryService=c.servicesService.getService(Nu.BUILDING_FACTORY),c.regionService=c.servicesService.getServiceByRegion(r)),c}return l(n,e),n.prototype.isUpgrade=function(){return 1!==this.upgradeLevel},n.prototype.getLine=function(e){switch(e){case km.FIRST:return xm.emptyValue();case km.SECOND:return this.isUpgrade()?xm.textValue("upgrading "+Au.prepareBuildingName(this.constructing)):xm.textValue("constructing "+Au.prepareBuildingName(this.constructing));case km.THIRD:return xm.progressValue(this.progress);case km.FOURTH:return xm.emptyValue()}},n.prototype.tick=function(){0===this.buildingComplexity&&(this.isUpgrade?this.regionService.finishUpgrade(this,this.constructing):this.regionService.finishConstruction(this,this.constructing)),this.working&&(this.progress<100?(this.progress+=this.getPower()/this.buildingComplexity,this.progress>100&&(this.progress=100)):this.isUpgrade?this.regionService.finishUpgrade(this,this.constructing):this.regionService.finishConstruction(this,this.constructing))},n.prototype.build=function(){return this.startProduction()||0===this.buildingComplexity||this.servicesService.getService(Nu.MODAL).info("Couldn't unlock construction. Not enough free workers."),this},n.prototype.toJSON=function(){return{id:this.id,upgradeLevel:this.upgradeLevel,buildingType:this.buildingType,region:this.region,constructing:this.constructing,buildingComplexity:this.buildingComplexity,progress:this.progress,working:this.working,buildingSize:this.buildingSize}},n.prototype.getComplexity=function(){return 0},n.prototype.getSize=function(){return this.buildingSize},n.prototype.finishDemolish=function(){var e=this;Array.from(this.buildingFactoryService.createBuildingShell(this.constructing).getCost().entries()).forEach(function(n){return e.resourcesService.increaseResource(n[0],Math.floor(n[1]*(1-e.progress/100)+n[1]*(e.progress/100*.3)))})},n.prototype.getConstructing=function(){return this.constructing},n}(Um);!function(e){e.PLANTING_TREES="planting trees",e.WAITING_FOR_LAND="waiting for land"}(Vm||(Vm={}));var Ym,zm=function(e){function n(n,t,r,l,i,o,u,s){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===r&&(r=0),void 0===l&&(l=0),void 0===i&&(i=Vm.WAITING_FOR_LAND),void 0===o&&(o=1),void 0===u&&(u=!1),void 0===s&&(s=1);var a=e.call(this,t,bu.FORESTER,n,ts.FOREST.FORESTER,u,!0,!0,s)||this;return a.progress=r,a.localStorage=l,a.status=i,a.effectiveness=o,a.servicesService&&(a.landService=n.getService(Nu.LAND),a.modalService=n.getService(Nu.MODAL)),a}return l(n,e),n.prototype.callback=function(e){var n=this;this.modalService.open(mu.INPUT),this.modalService.setModalText("Set reserved land size (Foresters will prevent forest from growing on that land)<br>Value 0 removes forester protection and only initial 100 land will be protected."),this.modalService.setModalValue(this.landService.getForestLandLimit());var t=this.modalService.registerForValueResponse().subscribe(function(e){null===e||isNaN(e)||n.landService.setForestLandLimit(e),t.unsubscribe()})},n.prototype.getLine=function(e){switch(e){case km.FIRST:return xm.emptyValue();case km.SECOND:return xm.textValue(this.status);case km.THIRD:return xm.progressValue(this.progress);case km.FOURTH:return xm.buttonValue("manage",this.callback)}},n.prototype.tick=function(){this.working&&(0===this.localStorage&&(this.landService.reduceLand(this.effectiveness)?(this.localStorage=this.effectiveness,this.status=Vm.PLANTING_TREES):this.status=Vm.WAITING_FOR_LAND),this.localStorage>0&&(this.progress<100?(this.progress+=this.getPower(),this.progress>100&&(this.progress=100)):(this.landService.increaseForest(this.localStorage,!1),this.progress=0,this.localStorage=0)))},n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,localStorage:this.localStorage,status:this.status,effectiveness:this.effectiveness,working:this.working}},n}(Um),Km=function(){return function(e,n,t,r){this.enabled=e,this.buildingType=n,this.inputSettings=t,this.outputSettings=r}}();!function(e){e.FETCHING_INPUT="fetching {in}",e.WAITING_FOR_INPUT="waiting for {wait}",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.PREPARING="preparing {out}",e.PRODUCING_OUTPUT="{prod} {out}",e.TRANSPORTING_OUTPUT="transporting {out}"}(Ym||(Ym={}));var qm,$m=function(e){function n(n,t,r,l,i,o,u,s,a,c,p){void 0===n&&(n=null),void 0===o&&(o=0),void 0===u&&(u=[]),void 0===s&&(s=[]),void 0===a&&(a=!1),void 0===c&&(c=null);var h=e.call(this,t,r,n,l,a,!0,!0,p)||this;if(h.status=i,h.progress=o,h.inputStorage=u,h.outputStorage=s,h.workSettings=c,h.productionText=l.TEXT,n&&(h.managementService=n.getService(Nu.MANAGEMENT),null===h.workSettings)){var d=l.INPUT_RESOURCES.map(function(e){return[e.resource,0]}),f=l.OUTPUT_RESOURCES.map(function(e){return[e.resource,n.getService(Nu.RESOURCES).getResource(e.resource).getLimit()]});h.workSettings=new Km(!0,r,d,f)}return h}return l(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,workSettings:this.workSettings,buildingType:this.buildingType,progress:this.progress,status:this.status,inputStorage:this.inputStorage,outputStorage:this.outputStorage,working:this.working}},n.prototype.getLine=function(e){switch(e){case km.FIRST:return xm.emptyValue();case km.SECOND:var n=Au.resourcesArraysDiff(this.settings.INPUT_RESOURCES,this.inputStorage),t=String(this.status);return n.length>0&&(t=t.replace("{wait}",Au.prepareResourcesNamesList(n))),t=(t=(t=t.replace("{in}",Au.prepareResourcesNamesList(this.settings.INPUT_RESOURCES))).replace("{out}",Au.prepareResourcesNamesList(this.settings.OUTPUT_RESOURCES))).replace("{prod}",this.productionText+" "),xm.textValue(t);case km.THIRD:return xm.progressValue(this.progress);case km.FOURTH:return xm.emptyValue()}},n.prototype.isMet=function(){var e=this,n=!0;return this.workSettings.inputSettings.forEach(function(t){n&&(n=e.resourcesService.getResource(t[0]).amount>t[1])}),this.workSettings.outputSettings.forEach(function(t){n&&(n=e.resourcesService.getResource(t[0]).amount<t[1])}),n},n.prototype.tick=function(){this.managementService.getComplexWorkers()&&this.workSettings&&this.workSettings.enabled&&(this.isMet()?this.isWorking()||this.hireWorker():this.isWorking()&&this.status!==Ym.PRODUCING_OUTPUT&&this.status!==Ym.TRANSPORTING_OUTPUT&&this.fireWorker()),this.isWorking()&&(this.outputStorage.length>0?this.collectOutputResources():this.inputStorage.length<this.settings.INPUT_RESOURCES.length&&0===this.outputStorage.length?this.collectInputResources():this.progress<100?(this.status=Ym.PRODUCING_OUTPUT,this.progress+=this.getPower(),this.progress>100&&(this.progress=100)):100===this.progress&&(this.progress=0,this.inputStorage=[],this.outputStorage=Au.copyResourceArray(this.settings.OUTPUT_RESOURCES),this.status=Ym.TRANSPORTING_OUTPUT))},n.prototype.collectInputResources=function(){var e=this,n=!0;return this.settings.INPUT_RESOURCES.forEach(function(t){e.inputStorage.find(function(e){return e.resource===t.resource})||(e.resourcesService.decreaseResource(t.resource,t.amount,e.getName())?e.inputStorage.push({resource:t.resource,amount:t.amount}):n=!1)}),n?(this.status=Ym.FETCHING_INPUT,!0):(this.status=Ym.WAITING_FOR_INPUT,!1)},n.prototype.collectOutputResources=function(){var e=this,n=!0;return this.outputStorage.forEach(function(t){e.resourcesService.increaseResource(t.resource,t.amount)?t.amount=0:n=!1}),this.outputStorage=this.outputStorage.filter(function(e){return e.amount>0}),n?0===this.outputStorage.length?(this.status=Ym.FETCHING_INPUT,!0):void 0:(this.status=Ym.WAITING_FOR_WAREHOUSE_SPACE,!1)},n.prototype.isComplexManagement=function(){return!0},n.prototype.getWorkSettings=function(){return this.workSettings},n}(Um),Qm=function(e){function n(n,t,r,l,i,o,u,s,a){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===r&&(r=0),void 0===l&&(l=Ym.FETCHING_INPUT),void 0===i&&(i=[]),void 0===o&&(o=[]),void 0===u&&(u=!1),void 0===s&&(s=null),void 0===a&&(a=1),e.call(this,n,t,bu.SAWMILL,ts.FOREST.SAWMILL,l,r,i,o,u,s,a)||this}return l(n,e),n}($m),Zm=function(e){function n(n,t,r,l,i,o,u,s){void 0===n&&(n=null),void 0===i&&(i=1),void 0===o&&(o=1),void 0===u&&(u=0),void 0===s&&(s=!1);var a=e.call(this,t,bu.DECONSTRUCTION,n,ts.DECONSTRUCTION_SITE,s,!1,!0,1)||this;return a.region=r,a.deconstructing=l,a.buildingComplexity=i,a.buildingSize=o,a.progress=u,a.servicesService&&(a.regionService=n.getServiceByRegion(r)),a}return l(n,e),n.prototype.getLine=function(e){switch(e){case km.FIRST:return xm.emptyValue();case km.SECOND:return xm.textValue("deconstructing "+Au.prepareBuildingName(this.deconstructing));case km.THIRD:return xm.progressValue(this.progress);case km.FOURTH:return xm.emptyValue()}},n.prototype.tick=function(){this.working&&(this.progress<100?(this.progress+=this.getPower()/this.buildingComplexity,this.progress>100&&(this.progress=100)):this.regionService.finishDeconstruction(this))},n.prototype.toJSON=function(){return{id:this.id,buildingType:this.buildingType,region:this.region,deconstructing:this.deconstructing,buildingComplexity:this.buildingComplexity,progress:this.progress,working:this.working,buildingSize:this.buildingSize}},n.prototype.getComplexity=function(){return 0},n.prototype.getSize=function(){return this.buildingSize},n.prototype.prepareDemolish=function(){return!1},n.prototype.finishDemolish=function(){},n.prototype.getBuildingBeingDemolished=function(){return this.deconstructing},n.prototype.getDecontructing=function(){return this.deconstructing},n}(Um);!function(e){e.GATHERING_FOOD="gathering food",e.GATHERING_RESOURCES="gathering resources",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.TRANSPORTING="transporting"}(qm||(qm={}));var Xm,Jm=function(e){return e[e.FOOD=0]="FOOD",e[e.RESOURCES=1]="RESOURCES",e}({}),ey=function(e){function n(n,t,r,l,i,o,u,s){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===r&&(r=0),void 0===l&&(l=qm.GATHERING_FOOD),void 0===i&&(i=!1),void 0===o&&(o=Jm.FOOD),void 0===u&&(u=[null,0]),void 0===s&&(s=1);var a=e.call(this,t,bu.GATHERER,n,ts.FOREST.GATHERER,i,!0,!0,s)||this;return a.progress=r,a.status=l,a.mode=o,a.storage=u,a.lastFind=null,a.servicesService&&(a.weatherService=n.getService(Nu.WEATHER)),a}return l(n,e),n.prototype.rollForFind=function(){var e=null;return this.mode===Jm.FOOD?e=Mu.randomElement([{item:vu.BERRY,chance:this.settings.BERRY_CHANCE},{item:vu.MUSHROOM,chance:this.settings.MUSHROOM_CHANCE},{item:vu.WHEAT,chance:this.settings.WHEAT_CHANCE}]):this.mode===Jm.RESOURCES&&(e=Mu.randomElement([{item:vu.BRUSHWOOD,chance:this.settings.BRUSHWOOD_CHANCE},{item:vu.STONE,chance:this.settings.STONE_CHANCE},{item:vu.LOG,chance:this.settings.LOG_CHANCE},{item:vu.COPPER,chance:this.settings.COPPER_CHANCE}])),e},n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,working:this.working,storage:this.storage,mode:this.mode}},n.prototype.callback=function(e){e===Jm.FOOD?(this.mode=Jm.FOOD,this.progress=0,this.status=qm.GATHERING_FOOD):e===Jm.RESOURCES&&(this.mode=Jm.RESOURCES,this.progress=0,this.status=qm.GATHERING_RESOURCES)},n.prototype.getLine=function(e){switch(e){case km.FIRST:return this.mode===Jm.FOOD?xm.buttonValue("gather resources",Jm.RESOURCES):xm.buttonValue("gather food",Jm.FOOD);case km.SECOND:return xm.textValue(this.status);case km.THIRD:return xm.progressValue(this.progress);case km.FOURTH:return null!=this.lastFind?xm.textValue("last find: "+Au.prepareResourceName(this.lastFind)):xm.emptyValue()}},n.prototype.tick=function(e){if(this.working)if(this.storage[1]>0)this.resourcesService.increaseResource(this.storage[0],this.storage[1]),this.storage=[null,0],this.setStatus();else if(this.progress<100)this.setStatus(),this.progress+=this.getPower(),this.progress>100&&(this.progress=100);else if(100===this.progress){this.progress=0;var n=this.rollForFind();if(null!==n&&!this.resourcesService.hasLimit(n))return n=null,void(this.progress=50);n?(this.lastFind=n,this.storage=[n,1],this.status=qm.TRANSPORTING):(this.lastFind=vu.NOTHING,this.progress=0)}},n.prototype.setStatus=function(){this.status=this.mode===Jm.FOOD?qm.GATHERING_FOOD:qm.GATHERING_RESOURCES},n}(Um);!function(e){e.MINING_STONE="mining stone",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.NO_MORE_RESOURCES="no more resources",e.TRANSPORTING="transporting"}(Xm||(Xm={}));var ny,ty=function(e){function n(n,t,r,l,i,o,u,s){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===r&&(r=0),void 0===l&&(l=Xm.MINING_STONE),void 0===i&&(i=!1),void 0===o&&(o=0),void 0===u&&(u=200),void 0===s&&(s=1);var a=e.call(this,t,bu.QUARRY,n,ts.MOUNTAINS.QUARRY,i,!0,!0,s)||this;return a.progress=r,a.status=l,a.storage=o,a.resources=u,a.servicesService&&(a.gameService=n.getService(Nu.GAME)),a}return l(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,working:this.working,storage:this.storage,resources:this.resources}},n.prototype.build=function(){return this.startProduction(),this.gameService.enable(Eu.BUILT_QUARRY),this},n.prototype.buildOnMountain=function(){return!0},n.prototype.getLine=function(e){switch(e){case km.FIRST:return xm.textValue("stone: "+this.resources);case km.SECOND:return xm.textValue(this.status);case km.THIRD:return xm.progressValue(this.progress);case km.FOURTH:return xm.emptyValue()}},n.prototype.isStoppable=function(){return this.resources>0},n.prototype.tick=function(e){this.resources<=0&&(this.status=Xm.NO_MORE_RESOURCES,this.stopProduction()),this.working&&(this.storage>0?this.resourcesService.increaseResource(vu.STONE,this.storage)?(this.storage=0,this.status=Xm.MINING_STONE):this.status=Xm.WAITING_FOR_WAREHOUSE_SPACE:this.progress<100?(this.status=Xm.MINING_STONE,this.progress+=this.getPower(),this.progress>100&&(this.progress=100)):100===this.progress&&(this.progress=0,this.resources-=1,this.storage=1,this.status=Xm.TRANSPORTING))},n}(Um);!function(e){e.RESEARCHING="researching",e.CRAFTING="crafting {craft}",e.WAITING_FOR_WAREHOUSE="waiting for warehouse space",e.NO_RESEARCH="nothing to research",e.NO_CRAFTING="nothing to craft"}(ny||(ny={}));var ry,ly=function(e){return e[e.RESEARCH=0]="RESEARCH",e[e.CRAFT=1]="CRAFT",e[e.SWITCH_TO_RESEARCH=2]="SWITCH_TO_RESEARCH",e}({}),iy=function(e){function n(n,t,r,l,i,o,u,s,a){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===r&&(r=0),void 0===l&&(l=ny.NO_RESEARCH),void 0===i&&(i=ly.RESEARCH),void 0===o&&(o=!1),void 0===u&&(u=null),void 0===s&&(s=1),void 0===a&&(a=0);var c=e.call(this,t,bu.WORKSHOP,n,ts.VILLAGE.WORKSHOP,o,!0,!0,s)||this;return c.progress=r,c.status=l,c.mode=i,c.recipe=u,c.storage=a,c.servicesService&&(c.craftingService=n.getService(Nu.CRAFTING),c.techService=n.getService(Nu.RESEARCH),c.gameService=n.getService(Nu.GAME)),c}return l(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,mode:this.mode,working:this.working,recipe:this.recipe,storage:this.storage}},n.prototype.build=function(){this.startProduction();var e=this.servicesService.getService(Nu.LOG);return this.gameService.isEnabled(Eu.RESEARCH)||(this.gameService.enable(Eu.RESEARCH),e.log("Researching unlocked")),this.gameService.isEnabled(Eu.CRAFTING)||(this.gameService.enable(Eu.CRAFTING),e.log("Crafting unlocked")),this.craftingService.increaseQueueSize(1),this},n.prototype.prepareDemolish=function(){return this.craftingService.decreaseQueueSize(1),e.prototype.prepareDemolish.call(this)},n.prototype.callback=function(e){var n=this;if("switch"===e){if(this.mode===ly.RESEARCH)this.progress=0,this.mode=ly.CRAFT,this.recipe=this.craftingService.getOrder(),this.status=null!==this.recipe?ny.CRAFTING:ny.NO_CRAFTING;else if(this.mode===ly.SWITCH_TO_RESEARCH)this.mode=ly.CRAFT,this.status=null!==this.recipe?ny.CRAFTING:ny.NO_CRAFTING;else if(this.mode===ly.CRAFT)if(this.recipe){this.modalService.open(mu.CONFIRM),this.modalService.setModalText("Workshop will switch to research after finishing current craft.");var t=this.modalService.registerForConfirmation().subscribe(function(e){t.unsubscribe(),e&&(n.mode=ly.SWITCH_TO_RESEARCH)})}else this.progress=0,this.mode=ly.RESEARCH,this.status=this.techService.isResearchStarted()?ny.RESEARCHING:ny.NO_RESEARCH}else"cancel"===e&&(this.recipe=null,this.progress=0,this.mode===ly.SWITCH_TO_RESEARCH?(this.mode=ly.RESEARCH,this.status=this.techService.isResearchStarted()?ny.RESEARCHING:ny.NO_RESEARCH):this.status=ny.NO_CRAFTING)},n.prototype.getLine=function(e){switch(e){case km.FIRST:return this.firstLine();case km.SECOND:return xm.textValue(this.status.replace("{craft}",this.recipe?Au.prepareResourceName(this.recipe.resource):""));case km.THIRD:if(this.recipe)return xm.buttonValue("cancel crafting","cancel");var n="";return this.techService.getCurrentResearch()&&(n=Au.prepareTechName(this.techService.getCurrentResearch().getTech())),xm.textValue(n);case km.FOURTH:return xm.progressValue(this.progress)}},n.prototype.firstLine=function(){return xm.buttonValue(this.mode===ly.RESEARCH||this.mode===ly.SWITCH_TO_RESEARCH?"craft":"research","switch")},n.prototype.tick=function(e){if(this.working)if(this.mode===ly.RESEARCH)this.techService.isResearchStarted()?(this.status!==ny.RESEARCHING&&(this.progress=0),this.status=ny.RESEARCHING,this.progress+=this.getPower(),this.progress>=100&&(this.progress=0,this.techService.progressTech(ts.VILLAGE.WORKSHOP.RESEARCH_POWER))):(this.status=ny.NO_RESEARCH,this.progress=0);else if(this.mode===ly.CRAFT||this.mode===ly.SWITCH_TO_RESEARCH)if(null===this.recipe&&(this.recipe=this.craftingService.getOrder(),this.progress=0),null===this.recipe)this.status=ny.NO_CRAFTING;else if(this.status===ny.WAITING_FOR_WAREHOUSE){var n=this.resourcesService.getLimit(this.recipe.resource);this.storage>n?(this.storage-=n,this.resourcesService.increaseResource(this.recipe.resource,n)):(this.resourcesService.increaseResource(this.recipe.resource,this.storage),this.status=ny.CRAFTING,this.progress=0,this.recipe=null)}else this.status=ny.CRAFTING,this.progress<100&&(this.progress+=this.getPower()/this.recipe.craftingDifficulty*ts.VILLAGE.WORKSHOP.CRAFTING_POWER),this.progress>=100&&(this.progress=100,this.storage=this.recipe.amount,n=this.resourcesService.getLimit(this.recipe.resource),this.storage>n?(this.storage-=n,this.resourcesService.increaseResource(this.recipe.resource,n),this.status=ny.WAITING_FOR_WAREHOUSE):this.resourcesService.increaseResource(this.recipe.resource,this.storage)?(this.progress=0,this.storage=0,this.recipe=null,this.mode===ly.SWITCH_TO_RESEARCH&&(this.mode=ly.RESEARCH,this.status=this.techService.isResearchStarted()?ny.RESEARCHING:ny.NO_RESEARCH)):this.status=ny.WAITING_FOR_WAREHOUSE)},n.prototype.getRecipe=function(){return this.recipe},n.prototype.cancelCrafting=function(){this.recipe=null},n.prototype.willResearch=function(){return this.mode===ly.RESEARCH||this.mode===ly.SWITCH_TO_RESEARCH},n}(Um),oy=function(e){function n(n,t,r,l){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===r&&(r=Cu.NONE),void 0===l&&(l=1);var i=e.call(this,t,bu.WAREHOUSE,n,ts.VILLAGE.WAREHOUSE,!1,!0,!1,l)||this;return i.resource=r,i.storage=50,i.servicesService&&(i.modalService=n.getService(Nu.MODAL)),i}return l(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,resource:this.resource}},n.prototype.callback=function(e){var n=this;if(this.resource===Cu.NONE)this.resource=Cu[String(e.target.value)],this.resourcesService.increaseLimit(this.resource,this.storage);else{this.modalService.open(mu.CONFIRM),this.modalService.setModalText("Are you sure you want to switch warehouse storage type?<br>All excess resources will be lost");var t=this.modalService.registerForConfirmation().subscribe(function(r){r?(n.resourcesService.decreaseLimit(n.resource,n.storage),n.resource=Cu[String(e.target.value)],n.resourcesService.increaseLimit(n.resource,n.storage)):e.target.selectedIndex=n.resource-1,t.unsubscribe()})}},n.prototype.getLine=function(e){switch(e){case km.FIRST:return this.firstLine();case km.SECOND:return xm.textValue("storage: "+this.storage);case km.THIRD:case km.FOURTH:return xm.emptyValue()}},n.prototype.firstLine=function(){var e=[];return e.push(Cu[Cu.NONE]),e.push(Cu[Cu.RAW]),e.push(Cu[Cu.PROCESSED]),e.push(Cu[Cu.FOOD]),e.push(Cu[Cu.TOOLS]),xm.dropdownValue(e,Cu[this.resource])},n.prototype.prepareDemolish=function(){return this.resourcesService.decreaseLimit(this.resource,this.storage),!0},n.prototype.startProduction=function(){return!1},n.prototype.stopProduction=function(){},n.prototype.fireWorker=function(){return!1},n.prototype.hireWorker=function(){return!1},n.prototype.getWorkers=function(){return 0},n.prototype.getHappinessEffect=function(){return 0},n}(Um);!function(e){e.HUNTING="hunting",e.TAME="taming animals",e.WAITING_FOR_PASTURE_SPACE="waiting for warehouse space",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.TRANSPORTING="transporting"}(ry||(ry={}));var uy,sy=function(e){return e[e.HUNTING=0]="HUNTING",e[e.TAMING=1]="TAMING",e}({}),ay=function(e){function n(n,t,r,l,i,o,u,s,a,c){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===r&&(r=0),void 0===l&&(l=ry.HUNTING),void 0===i&&(i=sy.HUNTING),void 0===o&&(o=!1),void 0===u&&(u=0),void 0===s&&(s=0),void 0===a&&(a=null),void 0===c&&(c=1);var p=e.call(this,t,bu.HUNTER_LODGE,n,ts.FOREST.HUNTER_LODGE,o,!0,!0,c)||this;return p.progress=r,p.status=l,p.mode=i,p.storage=u,p.storage2=s,p.animal=a,p.lastFind=null,p.servicesService&&(p.weatherService=n.getService(Nu.WEATHER),p.gameService=n.getService(Nu.GAME)),p}return l(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,mode:this.mode,working:this.working,storage:this.storage,storage2:this.storage2,animal:this.animal}},n.prototype.callback=function(e){"tame"===e?(this.mode=sy.TAMING,this.progress=0,this.storage=0,this.storage2=0,this.status=ry.TAME):(this.mode=sy.HUNTING,this.progress=0,this.storage=0,this.storage2=0,this.lastFind=null,this.status=ry.HUNTING)},n.prototype.getLine=function(e){switch(e){case km.FIRST:return this.gameService.isEnabled(Eu.PASTURE)?this.mode===sy.HUNTING?xm.buttonValue("tame animals","tame"):xm.buttonValue("hunt","hunt"):xm.emptyValue();case km.SECOND:return xm.textValue(this.status);case km.THIRD:return xm.progressValue(this.progress);case km.FOURTH:return null!==this.lastFind?xm.textValue("last tamed: "+Au.prepareResourceName(this.lastFind)):xm.emptyValue()}},n.prototype.tick=function(e){if(this.working)if(this.mode===sy.HUNTING)this.status=0!==this.storage&&0!==this.storage2?ry.TRANSPORTING:ry.HUNTING,this.status===ry.HUNTING?this.progress<100&&(this.progress+=this.getPower(),this.progress>=100&&(this.progress=0,this.storage<5&&(this.storage+=Mu.randomBetween(1,3),this.storage>5&&(this.storage=5)),this.storage2<5&&(this.storage2+=Mu.randomBetween(0,1),this.storage2>5&&(this.storage2=5)),this.status=ry.TRANSPORTING)):this.status!==ry.TRANSPORTING&&this.status!==ry.WAITING_FOR_WAREHOUSE_SPACE||(0!==this.storage&&this.resourcesService.increaseResource(vu.MEAT,this.storage)&&(this.storage=0),0!==this.storage2&&this.resourcesService.increaseResource(vu.FUR,this.storage2)&&(this.storage2=0),0!==this.storage&&0!==this.storage2&&(this.status=ry.WAITING_FOR_WAREHOUSE_SPACE));else if(this.mode===sy.TAMING)if(this.status===ry.TAME){if(this.progress<100&&(this.progress+=this.getPower(),this.progress>=100)){this.progress=0;var n=[];this.resourcesService.hasLimit(vu.CHICKEN)&&n.push({item:vu.CHICKEN,chance:6}),this.resourcesService.hasLimit(vu.PIG)&&n.push({item:vu.PIG,chance:5}),this.resourcesService.hasLimit(vu.COW)&&n.push({item:vu.COW,chance:4}),this.resourcesService.hasLimit(vu.HORSE)&&n.push({item:vu.HORSE,chance:3}),0===n.length&&(this.logService.log("No more space for animals. Hunter switched to hunting"),this.callback("hunt"));var t=Mu.randomElement(n);null!=t?(this.lastFind=t,this.animal=t,this.status=ry.TRANSPORTING):(this.lastFind=vu.NOTHING,this.animal=null)}}else this.status!==ry.TRANSPORTING&&this.status!==ry.WAITING_FOR_PASTURE_SPACE||this.animal&&(this.resourcesService.increaseResource(this.animal,1)?(this.animal=null,this.status=ry.TAME):this.status=ry.WAITING_FOR_PASTURE_SPACE)},n}(Um),cy=function(e){function n(n,t,r,l){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===r&&(r=0),void 0===l&&(l=1);var i=e.call(this,t,bu.SHRINE,n,ts.VILLAGE.SHRINE,!0,!0,!1,l)||this;return i.progress=r,i.servicesService&&(i.religionService=n.getService(Nu.RELIGION)),i}return l(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress}},n.prototype.build=function(){return this.religionService.increaseFaithCap(10),this.servicesService.getService(Nu.GAME).enable(Eu.RELIGION),this},n.prototype.getLine=function(e){switch(e){case km.FIRST:case km.SECOND:return xm.emptyValue();case km.THIRD:return xm.progressValue(this.progress,"prayers");case km.FOURTH:return xm.emptyValue()}},n.prototype.prepareDemolish=function(){return this.religionService.decreaseFaithCap(10),!0},n.prototype.startProduction=function(){return!0},n.prototype.stopProduction=function(){},n.prototype.tick=function(e){var n=this.servicesService.getService(Nu.VILLAGE).getPopulation();this.progress+=.01*n*this.getPower(),this.progress>100&&(this.progress=0,this.religionService.increaseFaith(1))},n.prototype.fireWorker=function(){return!1},n.prototype.hireWorker=function(){return!1},n.prototype.getWorkers=function(){return 0},n}(Um),py=function(){function e(e,n,t,r){void 0===e&&(e=null),void 0===n&&(n=-1),void 0===t&&(t=0),void 0===r&&(r=0),this.servicesService=e,this.fish=t,this.food=r,this.buildingType=bu.SCHOOL_OF_FISH,this.icons=[{name:"fish_food",path:"resources",prefix:"",suffix:"1"}],this.id=n,this.servicesService&&(this.resourcesService=e.getService(Nu.RESOURCES),this.effectsService=e.getService(Nu.EFFECTS),this.gameService=e.getService(Nu.GAME))}return e.prototype.callback=function(e){"food"===e&&this.resourcesService.decreaseResource(vu.FISH_FOOD,1,this.getName(),!0)?this.food+=10*ts.SEA.SCHOOL_OF_FISH.FISH_FOOD_DAYS:this.servicesService.getService(Nu.MODAL).info("No fish food available")},e.prototype.getBuildingType=function(){return this.buildingType},e.prototype.getComplexity=function(){return 0},e.prototype.getCost=function(){return new Map},e.prototype.getName=function(){return"School of fish"},e.prototype.getLine=function(e){switch(e){case km.FIRST:return xm.textValue("fish: "+this.fish);case km.SECOND:return this.gameService.isEnabled(Eu.FISH_FOOD)?xm.textValue("fish food: "+Math.floor(this.food/10)):xm.emptyValue();case km.THIRD:return this.gameService.isEnabled(Eu.FISH_FOOD)?xm.iconValue(this.icons):xm.emptyValue();case km.FOURTH:return this.gameService.isEnabled(Eu.FISH_FOOD)?xm.buttonValue("add fish food","food"):xm.emptyValue()}},e.prototype.getSize=function(){return 0},e.prototype.buildOnMountain=function(){return!1},e.prototype.tick=function(){this.food>0?(this.food-=1,1===Mu.randomBetween(1,ts.SEA.SCHOOL_OF_FISH.BREED_CHANCE/2)&&(this.fish+=Math.floor(ts.SEA.SCHOOL_OF_FISH.BREED_AMOUNT*this.getPower()))):1===Mu.randomBetween(1,ts.SEA.SCHOOL_OF_FISH.BREED_CHANCE)&&(this.fish+=Math.floor(ts.SEA.SCHOOL_OF_FISH.BREED_AMOUNT*this.getPower()))},e.prototype.build=function(){return this},e.prototype.getBuildingId=function(){return this.id},e.prototype.toJSON=function(){return{id:this.id,buildingType:this.buildingType,fish:this.fish,food:this.food}},e.prototype.prepareDemolish=function(){return this.stopProduction(),!1},e.prototype.finishDemolish=function(){},e.prototype.startProduction=function(){return!1},e.prototype.stopProduction=function(){},e.prototype.isStoppable=function(){return!1},e.prototype.isWorking=function(){return!0},e.prototype.isDemolishable=function(){return!1},e.prototype.getDescription=function(){return"School of fish"},e.prototype.fireWorker=function(){return!1},e.prototype.hireWorker=function(){return!1},e.prototype.getWorkers=function(){return 0},e.prototype.getFish=function(){return this.fish},e.prototype.reduceFish=function(e){return this.fish>=e&&(this.fish-=e,!0)},e.prototype.getEffects=function(){return 0},e.prototype.getPermanentEffects=function(){return 0},e.prototype.getDetails=function(){return""},e.prototype.hasDetails=function(){return!1},e.prototype.getPower=function(){return 1+this.effectsService.getNatureEffectsValue()/100},e.prototype.isCombinable=function(){return!1},e.prototype.isSplittable=function(){return!1},e.prototype.getHappinessEffect=function(){return 0},e.prototype.getWeatherMultiplier=function(){return 0},e.prototype.getDisplayableEffectsValue=function(){return 0},e.prototype.hasBuff=function(){return!1},e.prototype.isBuffed=function(){return!1},e.prototype.getBuff=function(){return null},e.prototype.isComplexManagement=function(){return!1},e.prototype.getWorkSettings=function(){return null},e.prototype.hasUpgrade=function(){return!1},e.prototype.getUpgradeCost=function(){return new Map},e.prototype.setBuildingLevel=function(e){},e.prototype.getBuildingLevel=function(){return 0},e}();!function(e){e.WORKING="working",e.BAD_WEATHER="bad weather",e.STOPPED="stopped"}(uy||(uy={}));var hy,dy=function(e){function n(n,t,r,l,i,o){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===r&&(r=0),void 0===l&&(l=4),void 0===i&&(i=uy.WORKING),void 0===o&&(o=1);var u=e.call(this,t,bu.FARM,n,ts.FIELD.FARM,r>0,!0,!0,o)||this;return u.workers=r,u.maxWorkers=l,u.status=i,u.servicesService&&(u.weatherService=n.getService(Nu.WEATHER),u.calendarService=n.getService(Nu.CALENDAR),u.fieldService=n.getServiceByRegion(ku.FIELD)),u}return l(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,workers:this.workers,maxWorkers:this.maxWorkers}},n.prototype.callback=function(e){"hire"===e&&this.workers<this.maxWorkers&&this.resourcesService.hireWorker()?this.workers+=1:"fire"===e&&this.workers>0&&(this.resourcesService.fireWorker(),this.workers-=1)},n.prototype.getLine=function(e){switch(e){case km.FIRST:return xm.textValue("workers: "+this.workers+"/"+this.maxWorkers);case km.SECOND:return xm.textValue(this.status);case km.THIRD:return xm.twoButtonValue("hire worker","hire","","fire worker","fire");case km.FOURTH:return xm.emptyValue()}},n.prototype.isWorking=function(){return this.workers>0},n.prototype.startProduction=function(){if(0===this.workers){for(;this.workers<this.maxWorkers&&this.resourcesService.hireWorker();)this.workers+=1;if(this.workers>0)return!0}return!1},n.prototype.stopProduction=function(){this.workers>0&&(this.resourcesService.fireWorker(this.workers),this.workers=0)},n.prototype.tick=function(e){var n=this;if(this.workers>0)if(this.weatherService.isWeather(xu.RAIN,xu.STORM))this.status=uy.BAD_WEATHER;else{this.status=uy.WORKING;for(var t=this.workers;t>0;){var r=this.fieldService.getBuildings().filter(function(e){return(e.getBuildingType()===bu.FIELD||e.getBuildingType()===bu.ORCHARD||e.getBuildingType()===bu.PASTURE)&&e.hasWork()});if(0===r.length)break;r.forEach(function(e){t>0&&e.work(n.getPower())&&(t-=1)})}}else this.status=uy.STOPPED},n.prototype.fireWorker=function(){return this.workers>0&&(this.resourcesService.fireWorker(1),this.workers-=1,!0)},n.prototype.hireWorker=function(){return!!(this.workers<this.maxWorkers&&this.resourcesService.hireWorker())&&(this.workers+=1,!0)},n.prototype.getWorkers=function(){return this.workers},n}(Um);!function(e){e.PLOW_FIELD="plowing {crop} field",e.SOWING="sowing {crop}",e.GROWING="{crop} growing",e.HARVEST="harvesting {crop}",e.FALLOW="fallow"}(hy||(hy={}));var fy,gy=function(e){function n(n,t,r,l,i,o,u,s,a){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===r&&(r=ts.FIELD.FIELD.SIZE),void 0===l&&(l=Tu.NONE),void 0===i&&(i=hy.FALLOW),void 0===o&&(o=0),void 0===u&&(u=!0),void 0===s&&(s=0),void 0===a&&(a=1);var c=e.call(this,t,bu.FIELD,n,ts.FIELD.FIELD,u,!0,!0,a)||this;return c.currentSize=r,c.crop=l,c.status=i,c.progress=o,c.growth=s,c.servicesService&&(c.gameService=n.getService(Nu.GAME),c.modalService=n.getService(Nu.MODAL),c.weatherService=n.getService(Nu.WEATHER),c.calendarService=n.getService(Nu.CALENDAR)),c}return l(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,size:this.currentSize,crop:this.crop,status:this.status,progress:this.progress,working:this.working,growth:this.growth}},n.prototype.getSize=function(){return this.currentSize},n.prototype.getComplexity=function(){return e.prototype.getComplexity.call(this)*(this.getSize()/this.settings.SIZE)},n.prototype.callback=function(e){var n=this;if(this.crop===Tu.NONE||this.status===hy.FALLOW)this.crop=Tu[String(e.target.value)],this.status=hy.FALLOW,this.progress=0;else{this.modalService.open(mu.CONFIRM),this.modalService.setModalText("Are you sure you want to switch field crop type?<br>All field progress will be lost");var t=this.modalService.registerForConfirmation().subscribe(function(r){r?(n.crop=Tu[String(e.target.value)],n.status=hy.FALLOW,n.progress=0):e.target.selectedIndex=n.crop,t.unsubscribe()})}},n.prototype.finishDemolish=function(){},n.prototype.getLine=function(e){var n=this;switch(e){case km.FIRST:return xm.textValue("size: "+this.getSize());case km.SECOND:var t=[];return t.push(Tu[Tu.NONE]),Object.entries(Object(is.FIELD)).forEach(function(e){is.getCrop(Tu[e[0]]).PREREQUISITE?n.gameService.isEnabled(is.getCrop(Tu[e[0]]).PREREQUISITE)&&t.push(e[0]):t.push(e[0])}),xm.dropdownValue(t,Tu[this.crop]);case km.THIRD:return xm.textValue(this.status.replace("{crop}",Tu[this.crop].toLowerCase()));case km.FOURTH:return this.status===hy.HARVEST?xm.progressValue(Math.floor(this.growth/(2*this.getSize())*100),"harvest: "+this.growth):xm.progressValue(this.progress)}},n.prototype.getName=function(){return this.crop===Tu.NONE?"Field":Tu[this.crop].charAt(0).toUpperCase()+Tu[this.crop].slice(1).toLowerCase()+" field"},n.prototype.startProduction=function(){return this.working=!0,!0},n.prototype.stopProduction=function(){this.working=!1},n.prototype.tick=function(e){if(this.calendarService.getSeason()===Rg.WINTER&&(this.status=hy.FALLOW,this.growth=0,this.progress=0),this.status===hy.GROWING)if(this.calendarService.getSeason()===Rg.AUTUMN)this.status=hy.HARVEST,this.growth=Math.floor(2*this.progress*this.getSize()/100),this.progress=0;else if(this.progress<100){var n=this.getPower()*(1+this.effectsService.getNatureEffectsValue()/100)/is.getCrop(this.crop).GROWTH;this.weatherService.getCurrentTemperature()<=5?n*=0:this.weatherService.getCurrentTemperature()<=10?n*=.2:this.weatherService.getCurrentTemperature()<=15?n*=.5:this.weatherService.getCurrentTemperature()<=20?n*=.8:this.weatherService.getCurrentTemperature()<=25?n*=1:this.weatherService.getCurrentTemperature()<=27?n*=.8:this.weatherService.getCurrentTemperature()<=29?n*=.6:this.weatherService.getCurrentTemperature()<=31?n*=.4:this.weatherService.getCurrentTemperature()<=33?n*=.2:this.weatherService.getCurrentTemperature()<=35&&(n*=0),this.progress+=n,this.progress>100&&(this.progress=100)}else 100===this.progress&&(this.growth=this.getSize()*is.getCrop(this.crop).YIELD_MULTIPLIER,this.progress=0,this.status=hy.HARVEST)},n.prototype.work=function(e){if(this.isWorking()&&this.status!==hy.GROWING&&this.crop!==Tu.NONE){if(this.status===hy.FALLOW&&this.calendarService.getSeason()===Rg.SPRING)return this.status=hy.PLOW_FIELD,!0;if(this.status===hy.PLOW_FIELD&&this.calendarService.getSeason()===Rg.SPRING)return this.progress<100&&(this.progress+=e/this.getSize(),this.progress>=100&&(this.progress=0,this.status=hy.SOWING)),!0;if(this.status===hy.SOWING&&(this.calendarService.getSeason()===Rg.SPRING||this.calendarService.getSeason()===Rg.SUMMER))return this.progress+=e/this.getSize(),this.progress>=100&&(this.progress=0,this.status=hy.GROWING),!0;if(this.status===hy.HARVEST){var n=vu[Tu[this.crop]];if(this.resourcesService.hasLimit(n))return this.resourcesService.increaseResource(n,1),this.growth-=1,this.growth<=0&&(this.status=hy.FALLOW),!0}}return!1},n.prototype.fireWorker=function(){return!1},n.prototype.hireWorker=function(){return!1},n.prototype.getWorkers=function(){return 0},n.prototype.hasWork=function(){return this.isWorking()&&this.status!==hy.GROWING&&this.crop!==Tu.NONE&&(this.status===hy.FALLOW&&this.calendarService.getSeason()===Rg.SPRING||this.status===hy.PLOW_FIELD&&this.calendarService.getSeason()===Rg.SPRING||this.status===hy.SOWING&&(this.calendarService.getSeason()===Rg.SPRING||this.calendarService.getSeason()===Rg.SUMMER)||this.status===hy.HARVEST&&this.resourcesService.hasLimit(vu[Tu[this.crop]]))},n.prototype.getDetails=function(){return this.crop!==Tu.NONE?"growing difficulty: "+is.getCrop(this.crop).GROWTH+"<br>yield multiplier: "+is.getCrop(this.crop).YIELD_MULTIPLIER+"<br>"+e.prototype.getDetails.call(this):e.prototype.getDetails.call(this)},n.prototype.getHappinessEffect=function(){return 0},n.prototype.isCombinable=function(){return!0},n.prototype.isSplittable=function(){return!0},n.prototype.combine=function(e,n){var t=this;if(this.getBuildingType()===e.getBuildingType()){this.modalService.open(mu.CONFIRM),this.modalService.setModalText(" Are you sure you want to combine "+this.getName()+" of size "+this.getSize()+" with "+e.getName()+" of size "+e.getSize()+"?<br>Resulting "+this.getName()+" of size "+(this.getSize()+e.getSize())+" will be changed to fallow");var r=this.modalService.registerForConfirmation().subscribe(function(l){r.unsubscribe(),l?(t.currentSize+=e.getSize(),t.status=hy.FALLOW,t.progress=0,t.growth=0,n.finaliseCombine(!0)):n.finaliseCombine(!1)})}},n.prototype.split=function(e){var t=this;this.modalService.open(mu.INPUT),this.modalService.setModalText("Set split size (1-"+(this.getSize()-1)+")");var r=this.modalService.registerForValueResponse().subscribe(function(l){r.unsubscribe(),isNaN(l)||0===l||(l>=1&&l<t.getSize()?(t.currentSize-=Number(l),e.finaliseSplit(new n(t.servicesService,t.servicesService.getService(Nu.ID).getNextId(),Number(l)).build())):t.modalService.info("Invalid size value!"))})},n}(Um);!function(e){e.FALLOW="fallow",e.PLANTING="planting {crop}",e.GROWING="{crop} growing",e.FRUITING="{crop} fruits growing",e.HARVEST="picking {crop}",e.NO_FRUITS="no fruits",e.CLEAR="clear old plants"}(fy||(fy={}));var vy,my=function(e){function n(n,t,r,l,i,o,u,s,a){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===r&&(r=ts.FIELD.ORCHARD.SIZE),void 0===l&&(l=Tu.NONE),void 0===i&&(i=fy.FALLOW),void 0===o&&(o=0),void 0===u&&(u=!0),void 0===s&&(s=0),void 0===a&&(a=1);var c=e.call(this,t,bu.ORCHARD,n,ts.FIELD.ORCHARD,u,!0,!0,a)||this;return c.currentSize=r,c.crop=l,c.status=i,c.progress=o,c.growth=s,c.servicesService&&(c.modalService=n.getService(Nu.MODAL),c.weatherService=n.getService(Nu.WEATHER),c.calendarService=n.getService(Nu.CALENDAR)),c}return l(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,size:this.currentSize,crop:this.crop,status:this.status,progress:this.progress,working:this.working,growth:this.growth}},n.prototype.getSize=function(){return this.currentSize},n.prototype.getComplexity=function(){return e.prototype.getComplexity.call(this)*(this.getSize()/this.settings.SIZE)},n.prototype.callback=function(e){var n=this;if(this.crop===Tu.NONE||this.status===fy.FALLOW)this.crop=Tu[String(e.target.value)],this.status=fy.FALLOW,this.progress=0;else{this.modalService.open(mu.CONFIRM),this.modalService.setModalText("Are you sure you want to switch orchard plant type?<br>All orchard progress will be lost");var t=this.modalService.registerForConfirmation().subscribe(function(r){r?(n.crop=Tu[String(e.target.value)],n.status=n.status===fy.FALLOW||n.status===fy.PLANTING?fy.FALLOW:fy.CLEAR,n.progress=0):e.target.selectedIndex=n.crop-Object.entries(is.FIELD).length,t.unsubscribe()})}},n.prototype.finishDemolish=function(){},n.prototype.getLine=function(e){var n=this;switch(e){case km.FIRST:return xm.textValue("size: "+this.getSize());case km.SECOND:var t=[];return t.push(Tu[Tu.NONE]),Object.entries(Object(is.ORCHARD)).forEach(function(e){is.getCrop(Tu[e[0]]).PREREQUISITE?n.gameService.isEnabled(is.getCrop(Tu[e[0]]).PREREQUISITE)&&t.push(e[0]):t.push(e[0])}),xm.dropdownValue(t,Tu[this.crop]);case km.THIRD:return xm.textValue(this.status.replace("{crop}",Tu[this.crop].toLowerCase()));case km.FOURTH:return this.status===fy.HARVEST?xm.progressValue(Math.floor(this.growth/(is.getCrop(this.crop).YIELD_MULTIPLIER*this.getSize())*100),"harvest: "+this.growth):this.status===fy.NO_FRUITS?xm.emptyValue():xm.progressValue(this.progress)}},n.prototype.getName=function(){return this.crop===Tu.NONE?"Orchard":Tu[this.crop].charAt(0).toUpperCase()+Tu[this.crop].slice(1).toLowerCase()+" orchard"},n.prototype.startProduction=function(){return this.working=!0,!0},n.prototype.stopProduction=function(){this.working=!1},n.prototype.tick=function(e){if(this.crop!==Tu.NONE){if(this.status!==fy.FALLOW&&this.calendarService.getSeason()===Rg.WINTER){if(this.status===fy.GROWING)return;this.status=fy.NO_FRUITS,this.growth=0,this.progress=0}else this.status===fy.NO_FRUITS&&this.calendarService.getSeason()===Rg.SPRING&&(this.status=fy.FRUITING);if(this.status===fy.GROWING||this.status===fy.FRUITING)if(this.calendarService.getSeason()===Rg.AUTUMN&&this.status===fy.FRUITING)this.status=fy.HARVEST,this.growth=Math.floor(2*this.progress*this.getSize()/100),this.progress=0;else if(this.progress<100){var n=this.getPower()*(1+this.effectsService.getNatureEffectsValue()/100);this.status===fy.GROWING?n/=is.getCrop(this.crop).GROWTH:this.status===fy.FRUITING&&(n/=is.getCrop(this.crop).FRUITING),this.weatherService.getCurrentTemperature()<=5?n*=0:this.weatherService.getCurrentTemperature()<=10?n*=.2:this.weatherService.getCurrentTemperature()<=15?n*=.5:this.weatherService.getCurrentTemperature()<=20?n*=.8:this.weatherService.getCurrentTemperature()<=25?n*=1:this.weatherService.getCurrentTemperature()<=27?n*=.8:this.weatherService.getCurrentTemperature()<=29?n*=.6:this.weatherService.getCurrentTemperature()<=31?n*=.4:this.weatherService.getCurrentTemperature()<=33?n*=.2:this.weatherService.getCurrentTemperature()<=35&&(n*=0),this.progress+=n,this.progress>100&&(this.progress=100)}else 100===this.progress&&(this.status===fy.GROWING?this.status=fy.FRUITING:this.status===fy.FRUITING&&(this.growth=is.getCrop(this.crop).YIELD_MULTIPLIER*this.getSize(),this.status=fy.HARVEST),this.progress=0)}},n.prototype.work=function(e){if(this.isWorking()&&this.status!==fy.GROWING&&this.crop!==Tu.NONE)if(this.status===fy.FALLOW){if(this.calendarService.getSeason()===Rg.SPRING)return this.status=fy.PLANTING,!0}else{if(this.status===fy.PLANTING)return this.progress<100&&(this.progress+=e/this.getSize(),this.progress>=100&&(this.progress=0,this.status=fy.GROWING)),!0;if(this.status===fy.HARVEST){var n=vu[Tu[this.crop]];if(this.resourcesService.hasLimit(n))return this.resourcesService.increaseResource(n,1),this.growth-=1,this.growth<=0&&(this.status=fy.NO_FRUITS),!0}else if(this.status===fy.CLEAR)return this.progress<100&&(this.progress+=e/this.getSize(),this.progress>=100&&(this.progress=0,this.status=fy.FALLOW)),!0}return!1},n.prototype.fireWorker=function(){return!1},n.prototype.hireWorker=function(){return!1},n.prototype.getWorkers=function(){return 0},n.prototype.hasWork=function(){return this.isWorking()&&this.status!==fy.GROWING&&this.crop!==Tu.NONE&&(this.status===fy.FALLOW&&this.calendarService.getSeason()===Rg.SPRING||this.status===fy.PLANTING||this.status===fy.CLEAR||this.status===fy.HARVEST&&this.resourcesService.hasLimit(vu[Tu[this.crop]]))},n.prototype.getDetails=function(){return this.crop!==Tu.NONE?"growing difficulty: "+is.getCrop(this.crop).GROWTH+"<br>fruiting difficulty: "+is.getCrop(this.crop).FRUITING+"<br>yield multiplier: "+is.getCrop(this.crop).YIELD_MULTIPLIER+"<br>"+e.prototype.getDetails.call(this):e.prototype.getDetails.call(this)},n.prototype.getHappinessEffect=function(){return 0},n.prototype.isCombinable=function(){return!0},n.prototype.isSplittable=function(){return!0},n.prototype.combine=function(e,n){var t=this;if(this.getBuildingType()===e.getBuildingType()){this.modalService.open(mu.CONFIRM),this.modalService.setModalText(" Are you sure you want to combine "+this.getName()+" of size "+this.getSize()+" with "+e.getName()+" of size "+e.getSize()+"?<br>Resulting "+this.getName()+" of size "+(this.getSize()+e.getSize())+" will be changed to fallow");var r=this.modalService.registerForConfirmation().subscribe(function(l){r.unsubscribe(),l?(t.currentSize+=e.getSize(),t.status=fy.FALLOW,t.progress=0,t.growth=0,n.finaliseCombine(!0)):n.finaliseCombine(!1)})}},n.prototype.split=function(e){var t=this;this.modalService.open(mu.INPUT),this.modalService.setModalText("Set split size (1-"+(this.getSize()-1)+")");var r=this.modalService.registerForValueResponse().subscribe(function(l){r.unsubscribe(),isNaN(l)||0===l||(l>=1&&l<t.getSize()?(t.currentSize-=Number(l),e.finaliseSplit(new n(t.servicesService,t.servicesService.getService(Nu.ID).getNextId(),Number(l)).build())):t.modalService.info("Invalid size value!"))})},n}(Um),yy=function(e){function n(n,t,r,l,i,o,u,s,a){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===r&&(r=0),void 0===l&&(l=Ym.FETCHING_INPUT),void 0===i&&(i=[]),void 0===o&&(o=[]),void 0===u&&(u=!1),void 0===s&&(s=null),void 0===a&&(a=1),e.call(this,n,t,bu.WINDMILL,ts.FIELD.WINDMILL,l,r,i,o,u,s,a)||this}return l(n,e),n}($m),Sy=function(e){function n(n,t,r,l,i,o,u,s,a){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===r&&(r=0),void 0===l&&(l=Ym.FETCHING_INPUT),void 0===i&&(i=[]),void 0===o&&(o=[]),void 0===u&&(u=!1),void 0===s&&(s=null),void 0===a&&(a=1),e.call(this,n,t,bu.BAKERY,ts.VILLAGE.BAKERY,l,r,i,o,u,s,a)||this}return l(n,e),n}($m);!function(e){e.FISHING="fishing",e.WAITING_FOR_FISH="waiting for fish",e.FETCHING_WHEAT="fetching wheat",e.PRODUCING_BAIT="producing fish food",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.WAITING_FOR_WAREHOUSE_SPACE_FISH_FOOD="waiting for warehouse space",e.TRANSPORTING_FISH="transporting fish",e.TRANSPORTING_BAIT="transporting fish food"}(vy||(vy={}));var Ey,by=function(e){function n(n,t,r,l,i,o){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===r&&(r=0),void 0===l&&(l=vy.WAITING_FOR_FISH),void 0===i&&(i=!1),void 0===o&&(o=1);var u=e.call(this,t,bu.FISHERS_HUT,n,ts.SEA.FISHERS_HUT,i,!0,!0,o)||this;return u.progress=r,u.status=l,u.servicesService&&(u.seaService=n.getServiceByRegion(ku.SEA)),u}return l(n,e),n.prototype.callback=function(e){"bait"===e?(this.status=vy.FETCHING_WHEAT,this.progress=0):"fishing"===e&&(this.status=vy.WAITING_FOR_FISH,this.progress=0)},n.prototype.getLine=function(e){switch(e){case km.FIRST:return!this.gameService.isEnabled(Eu.FISH_FOOD)||this.status!==vy.FISHING&&this.status!==vy.WAITING_FOR_FISH&&this.status!==vy.TRANSPORTING_FISH&&this.status!==vy.WAITING_FOR_WAREHOUSE_SPACE?xm.buttonValue("fishing","fishing"):xm.buttonValue("produce fish food","bait");case km.SECOND:return xm.textValue(this.status);case km.THIRD:return xm.progressValue(this.progress);case km.FOURTH:return xm.emptyValue()}},n.prototype.tick=function(){if(this.working)if(this.status===vy.WAITING_FOR_FISH)this.seaService.reduceFish(1)&&(this.status=vy.FISHING);else if(this.status===vy.FISHING){if(this.progress<100&&(this.progress+=this.getPower(),this.progress>=100)){if(this.progress=0,this.servicesService.getService(Nu.ROYAL).catchGoldenFish())return;this.status=vy.TRANSPORTING_FISH}}else if(this.status===vy.TRANSPORTING_FISH||this.status===vy.WAITING_FOR_WAREHOUSE_SPACE){var e=this.resourcesService.increaseResource(vu.FISH,1);this.status=e?vy.WAITING_FOR_FISH:vy.WAITING_FOR_WAREHOUSE_SPACE}else this.status===vy.FETCHING_WHEAT?this.resourcesService.decreaseResource(vu.WHEAT,2,this.getName())&&(this.status=vy.PRODUCING_BAIT):this.status===vy.PRODUCING_BAIT?this.progress<100&&(this.progress+=this.getPower(),this.progress>=100&&(this.progress=0,this.status=vy.TRANSPORTING_BAIT)):this.status!==vy.TRANSPORTING_BAIT&&this.status!==vy.WAITING_FOR_WAREHOUSE_SPACE_FISH_FOOD||(e=this.resourcesService.increaseResource(vu.FISH_FOOD,1),this.status=e?vy.FETCHING_WHEAT:vy.WAITING_FOR_WAREHOUSE_SPACE_FISH_FOOD)},n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,working:this.working}},n.prototype.getDescription=function(){return"Fishers catch fish in the sea"},n}(Um),Oy=function(e){function n(n,t,r,l){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===r&&(r=ts.FORT.BARRACKS.SIZE),void 0===l&&(l=1);var i=e.call(this,t,bu.BARRACKS,n,ts.FORT.BARRACKS,!1,!0,!1,l)||this;return i.barracksSize=r,i.servicesService&&(i.armyService=n.getService(Nu.ARMY),i.modalService=n.getService(Nu.MODAL)),i}return l(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,barracksSize:this.barracksSize}},n.prototype.build=function(){return this.servicesService.getService(Nu.GAME).isEnabled(Eu.ARMY)||this.servicesService.getService(Nu.GAME).enable(Eu.ARMY),this.armyService.increaseBarracks(this.barracksSize),this},n.prototype.prepareDemolish=function(){return this.armyService.getFreeBarracks()>=this.barracksSize?(this.armyService.decreaseBarracks(this.barracksSize),!0):(this.modalService.info("Your troops would have nowhere to sleep!<br>You cannot demolish barracks right now!"),!1)},n.prototype.getLine=function(e){switch(e){case km.FIRST:return xm.textValue("capacity: "+this.barracksSize);case km.SECOND:case km.THIRD:case km.FOURTH:return xm.emptyValue()}},n.prototype.getHappinessEffect=function(){return 0},n.prototype.getEffects=function(){return 0},n.prototype.getPermanentEffects=function(){return 0},n}(Um);!function(e){e.TRAINING="training",e.NO_RECRUITS="no recruits"}(Ey||(Ey={}));var Ry,Ty=function(e){function n(n,t,r,l,i,o){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===r&&(r=0),void 0===l&&(l=!1),void 0===i&&(i=Ey.NO_RECRUITS),void 0===o&&(o=1);var u=e.call(this,t,bu.TRAINING_SQUARE,n,ts.FORT.TRAINING_SQUARE,l,!0,!0,o)||this;return u.progress=r,u.status=i,u.servicesService&&(u.armyService=n.getService(Nu.ARMY)),u}return l(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,working:this.working}},n.prototype.getLine=function(e){switch(e){case km.FIRST:return xm.emptyValue();case km.SECOND:return xm.textValue(this.status);case km.THIRD:return this.status===Ey.TRAINING?xm.progressValue(this.progress):xm.emptyValue();case km.FOURTH:return xm.emptyValue()}},n.prototype.tick=function(e){this.working&&(this.armyService.hasRecruits()?(this.status=Ey.TRAINING,this.progress<100&&(this.progress+=this.getPower()),this.progress>=100&&(this.progress=0,this.armyService.progressRecruitment(1))):(this.status=Ey.NO_RECRUITS,this.progress=0))},n}(Um),Cy=function(e){function n(n,t,r,l,i,o,u,s,a){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===r&&(r=0),void 0===l&&(l=Ym.FETCHING_INPUT),void 0===i&&(i=[]),void 0===o&&(o=[]),void 0===u&&(u=!1),void 0===s&&(s=null),void 0===a&&(a=1),e.call(this,n,t,bu.TANNERY,ts.FOREST.TANNERY,l,r,i,o,u,s,a)||this}return l(n,e),n}($m),_y=function(e){function n(n,t,r,l,i,o,u){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===r&&(r=ts.FORT.STOCKADE.DURABILITY),void 0===l&&(l=ts.FORT.STOCKADE.DURABILITY),void 0===i&&(i=0),void 0===o&&(o=!1),void 0===u&&(u=1);var s=e.call(this,t,bu.STOCKADE,n,ts.FORT.STOCKADE,o,!0,!1,u)||this;return s.health=r,s.durability=l,s.progress=i,s.servicesService&&(s.armyService=n.getService(Nu.ARMY),s.modalService=n.getService(Nu.MODAL)),s}return l(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,health:this.health,durability:this.durability,progress:this.progress,working:this.working}},n.prototype.build=function(){return this.armyService.increaseDefense(ts.FORT.STOCKADE.DEFENSE),this},n.prototype.prepareDemolish=function(){return this.armyService.decreaseDefense(ts.FORT.STOCKADE.DEFENSE),!0},n.prototype.callback=function(e){var n=this;if("repair"===e){this.modalService.open(mu.CONFIRM),this.modalService.setModalText("Are you sure you want to repair "+this.getName()+" for 1 log for each durability point missing?");var t=this.modalService.registerForConfirmation().subscribe(function(e){e&&(n.startProduction()||n.modalService.info("No free worker to repair stockade!")),t.unsubscribe()})}else"stop"===e&&this.fireWorker()},n.prototype.getLine=function(e){switch(e){case km.FIRST:return xm.textValue("durability: "+this.health+"/"+this.durability);case km.SECOND:return xm.textValue("defense: "+ts.FORT.STOCKADE.DEFENSE);case km.THIRD:return this.health<this.durability&&!this.working?xm.buttonValue("repair","repair"):this.health<this.durability&&this.working?xm.buttonValue("stop repair","stop"):xm.emptyValue();case km.FOURTH:return this.working?xm.progressValue(this.progress):xm.emptyValue()}},n.prototype.tick=function(e){this.working&&(this.progress<100&&(0===this.progress&&this.resourcesService.decreaseResource(vu.LOG,1,this.getName())?this.progress+=this.getPower():this.progress>0&&(this.progress+=this.getPower())),this.progress>=100&&(this.progress=0,this.health+=1),this.health===this.durability&&this.fireWorker())},n.prototype.getHappinessEffect=function(){return 0},n}(Um),Iy=function(e){function n(n,t,r,l,i,o,u,s,a){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===r&&(r=0),void 0===l&&(l=Ym.FETCHING_INPUT),void 0===i&&(i=[]),void 0===o&&(o=[]),void 0===u&&(u=!1),void 0===s&&(s=null),void 0===a&&(a=1),e.call(this,n,t,bu.COTTON_MILL,ts.FIELD.COTTON_MILL,l,r,i,o,u,s,a)||this}return l(n,e),n}($m),Ay=function(e){function n(n,t,r,l,i,o,u,s,a){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===r&&(r=0),void 0===l&&(l=Ym.FETCHING_INPUT),void 0===i&&(i=[]),void 0===o&&(o=[]),void 0===u&&(u=!1),void 0===s&&(s=null),void 0===a&&(a=1),e.call(this,n,t,bu.TAILOR,ts.VILLAGE.TAILOR,l,r,i,o,u,s,a)||this}return l(n,e),n}($m),wy=function(e){function n(n,t,r,l,i,o,u,s,a){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===r&&(r=0),void 0===l&&(l=Ym.FETCHING_INPUT),void 0===i&&(i=[]),void 0===o&&(o=[]),void 0===u&&(u=!1),void 0===s&&(s=null),void 0===a&&(a=1),e.call(this,n,t,bu.BREWERY,ts.FIELD.BREWERY,l,r,i,o,u,s,a)||this}return l(n,e),n}($m),Ny=function(e){function n(n,t,r,l,i,o,u){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===r&&(r=ts.FORT.WOODEN_TOWER.DURABILITY-30),void 0===l&&(l=ts.FORT.WOODEN_TOWER.DURABILITY),void 0===i&&(i=0),void 0===o&&(o=!1),void 0===u&&(u=1);var s=e.call(this,t,bu.WOODEN_TOWER,n,ts.FORT.WOODEN_TOWER,o,!0,!1,u)||this;return s.health=r,s.durability=l,s.progress=i,s.servicesService&&(s.armyService=n.getService(Nu.ARMY),s.modalService=n.getService(Nu.MODAL)),s}return l(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,health:this.health,durability:this.durability,progress:this.progress,working:this.working}},n.prototype.build=function(){return this.armyService.increaseDefense(ts.FORT.WOODEN_TOWER.DEFENSE),this},n.prototype.prepareDemolish=function(){return this.armyService.decreaseDefense(ts.FORT.WOODEN_TOWER.DEFENSE),!0},n.prototype.callback=function(e){var n=this;if("repair"===e){this.modalService.open(mu.CONFIRM),this.modalService.setModalText("Are you sure you want to repair "+this.getName()+" for 1 log for each durability point missing?");var t=this.modalService.registerForConfirmation().subscribe(function(e){e&&(n.startProduction()||n.modalService.info("No free worker to repair wooden tower!")),t.unsubscribe()})}else"stop"===e&&this.fireWorker()},n.prototype.getLine=function(e){switch(e){case km.FIRST:return xm.textValue("durability: "+this.health+"/"+this.durability);case km.SECOND:return xm.textValue("defense: "+ts.FORT.WOODEN_TOWER.DEFENSE);case km.THIRD:return this.health<this.durability&&!this.working?xm.buttonValue("repair","repair"):this.health<this.durability&&this.working?xm.buttonValue("stop repair","stop"):xm.emptyValue();case km.FOURTH:return this.working?xm.progressValue(this.progress):xm.emptyValue()}},n.prototype.tick=function(e){this.working&&(this.progress<100&&(0===this.progress&&this.resourcesService.decreaseResource(vu.LOG,1,this.getName())?this.progress+=this.getPower():this.progress>0&&(this.progress+=this.getPower())),this.progress>=100&&(this.progress=0,this.health+=1),this.health===this.durability&&this.fireWorker())},n.prototype.getHappinessEffect=function(){return 0},n}(Um),Py=function(e){function n(n,t,r,l,i,o,u){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===r&&(r=ts.FORT.STONE_TOWER.DURABILITY),void 0===l&&(l=ts.FORT.STONE_TOWER.DURABILITY),void 0===i&&(i=0),void 0===o&&(o=!1),void 0===u&&(u=1);var s=e.call(this,t,bu.STONE_TOWER,n,ts.FORT.STONE_TOWER,o,!0,!1,u)||this;return s.health=r,s.durability=l,s.progress=i,s.servicesService&&(s.armyService=n.getService(Nu.ARMY),s.modalService=n.getService(Nu.MODAL)),s}return l(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,health:this.health,durability:this.durability,progress:this.progress,working:this.working}},n.prototype.build=function(){return this.armyService.increaseDefense(ts.FORT.STONE_TOWER.DEFENSE),this},n.prototype.prepareDemolish=function(){return this.armyService.decreaseDefense(ts.FORT.STONE_TOWER.DEFENSE),!0},n.prototype.callback=function(e){var n=this;if("repair"===e){this.modalService.open(mu.CONFIRM),this.modalService.setModalText("Are you sure you want to repair "+this.getName()+" for 1 stone for each durability point missing?");var t=this.modalService.registerForConfirmation().subscribe(function(e){e&&(n.startProduction()||n.modalService.info("No free worker to repair stone tower!")),t.unsubscribe()})}else"stop"===e&&this.fireWorker()},n.prototype.getLine=function(e){switch(e){case km.FIRST:return xm.textValue("durability: "+this.health+"/"+this.durability);case km.SECOND:return xm.textValue("defense: "+ts.FORT.STONE_TOWER.DEFENSE);case km.THIRD:return this.health<this.durability&&!this.working?xm.buttonValue("repair","repair"):this.health<this.durability&&this.working?xm.buttonValue("stop repair","stop"):xm.emptyValue();case km.FOURTH:return this.working?xm.progressValue(this.progress):xm.emptyValue()}},n.prototype.tick=function(e){this.working&&(this.progress<100&&(0===this.progress&&this.resourcesService.decreaseResource(vu.STONE,1,this.getName())?this.progress+=this.getPower():this.progress>0&&(this.progress+=this.getPower())),this.progress>=100&&(this.progress=0,this.health+=1),this.health===this.durability&&this.fireWorker())},n.prototype.getHappinessEffect=function(){return 0},n}(Um),Dy=function(e){function n(n,t,r,l,i,o,u,s,a){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===r&&(r=0),void 0===l&&(l=Ym.FETCHING_INPUT),void 0===i&&(i=[]),void 0===o&&(o=[]),void 0===u&&(u=!1),void 0===s&&(s=null),void 0===a&&(a=1);var c=e.call(this,n,t,bu.WINERY,ts.FIELD.WINERY,l,r,i,o,u,s,a)||this;return n&&(c.managementService=n.getService(Nu.MANAGEMENT)),c}return l(n,e),n.prototype.tick=function(){this.managementService.getComplexWorkers()&&this.workSettings&&this.workSettings.enabled&&(this.isMet()?this.isWorking()||this.hireWorker():this.isWorking()&&this.fireWorker()),this.working&&(this.outputStorage.length>0?this.collectOutputResources():this.inputStorage.length<this.settings.INPUT_RESOURCES.length&&0===this.outputStorage.length?this.collectInputResources()&&(this.status=Ym.PREPARING):this.progress<100&&this.status===Ym.PREPARING?(this.progress+=this.getPower(),this.progress>100&&(this.progress=100)):100===this.progress&&this.status===Ym.PREPARING?(this.progress=0,this.status=Ym.PRODUCING_OUTPUT):this.progress<100&&this.status===Ym.PRODUCING_OUTPUT?(this.progress+=100/(10*Yu),this.progress>=100&&(this.progress=100)):100===this.progress&&this.status===Ym.PRODUCING_OUTPUT&&(this.progress=0,this.inputStorage=[],this.outputStorage=Au.copyResourceArray(this.settings.OUTPUT_RESOURCES),this.status=Ym.TRANSPORTING_OUTPUT))},n}($m),My=function(e){function n(n,t,r,l,i,o,u){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===r&&(r=0),void 0===l&&(l=0),void 0===i&&(i=0),void 0===o&&(o=!1),void 0===u&&(u=1);var s=e.call(this,t,bu.TAVERN,n,ts.VILLAGE.TAVERN,o,!0,!0,u)||this;return s.progress=r,s.beer=l,s.wine=i,s.servicesService&&(s.resourcesService=n.getService(Nu.RESOURCES),s.happinessService=n.getService(Nu.HAPPINESS),s.managementService=n.getService(Nu.MANAGEMENT)),s}return l(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,beer:this.beer,wine:this.wine,working:this.working}},n.prototype.getLine=function(e){switch(e){case km.FIRST:return xm.textValue(this.beer<.001&&this.wine<.001?"waiting for alcohol":this.working?"open":"closed");case km.SECOND:return xm.emptyValue();case km.THIRD:return xm.textValue("beer: "+Au.round(this.beer,2));case km.FOURTH:return xm.textValue("wine: "+Au.round(this.wine,2))}},n.prototype.tick=function(e){if(this.working){this.beer<10&&this.resourcesService.decreaseResource(vu.BEER,1,this.getName())&&(this.beer+=1,this.beer>10&&(this.beer=10)),this.wine<10&&this.resourcesService.decreaseResource(vu.WINE,1,this.getName())&&(this.wine+=1,this.wine>10&&(this.wine=10));var n=this.managementService.getAlcoholRations(),t=this.resourcesService.getTotalPeople();if(this.happinessService.getHappiness()<=100&&t>1&&(this.beer>0||this.wine>0))for(var r=t;r>0;r--){var l=Mu.randomBetween(0,1);0===l&&this.beer>=.01*n?(this.beer-=.01*n,this.happinessService.increaseHappiness(.01*n/t*this.getPower(),zu.ALCOHOL_HAPPINESS_LIMIT)):1===l&&this.wine>=.01*n&&(this.wine-=.01*n,this.happinessService.increaseHappiness(.01*n/t*this.getPower(),zu.ALCOHOL_HAPPINESS_LIMIT))}else this.happinessService.getHappiness()>75&&t>1&&this.happinessService.decreaseHappiness(.02,zu.ALCOHOL_HAPPINESS_FLOOR)}},n}(Um),ky=function(e){function n(n,t,r,l,i){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===r&&(r=0),void 0===l&&(l=!1),void 0===i&&(i=1);var o=e.call(this,t,bu.GEOLOGIST,n,ts.MOUNTAINS.GEOLOGIST,l,!0,!0,i)||this;return o.progress=r,o.servicesService&&(o.gameService=n.getService(Nu.GAME),o.resourcesService=n.getService(Nu.RESOURCES),o.landService=n.getService(Nu.LAND)),o}return l(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,working:this.working}},n.prototype.getLine=function(e){switch(e){case km.FIRST:return xm.textValue("looking for ores");case km.SECOND:return xm.progressValue(this.progress);case km.THIRD:return xm.textValue(this.lastFind?"last find: "+Au.prepareResourceName(this.lastFind)+" deposit":"last find: nothing");case km.FOURTH:return xm.emptyValue()}},n.prototype.tick=function(e){if(this.working)if(this.progress<100)this.progress+=this.getPower(),this.progress>100&&(this.progress=100);else{var n=[];if(this.landService.getOre(vu.COAL)<50&&n.push({item:vu.COAL,chance:this.settings.COAL_CHANCE}),this.landService.getOre(vu.COPPER_ORE)<50&&n.push({item:vu.COPPER_ORE,chance:this.settings.COPPER_CHANCE}),this.landService.getOre(vu.TIN_ORE)<50&&n.push({item:vu.TIN_ORE,chance:this.settings.TIN_CHANCE}),this.gameService.isEnabled(Eu.GOLD)&&this.landService.getOre(vu.GOLD_ORE)<50&&n.push({item:vu.GOLD_ORE,chance:this.settings.GOLD_CHANCE}),this.gameService.isEnabled(Eu.SILVER)&&this.landService.getOre(vu.SILVER_ORE)<50&&n.push({item:vu.SILVER_ORE,chance:this.settings.SILVER_CHANCE}),this.gameService.isEnabled(Eu.IRON)&&this.landService.getOre(vu.IRON_ORE)<50&&n.push({item:vu.IRON_ORE,chance:this.settings.IRON_CHANCE}),n.length>0){this.progress=0;var t=Mu.randomElement(n,10);t?(this.landService.increaseOre(t,1),this.lastFind=t):this.lastFind=null}}},n}(Um),Ly=function(e){function n(n,t,r,l,i,o,u,s,a){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===r&&(r=0),void 0===l&&(l=Ym.FETCHING_INPUT),void 0===i&&(i=[]),void 0===o&&(o=[]),void 0===u&&(u=!1),void 0===s&&(s=null),void 0===a&&(a=1),e.call(this,n,t,bu.STONEMASON,ts.MOUNTAINS.STONEMASON,l,r,i,o,u,s,a)||this}return l(n,e),n}($m),xy=function(){function e(e,n,t){void 0===e&&(e=null),void 0===n&&(n=-1),void 0===t&&(t=0),this.servicesService=e,this.sharks=t,this.buildingType=bu.SHARKS,this.id=n,this.servicesService&&(this.resourcesService=e.getService(Nu.RESOURCES),this.seaService=e.getService(Nu.SEA),this.effectsService=e.getService(Nu.EFFECTS))}return e.prototype.callback=function(e){},e.prototype.getBuildingType=function(){return this.buildingType},e.prototype.getComplexity=function(){return 0},e.prototype.getCost=function(){return new Map},e.prototype.getName=function(){return 1===this.sharks?"Shark":"Sharks"},e.prototype.getLine=function(e){switch(e){case km.FIRST:return xm.textValue("sharks: "+this.sharks);case km.SECOND:case km.THIRD:case km.FOURTH:return xm.emptyValue()}},e.prototype.getSize=function(){return 0},e.prototype.buildOnMountain=function(){return!1},e.prototype.tick=function(){1===Mu.randomBetween(1,ts.SEA.SHARKS.FEED_CHANCE)&&(this.seaService.reduceFish(this.sharks)||(this.sharks-=ts.SEA.SHARKS.FEED_AMOUNT)),this.seaService.getFishAmount()>this.sharks*ts.SEA.SHARKS.BREED_THRESHOLD&&1===Mu.randomBetween(1,ts.SEA.SHARKS.BREED_CHANCE)&&(this.sharks+=Math.floor(this.getPower())),this.seaService.getFishAmount()<this.sharks*ts.SEA.SHARKS.DIE_THRESHOLD&&1===Mu.randomBetween(1,ts.SEA.SHARKS.DIE_CHANCE)&&(this.sharks-=1)},e.prototype.build=function(){return this},e.prototype.getBuildingId=function(){return this.id},e.prototype.toJSON=function(){return{id:this.id,buildingType:this.buildingType,sharks:this.sharks}},e.prototype.prepareDemolish=function(){return this.stopProduction(),!1},e.prototype.finishDemolish=function(){},e.prototype.startProduction=function(){return!1},e.prototype.stopProduction=function(){},e.prototype.isStoppable=function(){return!1},e.prototype.isWorking=function(){return!0},e.prototype.isDemolishable=function(){return!1},e.prototype.getDescription=function(){return"Sea predators"},e.prototype.fireWorker=function(){return!1},e.prototype.hireWorker=function(){return!1},e.prototype.getWorkers=function(){return 0},e.prototype.getSharks=function(){return this.sharks},e.prototype.reduceSharks=function(e){return this.sharks>=e&&(this.sharks-=e,!0)},e.prototype.getEffects=function(){return 0},e.prototype.getPermanentEffects=function(){return 0},e.prototype.getDetails=function(){return""},e.prototype.hasDetails=function(){return!1},e.prototype.getPower=function(){return 1+this.effectsService.getNatureEffectsValue()/100},e.prototype.isCombinable=function(){return!1},e.prototype.isSplittable=function(){return!1},e.prototype.getHappinessEffect=function(){return 0},e.prototype.getWeatherMultiplier=function(){return 0},e.prototype.getDisplayableEffectsValue=function(){return 0},e.prototype.hasBuff=function(){return!1},e.prototype.isBuffed=function(){return!1},e.prototype.getBuff=function(){return null},e.prototype.isComplexManagement=function(){return!1},e.prototype.getWorkSettings=function(){return null},e.prototype.hasUpgrade=function(){return!1},e.prototype.getUpgradeCost=function(){return new Map},e.prototype.setBuildingLevel=function(e){},e.prototype.getBuildingLevel=function(){return 0},e}();!function(e){e.MINING="mining {res}",e.WAITING_FOR_SELECTION="waiting for ore selection",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.NO_MORE_RESOURCES="no more {res}",e.TRANSPORTING="transporting {res}"}(Ry||(Ry={}));var Fy,Uy=function(e){function n(n,t,r,l,i,o,u,s,a){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===r&&(r=0),void 0===l&&(l=Ry.WAITING_FOR_SELECTION),void 0===i&&(i=!1),void 0===o&&(o=0),void 0===u&&(u=200),void 0===s&&(s=vu.NOTHING),void 0===a&&(a=1);var c=e.call(this,t,bu.PIT_MINE,n,ts.MOUNTAINS.PIT_MINE,i,!0,!0,a)||this;return c.progress=r,c.status=l,c.storage=o,c.resources=u,c.ore=s,c.servicesService&&(c.modalService=n.getService(Nu.MODAL),c.landService=n.getService(Nu.LAND)),c}return l(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,working:this.working,storage:this.storage,resources:this.resources,ore:this.ore}},n.prototype.callback=function(e){var n=this;if(this.ore===vu.NOTHING)if(this.landService.hasOre(vu[String(e.target.value).replace(" ","_")],20)){this.modalService.open(mu.CONFIRM),this.modalService.setModalText("Are you sure you want to mine "+Au.prepareResourceName(vu[String(e.target.value).replace(" ","_")])+" in this mine?");var t=this.modalService.registerForConfirmation().subscribe(function(r){r?(n.landService.decreaseOre(vu[String(e.target.value).replace(" ","_")],20),n.ore=vu[String(e.target.value).replace(" ","_")],n.status=Ry.MINING,n.progress=0):e.target.selectedIndex=n.ore,t.unsubscribe()})}else this.modalService.info("Not enough "+Au.prepareResourceName(vu[String(e.target.value).replace(" ","_")])+" deposits available<br>20 "+Au.prepareResourceName(vu[String(e.target.value).replace(" ","_")])+" deposits required to start mining."),e.target.selectedIndex=this.ore},n.prototype.build=function(){return this.startProduction(),this},n.prototype.buildOnMountain=function(){return!0},n.prototype.getLine=function(e){switch(e){case km.FIRST:return this.ore!==vu.NOTHING?xm.textValue(Au.prepareResourceName(this.ore).toLowerCase()+": "+this.resources):xm.emptyValue();case km.SECOND:return xm.textValue(this.status.replace("{res}",Au.prepareResourceName(this.ore).toLowerCase()));case km.THIRD:return xm.progressValue(this.progress);case km.FOURTH:if(this.ore===vu.NOTHING){var n=[];return n.push(vu[vu.NOTHING].replace("_"," ")),n.push(vu[vu.COAL].replace("_"," ")),n.push(vu[vu.GOLD_ORE].replace("_"," ")),n.push(vu[vu.SILVER_ORE].replace("_"," ")),n.push(vu[vu.COPPER_ORE].replace("_"," ")),n.push(vu[vu.TIN_ORE].replace("_"," ")),n.push(vu[vu.IRON_ORE].replace("_"," ")),xm.dropdownValue(n,vu[this.ore])}return xm.emptyValue()}},n.prototype.isStoppable=function(){return this.resources>0},n.prototype.tick=function(e){if(this.ore!==vu.NOTHING){if(this.resources<=0&&(this.status=Ry.NO_MORE_RESOURCES,this.stopProduction()),!this.working)return;this.storage>0?this.resourcesService.increaseResource(this.ore,this.storage)?(this.storage=0,this.status=Ry.MINING):this.status=Ry.WAITING_FOR_WAREHOUSE_SPACE:this.progress<100?(this.status=Ry.MINING,this.progress+=this.getPower(),this.progress>100&&(this.progress=100)):100===this.progress&&(this.progress=0,this.resources-=1,this.storage=1,this.status=Ry.TRANSPORTING)}},n}(Um),Hy=function(e){return e[e.NONE=0]="NONE",e[e.COW=1]="COW",e[e.CHICKEN=2]="CHICKEN",e[e.PIG=3]="PIG",e[e.HORSE=4]="HORSE",e}({}),Gy=function(e){function n(n,t,r,l,i,o,u,s,a,c,p,h){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===r&&(r=ts.FIELD.PASTURE.SIZE),void 0===l&&(l=Hy.NONE),void 0===i&&(i=0),void 0===o&&(o=0),void 0===u&&(u=!0),void 0===s&&(s=0),void 0===a&&(a=0),void 0===c&&(c=0),void 0===p&&(p=!1),void 0===h&&(h=1);var d=e.call(this,t,bu.PASTURE,n,ts.FIELD.PASTURE,u,!0,!0,h)||this;return d.currentSize=r,d.animal=l,d.progress=i,d.produceProgress=o,d.animals=s,d.food=a,d.chores=c,d.autoButcher=p,d.servicesService&&(d.modalService=n.getService(Nu.MODAL),d.weatherService=n.getService(Nu.WEATHER),d.calendarService=n.getService(Nu.CALENDAR),d.fieldService=n.getService(Nu.FIELD)),d}return l(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,size:this.currentSize,animal:this.animal,progress:this.progress,produceProgress:this.produceProgress,working:this.working,animals:this.animals,food:this.food,chores:this.chores,autoButcher:this.autoButcher}},n.prototype.build=function(){return this.resourcesService.getResource(vu.CHICKEN).isVisible()||(this.resourcesService.makeVisible(vu.CHICKEN),this.logService.log("New resource discovered: "+Au.prepareResourceName(vu.CHICKEN)),this.resourcesService.makeVisible(vu.COW),this.logService.log("New resource discovered: "+Au.prepareResourceName(vu.COW)),this.resourcesService.makeVisible(vu.PIG),this.logService.log("New resource discovered: "+Au.prepareResourceName(vu.PIG)),this.resourcesService.makeVisible(vu.HORSE),this.logService.log("New resource discovered: "+Au.prepareResourceName(vu.HORSE))),this.resourcesService.updateAnimals(),e.prototype.build.call(this)},n.prototype.getSize=function(){return this.currentSize},n.prototype.getComplexity=function(){return e.prototype.getComplexity.call(this)*(this.getSize()/this.settings.SIZE)},n.prototype.findButcher=function(){return this.fieldService.getBuildings().filter(function(e){return e.getBuildingType()===bu.BUTCHER}).map(function(e){return e}).sort(function(e,n){return e.getAnimalsNumber()-n.getAnimalsNumber()})[0]},n.prototype.butcher=function(e){void 0===e&&(e=!0);var n=this.findButcher();n?n.addAnimalToButcher(this.getResourceType())&&this.decreaseAnimal(1):e||this.modalService.info("No butcher available or their work queue is full")},n.prototype.callback=function(e){var n=this;if("butcher"===e&&this.animals>0)this.butcher(!1);else if("x"===e)this.autoButcher=!this.autoButcher;else if(this.animal===Hy.NONE||0===this.animals)this.animal=Hy[String(e.target.value)],this.progress=0,this.resourcesService.increaseResourceLimit(this.getResourceType(),this.getMaxAnimals());else{this.modalService.open(mu.CONFIRM),this.modalService.setModalText("Are you sure you want to change animals?<br>All current animals will be moved to other pastures and if there is no enough space they will be lost");var t=this.modalService.registerForConfirmation().subscribe(function(r){r?(n.resourcesService.decreaseResourceLimit(n.getResourceType(),n.getMaxAnimals()),n.animal=Hy[String(e.target.value)],n.progress=0,n.moveAnimals(n.animals),n.animals=0,n.animal!==Hy.NONE&&n.resourcesService.increaseResourceLimit(n.getResourceType(),n.getMaxAnimals())):e.target.selectedIndex=n.animal-1,t.unsubscribe()})}},n.prototype.finishDemolish=function(){},n.prototype.prepareDemolish=function(){return this.stopProduction(),this.animal!==Hy.NONE&&(this.moveAnimals(this.animals),this.resourcesService.decreaseResourceLimit(this.getResourceType(),this.getMaxAnimals())),!0},n.prototype.getLine=function(e){switch(e){case km.FIRST:return this.animal!==Hy.NONE?xm.textValue(Hy[this.animal].toLowerCase()+": "+this.animals+"/"+this.getMaxAnimals()):xm.emptyValue();case km.SECOND:if(this.animals>0&&this.food<0)return xm.progressValue(Math.abs(this.food),"famine");var n=[];return n.push(Hy[Hy.NONE]),n.push(Hy[Hy.CHICKEN]),n.push(Hy[Hy.COW]),n.push(Hy[Hy.PIG]),n.push(Hy[Hy.HORSE]),xm.dropdownValue(n,Hy[this.animal]);case km.THIRD:return this.animals>0&&this.findButcher()?xm.buttonCheckboxValue("butcher","butcher","auto butcher",this.autoButcher,"x"):xm.emptyValue();case km.FOURTH:return xm.emptyValue()}},n.prototype.getName=function(){return this.animal===Hy.NONE?"Pasture":Hy[this.animal].charAt(0).toUpperCase()+Hy[this.animal].slice(1).toLowerCase()+" pasture"},n.prototype.startProduction=function(){return this.working=!0,!0},n.prototype.stopProduction=function(){this.working=!1},n.prototype.tick=function(e){if(this.food<0&&this.calendarService.getSeason()!==Rg.WINTER&&(this.food=0),this.autoButcher&&this.animals>0&&this.animals===this.getMaxAnimals()&&this.butcher(),this.chores+=.05*this.animals,this.chores>100&&(this.chores=100),this.animals>0&&this.calendarService.getSeason()===Rg.WINTER?(this.food-=65e-5*this.getAnimalSettings().SIZE*this.animals,this.food<=-100&&(this.food=0,this.decreaseAnimal(1))):this.food<0&&(this.food=0),this.food>=0&&this.animals>1&&this.chores<50&&this.animals<this.getMaxAnimals()&&(this.progress<100?this.progress+=.1/(10/this.getAnimalSettings().REPRODUCTION_SPEED)*this.animals*(1+this.effectsService.getNatureEffectsValue()/100):(this.progress=0,this.increaseAnimal(1))),(this.animal===Hy.CHICKEN||this.animal===Hy.COW)&&(0===this.animals&&(this.produceProgress=0),this.produceProgress<100&&this.chores<50&&(this.produceProgress+=.1*this.animals*(1+this.effectsService.getNatureEffectsValue()/100),this.produceProgress>=100)))if(this.produceProgress=0,this.animal===Hy.CHICKEN){if(this.servicesService.getService(Nu.ROYAL).layGoldenEgg())return;this.resourcesService.increaseResource(vu.EGG,1)}else this.animal===Hy.COW&&this.resourcesService.increaseResource(vu.MILK,1)},n.prototype.work=function(e){return this.food<100&&0===this.resourcesService.hasResource(vu.HAY,1,this.getName())?(this.resourcesService.decreaseResource(vu.HAY,1,this.getName())&&(this.food+=25),!0):this.chores>=1&&(this.chores-=1,!0)},n.prototype.fireWorker=function(){return!1},n.prototype.hireWorker=function(){return!1},n.prototype.getWorkers=function(){return 0},n.prototype.hasWork=function(){return!!this.isWorking()&&(this.food<50&&0===this.resourcesService.hasResource(vu.HAY,1,this.getName())||this.chores>=1)},n.prototype.getDetails=function(){return this.animal!==Hy.NONE?"size: "+Au.round(this.getSize(),0)+"<br>progress: "+Au.round(this.progress,2)+"%<br>produce progress: "+Au.round(this.produceProgress,2)+"%<br>food: "+Au.round(this.food,2)+"<br>chores: "+Au.round(this.chores,2)+"<br>"+e.prototype.getDetails.call(this):e.prototype.getDetails.call(this)},n.prototype.getHappinessEffect=function(){return 0},n.prototype.isCombinable=function(){return!0},n.prototype.isSplittable=function(){return!0},n.prototype.moveAnimals=function(e){for(var n=this,t=0,r=this.fieldService.getBuildings().filter(function(e){return e.getBuildingType()===bu.PASTURE&&e!==n&&e.getAnimals()<e.getMaxAnimals()}).map(function(e){return e}).filter(function(e){return e.getResourceType()===n.getResourceType()});t<r.length;t++){for(var l=r[t];e>0&&l.getAnimals()<l.getMaxAnimals();)l.increaseAnimal(1),e-=1,this.decreaseAnimal(1);if(0===e)return}},n.prototype.getResourceType=function(){return this.animal!==Hy.NONE?vu[Hy[this.animal]]:vu.NOTHING},n.prototype.getAnimals=function(){return this.animals},n.prototype.getAnimalSettings=function(){return rs.getResource(this.getResourceType())},n.prototype.getMaxAnimals=function(){return this.getResourceType()!==vu.NOTHING?Math.floor(this.currentSize/this.getAnimalSettings().SIZE):0},n.prototype.increaseAnimal=function(e){this.animals+=e,this.resourcesService.updateAnimals()},n.prototype.decreaseAnimal=function(e){this.animals-=e,this.resourcesService.updateAnimals()},n.prototype.combine=function(e,n){var t=this;if(this.getBuildingType()===e.getBuildingType()){this.modalService.open(mu.CONFIRM),this.modalService.setModalText(" Are you sure you want to combine "+this.getName()+" of size "+this.getSize()+" with "+e.getName()+" of size "+e.getSize()+"?<br>Resulting "+this.getName()+" of size "+(this.getSize()+e.getSize())+" will keep animals");var r=this.modalService.registerForConfirmation().subscribe(function(l){r.unsubscribe(),l?(t.currentSize+=e.getSize(),e.animal===t.animal?t.increaseAnimal(e.getAnimals()):e.moveAnimals(e.getAnimals()),e.animals=0,n.finaliseCombine(!0)):n.finaliseCombine(!1)})}},n.prototype.split=function(e){var t=this;this.modalService.open(mu.INPUT),this.modalService.setModalText("Set new pasture size (1-"+(this.getSize()-1)+")");var r=this.modalService.registerForValueResponse().subscribe(function(l){if(r.unsubscribe(),!isNaN(l)&&0!==l)if(l>=1&&l<t.getSize()){t.currentSize-=Number(l);var i=new n(t.servicesService,t.servicesService.getService(Nu.ID).getNextId(),Number(l)).build();e.finaliseSplit(i),i.animal=t.animal,t.animals>t.getMaxAnimals()&&(t.moveAnimals(t.animals-t.getMaxAnimals()),t.animals>t.getMaxAnimals()&&t.decreaseAnimal(t.animals-t.getMaxAnimals()))}else t.modalService.info("Invalid size value!")})},n}(Um);!function(e){e.BUTCHERING="butchering {animal}",e.WAITING_FOR_ANIMALS="waiting for animals",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.TRANSPORTING="transporting meat"}(Fy||(Fy={}));var By=function(e){function n(n,t,r,l,i,o,u,s){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===r&&(r=Fy.WAITING_FOR_ANIMALS),void 0===l&&(l=0),void 0===i&&(i=!0),void 0===o&&(o=0),void 0===u&&(u=[]),void 0===s&&(s=1);var a=e.call(this,t,bu.BUTCHER,n,ts.FIELD.BUTCHER,i,!0,!0,s)||this;return a.status=r,a.progress=l,a.outputStorage=o,a.animals=u,a}return l(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,status:this.status,progress:this.progress,working:this.working,outputStorage:this.outputStorage,animals:this.animals}},n.prototype.getLine=function(e){switch(e){case km.FIRST:return xm.textValue(this.animals.length>0?this.status.replace("{animal}",Au.prepareResourceName(this.animals[0])):this.status);case km.SECOND:return xm.progressValue(this.progress);case km.THIRD:return xm.textValue("queue: "+this.animals.length+"/10");case km.FOURTH:return xm.emptyValue()}},n.prototype.getAnimalsNumber=function(){return this.animals.length},n.prototype.addAnimalToButcher=function(e){return this.animals.length<10&&(this.animals.push(e),!0)},n.prototype.tick=function(e){if(this.working)if(this.animals.length>0&&0===this.outputStorage)this.status=Fy.BUTCHERING,this.progress<100?(this.progress+=this.getPower()/rs.getResource(this.animals[0]).BUTCHERING_DIFFICULTY,this.progress>100&&(this.progress=100)):(this.status=Fy.TRANSPORTING,this.progress=0,this.outputStorage=rs.getResource(this.animals.shift()).MEAT,this.resourcesService.increaseResource(vu.MEAT,this.outputStorage)||(this.status=Fy.WAITING_FOR_WAREHOUSE_SPACE));else if(0!==this.outputStorage){var n=this.resourcesService.getResource(vu.MEAT).getFreeSpace();n>=this.outputStorage?this.resourcesService.increaseResource(vu.MEAT,this.outputStorage)&&(this.outputStorage=0,this.status=Fy.WAITING_FOR_ANIMALS):this.resourcesService.increaseResource(vu.MEAT,n)&&(this.outputStorage-=n)}else 0===this.animals.length&&(this.status=Fy.WAITING_FOR_ANIMALS)},n}(Um),Vy=function(e){function n(n,t,r,l,i,o,u,s,a){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===r&&(r=0),void 0===l&&(l=Ym.FETCHING_INPUT),void 0===i&&(i=[]),void 0===o&&(o=[]),void 0===u&&(u=!1),void 0===s&&(s=null),void 0===a&&(a=1),e.call(this,n,t,bu.MINT,ts.MOUNTAINS.MINT,l,r,i,o,u,s,a)||this}return l(n,e),n}($m),Wy=function(e){return e[e.CONSTRUCTION=0]="CONSTRUCTION",e[e.BUILT=1]="BUILT",e[e.ABDICATED=2]="ABDICATED",e[e.USED=3]="USED",e}({}),jy=function(e){function n(n,t,r,l,i,o,u,s,a,c){var p=e.call(this,n,t,r,l,c>0,!1,!0,1)||this;return p.progress=i,p.maxProgress=o,p.stage=u,p.state=s,p.year=a,p.workers=c,p.maxWorkers=5,p.prepareIcons(),p}return l(n,e),n.prototype.toJSON=function(){return{id:this.id,buildingType:this.buildingType,progress:this.progress,maxProgress:this.maxProgress,stage:this.stage,state:this.state,year:this.year,workers:this.workers}},n.prototype.prepareIcons=function(){var e=this;this.iconsValue=[],this.settings.STAGES[this.stage]&&this.settings.STAGES[this.stage].cost.forEach(function(n){return e.iconsValue.push({name:vu[n.resource],path:"resources",prefix:n.amount,suffix:""})})},n.prototype.callback=function(e){var n=this;if("add"===e){var t=this.settings.STAGES[this.stage],r=new Map;t.cost.forEach(function(e){return r.set(e.resource,e.amount)}),this.resourcesService.decreaseResources(r,this.getName(),!0)&&(this.stage+=1,this.maxProgress+=t.progress,this.prepareIcons())}else if("abdicate"===e){this.modalService.open(mu.CONFIRM),this.modalService.setModalText("Are you sure you want to soft reset your progress? <br>You will start from the beginning and all progress except for</br>royal points, permanent royal upgrades and Wonders will be deleted.");var l=this.modalService.registerForConfirmation().subscribe(function(e){l.unsubscribe(),e&&(n.state=Wy.ABDICATED,n.servicesService.getService(Nu.GAME).incrementAbdicationLevel(),n.servicesService.getService(Nu.SERIALIZER).softReset())})}else"hire"===e?this.hireWorker():"fire"===e&&this.fireWorker()},n.prototype.getName=function(){return this.progress>=100?e.prototype.getName.call(this):e.prototype.getName.call(this)+" construction"},n.prototype.getLine=function(e){switch(e){case km.FIRST:return this.state===Wy.CONSTRUCTION?xm.progressValue(this.progress,Au.round(this.progress,2)+"% / "+this.maxProgress+"%"):xm.textValue("built in year "+this.year);case km.SECOND:return this.state===Wy.CONSTRUCTION?xm.iconValue(this.iconsValue):this.state===Wy.BUILT?xm.buttonValue(this.getAbdicationText(),"abdicate"):xm.emptyValue();case km.THIRD:return this.maxProgress<100?xm.buttonValue("add materials","add"):xm.emptyValue();case km.FOURTH:return this.state===Wy.CONSTRUCTION?xm.twoButtonValue("hire worker","hire",this.workers+"/"+this.maxWorkers,"fire worker","fire"):xm.emptyValue()}},n.prototype.getAbdicationText=function(){return"abdicate"},n.prototype.tick=function(e){this.isWorking()&&(this.progress>=100&&(this.stopProduction(),this.addPermanentEffect(),this.progress=100,this.state=Wy.BUILT,this.year=this.servicesService.getService(Nu.CALENDAR).getYear(),this.getBuildingType()===bu.ASCENSION_TEMPLE&&this.servicesService.getService(Nu.LOG).mystical("As you enter the temple you have strange feeling of many eyes watching you, <br>however there is nobody there. At the end of a big hall you find a golden altar.<br>This is it, your whole life lead you here. You feel safe.")),this.progress<this.maxProgress&&(this.progress+=.001*this.getPower()*this.workers))},n.prototype.getEffects=function(){return this.state!==Wy.CONSTRUCTION?this.effectsService.getBuildingEffectsValue(bu.CONSTRUCTION,!1):e.prototype.getEffects.call(this)},n.prototype.getPermanentEffects=function(){return this.state!==Wy.CONSTRUCTION?this.effectsService.getBuildingEffectsValue(bu.CONSTRUCTION,!0):e.prototype.getPermanentEffects.call(this)},n.prototype.getHappinessEffect=function(){return this.state!==Wy.CONSTRUCTION?0:e.prototype.getHappinessEffect.call(this)},n.prototype.isStoppable=function(){return this.state===Wy.CONSTRUCTION},n.prototype.isFinished=function(){return this.state!==Wy.CONSTRUCTION},n.prototype.fireWorker=function(){return this.workers>0&&(this.resourcesService.fireWorker(1),this.workers-=1,!0)},n.prototype.hireWorker=function(){return!!(this.workers<this.maxWorkers&&this.resourcesService.hireWorker())&&(this.workers+=1,!0)},n.prototype.getWorkers=function(){return this.workers},n.prototype.isWorking=function(){return this.workers>0},n.prototype.startProduction=function(){if(0===this.workers){for(;this.workers<this.maxWorkers&&this.resourcesService.hireWorker();)this.workers+=1;if(this.workers>0)return!0}return!1},n.prototype.stopProduction=function(){this.workers>0&&(this.resourcesService.fireWorker(this.workers),this.workers=0)},n.prototype.addPermanentEffect=function(){this.addBuildingEffects(),this.addArmyEffects()},n.prototype.addBuildingEffects=function(){var e=this;if(this.settings.BUILDING_EFFECTS&&this.settings.BUILDING_EFFECTS.length>0){var n=this.servicesService.getService(Nu.EFFECTS);this.settings.BUILDING_EFFECTS.forEach(function(t){n.addBuildingEffect(new Du(e.getName(),t.building,Number(t.value),Hu.WONDER))})}},n.prototype.addArmyEffects=function(){var e=this;if(this.settings.ARMY_EFFECTS&&this.settings.ARMY_EFFECTS.length>0){var n=this.servicesService.getService(Nu.EFFECTS);this.settings.ARMY_EFFECTS.forEach(function(t){n.addArmyEffect(new Lu(e.getName(),t.troop,Number(t.value),Hu.WONDER))})}},n.prototype.verifyWonderEffects=function(){this.isFinished()&&(this.settings.BUILDING_EFFECTS&&this.settings.BUILDING_EFFECTS.length>0&&(this.servicesService.getService(Nu.EFFECTS).hasWonderEffects(this.getName())||this.addBuildingEffects()),this.settings.ARMY_EFFECTS&&this.settings.ARMY_EFFECTS.length>0&&(this.servicesService.getService(Nu.EFFECTS).hasWonderEffects(this.getName())||this.addArmyEffects()))},n}(Um),Yy=function(e){function n(n,t,r,l,i,o,u,s){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===r&&(r=0),void 0===l&&(l=0),void 0===i&&(i=0),void 0===o&&(o=Wy.CONSTRUCTION),void 0===u&&(u=-1),void 0===s&&(s=0),e.call(this,t,bu.STONEHENGE,n,ts.PLATEAU.STONEHENGE,r,l,i,o,u,s)||this}return l(n,e),n.prototype.tick=function(n){if(e.prototype.tick.call(this,n),this.state===Wy.ABDICATED){this.state=Wy.USED,this.servicesService.getService(Nu.GAME).enable(Eu.PLATEAU),this.servicesService.getService(Nu.ROYAL).increaseRoyalPoints(this.settings.RP),this.logService.log("Your abdication granted you "+this.settings.RP+" royal points");var t=this.servicesService.getService(Nu.KONGREGATE);t.isAvailable()&&t.submitStat("Stonehenge",!0)}},n}(jy),zy=function(e){function n(n,t,r,l){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===r&&(r=0),void 0===l&&(l=1);var i=e.call(this,t,bu.MARKETPLACE,n,ts.VILLAGE.MARKETPLACE,!0,!0,!1,l)||this;return i.progress=r,i.callMerchantPrice=[{name:"coins",path:"resources",prefix:"",suffix:"25"}],i}return l(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress}},n.prototype.build=function(){return this.servicesService.getService(Nu.GAME).enable(Eu.MARKET),e.prototype.build.call(this)},n.prototype.callback=function(e){"bribe"===e&&(this.resourcesService.decreaseResource(vu.COINS,25,this.getName(),!0)?1===Mu.randomBetween(1,2)&&(this.progress+=50,this.progress>=100&&(this.progress=0,this.servicesService.getService(Nu.MARKET).callMerchant())):this.modalService.info("Not enough coins for a bribe"))},n.prototype.getLine=function(e){switch(e){case km.FIRST:return xm.progressValue(this.progress,"merchant arrival");case km.SECOND:return xm.emptyValue();case km.THIRD:return xm.iconValue(this.callMerchantPrice);case km.FOURTH:return xm.buttonValue("bribe merchant (50% chance)","bribe")}},n.prototype.tick=function(e){1===Mu.randomBetween(1,10)&&(this.progress+=this.getPower()),this.progress>=100&&(this.servicesService.getService(Nu.MARKET).callMerchant(),this.progress=0)},n}(Um),Ky=function(e){function n(n,t,r){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===r&&(r=1);var l=e.call(this,t,bu.SMITHY,n,ts.MOUNTAINS.SMITHY,!1,!0,!1,r)||this;return n&&(l.gameService=n.getService(Nu.GAME)),l}return l(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType}},n.prototype.build=function(){var e=this;return this.settings.RECIPES.forEach(function(n){e.gameService.isEnabled(n.prerequisite)&&e.servicesService.getService(Nu.RECIPE).enable(n.recipe)}),this.gameService.enable(Eu.BUILT_SMITHY),this},n.prototype.prepareDemolish=function(){var e=this;return this.settings.RECIPES.forEach(function(n){return e.servicesService.getService(Nu.RECIPE).disable(n.recipe)}),this.gameService.disable(Eu.BUILT_SMITHY),this.servicesService.getService(Nu.CRAFTING).filterQueue(this.settings.RECIPES),this.servicesService.getService(Nu.VILLAGE).buildings.filter(function(e){return e.getBuildingType()===bu.WORKSHOP}).map(function(e){return e}).forEach(function(n){n.getRecipe()&&e.settings.RECIPES.includes(n.getRecipe().id)&&n.cancelCrafting()}),!0},n}(Um),qy=function(e){function n(n,t,r,l,i){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===r&&(r=!1),void 0===l&&(l=0),void 0===i&&(i=1);var o=e.call(this,t,bu.CHURCH,n,ts.VILLAGE.CHURCH,r,!0,!0,i)||this;return o.progress=l,o.servicesService&&(o.religionService=n.getService(Nu.RELIGION)),o}return l(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType,working:this.working,progress:this.progress}},n.prototype.build=function(){return this.religionService.increaseFaithCap(50),this.servicesService.getService(Nu.GAME).enable(Eu.RELIGION),this},n.prototype.getLine=function(e){switch(e){case km.FIRST:case km.SECOND:return xm.emptyValue();case km.THIRD:return xm.progressValue(this.progress,"prayers");case km.FOURTH:return xm.emptyValue()}},n.prototype.prepareDemolish=function(){return this.religionService.decreaseFaithCap(50),!0},n.prototype.tick=function(e){if(this.working){var n=this.servicesService.getService(Nu.VILLAGE).getPopulation();this.progress+=.1*n*this.getPower(),this.progress>100&&(this.progress=0,this.religionService.increaseFaith(1))}},n}(Um),$y=function(e){function n(n,t,r,l,i,o,u,s){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===r&&(r=0),void 0===l&&(l=0),void 0===i&&(i=0),void 0===o&&(o=Wy.CONSTRUCTION),void 0===u&&(u=-1),void 0===s&&(s=0),e.call(this,t,bu.PYRAMID,n,ts.PLATEAU.PYRAMID,r,l,i,o,u,s)||this}return l(n,e),n.prototype.tick=function(n){if(e.prototype.tick.call(this,n),this.state===Wy.ABDICATED){this.state=Wy.USED,this.servicesService.getService(Nu.GAME).enable(Eu.PLATEAU),this.servicesService.getService(Nu.ROYAL).increaseRoyalPoints(this.settings.RP),this.logService.log("Your abdication granted you "+this.settings.RP+" royal points");var t=this.servicesService.getService(Nu.KONGREGATE);t.isAvailable()&&t.submitStat("Pyramid",!0)}},n}(jy),Qy=function(e){function n(n,t,r,l,i,o,u,s){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===r&&(r=0),void 0===l&&(l=0),void 0===i&&(i=0),void 0===o&&(o=Wy.CONSTRUCTION),void 0===u&&(u=-1),void 0===s&&(s=0),e.call(this,t,bu.HANGING_GARDEN,n,ts.PLATEAU.HANGING_GARDEN,r,l,i,o,u,s)||this}return l(n,e),n.prototype.tick=function(n){if(e.prototype.tick.call(this,n),this.state===Wy.ABDICATED){this.state=Wy.USED,this.servicesService.getService(Nu.GAME).enable(Eu.PLATEAU),this.servicesService.getService(Nu.ROYAL).increaseRoyalPoints(this.settings.RP),this.logService.log("Your abdication granted you "+this.settings.RP+" royal points");var t=this.servicesService.getService(Nu.KONGREGATE);t.isAvailable()&&t.submitStat("Hanging Garden",!0)}},n}(jy),Zy=function(e){function n(n,t,r,l,i,o,u,s){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===r&&(r=0),void 0===l&&(l=0),void 0===i&&(i=0),void 0===o&&(o=Wy.CONSTRUCTION),void 0===u&&(u=-1),void 0===s&&(s=0),e.call(this,t,bu.COLOSSUS,n,ts.PLATEAU.COLOSSUS,r,l,i,o,u,s)||this}return l(n,e),n.prototype.tick=function(n){if(e.prototype.tick.call(this,n),this.state===Wy.ABDICATED){this.state=Wy.USED,this.servicesService.getService(Nu.GAME).enable(Eu.PLATEAU),this.servicesService.getService(Nu.ROYAL).increaseRoyalPoints(this.settings.RP),this.logService.log("Your abdication granted you "+this.settings.RP+" royal points");var t=this.servicesService.getService(Nu.KONGREGATE);t.isAvailable()&&t.submitStat("Colossus",!0)}},n}(jy),Xy=function(e){function n(n,t,r,l,i,o,u,s){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===r&&(r=0),void 0===l&&(l=0),void 0===i&&(i=0),void 0===o&&(o=Wy.CONSTRUCTION),void 0===u&&(u=-1),void 0===s&&(s=0),e.call(this,t,bu.ASCENSION_TEMPLE,n,ts.PLATEAU.ASCENSION_TEMPLE,r,l,i,o,u,s)||this}return l(n,e),n.prototype.callback=function(n){var t=this;if("abdicate"===n){this.modalService.open(mu.CONFIRM),this.modalService.setModalText("Are you sure you want to ascend? <br>You will start from the beginning and all progress except for</br>royal points and permanent royal upgrades will be deleted.");var r=this.modalService.registerForConfirmation().subscribe(function(e){if(r.unsubscribe(),e){t.state=Wy.ABDICATED,t.servicesService.getService(Nu.ROYAL).increaseRoyalPoints(t.settings.RP),t.logService.mystical("Your ascension granted you "+t.settings.RP+" royal points");var n=t.servicesService.getService(Nu.KONGREGATE);n.isAvailable()&&n.submitStat("Ascension Temple",!0),t.servicesService.getService(Nu.SERIALIZER).ascensionReset()}})}else e.prototype.callback.call(this,n)},n.prototype.getAbdicationText=function(){return"ascend"},n}(jy),Jy=function(e){function n(n,t,r,l,i,o,u,s){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===r&&(r=0),void 0===l&&(l=0),void 0===i&&(i=0),void 0===o&&(o=Wy.CONSTRUCTION),void 0===u&&(u=-1),void 0===s&&(s=0),e.call(this,t,bu.UNDERGROUND_CITY,n,ts.PLATEAU.UNDERGROUND_CITY,r,l,i,o,u,s)||this}return l(n,e),n.prototype.tick=function(n){if(e.prototype.tick.call(this,n),this.state===Wy.ABDICATED){this.state=Wy.USED,this.servicesService.getService(Nu.GAME).enable(Eu.PLATEAU),this.servicesService.getService(Nu.ROYAL).increaseRoyalPoints(this.settings.RP),this.logService.log("Your abdication granted you "+this.settings.RP+" royal points");var t=this.servicesService.getService(Nu.KONGREGATE);t.isAvailable()&&t.submitStat("Underground City",!0)}},n}(jy),eS=function(e){function n(n,t,r,l,i,o,u,s){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===r&&(r=0),void 0===l&&(l=0),void 0===i&&(i=0),void 0===o&&(o=Wy.CONSTRUCTION),void 0===u&&(u=-1),void 0===s&&(s=0),e.call(this,t,bu.GREAT_LIGHTHOUSE,n,ts.PLATEAU.GREAT_LIGHTHOUSE,r,l,i,o,u,s)||this}return l(n,e),n.prototype.tick=function(n){if(e.prototype.tick.call(this,n),this.state===Wy.ABDICATED){this.state=Wy.USED,this.servicesService.getService(Nu.GAME).enable(Eu.PLATEAU),this.servicesService.getService(Nu.ROYAL).increaseRoyalPoints(this.settings.RP),this.logService.log("Your abdication granted you "+this.settings.RP+" royal points");var t=this.servicesService.getService(Nu.KONGREGATE);t.isAvailable()&&t.submitStat("Great Lighthouse",!0)}},n}(jy),nS=function(e){function n(n,t,r,l,i,o,u,s){return void 0===n&&(n=null),void 0===t&&(t=-1),void 0===r&&(r=0),void 0===l&&(l=0),void 0===i&&(i=0),void 0===o&&(o=Wy.CONSTRUCTION),void 0===u&&(u=-1),void 0===s&&(s=0),e.call(this,t,bu.SACRED_GROVE,n,ts.PLATEAU.SACRED_GROVE,r,l,i,o,u,s)||this}return l(n,e),n.prototype.tick=function(n){if(e.prototype.tick.call(this,n),this.state===Wy.ABDICATED){this.state=Wy.USED,this.servicesService.getService(Nu.GAME).enable(Eu.PLATEAU),this.servicesService.getService(Nu.ROYAL).increaseRoyalPoints(this.settings.RP),this.logService.log("Your abdication granted you "+this.settings.RP+" royal points");var t=this.servicesService.getService(Nu.KONGREGATE);t.isAvailable()&&t.submitStat("Sacred Grove",!0)}},n}(jy),tS=function(e){function n(n,t,r){void 0===n&&(n=null),void 0===t&&(t=-1),void 0===r&&(r=1);var l=e.call(this,t,bu.STASH,n,ts.FORT.STASH,!1,!0,!1,r)||this;return l.servicesService&&(l.armyService=n.getService(Nu.ARMY)),l}return l(n,e),n.prototype.toJSON=function(){return{id:this.id,level:this.level,buildingType:this.buildingType}},n.prototype.build=function(){return this.armyService.increaseStash(ts.FORT.STASH.SIZE),this},n.prototype.prepareDemolish=function(){return this.armyService.decreaseStash(ts.FORT.STASH.SIZE),!0},n.prototype.getLine=function(e){switch(e){case km.FIRST:return xm.textValue("stash size: "+ts.FORT.STASH.SIZE);case km.SECOND:case km.THIRD:case km.FOURTH:return xm.emptyValue()}},n}(Um),rS=function(){function e(e){this.servicesService=e,this.nextId=1,e.addService(Nu.ID,this)}return e.prototype.getNextId=function(){var e=this.nextId;return this.nextId+=1,e},e.prototype.load=function(e){this.nextId=e.nextId},e.prototype.reset=function(e,n){e&&(this.nextId=1)},e.prototype.save=function(){return{nextId:this.nextId}},e.ngInjectableDef=ve({factory:function(){return new e(ze(Sg))},token:e,providedIn:"root"}),e}(),lS=function(){function e(e,n){this.servicesService=e,this.idService=n,e.addService(Nu.BUILDING_FACTORY,this)}return e.prototype.loadBuilding=function(e){return e.buildingType===bu.HUT?new Gm(this.servicesService,e.id,e.occupants,e.progress,e.food,e.fuel,e.clothes,e.level):e.buildingType===bu.HOUSE?new Bm(this.servicesService,e.id,e.occupants,e.progress,e.food,e.fuel,e.clothes,e.level):e.buildingType===bu.BAKERY?new Sy(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===bu.TAILOR?new Ay(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===bu.WORKSHOP?new iy(this.servicesService,e.id,e.progress,e.status,e.mode,e.working,e.recipe,e.level,void 0!==e.storage?e.storage:0):e.buildingType===bu.WAREHOUSE?new oy(this.servicesService,e.id,e.resource,e.level):e.buildingType===bu.MARKETPLACE?new zy(this.servicesService,e.id,e.progress,e.level):e.buildingType===bu.TAVERN?new My(this.servicesService,e.id,e.progress,e.beer,e.wine,e.working,e.level):e.buildingType===bu.SHRINE?new cy(this.servicesService,e.id,e.progress,e.level):e.buildingType===bu.CHURCH?new qy(this.servicesService,e.id,e.working,e.progress,e.level):e.buildingType===bu.BARRACKS?new Oy(this.servicesService,e.id,e.barracksSize,e.level):e.buildingType===bu.TRAINING_SQUARE?new Ty(this.servicesService,e.id,e.progress,e.working,e.status,e.level):e.buildingType===bu.STOCKADE?new _y(this.servicesService,e.id,e.health,e.durability,e.progress,e.working,e.level):e.buildingType===bu.WOODEN_TOWER?new Ny(this.servicesService,e.id,e.health,e.durability,e.progress,e.working,e.level):e.buildingType===bu.STONE_TOWER?new Py(this.servicesService,e.id,e.health,e.durability,e.progress,e.working,e.level):e.buildingType===bu.STASH?new tS(this.servicesService,e.id,e.level):e.buildingType===bu.LOGGERS_HUT?new Wm(this.servicesService,e.id,e.progress,e.localStorage,e.status,e.working,e.level):e.buildingType===bu.GATHERER?new ey(this.servicesService,e.id,e.progress,e.status,e.working,e.mode,e.storage,e.level):e.buildingType===bu.HUNTER_LODGE?new ay(this.servicesService,e.id,e.progress,e.status,e.mode,e.working,e.storage,e.storage2,e.animal,e.level):e.buildingType===bu.TANNERY?new Cy(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===bu.FORESTER?new zm(this.servicesService,e.id,e.progress,e.localStorage,e.status,e.effectiveness,e.working,e.level):e.buildingType===bu.SAWMILL?new Qm(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===bu.FARM?new dy(this.servicesService,e.id,e.workers,e.maxWorkers,e.level):e.buildingType===bu.WINDMILL?new yy(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===bu.BUTCHER?new By(this.servicesService,e.id,e.status,e.progress,e.working,e.outputStorage,e.animals,e.level):e.buildingType===bu.COTTON_MILL?new Iy(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===bu.BREWERY?new wy(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===bu.WINERY?new Dy(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===bu.FIELD?new gy(this.servicesService,e.id,e.size,e.crop,e.status,e.progress,e.working,e.growth,e.level):e.buildingType===bu.ORCHARD?new my(this.servicesService,e.id,e.size,e.crop,e.status,e.progress,e.working,e.growth,e.level):e.buildingType===bu.PASTURE?new Gy(this.servicesService,e.id,e.size,e.animal,e.progress,e.produceProgress,e.working,e.animals,e.food,e.chores,e.autoButcher,e.level):e.buildingType===bu.QUARRY?new ty(this.servicesService,e.id,e.progress,e.status,e.working,e.storage,e.resources,e.level):e.buildingType===bu.GEOLOGIST?new ky(this.servicesService,e.id,e.progress,e.working,e.level):e.buildingType===bu.STONEMASON?new Ly(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===bu.MINT?new Vy(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===bu.SMITHY?new Ky(this.servicesService,e.id,e.level):e.buildingType===bu.PIT_MINE?new Uy(this.servicesService,e.id,e.progress,e.status,e.working,e.storage,e.resources,e.ore,e.level):e.buildingType===bu.STONEHENGE?new Yy(this.servicesService,e.id,e.progress,e.maxProgress,e.stage,e.state,e.year,e.workers):e.buildingType===bu.PYRAMID?new $y(this.servicesService,e.id,e.progress,e.maxProgress,e.stage,e.state,e.year,e.workers):e.buildingType===bu.HANGING_GARDEN?new Qy(this.servicesService,e.id,e.progress,e.maxProgress,e.stage,e.state,e.year,e.workers):e.buildingType===bu.COLOSSUS?new Zy(this.servicesService,e.id,e.progress,e.maxProgress,e.stage,e.state,e.year,e.workers):e.buildingType===bu.UNDERGROUND_CITY?new Jy(this.servicesService,e.id,e.progress,e.maxProgress,e.stage,e.state,e.year,e.workers):e.buildingType===bu.GREAT_LIGHTHOUSE?new eS(this.servicesService,e.id,e.progress,e.maxProgress,e.stage,e.state,e.year,e.workers):e.buildingType===bu.SACRED_GROVE?new nS(this.servicesService,e.id,e.progress,e.maxProgress,e.stage,e.state,e.year,e.workers):e.buildingType===bu.ASCENSION_TEMPLE?new Xy(this.servicesService,e.id,e.progress,e.maxProgress,e.stage,e.state,e.year,e.workers):e.buildingType===bu.FISHERS_HUT?new by(this.servicesService,e.id,e.progress,e.status,e.working,e.level):e.buildingType===bu.SCHOOL_OF_FISH?new py(this.servicesService,e.id,e.fish,void 0!==e.food?e.food:0):e.buildingType===bu.SHARKS?new xy(this.servicesService,e.id,e.sharks):e.buildingType===bu.CONSTRUCTION?new jm(this.servicesService,e.id,e.region,e.constructing,e.buildingComplexity,e.buildingSize,e.upgradeLevel,e.progress,e.working):e.buildingType===bu.DECONSTRUCTION?new Zm(this.servicesService,e.id,e.region,e.deconstructing,e.buildingComplexity,e.buildingSize,e.progress,e.working):void console.error("Couldn't load building of type ["+e.buildingType+"]")},e.prototype.createBuilding=function(e,n){return void 0===n&&(n=this.idService.getNextId()),this.createBuildingShell(e,n).build()},e.prototype.createBuildingShell=function(e,n){switch(void 0===n&&(n=this.idService.getNextId()),e){case bu.HUT:return new Gm(this.servicesService);case bu.HOUSE:return new Bm(this.servicesService,n);case bu.BAKERY:return new Sy(this.servicesService,n);case bu.TAILOR:return new Ay(this.servicesService,n);case bu.WORKSHOP:return new iy(this.servicesService,n);case bu.WAREHOUSE:return new oy(this.servicesService,n);case bu.MARKETPLACE:return new zy(this.servicesService,n);case bu.TAVERN:return new My(this.servicesService,n);case bu.SHRINE:return new cy(this.servicesService,n);case bu.CHURCH:return new qy(this.servicesService,n);case bu.BARRACKS:return new Oy(this.servicesService,n);case bu.TRAINING_SQUARE:return new Ty(this.servicesService,n);case bu.STOCKADE:return new _y(this.servicesService,n);case bu.WOODEN_TOWER:return new Ny(this.servicesService,n);case bu.STONE_TOWER:return new Py(this.servicesService,n);case bu.STASH:return new tS(this.servicesService,n);case bu.LOGGERS_HUT:return new Wm(this.servicesService,n);case bu.GATHERER:return new ey(this.servicesService,n);case bu.HUNTER_LODGE:return new ay(this.servicesService,n);case bu.TANNERY:return new Cy(this.servicesService,n);case bu.FORESTER:return new zm(this.servicesService,n);case bu.SAWMILL:return new Qm(this.servicesService,n);case bu.FARM:return new dy(this.servicesService,n);case bu.WINDMILL:return new yy(this.servicesService,n);case bu.BUTCHER:return new By(this.servicesService,n);case bu.COTTON_MILL:return new Iy(this.servicesService,n);case bu.BREWERY:return new wy(this.servicesService,n);case bu.WINERY:return new Dy(this.servicesService,n);case bu.FIELD:return new gy(this.servicesService,n);case bu.ORCHARD:return new my(this.servicesService,n);case bu.PASTURE:return new Gy(this.servicesService,n);case bu.QUARRY:return new ty(this.servicesService,n);case bu.GEOLOGIST:return new ky(this.servicesService,n);case bu.STONEMASON:return new Ly(this.servicesService,n);case bu.MINT:return new Vy(this.servicesService,n);case bu.SMITHY:return new Ky(this.servicesService,n);case bu.PIT_MINE:return new Uy(this.servicesService,n);case bu.STONEHENGE:return new Yy(this.servicesService,n);case bu.PYRAMID:return new $y(this.servicesService,n);case bu.HANGING_GARDEN:return new Qy(this.servicesService,n);case bu.COLOSSUS:return new Zy(this.servicesService,n);case bu.UNDERGROUND_CITY:return new Jy(this.servicesService,n);case bu.GREAT_LIGHTHOUSE:return new eS(this.servicesService,n);case bu.SACRED_GROVE:return new nS(this.servicesService,n);case bu.ASCENSION_TEMPLE:return new Xy(this.servicesService,n);case bu.FISHERS_HUT:return new by(this.servicesService,n);case bu.SCHOOL_OF_FISH:return new py(this.servicesService,n);case bu.SHARKS:return new xy(this.servicesService,n);case bu.CONSTRUCTION:console.error("Building factory cannot create construction sites!");break;case bu.DECONSTRUCTION:console.error("Building factory cannot create deconstruction sites!");break;default:console.error("Couldn't construct building of type ["+bu[e]+"]!")}},e.ngInjectableDef=ve({factory:function(){return new e(ze(Sg),ze(rS))},token:e,providedIn:"root"}),e}(),iS=function(){function e(e,n,t){this.servicesService=e,this.effectsService=n,this.logService=t,this.land=ns.START_LAND,this.forest=ns.START_FOREST,this.mountains=ns.START_MOUNTAINS,this.takenLand=0,this.ores=[[vu.COAL,0],[vu.GOLD_ORE,0],[vu.SILVER_ORE,0],[vu.COPPER_ORE,0],[vu.TIN_ORE,0],[vu.IRON_ORE,0]],this.forestGrowTick=0,this.forestGrowTicks=ns.FOREST_GROW_TICKS,this.forestGrowPercentage=ns.FOREST_GROW_PERCENTAGE,this.forestLandLimit=0,this.servicesService.addService(Nu.LAND,this)}return e.prototype.load=function(e){this.land=e.land,this.forest=e.forest,this.mountains=e.mountains,this.forestGrowTick=e.forestGrowTick,this.takenLand=e.takenLand,this.forestLandLimit=e.forestLandLimit,this.ores=e.ores},e.prototype.save=function(){return{land:this.land,forest:this.forest,mountains:this.mountains,forestGrowTick:this.forestGrowTick,takenLand:this.takenLand,forestLandLimit:this.forestLandLimit,ores:this.ores}},e.prototype.reset=function(e,n){this.land=ns.START_LAND,this.forest=ns.START_FOREST,this.mountains=ns.START_MOUNTAINS,this.takenLand=0,this.ores=[[vu.COAL,0],[vu.GOLD_ORE,0],[vu.SILVER_ORE,0],[vu.COPPER_ORE,0],[vu.TIN_ORE,0],[vu.IRON_ORE,0]]},e.prototype.tick=function(e){this.growForest()},e.prototype.growForest=function(){if(this.forestGrowTick<this.forestGrowTicks&&(this.forestGrowTick+=1),this.forestGrowTick===this.forestGrowTicks){var e=Math.floor(this.forestGrowPercentage*this.forest*(1+this.effectsService.getNatureEffectsValue()/100));e<ns.MINIMAL_FOREST_GROWTH&&(e=ns.MINIMAL_FOREST_GROWTH),this.increaseForest(e),this.forestGrowTick=0}},e.prototype.reduceForest=function(e){var n=this.forest;return this.forest-e>=0&&(this.forest-=e,this.land+=e,n>=500&&this.forest<500&&this.logService.warning("There are less than 500 trees in the forest!"),n>=300&&this.forest<300&&this.logService.warning("There are less than 300 trees in the forest!"),n>=100&&this.forest<100&&(this.logService.warning("Critical forest size!"),this.logService.warning("There are less than 100 trees in the forest!")),!0)},e.prototype.increaseForest=function(e,n){if(void 0===n&&(n=!0),n){var t=ns.START_FOREST_LIMIT-this.takenLand;this.forestLandLimit>0&&(t=this.forestLandLimit),t<0&&(t=0);var r=this.land-t;return r<0&&(r=0),r-e>=0?(this.forest+=e,this.land-=e,0):(this.forest+=r,this.land-=r,e-r)}return this.forest+=e,0},e.prototype.reduceLand=function(e){var n=ns.START_FOREST_LIMIT-this.takenLand;return this.forestLandLimit>0&&(n=this.forestLandLimit),n<0&&(n=0),this.land-n-e>=0&&(this.land-=e,this.checkLandTriggers(),!0)},e.prototype.increaseLand=function(e,n){return void 0===n&&(n=!1),this.land+=e,n||(this.takenLand-=e),!0},e.prototype.increaseMountains=function(e){return this.mountains+=e,!0},e.prototype.getForest=function(){return this.forest},e.prototype.decreaseLand=function(e){if(!(this.land-e>=0))return e-this.land;this.takenLand+=e,this.land-=e},e.prototype.hasLand=function(e){return this.land-e>=0},e.prototype.getLand=function(){return this.land},e.prototype.getMountains=function(){return this.mountains},e.prototype.hasMountains=function(e){return this.mountains-e>=0},e.prototype.decreaseMountains=function(e){if(!(this.mountains-e>=0))return e-this.mountains;this.mountains-=e,this.takenLand+=e},e.prototype.checkLandTriggers=function(){},e.prototype.getForestLandLimit=function(){return this.forestLandLimit},e.prototype.setForestLandLimit=function(e){this.forestLandLimit=e},e.prototype.getOre=function(e){return this.ores.find(function(n){return n[0]===e})[1]},e.prototype.hasOre=function(e,n){return this.ores.find(function(n){return n[0]===e})[1]>=n},e.prototype.increaseOre=function(e,n){this.ores.find(function(n){return n[0]===e})[1]+=n},e.prototype.decreaseOre=function(e,n){var t=this.ores.find(function(n){return n[0]===e});if(t[1]>=n)return t[1]-=n,0;var r=n-t[1];return t[1]=0,r},e.prototype.getTakenLand=function(){return this.takenLand},e.prototype.takeLand=function(e){this.land-=e,this.takenLand+=e},e.ngInjectableDef=ve({factory:function(){return new e(ze(Sg),ze(Qg),ze(_g))},token:e,providedIn:"root"}),e}(),oS=function(){function e(e,n,t,r,l,i){this.buildings=[],this.filterBuilding=bu.ALL,this.thisRegion=l,this.buildingFactoryService=e,this.resourcesService=n,this.servicesService=t,this.landService=r,n.addCallback(this,l),t.addService(i,this)}return e.prototype.init=function(){},e.prototype.getBuildings=function(){return this.buildings},e.prototype.tick=function(e){this.shuffleArray(this.buildings).forEach(function(n){return n.tick(e)})},e.prototype.shuffleArray=function(e){for(var n,t=e.slice(),r=t.length-1;r>0;r--){var l=Math.floor(Math.random()*(r+1));t[r]=(n=[t[l],t[r]])[0],t[l]=n[1]}return t},e.prototype.save=function(){return{buildings:this.buildings,filterBuilding:this.filterBuilding}},e.prototype.reset=function(e,n){this.buildings=[],this.filterBuilding=bu.ALL,this.init()},e.prototype.load=function(e){this.buildings=[],this.filterBuilding=void 0!==e.filterBuilding?e.filterBuilding:bu.ALL;for(var n=0,t=e.buildings;n<t.length;n++)this.buildings.push(this.buildingFactoryService.loadBuilding(t[n]))},e.prototype.getFilterBuilding=function(){return this.filterBuilding},e.prototype.setFilterBuildings=function(e){this.filterBuilding=e},e.prototype.getUnemployed=function(){return this.resourcesService.getPeople()},e.prototype.finishConstruction=function(e,n){var t=this.buildings.indexOf(e);-1!==t&&(this.buildings[t].stopProduction(),this.buildings[t]=this.buildingFactoryService.createBuilding(n,this.buildings[t].getBuildingId()))},e.prototype.createConstruction=function(e){this.buildings.push(e)},e.prototype.demolish=function(e){var n=this.buildings.indexOf(e);-1!==n&&(this.buildings[n].getBuildingType()===bu.CONSTRUCTION?(this.buildings[n].stopProduction(),this.buildings[n].finishDemolish(),this.landService.increaseLand(this.buildings[n].getSize()),this.buildings.splice(n,1)):this.buildings[n]=new Zm(this.servicesService,this.buildings[n].getBuildingId(),this.thisRegion,this.buildings[n].getBuildingType(),this.buildings[n].getComplexity(),this.buildings[n].getSize()).build())},e.prototype.finishDeconstruction=function(e){var n=this.buildings.indexOf(e);-1!==n&&(this.buildings[n].stopProduction(),this.buildingFactoryService.createBuildingShell(this.buildings[n].getBuildingBeingDemolished()).finishDemolish(),this.landService.increaseLand(this.buildings[n].getSize()),this.buildings.splice(n,1))},e.prototype.finishUpgrade=function(e,n){var t=this.buildings.indexOf(e);if(-1!==t){this.buildings[t].stopProduction();var r=this.buildingFactoryService.createBuildingShell(n,this.buildings[t].getBuildingId());r.setBuildingLevel(this.buildings[t].getBuildingLevel()),r.build(),this.buildings[t]=r}},e.prototype.fireRandomWorker=function(){var e=this.buildings.filter(function(e){return void 0===e.getOccupants&&e.isWorking()});return e.length>0&&(e[Math.floor(Math.random()*e.length)].fireWorker(),!0)},e.prototype.moveBuildingInList=function(e,n){Mv(this.buildings,e,n)},e.prototype.moveBuildingInListByBuildingId=function(e,n){var t=this.buildings.findIndex(function(n){return e===n.getBuildingId()}),r=this.buildings.findIndex(function(e){return n===e.getBuildingId()});Mv(this.buildings,t,r)},e.prototype.canCombine=function(e){if(this.buildings.filter(function(e){return e.isCombinable()}).length>1)return this.toCombine?this.toCombine!==e&&this.toCombine.getBuildingType()===e.getBuildingType():!!this.buildings.find(function(n){return n!==e&&n.getBuildingType()===e.getBuildingType()})},e.prototype.combine=function(e){if(!this.toCombine)return this.toCombine=e,!1;e.combine(this.toCombine,this)},e.prototype.finaliseCombine=function(e){if(e){var n=this.buildings.indexOf(this.toCombine);if(n>=0)return this.buildings[n].prepareDemolish()?(this.toCombine=null,this.buildings.splice(n,1),!0):(this.toCombine=null,!1)}else this.toCombine=null},e.prototype.clearCombineMode=function(){this.toCombine=null},e.prototype.split=function(e){e.isSplittable()&&e.split(this)},e.prototype.finaliseSplit=function(e){this.buildings.push(e)},e.prototype.addBuilding=function(e){this.buildings.push(this.buildingFactoryService.createBuilding(e))},e.prototype.upgradeBuilding=function(e){var n=this.buildings.find(function(n){return n.getBuildingId()===e}),t=this.servicesService.getService(Nu.MODAL);if(n)if(n.hasUpgrade()){if(this.resourcesService.decreaseResources(n.getUpgradeCost(),"Upgrade",!0)){n.stopProduction();var r=this.buildings.indexOf(n),l=ts.getBuilding(n.getBuildingType());this.buildings[r]=new jm(this.servicesService,n.getBuildingId(),this.thisRegion,n.getBuildingType(),l.UPGRADES[n.getBuildingLevel()-1].COMPLEXITY,n.getSize(),n.getBuildingLevel()+1).build()}}else t.info("This building cannot be upgraded");else t.info("Error! Building not found")},e}(),uS=function(e){function n(n,t,r,l,i){var o=e.call(this,t,n,r,i,ku.VILLAGE,Nu.VILLAGE)||this;return o.idService=l,o}return l(n,e),n.prototype.init=function(){var e=this;this.buildings.push(new Gm(this.servicesService,this.idService.getNextId(),2).build()),this.buildings.push(new Gm(this.servicesService,this.idService.getNextId(),1).build()),this.resourcesService.createPeople(3),this.buildings.forEach(function(n){return e.landService.takeLand(n.getSize())})},n.prototype.getPopulation=function(){return this.resourcesService.getPeople()+this.resourcesService.getWorkers()},n.prototype.getPopulationCap=function(){return this.resourcesService.getPopulationCap()},n.prototype.moveOccupants=function(e,n){for(var t=0;n>0&&t<this.buildings.length;){var r=this.buildings[t];if(this.buildings[t]!==e&&void 0!==r.getOccupants)for(;r.getOccupants()<r.getMaxSize()&&n>0;)r.addOccupant()&&(n-=1);t+=1}return n},n.prototype.removeRecruit=function(e){var n=this.buildings.filter(function(e){return void 0!==e.getOccupants}).map(function(e){return e}).sort(function(e,n){return e.getOccupants()===e.getMaxSize()&&n.getOccupants()===n.getMaxSize()?e.getMaxSize()>n.getMaxSize()?-1:1:e.getOccupants()===e.getMaxSize()&&n.getOccupants()<n.getMaxSize()?-1:e.getOccupants()<e.getMaxSize()&&n.getOccupants()===n.getMaxSize()?1:void 0}),t=0;if(n.forEach(function(e){return t+=e.getOccupants()}),t>=e)for(;e>0;)for(var r=0,l=n;r<l.length;r++){if(!(e>0))return!0;l[r].removeOccupant()&&(this.resourcesService.removePeople(1),e-=1)}return!1},n.prototype.replaceWithHouses=function(){var e=this;this.buildings.push(new Bm(this.servicesService,2).build()),this.buildings.filter(function(e){return e.getBuildingType()===bu.HUT}).forEach(function(n){n.prepareDemolish(),e.demolish(n)}),this.buildings.filter(function(e){return e.getBuildingType()===bu.DECONSTRUCTION}).forEach(function(n){return e.finishDeconstruction(n)})},n.ngInjectableDef=ve({factory:function(){return new n(ze(Lg),ze(lS),ze(Sg),ze(rS),ze(iS))},token:n,providedIn:"root"}),n}(oS),sS=function(){function e(e,n,t){this.marketService=e,this.villageService=n,this.resourcesService=t,this.filterText="",this.typeRadio="all"}return e.prototype.ngOnInit=function(){},e.prototype.getOffers=function(){var e,n=this;return e=null!==this.filterText&&this.filterText.length>0?this.marketService.getOffers().filter(function(e){return Au.prepareResourceName(e.resource).toLowerCase().includes(n.filterText)}):this.marketService.getOffers(),"buy"===this.typeRadio?e=e.filter(function(e){return e.buy}):"sell"===this.typeRadio&&(e=e.filter(function(e){return!e.buy})),e},e.prototype.getCoins=function(){return this.resourcesService.getResource(vu.COINS).amount},e.prototype.accept=function(e){this.marketService.accept(e)},e.prototype.isMarketBuilt=function(){return void 0!==this.villageService.getBuildings().find(function(e){return e.getBuildingType()===bu.MARKETPLACE})},e.prototype.getResourceName=function(e){return vu[e]},e}(),aS=gl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{margin:.5%;height:100%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}.boxTitle[_ngcontent-%COMP%]{text-align:center;border-bottom:2px solid #000}#side[_ngcontent-%COMP%]{float:right;font-size:1em;width:25%;margin:.5%;display:inline-block;vertical-align:bottom}#side[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:.8em;margin:0;padding:0;border:none;outline:0}#headers[_ngcontent-%COMP%]{margin:3px 3px 0;display:flex;flex-direction:row;width:97%;text-align:center;font-size:.9em}#headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:0 0 24%;padding:2px;border:1px solid #000;border-left:none}#headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-of-type{border-left:1px solid #000}#market[_ngcontent-%COMP%]{display:flex;flex-direction:row;border:2px solid #000;height:91.5%}#offersBox[_ngcontent-%COMP%]{display:flex;flex:0 0 70%;flex-direction:column;border-right:2px solid #000;height:100%;font-size:1.2em}#filterBox[_ngcontent-%COMP%]{display:flex;flex:0 0 30%;flex-direction:column;height:100%}#offers[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:center;height:100%;overflow-y:auto}.offer[_ngcontent-%COMP%]{flex:0 0 auto;display:flex;flex-direction:row;border:1px solid #000;margin:3px}.offer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:0 0 24%;padding:2px}.offer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:.8em}#filters[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}#filter[_ngcontent-%COMP%]{width:90%}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.icon2[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center}#noMarket[_ngcontent-%COMP%]{margin-left:112px;color:#8b0000}"]],data:{}});function cS(e){return so(0,[(e()(),Yl(0,0,null,null,1,"span",[["id","noMarket"]],null,null,null,null,null)),(e()(),io(-1,null,["No Marketplace available. No merchant will visit."]))],null,null)}function pS(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.accept(e.parent.context.$implicit.id)&&r),r},null,null)),(e()(),io(-1,null,["Buy"]))],null,null)}function hS(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.accept(e.parent.context.$implicit.id)&&r),r},null,null)),(e()(),io(-1,null,["Sell"]))],null,null)}function dS(e){return so(0,[(e()(),Yl(0,0,null,null,15,"div",[["class","offer"]],null,null,null,null,null)),(e()(),Yl(1,0,null,null,3,"span",[["class","icon2"]],null,null,null,null,null)),(e()(),io(2,null,[" "," "])),(e()(),Yl(3,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(4,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Yl(5,0,null,null,3,"span",[["class","icon2"]],null,null,null,null,null)),(e()(),io(6,null,[" "," "])),(e()(),Yl(7,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(8,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Yl(9,0,null,null,1,"span",[["class","icon2"]],null,null,null,null,null)),(e()(),io(10,null,[" "," days "])),(e()(),Yl(11,0,null,null,4,"span",[],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,pS)),Mi(13,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,hS)),Mi(15,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,4,0,n.component.getResourceName(n.context.$implicit.resource),"resources"),e(n,8,0,"coins","resources"),e(n,13,0,n.context.$implicit.buy),e(n,15,0,!n.context.$implicit.buy)},function(e,n){e(n,2,0,n.context.$implicit.amount),e(n,6,0,n.context.$implicit.price),e(n,10,0,n.context.$implicit.duration)})}function fS(e){return so(0,[(e()(),Yl(0,0,null,null,65,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Yl(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),Yl(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["Market"])),(e()(),Yl(4,0,null,null,5,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Yl(5,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(6,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),io(7,null,[" "," "])),(e()(),jl(16777216,null,null,1,null,cS)),Mi(9,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(10,0,null,null,55,"div",[["id","market"]],null,null,null,null,null)),(e()(),Yl(11,0,null,null,15,"div",[["id","offersBox"]],null,null,null,null,null)),(e()(),Yl(12,0,null,null,2,"div",[["class","boxTitle"]],null,null,null,null,null)),(e()(),Yl(13,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["Offers"])),(e()(),Yl(15,0,null,null,8,"div",[["id","headers"]],null,null,null,null,null)),(e()(),Yl(16,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["offer"])),(e()(),Yl(18,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["price"])),(e()(),Yl(20,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["duration"])),(e()(),Yl(22,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["buy/sell"])),(e()(),Yl(24,0,null,null,2,"div",[["id","offers"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,dS)),Mi(26,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null),(e()(),Yl(27,0,null,null,38,"div",[["id","filterBox"]],null,null,null,null,null)),(e()(),Yl(28,0,null,null,2,"div",[["class","boxTitle"]],null,null,null,null,null)),(e()(),Yl(29,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["Filters"])),(e()(),Yl(31,0,null,null,34,"div",[["id","filters"]],null,null,null,null,null)),(e()(),Yl(32,0,null,null,5,"input",[["id","filter"],["placeholder","search"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var r=!0,l=e.component;return"input"===n&&(r=!1!==Ei(e,33)._handleInput(t.target.value)&&r),"blur"===n&&(r=!1!==Ei(e,33).onTouched()&&r),"compositionstart"===n&&(r=!1!==Ei(e,33)._compositionStart()&&r),"compositionend"===n&&(r=!1!==Ei(e,33)._compositionEnd(t.target.value)&&r),"ngModelChange"===n&&(r=!1!==(l.filterText=t)&&r),r},null,null)),Mi(33,16384,null,0,Cf,[xn,Pn,[2,Tf]],null,null),Li(1024,null,Of,function(e){return[e]},[Cf]),Mi(35,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),Li(2048,null,Nf,null,[pg]),Mi(37,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),Yl(38,0,null,null,27,"div",[],null,null,null,null,null)),(e()(),Yl(39,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),Yl(40,0,null,null,6,"input",[["name","type"],["type","radio"],["value","all"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var r=!0,l=e.component;return"input"===n&&(r=!1!==Ei(e,41)._handleInput(t.target.value)&&r),"blur"===n&&(r=!1!==Ei(e,41).onTouched()&&r),"compositionstart"===n&&(r=!1!==Ei(e,41)._compositionStart()&&r),"compositionend"===n&&(r=!1!==Ei(e,41)._compositionEnd(t.target.value)&&r),"change"===n&&(r=!1!==Ei(e,42).onChange()&&r),"blur"===n&&(r=!1!==Ei(e,42).onTouched()&&r),"ngModelChange"===n&&(r=!1!==(l.typeRadio=t)&&r),r},null,null)),Mi(41,16384,null,0,Cf,[xn,Pn,[2,Tf]],null,null),Mi(42,212992,null,0,Df,[xn,Pn,Pf,on],{name:[0,"name"],value:[1,"value"]},null),Li(1024,null,Of,function(e,n){return[e,n]},[Cf,Df]),Mi(44,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),Li(2048,null,Nf,null,[pg]),Mi(46,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),io(-1,null,[" All "])),(e()(),Yl(48,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),Yl(49,0,null,null,6,"input",[["name","type"],["type","radio"],["value","buy"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var r=!0,l=e.component;return"input"===n&&(r=!1!==Ei(e,50)._handleInput(t.target.value)&&r),"blur"===n&&(r=!1!==Ei(e,50).onTouched()&&r),"compositionstart"===n&&(r=!1!==Ei(e,50)._compositionStart()&&r),"compositionend"===n&&(r=!1!==Ei(e,50)._compositionEnd(t.target.value)&&r),"change"===n&&(r=!1!==Ei(e,51).onChange()&&r),"blur"===n&&(r=!1!==Ei(e,51).onTouched()&&r),"ngModelChange"===n&&(r=!1!==(l.typeRadio=t)&&r),r},null,null)),Mi(50,16384,null,0,Cf,[xn,Pn,[2,Tf]],null,null),Mi(51,212992,null,0,Df,[xn,Pn,Pf,on],{name:[0,"name"],value:[1,"value"]},null),Li(1024,null,Of,function(e,n){return[e,n]},[Cf,Df]),Mi(53,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),Li(2048,null,Nf,null,[pg]),Mi(55,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),io(-1,null,[" Buy "])),(e()(),Yl(57,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),Yl(58,0,null,null,6,"input",[["name","type"],["type","radio"],["value","sell"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var r=!0,l=e.component;return"input"===n&&(r=!1!==Ei(e,59)._handleInput(t.target.value)&&r),"blur"===n&&(r=!1!==Ei(e,59).onTouched()&&r),"compositionstart"===n&&(r=!1!==Ei(e,59)._compositionStart()&&r),"compositionend"===n&&(r=!1!==Ei(e,59)._compositionEnd(t.target.value)&&r),"change"===n&&(r=!1!==Ei(e,60).onChange()&&r),"blur"===n&&(r=!1!==Ei(e,60).onTouched()&&r),"ngModelChange"===n&&(r=!1!==(l.typeRadio=t)&&r),r},null,null)),Mi(59,16384,null,0,Cf,[xn,Pn,[2,Tf]],null,null),Mi(60,212992,null,0,Df,[xn,Pn,Pf,on],{name:[0,"name"],value:[1,"value"]},null),Li(1024,null,Of,function(e,n){return[e,n]},[Cf,Df]),Mi(62,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),Li(2048,null,Nf,null,[pg]),Mi(64,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),io(-1,null,[" Sell "]))],function(e,n){var t=n.component;e(n,6,0,"coins","resources"),e(n,9,0,!t.isMarketBuilt()),e(n,26,0,t.getOffers()),e(n,35,0,t.filterText),e(n,42,0,"type","all"),e(n,44,0,"type",t.typeRadio),e(n,51,0,"type","buy"),e(n,53,0,"type",t.typeRadio),e(n,60,0,"type","sell"),e(n,62,0,"type",t.typeRadio)},function(e,n){e(n,7,0,n.component.getCoins()),e(n,32,0,Ei(n,37).ngClassUntouched,Ei(n,37).ngClassTouched,Ei(n,37).ngClassPristine,Ei(n,37).ngClassDirty,Ei(n,37).ngClassValid,Ei(n,37).ngClassInvalid,Ei(n,37).ngClassPending),e(n,40,0,Ei(n,46).ngClassUntouched,Ei(n,46).ngClassTouched,Ei(n,46).ngClassPristine,Ei(n,46).ngClassDirty,Ei(n,46).ngClassValid,Ei(n,46).ngClassInvalid,Ei(n,46).ngClassPending),e(n,49,0,Ei(n,55).ngClassUntouched,Ei(n,55).ngClassTouched,Ei(n,55).ngClassPristine,Ei(n,55).ngClassDirty,Ei(n,55).ngClassValid,Ei(n,55).ngClassInvalid,Ei(n,55).ngClassPending),e(n,58,0,Ei(n,64).ngClassUntouched,Ei(n,64).ngClassTouched,Ei(n,64).ngClassPristine,Ei(n,64).ngClassDirty,Ei(n,64).ngClassValid,Ei(n,64).ngClassInvalid,Ei(n,64).ngClassPending)})}function gS(e){return so(0,[(e()(),Yl(0,0,null,null,1,"app-market",[],null,null,null,fS,aS)),Mi(1,114688,null,0,sS,[Mm,uS,Lg],null,null)],function(e,n){e(n,1,0)},null)}var vS=ai("app-market",sS,gS,{},{},[]),mS=function(){function e(e,n,t,r,l,i,o,u,s){void 0===u&&(u=function(){}),void 0===s&&(s=0),this.tech=e,this.category=n,this.prerequisites=t,this.flagPrerequisites=r,this.cost=l,this.requiredResearchPoints=i,this.description=o,this.researchPoints=s,this.finishFunction=u}return e.prototype.getTech=function(){return this.tech},e.prototype.getTechName=function(){return Au.prepareTechName(this.tech)},e.prototype.isResearched=function(){return this.researchPoints>this.requiredResearchPoints&&(this.researchPoints=this.requiredResearchPoints),this.researchPoints===this.requiredResearchPoints},e.prototype.getCategory=function(){return this.category},e.prototype.getDescription=function(){return this.description},e.prototype.getResearchPointsDue=function(){return this.requiredResearchPoints-this.researchPoints},e.prototype.addResearchPoints=function(e){this.researchPoints+=e,this.researchPoints>this.requiredResearchPoints&&(this.researchPoints=this.requiredResearchPoints)},e.prototype.getResearchPoints=function(){return this.researchPoints},e.prototype.setResearchPoints=function(e){this.researchPoints=e},e.prototype.setResearched=function(){this.researchPoints=this.requiredResearchPoints},e.prototype.getCost=function(){return this.cost},e.prototype.clearCost=function(){this.cost=new Map},e.prototype.getPrerequisites=function(){return this.prerequisites},e.prototype.getFlagPrerequisites=function(){return this.flagPrerequisites},e.prototype.getFinishFunction=function(){return this.finishFunction},e.prototype.getRequiredResearchPoints=function(){return this.requiredResearchPoints},e}(),yS=function(){function e(){this.prerequisites=[],this.flagPrerequisites=[],this.cost=new Map,this.researchPoints=0,this.finishFunction=function(){}}return e.prototype.forTech=function(e){return this.tech=e,this},e.prototype.withCategory=function(e){return this.category=e,this},e.prototype.withPrerequisite=function(e){return this.prerequisites.push(e),this},e.prototype.withPrerequisites=function(e){var n=this;return e.forEach(function(e){return n.prerequisites.push(e)}),this},e.prototype.withFlagPrerequisite=function(e){return this.flagPrerequisites.push(e),this},e.prototype.withFlagPrerequisites=function(e){var n=this;return e.forEach(function(e){return n.flagPrerequisites.push(e)}),this},e.prototype.withCost=function(e,n){return this.cost.set(e,n),this},e.prototype.withCosts=function(e){var n=this;return e.forEach(function(e,t){return n.cost.set(t,e)}),this},e.prototype.withResearchPoints=function(e){return this.researchPoints=e,this},e.prototype.withDescription=function(e){return this.description=e,this},e.prototype.withFinishFunction=function(e){return this.finishFunction=e,this},e.prototype.build=function(){var e=new mS(this.tech,this.category,this.prerequisites,this.flagPrerequisites,this.cost,this.researchPoints,this.description,this.finishFunction);return this.tech=void 0,this.category=void 0,this.prerequisites=[],this.flagPrerequisites=[],this.cost=new Map,this.researchPoints=0,this.description=void 0,this.finishFunction=function(){},e},e}(),SS=function(){function e(e,n,t,r,l,i){this.servicesService=e,this.modalService=n,this.resourcesService=t,this.logService=r,this.soundService=l,this.gameService=i,this.techUpdate=new L,this.techList=[],this.techDone=[],this.techStarted=[],this.currentResearch=null,this.foresight=0,this.showDone=!1,this.servicesService.addService(Nu.RESEARCH,this),this.init()}return e.prototype.init=function(){var e=this;this.techList=[];var n=new yS;Object.entries(os).forEach(function(t){n.forTech(Su[t[0]]).withCategory(t[1].CATEGORY).withFinishFunction(t[1].FINISH).withResearchPoints(t[1].RESEARCH_POINT).withPrerequisites(t[1].PREREQUISITES).withFlagPrerequisites(t[1].FLAG_PREREQUISITES?t[1].FLAG_PREREQUISITES:[]).withDescription(t[1].DESCRIPTION),t[1].COST.forEach(function(e){return n.withCost(e.resource,e.amount)}),e.techList.push(n.build())})},e.prototype.isResearched=function(e){return null!=this.techDone.find(function(n){return n===e})},e.prototype.startResearch=function(e){var n=this;if(!this.currentResearch||this.currentResearch.getTech()!==e){var t=this.techList.find(function(n){return n.getTech()===e}),r=!0,l="";if(t.getPrerequisites().forEach(function(e){n.techDone.includes(e)||(r=!1,l+=Au.prepareTechName(e)+" not researched!<br>")}),t.getFlagPrerequisites().forEach(function(e){n.gameService.isEnabled(e)||(r=!1,l+=Au.prepareFlagName(e)+" not unlocked!<br>")}),r){if(!this.techStarted.find(function(n){return n[0]===e})){var i=this.techList.find(function(n){return n.getTech()===e}),o=!0,u="";if(Array.from(i.getCost().entries()).forEach(function(e){var t=n.resourcesService.hasResource(e[0],e[1],"Research",!0);0!==t&&(u+="Missing "+t+" "+Au.prepareResourceName(e[0])+"!<br>",o=!1)}),!o)return void this.modalService.info(u)}this.modalService.setModalText("Are you sure you want to unlock researching "+Au.prepareTechName(e)+"?"),this.modalService.open(mu.CONFIRM);var s=this.modalService.registerForConfirmation().subscribe(function(t){if(s.unsubscribe(),t){var r=n.techList.find(function(n){return n.getTech()===e}),l=!0,i="";if(Array.from(r.getCost().entries()).forEach(function(e){var t=n.resourcesService.hasResource(e[0],e[1],"Research",!0);0!==t&&(i+="Missing "+t+" "+Au.prepareResourceName(e[0])+"!<br>",l=!1)}),!l)return void n.modalService.info(i);if(n.resourcesService.decreaseResources(r.getCost(),"Research",!0),n.currentResearch){var o=n.techStarted.find(function(n){return n[0]===e});o?o[1]=n.currentResearch.getResearchPoints():n.techStarted.push([n.currentResearch.getTech(),n.currentResearch.getResearchPoints()])}n.currentResearch=n.techList.find(function(n){return n.getTech()===e}),n.currentResearch.clearCost();var u=n.techStarted.find(function(n){return n[0]===e});u?u[1]=n.currentResearch.getResearchPoints():n.techStarted.push([n.currentResearch.getTech(),n.currentResearch.getResearchPoints()])}})}else this.modalService.info(l)}},e.prototype.progressTech=function(e){var n=this;this.currentResearch&&(this.currentResearch.addResearchPoints(e),this.currentResearch.isResearched()&&(this.logService.log(this.currentResearch.getTechName()+" researched"),this.soundService.playTownBells(),this.currentResearch.getFinishFunction()(this.servicesService),this.techDone.push(this.currentResearch.getTech()),this.techStarted=this.techStarted.filter(function(e){return e[0]!==n.currentResearch.getTech()}),this.currentResearch=null),this.techUpdate.next())},e.prototype.save=function(){var e=this;if(this.currentResearch){var n=this.techStarted.find(function(n){return n[0]===e.currentResearch.getTech()});n&&(n[1]=this.currentResearch.getResearchPoints())}return{foresight:this.foresight,showDone:this.showDone,techDone:this.techDone,techStarted:this.techStarted,currentResearchTech:this.currentResearch?this.currentResearch.getTech():null}},e.prototype.load=function(e){var n=this;this.foresight=e.foresight,this.showDone=void 0!==e.showDone&&e.showDone,this.techDone=e.techDone,this.techStarted=e.techStarted,this.techDone.forEach(function(e){return n.techList.find(function(n){return n.getTech()===e}).setResearched()}),this.techStarted.forEach(function(e){var t=n.techList.find(function(n){return n.getTech()===e[0]});t&&(t.clearCost(),t.setResearchPoints(e[1]))}),this.currentResearch=this.techList.find(function(n){return n.getTech()===e.currentResearchTech}),this.techDone.includes(Su.BARRACKS)&&!this.gameService.isEnabled(Eu.BARRACKS)&&(this.gameService.enable(Eu.BARRACKS),this.logService.log("Barracks invented"))},e.prototype.reset=function(e,n){this.techList=[],this.techDone=[],this.techStarted=[],this.currentResearch=null,this.foresight=0,this.showDone=!1,this.init()},e.prototype.getTech=function(){var e=this;return this.techList.filter(function(n){if(e.techDone.includes(n.getTech()))return e.showDone;var t=!0;return n.getPrerequisites().forEach(function(n){e.checkPrerequisite(n,e.foresight)||(t=!1)}),t})},e.prototype.checkPrerequisite=function(e,n){var t=this;if(this.techDone.includes(e))return!0;if(n>0){var r=!0;return this.techList.find(function(n){return n.getTech()===e}).getPrerequisites().forEach(function(e){t.checkPrerequisite(e,n-1)||(r=!1)}),r}return!1},e.prototype.getCurrentResearch=function(){return this.currentResearch},e.prototype.increaseForesight=function(e){this.foresight+=1},e.prototype.isResearchStarted=function(){return!!this.currentResearch},e.prototype.getTechPrerequisites=function(e){var n=this,t=[];return e.getPrerequisites().forEach(function(e){n.techDone.includes(e)||t.push(e)}),t},e.prototype.registerForUpdate=function(){return this.techUpdate.asObservable()},e.prototype.getForesight=function(){return this.foresight},e.prototype.getTechFlagPrerequisites=function(e){var n=this,t=[];return e.getFlagPrerequisites().forEach(function(e){n.gameService.isEnabled(e)||t.push(e)}),t},e.prototype.finishTech=function(e){this.techDone.push(e);var n=this.techList.find(function(n){return n.getTech()===e});n&&(this.logService.log(n.getTechName()+" researched"),n.getFinishFunction()(this.servicesService)),this.currentResearch&&this.currentResearch.getTech()===e&&(this.currentResearch=null),this.techUpdate.next()},e.prototype.toggleShowDone=function(){this.showDone=!this.showDone},e.prototype.shouldShowDone=function(){return this.showDone},e.ngInjectableDef=ve({factory:function(){return new e(ze(Sg),ze(Ig),ze(Lg),ze(_g),ze(Dm),ze(wg))},token:e,providedIn:"root"}),e}(),ES=function(){function e(n,t){this.techService=n,this.resourcesService=t,this.id=e.randomId()}return e.randomId=function(){return Math.random()},e.prototype.ngOnInit=function(){var e=this;this.updateSubscription=this.techService.registerForUpdate().subscribe(function(){e.progressRef&&(e.progressRef.nativeElement.style.width=e.tech.getResearchPoints()/e.tech.getRequiredResearchPoints()*100+"%")})},e.prototype.ngAfterViewInit=function(){this.progressRef&&(this.progressRef.nativeElement.style.width=this.tech.getResearchPoints()/this.tech.getRequiredResearchPoints()*100+"%")},e.prototype.ngOnChanges=function(){this.progressRef&&(this.progressRef.nativeElement.style.width=this.tech.getResearchPoints()/this.tech.getRequiredResearchPoints()*100+"%")},e.prototype.getResourceName=function(e){return Au.prepareResourceName(e)},e.prototype.start=function(){this.techService.startResearch(this.tech.getTech())},e.prototype.getPrerequisiteName=function(e){return Au.prepareTechName(e)},e.prototype.getMissingPrerequisites=function(){return this.techService.getTechPrerequisites(this.tech)},e.prototype.hasResource=function(e){return 0===this.resourcesService.hasResource(e.key,e.value,"Research",!0)},e.prototype.getMissingFlagPrerequisites=function(){return this.techService.getTechFlagPrerequisites(this.tech)},e.prototype.getFlagPrerequisiteName=function(e){return Au.prepareFlagName(e)},e}(),bS=gl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #000}#researched[_ngcontent-%COMP%]{display:inline-block;width:100%;padding:3px;text-align:center;cursor:initial;border:1px solid #000}#wrapperNotAvailable[_ngcontent-%COMP%]{display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #57575a}#titleGrey[_ngcontent-%COMP%]{display:inline-block;color:#57575a}.notMet[_ngcontent-%COMP%]{color:#8b0000}.title[_ngcontent-%COMP%]{text-align:left}hr[_ngcontent-%COMP%]{border-color:#000}#progress[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background-color:var(--active-colour);z-index:1}#text[_ngcontent-%COMP%]{position:relative;z-index:2}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center}"]],data:{}});function OS(e){return so(0,[(e()(),Yl(0,0,null,null,7,"div",[["appTooltip",""],["class","tooltip"],["id","researched"]],null,[[null,"mousemove"]],function(e,n,t){var r=!0;return"mousemove"===n&&(r=!1!==Ei(e,1).onmousemove(t)&&r),r},null,null)),Mi(1,16384,null,0,af,[],{elementId:[0,"elementId"]},null),(e()(),Yl(2,0,[[1,0],["progress",1]],null,0,"div",[["id","progress"]],null,null,null,null,null)),(e()(),Yl(3,0,null,null,1,"div",[["id","text"]],null,null,null,null,null)),(e()(),io(4,null,["",""])),(e()(),Yl(5,0,null,null,2,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),io(6,null,[" ",""])),(e()(),Yl(7,0,null,null,0,"br",[],null,null,null,null,null))],function(e,n){e(n,1,0,n.component.id)},function(e,n){var t=n.component;e(n,4,0,t.tech.getTechName()),e(n,5,0,Vl(1,"",t.id,"")),e(n,6,0,t.tech.getDescription())})}function RS(e){return so(0,[(e()(),Yl(0,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),io(-1,null,["Cost:"])),(e()(),Yl(2,0,null,null,0,"br",[],null,null,null,null,null))],null,null)}function TS(e){return so(0,[(e()(),Yl(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),Yl(1,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),io(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.value)})}function CS(e){return so(0,[(e()(),Yl(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),Yl(1,0,null,null,1,"div",[["class","notMet"]],null,null,null,null,null)),(e()(),io(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.value)})}function _S(e){return so(0,[(e()(),Yl(0,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,TS)),Mi(2,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,CS)),Mi(4,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(5,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(6,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){var t=n.component;e(n,2,0,t.hasResource(n.context.$implicit)),e(n,4,0,!t.hasResource(n.context.$implicit)),e(n,6,0,t.getResourceName(n.context.$implicit.key),"resources")},null)}function IS(e){return so(0,[(e()(),Yl(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),io(1,null,[" "," "]))],null,function(e,n){e(n,1,0,n.component.getPrerequisiteName(n.context.$implicit))})}function AS(e){return so(0,[(e()(),Yl(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),io(1,null,[" "," "]))],null,function(e,n){e(n,1,0,n.component.getFlagPrerequisiteName(n.context.$implicit))})}function wS(e){return so(0,[(e()(),Yl(0,0,null,null,7,"div",[["class","prerequisites"]],null,null,null,null,null)),(e()(),Yl(1,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),io(-1,null,["Prerequisites:"])),(e()(),Yl(3,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,IS)),Mi(5,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null),(e()(),jl(16777216,null,null,1,null,AS)),Mi(7,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,5,0,t.getMissingPrerequisites()),e(n,7,0,t.getMissingFlagPrerequisites())},null)}function NS(e){return so(0,[(e()(),Yl(0,0,null,null,17,"div",[["appTooltip",""],["class","tooltip"],["id","wrapper"]],null,[[null,"click"],[null,"mousemove"]],function(e,n,t){var r=!0,l=e.component;return"mousemove"===n&&(r=!1!==Ei(e,1).onmousemove(t)&&r),"click"===n&&(r=!1!==l.start()&&r),r},null,null)),Mi(1,16384,null,0,af,[],{elementId:[0,"elementId"]},null),(e()(),Yl(2,0,[[1,0],["progress",1]],null,0,"div",[["id","progress"]],null,null,null,null,null)),(e()(),Yl(3,0,null,null,1,"div",[["id","text"]],null,null,null,null,null)),(e()(),io(4,null,["",""])),(e()(),Yl(5,0,null,null,12,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),io(6,null,[" ",""])),(e()(),Yl(7,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(8,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Yl(9,0,null,null,1,"div",[["class","title"]],null,null,null,null,null)),(e()(),io(10,null,["Research points: ","/",""])),(e()(),jl(16777216,null,null,1,null,RS)),Mi(12,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,2,null,_S)),Mi(14,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null),ki(0,Ks,[Vr]),(e()(),jl(16777216,null,null,1,null,wS)),Mi(17,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.id),e(n,12,0,t.tech.getCost().size>0),e(n,14,0,hl(n,14,0,Ei(n,15).transform(t.tech.getCost()))),e(n,17,0,t.getMissingPrerequisites().length>0||t.getMissingFlagPrerequisites().length>0)},function(e,n){var t=n.component;e(n,4,0,t.tech.getTechName()),e(n,5,0,Vl(1,"",t.id,"")),e(n,6,0,t.tech.getDescription()),e(n,10,0,t.tech.getResearchPoints(),t.tech.getRequiredResearchPoints())})}function PS(e){return so(0,[(e()(),Yl(0,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),io(-1,null,["Cost:"])),(e()(),Yl(2,0,null,null,0,"br",[],null,null,null,null,null))],null,null)}function DS(e){return so(0,[(e()(),Yl(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),Yl(1,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),io(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.value)})}function MS(e){return so(0,[(e()(),Yl(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),Yl(1,0,null,null,1,"div",[["class","notMet"]],null,null,null,null,null)),(e()(),io(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.value)})}function kS(e){return so(0,[(e()(),Yl(0,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,DS)),Mi(2,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,MS)),Mi(4,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(5,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(6,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){var t=n.component;e(n,2,0,t.hasResource(n.context.$implicit)),e(n,4,0,!t.hasResource(n.context.$implicit)),e(n,6,0,t.getResourceName(n.context.$implicit.key),"resources")},null)}function LS(e){return so(0,[(e()(),Yl(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),io(1,null,[" "," "]))],null,function(e,n){e(n,1,0,n.component.getPrerequisiteName(n.context.$implicit))})}function xS(e){return so(0,[(e()(),Yl(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),io(1,null,[" "," "]))],null,function(e,n){e(n,1,0,n.component.getFlagPrerequisiteName(n.context.$implicit))})}function FS(e){return so(0,[(e()(),Yl(0,0,null,null,7,"div",[["class","prerequisites"]],null,null,null,null,null)),(e()(),Yl(1,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),io(-1,null,["Prerequisites:"])),(e()(),Yl(3,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,LS)),Mi(5,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null),(e()(),jl(16777216,null,null,1,null,xS)),Mi(7,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,5,0,t.getMissingPrerequisites()),e(n,7,0,t.getMissingFlagPrerequisites())},null)}function US(e){return so(0,[(e()(),Yl(0,0,null,null,16,"div",[["appTooltip",""],["class","tooltip"],["id","wrapperNotAvailable"]],null,[[null,"click"],[null,"mousemove"]],function(e,n,t){var r=!0,l=e.component;return"mousemove"===n&&(r=!1!==Ei(e,1).onmousemove(t)&&r),"click"===n&&(r=!1!==l.start()&&r),r},null,null)),Mi(1,16384,null,0,af,[],{elementId:[0,"elementId"]},null),(e()(),Yl(2,0,null,null,1,"div",[["id","titleGrey"]],null,null,null,null,null)),(e()(),io(3,null,["",""])),(e()(),Yl(4,0,null,null,12,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),io(5,null,[" ",""])),(e()(),Yl(6,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(7,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Yl(8,0,null,null,1,"div",[["class","title"]],null,null,null,null,null)),(e()(),io(9,null,["Research points: ","/",""])),(e()(),jl(16777216,null,null,1,null,PS)),Mi(11,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,2,null,kS)),Mi(13,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null),ki(0,Ks,[Vr]),(e()(),jl(16777216,null,null,1,null,FS)),Mi(16,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.id),e(n,11,0,t.tech.getCost().size>0),e(n,13,0,hl(n,13,0,Ei(n,14).transform(t.tech.getCost()))),e(n,16,0,t.getMissingPrerequisites().length>0||t.getMissingFlagPrerequisites().length>0)},function(e,n){var t=n.component;e(n,3,0,t.tech.getTechName()),e(n,4,0,Vl(1,"",t.id,"")),e(n,5,0,t.tech.getDescription()),e(n,9,0,t.tech.getResearchPoints(),t.tech.getRequiredResearchPoints())})}function HS(e){return so(0,[Qi(671088640,1,{progressRef:0}),(e()(),jl(16777216,null,null,1,null,OS)),Mi(2,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,NS)),Mi(4,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,US)),Mi(6,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.tech.isResearched()),e(n,4,0,0===t.getMissingPrerequisites().length&&!t.tech.isResearched()),e(n,6,0,t.getMissingPrerequisites().length>0&&!t.tech.isResearched())},null)}var GS=function(){function e(e,n,t){this.techService=e,this.villageService=n,this.gameService=t}return e.prototype.ngOnInit=function(){this.categories=Object.keys(wu),this.categories=this.categories.slice(this.categories.length/2)},e.prototype.getTechList=function(e){return this.techService.getTech().filter(function(n){return n.getCategory()===wu[e]})},e.prototype.getCurrentResearch=function(){return this.techService.getCurrentResearch()},e.prototype.research=function(e){this.techService.progressTech(e)},e.prototype.isDev=function(){return!Gu.production},e.prototype.getForesight=function(){return this.techService.getForesight()},e.prototype.isResearcher=function(){return this.villageService.getBuildings().filter(function(e){return e.getBuildingType()===bu.WORKSHOP}).map(function(e){return e}).filter(function(e){return e.willResearch()}).length>0},e.prototype.shouldShowDone=function(){return this.techService.shouldShowDone()},e.prototype.showDone=function(){this.techService.toggleShowDone()},e}(),BS=gl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{margin:.7%;height:100%}#categories[_ngcontent-%COMP%]{display:inline-flex;flex-direction:row;border:1px solid #000;height:86%;width:100%;text-align:center}.category[_ngcontent-%COMP%]{text-align:center;flex:0 0 19.75%;display:flex;flex-direction:column;border:1px solid #000;align-items:center}#categoryBody[_ngcontent-%COMP%]{height:100%;width:100%;overflow-y:auto;overflow-x:hidden}.title[_ngcontent-%COMP%]{padding:2px;width:100%;font-weight:bolder;font-size:1em;margin-bottom:5px;display:block;border-bottom:1px solid #000}app-tech[_ngcontent-%COMP%]{display:inline-block;margin-bottom:4px;margin-top:4px;margin-left:-4px;width:75%;font-size:.7em}#researching[_ngcontent-%COMP%]{margin-bottom:8px}#currentTech[_ngcontent-%COMP%]{display:inline-block;width:auto;margin-right:10px}.tech[_ngcontent-%COMP%]{cursor:pointer}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}#noResearchers[_ngcontent-%COMP%]{margin-left:175px;color:#8b0000}.showHiddenButton[_ngcontent-%COMP%]{font-size:.8em;padding:4px;margin-left:auto}"]],data:{}});function VS(e){return so(0,[(e()(),Yl(0,0,null,null,3,"span",[],null,null,null,null,null)),(e()(),Yl(1,0,null,null,1,"app-tech",[["id","currentTech"]],null,null,null,HS,bS)),Mi(2,4833280,null,0,ES,[SS,Lg],{tech:[0,"tech"]},null),(e()(),io(3,null,[" requires "," more research points "]))],function(e,n){e(n,2,0,n.component.getCurrentResearch())},function(e,n){e(n,3,0,n.component.getCurrentResearch().getResearchPointsDue())})}function WS(e){return so(0,[(e()(),Yl(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["nothing"]))],null,null)}function jS(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.research(10)&&r),r},null,null)),(e()(),io(-1,null,["Research"]))],null,null)}function YS(e){return so(0,[(e()(),Yl(0,0,null,null,1,"span",[["id","noResearchers"]],null,null,null,null,null)),(e()(),io(-1,null,["No workshop set to research."]))],null,null)}function zS(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[["class","showHiddenButton"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.showDone()&&r),r},null,null)),(e()(),io(-1,null,["show finished"]))],null,null)}function KS(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[["class","showHiddenButton"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.showDone()&&r),r},null,null)),(e()(),io(-1,null,["hide finished"]))],null,null)}function qS(e){return so(0,[(e()(),Yl(0,0,null,null,1,"app-tech",[["class","tech"]],null,null,null,HS,bS)),Mi(1,4833280,null,0,ES,[SS,Lg],{tech:[0,"tech"]},null)],function(e,n){e(n,1,0,n.context.$implicit)},null)}function $S(e){return so(0,[(e()(),Yl(0,0,null,null,5,"div",[["class","category"]],null,null,null,null,null)),(e()(),Yl(1,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),io(2,null,["",""])),(e()(),Yl(3,0,null,null,2,"span",[["id","categoryBody"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,qS)),Mi(5,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,5,0,n.component.getTechList(n.context.$implicit))},function(e,n){e(n,2,0,n.context.$implicit)})}function QS(e){return so(0,[(e()(),Yl(0,0,null,null,21,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Yl(1,0,null,null,7,"div",[["id","researching"]],null,null,null,null,null)),(e()(),io(-1,null,[" Researching: "])),(e()(),jl(16777216,null,null,1,null,VS)),Mi(4,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,WS)),Mi(6,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,jS)),Mi(8,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(9,0,null,null,9,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Yl(10,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(11,114688,null,0,cf,[],{name:[0,"name"]},null),(e()(),io(12,null,["\xa0"," "])),(e()(),jl(16777216,null,null,1,null,YS)),Mi(14,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,zS)),Mi(16,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,KS)),Mi(18,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(19,0,null,null,2,"div",[["id","categories"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,$S)),Mi(21,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,4,0,t.getCurrentResearch()),e(n,6,0,!t.getCurrentResearch()),e(n,8,0,t.isDev()),e(n,11,0,"foresight"),e(n,14,0,!t.isResearcher()),e(n,16,0,!t.shouldShowDone()),e(n,18,0,t.shouldShowDone()),e(n,21,0,t.categories)},function(e,n){e(n,12,0,n.component.getForesight())})}function ZS(e){return so(0,[(e()(),Yl(0,0,null,null,1,"app-research",[],null,null,null,QS,BS)),Mi(1,114688,null,0,GS,[SS,uS,wg],null,null)],function(e,n){e(n,1,0)},null)}var XS=ai("app-research",GS,ZS,{},{},[]),JS=function(){return function(e,n,t,r,l,i){void 0===l&&(l=null),void 0===i&&(i=1),this.troop=e,this.recruitTime=n,this.strength=t,this.defense=r,this.cost=l,this.level=i}}(),eE=function(){function e(e,n,t,r,l,i,o,u){void 0===i&&(i=new Map),void 0===o&&(o=function(e,n,t){}),void 0===u&&(u=[]),this.squadStrength=0,this.squadDefense=0,this.mission=e,this.time=n,this.description=t,this.requiredStrength=r,this.requiredDefense=l,this.cost=i,this.troops=u,this.finish=o}return e.prototype.clone=function(){return new e(this.mission,this.time,this.description,this.requiredStrength,this.requiredDefense,this.cost,this.finish,this.troops)},e}(),nE=function(){function e(e,n,t,r,l,i,o){var u=this;this.resourcesService=e,this.modalService=n,this.logService=t,this.soundService=r,this.calendarService=l,this.effectsService=i,this.servicesService=o,this.missions=[],this.troops=[],this.missionsInProgress=[],this.recruits=[],this.barracksSize=0,this.invasionThreat=0,this.defense=0,this.enemyPower=0,this.incomingAttack=0,this.invasionEvaluation=10,this.stashSize=0,this.recruitsUpdate=new L,this.missionsUpdate=new L,o.addService(Nu.ARMY,this),this.init(),this.calendarService.registerForDayChange().subscribe(function(e){u.getEnemyInvasionPower()>u.getDefenseStrength()+u.defense+u.resourcesService.getTotalPeople()/2&&(u.invasionThreat+=u.resourcesService.getResourcesValue()/(100*Yu)),u.invasionEvaluation-=1,u.invasionEvaluation<=0&&0===u.incomingAttack&&(u.invasionEvaluation=10,Mu.chance((u.invasionThreat-u.defense)/100)&&(u.incomingAttack=Mu.randomBetween(20,50),u.invasionThreat=0,u.logService.warning("Incoming attack in "+u.incomingAttack+" days!"),u.soundService.playTownBells())),u.incomingAttack>0&&(u.incomingAttack-=1,0===u.incomingAttack&&u.calculateInvasion()),u.enemyPower+=10/Yu})}return e.prototype.init=function(){var e=this;this.missions=[],this.missionsInProgress=[],this.troops=[],Array.from(Object.entries(ls.MISSIONS)).forEach(function(n){var t=new Map;n[1].COST.forEach(function(e){return t.set(e.resource,e.amount)}),e.missions.push(new eE(Ru[n[0]],n[1].TIME,n[1].DESCRIPTION,n[1].REQUIRED_STRENGTH,n[1].REQUIRED_DEFENSE,t,n[1].FINISH))}),Array.from(Object.entries(ls.TROOPS)).forEach(function(n){var t=new Map;n[1].COST.forEach(function(e){return t.set(e.resource,e.amount)}),e.troops.push([new JS(Iu[n[0]],n[1].RECRUIT_TIME,n[1].STRENGTH,n[1].DEFENSE,t),0])})},e.prototype.tick=function(e){var n=this;this.missionsInProgress.forEach(function(e){e[1]+=.1,e[1]>=e[0].time&&(n.missions.find(function(n){return n.mission===e[0].mission}).finish(n.servicesService,e[0],n.enemyPower),e[0].troops.forEach(function(e){n.troops.find(function(n){return n[0].troop===e[0].troop})[1]+=e[1]}),n.logService.log(Au.prepareMissionName(e[0].mission)+" finished"))}),this.missionsInProgress=this.missionsInProgress.filter(function(e){return e[1]<e[0].time}),this.missionsUpdate.next()},e.prototype.getEnemyInvasionPower=function(){return Math.floor(this.enemyPower/10)},e.prototype.calculateInvasion=function(){var e=this;this.logService.warning("INVASION");for(var n=this.getEnemyInvasionPower(),t=this.generateArmyOfPower(n),r=function(){var e=l.getRandomTroop(l.troops),n=l.getRandomTroop(t),r=n.strength-e.defense*l.getTroopEffectsMultiplier(e.troop),i=50;r>0?(i+=2*r)>90&&(i=90):(i-=2*r)<10&&(i=10),Mu.chance(i/100)?l.troops.find(function(n){return n[0].troop===e.troop})[1]-=1:(t.find(function(e){return e[0].troop===n.troop})[1]-=1,t=t.filter(function(e){return e[1]>0}))},l=this;t.length>0&&this.hasTroops(this.troops);)r();if(t.length>0){var i=0;t.forEach(function(e){return i+=e[0].strength*e[1]*20});for(var o="<br>",u=[],s=function(){var n=Array.from(a.resourcesService.getResources().values()).filter(function(n){return n.amount>e.stashSize}),t=Mu.randomExcept(n,[]);if(void 0===t)return i=0,"break";var r=rs.getResource(t.resource),l=0;l=Mu.randomBetween(1,r.TRADE_VALUE<10?20:r.TRADE_VALUE<50?10:r.TRADE_VALUE<300?5:2),t.amount-a.stashSize<l&&(l=t.amount-a.stashSize),i-=r.TRADE_VALUE*l;var o=u.find(function(e){return e.resource===t.resource});o?o.amount+=l:u.push({resource:t.resource,amount:l}),a.resourcesService.decreaseResource(t.resource,l,"Invasion",!0)},a=this;i>0&&"break"!==s(););u.forEach(function(e){o+="&emsp;"+e.amount+" "+Au.prepareResourceName(e.resource)+"<br>"}),this.logService.log(u.length>0?"We have been plundered: "+o:"We have been invaded but nothing has been stolen")}else this.logService.log("Invading forces have been defeated"),this.reduceEnemyPower(n)},e.prototype.reduceEnemyPower=function(e){this.enemyPower-=e,this.enemyPower<10&&(this.enemyPower=10)},e.prototype.getTroopEffectsValue=function(e){var n=0;return this.effectsService.getArmyEffects().filter(function(n){return null===n.troop||n.troop===e}).forEach(function(e){return n+=e.effect}),n},e.prototype.getTroopEffectsMultiplier=function(e){return 1+this.getTroopEffectsValue(e)/100},e.prototype.getRandomTroop=function(e){var n=e.filter(function(e){return e[1]>0});return n[Mu.randomBetween(0,n.length-1)][0]},e.prototype.hasTroops=function(e){var n=!1;return e.forEach(function(e){e[1]>0&&(n=!0)}),n},e.prototype.generateArmyOfPower=function(e){for(var n=[],t=function(){var t=Mu.randomElement([{item:Iu.MILITIA,chance:40},{item:Iu.SPEARMAN,chance:30},{item:Iu.ARCHER,chance:20},{item:Iu.SWORDSMAN,chance:10}]),r=ls.getTroop(t),l=r.DEFENSE+r.STRENGTH,i=n.find(function(e){return e[0].troop===t});i?i[1]+=1:n.push([new JS(t,0,r.STRENGTH,r.DEFENSE,null,1),1]),e-=l};e>0;)t();return n},e.prototype.load=function(e){var n=this;this.barracksSize=e.barracksSize,this.invasionThreat=e.invasionThreat,this.defense=e.defense,this.enemyPower=e.enemyPower,this.invasionEvaluation=e.invasionEvaluation,this.incomingAttack=e.incomingAttack,this.stashSize=e.stashSize,e.troops.forEach(function(e){var t=n.troops.find(function(n){return n[0].troop===e[0]});t&&(t[1]=e[1])}),this.recruits=[],e.recruits.forEach(function(e){var t=n.troops.find(function(n){return n[0].troop===e[0]});t&&n.recruits.push([t[0],e[1],e[2]])}),this.missionsInProgress=[],e.missionsInProgress.forEach(function(e){var t=n.missions.find(function(n){return n.mission===e[0]});t&&(e.length<5&&(e.push(0),e.push(0),e.push([])),t.squadDefense=e[2],t.squadStrength=e[3],t.troops=[],e[4].forEach(function(e){var r=n.troops.find(function(n){return n[0].troop===e[0]});r&&t.troops.push([new JS(r[0].troop,0,r[0].strength,r[0].defense),e[1]])}),n.missionsInProgress.push([t,e[1]]))})},e.prototype.save=function(){var e=[];this.troops.forEach(function(n){return e.push([n[0].troop,n[1]])});var n=[];this.recruits.forEach(function(e){return n.push([e[0].troop,e[1],e[2]])});var t=[];return this.missionsInProgress.forEach(function(e){var n=[];e[0].troops.forEach(function(e){return n.push([e[0].troop,e[1]])}),t.push([e[0].mission,e[1],e[0].squadDefense,e[0].squadStrength,n])}),{barracksSize:this.barracksSize,troops:e,missionsInProgress:t,recruits:n,invasionThreat:this.invasionThreat,defense:this.defense,enemyPower:this.enemyPower,invasionEvaluation:this.invasionEvaluation,incomingAttack:this.incomingAttack,stashSize:this.stashSize}},e.prototype.reset=function(e,n){this.missions=[],this.troops=[],this.missionsInProgress=[],this.recruits=[],this.barracksSize=0,this.invasionThreat=0,this.defense=0,this.enemyPower=0,this.incomingAttack=0,this.invasionEvaluation=10,this.stashSize=0,this.init()},e.prototype.progressRecruitment=function(e){var n=this;this.recruits.length>0&&(this.recruits[0][2]+=e,this.recruits[0][2]>=this.recruits[0][0].recruitTime&&(this.troops.find(function(e){return e[0].troop===n.recruits[0][0].troop})[1]+=1,this.recruits[0][1]-=1,this.recruits[0][2]=0,0===this.recruits[0][1]&&this.recruits.shift()),this.recruitsUpdate.next())},e.prototype.recruit=function(e,n){this.getFreeBarracks()>=n?this.resourcesService.getPeople()>=n?this.resourcesService.decreaseResources(e.cost,"Army",!0,n)&&(this.resourcesService.removeRecruit(n),this.recruits.push([e,n,0])):this.modalService.info("Not enough unemployed people to recruit!"):this.modalService.info("Not enough space in barracks for so many recruits")},e.prototype.getRecruits=function(){return this.recruits},e.prototype.getMissions=function(){return this.missions},e.prototype.getCurrentMissions=function(){return this.missionsInProgress},e.prototype.getTroops=function(){return this.troops},e.prototype.getArmySize=function(){var e=0;return this.troops.forEach(function(n){return e+=n[1]}),this.recruits.forEach(function(n){return e+=n[1]}),this.missionsInProgress.forEach(function(n){n[0].troops.forEach(function(n){return e+=n[1]})}),e},e.prototype.getFreeBarracks=function(){return this.barracksSize-this.getArmySize()},e.prototype.increaseBarracks=function(e){this.barracksSize+=e},e.prototype.decreaseBarracks=function(e){this.barracksSize-=e},e.prototype.getBarracksSize=function(){return this.barracksSize},e.prototype.getDefenseStrength=function(){var e=this.defense;return this.troops.forEach(function(n){return e+=n[0].defense*n[1]}),e},e.prototype.getInvasionThreat=function(){return Math.floor(this.invasionThreat)},e.prototype.increaseDefense=function(e){this.defense+=e},e.prototype.decreaseDefense=function(e){this.defense-=e},e.prototype.hasRecruits=function(){return this.recruits.length>0},e.prototype.registerForRecruitsUpdate=function(){return this.recruitsUpdate.asObservable()},e.prototype.registerForMissionsUpdate=function(){return this.missionsUpdate.asObservable()},e.prototype.getAttackStrength=function(){var e=0;return this.troops.forEach(function(n){return e+=n[0].strength*n[1]}),e},e.prototype.startMission=function(e){var n=this;this.modalService.open(mu.MISSION),this.modalService.setMission(e);var t=this.modalService.registerForMissionResponse().subscribe(function(e){if(t.unsubscribe(),null!=e){var r=!0,l=0,i=0,o=0;if(e.troops.forEach(function(e){if(l+=e[1],i+=e[1]*e[0].strength*n.getTroopEffectsMultiplier(e[0].troop),o+=e[1]*e[0].defense*n.getTroopEffectsMultiplier(e[0].troop),r){var t=n.troops.find(function(n){return n[0].troop===e[0].troop});e[1]>t[1]&&(r=!1,n.modalService.info("You don't have so many "+Au.prepareTroopName(t[0].troop)))}}),0===l?(n.modalService.info("You cannot start mission without any troops"),r=!1):i<e.requiredStrength?(n.modalService.info("Selected troops don't meet strength requirement"),r=!1):o<e.requiredDefense&&(n.modalService.info("Selected troops don't meet defense requirement"),r=!1),!r)return;if(!n.resourcesService.decreaseResources(e.cost,"Army",!0,l))return void n.modalService.info("You don't have enough resources to start this mission");e.troops.forEach(function(e){n.troops.find(function(n){return n[0].troop===e[0].troop})[1]-=e[1]}),n.missionsInProgress.push([e,0])}})},e.prototype.addMilitia=function(e){this.troops.find(function(e){return e[0].troop===Iu.MILITIA})[1]+=e},e.prototype.decreaseInvasionThreat=function(e){this.invasionThreat-=e},e.prototype.increaseStash=function(e){this.stashSize+=e},e.prototype.decreaseStash=function(e){this.stashSize-=e},e.prototype.getEnemyPower=function(){return this.enemyPower},e.ngInjectableDef=ve({factory:function(){return new e(ze(Lg),ze(Ig),ze(_g),ze(Dm),ze(Cg),ze(Qg),ze(Sg))},token:e,providedIn:"root"}),e}(),tE=function(){function e(e,n){this.armyService=e,this.resourcesService=n,this.id=Math.random(),this.progress=0,this.multiplier=0}return e.prototype.ngOnInit=function(){var e=this;this.updateSubscription=this.armyService.registerForRecruitsUpdate().subscribe(function(){e.progressRef&&(e.progressRef.nativeElement.style.width=e.progress/e.troop.recruitTime*100+"%")})},e.prototype.ngAfterViewInit=function(){this.progressRef&&(this.progressRef.nativeElement.style.width=this.progress/this.troop.recruitTime*100+"%")},e.prototype.getTroopName=function(){return Iu[this.troop.troop]},e.prototype.getResourceName=function(e){return Au.prepareResourceName(e)},e.prototype.getCost=function(){return this.troop.cost},e.prototype.checkResource=function(e){return 0===this.resourcesService.hasResource(e.key,e.value*this.multiplier,"Army",!0)},e.prototype.isAvailable=function(){return this.resourcesService.hasResources(this.troop.cost,"Army",this.multiplier,!0)},e}(),rE=gl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{position:relative;display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #000;font-size:1.2em}#wrapperNotAvailable[_ngcontent-%COMP%]{position:relative;display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #57575a;font-size:1.2em}#text[_ngcontent-%COMP%]{position:relative;z-index:2}#textNotAvailable[_ngcontent-%COMP%]{position:relative;z-index:2;color:#57575a}#progressId[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background-color:var(--active-colour);z-index:1}hr[_ngcontent-%COMP%]{border-color:#000}.costTitle[_ngcontent-%COMP%], .statsTitle[_ngcontent-%COMP%]{text-align:left}.tooltipSpan[_ngcontent-%COMP%]{min-width:125px}.missing[_ngcontent-%COMP%]{color:#8b0000}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center}"]],data:{}});function lE(e){return so(0,[(e()(),Yl(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),io(1,null,["",""]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.value*n.component.multiplier)})}function iE(e){return so(0,[(e()(),Yl(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),Yl(1,0,null,null,1,"div",[["class","missing"]],null,null,null,null,null)),(e()(),io(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.value*n.component.multiplier)})}function oE(e){return so(0,[(e()(),Yl(0,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),Yl(1,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,lE)),Mi(3,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,iE)),Mi(5,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(6,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(7,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){var t=n.component;e(n,3,0,t.checkResource(n.context.$implicit)),e(n,5,0,!t.checkResource(n.context.$implicit)),e(n,7,0,t.getResourceName(n.context.$implicit.key),"resources")},null)}function uE(e){return so(0,[(e()(),Yl(0,0,null,null,23,"div",[["appTooltip",""],["class","tooltip"],["id","wrapper"]],null,[[null,"mousemove"]],function(e,n,t){var r=!0;return"mousemove"===n&&(r=!1!==Ei(e,1).onmousemove(t)&&r),r},null,null)),Mi(1,16384,null,0,af,[],{elementId:[0,"elementId"]},null),(e()(),Yl(2,0,[[1,0],["progressId",1]],null,0,"div",[["id","progressId"]],null,null,null,null,null)),(e()(),Yl(3,0,null,null,18,"span",[["class","tooltipSpan"]],[[8,"id",0]],null,null,null,null)),(e()(),io(4,null,[" "," x "," "])),to(5,1),(e()(),Yl(6,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Yl(7,0,null,null,1,"div",[["class","statsTitle"]],null,null,null,null,null)),(e()(),io(-1,null,["Stats (per soldier):"])),(e()(),Yl(9,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Yl(10,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(11,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),io(12,null,[": ",""])),(e()(),Yl(13,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Yl(14,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(15,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),io(16,null,[": ",""])),(e()(),Yl(17,0,null,null,1,"div",[["class","costTitle"]],null,null,null,null,null)),(e()(),io(-1,null,["Cost:"])),(e()(),jl(16777216,null,null,2,null,oE)),Mi(20,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null),ki(0,Ks,[Vr]),(e()(),Yl(22,0,null,null,1,"div",[["id","text"]],null,null,null,null,null)),(e()(),io(23,null,[""," - ",""]))],function(e,n){var t=n.component;e(n,1,0,t.id),e(n,11,0,"attack","army"),e(n,15,0,"defense","army"),e(n,20,0,hl(n,20,0,Ei(n,21).transform(t.getCost())))},function(e,n){var t=n.component;e(n,3,0,Vl(1,"",t.id,""));var r=t.multiplier,l=hl(n,4,1,e(n,5,0,Ei(n.parent,0),t.getTroopName()));e(n,4,0,r,l),e(n,12,0,t.troop.strength),e(n,16,0,t.troop.defense),e(n,23,0,t.getTroopName(),t.count)})}function sE(e){return so(0,[(e()(),Yl(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),io(1,null,["",""]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.value*n.component.multiplier)})}function aE(e){return so(0,[(e()(),Yl(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),Yl(1,0,null,null,1,"div",[["class","missing"]],null,null,null,null,null)),(e()(),io(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.value*n.component.multiplier)})}function cE(e){return so(0,[(e()(),Yl(0,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),Yl(1,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,sE)),Mi(3,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,aE)),Mi(5,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(6,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(7,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){var t=n.component;e(n,3,0,t.checkResource(n.context.$implicit)),e(n,5,0,!t.checkResource(n.context.$implicit)),e(n,7,0,t.getResourceName(n.context.$implicit.key),"resources")},null)}function pE(e){return so(0,[(e()(),Yl(0,0,null,null,23,"div",[["appTooltip",""],["class","tooltip"],["id","wrapperNotAvailable"]],null,[[null,"mousemove"]],function(e,n,t){var r=!0;return"mousemove"===n&&(r=!1!==Ei(e,1).onmousemove(t)&&r),r},null,null)),Mi(1,16384,null,0,af,[],{elementId:[0,"elementId"]},null),(e()(),Yl(2,0,[[1,0],["progressId",1]],null,0,"div",[["id","progressId"]],null,null,null,null,null)),(e()(),Yl(3,0,null,null,18,"span",[["class","tooltipSpan"]],[[8,"id",0]],null,null,null,null)),(e()(),io(4,null,[" "," x "," "])),to(5,1),(e()(),Yl(6,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Yl(7,0,null,null,1,"div",[["class","statsTitle"]],null,null,null,null,null)),(e()(),io(-1,null,["Stats (per soldier):"])),(e()(),Yl(9,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Yl(10,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(11,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),io(12,null,[": ",""])),(e()(),Yl(13,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Yl(14,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(15,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),io(16,null,[": ",""])),(e()(),Yl(17,0,null,null,1,"div",[["class","costTitle"]],null,null,null,null,null)),(e()(),io(-1,null,["Cost:"])),(e()(),jl(16777216,null,null,2,null,cE)),Mi(20,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null),ki(0,Ks,[Vr]),(e()(),Yl(22,0,null,null,1,"div",[["id","textNotAvailable"]],null,null,null,null,null)),(e()(),io(23,null,[""," - ",""]))],function(e,n){var t=n.component;e(n,1,0,t.id),e(n,11,0,"attack","army"),e(n,15,0,"defense","army"),e(n,20,0,hl(n,20,0,Ei(n,21).transform(t.getCost())))},function(e,n){var t=n.component;e(n,3,0,Vl(1,"",t.id,""));var r=t.multiplier,l=hl(n,4,1,e(n,5,0,Ei(n.parent,0),t.getTroopName()));e(n,4,0,r,l),e(n,12,0,t.troop.strength),e(n,16,0,t.troop.defense),e(n,23,0,t.getTroopName(),t.count)})}function hE(e){return so(0,[ki(0,zs,[]),Qi(671088640,1,{progressRef:0}),(e()(),jl(16777216,null,null,1,null,uE)),Mi(3,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,pE)),Mi(5,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,3,0,t.isAvailable()),e(n,5,0,!t.isAvailable())},null)}var dE=function(){function e(e){this.armyService=e,this.progress=0,this.id=Math.random()}return e.prototype.ngOnInit=function(){var e=this;this.updateSubscription=this.armyService.registerForMissionsUpdate().subscribe(function(){e.progressRef&&(e.progressRef.nativeElement.style.width=e.progress/e.mission.time*100+"%")})},e.prototype.ngAfterViewInit=function(){this.progressRef&&(this.progressRef.nativeElement.style.width=this.progress/this.mission.time*100+"%")},e.prototype.getMissionName=function(e){return Ru[e]},e}(),fE=gl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #000;font-size:1.2em}#text[_ngcontent-%COMP%]{position:relative;z-index:2}#progressId[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background-color:var(--active-colour);z-index:1}"]],data:{}});function gE(e){return so(0,[Qi(402653184,1,{progressRef:0}),(e()(),Yl(1,0,null,null,6,"div",[["appTooltip",""],["class","tooltip"],["id","wrapper"]],null,[[null,"mousemove"]],function(e,n,t){var r=!0;return"mousemove"===n&&(r=!1!==Ei(e,2).onmousemove(t)&&r),r},null,null)),Mi(2,16384,null,0,af,[],{elementId:[0,"elementId"]},null),(e()(),Yl(3,0,[[1,0],["progressId",1]],null,0,"div",[["id","progressId"]],null,null,null,null,null)),(e()(),Yl(4,0,null,null,1,"div",[["id","text"]],null,null,null,null,null)),(e()(),io(5,null,["",""])),(e()(),Yl(6,0,null,null,1,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),io(7,null,[" "," "]))],function(e,n){e(n,2,0,n.component.id)},function(e,n){var t=n.component;e(n,5,0,t.getMissionName(t.mission.mission)),e(n,6,0,Vl(1,"",t.id,"")),e(n,7,0,t.mission.description)})}var vE=function(e){function n(n,t,r,l){return e.call(this,t,n,r,l,ku.FORT,Nu.FORT)||this}return l(n,e),n.ngInjectableDef=ve({factory:function(){return new n(ze(Lg),ze(lS),ze(Sg),ze(iS))},token:n,providedIn:"root"}),n}(oS),mE=function(){function e(e,n,t,r){this.armyService=e,this.resourcesService=n,this.fortService=t,this.changeDetectorRef=r,this.selection=1}return e.prototype.ngOnInit=function(){var e=this;this.armyService.registerForRecruitsUpdate().subscribe(function(){e.changeDetectorRef.destroyed||e.changeDetectorRef.detectChanges()})},e.prototype.changeSelection=function(e){this.selection=e},e.prototype.getMissions=function(){return this.armyService.getMissions()},e.prototype.getCurrentMissions=function(){return this.armyService.getCurrentMissions()},e.prototype.getTroops=function(){return this.armyService.getTroops()},e.prototype.getRecruits=function(){return this.armyService.getRecruits()},e.prototype.recruit=function(e){this.armyService.recruit(e,this.selection)},e.prototype.isDev=function(){return!Gu.production},e.prototype.progress=function(){this.armyService.progressRecruitment(10)},e.prototype.getBarracksSize=function(){return this.armyService.getBarracksSize()},e.prototype.getTroopsSize=function(){return this.armyService.getArmySize()},e.prototype.getUnemployed=function(){return this.resourcesService.getPeople()},e.prototype.getDefenseStrength=function(){return this.armyService.getDefenseStrength()},e.prototype.getInvasionThreat=function(){return this.armyService.getInvasionThreat()},e.prototype.getAttackStrength=function(){return this.armyService.getAttackStrength()},e.prototype.startMission=function(e){this.armyService.startMission(e)},e.prototype.checkForTrainingSquare=function(){return void 0!==this.fortService.getBuildings().find(function(e){return e.getBuildingType()===bu.TRAINING_SQUARE})},e}(),yE=gl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{margin:.7%;height:100%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#categories[_ngcontent-%COMP%]{display:flex;flex-direction:row;border:1px solid #000;height:91.5%;text-align:center}.category[_ngcontent-%COMP%]{text-align:center;flex:0 0 33%;display:flex;flex-direction:column;border:1px solid #000;align-items:center}.category2[_ngcontent-%COMP%]{flex:auto;display:flex;flex-direction:column;border:1px solid #000}.recruits[_ngcontent-%COMP%]{text-align:center;flex:0 0 50%;display:flex;flex-direction:column;align-items:center;overflow-y:auto;overflow-x:hidden;border-bottom:1px solid #000}.missionsInProgress[_ngcontent-%COMP%]{text-align:center;flex:0 0 50%;display:flex;flex-direction:column;align-items:center;overflow-y:auto;overflow-x:hidden}.category3[_ngcontent-%COMP%]:last-of-type{border-top:1px solid #000}.title[_ngcontent-%COMP%]{padding:2px;width:100%;font-weight:bolder;font-size:.9em;margin-bottom:5px;display:block;border-bottom:1px solid #000}#numbers[_ngcontent-%COMP%]{margin-top:-6px;padding:0;margin-bottom:5px}.number[_ngcontent-%COMP%]{border:1px solid #000;padding:2px 4px;background-color:var(--passive-colour);font-size:.75em;cursor:pointer}.active[_ngcontent-%COMP%], .number[_ngcontent-%COMP%]:hover{background-color:var(--active-colour)}app-mission[_ngcontent-%COMP%]{display:inline-block;margin:4px;width:75%;font-size:.7em}app-troop[_ngcontent-%COMP%]{display:inline-block;margin:4px;width:75%;font-size:.7em;cursor:pointer}.mission[_ngcontent-%COMP%]{cursor:pointer}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}#noTrainingSquare[_ngcontent-%COMP%]{margin-left:20px;color:#8b0000}"]],data:{}});function SE(e){return so(0,[(e()(),Yl(0,0,null,null,1,"span",[["id","noTrainingSquare"]],null,null,null,null,null)),(e()(),io(-1,null,["No Training square available. Recruits won't train"]))],null,null)}function EE(e){return so(0,[(e()(),Yl(0,0,null,null,1,"span",[["class","number"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.changeSelection(1)&&r),r},null,null)),(e()(),io(-1,null,["1x"]))],null,null)}function bE(e){return so(0,[(e()(),Yl(0,0,null,null,1,"span",[["class","number active"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.changeSelection(1)&&r),r},null,null)),(e()(),io(-1,null,["1x"]))],null,null)}function OE(e){return so(0,[(e()(),Yl(0,0,null,null,1,"span",[["class","number"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.changeSelection(5)&&r),r},null,null)),(e()(),io(-1,null,["5x"]))],null,null)}function RE(e){return so(0,[(e()(),Yl(0,0,null,null,1,"span",[["class","number active"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.changeSelection(5)&&r),r},null,null)),(e()(),io(-1,null,["5x"]))],null,null)}function TE(e){return so(0,[(e()(),Yl(0,0,null,null,1,"span",[["class","number"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.changeSelection(10)&&r),r},null,null)),(e()(),io(-1,null,["10x"]))],null,null)}function CE(e){return so(0,[(e()(),Yl(0,0,null,null,1,"span",[["class","number active"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.changeSelection(10)&&r),r},null,null)),(e()(),io(-1,null,["10x"]))],null,null)}function _E(e){return so(0,[(e()(),Yl(0,0,null,null,1,"app-troop",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.recruit(e.context.$implicit[0])&&r),r},hE,rE)),Mi(1,4308992,null,0,tE,[nE,Lg],{troop:[0,"troop"],count:[1,"count"],multiplier:[2,"multiplier"]},null)],function(e,n){e(n,1,0,n.context.$implicit[0],n.context.$implicit[1],Vl(1,"",n.component.selection,""))},null)}function IE(e){return so(0,[(e()(),Yl(0,0,null,null,1,"app-mission",[["class","mission"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.startMission(e.context.$implicit)&&r),r},gE,fE)),Mi(1,4308992,null,0,dE,[nE],{mission:[0,"mission"]},null)],function(e,n){e(n,1,0,n.context.$implicit)},null)}function AE(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.progress()&&r),r},null,null)),(e()(),io(-1,null,["recruit"]))],null,null)}function wE(e){return so(0,[(e()(),Yl(0,0,null,null,1,"app-troop",[],null,null,null,hE,rE)),Mi(1,4308992,null,0,tE,[nE,Lg],{troop:[0,"troop"],count:[1,"count"],progress:[2,"progress"]},null)],function(e,n){e(n,1,0,n.context.$implicit[0],n.context.$implicit[1],n.context.$implicit[2])},null)}function NE(e){return so(0,[(e()(),Yl(0,0,null,null,1,"app-mission",[],null,null,null,gE,fE)),Mi(1,4308992,null,0,dE,[nE],{mission:[0,"mission"],progress:[1,"progress"],id:[2,"id"]},null)],function(e,n){e(n,1,0,n.context.$implicit[0],n.context.$implicit[1],n.context.index)},null)}function PE(e){return so(0,[(e()(),Yl(0,0,null,null,57,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Yl(1,0,null,null,1,"div",[["id","title"]],null,null,null,null,null)),(e()(),io(-1,null,["Army"])),(e()(),Yl(3,0,null,null,17,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Yl(4,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(5,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),io(6,null,["\xa0","/"," \xa0\xa0 "])),(e()(),Yl(7,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(8,114688,null,0,cf,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),io(9,null,["\xa0"," \xa0\xa0\xa0 "])),(e()(),Yl(10,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(11,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),io(12,null,["\xa0"," \xa0\xa0\xa0 "])),(e()(),Yl(13,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(14,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),io(15,null,["\xa0"," \xa0\xa0\xa0 "])),(e()(),Yl(16,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(17,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),io(18,null,["\xa0"," "])),(e()(),jl(16777216,null,null,1,null,SE)),Mi(20,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(21,0,null,null,36,"div",[["id","categories"]],null,null,null,null,null)),(e()(),Yl(22,0,null,null,17,"div",[["class","category"]],null,null,null,null,null)),(e()(),Yl(23,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),io(-1,null,["GARRISON"])),(e()(),Yl(25,0,null,null,12,"div",[["id","numbers"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,EE)),Mi(27,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,bE)),Mi(29,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,OE)),Mi(31,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,RE)),Mi(33,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,TE)),Mi(35,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,CE)),Mi(37,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,_E)),Mi(39,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null),(e()(),Yl(40,0,null,null,4,"div",[["class","category"]],null,null,null,null,null)),(e()(),Yl(41,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),io(-1,null,["MISSIONS"])),(e()(),jl(16777216,null,null,1,null,IE)),Mi(44,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null),(e()(),Yl(45,0,null,null,12,"div",[["class","category2"]],null,null,null,null,null)),(e()(),Yl(46,0,null,null,6,"div",[["class","recruits"]],null,null,null,null,null)),(e()(),Yl(47,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),io(-1,null,["RECRUITS"])),(e()(),jl(16777216,null,null,1,null,AE)),Mi(50,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,wE)),Mi(52,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null),(e()(),Yl(53,0,null,null,4,"div",[["class","missionsInProgress"]],null,null,null,null,null)),(e()(),Yl(54,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),io(-1,null,["MISSIONS IN PROGRESS"])),(e()(),jl(16777216,null,null,1,null,NE)),Mi(57,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,5,0,"barracks","army","Barracks"),e(n,8,0,"hammer","Workers","0 0 0 2px"),e(n,11,0,"invasion","army","Invasion threat"),e(n,14,0,"attack","army","Attack strength"),e(n,17,0,"defense","army","Defense strength"),e(n,20,0,!t.checkForTrainingSquare()),e(n,27,0,1!==t.selection),e(n,29,0,1===t.selection),e(n,31,0,5!==t.selection),e(n,33,0,5===t.selection),e(n,35,0,10!==t.selection),e(n,37,0,10===t.selection),e(n,39,0,t.getTroops()),e(n,44,0,t.getMissions()),e(n,50,0,t.isDev()),e(n,52,0,t.getRecruits()),e(n,57,0,t.getCurrentMissions())},function(e,n){var t=n.component;e(n,6,0,t.getTroopsSize(),t.getBarracksSize()),e(n,9,0,t.getUnemployed()),e(n,12,0,t.getInvasionThreat()),e(n,15,0,t.getAttackStrength()),e(n,18,0,t.getDefenseStrength())})}function DE(e){return so(0,[(e()(),Yl(0,0,null,null,1,"app-army",[],null,null,null,PE,yE)),Mi(1,114688,null,0,mE,[nE,Lg,vE,Rr],null,null)],function(e,n){e(n,1,0)},null)}var ME=ai("app-army",mE,DE,{},{},[]),kE=function(){return function(e,n,t,r,l,i){this.prayer=e,this.cost=n,this.requiredFaithLevel=t,this.religion=r,this.description=l,this.effect=i}}(),LE=function(){function e(e,n,t){this.servicesService=e,this.modalService=n,this.resourcesService=t,this.faith=0,this.faithCap=40,this.faithLevel=1,this.faithShield=0,this.religion=_u.NONE,this.prayers=[],e.addService(Nu.RELIGION,this),this.initPrayers()}return e.prototype.initPrayers=function(){var e=this;this.prayers=[],Object.entries(ss.PRAYERS).forEach(function(n){e.prayers.push(new kE(Ou[n[0]],n[1].FAITH,n[1].FAITH_LEVEL,n[1].RELIGION,n[1].DESCRIPTION,n[1].FINISH))})},e.prototype.load=function(e){this.faith=e.faith,this.faithCap=e.faithCap,this.faithLevel=e.faithLevel,this.religion=e.religion,this.faithShield=e.faithShield,this.prayers.find(function(e){return e.prayer===Ou.PREACH}).cost=e.preachCost},e.prototype.save=function(){return{faith:this.faith,faithCap:this.faithCap,faithLevel:this.faithLevel,religion:this.religion,faithShield:this.faithShield,preachCost:this.prayers.find(function(e){return e.prayer===Ou.PREACH}).cost}},e.prototype.reset=function(e,n){this.faith=0,this.faithCap=40,this.faithLevel=1,this.faithShield=0,this.religion=_u.NONE,this.prayers=[],this.initPrayers()},e.prototype.getFaith=function(){return this.faith},e.prototype.increaseFaith=function(e){this.faith+=e,this.faith>this.faithCap&&(this.faith=this.faithCap)},e.prototype.increaseFaithCap=function(e){this.faithCap+=e},e.prototype.decreaseFaithCap=function(e){this.faithCap-=e,this.faith>this.faithCap&&(this.faith=this.faithCap)},e.prototype.decreaseFaith=function(e){return this.faith-e>=0?(this.faith-=e,0):e-this.faith},e.prototype.getFaithCap=function(){return this.faithCap},e.prototype.getPrayers=function(){var e=this;return this.prayers.filter(function(n){return(n.religion===_u.NONE||n.religion===e.religion)&&n.requiredFaithLevel<=e.faithLevel})},e.prototype.pray=function(e){e.cost<=this.faith?(this.faith-=e.cost,e.effect(this.servicesService),e.prayer===Ou.PREACH&&(this.prayers.find(function(e){return e.prayer===Ou.PREACH}).cost+=10)):this.modalService.info("Not enough faith for this prayer!")},e.prototype.increaseFaithLevel=function(e){this.faithLevel+=e},e.prototype.increaseFaithShield=function(e){this.faithShield+=e},e.prototype.decreaseFaithShield=function(e){if(this.faithShield>=e)return this.faithShield-=e,0;var n=e-this.faithShield;return this.faithShield=0,n},e.prototype.getFaithLevel=function(){return this.faithLevel},e.prototype.getFaithShield=function(){return this.faithShield},e.prototype.getCurrentReligion=function(){return this.religion},e.prototype.getReligionSettings=function(e){return ss.getReligion(e)},e.prototype.changeReligion=function(e){var n=this;this.modalService.open(mu.CONFIRM),this.modalService.setModalText("Are you sure you want to change religion?");var t=this.modalService.registerForConfirmation().subscribe(function(r){if(t.unsubscribe(),r){var l=n.getReligionSettings(e);if(n.faith<l.FAITH)return void n.modalService.info("Not enough faith");var i=new Map;if(l.OFFERING.forEach(function(e){return i.set(e.resource,e.amount)}),!n.resourcesService.hasResources(i,"Religion",1,!0))return void n.modalService.info("Not enough offering resources");n.faith-=l.FAITH,n.resourcesService.decreaseResources(i,"Religion",!0),n.religion=e}})},e.ngInjectableDef=ve({factory:function(){return new e(ze(Sg),ze(Ig),ze(Lg))},token:e,providedIn:"root"}),e}(),xE=function(){function e(e){this.religionService=e}return e.prototype.ngOnInit=function(){},e.prototype.getPrayerName=function(){return Au.preparePrayerName(this.prayer.prayer)},e.prototype.isAvailable=function(){return this.religionService.getFaith()>=this.prayer.cost},e}(),FE=gl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{display:inline-block;width:47%;padding:3px;margin:3px;text-align:center;border:1px solid #000}#wrapperNotAvailable[_ngcontent-%COMP%]{display:inline-block;width:47%;padding:3px;margin:3px;text-align:center;border:1px solid #646464}#titleGrey[_ngcontent-%COMP%]{display:inline-block;color:#646464}.notMet[_ngcontent-%COMP%]{color:#8b0000}.title[_ngcontent-%COMP%]{text-align:left}hr[_ngcontent-%COMP%]{border-color:#000}#progress[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background-color:var(--active-colour);z-index:1}#text[_ngcontent-%COMP%]{position:relative;z-index:2}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center}"]],data:{}});function UE(e){return so(0,[(e()(),Yl(0,0,null,null,9,"div",[["appTooltip",""],["class","tooltip"],["id","wrapper"]],null,[[null,"mousemove"]],function(e,n,t){var r=!0;return"mousemove"===n&&(r=!1!==Ei(e,1).onmousemove(t)&&r),r},null,null)),Mi(1,16384,null,0,af,[],{elementId:[0,"elementId"]},null),(e()(),Yl(2,0,null,null,1,"div",[["id","title"]],null,null,null,null,null)),(e()(),io(3,null,["",""])),(e()(),Yl(4,0,null,null,5,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),io(5,null,[" "," "])),(e()(),Yl(6,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),io(7,null,[" "," "])),(e()(),Yl(8,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(9,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){e(n,1,0,n.component.id),e(n,9,0,"faith","religion")},function(e,n){var t=n.component;e(n,3,0,t.getPrayerName()),e(n,4,0,Vl(1,"",t.id,"")),e(n,5,0,t.prayer.description),e(n,7,0,t.prayer.cost)})}function HE(e){return so(0,[(e()(),Yl(0,0,null,null,10,"div",[["appTooltip",""],["class","tooltip"],["id","wrapperNotAvailable"]],null,[[null,"mousemove"]],function(e,n,t){var r=!0;return"mousemove"===n&&(r=!1!==Ei(e,1).onmousemove(t)&&r),r},null,null)),Mi(1,16384,null,0,af,[],{elementId:[0,"elementId"]},null),(e()(),Yl(2,0,null,null,1,"div",[["id","titleGrey"]],null,null,null,null,null)),(e()(),io(3,null,["",""])),(e()(),Yl(4,0,null,null,6,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),io(5,null,[" "," "])),(e()(),Yl(6,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Yl(7,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),io(8,null,[" "," "])),(e()(),Yl(9,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(10,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){e(n,1,0,n.component.id),e(n,10,0,"faith","religion")},function(e,n){var t=n.component;e(n,3,0,t.getPrayerName()),e(n,4,0,Vl(1,"",t.id,"")),e(n,5,0,t.prayer.description),e(n,8,0,t.prayer.cost)})}function GE(e){return so(0,[(e()(),jl(16777216,null,null,1,null,UE)),Mi(1,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,HE)),Mi(3,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.isAvailable()),e(n,3,0,!t.isAvailable())},null)}var BE=function(){function e(e,n){this.religionService=e,this.resourcesService=n}return e.prototype.ngOnInit=function(){},e.prototype.getFaith=function(){return this.religionService.getFaith()},e.prototype.getFaithCap=function(){return this.religionService.getFaithCap()},e.prototype.increaseFaith=function(e){this.religionService.increaseFaith(e)},e.prototype.isDev=function(){return!Gu.production},e.prototype.getPrayers=function(){return this.religionService.getPrayers()},e.prototype.pray=function(e){this.religionService.pray(e)},e.prototype.getFaithShield=function(){return Au.round(this.religionService.getFaithShield(),2)},e.prototype.getReligions=function(){return[_u.NONE,_u.FERTILITY,_u.NATURE,_u.TECHNOLOGY,_u.WAR]},e.prototype.getReligionName=function(e){return Au.prepareReligionName(e)},e.prototype.getCurrentReligion=function(){return this.religionService.getCurrentReligion()},e.prototype.getCurrentReligionName=function(){return _u[this.getCurrentReligion()]},e.prototype.getCurrentReligionDisplayName=function(){return Au.prepareReligionName(this.getCurrentReligion())},e.prototype.changeReligion=function(e){this.religionService.changeReligion(e)},e.prototype.getReligionSettings=function(e){return ss.getReligion(e)},e.prototype.getResourceString=function(e){return vu[e]},e.prototype.hasResource=function(e){return 0===this.resourcesService.hasResource(e.resource,e.amount,"Religion",!0)},e}(),VE=gl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:100%;margin:.5%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#table[_ngcontent-%COMP%]{display:flex;flex-direction:row;border:1px solid #000;height:85%}.column[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:auto;border:1px solid #000}#prayers[_ngcontent-%COMP%]{flex:0 0 70%;overflow-y:auto}#religions[_ngcontent-%COMP%]{flex:1 0 auto;overflow-y:auto}.prayer[_ngcontent-%COMP%]{display:inline}.tableTitle[_ngcontent-%COMP%]{border-bottom:1px solid #000;text-align:center}app-prayer[_ngcontent-%COMP%]{cursor:pointer}.faith[_ngcontent-%COMP%]{margin-right:-2px}.religion[_ngcontent-%COMP%]{border:1px solid #000;text-align:center;margin:3px;cursor:pointer}.active[_ngcontent-%COMP%]{background-color:var(--active-colour);cursor:auto}.tooltip[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:100px}.notMet[_ngcontent-%COMP%]{color:#8b0000}.inline[_ngcontent-%COMP%]{display:inline}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.icon2[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center}"]],data:{}});function WE(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.increaseFaith(10)&&r),r},null,null)),(e()(),io(-1,null,["Increase faith"]))],null,null)}function jE(e){return so(0,[(e()(),Yl(0,0,null,null,2,"div",[["class","prayer"]],null,null,null,null,null)),(e()(),Yl(1,0,null,null,1,"app-prayer",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.pray(e.context.$implicit)&&r),r},GE,FE)),Mi(2,114688,null,0,xE,[LE],{prayer:[0,"prayer"],id:[1,"id"]},null)],function(e,n){e(n,2,0,n.context.$implicit,n.context.index)},null)}function YE(e){return so(0,[(e()(),Yl(0,0,null,null,1,"div",[["class","religion active"]],null,null,null,null,null)),(e()(),io(1,null,[" "," "]))],null,function(e,n){e(n,1,0,n.component.getReligionName(n.parent.context.$implicit))})}function zE(e){return so(0,[(e()(),Yl(0,0,null,null,1,"div",[["class","inline"]],null,null,null,null,null)),(e()(),io(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.getReligionSettings(n.parent.parent.context.$implicit).FAITH)})}function KE(e){return so(0,[(e()(),Yl(0,0,null,null,1,"div",[["class","inline notMet"]],null,null,null,null,null)),(e()(),io(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.getReligionSettings(n.parent.parent.context.$implicit).FAITH)})}function qE(e){return so(0,[(e()(),Yl(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),io(-1,null,["offering:"]))],null,null)}function $E(e){return so(0,[(e()(),Yl(0,0,null,null,1,"div",[["class","inline"]],null,null,null,null,null)),(e()(),io(1,null,[""," "]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.amount)})}function QE(e){return so(0,[(e()(),Yl(0,0,null,null,1,"div",[["class","inline notMet"]],null,null,null,null,null)),(e()(),io(1,null,[""," "]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.amount)})}function ZE(e){return so(0,[(e()(),Yl(0,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),Yl(1,0,null,null,6,"div",[["class","icon2"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,$E)),Mi(3,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,QE)),Mi(5,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(6,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(7,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){var t=n.component;e(n,3,0,t.hasResource(n.context.$implicit)),e(n,5,0,!t.hasResource(n.context.$implicit)),e(n,7,0,t.getResourceString(n.context.$implicit.resource),"resources")},null)}function XE(e){return so(0,[(e()(),Yl(0,0,null,null,16,"div",[["appTooltip",""],["class","religion tooltip"]],null,[[null,"click"],[null,"mousemove"]],function(e,n,t){var r=!0,l=e.component;return"mousemove"===n&&(r=!1!==Ei(e,1).onmousemove(t)&&r),"click"===n&&(r=!1!==l.changeReligion(e.parent.context.$implicit)&&r),r},null,null)),Mi(1,16384,null,0,af,[],{elementId:[0,"elementId"]},null),(e()(),io(2,null,[" "," "])),(e()(),Yl(3,0,null,null,13,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),io(4,null,[" "," "])),(e()(),Yl(5,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Yl(6,0,null,null,6,"div",[["class","icon2"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,zE)),Mi(8,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,KE)),Mi(10,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(11,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(12,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),jl(16777216,null,null,1,null,qE)),Mi(14,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,ZE)),Mi(16,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,1,0,0-n.parent.context.$implicit),e(n,8,0,t.getFaith()>=t.getReligionSettings(n.parent.context.$implicit).FAITH),e(n,10,0,t.getFaith()<t.getReligionSettings(n.parent.context.$implicit).FAITH),e(n,12,0,"faith","religion"),e(n,14,0,t.getReligionSettings(n.parent.context.$implicit).OFFERING.length>0),e(n,16,0,t.getReligionSettings(n.parent.context.$implicit).OFFERING)},function(e,n){var t=n.component;e(n,2,0,t.getReligionName(n.parent.context.$implicit)),e(n,3,0,Vl(1,"",0-n.parent.context.$implicit,"")),e(n,4,0,t.getReligionName(n.parent.context.$implicit))})}function JE(e){return so(0,[(e()(),Yl(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,YE)),Mi(2,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,XE)),Mi(4,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,n.context.$implicit===t.getCurrentReligion()),e(n,4,0,n.context.$implicit!==t.getCurrentReligion())},null)}function eb(e){return so(0,[(e()(),Yl(0,0,null,null,32,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Yl(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),Yl(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["Religion"])),(e()(),Yl(4,0,null,null,9,"div",[],null,null,null,null,null)),(e()(),Yl(5,0,null,null,1,null,null,null,null,null,null,null)),(e()(),io(-1,null,["Faith"])),(e()(),Yl(7,0,null,null,1,"app-icon",[["class","faith"]],null,null,null,hf,pf)),Mi(8,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Yl(9,0,null,null,1,null,null,null,null,null,null,null)),(e()(),io(-1,null,[":"])),(e()(),io(11,null,[" ","/"," "])),(e()(),jl(16777216,null,null,1,null,WE)),Mi(13,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(14,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),io(-1,null,[" Faith shield "])),(e()(),Yl(16,0,null,null,1,"app-icon",[["class","prayer"]],null,null,null,hf,pf)),Mi(17,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),io(18,null,[" : "," "])),(e()(),Yl(19,0,null,null,13,"div",[["id","table"]],null,null,null,null,null)),(e()(),Yl(20,0,null,null,7,"div",[["class","column"],["id","prayers"]],null,null,null,null,null)),(e()(),Yl(21,0,null,null,3,"span",[["class","tableTitle"]],null,null,null,null,null)),(e()(),io(-1,null,[" Prayers "])),(e()(),Yl(23,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(24,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),Yl(25,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,jE)),Mi(27,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null),(e()(),Yl(28,0,null,null,4,"div",[["class","column"],["id","religions"]],null,null,null,null,null)),(e()(),Yl(29,0,null,null,1,"span",[["class","tableTitle"]],null,null,null,null,null)),(e()(),io(-1,null,["Religions"])),(e()(),jl(16777216,null,null,1,null,JE)),Mi(32,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,8,0,"faith","religion"),e(n,13,0,t.isDev()),e(n,17,0,"faith_shield","religion","Faith shield"),e(n,24,0,t.getCurrentReligionName(),"religion",t.getCurrentReligionDisplayName()),e(n,27,0,t.getPrayers()),e(n,32,0,t.getReligions())},function(e,n){var t=n.component;e(n,11,0,t.getFaith(),t.getFaithCap()),e(n,18,0,t.getFaithShield())})}function nb(e){return so(0,[(e()(),Yl(0,0,null,null,1,"app-religion",[],null,null,null,eb,VE)),Mi(1,114688,null,0,BE,[LE,Lg],null,null)],function(e,n){e(n,1,0)},null)}var tb=ai("app-religion",BE,nb,{},{},[]),rb=function(){function e(e,n,t){this.servicesService=e,this.calendarService=n,this.optionsService=t,this.forecastPeriod=1,this.forecast=[],e.addService(Nu.WEATHER,this),this.tick(0)}return e.prototype.load=function(e){this.forecastPeriod=void 0!==e.forecastPeriod?e.forecastPeriod:1,this.forecast=e.forecast},e.prototype.save=function(){return{forecastPeriod:this.forecastPeriod,forecast:this.forecast}},e.prototype.reset=function(e,n){this.forecastPeriod=1,this.forecast=[],this.today=null,this.tick(0)},e.prototype.tick=function(e){for(var n=this.calendarService.getAbsoluteDay();this.forecast.length>0&&this.forecast[0][0]<n;)this.forecast.shift();for(;this.forecast.length<this.forecastPeriod;){var t=n;0!==this.forecast.length&&(t=this.forecast[this.forecast.length-1][0]+1),this.forecast.push(this.predictDay(t))}this.today=this.forecast[0]},e.prototype.predictDay=function(e){var n,t;switch(this.calendarService.getSeasonForAbsoluteDay(e)){case Rg.SPRING:n=Mu.randomBetween(10,25),t=Mu.randomElement([{item:xu.SUN,chance:40},{item:xu.CLOUDS,chance:25},{item:xu.WIND,chance:14},{item:xu.RAIN,chance:20},{item:xu.STORM,chance:1}]);break;case Rg.SUMMER:n=Mu.randomBetween(15,35),t=Mu.randomElement([{item:xu.SUN,chance:50},{item:xu.CLOUDS,chance:10},{item:xu.WIND,chance:10},{item:xu.RAIN,chance:20},{item:xu.STORM,chance:10}]);break;case Rg.AUTUMN:n=Mu.randomBetween(10,25),t=Mu.randomElement([{item:xu.SUN,chance:20},{item:xu.CLOUDS,chance:40},{item:xu.WIND,chance:10},{item:xu.RAIN,chance:25},{item:xu.STORM,chance:5}]);break;case Rg.WINTER:n=Mu.randomBetween(-20,5),t=Mu.randomElement([{item:xu.SUN,chance:30},{item:xu.CLOUDS,chance:20},{item:xu.WIND,chance:15},{item:xu.SNOW,chance:25},{item:xu.STORM,chance:10}])}return[e,t,n]},e.prototype.getCurrentWeather=function(){return this.today[1]},e.prototype.getCurrentTemperature=function(){return this.optionsService.getOption(Eg.METRIC)?this.today[2]:1.8*this.today[2]+32},e.prototype.increaseForecastPeriod=function(e){this.forecastPeriod+=e},e.prototype.isWeather=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.includes(this.getCurrentWeather())},e.prototype.getForecast=function(){return this.forecast},e.prototype.getForecastPeriod=function(){return this.forecastPeriod},e.ngInjectableDef=ve({factory:function(){return new e(ze(Sg),ze(Cg),ze(bg))},token:e,providedIn:"root"}),e}(),lb=function(){function e(e,n){var t=this;this.weatherService=e,this.optionsService=n,this.metric=this.optionsService.getOption(Eg.METRIC),this.optionsSubscription||(this.optionsSubscription=this.optionsService.registerForOptionsChange().subscribe(function(){return t.metric=t.optionsService.getOption(Eg.METRIC)}))}return e.prototype.ngOnInit=function(){},e.prototype.getTodayWeather=function(){return this.weatherService.getCurrentWeather()},e.prototype.getTodayTemperature=function(){return this.weatherService.getCurrentTemperature()},e.prototype.getWeatherName=function(e){return xu[e].toLowerCase()},e.prototype.getForecast=function(){return this.weatherService.getForecast()},e.prototype.getForecastPeriod=function(){return this.weatherService.getForecastPeriod()},e}(),ib=gl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{margin:.5%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#forecast[_ngcontent-%COMP%]{display:flex;flex-direction:row;border:1px solid #000;text-align:center;overflow-x:auto}.weather[_ngcontent-%COMP%]{display:flex;flex:0 0 40px;flex-direction:column;border-right:1px solid #000}.day[_ngcontent-%COMP%]{border-bottom:1px solid #000}"]],data:{}});function ob(e){return so(0,[(e()(),Yl(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["\xb0C"]))],null,null)}function ub(e){return so(0,[(e()(),Yl(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["\xb0F"]))],null,null)}function sb(e){return so(0,[(e()(),Yl(0,0,null,null,1,"span",[["class","day"]],null,null,null,null,null)),(e()(),io(-1,null,["today"]))],null,null)}function ab(e){return so(0,[(e()(),Yl(0,0,null,null,1,"span",[["class","day"]],null,null,null,null,null)),(e()(),io(1,null,["+",""]))],null,function(e,n){e(n,1,0,n.parent.context.index)})}function cb(e){return so(0,[(e()(),Yl(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["\xb0C"]))],null,null)}function pb(e){return so(0,[(e()(),Yl(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["\xb0F"]))],null,null)}function hb(e){return so(0,[(e()(),Yl(0,0,null,null,13,"div",[["class","weather"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,sb)),Mi(2,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,ab)),Mi(4,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(5,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(6,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Yl(7,0,null,null,6,"span",[["id","temp"]],null,null,null,null,null)),(e()(),io(8,null,["",""])),to(9,2),(e()(),jl(16777216,null,null,1,null,cb)),Mi(11,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,pb)),Mi(13,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,0===n.context.index),e(n,4,0,0!==n.context.index),e(n,6,0,t.getWeatherName(n.context.$implicit[1]),"weather"),e(n,11,0,t.metric),e(n,13,0,!t.metric)},function(e,n){var t=hl(n,8,0,e(n,9,0,Ei(n.parent.parent,0),n.context.$implicit[2],"0.0-1"));e(n,8,0,t)})}function db(e){return so(0,[(e()(),Yl(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),io(-1,null,["Weather forecast: "])),(e()(),Yl(2,0,null,null,2,"div",[["id","forecast"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,hb)),Mi(4,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,4,0,n.component.getForecast())},null)}function fb(e){return so(0,[ki(0,$s,[Kr]),(e()(),Yl(1,0,null,null,15,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Yl(2,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),Yl(3,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["Weather"])),(e()(),io(5,null,[" Weather: "," "])),(e()(),Yl(6,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(7,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Yl(8,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),io(9,null,[" Temperature: ",""])),to(10,2),(e()(),jl(16777216,null,null,1,null,ob)),Mi(12,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,ub)),Mi(14,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,db)),Mi(16,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,7,0,t.getWeatherName(t.getTodayWeather()),"weather"),e(n,12,0,t.metric),e(n,14,0,!t.metric),e(n,16,0,t.getForecastPeriod()>1)},function(e,n){var t=n.component;e(n,5,0,t.getWeatherName(t.getTodayWeather()));var r=hl(n,9,0,e(n,10,0,Ei(n,0),t.getTodayTemperature(),"0.0-1"));e(n,9,0,r)})}function gb(e){return so(0,[(e()(),Yl(0,0,null,null,1,"app-weather",[],null,null,null,fb,ib)),Mi(1,114688,null,0,lb,[rb,bg],null,null)],function(e,n){e(n,1,0)},null)}var vb=ai("app-weather",lb,gb,{},{},[]),mb=function(){function e(e){this.royalService=e,this.id=Math.random()}return e.prototype.ngOnInit=function(){},e.prototype.getPerkName=function(){return Au.preparePerkName(this.perk.perk)},e.prototype.unlock=function(){this.royalService.unlock(this.perk)},e.prototype.isAvailable=function(){return this.royalService.getRoyalPoints()>=this.perk.cost&&(0===this.perk.maxUsages||this.perk.usages<this.perk.maxUsages)},e}(),yb=gl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #000}#wrapperNotAvailable[_ngcontent-%COMP%]{display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #57575a}#titleGrey[_ngcontent-%COMP%]{display:inline-block;color:#57575a}.notMet[_ngcontent-%COMP%]{color:#8b0000}.title[_ngcontent-%COMP%]{text-align:left}hr[_ngcontent-%COMP%]{border-color:#000}#progress[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background-color:var(--active-colour);z-index:1}#text[_ngcontent-%COMP%]{position:relative;z-index:2}app-icon[_ngcontent-%COMP%]{margin-top:-3px;height:17px}"]],data:{}});function Sb(e){return so(0,[(e()(),Yl(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),io(1,null,[" Usages: ","/"," "]))],null,function(e,n){var t=n.component;e(n,1,0,t.perk.usages,t.perk.maxUsages)})}function Eb(e){return so(0,[(e()(),Yl(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),io(-1,null,[" Usages: unlimited "]))],null,null)}function bb(e){return so(0,[(e()(),Yl(0,0,null,null,13,"div",[["appTooltip",""],["class","tooltip"],["id","wrapper"]],null,[[null,"click"],[null,"mousemove"]],function(e,n,t){var r=!0,l=e.component;return"mousemove"===n&&(r=!1!==Ei(e,1).onmousemove(t)&&r),"click"===n&&(r=!1!==l.unlock()&&r),r},null,null)),Mi(1,16384,null,0,af,[],{elementId:[0,"elementId"]},null),(e()(),Yl(2,0,null,null,1,"div",[["id","text"]],null,null,null,null,null)),(e()(),io(3,null,["",""])),(e()(),Yl(4,0,null,null,9,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),io(5,null,[" ",""])),(e()(),Yl(6,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(7,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),io(8,null,[" Cost: "," RP "])),(e()(),Yl(9,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,Sb)),Mi(11,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,Eb)),Mi(13,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.id),e(n,11,0,t.perk.maxUsages>0),e(n,13,0,0===t.perk.maxUsages)},function(e,n){var t=n.component;e(n,3,0,t.getPerkName()),e(n,4,0,Vl(1,"",t.id,"")),e(n,5,0,t.perk.description),e(n,8,0,t.perk.cost)})}function Ob(e){return so(0,[(e()(),Yl(0,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(1,114688,null,0,cf,[],{name:[0,"name"]},null)],function(e,n){e(n,1,0,"tick")},null)}function Rb(e){return so(0,[(e()(),Yl(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),io(1,null,[" Usages: ","/"," "]))],null,function(e,n){var t=n.component;e(n,1,0,t.perk.usages,t.perk.maxUsages)})}function Tb(e){return so(0,[(e()(),Yl(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),io(-1,null,[" Usages: unlimited "]))],null,null)}function Cb(e){return so(0,[(e()(),Yl(0,0,null,null,15,"div",[["appTooltip",""],["class","tooltip"],["id","wrapperNotAvailable"]],null,[[null,"click"],[null,"mousemove"]],function(e,n,t){var r=!0,l=e.component;return"mousemove"===n&&(r=!1!==Ei(e,1).onmousemove(t)&&r),"click"===n&&(r=!1!==l.unlock()&&r),r},null,null)),Mi(1,16384,null,0,af,[],{elementId:[0,"elementId"]},null),(e()(),Yl(2,0,null,null,3,"div",[["id","titleGrey"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,Ob)),Mi(4,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),io(5,null,["",""])),(e()(),Yl(6,0,null,null,9,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),io(7,null,[" ",""])),(e()(),Yl(8,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(9,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),io(10,null,[" Cost: "," RP "])),(e()(),Yl(11,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,Rb)),Mi(13,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,Tb)),Mi(15,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.id),e(n,4,0,t.perk.usages===t.perk.maxUsages&&t.perk.maxUsages>0),e(n,13,0,t.perk.maxUsages>0),e(n,15,0,0===t.perk.maxUsages)},function(e,n){var t=n.component;e(n,5,0,t.getPerkName()),e(n,6,0,Vl(1,"",t.id,"")),e(n,7,0,t.perk.description),e(n,10,0,t.perk.cost)})}function _b(e){return so(0,[(e()(),jl(16777216,null,null,1,null,bb)),Mi(1,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,Cb)),Mi(3,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.isAvailable()),e(n,3,0,!t.isAvailable())},null)}var Ib=function(){function e(e,n,t){this.logService=e,this.royalService=n,this.kongregateService=t}return e.prototype.ngOnInit=function(){},e.prototype.buyRoyalPoints=function(){this.royalService.buyRoyalPoints()},e.prototype.getRoyalPoints=function(){return this.royalService.getRoyalPoints()},e.prototype.getRoyalPerks=function(){return this.royalService.getRoyalPerks()},e}(),Ab=gl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{margin:5px;display:flex;flex-direction:column}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}.bold[_ngcontent-%COMP%]{font-weight:600}app-royal-perk[_ngcontent-%COMP%]{font-size:1em;display:inline-block;width:30%;margin:4px 8px;cursor:pointer}"]],data:{}});function wb(e){return so(0,[(e()(),Yl(0,0,null,null,1,"app-royal-perk",[],null,null,null,_b,yb)),Mi(1,114688,null,0,mb,[Pg],{perk:[0,"perk"]},null)],function(e,n){e(n,1,0,n.context.$implicit)},null)}function Nb(e){return so(0,[(e()(),Yl(0,0,null,null,16,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Yl(1,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),io(-1,null,["Royal perks"])),(e()(),Yl(3,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(4,0,null,null,6,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["You have "])),(e()(),Yl(6,0,null,null,1,"span",[["class","bold"]],null,null,null,null,null)),(e()(),io(7,null,["",""])),(e()(),io(-1,null,[" royal points."])),(e()(),Yl(9,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),io(-1,null,[" You can use them to acquire special upgrades."])),(e()(),Yl(11,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),Yl(12,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.buyRoyalPoints()&&r),r},null,null)),(e()(),io(-1,null,["Buy Royal points"])),(e()(),Yl(14,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,wb)),Mi(16,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,16,0,n.component.getRoyalPerks())},function(e,n){e(n,7,0,n.component.getRoyalPoints())})}function Pb(e){return so(0,[(e()(),Yl(0,0,null,null,1,"app-royal",[],null,null,null,Nb,Ab)),Mi(1,114688,null,0,Ib,[_g,Pg,Dg],null,null)],function(e,n){e(n,1,0)},null)}var Db=ai("app-royal",Ib,Pb,{},{},[]),Mb=function(){function e(e,n,t,r){this.servicesService=e,this.resourcesService=n,this.effectsService=t,this.gameService=r,this.id=Math.random()}return e.prototype.ngOnInit=function(){this.building.hasBuff()&&(this.buildingBuff=this.building.getBuff())},e.prototype.hasResource=function(e){return 0===this.resourcesService.hasResource(e.key,e.value,"Building buff",!0)},e.prototype.getResourceName=function(e){return Au.prepareResourceName(e)},e.prototype.buff=function(){var e=this.servicesService.getService(Nu.MODAL);if(this.building.hasBuff()&&this.buffsEnabled())if(this.building.isBuffed())e.info("This building is already buffed");else{var n=this.building.getBuff();this.resourcesService.decreaseResources(n.cost,"Building buff",!0)&&this.effectsService.addBuildingEffect(new Du(n.name,this.building.getBuildingType(),n.effect,n.duration,this.building.id))}else e.info("This building cannot be buffed")},e.prototype.buffsEnabled=function(){return this.gameService.isEnabled(Eu.BUFFS)},e}(),kb=gl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{cursor:pointer}img[_ngcontent-%COMP%]{height:24px;width:24px}hr[_ngcontent-%COMP%]{border-color:#000}.notMet[_ngcontent-%COMP%]{color:#8b0000}"]],data:{}});function Lb(e){return so(0,[(e()(),Yl(0,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),io(1,null,[""," "])),(e()(),Yl(2,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(3,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){e(n,3,0,n.component.getResourceName(n.parent.context.$implicit.key),"resources")},function(e,n){e(n,1,0,n.parent.context.$implicit.value)})}function xb(e){return so(0,[(e()(),Yl(0,0,null,null,3,"div",[["class","notMet"]],null,null,null,null,null)),(e()(),io(1,null,[""," "])),(e()(),Yl(2,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(3,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){e(n,3,0,n.component.getResourceName(n.parent.context.$implicit.key),"resources")},function(e,n){e(n,1,0,n.parent.context.$implicit.value)})}function Fb(e){return so(0,[(e()(),Yl(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,Lb)),Mi(2,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,xb)),Mi(4,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.hasResource(n.context.$implicit)),e(n,4,0,!t.hasResource(n.context.$implicit))},null)}function Ub(e){return so(0,[(e()(),Yl(0,0,null,null,8,"div",[["appTooltip",""],["class","tooltip"],["id","buff"]],null,[[null,"click"],[null,"mousemove"]],function(e,n,t){var r=!0,l=e.component;return"mousemove"===n&&(r=!1!==Ei(e,1).onmousemove(t)&&r),"click"===n&&(r=!1!==l.buff()&&r),r},null,null)),Mi(1,16384,null,0,af,[],{elementId:[0,"elementId"]},null),(e()(),Yl(2,0,null,null,0,"img",[["src","assets/buff.svg"]],null,null,null,null,null)),(e()(),Yl(3,0,null,null,5,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),io(4,null,[" "," "])),(e()(),Yl(5,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),jl(16777216,null,null,2,null,Fb)),Mi(7,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null),ki(0,Ks,[Vr])],function(e,n){var t=n.component;e(n,1,0,0-t.id),e(n,7,0,hl(n,7,0,Ei(n,8).transform(t.buildingBuff.cost)))},function(e,n){var t=n.component;e(n,3,0,Vl(1,"",0-t.id,"")),e(n,4,0,t.buildingBuff.name)})}function Hb(e){return so(0,[(e()(),Yl(0,0,null,null,2,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,Ub)),Mi(2,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.buffsEnabled()&&t.building.hasBuff()&&!t.building.isBuffed())},null)}var Gb=function(){function e(e,n){this.resourcesService=e,this.servicesService=n,this.id=Math.random()}return e.prototype.ngOnInit=function(){},e.prototype.hasResource=function(e){return 0===this.resourcesService.hasResource(e.key,e.value,this.building.getName()+" upgrade",!0)},e.prototype.getResourceName=function(e){return Au.prepareResourceName(e)},e.prototype.upgrade=function(){this.parentRegion.upgradeBuilding(this.building.getBuildingId())},e}(),Bb=gl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{cursor:pointer}img[_ngcontent-%COMP%]{height:24px;width:24px}hr[_ngcontent-%COMP%]{border-color:#000}.notMet[_ngcontent-%COMP%]{color:#8b0000}"]],data:{}});function Vb(e){return so(0,[(e()(),Yl(0,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),io(1,null,[""," "])),(e()(),Yl(2,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(3,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){e(n,3,0,n.component.getResourceName(n.parent.context.$implicit.key),"resources")},function(e,n){e(n,1,0,n.parent.context.$implicit.value)})}function Wb(e){return so(0,[(e()(),Yl(0,0,null,null,3,"div",[["class","notMet"]],null,null,null,null,null)),(e()(),io(1,null,[""," "])),(e()(),Yl(2,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(3,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){e(n,3,0,n.component.getResourceName(n.parent.context.$implicit.key),"resources")},function(e,n){e(n,1,0,n.parent.context.$implicit.value)})}function jb(e){return so(0,[(e()(),Yl(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,Vb)),Mi(2,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,Wb)),Mi(4,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.hasResource(n.context.$implicit)),e(n,4,0,!t.hasResource(n.context.$implicit))},null)}function Yb(e){return so(0,[(e()(),Yl(0,0,null,null,8,"div",[["appTooltip",""],["class","tooltip"],["id","upgrade"]],null,[[null,"click"],[null,"mousemove"]],function(e,n,t){var r=!0,l=e.component;return"mousemove"===n&&(r=!1!==Ei(e,1).onmousemove(t)&&r),"click"===n&&(r=!1!==l.upgrade()&&r),r},null,null)),Mi(1,16384,null,0,af,[],{elementId:[0,"elementId"]},null),(e()(),Yl(2,0,null,null,0,"img",[["src","assets/upgrade.svg"]],null,null,null,null,null)),(e()(),Yl(3,0,null,null,5,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),io(4,null,[" Upgrade to level "," "])),(e()(),Yl(5,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),jl(16777216,null,null,2,null,jb)),Mi(7,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null),ki(0,Ks,[Vr])],function(e,n){var t=n.component;e(n,1,0,0-t.id),e(n,7,0,hl(n,7,0,Ei(n,8).transform(t.building.getUpgradeCost())))},function(e,n){var t=n.component;e(n,3,0,Vl(1,"",0-t.id,"")),e(n,4,0,t.building.getBuildingLevel()+1)})}function zb(e){return so(0,[(e()(),Yl(0,0,null,null,2,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,Yb)),Mi(2,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,2,0,n.component.building.hasUpgrade())},null)}var Kb=function(){function e(e){this.optionsService=e,this.progress=0,this.text=""}return Object.defineProperty(e.prototype,"progressReInput",{set:function(e){this.progressRef=e,this.ngOnChanges()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labelRefInput",{set:function(e){this.labelRef=e,this.ngOnChanges()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"label2RefInput",{set:function(e){this.label2Ref=e,this.ngOnChanges()},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.ngOnChanges=function(){this.progressBarsEnabled()?(this.progressRef&&(this.progressRef.nativeElement.style.width=this.progress+"%"),this.labelRef&&(this.labelRef.nativeElement.innerHTML=this.text&&""!==this.text?this.text:this.progress.toFixed(2)+"%")):this.label2Ref&&(this.label2Ref.nativeElement.innerHTML=this.text,this.label2Ref.nativeElement.innerHTML=this.progress.toFixed(2)+"%")},e.prototype.progressBarsEnabled=function(){return this.optionsService.getOption(Eg.VISUAL_PROGRESS_BARS)},e}(),qb=gl({encapsulation:0,styles:[["#progressBar[_ngcontent-%COMP%]{position:relative;width:95%;height:100%;display:inline-block;text-align:center;background-color:#ddd;border:1px solid #000;margin-top:-1px}#progressBar2[_ngcontent-%COMP%]{position:relative;width:95%;height:100%;display:inline-block;text-align:center;margin-top:-1px}#progress[_ngcontent-%COMP%]{height:100%;background-color:var(--active-colour);text-align:center;color:#fff}#label[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;width:100%;font-size:1.2em;text-align:center}#label2[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;width:100%;font-size:1.2em;text-align:center;font-weight:700}"]],data:{}});function $b(e){return so(0,[(e()(),Yl(0,0,null,null,2,"div",[["id","progressBar"]],null,null,null,null,null)),(e()(),Yl(1,0,[[1,0],["progress",1]],null,0,"div",[["id","progress"]],null,null,null,null,null)),(e()(),Yl(2,0,[[2,0],["label",1]],null,0,"div",[["id","label"]],null,null,null,null,null))],null,null)}function Qb(e){return so(0,[(e()(),Yl(0,0,null,null,1,"div",[["id","progressBar2"]],null,null,null,null,null)),(e()(),Yl(1,0,[[3,0],["label2",1]],null,0,"div",[["id","label2"]],null,null,null,null,null))],null,null)}function Zb(e){return so(0,[Qi(671088640,1,{progressReInput:0}),Qi(671088640,2,{labelRefInput:0}),Qi(671088640,3,{label2RefInput:0}),(e()(),jl(16777216,null,null,1,null,$b)),Mi(4,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,Qb)),Mi(6,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,4,0,t.progressBarsEnabled()),e(n,6,0,!t.progressBarsEnabled())},null)}var Xb=function(){function e(){}return e.prototype.ngOnInit=function(){},e.prototype.isTextValue=function(e){return e===Lm.TEXT},e.prototype.isButtonValue=function(e){return e===Lm.BUTTON},e.prototype.isTwoButtonValue=function(e){return e===Lm.TWO_BUTTON},e.prototype.isProgressValue=function(e){return e===Lm.PROGRESS_BAR},e.prototype.isDropdownValue=function(e){return e===Lm.DROPDOWN},e.prototype.isIconValue=function(e){return e===Lm.ICON},e.prototype.isButtonCheckboxValue=function(e){return e===Lm.BUTTON_CHECKBOX},e.prototype.buildingCallback=function(e){this.building.callback(e)},e}(),Jb=gl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{font-size:1.3em}.iconsLine[_ngcontent-%COMP%]{display:flex;flex-direction:row}.iconsLine[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:auto}.line[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:1px 4px}button[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{font-size:.9em}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center}.icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:2px;flex:0 0 auto}"]],data:{}});function eO(e){return so(0,[(e()(),Yl(0,0,null,null,5,"span",[],null,null,null,null,null)),(e()(),Yl(1,0,null,null,4,"span",[["class","icon"]],null,null,null,null,null)),(e()(),Yl(2,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Yl(3,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(4,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Yl(5,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null))],function(e,n){e(n,4,0,n.context.$implicit.name,n.context.$implicit.path)},function(e,n){e(n,2,0,n.context.$implicit.prefix),e(n,5,0,n.context.$implicit.suffix)})}function nO(e){return so(0,[(e()(),Yl(0,0,null,null,2,"span",[["class","line iconsLine"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,eO)),Mi(2,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.building.getLine(t.line).getValue())},null)}function tO(e){return so(0,[(e()(),Yl(0,0,null,null,0,"span",[["class","line"]],[[8,"innerHTML",1]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,0,0,t.building.getLine(t.line).getValue())})}function rO(e){return so(0,[(e()(),Yl(0,0,null,null,2,"span",[["class","line"]],null,null,null,null,null)),(e()(),Yl(1,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0,l=e.component;return"click"===n&&(r=!1!==l.buildingCallback(l.building.getLine(l.line).getValue().callbackValue)&&r),r},null,null)),(e()(),io(2,null,[""," "]))],null,function(e,n){var t=n.component;e(n,2,0,t.building.getLine(t.line).getValue().buttonText)})}function lO(e){return so(0,[(e()(),Yl(0,0,null,null,10,"span",[["class","line"]],null,null,null,null,null)),(e()(),Yl(1,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0,l=e.component;return"click"===n&&(r=!1!==l.buildingCallback(l.building.getLine(l.line).getValue().callbackValue)&&r),r},null,null)),(e()(),io(2,null,[""," "])),(e()(),Yl(3,0,null,null,7,"label",[],null,null,null,null,null)),(e()(),Yl(4,0,null,null,5,"input",[["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"change"],[null,"blur"]],function(e,n,t){var r=!0,l=e.component;return"change"===n&&(r=!1!==Ei(e,5).onChange(t.target.checked)&&r),"blur"===n&&(r=!1!==Ei(e,5).onTouched()&&r),"ngModelChange"===n&&(r=!1!==(l.building.getLine(l.line).getValue().checkboxState=t)&&r),"click"===n&&(r=!1!==l.buildingCallback(l.building.getLine(l.line).getValue().checkboxCallbackValue)&&r),r},null,null)),Mi(5,16384,null,0,Rf,[xn,Pn],null,null),Li(1024,null,Of,function(e){return[e]},[Rf]),Mi(7,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),Li(2048,null,Nf,null,[pg]),Mi(9,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),io(10,null,[""," "]))],function(e,n){var t=n.component;e(n,7,0,t.building.getLine(t.line).getValue().checkboxState)},function(e,n){var t=n.component;e(n,2,0,t.building.getLine(t.line).getValue().buttonText),e(n,4,0,Ei(n,9).ngClassUntouched,Ei(n,9).ngClassTouched,Ei(n,9).ngClassPristine,Ei(n,9).ngClassDirty,Ei(n,9).ngClassValid,Ei(n,9).ngClassInvalid,Ei(n,9).ngClassPending),e(n,10,0,t.building.getLine(t.line).getValue().checkboxLabel)})}function iO(e){return so(0,[(e()(),Yl(0,0,null,null,5,"span",[["class","line"]],null,null,null,null,null)),(e()(),Yl(1,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0,l=e.component;return"click"===n&&(r=!1!==l.buildingCallback(l.building.getLine(l.line).getValue().callback1Value)&&r),r},null,null)),(e()(),io(2,null,["",""])),(e()(),Yl(3,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Yl(4,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0,l=e.component;return"click"===n&&(r=!1!==l.buildingCallback(l.building.getLine(l.line).getValue().callback2Value)&&r),r},null,null)),(e()(),io(5,null,["",""]))],null,function(e,n){var t=n.component;e(n,2,0,t.building.getLine(t.line).getValue().button1Text),e(n,3,0,t.building.getLine(t.line).getValue().textBetween),e(n,5,0,t.building.getLine(t.line).getValue().button2Text)})}function oO(e){return so(0,[(e()(),Yl(0,0,null,null,3,"option",[],null,null,null,null,null)),Mi(1,147456,null,0,Uf,[Pn,xn,[2,Ff]],{value:[0,"value"]},null),Mi(2,147456,null,0,Bf,[Pn,xn,[8,null]],{value:[0,"value"]},null),(e()(),io(3,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,3,0,n.context.$implicit)})}function uO(e){return so(0,[(e()(),Yl(0,0,null,null,8,"span",[["class","line"]],null,null,null,null,null)),(e()(),Yl(1,0,null,null,7,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var r=!0,l=e.component;return"change"===n&&(r=!1!==Ei(e,2).onChange(t.target.value)&&r),"blur"===n&&(r=!1!==Ei(e,2).onTouched()&&r),"change"===n&&(r=!1!==l.buildingCallback(t)&&r),"ngModelChange"===n&&(r=!1!==(l.building.getLine(l.line).getValue().selected=t)&&r),r},null,null)),Mi(2,16384,null,0,Ff,[xn,Pn],null,null),Li(1024,null,Of,function(e){return[e]},[Ff]),Mi(4,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),Li(2048,null,Nf,null,[pg]),Mi(6,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),jl(16777216,null,null,1,null,oO)),Mi(8,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,4,0,t.building.getLine(t.line).getValue().selected),e(n,8,0,t.building.getLine(t.line).getValue().values)},function(e,n){e(n,1,0,Ei(n,6).ngClassUntouched,Ei(n,6).ngClassTouched,Ei(n,6).ngClassPristine,Ei(n,6).ngClassDirty,Ei(n,6).ngClassValid,Ei(n,6).ngClassInvalid,Ei(n,6).ngClassPending)})}function sO(e){return so(0,[(e()(),Yl(0,0,null,null,1,"app-progress-bar",[],null,null,null,Zb,qb)),Mi(1,638976,null,0,Kb,[bg],{progress:[0,"progress"],text:[1,"text"]},null)],function(e,n){var t=n.component;e(n,1,0,t.building.getLine(t.line).getValue().value,t.building.getLine(t.line).getValue().label)},null)}function aO(e){return so(0,[(e()(),Yl(0,0,null,null,2,"span",[["class","line"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,sO)),Mi(2,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.building.getLine(t.line).getValue().value>=0)},null)}function cO(e){return so(0,[(e()(),Yl(0,0,null,null,14,"span",[["id","wrapper"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,nO)),Mi(2,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,tO)),Mi(4,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,rO)),Mi(6,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,lO)),Mi(8,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,iO)),Mi(10,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,uO)),Mi(12,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,aO)),Mi(14,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.isIconValue(t.building.getLine(t.line).getValueType())),e(n,4,0,t.isTextValue(t.building.getLine(t.line).getValueType())),e(n,6,0,t.isButtonValue(t.building.getLine(t.line).getValueType())),e(n,8,0,t.isButtonCheckboxValue(t.building.getLine(t.line).getValueType())),e(n,10,0,t.isTwoButtonValue(t.building.getLine(t.line).getValueType())),e(n,12,0,t.isDropdownValue(t.building.getLine(t.line).getValueType())),e(n,14,0,t.isProgressValue(t.building.getLine(t.line).getValueType()))},null)}function pO(e){return so(0,[(e()(),jl(16777216,null,null,1,null,cO)),Mi(1,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,null!=t.line&&t.building)},null)}var hO=function(){function e(e,n,t,r,l,i){this.modalService=e,this.servicesService=n,this.resourcesService=t,this.managementService=r,this.villageService=l,this.logService=i,this.demolishMode=!1,this.combineMode=!1,this.splitMode=!1,this.lines=km,this.id=Math.random()}return e.prototype.ngOnInit=function(){},e.prototype.fitText=function(){if(this.centerRef){var e=this.centerRef.nativeElement,n=e.clientWidth,t=e.scrollWidth,r=parseInt(window.getComputedStyle(e,null).getPropertyValue("font-size"),10);if(t>n)r=(r=Math.ceil(r*n/t))>15?r=15:r-1,e.style.fontSize=r+"px";else for(;t===n&&r<15;)r=(r=Math.ceil(r)+1)>15?r=15:r,e.style.fontSize=r+"px",(t=e.scrollWidth)>(n=e.clientWidth)&&(e.style.fontSize=r-1+"px")}},e.prototype.stop=function(){this.building.isWorking()?this.building.stopProduction():this.building.startProduction()||this.modalService.info("Cannot unlock production of "+this.building.getName()+". Number of free workers: "+this.resourcesService.getPeople())},e.prototype.isStoppable=function(){return this.building.isStoppable()},e.prototype.isWorking=function(){return this.building.isWorking()},e.prototype.demolish=function(){var e=this;if(void 0!==this.building.getMaxSize&&this.villageService.getPopulation()>this.villageService.getPopulationCap()-this.building.getMaxSize()){this.modalService.open(mu.CONFIRM),this.modalService.setModalText("You don't have enough housing space to move this building occupants.<br> People that won't find new home will leave the village<br>Do you still want to demolish this building?");var n=this.modalService.registerForConfirmation().subscribe(function(t){n.unsubscribe(),t&&e.building.prepareDemolish()&&e.parentRegion.demolish(e.building)})}else{this.modalService.setModalText("Are you sure you want to demolish "+this.building.getName()+"?"),this.modalService.open(mu.CONFIRM);var t=this.modalService.registerForConfirmation().subscribe(function(n){t.unsubscribe(),n&&e.building.prepareDemolish()&&e.parentRegion.demolish(e.building)})}},e.prototype.canCombine=function(){return this.parentRegion.canCombine(this.building)},e.prototype.combine=function(){this.parentRegion.combine(this.building)},e.prototype.split=function(){this.parentRegion.split(this.building)},e.prototype.areComplexWorkersEnabled=function(){return this.managementService.getComplexWorkers()},e.prototype.openWorkersManagement=function(e){e.ctrlKey?this.building.getWorkSettings().enabled?(this.building.getWorkSettings().enabled=!1,this.stop()):this.stop():e.shiftKey?this.building.getWorkSettings().enabled=!this.building.getWorkSettings().enabled:(this.modalService.open(mu.WORK_MANAGEMENT),this.modalService.setBuilding(this.building))},e}(),dO=gl({encapsulation:0,styles:[["[_nghost-%COMP%]{height:15%;min-height:125px;width:10%;min-width:206px;border:1px solid #000;overflow:hidden}#wrapper[_ngcontent-%COMP%]{position:relative;height:100%;text-align:center;font-size:.7em}#combine[_ngcontent-%COMP%], #demolish[_ngcontent-%COMP%], #split[_ngcontent-%COMP%]{position:absolute;font-weight:600;font-size:2em;top:0;left:0;width:100%;height:100%;background-color:rgba(126,122,121,.7);justify-content:center;align-items:center;display:flex;cursor:pointer}#demolishText[_ngcontent-%COMP%], .combineText[_ngcontent-%COMP%]{display:block}#nameBar[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;height:24px;font-size:1.4em;font-weight:700;border-bottom:1px solid #000;white-space:nowrap}#left[_ngcontent-%COMP%], #right[_ngcontent-%COMP%]{flex:1 0 24px}#center[_ngcontent-%COMP%]{flex:1 0 152px;font-size:.8em;overflow:hidden;line-height:24px}.control[_ngcontent-%COMP%]{float:right;font-size:.6em;margin-right:2px;cursor:pointer}.control[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px;height:24px}#lines[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column}app-progress-bar[_ngcontent-%COMP%]{display:block;height:18px}app-building-line[_ngcontent-%COMP%]{height:20px;display:block;margin-top:3px;flex:1 0 auto}img[_ngcontent-%COMP%]{height:24px}.details[_ngcontent-%COMP%]{float:left;font-size:.75em;margin-right:2px}.positiveEffects[_ngcontent-%COMP%]{font-size:.7em;color:#006400}.negativeEffects[_ngcontent-%COMP%]{font-size:.7em;color:#8b0000}.tooltipSpan[_ngcontent-%COMP%]{font-size:1.5em;font-weight:100;text-align:left}.tooltipSpan[_ngcontent-%COMP%]   #title[_ngcontent-%COMP%]{text-align:center}.tooltipSpan[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border-color:#000}app-building-buff[_ngcontent-%COMP%]{position:absolute;right:0;top:0}app-building-upgrade[_ngcontent-%COMP%]{position:absolute;left:-2px;top:0}"]],data:{}});function fO(e){return so(0,[(e()(),Yl(0,0,null,null,7,"span",[["appTooltip",""],["class","details tooltip"]],null,[[null,"mousemove"]],function(e,n,t){var r=!0;return"mousemove"===n&&(r=!1!==Ei(e,1).onmousemove(t)&&r),r},null,null)),Mi(1,16384,null,0,af,[],{elementId:[0,"elementId"]},null),(e()(),Yl(2,0,null,null,0,"img",[["alt","details"],["draggable","false"],["src","assets/details.svg"]],null,null,null,null,null)),(e()(),Yl(3,0,null,null,4,"span",[["class","tooltipSpan"]],[[8,"id",0]],null,null,null,null)),(e()(),Yl(4,0,null,null,1,"div",[["id","title"]],null,null,null,null,null)),(e()(),io(5,null,["",""])),(e()(),Yl(6,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Yl(7,0,null,null,0,"div",[],[[8,"innerHTML",1]],null,null,null,null))],function(e,n){e(n,1,0,n.component.id)},function(e,n){var t=n.component;e(n,3,0,Vl(1,"",t.id,"")),e(n,5,0,t.building.getName()),e(n,7,0,t.building.getDetails())})}function gO(e){return so(0,[(e()(),Yl(0,0,null,null,1,"span",[["class","positiveEffects"]],null,null,null,null,null)),(e()(),io(1,null,["(+","%)"]))],null,function(e,n){e(n,1,0,n.component.building.getDisplayableEffectsValue())})}function vO(e){return so(0,[(e()(),Yl(0,0,null,null,1,"span",[["class","negativeEffects"]],null,null,null,null,null)),(e()(),io(1,null,["(","%)"]))],null,function(e,n){e(n,1,0,n.component.building.getDisplayableEffectsValue())})}function mO(e){return so(0,[(e()(),Yl(0,0,null,null,1,"span",[["class","control"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.stop()&&r),r},null,null)),(e()(),Yl(1,0,null,null,0,"img",[["alt","on"],["draggable","false"],["src","assets/gear.svg"],["title","disable"]],null,null,null,null,null))],null,null)}function yO(e){return so(0,[(e()(),Yl(0,0,null,null,1,"span",[["class","control"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.stop()&&r),r},null,null)),(e()(),Yl(1,0,null,null,0,"img",[["alt","off"],["draggable","false"],["src","assets/gear_off.svg"],["title","enable"]],null,null,null,null,null))],null,null)}function SO(e){return so(0,[(e()(),Yl(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,mO)),Mi(2,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,yO)),Mi(4,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(0,null,null,0))],function(e,n){var t=n.component;e(n,2,0,t.isStoppable()&&t.isWorking()),e(n,4,0,t.isStoppable()&&!t.isWorking())},null)}function EO(e){return so(0,[(e()(),Yl(0,0,null,null,0,"img",[["draggable","false"],["src","assets/complex_management_on_on.svg"],["title","work settings"]],null,null,null,null,null))],null,null)}function bO(e){return so(0,[(e()(),Yl(0,0,null,null,0,"img",[["draggable","false"],["src","assets/complex_management_on_off.svg"],["title","work settings"]],null,null,null,null,null))],null,null)}function OO(e){return so(0,[(e()(),Yl(0,0,null,null,0,"img",[["draggable","false"],["src","assets/complex_management_off_on.svg"],["title","work settings"]],null,null,null,null,null))],null,null)}function RO(e){return so(0,[(e()(),Yl(0,0,null,null,0,"img",[["draggable","false"],["src","assets/complex_management_off_off.svg"],["title","work settings"]],null,null,null,null,null))],null,null)}function TO(e){return so(0,[(e()(),Yl(0,0,null,null,8,"span",[["class","control"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.openWorkersManagement(t)&&r),r},null,null)),(e()(),jl(16777216,null,null,1,null,EO)),Mi(2,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,bO)),Mi(4,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,OO)),Mi(6,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,RO)),Mi(8,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.building.getWorkSettings().enabled&&t.building.isWorking()),e(n,4,0,t.building.getWorkSettings().enabled&&!t.building.isWorking()),e(n,6,0,!t.building.getWorkSettings().enabled&&t.building.isWorking()),e(n,8,0,!t.building.getWorkSettings().enabled&&!t.building.isWorking())},null)}function CO(e){return so(0,[(e()(),Yl(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,TO)),Mi(2,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(0,null,null,0))],function(e,n){e(n,2,0,n.component.isStoppable())},null)}function _O(e){return so(0,[(e()(),Yl(0,0,null,null,2,"div",[["id","demolish"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.demolish()&&r),r},null,null)),(e()(),Yl(1,0,null,null,1,"span",[["id","demolishText"]],null,null,null,null,null)),(e()(),io(-1,null,["Demolish"]))],null,null)}function IO(e){return so(0,[(e()(),Yl(0,0,null,null,2,"div",[["id","combine"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.combine()&&r),r},null,null)),(e()(),Yl(1,0,null,null,1,"span",[["class","combineText"]],null,null,null,null,null)),(e()(),io(-1,null,["Combine"]))],null,null)}function AO(e){return so(0,[(e()(),Yl(0,0,null,null,2,"div",[["id","split"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.split()&&r),r},null,null)),(e()(),Yl(1,0,null,null,1,"span",[["class","combineText"]],null,null,null,null,null)),(e()(),io(-1,null,["Split"]))],null,null)}function wO(e){return so(0,[Qi(402653184,1,{centerRef:0}),(e()(),Yl(1,0,null,null,35,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Yl(2,0,null,null,15,"div",[["id","nameBar"]],null,null,null,null,null)),(e()(),Yl(3,0,null,null,2,"div",[["id","left"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,fO)),Mi(5,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(6,0,[[1,0],["center",1]],null,6,"div",[["id","center"]],null,null,null,null,null)),(e()(),io(7,null,[""," "])),(e()(),jl(16777216,null,null,1,null,gO)),Mi(9,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,vO)),Mi(11,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),io(12,null,[" "," "])),(e()(),Yl(13,0,null,null,4,"div",[["id","right"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,SO)),Mi(15,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,CO)),Mi(17,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(18,0,null,null,12,"div",[["id","lines"]],null,null,null,null,null)),(e()(),Yl(19,0,null,null,1,"app-building-buff",[],null,null,null,Hb,kb)),Mi(20,114688,null,0,Mb,[Sg,Lg,Qg,wg],{building:[0,"building"]},null),(e()(),Yl(21,0,null,null,1,"app-building-upgrade",[],null,null,null,zb,Bb)),Mi(22,114688,null,0,Gb,[Lg,Sg],{building:[0,"building"],parentRegion:[1,"parentRegion"]},null),(e()(),Yl(23,0,null,null,1,"app-building-line",[],null,null,null,pO,Jb)),Mi(24,114688,null,0,Xb,[],{line:[0,"line"],building:[1,"building"]},null),(e()(),Yl(25,0,null,null,1,"app-building-line",[],null,null,null,pO,Jb)),Mi(26,114688,null,0,Xb,[],{line:[0,"line"],building:[1,"building"]},null),(e()(),Yl(27,0,null,null,1,"app-building-line",[],null,null,null,pO,Jb)),Mi(28,114688,null,0,Xb,[],{line:[0,"line"],building:[1,"building"]},null),(e()(),Yl(29,0,null,null,1,"app-building-line",[],null,null,null,pO,Jb)),Mi(30,114688,null,0,Xb,[],{line:[0,"line"],building:[1,"building"]},null),(e()(),jl(16777216,null,null,1,null,_O)),Mi(32,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,IO)),Mi(34,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,AO)),Mi(36,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,5,0,t.building.hasDetails()),e(n,9,0,t.building.getDisplayableEffectsValue()>0),e(n,11,0,t.building.getDisplayableEffectsValue()<0),e(n,15,0,!t.building.isComplexManagement()||t.building.isComplexManagement()&&!t.areComplexWorkersEnabled()),e(n,17,0,t.building.isComplexManagement()&&t.areComplexWorkersEnabled()),e(n,20,0,t.building),e(n,22,0,t.building,t.parentRegion),e(n,24,0,t.lines.FIRST,t.building),e(n,26,0,t.lines.SECOND,t.building),e(n,28,0,t.lines.THIRD,t.building),e(n,30,0,t.lines.FOURTH,t.building),e(n,32,0,t.demolishMode&&t.building.isDemolishable()),e(n,34,0,t.combineMode&&t.building.isCombinable()&&t.canCombine()),e(n,36,0,t.splitMode&&t.building.isSplittable())},function(e,n){var t=n.component;e(n,7,0,t.building.getName()),e(n,12,0,t.fitText())})}var NO=function(){function e(e){this.gameService=e}return e.prototype.ngOnInit=function(){},e.prototype.isFortEnabled=function(){return this.gameService.isEnabled(Eu.FORT)},e.prototype.isFieldEnabled=function(){return this.gameService.isEnabled(Eu.FIELD)},e.prototype.isSeaEnabled=function(){return this.gameService.isEnabled(Eu.SEA)},e.prototype.isMountainsEnabled=function(){return this.gameService.isEnabled(Eu.MOUNTAINS)},e.prototype.isPlateauEnabled=function(){return this.gameService.isEnabled(Eu.PLATEAU)},e}(),PO=gl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{display:flex;height:100%;flex-direction:row}.entry[_ngcontent-%COMP%]{flex:auto;display:flex;justify-content:center;flex-direction:column;height:100%;text-align:center;border-right:2px solid #000;cursor:pointer;text-decoration:none;color:#000;font-size:1em}.entry[_ngcontent-%COMP%]:last-of-type{border:none}.entry.active[_ngcontent-%COMP%]{background:var(--active-colour)}"]],data:{}});function DO(e){return so(0,[(e()(),Yl(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["routerLink","/regions/fort"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==Ei(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&r),r},null,null)),Mi(1,671744,[[4,4]],0,_d,[Cd,gh,fs],{routerLink:[0,"routerLink"]},null),Mi(2,1720320,null,2,Ad,[Cd,Pn,xn,Rr],{routerLinkActive:[0,"routerLinkActive"]},null),Qi(603979776,3,{links:1}),Qi(603979776,4,{linksWithHrefs:1}),(e()(),io(-1,null,["Fort"]))],function(e,n){e(n,1,0,"/regions/fort"),e(n,2,0,"active")},function(e,n){e(n,0,0,Ei(n,1).target,Ei(n,1).href)})}function MO(e){return so(0,[(e()(),Yl(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["routerLink","/regions/field"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==Ei(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&r),r},null,null)),Mi(1,671744,[[8,4]],0,_d,[Cd,gh,fs],{routerLink:[0,"routerLink"]},null),Mi(2,1720320,null,2,Ad,[Cd,Pn,xn,Rr],{routerLinkActive:[0,"routerLinkActive"]},null),Qi(603979776,7,{links:1}),Qi(603979776,8,{linksWithHrefs:1}),(e()(),io(-1,null,["Field"]))],function(e,n){e(n,1,0,"/regions/field"),e(n,2,0,"active")},function(e,n){e(n,0,0,Ei(n,1).target,Ei(n,1).href)})}function kO(e){return so(0,[(e()(),Yl(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["routerLink","/regions/mountains"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==Ei(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&r),r},null,null)),Mi(1,671744,[[10,4]],0,_d,[Cd,gh,fs],{routerLink:[0,"routerLink"]},null),Mi(2,1720320,null,2,Ad,[Cd,Pn,xn,Rr],{routerLinkActive:[0,"routerLinkActive"]},null),Qi(603979776,9,{links:1}),Qi(603979776,10,{linksWithHrefs:1}),(e()(),io(-1,null,["Mountains"]))],function(e,n){e(n,1,0,"/regions/mountains"),e(n,2,0,"active")},function(e,n){e(n,0,0,Ei(n,1).target,Ei(n,1).href)})}function LO(e){return so(0,[(e()(),Yl(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["routerLink","/regions/plateau"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==Ei(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&r),r},null,null)),Mi(1,671744,[[12,4]],0,_d,[Cd,gh,fs],{routerLink:[0,"routerLink"]},null),Mi(2,1720320,null,2,Ad,[Cd,Pn,xn,Rr],{routerLinkActive:[0,"routerLinkActive"]},null),Qi(603979776,11,{links:1}),Qi(603979776,12,{linksWithHrefs:1}),(e()(),io(-1,null,["Plateau"]))],function(e,n){e(n,1,0,"/regions/plateau"),e(n,2,0,"active")},function(e,n){e(n,0,0,Ei(n,1).target,Ei(n,1).href)})}function xO(e){return so(0,[(e()(),Yl(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["routerLink","/regions/sea"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==Ei(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&r),r},null,null)),Mi(1,671744,[[14,4]],0,_d,[Cd,gh,fs],{routerLink:[0,"routerLink"]},null),Mi(2,1720320,null,2,Ad,[Cd,Pn,xn,Rr],{routerLinkActive:[0,"routerLinkActive"]},null),Qi(603979776,13,{links:1}),Qi(603979776,14,{linksWithHrefs:1}),(e()(),io(-1,null,["Sea"]))],function(e,n){e(n,1,0,"/regions/sea"),e(n,2,0,"active")},function(e,n){e(n,0,0,Ei(n,1).target,Ei(n,1).href)})}function FO(e){return so(0,[(e()(),Yl(0,0,null,null,22,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Yl(1,0,null,null,5,"a",[["class","entry"],["draggable","false"],["routerLink","/regions/village"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==Ei(e,2).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&r),r},null,null)),Mi(2,671744,[[2,4]],0,_d,[Cd,gh,fs],{routerLink:[0,"routerLink"]},null),Mi(3,1720320,null,2,Ad,[Cd,Pn,xn,Rr],{routerLinkActive:[0,"routerLinkActive"]},null),Qi(603979776,1,{links:1}),Qi(603979776,2,{linksWithHrefs:1}),(e()(),io(-1,null,["Village"])),(e()(),jl(16777216,null,null,1,null,DO)),Mi(8,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(9,0,null,null,5,"a",[["class","entry"],["draggable","false"],["routerLink","/regions/forest"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==Ei(e,10).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&r),r},null,null)),Mi(10,671744,[[6,4]],0,_d,[Cd,gh,fs],{routerLink:[0,"routerLink"]},null),Mi(11,1720320,null,2,Ad,[Cd,Pn,xn,Rr],{routerLinkActive:[0,"routerLinkActive"]},null),Qi(603979776,5,{links:1}),Qi(603979776,6,{linksWithHrefs:1}),(e()(),io(-1,null,["Forest"])),(e()(),jl(16777216,null,null,1,null,MO)),Mi(16,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,kO)),Mi(18,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,LO)),Mi(20,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,xO)),Mi(22,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,"/regions/village"),e(n,3,0,"active"),e(n,8,0,t.isFortEnabled()),e(n,10,0,"/regions/forest"),e(n,11,0,"active"),e(n,16,0,t.isFieldEnabled()),e(n,18,0,t.isMountainsEnabled()),e(n,20,0,t.isPlateauEnabled()),e(n,22,0,t.isSeaEnabled())},function(e,n){e(n,1,0,Ei(n,2).target,Ei(n,2).href),e(n,9,0,Ei(n,10).target,Ei(n,10).href)})}var UO=function(){function e(e){this.happinessService=e}return e.prototype.ngOnInit=function(){},e.prototype.getHappiness=function(){return Au.round(this.happinessService.getHappiness(),2)},e.prototype.getHappinessValue=function(){return this.happinessService.getHappiness()},e}(),HO=gl({encapsulation:0,styles:[["[_nghost-%COMP%]{display:inline-block}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]],data:{}});function GO(e){return so(0,[(e()(),Yl(0,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(1,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"],margin:[2,"margin"]},null)],function(e,n){e(n,1,0,"angry","happiness","0 0 0 4px")},null)}function BO(e){return so(0,[(e()(),Yl(0,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(1,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"],margin:[2,"margin"]},null)],function(e,n){e(n,1,0,"sad","happiness","0 0 0 4px")},null)}function VO(e){return so(0,[(e()(),Yl(0,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(1,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"],margin:[2,"margin"]},null)],function(e,n){e(n,1,0,"neutral","happiness","0 0 0 4px")},null)}function WO(e){return so(0,[(e()(),Yl(0,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(1,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"],margin:[2,"margin"]},null)],function(e,n){e(n,1,0,"happy","happiness","0 0 0 4px")},null)}function jO(e){return so(0,[(e()(),Yl(0,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(1,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"],margin:[2,"margin"]},null)],function(e,n){e(n,1,0,"overjoyed","happiness","0 0 0 4px")},null)}function YO(e){return so(0,[(e()(),Yl(0,0,null,null,11,"div",[["class","icon"],["id","wrapper"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,GO)),Mi(2,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,BO)),Mi(4,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,VO)),Mi(6,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,WO)),Mi(8,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,jO)),Mi(10,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),io(11,null,[" ","%\n"]))],function(e,n){var t=n.component;e(n,2,0,t.getHappinessValue()>=0&&t.getHappinessValue()<=10),e(n,4,0,t.getHappinessValue()>10&&t.getHappinessValue()<=40),e(n,6,0,t.getHappinessValue()>40&&t.getHappinessValue()<=60),e(n,8,0,t.getHappinessValue()>60&&t.getHappinessValue()<=90),e(n,10,0,t.getHappinessValue()>90&&t.getHappinessValue()<=100)},function(e,n){e(n,11,0,n.component.getHappiness())})}var zO=function(){function e(e,n,t,r,l,i,o){var u=this;this.modalService=e,this.landService=n,this.gameService=t,this.regionService=r,this.tutorialService=l,this.changeDetectorRef=i,this.thisRegion=o,this.demolishMode=!1,this.arrangeMode=!1,this.combineMode=!1,this.splitMode=!1,this.filterBuilding=this.regionService.getFilterBuilding(),this.allBuildings=bu.ALL,this.target=null,this.source=null,this.enter=function(e,n){if(n===u.placeholder)return!0;var t=u.placeholder.element.nativeElement,r=n.element.nativeElement,l=u.__indexOf(r.parentNode.children,e.dropContainer.element.nativeElement),i=u.__indexOf(r.parentNode.children,r);if(!u.source){u.sourceIndex=l,u.source=e.dropContainer;var o=u.source.element.nativeElement;t.style.width=o.clientWidth+"px",t.style.height=o.clientHeight+"px",o.parentNode.removeChild(o)}return u.targetIndex=i,u.target=n,t.style.display="",r.parentNode.insertBefore(t,l<i?r.nextSibling:r),u.source.start(),u.placeholder.enter(e,e.element.nativeElement.offsetLeft,e.element.nativeElement.offsetTop),!1}}return e.prototype.ngOnInit=function(){this.tutorialService.checkRegionTutorial(this.thisRegion)},e.prototype.getUniqueBuildingsFromCurrentView=function(){var e=[];return this.regionService.buildings.forEach(function(n){e.includes(n.getBuildingType())||e.push(n.getBuildingType()),n.getBuildingType()!==bu.CONSTRUCTION||e.includes(n.getConstructing())?n.getBuildingType()!==bu.DECONSTRUCTION||e.includes(n.getDecontructing())||e.push(n.getDecontructing()):e.push(n.getConstructing())}),e},e.prototype.getBuildings=function(){var e=this,n=this.regionService.getBuildings().filter(function(n){return e.filterBuilding===bu.ALL||n.getBuildingType()===bu.CONSTRUCTION&&n.getConstructing()===e.filterBuilding||n.getBuildingType()===bu.DECONSTRUCTION&&n.getDecontructing()===e.filterBuilding||n.getBuildingType()===e.filterBuilding});return 0===n.length&&this.filterBuilding!==bu.ALL&&(this.filterBuilding=bu.ALL,this.regionService.setFilterBuildings(bu.ALL)),n},e.prototype.getBuildingName=function(e){return Au.prepareBuildingName(e)},e.prototype.updateFilter=function(e){this.filterBuilding=bu[bu[e.target.value]],this.regionService.setFilterBuildings(this.filterBuilding)},e.prototype.openBuildModal=function(){this.demolishMode=!1,this.arrangeMode=!1,this.modalService.setRegion(this.thisRegion),this.modalService.open(mu.BUILD)},e.prototype.getUnemployed=function(){return this.regionService.getUnemployed()},e.prototype.getFreeLand=function(){return this.landService.getLand()},e.prototype.toggleDemolishMode=function(){this.demolishMode=!this.demolishMode,this.arrangeMode=!1,this.splitMode=!1,this.clearCombineMode()},e.prototype.toggleArrangeMode=function(){if(this.arrangeMode=!this.arrangeMode,this.demolishMode=!1,this.splitMode=!1,this.clearCombineMode(),this.changeDetectorRef.destroyed||this.changeDetectorRef.detectChanges(),this.placeholder){var e=this.placeholder.element.nativeElement;e.style.display="none",e.parentNode.removeChild(e),e.parentNode.removeChild(e)}},e.prototype.toggleCombineMode=function(){this.combineMode=!this.combineMode,this.splitMode=!1,this.demolishMode=!1,this.arrangeMode=!1},e.prototype.toggleSplitMode=function(){this.splitMode=!this.splitMode,this.combineMode=!1,this.demolishMode=!1,this.arrangeMode=!1},e.prototype.clearCombineMode=function(){this.combineMode=!1,this.regionService.clearCombineMode()},e.prototype.drop=function(){if(this.target){var e=this.placeholder.element.nativeElement,n=e.parentNode;if(e.style.display="none",n.removeChild(e),n.appendChild(e),n.insertBefore(this.source.element.nativeElement,n.children[this.sourceIndex]),this.target=null,this.source=null,this.sourceIndex!==this.targetIndex)if(this.filterBuilding===bu.ALL)this.regionService.moveBuildingInList(this.sourceIndex,this.targetIndex);else{var t=this.getBuildings();this.regionService.moveBuildingInListByBuildingId(t[this.sourceIndex].getBuildingId(),t[this.targetIndex].getBuildingId())}}},e.prototype.__indexOf=function(e,n){return Array.prototype.indexOf.call(e,n)},e.prototype.isUrbanPlanningEnabled=function(){return this.gameService.isEnabled(Eu.URBAN_PLANNING)},e.prototype.hasCombinableBuildings=function(){return this.getBuildings().filter(function(e){return e.isCombinable()}).length>1},e.prototype.hasSplittableBuildings=function(){return this.getBuildings().filter(function(e){return e.isSplittable()}).length>=1},e.prototype.onKeydownHandler=function(e){this.demolishMode=!1,this.arrangeMode=!1,this.clearCombineMode()},e}(),KO=function(e){function n(n,t,r,l,i,o,u,s){var a=e.call(this,n,t,r,l,u,s,ku.VILLAGE)||this;return a.villageService=l,a.resourcesService=i,a.managementService=o,a}return l(n,e),n.prototype.getPopulation=function(){return this.villageService.getPopulation()},n.prototype.getPopulationCap=function(){return this.villageService.getPopulationCap()},n.prototype.getFoodValue=function(){return this.resourcesService.getFoodValue("Village")},n.prototype.isFoodNutritionEnabled=function(){return this.managementService.getFoodNutrition()},n.prototype.getTakenLand=function(){return this.landService.getTakenLand()},n}(zO),qO=gl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:100%;max-height:100%;font-size:1em}#content[_ngcontent-%COMP%]{margin:.5%;display:flex;flex-direction:column;height:94%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#side[_ngcontent-%COMP%]{float:right;font-size:.9em;width:25%;margin:.5%;display:inline-block;vertical-align:bottom}#side[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:.8em;margin:0;padding:0;border:none;outline:0}#buildingsWrapper[_ngcontent-%COMP%]{height:85.5%}.buildings[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;height:100%;border:2px solid #000;overflow-y:auto;align-content:flex-start}.buildings[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}#title[_ngcontent-%COMP%]{text-align:center;border:2px solid #000;border-bottom:none}.off[_ngcontent-%COMP%]{background-color:#555}.buildingRegularWrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:.6%}.buildingDropWrapper[_ngcontent-%COMP%]{display:flex;margin:.6%;cursor:move}.buildingDropWrapper[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]],data:{}});function $O(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleDemolishMode()&&r),r},null,null)),(e()(),io(-1,null,["Demolish"]))],null,null)}function QO(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleDemolishMode()&&r),r},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function ZO(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleArrangeMode()&&r),r},null,null)),(e()(),io(-1,null,["Arrange"]))],null,null)}function XO(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleArrangeMode()&&r),r},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function JO(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleCombineMode()&&r),r},null,null)),(e()(),io(-1,null,["Combine"]))],null,null)}function eR(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleCombineMode()&&r),r},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function nR(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleSplitMode()&&r),r},null,null)),(e()(),io(-1,null,["Split"]))],null,null)}function tR(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleSplitMode()&&r),r},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function rR(e){return so(0,[(e()(),Yl(0,0,null,null,3,"option",[],null,null,null,null,null)),Mi(1,147456,null,0,Uf,[Pn,xn,[2,Ff]],{value:[0,"value"]},null),Mi(2,147456,null,0,Bf,[Pn,xn,[8,null]],{value:[0,"value"]},null),(e()(),io(3,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,3,0,n.component.getBuildingName(n.context.$implicit))})}function lR(e){return so(0,[(e()(),Yl(0,0,null,null,3,null,null,null,null,null,null,null)),(e()(),Yl(1,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(2,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),io(3,null,["\xa0"," \xa0\xa0\xa0 "]))],function(e,n){e(n,2,0,"food","resources","available food nutrition (excluding reserved food)")},function(e,n){e(n,3,0,n.component.getFoodValue())})}function iR(e){return so(0,[(e()(),Yl(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),Yl(1,0,null,null,1,"app-building",[],null,null,null,wO,dO)),Mi(2,114688,null,0,hO,[Ig,Sg,Lg,$g,uS,_g],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],building:[3,"building"],parentRegion:[4,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,2,0,t.demolishMode,t.combineMode,t.splitMode,n.context.$implicit,t.villageService)},null)}function oR(e){return so(0,[(e()(),Yl(0,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,iR)),Mi(2,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,2,0,n.component.getBuildings())},null)}function uR(e){return so(0,[(e()(),Yl(0,0,null,null,11,"div",[["cdkDropList",""],["class","buildingDropWrapper cdk-drop-list"]],[[8,"id",0],[2,"cdk-drop-list-dragging",null]],[[null,"cdkDropListDropped"]],function(e,n,t){var r=!0;return"cdkDropListDropped"===n&&(r=!1!==e.component.drop()&&r),r},null,null)),Mi(1,212992,[[2,4]],1,Fv,[Pn,bv,Rr,[2,Sm],[3,Lv]],{enterPredicate:[0,"enterPredicate"]},{dropped:"cdkDropListDropped"}),Qi(603979776,4,{_draggables:1}),Li(256,[[1,4]],Lv,void 0,[]),Li(2048,null,Tv,null,[Fv]),(e()(),Yl(5,16777216,null,null,6,"app-building",[["cdkDrag",""],["class","cdk-drag"]],[[2,"cdk-drag-dragging",null]],null,null,wO,dO)),Li(6144,null,Ov,null,[Nv]),Mi(7,4341760,[[4,4]],3,Nv,[Pn,[3,Tv],Zs,Zt,br,mm,bv,Iv,[2,Sm]],null,null),Qi(603979776,5,{_handles:1}),Qi(335544320,6,{_previewTemplate:0}),Qi(335544320,7,{_placeholderTemplate:0}),Mi(11,114688,null,0,hO,[Ig,Sg,Lg,$g,uS,_g],{demolishMode:[0,"demolishMode"],building:[1,"building"],parentRegion:[2,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,1,0,t.enter),e(n,11,0,t.demolishMode,n.context.$implicit,t.villageService)},function(e,n){e(n,0,0,Ei(n,1).id,Ei(n,1)._dragging),e(n,5,0,Ei(n,7)._hasStartedDragging&&Ei(n,7)._isDragging())})}function sR(e){return so(0,[(e()(),Yl(0,0,null,null,8,"div",[["cdkDropListGroup",""],["class","buildings"]],null,null,null,null,null)),Mi(1,147456,[[1,4]],0,Lv,[],null,null),(e()(),Yl(2,0,[["placeholder",1]],null,4,"div",[["cdkDropList",""],["class","cdk-drop-list"],["id","placeholder"]],[[8,"id",0],[2,"cdk-drop-list-dragging",null]],[[null,"cdkDropListDropped"]],function(e,n,t){var r=!0;return"cdkDropListDropped"===n&&(r=!1!==e.component.drop()&&r),r},null,null)),Li(6144,null,Tv,null,[Fv]),Mi(4,212992,[[2,4]],1,Fv,[Pn,bv,Rr,[2,Sm],[3,Lv]],{id:[0,"id"],enterPredicate:[1,"enterPredicate"]},{dropped:"cdkDropListDropped"}),Qi(603979776,3,{_draggables:1}),Li(256,[[1,4]],Lv,void 0,[]),(e()(),jl(16777216,null,null,1,null,uR)),Mi(8,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,4,0,"placeholder",t.enter),e(n,8,0,t.getBuildings())},function(e,n){e(n,2,0,Ei(n,4).id,Ei(n,4)._dragging)})}function aR(e){return so(0,[Qi(671088640,1,{listGroup:0}),Qi(671088640,2,{placeholder:0}),(e()(),Yl(2,0,null,null,63,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Yl(3,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),Yl(4,0,null,null,1,"app-top-menu",[],null,null,null,FO,PO)),Mi(5,114688,null,0,NO,[wg],null,null),(e()(),Yl(6,0,null,null,59,"div",[["id","content"]],null,null,null,null,null)),(e()(),Yl(7,0,null,null,33,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Yl(8,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.openBuildModal()&&r),r},null,null)),(e()(),io(-1,null,["Build"])),(e()(),jl(16777216,null,null,1,null,$O)),Mi(11,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,QO)),Mi(13,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,ZO)),Mi(15,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,XO)),Mi(17,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,JO)),Mi(19,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,eR)),Mi(21,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,nR)),Mi(23,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,tR)),Mi(25,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(26,0,null,null,14,"div",[["id","side"]],null,null,null,null,null)),(e()(),io(-1,null,[" Filter:"])),(e()(),Yl(28,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(29,0,null,null,11,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var r=!0,l=e.component;return"change"===n&&(r=!1!==Ei(e,30).onChange(t.target.value)&&r),"blur"===n&&(r=!1!==Ei(e,30).onTouched()&&r),"change"===n&&(r=!1!==l.updateFilter(t)&&r),"ngModelChange"===n&&(r=!1!==(l.filterBuilding=t)&&r),r},null,null)),Mi(30,16384,null,0,Ff,[xn,Pn],null,null),Li(1024,null,Of,function(e){return[e]},[Ff]),Mi(32,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),Li(2048,null,Nf,null,[pg]),Mi(34,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),Yl(35,0,null,null,3,"option",[],null,null,null,null,null)),Mi(36,147456,null,0,Uf,[Pn,xn,[2,Ff]],{value:[0,"value"]},null),Mi(37,147456,null,0,Bf,[Pn,xn,[8,null]],{value:[0,"value"]},null),(e()(),io(38,null,["",""])),(e()(),jl(16777216,null,null,1,null,rR)),Mi(40,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null),(e()(),Yl(41,0,null,null,16,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Yl(42,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(43,114688,null,0,cf,[],{name:[0,"name"]},null),(e()(),io(44,null,[" ","/"," \xa0\xa0 "])),(e()(),Yl(45,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(46,114688,null,0,cf,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),io(47,null,[" "," \xa0\xa0\xa0 "])),(e()(),Yl(48,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(49,114688,null,0,cf,[],{name:[0,"name"]},null),(e()(),io(50,null,[" "," \xa0\xa0\xa0 "])),(e()(),Yl(51,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(52,114688,null,0,cf,[],{name:[0,"name"],title:[1,"title"]},null),(e()(),io(53,null,["\xa0"," \xa0\xa0\xa0 "])),(e()(),jl(16777216,null,null,1,null,lR)),Mi(55,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(56,0,null,null,1,"app-happiness",[],null,null,null,YO,HO)),Mi(57,114688,null,0,UO,[Mg],null,null),(e()(),Yl(58,0,null,null,7,"div",[["id","buildingsWrapper"]],null,null,null,null,null)),(e()(),Yl(59,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),Yl(60,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["Buildings"])),(e()(),jl(16777216,null,null,1,null,oR)),Mi(63,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,sR)),Mi(65,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,5,0),e(n,11,0,!t.demolishMode),e(n,13,0,t.demolishMode),e(n,15,0,!t.arrangeMode&&t.getBuildings().length>1),e(n,17,0,t.arrangeMode),e(n,19,0,!t.combineMode&&t.isUrbanPlanningEnabled()&&t.hasCombinableBuildings()),e(n,21,0,t.combineMode),e(n,23,0,!t.splitMode&&t.isUrbanPlanningEnabled()&&t.hasSplittableBuildings()),e(n,25,0,t.splitMode),e(n,32,0,t.filterBuilding),e(n,36,0,t.allBuildings),e(n,37,0,t.allBuildings),e(n,40,0,t.getUniqueBuildingsFromCurrentView()),e(n,43,0,"population"),e(n,46,0,"hammer","Workers","0 0 0 2px"),e(n,49,0,"land"),e(n,52,0,"village","Village size"),e(n,55,0,t.isFoodNutritionEnabled()),e(n,57,0),e(n,63,0,!t.arrangeMode),e(n,65,0,t.arrangeMode)},function(e,n){var t=n.component;e(n,29,0,Ei(n,34).ngClassUntouched,Ei(n,34).ngClassTouched,Ei(n,34).ngClassPristine,Ei(n,34).ngClassDirty,Ei(n,34).ngClassValid,Ei(n,34).ngClassInvalid,Ei(n,34).ngClassPending),e(n,38,0,t.getBuildingName(t.allBuildings)),e(n,44,0,t.getPopulation(),t.getPopulationCap()),e(n,47,0,t.getUnemployed()),e(n,50,0,t.getFreeLand()),e(n,53,0,t.getTakenLand())})}function cR(e){return so(0,[(e()(),Yl(0,0,null,null,1,"app-village",[],null,[["document","keydown.escape"]],function(e,n,t){var r=!0;return"document:keydown.escape"===n&&(r=!1!==Ei(e,1).onKeydownHandler(t)&&r),r},aR,qO)),Mi(1,114688,null,0,KO,[Ig,iS,wg,uS,Lg,$g,Ag,Rr],null,null)],function(e,n){e(n,1,0)},null)}var pR=ai("app-village",KO,cR,{},{},[]),hR=function(e){function n(n,t,r,l,i,o){var u=e.call(this,n,t,r,i,l,o,ku.FORT)||this;return u.fortService=i,u}return l(n,e),n}(zO),dR=gl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:100%;max-height:100%;font-size:1em}#content[_ngcontent-%COMP%]{margin:.5%;display:flex;flex-direction:column;height:94%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#side[_ngcontent-%COMP%]{float:right;font-size:.9em;width:25%;margin:.5%;display:inline-block;vertical-align:bottom}#side[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:.8em;margin:0;padding:0;border:none;outline:0}#buildingsWrapper[_ngcontent-%COMP%]{height:85.5%}.buildings[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;height:100%;border:2px solid #000;overflow-y:auto;align-content:flex-start}.buildings[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}#title[_ngcontent-%COMP%]{text-align:center;border:2px solid #000;border-bottom:none}.off[_ngcontent-%COMP%]{background-color:#555}.buildingRegularWrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:.6%}.buildingDropWrapper[_ngcontent-%COMP%]{display:flex;margin:.6%;cursor:move}.buildingDropWrapper[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]],data:{}});function fR(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleDemolishMode()&&r),r},null,null)),(e()(),io(-1,null,["Demolish"]))],null,null)}function gR(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleDemolishMode()&&r),r},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function vR(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleArrangeMode()&&r),r},null,null)),(e()(),io(-1,null,["Arrange"]))],null,null)}function mR(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleArrangeMode()&&r),r},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function yR(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleCombineMode()&&r),r},null,null)),(e()(),io(-1,null,["Combine"]))],null,null)}function SR(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleCombineMode()&&r),r},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function ER(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleSplitMode()&&r),r},null,null)),(e()(),io(-1,null,["Split"]))],null,null)}function bR(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleSplitMode()&&r),r},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function OR(e){return so(0,[(e()(),Yl(0,0,null,null,3,"option",[],null,null,null,null,null)),Mi(1,147456,null,0,Uf,[Pn,xn,[2,Ff]],{value:[0,"value"]},null),Mi(2,147456,null,0,Bf,[Pn,xn,[8,null]],{value:[0,"value"]},null),(e()(),io(3,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,3,0,n.component.getBuildingName(n.context.$implicit))})}function RR(e){return so(0,[(e()(),Yl(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),Yl(1,0,null,null,1,"app-building",[],null,null,null,wO,dO)),Mi(2,114688,null,0,hO,[Ig,Sg,Lg,$g,uS,_g],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],building:[3,"building"],parentRegion:[4,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,2,0,t.demolishMode,t.combineMode,t.splitMode,n.context.$implicit,t.fortService)},null)}function TR(e){return so(0,[(e()(),Yl(0,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,RR)),Mi(2,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,2,0,n.component.getBuildings())},null)}function CR(e){return so(0,[(e()(),Yl(0,0,null,null,11,"div",[["cdkDropList",""],["class","buildingDropWrapper cdk-drop-list"]],[[8,"id",0],[2,"cdk-drop-list-dragging",null]],[[null,"cdkDropListDropped"]],function(e,n,t){var r=!0;return"cdkDropListDropped"===n&&(r=!1!==e.component.drop()&&r),r},null,null)),Mi(1,212992,[[2,4]],1,Fv,[Pn,bv,Rr,[2,Sm],[3,Lv]],{enterPredicate:[0,"enterPredicate"]},{dropped:"cdkDropListDropped"}),Qi(603979776,4,{_draggables:1}),Li(256,[[1,4]],Lv,void 0,[]),Li(2048,null,Tv,null,[Fv]),(e()(),Yl(5,16777216,null,null,6,"app-building",[["cdkDrag",""],["class","cdk-drag"]],[[2,"cdk-drag-dragging",null]],null,null,wO,dO)),Li(6144,null,Ov,null,[Nv]),Mi(7,4341760,[[4,4]],3,Nv,[Pn,[3,Tv],Zs,Zt,br,mm,bv,Iv,[2,Sm]],null,null),Qi(603979776,5,{_handles:1}),Qi(335544320,6,{_previewTemplate:0}),Qi(335544320,7,{_placeholderTemplate:0}),Mi(11,114688,null,0,hO,[Ig,Sg,Lg,$g,uS,_g],{demolishMode:[0,"demolishMode"],building:[1,"building"],parentRegion:[2,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,1,0,t.enter),e(n,11,0,t.demolishMode,n.context.$implicit,t.fortService)},function(e,n){e(n,0,0,Ei(n,1).id,Ei(n,1)._dragging),e(n,5,0,Ei(n,7)._hasStartedDragging&&Ei(n,7)._isDragging())})}function _R(e){return so(0,[(e()(),Yl(0,0,null,null,8,"div",[["cdkDropListGroup",""],["class","buildings"]],null,null,null,null,null)),Mi(1,147456,[[1,4]],0,Lv,[],null,null),(e()(),Yl(2,0,[["placeholder",1]],null,4,"div",[["cdkDropList",""],["class","cdk-drop-list"],["id","placeholder"]],[[8,"id",0],[2,"cdk-drop-list-dragging",null]],[[null,"cdkDropListDropped"]],function(e,n,t){var r=!0;return"cdkDropListDropped"===n&&(r=!1!==e.component.drop()&&r),r},null,null)),Li(6144,null,Tv,null,[Fv]),Mi(4,212992,[[2,4]],1,Fv,[Pn,bv,Rr,[2,Sm],[3,Lv]],{id:[0,"id"],enterPredicate:[1,"enterPredicate"]},{dropped:"cdkDropListDropped"}),Qi(603979776,3,{_draggables:1}),Li(256,[[1,4]],Lv,void 0,[]),(e()(),jl(16777216,null,null,1,null,CR)),Mi(8,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,4,0,"placeholder",t.enter),e(n,8,0,t.getBuildings())},function(e,n){e(n,2,0,Ei(n,4).id,Ei(n,4)._dragging)})}function IR(e){return so(0,[Qi(671088640,1,{listGroup:0}),Qi(671088640,2,{placeholder:0}),(e()(),Yl(2,0,null,null,53,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Yl(3,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),Yl(4,0,null,null,1,"app-top-menu",[],null,null,null,FO,PO)),Mi(5,114688,null,0,NO,[wg],null,null),(e()(),Yl(6,0,null,null,49,"div",[["id","content"]],null,null,null,null,null)),(e()(),Yl(7,0,null,null,33,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Yl(8,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.openBuildModal()&&r),r},null,null)),(e()(),io(-1,null,["Build"])),(e()(),jl(16777216,null,null,1,null,fR)),Mi(11,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,gR)),Mi(13,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,vR)),Mi(15,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,mR)),Mi(17,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,yR)),Mi(19,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,SR)),Mi(21,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,ER)),Mi(23,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,bR)),Mi(25,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(26,0,null,null,14,"div",[["id","side"]],null,null,null,null,null)),(e()(),io(-1,null,[" Filter:"])),(e()(),Yl(28,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(29,0,null,null,11,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var r=!0,l=e.component;return"change"===n&&(r=!1!==Ei(e,30).onChange(t.target.value)&&r),"blur"===n&&(r=!1!==Ei(e,30).onTouched()&&r),"change"===n&&(r=!1!==l.updateFilter(t)&&r),"ngModelChange"===n&&(r=!1!==(l.filterBuilding=t)&&r),r},null,null)),Mi(30,16384,null,0,Ff,[xn,Pn],null,null),Li(1024,null,Of,function(e){return[e]},[Ff]),Mi(32,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),Li(2048,null,Nf,null,[pg]),Mi(34,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),Yl(35,0,null,null,3,"option",[],null,null,null,null,null)),Mi(36,147456,null,0,Uf,[Pn,xn,[2,Ff]],{value:[0,"value"]},null),Mi(37,147456,null,0,Bf,[Pn,xn,[8,null]],{value:[0,"value"]},null),(e()(),io(38,null,["",""])),(e()(),jl(16777216,null,null,1,null,OR)),Mi(40,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null),(e()(),Yl(41,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Yl(42,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(43,114688,null,0,cf,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),io(44,null,[" "," \xa0\xa0\xa0 "])),(e()(),Yl(45,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(46,114688,null,0,cf,[],{name:[0,"name"]},null),(e()(),io(47,null,[" "," "])),(e()(),Yl(48,0,null,null,7,"div",[["id","buildingsWrapper"]],null,null,null,null,null)),(e()(),Yl(49,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),Yl(50,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["Buildings"])),(e()(),jl(16777216,null,null,1,null,TR)),Mi(53,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,_R)),Mi(55,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,5,0),e(n,11,0,!t.demolishMode),e(n,13,0,t.demolishMode),e(n,15,0,!t.arrangeMode&&t.getBuildings().length>1),e(n,17,0,t.arrangeMode),e(n,19,0,!t.combineMode&&t.isUrbanPlanningEnabled()&&t.hasCombinableBuildings()),e(n,21,0,t.combineMode),e(n,23,0,!t.splitMode&&t.isUrbanPlanningEnabled()&&t.hasSplittableBuildings()),e(n,25,0,t.splitMode),e(n,32,0,t.filterBuilding),e(n,36,0,t.allBuildings),e(n,37,0,t.allBuildings),e(n,40,0,t.getUniqueBuildingsFromCurrentView()),e(n,43,0,"hammer","Workers","0 0 0 2px"),e(n,46,0,"land"),e(n,53,0,!t.arrangeMode),e(n,55,0,t.arrangeMode)},function(e,n){var t=n.component;e(n,29,0,Ei(n,34).ngClassUntouched,Ei(n,34).ngClassTouched,Ei(n,34).ngClassPristine,Ei(n,34).ngClassDirty,Ei(n,34).ngClassValid,Ei(n,34).ngClassInvalid,Ei(n,34).ngClassPending),e(n,38,0,t.getBuildingName(t.allBuildings)),e(n,44,0,t.getUnemployed()),e(n,47,0,t.getFreeLand())})}function AR(e){return so(0,[(e()(),Yl(0,0,null,null,1,"app-fort",[],null,[["document","keydown.escape"]],function(e,n,t){var r=!0;return"document:keydown.escape"===n&&(r=!1!==Ei(e,1).onKeydownHandler(t)&&r),r},IR,dR)),Mi(1,114688,null,0,hR,[Ig,iS,wg,Ag,vE,Rr],null,null)],function(e,n){e(n,1,0)},null)}var wR=ai("app-fort",hR,AR,{},{},[]),NR=function(e){function n(n,t,r,l,i){var o=e.call(this,t,n,r,i,ku.FOREST,Nu.FOREST)||this;return o.idService=l,o}return l(n,e),n.prototype.init=function(){var e=this;this.buildings.push(new Wm(this.servicesService,this.idService.getNextId()).build()),this.buildings.push(new ey(this.servicesService,this.idService.getNextId()).build()),this.buildings.forEach(function(n){return e.landService.takeLand(n.getSize())})},n.ngInjectableDef=ve({factory:function(){return new n(ze(Lg),ze(lS),ze(Sg),ze(rS),ze(iS))},token:n,providedIn:"root"}),n}(oS),PR=function(e){function n(n,t,r,l,i,o){var u=e.call(this,n,t,r,i,l,o,ku.FOREST)||this;return u.forestService=i,u}return l(n,e),n.prototype.getForestSize=function(){return this.landService.getForest()},n}(zO),DR=gl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:100%;max-height:100%;font-size:1em}#content[_ngcontent-%COMP%]{margin:.5%;display:flex;flex-direction:column;height:94%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#side[_ngcontent-%COMP%]{float:right;font-size:.9em;width:25%;margin:.5%;display:inline-block;vertical-align:bottom}#side[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:.8em;margin:0;padding:0;border:none;outline:0}#buildingsWrapper[_ngcontent-%COMP%]{height:85.5%}.buildings[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;height:100%;border:2px solid #000;overflow-y:auto;align-content:flex-start}.buildings[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}#title[_ngcontent-%COMP%]{text-align:center;border:2px solid #000;border-bottom:none}.off[_ngcontent-%COMP%]{background-color:#555}.buildingRegularWrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:.6%}.buildingDropWrapper[_ngcontent-%COMP%]{display:flex;margin:.6%;cursor:move}.buildingDropWrapper[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}.critical[_ngcontent-%COMP%]{color:#8b0000}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]],data:{}});function MR(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleDemolishMode()&&r),r},null,null)),(e()(),io(-1,null,["Demolish"]))],null,null)}function kR(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleDemolishMode()&&r),r},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function LR(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleArrangeMode()&&r),r},null,null)),(e()(),io(-1,null,["Arrange"]))],null,null)}function xR(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleArrangeMode()&&r),r},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function FR(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleCombineMode()&&r),r},null,null)),(e()(),io(-1,null,["Combine"]))],null,null)}function UR(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleCombineMode()&&r),r},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function HR(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleSplitMode()&&r),r},null,null)),(e()(),io(-1,null,["Split"]))],null,null)}function GR(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleSplitMode()&&r),r},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function BR(e){return so(0,[(e()(),Yl(0,0,null,null,3,"option",[],null,null,null,null,null)),Mi(1,147456,null,0,Uf,[Pn,xn,[2,Ff]],{value:[0,"value"]},null),Mi(2,147456,null,0,Bf,[Pn,xn,[8,null]],{value:[0,"value"]},null),(e()(),io(3,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,3,0,n.component.getBuildingName(n.context.$implicit))})}function VR(e){return so(0,[(e()(),Yl(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.getForestSize())})}function WR(e){return so(0,[(e()(),Yl(0,0,null,null,1,"span",[["class","critical"]],null,null,null,null,null)),(e()(),io(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.getForestSize())})}function jR(e){return so(0,[(e()(),Yl(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),Yl(1,0,null,null,1,"app-building",[],null,null,null,wO,dO)),Mi(2,114688,null,0,hO,[Ig,Sg,Lg,$g,uS,_g],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],building:[3,"building"],parentRegion:[4,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,2,0,t.demolishMode,t.combineMode,t.splitMode,n.context.$implicit,t.forestService)},null)}function YR(e){return so(0,[(e()(),Yl(0,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,jR)),Mi(2,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,2,0,n.component.getBuildings())},null)}function zR(e){return so(0,[(e()(),Yl(0,0,null,null,11,"div",[["cdkDropList",""],["class","buildingDropWrapper cdk-drop-list"]],[[8,"id",0],[2,"cdk-drop-list-dragging",null]],[[null,"cdkDropListDropped"]],function(e,n,t){var r=!0;return"cdkDropListDropped"===n&&(r=!1!==e.component.drop()&&r),r},null,null)),Mi(1,212992,[[2,4]],1,Fv,[Pn,bv,Rr,[2,Sm],[3,Lv]],{enterPredicate:[0,"enterPredicate"]},{dropped:"cdkDropListDropped"}),Qi(603979776,4,{_draggables:1}),Li(256,[[1,4]],Lv,void 0,[]),Li(2048,null,Tv,null,[Fv]),(e()(),Yl(5,16777216,null,null,6,"app-building",[["cdkDrag",""],["class","cdk-drag"]],[[2,"cdk-drag-dragging",null]],null,null,wO,dO)),Li(6144,null,Ov,null,[Nv]),Mi(7,4341760,[[4,4]],3,Nv,[Pn,[3,Tv],Zs,Zt,br,mm,bv,Iv,[2,Sm]],null,null),Qi(603979776,5,{_handles:1}),Qi(335544320,6,{_previewTemplate:0}),Qi(335544320,7,{_placeholderTemplate:0}),Mi(11,114688,null,0,hO,[Ig,Sg,Lg,$g,uS,_g],{demolishMode:[0,"demolishMode"],building:[1,"building"],parentRegion:[2,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,1,0,t.enter),e(n,11,0,t.demolishMode,n.context.$implicit,t.forestService)},function(e,n){e(n,0,0,Ei(n,1).id,Ei(n,1)._dragging),e(n,5,0,Ei(n,7)._hasStartedDragging&&Ei(n,7)._isDragging())})}function KR(e){return so(0,[(e()(),Yl(0,0,null,null,8,"div",[["cdkDropListGroup",""],["class","buildings"]],null,null,null,null,null)),Mi(1,147456,[[1,4]],0,Lv,[],null,null),(e()(),Yl(2,0,[["placeholder",1]],null,4,"div",[["cdkDropList",""],["class","cdk-drop-list"],["id","placeholder"]],[[8,"id",0],[2,"cdk-drop-list-dragging",null]],[[null,"cdkDropListDropped"]],function(e,n,t){var r=!0;return"cdkDropListDropped"===n&&(r=!1!==e.component.drop()&&r),r},null,null)),Li(6144,null,Tv,null,[Fv]),Mi(4,212992,[[2,4]],1,Fv,[Pn,bv,Rr,[2,Sm],[3,Lv]],{id:[0,"id"],enterPredicate:[1,"enterPredicate"]},{dropped:"cdkDropListDropped"}),Qi(603979776,3,{_draggables:1}),Li(256,[[1,4]],Lv,void 0,[]),(e()(),jl(16777216,null,null,1,null,zR)),Mi(8,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,4,0,"placeholder",t.enter),e(n,8,0,t.getBuildings())},function(e,n){e(n,2,0,Ei(n,4).id,Ei(n,4)._dragging)})}function qR(e){return so(0,[Qi(671088640,1,{listGroup:0}),Qi(671088640,2,{placeholder:0}),(e()(),Yl(2,0,null,null,60,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Yl(3,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),Yl(4,0,null,null,1,"app-top-menu",[],null,null,null,FO,PO)),Mi(5,114688,null,0,NO,[wg],null,null),(e()(),Yl(6,0,null,null,56,"div",[["id","content"]],null,null,null,null,null)),(e()(),Yl(7,0,null,null,33,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Yl(8,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.openBuildModal()&&r),r},null,null)),(e()(),io(-1,null,["Build"])),(e()(),jl(16777216,null,null,1,null,MR)),Mi(11,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,kR)),Mi(13,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,LR)),Mi(15,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,xR)),Mi(17,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,FR)),Mi(19,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,UR)),Mi(21,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,HR)),Mi(23,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,GR)),Mi(25,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(26,0,null,null,14,"div",[["id","side"]],null,null,null,null,null)),(e()(),io(-1,null,[" Filter:"])),(e()(),Yl(28,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(29,0,null,null,11,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var r=!0,l=e.component;return"change"===n&&(r=!1!==Ei(e,30).onChange(t.target.value)&&r),"blur"===n&&(r=!1!==Ei(e,30).onTouched()&&r),"change"===n&&(r=!1!==l.updateFilter(t)&&r),"ngModelChange"===n&&(r=!1!==(l.filterBuilding=t)&&r),r},null,null)),Mi(30,16384,null,0,Ff,[xn,Pn],null,null),Li(1024,null,Of,function(e){return[e]},[Ff]),Mi(32,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),Li(2048,null,Nf,null,[pg]),Mi(34,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),Yl(35,0,null,null,3,"option",[],null,null,null,null,null)),Mi(36,147456,null,0,Uf,[Pn,xn,[2,Ff]],{value:[0,"value"]},null),Mi(37,147456,null,0,Bf,[Pn,xn,[8,null]],{value:[0,"value"]},null),(e()(),io(38,null,["",""])),(e()(),jl(16777216,null,null,1,null,BR)),Mi(40,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null),(e()(),Yl(41,0,null,null,13,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Yl(42,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(43,114688,null,0,cf,[],{name:[0,"name"]},null),(e()(),jl(16777216,null,null,1,null,VR)),Mi(45,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,WR)),Mi(47,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),io(-1,null,[" \xa0\xa0 "])),(e()(),Yl(49,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(50,114688,null,0,cf,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),io(51,null,[" "," \xa0\xa0\xa0 "])),(e()(),Yl(52,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(53,114688,null,0,cf,[],{name:[0,"name"]},null),(e()(),io(54,null,[" "," "])),(e()(),Yl(55,0,null,null,7,"div",[["id","buildingsWrapper"]],null,null,null,null,null)),(e()(),Yl(56,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),Yl(57,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["Buildings"])),(e()(),jl(16777216,null,null,1,null,YR)),Mi(60,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,KR)),Mi(62,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,5,0),e(n,11,0,!t.demolishMode),e(n,13,0,t.demolishMode),e(n,15,0,!t.arrangeMode&&t.getBuildings().length>1),e(n,17,0,t.arrangeMode),e(n,19,0,!t.combineMode&&t.isUrbanPlanningEnabled()&&t.hasCombinableBuildings()),e(n,21,0,t.combineMode),e(n,23,0,!t.splitMode&&t.isUrbanPlanningEnabled()&&t.hasSplittableBuildings()),e(n,25,0,t.splitMode),e(n,32,0,t.filterBuilding),e(n,36,0,t.allBuildings),e(n,37,0,t.allBuildings),e(n,40,0,t.getUniqueBuildingsFromCurrentView()),e(n,43,0,"forest"),e(n,45,0,t.getForestSize()>=500),e(n,47,0,t.getForestSize()<500),e(n,50,0,"hammer","Workers","0 0 0 2px"),e(n,53,0,"land"),e(n,60,0,!t.arrangeMode),e(n,62,0,t.arrangeMode)},function(e,n){var t=n.component;e(n,29,0,Ei(n,34).ngClassUntouched,Ei(n,34).ngClassTouched,Ei(n,34).ngClassPristine,Ei(n,34).ngClassDirty,Ei(n,34).ngClassValid,Ei(n,34).ngClassInvalid,Ei(n,34).ngClassPending),e(n,38,0,t.getBuildingName(t.allBuildings)),e(n,51,0,t.getUnemployed()),e(n,54,0,t.getFreeLand())})}function $R(e){return so(0,[(e()(),Yl(0,0,null,null,1,"app-forest",[],null,[["document","keydown.escape"]],function(e,n,t){var r=!0;return"document:keydown.escape"===n&&(r=!1!==Ei(e,1).onKeydownHandler(t)&&r),r},qR,DR)),Mi(1,114688,null,0,PR,[Ig,iS,wg,Ag,NR,Rr],null,null)],function(e,n){e(n,1,0)},null)}var QR=ai("app-forest",PR,$R,{},{},[]),ZR=function(e){function n(n,t,r,l){return e.call(this,t,n,r,l,ku.FIELD,Nu.FIELD)||this}return l(n,e),n.ngInjectableDef=ve({factory:function(){return new n(ze(Lg),ze(lS),ze(Sg),ze(iS))},token:n,providedIn:"root"}),n}(oS),XR=function(e){function n(n,t,r,l,i,o){var u=e.call(this,n,t,r,i,l,o,ku.FIELD)||this;return u.fieldService=i,u}return l(n,e),n}(zO),JR=gl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:100%;max-height:100%;font-size:1em}#content[_ngcontent-%COMP%]{margin:.5%;display:flex;flex-direction:column;height:94%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#side[_ngcontent-%COMP%]{float:right;font-size:.9em;width:25%;margin:.5%;display:inline-block;vertical-align:bottom}#side[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:.8em;margin:0;padding:0;border:none;outline:0}#buildingsWrapper[_ngcontent-%COMP%]{height:85.5%}.buildings[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;height:100%;border:2px solid #000;overflow-y:auto;align-content:flex-start}.buildings[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}#title[_ngcontent-%COMP%]{text-align:center;border:2px solid #000;border-bottom:none}.off[_ngcontent-%COMP%]{background-color:#555}.buildingRegularWrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:.6%}.buildingDropWrapper[_ngcontent-%COMP%]{display:flex;margin:.6%;cursor:move}.buildingDropWrapper[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]],data:{}});function eT(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleDemolishMode()&&r),r},null,null)),(e()(),io(-1,null,["Demolish"]))],null,null)}function nT(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleDemolishMode()&&r),r},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function tT(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleArrangeMode()&&r),r},null,null)),(e()(),io(-1,null,["Arrange"]))],null,null)}function rT(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleArrangeMode()&&r),r},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function lT(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleCombineMode()&&r),r},null,null)),(e()(),io(-1,null,["Combine"]))],null,null)}function iT(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleCombineMode()&&r),r},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function oT(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleSplitMode()&&r),r},null,null)),(e()(),io(-1,null,["Split"]))],null,null)}function uT(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleSplitMode()&&r),r},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function sT(e){return so(0,[(e()(),Yl(0,0,null,null,3,"option",[],null,null,null,null,null)),Mi(1,147456,null,0,Uf,[Pn,xn,[2,Ff]],{value:[0,"value"]},null),Mi(2,147456,null,0,Bf,[Pn,xn,[8,null]],{value:[0,"value"]},null),(e()(),io(3,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,3,0,n.component.getBuildingName(n.context.$implicit))})}function aT(e){return so(0,[(e()(),Yl(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),Yl(1,0,null,null,1,"app-building",[],null,null,null,wO,dO)),Mi(2,114688,null,0,hO,[Ig,Sg,Lg,$g,uS,_g],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],building:[3,"building"],parentRegion:[4,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,2,0,t.demolishMode,t.combineMode,t.splitMode,n.context.$implicit,t.fieldService)},null)}function cT(e){return so(0,[(e()(),Yl(0,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,aT)),Mi(2,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,2,0,n.component.getBuildings())},null)}function pT(e){return so(0,[(e()(),Yl(0,0,null,null,11,"div",[["cdkDropList",""],["class","buildingDropWrapper cdk-drop-list"]],[[8,"id",0],[2,"cdk-drop-list-dragging",null]],[[null,"cdkDropListDropped"]],function(e,n,t){var r=!0;return"cdkDropListDropped"===n&&(r=!1!==e.component.drop()&&r),r},null,null)),Mi(1,212992,[[2,4]],1,Fv,[Pn,bv,Rr,[2,Sm],[3,Lv]],{enterPredicate:[0,"enterPredicate"]},{dropped:"cdkDropListDropped"}),Qi(603979776,4,{_draggables:1}),Li(256,[[1,4]],Lv,void 0,[]),Li(2048,null,Tv,null,[Fv]),(e()(),Yl(5,16777216,null,null,6,"app-building",[["cdkDrag",""],["class","cdk-drag"]],[[2,"cdk-drag-dragging",null]],null,null,wO,dO)),Li(6144,null,Ov,null,[Nv]),Mi(7,4341760,[[4,4]],3,Nv,[Pn,[3,Tv],Zs,Zt,br,mm,bv,Iv,[2,Sm]],null,null),Qi(603979776,5,{_handles:1}),Qi(335544320,6,{_previewTemplate:0}),Qi(335544320,7,{_placeholderTemplate:0}),Mi(11,114688,null,0,hO,[Ig,Sg,Lg,$g,uS,_g],{demolishMode:[0,"demolishMode"],building:[1,"building"],parentRegion:[2,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,1,0,t.enter),e(n,11,0,t.demolishMode,n.context.$implicit,t.fieldService)},function(e,n){e(n,0,0,Ei(n,1).id,Ei(n,1)._dragging),e(n,5,0,Ei(n,7)._hasStartedDragging&&Ei(n,7)._isDragging())})}function hT(e){return so(0,[(e()(),Yl(0,0,null,null,8,"div",[["cdkDropListGroup",""],["class","buildings"]],null,null,null,null,null)),Mi(1,147456,[[1,4]],0,Lv,[],null,null),(e()(),Yl(2,0,[["placeholder",1]],null,4,"div",[["cdkDropList",""],["class","cdk-drop-list"],["id","placeholder"]],[[8,"id",0],[2,"cdk-drop-list-dragging",null]],[[null,"cdkDropListDropped"]],function(e,n,t){var r=!0;return"cdkDropListDropped"===n&&(r=!1!==e.component.drop()&&r),r},null,null)),Li(6144,null,Tv,null,[Fv]),Mi(4,212992,[[2,4]],1,Fv,[Pn,bv,Rr,[2,Sm],[3,Lv]],{id:[0,"id"],enterPredicate:[1,"enterPredicate"]},{dropped:"cdkDropListDropped"}),Qi(603979776,3,{_draggables:1}),Li(256,[[1,4]],Lv,void 0,[]),(e()(),jl(16777216,null,null,1,null,pT)),Mi(8,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,4,0,"placeholder",t.enter),e(n,8,0,t.getBuildings())},function(e,n){e(n,2,0,Ei(n,4).id,Ei(n,4)._dragging)})}function dT(e){return so(0,[Qi(671088640,1,{listGroup:0}),Qi(671088640,2,{placeholder:0}),(e()(),Yl(2,0,null,null,53,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Yl(3,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),Yl(4,0,null,null,1,"app-top-menu",[],null,null,null,FO,PO)),Mi(5,114688,null,0,NO,[wg],null,null),(e()(),Yl(6,0,null,null,49,"div",[["id","content"]],null,null,null,null,null)),(e()(),Yl(7,0,null,null,33,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Yl(8,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.openBuildModal()&&r),r},null,null)),(e()(),io(-1,null,["Build"])),(e()(),jl(16777216,null,null,1,null,eT)),Mi(11,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,nT)),Mi(13,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,tT)),Mi(15,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,rT)),Mi(17,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,lT)),Mi(19,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,iT)),Mi(21,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,oT)),Mi(23,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,uT)),Mi(25,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(26,0,null,null,14,"div",[["id","side"]],null,null,null,null,null)),(e()(),io(-1,null,[" Filter:"])),(e()(),Yl(28,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(29,0,null,null,11,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var r=!0,l=e.component;return"change"===n&&(r=!1!==Ei(e,30).onChange(t.target.value)&&r),"blur"===n&&(r=!1!==Ei(e,30).onTouched()&&r),"change"===n&&(r=!1!==l.updateFilter(t)&&r),"ngModelChange"===n&&(r=!1!==(l.filterBuilding=t)&&r),r},null,null)),Mi(30,16384,null,0,Ff,[xn,Pn],null,null),Li(1024,null,Of,function(e){return[e]},[Ff]),Mi(32,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),Li(2048,null,Nf,null,[pg]),Mi(34,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),Yl(35,0,null,null,3,"option",[],null,null,null,null,null)),Mi(36,147456,null,0,Uf,[Pn,xn,[2,Ff]],{value:[0,"value"]},null),Mi(37,147456,null,0,Bf,[Pn,xn,[8,null]],{value:[0,"value"]},null),(e()(),io(38,null,["",""])),(e()(),jl(16777216,null,null,1,null,sT)),Mi(40,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null),(e()(),Yl(41,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Yl(42,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(43,114688,null,0,cf,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),io(44,null,[" "," \xa0\xa0\xa0 "])),(e()(),Yl(45,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(46,114688,null,0,cf,[],{name:[0,"name"]},null),(e()(),io(47,null,[" "," "])),(e()(),Yl(48,0,null,null,7,"div",[["id","buildingsWrapper"]],null,null,null,null,null)),(e()(),Yl(49,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),Yl(50,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["Buildings"])),(e()(),jl(16777216,null,null,1,null,cT)),Mi(53,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,hT)),Mi(55,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,5,0),e(n,11,0,!t.demolishMode),e(n,13,0,t.demolishMode),e(n,15,0,!t.arrangeMode&&t.getBuildings().length>1),e(n,17,0,t.arrangeMode),e(n,19,0,!t.combineMode&&t.isUrbanPlanningEnabled()&&t.hasCombinableBuildings()),e(n,21,0,t.combineMode),e(n,23,0,!t.splitMode&&t.isUrbanPlanningEnabled()&&t.hasSplittableBuildings()),e(n,25,0,t.splitMode),e(n,32,0,t.filterBuilding),e(n,36,0,t.allBuildings),e(n,37,0,t.allBuildings),e(n,40,0,t.getUniqueBuildingsFromCurrentView()),e(n,43,0,"hammer","Workers","0 0 0 2px"),e(n,46,0,"land"),e(n,53,0,!t.arrangeMode),e(n,55,0,t.arrangeMode)},function(e,n){var t=n.component;e(n,29,0,Ei(n,34).ngClassUntouched,Ei(n,34).ngClassTouched,Ei(n,34).ngClassPristine,Ei(n,34).ngClassDirty,Ei(n,34).ngClassValid,Ei(n,34).ngClassInvalid,Ei(n,34).ngClassPending),e(n,38,0,t.getBuildingName(t.allBuildings)),e(n,44,0,t.getUnemployed()),e(n,47,0,t.getFreeLand())})}function fT(e){return so(0,[(e()(),Yl(0,0,null,null,1,"app-field",[],null,[["document","keydown.escape"]],function(e,n,t){var r=!0;return"document:keydown.escape"===n&&(r=!1!==Ei(e,1).onKeydownHandler(t)&&r),r},dT,JR)),Mi(1,114688,null,0,XR,[Ig,iS,wg,Ag,ZR,Rr],null,null)],function(e,n){e(n,1,0)},null)}var gT=ai("app-field",XR,fT,{},{},[]),vT=function(e){function n(n,t,r,l){return e.call(this,t,n,r,l,ku.MOUNTAINS,Nu.MOUNTAINS)||this}return l(n,e),n.ngInjectableDef=ve({factory:function(){return new n(ze(Lg),ze(lS),ze(Sg),ze(iS))},token:n,providedIn:"root"}),n}(oS),mT=function(e){function n(n,t,r,l,i,o){var u=e.call(this,n,t,r,i,l,o,ku.MOUNTAINS)||this;return u.mountainsService=i,u}return l(n,e),n.prototype.getMountains=function(){return this.landService.getMountains()},n.prototype.getCoal=function(){return this.landService.getOre(vu.COAL)},n.prototype.getGoldOre=function(){return this.landService.getOre(vu.GOLD_ORE)},n.prototype.getSilverOre=function(){return this.landService.getOre(vu.SILVER_ORE)},n.prototype.getCopperOre=function(){return this.landService.getOre(vu.COPPER_ORE)},n.prototype.getTinOre=function(){return this.landService.getOre(vu.TIN_ORE)},n.prototype.getIronOre=function(){return this.landService.getOre(vu.IRON_ORE)},n}(zO),yT=gl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:100%;max-height:100%;font-size:1em}#content[_ngcontent-%COMP%]{margin:.5%;display:flex;flex-direction:column;height:94%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#side[_ngcontent-%COMP%]{float:right;font-size:.9em;width:25%;margin:.5%;display:inline-block;vertical-align:bottom}#side[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:.8em;margin:0;padding:0;border:none;outline:0}#buildingsWrapper[_ngcontent-%COMP%]{height:85.5%}.buildings[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;height:100%;border:2px solid #000;overflow-y:auto;align-content:flex-start}.buildings[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}#title[_ngcontent-%COMP%]{text-align:center;border:2px solid #000;border-bottom:none}.off[_ngcontent-%COMP%]{background-color:#555}.buildingRegularWrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:.6%}.buildingDropWrapper[_ngcontent-%COMP%]{display:flex;margin:.6%;cursor:move}.buildingDropWrapper[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]],data:{}});function ST(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleDemolishMode()&&r),r},null,null)),(e()(),io(-1,null,["Demolish"]))],null,null)}function ET(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleDemolishMode()&&r),r},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function bT(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleArrangeMode()&&r),r},null,null)),(e()(),io(-1,null,["Arrange"]))],null,null)}function OT(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleArrangeMode()&&r),r},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function RT(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleCombineMode()&&r),r},null,null)),(e()(),io(-1,null,["Combine"]))],null,null)}function TT(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleCombineMode()&&r),r},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function CT(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleSplitMode()&&r),r},null,null)),(e()(),io(-1,null,["Split"]))],null,null)}function _T(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleSplitMode()&&r),r},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function IT(e){return so(0,[(e()(),Yl(0,0,null,null,3,"option",[],null,null,null,null,null)),Mi(1,147456,null,0,Uf,[Pn,xn,[2,Ff]],{value:[0,"value"]},null),Mi(2,147456,null,0,Bf,[Pn,xn,[8,null]],{value:[0,"value"]},null),(e()(),io(3,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,3,0,n.component.getBuildingName(n.context.$implicit))})}function AT(e){return so(0,[(e()(),Yl(0,0,null,null,4,"span",[],null,null,null,null,null)),(e()(),io(-1,null,[" \xa0\xa0\xa0 "])),(e()(),Yl(2,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(3,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),io(4,null,[": "," "]))],function(e,n){e(n,3,0,"coal","resources","coal deposit")},function(e,n){e(n,4,0,n.component.getCoal())})}function wT(e){return so(0,[(e()(),Yl(0,0,null,null,4,"span",[],null,null,null,null,null)),(e()(),io(-1,null,[" \xa0\xa0\xa0 "])),(e()(),Yl(2,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(3,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),io(4,null,[": "," "]))],function(e,n){e(n,3,0,"gold_ore","resources","gold deposit")},function(e,n){e(n,4,0,n.component.getGoldOre())})}function NT(e){return so(0,[(e()(),Yl(0,0,null,null,4,"span",[],null,null,null,null,null)),(e()(),io(-1,null,[" \xa0\xa0\xa0 "])),(e()(),Yl(2,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(3,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),io(4,null,[": "," "]))],function(e,n){e(n,3,0,"silver_ore","resources","silver deposit")},function(e,n){e(n,4,0,n.component.getSilverOre())})}function PT(e){return so(0,[(e()(),Yl(0,0,null,null,4,"span",[],null,null,null,null,null)),(e()(),io(-1,null,[" \xa0\xa0\xa0 "])),(e()(),Yl(2,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(3,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),io(4,null,[": "," "]))],function(e,n){e(n,3,0,"copper_ore","resources","copper deposit")},function(e,n){e(n,4,0,n.component.getCopperOre())})}function DT(e){return so(0,[(e()(),Yl(0,0,null,null,4,"span",[],null,null,null,null,null)),(e()(),io(-1,null,[" \xa0\xa0\xa0 "])),(e()(),Yl(2,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(3,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),io(4,null,[": "," "]))],function(e,n){e(n,3,0,"tin_ore","resources","tin deposit")},function(e,n){e(n,4,0,n.component.getTinOre())})}function MT(e){return so(0,[(e()(),Yl(0,0,null,null,4,"span",[],null,null,null,null,null)),(e()(),io(-1,null,[" \xa0\xa0\xa0 "])),(e()(),Yl(2,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(3,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),io(4,null,[": "," "]))],function(e,n){e(n,3,0,"iron_ore","resources","iron deposit")},function(e,n){e(n,4,0,n.component.getIronOre())})}function kT(e){return so(0,[(e()(),Yl(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),Yl(1,0,null,null,1,"app-building",[],null,null,null,wO,dO)),Mi(2,114688,null,0,hO,[Ig,Sg,Lg,$g,uS,_g],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],building:[3,"building"],parentRegion:[4,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,2,0,t.demolishMode,t.combineMode,t.splitMode,n.context.$implicit,t.mountainsService)},null)}function LT(e){return so(0,[(e()(),Yl(0,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,kT)),Mi(2,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,2,0,n.component.getBuildings())},null)}function xT(e){return so(0,[(e()(),Yl(0,0,null,null,11,"div",[["cdkDropList",""],["class","buildingDropWrapper cdk-drop-list"]],[[8,"id",0],[2,"cdk-drop-list-dragging",null]],[[null,"cdkDropListDropped"]],function(e,n,t){var r=!0;return"cdkDropListDropped"===n&&(r=!1!==e.component.drop()&&r),r},null,null)),Mi(1,212992,[[2,4]],1,Fv,[Pn,bv,Rr,[2,Sm],[3,Lv]],{enterPredicate:[0,"enterPredicate"]},{dropped:"cdkDropListDropped"}),Qi(603979776,4,{_draggables:1}),Li(256,[[1,4]],Lv,void 0,[]),Li(2048,null,Tv,null,[Fv]),(e()(),Yl(5,16777216,null,null,6,"app-building",[["cdkDrag",""],["class","cdk-drag"]],[[2,"cdk-drag-dragging",null]],null,null,wO,dO)),Li(6144,null,Ov,null,[Nv]),Mi(7,4341760,[[4,4]],3,Nv,[Pn,[3,Tv],Zs,Zt,br,mm,bv,Iv,[2,Sm]],null,null),Qi(603979776,5,{_handles:1}),Qi(335544320,6,{_previewTemplate:0}),Qi(335544320,7,{_placeholderTemplate:0}),Mi(11,114688,null,0,hO,[Ig,Sg,Lg,$g,uS,_g],{demolishMode:[0,"demolishMode"],building:[1,"building"],parentRegion:[2,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,1,0,t.enter),e(n,11,0,t.demolishMode,n.context.$implicit,t.mountainsService)},function(e,n){e(n,0,0,Ei(n,1).id,Ei(n,1)._dragging),e(n,5,0,Ei(n,7)._hasStartedDragging&&Ei(n,7)._isDragging())})}function FT(e){return so(0,[(e()(),Yl(0,0,null,null,8,"div",[["cdkDropListGroup",""],["class","buildings"]],null,null,null,null,null)),Mi(1,147456,[[1,4]],0,Lv,[],null,null),(e()(),Yl(2,0,[["placeholder",1]],null,4,"div",[["cdkDropList",""],["class","cdk-drop-list"],["id","placeholder"]],[[8,"id",0],[2,"cdk-drop-list-dragging",null]],[[null,"cdkDropListDropped"]],function(e,n,t){var r=!0;return"cdkDropListDropped"===n&&(r=!1!==e.component.drop()&&r),r},null,null)),Li(6144,null,Tv,null,[Fv]),Mi(4,212992,[[2,4]],1,Fv,[Pn,bv,Rr,[2,Sm],[3,Lv]],{id:[0,"id"],enterPredicate:[1,"enterPredicate"]},{dropped:"cdkDropListDropped"}),Qi(603979776,3,{_draggables:1}),Li(256,[[1,4]],Lv,void 0,[]),(e()(),jl(16777216,null,null,1,null,xT)),Mi(8,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,4,0,"placeholder",t.enter),e(n,8,0,t.getBuildings())},function(e,n){e(n,2,0,Ei(n,4).id,Ei(n,4)._dragging)})}function UT(e){return so(0,[Qi(671088640,1,{listGroup:0}),Qi(671088640,2,{placeholder:0}),(e()(),Yl(2,0,null,null,68,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Yl(3,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),Yl(4,0,null,null,1,"app-top-menu",[],null,null,null,FO,PO)),Mi(5,114688,null,0,NO,[wg],null,null),(e()(),Yl(6,0,null,null,64,"div",[["id","content"]],null,null,null,null,null)),(e()(),Yl(7,0,null,null,33,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Yl(8,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.openBuildModal()&&r),r},null,null)),(e()(),io(-1,null,["Build"])),(e()(),jl(16777216,null,null,1,null,ST)),Mi(11,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,ET)),Mi(13,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,bT)),Mi(15,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,OT)),Mi(17,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,RT)),Mi(19,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,TT)),Mi(21,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,CT)),Mi(23,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,_T)),Mi(25,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(26,0,null,null,14,"div",[["id","side"]],null,null,null,null,null)),(e()(),io(-1,null,[" Filter:"])),(e()(),Yl(28,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(29,0,null,null,11,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var r=!0,l=e.component;return"change"===n&&(r=!1!==Ei(e,30).onChange(t.target.value)&&r),"blur"===n&&(r=!1!==Ei(e,30).onTouched()&&r),"change"===n&&(r=!1!==l.updateFilter(t)&&r),"ngModelChange"===n&&(r=!1!==(l.filterBuilding=t)&&r),r},null,null)),Mi(30,16384,null,0,Ff,[xn,Pn],null,null),Li(1024,null,Of,function(e){return[e]},[Ff]),Mi(32,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),Li(2048,null,Nf,null,[pg]),Mi(34,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),Yl(35,0,null,null,3,"option",[],null,null,null,null,null)),Mi(36,147456,null,0,Uf,[Pn,xn,[2,Ff]],{value:[0,"value"]},null),Mi(37,147456,null,0,Bf,[Pn,xn,[8,null]],{value:[0,"value"]},null),(e()(),io(38,null,["",""])),(e()(),jl(16777216,null,null,1,null,IT)),Mi(40,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null),(e()(),Yl(41,0,null,null,21,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Yl(42,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(43,114688,null,0,cf,[],{name:[0,"name"]},null),(e()(),io(44,null,[" "," \xa0\xa0 "])),(e()(),Yl(45,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(46,114688,null,0,cf,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),io(47,null,[" "," \xa0\xa0\xa0 "])),(e()(),Yl(48,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(49,114688,null,0,cf,[],{name:[0,"name"]},null),(e()(),io(50,null,[" "," "])),(e()(),jl(16777216,null,null,1,null,AT)),Mi(52,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,wT)),Mi(54,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,NT)),Mi(56,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,PT)),Mi(58,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,DT)),Mi(60,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,MT)),Mi(62,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(63,0,null,null,7,"div",[["id","buildingsWrapper"]],null,null,null,null,null)),(e()(),Yl(64,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),Yl(65,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["Buildings"])),(e()(),jl(16777216,null,null,1,null,LT)),Mi(68,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,FT)),Mi(70,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,5,0),e(n,11,0,!t.demolishMode),e(n,13,0,t.demolishMode),e(n,15,0,!t.arrangeMode&&t.getBuildings().length>1),e(n,17,0,t.arrangeMode),e(n,19,0,!t.combineMode&&t.isUrbanPlanningEnabled()&&t.hasCombinableBuildings()),e(n,21,0,t.combineMode),e(n,23,0,!t.splitMode&&t.isUrbanPlanningEnabled()&&t.hasSplittableBuildings()),e(n,25,0,t.splitMode),e(n,32,0,t.filterBuilding),e(n,36,0,t.allBuildings),e(n,37,0,t.allBuildings),e(n,40,0,t.getUniqueBuildingsFromCurrentView()),e(n,43,0,"mountains"),e(n,46,0,"hammer","Workers","0 0 0 2px"),e(n,49,0,"land"),e(n,52,0,t.getCoal()>0),e(n,54,0,t.getGoldOre()>0),e(n,56,0,t.getSilverOre()>0),e(n,58,0,t.getCopperOre()>0),e(n,60,0,t.getTinOre()>0),e(n,62,0,t.getIronOre()>0),e(n,68,0,!t.arrangeMode),e(n,70,0,t.arrangeMode)},function(e,n){var t=n.component;e(n,29,0,Ei(n,34).ngClassUntouched,Ei(n,34).ngClassTouched,Ei(n,34).ngClassPristine,Ei(n,34).ngClassDirty,Ei(n,34).ngClassValid,Ei(n,34).ngClassInvalid,Ei(n,34).ngClassPending),e(n,38,0,t.getBuildingName(t.allBuildings)),e(n,44,0,t.getMountains()),e(n,47,0,t.getUnemployed()),e(n,50,0,t.getFreeLand())})}function HT(e){return so(0,[(e()(),Yl(0,0,null,null,1,"app-mountains",[],null,[["document","keydown.escape"]],function(e,n,t){var r=!0;return"document:keydown.escape"===n&&(r=!1!==Ei(e,1).onKeydownHandler(t)&&r),r},UT,yT)),Mi(1,114688,null,0,mT,[Ig,iS,wg,Ag,vT,Rr],null,null)],function(e,n){e(n,1,0)},null)}var GT=ai("app-mountains",mT,HT,{},{},[]),BT=function(e){function n(n,t,r,l,i){var o=e.call(this,t,n,r,l,ku.PLATEAU,Nu.PLATEAU)||this;return o.gameService=i,o}return l(n,e),n.prototype.reset=function(n,t){n?e.prototype.reset.call(this,n,t):t?this.buildings=[]:(this.buildings=this.buildings.filter(function(e){return e.isFinished()}),this.buildings.length>0&&this.gameService.enable(Eu.PLATEAU),this.getBuildings().forEach(function(e){return e.verifyWonderEffects()}))},n.ngInjectableDef=ve({factory:function(){return new n(ze(Lg),ze(lS),ze(Sg),ze(iS),ze(wg))},token:n,providedIn:"root"}),n}(oS),VT=function(e){function n(n,t,r,l,i,o,u){var s=e.call(this,n,t,r,o,l,u,ku.PLATEAU)||this;return s.techService=i,s.plateauService=o,s}return l(n,e),n.prototype.areWonderBuildingsResearched=function(){return!Gu.production||this.techService.isResearched(Su.WONDER_BUILDINGS)},n}(zO),WT=gl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:100%;max-height:100%;font-size:1em}#content[_ngcontent-%COMP%]{margin:.5%;display:flex;flex-direction:column;height:94%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#side[_ngcontent-%COMP%]{float:right;font-size:.9em;width:25%;margin:.5%;display:inline-block;vertical-align:bottom}#side[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:.8em;margin:0;padding:0;border:none;outline:0}#buildingsWrapper[_ngcontent-%COMP%]{height:85.5%}.buildings[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;height:100%;border:2px solid #000;overflow-y:auto;align-content:flex-start}.buildings[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}#title[_ngcontent-%COMP%]{text-align:center;border:2px solid #000;border-bottom:none}.off[_ngcontent-%COMP%]{background-color:#555}.buildingRegularWrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:.6%}.buildingDropWrapper[_ngcontent-%COMP%]{display:flex;margin:.6%;cursor:move}.buildingDropWrapper[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]],data:{}});function jT(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.openBuildModal()&&r),r},null,null)),(e()(),io(-1,null,["Build"]))],null,null)}function YT(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleArrangeMode()&&r),r},null,null)),(e()(),io(-1,null,["Arrange"]))],null,null)}function zT(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleArrangeMode()&&r),r},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function KT(e){return so(0,[(e()(),Yl(0,0,null,null,3,"option",[],null,null,null,null,null)),Mi(1,147456,null,0,Uf,[Pn,xn,[2,Ff]],{value:[0,"value"]},null),Mi(2,147456,null,0,Bf,[Pn,xn,[8,null]],{value:[0,"value"]},null),(e()(),io(3,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,3,0,n.component.getBuildingName(n.context.$implicit))})}function qT(e){return so(0,[(e()(),Yl(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),Yl(1,0,null,null,1,"app-building",[],null,null,null,wO,dO)),Mi(2,114688,null,0,hO,[Ig,Sg,Lg,$g,uS,_g],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],building:[3,"building"],parentRegion:[4,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,2,0,t.demolishMode,t.combineMode,t.splitMode,n.context.$implicit,t.plateauService)},null)}function $T(e){return so(0,[(e()(),Yl(0,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,qT)),Mi(2,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,2,0,n.component.getBuildings())},null)}function QT(e){return so(0,[(e()(),Yl(0,0,null,null,11,"div",[["cdkDropList",""],["class","buildingDropWrapper cdk-drop-list"]],[[8,"id",0],[2,"cdk-drop-list-dragging",null]],[[null,"cdkDropListDropped"]],function(e,n,t){var r=!0;return"cdkDropListDropped"===n&&(r=!1!==e.component.drop()&&r),r},null,null)),Mi(1,212992,[[2,4]],1,Fv,[Pn,bv,Rr,[2,Sm],[3,Lv]],{enterPredicate:[0,"enterPredicate"]},{dropped:"cdkDropListDropped"}),Qi(603979776,4,{_draggables:1}),Li(256,[[1,4]],Lv,void 0,[]),Li(2048,null,Tv,null,[Fv]),(e()(),Yl(5,16777216,null,null,6,"app-building",[["cdkDrag",""],["class","cdk-drag"]],[[2,"cdk-drag-dragging",null]],null,null,wO,dO)),Li(6144,null,Ov,null,[Nv]),Mi(7,4341760,[[4,4]],3,Nv,[Pn,[3,Tv],Zs,Zt,br,mm,bv,Iv,[2,Sm]],null,null),Qi(603979776,5,{_handles:1}),Qi(335544320,6,{_previewTemplate:0}),Qi(335544320,7,{_placeholderTemplate:0}),Mi(11,114688,null,0,hO,[Ig,Sg,Lg,$g,uS,_g],{demolishMode:[0,"demolishMode"],building:[1,"building"],parentRegion:[2,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,1,0,t.enter),e(n,11,0,t.demolishMode,n.context.$implicit,t.plateauService)},function(e,n){e(n,0,0,Ei(n,1).id,Ei(n,1)._dragging),e(n,5,0,Ei(n,7)._hasStartedDragging&&Ei(n,7)._isDragging())})}function ZT(e){return so(0,[(e()(),Yl(0,0,null,null,8,"div",[["cdkDropListGroup",""],["class","buildings"]],null,null,null,null,null)),Mi(1,147456,[[1,4]],0,Lv,[],null,null),(e()(),Yl(2,0,[["placeholder",1]],null,4,"div",[["cdkDropList",""],["class","cdk-drop-list"],["id","placeholder"]],[[8,"id",0],[2,"cdk-drop-list-dragging",null]],[[null,"cdkDropListDropped"]],function(e,n,t){var r=!0;return"cdkDropListDropped"===n&&(r=!1!==e.component.drop()&&r),r},null,null)),Li(6144,null,Tv,null,[Fv]),Mi(4,212992,[[2,4]],1,Fv,[Pn,bv,Rr,[2,Sm],[3,Lv]],{id:[0,"id"],enterPredicate:[1,"enterPredicate"]},{dropped:"cdkDropListDropped"}),Qi(603979776,3,{_draggables:1}),Li(256,[[1,4]],Lv,void 0,[]),(e()(),jl(16777216,null,null,1,null,QT)),Mi(8,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,4,0,"placeholder",t.enter),e(n,8,0,t.getBuildings())},function(e,n){e(n,2,0,Ei(n,4).id,Ei(n,4)._dragging)})}function XT(e){return so(0,[Qi(671088640,1,{listGroup:0}),Qi(671088640,2,{placeholder:0}),(e()(),Yl(2,0,null,null,41,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Yl(3,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),Yl(4,0,null,null,1,"app-top-menu",[],null,null,null,FO,PO)),Mi(5,114688,null,0,NO,[wg],null,null),(e()(),Yl(6,0,null,null,37,"div",[["id","content"]],null,null,null,null,null)),(e()(),Yl(7,0,null,null,21,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,jT)),Mi(9,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,YT)),Mi(11,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,zT)),Mi(13,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(14,0,null,null,14,"div",[["id","side"]],null,null,null,null,null)),(e()(),io(-1,null,[" Filter:"])),(e()(),Yl(16,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(17,0,null,null,11,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var r=!0,l=e.component;return"change"===n&&(r=!1!==Ei(e,18).onChange(t.target.value)&&r),"blur"===n&&(r=!1!==Ei(e,18).onTouched()&&r),"change"===n&&(r=!1!==l.updateFilter(t)&&r),"ngModelChange"===n&&(r=!1!==(l.filterBuilding=t)&&r),r},null,null)),Mi(18,16384,null,0,Ff,[xn,Pn],null,null),Li(1024,null,Of,function(e){return[e]},[Ff]),Mi(20,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),Li(2048,null,Nf,null,[pg]),Mi(22,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),Yl(23,0,null,null,3,"option",[],null,null,null,null,null)),Mi(24,147456,null,0,Uf,[Pn,xn,[2,Ff]],{value:[0,"value"]},null),Mi(25,147456,null,0,Bf,[Pn,xn,[8,null]],{value:[0,"value"]},null),(e()(),io(26,null,["",""])),(e()(),jl(16777216,null,null,1,null,KT)),Mi(28,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null),(e()(),Yl(29,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Yl(30,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(31,114688,null,0,cf,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),io(32,null,[" "," \xa0\xa0\xa0 "])),(e()(),Yl(33,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(34,114688,null,0,cf,[],{name:[0,"name"]},null),(e()(),io(35,null,[" "," "])),(e()(),Yl(36,0,null,null,7,"div",[["id","buildingsWrapper"]],null,null,null,null,null)),(e()(),Yl(37,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),Yl(38,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["Buildings"])),(e()(),jl(16777216,null,null,1,null,$T)),Mi(41,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,ZT)),Mi(43,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,5,0),e(n,9,0,t.areWonderBuildingsResearched()),e(n,11,0,!t.arrangeMode&&t.getBuildings().length>1),e(n,13,0,t.arrangeMode),e(n,20,0,t.filterBuilding),e(n,24,0,t.allBuildings),e(n,25,0,t.allBuildings),e(n,28,0,t.getUniqueBuildingsFromCurrentView()),e(n,31,0,"hammer","Workers","0 0 0 2px"),e(n,34,0,"land"),e(n,41,0,!t.arrangeMode),e(n,43,0,t.arrangeMode)},function(e,n){var t=n.component;e(n,17,0,Ei(n,22).ngClassUntouched,Ei(n,22).ngClassTouched,Ei(n,22).ngClassPristine,Ei(n,22).ngClassDirty,Ei(n,22).ngClassValid,Ei(n,22).ngClassInvalid,Ei(n,22).ngClassPending),e(n,26,0,t.getBuildingName(t.allBuildings)),e(n,32,0,t.getUnemployed()),e(n,35,0,t.getFreeLand())})}function JT(e){return so(0,[(e()(),Yl(0,0,null,null,1,"app-field",[],null,[["document","keydown.escape"]],function(e,n,t){var r=!0;return"document:keydown.escape"===n&&(r=!1!==Ei(e,1).onKeydownHandler(t)&&r),r},XT,WT)),Mi(1,114688,null,0,VT,[Ig,iS,wg,Ag,SS,BT,Rr],null,null)],function(e,n){e(n,1,0)},null)}var eC=ai("app-field",VT,JT,{},{},[]),nC=function(e){function n(n,t,r,l,i){var o=e.call(this,t,n,r,i,ku.SEA,Nu.SEA)||this;return o.idService=l,o.seaBuildings=[],o}return l(n,e),n.prototype.init=function(){this.seaBuildings.push(new py(this.servicesService,this.idService.getNextId(),200))},n.prototype.reset=function(n,t){this.seaBuildings=[],e.prototype.reset.call(this,n,t)},n.prototype.tick=function(e){var n=this;this.seaBuildings.filter(function(e){return e.getBuildingType()===bu.SCHOOL_OF_FISH}).map(function(e){return e}).filter(function(e){return e.getFish()>ts.SEA.SCHOOL_OF_FISH.SPLIT_THRESHOLD}).forEach(function(e){if(1===Mu.randomBetween(1,ts.SEA.SCHOOL_OF_FISH.SPLIT_CHANCE)){var t=Math.floor(e.getFish()/2);e.reduceFish(t),n.seaBuildings.push(new py(n.servicesService,n.idService.getNextId(),t))}}),0===this.seaBuildings.filter(function(e){return e.getBuildingType()===bu.SCHOOL_OF_FISH}).length&&1===Mu.randomBetween(1,ts.SEA.SCHOOL_OF_FISH.NEW_SCHOOL_CHANCE)&&this.seaBuildings.push(new py(this.servicesService,this.idService.getNextId(),ts.SEA.SCHOOL_OF_FISH.NEW_SCHOOL_SIZE)),0===this.getSharksAmount()&&this.getFishAmount()>ts.SEA.SHARKS.BREED_THRESHOLD&&this.seaBuildings.push(new xy(this.servicesService,this.idService.getNextId(),1)),this.seaBuildings=this.seaBuildings.filter(function(e){return e.getBuildingType()!==bu.SHARKS||0!==e.getSharks()}),this.buildings.forEach(function(n){return n.tick(e)}),this.seaBuildings.forEach(function(n){return n.tick(e)})},n.prototype.save=function(){return{buildings:this.buildings,seaBuildings:this.seaBuildings}},n.prototype.load=function(e){this.buildings=[],this.seaBuildings=[];for(var n=0,t=e.buildings;n<t.length;n++)this.buildings.push(this.buildingFactoryService.loadBuilding(t[n]));for(var r=0,l=e.seaBuildings;r<l.length;r++)this.seaBuildings.push(this.buildingFactoryService.loadBuilding(l[r]))},n.prototype.addSeaBuilding=function(e){this.seaBuildings.push(e)},n.prototype.getSeaBuildings=function(){return this.seaBuildings},n.prototype.reduceFish=function(e){var n=this.seaBuildings.filter(function(e){return e.getBuildingType()===bu.SCHOOL_OF_FISH});return n.length>0&&!!n[0].reduceFish(e)&&(0===n[0].getFish()&&this.seaBuildings.shift(),!0)},n.prototype.getFishAmount=function(){var e=0;return this.seaBuildings.filter(function(e){return e.getBuildingType()===bu.SCHOOL_OF_FISH}).map(function(e){return e}).forEach(function(n){return e+=n.getFish()}),e},n.prototype.getSharksAmount=function(){var e=0;return this.seaBuildings.filter(function(e){return e.getBuildingType()===bu.SHARKS}).map(function(e){return e}).forEach(function(n){return e+=n.getSharks()}),e},n.ngInjectableDef=ve({factory:function(){return new n(ze(Lg),ze(lS),ze(Sg),ze(rS),ze(iS))},token:n,providedIn:"root"}),n}(oS),tC=function(e){function n(n,t,r,l,i,o){var u=e.call(this,n,t,r,i,l,o,ku.SEA)||this;return u.seaService=i,u}return l(n,e),n.prototype.getSeaBuildings=function(){return this.seaService.getSeaBuildings()},n}(zO),rC=gl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:100%;max-height:100%;font-size:1em}#content[_ngcontent-%COMP%]{margin:.5%;display:flex;flex-direction:column;height:94%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#side[_ngcontent-%COMP%]{float:right;font-size:.9em;width:25%;margin:.5%;display:inline-block;vertical-align:bottom}#side[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:.8em;margin:0;padding:0;border:none;outline:0}#buildingsWrapper[_ngcontent-%COMP%]{height:21.5%;margin-bottom:30px}#seaWrapper[_ngcontent-%COMP%]{height:59%}.buildings[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;height:100%;border:2px solid #000;overflow-y:auto;align-content:flex-start}.buildings[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}.title[_ngcontent-%COMP%]{text-align:center;border:2px solid #000;border-bottom:none}.off[_ngcontent-%COMP%]{background-color:#555}.buildingRegularWrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:.6%}.buildingDropWrapper[_ngcontent-%COMP%]{display:flex;margin:.6%;cursor:move}.buildingDropWrapper[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]],data:{}});function lC(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleDemolishMode()&&r),r},null,null)),(e()(),io(-1,null,["Demolish"]))],null,null)}function iC(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleDemolishMode()&&r),r},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function oC(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleArrangeMode()&&r),r},null,null)),(e()(),io(-1,null,["Arrange"]))],null,null)}function uC(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleArrangeMode()&&r),r},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function sC(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleCombineMode()&&r),r},null,null)),(e()(),io(-1,null,["Combine"]))],null,null)}function aC(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleCombineMode()&&r),r},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function cC(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleSplitMode()&&r),r},null,null)),(e()(),io(-1,null,["Split"]))],null,null)}function pC(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleSplitMode()&&r),r},null,null)),(e()(),io(-1,null,["Stop"]))],null,null)}function hC(e){return so(0,[(e()(),Yl(0,0,null,null,3,"option",[],null,null,null,null,null)),Mi(1,147456,null,0,Uf,[Pn,xn,[2,Ff]],{value:[0,"value"]},null),Mi(2,147456,null,0,Bf,[Pn,xn,[8,null]],{value:[0,"value"]},null),(e()(),io(3,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,3,0,n.component.getBuildingName(n.context.$implicit))})}function dC(e){return so(0,[(e()(),Yl(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),Yl(1,0,null,null,1,"app-building",[],null,null,null,wO,dO)),Mi(2,114688,null,0,hO,[Ig,Sg,Lg,$g,uS,_g],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],building:[3,"building"],parentRegion:[4,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,2,0,t.demolishMode,t.combineMode,t.splitMode,n.context.$implicit,t.seaService)},null)}function fC(e){return so(0,[(e()(),Yl(0,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,dC)),Mi(2,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,2,0,n.component.getBuildings())},null)}function gC(e){return so(0,[(e()(),Yl(0,0,null,null,11,"div",[["cdkDropList",""],["class","buildingDropWrapper cdk-drop-list"]],[[8,"id",0],[2,"cdk-drop-list-dragging",null]],[[null,"cdkDropListDropped"]],function(e,n,t){var r=!0;return"cdkDropListDropped"===n&&(r=!1!==e.component.drop()&&r),r},null,null)),Mi(1,212992,[[2,4]],1,Fv,[Pn,bv,Rr,[2,Sm],[3,Lv]],{enterPredicate:[0,"enterPredicate"]},{dropped:"cdkDropListDropped"}),Qi(603979776,4,{_draggables:1}),Li(256,[[1,4]],Lv,void 0,[]),Li(2048,null,Tv,null,[Fv]),(e()(),Yl(5,16777216,null,null,6,"app-building",[["cdkDrag",""],["class","cdk-drag"]],[[2,"cdk-drag-dragging",null]],null,null,wO,dO)),Li(6144,null,Ov,null,[Nv]),Mi(7,4341760,[[4,4]],3,Nv,[Pn,[3,Tv],Zs,Zt,br,mm,bv,Iv,[2,Sm]],null,null),Qi(603979776,5,{_handles:1}),Qi(335544320,6,{_previewTemplate:0}),Qi(335544320,7,{_placeholderTemplate:0}),Mi(11,114688,null,0,hO,[Ig,Sg,Lg,$g,uS,_g],{demolishMode:[0,"demolishMode"],building:[1,"building"],parentRegion:[2,"parentRegion"]},null)],function(e,n){var t=n.component;e(n,1,0,t.enter),e(n,11,0,t.demolishMode,n.context.$implicit,t.seaService)},function(e,n){e(n,0,0,Ei(n,1).id,Ei(n,1)._dragging),e(n,5,0,Ei(n,7)._hasStartedDragging&&Ei(n,7)._isDragging())})}function vC(e){return so(0,[(e()(),Yl(0,0,null,null,8,"div",[["cdkDropListGroup",""],["class","buildings"]],null,null,null,null,null)),Mi(1,147456,[[1,4]],0,Lv,[],null,null),(e()(),Yl(2,0,[["placeholder",1]],null,4,"div",[["cdkDropList",""],["class","cdk-drop-list"],["id","placeholder"]],[[8,"id",0],[2,"cdk-drop-list-dragging",null]],[[null,"cdkDropListDropped"]],function(e,n,t){var r=!0;return"cdkDropListDropped"===n&&(r=!1!==e.component.drop()&&r),r},null,null)),Li(6144,null,Tv,null,[Fv]),Mi(4,212992,[[2,4]],1,Fv,[Pn,bv,Rr,[2,Sm],[3,Lv]],{id:[0,"id"],enterPredicate:[1,"enterPredicate"]},{dropped:"cdkDropListDropped"}),Qi(603979776,3,{_draggables:1}),Li(256,[[1,4]],Lv,void 0,[]),(e()(),jl(16777216,null,null,1,null,gC)),Mi(8,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,4,0,"placeholder",t.enter),e(n,8,0,t.getBuildings())},function(e,n){e(n,2,0,Ei(n,4).id,Ei(n,4)._dragging)})}function mC(e){return so(0,[(e()(),Yl(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),Yl(1,0,null,null,1,"app-building",[],null,null,null,wO,dO)),Mi(2,114688,null,0,hO,[Ig,Sg,Lg,$g,uS,_g],{building:[0,"building"],parentRegion:[1,"parentRegion"]},null)],function(e,n){e(n,2,0,n.context.$implicit,n.component.seaService)},null)}function yC(e){return so(0,[Qi(671088640,1,{listGroup:0}),Qi(671088640,2,{placeholder:0}),(e()(),Yl(2,0,null,null,62,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Yl(3,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),Yl(4,0,null,null,1,"app-top-menu",[],null,null,null,FO,PO)),Mi(5,114688,null,0,NO,[wg],null,null),(e()(),Yl(6,0,null,null,58,"div",[["id","content"]],null,null,null,null,null)),(e()(),Yl(7,0,null,null,33,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Yl(8,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.openBuildModal()&&r),r},null,null)),(e()(),io(-1,null,["Build"])),(e()(),jl(16777216,null,null,1,null,lC)),Mi(11,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,iC)),Mi(13,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,oC)),Mi(15,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,uC)),Mi(17,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,sC)),Mi(19,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,aC)),Mi(21,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,cC)),Mi(23,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,pC)),Mi(25,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(26,0,null,null,14,"div",[["id","side"]],null,null,null,null,null)),(e()(),io(-1,null,[" Filter:"])),(e()(),Yl(28,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(29,0,null,null,11,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var r=!0,l=e.component;return"change"===n&&(r=!1!==Ei(e,30).onChange(t.target.value)&&r),"blur"===n&&(r=!1!==Ei(e,30).onTouched()&&r),"change"===n&&(r=!1!==l.updateFilter(t)&&r),"ngModelChange"===n&&(r=!1!==(l.filterBuilding=t)&&r),r},null,null)),Mi(30,16384,null,0,Ff,[xn,Pn],null,null),Li(1024,null,Of,function(e){return[e]},[Ff]),Mi(32,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),Li(2048,null,Nf,null,[pg]),Mi(34,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),Yl(35,0,null,null,3,"option",[],null,null,null,null,null)),Mi(36,147456,null,0,Uf,[Pn,xn,[2,Ff]],{value:[0,"value"]},null),Mi(37,147456,null,0,Bf,[Pn,xn,[8,null]],{value:[0,"value"]},null),(e()(),io(38,null,["",""])),(e()(),jl(16777216,null,null,1,null,hC)),Mi(40,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null),(e()(),Yl(41,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Yl(42,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(43,114688,null,0,cf,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),io(44,null,[" "," \xa0\xa0\xa0 "])),(e()(),Yl(45,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(46,114688,null,0,cf,[],{name:[0,"name"]},null),(e()(),io(47,null,[" "," "])),(e()(),Yl(48,0,null,null,7,"div",[["id","buildingsWrapper"]],null,null,null,null,null)),(e()(),Yl(49,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),Yl(50,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["Buildings"])),(e()(),jl(16777216,null,null,1,null,fC)),Mi(53,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,vC)),Mi(55,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(56,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(57,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(58,0,null,null,6,"div",[["id","seaWrapper"]],null,null,null,null,null)),(e()(),Yl(59,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),Yl(60,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["Sea"])),(e()(),Yl(62,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,mC)),Mi(64,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,5,0),e(n,11,0,!t.demolishMode),e(n,13,0,t.demolishMode),e(n,15,0,!t.arrangeMode&&t.getBuildings().length>1),e(n,17,0,t.arrangeMode),e(n,19,0,!t.combineMode&&t.isUrbanPlanningEnabled()&&t.hasCombinableBuildings()),e(n,21,0,t.combineMode),e(n,23,0,!t.splitMode&&t.isUrbanPlanningEnabled()&&t.hasSplittableBuildings()),e(n,25,0,t.splitMode),e(n,32,0,t.filterBuilding),e(n,36,0,t.allBuildings),e(n,37,0,t.allBuildings),e(n,40,0,t.getUniqueBuildingsFromCurrentView()),e(n,43,0,"hammer","Workers","0 0 0 2px"),e(n,46,0,"land"),e(n,53,0,!t.arrangeMode),e(n,55,0,t.arrangeMode),e(n,64,0,t.getSeaBuildings())},function(e,n){var t=n.component;e(n,29,0,Ei(n,34).ngClassUntouched,Ei(n,34).ngClassTouched,Ei(n,34).ngClassPristine,Ei(n,34).ngClassDirty,Ei(n,34).ngClassValid,Ei(n,34).ngClassInvalid,Ei(n,34).ngClassPending),e(n,38,0,t.getBuildingName(t.allBuildings)),e(n,44,0,t.getUnemployed()),e(n,47,0,t.getFreeLand())})}function SC(e){return so(0,[(e()(),Yl(0,0,null,null,1,"app-sea",[],null,[["document","keydown.escape"]],function(e,n,t){var r=!0;return"document:keydown.escape"===n&&(r=!1!==Ei(e,1).onKeydownHandler(t)&&r),r},yC,rC)),Mi(1,114688,null,0,tC,[Ig,iS,wg,Ag,nC,Rr],null,null)],function(e,n){e(n,1,0)},null)}var EC=ai("app-sea",tC,SC,{},{},[]),bC=function(){function e(e,n,t){this.rd=e,this.el=n,this.modalService=t,this.param="",this.element=n.nativeElement}return e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){var e=this,n=this;this.id&&(document.body.appendChild(this.element),this.rd.listen(this.element,"click",function(t){var r=t.target;null===r.closest(".modal-body")&&"BUTTON"!==r.tagName&&"tutorial-modal"!==n.id&&(e.modalService.sendConfirmationResult(!1),e.modalService.sendCloseSignal(mu.ALL),n.close())}),this.modalService.add(this))},e.prototype.ngOnDestroy=function(){this.modalService.remove(this.id),this.element.remove()},e.prototype.open=function(){this.element.style.display="block",document.body.classList.add("modal-open")},e.prototype.openTutorialWindow=function(e){var n=this.element.querySelector(".modal-body");n.style.position="absolute",n.style.margin="0",n.style.width=e.width,n.style.top=e.top,n.style.left=e.left,this.element.style.display="block",document.body.classList.add("modal-open")},e.prototype.close=function(){this.element.style.display="none",document.body.classList.remove("modal-open")},e.prototype.onKeydownHandler=function(e){"tutorial-modal"!==this.id&&(this.modalService.sendConfirmationResult(!1),this.modalService.sendCloseSignal(mu.ALL),this.close())},e}(),OC=gl({encapsulation:2,styles:[],data:{}});function RC(e){return so(0,[Qi(671088640,1,{body:1}),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:8,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:null,childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:null,ngContent:{index:0}}],null,null)}var TC=function(){function e(e,n,t,r,l,i,o,u,s,a,c,p,h,d){this.buildingFactoryService=e,this.servicesService=n,this.modalService=t,this.logService=r,this.resourcesService=l,this.landService=i,this.villageService=o,this.fortService=u,this.fieldService=s,this.forestService=a,this.mountainsService=c,this.seaService=p,this.plateauService=h,this.gameService=d,this.filterText="",this.buildings=new Map,this.buildings.set(ku.VILLAGE,[[new Gm,[],0],[new Bm,[Eu.HOUSE],0],[new Sy,[Eu.BAKERY],0],[new Ay,[Eu.TAILOR],0],[new iy,[],0],[new oy,[],0],[new zy,[Eu.MARKETPLACE],0],[new My,[Eu.TAVERN],0],[new cy,[Eu.SHRINE],1],[new qy,[Eu.CHURCH],1]]),this.buildings.set(ku.FOREST,[[new Wm,[],0],[new ey,[],0],[new ay,[Eu.HUNTER],0],[new Cy,[Eu.TANNERY],0],[new zm,[Eu.FORESTER],0],[new Qm,[Eu.SAWMILL],0]]),this.buildings.set(ku.FORT,[[new Oy,[Eu.BARRACKS],0],[new Ty,[Eu.BARRACKS],0],[new _y,[Eu.STOCKADE],1],[new Ny,[Eu.WOODEN_TOWER],0],[new Py,[Eu.STONE_TOWER],0],[new tS,[Eu.STASH],3]]),this.buildings.set(ku.FIELD,[[new dy,[Eu.FARM],0],[new yy,[Eu.WINDMILL],0],[new gy,[],0],[new my,[],0],[new Gy,[Eu.PASTURE],0],[new By,[Eu.BUTCHER],0],[new Iy,[Eu.COTTON_MILL],0],[new wy,[Eu.BREWERY],0],[new Dy,[Eu.WINERY],0]]),this.buildings.set(ku.MOUNTAINS,[[new ty,[],0],[new ky,[Eu.GEOLOGIST],0],[new Ly,[],0],[new Uy,[Eu.PIT_MINE],0],[new Ky,[Eu.SMITHY],1],[new Vy,[Eu.MINT],0]]),this.buildings.set(ku.PLATEAU,[[new Yy,[],1],[new $y,[],1],[new Qy,[],1],[new Zy,[],1],[new Jy,[],1],[new eS,[],1],[new nS,[],1],[new Xy,[],1]]),this.buildings.set(ku.SEA,[[new by,[Eu.FISHERS_HUT],0]])}return e.prototype.ngOnInit=function(){var e=this;this.clearFilterObservable.subscribe(function(n){return e.filterText=""})},e.prototype.build=function(e){if(e.buildOnMountain()){if(!this.landService.hasMountains(e.getSize()))return this.modalService.info("Not enough mountains to build "+e.getName()+"!<br>"+e.getSize()+" mountains required but "+this.landService.getMountains()+" available"),void this.modalService.close(mu.BUILD)}else if(!this.landService.hasLand(e.getSize()))return this.modalService.info("Not enough empty land to build "+e.getName()+"!<br>"+e.getSize()+" empty land required but "+this.landService.getLand()+" available"),void this.modalService.close(mu.BUILD);if(this.resourcesService.decreaseResources(e.getCost(),"Construction",!0)){switch(e.buildOnMountain()?this.landService.decreaseMountains(e.getSize()):this.landService.decreaseLand(e.getSize()),this.region){case ku.VILLAGE:this.villageService.createConstruction(new jm(this.servicesService,this.servicesService.getService(Nu.ID).getNextId(),ku.VILLAGE,e.getBuildingType(),e.getComplexity(),e.getSize()).build());break;case ku.FORT:this.fortService.createConstruction(new jm(this.servicesService,this.servicesService.getService(Nu.ID).getNextId(),ku.FORT,e.getBuildingType(),e.getComplexity(),e.getSize()).build());break;case ku.FOREST:this.forestService.createConstruction(new jm(this.servicesService,this.servicesService.getService(Nu.ID).getNextId(),ku.FOREST,e.getBuildingType(),e.getComplexity(),e.getSize()).build());break;case ku.FIELD:this.fieldService.createConstruction(new jm(this.servicesService,this.servicesService.getService(Nu.ID).getNextId(),ku.FIELD,e.getBuildingType(),e.getComplexity(),e.getSize()).build());break;case ku.MOUNTAINS:this.mountainsService.createConstruction(new jm(this.servicesService,this.servicesService.getService(Nu.ID).getNextId(),ku.MOUNTAINS,e.getBuildingType(),e.getComplexity(),e.getSize()).build());break;case ku.SEA:this.seaService.createConstruction(new jm(this.servicesService,this.servicesService.getService(Nu.ID).getNextId(),ku.SEA,e.getBuildingType(),e.getComplexity(),e.getSize()).build());break;case ku.PLATEAU:this.plateauService.createConstruction(new jm(this.servicesService,this.servicesService.getService(Nu.ID).getNextId(),ku.PLATEAU,e.getBuildingType(),e.getComplexity(),e.getSize()).build())}this.modalService.close(mu.BUILD)}else this.modalService.close(mu.BUILD)},e.prototype.ngOnChanges=function(e){this.regionString=ku[this.region]},e.prototype.checkBuilding=function(e,n){var t=this,r=!0;return e[1].forEach(function(e){t.gameService.isEnabled(e)||(r=!1)}),e[2]>0&&e[2]<=this.servicesService.getServiceByRegion(n).getBuildings().filter(function(n){return n.getBuildingType()===e[0].getBuildingType()||n.getBuildingType()===bu.CONSTRUCTION&&n.getConstructing()===e[0].getBuildingType()}).length&&(r=!1),r},e.prototype.hasResource=function(e){return 0===this.resourcesService.hasResource(e.key,e.value,"Construction",!0)},e.prototype.getResourceName=function(e){return Au.prepareResourceName(e)},e.prototype.getBuildingCostEntries=function(e){return e.getCost()},e.prototype.getBuildingForRegion=function(e){var n=this;if(this.buildings&&this.buildings.get(e)){var t=this.buildings.get(e).filter(function(t){return n.checkBuilding(t,e)}).map(function(e){return e[0]});if(e===ku.PLATEAU){if(this.gameService.getAbdicationLevel()<this.servicesService.getServiceByRegion(e).getBuildings().length)return[];this.gameService.getAbdicationLevel()<7&&(t=t.filter(function(e){return e.getBuildingType()!==bu.ASCENSION_TEMPLE}))}return null!==this.filterText&&this.filterText.length>0?t.filter(function(e){return e.getName().toLowerCase().includes(n.filterText.toLowerCase())}):t}},e.prototype.isCostMet=function(e){var n=this,t=!0;return Array.from(e.getCost().entries()).forEach(function(e){0!==n.resourcesService.hasResource(e[0],e[1],"Construction",!0)&&(t=!1)}),t},e.prototype.hasLand=function(e){return this.landService.hasLand(e)},e.prototype.hasMountains=function(e){return this.landService.getMountains()>=e},e.prototype.getLimit=function(e,n){var t=this.buildings.get(e).find(function(e){return e[0].getBuildingType()===n});return t?t[2]:0},e}(),CC=gl({encapsulation:0,styles:[[".notMet[_ngcontent-%COMP%]{color:#8b0000}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.5em;margin-bottom:10px}#buildings[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch}.building[_ngcontent-%COMP%]{display:flex;flex-direction:row;text-align:center;border:1px solid #000;margin-bottom:10px}.buildingTitle[_ngcontent-%COMP%]{font-weight:600;background-color:var(--active-colour);border-bottom:1px solid #000}.buildingSecondRow[_ngcontent-%COMP%]{display:flex;width:100%;border-right:1px solid #000;flex-direction:column}.buildButton[_ngcontent-%COMP%]{width:30%}.buildButtonNotAvailable[_ngcontent-%COMP%]{width:30%;cursor:not-allowed}.details[_ngcontent-%COMP%]{width:100%;text-align:center}.resourceIcon[_ngcontent-%COMP%]{height:20px;width:20px;vertical-align:middle}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center}"]],data:{}});function _C(e){return so(0,[(e()(),Yl(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(1,null,["",""]))],null,function(e,n){var t=n.component,r=" (limit: "+t.getLimit(t.region,n.parent.context.$implicit.getBuildingType())+" building)";e(n,1,0,r)})}function IC(e){return so(0,[(e()(),Yl(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(1,null,["",""]))],null,function(e,n){var t=n.component,r=" (limit: "+t.getLimit(t.region,n.parent.context.$implicit.getBuildingType())+" buildings)";e(n,1,0,r)})}function AC(e){return so(0,[(e()(),Yl(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(1,null,[" "," "]))],null,function(e,n){var t=n.parent.parent.context.$implicit.getSize();e(n,1,0,t)})}function wC(e){return so(0,[(e()(),Yl(0,0,null,null,1,"span",[["class","notMet"]],null,null,null,null,null)),(e()(),io(1,null,[" "," "]))],null,function(e,n){var t=n.parent.parent.context.$implicit.getSize();e(n,1,0,t)})}function NC(e){return so(0,[(e()(),Yl(0,0,null,null,7,"span",[],null,null,null,null,null)),(e()(),Yl(1,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,AC)),Mi(3,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,wC)),Mi(5,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(6,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(7,114688,null,0,cf,[],{name:[0,"name"]},null)],function(e,n){var t=n.component,r=t.hasLand(n.parent.context.$implicit.getSize());e(n,3,0,r);var l=!t.hasLand(n.parent.context.$implicit.getSize());e(n,5,0,l),e(n,7,0,"land")},null)}function PC(e){return so(0,[(e()(),Yl(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(1,null,[" "," "]))],null,function(e,n){var t=n.parent.parent.context.$implicit.getSize();e(n,1,0,t)})}function DC(e){return so(0,[(e()(),Yl(0,0,null,null,1,"span",[["class","notMet"]],null,null,null,null,null)),(e()(),io(1,null,[" "," "]))],null,function(e,n){var t=n.parent.parent.context.$implicit.getSize();e(n,1,0,t)})}function MC(e){return so(0,[(e()(),Yl(0,0,null,null,7,"span",[["class","icon"]],null,null,null,null,null)),(e()(),Yl(1,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,PC)),Mi(3,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,DC)),Mi(5,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(6,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(7,114688,null,0,cf,[],{name:[0,"name"]},null)],function(e,n){var t=n.component,r=t.hasMountains(n.parent.context.$implicit.getSize());e(n,3,0,r);var l=!t.hasMountains(n.parent.context.$implicit.getSize());e(n,5,0,l),e(n,7,0,"mountains")},null)}function kC(e){return so(0,[(e()(),Yl(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(1,null,[" "," "]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.value)})}function LC(e){return so(0,[(e()(),Yl(0,0,null,null,1,"span",[["class","notMet"]],null,null,null,null,null)),(e()(),io(1,null,[" "," "]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.value)})}function xC(e){return so(0,[(e()(),Yl(0,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),Yl(1,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,kC)),Mi(3,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,LC)),Mi(5,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(6,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(7,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null)],function(e,n){var t=n.component;e(n,3,0,t.hasResource(n.context.$implicit)),e(n,5,0,!t.hasResource(n.context.$implicit)),e(n,7,0,t.getResourceName(n.context.$implicit.key),"resources")},null)}function FC(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[["class","buildButton"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.build(e.parent.context.$implicit)&&r),r},null,null)),(e()(),io(-1,null,["Build"]))],null,null)}function UC(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[["class","buildButtonNotAvailable"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.build(e.parent.context.$implicit)&&r),r},null,null)),(e()(),io(-1,null,["Build"]))],null,null)}function HC(e){return so(0,[(e()(),Yl(0,0,null,null,22,"div",[["class","building"]],null,null,null,null,null)),(e()(),Yl(1,0,null,null,17,"div",[["class","buildingSecondRow"]],null,null,null,null,null)),(e()(),Yl(2,0,null,null,5,"span",[["class","buildingTitle"]],null,null,null,null,null)),(e()(),io(3,null,[""," "])),(e()(),jl(16777216,null,null,1,null,_C)),Mi(5,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,IC)),Mi(7,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(8,0,null,null,10,"div",[["class","details"]],null,null,null,null,null)),(e()(),Yl(9,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(10,null,["",""])),(e()(),Yl(11,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,NC)),Mi(13,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,MC)),Mi(15,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,2,null,xC)),Mi(17,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null),ki(0,Ks,[Vr]),(e()(),jl(16777216,null,null,1,null,FC)),Mi(20,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,UC)),Mi(22,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component,r=1===t.getLimit(t.region,n.context.$implicit.getBuildingType());e(n,5,0,r);var l=t.getLimit(t.region,n.context.$implicit.getBuildingType())>1;e(n,7,0,l);var i=!n.context.$implicit.buildOnMountain();e(n,13,0,i);var o=n.context.$implicit.buildOnMountain();e(n,15,0,o),e(n,17,0,hl(n,17,0,Ei(n,18).transform(t.getBuildingCostEntries(n.context.$implicit)))),e(n,20,0,t.isCostMet(n.context.$implicit)),e(n,22,0,!t.isCostMet(n.context.$implicit))},function(e,n){var t=n.context.$implicit.getName();e(n,3,0,t);var r=n.context.$implicit.getDescription();e(n,10,0,r)})}function GC(e){return so(0,[ki(0,zs,[]),(e()(),Yl(1,0,null,null,13,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Yl(2,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),io(3,null,[" "," buildings "])),to(4,1),(e()(),io(-1,null,[" Search: "])),(e()(),Yl(6,0,null,null,5,"input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var r=!0,l=e.component;return"input"===n&&(r=!1!==Ei(e,7)._handleInput(t.target.value)&&r),"blur"===n&&(r=!1!==Ei(e,7).onTouched()&&r),"compositionstart"===n&&(r=!1!==Ei(e,7)._compositionStart()&&r),"compositionend"===n&&(r=!1!==Ei(e,7)._compositionEnd(t.target.value)&&r),"ngModelChange"===n&&(r=!1!==(l.filterText=t)&&r),r},null,null)),Mi(7,16384,null,0,Cf,[xn,Pn,[2,Tf]],null,null),Li(1024,null,Of,function(e){return[e]},[Cf]),Mi(9,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),Li(2048,null,Nf,null,[pg]),Mi(11,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),Yl(12,0,null,null,2,"div",[["id","buildings"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,HC)),Mi(14,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,9,0,t.filterText),e(n,14,0,t.getBuildingForRegion(t.region))},function(e,n){var t=n.component,r=hl(n,3,0,e(n,4,0,Ei(n,0),t.regionString));e(n,3,0,r),e(n,6,0,Ei(n,11).ngClassUntouched,Ei(n,11).ngClassTouched,Ei(n,11).ngClassPristine,Ei(n,11).ngClassDirty,Ei(n,11).ngClassValid,Ei(n,11).ngClassInvalid,Ei(n,11).ngClassPending)})}var BC=function(){function e(e){var n=this;this.modalService=e,this.clearFilterSubject=new L,this.modalService.registerForRegion().subscribe(function(e){n.region=e,n.clearFilterSubject.next()}),this.modalService.registerForOnOpen().subscribe(function(e){e===mu.BUILD&&(n.bodyRef.nativeElement.scrollTop=0)})}return e.prototype.ngOnInit=function(){},e}(),VC=gl({encapsulation:0,styles:[[""]],data:{}});function WC(e){return so(0,[Qi(402653184,1,{bodyRef:0}),(e()(),Yl(1,0,null,null,6,"app-modal",[["id","build-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var r=!0;return"document:keydown.escape"===n&&(r=!1!==Ei(e,2).onKeydownHandler(t)&&r),r},RC,OC)),Mi(2,4440064,null,0,bC,[xn,Pn,Ig],{id:[0,"id"]},null),(e()(),Yl(3,0,null,0,3,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Yl(4,0,[[1,0],["body",1]],null,2,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Yl(5,0,null,null,1,"app-construction",[],null,null,null,GC,CC)),Mi(6,638976,null,0,TC,[lS,Sg,Ig,_g,Lg,iS,uS,vE,ZR,NR,vT,nC,BT,wg],{region:[0,"region"],clearFilterObservable:[1,"clearFilterObservable"]},null),(e()(),Yl(7,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,2,0,"build-modal"),e(n,6,0,t.region,t.clearFilterSubject.asObservable())},null)}var jC=function(){function e(e,n,t,r,l,i,o,u,s,a,c,p,h,d,f,g,v,m){var y=this;this.logService=e,this.villageService=n,this.fortService=t,this.fieldService=r,this.mountainsService=l,this.plateauService=i,this.seaService=o,this.forestService=u,this.calendarService=s,this.landService=a,this.techService=c,this.weatherService=p,this.resourcesService=h,this.gameService=d,this.effectsService=f,this.armyService=g,this.happinessService=v,this.servicesService=m,this.tickerState=0,this.lastTick=0,this.ticking=!1,this.resolution=ju,m.addService(Nu.TICKER,this),this.tickSubject=new L,this.interval=setInterval(function(){return y.tick()},this.resolution)}return e.prototype.tick=function(){if(!this.ticking){this.ticking=!0;var e=Math.floor(Date.now()/this.resolution);this.tickerState>=0&&(this.lastTick=e,this.calendarService.tick(e),this.effectsService.tick(e),this.weatherService.tick(e),this.happinessService.tick(e),this.landService.tick(e),this.resourcesService.tick(e),this.gameService.tick(e),this.villageService.tick(e),this.fortService.tick(e),this.fieldService.tick(e),this.mountainsService.tick(e),this.plateauService.tick(e),this.seaService.tick(e),this.forestService.tick(e),this.armyService.tick(e)),this.ticking=!1}},e.prototype.stop=function(){return this.tickerState-=1,this.lastTick},e.prototype.start=function(){this.tickerState+=1,this.tickerState>0&&(this.tickerState=0)},e.prototype.forceStart=function(){this.tickerState=0},e.prototype.clearTicker=function(){clearInterval(this.interval)},e.prototype.initTicker=function(){var e=this;this.interval=setInterval(function(){return e.tick()},this.resolution)},e.ngInjectableDef=ve({factory:function(){return new e(ze(_g),ze(uS),ze(vE),ze(ZR),ze(vT),ze(BT),ze(nC),ze(NR),ze(Cg),ze(iS),ze(SS),ze(rb),ze(Lg),ze(wg),ze(Qg),ze(nE),ze(Mg),ze(Sg))},token:e,providedIn:"root"}),e}(),YC=function(){function e(e,n,t,r,l,i,o,u,s,a,c,p,h,d,f,g,v,m,y,S,E,b,O,R,T,C,_,I,A,w){var N=this;this.router=e,this.tickerService=n,this.gameService=t,this.modalService=r,this.optionsService=l,this.logService=i,this.villageService=o,this.forestService=u,this.resourcesService=s,this.landService=a,this.mountainsService=c,this.calendarService=p,this.royalService=h,this.techService=d,this.religionService=f,this.craftingService=g,this.recipeService=v,this.fieldService=m,this.plateauService=y,this.seaService=S,this.fortService=E,this.effectsService=b,this.armyService=O,this.happinessService=R,this.managementService=T,this.marketService=C,this.weatherService=_,this.idService=I,this.tutorialService=A,this.saveName=Gu.saveName,this.saveVersion=Gu.saveVersion,w.addService(Nu.SERIALIZER,this),this.autoSaveStatus=this.optionsService.getOption(Eg.AUTO_SAVE_STATUS),this.autoSavePeriod=this.optionsService.getOption(Eg.AUTO_SAVE_PERIOD),this.optionsSubscription||(this.optionsSubscription=this.optionsService.registerForOptionsChange().subscribe(function(){return N.changeOptions()})),this.saveInterval=setInterval(function(){N.initSave(),N.logService.log("Auto saved")},this.autoSavePeriod)}return e.prototype.changeOptions=function(){var e=this,n=this.optionsService.getOption(Eg.AUTO_SAVE_STATUS),t=this.optionsService.getOption(Eg.AUTO_SAVE_PERIOD);this.autoSaveStatus===n&&this.autoSavePeriod===t||(this.autoSaveStatus=n,this.autoSavePeriod=t,clearInterval(this.saveInterval),this.autoSaveStatus&&(this.saveInterval=setInterval(function(){e.initSave(),e.logService.log("Auto saved")},1e3*this.autoSavePeriod*60)))},e.prototype.initSave=function(){this.tickerService.stop(),localStorage.setItem(this.saveName,this.prepareBase64()),this.tickerService.start()},e.prototype.prepareBase64=function(){this.tickerService.stop();var e=btoa(JSON.stringify({saveVersion:this.saveVersion,id:this.idService,tutorial:this.tutorialService.save(),resources:this.resourcesService.save(),village:this.villageService.save(),fort:this.fortService.save(),forest:this.forestService.save(),field:this.fieldService.save(),mountains:this.mountainsService.save(),plateau:this.plateauService.save(),sea:this.seaService.save(),land:this.landService.save(),calendar:this.calendarService.save(),game:this.gameService.save(),options:this.optionsService.save(),royal:this.royalService.save(),tech:this.techService.save(),religion:this.religionService.save(),crafting:this.craftingService.save(),recipe:this.recipeService.save(),effects:this.effectsService.save(),army:this.armyService.save(),happiness:this.happinessService.save(),management:this.managementService.save(),market:this.marketService.save(),weather:this.weatherService.save(),logs:this.logService.save()}));return this.tickerService.start(),e},e.prototype.initLoad=function(){if(this.tickerService.stop(),null===localStorage.getItem(this.saveName))return this.modalService.info("There is no any save file to load."),void this.tickerService.start();var e;try{e=JSON.parse(atob(localStorage.getItem(this.saveName)))}catch(n){return this.modalService.info("Save data is corrupted! Loading failed."),void this.tickerService.start()}this.loadSave(e),this.tickerService.start(),this.logService.log("loaded")},e.prototype.hasSave=function(){return null!=localStorage.getItem(this.saveName)},e.prototype.import=function(e){var n;this.tickerService.stop();try{n=JSON.parse(atob(e))}catch(t){return this.modalService.info("Import file is not valid or corrupted! Import failed."),void this.tickerService.start()}this.loadSave(n),localStorage.setItem(this.saveName,e),this.tickerService.start(),this.logService.log("save imported")},e.prototype.hardReset=function(){this.reset(!0),localStorage.removeItem(this.saveName)},e.prototype.softReset=function(){this.reset(!1)},e.prototype.ascensionReset=function(){this.reset(!1,!0)},e.prototype.reset=function(e,n){void 0===n&&(n=!1),this.tickerService.stop(),this.tickerService.clearTicker(),localStorage.removeItem(this.saveName),this.tutorialService.reset(e,n),this.gameService.reset(e,n),this.idService.reset(e,n),this.calendarService.reset(e,n),this.weatherService.reset(e,n),this.effectsService.reset(e,n),this.resourcesService.reset(e,n),this.landService.reset(e,n),this.villageService.reset(e,n),this.fortService.reset(e,n),this.forestService.reset(e,n),this.fieldService.reset(e,n),this.mountainsService.reset(e,n),this.plateauService.reset(e,n),this.seaService.reset(e,n),this.optionsService.reset(e,n),this.techService.reset(e,n),this.religionService.reset(e,n),this.craftingService.reset(e,n),this.recipeService.reset(e,n),this.armyService.reset(e,n),this.happinessService.reset(e,n),this.managementService.reset(e,n),this.marketService.reset(e,n),this.logService.reset(e,n),this.royalService.reset(e,n),this.initSave(),this.tickerService.initTicker(),this.tickerService.start(),this.router.navigate(["/village"])},e.prototype.loadSave=function(e){switch(e.saveVersion){case Fu.DEV:case Fu.V1_0_0:this.loadDevVersion(e);break;default:var n="Corrupted save file (unknown save version). Loading is not possible";return this.logService.log(n),void console.error(n)}},e.prototype.loadDevVersion=function(e){this.saveVersion=e.saveVersion,this.idService.load(e.id),this.effectsService.load(e.effects),this.resourcesService.load(e.resources),this.villageService.load(e.village),this.fortService.load(e.fort),this.forestService.load(e.forest),this.fieldService.load(e.field),this.mountainsService.load(e.mountains),this.plateauService.load(e.plateau),this.seaService.load(e.sea),this.landService.load(e.land),this.calendarService.load(e.calendar),this.optionsService.load(e.options),this.gameService.load(e.game),this.royalService.load(e.royal),this.techService.load(e.tech),this.religionService.load(e.religion),this.craftingService.load(e.crafting),this.recipeService.load(e.recipe),this.armyService.load(e.army),this.happinessService.load(e.happiness),this.managementService.load(e.management),this.marketService.load(e.market),this.weatherService.load(e.weather),this.logService.load(e.logs),this.tutorialService.load(void 0!==e.tutorial?e.tutorial:{})},e.ngInjectableDef=ve({factory:function(){return new e(ze(Cd),ze(jC),ze(wg),ze(Ig),ze(bg),ze(_g),ze(uS),ze(NR),ze(Lg),ze(iS),ze(vT),ze(Cg),ze(Pg),ze(SS),ze(LE),ze(Vv),ze(gv),ze(ZR),ze(BT),ze(nC),ze(vE),ze(Qg),ze(nE),ze(Mg),ze($g),ze(Mm),ze(rb),ze(rS),ze(Ag),ze(Sg))},token:e,providedIn:"root"}),e}(),zC=function(){function e(e,n){var t=this;this.serializerService=e,this.modalService=n,this.exportTextArea=null,this.showMessage=!1,this.modalService.registerForOnOpen().subscribe(function(e){e===mu.EXPORT&&t.export()})}return e.prototype.ngOnInit=function(){},e.prototype.export=function(){this.exportTextArea=this.serializerService.prepareBase64()},e.prototype.copy=function(){var e=this,n=this.exportTextArea,t=document.createElement("textarea");t.id="txt",t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.opacity="0",t.value=n,document.body.appendChild(t),t.select();try{if(document.execCommand("copy"))return this.showMessage=!0,setTimeout(function(){return e.showMessage=!1},1500),!0}catch(r){console.error(eg.ERROR_1)}finally{document.body.removeChild(t)}return!1},e}(),KC=gl({encapsulation:0,styles:[["#export-area[_ngcontent-%COMP%]{width:100%;resize:none}.modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}#buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;width:100%}#title[_ngcontent-%COMP%]{font-weight:800;margin-bottom:10px}"]],data:{}});function qC(e){return so(0,[(e()(),Yl(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),io(-1,null,["copied..."]))],null,null)}function $C(e){return so(0,[(e()(),Yl(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Yl(1,0,null,null,0,"br",[],null,null,null,null,null))],null,null)}function QC(e){return so(0,[(e()(),Yl(0,0,null,null,17,"app-modal",[["id","export-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var r=!0;return"document:keydown.escape"===n&&(r=!1!==Ei(e,1).onKeydownHandler(t)&&r),r},RC,OC)),Mi(1,4440064,null,0,bC,[xn,Pn,Ig],{id:[0,"id"]},null),(e()(),Yl(2,0,null,0,14,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Yl(3,0,null,null,13,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Yl(4,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),io(-1,null,["Export save"])),(e()(),Yl(6,0,null,null,1,"textarea",[["id","export-area"],["placeholder","Your save will be generated here..."],["readonly",""],["rows","20"]],null,null,null,null,null)),(e()(),io(7,null,["",""])),(e()(),Yl(8,0,null,null,4,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Yl(9,0,null,null,1,"button",[["id","import-button"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.export()&&r),r},null,null)),(e()(),io(-1,null,["Update"])),(e()(),Yl(11,0,null,null,1,"button",[["id","copy-button"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.copy()&&r),r},null,null)),(e()(),io(-1,null,["Copy to clipboard"])),(e()(),jl(16777216,null,null,1,null,qC)),Mi(14,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,$C)),Mi(16,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(17,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,1,0,"export-modal"),e(n,14,0,t.showMessage),e(n,16,0,!t.showMessage)},function(e,n){e(n,7,0,n.component.exportTextArea)})}var ZC=function(){function e(e,n){this.serializerService=e,this.modalService=n}return e.prototype.ngOnInit=function(){},e.prototype.import=function(){this.serializerService.import(this.importTextArea),this.importTextArea="",this.modalService.close(mu.IMPORT)},e}(),XC=gl({encapsulation:0,styles:[["#import-area[_ngcontent-%COMP%]{width:100%;resize:none}.modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}#title[_ngcontent-%COMP%]{font-weight:800;margin-bottom:10px}"]],data:{}});function JC(e){return so(0,[(e()(),Yl(0,0,null,null,14,"app-modal",[["id","import-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var r=!0;return"document:keydown.escape"===n&&(r=!1!==Ei(e,1).onKeydownHandler(t)&&r),r},RC,OC)),Mi(1,4440064,null,0,bC,[xn,Pn,Ig],{id:[0,"id"]},null),(e()(),Yl(2,0,null,0,11,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Yl(3,0,null,null,10,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Yl(4,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),io(-1,null,["Import save"])),(e()(),Yl(6,0,null,null,5,"textarea",[["id","import-area"],["placeholder","Paste your save here..."],["rows","20"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var r=!0,l=e.component;return"input"===n&&(r=!1!==Ei(e,7)._handleInput(t.target.value)&&r),"blur"===n&&(r=!1!==Ei(e,7).onTouched()&&r),"compositionstart"===n&&(r=!1!==Ei(e,7)._compositionStart()&&r),"compositionend"===n&&(r=!1!==Ei(e,7)._compositionEnd(t.target.value)&&r),"ngModelChange"===n&&(r=!1!==(l.importTextArea=t)&&r),r},null,null)),Mi(7,16384,null,0,Cf,[xn,Pn,[2,Tf]],null,null),Li(1024,null,Of,function(e){return[e]},[Cf]),Mi(9,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),Li(2048,null,Nf,null,[pg]),Mi(11,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),Yl(12,0,null,null,1,"button",[["id","import-button"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.import()&&r),r},null,null)),(e()(),io(-1,null,["Import"])),(e()(),Yl(14,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,1,0,"import-modal"),e(n,9,0,t.importTextArea)},function(e,n){e(n,6,0,Ei(n,11).ngClassUntouched,Ei(n,11).ngClassTouched,Ei(n,11).ngClassPristine,Ei(n,11).ngClassDirty,Ei(n,11).ngClassValid,Ei(n,11).ngClassInvalid,Ei(n,11).ngClassPending)})}var e_=function(){function e(e,n){this.modalService=e,this.serializerService=n}return e.prototype.ngOnInit=function(){},e.prototype.hardReset=function(){this.serializerService.hardReset(),this.modalService.close(mu.HARD_RESET)},e.prototype.cancel=function(){this.modalService.close(mu.HARD_RESET)},e}(),n_=gl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:1.2em}#buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;width:100%}button[_ngcontent-%COMP%]{border:2px solid #000;color:#000;padding:1% 2%;text-align:center;text-decoration:none;display:inline-block;font-size:1em;margin:.5%}#hardReset[_ngcontent-%COMP%]{background-color:#5f0000;color:#fff}"]],data:{}});function t_(e){return so(0,[(e()(),Yl(0,0,null,null,19,"app-modal",[["id","hard-reset-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var r=!0;return"document:keydown.escape"===n&&(r=!1!==Ei(e,1).onKeydownHandler(t)&&r),r},RC,OC)),Mi(1,4440064,null,0,bC,[xn,Pn,Ig],{id:[0,"id"]},null),(e()(),Yl(2,0,null,0,16,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Yl(3,0,null,null,15,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Yl(4,0,null,null,1,"h2",[],null,null,null,null,null)),(e()(),io(-1,null,["Hard Reset"])),(e()(),Yl(6,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),io(-1,null,[" Are you sure you want to hard reset your progress? "])),(e()(),Yl(8,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),io(-1,null,[" This will remove ALL progress and saved game (except settings and tutorial state). "])),(e()(),Yl(10,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),io(-1,null,[" You will still be able to load game from exported save. "])),(e()(),Yl(12,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),io(-1,null,[" This should only be done if you have backup save or want to start from the beginning. "])),(e()(),Yl(14,0,null,null,4,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Yl(15,0,null,null,1,"button",[["id","hardReset"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.hardReset()&&r),r},null,null)),(e()(),io(-1,null,["HARD RESET"])),(e()(),Yl(17,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.cancel()&&r),r},null,null)),(e()(),io(-1,null,["CANCEL"])),(e()(),Yl(19,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){e(n,1,0,"hard-reset-modal")},null)}var r_=function(){function e(e,n){this.optionsService=e,this.modalService=n}return e.prototype.ngOnInit=function(){var e=this;this.optionsSubscription||(this.optionsSubscription=this.optionsService.registerForOptionsChange().subscribe(function(){return e.initOptions()})),this.initOptions()},e.prototype.initOptions=function(){this.autoSaveStatus=this.optionsService.getOption(Eg.AUTO_SAVE_STATUS),this.autoSavePeriod=this.optionsService.getOption(Eg.AUTO_SAVE_PERIOD),this.metricStatus=this.optionsService.getOption(Eg.METRIC),this.saveLogs=this.optionsService.getOption(Eg.SAVE_LOGS),this.sound=this.optionsService.getOption(Eg.SOUND),this.soundVolume=this.optionsService.getOption(Eg.SOUND_VOLUME),this.visualProgressBars=this.optionsService.getOption(Eg.VISUAL_PROGRESS_BARS)},e.prototype.close=function(){this.modalService.close(mu.OPTIONS)},e.prototype.updateOptions=function(){this.optionsService.setOptions([{option:Eg.AUTO_SAVE_STATUS,value:this.autoSaveStatus},{option:Eg.AUTO_SAVE_PERIOD,value:this.autoSavePeriod},{option:Eg.METRIC,value:this.metricStatus},{option:Eg.SAVE_LOGS,value:this.saveLogs},{option:Eg.SOUND,value:this.sound},{option:Eg.SOUND_VOLUME,value:this.soundVolume},{option:Eg.VISUAL_PROGRESS_BARS,value:this.visualProgressBars}])},e.prototype.updateSaveOption=function(){this.autoSavePeriod=Number(this.autoSavePeriod),this.autoSavePeriod%1!=0&&(this.autoSavePeriod=Math.floor(this.autoSavePeriod)),this.autoSavePeriod<=0&&(this.autoSaveStatus=!1,this.autoSavePeriod=1),this.updateOptions()},e.prototype.getSoundVolume=function(){return this.optionsService.getOption(Eg.SOUND_VOLUME)},e.prototype.changeSoundVolume=function(e){this.soundVolume=e.target.value,this.updateOptions()},e}(),l_=gl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{text-align:center;font-size:1.2em}#title[_ngcontent-%COMP%]{text-align:center;font-weight:800;display:inline-block}.options[_ngcontent-%COMP%]{text-align:left}#autoSavePeriod[_ngcontent-%COMP%]{width:4ch;text-align:right}.slidecontainer[_ngcontent-%COMP%]{display:inline-block;width:150px}.slider[_ngcontent-%COMP%]{-webkit-appearance:none;width:100%;height:10px;border-radius:5px;background:var(--passive-colour);outline:0;opacity:.7;transition:opacity .2s}.slider[_ngcontent-%COMP%]:hover{opacity:1}.slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:15px;height:15px;border-radius:50%;background:var(--active-colour);cursor:pointer}.slider[_ngcontent-%COMP%]::-moz-range-thumb{width:15px;height:15px;border-radius:50%;background:var(--active-colour);cursor:pointer}#soundVolumeLabel[_ngcontent-%COMP%]{display:inline-block;width:180px}"]],data:{}});function i_(e){return so(0,[(e()(),Yl(0,0,null,null,72,"app-modal",[["id","options-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var r=!0;return"document:keydown.escape"===n&&(r=!1!==Ei(e,1).onKeydownHandler(t)&&r),r},RC,OC)),Mi(1,4440064,null,0,bC,[xn,Pn,Ig],{id:[0,"id"]},null),(e()(),Yl(2,0,null,0,69,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Yl(3,0,null,null,68,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Yl(4,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),io(-1,null,["Options"])),(e()(),Yl(6,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(7,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(8,0,null,null,59,"div",[["class","options"]],null,null,null,null,null)),(e()(),Yl(9,0,null,null,1,"label",[["for","autoSaveStatus"]],null,null,null,null,null)),(e()(),io(-1,null,["auto save on/off "])),(e()(),Yl(11,0,null,null,5,"input",[["id","autoSaveStatus"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var r=!0,l=e.component;return"change"===n&&(r=!1!==Ei(e,12).onChange(t.target.checked)&&r),"blur"===n&&(r=!1!==Ei(e,12).onTouched()&&r),"change"===n&&(r=!1!==l.updateOptions()&&r),"ngModelChange"===n&&(r=!1!==(l.autoSaveStatus=t)&&r),r},null,null)),Mi(12,16384,null,0,Rf,[xn,Pn],null,null),Li(1024,null,Of,function(e){return[e]},[Rf]),Mi(14,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),Li(2048,null,Nf,null,[pg]),Mi(16,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),Yl(17,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(18,0,null,null,1,"label",[["for","autoSavePeriod"]],null,null,null,null,null)),(e()(),io(-1,null,["auto save period "])),(e()(),Yl(20,0,null,null,5,"input",[["id","autoSavePeriod"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var r=!0,l=e.component;return"input"===n&&(r=!1!==Ei(e,21)._handleInput(t.target.value)&&r),"blur"===n&&(r=!1!==Ei(e,21).onTouched()&&r),"compositionstart"===n&&(r=!1!==Ei(e,21)._compositionStart()&&r),"compositionend"===n&&(r=!1!==Ei(e,21)._compositionEnd(t.target.value)&&r),"change"===n&&(r=!1!==l.updateSaveOption()&&r),"ngModelChange"===n&&(r=!1!==(l.autoSavePeriod=t)&&r),r},null,null)),Mi(21,16384,null,0,Cf,[xn,Pn,[2,Tf]],null,null),Li(1024,null,Of,function(e){return[e]},[Cf]),Mi(23,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),Li(2048,null,Nf,null,[pg]),Mi(25,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),io(-1,null,[" minutes "])),(e()(),Yl(27,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(28,0,null,null,1,"label",[["for","metricStatus"]],null,null,null,null,null)),(e()(),io(-1,null,["use metric units"])),(e()(),Yl(30,0,null,null,5,"input",[["id","metricStatus"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var r=!0,l=e.component;return"change"===n&&(r=!1!==Ei(e,31).onChange(t.target.checked)&&r),"blur"===n&&(r=!1!==Ei(e,31).onTouched()&&r),"change"===n&&(r=!1!==l.updateOptions()&&r),"ngModelChange"===n&&(r=!1!==(l.metricStatus=t)&&r),r},null,null)),Mi(31,16384,null,0,Rf,[xn,Pn],null,null),Li(1024,null,Of,function(e){return[e]},[Rf]),Mi(33,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),Li(2048,null,Nf,null,[pg]),Mi(35,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),Yl(36,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(37,0,null,null,1,"label",[["for","visualProgressBars"]],null,null,null,null,null)),(e()(),io(-1,null,["Display moving progress bars (on) or just text (off)"])),(e()(),Yl(39,0,null,null,5,"input",[["id","visualProgressBars"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var r=!0,l=e.component;return"change"===n&&(r=!1!==Ei(e,40).onChange(t.target.checked)&&r),"blur"===n&&(r=!1!==Ei(e,40).onTouched()&&r),"change"===n&&(r=!1!==l.updateOptions()&&r),"ngModelChange"===n&&(r=!1!==(l.visualProgressBars=t)&&r),r},null,null)),Mi(40,16384,null,0,Rf,[xn,Pn],null,null),Li(1024,null,Of,function(e){return[e]},[Rf]),Mi(42,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),Li(2048,null,Nf,null,[pg]),Mi(44,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),Yl(45,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(46,0,null,null,1,"label",[["for","saveLogsStatus"]],null,null,null,null,null)),(e()(),io(-1,null,["save logs"])),(e()(),Yl(48,0,null,null,5,"input",[["id","saveLogsStatus"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var r=!0,l=e.component;return"change"===n&&(r=!1!==Ei(e,49).onChange(t.target.checked)&&r),"blur"===n&&(r=!1!==Ei(e,49).onTouched()&&r),"change"===n&&(r=!1!==l.updateOptions()&&r),"ngModelChange"===n&&(r=!1!==(l.saveLogs=t)&&r),r},null,null)),Mi(49,16384,null,0,Rf,[xn,Pn],null,null),Li(1024,null,Of,function(e){return[e]},[Rf]),Mi(51,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),Li(2048,null,Nf,null,[pg]),Mi(53,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),Yl(54,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(55,0,null,null,1,"label",[["for","sound"]],null,null,null,null,null)),(e()(),io(-1,null,["sound on/off"])),(e()(),Yl(57,0,null,null,5,"input",[["id","sound"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(e,n,t){var r=!0,l=e.component;return"change"===n&&(r=!1!==Ei(e,58).onChange(t.target.checked)&&r),"blur"===n&&(r=!1!==Ei(e,58).onTouched()&&r),"change"===n&&(r=!1!==l.updateOptions()&&r),"ngModelChange"===n&&(r=!1!==(l.sound=t)&&r),r},null,null)),Mi(58,16384,null,0,Rf,[xn,Pn],null,null),Li(1024,null,Of,function(e){return[e]},[Rf]),Mi(60,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),Li(2048,null,Nf,null,[pg]),Mi(62,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),Yl(63,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(64,0,null,null,1,"label",[["for","soundVolume"],["id","soundVolumeLabel"]],null,null,null,null,null)),(e()(),io(65,null,["sound volume ","% "])),(e()(),Yl(66,0,null,null,1,"div",[["class","slidecontainer"]],null,null,null,null,null)),(e()(),Yl(67,0,null,null,0,"input",[["class","slider"],["id","soundVolume"],["max","100"],["min","0"],["type","range"],["value","100"]],[[8,"value",0]],[[null,"change"]],function(e,n,t){var r=!0;return"change"===n&&(r=!1!==e.component.changeSoundVolume(t)&&r),r},null,null)),(e()(),Yl(68,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(69,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(70,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.close()&&r),r},null,null)),(e()(),io(-1,null,["Close"])),(e()(),Yl(72,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,1,0,"options-modal"),e(n,14,0,t.autoSaveStatus),e(n,23,0,t.autoSavePeriod),e(n,33,0,t.metricStatus),e(n,42,0,t.visualProgressBars),e(n,51,0,t.saveLogs),e(n,60,0,t.sound)},function(e,n){var t=n.component;e(n,11,0,Ei(n,16).ngClassUntouched,Ei(n,16).ngClassTouched,Ei(n,16).ngClassPristine,Ei(n,16).ngClassDirty,Ei(n,16).ngClassValid,Ei(n,16).ngClassInvalid,Ei(n,16).ngClassPending),e(n,20,0,Ei(n,25).ngClassUntouched,Ei(n,25).ngClassTouched,Ei(n,25).ngClassPristine,Ei(n,25).ngClassDirty,Ei(n,25).ngClassValid,Ei(n,25).ngClassInvalid,Ei(n,25).ngClassPending),e(n,30,0,Ei(n,35).ngClassUntouched,Ei(n,35).ngClassTouched,Ei(n,35).ngClassPristine,Ei(n,35).ngClassDirty,Ei(n,35).ngClassValid,Ei(n,35).ngClassInvalid,Ei(n,35).ngClassPending),e(n,39,0,Ei(n,44).ngClassUntouched,Ei(n,44).ngClassTouched,Ei(n,44).ngClassPristine,Ei(n,44).ngClassDirty,Ei(n,44).ngClassValid,Ei(n,44).ngClassInvalid,Ei(n,44).ngClassPending),e(n,48,0,Ei(n,53).ngClassUntouched,Ei(n,53).ngClassTouched,Ei(n,53).ngClassPristine,Ei(n,53).ngClassDirty,Ei(n,53).ngClassValid,Ei(n,53).ngClassInvalid,Ei(n,53).ngClassPending),e(n,57,0,Ei(n,62).ngClassUntouched,Ei(n,62).ngClassTouched,Ei(n,62).ngClassPristine,Ei(n,62).ngClassDirty,Ei(n,62).ngClassValid,Ei(n,62).ngClassInvalid,Ei(n,62).ngClassPending),e(n,65,0,t.getSoundVolume()),e(n,67,0,t.getSoundVolume())})}var o_=function(){function e(e){this.modalService=e,this.text="",this.value=""}return e.prototype.ngOnInit=function(){var e=this;this.modalService.registerForText().subscribe(function(n){return e.text=n}),this.modalService.registerForValue().subscribe(function(n){return e.value=n})},e.prototype.ok=function(){this.modalService.sendValueInput(this.value),this.modalService.close(mu.INPUT)},e.prototype.cancel=function(){this.modalService.sendValueInput(null),this.modalService.close(mu.INPUT)},e.prototype.onKeydownHandler=function(e){document.getElementById("input-modal").style.display&&this.ok()},e}(),u_=gl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}#buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px;padding:5px}"]],data:{}});function s_(e){return so(0,[(e()(),Yl(0,0,null,null,18,"app-modal",[["id","input-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var r=!0;return"document:keydown.escape"===n&&(r=!1!==Ei(e,1).onKeydownHandler(t)&&r),r},RC,OC)),Mi(1,4440064,null,0,bC,[xn,Pn,Ig],{id:[0,"id"]},null),(e()(),Yl(2,0,null,0,15,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Yl(3,0,null,null,14,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Yl(4,0,null,null,0,"span",[["id","text"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Yl(5,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(6,0,null,null,5,"input",[["id","input"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var r=!0,l=e.component;return"input"===n&&(r=!1!==Ei(e,7)._handleInput(t.target.value)&&r),"blur"===n&&(r=!1!==Ei(e,7).onTouched()&&r),"compositionstart"===n&&(r=!1!==Ei(e,7)._compositionStart()&&r),"compositionend"===n&&(r=!1!==Ei(e,7)._compositionEnd(t.target.value)&&r),"ngModelChange"===n&&(r=!1!==(l.value=t)&&r),r},null,null)),Mi(7,16384,null,0,Cf,[xn,Pn,[2,Tf]],null,null),Li(1024,null,Of,function(e){return[e]},[Cf]),Mi(9,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),Li(2048,null,Nf,null,[pg]),Mi(11,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),Yl(12,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(13,0,null,null,4,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Yl(14,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.ok()&&r),r},null,null)),(e()(),io(-1,null,["CONFIRM"])),(e()(),Yl(16,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.cancel()&&r),r},null,null)),(e()(),io(-1,null,["CANCEL"])),(e()(),Yl(18,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,1,0,"input-modal"),e(n,9,0,t.value)},function(e,n){e(n,4,0,n.component.text),e(n,6,0,Ei(n,11).ngClassUntouched,Ei(n,11).ngClassTouched,Ei(n,11).ngClassPristine,Ei(n,11).ngClassDirty,Ei(n,11).ngClassValid,Ei(n,11).ngClassInvalid,Ei(n,11).ngClassPending)})}var a_=function(){function e(e,n,t){this.kongregateService=e,this.royalService=n,this.modalService=t}return e.prototype.ngOnInit=function(){},e.prototype.ok=function(){this.modalService.close(mu.ROYAL)},e.prototype.buy=function(e){Gu.production?this.kongregateService.buyItem(e):(this.royalService.increaseRoyalPoints(Number(e.replace("rp_pack",""))),this.modalService.close(mu.ROYAL))},e}(),c_=gl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.kred[_ngcontent-%COMP%]{width:30px;height:30px;vertical-align:middle}.value[_ngcontent-%COMP%]{margin-top:5px}.entry[_ngcontent-%COMP%]{width:50%;text-align:center}#close[_ngcontent-%COMP%]{margin-top:15px}"]],data:{}});function p_(e){return so(0,[(e()(),Yl(0,0,null,null,33,"app-modal",[["id","royal-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var r=!0;return"document:keydown.escape"===n&&(r=!1!==Ei(e,1).onKeydownHandler(t)&&r),r},RC,OC)),Mi(1,4440064,null,0,bC,[xn,Pn,Ig],{id:[0,"id"]},null),(e()(),Yl(2,0,null,0,30,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Yl(3,0,null,null,29,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Yl(4,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["Choose how many Royal Points you would like to buy:"])),(e()(),Yl(6,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(7,0,null,null,5,"div",[["class","entry"]],null,null,null,null,null)),(e()(),Yl(8,0,null,null,2,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.buy("rp_pack10")&&r),r},null,null)),(e()(),io(-1,null,["10 "])),(e()(),Yl(10,0,null,null,0,"img",[["alt","Kreds"],["class","kred"],["src","assets/kred.png"]],null,null,null,null,null)),(e()(),Yl(11,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,[" 10 Royal points"])),(e()(),Yl(13,0,null,null,5,"div",[["class","entry"]],null,null,null,null,null)),(e()(),Yl(14,0,null,null,2,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.buy("rp_pack20")&&r),r},null,null)),(e()(),io(-1,null,["20 "])),(e()(),Yl(16,0,null,null,0,"img",[["alt","Kreds"],["class","kred"],["src","assets/kred.png"]],null,null,null,null,null)),(e()(),Yl(17,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,[" 20 Royal points"])),(e()(),Yl(19,0,null,null,5,"div",[["class","entry"]],null,null,null,null,null)),(e()(),Yl(20,0,null,null,2,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.buy("rp_pack55")&&r),r},null,null)),(e()(),io(-1,null,["50 "])),(e()(),Yl(22,0,null,null,0,"img",[["alt","Kreds"],["class","kred"],["src","assets/kred.png"]],null,null,null,null,null)),(e()(),Yl(23,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,[" 55 Royal points"])),(e()(),Yl(25,0,null,null,5,"div",[["class","entry"]],null,null,null,null,null)),(e()(),Yl(26,0,null,null,2,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.buy("rp_pack125")&&r),r},null,null)),(e()(),io(-1,null,["100 "])),(e()(),Yl(28,0,null,null,0,"img",[["alt","Kreds"],["class","kred"],["src","assets/kred.png"]],null,null,null,null,null)),(e()(),Yl(29,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,[" 125 Royal points"])),(e()(),Yl(31,0,null,null,1,"button",[["id","close"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.ok()&&r),r},null,null)),(e()(),io(-1,null,["CLOSE"])),(e()(),Yl(33,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){e(n,1,0,"royal-modal")},null)}var h_=function(){function e(e,n,t){var r=this;this.modalService=e,this.resourcesService=n,this.armyService=t,this.troops=[],this.modalService.registerForMission().subscribe(function(e){var n=new eE(e.mission,e.time,e.description,e.requiredStrength,e.requiredStrength,e.cost,function(){},[]);r.mission=n,r.troops=r.getTroops()}),this.modalService.registerForCloseModal().subscribe(function(e){e!==mu.MISSION&&e!==mu.ALL||r.modalService.sendMissionResponse(null)})}return e.prototype.ngOnInit=function(){},e.prototype.ok=function(){this.modalService.sendMissionResponse(this.mission),this.modalService.close(mu.MISSION)},e.prototype.cancel=function(){this.modalService.sendMissionResponse(null),this.modalService.close(mu.MISSION)},e.prototype.getMissionName=function(){return Au.prepareMissionName(this.mission.mission)},e.prototype.getCost=function(){return this.mission.cost},e.prototype.getResourceName=function(e){return Au.prepareResourceName(e)},e.prototype.hasResource=function(e,n){return void 0===n&&(n=1),0===this.resourcesService.hasResource(e.key,e.value*n,"Army",!0)},e.prototype.getTroops=function(){return this.armyService.getTroops().filter(function(e){return e[1]>0}).map(function(e){return[e[0],e[1]]})},e.prototype.getTroopName=function(e){return Au.prepareTroopName(e)},e.prototype.evaluateValue=function(e,n){e.target.style.width=e.target.value.toString().length+1+"ch";var t=this.mission.troops.find(function(e){return e[0].troop===n[0].troop});t&&!isNaN(e.target.value)?t[1]=Number(e.target.value):this.mission.troops.push([new JS(n[0].troop,0,n[0].strength,n[0].defense),Number(e.target.value)]),this.calculateMission()},e.prototype.getTotalTroops=function(){var e=0;return this.mission.troops.forEach(function(n){return e+=n[1]}),e},e.prototype.calculateMission=function(){var e=this;this.mission.squadStrength=0,this.mission.squadDefense=0,this.mission.troops.forEach(function(n){e.mission.squadStrength+=n[0].strength*n[1],e.mission.squadDefense+=n[0].defense*n[1]})},e}(),d_=gl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:1.2em}#buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px;padding:5px}hr[_ngcontent-%COMP%]{border-color:#000;width:90%}.modal[_ngcontent-%COMP%]{width:700px}.missing[_ngcontent-%COMP%]{color:#8b0000}#troops[_ngcontent-%COMP%]{display:flex;flex-direction:row;text-align:center}.troop[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:4px}.troop[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:2ch}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]],data:{}});function f_(e){return so(0,[(e()(),Yl(0,0,null,null,4,"span",[],null,null,null,null,null)),(e()(),Yl(1,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Yl(2,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(3,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),io(4,null,[": "," / soldier "]))],function(e,n){e(n,3,0,n.component.getResourceName(n.context.$implicit.key),"resources")},function(e,n){e(n,4,0,n.context.$implicit.value)})}function g_(e){return so(0,[(e()(),Yl(0,0,null,null,5,"div",[["class","troop"]],null,null,null,null,null)),(e()(),Yl(1,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(2,null,["",""])),(e()(),Yl(3,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),Yl(4,0,null,null,0,"input",[["type","text"],["value","0"]],null,[[null,"keyup"]],function(e,n,t){var r=!0;return"keyup"===n&&(r=!1!==e.component.evaluateValue(t,e.context.$implicit)&&r),r},null,null)),(e()(),io(5,null,["/",""]))],null,function(e,n){e(n,2,0,n.component.getTroopName(n.context.$implicit[0].troop)),e(n,5,0,n.context.$implicit[1])})}function v_(e){return so(0,[(e()(),Yl(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(1,null,["",""]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.value*n.component.getTotalTroops())})}function m_(e){return so(0,[(e()(),Yl(0,0,null,null,1,"span",[["class","missing"]],null,null,null,null,null)),(e()(),io(1,null,["",""]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.value*n.component.getTotalTroops())})}function y_(e){return so(0,[(e()(),Yl(0,0,null,null,8,"span",[],null,null,null,null,null)),(e()(),Yl(1,0,null,null,7,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Yl(2,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(3,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),io(-1,null,[": "])),(e()(),jl(16777216,null,null,1,null,v_)),Mi(6,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,m_)),Mi(8,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,3,0,t.getResourceName(n.context.$implicit.key),"resources"),e(n,6,0,t.hasResource(n.context.$implicit,t.getTotalTroops())),e(n,8,0,!t.hasResource(n.context.$implicit,t.getTotalTroops()))},null)}function S_(e){return so(0,[(e()(),Yl(0,0,null,null,29,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Yl(1,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),io(2,null,["",""])),(e()(),Yl(3,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Yl(4,0,null,null,1,"span",[["id","description"]],null,null,null,null,null)),(e()(),io(5,null,["",""])),(e()(),Yl(6,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Yl(7,0,null,null,1,"span",[["id","time"]],null,null,null,null,null)),(e()(),io(8,null,["duration: "," days"])),(e()(),Yl(9,0,null,null,3,"div",[["id","cost"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,2,null,f_)),Mi(11,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null),ki(0,Ks,[Vr]),(e()(),Yl(13,0,null,null,1,"span",[["id","requiredStrength"]],null,null,null,null,null)),(e()(),io(14,null,["squad strength: ",""])),(e()(),Yl(15,0,null,null,1,"span",[["id","requiredDefense"]],null,null,null,null,null)),(e()(),io(16,null,["squad defense: ",""])),(e()(),Yl(17,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(18,0,null,null,2,"div",[["id","troops"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,g_)),Mi(20,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null),(e()(),Yl(21,0,null,null,3,"div",[["id","totalCost"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,2,null,y_)),Mi(23,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null),ki(0,Ks,[Vr]),(e()(),Yl(25,0,null,null,4,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Yl(26,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.ok()&&r),r},null,null)),(e()(),io(-1,null,["START"])),(e()(),Yl(28,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.cancel()&&r),r},null,null)),(e()(),io(-1,null,["CANCEL"]))],function(e,n){var t=n.component;e(n,11,0,hl(n,11,0,Ei(n,12).transform(t.getCost()))),e(n,20,0,t.troops),e(n,23,0,hl(n,23,0,Ei(n,24).transform(t.getCost())))},function(e,n){var t=n.component;e(n,2,0,t.getMissionName()),e(n,5,0,t.mission.description),e(n,8,0,t.mission.time),e(n,14,0,t.mission.squadStrength+" / "+t.mission.requiredStrength),e(n,16,0,t.mission.squadDefense+" / "+t.mission.requiredDefense)})}function E_(e){return so(0,[(e()(),Yl(0,0,null,null,5,"app-modal",[["id","mission-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var r=!0;return"document:keydown.escape"===n&&(r=!1!==Ei(e,1).onKeydownHandler(t)&&r),r},RC,OC)),Mi(1,4440064,null,0,bC,[xn,Pn,Ig],{id:[0,"id"]},null),(e()(),Yl(2,0,null,0,2,"div",[["class","modal"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,S_)),Mi(4,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(5,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,1,0,"mission-modal"),e(n,4,0,t.mission)},null)}var b_=function(){function e(e,n){this.modalService=e,this.resourcesService=n}return e.prototype.ngOnInit=function(){var e=this;this.modalService.registerForValue().subscribe(function(n){n&&void 0!==n.id&&(e.offer=n,e.value=e.offer.amount,e.inputRef&&(e.inputRef.nativeElement.style.width=e.value.toString().length+1+"ch"))})},e.prototype.ok=function(){this.checkValue(this.value),this.modalService.sendValueInput(Number(this.value)),this.modalService.close(mu.MARKET),this.offer=null},e.prototype.cancel=function(){this.modalService.sendValueInput(null),this.offer=null,this.modalService.close(mu.MARKET)},e.prototype.onKeydownHandler=function(e){document.getElementById("market-modal").style.display&&this.ok()},e.prototype.getResourceName=function(e){return vu[e]},e.prototype.calculatePrice=function(){var e=this.value;return this.offer.amount<e&&(e=this.offer.amount),this.offer.buy?Math.ceil(e/this.offer.amount*this.offer.price):Math.floor(e/this.offer.amount*this.offer.price)},e.prototype.checkValue=function(e){if(e&&!isNaN(e)){if(this.offer.amount>=e)return!0;this.inputRef.nativeElement.value=this.offer.amount,this.value=this.offer.amount}return!1},e.prototype.getResourceAmount=function(){return this.resourcesService.getResource(this.offer.resource).amount},e.prototype.getResourceLimit=function(){return this.resourcesService.getResource(this.offer.resource).limit},e}(),O_=gl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:1.2em}#title[_ngcontent-%COMP%]{font-size:1.5em;margin-bottom:5px}#buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px;padding:5px}#input[_ngcontent-%COMP%]{display:inline-block;width:3ch;font-size:1em}app-icon[_ngcontent-%COMP%]{display:inline-block;margin:0 3px}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]],data:{}});function R_(e){return so(0,[(e()(),Yl(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["buy"]))],null,null)}function T_(e){return so(0,[(e()(),Yl(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["sell"]))],null,null)}function C_(e){return so(0,[(e()(),Yl(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["BUY"]))],null,null)}function __(e){return so(0,[(e()(),Yl(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["SELL"]))],null,null)}function I_(e){return so(0,[(e()(),Yl(0,0,null,null,35,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Yl(1,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),io(-1,null,["Market offer"])),(e()(),Yl(3,0,null,null,9,"span",[["class","icon"],["id","text"]],null,null,null,null,null)),(e()(),io(-1,null,["How many "])),(e()(),Yl(5,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(6,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),io(7,null,["(","/",") would you like to "])),(e()(),jl(16777216,null,null,1,null,R_)),Mi(9,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,T_)),Mi(11,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),io(-1,null,["?"])),(e()(),Yl(13,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(14,0,null,null,12,"span",[["class","icon"]],null,null,null,null,null)),(e()(),Yl(15,0,[[1,0],["input",1]],null,5,"input",[["id","input"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var r=!0,l=e.component;return"input"===n&&(r=!1!==Ei(e,16)._handleInput(t.target.value)&&r),"blur"===n&&(r=!1!==Ei(e,16).onTouched()&&r),"compositionstart"===n&&(r=!1!==Ei(e,16)._compositionStart()&&r),"compositionend"===n&&(r=!1!==Ei(e,16)._compositionEnd(t.target.value)&&r),"ngModelChange"===n&&(r=!1!==l.checkValue(t)&&r),"ngModelChange"===n&&(r=!1!==(l.value=t)&&r),r},null,null)),Mi(16,16384,null,0,Cf,[xn,Pn,[2,Tf]],null,null),Li(1024,null,Of,function(e){return[e]},[Cf]),Mi(18,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),Li(2048,null,Nf,null,[pg]),Mi(20,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),io(21,null,["/"," "])),(e()(),Yl(22,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(23,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),io(24,null,[" for "," "])),(e()(),Yl(25,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(26,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Yl(27,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(28,0,null,null,7,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Yl(29,0,null,null,4,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.ok()&&r),r},null,null)),(e()(),jl(16777216,null,null,1,null,C_)),Mi(31,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,__)),Mi(33,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(34,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.cancel()&&r),r},null,null)),(e()(),io(-1,null,["CANCEL"]))],function(e,n){var t=n.component;e(n,6,0,t.getResourceName(t.offer.resource),"resources"),e(n,9,0,t.offer.buy),e(n,11,0,!t.offer.buy),e(n,18,0,t.value),e(n,23,0,t.getResourceName(t.offer.resource),"resources"),e(n,26,0,"coins","resources"),e(n,31,0,t.offer.buy),e(n,33,0,!t.offer.buy)},function(e,n){var t=n.component;e(n,7,0,t.getResourceAmount(),t.getResourceLimit()),e(n,15,0,Ei(n,20).ngClassUntouched,Ei(n,20).ngClassTouched,Ei(n,20).ngClassPristine,Ei(n,20).ngClassDirty,Ei(n,20).ngClassValid,Ei(n,20).ngClassInvalid,Ei(n,20).ngClassPending),e(n,21,0,t.offer.amount),e(n,24,0,t.calculatePrice())})}function A_(e){return so(0,[Qi(671088640,1,{inputRef:0}),(e()(),Yl(1,0,null,null,5,"app-modal",[["id","market-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var r=!0;return"document:keydown.escape"===n&&(r=!1!==Ei(e,2).onKeydownHandler(t)&&r),r},RC,OC)),Mi(2,4440064,null,0,bC,[xn,Pn,Ig],{id:[0,"id"]},null),(e()(),Yl(3,0,null,0,2,"div",[["class","modal"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,I_)),Mi(5,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(6,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,2,0,"market-modal"),e(n,5,0,t.offer)},null)}var w_=function(){function e(e,n){var t=this;this.modalService=e,this.resourcesService=n,this.modalService.registerForBuilding().subscribe(function(e){t.building=e})}return e.prototype.ngOnInit=function(){},e.prototype.ok=function(){this.modalService.close(mu.WORK_MANAGEMENT)},e.prototype.cancel=function(){this.modalService.close(mu.WORK_MANAGEMENT)},e.prototype.stop=function(){this.building.isWorking()?this.building.stopProduction():this.building.startProduction()||this.modalService.info("Cannot unlock production of "+this.building.getName()+". Number of free workers: "+this.resourcesService.getPeople())},e.prototype.getBuildingName=function(){return Au.prepareBuildingName(this.building.getBuildingType())},e.prototype.getResourceName=function(e){return Au.prepareResourceName(e)},e.prototype.getResource=function(e){return this.resourcesService.getResource(e)},e.prototype.onKeydownHandler=function(){document.getElementById("work-management-modal").style.display&&this.ok()},e}(),N_=gl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{text-align:center;font-size:1.2em}input[_ngcontent-%COMP%]:not([type]), input[type=text][_ngcontent-%COMP%]{width:5ch}#rules[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}#input[_ngcontent-%COMP%]{flex:0 0 50%;border-right:1px solid #000}#output[_ngcontent-%COMP%]{flex:0 0 50%}"]],data:{}});function P_(e){return so(0,[(e()(),Yl(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),io(-1,null,[" working"]))],null,null)}function D_(e){return so(0,[(e()(),Yl(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),io(-1,null,[" not working"]))],null,null)}function M_(e){return so(0,[(e()(),Yl(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),Yl(1,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.stop()&&r),r},null,null)),(e()(),io(-1,null,["Hire worker"]))],null,null)}function k_(e){return so(0,[(e()(),Yl(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),Yl(1,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.stop()&&r),r},null,null)),(e()(),io(-1,null,["Fire worker"]))],null,null)}function L_(e){return so(0,[(e()(),Yl(0,0,null,null,10,"div",[],null,null,null,null,null)),(e()(),Yl(1,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(2,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),io(-1,null,[" > "])),(e()(),Yl(4,0,null,null,5,"input",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var r=!0;return"input"===n&&(r=!1!==Ei(e,5)._handleInput(t.target.value)&&r),"blur"===n&&(r=!1!==Ei(e,5).onTouched()&&r),"compositionstart"===n&&(r=!1!==Ei(e,5)._compositionStart()&&r),"compositionend"===n&&(r=!1!==Ei(e,5)._compositionEnd(t.target.value)&&r),"ngModelChange"===n&&(r=!1!==(e.context.$implicit[1]=t)&&r),r},null,null)),Mi(5,16384,null,0,Cf,[xn,Pn,[2,Tf]],null,null),Li(1024,null,Of,function(e){return[e]},[Cf]),Mi(7,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),Li(2048,null,Nf,null,[pg]),Mi(9,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),io(10,null,[" ( ","/"," ) "]))],function(e,n){e(n,2,0,n.component.getResourceName(n.context.$implicit[0]),"resources"),e(n,7,0,n.context.$implicit[1])},function(e,n){var t=n.component;e(n,4,0,Ei(n,9).ngClassUntouched,Ei(n,9).ngClassTouched,Ei(n,9).ngClassPristine,Ei(n,9).ngClassDirty,Ei(n,9).ngClassValid,Ei(n,9).ngClassInvalid,Ei(n,9).ngClassPending),e(n,10,0,t.getResource(n.context.$implicit[0]).amount,t.getResource(n.context.$implicit[0]).limit)})}function x_(e){return so(0,[(e()(),Yl(0,0,null,null,10,"div",[],null,null,null,null,null)),(e()(),Yl(1,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(2,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),io(-1,null,[" < "])),(e()(),Yl(4,0,null,null,5,"input",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var r=!0;return"input"===n&&(r=!1!==Ei(e,5)._handleInput(t.target.value)&&r),"blur"===n&&(r=!1!==Ei(e,5).onTouched()&&r),"compositionstart"===n&&(r=!1!==Ei(e,5)._compositionStart()&&r),"compositionend"===n&&(r=!1!==Ei(e,5)._compositionEnd(t.target.value)&&r),"ngModelChange"===n&&(r=!1!==(e.context.$implicit[1]=t)&&r),r},null,null)),Mi(5,16384,null,0,Cf,[xn,Pn,[2,Tf]],null,null),Li(1024,null,Of,function(e){return[e]},[Cf]),Mi(7,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),Li(2048,null,Nf,null,[pg]),Mi(9,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),io(10,null,[" ( ","/"," ) "]))],function(e,n){e(n,2,0,n.component.getResourceName(n.context.$implicit[0]),"resources"),e(n,7,0,n.context.$implicit[1])},function(e,n){var t=n.component;e(n,4,0,Ei(n,9).ngClassUntouched,Ei(n,9).ngClassTouched,Ei(n,9).ngClassPristine,Ei(n,9).ngClassDirty,Ei(n,9).ngClassValid,Ei(n,9).ngClassInvalid,Ei(n,9).ngClassPending),e(n,10,0,t.getResource(n.context.$implicit[0]).amount,t.getResource(n.context.$implicit[0]).limit)})}function F_(e){return so(0,[(e()(),Yl(0,0,null,null,37,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Yl(1,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),io(2,null,[""," work management"])),(e()(),Yl(3,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(4,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),io(-1,null,[" status: "])),(e()(),jl(16777216,null,null,1,null,P_)),Mi(7,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,D_)),Mi(9,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,M_)),Mi(11,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,k_)),Mi(13,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(14,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),io(-1,null,[" work management on/off "])),(e()(),Yl(16,0,null,null,5,"input",[["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var r=!0,l=e.component;return"change"===n&&(r=!1!==Ei(e,17).onChange(t.target.checked)&&r),"blur"===n&&(r=!1!==Ei(e,17).onTouched()&&r),"ngModelChange"===n&&(r=!1!==(l.building.getWorkSettings().enabled=t)&&r),r},null,null)),Mi(17,16384,null,0,Rf,[xn,Pn],null,null),Li(1024,null,Of,function(e){return[e]},[Rf]),Mi(19,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),Li(2048,null,Nf,null,[pg]),Mi(21,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),Yl(22,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(23,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(24,0,null,null,9,"div",[["id","rules"]],null,null,null,null,null)),(e()(),Yl(25,0,null,null,3,"div",[["id","input"]],null,null,null,null,null)),(e()(),io(-1,null,[" Input resources: "])),(e()(),jl(16777216,null,null,1,null,L_)),Mi(28,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null),(e()(),Yl(29,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(30,0,null,null,3,"div",[["id","output"]],null,null,null,null,null)),(e()(),io(-1,null,[" Output resources: "])),(e()(),jl(16777216,null,null,1,null,x_)),Mi(33,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null),(e()(),Yl(34,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(35,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(36,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.ok()&&r),r},null,null)),(e()(),io(-1,null,["Close"]))],function(e,n){var t=n.component;e(n,7,0,t.building.isWorking()),e(n,9,0,!t.building.isWorking()),e(n,11,0,!t.building.getWorkSettings().enabled&&!t.building.isWorking()),e(n,13,0,!t.building.getWorkSettings().enabled&&t.building.isWorking()),e(n,19,0,t.building.getWorkSettings().enabled),e(n,28,0,t.building.getWorkSettings().inputSettings),e(n,33,0,t.building.getWorkSettings().outputSettings)},function(e,n){e(n,2,0,n.component.getBuildingName()),e(n,16,0,Ei(n,21).ngClassUntouched,Ei(n,21).ngClassTouched,Ei(n,21).ngClassPristine,Ei(n,21).ngClassDirty,Ei(n,21).ngClassValid,Ei(n,21).ngClassInvalid,Ei(n,21).ngClassPending)})}function U_(e){return so(0,[(e()(),Yl(0,0,null,null,5,"app-modal",[["id","work-management-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var r=!0;return"document:keydown.escape"===n&&(r=!1!==Ei(e,1).onKeydownHandler(t)&&r),r},RC,OC)),Mi(1,4440064,null,0,bC,[xn,Pn,Ig],{id:[0,"id"]},null),(e()(),Yl(2,0,null,0,2,"div",[["class","modal"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,F_)),Mi(4,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(5,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,1,0,"work-management-modal"),e(n,4,0,t.building)},null)}var H_=function(){function e(e,n,t,r){var l=this;this.modalService=e,this.tutorialService=n,this.tickerService=t,this.text="",this.tutorialStages=[],this.currentStep=1,this.modalService.registerForTutorial().subscribe(function(e){l.tutorialStages=e,l.currentStep=1,r.destroyed||r.detectChanges()})}return e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.tutorialService.enableTutorials()},e.prototype.ok=function(){this.currentStep+=1,this.modalService.openTutorialModal(this.tutorialStages[this.currentStep-1].position)},e.prototype.skip=function(){var e=this;this.modalService.open(mu.CONFIRM),this.modalService.setModalText("Are you sure you want to skip tutorial?<br>You can always start it again from the top right settings menu");var n=this.modalService.registerForConfirmation().subscribe(function(t){n.unsubscribe(),t&&(e.modalService.sendTutorialResponse(-1),e.tickerService.start(),e.modalService.close(mu.TUTORIAL))})},e.prototype.finish=function(){this.modalService.sendTutorialResponse(1),this.tickerService.start(),this.modalService.close(mu.TUTORIAL)},e}(),G_=gl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}"]],data:{}});function B_(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.ok()&&r),r},null,null)),(e()(),io(-1,null,["NEXT"]))],null,null)}function V_(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.finish()&&r),r},null,null)),(e()(),io(-1,null,["FINISH"]))],null,null)}function W_(e){return so(0,[(e()(),Yl(0,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.skip()&&r),r},null,null)),(e()(),io(-1,null,["SKIP TUTORIAL"]))],null,null)}function j_(e){return so(0,[(e()(),Yl(0,0,null,null,10,null,null,null,null,null,null,null)),(e()(),Yl(1,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),io(2,null,["Tutorial ",""])),(e()(),Yl(3,0,null,null,0,"span",[["id","text"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Yl(4,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,B_)),Mi(6,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,V_)),Mi(8,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,W_)),Mi(10,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(0,null,null,0))],function(e,n){var t=n.component;e(n,6,0,t.currentStep<t.tutorialStages.length),e(n,8,0,t.currentStep===t.tutorialStages.length),e(n,10,0,t.currentStep!==t.tutorialStages.length)},function(e,n){var t=n.component;e(n,2,0,t.currentStep+"/"+t.tutorialStages.length),e(n,3,0,t.tutorialStages[t.currentStep-1].text)})}function Y_(e){return so(0,[(e()(),Yl(0,0,null,null,6,"app-modal",[["id","tutorial-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var r=!0;return"document:keydown.escape"===n&&(r=!1!==Ei(e,1).onKeydownHandler(t)&&r),r},RC,OC)),Mi(1,4440064,null,0,bC,[xn,Pn,Ig],{id:[0,"id"]},null),(e()(),Yl(2,0,null,0,3,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Yl(3,0,null,null,2,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,j_)),Mi(5,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(6,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,1,0,"tutorial-modal"),e(n,5,0,t.tutorialStages.length>0)},null)}var z_=function(){function e(e){var n=this;this.modalService=e,this.messageNumber=Vu.length,this.modalService.registerForCloseModal().subscribe(function(e){return n.messageNumber=Vu.length}),this.modalService.registerForOnOpen().subscribe(function(e){e!==mu.CHANGELOG&&e!==mu.ALL||(n.textRef.nativeElement.scrollTop=0)})}return e.prototype.ngOnInit=function(){},e.prototype.ok=function(){this.modalService.close(mu.CHANGELOG)},e.prototype.hasPrevious=function(){return this.messageNumber>1},e.prototype.previous=function(){this.messageNumber>1&&(this.messageNumber-=1)},e.prototype.hasNext=function(){return this.messageNumber<Vu.length},e.prototype.next=function(){this.messageNumber<Vu.length&&(this.messageNumber+=1)},e.prototype.onKeydownHandler=function(e){document.getElementById("changelog-modal").style.display&&this.ok()},e.prototype.getChange=function(){return Vu[this.messageNumber-1]},e}(),K_=gl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}#buttons[_ngcontent-%COMP%]{width:50%;display:flex;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:0 0 33%}#header[_ngcontent-%COMP%]{font-size:1.5em;font-weight:700;margin-bottom:10px}#text[_ngcontent-%COMP%]{font-size:1.2em;overflow-y:auto}#text[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:0}button[disabled][_ngcontent-%COMP%]{color:#5a5a5a}button[disabled][_ngcontent-%COMP%]:active{background-color:var(--passive-colour);cursor:default}button[disabled][_ngcontent-%COMP%]:hover{cursor:default}"]],data:{}});function q_(e){return so(0,[Qi(402653184,1,{textRef:0}),(e()(),Yl(1,0,null,null,14,"app-modal",[["id","changelog-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var r=!0;return"document:keydown.escape"===n&&(r=!1!==Ei(e,2).onKeydownHandler(t)&&r),r},RC,OC)),Mi(2,4440064,null,0,bC,[xn,Pn,Ig],{id:[0,"id"]},null),(e()(),Yl(3,0,null,0,11,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Yl(4,0,null,null,10,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Yl(5,0,null,null,0,"span",[["id","header"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Yl(6,0,[[1,0],["text",1]],null,0,"div",[["id","text"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Yl(7,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(8,0,null,null,6,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Yl(9,0,null,null,1,"button",[],[[8,"disabled",0]],[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.previous()&&r),r},null,null)),(e()(),io(-1,null,["PREVIOUS"])),(e()(),Yl(11,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.ok()&&r),r},null,null)),(e()(),io(-1,null,["CLOSE"])),(e()(),Yl(13,0,null,null,1,"button",[],[[8,"disabled",0]],[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.next()&&r),r},null,null)),(e()(),io(-1,null,["NEXT"])),(e()(),Yl(15,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){e(n,2,0,"changelog-modal")},function(e,n){var t=n.component;e(n,5,0,t.getChange().VERSION),e(n,6,0,t.getChange().MESSAGE),e(n,9,0,!t.hasPrevious()),e(n,13,0,!t.hasNext())})}var $_=function(){function e(e){var n=this;this.modalService=e,this.modalService.registerForText().subscribe(function(e){return n.text=e})}return e.prototype.ngOnInit=function(){},e.prototype.ok=function(){this.modalService.sendConfirmationResult(!0),this.modalService.close(mu.CONFIRM)},e.prototype.cancel=function(){this.modalService.sendConfirmationResult(!1),this.modalService.close(mu.CONFIRM)},e.prototype.onKeydownHandler=function(e){document.getElementById("confirm-modal").style.display&&this.ok()},e}(),Q_=gl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}#buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px;padding:5px}"]],data:{}});function Z_(e){return so(0,[(e()(),Yl(0,0,null,null,11,"app-modal",[["id","confirm-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var r=!0;return"document:keydown.escape"===n&&(r=!1!==Ei(e,1).onKeydownHandler(t)&&r),r},RC,OC)),Mi(1,4440064,null,0,bC,[xn,Pn,Ig],{id:[0,"id"]},null),(e()(),Yl(2,0,null,0,8,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Yl(3,0,null,null,7,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Yl(4,0,null,null,0,"span",[["id","text"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Yl(5,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(6,0,null,null,4,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Yl(7,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.ok()&&r),r},null,null)),(e()(),io(-1,null,["YES"])),(e()(),Yl(9,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.cancel()&&r),r},null,null)),(e()(),io(-1,null,["NO"])),(e()(),Yl(11,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){e(n,1,0,"confirm-modal")},function(e,n){e(n,4,0,n.component.text)})}var X_=function(){function e(e){var n=this;this.modalService=e,this.modalService.registerForResourceOptions().subscribe(function(e){n.resourceOptions=gg.clone(e)}),this.modalService.registerForCloseModal().subscribe(function(e){e!==mu.RESOURCE_MANAGEMENT&&e!==mu.ALL||n.modalService.sendResourceOptionsResponse(null)})}return e.prototype.ngOnInit=function(){},e.prototype.ok=function(){this.modalService.sendResourceOptionsResponse(this.resourceOptions),this.modalService.close(mu.RESOURCE_MANAGEMENT)},e.prototype.cancel=function(){this.modalService.sendResourceOptionsResponse(null),this.modalService.close(mu.RESOURCE_MANAGEMENT)},e.prototype.onKeydownHandler=function(e){document.getElementById("resource-management-modal").style.display&&this.ok()},e.prototype.getResourceName=function(){return Au.prepareResourceName(this.resourceOptions.resource)},e}(),J_=gl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}#title[_ngcontent-%COMP%]{font-size:1.3em;font-weight:700;margin-bottom:20px}input[type=number][_ngcontent-%COMP%]{width:6ch}#exceptions[_ngcontent-%COMP%]{width:100%;text-align:center}#exceptionTitle[_ngcontent-%COMP%]{padding-top:10px;text-align:center}.entry[_ngcontent-%COMP%]{text-align:center}.exceptionEntry[_ngcontent-%COMP%]{display:inline-block;text-align:center;border:1px solid #000;min-width:100px;min-height:50px;padding:4px 4px 0;margin:5px}#buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px;padding:5px}.hidden[_ngcontent-%COMP%]{visibility:hidden}"]],data:{}});function eI(e){return so(0,[(e()(),Yl(0,0,null,null,18,"div",[["class","exceptionEntry"]],null,null,null,null,null)),(e()(),Yl(1,0,null,null,7,"label",[],[[8,"htmlFor",0]],null,null,null,null)),(e()(),io(2,null,["",""])),(e()(),Yl(3,0,null,null,5,"input",[["type","checkbox"]],[[8,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var r=!0;return"change"===n&&(r=!1!==Ei(e,4).onChange(t.target.checked)&&r),"blur"===n&&(r=!1!==Ei(e,4).onTouched()&&r),"ngModelChange"===n&&(r=!1!==(e.context.$implicit.enabled=t)&&r),r},null,null)),Mi(4,16384,null,0,Rf,[xn,Pn],null,null),Li(1024,null,Of,function(e){return[e]},[Rf]),Mi(6,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),Li(2048,null,Nf,null,[pg]),Mi(8,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),Yl(9,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(10,0,null,null,8,"input",[["min","0"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var r=!0;return"input"===n&&(r=!1!==Ei(e,11)._handleInput(t.target.value)&&r),"blur"===n&&(r=!1!==Ei(e,11).onTouched()&&r),"compositionstart"===n&&(r=!1!==Ei(e,11)._compositionStart()&&r),"compositionend"===n&&(r=!1!==Ei(e,11)._compositionEnd(t.target.value)&&r),"change"===n&&(r=!1!==Ei(e,12).onChange(t.target.value)&&r),"input"===n&&(r=!1!==Ei(e,12).onChange(t.target.value)&&r),"blur"===n&&(r=!1!==Ei(e,12).onTouched()&&r),"ngModelChange"===n&&(r=!1!==(e.context.$implicit.reserved=t)&&r),r},null,null)),Mi(11,16384,null,0,Cf,[xn,Pn,[2,Tf]],null,null),Mi(12,16384,null,0,Af,[xn,Pn],null,null),Li(1024,null,Of,function(e,n){return[e,n]},[Cf,Af]),Mi(14,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),Li(2048,null,Nf,null,[pg]),Mi(16,16384,null,0,Qf,[[4,Nf]],null,null),Mi(17,278528,null,0,Ms,[Br,Vr,Pn,xn],{ngClass:[0,"ngClass"]},null),ro(18,{hidden:0})],function(e,n){e(n,6,0,n.context.$implicit.enabled),e(n,14,0,n.context.$implicit.reserved);var t=e(n,18,0,!n.context.$implicit.enabled);e(n,17,0,t)},function(e,n){e(n,1,0,Vl(1,"",n.context.$implicit.name,"")),e(n,2,0,n.context.$implicit.name),e(n,3,0,Vl(1,"",n.context.$implicit.name,""),Ei(n,8).ngClassUntouched,Ei(n,8).ngClassTouched,Ei(n,8).ngClassPristine,Ei(n,8).ngClassDirty,Ei(n,8).ngClassValid,Ei(n,8).ngClassInvalid,Ei(n,8).ngClassPending),e(n,10,0,Ei(n,16).ngClassUntouched,Ei(n,16).ngClassTouched,Ei(n,16).ngClassPristine,Ei(n,16).ngClassDirty,Ei(n,16).ngClassValid,Ei(n,16).ngClassInvalid,Ei(n,16).ngClassPending)})}function nI(e){return so(0,[(e()(),Yl(0,0,null,null,30,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Yl(1,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),io(2,null,[""," management"])),(e()(),Yl(3,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(4,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(5,0,null,null,10,"span",[["class","entry"]],null,null,null,null,null)),(e()(),Yl(6,0,null,null,1,"label",[["for","reserved"]],null,null,null,null,null)),(e()(),io(-1,null,["reserved amount: "])),(e()(),Yl(8,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(9,0,null,null,6,"input",[["id","reserved"],["min","0"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var r=!0,l=e.component;return"input"===n&&(r=!1!==Ei(e,10)._handleInput(t.target.value)&&r),"blur"===n&&(r=!1!==Ei(e,10).onTouched()&&r),"compositionstart"===n&&(r=!1!==Ei(e,10)._compositionStart()&&r),"compositionend"===n&&(r=!1!==Ei(e,10)._compositionEnd(t.target.value)&&r),"change"===n&&(r=!1!==Ei(e,11).onChange(t.target.value)&&r),"input"===n&&(r=!1!==Ei(e,11).onChange(t.target.value)&&r),"blur"===n&&(r=!1!==Ei(e,11).onTouched()&&r),"ngModelChange"===n&&(r=!1!==(l.resourceOptions.reserve=t)&&r),r},null,null)),Mi(10,16384,null,0,Cf,[xn,Pn,[2,Tf]],null,null),Mi(11,16384,null,0,Af,[xn,Pn],null,null),Li(1024,null,Of,function(e,n){return[e,n]},[Cf,Af]),Mi(13,671744,null,0,pg,[[8,null],[8,null],[8,null],[6,Of]],{model:[0,"model"]},{update:"ngModelChange"}),Li(2048,null,Nf,null,[pg]),Mi(15,16384,null,0,Qf,[[4,Nf]],null,null),(e()(),Yl(16,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(17,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(18,0,null,null,3,"span",[["id","exceptionTitle"]],null,null,null,null,null)),(e()(),io(-1,null,["Exceptions:"])),(e()(),Yl(20,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),io(-1,null,[" (will use it's own limit number if enabled)"])),(e()(),Yl(22,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(23,0,null,null,2,"div",[["id","exceptions"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,eI)),Mi(25,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null),(e()(),Yl(26,0,null,null,4,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Yl(27,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.ok()&&r),r},null,null)),(e()(),io(-1,null,["SAVE"])),(e()(),Yl(29,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.cancel()&&r),r},null,null)),(e()(),io(-1,null,["CANCEL"]))],function(e,n){var t=n.component;e(n,13,0,t.resourceOptions.reserve),e(n,25,0,t.resourceOptions.consumers)},function(e,n){e(n,2,0,n.component.getResourceName()),e(n,9,0,Ei(n,15).ngClassUntouched,Ei(n,15).ngClassTouched,Ei(n,15).ngClassPristine,Ei(n,15).ngClassDirty,Ei(n,15).ngClassValid,Ei(n,15).ngClassInvalid,Ei(n,15).ngClassPending)})}function tI(e){return so(0,[(e()(),Yl(0,0,null,null,5,"app-modal",[["id","resource-management-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var r=!0;return"document:keydown.escape"===n&&(r=!1!==Ei(e,1).onKeydownHandler(t)&&r),r},RC,OC)),Mi(1,4440064,null,0,bC,[xn,Pn,Ig],{id:[0,"id"]},null),(e()(),Yl(2,0,null,0,2,"div",[["class","modal"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,nI)),Mi(4,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(5,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,1,0,"resource-management-modal"),e(n,4,0,t.resourceOptions)},null)}var rI=function(){function e(e){var n=this;this.modalService=e,this.text="",this.modalService.registerForText().subscribe(function(e){return n.text=e})}return e.prototype.ngOnInit=function(){},e.prototype.ok=function(){this.modalService.close(mu.INFO)},e.prototype.onKeydownHandler=function(e){document.getElementById("info-modal").style.display&&this.ok()},e}(),lI=gl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:1.2em}"]],data:{}});function iI(e){return so(0,[(e()(),Yl(0,0,null,null,8,"app-modal",[["id","info-modal"]],null,[["document","keydown.escape"]],function(e,n,t){var r=!0;return"document:keydown.escape"===n&&(r=!1!==Ei(e,1).onKeydownHandler(t)&&r),r},RC,OC)),Mi(1,4440064,null,0,bC,[xn,Pn,Ig],{id:[0,"id"]},null),(e()(),Yl(2,0,null,0,5,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Yl(3,0,null,null,4,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Yl(4,0,null,null,0,"span",[["id","text"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Yl(5,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Yl(6,0,null,null,1,"button",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.ok()&&r),r},null,null)),(e()(),io(-1,null,["OK"])),(e()(),Yl(8,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],function(e,n){e(n,1,0,"info-modal")},function(e,n){e(n,4,0,n.component.text)})}var oI=function(){function e(){}return e.prototype.ngOnInit=function(){},e}(),uI=gl({encapsulation:0,styles:[[""]],data:{}});function sI(e){return so(0,[(e()(),Yl(0,0,null,null,1,"app-build-modal",[],null,null,null,WC,VC)),Mi(1,114688,null,0,BC,[Ig],null,null),(e()(),Yl(2,0,null,null,1,"app-export-modal",[],null,null,null,QC,KC)),Mi(3,114688,null,0,zC,[YC,Ig],null,null),(e()(),Yl(4,0,null,null,1,"app-import-modal",[],null,null,null,JC,XC)),Mi(5,114688,null,0,ZC,[YC,Ig],null,null),(e()(),Yl(6,0,null,null,1,"app-hard-reset-modal",[],null,null,null,t_,n_)),Mi(7,114688,null,0,e_,[Ig,YC],null,null),(e()(),Yl(8,0,null,null,1,"app-options-modal",[],null,null,null,i_,l_)),Mi(9,114688,null,0,r_,[bg,Ig],null,null),(e()(),Yl(10,0,null,null,1,"app-input-modal",[],null,[["document","keydown.enter"]],function(e,n,t){var r=!0;return"document:keydown.enter"===n&&(r=!1!==Ei(e,11).onKeydownHandler(t)&&r),r},s_,u_)),Mi(11,114688,null,0,o_,[Ig],null,null),(e()(),Yl(12,0,null,null,1,"app-royal-modal",[],null,null,null,p_,c_)),Mi(13,114688,null,0,a_,[Dg,Pg,Ig],null,null),(e()(),Yl(14,0,null,null,1,"app-mission-modal",[],null,null,null,E_,d_)),Mi(15,114688,null,0,h_,[Ig,Lg,nE],null,null),(e()(),Yl(16,0,null,null,1,"app-market-modal",[],null,[["document","keydown.enter"]],function(e,n,t){var r=!0;return"document:keydown.enter"===n&&(r=!1!==Ei(e,17).onKeydownHandler(t)&&r),r},A_,O_)),Mi(17,114688,null,0,b_,[Ig,Lg],null,null),(e()(),Yl(18,0,null,null,1,"app-work-management-modal",[],null,[["document","keydown.enter"]],function(e,n,t){var r=!0;return"document:keydown.enter"===n&&(r=!1!==Ei(e,19).onKeydownHandler(t)&&r),r},U_,N_)),Mi(19,114688,null,0,w_,[Ig,Lg],null,null),(e()(),Yl(20,0,null,null,1,"app-tutorial-modal",[],null,null,null,Y_,G_)),Mi(21,4308992,null,0,H_,[Ig,Ag,jC,Rr],null,null),(e()(),Yl(22,0,null,null,1,"app-changelog-modal",[],null,[["document","keydown.enter"]],function(e,n,t){var r=!0;return"document:keydown.enter"===n&&(r=!1!==Ei(e,23).onKeydownHandler(t)&&r),r},q_,K_)),Mi(23,114688,null,0,z_,[Ig],null,null),(e()(),Yl(24,0,null,null,1,"app-confirm-modal",[],null,[["document","keydown.enter"]],function(e,n,t){var r=!0;return"document:keydown.enter"===n&&(r=!1!==Ei(e,25).onKeydownHandler(t)&&r),r},Z_,Q_)),Mi(25,114688,null,0,$_,[Ig],null,null),(e()(),Yl(26,0,null,null,1,"app-resource-management-modal",[],null,[["document","keydown.enter"]],function(e,n,t){var r=!0;return"document:keydown.enter"===n&&(r=!1!==Ei(e,27).onKeydownHandler(t)&&r),r},tI,J_)),Mi(27,114688,null,0,X_,[Ig],null,null),(e()(),Yl(28,0,null,null,1,"app-info-modal",[],null,[["document","keydown.enter"]],function(e,n,t){var r=!0;return"document:keydown.enter"===n&&(r=!1!==Ei(e,29).onKeydownHandler(t)&&r),r},iI,lI)),Mi(29,114688,null,0,rI,[Ig],null,null)],function(e,n){e(n,1,0),e(n,3,0),e(n,5,0),e(n,7,0),e(n,9,0),e(n,11,0),e(n,13,0),e(n,15,0),e(n,17,0),e(n,19,0),e(n,21,0),e(n,23,0),e(n,25,0),e(n,27,0),e(n,29,0)},null)}var aI=function(){function e(e){this.calendarService=e}return e.prototype.ngOnInit=function(){},e.prototype.getDay=function(){return this.calendarService.getDay()},e.prototype.getYear=function(){return this.calendarService.getYear()},e.prototype.getSeason=function(){return Rg[this.calendarService.getSeason()].toLowerCase()},e}(),cI=gl({encapsulation:0,styles:[[""]],data:{}});function pI(e){return so(0,[(e()(),Yl(0,0,null,null,1,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),io(1,null,[" day: "," year: "," ","\n"]))],null,function(e,n){var t=n.component;e(n,1,0,t.getDay(),t.getYear(),t.getSeason())})}var hI=function(){function e(e,n,t,r,l,i,o,u,s){var a=this;this.serializerService=e,this.logService=n,this.modalService=t,this.resourcesService=r,this.weatherService=l,this.optionsService=i,this.gameService=o,this.tickerService=u,this.tutorialService=s,this.paused=!1,this.metric=this.optionsService.getOption(Eg.METRIC),this.optionsSubscription||(this.optionsSubscription=this.optionsService.registerForOptionsChange().subscribe(function(){return a.metric=a.optionsService.getOption(Eg.METRIC)}))}return e.prototype.ngOnInit=function(){var e=this;this.resources=this.resourcesService.getResources(),this.resourcesService.registerForResourcesChange().subscribe(function(n){e.resources=n})},e.prototype.getResourcesValues=function(){return Array.from(this.resources.values())},e.prototype.save=function(){this.serializerService.initSave(),this.logService.log("saved")},e.prototype.load=function(){this.serializerService.initLoad()},e.prototype.import=function(){this.modalService.open(mu.IMPORT)},e.prototype.export=function(){this.modalService.open(mu.EXPORT)},e.prototype.hardReset=function(){this.modalService.open(mu.HARD_RESET)},e.prototype.options=function(){this.modalService.open(mu.OPTIONS)},e.prototype.getTemperature=function(){return this.weatherService.getCurrentTemperature()},e.prototype.getWeather=function(){return this.weatherService.getCurrentWeather()},e.prototype.getWeatherName=function(){return xu[this.getWeather()].toLowerCase()},e.prototype.calendarEnabled=function(){return this.gameService.isEnabled(Eu.CALENDAR)},e.prototype.softReset=function(){var e=this;this.modalService.open(mu.CONFIRM),this.modalService.setModalText("Are you sure you want to soft reset your progress? <br>You will start from the beginning and all progress except for</br>royal points,<br>permanent royal upgrades<br>and Wonders and their effects will be deleted.");var n=this.modalService.registerForConfirmation().subscribe(function(t){t&&e.serializerService.softReset(),n.unsubscribe()})},e.prototype.isNotCoins=function(e){return e.resource!==vu.COINS},e.prototype.resetTutorials=function(){this.tutorialService.resetTutorials()},e.prototype.pause=function(){this.tickerService.stop(),this.paused=!0},e.prototype.resume=function(){this.tickerService.forceStart(),this.paused=!1},e.prototype.getResourceDescription=function(e){var n="";return e.hasResourceType(Cu.CONSUMABLE)&&(n+="nutrition: "+rs.getResource(e.resource).POWER),e.hasResourceType(Cu.FUEL)&&(n+="heating energy: "+rs.getResource(e.resource).POWER),""!==n?"<hr>"+n:n},e.prototype.getResourceConsumers=function(e){var n="<b>used by:</b><br>",t=this.resourcesService.getResourceUses(e.resource),r=[];return t&&(t.slice().forEach(function(e){var n=r.find(function(n){return n[0]===e.userName});n?n[1]+=e.value:r.push([e.userName,e.value])}),r.sort(function(e,n){return e[0].localeCompare(n[0])}).forEach(function(e){n+=e[0]+": "+e[1]+"<br>"})),"<b>used by:</b><br>"!==n?"<hr>"+n:""},e}(),dI=gl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{font-size:1em;display:flex;height:100%;align-items:center}button[_ngcontent-%COMP%]{width:100%;margin:0;padding:0}#highlighted[_ngcontent-%COMP%], app-calendar[_ngcontent-%COMP%]{display:inline-block}#cog[_ngcontent-%COMP%]{float:right;margin-top:-2px;height:30px;width:30px}#cog[_ngcontent-%COMP%]:hover{cursor:pointer}.dropdown[_ngcontent-%COMP%]{position:absolute;right:4px;display:inline-block}.dropdown-content[_ngcontent-%COMP%]{cursor:pointer;display:none;position:absolute;list-style:none;background-color:#f9f9f9;min-width:150px;right:0;font-size:1.2em;margin-top:25px;padding:0;border:1px solid #000}.dropdown-content[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:pointer}.dropdown[_ngcontent-%COMP%]:hover   .dropdown-content[_ngcontent-%COMP%]{display:block}.dropdown-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background-color:var(--passive-colour);border:1px solid #000;padding:3px}.dropdown-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:var(--active-colour)}#temp[_ngcontent-%COMP%]{padding-top:2px;padding-left:5px}.full[_ngcontent-%COMP%]{font-weight:600}app-calendar[_ngcontent-%COMP%]{display:inline-block;font-size:1.1em}#right[_ngcontent-%COMP%]{position:absolute;display:flex;flex-direction:row;right:40px}app-icon[_ngcontent-%COMP%]{flex:0 0 auto;margin-right:3px}#weather[_ngcontent-%COMP%]{flex:0 0 auto}.icon[_ngcontent-%COMP%]{font-size:1.1em;display:flex;flex-direction:row;align-items:center}hr[_ngcontent-%COMP%]{border-color:#000}.center[_ngcontent-%COMP%]{text-align:center}"]],data:{}});function fI(e){return so(0,[(e()(),Yl(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),io(1,null,["","/",""]))],null,function(e,n){var t=n.parent.parent.context.$implicit.getAmount(),r=n.parent.parent.context.$implicit.getLimit();e(n,1,0,t,r)})}function gI(e){return so(0,[(e()(),Yl(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),io(1,null,["","/",""]))],null,function(e,n){var t=n.parent.parent.context.$implicit.getAmount(),r=n.parent.parent.context.$implicit.getLimit();e(n,1,0,t,r)})}function vI(e){return so(0,[(e()(),Yl(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),io(1,null,["",""]))],null,function(e,n){var t=n.parent.parent.context.$implicit.getAmount();e(n,1,0,t)})}function mI(e){return so(0,[(e()(),Yl(0,0,null,null,16,"span",[["class","icon"]],null,null,null,null,null)),(e()(),Yl(1,0,null,null,15,"span",[["appTooltip",""],["class","tooltip"]],null,[[null,"mousemove"]],function(e,n,t){var r=!0;return"mousemove"===n&&(r=!1!==Ei(e,2).onmousemove(t)&&r),r},null,null)),Mi(2,16384,null,0,af,[],{elementId:[0,"elementId"]},null),(e()(),Yl(3,0,null,null,4,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),Yl(4,0,null,null,1,"div",[["class","center"]],null,null,null,null,null)),(e()(),io(5,null,["",""])),(e()(),Yl(6,0,null,null,0,"div",[["class","center"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Yl(7,0,null,null,0,"div",[["class","center"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Yl(8,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(9,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),jl(16777216,null,null,1,null,fI)),Mi(11,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,gI)),Mi(13,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,vI)),Mi(15,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),io(-1,null,[" \xa0"]))],function(e,n){var t=n.component;e(n,2,0,1e5*n.parent.context.$implicit.resource);var r=n.parent.context.$implicit.getName();e(n,9,0,r,"resources");var l=n.parent.context.$implicit.getAmount()===n.parent.context.$implicit.getLimit();e(n,11,0,l);var i=t.isNotCoins(n.parent.context.$implicit)&&n.parent.context.$implicit.getAmount()!==n.parent.context.$implicit.getLimit();e(n,13,0,i),e(n,15,0,!t.isNotCoins(n.parent.context.$implicit))},function(e,n){var t=n.component;e(n,3,0,Vl(1,"",1e5*n.parent.context.$implicit.resource,"")),e(n,5,0,n.parent.context.$implicit.name),e(n,6,0,t.getResourceDescription(n.parent.context.$implicit)),e(n,7,0,t.getResourceConsumers(n.parent.context.$implicit))})}function yI(e){return so(0,[(e()(),Yl(0,0,null,null,2,"div",[["id","highlighted"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,mI)),Mi(2,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,2,0,n.context.$implicit.visible&&n.context.$implicit.highlighted)},null)}function SI(e){return so(0,[(e()(),Yl(0,0,null,null,1,"app-calendar",[],null,null,null,pI,cI)),Mi(1,114688,null,0,aI,[Cg],null,null)],function(e,n){e(n,1,0)},null)}function EI(e){return so(0,[(e()(),Yl(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),io(-1,null,["\xb0C"]))],null,null)}function bI(e){return so(0,[(e()(),Yl(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),io(-1,null,["\xb0F"]))],null,null)}function OI(e){return so(0,[(e()(),Yl(0,0,null,null,0,"img",[["alt","settings"],["draggable","false"],["id","cog"],["src","assets/settings.svg"]],null,null,null,null,null))],null,null)}function RI(e){return so(0,[(e()(),Yl(0,0,null,null,0,"img",[["alt","settings"],["draggable","false"],["id","cog"],["src","assets/pause.svg"]],null,null,null,null,null))],null,null)}function TI(e){return so(0,[(e()(),Yl(0,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.pause()&&r),r},null,null)),(e()(),io(-1,null,["pause game"]))],null,null)}function CI(e){return so(0,[(e()(),Yl(0,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.resume()&&r),r},null,null)),(e()(),io(-1,null,["resume game"]))],null,null)}function _I(e){return so(0,[ki(0,$s,[Kr]),(e()(),Yl(1,0,null,null,43,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,yI)),Mi(3,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null),(e()(),io(-1,null,[" \xa0 "])),(e()(),Yl(5,0,null,null,13,"div",[["id","right"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,SI)),Mi(7,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(8,0,null,null,10,"span",[["class","icon"],["id","weather"]],null,null,null,null,null)),(e()(),io(-1,null,[" \xa0 "])),(e()(),Yl(10,0,null,null,1,"app-icon",[],null,null,null,hf,pf)),Mi(11,114688,null,0,cf,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Yl(12,0,null,null,6,null,null,null,null,null,null,null)),(e()(),io(13,null,[""," "])),to(14,2),(e()(),jl(16777216,null,null,1,null,EI)),Mi(16,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,bI)),Mi(18,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(19,0,null,null,25,"div",[["class","dropdown"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,OI)),Mi(21,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,RI)),Mi(23,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(24,0,null,null,20,"ul",[["class","dropdown-content"]],null,null,null,null,null)),(e()(),Yl(25,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.options()&&r),r},null,null)),(e()(),io(-1,null,["options"])),(e()(),Yl(27,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.save()&&r),r},null,null)),(e()(),io(-1,null,["save"])),(e()(),Yl(29,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.load()&&r),r},null,null)),(e()(),io(-1,null,["load"])),(e()(),Yl(31,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.import()&&r),r},null,null)),(e()(),io(-1,null,["import"])),(e()(),Yl(33,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.export()&&r),r},null,null)),(e()(),io(-1,null,["export"])),(e()(),jl(16777216,null,null,1,null,TI)),Mi(36,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,CI)),Mi(38,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(39,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.resetTutorials()&&r),r},null,null)),(e()(),io(-1,null,["reset tutorials"])),(e()(),Yl(41,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.softReset()&&r),r},null,null)),(e()(),io(-1,null,["soft reset"])),(e()(),Yl(43,0,null,null,1,"li",[],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.hardReset()&&r),r},null,null)),(e()(),io(-1,null,["hard reset"]))],function(e,n){var t=n.component;e(n,3,0,t.getResourcesValues()),e(n,7,0,t.calendarEnabled()),e(n,11,0,t.getWeatherName(),"weather"),e(n,16,0,t.metric),e(n,18,0,!t.metric),e(n,21,0,!t.paused),e(n,23,0,t.paused),e(n,36,0,!t.paused),e(n,38,0,t.paused)},function(e,n){var t=n.component,r=hl(n,13,0,e(n,14,0,Ei(n,0),t.getTemperature(),"0.0-1"));e(n,13,0,r)})}var II=function(){function e(e){this.gameService=e}return e.prototype.ngOnInit=function(){},e.prototype.isWeatherEnabled=function(){return this.gameService.isEnabled(Eu.WEATHER)},e.prototype.isMarketEnabled=function(){return this.gameService.isEnabled(Eu.MARKET)},e.prototype.isManagementEnabled=function(){return this.gameService.isEnabled(Eu.MANAGEMENT)},e.prototype.isResearchEnabled=function(){return this.gameService.isEnabled(Eu.RESEARCH)},e.prototype.isArmyEnabled=function(){return this.gameService.isEnabled(Eu.ARMY)},e.prototype.isReligionEnabled=function(){return this.gameService.isEnabled(Eu.RELIGION)},e.prototype.isCraftingEnabled=function(){return this.gameService.isEnabled(Eu.CRAFTING)},e}(),AI=gl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{display:flex;height:100%;flex-direction:column}.entry[_ngcontent-%COMP%]{padding:0;margin:0;display:flex;justify-content:center;flex-direction:column;height:5%;text-align:center;border-bottom:2px solid #000;cursor:pointer;text-decoration:none;color:#000;font-size:1em}.entry[_ngcontent-%COMP%]:first-of-type{cursor:default}.entry.active[_ngcontent-%COMP%]{background:var(--active-colour);text-decoration:none}.end[_ngcontent-%COMP%]{margin-top:auto;border-top:2px solid #000;border-bottom:none}"]],data:{}});function wI(e){return so(0,[(e()(),Yl(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["routerLink","/management"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==Ei(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&r),r},null,null)),Mi(1,671744,[[6,4]],0,_d,[Cd,gh,fs],{routerLink:[0,"routerLink"]},null),Mi(2,1720320,null,2,Ad,[Cd,Pn,xn,Rr],{routerLinkActive:[0,"routerLinkActive"]},null),Qi(603979776,5,{links:1}),Qi(603979776,6,{linksWithHrefs:1}),(e()(),io(-1,null,["Management"]))],function(e,n){e(n,1,0,"/management"),e(n,2,0,"active")},function(e,n){e(n,0,0,Ei(n,1).target,Ei(n,1).href)})}function NI(e){return so(0,[(e()(),Yl(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["routerLink","/crafting"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==Ei(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&r),r},null,null)),Mi(1,671744,[[8,4]],0,_d,[Cd,gh,fs],{routerLink:[0,"routerLink"]},null),Mi(2,1720320,null,2,Ad,[Cd,Pn,xn,Rr],{routerLinkActive:[0,"routerLinkActive"]},null),Qi(603979776,7,{links:1}),Qi(603979776,8,{linksWithHrefs:1}),(e()(),io(-1,null,["Crafting"]))],function(e,n){e(n,1,0,"/crafting"),e(n,2,0,"active")},function(e,n){e(n,0,0,Ei(n,1).target,Ei(n,1).href)})}function PI(e){return so(0,[(e()(),Yl(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["routerLink","/research"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==Ei(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&r),r},null,null)),Mi(1,671744,[[10,4]],0,_d,[Cd,gh,fs],{routerLink:[0,"routerLink"]},null),Mi(2,1720320,null,2,Ad,[Cd,Pn,xn,Rr],{routerLinkActive:[0,"routerLinkActive"]},null),Qi(603979776,9,{links:1}),Qi(603979776,10,{linksWithHrefs:1}),(e()(),io(-1,null,["Research"]))],function(e,n){e(n,1,0,"/research"),e(n,2,0,"active")},function(e,n){e(n,0,0,Ei(n,1).target,Ei(n,1).href)})}function DI(e){return so(0,[(e()(),Yl(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["routerLink","/market"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==Ei(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&r),r},null,null)),Mi(1,671744,[[12,4]],0,_d,[Cd,gh,fs],{routerLink:[0,"routerLink"]},null),Mi(2,1720320,null,2,Ad,[Cd,Pn,xn,Rr],{routerLinkActive:[0,"routerLinkActive"]},null),Qi(603979776,11,{links:1}),Qi(603979776,12,{linksWithHrefs:1}),(e()(),io(-1,null,["Market"]))],function(e,n){e(n,1,0,"/market"),e(n,2,0,"active")},function(e,n){e(n,0,0,Ei(n,1).target,Ei(n,1).href)})}function MI(e){return so(0,[(e()(),Yl(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["routerLink","/army"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==Ei(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&r),r},null,null)),Mi(1,671744,[[14,4]],0,_d,[Cd,gh,fs],{routerLink:[0,"routerLink"]},null),Mi(2,1720320,null,2,Ad,[Cd,Pn,xn,Rr],{routerLinkActive:[0,"routerLinkActive"]},null),Qi(603979776,13,{links:1}),Qi(603979776,14,{linksWithHrefs:1}),(e()(),io(-1,null,["Army"]))],function(e,n){e(n,1,0,"/army"),e(n,2,0,"active")},function(e,n){e(n,0,0,Ei(n,1).target,Ei(n,1).href)})}function kI(e){return so(0,[(e()(),Yl(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["routerLink","/religion"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==Ei(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&r),r},null,null)),Mi(1,671744,[[16,4]],0,_d,[Cd,gh,fs],{routerLink:[0,"routerLink"]},null),Mi(2,1720320,null,2,Ad,[Cd,Pn,xn,Rr],{routerLinkActive:[0,"routerLinkActive"]},null),Qi(603979776,15,{links:1}),Qi(603979776,16,{linksWithHrefs:1}),(e()(),io(-1,null,["Religion"]))],function(e,n){e(n,1,0,"/religion"),e(n,2,0,"active")},function(e,n){e(n,0,0,Ei(n,1).target,Ei(n,1).href)})}function LI(e){return so(0,[(e()(),Yl(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["routerLink","/weather"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==Ei(e,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&r),r},null,null)),Mi(1,671744,[[18,4]],0,_d,[Cd,gh,fs],{routerLink:[0,"routerLink"]},null),Mi(2,1720320,null,2,Ad,[Cd,Pn,xn,Rr],{routerLinkActive:[0,"routerLinkActive"]},null),Qi(603979776,17,{links:1}),Qi(603979776,18,{linksWithHrefs:1}),(e()(),io(-1,null,["Weather"]))],function(e,n){e(n,1,0,"/weather"),e(n,2,0,"active")},function(e,n){e(n,0,0,Ei(n,1).target,Ei(n,1).href)})}function xI(e){return so(0,[(e()(),Yl(0,0,null,null,33,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Yl(1,0,null,null,0,"a",[["class","entry"]],null,null,null,null,null)),(e()(),Yl(2,0,null,null,5,"a",[["class","entry"],["draggable","false"],["routerLink","/regions"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==Ei(e,3).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&r),r},null,null)),Mi(3,671744,[[2,4]],0,_d,[Cd,gh,fs],{routerLink:[0,"routerLink"]},null),Mi(4,1720320,null,2,Ad,[Cd,Pn,xn,Rr],{routerLinkActive:[0,"routerLinkActive"]},null),Qi(603979776,1,{links:1}),Qi(603979776,2,{linksWithHrefs:1}),(e()(),io(-1,null,["Village"])),(e()(),Yl(8,0,null,null,5,"a",[["class","entry"],["draggable","false"],["routerLink","/resources"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==Ei(e,9).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&r),r},null,null)),Mi(9,671744,[[4,4]],0,_d,[Cd,gh,fs],{routerLink:[0,"routerLink"]},null),Mi(10,1720320,null,2,Ad,[Cd,Pn,xn,Rr],{routerLinkActive:[0,"routerLinkActive"]},null),Qi(603979776,3,{links:1}),Qi(603979776,4,{linksWithHrefs:1}),(e()(),io(-1,null,["Resources"])),(e()(),jl(16777216,null,null,1,null,wI)),Mi(15,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,NI)),Mi(17,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,PI)),Mi(19,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,DI)),Mi(21,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,MI)),Mi(23,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,kI)),Mi(25,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,LI)),Mi(27,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(28,0,null,null,5,"a",[["class","entry end"],["draggable","false"],["routerLink","/royal"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==Ei(e,29).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&r),r},null,null)),Mi(29,671744,[[20,4]],0,_d,[Cd,gh,fs],{routerLink:[0,"routerLink"]},null),Mi(30,1720320,null,2,Ad,[Cd,Pn,xn,Rr],{routerLinkActive:[0,"routerLinkActive"]},null),Qi(603979776,19,{links:1}),Qi(603979776,20,{linksWithHrefs:1}),(e()(),io(-1,null,["Royal perks"]))],function(e,n){var t=n.component;e(n,3,0,"/regions"),e(n,4,0,"active"),e(n,9,0,"/resources"),e(n,10,0,"active"),e(n,15,0,t.isManagementEnabled()),e(n,17,0,t.isCraftingEnabled()),e(n,19,0,t.isResearchEnabled()),e(n,21,0,t.isMarketEnabled()),e(n,23,0,t.isArmyEnabled()),e(n,25,0,t.isReligionEnabled()),e(n,27,0,t.isWeatherEnabled()),e(n,29,0,"/royal"),e(n,30,0,"active")},function(e,n){e(n,2,0,Ei(n,3).target,Ei(n,3).href),e(n,8,0,Ei(n,9).target,Ei(n,9).href),e(n,28,0,Ei(n,29).target,Ei(n,29).href)})}var FI=function(){function e(e,n){this.logService=e,this.changeDetectorRef=n,this.entries=[],this.logEntryTypes=Og}return e.prototype.ngOnInit=function(){var e=this;this.logService.registerForLogs().subscribe(function(){e.entries=e.logService.getEntries(),e.scrollToBottom()}),this.entries=this.logService.getEntries(),this.scrollToBottom()},e.prototype.clearLogs=function(){this.logService.clearEntries()},e.prototype.scrollToBottom=function(){var e=this.scrollRef.nativeElement,n=e.scrollHeight-e.clientHeight<=e.scrollTop+25;this.changeDetectorRef.destroyed||this.changeDetectorRef.detectChanges(),n&&(e.scrollTop=e.scrollHeight)},e}(),UI=gl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;max-height:100%}#clear-button[_ngcontent-%COMP%]{float:right}#log[_ngcontent-%COMP%]{height:100%;overflow-y:scroll;font-size:.8em}.title[_ngcontent-%COMP%]{border-bottom:1px solid #000;text-align:center;font-weight:700;font-size:1.1em}#title-text[_ngcontent-%COMP%]{display:inline-block;margin-left:20px;margin-top:3px}ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}li[_ngcontent-%COMP%]{padding-left:.5%;padding-bottom:.4%}.date[_ngcontent-%COMP%]{font-weight:bolder}.warning[_ngcontent-%COMP%]{color:#8b0000}.success[_ngcontent-%COMP%]{color:#006400}.mystical[_ngcontent-%COMP%]{color:#00008b}"]],data:{}});function HI(e){return so(0,[(e()(),Yl(0,0,null,null,3,"span",[],null,null,null,null,null)),(e()(),Yl(1,0,null,null,1,"span",[["class","date"]],null,null,null,null,null)),(e()(),io(2,null,["day ",":"])),(e()(),Yl(3,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.day),e(n,3,0," "+n.parent.context.$implicit.message)})}function GI(e){return so(0,[(e()(),Yl(0,0,null,null,3,"span",[["class","success"]],null,null,null,null,null)),(e()(),Yl(1,0,null,null,1,"span",[["class","date"]],null,null,null,null,null)),(e()(),io(2,null,["day ",":"])),(e()(),Yl(3,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.day),e(n,3,0," "+n.parent.context.$implicit.message)})}function BI(e){return so(0,[(e()(),Yl(0,0,null,null,3,"span",[["class","warning"]],null,null,null,null,null)),(e()(),Yl(1,0,null,null,1,"span",[["class","date"]],null,null,null,null,null)),(e()(),io(2,null,["day ",":"])),(e()(),Yl(3,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.day),e(n,3,0," "+n.parent.context.$implicit.message)})}function VI(e){return so(0,[(e()(),Yl(0,0,null,null,3,"span",[["class","mystical"]],null,null,null,null,null)),(e()(),Yl(1,0,null,null,1,"span",[["class","date"]],null,null,null,null,null)),(e()(),io(2,null,["day ",":"])),(e()(),Yl(3,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.day),e(n,3,0," "+n.parent.context.$implicit.message)})}function WI(e){return so(0,[(e()(),Yl(0,0,null,null,10,"li",[],null,null,null,null,null)),(e()(),Yl(1,0,null,null,9,"div",[],null,null,null,null,null)),Mi(2,16384,null,0,Bs,[],{ngSwitch:[0,"ngSwitch"]},null),(e()(),jl(16777216,null,null,1,null,HI)),Mi(4,278528,null,0,Vs,[br,ht,Bs],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),jl(16777216,null,null,1,null,GI)),Mi(6,278528,null,0,Vs,[br,ht,Bs],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),jl(16777216,null,null,1,null,BI)),Mi(8,278528,null,0,Vs,[br,ht,Bs],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),jl(16777216,null,null,1,null,VI)),Mi(10,278528,null,0,Vs,[br,ht,Bs],{ngSwitchCase:[0,"ngSwitchCase"]},null)],function(e,n){var t=n.component;e(n,2,0,n.context.$implicit.type),e(n,4,0,t.logEntryTypes.LOG),e(n,6,0,t.logEntryTypes.SUCCESS),e(n,8,0,t.logEntryTypes.WARNING),e(n,10,0,t.logEntryTypes.MYSTICAL)},null)}function jI(e){return so(0,[Qi(402653184,1,{scrollRef:0}),(e()(),Yl(1,0,null,null,9,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Yl(2,0,null,null,4,"div",[["class","title"]],null,null,null,null,null)),(e()(),Yl(3,0,null,null,1,"span",[["id","title-text"]],null,null,null,null,null)),(e()(),io(-1,null,["Log"])),(e()(),Yl(5,0,null,null,1,"button",[["id","clear-button"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.clearLogs()&&r),r},null,null)),(e()(),io(-1,null,["clear"])),(e()(),Yl(7,0,[[1,0],["scroll",1]],null,3,"div",[["id","log"]],null,null,null,null,null)),(e()(),Yl(8,0,null,null,2,"ul",[],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,WI)),Mi(10,278528,null,0,Ls,[br,ht,Br],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,10,0,n.component.entries)},null)}var YI=function(){function e(e,n){this.gameService=e,this.optionsService=n,this.gameName=Gu.gameName,this.version=Gu.versionString}return e.prototype.ngOnInit=function(){},e.prototype.showDevNotes=function(){this.gameService.showDevNotes()},e.prototype.getSound=function(){return this.optionsService.getOption(Eg.SOUND)},e.prototype.toggleSound=function(){this.optionsService.setOption(Eg.SOUND,!this.optionsService.getOption(Eg.SOUND))},e}(),zI=gl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:row;font-size:1.2em}.first[_ngcontent-%COMP%]{flex:0 0 3%;height:30px;cursor:pointer}#center[_ngcontent-%COMP%]{flex:0 0 94%;display:flex;justify-content:center;align-items:center}#dev[_ngcontent-%COMP%]{flex:0 0 3%;height:30px;cursor:pointer}img[_ngcontent-%COMP%]{width:30px}"]],data:{}});function KI(e){return so(0,[(e()(),Yl(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),Yl(1,0,null,null,0,"img",[["src","assets/sound_on.svg"],["title","turn off"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleSound()&&r),r},null,null))],null,null)}function qI(e){return so(0,[(e()(),Yl(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),Yl(1,0,null,null,0,"img",[["src","assets/sound_off.svg"],["title","turn on"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.toggleSound()&&r),r},null,null))],null,null)}function $I(e){return so(0,[(e()(),Yl(0,0,null,null,8,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),jl(16777216,null,null,1,null,KI)),Mi(2,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,qI)),Mi(4,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),Yl(5,0,null,null,2,"div",[["id","center"]],null,null,null,null,null)),(e()(),Yl(6,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),io(7,null,[""," v",""])),(e()(),Yl(8,0,null,null,0,"img",[["id","dev"],["src","assets/dev.svg"],["title","dev notes"]],null,[[null,"click"]],function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.showDevNotes()&&r),r},null,null))],function(e,n){var t=n.component;e(n,2,0,t.getSound()),e(n,4,0,!t.getSound())},function(e,n){var t=n.component;e(n,7,0,t.gameName,t.version)})}var QI=function(){function e(e,n,t,r,l,i,o,u,s,a,c,p,h,d){this.gameService=e,this.randomService=n,this.optionsService=t,this.tickerService=r,this.serializerService=l,this.resourceService=i,this.techService=o,this.logService=u,this.seaService=s,this.mountainsService=a,this.fortService=c,this.forestService=p,this.fieldService=h,this.villageService=d}return e.prototype.ngOnInit=function(){this.serializerService.hasSave()?this.serializerService.initLoad():this.initGame(),this.tickerService.start()},e.prototype.initGame=function(){this.gameService.init(),this.optionsService.init(),this.resourceService.init(),this.villageService.init(),this.fortService.init(),this.forestService.init(),this.fieldService.init(),this.mountainsService.init(),this.seaService.init()},e.prototype.exitSave=function(e){this.serializerService.initSave()},e}(),ZI=gl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{position:relative;display:grid;height:100%;max-height:100%;grid-template-columns:11% auto 20%;grid-template-rows:5% auto 4%;border:1px solid #000;background:var(--background-clour);background-image:url(old_parchment.e3e77af15bdb5cd39bab.jpg);background-size:100% 100%}#footer[_ngcontent-%COMP%], #header[_ngcontent-%COMP%]{grid-column-start:1;grid-column-end:4;border:1px solid #000;overflow:hidden}#left-menu[_ngcontent-%COMP%]{grid-column-start:1;grid-column-end:2;border:1px solid #000;overflow:hidden}#center[_ngcontent-%COMP%]{grid-column-start:2;grid-column-end:3;border:1px solid #000;overflow:hidden}#screen[_ngcontent-%COMP%]{height:100%}#right-menu[_ngcontent-%COMP%]{grid-column-start:3;grid-column-end:4;border:1px solid #000;overflow:hidden}.asset[_ngcontent-%COMP%]{display:none}"]],data:{}});function XI(e){return so(0,[(e()(),Yl(0,0,null,null,119,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Yl(1,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/buff.svg"]],null,null,null,null,null)),(e()(),Yl(2,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/complex_management_off_off.svg"]],null,null,null,null,null)),(e()(),Yl(3,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/complex_management_off_on.svg"]],null,null,null,null,null)),(e()(),Yl(4,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/complex_management_on_off.svg"]],null,null,null,null,null)),(e()(),Yl(5,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/complex_management_on_on.svg"]],null,null,null,null,null)),(e()(),Yl(6,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/details.svg"]],null,null,null,null,null)),(e()(),Yl(7,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/dev.svg"]],null,null,null,null,null)),(e()(),Yl(8,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/eye.svg"]],null,null,null,null,null)),(e()(),Yl(9,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/foresight.svg"]],null,null,null,null,null)),(e()(),Yl(10,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/forest.svg"]],null,null,null,null,null)),(e()(),Yl(11,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/gear.svg"]],null,null,null,null,null)),(e()(),Yl(12,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/gear_off.svg"]],null,null,null,null,null)),(e()(),Yl(13,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/hammer.svg"]],null,null,null,null,null)),(e()(),Yl(14,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/kred.png"]],null,null,null,null,null)),(e()(),Yl(15,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/land.svg"]],null,null,null,null,null)),(e()(),Yl(16,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/manage.svg"]],null,null,null,null,null)),(e()(),Yl(17,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/mountains.svg"]],null,null,null,null,null)),(e()(),Yl(18,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/population.svg"]],null,null,null,null,null)),(e()(),Yl(19,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/question_mark.svg"]],null,null,null,null,null)),(e()(),Yl(20,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/settings.svg"]],null,null,null,null,null)),(e()(),Yl(21,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/tick.svg"]],null,null,null,null,null)),(e()(),Yl(22,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/time.svg"]],null,null,null,null,null)),(e()(),Yl(23,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/trade.svg"]],null,null,null,null,null)),(e()(),Yl(24,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/upgrade.svg"]],null,null,null,null,null)),(e()(),Yl(25,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/village.svg"]],null,null,null,null,null)),(e()(),Yl(26,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/religion/faith.svg"]],null,null,null,null,null)),(e()(),Yl(27,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/religion/faith_shield.svg"]],null,null,null,null,null)),(e()(),Yl(28,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/weather/clouds.svg"]],null,null,null,null,null)),(e()(),Yl(29,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/weather/rain.svg"]],null,null,null,null,null)),(e()(),Yl(30,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/weather/snow.svg"]],null,null,null,null,null)),(e()(),Yl(31,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/weather/storm.svg"]],null,null,null,null,null)),(e()(),Yl(32,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/weather/sun.svg"]],null,null,null,null,null)),(e()(),Yl(33,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/weather/wind.svg"]],null,null,null,null,null)),(e()(),Yl(34,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/army/attack.svg"]],null,null,null,null,null)),(e()(),Yl(35,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/army/barracks.svg"]],null,null,null,null,null)),(e()(),Yl(36,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/army/defense.svg"]],null,null,null,null,null)),(e()(),Yl(37,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/army/invasion.svg"]],null,null,null,null,null)),(e()(),Yl(38,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/army/recruit.svg"]],null,null,null,null,null)),(e()(),Yl(39,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/happiness/angry.svg"]],null,null,null,null,null)),(e()(),Yl(40,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/happiness/happy.svg"]],null,null,null,null,null)),(e()(),Yl(41,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/happiness/neutral.svg"]],null,null,null,null,null)),(e()(),Yl(42,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/happiness/overjoyed.svg"]],null,null,null,null,null)),(e()(),Yl(43,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/happiness/sad.svg"]],null,null,null,null,null)),(e()(),Yl(44,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/apple.svg"]],null,null,null,null,null)),(e()(),Yl(45,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/barley.svg"]],null,null,null,null,null)),(e()(),Yl(46,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/beer.svg"]],null,null,null,null,null)),(e()(),Yl(47,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/berry.svg"]],null,null,null,null,null)),(e()(),Yl(48,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/bow.svg"]],null,null,null,null,null)),(e()(),Yl(49,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/bread.svg"]],null,null,null,null,null)),(e()(),Yl(50,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/bronze.svg"]],null,null,null,null,null)),(e()(),Yl(51,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/brushwood.svg"]],null,null,null,null,null)),(e()(),Yl(52,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/chicken.svg"]],null,null,null,null,null)),(e()(),Yl(53,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/clothes.svg"]],null,null,null,null,null)),(e()(),Yl(54,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/coal.svg"]],null,null,null,null,null)),(e()(),Yl(55,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/coins.svg"]],null,null,null,null,null)),(e()(),Yl(56,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/cooked_meat.svg"]],null,null,null,null,null)),(e()(),Yl(57,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/copper.svg"]],null,null,null,null,null)),(e()(),Yl(58,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/copper_ore.svg"]],null,null,null,null,null)),(e()(),Yl(59,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/cotton.svg"]],null,null,null,null,null)),(e()(),Yl(60,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/cow.svg"]],null,null,null,null,null)),(e()(),Yl(61,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/cut_stone.svg"]],null,null,null,null,null)),(e()(),Yl(62,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/egg.svg"]],null,null,null,null,null)),(e()(),Yl(63,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/fabric.svg"]],null,null,null,null,null)),(e()(),Yl(64,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/fish.svg"]],null,null,null,null,null)),(e()(),Yl(65,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/flour.svg"]],null,null,null,null,null)),(e()(),Yl(66,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/food.svg"]],null,null,null,null,null)),(e()(),Yl(67,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/fuel.svg"]],null,null,null,null,null)),(e()(),Yl(68,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/fur.svg"]],null,null,null,null,null)),(e()(),Yl(69,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/gold.svg"]],null,null,null,null,null)),(e()(),Yl(70,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/gold_ore.svg"]],null,null,null,null,null)),(e()(),Yl(71,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/grape.svg"]],null,null,null,null,null)),(e()(),Yl(72,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/hay.svg"]],null,null,null,null,null)),(e()(),Yl(73,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/hop.svg"]],null,null,null,null,null)),(e()(),Yl(74,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/horse.svg"]],null,null,null,null,null)),(e()(),Yl(75,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/iron.svg"]],null,null,null,null,null)),(e()(),Yl(76,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/iron_ore.svg"]],null,null,null,null,null)),(e()(),Yl(77,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/leather.svg"]],null,null,null,null,null)),(e()(),Yl(78,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/leather_armor.svg"]],null,null,null,null,null)),(e()(),Yl(79,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/light_armor.svg"]],null,null,null,null,null)),(e()(),Yl(80,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/heavy_armor.svg"]],null,null,null,null,null)),(e()(),Yl(81,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/log.svg"]],null,null,null,null,null)),(e()(),Yl(82,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/meat.svg"]],null,null,null,null,null)),(e()(),Yl(83,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/meat_soup.svg"]],null,null,null,null,null)),(e()(),Yl(84,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/milk.svg"]],null,null,null,null,null)),(e()(),Yl(85,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/mushroom.svg"]],null,null,null,null,null)),(e()(),Yl(86,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/pig.svg"]],null,null,null,null,null)),(e()(),Yl(87,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/plank.svg"]],null,null,null,null,null)),(e()(),Yl(88,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/silver.svg"]],null,null,null,null,null)),(e()(),Yl(89,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/silver_ore.svg"]],null,null,null,null,null)),(e()(),Yl(90,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/steel.svg"]],null,null,null,null,null)),(e()(),Yl(91,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/stone.svg"]],null,null,null,null,null)),(e()(),Yl(92,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/stone_axe.svg"]],null,null,null,null,null)),(e()(),Yl(93,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/stone_hammer.svg"]],null,null,null,null,null)),(e()(),Yl(94,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/stone_pickaxe.svg"]],null,null,null,null,null)),(e()(),Yl(95,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/stone_shovel.svg"]],null,null,null,null,null)),(e()(),Yl(96,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/stone_spear.svg"]],null,null,null,null,null)),(e()(),Yl(97,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/sword.svg"]],null,null,null,null,null)),(e()(),Yl(98,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/tin.svg"]],null,null,null,null,null)),(e()(),Yl(99,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/tin_ore.svg"]],null,null,null,null,null)),(e()(),Yl(100,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/vegetable_soup.svg"]],null,null,null,null,null)),(e()(),Yl(101,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/wheat.svg"]],null,null,null,null,null)),(e()(),Yl(102,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/wine.svg"]],null,null,null,null,null)),(e()(),Yl(103,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/wooden_shield.svg"]],null,null,null,null,null)),(e()(),Yl(104,0,null,null,2,"div",[["id","header"]],null,null,null,null,null)),(e()(),Yl(105,0,null,null,1,"app-header",[],null,null,null,_I,dI)),Mi(106,114688,null,0,hI,[YC,_g,Ig,Lg,rb,bg,wg,jC,Ag],null,null),(e()(),Yl(107,0,null,null,2,"div",[["id","left-menu"]],null,null,null,null,null)),(e()(),Yl(108,0,null,null,1,"app-left-menu",[],null,null,null,xI,AI)),Mi(109,114688,null,0,II,[wg],null,null),(e()(),Yl(110,0,null,null,3,"div",[["id","center"]],null,null,null,null,null)),(e()(),Yl(111,0,null,null,2,"div",[["id","screen"]],null,null,null,null,null)),(e()(),Yl(112,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),Mi(113,212992,null,0,Pd,[Nd,br,_n,[8,null],Rr],null,null),(e()(),Yl(114,0,null,null,2,"div",[["id","right-menu"]],null,null,null,null,null)),(e()(),Yl(115,0,null,null,1,"app-log",[],null,null,null,jI,UI)),Mi(116,114688,null,0,FI,[_g,Rr],null,null),(e()(),Yl(117,0,null,null,2,"div",[["id","footer"]],null,null,null,null,null)),(e()(),Yl(118,0,null,null,1,"app-footer",[],null,null,null,$I,zI)),Mi(119,114688,null,0,YI,[wg,bg],null,null)],function(e,n){e(n,106,0),e(n,109,0),e(n,113,0),e(n,116,0),e(n,119,0)},null)}var JI=gl({encapsulation:0,styles:[["#IEwrapper[_ngcontent-%COMP%]{border:1px solid #000;background:#919191;font-size:3em;height:100%;max-height:100%;display:flex;justify-content:center;align-items:center}#IEwrapper[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center}"]],data:{}});function eA(e){return so(0,[(e()(),Yl(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),Yl(1,0,null,null,1,"app-modals",[],null,null,null,sI,uI)),Mi(2,114688,null,0,oI,[],null,null),(e()(),Yl(3,0,null,null,1,"app-game",[],null,[["window","beforeunload"]],function(e,n,t){var r=!0;return"window:beforeunload"===n&&(r=!1!==Ei(e,4).exitSave(t)&&r),r},XI,ZI)),Mi(4,114688,null,0,QI,[wg,Mu,bg,jC,YC,Lg,SS,_g,nC,vT,vE,NR,ZR,uS],null,null)],function(e,n){e(n,2,0),e(n,4,0)},null)}function nA(e){return so(0,[(e()(),Yl(0,0,null,null,7,null,null,null,null,null,null,null)),(e()(),Yl(1,0,null,null,6,"div",[["id","IEwrapper"]],null,null,null,null,null)),(e()(),Yl(2,0,null,null,5,"span",[],null,null,null,null,null)),(e()(),io(-1,null,["Internet Explorer is not supported."])),(e()(),Yl(4,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),io(-1,null,["Please use Firefox, Chrome, Safari"])),(e()(),Yl(6,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),io(-1,null,["or Edge."]))],null,null)}function tA(e){return so(0,[(e()(),jl(16777216,null,null,1,null,eA)),Mi(1,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null),(e()(),jl(16777216,null,null,1,null,nA)),Mi(3,16384,null,0,Fs,[br,ht],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,!t.isIE()),e(n,3,0,t.isIE())},null)}function rA(e){return so(0,[(e()(),Yl(0,0,null,null,1,"app-root",[],null,[["document","contextmenu"]],function(e,n,t){var r=!0;return"document:contextmenu"===n&&(r=!1!==Ei(e,1).catchContextMenu(t)&&r),r},tA,JI)),Mi(1,49152,null,0,ps,[],null,null)],null,null)}var lA=ai("app-root",ps,rA,{},{},[]),iA=function(){return function(){}}(),oA=function(){return function(){}}(),uA="*";function sA(e,n){return void 0===n&&(n=null),{type:2,steps:e,options:n}}function aA(e){return{type:6,styles:e,offset:null}}function cA(e){Promise.resolve(null).then(e)}var pA=function(){function e(e,n){void 0===e&&(e=0),void 0===n&&(n=0),this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=e+n}return e.prototype._onFinish=function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(e){return e()}),this._onDoneFns=[])},e.prototype.onStart=function(e){this._onStartFns.push(e)},e.prototype.onDone=function(e){this._onDoneFns.push(e)},e.prototype.onDestroy=function(e){this._onDestroyFns.push(e)},e.prototype.hasStarted=function(){return this._started},e.prototype.init=function(){},e.prototype.play=function(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0},e.prototype.triggerMicrotask=function(){var e=this;cA(function(){return e._onFinish()})},e.prototype._onStart=function(){this._onStartFns.forEach(function(e){return e()}),this._onStartFns=[]},e.prototype.pause=function(){},e.prototype.restart=function(){},e.prototype.finish=function(){this._onFinish()},e.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(function(e){return e()}),this._onDestroyFns=[])},e.prototype.reset=function(){},e.prototype.setPosition=function(e){},e.prototype.getPosition=function(){return 0},e.prototype.triggerCallback=function(e){var n="start"==e?this._onStartFns:this._onDoneFns;n.forEach(function(e){return e()}),n.length=0},e}(),hA=function(){function e(e){var n=this;this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;var t=0,r=0,l=0,i=this.players.length;0==i?cA(function(){return n._onFinish()}):this.players.forEach(function(e){e.onDone(function(){++t==i&&n._onFinish()}),e.onDestroy(function(){++r==i&&n._onDestroy()}),e.onStart(function(){++l==i&&n._onStart()})}),this.totalTime=this.players.reduce(function(e,n){return Math.max(e,n.totalTime)},0)}return e.prototype._onFinish=function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(e){return e()}),this._onDoneFns=[])},e.prototype.init=function(){this.players.forEach(function(e){return e.init()})},e.prototype.onStart=function(e){this._onStartFns.push(e)},e.prototype._onStart=function(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(function(e){return e()}),this._onStartFns=[])},e.prototype.onDone=function(e){this._onDoneFns.push(e)},e.prototype.onDestroy=function(e){this._onDestroyFns.push(e)},e.prototype.hasStarted=function(){return this._started},e.prototype.play=function(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(function(e){return e.play()})},e.prototype.pause=function(){this.players.forEach(function(e){return e.pause()})},e.prototype.restart=function(){this.players.forEach(function(e){return e.restart()})},e.prototype.finish=function(){this._onFinish(),this.players.forEach(function(e){return e.finish()})},e.prototype.destroy=function(){this._onDestroy()},e.prototype._onDestroy=function(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(function(e){return e.destroy()}),this._onDestroyFns.forEach(function(e){return e()}),this._onDestroyFns=[])},e.prototype.reset=function(){this.players.forEach(function(e){return e.reset()}),this._destroyed=!1,this._finished=!1,this._started=!1},e.prototype.setPosition=function(e){var n=e*this.totalTime;this.players.forEach(function(e){var t=e.totalTime?Math.min(1,n/e.totalTime):1;e.setPosition(t)})},e.prototype.getPosition=function(){var e=0;return this.players.forEach(function(n){var t=n.getPosition();e=Math.min(t,e)}),e},e.prototype.beforeDestroy=function(){this.players.forEach(function(e){e.beforeDestroy&&e.beforeDestroy()})},e.prototype.triggerCallback=function(e){var n="start"==e?this._onStartFns:this._onDoneFns;n.forEach(function(e){return e()}),n.length=0},e}(),dA="!";function fA(){return"undefined"!=typeof process}function gA(e){switch(e.length){case 0:return new pA;case 1:return e[0];default:return new hA(e)}}function vA(e,n,t,r,l,i){void 0===l&&(l={}),void 0===i&&(i={});var o=[],u=[],s=-1,a=null;if(r.forEach(function(e){var t=e.offset,r=t==s,c=r&&a||{};Object.keys(e).forEach(function(t){var r=t,u=e[t];if("offset"!==t)switch(r=n.normalizePropertyName(r,o),u){case dA:u=l[t];break;case uA:u=i[t];break;default:u=n.normalizeStyleValue(t,r,u,o)}c[r]=u}),r||u.push(c),a=c,s=t}),o.length)throw new Error("Unable to animate due to the following errors:\n - "+o.join("\n - "));return u}function mA(e,n,t,r){switch(n){case"start":e.onStart(function(){return r(t&&yA(t,"start",e))});break;case"done":e.onDone(function(){return r(t&&yA(t,"done",e))});break;case"destroy":e.onDestroy(function(){return r(t&&yA(t,"destroy",e))})}}function yA(e,n,t){var r=t.totalTime,l=SA(e.element,e.triggerName,e.fromState,e.toState,n||e.phaseName,null==r?e.totalTime:r,!!t.disabled),i=e._data;return null!=i&&(l._data=i),l}function SA(e,n,t,r,l,i,o){return void 0===l&&(l=""),void 0===i&&(i=0),{element:e,triggerName:n,fromState:t,toState:r,phaseName:l,totalTime:i,disabled:!!o}}function EA(e,n,t){var r;return e instanceof Map?(r=e.get(n))||e.set(n,r=t):(r=e[n])||(r=e[n]=t),r}function bA(e){var n=e.indexOf(":");return[e.substring(1,n),e.substr(n+1)]}var OA=function(e,n){return!1},RA=function(e,n){return!1},TA=function(e,n,t){return[]},CA=fA();if(CA||"undefined"!=typeof Element){if(OA=function(e,n){return e.contains(n)},CA||Element.prototype.matches)RA=function(e,n){return e.matches(n)};else{var _A=Element.prototype,IA=_A.matchesSelector||_A.mozMatchesSelector||_A.msMatchesSelector||_A.oMatchesSelector||_A.webkitMatchesSelector;IA&&(RA=function(e,n){return IA.apply(e,[n])})}TA=function(e,n,t){var r=[];if(t)r.push.apply(r,c(e.querySelectorAll(n)));else{var l=e.querySelector(n);l&&r.push(l)}return r}}var AA=null,wA=!1,NA=RA,PA=OA,DA=TA,MA=function(){function e(){}return e.prototype.validateStyleProperty=function(e){return function(e){AA||(AA=("undefined"!=typeof document?document.body:null)||{},wA=!!AA.style&&"WebkitAppearance"in AA.style);var n=!0;return AA.style&&!function(e){return"ebkit"==e.substring(1,6)}(e)&&!(n=e in AA.style)&&wA&&(n="Webkit"+e.charAt(0).toUpperCase()+e.substr(1)in AA.style),n}(e)},e.prototype.matchesElement=function(e,n){return NA(e,n)},e.prototype.containsElement=function(e,n){return PA(e,n)},e.prototype.query=function(e,n,t){return DA(e,n,t)},e.prototype.computeStyle=function(e,n,t){return t||""},e.prototype.animate=function(e,n,t,r,l,i,o){return void 0===i&&(i=[]),new pA(t,r)},e}(),kA=function(){function e(){}return e.NOOP=new MA,e}(),LA=1e3;function xA(e){if("number"==typeof e)return e;var n=e.match(/^(-?[\.\d]+)(m?s)/);return!n||n.length<2?0:FA(parseFloat(n[1]),n[2])}function FA(e,n){switch(n){case"s":return e*LA;default:return e}}function UA(e,n,t){return e.hasOwnProperty("duration")?e:function(e,n,t){var r,l=0,i="";if("string"==typeof e){var o=e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===o)return n.push('The provided timing value "'+e+'" is invalid.'),{duration:0,delay:0,easing:""};r=FA(parseFloat(o[1]),o[2]);var u=o[3];null!=u&&(l=FA(parseFloat(u),o[4]));var s=o[5];s&&(i=s)}else r=e;if(!t){var a=!1,c=n.length;r<0&&(n.push("Duration values below 0 are not allowed for this animation step."),a=!0),l<0&&(n.push("Delay values below 0 are not allowed for this animation step."),a=!0),a&&n.splice(c,0,'The provided timing value "'+e+'" is invalid.')}return{duration:r,delay:l,easing:i}}(e,n,t)}function HA(e,n){return void 0===n&&(n={}),Object.keys(e).forEach(function(t){n[t]=e[t]}),n}function GA(e,n,t){if(void 0===t&&(t={}),n)for(var r in e)t[r]=e[r];else HA(e,t);return t}function BA(e,n,t){return t?n+":"+t+";":""}function VA(e){for(var n="",t=0;t<e.style.length;t++)n+=BA(0,r=e.style.item(t),e.style.getPropertyValue(r));for(var r in e.style)e.style.hasOwnProperty(r)&&!r.startsWith("_")&&(n+=BA(0,r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),e.style[r]));e.setAttribute("style",n)}function WA(e,n,t){e.style&&(Object.keys(n).forEach(function(r){var l=ZA(r);t&&!t.hasOwnProperty(r)&&(t[r]=e.style[l]),e.style[l]=n[r]}),fA()&&VA(e))}function jA(e,n){e.style&&(Object.keys(n).forEach(function(n){var t=ZA(n);e.style[t]=""}),fA()&&VA(e))}function YA(e){return Array.isArray(e)?1==e.length?e[0]:sA(e):e}var zA=new RegExp("{{\\s*(.+?)\\s*}}","g");function KA(e){var n=[];if("string"==typeof e){for(var t=e.toString(),r=void 0;r=zA.exec(t);)n.push(r[1]);zA.lastIndex=0}return n}function qA(e,n,t){var r=e.toString(),l=r.replace(zA,function(e,r){var l=n[r];return n.hasOwnProperty(r)||(t.push("Please provide a value for the animation param "+r),l=""),l.toString()});return l==r?e:l}function $A(e){for(var n=[],t=e.next();!t.done;)n.push(t.value),t=e.next();return n}var QA=/-+([a-z0-9])/g;function ZA(e){return e.replace(QA,function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e[1].toUpperCase()})}function XA(e,n,t){switch(n.type){case 7:return e.visitTrigger(n,t);case 0:return e.visitState(n,t);case 1:return e.visitTransition(n,t);case 2:return e.visitSequence(n,t);case 3:return e.visitGroup(n,t);case 4:return e.visitAnimate(n,t);case 5:return e.visitKeyframes(n,t);case 6:return e.visitStyle(n,t);case 8:return e.visitReference(n,t);case 9:return e.visitAnimateChild(n,t);case 10:return e.visitAnimateRef(n,t);case 11:return e.visitQuery(n,t);case 12:return e.visitStagger(n,t);default:throw new Error("Unable to resolve animation metadata node #"+n.type)}}var JA="*",ew=new Set(["true","1"]),nw=new Set(["false","0"]);function tw(e,n){var t=ew.has(e)||nw.has(e),r=ew.has(n)||nw.has(n);return function(l,i){var o=e==JA||e==l,u=n==JA||n==i;return!o&&t&&"boolean"==typeof l&&(o=l?ew.has(e):nw.has(e)),!u&&r&&"boolean"==typeof i&&(u=i?ew.has(n):nw.has(n)),o&&u}}var rw=new RegExp("s*:selfs*,?","g");function lw(e,n,t){return new iw(e).build(n,t)}var iw=function(){function e(e){this._driver=e}return e.prototype.build=function(e,n){var t=new ow(n);return this._resetContextStyleTimingState(t),XA(this,YA(e),t)},e.prototype._resetContextStyleTimingState=function(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0},e.prototype.visitTrigger=function(e,n){var t=this,r=n.queryCount=0,l=n.depCount=0,i=[],o=[];return"@"==e.name.charAt(0)&&n.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(function(e){if(t._resetContextStyleTimingState(n),0==e.type){var u=e,s=u.name;s.toString().split(/\s*,\s*/).forEach(function(e){u.name=e,i.push(t.visitState(u,n))}),u.name=s}else if(1==e.type){var a=t.visitTransition(e,n);r+=a.queryCount,l+=a.depCount,o.push(a)}else n.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:i,transitions:o,queryCount:r,depCount:l,options:null}},e.prototype.visitState=function(e,n){var t=this.visitStyle(e.styles,n),r=e.options&&e.options.params||null;if(t.containsDynamicStyles){var l=new Set,i=r||{};if(t.styles.forEach(function(e){if(uw(e)){var n=e;Object.keys(n).forEach(function(e){KA(n[e]).forEach(function(e){i.hasOwnProperty(e)||l.add(e)})})}}),l.size){var o=$A(l.values());n.errors.push('state("'+e.name+'", ...) must define default values for all the following style substitutions: '+o.join(", "))}}return{type:0,name:e.name,style:t,options:r?{params:r}:null}},e.prototype.visitTransition=function(e,n){n.queryCount=0,n.depCount=0;var t,r,l,i=XA(this,YA(e.animation),n);return{type:1,matchers:(t=e.expr,r=n.errors,l=[],"string"==typeof t?t.split(/\s*,\s*/).forEach(function(e){return function(e,n,t){if(":"==e[0]){var r=function(e,n){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return function(e,n){return parseFloat(n)>parseFloat(e)};case":decrement":return function(e,n){return parseFloat(n)<parseFloat(e)};default:return n.push('The transition alias value "'+e+'" is not supported'),"* => *"}}(e,t);if("function"==typeof r)return void n.push(r);e=r}var l=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==l||l.length<4)return t.push('The provided transition expression "'+e+'" is not supported'),n;var i=l[1],o=l[2],u=l[3];n.push(tw(i,u)),"<"!=o[0]||i==JA&&u==JA||n.push(tw(u,i))}(e,l,r)}):l.push(t),l),animation:i,queryCount:n.queryCount,depCount:n.depCount,options:sw(e.options)}},e.prototype.visitSequence=function(e,n){var t=this;return{type:2,steps:e.steps.map(function(e){return XA(t,e,n)}),options:sw(e.options)}},e.prototype.visitGroup=function(e,n){var t=this,r=n.currentTime,l=0,i=e.steps.map(function(e){n.currentTime=r;var i=XA(t,e,n);return l=Math.max(l,n.currentTime),i});return n.currentTime=l,{type:3,steps:i,options:sw(e.options)}},e.prototype.visitAnimate=function(e,n){var t,r=function(e,n){var t=null;if(e.hasOwnProperty("duration"))t=e;else if("number"==typeof e)return aw(UA(e,n).duration,0,"");var r=e;if(r.split(/\s+/).some(function(e){return"{"==e.charAt(0)&&"{"==e.charAt(1)})){var l=aw(0,0,"");return l.dynamic=!0,l.strValue=r,l}return aw((t=t||UA(r,n)).duration,t.delay,t.easing)}(e.timings,n.errors);n.currentAnimateTimings=r;var l=e.styles?e.styles:aA({});if(5==l.type)t=this.visitKeyframes(l,n);else{var i=e.styles,o=!1;if(!i){o=!0;var u={};r.easing&&(u.easing=r.easing),i=aA(u)}n.currentTime+=r.duration+r.delay;var s=this.visitStyle(i,n);s.isEmptyStep=o,t=s}return n.currentAnimateTimings=null,{type:4,timings:r,style:t,options:null}},e.prototype.visitStyle=function(e,n){var t=this._makeStyleAst(e,n);return this._validateStyleAst(t,n),t},e.prototype._makeStyleAst=function(e,n){var t=[];Array.isArray(e.styles)?e.styles.forEach(function(e){"string"==typeof e?e==uA?t.push(e):n.errors.push("The provided style string value "+e+" is not allowed."):t.push(e)}):t.push(e.styles);var r=!1,l=null;return t.forEach(function(e){if(uw(e)){var n=e,t=n.easing;if(t&&(l=t,delete n.easing),!r)for(var i in n)if(n[i].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:t,easing:l,offset:e.offset,containsDynamicStyles:r,options:null}},e.prototype._validateStyleAst=function(e,n){var t=this,r=n.currentAnimateTimings,l=n.currentTime,i=n.currentTime;r&&i>0&&(i-=r.duration+r.delay),e.styles.forEach(function(e){"string"!=typeof e&&Object.keys(e).forEach(function(r){if(t._driver.validateStyleProperty(r)){var o,u,s,a=n.collectedStyles[n.currentQuerySelector],c=a[r],p=!0;c&&(i!=l&&i>=c.startTime&&l<=c.endTime&&(n.errors.push('The CSS property "'+r+'" that exists between the times of "'+c.startTime+'ms" and "'+c.endTime+'ms" is also being animated in a parallel animation between the times of "'+i+'ms" and "'+l+'ms"'),p=!1),i=c.startTime),p&&(a[r]={startTime:i,endTime:l}),n.options&&(o=n.errors,u=n.options.params||{},(s=KA(e[r])).length&&s.forEach(function(e){u.hasOwnProperty(e)||o.push("Unable to resolve the local animation param "+e+" in the given list of values")}))}else n.errors.push('The provided animation property "'+r+'" is not a supported CSS property for animations')})})},e.prototype.visitKeyframes=function(e,n){var t=this,r={type:5,styles:[],options:null};if(!n.currentAnimateTimings)return n.errors.push("keyframes() must be placed inside of a call to animate()"),r;var l=0,i=[],o=!1,u=!1,s=0,a=e.steps.map(function(e){var r=t._makeStyleAst(e,n),a=null!=r.offset?r.offset:function(e){if("string"==typeof e)return null;var n=null;if(Array.isArray(e))e.forEach(function(e){if(uw(e)&&e.hasOwnProperty("offset")){var t=e;n=parseFloat(t.offset),delete t.offset}});else if(uw(e)&&e.hasOwnProperty("offset")){var t=e;n=parseFloat(t.offset),delete t.offset}return n}(r.styles),c=0;return null!=a&&(l++,c=r.offset=a),u=u||c<0||c>1,o=o||c<s,s=c,i.push(c),r});u&&n.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),o&&n.errors.push("Please ensure that all keyframe offsets are in order");var c=e.steps.length,p=0;l>0&&l<c?n.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==l&&(p=1/(c-1));var h=c-1,d=n.currentTime,f=n.currentAnimateTimings,g=f.duration;return a.forEach(function(e,l){var o=p>0?l==h?1:p*l:i[l],u=o*g;n.currentTime=d+f.delay+u,f.duration=u,t._validateStyleAst(e,n),e.offset=o,r.styles.push(e)}),r},e.prototype.visitReference=function(e,n){return{type:8,animation:XA(this,YA(e.animation),n),options:sw(e.options)}},e.prototype.visitAnimateChild=function(e,n){return n.depCount++,{type:9,options:sw(e.options)}},e.prototype.visitAnimateRef=function(e,n){return{type:10,animation:this.visitReference(e.animation,n),options:sw(e.options)}},e.prototype.visitQuery=function(e,n){var t=n.currentQuerySelector,r=e.options||{};n.queryCount++,n.currentQuery=e;var l=a(function(e){var n=!!e.split(/\s*,\s*/).find(function(e){return":self"==e});return n&&(e=e.replace(rw,"")),[e=e.replace(/@\*/g,".ng-trigger").replace(/@\w+/g,function(e){return".ng-trigger-"+e.substr(1)}).replace(/:animating/g,".ng-animating"),n]}(e.selector),2),i=l[0],o=l[1];n.currentQuerySelector=t.length?t+" "+i:i,EA(n.collectedStyles,n.currentQuerySelector,{});var u=XA(this,YA(e.animation),n);return n.currentQuery=null,n.currentQuerySelector=t,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:u,originalSelector:e.selector,options:sw(e.options)}},e.prototype.visitStagger=function(e,n){n.currentQuery||n.errors.push("stagger() can only be used inside of query()");var t="full"===e.timings?{duration:0,delay:0,easing:"full"}:UA(e.timings,n.errors,!0);return{type:12,animation:XA(this,YA(e.animation),n),timings:t,options:null}},e}(),ow=function(){return function(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}();function uw(e){return!Array.isArray(e)&&"object"==typeof e}function sw(e){var n;return e?(e=HA(e)).params&&(e.params=(n=e.params)?HA(n):null):e={},e}function aw(e,n,t){return{duration:e,delay:n,easing:t}}function cw(e,n,t,r,l,i,o,u){return void 0===o&&(o=null),void 0===u&&(u=!1),{type:1,element:e,keyframes:n,preStyleProps:t,postStyleProps:r,duration:l,delay:i,totalTime:l+i,easing:o,subTimeline:u}}var pw=function(){function e(){this._map=new Map}return e.prototype.consume=function(e){var n=this._map.get(e);return n?this._map.delete(e):n=[],n},e.prototype.append=function(e,n){var t=this._map.get(e);t||this._map.set(e,t=[]),t.push.apply(t,c(n))},e.prototype.has=function(e){return this._map.has(e)},e.prototype.clear=function(){this._map.clear()},e}(),hw=new RegExp(":enter","g"),dw=new RegExp(":leave","g");function fw(e,n,t,r,l,i,o,u,s,a){return void 0===i&&(i={}),void 0===o&&(o={}),void 0===a&&(a=[]),(new gw).buildKeyframes(e,n,t,r,l,i,o,u,s,a)}var gw=function(){function e(){}return e.prototype.buildKeyframes=function(e,n,t,r,l,i,o,u,s,a){void 0===a&&(a=[]),s=s||new pw;var c=new mw(e,n,s,r,l,a,[]);c.options=u,c.currentTimeline.setStyles([i],null,c.errors,u),XA(this,t,c);var p=c.timelines.filter(function(e){return e.containsAnimation()});if(p.length&&Object.keys(o).length){var h=p[p.length-1];h.allowOnlyTimelineStyles()||h.setStyles([o],null,c.errors,u)}return p.length?p.map(function(e){return e.buildKeyframes()}):[cw(n,[],[],[],0,0,"",!1)]},e.prototype.visitTrigger=function(e,n){},e.prototype.visitState=function(e,n){},e.prototype.visitTransition=function(e,n){},e.prototype.visitAnimateChild=function(e,n){var t=n.subInstructions.consume(n.element);if(t){var r=n.createSubContext(e.options),l=n.currentTimeline.currentTime,i=this._visitSubInstructions(t,r,r.options);l!=i&&n.transformIntoNewTimeline(i)}n.previousNode=e},e.prototype.visitAnimateRef=function(e,n){var t=n.createSubContext(e.options);t.transformIntoNewTimeline(),this.visitReference(e.animation,t),n.transformIntoNewTimeline(t.currentTimeline.currentTime),n.previousNode=e},e.prototype._visitSubInstructions=function(e,n,t){var r=n.currentTimeline.currentTime,l=null!=t.duration?xA(t.duration):null,i=null!=t.delay?xA(t.delay):null;return 0!==l&&e.forEach(function(e){var t=n.appendInstructionToTimeline(e,l,i);r=Math.max(r,t.duration+t.delay)}),r},e.prototype.visitReference=function(e,n){n.updateOptions(e.options,!0),XA(this,e.animation,n),n.previousNode=e},e.prototype.visitSequence=function(e,n){var t=this,r=n.subContextCount,l=n,i=e.options;if(i&&(i.params||i.delay)&&((l=n.createSubContext(i)).transformIntoNewTimeline(),null!=i.delay)){6==l.previousNode.type&&(l.currentTimeline.snapshotCurrentStyles(),l.previousNode=vw);var o=xA(i.delay);l.delayNextStep(o)}e.steps.length&&(e.steps.forEach(function(e){return XA(t,e,l)}),l.currentTimeline.applyStylesToKeyframe(),l.subContextCount>r&&l.transformIntoNewTimeline()),n.previousNode=e},e.prototype.visitGroup=function(e,n){var t=this,r=[],l=n.currentTimeline.currentTime,i=e.options&&e.options.delay?xA(e.options.delay):0;e.steps.forEach(function(o){var u=n.createSubContext(e.options);i&&u.delayNextStep(i),XA(t,o,u),l=Math.max(l,u.currentTimeline.currentTime),r.push(u.currentTimeline)}),r.forEach(function(e){return n.currentTimeline.mergeTimelineCollectedStyles(e)}),n.transformIntoNewTimeline(l),n.previousNode=e},e.prototype._visitTiming=function(e,n){if(e.dynamic){var t=e.strValue;return UA(n.params?qA(t,n.params,n.errors):t,n.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}},e.prototype.visitAnimate=function(e,n){var t=n.currentAnimateTimings=this._visitTiming(e.timings,n),r=n.currentTimeline;t.delay&&(n.incrementTime(t.delay),r.snapshotCurrentStyles());var l=e.style;5==l.type?this.visitKeyframes(l,n):(n.incrementTime(t.duration),this.visitStyle(l,n),r.applyStylesToKeyframe()),n.currentAnimateTimings=null,n.previousNode=e},e.prototype.visitStyle=function(e,n){var t=n.currentTimeline,r=n.currentAnimateTimings;!r&&t.getCurrentStyleProperties().length&&t.forwardFrame();var l=r&&r.easing||e.easing;e.isEmptyStep?t.applyEmptyStep(l):t.setStyles(e.styles,l,n.errors,n.options),n.previousNode=e},e.prototype.visitKeyframes=function(e,n){var t=n.currentAnimateTimings,r=n.currentTimeline.duration,l=t.duration,i=n.createSubContext().currentTimeline;i.easing=t.easing,e.styles.forEach(function(e){i.forwardTime((e.offset||0)*l),i.setStyles(e.styles,e.easing,n.errors,n.options),i.applyStylesToKeyframe()}),n.currentTimeline.mergeTimelineCollectedStyles(i),n.transformIntoNewTimeline(r+l),n.previousNode=e},e.prototype.visitQuery=function(e,n){var t=this,r=n.currentTimeline.currentTime,l=e.options||{},i=l.delay?xA(l.delay):0;i&&(6===n.previousNode.type||0==r&&n.currentTimeline.getCurrentStyleProperties().length)&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=vw);var o=r,u=n.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!l.optional,n.errors);n.currentQueryTotal=u.length;var s=null;u.forEach(function(r,l){n.currentQueryIndex=l;var u=n.createSubContext(e.options,r);i&&u.delayNextStep(i),r===n.element&&(s=u.currentTimeline),XA(t,e.animation,u),u.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,u.currentTimeline.currentTime)}),n.currentQueryIndex=0,n.currentQueryTotal=0,n.transformIntoNewTimeline(o),s&&(n.currentTimeline.mergeTimelineCollectedStyles(s),n.currentTimeline.snapshotCurrentStyles()),n.previousNode=e},e.prototype.visitStagger=function(e,n){var t=n.parentContext,r=n.currentTimeline,l=e.timings,i=Math.abs(l.duration),o=i*(n.currentQueryTotal-1),u=i*n.currentQueryIndex;switch(l.duration<0?"reverse":l.easing){case"reverse":u=o-u;break;case"full":u=t.currentStaggerTime}var s=n.currentTimeline;u&&s.delayNextStep(u);var a=s.currentTime;XA(this,e.animation,n),n.previousNode=e,t.currentStaggerTime=r.currentTime-a+(r.startTime-t.currentTimeline.startTime)},e}(),vw={},mw=function(){function e(e,n,t,r,l,i,o,u){this._driver=e,this.element=n,this.subInstructions=t,this._enterClassName=r,this._leaveClassName=l,this.errors=i,this.timelines=o,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=vw,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=u||new yw(this._driver,n,0),o.push(this.currentTimeline)}return Object.defineProperty(e.prototype,"params",{get:function(){return this.options.params},enumerable:!0,configurable:!0}),e.prototype.updateOptions=function(e,n){var t=this;if(e){var r=e,l=this.options;null!=r.duration&&(l.duration=xA(r.duration)),null!=r.delay&&(l.delay=xA(r.delay));var i=r.params;if(i){var o=l.params;o||(o=this.options.params={}),Object.keys(i).forEach(function(e){n&&o.hasOwnProperty(e)||(o[e]=qA(i[e],o,t.errors))})}}},e.prototype._copyOptions=function(){var e={};if(this.options){var n=this.options.params;if(n){var t=e.params={};Object.keys(n).forEach(function(e){t[e]=n[e]})}}return e},e.prototype.createSubContext=function(n,t,r){void 0===n&&(n=null);var l=t||this.element,i=new e(this._driver,l,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(l,r||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(n),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i},e.prototype.transformIntoNewTimeline=function(e){return this.previousNode=vw,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline},e.prototype.appendInstructionToTimeline=function(e,n,t){var r={duration:null!=n?n:e.duration,delay:this.currentTimeline.currentTime+(null!=t?t:0)+e.delay,easing:""},l=new Sw(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(l),r},e.prototype.incrementTime=function(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)},e.prototype.delayNextStep=function(e){e>0&&this.currentTimeline.delayNextStep(e)},e.prototype.invokeQuery=function(e,n,t,r,l,i){var o=[];if(r&&o.push(this.element),e.length>0){e=(e=e.replace(hw,"."+this._enterClassName)).replace(dw,"."+this._leaveClassName);var u=this._driver.query(this.element,e,1!=t);0!==t&&(u=t<0?u.slice(u.length+t,u.length):u.slice(0,t)),o.push.apply(o,c(u))}return l||0!=o.length||i.push('`query("'+n+'")` returned zero elements. (Use `query("'+n+'", { optional: true })` if you wish to allow this.)'),o},e}(),yw=function(){function e(e,n,t,r){this._driver=e,this.element=n,this.startTime=t,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}return e.prototype.containsAnimation=function(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}},e.prototype.getCurrentStyleProperties=function(){return Object.keys(this._currentKeyframe)},Object.defineProperty(e.prototype,"currentTime",{get:function(){return this.startTime+this.duration},enumerable:!0,configurable:!0}),e.prototype.delayNextStep=function(e){var n=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||n?(this.forwardTime(this.currentTime+e),n&&this.snapshotCurrentStyles()):this.startTime+=e},e.prototype.fork=function(n,t){return this.applyStylesToKeyframe(),new e(this._driver,n,t||this.currentTime,this._elementTimelineStylesLookup)},e.prototype._loadKeyframe=function(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))},e.prototype.forwardFrame=function(){this.duration+=1,this._loadKeyframe()},e.prototype.forwardTime=function(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()},e.prototype._updateStyle=function(e,n){this._localTimelineStyles[e]=n,this._globalTimelineStyles[e]=n,this._styleSummary[e]={time:this.currentTime,value:n}},e.prototype.allowOnlyTimelineStyles=function(){return this._currentEmptyStepKeyframe!==this._currentKeyframe},e.prototype.applyEmptyStep=function(e){var n=this;e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(function(e){n._backFill[e]=n._globalTimelineStyles[e]||uA,n._currentKeyframe[e]=uA}),this._currentEmptyStepKeyframe=this._currentKeyframe},e.prototype.setStyles=function(e,n,t,r){var l=this;n&&(this._previousKeyframe.easing=n);var i=r&&r.params||{},o=function(e,n){var t,r={};return e.forEach(function(e){"*"===e?(t=t||Object.keys(n)).forEach(function(e){r[e]=uA}):GA(e,!1,r)}),r}(e,this._globalTimelineStyles);Object.keys(o).forEach(function(e){var n=qA(o[e],i,t);l._pendingStyles[e]=n,l._localTimelineStyles.hasOwnProperty(e)||(l._backFill[e]=l._globalTimelineStyles.hasOwnProperty(e)?l._globalTimelineStyles[e]:uA),l._updateStyle(e,n)})},e.prototype.applyStylesToKeyframe=function(){var e=this,n=this._pendingStyles,t=Object.keys(n);0!=t.length&&(this._pendingStyles={},t.forEach(function(t){e._currentKeyframe[t]=n[t]}),Object.keys(this._localTimelineStyles).forEach(function(n){e._currentKeyframe.hasOwnProperty(n)||(e._currentKeyframe[n]=e._localTimelineStyles[n])}))},e.prototype.snapshotCurrentStyles=function(){var e=this;Object.keys(this._localTimelineStyles).forEach(function(n){var t=e._localTimelineStyles[n];e._pendingStyles[n]=t,e._updateStyle(n,t)})},e.prototype.getFinalKeyframe=function(){return this._keyframes.get(this.duration)},Object.defineProperty(e.prototype,"properties",{get:function(){var e=[];for(var n in this._currentKeyframe)e.push(n);return e},enumerable:!0,configurable:!0}),e.prototype.mergeTimelineCollectedStyles=function(e){var n=this;Object.keys(e._styleSummary).forEach(function(t){var r=n._styleSummary[t],l=e._styleSummary[t];(!r||l.time>r.time)&&n._updateStyle(t,l.value)})},e.prototype.buildKeyframes=function(){var e=this;this.applyStylesToKeyframe();var n=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration,l=[];this._keyframes.forEach(function(i,o){var u=GA(i,!0);Object.keys(u).forEach(function(e){var r=u[e];r==dA?n.add(e):r==uA&&t.add(e)}),r||(u.offset=o/e.duration),l.push(u)});var i=n.size?$A(n.values()):[],o=t.size?$A(t.values()):[];if(r){var u=l[0],s=HA(u);u.offset=0,s.offset=1,l=[u,s]}return cw(this.element,l,i,o,this.duration,this.startTime,this.easing,!1)},e}(),Sw=function(e){function n(n,t,r,l,i,o,u){void 0===u&&(u=!1);var s=e.call(this,n,t,o.delay)||this;return s.element=t,s.keyframes=r,s.preStyleProps=l,s.postStyleProps=i,s._stretchStartingKeyframe=u,s.timings={duration:o.duration,delay:o.delay,easing:o.easing},s}return l(n,e),n.prototype.containsAnimation=function(){return this.keyframes.length>1},n.prototype.buildKeyframes=function(){var e=this.keyframes,n=this.timings,t=n.delay,r=n.duration,l=n.easing;if(this._stretchStartingKeyframe&&t){var i=[],o=r+t,u=t/o,s=GA(e[0],!1);s.offset=0,i.push(s);var a=GA(e[0],!1);a.offset=Ew(u),i.push(a);for(var c=e.length-1,p=1;p<=c;p++){var h=GA(e[p],!1);h.offset=Ew((t+h.offset*r)/o),i.push(h)}r=o,t=0,l="",e=i}return cw(this.element,e,this.preStyleProps,this.postStyleProps,r,t,l,!0)},n}(yw);function Ew(e,n){void 0===n&&(n=3);var t=Math.pow(10,n-1);return Math.round(e*t)/t}var bw=function(){return function(){}}(),Ow=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n.prototype.normalizePropertyName=function(e,n){return ZA(e)},n.prototype.normalizeStyleValue=function(e,n,t,r){var l="",i=t.toString().trim();if(Rw[n]&&0!==t&&"0"!==t)if("number"==typeof t)l="px";else{var o=t.match(/^[+-]?[\d\.]+([a-z]*)$/);o&&0==o[1].length&&r.push("Please provide a CSS unit value for "+e+":"+t)}return i+l},n}(bw),Rw=Tw("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(","));function Tw(e){var n={};return e.forEach(function(e){return n[e]=!0}),n}function Cw(e,n,t,r,l,i,o,u,s,a,c,p,h){return{type:0,element:e,triggerName:n,isRemovalTransition:l,fromState:t,fromStyles:i,toState:r,toStyles:o,timelines:u,queriedElements:s,preStyleProps:a,postStyleProps:c,totalTime:p,errors:h}}var _w={},Iw=function(){function e(e,n,t){this._triggerName=e,this.ast=n,this._stateStyles=t}return e.prototype.match=function(e,n,t,r){return function(e,n,t,r,l){return e.some(function(e){return e(n,t,r,l)})}(this.ast.matchers,e,n,t,r)},e.prototype.buildStyles=function(e,n,t){var r=this._stateStyles["*"],l=this._stateStyles[e],i=r?r.buildStyles(n,t):{};return l?l.buildStyles(n,t):i},e.prototype.build=function(e,n,t,r,l,o,u,s,a,c){var p=[],h=this.ast.options&&this.ast.options.params||_w,d=this.buildStyles(t,u&&u.params||_w,p),f=s&&s.params||_w,g=this.buildStyles(r,f,p),v=new Set,m=new Map,y=new Map,S="void"===r,E={params:i({},h,f)},b=c?[]:fw(e,n,this.ast.animation,l,o,d,g,E,a,p),O=0;if(b.forEach(function(e){O=Math.max(e.duration+e.delay,O)}),p.length)return Cw(n,this._triggerName,t,r,S,d,g,[],[],m,y,O,p);b.forEach(function(e){var t=e.element,r=EA(m,t,{});e.preStyleProps.forEach(function(e){return r[e]=!0});var l=EA(y,t,{});e.postStyleProps.forEach(function(e){return l[e]=!0}),t!==n&&v.add(t)});var R=$A(v.values());return Cw(n,this._triggerName,t,r,S,d,g,b,R,m,y,O)},e}(),Aw=function(){function e(e,n){this.styles=e,this.defaultParams=n}return e.prototype.buildStyles=function(e,n){var t={},r=HA(this.defaultParams);return Object.keys(e).forEach(function(n){var t=e[n];null!=t&&(r[n]=t)}),this.styles.styles.forEach(function(e){if("string"!=typeof e){var l=e;Object.keys(l).forEach(function(e){var i=l[e];i.length>1&&(i=qA(i,r,n)),t[e]=i})}}),t},e}(),ww=function(){function e(e,n){var t=this;this.name=e,this.ast=n,this.transitionFactories=[],this.states={},n.states.forEach(function(e){t.states[e.name]=new Aw(e.style,e.options&&e.options.params||{})}),Nw(this.states,"true","1"),Nw(this.states,"false","0"),n.transitions.forEach(function(n){t.transitionFactories.push(new Iw(e,n,t.states))}),this.fallbackTransition=new Iw(e,{type:1,animation:{type:2,steps:[],options:null},matchers:[function(e,n){return!0}],options:null,queryCount:0,depCount:0},this.states)}return Object.defineProperty(e.prototype,"containsQueries",{get:function(){return this.ast.queryCount>0},enumerable:!0,configurable:!0}),e.prototype.matchTransition=function(e,n,t,r){return this.transitionFactories.find(function(l){return l.match(e,n,t,r)})||null},e.prototype.matchStyles=function(e,n,t){return this.fallbackTransition.buildStyles(e,n,t)},e}();function Nw(e,n,t){e.hasOwnProperty(n)?e.hasOwnProperty(t)||(e[t]=e[n]):e.hasOwnProperty(t)&&(e[n]=e[t])}var Pw=new pw,Dw=function(){function e(e,n,t){this.bodyNode=e,this._driver=n,this._normalizer=t,this._animations={},this._playersById={},this.players=[]}return e.prototype.register=function(e,n){var t=[],r=lw(this._driver,n,t);if(t.length)throw new Error("Unable to build the animation due to the following errors: "+t.join("\n"));this._animations[e]=r},e.prototype._buildPlayer=function(e,n,t){var r=e.element,l=vA(0,this._normalizer,0,e.keyframes,n,t);return this._driver.animate(r,l,e.duration,e.delay,e.easing,[],!0)},e.prototype.create=function(e,n,t){var r=this;void 0===t&&(t={});var l,i=[],o=this._animations[e],u=new Map;if(o?(l=fw(this._driver,n,o,"ng-enter","ng-leave",{},{},t,Pw,i)).forEach(function(e){var n=EA(u,e.element,{});e.postStyleProps.forEach(function(e){return n[e]=null})}):(i.push("The requested animation doesn't exist or has already been destroyed"),l=[]),i.length)throw new Error("Unable to create the animation due to the following errors: "+i.join("\n"));u.forEach(function(e,n){Object.keys(e).forEach(function(t){e[t]=r._driver.computeStyle(n,t,uA)})});var s=gA(l.map(function(e){var n=u.get(e.element);return r._buildPlayer(e,{},n)}));return this._playersById[e]=s,s.onDestroy(function(){return r.destroy(e)}),this.players.push(s),s},e.prototype.destroy=function(e){var n=this._getPlayer(e);n.destroy(),delete this._playersById[e];var t=this.players.indexOf(n);t>=0&&this.players.splice(t,1)},e.prototype._getPlayer=function(e){var n=this._playersById[e];if(!n)throw new Error("Unable to find the timeline player referenced by "+e);return n},e.prototype.listen=function(e,n,t,r){var l=SA(n,"","","");return mA(this._getPlayer(e),t,l,r),function(){}},e.prototype.command=function(e,n,t,r){if("register"!=t)if("create"!=t){var l=this._getPlayer(e);switch(t){case"play":l.play();break;case"pause":l.pause();break;case"reset":l.reset();break;case"restart":l.restart();break;case"finish":l.finish();break;case"init":l.init();break;case"setPosition":l.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}else this.create(e,n,r[0]||{});else this.register(e,r[0])},e}(),Mw=[],kw={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Lw={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},xw="__ng_removed",Fw=function(){function e(e,n){void 0===n&&(n=""),this.namespaceId=n;var t=e&&e.hasOwnProperty("value");if(this.value=function(e){return null!=e?e:null}(t?e.value:e),t){var r=HA(e);delete r.value,this.options=r}else this.options={};this.options.params||(this.options.params={})}return Object.defineProperty(e.prototype,"params",{get:function(){return this.options.params},enumerable:!0,configurable:!0}),e.prototype.absorbOptions=function(e){var n=e.params;if(n){var t=this.options.params;Object.keys(n).forEach(function(e){null==t[e]&&(t[e]=n[e])})}},e}(),Uw=new Fw("void"),Hw=function(){function e(e,n,t){this.id=e,this.hostElement=n,this._engine=t,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Kw(n,this._hostClassName)}return e.prototype.listen=function(e,n,t,r){var l,i=this;if(!this._triggers.hasOwnProperty(n))throw new Error('Unable to listen on the animation trigger event "'+t+'" because the animation trigger "'+n+"\" doesn't exist!");if(null==t||0==t.length)throw new Error('Unable to listen on the animation trigger "'+n+'" because the provided event is undefined!');if("start"!=(l=t)&&"done"!=l)throw new Error('The provided animation trigger event "'+t+'" for the animation trigger "'+n+'" is not supported!');var o=EA(this._elementListeners,e,[]),u={name:n,phase:t,callback:r};o.push(u);var s=EA(this._engine.statesByElement,e,{});return s.hasOwnProperty(n)||(Kw(e,"ng-trigger"),Kw(e,"ng-trigger-"+n),s[n]=Uw),function(){i._engine.afterFlush(function(){var e=o.indexOf(u);e>=0&&o.splice(e,1),i._triggers[n]||delete s[n]})}},e.prototype.register=function(e,n){return!this._triggers[e]&&(this._triggers[e]=n,!0)},e.prototype._getTrigger=function(e){var n=this._triggers[e];if(!n)throw new Error('The provided animation trigger "'+e+'" has not been registered!');return n},e.prototype.trigger=function(e,n,t,r){var l=this;void 0===r&&(r=!0);var i=this._getTrigger(n),o=new Bw(this.id,n,e),u=this._engine.statesByElement.get(e);u||(Kw(e,"ng-trigger"),Kw(e,"ng-trigger-"+n),this._engine.statesByElement.set(e,u={}));var s=u[n],a=new Fw(t,this.id);if(!(t&&t.hasOwnProperty("value"))&&s&&a.absorbOptions(s.options),u[n]=a,s||(s=Uw),"void"===a.value||s.value!==a.value){var c=EA(this._engine.playersByElement,e,[]);c.forEach(function(e){e.namespaceId==l.id&&e.triggerName==n&&e.queued&&e.destroy()});var p=i.matchTransition(s.value,a.value,e,a.params),h=!1;if(!p){if(!r)return;p=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:n,transition:p,fromState:s,toState:a,player:o,isFallbackTransition:h}),h||(Kw(e,"ng-animate-queued"),o.onStart(function(){qw(e,"ng-animate-queued")})),o.onDone(function(){var n=l.players.indexOf(o);n>=0&&l.players.splice(n,1);var t=l._engine.playersByElement.get(e);if(t){var r=t.indexOf(o);r>=0&&t.splice(r,1)}}),this.players.push(o),c.push(o),o}if(!function(e,n){var t=Object.keys(e),r=Object.keys(n);if(t.length!=r.length)return!1;for(var l=0;l<t.length;l++){var i=t[l];if(!n.hasOwnProperty(i)||e[i]!==n[i])return!1}return!0}(s.params,a.params)){var d=[],f=i.matchStyles(s.value,s.params,d),g=i.matchStyles(a.value,a.params,d);d.length?this._engine.reportError(d):this._engine.afterFlush(function(){jA(e,f),WA(e,g)})}},e.prototype.deregister=function(e){var n=this;delete this._triggers[e],this._engine.statesByElement.forEach(function(n,t){delete n[e]}),this._elementListeners.forEach(function(t,r){n._elementListeners.set(r,t.filter(function(n){return n.name!=e}))})},e.prototype.clearElementCache=function(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);var n=this._engine.playersByElement.get(e);n&&(n.forEach(function(e){return e.destroy()}),this._engine.playersByElement.delete(e))},e.prototype._signalRemovalForInnerTriggers=function(e,n,t){var r=this;void 0===t&&(t=!1),this._engine.driver.query(e,".ng-trigger",!0).forEach(function(e){if(!e[xw]){var t=r._engine.fetchNamespacesByElement(e);t.size?t.forEach(function(t){return t.triggerLeaveAnimation(e,n,!1,!0)}):r.clearElementCache(e)}})},e.prototype.triggerLeaveAnimation=function(e,n,t,r){var l=this,i=this._engine.statesByElement.get(e);if(i){var o=[];if(Object.keys(i).forEach(function(n){if(l._triggers[n]){var t=l.trigger(e,n,"void",r);t&&o.push(t)}}),o.length)return this._engine.markElementAsRemoved(this.id,e,!0,n),t&&gA(o).onDone(function(){return l._engine.processLeaveNode(e)}),!0}return!1},e.prototype.prepareLeaveAnimationListeners=function(e){var n=this,t=this._elementListeners.get(e);if(t){var r=new Set;t.forEach(function(t){var l=t.name;if(!r.has(l)){r.add(l);var i=n._triggers[l].fallbackTransition,o=n._engine.statesByElement.get(e)[l]||Uw,u=new Fw("void"),s=new Bw(n.id,l,e);n._engine.totalQueuedPlayers++,n._queue.push({element:e,triggerName:l,transition:i,fromState:o,toState:u,player:s,isFallbackTransition:!0})}})}},e.prototype.removeNode=function(e,n){var t=this,r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,n,!0),!this.triggerLeaveAnimation(e,n,!0)){var l=!1;if(r.totalAnimations){var i=r.players.length?r.playersByQueriedElement.get(e):[];if(i&&i.length)l=!0;else for(var o=e;o=o.parentNode;)if(r.statesByElement.get(o)){l=!0;break}}this.prepareLeaveAnimationListeners(e),l?r.markElementAsRemoved(this.id,e,!1,n):(r.afterFlush(function(){return t.clearElementCache(e)}),r.destroyInnerAnimations(e),r._onRemovalComplete(e,n))}},e.prototype.insertNode=function(e,n){Kw(e,this._hostClassName)},e.prototype.drainQueuedTransitions=function(e){var n=this,t=[];return this._queue.forEach(function(r){var l=r.player;if(!l.destroyed){var i=r.element,o=n._elementListeners.get(i);o&&o.forEach(function(n){if(n.name==r.triggerName){var t=SA(i,r.triggerName,r.fromState.value,r.toState.value);t._data=e,mA(r.player,n.phase,t,n.callback)}}),l.markedForDestroy?n._engine.afterFlush(function(){l.destroy()}):t.push(r)}}),this._queue=[],t.sort(function(e,t){var r=e.transition.ast.depCount,l=t.transition.ast.depCount;return 0==r||0==l?r-l:n._engine.driver.containsElement(e.element,t.element)?1:-1})},e.prototype.destroy=function(e){this.players.forEach(function(e){return e.destroy()}),this._signalRemovalForInnerTriggers(this.hostElement,e)},e.prototype.elementContainsData=function(e){var n=!1;return this._elementListeners.has(e)&&(n=!0),!!this._queue.find(function(n){return n.element===e})||n},e}(),Gw=function(){function e(e,n,t){this.bodyNode=e,this.driver=n,this._normalizer=t,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=function(e,n){}}return e.prototype._onRemovalComplete=function(e,n){this.onRemovalComplete(e,n)},Object.defineProperty(e.prototype,"queuedPlayers",{get:function(){var e=[];return this._namespaceList.forEach(function(n){n.players.forEach(function(n){n.queued&&e.push(n)})}),e},enumerable:!0,configurable:!0}),e.prototype.createNamespace=function(e,n){var t=new Hw(e,n,this);return n.parentNode?this._balanceNamespaceList(t,n):(this.newHostElements.set(n,t),this.collectEnterElement(n)),this._namespaceLookup[e]=t},e.prototype._balanceNamespaceList=function(e,n){var t=this._namespaceList.length-1;if(t>=0){for(var r=!1,l=t;l>=0;l--)if(this.driver.containsElement(this._namespaceList[l].hostElement,n)){this._namespaceList.splice(l+1,0,e),r=!0;break}r||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(n,e),e},e.prototype.register=function(e,n){var t=this._namespaceLookup[e];return t||(t=this.createNamespace(e,n)),t},e.prototype.registerTrigger=function(e,n,t){var r=this._namespaceLookup[e];r&&r.register(n,t)&&this.totalAnimations++},e.prototype.destroy=function(e,n){var t=this;if(e){var r=this._fetchNamespace(e);this.afterFlush(function(){t.namespacesByHostElement.delete(r.hostElement),delete t._namespaceLookup[e];var n=t._namespaceList.indexOf(r);n>=0&&t._namespaceList.splice(n,1)}),this.afterFlushAnimationsDone(function(){return r.destroy(n)})}},e.prototype._fetchNamespace=function(e){return this._namespaceLookup[e]},e.prototype.fetchNamespacesByElement=function(e){var n=new Set,t=this.statesByElement.get(e);if(t)for(var r=Object.keys(t),l=0;l<r.length;l++){var i=t[r[l]].namespaceId;if(i){var o=this._fetchNamespace(i);o&&n.add(o)}}return n},e.prototype.trigger=function(e,n,t,r){if(Vw(n)){var l=this._fetchNamespace(e);if(l)return l.trigger(n,t,r),!0}return!1},e.prototype.insertNode=function(e,n,t,r){if(Vw(n)){var l=n[xw];if(l&&l.setForRemoval){l.setForRemoval=!1,l.setForMove=!0;var i=this.collectedLeaveElements.indexOf(n);i>=0&&this.collectedLeaveElements.splice(i,1)}if(e){var o=this._fetchNamespace(e);o&&o.insertNode(n,t)}r&&this.collectEnterElement(n)}},e.prototype.collectEnterElement=function(e){this.collectedEnterElements.push(e)},e.prototype.markElementAsDisabled=function(e,n){n?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Kw(e,"ng-animate-disabled")):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),qw(e,"ng-animate-disabled"))},e.prototype.removeNode=function(e,n,t){if(Vw(n)){var r=e?this._fetchNamespace(e):null;r?r.removeNode(n,t):this.markElementAsRemoved(e,n,!1,t)}else this._onRemovalComplete(n,t)},e.prototype.markElementAsRemoved=function(e,n,t,r){this.collectedLeaveElements.push(n),n[xw]={namespaceId:e,setForRemoval:r,hasAnimation:t,removedBeforeQueried:!1}},e.prototype.listen=function(e,n,t,r,l){return Vw(n)?this._fetchNamespace(e).listen(n,t,r,l):function(){}},e.prototype._buildInstruction=function(e,n,t,r,l){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,t,r,e.fromState.options,e.toState.options,n,l)},e.prototype.destroyInnerAnimations=function(e){var n=this,t=this.driver.query(e,".ng-trigger",!0);t.forEach(function(e){return n.destroyActiveAnimationsForElement(e)}),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,".ng-animating",!0)).forEach(function(e){return n.finishActiveQueriedAnimationOnElement(e)})},e.prototype.destroyActiveAnimationsForElement=function(e){var n=this.playersByElement.get(e);n&&n.forEach(function(e){e.queued?e.markedForDestroy=!0:e.destroy()})},e.prototype.finishActiveQueriedAnimationOnElement=function(e){var n=this.playersByQueriedElement.get(e);n&&n.forEach(function(e){return e.finish()})},e.prototype.whenRenderingDone=function(){var e=this;return new Promise(function(n){if(e.players.length)return gA(e.players).onDone(function(){return n()});n()})},e.prototype.processLeaveNode=function(e){var n=this,t=e[xw];if(t&&t.setForRemoval){if(e[xw]=kw,t.namespaceId){this.destroyInnerAnimations(e);var r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}this.driver.matchesElement(e,".ng-animate-disabled")&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(function(e){n.markElementAsDisabled(e,!1)})},e.prototype.flush=function(e){var n=this;void 0===e&&(e=-1);var t=[];if(this.newHostElements.size&&(this.newHostElements.forEach(function(e,t){return n._balanceNamespaceList(e,t)}),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(var r=0;r<this.collectedEnterElements.length;r++)Kw(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){var l=[];try{t=this._flushAnimations(l,e)}finally{for(r=0;r<l.length;r++)l[r]()}}else for(r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(function(e){return e()}),this._flushFns=[],this._whenQuietFns.length){var i=this._whenQuietFns;this._whenQuietFns=[],t.length?gA(t).onDone(function(){i.forEach(function(e){return e()})}):i.forEach(function(e){return e()})}},e.prototype.reportError=function(e){throw new Error("Unable to process animations due to the following failed trigger transitions\n "+e.join("\n"))},e.prototype._flushAnimations=function(e,n){var t=this,r=new pw,l=[],o=new Map,u=[],s=new Map,a=new Map,p=new Map,h=new Set;this.disabledNodes.forEach(function(e){h.add(e);for(var n=t.driver.query(e,".ng-animate-queued",!0),r=0;r<n.length;r++)h.add(n[r])});var d=this.bodyNode,f=Array.from(this.statesByElement.keys()),g=Yw(f,this.collectedEnterElements),v=new Map,m=0;g.forEach(function(e,n){var t="ng-enter"+m++;v.set(n,t),e.forEach(function(e){return Kw(e,t)})});for(var y=[],S=new Set,E=new Set,b=0;b<this.collectedLeaveElements.length;b++)(U=(F=this.collectedLeaveElements[b])[xw])&&U.setForRemoval&&(y.push(F),S.add(F),U.hasAnimation?this.driver.query(F,".ng-star-inserted",!0).forEach(function(e){return S.add(e)}):E.add(F));var O=new Map,R=Yw(f,Array.from(S));R.forEach(function(e,n){var t="ng-leave"+m++;O.set(n,t),e.forEach(function(e){return Kw(e,t)})}),e.push(function(){g.forEach(function(e,n){var t=v.get(n);e.forEach(function(e){return qw(e,t)})}),R.forEach(function(e,n){var t=O.get(n);e.forEach(function(e){return qw(e,t)})}),y.forEach(function(e){t.processLeaveNode(e)})});for(var T=[],C=[],_=this._namespaceList.length-1;_>=0;_--)this._namespaceList[_].drainQueuedTransitions(n).forEach(function(e){var n=e.player,i=e.element;if(T.push(n),t.collectedEnterElements.length){var o=i[xw];if(o&&o.setForMove)return void n.destroy()}var c=!d||!t.driver.containsElement(d,i),h=O.get(i),f=v.get(i),g=t._buildInstruction(e,r,f,h,c);if(g.errors&&g.errors.length)C.push(g);else{if(c)return n.onStart(function(){return jA(i,g.fromStyles)}),n.onDestroy(function(){return WA(i,g.toStyles)}),void l.push(n);if(e.isFallbackTransition)return n.onStart(function(){return jA(i,g.fromStyles)}),n.onDestroy(function(){return WA(i,g.toStyles)}),void l.push(n);g.timelines.forEach(function(e){return e.stretchStartingKeyframe=!0}),r.append(i,g.timelines),u.push({instruction:g,player:n,element:i}),g.queriedElements.forEach(function(e){return EA(s,e,[]).push(n)}),g.preStyleProps.forEach(function(e,n){var t=Object.keys(e);if(t.length){var r=a.get(n);r||a.set(n,r=new Set),t.forEach(function(e){return r.add(e)})}}),g.postStyleProps.forEach(function(e,n){var t=Object.keys(e),r=p.get(n);r||p.set(n,r=new Set),t.forEach(function(e){return r.add(e)})})}});if(C.length){var I=[];C.forEach(function(e){I.push("@"+e.triggerName+" has failed due to:\n"),e.errors.forEach(function(e){return I.push("- "+e+"\n")})}),T.forEach(function(e){return e.destroy()}),this.reportError(I)}var A=new Map,w=new Map;u.forEach(function(e){var n=e.element;r.has(n)&&(w.set(n,n),t._beforeAnimationBuild(e.player.namespaceId,e.instruction,A))}),l.forEach(function(e){var n=e.element;t._getPreviousPlayers(n,!1,e.namespaceId,e.triggerName,null).forEach(function(e){EA(A,n,[]).push(e),e.destroy()})});var N=y.filter(function(e){return Qw(e,a,p)}),P=new Map;jw(P,this.driver,E,p,uA).forEach(function(e){Qw(e,a,p)&&N.push(e)});var D=new Map;g.forEach(function(e,n){jw(D,t.driver,new Set(e),a,dA)}),N.forEach(function(e){var n=P.get(e),t=D.get(e);P.set(e,i({},n,t))});var M=[],k=[],L={};u.forEach(function(e){var n=e.element,i=e.player,u=e.instruction;if(r.has(n)){if(h.has(n))return i.onDestroy(function(){return WA(n,u.toStyles)}),i.disabled=!0,i.overrideTotalTime(u.totalTime),void l.push(i);var s=L;if(w.size>1){for(var a=n,c=[];a=a.parentNode;){var p=w.get(a);if(p){s=p;break}c.push(a)}c.forEach(function(e){return w.set(e,s)})}var d=t._buildAnimation(i.namespaceId,u,A,o,D,P);if(i.setRealPlayer(d),s===L)M.push(i);else{var f=t.playersByElement.get(s);f&&f.length&&(i.parentPlayer=gA(f)),l.push(i)}}else jA(n,u.fromStyles),i.onDestroy(function(){return WA(n,u.toStyles)}),k.push(i),h.has(n)&&l.push(i)}),k.forEach(function(e){var n=o.get(e.element);if(n&&n.length){var t=gA(n);e.setRealPlayer(t)}}),l.forEach(function(e){e.parentPlayer?e.syncPlayerEvents(e.parentPlayer):e.destroy()});for(var x=0;x<y.length;x++){var F,U=(F=y[x])[xw];if(qw(F,"ng-leave"),!U||!U.hasAnimation){var H=[];if(s.size){var G=s.get(F);G&&G.length&&H.push.apply(H,c(G));for(var B=this.driver.query(F,".ng-animating",!0),V=0;V<B.length;V++){var W=s.get(B[V]);W&&W.length&&H.push.apply(H,c(W))}}var j=H.filter(function(e){return!e.destroyed});j.length?$w(this,F,j):this.processLeaveNode(F)}}return y.length=0,M.forEach(function(e){t.players.push(e),e.onDone(function(){e.destroy();var n=t.players.indexOf(e);t.players.splice(n,1)}),e.play()}),M},e.prototype.elementContainsData=function(e,n){var t=!1,r=n[xw];return r&&r.setForRemoval&&(t=!0),this.playersByElement.has(n)&&(t=!0),this.playersByQueriedElement.has(n)&&(t=!0),this.statesByElement.has(n)&&(t=!0),this._fetchNamespace(e).elementContainsData(n)||t},e.prototype.afterFlush=function(e){this._flushFns.push(e)},e.prototype.afterFlushAnimationsDone=function(e){this._whenQuietFns.push(e)},e.prototype._getPreviousPlayers=function(e,n,t,r,l){var i=[];if(n){var o=this.playersByQueriedElement.get(e);o&&(i=o)}else{var u=this.playersByElement.get(e);if(u){var s=!l||"void"==l;u.forEach(function(e){e.queued||(s||e.triggerName==r)&&i.push(e)})}}return(t||r)&&(i=i.filter(function(e){return!(t&&t!=e.namespaceId||r&&r!=e.triggerName)})),i},e.prototype._beforeAnimationBuild=function(e,n,t){var r,l,i=n.element,o=n.isRemovalTransition?void 0:e,u=n.isRemovalTransition?void 0:n.triggerName,a=function(e){var r=e.element,l=r!==i,s=EA(t,r,[]);c._getPreviousPlayers(r,l,o,u,n.toState).forEach(function(e){var n=e.getRealPlayer();n.beforeDestroy&&n.beforeDestroy(),e.destroy(),s.push(e)})},c=this;try{for(var p=s(n.timelines),h=p.next();!h.done;h=p.next())a(h.value)}catch(d){r={error:d}}finally{try{h&&!h.done&&(l=p.return)&&l.call(p)}finally{if(r)throw r.error}}jA(i,n.fromStyles)},e.prototype._buildAnimation=function(e,n,t,r,l,i){var o=this,u=n.triggerName,s=n.element,a=[],c=new Set,p=new Set,h=n.timelines.map(function(n){var h=n.element;c.add(h);var d=h[xw];if(d&&d.removedBeforeQueried)return new pA(n.duration,n.delay);var f,g,v=h!==s,m=(f=(t.get(h)||Mw).map(function(e){return e.getRealPlayer()}),g=[],function e(n,t){for(var r=0;r<n.length;r++){var l=n[r];l instanceof hA?e(l.players,t):t.push(l)}}(f,g),g).filter(function(e){return!!e.element&&e.element===h}),y=l.get(h),S=i.get(h),E=vA(0,o._normalizer,0,n.keyframes,y,S),b=o._buildPlayer(n,E,m);if(n.subTimeline&&r&&p.add(h),v){var O=new Bw(e,u,h);O.setRealPlayer(b),a.push(O)}return b});a.forEach(function(e){EA(o.playersByQueriedElement,e.element,[]).push(e),e.onDone(function(){return function(e,n,t){var r;if(e instanceof Map){if(r=e.get(n)){if(r.length){var l=r.indexOf(t);r.splice(l,1)}0==r.length&&e.delete(n)}}else(r=e[n])&&(r.length&&(l=r.indexOf(t),r.splice(l,1)),0==r.length&&delete e[n]);return r}(o.playersByQueriedElement,e.element,e)})}),c.forEach(function(e){return Kw(e,"ng-animating")});var d=gA(h);return d.onDestroy(function(){c.forEach(function(e){return qw(e,"ng-animating")}),WA(s,n.toStyles)}),p.forEach(function(e){EA(r,e,[]).push(d)}),d},e.prototype._buildPlayer=function(e,n,t){return n.length>0?this.driver.animate(e.element,n,e.duration,e.delay,e.easing,t):new pA(e.duration,e.delay)},e}(),Bw=function(){function e(e,n,t){this.namespaceId=e,this.triggerName=n,this.element=t,this._player=new pA,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}return e.prototype.setRealPlayer=function(e){var n=this;this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(function(t){n._queuedCallbacks[t].forEach(function(n){return mA(e,t,void 0,n)})}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)},e.prototype.getRealPlayer=function(){return this._player},e.prototype.overrideTotalTime=function(e){this.totalTime=e},e.prototype.syncPlayerEvents=function(e){var n=this,t=this._player;t.triggerCallback&&e.onStart(function(){return t.triggerCallback("start")}),e.onDone(function(){return n.finish()}),e.onDestroy(function(){return n.destroy()})},e.prototype._queueEvent=function(e,n){EA(this._queuedCallbacks,e,[]).push(n)},e.prototype.onDone=function(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)},e.prototype.onStart=function(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)},e.prototype.onDestroy=function(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)},e.prototype.init=function(){this._player.init()},e.prototype.hasStarted=function(){return!this.queued&&this._player.hasStarted()},e.prototype.play=function(){!this.queued&&this._player.play()},e.prototype.pause=function(){!this.queued&&this._player.pause()},e.prototype.restart=function(){!this.queued&&this._player.restart()},e.prototype.finish=function(){this._player.finish()},e.prototype.destroy=function(){this.destroyed=!0,this._player.destroy()},e.prototype.reset=function(){!this.queued&&this._player.reset()},e.prototype.setPosition=function(e){this.queued||this._player.setPosition(e)},e.prototype.getPosition=function(){return this.queued?0:this._player.getPosition()},e.prototype.triggerCallback=function(e){var n=this._player;n.triggerCallback&&n.triggerCallback(e)},e}();function Vw(e){return e&&1===e.nodeType}function Ww(e,n){var t=e.style.display;return e.style.display=null!=n?n:"none",t}function jw(e,n,t,r,l){var i=[];t.forEach(function(e){return i.push(Ww(e))});var o=[];r.forEach(function(t,r){var i={};t.forEach(function(e){var t=i[e]=n.computeStyle(r,e,l);t&&0!=t.length||(r[xw]=Lw,o.push(r))}),e.set(r,i)});var u=0;return t.forEach(function(e){return Ww(e,i[u++])}),o}function Yw(e,n){var t=new Map;if(e.forEach(function(e){return t.set(e,[])}),0==n.length)return t;var r=new Set(n),l=new Map;return n.forEach(function(e){var n=function e(n){if(!n)return 1;var i=l.get(n);if(i)return i;var o=n.parentNode;return i=t.has(o)?o:r.has(o)?1:e(o),l.set(n,i),i}(e);1!==n&&t.get(n).push(e)}),t}var zw="$$classes";function Kw(e,n){if(e.classList)e.classList.add(n);else{var t=e[zw];t||(t=e[zw]={}),t[n]=!0}}function qw(e,n){if(e.classList)e.classList.remove(n);else{var t=e[zw];t&&delete t[n]}}function $w(e,n,t){gA(t).onDone(function(){return e.processLeaveNode(n)})}function Qw(e,n,t){var r=t.get(e);if(!r)return!1;var l=n.get(e);return l?r.forEach(function(e){return l.add(e)}):n.set(e,r),t.delete(e),!0}var Zw=function(){function e(e,n,t){var r=this;this.bodyNode=e,this._driver=n,this._triggerCache={},this.onRemovalComplete=function(e,n){},this._transitionEngine=new Gw(e,n,t),this._timelineEngine=new Dw(e,n,t),this._transitionEngine.onRemovalComplete=function(e,n){return r.onRemovalComplete(e,n)}}return e.prototype.registerTrigger=function(e,n,t,r,l){var i=e+"-"+r,o=this._triggerCache[i];if(!o){var u=[],s=lw(this._driver,l,u);if(u.length)throw new Error('The animation trigger "'+r+'" has failed to build due to the following errors:\n - '+u.join("\n - "));o=function(e,n){return new ww(e,n)}(r,s),this._triggerCache[i]=o}this._transitionEngine.registerTrigger(n,r,o)},e.prototype.register=function(e,n){this._transitionEngine.register(e,n)},e.prototype.destroy=function(e,n){this._transitionEngine.destroy(e,n)},e.prototype.onInsert=function(e,n,t,r){this._transitionEngine.insertNode(e,n,t,r)},e.prototype.onRemove=function(e,n,t){this._transitionEngine.removeNode(e,n,t)},e.prototype.disableAnimations=function(e,n){this._transitionEngine.markElementAsDisabled(e,n)},e.prototype.process=function(e,n,t,r){if("@"==t.charAt(0)){var l=a(bA(t),2);this._timelineEngine.command(l[0],n,l[1],r)}else this._transitionEngine.trigger(e,n,t,r)},e.prototype.listen=function(e,n,t,r,l){if("@"==t.charAt(0)){var i=a(bA(t),2);return this._timelineEngine.listen(i[0],n,i[1],l)}return this._transitionEngine.listen(e,n,t,r,l)},e.prototype.flush=function(e){void 0===e&&(e=-1),this._transitionEngine.flush(e)},Object.defineProperty(e.prototype,"players",{get:function(){return this._transitionEngine.players.concat(this._timelineEngine.players)},enumerable:!0,configurable:!0}),e.prototype.whenRenderingDone=function(){return this._transitionEngine.whenRenderingDone()},e}(),Xw=function(e){function n(n,t){var r=e.call(this)||this;return r._nextAnimationId=0,r._renderer=n.createRenderer(t.body,{id:"0",encapsulation:Ue.None,styles:[],data:{animation:[]}}),r}return l(n,e),n.prototype.build=function(e){var n=this._nextAnimationId.toString();this._nextAnimationId++;var t=Array.isArray(e)?sA(e):e;return nN(this._renderer,null,n,"register",[t]),new Jw(n,this._renderer)},n}(iA),Jw=function(e){function n(n,t){var r=e.call(this)||this;return r._id=n,r._renderer=t,r}return l(n,e),n.prototype.create=function(e,n){return new eN(this._id,e,n||{},this._renderer)},n}(oA),eN=function(){function e(e,n,t,r){this.id=e,this.element=n,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",t)}return e.prototype._listen=function(e,n){return this._renderer.listen(this.element,"@@"+this.id+":"+e,n)},e.prototype._command=function(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];return nN(this._renderer,this.element,this.id,e,n)},e.prototype.onDone=function(e){this._listen("done",e)},e.prototype.onStart=function(e){this._listen("start",e)},e.prototype.onDestroy=function(e){this._listen("destroy",e)},e.prototype.init=function(){this._command("init")},e.prototype.hasStarted=function(){return this._started},e.prototype.play=function(){this._command("play"),this._started=!0},e.prototype.pause=function(){this._command("pause")},e.prototype.restart=function(){this._command("restart")},e.prototype.finish=function(){this._command("finish")},e.prototype.destroy=function(){this._command("destroy")},e.prototype.reset=function(){this._command("reset")},e.prototype.setPosition=function(e){this._command("setPosition",e)},e.prototype.getPosition=function(){return 0},e}();function nN(e,n,t,r,l){return e.setProperty(n,"@@"+t+":"+r,l)}var tN=function(){function e(e,n,t){this.delegate=e,this.engine=n,this._zone=t,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),n.onRemovalComplete=function(e,n){n&&n.parentNode(e)&&n.removeChild(e.parentNode,e)}}return e.prototype.createRenderer=function(e,n){var t=this,r=this.delegate.createRenderer(e,n);if(!(e&&n&&n.data&&n.data.animation)){var l=this._rendererCache.get(r);return l||(l=new rN("",r,this.engine),this._rendererCache.set(r,l)),l}var i=n.id,o=n.id+"-"+this._currentId;return this._currentId++,this.engine.register(o,e),n.data.animation.forEach(function(n){return t.engine.registerTrigger(i,o,e,n.name,n)}),new lN(this,o,r,this.engine)},e.prototype.begin=function(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()},e.prototype._scheduleCountTask=function(){var e=this;this.promise.then(function(){e._microtaskId++})},e.prototype.scheduleListenerCallback=function(e,n,t){var r=this;e>=0&&e<this._microtaskId?this._zone.run(function(){return n(t)}):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(function(){r._zone.run(function(){r._animationCallbacksBuffer.forEach(function(e){var n=a(e,2);(0,n[0])(n[1])}),r._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([n,t]))},e.prototype.end=function(){var e=this;this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(function(){e._scheduleCountTask(),e.engine.flush(e._microtaskId)}),this.delegate.end&&this.delegate.end()},e.prototype.whenRenderingDone=function(){return this.engine.whenRenderingDone()},e}(),rN=function(){function e(e,n,t){this.namespaceId=e,this.delegate=n,this.engine=t,this.destroyNode=this.delegate.destroyNode?function(e){return n.destroyNode(e)}:null}return Object.defineProperty(e.prototype,"data",{get:function(){return this.delegate.data},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()},e.prototype.createElement=function(e,n){return this.delegate.createElement(e,n)},e.prototype.createComment=function(e){return this.delegate.createComment(e)},e.prototype.createText=function(e){return this.delegate.createText(e)},e.prototype.appendChild=function(e,n){this.delegate.appendChild(e,n),this.engine.onInsert(this.namespaceId,n,e,!1)},e.prototype.insertBefore=function(e,n,t){this.delegate.insertBefore(e,n,t),this.engine.onInsert(this.namespaceId,n,e,!0)},e.prototype.removeChild=function(e,n){this.engine.onRemove(this.namespaceId,n,this.delegate)},e.prototype.selectRootElement=function(e,n){return this.delegate.selectRootElement(e,n)},e.prototype.parentNode=function(e){return this.delegate.parentNode(e)},e.prototype.nextSibling=function(e){return this.delegate.nextSibling(e)},e.prototype.setAttribute=function(e,n,t,r){this.delegate.setAttribute(e,n,t,r)},e.prototype.removeAttribute=function(e,n,t){this.delegate.removeAttribute(e,n,t)},e.prototype.addClass=function(e,n){this.delegate.addClass(e,n)},e.prototype.removeClass=function(e,n){this.delegate.removeClass(e,n)},e.prototype.setStyle=function(e,n,t,r){this.delegate.setStyle(e,n,t,r)},e.prototype.removeStyle=function(e,n,t){this.delegate.removeStyle(e,n,t)},e.prototype.setProperty=function(e,n,t){"@"==n.charAt(0)&&"@.disabled"==n?this.disableAnimations(e,!!t):this.delegate.setProperty(e,n,t)},e.prototype.setValue=function(e,n){this.delegate.setValue(e,n)},e.prototype.listen=function(e,n,t){return this.delegate.listen(e,n,t)},e.prototype.disableAnimations=function(e,n){this.engine.disableAnimations(e,n)},e}(),lN=function(e){function n(n,t,r,l){var i=e.call(this,t,r,l)||this;return i.factory=n,i.namespaceId=t,i}return l(n,e),n.prototype.setProperty=function(e,n,t){"@"==n.charAt(0)?"."==n.charAt(1)&&"@.disabled"==n?this.disableAnimations(e,t=void 0===t||!!t):this.engine.process(this.namespaceId,e,n.substr(1),t):this.delegate.setProperty(e,n,t)},n.prototype.listen=function(e,n,t){var r,l,i,o=this;if("@"==n.charAt(0)){var u=function(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(e),s=n.substr(1),c="";return"@"!=s.charAt(0)&&(s=(r=a((l=s,i=l.indexOf("."),[l.substring(0,i),l.substr(i+1)]),2))[0],c=r[1]),this.engine.listen(this.namespaceId,u,s,c,function(e){o.factory.scheduleListenerCallback(e._data||-1,t,e)})}return this.delegate.listen(e,n,t)},n}(rN),iN=function(e){function n(n,t,r){return e.call(this,n.body,t,r)||this}return l(n,e),n}(Zw);function oN(){return new Ow}function uN(e,n,t){return new tN(e,n,t)}var sN=new ye("AnimationModuleType"),aN=function(){return function(){}}(),cN=function(){function e(e,n){this.gameService=e,this.router=n}return e.prototype.canActivate=function(e,n){switch(e.routeConfig.path){case"crafting":return!!this.gameService.isEnabled(Eu.CRAFTING)||(this.goToError(),!1);case"market":return!!this.gameService.isEnabled(Eu.MARKET)||(this.goToError(),!1);case"research":return!!this.gameService.isEnabled(Eu.RESEARCH)||(this.goToError(),!1);case"army":return!!this.gameService.isEnabled(Eu.ARMY)||(this.goToError(),!1);case"religion":return!!this.gameService.isEnabled(Eu.RELIGION)||(this.goToError(),!1);case"weather":return!!this.gameService.isEnabled(Eu.WEATHER)||(this.goToError(),!1);case"mountains":return!!this.gameService.isEnabled(Eu.MOUNTAINS)||(this.goToError(),!1);case"fort":return!!this.gameService.isEnabled(Eu.FORT)||(this.goToError(),!1);case"sea":return!!this.gameService.isEnabled(Eu.SEA)||(this.goToError(),!1);case"field":return!!this.gameService.isEnabled(Eu.FIELD)||(this.goToError(),!1);case"plateau":return!!this.gameService.isEnabled(Eu.PLATEAU)||(this.goToError(),!1);default:return!1}},e.prototype.goToError=function(){this.router.navigate(["/404"],{skipLocationChange:!0})},e.ngInjectableDef=ve({factory:function(){return new e(ze(wg),ze(Cd))},token:e,providedIn:"root"}),e}(),pN=function(){function e(){this.handlers={}}return e.prototype.shouldDetach=function(e){return e.routeConfig&&("village"===e.routeConfig.path||"fort"===e.routeConfig.path||"forest"===e.routeConfig.path||"field"===e.routeConfig.path||"mountains"===e.routeConfig.path||"plateau"===e.routeConfig.path||"sea"===e.routeConfig.path)},e.prototype.store=function(e,n){this.handlers[e.routeConfig.path]=n},e.prototype.shouldAttach=function(e){return!!e.routeConfig&&!!this.handlers[e.routeConfig.path]},e.prototype.retrieve=function(e){return e.routeConfig?this.handlers[e.routeConfig.path]:null},e.prototype.shouldReuseRoute=function(e,n){return!1},e}(),hN=function(){return function(){}}(),dN=fu(cs,[ps],function(e){return function(e){for(var n={},t=[],r=!1,l=0;l<e.length;l++){var i=e[l];i.token===En&&!0===i.value&&(r=!0),1073741824&i.flags&&t.push(i.token),i.index=l,n[pl(i.token)]=i}return{factory:null,providersByKey:n,providers:e,modules:t,isRoot:r}}([ei(512,_n,In,[[8,[tf,sf,qg,dv,Nm,vS,XS,ME,tb,vb,Db,pR,wR,QR,gT,GT,eC,EC,lA]],[3,_n],wn]),ei(4608,Pf,Pf,[]),ei(5120,Kr,Qr,[[3,Kr]]),ei(4608,Ps,Ds,[Kr,[2,Ns]]),ei(5120,Nt,Pt,[]),ei(5120,Br,qr,[]),ei(5120,Vr,$r,[]),ei(4608,Qc,Zc,[Zs]),ei(6144,Hn,null,[Qc]),ei(4608,Wc,Yc,[]),ei(5120,vc,function(e,n,t,r,l,i,o,u){return[new Bc(e,n,t),new $c(r),new zc(l,i,o,u)]},[Zs,Zt,kt,Zs,Zs,Wc,xt,[2,jc]]),ei(4608,mc,mc,[vc,Zt]),ei(135680,Ec,Ec,[Zs]),ei(4608,Ic,Ic,[mc,Ec,Nt]),ei(4608,kA,MA,[]),ei(5120,bw,oN,[]),ei(4608,Zw,iN,[Zs,kA,bw]),ei(5120,kn,uN,[Ic,Zw,Zt]),ei(6144,Sc,null,[Ec]),ei(4608,ir,ir,[Zt]),ei(5120,gh,qd,[Cd]),ei(4608,Ld,Ld,[]),ei(6144,Md,null,[Ld]),ei(135680,xd,xd,[Cd,vt,jt,on,Md]),ei(4608,kd,kd,[]),ei(5120,Fd,Wd,[Cd,ea,Ud]),ei(5120,Xd,Zd,[$d]),ei(5120,Lt,function(e){return[e]},[Xd]),ei(4608,iA,Xw,[kn,uc]),ei(4608,Lg,Lg,[_g,Sg,wg,Ig,Mg,Dg]),ei(1073742336,hg,hg,[]),ei(1073742336,dg,dg,[]),ei(1073742336,Qs,Qs,[]),ei(1024,Ct,ip,[]),ei(1024,ar,function(){return[Bd()]},[]),ei(512,$d,$d,[on]),ei(1024,At,function(e,n){return[(t=e,dc("probe",gc),dc("coreTokens",i({},fc,(t||[]).reduce(function(e,n){return e[n.name]=n.token,e},{}))),function(){return gc}),Qd(n)];var t},[[2,ar],$d]),ei(512,wt,wt,[[2,At]]),ei(131584,fr,fr,[Zt,xt,on,Ct,_n,wt]),ei(1073742336,Zr,Zr,[fr]),ei(1073742336,op,op,[[3,op]]),ei(1024,Hd,Yd,[[3,Cd]]),ei(512,Kp,qp,[]),ei(512,Nd,Nd,[]),ei(256,Ud,{},[]),ei(1024,fs,jd,[hs,[2,gs],Ud]),ei(512,vs,vs,[fs]),ei(512,jt,jt,[]),ei(512,vt,Sr,[jt,[2,mr]]),ei(1024,yd,function(){return[[{path:"",redirectTo:"regions/village",pathMatch:"full"},{path:"404",component:rf,pathMatch:"full"},{path:"resources",component:xg},{path:"management",component:Zg},{path:"crafting",component:Em,canActivate:[cN]},{path:"market",component:sS,canActivate:[cN]},{path:"research",component:GS,canActivate:[cN]},{path:"army",component:mE,canActivate:[cN]},{path:"religion",component:BE,canActivate:[cN]},{path:"weather",component:lb,canActivate:[cN]},{path:"royal",component:Ib},{path:"regions",children:[{path:"",redirectTo:"village",pathMatch:"full"},{path:"village",component:KO},{path:"fort",component:hR,canActivate:[cN]},{path:"forest",component:PR},{path:"field",component:XR,canActivate:[cN]},{path:"mountains",component:mT,canActivate:[cN]},{path:"plateau",component:VT,canActivate:[cN]},{path:"sea",component:tC,canActivate:[cN]}]},{path:"**",redirectTo:"regions/village",pathMatch:"full"}]]},[]),ei(512,vd,pN,[]),ei(1024,Cd,Kd,[fr,Kp,Nd,vs,on,vt,jt,yd,Ud,[2,Ed],[2,vd]]),ei(1073742336,Vd,Vd,[[2,Hd],[2,Cd]]),ei(1073742336,hN,hN,[]),ei(1073742336,aN,aN,[]),ei(1073742336,Gv,Gv,[]),ei(1073742336,cs,cs,[]),ei(256,En,!0,[]),ei(256,sN,"NoopAnimations",[])])});Gu.production&&function(){if(Vn)throw new Error("Cannot enable prod mode after platform setup.");Bn=!1}(),lp().bootstrapModuleFactory(dN).catch(function(e){return console.log(e)})}},[[0,0]]]);